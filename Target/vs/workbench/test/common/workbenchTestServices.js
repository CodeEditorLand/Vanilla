var h=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var v=(t,e,r,o)=>{for(var n=o>1?void 0:o?g(e,r):e,p=t.length-1,l;p>=0;p--)(l=t[p])&&(n=(o?l(e,r,n):l(n))||n);return o&&n&&h(e,r,n),n},I=(t,e)=>(r,o)=>e(r,o,t);import{join as k}from"../../../base/common/path.js";import{basename as m,isEqual as W,isEqualOrParent as y}from"../../../base/common/resources.js";import{URI as c}from"../../../base/common/uri.js";import{Event as s,Emitter as i}from"../../../base/common/event.js";import{IConfigurationService as f}from"../../../platform/configuration/common/configuration.js";import{WorkbenchState as u}from"../../../platform/workspace/common/workspace.js";import{TestWorkspace as C}from"../../../platform/workspace/test/common/testWorkspace.js";import"../../../editor/common/services/textResourceConfiguration.js";import{isLinux as S,isMacintosh as w}from"../../../base/common/platform.js";import{InMemoryStorageService as F}from"../../../platform/storage/common/storage.js";import{WorkingCopyCapabilities as T}from"../../services/workingCopy/common/workingCopy.js";import{NullExtensionService as E}from"../../services/extensions/common/extensions.js";import"../../services/workingCopy/common/workingCopyFileService.js";import{Disposable as a}from"../../../base/common/lifecycle.js";import"../../../platform/files/common/files.js";import{SaveReason as D}from"../../common/editor.js";import"../../../base/common/cancellation.js";import R from"../../../platform/product/common/product.js";import"../../services/activity/common/activity.js";import"../../services/workingCopy/common/storedFileWorkingCopy.js";import{AbstractLoggerService as b,LogLevel as P,NullLogger as _}from"../../../platform/log/common/log.js";import"../../../platform/editor/common/editor.js";import"../../common/editor/editorInput.js";import"../../services/history/common/history.js";import"../../services/filesConfiguration/common/filesConfigurationService.js";import{WorkspaceTrustUriResponse as O}from"../../../platform/workspace/common/workspaceTrust.js";import"../../../platform/markers/common/markers.js";import"../../../platform/progress/common/progress.js";class pr extends b{constructor(e){super(P.Info,e??c.file("tests").with({scheme:"vscode-tests"}))}doCreateLogger(){return new _}}let d=class{constructor(e){this.configurationService=e}getEOL(e,r){const o=this.configurationService.getValue("files.eol",{overrideIdentifier:r,resource:e});return o&&typeof o=="string"&&o!=="auto"?o:S||w?`
`:`\r
`}};d=v([I(0,f)],d);class lr{workspace;options;_onDidChangeWorkspaceName;get onDidChangeWorkspaceName(){return this._onDidChangeWorkspaceName.event}_onWillChangeWorkspaceFolders;get onWillChangeWorkspaceFolders(){return this._onWillChangeWorkspaceFolders.event}_onDidChangeWorkspaceFolders;get onDidChangeWorkspaceFolders(){return this._onDidChangeWorkspaceFolders.event}_onDidChangeWorkbenchState;get onDidChangeWorkbenchState(){return this._onDidChangeWorkbenchState.event}constructor(e=C,r=null){this.workspace=e,this.options=r||Object.create(null),this._onDidChangeWorkspaceName=new i,this._onWillChangeWorkspaceFolders=new i,this._onDidChangeWorkspaceFolders=new i,this._onDidChangeWorkbenchState=new i}getFolders(){return this.workspace?this.workspace.folders:[]}getWorkbenchState(){return this.workspace.configuration?u.WORKSPACE:this.workspace.folders.length?u.FOLDER:u.EMPTY}getCompleteWorkspace(){return Promise.resolve(this.getWorkspace())}getWorkspace(){return this.workspace}getWorkspaceFolder(e){return this.workspace.getFolder(e)}setWorkspace(e){this.workspace=e}getOptions(){return this.options}updateOptions(){}isInsideWorkspace(e){return e&&this.workspace?y(e,this.workspace.folders[0].uri):!1}toResource(e){return c.file(k("C:\\",e))}isCurrentWorkspace(e){return c.isUri(e)&&W(this.workspace.folders[0].uri,e)}}class cr extends F{testEmitWillSaveState(e){super.emitWillSaveState(e)}}class ur{constructor(e){this.root=e}async reopenLastClosedEditor(){}async goForward(){}async goBack(){}async goPrevious(){}async goLast(){}removeFromHistory(e){}clear(){}clearRecentlyOpened(){}getHistory(){return[]}async openNextRecentlyUsedEditor(e){}async openPreviouslyUsedEditor(e){}getLastActiveWorkspaceRoot(e){return this.root}getLastActiveFile(e){}}class vr extends a{constructor(r,o=!1,n="testWorkingCopyType"){super();this.resource=r;this.typeId=n;this.dirty=o}_onDidChangeDirty=this._register(new i);onDidChangeDirty=this._onDidChangeDirty.event;_onDidChangeContent=this._register(new i);onDidChangeContent=this._onDidChangeContent.event;_onDidSave=this._register(new i);onDidSave=this._onDidSave.event;capabilities=T.None;name=m(this.resource);dirty=!1;setDirty(r){this.dirty!==r&&(this.dirty=r,this._onDidChangeDirty.fire())}setContent(r){this._onDidChangeContent.fire()}isDirty(){return this.dirty}isModified(){return this.isDirty()}async save(r,o){return this._onDidSave.fire({reason:r?.reason??D.EXPLICIT,stat:o??M(this.resource),source:r?.source}),!0}async revert(r){this.setDirty(!1)}async backup(r){return{}}}function M(t,e=!1){return{resource:t,etag:Date.now().toString(),mtime:Date.now(),ctime:Date.now(),size:42,isFile:!0,isDirectory:!1,isSymbolicLink:!1,readonly:e,locked:!1,name:m(t),children:void 0}}class Ir{onWillRunWorkingCopyFileOperation=s.None;onDidFailWorkingCopyFileOperation=s.None;onDidRunWorkingCopyFileOperation=s.None;addFileOperationParticipant(e){return a.None}hasSaveParticipants=!1;addSaveParticipant(e){return a.None}async runSaveParticipants(e,r,o,n){}async delete(e,r,o){}registerWorkingCopyProvider(e){return a.None}getDirty(e){return[]}create(e,r,o){throw new Error("Method not implemented.")}createFolder(e,r,o){throw new Error("Method not implemented.")}move(e,r,o){throw new Error("Method not implemented.")}copy(e,r,o){throw new Error("Method not implemented.")}}function mr(){return function(){}}class hr extends E{}const gr={_serviceBrand:void 0,...R};class kr{_serviceBrand;onDidChangeActivity=s.None;getViewContainerActivities(e){return[]}getActivity(e){return[]}showViewContainerActivity(e,r){return this}showViewActivity(e,r){return this}showAccountsActivity(e){return this}showGlobalActivity(e){return this}dispose(){}}const Wr=new class{_serviceBrand;onDidChangeAutoSaveConfiguration=s.None;onDidChangeAutoSaveDisabled=s.None;onDidChangeReadonly=s.None;onDidChangeFilesAssociation=s.None;isHotExitEnabled=!1;hotExitConfiguration=void 0;getAutoSaveConfiguration(){throw new Error("Method not implemented.")}getAutoSaveMode(){throw new Error("Method not implemented.")}hasShortAutoSaveDelay(){throw new Error("Method not implemented.")}toggleAutoSave(){throw new Error("Method not implemented.")}disableAutoSave(t){throw new Error("Method not implemented.")}isReadonly(t,e){return!1}async updateReadonly(t,e){}preventSaveConflicts(t,e){throw new Error("Method not implemented.")}};class yr{constructor(e=!0){this.isEnabled=e}_serviceBrand;isWorkspaceTrustEnabled(){return this.isEnabled}}class fr extends a{constructor(r=!0){super();this.trusted=r}_serviceBrand;_onDidChangeTrust=this._register(new i);onDidChangeTrust=this._onDidChangeTrust.event;_onDidChangeTrustedFolders=this._register(new i);onDidChangeTrustedFolders=this._onDidChangeTrustedFolders.event;_onDidInitiateWorkspaceTrustRequestOnStartup=this._register(new i);onDidInitiateWorkspaceTrustRequestOnStartup=this._onDidInitiateWorkspaceTrustRequestOnStartup.event;get acceptsOutOfWorkspaceFiles(){throw new Error("Method not implemented.")}set acceptsOutOfWorkspaceFiles(r){throw new Error("Method not implemented.")}addWorkspaceTrustTransitionParticipant(r){throw new Error("Method not implemented.")}getTrustedUris(){throw new Error("Method not implemented.")}setParentFolderTrust(r){throw new Error("Method not implemented.")}getUriTrustInfo(r){throw new Error("Method not implemented.")}async setTrustedUris(r){throw new Error("Method not implemented.")}async setUrisTrust(r,o){throw new Error("Method not implemented.")}canSetParentFolderTrust(){throw new Error("Method not implemented.")}canSetWorkspaceTrust(){throw new Error("Method not implemented.")}isWorkspaceTrusted(){return this.trusted}isWorkspaceTrustForced(){return!1}get workspaceTrustInitialized(){return Promise.resolve()}get workspaceResolved(){return Promise.resolve()}async setWorkspaceTrust(r){this.trusted!==r&&(this.trusted=r,this._onDidChangeTrust.fire(this.trusted))}}class Cr extends a{constructor(r){super();this._trusted=r}_serviceBrand;_onDidInitiateOpenFilesTrustRequest=this._register(new i);onDidInitiateOpenFilesTrustRequest=this._onDidInitiateOpenFilesTrustRequest.event;_onDidInitiateWorkspaceTrustRequest=this._register(new i);onDidInitiateWorkspaceTrustRequest=this._onDidInitiateWorkspaceTrustRequest.event;_onDidInitiateWorkspaceTrustRequestOnStartup=this._register(new i);onDidInitiateWorkspaceTrustRequestOnStartup=this._onDidInitiateWorkspaceTrustRequestOnStartup.event;requestOpenUrisHandler=async r=>O.Open;requestOpenFilesTrust(r){return this.requestOpenUrisHandler(r)}async completeOpenFilesTrustRequest(r,o){throw new Error("Method not implemented.")}cancelWorkspaceTrustRequest(){throw new Error("Method not implemented.")}async completeWorkspaceTrustRequest(r){throw new Error("Method not implemented.")}async requestWorkspaceTrust(r){return this._trusted}requestWorkspaceTrustOnStartup(){throw new Error("Method not implemented.")}}class Sr{_serviceBrand;onMarkerChanged=s.None;getStatistics(){throw new Error("Method not implemented.")}changeOne(e,r,o){}changeAll(e,r){}remove(e,r){}read(e){return[]}}export{Wr as NullFilesConfigurationService,kr as TestActivityService,lr as TestContextService,hr as TestExtensionService,ur as TestHistoryService,pr as TestLoggerService,Sr as TestMarkerService,gr as TestProductService,cr as TestStorageService,d as TestTextResourcePropertiesService,vr as TestWorkingCopy,Ir as TestWorkingCopyFileService,yr as TestWorkspaceTrustEnablementService,fr as TestWorkspaceTrustManagementService,Cr as TestWorkspaceTrustRequestService,M as createFileStat,mr as mock};
