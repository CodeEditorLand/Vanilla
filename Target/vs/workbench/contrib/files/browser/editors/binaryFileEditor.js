var v=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var f=(m,i,t,o)=>{for(var r=o>1?void 0:o?l(i,t):i,d=m.length-1,e;d>=0;d--)(e=m[d])&&(r=(o?e(i,t,r):e(r))||r);return o&&r&&v(i,t,r),r},p=(m,i)=>(t,o)=>i(t,o,m);import{localize as u}from"../../../../../nls.js";import{BaseBinaryResourceEditor as E}from"../../../../browser/parts/editor/binaryEditor.js";import{ITelemetryService as R}from"../../../../../platform/telemetry/common/telemetry.js";import{IThemeService as S}from"../../../../../platform/theme/common/themeService.js";import"../../../../common/editor/editorInput.js";import{FileEditorInput as a}from"./fileEditorInput.js";import{BINARY_FILE_EDITOR_ID as g,BINARY_TEXT_FILE_MODE as h}from"../../common/files.js";import{IStorageService as T}from"../../../../../platform/storage/common/storage.js";import{EditorResolution as O}from"../../../../../platform/editor/common/editor.js";import{IEditorResolverService as y,ResolvedStatus as c}from"../../../../services/editor/common/editorResolverService.js";import{isEditorInputWithOptions as D}from"../../../../common/editor.js";import{DiffEditorInput as A}from"../../../../common/editor/diffEditorInput.js";import"../../../../services/editor/common/editorGroupsService.js";let n=class extends E{constructor(t,o,r,d,e){super(n.ID,t,{openInternal:(s,I)=>this.openInternal(s,I)},o,r,e);this.editorResolverService=d}static ID=g;async openInternal(t,o){if(t instanceof a&&this.group.activeEditor){const r=this.group.activeEditor,d=r?.toUntyped();if(!d)return;let e=await this.editorResolverService.resolveEditor({...d,options:{...o,override:O.PICK}},this.group);if(e===c.NONE)e=void 0;else if(e===c.ABORT)return;if(D(e))for(const s of e.editor instanceof A?[e.editor.original,e.editor.modified]:[e.editor])s instanceof a&&(s.setForceOpenAsText(),s.setPreferredLanguageId(h));await this.group.replaceEditors([{editor:r,replacement:e?.editor??t,options:{...e?.options??o}}])}}getTitle(){return this.input?this.input.getName():u("binaryFileEditor","Binary File Viewer")}};n=f([p(1,R),p(2,S),p(3,y),p(4,T)],n);export{n as BinaryFileEditor};
