var d=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var g=(o,e,t,r)=>{for(var i=r>1?void 0:r?l(e,t):e,n=o.length-1,a;n>=0;n--)(a=o[n])&&(i=(r?a(e,t,i):a(i))||i);return r&&i&&d(e,t,i),i},s=(o,e)=>(t,r)=>e(t,r,o);import{IKeybindingService as S}from"../../../../platform/keybinding/common/keybinding.js";import{IUserDataSyncUtilService as p,getDefaultIgnoredSettings as m}from"../../../../platform/userDataSync/common/userDataSync.js";import"../../../../base/common/collections.js";import{InstantiationType as v,registerSingleton as u}from"../../../../platform/instantiation/common/extensions.js";import"../../../../base/common/jsonFormatter.js";import"../../../../base/common/uri.js";import{ITextModelService as f}from"../../../../editor/common/services/resolverService.js";import{ITextResourcePropertiesService as y,ITextResourceConfigurationService as I}from"../../../../editor/common/services/textResourceConfiguration.js";let c=class{constructor(e,t,r,i){this.keybindingsService=e;this.textModelService=t;this.textResourcePropertiesService=r;this.textResourceConfigurationService=i}async resolveDefaultCoreIgnoredSettings(){return m(!0)}async resolveUserBindings(e){const t={};for(const r of e)t[r]=this.keybindingsService.resolveUserBinding(r).map(i=>i.getUserSettingsLabel()).join(" ");return t}async resolveFormattingOptions(e){try{const t=await this.textModelService.createModelReference(e),{insertSpaces:r,tabSize:i}=t.object.textEditorModel.getOptions(),n=t.object.textEditorModel.getEOL();return t.dispose(),{eol:n,insertSpaces:r,tabSize:i}}catch{}return{eol:this.textResourcePropertiesService.getEOL(e),insertSpaces:!!this.textResourceConfigurationService.getValue(e,"editor.insertSpaces"),tabSize:this.textResourceConfigurationService.getValue(e,"editor.tabSize")}}};c=g([s(0,S),s(1,f),s(2,y),s(3,I)],c),u(p,c,v.Delayed);
