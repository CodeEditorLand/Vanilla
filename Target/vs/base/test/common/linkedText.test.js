import e from"assert";import{parseLinkedText as t}from"../../common/linkedText.js";import{ensureNoDisposablesAreLeakedInTestSuite as l}from"./utils.js";suite("LinkedText",()=>{l(),test("parses correctly",()=>{e.deepStrictEqual(t("").nodes,[]),e.deepStrictEqual(t("hello").nodes,["hello"]),e.deepStrictEqual(t("hello there").nodes,["hello there"]),e.deepStrictEqual(t("Some message with [link text](http://link.href).").nodes,["Some message with ",{label:"link text",href:"http://link.href"},"."]),e.deepStrictEqual(t('Some message with [link text](http://link.href "and a title").').nodes,["Some message with ",{label:"link text",href:"http://link.href",title:"and a title"},"."]),e.deepStrictEqual(t("Some message with [link text](http://link.href 'and a title').").nodes,["Some message with ",{label:"link text",href:"http://link.href",title:"and a title"},"."]),e.deepStrictEqual(t(`Some message with [link text](http://link.href "and a 'title'").`).nodes,["Some message with ",{label:"link text",href:"http://link.href",title:"and a 'title'"},"."]),e.deepStrictEqual(t(`Some message with [link text](http://link.href 'and a "title"').`).nodes,["Some message with ",{label:"link text",href:"http://link.href",title:'and a "title"'},"."]),e.deepStrictEqual(t("Some message with [link text](random stuff).").nodes,["Some message with [link text](random stuff)."]),e.deepStrictEqual(t("Some message with [https link](https://link.href).").nodes,["Some message with ",{label:"https link",href:"https://link.href"},"."]),e.deepStrictEqual(t("Some message with [https link](https:).").nodes,["Some message with [https link](https:)."]),e.deepStrictEqual(t("Some message with [a command](command:foobar).").nodes,["Some message with ",{label:"a command",href:"command:foobar"},"."]),e.deepStrictEqual(t("Some message with [a command](command:).").nodes,["Some message with [a command](command:)."]),e.deepStrictEqual(t('link [one](command:foo "nice") and link [two](http://foo)...').nodes,["link ",{label:"one",href:"command:foo",title:"nice"}," and link ",{label:"two",href:"http://foo"},"..."]),e.deepStrictEqual(t(`link
[one](command:foo "nice")
and link [two](http://foo)...`).nodes,[`link
`,{label:"one",href:"command:foo",title:"nice"},`
and link `,{label:"two",href:"http://foo"},"..."])}),test("Should match non-greedily",()=>{e.deepStrictEqual(t('a [link text 1](http://link.href "title1") b [link text 2](http://link.href "title2") c').nodes,["a ",{label:"link text 1",href:"http://link.href",title:"title1"}," b ",{label:"link text 2",href:"http://link.href",title:"title2"}," c"])})});
