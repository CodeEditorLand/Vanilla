import*as o from"fs";import*as a from"os";import*as u from"child_process";import*as f from"path";let s;async function P(e=!1){return(s===void 0||e)&&(s=d()),s}async function d(){const e=l();if(e===void 0)return!1;if(e>=22e3){const n=c();if(n)return new Promise(t=>{try{u.execFile(n,["--status"],r=>t(!r))}catch{t(!1)}})}else{const n=m();if(n)try{if((await o.promises.stat(n)).isFile())return!0}catch{}}return!1}function l(){const e=/(\d+)\.(\d+)\.(\d+)/g.exec(a.release());if(e)return parseInt(e[3])}function i(e){const n=process.env.SystemRoot;if(n){const t=process.env.hasOwnProperty("PROCESSOR_ARCHITEW6432");return f.join(n,t?"Sysnative":"System32",e)}}function c(){return i("wsl.exe")}function m(){return i("lxss\\LxssManager.dll")}export{P as hasWSLFeatureInstalled};
