import e from"assert";import*as a from"../../common/path.js";import{isWeb as w,isWindows as q}from"../../common/platform.js";import*as x from"../../common/process.js";import{ensureNoDisposablesAreLeakedInTestSuite as p}from"./utils.js";suite("Paths (Node Implementation)",()=>{const m="path.test.js";p(),test("join",()=>{const o=[],c=/\\/g,b=[[[a.posix.join,a.win32.join],[[[".","x/b","..","/b/c.js"],"x/b/c.js"],[[],"."],[["/.","x/b","..","/b/c.js"],"/x/b/c.js"],[["/foo","../../../bar"],"/bar"],[["foo","../../../bar"],"../../bar"],[["foo/","../../../bar"],"../../bar"],[["foo/x","../../../bar"],"../bar"],[["foo/x","./bar"],"foo/x/bar"],[["foo/x/","./bar"],"foo/x/bar"],[["foo/x/",".","bar"],"foo/x/bar"],[["./"],"./"],[[".","./"],"./"],[[".",".","."],"."],[[".","./","."],"."],[[".","/./","."],"."],[[".","/////./","."],"."],[["."],"."],[["","."],"."],[["","foo"],"foo"],[["foo","/bar"],"foo/bar"],[["","/foo"],"/foo"],[["","","/foo"],"/foo"],[["","","foo"],"foo"],[["foo",""],"foo"],[["foo/",""],"foo/"],[["foo","","/bar"],"foo/bar"],[["./","..","/foo"],"../foo"],[["./","..","..","/foo"],"../../foo"],[[".","..","..","/foo"],"../../foo"],[["","..","..","/foo"],"../../foo"],[["/"],"/"],[["/","."],"/"],[["/",".."],"/"],[["/","..",".."],"/"],[[""],"."],[["",""],"."],[[" /foo"]," /foo"],[[" ","foo"]," /foo"],[[" ","."]," "],[[" ","/"]," /"],[[" ",""]," "],[["/","foo"],"/foo"],[["/","/foo"],"/foo"],[["/","//foo"],"/foo"],[["/","","/foo"],"/foo"],[["","/","foo"],"/foo"],[["","/","/foo"],"/foo"]]]];b.push([a.win32.join,b[0][1].slice(0).concat([[["//foo/bar"],"\\\\foo\\bar\\"],[["\\/foo/bar"],"\\\\foo\\bar\\"],[["\\\\foo/bar"],"\\\\foo\\bar\\"],[["//foo","bar"],"\\\\foo\\bar\\"],[["//foo/","bar"],"\\\\foo\\bar\\"],[["//foo","/bar"],"\\\\foo\\bar\\"],[["//foo","","bar"],"\\\\foo\\bar\\"],[["//foo/","","bar"],"\\\\foo\\bar\\"],[["//foo/","","/bar"],"\\\\foo\\bar\\"],[["","//foo","bar"],"\\\\foo\\bar\\"],[["","//foo/","bar"],"\\\\foo\\bar\\"],[["","//foo/","/bar"],"\\\\foo\\bar\\"],[["\\","foo/bar"],"\\foo\\bar"],[["\\","/foo/bar"],"\\foo\\bar"],[["","/","/foo/bar"],"\\foo\\bar"],[["//","foo/bar"],"\\foo\\bar"],[["//","/foo/bar"],"\\foo\\bar"],[["\\\\","/","/foo/bar"],"\\foo\\bar"],[["//"],"\\"],[["//foo"],"\\foo"],[["//foo/"],"\\foo\\"],[["//foo","/"],"\\foo\\"],[["//foo","","/"],"\\foo\\"],[["///foo/bar"],"\\foo\\bar"],[["////foo","bar"],"\\foo\\bar"],[["\\\\\\/foo/bar"],"\\foo\\bar"],[["c:"],"c:."],[["c:."],"c:."],[["c:",""],"c:."],[["","c:"],"c:."],[["c:.","/"],"c:.\\"],[["c:.","file"],"c:file"],[["c:","/"],"c:\\"],[["c:","file"],"c:\\file"]])]),b.forEach(i=>{Array.isArray(i[0])||(i[0]=[i[0]]),i[0].forEach(t=>{i[1].forEach(r=>{const s=t.apply(null,r[0]),n=r[1];let l,f;t===a.win32.join?(l=s.replace(c,"/"),f="win32"):f="posix";const u=`path.${f}.join(${r[0].map(JSON.stringify).join(",")})
  expect=${JSON.stringify(n)}
  actual=${JSON.stringify(s)}`;s!==n&&l!==n&&o.push(`
${u}`)})})}),e.strictEqual(o.length,0,o.join(""))}),test("dirname",()=>{e.strictEqual(a.posix.dirname("/a/b/"),"/a"),e.strictEqual(a.posix.dirname("/a/b"),"/a"),e.strictEqual(a.posix.dirname("/a"),"/"),e.strictEqual(a.posix.dirname(""),"."),e.strictEqual(a.posix.dirname("/"),"/"),e.strictEqual(a.posix.dirname("////"),"/"),e.strictEqual(a.posix.dirname("//a"),"//"),e.strictEqual(a.posix.dirname("foo"),"."),e.strictEqual(a.win32.dirname("c:\\"),"c:\\"),e.strictEqual(a.win32.dirname("c:\\foo"),"c:\\"),e.strictEqual(a.win32.dirname("c:\\foo\\"),"c:\\"),e.strictEqual(a.win32.dirname("c:\\foo\\bar"),"c:\\foo"),e.strictEqual(a.win32.dirname("c:\\foo\\bar\\"),"c:\\foo"),e.strictEqual(a.win32.dirname("c:\\foo\\bar\\baz"),"c:\\foo\\bar"),e.strictEqual(a.win32.dirname("\\"),"\\"),e.strictEqual(a.win32.dirname("\\foo"),"\\"),e.strictEqual(a.win32.dirname("\\foo\\"),"\\"),e.strictEqual(a.win32.dirname("\\foo\\bar"),"\\foo"),e.strictEqual(a.win32.dirname("\\foo\\bar\\"),"\\foo"),e.strictEqual(a.win32.dirname("\\foo\\bar\\baz"),"\\foo\\bar"),e.strictEqual(a.win32.dirname("c:"),"c:"),e.strictEqual(a.win32.dirname("c:foo"),"c:"),e.strictEqual(a.win32.dirname("c:foo\\"),"c:"),e.strictEqual(a.win32.dirname("c:foo\\bar"),"c:foo"),e.strictEqual(a.win32.dirname("c:foo\\bar\\"),"c:foo"),e.strictEqual(a.win32.dirname("c:foo\\bar\\baz"),"c:foo\\bar"),e.strictEqual(a.win32.dirname("file:stream"),"."),e.strictEqual(a.win32.dirname("dir\\file:stream"),"dir"),e.strictEqual(a.win32.dirname("\\\\unc\\share"),"\\\\unc\\share"),e.strictEqual(a.win32.dirname("\\\\unc\\share\\foo"),"\\\\unc\\share\\"),e.strictEqual(a.win32.dirname("\\\\unc\\share\\foo\\"),"\\\\unc\\share\\"),e.strictEqual(a.win32.dirname("\\\\unc\\share\\foo\\bar"),"\\\\unc\\share\\foo"),e.strictEqual(a.win32.dirname("\\\\unc\\share\\foo\\bar\\"),"\\\\unc\\share\\foo"),e.strictEqual(a.win32.dirname("\\\\unc\\share\\foo\\bar\\baz"),"\\\\unc\\share\\foo\\bar"),e.strictEqual(a.win32.dirname("/a/b/"),"/a"),e.strictEqual(a.win32.dirname("/a/b"),"/a"),e.strictEqual(a.win32.dirname("/a"),"/"),e.strictEqual(a.win32.dirname(""),"."),e.strictEqual(a.win32.dirname("/"),"/"),e.strictEqual(a.win32.dirname("////"),"/"),e.strictEqual(a.win32.dirname("foo"),".");function o(c,b,i=!1){const t=i?a.win32.dirname(c):a.posix.dirname(c);t!==b&&e.fail(`${c}: expected: ${b}, ours: ${t}`)}o("foo/bar","foo"),o("foo\\bar","foo",!0),o("/foo/bar","/foo"),o("\\foo\\bar","\\foo",!0),o("/foo","/"),o("\\foo","\\",!0),o("/","/"),o("\\","\\",!0),o("foo","."),o("f","."),o("f/","."),o("/folder/","/"),o("c:\\some\\file.txt","c:\\some",!0),o("c:\\some","c:\\",!0),o("c:\\","c:\\",!0),o("c:","c:",!0),o("\\\\server\\share\\some\\path","\\\\server\\share\\some",!0),o("\\\\server\\share\\some","\\\\server\\share\\",!0),o("\\\\server\\share\\","\\\\server\\share\\",!0)}),test("extname",()=>{const o=[],c=/\//g;[[m,".js"],["",""],["/path/to/file",""],["/path/to/file.ext",".ext"],["/path.to/file.ext",".ext"],["/path.to/file",""],["/path.to/.file",""],["/path.to/.file.ext",".ext"],["/path/to/f.ext",".ext"],["/path/to/..ext",".ext"],["/path/to/..",""],["file",""],["file.ext",".ext"],[".file",""],[".file.ext",".ext"],["/file",""],["/file.ext",".ext"],["/.file",""],["/.file.ext",".ext"],[".path/file.ext",".ext"],["file.ext.ext",".ext"],["file.","."],[".",""],["./",""],[".file.ext",".ext"],[".file",""],[".file.","."],[".file..","."],["..",""],["../",""],["..file.ext",".ext"],["..file",".file"],["..file.","."],["..file..","."],["...","."],["...ext",".ext"],["....","."],["file.ext/",".ext"],["file.ext//",".ext"],["file/",""],["file//",""],["file./","."],["file.//","."]].forEach(b=>{const i=b[1];[a.posix.extname,a.win32.extname].forEach(t=>{let r=b[0],s;t===a.win32.extname?(r=r.replace(c,"\\"),s="win32"):s="posix";const n=t(r),l=`path.${s}.extname(${JSON.stringify(r)})
  expect=${JSON.stringify(i)}
  actual=${JSON.stringify(n)}`;n!==i&&o.push(`
${l}`)});{const t=`C:${b[0].replace(c,"\\")}`,r=a.win32.extname(t),s=`path.win32.extname(${JSON.stringify(t)})
  expect=${JSON.stringify(i)}
  actual=${JSON.stringify(r)}`;r!==i&&o.push(`
${s}`)}}),e.strictEqual(o.length,0,o.join("")),e.strictEqual(a.win32.extname(".\\"),""),e.strictEqual(a.win32.extname("..\\"),""),e.strictEqual(a.win32.extname("file.ext\\"),".ext"),e.strictEqual(a.win32.extname("file.ext\\\\"),".ext"),e.strictEqual(a.win32.extname("file\\"),""),e.strictEqual(a.win32.extname("file\\\\"),""),e.strictEqual(a.win32.extname("file.\\"),"."),e.strictEqual(a.win32.extname("file.\\\\"),"."),e.strictEqual(a.posix.extname(".\\"),""),e.strictEqual(a.posix.extname("..\\"),".\\"),e.strictEqual(a.posix.extname("file.ext\\"),".ext\\"),e.strictEqual(a.posix.extname("file.ext\\\\"),".ext\\\\"),e.strictEqual(a.posix.extname("file\\"),""),e.strictEqual(a.posix.extname("file\\\\"),""),e.strictEqual(a.posix.extname("file.\\"),".\\"),e.strictEqual(a.posix.extname("file.\\\\"),".\\\\"),e.strictEqual(a.extname("far.boo"),".boo"),e.strictEqual(a.extname("far.b"),".b"),e.strictEqual(a.extname("far."),"."),e.strictEqual(a.extname("far.boo/boo.far"),".far"),e.strictEqual(a.extname("far.boo/boo"),"")}),test("resolve",()=>{const o=[],c=/\//g,b=/\\/g;[[a.win32.resolve,[[["c:/blah\\blah","d:/games","c:../a"],"c:\\blah\\a"],[["c:/ignore","d:\\a/b\\c/d","\\e.exe"],"d:\\e.exe"],[["c:/ignore","c:/some/file"],"c:\\some\\file"],[["d:/ignore","d:some/dir//"],"d:\\ignore\\some\\dir"],[["//server/share","..","relative\\"],"\\\\server\\share\\relative"],[["c:/","//"],"c:\\"],[["c:/","//dir"],"c:\\dir"],[["c:/","//server/share"],"\\\\server\\share\\"],[["c:/","//server//share"],"\\\\server\\share\\"],[["c:/","///some//dir"],"c:\\some\\dir"],[["C:\\foo\\tmp.3\\","..\\tmp.3\\cycles\\root.js"],"C:\\foo\\tmp.3\\cycles\\root.js"]]],[a.posix.resolve,[[["/var/lib","../","file/"],"/var/file"],[["/var/lib","/../","file/"],"/file"],[["/some/dir",".","/absolute/"],"/absolute"],[["/foo/tmp.3/","../tmp.3/cycles/root.js"],"/foo/tmp.3/cycles/root.js"]]],[w?a.posix.resolve:a.resolve,[[["."],x.cwd()],[["a/b/c","../../.."],x.cwd()]]]].forEach(t=>{const r=t[0];t[1].forEach(s=>{const n=r.apply(null,s[0]);let l;const f=r===a.win32.resolve?"win32":"posix";r===a.win32.resolve&&!q?l=n.replace(b,"/"):r!==a.win32.resolve&&q&&(l=n.replace(c,"\\"));const u=s[1],E=`path.${f}.resolve(${s[0].map(JSON.stringify).join(",")})
  expect=${JSON.stringify(u)}
  actual=${JSON.stringify(n)}`;n!==u&&l!==u&&o.push(`
${E}`)})}),e.strictEqual(o.length,0,o.join(""))}),test("basename",()=>{e.strictEqual(a.basename(m),"path.test.js"),e.strictEqual(a.basename(m,".js"),"path.test"),e.strictEqual(a.basename(".js",".js"),""),e.strictEqual(a.basename(""),""),e.strictEqual(a.basename("/dir/basename.ext"),"basename.ext"),e.strictEqual(a.basename("/basename.ext"),"basename.ext"),e.strictEqual(a.basename("basename.ext"),"basename.ext"),e.strictEqual(a.basename("basename.ext/"),"basename.ext"),e.strictEqual(a.basename("basename.ext//"),"basename.ext"),e.strictEqual(a.basename("aaa/bbb","/bbb"),"bbb"),e.strictEqual(a.basename("aaa/bbb","a/bbb"),"bbb"),e.strictEqual(a.basename("aaa/bbb","bbb"),"bbb"),e.strictEqual(a.basename("aaa/bbb//","bbb"),"bbb"),e.strictEqual(a.basename("aaa/bbb","bb"),"b"),e.strictEqual(a.basename("aaa/bbb","b"),"bb"),e.strictEqual(a.basename("/aaa/bbb","/bbb"),"bbb"),e.strictEqual(a.basename("/aaa/bbb","a/bbb"),"bbb"),e.strictEqual(a.basename("/aaa/bbb","bbb"),"bbb"),e.strictEqual(a.basename("/aaa/bbb//","bbb"),"bbb"),e.strictEqual(a.basename("/aaa/bbb","bb"),"b"),e.strictEqual(a.basename("/aaa/bbb","b"),"bb"),e.strictEqual(a.basename("/aaa/bbb"),"bbb"),e.strictEqual(a.basename("/aaa/"),"aaa"),e.strictEqual(a.basename("/aaa/b"),"b"),e.strictEqual(a.basename("/a/b"),"b"),e.strictEqual(a.basename("//a"),"a"),e.strictEqual(a.basename("a","a"),""),e.strictEqual(a.win32.basename("\\dir\\basename.ext"),"basename.ext"),e.strictEqual(a.win32.basename("\\basename.ext"),"basename.ext"),e.strictEqual(a.win32.basename("basename.ext"),"basename.ext"),e.strictEqual(a.win32.basename("basename.ext\\"),"basename.ext"),e.strictEqual(a.win32.basename("basename.ext\\\\"),"basename.ext"),e.strictEqual(a.win32.basename("foo"),"foo"),e.strictEqual(a.win32.basename("aaa\\bbb","\\bbb"),"bbb"),e.strictEqual(a.win32.basename("aaa\\bbb","a\\bbb"),"bbb"),e.strictEqual(a.win32.basename("aaa\\bbb","bbb"),"bbb"),e.strictEqual(a.win32.basename("aaa\\bbb\\\\\\\\","bbb"),"bbb"),e.strictEqual(a.win32.basename("aaa\\bbb","bb"),"b"),e.strictEqual(a.win32.basename("aaa\\bbb","b"),"bb"),e.strictEqual(a.win32.basename("C:"),""),e.strictEqual(a.win32.basename("C:."),"."),e.strictEqual(a.win32.basename("C:\\"),""),e.strictEqual(a.win32.basename("C:\\dir\\base.ext"),"base.ext"),e.strictEqual(a.win32.basename("C:\\basename.ext"),"basename.ext"),e.strictEqual(a.win32.basename("C:basename.ext"),"basename.ext"),e.strictEqual(a.win32.basename("C:basename.ext\\"),"basename.ext"),e.strictEqual(a.win32.basename("C:basename.ext\\\\"),"basename.ext"),e.strictEqual(a.win32.basename("C:foo"),"foo"),e.strictEqual(a.win32.basename("file:stream"),"file:stream"),e.strictEqual(a.win32.basename("a","a"),""),e.strictEqual(a.posix.basename("\\dir\\basename.ext"),"\\dir\\basename.ext"),e.strictEqual(a.posix.basename("\\basename.ext"),"\\basename.ext"),e.strictEqual(a.posix.basename("basename.ext"),"basename.ext"),e.strictEqual(a.posix.basename("basename.ext\\"),"basename.ext\\"),e.strictEqual(a.posix.basename("basename.ext\\\\"),"basename.ext\\\\"),e.strictEqual(a.posix.basename("foo"),"foo");const o="Icon\r";e.strictEqual(a.posix.basename(`/a/b/${o}`),o),e.strictEqual(a.basename("foo/bar"),"bar"),e.strictEqual(a.posix.basename("foo\\bar"),"foo\\bar"),e.strictEqual(a.win32.basename("foo\\bar"),"bar"),e.strictEqual(a.basename("/foo/bar"),"bar"),e.strictEqual(a.posix.basename("\\foo\\bar"),"\\foo\\bar"),e.strictEqual(a.win32.basename("\\foo\\bar"),"bar"),e.strictEqual(a.basename("./bar"),"bar"),e.strictEqual(a.posix.basename(".\\bar"),".\\bar"),e.strictEqual(a.win32.basename(".\\bar"),"bar"),e.strictEqual(a.basename("/bar"),"bar"),e.strictEqual(a.posix.basename("\\bar"),"\\bar"),e.strictEqual(a.win32.basename("\\bar"),"bar"),e.strictEqual(a.basename("bar/"),"bar"),e.strictEqual(a.posix.basename("bar\\"),"bar\\"),e.strictEqual(a.win32.basename("bar\\"),"bar"),e.strictEqual(a.basename("bar"),"bar"),e.strictEqual(a.basename("////////"),""),e.strictEqual(a.posix.basename("\\\\\\\\"),"\\\\\\\\"),e.strictEqual(a.win32.basename("\\\\\\\\"),"")}),test("relative",()=>{const o=[];[[a.win32.relative,[["c:/blah\\blah","d:/games","d:\\games"],["c:/aaaa/bbbb","c:/aaaa",".."],["c:/aaaa/bbbb","c:/cccc","..\\..\\cccc"],["c:/aaaa/bbbb","c:/aaaa/bbbb",""],["c:/aaaa/bbbb","c:/aaaa/cccc","..\\cccc"],["c:/aaaa/","c:/aaaa/cccc","cccc"],["c:/","c:\\aaaa\\bbbb","aaaa\\bbbb"],["c:/aaaa/bbbb","d:\\","d:\\"],["c:/AaAa/bbbb","c:/aaaa/bbbb",""],["c:/aaaaa/","c:/aaaa/cccc","..\\aaaa\\cccc"],["C:\\foo\\bar\\baz\\quux","C:\\","..\\..\\..\\.."],["C:\\foo\\test","C:\\foo\\test\\bar\\package.json","bar\\package.json"],["C:\\foo\\bar\\baz-quux","C:\\foo\\bar\\baz","..\\baz"],["C:\\foo\\bar\\baz","C:\\foo\\bar\\baz-quux","..\\baz-quux"],["\\\\foo\\bar","\\\\foo\\bar\\baz","baz"],["\\\\foo\\bar\\baz","\\\\foo\\bar",".."],["\\\\foo\\bar\\baz-quux","\\\\foo\\bar\\baz","..\\baz"],["\\\\foo\\bar\\baz","\\\\foo\\bar\\baz-quux","..\\baz-quux"],["C:\\baz-quux","C:\\baz","..\\baz"],["C:\\baz","C:\\baz-quux","..\\baz-quux"],["\\\\foo\\baz-quux","\\\\foo\\baz","..\\baz"],["\\\\foo\\baz","\\\\foo\\baz-quux","..\\baz-quux"],["C:\\baz","\\\\foo\\bar\\baz","\\\\foo\\bar\\baz"],["\\\\foo\\bar\\baz","C:\\baz","C:\\baz"]]],[a.posix.relative,[["/var/lib","/var",".."],["/var/lib","/bin","../../bin"],["/var/lib","/var/lib",""],["/var/lib","/var/apache","../apache"],["/var/","/var/lib","lib"],["/","/var/lib","var/lib"],["/foo/test","/foo/test/bar/package.json","bar/package.json"],["/Users/a/web/b/test/mails","/Users/a/web/b","../.."],["/foo/bar/baz-quux","/foo/bar/baz","../baz"],["/foo/bar/baz","/foo/bar/baz-quux","../baz-quux"],["/baz-quux","/baz","../baz"],["/baz","/baz-quux","../baz-quux"]]]].forEach(b=>{const i=b[0];b[1].forEach(t=>{const r=i(t[0],t[1]),s=t[2],l=`path.${i===a.win32.relative?"win32":"posix"}.relative(${t.slice(0,2).map(JSON.stringify).join(",")})
  expect=${JSON.stringify(s)}
  actual=${JSON.stringify(r)}`;r!==s&&o.push(`
${l}`)})}),e.strictEqual(o.length,0,o.join(""))}),test("normalize",()=>{e.strictEqual(a.win32.normalize("./fixtures///b/../b/c.js"),"fixtures\\b\\c.js"),e.strictEqual(a.win32.normalize("/foo/../../../bar"),"\\bar"),e.strictEqual(a.win32.normalize("a//b//../b"),"a\\b"),e.strictEqual(a.win32.normalize("a//b//./c"),"a\\b\\c"),e.strictEqual(a.win32.normalize("a//b//."),"a\\b"),e.strictEqual(a.win32.normalize("//server/share/dir/file.ext"),"\\\\server\\share\\dir\\file.ext"),e.strictEqual(a.win32.normalize("/a/b/c/../../../x/y/z"),"\\x\\y\\z"),e.strictEqual(a.win32.normalize("C:"),"C:."),e.strictEqual(a.win32.normalize("C:..\\abc"),"C:..\\abc"),e.strictEqual(a.win32.normalize("C:..\\..\\abc\\..\\def"),"C:..\\..\\def"),e.strictEqual(a.win32.normalize("C:\\."),"C:\\"),e.strictEqual(a.win32.normalize("file:stream"),"file:stream"),e.strictEqual(a.win32.normalize("bar\\foo..\\..\\"),"bar\\"),e.strictEqual(a.win32.normalize("bar\\foo..\\.."),"bar"),e.strictEqual(a.win32.normalize("bar\\foo..\\..\\baz"),"bar\\baz"),e.strictEqual(a.win32.normalize("bar\\foo..\\"),"bar\\foo..\\"),e.strictEqual(a.win32.normalize("bar\\foo.."),"bar\\foo.."),e.strictEqual(a.win32.normalize("..\\foo..\\..\\..\\bar"),"..\\..\\bar"),e.strictEqual(a.win32.normalize("..\\...\\..\\.\\...\\..\\..\\bar"),"..\\..\\bar"),e.strictEqual(a.win32.normalize("../../../foo/../../../bar"),"..\\..\\..\\..\\..\\bar"),e.strictEqual(a.win32.normalize("../../../foo/../../../bar/../../"),"..\\..\\..\\..\\..\\..\\"),e.strictEqual(a.win32.normalize("../foobar/barfoo/foo/../../../bar/../../"),"..\\..\\"),e.strictEqual(a.win32.normalize("../.../../foobar/../../../bar/../../baz"),"..\\..\\..\\..\\baz"),e.strictEqual(a.win32.normalize("foo/bar\\baz"),"foo\\bar\\baz"),e.strictEqual(a.posix.normalize("./fixtures///b/../b/c.js"),"fixtures/b/c.js"),e.strictEqual(a.posix.normalize("/foo/../../../bar"),"/bar"),e.strictEqual(a.posix.normalize("a//b//../b"),"a/b"),e.strictEqual(a.posix.normalize("a//b//./c"),"a/b/c"),e.strictEqual(a.posix.normalize("a//b//."),"a/b"),e.strictEqual(a.posix.normalize("/a/b/c/../../../x/y/z"),"/x/y/z"),e.strictEqual(a.posix.normalize("///..//./foo/.//bar"),"/foo/bar"),e.strictEqual(a.posix.normalize("bar/foo../../"),"bar/"),e.strictEqual(a.posix.normalize("bar/foo../.."),"bar"),e.strictEqual(a.posix.normalize("bar/foo../../baz"),"bar/baz"),e.strictEqual(a.posix.normalize("bar/foo../"),"bar/foo../"),e.strictEqual(a.posix.normalize("bar/foo.."),"bar/foo.."),e.strictEqual(a.posix.normalize("../foo../../../bar"),"../../bar"),e.strictEqual(a.posix.normalize("../.../.././.../../../bar"),"../../bar"),e.strictEqual(a.posix.normalize("../../../foo/../../../bar"),"../../../../../bar"),e.strictEqual(a.posix.normalize("../../../foo/../../../bar/../../"),"../../../../../../"),e.strictEqual(a.posix.normalize("../foobar/barfoo/foo/../../../bar/../../"),"../../"),e.strictEqual(a.posix.normalize("../.../../foobar/../../../bar/../../baz"),"../../../../baz"),e.strictEqual(a.posix.normalize("foo/bar\\baz"),"foo/bar\\baz")}),test("isAbsolute",()=>{e.strictEqual(a.win32.isAbsolute("/"),!0),e.strictEqual(a.win32.isAbsolute("//"),!0),e.strictEqual(a.win32.isAbsolute("//server"),!0),e.strictEqual(a.win32.isAbsolute("//server/file"),!0),e.strictEqual(a.win32.isAbsolute("\\\\server\\file"),!0),e.strictEqual(a.win32.isAbsolute("\\\\server"),!0),e.strictEqual(a.win32.isAbsolute("\\\\"),!0),e.strictEqual(a.win32.isAbsolute("c"),!1),e.strictEqual(a.win32.isAbsolute("c:"),!1),e.strictEqual(a.win32.isAbsolute("c:\\"),!0),e.strictEqual(a.win32.isAbsolute("c:/"),!0),e.strictEqual(a.win32.isAbsolute("c://"),!0),e.strictEqual(a.win32.isAbsolute("C:/Users/"),!0),e.strictEqual(a.win32.isAbsolute("C:\\Users\\"),!0),e.strictEqual(a.win32.isAbsolute("C:cwd/another"),!1),e.strictEqual(a.win32.isAbsolute("C:cwd\\another"),!1),e.strictEqual(a.win32.isAbsolute("directory/directory"),!1),e.strictEqual(a.win32.isAbsolute("directory\\directory"),!1),e.strictEqual(a.posix.isAbsolute("/home/foo"),!0),e.strictEqual(a.posix.isAbsolute("/home/foo/.."),!0),e.strictEqual(a.posix.isAbsolute("bar/"),!1),e.strictEqual(a.posix.isAbsolute("./baz"),!1),["C:/","C:\\","C:/foo","C:\\foo","z:/foo/bar.txt","z:\\foo\\bar.txt","\\\\localhost\\c$\\foo","/","/foo"].forEach(o=>{e.ok(a.win32.isAbsolute(o),o)}),["/","/foo","/foo/bar.txt"].forEach(o=>{e.ok(a.posix.isAbsolute(o),o)}),["","foo","foo/bar","./foo","http://foo.com/bar"].forEach(o=>{e.ok(!a.win32.isAbsolute(o),o)}),["","foo","foo/bar","./foo","http://foo.com/bar","z:/foo/bar.txt"].forEach(o=>{e.ok(!a.posix.isAbsolute(o),o)})}),test("path",()=>{e.strictEqual(a.win32.sep,"\\"),e.strictEqual(a.posix.sep,"/"),e.strictEqual(a.win32.delimiter,";"),e.strictEqual(a.posix.delimiter,":")})});
