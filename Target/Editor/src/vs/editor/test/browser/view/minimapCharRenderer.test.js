import D from"assert";import{ensureNoDisposablesAreLeakedInTestSuite as m}from"../../../../base/test/common/utils.js";import{MinimapCharRendererFactory as _}from"../../../browser/viewParts/minimap/minimapCharRendererFactory.js";import{Constants as t}from"../../../browser/viewParts/minimap/minimapCharSheet.js";import{RGBA8 as A}from"../../../common/core/rgba.js";suite("MinimapCharRenderer",()=>{m();const H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,208,255,255,255,255,255,255,255,120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,208,255,255,255,255,255,255,255,120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,208,255,255,255,255,255,255,255,120,0,0,0,0,0,0,0,0,255,255,255,13,255,255,255,163,255,255,255,243,255,255,255,229,255,255,255,94,255,255,255,208,255,255,255,255,255,255,255,120,0,0,0,0,0,0,0,0,255,255,255,164,255,255,255,255,255,255,255,255,255,255,255,247,255,255,255,252,255,255,255,240,255,255,255,255,255,255,255,120,0,0,0,0,255,255,255,16,255,255,255,251,255,255,255,255,255,255,255,148,255,255,255,2,255,255,255,106,255,255,255,255,255,255,255,255,255,255,255,120,0,0,0,0,255,255,255,59,255,255,255,255,255,255,255,255,255,255,255,34,0,0,0,0,255,255,255,3,255,255,255,240,255,255,255,255,255,255,255,120,0,0,0,0,255,255,255,71,255,255,255,255,255,255,255,255,255,255,255,6,0,0,0,0,0,0,0,0,255,255,255,214,255,255,255,255,255,255,255,120,0,0,0,0,255,255,255,49,255,255,255,255,255,255,255,255,255,255,255,22,0,0,0,0,0,0,0,0,255,255,255,231,255,255,255,255,255,255,255,120,0,0,0,0,255,255,255,14,255,255,255,247,255,255,255,255,255,255,255,105,0,0,0,0,255,255,255,61,255,255,255,255,255,255,255,255,255,255,255,120,0,0,0,0,0,0,0,0,255,255,255,155,255,255,255,255,255,255,255,249,255,255,255,185,255,255,255,240,255,255,255,247,255,255,255,255,255,255,255,120,0,0,0,0,0,0,0,0,255,255,255,14,255,255,255,167,255,255,255,245,255,255,255,232,255,255,255,113,255,255,255,208,255,255,255,255,255,255,255,120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];function l(){const e=new Uint8ClampedArray(t.SAMPLED_CHAR_HEIGHT*t.SAMPLED_CHAR_WIDTH*t.RGBA_CHANNELS_CNT*t.CHAR_COUNT);for(let x=0;x<e.length;x++)e[x]=0;const a=t.SAMPLED_CHAR_WIDTH*t.RGBA_CHANNELS_CNT*t.CHAR_COUNT;let F=(100-t.START_CH_CODE)*t.SAMPLED_CHAR_WIDTH*t.RGBA_CHANNELS_CNT,r=0;for(let x=0;x<t.SAMPLED_CHAR_HEIGHT;x++){let o=F;for(let d=0;d<t.SAMPLED_CHAR_WIDTH;d++)for(let s=0;s<t.RGBA_CHANNELS_CNT;s++)e[o]=H[r],r++,o++;F+=a}return e}function c(n,e){return{colorSpace:"srgb",width:n,height:e,data:new Uint8ClampedArray(n*e*t.RGBA_CHANNELS_CNT)}}test("letter d @ 2x",()=>{const n=l(),e=_.createFromSampleData(n,2),a=new A(0,0,0,255),C=new A(255,255,255,255),F=c(t.BASE_CHAR_WIDTH*2,t.BASE_CHAR_HEIGHT*2);for(let x=0,o=F.data.length/4;x<o;x++)F.data[4*x+0]=a.r,F.data[4*x+1]=a.g,F.data[4*x+2]=a.b,F.data[4*x+3]=255;e.renderChar(F,0,0,100,C,255,a,255,2,!1,!1);const r=[];for(let x=0;x<F.data.length;x++)r[x]=F.data[x];D.deepStrictEqual(r,[45,45,45,255,172,172,172,255,198,198,198,255,200,200,200,255,192,192,192,255,203,203,203,255,0,0,0,255,0,0,0,255])}),test("letter d @ 1x",()=>{const n=l(),e=_.createFromSampleData(n,1),a=new A(0,0,0,255),C=new A(255,255,255,255),F=c(t.BASE_CHAR_WIDTH,t.BASE_CHAR_HEIGHT);for(let x=0,o=F.data.length/4;x<o;x++)F.data[4*x+0]=a.r,F.data[4*x+1]=a.g,F.data[4*x+2]=a.b,F.data[4*x+3]=255;e.renderChar(F,0,0,100,C,255,a,255,1,!1,!1);const r=[];for(let x=0;x<F.data.length;x++)r[x]=F.data[x];D.deepStrictEqual(r,[203,203,203,255,129,129,129,255])})});
