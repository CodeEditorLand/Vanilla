import{DisposableStore as s}from"../../../base/common/lifecycle.js";import"../../../base/common/uri.js";import"../../common/model.js";import{TextModel as o}from"../../common/model/textModel.js";import{ILanguageConfigurationService as m}from"../../common/languages/languageConfigurationRegistry.js";import{ILanguageService as c}from"../../common/languages/language.js";import{LanguageService as d}from"../../common/services/languageService.js";import{ITextResourcePropertiesService as f}from"../../common/services/textResourceConfiguration.js";import{TestLanguageConfigurationService as p}from"./modes/testLanguageConfigurationService.js";import{IConfigurationService as u}from"../../../platform/configuration/common/configuration.js";import{TestConfigurationService as S}from"../../../platform/configuration/test/common/testConfigurationService.js";import{IDialogService as I}from"../../../platform/dialogs/common/dialogs.js";import{TestDialogService as v}from"../../../platform/dialogs/test/common/testDialogService.js";import"../../../platform/instantiation/common/instantiation.js";import{ILogService as T,NullLogService as g}from"../../../platform/log/common/log.js";import{INotificationService as O}from"../../../platform/notification/common/notification.js";import{TestNotificationService as b}from"../../../platform/notification/test/common/testNotificationService.js";import{IThemeService as x}from"../../../platform/theme/common/themeService.js";import{TestThemeService as z}from"../../../platform/theme/test/common/testThemeService.js";import{IUndoRedoService as C}from"../../../platform/undoRedo/common/undoRedo.js";import{UndoRedoService as L}from"../../../platform/undoRedo/common/undoRedoService.js";import{TestTextResourcePropertiesService as F}from"./services/testTextResourcePropertiesService.js";import{IModelService as E}from"../../common/services/model.js";import{ModelService as D}from"../../common/services/modelService.js";import{createServices as M}from"../../../platform/instantiation/test/common/instantiationServiceMock.js";import{PLAINTEXT_LANGUAGE_ID as A}from"../../common/languages/modesRegistry.js";import{ILanguageFeatureDebounceService as P,LanguageFeatureDebounceService as R}from"../../common/services/languageFeatureDebounce.js";import{ILanguageFeaturesService as y}from"../../common/services/languageFeatures.js";import{LanguageFeaturesService as N}from"../../common/services/languageFeaturesService.js";import{IEnvironmentService as W}from"../../../platform/environment/common/environment.js";import{mock as h}from"../../../base/test/common/mock.js";import{ITreeSitterParserService as U}from"../../common/services/treeSitterParserService.js";import{TestTreeSitterParserService as k}from"./services/testTreeSitterService.js";class B extends o{registerDisposable(t){this._register(t)}}function Re(e,t){const i=G(e.join(`
`));t(i),i.dispose()}function w(e){const t=o.DEFAULT_CREATION_OPTIONS;return{tabSize:typeof e.tabSize>"u"?t.tabSize:e.tabSize,indentSize:typeof e.indentSize>"u"?t.indentSize:e.indentSize,insertSpaces:typeof e.insertSpaces>"u"?t.insertSpaces:e.insertSpaces,detectIndentation:typeof e.detectIndentation>"u"?t.detectIndentation:e.detectIndentation,trimAutoWhitespace:typeof e.trimAutoWhitespace>"u"?t.trimAutoWhitespace:e.trimAutoWhitespace,defaultEOL:typeof e.defaultEOL>"u"?t.defaultEOL:e.defaultEOL,isForSimpleWidget:typeof e.isForSimpleWidget>"u"?t.isForSimpleWidget:e.isForSimpleWidget,largeFileOptimizations:typeof e.largeFileOptimizations>"u"?t.largeFileOptimizations:e.largeFileOptimizations,bracketPairColorizationOptions:typeof e.bracketColorizationOptions>"u"?t.bracketPairColorizationOptions:e.bracketColorizationOptions}}function G(e,t=null,i=o.DEFAULT_CREATION_OPTIONS,n=null){const r=new s,a=X(r),l=j(a,e,t,i,n);return l.registerDisposable(r),l}function j(e,t,i=null,n=o.DEFAULT_CREATION_OPTIONS,r=null){const a=w(n);return e.createInstance(B,t,i||A,a,r)}function X(e,t=[]){return M(e,t.concat([[O,b],[I,v],[C,L],[c,d],[m,p],[u,S],[f,F],[x,z],[T,g],[W,new class extends h(){isBuilt=!0;isExtensionDevelopment=!1}],[P,R],[y,N],[E,D],[U,k]]))}export{X as createModelServices,G as createTextModel,j as instantiateTextModel,Re as withEditorModel};
