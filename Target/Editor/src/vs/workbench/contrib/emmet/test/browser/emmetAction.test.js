import{EmmetEditorAction as c}from"../../browser/emmetActions.js";import{withTestCodeEditor as p}from"../../../../../editor/test/browser/testCodeEditor.js";import r from"assert";import{DisposableStore as b}from"../../../../../base/common/lifecycle.js";import{ILanguageService as h}from"../../../../../editor/common/languages/language.js";import{ensureNoDisposablesAreLeakedInTestSuite as f}from"../../../../../base/test/common/utils.js";class k{scopeName;constructor(s){this.scopeName=s}getGrammar(s){return this.scopeName}}suite("Emmet",()=>{test("Get language mode and parent mode for emmet",()=>{p([],{},(n,s,m)=>{const t=m.get(h),e=new b;e.add(t.registerLanguage({id:"markdown"})),e.add(t.registerLanguage({id:"handlebars"})),e.add(t.registerLanguage({id:"nunjucks"})),e.add(t.registerLanguage({id:"laravel-blade"}));function a(l,d,g,u){const i=n.getModel();i||r.fail("Editor model not found"),i.setLanguage(l);const o=c.getLanguage(n,new k(d));o||r.fail("langOutput not found"),r.strictEqual(o.language,g),r.strictEqual(o.parentMode,u)}a("markdown","text.html.markdown","markdown","html"),a("handlebars","text.html.handlebars","handlebars","html"),a("nunjucks","text.html.nunjucks","nunjucks","html"),a("laravel-blade","text.html.php.laravel-blade","laravel-blade","html"),e.dispose()})}),f()});
