var p=Object.defineProperty;var a=Object.getOwnPropertyDescriptor;var c=(d,t,e,r)=>{for(var o=r>1?void 0:r?a(t,e):t,l=d.length-1,i;l>=0;l--)(i=d[l])&&(o=(r?i(t,e,o):i(o))||o);return r&&o&&p(t,e,o),o},n=(d,t)=>(e,r)=>t(e,r,d);import{Disposable as I}from"../../../../base/common/lifecycle.js";import{Schemas as u}from"../../../../base/common/network.js";import"../../../../base/common/uri.js";import"../../../../editor/browser/editorBrowser.js";import{ICodeEditorService as S}from"../../../../editor/browser/services/codeEditorService.js";import{ScrollType as g}from"../../../../editor/common/editorCommon.js";import{ILanguageService as f}from"../../../../editor/common/languages/language.js";import"../../../../editor/common/model.js";import{IModelService as v}from"../../../../editor/common/services/model.js";import{ITextModelService as x}from"../../../../editor/common/services/resolverService.js";import"../../../../platform/editor/common/editor.js";import{applyTextEditorOptions as E}from"../../../common/editor/editorOptions.js";import{SimpleCommentEditor as M}from"./simpleCommentEditor.js";let s=class extends I{constructor(e,r,o,l){super();this._modelService=o;this._languageService=l;this._register(e.registerTextModelContentProvider(u.commentsInput,this)),this._register(r.registerCodeEditorOpenHandler(async(i,m,T)=>!(m instanceof M)||m.getModel()?.uri.toString()!==i.resource.toString()?null:(i.options&&E(i.options,m,g.Immediate),m)))}static ID="comments.input.contentProvider";async provideTextContent(e){return this._modelService.getModel(e)??this._modelService.createModel("",this._languageService.createById("markdown"),e)}};s=c([n(0,x),n(1,S),n(2,v),n(3,f)],s);export{s as CommentsInputContentProvider};
