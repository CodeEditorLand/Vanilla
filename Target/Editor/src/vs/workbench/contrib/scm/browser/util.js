import"../common/history.js";import"../common/scm.js";import{MenuItemAction as u}from"../../../../platform/actions/common/actions.js";import"../../../../base/browser/ui/actionbar/actionbar.js";import"../../../../base/common/lifecycle.js";import{Action as p}from"../../../../base/common/actions.js";import{createActionViewItem as d,createAndFillInActionBarActions as l,createAndFillInContextMenuActions as M}from"../../../../platform/actions/browser/menuEntryActionViewItem.js";import{equals as a}from"../../../../base/common/arrays.js";import{ActionViewItem as S}from"../../../../base/browser/ui/actionbar/actionViewItems.js";import{renderLabelWithIcons as C}from"../../../../base/browser/ui/iconLabel/iconLabels.js";import"../../../../platform/commands/common/commands.js";import"../../../../editor/common/languages.js";import{reset as A}from"../../../../base/browser/dom.js";import"../../../../platform/instantiation/common/instantiation.js";import{ResourceTree as y}from"../../../../base/common/resourceTree.js";function oe(e){return Array.isArray(e.repositories)&&Array.isArray(e.visibleRepositories)}function ie(e){return!!e.provider&&!!e.input}function ne(e){return!!e.validateInput&&typeof e.value=="string"}function se(e){return e.type==="actionButton"}function I(e){return!!e.provider&&!!e.resources}function ce(e){return!!e.sourceUri&&I(e.resourceGroup)}function ue(e){return y.isResourceNode(e)&&I(e.context)}function ae(e){return e.type==="historyItemViewModel"}function Ie(e){return e.type==="historyItemLoadMore"}const m=(e,t)=>e instanceof u&&t instanceof u?e.id===t.id&&e.enabled===t.enabled&&e.hideActions?.isHidden===t.hideActions?.isHidden:e.id===t.id&&e.enabled===t.enabled;function f(e,t,r){let n=[],s=[];const c=()=>{const o=[],i=[];l(e,{shouldForwardArgs:!0},{primary:o,secondary:i},r),!(a(n,o,m)&&a(s,i,m))&&(n=o,s=i,t(o,i))};return c(),e.onDidChange(c)}function me(e,t){return f(e,r=>{t.clear(),t.push(r,{icon:!0,label:!1})},"inline")}function pe(e){const t=[],r=[];return M(e,{shouldForwardArgs:!0},{primary:t,secondary:r},"inline"),r}class v extends p{constructor(r,n){super(`statusbaraction{${r.id}}`,r.title,"",!0);this.command=r;this.commandService=n;this.tooltip=r.tooltip||""}run(){return this.commandService.executeCommand(this.command.id,...this.command.arguments||[])}}class R extends S{constructor(t,r){super(null,t,{...r,icon:!1,label:!0})}updateLabel(){this.options.label&&this.label&&A(this.label,...C(this.action.label))}}function de(e){return(t,r)=>t instanceof v?new R(t,r):d(e,t,r)}function le(e){return`${e.contextValue}:${e.label}${e.rootUri?`:${e.rootUri.toString()}`:""}`}function Me(e){return e.groups.reduce((t,r)=>t+r.resources.length,0)}export{v as StatusBarAction,pe as collectContextMenuActions,f as connectPrimaryMenu,me as connectPrimaryMenuToInlineActionBar,de as getActionViewItemProvider,le as getProviderKey,Me as getRepositoryResourceCount,se as isSCMActionButton,Ie as isSCMHistoryItemLoadMoreTreeElement,ae as isSCMHistoryItemViewModelTreeElement,ne as isSCMInput,ie as isSCMRepository,ce as isSCMResource,I as isSCMResourceGroup,ue as isSCMResourceNode,oe as isSCMViewService};
