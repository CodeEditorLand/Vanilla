import"../../../common/viewModel.js";import"../../../common/core/range.js";import{isWindows as c}from"../../../../base/common/platform.js";function b(o,t,a,d){const e=o.getPlainTextToCopy(t,a,c),p=o.model.getEOL(),u=a&&t.length===1&&t[0].isEmpty(),g=Array.isArray(e)?e:null,i=Array.isArray(e)?e.join(p):e;let r,l=null;if(y.forceCopyWithSyntaxHighlighting||d&&i.length<65536){const n=o.getRichTextToCopy(t,a);n&&(r=n.html,l=n.mode)}return{isFromEmptySelection:u,multicursorText:g,text:i,html:r,mode:l}}class s{static INSTANCE=new s;_lastState;constructor(){this._lastState=null}set(t,a){this._lastState={lastCopiedValue:t,data:a}}get(t){return this._lastState&&this._lastState.lastCopiedValue===t?this._lastState.data:(this._lastState=null,null)}}const y={forceCopyWithSyntaxHighlighting:!1};export{y as CopyOptions,s as InMemoryClipboardMetadataManager,b as getDataToCopy};
