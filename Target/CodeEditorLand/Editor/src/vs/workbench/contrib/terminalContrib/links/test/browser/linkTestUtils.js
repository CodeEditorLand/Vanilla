import{deepStrictEqual as l}from"assert";import"../../browser/links.js";import"../../../../../../base/common/uri.js";async function k(n,u,e,i){e.xterm.reset(),await new Promise(r=>e.xterm.write(n,r));const a=n.split(`\r
`),f=a.filter((r,t)=>t!==a.length-1).reduce((r,t)=>r+Math.max(Math.ceil(t.length/80),1),0),m=[];for(let r=0;r<e.xterm.buffer.active.cursorY+1;r++)m.push(e.xterm.buffer.active.getLine(r));const s=(await e.detect(m,f,e.xterm.buffer.active.cursorY)).map(r=>({link:r.uri?.toString()??r.text,type:i,bufferRange:r.bufferRange})),o=u.map(r=>({type:i,link:"uri"in r?r.uri.toString():r.text,bufferRange:{start:{x:r.range[0][0],y:r.range[0][1]},end:{x:r.range[1][0],y:r.range[1][1]}}}));l(s,o)}export{k as assertLinkHelper};
