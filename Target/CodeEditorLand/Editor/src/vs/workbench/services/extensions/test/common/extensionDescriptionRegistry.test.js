import a from"assert";import{URI as c}from"../../../../../base/common/uri.js";import{ensureNoDisposablesAreLeakedInTestSuite as d}from"../../../../../base/test/common/utils.js";import{ExtensionIdentifier as l,TargetPlatform as p}from"../../../../../platform/extensions/common/extensions.js";import{ExtensionDescriptionRegistry as f}from"../../common/extensionDescriptionRegistry.js";suite("ExtensionDescriptionRegistry",()=>{d(),test("allow removing and adding the same extension at a different version",()=>{const e=new l("a"),t=i(e,"1.0.0"),n=i(e,"2.0.0"),o={readActivationEvents:r=>r.activationEvents??[]},s=new f(o,[t]);s.deltaExtensions([n],[e]),a.deepStrictEqual(s.getAllExtensionDescriptions(),[n])});function i(e,t,n=["*"]){return{name:e.value,publisher:"test",version:"0.0.0",engines:{vscode:"^1.0.0"},identifier:e,extensionLocation:c.parse("nothing://nowhere"),isBuiltin:!1,isUnderDevelopment:!1,isUserBuiltin:!1,activationEvents:n,main:"index.js",targetPlatform:p.UNDEFINED,extensionDependencies:[],enabledApiProposals:void 0}}});
