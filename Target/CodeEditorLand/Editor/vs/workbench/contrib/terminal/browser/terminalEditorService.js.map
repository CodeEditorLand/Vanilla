{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/terminal/browser/terminalEditorService.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, dispose, IDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IContextKey, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { EditorActivation } from '../../../../platform/editor/common/editor.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IShellLaunchConfig, TerminalLocation } from '../../../../platform/terminal/common/terminal.js';\nimport { IEditorPane } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { IDeserializedTerminalEditorInput, ITerminalEditorService, ITerminalInstance, ITerminalInstanceService, TerminalEditorLocation } from './terminal.js';\nimport { TerminalEditorInput } from './terminalEditorInput.js';\nimport { getInstanceFromResource } from './terminalUri.js';\nimport { TerminalContextKeys } from '../common/terminalContextKey.js';\nimport { IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { IEditorService, ACTIVE_GROUP, SIDE_GROUP } from '../../../services/editor/common/editorService.js';\nimport { ILifecycleService } from '../../../services/lifecycle/common/lifecycle.js';\n\nexport class TerminalEditorService extends Disposable implements ITerminalEditorService {\n\tdeclare _serviceBrand: undefined;\n\n\tinstances: ITerminalInstance[] = [];\n\tprivate _activeInstanceIndex: number = -1;\n\tprivate _isShuttingDown = false;\n\tprivate _activeOpenEditorRequest?: { instanceId: number; promise: Promise<IEditorPane | undefined> };\n\n\tprivate _terminalEditorActive: IContextKey<boolean>;\n\n\tprivate _editorInputs: Map</*resource*/string, TerminalEditorInput> = new Map();\n\tprivate _instanceDisposables: Map</*resource*/string, IDisposable[]> = new Map();\n\n\tprivate readonly _onDidDisposeInstance = this._register(new Emitter<ITerminalInstance>());\n\treadonly onDidDisposeInstance = this._onDidDisposeInstance.event;\n\tprivate readonly _onDidFocusInstance = this._register(new Emitter<ITerminalInstance>());\n\treadonly onDidFocusInstance = this._onDidFocusInstance.event;\n\tprivate readonly _onDidChangeInstanceCapability = this._register(new Emitter<ITerminalInstance>());\n\treadonly onDidChangeInstanceCapability = this._onDidChangeInstanceCapability.event;\n\tprivate readonly _onDidChangeActiveInstance = this._register(new Emitter<ITerminalInstance | undefined>());\n\treadonly onDidChangeActiveInstance = this._onDidChangeActiveInstance.event;\n\tprivate readonly _onDidChangeInstances = this._register(new Emitter<void>());\n\treadonly onDidChangeInstances = this._onDidChangeInstances.event;\n\n\tconstructor(\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@IEditorGroupsService private readonly _editorGroupsService: IEditorGroupsService,\n\t\t@ITerminalInstanceService private readonly _terminalInstanceService: ITerminalInstanceService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t\t@ILifecycleService lifecycleService: ILifecycleService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService\n\t) {\n\t\tsuper();\n\t\tthis._terminalEditorActive = TerminalContextKeys.terminalEditorActive.bindTo(contextKeyService);\n\t\tthis._register(toDisposable(() => {\n\t\t\tfor (const d of this._instanceDisposables.values()) {\n\t\t\t\tdispose(d);\n\t\t\t}\n\t\t}));\n\t\tthis._register(lifecycleService.onWillShutdown(() => this._isShuttingDown = true));\n\t\tthis._register(this._editorService.onDidActiveEditorChange(() => {\n\t\t\tconst activeEditor = this._editorService.activeEditor;\n\t\t\tconst instance = activeEditor instanceof TerminalEditorInput ? activeEditor?.terminalInstance : undefined;\n\t\t\tconst terminalEditorActive = !!instance && activeEditor instanceof TerminalEditorInput;\n\t\t\tthis._terminalEditorActive.set(terminalEditorActive);\n\t\t\tif (terminalEditorActive) {\n\t\t\t\tactiveEditor?.setGroup(this._editorService.activeEditorPane?.group);\n\t\t\t\tthis.setActiveInstance(instance);\n\t\t\t} else {\n\t\t\t\tfor (const instance of this.instances) {\n\t\t\t\t\tinstance.resetFocusContextKey();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t\tthis._register(this._editorService.onDidVisibleEditorsChange(() => {\n\t\t\t// add any terminal editors created via the editor service split command\n\t\t\tconst knownIds = this.instances.map(i => i.instanceId);\n\t\t\tconst terminalEditors = this._getActiveTerminalEditors();\n\t\t\tconst unknownEditor = terminalEditors.find(input => {\n\t\t\t\tconst inputId = input instanceof TerminalEditorInput ? input.terminalInstance?.instanceId : undefined;\n\t\t\t\tif (inputId === undefined) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn !knownIds.includes(inputId);\n\t\t\t});\n\t\t\tif (unknownEditor instanceof TerminalEditorInput && unknownEditor.terminalInstance) {\n\t\t\t\tthis._editorInputs.set(unknownEditor.terminalInstance.resource.path, unknownEditor);\n\t\t\t\tthis.instances.push(unknownEditor.terminalInstance);\n\t\t\t}\n\t\t}));\n\n\t\t// Remove the terminal from the managed instances when the editor closes. This fires when\n\t\t// dragging and dropping to another editor or closing the editor via cmd/ctrl+w.\n\t\tthis._register(this._editorService.onDidCloseEditor(e => {\n\t\t\tconst instance = e.editor instanceof TerminalEditorInput ? e.editor.terminalInstance : undefined;\n\t\t\tif (instance) {\n\t\t\t\tconst instanceIndex = this.instances.findIndex(e => e === instance);\n\t\t\t\tif (instanceIndex !== -1) {\n\t\t\t\t\tconst wasActiveInstance = this.instances[instanceIndex] === this.activeInstance;\n\t\t\t\t\tthis._removeInstance(instance);\n\t\t\t\t\tif (wasActiveInstance) {\n\t\t\t\t\t\tthis.setActiveInstance(undefined);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _getActiveTerminalEditors(): EditorInput[] {\n\t\treturn this._editorService.visibleEditors.filter(e => e instanceof TerminalEditorInput && e.terminalInstance?.instanceId);\n\t}\n\n\tget activeInstance(): ITerminalInstance | undefined {\n\t\tif (this.instances.length === 0 || this._activeInstanceIndex === -1) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this.instances[this._activeInstanceIndex];\n\t}\n\n\tsetActiveInstance(instance: ITerminalInstance | undefined): void {\n\t\tthis._activeInstanceIndex = instance ? this.instances.findIndex(e => e === instance) : -1;\n\t\tthis._onDidChangeActiveInstance.fire(this.activeInstance);\n\t}\n\n\tasync focusInstance(instance: ITerminalInstance): Promise<void> {\n\t\treturn instance.focusWhenReady(true);\n\t}\n\n\tasync focusActiveInstance(): Promise<void> {\n\t\treturn this.activeInstance?.focusWhenReady(true);\n\t}\n\n\tasync openEditor(instance: ITerminalInstance, editorOptions?: TerminalEditorLocation): Promise<void> {\n\t\tconst resource = this.resolveResource(instance);\n\t\tif (resource) {\n\t\t\tawait this._activeOpenEditorRequest?.promise;\n\t\t\tthis._activeOpenEditorRequest = {\n\t\t\t\tinstanceId: instance.instanceId,\n\t\t\t\tpromise: this._editorService.openEditor({\n\t\t\t\t\tresource,\n\t\t\t\t\tdescription: instance.description || instance.shellLaunchConfig.type,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tpinned: true,\n\t\t\t\t\t\tforceReload: true,\n\t\t\t\t\t\tpreserveFocus: editorOptions?.preserveFocus\n\t\t\t\t\t}\n\t\t\t\t}, editorOptions?.viewColumn ?? ACTIVE_GROUP)\n\t\t\t};\n\t\t\tawait this._activeOpenEditorRequest?.promise;\n\t\t\tthis._activeOpenEditorRequest = undefined;\n\t\t}\n\t}\n\n\tresolveResource(instance: ITerminalInstance): URI {\n\t\tconst resource = instance.resource;\n\t\tconst inputKey = resource.path;\n\t\tconst cachedEditor = this._editorInputs.get(inputKey);\n\n\t\tif (cachedEditor) {\n\t\t\treturn cachedEditor.resource;\n\t\t}\n\n\t\tinstance.target = TerminalLocation.Editor;\n\t\tconst input = this._instantiationService.createInstance(TerminalEditorInput, resource, instance);\n\t\tthis._registerInstance(inputKey, input, instance);\n\t\treturn input.resource;\n\t}\n\n\tgetInputFromResource(resource: URI): TerminalEditorInput {\n\t\tconst input = this._editorInputs.get(resource.path);\n\t\tif (!input) {\n\t\t\tthrow new Error(`Could not get input from resource: ${resource.path}`);\n\t\t}\n\t\treturn input;\n\t}\n\n\tprivate _registerInstance(inputKey: string, input: TerminalEditorInput, instance: ITerminalInstance): void {\n\t\tthis._editorInputs.set(inputKey, input);\n\t\tthis._instanceDisposables.set(inputKey, [\n\t\t\tinstance.onDidFocus(this._onDidFocusInstance.fire, this._onDidFocusInstance),\n\t\t\tinstance.onDisposed(this._onDidDisposeInstance.fire, this._onDidDisposeInstance),\n\t\t\tinstance.capabilities.onDidAddCapabilityType(() => this._onDidChangeInstanceCapability.fire(instance)),\n\t\t\tinstance.capabilities.onDidRemoveCapabilityType(() => this._onDidChangeInstanceCapability.fire(instance)),\n\t\t]);\n\t\tthis.instances.push(instance);\n\t\tthis._onDidChangeInstances.fire();\n\t}\n\n\tprivate _removeInstance(instance: ITerminalInstance) {\n\t\tconst inputKey = instance.resource.path;\n\t\tthis._editorInputs.delete(inputKey);\n\t\tconst instanceIndex = this.instances.findIndex(e => e === instance);\n\t\tif (instanceIndex !== -1) {\n\t\t\tthis.instances.splice(instanceIndex, 1);\n\t\t}\n\t\tconst disposables = this._instanceDisposables.get(inputKey);\n\t\tthis._instanceDisposables.delete(inputKey);\n\t\tif (disposables) {\n\t\t\tdispose(disposables);\n\t\t}\n\t\tthis._onDidChangeInstances.fire();\n\t}\n\n\tgetInstanceFromResource(resource?: URI): ITerminalInstance | undefined {\n\t\treturn getInstanceFromResource(this.instances, resource);\n\t}\n\n\tsplitInstance(instanceToSplit: ITerminalInstance, shellLaunchConfig: IShellLaunchConfig = {}): ITerminalInstance {\n\t\tif (instanceToSplit.target === TerminalLocation.Editor) {\n\t\t\t// Make sure the instance to split's group is active\n\t\t\tconst group = this._editorInputs.get(instanceToSplit.resource.path)?.group;\n\t\t\tif (group) {\n\t\t\t\tthis._editorGroupsService.activateGroup(group);\n\t\t\t}\n\t\t}\n\t\tconst instance = this._terminalInstanceService.createInstance(shellLaunchConfig, TerminalLocation.Editor);\n\t\tconst resource = this.resolveResource(instance);\n\t\tif (resource) {\n\t\t\tthis._editorService.openEditor({\n\t\t\t\tresource: URI.revive(resource),\n\t\t\t\tdescription: instance.description,\n\t\t\t\toptions: {\n\t\t\t\t\tpinned: true,\n\t\t\t\t\tforceReload: true\n\t\t\t\t}\n\t\t\t}, SIDE_GROUP);\n\t\t}\n\t\treturn instance;\n\t}\n\n\treviveInput(deserializedInput: IDeserializedTerminalEditorInput): EditorInput {\n\t\tif ('pid' in deserializedInput) {\n\t\t\tconst newDeserializedInput = { ...deserializedInput, findRevivedId: true };\n\t\t\tconst instance = this._terminalInstanceService.createInstance({ attachPersistentProcess: newDeserializedInput }, TerminalLocation.Editor);\n\t\t\tconst input = this._instantiationService.createInstance(TerminalEditorInput, instance.resource, instance);\n\t\t\tthis._registerInstance(instance.resource.path, input, instance);\n\t\t\treturn input;\n\t\t} else {\n\t\t\tthrow new Error(`Could not revive terminal editor input, ${deserializedInput}`);\n\t\t}\n\t}\n\n\tdetachInstance(instance: ITerminalInstance) {\n\t\tconst inputKey = instance.resource.path;\n\t\tconst editorInput = this._editorInputs.get(inputKey);\n\t\teditorInput?.detachInstance();\n\t\tthis._removeInstance(instance);\n\t\t// Don't dispose the input when shutting down to avoid layouts in the editor area\n\t\tif (!this._isShuttingDown) {\n\t\t\teditorInput?.dispose();\n\t\t}\n\t}\n\n\tasync revealActiveEditor(preserveFocus?: boolean): Promise<void> {\n\t\tconst instance = this.activeInstance;\n\t\tif (!instance) {\n\t\t\treturn;\n\t\t}\n\n\t\t// If there is an active openEditor call for this instance it will be revealed by that\n\t\tif (this._activeOpenEditorRequest?.instanceId === instance.instanceId) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst editorInput = this._editorInputs.get(instance.resource.path)!;\n\t\tthis._editorService.openEditor(\n\t\t\teditorInput,\n\t\t\t{\n\t\t\t\tpinned: true,\n\t\t\t\tforceReload: true,\n\t\t\t\tpreserveFocus,\n\t\t\t\tactivation: EditorActivation.PRESERVE\n\t\t\t}\n\t\t);\n\t}\n}\n"],
  "mappings": "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",
  "names": ["instance", "e"]
}
