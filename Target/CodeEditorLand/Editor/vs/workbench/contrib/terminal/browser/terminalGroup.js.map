{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/terminal/browser/terminalGroup.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { TERMINAL_VIEW_ID } from '../common/terminal.js';\nimport { Event, Emitter } from '../../../../base/common/event.js';\nimport { IDisposable, Disposable, DisposableStore, dispose, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { SplitView, Orientation, IView, Sizing } from '../../../../base/browser/ui/splitview/splitview.js';\nimport { isHorizontal, IWorkbenchLayoutService, Position } from '../../../services/layout/browser/layoutService.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ITerminalInstance, Direction, ITerminalGroup, ITerminalInstanceService, ITerminalConfigurationService } from './terminal.js';\nimport { ViewContainerLocation, IViewDescriptorService } from '../../../common/views.js';\nimport { IShellLaunchConfig, ITerminalTabLayoutInfoById, TerminalLocation } from '../../../../platform/terminal/common/terminal.js';\nimport { TerminalStatus } from './terminalStatusList.js';\nimport { getWindow } from '../../../../base/browser/dom.js';\nimport { getPartByLocation } from '../../../services/views/browser/viewsService.js';\nimport { asArray } from '../../../../base/common/arrays.js';\n\nconst enum Constants {\n\t/**\n\t * The minimum size in pixels of a split pane.\n\t */\n\tSplitPaneMinSize = 80,\n\t/**\n\t * The number of cells the terminal gets added or removed when asked to increase or decrease\n\t * the view size.\n\t */\n\tResizePartCellCount = 4\n}\n\nclass SplitPaneContainer extends Disposable {\n\tprivate _height: number;\n\tprivate _width: number;\n\tprivate _splitView!: SplitView;\n\tprivate readonly _splitViewDisposables = this._register(new DisposableStore());\n\tprivate _children: SplitPane[] = [];\n\tprivate _terminalToPane: Map<ITerminalInstance, SplitPane> = new Map();\n\n\tprivate _onDidChange: Event<number | undefined> = Event.None;\n\tget onDidChange(): Event<number | undefined> { return this._onDidChange; }\n\n\tconstructor(\n\t\tprivate _container: HTMLElement,\n\t\tpublic orientation: Orientation,\n\t) {\n\t\tsuper();\n\t\tthis._width = this._container.offsetWidth;\n\t\tthis._height = this._container.offsetHeight;\n\t\tthis._createSplitView();\n\t\tthis._splitView.layout(this.orientation === Orientation.HORIZONTAL ? this._width : this._height);\n\t}\n\n\tprivate _createSplitView(): void {\n\t\tthis._splitView = new SplitView(this._container, { orientation: this.orientation });\n\t\tthis._splitViewDisposables.clear();\n\t\tthis._splitViewDisposables.add(this._splitView.onDidSashReset(() => this._splitView.distributeViewSizes()));\n\t}\n\n\tsplit(instance: ITerminalInstance, index: number): void {\n\t\tthis._addChild(instance, index);\n\t}\n\n\tresizePane(index: number, direction: Direction, amount: number): void {\n\t\t// Only resize when there is more than one pane\n\t\tif (this._children.length <= 1) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Get sizes\n\t\tconst sizes: number[] = [];\n\t\tfor (let i = 0; i < this._splitView.length; i++) {\n\t\t\tsizes.push(this._splitView.getViewSize(i));\n\t\t}\n\n\t\t// Remove size from right pane, unless index is the last pane in which case use left pane\n\t\tconst isSizingEndPane = index !== this._children.length - 1;\n\t\tconst indexToChange = isSizingEndPane ? index + 1 : index - 1;\n\t\tif (isSizingEndPane && direction === Direction.Left) {\n\t\t\tamount *= -1;\n\t\t} else if (!isSizingEndPane && direction === Direction.Right) {\n\t\t\tamount *= -1;\n\t\t} else if (isSizingEndPane && direction === Direction.Up) {\n\t\t\tamount *= -1;\n\t\t} else if (!isSizingEndPane && direction === Direction.Down) {\n\t\t\tamount *= -1;\n\t\t}\n\n\t\t// Ensure the size is not reduced beyond the minimum, otherwise weird things can happen\n\t\tif (sizes[index] + amount < Constants.SplitPaneMinSize) {\n\t\t\tamount = Constants.SplitPaneMinSize - sizes[index];\n\t\t} else if (sizes[indexToChange] - amount < Constants.SplitPaneMinSize) {\n\t\t\tamount = sizes[indexToChange] - Constants.SplitPaneMinSize;\n\t\t}\n\n\t\t// Apply the size change\n\t\tsizes[index] += amount;\n\t\tsizes[indexToChange] -= amount;\n\t\tfor (let i = 0; i < this._splitView.length - 1; i++) {\n\t\t\tthis._splitView.resizeView(i, sizes[i]);\n\t\t}\n\t}\n\n\tresizePanes(relativeSizes: number[]): void {\n\t\tif (this._children.length <= 1) {\n\t\t\treturn;\n\t\t}\n\n\t\t// assign any extra size to last terminal\n\t\trelativeSizes[relativeSizes.length - 1] += 1 - relativeSizes.reduce((totalValue, currentValue) => totalValue + currentValue, 0);\n\t\tlet totalSize = 0;\n\t\tfor (let i = 0; i < this._splitView.length; i++) {\n\t\t\ttotalSize += this._splitView.getViewSize(i);\n\t\t}\n\t\tfor (let i = 0; i < this._splitView.length; i++) {\n\t\t\tthis._splitView.resizeView(i, totalSize * relativeSizes[i]);\n\t\t}\n\t}\n\n\tgetPaneSize(instance: ITerminalInstance): number {\n\t\tconst paneForInstance = this._terminalToPane.get(instance);\n\t\tif (!paneForInstance) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tconst index = this._children.indexOf(paneForInstance);\n\t\treturn this._splitView.getViewSize(index);\n\t}\n\n\tprivate _addChild(instance: ITerminalInstance, index: number): void {\n\t\tconst child = new SplitPane(instance, this.orientation === Orientation.HORIZONTAL ? this._height : this._width);\n\t\tchild.orientation = this.orientation;\n\t\tif (typeof index === 'number') {\n\t\t\tthis._children.splice(index, 0, child);\n\t\t} else {\n\t\t\tthis._children.push(child);\n\t\t}\n\t\tthis._terminalToPane.set(instance, this._children[this._children.indexOf(child)]);\n\n\t\tthis._withDisabledLayout(() => this._splitView.addView(child, Sizing.Distribute, index));\n\t\tthis.layout(this._width, this._height);\n\n\t\tthis._onDidChange = Event.any(...this._children.map(c => c.onDidChange));\n\t}\n\n\tremove(instance: ITerminalInstance): void {\n\t\tlet index: number | null = null;\n\t\tfor (let i = 0; i < this._children.length; i++) {\n\t\t\tif (this._children[i].instance === instance) {\n\t\t\t\tindex = i;\n\t\t\t}\n\t\t}\n\t\tif (index !== null) {\n\t\t\tthis._children.splice(index, 1);\n\t\t\tthis._terminalToPane.delete(instance);\n\t\t\tthis._splitView.removeView(index, Sizing.Distribute);\n\t\t\tinstance.detachFromElement();\n\t\t}\n\t}\n\n\tlayout(width: number, height: number): void {\n\t\tthis._width = width;\n\t\tthis._height = height;\n\t\tif (this.orientation === Orientation.HORIZONTAL) {\n\t\t\tthis._children.forEach(c => c.orthogonalLayout(height));\n\t\t\tthis._splitView.layout(width);\n\t\t} else {\n\t\t\tthis._children.forEach(c => c.orthogonalLayout(width));\n\t\t\tthis._splitView.layout(height);\n\t\t}\n\t}\n\n\tsetOrientation(orientation: Orientation): void {\n\t\tif (this.orientation === orientation) {\n\t\t\treturn;\n\t\t}\n\t\tthis.orientation = orientation;\n\n\t\t// Remove old split view\n\t\twhile (this._container.children.length > 0) {\n\t\t\tthis._container.children[0].remove();\n\t\t}\n\t\tthis._splitViewDisposables.clear();\n\t\tthis._splitView.dispose();\n\n\t\t// Create new split view with updated orientation\n\t\tthis._createSplitView();\n\t\tthis._withDisabledLayout(() => {\n\t\t\tthis._children.forEach(child => {\n\t\t\t\tchild.orientation = orientation;\n\t\t\t\tthis._splitView.addView(child, 1);\n\t\t\t});\n\t\t});\n\t}\n\n\tprivate _withDisabledLayout(innerFunction: () => void): void {\n\t\t// Whenever manipulating views that are going to be changed immediately, disabling\n\t\t// layout/resize events in the terminal prevent bad dimensions going to the pty.\n\t\tthis._children.forEach(c => c.instance.disableLayout = true);\n\t\tinnerFunction();\n\t\tthis._children.forEach(c => c.instance.disableLayout = false);\n\t}\n}\n\nclass SplitPane implements IView {\n\tminimumSize: number = Constants.SplitPaneMinSize;\n\tmaximumSize: number = Number.MAX_VALUE;\n\n\torientation: Orientation | undefined;\n\n\tprivate _onDidChange: Event<number | undefined> = Event.None;\n\tget onDidChange(): Event<number | undefined> { return this._onDidChange; }\n\n\treadonly element: HTMLElement;\n\n\tconstructor(\n\t\treadonly instance: ITerminalInstance,\n\t\tpublic orthogonalSize: number\n\t) {\n\t\tthis.element = document.createElement('div');\n\t\tthis.element.className = 'terminal-split-pane';\n\t\tthis.instance.attachToElement(this.element);\n\t}\n\n\tlayout(size: number): void {\n\t\t// Only layout when both sizes are known\n\t\tif (!size || !this.orthogonalSize) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.orientation === Orientation.VERTICAL) {\n\t\t\tthis.instance.layout({ width: this.orthogonalSize, height: size });\n\t\t} else {\n\t\t\tthis.instance.layout({ width: size, height: this.orthogonalSize });\n\t\t}\n\t}\n\n\torthogonalLayout(size: number): void {\n\t\tthis.orthogonalSize = size;\n\t}\n}\n\nexport class TerminalGroup extends Disposable implements ITerminalGroup {\n\tprivate _terminalInstances: ITerminalInstance[] = [];\n\tprivate _splitPaneContainer: SplitPaneContainer | undefined;\n\tprivate _groupElement: HTMLElement | undefined;\n\tprivate _panelPosition: Position = Position.BOTTOM;\n\tprivate _terminalLocation: ViewContainerLocation = ViewContainerLocation.Panel;\n\tprivate _instanceDisposables: Map<number, IDisposable[]> = new Map();\n\n\tprivate _activeInstanceIndex: number = -1;\n\n\tget terminalInstances(): ITerminalInstance[] { return this._terminalInstances; }\n\n\tprivate _initialRelativeSizes: number[] | undefined;\n\tprivate _visible: boolean = false;\n\n\tprivate readonly _onDidDisposeInstance: Emitter<ITerminalInstance> = this._register(new Emitter<ITerminalInstance>());\n\treadonly onDidDisposeInstance = this._onDidDisposeInstance.event;\n\tprivate readonly _onDidFocusInstance: Emitter<ITerminalInstance> = this._register(new Emitter<ITerminalInstance>());\n\treadonly onDidFocusInstance = this._onDidFocusInstance.event;\n\tprivate readonly _onDidChangeInstanceCapability: Emitter<ITerminalInstance> = this._register(new Emitter<ITerminalInstance>());\n\treadonly onDidChangeInstanceCapability = this._onDidChangeInstanceCapability.event;\n\tprivate readonly _onDisposed: Emitter<ITerminalGroup> = this._register(new Emitter<ITerminalGroup>());\n\treadonly onDisposed = this._onDisposed.event;\n\tprivate readonly _onInstancesChanged: Emitter<void> = this._register(new Emitter<void>());\n\treadonly onInstancesChanged = this._onInstancesChanged.event;\n\tprivate readonly _onDidChangeActiveInstance = this._register(new Emitter<ITerminalInstance | undefined>());\n\treadonly onDidChangeActiveInstance = this._onDidChangeActiveInstance.event;\n\tprivate readonly _onPanelOrientationChanged = this._register(new Emitter<Orientation>());\n\treadonly onPanelOrientationChanged = this._onPanelOrientationChanged.event;\n\n\tconstructor(\n\t\tprivate _container: HTMLElement | undefined,\n\t\tshellLaunchConfigOrInstance: IShellLaunchConfig | ITerminalInstance | undefined,\n\t\t@ITerminalConfigurationService private readonly _terminalConfigurationService: ITerminalConfigurationService,\n\t\t@ITerminalInstanceService private readonly _terminalInstanceService: ITerminalInstanceService,\n\t\t@IWorkbenchLayoutService private readonly _layoutService: IWorkbenchLayoutService,\n\t\t@IViewDescriptorService private readonly _viewDescriptorService: IViewDescriptorService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService\n\t) {\n\t\tsuper();\n\t\tif (shellLaunchConfigOrInstance) {\n\t\t\tthis.addInstance(shellLaunchConfigOrInstance);\n\t\t}\n\t\tif (this._container) {\n\t\t\tthis.attachToElement(this._container);\n\t\t}\n\t\tthis._onPanelOrientationChanged.fire(this._terminalLocation === ViewContainerLocation.Panel && isHorizontal(this._panelPosition) ? Orientation.HORIZONTAL : Orientation.VERTICAL);\n\t\tthis._register(toDisposable(() => {\n\t\t\tif (this._container && this._groupElement) {\n\t\t\t\tthis._groupElement.remove();\n\t\t\t\tthis._groupElement = undefined;\n\t\t\t}\n\t\t}));\n\t}\n\n\taddInstance(shellLaunchConfigOrInstance: IShellLaunchConfig | ITerminalInstance, parentTerminalId?: number): void {\n\t\tlet instance: ITerminalInstance;\n\t\t// if a parent terminal is provided, find it\n\t\t// otherwise, parent is the active terminal\n\t\tconst parentIndex = parentTerminalId ? this._terminalInstances.findIndex(t => t.instanceId === parentTerminalId) : this._activeInstanceIndex;\n\t\tif ('instanceId' in shellLaunchConfigOrInstance) {\n\t\t\tinstance = shellLaunchConfigOrInstance;\n\t\t} else {\n\t\t\tinstance = this._terminalInstanceService.createInstance(shellLaunchConfigOrInstance, TerminalLocation.Panel);\n\t\t}\n\t\tif (this._terminalInstances.length === 0) {\n\t\t\tthis._terminalInstances.push(instance);\n\t\t\tthis._activeInstanceIndex = 0;\n\t\t} else {\n\t\t\tthis._terminalInstances.splice(parentIndex + 1, 0, instance);\n\t\t}\n\t\tthis._initInstanceListeners(instance);\n\n\t\tif (this._splitPaneContainer) {\n\t\t\tthis._splitPaneContainer.split(instance, parentIndex + 1);\n\t\t}\n\n\t\tthis._onInstancesChanged.fire();\n\t}\n\n\toverride dispose(): void {\n\t\tthis._terminalInstances = [];\n\t\tthis._onInstancesChanged.fire();\n\t\tsuper.dispose();\n\t}\n\n\tget activeInstance(): ITerminalInstance | undefined {\n\t\tif (this._terminalInstances.length === 0) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn this._terminalInstances[this._activeInstanceIndex];\n\t}\n\n\tgetLayoutInfo(isActive: boolean): ITerminalTabLayoutInfoById {\n\t\tconst instances = this.terminalInstances.filter(instance => typeof instance.persistentProcessId === 'number' && instance.shouldPersist);\n\t\tconst totalSize = instances.map(t => this._splitPaneContainer?.getPaneSize(t) || 0).reduce((total, size) => total += size, 0);\n\t\treturn {\n\t\t\tisActive: isActive,\n\t\t\tactivePersistentProcessId: this.activeInstance ? this.activeInstance.persistentProcessId : undefined,\n\t\t\tterminals: instances.map(t => {\n\t\t\t\treturn {\n\t\t\t\t\trelativeSize: totalSize > 0 ? this._splitPaneContainer!.getPaneSize(t) / totalSize : 0,\n\t\t\t\t\tterminal: t.persistentProcessId || 0\n\t\t\t\t};\n\t\t\t})\n\t\t};\n\t}\n\n\tprivate _initInstanceListeners(instance: ITerminalInstance) {\n\t\tthis._instanceDisposables.set(instance.instanceId, [\n\t\t\tinstance.onDisposed(instance => {\n\t\t\t\tthis._onDidDisposeInstance.fire(instance);\n\t\t\t\tthis._handleOnDidDisposeInstance(instance);\n\t\t\t}),\n\t\t\tinstance.onDidFocus(instance => {\n\t\t\t\tthis._setActiveInstance(instance);\n\t\t\t\tthis._onDidFocusInstance.fire(instance);\n\t\t\t}),\n\t\t\tinstance.capabilities.onDidAddCapabilityType(() => this._onDidChangeInstanceCapability.fire(instance)),\n\t\t\tinstance.capabilities.onDidRemoveCapabilityType(() => this._onDidChangeInstanceCapability.fire(instance)),\n\t\t]);\n\t}\n\n\tprivate _handleOnDidDisposeInstance(instance: ITerminalInstance) {\n\t\tthis._removeInstance(instance);\n\t}\n\n\tremoveInstance(instance: ITerminalInstance) {\n\t\tthis._removeInstance(instance);\n\t}\n\n\tprivate _removeInstance(instance: ITerminalInstance) {\n\t\tconst index = this._terminalInstances.indexOf(instance);\n\t\tif (index === -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst wasActiveInstance = instance === this.activeInstance;\n\t\tthis._terminalInstances.splice(index, 1);\n\n\t\t// Adjust focus if the instance was active\n\t\tif (wasActiveInstance && this._terminalInstances.length > 0) {\n\t\t\tconst newIndex = index < this._terminalInstances.length ? index : this._terminalInstances.length - 1;\n\t\t\tthis.setActiveInstanceByIndex(newIndex);\n\t\t\t// TODO: Only focus the new instance if the group had focus?\n\t\t\tthis.activeInstance?.focus(true);\n\t\t} else if (index < this._activeInstanceIndex) {\n\t\t\t// Adjust active instance index if needed\n\t\t\tthis._activeInstanceIndex--;\n\t\t}\n\n\t\tthis._splitPaneContainer?.remove(instance);\n\n\t\t// Fire events and dispose group if it was the last instance\n\t\tif (this._terminalInstances.length === 0) {\n\t\t\tthis._onDisposed.fire(this);\n\t\t\tthis.dispose();\n\t\t} else {\n\t\t\tthis._onInstancesChanged.fire();\n\t\t}\n\n\t\t// Dispose instance event listeners\n\t\tconst disposables = this._instanceDisposables.get(instance.instanceId);\n\t\tif (disposables) {\n\t\t\tdispose(disposables);\n\t\t\tthis._instanceDisposables.delete(instance.instanceId);\n\t\t}\n\t}\n\n\tmoveInstance(instances: ITerminalInstance | ITerminalInstance[], index: number, position: 'before' | 'after'): void {\n\t\tinstances = asArray(instances);\n\t\tconst hasInvalidInstance = instances.some(instance => !this.terminalInstances.includes(instance));\n\t\tif (hasInvalidInstance) {\n\t\t\treturn;\n\t\t}\n\t\tconst insertIndex = position === 'before' ? index : index + 1;\n\t\tthis._terminalInstances.splice(insertIndex, 0, ...instances);\n\t\tfor (const item of instances) {\n\t\t\tconst originSourceGroupIndex = position === 'after' ? this._terminalInstances.indexOf(item) : this._terminalInstances.lastIndexOf(item);\n\t\t\tthis._terminalInstances.splice(originSourceGroupIndex, 1);\n\t\t}\n\t\tif (this._splitPaneContainer) {\n\t\t\tfor (let i = 0; i < instances.length; i++) {\n\t\t\t\tconst item = instances[i];\n\t\t\t\tthis._splitPaneContainer.remove(item);\n\t\t\t\tthis._splitPaneContainer.split(item, index + (position === 'before' ? i : 0));\n\t\t\t}\n\t\t}\n\t\tthis._onInstancesChanged.fire();\n\t}\n\n\tprivate _setActiveInstance(instance: ITerminalInstance) {\n\t\tthis.setActiveInstanceByIndex(this._getIndexFromId(instance.instanceId));\n\t}\n\n\tprivate _getIndexFromId(terminalId: number): number {\n\t\tlet terminalIndex = -1;\n\t\tthis.terminalInstances.forEach((terminalInstance, i) => {\n\t\t\tif (terminalInstance.instanceId === terminalId) {\n\t\t\t\tterminalIndex = i;\n\t\t\t}\n\t\t});\n\t\tif (terminalIndex === -1) {\n\t\t\tthrow new Error(`Terminal with ID ${terminalId} does not exist (has it already been disposed?)`);\n\t\t}\n\t\treturn terminalIndex;\n\t}\n\n\tsetActiveInstanceByIndex(index: number, force?: boolean): void {\n\t\t// Check for invalid value\n\t\tif (index < 0 || index >= this._terminalInstances.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst oldActiveInstance = this.activeInstance;\n\t\tthis._activeInstanceIndex = index;\n\t\tif (oldActiveInstance !== this.activeInstance || force) {\n\t\t\tthis._onInstancesChanged.fire();\n\t\t\tthis._onDidChangeActiveInstance.fire(this.activeInstance);\n\t\t}\n\t}\n\n\tattachToElement(element: HTMLElement): void {\n\t\tthis._container = element;\n\n\t\t// If we already have a group element, we can reparent it\n\t\tif (!this._groupElement) {\n\t\t\tthis._groupElement = document.createElement('div');\n\t\t\tthis._groupElement.classList.add('terminal-group');\n\t\t}\n\n\t\tthis._container.appendChild(this._groupElement);\n\t\tif (!this._splitPaneContainer) {\n\t\t\tthis._panelPosition = this._layoutService.getPanelPosition();\n\t\t\tthis._terminalLocation = this._viewDescriptorService.getViewLocationById(TERMINAL_VIEW_ID)!;\n\t\t\tconst orientation = this._terminalLocation === ViewContainerLocation.Panel && isHorizontal(this._panelPosition) ? Orientation.HORIZONTAL : Orientation.VERTICAL;\n\t\t\tthis._splitPaneContainer = this._instantiationService.createInstance(SplitPaneContainer, this._groupElement, orientation);\n\t\t\tthis.terminalInstances.forEach(instance => this._splitPaneContainer!.split(instance, this._activeInstanceIndex + 1));\n\t\t}\n\t}\n\n\tget title(): string {\n\t\tif (this._terminalInstances.length === 0) {\n\t\t\t// Normally consumers should not call into title at all after the group is disposed but\n\t\t\t// this is required when the group is used as part of a tree.\n\t\t\treturn '';\n\t\t}\n\t\tlet title = this.terminalInstances[0].title + this._getBellTitle(this.terminalInstances[0]);\n\t\tif (this.terminalInstances[0].description) {\n\t\t\ttitle += ` (${this.terminalInstances[0].description})`;\n\t\t}\n\t\tfor (let i = 1; i < this.terminalInstances.length; i++) {\n\t\t\tconst instance = this.terminalInstances[i];\n\t\t\tif (instance.title) {\n\t\t\t\ttitle += `, ${instance.title + this._getBellTitle(instance)}`;\n\t\t\t\tif (instance.description) {\n\t\t\t\t\ttitle += ` (${instance.description})`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn title;\n\t}\n\n\tprivate _getBellTitle(instance: ITerminalInstance) {\n\t\tif (this._terminalConfigurationService.config.enableBell && instance.statusList.statuses.some(e => e.id === TerminalStatus.Bell)) {\n\t\t\treturn '*';\n\t\t}\n\t\treturn '';\n\t}\n\n\tsetVisible(visible: boolean): void {\n\t\tthis._visible = visible;\n\t\tif (this._groupElement) {\n\t\t\tthis._groupElement.style.display = visible ? '' : 'none';\n\t\t}\n\t\tthis.terminalInstances.forEach(i => i.setVisible(visible));\n\t}\n\n\tsplit(shellLaunchConfig: IShellLaunchConfig): ITerminalInstance {\n\t\tconst instance = this._terminalInstanceService.createInstance(shellLaunchConfig, TerminalLocation.Panel);\n\t\tthis.addInstance(instance, shellLaunchConfig.parentTerminalId);\n\t\tthis._setActiveInstance(instance);\n\t\treturn instance;\n\t}\n\n\taddDisposable(disposable: IDisposable): void {\n\t\tthis._register(disposable);\n\t}\n\n\tlayout(width: number, height: number): void {\n\t\tif (this._splitPaneContainer) {\n\t\t\t// Check if the panel position changed and rotate panes if so\n\t\t\tconst newPanelPosition = this._layoutService.getPanelPosition();\n\t\t\tconst newTerminalLocation = this._viewDescriptorService.getViewLocationById(TERMINAL_VIEW_ID)!;\n\t\t\tconst terminalPositionChanged = newPanelPosition !== this._panelPosition || newTerminalLocation !== this._terminalLocation;\n\t\t\tif (terminalPositionChanged) {\n\t\t\t\tconst newOrientation = newTerminalLocation === ViewContainerLocation.Panel && isHorizontal(newPanelPosition) ? Orientation.HORIZONTAL : Orientation.VERTICAL;\n\t\t\t\tthis._splitPaneContainer.setOrientation(newOrientation);\n\t\t\t\tthis._panelPosition = newPanelPosition;\n\t\t\t\tthis._terminalLocation = newTerminalLocation;\n\t\t\t\tthis._onPanelOrientationChanged.fire(this._splitPaneContainer.orientation);\n\t\t\t}\n\t\t\tthis._splitPaneContainer.layout(width, height);\n\t\t\tif (this._initialRelativeSizes && this._visible) {\n\t\t\t\tthis.resizePanes(this._initialRelativeSizes);\n\t\t\t\tthis._initialRelativeSizes = undefined;\n\t\t\t}\n\t\t}\n\t}\n\n\tfocusPreviousPane(): void {\n\t\tconst newIndex = this._activeInstanceIndex === 0 ? this._terminalInstances.length - 1 : this._activeInstanceIndex - 1;\n\t\tthis.setActiveInstanceByIndex(newIndex);\n\t}\n\n\tfocusNextPane(): void {\n\t\tconst newIndex = this._activeInstanceIndex === this._terminalInstances.length - 1 ? 0 : this._activeInstanceIndex + 1;\n\t\tthis.setActiveInstanceByIndex(newIndex);\n\t}\n\n\tprivate _getPosition(): Position {\n\t\tswitch (this._terminalLocation) {\n\t\t\tcase ViewContainerLocation.Panel:\n\t\t\t\treturn this._panelPosition;\n\t\t\tcase ViewContainerLocation.Sidebar:\n\t\t\t\treturn this._layoutService.getSideBarPosition();\n\t\t\tcase ViewContainerLocation.AuxiliaryBar:\n\t\t\t\treturn this._layoutService.getSideBarPosition() === Position.LEFT ? Position.RIGHT : Position.LEFT;\n\t\t}\n\t}\n\n\tprivate _getOrientation(): Orientation {\n\t\treturn isHorizontal(this._getPosition()) ? Orientation.HORIZONTAL : Orientation.VERTICAL;\n\t}\n\n\tresizePane(direction: Direction): void {\n\t\tif (!this._splitPaneContainer) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isHorizontalResize = (direction === Direction.Left || direction === Direction.Right);\n\n\t\tconst groupOrientation = this._getOrientation();\n\n\t\tconst shouldResizePart =\n\t\t\t(isHorizontalResize && groupOrientation === Orientation.VERTICAL) ||\n\t\t\t(!isHorizontalResize && groupOrientation === Orientation.HORIZONTAL);\n\n\t\tconst font = this._terminalConfigurationService.getFont(getWindow(this._groupElement));\n\t\t// TODO: Support letter spacing and line height\n\t\tconst charSize = (isHorizontalResize ? font.charWidth : font.charHeight);\n\n\t\tif (charSize) {\n\t\t\tlet resizeAmount = charSize * Constants.ResizePartCellCount;\n\n\t\t\tif (shouldResizePart) {\n\n\t\t\t\tconst position = this._getPosition();\n\t\t\t\tconst shouldShrink =\n\t\t\t\t\t(position === Position.LEFT && direction === Direction.Left) ||\n\t\t\t\t\t(position === Position.RIGHT && direction === Direction.Right) ||\n\t\t\t\t\t(position === Position.BOTTOM && direction === Direction.Down) ||\n\t\t\t\t\t(position === Position.TOP && direction === Direction.Up);\n\n\t\t\t\tif (shouldShrink) {\n\t\t\t\t\tresizeAmount *= -1;\n\t\t\t\t}\n\n\t\t\t\tthis._layoutService.resizePart(getPartByLocation(this._terminalLocation), resizeAmount, resizeAmount);\n\t\t\t} else {\n\t\t\t\tthis._splitPaneContainer.resizePane(this._activeInstanceIndex, direction, resizeAmount);\n\t\t\t}\n\n\t\t}\n\t}\n\n\tresizePanes(relativeSizes: number[]): void {\n\t\tif (!this._splitPaneContainer) {\n\t\t\tthis._initialRelativeSizes = relativeSizes;\n\t\t\treturn;\n\t\t}\n\n\t\tthis._splitPaneContainer.resizePanes(relativeSizes);\n\t}\n}\n"],
  "mappings": "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",
  "names": ["Constants", "instance"]
}
