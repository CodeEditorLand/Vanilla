var P=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var k=(d,l,e,r)=>{for(var i=r>1?void 0:r?b(l,e):l,t=d.length-1,s;t>=0;t--)(s=d[t])&&(i=(r?s(l,e,i):s(i))||i);return r&&i&&P(l,e,i),i},m=(d,l)=>(e,r)=>l(e,r,d);import{localize as h}from"../../../../nls.js";import"../../../../platform/quickinput/common/quickInput.js";import{PickerQuickAccessProvider as y,TriggerAction as v}from"../../../../platform/quickinput/browser/pickerQuickAccess.js";import{matchesFuzzy as x}from"../../../../base/common/filters.js";import{ITerminalEditorService as $,ITerminalGroupService as w,ITerminalService as A}from"./terminal.js";import{ICommandService as N}from"../../../../platform/commands/common/commands.js";import{TerminalCommandId as S}from"../common/terminal.js";import{IThemeService as G}from"../../../../platform/theme/common/themeService.js";import{ThemeIcon as _}from"../../../../base/common/themables.js";import{killTerminalIcon as z,renameTerminalIcon as L}from"./terminalIcons.js";import{getColorClass as O,getIconId as Q,getUriClasses as R}from"./terminalIcon.js";import{terminalStrings as F}from"../common/terminalStrings.js";import{TerminalLocation as C}from"../../../../platform/terminal/common/terminal.js";import{IEditorService as W}from"../../../services/editor/common/editorService.js";import{IInstantiationService as M}from"../../../../platform/instantiation/common/instantiation.js";let a=[],p=class extends y{constructor(e,r,i,t,s,n,c){super(p.PREFIX,{canAcceptInBackground:!0});this._editorService=e;this._terminalService=r;this._terminalEditorService=i;this._terminalGroupService=t;this._commandService=s;this._themeService=n;this._instantiationService=c}static PREFIX="term ";_getPicks(e){a=[],a.push({type:"separator",label:"panel"});const r=this._terminalGroupService.groups;for(let n=0;n<r.length;n++){const c=r[n];for(let o=0;o<c.terminalInstances.length;o++){const I=c.terminalInstances[o],u=this._createPick(I,o,e,{groupIndex:n,groupSize:c.terminalInstances.length});u&&a.push(u)}}a.length>0&&a.push({type:"separator",label:"editor"});const i=this._terminalEditorService.instances;for(let n=0;n<i.length;n++){const c=i[n];c.target=C.Editor;const o=this._createPick(c,n,e);o&&a.push(o)}a.length>0&&a.push({type:"separator"});const t=h("workbench.action.terminal.newplus","Create New Terminal");a.push({label:`$(plus) ${t}`,ariaLabel:t,accept:()=>this._commandService.executeCommand(S.New)});const s=h("workbench.action.terminal.newWithProfilePlus","Create New Terminal With Profile...");return a.push({label:`$(plus) ${s}`,ariaLabel:s,accept:()=>this._commandService.executeCommand(S.NewWithProfile)}),a}_createPick(e,r,i,t){const s=this._instantiationService.invokeFunction(Q,e),n=t?t.groupSize>1?`${t.groupIndex+1}.${r+1}`:`${t.groupIndex+1}`:`${r+1}`,c=`$(${s}) ${n}: ${e.title}`,o=[],I=O(e);I&&o.push(I);const u=R(e,this._themeService.getColorTheme().type);u&&o.push(...u);const g=x(i,c,!0);if(g)return{label:c,description:e.description,highlights:{label:g},buttons:[{iconClass:_.asClassName(L),tooltip:h("renameTerminal","Rename Terminal")},{iconClass:_.asClassName(z),tooltip:F.kill.value}],iconClasses:o,trigger:f=>{switch(f){case 0:return this._commandService.executeCommand(S.Rename,e),v.NO_ACTION;case 1:return this._terminalService.safeDisposeTerminal(e),v.REMOVE_ITEM}return v.NO_ACTION},accept:(f,T)=>{if(e.target===C.Editor){const E=this._editorService.findEditors(e.resource);this._terminalEditorService.openEditor(e,{viewColumn:E?.[0].groupId}),this._terminalEditorService.setActiveInstance(e)}else this._terminalGroupService.showPanel(!T.inBackground),this._terminalGroupService.setActiveInstance(e)}}}};p=k([m(0,W),m(1,A),m(2,$),m(3,w),m(4,N),m(5,G),m(6,M)],p);export{p as TerminalQuickAccessProvider};
