var p=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var v=(o,s,e,i)=>{for(var r=i>1?void 0:i?m(s,e):s,a=o.length-1,l;a>=0;a--)(l=o[a])&&(r=(i?l(s,e,r):l(r))||r);return i&&r&&p(s,e,r),r},h=(o,s)=>(e,i)=>s(e,i,o);import{Emitter as n}from"../../../../../vs/base/common/event.js";import{Disposable as u}from"../../../../../vs/base/common/lifecycle.js";import{ProcessPropertyType as t}from"../../../../../vs/platform/terminal/common/terminal.js";import{ITerminalService as y}from"../../../../../vs/workbench/contrib/terminal/browser/terminal.js";import"../../../../../vs/workbench/contrib/terminal/common/terminal.js";let d=class extends u{constructor(e,i,r,a){super();this.instanceId=e;this._cols=i;this._rows=r;this._terminalService=a}id=0;shouldPersist=!1;_onProcessData=this._register(new n);onProcessData=this._onProcessData.event;_onProcessReady=this._register(new n);get onProcessReady(){return this._onProcessReady.event}_onStart=this._register(new n);onStart=this._onStart.event;_onInput=this._register(new n);onInput=this._onInput.event;_onBinary=this._register(new n);onBinary=this._onBinary.event;_onResize=this._register(new n);onResize=this._onResize.event;_onAcknowledgeDataEvent=this._register(new n);onAcknowledgeDataEvent=this._onAcknowledgeDataEvent.event;_onShutdown=this._register(new n);onShutdown=this._onShutdown.event;_onRequestInitialCwd=this._register(new n);onRequestInitialCwd=this._onRequestInitialCwd.event;_onRequestCwd=this._register(new n);onRequestCwd=this._onRequestCwd.event;_onDidChangeProperty=this._register(new n);onDidChangeProperty=this._onDidChangeProperty.event;_onProcessExit=this._register(new n);onProcessExit=this._onProcessExit.event;_pendingInitialCwdRequests=[];_pendingCwdRequests=[];emitData(e){this._onProcessData.fire(e)}emitTitle(e){this._onDidChangeProperty.fire({type:t.Title,value:e})}emitReady(e,i){this._onProcessReady.fire({pid:e,cwd:i,windowsPty:void 0})}emitProcessProperty({type:e,value:i}){switch(e){case t.Cwd:this.emitCwd(i);break;case t.InitialCwd:this.emitInitialCwd(i);break;case t.Title:this.emitTitle(i);break;case t.OverrideDimensions:this.emitOverrideDimensions(i);break;case t.ResolvedShellLaunchConfig:this.emitResolvedShellLaunchConfig(i);break}}emitExit(e){this._onProcessExit.fire(e),this.dispose()}emitOverrideDimensions(e){this._onDidChangeProperty.fire({type:t.OverrideDimensions,value:e})}emitResolvedShellLaunchConfig(e){this._onDidChangeProperty.fire({type:t.ResolvedShellLaunchConfig,value:e})}emitInitialCwd(e){for(;this._pendingInitialCwdRequests.length>0;)this._pendingInitialCwdRequests.pop()(e)}emitCwd(e){for(;this._pendingCwdRequests.length>0;)this._pendingCwdRequests.pop()(e)}async start(){return this._terminalService.requestStartExtensionTerminal(this,this._cols,this._rows)}shutdown(e){this._onShutdown.fire(e)}input(e){this._onInput.fire(e)}resize(e,i){this._onResize.fire({cols:e,rows:i})}clearBuffer(){}acknowledgeDataEvent(){}async setUnicodeVersion(e){}async processBinary(e){this._onBinary.fire(e)}getInitialCwd(){return new Promise(e=>{this._onRequestInitialCwd.fire(),this._pendingInitialCwdRequests.push(e)})}getCwd(){return new Promise(e=>{this._onRequestCwd.fire(),this._pendingCwdRequests.push(e)})}async refreshProperty(e){}async updateProperty(e,i){}};d=v([h(3,y)],d);export{d as TerminalProcessExtHostProxy};
