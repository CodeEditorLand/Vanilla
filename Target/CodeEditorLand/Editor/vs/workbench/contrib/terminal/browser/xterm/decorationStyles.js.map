{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/terminal/browser/xterm/decorationStyles.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from \"../../../../../base/browser/dom.js\";\nimport { Delayer } from \"../../../../../base/common/async.js\";\nimport { fromNow, getDurationString } from \"../../../../../base/common/date.js\";\nimport { MarkdownString } from \"../../../../../base/common/htmlContent.js\";\nimport {\n\tDisposable,\n\ttype IDisposable,\n\tcombinedDisposable,\n} from \"../../../../../base/common/lifecycle.js\";\nimport { localize } from \"../../../../../nls.js\";\nimport { IConfigurationService } from \"../../../../../platform/configuration/common/configuration.js\";\nimport { IContextMenuService } from \"../../../../../platform/contextview/browser/contextView.js\";\nimport { IHoverService } from \"../../../../../platform/hover/browser/hover.js\";\nimport type { ITerminalCommand } from \"../../../../../platform/terminal/common/capabilities/capabilities.js\";\nimport { TerminalSettingId } from \"../../../../../platform/terminal/common/terminal.js\";\n\nenum DecorationStyles {\n\tDefaultDimension = 16,\n\tMarginLeft = -17,\n}\n\nexport enum DecorationSelector {\n\tCommandDecoration = \"terminal-command-decoration\",\n\tHide = \"hide\",\n\tErrorColor = \"error\",\n\tDefaultColor = \"default-color\",\n\tDefault = \"default\",\n\tCodicon = \"codicon\",\n\tXtermDecoration = \"xterm-decoration\",\n\tOverviewRuler = \".xterm-decoration-overview-ruler\",\n}\n\nexport class TerminalDecorationHoverManager extends Disposable {\n\tprivate _hoverDelayer: Delayer<void>;\n\tprivate _contextMenuVisible = false;\n\n\tconstructor(@IHoverService private readonly _hoverService: IHoverService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService) {\n\t\tsuper();\n\t\tthis._register(contextMenuService.onDidShowContextMenu(() => this._contextMenuVisible = true));\n\t\tthis._register(contextMenuService.onDidHideContextMenu(() => this._contextMenuVisible = false));\n\t\tthis._hoverDelayer = this._register(new Delayer(configurationService.getValue('workbench.hover.delay')));\n\t}\n\n\tpublic hideHover() {\n\t\tthis._hoverDelayer.cancel();\n\t\tthis._hoverService.hideHover();\n\t}\n\n\tcreateHover(\n\t\telement: HTMLElement,\n\t\tcommand: ITerminalCommand | undefined,\n\t\thoverMessage?: string,\n\t): IDisposable {\n\t\treturn combinedDisposable(\n\t\t\tdom.addDisposableListener(\n\t\t\t\telement,\n\t\t\t\tdom.EventType.MOUSE_ENTER,\n\t\t\t\t() => {\n\t\t\t\t\tif (this._contextMenuVisible) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis._hoverDelayer.trigger(() => {\n\t\t\t\t\t\tlet hoverContent = `${localize(\"terminalPromptContextMenu\", \"Show Command Actions\")}`;\n\t\t\t\t\t\thoverContent += \"\\n\\n---\\n\\n\";\n\t\t\t\t\t\tif (!command) {\n\t\t\t\t\t\t\tif (hoverMessage) {\n\t\t\t\t\t\t\t\thoverContent = hoverMessage;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (command.markProperties || hoverMessage) {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tcommand.markProperties?.hoverMessage ||\n\t\t\t\t\t\t\t\thoverMessage\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\thoverContent =\n\t\t\t\t\t\t\t\t\tcommand.markProperties?.hoverMessage ||\n\t\t\t\t\t\t\t\t\thoverMessage ||\n\t\t\t\t\t\t\t\t\t\"\";\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (command.duration) {\n\t\t\t\t\t\t\tconst durationText = getDurationString(\n\t\t\t\t\t\t\t\tcommand.duration,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (command.exitCode) {\n\t\t\t\t\t\t\t\tif (command.exitCode === -1) {\n\t\t\t\t\t\t\t\t\thoverContent += localize(\n\t\t\t\t\t\t\t\t\t\t\"terminalPromptCommandFailed.duration\",\n\t\t\t\t\t\t\t\t\t\t\"Command executed {0}, took {1} and failed\",\n\t\t\t\t\t\t\t\t\t\tfromNow(command.timestamp, true),\n\t\t\t\t\t\t\t\t\t\tdurationText,\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\thoverContent += localize(\n\t\t\t\t\t\t\t\t\t\t\"terminalPromptCommandFailedWithExitCode.duration\",\n\t\t\t\t\t\t\t\t\t\t\"Command executed {0}, took {1} and failed (Exit Code {2})\",\n\t\t\t\t\t\t\t\t\t\tfromNow(command.timestamp, true),\n\t\t\t\t\t\t\t\t\t\tdurationText,\n\t\t\t\t\t\t\t\t\t\tcommand.exitCode,\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\thoverContent += localize(\n\t\t\t\t\t\t\t\t\t\"terminalPromptCommandSuccess.duration\",\n\t\t\t\t\t\t\t\t\t\"Command executed {0} and took {1}\",\n\t\t\t\t\t\t\t\t\tfromNow(command.timestamp, true),\n\t\t\t\t\t\t\t\t\tdurationText,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (command.exitCode) {\n\t\t\t\t\t\t\tif (command.exitCode === -1) {\n\t\t\t\t\t\t\t\thoverContent += localize(\n\t\t\t\t\t\t\t\t\t\"terminalPromptCommandFailed\",\n\t\t\t\t\t\t\t\t\t\"Command executed {0} and failed\",\n\t\t\t\t\t\t\t\t\tfromNow(command.timestamp, true),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\thoverContent += localize(\n\t\t\t\t\t\t\t\t\t\"terminalPromptCommandFailedWithExitCode\",\n\t\t\t\t\t\t\t\t\t\"Command executed {0} and failed (Exit Code {1})\",\n\t\t\t\t\t\t\t\t\tfromNow(command.timestamp, true),\n\t\t\t\t\t\t\t\t\tcommand.exitCode,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\thoverContent += localize(\n\t\t\t\t\t\t\t\t\"terminalPromptCommandSuccess\",\n\t\t\t\t\t\t\t\t\"Command executed {0}\",\n\t\t\t\t\t\t\t\tfromNow(command.timestamp, true),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._hoverService.showHover({\n\t\t\t\t\t\t\tcontent: new MarkdownString(hoverContent),\n\t\t\t\t\t\t\ttarget: element,\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t),\n\t\t\tdom.addDisposableListener(element, dom.EventType.MOUSE_LEAVE, () =>\n\t\t\t\tthis.hideHover(),\n\t\t\t),\n\t\t\tdom.addDisposableListener(element, dom.EventType.MOUSE_OUT, () =>\n\t\t\t\tthis.hideHover(),\n\t\t\t),\n\t\t);\n\t}\n}\n\nexport function updateLayout(\n\tconfigurationService: IConfigurationService,\n\telement?: HTMLElement,\n): void {\n\tif (!element) {\n\t\treturn;\n\t}\n\tconst fontSize = configurationService.inspect(\n\t\tTerminalSettingId.FontSize,\n\t).value;\n\tconst defaultFontSize = configurationService.inspect(\n\t\tTerminalSettingId.FontSize,\n\t).defaultValue;\n\tconst lineHeight = configurationService.inspect(\n\t\tTerminalSettingId.LineHeight,\n\t).value;\n\tif (\n\t\ttypeof fontSize === \"number\" &&\n\t\ttypeof defaultFontSize === \"number\" &&\n\t\ttypeof lineHeight === \"number\"\n\t) {\n\t\tconst scalar =\n\t\t\tfontSize / defaultFontSize <= 1 ? fontSize / defaultFontSize : 1;\n\t\t// must be inlined to override the inlined styles from xterm\n\t\telement.style.width = `${scalar * DecorationStyles.DefaultDimension}px`;\n\t\telement.style.height = `${scalar * DecorationStyles.DefaultDimension * lineHeight}px`;\n\t\telement.style.fontSize = `${scalar * DecorationStyles.DefaultDimension}px`;\n\t\telement.style.marginLeft = `${scalar * DecorationStyles.MarginLeft}px`;\n\t}\n}\n"],
  "mappings": "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",
  "names": ["DecorationStyles", "DecorationSelector"]
}
