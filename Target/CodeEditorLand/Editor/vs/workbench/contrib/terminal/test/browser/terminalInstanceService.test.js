import{deepStrictEqual as o}from"assert";import{URI as i}from"../../../../../base/common/uri.js";import{ensureNoDisposablesAreLeakedInTestSuite as a}from"../../../../../base/test/common/utils.js";import"../../../../../platform/terminal/common/terminal.js";import"../../browser/terminal.js";import{TerminalInstanceService as c}from"../../browser/terminalInstanceService.js";import{workbenchInstantiationService as l}from"../../../../test/browser/workbenchTestServices.js";suite("Workbench - TerminalInstanceService",()=>{const r=a();let e;setup(async()=>{const n=l(void 0,r);e=r.add(n.createInstance(c))}),suite("convertProfileToShellLaunchConfig",()=>{test("should return an empty shell launch config when undefined is provided",()=>{o(e.convertProfileToShellLaunchConfig(),{}),o(e.convertProfileToShellLaunchConfig(void 0),{})}),test("should return the same shell launch config when provided",()=>{o(e.convertProfileToShellLaunchConfig({}),{}),o(e.convertProfileToShellLaunchConfig({executable:"/foo"}),{executable:"/foo"}),o(e.convertProfileToShellLaunchConfig({executable:"/foo",cwd:"/bar",args:["a","b"]}),{executable:"/foo",cwd:"/bar",args:["a","b"]}),o(e.convertProfileToShellLaunchConfig({executable:"/foo"},"/bar"),{executable:"/foo",cwd:"/bar"}),o(e.convertProfileToShellLaunchConfig({executable:"/foo",cwd:"/bar"},"/baz"),{executable:"/foo",cwd:"/baz"})}),test("should convert a provided profile to a shell launch config",()=>{o(e.convertProfileToShellLaunchConfig({profileName:"abc",path:"/foo",isDefault:!0}),{args:void 0,color:void 0,cwd:void 0,env:void 0,executable:"/foo",icon:void 0,name:void 0});const n=i.file("/icon");o(e.convertProfileToShellLaunchConfig({profileName:"abc",path:"/foo",isDefault:!0,args:["a","b"],color:"color",env:{test:"TEST"},icon:n},"/bar"),{args:["a","b"],color:"color",cwd:"/bar",env:{test:"TEST"},executable:"/foo",icon:n,name:void 0})}),test("should respect overrideName in profile",()=>{o(e.convertProfileToShellLaunchConfig({profileName:"abc",path:"/foo",isDefault:!0,overrideName:!0}),{args:void 0,color:void 0,cwd:void 0,env:void 0,executable:"/foo",icon:void 0,name:"abc"})})})});
