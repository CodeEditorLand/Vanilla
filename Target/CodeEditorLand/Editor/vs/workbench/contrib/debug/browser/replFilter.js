import{TreeVisibility as p}from"../../../../../vs/base/browser/ui/tree/tree.js";import{matchesFuzzy as f}from"../../../../../vs/base/common/filters.js";import{splitGlobAware as o}from"../../../../../vs/base/common/glob.js";import"../../../../../vs/workbench/contrib/debug/common/debug.js";import{Variable as n}from"../../../../../vs/workbench/contrib/debug/common/debugModel.js";import{ReplEvaluationInput as c,ReplEvaluationResult as d}from"../../../../../vs/workbench/contrib/debug/common/replModel.js";class i{static matchQuery=f;_parsedQueries=[];set filterQuery(t){if(this._parsedQueries=[],t=t.trim(),t&&t!==""){const r=o(t,",").map(e=>e.trim()).filter(e=>!!e.length);for(const e of r)e.startsWith("\\")?this._parsedQueries.push({type:"include",query:e.slice(1)}):e.startsWith("!")?this._parsedQueries.push({type:"exclude",query:e.slice(1)}):this._parsedQueries.push({type:"include",query:e})}}filter(t,r){if(t instanceof c||t instanceof d||t instanceof n)return p.Visible;let e=!1,s=!1;const l=t.toString(!0);for(const{type:u,query:a}of this._parsedQueries){if(u==="exclude"&&i.matchQuery(a,l))return!1;u==="include"&&(e=!0,i.matchQuery(a,l)&&(s=!0))}return e?s:typeof r<"u"?r:p.Visible}}export{i as ReplFilter};
