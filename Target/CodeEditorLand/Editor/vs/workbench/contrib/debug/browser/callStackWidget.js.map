{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/debug/browser/callStackWidget.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Button } from '../../../../base/browser/ui/button/button.js';\nimport { IListRenderer, IListVirtualDelegate } from '../../../../base/browser/ui/list/list.js';\nimport { IListAccessibilityProvider } from '../../../../base/browser/ui/list/listWidget.js';\nimport { assertNever } from '../../../../base/common/assert.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore, IDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, IObservable, ISettableObservable, observableValue, transaction } from '../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Constants } from '../../../../base/common/uint.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport './media/callStackWidget.css';\nimport { ICodeEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { EditorContributionCtor, EditorContributionInstantiation, IEditorContributionDescription } from '../../../../editor/browser/editorExtensions.js';\nimport { CodeEditorWidget } from '../../../../editor/browser/widget/codeEditor/codeEditorWidget.js';\nimport { EmbeddedCodeEditorWidget } from '../../../../editor/browser/widget/codeEditor/embeddedCodeEditorWidget.js';\nimport { IEditorOptions } from '../../../../editor/common/config/editorOptions.js';\nimport { Position } from '../../../../editor/common/core/position.js';\nimport { Range } from '../../../../editor/common/core/range.js';\nimport { IWordAtPosition } from '../../../../editor/common/core/wordHelper.js';\nimport { IEditorContribution, IEditorDecorationsCollection } from '../../../../editor/common/editorCommon.js';\nimport { Location } from '../../../../editor/common/languages.js';\nimport { ITextModelService } from '../../../../editor/common/services/resolverService.js';\nimport { ClickLinkGesture, ClickLinkMouseEvent } from '../../../../editor/contrib/gotoSymbol/browser/link/clickLinkGesture.js';\nimport { localize, localize2 } from '../../../../nls.js';\nimport { createActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { MenuWorkbenchToolBar } from '../../../../platform/actions/browser/toolbar.js';\nimport { Action2, MenuId, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { TextEditorSelectionRevealType } from '../../../../platform/editor/common/editor.js';\nimport { IInstantiationService, ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { WorkbenchList } from '../../../../platform/list/browser/listService.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { defaultButtonStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { ResourceLabel } from '../../../browser/labels.js';\nimport { makeStackFrameColumnDecoration, TOP_STACK_FRAME_DECORATION } from './callStackEditorContribution.js';\nimport { IEditorService, SIDE_GROUP } from '../../../services/editor/common/editorService.js';\n\n\nexport class CallStackFrame {\n\tconstructor(\n\t\tpublic readonly name: string,\n\t\tpublic readonly source?: URI,\n\t\tpublic readonly line = 1,\n\t\tpublic readonly column = 1,\n\t) { }\n}\n\nexport class SkippedCallFrames {\n\tconstructor(\n\t\tpublic readonly label: string,\n\t\tpublic readonly load: (token: CancellationToken) => Promise<AnyStackFrame[]>,\n\t) { }\n}\n\nexport abstract class CustomStackFrame {\n\tpublic readonly showHeader = observableValue('CustomStackFrame.showHeader', true);\n\tpublic abstract readonly height: IObservable<number>;\n\tpublic abstract readonly label: string;\n\tpublic icon?: ThemeIcon;\n\tpublic abstract render(container: HTMLElement): IDisposable;\n\tpublic renderActions?(container: HTMLElement): IDisposable;\n}\n\nexport type AnyStackFrame = SkippedCallFrames | CallStackFrame | CustomStackFrame;\n\ninterface IFrameLikeItem {\n\treadonly collapsed: ISettableObservable<boolean>;\n\treadonly height: IObservable<number>;\n}\n\nclass WrappedCallStackFrame extends CallStackFrame implements IFrameLikeItem {\n\tpublic readonly editorHeight = observableValue('WrappedCallStackFrame.height', this.source ? 100 : 0);\n\tpublic readonly collapsed = observableValue('WrappedCallStackFrame.collapsed', false);\n\n\tpublic readonly height = derived(reader => {\n\t\treturn this.collapsed.read(reader) ? HEADER_HEIGHT : HEADER_HEIGHT + this.editorHeight.read(reader);\n\t});\n\n\tconstructor(original: CallStackFrame) {\n\t\tsuper(original.name, original.source, original.line, original.column);\n\t}\n}\n\nclass WrappedCustomStackFrame implements IFrameLikeItem {\n\tpublic readonly collapsed = observableValue('WrappedCallStackFrame.collapsed', false);\n\n\tpublic readonly height = derived(reader => {\n\t\tconst headerHeight = this.original.showHeader.read(reader) ? HEADER_HEIGHT : 0;\n\t\treturn this.collapsed.read(reader) ? headerHeight : headerHeight + this.original.height.read(reader);\n\t});\n\n\tconstructor(public readonly original: CustomStackFrame) { }\n}\n\nconst isFrameLike = (item: unknown): item is IFrameLikeItem =>\n\titem instanceof WrappedCallStackFrame || item instanceof WrappedCustomStackFrame;\n\ntype ListItem = WrappedCallStackFrame | SkippedCallFrames | WrappedCustomStackFrame;\n\nconst WIDGET_CLASS_NAME = 'multiCallStackWidget';\n\n/**\n * A reusable widget that displays a call stack as a series of editors. Note\n * that this both used in debug's exception widget as well as in the testing\n * call stack view.\n */\nexport class CallStackWidget extends Disposable {\n\tprivate readonly list: WorkbenchList<ListItem>;\n\tprivate readonly layoutEmitter = this._register(new Emitter<void>());\n\tprivate readonly currentFramesDs = this._register(new DisposableStore());\n\tprivate cts?: CancellationTokenSource;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tcontainingEditor: ICodeEditor | undefined,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tcontainer.classList.add(WIDGET_CLASS_NAME);\n\t\tthis._register(toDisposable(() => container.classList.remove(WIDGET_CLASS_NAME)));\n\n\t\tthis.list = this._register(instantiationService.createInstance(\n\t\t\tWorkbenchList,\n\t\t\t'TestResultStackWidget',\n\t\t\tcontainer,\n\t\t\tnew StackDelegate(),\n\t\t\t[\n\t\t\t\tinstantiationService.createInstance(FrameCodeRenderer, containingEditor, this.layoutEmitter.event),\n\t\t\t\tinstantiationService.createInstance(MissingCodeRenderer),\n\t\t\t\tinstantiationService.createInstance(CustomRenderer),\n\t\t\t\tinstantiationService.createInstance(SkippedRenderer, (i) => this.loadFrame(i)),\n\t\t\t],\n\t\t\t{\n\t\t\t\tmultipleSelectionSupport: false,\n\t\t\t\tmouseSupport: false,\n\t\t\t\tkeyboardSupport: false,\n\t\t\t\tsetRowLineHeight: false,\n\t\t\t\taccessibilityProvider: instantiationService.createInstance(StackAccessibilityProvider),\n\t\t\t}\n\t\t) as WorkbenchList<ListItem>);\n\t}\n\n\t/** Replaces the call frames display in the view. */\n\tpublic setFrames(frames: AnyStackFrame[]): void {\n\t\t// cancel any existing load\n\t\tthis.currentFramesDs.clear();\n\t\tthis.cts = new CancellationTokenSource();\n\t\tthis._register(toDisposable(() => this.cts!.dispose(true)));\n\n\t\tthis.list.splice(0, this.list.length, this.mapFrames(frames));\n\t}\n\n\tpublic layout(height?: number, width?: number): void {\n\t\tthis.list.layout(height, width);\n\t\tthis.layoutEmitter.fire();\n\t}\n\n\tpublic collapseAll() {\n\t\ttransaction(tx => {\n\t\t\tfor (let i = 0; i < this.list.length; i++) {\n\t\t\t\tconst frame = this.list.element(i);\n\t\t\t\tif (isFrameLike(frame)) {\n\t\t\t\t\tframe.collapsed.set(true, tx);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate async loadFrame(replacing: SkippedCallFrames): Promise<void> {\n\t\tif (!this.cts) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst frames = await replacing.load(this.cts.token);\n\t\tif (this.cts.token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst index = this.list.indexOf(replacing);\n\t\tthis.list.splice(index, 1, this.mapFrames(frames));\n\t}\n\n\tprivate mapFrames(frames: AnyStackFrame[]): ListItem[] {\n\t\tconst result: ListItem[] = [];\n\t\tfor (const frame of frames) {\n\t\t\tif (frame instanceof SkippedCallFrames) {\n\t\t\t\tresult.push(frame);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst wrapped = frame instanceof CustomStackFrame\n\t\t\t\t? new WrappedCustomStackFrame(frame) : new WrappedCallStackFrame(frame);\n\t\t\tresult.push(wrapped);\n\n\t\t\tthis.currentFramesDs.add(autorun(reader => {\n\t\t\t\tconst height = wrapped.height.read(reader);\n\t\t\t\tconst idx = this.list.indexOf(wrapped);\n\t\t\t\tif (idx !== -1) {\n\t\t\t\t\tthis.list.updateElementHeight(idx, height);\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nclass StackAccessibilityProvider implements IListAccessibilityProvider<ListItem> {\n\tconstructor(@ILabelService private readonly labelService: ILabelService) { }\n\n\tgetAriaLabel(e: ListItem): string | IObservable<string> | null {\n\t\tif (e instanceof SkippedCallFrames) {\n\t\t\treturn e.label;\n\t\t}\n\n\t\tif (e instanceof WrappedCustomStackFrame) {\n\t\t\treturn e.original.label;\n\t\t}\n\n\t\tif (e instanceof CallStackFrame) {\n\t\t\tif (e.source && e.line) {\n\t\t\t\treturn localize({\n\t\t\t\t\tcomment: ['{0} is an extension-defined label, then line number and filename'],\n\t\t\t\t\tkey: 'stackTraceLabel',\n\t\t\t\t}, '{0}, line {1} in {2}', e.name, e.line, this.labelService.getUriLabel(e.source, { relative: true }));\n\t\t\t}\n\n\t\t\treturn e.name;\n\t\t}\n\n\t\tassertNever(e);\n\t}\n\tgetWidgetAriaLabel(): string {\n\t\treturn localize('stackTrace', 'Stack Trace');\n\t}\n}\n\nclass StackDelegate implements IListVirtualDelegate<ListItem> {\n\tgetHeight(element: ListItem): number {\n\t\tif (element instanceof CallStackFrame || element instanceof WrappedCustomStackFrame) {\n\t\t\treturn element.height.get();\n\t\t}\n\t\tif (element instanceof SkippedCallFrames) {\n\t\t\treturn HEADER_HEIGHT;\n\t\t}\n\n\t\tassertNever(element);\n\t}\n\n\tgetTemplateId(element: ListItem): string {\n\t\tif (element instanceof CallStackFrame) {\n\t\t\treturn element.source ? FrameCodeRenderer.templateId : MissingCodeRenderer.templateId;\n\t\t}\n\t\tif (element instanceof SkippedCallFrames) {\n\t\t\treturn SkippedRenderer.templateId;\n\t\t}\n\t\tif (element instanceof WrappedCustomStackFrame) {\n\t\t\treturn CustomRenderer.templateId;\n\t\t}\n\n\t\tassertNever(element);\n\t}\n}\n\ninterface IStackTemplateData extends IAbstractFrameRendererTemplateData {\n\teditor: CodeEditorWidget;\n\ttoolbar: MenuWorkbenchToolBar;\n}\n\nconst editorOptions: IEditorOptions = {\n\tscrollBeyondLastLine: false,\n\tscrollbar: {\n\t\tvertical: 'hidden',\n\t\thorizontal: 'hidden',\n\t\thandleMouseWheel: false,\n\t\tuseShadows: false,\n\t},\n\toverviewRulerLanes: 0,\n\tfixedOverflowWidgets: true,\n\toverviewRulerBorder: false,\n\tstickyScroll: { enabled: false },\n\tminimap: { enabled: false },\n\treadOnly: true,\n\tautomaticLayout: false,\n};\n\nconst makeFrameElements = () => dom.h('div.multiCallStackFrame', [\n\tdom.h('div.header@header', [\n\t\tdom.h('div.collapse-button@collapseButton'),\n\t\tdom.h('div.title.show-file-icons@title'),\n\t\tdom.h('div.actions@actions'),\n\t]),\n\n\tdom.h('div.editorParent', [\n\t\tdom.h('div.editorContainer@editor'),\n\t])\n]);\n\nconst HEADER_HEIGHT = 24;\n\ninterface IAbstractFrameRendererTemplateData {\n\tcontainer: HTMLElement;\n\tlabel: ResourceLabel;\n\telements: ReturnType<typeof makeFrameElements>;\n\tdecorations: string[];\n\tcollapse: Button;\n\telementStore: DisposableStore;\n\ttemplateStore: DisposableStore;\n}\n\nabstract class AbstractFrameRenderer<T extends IAbstractFrameRendererTemplateData> implements IListRenderer<ListItem, T> {\n\tpublic abstract templateId: string;\n\n\tconstructor(\n\t\t@IInstantiationService protected readonly instantiationService: IInstantiationService,\n\t) { }\n\n\trenderTemplate(container: HTMLElement): T {\n\t\tconst elements = makeFrameElements();\n\t\tcontainer.appendChild(elements.root);\n\n\n\t\tconst templateStore = new DisposableStore();\n\t\tcontainer.classList.add('multiCallStackFrameContainer');\n\t\ttemplateStore.add(toDisposable(() => {\n\t\t\tcontainer.classList.remove('multiCallStackFrameContainer');\n\t\t\telements.root.remove();\n\t\t}));\n\n\t\tconst label = templateStore.add(this.instantiationService.createInstance(ResourceLabel, elements.title, {}));\n\n\t\tconst collapse = templateStore.add(new Button(elements.collapseButton, {}));\n\n\t\tconst contentId = generateUuid();\n\t\telements.editor.id = contentId;\n\t\telements.editor.role = 'region';\n\t\telements.collapseButton.setAttribute('aria-controls', contentId);\n\n\t\treturn this.finishRenderTemplate({\n\t\t\tcontainer,\n\t\t\tdecorations: [],\n\t\t\telements,\n\t\t\tlabel,\n\t\t\tcollapse,\n\t\t\telementStore: templateStore.add(new DisposableStore()),\n\t\t\ttemplateStore,\n\t\t});\n\t}\n\n\tprotected abstract finishRenderTemplate(data: IAbstractFrameRendererTemplateData): T;\n\n\trenderElement(element: ListItem, index: number, template: T, height: number | undefined): void {\n\t\tconst { elementStore } = template;\n\t\telementStore.clear();\n\t\tconst item = element as IFrameLikeItem;\n\n\t\tthis.setupCollapseButton(item, template);\n\t}\n\n\tprivate setupCollapseButton(item: IFrameLikeItem, { elementStore, elements, collapse }: T) {\n\t\telementStore.add(autorun(reader => {\n\t\t\tcollapse.element.className = '';\n\t\t\tconst collapsed = item.collapsed.read(reader);\n\t\t\tcollapse.icon = collapsed ? Codicon.chevronRight : Codicon.chevronDown;\n\t\t\tcollapse.element.ariaExpanded = String(!collapsed);\n\t\t\telements.root.classList.toggle('collapsed', collapsed);\n\t\t}));\n\t\tconst toggleCollapse = () => item.collapsed.set(!item.collapsed.get(), undefined);\n\t\telementStore.add(collapse.onDidClick(toggleCollapse));\n\t\telementStore.add(dom.addDisposableListener(elements.title, 'click', toggleCollapse));\n\t}\n\n\tdisposeElement(element: ListItem, index: number, templateData: T, height: number | undefined): void {\n\t\ttemplateData.elementStore.clear();\n\t}\n\n\tdisposeTemplate(templateData: T): void {\n\t\ttemplateData.templateStore.dispose();\n\t}\n}\n\nconst CONTEXT_LINES = 2;\n\n/** Renderer for a normal stack frame where code is available. */\nclass FrameCodeRenderer extends AbstractFrameRenderer<IStackTemplateData> {\n\tpublic static readonly templateId = 'f';\n\n\tpublic readonly templateId = FrameCodeRenderer.templateId;\n\n\tconstructor(\n\t\tprivate readonly containingEditor: ICodeEditor | undefined,\n\t\tprivate readonly onLayout: Event<void>,\n\t\t@ITextModelService private readonly modelService: ITextModelService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t) {\n\t\tsuper(instantiationService);\n\t}\n\n\tprotected override finishRenderTemplate(data: IAbstractFrameRendererTemplateData): IStackTemplateData {\n\t\t// override default e.g. language contributions, only allow users to click\n\t\t// on code in the call stack to go to its source location\n\t\tconst contributions: IEditorContributionDescription[] = [{\n\t\t\tid: ClickToLocationContribution.ID,\n\t\t\tinstantiation: EditorContributionInstantiation.BeforeFirstInteraction,\n\t\t\tctor: ClickToLocationContribution as EditorContributionCtor,\n\t\t}];\n\n\t\tconst editor = this.containingEditor\n\t\t\t? this.instantiationService.createInstance(\n\t\t\t\tEmbeddedCodeEditorWidget,\n\t\t\t\tdata.elements.editor,\n\t\t\t\teditorOptions,\n\t\t\t\t{ isSimpleWidget: true, contributions },\n\t\t\t\tthis.containingEditor,\n\t\t\t)\n\t\t\t: this.instantiationService.createInstance(\n\t\t\t\tCodeEditorWidget,\n\t\t\t\tdata.elements.editor,\n\t\t\t\teditorOptions,\n\t\t\t\t{ isSimpleWidget: true, contributions },\n\t\t\t);\n\n\t\tdata.templateStore.add(editor);\n\n\t\tconst toolbar = data.templateStore.add(this.instantiationService.createInstance(MenuWorkbenchToolBar, data.elements.actions, MenuId.DebugCallStackToolbar, {\n\t\t\tmenuOptions: { shouldForwardArgs: true },\n\t\t\tactionViewItemProvider: (action, options) => createActionViewItem(this.instantiationService, action, options),\n\t\t}));\n\n\t\treturn { ...data, editor, toolbar };\n\t}\n\n\toverride renderElement(element: ListItem, index: number, template: IStackTemplateData, height: number | undefined): void {\n\t\tsuper.renderElement(element, index, template, height);\n\n\t\tconst { elementStore, editor } = template;\n\n\t\tconst item = element as WrappedCallStackFrame;\n\t\tconst uri = item.source!;\n\n\t\ttemplate.label.element.setFile(uri);\n\t\tconst cts = new CancellationTokenSource();\n\t\telementStore.add(toDisposable(() => cts.dispose(true)));\n\t\tthis.modelService.createModelReference(uri).then(reference => {\n\t\t\tif (cts.token.isCancellationRequested) {\n\t\t\t\treturn reference.dispose();\n\t\t\t}\n\n\t\t\telementStore.add(reference);\n\t\t\teditor.setModel(reference.object.textEditorModel);\n\t\t\tthis.setupEditorAfterModel(item, template);\n\t\t\tthis.setupEditorLayout(item, template);\n\t\t});\n\t}\n\n\tprivate setupEditorLayout(item: WrappedCallStackFrame, { elementStore, container, editor }: IStackTemplateData) {\n\t\tconst layout = () => {\n\t\t\tconst prev = editor.getContentHeight();\n\t\t\teditor.layout({ width: container.clientWidth, height: prev });\n\n\t\t\tconst next = editor.getContentHeight();\n\t\t\tif (next !== prev) {\n\t\t\t\teditor.layout({ width: container.clientWidth, height: next });\n\t\t\t}\n\n\t\t\titem.editorHeight.set(next, undefined);\n\t\t};\n\t\telementStore.add(editor.onDidChangeModelDecorations(layout));\n\t\telementStore.add(editor.onDidChangeModelContent(layout));\n\t\telementStore.add(editor.onDidChangeModelOptions(layout));\n\t\telementStore.add(this.onLayout(layout));\n\t\tlayout();\n\t}\n\n\tprivate setupEditorAfterModel(item: WrappedCallStackFrame, template: IStackTemplateData): void {\n\t\tconst range = Range.fromPositions({\n\t\t\tcolumn: item.column ?? 1,\n\t\t\tlineNumber: item.line ?? 1,\n\t\t});\n\n\t\ttemplate.toolbar.context = { uri: item.source, range };\n\n\t\ttemplate.editor.setHiddenAreas([\n\t\t\tRange.fromPositions(\n\t\t\t\t{ column: 1, lineNumber: 1 },\n\t\t\t\t{ column: 1, lineNumber: Math.max(1, item.line - CONTEXT_LINES - 1) },\n\t\t\t),\n\t\t\tRange.fromPositions(\n\t\t\t\t{ column: 1, lineNumber: item.line + CONTEXT_LINES + 1 },\n\t\t\t\t{ column: 1, lineNumber: Constants.MAX_SAFE_SMALL_INTEGER },\n\t\t\t),\n\t\t]);\n\n\t\ttemplate.editor.changeDecorations(accessor => {\n\t\t\tfor (const d of template.decorations) {\n\t\t\t\taccessor.removeDecoration(d);\n\t\t\t}\n\t\t\ttemplate.decorations.length = 0;\n\n\t\t\tconst beforeRange = range.setStartPosition(range.startLineNumber, 1);\n\t\t\tconst hasCharactersBefore = !!template.editor.getModel()?.getValueInRange(beforeRange).trim();\n\t\t\tconst decoRange = range.setEndPosition(range.startLineNumber, Constants.MAX_SAFE_SMALL_INTEGER);\n\n\t\t\ttemplate.decorations.push(accessor.addDecoration(\n\t\t\t\tdecoRange,\n\t\t\t\tmakeStackFrameColumnDecoration(!hasCharactersBefore),\n\t\t\t));\n\t\t\ttemplate.decorations.push(accessor.addDecoration(\n\t\t\t\tdecoRange,\n\t\t\t\tTOP_STACK_FRAME_DECORATION,\n\t\t\t));\n\t\t});\n\n\t\titem.editorHeight.set(template.editor.getContentHeight(), undefined);\n\t}\n}\n\ninterface IMissingTemplateData {\n\telements: ReturnType<typeof makeFrameElements>;\n\tlabel: ResourceLabel;\n}\n\n/** Renderer for a call frame that's missing a URI */\nclass MissingCodeRenderer implements IListRenderer<ListItem, IMissingTemplateData> {\n\tpublic static readonly templateId = 'm';\n\tpublic readonly templateId = MissingCodeRenderer.templateId;\n\n\tconstructor(@IInstantiationService private readonly instantiationService: IInstantiationService) { }\n\n\trenderTemplate(container: HTMLElement): IMissingTemplateData {\n\t\tconst elements = makeFrameElements();\n\t\telements.root.classList.add('missing');\n\t\tcontainer.appendChild(elements.root);\n\t\tconst label = this.instantiationService.createInstance(ResourceLabel, elements.title, {});\n\t\treturn { elements, label };\n\t}\n\n\trenderElement(element: ListItem, _index: number, templateData: IMissingTemplateData): void {\n\t\tconst cast = element as CallStackFrame;\n\t\ttemplateData.label.element.setResource({\n\t\t\tname: cast.name,\n\t\t\tdescription: localize('stackFrameLocation', 'Line {0} column {1}', cast.line, cast.column),\n\t\t\trange: { startLineNumber: cast.line, startColumn: cast.column, endColumn: cast.column, endLineNumber: cast.line },\n\t\t}, {\n\t\t\ticon: Codicon.fileBinary,\n\t\t});\n\t}\n\n\tdisposeTemplate(templateData: IMissingTemplateData): void {\n\t\ttemplateData.label.dispose();\n\t\ttemplateData.elements.root.remove();\n\t}\n}\n\n/** Renderer for a call frame that's missing a URI */\nclass CustomRenderer extends AbstractFrameRenderer<IAbstractFrameRendererTemplateData> {\n\tpublic static readonly templateId = 'c';\n\tpublic readonly templateId = CustomRenderer.templateId;\n\n\tprotected override finishRenderTemplate(data: IAbstractFrameRendererTemplateData): IAbstractFrameRendererTemplateData {\n\t\treturn data;\n\t}\n\n\toverride renderElement(element: ListItem, index: number, template: IAbstractFrameRendererTemplateData, height: number | undefined): void {\n\t\tsuper.renderElement(element, index, template, height);\n\n\t\tconst item = element as WrappedCustomStackFrame;\n\t\tconst { elementStore, container, label } = template;\n\n\t\tlabel.element.setResource({ name: item.original.label }, { icon: item.original.icon });\n\n\t\telementStore.add(autorun(reader => {\n\t\t\ttemplate.elements.header.style.display = item.original.showHeader.read(reader) ? '' : 'none';\n\t\t}));\n\n\t\telementStore.add(autorunWithStore((reader, store) => {\n\t\t\tif (!item.collapsed.read(reader)) {\n\t\t\t\tstore.add(item.original.render(container));\n\t\t\t}\n\t\t}));\n\n\t\tconst actions = item.original.renderActions?.(template.elements.actions);\n\t\tif (actions) {\n\t\t\telementStore.add(actions);\n\t\t}\n\t}\n}\n\ninterface ISkippedTemplateData {\n\tbutton: Button;\n\tcurrent?: SkippedCallFrames;\n\tstore: DisposableStore;\n}\n\n/** Renderer for a button to load more call frames */\nclass SkippedRenderer implements IListRenderer<ListItem, ISkippedTemplateData> {\n\tpublic static readonly templateId = 's';\n\tpublic readonly templateId = SkippedRenderer.templateId;\n\n\tconstructor(\n\t\tprivate readonly loadFrames: (fromItem: SkippedCallFrames) => Promise<void>,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t) { }\n\n\trenderTemplate(container: HTMLElement): ISkippedTemplateData {\n\t\tconst store = new DisposableStore();\n\t\tconst button = new Button(container, { title: '', ...defaultButtonStyles });\n\t\tconst data: ISkippedTemplateData = { button, store };\n\n\t\tstore.add(button);\n\t\tstore.add(button.onDidClick(() => {\n\t\t\tif (!data.current || !button.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tbutton.enabled = false;\n\t\t\tthis.loadFrames(data.current).catch(e => {\n\t\t\t\tthis.notificationService.error(localize('failedToLoadFrames', 'Failed to load stack frames: {0}', e.message));\n\t\t\t});\n\t\t}));\n\n\t\treturn data;\n\t}\n\n\trenderElement(element: ListItem, index: number, templateData: ISkippedTemplateData, height: number | undefined): void {\n\t\tconst cast = element as SkippedCallFrames;\n\t\ttemplateData.button.enabled = true;\n\t\ttemplateData.button.label = cast.label;\n\t\ttemplateData.current = cast;\n\t}\n\n\tdisposeTemplate(templateData: ISkippedTemplateData): void {\n\t\ttemplateData.store.dispose();\n\t}\n}\n\n/** A simple contribution that makes all data in the editor clickable to go to the location */\nclass ClickToLocationContribution extends Disposable implements IEditorContribution {\n\tpublic static readonly ID = 'clickToLocation';\n\tprivate readonly linkDecorations: IEditorDecorationsCollection;\n\tprivate current: { line: number; word: IWordAtPosition } | undefined;\n\n\tconstructor(\n\t\tprivate readonly editor: ICodeEditor,\n\t\t@IEditorService editorService: IEditorService,\n\t) {\n\t\tsuper();\n\t\tthis.linkDecorations = editor.createDecorationsCollection();\n\t\tthis._register(toDisposable(() => this.linkDecorations.clear()));\n\n\t\tconst clickLinkGesture = this._register(new ClickLinkGesture(editor));\n\n\t\tthis._register(clickLinkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n\t\t\tthis.onMove(mouseEvent);\n\t\t}));\n\t\tthis._register(clickLinkGesture.onExecute((e) => {\n\t\t\tconst model = this.editor.getModel();\n\t\t\tif (!this.current || !model) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\teditorService.openEditor({\n\t\t\t\tresource: model.uri,\n\t\t\t\toptions: {\n\t\t\t\t\tselection: Range.fromPositions(new Position(this.current.line, this.current.word.startColumn)),\n\t\t\t\t\tselectionRevealType: TextEditorSelectionRevealType.CenterIfOutsideViewport,\n\t\t\t\t},\n\t\t\t}, e.hasSideBySideModifier ? SIDE_GROUP : undefined);\n\t\t}));\n\t}\n\n\tprivate onMove(mouseEvent: ClickLinkMouseEvent) {\n\t\tif (!mouseEvent.hasTriggerModifier) {\n\t\t\treturn this.clear();\n\t\t}\n\n\t\tconst position = mouseEvent.target.position;\n\t\tconst word = position && this.editor.getModel()?.getWordAtPosition(position);\n\t\tif (!word) {\n\t\t\treturn this.clear();\n\t\t}\n\n\t\tconst prev = this.current?.word;\n\t\tif (prev && prev.startColumn === word.startColumn && prev.endColumn === word.endColumn && prev.word === word.word) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.current = { word, line: position.lineNumber };\n\t\tthis.linkDecorations.set([{\n\t\t\trange: new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn),\n\t\t\toptions: {\n\t\t\t\tdescription: 'call-stack-go-to-file-link',\n\t\t\t\tinlineClassName: 'call-stack-go-to-file-link',\n\t\t\t},\n\t\t}]);\n\t}\n\n\tprivate clear() {\n\t\tthis.linkDecorations.clear();\n\t\tthis.current = undefined;\n\t}\n}\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'callStackWidget.goToFile',\n\t\t\ttitle: localize2('goToFile', 'Open File'),\n\t\t\ticon: Codicon.goToFile,\n\t\t\tmenu: {\n\t\t\t\tid: MenuId.DebugCallStackToolbar,\n\t\t\t\torder: 22,\n\t\t\t\tgroup: 'navigation',\n\t\t\t},\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor, { uri, range }: Location): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tawait editorService.openEditor({\n\t\t\tresource: uri,\n\t\t\toptions: {\n\t\t\t\tselection: range,\n\t\t\t\tselectionRevealType: TextEditorSelectionRevealType.CenterIfOutsideViewport,\n\t\t\t},\n\t\t});\n\t}\n});\n"],
  "mappings": "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",
  "names": []
}
