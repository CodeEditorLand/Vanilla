{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/debug/browser/callStackWidget.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from \"../../../../base/browser/dom.js\";\nimport { Button } from \"../../../../base/browser/ui/button/button.js\";\nimport type {\n\tIListRenderer,\n\tIListVirtualDelegate,\n} from \"../../../../base/browser/ui/list/list.js\";\nimport type { IListAccessibilityProvider } from \"../../../../base/browser/ui/list/listWidget.js\";\nimport { assertNever } from \"../../../../base/common/assert.js\";\nimport {\n\ttype CancellationToken,\n\tCancellationTokenSource,\n} from \"../../../../base/common/cancellation.js\";\nimport { Codicon } from \"../../../../base/common/codicons.js\";\nimport { Emitter, type Event } from \"../../../../base/common/event.js\";\nimport {\n\tDisposable,\n\tDisposableStore,\n\ttype IDisposable,\n\ttoDisposable,\n} from \"../../../../base/common/lifecycle.js\";\nimport {\n\ttype IObservable,\n\ttype ISettableObservable,\n\tautorun,\n\tautorunWithStore,\n\tderived,\n\tobservableValue,\n\ttransaction,\n} from \"../../../../base/common/observable.js\";\nimport type { ThemeIcon } from \"../../../../base/common/themables.js\";\nimport { Constants } from \"../../../../base/common/uint.js\";\nimport type { URI } from \"../../../../base/common/uri.js\";\nimport { generateUuid } from \"../../../../base/common/uuid.js\";\nimport \"./media/callStackWidget.css\";\nimport type { ICodeEditor } from \"../../../../editor/browser/editorBrowser.js\";\nimport {\n\ttype EditorContributionCtor,\n\tEditorContributionInstantiation,\n\ttype IEditorContributionDescription,\n} from \"../../../../editor/browser/editorExtensions.js\";\nimport { CodeEditorWidget } from \"../../../../editor/browser/widget/codeEditor/codeEditorWidget.js\";\nimport { EmbeddedCodeEditorWidget } from \"../../../../editor/browser/widget/codeEditor/embeddedCodeEditorWidget.js\";\nimport type { IEditorOptions } from \"../../../../editor/common/config/editorOptions.js\";\nimport { Position } from \"../../../../editor/common/core/position.js\";\nimport { Range } from \"../../../../editor/common/core/range.js\";\nimport type { IWordAtPosition } from \"../../../../editor/common/core/wordHelper.js\";\nimport type {\n\tIEditorContribution,\n\tIEditorDecorationsCollection,\n} from \"../../../../editor/common/editorCommon.js\";\nimport type { Location } from \"../../../../editor/common/languages.js\";\nimport { ITextModelService } from \"../../../../editor/common/services/resolverService.js\";\nimport {\n\tClickLinkGesture,\n\ttype ClickLinkMouseEvent,\n} from \"../../../../editor/contrib/gotoSymbol/browser/link/clickLinkGesture.js\";\nimport { localize, localize2 } from \"../../../../nls.js\";\nimport { createActionViewItem } from \"../../../../platform/actions/browser/menuEntryActionViewItem.js\";\nimport { MenuWorkbenchToolBar } from \"../../../../platform/actions/browser/toolbar.js\";\nimport {\n\tAction2,\n\tMenuId,\n\tregisterAction2,\n} from \"../../../../platform/actions/common/actions.js\";\nimport { TextEditorSelectionRevealType } from \"../../../../platform/editor/common/editor.js\";\nimport {\n\tIInstantiationService,\n\ttype ServicesAccessor,\n} from \"../../../../platform/instantiation/common/instantiation.js\";\nimport { ILabelService } from \"../../../../platform/label/common/label.js\";\nimport { WorkbenchList } from \"../../../../platform/list/browser/listService.js\";\nimport { INotificationService } from \"../../../../platform/notification/common/notification.js\";\nimport { defaultButtonStyles } from \"../../../../platform/theme/browser/defaultStyles.js\";\nimport { ResourceLabel } from \"../../../browser/labels.js\";\nimport {\n\tIEditorService,\n\tSIDE_GROUP,\n} from \"../../../services/editor/common/editorService.js\";\nimport {\n\tTOP_STACK_FRAME_DECORATION,\n\tmakeStackFrameColumnDecoration,\n} from \"./callStackEditorContribution.js\";\n\nexport class CallStackFrame {\n\tconstructor(\n\t\tpublic readonly name: string,\n\t\tpublic readonly source?: URI,\n\t\tpublic readonly line = 1,\n\t\tpublic readonly column = 1,\n\t) {}\n}\n\nexport class SkippedCallFrames {\n\tconstructor(\n\t\tpublic readonly label: string,\n\t\tpublic readonly load: (\n\t\t\ttoken: CancellationToken,\n\t\t) => Promise<AnyStackFrame[]>,\n\t) {}\n}\n\nexport abstract class CustomStackFrame {\n\tpublic readonly showHeader = observableValue(\n\t\t\"CustomStackFrame.showHeader\",\n\t\ttrue,\n\t);\n\tpublic abstract readonly height: IObservable<number>;\n\tpublic abstract readonly label: string;\n\tpublic icon?: ThemeIcon;\n\tpublic abstract render(container: HTMLElement): IDisposable;\n\tpublic renderActions?(container: HTMLElement): IDisposable;\n}\n\nexport type AnyStackFrame =\n\t| SkippedCallFrames\n\t| CallStackFrame\n\t| CustomStackFrame;\n\ninterface IFrameLikeItem {\n\treadonly collapsed: ISettableObservable<boolean>;\n\treadonly height: IObservable<number>;\n}\n\nclass WrappedCallStackFrame extends CallStackFrame implements IFrameLikeItem {\n\tpublic readonly editorHeight = observableValue(\n\t\t\"WrappedCallStackFrame.height\",\n\t\tthis.source ? 100 : 0,\n\t);\n\tpublic readonly collapsed = observableValue(\n\t\t\"WrappedCallStackFrame.collapsed\",\n\t\tfalse,\n\t);\n\n\tpublic readonly height = derived((reader) => {\n\t\treturn this.collapsed.read(reader)\n\t\t\t? HEADER_HEIGHT\n\t\t\t: HEADER_HEIGHT + this.editorHeight.read(reader);\n\t});\n\n\tconstructor(original: CallStackFrame) {\n\t\tsuper(original.name, original.source, original.line, original.column);\n\t}\n}\n\nclass WrappedCustomStackFrame implements IFrameLikeItem {\n\tpublic readonly collapsed = observableValue(\n\t\t\"WrappedCallStackFrame.collapsed\",\n\t\tfalse,\n\t);\n\n\tpublic readonly height = derived((reader) => {\n\t\tconst headerHeight = this.original.showHeader.read(reader)\n\t\t\t? HEADER_HEIGHT\n\t\t\t: 0;\n\t\treturn this.collapsed.read(reader)\n\t\t\t? headerHeight\n\t\t\t: headerHeight + this.original.height.read(reader);\n\t});\n\n\tconstructor(public readonly original: CustomStackFrame) {}\n}\n\nconst isFrameLike = (item: unknown): item is IFrameLikeItem =>\n\titem instanceof WrappedCallStackFrame ||\n\titem instanceof WrappedCustomStackFrame;\n\ntype ListItem =\n\t| WrappedCallStackFrame\n\t| SkippedCallFrames\n\t| WrappedCustomStackFrame;\n\nconst WIDGET_CLASS_NAME = \"multiCallStackWidget\";\n\n/**\n * A reusable widget that displays a call stack as a series of editors. Note\n * that this both used in debug's exception widget as well as in the testing\n * call stack view.\n */\nexport class CallStackWidget extends Disposable {\n\tprivate readonly list: WorkbenchList<ListItem>;\n\tprivate readonly layoutEmitter = this._register(new Emitter<void>());\n\tprivate readonly currentFramesDs = this._register(new DisposableStore());\n\tprivate cts?: CancellationTokenSource;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tcontainingEditor: ICodeEditor | undefined,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t) {\n\t\tsuper();\n\n\t\tcontainer.classList.add(WIDGET_CLASS_NAME);\n\t\tthis._register(\n\t\t\ttoDisposable(() => container.classList.remove(WIDGET_CLASS_NAME)),\n\t\t);\n\n\t\tthis.list = this._register(\n\t\t\tinstantiationService.createInstance(\n\t\t\t\tWorkbenchList,\n\t\t\t\t\"TestResultStackWidget\",\n\t\t\t\tcontainer,\n\t\t\t\tnew StackDelegate(),\n\t\t\t\t[\n\t\t\t\t\tinstantiationService.createInstance(\n\t\t\t\t\t\tFrameCodeRenderer,\n\t\t\t\t\t\tcontainingEditor,\n\t\t\t\t\t\tthis.layoutEmitter.event,\n\t\t\t\t\t),\n\t\t\t\t\tinstantiationService.createInstance(MissingCodeRenderer),\n\t\t\t\t\tinstantiationService.createInstance(CustomRenderer),\n\t\t\t\t\tinstantiationService.createInstance(SkippedRenderer, (i) =>\n\t\t\t\t\t\tthis.loadFrame(i),\n\t\t\t\t\t),\n\t\t\t\t],\n\t\t\t\t{\n\t\t\t\t\tmultipleSelectionSupport: false,\n\t\t\t\t\tmouseSupport: false,\n\t\t\t\t\tkeyboardSupport: false,\n\t\t\t\t\tsetRowLineHeight: false,\n\t\t\t\t\taccessibilityProvider: instantiationService.createInstance(\n\t\t\t\t\t\tStackAccessibilityProvider,\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t) as WorkbenchList<ListItem>,\n\t\t);\n\t}\n\n\t/** Replaces the call frames display in the view. */\n\tpublic setFrames(frames: AnyStackFrame[]): void {\n\t\t// cancel any existing load\n\t\tthis.currentFramesDs.clear();\n\t\tthis.cts = new CancellationTokenSource();\n\t\tthis._register(toDisposable(() => this.cts!.dispose(true)));\n\n\t\tthis.list.splice(0, this.list.length, this.mapFrames(frames));\n\t}\n\n\tpublic layout(height?: number, width?: number): void {\n\t\tthis.list.layout(height, width);\n\t\tthis.layoutEmitter.fire();\n\t}\n\n\tpublic collapseAll() {\n\t\ttransaction((tx) => {\n\t\t\tfor (let i = 0; i < this.list.length; i++) {\n\t\t\t\tconst frame = this.list.element(i);\n\t\t\t\tif (isFrameLike(frame)) {\n\t\t\t\t\tframe.collapsed.set(true, tx);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate async loadFrame(replacing: SkippedCallFrames): Promise<void> {\n\t\tif (!this.cts) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst frames = await replacing.load(this.cts.token);\n\t\tif (this.cts.token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst index = this.list.indexOf(replacing);\n\t\tthis.list.splice(index, 1, this.mapFrames(frames));\n\t}\n\n\tprivate mapFrames(frames: AnyStackFrame[]): ListItem[] {\n\t\tconst result: ListItem[] = [];\n\t\tfor (const frame of frames) {\n\t\t\tif (frame instanceof SkippedCallFrames) {\n\t\t\t\tresult.push(frame);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst wrapped =\n\t\t\t\tframe instanceof CustomStackFrame\n\t\t\t\t\t? new WrappedCustomStackFrame(frame)\n\t\t\t\t\t: new WrappedCallStackFrame(frame);\n\t\t\tresult.push(wrapped);\n\n\t\t\tthis.currentFramesDs.add(\n\t\t\t\tautorun((reader) => {\n\t\t\t\t\tconst height = wrapped.height.read(reader);\n\t\t\t\t\tconst idx = this.list.indexOf(wrapped);\n\t\t\t\t\tif (idx !== -1) {\n\t\t\t\t\t\tthis.list.updateElementHeight(idx, height);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nclass StackAccessibilityProvider\n\timplements IListAccessibilityProvider<ListItem>\n{\n\tconstructor(@ILabelService private readonly labelService: ILabelService) { }\n\n\tgetAriaLabel(e: ListItem): string | IObservable<string> | null {\n\t\tif (e instanceof SkippedCallFrames) {\n\t\t\treturn e.label;\n\t\t}\n\n\t\tif (e instanceof WrappedCustomStackFrame) {\n\t\t\treturn e.original.label;\n\t\t}\n\n\t\tif (e instanceof CallStackFrame) {\n\t\t\tif (e.source && e.line) {\n\t\t\t\treturn localize(\n\t\t\t\t\t{\n\t\t\t\t\t\tcomment: [\n\t\t\t\t\t\t\t\"{0} is an extension-defined label, then line number and filename\",\n\t\t\t\t\t\t],\n\t\t\t\t\t\tkey: \"stackTraceLabel\",\n\t\t\t\t\t},\n\t\t\t\t\t\"{0}, line {1} in {2}\",\n\t\t\t\t\te.name,\n\t\t\t\t\te.line,\n\t\t\t\t\tthis.labelService.getUriLabel(e.source, { relative: true }),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn e.name;\n\t\t}\n\n\t\tassertNever(e);\n\t}\n\tgetWidgetAriaLabel(): string {\n\t\treturn localize(\"stackTrace\", \"Stack Trace\");\n\t}\n}\n\nclass StackDelegate implements IListVirtualDelegate<ListItem> {\n\tgetHeight(element: ListItem): number {\n\t\tif (\n\t\t\telement instanceof CallStackFrame ||\n\t\t\telement instanceof WrappedCustomStackFrame\n\t\t) {\n\t\t\treturn element.height.get();\n\t\t}\n\t\tif (element instanceof SkippedCallFrames) {\n\t\t\treturn HEADER_HEIGHT;\n\t\t}\n\n\t\tassertNever(element);\n\t}\n\n\tgetTemplateId(element: ListItem): string {\n\t\tif (element instanceof CallStackFrame) {\n\t\t\treturn element.source\n\t\t\t\t? FrameCodeRenderer.templateId\n\t\t\t\t: MissingCodeRenderer.templateId;\n\t\t}\n\t\tif (element instanceof SkippedCallFrames) {\n\t\t\treturn SkippedRenderer.templateId;\n\t\t}\n\t\tif (element instanceof WrappedCustomStackFrame) {\n\t\t\treturn CustomRenderer.templateId;\n\t\t}\n\n\t\tassertNever(element);\n\t}\n}\n\ninterface IStackTemplateData extends IAbstractFrameRendererTemplateData {\n\teditor: CodeEditorWidget;\n\ttoolbar: MenuWorkbenchToolBar;\n}\n\nconst editorOptions: IEditorOptions = {\n\tscrollBeyondLastLine: false,\n\tscrollbar: {\n\t\tvertical: \"hidden\",\n\t\thorizontal: \"hidden\",\n\t\thandleMouseWheel: false,\n\t\tuseShadows: false,\n\t},\n\toverviewRulerLanes: 0,\n\tfixedOverflowWidgets: true,\n\toverviewRulerBorder: false,\n\tstickyScroll: { enabled: false },\n\tminimap: { enabled: false },\n\treadOnly: true,\n\tautomaticLayout: false,\n};\n\nconst makeFrameElements = () =>\n\tdom.h(\"div.multiCallStackFrame\", [\n\t\tdom.h(\"div.header@header\", [\n\t\t\tdom.h(\"div.collapse-button@collapseButton\"),\n\t\t\tdom.h(\"div.title.show-file-icons@title\"),\n\t\t\tdom.h(\"div.actions@actions\"),\n\t\t]),\n\n\t\tdom.h(\"div.editorParent\", [dom.h(\"div.editorContainer@editor\")]),\n\t]);\n\nconst HEADER_HEIGHT = 24;\n\ninterface IAbstractFrameRendererTemplateData {\n\tcontainer: HTMLElement;\n\tlabel: ResourceLabel;\n\telements: ReturnType<typeof makeFrameElements>;\n\tdecorations: string[];\n\tcollapse: Button;\n\telementStore: DisposableStore;\n\ttemplateStore: DisposableStore;\n}\n\nabstract class AbstractFrameRenderer<\n\tT extends IAbstractFrameRendererTemplateData,\n> implements IListRenderer<ListItem, T>\n{\n\tpublic abstract templateId: string;\n\n\tconstructor(\n\t\t@IInstantiationService\n\t\tprotected readonly instantiationService: IInstantiationService,\n\t) {}\n\n\trenderTemplate(container: HTMLElement): T {\n\t\tconst elements = makeFrameElements();\n\t\tcontainer.appendChild(elements.root);\n\n\t\tconst templateStore = new DisposableStore();\n\t\tcontainer.classList.add(\"multiCallStackFrameContainer\");\n\t\ttemplateStore.add(\n\t\t\ttoDisposable(() => {\n\t\t\t\tcontainer.classList.remove(\"multiCallStackFrameContainer\");\n\t\t\t\telements.root.remove();\n\t\t\t}),\n\t\t);\n\n\t\tconst label = templateStore.add(\n\t\t\tthis.instantiationService.createInstance(\n\t\t\t\tResourceLabel,\n\t\t\t\telements.title,\n\t\t\t\t{},\n\t\t\t),\n\t\t);\n\n\t\tconst collapse = templateStore.add(\n\t\t\tnew Button(elements.collapseButton, {}),\n\t\t);\n\n\t\tconst contentId = generateUuid();\n\t\telements.editor.id = contentId;\n\t\telements.editor.role = \"region\";\n\t\telements.collapseButton.setAttribute(\"aria-controls\", contentId);\n\n\t\treturn this.finishRenderTemplate({\n\t\t\tcontainer,\n\t\t\tdecorations: [],\n\t\t\telements,\n\t\t\tlabel,\n\t\t\tcollapse,\n\t\t\telementStore: templateStore.add(new DisposableStore()),\n\t\t\ttemplateStore,\n\t\t});\n\t}\n\n\tprotected abstract finishRenderTemplate(\n\t\tdata: IAbstractFrameRendererTemplateData,\n\t): T;\n\n\trenderElement(\n\t\telement: ListItem,\n\t\tindex: number,\n\t\ttemplate: T,\n\t\theight: number | undefined,\n\t): void {\n\t\tconst { elementStore } = template;\n\t\telementStore.clear();\n\t\tconst item = element as IFrameLikeItem;\n\n\t\tthis.setupCollapseButton(item, template);\n\t}\n\n\tprivate setupCollapseButton(\n\t\titem: IFrameLikeItem,\n\t\t{ elementStore, elements, collapse }: T,\n\t) {\n\t\telementStore.add(\n\t\t\tautorun((reader) => {\n\t\t\t\tcollapse.element.className = \"\";\n\t\t\t\tconst collapsed = item.collapsed.read(reader);\n\t\t\t\tcollapse.icon = collapsed\n\t\t\t\t\t? Codicon.chevronRight\n\t\t\t\t\t: Codicon.chevronDown;\n\t\t\t\tcollapse.element.ariaExpanded = String(!collapsed);\n\t\t\t\telements.root.classList.toggle(\"collapsed\", collapsed);\n\t\t\t}),\n\t\t);\n\t\tconst toggleCollapse = () =>\n\t\t\titem.collapsed.set(!item.collapsed.get(), undefined);\n\t\telementStore.add(collapse.onDidClick(toggleCollapse));\n\t\telementStore.add(\n\t\t\tdom.addDisposableListener(elements.title, \"click\", toggleCollapse),\n\t\t);\n\t}\n\n\tdisposeElement(\n\t\telement: ListItem,\n\t\tindex: number,\n\t\ttemplateData: T,\n\t\theight: number | undefined,\n\t): void {\n\t\ttemplateData.elementStore.clear();\n\t}\n\n\tdisposeTemplate(templateData: T): void {\n\t\ttemplateData.templateStore.dispose();\n\t}\n}\n\nconst CONTEXT_LINES = 2;\n\n/** Renderer for a normal stack frame where code is available. */\nclass FrameCodeRenderer extends AbstractFrameRenderer<IStackTemplateData> {\n\tpublic static readonly templateId = \"f\";\n\n\tpublic readonly templateId = FrameCodeRenderer.templateId;\n\n\tconstructor(\n\t\tprivate readonly containingEditor: ICodeEditor | undefined,\n\t\tprivate readonly onLayout: Event<void>,\n\t\t@ITextModelService private readonly modelService: ITextModelService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t) {\n\t\tsuper(instantiationService);\n\t}\n\n\tprotected override finishRenderTemplate(\n\t\tdata: IAbstractFrameRendererTemplateData,\n\t): IStackTemplateData {\n\t\t// override default e.g. language contributions, only allow users to click\n\t\t// on code in the call stack to go to its source location\n\t\tconst contributions: IEditorContributionDescription[] = [\n\t\t\t{\n\t\t\t\tid: ClickToLocationContribution.ID,\n\t\t\t\tinstantiation:\n\t\t\t\t\tEditorContributionInstantiation.BeforeFirstInteraction,\n\t\t\t\tctor: ClickToLocationContribution as EditorContributionCtor,\n\t\t\t},\n\t\t];\n\n\t\tconst editor = this.containingEditor\n\t\t\t? this.instantiationService.createInstance(\n\t\t\t\t\tEmbeddedCodeEditorWidget,\n\t\t\t\t\tdata.elements.editor,\n\t\t\t\t\teditorOptions,\n\t\t\t\t\t{ isSimpleWidget: true, contributions },\n\t\t\t\t\tthis.containingEditor,\n\t\t\t\t)\n\t\t\t: this.instantiationService.createInstance(\n\t\t\t\t\tCodeEditorWidget,\n\t\t\t\t\tdata.elements.editor,\n\t\t\t\t\teditorOptions,\n\t\t\t\t\t{ isSimpleWidget: true, contributions },\n\t\t\t\t);\n\n\t\tdata.templateStore.add(editor);\n\n\t\tconst toolbar = data.templateStore.add(\n\t\t\tthis.instantiationService.createInstance(\n\t\t\t\tMenuWorkbenchToolBar,\n\t\t\t\tdata.elements.actions,\n\t\t\t\tMenuId.DebugCallStackToolbar,\n\t\t\t\t{\n\t\t\t\t\tmenuOptions: { shouldForwardArgs: true },\n\t\t\t\t\tactionViewItemProvider: (action, options) =>\n\t\t\t\t\t\tcreateActionViewItem(\n\t\t\t\t\t\t\tthis.instantiationService,\n\t\t\t\t\t\t\taction,\n\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\n\t\treturn { ...data, editor, toolbar };\n\t}\n\n\toverride renderElement(\n\t\telement: ListItem,\n\t\tindex: number,\n\t\ttemplate: IStackTemplateData,\n\t\theight: number | undefined,\n\t): void {\n\t\tsuper.renderElement(element, index, template, height);\n\n\t\tconst { elementStore, editor } = template;\n\n\t\tconst item = element as WrappedCallStackFrame;\n\t\tconst uri = item.source!;\n\n\t\ttemplate.label.element.setFile(uri);\n\t\tconst cts = new CancellationTokenSource();\n\t\telementStore.add(toDisposable(() => cts.dispose(true)));\n\t\tthis.modelService.createModelReference(uri).then((reference) => {\n\t\t\tif (cts.token.isCancellationRequested) {\n\t\t\t\treturn reference.dispose();\n\t\t\t}\n\n\t\t\telementStore.add(reference);\n\t\t\teditor.setModel(reference.object.textEditorModel);\n\t\t\tthis.setupEditorAfterModel(item, template);\n\t\t\tthis.setupEditorLayout(item, template);\n\t\t});\n\t}\n\n\tprivate setupEditorLayout(\n\t\titem: WrappedCallStackFrame,\n\t\t{ elementStore, container, editor }: IStackTemplateData,\n\t) {\n\t\tconst layout = () => {\n\t\t\tconst prev = editor.getContentHeight();\n\t\t\teditor.layout({ width: container.clientWidth, height: prev });\n\n\t\t\tconst next = editor.getContentHeight();\n\t\t\tif (next !== prev) {\n\t\t\t\teditor.layout({ width: container.clientWidth, height: next });\n\t\t\t}\n\n\t\t\titem.editorHeight.set(next, undefined);\n\t\t};\n\t\telementStore.add(editor.onDidChangeModelDecorations(layout));\n\t\telementStore.add(editor.onDidChangeModelContent(layout));\n\t\telementStore.add(editor.onDidChangeModelOptions(layout));\n\t\telementStore.add(this.onLayout(layout));\n\t\tlayout();\n\t}\n\n\tprivate setupEditorAfterModel(\n\t\titem: WrappedCallStackFrame,\n\t\ttemplate: IStackTemplateData,\n\t): void {\n\t\tconst range = Range.fromPositions({\n\t\t\tcolumn: item.column ?? 1,\n\t\t\tlineNumber: item.line ?? 1,\n\t\t});\n\n\t\ttemplate.toolbar.context = { uri: item.source, range };\n\n\t\ttemplate.editor.setHiddenAreas([\n\t\t\tRange.fromPositions(\n\t\t\t\t{ column: 1, lineNumber: 1 },\n\t\t\t\t{\n\t\t\t\t\tcolumn: 1,\n\t\t\t\t\tlineNumber: Math.max(1, item.line - CONTEXT_LINES - 1),\n\t\t\t\t},\n\t\t\t),\n\t\t\tRange.fromPositions(\n\t\t\t\t{ column: 1, lineNumber: item.line + CONTEXT_LINES + 1 },\n\t\t\t\t{ column: 1, lineNumber: Constants.MAX_SAFE_SMALL_INTEGER },\n\t\t\t),\n\t\t]);\n\n\t\ttemplate.editor.changeDecorations((accessor) => {\n\t\t\tfor (const d of template.decorations) {\n\t\t\t\taccessor.removeDecoration(d);\n\t\t\t}\n\t\t\ttemplate.decorations.length = 0;\n\n\t\t\tconst beforeRange = range.setStartPosition(\n\t\t\t\trange.startLineNumber,\n\t\t\t\t1,\n\t\t\t);\n\t\t\tconst hasCharactersBefore = !!template.editor\n\t\t\t\t.getModel()\n\t\t\t\t?.getValueInRange(beforeRange)\n\t\t\t\t.trim();\n\t\t\tconst decoRange = range.setEndPosition(\n\t\t\t\trange.startLineNumber,\n\t\t\t\tConstants.MAX_SAFE_SMALL_INTEGER,\n\t\t\t);\n\n\t\t\ttemplate.decorations.push(\n\t\t\t\taccessor.addDecoration(\n\t\t\t\t\tdecoRange,\n\t\t\t\t\tmakeStackFrameColumnDecoration(!hasCharactersBefore),\n\t\t\t\t),\n\t\t\t);\n\t\t\ttemplate.decorations.push(\n\t\t\t\taccessor.addDecoration(decoRange, TOP_STACK_FRAME_DECORATION),\n\t\t\t);\n\t\t});\n\n\t\titem.editorHeight.set(template.editor.getContentHeight(), undefined);\n\t}\n}\n\ninterface IMissingTemplateData {\n\telements: ReturnType<typeof makeFrameElements>;\n\tlabel: ResourceLabel;\n}\n\n/** Renderer for a call frame that's missing a URI */\nclass MissingCodeRenderer\n\timplements IListRenderer<ListItem, IMissingTemplateData>\n{\n\tpublic static readonly templateId = \"m\";\n\tpublic readonly templateId = MissingCodeRenderer.templateId;\n\n\tconstructor(\n\t\t@IInstantiationService\n\t\tprivate readonly instantiationService: IInstantiationService,\n\t) {}\n\n\trenderTemplate(container: HTMLElement): IMissingTemplateData {\n\t\tconst elements = makeFrameElements();\n\t\telements.root.classList.add(\"missing\");\n\t\tcontainer.appendChild(elements.root);\n\t\tconst label = this.instantiationService.createInstance(\n\t\t\tResourceLabel,\n\t\t\telements.title,\n\t\t\t{},\n\t\t);\n\t\treturn { elements, label };\n\t}\n\n\trenderElement(\n\t\telement: ListItem,\n\t\t_index: number,\n\t\ttemplateData: IMissingTemplateData,\n\t): void {\n\t\tconst cast = element as CallStackFrame;\n\t\ttemplateData.label.element.setResource(\n\t\t\t{\n\t\t\t\tname: cast.name,\n\t\t\t\tdescription: localize(\n\t\t\t\t\t\"stackFrameLocation\",\n\t\t\t\t\t\"Line {0} column {1}\",\n\t\t\t\t\tcast.line,\n\t\t\t\t\tcast.column,\n\t\t\t\t),\n\t\t\t\trange: {\n\t\t\t\t\tstartLineNumber: cast.line,\n\t\t\t\t\tstartColumn: cast.column,\n\t\t\t\t\tendColumn: cast.column,\n\t\t\t\t\tendLineNumber: cast.line,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\ticon: Codicon.fileBinary,\n\t\t\t},\n\t\t);\n\t}\n\n\tdisposeTemplate(templateData: IMissingTemplateData): void {\n\t\ttemplateData.label.dispose();\n\t\ttemplateData.elements.root.remove();\n\t}\n}\n\n/** Renderer for a call frame that's missing a URI */\nclass CustomRenderer extends AbstractFrameRenderer<IAbstractFrameRendererTemplateData> {\n\tpublic static readonly templateId = \"c\";\n\tpublic readonly templateId = CustomRenderer.templateId;\n\n\tprotected override finishRenderTemplate(\n\t\tdata: IAbstractFrameRendererTemplateData,\n\t): IAbstractFrameRendererTemplateData {\n\t\treturn data;\n\t}\n\n\toverride renderElement(\n\t\telement: ListItem,\n\t\tindex: number,\n\t\ttemplate: IAbstractFrameRendererTemplateData,\n\t\theight: number | undefined,\n\t): void {\n\t\tsuper.renderElement(element, index, template, height);\n\n\t\tconst item = element as WrappedCustomStackFrame;\n\t\tconst { elementStore, container, label } = template;\n\n\t\tlabel.element.setResource(\n\t\t\t{ name: item.original.label },\n\t\t\t{ icon: item.original.icon },\n\t\t);\n\n\t\telementStore.add(\n\t\t\tautorun((reader) => {\n\t\t\t\ttemplate.elements.header.style.display =\n\t\t\t\t\titem.original.showHeader.read(reader) ? \"\" : \"none\";\n\t\t\t}),\n\t\t);\n\n\t\telementStore.add(\n\t\t\tautorunWithStore((reader, store) => {\n\t\t\t\tif (!item.collapsed.read(reader)) {\n\t\t\t\t\tstore.add(item.original.render(container));\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tconst actions = item.original.renderActions?.(\n\t\t\ttemplate.elements.actions,\n\t\t);\n\t\tif (actions) {\n\t\t\telementStore.add(actions);\n\t\t}\n\t}\n}\n\ninterface ISkippedTemplateData {\n\tbutton: Button;\n\tcurrent?: SkippedCallFrames;\n\tstore: DisposableStore;\n}\n\n/** Renderer for a button to load more call frames */\nclass SkippedRenderer implements IListRenderer<ListItem, ISkippedTemplateData> {\n\tpublic static readonly templateId = \"s\";\n\tpublic readonly templateId = SkippedRenderer.templateId;\n\n\tconstructor(\n\t\tprivate readonly loadFrames: (\n\t\t\tfromItem: SkippedCallFrames,\n\t\t) => Promise<void>,\n\t\t@INotificationService\n\t\tprivate readonly notificationService: INotificationService,\n\t) {}\n\n\trenderTemplate(container: HTMLElement): ISkippedTemplateData {\n\t\tconst store = new DisposableStore();\n\t\tconst button = new Button(container, {\n\t\t\ttitle: \"\",\n\t\t\t...defaultButtonStyles,\n\t\t});\n\t\tconst data: ISkippedTemplateData = { button, store };\n\n\t\tstore.add(button);\n\t\tstore.add(\n\t\t\tbutton.onDidClick(() => {\n\t\t\t\tif (!data.current || !button.enabled) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tbutton.enabled = false;\n\t\t\t\tthis.loadFrames(data.current).catch((e) => {\n\t\t\t\t\tthis.notificationService.error(\n\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\"failedToLoadFrames\",\n\t\t\t\t\t\t\t\"Failed to load stack frames: {0}\",\n\t\t\t\t\t\t\te.message,\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}),\n\t\t);\n\n\t\treturn data;\n\t}\n\n\trenderElement(\n\t\telement: ListItem,\n\t\tindex: number,\n\t\ttemplateData: ISkippedTemplateData,\n\t\theight: number | undefined,\n\t): void {\n\t\tconst cast = element as SkippedCallFrames;\n\t\ttemplateData.button.enabled = true;\n\t\ttemplateData.button.label = cast.label;\n\t\ttemplateData.current = cast;\n\t}\n\n\tdisposeTemplate(templateData: ISkippedTemplateData): void {\n\t\ttemplateData.store.dispose();\n\t}\n}\n\n/** A simple contribution that makes all data in the editor clickable to go to the location */\nclass ClickToLocationContribution\n\textends Disposable\n\timplements IEditorContribution\n{\n\tpublic static readonly ID = \"clickToLocation\";\n\tprivate readonly linkDecorations: IEditorDecorationsCollection;\n\tprivate current: { line: number; word: IWordAtPosition } | undefined;\n\n\tconstructor(\n\t\tprivate readonly editor: ICodeEditor,\n\t\t@IEditorService editorService: IEditorService,\n\t) {\n\t\tsuper();\n\t\tthis.linkDecorations = editor.createDecorationsCollection();\n\t\tthis._register(toDisposable(() => this.linkDecorations.clear()));\n\n\t\tconst clickLinkGesture = this._register(new ClickLinkGesture(editor));\n\n\t\tthis._register(\n\t\t\tclickLinkGesture.onMouseMoveOrRelevantKeyDown(\n\t\t\t\t([mouseEvent, keyboardEvent]) => {\n\t\t\t\t\tthis.onMove(mouseEvent);\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tclickLinkGesture.onExecute((e) => {\n\t\t\t\tconst model = this.editor.getModel();\n\t\t\t\tif (!this.current || !model) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\teditorService.openEditor(\n\t\t\t\t\t{\n\t\t\t\t\t\tresource: model.uri,\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tselection: Range.fromPositions(\n\t\t\t\t\t\t\t\tnew Position(\n\t\t\t\t\t\t\t\t\tthis.current.line,\n\t\t\t\t\t\t\t\t\tthis.current.word.startColumn,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tselectionRevealType:\n\t\t\t\t\t\t\t\tTextEditorSelectionRevealType.CenterIfOutsideViewport,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\te.hasSideBySideModifier ? SIDE_GROUP : undefined,\n\t\t\t\t);\n\t\t\t}),\n\t\t);\n\t}\n\n\tprivate onMove(mouseEvent: ClickLinkMouseEvent) {\n\t\tif (!mouseEvent.hasTriggerModifier) {\n\t\t\treturn this.clear();\n\t\t}\n\n\t\tconst position = mouseEvent.target.position;\n\t\tconst word =\n\t\t\tposition && this.editor.getModel()?.getWordAtPosition(position);\n\t\tif (!word) {\n\t\t\treturn this.clear();\n\t\t}\n\n\t\tconst prev = this.current?.word;\n\t\tif (\n\t\t\tprev &&\n\t\t\tprev.startColumn === word.startColumn &&\n\t\t\tprev.endColumn === word.endColumn &&\n\t\t\tprev.word === word.word\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.current = { word, line: position.lineNumber };\n\t\tthis.linkDecorations.set([\n\t\t\t{\n\t\t\t\trange: new Range(\n\t\t\t\t\tposition.lineNumber,\n\t\t\t\t\tword.startColumn,\n\t\t\t\t\tposition.lineNumber,\n\t\t\t\t\tword.endColumn,\n\t\t\t\t),\n\t\t\t\toptions: {\n\t\t\t\t\tdescription: \"call-stack-go-to-file-link\",\n\t\t\t\t\tinlineClassName: \"call-stack-go-to-file-link\",\n\t\t\t\t},\n\t\t\t},\n\t\t]);\n\t}\n\n\tprivate clear() {\n\t\tthis.linkDecorations.clear();\n\t\tthis.current = undefined;\n\t}\n}\n\nregisterAction2(\n\tclass extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: \"callStackWidget.goToFile\",\n\t\t\t\ttitle: localize2(\"goToFile\", \"Open File\"),\n\t\t\t\ticon: Codicon.goToFile,\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MenuId.DebugCallStackToolbar,\n\t\t\t\t\torder: 22,\n\t\t\t\t\tgroup: \"navigation\",\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tasync run(\n\t\t\taccessor: ServicesAccessor,\n\t\t\t{ uri, range }: Location,\n\t\t): Promise<void> {\n\t\t\tconst editorService = accessor.get(IEditorService);\n\t\t\tawait editorService.openEditor({\n\t\t\t\tresource: uri,\n\t\t\t\toptions: {\n\t\t\t\t\tselection: range,\n\t\t\t\t\tselectionRevealType:\n\t\t\t\t\t\tTextEditorSelectionRevealType.CenterIfOutsideViewport,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t},\n);\n"],
  "mappings": "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",
  "names": []
}
