{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/debug/browser/debugService.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\nimport { Action, IAction } from '../../../../base/common/actions.js';\nimport { distinct } from '../../../../base/common/arrays.js';\nimport { RunOnceScheduler, raceTimeout } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { isErrorWithActions } from '../../../../base/common/errorMessage.js';\nimport * as errors from '../../../../base/common/errors.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { DisposableStore, IDisposable } from '../../../../base/common/lifecycle.js';\nimport { deepClone, equals } from '../../../../base/common/objects.js';\nimport severity from '../../../../base/common/severity.js';\nimport { URI, URI as uri } from '../../../../base/common/uri.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { isCodeEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { ITextModel } from '../../../../editor/common/model.js';\nimport * as nls from '../../../../nls.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKey, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IExtensionHostDebugService } from '../../../../platform/debug/common/extensionHostDebug.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { FileChangeType, FileChangesEvent, IFileService } from '../../../../platform/files/common/files.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { IWorkspaceContextService, IWorkspaceFolder, WorkbenchState } from '../../../../platform/workspace/common/workspace.js';\nimport { IWorkspaceTrustRequestService } from '../../../../platform/workspace/common/workspaceTrust.js';\nimport { EditorsOrder } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { IViewDescriptorService, ViewContainerLocation } from '../../../common/views.js';\nimport { AdapterManager } from './debugAdapterManager.js';\nimport { DEBUG_CONFIGURE_COMMAND_ID, DEBUG_CONFIGURE_LABEL } from './debugCommands.js';\nimport { ConfigurationManager } from './debugConfigurationManager.js';\nimport { DebugMemoryFileSystemProvider } from './debugMemory.js';\nimport { DebugSession } from './debugSession.js';\nimport { DebugTaskRunner, TaskRunResult } from './debugTaskRunner.js';\nimport { CALLSTACK_VIEW_ID, CONTEXT_BREAKPOINTS_EXIST, CONTEXT_DEBUG_STATE, CONTEXT_DEBUG_TYPE, CONTEXT_DEBUG_UX, CONTEXT_DISASSEMBLY_VIEW_FOCUS, CONTEXT_HAS_DEBUGGED, CONTEXT_IN_DEBUG_MODE, DEBUG_MEMORY_SCHEME, DEBUG_SCHEME, IAdapterManager, IBreakpoint, IBreakpointData, IBreakpointUpdateData, ICompound, IConfig, IConfigurationManager, IDebugConfiguration, IDebugModel, IDebugService, IDebugSession, IDebugSessionOptions, IEnablement, IExceptionBreakpoint, IGlobalConfig, ILaunch, IStackFrame, IThread, IViewModel, REPL_VIEW_ID, State, VIEWLET_ID, debuggerDisabledMessage, getStateLabel } from '../common/debug.js';\nimport { DebugCompoundRoot } from '../common/debugCompoundRoot.js';\nimport { Breakpoint, DataBreakpoint, DebugModel, FunctionBreakpoint, IDataBreakpointOptions, IFunctionBreakpointOptions, IInstructionBreakpointOptions, InstructionBreakpoint } from '../common/debugModel.js';\nimport { Source } from '../common/debugSource.js';\nimport { DebugStorage } from '../common/debugStorage.js';\nimport { DebugTelemetry } from '../common/debugTelemetry.js';\nimport { getExtensionHostDebugSession, saveAllBeforeDebugStart } from '../common/debugUtils.js';\nimport { ViewModel } from '../common/debugViewModel.js';\nimport { Debugger } from '../common/debugger.js';\nimport { DisassemblyViewInput } from '../common/disassemblyViewInput.js';\nimport { VIEWLET_ID as EXPLORER_VIEWLET_ID } from '../../files/common/files.js';\nimport { ITestService } from '../../testing/common/testService.js';\nimport { IActivityService, NumberBadge } from '../../../services/activity/common/activity.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { IWorkbenchLayoutService, Parts } from '../../../services/layout/browser/layoutService.js';\nimport { ILifecycleService } from '../../../services/lifecycle/common/lifecycle.js';\nimport { IPaneCompositePartService } from '../../../services/panecomposite/browser/panecomposite.js';\nimport { IViewsService } from '../../../services/views/common/viewsService.js';\n\nexport class DebugService implements IDebugService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate readonly _onDidChangeState: Emitter<State>;\n\tprivate readonly _onDidNewSession: Emitter<IDebugSession>;\n\tprivate readonly _onWillNewSession: Emitter<IDebugSession>;\n\tprivate readonly _onDidEndSession: Emitter<{ session: IDebugSession; restart: boolean }>;\n\tprivate readonly restartingSessions = new Set<IDebugSession>();\n\tprivate debugStorage: DebugStorage;\n\tprivate model: DebugModel;\n\tprivate viewModel: ViewModel;\n\tprivate telemetry: DebugTelemetry;\n\tprivate taskRunner: DebugTaskRunner;\n\tprivate configurationManager: ConfigurationManager;\n\tprivate adapterManager: AdapterManager;\n\tprivate readonly disposables = new DisposableStore();\n\tprivate debugType!: IContextKey<string>;\n\tprivate debugState!: IContextKey<string>;\n\tprivate inDebugMode!: IContextKey<boolean>;\n\tprivate debugUx!: IContextKey<string>;\n\tprivate hasDebugged!: IContextKey<boolean>;\n\tprivate breakpointsExist!: IContextKey<boolean>;\n\tprivate disassemblyViewFocus!: IContextKey<boolean>;\n\tprivate breakpointsToSendOnResourceSaved: Set<URI>;\n\tprivate initializing = false;\n\tprivate _initializingOptions: IDebugSessionOptions | undefined;\n\tprivate previousState: State | undefined;\n\tprivate sessionCancellationTokens = new Map<string, CancellationTokenSource>();\n\tprivate activity: IDisposable | undefined;\n\tprivate chosenEnvironments: { [key: string]: string };\n\tprivate haveDoneLazySetup = false;\n\n\tconstructor(\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IPaneCompositePartService private readonly paneCompositeService: IPaneCompositePartService,\n\t\t@IViewsService private readonly viewsService: IViewsService,\n\t\t@IViewDescriptorService private readonly viewDescriptorService: IViewDescriptorService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t\t@IWorkbenchLayoutService private readonly layoutService: IWorkbenchLayoutService,\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@ILifecycleService private readonly lifecycleService: ILifecycleService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IExtensionHostDebugService private readonly extensionHostDebugService: IExtensionHostDebugService,\n\t\t@IActivityService private readonly activityService: IActivityService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IQuickInputService private readonly quickInputService: IQuickInputService,\n\t\t@IWorkspaceTrustRequestService private readonly workspaceTrustRequestService: IWorkspaceTrustRequestService,\n\t\t@IUriIdentityService private readonly uriIdentityService: IUriIdentityService,\n\t\t@ITestService private readonly testService: ITestService,\n\t) {\n\t\tthis.breakpointsToSendOnResourceSaved = new Set<URI>();\n\n\t\tthis._onDidChangeState = new Emitter<State>();\n\t\tthis._onDidNewSession = new Emitter<IDebugSession>();\n\t\tthis._onWillNewSession = new Emitter<IDebugSession>();\n\t\tthis._onDidEndSession = new Emitter();\n\n\t\tthis.adapterManager = this.instantiationService.createInstance(AdapterManager, { onDidNewSession: this.onDidNewSession });\n\t\tthis.disposables.add(this.adapterManager);\n\t\tthis.configurationManager = this.instantiationService.createInstance(ConfigurationManager, this.adapterManager);\n\t\tthis.disposables.add(this.configurationManager);\n\t\tthis.debugStorage = this.disposables.add(this.instantiationService.createInstance(DebugStorage));\n\n\t\tthis.chosenEnvironments = this.debugStorage.loadChosenEnvironments();\n\n\t\tthis.model = this.instantiationService.createInstance(DebugModel, this.debugStorage);\n\t\tthis.telemetry = this.instantiationService.createInstance(DebugTelemetry, this.model);\n\n\t\tthis.viewModel = new ViewModel(contextKeyService);\n\t\tthis.taskRunner = this.instantiationService.createInstance(DebugTaskRunner);\n\n\t\tthis.disposables.add(this.fileService.onDidFilesChange(e => this.onFileChanges(e)));\n\t\tthis.disposables.add(this.lifecycleService.onWillShutdown(this.dispose, this));\n\n\t\tthis.disposables.add(this.extensionHostDebugService.onAttachSession(event => {\n\t\t\tconst session = this.model.getSession(event.sessionId, true);\n\t\t\tif (session) {\n\t\t\t\t// EH was started in debug mode -> attach to it\n\t\t\t\tsession.configuration.request = 'attach';\n\t\t\t\tsession.configuration.port = event.port;\n\t\t\t\tsession.setSubId(event.subId);\n\t\t\t\tthis.launchOrAttachToSession(session);\n\t\t\t}\n\t\t}));\n\t\tthis.disposables.add(this.extensionHostDebugService.onTerminateSession(event => {\n\t\t\tconst session = this.model.getSession(event.sessionId);\n\t\t\tif (session && session.subId === event.subId) {\n\t\t\t\tsession.disconnect();\n\t\t\t}\n\t\t}));\n\n\t\tthis.disposables.add(this.viewModel.onDidFocusStackFrame(() => {\n\t\t\tthis.onStateChange();\n\t\t}));\n\t\tthis.disposables.add(this.viewModel.onDidFocusSession((session: IDebugSession | undefined) => {\n\t\t\tthis.onStateChange();\n\n\t\t\tif (session) {\n\t\t\t\tthis.setExceptionBreakpointFallbackSession(session.getId());\n\t\t\t}\n\t\t}));\n\t\tthis.disposables.add(Event.any(this.adapterManager.onDidRegisterDebugger, this.configurationManager.onDidSelectConfiguration)(() => {\n\t\t\tconst debugUxValue = (this.state !== State.Inactive || (this.configurationManager.getAllConfigurations().length > 0 && this.adapterManager.hasEnabledDebuggers())) ? 'default' : 'simple';\n\t\t\tthis.debugUx.set(debugUxValue);\n\t\t\tthis.debugStorage.storeDebugUxState(debugUxValue);\n\t\t}));\n\t\tthis.disposables.add(this.model.onDidChangeCallStack(() => {\n\t\t\tconst numberOfSessions = this.model.getSessions().filter(s => !s.parentSession).length;\n\t\t\tthis.activity?.dispose();\n\t\t\tif (numberOfSessions > 0) {\n\t\t\t\tconst viewContainer = this.viewDescriptorService.getViewContainerByViewId(CALLSTACK_VIEW_ID);\n\t\t\t\tif (viewContainer) {\n\t\t\t\t\tthis.activity = this.activityService.showViewContainerActivity(viewContainer.id, { badge: new NumberBadge(numberOfSessions, n => n === 1 ? nls.localize('1activeSession', \"1 active session\") : nls.localize('nActiveSessions', \"{0} active sessions\", n)) });\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis.disposables.add(editorService.onDidActiveEditorChange(() => {\n\t\t\tthis.contextKeyService.bufferChangeEvents(() => {\n\t\t\t\tif (editorService.activeEditor === DisassemblyViewInput.instance) {\n\t\t\t\t\tthis.disassemblyViewFocus.set(true);\n\t\t\t\t} else {\n\t\t\t\t\t// This key can be initialized a tick after this event is fired\n\t\t\t\t\tthis.disassemblyViewFocus?.reset();\n\t\t\t\t}\n\t\t\t});\n\t\t}));\n\n\t\tthis.disposables.add(this.lifecycleService.onBeforeShutdown(() => {\n\t\t\tfor (const editor of editorService.editors) {\n\t\t\t\t// Editors will not be valid on window reload, so close them.\n\t\t\t\tif (editor.resource?.scheme === DEBUG_MEMORY_SCHEME) {\n\t\t\t\t\teditor.dispose();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis.disposables.add(extensionService.onWillStop(evt => {\n\t\t\tevt.veto(\n\t\t\t\tthis.model.getSessions().length > 0,\n\t\t\t\tnls.localize('active debug session', 'A debug session is still running.'),\n\t\t\t);\n\t\t}));\n\n\t\tthis.initContextKeys(contextKeyService);\n\t}\n\n\tprivate initContextKeys(contextKeyService: IContextKeyService): void {\n\t\tqueueMicrotask(() => {\n\t\t\tcontextKeyService.bufferChangeEvents(() => {\n\t\t\t\tthis.debugType = CONTEXT_DEBUG_TYPE.bindTo(contextKeyService);\n\t\t\t\tthis.debugState = CONTEXT_DEBUG_STATE.bindTo(contextKeyService);\n\t\t\t\tthis.hasDebugged = CONTEXT_HAS_DEBUGGED.bindTo(contextKeyService);\n\t\t\t\tthis.inDebugMode = CONTEXT_IN_DEBUG_MODE.bindTo(contextKeyService);\n\t\t\t\tthis.debugUx = CONTEXT_DEBUG_UX.bindTo(contextKeyService);\n\t\t\t\tthis.debugUx.set(this.debugStorage.loadDebugUxState());\n\t\t\t\tthis.breakpointsExist = CONTEXT_BREAKPOINTS_EXIST.bindTo(contextKeyService);\n\t\t\t\t// Need to set disassemblyViewFocus here to make it in the same context as the debug event handlers\n\t\t\t\tthis.disassemblyViewFocus = CONTEXT_DISASSEMBLY_VIEW_FOCUS.bindTo(contextKeyService);\n\t\t\t});\n\n\t\t\tconst setBreakpointsExistContext = () => this.breakpointsExist.set(!!(this.model.getBreakpoints().length || this.model.getDataBreakpoints().length || this.model.getFunctionBreakpoints().length));\n\t\t\tsetBreakpointsExistContext();\n\t\t\tthis.disposables.add(this.model.onDidChangeBreakpoints(() => setBreakpointsExistContext()));\n\t\t});\n\t}\n\n\tgetModel(): IDebugModel {\n\t\treturn this.model;\n\t}\n\n\tgetViewModel(): IViewModel {\n\t\treturn this.viewModel;\n\t}\n\n\tgetConfigurationManager(): IConfigurationManager {\n\t\treturn this.configurationManager;\n\t}\n\n\tgetAdapterManager(): IAdapterManager {\n\t\treturn this.adapterManager;\n\t}\n\n\tsourceIsNotAvailable(uri: uri): void {\n\t\tthis.model.sourceIsNotAvailable(uri);\n\t}\n\n\tdispose(): void {\n\t\tthis.disposables.dispose();\n\t}\n\n\t//---- state management\n\n\tget state(): State {\n\t\tconst focusedSession = this.viewModel.focusedSession;\n\t\tif (focusedSession) {\n\t\t\treturn focusedSession.state;\n\t\t}\n\n\t\treturn this.initializing ? State.Initializing : State.Inactive;\n\t}\n\n\tget initializingOptions(): IDebugSessionOptions | undefined {\n\t\treturn this._initializingOptions;\n\t}\n\n\tprivate startInitializingState(options?: IDebugSessionOptions): void {\n\t\tif (!this.initializing) {\n\t\t\tthis.initializing = true;\n\t\t\tthis._initializingOptions = options;\n\t\t\tthis.onStateChange();\n\t\t}\n\t}\n\n\tprivate endInitializingState(): void {\n\t\tif (this.initializing) {\n\t\t\tthis.initializing = false;\n\t\t\tthis._initializingOptions = undefined;\n\t\t\tthis.onStateChange();\n\t\t}\n\t}\n\n\tprivate cancelTokens(id: string | undefined): void {\n\t\tif (id) {\n\t\t\tconst token = this.sessionCancellationTokens.get(id);\n\t\t\tif (token) {\n\t\t\t\ttoken.cancel();\n\t\t\t\tthis.sessionCancellationTokens.delete(id);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.sessionCancellationTokens.forEach(t => t.cancel());\n\t\t\tthis.sessionCancellationTokens.clear();\n\t\t}\n\t}\n\n\tprivate onStateChange(): void {\n\t\tconst state = this.state;\n\t\tif (this.previousState !== state) {\n\t\t\tthis.contextKeyService.bufferChangeEvents(() => {\n\t\t\t\tthis.debugState.set(getStateLabel(state));\n\t\t\t\tthis.inDebugMode.set(state !== State.Inactive);\n\t\t\t\t// Only show the simple ux if debug is not yet started and if no launch.json exists\n\t\t\t\tconst debugUxValue = ((state !== State.Inactive && state !== State.Initializing) || (this.adapterManager.hasEnabledDebuggers() && this.configurationManager.selectedConfiguration.name)) ? 'default' : 'simple';\n\t\t\t\tthis.debugUx.set(debugUxValue);\n\t\t\t\tthis.debugStorage.storeDebugUxState(debugUxValue);\n\t\t\t});\n\t\t\tthis.previousState = state;\n\t\t\tthis._onDidChangeState.fire(state);\n\t\t}\n\t}\n\n\tget onDidChangeState(): Event<State> {\n\t\treturn this._onDidChangeState.event;\n\t}\n\n\tget onDidNewSession(): Event<IDebugSession> {\n\t\treturn this._onDidNewSession.event;\n\t}\n\n\tget onWillNewSession(): Event<IDebugSession> {\n\t\treturn this._onWillNewSession.event;\n\t}\n\n\tget onDidEndSession(): Event<{ session: IDebugSession; restart: boolean }> {\n\t\treturn this._onDidEndSession.event;\n\t}\n\n\tprivate lazySetup() {\n\t\tif (!this.haveDoneLazySetup) {\n\t\t\t// Registering fs providers is slow\n\t\t\t// https://github.com/microsoft/vscode/issues/159886\n\t\t\tthis.disposables.add(this.fileService.registerProvider(DEBUG_MEMORY_SCHEME, new DebugMemoryFileSystemProvider(this)));\n\t\t\tthis.haveDoneLazySetup = true;\n\t\t}\n\t}\n\n\t//---- life cycle management\n\n\t/**\n\t * main entry point\n\t * properly manages compounds, checks for errors and handles the initializing state.\n\t */\n\tasync startDebugging(launch: ILaunch | undefined, configOrName?: IConfig | string, options?: IDebugSessionOptions, saveBeforeStart = !options?.parentSession): Promise<boolean> {\n\t\tconst message = options && options.noDebug ? nls.localize('runTrust', \"Running executes build tasks and program code from your workspace.\") : nls.localize('debugTrust', \"Debugging executes build tasks and program code from your workspace.\");\n\t\tconst trust = await this.workspaceTrustRequestService.requestWorkspaceTrust({ message });\n\t\tif (!trust) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.lazySetup();\n\t\tthis.startInitializingState(options);\n\t\tthis.hasDebugged.set(true);\n\t\ttry {\n\t\t\t// make sure to save all files and that the configuration is up to date\n\t\t\tawait this.extensionService.activateByEvent('onDebug');\n\t\t\tif (saveBeforeStart) {\n\t\t\t\tawait saveAllBeforeDebugStart(this.configurationService, this.editorService);\n\t\t\t}\n\t\t\tawait this.extensionService.whenInstalledExtensionsRegistered();\n\n\t\t\tlet config: IConfig | undefined;\n\t\t\tlet compound: ICompound | undefined;\n\t\t\tif (!configOrName) {\n\t\t\t\tconfigOrName = this.configurationManager.selectedConfiguration.name;\n\t\t\t}\n\t\t\tif (typeof configOrName === 'string' && launch) {\n\t\t\t\tconfig = launch.getConfiguration(configOrName);\n\t\t\t\tcompound = launch.getCompound(configOrName);\n\t\t\t} else if (typeof configOrName !== 'string') {\n\t\t\t\tconfig = configOrName;\n\t\t\t}\n\n\t\t\tif (compound) {\n\t\t\t\t// we are starting a compound debug, first do some error checking and than start each configuration in the compound\n\t\t\t\tif (!compound.configurations) {\n\t\t\t\t\tthrow new Error(nls.localize({ key: 'compoundMustHaveConfigurations', comment: ['compound indicates a \"compounds\" configuration item', '\"configurations\" is an attribute and should not be localized'] },\n\t\t\t\t\t\t\"Compound must have \\\"configurations\\\" attribute set in order to start multiple configurations.\"));\n\t\t\t\t}\n\t\t\t\tif (compound.preLaunchTask) {\n\t\t\t\t\tconst taskResult = await this.taskRunner.runTaskAndCheckErrors(launch?.workspace || this.contextService.getWorkspace(), compound.preLaunchTask);\n\t\t\t\t\tif (taskResult === TaskRunResult.Failure) {\n\t\t\t\t\t\tthis.endInitializingState();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (compound.stopAll) {\n\t\t\t\t\toptions = { ...options, compoundRoot: new DebugCompoundRoot() };\n\t\t\t\t}\n\n\t\t\t\tconst values = await Promise.all(compound.configurations.map(configData => {\n\t\t\t\t\tconst name = typeof configData === 'string' ? configData : configData.name;\n\t\t\t\t\tif (name === compound.name) {\n\t\t\t\t\t\treturn Promise.resolve(false);\n\t\t\t\t\t}\n\n\t\t\t\t\tlet launchForName: ILaunch | undefined;\n\t\t\t\t\tif (typeof configData === 'string') {\n\t\t\t\t\t\tconst launchesContainingName = this.configurationManager.getLaunches().filter(l => !!l.getConfiguration(name));\n\t\t\t\t\t\tif (launchesContainingName.length === 1) {\n\t\t\t\t\t\t\tlaunchForName = launchesContainingName[0];\n\t\t\t\t\t\t} else if (launch && launchesContainingName.length > 1 && launchesContainingName.indexOf(launch) >= 0) {\n\t\t\t\t\t\t\t// If there are multiple launches containing the configuration give priority to the configuration in the current launch\n\t\t\t\t\t\t\tlaunchForName = launch;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthrow new Error(launchesContainingName.length === 0 ? nls.localize('noConfigurationNameInWorkspace', \"Could not find launch configuration '{0}' in the workspace.\", name)\n\t\t\t\t\t\t\t\t: nls.localize('multipleConfigurationNamesInWorkspace', \"There are multiple launch configurations '{0}' in the workspace. Use folder name to qualify the configuration.\", name));\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (configData.folder) {\n\t\t\t\t\t\tconst launchesMatchingConfigData = this.configurationManager.getLaunches().filter(l => l.workspace && l.workspace.name === configData.folder && !!l.getConfiguration(configData.name));\n\t\t\t\t\t\tif (launchesMatchingConfigData.length === 1) {\n\t\t\t\t\t\t\tlaunchForName = launchesMatchingConfigData[0];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthrow new Error(nls.localize('noFolderWithName', \"Can not find folder with name '{0}' for configuration '{1}' in compound '{2}'.\", configData.folder, configData.name, compound.name));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.createSession(launchForName, launchForName!.getConfiguration(name), options);\n\t\t\t\t}));\n\n\t\t\t\tconst result = values.every(success => !!success); // Compound launch is a success only if each configuration launched successfully\n\t\t\t\tthis.endInitializingState();\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tif (configOrName && !config) {\n\t\t\t\tconst message = !!launch ? nls.localize('configMissing', \"Configuration '{0}' is missing in 'launch.json'.\", typeof configOrName === 'string' ? configOrName : configOrName.name) :\n\t\t\t\t\tnls.localize('launchJsonDoesNotExist', \"'launch.json' does not exist for passed workspace folder.\");\n\t\t\t\tthrow new Error(message);\n\t\t\t}\n\n\t\t\tconst result = await this.createSession(launch, config, options);\n\t\t\tthis.endInitializingState();\n\t\t\treturn result;\n\t\t} catch (err) {\n\t\t\t// make sure to get out of initializing state, and propagate the result\n\t\t\tthis.notificationService.error(err);\n\t\t\tthis.endInitializingState();\n\t\t\treturn Promise.reject(err);\n\t\t}\n\t}\n\n\t/**\n\t * gets the debugger for the type, resolves configurations by providers, substitutes variables and runs prelaunch tasks\n\t */\n\tprivate async createSession(launch: ILaunch | undefined, config: IConfig | undefined, options?: IDebugSessionOptions): Promise<boolean> {\n\t\t// We keep the debug type in a separate variable 'type' so that a no-folder config has no attributes.\n\t\t// Storing the type in the config would break extensions that assume that the no-folder case is indicated by an empty config.\n\t\tlet type: string | undefined;\n\t\tif (config) {\n\t\t\ttype = config.type;\n\t\t} else {\n\t\t\t// a no-folder workspace has no launch.config\n\t\t\tconfig = Object.create(null);\n\t\t}\n\t\tif (options && options.noDebug) {\n\t\t\tconfig!.noDebug = true;\n\t\t} else if (options && typeof options.noDebug === 'undefined' && options.parentSession && options.parentSession.configuration.noDebug) {\n\t\t\tconfig!.noDebug = true;\n\t\t}\n\t\tconst unresolvedConfig = deepClone(config);\n\n\t\tlet guess: Debugger | undefined;\n\t\tlet activeEditor: EditorInput | undefined;\n\t\tif (!type) {\n\t\t\tactiveEditor = this.editorService.activeEditor;\n\t\t\tif (activeEditor && activeEditor.resource) {\n\t\t\t\ttype = this.chosenEnvironments[activeEditor.resource.toString()];\n\t\t\t}\n\t\t\tif (!type) {\n\t\t\t\tguess = await this.adapterManager.guessDebugger(false);\n\t\t\t\tif (guess) {\n\t\t\t\t\ttype = guess.type;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst initCancellationToken = new CancellationTokenSource();\n\t\tconst sessionId = generateUuid();\n\t\tthis.sessionCancellationTokens.set(sessionId, initCancellationToken);\n\n\t\tconst configByProviders = await this.configurationManager.resolveConfigurationByProviders(launch && launch.workspace ? launch.workspace.uri : undefined, type, config!, initCancellationToken.token);\n\t\t// a falsy config indicates an aborted launch\n\t\tif (configByProviders && configByProviders.type) {\n\t\t\ttry {\n\t\t\t\tlet resolvedConfig = await this.substituteVariables(launch, configByProviders);\n\t\t\t\tif (!resolvedConfig) {\n\t\t\t\t\t// User cancelled resolving of interactive variables, silently return\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (initCancellationToken.token.isCancellationRequested) {\n\t\t\t\t\t// User cancelled, silently return\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tconst workspace = launch?.workspace || this.contextService.getWorkspace();\n\t\t\t\tconst taskResult = await this.taskRunner.runTaskAndCheckErrors(workspace, resolvedConfig.preLaunchTask);\n\t\t\t\tif (taskResult === TaskRunResult.Failure) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tconst cfg = await this.configurationManager.resolveDebugConfigurationWithSubstitutedVariables(launch && launch.workspace ? launch.workspace.uri : undefined, resolvedConfig.type, resolvedConfig, initCancellationToken.token);\n\t\t\t\tif (!cfg) {\n\t\t\t\t\tif (launch && type && cfg === null && !initCancellationToken.token.isCancellationRequested) {\t// show launch.json only for \"config\" being \"null\".\n\t\t\t\t\t\tawait launch.openConfigFile({ preserveFocus: true, type }, initCancellationToken.token);\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tresolvedConfig = cfg;\n\n\t\t\t\tconst dbg = this.adapterManager.getDebugger(resolvedConfig.type);\n\t\t\t\tif (!dbg || (configByProviders.request !== 'attach' && configByProviders.request !== 'launch')) {\n\t\t\t\t\tlet message: string;\n\t\t\t\t\tif (configByProviders.request !== 'attach' && configByProviders.request !== 'launch') {\n\t\t\t\t\t\tmessage = configByProviders.request ? nls.localize('debugRequestNotSupported', \"Attribute '{0}' has an unsupported value '{1}' in the chosen debug configuration.\", 'request', configByProviders.request)\n\t\t\t\t\t\t\t: nls.localize('debugRequesMissing', \"Attribute '{0}' is missing from the chosen debug configuration.\", 'request');\n\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmessage = resolvedConfig.type ? nls.localize('debugTypeNotSupported', \"Configured debug type '{0}' is not supported.\", resolvedConfig.type) :\n\t\t\t\t\t\t\tnls.localize('debugTypeMissing', \"Missing property 'type' for the chosen launch configuration.\");\n\t\t\t\t\t}\n\n\t\t\t\t\tconst actionList: IAction[] = [];\n\n\t\t\t\t\tactionList.push(new Action(\n\t\t\t\t\t\t'installAdditionalDebuggers',\n\t\t\t\t\t\tnls.localize({ key: 'installAdditionalDebuggers', comment: ['Placeholder is the debug type, so for example \"node\", \"python\"'] }, \"Install {0} Extension\", resolvedConfig.type),\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\tasync () => this.commandService.executeCommand('debug.installAdditionalDebuggers', resolvedConfig?.type)\n\t\t\t\t\t));\n\n\t\t\t\t\tawait this.showError(message, actionList);\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (!dbg.enabled) {\n\t\t\t\t\tawait this.showError(debuggerDisabledMessage(dbg.type), []);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tconst result = await this.doCreateSession(sessionId, launch?.workspace, { resolved: resolvedConfig, unresolved: unresolvedConfig }, options);\n\t\t\t\tif (result && guess && activeEditor && activeEditor.resource) {\n\t\t\t\t\t// Remeber user choice of environment per active editor to make starting debugging smoother #124770\n\t\t\t\t\tthis.chosenEnvironments[activeEditor.resource.toString()] = guess.type;\n\t\t\t\t\tthis.debugStorage.storeChosenEnvironments(this.chosenEnvironments);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} catch (err) {\n\t\t\t\tif (err && err.message) {\n\t\t\t\t\tawait this.showError(err.message);\n\t\t\t\t} else if (this.contextService.getWorkbenchState() === WorkbenchState.EMPTY) {\n\t\t\t\t\tawait this.showError(nls.localize('noFolderWorkspaceDebugError', \"The active file can not be debugged. Make sure it is saved and that you have a debug extension installed for that file type.\"));\n\t\t\t\t}\n\t\t\t\tif (launch && !initCancellationToken.token.isCancellationRequested) {\n\t\t\t\t\tawait launch.openConfigFile({ preserveFocus: true }, initCancellationToken.token);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tif (launch && type && configByProviders === null && !initCancellationToken.token.isCancellationRequested) {\t// show launch.json only for \"config\" being \"null\".\n\t\t\tawait launch.openConfigFile({ preserveFocus: true, type }, initCancellationToken.token);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * instantiates the new session, initializes the session, registers session listeners and reports telemetry\n\t */\n\tprivate async doCreateSession(sessionId: string, root: IWorkspaceFolder | undefined, configuration: { resolved: IConfig; unresolved: IConfig | undefined }, options?: IDebugSessionOptions): Promise<boolean> {\n\n\t\tconst session = this.instantiationService.createInstance(DebugSession, sessionId, configuration, root, this.model, options);\n\t\tif (options?.startedByUser && this.model.getSessions().some(s => s.getLabel() === session.getLabel()) && configuration.resolved.suppressMultipleSessionWarning !== true) {\n\t\t\t// There is already a session with the same name, prompt user #127721\n\t\t\tconst result = await this.dialogService.confirm({ message: nls.localize('multipleSession', \"'{0}' is already running. Do you want to start another instance?\", session.getLabel()) });\n\t\t\tif (!result.confirmed) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tthis.model.addSession(session);\n\n\t\t// since the Session is now properly registered under its ID and hooked, we can announce it\n\t\t// this event doesn't go to extensions\n\t\tthis._onWillNewSession.fire(session);\n\n\t\tconst openDebug = this.configurationService.getValue<IDebugConfiguration>('debug').openDebug;\n\t\t// Open debug viewlet based on the visibility of the side bar and openDebug setting. Do not open for 'run without debug'\n\t\tif (!configuration.resolved.noDebug && (openDebug === 'openOnSessionStart' || (openDebug !== 'neverOpen' && this.viewModel.firstSessionStart)) && !session.suppressDebugView) {\n\t\t\tawait this.paneCompositeService.openPaneComposite(VIEWLET_ID, ViewContainerLocation.Sidebar);\n\t\t}\n\n\t\ttry {\n\t\t\tawait this.launchOrAttachToSession(session);\n\n\t\t\tconst internalConsoleOptions = session.configuration.internalConsoleOptions || this.configurationService.getValue<IDebugConfiguration>('debug').internalConsoleOptions;\n\t\t\tif (internalConsoleOptions === 'openOnSessionStart' || (this.viewModel.firstSessionStart && internalConsoleOptions === 'openOnFirstSessionStart')) {\n\t\t\t\tthis.viewsService.openView(REPL_VIEW_ID, false);\n\t\t\t}\n\n\t\t\tthis.viewModel.firstSessionStart = false;\n\t\t\tconst showSubSessions = this.configurationService.getValue<IDebugConfiguration>('debug').showSubSessionsInToolBar;\n\t\t\tconst sessions = this.model.getSessions();\n\t\t\tconst shownSessions = showSubSessions ? sessions : sessions.filter(s => !s.parentSession);\n\t\t\tif (shownSessions.length > 1) {\n\t\t\t\tthis.viewModel.setMultiSessionView(true);\n\t\t\t}\n\n\t\t\t// since the initialized response has arrived announce the new Session (including extensions)\n\t\t\tthis._onDidNewSession.fire(session);\n\n\t\t\treturn true;\n\t\t} catch (error) {\n\n\t\t\tif (errors.isCancellationError(error)) {\n\t\t\t\t// don't show 'canceled' error messages to the user #7906\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Show the repl if some error got logged there #5870\n\t\t\tif (session && session.getReplElements().length > 0) {\n\t\t\t\tthis.viewsService.openView(REPL_VIEW_ID, false);\n\t\t\t}\n\n\t\t\tif (session.configuration && session.configuration.request === 'attach' && session.configuration.__autoAttach) {\n\t\t\t\t// ignore attach timeouts in auto attach mode\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst errorMessage = error instanceof Error ? error.message : error;\n\t\t\tif (error.showUser !== false) {\n\t\t\t\t// Only show the error when showUser is either not defined, or is true #128484\n\t\t\t\tawait this.showError(errorMessage, isErrorWithActions(error) ? error.actions : []);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tprivate async launchOrAttachToSession(session: IDebugSession, forceFocus = false): Promise<void> {\n\t\t// register listeners as the very first thing!\n\t\tthis.registerSessionListeners(session);\n\n\t\tconst dbgr = this.adapterManager.getDebugger(session.configuration.type);\n\t\ttry {\n\t\t\tawait session.initialize(dbgr!);\n\t\t\tawait session.launchOrAttach(session.configuration);\n\t\t\tconst launchJsonExists = !!session.root && !!this.configurationService.getValue<IGlobalConfig>('launch', { resource: session.root.uri });\n\t\t\tawait this.telemetry.logDebugSessionStart(dbgr!, launchJsonExists);\n\n\t\t\tif (forceFocus || !this.viewModel.focusedSession || (session.parentSession === this.viewModel.focusedSession && session.compact)) {\n\t\t\t\tawait this.focusStackFrame(undefined, undefined, session);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tif (this.viewModel.focusedSession === session) {\n\t\t\t\tawait this.focusStackFrame(undefined);\n\t\t\t}\n\t\t\treturn Promise.reject(err);\n\t\t}\n\t}\n\n\tprivate registerSessionListeners(session: IDebugSession): void {\n\t\tconst listenerDisposables = new DisposableStore();\n\t\tthis.disposables.add(listenerDisposables);\n\n\t\tconst sessionRunningScheduler = listenerDisposables.add(new RunOnceScheduler(() => {\n\t\t\t// Do not immediatly defocus the stack frame if the session is running\n\t\t\tif (session.state === State.Running && this.viewModel.focusedSession === session) {\n\t\t\t\tthis.viewModel.setFocus(undefined, this.viewModel.focusedThread, session, false);\n\t\t\t}\n\t\t}, 200));\n\t\tlistenerDisposables.add(session.onDidChangeState(() => {\n\t\t\tif (session.state === State.Running && this.viewModel.focusedSession === session) {\n\t\t\t\tsessionRunningScheduler.schedule();\n\t\t\t}\n\t\t\tif (session === this.viewModel.focusedSession) {\n\t\t\t\tthis.onStateChange();\n\t\t\t}\n\t\t}));\n\t\tlistenerDisposables.add(this.onDidEndSession(e => {\n\t\t\tif (e.session === session) {\n\t\t\t\tthis.disposables.delete(listenerDisposables);\n\t\t\t}\n\t\t}));\n\t\tlistenerDisposables.add(session.onDidEndAdapter(async adapterExitEvent => {\n\n\t\t\tif (adapterExitEvent) {\n\t\t\t\tif (adapterExitEvent.error) {\n\t\t\t\t\tthis.notificationService.error(nls.localize('debugAdapterCrash', \"Debug adapter process has terminated unexpectedly ({0})\", adapterExitEvent.error.message || adapterExitEvent.error.toString()));\n\t\t\t\t}\n\t\t\t\tthis.telemetry.logDebugSessionStop(session, adapterExitEvent);\n\t\t\t}\n\n\t\t\t// 'Run without debugging' mode VSCode must terminate the extension host. More details: #3905\n\t\t\tconst extensionDebugSession = getExtensionHostDebugSession(session);\n\t\t\tif (extensionDebugSession && extensionDebugSession.state === State.Running && extensionDebugSession.configuration.noDebug) {\n\t\t\t\tthis.extensionHostDebugService.close(extensionDebugSession.getId());\n\t\t\t}\n\n\t\t\tif (session.configuration.postDebugTask) {\n\t\t\t\tconst root = session.root ?? this.contextService.getWorkspace();\n\t\t\t\ttry {\n\t\t\t\t\tawait this.taskRunner.runTask(root, session.configuration.postDebugTask);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tthis.notificationService.error(err);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.endInitializingState();\n\t\t\tthis.cancelTokens(session.getId());\n\n\t\t\tif (this.configurationService.getValue<IDebugConfiguration>('debug').closeReadonlyTabsOnEnd) {\n\t\t\t\tconst editorsToClose = this.editorService.getEditors(EditorsOrder.SEQUENTIAL).filter(({ editor }) => {\n\t\t\t\t\treturn editor.resource?.scheme === DEBUG_SCHEME && session.getId() === Source.getEncodedDebugData(editor.resource).sessionId;\n\t\t\t\t});\n\t\t\t\tthis.editorService.closeEditors(editorsToClose);\n\t\t\t}\n\t\t\tthis._onDidEndSession.fire({ session, restart: this.restartingSessions.has(session) });\n\n\t\t\tconst focusedSession = this.viewModel.focusedSession;\n\t\t\tif (focusedSession && focusedSession.getId() === session.getId()) {\n\t\t\t\tconst { session, thread, stackFrame } = getStackFrameThreadAndSessionToFocus(this.model, undefined, undefined, undefined, focusedSession);\n\t\t\t\tthis.viewModel.setFocus(stackFrame, thread, session, false);\n\t\t\t}\n\n\t\t\tif (this.model.getSessions().length === 0) {\n\t\t\t\tthis.viewModel.setMultiSessionView(false);\n\n\t\t\t\tif (this.layoutService.isVisible(Parts.SIDEBAR_PART) && this.configurationService.getValue<IDebugConfiguration>('debug').openExplorerOnEnd) {\n\t\t\t\t\tthis.paneCompositeService.openPaneComposite(EXPLORER_VIEWLET_ID, ViewContainerLocation.Sidebar);\n\t\t\t\t}\n\n\t\t\t\t// Data breakpoints that can not be persisted should be cleared when a session ends\n\t\t\t\tconst dataBreakpoints = this.model.getDataBreakpoints().filter(dbp => !dbp.canPersist);\n\t\t\t\tdataBreakpoints.forEach(dbp => this.model.removeDataBreakpoints(dbp.getId()));\n\n\t\t\t\tif (this.configurationService.getValue<IDebugConfiguration>('debug').console.closeOnEnd) {\n\t\t\t\t\tconst debugConsoleContainer = this.viewDescriptorService.getViewContainerByViewId(REPL_VIEW_ID);\n\t\t\t\t\tif (debugConsoleContainer && this.viewsService.isViewContainerVisible(debugConsoleContainer.id)) {\n\t\t\t\t\t\tthis.viewsService.closeViewContainer(debugConsoleContainer.id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.model.removeExceptionBreakpointsForSession(session.getId());\n\t\t\t// session.dispose(); TODO@roblourens\n\t\t}));\n\t}\n\n\tasync restartSession(session: IDebugSession, restartData?: any): Promise<any> {\n\t\tif (session.saveBeforeRestart) {\n\t\t\tawait saveAllBeforeDebugStart(this.configurationService, this.editorService);\n\t\t}\n\n\t\tconst isAutoRestart = !!restartData;\n\n\t\tconst runTasks: () => Promise<TaskRunResult> = async () => {\n\t\t\tif (isAutoRestart) {\n\t\t\t\t// Do not run preLaunch and postDebug tasks for automatic restarts\n\t\t\t\treturn Promise.resolve(TaskRunResult.Success);\n\t\t\t}\n\n\t\t\tconst root = session.root || this.contextService.getWorkspace();\n\t\t\tawait this.taskRunner.runTask(root, session.configuration.preRestartTask);\n\t\t\tawait this.taskRunner.runTask(root, session.configuration.postDebugTask);\n\n\t\t\tconst taskResult1 = await this.taskRunner.runTaskAndCheckErrors(root, session.configuration.preLaunchTask);\n\t\t\tif (taskResult1 !== TaskRunResult.Success) {\n\t\t\t\treturn taskResult1;\n\t\t\t}\n\n\t\t\treturn this.taskRunner.runTaskAndCheckErrors(root, session.configuration.postRestartTask);\n\t\t};\n\n\t\tconst extensionDebugSession = getExtensionHostDebugSession(session);\n\t\tif (extensionDebugSession) {\n\t\t\tconst taskResult = await runTasks();\n\t\t\tif (taskResult === TaskRunResult.Success) {\n\t\t\t\tthis.extensionHostDebugService.reload(extensionDebugSession.getId());\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\t// Read the configuration again if a launch.json has been changed, if not just use the inmemory configuration\n\t\tlet needsToSubstitute = false;\n\t\tlet unresolved: IConfig | undefined;\n\t\tconst launch = session.root ? this.configurationManager.getLaunch(session.root.uri) : undefined;\n\t\tif (launch) {\n\t\t\tunresolved = launch.getConfiguration(session.configuration.name);\n\t\t\tif (unresolved && !equals(unresolved, session.unresolvedConfiguration)) {\n\t\t\t\tunresolved.noDebug = session.configuration.noDebug;\n\t\t\t\tneedsToSubstitute = true;\n\t\t\t}\n\t\t}\n\n\t\tlet resolved: IConfig | undefined | null = session.configuration;\n\t\tif (launch && needsToSubstitute && unresolved) {\n\t\t\tconst initCancellationToken = new CancellationTokenSource();\n\t\t\tthis.sessionCancellationTokens.set(session.getId(), initCancellationToken);\n\t\t\tconst resolvedByProviders = await this.configurationManager.resolveConfigurationByProviders(launch.workspace ? launch.workspace.uri : undefined, unresolved.type, unresolved, initCancellationToken.token);\n\t\t\tif (resolvedByProviders) {\n\t\t\t\tresolved = await this.substituteVariables(launch, resolvedByProviders);\n\t\t\t\tif (resolved && !initCancellationToken.token.isCancellationRequested) {\n\t\t\t\t\tresolved = await this.configurationManager.resolveDebugConfigurationWithSubstitutedVariables(launch && launch.workspace ? launch.workspace.uri : undefined, resolved.type, resolved, initCancellationToken.token);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresolved = resolvedByProviders;\n\t\t\t}\n\t\t}\n\t\tif (resolved) {\n\t\t\tsession.setConfiguration({ resolved, unresolved });\n\t\t}\n\t\tsession.configuration.__restart = restartData;\n\n\t\tconst doRestart = async (fn: () => Promise<boolean | undefined>) => {\n\t\t\tthis.restartingSessions.add(session);\n\t\t\tlet didRestart = false;\n\t\t\ttry {\n\t\t\t\tdidRestart = (await fn()) !== false;\n\t\t\t} catch (e) {\n\t\t\t\tdidRestart = false;\n\t\t\t\tthrow e;\n\t\t\t} finally {\n\t\t\t\tthis.restartingSessions.delete(session);\n\t\t\t\t// we previously may have issued an onDidEndSession with restart: true,\n\t\t\t\t// assuming the adapter exited (in `registerSessionListeners`). But the\n\t\t\t\t// restart failed, so emit the final termination now.\n\t\t\t\tif (!didRestart) {\n\t\t\t\t\tthis._onDidEndSession.fire({ session, restart: false });\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// For debug sessions spawned by test runs, cancel the test run and stop\n\t\t// the session, then start the test run again; tests have no notion of restarts.\n\t\tif (session.correlatedTestRun) {\n\t\t\tif (!session.correlatedTestRun.completedAt) {\n\t\t\t\tthis.testService.cancelTestRun(session.correlatedTestRun.id);\n\t\t\t\tawait Event.toPromise(session.correlatedTestRun.onComplete);\n\t\t\t\t// todo@connor4312 is there any reason to wait for the debug session to\n\t\t\t\t// terminate? I don't think so, test extension should already handle any\n\t\t\t\t// state conflicts...\n\t\t\t}\n\n\t\t\tthis.testService.runResolvedTests(session.correlatedTestRun.request);\n\t\t\treturn;\n\t\t}\n\n\t\tif (session.capabilities.supportsRestartRequest) {\n\t\t\tconst taskResult = await runTasks();\n\t\t\tif (taskResult === TaskRunResult.Success) {\n\t\t\t\tawait doRestart(async () => {\n\t\t\t\t\tawait session.restart();\n\t\t\t\t\treturn true;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst shouldFocus = !!this.viewModel.focusedSession && session.getId() === this.viewModel.focusedSession.getId();\n\t\treturn doRestart(async () => {\n\t\t\t// If the restart is automatic  -> disconnect, otherwise -> terminate #55064\n\t\t\tif (isAutoRestart) {\n\t\t\t\tawait session.disconnect(true);\n\t\t\t} else {\n\t\t\t\tawait session.terminate(true);\n\t\t\t}\n\n\t\t\treturn new Promise<boolean>((c, e) => {\n\t\t\t\tsetTimeout(async () => {\n\t\t\t\t\tconst taskResult = await runTasks();\n\t\t\t\t\tif (taskResult !== TaskRunResult.Success) {\n\t\t\t\t\t\treturn c(false);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!resolved) {\n\t\t\t\t\t\treturn c(false);\n\t\t\t\t\t}\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait this.launchOrAttachToSession(session, shouldFocus);\n\t\t\t\t\t\tthis._onDidNewSession.fire(session);\n\t\t\t\t\t\tc(true);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\te(error);\n\t\t\t\t\t}\n\t\t\t\t}, 300);\n\t\t\t});\n\t\t});\n\t}\n\n\tasync stopSession(session: IDebugSession | undefined, disconnect = false, suspend = false): Promise<any> {\n\t\tif (session) {\n\t\t\treturn disconnect ? session.disconnect(undefined, suspend) : session.terminate();\n\t\t}\n\n\t\tconst sessions = this.model.getSessions();\n\t\tif (sessions.length === 0) {\n\t\t\tthis.taskRunner.cancel();\n\t\t\t// User might have cancelled starting of a debug session, and in some cases the quick pick is left open\n\t\t\tawait this.quickInputService.cancel();\n\t\t\tthis.endInitializingState();\n\t\t\tthis.cancelTokens(undefined);\n\t\t}\n\n\t\treturn Promise.all(sessions.map(s => disconnect ? s.disconnect(undefined, suspend) : s.terminate()));\n\t}\n\n\tprivate async substituteVariables(launch: ILaunch | undefined, config: IConfig): Promise<IConfig | undefined> {\n\t\tconst dbg = this.adapterManager.getDebugger(config.type);\n\t\tif (dbg) {\n\t\t\tlet folder: IWorkspaceFolder | undefined = undefined;\n\t\t\tif (launch && launch.workspace) {\n\t\t\t\tfolder = launch.workspace;\n\t\t\t} else {\n\t\t\t\tconst folders = this.contextService.getWorkspace().folders;\n\t\t\t\tif (folders.length === 1) {\n\t\t\t\t\tfolder = folders[0];\n\t\t\t\t}\n\t\t\t}\n\t\t\ttry {\n\t\t\t\treturn await dbg.substituteVariables(folder, config);\n\t\t\t} catch (err) {\n\t\t\t\tthis.showError(err.message, undefined, !!launch?.getConfiguration(config.name));\n\t\t\t\treturn undefined;\t// bail out\n\t\t\t}\n\t\t}\n\t\treturn Promise.resolve(config);\n\t}\n\n\tprivate async showError(message: string, errorActions: ReadonlyArray<IAction> = [], promptLaunchJson = true): Promise<void> {\n\t\tconst configureAction = new Action(DEBUG_CONFIGURE_COMMAND_ID, DEBUG_CONFIGURE_LABEL, undefined, true, () => this.commandService.executeCommand(DEBUG_CONFIGURE_COMMAND_ID));\n\t\t// Don't append the standard command if id of any provided action indicates it is a command\n\t\tconst actions = errorActions.filter((action) => action.id.endsWith('.command')).length > 0 ?\n\t\t\terrorActions :\n\t\t\t[...errorActions, ...(promptLaunchJson ? [configureAction] : [])];\n\t\tawait this.dialogService.prompt({\n\t\t\ttype: severity.Error,\n\t\t\tmessage,\n\t\t\tbuttons: actions.map(action => ({\n\t\t\t\tlabel: action.label,\n\t\t\t\trun: () => action.run()\n\t\t\t})),\n\t\t\tcancelButton: true\n\t\t});\n\t}\n\n\t//---- focus management\n\n\tasync focusStackFrame(_stackFrame: IStackFrame | undefined, _thread?: IThread, _session?: IDebugSession, options?: { explicit?: boolean; preserveFocus?: boolean; sideBySide?: boolean; pinned?: boolean }): Promise<void> {\n\t\tconst { stackFrame, thread, session } = getStackFrameThreadAndSessionToFocus(this.model, _stackFrame, _thread, _session);\n\n\t\tif (stackFrame) {\n\t\t\tconst editor = await stackFrame.openInEditor(this.editorService, options?.preserveFocus ?? true, options?.sideBySide, options?.pinned);\n\t\t\tif (editor) {\n\t\t\t\tif (editor.input === DisassemblyViewInput.instance) {\n\t\t\t\t\t// Go to address is invoked via setFocus\n\t\t\t\t} else {\n\t\t\t\t\tconst control = editor.getControl();\n\t\t\t\t\tif (stackFrame && isCodeEditor(control) && control.hasModel()) {\n\t\t\t\t\t\tconst model = control.getModel();\n\t\t\t\t\t\tconst lineNumber = stackFrame.range.startLineNumber;\n\t\t\t\t\t\tif (lineNumber >= 1 && lineNumber <= model.getLineCount()) {\n\t\t\t\t\t\t\tconst lineContent = control.getModel().getLineContent(lineNumber);\n\t\t\t\t\t\t\taria.alert(nls.localize({ key: 'debuggingPaused', comment: ['First placeholder is the file line content, second placeholder is the reason why debugging is stopped, for example \"breakpoint\", third is the stack frame name, and last is the line number.'] },\n\t\t\t\t\t\t\t\t\"{0}, debugging paused {1}, {2}:{3}\", lineContent, thread && thread.stoppedDetails ? `, reason ${thread.stoppedDetails.reason}` : '', stackFrame.source ? stackFrame.source.name : '', stackFrame.range.startLineNumber));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (session) {\n\t\t\tthis.debugType.set(session.configuration.type);\n\t\t} else {\n\t\t\tthis.debugType.reset();\n\t\t}\n\n\t\tthis.viewModel.setFocus(stackFrame, thread, session, !!options?.explicit);\n\t}\n\n\t//---- watches\n\n\taddWatchExpression(name?: string): void {\n\t\tconst we = this.model.addWatchExpression(name);\n\t\tif (!name) {\n\t\t\tthis.viewModel.setSelectedExpression(we, false);\n\t\t}\n\t\tthis.debugStorage.storeWatchExpressions(this.model.getWatchExpressions());\n\t}\n\n\trenameWatchExpression(id: string, newName: string): void {\n\t\tthis.model.renameWatchExpression(id, newName);\n\t\tthis.debugStorage.storeWatchExpressions(this.model.getWatchExpressions());\n\t}\n\n\tmoveWatchExpression(id: string, position: number): void {\n\t\tthis.model.moveWatchExpression(id, position);\n\t\tthis.debugStorage.storeWatchExpressions(this.model.getWatchExpressions());\n\t}\n\n\tremoveWatchExpressions(id?: string): void {\n\t\tthis.model.removeWatchExpressions(id);\n\t\tthis.debugStorage.storeWatchExpressions(this.model.getWatchExpressions());\n\t}\n\n\t//---- breakpoints\n\n\tcanSetBreakpointsIn(model: ITextModel): boolean {\n\t\treturn this.adapterManager.canSetBreakpointsIn(model);\n\t}\n\n\tasync enableOrDisableBreakpoints(enable: boolean, breakpoint?: IEnablement): Promise<void> {\n\t\tif (breakpoint) {\n\t\t\tthis.model.setEnablement(breakpoint, enable);\n\t\t\tthis.debugStorage.storeBreakpoints(this.model);\n\t\t\tif (breakpoint instanceof Breakpoint) {\n\t\t\t\tawait this.makeTriggeredBreakpointsMatchEnablement(enable, breakpoint);\n\t\t\t\tawait this.sendBreakpoints(breakpoint.originalUri);\n\t\t\t} else if (breakpoint instanceof FunctionBreakpoint) {\n\t\t\t\tawait this.sendFunctionBreakpoints();\n\t\t\t} else if (breakpoint instanceof DataBreakpoint) {\n\t\t\t\tawait this.sendDataBreakpoints();\n\t\t\t} else if (breakpoint instanceof InstructionBreakpoint) {\n\t\t\t\tawait this.sendInstructionBreakpoints();\n\t\t\t} else {\n\t\t\t\tawait this.sendExceptionBreakpoints();\n\t\t\t}\n\t\t} else {\n\t\t\tthis.model.enableOrDisableAllBreakpoints(enable);\n\t\t\tthis.debugStorage.storeBreakpoints(this.model);\n\t\t\tawait this.sendAllBreakpoints();\n\t\t}\n\t\tthis.debugStorage.storeBreakpoints(this.model);\n\t}\n\n\tasync addBreakpoints(uri: uri, rawBreakpoints: IBreakpointData[], ariaAnnounce = true): Promise<IBreakpoint[]> {\n\t\tconst breakpoints = this.model.addBreakpoints(uri, rawBreakpoints);\n\t\tif (ariaAnnounce) {\n\t\t\tbreakpoints.forEach(bp => aria.status(nls.localize('breakpointAdded', \"Added breakpoint, line {0}, file {1}\", bp.lineNumber, uri.fsPath)));\n\t\t}\n\n\t\t// In some cases we need to store breakpoints before we send them because sending them can take a long time\n\t\t// And after sending them because the debug adapter can attach adapter data to a breakpoint\n\t\tthis.debugStorage.storeBreakpoints(this.model);\n\t\tawait this.sendBreakpoints(uri);\n\t\tthis.debugStorage.storeBreakpoints(this.model);\n\t\treturn breakpoints;\n\t}\n\n\tasync updateBreakpoints(uri: uri, data: Map<string, IBreakpointUpdateData>, sendOnResourceSaved: boolean): Promise<void> {\n\t\tthis.model.updateBreakpoints(data);\n\t\tthis.debugStorage.storeBreakpoints(this.model);\n\t\tif (sendOnResourceSaved) {\n\t\t\tthis.breakpointsToSendOnResourceSaved.add(uri);\n\t\t} else {\n\t\t\tawait this.sendBreakpoints(uri);\n\t\t\tthis.debugStorage.storeBreakpoints(this.model);\n\t\t}\n\t}\n\n\tasync removeBreakpoints(id?: string): Promise<void> {\n\t\tconst breakpoints = this.model.getBreakpoints();\n\t\tconst toRemove = breakpoints.filter(bp => !id || bp.getId() === id);\n\t\t// note: using the debugger-resolved uri for aria to reflect UI state\n\t\ttoRemove.forEach(bp => aria.status(nls.localize('breakpointRemoved', \"Removed breakpoint, line {0}, file {1}\", bp.lineNumber, bp.uri.fsPath)));\n\t\tconst urisToClear = new Set(toRemove.map(bp => bp.originalUri.toString()));\n\n\t\tthis.model.removeBreakpoints(toRemove);\n\t\tthis.unlinkTriggeredBreakpoints(breakpoints, toRemove).forEach(uri => urisToClear.add(uri.toString()));\n\n\t\tthis.debugStorage.storeBreakpoints(this.model);\n\t\tawait Promise.all([...urisToClear].map(uri => this.sendBreakpoints(URI.parse(uri))));\n\t}\n\n\tsetBreakpointsActivated(activated: boolean): Promise<void> {\n\t\tthis.model.setBreakpointsActivated(activated);\n\t\treturn this.sendAllBreakpoints();\n\t}\n\n\tasync addFunctionBreakpoint(opts?: IFunctionBreakpointOptions, id?: string): Promise<void> {\n\t\tthis.model.addFunctionBreakpoint(opts ?? { name: '' }, id);\n\t\t// If opts not provided, sending the breakpoint is handled by a later to call to `updateFunctionBreakpoint`\n\t\tif (opts) {\n\t\t\tthis.debugStorage.storeBreakpoints(this.model);\n\t\t\tawait this.sendFunctionBreakpoints();\n\t\t\tthis.debugStorage.storeBreakpoints(this.model);\n\t\t}\n\t}\n\n\tasync updateFunctionBreakpoint(id: string, update: { name?: string; hitCondition?: string; condition?: string }): Promise<void> {\n\t\tthis.model.updateFunctionBreakpoint(id, update);\n\t\tthis.debugStorage.storeBreakpoints(this.model);\n\t\tawait this.sendFunctionBreakpoints();\n\t}\n\n\tasync removeFunctionBreakpoints(id?: string): Promise<void> {\n\t\tthis.model.removeFunctionBreakpoints(id);\n\t\tthis.debugStorage.storeBreakpoints(this.model);\n\t\tawait this.sendFunctionBreakpoints();\n\t}\n\n\tasync addDataBreakpoint(opts: IDataBreakpointOptions): Promise<void> {\n\t\tthis.model.addDataBreakpoint(opts);\n\t\tthis.debugStorage.storeBreakpoints(this.model);\n\t\tawait this.sendDataBreakpoints();\n\t\tthis.debugStorage.storeBreakpoints(this.model);\n\t}\n\n\tasync updateDataBreakpoint(id: string, update: { hitCondition?: string; condition?: string }): Promise<void> {\n\t\tthis.model.updateDataBreakpoint(id, update);\n\t\tthis.debugStorage.storeBreakpoints(this.model);\n\t\tawait this.sendDataBreakpoints();\n\t}\n\n\tasync removeDataBreakpoints(id?: string): Promise<void> {\n\t\tthis.model.removeDataBreakpoints(id);\n\t\tthis.debugStorage.storeBreakpoints(this.model);\n\t\tawait this.sendDataBreakpoints();\n\t}\n\n\tasync addInstructionBreakpoint(opts: IInstructionBreakpointOptions): Promise<void> {\n\t\tthis.model.addInstructionBreakpoint(opts);\n\t\tthis.debugStorage.storeBreakpoints(this.model);\n\t\tawait this.sendInstructionBreakpoints();\n\t\tthis.debugStorage.storeBreakpoints(this.model);\n\t}\n\n\tasync removeInstructionBreakpoints(instructionReference?: string, offset?: number): Promise<void> {\n\t\tthis.model.removeInstructionBreakpoints(instructionReference, offset);\n\t\tthis.debugStorage.storeBreakpoints(this.model);\n\t\tawait this.sendInstructionBreakpoints();\n\t}\n\n\tsetExceptionBreakpointFallbackSession(sessionId: string) {\n\t\tthis.model.setExceptionBreakpointFallbackSession(sessionId);\n\t\tthis.debugStorage.storeBreakpoints(this.model);\n\t}\n\n\tsetExceptionBreakpointsForSession(session: IDebugSession, filters: DebugProtocol.ExceptionBreakpointsFilter[]): void {\n\t\tthis.model.setExceptionBreakpointsForSession(session.getId(), filters);\n\t\tthis.debugStorage.storeBreakpoints(this.model);\n\t}\n\n\tasync setExceptionBreakpointCondition(exceptionBreakpoint: IExceptionBreakpoint, condition: string | undefined): Promise<void> {\n\t\tthis.model.setExceptionBreakpointCondition(exceptionBreakpoint, condition);\n\t\tthis.debugStorage.storeBreakpoints(this.model);\n\t\tawait this.sendExceptionBreakpoints();\n\t}\n\n\tasync sendAllBreakpoints(session?: IDebugSession): Promise<any> {\n\t\tconst setBreakpointsPromises = distinct(this.model.getBreakpoints(), bp => bp.originalUri.toString())\n\t\t\t.map(bp => this.sendBreakpoints(bp.originalUri, false, session));\n\n\t\t// If sending breakpoints to one session which we know supports the configurationDone request, can make all requests in parallel\n\t\tif (session?.capabilities.supportsConfigurationDoneRequest) {\n\t\t\tawait Promise.all([\n\t\t\t\t...setBreakpointsPromises,\n\t\t\t\tthis.sendFunctionBreakpoints(session),\n\t\t\t\tthis.sendDataBreakpoints(session),\n\t\t\t\tthis.sendInstructionBreakpoints(session),\n\t\t\t\tthis.sendExceptionBreakpoints(session),\n\t\t\t]);\n\t\t} else {\n\t\t\tawait Promise.all(setBreakpointsPromises);\n\t\t\tawait this.sendFunctionBreakpoints(session);\n\t\t\tawait this.sendDataBreakpoints(session);\n\t\t\tawait this.sendInstructionBreakpoints(session);\n\t\t\t// send exception breakpoints at the end since some debug adapters may rely on the order - this was the case before\n\t\t\t// the configurationDone request was introduced.\n\t\t\tawait this.sendExceptionBreakpoints(session);\n\t\t}\n\t}\n\n\t/**\n\t * Removes the condition of triggered breakpoints that depended on\n\t * breakpoints in `removedBreakpoints`. Returns the URIs of resources that\n\t * had their breakpoints changed in this way.\n\t */\n\tprivate unlinkTriggeredBreakpoints(allBreakpoints: readonly IBreakpoint[], removedBreakpoints: readonly IBreakpoint[]): uri[] {\n\t\tconst affectedUris: uri[] = [];\n\t\tfor (const removed of removedBreakpoints) {\n\t\t\tfor (const existing of allBreakpoints) {\n\t\t\t\tif (!removedBreakpoints.includes(existing) && existing.triggeredBy === removed.getId()) {\n\t\t\t\t\tthis.model.updateBreakpoints(new Map([[existing.getId(), { triggeredBy: undefined }]]));\n\t\t\t\t\taffectedUris.push(existing.originalUri);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn affectedUris;\n\t}\n\n\tprivate async makeTriggeredBreakpointsMatchEnablement(enable: boolean, breakpoint: Breakpoint) {\n\t\tif (enable) {\n\t\t\t/** If the breakpoint is being enabled, also ensure its triggerer is enabled */\n\t\t\tif (breakpoint.triggeredBy) {\n\t\t\t\tconst trigger = this.model.getBreakpoints().find(bp => breakpoint.triggeredBy === bp.getId());\n\t\t\t\tif (trigger && !trigger.enabled) {\n\t\t\t\t\tawait this.enableOrDisableBreakpoints(enable, trigger);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\n\t\t/** Makes its triggeree states match the state of this breakpoint */\n\t\tawait Promise.all(this.model.getBreakpoints()\n\t\t\t.filter(bp => bp.triggeredBy === breakpoint.getId() && bp.enabled !== enable)\n\t\t\t.map(bp => this.enableOrDisableBreakpoints(enable, bp))\n\t\t);\n\t}\n\n\tpublic async sendBreakpoints(modelUri: uri, sourceModified = false, session?: IDebugSession): Promise<void> {\n\t\tconst breakpointsToSend = this.model.getBreakpoints({ originalUri: modelUri, enabledOnly: true });\n\t\tawait sendToOneOrAllSessions(this.model, session, async s => {\n\t\t\tif (!s.configuration.noDebug) {\n\t\t\t\tconst sessionBps = breakpointsToSend.filter(bp => !bp.triggeredBy || bp.getSessionDidTrigger(s.getId()));\n\t\t\t\tawait s.sendBreakpoints(modelUri, sessionBps, sourceModified);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate async sendFunctionBreakpoints(session?: IDebugSession): Promise<void> {\n\t\tconst breakpointsToSend = this.model.getFunctionBreakpoints().filter(fbp => fbp.enabled && this.model.areBreakpointsActivated());\n\n\t\tawait sendToOneOrAllSessions(this.model, session, async s => {\n\t\t\tif (s.capabilities.supportsFunctionBreakpoints && !s.configuration.noDebug) {\n\t\t\t\tawait s.sendFunctionBreakpoints(breakpointsToSend);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate async sendDataBreakpoints(session?: IDebugSession): Promise<void> {\n\t\tconst breakpointsToSend = this.model.getDataBreakpoints().filter(fbp => fbp.enabled && this.model.areBreakpointsActivated());\n\n\t\tawait sendToOneOrAllSessions(this.model, session, async s => {\n\t\t\tif (s.capabilities.supportsDataBreakpoints && !s.configuration.noDebug) {\n\t\t\t\tawait s.sendDataBreakpoints(breakpointsToSend);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate async sendInstructionBreakpoints(session?: IDebugSession): Promise<void> {\n\t\tconst breakpointsToSend = this.model.getInstructionBreakpoints().filter(fbp => fbp.enabled && this.model.areBreakpointsActivated());\n\n\t\tawait sendToOneOrAllSessions(this.model, session, async s => {\n\t\t\tif (s.capabilities.supportsInstructionBreakpoints && !s.configuration.noDebug) {\n\t\t\t\tawait s.sendInstructionBreakpoints(breakpointsToSend);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate sendExceptionBreakpoints(session?: IDebugSession): Promise<void> {\n\t\treturn sendToOneOrAllSessions(this.model, session, async s => {\n\t\t\tconst enabledExceptionBps = this.model.getExceptionBreakpointsForSession(s.getId()).filter(exb => exb.enabled);\n\t\t\tif (s.capabilities.supportsConfigurationDoneRequest && (!s.capabilities.exceptionBreakpointFilters || s.capabilities.exceptionBreakpointFilters.length === 0)) {\n\t\t\t\t// Only call `setExceptionBreakpoints` as specified in dap protocol #90001\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!s.configuration.noDebug) {\n\t\t\t\tawait s.sendExceptionBreakpoints(enabledExceptionBps);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate onFileChanges(fileChangesEvent: FileChangesEvent): void {\n\t\tconst toRemove = this.model.getBreakpoints().filter(bp =>\n\t\t\tfileChangesEvent.contains(bp.originalUri, FileChangeType.DELETED));\n\t\tif (toRemove.length) {\n\t\t\tthis.model.removeBreakpoints(toRemove);\n\t\t}\n\n\t\tconst toSend: URI[] = [];\n\t\tfor (const uri of this.breakpointsToSendOnResourceSaved) {\n\t\t\tif (fileChangesEvent.contains(uri, FileChangeType.UPDATED)) {\n\t\t\t\ttoSend.push(uri);\n\t\t\t}\n\t\t}\n\n\t\tfor (const uri of toSend) {\n\t\t\tthis.breakpointsToSendOnResourceSaved.delete(uri);\n\t\t\tthis.sendBreakpoints(uri, true);\n\t\t}\n\t}\n\n\tasync runTo(uri: uri, lineNumber: number, column?: number): Promise<void> {\n\t\tlet breakpointToRemove: IBreakpoint | undefined;\n\t\tlet threadToContinue = this.getViewModel().focusedThread;\n\t\tconst addTempBreakPoint = async () => {\n\t\t\tconst bpExists = !!(this.getModel().getBreakpoints({ column, lineNumber, uri }).length);\n\n\t\t\tif (!bpExists) {\n\t\t\t\tconst addResult = await this.addAndValidateBreakpoints(uri, lineNumber, column);\n\t\t\t\tif (addResult.thread) {\n\t\t\t\t\tthreadToContinue = addResult.thread;\n\t\t\t\t}\n\n\t\t\t\tif (addResult.breakpoint) {\n\t\t\t\t\tbreakpointToRemove = addResult.breakpoint;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn { threadToContinue, breakpointToRemove };\n\t\t};\n\t\tconst removeTempBreakPoint = (state: State): boolean => {\n\t\t\tif (state === State.Stopped || state === State.Inactive) {\n\t\t\t\tif (breakpointToRemove) {\n\t\t\t\t\tthis.removeBreakpoints(breakpointToRemove.getId());\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\tawait addTempBreakPoint();\n\t\tif (this.state === State.Inactive) {\n\t\t\t// If no session exists start the debugger\n\t\t\tconst { launch, name, getConfig } = this.getConfigurationManager().selectedConfiguration;\n\t\t\tconst config = await getConfig();\n\t\t\tconst configOrName = config ? Object.assign(deepClone(config), {}) : name;\n\t\t\tconst listener = this.onDidChangeState(state => {\n\t\t\t\tif (removeTempBreakPoint(state)) {\n\t\t\t\t\tlistener.dispose();\n\t\t\t\t}\n\t\t\t});\n\t\t\tawait this.startDebugging(launch, configOrName, undefined, true);\n\t\t}\n\t\tif (this.state === State.Stopped) {\n\t\t\tconst focusedSession = this.getViewModel().focusedSession;\n\t\t\tif (!focusedSession || !threadToContinue) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst listener = threadToContinue.session.onDidChangeState(() => {\n\t\t\t\tif (removeTempBreakPoint(focusedSession.state)) {\n\t\t\t\t\tlistener.dispose();\n\t\t\t\t}\n\t\t\t});\n\t\t\tawait threadToContinue.continue();\n\t\t}\n\t}\n\n\tprivate async addAndValidateBreakpoints(uri: URI, lineNumber: number, column?: number) {\n\t\tconst debugModel = this.getModel();\n\t\tconst viewModel = this.getViewModel();\n\n\t\tconst breakpoints = await this.addBreakpoints(uri, [{ lineNumber, column }], false);\n\t\tconst breakpoint = breakpoints?.[0];\n\t\tif (!breakpoint) {\n\t\t\treturn { breakpoint: undefined, thread: viewModel.focusedThread };\n\t\t}\n\n\t\t// If the breakpoint was not initially verified, wait up to 2s for it to become so.\n\t\t// Inherently racey if multiple sessions can verify async, but not solvable...\n\t\tif (!breakpoint.verified) {\n\t\t\tlet listener: IDisposable;\n\t\t\tawait raceTimeout(new Promise<void>(resolve => {\n\t\t\t\tlistener = debugModel.onDidChangeBreakpoints(() => {\n\t\t\t\t\tif (breakpoint.verified) {\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}), 2000);\n\t\t\tlistener!.dispose();\n\t\t}\n\n\t\t// Look at paused threads for sessions that verified this bp. Prefer, in order:\n\t\tconst enum Score {\n\t\t\t/** The focused thread */\n\t\t\tFocused,\n\t\t\t/** Any other stopped thread of a session that verified the bp */\n\t\t\tVerified,\n\t\t\t/** Any thread that verified and paused in the same file */\n\t\t\tVerifiedAndPausedInFile,\n\t\t\t/** The focused thread if it verified the breakpoint */\n\t\t\tVerifiedAndFocused,\n\t\t}\n\n\t\tlet bestThread = viewModel.focusedThread;\n\t\tlet bestScore = Score.Focused;\n\t\tfor (const sessionId of breakpoint.sessionsThatVerified) {\n\t\t\tconst session = debugModel.getSession(sessionId);\n\t\t\tif (!session) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tconst threads = session.getAllThreads().filter(t => t.stopped);\n\t\t\tif (bestScore < Score.VerifiedAndFocused) {\n\t\t\t\tif (viewModel.focusedThread && threads.includes(viewModel.focusedThread)) {\n\t\t\t\t\tbestThread = viewModel.focusedThread;\n\t\t\t\t\tbestScore = Score.VerifiedAndFocused;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (bestScore < Score.VerifiedAndPausedInFile) {\n\t\t\t\tconst pausedInThisFile = threads.find(t => {\n\t\t\t\t\tconst top = t.getTopStackFrame();\n\t\t\t\t\treturn top && this.uriIdentityService.extUri.isEqual(top.source.uri, uri);\n\t\t\t\t});\n\n\t\t\t\tif (pausedInThisFile) {\n\t\t\t\t\tbestThread = pausedInThisFile;\n\t\t\t\t\tbestScore = Score.VerifiedAndPausedInFile;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (bestScore < Score.Verified) {\n\t\t\t\tbestThread = threads[0];\n\t\t\t\tbestScore = Score.VerifiedAndPausedInFile;\n\t\t\t}\n\t\t}\n\n\t\treturn { thread: bestThread, breakpoint };\n\t}\n}\n\nexport function getStackFrameThreadAndSessionToFocus(model: IDebugModel, stackFrame: IStackFrame | undefined, thread?: IThread, session?: IDebugSession, avoidSession?: IDebugSession): { stackFrame: IStackFrame | undefined; thread: IThread | undefined; session: IDebugSession | undefined } {\n\tif (!session) {\n\t\tif (stackFrame || thread) {\n\t\t\tsession = stackFrame ? stackFrame.thread.session : thread!.session;\n\t\t} else {\n\t\t\tconst sessions = model.getSessions();\n\t\t\tconst stoppedSession = sessions.find(s => s.state === State.Stopped);\n\t\t\t// Make sure to not focus session that is going down\n\t\t\tsession = stoppedSession || sessions.find(s => s !== avoidSession && s !== avoidSession?.parentSession) || (sessions.length ? sessions[0] : undefined);\n\t\t}\n\t}\n\n\tif (!thread) {\n\t\tif (stackFrame) {\n\t\t\tthread = stackFrame.thread;\n\t\t} else {\n\t\t\tconst threads = session ? session.getAllThreads() : undefined;\n\t\t\tconst stoppedThread = threads && threads.find(t => t.stopped);\n\t\t\tthread = stoppedThread || (threads && threads.length ? threads[0] : undefined);\n\t\t}\n\t}\n\n\tif (!stackFrame && thread) {\n\t\tstackFrame = thread.getTopStackFrame();\n\t}\n\n\treturn { session, thread, stackFrame };\n}\n\nasync function sendToOneOrAllSessions(model: DebugModel, session: IDebugSession | undefined, send: (session: IDebugSession) => Promise<void>): Promise<void> {\n\tif (session) {\n\t\tawait send(session);\n\t} else {\n\t\tawait Promise.all(model.getSessions().map(s => send(s)));\n\t}\n}\n"],
  "mappings": "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",
  "names": ["uri", "result", "message", "session", "Score"]
}
