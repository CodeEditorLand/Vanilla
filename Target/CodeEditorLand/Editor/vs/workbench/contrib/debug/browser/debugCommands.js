import{List as N}from"../../../../base/browser/ui/list/listWidget.js";import{KeyCode as d,KeyMod as p}from"../../../../base/common/keyCodes.js";import{DisposableStore as le}from"../../../../base/common/lifecycle.js";import{deepClone as ge}from"../../../../base/common/objects.js";import{isWeb as ue,isWindows as Se}from"../../../../base/common/platform.js";import{isCodeEditor as D}from"../../../../editor/browser/editorBrowser.js";import{EditorContextKeys as y}from"../../../../editor/common/editorContextKeys.js";import{ITextResourcePropertiesService as pe}from"../../../../editor/common/services/textResourceConfiguration.js";import*as a from"../../../../nls.js";import{Action2 as Ce,MenuId as B,MenuRegistry as q,registerAction2 as me}from"../../../../platform/actions/common/actions.js";import{IClipboardService as fe}from"../../../../platform/clipboard/common/clipboardService.js";import{CommandsRegistry as C,ICommandService as be}from"../../../../platform/commands/common/commands.js";import{IConfigurationService as R}from"../../../../platform/configuration/common/configuration.js";import{ContextKeyExpr as f,IContextKeyService as v}from"../../../../platform/contextkey/common/contextkey.js";import{InputFocusedContext as he}from"../../../../platform/contextkey/common/contextkeys.js";import{KeybindingWeight as g,KeybindingsRegistry as u}from"../../../../platform/keybinding/common/keybindingsRegistry.js";import{IListService as T}from"../../../../platform/list/browser/listService.js";import{INotificationService as H}from"../../../../platform/notification/common/notification.js";import{IQuickInputService as x}from"../../../../platform/quickinput/common/quickInput.js";import{ActiveEditorContext as Ee,PanelFocusContext as _e,ResourceContextKey as Ie}from"../../../common/contextkeys.js";import{ViewContainerLocation as Te}from"../../../common/views.js";import{IEditorService as I}from"../../../services/editor/common/editorService.js";import{IPaneCompositePartService as we}from"../../../services/panecomposite/browser/panecomposite.js";import{IViewsService as Y}from"../../../services/views/common/viewsService.js";import{CONTEXT_IN_CHAT_SESSION as ke}from"../../chat/common/chatContextKeys.js";import{IExtensionsWorkbenchService as Ae}from"../../extensions/common/extensions.js";import{TEXT_FILE_EDITOR_ID as De}from"../../files/common/files.js";import{CONTEXT_BREAKPOINTS_FOCUSED as F,CONTEXT_BREAKPOINT_INPUT_FOCUSED as ye,CONTEXT_DEBUGGERS_AVAILABLE as P,CONTEXT_DEBUG_STATE as _,CONTEXT_DISASSEMBLY_VIEW_FOCUS as O,CONTEXT_EXPRESSION_SELECTED as ve,CONTEXT_FOCUSED_SESSION_IS_ATTACH as Q,CONTEXT_IN_DEBUG_MODE as A,CONTEXT_IN_DEBUG_REPL as j,CONTEXT_JUMP_TO_CURSOR_SUPPORTED as xe,CONTEXT_STEP_INTO_TARGETS_SUPPORTED as Oe,CONTEXT_VARIABLES_FOCUSED as Le,CONTEXT_WATCH_EXPRESSIONS_FOCUSED as J,EDITOR_CONTRIBUTION_ID as Ne,IDebugService as l,REPL_VIEW_ID as M,State as U,VIEWLET_ID as Be,getStateLabel as Re,isFrameDeemphasized as Fe}from"../common/debug.js";import{Breakpoint as $,DataBreakpoint as Pe,Expression as w,FunctionBreakpoint as Me,Variable as Z}from"../common/debugModel.js";import{saveAllBeforeDebugStart as Ue}from"../common/debugUtils.js";import{showLoadedScriptMenu as Ve}from"../common/loadedScriptsPicker.js";import{openBreakpointSource as Ke}from"./breakpointsView.js";import{showDebugSessionMenu as We}from"./debugSessionPicker.js";const ze="debug.addConfiguration",ee="editor.debug.action.toggleInlineBreakpoint",Ge="debug.copyStackTrace",Xe="workbench.action.debug.reverseContinue",qe="workbench.action.debug.stepBack",He="workbench.action.debug.restart",Ye="workbench.action.debug.terminateThread",Qe="workbench.action.debug.stepOver",je="workbench.action.debug.stepInto",Je="workbench.action.debug.stepIntoTarget",$e="workbench.action.debug.stepOut",Ze="workbench.action.debug.pause",et="workbench.action.debug.disconnect",tt="workbench.action.debug.disconnectAndSuspend",nt="workbench.action.debug.stop",ot="workbench.action.debug.restartFrame",it="workbench.action.debug.continue",rt="workbench.debug.action.focusRepl",te="debug.jumpToCursor",st="workbench.action.debug.focusProcess",ne="workbench.action.debug.selectandstart",at="workbench.action.debug.selectDebugConsole",ct="workbench.action.debug.selectDebugSession",on="workbench.action.debug.configure",oe="workbench.action.debug.start",dt="workbench.action.debug.run",lt="debug.renameWatchExpression",gt="debug.setWatchExpression",ut="debug.removeWatchExpression",St="workbench.action.debug.nextConsole",pt="workbench.action.debug.prevConsole",Ct="workbench.action.debug.showLoadedScripts",mt="workbench.action.debug.callStackTop",ft="workbench.action.debug.callStackBottom",bt="workbench.action.debug.callStackUp",ht="workbench.action.debug.callStackDown",rn="debug.addToWatchExpressions",sn="debug.copyEvaluatePath",an="workbench.debug.viewlet.action.copyValue",V=a.localize2("debug","Debug"),cn=a.localize2("restartDebug","Restart"),dn=a.localize2("stepOverDebug","Step Over"),ln=a.localize2("stepIntoDebug","Step Into"),gn=a.localize2("stepIntoTargetDebug","Step Into Target"),un=a.localize2("stepOutDebug","Step Out"),Sn=a.localize2("pauseDebug","Pause"),pn=a.localize2("disconnect","Disconnect"),Cn=a.localize2("disconnectSuspend","Disconnect and Suspend"),mn=a.localize2("stop","Stop"),fn=a.localize2("continueDebug","Continue"),bn=a.localize2("focusSession","Focus Session"),hn=a.localize2("selectAndStartDebugging","Select and Start Debugging"),En=a.localize("openLaunchJson","Open '{0}'","launch.json"),_n=a.localize2("startDebug","Start Debugging"),In=a.localize2("startWithoutDebugging","Start Without Debugging"),Tn=a.localize2("nextDebugConsole","Focus Next Debug Console"),wn=a.localize2("prevDebugConsole","Focus Previous Debug Console"),kn=a.localize2("openLoadedScript","Open Loaded Script..."),An=a.localize2("callStackTop","Navigate to Top of Call Stack"),Dn=a.localize2("callStackBottom","Navigate to Bottom of Call Stack"),yn=a.localize2("callStackUp","Navigate Up Call Stack"),vn=a.localize2("callStackDown","Navigate Down Call Stack"),xn=a.localize2("copyAsExpression","Copy as Expression"),On=a.localize2("copyValue","Copy Value"),Ln=a.localize2("addToWatchExpressions","Add to Watch"),Nn=a.localize2("selectDebugConsole","Select Debug Console"),Bn=a.localize2("selectDebugSession","Select Debug Session"),Et="debug ",_t="debug consoles ";function It(e){return e&&typeof e.sessionId=="string"&&typeof e.threadId=="string"}async function b(e,o,t){const n=e.get(l);let i;if(It(o)){const r=n.getModel().getSession(o.sessionId);r&&(i=r.getAllThreads().find(s=>s.getId()===o.threadId))}else if(K(o)){const r=n.getModel().getSession(o.sessionId);if(r){const s=r.getAllThreads();i=s.length>0?s[0]:void 0}}if(!i&&(i=n.getViewModel().focusedThread,!i)){const r=n.getViewModel().focusedSession,s=r?r.getAllThreads():void 0;i=s&&s.length?s[0]:void 0}i&&await t(i)}function Tt(e){return e&&typeof e.sessionId=="string"&&typeof e.threadId=="string"&&typeof e.frameId=="string"}function ie(e,o){if(Tt(o)){const t=e.getModel().getSession(o.sessionId);if(t){const n=t.getAllThreads().find(i=>i.getId()===o.threadId);if(n)return n.getCallStack().find(i=>i.getId()===o.frameId)}}else return e.getViewModel().focusedStackFrame}function K(e){return e&&typeof e.sessionId=="string"}async function re(e,o){const t=e.get(l),n=e.get(Y),i=t.getModel().getSessions(!0).filter(c=>c.hasSeparateRepl());let r=t.getViewModel().focusedSession,s=0;if(i.length>0&&r){for(;r&&!r.hasSeparateRepl();)r=r.parentSession;if(r){const c=i.indexOf(r);o?s=c===i.length-1?0:c+1:s=c===0?i.length-1:c-1}}await t.focusStackFrame(void 0,void 0,i[s],{explicit:!0}),n.isViewVisible(M)||await n.openView(M,!0)}async function se(e,o){const t=e.getViewModel().focusedStackFrame;if(t){let n=t.thread.getCallStack(),i=n.findIndex(s=>s.frameId===t.frameId),r;if(o){if(i>=n.length-1)if(t.thread.reachedEndOfCallStack){ce(e);return}else await e.getModel().fetchCallstack(t.thread,20),n=t.thread.getCallStack(),i=n.findIndex(s=>s.frameId===t.frameId);r=W(!0,n,i)}else{if(i<=0){ae(e);return}r=W(!1,n,i)}r&&e.focusStackFrame(r,void 0,void 0,{preserveFocus:!1})}}async function ae(e){const o=e.getViewModel().focusedThread;if(o){await e.getModel().fetchCallstack(o);const t=o.getCallStack();if(t.length>0){const n=W(!1,t,0);n&&e.focusStackFrame(n,void 0,void 0,{preserveFocus:!1})}}}function ce(e){const o=e.getViewModel().focusedThread;o&&e.focusStackFrame(o.getTopStackFrame(),void 0,void 0,{preserveFocus:!1})}function W(e,o,t){t>=o.length?t=o.length-1:t<0&&(t=0);let n=t,i;do if(e?n===o.length-1?n=0:n++:n===0?n=o.length-1:n--,i=o[n],!Fe(i))return i;while(n!==t)}C.registerCommand({id:Ge,handler:async(e,o,t)=>{const n=e.get(pe),i=e.get(fe),r=e.get(l),s=ie(r,t);if(s){const c=n.getEOL(s.source.uri);await i.writeText(s.thread.getCallStack().map(m=>m.toString()).join(c))}}}),C.registerCommand({id:Xe,handler:async(e,o,t)=>{await b(e,t,n=>n.reverseContinue())}}),C.registerCommand({id:qe,handler:async(e,o,t)=>{const n=e.get(v);O.getValue(n)?await b(e,t,i=>i.stepBack("instruction")):await b(e,t,i=>i.stepBack())}}),C.registerCommand({id:Ye,handler:async(e,o,t)=>{await b(e,t,n=>n.terminate())}}),C.registerCommand({id:te,handler:async e=>{const t=e.get(l).getViewModel().focusedStackFrame,i=e.get(I).activeTextEditorControl,r=e.get(H),s=e.get(x);if(t&&D(i)&&i.hasModel()){const c=i.getPosition(),m=i.getModel().uri,E=t.thread.session.getSourceForUri(m);if(E){const S=(await t.thread.session.gotoTargets(E.raw,c.lineNumber,c.column))?.body.targets;if(S&&S.length){let k=S[0].id;if(S.length>1){const L=S.map(X=>({label:X.label,_id:X.id})),G=await s.pick(L,{placeHolder:a.localize("chooseLocation","Choose the specific location")});if(!G)return;k=G._id}return await t.thread.session.goto(t.thread.threadId,k).catch(L=>r.warn(L))}}}return r.warn(a.localize("noExecutableCode","No executable code is associated at the current cursor position."))}}),C.registerCommand({id:mt,handler:async(e,o,t)=>{const n=e.get(l);ce(n)}}),C.registerCommand({id:ft,handler:async(e,o,t)=>{const n=e.get(l);await ae(n)}}),C.registerCommand({id:bt,handler:async(e,o,t)=>{const n=e.get(l);se(n,!1)}}),C.registerCommand({id:ht,handler:async(e,o,t)=>{const n=e.get(l);se(n,!0)}}),q.appendMenuItem(B.EditorContext,{command:{id:te,title:a.localize("jumpToCursor","Jump to Cursor"),category:V},when:f.and(xe,y.editorTextFocus),group:"debug",order:3}),u.registerCommandAndKeybindingRule({id:St,weight:g.WorkbenchContrib+1,when:j,primary:p.CtrlCmd|d.PageDown,mac:{primary:p.Shift|p.CtrlCmd|d.BracketRight},handler:async(e,o,t)=>{re(e,!0)}}),u.registerCommandAndKeybindingRule({id:pt,weight:g.WorkbenchContrib+1,when:j,primary:p.CtrlCmd|d.PageUp,mac:{primary:p.Shift|p.CtrlCmd|d.BracketLeft},handler:async(e,o,t)=>{re(e,!1)}}),u.registerCommandAndKeybindingRule({id:He,weight:g.WorkbenchContrib,primary:p.Shift|p.CtrlCmd|d.F5,when:A,handler:async(e,o,t)=>{const n=e.get(l),i=e.get(R);let r;if(K(t)?r=n.getModel().getSession(t.sessionId):r=n.getViewModel().focusedSession,r){const s=i.getValue("debug").showSubSessionsInToolBar;for(;!s&&r.lifecycleManagedByParent&&r.parentSession;)r=r.parentSession;r.removeReplExpressions(),await n.restartSession(r)}else{const{launch:s,name:c}=n.getConfigurationManager().selectedConfiguration;await n.startDebugging(s,c,{noDebug:!1,startedByUser:!0})}}}),u.registerCommandAndKeybindingRule({id:Qe,weight:g.WorkbenchContrib,primary:d.F10,when:_.isEqualTo("stopped"),handler:async(e,o,t)=>{const n=e.get(v);O.getValue(n)?await b(e,t,i=>i.next("instruction")):await b(e,t,i=>i.next())}});const de=ue&&Se?p.Alt|d.F11:d.F11;u.registerCommandAndKeybindingRule({id:je,weight:g.WorkbenchContrib+10,primary:de,when:_.notEqualsTo("inactive"),handler:async(e,o,t)=>{const n=e.get(v);O.getValue(n)?await b(e,t,i=>i.stepIn("instruction")):await b(e,t,i=>i.stepIn())}}),u.registerCommandAndKeybindingRule({id:$e,weight:g.WorkbenchContrib,primary:p.Shift|d.F11,when:_.isEqualTo("stopped"),handler:async(e,o,t)=>{const n=e.get(v);O.getValue(n)?await b(e,t,i=>i.stepOut("instruction")):await b(e,t,i=>i.stepOut())}}),u.registerCommandAndKeybindingRule({id:Ze,weight:g.WorkbenchContrib+2,primary:d.F6,when:_.isEqualTo("running"),handler:async(e,o,t)=>{await b(e,t,n=>n.pause())}}),u.registerCommandAndKeybindingRule({id:Je,primary:de|p.CtrlCmd,when:f.and(Oe,A,_.isEqualTo("stopped")),weight:g.WorkbenchContrib,handler:async(e,o,t)=>{const n=e.get(x),i=e.get(l),r=i.getViewModel().focusedSession,s=i.getViewModel().focusedStackFrame;if(!s||!r)return;const c=await e.get(I).openEditor({resource:s.source.uri,options:{revealIfOpened:!0}});let m;if(c){const S=c?.getControl();D(S)&&(m=S)}const E=new le,h=E.add(n.createQuickPick());h.busy=!0,h.show(),E.add(h.onDidChangeActive(([S])=>{m&&S&&S.target.line!==void 0&&(m.revealLineInCenterIfOutsideViewport(S.target.line),m.setSelection({startLineNumber:S.target.line,startColumn:S.target.column||1,endLineNumber:S.target.endLine||S.target.line,endColumn:S.target.endColumn||S.target.column||1}))})),E.add(h.onDidAccept(()=>{h.activeItems.length&&r.stepIn(s.thread.threadId,h.activeItems[0].target.id)})),E.add(h.onDidHide(()=>E.dispose())),r.stepInTargets(s.frameId).then(S=>{h.busy=!1,S?.length?h.items=S?.map(k=>({target:k,label:k.label})):h.placeholder=a.localize("editor.debug.action.stepIntoTargets.none","No step targets available")})}});async function z(e,o,t,n,i){const r=e.get(l);let s;K(t)?s=r.getModel().getSession(t.sessionId):s=r.getViewModel().focusedSession;const m=e.get(R).getValue("debug").showSubSessionsInToolBar;for(;!m&&s&&s.lifecycleManagedByParent&&s.parentSession;)s=s.parentSession;await r.stopSession(s,n,i)}u.registerCommandAndKeybindingRule({id:et,weight:g.WorkbenchContrib,primary:p.Shift|d.F5,when:f.and(Q,A),handler:(e,o,t)=>z(e,o,t,!0)}),C.registerCommand({id:tt,handler:(e,o,t)=>z(e,o,t,!0,!0)}),u.registerCommandAndKeybindingRule({id:nt,weight:g.WorkbenchContrib,primary:p.Shift|d.F5,when:f.and(Q.toNegated(),A),handler:(e,o,t)=>z(e,o,t,!1)}),C.registerCommand({id:ot,handler:async(e,o,t)=>{const n=e.get(l),i=e.get(H),r=ie(n,t);if(r)try{await r.restart()}catch(s){i.error(s)}}}),u.registerCommandAndKeybindingRule({id:it,weight:g.WorkbenchContrib+10,primary:d.F5,when:_.isEqualTo("stopped"),handler:async(e,o,t)=>{await b(e,t,n=>n.continue())}}),C.registerCommand({id:Ct,handler:async e=>{await Ve(e)}}),C.registerCommand({id:rt,handler:async e=>{await e.get(Y).openView(M,!0)}}),C.registerCommand({id:"debug.startFromConfig",handler:async(e,o)=>{await e.get(l).startDebugging(void 0,o)}}),C.registerCommand({id:st,handler:async(e,o)=>{const t=e.get(l),n=e.get(I),i=t.getModel().getSessions().find(s=>s.parentSession===o&&s.state===U.Stopped);i&&o.state!==U.Stopped&&(o=i),await t.focusStackFrame(void 0,void 0,o,{explicit:!0});const r=t.getViewModel().focusedStackFrame;r&&await r.openInEditor(n,!0)}}),C.registerCommand({id:ne,handler:async(e,o,t)=>{const n=e.get(x),i=e.get(l);if(o){const r=i.getConfigurationManager(),s=await r.getDynamicProviders();for(const c of s)if(c.type===o){const m=await c.pick();if(m){await r.selectConfiguration(m.launch,m.config.name,m.config,{type:c.type}),i.startDebugging(m.launch,m.config,{noDebug:t?.noDebug,startedByUser:!0});return}}}n.quickAccess.show(Et)}}),C.registerCommand({id:at,handler:async e=>{e.get(x).quickAccess.show(_t)}}),C.registerCommand({id:ct,handler:async e=>{We(e,ne)}}),u.registerCommandAndKeybindingRule({id:oe,weight:g.WorkbenchContrib,primary:d.F5,when:f.and(P,_.isEqualTo("inactive")),handler:async(e,o)=>{const t=e.get(l);await Ue(e.get(R),e.get(I));const{launch:n,name:i,getConfig:r}=t.getConfigurationManager().selectedConfiguration,s=await r(),c=s?Object.assign(ge(s),o?.config):i;await t.startDebugging(n,c,{noDebug:o?.noDebug,startedByUser:!0},!1)}}),u.registerCommandAndKeybindingRule({id:dt,weight:g.WorkbenchContrib,primary:p.CtrlCmd|d.F5,mac:{primary:p.WinCtrl|d.F5},when:f.and(P,_.notEqualsTo(Re(U.Initializing))),handler:async e=>{await e.get(be).executeCommand(oe,{noDebug:!0})}}),u.registerCommandAndKeybindingRule({id:"debug.toggleBreakpoint",weight:g.WorkbenchContrib+5,when:f.and(F,he.toNegated()),primary:d.Space,handler:e=>{const o=e.get(T),t=e.get(l),n=o.lastFocusedList;if(n instanceof N){const i=n.getFocusedElements();i&&i.length&&t.enableOrDisableBreakpoints(!i[0].enabled,i[0])}}}),u.registerCommandAndKeybindingRule({id:"debug.enableOrDisableBreakpoint",weight:g.WorkbenchContrib,primary:void 0,when:y.editorTextFocus,handler:e=>{const o=e.get(l),n=e.get(I).activeTextEditorControl;if(D(n)){const i=n.getModel();if(i){const r=n.getPosition();if(r){const s=o.getModel().getBreakpoints({uri:i.uri,lineNumber:r.lineNumber});s.length&&o.enableOrDisableBreakpoints(!s[0].enabled,s[0])}}}}}),u.registerCommandAndKeybindingRule({id:lt,weight:g.WorkbenchContrib+5,when:J,primary:d.F2,mac:{primary:d.Enter},handler:(e,o)=>{const t=e.get(l);if(!(o instanceof w)){const i=e.get(T).lastFocusedList;if(i){const r=i.getFocus();Array.isArray(r)&&r[0]instanceof w&&(o=r[0])}}o instanceof w&&t.getViewModel().setSelectedExpression(o,!1)}}),C.registerCommand({id:gt,handler:async(e,o)=>{const t=e.get(l);(o instanceof w||o instanceof Z)&&t.getViewModel().setSelectedExpression(o,!0)}}),u.registerCommandAndKeybindingRule({id:"debug.setVariable",weight:g.WorkbenchContrib+5,when:Le,primary:d.F2,mac:{primary:d.Enter},handler:e=>{const o=e.get(T),t=e.get(l),n=o.lastFocusedList;if(n){const i=n.getFocus();Array.isArray(i)&&i[0]instanceof Z&&t.getViewModel().setSelectedExpression(i[0],!1)}}}),u.registerCommandAndKeybindingRule({id:ut,weight:g.WorkbenchContrib,when:f.and(J,ve.toNegated()),primary:d.Delete,mac:{primary:p.CtrlCmd|d.Backspace},handler:(e,o)=>{const t=e.get(l);if(o instanceof w){t.removeWatchExpressions(o.getId());return}const i=e.get(T).lastFocusedList;if(i){let r=i.getFocus();if(Array.isArray(r)&&r[0]instanceof w){const s=i.getSelection();s&&s.indexOf(r[0])>=0&&(r=s),r.forEach(c=>t.removeWatchExpressions(c.getId()))}}}}),u.registerCommandAndKeybindingRule({id:"debug.removeBreakpoint",weight:g.WorkbenchContrib,when:f.and(F,ye.toNegated()),primary:d.Delete,mac:{primary:p.CtrlCmd|d.Backspace},handler:e=>{const o=e.get(T),t=e.get(l),n=o.lastFocusedList;if(n instanceof N){const i=n.getFocusedElements(),r=i.length?i[0]:void 0;r instanceof $?t.removeBreakpoints(r.getId()):r instanceof Me?t.removeFunctionBreakpoints(r.getId()):r instanceof Pe&&t.removeDataBreakpoints(r.getId())}}}),u.registerCommandAndKeybindingRule({id:"debug.installAdditionalDebuggers",weight:g.WorkbenchContrib,when:void 0,primary:void 0,handler:async(e,o)=>{const t=e.get(Ae);let n="@category:debuggers";return typeof o=="string"&&(n+=` ${o}`),t.openSearch(n)}}),me(class extends Ce{constructor(){super({id:ze,title:a.localize2("addConfiguration","Add Configuration..."),category:V,f1:!0,menu:{id:B.EditorContent,when:f.and(f.regex(Ie.Path.key,/\.vscode[/\\]launch\.json$/),Ee.isEqualTo(De))}})}async run(o,t){const n=o.get(l).getConfigurationManager(),i=n.getLaunches().find(r=>r.uri.toString()===t)||n.selectedConfiguration.launch;if(i){const{editor:r,created:s}=await i.openConfigFile({preserveFocus:!1});if(r&&!s){const c=r.getControl();c&&await c.getContribution(Ne)?.addLaunchConfiguration()}}}});const wt=e=>{const o=e.get(l),n=e.get(I).activeTextEditorControl;if(D(n)){const i=n.getPosition();if(i&&n.hasModel()&&o.canSetBreakpointsIn(n.getModel())){const r=n.getModel().uri;o.getModel().getBreakpoints({lineNumber:i.lineNumber,uri:r}).some(c=>c.sessionAgnosticData.column===i.column||!c.column&&i.column<=1)||o.addBreakpoints(r,[{lineNumber:i.lineNumber,column:i.column>1?i.column:void 0}])}}};u.registerCommandAndKeybindingRule({weight:g.WorkbenchContrib,primary:p.Shift|d.F9,when:y.editorTextFocus,id:ee,handler:wt}),q.appendMenuItem(B.EditorContext,{command:{id:ee,title:a.localize("addInlineBreakpoint","Add Inline Breakpoint"),category:V},when:f.and(A,_e.toNegated(),y.editorTextFocus,ke.toNegated()),group:"debug",order:1}),u.registerCommandAndKeybindingRule({id:"debug.openBreakpointToSide",weight:g.WorkbenchContrib,when:F,primary:p.CtrlCmd|d.Enter,secondary:[p.Alt|d.Enter],handler:e=>{const t=e.get(T).lastFocusedList;if(t instanceof N){const n=t.getFocusedElements();if(n.length&&n[0]instanceof $)return Ke(n[0],!0,!1,!0,e.get(l),e.get(I))}}}),u.registerCommandAndKeybindingRule({id:"debug.openView",weight:g.WorkbenchContrib,when:P.toNegated(),primary:d.F5,secondary:[p.CtrlCmd|d.F5],handler:async e=>{await e.get(we).openPaneComposite(Be,Te.Sidebar,!0)}});export{ze as ADD_CONFIGURATION_ID,rn as ADD_TO_WATCH_ID,Ln as ADD_TO_WATCH_LABEL,ft as CALLSTACK_BOTTOM_ID,Dn as CALLSTACK_BOTTOM_LABEL,ht as CALLSTACK_DOWN_ID,vn as CALLSTACK_DOWN_LABEL,mt as CALLSTACK_TOP_ID,An as CALLSTACK_TOP_LABEL,bt as CALLSTACK_UP_ID,yn as CALLSTACK_UP_LABEL,it as CONTINUE_ID,fn as CONTINUE_LABEL,sn as COPY_EVALUATE_PATH_ID,xn as COPY_EVALUATE_PATH_LABEL,Ge as COPY_STACK_TRACE_ID,an as COPY_VALUE_ID,On as COPY_VALUE_LABEL,V as DEBUG_COMMAND_CATEGORY,on as DEBUG_CONFIGURE_COMMAND_ID,En as DEBUG_CONFIGURE_LABEL,_t as DEBUG_CONSOLE_QUICK_ACCESS_PREFIX,Et as DEBUG_QUICK_ACCESS_PREFIX,dt as DEBUG_RUN_COMMAND_ID,In as DEBUG_RUN_LABEL,oe as DEBUG_START_COMMAND_ID,_n as DEBUG_START_LABEL,tt as DISCONNECT_AND_SUSPEND_ID,Cn as DISCONNECT_AND_SUSPEND_LABEL,et as DISCONNECT_ID,pn as DISCONNECT_LABEL,lt as EDIT_EXPRESSION_COMMAND_ID,rt as FOCUS_REPL_ID,st as FOCUS_SESSION_ID,bn as FOCUS_SESSION_LABEL,te as JUMP_TO_CURSOR_ID,St as NEXT_DEBUG_CONSOLE_ID,Tn as NEXT_DEBUG_CONSOLE_LABEL,kn as OPEN_LOADED_SCRIPTS_LABEL,Ze as PAUSE_ID,Sn as PAUSE_LABEL,pt as PREV_DEBUG_CONSOLE_ID,wn as PREV_DEBUG_CONSOLE_LABEL,ut as REMOVE_EXPRESSION_COMMAND_ID,ot as RESTART_FRAME_ID,cn as RESTART_LABEL,He as RESTART_SESSION_ID,Xe as REVERSE_CONTINUE_ID,ne as SELECT_AND_START_ID,hn as SELECT_AND_START_LABEL,at as SELECT_DEBUG_CONSOLE_ID,Nn as SELECT_DEBUG_CONSOLE_LABEL,ct as SELECT_DEBUG_SESSION_ID,Bn as SELECT_DEBUG_SESSION_LABEL,gt as SET_EXPRESSION_COMMAND_ID,Ct as SHOW_LOADED_SCRIPTS_ID,qe as STEP_BACK_ID,je as STEP_INTO_ID,ln as STEP_INTO_LABEL,Je as STEP_INTO_TARGET_ID,gn as STEP_INTO_TARGET_LABEL,$e as STEP_OUT_ID,un as STEP_OUT_LABEL,Qe as STEP_OVER_ID,dn as STEP_OVER_LABEL,nt as STOP_ID,mn as STOP_LABEL,Ye as TERMINATE_THREAD_ID,ee as TOGGLE_INLINE_BREAKPOINT_ID};
