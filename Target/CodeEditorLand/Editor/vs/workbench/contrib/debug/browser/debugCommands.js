import*as a from"../../../../nls.js";import{KeyCode as d,KeyMod as p}from"../../../../base/common/keyCodes.js";import{List as N}from"../../../../base/browser/ui/list/listWidget.js";import{KeybindingsRegistry as g,KeybindingWeight as u}from"../../../../platform/keybinding/common/keybindingsRegistry.js";import{IListService as T}from"../../../../platform/list/browser/listService.js";import{IDebugService as l,CONTEXT_BREAKPOINTS_FOCUSED as B,CONTEXT_WATCH_EXPRESSIONS_FOCUSED as q,CONTEXT_VARIABLES_FOCUSED as le,EDITOR_CONTRIBUTION_ID as ge,CONTEXT_IN_DEBUG_MODE as A,CONTEXT_EXPRESSION_SELECTED as ue,CONTEXT_DEBUG_STATE as _,CONTEXT_JUMP_TO_CURSOR_SUPPORTED as Se,REPL_VIEW_ID as R,CONTEXT_DEBUGGERS_AVAILABLE as F,State as P,getStateLabel as pe,CONTEXT_BREAKPOINT_INPUT_FOCUSED as Ce,CONTEXT_FOCUSED_SESSION_IS_ATTACH as H,VIEWLET_ID as me,CONTEXT_DISASSEMBLY_VIEW_FOCUS as D,CONTEXT_IN_DEBUG_REPL as Y,CONTEXT_STEP_INTO_TARGETS_SUPPORTED as fe,isFrameDeemphasized as be}from"../common/debug.js";import{Expression as w,Variable as Q,Breakpoint as J,FunctionBreakpoint as he,DataBreakpoint as Ee}from"../common/debugModel.js";import{IExtensionsWorkbenchService as _e}from"../../extensions/common/extensions.js";import{isCodeEditor as v}from"../../../../editor/browser/editorBrowser.js";import{MenuRegistry as j,MenuId as M,Action2 as Ie,registerAction2 as Te}from"../../../../platform/actions/common/actions.js";import{IEditorService as I}from"../../../services/editor/common/editorService.js";import{EditorContextKeys as x}from"../../../../editor/common/editorContextKeys.js";import{ContextKeyExpr as f,IContextKeyService as y}from"../../../../platform/contextkey/common/contextkey.js";import{openBreakpointSource as we}from"./breakpointsView.js";import{INotificationService as $}from"../../../../platform/notification/common/notification.js";import{InputFocusedContext as ke}from"../../../../platform/contextkey/common/contextkeys.js";import"../../../../editor/browser/editorExtensions.js";import{ActiveEditorContext as Ae,PanelFocusContext as De,ResourceContextKey as ve}from"../../../common/contextkeys.js";import{CommandsRegistry as C,ICommandService as xe}from"../../../../platform/commands/common/commands.js";import{ITextResourcePropertiesService as ye}from"../../../../editor/common/services/textResourceConfiguration.js";import{IClipboardService as Oe}from"../../../../platform/clipboard/common/clipboardService.js";import{IConfigurationService as U}from"../../../../platform/configuration/common/configuration.js";import{IQuickInputService as O}from"../../../../platform/quickinput/common/quickInput.js";import{ViewContainerLocation as Le}from"../../../common/views.js";import{IViewsService as Z}from"../../../services/views/common/viewsService.js";import{deepClone as Ne}from"../../../../base/common/objects.js";import{isWeb as Be,isWindows as Re}from"../../../../base/common/platform.js";import{saveAllBeforeDebugStart as Fe}from"../common/debugUtils.js";import{IPaneCompositePartService as Pe}from"../../../services/panecomposite/browser/panecomposite.js";import{showLoadedScriptMenu as Me}from"../common/loadedScriptsPicker.js";import{showDebugSessionMenu as Ue}from"./debugSessionPicker.js";import{TEXT_FILE_EDITOR_ID as Ve}from"../../files/common/files.js";import"../../../../platform/action/common/action.js";import{CONTEXT_IN_CHAT_SESSION as Ke}from"../../chat/common/chatContextKeys.js";import{DisposableStore as We}from"../../../../base/common/lifecycle.js";const ze="debug.addConfiguration",ee="editor.debug.action.toggleInlineBreakpoint",Ge="debug.copyStackTrace",Xe="workbench.action.debug.reverseContinue",qe="workbench.action.debug.stepBack",He="workbench.action.debug.restart",Ye="workbench.action.debug.terminateThread",Qe="workbench.action.debug.stepOver",Je="workbench.action.debug.stepInto",je="workbench.action.debug.stepIntoTarget",$e="workbench.action.debug.stepOut",Ze="workbench.action.debug.pause",et="workbench.action.debug.disconnect",tt="workbench.action.debug.disconnectAndSuspend",nt="workbench.action.debug.stop",ot="workbench.action.debug.restartFrame",it="workbench.action.debug.continue",rt="workbench.debug.action.focusRepl",te="debug.jumpToCursor",st="workbench.action.debug.focusProcess",ne="workbench.action.debug.selectandstart",at="workbench.action.debug.selectDebugConsole",ct="workbench.action.debug.selectDebugSession",bn="workbench.action.debug.configure",oe="workbench.action.debug.start",dt="workbench.action.debug.run",lt="debug.renameWatchExpression",gt="debug.setWatchExpression",ut="debug.removeWatchExpression",St="workbench.action.debug.nextConsole",pt="workbench.action.debug.prevConsole",Ct="workbench.action.debug.showLoadedScripts",mt="workbench.action.debug.callStackTop",ft="workbench.action.debug.callStackBottom",bt="workbench.action.debug.callStackUp",ht="workbench.action.debug.callStackDown",hn="debug.addToWatchExpressions",En="debug.copyEvaluatePath",_n="workbench.debug.viewlet.action.copyValue",V=a.localize2("debug","Debug"),In=a.localize2("restartDebug","Restart"),Tn=a.localize2("stepOverDebug","Step Over"),wn=a.localize2("stepIntoDebug","Step Into"),kn=a.localize2("stepIntoTargetDebug","Step Into Target"),An=a.localize2("stepOutDebug","Step Out"),Dn=a.localize2("pauseDebug","Pause"),vn=a.localize2("disconnect","Disconnect"),xn=a.localize2("disconnectSuspend","Disconnect and Suspend"),yn=a.localize2("stop","Stop"),On=a.localize2("continueDebug","Continue"),Ln=a.localize2("focusSession","Focus Session"),Nn=a.localize2("selectAndStartDebugging","Select and Start Debugging"),Bn=a.localize("openLaunchJson","Open '{0}'","launch.json"),Rn=a.localize2("startDebug","Start Debugging"),Fn=a.localize2("startWithoutDebugging","Start Without Debugging"),Pn=a.localize2("nextDebugConsole","Focus Next Debug Console"),Mn=a.localize2("prevDebugConsole","Focus Previous Debug Console"),Un=a.localize2("openLoadedScript","Open Loaded Script..."),Vn=a.localize2("callStackTop","Navigate to Top of Call Stack"),Kn=a.localize2("callStackBottom","Navigate to Bottom of Call Stack"),Wn=a.localize2("callStackUp","Navigate Up Call Stack"),zn=a.localize2("callStackDown","Navigate Down Call Stack"),Gn=a.localize2("copyAsExpression","Copy as Expression"),Xn=a.localize2("copyValue","Copy Value"),qn=a.localize2("addToWatchExpressions","Add to Watch"),Hn=a.localize2("selectDebugConsole","Select Debug Console"),Yn=a.localize2("selectDebugSession","Select Debug Session"),Et="debug ",_t="debug consoles ";function It(e){return e&&typeof e.sessionId=="string"&&typeof e.threadId=="string"}async function b(e,o,t){const n=e.get(l);let i;if(It(o)){const r=n.getModel().getSession(o.sessionId);r&&(i=r.getAllThreads().find(s=>s.getId()===o.threadId))}else if(K(o)){const r=n.getModel().getSession(o.sessionId);if(r){const s=r.getAllThreads();i=s.length>0?s[0]:void 0}}if(!i&&(i=n.getViewModel().focusedThread,!i)){const r=n.getViewModel().focusedSession,s=r?r.getAllThreads():void 0;i=s&&s.length?s[0]:void 0}i&&await t(i)}function Tt(e){return e&&typeof e.sessionId=="string"&&typeof e.threadId=="string"&&typeof e.frameId=="string"}function ie(e,o){if(Tt(o)){const t=e.getModel().getSession(o.sessionId);if(t){const n=t.getAllThreads().find(i=>i.getId()===o.threadId);if(n)return n.getCallStack().find(i=>i.getId()===o.frameId)}}else return e.getViewModel().focusedStackFrame}function K(e){return e&&typeof e.sessionId=="string"}async function re(e,o){const t=e.get(l),n=e.get(Z),i=t.getModel().getSessions(!0).filter(c=>c.hasSeparateRepl());let r=t.getViewModel().focusedSession,s=0;if(i.length>0&&r){for(;r&&!r.hasSeparateRepl();)r=r.parentSession;if(r){const c=i.indexOf(r);o?s=c===i.length-1?0:c+1:s=c===0?i.length-1:c-1}}await t.focusStackFrame(void 0,void 0,i[s],{explicit:!0}),n.isViewVisible(R)||await n.openView(R,!0)}async function se(e,o){const t=e.getViewModel().focusedStackFrame;if(t){let n=t.thread.getCallStack(),i=n.findIndex(s=>s.frameId===t.frameId),r;if(o){if(i>=n.length-1)if(t.thread.reachedEndOfCallStack){ce(e);return}else await e.getModel().fetchCallstack(t.thread,20),n=t.thread.getCallStack(),i=n.findIndex(s=>s.frameId===t.frameId);r=W(!0,n,i)}else{if(i<=0){ae(e);return}r=W(!1,n,i)}r&&e.focusStackFrame(r,void 0,void 0,{preserveFocus:!1})}}async function ae(e){const o=e.getViewModel().focusedThread;if(o){await e.getModel().fetchCallstack(o);const t=o.getCallStack();if(t.length>0){const n=W(!1,t,0);n&&e.focusStackFrame(n,void 0,void 0,{preserveFocus:!1})}}}function ce(e){const o=e.getViewModel().focusedThread;o&&e.focusStackFrame(o.getTopStackFrame(),void 0,void 0,{preserveFocus:!1})}function W(e,o,t){t>=o.length?t=o.length-1:t<0&&(t=0);let n=t,i;do if(e?n===o.length-1?n=0:n++:n===0?n=o.length-1:n--,i=o[n],!be(i))return i;while(n!==t)}C.registerCommand({id:Ge,handler:async(e,o,t)=>{const n=e.get(ye),i=e.get(Oe),r=e.get(l),s=ie(r,t);if(s){const c=n.getEOL(s.source.uri);await i.writeText(s.thread.getCallStack().map(m=>m.toString()).join(c))}}}),C.registerCommand({id:Xe,handler:async(e,o,t)=>{await b(e,t,n=>n.reverseContinue())}}),C.registerCommand({id:qe,handler:async(e,o,t)=>{const n=e.get(y);D.getValue(n)?await b(e,t,i=>i.stepBack("instruction")):await b(e,t,i=>i.stepBack())}}),C.registerCommand({id:Ye,handler:async(e,o,t)=>{await b(e,t,n=>n.terminate())}}),C.registerCommand({id:te,handler:async e=>{const t=e.get(l).getViewModel().focusedStackFrame,i=e.get(I).activeTextEditorControl,r=e.get($),s=e.get(O);if(t&&v(i)&&i.hasModel()){const c=i.getPosition(),m=i.getModel().uri,E=t.thread.session.getSourceForUri(m);if(E){const S=(await t.thread.session.gotoTargets(E.raw,c.lineNumber,c.column))?.body.targets;if(S&&S.length){let k=S[0].id;if(S.length>1){const L=S.map(X=>({label:X.label,_id:X.id})),G=await s.pick(L,{placeHolder:a.localize("chooseLocation","Choose the specific location")});if(!G)return;k=G._id}return await t.thread.session.goto(t.thread.threadId,k).catch(L=>r.warn(L))}}}return r.warn(a.localize("noExecutableCode","No executable code is associated at the current cursor position."))}}),C.registerCommand({id:mt,handler:async(e,o,t)=>{const n=e.get(l);ce(n)}}),C.registerCommand({id:ft,handler:async(e,o,t)=>{const n=e.get(l);await ae(n)}}),C.registerCommand({id:bt,handler:async(e,o,t)=>{const n=e.get(l);se(n,!1)}}),C.registerCommand({id:ht,handler:async(e,o,t)=>{const n=e.get(l);se(n,!0)}}),j.appendMenuItem(M.EditorContext,{command:{id:te,title:a.localize("jumpToCursor","Jump to Cursor"),category:V},when:f.and(Se,x.editorTextFocus),group:"debug",order:3}),g.registerCommandAndKeybindingRule({id:St,weight:u.WorkbenchContrib+1,when:Y,primary:p.CtrlCmd|d.PageDown,mac:{primary:p.Shift|p.CtrlCmd|d.BracketRight},handler:async(e,o,t)=>{re(e,!0)}}),g.registerCommandAndKeybindingRule({id:pt,weight:u.WorkbenchContrib+1,when:Y,primary:p.CtrlCmd|d.PageUp,mac:{primary:p.Shift|p.CtrlCmd|d.BracketLeft},handler:async(e,o,t)=>{re(e,!1)}}),g.registerCommandAndKeybindingRule({id:He,weight:u.WorkbenchContrib,primary:p.Shift|p.CtrlCmd|d.F5,when:A,handler:async(e,o,t)=>{const n=e.get(l),i=e.get(U);let r;if(K(t)?r=n.getModel().getSession(t.sessionId):r=n.getViewModel().focusedSession,r){const s=i.getValue("debug").showSubSessionsInToolBar;for(;!s&&r.lifecycleManagedByParent&&r.parentSession;)r=r.parentSession;r.removeReplExpressions(),await n.restartSession(r)}else{const{launch:s,name:c}=n.getConfigurationManager().selectedConfiguration;await n.startDebugging(s,c,{noDebug:!1,startedByUser:!0})}}}),g.registerCommandAndKeybindingRule({id:Qe,weight:u.WorkbenchContrib,primary:d.F10,when:_.isEqualTo("stopped"),handler:async(e,o,t)=>{const n=e.get(y);D.getValue(n)?await b(e,t,i=>i.next("instruction")):await b(e,t,i=>i.next())}});const de=Be&&Re?p.Alt|d.F11:d.F11;g.registerCommandAndKeybindingRule({id:Je,weight:u.WorkbenchContrib+10,primary:de,when:_.notEqualsTo("inactive"),handler:async(e,o,t)=>{const n=e.get(y);D.getValue(n)?await b(e,t,i=>i.stepIn("instruction")):await b(e,t,i=>i.stepIn())}}),g.registerCommandAndKeybindingRule({id:$e,weight:u.WorkbenchContrib,primary:p.Shift|d.F11,when:_.isEqualTo("stopped"),handler:async(e,o,t)=>{const n=e.get(y);D.getValue(n)?await b(e,t,i=>i.stepOut("instruction")):await b(e,t,i=>i.stepOut())}}),g.registerCommandAndKeybindingRule({id:Ze,weight:u.WorkbenchContrib+2,primary:d.F6,when:_.isEqualTo("running"),handler:async(e,o,t)=>{await b(e,t,n=>n.pause())}}),g.registerCommandAndKeybindingRule({id:je,primary:de|p.CtrlCmd,when:f.and(fe,A,_.isEqualTo("stopped")),weight:u.WorkbenchContrib,handler:async(e,o,t)=>{const n=e.get(O),i=e.get(l),r=i.getViewModel().focusedSession,s=i.getViewModel().focusedStackFrame;if(!s||!r)return;const c=await e.get(I).openEditor({resource:s.source.uri,options:{revealIfOpened:!0}});let m;if(c){const S=c?.getControl();v(S)&&(m=S)}const E=new We,h=E.add(n.createQuickPick());h.busy=!0,h.show(),E.add(h.onDidChangeActive(([S])=>{m&&S&&S.target.line!==void 0&&(m.revealLineInCenterIfOutsideViewport(S.target.line),m.setSelection({startLineNumber:S.target.line,startColumn:S.target.column||1,endLineNumber:S.target.endLine||S.target.line,endColumn:S.target.endColumn||S.target.column||1}))})),E.add(h.onDidAccept(()=>{h.activeItems.length&&r.stepIn(s.thread.threadId,h.activeItems[0].target.id)})),E.add(h.onDidHide(()=>E.dispose())),r.stepInTargets(s.frameId).then(S=>{h.busy=!1,S?.length?h.items=S?.map(k=>({target:k,label:k.label})):h.placeholder=a.localize("editor.debug.action.stepIntoTargets.none","No step targets available")})}});async function z(e,o,t,n,i){const r=e.get(l);let s;K(t)?s=r.getModel().getSession(t.sessionId):s=r.getViewModel().focusedSession;const m=e.get(U).getValue("debug").showSubSessionsInToolBar;for(;!m&&s&&s.lifecycleManagedByParent&&s.parentSession;)s=s.parentSession;await r.stopSession(s,n,i)}g.registerCommandAndKeybindingRule({id:et,weight:u.WorkbenchContrib,primary:p.Shift|d.F5,when:f.and(H,A),handler:(e,o,t)=>z(e,o,t,!0)}),C.registerCommand({id:tt,handler:(e,o,t)=>z(e,o,t,!0,!0)}),g.registerCommandAndKeybindingRule({id:nt,weight:u.WorkbenchContrib,primary:p.Shift|d.F5,when:f.and(H.toNegated(),A),handler:(e,o,t)=>z(e,o,t,!1)}),C.registerCommand({id:ot,handler:async(e,o,t)=>{const n=e.get(l),i=e.get($),r=ie(n,t);if(r)try{await r.restart()}catch(s){i.error(s)}}}),g.registerCommandAndKeybindingRule({id:it,weight:u.WorkbenchContrib+10,primary:d.F5,when:_.isEqualTo("stopped"),handler:async(e,o,t)=>{await b(e,t,n=>n.continue())}}),C.registerCommand({id:Ct,handler:async e=>{await Me(e)}}),C.registerCommand({id:rt,handler:async e=>{await e.get(Z).openView(R,!0)}}),C.registerCommand({id:"debug.startFromConfig",handler:async(e,o)=>{await e.get(l).startDebugging(void 0,o)}}),C.registerCommand({id:st,handler:async(e,o)=>{const t=e.get(l),n=e.get(I),i=t.getModel().getSessions().find(s=>s.parentSession===o&&s.state===P.Stopped);i&&o.state!==P.Stopped&&(o=i),await t.focusStackFrame(void 0,void 0,o,{explicit:!0});const r=t.getViewModel().focusedStackFrame;r&&await r.openInEditor(n,!0)}}),C.registerCommand({id:ne,handler:async(e,o,t)=>{const n=e.get(O),i=e.get(l);if(o){const r=i.getConfigurationManager(),s=await r.getDynamicProviders();for(const c of s)if(c.type===o){const m=await c.pick();if(m){await r.selectConfiguration(m.launch,m.config.name,m.config,{type:c.type}),i.startDebugging(m.launch,m.config,{noDebug:t?.noDebug,startedByUser:!0});return}}}n.quickAccess.show(Et)}}),C.registerCommand({id:at,handler:async e=>{e.get(O).quickAccess.show(_t)}}),C.registerCommand({id:ct,handler:async e=>{Ue(e,ne)}}),g.registerCommandAndKeybindingRule({id:oe,weight:u.WorkbenchContrib,primary:d.F5,when:f.and(F,_.isEqualTo("inactive")),handler:async(e,o)=>{const t=e.get(l);await Fe(e.get(U),e.get(I));const{launch:n,name:i,getConfig:r}=t.getConfigurationManager().selectedConfiguration,s=await r(),c=s?Object.assign(Ne(s),o?.config):i;await t.startDebugging(n,c,{noDebug:o?.noDebug,startedByUser:!0},!1)}}),g.registerCommandAndKeybindingRule({id:dt,weight:u.WorkbenchContrib,primary:p.CtrlCmd|d.F5,mac:{primary:p.WinCtrl|d.F5},when:f.and(F,_.notEqualsTo(pe(P.Initializing))),handler:async e=>{await e.get(xe).executeCommand(oe,{noDebug:!0})}}),g.registerCommandAndKeybindingRule({id:"debug.toggleBreakpoint",weight:u.WorkbenchContrib+5,when:f.and(B,ke.toNegated()),primary:d.Space,handler:e=>{const o=e.get(T),t=e.get(l),n=o.lastFocusedList;if(n instanceof N){const i=n.getFocusedElements();i&&i.length&&t.enableOrDisableBreakpoints(!i[0].enabled,i[0])}}}),g.registerCommandAndKeybindingRule({id:"debug.enableOrDisableBreakpoint",weight:u.WorkbenchContrib,primary:void 0,when:x.editorTextFocus,handler:e=>{const o=e.get(l),n=e.get(I).activeTextEditorControl;if(v(n)){const i=n.getModel();if(i){const r=n.getPosition();if(r){const s=o.getModel().getBreakpoints({uri:i.uri,lineNumber:r.lineNumber});s.length&&o.enableOrDisableBreakpoints(!s[0].enabled,s[0])}}}}}),g.registerCommandAndKeybindingRule({id:lt,weight:u.WorkbenchContrib+5,when:q,primary:d.F2,mac:{primary:d.Enter},handler:(e,o)=>{const t=e.get(l);if(!(o instanceof w)){const i=e.get(T).lastFocusedList;if(i){const r=i.getFocus();Array.isArray(r)&&r[0]instanceof w&&(o=r[0])}}o instanceof w&&t.getViewModel().setSelectedExpression(o,!1)}}),C.registerCommand({id:gt,handler:async(e,o)=>{const t=e.get(l);(o instanceof w||o instanceof Q)&&t.getViewModel().setSelectedExpression(o,!0)}}),g.registerCommandAndKeybindingRule({id:"debug.setVariable",weight:u.WorkbenchContrib+5,when:le,primary:d.F2,mac:{primary:d.Enter},handler:e=>{const o=e.get(T),t=e.get(l),n=o.lastFocusedList;if(n){const i=n.getFocus();Array.isArray(i)&&i[0]instanceof Q&&t.getViewModel().setSelectedExpression(i[0],!1)}}}),g.registerCommandAndKeybindingRule({id:ut,weight:u.WorkbenchContrib,when:f.and(q,ue.toNegated()),primary:d.Delete,mac:{primary:p.CtrlCmd|d.Backspace},handler:(e,o)=>{const t=e.get(l);if(o instanceof w){t.removeWatchExpressions(o.getId());return}const i=e.get(T).lastFocusedList;if(i){let r=i.getFocus();if(Array.isArray(r)&&r[0]instanceof w){const s=i.getSelection();s&&s.indexOf(r[0])>=0&&(r=s),r.forEach(c=>t.removeWatchExpressions(c.getId()))}}}}),g.registerCommandAndKeybindingRule({id:"debug.removeBreakpoint",weight:u.WorkbenchContrib,when:f.and(B,Ce.toNegated()),primary:d.Delete,mac:{primary:p.CtrlCmd|d.Backspace},handler:e=>{const o=e.get(T),t=e.get(l),n=o.lastFocusedList;if(n instanceof N){const i=n.getFocusedElements(),r=i.length?i[0]:void 0;r instanceof J?t.removeBreakpoints(r.getId()):r instanceof he?t.removeFunctionBreakpoints(r.getId()):r instanceof Ee&&t.removeDataBreakpoints(r.getId())}}}),g.registerCommandAndKeybindingRule({id:"debug.installAdditionalDebuggers",weight:u.WorkbenchContrib,when:void 0,primary:void 0,handler:async(e,o)=>{const t=e.get(_e);let n="@category:debuggers";return typeof o=="string"&&(n+=` ${o}`),t.openSearch(n)}}),Te(class extends Ie{constructor(){super({id:ze,title:a.localize2("addConfiguration","Add Configuration..."),category:V,f1:!0,menu:{id:M.EditorContent,when:f.and(f.regex(ve.Path.key,/\.vscode[/\\]launch\.json$/),Ae.isEqualTo(Ve))}})}async run(o,t){const n=o.get(l).getConfigurationManager(),i=n.getLaunches().find(r=>r.uri.toString()===t)||n.selectedConfiguration.launch;if(i){const{editor:r,created:s}=await i.openConfigFile({preserveFocus:!1});if(r&&!s){const c=r.getControl();c&&await c.getContribution(ge)?.addLaunchConfiguration()}}}});const wt=e=>{const o=e.get(l),n=e.get(I).activeTextEditorControl;if(v(n)){const i=n.getPosition();if(i&&n.hasModel()&&o.canSetBreakpointsIn(n.getModel())){const r=n.getModel().uri;o.getModel().getBreakpoints({lineNumber:i.lineNumber,uri:r}).some(c=>c.sessionAgnosticData.column===i.column||!c.column&&i.column<=1)||o.addBreakpoints(r,[{lineNumber:i.lineNumber,column:i.column>1?i.column:void 0}])}}};g.registerCommandAndKeybindingRule({weight:u.WorkbenchContrib,primary:p.Shift|d.F9,when:x.editorTextFocus,id:ee,handler:wt}),j.appendMenuItem(M.EditorContext,{command:{id:ee,title:a.localize("addInlineBreakpoint","Add Inline Breakpoint"),category:V},when:f.and(A,De.toNegated(),x.editorTextFocus,Ke.toNegated()),group:"debug",order:1}),g.registerCommandAndKeybindingRule({id:"debug.openBreakpointToSide",weight:u.WorkbenchContrib,when:B,primary:p.CtrlCmd|d.Enter,secondary:[p.Alt|d.Enter],handler:e=>{const t=e.get(T).lastFocusedList;if(t instanceof N){const n=t.getFocusedElements();if(n.length&&n[0]instanceof J)return we(n[0],!0,!1,!0,e.get(l),e.get(I))}}}),g.registerCommandAndKeybindingRule({id:"debug.openView",weight:u.WorkbenchContrib,when:F.toNegated(),primary:d.F5,secondary:[p.CtrlCmd|d.F5],handler:async e=>{await e.get(Pe).openPaneComposite(me,Le.Sidebar,!0)}});export{ze as ADD_CONFIGURATION_ID,hn as ADD_TO_WATCH_ID,qn as ADD_TO_WATCH_LABEL,ft as CALLSTACK_BOTTOM_ID,Kn as CALLSTACK_BOTTOM_LABEL,ht as CALLSTACK_DOWN_ID,zn as CALLSTACK_DOWN_LABEL,mt as CALLSTACK_TOP_ID,Vn as CALLSTACK_TOP_LABEL,bt as CALLSTACK_UP_ID,Wn as CALLSTACK_UP_LABEL,it as CONTINUE_ID,On as CONTINUE_LABEL,En as COPY_EVALUATE_PATH_ID,Gn as COPY_EVALUATE_PATH_LABEL,Ge as COPY_STACK_TRACE_ID,_n as COPY_VALUE_ID,Xn as COPY_VALUE_LABEL,V as DEBUG_COMMAND_CATEGORY,bn as DEBUG_CONFIGURE_COMMAND_ID,Bn as DEBUG_CONFIGURE_LABEL,_t as DEBUG_CONSOLE_QUICK_ACCESS_PREFIX,Et as DEBUG_QUICK_ACCESS_PREFIX,dt as DEBUG_RUN_COMMAND_ID,Fn as DEBUG_RUN_LABEL,oe as DEBUG_START_COMMAND_ID,Rn as DEBUG_START_LABEL,tt as DISCONNECT_AND_SUSPEND_ID,xn as DISCONNECT_AND_SUSPEND_LABEL,et as DISCONNECT_ID,vn as DISCONNECT_LABEL,lt as EDIT_EXPRESSION_COMMAND_ID,rt as FOCUS_REPL_ID,st as FOCUS_SESSION_ID,Ln as FOCUS_SESSION_LABEL,te as JUMP_TO_CURSOR_ID,St as NEXT_DEBUG_CONSOLE_ID,Pn as NEXT_DEBUG_CONSOLE_LABEL,Un as OPEN_LOADED_SCRIPTS_LABEL,Ze as PAUSE_ID,Dn as PAUSE_LABEL,pt as PREV_DEBUG_CONSOLE_ID,Mn as PREV_DEBUG_CONSOLE_LABEL,ut as REMOVE_EXPRESSION_COMMAND_ID,ot as RESTART_FRAME_ID,In as RESTART_LABEL,He as RESTART_SESSION_ID,Xe as REVERSE_CONTINUE_ID,ne as SELECT_AND_START_ID,Nn as SELECT_AND_START_LABEL,at as SELECT_DEBUG_CONSOLE_ID,Hn as SELECT_DEBUG_CONSOLE_LABEL,ct as SELECT_DEBUG_SESSION_ID,Yn as SELECT_DEBUG_SESSION_LABEL,gt as SET_EXPRESSION_COMMAND_ID,Ct as SHOW_LOADED_SCRIPTS_ID,qe as STEP_BACK_ID,Je as STEP_INTO_ID,wn as STEP_INTO_LABEL,je as STEP_INTO_TARGET_ID,kn as STEP_INTO_TARGET_LABEL,$e as STEP_OUT_ID,An as STEP_OUT_LABEL,Qe as STEP_OVER_ID,Tn as STEP_OVER_LABEL,nt as STOP_ID,yn as STOP_LABEL,Ye as TERMINATE_THREAD_ID,ee as TOGGLE_INLINE_BREAKPOINT_ID};
