var U=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var v=(c,i,a,r)=>{for(var n=r>1?void 0:r?F(i,a):i,m=c.length-1,u;m>=0;m--)(u=c[m])&&(n=(r?u(i,a,n):u(n))||n);return r&&n&&U(i,a,n),n},e=(c,i)=>(a,r)=>i(a,r,c);import{DisposableStore as P}from"../../../../base/common/lifecycle.js";import{isMacintosh as w,isWeb as y}from"../../../../base/common/platform.js";import{isCodeEditor as T,isDiffEditor as A}from"../../../../editor/browser/editorBrowser.js";import{localize as s,localize2 as $}from"../../../../nls.js";import{IConfigurationService as j}from"../../../../platform/configuration/common/configuration.js";import{ContextKeyExpr as h,IContextKeyService as X,RawContextKey as x}from"../../../../platform/contextkey/common/contextkey.js";import{IContextMenuService as H}from"../../../../platform/contextview/browser/contextView.js";import{IHoverService as q}from"../../../../platform/hover/browser/hover.js";import{IInstantiationService as J}from"../../../../platform/instantiation/common/instantiation.js";import{IKeybindingService as Q}from"../../../../platform/keybinding/common/keybinding.js";import{IOpenerService as Y}from"../../../../platform/opener/common/opener.js";import{Registry as Z}from"../../../../platform/registry/common/platform.js";import{IStorageService as ee,StorageScope as _,StorageTarget as te}from"../../../../platform/storage/common/storage.js";import{ITelemetryService as oe}from"../../../../platform/telemetry/common/telemetry.js";import{IThemeService as ne}from"../../../../platform/theme/common/themeService.js";import{OpenFileAction as re,OpenFileFolderAction as L,OpenFolderAction as ie}from"../../../browser/actions/workspaceActions.js";import{ViewPane as ae}from"../../../browser/parts/views/viewPane.js";import{WorkbenchStateContext as R}from"../../../common/contextkeys.js";import{Extensions as se,IViewDescriptorService as de,ViewContentGroups as d}from"../../../common/views.js";import{IEditorService as ge}from"../../../services/editor/common/editorService.js";import{CONTEXT_DEBUGGERS_AVAILABLE as p,CONTEXT_DEBUG_EXTENSION_AVAILABLE as ce,IDebugService as me}from"../common/debug.js";import{DEBUG_CONFIGURE_COMMAND_ID as ue,DEBUG_START_COMMAND_ID as O,SELECT_AND_START_ID as le}from"./debugCommands.js";const f="debugStartLanguage",pe=new x(f,void 0),V=new x("debuggerInterestedInActiveEditor",!1);let o=class extends ae{constructor(a,r,n,m,u,b,Ie,M,K,G,k,D,B,W){super(a,n,m,u,b,G,K,k,r,B,W);this.debugService=Ie;this.editorService=M;this.debugStartLanguageContext=pe.bindTo(b),this.debuggerInterestedContext=V.bindTo(b);const z=D.get(f,_.WORKSPACE);this.debugStartLanguageContext.set(z);const l=()=>{let t=this.editorService.activeTextEditorControl;if(A(t)&&(t=t.getModifiedEditor()),T(t)){const E=t.getModel(),I=E?E.getLanguageId():void 0;if(I&&this.debugService.getAdapterManager().someDebuggerInterestedInLanguage(I)){this.debugStartLanguageContext.set(I),this.debuggerInterestedContext.set(!0),D.store(f,I,_.WORKSPACE,te.MACHINE);return}}this.debuggerInterestedContext.set(!1)},S=new P;this._register(S),this._register(M.onDidActiveEditorChange(()=>{S.clear();let t=this.editorService.activeTextEditorControl;A(t)&&(t=t.getModifiedEditor()),T(t)&&S.add(t.onDidChangeModelLanguage(l)),l()})),this._register(this.debugService.getAdapterManager().onDidRegisterDebugger(l)),this._register(this.onDidChangeBodyVisibility(t=>{t&&l()})),l();const C=this.keybindingService.lookupKeybinding(O);N=C?` (${C.getLabel()})`:""}static ID="workbench.debug.welcome";static LABEL=$("run","Run");debugStartLanguageContext;debuggerInterestedContext;shouldShowWelcome(){return!0}};o=v([e(1,ne),e(2,Q),e(3,H),e(4,j),e(5,X),e(6,me),e(7,ge),e(8,J),e(9,de),e(10,Y),e(11,ee),e(12,oe),e(13,q)],o);const g=Z.as(se.ViewsRegistry);g.registerViewWelcomeContent(o.ID,{content:s({key:"openAFileWhichCanBeDebugged",comment:['Please do not translate the word "command", it is part of our internal syntax which must not change','{Locked="](command:{0})"}']},"[Open a file](command:{0}) which can be debugged or run.",w&&!y?L.ID:re.ID),when:h.and(p,V.toNegated()),group:d.Open});let N="";g.registerViewWelcomeContent(o.ID,{content:`[${s("runAndDebugAction","Run and Debug")}${N}](command:${O})`,when:p,group:d.Debug,order:1}),g.registerViewWelcomeContent(o.ID,{content:`[${s("detectThenRunAndDebug","Show all automatic debug configurations")}](command:${le}).`,when:p,group:d.Debug,order:10}),g.registerViewWelcomeContent(o.ID,{content:s({key:"customizeRunAndDebug",comment:['Please do not translate the word "command", it is part of our internal syntax which must not change','{Locked="](command:{0})"}']},"To customize Run and Debug [create a launch.json file](command:{0}).",ue),when:h.and(p,R.notEqualsTo("empty")),group:d.Debug}),g.registerViewWelcomeContent(o.ID,{content:s({key:"customizeRunAndDebugOpenFolder",comment:['Please do not translate the word "command", it is part of our internal syntax which must not change','Please do not translate "launch.json", it is the specific configuration file name','{Locked="](command:{0})"}']},"To customize Run and Debug, [open a folder](command:{0}) and create a launch.json file.",w&&!y?L.ID:ie.ID),when:h.and(p,R.isEqualTo("empty")),group:d.Debug}),g.registerViewWelcomeContent(o.ID,{content:s("allDebuggersDisabled","All debug extensions are disabled. Enable a debug extension or install a new one from the Marketplace."),when:ce.toNegated(),group:d.Debug});export{o as WelcomeView};
