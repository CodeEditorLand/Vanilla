import e from"assert";import{ensureNoDisposablesAreLeakedInTestSuite as n}from"../../../../../base/test/common/utils.js";import"../../common/debug.js";import{formatPII as s,getExactExpressionStartAndEnd as t,getVisibleAndSorted as o}from"../../common/debugUtils.js";suite("Debug - Utils",()=>{n(),test("formatPII",()=>{e.strictEqual(s("Foo Bar",!1,{}),"Foo Bar"),e.strictEqual(s("Foo {key} Bar",!1,{}),"Foo {key} Bar"),e.strictEqual(s("Foo {key} Bar",!1,{key:"yes"}),"Foo yes Bar"),e.strictEqual(s("Foo {_0} Bar {_0}",!0,{_0:"yes"}),"Foo yes Bar yes"),e.strictEqual(s("Foo {0} Bar {1}{2}",!1,{0:"yes"}),"Foo yes Bar {1}{2}"),e.strictEqual(s("Foo {0} Bar {1}{2}",!1,{0:"yes",1:"undefined"}),"Foo yes Bar undefined{2}"),e.strictEqual(s("Foo {_key0} Bar {key1}{key2}",!0,{_key0:"yes",key1:"5",key2:"false"}),"Foo yes Bar {key1}{key2}"),e.strictEqual(s("Foo {_key0} Bar {key1}{key2}",!1,{_key0:"yes",key1:"5",key2:"false"}),"Foo yes Bar 5false"),e.strictEqual(s('Unable to display threads:"{e}"',!1,{e:"detached from process"}),'Unable to display threads:"detached from process"')}),test("getExactExpressionStartAndEnd",()=>{e.deepStrictEqual(t("foo",1,2),{start:1,end:3}),e.deepStrictEqual(t("foo",1,3),{start:1,end:3}),e.deepStrictEqual(t("foo",1,4),{start:1,end:3}),e.deepStrictEqual(t('this.name = "John"',1,10),{start:1,end:9}),e.deepStrictEqual(t('this.name = "John"',6,10),{start:1,end:9}),e.deepStrictEqual(t('this->address = "Main street"',6,10),{start:1,end:13}),e.deepStrictEqual(t("var t = a.b.c.d.name",16,20),{start:9,end:20}),e.deepStrictEqual(t("MyClass::StaticProp",10,20),{start:1,end:19}),e.deepStrictEqual(t("largeNumber = myVar?.prop",21,25),{start:15,end:25}),e.deepStrictEqual(t("var t = a.b.c.d.name",11,12),{start:9,end:11}),e.deepStrictEqual(t("var t = a.b;c.d.name",16,20),{start:13,end:20}),e.deepStrictEqual(t("var t = a.b.c-d.name",16,20),{start:15,end:20}),e.deepStrictEqual(t("var a\xF8\xF1\xE9\xE5\u6587 = a.b.c-d.name",5,5),{start:5,end:10}),e.deepStrictEqual(t("a\xF8\xF1\xE9\xE5\u6587.a\xF8\xF1\xE9\xE5\u6587.a\xF8\xF1\xE9\xE5\u6587",9,9),{start:1,end:13})}),test("config presentation",()=>{const a=[];a.push({type:"node",request:"launch",name:"p"}),a.push({type:"node",request:"launch",name:"a"}),a.push({type:"node",request:"launch",name:"b",presentation:{hidden:!1}}),a.push({type:"node",request:"launch",name:"c",presentation:{hidden:!0}}),a.push({type:"node",request:"launch",name:"d",presentation:{group:"2_group",order:5}}),a.push({type:"node",request:"launch",name:"e",presentation:{group:"2_group",order:52}}),a.push({type:"node",request:"launch",name:"f",presentation:{group:"1_group",order:500}}),a.push({type:"node",request:"launch",name:"g",presentation:{group:"5_group",order:500}}),a.push({type:"node",request:"launch",name:"h",presentation:{order:700}}),a.push({type:"node",request:"launch",name:"i",presentation:{order:1e3}});const r=o(a);e.strictEqual(r.length,9),e.strictEqual(r[0].name,"f"),e.strictEqual(r[1].name,"d"),e.strictEqual(r[2].name,"e"),e.strictEqual(r[3].name,"g"),e.strictEqual(r[4].name,"h"),e.strictEqual(r[5].name,"i"),e.strictEqual(r[6].name,"b"),e.strictEqual(r[7].name,"p"),e.strictEqual(r[8].name,"a")})});
