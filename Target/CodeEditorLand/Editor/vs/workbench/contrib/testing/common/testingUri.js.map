{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/testing/common/testingUri.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { assertNever } from '../../../../base/common/assert.js';\nimport { URI } from '../../../../base/common/uri.js';\n\nexport const TEST_DATA_SCHEME = 'vscode-test-data';\n\nexport const enum TestUriType {\n\t/** All console output for a task */\n\tTaskOutput,\n\t/** All console output for a test in a task */\n\tTestOutput,\n\t/** Specific message in a test */\n\tResultMessage,\n\t/** Specific actual output message in a test */\n\tResultActualOutput,\n\t/** Specific expected output message in a test */\n\tResultExpectedOutput,\n}\n\ninterface IAllOutputReference {\n\ttype: TestUriType.TaskOutput;\n\tresultId: string;\n\ttaskIndex: number;\n}\n\ninterface IResultTestUri {\n\tresultId: string;\n\ttaskIndex: number;\n\ttestExtId: string;\n}\n\ninterface ITestOutputReference extends IResultTestUri {\n\ttype: TestUriType.TestOutput;\n}\n\ninterface IResultTestMessageReference extends IResultTestUri {\n\ttype: TestUriType.ResultMessage;\n\tmessageIndex: number;\n}\n\ninterface ITestDiffOutputReference extends IResultTestUri {\n\ttype: TestUriType.ResultActualOutput | TestUriType.ResultExpectedOutput;\n\tmessageIndex: number;\n}\n\nexport type ParsedTestUri =\n\t| IAllOutputReference\n\t| IResultTestMessageReference\n\t| ITestDiffOutputReference\n\t| ITestOutputReference;\n\nconst enum TestUriParts {\n\tResults = 'results',\n\n\tAllOutput = 'output',\n\tMessages = 'message',\n\tText = 'TestFailureMessage',\n\tActualOutput = 'ActualOutput',\n\tExpectedOutput = 'ExpectedOutput',\n}\n\nexport const parseTestUri = (uri: URI): ParsedTestUri | undefined => {\n\tconst type = uri.authority;\n\tconst [resultId, ...request] = uri.path.slice(1).split('/');\n\n\tif (request[0] === TestUriParts.Messages) {\n\t\tconst taskIndex = Number(request[1]);\n\t\tconst testExtId = uri.query;\n\t\tconst index = Number(request[2]);\n\t\tconst part = request[3];\n\t\tif (type === TestUriParts.Results) {\n\t\t\tswitch (part) {\n\t\t\t\tcase TestUriParts.Text:\n\t\t\t\t\treturn { resultId, taskIndex, testExtId, messageIndex: index, type: TestUriType.ResultMessage };\n\t\t\t\tcase TestUriParts.ActualOutput:\n\t\t\t\t\treturn { resultId, taskIndex, testExtId, messageIndex: index, type: TestUriType.ResultActualOutput };\n\t\t\t\tcase TestUriParts.ExpectedOutput:\n\t\t\t\t\treturn { resultId, taskIndex, testExtId, messageIndex: index, type: TestUriType.ResultExpectedOutput };\n\t\t\t\tcase TestUriParts.Messages:\n\t\t\t}\n\t\t}\n\t}\n\n\tif (request[0] === TestUriParts.AllOutput) {\n\t\tconst testExtId = uri.query;\n\t\tconst taskIndex = Number(request[1]);\n\t\treturn testExtId\n\t\t\t? { resultId, taskIndex, testExtId, type: TestUriType.TestOutput }\n\t\t\t: { resultId, taskIndex, type: TestUriType.TaskOutput };\n\t}\n\n\treturn undefined;\n};\n\nexport const buildTestUri = (parsed: ParsedTestUri): URI => {\n\tconst uriParts = {\n\t\tscheme: TEST_DATA_SCHEME,\n\t\tauthority: TestUriParts.Results\n\t};\n\n\tif (parsed.type === TestUriType.TaskOutput) {\n\t\treturn URI.from({\n\t\t\t...uriParts,\n\t\t\tpath: ['', parsed.resultId, TestUriParts.AllOutput, parsed.taskIndex].join('/'),\n\t\t});\n\t}\n\n\tconst msgRef = (resultId: string, ...remaining: (string | number)[]) =>\n\t\tURI.from({\n\t\t\t...uriParts,\n\t\t\tquery: parsed.testExtId,\n\t\t\tpath: ['', resultId, TestUriParts.Messages, ...remaining].join('/'),\n\t\t});\n\n\tswitch (parsed.type) {\n\t\tcase TestUriType.ResultActualOutput:\n\t\t\treturn msgRef(parsed.resultId, parsed.taskIndex, parsed.messageIndex, TestUriParts.ActualOutput);\n\t\tcase TestUriType.ResultExpectedOutput:\n\t\t\treturn msgRef(parsed.resultId, parsed.taskIndex, parsed.messageIndex, TestUriParts.ExpectedOutput);\n\t\tcase TestUriType.ResultMessage:\n\t\t\treturn msgRef(parsed.resultId, parsed.taskIndex, parsed.messageIndex, TestUriParts.Text);\n\t\tcase TestUriType.TestOutput:\n\t\t\treturn URI.from({\n\t\t\t\t...uriParts,\n\t\t\t\tquery: parsed.testExtId,\n\t\t\t\tpath: ['', parsed.resultId, TestUriParts.AllOutput, parsed.taskIndex].join('/'),\n\t\t\t});\n\t\tdefault:\n\t\t\tassertNever(parsed, 'Invalid test uri');\n\t}\n};\n"],
  "mappings": ";;AAKA,SAAS,mBAAmB;AAC5B,SAAS,WAAW;AAEb,MAAM,mBAAmB;AAEzB,IAAW,cAAX,kBAAWA,iBAAX;AAEN,EAAAA,0BAAA;AAEA,EAAAA,0BAAA;AAEA,EAAAA,0BAAA;AAEA,EAAAA,0BAAA;AAEA,EAAAA,0BAAA;AAViB,SAAAA;AAAA,GAAA;AA6ClB,IAAW,eAAX,kBAAWC,kBAAX;AACC,EAAAA,cAAA,aAAU;AAEV,EAAAA,cAAA,eAAY;AACZ,EAAAA,cAAA,cAAW;AACX,EAAAA,cAAA,UAAO;AACP,EAAAA,cAAA,kBAAe;AACf,EAAAA,cAAA,oBAAiB;AAPP,SAAAA;AAAA,GAAA;AAUJ,MAAM,eAAe,wBAAC,QAAwC;AACpE,QAAM,OAAO,IAAI;AACjB,QAAM,CAAC,UAAU,GAAG,OAAO,IAAI,IAAI,KAAK,MAAM,CAAC,EAAE,MAAM,GAAG;AAE1D,MAAI,QAAQ,CAAC,MAAM,0BAAuB;AACzC,UAAM,YAAY,OAAO,QAAQ,CAAC,CAAC;AACnC,UAAM,YAAY,IAAI;AACtB,UAAM,QAAQ,OAAO,QAAQ,CAAC,CAAC;AAC/B,UAAM,OAAO,QAAQ,CAAC;AACtB,QAAI,SAAS,yBAAsB;AAClC,cAAQ,MAAM;AAAA,QACb,KAAK;AACJ,iBAAO,EAAE,UAAU,WAAW,WAAW,cAAc,OAAO,MAAM,sBAA0B;AAAA,QAC/F,KAAK;AACJ,iBAAO,EAAE,UAAU,WAAW,WAAW,cAAc,OAAO,MAAM,2BAA+B;AAAA,QACpG,KAAK;AACJ,iBAAO,EAAE,UAAU,WAAW,WAAW,cAAc,OAAO,MAAM,6BAAiC;AAAA,QACtG,KAAK;AAAA,MACN;AAAA,IACD;AAAA,EACD;AAEA,MAAI,QAAQ,CAAC,MAAM,0BAAwB;AAC1C,UAAM,YAAY,IAAI;AACtB,UAAM,YAAY,OAAO,QAAQ,CAAC,CAAC;AACnC,WAAO,YACJ,EAAE,UAAU,WAAW,WAAW,MAAM,mBAAuB,IAC/D,EAAE,UAAU,WAAW,MAAM,mBAAuB;AAAA,EACxD;AAEA,SAAO;AACR,GA/B4B;AAiCrB,MAAM,eAAe,wBAAC,WAA+B;AAC3D,QAAM,WAAW;AAAA,IAChB,QAAQ;AAAA,IACR,WAAW;AAAA,EACZ;AAEA,MAAI,OAAO,SAAS,oBAAwB;AAC3C,WAAO,IAAI,KAAK;AAAA,MACf,GAAG;AAAA,MACH,MAAM,CAAC,IAAI,OAAO,UAAU,0BAAwB,OAAO,SAAS,EAAE,KAAK,GAAG;AAAA,IAC/E,CAAC;AAAA,EACF;AAEA,QAAM,SAAS,wBAAC,aAAqB,cACpC,IAAI,KAAK;AAAA,IACR,GAAG;AAAA,IACH,OAAO,OAAO;AAAA,IACd,MAAM,CAAC,IAAI,UAAU,0BAAuB,GAAG,SAAS,EAAE,KAAK,GAAG;AAAA,EACnE,CAAC,GALa;AAOf,UAAQ,OAAO,MAAM;AAAA,IACpB,KAAK;AACJ,aAAO,OAAO,OAAO,UAAU,OAAO,WAAW,OAAO,cAAc,iCAAyB;AAAA,IAChG,KAAK;AACJ,aAAO,OAAO,OAAO,UAAU,OAAO,WAAW,OAAO,cAAc,qCAA2B;AAAA,IAClG,KAAK;AACJ,aAAO,OAAO,OAAO,UAAU,OAAO,WAAW,OAAO,cAAc,+BAAiB;AAAA,IACxF,KAAK;AACJ,aAAO,IAAI,KAAK;AAAA,QACf,GAAG;AAAA,QACH,OAAO,OAAO;AAAA,QACd,MAAM,CAAC,IAAI,OAAO,UAAU,0BAAwB,OAAO,SAAS,EAAE,KAAK,GAAG;AAAA,MAC/E,CAAC;AAAA,IACF;AACC,kBAAY,QAAQ,kBAAkB;AAAA,EACxC;AACD,GApC4B;",
  "names": ["TestUriType", "TestUriParts"]
}
