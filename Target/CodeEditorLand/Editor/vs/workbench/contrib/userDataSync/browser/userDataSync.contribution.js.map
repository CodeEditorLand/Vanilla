{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/userDataSync/browser/userDataSync.contribution.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IWorkbenchContributionsRegistry, Extensions as WorkbenchExtensions, IWorkbenchContribution } from '../../../common/contributions.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { LifecyclePhase } from '../../../services/lifecycle/common/lifecycle.js';\nimport { UserDataSyncWorkbenchContribution } from './userDataSync.js';\nimport { IUserDataAutoSyncService, UserDataSyncError, UserDataSyncErrorCode } from '../../../../platform/userDataSync/common/userDataSync.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { localize } from '../../../../nls.js';\nimport { isWeb } from '../../../../base/common/platform.js';\nimport { UserDataSyncTrigger } from './userDataSyncTrigger.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IHostService } from '../../../services/host/browser/host.js';\nimport { SHOW_SYNC_LOG_COMMAND_ID } from '../../../services/userDataSync/common/userDataSync.js';\n\nclass UserDataSyncReportIssueContribution extends Disposable implements IWorkbenchContribution {\n\n\tconstructor(\n\t\t@IUserDataAutoSyncService userDataAutoSyncService: IUserDataAutoSyncService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IHostService private readonly hostService: IHostService,\n\t) {\n\t\tsuper();\n\t\tthis._register(userDataAutoSyncService.onError(error => this.onAutoSyncError(error)));\n\t}\n\n\tprivate onAutoSyncError(error: UserDataSyncError): void {\n\t\tswitch (error.code) {\n\t\t\tcase UserDataSyncErrorCode.LocalTooManyRequests: {\n\t\t\t\tconst message = isWeb ? localize({ key: 'local too many requests - reload', comment: ['Settings Sync is the name of the feature'] }, \"Settings sync is suspended temporarily because the current device is making too many requests. Please reload {0} to resume.\", this.productService.nameLong)\n\t\t\t\t\t: localize({ key: 'local too many requests - restart', comment: ['Settings Sync is the name of the feature'] }, \"Settings sync is suspended temporarily because the current device is making too many requests. Please restart {0} to resume.\", this.productService.nameLong);\n\t\t\t\tthis.notificationService.notify({\n\t\t\t\t\tseverity: Severity.Error,\n\t\t\t\t\tmessage,\n\t\t\t\t\tactions: {\n\t\t\t\t\t\tprimary: [\n\t\t\t\t\t\t\tnew Action('Show Sync Logs', localize('show sync logs', \"Show Log\"), undefined, true, () => this.commandService.executeCommand(SHOW_SYNC_LOG_COMMAND_ID)),\n\t\t\t\t\t\t\tnew Action('Restart', isWeb ? localize('reload', \"Reload\") : localize('restart', \"Restart\"), undefined, true, () => this.hostService.restart())\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcase UserDataSyncErrorCode.TooManyRequests: {\n\t\t\t\tconst operationId = error.operationId ? localize('operationId', \"Operation Id: {0}\", error.operationId) : undefined;\n\t\t\t\tconst message = localize({ key: 'server too many requests', comment: ['Settings Sync is the name of the feature'] }, \"Settings sync is disabled because the current device is making too many requests. Please wait for 10 minutes and turn on sync.\");\n\t\t\t\tthis.notificationService.notify({\n\t\t\t\t\tseverity: Severity.Error,\n\t\t\t\t\tmessage: operationId ? `${message} ${operationId}` : message,\n\t\t\t\t\tsource: error.operationId ? localize('settings sync', \"Settings Sync. Operation Id: {0}\", error.operationId) : undefined,\n\t\t\t\t\tactions: {\n\t\t\t\t\t\tprimary: [\n\t\t\t\t\t\t\tnew Action('Show Sync Logs', localize('show sync logs', \"Show Log\"), undefined, true, () => this.commandService.executeCommand(SHOW_SYNC_LOG_COMMAND_ID)),\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n}\n\nconst workbenchRegistry = Registry.as<IWorkbenchContributionsRegistry>(WorkbenchExtensions.Workbench);\nworkbenchRegistry.registerWorkbenchContribution(UserDataSyncWorkbenchContribution, LifecyclePhase.Restored);\nworkbenchRegistry.registerWorkbenchContribution(UserDataSyncTrigger, LifecyclePhase.Eventually);\nworkbenchRegistry.registerWorkbenchContribution(UserDataSyncReportIssueContribution, LifecyclePhase.Eventually);\n"],
  "mappings": ";;;;;;;;;;;;AAKA,SAAS,iCAAiC,cAAc,qBAAqB,8BAA8B;AAC3G,SAAS,gBAAgB;AACzB,SAAS,sBAAsB;AAC/B,SAAS,yCAAyC;AAClD,SAAS,0BAA0B,mBAAmB,6BAA6B;AACnF,SAAS,sBAAsB,gBAAgB;AAC/C,SAAS,kBAAkB;AAC3B,SAAS,gBAAgB;AACzB,SAAS,aAAa;AACtB,SAAS,2BAA2B;AACpC,SAAS,cAAc;AACvB,SAAS,uBAAuB;AAChC,SAAS,uBAAuB;AAChC,SAAS,oBAAoB;AAC7B,SAAS,gCAAgC;AAEzC,IAAM,sCAAN,cAAkD,WAA6C;AAAA,EAE9F,YAC2B,yBACa,qBACL,gBACA,gBACH,aAC9B;AACD,UAAM;AALiC;AACL;AACA;AACH;AAG/B,SAAK,UAAU,wBAAwB,QAAQ,WAAS,KAAK,gBAAgB,KAAK,CAAC,CAAC;AAAA,EACrF;AAAA,EAhCD,OAqB+F;AAAA;AAAA;AAAA,EAatF,gBAAgB,OAAgC;AACvD,YAAQ,MAAM,MAAM;AAAA,MACnB,KAAK,sBAAsB,sBAAsB;AAChD,cAAM,UAAU,QAAQ,SAAS,EAAE,KAAK,oCAAoC,SAAS,CAAC,0CAA0C,EAAE,GAAG,+HAA+H,KAAK,eAAe,QAAQ,IAC7R,SAAS,EAAE,KAAK,qCAAqC,SAAS,CAAC,0CAA0C,EAAE,GAAG,gIAAgI,KAAK,eAAe,QAAQ;AAC7Q,aAAK,oBAAoB,OAAO;AAAA,UAC/B,UAAU,SAAS;AAAA,UACnB;AAAA,UACA,SAAS;AAAA,YACR,SAAS;AAAA,cACR,IAAI,OAAO,kBAAkB,SAAS,kBAAkB,UAAU,GAAG,QAAW,MAAM,MAAM,KAAK,eAAe,eAAe,wBAAwB,CAAC;AAAA,cACxJ,IAAI,OAAO,WAAW,QAAQ,SAAS,UAAU,QAAQ,IAAI,SAAS,WAAW,SAAS,GAAG,QAAW,MAAM,MAAM,KAAK,YAAY,QAAQ,CAAC;AAAA,YAC/I;AAAA,UACD;AAAA,QACD,CAAC;AACD;AAAA,MACD;AAAA,MACA,KAAK,sBAAsB,iBAAiB;AAC3C,cAAM,cAAc,MAAM,cAAc,SAAS,eAAe,qBAAqB,MAAM,WAAW,IAAI;AAC1G,cAAM,UAAU,SAAS,EAAE,KAAK,4BAA4B,SAAS,CAAC,0CAA0C,EAAE,GAAG,gIAAgI;AACrP,aAAK,oBAAoB,OAAO;AAAA,UAC/B,UAAU,SAAS;AAAA,UACnB,SAAS,cAAc,GAAG,OAAO,IAAI,WAAW,KAAK;AAAA,UACrD,QAAQ,MAAM,cAAc,SAAS,iBAAiB,oCAAoC,MAAM,WAAW,IAAI;AAAA,UAC/G,SAAS;AAAA,YACR,SAAS;AAAA,cACR,IAAI,OAAO,kBAAkB,SAAS,kBAAkB,UAAU,GAAG,QAAW,MAAM,MAAM,KAAK,eAAe,eAAe,wBAAwB,CAAC;AAAA,YACzJ;AAAA,UACD;AAAA,QACD,CAAC;AACD;AAAA,MACD;AAAA,IACD;AAAA,EACD;AACD;AA/CM,sCAAN;AAAA,EAGG;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,GAPG;AAiDN,MAAM,oBAAoB,SAAS,GAAoC,oBAAoB,SAAS;AACpG,kBAAkB,8BAA8B,mCAAmC,eAAe,QAAQ;AAC1G,kBAAkB,8BAA8B,qBAAqB,eAAe,UAAU;AAC9F,kBAAkB,8BAA8B,qCAAqC,eAAe,UAAU;",
  "names": []
}
