{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/replNotebook/browser/replEditor.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport \"./media/interactive.css\";\nimport * as DOM from \"../../../../base/browser/dom.js\";\nimport { ToolBar } from \"../../../../base/browser/ui/toolbar/toolbar.js\";\nimport type { IAction } from \"../../../../base/common/actions.js\";\nimport type { CancellationToken } from \"../../../../base/common/cancellation.js\";\nimport { Emitter, type Event } from \"../../../../base/common/event.js\";\nimport {\n\tDisposableStore,\n\tMutableDisposable,\n} from \"../../../../base/common/lifecycle.js\";\nimport { isEqual } from \"../../../../base/common/resources.js\";\nimport { EditorExtensionsRegistry } from \"../../../../editor/browser/editorExtensions.js\";\nimport { ICodeEditorService } from \"../../../../editor/browser/services/codeEditorService.js\";\nimport { CodeEditorWidget } from \"../../../../editor/browser/widget/codeEditor/codeEditorWidget.js\";\nimport type { ICursorPositionChangedEvent } from \"../../../../editor/common/cursorEvents.js\";\nimport type { ICodeEditorViewState } from \"../../../../editor/common/editorCommon.js\";\nimport { ILanguageService } from \"../../../../editor/common/languages/language.js\";\nimport { ITextResourceConfigurationService } from \"../../../../editor/common/services/textResourceConfiguration.js\";\nimport { ContextMenuController } from \"../../../../editor/contrib/contextmenu/browser/contextmenu.js\";\nimport { MarkerController } from \"../../../../editor/contrib/gotoError/browser/gotoError.js\";\nimport { ParameterHintsController } from \"../../../../editor/contrib/parameterHints/browser/parameterHints.js\";\nimport { SnippetController2 } from \"../../../../editor/contrib/snippet/browser/snippetController2.js\";\nimport { SuggestController } from \"../../../../editor/contrib/suggest/browser/suggestController.js\";\nimport {\n\tcreateActionViewItem,\n\tcreateAndFillInActionBarActions,\n} from \"../../../../platform/actions/browser/menuEntryActionViewItem.js\";\nimport {\n\tIMenuService,\n\tMenuId,\n} from \"../../../../platform/actions/common/actions.js\";\nimport { IConfigurationService } from \"../../../../platform/configuration/common/configuration.js\";\nimport { IContextKeyService } from \"../../../../platform/contextkey/common/contextkey.js\";\nimport { IContextMenuService } from \"../../../../platform/contextview/browser/contextView.js\";\nimport {\n\ttype ITextEditorOptions,\n\tTextEditorSelectionSource,\n} from \"../../../../platform/editor/common/editor.js\";\nimport { IInstantiationService } from \"../../../../platform/instantiation/common/instantiation.js\";\nimport { IKeybindingService } from \"../../../../platform/keybinding/common/keybinding.js\";\nimport { IStorageService } from \"../../../../platform/storage/common/storage.js\";\nimport { ITelemetryService } from \"../../../../platform/telemetry/common/telemetry.js\";\nimport { IThemeService } from \"../../../../platform/theme/common/themeService.js\";\nimport { EditorPane } from \"../../../browser/parts/editor/editorPane.js\";\nimport {\n\tEditorPaneSelectionChangeReason,\n\ttype IEditorMemento,\n\ttype IEditorOpenContext,\n\ttype IEditorPaneScrollPosition,\n\ttype IEditorPaneSelectionChangeEvent,\n\ttype IEditorPaneWithScrolling,\n} from \"../../../common/editor.js\";\nimport type { EditorInput } from \"../../../common/editor/editorInput.js\";\nimport {\n\tGroupsOrder,\n\ttype IEditorGroup,\n\tIEditorGroupsService,\n} from \"../../../services/editor/common/editorGroupsService.js\";\nimport { IExtensionService } from \"../../../services/extensions/common/extensions.js\";\nimport { MenuPreventer } from \"../../codeEditor/browser/menuPreventer.js\";\nimport { SelectionClipboardContributionID } from \"../../codeEditor/browser/selectionClipboard.js\";\nimport { getSimpleEditorOptions } from \"../../codeEditor/browser/simpleEditorOptions.js\";\nimport {\n\tINTERACTIVE_INPUT_CURSOR_BOUNDARY,\n\tInteractiveWindowSetting,\n} from \"../../interactive/browser/interactiveCommon.js\";\nimport {\n\tExecutionStateCellStatusBarContrib,\n\tTimerCellStatusBarContrib,\n} from \"../../notebook/browser/contrib/cellStatusBar/executionStatusBarItemController.js\";\nimport { NotebookFindContrib } from \"../../notebook/browser/contrib/find/notebookFindWidget.js\";\nimport type {\n\tICellViewModel,\n\tINotebookEditorOptions,\n\tINotebookEditorViewState,\n} from \"../../notebook/browser/notebookBrowser.js\";\nimport { NotebookEditorExtensionsRegistry } from \"../../notebook/browser/notebookEditorExtensions.js\";\nimport type { NotebookEditorWidget } from \"../../notebook/browser/notebookEditorWidget.js\";\nimport { NotebookOptions } from \"../../notebook/browser/notebookOptions.js\";\nimport {\n\ttype IBorrowValue,\n\tINotebookEditorService,\n} from \"../../notebook/browser/services/notebookEditorService.js\";\nimport { REPL_EDITOR_ID } from \"../../notebook/common/notebookCommon.js\";\nimport { NOTEBOOK_KERNEL } from \"../../notebook/common/notebookContextKeys.js\";\nimport {\n\tINotebookExecutionStateService,\n\tNotebookExecutionType,\n} from \"../../notebook/common/notebookExecutionStateService.js\";\nimport { INotebookKernelService } from \"../../notebook/common/notebookKernelService.js\";\nimport { TabCompletionController } from \"../../snippets/browser/tabCompletion.js\";\nimport \"./interactiveEditor.css\";\nimport { deepClone } from \"../../../../base/common/objects.js\";\nimport type { IEditorOptions } from \"../../../../editor/common/config/editorOptions.js\";\nimport { ContentHoverController } from \"../../../../editor/contrib/hover/browser/contentHoverController.js\";\nimport { GlyphHoverController } from \"../../../../editor/contrib/hover/browser/glyphHoverController.js\";\nimport { ServiceCollection } from \"../../../../platform/instantiation/common/serviceCollection.js\";\nimport { ReplInputHintContentWidget } from \"../../interactive/browser/replInputHintContentWidget.js\";\nimport { ReplEditorInput } from \"./replEditorInput.js\";\n\nconst INTERACTIVE_EDITOR_VIEW_STATE_PREFERENCE_KEY =\n\t\"InteractiveEditorViewState\";\n\nconst INPUT_CELL_VERTICAL_PADDING = 8;\nconst INPUT_CELL_HORIZONTAL_PADDING_RIGHT = 10;\nconst INPUT_EDITOR_PADDING = 8;\n\nexport interface InteractiveEditorViewState {\n\treadonly notebook?: INotebookEditorViewState;\n\treadonly input?: ICodeEditorViewState | null;\n}\n\nexport interface InteractiveEditorOptions extends ITextEditorOptions {\n\treadonly viewState?: InteractiveEditorViewState;\n}\n\nexport class ReplEditor extends EditorPane implements IEditorPaneWithScrolling {\n\tprivate _rootElement!: HTMLElement;\n\tprivate _styleElement!: HTMLStyleElement;\n\tprivate _notebookEditorContainer!: HTMLElement;\n\tprivate _notebookWidget: IBorrowValue<NotebookEditorWidget> = {\n\t\tvalue: undefined,\n\t};\n\tprivate _inputCellContainer!: HTMLElement;\n\tprivate _inputFocusIndicator!: HTMLElement;\n\tprivate _inputRunButtonContainer!: HTMLElement;\n\tprivate _inputEditorContainer!: HTMLElement;\n\tprivate _codeEditorWidget!: CodeEditorWidget;\n\tprivate _notebookWidgetService: INotebookEditorService;\n\tprivate _instantiationService: IInstantiationService;\n\tprivate _languageService: ILanguageService;\n\tprivate _contextKeyService: IContextKeyService;\n\tprivate _configurationService: IConfigurationService;\n\tprivate _notebookKernelService: INotebookKernelService;\n\tprivate _keybindingService: IKeybindingService;\n\tprivate _menuService: IMenuService;\n\tprivate _contextMenuService: IContextMenuService;\n\tprivate _editorGroupService: IEditorGroupsService;\n\tprivate _extensionService: IExtensionService;\n\tprivate readonly _widgetDisposableStore: DisposableStore = this._register(\n\t\tnew DisposableStore(),\n\t);\n\tprivate _lastLayoutDimensions?: {\n\t\treadonly dimension: DOM.Dimension;\n\t\treadonly position: DOM.IDomPosition;\n\t};\n\tprivate _editorOptions: IEditorOptions;\n\tprivate _notebookOptions: NotebookOptions;\n\tprivate _editorMemento: IEditorMemento<InteractiveEditorViewState>;\n\tprivate readonly _groupListener = this._register(new MutableDisposable());\n\tprivate _runbuttonToolbar: ToolBar | undefined;\n\tprivate _hintElement: ReplInputHintContentWidget | undefined;\n\n\tprivate _onDidFocusWidget = this._register(new Emitter<void>());\n\toverride get onDidFocus(): Event<void> {\n\t\treturn this._onDidFocusWidget.event;\n\t}\n\tprivate _onDidChangeSelection = this._register(\n\t\tnew Emitter<IEditorPaneSelectionChangeEvent>(),\n\t);\n\treadonly onDidChangeSelection = this._onDidChangeSelection.event;\n\tprivate _onDidChangeScroll = this._register(new Emitter<void>());\n\treadonly onDidChangeScroll = this._onDidChangeScroll.event;\n\n\tconstructor(\n\t\tgroup: IEditorGroup,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@INotebookEditorService notebookWidgetService: INotebookEditorService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@INotebookKernelService notebookKernelService: INotebookKernelService,\n\t\t@ILanguageService languageService: ILanguageService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IEditorGroupsService editorGroupService: IEditorGroupsService,\n\t\t@ITextResourceConfigurationService\n\t\ttextResourceConfigurationService: ITextResourceConfigurationService,\n\t\t@INotebookExecutionStateService\n\t\tnotebookExecutionStateService: INotebookExecutionStateService,\n\t\t@IExtensionService extensionService: IExtensionService,\n\t) {\n\t\tsuper(\n\t\t\tREPL_EDITOR_ID,\n\t\t\tgroup,\n\t\t\ttelemetryService,\n\t\t\tthemeService,\n\t\t\tstorageService,\n\t\t);\n\t\tthis._notebookWidgetService = notebookWidgetService;\n\t\tthis._configurationService = configurationService;\n\t\tthis._notebookKernelService = notebookKernelService;\n\t\tthis._languageService = languageService;\n\t\tthis._keybindingService = keybindingService;\n\t\tthis._menuService = menuService;\n\t\tthis._contextMenuService = contextMenuService;\n\t\tthis._editorGroupService = editorGroupService;\n\t\tthis._extensionService = extensionService;\n\n\t\tthis._rootElement = DOM.$(\".interactive-editor\");\n\t\tthis._contextKeyService = this._register(\n\t\t\tcontextKeyService.createScoped(this._rootElement),\n\t\t);\n\t\tthis._contextKeyService.createKey(\"isCompositeNotebook\", true);\n\t\tthis._instantiationService = this._register(\n\t\t\tinstantiationService.createChild(\n\t\t\t\tnew ServiceCollection([\n\t\t\t\t\tIContextKeyService,\n\t\t\t\t\tthis._contextKeyService,\n\t\t\t\t]),\n\t\t\t),\n\t\t);\n\n\t\tthis._editorOptions = this._computeEditorOptions();\n\t\tthis._register(\n\t\t\tthis._configurationService.onDidChangeConfiguration((e) => {\n\t\t\t\tif (\n\t\t\t\t\te.affectsConfiguration(\"editor\") ||\n\t\t\t\t\te.affectsConfiguration(\"notebook\")\n\t\t\t\t) {\n\t\t\t\t\tthis._editorOptions = this._computeEditorOptions();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t\tthis._notebookOptions = instantiationService.createInstance(\n\t\t\tNotebookOptions,\n\t\t\tthis.window,\n\t\t\ttrue,\n\t\t\t{\n\t\t\t\tcellToolbarInteraction: \"hover\",\n\t\t\t\tglobalToolbar: true,\n\t\t\t\tstickyScrollEnabled: false,\n\t\t\t\tdragAndDropEnabled: false,\n\t\t\t},\n\t\t);\n\t\tthis._editorMemento = this.getEditorMemento<InteractiveEditorViewState>(\n\t\t\teditorGroupService,\n\t\t\ttextResourceConfigurationService,\n\t\t\tINTERACTIVE_EDITOR_VIEW_STATE_PREFERENCE_KEY,\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis._keybindingService.onDidUpdateKeybindings(\n\t\t\t\tthis._updateInputHint,\n\t\t\t\tthis,\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tnotebookExecutionStateService.onDidChangeExecution((e) => {\n\t\t\t\tif (\n\t\t\t\t\te.type === NotebookExecutionType.cell &&\n\t\t\t\t\tisEqual(\n\t\t\t\t\t\te.notebook,\n\t\t\t\t\t\tthis._notebookWidget.value?.viewModel?.notebookDocument\n\t\t\t\t\t\t\t.uri,\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tconst cell = this._notebookWidget.value?.getCellByHandle(\n\t\t\t\t\t\te.cellHandle,\n\t\t\t\t\t);\n\t\t\t\t\tif (cell && e.changed?.state) {\n\t\t\t\t\t\tthis._scrollIfNecessary(cell);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t}\n\n\tprivate get inputCellContainerHeight() {\n\t\treturn (\n\t\t\t19 + 2 + INPUT_CELL_VERTICAL_PADDING * 2 + INPUT_EDITOR_PADDING * 2\n\t\t);\n\t}\n\n\tprivate get inputCellEditorHeight() {\n\t\treturn 19 + INPUT_EDITOR_PADDING * 2;\n\t}\n\n\tprotected createEditor(parent: HTMLElement): void {\n\t\tDOM.append(parent, this._rootElement);\n\t\tthis._rootElement.style.position = \"relative\";\n\t\tthis._notebookEditorContainer = DOM.append(\n\t\t\tthis._rootElement,\n\t\t\tDOM.$(\".notebook-editor-container\"),\n\t\t);\n\t\tthis._inputCellContainer = DOM.append(\n\t\t\tthis._rootElement,\n\t\t\tDOM.$(\".input-cell-container\"),\n\t\t);\n\t\tthis._inputCellContainer.style.position = \"absolute\";\n\t\tthis._inputCellContainer.style.height = `${this.inputCellContainerHeight}px`;\n\t\tthis._inputFocusIndicator = DOM.append(\n\t\t\tthis._inputCellContainer,\n\t\t\tDOM.$(\".input-focus-indicator\"),\n\t\t);\n\t\tthis._inputRunButtonContainer = DOM.append(\n\t\t\tthis._inputCellContainer,\n\t\t\tDOM.$(\".run-button-container\"),\n\t\t);\n\t\tthis._setupRunButtonToolbar(this._inputRunButtonContainer);\n\t\tthis._inputEditorContainer = DOM.append(\n\t\t\tthis._inputCellContainer,\n\t\t\tDOM.$(\".input-editor-container\"),\n\t\t);\n\t\tthis._createLayoutStyles();\n\t}\n\n\tprivate _setupRunButtonToolbar(runButtonContainer: HTMLElement) {\n\t\tconst menu = this._register(\n\t\t\tthis._menuService.createMenu(\n\t\t\t\tMenuId.ReplInputExecute,\n\t\t\t\tthis._contextKeyService,\n\t\t\t),\n\t\t);\n\t\tthis._runbuttonToolbar = this._register(\n\t\t\tnew ToolBar(runButtonContainer, this._contextMenuService, {\n\t\t\t\tgetKeyBinding: (action) =>\n\t\t\t\t\tthis._keybindingService.lookupKeybinding(action.id),\n\t\t\t\tactionViewItemProvider: (action, options) => {\n\t\t\t\t\treturn createActionViewItem(\n\t\t\t\t\t\tthis._instantiationService,\n\t\t\t\t\t\taction,\n\t\t\t\t\t\toptions,\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\trenderDropdownAsChildElement: true,\n\t\t\t}),\n\t\t);\n\n\t\tconst primary: IAction[] = [];\n\t\tconst secondary: IAction[] = [];\n\t\tconst result = { primary, secondary };\n\n\t\tcreateAndFillInActionBarActions(\n\t\t\tmenu,\n\t\t\t{ shouldForwardArgs: true },\n\t\t\tresult,\n\t\t);\n\t\tthis._runbuttonToolbar.setActions([...primary, ...secondary]);\n\t}\n\n\tprivate _createLayoutStyles(): void {\n\t\tthis._styleElement = DOM.createStyleSheet(this._rootElement);\n\t\tconst styleSheets: string[] = [];\n\n\t\tconst { codeCellLeftMargin, cellRunGutter } =\n\t\t\tthis._notebookOptions.getLayoutConfiguration();\n\t\tconst { focusIndicator } = this._notebookOptions.getDisplayOptions();\n\t\tconst leftMargin =\n\t\t\tthis._notebookOptions.getCellEditorContainerLeftMargin();\n\n\t\tstyleSheets.push(`\n\t\t\t.interactive-editor .input-cell-container {\n\t\t\t\tpadding: ${INPUT_CELL_VERTICAL_PADDING}px ${INPUT_CELL_HORIZONTAL_PADDING_RIGHT}px ${INPUT_CELL_VERTICAL_PADDING}px ${leftMargin}px;\n\t\t\t}\n\t\t`);\n\t\tif (focusIndicator === \"gutter\") {\n\t\t\tstyleSheets.push(`\n\t\t\t\t.interactive-editor .input-cell-container:focus-within .input-focus-indicator::before {\n\t\t\t\t\tborder-color: var(--vscode-notebook-focusedCellBorder) !important;\n\t\t\t\t}\n\t\t\t\t.interactive-editor .input-focus-indicator::before {\n\t\t\t\t\tborder-color: var(--vscode-notebook-inactiveFocusedCellBorder) !important;\n\t\t\t\t}\n\t\t\t\t.interactive-editor .input-cell-container .input-focus-indicator {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\ttop: ${INPUT_CELL_VERTICAL_PADDING}px;\n\t\t\t\t}\n\t\t\t\t.interactive-editor .input-cell-container {\n\t\t\t\t\tborder-top: 1px solid var(--vscode-notebook-inactiveFocusedCellBorder);\n\t\t\t\t}\n\t\t\t`);\n\t\t} else {\n\t\t\t// border\n\t\t\tstyleSheets.push(`\n\t\t\t\t.interactive-editor .input-cell-container {\n\t\t\t\t\tborder-top: 1px solid var(--vscode-notebook-inactiveFocusedCellBorder);\n\t\t\t\t}\n\t\t\t\t.interactive-editor .input-cell-container .input-focus-indicator {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\t\t\t`);\n\t\t}\n\n\t\tstyleSheets.push(`\n\t\t\t.interactive-editor .input-cell-container .run-button-container {\n\t\t\t\twidth: ${cellRunGutter}px;\n\t\t\t\tleft: ${codeCellLeftMargin}px;\n\t\t\t\tmargin-top: ${INPUT_EDITOR_PADDING - 2}px;\n\t\t\t}\n\t\t`);\n\n\t\tthis._styleElement.textContent = styleSheets.join(\"\\n\");\n\t}\n\n\tprivate _computeEditorOptions(): IEditorOptions {\n\t\tlet overrideIdentifier: string | undefined;\n\t\tif (this._codeEditorWidget) {\n\t\t\toverrideIdentifier = this._codeEditorWidget\n\t\t\t\t.getModel()\n\t\t\t\t?.getLanguageId();\n\t\t}\n\t\tconst editorOptions = deepClone(\n\t\t\tthis._configurationService.getValue<IEditorOptions>(\"editor\", {\n\t\t\t\toverrideIdentifier,\n\t\t\t}),\n\t\t);\n\t\tconst editorOptionsOverride = getSimpleEditorOptions(\n\t\t\tthis._configurationService,\n\t\t);\n\t\tconst computed = Object.freeze({\n\t\t\t...editorOptions,\n\t\t\t...editorOptionsOverride,\n\t\t\t...{\n\t\t\t\tglyphMargin: true,\n\t\t\t\tpadding: {\n\t\t\t\t\ttop: INPUT_EDITOR_PADDING,\n\t\t\t\t\tbottom: INPUT_EDITOR_PADDING,\n\t\t\t\t},\n\t\t\t\thover: {\n\t\t\t\t\tenabled: true,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\treturn computed;\n\t}\n\n\tprotected override saveState(): void {\n\t\tthis._saveEditorViewState(this.input);\n\t\tsuper.saveState();\n\t}\n\n\toverride getViewState(): InteractiveEditorViewState | undefined {\n\t\tconst input = this.input;\n\t\tif (!(input instanceof ReplEditorInput)) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tthis._saveEditorViewState(input);\n\t\treturn this._loadNotebookEditorViewState(input);\n\t}\n\n\tprivate _saveEditorViewState(input: EditorInput | undefined): void {\n\t\tif (this._notebookWidget.value && input instanceof ReplEditorInput) {\n\t\t\tif (this._notebookWidget.value.isDisposed) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst state = this._notebookWidget.value.getEditorViewState();\n\t\t\tconst editorState = this._codeEditorWidget.saveViewState();\n\t\t\tthis._editorMemento.saveEditorState(this.group, input.resource, {\n\t\t\t\tnotebook: state,\n\t\t\t\tinput: editorState,\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate _loadNotebookEditorViewState(\n\t\tinput: ReplEditorInput,\n\t): InteractiveEditorViewState | undefined {\n\t\tconst result = this._editorMemento.loadEditorState(\n\t\t\tthis.group,\n\t\t\tinput.resource,\n\t\t);\n\t\tif (result) {\n\t\t\treturn result;\n\t\t}\n\t\t// when we don't have a view state for the group/input-tuple then we try to use an existing\n\t\t// editor for the same resource.\n\t\tfor (const group of this._editorGroupService.getGroups(\n\t\t\tGroupsOrder.MOST_RECENTLY_ACTIVE,\n\t\t)) {\n\t\t\tif (\n\t\t\t\tgroup.activeEditorPane !== this &&\n\t\t\t\tgroup.activeEditorPane === this &&\n\t\t\t\tgroup.activeEditor?.matches(input)\n\t\t\t) {\n\t\t\t\tconst notebook =\n\t\t\t\t\tthis._notebookWidget.value?.getEditorViewState();\n\t\t\t\tconst input = this._codeEditorWidget.saveViewState();\n\t\t\t\treturn {\n\t\t\t\t\tnotebook,\n\t\t\t\t\tinput,\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\toverride async setInput(\n\t\tinput: ReplEditorInput,\n\t\toptions: InteractiveEditorOptions | undefined,\n\t\tcontext: IEditorOpenContext,\n\t\ttoken: CancellationToken,\n\t): Promise<void> {\n\t\t// there currently is a widget which we still own so\n\t\t// we need to hide it before getting a new widget\n\t\tthis._notebookWidget.value?.onWillHide();\n\n\t\tthis._codeEditorWidget?.dispose();\n\n\t\tthis._widgetDisposableStore.clear();\n\n\t\tthis._notebookWidget = <IBorrowValue<NotebookEditorWidget>>(\n\t\t\tthis._instantiationService.invokeFunction(\n\t\t\t\tthis._notebookWidgetService.retrieveWidget,\n\t\t\t\tthis.group.id,\n\t\t\t\tinput,\n\t\t\t\t{\n\t\t\t\t\tisEmbedded: true,\n\t\t\t\t\tisReadOnly: true,\n\t\t\t\t\tforRepl: true,\n\t\t\t\t\tcontributions:\n\t\t\t\t\t\tNotebookEditorExtensionsRegistry.getSomeEditorContributions(\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\tExecutionStateCellStatusBarContrib.id,\n\t\t\t\t\t\t\t\tTimerCellStatusBarContrib.id,\n\t\t\t\t\t\t\t\tNotebookFindContrib.id,\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t),\n\t\t\t\t\tmenuIds: {\n\t\t\t\t\t\tnotebookToolbar: MenuId.InteractiveToolbar,\n\t\t\t\t\t\tcellTitleToolbar: MenuId.InteractiveCellTitle,\n\t\t\t\t\t\tcellDeleteToolbar: MenuId.InteractiveCellDelete,\n\t\t\t\t\t\tcellInsertToolbar: MenuId.NotebookCellBetween,\n\t\t\t\t\t\tcellTopInsertToolbar: MenuId.NotebookCellListTop,\n\t\t\t\t\t\tcellExecuteToolbar: MenuId.InteractiveCellExecute,\n\t\t\t\t\t\tcellExecutePrimary: undefined,\n\t\t\t\t\t},\n\t\t\t\t\tcellEditorContributions:\n\t\t\t\t\t\tEditorExtensionsRegistry.getSomeEditorContributions([\n\t\t\t\t\t\t\tSelectionClipboardContributionID,\n\t\t\t\t\t\t\tContextMenuController.ID,\n\t\t\t\t\t\t\tContentHoverController.ID,\n\t\t\t\t\t\t\tGlyphHoverController.ID,\n\t\t\t\t\t\t\tMarkerController.ID,\n\t\t\t\t\t\t]),\n\t\t\t\t\toptions: this._notebookOptions,\n\t\t\t\t\tcodeWindow: this.window,\n\t\t\t\t},\n\t\t\t\tundefined,\n\t\t\t\tthis.window,\n\t\t\t)\n\t\t);\n\n\t\tthis._codeEditorWidget = this._instantiationService.createInstance(\n\t\t\tCodeEditorWidget,\n\t\t\tthis._inputEditorContainer,\n\t\t\tthis._editorOptions,\n\t\t\t{\n\t\t\t\t...{\n\t\t\t\t\tisSimpleWidget: false,\n\t\t\t\t\tcontributions:\n\t\t\t\t\t\tEditorExtensionsRegistry.getSomeEditorContributions([\n\t\t\t\t\t\t\tMenuPreventer.ID,\n\t\t\t\t\t\t\tSelectionClipboardContributionID,\n\t\t\t\t\t\t\tContextMenuController.ID,\n\t\t\t\t\t\t\tSuggestController.ID,\n\t\t\t\t\t\t\tParameterHintsController.ID,\n\t\t\t\t\t\t\tSnippetController2.ID,\n\t\t\t\t\t\t\tTabCompletionController.ID,\n\t\t\t\t\t\t\tContentHoverController.ID,\n\t\t\t\t\t\t\tGlyphHoverController.ID,\n\t\t\t\t\t\t\tMarkerController.ID,\n\t\t\t\t\t\t]),\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\n\t\tif (this._lastLayoutDimensions) {\n\t\t\tthis._notebookEditorContainer.style.height = `${this._lastLayoutDimensions.dimension.height - this.inputCellContainerHeight}px`;\n\t\t\tthis._notebookWidget.value!.layout(\n\t\t\t\tnew DOM.Dimension(\n\t\t\t\t\tthis._lastLayoutDimensions.dimension.width,\n\t\t\t\t\tthis._lastLayoutDimensions.dimension.height -\n\t\t\t\t\t\tthis.inputCellContainerHeight,\n\t\t\t\t),\n\t\t\t\tthis._notebookEditorContainer,\n\t\t\t);\n\t\t\tconst leftMargin =\n\t\t\t\tthis._notebookOptions.getCellEditorContainerLeftMargin();\n\t\t\tconst maxHeight = Math.min(\n\t\t\t\tthis._lastLayoutDimensions.dimension.height / 2,\n\t\t\t\tthis.inputCellEditorHeight,\n\t\t\t);\n\t\t\tthis._codeEditorWidget.layout(\n\t\t\t\tthis._validateDimension(\n\t\t\t\t\tthis._lastLayoutDimensions.dimension.width -\n\t\t\t\t\t\tleftMargin -\n\t\t\t\t\t\tINPUT_CELL_HORIZONTAL_PADDING_RIGHT,\n\t\t\t\t\tmaxHeight,\n\t\t\t\t),\n\t\t\t);\n\t\t\tthis._inputFocusIndicator.style.height = `${this.inputCellEditorHeight}px`;\n\t\t\tthis._inputCellContainer.style.top = `${this._lastLayoutDimensions.dimension.height - this.inputCellContainerHeight}px`;\n\t\t\tthis._inputCellContainer.style.width = `${this._lastLayoutDimensions.dimension.width}px`;\n\t\t}\n\n\t\tawait super.setInput(input, options, context, token);\n\t\tconst model = await input.resolve();\n\t\tif (this._runbuttonToolbar) {\n\t\t\tthis._runbuttonToolbar.context = input.resource;\n\t\t}\n\n\t\tif (model === null) {\n\t\t\tthrow new Error(\"The REPL model could not be resolved\");\n\t\t}\n\n\t\tthis._notebookWidget.value?.setParentContextKeyService(\n\t\t\tthis._contextKeyService,\n\t\t);\n\n\t\tconst viewState =\n\t\t\toptions?.viewState ?? this._loadNotebookEditorViewState(input);\n\t\tawait this._extensionService.whenInstalledExtensionsRegistered();\n\t\tawait this._notebookWidget.value!.setModel(\n\t\t\tmodel.notebook,\n\t\t\tviewState?.notebook,\n\t\t);\n\t\tmodel.notebook.setCellCollapseDefault(\n\t\t\tthis._notebookOptions.getCellCollapseDefault(),\n\t\t);\n\t\tthis._notebookWidget.value!.setOptions({\n\t\t\tisReadOnly: true,\n\t\t});\n\t\tthis._widgetDisposableStore.add(\n\t\t\tthis._notebookWidget.value!.onDidResizeOutput((cvm) => {\n\t\t\t\tthis._scrollIfNecessary(cvm);\n\t\t\t}),\n\t\t);\n\t\tthis._widgetDisposableStore.add(\n\t\t\tthis._notebookWidget.value!.onDidFocusWidget(() =>\n\t\t\t\tthis._onDidFocusWidget.fire(),\n\t\t\t),\n\t\t);\n\t\tthis._widgetDisposableStore.add(\n\t\t\tthis._notebookOptions.onDidChangeOptions((e) => {\n\t\t\t\tif (e.compactView || e.focusIndicator) {\n\t\t\t\t\t// update the styling\n\t\t\t\t\tthis._styleElement?.remove();\n\t\t\t\t\tthis._createLayoutStyles();\n\t\t\t\t}\n\n\t\t\t\tif (this._lastLayoutDimensions && this.isVisible()) {\n\t\t\t\t\tthis.layout(\n\t\t\t\t\t\tthis._lastLayoutDimensions.dimension,\n\t\t\t\t\t\tthis._lastLayoutDimensions.position,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (e.interactiveWindowCollapseCodeCells) {\n\t\t\t\t\tmodel.notebook.setCellCollapseDefault(\n\t\t\t\t\t\tthis._notebookOptions.getCellCollapseDefault(),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tconst editorModel = await input.resolveInput(model.notebook);\n\t\tthis._codeEditorWidget.setModel(editorModel);\n\t\tif (viewState?.input) {\n\t\t\tthis._codeEditorWidget.restoreViewState(viewState.input);\n\t\t}\n\t\tthis._editorOptions = this._computeEditorOptions();\n\t\tthis._codeEditorWidget.updateOptions(this._editorOptions);\n\n\t\tthis._widgetDisposableStore.add(\n\t\t\tthis._codeEditorWidget.onDidFocusEditorWidget(() =>\n\t\t\t\tthis._onDidFocusWidget.fire(),\n\t\t\t),\n\t\t);\n\t\tthis._widgetDisposableStore.add(\n\t\t\tthis._codeEditorWidget.onDidContentSizeChange((e) => {\n\t\t\t\tif (!e.contentHeightChanged) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (this._lastLayoutDimensions) {\n\t\t\t\t\tthis._layoutWidgets(\n\t\t\t\t\t\tthis._lastLayoutDimensions.dimension,\n\t\t\t\t\t\tthis._lastLayoutDimensions.position,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis._widgetDisposableStore.add(\n\t\t\tthis._codeEditorWidget.onDidChangeCursorPosition((e) =>\n\t\t\t\tthis._onDidChangeSelection.fire({\n\t\t\t\t\treason: this._toEditorPaneSelectionChangeReason(e),\n\t\t\t\t}),\n\t\t\t),\n\t\t);\n\t\tthis._widgetDisposableStore.add(\n\t\t\tthis._codeEditorWidget.onDidChangeModelContent(() =>\n\t\t\t\tthis._onDidChangeSelection.fire({\n\t\t\t\t\treason: EditorPaneSelectionChangeReason.EDIT,\n\t\t\t\t}),\n\t\t\t),\n\t\t);\n\n\t\tthis._widgetDisposableStore.add(\n\t\t\tthis._notebookKernelService.onDidChangeNotebookAffinity(\n\t\t\t\tthis._syncWithKernel,\n\t\t\t\tthis,\n\t\t\t),\n\t\t);\n\t\tthis._widgetDisposableStore.add(\n\t\t\tthis._notebookKernelService.onDidChangeSelectedNotebooks(\n\t\t\t\tthis._syncWithKernel,\n\t\t\t\tthis,\n\t\t\t),\n\t\t);\n\n\t\tthis._widgetDisposableStore.add(\n\t\t\tthis.themeService.onDidColorThemeChange(() => {\n\t\t\t\tif (this.isVisible()) {\n\t\t\t\t\tthis._updateInputHint();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis._widgetDisposableStore.add(\n\t\t\tthis._codeEditorWidget.onDidChangeModelContent(() => {\n\t\t\t\tif (this.isVisible()) {\n\t\t\t\t\tthis._updateInputHint();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tconst cursorAtBoundaryContext =\n\t\t\tINTERACTIVE_INPUT_CURSOR_BOUNDARY.bindTo(this._contextKeyService);\n\t\tif (input.resource && input.historyService.has(input.resource)) {\n\t\t\tcursorAtBoundaryContext.set(\"top\");\n\t\t} else {\n\t\t\tcursorAtBoundaryContext.set(\"none\");\n\t\t}\n\n\t\tthis._widgetDisposableStore.add(\n\t\t\tthis._codeEditorWidget.onDidChangeCursorPosition(({ position }) => {\n\t\t\t\tconst viewModel = this._codeEditorWidget._getViewModel()!;\n\t\t\t\tconst lastLineNumber = viewModel.getLineCount();\n\t\t\t\tconst lastLineCol = viewModel.getLineLength(lastLineNumber) + 1;\n\t\t\t\tconst viewPosition =\n\t\t\t\t\tviewModel.coordinatesConverter.convertModelPositionToViewPosition(\n\t\t\t\t\t\tposition,\n\t\t\t\t\t);\n\t\t\t\tconst firstLine =\n\t\t\t\t\tviewPosition.lineNumber === 1 && viewPosition.column === 1;\n\t\t\t\tconst lastLine =\n\t\t\t\t\tviewPosition.lineNumber === lastLineNumber &&\n\t\t\t\t\tviewPosition.column === lastLineCol;\n\n\t\t\t\tif (firstLine) {\n\t\t\t\t\tif (lastLine) {\n\t\t\t\t\t\tcursorAtBoundaryContext.set(\"both\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcursorAtBoundaryContext.set(\"top\");\n\t\t\t\t\t}\n\t\t\t\t} else if (lastLine) {\n\t\t\t\t\tcursorAtBoundaryContext.set(\"bottom\");\n\t\t\t\t} else {\n\t\t\t\t\tcursorAtBoundaryContext.set(\"none\");\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis._widgetDisposableStore.add(\n\t\t\teditorModel.onDidChangeContent(() => {\n\t\t\t\tconst value = editorModel.getValue();\n\t\t\t\tif (this.input?.resource && value !== \"\") {\n\t\t\t\t\tconst historyService = (this.input as ReplEditorInput)\n\t\t\t\t\t\t.historyService;\n\t\t\t\t\tif (\n\t\t\t\t\t\t!historyService.matchesCurrent(\n\t\t\t\t\t\t\tthis.input.resource,\n\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\thistoryService.replaceLast(this.input.resource, value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis._widgetDisposableStore.add(\n\t\t\tthis._notebookWidget.value!.onDidScroll(() =>\n\t\t\t\tthis._onDidChangeScroll.fire(),\n\t\t\t),\n\t\t);\n\n\t\tthis._updateInputHint();\n\t\tthis._syncWithKernel();\n\t}\n\n\toverride setOptions(options: INotebookEditorOptions | undefined): void {\n\t\tthis._notebookWidget.value?.setOptions(options);\n\t\tsuper.setOptions(options);\n\t}\n\n\tprivate _toEditorPaneSelectionChangeReason(\n\t\te: ICursorPositionChangedEvent,\n\t): EditorPaneSelectionChangeReason {\n\t\tswitch (e.source) {\n\t\t\tcase TextEditorSelectionSource.PROGRAMMATIC:\n\t\t\t\treturn EditorPaneSelectionChangeReason.PROGRAMMATIC;\n\t\t\tcase TextEditorSelectionSource.NAVIGATION:\n\t\t\t\treturn EditorPaneSelectionChangeReason.NAVIGATION;\n\t\t\tcase TextEditorSelectionSource.JUMP:\n\t\t\t\treturn EditorPaneSelectionChangeReason.JUMP;\n\t\t\tdefault:\n\t\t\t\treturn EditorPaneSelectionChangeReason.USER;\n\t\t}\n\t}\n\n\tprivate _cellAtBottom(cell: ICellViewModel): boolean {\n\t\tconst visibleRanges = this._notebookWidget.value?.visibleRanges || [];\n\t\tconst cellIndex = this._notebookWidget.value?.getCellIndex(cell);\n\t\tif (\n\t\t\tcellIndex ===\n\t\t\tMath.max(...visibleRanges.map((range) => range.end - 1))\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate _scrollIfNecessary(cvm: ICellViewModel) {\n\t\tconst index = this._notebookWidget.value!.getCellIndex(cvm);\n\t\tif (index === this._notebookWidget.value!.getLength() - 1) {\n\t\t\t// If we're already at the bottom or auto scroll is enabled, scroll to the bottom\n\t\t\tif (\n\t\t\t\tthis._configurationService.getValue<boolean>(\n\t\t\t\t\tInteractiveWindowSetting.interactiveWindowAlwaysScrollOnNewCell,\n\t\t\t\t) ||\n\t\t\t\tthis._cellAtBottom(cvm)\n\t\t\t) {\n\t\t\t\tthis._notebookWidget.value!.scrollToBottom();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _syncWithKernel() {\n\t\tconst notebook = this._notebookWidget.value?.textModel;\n\t\tconst textModel = this._codeEditorWidget.getModel();\n\n\t\tif (notebook && textModel) {\n\t\t\tconst info =\n\t\t\t\tthis._notebookKernelService.getMatchingKernel(notebook);\n\t\t\tconst selectedOrSuggested =\n\t\t\t\tinfo.selected ??\n\t\t\t\t(info.suggestions.length === 1\n\t\t\t\t\t? info.suggestions[0]\n\t\t\t\t\t: undefined) ??\n\t\t\t\t(info.all.length === 1 ? info.all[0] : undefined);\n\n\t\t\tif (selectedOrSuggested) {\n\t\t\t\tconst language = selectedOrSuggested.supportedLanguages[0];\n\t\t\t\t// All kernels will initially list plaintext as the supported language before they properly initialized.\n\t\t\t\tif (language && language !== \"plaintext\") {\n\t\t\t\t\tconst newMode =\n\t\t\t\t\t\tthis._languageService.createById(language).languageId;\n\t\t\t\t\ttextModel.setLanguage(newMode);\n\t\t\t\t}\n\n\t\t\t\tNOTEBOOK_KERNEL.bindTo(this._contextKeyService).set(\n\t\t\t\t\tselectedOrSuggested.id,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tlayout(dimension: DOM.Dimension, position: DOM.IDomPosition): void {\n\t\tthis._rootElement.classList.toggle(\n\t\t\t\"mid-width\",\n\t\t\tdimension.width < 1000 && dimension.width >= 600,\n\t\t);\n\t\tthis._rootElement.classList.toggle(\n\t\t\t\"narrow-width\",\n\t\t\tdimension.width < 600,\n\t\t);\n\t\tconst editorHeightChanged =\n\t\t\tdimension.height !== this._lastLayoutDimensions?.dimension.height;\n\t\tthis._lastLayoutDimensions = { dimension, position };\n\n\t\tif (!this._notebookWidget.value) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (editorHeightChanged && this._codeEditorWidget) {\n\t\t\tSuggestController.get(\n\t\t\t\tthis._codeEditorWidget,\n\t\t\t)?.cancelSuggestWidget();\n\t\t}\n\n\t\tthis._notebookEditorContainer.style.height = `${this._lastLayoutDimensions.dimension.height - this.inputCellContainerHeight}px`;\n\t\tthis._layoutWidgets(dimension, position);\n\t}\n\n\tprivate _layoutWidgets(\n\t\tdimension: DOM.Dimension,\n\t\tposition: DOM.IDomPosition,\n\t) {\n\t\tconst contentHeight = this._codeEditorWidget.hasModel()\n\t\t\t? this._codeEditorWidget.getContentHeight()\n\t\t\t: this.inputCellEditorHeight;\n\t\tconst maxHeight = Math.min(dimension.height / 2, contentHeight);\n\t\tconst leftMargin =\n\t\t\tthis._notebookOptions.getCellEditorContainerLeftMargin();\n\n\t\tconst inputCellContainerHeight =\n\t\t\tmaxHeight + INPUT_CELL_VERTICAL_PADDING * 2;\n\t\tthis._notebookEditorContainer.style.height = `${dimension.height - inputCellContainerHeight}px`;\n\n\t\tthis._notebookWidget.value!.layout(\n\t\t\tdimension.with(\n\t\t\t\tdimension.width,\n\t\t\t\tdimension.height - inputCellContainerHeight,\n\t\t\t),\n\t\t\tthis._notebookEditorContainer,\n\t\t\tposition,\n\t\t);\n\t\tthis._codeEditorWidget.layout(\n\t\t\tthis._validateDimension(\n\t\t\t\tdimension.width -\n\t\t\t\t\tleftMargin -\n\t\t\t\t\tINPUT_CELL_HORIZONTAL_PADDING_RIGHT,\n\t\t\t\tmaxHeight,\n\t\t\t),\n\t\t);\n\t\tthis._inputFocusIndicator.style.height = `${contentHeight}px`;\n\t\tthis._inputCellContainer.style.top = `${dimension.height - inputCellContainerHeight}px`;\n\t\tthis._inputCellContainer.style.width = `${dimension.width}px`;\n\t}\n\n\tprivate _validateDimension(width: number, height: number) {\n\t\treturn new DOM.Dimension(Math.max(0, width), Math.max(0, height));\n\t}\n\n\tprivate _updateInputHint(): void {\n\t\tif (!this._codeEditorWidget) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst shouldHide =\n\t\t\t!this._codeEditorWidget.hasModel() ||\n\t\t\tthis._configurationService.getValue<boolean>(\n\t\t\t\tInteractiveWindowSetting.showExecutionHint,\n\t\t\t) === false ||\n\t\t\tthis._codeEditorWidget.getModel()!.getValueLength() !== 0;\n\n\t\tif (!this._hintElement && !shouldHide) {\n\t\t\tthis._hintElement = this._instantiationService.createInstance(\n\t\t\t\tReplInputHintContentWidget,\n\t\t\t\tthis._codeEditorWidget,\n\t\t\t);\n\t\t} else if (this._hintElement && shouldHide) {\n\t\t\tthis._hintElement.dispose();\n\t\t\tthis._hintElement = undefined;\n\t\t}\n\t}\n\n\tgetScrollPosition(): IEditorPaneScrollPosition {\n\t\treturn {\n\t\t\tscrollTop: this._notebookWidget.value?.scrollTop ?? 0,\n\t\t\tscrollLeft: 0,\n\t\t};\n\t}\n\n\tsetScrollPosition(position: IEditorPaneScrollPosition): void {\n\t\tthis._notebookWidget.value?.setScrollTop(position.scrollTop);\n\t}\n\n\toverride focus() {\n\t\tsuper.focus();\n\n\t\tthis._notebookWidget.value?.onShow();\n\t\tthis._codeEditorWidget.focus();\n\t}\n\n\tfocusHistory() {\n\t\tthis._notebookWidget.value!.focus();\n\t}\n\n\tprotected override setEditorVisible(visible: boolean): void {\n\t\tsuper.setEditorVisible(visible);\n\t\tthis._groupListener.value = this.group.onWillCloseEditor((e) =>\n\t\t\tthis._saveEditorViewState(e.editor),\n\t\t);\n\n\t\tif (!visible) {\n\t\t\tthis._saveEditorViewState(this.input);\n\t\t\tif (this.input && this._notebookWidget.value) {\n\t\t\t\tthis._notebookWidget.value.onWillHide();\n\t\t\t}\n\t\t}\n\n\t\tthis._updateInputHint();\n\t}\n\n\toverride clearInput() {\n\t\tif (this._notebookWidget.value) {\n\t\t\tthis._saveEditorViewState(this.input);\n\t\t\tthis._notebookWidget.value.onWillHide();\n\t\t}\n\n\t\tthis._codeEditorWidget?.dispose();\n\n\t\tthis._notebookWidget = { value: undefined };\n\t\tthis._widgetDisposableStore.clear();\n\n\t\tsuper.clearInput();\n\t}\n\n\toverride getControl(): {\n\t\tnotebookEditor: NotebookEditorWidget | undefined;\n\t\tcodeEditor: CodeEditorWidget;\n\t} {\n\t\treturn {\n\t\t\tnotebookEditor: this._notebookWidget.value,\n\t\t\tcodeEditor: this._codeEditorWidget,\n\t\t};\n\t}\n}\n"],
  "mappings": "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",
  "names": ["input"]
}
