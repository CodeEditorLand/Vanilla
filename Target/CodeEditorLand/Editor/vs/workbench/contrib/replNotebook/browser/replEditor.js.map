{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/replNotebook/browser/replEditor.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './media/interactive.css';\nimport * as DOM from '../../../../base/browser/dom.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { DisposableStore, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { ICodeEditorService } from '../../../../editor/browser/services/codeEditorService.js';\nimport { CodeEditorWidget } from '../../../../editor/browser/widget/codeEditor/codeEditorWidget.js';\nimport { ICodeEditorViewState } from '../../../../editor/common/editorCommon.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { EditorPane } from '../../../browser/parts/editor/editorPane.js';\nimport { EditorPaneSelectionChangeReason, IEditorMemento, IEditorOpenContext, IEditorPaneScrollPosition, IEditorPaneSelectionChangeEvent, IEditorPaneWithScrolling } from '../../../common/editor.js';\nimport { getSimpleEditorOptions } from '../../codeEditor/browser/simpleEditorOptions.js';\nimport { ICellViewModel, INotebookEditorOptions, INotebookEditorViewState } from '../../notebook/browser/notebookBrowser.js';\nimport { NotebookEditorExtensionsRegistry } from '../../notebook/browser/notebookEditorExtensions.js';\nimport { IBorrowValue, INotebookEditorService } from '../../notebook/browser/services/notebookEditorService.js';\nimport { NotebookEditorWidget } from '../../notebook/browser/notebookEditorWidget.js';\nimport { GroupsOrder, IEditorGroup, IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { ExecutionStateCellStatusBarContrib, TimerCellStatusBarContrib } from '../../notebook/browser/contrib/cellStatusBar/executionStatusBarItemController.js';\nimport { INotebookKernelService } from '../../notebook/common/notebookKernelService.js';\nimport { ILanguageService } from '../../../../editor/common/languages/language.js';\nimport { IMenuService, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { InteractiveWindowSetting, INTERACTIVE_INPUT_CURSOR_BOUNDARY } from '../../interactive/browser/interactiveCommon.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { NotebookOptions } from '../../notebook/browser/notebookOptions.js';\nimport { ToolBar } from '../../../../base/browser/ui/toolbar/toolbar.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { createActionViewItem, createAndFillInActionBarActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IAction } from '../../../../base/common/actions.js';\nimport { EditorExtensionsRegistry } from '../../../../editor/browser/editorExtensions.js';\nimport { ParameterHintsController } from '../../../../editor/contrib/parameterHints/browser/parameterHints.js';\nimport { MenuPreventer } from '../../codeEditor/browser/menuPreventer.js';\nimport { SelectionClipboardContributionID } from '../../codeEditor/browser/selectionClipboard.js';\nimport { ContextMenuController } from '../../../../editor/contrib/contextmenu/browser/contextmenu.js';\nimport { SuggestController } from '../../../../editor/contrib/suggest/browser/suggestController.js';\nimport { SnippetController2 } from '../../../../editor/contrib/snippet/browser/snippetController2.js';\nimport { TabCompletionController } from '../../snippets/browser/tabCompletion.js';\nimport { MarkerController } from '../../../../editor/contrib/gotoError/browser/gotoError.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { ITextResourceConfigurationService } from '../../../../editor/common/services/textResourceConfiguration.js';\nimport { ITextEditorOptions, TextEditorSelectionSource } from '../../../../platform/editor/common/editor.js';\nimport { INotebookExecutionStateService, NotebookExecutionType } from '../../notebook/common/notebookExecutionStateService.js';\nimport { NOTEBOOK_KERNEL } from '../../notebook/common/notebookContextKeys.js';\nimport { ICursorPositionChangedEvent } from '../../../../editor/common/cursorEvents.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { NotebookFindContrib } from '../../notebook/browser/contrib/find/notebookFindWidget.js';\nimport { REPL_EDITOR_ID } from '../../notebook/common/notebookCommon.js';\nimport './interactiveEditor.css';\nimport { IEditorOptions } from '../../../../editor/common/config/editorOptions.js';\nimport { deepClone } from '../../../../base/common/objects.js';\nimport { GlyphHoverController } from '../../../../editor/contrib/hover/browser/glyphHoverController.js';\nimport { ContentHoverController } from '../../../../editor/contrib/hover/browser/contentHoverController.js';\nimport { ReplEditorInput } from './replEditorInput.js';\nimport { ReplInputHintContentWidget } from '../../interactive/browser/replInputHintContentWidget.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\n\nconst INTERACTIVE_EDITOR_VIEW_STATE_PREFERENCE_KEY = 'InteractiveEditorViewState';\n\nconst INPUT_CELL_VERTICAL_PADDING = 8;\nconst INPUT_CELL_HORIZONTAL_PADDING_RIGHT = 10;\nconst INPUT_EDITOR_PADDING = 8;\n\nexport interface InteractiveEditorViewState {\n\treadonly notebook?: INotebookEditorViewState;\n\treadonly input?: ICodeEditorViewState | null;\n}\n\nexport interface InteractiveEditorOptions extends ITextEditorOptions {\n\treadonly viewState?: InteractiveEditorViewState;\n}\n\nexport class ReplEditor extends EditorPane implements IEditorPaneWithScrolling {\n\tprivate _rootElement!: HTMLElement;\n\tprivate _styleElement!: HTMLStyleElement;\n\tprivate _notebookEditorContainer!: HTMLElement;\n\tprivate _notebookWidget: IBorrowValue<NotebookEditorWidget> = { value: undefined };\n\tprivate _inputCellContainer!: HTMLElement;\n\tprivate _inputFocusIndicator!: HTMLElement;\n\tprivate _inputRunButtonContainer!: HTMLElement;\n\tprivate _inputEditorContainer!: HTMLElement;\n\tprivate _codeEditorWidget!: CodeEditorWidget;\n\tprivate _notebookWidgetService: INotebookEditorService;\n\tprivate _instantiationService: IInstantiationService;\n\tprivate _languageService: ILanguageService;\n\tprivate _contextKeyService: IContextKeyService;\n\tprivate _configurationService: IConfigurationService;\n\tprivate _notebookKernelService: INotebookKernelService;\n\tprivate _keybindingService: IKeybindingService;\n\tprivate _menuService: IMenuService;\n\tprivate _contextMenuService: IContextMenuService;\n\tprivate _editorGroupService: IEditorGroupsService;\n\tprivate _extensionService: IExtensionService;\n\tprivate readonly _widgetDisposableStore: DisposableStore = this._register(new DisposableStore());\n\tprivate _lastLayoutDimensions?: { readonly dimension: DOM.Dimension; readonly position: DOM.IDomPosition };\n\tprivate _editorOptions: IEditorOptions;\n\tprivate _notebookOptions: NotebookOptions;\n\tprivate _editorMemento: IEditorMemento<InteractiveEditorViewState>;\n\tprivate readonly _groupListener = this._register(new MutableDisposable());\n\tprivate _runbuttonToolbar: ToolBar | undefined;\n\tprivate _hintElement: ReplInputHintContentWidget | undefined;\n\n\tprivate _onDidFocusWidget = this._register(new Emitter<void>());\n\toverride get onDidFocus(): Event<void> { return this._onDidFocusWidget.event; }\n\tprivate _onDidChangeSelection = this._register(new Emitter<IEditorPaneSelectionChangeEvent>());\n\treadonly onDidChangeSelection = this._onDidChangeSelection.event;\n\tprivate _onDidChangeScroll = this._register(new Emitter<void>());\n\treadonly onDidChangeScroll = this._onDidChangeScroll.event;\n\n\tconstructor(\n\t\tgroup: IEditorGroup,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@INotebookEditorService notebookWidgetService: INotebookEditorService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@INotebookKernelService notebookKernelService: INotebookKernelService,\n\t\t@ILanguageService languageService: ILanguageService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IEditorGroupsService editorGroupService: IEditorGroupsService,\n\t\t@ITextResourceConfigurationService textResourceConfigurationService: ITextResourceConfigurationService,\n\t\t@INotebookExecutionStateService notebookExecutionStateService: INotebookExecutionStateService,\n\t\t@IExtensionService extensionService: IExtensionService,\n\t) {\n\t\tsuper(\n\t\t\tREPL_EDITOR_ID,\n\t\t\tgroup,\n\t\t\ttelemetryService,\n\t\t\tthemeService,\n\t\t\tstorageService\n\t\t);\n\t\tthis._notebookWidgetService = notebookWidgetService;\n\t\tthis._configurationService = configurationService;\n\t\tthis._notebookKernelService = notebookKernelService;\n\t\tthis._languageService = languageService;\n\t\tthis._keybindingService = keybindingService;\n\t\tthis._menuService = menuService;\n\t\tthis._contextMenuService = contextMenuService;\n\t\tthis._editorGroupService = editorGroupService;\n\t\tthis._extensionService = extensionService;\n\n\t\tthis._rootElement = DOM.$('.interactive-editor');\n\t\tthis._contextKeyService = this._register(contextKeyService.createScoped(this._rootElement));\n\t\tthis._contextKeyService.createKey('isCompositeNotebook', true);\n\t\tthis._instantiationService = this._register(instantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService])));\n\n\t\tthis._editorOptions = this._computeEditorOptions();\n\t\tthis._register(this._configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration('editor') || e.affectsConfiguration('notebook')) {\n\t\t\t\tthis._editorOptions = this._computeEditorOptions();\n\t\t\t}\n\t\t}));\n\t\tthis._notebookOptions = instantiationService.createInstance(NotebookOptions, this.window, true, { cellToolbarInteraction: 'hover', globalToolbar: true, stickyScrollEnabled: false, dragAndDropEnabled: false });\n\t\tthis._editorMemento = this.getEditorMemento<InteractiveEditorViewState>(editorGroupService, textResourceConfigurationService, INTERACTIVE_EDITOR_VIEW_STATE_PREFERENCE_KEY);\n\n\t\tthis._register(this._keybindingService.onDidUpdateKeybindings(this._updateInputHint, this));\n\t\tthis._register(notebookExecutionStateService.onDidChangeExecution((e) => {\n\t\t\tif (e.type === NotebookExecutionType.cell && isEqual(e.notebook, this._notebookWidget.value?.viewModel?.notebookDocument.uri)) {\n\t\t\t\tconst cell = this._notebookWidget.value?.getCellByHandle(e.cellHandle);\n\t\t\t\tif (cell && e.changed?.state) {\n\t\t\t\t\tthis._scrollIfNecessary(cell);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate get inputCellContainerHeight() {\n\t\treturn 19 + 2 + INPUT_CELL_VERTICAL_PADDING * 2 + INPUT_EDITOR_PADDING * 2;\n\t}\n\n\tprivate get inputCellEditorHeight() {\n\t\treturn 19 + INPUT_EDITOR_PADDING * 2;\n\t}\n\n\tprotected createEditor(parent: HTMLElement): void {\n\t\tDOM.append(parent, this._rootElement);\n\t\tthis._rootElement.style.position = 'relative';\n\t\tthis._notebookEditorContainer = DOM.append(this._rootElement, DOM.$('.notebook-editor-container'));\n\t\tthis._inputCellContainer = DOM.append(this._rootElement, DOM.$('.input-cell-container'));\n\t\tthis._inputCellContainer.style.position = 'absolute';\n\t\tthis._inputCellContainer.style.height = `${this.inputCellContainerHeight}px`;\n\t\tthis._inputFocusIndicator = DOM.append(this._inputCellContainer, DOM.$('.input-focus-indicator'));\n\t\tthis._inputRunButtonContainer = DOM.append(this._inputCellContainer, DOM.$('.run-button-container'));\n\t\tthis._setupRunButtonToolbar(this._inputRunButtonContainer);\n\t\tthis._inputEditorContainer = DOM.append(this._inputCellContainer, DOM.$('.input-editor-container'));\n\t\tthis._createLayoutStyles();\n\t}\n\n\tprivate _setupRunButtonToolbar(runButtonContainer: HTMLElement) {\n\t\tconst menu = this._register(this._menuService.createMenu(MenuId.ReplInputExecute, this._contextKeyService));\n\t\tthis._runbuttonToolbar = this._register(new ToolBar(runButtonContainer, this._contextMenuService, {\n\t\t\tgetKeyBinding: action => this._keybindingService.lookupKeybinding(action.id),\n\t\t\tactionViewItemProvider: (action, options) => {\n\t\t\t\treturn createActionViewItem(this._instantiationService, action, options);\n\t\t\t},\n\t\t\trenderDropdownAsChildElement: true\n\t\t}));\n\n\t\tconst primary: IAction[] = [];\n\t\tconst secondary: IAction[] = [];\n\t\tconst result = { primary, secondary };\n\n\t\tcreateAndFillInActionBarActions(menu, { shouldForwardArgs: true }, result);\n\t\tthis._runbuttonToolbar.setActions([...primary, ...secondary]);\n\t}\n\n\tprivate _createLayoutStyles(): void {\n\t\tthis._styleElement = DOM.createStyleSheet(this._rootElement);\n\t\tconst styleSheets: string[] = [];\n\n\t\tconst {\n\t\t\tcodeCellLeftMargin,\n\t\t\tcellRunGutter\n\t\t} = this._notebookOptions.getLayoutConfiguration();\n\t\tconst {\n\t\t\tfocusIndicator\n\t\t} = this._notebookOptions.getDisplayOptions();\n\t\tconst leftMargin = this._notebookOptions.getCellEditorContainerLeftMargin();\n\n\t\tstyleSheets.push(`\n\t\t\t.interactive-editor .input-cell-container {\n\t\t\t\tpadding: ${INPUT_CELL_VERTICAL_PADDING}px ${INPUT_CELL_HORIZONTAL_PADDING_RIGHT}px ${INPUT_CELL_VERTICAL_PADDING}px ${leftMargin}px;\n\t\t\t}\n\t\t`);\n\t\tif (focusIndicator === 'gutter') {\n\t\t\tstyleSheets.push(`\n\t\t\t\t.interactive-editor .input-cell-container:focus-within .input-focus-indicator::before {\n\t\t\t\t\tborder-color: var(--vscode-notebook-focusedCellBorder) !important;\n\t\t\t\t}\n\t\t\t\t.interactive-editor .input-focus-indicator::before {\n\t\t\t\t\tborder-color: var(--vscode-notebook-inactiveFocusedCellBorder) !important;\n\t\t\t\t}\n\t\t\t\t.interactive-editor .input-cell-container .input-focus-indicator {\n\t\t\t\t\tdisplay: block;\n\t\t\t\t\ttop: ${INPUT_CELL_VERTICAL_PADDING}px;\n\t\t\t\t}\n\t\t\t\t.interactive-editor .input-cell-container {\n\t\t\t\t\tborder-top: 1px solid var(--vscode-notebook-inactiveFocusedCellBorder);\n\t\t\t\t}\n\t\t\t`);\n\t\t} else {\n\t\t\t// border\n\t\t\tstyleSheets.push(`\n\t\t\t\t.interactive-editor .input-cell-container {\n\t\t\t\t\tborder-top: 1px solid var(--vscode-notebook-inactiveFocusedCellBorder);\n\t\t\t\t}\n\t\t\t\t.interactive-editor .input-cell-container .input-focus-indicator {\n\t\t\t\t\tdisplay: none;\n\t\t\t\t}\n\t\t\t`);\n\t\t}\n\n\t\tstyleSheets.push(`\n\t\t\t.interactive-editor .input-cell-container .run-button-container {\n\t\t\t\twidth: ${cellRunGutter}px;\n\t\t\t\tleft: ${codeCellLeftMargin}px;\n\t\t\t\tmargin-top: ${INPUT_EDITOR_PADDING - 2}px;\n\t\t\t}\n\t\t`);\n\n\t\tthis._styleElement.textContent = styleSheets.join('\\n');\n\t}\n\n\tprivate _computeEditorOptions(): IEditorOptions {\n\t\tlet overrideIdentifier: string | undefined = undefined;\n\t\tif (this._codeEditorWidget) {\n\t\t\toverrideIdentifier = this._codeEditorWidget.getModel()?.getLanguageId();\n\t\t}\n\t\tconst editorOptions = deepClone(this._configurationService.getValue<IEditorOptions>('editor', { overrideIdentifier }));\n\t\tconst editorOptionsOverride = getSimpleEditorOptions(this._configurationService);\n\t\tconst computed = Object.freeze({\n\t\t\t...editorOptions,\n\t\t\t...editorOptionsOverride,\n\t\t\t...{\n\t\t\t\tglyphMargin: true,\n\t\t\t\tpadding: {\n\t\t\t\t\ttop: INPUT_EDITOR_PADDING,\n\t\t\t\t\tbottom: INPUT_EDITOR_PADDING\n\t\t\t\t},\n\t\t\t\thover: {\n\t\t\t\t\tenabled: true\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn computed;\n\t}\n\n\tprotected override saveState(): void {\n\t\tthis._saveEditorViewState(this.input);\n\t\tsuper.saveState();\n\t}\n\n\toverride getViewState(): InteractiveEditorViewState | undefined {\n\t\tconst input = this.input;\n\t\tif (!(input instanceof ReplEditorInput)) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tthis._saveEditorViewState(input);\n\t\treturn this._loadNotebookEditorViewState(input);\n\t}\n\n\tprivate _saveEditorViewState(input: EditorInput | undefined): void {\n\t\tif (this._notebookWidget.value && input instanceof ReplEditorInput) {\n\t\t\tif (this._notebookWidget.value.isDisposed) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst state = this._notebookWidget.value.getEditorViewState();\n\t\t\tconst editorState = this._codeEditorWidget.saveViewState();\n\t\t\tthis._editorMemento.saveEditorState(this.group, input.resource, {\n\t\t\t\tnotebook: state,\n\t\t\t\tinput: editorState\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate _loadNotebookEditorViewState(input: ReplEditorInput): InteractiveEditorViewState | undefined {\n\t\tconst result = this._editorMemento.loadEditorState(this.group, input.resource);\n\t\tif (result) {\n\t\t\treturn result;\n\t\t}\n\t\t// when we don't have a view state for the group/input-tuple then we try to use an existing\n\t\t// editor for the same resource.\n\t\tfor (const group of this._editorGroupService.getGroups(GroupsOrder.MOST_RECENTLY_ACTIVE)) {\n\t\t\tif (group.activeEditorPane !== this && group.activeEditorPane === this && group.activeEditor?.matches(input)) {\n\t\t\t\tconst notebook = this._notebookWidget.value?.getEditorViewState();\n\t\t\t\tconst input = this._codeEditorWidget.saveViewState();\n\t\t\t\treturn {\n\t\t\t\t\tnotebook,\n\t\t\t\t\tinput\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\toverride async setInput(input: ReplEditorInput, options: InteractiveEditorOptions | undefined, context: IEditorOpenContext, token: CancellationToken): Promise<void> {\n\t\t// there currently is a widget which we still own so\n\t\t// we need to hide it before getting a new widget\n\t\tthis._notebookWidget.value?.onWillHide();\n\n\t\tthis._codeEditorWidget?.dispose();\n\n\t\tthis._widgetDisposableStore.clear();\n\n\t\tthis._notebookWidget = <IBorrowValue<NotebookEditorWidget>>this._instantiationService.invokeFunction(this._notebookWidgetService.retrieveWidget, this.group.id, input, {\n\t\t\tisEmbedded: true,\n\t\t\tisReadOnly: true,\n\t\t\tforRepl: true,\n\t\t\tcontributions: NotebookEditorExtensionsRegistry.getSomeEditorContributions([\n\t\t\t\tExecutionStateCellStatusBarContrib.id,\n\t\t\t\tTimerCellStatusBarContrib.id,\n\t\t\t\tNotebookFindContrib.id\n\t\t\t]),\n\t\t\tmenuIds: {\n\t\t\t\tnotebookToolbar: MenuId.InteractiveToolbar,\n\t\t\t\tcellTitleToolbar: MenuId.InteractiveCellTitle,\n\t\t\t\tcellDeleteToolbar: MenuId.InteractiveCellDelete,\n\t\t\t\tcellInsertToolbar: MenuId.NotebookCellBetween,\n\t\t\t\tcellTopInsertToolbar: MenuId.NotebookCellListTop,\n\t\t\t\tcellExecuteToolbar: MenuId.InteractiveCellExecute,\n\t\t\t\tcellExecutePrimary: undefined\n\t\t\t},\n\t\t\tcellEditorContributions: EditorExtensionsRegistry.getSomeEditorContributions([\n\t\t\t\tSelectionClipboardContributionID,\n\t\t\t\tContextMenuController.ID,\n\t\t\t\tContentHoverController.ID,\n\t\t\t\tGlyphHoverController.ID,\n\t\t\t\tMarkerController.ID\n\t\t\t]),\n\t\t\toptions: this._notebookOptions,\n\t\t\tcodeWindow: this.window\n\t\t}, undefined, this.window);\n\n\t\tthis._codeEditorWidget = this._instantiationService.createInstance(CodeEditorWidget, this._inputEditorContainer, this._editorOptions, {\n\t\t\t...{\n\t\t\t\tisSimpleWidget: false,\n\t\t\t\tcontributions: EditorExtensionsRegistry.getSomeEditorContributions([\n\t\t\t\t\tMenuPreventer.ID,\n\t\t\t\t\tSelectionClipboardContributionID,\n\t\t\t\t\tContextMenuController.ID,\n\t\t\t\t\tSuggestController.ID,\n\t\t\t\t\tParameterHintsController.ID,\n\t\t\t\t\tSnippetController2.ID,\n\t\t\t\t\tTabCompletionController.ID,\n\t\t\t\t\tContentHoverController.ID,\n\t\t\t\t\tGlyphHoverController.ID,\n\t\t\t\t\tMarkerController.ID\n\t\t\t\t])\n\t\t\t}\n\t\t});\n\n\t\tif (this._lastLayoutDimensions) {\n\t\t\tthis._notebookEditorContainer.style.height = `${this._lastLayoutDimensions.dimension.height - this.inputCellContainerHeight}px`;\n\t\t\tthis._notebookWidget.value!.layout(new DOM.Dimension(this._lastLayoutDimensions.dimension.width, this._lastLayoutDimensions.dimension.height - this.inputCellContainerHeight), this._notebookEditorContainer);\n\t\t\tconst leftMargin = this._notebookOptions.getCellEditorContainerLeftMargin();\n\t\t\tconst maxHeight = Math.min(this._lastLayoutDimensions.dimension.height / 2, this.inputCellEditorHeight);\n\t\t\tthis._codeEditorWidget.layout(this._validateDimension(this._lastLayoutDimensions.dimension.width - leftMargin - INPUT_CELL_HORIZONTAL_PADDING_RIGHT, maxHeight));\n\t\t\tthis._inputFocusIndicator.style.height = `${this.inputCellEditorHeight}px`;\n\t\t\tthis._inputCellContainer.style.top = `${this._lastLayoutDimensions.dimension.height - this.inputCellContainerHeight}px`;\n\t\t\tthis._inputCellContainer.style.width = `${this._lastLayoutDimensions.dimension.width}px`;\n\t\t}\n\n\t\tawait super.setInput(input, options, context, token);\n\t\tconst model = await input.resolve();\n\t\tif (this._runbuttonToolbar) {\n\t\t\tthis._runbuttonToolbar.context = input.resource;\n\t\t}\n\n\t\tif (model === null) {\n\t\t\tthrow new Error('The REPL model could not be resolved');\n\t\t}\n\n\t\tthis._notebookWidget.value?.setParentContextKeyService(this._contextKeyService);\n\n\t\tconst viewState = options?.viewState ?? this._loadNotebookEditorViewState(input);\n\t\tawait this._extensionService.whenInstalledExtensionsRegistered();\n\t\tawait this._notebookWidget.value!.setModel(model.notebook, viewState?.notebook);\n\t\tmodel.notebook.setCellCollapseDefault(this._notebookOptions.getCellCollapseDefault());\n\t\tthis._notebookWidget.value!.setOptions({\n\t\t\tisReadOnly: true\n\t\t});\n\t\tthis._widgetDisposableStore.add(this._notebookWidget.value!.onDidResizeOutput((cvm) => {\n\t\t\tthis._scrollIfNecessary(cvm);\n\t\t}));\n\t\tthis._widgetDisposableStore.add(this._notebookWidget.value!.onDidFocusWidget(() => this._onDidFocusWidget.fire()));\n\t\tthis._widgetDisposableStore.add(this._notebookOptions.onDidChangeOptions(e => {\n\t\t\tif (e.compactView || e.focusIndicator) {\n\t\t\t\t// update the styling\n\t\t\t\tthis._styleElement?.remove();\n\t\t\t\tthis._createLayoutStyles();\n\t\t\t}\n\n\t\t\tif (this._lastLayoutDimensions && this.isVisible()) {\n\t\t\t\tthis.layout(this._lastLayoutDimensions.dimension, this._lastLayoutDimensions.position);\n\t\t\t}\n\n\t\t\tif (e.interactiveWindowCollapseCodeCells) {\n\t\t\t\tmodel.notebook.setCellCollapseDefault(this._notebookOptions.getCellCollapseDefault());\n\t\t\t}\n\t\t}));\n\n\t\tconst editorModel = await input.resolveInput(model.notebook);\n\t\tthis._codeEditorWidget.setModel(editorModel);\n\t\tif (viewState?.input) {\n\t\t\tthis._codeEditorWidget.restoreViewState(viewState.input);\n\t\t}\n\t\tthis._editorOptions = this._computeEditorOptions();\n\t\tthis._codeEditorWidget.updateOptions(this._editorOptions);\n\n\t\tthis._widgetDisposableStore.add(this._codeEditorWidget.onDidFocusEditorWidget(() => this._onDidFocusWidget.fire()));\n\t\tthis._widgetDisposableStore.add(this._codeEditorWidget.onDidContentSizeChange(e => {\n\t\t\tif (!e.contentHeightChanged) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this._lastLayoutDimensions) {\n\t\t\t\tthis._layoutWidgets(this._lastLayoutDimensions.dimension, this._lastLayoutDimensions.position);\n\t\t\t}\n\t\t}));\n\n\t\tthis._widgetDisposableStore.add(this._codeEditorWidget.onDidChangeCursorPosition(e => this._onDidChangeSelection.fire({ reason: this._toEditorPaneSelectionChangeReason(e) })));\n\t\tthis._widgetDisposableStore.add(this._codeEditorWidget.onDidChangeModelContent(() => this._onDidChangeSelection.fire({ reason: EditorPaneSelectionChangeReason.EDIT })));\n\n\n\t\tthis._widgetDisposableStore.add(this._notebookKernelService.onDidChangeNotebookAffinity(this._syncWithKernel, this));\n\t\tthis._widgetDisposableStore.add(this._notebookKernelService.onDidChangeSelectedNotebooks(this._syncWithKernel, this));\n\n\t\tthis._widgetDisposableStore.add(this.themeService.onDidColorThemeChange(() => {\n\t\t\tif (this.isVisible()) {\n\t\t\t\tthis._updateInputHint();\n\t\t\t}\n\t\t}));\n\n\t\tthis._widgetDisposableStore.add(this._codeEditorWidget.onDidChangeModelContent(() => {\n\t\t\tif (this.isVisible()) {\n\t\t\t\tthis._updateInputHint();\n\t\t\t}\n\t\t}));\n\n\t\tconst cursorAtBoundaryContext = INTERACTIVE_INPUT_CURSOR_BOUNDARY.bindTo(this._contextKeyService);\n\t\tif (input.resource && input.historyService.has(input.resource)) {\n\t\t\tcursorAtBoundaryContext.set('top');\n\t\t} else {\n\t\t\tcursorAtBoundaryContext.set('none');\n\t\t}\n\n\t\tthis._widgetDisposableStore.add(this._codeEditorWidget.onDidChangeCursorPosition(({ position }) => {\n\t\t\tconst viewModel = this._codeEditorWidget._getViewModel()!;\n\t\t\tconst lastLineNumber = viewModel.getLineCount();\n\t\t\tconst lastLineCol = viewModel.getLineLength(lastLineNumber) + 1;\n\t\t\tconst viewPosition = viewModel.coordinatesConverter.convertModelPositionToViewPosition(position);\n\t\t\tconst firstLine = viewPosition.lineNumber === 1 && viewPosition.column === 1;\n\t\t\tconst lastLine = viewPosition.lineNumber === lastLineNumber && viewPosition.column === lastLineCol;\n\n\t\t\tif (firstLine) {\n\t\t\t\tif (lastLine) {\n\t\t\t\t\tcursorAtBoundaryContext.set('both');\n\t\t\t\t} else {\n\t\t\t\t\tcursorAtBoundaryContext.set('top');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (lastLine) {\n\t\t\t\t\tcursorAtBoundaryContext.set('bottom');\n\t\t\t\t} else {\n\t\t\t\t\tcursorAtBoundaryContext.set('none');\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._widgetDisposableStore.add(editorModel.onDidChangeContent(() => {\n\t\t\tconst value = editorModel.getValue();\n\t\t\tif (this.input?.resource && value !== '') {\n\t\t\t\tconst historyService = (this.input as ReplEditorInput).historyService;\n\t\t\t\tif (!historyService.matchesCurrent(this.input.resource, value)) {\n\t\t\t\t\thistoryService.replaceLast(this.input.resource, value);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._widgetDisposableStore.add(this._notebookWidget.value!.onDidScroll(() => this._onDidChangeScroll.fire()));\n\n\t\tthis._updateInputHint();\n\t\tthis._syncWithKernel();\n\t}\n\n\toverride setOptions(options: INotebookEditorOptions | undefined): void {\n\t\tthis._notebookWidget.value?.setOptions(options);\n\t\tsuper.setOptions(options);\n\t}\n\n\tprivate _toEditorPaneSelectionChangeReason(e: ICursorPositionChangedEvent): EditorPaneSelectionChangeReason {\n\t\tswitch (e.source) {\n\t\t\tcase TextEditorSelectionSource.PROGRAMMATIC: return EditorPaneSelectionChangeReason.PROGRAMMATIC;\n\t\t\tcase TextEditorSelectionSource.NAVIGATION: return EditorPaneSelectionChangeReason.NAVIGATION;\n\t\t\tcase TextEditorSelectionSource.JUMP: return EditorPaneSelectionChangeReason.JUMP;\n\t\t\tdefault: return EditorPaneSelectionChangeReason.USER;\n\t\t}\n\t}\n\n\tprivate _cellAtBottom(cell: ICellViewModel): boolean {\n\t\tconst visibleRanges = this._notebookWidget.value?.visibleRanges || [];\n\t\tconst cellIndex = this._notebookWidget.value?.getCellIndex(cell);\n\t\tif (cellIndex === Math.max(...visibleRanges.map(range => range.end - 1))) {\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate _scrollIfNecessary(cvm: ICellViewModel) {\n\t\tconst index = this._notebookWidget.value!.getCellIndex(cvm);\n\t\tif (index === this._notebookWidget.value!.getLength() - 1) {\n\t\t\t// If we're already at the bottom or auto scroll is enabled, scroll to the bottom\n\t\t\tif (this._configurationService.getValue<boolean>(InteractiveWindowSetting.interactiveWindowAlwaysScrollOnNewCell) || this._cellAtBottom(cvm)) {\n\t\t\t\tthis._notebookWidget.value!.scrollToBottom();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _syncWithKernel() {\n\t\tconst notebook = this._notebookWidget.value?.textModel;\n\t\tconst textModel = this._codeEditorWidget.getModel();\n\n\t\tif (notebook && textModel) {\n\t\t\tconst info = this._notebookKernelService.getMatchingKernel(notebook);\n\t\t\tconst selectedOrSuggested = info.selected\n\t\t\t\t?? (info.suggestions.length === 1 ? info.suggestions[0] : undefined)\n\t\t\t\t?? (info.all.length === 1 ? info.all[0] : undefined);\n\n\t\t\tif (selectedOrSuggested) {\n\t\t\t\tconst language = selectedOrSuggested.supportedLanguages[0];\n\t\t\t\t// All kernels will initially list plaintext as the supported language before they properly initialized.\n\t\t\t\tif (language && language !== 'plaintext') {\n\t\t\t\t\tconst newMode = this._languageService.createById(language).languageId;\n\t\t\t\t\ttextModel.setLanguage(newMode);\n\t\t\t\t}\n\n\t\t\t\tNOTEBOOK_KERNEL.bindTo(this._contextKeyService).set(selectedOrSuggested.id);\n\t\t\t}\n\t\t}\n\t}\n\n\tlayout(dimension: DOM.Dimension, position: DOM.IDomPosition): void {\n\t\tthis._rootElement.classList.toggle('mid-width', dimension.width < 1000 && dimension.width >= 600);\n\t\tthis._rootElement.classList.toggle('narrow-width', dimension.width < 600);\n\t\tconst editorHeightChanged = dimension.height !== this._lastLayoutDimensions?.dimension.height;\n\t\tthis._lastLayoutDimensions = { dimension, position };\n\n\t\tif (!this._notebookWidget.value) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (editorHeightChanged && this._codeEditorWidget) {\n\t\t\tSuggestController.get(this._codeEditorWidget)?.cancelSuggestWidget();\n\t\t}\n\n\t\tthis._notebookEditorContainer.style.height = `${this._lastLayoutDimensions.dimension.height - this.inputCellContainerHeight}px`;\n\t\tthis._layoutWidgets(dimension, position);\n\t}\n\n\tprivate _layoutWidgets(dimension: DOM.Dimension, position: DOM.IDomPosition) {\n\t\tconst contentHeight = this._codeEditorWidget.hasModel() ? this._codeEditorWidget.getContentHeight() : this.inputCellEditorHeight;\n\t\tconst maxHeight = Math.min(dimension.height / 2, contentHeight);\n\t\tconst leftMargin = this._notebookOptions.getCellEditorContainerLeftMargin();\n\n\t\tconst inputCellContainerHeight = maxHeight + INPUT_CELL_VERTICAL_PADDING * 2;\n\t\tthis._notebookEditorContainer.style.height = `${dimension.height - inputCellContainerHeight}px`;\n\n\t\tthis._notebookWidget.value!.layout(dimension.with(dimension.width, dimension.height - inputCellContainerHeight), this._notebookEditorContainer, position);\n\t\tthis._codeEditorWidget.layout(this._validateDimension(dimension.width - leftMargin - INPUT_CELL_HORIZONTAL_PADDING_RIGHT, maxHeight));\n\t\tthis._inputFocusIndicator.style.height = `${contentHeight}px`;\n\t\tthis._inputCellContainer.style.top = `${dimension.height - inputCellContainerHeight}px`;\n\t\tthis._inputCellContainer.style.width = `${dimension.width}px`;\n\t}\n\n\tprivate _validateDimension(width: number, height: number) {\n\t\treturn new DOM.Dimension(Math.max(0, width), Math.max(0, height));\n\t}\n\n\tprivate _updateInputHint(): void {\n\t\tif (!this._codeEditorWidget) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst shouldHide =\n\t\t\t!this._codeEditorWidget.hasModel() ||\n\t\t\tthis._configurationService.getValue<boolean>(InteractiveWindowSetting.showExecutionHint) === false ||\n\t\t\tthis._codeEditorWidget.getModel()!.getValueLength() !== 0;\n\n\t\tif (!this._hintElement && !shouldHide) {\n\t\t\tthis._hintElement = this._instantiationService.createInstance(ReplInputHintContentWidget, this._codeEditorWidget);\n\t\t} else if (this._hintElement && shouldHide) {\n\t\t\tthis._hintElement.dispose();\n\t\t\tthis._hintElement = undefined;\n\t\t}\n\t}\n\n\tgetScrollPosition(): IEditorPaneScrollPosition {\n\t\treturn {\n\t\t\tscrollTop: this._notebookWidget.value?.scrollTop ?? 0,\n\t\t\tscrollLeft: 0\n\t\t};\n\t}\n\n\tsetScrollPosition(position: IEditorPaneScrollPosition): void {\n\t\tthis._notebookWidget.value?.setScrollTop(position.scrollTop);\n\t}\n\n\toverride focus() {\n\t\tsuper.focus();\n\n\t\tthis._notebookWidget.value?.onShow();\n\t\tthis._codeEditorWidget.focus();\n\t}\n\n\tfocusHistory() {\n\t\tthis._notebookWidget.value!.focus();\n\t}\n\n\tprotected override setEditorVisible(visible: boolean): void {\n\t\tsuper.setEditorVisible(visible);\n\t\tthis._groupListener.value = this.group.onWillCloseEditor(e => this._saveEditorViewState(e.editor));\n\n\t\tif (!visible) {\n\t\t\tthis._saveEditorViewState(this.input);\n\t\t\tif (this.input && this._notebookWidget.value) {\n\t\t\t\tthis._notebookWidget.value.onWillHide();\n\t\t\t}\n\t\t}\n\n\t\tthis._updateInputHint();\n\t}\n\n\toverride clearInput() {\n\t\tif (this._notebookWidget.value) {\n\t\t\tthis._saveEditorViewState(this.input);\n\t\t\tthis._notebookWidget.value.onWillHide();\n\t\t}\n\n\t\tthis._codeEditorWidget?.dispose();\n\n\t\tthis._notebookWidget = { value: undefined };\n\t\tthis._widgetDisposableStore.clear();\n\n\t\tsuper.clearInput();\n\t}\n\n\toverride getControl(): { notebookEditor: NotebookEditorWidget | undefined; codeEditor: CodeEditorWidget } {\n\t\treturn {\n\t\t\tnotebookEditor: this._notebookWidget.value,\n\t\t\tcodeEditor: this._codeEditorWidget\n\t\t};\n\t}\n}\n"],
  "mappings": "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",
  "names": ["input"]
}
