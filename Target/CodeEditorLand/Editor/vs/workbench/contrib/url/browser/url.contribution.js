import{URI as d}from"../../../../../vs/base/common/uri.js";import{localize as t,localize2 as l}from"../../../../../vs/nls.js";import{Categories as f}from"../../../../../vs/platform/action/common/actionCommonCategories.js";import{Action2 as g,MenuId as b,MenuRegistry as k,registerAction2 as C}from"../../../../../vs/platform/actions/common/actions.js";import{CommandsRegistry as I}from"../../../../../vs/platform/commands/common/commands.js";import{Extensions as h,ConfigurationScope as R}from"../../../../../vs/platform/configuration/common/configurationRegistry.js";import{InstantiationType as y,registerSingleton as v}from"../../../../../vs/platform/instantiation/common/extensions.js";import"../../../../../vs/platform/instantiation/common/instantiation.js";import{IQuickInputService as S}from"../../../../../vs/platform/quickinput/common/quickInput.js";import{Registry as i}from"../../../../../vs/platform/registry/common/platform.js";import{IURLService as D}from"../../../../../vs/platform/url/common/url.js";import{workbenchConfigurationNodeBase as W}from"../../../../../vs/workbench/common/configuration.js";import{registerWorkbenchContribution2 as n,Extensions as T,WorkbenchPhase as s}from"../../../../../vs/workbench/common/contributions.js";import{ExternalUriResolverContribution as m}from"../../../../../vs/workbench/contrib/url/browser/externalUriResolver.js";import{manageTrustedDomainSettingsCommand as o}from"../../../../../vs/workbench/contrib/url/browser/trustedDomains.js";import{ITrustedDomainService as U,TrustedDomainService as w}from"../../../../../vs/workbench/contrib/url/browser/trustedDomainService.js";import{TrustedDomainsFileSystemProvider as p}from"../../../../../vs/workbench/contrib/url/browser/trustedDomainsFileSystemProvider.js";import{OpenerValidatorContributions as A}from"../../../../../vs/workbench/contrib/url/browser/trustedDomainsValidator.js";import{LifecyclePhase as P}from"../../../../../vs/workbench/services/lifecycle/common/lifecycle.js";class x extends g{constructor(){super({id:"workbench.action.url.openUrl",title:l("openUrl","Open URL"),category:f.Developer,f1:!0})}async run(e){const a=e.get(S),c=e.get(D);return a.input({prompt:t("urlToOpen","URL to open")}).then(r=>{if(r){const u=d.parse(r);c.open(u,{originalUrl:r})}})}}C(x),I.registerCommand(o),k.appendMenuItem(b.CommandPalette,{command:{id:o.id,title:o.description.description}}),i.as(T.Workbench).registerWorkbenchContribution(A,P.Restored),n(p.ID,p,s.BlockRestore),n(m.ID,m,s.BlockRestore);const E=i.as(h.Configuration);E.registerConfiguration({...W,properties:{"workbench.trustedDomains.promptInTrustedWorkspace":{scope:R.APPLICATION,type:"boolean",default:!1,description:t("workbench.trustedDomains.promptInTrustedWorkspace","When enabled, trusted domain prompts will appear when opening links in trusted workspaces.")}}}),v(U,w,y.Delayed);
