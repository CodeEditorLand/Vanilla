import{URI as l}from"../../../../base/common/uri.js";import{localize as t,localize2 as d}from"../../../../nls.js";import{Categories as f}from"../../../../platform/action/common/actionCommonCategories.js";import{Action2 as g,MenuId as b,MenuRegistry as k,registerAction2 as C}from"../../../../platform/actions/common/actions.js";import{CommandsRegistry as I}from"../../../../platform/commands/common/commands.js";import{Extensions as y,ConfigurationScope as h}from"../../../../platform/configuration/common/configurationRegistry.js";import{InstantiationType as R,registerSingleton as v}from"../../../../platform/instantiation/common/extensions.js";import{IQuickInputService as S}from"../../../../platform/quickinput/common/quickInput.js";import{Registry as i}from"../../../../platform/registry/common/platform.js";import{IURLService as D}from"../../../../platform/url/common/url.js";import{workbenchConfigurationNodeBase as W}from"../../../common/configuration.js";import{Extensions as T,WorkbenchPhase as n,registerWorkbenchContribution2 as s}from"../../../common/contributions.js";import{LifecyclePhase as U}from"../../../services/lifecycle/common/lifecycle.js";import{ExternalUriResolverContribution as m}from"./externalUriResolver.js";import{ITrustedDomainService as w,TrustedDomainService as A}from"./trustedDomainService.js";import{manageTrustedDomainSettingsCommand as r}from"./trustedDomains.js";import{TrustedDomainsFileSystemProvider as p}from"./trustedDomainsFileSystemProvider.js";import{OpenerValidatorContributions as P}from"./trustedDomainsValidator.js";class x extends g{constructor(){super({id:"workbench.action.url.openUrl",title:d("openUrl","Open URL"),category:f.Developer,f1:!0})}async run(e){const a=e.get(S),c=e.get(D);return a.input({prompt:t("urlToOpen","URL to open")}).then(o=>{if(o){const u=l.parse(o);c.open(u,{originalUrl:o})}})}}C(x),I.registerCommand(r),k.appendMenuItem(b.CommandPalette,{command:{id:r.id,title:r.description.description}}),i.as(T.Workbench).registerWorkbenchContribution(P,U.Restored),s(p.ID,p,n.BlockRestore),s(m.ID,m,n.BlockRestore);const E=i.as(y.Configuration);E.registerConfiguration({...W,properties:{"workbench.trustedDomains.promptInTrustedWorkspace":{scope:h.APPLICATION,type:"boolean",default:!1,description:t("workbench.trustedDomains.promptInTrustedWorkspace","When enabled, trusted domain prompts will appear when opening links in trusted workspaces.")}}}),v(w,A,R.Delayed);
