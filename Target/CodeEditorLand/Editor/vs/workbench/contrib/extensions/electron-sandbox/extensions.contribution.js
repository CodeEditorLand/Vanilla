var KV=Object.defineProperty;var GV=Object.getOwnPropertyDescriptor;var C=(r,e,t,n)=>{for(var i=n>1?void 0:n?GV(e,t):e,o=r.length-1,s;o>=0;o--)(s=r[o])&&(i=(n?s(e,t,i):s(i))||i);return n&&i&&KV(e,t,i),i},v=(r,e)=>(t,n)=>e(t,n,r);function UL(r,e){let t=vE(r,e);if(t!==-1)return r[t]}function vE(r,e,t=r.length-1){for(let n=t;n>=0;n--){let i=r[n];if(e(i))return n}return-1}function yE(r,e){let t=Ah(r,e);return t===-1?void 0:r[t]}function Ah(r,e,t=0,n=r.length){let i=t,o=n;for(;i<o;){let s=Math.floor((i+o)/2);e(r[s])?i=s+1:o=s}return i-1}function ab(r,e,t=0,n=r.length){let i=t,o=n;for(;i<o;){let s=Math.floor((i+o)/2);e(r[s])?o=s:i=s+1}return i}var IE=class{unexpectedErrorHandler;listeners;constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?zo.isErrorNoTelemetry(e)?new zo(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},db=new IE;function tu(r){db.onUnexpectedError(r)}function Ze(r){nu(r)||db.onUnexpectedError(r)}function xE(r){if(r instanceof Error){let{name:e,message:t}=r,n=r.stacktrace||r.stack;return{$isError:!0,name:e,message:t,stack:n,noTelemetry:zo.isErrorNoTelemetry(r)}}return r}var SE="Canceled";function nu(r){return r instanceof Xi?!0:r instanceof Error&&r.name===SE&&r.message===SE}var Xi=class extends Error{constructor(){super(SE),this.name=this.message}};function Dd(r){return r?new Error(`Illegal argument: ${r}`):new Error("Illegal argument")}function VL(r){return r?new Error(`Illegal state: ${r}`):new Error("Illegal state")}function Ia(r){return r?r.message?r.message:r.stack?r.stack.split(`
`)[0]:String(r):"Error"}var lb=class extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}};var zo=class r extends Error{name;constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof r)return e;let t=new r;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},gt=class r extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,r.prototype)}};function ol(r,e){let t=this,n=!1,i;return function(){if(n)return i;if(n=!0,e)try{i=r.apply(t,arguments)}finally{e()}else i=r.apply(t,arguments);return i}}var gn=class r{static Undefined=new r(void 0);element;next;prev;constructor(e){this.element=e,this.next=r.Undefined,this.prev=r.Undefined}},ei=class{_first=gn.Undefined;_last=gn.Undefined;_size=0;get size(){return this._size}isEmpty(){return this._first===gn.Undefined}clear(){let e=this._first;for(;e!==gn.Undefined;){let t=e.next;e.prev=gn.Undefined,e.next=gn.Undefined,e=t}this._first=gn.Undefined,this._last=gn.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){let n=new gn(e);if(this._first===gn.Undefined)this._first=n,this._last=n;else if(t){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==gn.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==gn.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==gn.Undefined&&e.next!==gn.Undefined){let t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===gn.Undefined&&e.next===gn.Undefined?(this._first=gn.Undefined,this._last=gn.Undefined):e.next===gn.Undefined?(this._last=this._last.prev,this._last.next=gn.Undefined):e.prev===gn.Undefined&&(this._first=this._first.next,this._first.prev=gn.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==gn.Undefined;)yield e.element,e=e.next}};var sl=(r,e)=>r===e;var to=class{constructor(e,t,n){this.owner=e;this.debugNameSource=t;this.referenceFn=n}getDebugName(e){return KL(e,this)}},WL=new Map,TE=new WeakMap;function KL(r,e){let t=TE.get(r);if(t)return t;let n=$V(r,e);if(n){let i=WL.get(n)??0;i++,WL.set(n,i);let o=i===1?n:`${n}#${i}`;return TE.set(r,o),o}}function $V(r,e){let t=TE.get(r);if(t)return t;let n=e.owner?YV(e.owner)+".":"",i,o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(i=o(),i!==void 0)return n+i}else return n+o;let s=e.referenceFn;if(s!==void 0&&(i=cb(s),i!==void 0))return n+i;if(e.owner!==void 0){let a=jV(e.owner,r);if(a!==void 0)return n+a}}function jV(r,e){for(let t in r)if(r[t]===e)return t}var zL=new Map,HL=new WeakMap;function YV(r){let e=HL.get(r);if(e)return e;let t=XV(r),n=zL.get(t)??0;n++,zL.set(t,n);let i=n===1?t:`${t}#${n}`;return HL.set(r,i),i}function XV(r){let e=r.constructor;return e?e.name:"Object"}function cb(r){let e=r.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}function Oh(r,e){if(!r)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function EE(r,e="Unreachable"){throw new Error(e)}function iu(r){if(!r()){debugger;r(),Ze(new gt("Assertion Failed"))}}function yo(r){return new ub(new to(void 0,void 0,r),r,void 0,void 0)}var ub=class{constructor(e,t,n,i){this._debugNameData=e;this._runFn=t;this.createChangeSummary=n;this._handleChange=i;this.changeSummary=this.createChangeSummary?.(),Or()?.handleAutorunCreated(this),this._runIfNeeded(),_d(this)}state=2;updateCount=0;disposed=!1;dependencies=new Set;dependenciesToBeRemoved=new Set;changeSummary;get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),Rd(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;let t=this.disposed;try{if(!t){Or()?.handleAutorunTriggered(this);let n=this.changeSummary;try{this.changeSummary=this.createChangeSummary?.(),this._runFn(this,n)}catch(i){tu(i)}}}finally{t||Or()?.handleAutorunFinished(this);for(let n of this.dependenciesToBeRemoved)n.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){try{if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3)}finally{this.updateCount--}iu(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e))try{(this._handleChange?this._handleChange({changedObservable:e,change:t,didChange:i=>i===e},this.changeSummary):!0)&&(this.state=2)}catch(n){tu(n)}}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);let t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}};(e=>e.Observer=ub)(yo||={});function wE(r,e){return new pb(new to(r.owner,r.debugName,r.debugReferenceFn),e,void 0,void 0,r.onLastObserverRemoved,r.equalsFn??sl)}qL(wE);var pb=class extends al{constructor(t,n,i,o,s=void 0,a){super();this._debugNameData=t;this._computeFn=n;this.createChangeSummary=i;this._handleChange=o;this._handleLastObserverRemoved=s;this._equalityComparator=a;this.changeSummary=this.createChangeSummary?.(),Or()?.handleDerivedCreated(this)}state=0;value=void 0;updateCount=0;dependencies=new Set;dependenciesToBeRemoved=new Set;changeSummary=void 0;get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this.state=0,this.value=void 0;for(let t of this.dependencies)t.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this.observers.size===0){let t=this._computeFn(this,this.createChangeSummary?.());return this.onLastObserverRemoved(),t}else{do{if(this.state===1){for(let t of this.dependencies)if(t.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;let t=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=t;let n=this.state!==0,i=this.value;this.state=3;let o=!1;try{let s=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this.value=this._computeFn(this,s)}finally{for(let a of this.dependenciesToBeRemoved)a.removeObserver(this);this.dependenciesToBeRemoved.clear()}o=n&&!this._equalityComparator(i,this.value),Or()?.handleDerivedRecomputed(this,{oldValue:i,newValue:this.value,change:void 0,didChange:o,hadValue:n})}catch(s){tu(s)}if(o)for(let s of this.observers)s.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(t){this.updateCount++;let n=this.updateCount===1;if(this.state===3&&(this.state=1,!n))for(let i of this.observers)i.handlePossibleChange(this);if(n)for(let i of this.observers)i.beginUpdate(this)}endUpdate(t){if(this.updateCount--,this.updateCount===0){let n=[...this.observers];for(let i of n)i.endUpdate(this)}iu(()=>this.updateCount>=0)}handlePossibleChange(t){if(this.state===3&&this.dependencies.has(t)&&!this.dependenciesToBeRemoved.has(t)){this.state=1;for(let n of this.observers)n.handlePossibleChange(this)}}handleChange(t,n){if(this.dependencies.has(t)&&!this.dependenciesToBeRemoved.has(t)){let i=!1;try{i=this._handleChange?this._handleChange({changedObservable:t,change:n,didChange:s=>s===t},this.changeSummary):!0}catch(s){tu(s)}let o=this.state===3;if(i&&(this.state===1||o)&&(this.state=2,o))for(let s of this.observers)s.handlePossibleChange(this)}}readObservable(t){t.addObserver(this);let n=t.get();return this.dependencies.add(t),this.dependenciesToBeRemoved.delete(t),n}addObserver(t){let n=!this.observers.has(t)&&this.updateCount>0;super.addObserver(t),n&&t.beginUpdate(this)}removeObserver(t){let n=this.observers.has(t)&&this.updateCount>0;super.removeObserver(t),n&&t.endUpdate(this)}};function Mh(r){return new CE(r)}var CE=class extends Nh{constructor(t){super();this.value=t}get debugName(){return this.toString()}get(){return this.value}addObserver(t){}removeObserver(t){}toString(){return`Const: ${this.value}`}};function kE(...r){let e,t,n;return r.length===3?[e,t,n]=r:[t,n]=r,new ll(new to(e,void 0,n),t,n,()=>ll.globalTransaction,sl)}var ll=class extends al{constructor(t,n,i,o,s){super();this._debugNameData=t;this.event=n;this._getValue=i;this._getTransaction=o;this._equalityComparator=s}static globalTransaction;value;hasValue=!1;subscription;getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let t=this.getDebugName();return"From Event"+(t?`: ${t}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}handleEvent=t=>{let n=this._getValue(t),i=this.value,o=!this.hasValue||!this._equalityComparator(i,n),s=!1;o&&(this.value=n,this.hasValue&&(s=!0,DE(this._getTransaction(),a=>{Or()?.handleFromEventObservableTriggered(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue});for(let l of this.observers)a.updateObserver(l,this),l.handleChange(this,void 0)},()=>{let a=this.getDebugName();return"Event fired"+(a?`: ${a}`:"")})),this.hasValue=!0),s||Or()?.handleFromEventObservableTriggered(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue})};onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};(t=>{t.Observer=ll;function e(n,i){let o=!1;ll.globalTransaction===void 0&&(ll.globalTransaction=n,o=!0);try{i()}finally{o&&(ll.globalTransaction=void 0)}}t.batchEventsGlobally=e})(kE||={});function jL(r){let e=new hb(!1,void 0);return r.addObserver(e),ie(()=>{r.removeObserver(e)})}QL(jL);function YL(r,e){let t=new hb(!0,e);return r.addObserver(t),e?e(r.get()):r.reportChanges(),ie(()=>{r.removeObserver(t)})}XL(YL);var hb=class{constructor(e,t){this._forceRecompute=e;this._handleValue=t}_counter=0;beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}};var JL;function ZL(r){JL=r}function Or(){return JL}var gb=class{indentation=0;textToConsoleArgs(e){return ZV([ru(nW("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[ru(" "),Go(Bh(e.oldValue,70),{color:"red",strikeThrough:!0}),ru(" "),Go(Bh(e.newValue,60),{color:"green"})]:[ru(" (unchanged)")]:[ru(" "),Go(Bh(e.newValue,60),{color:"green"}),ru(" (initial)")]}handleObservableChanged(e,t){console.log(...this.textToConsoleArgs([Fh("observable value changed"),Go(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t)]))}changedObservablesSets=new WeakMap;formatChanges(e){if(e.size!==0)return Go(" (changed deps: "+[...e].map(t=>t.debugName).join(", ")+")",{color:"gray"})}handleDerivedCreated(e){let t=e.handleChange;this.changedObservablesSets.set(e,new Set),e.handleChange=(n,i)=>(this.changedObservablesSets.get(e).add(n),t.apply(e,[n,i]))}handleDerivedRecomputed(e,t){let n=this.changedObservablesSets.get(e);console.log(...this.textToConsoleArgs([Fh("derived recomputed"),Go(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),n.clear()}handleFromEventObservableTriggered(e,t){console.log(...this.textToConsoleArgs([Fh("observable from event triggered"),Go(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){let t=e.handleChange;this.changedObservablesSets.set(e,new Set),e.handleChange=(n,i)=>(this.changedObservablesSets.get(e).add(n),t.apply(e,[n,i]))}handleAutorunTriggered(e){let t=this.changedObservablesSets.get(e);console.log(...this.textToConsoleArgs([Fh("autorun"),Go(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.indentation++}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let t=e.getDebugName();t===void 0&&(t=""),console.log(...this.textToConsoleArgs([Fh("transaction"),Go(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function ZV(r){let e=new Array,t=[],n="";function i(s){if("length"in s)for(let a of s)a&&i(a);else"text"in s?(n+=`%c${s.text}`,e.push(s.style),s.data&&t.push(...s.data)):"data"in s&&t.push(...s.data)}i(r);let o=[n,...e];return o.push(...t),o}function ru(r){return Go(r,{color:"black"})}function Fh(r){return Go(iW(`${r}: `,10),{color:"black",bold:!0})}function Go(r,e={color:"black"}){function t(i){return Object.entries(i).reduce((o,[s,a])=>`${o}${s}:${a};`,"")}let n={color:e.color};return e.strikeThrough&&(n["text-decoration"]="line-through"),e.bold&&(n["font-weight"]="bold"),{text:r,style:t(n)}}function Bh(r,e){switch(typeof r){case"number":return""+r;case"string":return r.length+2<=e?`"${r}"`:`"${r.substr(0,e-7)}"+...`;case"boolean":return r?"true":"false";case"undefined":return"undefined";case"object":return r===null?"null":Array.isArray(r)?eW(r,e):tW(r,e);case"symbol":return r.toString();case"function":return`[[Function${r.name?" "+r.name:""}]]`;default:return""+r}}function eW(r,e){let t="[ ",n=!0;for(let i of r){if(n||(t+=", "),t.length-5>e){t+="...";break}n=!1,t+=`${Bh(i,e-t.length)}`}return t+=" ]",t}function tW(r,e){let t="{ ",n=!0;for(let[i,o]of Object.entries(r)){if(n||(t+=", "),t.length-5>e){t+="...";break}n=!1,t+=`${i}: ${Bh(o,e-t.length)}`}return t+=" }",t}function nW(r,e){let t="";for(let n=1;n<=e;n++)t+=r;return t}function iW(r,e){for(;r.length<e;)r+=" ";return r}var eP;function XL(r){eP=r}var tP;function QL(r){tP=r}var _E;function qL(r){_E=r}var Nh=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){let n=t===void 0?void 0:e,i=t===void 0?e:t;return _E({owner:n,debugName:()=>{let o=cb(i);if(o!==void 0)return o;let a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(a)return`${this.debugName}.${a[2]}`;if(!n)return`${this.debugName} (mapped)`},debugReferenceFn:i},o=>i(this.read(o),o))}flatten(){return _E({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(eP(this,t)),this}keepObserved(e){return e.add(tP(this)),this}get debugValue(){return this.get()}},al=class extends Nh{observers=new Set;addObserver(e){let t=this.observers.size;this.observers.add(e),t===0&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}};function mb(r,e){let t=new Uh(r,e);try{r(t)}finally{t.finish()}}function DE(r,e,t){r?e(r):mb(e,t)}var Uh=class{constructor(e,t){this._fn=e;this._getDebugName=t;Or()?.handleBeginTransaction(this)}updatingObservers=[];getDebugName(){return this._getDebugName?this._getDebugName():cb(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){let e=this.updatingObservers;for(let t=0;t<e.length;t++){let{observer:n,observable:i}=e[t];n.endUpdate(i)}this.updatingObservers=null,Or()?.handleEndTransaction()}};function Ko(r,e){let t;return typeof r=="string"?t=new to(void 0,r,void 0):t=new to(r,void 0,void 0),new fb(t,e,sl)}var fb=class extends al{constructor(t,n,i){super();this._debugNameData=t;this._equalityComparator=i;this._value=n}_value;get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}get(){return this._value}set(t,n,i){if(i===void 0&&this._equalityComparator(this._value,t))return;let o;n||(n=o=new Uh(()=>{},()=>`Setting ${this.debugName}`));try{let s=this._value;this._setValue(t),Or()?.handleObservableChanged(this,{oldValue:s,newValue:t,change:i,didChange:!0,hadValue:!0});for(let a of this.observers)n.updateObserver(a,this),a.handleChange(this,i)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(t){this._value=t}};var oW=!1;oW&&ZL(new gb);var sW=globalThis.performance&&typeof globalThis.performance.now=="function",Ld=class r{_startTime;_stopTime;_now;static create(e){return new r(e)}constructor(e){this._now=sW&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var bb=Symbol("MicrotaskDelay");var aW=!1,nP=!1,lW=!1,N;(st=>{st.None=()=>P.None;function e(be){if(lW){let{onDidAddListener:ae}=be,fe=Vh.create(),ve=0;be.onDidAddListener=()=>{++ve===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),fe.print()),ae?.()}}}function t(be,ae){return m(be,()=>{},0,void 0,!0,void 0,ae)}st.defer=t;function n(be){return(ae,fe=null,ve)=>{let Te=!1,Qe;return Qe=be(He=>{if(!Te)return Qe?Qe.dispose():Te=!0,ae.call(fe,He)},null,ve),Te&&Qe.dispose(),Qe}}st.once=n;function i(be,ae){return st.once(st.filter(be,ae))}st.onceIf=i;function o(be,ae,fe){return p((ve,Te=null,Qe)=>be(He=>ve.call(Te,ae(He)),null,Qe),fe)}st.map=o;function s(be,ae,fe){return p((ve,Te=null,Qe)=>be(He=>{ae(He),ve.call(Te,He)},null,Qe),fe)}st.forEach=s;function a(be,ae,fe){return p((ve,Te=null,Qe)=>be(He=>ae(He)&&ve.call(Te,He),null,Qe),fe)}st.filter=a;function l(be){return be}st.signal=l;function d(...be){return(ae,fe=null,ve)=>{let Te=Ti(...be.map(Qe=>Qe(He=>ae.call(fe,He))));return h(Te,ve)}}st.any=d;function u(be,ae,fe,ve){let Te=fe;return o(be,Qe=>(Te=ae(Te,Qe),Te),ve)}st.reduce=u;function p(be,ae){let fe,ve={onWillAddFirstListener(){fe=be(Te.fire,Te)},onDidRemoveLastListener(){fe?.dispose()}};ae||e(ve);let Te=new x(ve);return ae?.add(Te),Te.event}function h(be,ae){return ae instanceof Array?ae.push(be):ae&&ae.add(be),be}function m(be,ae,fe=100,ve=!1,Te=!1,Qe,He){let St,nt,Re,Gn=0,xn,Li={leakWarningThreshold:Qe,onWillAddFirstListener(){St=be(ba=>{Gn++,nt=ae(nt,ba),ve&&!Re&&(dr.fire(nt),nt=void 0),xn=()=>{let Pi=nt;nt=void 0,Re=void 0,(!ve||Gn>1)&&dr.fire(Pi),Gn=0},typeof fe=="number"?(clearTimeout(Re),Re=setTimeout(xn,fe)):Re===void 0&&(Re=0,queueMicrotask(xn))})},onWillRemoveListener(){Te&&Gn>0&&xn?.()},onDidRemoveLastListener(){xn=void 0,St.dispose()}};He||e(Li);let dr=new x(Li);return He?.add(dr),dr.event}st.debounce=m;function f(be,ae=0,fe){return st.debounce(be,(ve,Te)=>ve?(ve.push(Te),ve):[Te],ae,void 0,!0,void 0,fe)}st.accumulate=f;function g(be,ae=(ve,Te)=>ve===Te,fe){let ve=!0,Te;return a(be,Qe=>{let He=ve||!ae(Qe,Te);return ve=!1,Te=Qe,He},fe)}st.latch=g;function y(be,ae,fe){return[st.filter(be,ae,fe),st.filter(be,ve=>!ae(ve),fe)]}st.split=y;function T(be,ae=!1,fe=[],ve){let Te=fe.slice(),Qe=be(nt=>{Te?Te.push(nt):St.fire(nt)});ve&&ve.add(Qe);let He=()=>{Te?.forEach(nt=>St.fire(nt)),Te=null},St=new x({onWillAddFirstListener(){Qe||(Qe=be(nt=>St.fire(nt)),ve&&ve.add(Qe))},onDidAddFirstListener(){Te&&(ae?setTimeout(He):He())},onDidRemoveLastListener(){Qe&&Qe.dispose(),Qe=null}});return ve&&ve.add(St),St.event}st.buffer=T;function E(be,ae){return(ve,Te,Qe)=>{let He=ae(new _);return be(function(St){let nt=He.evaluate(St);nt!==D&&ve.call(Te,nt)},void 0,Qe)}}st.chain=E;let D=Symbol("HaltChainable");class _{steps=[];map(ae){return this.steps.push(ae),this}forEach(ae){return this.steps.push(fe=>(ae(fe),fe)),this}filter(ae){return this.steps.push(fe=>ae(fe)?fe:D),this}reduce(ae,fe){let ve=fe;return this.steps.push(Te=>(ve=ae(ve,Te),ve)),this}latch(ae=(fe,ve)=>fe===ve){let fe=!0,ve;return this.steps.push(Te=>{let Qe=fe||!ae(Te,ve);return fe=!1,ve=Te,Qe?Te:D}),this}evaluate(ae){for(let fe of this.steps)if(ae=fe(ae),ae===D)break;return ae}}function O(be,ae,fe=ve=>ve){let ve=(...St)=>He.fire(fe(...St)),Te=()=>be.on(ae,ve),Qe=()=>be.removeListener(ae,ve),He=new x({onWillAddFirstListener:Te,onDidRemoveLastListener:Qe});return He.event}st.fromNodeEventEmitter=O;function G(be,ae,fe=ve=>ve){let ve=(...St)=>He.fire(fe(...St)),Te=()=>be.addEventListener(ae,ve),Qe=()=>be.removeEventListener(ae,ve),He=new x({onWillAddFirstListener:Te,onDidRemoveLastListener:Qe});return He.event}st.fromDOMEventEmitter=G;function Z(be){return new Promise(ae=>n(be)(ae))}st.toPromise=Z;function M(be){let ae=new x;return be.then(fe=>{ae.fire(fe)},()=>{ae.fire(void 0)}).finally(()=>{ae.dispose()}),ae.event}st.fromPromise=M;function H(be,ae){return be(fe=>ae.fire(fe))}st.forward=H;function oe(be,ae,fe){return ae(fe),be(ve=>ae(ve))}st.runAndSubscribe=oe;class ee{constructor(ae,fe){this._observable=ae;let ve={onWillAddFirstListener:()=>{ae.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{ae.removeObserver(this)}};fe||e(ve),this.emitter=new x(ve),fe&&fe.add(this.emitter)}emitter;_counter=0;_hasChanged=!1;beginUpdate(ae){this._counter++}handlePossibleChange(ae){}handleChange(ae,fe){this._hasChanged=!0}endUpdate(ae){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function re(be,ae){return new ee(be,ae).emitter.event}st.fromObservable=re;function Fe(be){return(ae,fe,ve)=>{let Te=0,Qe=!1,He={beginUpdate(){Te++},endUpdate(){Te--,Te===0&&(be.reportChanges(),Qe&&(Qe=!1,ae.call(fe)))},handlePossibleChange(){},handleChange(){Qe=!0}};be.addObserver(He),be.reportChanges();let St={dispose(){be.removeObserver(He)}};return ve instanceof Q?ve.add(St):Array.isArray(ve)&&ve.push(St),St}}st.fromObservableLight=Fe})(N||={});var RE=class r{static all=new Set;static _idPool=0;name;listenerCount=0;invocationCount=0;elapsedOverall=0;durations=[];_stopWatch;constructor(e){this.name=`${e}_${r._idPool++}`,r.all.add(this)}start(e){this._stopWatch=new Ld,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},iP=-1;var LE=class r{constructor(e,t,n=(r._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e;this.threshold=t;this.name=n}static _idPool=1;_stacks;_warnCountdown=0;dispose(){this._stacks?.clear()}check(e,t){let n=this.threshold;if(n<=0||t<n)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[o,s]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${s}):`;console.warn(a),console.warn(o);let l=new PE(a,o);this._errorHandler(l)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(let[n,i]of this._stacks)(!e||t<i)&&(e=[n,i],t=i);return e}},Vh=class r{constructor(e){this.value=e}static create(){let e=new Error;return new r(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},PE=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},AE=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},dW=0,ou=class{constructor(e){this.value=e}stack;id=dW++},cW=2,rP=(r,e)=>{if(r instanceof ou)e(r);else for(let t=0;t<r.length;t++){let n=r[t];n&&e(n)}},vb;if(aW){let r=[];setInterval(()=>{r.length!==0&&(console.warn("[LEAKING LISTENERS] GC'ed these listeners that were NOT yet disposed:"),console.warn(r.join(`
`)),r.length=0)},3e3),vb=new FinalizationRegistry(e=>{typeof e=="string"&&r.push(e)})}var x=class{_options;_leakageMon;_perfMon;_disposed;_event;_listeners;_deliveryQueue;_size=0;constructor(e){this._options=e,this._leakageMon=iP>0||this._options?.leakWarningThreshold?new LE(e?.onListenerError??Ze,this._options?.leakWarningThreshold??iP):void 0,this._perfMon=this._options?._profName?new RE(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(nP){let e=this._listeners;queueMicrotask(()=>{rP(e,t=>t.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,t,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let l=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(l);let d=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],u=new AE(`${l}. HINT: Stack shows most frequent listener (${d[1]}-times)`,d[0]);return(this._options?.onListenerError||Ze)(u),P.None}if(this._disposed)return P.None;t&&(e=e.bind(t));let i=new ou(e),o,s;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=Vh.create(),o=this._leakageMon.check(i.stack,this._size+1)),nP&&(i.stack=s??Vh.create()),this._listeners?this._listeners instanceof ou?(this._deliveryQueue??=new OE,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._size++;let a=ie(()=>{vb?.unregister(a),o?.(),this._removeListener(i)});if(n instanceof Q?n.add(a):Array.isArray(n)&&n.push(a),vb){let l=new Error().stack.split(`
`).slice(2,3).join(`
`).trim(),d=/(file:|vscode-file:\/\/vscode-app)?(\/[^:]*:\d+:\d+)/.exec(l);vb.register(a,d?.[2]??l,a)}return a},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let t=this._listeners,n=t.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,t[n]=void 0;let i=this._deliveryQueue.current===this;if(this._size*cW<=t.length){let o=0;for(let s=0;s<t.length;s++)t[s]?t[o++]=t[s]:i&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=o}}_deliver(e,t){if(!e)return;let n=this._options?.onListenerError||Ze;if(!n){e.value(t);return}try{e.value(t)}catch(i){n(i)}}_deliverQueue(e){let t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof ou)this._deliver(this._listeners,e);else{let t=this._deliveryQueue;t.enqueue(this,e,this._listeners.length),this._deliverQueue(t)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var OE=class{i=-1;end=0;current;value;enqueue(e,t,n){this.i=0,this.end=n,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},su=class extends x{_asyncDeliveryQueue;async fireAsync(e,t,n){if(this._listeners)for(this._asyncDeliveryQueue||(this._asyncDeliveryQueue=new ei),rP(this._listeners,i=>this._asyncDeliveryQueue.push([i.value,e]));this._asyncDeliveryQueue.size>0&&!t.isCancellationRequested;){let[i,o]=this._asyncDeliveryQueue.shift(),s=[],a={...o,token:t,waitUntil:l=>{if(Object.isFrozen(s))throw new Error("waitUntil can NOT be called asynchronous");n&&(l=n(l,i)),s.push(l)}};try{i(a)}catch(l){Ze(l);continue}Object.freeze(s),await Promise.allSettled(s).then(l=>{for(let d of l)d.status==="rejected"&&Ze(d.reason)})}}},dl=class extends x{_isPaused=0;_eventQueue=new ei;_mergeFn;get isPaused(){return this._isPaused!==0}constructor(e){super(e),this._mergeFn=e?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){let e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}},yb=class extends dl{_delay;_handle;constructor(e){super(e),this._delay=e.delay??100}fire(e){this._handle||(this.pause(),this._handle=setTimeout(()=>{this._handle=void 0,this.resume()},this._delay)),super.fire(e)}},Ib=class extends x{_queuedEvents=[];_mergeFn;constructor(e){super(e),this._mergeFn=e?.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}},Wh=class{emitter;hasListeners=!1;events=[];constructor(){this.emitter=new x({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){let t={event:e,listener:null};return this.events.push(t),this.hasListeners&&this.hook(t),ie(ol(()=>{this.hasListeners&&this.unhook(t);let i=this.events.indexOf(t);this.events.splice(i,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(t=>this.emitter.fire(t))}unhook(e){e.listener?.dispose(),e.listener=null}dispose(){this.emitter.dispose();for(let e of this.events)e.listener?.dispose();this.events=[]}};var cl=class{data=[];wrapEvent(e,t,n){return(i,o,s)=>e(a=>{let l=this.data[this.data.length-1];if(!t){l?l.buffers.push(()=>i.call(o,a)):i.call(o,a);return}let d=l;if(!d){i.call(o,t(n,a));return}d.items??=[],d.items.push(a),d.buffers.length===0&&l.buffers.push(()=>{d.reducedResult??=n?d.items.reduce(t,n):d.items.reduce(t),i.call(o,d.reducedResult)})},void 0,s)}bufferEvents(e){let t={buffers:new Array};this.data.push(t);let n=e();return this.data.pop(),t.buffers.forEach(i=>i()),n}},Cs=class{listening=!1;inputEvent=N.None;inputEventListener=P.None;emitter=new x({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}});event=this.emitter.event;set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}};var oP=Object.freeze(function(r,e){let t=setTimeout(r.bind(e),0);return{dispose(){clearTimeout(t)}}}),rt;(n=>{function r(i){return i===n.None||i===n.Cancelled||i instanceof au?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}n.isCancellationToken=r,n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:N.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:oP})})(rt||={});var au=class{_isCancelled=!1;_emitter=null;cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?oP:(this._emitter||(this._emitter=new x),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},xi=class{_token=void 0;_parentListener=void 0;constructor(e){this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new au),this._token}cancel(){this._token?this._token instanceof au&&this._token.cancel():this._token=rt.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof au&&this._token.dispose():this._token=rt.None}};function mr(r,e=0){return r[r.length-(1+e)]}function Sb(r){if(r.length===0)throw new Error("Invalid tail call");return[r.slice(0,r.length-1),r[r.length-1]]}function ln(r,e,t=(n,i)=>n===i){if(r===e)return!0;if(!r||!e||r.length!==e.length)return!1;for(let n=0,i=r.length;n<i;n++)if(!t(r[n],e[n]))return!1;return!0}function sP(r,e){let t=r.length-1;e<t&&(r[e]=r[t]),r.pop()}function aP(r,e,t){return pW(r.length,n=>t(r[n],e))}function pW(r,e){let t=0,n=r-1;for(;t<=n;){let i=(t+n)/2|0,o=e(i);if(o<0)t=i+1;else if(o>0)n=i-1;else return i}return-(t+1)}function vn(r){return r.filter(e=>!!e)}function ME(r){let e=0;for(let t=0;t<r.length;t++)r[t]&&(r[e]=r[t],e+=1);r.length=e}function lu(r){return Array.isArray(r)&&r.length>0}function di(r,e=t=>t){let t=new Set;return r.filter(n=>{let i=e(n);return t.has(i)?!1:(t.add(i),!0)})}function $n(r,e){let t=typeof e=="number"?r:0;typeof e=="number"?t=r:(t=0,e=r);let n=[];if(t<=e)for(let i=t;i<e;i++)n.push(i);else for(let i=t;i>e;i--)n.push(i);return n}function xb(r,e){return r.push(e),()=>hW(r,e)}function hW(r,e){let t=r.indexOf(e);if(t>-1)return r.splice(t,1),e}function ul(r,e,t){let n=r.slice(0,e),i=r.slice(e);return n.concat(t,i)}function NE(r,e){let t;if(typeof e=="number"){let n=e;t=()=>{let i=Math.sin(n++)*179426549;return i-Math.floor(i)}}else t=Math.random;for(let n=r.length-1;n>0;n-=1){let i=Math.floor(t()*(n+1)),o=r[n];r[n]=r[i],r[i]=o}}function Tb(r,e){let t=r.indexOf(e);t>-1&&(r.splice(t,1),r.unshift(e))}function zh(r,e){let t=r.indexOf(e);t>-1&&(r.splice(t,1),r.push(e))}function FE(r,e){for(let t of e)r.push(t)}function mW(r,e,t){let n=lP(r,e),i=r.length,o=t.length;r.length=i+o;for(let s=i-1;s>=n;s--)r[s+o]=r[s];for(let s=0;s<o;s++)r[s+n]=t[s]}function BE(r,e,t,n){let i=lP(r,e),o=r.splice(i,t);return o===void 0&&(o=[]),mW(r,i,n),o}function lP(r,e){return e<0?Math.max(e+r.length,0):Math.min(e,r.length)}var dP;(a=>{function r(l){return l<0}a.isLessThan=r;function e(l){return l<=0}a.isLessThanOrEqual=e;function t(l){return l>0}a.isGreaterThan=t;function n(l){return l===0}a.isNeitherLessOrGreaterThan=n,a.greaterThan=1,a.lessThan=-1,a.neitherLessOrGreaterThan=0})(dP||={});function UE(r,e){return(t,n)=>e(r(t),r(n))}var Pd=class{constructor(e){this.items=e}firstIdx=0;lastIdx=this.items.length-1;get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;let n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;let n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}},Sa=class r{constructor(e){this.iterate=e}static empty=new r(e=>{});forEach(e){this.iterate(t=>(e(t),!0))}toArray(){let e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new r(t=>this.iterate(n=>e(n)?t(n):!0))}map(e){return new r(t=>this.iterate(n=>t(e(n))))}some(e){let t=!1;return this.iterate(n=>(t=e(n),!t)),t}findFirst(e){let t;return this.iterate(n=>e(n)?(t=n,!1):!0),t}findLast(e){let t;return this.iterate(n=>(e(n)&&(t=n),!0)),t}findLastMaxBy(e){let t,n=!0;return this.iterate(i=>((n||dP.isGreaterThan(e(i,t)))&&(n=!1,t=i),!0)),t}};function cP(r,e){let t=new Set;for(let n of e)r.has(n)&&t.add(n);return t}function Hh(){return globalThis._VSCODE_NLS_MESSAGES}function Ad(){return globalThis._VSCODE_NLS_LANGUAGE}var gW=Ad()==="pseudo"||typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function Eb(r,e){let t;return e.length===0?t=r:t=r.replace(/\{(\d+)\}/g,(n,i)=>{let o=i[0],s=e[o],a=n;return typeof s=="string"?a=s:(typeof s=="number"||typeof s=="boolean"||s===void 0||s===null)&&(a=String(s)),a}),gW&&(t="\uFF3B"+t.replace(/[aouei]/g,"$&$&")+"\uFF3D"),t}function c(r,e,...t){return Eb(typeof r=="number"?uP(r,e):e,t)}function uP(r,e){let t=Hh()?.[r];if(typeof t!="string"){if(typeof e=="string")return e;throw new Error(`!!! NLS MISSING: ${r} !!!`)}return t}function ye(r,e,...t){let n;typeof r=="number"?n=uP(r,e):n=e;let i=Eb(n,t);return{value:i,original:e===n?i:Eb(e,t)}}var du="en",qh=!1,$h=!1,Gh=!1,fW=!1,gP=!1,VE=!1,bW=!1,WE=!1,vW=!1,fP=!1,Kh,wb=du,pP=du,yW,xa,Ta=globalThis,no;typeof Ta.vscode<"u"&&typeof Ta.vscode.process<"u"?no=Ta.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(no=process);var bP=typeof no?.versions?.electron=="string",IW=bP&&no?.type==="renderer";if(typeof no=="object"){qh=no.platform==="win32",$h=no.platform==="darwin",Gh=no.platform==="linux",fW=Gh&&!!no.env.SNAP&&!!no.env.SNAP_REVISION,bW=bP,vW=!!no.env.CI||!!no.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Kh=du,wb=du;let r=no.env.VSCODE_NLS_CONFIG;if(r)try{let e=JSON.parse(r);Kh=e.userLocale,pP=e.osLocale,wb=e.resolvedLanguage||du,yW=e.languagePack?.translationsConfigFile}catch{}gP=!0}else typeof navigator=="object"&&!IW?(xa=navigator.userAgent,qh=xa.indexOf("Windows")>=0,$h=xa.indexOf("Macintosh")>=0,WE=(xa.indexOf("Macintosh")>=0||xa.indexOf("iPad")>=0||xa.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Gh=xa.indexOf("Linux")>=0,fP=xa?.indexOf("Mobi")>=0,VE=!0,wb=Ad()||du,Kh=navigator.language.toLowerCase(),pP=Kh):console.error("Unable to resolve platform.");function zE(r){switch(r){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}var Cb=0;$h?Cb=1:qh?Cb=3:Gh&&(Cb=2);var xt=qh,ze=$h,Wt=Gh;var qo=gP;var _t=VE,SW=VE&&typeof Ta.importScripts=="function",vP=SW?Ta.origin:void 0,pl=WE,yP=fP;var kb=Cb,ks=xa,Io=wb,xW;(n=>{function r(){return Io}n.value=r;function e(){return Io.length===2?Io==="en":Io.length>=3?Io[0]==="e"&&Io[1]==="n"&&Io[2]==="-":!1}n.isDefaultVariant=e;function t(){return Io==="en"}n.isDefault=t})(xW||={});var IP=Kh;var TW=typeof Ta.postMessage=="function"&&!Ta.importScripts,Db=(()=>{if(TW){let r=[];Ta.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,i=r.length;n<i;n++){let o=r[n];if(o.id===t.data.vscodeScheduleAsyncWork){r.splice(n,1),o.callback();return}}});let e=0;return t=>{let n=++e;r.push({id:n,callback:t}),Ta.postMessage({vscodeScheduleAsyncWork:n},"*")}}return r=>setTimeout(r)})();var Ds=$h||WE?2:qh?1:3,hP=!0,mP=!1;function SP(){if(!mP){mP=!0;let r=new Uint8Array(2);r[0]=1,r[1]=2,hP=new Uint16Array(r.buffer)[0]===513}return hP}var jh=!!(ks&&ks.indexOf("Chrome")>=0),cu=!!(ks&&ks.indexOf("Firefox")>=0),_b=!!(!jh&&ks&&ks.indexOf("Safari")>=0),Rb=!!(ks&&ks.indexOf("Edg/")>=0),xP=!!(ks&&ks.indexOf("Android")>=0);var Od,HE=globalThis.vscode;if(typeof HE<"u"&&typeof HE.process<"u"){let r=HE.process;Od={get platform(){return r.platform},get arch(){return r.arch},get env(){return r.env},cwd(){return r.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?Od={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Od={get platform(){return xt?"win32":ze?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var Yh=Od.cwd,Ea=Od.env,KE=Od.platform,EW=Od.arch;var CW=65,kW=97,DW=90,_W=122,gl=46,Ei=47,Mr=92,hl=58,RW=63,Lb=class extends Error{code;constructor(e,t,n){let i;typeof t=="string"&&t.indexOf("not ")===0?(i="must not be",t=t.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",s=`The "${e}" ${o} ${i} of type ${t}`;s+=`. Received type ${typeof n}`,super(s),this.code="ERR_INVALID_ARG_TYPE"}};function LW(r,e){if(r===null||typeof r!="object")throw new Lb(e,"Object",r)}function Nn(r,e){if(typeof r!="string")throw new Lb(e,"string",r)}var Nr=KE==="win32";function ft(r){return r===Ei||r===Mr}function GE(r){return r===Ei}function ml(r){return r>=CW&&r<=DW||r>=kW&&r<=_W}function Pb(r,e,t,n){let i="",o=0,s=-1,a=0,l=0;for(let d=0;d<=r.length;++d){if(d<r.length)l=r.charCodeAt(d);else{if(n(l))break;l=Ei}if(n(l)){if(!(s===d-1||a===1))if(a===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==gl||i.charCodeAt(i.length-2)!==gl){if(i.length>2){let u=i.lastIndexOf(t);u===-1?(i="",o=0):(i=i.slice(0,u),o=i.length-1-i.lastIndexOf(t)),s=d,a=0;continue}else if(i.length!==0){i="",o=0,s=d,a=0;continue}}e&&(i+=i.length>0?`${t}..`:"..",o=2)}else i.length>0?i+=`${t}${r.slice(s+1,d)}`:i=r.slice(s+1,d),o=d-s-1;s=d,a=0}else l===gl&&a!==-1?++a:a=-1}return i}function PW(r){return r?`${r[0]==="."?"":"."}${r}`:""}function TP(r,e){LW(e,"pathObject");let t=e.dir||e.root,n=e.base||`${e.name||""}${PW(e.ext)}`;return t?t===e.root?`${t}${n}`:`${t}${r}${n}`:n}var wn={resolve(...r){let e="",t="",n=!1;for(let i=r.length-1;i>=-1;i--){let o;if(i>=0){if(o=r[i],Nn(o,`paths[${i}]`),o.length===0)continue}else e.length===0?o=Yh():(o=Ea[`=${e}`]||Yh(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Mr)&&(o=`${e}\\`));let s=o.length,a=0,l="",d=!1,u=o.charCodeAt(0);if(s===1)ft(u)&&(a=1,d=!0);else if(ft(u))if(d=!0,ft(o.charCodeAt(1))){let p=2,h=p;for(;p<s&&!ft(o.charCodeAt(p));)p++;if(p<s&&p!==h){let m=o.slice(h,p);for(h=p;p<s&&ft(o.charCodeAt(p));)p++;if(p<s&&p!==h){for(h=p;p<s&&!ft(o.charCodeAt(p));)p++;(p===s||p!==h)&&(l=`\\\\${m}\\${o.slice(h,p)}`,a=p)}}}else a=1;else ml(u)&&o.charCodeAt(1)===hl&&(l=o.slice(0,2),a=2,s>2&&ft(o.charCodeAt(2))&&(d=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(t=`${o.slice(a)}\\${t}`,n=d,d&&e.length>0)break}return t=Pb(t,!n,"\\",ft),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(r){Nn(r,"path");let e=r.length;if(e===0)return".";let t=0,n,i=!1,o=r.charCodeAt(0);if(e===1)return GE(o)?"\\":r;if(ft(o))if(i=!0,ft(r.charCodeAt(1))){let a=2,l=a;for(;a<e&&!ft(r.charCodeAt(a));)a++;if(a<e&&a!==l){let d=r.slice(l,a);for(l=a;a<e&&ft(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!ft(r.charCodeAt(a));)a++;if(a===e)return`\\\\${d}\\${r.slice(l)}\\`;a!==l&&(n=`\\\\${d}\\${r.slice(l,a)}`,t=a)}}}else t=1;else ml(o)&&r.charCodeAt(1)===hl&&(n=r.slice(0,2),t=2,e>2&&ft(r.charCodeAt(2))&&(i=!0,t=3));let s=t<e?Pb(r.slice(t),!i,"\\",ft):"";return s.length===0&&!i&&(s="."),s.length>0&&ft(r.charCodeAt(e-1))&&(s+="\\"),n===void 0?i?`\\${s}`:s:i?`${n}\\${s}`:`${n}${s}`},isAbsolute(r){Nn(r,"path");let e=r.length;if(e===0)return!1;let t=r.charCodeAt(0);return ft(t)||e>2&&ml(t)&&r.charCodeAt(1)===hl&&ft(r.charCodeAt(2))},join(...r){if(r.length===0)return".";let e,t;for(let o=0;o<r.length;++o){let s=r[o];Nn(s,"path"),s.length>0&&(e===void 0?e=t=s:e+=`\\${s}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof t=="string"&&ft(t.charCodeAt(0))){++i;let o=t.length;o>1&&ft(t.charCodeAt(1))&&(++i,o>2&&(ft(t.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&ft(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return wn.normalize(e)},relative(r,e){if(Nn(r,"from"),Nn(e,"to"),r===e)return"";let t=wn.resolve(r),n=wn.resolve(e);if(t===n||(r=t.toLowerCase(),e=n.toLowerCase(),r===e))return"";let i=0;for(;i<r.length&&r.charCodeAt(i)===Mr;)i++;let o=r.length;for(;o-1>i&&r.charCodeAt(o-1)===Mr;)o--;let s=o-i,a=0;for(;a<e.length&&e.charCodeAt(a)===Mr;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===Mr;)l--;let d=l-a,u=s<d?s:d,p=-1,h=0;for(;h<u;h++){let f=r.charCodeAt(i+h);if(f!==e.charCodeAt(a+h))break;f===Mr&&(p=h)}if(h!==u){if(p===-1)return n}else{if(d>u){if(e.charCodeAt(a+h)===Mr)return n.slice(a+h+1);if(h===2)return n.slice(a+h)}s>u&&(r.charCodeAt(i+h)===Mr?p=h:h===2&&(p=3)),p===-1&&(p=0)}let m="";for(h=i+p+1;h<=o;++h)(h===o||r.charCodeAt(h)===Mr)&&(m+=m.length===0?"..":"\\..");return a+=p,m.length>0?`${m}${n.slice(a,l)}`:(n.charCodeAt(a)===Mr&&++a,n.slice(a,l))},toNamespacedPath(r){if(typeof r!="string"||r.length===0)return r;let e=wn.resolve(r);if(e.length<=2)return r;if(e.charCodeAt(0)===Mr){if(e.charCodeAt(1)===Mr){let t=e.charCodeAt(2);if(t!==RW&&t!==gl)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(ml(e.charCodeAt(0))&&e.charCodeAt(1)===hl&&e.charCodeAt(2)===Mr)return`\\\\?\\${e}`;return r},dirname(r){Nn(r,"path");let e=r.length;if(e===0)return".";let t=-1,n=0,i=r.charCodeAt(0);if(e===1)return ft(i)?r:".";if(ft(i)){if(t=n=1,ft(r.charCodeAt(1))){let a=2,l=a;for(;a<e&&!ft(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&ft(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!ft(r.charCodeAt(a));)a++;if(a===e)return r;a!==l&&(t=n=a+1)}}}}else ml(i)&&r.charCodeAt(1)===hl&&(t=e>2&&ft(r.charCodeAt(2))?3:2,n=t);let o=-1,s=!0;for(let a=e-1;a>=n;--a)if(ft(r.charCodeAt(a))){if(!s){o=a;break}}else s=!1;if(o===-1){if(t===-1)return".";o=t}return r.slice(0,o)},basename(r,e){e!==void 0&&Nn(e,"suffix"),Nn(r,"path");let t=0,n=-1,i=!0,o;if(r.length>=2&&ml(r.charCodeAt(0))&&r.charCodeAt(1)===hl&&(t=2),e!==void 0&&e.length>0&&e.length<=r.length){if(e===r)return"";let s=e.length-1,a=-1;for(o=r.length-1;o>=t;--o){let l=r.charCodeAt(o);if(ft(l)){if(!i){t=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(l===e.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=a))}return t===n?n=a:n===-1&&(n=r.length),r.slice(t,n)}for(o=r.length-1;o>=t;--o)if(ft(r.charCodeAt(o))){if(!i){t=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":r.slice(t,n)},extname(r){Nn(r,"path");let e=0,t=-1,n=0,i=-1,o=!0,s=0;r.length>=2&&r.charCodeAt(1)===hl&&ml(r.charCodeAt(0))&&(e=n=2);for(let a=r.length-1;a>=e;--a){let l=r.charCodeAt(a);if(ft(l)){if(!o){n=a+1;break}continue}i===-1&&(o=!1,i=a+1),l===gl?t===-1?t=a:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||i===-1||s===0||s===1&&t===i-1&&t===n+1?"":r.slice(t,i)},format:TP.bind(null,"\\"),parse(r){Nn(r,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;let t=r.length,n=0,i=r.charCodeAt(0);if(t===1)return ft(i)?(e.root=e.dir=r,e):(e.base=e.name=r,e);if(ft(i)){if(n=1,ft(r.charCodeAt(1))){let p=2,h=p;for(;p<t&&!ft(r.charCodeAt(p));)p++;if(p<t&&p!==h){for(h=p;p<t&&ft(r.charCodeAt(p));)p++;if(p<t&&p!==h){for(h=p;p<t&&!ft(r.charCodeAt(p));)p++;p===t?n=p:p!==h&&(n=p+1)}}}}else if(ml(i)&&r.charCodeAt(1)===hl){if(t<=2)return e.root=e.dir=r,e;if(n=2,ft(r.charCodeAt(2))){if(t===3)return e.root=e.dir=r,e;n=3}}n>0&&(e.root=r.slice(0,n));let o=-1,s=n,a=-1,l=!0,d=r.length-1,u=0;for(;d>=n;--d){if(i=r.charCodeAt(d),ft(i)){if(!l){s=d+1;break}continue}a===-1&&(l=!1,a=d+1),i===gl?o===-1?o=d:u!==1&&(u=1):o!==-1&&(u=-1)}return a!==-1&&(o===-1||u===0||u===1&&o===a-1&&o===s+1?e.base=e.name=r.slice(s,a):(e.name=r.slice(s,o),e.base=r.slice(s,a),e.ext=r.slice(o,a))),s>0&&s!==n?e.dir=r.slice(0,s-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},AW=(()=>{if(Nr){let r=/\\/g;return()=>{let e=Yh().replace(r,"/");return e.slice(e.indexOf("/"))}}return()=>Yh()})(),bt={resolve(...r){let e="",t=!1;for(let n=r.length-1;n>=-1&&!t;n--){let i=n>=0?r[n]:AW();Nn(i,`paths[${n}]`),i.length!==0&&(e=`${i}/${e}`,t=i.charCodeAt(0)===Ei)}return e=Pb(e,!t,"/",GE),t?`/${e}`:e.length>0?e:"."},normalize(r){if(Nn(r,"path"),r.length===0)return".";let e=r.charCodeAt(0)===Ei,t=r.charCodeAt(r.length-1)===Ei;return r=Pb(r,!e,"/",GE),r.length===0?e?"/":t?"./":".":(t&&(r+="/"),e?`/${r}`:r)},isAbsolute(r){return Nn(r,"path"),r.length>0&&r.charCodeAt(0)===Ei},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){let n=r[t];Nn(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":bt.normalize(e)},relative(r,e){if(Nn(r,"from"),Nn(e,"to"),r===e||(r=bt.resolve(r),e=bt.resolve(e),r===e))return"";let t=1,n=r.length,i=n-t,o=1,s=e.length-o,a=i<s?i:s,l=-1,d=0;for(;d<a;d++){let p=r.charCodeAt(t+d);if(p!==e.charCodeAt(o+d))break;p===Ei&&(l=d)}if(d===a)if(s>a){if(e.charCodeAt(o+d)===Ei)return e.slice(o+d+1);if(d===0)return e.slice(o+d)}else i>a&&(r.charCodeAt(t+d)===Ei?l=d:d===0&&(l=0));let u="";for(d=t+l+1;d<=n;++d)(d===n||r.charCodeAt(d)===Ei)&&(u+=u.length===0?"..":"/..");return`${u}${e.slice(o+l)}`},toNamespacedPath(r){return r},dirname(r){if(Nn(r,"path"),r.length===0)return".";let e=r.charCodeAt(0)===Ei,t=-1,n=!0;for(let i=r.length-1;i>=1;--i)if(r.charCodeAt(i)===Ei){if(!n){t=i;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":r.slice(0,t)},basename(r,e){e!==void 0&&Nn(e,"ext"),Nn(r,"path");let t=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e===r)return"";let s=e.length-1,a=-1;for(o=r.length-1;o>=0;--o){let l=r.charCodeAt(o);if(l===Ei){if(!i){t=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(l===e.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=a))}return t===n?n=a:n===-1&&(n=r.length),r.slice(t,n)}for(o=r.length-1;o>=0;--o)if(r.charCodeAt(o)===Ei){if(!i){t=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":r.slice(t,n)},extname(r){Nn(r,"path");let e=-1,t=0,n=-1,i=!0,o=0;for(let s=r.length-1;s>=0;--s){let a=r.charCodeAt(s);if(a===Ei){if(!i){t=s+1;break}continue}n===-1&&(i=!1,n=s+1),a===gl?e===-1?e=s:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===t+1?"":r.slice(e,n)},format:TP.bind(null,"/"),parse(r){Nn(r,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;let t=r.charCodeAt(0)===Ei,n;t?(e.root="/",n=1):n=0;let i=-1,o=0,s=-1,a=!0,l=r.length-1,d=0;for(;l>=n;--l){let u=r.charCodeAt(l);if(u===Ei){if(!a){o=l+1;break}continue}s===-1&&(a=!1,s=l+1),u===gl?i===-1?i=l:d!==1&&(d=1):i!==-1&&(d=-1)}if(s!==-1){let u=o===0&&t?1:o;i===-1||d===0||d===1&&i===s-1&&i===o+1?e.base=e.name=r.slice(u,s):(e.name=r.slice(u,i),e.base=r.slice(u,s),e.ext=r.slice(i,s))}return o>0?e.dir=r.slice(0,o-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};bt.win32=wn.win32=wn;bt.posix=wn.posix=bt;var So=Nr?wn.normalize:bt.normalize,wa=Nr?wn.isAbsolute:bt.isAbsolute,Mi=Nr?wn.join:bt.join,uu=Nr?wn.resolve:bt.resolve,EP=Nr?wn.relative:bt.relative,Ab=Nr?wn.dirname:bt.dirname,fl=Nr?wn.basename:bt.basename,Md=Nr?wn.extname:bt.extname,zq=Nr?wn.format:bt.format,Hq=Nr?wn.parse:bt.parse,Kq=Nr?wn.toNamespacedPath:bt.toNamespacedPath,gr=Nr?wn.sep:bt.sep,Gq=Nr?wn.delimiter:bt.delimiter;var MW=/^\w[\w\d+.-]*$/,NW=/^\//,FW=/^\/\//;function BW(r,e){if(!r.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${r.authority}", path: "${r.path}", query: "${r.query}", fragment: "${r.fragment}"}`);if(r.scheme&&!MW.test(r.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(r.path){if(r.authority){if(!NW.test(r.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(FW.test(r.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function UW(r,e){return!r&&!e?"file":r}function VW(r,e){switch(r){case"https":case"http":case"file":e?e[0]!==$o&&(e=$o+e):e=$o;break}return e}var dn="",$o="/",WW=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,W=class r{static isUri(e){return e instanceof r?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,t,n,i,o,s=!1){typeof e=="object"?(this.scheme=e.scheme||dn,this.authority=e.authority||dn,this.path=e.path||dn,this.query=e.query||dn,this.fragment=e.fragment||dn):(this.scheme=UW(e,s),this.authority=t||dn,this.path=VW(this.scheme,n||dn),this.query=i||dn,this.fragment=o||dn,BW(this,s))}get fsPath(){return Xh(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:i,query:o,fragment:s}=e;return t===void 0?t=this.scheme:t===null&&(t=dn),n===void 0?n=this.authority:n===null&&(n=dn),i===void 0?i=this.path:i===null&&(i=dn),o===void 0?o=this.query:o===null&&(o=dn),s===void 0?s=this.fragment:s===null&&(s=dn),t===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&s===this.fragment?this:new bl(t,n,i,o,s)}static parse(e,t=!1){let n=WW.exec(e);return n?new bl(n[2]||dn,Ob(n[4]||dn),Ob(n[5]||dn),Ob(n[7]||dn),Ob(n[9]||dn),t):new bl(dn,dn,dn,dn,dn)}static file(e){let t=dn;if(xt&&(e=e.replace(/\\/g,$o)),e[0]===$o&&e[1]===$o){let n=e.indexOf($o,2);n===-1?(t=e.substring(2),e=$o):(t=e.substring(2,n),e=e.substring(n)||$o)}return new bl("file",t,e,dn,dn)}static from(e,t){return new bl(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return xt&&e.scheme==="file"?n=r.file(wn.join(Xh(e,!0),...t)).path:n=bt.join(e.path,...t),e.with({path:n})}toString(e=!1){return $E(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof r)return e;{let t=new bl(e);return t._formatted=e.external??null,t._fsPath=e._sep===kP?e.fsPath??null:null,t}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};var kP=xt?1:void 0,bl=class extends W{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=Xh(this,!1)),this._fsPath}toString(e=!1){return e?$E(this,!0):(this._formatted||(this._formatted=$E(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=kP),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},DP={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function wP(r,e,t){let n,i=-1;for(let o=0;o<r.length;o++){let s=r.charCodeAt(o);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||s===45||s===46||s===95||s===126||e&&s===47||t&&s===91||t&&s===93||t&&s===58)i!==-1&&(n+=encodeURIComponent(r.substring(i,o)),i=-1),n!==void 0&&(n+=r.charAt(o));else{n===void 0&&(n=r.substr(0,o));let a=DP[s];a!==void 0?(i!==-1&&(n+=encodeURIComponent(r.substring(i,o)),i=-1),n+=a):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(r.substring(i))),n!==void 0?n:r}function zW(r){let e;for(let t=0;t<r.length;t++){let n=r.charCodeAt(t);n===35||n===63?(e===void 0&&(e=r.substr(0,t)),e+=DP[n]):e!==void 0&&(e+=r[t])}return e!==void 0?e:r}function Xh(r,e){let t;return r.authority&&r.path.length>1&&r.scheme==="file"?t=`//${r.authority}${r.path}`:r.path.charCodeAt(0)===47&&(r.path.charCodeAt(1)>=65&&r.path.charCodeAt(1)<=90||r.path.charCodeAt(1)>=97&&r.path.charCodeAt(1)<=122)&&r.path.charCodeAt(2)===58?e?t=r.path.substr(1):t=r.path[1].toLowerCase()+r.path.substr(2):t=r.path,xt&&(t=t.replace(/\//g,"\\")),t}function $E(r,e){let t=e?zW:wP,n="",{scheme:i,authority:o,path:s,query:a,fragment:l}=r;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=$o,n+=$o),o){let d=o.indexOf("@");if(d!==-1){let u=o.substr(0,d);o=o.substr(d+1),d=u.lastIndexOf(":"),d===-1?n+=t(u,!1,!1):(n+=t(u.substr(0,d),!1,!1),n+=":",n+=t(u.substr(d+1),!1,!0)),n+="@"}o=o.toLowerCase(),d=o.lastIndexOf(":"),d===-1?n+=t(o,!1,!0):(n+=t(o.substr(0,d),!1,!0),n+=o.substr(d))}if(s){if(s.length>=3&&s.charCodeAt(0)===47&&s.charCodeAt(2)===58){let d=s.charCodeAt(1);d>=65&&d<=90&&(s=`/${String.fromCharCode(d+32)}:${s.substr(3)}`)}else if(s.length>=2&&s.charCodeAt(1)===58){let d=s.charCodeAt(0);d>=65&&d<=90&&(s=`${String.fromCharCode(d+32)}:${s.substr(2)}`)}n+=t(s,!0,!1)}return a&&(n+="?",n+=t(a,!1,!1)),l&&(n+="#",n+=e?l:wP(l,!1,!1)),n}function _P(r){try{return decodeURIComponent(r)}catch{return r.length>3?r.substr(0,3)+_P(r.substr(3)):r}}var CP=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Ob(r){return r.match(CP)?r.replace(CP,e=>_P(e)):r}function Qh(r,e,t){let n=r.get(e);return n===void 0&&(n=t,r.set(e,n)),n}var jE=class{constructor(e,t){this.uri=e;this.value=t}};function HW(r){return Array.isArray(r)}var ci=class r{static defaultToKey=e=>e.toString();[Symbol.toStringTag]="ResourceMap";map;toKey;constructor(e,t){if(e instanceof r)this.map=new Map(e.map),this.toKey=t??r.defaultToKey;else if(HW(e)){this.map=new Map,this.toKey=t??r.defaultToKey;for(let[n,i]of e)this.set(n,i)}else this.map=new Map,this.toKey=e??r.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new jE(e,t)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[Symbol.iterator](){for(let[,e]of this.map)yield[e.uri,e.value]}},Mb=class{[Symbol.toStringTag]="ResourceSet";_map;constructor(e,t){!e||typeof e=="function"?this._map=new ci(e):(this._map=new ci(t),e.forEach(this.add,this))}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,t){this._map.forEach((n,i)=>e.call(t,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[Symbol.iterator](){return this.keys()}};var YE=class{[Symbol.toStringTag]="LinkedMap";_map;_head;_tail;_size;_state;constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=0){let n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let i=this._map.get(e);if(i)i.value=t,n!==0&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._state,i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,t=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,t=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,t=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._tail,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.previous,n--;this._tail=t,this._size=n,t&&(t.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(let[t,n]of e)this.set(t,n)}},XE=class extends YE{_limit;_ratio;constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},xo=class extends XE{constructor(e,t=1){super(e,t)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}};var Nd=class{map=new Map;add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){let n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){let n=this.map.get(e);n&&n.forEach(t)}get(e){let t=this.map.get(e);return t||new Set}};var $e;(D=>{function r(_){return _&&typeof _=="object"&&typeof _[Symbol.iterator]=="function"}D.is=r;let e=Object.freeze([]);function t(){return e}D.empty=t;function*n(_){yield _}D.single=n;function i(_){return r(_)?_:n(_)}D.wrap=i;function o(_){return _||e}D.from=o;function*s(_){for(let O=_.length-1;O>=0;O--)yield _[O]}D.reverse=s;function a(_){return!_||_[Symbol.iterator]().next().done===!0}D.isEmpty=a;function l(_){return _[Symbol.iterator]().next().value}D.first=l;function d(_,O){let G=0;for(let Z of _)if(O(Z,G++))return!0;return!1}D.some=d;function u(_,O){for(let G of _)if(O(G))return G}D.find=u;function*p(_,O){for(let G of _)O(G)&&(yield G)}D.filter=p;function*h(_,O){let G=0;for(let Z of _)yield O(Z,G++)}D.map=h;function*m(_,O){let G=0;for(let Z of _)yield*O(Z,G++)}D.flatMap=m;function*f(..._){for(let O of _)yield*O}D.concat=f;function g(_,O,G){let Z=G;for(let M of _)Z=O(Z,M);return Z}D.reduce=g;function*y(_,O,G=_.length){for(O<0&&(O+=_.length),G<0?G+=_.length:G>_.length&&(G=_.length);O<G;O++)yield _[O]}D.slice=y;function T(_,O=Number.POSITIVE_INFINITY){let G=[];if(O===0)return[G,_];let Z=_[Symbol.iterator]();for(let M=0;M<O;M++){let H=Z.next();if(H.done)return[G,D.empty()];G.push(H.value)}return[G,{[Symbol.iterator](){return Z}}]}D.consume=T;async function E(_){let O=[];for await(let G of _)O.push(G);return Promise.resolve(O)}D.asyncToArray=E})($e||={});var KW=!1,Fd=null;function GW(r){Fd=r}if(KW){let r="__is_disposable_tracked__";GW(new class{trackDisposable(e){let t=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[r]||console.log(t)},3e3)}setParent(e,t){if(e&&e!==P.None)try{e[r]=!0}catch{}}markAsDisposed(e){if(e&&e!==P.None)try{e[r]=!0}catch{}}markAsSingleton(e){}})}function _d(r){return Fd?.trackDisposable(r),r}function Rd(r){Fd?.markAsDisposed(r)}function Jh(r,e){Fd?.setParent(r,e)}function qW(r,e){if(Fd)for(let t of r)Fd.setParent(t,e)}function vl(r){return Fd?.markAsSingleton(r),r}function Zh(r){return typeof r=="object"&&r!==null&&typeof r.dispose=="function"&&r.dispose.length===0}function vt(r){if($e.is(r)){let e=[];for(let t of r)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(r)?[]:r}else if(r)return r.dispose(),r}function RP(r){for(let e of r)Zh(e)&&e.dispose();return[]}function Ti(...r){let e=ie(()=>vt(r));return qW(r,e),e}function ie(r){let e=_d({dispose:ol(()=>{Rd(e),r()})});return e}var Q=class r{static DISABLE_DISPOSED_WARNING=!1;_toDispose=new Set;_isDisposed=!1;constructor(){_d(this)}dispose(){this._isDisposed||(Rd(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{vt(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return Jh(e,this),this._isDisposed?r.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),Jh(e,null))}},P=class{static None=Object.freeze({dispose(){}});_store=new Q;constructor(){_d(this),Jh(this._store,this)}dispose(){Rd(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}},Ut=class{_value;_isDisposed=!1;constructor(){_d(this)}get value(){return this._isDisposed?void 0:this._value}set value(e){this._isDisposed||e===this._value||(this._value?.dispose(),e&&Jh(e,this),this._value=e)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,Rd(this),this._value?.dispose(),this._value=void 0}clearAndLeak(){let e=this._value;return this._value=void 0,e&&Jh(e,null),e}};var hr=class{_store=new Map;_isDisposed=!1;constructor(){_d(this)}dispose(){Rd(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{vt(this._store.values())}finally{this._store.clear()}}has(e){return this._store.has(e)}get size(){return this._store.size}get(e){return this._store.get(e)}set(e,t,n=!1){this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),n||this._store.get(e)?.dispose(),this._store.set(e,t)}deleteAndDispose(e){this._store.get(e)?.dispose(),this._store.delete(e)}deleteAndLeak(e){let t=this._store.get(e);return this._store.delete(e),t}keys(){return this._store.keys()}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}};var un=class extends P{_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;_id;_label;_tooltip;_cssClass;_enabled=!0;_checked;_actionCallback;constructor(e,t="",n="",i=!0,o){super(),this._id=e,this._label=t,this._cssClass=n,this._enabled=i,this._actionCallback=o}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}},io=class extends P{_onWillRun=this._register(new x);onWillRun=this._onWillRun.event;_onDidRun=this._register(new x);onDidRun=this._onDidRun.event;async run(e,t){if(!e.enabled)return;this._onWillRun.fire({action:e});let n;try{await this.runAction(e,t)}catch(i){n=i}this._onDidRun.fire({action:e,error:n})}async runAction(e,t){await e.run(t)}},Yt=class r{static join(...e){let t=[];for(let n of e)n.length&&(t.length?t=[...t,new r,...n]:t=n);return t}static ID="vs.actions.separator";id=r.ID;label="";tooltip="";class="separator";enabled=!1;checked=!1;async run(){}},Ca=class{id;label;class;tooltip="";enabled=!0;checked=void 0;_actions;get actions(){return this._actions}constructor(e,t,n,i){this.id=e,this.label=t,this.class=i,this._actions=n}async run(){}};function ui(r){return{id:r.id,label:r.label,tooltip:r.tooltip??r.label,class:r.class,enabled:r.enabled??!0,checked:r.checked,run:async(...e)=>r.run(...e)}}function lt(r){return typeof r=="string"}function QE(r){return Array.isArray(r)&&r.every(e=>lt(e))}function fn(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&!(r instanceof RegExp)&&!(r instanceof Date)}function fr(r){return typeof r=="number"&&!isNaN(r)}function JE(r){return!!r&&typeof r[Symbol.iterator]=="function"}function em(r){return r===!0||r===!1}function jn(r){return typeof r>"u"}function LP(r){return!zt(r)}function zt(r){return jn(r)||r===null}function pu(r,e){if(!r)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function Rt(r){if(zt(r))throw new Error("Assertion Failed: argument is undefined or null");return r}var $W=Object.prototype.hasOwnProperty;function Bd(r){if(!fn(r))return!1;for(let e in r)if($W.call(r,e))return!1;return!0}function tm(r){return typeof r=="function"}function PP(r,e){let t=Math.min(r.length,e.length);for(let n=0;n<t;n++)jW(r[n],e[n])}function jW(r,e){if(lt(e)){if(typeof r!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(tm(e)){try{if(r instanceof e)return}catch{}if(!zt(r)&&r.constructor===e||e.length===1&&e.call(void 0,r)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}var ZE=Object.create(null);function b(r,e){if(lt(e)){let t=ZE[e];if(t===void 0)throw new Error(`${r} references an unknown codicon: ${e}`);e=t}return ZE[r]=e,{id:r}}function ew(){return ZE}var AP={add:b("add",6e4),plus:b("plus",6e4),gistNew:b("gist-new",6e4),repoCreate:b("repo-create",6e4),lightbulb:b("lightbulb",60001),lightBulb:b("light-bulb",60001),repo:b("repo",60002),repoDelete:b("repo-delete",60002),gistFork:b("gist-fork",60003),repoForked:b("repo-forked",60003),gitPullRequest:b("git-pull-request",60004),gitPullRequestAbandoned:b("git-pull-request-abandoned",60004),recordKeys:b("record-keys",60005),keyboard:b("keyboard",60005),tag:b("tag",60006),gitPullRequestLabel:b("git-pull-request-label",60006),tagAdd:b("tag-add",60006),tagRemove:b("tag-remove",60006),person:b("person",60007),personFollow:b("person-follow",60007),personOutline:b("person-outline",60007),personFilled:b("person-filled",60007),gitBranch:b("git-branch",60008),gitBranchCreate:b("git-branch-create",60008),gitBranchDelete:b("git-branch-delete",60008),sourceControl:b("source-control",60008),mirror:b("mirror",60009),mirrorPublic:b("mirror-public",60009),star:b("star",60010),starAdd:b("star-add",60010),starDelete:b("star-delete",60010),starEmpty:b("star-empty",60010),comment:b("comment",60011),commentAdd:b("comment-add",60011),alert:b("alert",60012),warning:b("warning",60012),search:b("search",60013),searchSave:b("search-save",60013),logOut:b("log-out",60014),signOut:b("sign-out",60014),logIn:b("log-in",60015),signIn:b("sign-in",60015),eye:b("eye",60016),eyeUnwatch:b("eye-unwatch",60016),eyeWatch:b("eye-watch",60016),circleFilled:b("circle-filled",60017),primitiveDot:b("primitive-dot",60017),closeDirty:b("close-dirty",60017),debugBreakpoint:b("debug-breakpoint",60017),debugBreakpointDisabled:b("debug-breakpoint-disabled",60017),debugHint:b("debug-hint",60017),terminalDecorationSuccess:b("terminal-decoration-success",60017),primitiveSquare:b("primitive-square",60018),edit:b("edit",60019),pencil:b("pencil",60019),info:b("info",60020),issueOpened:b("issue-opened",60020),gistPrivate:b("gist-private",60021),gitForkPrivate:b("git-fork-private",60021),lock:b("lock",60021),mirrorPrivate:b("mirror-private",60021),close:b("close",60022),removeClose:b("remove-close",60022),x:b("x",60022),repoSync:b("repo-sync",60023),sync:b("sync",60023),clone:b("clone",60024),desktopDownload:b("desktop-download",60024),beaker:b("beaker",60025),microscope:b("microscope",60025),vm:b("vm",60026),deviceDesktop:b("device-desktop",60026),file:b("file",60027),fileText:b("file-text",60027),more:b("more",60028),ellipsis:b("ellipsis",60028),kebabHorizontal:b("kebab-horizontal",60028),mailReply:b("mail-reply",60029),reply:b("reply",60029),organization:b("organization",60030),organizationFilled:b("organization-filled",60030),organizationOutline:b("organization-outline",60030),newFile:b("new-file",60031),fileAdd:b("file-add",60031),newFolder:b("new-folder",60032),fileDirectoryCreate:b("file-directory-create",60032),trash:b("trash",60033),trashcan:b("trashcan",60033),history:b("history",60034),clock:b("clock",60034),folder:b("folder",60035),fileDirectory:b("file-directory",60035),symbolFolder:b("symbol-folder",60035),logoGithub:b("logo-github",60036),markGithub:b("mark-github",60036),github:b("github",60036),terminal:b("terminal",60037),console:b("console",60037),repl:b("repl",60037),zap:b("zap",60038),symbolEvent:b("symbol-event",60038),error:b("error",60039),stop:b("stop",60039),variable:b("variable",60040),symbolVariable:b("symbol-variable",60040),array:b("array",60042),symbolArray:b("symbol-array",60042),symbolModule:b("symbol-module",60043),symbolPackage:b("symbol-package",60043),symbolNamespace:b("symbol-namespace",60043),symbolObject:b("symbol-object",60043),symbolMethod:b("symbol-method",60044),symbolFunction:b("symbol-function",60044),symbolConstructor:b("symbol-constructor",60044),symbolBoolean:b("symbol-boolean",60047),symbolNull:b("symbol-null",60047),symbolNumeric:b("symbol-numeric",60048),symbolNumber:b("symbol-number",60048),symbolStructure:b("symbol-structure",60049),symbolStruct:b("symbol-struct",60049),symbolParameter:b("symbol-parameter",60050),symbolTypeParameter:b("symbol-type-parameter",60050),symbolKey:b("symbol-key",60051),symbolText:b("symbol-text",60051),symbolReference:b("symbol-reference",60052),goToFile:b("go-to-file",60052),symbolEnum:b("symbol-enum",60053),symbolValue:b("symbol-value",60053),symbolRuler:b("symbol-ruler",60054),symbolUnit:b("symbol-unit",60054),activateBreakpoints:b("activate-breakpoints",60055),archive:b("archive",60056),arrowBoth:b("arrow-both",60057),arrowDown:b("arrow-down",60058),arrowLeft:b("arrow-left",60059),arrowRight:b("arrow-right",60060),arrowSmallDown:b("arrow-small-down",60061),arrowSmallLeft:b("arrow-small-left",60062),arrowSmallRight:b("arrow-small-right",60063),arrowSmallUp:b("arrow-small-up",60064),arrowUp:b("arrow-up",60065),bell:b("bell",60066),bold:b("bold",60067),book:b("book",60068),bookmark:b("bookmark",60069),debugBreakpointConditionalUnverified:b("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:b("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:b("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:b("debug-breakpoint-data-unverified",60072),debugBreakpointData:b("debug-breakpoint-data",60073),debugBreakpointDataDisabled:b("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:b("debug-breakpoint-log-unverified",60074),debugBreakpointLog:b("debug-breakpoint-log",60075),debugBreakpointLogDisabled:b("debug-breakpoint-log-disabled",60075),briefcase:b("briefcase",60076),broadcast:b("broadcast",60077),browser:b("browser",60078),bug:b("bug",60079),calendar:b("calendar",60080),caseSensitive:b("case-sensitive",60081),check:b("check",60082),checklist:b("checklist",60083),chevronDown:b("chevron-down",60084),chevronLeft:b("chevron-left",60085),chevronRight:b("chevron-right",60086),chevronUp:b("chevron-up",60087),chromeClose:b("chrome-close",60088),chromeMaximize:b("chrome-maximize",60089),chromeMinimize:b("chrome-minimize",60090),chromeRestore:b("chrome-restore",60091),circleOutline:b("circle-outline",60092),circle:b("circle",60092),debugBreakpointUnverified:b("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:b("terminal-decoration-incomplete",60092),circleSlash:b("circle-slash",60093),circuitBoard:b("circuit-board",60094),clearAll:b("clear-all",60095),clippy:b("clippy",60096),closeAll:b("close-all",60097),cloudDownload:b("cloud-download",60098),cloudUpload:b("cloud-upload",60099),code:b("code",60100),collapseAll:b("collapse-all",60101),colorMode:b("color-mode",60102),commentDiscussion:b("comment-discussion",60103),creditCard:b("credit-card",60105),dash:b("dash",60108),dashboard:b("dashboard",60109),database:b("database",60110),debugContinue:b("debug-continue",60111),debugDisconnect:b("debug-disconnect",60112),debugPause:b("debug-pause",60113),debugRestart:b("debug-restart",60114),debugStart:b("debug-start",60115),debugStepInto:b("debug-step-into",60116),debugStepOut:b("debug-step-out",60117),debugStepOver:b("debug-step-over",60118),debugStop:b("debug-stop",60119),debug:b("debug",60120),deviceCameraVideo:b("device-camera-video",60121),deviceCamera:b("device-camera",60122),deviceMobile:b("device-mobile",60123),diffAdded:b("diff-added",60124),diffIgnored:b("diff-ignored",60125),diffModified:b("diff-modified",60126),diffRemoved:b("diff-removed",60127),diffRenamed:b("diff-renamed",60128),diff:b("diff",60129),diffSidebyside:b("diff-sidebyside",60129),discard:b("discard",60130),editorLayout:b("editor-layout",60131),emptyWindow:b("empty-window",60132),exclude:b("exclude",60133),extensions:b("extensions",60134),eyeClosed:b("eye-closed",60135),fileBinary:b("file-binary",60136),fileCode:b("file-code",60137),fileMedia:b("file-media",60138),filePdf:b("file-pdf",60139),fileSubmodule:b("file-submodule",60140),fileSymlinkDirectory:b("file-symlink-directory",60141),fileSymlinkFile:b("file-symlink-file",60142),fileZip:b("file-zip",60143),files:b("files",60144),filter:b("filter",60145),flame:b("flame",60146),foldDown:b("fold-down",60147),foldUp:b("fold-up",60148),fold:b("fold",60149),folderActive:b("folder-active",60150),folderOpened:b("folder-opened",60151),gear:b("gear",60152),gift:b("gift",60153),gistSecret:b("gist-secret",60154),gist:b("gist",60155),gitCommit:b("git-commit",60156),gitCompare:b("git-compare",60157),compareChanges:b("compare-changes",60157),gitMerge:b("git-merge",60158),githubAction:b("github-action",60159),githubAlt:b("github-alt",60160),globe:b("globe",60161),grabber:b("grabber",60162),graph:b("graph",60163),gripper:b("gripper",60164),heart:b("heart",60165),home:b("home",60166),horizontalRule:b("horizontal-rule",60167),hubot:b("hubot",60168),inbox:b("inbox",60169),issueReopened:b("issue-reopened",60171),issues:b("issues",60172),italic:b("italic",60173),jersey:b("jersey",60174),json:b("json",60175),kebabVertical:b("kebab-vertical",60176),key:b("key",60177),law:b("law",60178),lightbulbAutofix:b("lightbulb-autofix",60179),linkExternal:b("link-external",60180),link:b("link",60181),listOrdered:b("list-ordered",60182),listUnordered:b("list-unordered",60183),liveShare:b("live-share",60184),loading:b("loading",60185),location:b("location",60186),mailRead:b("mail-read",60187),mail:b("mail",60188),markdown:b("markdown",60189),megaphone:b("megaphone",60190),mention:b("mention",60191),milestone:b("milestone",60192),gitPullRequestMilestone:b("git-pull-request-milestone",60192),mortarBoard:b("mortar-board",60193),move:b("move",60194),multipleWindows:b("multiple-windows",60195),mute:b("mute",60196),noNewline:b("no-newline",60197),note:b("note",60198),octoface:b("octoface",60199),openPreview:b("open-preview",60200),package:b("package",60201),paintcan:b("paintcan",60202),pin:b("pin",60203),play:b("play",60204),run:b("run",60204),plug:b("plug",60205),preserveCase:b("preserve-case",60206),preview:b("preview",60207),project:b("project",60208),pulse:b("pulse",60209),question:b("question",60210),quote:b("quote",60211),radioTower:b("radio-tower",60212),reactions:b("reactions",60213),references:b("references",60214),refresh:b("refresh",60215),regex:b("regex",60216),remoteExplorer:b("remote-explorer",60217),remote:b("remote",60218),remove:b("remove",60219),replaceAll:b("replace-all",60220),replace:b("replace",60221),repoClone:b("repo-clone",60222),repoForcePush:b("repo-force-push",60223),repoPull:b("repo-pull",60224),repoPush:b("repo-push",60225),report:b("report",60226),requestChanges:b("request-changes",60227),rocket:b("rocket",60228),rootFolderOpened:b("root-folder-opened",60229),rootFolder:b("root-folder",60230),rss:b("rss",60231),ruby:b("ruby",60232),saveAll:b("save-all",60233),saveAs:b("save-as",60234),save:b("save",60235),screenFull:b("screen-full",60236),screenNormal:b("screen-normal",60237),searchStop:b("search-stop",60238),server:b("server",60240),settingsGear:b("settings-gear",60241),settings:b("settings",60242),shield:b("shield",60243),smiley:b("smiley",60244),sortPrecedence:b("sort-precedence",60245),splitHorizontal:b("split-horizontal",60246),splitVertical:b("split-vertical",60247),squirrel:b("squirrel",60248),starFull:b("star-full",60249),starHalf:b("star-half",60250),symbolClass:b("symbol-class",60251),symbolColor:b("symbol-color",60252),symbolConstant:b("symbol-constant",60253),symbolEnumMember:b("symbol-enum-member",60254),symbolField:b("symbol-field",60255),symbolFile:b("symbol-file",60256),symbolInterface:b("symbol-interface",60257),symbolKeyword:b("symbol-keyword",60258),symbolMisc:b("symbol-misc",60259),symbolOperator:b("symbol-operator",60260),symbolProperty:b("symbol-property",60261),wrench:b("wrench",60261),wrenchSubaction:b("wrench-subaction",60261),symbolSnippet:b("symbol-snippet",60262),tasklist:b("tasklist",60263),telescope:b("telescope",60264),textSize:b("text-size",60265),threeBars:b("three-bars",60266),thumbsdown:b("thumbsdown",60267),thumbsup:b("thumbsup",60268),tools:b("tools",60269),triangleDown:b("triangle-down",60270),triangleLeft:b("triangle-left",60271),triangleRight:b("triangle-right",60272),triangleUp:b("triangle-up",60273),twitter:b("twitter",60274),unfold:b("unfold",60275),unlock:b("unlock",60276),unmute:b("unmute",60277),unverified:b("unverified",60278),verified:b("verified",60279),versions:b("versions",60280),vmActive:b("vm-active",60281),vmOutline:b("vm-outline",60282),vmRunning:b("vm-running",60283),watch:b("watch",60284),whitespace:b("whitespace",60285),wholeWord:b("whole-word",60286),window:b("window",60287),wordWrap:b("word-wrap",60288),zoomIn:b("zoom-in",60289),zoomOut:b("zoom-out",60290),listFilter:b("list-filter",60291),listFlat:b("list-flat",60292),listSelection:b("list-selection",60293),selection:b("selection",60293),listTree:b("list-tree",60294),debugBreakpointFunctionUnverified:b("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:b("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:b("debug-breakpoint-function-disabled",60296),debugStackframeActive:b("debug-stackframe-active",60297),circleSmallFilled:b("circle-small-filled",60298),debugStackframeDot:b("debug-stackframe-dot",60298),terminalDecorationMark:b("terminal-decoration-mark",60298),debugStackframe:b("debug-stackframe",60299),debugStackframeFocused:b("debug-stackframe-focused",60299),debugBreakpointUnsupported:b("debug-breakpoint-unsupported",60300),symbolString:b("symbol-string",60301),debugReverseContinue:b("debug-reverse-continue",60302),debugStepBack:b("debug-step-back",60303),debugRestartFrame:b("debug-restart-frame",60304),debugAlt:b("debug-alt",60305),callIncoming:b("call-incoming",60306),callOutgoing:b("call-outgoing",60307),menu:b("menu",60308),expandAll:b("expand-all",60309),feedback:b("feedback",60310),gitPullRequestReviewer:b("git-pull-request-reviewer",60310),groupByRefType:b("group-by-ref-type",60311),ungroupByRefType:b("ungroup-by-ref-type",60312),account:b("account",60313),gitPullRequestAssignee:b("git-pull-request-assignee",60313),bellDot:b("bell-dot",60314),debugConsole:b("debug-console",60315),library:b("library",60316),output:b("output",60317),runAll:b("run-all",60318),syncIgnored:b("sync-ignored",60319),pinned:b("pinned",60320),githubInverted:b("github-inverted",60321),serverProcess:b("server-process",60322),serverEnvironment:b("server-environment",60323),pass:b("pass",60324),issueClosed:b("issue-closed",60324),stopCircle:b("stop-circle",60325),playCircle:b("play-circle",60326),record:b("record",60327),debugAltSmall:b("debug-alt-small",60328),vmConnect:b("vm-connect",60329),cloud:b("cloud",60330),merge:b("merge",60331),export:b("export",60332),graphLeft:b("graph-left",60333),magnet:b("magnet",60334),notebook:b("notebook",60335),redo:b("redo",60336),checkAll:b("check-all",60337),pinnedDirty:b("pinned-dirty",60338),passFilled:b("pass-filled",60339),circleLargeFilled:b("circle-large-filled",60340),circleLarge:b("circle-large",60341),circleLargeOutline:b("circle-large-outline",60341),combine:b("combine",60342),gather:b("gather",60342),table:b("table",60343),variableGroup:b("variable-group",60344),typeHierarchy:b("type-hierarchy",60345),typeHierarchySub:b("type-hierarchy-sub",60346),typeHierarchySuper:b("type-hierarchy-super",60347),gitPullRequestCreate:b("git-pull-request-create",60348),runAbove:b("run-above",60349),runBelow:b("run-below",60350),notebookTemplate:b("notebook-template",60351),debugRerun:b("debug-rerun",60352),workspaceTrusted:b("workspace-trusted",60353),workspaceUntrusted:b("workspace-untrusted",60354),workspaceUnknown:b("workspace-unknown",60355),terminalCmd:b("terminal-cmd",60356),terminalDebian:b("terminal-debian",60357),terminalLinux:b("terminal-linux",60358),terminalPowershell:b("terminal-powershell",60359),terminalTmux:b("terminal-tmux",60360),terminalUbuntu:b("terminal-ubuntu",60361),terminalBash:b("terminal-bash",60362),arrowSwap:b("arrow-swap",60363),copy:b("copy",60364),personAdd:b("person-add",60365),filterFilled:b("filter-filled",60366),wand:b("wand",60367),debugLineByLine:b("debug-line-by-line",60368),inspect:b("inspect",60369),layers:b("layers",60370),layersDot:b("layers-dot",60371),layersActive:b("layers-active",60372),compass:b("compass",60373),compassDot:b("compass-dot",60374),compassActive:b("compass-active",60375),azure:b("azure",60376),issueDraft:b("issue-draft",60377),gitPullRequestClosed:b("git-pull-request-closed",60378),gitPullRequestDraft:b("git-pull-request-draft",60379),debugAll:b("debug-all",60380),debugCoverage:b("debug-coverage",60381),runErrors:b("run-errors",60382),folderLibrary:b("folder-library",60383),debugContinueSmall:b("debug-continue-small",60384),beakerStop:b("beaker-stop",60385),graphLine:b("graph-line",60386),graphScatter:b("graph-scatter",60387),pieChart:b("pie-chart",60388),bracket:b("bracket",60175),bracketDot:b("bracket-dot",60389),bracketError:b("bracket-error",60390),lockSmall:b("lock-small",60391),azureDevops:b("azure-devops",60392),verifiedFilled:b("verified-filled",60393),newline:b("newline",60394),layout:b("layout",60395),layoutActivitybarLeft:b("layout-activitybar-left",60396),layoutActivitybarRight:b("layout-activitybar-right",60397),layoutPanelLeft:b("layout-panel-left",60398),layoutPanelCenter:b("layout-panel-center",60399),layoutPanelJustify:b("layout-panel-justify",60400),layoutPanelRight:b("layout-panel-right",60401),layoutPanel:b("layout-panel",60402),layoutSidebarLeft:b("layout-sidebar-left",60403),layoutSidebarRight:b("layout-sidebar-right",60404),layoutStatusbar:b("layout-statusbar",60405),layoutMenubar:b("layout-menubar",60406),layoutCentered:b("layout-centered",60407),target:b("target",60408),indent:b("indent",60409),recordSmall:b("record-small",60410),errorSmall:b("error-small",60411),terminalDecorationError:b("terminal-decoration-error",60411),arrowCircleDown:b("arrow-circle-down",60412),arrowCircleLeft:b("arrow-circle-left",60413),arrowCircleRight:b("arrow-circle-right",60414),arrowCircleUp:b("arrow-circle-up",60415),layoutSidebarRightOff:b("layout-sidebar-right-off",60416),layoutPanelOff:b("layout-panel-off",60417),layoutSidebarLeftOff:b("layout-sidebar-left-off",60418),blank:b("blank",60419),heartFilled:b("heart-filled",60420),map:b("map",60421),mapHorizontal:b("map-horizontal",60421),foldHorizontal:b("fold-horizontal",60421),mapFilled:b("map-filled",60422),mapHorizontalFilled:b("map-horizontal-filled",60422),foldHorizontalFilled:b("fold-horizontal-filled",60422),circleSmall:b("circle-small",60423),bellSlash:b("bell-slash",60424),bellSlashDot:b("bell-slash-dot",60425),commentUnresolved:b("comment-unresolved",60426),gitPullRequestGoToChanges:b("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:b("git-pull-request-new-changes",60428),searchFuzzy:b("search-fuzzy",60429),commentDraft:b("comment-draft",60430),send:b("send",60431),sparkle:b("sparkle",60432),insert:b("insert",60433),mic:b("mic",60434),thumbsdownFilled:b("thumbsdown-filled",60435),thumbsupFilled:b("thumbsup-filled",60436),coffee:b("coffee",60437),snake:b("snake",60438),game:b("game",60439),vr:b("vr",60440),chip:b("chip",60441),piano:b("piano",60442),music:b("music",60443),micFilled:b("mic-filled",60444),repoFetch:b("repo-fetch",60445),copilot:b("copilot",60446),lightbulbSparkle:b("lightbulb-sparkle",60447),robot:b("robot",60448),sparkleFilled:b("sparkle-filled",60449),diffSingle:b("diff-single",60450),diffMultiple:b("diff-multiple",60451),surroundWith:b("surround-with",60452),share:b("share",60453),gitStash:b("git-stash",60454),gitStashApply:b("git-stash-apply",60455),gitStashPop:b("git-stash-pop",60456),vscode:b("vscode",60457),vscodeInsiders:b("vscode-insiders",60458),codeOss:b("code-oss",60459),runCoverage:b("run-coverage",60460),runAllCoverage:b("run-all-coverage",60461),coverage:b("coverage",60462),githubProject:b("github-project",60463),mapVertical:b("map-vertical",60464),foldVertical:b("fold-vertical",60464),mapVerticalFilled:b("map-vertical-filled",60465),foldVerticalFilled:b("fold-vertical-filled",60465),goToSearch:b("go-to-search",60466),percentage:b("percentage",60467),sortPercentage:b("sort-percentage",60467),attach:b("attach",60468)};var YW={dialogError:b("dialog-error","error"),dialogWarning:b("dialog-warning","warning"),dialogInfo:b("dialog-info","info"),dialogClose:b("dialog-close","close"),treeItemExpanded:b("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:b("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:b("tree-filter-on-type-off","list-selection"),treeFilterClear:b("tree-filter-clear","close"),treeItemLoading:b("tree-item-loading","loading"),menuSelection:b("menu-selection","check"),menuSubmenu:b("menu-submenu","chevron-right"),menuBarMore:b("menubar-more","more"),scrollbarButtonLeft:b("scrollbar-button-left","triangle-left"),scrollbarButtonRight:b("scrollbar-button-right","triangle-right"),scrollbarButtonUp:b("scrollbar-button-up","triangle-up"),scrollbarButtonDown:b("scrollbar-button-down","triangle-down"),toolBarMore:b("toolbar-more","more"),quickInputBack:b("quick-input-back","arrow-left"),dropDownButton:b("drop-down-button",60084),symbolCustomColor:b("symbol-customcolor",60252),exportIcon:b("export",60332),workspaceUnspecified:b("workspace-unspecified",60355),newLine:b("newline",60394),thumbsDownFilled:b("thumbsdown-filled",60435),thumbsUpFilled:b("thumbsup-filled",60436),gitFetch:b("git-fetch",60445),lightbulbSparkleAutofix:b("lightbulb-sparkle-autofix",60447),debugBreakpointPending:b("debug-breakpoint-pending",60377)},z={...AP,...YW};var OP;(e=>{function r(t){return t&&typeof t=="object"&&typeof t.id=="string"}e.isThemeColor=r})(OP||={});var qe;(g=>{g.iconNameSegment="[A-Za-z0-9]+",g.iconNameExpression="[A-Za-z0-9-]+",g.iconModifierExpression="~[A-Za-z]+",g.iconNameCharacter="[A-Za-z0-9~-]";let i=new RegExp(`^(${g.iconNameExpression})(${g.iconModifierExpression})?$`);function o(y){let T=i.exec(y.id);if(!T)return o(z.error);let[,E,D]=T,_=["codicon","codicon-"+E];return D&&_.push("codicon-modifier-"+D.substring(1)),_}g.asClassNameArray=o;function s(y){return o(y).join(" ")}g.asClassName=s;function a(y){return"."+o(y).join(".")}g.asCSSSelector=a;function l(y){return y&&typeof y=="object"&&typeof y.id=="string"&&(typeof y.color>"u"||OP.isThemeColor(y.color))}g.isThemeIcon=l;let d=new RegExp(`^\\$\\((${g.iconNameExpression}(?:${g.iconModifierExpression})?)\\)$`);function u(y){let T=d.exec(y);if(!T)return;let[,E]=T;return{id:E}}g.fromString=u;function p(y){return{id:y}}g.fromId=p;function h(y,T){let E=y.id,D=E.lastIndexOf("~");return D!==-1&&(E=E.substring(0,D)),T&&(E=`${E}~${T}`),{id:E}}g.modify=h;function m(y){let T=y.id.lastIndexOf("~");if(T!==-1)return y.id.substring(T+1)}g.getModifier=m;function f(y,T){return y.id===T.id&&y.color?.id===T.color?.id}g.isEqual=f})(qe||={});function MP(r){return r}var Nb=class{lastCache=void 0;lastArgKey=void 0;_fn;_computeKey;constructor(e,t){typeof e=="function"?(this._fn=e,this._computeKey=MP):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){let t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}},nm=class{_map=new Map;_map2=new Map;get cachedValues(){return this._map}_fn;_computeKey;constructor(e,t){typeof e=="function"?(this._fn=e,this._computeKey=MP):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){let t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);let n=this._fn(e);return this._map.set(e,n),this._map2.set(t,n),n}};var Fn=class{constructor(e){this.executor=e}_didRun=!1;_value;_error;get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};function tw(r){return r<0?0:r>255?255:r|0}function UP(r){return!r||typeof r!="string"?!0:r.trim().length===0}function VP(r){return r.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}function rm(r){return r.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function Ni(r){return r.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function Bb(r,e){if(!r||!e)return r;let t=e.length;if(t===0||r.length===0)return r;let n=0;for(;r.indexOf(e,n)===n;)n=n+t;return r.substring(n)}function Ub(r,e,t={}){if(!r)throw new Error("Cannot create regex from empty string");e||(r=Ni(r)),t.wholeWord&&(/\B/.test(r.charAt(0))||(r="\\b"+r),/\B/.test(r.charAt(r.length-1))||(r=r+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(r,n)}function WP(r){return r.split(/\r\n|\r|\n/)}function ka(r){for(let e=0,t=r.length;e<t;e++){let n=r.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function rw(r,e=r.length-1){for(let t=e;t>=0;t--){let n=r.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}function Vd(r,e){return r<e?-1:r>e?1:0}function Vb(r,e,t=0,n=r.length,i=0,o=e.length){for(;t<n&&i<o;t++,i++){let l=r.charCodeAt(t),d=e.charCodeAt(i);if(l<d)return-1;if(l>d)return 1}let s=n-t,a=o-i;return s<a?-1:s>a?1:0}function om(r,e){return hu(r,e,0,r.length,0,e.length)}function hu(r,e,t=0,n=r.length,i=0,o=e.length){for(;t<n&&i<o;t++,i++){let l=r.charCodeAt(t),d=e.charCodeAt(i);if(l===d)continue;if(l>=128||d>=128)return Vb(r.toLowerCase(),e.toLowerCase(),t,n,i,o);NP(l)&&(l-=32),NP(d)&&(d-=32);let u=l-d;if(u!==0)return u}let s=n-t,a=o-i;return s<a?-1:s>a?1:0}function NP(r){return r>=97&&r<=122}function mu(r){return r>=65&&r<=90}function br(r,e){return r.length===e.length&&hu(r,e)===0}function yl(r,e){let t=e.length;return e.length>r.length?!1:hu(r,e,0,t)===0}function Fr(r){return 55296<=r&&r<=56319}function gu(r){return 56320<=r&&r<=57343}function Wb(r,e){return(r-55296<<10)+(e-56320)+65536}function fu(r,e,t){let n=r.charCodeAt(t);if(Fr(n)&&t+1<e){let i=r.charCodeAt(t+1);if(gu(i))return Wb(n,i)}return n}function XW(r,e){let t=r.charCodeAt(e-1);if(gu(t)&&e>1){let n=r.charCodeAt(e-2);if(Fr(n))return Wb(n,t)}return t}var im=class{_str;_len;_offset;get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){let e=XW(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){let e=fu(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}},Ud=class{_iterator;get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new im(e,t)}nextGraphemeLength(){let e=Fb.getInstance(),t=this._iterator,n=t.offset,i=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){let o=t.offset,s=e.getGraphemeBreakType(t.nextCodePoint());if(FP(i,s)){t.setOffset(o);break}i=s}return t.offset-n}prevGraphemeLength(){let e=Fb.getInstance(),t=this._iterator,n=t.offset,i=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){let o=t.offset,s=e.getGraphemeBreakType(t.prevCodePoint());if(FP(s,i)){t.setOffset(o);break}i=s}return n-t.offset}eol(){return this._iterator.eol()}};function QW(r,e){return new Ud(r,e).nextGraphemeLength()}function JW(r,e){return new Ud(r,e).prevGraphemeLength()}function zP(r,e){e>0&&gu(r.charCodeAt(e))&&e--;let t=e+QW(r,e);return[t-JW(r,t),t]}var nw;function ZW(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function sm(r){return nw||(nw=ZW()),nw.test(r)}var ez=/^[\t\n\r\x20-\x7E]*$/;function ow(r){return ez.test(r)}var sw=/[\u2028\u2029]/;function zb(r){return sw.test(r)}function HP(r){return r>=11904&&r<=55215||r>=63744&&r<=64255||r>=65281&&r<=65374}function Hb(r){return r>=127462&&r<=127487||r===8986||r===8987||r===9200||r===9203||r>=9728&&r<=10175||r===11088||r===11093||r>=127744&&r<=128591||r>=128640&&r<=128764||r>=128992&&r<=129008||r>=129280&&r<=129535||r>=129648&&r<=129782}var KP=String.fromCharCode(65279);function GP(r){return!!(r&&r.length>0&&r.charCodeAt(0)===65279)}function qP(r){return r.charAt(0).toUpperCase()+r.slice(1)}function $P(r){let e=26;return r=r%(2*e),r<e?String.fromCharCode(97+r):String.fromCharCode(65+r-e)}function FP(r,e){return r===0?e!==5&&e!==7:r===2&&e===3?!1:r===4||r===2||r===3||e===4||e===2||e===3?!0:!(r===8&&(e===8||e===9||e===11||e===12)||(r===11||r===9)&&(e===9||e===10)||(r===12||r===10)&&e===10||e===5||e===13||e===7||r===1||r===13&&e===14||r===6&&e===6)}var Fb=class r{static _INSTANCE=null;static getInstance(){return r._INSTANCE||(r._INSTANCE=new r),r._INSTANCE}_data;constructor(){this._data=tz()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let t=this._data,n=t.length/3,i=1;for(;i<=n;)if(e<t[3*i])i=2*i;else if(e>t[3*i+1])i=2*i+1;else return t[3*i+2];return 0}};function tz(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}var BP=class r{constructor(e){this.confusableDictionary=e}static ambiguousCharacterData=new Fn(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'));static cache=new Nb({getCacheKey:JSON.stringify},e=>{function t(u){let p=new Map;for(let h=0;h<u.length;h+=2)p.set(u[h],u[h+1]);return p}function n(u,p){let h=new Map(u);for(let[m,f]of p)h.set(m,f);return h}function i(u,p){if(!u)return p;let h=new Map;for(let[m,f]of u)p.has(m)&&h.set(m,f);return h}let o=this.ambiguousCharacterData.value,s=e.filter(u=>!u.startsWith("_")&&u in o);s.length===0&&(s=["_default"]);let a;for(let u of s){let p=t(o[u]);a=i(a,p)}let l=t(o._common),d=n(l,a);return new r(d)});static getInstance(e){return r.cache.get(Array.from(e))}static _locales=new Fn(()=>Object.keys(r.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")));static getLocales(){return r._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let t=0;t<e.length;t++){let n=e.codePointAt(t);if(typeof n=="number"&&this.isAmbiguous(n))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}};function aw(...r){switch(r.length){case 1:return c("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",r[0]);case 2:return c("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",r[0],r[1]);case 3:return c("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",r[0],r[1],r[2]);default:return}}var nz=c("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),iz=c("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'."),Il=class r{static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw VL(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}static _regexFlags=new Set(["i","g","s","m","y","u"].map(e=>e.charCodeAt(0)));static _keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);_input="";_start=0;_current=0;_tokens=[];_errors=[];get errors(){return this._errors}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){let t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){let t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(aw("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(aw("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(aw("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){let t=this._start,n=this._input.substring(this._start,this._current),i={type:19,offset:this._start,lexeme:n};this._errors.push({offset:t,lexeme:n,additionalInfo:e}),this._tokens.push(i)}stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy;_string(){this.stringRe.lastIndex=this._start;let e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;let t=this._input.substring(this._start,this._current),n=r._keywords.get(t);n?this._addToken(n):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(nz);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,n=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(iz);return}let o=this._input.charCodeAt(e);if(t)t=!1;else if(o===47&&!n){e++;break}else o===91?n=!0:o===92?t=!0:o===93&&(n=!1);e++}for(;e<this._input.length&&r._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;let i=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:i,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}};var Da=class{ctor;staticArguments;supportsDelayedInstantiation;constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}};var _a=class{_entries=new Map;constructor(...e){for(let[t,n]of e)this.set(t,n)}set(e,t){let n=this._entries.get(e);return this._entries.set(e,t),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var Sl;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function n(o){return o[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=n})(Sl||={});var _e=A("instantiationService");function rz(r,e,t){e[Sl.DI_TARGET]===e?e[Sl.DI_DEPENDENCIES].push({id:r,index:t}):(e[Sl.DI_DEPENDENCIES]=[{id:r,index:t}],e[Sl.DI_TARGET]=e)}function A(r){if(Sl.serviceIds.has(r))return Sl.serviceIds.get(r);let e=function(t,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");rz(e,t,i)};return e.toString=()=>r,Sl.serviceIds.set(r,e),e}var pi=new Map;pi.set("false",!1);pi.set("true",!0);pi.set("isMac",ze);pi.set("isLinux",Wt);pi.set("isWindows",xt);pi.set("isWeb",_t);pi.set("isMacNative",ze&&!_t);pi.set("isEdge",Rb);pi.set("isFirefox",cu);pi.set("isChrome",jh);pi.set("isSafari",_b);var oz=Object.prototype.hasOwnProperty;var sz={regexParsingWithErrorRecovery:!0},az=c("contextkey.parser.error.emptyString","Empty context key expression"),lz=c("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),dz=c("contextkey.parser.error.noInAfterNot","'in' after 'not'."),jP=c("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),cz=c("contextkey.parser.error.unexpectedToken","Unexpected token"),uz=c("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),pz=c("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),hz=c("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?"),lw=class r{constructor(e=sz){this._config=e}static _parseError=new Error;_scanner=new Il;_tokens=[];_current=0;_parsingErrors=[];get lexingErrors(){return this._scanner.errors}get parsingErrors(){return this._parsingErrors}parse(e){if(e===""){this._parsingErrors.push({message:az,offset:0,lexeme:"",additionalInfo:lz});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{let t=this._expr();if(!this._isAtEnd()){let n=this._peek(),i=n.type===17?uz:void 0;throw this._parsingErrors.push({message:cz,offset:n.offset,lexeme:Il.getLexeme(n),additionalInfo:i}),r._parseError}return t}catch(t){if(t!==r._parseError)throw t;return}}_expr(){return this._or()}_or(){let e=[this._and()];for(;this._matchOne(16);){let t=this._and();e.push(t)}return e.length===1?e[0]:X.or(...e)}_and(){let e=[this._term()];for(;this._matchOne(15);){let t=this._term();e.push(t)}return e.length===1?e[0]:X.and(...e)}_term(){if(this._matchOne(2)){let e=this._peek();switch(e.type){case 11:return this._advance(),Fi.INSTANCE;case 12:return this._advance(),Ji.INSTANCE;case 0:{this._advance();let t=this._expr();return this._consume(1,jP),t?.negate()}case 17:return this._advance(),zd.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){let e=this._peek();switch(e.type){case 11:return this._advance(),X.true();case 12:return this._advance(),X.false();case 0:{this._advance();let t=this._expr();return this._consume(1,jP),t}case 17:{let t=e.lexeme;if(this._advance(),this._matchOne(9)){let i=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),i.type!==10)throw this._errExpectedButGot("REGEX",i);let o=i.lexeme,s=o.lastIndexOf("/"),a=s===o.length-1?void 0:this._removeFlagsGY(o.substring(s+1)),l;try{l=new RegExp(o.substring(1,s),a)}catch{throw this._errExpectedButGot("REGEX",i)}return mm.create(t,l)}switch(i.type){case 10:case 19:{let o=[i.lexeme];this._advance();let s=this._peek(),a=0;for(let h=0;h<i.lexeme.length;h++)i.lexeme.charCodeAt(h)===40?a++:i.lexeme.charCodeAt(h)===41&&a--;for(;!this._isAtEnd()&&s.type!==15&&s.type!==16;){switch(s.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let h=0;h<s.lexeme.length;h++)s.lexeme.charCodeAt(h)===40?a++:i.lexeme.charCodeAt(h)===41&&a--}if(a<0)break;o.push(Il.getLexeme(s)),this._advance(),s=this._peek()}let l=o.join(""),d=l.lastIndexOf("/"),u=d===l.length-1?void 0:this._removeFlagsGY(l.substring(d+1)),p;try{p=new RegExp(l.substring(1,d),u)}catch{throw this._errExpectedButGot("REGEX",i)}return X.regex(t,p)}case 18:{let o=i.lexeme;this._advance();let s=null;if(!UP(o)){let a=o.indexOf("/"),l=o.lastIndexOf("/");if(a!==l&&a>=0){let d=o.slice(a+1,l),u=o[l+1]==="i"?"i":"";try{s=new RegExp(d,u)}catch{throw this._errExpectedButGot("REGEX",i)}}}if(s===null)throw this._errExpectedButGot("REGEX",i);return mm.create(t,s)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,dz);let i=this._value();return X.notIn(t,i)}switch(this._peek().type){case 3:{this._advance();let i=this._value();if(this._previous().type===18)return X.equals(t,i);switch(i){case"true":return X.has(t);case"false":return X.not(t);default:return X.equals(t,i)}}case 4:{this._advance();let i=this._value();if(this._previous().type===18)return X.notEquals(t,i);switch(i){case"true":return X.not(t);case"false":return X.has(t);default:return X.notEquals(t,i)}}case 5:return this._advance(),pm.create(t,this._value());case 6:return this._advance(),hm.create(t,this._value());case 7:return this._advance(),cm.create(t,this._value());case 8:return this._advance(),um.create(t,this._value());case 13:return this._advance(),X.in(t,this._value());default:return X.has(t)}}case 20:throw this._parsingErrors.push({message:pz,offset:e.offset,lexeme:"",additionalInfo:hz}),r._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){let e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_flagsGYRe=/g|y/g;_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,n){let i=c("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,e,Il.getLexeme(t)),o=t.offset,s=Il.getLexeme(t);return this._parsingErrors.push({message:i,offset:o,lexeme:s,additionalInfo:n}),r._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}},X=class{static false(){return Fi.INSTANCE}static true(){return Ji.INSTANCE}static has(e){return Wd.create(e)}static equals(e,t){return lm.create(e,t)}static notEquals(e,t){return dm.create(e,t)}static regex(e,t){return mm.create(e,t)}static in(e,t){return Kb.create(e,t)}static notIn(e,t){return Gb.create(e,t)}static not(e){return zd.create(e)}static and(...e){return qb.create(e,null,!0)}static or(...e){return gm.create(e,null,!0)}static greater(e,t){return cm.create(e,t)}static greaterEquals(e,t){return um.create(e,t)}static smaller(e,t){return pm.create(e,t)}static smallerEquals(e,t){return hm.create(e,t)}static _parser=new lw({regexParsingWithErrorRecovery:!1});static deserialize(e){return e==null?void 0:this._parser.parse(e)}};function am(r,e){return r.cmp(e)}var Fi=class r{static INSTANCE=new r;type=0;constructor(){}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return Ji.INSTANCE}},Ji=class r{static INSTANCE=new r;type=1;constructor(){}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return Fi.INSTANCE}},Wd=class r{constructor(e,t){this.key=e;this.negated=t}static create(e,t=null){let n=pi.get(e);return typeof n=="boolean"?n?Ji.INSTANCE:Fi.INSTANCE:new r(e,t)}type=2;cmp(e){return e.type!==this.type?this.type-e.type:QP(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){let e=pi.get(this.key);return typeof e=="boolean"?e?Ji.INSTANCE:Fi.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(e){return e.mapDefined(this.key)}negate(){return this.negated||(this.negated=zd.create(this.key,this)),this.negated}},lm=class r{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){if(typeof t=="boolean")return t?Wd.create(e,n):zd.create(e,n);let i=pi.get(e);return typeof i=="boolean"?t===(i?"true":"false")?Ji.INSTANCE:Fi.INSTANCE:new r(e,t,n)}type=4;cmp(e){return e.type!==this.type?this.type-e.type:Hd(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){let e=pi.get(this.key);if(typeof e=="boolean"){let t=e?"true":"false";return this.value===t?Ji.INSTANCE:Fi.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(e){return e.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=dm.create(this.key,this.value,this)),this.negated}},Kb=class r{constructor(e,t){this.key=e;this.valueKey=t}static create(e,t){return new r(e,t)}type=10;negated=null;cmp(e){return e.type!==this.type?this.type-e.type:Hd(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.includes(n):typeof n=="string"&&typeof t=="object"&&t!==null?oz.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}map(e){return e.mapIn(this.key,this.valueKey)}negate(){return this.negated||(this.negated=Gb.create(this.key,this.valueKey)),this.negated}},Gb=class r{constructor(e,t){this.key=e;this.valueKey=t;this._negated=Kb.create(e,t)}static create(e,t){return new r(e,t)}type=11;_negated;cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}map(e){return e.mapNotIn(this.key,this.valueKey)}negate(){return this._negated}},dm=class r{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){if(typeof t=="boolean")return t?zd.create(e,n):Wd.create(e,n);let i=pi.get(e);return typeof i=="boolean"?t===(i?"true":"false")?Fi.INSTANCE:Ji.INSTANCE:new r(e,t,n)}type=5;cmp(e){return e.type!==this.type?this.type-e.type:Hd(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){let e=pi.get(this.key);if(typeof e=="boolean"){let t=e?"true":"false";return this.value===t?Fi.INSTANCE:Ji.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(e){return e.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=lm.create(this.key,this.value,this)),this.negated}},zd=class r{constructor(e,t){this.key=e;this.negated=t}static create(e,t=null){let n=pi.get(e);return typeof n=="boolean"?n?Fi.INSTANCE:Ji.INSTANCE:new r(e,t)}type=3;cmp(e){return e.type!==this.type?this.type-e.type:QP(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){let e=pi.get(this.key);return typeof e=="boolean"?e?Fi.INSTANCE:Ji.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(e){return e.mapNot(this.key)}negate(){return this.negated||(this.negated=Wd.create(this.key,this)),this.negated}};function $b(r,e){if(typeof r=="string"){let t=parseFloat(r);isNaN(t)||(r=t)}return typeof r=="string"||typeof r=="number"?e(r):Fi.INSTANCE}var cm=class r{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){return $b(t,i=>new r(e,i,n))}type=12;cmp(e){return e.type!==this.type?this.type-e.type:Hd(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreater(this.key,this.value)}negate(){return this.negated||(this.negated=hm.create(this.key,this.value,this)),this.negated}},um=class r{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){return $b(t,i=>new r(e,i,n))}type=13;cmp(e){return e.type!==this.type?this.type-e.type:Hd(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreaterEquals(this.key,this.value)}negate(){return this.negated||(this.negated=pm.create(this.key,this.value,this)),this.negated}},pm=class r{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){return $b(t,i=>new r(e,i,n))}type=14;cmp(e){return e.type!==this.type?this.type-e.type:Hd(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmaller(this.key,this.value)}negate(){return this.negated||(this.negated=um.create(this.key,this.value,this)),this.negated}},hm=class r{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){return $b(t,i=>new r(e,i,n))}type=15;cmp(e){return e.type!==this.type?this.type-e.type:Hd(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmallerEquals(this.key,this.value)}negate(){return this.negated||(this.negated=cm.create(this.key,this.value,this)),this.negated}},mm=class r{constructor(e,t){this.key=e;this.regexp=t}static create(e,t){return new r(e,t)}type=7;negated=null;cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;let t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){let t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){let e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}map(e){return e.mapRegex(this.key,this.regexp)}negate(){return this.negated||(this.negated=dw.create(this)),this.negated}},dw=class r{constructor(e){this._actual=e}static create(e){return new r(e)}type=8;cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}map(e){return new r(this._actual.map(e))}negate(){return this._actual}};function XP(r){let e=null;for(let t=0,n=r.length;t<n;t++){let i=r[t].substituteConstants();if(r[t]!==i&&e===null){e=[];for(let o=0;o<t;o++)e[o]=r[o]}e!==null&&(e[t]=i)}return e===null?r:e}var qb=class r{constructor(e,t){this.expr=e;this.negated=t}static create(e,t,n){return r._normalizeArr(e,t,n)}type=6;cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){let i=am(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){let e=XP(this.expr);return e===this.expr?this:r.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,n){let i=[],o=!1;for(let s of e)if(s){if(s.type===1){o=!0;continue}if(s.type===0)return Fi.INSTANCE;if(s.type===6){i.push(...s.expr);continue}i.push(s)}if(i.length===0&&o)return Ji.INSTANCE;if(i.length!==0){if(i.length===1)return i[0];i.sort(am);for(let s=1;s<i.length;s++)i[s-1].equals(i[s])&&(i.splice(s,1),s--);if(i.length===1)return i[0];for(;i.length>1;){let s=i[i.length-1];if(s.type!==9)break;i.pop();let a=i.pop(),l=i.length===0,d=gm.create(s.expr.map(u=>r.create([u,a],null,n)),null,l);d&&(i.push(d),i.sort(am))}if(i.length===1)return i[0];if(n){for(let s=0;s<i.length;s++)for(let a=s+1;a<i.length;a++)if(i[s].negate().equals(i[a]))return Fi.INSTANCE;if(i.length===1)return i[0]}return new r(i,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){let e=[];for(let t of this.expr)e.push(...t.keys());return e}map(e){return new r(this.expr.map(t=>t.map(e)),null)}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());this.negated=gm.create(e,this,!0)}return this.negated}},gm=class r{constructor(e,t){this.expr=e;this.negated=t}static create(e,t,n){return r._normalizeArr(e,t,n)}type=9;cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){let i=am(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){let e=XP(this.expr);return e===this.expr?this:r.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let i=[],o=!1;if(e){for(let s=0,a=e.length;s<a;s++){let l=e[s];if(l){if(l.type===0){o=!0;continue}if(l.type===1)return Ji.INSTANCE;if(l.type===9){i=i.concat(l.expr);continue}i.push(l)}}if(i.length===0&&o)return Fi.INSTANCE;i.sort(am)}if(i.length!==0){if(i.length===1)return i[0];for(let s=1;s<i.length;s++)i[s-1].equals(i[s])&&(i.splice(s,1),s--);if(i.length===1)return i[0];if(n){for(let s=0;s<i.length;s++)for(let a=s+1;a<i.length;a++)if(i[s].negate().equals(i[a]))return Ji.INSTANCE;if(i.length===1)return i[0]}return new r(i,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){let e=[];for(let t of this.expr)e.push(...t.keys());return e}map(e){return new r(this.expr.map(t=>t.map(e)),null)}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());for(;e.length>1;){let t=e.shift(),n=e.shift(),i=[];for(let o of YP(t))for(let s of YP(n))i.push(qb.create([o,s],null,!1));e.unshift(r.create(i,null,!1))}this.negated=r.create(e,this,!0)}return this.negated}},V=class r extends Wd{static _info=[];static all(){return r._info.values()}_defaultValue;constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?r._info.push({...n,key:e}):n!==!0&&r._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return lm.create(this.key,e)}notEqualsTo(e){return dm.create(this.key,e)}},Ge=A("contextKeyService");function QP(r,e){return r<e?-1:r>e?1:0}function Hd(r,e,t,n){return r<t?-1:r>t?1:e<n?-1:e>n?1:0}function YP(r){return r.type===9?r.expr:[r]}var ut=Object.freeze({View:ye("view","View"),Help:ye("help","Help"),Test:ye("test","Test"),File:ye("file","File"),Preferences:ye("preferences","Preferences"),Developer:ye({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer")});function JP(r){let e=!1,t=new Map,n=new Map;if(mz(r,u=>{if(r===u)return!0;let p=JSON.stringify(u);if(p.length<30)return!0;let h=t.get(p);if(!h){let m={schemas:[u]};return t.set(p,m),n.set(u,m),!0}return h.schemas.push(u),n.set(u,h),e=!0,!1}),t.clear(),!e)return JSON.stringify(r);let o="$defs";for(;r.hasOwnProperty(o);)o+="_";let s=[];function a(u){return JSON.stringify(u,(p,h)=>{if(h!==u){let m=n.get(h);if(m&&m.schemas.length>1)return m.id||(m.id=`_${s.length}`,s.push(m.schemas[0])),{$ref:`#/${o}/${m.id}`}}return h})}let l=a(r),d=[];for(let u=0;u<s.length;u++)d.push(`"_${u}":${a(s[u])}`);return d.length?`${l.substring(0,l.length-1)},"${o}":{${d.join(",")}}}`:l}function bu(r){return typeof r=="object"&&r!==null}function mz(r,e){if(!r||typeof r!="object")return;let t=(...l)=>{for(let d of l)bu(d)&&s.push(d)},n=(...l)=>{for(let d of l)if(bu(d))for(let u in d){let p=d[u];bu(p)&&s.push(p)}},i=(...l)=>{for(let d of l)if(Array.isArray(d))for(let u of d)bu(u)&&s.push(u)},o=l=>{if(Array.isArray(l))for(let d of l)bu(d)&&s.push(d);else bu(l)&&s.push(l)},s=[r],a=s.pop();for(;a;)e(a)&&(t(a.additionalItems,a.additionalProperties,a.not,a.contains,a.propertyNames,a.if,a.then,a.else,a.unevaluatedItems,a.unevaluatedProperties),n(a.definitions,a.$defs,a.properties,a.patternProperties,a.dependencies,a.dependentSchemas),i(a.anyOf,a.allOf,a.oneOf,a.prefixItems),o(a.items)),a=s.pop()}var Zi=A("commandService"),vr=new class{_commands=new Map;_onDidRegisterCommand=new x;onDidRegisterCommand=this._onDidRegisterCommand.event;registerCommand(r,e){if(!r)throw new Error("invalid command");if(typeof r=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:r,handler:e})}if(r.metadata&&Array.isArray(r.metadata.args)){let s=[];for(let l of r.metadata.args)s.push(l.constraint);let a=r.handler;r.handler=function(l,...d){return PP(d,s),a(l,...d)}}let{id:t}=r,n=this._commands.get(t);n||(n=new ei,this._commands.set(t,n));let i=n.unshift(r),o=ie(()=>{i(),this._commands.get(t)?.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),o}registerCommandAlias(r,e){return vr.registerCommand(r,(t,...n)=>t.get(Zi).executeCommand(e,...n))}getCommand(r){let e=this._commands.get(r);if(!(!e||e.isEmpty()))return $e.first(e)}getCommands(){let r=new Map;for(let e of this._commands.keys()){let t=this.getCommand(e);t&&r.set(e,t)}return r}};vr.registerCommand("noop",()=>{});function ZP(r){return r?r.condition!==void 0:!1}var fm=class{_keyCodeToStr;_strToKeyCode;constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}},jb=new fm,cw=new fm,uw=new fm,hw=new Array(230),gz={},fz=[],bz=Object.create(null),vz=Object.create(null);var eA=[],pw=[];for(let r=0;r<=193;r++)eA[r]=-1;for(let r=0;r<=132;r++)pw[r]=-1;(function(){let r="",e=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",r,r],[1,1,"Hyper",0,r,0,r,r,r],[1,2,"Super",0,r,0,r,r,r],[1,3,"Fn",0,r,0,r,r,r],[1,4,"FnLock",0,r,0,r,r,r],[1,5,"Suspend",0,r,0,r,r,r],[1,6,"Resume",0,r,0,r,r,r],[1,7,"Turbo",0,r,0,r,r,r],[1,8,"Sleep",0,r,0,"VK_SLEEP",r,r],[1,9,"WakeUp",0,r,0,r,r,r],[0,10,"KeyA",31,"A",65,"VK_A",r,r],[0,11,"KeyB",32,"B",66,"VK_B",r,r],[0,12,"KeyC",33,"C",67,"VK_C",r,r],[0,13,"KeyD",34,"D",68,"VK_D",r,r],[0,14,"KeyE",35,"E",69,"VK_E",r,r],[0,15,"KeyF",36,"F",70,"VK_F",r,r],[0,16,"KeyG",37,"G",71,"VK_G",r,r],[0,17,"KeyH",38,"H",72,"VK_H",r,r],[0,18,"KeyI",39,"I",73,"VK_I",r,r],[0,19,"KeyJ",40,"J",74,"VK_J",r,r],[0,20,"KeyK",41,"K",75,"VK_K",r,r],[0,21,"KeyL",42,"L",76,"VK_L",r,r],[0,22,"KeyM",43,"M",77,"VK_M",r,r],[0,23,"KeyN",44,"N",78,"VK_N",r,r],[0,24,"KeyO",45,"O",79,"VK_O",r,r],[0,25,"KeyP",46,"P",80,"VK_P",r,r],[0,26,"KeyQ",47,"Q",81,"VK_Q",r,r],[0,27,"KeyR",48,"R",82,"VK_R",r,r],[0,28,"KeyS",49,"S",83,"VK_S",r,r],[0,29,"KeyT",50,"T",84,"VK_T",r,r],[0,30,"KeyU",51,"U",85,"VK_U",r,r],[0,31,"KeyV",52,"V",86,"VK_V",r,r],[0,32,"KeyW",53,"W",87,"VK_W",r,r],[0,33,"KeyX",54,"X",88,"VK_X",r,r],[0,34,"KeyY",55,"Y",89,"VK_Y",r,r],[0,35,"KeyZ",56,"Z",90,"VK_Z",r,r],[0,36,"Digit1",22,"1",49,"VK_1",r,r],[0,37,"Digit2",23,"2",50,"VK_2",r,r],[0,38,"Digit3",24,"3",51,"VK_3",r,r],[0,39,"Digit4",25,"4",52,"VK_4",r,r],[0,40,"Digit5",26,"5",53,"VK_5",r,r],[0,41,"Digit6",27,"6",54,"VK_6",r,r],[0,42,"Digit7",28,"7",55,"VK_7",r,r],[0,43,"Digit8",29,"8",56,"VK_8",r,r],[0,44,"Digit9",30,"9",57,"VK_9",r,r],[0,45,"Digit0",21,"0",48,"VK_0",r,r],[1,46,"Enter",3,"Enter",13,"VK_RETURN",r,r],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",r,r],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",r,r],[1,49,"Tab",2,"Tab",9,"VK_TAB",r,r],[1,50,"Space",10,"Space",32,"VK_SPACE",r,r],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,r,0,r,r,r],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",r,r],[1,64,"F1",59,"F1",112,"VK_F1",r,r],[1,65,"F2",60,"F2",113,"VK_F2",r,r],[1,66,"F3",61,"F3",114,"VK_F3",r,r],[1,67,"F4",62,"F4",115,"VK_F4",r,r],[1,68,"F5",63,"F5",116,"VK_F5",r,r],[1,69,"F6",64,"F6",117,"VK_F6",r,r],[1,70,"F7",65,"F7",118,"VK_F7",r,r],[1,71,"F8",66,"F8",119,"VK_F8",r,r],[1,72,"F9",67,"F9",120,"VK_F9",r,r],[1,73,"F10",68,"F10",121,"VK_F10",r,r],[1,74,"F11",69,"F11",122,"VK_F11",r,r],[1,75,"F12",70,"F12",123,"VK_F12",r,r],[1,76,"PrintScreen",0,r,0,r,r,r],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",r,r],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",r,r],[1,79,"Insert",19,"Insert",45,"VK_INSERT",r,r],[1,80,"Home",14,"Home",36,"VK_HOME",r,r],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",r,r],[1,82,"Delete",20,"Delete",46,"VK_DELETE",r,r],[1,83,"End",13,"End",35,"VK_END",r,r],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",r,r],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",r],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",r],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",r],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",r],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",r,r],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",r,r],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",r,r],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",r,r],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",r,r],[1,94,"NumpadEnter",3,r,0,r,r,r],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",r,r],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",r,r],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",r,r],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",r,r],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",r,r],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",r,r],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",r,r],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",r,r],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",r,r],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",r,r],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",r,r],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",r,r],[1,107,"ContextMenu",58,"ContextMenu",93,r,r,r],[1,108,"Power",0,r,0,r,r,r],[1,109,"NumpadEqual",0,r,0,r,r,r],[1,110,"F13",71,"F13",124,"VK_F13",r,r],[1,111,"F14",72,"F14",125,"VK_F14",r,r],[1,112,"F15",73,"F15",126,"VK_F15",r,r],[1,113,"F16",74,"F16",127,"VK_F16",r,r],[1,114,"F17",75,"F17",128,"VK_F17",r,r],[1,115,"F18",76,"F18",129,"VK_F18",r,r],[1,116,"F19",77,"F19",130,"VK_F19",r,r],[1,117,"F20",78,"F20",131,"VK_F20",r,r],[1,118,"F21",79,"F21",132,"VK_F21",r,r],[1,119,"F22",80,"F22",133,"VK_F22",r,r],[1,120,"F23",81,"F23",134,"VK_F23",r,r],[1,121,"F24",82,"F24",135,"VK_F24",r,r],[1,122,"Open",0,r,0,r,r,r],[1,123,"Help",0,r,0,r,r,r],[1,124,"Select",0,r,0,r,r,r],[1,125,"Again",0,r,0,r,r,r],[1,126,"Undo",0,r,0,r,r,r],[1,127,"Cut",0,r,0,r,r,r],[1,128,"Copy",0,r,0,r,r,r],[1,129,"Paste",0,r,0,r,r,r],[1,130,"Find",0,r,0,r,r,r],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",r,r],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",r,r],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",r,r],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",r,r],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",r,r],[1,136,"KanaMode",0,r,0,r,r,r],[0,137,"IntlYen",0,r,0,r,r,r],[1,138,"Convert",0,r,0,r,r,r],[1,139,"NonConvert",0,r,0,r,r,r],[1,140,"Lang1",0,r,0,r,r,r],[1,141,"Lang2",0,r,0,r,r,r],[1,142,"Lang3",0,r,0,r,r,r],[1,143,"Lang4",0,r,0,r,r,r],[1,144,"Lang5",0,r,0,r,r,r],[1,145,"Abort",0,r,0,r,r,r],[1,146,"Props",0,r,0,r,r,r],[1,147,"NumpadParenLeft",0,r,0,r,r,r],[1,148,"NumpadParenRight",0,r,0,r,r,r],[1,149,"NumpadBackspace",0,r,0,r,r,r],[1,150,"NumpadMemoryStore",0,r,0,r,r,r],[1,151,"NumpadMemoryRecall",0,r,0,r,r,r],[1,152,"NumpadMemoryClear",0,r,0,r,r,r],[1,153,"NumpadMemoryAdd",0,r,0,r,r,r],[1,154,"NumpadMemorySubtract",0,r,0,r,r,r],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",r,r],[1,156,"NumpadClearEntry",0,r,0,r,r,r],[1,0,r,5,"Ctrl",17,"VK_CONTROL",r,r],[1,0,r,4,"Shift",16,"VK_SHIFT",r,r],[1,0,r,6,"Alt",18,"VK_MENU",r,r],[1,0,r,57,"Meta",91,"VK_COMMAND",r,r],[1,157,"ControlLeft",5,r,0,"VK_LCONTROL",r,r],[1,158,"ShiftLeft",4,r,0,"VK_LSHIFT",r,r],[1,159,"AltLeft",6,r,0,"VK_LMENU",r,r],[1,160,"MetaLeft",57,r,0,"VK_LWIN",r,r],[1,161,"ControlRight",5,r,0,"VK_RCONTROL",r,r],[1,162,"ShiftRight",4,r,0,"VK_RSHIFT",r,r],[1,163,"AltRight",6,r,0,"VK_RMENU",r,r],[1,164,"MetaRight",57,r,0,"VK_RWIN",r,r],[1,165,"BrightnessUp",0,r,0,r,r,r],[1,166,"BrightnessDown",0,r,0,r,r,r],[1,167,"MediaPlay",0,r,0,r,r,r],[1,168,"MediaRecord",0,r,0,r,r,r],[1,169,"MediaFastForward",0,r,0,r,r,r],[1,170,"MediaRewind",0,r,0,r,r,r],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",r,r],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",r,r],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",r,r],[1,174,"Eject",0,r,0,r,r,r],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",r,r],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",r,r],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",r,r],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",r,r],[1,179,"LaunchApp1",0,r,0,"VK_MEDIA_LAUNCH_APP1",r,r],[1,180,"SelectTask",0,r,0,r,r,r],[1,181,"LaunchScreenSaver",0,r,0,r,r,r],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",r,r],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",r,r],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",r,r],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",r,r],[1,186,"BrowserStop",0,r,0,"VK_BROWSER_STOP",r,r],[1,187,"BrowserRefresh",0,r,0,"VK_BROWSER_REFRESH",r,r],[1,188,"BrowserFavorites",0,r,0,"VK_BROWSER_FAVORITES",r,r],[1,189,"ZoomToggle",0,r,0,r,r,r],[1,190,"MailReply",0,r,0,r,r,r],[1,191,"MailForward",0,r,0,r,r,r],[1,192,"MailSend",0,r,0,r,r,r],[1,0,r,114,"KeyInComposition",229,r,r,r],[1,0,r,116,"ABNT_C2",194,"VK_ABNT_C2",r,r],[1,0,r,96,"OEM_8",223,"VK_OEM_8",r,r],[1,0,r,0,r,0,"VK_KANA",r,r],[1,0,r,0,r,0,"VK_HANGUL",r,r],[1,0,r,0,r,0,"VK_JUNJA",r,r],[1,0,r,0,r,0,"VK_FINAL",r,r],[1,0,r,0,r,0,"VK_HANJA",r,r],[1,0,r,0,r,0,"VK_KANJI",r,r],[1,0,r,0,r,0,"VK_CONVERT",r,r],[1,0,r,0,r,0,"VK_NONCONVERT",r,r],[1,0,r,0,r,0,"VK_ACCEPT",r,r],[1,0,r,0,r,0,"VK_MODECHANGE",r,r],[1,0,r,0,r,0,"VK_SELECT",r,r],[1,0,r,0,r,0,"VK_PRINT",r,r],[1,0,r,0,r,0,"VK_EXECUTE",r,r],[1,0,r,0,r,0,"VK_SNAPSHOT",r,r],[1,0,r,0,r,0,"VK_HELP",r,r],[1,0,r,0,r,0,"VK_APPS",r,r],[1,0,r,0,r,0,"VK_PROCESSKEY",r,r],[1,0,r,0,r,0,"VK_PACKET",r,r],[1,0,r,0,r,0,"VK_DBE_SBCSCHAR",r,r],[1,0,r,0,r,0,"VK_DBE_DBCSCHAR",r,r],[1,0,r,0,r,0,"VK_ATTN",r,r],[1,0,r,0,r,0,"VK_CRSEL",r,r],[1,0,r,0,r,0,"VK_EXSEL",r,r],[1,0,r,0,r,0,"VK_EREOF",r,r],[1,0,r,0,r,0,"VK_PLAY",r,r],[1,0,r,0,r,0,"VK_ZOOM",r,r],[1,0,r,0,r,0,"VK_NONAME",r,r],[1,0,r,0,r,0,"VK_PA1",r,r],[1,0,r,0,r,0,"VK_OEM_CLEAR",r,r]],t=[],n=[];for(let i of e){let[o,s,a,l,d,u,p,h,m]=i;if(n[s]||(n[s]=!0,fz[s]=a,bz[a]=s,vz[a.toLowerCase()]=s,o&&(eA[s]=l,l!==0&&l!==3&&l!==5&&l!==4&&l!==6&&l!==57&&(pw[l]=s))),!t[l]){if(t[l]=!0,!d)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);jb.define(l,d),cw.define(l,h||d),uw.define(l,m||h||d)}u&&(hw[u]=l),p&&(gz[p]=l)}pw[3]=46})();var bm;(s=>{function r(a){return jb.keyCodeToStr(a)}s.toString=r;function e(a){return jb.strToKeyCode(a)}s.fromString=e;function t(a){return cw.keyCodeToStr(a)}s.toUserSettingsUS=t;function n(a){return uw.keyCodeToStr(a)}s.toUserSettingsGeneral=n;function i(a){return cw.strToKeyCode(a)||uw.strToKeyCode(a)}s.fromUserSettings=i;function o(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return jb.keyCodeToStr(a)}s.toElectronAccelerator=o})(bm||={});function xl(r,e){let t=(e&65535)<<16>>>0;return(r|t)>>>0}function mw(r,e){if(typeof r=="number"){if(r===0)return null;let t=(r&65535)>>>0,n=(r&4294901760)>>>16;return n!==0?new vu([Yb(t,e),Yb(n,e)]):new vu([Yb(t,e)])}else{let t=[];for(let n=0;n<r.length;n++)t.push(Yb(r[n],e));return new vu(t)}}function Yb(r,e){let t=!!(r&2048),n=!!(r&256),i=e===2?n:t,o=!!(r&1024),s=!!(r&512),a=e===2?t:n,l=r&255;return new vm(i,o,s,a,l)}var vm=class r{constructor(e,t,n,i,o){this.ctrlKey=e;this.shiftKey=t;this.altKey=n;this.metaKey=i;this.keyCode=o}equals(e){return e instanceof r&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){let e=this.ctrlKey?"1":"0",t=this.shiftKey?"1":"0",n=this.altKey?"1":"0",i=this.metaKey?"1":"0";return`K${e}${t}${n}${i}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new vu([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}};var vu=class{chords;constructor(e){if(e.length===0)throw Dd("chords");this.chords=e}getHashCode(){let e="";for(let t=0,n=this.chords.length;t<n;t++)t!==0&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}};var gw=class{data=new Map;add(e,t){Oh(lt(e)),Oh(fn(t)),Oh(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}knows(e){return this.data.has(e)}as(e){return this.data.get(e)||null}},Ce=new gw;var fw=class r{_coreKeybindings;_extensionKeybindings;_cachedMergedKeybindings;constructor(){this._coreKeybindings=new ei,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(Ds===1){if(e&&e.win)return e.win}else if(Ds===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){let t=r.bindToCurrentPlatform(e),n=new Q;if(t&&t.primary){let i=mw(t.primary,Ds);i&&n.add(this._registerDefaultKeybinding(i,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let i=0,o=t.secondary.length;i<o;i++){let s=t.secondary[i],a=mw(s,Ds);a&&n.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-i-1,e.when))}return n}setExtensionKeybindings(e){let t=[],n=0;for(let i of e)i.keybinding&&(t[n++]={keybinding:i.keybinding,command:i.id,commandArgs:i.args,when:i.when,weight1:i.weight,weight2:0,extensionId:i.extensionId||null,isBuiltinExtension:i.isBuiltinExtension||!1});this._extensionKeybindings=t,this._cachedMergedKeybindings=null}registerCommandAndKeybindingRule(e){return Ti(this.registerKeybindingRule(e),vr.registerCommand(e))}_registerDefaultKeybinding(e,t,n,i,o,s){let a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:n,when:s,weight1:i,weight2:o,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,ie(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(Iz)),this._cachedMergedKeybindings.slice(0)}},Bi=new fw,yz={EditorModes:"platform.keybindingsRegistry"};Ce.add(yz.EditorModes,Bi);function Iz(r,e){if(r.weight1!==e.weight1)return r.weight1-e.weight1;if(r.command&&e.command){if(r.command<e.command)return-1;if(r.command>e.command)return 1}return r.weight2-e.weight2}function yu(r){return r.command!==void 0}function tA(r){return r.submenu!==void 0}var me=class r{static _instances=new Map;static CommandPalette=new r("CommandPalette");static DebugBreakpointsContext=new r("DebugBreakpointsContext");static DebugCallStackContext=new r("DebugCallStackContext");static DebugConsoleContext=new r("DebugConsoleContext");static DebugVariablesContext=new r("DebugVariablesContext");static NotebookVariablesContext=new r("NotebookVariablesContext");static DebugHoverContext=new r("DebugHoverContext");static DebugWatchContext=new r("DebugWatchContext");static DebugToolBar=new r("DebugToolBar");static DebugToolBarStop=new r("DebugToolBarStop");static DebugCallStackToolbar=new r("DebugCallStackToolbar");static DebugCreateConfiguration=new r("DebugCreateConfiguration");static EditorContext=new r("EditorContext");static SimpleEditorContext=new r("SimpleEditorContext");static EditorContent=new r("EditorContent");static EditorLineNumberContext=new r("EditorLineNumberContext");static EditorContextCopy=new r("EditorContextCopy");static EditorContextPeek=new r("EditorContextPeek");static EditorContextShare=new r("EditorContextShare");static EditorTitle=new r("EditorTitle");static EditorTitleRun=new r("EditorTitleRun");static EditorTitleContext=new r("EditorTitleContext");static EditorTitleContextShare=new r("EditorTitleContextShare");static EmptyEditorGroup=new r("EmptyEditorGroup");static EmptyEditorGroupContext=new r("EmptyEditorGroupContext");static EditorTabsBarContext=new r("EditorTabsBarContext");static EditorTabsBarShowTabsSubmenu=new r("EditorTabsBarShowTabsSubmenu");static EditorTabsBarShowTabsZenModeSubmenu=new r("EditorTabsBarShowTabsZenModeSubmenu");static EditorActionsPositionSubmenu=new r("EditorActionsPositionSubmenu");static ExplorerContext=new r("ExplorerContext");static ExplorerContextShare=new r("ExplorerContextShare");static ExtensionContext=new r("ExtensionContext");static ExtensionEditorContextMenu=new r("ExtensionEditorContextMenu");static GlobalActivity=new r("GlobalActivity");static CommandCenter=new r("CommandCenter");static CommandCenterCenter=new r("CommandCenterCenter");static LayoutControlMenuSubmenu=new r("LayoutControlMenuSubmenu");static LayoutControlMenu=new r("LayoutControlMenu");static MenubarMainMenu=new r("MenubarMainMenu");static MenubarAppearanceMenu=new r("MenubarAppearanceMenu");static MenubarDebugMenu=new r("MenubarDebugMenu");static MenubarEditMenu=new r("MenubarEditMenu");static MenubarCopy=new r("MenubarCopy");static MenubarFileMenu=new r("MenubarFileMenu");static MenubarGoMenu=new r("MenubarGoMenu");static MenubarHelpMenu=new r("MenubarHelpMenu");static MenubarLayoutMenu=new r("MenubarLayoutMenu");static MenubarNewBreakpointMenu=new r("MenubarNewBreakpointMenu");static PanelAlignmentMenu=new r("PanelAlignmentMenu");static PanelPositionMenu=new r("PanelPositionMenu");static ActivityBarPositionMenu=new r("ActivityBarPositionMenu");static MenubarPreferencesMenu=new r("MenubarPreferencesMenu");static MenubarRecentMenu=new r("MenubarRecentMenu");static MenubarSelectionMenu=new r("MenubarSelectionMenu");static MenubarShare=new r("MenubarShare");static MenubarSwitchEditorMenu=new r("MenubarSwitchEditorMenu");static MenubarSwitchGroupMenu=new r("MenubarSwitchGroupMenu");static MenubarTerminalMenu=new r("MenubarTerminalMenu");static MenubarViewMenu=new r("MenubarViewMenu");static MenubarHomeMenu=new r("MenubarHomeMenu");static OpenEditorsContext=new r("OpenEditorsContext");static OpenEditorsContextShare=new r("OpenEditorsContextShare");static ProblemsPanelContext=new r("ProblemsPanelContext");static SCMInputBox=new r("SCMInputBox");static SCMChangesContext=new r("SCMChangesContext");static SCMChangeContext=new r("SCMChangeContext");static SCMResourceContext=new r("SCMResourceContext");static SCMResourceContextShare=new r("SCMResourceContextShare");static SCMResourceFolderContext=new r("SCMResourceFolderContext");static SCMResourceGroupContext=new r("SCMResourceGroupContext");static SCMSourceControl=new r("SCMSourceControl");static SCMSourceControlInline=new r("SCMSourceControlInline");static SCMSourceControlTitle=new r("SCMSourceControlTitle");static SCMHistoryTitle=new r("SCMHistoryTitle");static SCMTitle=new r("SCMTitle");static SearchContext=new r("SearchContext");static SearchActionMenu=new r("SearchActionContext");static StatusBarWindowIndicatorMenu=new r("StatusBarWindowIndicatorMenu");static StatusBarRemoteIndicatorMenu=new r("StatusBarRemoteIndicatorMenu");static StickyScrollContext=new r("StickyScrollContext");static TestItem=new r("TestItem");static TestItemGutter=new r("TestItemGutter");static TestProfilesContext=new r("TestProfilesContext");static TestMessageContext=new r("TestMessageContext");static TestMessageContent=new r("TestMessageContent");static TestPeekElement=new r("TestPeekElement");static TestPeekTitle=new r("TestPeekTitle");static TestCallStack=new r("TestCallStack");static TouchBarContext=new r("TouchBarContext");static TitleBarContext=new r("TitleBarContext");static TitleBarTitleContext=new r("TitleBarTitleContext");static TunnelContext=new r("TunnelContext");static TunnelPrivacy=new r("TunnelPrivacy");static TunnelProtocol=new r("TunnelProtocol");static TunnelPortInline=new r("TunnelInline");static TunnelTitle=new r("TunnelTitle");static TunnelLocalAddressInline=new r("TunnelLocalAddressInline");static TunnelOriginInline=new r("TunnelOriginInline");static ViewItemContext=new r("ViewItemContext");static ViewContainerTitle=new r("ViewContainerTitle");static ViewContainerTitleContext=new r("ViewContainerTitleContext");static ViewTitle=new r("ViewTitle");static ViewTitleContext=new r("ViewTitleContext");static CommentEditorActions=new r("CommentEditorActions");static CommentThreadTitle=new r("CommentThreadTitle");static CommentThreadActions=new r("CommentThreadActions");static CommentThreadAdditionalActions=new r("CommentThreadAdditionalActions");static CommentThreadTitleContext=new r("CommentThreadTitleContext");static CommentThreadCommentContext=new r("CommentThreadCommentContext");static CommentTitle=new r("CommentTitle");static CommentActions=new r("CommentActions");static CommentsViewThreadActions=new r("CommentsViewThreadActions");static InteractiveToolbar=new r("InteractiveToolbar");static InteractiveCellTitle=new r("InteractiveCellTitle");static InteractiveCellDelete=new r("InteractiveCellDelete");static InteractiveCellExecute=new r("InteractiveCellExecute");static InteractiveInputExecute=new r("InteractiveInputExecute");static InteractiveInputConfig=new r("InteractiveInputConfig");static ReplInputExecute=new r("ReplInputExecute");static IssueReporter=new r("IssueReporter");static NotebookToolbar=new r("NotebookToolbar");static NotebookStickyScrollContext=new r("NotebookStickyScrollContext");static NotebookCellTitle=new r("NotebookCellTitle");static NotebookCellDelete=new r("NotebookCellDelete");static NotebookCellInsert=new r("NotebookCellInsert");static NotebookCellBetween=new r("NotebookCellBetween");static NotebookCellListTop=new r("NotebookCellTop");static NotebookCellExecute=new r("NotebookCellExecute");static NotebookCellExecuteGoTo=new r("NotebookCellExecuteGoTo");static NotebookCellExecutePrimary=new r("NotebookCellExecutePrimary");static NotebookDiffCellInputTitle=new r("NotebookDiffCellInputTitle");static NotebookDiffCellMetadataTitle=new r("NotebookDiffCellMetadataTitle");static NotebookDiffCellOutputsTitle=new r("NotebookDiffCellOutputsTitle");static NotebookOutputToolbar=new r("NotebookOutputToolbar");static NotebookOutlineFilter=new r("NotebookOutlineFilter");static NotebookOutlineActionMenu=new r("NotebookOutlineActionMenu");static NotebookEditorLayoutConfigure=new r("NotebookEditorLayoutConfigure");static NotebookKernelSource=new r("NotebookKernelSource");static BulkEditTitle=new r("BulkEditTitle");static BulkEditContext=new r("BulkEditContext");static TimelineItemContext=new r("TimelineItemContext");static TimelineTitle=new r("TimelineTitle");static TimelineTitleContext=new r("TimelineTitleContext");static TimelineFilterSubMenu=new r("TimelineFilterSubMenu");static AccountsContext=new r("AccountsContext");static SidebarTitle=new r("SidebarTitle");static PanelTitle=new r("PanelTitle");static AuxiliaryBarTitle=new r("AuxiliaryBarTitle");static AuxiliaryBarHeader=new r("AuxiliaryBarHeader");static TerminalInstanceContext=new r("TerminalInstanceContext");static TerminalEditorInstanceContext=new r("TerminalEditorInstanceContext");static TerminalNewDropdownContext=new r("TerminalNewDropdownContext");static TerminalTabContext=new r("TerminalTabContext");static TerminalTabEmptyAreaContext=new r("TerminalTabEmptyAreaContext");static TerminalStickyScrollContext=new r("TerminalStickyScrollContext");static WebviewContext=new r("WebviewContext");static InlineCompletionsActions=new r("InlineCompletionsActions");static InlineEditsActions=new r("InlineEditsActions");static InlineEditActions=new r("InlineEditActions");static NewFile=new r("NewFile");static MergeInput1Toolbar=new r("MergeToolbar1Toolbar");static MergeInput2Toolbar=new r("MergeToolbar2Toolbar");static MergeBaseToolbar=new r("MergeBaseToolbar");static MergeInputResultToolbar=new r("MergeToolbarResultToolbar");static InlineSuggestionToolbar=new r("InlineSuggestionToolbar");static InlineEditToolbar=new r("InlineEditToolbar");static ChatContext=new r("ChatContext");static ChatCodeBlock=new r("ChatCodeblock");static ChatCompareBlock=new r("ChatCompareBlock");static ChatMessageTitle=new r("ChatMessageTitle");static ChatExecute=new r("ChatExecute");static ChatExecuteSecondary=new r("ChatExecuteSecondary");static ChatInputSide=new r("ChatInputSide");static AccessibleView=new r("AccessibleView");static MultiDiffEditorFileToolbar=new r("MultiDiffEditorFileToolbar");static DiffEditorHunkToolbar=new r("DiffEditorHunkToolbar");static DiffEditorSelectionToolbar=new r("DiffEditorSelectionToolbar");static for(e){return r._instances.get(e)??new r(e)}id;constructor(e){if(r._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);r._instances.set(e,this),this.id=e}},ro=A("menuService"),Kd=class r{constructor(e){this.id=e;this.has=t=>t===e}static _all=new Map;static for(e){let t=this._all.get(e);return t||(t=new r(e),this._all.set(e,t)),t}static merge(e){let t=new Set;for(let n of e)n instanceof r&&t.add(n.id);return t}has},Vt=new class{_commands=new Map;_menuItems=new Map;_onDidChangeMenu=new Ib({merge:Kd.merge});onDidChangeMenu=this._onDidChangeMenu.event;addCommand(r){return this._commands.set(r.id,r),this._onDidChangeMenu.fire(Kd.for(me.CommandPalette)),ie(()=>{this._commands.delete(r.id)&&this._onDidChangeMenu.fire(Kd.for(me.CommandPalette))})}getCommand(r){return this._commands.get(r)}getCommands(){let r=new Map;return this._commands.forEach((e,t)=>r.set(t,e)),r}appendMenuItem(r,e){let t=this._menuItems.get(r);t||(t=new ei,this._menuItems.set(r,t));let n=t.push(e);return this._onDidChangeMenu.fire(Kd.for(r)),ie(()=>{n(),this._onDidChangeMenu.fire(Kd.for(r))})}appendMenuItems(r){let e=new Q;for(let{id:t,item:n}of r)e.add(this.appendMenuItem(t,n));return e}getMenuItems(r){let e;return this._menuItems.has(r)?e=[...this._menuItems.get(r)]:e=[],r===me.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(r){let e=new Set;for(let t of r)yu(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||r.push({command:t})})}},wi=class extends Ca{constructor(t,n,i){super(`submenuitem.${t.submenu.id}`,typeof t.title=="string"?t.title:t.title.value,i,"submenu");this.item=t;this.hideActions=n}},Ui=class{constructor(e,t,n,i,o,s,a){this.hideActions=i;this.menuKeybinding=o;this._commandService=a;this.id=e.id,this.label=Ui.label(e,n),this.tooltip=(typeof e.tooltip=="string"?e.tooltip:e.tooltip?.value)??"",this.enabled=!e.precondition||s.contextMatchesRules(e.precondition),this.checked=void 0;let l;if(e.toggled){let d=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=s.contextMatchesRules(d.condition),this.checked&&d.tooltip&&(this.tooltip=typeof d.tooltip=="string"?d.tooltip:d.tooltip.value),this.checked&&qe.isThemeIcon(d.icon)&&(l=d.icon),this.checked&&d.title&&(this.label=typeof d.title=="string"?d.title:d.title.value)}l||(l=qe.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new Ui(t,void 0,n,i,void 0,s,a):void 0,this._options=n,this.class=l&&qe.asClassName(l)}static label(e,t){return t?.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value}item;alt;_options;id;label;tooltip;class;enabled;checked;run(...e){let t=[];return this._options?.arg&&(t=[...t,this._options.arg]),this._options?.shouldForwardArgs&&(t=[...t,...e]),this._commandService.executeCommand(this.id,...t)}};Ui=C([v(5,Ge),v(6,Zi)],Ui);var je=class{constructor(e){this.desc=e}};function Me(r){let e=[],t=new r,{f1:n,menu:i,keybinding:o,...s}=t.desc;if(vr.getCommand(s.id))throw new Error(`Cannot register two commands with the same id: ${s.id}`);if(e.push(vr.registerCommand({id:s.id,handler:(a,...l)=>t.run(a,...l),metadata:s.metadata})),Array.isArray(i))for(let a of i)e.push(Vt.appendMenuItem(a.id,{command:{...s,precondition:a.precondition===null?void 0:s.precondition},...a}));else i&&e.push(Vt.appendMenuItem(i.id,{command:{...s,precondition:i.precondition===null?void 0:s.precondition},...i}));if(n&&(e.push(Vt.appendMenuItem(me.CommandPalette,{command:s,when:s.precondition})),e.push(Vt.addCommand(s))),Array.isArray(o))for(let a of o)e.push(Bi.registerKeybindingRule({...a,id:s.id,when:s.precondition?X.and(s.precondition,a.when):a.when}));else o&&e.push(Bi.registerKeybindingRule({...o,id:s.id,when:s.precondition?X.and(s.precondition,o.when):o.when}));return{dispose(){vt(e)}}}var nA=A("IExtensionRecommendationNotificationService");function Tl(r){return r===47||r===92}function Im(r){return r.replace(/[\\/]/g,bt.sep)}function rA(r){return r.indexOf("/")===-1&&(r=Im(r)),/^[a-zA-Z]:(\/|$)/.test(r)&&(r="/"+r),r}function bw(r,e=bt.sep){if(!r)return"";let t=r.length,n=r.charCodeAt(0);if(Tl(n)){if(Tl(r.charCodeAt(1))&&!Tl(r.charCodeAt(2))){let o=3,s=o;for(;o<t&&!Tl(r.charCodeAt(o));o++);if(s!==o&&!Tl(r.charCodeAt(o+1))){for(o+=1;o<t;o++)if(Tl(r.charCodeAt(o)))return r.slice(0,o+1).replace(/[\\/]/g,e)}}return e}else if(oA(n)&&r.charCodeAt(1)===58)return Tl(r.charCodeAt(2))?r.slice(0,2)+e:r.slice(0,2);let i=r.indexOf("://");if(i!==-1){for(i+=3;i<t;i++)if(Tl(r.charCodeAt(i)))return r.slice(0,i+1)}return""}function Sm(r,e,t,n=gr){if(r===e)return!0;if(!r||!e||e.length>r.length)return!1;if(t){if(!yl(r,e))return!1;if(e.length===r.length)return!0;let o=e.length;return e.charAt(e.length-1)===n&&o--,r.charAt(o)===n}return e.charAt(e.length-1)!==n&&(e+=n),r.indexOf(e)===0}function oA(r){return r>=65&&r<=90||r>=97&&r<=122}function sA(r,e=xt){return e?oA(r.charCodeAt(0))&&r.charCodeAt(1)===58:!1}function aA(r,e=xt){return sA(r,e)?r[0]:void 0}function lA(r,e,t){return e.length>r.length?-1:r===e?0:(t&&(r=r.toLowerCase(),e=e.toLowerCase()),r.indexOf(e))}function dA(r){let e=r.split(":"),t,n,i;for(let o of e){let s=Number(o);fr(s)?n===void 0?n=s:i===void 0&&(i=s):t=t?[t,o].join(":"):o}if(!t)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:t,line:n!==void 0?n:void 0,column:i!==void 0?i:n!==void 0?1:void 0}}var le;(Re=>(Re.inMemory="inmemory",Re.vscode="vscode",Re.internal="private",Re.walkThrough="walkThrough",Re.walkThroughSnippet="walkThroughSnippet",Re.http="http",Re.https="https",Re.file="file",Re.mailto="mailto",Re.untitled="untitled",Re.data="data",Re.command="command",Re.vscodeRemote="vscode-remote",Re.vscodeRemoteResource="vscode-remote-resource",Re.vscodeManagedRemoteResource="vscode-managed-remote-resource",Re.vscodeUserData="vscode-userdata",Re.vscodeCustomEditor="vscode-custom-editor",Re.vscodeNotebookCell="vscode-notebook-cell",Re.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",Re.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",Re.vscodeNotebookCellOutput="vscode-notebook-cell-output",Re.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",Re.vscodeNotebookMetadata="vscode-notebook-metadata",Re.vscodeInteractiveInput="vscode-interactive-input",Re.vscodeSettings="vscode-settings",Re.vscodeWorkspaceTrust="vscode-workspace-trust",Re.vscodeTerminal="vscode-terminal",Re.vscodeChatCodeBlock="vscode-chat-code-block",Re.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",Re.vscodeChatSesssion="vscode-chat-editor",Re.webviewPanel="webview-panel",Re.vscodeWebview="vscode-webview",Re.extension="extension",Re.vscodeFileResource="vscode-file",Re.tmp="tmp",Re.vsls="vsls",Re.vscodeSourceControl="vscode-scm",Re.commentsInput="comment",Re.codeSetting="code-setting",Re.outputChannel="output"))(le||={});function Qb(r,e){return W.isUri(r)?br(r.scheme,e):yl(r,e+":")}var xz="tkn",vw=class{_hosts=Object.create(null);_ports=Object.create(null);_connectionTokens=Object.create(null);_preferredWebSchema="http";_delegate=null;_serverRootPath="/";setPreferredWebSchema(e){this._preferredWebSchema=e}setDelegate(e){this._delegate=e}setServerRootPath(e,t){this._serverRootPath=Tz(e,t)}getServerRootPath(){return this._serverRootPath}get _remoteResourcesPath(){return bt.join(this._serverRootPath,le.vscodeRemoteResource)}set(e,t,n){this._hosts[e]=t,this._ports[e]=n}setConnectionToken(e,t){this._connectionTokens[e]=t}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return Ze(a),e}let t=e.authority,n=this._hosts[t];n&&n.indexOf(":")!==-1&&n.indexOf("[")===-1&&(n=`[${n}]`);let i=this._ports[t],o=this._connectionTokens[t],s=`path=${encodeURIComponent(e.path)}`;return typeof o=="string"&&(s+=`&${xz}=${encodeURIComponent(o)}`),W.from({scheme:_t?this._preferredWebSchema:le.vscodeRemoteResource,authority:`${n}:${i}`,path:this._remoteResourcesPath,query:s})}},Jb=new vw;function Tz(r,e){return bt.join(e??"/",`${r.quality??"oss"}-${r.commit??"dev"}`)}var Iw="vscode-app",yw=class r{static FALLBACK_AUTHORITY=Iw;asBrowserUri(e){let t=this.toUri(e);return this.uriToBrowserUri(t)}uriToBrowserUri(e){return e.scheme===le.vscodeRemote?Jb.rewrite(e):e.scheme===le.file&&(qo||vP===`${le.vscodeFileResource}://${r.FALLBACK_AUTHORITY}`)?e.with({scheme:le.vscodeFileResource,authority:e.authority||r.FALLBACK_AUTHORITY,query:null,fragment:null}):e}asFileUri(e){let t=this.toUri(e);return this.uriToFileUri(t)}uriToFileUri(e){return e.scheme===le.vscodeFileResource?e.with({scheme:le.file,authority:e.authority!==r.FALLBACK_AUTHORITY?e.authority:null,query:null,fragment:null}):e}toUri(e,t){if(W.isUri(e))return e;if(globalThis._VSCODE_FILE_ROOT){let n=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(n))return W.joinPath(W.parse(n,!0),e);let i=Mi(n,e);return W.file(i)}return W.parse(t.toUrl(e))}},yr=new yw,Sw;(o=>{let r=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);o.CoopAndCoep=Object.freeze(r.get("3"));let t="vscode-coi";function n(s){let a;typeof s=="string"?a=new URL(s).searchParams:s instanceof URL?a=s.searchParams:W.isUri(s)&&(a=new URL(s.toString(!0)).searchParams);let l=a?.get(t);if(l)return r.get(l)}o.getHeadersFromQuery=n;function i(s,a,l){if(!globalThis.crossOriginIsolated)return;let d=a&&l?"3":l?"2":"1";s instanceof URLSearchParams?s.set(t,d):s[t]=d}o.addSearchParam=i})(Sw||={});function Ra(r){return Xh(r,!0)}var xm=class{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:Vd(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,t,n=!1){if(e.scheme===t.scheme){if(e.scheme===le.file)return Sm(Ra(e),Ra(t),this._ignorePathCasing(e))&&e.query===t.query&&(n||e.fragment===t.fragment);if(Tm(e.authority,t.authority))return Sm(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(n||e.fragment===t.fragment)}return!1}joinPath(e,...t){return W.joinPath(e,...t)}basenameOrAuthority(e){return oo(e)||e.authority}basename(e){return bt.basename(e.path)}extname(e){return bt.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===le.file?t=W.file(Ab(Ra(e))).path:(t=bt.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===le.file?t=W.file(So(Ra(e))).path:t=bt.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!Tm(e.authority,t.authority))return;if(e.scheme===le.file){let o=EP(Ra(e),Ra(t));return xt?Im(o):o}let n=e.path||"/",i=t.path||"/";if(this._ignorePathCasing(e)){let o=0;for(let s=Math.min(n.length,i.length);o<s&&!(n.charCodeAt(o)!==i.charCodeAt(o)&&n.charAt(o).toLowerCase()!==i.charAt(o).toLowerCase());o++);n=i.substr(0,o)+n.substr(o)}return bt.relative(n,i)}resolvePath(e,t){if(e.scheme===le.file){let n=W.file(uu(Ra(e),t));return e.with({authority:n.authority,path:n.path})}return t=rA(t),e.with({path:bt.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&br(e,t)}hasTrailingPathSeparator(e,t=gr){if(e.scheme===le.file){let n=Ra(e);return n.length>bw(n).length&&n[n.length-1]===t}else{let n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=gr){return cA(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=gr){let n=!1;if(e.scheme===le.file){let i=Ra(e);n=i!==void 0&&i.length===bw(i).length&&i[i.length-1]===t}else{t="/";let i=e.path;n=i.length===1&&i.charCodeAt(i.length-1)===47}return!n&&!cA(e,t)?e.with({path:e.path+"/"}):e}},Tt=new xm(()=>!1),uA=new xm(r=>r.scheme===le.file?!Wt:!0),xw=new xm(r=>!0),To=Tt.isEqual.bind(Tt),ZY=Tt.isEqualOrParent.bind(Tt),eX=Tt.getComparisonKey.bind(Tt),Iu=Tt.basenameOrAuthority.bind(Tt),oo=Tt.basename.bind(Tt),Zb=Tt.extname.bind(Tt),ev=Tt.dirname.bind(Tt),Be=Tt.joinPath.bind(Tt),tX=Tt.normalizePath.bind(Tt),Su=Tt.relativePath.bind(Tt),Tw=Tt.resolvePath.bind(Tt),nX=Tt.isAbsolutePath.bind(Tt),Tm=Tt.isEqualAuthority.bind(Tt),cA=Tt.hasTrailingPathSeparator.bind(Tt),iX=Tt.removeTrailingPathSeparator.bind(Tt),rX=Tt.addTrailingPathSeparator.bind(Tt);var Ez;(o=>{o.META_DATA_LABEL="label",o.META_DATA_DESCRIPTION="description",o.META_DATA_SIZE="size",o.META_DATA_MIME="mime";function i(s){let a=new Map;s.path.substring(s.path.indexOf(";")+1,s.path.lastIndexOf(";")).split(";").forEach(u=>{let[p,h]=u.split(":");p&&h&&a.set(p,h)});let d=s.path.substring(0,s.path.indexOf(";"));return d&&a.set(o.META_DATA_MIME,d),a}o.parseMetaData=i})(Ez||={});function rv(r){return!!r&&typeof r.then=="function"}function Eo(r){let e=new xi,t=r(e.token),n=new Promise((i,o)=>{let s=e.token.onCancellationRequested(()=>{s.dispose(),o(new Xi)});Promise.resolve(t).then(a=>{s.dispose(),e.dispose(),i(a)},a=>{s.dispose(),e.dispose(),o(a)})});return new class{cancel(){e.cancel(),e.dispose()}then(i,o){return n.then(i,o)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}function Cm(r,e,t){return new Promise((n,i)=>{let o=e.onCancellationRequested(()=>{o.dispose(),n(t)});r.then(n,i).finally(()=>o.dispose())})}function km(){let r,e;return{promise:new Promise((n,i)=>{r=n,e=i}),resolve:r,reject:e}}var ww=class{activePromise;queuedPromise;queuedPromiseFactory;isDisposed=!1;constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){let t=()=>{if(this.queuedPromise=null,this.isDisposed)return;let n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n};this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(i=>{this.activePromise=null,t(i)},i=>{this.activePromise=null,n(i)})})}dispose(){this.isDisposed=!0}};var wz=(r,e)=>{let t=!0,n=setTimeout(()=>{t=!1,e()},r);return{isTriggered:()=>t,dispose:()=>{clearTimeout(n),t=!1}}},Cz=r=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,r())}),{isTriggered:()=>e,dispose:()=>{e=!1}}},so=class{constructor(e){this.defaultDelay=e;this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}deferred;completionPromise;doResolve;doReject;task;trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((i,o)=>{this.doResolve=i,this.doReject=o}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){let i=this.task;return this.task=null,i()}}));let n=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=t===bb?Cz(n):wz(t,n),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new Xi),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}},El=class{delayer;throttler;constructor(e){this.delayer=new so(e),this.throttler=new ww}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}},wl=class{_isOpen;_promise;_completePromise;constructor(){this._isOpen=!1,this._promise=new Promise((e,t)=>{this._completePromise=e})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}};function Cn(r,e){return e?new Promise((t,n)=>{let i=setTimeout(()=>{o.dispose(),t()},r),o=e.onCancellationRequested(()=>{clearTimeout(i),o.dispose(),n(new Xi)})}):Eo(t=>Cn(r,t))}function Dm(r,e=0,t){let n=setTimeout(()=>{r(),t&&i.dispose()},e),i=ie(()=>{clearTimeout(n),t?.deleteAndLeak(i)});return t?.add(i),i}var La=class{_token;_isDisposed=!1;constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new gt("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new gt("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}},tv=class{disposable=void 0;isDisposed=!1;cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(e,t,n=globalThis){if(this.isDisposed)throw new gt("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let i=n.setInterval(()=>{e()},t);this.disposable=ie(()=>{n.clearInterval(i),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},Bn=class{runner;timeoutToken;timeout;timeoutHandler;constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}flush(){this.isScheduled()&&(this.cancel(),this.doRun())}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner?.()}};var Cl,Em;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?Em=(r,e)=>{Db(()=>{if(t)return;let n=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,n-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:Em=(r,e,t)=>{let n=r.requestIdleCallback(e,typeof t=="number"?{timeout:t}:void 0),i=!1;return{dispose(){i||(i=!0,r.cancelIdleCallback(n))}}},Cl=r=>Em(globalThis,r)})();var nv=class{_executor;_handle;_didRun=!1;_value;_error;constructor(e,t){this._executor=()=>{try{this._value=t()}catch(n){this._error=n}finally{this._didRun=!0}},this._handle=Em(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}},wm=class extends nv{constructor(e){super(globalThis,e)}};var iv=class{_running;_queued;isRunning(e){return typeof e=="number"?this._running?.taskId===e:!!this._running}get running(){return this._running?.promise}cancelRunning(){this._running?.cancel()}run(e,t,n){return this._running={taskId:e,cancel:()=>n?.(),promise:t},t.then(()=>this.doneRunning(e),()=>this.doneRunning(e)),t}doneRunning(e){this._running&&e===this._running.taskId&&(this._running=void 0,this.runQueued())}runQueued(){if(this._queued){let e=this._queued;this._queued=void 0,e.run().then(e.promiseResolve,e.promiseReject)}}queue(e){if(this._queued)this._queued.run=e;else{let{promise:t,resolve:n,reject:i}=km();this._queued={run:e,promise:t,promiseResolve:n,promiseReject:i}}return this._queued.promise}hasQueued(){return!!this._queued}async join(){return this._queued?.promise??this._running?.promise}};var Ir=class{completeCallback;errorCallback;outcome;get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}p;constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new Xi)}},Ci;(t=>{async function r(n){let i,o=await Promise.all(n.map(s=>s.then(a=>a,a=>{i||(i=a)})));if(typeof i<"u")throw i;return o}t.settled=r;function e(n){return new Promise(async(i,o)=>{try{await n(i,o)}catch(s){o(s)}})}t.withAsyncBody=e})(Ci||={});var pA=class r{static fromArray(e){return new r(t=>{t.emitMany(e)})}static fromPromise(e){return new r(async t=>{t.emitMany(await e)})}static fromPromises(e){return new r(async t=>{await Promise.all(e.map(async n=>t.emitOne(await n)))})}static merge(e){return new r(async t=>{await Promise.all(e.map(async n=>{for await(let i of n)t.emitOne(i)}))})}static EMPTY=r.fromArray([]);_state;_results;_error;_onReturn;_onStateChanged;constructor(e,t){this._state=0,this._results=[],this._error=null,this._onReturn=t,this._onStateChanged=new x,queueMicrotask(async()=>{let n={emitOne:i=>this.emitOne(i),emitMany:i=>this.emitMany(i),reject:i=>this.reject(i)};try{await Promise.resolve(e(n)),this.resolve()}catch(i){this.reject(i)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await N.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(e,t){return new r(async n=>{for await(let i of e)n.emitOne(t(i))})}map(e){return r.map(this,e)}static filter(e,t){return new r(async n=>{for await(let i of e)t(i)&&n.emitOne(i)})}filter(e){return r.filter(this,e)}static coalesce(e){return r.filter(e,t=>!!t)}coalesce(){return r.coalesce(this)}static async toPromise(e){let t=[];for await(let n of e)t.push(n);return t}toPromise(){return r.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};function _m(r,e){return new Cw(r,e)}var Cw=class{constructor(e,t){this.reducer=e;this.options=t}state={flowing:!1,ended:!1,destroyed:!1};buffer={data:[],error:[]};listeners={data:[],error:[],end:[]};pendingWritePromises=[];pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(e){if(!this.state.destroyed){if(this.state.flowing)this.emitData(e);else if(this.buffer.data.push(e),typeof this.options?.highWaterMark=="number"&&this.buffer.data.length>this.options.highWaterMark)return new Promise(t=>this.pendingWritePromises.push(t))}}error(e){this.state.destroyed||(this.state.flowing?this.emitError(e):this.buffer.error.push(e))}end(e){this.state.destroyed||(typeof e<"u"&&this.write(e),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(e){this.listeners.data.slice(0).forEach(t=>t(e))}emitError(e){this.listeners.error.length===0?Ze(e):this.listeners.error.slice(0).forEach(t=>t(e))}emitEnd(){this.listeners.end.slice(0).forEach(e=>e())}on(e,t){if(!this.state.destroyed)switch(e){case"data":this.listeners.data.push(t),this.resume();break;case"end":this.listeners.end.push(t),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(t),this.state.flowing&&this.flowErrors();break}}removeListener(e,t){if(this.state.destroyed)return;let n;switch(e){case"data":n=this.listeners.data;break;case"end":n=this.listeners.end;break;case"error":n=this.listeners.error;break}if(n){let i=n.indexOf(t);i>=0&&n.splice(i,1)}}flowData(){if(this.buffer.data.length>0){let e=this.reducer(this.buffer.data);this.emitData(e),this.buffer.data.length=0;let t=[...this.pendingWritePromises];this.pendingWritePromises.length=0,t.forEach(n=>n())}}flowErrors(){if(this.listeners.error.length>0){for(let e of this.buffer.error)this.emitError(e);this.buffer.error.length=0}}flowEnd(){return this.state.ended?(this.emitEnd(),this.listeners.end.length>0):!1}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}};function hA(r,e){return new Promise((t,n)=>{let i=[];ov(r,{onData:o=>{e&&i.push(o)},onError:o=>{e?n(o):t(void 0)},onEnd:()=>{t(e?e(i):void 0)}})})}function ov(r,e,t){r.on("error",n=>{t?.isCancellationRequested||e.onError(n)}),r.on("end",()=>{t?.isCancellationRequested||e.onEnd()}),r.on("data",n=>{t?.isCancellationRequested||e.onData(n)})}function mA(r,e){let t=_m(e);return t.end(r),t}function gA(r){let e=!1;return{read:()=>e?null:(e=!0,r)}}var sv=typeof Buffer<"u",Dz=new Fn(()=>new Uint8Array(256)),kw,Dw,et=class r{static alloc(e){return sv?new r(Buffer.allocUnsafe(e)):new r(new Uint8Array(e))}static wrap(e){return sv&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new r(e)}static fromString(e,t){return!(t?.dontUseNodeBuffer||!1)&&sv?new r(Buffer.from(e)):(kw||(kw=new TextEncoder),new r(kw.encode(e)))}static fromByteArray(e){let t=r.alloc(e.length);for(let n=0,i=e.length;n<i;n++)t.buffer[n]=e[n];return t}static concat(e,t){if(typeof t>"u"){t=0;for(let o=0,s=e.length;o<s;o++)t+=e[o].byteLength}let n=r.alloc(t),i=0;for(let o=0,s=e.length;o<s;o++){let a=e[o];n.set(a,i),i+=a.byteLength}return n}buffer;byteLength;constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}clone(){let e=r.alloc(this.byteLength);return e.set(this),e}toString(){return sv?this.buffer.toString():(Dw||(Dw=new TextDecoder),Dw.decode(this.buffer))}slice(e,t){return new r(this.buffer.subarray(e,t))}set(e,t){if(e instanceof r)this.buffer.set(e.buffer,t);else if(e instanceof Uint8Array)this.buffer.set(e,t);else if(e instanceof ArrayBuffer)this.buffer.set(new Uint8Array(e),t);else if(ArrayBuffer.isView(e))this.buffer.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t);else throw new Error("Unknown argument 'array'")}readUInt32BE(e){return ti(this.buffer,e)}writeUInt32BE(e,t){ni(this.buffer,e,t)}readUInt32LE(e){return Rz(this.buffer,e)}writeUInt32LE(e,t){Lz(this.buffer,e,t)}readUInt8(e){return av(this.buffer,e)}writeUInt8(e,t){lv(this.buffer,e,t)}indexOf(e,t=0){return _z(this.buffer,e instanceof r?e.buffer:e,t)}};function _z(r,e,t=0){let n=e.byteLength,i=r.byteLength;if(n===0)return 0;if(n===1)return r.indexOf(e[0]);if(n>i-t)return-1;let o=Dz.value;o.fill(e.length);for(let d=0;d<e.length;d++)o[e[d]]=e.length-d-1;let s=t+e.length-1,a=s,l=-1;for(;s<i;)if(r[s]===e[a]){if(a===0){l=s;break}s--,a--}else s+=Math.max(e.length-a,o[r[s]]),a=e.length-1;return l}function fA(r,e){return r[e+0]<<0>>>0|r[e+1]<<8>>>0}function bA(r,e,t){r[t+0]=e&255,e=e>>>8,r[t+1]=e&255}function ti(r,e){return r[e]*2**24+r[e+1]*2**16+r[e+2]*2**8+r[e+3]}function ni(r,e,t){r[t+3]=e,e=e>>>8,r[t+2]=e,e=e>>>8,r[t+1]=e,e=e>>>8,r[t]=e}function Rz(r,e){return r[e+0]<<0>>>0|r[e+1]<<8>>>0|r[e+2]<<16>>>0|r[e+3]<<24>>>0}function Lz(r,e,t){r[t+0]=e&255,e=e>>>8,r[t+1]=e&255,e=e>>>8,r[t+2]=e&255,e=e>>>8,r[t+3]=e&255}function av(r,e){return r[e]}function lv(r,e,t){r[t]=e}function vA(r){return gA(r)}function _w(r){return hA(r,e=>et.concat(e))}function yA(r){return mA(r,e=>et.concat(e))}function J(r,e,t){let n=null,i=null;if(typeof t.value=="function"?(n="value",i=t.value,i.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",i=t.get),!i)throw new Error("not supported");let o=`$memoize$${e}`;t[n]=function(...s){return this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:i.apply(this,s)}),this[o]}}function dv(r){return JSON.stringify(r,Pz)}function Tu(r){let e=JSON.parse(r);return e=xu(e),e}function Pz(r,e){return e instanceof RegExp?{$mid:2,source:e.source,flags:e.flags}:e}function xu(r,e=0){if(!r||e>200)return r;if(typeof r=="object"){switch(r.$mid){case 1:return W.revive(r);case 2:return new RegExp(r.source,r.flags);case 17:return new Date(r.source)}if(r instanceof et||r instanceof Uint8Array)return r;if(Array.isArray(r))for(let t=0;t<r.length;++t)r[t]=xu(r[t],e+1);else for(let t in r)Object.hasOwnProperty.call(r,t)&&(r[t]=xu(r[t],e+1))}return r}function IA(r){switch(r){case 100:return"req";case 101:return"cancel";case 102:return"subscribe";case 103:return"unsubscribe"}}function SA(r){switch(r){case 200:return"init";case 201:return"reply:";case 202:case 203:return"replyErr:";case 204:return"event:"}}function Eu(r){let e=0;for(let t=0;;t+=7){let n=r.read(1);if(e|=(n.buffer[0]&127)<<t,!(n.buffer[0]&128))return e}}var Az=kl(0);function wu(r,e){if(e===0){r.write(Az);return}let t=0;for(let i=e;i!==0;i=i>>>7)t++;let n=et.alloc(t);for(let i=0;e!==0;i++)n.buffer[i]=e&127,e=e>>>7,e>0&&(n.buffer[i]|=128);r.write(n)}var Pw=class{constructor(e){this.buffer=e}pos=0;read(e){let t=this.buffer.slice(this.pos,this.pos+e);return this.pos+=t.byteLength,t}},Aw=class{buffers=[];get buffer(){return et.concat(this.buffers)}write(e){this.buffers.push(e)}};function kl(r){let e=et.alloc(1);return e.writeUInt8(r,0),e}var Gd={Undefined:kl(0),String:kl(1),Buffer:kl(2),VSBuffer:kl(3),Array:kl(4),Object:kl(5),Uint:kl(6)},Oz=typeof Buffer<"u";function Ow(r,e){if(typeof e>"u")r.write(Gd.Undefined);else if(typeof e=="string"){let t=et.fromString(e);r.write(Gd.String),wu(r,t.byteLength),r.write(t)}else if(Oz&&Buffer.isBuffer(e)){let t=et.wrap(e);r.write(Gd.Buffer),wu(r,t.byteLength),r.write(t)}else if(e instanceof et)r.write(Gd.VSBuffer),wu(r,e.byteLength),r.write(e);else if(Array.isArray(e)){r.write(Gd.Array),wu(r,e.length);for(let t of e)Ow(r,t)}else if(typeof e=="number"&&(e|0)===e)r.write(Gd.Uint),wu(r,e);else{let t=et.fromString(JSON.stringify(e));r.write(Gd.Object),wu(r,t.byteLength),r.write(t)}}function Mw(r){switch(r.read(1).readUInt8(0)){case 0:return;case 1:return r.read(Eu(r)).toString();case 2:return r.read(Eu(r)).buffer;case 3:return r.read(Eu(r));case 4:{let t=Eu(r),n=[];for(let i=0;i<t;i++)n.push(Mw(r));return n}case 5:return JSON.parse(r.read(Eu(r)).toString());case 6:return Eu(r)}}var Lw=class{constructor(e,t=null){this.protocol=e;this.protocolListener=this.protocol.onMessage(n=>this.onBuffer(n)),this.logger=t}isDisposed=!1;state=0;activeRequests=new Set;handlers=new Map;lastRequestId=0;protocolListener;logger;_onDidInitialize=new x;onDidInitialize=this._onDidInitialize.event;getChannel(e){let t=this;return{call(n,i,o){return t.isDisposed?Promise.reject(new Xi):t.requestPromise(e,n,i,o)},listen(n,i){return t.isDisposed?N.None:t.requestEvent(e,n,i)}}}requestPromise(e,t,n,i=rt.None){let o=this.lastRequestId++,a={id:o,type:100,channelName:e,name:t,arg:n};if(i.isCancellationRequested)return Promise.reject(new Xi);let l;return new Promise((u,p)=>{if(i.isCancellationRequested)return p(new Xi);let h=()=>{let y=T=>{switch(T.type){case 201:this.handlers.delete(o),u(T.data);break;case 202:{this.handlers.delete(o);let E=new Error(T.data.message);E.stack=Array.isArray(T.data.stack)?T.data.stack.join(`
`):T.data.stack,E.name=T.data.name,p(E);break}case 203:this.handlers.delete(o),p(T.data);break}};this.handlers.set(o,y),this.sendRequest(a)},m=null;this.state===1?h():(m=Eo(y=>this.whenInitialized()),m.then(()=>{m=null,h()}));let f=()=>{m?(m.cancel(),m=null):this.sendRequest({id:o,type:101}),p(new Xi)},g=i.onCancellationRequested(f);l=Ti(ie(f),g),this.activeRequests.add(l)}).finally(()=>{l.dispose(),this.activeRequests.delete(l)})}requestEvent(e,t,n){let i=this.lastRequestId++,s={id:i,type:102,channelName:e,name:t,arg:n},a=null,l=new x({onWillAddFirstListener:()=>{a=Eo(u=>this.whenInitialized()),a.then(()=>{a=null,this.activeRequests.add(l),this.sendRequest(s)})},onDidRemoveLastListener:()=>{a?(a.cancel(),a=null):(this.activeRequests.delete(l),this.sendRequest({id:i,type:103}))}}),d=u=>l.fire(u.data);return this.handlers.set(i,d),l.event}sendRequest(e){switch(e.type){case 100:case 102:{let t=this.send([e.type,e.id,e.channelName,e.name],e.arg);this.logger?.logOutgoing(t,e.id,0,`${IA(e.type)}: ${e.channelName}.${e.name}`,e.arg);return}case 101:case 103:{let t=this.send([e.type,e.id]);this.logger?.logOutgoing(t,e.id,0,IA(e.type));return}}}send(e,t=void 0){let n=new Aw;return Ow(n,e),Ow(n,t),this.sendBuffer(n.buffer)}sendBuffer(e){try{return this.protocol.send(e),e.byteLength}catch{return 0}}onBuffer(e){let t=new Pw(e),n=Mw(t),i=Mw(t),o=n[0];switch(o){case 200:return this.logger?.logIncoming(e.byteLength,0,0,SA(o)),this.onResponse({type:n[0]});case 201:case 202:case 204:case 203:return this.logger?.logIncoming(e.byteLength,n[1],0,SA(o),i),this.onResponse({type:n[0],id:n[1],data:i})}}onResponse(e){if(e.type===200){this.state=1,this._onDidInitialize.fire();return}this.handlers.get(e.id)?.(e)}get onDidInitializePromise(){return N.toPromise(this.onDidInitialize)}whenInitialized(){return this.state===1?Promise.resolve():this.onDidInitializePromise}dispose(){this.isDisposed=!0,this.protocolListener&&(this.protocolListener.dispose(),this.protocolListener=null),vt(this.activeRequests.values()),this.activeRequests.clear()}};C([J],Lw.prototype,"onDidInitializePromise",1);var Nw;(i=>{function r(o,s,a){let l=o,d=a&&a.disableMarshalling,u=new Map;for(let p in l)t(p)&&u.set(p,N.buffer(l[p],!0,void 0,s));return new class{listen(p,h,m){let f=u.get(h);if(f)return f;let g=l[h];if(typeof g=="function"){if(n(h))return g.call(l,m);if(t(h))return u.set(h,N.buffer(l[h],!0,void 0,s)),u.get(h)}throw new zo(`Event not found: ${h}`)}call(p,h,m){let f=l[h];if(typeof f=="function"){if(!d&&Array.isArray(m))for(let y=0;y<m.length;y++)m[y]=xu(m[y]);let g=f.apply(l,m);return g instanceof Promise||(g=Promise.resolve(g)),g}throw new zo(`Method not found: ${h}`)}}}i.fromService=r;function e(o,s){let a=s&&s.disableMarshalling;return new Proxy({},{get(l,d){if(typeof d=="string")return s?.properties?.has(d)?s.properties.get(d):n(d)?function(u){return o.listen(d,u)}:t(d)?o.listen(d):async function(...u){let p;s&&!zt(s.context)?p=[s.context,...u]:p=u;let h=await o.call(d,p);return a?h:xu(h)};throw new zo(`Property not found: ${String(d)}`)}})}i.toService=e;function t(o){return o[0]==="o"&&o[1]==="n"&&mu(o.charCodeAt(2))}function n(o){return/^onDynamic/.test(o)&&mu(o.charCodeAt(9))}})(Nw||={});var cv=class{constructor(e){this.service=e}listen(e,t){throw new Error(`Event not found: ${t}`)}call(e,t,n){switch(t){case"promptImportantExtensionsInstallNotification":return this.service.promptImportantExtensionsInstallNotification(n[0])}throw new Error(`Call not found: ${t}`)}};var Mz=[];function cn(r,e,t){e instanceof Da||(e=new Da(e,[],!!t)),Mz.push([r,e])}var xA=A("mainProcessService");var hv=class{constructor(e,t,n,i){let o=n.getChannel(e);return Nz(t)?i.createInstance(new Da(t.channelClientCtor,[o])):Nw.toService(o,t?.proxyOptions)}};function Nz(r){return!!r?.channelClientCtor}var uv=class extends hv{constructor(e,t,n,i){super(e,t,n,i)}};uv=C([v(2,xA),v(3,_e)],uv);var Fw=A("sharedProcessService"),pv=class extends hv{constructor(e,t,n,i){super(e,t,n,i)}};pv=C([v(2,Fw),v(3,_e)],pv);var NQ=new Uint32Array(10);var FQ=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),BQ=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),UQ=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),VQ=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function EA(...r){return function(e,t){for(let n=0,i=r.length;n<i;n++){let o=r[n](e,t);if(o)return o}return null}}var $Q=wA.bind(void 0,!1),Cu=wA.bind(void 0,!0);function wA(r,e,t){if(!t||t.length<e.length)return null;let n;return r?n=yl(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function Fz(r,e){let t=e.toLowerCase().indexOf(r.toLowerCase());return t===-1?null:[{start:t,end:t+r.length}]}function Bz(r,e){return Uw(r.toLowerCase(),e.toLowerCase(),0,0)}function Uw(r,e,t,n){if(t===r.length)return[];if(n===e.length)return null;if(r[t]===e[n]){let i=null;return(i=Uw(r,e,t+1,n+1))?kA({start:n,end:n+1},i):null}return Uw(r,e,t,n+1)}function Hw(r){return 97<=r&&r<=122}function Lm(r){return 65<=r&&r<=90}function Kw(r){return 48<=r&&r<=57}function Uz(r){return r===32||r===9||r===10||r===13}var Vz=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(r=>Vz.add(r.charCodeAt(0)));function CA(r){return Hw(r)||Lm(r)||Kw(r)}function kA(r,e){return e.length===0?e=[r]:r.end===e[0].start?e[0].start=r.start:e.unshift(r),e}function DA(r,e){for(let t=e;t<r.length;t++){let n=r.charCodeAt(t);if(Lm(n)||Kw(n)||t>0&&!CA(r.charCodeAt(t-1)))return t}return r.length}function Vw(r,e,t,n){if(t===r.length)return[];if(n===e.length)return null;if(r[t]!==e[n].toLowerCase())return null;{let i=null,o=n+1;for(i=Vw(r,e,t+1,n+1);!i&&(o=DA(e,o))<e.length;)i=Vw(r,e,t+1,o),o++;return i===null?null:kA({start:n,end:n+1},i)}}function Wz(r){let e=0,t=0,n=0,i=0,o=0;for(let u=0;u<r.length;u++)o=r.charCodeAt(u),Lm(o)&&e++,Hw(o)&&t++,CA(o)&&n++,Kw(o)&&i++;let s=e/r.length,a=t/r.length,l=n/r.length,d=i/r.length;return{upperPercent:s,lowerPercent:a,alphaPercent:l,numericPercent:d}}function zz(r){let{upperPercent:e,lowerPercent:t}=r;return t===0&&e>.6}function Hz(r){let{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:i}=r;return t>.2&&e<.8&&n>.6&&i<.2}function Kz(r){let e=0,t=0,n=0,i=0;for(let o=0;o<r.length;o++)n=r.charCodeAt(o),Lm(n)&&e++,Hw(n)&&t++,Uz(n)&&i++;return(e===0||t===0)&&i===0?r.length<=30:e<=5}function _A(r,e){if(!e||(e=e.trim(),e.length===0)||!Kz(r))return null;e.length>60&&(e=e.substring(0,60));let t=Wz(e);if(!Hz(t)){if(!zz(t))return null;e=e.toLowerCase()}let n=null,i=0;for(r=r.toLowerCase();i<e.length&&(n=Vw(r,e,0,i))===null;)i=DA(e,i+1);return n}var jQ=EA(Cu,_A,Fz),YQ=EA(Cu,_A,Bz),XQ=new xo(1e4);function RA(r,e){let t=fv(r,r.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return t?LA(t):null}function LA(r){if(typeof r>"u")return[];let e=[],t=r[1];for(let n=r.length-1;n>1;n--){let i=r[n]+t,o=e[e.length-1];o&&o.end===i?o.end=i+1:e.push({start:i,end:i+1})}return e}var _l=128;function Gw(){let r=[],e=[];for(let t=0;t<=_l;t++)e[t]=0;for(let t=0;t<=_l;t++)r.push(e.slice(0));return r}function PA(r){let e=[];for(let t=0;t<=r;t++)e[t]=0;return e}var AA=PA(2*_l),Ww=PA(2*_l),Rs=Gw(),Dl=Gw(),Rm=Gw(),Gz=!1;function Bw(r,e,t,n,i){function o(a,l,d=" "){for(;a.length<l;)a=d+a;return a}let s=` |   |${n.split("").map(a=>o(a,3)).join("|")}
`;for(let a=0;a<=t;a++)a===0?s+=" |":s+=`${e[a-1]}|`,s+=r[a].slice(0,i+1).map(l=>o(l.toString(),3)).join("|")+`
`;return s}function qz(r,e,t,n){r=r.substr(e),t=t.substr(n),console.log(Bw(Dl,r,r.length,t,t.length)),console.log(Bw(Rm,r,r.length,t,t.length)),console.log(Bw(Rs,r,r.length,t,t.length))}function mv(r,e){if(e<0||e>=r.length)return!1;let t=r.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!Hb(t)}}function TA(r,e){if(e<0||e>=r.length)return!1;switch(r.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function gv(r,e,t){return e[r]!==t[r]}function $z(r,e,t,n,i,o,s=!1){for(;e<t&&i<o;)r[e]===n[i]&&(s&&(AA[e]=i),e+=1),i+=1;return e===t}var qd;(t=>{t.Default=[-100,0];function e(n){return!n||n.length===2&&n[0]===-100&&n[1]===0}t.isDefault=e})(qd||={});var zw=class{constructor(e,t){this.firstMatchCanBeWeak=e;this.boostFullMatch=t}static default={boostFullMatch:!0,firstMatchCanBeWeak:!1}};function fv(r,e,t,n,i,o,s=zw.default){let a=r.length>_l?_l:r.length,l=n.length>_l?_l:n.length;if(t>=a||o>=l||a-t>l-o||!$z(e,t,a,i,o,l,!0))return;jz(a,l,t,o,e,i);let d=1,u=1,p=t,h=o,m=[!1];for(d=1,p=t;p<a;d++,p++){let E=AA[p],D=Ww[p],_=p+1<a?Ww[p+1]:l;for(u=E-o+1,h=E;h<_;u++,h++){let O=Number.MIN_SAFE_INTEGER,G=!1;h<=D&&(O=Yz(r,e,p,t,n,i,h,l,o,Rs[d-1][u-1]===0,m));let Z=0;O!==Number.MAX_SAFE_INTEGER&&(G=!0,Z=O+Dl[d-1][u-1]);let M=h>E,H=M?Dl[d][u-1]+(Rs[d][u-1]>0?-5:0):0,oe=h>E+1&&Rs[d][u-1]>0,ee=oe?Dl[d][u-2]+(Rs[d][u-2]>0?-5:0):0;if(oe&&(!M||ee>=H)&&(!G||ee>=Z))Dl[d][u]=ee,Rm[d][u]=3,Rs[d][u]=0;else if(M&&(!G||H>=Z))Dl[d][u]=H,Rm[d][u]=2,Rs[d][u]=0;else if(G)Dl[d][u]=Z,Rm[d][u]=1,Rs[d][u]=Rs[d-1][u-1]+1;else throw new Error("not possible")}}if(Gz&&qz(r,t,n,o),!m[0]&&!s.firstMatchCanBeWeak)return;d--,u--;let f=[Dl[d][u],o],g=0,y=0;for(;d>=1;){let E=u;do{let D=Rm[d][E];if(D===3)E=E-2;else if(D===2)E=E-1;else break}while(E>=1);g>1&&e[t+d-1]===i[o+u-1]&&!gv(E+o-1,n,i)&&g+1>Rs[d][E]&&(E=u),E===u?g++:g=1,y||(y=E),d--,u=E-1,f.push(u)}l-o===a&&s.boostFullMatch&&(f[0]+=2);let T=y-a;return f[0]-=T,f}function jz(r,e,t,n,i,o){let s=r-1,a=e-1;for(;s>=t&&a>=n;)i[s]===o[a]&&(Ww[s]=a,s--),a--}function Yz(r,e,t,n,i,o,s,a,l,d,u){if(e[t]!==o[s])return Number.MIN_SAFE_INTEGER;let p=1,h=!1;return s===t-n?p=r[t]===i[s]?7:5:gv(s,i,o)&&(s===0||!gv(s-1,i,o))?(p=r[t]===i[s]?7:5,h=!0):mv(o,s)&&(s===0||!mv(o,s-1))?p=5:(mv(o,s-1)||TA(o,s-1))&&(p=5,h=!0),p>1&&t===n&&(u[0]=!0),h||(h=gv(s,i,o)||mv(o,s-1)||TA(o,s-1)),t===n?s>l&&(p-=h?3:5):d?p+=h?2:0:p+=h?0:1,s+1===a&&(p-=h?3:5),p}var qw=new RegExp(`\\$\\(${qe.iconNameExpression}(?:${qe.iconModifierExpression})?\\)`,"g"),Xz=new RegExp(`(\\\\)?${qw.source}`,"g");function OA(r){return r.replace(Xz,(e,t)=>t?e:`\\${e}`)}var Qz=new RegExp(`\\\\${qw.source}`,"g");function MA(r){return r.replace(Qz,e=>`\\${e}`)}var iJ=new RegExp(`(\\s)?(\\\\)?${qw.source}(\\s)?`,"g");var rJ=new RegExp(`\\$\\(${qe.iconNameCharacter}+\\)`,"g");var $w=class{value;isTrusted;supportThemeIcons;supportHtml;baseUri;constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw Dd("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=Jz(this.supportThemeIcons?OA(e):e).replace(/([ \t]+)/g,(n,i)=>"&nbsp;".repeat(i.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${Zz(t,e)}
`,this}appendLink(e,t,n){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),n&&(this.value+=` "${this._escape(this._escape(n,'"'),")")}"`),this.value+=")",this}_escape(e,t){let n=new RegExp(Ni(t),"g");return e.replace(n,(i,o)=>e.charAt(o-1)!=="\\"?`\\${i}`:i)}};function Rl(r){return r instanceof $w?!0:r&&typeof r=="object"?typeof r.value=="string"&&(typeof r.isTrusted=="boolean"||typeof r.isTrusted=="object"||r.isTrusted===void 0)&&(typeof r.supportThemeIcons=="boolean"||r.supportThemeIcons===void 0):!1}function bv(r,e){return r===e?!0:!r||!e?!1:r.value===e.value&&r.isTrusted===e.isTrusted&&r.supportThemeIcons===e.supportThemeIcons&&r.supportHtml===e.supportHtml&&(r.baseUri===e.baseUri||!!r.baseUri&&!!e.baseUri&&To(W.from(r.baseUri),W.from(e.baseUri)))}function Jz(r){return r.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function Zz(r,e){let t=r.match(/^`+/gm)?.reduce((i,o)=>i.length>o.length?i:o).length??0,n=t>=3?t+1:3;return[`${"`".repeat(n)}${e}`,r,`${"`".repeat(n)}`].join(`
`)}function Pm(r){return r.replace(/"/g,"&quot;")}function vv(r){return r&&r.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function NA(r){let e=[],t=r.split("|").map(i=>i.trim());r=t[0];let n=t[1];if(n){let i=/height=(\d+)/.exec(n),o=/width=(\d+)/.exec(n),s=i?i[1]:"",a=o?o[1]:"",l=isFinite(parseInt(a)),d=isFinite(parseInt(s));l&&e.push(`width="${a}"`),d&&e.push(`height="${s}"`)}return{href:r,dimensions:e}}function kn(r){if(!r||typeof r!="object"||r instanceof RegExp)return r;let e=Array.isArray(r)?[]:{};return Object.entries(r).forEach(([t,n])=>{e[t]=n&&typeof n=="object"?kn(n):n}),e}var e4=Object.prototype.hasOwnProperty;function Yw(r,e){return jw(r,e,new Set)}function jw(r,e,t){if(zt(r))return r;let n=e(r);if(typeof n<"u")return n;if(Array.isArray(r)){let i=[];for(let o of r)i.push(jw(o,e,t));return i}if(fn(r)){if(t.has(r))throw new Error("Cannot clone recursive data-structure");t.add(r);let i={};for(let o in r)e4.call(r,o)&&(i[o]=jw(r[o],e,t));return t.delete(r),i}return r}function $d(r,e,t=!0){return fn(r)?(fn(e)&&Object.keys(e).forEach(n=>{n in r?t&&(fn(r[n])&&fn(e[n])?$d(r[n],e[n],t):r[n]=e[n]):r[n]=e[n]}),r):e}function ii(r,e){if(r===e)return!0;if(r==null||e===null||e===void 0||typeof r!=typeof e||typeof r!="object"||Array.isArray(r)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(r)){if(r.length!==e.length)return!1;for(t=0;t<r.length;t++)if(!ii(r[t],e[t]))return!1}else{let i=[];for(n in r)i.push(n);i.sort();let o=[];for(n in e)o.push(n);if(o.sort(),!ii(i,o))return!1;for(t=0;t<i.length;t++)if(!ii(r[i[t]],e[i[t]]))return!1}return!0}function FA(r,e){let t={};for(let[n,i]of Object.entries(r))t[n]=e(i,n);return t}var Qw=class r{constructor(e,t,n,i,o,s,a){this._forceIntegerValues=e;this._forceIntegerValues&&(t=t|0,n=n|0,i=i|0,o=o|0,s=s|0,a=a|0),this.rawScrollLeft=i,this.rawScrollTop=a,t<0&&(t=0),i+t>n&&(i=n-t),i<0&&(i=0),o<0&&(o=0),a+o>s&&(a=s-o),a<0&&(a=0),this.width=t,this.scrollWidth=n,this.scrollLeft=i,this.height=o,this.scrollHeight=s,this.scrollTop=a}_scrollStateBrand=void 0;rawScrollLeft;rawScrollTop;width;scrollWidth;scrollLeft;height;scrollHeight;scrollTop;equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new r(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new r(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){let n=this.width!==e.width,i=this.scrollWidth!==e.scrollWidth,o=this.scrollLeft!==e.scrollLeft,s=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:i,scrollLeftChanged:o,heightChanged:s,scrollHeightChanged:a,scrollTopChanged:l}}},Pa=class extends P{_scrollableBrand=void 0;_smoothScrollDuration;_scheduleAtNextAnimationFrame;_state;_smoothScrolling;_onScroll=this._register(new x);onScroll=this._onScroll.event;constructor(e){super(),this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new Qw(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){let n=this._state.withScrollDimensions(e,t);this._setState(n,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){let t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};let n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let i;t?i=new Iv(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):i=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=i}else{let n=this._state.withScrollPosition(e);this._smoothScrolling=Iv.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){let n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}},yv=class{scrollLeft;scrollTop;isDone;constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}};function Xw(r,e){let t=e-r;return function(n){return r+t*i4(n)}}function t4(r,e,t){return function(n){return n<t?r(n/t):e((n-t)/(1-t))}}var Iv=class r{from;to;duration;startTime;animationFrameDisposable;scrollLeft;scrollTop;constructor(e,t,n,i){this.from=e,this.to=t,this.duration=i,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let o,s;return e<t?(o=e+.75*n,s=t-.75*n):(o=e-.75*n,s=t+.75*n),t4(Xw(e,o),Xw(s,t),.33)}return Xw(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){let t=(e-this.startTime)/this.duration;if(t<1){let n=this.scrollLeft(t),i=this.scrollTop(t);return new yv(n,i,!1)}return new yv(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return r.start(e,t,n)}static start(e,t,n){n=n+10;let i=Date.now()-10;return new r(e,t,i,n)}};function n4(r){return Math.pow(r,3)}function i4(r){return 1-n4(1-r)}var Sv=new class{_zoomLevel=0;_onDidChangeZoomLevel=new x;onDidChangeZoomLevel=this._onDidChangeZoomLevel.event;getZoomLevel(){return this._zoomLevel}setZoomLevel(r){r=Math.min(Math.max(-5,r),20),this._zoomLevel!==r&&(this._zoomLevel=r,this._onDidChangeZoomLevel.fire(this._zoomLevel))}};var r4=ze?1.5:1.35,Jw=8,Om=class r{_bareFontInfoBrand=void 0;static createFromValidatedSettings(e,t,n){let i=e.get(50),o=e.get(54),s=e.get(53),a=e.get(52),l=e.get(55),d=e.get(68),u=e.get(65);return r._create(i,o,s,a,l,d,u,t,n)}static createFromRawSettings(e,t,n=!1){let i=Ll.fontFamily.validate(e.fontFamily),o=Ll.fontWeight.validate(e.fontWeight),s=Ll.fontSize.validate(e.fontSize),a=Ll.fontLigatures2.validate(e.fontLigatures),l=Ll.fontVariations.validate(e.fontVariations),d=Ll.lineHeight.validate(e.lineHeight),u=Ll.letterSpacing.validate(e.letterSpacing);return r._create(i,o,s,a,l,d,u,t,n)}static _create(e,t,n,i,o,s,a,l,d){s===0?s=r4*n:s<Jw&&(s=s*n),s=Math.round(s),s<Jw&&(s=Jw);let u=1+(d?0:Sv.getZoomLevel()*.1);return n*=u,s*=u,o===Du.TRANSLATE&&(t==="normal"||t==="bold"?o=Du.OFF:(o=`'wght' ${parseInt(t,10)}`,t="normal")),new r({pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:i,fontVariationSettings:o,lineHeight:s,letterSpacing:a})}pixelRatio;fontFamily;fontWeight;fontSize;fontFeatureSettings;fontVariationSettings;lineHeight;letterSpacing;constructor(e){this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){let e=jo.fontFamily,t=r._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}},Zw=2,ku=class extends Om{_editorStylingBrand=void 0;version=Zw;isTrusted;isMonospace;typicalHalfwidthCharacterWidth;typicalFullwidthCharacterWidth;canUseHalfwidthRightwardsArrow;spaceWidth;middotWidth;wsmiddotWidth;maxDigitWidth;constructor(e,t){super(e),this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}};var Ls={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};var eC="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function o4(r=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(let t of eC)r.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}var tC=o4();function Mm(r){let e=tC;if(r&&r instanceof RegExp)if(r.global)e=r;else{let t="g";r.ignoreCase&&(t+="i"),r.multiline&&(t+="m"),r.unicode&&(t+="u"),e=new RegExp(r.source,t)}return e.lastIndex=0,e}var UA=new ei;UA.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function xv(r,e,t,n,i){if(e=Mm(e),i||(i=$e.first(UA)),t.length>i.maxLen){let d=r-i.maxLen/2;return d<0?d=0:n+=d,t=t.substring(d,r+i.maxLen/2),xv(r,e,t,n,i)}let o=Date.now(),s=r-1-n,a=-1,l=null;for(let d=1;!(Date.now()-o>=i.timeBudget);d++){let u=s-i.windowSize*d;e.lastIndex=Math.max(0,u);let p=s4(e,t,s,a);if(!p&&l||(l=p,u<=0))break;a=u}if(l){let d={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,d}return null}function s4(r,e,t,n){let i;for(;i=r.exec(e);){let o=i.index||0;if(o<=t&&r.lastIndex>=t)return i;if(n>0&&o>n)return null}return null}var Ps=A("accessibilityService");var FJ=new V("accessibilityModeEnabled",!1);var VA="ACCESSIBLE_VIEW_SHOWN_";var nC=class{_value="";_pos=0;reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){let t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}},iC=class{constructor(e=!0){this._caseSensitive=e}_value;_from;_to;reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?Vb(e,this._value,0,e.length,this._from,this._to):hu(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}},Tv=class{constructor(e=!0,t=!0){this._splitOnBackslash=e;this._caseSensitive=t}_value;_valueLen;_from;_to;reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){let n=this._value.charCodeAt(t);if(!(n===47||this._splitOnBackslash&&n===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){let t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?Vb(e,this._value,0,e.length,this._from,this._to):hu(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}};var rC=class{constructor(e,t){this._ignorePathCasing=e;this._ignoreQueryAndFragment=t}_pathIterator;_value;_states=[];_stateIdx=0;reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new Tv(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return om(e,this._value.scheme);if(this._states[this._stateIdx]===2)return om(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return Vd(e,this._value.query);if(this._states[this._stateIdx]===5)return Vd(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}},_u=class{height=1;segment;value;key;left;mid;right;isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){let e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){let e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}};var Pl=class r{static forUris(e=()=>!1,t=()=>!1){return new r(new rC(e,t))}static forPaths(e=!1){return new r(new Tv(void 0,!e))}static forStrings(){return new r(new nC)}static forConfigKeys(){return new r(new iC)}_iter;_root;constructor(e){this._iter=e}clear(){this._root=void 0}fill(e,t){if(t){let n=t.slice(0);NE(n);for(let i of n)this.set(i,e)}else{let n=e.slice(0);NE(n);for(let i of n)this.set(i[0],i[1])}}set(e,t){let n=this._iter.reset(e),i;this._root||(this._root=new _u,this._root.segment=n.value());let o=[];for(i=this._root;;){let a=n.cmp(i.segment);if(a>0)i.left||(i.left=new _u,i.left.segment=n.value()),o.push([-1,i]),i=i.left;else if(a<0)i.right||(i.right=new _u,i.right.segment=n.value()),o.push([1,i]),i=i.right;else if(n.hasNext())n.next(),i.mid||(i.mid=new _u,i.mid.segment=n.value()),o.push([0,i]),i=i.mid;else break}let s=i.value;i.value=t,i.key=e;for(let a=o.length-1;a>=0;a--){let l=o[a][1];l.updateHeight();let d=l.balanceFactor();if(d<-1||d>1){let u=o[a][0],p=o[a+1][0];if(u===1&&p===1)o[a][1]=l.rotateLeft();else if(u===-1&&p===-1)o[a][1]=l.rotateRight();else if(u===1&&p===-1)l.right=o[a+1][1]=o[a+1][1].rotateRight(),o[a][1]=l.rotateLeft();else if(u===-1&&p===1)l.left=o[a+1][1]=o[a+1][1].rotateLeft(),o[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(o[a-1][0]){case-1:o[a-1][1].left=o[a][1];break;case 1:o[a-1][1].right=o[a][1];break;case 0:o[a-1][1].mid=o[a][1];break}else this._root=o[0][1]}}return s}get(e){return this._getNode(e)?.value}_getNode(e){let t=this._iter.reset(e),n=this._root;for(;n;){let i=t.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){let t=this._getNode(e);return!(t?.value===void 0&&t?.mid===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){let n=this._iter.reset(e),i=[],o=this._root;for(;o;){let s=n.cmp(o.segment);if(s>0)i.push([-1,o]),o=o.left;else if(s<0)i.push([1,o]),o=o.right;else if(n.hasNext())n.next(),i.push([0,o]),o=o.mid;else break}if(o){if(t?(o.left=void 0,o.mid=void 0,o.right=void 0,o.height=1):(o.key=void 0,o.value=void 0),!o.mid&&!o.value)if(o.left&&o.right){let s=this._min(o.right);if(s.key){let{key:a,value:l,segment:d}=s;this._delete(s.key,!1),o.key=a,o.value=l,o.segment=d}}else{let s=o.left??o.right;if(i.length>0){let[a,l]=i[i.length-1];switch(a){case-1:l.left=s;break;case 0:l.mid=s;break;case 1:l.right=s;break}}else this._root=s}for(let s=i.length-1;s>=0;s--){let a=i[s][1];a.updateHeight();let l=a.balanceFactor();if(l>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),i[s][1]=a.rotateLeft()):l<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),i[s][1]=a.rotateRight()),s>0)switch(i[s-1][0]){case-1:i[s-1][1].left=i[s][1];break;case 1:i[s-1][1].right=i[s][1];break;case 0:i[s-1][1].mid=i[s][1];break}else this._root=i[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){let t=this._iter.reset(e),n=this._root,i;for(;n;){let o=t.cmp(n.segment);if(o>0)n=n.left;else if(o<0)n=n.right;else if(t.hasNext())t.next(),i=n.value||i,n=n.mid;else break}return n&&n.value||i}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){let n=this._iter.reset(e),i=this._root;for(;i;){let o=n.cmp(i.segment);if(o>0)i=i.left;else if(o<0)i=i.right;else if(n.hasNext())n.next(),i=i.mid;else return i.mid?this._entries(i.mid):t?i.value:void 0}}hasElementOrSubtree(e){return this._findSuperstrOrElement(e,!0)!==void 0}forEach(e){for(let[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){let t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}_isBalanced(){let e=t=>{if(!t)return!0;let n=t.balanceFactor();return n<-1||n>1?!1:e(t.left)&&e(t.right)};return e(this._root)}};var Qt=A("environmentService"),jJ=Qt;var Un=A("contextService");function jd(r){let e=r;return typeof e?.id=="string"&&W.isUri(e.uri)}var a4={id:"ext-dev"},l4={id:"empty-window"};function Ev(r,e){if(typeof r=="string"||typeof r>"u")return typeof r=="string"?{id:fl(r)}:e?a4:l4;let t=r;return t.configuration?{id:t.id,configPath:t.configuration}:t.folders.length===1?{id:t.id,uri:t.folders[0].uri}:{id:t.id}}function wv(r){let e=r;return typeof e?.id=="string"&&W.isUri(e.configPath)}var WA="code-workspace",d4=`.${WA}`,lZ=[{name:c("codeWorkspace","Code Workspace"),extensions:[WA]}];function c4(r,e){return uA.isEqualOrParent(r,e.untitledWorkspacesHome)}function Nm(r){let e;return W.isUri(r)?e=r:e=r.configuration,e?.scheme===le.tmp}function oC(r,e){return!c4(r,e)&&!Nm(r)}function zA(r){return(typeof r=="string"?Md(r):Zb(r))===d4}var ke=A("configurationService");function HA(r){return r.replace(/[\[\]]/g,"")}var As={JSONContribution:"base.contributions.json"};function u4(r){return r.length>0&&r.charAt(r.length-1)==="#"?r.substring(0,r.length-1):r}var sC=class{schemasById;_onDidChangeSchema=new x;onDidChangeSchema=this._onDidChangeSchema.event;constructor(){this.schemasById={}}registerSchema(e,t){this.schemasById[u4(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}getSchemaContributions(){return{schemas:this.schemasById}}getSchemaContent(e){let t=this.schemasById[e];return t?JP(t):void 0}hasSchemaContent(e){return!!this.schemasById[e]}},p4=new sC;Ce.add(As.JSONContribution,p4);var _Z=A("policy");var Sr={Configuration:"base.contributions.configuration"};var Bm={properties:{},patternProperties:{}},Cv={properties:{},patternProperties:{}},kv={properties:{},patternProperties:{}},Dv={properties:{},patternProperties:{}},_v={properties:{},patternProperties:{}},Fm={properties:{},patternProperties:{}},Yd="vscode://schemas/settings/resourceLanguage";var Rv=Ce.as(As.JSONContribution),aC=class{registeredConfigurationDefaults=[];configurationDefaultsOverrides;defaultLanguageConfigurationOverridesNode;configurationContributors;configurationProperties;policyConfigurations;excludedConfigurationProperties;resourceLanguageSettingsSchema;overrideIdentifiers=new Set;_onDidSchemaChange=new x;onDidSchemaChange=this._onDidSchemaChange.event;_onDidUpdateConfiguration=new x;onDidUpdateConfiguration=this._onDidUpdateConfiguration.event;constructor(){this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:c("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},Rv.registerSchema(Yd,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){let n=new Set;this.doRegisterConfigurations(e,t,n),Rv.registerSchema(Yd,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}deregisterConfigurations(e){let t=new Set;this.doDeregisterConfigurations(e,t),Rv.registerSchema(Yd,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t})}updateConfigurations({add:e,remove:t}){let n=new Set;this.doDeregisterConfigurations(t,n),this.doRegisterConfigurations(e,!1,n),Rv.registerSchema(Yd,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){let t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){this.registeredConfigurationDefaults.push(...e);let n=[];for(let{overrides:i,source:o}of e)for(let s in i){t.add(s);let a=this.configurationDefaultsOverrides.get(s)??this.configurationDefaultsOverrides.set(s,{configurationDefaultOverrides:[]}).get(s),l=i[s];if(a.configurationDefaultOverrides.push({value:l,source:o}),Lu.test(s)){let d=this.mergeDefaultConfigurationsForOverrideIdentifier(s,l,o,a.configurationDefaultOverrideValue);if(!d)continue;a.configurationDefaultOverrideValue=d,this.updateDefaultOverrideProperty(s,d,o),n.push(...h4(s))}else{let d=this.mergeDefaultConfigurationsForConfigurationProperty(s,l,o,a.configurationDefaultOverrideValue);if(!d)continue;a.configurationDefaultOverrideValue=d;let u=this.configurationProperties[s];u&&(this.updatePropertyDefaultValue(s,u),this.updateSchema(s,u))}}this.doRegisterOverrideIdentifiers(n)}deregisterDefaultConfigurations(e){let t=new Set;this.doDeregisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doDeregisterDefaultConfigurations(e,t){for(let n of e){let i=this.registeredConfigurationDefaults.indexOf(n);i!==-1&&this.registeredConfigurationDefaults.splice(i,1)}for(let{overrides:n,source:i}of e)for(let o in n){let s=this.configurationDefaultsOverrides.get(o);if(!s)continue;let a=s.configurationDefaultOverrides.findIndex(l=>i?l.source?.id===i.id:l.value===n[o]);if(a!==-1){if(s.configurationDefaultOverrides.splice(a,1),s.configurationDefaultOverrides.length===0&&this.configurationDefaultsOverrides.delete(o),Lu.test(o)){let l;for(let d of s.configurationDefaultOverrides)l=this.mergeDefaultConfigurationsForOverrideIdentifier(o,d.value,d.source,l);l&&!Bd(l.value)?(s.configurationDefaultOverrideValue=l,this.updateDefaultOverrideProperty(o,l,i)):(this.configurationDefaultsOverrides.delete(o),delete this.configurationProperties[o],delete this.defaultLanguageConfigurationOverridesNode.properties[o])}else{let l;for(let u of s.configurationDefaultOverrides)l=this.mergeDefaultConfigurationsForConfigurationProperty(o,u.value,u.source,l);s.configurationDefaultOverrideValue=l;let d=this.configurationProperties[o];d&&(this.updatePropertyDefaultValue(o,d),this.updateSchema(o,d))}t.add(o)}}this.updateOverridePropertyPatternKey()}updateDefaultOverrideProperty(e,t,n){let i={type:"object",default:t.value,description:c("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",HA(e)),$ref:Yd,defaultDefaultValue:t.value,source:n,defaultValueSource:n};this.configurationProperties[e]=i,this.defaultLanguageConfigurationOverridesNode.properties[e]=i}mergeDefaultConfigurationsForOverrideIdentifier(e,t,n,i){let o=i?.value||{},s=i?.source??new Map;if(!(s instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(let a of Object.keys(t)){let l=t[a];if(fn(l)&&(jn(o[a])||fn(o[a]))){if(o[a]={...o[a]??{},...l},n)for(let u in l)s.set(`${a}.${u}`,n)}else o[a]=l,n?s.set(a,n):s.delete(a)}return{value:o,source:s}}mergeDefaultConfigurationsForConfigurationProperty(e,t,n,i){let o=this.configurationProperties[e],s=i?.value??o?.defaultDefaultValue,a=n;if(fn(t)&&(o!==void 0&&o.type==="object"||o===void 0&&(jn(s)||fn(s)))){if(a=i?.source??new Map,!(a instanceof Map)){console.error("defaultValueSource is not a Map");return}for(let d in t)n&&a.set(`${e}.${d}`,n);t={...fn(s)?s:{},...t}}return{value:t,source:a}}deltaConfiguration(e){let t=!1,n=new Set;e.removedDefaults&&(this.doDeregisterDefaultConfigurations(e.removedDefaults,n),t=!0),e.addedDefaults&&(this.doRegisterDefaultConfigurations(e.addedDefaults,n),t=!0),e.removedConfigurations&&this.doDeregisterConfigurations(e.removedConfigurations,n),e.addedConfigurations&&this.doRegisterConfigurations(e.addedConfigurations,!1,n),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this._onDidSchemaChange.fire()}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(let t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,n){e.forEach(i=>{this.validateAndRegisterProperties(i,t,i.extensionInfo,i.restrictedProperties,void 0,n),this.configurationContributors.push(i),this.registerJSONConfiguration(i)})}doDeregisterConfigurations(e,t){let n=i=>{if(i.properties)for(let o in i.properties){t.add(o);let s=this.configurationProperties[o];s?.policy?.name&&this.policyConfigurations.delete(s.policy.name),delete this.configurationProperties[o],this.removeFromSchema(o,i.properties[o])}i.allOf?.forEach(o=>n(o))};for(let i of e){n(i);let o=this.configurationContributors.indexOf(i);o!==-1&&this.configurationContributors.splice(o,1)}}validateAndRegisterProperties(e,t=!0,n,i,o=3,s){o=zt(e.scope)?o:e.scope;let a=e.properties;if(a)for(let d in a){let u=a[d];if(t&&g4(d,u)){delete a[d];continue}if(u.source=n,u.defaultDefaultValue=a[d].default,this.updatePropertyDefaultValue(d,u),Lu.test(d)?u.scope=void 0:(u.scope=zt(u.scope)?o:u.scope,u.restricted=zt(u.restricted)?!!i?.includes(d):u.restricted),a[d].hasOwnProperty("included")&&!a[d].included){this.excludedConfigurationProperties[d]=a[d],delete a[d];continue}else this.configurationProperties[d]=a[d],a[d].policy?.name&&this.policyConfigurations.set(a[d].policy.name,d);!a[d].deprecationMessage&&a[d].markdownDeprecationMessage&&(a[d].deprecationMessage=a[d].markdownDeprecationMessage),s.add(d)}let l=e.allOf;if(l)for(let d of l)this.validateAndRegisterProperties(d,t,n,i,o,s)}getConfigurations(){return this.configurationContributors}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}getExcludedConfigurationProperties(){return this.excludedConfigurationProperties}getRegisteredDefaultConfigurations(){return[...this.registeredConfigurationDefaults]}getConfigurationDefaultsOverrides(){let e=new Map;for(let[t,n]of this.configurationDefaultsOverrides)n.configurationDefaultOverrideValue&&e.set(t,n.configurationDefaultOverrideValue);return e}registerJSONConfiguration(e){let t=n=>{let i=n.properties;if(i)for(let s in i)this.updateSchema(s,i[s]);n.allOf?.forEach(t)};t(e)}updateSchema(e,t){switch(Bm.properties[e]=t,t.scope){case 1:Cv.properties[e]=t;break;case 2:kv.properties[e]=t;break;case 6:Dv.properties[e]=t;break;case 3:_v.properties[e]=t;break;case 4:Fm.properties[e]=t;break;case 5:Fm.properties[e]=t,this.resourceLanguageSettingsSchema.properties[e]=t;break}}removeFromSchema(e,t){switch(delete Bm.properties[e],t.scope){case 1:delete Cv.properties[e];break;case 2:delete kv.properties[e];break;case 6:delete Dv.properties[e];break;case 3:delete _v.properties[e];break;case 4:case 5:delete Fm.properties[e],delete this.resourceLanguageSettingsSchema.properties[e];break}}updateOverridePropertyPatternKey(){for(let e of this.overrideIdentifiers.values()){let t=`[${e}]`,n={type:"object",description:c("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:c("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:Yd};this.updatePropertyDefaultValue(t,n),Bm.properties[t]=n,Cv.properties[t]=n,kv.properties[t]=n,Dv.properties[t]=n,_v.properties[t]=n,Fm.properties[t]=n}}registerOverridePropertyPatternKey(){let e={type:"object",description:c("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:c("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:Yd};Bm.patternProperties[Xd]=e,Cv.patternProperties[Xd]=e,kv.patternProperties[Xd]=e,Dv.patternProperties[Xd]=e,_v.patternProperties[Xd]=e,Fm.patternProperties[Xd]=e,this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){let n=this.configurationDefaultsOverrides.get(e)?.configurationDefaultOverrideValue,i,o;n&&(!t.disallowConfigurationDefault||!n.source)&&(i=n.value,o=n.source),jn(i)&&(i=t.defaultDefaultValue,o=void 0),jn(i)&&(i=m4(t.type)),t.default=i,t.defaultValueSource=o}},GA="\\[([^\\]]+)\\]",KA=new RegExp(GA,"g"),Xd=`^(${GA})+$`,Lu=new RegExp(Xd);function h4(r){let e=[];if(Lu.test(r)){let t=KA.exec(r);for(;t?.length;){let n=t[1].trim();n&&e.push(n),t=KA.exec(r)}}return di(e)}function m4(r){switch(Array.isArray(r)?r[0]:r){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}var Lv=new aC;Ce.add(Sr.Configuration,Lv);function g4(r,e){return r.trim()?Lu.test(r)?c("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",r):Lv.getConfigurationProperties()[r]!==void 0?c("config.property.duplicate","Cannot register '{0}'. This property is already registered.",r):e.policy?.name&&Lv.getPolicyConfigurations().get(e.policy?.name)!==void 0?c("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",r,e.policy?.name,Lv.getPolicyConfigurations().get(e.policy?.name)):null:c("config.property.empty","Cannot register an empty property")}var b4=8,Pv=class{_values;constructor(e){this._values=e}hasChanged(e){return this._values[e]}},Um=class{stableMinimapLayoutInput;stableFitMaxMinimapScale;stableFitRemainingWidth;constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},At=class{id;name;defaultValue;schema;constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return Av(e,t)}compute(e,t,n){return n}},Au=class{constructor(e,t){this.newValue=e;this.didChange=t}};function Av(r,e){if(typeof r!="object"||typeof e!="object"||!r||!e)return new Au(e,r!==e);if(Array.isArray(r)||Array.isArray(e)){let n=Array.isArray(r)&&Array.isArray(e)&&ln(r,e);return new Au(e,!n)}let t=!1;for(let n in e)if(e.hasOwnProperty(n)){let i=Av(r[n],e[n]);i.didChange&&(r[n]=i.newValue,t=!0)}return new Au(r,t)}var Jd=class{id;name;defaultValue;schema=void 0;constructor(e){this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return Av(e,t)}validate(e){return this.defaultValue}},Al=class{id;name;defaultValue;schema;constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return Av(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}};function Ee(r,e){return typeof r>"u"?e:r==="false"?!1:!!r}var tt=class extends Al{constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="boolean",i.default=n),super(e,t,n,i)}validate(e){return Ee(e,this.defaultValue)}};function v4(r,e,t,n){if(typeof r>"u")return e;let i=parseInt(r,10);return isNaN(i)?e:(i=Math.max(t,i),i=Math.min(n,i),i|0)}var Lt=class r extends Al{static clampedInt(e,t,n,i){return v4(e,t,n,i)}minimum;maximum;constructor(e,t,n,i,o,s=void 0){typeof s<"u"&&(s.type="integer",s.default=n,s.minimum=i,s.maximum=o),super(e,t,n,s),this.minimum=i,this.maximum=o}validate(e){return r.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}};var wo=class r extends Al{static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;let n=parseFloat(e);return isNaN(n)?t:n}validationFn;constructor(e,t,n,i,o){typeof o<"u"&&(o.type="number",o.default=n),super(e,t,n,o),this.validationFn=i}validate(e){return this.validationFn(r.float(e,this.defaultValue))}},ki=class r extends Al{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="string",i.default=n),super(e,t,n,i)}validate(e){return r.string(e,this.defaultValue)}};function nn(r,e,t,n){return typeof r!="string"?e:n&&r in n?n[r]:t.indexOf(r)===-1?e:r}var Ht=class extends Al{_allowedValues;constructor(e,t,n,i,o=void 0){typeof o<"u"&&(o.type="string",o.enum=i,o.default=n),super(e,t,n,o),this._allowedValues=i}validate(e){return nn(e,this.defaultValue,this._allowedValues)}},Pu=class extends At{_allowedValues;_convert;constructor(e,t,n,i,o,s,a=void 0){typeof a<"u"&&(a.type="string",a.enum=o,a.default=i),super(e,t,n,a),this._allowedValues=o,this._convert=s}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}};function y4(r){switch(r){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}var lC=class extends At{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[c("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),c("accessibilitySupport.on","Optimize for usage with a Screen Reader."),c("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:c("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}},dC=class extends At{constructor(){let e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:c("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:c("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{insertSpace:Ee(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Ee(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}};function I4(r){switch(r){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}function S4(r){switch(r){case"line":return 1;case"block":return 2;case"underline":return 3;case"line-thin":return 4;case"block-outline":return 5;case"underline-thin":return 6}}var cC=class extends Jd{constructor(){super(144)}compute(e,t,n){let i=["monaco-editor"];return t.get(40)&&i.push(t.get(40)),e.extraEditorClassName&&i.push(e.extraEditorClassName),t.get(75)==="default"?i.push("mouse-default"):t.get(75)==="copy"&&i.push("mouse-copy"),t.get(113)&&i.push("showUnused"),t.get(142)&&i.push("showDeprecated"),i.join(" ")}},uC=class extends tt{constructor(){super(38,"emptySelectionClipboard",!0,{description:c("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}},pC=class extends At{constructor(){let e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(42,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:c("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[c("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),c("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),c("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:c("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[c("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),c("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),c("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:c("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:c("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:ze},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:c("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:c("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{cursorMoveOnType:Ee(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":nn(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":nn(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Ee(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Ee(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Ee(t.loop,this.defaultValue.loop)}}},Vm=class r extends At{static OFF='"liga" off, "calt" off';static ON='"liga" on, "calt" on';constructor(){super(52,"fontLigatures",r.OFF,{anyOf:[{type:"boolean",description:c("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:c("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:c("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"||e.length===0?r.OFF:e==="true"?r.ON:e:e?r.ON:r.OFF}},Du=class r extends At{static OFF="normal";static TRANSLATE="translate";constructor(){super(55,"fontVariations",r.OFF,{anyOf:[{type:"boolean",description:c("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:c("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:c("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?r.OFF:e==="true"?r.TRANSLATE:e:e?r.TRANSLATE:r.OFF}compute(e,t,n){return e.fontInfo.fontVariationSettings}},hC=class extends Jd{constructor(){super(51)}compute(e,t,n){return e.fontInfo}},mC=class extends Al{constructor(){super(53,"fontSize",jo.fontSize,{type:"number",minimum:6,maximum:100,default:jo.fontSize,description:c("fontSize","Controls the font size in pixels.")})}validate(e){let t=wo.float(e,this.defaultValue);return t===0?jo.fontSize:wo.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}},gC=class r extends At{static SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];static MINIMUM_VALUE=1;static MAXIMUM_VALUE=1e3;constructor(){super(54,"fontWeight",jo.fontWeight,{anyOf:[{type:"number",minimum:r.MINIMUM_VALUE,maximum:r.MAXIMUM_VALUE,errorMessage:c("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:r.SUGGESTION_VALUES}],default:jo.fontWeight,description:c("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(Lt.clampedInt(e,jo.fontWeight,r.MINIMUM_VALUE,r.MAXIMUM_VALUE))}},fC=class extends At{constructor(){let e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[c("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),c("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),c("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(59,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:c("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:c("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:c("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:c("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:c("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:c("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:c("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:c("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:c("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:c("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:c("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{multiple:nn(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??nn(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??nn(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??nn(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??nn(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??nn(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??nn(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:ki.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:ki.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:ki.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:ki.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:ki.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:ki.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}},bC=class extends At{constructor(){let e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(61,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:c("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:c("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:c("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:c("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:c("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Ee(t.enabled,this.defaultValue.enabled),delay:Lt.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Ee(t.sticky,this.defaultValue.sticky),hidingDelay:Lt.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:Ee(t.above,this.defaultValue.above)}}};var vC=class r extends Jd{constructor(){super(147)}compute(e,t,n){return r.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){let t=e.height/e.lineHeight,n=Math.floor(e.paddingTop/e.lineHeight),i=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(i=Math.max(i,t-1));let o=(n+e.viewLineCount+i)/(e.pixelRatio*e.height),s=Math.floor(e.viewLineCount/o);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:n,extraLinesBeyondLastLine:i,desiredRatio:o,minimapLineCount:s}}static _computeMinimapLayout(e,t){let n=e.outerWidth,i=e.outerHeight,o=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(o*i),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:i};let s=t.stableMinimapLayoutInput,a=s&&e.outerHeight===s.outerHeight&&e.lineHeight===s.lineHeight&&e.typicalHalfwidthCharacterWidth===s.typicalHalfwidthCharacterWidth&&e.pixelRatio===s.pixelRatio&&e.scrollBeyondLastLine===s.scrollBeyondLastLine&&e.paddingTop===s.paddingTop&&e.paddingBottom===s.paddingBottom&&e.minimap.enabled===s.minimap.enabled&&e.minimap.side===s.minimap.side&&e.minimap.size===s.minimap.size&&e.minimap.showSlider===s.minimap.showSlider&&e.minimap.renderCharacters===s.minimap.renderCharacters&&e.minimap.maxColumn===s.minimap.maxColumn&&e.minimap.scale===s.minimap.scale&&e.verticalScrollbarWidth===s.verticalScrollbarWidth&&e.isViewportWrapping===s.isViewportWrapping,l=e.lineHeight,d=e.typicalHalfwidthCharacterWidth,u=e.scrollBeyondLastLine,p=e.minimap.renderCharacters,h=o>=2?Math.round(e.minimap.scale*2):e.minimap.scale,m=e.minimap.maxColumn,f=e.minimap.size,g=e.minimap.side,y=e.verticalScrollbarWidth,T=e.viewLineCount,E=e.remainingWidth,D=e.isViewportWrapping,_=p?2:3,O=Math.floor(o*i),G=O/o,Z=!1,M=!1,H=_*h,oe=h/o,ee=1;if(f==="fill"||f==="fit"){let{typicalViewportLineCount:ve,extraLinesBeforeFirstLine:Te,extraLinesBeyondLastLine:Qe,desiredRatio:He,minimapLineCount:St}=r.computeContainedMinimapLineCount({viewLineCount:T,scrollBeyondLastLine:u,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:i,lineHeight:l,pixelRatio:o});if(T/St>1)Z=!0,M=!0,h=1,H=1,oe=h/o;else{let Re=!1,Gn=h+1;if(f==="fit"){let xn=Math.ceil((Te+T+Qe)*H);D&&a&&E<=t.stableFitRemainingWidth?(Re=!0,Gn=t.stableFitMaxMinimapScale):Re=xn>O}if(f==="fill"||Re){Z=!0;let xn=h;H=Math.min(l*o,Math.max(1,Math.floor(1/He))),D&&a&&E<=t.stableFitRemainingWidth&&(Gn=t.stableFitMaxMinimapScale),h=Math.min(Gn,Math.max(1,Math.floor(H/_))),h>xn&&(ee=Math.min(2,h/xn)),oe=h/o/ee,O=Math.ceil(Math.max(ve,Te+T+Qe)*H),D?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=E,t.stableFitMaxMinimapScale=h):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}let re=Math.floor(m*oe),Fe=Math.min(re,Math.max(0,Math.floor((E-y-2)*oe/(d+oe)))+b4),st=Math.floor(o*Fe),be=st/o;st=Math.floor(st*ee);let ae=p?1:2,fe=g==="left"?0:n-Fe-y;return{renderMinimap:ae,minimapLeft:fe,minimapWidth:Fe,minimapHeightIsEditorHeight:Z,minimapIsSampling:M,minimapScale:h,minimapLineHeight:H,minimapCanvasInnerWidth:st,minimapCanvasInnerHeight:O,minimapCanvasOuterWidth:be,minimapCanvasOuterHeight:G}}static computeLayout(e,t){let n=t.outerWidth|0,i=t.outerHeight|0,o=t.lineHeight|0,s=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,d=t.pixelRatio,u=t.viewLineCount,p=e.get(139),h=p==="inherit"?e.get(138):p,m=h==="inherit"?e.get(134):h,f=e.get(137),g=t.isDominatedByLongLines,y=e.get(58),T=e.get(69).renderType!==0,E=e.get(70),D=e.get(107),_=e.get(85),O=e.get(74),G=e.get(105),Z=G.verticalScrollbarSize,M=G.verticalHasArrows,H=G.arrowSize,oe=G.horizontalScrollbarSize,ee=e.get(44),re=e.get(112)!=="never",Fe=e.get(67);ee&&re&&(Fe+=16);let st=0;if(T){let dr=Math.max(s,E);st=Math.round(dr*l)}let be=0;y&&(be=o*t.glyphMarginDecorationLaneCount);let ae=0,fe=ae+be,ve=fe+st,Te=ve+Fe,Qe=n-be-st-Fe,He=!1,St=!1,nt=-1;h==="inherit"&&g?(He=!0,St=!0):m==="on"||m==="bounded"?St=!0:m==="wordWrapColumn"&&(nt=f);let Re=r._computeMinimapLayout({outerWidth:n,outerHeight:i,lineHeight:o,typicalHalfwidthCharacterWidth:a,pixelRatio:d,scrollBeyondLastLine:D,paddingTop:_.top,paddingBottom:_.bottom,minimap:O,verticalScrollbarWidth:Z,viewLineCount:u,remainingWidth:Qe,isViewportWrapping:St},t.memory||new Um);Re.renderMinimap!==0&&Re.minimapLeft===0&&(ae+=Re.minimapWidth,fe+=Re.minimapWidth,ve+=Re.minimapWidth,Te+=Re.minimapWidth);let Gn=Qe-Re.minimapWidth,xn=Math.max(1,Math.floor((Gn-Z-2)/a)),Li=M?H:0;return St&&(nt=Math.max(1,xn),m==="bounded"&&(nt=Math.min(nt,f))),{width:n,height:i,glyphMarginLeft:ae,glyphMarginWidth:be,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:fe,lineNumbersWidth:st,decorationsLeft:ve,decorationsWidth:Fe,contentLeft:Te,contentWidth:Gn,minimap:Re,viewportColumn:xn,isWordWrapMinified:He,isViewportWrapping:St,wrappingColumn:nt,verticalScrollbarWidth:Z,horizontalScrollbarHeight:oe,overviewRuler:{top:Li,width:Z,height:i-2*Li,right:0}}}},yC=class extends At{constructor(){super(141,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[c("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),c("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:c("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return nn(e,"simple",["simple","advanced"])}compute(e,t,n){return t.get(2)===2?"advanced":n}};var IC=class extends At{constructor(){let e={enabled:"onCode"};super(66,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:["off","onCode","on"],default:e.enabled,enumDescriptions:[c("editor.lightbulb.enabled.off","Disable the code action menu."),c("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),c("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:c("enabled","Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:nn(e.enabled,this.defaultValue.enabled,["off","onCode","on"])}}},SC=class extends At{constructor(){let e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(117,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:c("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:c("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:c("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:c("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Ee(t.enabled,this.defaultValue.enabled),maxLineCount:Lt.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:nn(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:Ee(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}},xC=class extends At{constructor(){let e={enabled:"on",fontSize:0,fontFamily:"",padding:!1,maximumLength:43};super(143,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:c("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[c("editor.inlayHints.on","Inlay hints are enabled"),c("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",ze?"Ctrl+Option":"Ctrl+Alt"),c("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",ze?"Ctrl+Option":"Ctrl+Alt"),c("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:c("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:c("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:c("inlayHints.padding","Enables the padding around the inlay hints in the editor.")},"editor.inlayHints.maximumLength":{type:"number",default:e.maximumLength,markdownDescription:c("inlayHints.maximumLength","Maximum overall length of inlay hints, for a single line, before they get truncated by the editor. Set to `0` to never truncate")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:nn(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Lt.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:ki.string(t.fontFamily,this.defaultValue.fontFamily),padding:Ee(t.padding,this.defaultValue.padding),maximumLength:Lt.clampedInt(t.maximumLength,this.defaultValue.maximumLength,0,Number.MAX_SAFE_INTEGER)}}},TC=class extends At{constructor(){super(67,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):Lt.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,n){return n<0?Lt.clampedInt(-n*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):n}},EC=class extends wo{constructor(){super(68,"lineHeight",jo.lineHeight,e=>wo.clamp(e,0,150),{markdownDescription:c("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}},wC=class extends At{constructor(){let e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(74,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:c("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:c("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[c("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),c("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),c("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:c("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:c("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:c("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:c("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:c("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:c("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:c("minimap.showRegionSectionHeaders","Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:c("minimap.showMarkSectionHeaders","Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:c("minimap.sectionHeaderFontSize","Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:c("minimap.sectionHeaderLetterSpacing","Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Ee(t.enabled,this.defaultValue.enabled),autohide:Ee(t.autohide,this.defaultValue.autohide),size:nn(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:nn(t.side,this.defaultValue.side,["right","left"]),showSlider:nn(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Ee(t.renderCharacters,this.defaultValue.renderCharacters),scale:Lt.clampedInt(t.scale,1,1,3),maxColumn:Lt.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:Ee(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:Ee(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:wo.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:wo.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}};function x4(r){return r==="ctrlCmd"?ze?"metaKey":"ctrlKey":"altKey"}var CC=class extends At{constructor(){super(85,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:c("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:c("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{top:Lt.clampedInt(t.top,0,0,1e3),bottom:Lt.clampedInt(t.bottom,0,0,1e3)}}},kC=class extends At{constructor(){let e={enabled:!0,cycle:!0};super(87,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:c("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:c("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Ee(t.enabled,this.defaultValue.enabled),cycle:Ee(t.cycle,this.defaultValue.cycle)}}},DC=class extends Jd{constructor(){super(145)}compute(e,t,n){return e.pixelRatio}},_C=class extends At{constructor(){super(89,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}},RC=class extends At{defaultValue;constructor(){let e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[c("on","Quick suggestions show inside the suggest widget"),c("inline","Quick suggestions show as ghost text"),c("off","Quick suggestions are disabled")]}];super(91,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:c("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:c("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:c("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:c("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){let d=e?"on":"off";return{comments:d,strings:d,other:d}}if(!e||typeof e!="object")return this.defaultValue;let{other:t,comments:n,strings:i}=e,o=["on","inline","off"],s,a,l;return typeof t=="boolean"?s=t?"on":"off":s=nn(t,this.defaultValue.other,o),typeof n=="boolean"?a=n?"on":"off":a=nn(n,this.defaultValue.comments,o),typeof i=="boolean"?l=i?"on":"off":l=nn(i,this.defaultValue.strings,o),{other:s,comments:a,strings:l}}};var LC=class extends At{constructor(){super(69,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[c("lineNumbers.off","Line numbers are not rendered."),c("lineNumbers.on","Line numbers are rendered as absolute number."),c("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),c("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:c("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}};var PC=class extends At{constructor(){let e=[],t={type:"number",description:c("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(104,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:c("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:c("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){let t=[];for(let n of e)if(typeof n=="number")t.push({column:Lt.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){let i=n;t.push({column:Lt.clampedInt(i.column,0,0,1e4),color:i.color})}return t.sort((n,i)=>n.column-i.column),t}return this.defaultValue}},AC=class extends At{constructor(){super(94,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}};function qA(r,e){if(typeof r!="string")return e;switch(r){case"hidden":return 2;case"visible":return 3;default:return 1}}var OC=class extends At{constructor(){let e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(105,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[c("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),c("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),c("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:c("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[c("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),c("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),c("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:c("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:c("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:c("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:c("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:c("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e,n=Lt.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),i=Lt.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Lt.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:qA(t.vertical,this.defaultValue.vertical),horizontal:qA(t.horizontal,this.defaultValue.horizontal),useShadows:Ee(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Ee(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Ee(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Ee(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Ee(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:Lt.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:i,verticalSliderSize:Lt.clampedInt(t.verticalSliderSize,i,0,1e3),scrollByPage:Ee(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:Ee(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}},Yo="inUntrustedWorkspace",Qd={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"},MC=class extends At{constructor(){let e={nonBasicASCII:Yo,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Yo,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(127,"unicodeHighlight",e,{[Qd.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Yo],default:e.nonBasicASCII,description:c("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[Qd.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:c("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[Qd.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:c("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[Qd.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Yo],default:e.includeComments,description:c("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[Qd.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Yo],default:e.includeStrings,description:c("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[Qd.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:c("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[Qd.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:c("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&e&&(ii(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},n=!0)),t.allowedLocales&&e&&(ii(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},n=!0));let i=super.applyUpdate(e,t);return n?new Au(i.newValue,!0):i}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{nonBasicASCII:Ou(t.nonBasicASCII,Yo,[!0,!1,Yo]),invisibleCharacters:Ee(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:Ee(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Ou(t.includeComments,Yo,[!0,!1,Yo]),includeStrings:Ou(t.includeStrings,Yo,[!0,!1,Yo]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;let n={};for(let[i,o]of Object.entries(e))o===!0&&(n[i]=!0);return n}},NC=class extends At{constructor(){let e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default",syntaxHighlightingEnabled:!1};super(63,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:c("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[c("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),c("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),c("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:c("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.syntaxHighlightingEnabled":{type:"boolean",default:e.syntaxHighlightingEnabled,description:c("inlineSuggest.syntaxHighlightingEnabled","Controls whether to show syntax highlighting for inline suggestions in the editor.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:c("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:c("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Ee(t.enabled,this.defaultValue.enabled),mode:nn(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:nn(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:Ee(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:Ee(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:ki.string(t.fontFamily,this.defaultValue.fontFamily),syntaxHighlightingEnabled:Ee(t.syntaxHighlightingEnabled,this.defaultValue.syntaxHighlightingEnabled)}}},FC=class extends At{constructor(){let e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};super(64,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:c("inlineEdit.enabled","Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[c("inlineEdit.showToolbar.always","Show the inline edit toolbar whenever an inline suggestion is shown."),c("inlineEdit.showToolbar.onHover","Show the inline edit toolbar when hovering over an inline suggestion."),c("inlineEdit.showToolbar.never","Never show the inline edit toolbar.")],description:c("inlineEdit.showToolbar","Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:c("inlineEdit.fontFamily","Controls the font family of the inline edit.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Ee(t.enabled,this.defaultValue.enabled),showToolbar:nn(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:ki.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:Ee(t.keepOnBlur,this.defaultValue.keepOnBlur)}}},BC=class extends At{constructor(){let e={enabled:Ls.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Ls.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:c("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:c("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Ee(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:Ee(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}},UC=class extends At{constructor(){let e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[c("editor.guides.bracketPairs.true","Enables bracket pair guides."),c("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),c("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:c("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[c("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),c("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),c("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:c("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:c("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:c("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[c("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),c("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),c("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:c("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{bracketPairs:Ou(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Ou(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Ee(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Ee(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Ou(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}};function Ou(r,e,t){let n=t.indexOf(r);return n===-1?e:t[n]}var VC=class extends At{constructor(){let e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(120,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[c("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),c("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:c("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:c("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:c("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:c("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[c("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),c("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),c("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),c("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:c("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:c("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:c("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:c("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:c("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:c("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:c("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:c("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:c("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{insertMode:nn(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Ee(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Ee(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Ee(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Ee(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:nn(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:Ee(t.showIcons,this.defaultValue.showIcons),showStatusBar:Ee(t.showStatusBar,this.defaultValue.showStatusBar),preview:Ee(t.preview,this.defaultValue.preview),previewMode:nn(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Ee(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Ee(t.showMethods,this.defaultValue.showMethods),showFunctions:Ee(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Ee(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Ee(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:Ee(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:Ee(t.showFields,this.defaultValue.showFields),showVariables:Ee(t.showVariables,this.defaultValue.showVariables),showClasses:Ee(t.showClasses,this.defaultValue.showClasses),showStructs:Ee(t.showStructs,this.defaultValue.showStructs),showInterfaces:Ee(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Ee(t.showModules,this.defaultValue.showModules),showProperties:Ee(t.showProperties,this.defaultValue.showProperties),showEvents:Ee(t.showEvents,this.defaultValue.showEvents),showOperators:Ee(t.showOperators,this.defaultValue.showOperators),showUnits:Ee(t.showUnits,this.defaultValue.showUnits),showValues:Ee(t.showValues,this.defaultValue.showValues),showConstants:Ee(t.showConstants,this.defaultValue.showConstants),showEnums:Ee(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Ee(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Ee(t.showKeywords,this.defaultValue.showKeywords),showWords:Ee(t.showWords,this.defaultValue.showWords),showColors:Ee(t.showColors,this.defaultValue.showColors),showFiles:Ee(t.showFiles,this.defaultValue.showFiles),showReferences:Ee(t.showReferences,this.defaultValue.showReferences),showFolders:Ee(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Ee(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Ee(t.showSnippets,this.defaultValue.showSnippets),showUsers:Ee(t.showUsers,this.defaultValue.showUsers),showIssues:Ee(t.showIssues,this.defaultValue.showIssues)}}},WC=class extends At{constructor(){super(115,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:c("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:c("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Ee(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:Ee(e.selectSubwords,this.defaultValue.selectSubwords)}}},zC=class extends At{constructor(){let e=[];super(132,"wordSegmenterLocales",e,{anyOf:[{description:c("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:c("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){let t=[];for(let n of e)if(typeof n=="string")try{Intl.Segmenter.supportedLocalesOf(n).length>0&&t.push(n)}catch{}return t}return this.defaultValue}};var HC=class extends At{constructor(){super(140,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[c("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),c("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),c("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),c("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:c("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,n){return t.get(2)===2?0:n}},KC=class extends Jd{constructor(){super(148)}compute(e,t,n){let i=t.get(147);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:i.isWordWrapMinified,isViewportWrapping:i.isViewportWrapping,wrappingColumn:i.wrappingColumn}}},GC=class extends At{constructor(){let e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:c("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:c("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[c("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),c("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Ee(t.enabled,this.defaultValue.enabled),showDropSelector:nn(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}},qC=class extends At{constructor(){let e={enabled:!0,showPasteSelector:"afterPaste"};super(86,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:c("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:c("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[c("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),c("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Ee(t.enabled,this.defaultValue.enabled),showPasteSelector:nn(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}},T4="Consolas, 'Courier New', monospace",E4="Menlo, Monaco, 'Courier New', monospace",w4="'Droid Sans Mono', 'monospace', monospace",jo={fontFamily:ze?E4:Wt?w4:T4,fontWeight:"normal",fontSize:ze?12:14,lineHeight:0,letterSpacing:0},Mu=[];function $(r){return Mu[r.id]=r,r}var Ll={acceptSuggestionOnCommitCharacter:$(new tt(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:c("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:$(new Ht(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",c("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:c("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:$(new lC),accessibilityPageSize:$(new Lt(3,"accessibilityPageSize",10,1,1073741824,{description:c("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:$(new ki(4,"ariaLabel",c("editorViewAccessibleLabel","Editor content"))),ariaRequired:$(new tt(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:$(new tt(8,"screenReaderAnnounceInlineSuggestion",!0,{description:c("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:$(new Ht(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",c("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),c("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:c("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:$(new Ht(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",c("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),c("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:c("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:$(new Ht(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",c("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:c("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:$(new Ht(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",c("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:c("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:$(new Ht(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",c("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),c("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:c("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:$(new Pu(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],y4,{enumDescriptions:[c("editor.autoIndent.none","The editor will not insert indentation automatically."),c("editor.autoIndent.keep","The editor will keep the current line's indentation."),c("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),c("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),c("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:c("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:$(new tt(13,"automaticLayout",!1)),autoSurround:$(new Ht(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[c("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),c("editor.autoSurround.quotes","Surround with quotes but not brackets."),c("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:c("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:$(new BC),bracketPairGuides:$(new UC),stickyTabStops:$(new tt(118,"stickyTabStops",!1,{description:c("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:$(new tt(17,"codeLens",!0,{description:c("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:$(new ki(18,"codeLensFontFamily","",{description:c("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:$(new Lt(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:c("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:$(new tt(20,"colorDecorators",!0,{description:c("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:$(new Ht(150,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[c("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),c("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),c("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:c("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:$(new Lt(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:c("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:$(new tt(22,"columnSelection",!1,{description:c("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:$(new dC),contextmenu:$(new tt(24,"contextmenu",!0)),copyWithSyntaxHighlighting:$(new tt(25,"copyWithSyntaxHighlighting",!0,{description:c("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:$(new Pu(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],I4,{description:c("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:$(new Ht(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[c("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),c("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),c("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:c("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:$(new Pu(28,"cursorStyle",1,"line",["line","block","underline","line-thin","block-outline","underline-thin"],S4,{description:c("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:$(new Lt(29,"cursorSurroundingLines",0,0,1073741824,{description:c("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:$(new Ht(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[c("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),c("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:c("cursorSurroundingLinesStyle","Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:$(new Lt(31,"cursorWidth",0,0,1073741824,{markdownDescription:c("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:$(new tt(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:$(new tt(33,"disableMonospaceOptimizations",!1)),domReadOnly:$(new tt(34,"domReadOnly",!1)),dragAndDrop:$(new tt(35,"dragAndDrop",!0,{description:c("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:$(new uC),dropIntoEditor:$(new GC),experimentalEditContextEnabled:$(new tt(37,"experimentalEditContextEnabled",!1,{description:c("experimentalEditContextEnabled","Sets whether the new experimental edit context should be used instead of the text area.")})),stickyScroll:$(new SC),experimentalWhitespaceRendering:$(new Ht(39,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[c("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),c("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),c("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:c("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:$(new ki(40,"extraEditorClassName","")),fastScrollSensitivity:$(new wo(41,"fastScrollSensitivity",5,r=>r<=0?5:r,{markdownDescription:c("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:$(new pC),fixedOverflowWidgets:$(new tt(43,"fixedOverflowWidgets",!1)),folding:$(new tt(44,"folding",!0,{description:c("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:$(new Ht(45,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[c("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),c("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:c("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:$(new tt(46,"foldingHighlight",!0,{description:c("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:$(new tt(47,"foldingImportsByDefault",!1,{description:c("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:$(new Lt(48,"foldingMaximumRegions",5e3,10,65e3,{description:c("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:$(new tt(49,"unfoldOnClickAfterEndOfLine",!1,{description:c("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:$(new ki(50,"fontFamily",jo.fontFamily,{description:c("fontFamily","Controls the font family.")})),fontInfo:$(new hC),fontLigatures2:$(new Vm),fontSize:$(new mC),fontWeight:$(new gC),fontVariations:$(new Du),formatOnPaste:$(new tt(56,"formatOnPaste",!1,{description:c("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:$(new tt(57,"formatOnType",!1,{description:c("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:$(new tt(58,"glyphMargin",!0,{description:c("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:$(new fC),hideCursorInOverviewRuler:$(new tt(60,"hideCursorInOverviewRuler",!1,{description:c("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:$(new bC),inDiffEditor:$(new tt(62,"inDiffEditor",!1)),letterSpacing:$(new wo(65,"letterSpacing",jo.letterSpacing,r=>wo.clamp(r,-5,20),{description:c("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:$(new IC),lineDecorationsWidth:$(new TC),lineHeight:$(new EC),lineNumbers:$(new LC),lineNumbersMinChars:$(new Lt(70,"lineNumbersMinChars",5,1,300)),linkedEditing:$(new tt(71,"linkedEditing",!1,{description:c("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:$(new tt(72,"links",!0,{description:c("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:$(new Ht(73,"matchBrackets","always",["always","near","never"],{description:c("matchBrackets","Highlight matching brackets.")})),minimap:$(new wC),mouseStyle:$(new Ht(75,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:$(new wo(76,"mouseWheelScrollSensitivity",1,r=>r===0?1:r,{markdownDescription:c("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:$(new tt(77,"mouseWheelZoom",!1,{markdownDescription:ze?c("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):c("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:$(new tt(78,"multiCursorMergeOverlapping",!0,{description:c("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:$(new Pu(79,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],x4,{markdownEnumDescriptions:[c("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),c("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:c({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:$(new Ht(80,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[c("multiCursorPaste.spread","Each cursor pastes a single line of the text."),c("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:c("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:$(new Lt(81,"multiCursorLimit",1e4,1,1e5,{markdownDescription:c("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:$(new Ht(82,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[c("occurrencesHighlight.off","Does not highlight occurrences."),c("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),c("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:c("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:$(new tt(83,"overviewRulerBorder",!0,{description:c("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:$(new Lt(84,"overviewRulerLanes",3,0,3)),padding:$(new CC),pasteAs:$(new qC),parameterHints:$(new kC),peekWidgetDefaultFocus:$(new Ht(88,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[c("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),c("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:c("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),placeholder:$(new _C),definitionLinkOpensInPeek:$(new tt(90,"definitionLinkOpensInPeek",!1,{description:c("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:$(new RC),quickSuggestionsDelay:$(new Lt(92,"quickSuggestionsDelay",10,0,1073741824,{description:c("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:$(new tt(93,"readOnly",!1)),readOnlyMessage:$(new AC),renameOnType:$(new tt(95,"renameOnType",!1,{description:c("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:c("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:$(new tt(96,"renderControlCharacters",!0,{description:c("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:$(new Ht(97,"renderFinalNewline",Wt?"dimmed":"on",["off","on","dimmed"],{description:c("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:$(new Ht(98,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",c("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:c("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:$(new tt(99,"renderLineHighlightOnlyWhenFocus",!1,{description:c("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:$(new Ht(100,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:$(new Ht(101,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",c("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),c("renderWhitespace.selection","Render whitespace characters only on selected text."),c("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:c("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:$(new Lt(102,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:$(new tt(103,"roundedSelection",!0,{description:c("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:$(new PC),scrollbar:$(new OC),scrollBeyondLastColumn:$(new Lt(106,"scrollBeyondLastColumn",4,0,1073741824,{description:c("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:$(new tt(107,"scrollBeyondLastLine",!0,{description:c("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:$(new tt(108,"scrollPredominantAxis",!0,{description:c("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:$(new tt(109,"selectionClipboard",!0,{description:c("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:Wt})),selectionHighlight:$(new tt(110,"selectionHighlight",!0,{description:c("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:$(new tt(111,"selectOnLineNumbers",!0)),showFoldingControls:$(new Ht(112,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[c("showFoldingControls.always","Always show the folding controls."),c("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),c("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:c("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:$(new tt(113,"showUnused",!0,{description:c("showUnused","Controls fading out of unused code.")})),showDeprecated:$(new tt(142,"showDeprecated",!0,{description:c("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:$(new xC),snippetSuggestions:$(new Ht(114,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[c("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),c("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),c("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),c("snippetSuggestions.none","Do not show snippet suggestions.")],description:c("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:$(new WC),smoothScrolling:$(new tt(116,"smoothScrolling",!1,{description:c("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:$(new Lt(119,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:$(new VC),inlineSuggest:$(new NC),inlineEdit:$(new FC),inlineCompletionsAccessibilityVerbose:$(new tt(151,"inlineCompletionsAccessibilityVerbose",!1,{description:c("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:$(new Lt(121,"suggestFontSize",0,0,1e3,{markdownDescription:c("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:$(new Lt(122,"suggestLineHeight",0,0,1e3,{markdownDescription:c("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:$(new tt(123,"suggestOnTriggerCharacters",!0,{description:c("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:$(new Ht(124,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[c("suggestSelection.first","Always select the first suggestion."),c("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),c("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:c("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:$(new Ht(125,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[c("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),c("tabCompletion.off","Disable tab completions."),c("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:c("tabCompletion","Enables tab completions.")})),tabIndex:$(new Lt(126,"tabIndex",0,-1,1073741824)),unicodeHighlight:$(new MC),unusualLineTerminators:$(new Ht(128,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[c("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),c("unusualLineTerminators.off","Unusual line terminators are ignored."),c("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:c("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:$(new tt(129,"useShadowDOM",!0)),useTabStops:$(new tt(130,"useTabStops",!0,{description:c("useTabStops","Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:$(new Ht(131,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[c("wordBreak.normal","Use the default line break rule."),c("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:c("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:$(new zC),wordSeparators:$(new ki(133,"wordSeparators",eC,{description:c("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:$(new Ht(134,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[c("wordWrap.off","Lines will never wrap."),c("wordWrap.on","Lines will wrap at the viewport width."),c({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),c({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:c({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:$(new ki(135,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:$(new ki(136,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:$(new Lt(137,"wordWrapColumn",80,1,1073741824,{markdownDescription:c({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:$(new Ht(138,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:$(new Ht(139,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:$(new cC),defaultColorDecorators:$(new tt(149,"defaultColorDecorators",!1,{markdownDescription:c("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:$(new DC),tabFocusMode:$(new tt(146,"tabFocusMode",!1,{markdownDescription:c("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:$(new vC),wrappingInfo:$(new KC),wrappingIndent:$(new HC),wrappingStrategy:$(new yC)};var ot=class r{lineNumber;column;constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new r(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return r.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return r.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return r.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){let n=e.lineNumber|0,i=t.lineNumber|0;if(n===i){let o=e.column|0,s=t.column|0;return o-s}return n-i}clone(){return new r(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new r(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};var ge=class r{startLineNumber;startColumn;endLineNumber;endColumn;constructor(e,t,n,i){e>n||e===n&&t>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return r.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return r.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return r.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return r.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return r.plusRange(this,e)}static plusRange(e,t){let n,i,o,s;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,i=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,i=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),t.endLineNumber>e.endLineNumber?(o=t.endLineNumber,s=t.endColumn):t.endLineNumber===e.endLineNumber?(o=t.endLineNumber,s=Math.max(t.endColumn,e.endColumn)):(o=e.endLineNumber,s=e.endColumn),new r(n,i,o,s)}intersectRanges(e){return r.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,s=e.endColumn,a=t.startLineNumber,l=t.startColumn,d=t.endLineNumber,u=t.endColumn;return n<a?(n=a,i=l):n===a&&(i=Math.max(i,l)),o>d?(o=d,s=u):o===d&&(s=Math.min(s,u)),n>o||n===o&&i>s?null:new r(n,i,o,s)}equalsRange(e){return r.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return r.getEndPosition(this)}static getEndPosition(e){return new ot(e.endLineNumber,e.endColumn)}getStartPosition(){return r.getStartPosition(this)}static getStartPosition(e){return new ot(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new r(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new r(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return r.collapseToStart(this)}static collapseToStart(e){return new r(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return r.collapseToEnd(this)}static collapseToEnd(e){return new r(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new r(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new r(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new r(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){let o=e.startLineNumber|0,s=t.startLineNumber|0;if(o===s){let a=e.startColumn|0,l=t.startColumn|0;if(a===l){let d=e.endLineNumber|0,u=t.endLineNumber|0;if(d===u){let p=e.endColumn|0,h=t.endColumn|0;return p-h}return d-u}return a-l}return o-s}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};var Aa=class r extends ge{selectionStartLineNumber;selectionStartColumn;positionLineNumber;positionColumn;constructor(e,t,n,i){super(e,t,n,i),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=i}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return r.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new r(this.startLineNumber,this.startColumn,e,t):new r(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new ot(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new ot(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new r(e,t,this.endLineNumber,this.endColumn):new r(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new r(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new r(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new r(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new r(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,i,o){return o===0?new r(e,t,n,i):new r(n,i,e,t)}};var $C;function $A(){return $C||($C=new TextDecoder("UTF-16LE")),$C}var jC;function C4(){return jC||(jC=new TextDecoder("UTF-16BE")),jC}var YC;function jA(){return YC||(YC=SP()?$A():C4()),YC}function YA(r,e,t){let n=new Uint16Array(r.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?k4(r,e,t):$A().decode(n)}function k4(r,e,t){let n=[],i=0;for(let o=0;o<t;o++){let s=fA(r,e);e+=2,n[i++]=String.fromCharCode(s)}return n.join("")}function Ov(r){return r.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}var Br=class r{constructor(e,t,n,i){this.oldPosition=e;this.oldText=t;this.newPosition=n;this.newText=i}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${Ov(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${Ov(this.oldText)}")`:`(replace@${this.oldPosition} "${Ov(this.oldText)}" with "${Ov(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){let i=t.length;ni(e,i,n),n+=4;for(let o=0;o<i;o++)bA(e,t.charCodeAt(o),n),n+=2;return n}static _readString(e,t){let n=ti(e,t);return t+=4,YA(e,t,n)}writeSize(){return 8+r._writeStringSize(this.oldText)+r._writeStringSize(this.newText)}write(e,t){return ni(e,this.oldPosition,t),t+=4,ni(e,this.newPosition,t),t+=4,t=r._writeString(e,this.oldText,t),t=r._writeString(e,this.newText,t),t}static read(e,t,n){let i=ti(e,t);t+=4;let o=ti(e,t);t+=4;let s=r._readString(e,t);t+=r._writeStringSize(s);let a=r._readString(e,t);return t+=r._writeStringSize(a),n.push(new r(i,s,o,a)),t}};function XA(r,e){return r===null||r.length===0?e:new XC(r,e).compress()}var XC=class r{_prevEdits;_currEdits;_result;_resultLen;_prevLen;_prevDeltaOffset;_currLen;_currDeltaOffset;constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),i=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(i),i=this._getCurr(++t);continue}if(i===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldEnd<=n.newPosition){this._acceptCurr(i),i=this._getCurr(++t);continue}if(n.newEnd<=i.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldPosition<n.newPosition){let[d,u]=r._splitCurr(i,n.newPosition-i.oldPosition);this._acceptCurr(d),i=u;continue}if(n.newPosition<i.oldPosition){let[d,u]=r._splitPrev(n,i.oldPosition-n.newPosition);this._acceptPrev(d),n=u;continue}let a,l;if(i.oldEnd===n.newEnd)a=n,l=i,n=this._getPrev(++e),i=this._getCurr(++t);else if(i.oldEnd<n.newEnd){let[d,u]=r._splitPrev(n,i.oldLength);a=d,l=i,n=u,i=this._getCurr(++t)}else{let[d,u]=r._splitCurr(i,n.newLength);a=n,l=d,n=this._getPrev(++e),i=u}this._result[this._resultLen++]=new Br(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}let o=r._merge(this._result);return r._removeNoOps(o)}_acceptCurr(e){this._result[this._resultLen++]=r._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=r._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new Br(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new Br(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){let n=e.newText.substr(0,t),i=e.newText.substr(t);return[new Br(e.oldPosition,e.oldText,e.newPosition,n),new Br(e.oldEnd,"",e.newPosition+t,i)]}static _splitCurr(e,t){let n=e.oldText.substr(0,t),i=e.oldText.substr(t);return[new Br(e.oldPosition,n,e.newPosition,e.newText),new Br(e.oldPosition+t,i,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;let t=[],n=0,i=e[0];for(let o=1;o<e.length;o++){let s=e[o];i.oldEnd===s.oldPosition?i=new Br(i.oldPosition,i.oldText+s.oldText,i.newPosition,i.newText+s.newText):(t[n++]=i,i=s)}return t[n++]=i,t}static _removeNoOps(e){if(e.length===0)return e;let t=[],n=0;for(let i=0;i<e.length;i++){let o=e[i];o.oldText!==o.newText&&(t[n++]=o)}return t}};var Mv=class r{_asciiMap;_map;_defaultValue;constructor(e){let t=tw(e);this._defaultValue=t,this._asciiMap=r._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){let t=new Uint8Array(256);return t.fill(e),t}set(e,t){let n=tw(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}};var QC=class extends Mv{intlSegmenterLocales;_segmenter=null;_cachedLine=null;_cachedSegments=[];constructor(e,t){super(0),this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let n=0,i=e.length;n<i;n++)this.set(e.charCodeAt(n),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let n=null;for(let i of this._getIntlSegmenterWordsOnLine(e)){if(i.index>t)break;n=i}return n}findNextIntlWordAtOrAfterOffset(e,t){for(let n of this._getIntlSegmenterWordsOnLine(e))if(!(n.index<t))return n;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?this._cachedLine===e?this._cachedSegments:(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e)),this._cachedSegments):[]}_filterWordSegments(e){let t=[];for(let n of e)this._isWordLike(n)&&t.push(n);return t}_isWordLike(e){return!!e.isWordLike}},QA=new xo(10);function JA(r,e){let t=`${r}/${e.join(",")}`,n=QA.get(t);return n||(n=new QC(r,e),QA.set(t,n)),n}function Ml(r,e){let t=Math.pow(10,e);return Math.round(r*t)/t}var Je=class{_rgbaBrand=void 0;r;g;b;a;constructor(e,t,n,i=1){this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=Ml(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}},Ol=class r{_hslaBrand=void 0;h;s;l;a;constructor(e,t,n,i){this.h=Math.max(Math.min(360,e),0)|0,this.s=Ml(Math.max(Math.min(1,t),0),3),this.l=Ml(Math.max(Math.min(1,n),0),3),this.a=Ml(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){let t=e.r/255,n=e.g/255,i=e.b/255,o=e.a,s=Math.max(t,n,i),a=Math.min(t,n,i),l=0,d=0,u=(a+s)/2,p=s-a;if(p>0){switch(d=Math.min(u<=.5?p/(2*u):p/(2-2*u),1),s){case t:l=(n-i)/p+(n<i?6:0);break;case n:l=(i-t)/p+2;break;case i:l=(t-n)/p+4;break}l*=60,l=Math.round(l)}return new r(l,d,u,o)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){let t=e.h/360,{s:n,l:i,a:o}=e,s,a,l;if(n===0)s=a=l=i;else{let d=i<.5?i*(1+n):i+n-i*n,u=2*i-d;s=r._hue2rgb(u,d,t+1/3),a=r._hue2rgb(u,d,t),l=r._hue2rgb(u,d,t-1/3)}return new Je(Math.round(s*255),Math.round(a*255),Math.round(l*255),o)}},Nu=class r{_hsvaBrand=void 0;h;s;v;a;constructor(e,t,n,i){this.h=Math.max(Math.min(360,e),0)|0,this.s=Ml(Math.max(Math.min(1,t),0),3),this.v=Ml(Math.max(Math.min(1,n),0),3),this.a=Ml(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){let t=e.r/255,n=e.g/255,i=e.b/255,o=Math.max(t,n,i),s=Math.min(t,n,i),a=o-s,l=o===0?0:a/o,d;return a===0?d=0:o===t?d=((n-i)/a%6+6)%6:o===n?d=(i-t)/a+2:d=(t-n)/a+4,new r(Math.round(d*60),l,o,e.a)}static toRGBA(e){let{h:t,s:n,v:i,a:o}=e,s=i*n,a=s*(1-Math.abs(t/60%2-1)),l=i-s,[d,u,p]=[0,0,0];return t<60?(d=s,u=a):t<120?(d=a,u=s):t<180?(u=s,p=a):t<240?(u=a,p=s):t<300?(d=a,p=s):t<=360&&(d=s,p=a),d=Math.round((d+l)*255),u=Math.round((u+l)*255),p=Math.round((p+l)*255),new Je(d,u,p,o)}},B=class r{static fromHex(e){return r.Format.CSS.parseHex(e)||r.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}rgba;_hsla;get hsla(){return this._hsla?this._hsla:Ol.fromRGBA(this.rgba)}_hsva;get hsva(){return this._hsva?this._hsva:Nu.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof Je)this.rgba=e;else if(e instanceof Ol)this._hsla=e,this.rgba=Ol.toRGBA(e);else if(e instanceof Nu)this._hsva=e,this.rgba=Nu.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&Je.equals(this.rgba,e.rgba)&&Ol.equals(this.hsla,e.hsla)&&Nu.equals(this.hsva,e.hsva)}getRelativeLuminance(){let e=r._relativeLuminanceForComponent(this.rgba.r),t=r._relativeLuminanceForComponent(this.rgba.g),n=r._relativeLuminanceForComponent(this.rgba.b),i=.2126*e+.7152*t+.0722*n;return Ml(i,4)}static _relativeLuminanceForComponent(e){let t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}getContrastRatio(e){let t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)}isDarker(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3<128}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){let t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){let t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new r(new Ol(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new r(new Ol(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){let{r:t,g:n,b:i,a:o}=this.rgba;return new r(new Je(t,n,i,o*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new r(new Je(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}blend(e){let t=e.rgba,n=this.rgba.a,i=t.a,o=n+i*(1-n);if(o<1e-6)return r.transparent;let s=this.rgba.r*n/o+t.r*i*(1-n)/o,a=this.rgba.g*n/o+t.g*i*(1-n)/o,l=this.rgba.b*n/o+t.b*i*(1-n)/o;return new r(new Je(s,a,l,o))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;let{r:t,g:n,b:i,a:o}=this.rgba;return new r(new Je(e.rgba.r-o*(e.rgba.r-t),e.rgba.g-o*(e.rgba.g-n),e.rgba.b-o*(e.rgba.b-i),1))}flatten(...e){let t=e.reduceRight((n,i)=>r._flatten(i,n));return r._flatten(this,t)}static _flatten(e,t){let n=1-e.rgba.a;return new r(new Je(n*t.rgba.r+e.rgba.a*e.rgba.r,n*t.rgba.g+e.rgba.a*e.rgba.g,n*t.rgba.b+e.rgba.a*e.rgba.b))}_toString;toString(){return this._toString||(this._toString=r.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;let i=e.getRelativeLuminance(),o=t.getRelativeLuminance();return n=n*(o-i)/o,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;let i=e.getRelativeLuminance(),o=t.getRelativeLuminance();return n=n*(i-o)/i,e.darken(n)}static white=new r(new Je(255,255,255,1));static black=new r(new Je(0,0,0,1));static red=new r(new Je(255,0,0,1));static blue=new r(new Je(0,0,255,1));static green=new r(new Je(0,255,0,1));static cyan=new r(new Je(0,255,255,1));static lightgrey=new r(new Je(211,211,211,1));static transparent=new r(new Je(0,0,0,0))};(e=>{let r;(n=>{let t;(f=>{function i(g){return g.rgba.a===1?`rgb(${g.rgba.r}, ${g.rgba.g}, ${g.rgba.b})`:e.Format.CSS.formatRGBA(g)}f.formatRGB=i;function o(g){return`rgba(${g.rgba.r}, ${g.rgba.g}, ${g.rgba.b}, ${+g.rgba.a.toFixed(2)})`}f.formatRGBA=o;function s(g){return g.hsla.a===1?`hsl(${g.hsla.h}, ${(g.hsla.s*100).toFixed(2)}%, ${(g.hsla.l*100).toFixed(2)}%)`:e.Format.CSS.formatHSLA(g)}f.formatHSL=s;function a(g){return`hsla(${g.hsla.h}, ${(g.hsla.s*100).toFixed(2)}%, ${(g.hsla.l*100).toFixed(2)}%, ${g.hsla.a.toFixed(2)})`}f.formatHSLA=a;function l(g){let y=g.toString(16);return y.length!==2?"0"+y:y}function d(g){return`#${l(g.rgba.r)}${l(g.rgba.g)}${l(g.rgba.b)}`}f.formatHex=d;function u(g,y=!1){return y&&g.rgba.a===1?e.Format.CSS.formatHex(g):`#${l(g.rgba.r)}${l(g.rgba.g)}${l(g.rgba.b)}${l(Math.round(g.rgba.a*255))}`}f.formatHexA=u;function p(g){return g.isOpaque()?e.Format.CSS.formatHex(g):e.Format.CSS.formatRGBA(g)}f.format=p;function h(g){let y=g.length;if(y===0||g.charCodeAt(0)!==35)return null;if(y===7){let T=16*m(g.charCodeAt(1))+m(g.charCodeAt(2)),E=16*m(g.charCodeAt(3))+m(g.charCodeAt(4)),D=16*m(g.charCodeAt(5))+m(g.charCodeAt(6));return new e(new Je(T,E,D,1))}if(y===9){let T=16*m(g.charCodeAt(1))+m(g.charCodeAt(2)),E=16*m(g.charCodeAt(3))+m(g.charCodeAt(4)),D=16*m(g.charCodeAt(5))+m(g.charCodeAt(6)),_=16*m(g.charCodeAt(7))+m(g.charCodeAt(8));return new e(new Je(T,E,D,_/255))}if(y===4){let T=m(g.charCodeAt(1)),E=m(g.charCodeAt(2)),D=m(g.charCodeAt(3));return new e(new Je(16*T+T,16*E+E,16*D+D))}if(y===5){let T=m(g.charCodeAt(1)),E=m(g.charCodeAt(2)),D=m(g.charCodeAt(3)),_=m(g.charCodeAt(4));return new e(new Je(16*T+T,16*E+E,16*D+D,(16*_+_)/255))}return null}f.parseHex=h;function m(g){switch(g){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(t=n.CSS||={})})(r=e.Format||={})})(B||={});var _4=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function ZA(r){return _4.test(r)}var In=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let r;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?r=crypto.getRandomValues.bind(crypto):r=function(n){for(let i=0;i<n.length;i++)n[i]=Math.floor(Math.random()*256);return n};let e=new Uint8Array(16),t=[];for(let n=0;n<256;n++)t.push(n.toString(16).padStart(2,"0"));return function(){r(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let i=0,o="";return o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o+="-",o+=t[e[i++]],o+=t[e[i++]],o+="-",o+=t[e[i++]],o+=t[e[i++]],o+="-",o+=t[e[i++]],o+=t[e[i++]],o+="-",o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o}}();var Nv=Object.freeze({create:r=>di(r.map(e=>e.toString())).join(`\r
`),split:r=>r.split(`\r
`),parse:r=>Nv.split(r).filter(e=>!e.startsWith("#"))});var eO=class r{constructor(e){this.value=e}static sep=".";static None=new r("@@none@@");static Empty=new r("");equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+r.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(...e){return new r((this.value?[this.value,...e]:e).join(r.sep))}};var Ur=class{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let n="mtk"+this.getForeground(e),i=this.getFontStyle(e);return i&1&&(n+=" mtki"),i&2&&(n+=" mtkb"),i&4&&(n+=" mtku"),i&8&&(n+=" mtks"),n}static getInlineStyleFromMetadata(e,t){let n=this.getForeground(e),i=this.getFontStyle(e),o=`color: ${t[n]};`;i&1&&(o+="font-style: italic;"),i&2&&(o+="font-weight: bold;");let s="";return i&4&&(s+=" underline"),i&8&&(s+=" line-through"),s&&(o+=`text-decoration:${s};`),o}static getPresentationFromMetadata(e){let t=this.getForeground(e),n=this.getFontStyle(e);return{foreground:t,italic:!!(n&1),bold:!!(n&2),underline:!!(n&4),strikethrough:!!(n&8)}}};var Fv="**",tO="/",Bv="[/\\\\]",Uv="[^/\\\\]",L4=/\//g;function nO(r,e){switch(r){case 0:return"";case 1:return`${Uv}*?`;default:return`(?:${Bv}|${Uv}+${Bv}${e?`|${Bv}${Uv}+`:""})*?`}}function iO(r,e){if(!r)return[];let t=[],n=!1,i=!1,o="";for(let s of r){switch(s){case e:if(!n&&!i){t.push(o),o="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":i=!0;break;case"]":i=!1;break}o+=s}return o&&t.push(o),t}function lO(r){if(!r)return"";let e="",t=iO(r,tO);if(t.every(n=>n===Fv))e=".*";else{let n=!1;t.forEach((i,o)=>{if(i===Fv){if(n)return;e+=nO(2,o===t.length-1)}else{let s=!1,a="",l=!1,d="";for(let u of i){if(u!=="}"&&s){a+=u;continue}if(l&&(u!=="]"||!d)){let p;u==="-"?p=u:(u==="^"||u==="!")&&!d?p="^":u===tO?p="":p=Ni(u),d+=p;continue}switch(u){case"{":s=!0;continue;case"[":l=!0;continue;case"}":{let h=`(?:${iO(a,",").map(m=>lO(m)).join("|")})`;e+=h,s=!1,a="";break}case"]":{e+="["+d+"]",l=!1,d="";break}case"?":e+=Uv;continue;case"*":e+=nO(1);continue;default:e+=Ni(u)}}o<t.length-1&&(t[o+1]!==Fv||o+2<t.length)&&(e+=Bv)}n=i===Fv})}return e}var P4=/^\*\*\/\*\.[\w\.-]+$/,A4=/^\*\*\/([\w\.-]+)\/?$/,O4=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,M4=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,N4=/^\*\*((\/[\w\.-]+)+)\/?$/,F4=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,rO=new xo(1e4),oO=function(){return!1},Os=function(){return null};function ZC(r,e){if(!r)return Os;let t;typeof r!="string"?t=r.pattern:t=r,t=t.trim();let n=`${t}_${!!e.trimForExclusions}`,i=rO.get(n);if(i)return sO(i,r);let o;return P4.test(t)?i=B4(t.substr(4),t):(o=A4.exec(JC(t,e)))?i=U4(o[1],t):(e.trimForExclusions?M4:O4).test(t)?i=V4(t,e):(o=N4.exec(JC(t,e)))?i=aO(o[1].substr(1),t,!0):(o=F4.exec(JC(t,e)))?i=aO(o[1],t,!1):i=W4(t),rO.set(n,i),sO(i,r)}function sO(r,e){if(typeof e=="string")return r;let t=function(n,i){return Sm(n,e.base,!Wt)?r(Bb(n.substr(e.base.length),gr),i):null};return t.allBasenames=r.allBasenames,t.allPaths=r.allPaths,t.basenames=r.basenames,t.patterns=r.patterns,t}function JC(r,e){return e.trimForExclusions&&r.endsWith("/**")?r.substr(0,r.length-2):r}function B4(r,e){return function(t,n){return typeof t=="string"&&t.endsWith(r)?e:null}}function U4(r,e){let t=`/${r}`,n=`\\${r}`,i=function(s,a){return typeof s!="string"?null:a?a===r?e:null:s===r||s.endsWith(t)||s.endsWith(n)?e:null},o=[r];return i.basenames=o,i.patterns=[e],i.allBasenames=o,i}function V4(r,e){let t=dO(r.slice(1,-1).split(",").map(a=>ZC(a,e)).filter(a=>a!==Os),r),n=t.length;if(!n)return Os;if(n===1)return t[0];let i=function(a,l){for(let d=0,u=t.length;d<u;d++)if(t[d](a,l))return r;return null},o=t.find(a=>!!a.allBasenames);o&&(i.allBasenames=o.allBasenames);let s=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return s.length&&(i.allPaths=s),i}function aO(r,e,t){let n=gr===bt.sep,i=n?r:r.replace(L4,gr),o=gr+i,s=bt.sep+r,a;return t?a=function(l,d){return typeof l=="string"&&(l===i||l.endsWith(o)||!n&&(l===r||l.endsWith(s)))?e:null}:a=function(l,d){return typeof l=="string"&&(l===i||!n&&l===r)?e:null},a.allPaths=[(t?"*/":"./")+r],a}function W4(r){try{let e=new RegExp(`^${lO(r)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?r:null}}catch{return Os}}function ek(r,e={}){if(!r)return oO;if(typeof r=="string"||z4(r)){let t=ZC(r,e);if(t===Os)return oO;let n=function(i,o){return!!t(i,o)};return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return H4(r,e)}function z4(r){let e=r;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function H4(r,e){let t=dO(Object.getOwnPropertyNames(r).map(a=>K4(a,r[a],e)).filter(a=>a!==Os)),n=t.length;if(!n)return Os;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];let a=function(u,p){let h;for(let m=0,f=t.length;m<f;m++){let g=t[m](u,p);if(typeof g=="string")return g;rv(g)&&(h||(h=[]),h.push(g))}return h?(async()=>{for(let m of h){let f=await m;if(typeof f=="string")return f}return null})():null},l=t.find(u=>!!u.allBasenames);l&&(a.allBasenames=l.allBasenames);let d=t.reduce((u,p)=>p.allPaths?u.concat(p.allPaths):u,[]);return d.length&&(a.allPaths=d),a}let i=function(a,l,d){let u,p;for(let h=0,m=t.length;h<m;h++){let f=t[h];f.requiresSiblings&&d&&(l||(l=fl(a)),u||(u=l.substr(0,l.length-Md(a).length)));let g=f(a,l,u,d);if(typeof g=="string")return g;rv(g)&&(p||(p=[]),p.push(g))}return p?(async()=>{for(let h of p){let m=await h;if(typeof m=="string")return m}return null})():null},o=t.find(a=>!!a.allBasenames);o&&(i.allBasenames=o.allBasenames);let s=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return s.length&&(i.allPaths=s),i}function K4(r,e,t){if(e===!1)return Os;let n=ZC(r,t);if(n===Os)return Os;if(typeof e=="boolean")return n;if(e){let i=e.when;if(typeof i=="string"){let o=(s,a,l,d)=>{if(!d||!n(s,a))return null;let u=i.replace("$(basename)",()=>l),p=d(u);return rv(p)?p.then(h=>h?r:null):p?r:null};return o.requiresSiblings=!0,o}}return n}function dO(r,e){let t=r.filter(a=>!!a.basenames);if(t.length<2)return r;let n=t.reduce((a,l)=>{let d=l.basenames;return d?a.concat(d):a},[]),i;if(e){i=[];for(let a=0,l=n.length;a<l;a++)i.push(e)}else i=t.reduce((a,l)=>{let d=l.patterns;return d?a.concat(d):a},[]);let o=function(a,l){if(typeof a!="string")return null;if(!l){let u;for(u=a.length;u>0;u--){let p=a.charCodeAt(u-1);if(p===47||p===92)break}l=a.substr(u)}let d=n.indexOf(l);return d!==-1?i[d]:null};o.basenames=n,o.patterns=i,o.allBasenames=n;let s=r.filter(a=>!a.basenames);return s.push(o),s}var Wm=class{_tokenizationSupports=new Map;_factories=new Map;_onDidChange=new x;onDidChange=this._onDidChange.event;_colorMap;constructor(){this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),ie(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){this._factories.get(e)?.dispose();let n=new tk(this,e,t);return this._factories.set(e,n),ie(()=>{let i=this._factories.get(e);!i||i!==n||(this._factories.delete(e),i.dispose())})}async getOrCreate(e){let t=this.get(e);if(t)return t;let n=this._factories.get(e);return!n||n.isResolved?null:(await n.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;let n=this._factories.get(e);return!!(!n||n.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}},tk=class extends P{constructor(t,n,i){super();this._registry=t;this._languageId=n;this._factory=i}_isDisposed=!1;_resolvePromise=null;_isResolved=!1;get isResolved(){return this._isResolved}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){let t=await this._factory.tokenizationSupport;this._isResolved=!0,t&&!this._isDisposed&&this._register(this._registry.register(this._languageId,t))}};function xr(r){let e=0,t=0,n=0,i=0;for(let o=0,s=r.length;o<s;o++){let a=r.charCodeAt(o);a===13?(e===0&&(t=o),e++,o+1<s&&r.charCodeAt(o+1)===10?(i|=2,o++):i|=3,n=o+1):a===10&&(i|=1,e===0&&(t=o),e++,n=o+1)}return e===0&&(t=r.length),[e,t,r.length-n,i]}var qt=class r{constructor(e,t){this.start=e;this.endExclusive=t;if(e>t)throw new gt(`Invalid range: ${this.toString()}`)}static addRange(e,t){let n=0;for(;n<t.length&&t[n].endExclusive<e.start;)n++;let i=n;for(;i<t.length&&t[i].start<=e.endExclusive;)i++;if(n===i)t.splice(n,0,e);else{let o=Math.min(e.start,t[n].start),s=Math.max(e.endExclusive,t[i-1].endExclusive);t.splice(n,i-n,new r(o,s))}}static tryCreate(e,t){if(!(e>t))return new r(e,t)}static ofLength(e){return new r(0,e)}static ofStartAndLength(e,t){return new r(e,e+t)}static emptyAt(e){return new r(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new r(this.start+e,this.endExclusive+e)}deltaStart(e){return new r(this.start+e,this.endExclusive)}deltaEnd(e){return new r(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new r(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(t<=n)return new r(t,n)}intersectionLength(e){let t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,n-t)}intersects(e){let t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return t<n}intersectsOrTouches(e){let t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return t<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new gt(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new gt(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let t=[];for(let n=this.start;n<this.endExclusive;n++)t.push(e(n));return t}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}};var ik=class r{constructor(e){this._tokenInfo=e}static create(e){return new r(e)}forEach(e){let t=0;for(let n of this._tokenInfo){let i=new qt(t,t+n.length);e(i,n),t+=n.length}}slice(e){let t=[],n=0;for(let i of this._tokenInfo){let o=n,s=o+i.length;if(s>e.start){if(o>=e.endExclusive)break;let a=Math.max(0,e.start-o),l=Math.max(0,s-e.endExclusive);t.push(new Vv(i.length-a-l,i.metadata))}n+=i.length}return r.create(t)}},Vv=class{constructor(e,t){this.length=e;this.metadata=t}},Wv=class{_tokens=[];add(e,t){this._tokens.push(new Vv(e,t))}build(){return ik.create(this._tokens)}};var Di=class r{static createEmpty(e,t){let n=r.defaultTokenMetadata,i=new Uint32Array(2);return i[0]=e.length,i[1]=n,new r(i,e,t)}static createFromTextAndMetadata(e,t){let n=0,i="",o=new Array;for(let{text:s,metadata:a}of e)o.push(n+s.length,a),n+=s.length,i+=s;return new r(new Uint32Array(o),i,t)}static convertToEndOffset(e,t){let i=(e.length>>>1)-1;for(let o=0;o<i;o++)e[o<<1]=e[o+1<<1];e[i<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,i=(e.length>>>1)-1;for(;n<i;){let o=n+Math.floor((i-n)/2),s=e[o<<1];if(s===t)return o+1;s<t?n=o+1:s>t&&(i=o)}return n}_lineTokensBrand=void 0;_tokens;_tokensCount;_text;languageIdCodec;static defaultTokenMetadata=(32768|2<<24)>>>0;constructor(e,t,n){this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this.languageIdCodec=n}equals(e){return e instanceof r?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;let i=t<<1,o=i+(n<<1);for(let s=i;s<o;s++)if(this._tokens[s]!==e._tokens[s])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){let t=this._tokens[(e<<1)+1],n=Ur.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){let t=this._tokens[(e<<1)+1];return Ur.getTokenType(t)}getForeground(e){let t=this._tokens[(e<<1)+1];return Ur.getForeground(t)}getClassName(e){let t=this._tokens[(e<<1)+1];return Ur.getClassNameFromMetadata(t)}getInlineStyle(e,t){let n=this._tokens[(e<<1)+1];return Ur.getInlineStyleFromMetadata(n,t)}getPresentation(e){let t=this._tokens[(e<<1)+1];return Ur.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return r.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new rk(this,e,t,n)}withInserted(e){if(e.length===0)return this;let t=0,n=0,i="",o=new Array,s=0;for(;;){let a=t<this._tokensCount?this._tokens[t<<1]:-1,l=n<e.length?e[n]:null;if(a!==-1&&(l===null||a<=l.offset)){i+=this._text.substring(s,a);let d=this._tokens[(t<<1)+1];o.push(i.length,d),t++,s=a}else if(l){if(l.offset>s){i+=this._text.substring(s,l.offset);let d=this._tokens[(t<<1)+1];o.push(i.length,d),s=l.offset}i+=l.text,o.push(i.length,l.tokenMetadata),n++}else break}return new r(new Uint32Array(o),i,this.languageIdCodec)}getTokensInRange(e){let t=new Wv,n=this.findTokenIndexAtOffset(e.start),i=this.findTokenIndexAtOffset(e.endExclusive);for(let o=n;o<=i;o++){let a=new qt(this.getStartOffset(o),this.getEndOffset(o)).intersectionLength(e);a>0&&t.add(a,this.getMetadata(o))}return t.build()}getTokenText(e){let t=this.getStartOffset(e),n=this.getEndOffset(e);return this._text.substring(t,n)}forEach(e){let t=this.getCount();for(let n=0;n<t;n++)e(n)}},rk=class r{_source;_startOffset;_endOffset;_deltaOffset;_firstTokenIndex;_tokensCount;languageIdCodec;constructor(e,t,n,i){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=i,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this.languageIdCodec=e.languageIdCodec,this._tokensCount=0;for(let o=this._firstTokenIndex,s=e.getCount();o<s&&!(e.getStartOffset(o)>=n);o++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof r?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getStandardTokenType(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){let t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(e){let t=this._firstTokenIndex+e,n=this._source.getStartOffset(t),i=this._source.getEndOffset(t),o=this._source.getTokenText(t);return n<this._startOffset&&(o=o.substring(this._startOffset-n)),i>this._endOffset&&(o=o.substring(0,o.length-(i-this._endOffset))),o}forEach(e){for(let t=0;t<this.getCount();t++)e(t)}};var Ms=new Uint32Array(0).buffer,ri=class r{static deleteBeginning(e,t){return e===null||e===Ms?e:r.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===Ms)return e;let n=Ns(e),i=n[n.length-2];return r.delete(e,t,i)}static delete(e,t,n){if(e===null||e===Ms||t===n)return e;let i=Ns(e),o=i.length>>>1;if(t===0&&i[i.length-2]===n)return Ms;let s=Di.findIndexInTokensArray(i,t),a=s>0?i[s-1<<1]:0,l=i[s<<1];if(n<l){let m=n-t;for(let f=s;f<o;f++)i[f<<1]-=m;return e}let d,u;a!==t?(i[s<<1]=t,d=s+1<<1,u=t):(d=s<<1,u=a);let p=n-t;for(let m=s+1;m<o;m++){let f=i[m<<1]-p;f>u&&(i[d++]=f,i[d++]=i[(m<<1)+1],u=f)}if(d===i.length)return e;let h=new Uint32Array(d);return h.set(i.subarray(0,d),0),h.buffer}static append(e,t){if(t===Ms)return e;if(e===Ms)return t;if(e===null)return e;if(t===null)return null;let n=Ns(e),i=Ns(t),o=i.length>>>1,s=new Uint32Array(n.length+i.length);s.set(n,0);let a=n.length,l=n[n.length-2];for(let d=0;d<o;d++)s[a++]=i[d<<1]+l,s[a++]=i[(d<<1)+1];return s.buffer}static insert(e,t,n){if(e===null||e===Ms)return e;let i=Ns(e),o=i.length>>>1,s=Di.findIndexInTokensArray(i,t);s>0&&i[s-1<<1]===t&&s--;for(let a=s;a<o;a++)i[a<<1]+=n;return e}};function Ns(r){return r instanceof Uint32Array?r:new Uint32Array(r)}var Vi=class r{static fromRange(e){return new r(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new r(e.startLineNumber,e.endLineNumber+1)}static subtract(e,t){return t?e.startLineNumber<t.startLineNumber&&t.endLineNumberExclusive<e.endLineNumberExclusive?[new r(e.startLineNumber,t.startLineNumber),new r(t.endLineNumberExclusive,e.endLineNumberExclusive)]:t.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=t.endLineNumberExclusive?[]:t.endLineNumberExclusive<e.endLineNumberExclusive?[new r(Math.max(t.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new r(e.startLineNumber,Math.min(t.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let t=new zv(e[0].slice());for(let n=1;n<e.length;n++)t=t.getUnion(new zv(e[n].slice()));return t.ranges}static join(e){if(e.length===0)throw new gt("lineRanges cannot be empty");let t=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let i=1;i<e.length;i++)t=Math.min(t,e[i].startLineNumber),n=Math.max(n,e[i].endLineNumberExclusive);return new r(t,n)}static ofLength(e,t){return new r(e,e+t)}static deserialize(e){return new r(e[0],e[1])}startLineNumber;endLineNumberExclusive;constructor(e,t){if(e>t)throw new gt(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new r(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new r(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new r(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=n)return new r(t,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new ge(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new ge(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let t=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)t.push(e(n));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new qt(this.startLineNumber-1,this.endLineNumberExclusive-1)}},zv=class r{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let t=ab(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),n=Ah(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)this._normalizedRanges.splice(t,0,e);else if(t===n-1){let i=this._normalizedRanges[t];this._normalizedRanges[t]=i.join(e)}else{let i=this._normalizedRanges[t].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(t,n-t,i)}}contains(e){let t=yE(this._normalizedRanges,n=>n.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){let t=yE(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let t=[],n=0,i=0,o=null;for(;n<this._normalizedRanges.length||i<e._normalizedRanges.length;){let s=null;if(n<this._normalizedRanges.length&&i<e._normalizedRanges.length){let a=this._normalizedRanges[n],l=e._normalizedRanges[i];a.startLineNumber<l.startLineNumber?(s=a,n++):(s=l,i++)}else n<this._normalizedRanges.length?(s=this._normalizedRanges[n],n++):(s=e._normalizedRanges[i],i++);o===null?o=s:o.endLineNumberExclusive>=s.startLineNumber?o=new Vi(o.startLineNumber,Math.max(o.endLineNumberExclusive,s.endLineNumberExclusive)):(t.push(o),o=s)}return o!==null&&t.push(o),new r(t)}subtractFrom(e){let t=ab(this._normalizedRanges,s=>s.endLineNumberExclusive>=e.startLineNumber),n=Ah(this._normalizedRanges,s=>s.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)return new r([e]);let i=[],o=e.startLineNumber;for(let s=t;s<n;s++){let a=this._normalizedRanges[s];a.startLineNumber>o&&i.push(new Vi(o,a.startLineNumber)),o=a.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new Vi(o,e.endLineNumberExclusive)),new r(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let t=[],n=0,i=0;for(;n<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let o=this._normalizedRanges[n],s=e._normalizedRanges[i],a=o.intersect(s);a&&!a.isEmpty&&t.push(a),o.endLineNumberExclusive<s.endLineNumberExclusive?n++:i++}return new r(t)}getWithDelta(e){return new r(this._normalizedRanges.map(t=>t.delta(e)))}};var zm=class r{static deserialize(e,t,n){let i=new Uint32Array(e.buffer),o=ti(e,t);t+=4;let s=ti(e,t);t+=4;let a=[];for(let l=0;l<s;l++){let d=ti(e,t);t+=4,a.push(i.subarray(t/4,t/4+d/4)),t+=d}return n.push(new r(o,a)),t}_startLineNumber;_tokens;get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineRange(){return new Vi(this._startLineNumber,this._startLineNumber+this._tokens.length)}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}serializeSize(){let e=0;e+=4,e+=4;for(let t=0;t<this._tokens.length;t++){let n=this._tokens[t];if(!(n instanceof Uint32Array))throw new Error("Not supported!");e+=4,e+=n.byteLength}return e}serialize(e,t){ni(e,this._startLineNumber,t),t+=4,ni(e,this._tokens.length,t),t+=4;for(let n=0;n<this._tokens.length;n++){let i=this._tokens[n];if(!(i instanceof Uint32Array))throw new Error("Not supported!");ni(e,i.byteLength,t),t+=4,e.set(new Uint8Array(i.buffer),t),t+=i.byteLength}return t}applyEdit(e,t){let[n,i]=xr(t);this._acceptDeleteRange(e),this._acceptInsertText(new ot(e.startLineNumber,e.startColumn),n,i)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;let t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){let i=n-t;this._startLineNumber-=i;return}if(!(t>=this._tokens.length)){if(t<0&&n>=this._tokens.length){this._startLineNumber=0,this._tokens=[];return}if(t===n){this._tokens[t]=ri.delete(this._tokens[t],e.startColumn-1,e.endColumn-1);return}if(t>=0)if(this._tokens[t]=ri.deleteEnding(this._tokens[t],e.startColumn-1),n<this._tokens.length){let i=ri.deleteBeginning(this._tokens[n],e.endColumn-1);this._tokens[t]=ri.append(this._tokens[t],i),this._tokens.splice(t+1,n-t)}else this._tokens[t]=ri.append(this._tokens[t],null),this._tokens=this._tokens.slice(0,t+1);else{let i=-t;this._startLineNumber-=i,this._tokens[n]=ri.deleteBeginning(this._tokens[n],e.endColumn-1),this._tokens=this._tokens.slice(n)}}}_acceptInsertText(e,t,n){if(t===0&&n===0)return;let i=e.lineNumber-this._startLineNumber;if(i<0){this._startLineNumber+=t;return}if(!(i>=this._tokens.length)){if(t===0){this._tokens[i]=ri.insert(this._tokens[i],e.column-1,n);return}this._tokens[i]=ri.deleteEnding(this._tokens[i],e.column-1),this._tokens[i]=ri.insert(this._tokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)}}_insertLines(e,t){if(t===0)return;let n=[];for(let i=0;i<t;i++)n[i]=null;this._tokens=ul(this._tokens,e,n)}};var Hv=(i=>(i[i.Ignore=0]="Ignore",i[i.Info=1]="Info",i[i.Warning=2]="Warning",i[i.Error=3]="Error",i))(Hv||{});(a=>{let r="error",e="warning",t="warn",n="info",i="ignore";function o(l){return l?br(r,l)?3:br(e,l)||br(t,l)?2:br(n,l)?1:0:0}a.fromValue=o;function s(l){switch(l){case 3:return r;case 2:return e;case 1:return n;default:return i}}a.toString=s})(Hv||={});var bn=Hv;function sk(r){return r.scheme===le.vscodeRemote?r.authority:void 0}var uO="undefined_publisher",pO=["ui","workspace","web"];var hO=["AI","Azure","Chat","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"];var Dn=class{value;_lower;constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(typeof e>"u"||e===null)return typeof t>"u"||t===null;if(typeof t>"u"||t===null)return!1;if(typeof e=="string"||typeof t=="string"){let n=typeof e=="string"?e:e.value,i=typeof t=="string"?t:t.value;return br(n,i)}return e._lower===t._lower}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}},Zd=class{_set=new Set;get size(){return this._set.size}constructor(e){if(e)for(let t of e)this.add(t)}add(e){this._set.add(Dn.toKey(e))}delete(e){return this._set.delete(Dn.toKey(e))}has(e){return this._set.has(Dn.toKey(e))}},Vr=class{_map=new Map;clear(){this._map.clear()}delete(e){this._map.delete(Dn.toKey(e))}get(e){return this._map.get(Dn.toKey(e))}has(e){return this._map.has(Dn.toKey(e))}set(e,t){this._map.set(Dn.toKey(e),t)}values(){return this._map.values()}forEach(e){this._map.forEach(e)}[Symbol.iterator](){return this._map[Symbol.iterator]()}};function mO(r){return j4(r)}function j4(r){return r.contributes&&r.contributes.localizations?r.contributes.localizations.length>0:!1}var ine=A("IBuiltinExtensionsScannerService");var Fu=(i=>(i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error",i))(Fu||{});(o=>{function r(s,a){return a-s}o.compare=r;let e=Object.create(null);e[8]=c("sev.error","Error"),e[4]=c("sev.warning","Warning"),e[2]=c("sev.info","Info");function t(s){return e[s]||""}o.toString=t;function n(s){switch(s){case bn.Error:return 8;case bn.Warning:return 4;case bn.Info:return 2;case bn.Ignore:return 1}}o.fromSeverity=n;function i(s){switch(s){case 8:return bn.Error;case 4:return bn.Warning;case 2:return bn.Info;case 1:return bn.Ignore}}o.toSeverity=i})(Fu||={});var Y4;(n=>{let r="";function e(i){return t(i,!0)}n.makeKey=e;function t(i,o){let s=[r];return i.source?s.push(i.source.replace("\xA6","\\\xA6")):s.push(r),i.code?typeof i.code=="string"?s.push(i.code.replace("\xA6","\\\xA6")):s.push(i.code.value.replace("\xA6","\\\xA6")):s.push(r),i.severity!==void 0&&i.severity!==null?s.push(Fu.toString(i.severity)):s.push(r),i.message&&o?s.push(i.message.replace("\xA6","\\\xA6")):s.push(r),i.startLineNumber!==void 0&&i.startLineNumber!==null?s.push(i.startLineNumber.toString()):s.push(r),i.startColumn!==void 0&&i.startColumn!==null?s.push(i.startColumn.toString()):s.push(r),i.endLineNumber!==void 0&&i.endLineNumber!==null?s.push(i.endLineNumber.toString()):s.push(r),i.endColumn!==void 0&&i.endColumn!==null?s.push(i.endColumn.toString()):s.push(r),s.push(r),s.join("\xA6")}n.makeKeyOptionalMessage=t})(Y4||={});var gO=A("markerService");var Kv=class{constructor(e,t){this.tokens=e;this.endState=t}_encodedTokenizationResultBrand=void 0};var X4;(i=>{let r=new Map;r.set(0,z.symbolMethod),r.set(1,z.symbolFunction),r.set(2,z.symbolConstructor),r.set(3,z.symbolField),r.set(4,z.symbolVariable),r.set(5,z.symbolClass),r.set(6,z.symbolStruct),r.set(7,z.symbolInterface),r.set(8,z.symbolModule),r.set(9,z.symbolProperty),r.set(10,z.symbolEvent),r.set(11,z.symbolOperator),r.set(12,z.symbolUnit),r.set(13,z.symbolValue),r.set(15,z.symbolEnum),r.set(14,z.symbolConstant),r.set(15,z.symbolEnum),r.set(16,z.symbolEnumMember),r.set(17,z.symbolKeyword),r.set(27,z.symbolSnippet),r.set(18,z.symbolText),r.set(19,z.symbolColor),r.set(20,z.symbolFile),r.set(21,z.symbolReference),r.set(22,z.symbolCustomColor),r.set(23,z.symbolFolder),r.set(24,z.symbolTypeParameter),r.set(25,z.account),r.set(26,z.issues);function e(o){let s=r.get(o);return s||(console.info("No codicon found for CompletionItemKind "+o),s=z.symbolProperty),s}i.toIcon=e;let t=new Map;t.set("method",0),t.set("function",1),t.set("constructor",2),t.set("field",3),t.set("variable",4),t.set("class",5),t.set("struct",6),t.set("interface",7),t.set("module",8),t.set("property",9),t.set("event",10),t.set("operator",11),t.set("unit",12),t.set("value",13),t.set("constant",14),t.set("enum",15),t.set("enum-member",16),t.set("enumMember",16),t.set("keyword",17),t.set("snippet",27),t.set("text",18),t.set("color",19),t.set("file",20),t.set("reference",21),t.set("customcolor",22),t.set("folder",23),t.set("type-parameter",24),t.set("typeParameter",24),t.set("account",25),t.set("issue",26);function n(o,s){let a=t.get(o);return typeof a>"u"&&!s&&(a=9),a}i.fromString=n})(X4||={});var iie={17:c("Array","array"),16:c("Boolean","boolean"),4:c("Class","class"),13:c("Constant","constant"),8:c("Constructor","constructor"),9:c("Enum","enumeration"),21:c("EnumMember","enumeration member"),23:c("Event","event"),7:c("Field","field"),0:c("File","file"),11:c("Function","function"),10:c("Interface","interface"),19:c("Key","key"),5:c("Method","method"),1:c("Module","module"),2:c("Namespace","namespace"),20:c("Null","null"),15:c("Number","number"),18:c("Object","object"),24:c("Operator","operator"),3:c("Package","package"),6:c("Property","property"),14:c("String","string"),22:c("Struct","struct"),25:c("TypeParameter","type parameter"),12:c("Variable","variable")};var Q4;(t=>{let r=new Map;r.set(0,z.symbolFile),r.set(1,z.symbolModule),r.set(2,z.symbolNamespace),r.set(3,z.symbolPackage),r.set(4,z.symbolClass),r.set(5,z.symbolMethod),r.set(6,z.symbolProperty),r.set(7,z.symbolField),r.set(8,z.symbolConstructor),r.set(9,z.symbolEnum),r.set(10,z.symbolInterface),r.set(11,z.symbolFunction),r.set(12,z.symbolVariable),r.set(13,z.symbolConstant),r.set(14,z.symbolString),r.set(15,z.symbolNumber),r.set(16,z.symbolBoolean),r.set(17,z.symbolArray),r.set(18,z.symbolObject),r.set(19,z.symbolKey),r.set(20,z.symbolNull),r.set(21,z.symbolEnumMember),r.set(22,z.symbolStruct),r.set(23,z.symbolEvent),r.set(24,z.symbolOperator),r.set(25,z.symbolTypeParameter);function e(n){let i=r.get(n);return i||(console.info("No codicon found for SymbolKind "+n),i=z.symbolProperty),i}t.toIcon=e})(Q4||={});var fO=class r{constructor(e){this.value=e}static Comment=new r("comment");static Imports=new r("imports");static Region=new r("region");static fromValue(e){switch(e){case"comment":return r.Comment;case"imports":return r.Imports;case"region":return r.Region}return new r(e)}};var J4;(e=>{function r(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}e.is=r})(J4||={});var ak=new Wm,Hm=new Wm;var ko=A("languageService");var bO=(e=>(e[e.value=3]="value",e))(bO||{});function Do(r){return(r&bO.value)!==0}var Bu=class{open;close;_inString;_inComment;_inRegEx;_neutralCharacter=null;_neutralCharacterSearched=!1;constructor(e){if(this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;let n=e.findTokenIndexAtOffset(t-2),i=e.getStandardTokenType(n);return this.isOK(i)}_findNeutralCharacterInRange(e,t){for(let n=e;n<=t;n++){let i=String.fromCharCode(n);if(!this.open.includes(i)&&!this.close.includes(i))return i}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}},Gv=class{autoClosingPairsOpenByStart;autoClosingPairsOpenByEnd;autoClosingPairsCloseByStart;autoClosingPairsCloseByEnd;autoClosingPairsCloseSingleChar;constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(let t of e)Km(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),Km(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),Km(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),Km(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&Km(this.autoClosingPairsCloseSingleChar,t.close,t)}};function Km(r,e,t){r.has(e)?r.get(e).push(t):r.set(e,[t])}var lk=class r{_richEditBracketBrand=void 0;languageId;index;open;close;forwardRegex;reversedRegex;_openSet;_closeSet;constructor(e,t,n,i,o,s){this.languageId=e,this.index=t,this.open=n,this.close=i,this.forwardRegex=o,this.reversedRegex=s,this._openSet=r._toSet(this.open),this._closeSet=r._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){let t=new Set;for(let n of e)t.add(n);return t}};function Z4(r){let e=r.length;r=r.map(s=>[s[0].toLowerCase(),s[1].toLowerCase()]);let t=[];for(let s=0;s<e;s++)t[s]=s;let n=(s,a)=>{let[l,d]=s,[u,p]=a;return l===u||l===p||d===u||d===p},i=(s,a)=>{let l=Math.min(s,a),d=Math.max(s,a);for(let u=0;u<e;u++)t[u]===d&&(t[u]=l)};for(let s=0;s<e;s++){let a=r[s];for(let l=s+1;l<e;l++){let d=r[l];n(a,d)&&i(t[s],t[l])}}let o=[];for(let s=0;s<e;s++){let a=[],l=[];for(let d=0;d<e;d++)if(t[d]===s){let[u,p]=r[d];a.push(u),l.push(p)}a.length>0&&o.push({open:a,close:l})}return o}var qv=class{_richEditBracketsBrand=void 0;brackets;forwardRegex;reversedRegex;maxBracketLength;textIsBracket;textIsOpenBracket;constructor(e,t){let n=Z4(t);this.brackets=n.map((i,o)=>new lk(e,o,i.open,i.close,e5(i.open,i.close,n,o),t5(i.open,i.close,n,o))),this.forwardRegex=n5(this.brackets),this.reversedRegex=i5(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(let i of this.brackets){for(let o of i.open)this.textIsBracket[o]=i,this.textIsOpenBracket[o]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,o.length);for(let o of i.close)this.textIsBracket[o]=i,this.textIsOpenBracket[o]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,o.length)}}};function vO(r,e,t,n){for(let i=0,o=e.length;i<o;i++){if(i===t)continue;let s=e[i];for(let a of s.open)a.indexOf(r)>=0&&n.push(a);for(let a of s.close)a.indexOf(r)>=0&&n.push(a)}}function yO(r,e){return r.length-e.length}function $v(r){if(r.length<=1)return r;let e=[],t=new Set;for(let n of r)t.has(n)||(e.push(n),t.add(n));return e}function e5(r,e,t,n){let i=[];i=i.concat(r),i=i.concat(e);for(let o=0,s=i.length;o<s;o++)vO(i[o],t,n,i);return i=$v(i),i.sort(yO),i.reverse(),Uu(i)}function t5(r,e,t,n){let i=[];i=i.concat(r),i=i.concat(e);for(let o=0,s=i.length;o<s;o++)vO(i[o],t,n,i);return i=$v(i),i.sort(yO),i.reverse(),Uu(i.map(dk))}function n5(r){let e=[];for(let t of r){for(let n of t.open)e.push(n);for(let n of t.close)e.push(n)}return e=$v(e),Uu(e)}function i5(r){let e=[];for(let t of r){for(let n of t.open)e.push(n);for(let n of t.close)e.push(n)}return e=$v(e),Uu(e.map(dk))}function r5(r){let e=/^[\w ]+$/.test(r);return r=Ni(r),e?`\\b${r}\\b`:r}function Uu(r,e){let t=`(${r.map(r5).join(")|(")})`;return Ub(t,!0,e)}var dk=function(){function r(n){let i=new Uint16Array(n.length),o=0;for(let s=n.length-1;s>=0;s--)i[o++]=n.charCodeAt(s);return jA().decode(i)}let e=null,t=null;return function(i){return e!==i&&(e=i,t=r(e)),t}}(),er=class{static _findPrevBracketInText(e,t,n,i){let o=n.match(e);if(!o)return null;let s=n.length-(o.index||0),a=o[0].length,l=i+s;return new ge(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,n,i,o){let a=dk(n).substring(n.length-o,n.length-i);return this._findPrevBracketInText(e,t,a,i)}static findNextBracketInText(e,t,n,i){let o=n.match(e);if(!o)return null;let s=o.index||0,a=o[0].length;if(a===0)return null;let l=i+s;return new ge(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,n,i,o){let s=n.substring(i,o);return this.findNextBracketInText(e,t,s,i)}};var jv=class{constructor(e,t){this.languageId=e;let n=t.brackets?IO(t.brackets):[],i=new nm(a=>{let l=new Set;return{info:new ck(this,a,l),closing:l}}),o=new nm(a=>{let l=new Set,d=new Set;return{info:new uk(this,a,l,d),opening:l,openingColorized:d}});for(let[a,l]of n){let d=i.get(a),u=o.get(l);d.closing.add(u.info),u.opening.add(d.info)}let s=t.colorizedBracketPairs?IO(t.colorizedBracketPairs):n.filter(a=>!(a[0]==="<"&&a[1]===">"));for(let[a,l]of s){let d=i.get(a),u=o.get(l);d.closing.add(u.info),u.openingColorized.add(d.info),u.opening.add(d.info)}this._openingBrackets=new Map([...i.cachedValues].map(([a,l])=>[a,l.info])),this._closingBrackets=new Map([...o.cachedValues].map(([a,l])=>[a,l.info]))}_openingBrackets;_closingBrackets;get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}getBracketRegExp(e){let t=Array.from([...this._openingBrackets.keys(),...this._closingBrackets.keys()]);return Uu(t,e)}};function IO(r){return r.filter(([e,t])=>e!==""&&t!=="")}var Yv=class{constructor(e,t){this.config=e;this.bracketText=t}get languageId(){return this.config.languageId}},ck=class extends Yv{constructor(t,n,i){super(t,n);this.openedBrackets=i}isOpeningBracket=!0},uk=class extends Yv{constructor(t,n,i,o){super(t,n);this.openingBrackets=i;this.openingColorizedBrackets=o}isOpeningBracket=!1;closes(t){return t.config!==this.config?!1:this.openingBrackets.has(t)}closesColorized(t){return t.config!==this.config?!1:this.openingColorizedBrackets.has(t)}getOpeningBrackets(){return[...this.openingBrackets]}};var Oa=class r{static _nextVisibleColumn(e,t,n){return e===9?r.nextRenderTabStop(t,n):HP(e)||Hb(e)?t+2:t+1}static visibleColumnFromColumn(e,t,n){let i=Math.min(t-1,e.length),o=e.substring(0,i),s=new Ud(o),a=0;for(;!s.eol();){let l=fu(o,i,s.offset);s.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,n)}return a}static toStatusbarColumn(e,t,n){let i=e.substring(0,Math.min(t-1,e.length)),o=new im(i),s=0;for(;!o.eol();)o.nextCodePoint()===9?s=r.nextRenderTabStop(s,n):s=s+1;return s+1}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;let i=e.length,o=new Ud(e),s=0,a=1;for(;!o.eol();){let l=fu(e,i,o.offset);o.nextGraphemeLength();let d=this._nextVisibleColumn(l,s,n),u=o.offset+1;if(d>=t){let p=t-s;return d-t<p?u:a}s=d,a=u}return i+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}};var Vu=class r{constructor(e,t){this.lineCount=e;this.columnCount=t}static zero=new r(0,0);static lengthDiffNonNegative(e,t){return t.isLessThan(e)?r.zero:e.lineCount===t.lineCount?new r(0,t.columnCount-e.columnCount):new r(t.lineCount-e.lineCount,t.columnCount)}static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new r(0,t.column-e.column):new r(t.lineNumber-e.lineNumber,t.column-1)}static ofRange(e){return r.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,n=0;for(let i of e)i===`
`?(t++,n=0):n++;return new r(t,n)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new r(this.lineCount,this.columnCount+e.columnCount):new r(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new ge(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new ge(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new ge(1,1,this.lineCount+1,this.columnCount+1)}addToPosition(e){return this.lineCount===0?new ot(e.lineNumber,e.column+this.columnCount):new ot(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}};function SO(r,e,t,n){return r!==t?$t(t-r,n):$t(0,n-e)}var Xn=0;function Wu(r){return r===0}var Wr=2**26;function $t(r,e){return r*Wr+e}function Wi(r){let e=r,t=Math.floor(e/Wr),n=e-t*Wr;return new Vu(t,n)}function xO(r){return Math.floor(r/Wr)}function Kt(r,e){let t=r+e;return e>=Wr&&(t=t-r%Wr),t}function TO(r,e){return r.reduce((t,n)=>Kt(t,e(n)),Xn)}function pk(r,e){return r===e}function tc(r,e){let t=r,n=e;if(n-t<=0)return Xn;let o=Math.floor(t/Wr),s=Math.floor(n/Wr),a=n-s*Wr;if(o===s){let l=t-o*Wr;return $t(0,a-l)}else return $t(s-o,a)}function Ma(r,e){return r<e}function Nl(r,e){return r<=e}function zu(r,e){return r>=e}function Fl(r){return $t(r.lineNumber-1,r.column-1)}function Bl(r,e){let t=r,n=Math.floor(t/Wr),i=t-n*Wr,o=e,s=Math.floor(o/Wr),a=o-s*Wr;return new ge(n+1,i+1,s+1,a+1)}function EO(r){let e=WP(r);return $t(e.length-1,e[e.length-1].length)}var Xv=[],hi=class r{constructor(e,t){this.items=e;this.additionalItems=t}static cache=new Array(129);static create(e,t){if(e<=128&&t.length===0){let n=r.cache[e];return n||(n=new r(e,t),r.cache[e]=n),n}return new r(e,t)}static empty=r.create(0,Xv);static getEmpty(){return this.empty}add(e,t){let n=t.getKey(e),i=n>>5;if(i===0){let s=1<<n|this.items;return s===this.items?this:r.create(s,this.additionalItems)}i--;let o=this.additionalItems.slice(0);for(;o.length<i;)o.push(0);return o[i]|=1<<(n&31),r.create(this.items,o)}has(e,t){let n=t.getKey(e),i=n>>5;return i===0?(this.items&1<<n)!==0:(i--,((this.additionalItems[i]||0)&1<<(n&31))!==0)}merge(e){let t=this.items|e.items;if(this.additionalItems===Xv&&e.additionalItems===Xv)return t===this.items?this:t===e.items?e:r.create(t,Xv);let n=[];for(let i=0;i<Math.max(this.additionalItems.length,e.additionalItems.length);i++){let o=this.additionalItems[i]||0,s=e.additionalItems[i]||0;n.push(o|s)}return r.create(t,n)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}equals(e){if(this.items!==e.items||this.additionalItems.length!==e.additionalItems.length)return!1;for(let t=0;t<this.additionalItems.length;t++)if(this.additionalItems[t]!==e.additionalItems[t])return!1;return!0}},hk={getKey(r){return r}},Qv=class{items=new Map;getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}reverseLookup(e){return[...this.items].find(([t,n])=>n===e)?.[0]}reverseLookupSet(e){let t=[];for(let[n]of this.items)e.has(n,this)&&t.push(n);return t}keys(){return this.items.keys()}};var Jv=class r{static DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`;static DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;static DEFAULT_AUTOCLOSE_BEFORE_WHITESPACE=` 
	`;_autoClosingPairs;_surroundingPairs;_autoCloseBeforeForQuotes;_autoCloseBeforeForBrackets;constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new Bu(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new Bu({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){let t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new Bu({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:r.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:r.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}};var Zv=class{_richEditBrackets;constructor(e){this._richEditBrackets=e}getElectricCharacters(){let e=[];if(this._richEditBrackets)for(let t of this._richEditBrackets.brackets)for(let n of t.close){let i=n.charAt(n.length-1);e.push(i)}return di(e)}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;let i=t.findTokenIndexAtOffset(n-1);if(Do(t.getStandardTokenType(i)))return null;let o=this._richEditBrackets.reversedRegex,s=t.getLineContent().substring(0,n-1)+e,a=er.findPrevBracketInRange(o,1,s,0,s.length);if(!a)return null;let l=s.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;let u=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(u)?{matchOpenBracket:l}:null}};function ey(r){return r.global&&(r.lastIndex=0),!0}var ty=class{_indentationRules;constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&ey(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&ey(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&ey(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&ey(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}};var ny=class r{_brackets;_regExpRules;constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{let n=r._createOpenBracketRegExp(t[0]),i=r._createCloseBracketRegExp(t[1]);n&&i&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:i})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,i){if(e>=3)for(let o=0,s=this._regExpRules.length;o<s;o++){let a=this._regExpRules[o];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:i},{reg:a.previousLineText,text:t}].every(d=>d.reg?(d.reg.lastIndex=0,d.reg.test(d.text)):!0))return a.action}if(e>=2&&n.length>0&&i.length>0)for(let o=0,s=this._brackets.length;o<s;o++){let a=this._brackets[o];if(a.openRegExp.test(n)&&a.closeRegExp.test(i))return{indentAction:2}}if(e>=2&&n.length>0){for(let o=0,s=this._brackets.length;o<s;o++)if(this._brackets[o].openRegExp.test(n))return{indentAction:1}}return null}static _createOpenBracketRegExp(e){let t=Ni(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",r._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=Ni(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,r._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return Ze(t),null}}};var Xo=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});var o5={ModesRegistry:"editor.modesRegistry"},mk=class{_languages;_onDidChangeLanguages=new x;onDidChangeLanguages=this._onDidChangeLanguages.event;constructor(){this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}},wO=new mk;Ce.add(o5.ModesRegistry,wO);var nc="plaintext",s5=".txt";wO.registerLanguage({id:nc,extensions:[s5],aliases:[c("plainText.alias","Plain Text"),"text"],mimetypes:[Xo.text]});Ce.as(Sr.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);var qm=class{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}},$m=A("languageConfigurationService"),Gm=class extends P{constructor(t,n){super();this.configurationService=t;this.languageService=n;let i=new Set(Object.values(gk));this._register(this.configurationService.onDidChangeConfiguration(o=>{let s=o.change.keys.some(l=>i.has(l)),a=o.change.overrides.filter(([l,d])=>d.some(u=>i.has(u))).map(([l])=>l);if(s)this.configurations.clear(),this.onDidChangeEmitter.fire(new qm(void 0));else for(let l of a)this.languageService.isRegisteredLanguageId(l)&&(this.configurations.delete(l),this.onDidChangeEmitter.fire(new qm(l)))})),this._register(this._registry.onDidChange(o=>{this.configurations.delete(o.languageId),this.onDidChangeEmitter.fire(new qm(o.languageId))}))}_serviceBrand;_registry=this._register(new bk);onDidChangeEmitter=this._register(new x);onDidChange=this.onDidChangeEmitter.event;configurations=new Map;register(t,n,i){return this._registry.register(t,n,i)}getLanguageConfiguration(t){let n=this.configurations.get(t);return n||(n=a5(t,this._registry,this.configurationService,this.languageService),this.configurations.set(t,n)),n}};Gm=C([v(0,ke),v(1,ko)],Gm);function a5(r,e,t,n){let i=e.getLanguageConfiguration(r);if(!i){if(!n.isRegisteredLanguageId(r))return new Hu(r,{});i=new Hu(r,{})}let o=l5(i.languageId,t),s=kO([i.underlyingConfig,o]);return new Hu(i.languageId,s)}var gk={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function l5(r,e){let t=e.getValue(gk.brackets,{overrideIdentifier:r}),n=e.getValue(gk.colorizedBracketPairs,{overrideIdentifier:r});return{brackets:CO(t),colorizedBracketPairs:CO(n)}}function CO(r){if(Array.isArray(r))return r.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}var fk=class{constructor(e){this.languageId=e;this._entries=[],this._order=0,this._resolved=null}_entries;_order;_resolved=null;register(e,t){let n=new iy(e,t,++this._order);return this._entries.push(n),this._resolved=null,ie(()=>{for(let i=0;i<this._entries.length;i++)if(this._entries[i]===n){this._entries.splice(i,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){let e=this._resolve();e&&(this._resolved=new Hu(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(iy.cmp),kO(this._entries.map(e=>e.configuration)))}};function kO(r){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(let t of r)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}var iy=class{constructor(e,t,n){this.configuration=e;this.priority=t;this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}},ry=class{constructor(e){this.languageId=e}},bk=class extends P{_entries=new Map;_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;constructor(){super(),this._register(this.register(nc,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,n=0){let i=this._entries.get(e);i||(i=new fk(e),this._entries.set(e,i));let o=i.register(t,n);return this._onDidChange.fire(new ry(e)),ie(()=>{o.dispose(),this._onDidChange.fire(new ry(e))})}getLanguageConfiguration(e){return this._entries.get(e)?.getResolvedConfiguration()||null}},Hu=class r{constructor(e,t){this.languageId=e;this.underlyingConfig=t;this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new ny(this.underlyingConfig):null,this.comments=r._handleComments(this.underlyingConfig),this.characterPair=new Jv(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||tC,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new ty(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new jv(e,this.underlyingConfig)}_brackets;_electricCharacter;_onEnterSupport;comments;characterPair;wordDefinition;indentRulesSupport;indentationRules;foldingRules;bracketsNew;getWordDefinition(){return Mm(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new qv(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new Zv(this.brackets)),this._electricCharacter}onEnter(e,t,n,i){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,i):null}getAutoClosingPairs(){return new Gv(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){let t=e.comments;if(!t)return null;let n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){let[i,o]=t.blockComment;n.blockCommentStartToken=i,n.blockCommentEndToken=o}return n}};cn($m,Gm,1);var vk=class r{constructor(e){this.map=e}static createFromLanguage(e,t){function n(o){return t.getKey(`${o.languageId}:::${o.bracketText}`)}let i=new Map;for(let o of e.bracketsNew.openingBrackets){let s=$t(0,o.bracketText.length),a=n(o),l=hi.getEmpty().add(a,hk);i.set(o.bracketText,new Qo(s,1,a,l,jm.create(s,o,l)))}for(let o of e.bracketsNew.closingBrackets){let s=$t(0,o.bracketText.length),a=hi.getEmpty(),l=o.getOpeningBrackets();for(let d of l)a=a.add(n(d),hk);i.set(o.bracketText,new Qo(s,2,n(l[0]),a,jm.create(s,o,a)))}return new r(i)}hasRegExp=!1;_regExpGlobal=null;getRegExpStr(){if(this.isEmpty)return null;{let e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>d5(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){let e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(let[t,n]of this.map)if(n.kind===2&&n.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}};function d5(r){let e=Ni(r);return/^[\w ]+/.test(r)&&(e=`\\b${e}`),/[\w ]+$/.test(r)&&(e=`${e}\\b`),e}var oy=class{constructor(e,t){this.denseKeyProvider=e;this.getLanguageConfiguration=t}languageIdToBracketTokens=new Map;didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=vk.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}getToken(e,t){return this.getSingleLanguageBracketTokens(t).getToken(e)}};var Qo=class{constructor(e,t,n,i,o){this.length=e;this.kind=t;this.bracketId=n;this.bracketIds=i;this.astNode=o}},sy=class{constructor(e,t){this.textModel=e;this.bracketTokens=t;this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}textBufferLineCount;textBufferLastLineLength;reader=new yk(this.textModel,this.bracketTokens);_offset=Xn;get offset(){return this._offset}get length(){return $t(this.textBufferLineCount-1,this.textBufferLastLineLength)}getText(){return this.textModel.getValue()}skip(e){this.didPeek=!1,this._offset=Kt(this._offset,e);let t=Wi(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}didPeek=!1;peeked=null;read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=Kt(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}},yk=class{constructor(e,t){this.textModel=e;this.bracketTokens=t;this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}textBufferLineCount;textBufferLastLineLength;lineIdx=0;line=null;lineCharOffset=0;lineTokens=null;lineTokenOffset=0;setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}peekedToken=null;read(){if(this.peekedToken){let o=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=o.length,o}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));let e=this.lineIdx,t=this.lineCharOffset,n=0;for(;;){let o=this.lineTokens,s=o.getCount(),a=null;if(this.lineTokenOffset<s){let l=o.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<s&&l===o.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;let d=Ur.getTokenType(l)===0,u=Ur.containsBalancedBrackets(l),p=o.getEndOffset(this.lineTokenOffset);if(u&&d&&this.lineCharOffset<p){let h=o.getLanguageId(this.lineTokenOffset),m=this.line.substring(this.lineCharOffset,p),f=this.bracketTokens.getSingleLanguageBracketTokens(h),g=f.regExpGlobal;if(g){g.lastIndex=0;let y=g.exec(m);y&&(a=f.getToken(y[0]),a&&(this.lineCharOffset+=y.index))}}if(n+=p-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=p}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}let i=SO(e,t,this.lineIdx,this.lineCharOffset);return new Qo(i,0,-1,hi.getEmpty(),new Jo(i))}},ay=class{constructor(e,t){this.text=e;let n=t.getRegExpStr(),i=n?new RegExp(n+`|
`,"gi"):null,o=[],s,a=0,l=0,d=0,u=0,p=[];for(let f=0;f<60;f++)p.push(new Qo($t(0,f),0,-1,hi.getEmpty(),new Jo($t(0,f))));let h=[];for(let f=0;f<60;f++)h.push(new Qo($t(1,f),0,-1,hi.getEmpty(),new Jo($t(1,f))));if(i)for(i.lastIndex=0;(s=i.exec(e))!==null;){let f=s.index,g=s[0];if(g===`
`)a++,l=f+1;else{if(d!==f){let y;if(u===a){let T=f-d;if(T<p.length)y=p[T];else{let E=$t(0,T);y=new Qo(E,0,-1,hi.getEmpty(),new Jo(E))}}else{let T=a-u,E=f-l;if(T===1&&E<h.length)y=h[E];else{let D=$t(T,E);y=new Qo(D,0,-1,hi.getEmpty(),new Jo(D))}}o.push(y)}o.push(t.getToken(g)),d=f+g.length,u=a}}let m=e.length;if(d!==m){let f=u===a?$t(0,m-d):$t(a-u,m-l);o.push(new Qo(f,0,-1,hi.getEmpty(),new Jo(f)))}this.length=$t(a,m-l),this.tokens=o}_offset=Xn;tokens;idx=0;get offset(){return this._offset}length;read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new lb}getText(){return this.text}};var Ym=class{_length;get length(){return this._length}constructor(e){this._length=e}},Xm=class r extends Ym{constructor(t,n,i,o,s){super(t);this.openingBracket=n;this.child=i;this.closingBracket=o;this.missingOpeningBracketIds=s}static create(t,n,i){let o=t.length;return n&&(o=Kt(o,n.length)),i&&(o=Kt(o,i.length)),new r(o,t,n,i,n?n.missingOpeningBracketIds:hi.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(t){switch(t){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){let t=[];return t.push(this.openingBracket),this.child&&t.push(this.child),this.closingBracket&&t.push(this.closingBracket),t}canBeReused(t){return!(this.closingBracket===null||t.intersects(this.missingOpeningBracketIds))}flattenLists(){return r.create(this.openingBracket.flattenLists(),this.child&&this.child.flattenLists(),this.closingBracket&&this.closingBracket.flattenLists())}deepClone(){return new r(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(t,n){return this.child?this.child.computeMinIndentation(Kt(t,this.openingBracket.length),n):Number.MAX_SAFE_INTEGER}},zr=class r extends Ym{constructor(t,n,i){super(t);this.listHeight=n;this._missingOpeningBracketIds=i}static create23(t,n,i,o=!1){let s=t.length,a=t.missingOpeningBracketIds;if(t.listHeight!==n.listHeight)throw new Error("Invalid list heights");if(s=Kt(s,n.length),a=a.merge(n.missingOpeningBracketIds),i){if(t.listHeight!==i.listHeight)throw new Error("Invalid list heights");s=Kt(s,i.length),a=a.merge(i.missingOpeningBracketIds)}return o?new Ik(s,t.listHeight+1,t,n,i,a):new Qm(s,t.listHeight+1,t,n,i,a)}static create(t,n=!1){if(t.length===0)return this.getEmpty();{let i=t[0].length,o=t[0].missingOpeningBracketIds;for(let s=1;s<t.length;s++)i=Kt(i,t[s].length),o=o.merge(t[s].missingOpeningBracketIds);return n?new ly(i,t[0].listHeight+1,t,o):new Jm(i,t[0].listHeight+1,t,o)}}static getEmpty(){return new ly(Xn,0,[],hi.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}cachedMinIndentation=-1;throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();let t=this.childrenLength;if(t===0)return;let n=this.getChild(t-1),i=n.kind===4?n.toMutable():n;return n!==i&&this.setChild(t-1,i),i}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;let n=this.getChild(0),i=n.kind===4?n.toMutable():n;return n!==i&&this.setChild(0,i),i}canBeReused(t){if(t.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let n=this;for(;n.kind===4;){let i=n.childrenLength;if(i===0)throw new gt;n=n.getChild(i-1)}return n.canBeReused(t)}handleChildrenChanged(){this.throwIfImmutable();let t=this.childrenLength,n=this.getChild(0).length,i=this.getChild(0).missingOpeningBracketIds;for(let o=1;o<t;o++){let s=this.getChild(o);n=Kt(n,s.length),i=i.merge(s.missingOpeningBracketIds)}this._length=n,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}flattenLists(){let t=[];for(let n of this.children){let i=n.flattenLists();i.kind===4?t.push(...i.children):t.push(i)}return r.create(t)}computeMinIndentation(t,n){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let i=Number.MAX_SAFE_INTEGER,o=t;for(let s=0;s<this.childrenLength;s++){let a=this.getChild(s);a&&(i=Math.min(i,a.computeMinIndentation(o,n)),o=Kt(o,a.length))}return this.cachedMinIndentation=i,i}},Qm=class r extends zr{constructor(t,n,i,o,s,a){super(t,n,a);this._item1=i;this._item2=o;this._item3=s}get childrenLength(){return this._item3!==null?3:2}getChild(t){switch(t){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(t,n){switch(t){case 0:this._item1=n;return;case 1:this._item2=n;return;case 2:this._item3=n;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new r(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(t){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=t,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();let t=this._item3;return this._item3=null,this.handleChildrenChanged(),t}prependChildOfSameHeight(t){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=t,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();let t=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),t}toMutable(){return this}},Ik=class extends Qm{toMutable(){return new Qm(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}},Jm=class r extends zr{constructor(t,n,i,o){super(t,n,o);this._children=i}get childrenLength(){return this._children.length}getChild(t){return this._children[t]}setChild(t,n){this._children[t]=n}get children(){return this._children}deepClone(){let t=new Array(this._children.length);for(let n=0;n<this._children.length;n++)t[n]=this._children[n].deepClone();return new r(this.length,this.listHeight,t,this.missingOpeningBracketIds)}appendChildOfSameHeight(t){this.throwIfImmutable(),this._children.push(t),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();let t=this._children.pop();return this.handleChildrenChanged(),t}prependChildOfSameHeight(t){this.throwIfImmutable(),this._children.unshift(t),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();let t=this._children.shift();return this.handleChildrenChanged(),t}toMutable(){return this}},ly=class extends Jm{toMutable(){return new Jm(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}},u5=[],Zm=class extends Ym{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return u5}flattenLists(){return this}deepClone(){return this}},Jo=class extends Zm{get kind(){return 0}get missingOpeningBracketIds(){return hi.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){let n=Wi(e),i=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,o=xO(Kt(e,this.length))+1,s=Number.MAX_SAFE_INTEGER;for(let a=i;a<=o;a++){let l=t.getLineFirstNonWhitespaceColumn(a),d=t.getLineContent(a);if(l===0)continue;let u=Oa.visibleColumnFromColumn(d,l,t.getOptions().tabSize);s=Math.min(s,u)}return s}},jm=class r extends Zm{constructor(t,n,i){super(t);this.bracketInfo=n;this.bracketIds=i}static create(t,n,i){return new r(t,n,i)}get kind(){return 1}get missingOpeningBracketIds(){return hi.getEmpty()}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(t){return!1}computeMinIndentation(t,n){return Number.MAX_SAFE_INTEGER}},dy=class extends Zm{get kind(){return 3}missingOpeningBracketIds;constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}};var eg=class{constructor(e,t,n,i){this.range=e;this.nestingLevel=t;this.nestingLevelOfEqualBracketType=n;this.isInvalid=i}},Sk=class{constructor(e,t,n,i,o,s){this.range=e;this.openingBracketRange=t;this.closingBracketRange=n;this.nestingLevel=i;this.nestingLevelOfEqualBracketType=o;this.bracketPairNode=s}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}get closingBracketInfo(){return this.bracketPairNode.closingBracket?.bracketInfo}},cy=class extends Sk{constructor(t,n,i,o,s,a,l){super(t,n,i,o,s,a);this.minVisibleColumnIndentation=l}};var uy=class{changeType=1},tg=class r{constructor(e,t,n,i,o){this.ownerId=e;this.lineNumber=t;this.column=n;this.options=i;this.order=o}static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",i=0;for(let o of t)n+=e.substring(i,o.column-1),i=o.column-1,n+=o.options.content;return n+=e.substring(i),n}static fromDecorations(e){let t=[];for(let n of e)n.options.before&&n.options.before.content.length>0&&t.push(new r(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new r(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,i)=>n.lineNumber===i.lineNumber?n.column===i.column?n.order-i.order:n.column-i.column:n.lineNumber-i.lineNumber),t}withText(e){return new r(this.ownerId,this.lineNumber,this.column,{...this.options,content:e},this.order)}},ng=class{changeType=2;lineNumber;detail;injectedText;constructor(e,t,n){this.lineNumber=e,this.detail=t,this.injectedText=n}},py=class{changeType=3;fromLineNumber;toLineNumber;constructor(e,t){this.fromLineNumber=e,this.toLineNumber=t}},hy=class{changeType=4;fromLineNumber;toLineNumber;detail;injectedTexts;constructor(e,t,n,i){this.injectedTexts=i,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}},my=class{changeType=5},ic=class r{changes;versionId;isUndoing;isRedoing;resultingSelection;constructor(e,t,n,i){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=i,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){let n=[].concat(e.changes).concat(t.changes),i=t.versionId,o=e.isUndoing||t.isUndoing,s=e.isRedoing||t.isRedoing;return new r(n,i,o,s)}},gy=class{changes;constructor(e){this.changes=e}},fy=class r{constructor(e,t){this.rawContentChangedEvent=e;this.contentChangedEvent=t}merge(e){let t=ic.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=r._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new r(t,n)}static _mergeChangeEvents(e,t){let n=[].concat(e.changes).concat(t.changes),i=t.eol,o=t.versionId,s=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,d=e.isEolChange&&t.isEolChange;return{changes:n,eol:i,isEolChange:d,versionId:o,isUndoing:s,isRedoing:a,isFlush:l}}};var rc=class{constructor(e,t,n,i,o,s){this.visibleColumn=e;this.column=t;this.className=n;this.horizontalLine=i;this.forWrappedLinesAfterColumn=o;this.forWrappedLinesBeforeOrAtColumn=s;if(e!==-1==(t!==-1))throw new Error}},Ku=class{constructor(e,t){this.top=e;this.endColumn=t}};var by=class r{constructor(e){this.edits=e;let t=-1;for(let n of e){if(!(n.replaceRange.start>=t))throw new gt(`Edits must be disjoint and sorted. Found ${n} after ${t}`);t=n.replaceRange.endExclusive}}static empty=new r([]);static fromJson(e){return new r(e.map(Zo.fromJson))}static replace(e,t){return new r([new Zo(e,t)])}static insert(e,t){return r.replace(qt.emptyAt(e),t)}normalize(){let e=[],t;for(let n of this.edits)n.newText.length===0&&n.replaceRange.length===0||(t&&t.replaceRange.endExclusive===n.replaceRange.start?t=new Zo(t.replaceRange.join(n.replaceRange),t.newText+n.newText):(t&&e.push(t),t=n));return t&&e.push(t),new r(e)}toString(){return`[${this.edits.map(t=>t.toString()).join(", ")}]`}apply(e){let t=[],n=0;for(let i of this.edits)t.push(e.substring(n,i.replaceRange.start)),t.push(i.newText),n=i.replaceRange.endExclusive;return t.push(e.substring(n)),t.join("")}compose(e){return p5(this,e)}inverse(e){let t=[],n=0;for(let i of this.edits)t.push(new Zo(qt.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e.substring(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new r(t)}getNewTextRanges(){let e=[],t=0;for(let n of this.edits)e.push(qt.ofStartAndLength(n.replaceRange.start+t,n.newText.length)),t+=n.newText.length-n.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let t=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let s=e.edits[n],a=this.edits[i];if(a)s?a.replaceRange.intersects(s.replaceRange)?i++:a.replaceRange.start<s.replaceRange.start?(t.push(new Zo(a.replaceRange.delta(o),a.newText)),i++):(n++,o+=s.newText.length-s.replaceRange.length):(t.push(new Zo(a.replaceRange.delta(o),a.newText)),i++);else break}return new r(t)}applyToOffset(e){let t=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+t;t+=n.newText.length-n.replaceRange.length}else break;return e+t}applyToOffsetRange(e){return new qt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyInverseToOffset(e){let t=0;for(let n of this.edits){let i=n.newText.length;if(n.replaceRange.start<=e-t){if(e-t<n.replaceRange.start+i)return n.replaceRange.start;t+=i-n.replaceRange.length}else break}return e-t}},Zo=class r{constructor(e,t){this.replaceRange=e;this.newText=t}static fromJson(e){return new r(qt.ofStartAndLength(e.pos,e.len),e.txt)}static insert(e,t){return new r(qt.emptyAt(e),t)}toString(){return`${this.replaceRange} -> "${this.newText}"`}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function p5(r,e){if(r=r.normalize(),e=e.normalize(),r.isEmpty)return e;if(e.isEmpty)return r;let t=[...r.edits],n=[],i=0;for(let o of e.edits){for(;;){let d=t[0];if(!d||d.replaceRange.start+i+d.newText.length>=o.replaceRange.start)break;t.shift(),n.push(d),i+=d.newText.length-d.replaceRange.length}let s=i,a,l;for(;;){let d=t[0];if(!d||d.replaceRange.start+i>o.replaceRange.endExclusive)break;a||(a=d),l=d,t.shift(),i+=d.newText.length-d.replaceRange.length}if(!a)n.push(new Zo(o.replaceRange.delta(-i),o.newText));else{let d="",u=o.replaceRange.start-(a.replaceRange.start+s);u>0&&(d=a.newText.slice(0,u));let p=l.replaceRange.endExclusive+i-o.replaceRange.endExclusive;if(p>0){let f=new Zo(qt.ofStartAndLength(l.replaceRange.endExclusive,0),l.newText.slice(-p));t.unshift(f),i-=f.newText.length-f.replaceRange.length}let h=d+o.newText,m=new qt(Math.min(a.replaceRange.start,o.replaceRange.start-s),o.replaceRange.endExclusive-i);n.push(new Zo(m,h))}}for(;;){let o=t.shift();if(!o)break;n.push(o)}return new by(n).normalize()}var RO=A("undoRedoService");var DO=class r{static _ID=0;id;order;constructor(){this.id=r._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}static None=new r},_O=class r{static _ID=0;id;order;constructor(){this.id=r._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}static None=new r};var Gu=class{_textModelResolvedOptionsBrand=void 0;tabSize;indentSize;_indentSizeIsTabSize;insertSpaces;defaultEOL;trimAutoWhitespace;bracketPairColorizationOptions;get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&ii(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}},Ul=class{_findMatchBrand=void 0;range;matches;constructor(e,t){this.range=e,this.matches=t}};function LO(r){return r&&typeof r.read=="function"}var qu=class{constructor(e,t,n,i,o,s){this.identifier=e;this.range=t;this.text=n;this.forceMoveMarkers=i;this.isAutoWhitespaceEdit=o;this._isTracked=s}},vy=class{regex;wordSeparators;simpleSearch;constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}},yy=class{constructor(e,t,n){this.reverseEdits=e;this.changes=t;this.trimAutoWhitespaceLineNumbers=n}};function PO(r){return r&&typeof r.id=="string"}var dt=A("fileService");function AO(r){return!!(r.capabilities&2048)}var $u=class r extends Error{constructor(t,n){super(t);this.code=n}static create(t,n){let i=new r(t.toString(),n);return g5(i,n),i}};function xk(r,e){return $u.create(r,e)}function g5(r,e){return r.name=e?`${e} (FileSystemError)`:"FileSystemError",r}function f5(r){if(!r)return"Unknown";if(r instanceof $u)return r.code;let e=/^(.+) \(FileSystemError\)$/.exec(r.name);if(!e)return"Unknown";switch(e[1]){case"EntryExists":return"EntryExists";case"EntryIsADirectory":return"EntryIsADirectory";case"EntryNotADirectory":return"EntryNotADirectory";case"EntryNotFound":return"EntryNotFound";case"EntryTooLarge":return"EntryTooLarge";case"EntryWriteLocked":return"EntryWriteLocked";case"NoPermissions":return"NoPermissions";case"Unavailable":return"Unavailable"}return"Unknown"}function xy(r){if(r instanceof es)return r.fileOperationResult;switch(f5(r)){case"EntryNotFound":return 1;case"EntryIsADirectory":return 0;case"EntryNotADirectory":return 9;case"EntryWriteLocked":return 5;case"NoPermissions":return 6;case"EntryExists":return 4;case"EntryTooLarge":return 7;default:return 10}}var es=class extends Error{constructor(t,n,i){super(t);this.fileOperationResult=n;this.options=i}};var Iy=class extends es{constructor(t,n,i){super(t,2,i);this.stat=n}};var ts={OFF:"off",AFTER_DELAY:"afterDelay",ON_FOCUS_CHANGE:"onFocusChange",ON_WINDOW_CHANGE:"onWindowChange"},ju={OFF:"off",ON_EXIT:"onExit",ON_EXIT_AND_WINDOW_CLOSE:"onExitAndWindowClose"};var OO="files.readonlyInclude",MO="files.readonlyExclude";var ig="";var Sy=class r{static KB=1024;static MB=r.KB*r.KB;static GB=r.MB*r.KB;static TB=r.GB*r.KB;static formatSize(e){return fr(e)||(e=0),e<r.KB?c("sizeB","{0}B",e.toFixed(0)):e<r.MB?c("sizeKB","{0}KB",(e/r.KB).toFixed(2)):e<r.GB?c("sizeMB","{0}MB",(e/r.MB).toFixed(2)):e<r.TB?c("sizeGB","{0}GB",(e/r.GB).toFixed(2)):c("sizeTB","{0}TB",(e/r.TB).toFixed(2))}};var b5=A("textModelService");var NO="";var Yu=class extends P{_onWillDispose=this._register(new x);onWillDispose=this._onWillDispose.event;resolved=!1;async resolve(){this.resolved=!0}isResolved(){return this.resolved}isDisposed(){return this._store.isDisposed}dispose(){this._onWillDispose.fire(),super.dispose()}};var oc=A("modelService");var Ty=A("ILanguageDetectionService"),Tk="languageDetection";var Vl=class extends Yu{constructor(t,n,i,o,s){super();this.modelService=t;this.languageService=n;this.languageDetectionService=i;this.accessibilityService=o;s&&this.handleExistingModel(s)}static AUTO_DETECT_LANGUAGE_THROTTLE_DELAY=600;textEditorModelHandle=void 0;createdEditorModel;modelDisposeListener=this._register(new Ut);autoDetectLanguageThrottler=this._register(new El(Vl.AUTO_DETECT_LANGUAGE_THROTTLE_DELAY));handleExistingModel(t){let n=this.modelService.getModel(t);if(!n)throw new Error(`Document with resource ${t.toString(!0)} does not exist`);this.textEditorModelHandle=t,this.registerModelDisposeListener(n)}registerModelDisposeListener(t){this.modelDisposeListener.value=t.onWillDispose(()=>{this.textEditorModelHandle=void 0,this.dispose()})}get textEditorModel(){return this.textEditorModelHandle?this.modelService.getModel(this.textEditorModelHandle):null}isReadonly(){return!0}_hasLanguageSetExplicitly=!1;get hasLanguageSetExplicitly(){return this._hasLanguageSetExplicitly}setLanguageId(t,n){this._hasLanguageSetExplicitly=!0,this.setLanguageIdInternal(t,n)}setLanguageIdInternal(t,n){this.isResolved()&&(!t||t===this.textEditorModel.getLanguageId()||this.textEditorModel.setLanguage(this.languageService.createById(t),n))}installModelListeners(t){let n=this._register(t.onDidChangeLanguage(i=>{i.source!==Tk&&(this._hasLanguageSetExplicitly=!0,n.dispose())}))}getLanguageId(){return this.textEditorModel?.getLanguageId()}autoDetectLanguage(){return this.autoDetectLanguageThrottler.trigger(()=>this.doAutoDetectLanguage())}async doAutoDetectLanguage(){if(this.hasLanguageSetExplicitly||!this.textEditorModelHandle||!this.languageDetectionService.isEnabledForLanguage(this.getLanguageId()??nc))return;let t=await this.languageDetectionService.detectLanguage(this.textEditorModelHandle),n=this.getLanguageId();if(t&&t!==n&&!this.isDisposed()){this.setLanguageIdInternal(t,Tk);let i=this.languageService.getLanguageName(t);this.accessibilityService.alert(c("languageAutoDetected","Language {0} was automatically detected and set as the language mode.",i??t))}}createTextEditorModel(t,n,i){let o=this.getFirstLineText(t),s=this.getOrCreateLanguage(n,this.languageService,i,o);return this.doCreateTextEditorModel(t,s,n)}doCreateTextEditorModel(t,n,i){let o=i&&this.modelService.getModel(i);return o?this.updateTextEditorModel(t,n.languageId):(o=this.modelService.createModel(t,n,i),this.createdEditorModel=!0,this.registerModelDisposeListener(o)),this.textEditorModelHandle=o.uri,o}getFirstLineText(t){let n=t;return typeof n.getFirstLineText=="function"?n.getFirstLineText(1e3):t.getLineContent(1).substr(0,1e3)}getOrCreateLanguage(t,n,i,o){return!i||i===nc?n.createByFilepathOrFirstLine(t??null,o):n.createById(i)}updateTextEditorModel(t,n){this.isResolved()&&(t&&this.modelService.updateModel(this.textEditorModel,t),n&&n!==nc&&this.textEditorModel.getLanguageId()!==n&&this.textEditorModel.setLanguage(this.languageService.createById(n)))}createSnapshot(){return this.textEditorModel?this.textEditorModel.createSnapshot(!0):null}isResolved(){return!!this.textEditorModelHandle}dispose(){this.modelDisposeListener.dispose(),this.textEditorModelHandle&&this.createdEditorModel&&this.modelService.destroyModel(this.textEditorModelHandle),this.textEditorModelHandle=void 0,this.createdEditorModel=!1,super.dispose()}};Vl=C([v(0,oc),v(1,ko),v(2,Ty),v(3,Ps)],Vl);var Ey=A("workingCopyBackupService");var wy=A("textResourceConfigurationService"),Gce=A("textResourcePropertiesService");function v5(r,e,t){let n=0;for(let o=0;o<r.length;o++)r.charAt(o)==="	"?n=Oa.nextIndentTabStop(n,e):n++;let i="";if(!t){let o=Math.floor(n/e);n=n%e;for(let s=0;s<o;s++)i+="	"}for(let o=0;o<n;o++)i+=" ";return i}function Ek(r,e,t){let n=ka(r);return n===-1&&(n=r.length),v5(r.substring(0,n),e,t)+r.substring(n)}var sc=class r{constructor(e,t,n){this.startOffset=e;this.endOffset=t;this.newLength=n}static fromModelContentChanges(e){return e.map(n=>{let i=ge.lift(n.range);return new r(Fl(i.getStartPosition()),Fl(i.getEndPosition()),EO(n.text))}).reverse()}toString(){return`[${Wi(this.startOffset)}...${Wi(this.endOffset)}) -> ${Wi(this.newLength)}`}},Cy=class{nextEditIdx=0;deltaOldToNewLineCount=0;deltaOldToNewColumnCount=0;deltaLineIdxInOld=-1;edits;constructor(e){this.edits=e.map(t=>wk.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);let t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):null;return n===null?null:tc(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?$t(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):$t(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){let t=Wi(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?$t(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):$t(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){let t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(Nl(n,e)){this.nextEditIdx++;let i=Wi(n),o=Wi(this.translateOldToCur(t.endOffsetBeforeObj)),s=i.lineCount-o.lineCount;this.deltaOldToNewLineCount+=s;let a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=i.columnCount-o.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}},wk=class r{static from(e){return new r(e.startOffset,e.endOffset,e.newLength)}endOffsetBeforeObj;endOffsetAfterObj;offsetObj;constructor(e,t,n){this.endOffsetBeforeObj=Wi(t),this.endOffsetAfterObj=Wi(Kt(e,n)),this.offsetObj=Wi(e)}};function UO(r){if(r.length===0)return null;if(r.length===1)return r[0];let e=0;function t(){if(e>=r.length)return null;let s=e,a=r[s].listHeight;for(e++;e<r.length&&r[e].listHeight===a;)e++;return e-s>=2?kk(s===0&&e===r.length?r:r.slice(s,e),!1):r[s]}let n=t(),i=t();if(!i)return n;for(let s=t();s;s=t())FO(n,i)<=FO(i,s)?(n=Ck(n,i),i=s):i=Ck(i,s);return Ck(n,i)}function kk(r,e=!1){if(r.length===0)return null;if(r.length===1)return r[0];let t=r.length;for(;t>3;){let n=t>>1;for(let i=0;i<n;i++){let o=i<<1;r[i]=zr.create23(r[o],r[o+1],o+3===t?r[o+2]:null,e)}t=n}return zr.create23(r[0],r[1],t>=3?r[2]:null,e)}function FO(r,e){return Math.abs(r.listHeight-e.listHeight)}function Ck(r,e){return r.listHeight===e.listHeight?zr.create23(r,e,null,!1):r.listHeight>e.listHeight?y5(r,e):I5(e,r)}function y5(r,e){r=r.toMutable();let t=r,n=[],i;for(;;){if(e.listHeight===t.listHeight){i=e;break}if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let o=n.length-1;o>=0;o--){let s=n[o];i?s.childrenLength>=3?i=zr.create23(s.unappendChild(),i,null,!1):(s.appendChildOfSameHeight(i),i=void 0):s.handleChildrenChanged()}return i?zr.create23(r,i,null,!1):r}function I5(r,e){r=r.toMutable();let t=r,n=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let i=e;for(let o=n.length-1;o>=0;o--){let s=n[o];i?s.childrenLength>=3?i=zr.create23(i,s.unprependChild(),null,!1):(s.prependChildOfSameHeight(i),i=void 0):s.handleChildrenChanged()}return i?zr.create23(i,r,null,!1):r}var ky=class{nextNodes;offsets;idxs;lastOffset=Xn;constructor(e){this.nextNodes=[e],this.offsets=[Xn],this.idxs=[]}readLongestNodeAt(e,t){if(Ma(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){let n=rg(this.nextNodes);if(!n)return;let i=rg(this.offsets);if(Ma(e,i))return;if(Ma(i,e))if(Kt(i,n.length)<=e)this.nextNodeAfterCurrent();else{let o=Dk(n);o!==-1?(this.nextNodes.push(n.getChild(o)),this.offsets.push(i),this.idxs.push(o)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{let o=Dk(n);if(o===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(o)),this.offsets.push(i),this.idxs.push(o)}}}}nextNodeAfterCurrent(){for(;;){let e=rg(this.offsets),t=rg(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;let n=rg(this.nextNodes),i=Dk(n,this.idxs[this.idxs.length-1]);if(i!==-1){this.nextNodes.push(n.getChild(i)),this.offsets.push(Kt(e,t.length)),this.idxs[this.idxs.length-1]=i;break}else this.idxs.pop()}}};function Dk(r,e=-1){for(;;){if(e++,e>=r.childrenLength)return-1;if(r.getChild(e))return e}}function rg(r){return r.length>0?r[r.length-1]:void 0}function Rk(r,e,t,n){return new _k(r,e,t,n).parseDocument()}var _k=class{constructor(e,t,n,i){this.tokenizer=e;this.createImmutableLists=i;if(n&&i)throw new Error("Not supported");this.oldNodeReader=n?new ky(n):void 0,this.positionMapper=new Cy(t)}oldNodeReader;positionMapper;_itemsConstructed=0;_itemsFromCache=0;get nodesConstructed(){return this._itemsConstructed}get nodesReused(){return this._itemsFromCache}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(hi.getEmpty(),0);return e||(e=zr.getEmpty()),e}parseList(e,t){let n=[];for(;;){let o=this.tryReadChildFromCache(e);if(!o){let s=this.tokenizer.peek();if(!s||s.kind===2&&s.bracketIds.intersects(e))break;o=this.parseChild(e,t+1)}o.kind===4&&o.childrenLength===0||n.push(o)}return this.oldNodeReader?UO(n):kk(n,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){let t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!Wu(t)){let n=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),i=>t!==null&&!Ma(i.length,t)?!1:i.canBeReused(e));if(n)return this._itemsFromCache++,this.tokenizer.skip(n.length),n}}}parseChild(e,t){this._itemsConstructed++;let n=this.tokenizer.read();switch(n.kind){case 2:return new dy(n.bracketIds,n.length);case 0:return n.astNode;case 1:{if(t>300)return new Jo(n.length);let i=e.merge(n.bracketIds),o=this.parseList(i,t+1),s=this.tokenizer.peek();return s&&s.kind===2&&(s.bracketId===n.bracketId||s.bracketIds.intersects(n.bracketIds))?(this.tokenizer.read(),Xm.create(n.astNode,o,s.astNode)):Xm.create(n.astNode,o,null)}default:throw new Error("unexpected")}}};function Lk(r,e){if(r.length===0)return e;if(e.length===0)return r;let t=new Pd(VO(r)),n=VO(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=t.dequeue();function o(d){if(d===void 0){let p=t.takeWhile(h=>!0)||[];return i&&p.unshift(i),p}let u=[];for(;i&&!Wu(d);){let[p,h]=i.splitAt(d);u.push(p),d=tc(p.lengthAfter,d),i=h??t.dequeue()}return Wu(d)||u.push(new og(!1,d,d)),u}let s=[];function a(d,u,p){if(s.length>0&&pk(s[s.length-1].endOffset,d)){let h=s[s.length-1];s[s.length-1]=new sc(h.startOffset,u,Kt(h.newLength,p))}else s.push({startOffset:d,endOffset:u,newLength:p})}let l=Xn;for(let d of n){let u=o(d.lengthBefore);if(d.modified){let p=TO(u,m=>m.lengthBefore),h=Kt(l,p);a(l,h,d.lengthAfter),l=h}else for(let p of u){let h=l;l=Kt(l,p.lengthBefore),p.modified&&a(h,l,p.lengthAfter)}}return s}var og=class r{constructor(e,t,n){this.modified=e;this.lengthBefore=t;this.lengthAfter=n}splitAt(e){let t=tc(e,this.lengthAfter);return pk(t,Xn)?[this,void 0]:this.modified?[new r(this.modified,this.lengthBefore,e),new r(this.modified,Xn,t)]:[new r(this.modified,e,e),new r(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${Wi(this.lengthBefore)} -> ${Wi(this.lengthAfter)}`}};function VO(r){let e=[],t=Xn;for(let n of r){let i=tc(t,n.startOffset);Wu(i)||e.push(new og(!1,i,i));let o=tc(n.startOffset,n.endOffset);e.push(new og(!0,o,n.newLength)),t=n.endOffset}return e}var Dy=class extends P{constructor(t,n){super();this.textModel=t;this.getLanguageConfiguration=n;if(t.tokenization.hasTokens)t.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{let i=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),o=new ay(this.textModel.getValue(),i);this.initialAstWithoutTokens=Rk(o,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}didChangeEmitter=new x;initialAstWithoutTokens;astWithTokens;denseKeyProvider=new Qv;brackets=new oy(this.denseKeyProvider,this.getLanguageConfiguration);didLanguageChange(t){return this.brackets.didLanguageChange(t)}onDidChange=this.didChangeEmitter.event;queuedTextEditsForInitialAstWithoutTokens=[];queuedTextEdits=[];handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){let t=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,t||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:t}){let n=t.map(i=>new sc($t(i.fromLineNumber-1,0),$t(i.toLineNumber,0),$t(i.toLineNumber-i.fromLineNumber+1,0)));this.handleEdits(n,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(t){let n=sc.fromModelContentChanges(t.changes);this.handleEdits(n,!1)}handleEdits(t,n){let i=Lk(this.queuedTextEdits,t);this.queuedTextEdits=i,this.initialAstWithoutTokens&&!n&&(this.queuedTextEditsForInitialAstWithoutTokens=Lk(this.queuedTextEditsForInitialAstWithoutTokens,t))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(t,n,i){let s=n,a=new sy(this.textModel,this.brackets);return Rk(a,t,s,i)}getBracketsInRange(t,n){this.flushQueue();let i=$t(t.startLineNumber-1,t.startColumn-1),o=$t(t.endLineNumber-1,t.endColumn-1);return new Sa(s=>{let a=this.initialAstWithoutTokens||this.astWithTokens;Pk(a,Xn,a.length,i,o,s,0,0,new Map,n)})}getBracketPairsInRange(t,n){this.flushQueue();let i=Fl(t.getStartPosition()),o=Fl(t.getEndPosition());return new Sa(s=>{let a=this.initialAstWithoutTokens||this.astWithTokens,l=new Ak(s,n,this.textModel);Ok(a,Xn,a.length,i,o,l,0,new Map)})}getFirstBracketAfter(t){this.flushQueue();let n=this.initialAstWithoutTokens||this.astWithTokens;return HO(n,Xn,n.length,Fl(t))}getFirstBracketBefore(t){this.flushQueue();let n=this.initialAstWithoutTokens||this.astWithTokens;return zO(n,Xn,n.length,Fl(t))}};function zO(r,e,t,n){if(r.kind===4||r.kind===2){let i=[];for(let o of r.children)t=Kt(e,o.length),i.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let o=i.length-1;o>=0;o--){let{nodeOffsetStart:s,nodeOffsetEnd:a}=i[o];if(Ma(s,n)){let l=zO(r.children[o],s,a,n);if(l)return l}}return null}else{if(r.kind===3)return null;if(r.kind===1){let i=Bl(e,t);return{bracketInfo:r.bracketInfo,range:i}}}return null}function HO(r,e,t,n){if(r.kind===4||r.kind===2){for(let i of r.children){if(t=Kt(e,i.length),Ma(n,t)){let o=HO(i,e,t,n);if(o)return o}e=t}return null}else{if(r.kind===3)return null;if(r.kind===1){let i=Bl(e,t);return{bracketInfo:r.bracketInfo,range:i}}}return null}function Pk(r,e,t,n,i,o,s,a,l,d,u=!1){if(s>200)return!0;e:for(;;)switch(r.kind){case 4:{let p=r.childrenLength;for(let h=0;h<p;h++){let m=r.getChild(h);if(m){if(t=Kt(e,m.length),Nl(e,i)&&zu(t,n)){if(zu(t,i)){r=m;continue e}if(!Pk(m,e,t,n,i,o,s,0,l,d))return!1}e=t}}return!0}case 2:{let p=!d||!r.closingBracket||r.closingBracket.bracketInfo.closesColorized(r.openingBracket.bracketInfo),h=0;if(l){let f=l.get(r.openingBracket.text);f===void 0&&(f=0),h=f,p&&(f++,l.set(r.openingBracket.text,f))}let m=r.childrenLength;for(let f=0;f<m;f++){let g=r.getChild(f);if(g){if(t=Kt(e,g.length),Nl(e,i)&&zu(t,n)){if(zu(t,i)&&g.kind!==1){r=g,p?(s++,a=h+1):a=h;continue e}if((p||g.kind!==1||!r.closingBracket)&&!Pk(g,e,t,n,i,o,p?s+1:s,p?h+1:h,l,d,!r.closingBracket))return!1}e=t}}return l?.set(r.openingBracket.text,h),!0}case 3:{let p=Bl(e,t);return o(new eg(p,s-1,0,!0))}case 1:{let p=Bl(e,t);return o(new eg(p,s-1,a-1,u))}case 0:return!0}}var Ak=class{constructor(e,t,n){this.push=e;this.includeMinIndentation=t;this.textModel=n}};function Ok(r,e,t,n,i,o,s,a){if(s>200)return!0;let l=!0;if(r.kind===2){let d=0;if(a){let h=a.get(r.openingBracket.text);h===void 0&&(h=0),d=h,h++,a.set(r.openingBracket.text,h)}let u=Kt(e,r.openingBracket.length),p=-1;if(o.includeMinIndentation&&(p=r.computeMinIndentation(e,o.textModel)),l=o.push(new cy(Bl(e,t),Bl(e,u),r.closingBracket?Bl(Kt(u,r.child?.length||Xn),t):void 0,s,d,r,p)),e=u,l&&r.child){let h=r.child;if(t=Kt(e,h.length),Nl(e,i)&&zu(t,n)&&(l=Ok(h,e,t,n,i,o,s+1,a),!l))return!1}a?.set(r.openingBracket.text,d)}else{let d=e;for(let u of r.children){let p=d;if(d=Kt(d,u.length),Nl(p,i)&&Nl(n,d)&&(l=Ok(u,p,d,n,i,o,s,a),!l))return!1}}return l}var Ry=class extends P{constructor(t,n){super();this.textModel=t;this.languageConfigurationService=n}bracketPairsTree=this._register(new Ut);onDidChangeEmitter=new x;onDidChange=this.onDidChangeEmitter.event;get canBuildAST(){return this.textModel.getValueLength()<=5e6}bracketsRequested=!1;handleLanguageConfigurationServiceChange(t){(!t.languageId||this.bracketPairsTree.value?.object.didLanguageChange(t.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}handleDidChangeOptions(t){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(t){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(t){this.bracketPairsTree.value?.object.handleContentChanged(t)}handleDidChangeBackgroundTokenizationState(){this.bracketPairsTree.value?.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(t){this.bracketPairsTree.value?.object.handleDidChangeTokens(t)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){let t=new Q;this.bracketPairsTree.value=S5(t.add(new Dy(this.textModel,n=>this.languageConfigurationService.getLanguageConfiguration(n))),t),t.add(this.bracketPairsTree.value.object.onDidChange(n=>this.onDidChangeEmitter.fire(n))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(t){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(t,!1)||Sa.empty}getBracketPairsInRangeWithMinIndentation(t){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(t,!0)||Sa.empty}getBracketsInRange(t,n=!1){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketsInRange(t,n)||Sa.empty}findMatchingBracketUp(t,n,i){let o=this.textModel.validatePosition(n),s=this.textModel.getLanguageIdAtPosition(o.lineNumber,o.column);if(this.canBuildAST){let a=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew.getClosingBracketInfo(t);if(!a)return null;let l=this.getBracketPairsInRange(ge.fromPositions(n,n)).findLast(d=>a.closes(d.openingBracketInfo));return l?l.openingBracketRange:null}else{let a=t.toLowerCase(),l=this.languageConfigurationService.getLanguageConfiguration(s).brackets;if(!l)return null;let d=l.textIsBracket[a];return d?_y(this._findMatchingBracketUp(d,o,Mk(i))):null}}matchBracket(t,n){if(this.canBuildAST){let i=this.getBracketPairsInRange(ge.fromPositions(t,t)).filter(o=>o.closingBracketRange!==void 0&&(o.openingBracketRange.containsPosition(t)||o.closingBracketRange.containsPosition(t))).findLastMaxBy(UE(o=>o.openingBracketRange.containsPosition(t)?o.openingBracketRange:o.closingBracketRange,ge.compareRangesUsingStarts));return i?[i.openingBracketRange,i.closingBracketRange]:null}else{let i=Mk(n);return this._matchBracket(this.textModel.validatePosition(t),i)}}_establishBracketSearchOffsets(t,n,i,o){let s=n.getCount(),a=n.getLanguageId(o),l=Math.max(0,t.column-1-i.maxBracketLength);for(let u=o-1;u>=0;u--){let p=n.getEndOffset(u);if(p<=l)break;if(Do(n.getStandardTokenType(u))||n.getLanguageId(u)!==a){l=p;break}}let d=Math.min(n.getLineContent().length,t.column-1+i.maxBracketLength);for(let u=o+1;u<s;u++){let p=n.getStartOffset(u);if(p>=d)break;if(Do(n.getStandardTokenType(u))||n.getLanguageId(u)!==a){d=p;break}}return{searchStartOffset:l,searchEndOffset:d}}_matchBracket(t,n){let i=t.lineNumber,o=this.textModel.tokenization.getLineTokens(i),s=this.textModel.getLineContent(i),a=o.findTokenIndexAtOffset(t.column-1);if(a<0)return null;let l=this.languageConfigurationService.getLanguageConfiguration(o.getLanguageId(a)).brackets;if(l&&!Do(o.getStandardTokenType(a))){let{searchStartOffset:d,searchEndOffset:u}=this._establishBracketSearchOffsets(t,o,l,a),p=null;for(;;){let h=er.findNextBracketInRange(l.forwardRegex,i,s,d,u);if(!h)break;if(h.startColumn<=t.column&&t.column<=h.endColumn){let m=s.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),f=this._matchFoundBracket(h,l.textIsBracket[m],l.textIsOpenBracket[m],n);if(f){if(f instanceof Na)return null;p=f}}d=h.endColumn-1}if(p)return p}if(a>0&&o.getStartOffset(a)===t.column-1){let d=a-1,u=this.languageConfigurationService.getLanguageConfiguration(o.getLanguageId(d)).brackets;if(u&&!Do(o.getStandardTokenType(d))){let{searchStartOffset:p,searchEndOffset:h}=this._establishBracketSearchOffsets(t,o,u,d),m=er.findPrevBracketInRange(u.reversedRegex,i,s,p,h);if(m&&m.startColumn<=t.column&&t.column<=m.endColumn){let f=s.substring(m.startColumn-1,m.endColumn-1).toLowerCase(),g=this._matchFoundBracket(m,u.textIsBracket[f],u.textIsOpenBracket[f],n);if(g)return g instanceof Na?null:g}}}return null}_matchFoundBracket(t,n,i,o){if(!n)return null;let s=i?this._findMatchingBracketDown(n,t.getEndPosition(),o):this._findMatchingBracketUp(n,t.getStartPosition(),o);return s?s instanceof Na?s:[t,s]:null}_findMatchingBracketUp(t,n,i){let o=t.languageId,s=t.reversedRegex,a=-1,l=0,d=(u,p,h,m)=>{for(;;){if(i&&++l%100===0&&!i())return Na.INSTANCE;let f=er.findPrevBracketInRange(s,u,p,h,m);if(!f)break;let g=p.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(t.isOpen(g)?a++:t.isClose(g)&&a--,a===0)return f;m=f.startColumn-1}return null};for(let u=n.lineNumber;u>=1;u--){let p=this.textModel.tokenization.getLineTokens(u),h=p.getCount(),m=this.textModel.getLineContent(u),f=h-1,g=m.length,y=m.length;u===n.lineNumber&&(f=p.findTokenIndexAtOffset(n.column-1),g=n.column-1,y=n.column-1);let T=!0;for(;f>=0;f--){let E=p.getLanguageId(f)===o&&!Do(p.getStandardTokenType(f));if(E)T?g=p.getStartOffset(f):(g=p.getStartOffset(f),y=p.getEndOffset(f));else if(T&&g!==y){let D=d(u,m,g,y);if(D)return D}T=E}if(T&&g!==y){let E=d(u,m,g,y);if(E)return E}}return null}_findMatchingBracketDown(t,n,i){let o=t.languageId,s=t.forwardRegex,a=1,l=0,d=(p,h,m,f)=>{for(;;){if(i&&++l%100===0&&!i())return Na.INSTANCE;let g=er.findNextBracketInRange(s,p,h,m,f);if(!g)break;let y=h.substring(g.startColumn-1,g.endColumn-1).toLowerCase();if(t.isOpen(y)?a++:t.isClose(y)&&a--,a===0)return g;m=g.endColumn-1}return null},u=this.textModel.getLineCount();for(let p=n.lineNumber;p<=u;p++){let h=this.textModel.tokenization.getLineTokens(p),m=h.getCount(),f=this.textModel.getLineContent(p),g=0,y=0,T=0;p===n.lineNumber&&(g=h.findTokenIndexAtOffset(n.column-1),y=n.column-1,T=n.column-1);let E=!0;for(;g<m;g++){let D=h.getLanguageId(g)===o&&!Do(h.getStandardTokenType(g));if(D)E||(y=h.getStartOffset(g)),T=h.getEndOffset(g);else if(E&&y!==T){let _=d(p,f,y,T);if(_)return _}E=D}if(E&&y!==T){let D=d(p,f,y,T);if(D)return D}}return null}findPrevBracket(t){let n=this.textModel.validatePosition(t);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketBefore(n)||null;let i=null,o=null,s=null;for(let a=n.lineNumber;a>=1;a--){let l=this.textModel.tokenization.getLineTokens(a),d=l.getCount(),u=this.textModel.getLineContent(a),p=d-1,h=u.length,m=u.length;if(a===n.lineNumber){p=l.findTokenIndexAtOffset(n.column-1),h=n.column-1,m=n.column-1;let g=l.getLanguageId(p);i!==g&&(i=g,o=this.languageConfigurationService.getLanguageConfiguration(i).brackets,s=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew)}let f=!0;for(;p>=0;p--){let g=l.getLanguageId(p);if(i!==g){if(o&&s&&f&&h!==m){let T=er.findPrevBracketInRange(o.reversedRegex,a,u,h,m);if(T)return this._toFoundBracket(s,T);f=!1}i=g,o=this.languageConfigurationService.getLanguageConfiguration(i).brackets,s=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew}let y=!!o&&!Do(l.getStandardTokenType(p));if(y)f?h=l.getStartOffset(p):(h=l.getStartOffset(p),m=l.getEndOffset(p));else if(s&&o&&f&&h!==m){let T=er.findPrevBracketInRange(o.reversedRegex,a,u,h,m);if(T)return this._toFoundBracket(s,T)}f=y}if(s&&o&&f&&h!==m){let g=er.findPrevBracketInRange(o.reversedRegex,a,u,h,m);if(g)return this._toFoundBracket(s,g)}}return null}findNextBracket(t){let n=this.textModel.validatePosition(t);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketAfter(n)||null;let i=this.textModel.getLineCount(),o=null,s=null,a=null;for(let l=n.lineNumber;l<=i;l++){let d=this.textModel.tokenization.getLineTokens(l),u=d.getCount(),p=this.textModel.getLineContent(l),h=0,m=0,f=0;if(l===n.lineNumber){h=d.findTokenIndexAtOffset(n.column-1),m=n.column-1,f=n.column-1;let y=d.getLanguageId(h);o!==y&&(o=y,s=this.languageConfigurationService.getLanguageConfiguration(o).brackets,a=this.languageConfigurationService.getLanguageConfiguration(o).bracketsNew)}let g=!0;for(;h<u;h++){let y=d.getLanguageId(h);if(o!==y){if(a&&s&&g&&m!==f){let E=er.findNextBracketInRange(s.forwardRegex,l,p,m,f);if(E)return this._toFoundBracket(a,E);g=!1}o=y,s=this.languageConfigurationService.getLanguageConfiguration(o).brackets,a=this.languageConfigurationService.getLanguageConfiguration(o).bracketsNew}let T=!!s&&!Do(d.getStandardTokenType(h));if(T)g||(m=d.getStartOffset(h)),f=d.getEndOffset(h);else if(a&&s&&g&&m!==f){let E=er.findNextBracketInRange(s.forwardRegex,l,p,m,f);if(E)return this._toFoundBracket(a,E)}g=T}if(a&&s&&g&&m!==f){let y=er.findNextBracketInRange(s.forwardRegex,l,p,m,f);if(y)return this._toFoundBracket(a,y)}}return null}findEnclosingBrackets(t,n){let i=this.textModel.validatePosition(t);if(this.canBuildAST){let f=ge.fromPositions(i),g=this.getBracketPairsInRange(ge.fromPositions(i,i)).findLast(y=>y.closingBracketRange!==void 0&&y.range.strictContainsRange(f));return g?[g.openingBracketRange,g.closingBracketRange]:null}let o=Mk(n),s=this.textModel.getLineCount(),a=new Map,l=[],d=(f,g)=>{if(!a.has(f)){let y=[];for(let T=0,E=g?g.brackets.length:0;T<E;T++)y[T]=0;a.set(f,y)}l=a.get(f)},u=0,p=(f,g,y,T,E)=>{for(;;){if(o&&++u%100===0&&!o())return Na.INSTANCE;let D=er.findNextBracketInRange(f.forwardRegex,g,y,T,E);if(!D)break;let _=y.substring(D.startColumn-1,D.endColumn-1).toLowerCase(),O=f.textIsBracket[_];if(O&&(O.isOpen(_)?l[O.index]++:O.isClose(_)&&l[O.index]--,l[O.index]===-1))return this._matchFoundBracket(D,O,!1,o);T=D.endColumn-1}return null},h=null,m=null;for(let f=i.lineNumber;f<=s;f++){let g=this.textModel.tokenization.getLineTokens(f),y=g.getCount(),T=this.textModel.getLineContent(f),E=0,D=0,_=0;if(f===i.lineNumber){E=g.findTokenIndexAtOffset(i.column-1),D=i.column-1,_=i.column-1;let G=g.getLanguageId(E);h!==G&&(h=G,m=this.languageConfigurationService.getLanguageConfiguration(h).brackets,d(h,m))}let O=!0;for(;E<y;E++){let G=g.getLanguageId(E);if(h!==G){if(m&&O&&D!==_){let M=p(m,f,T,D,_);if(M)return _y(M);O=!1}h=G,m=this.languageConfigurationService.getLanguageConfiguration(h).brackets,d(h,m)}let Z=!!m&&!Do(g.getStandardTokenType(E));if(Z)O||(D=g.getStartOffset(E)),_=g.getEndOffset(E);else if(m&&O&&D!==_){let M=p(m,f,T,D,_);if(M)return _y(M)}O=Z}if(m&&O&&D!==_){let G=p(m,f,T,D,_);if(G)return _y(G)}}return null}_toFoundBracket(t,n){if(!n)return null;let i=this.textModel.getValueInRange(n);i=i.toLowerCase();let o=t.getBracketInfo(i);return o?{range:n,bracketInfo:o}:null}};function S5(r,e){return{object:r,dispose:()=>e?.dispose()}}function Mk(r){if(typeof r>"u")return()=>!0;{let e=Date.now();return()=>Date.now()-e<=r}}var Na=class r{static INSTANCE=new r;_searchCanceledBrand=void 0;constructor(){}};function _y(r){return r instanceof Na?null:r}var x5={IconContribution:"base.contributions.icons"},T5;(e=>{function r(t,n){let i=t.defaults;for(;qe.isThemeIcon(i);){let o=Xu.getIcon(i.id);if(!o)return;i=o.defaults}return i}e.getDefinition=r})(T5||={});var E5;(t=>{function r(n){return{weight:n.weight,style:n.style,src:n.src.map(i=>({format:i.format,location:i.location.toString()}))}}t.toJSONObject=r;function e(n){let i=o=>lt(o)?o:void 0;if(n&&Array.isArray(n.src)&&n.src.every(o=>lt(o.format)&&lt(o.location)))return{weight:i(n.weight),style:i(n.style),src:n.src.map(o=>({format:o.format,location:W.parse(o.location)}))}}t.fromJSONObject=e})(E5||={});var Nk=class{_onDidChange=new x;onDidChange=this._onDidChange.event;iconsById;iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:c("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:c("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}};iconReferenceSchema={type:"string",pattern:`^${qe.iconNameExpression}$`,enum:[],enumDescriptions:[]};iconFontsById;constructor(){this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,i){let o=this.iconsById[e];if(o){if(n&&!o.description){o.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;let l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=n),this._onDidChange.fire()}return o}let s={id:e,description:n,defaults:t,deprecationMessage:i};this.iconsById[e]=s;let a={$ref:"#/definitions/icons"};return i&&(a.deprecationMessage=i),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}deregisterIcon(e){delete this.iconsById[e],delete this.iconSchema.properties[e];let t=this.iconReferenceSchema.enum.indexOf(e);t!==-1&&(this.iconReferenceSchema.enum.splice(t,1),this.iconReferenceSchema.enumDescriptions.splice(t,1)),this._onDidChange.fire()}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconReferenceSchema(){return this.iconReferenceSchema}registerIconFont(e,t){let n=this.iconFontsById[e];return n||(this.iconFontsById[e]=t,this._onDidChange.fire(),t)}deregisterIconFont(e){delete this.iconFontsById[e]}getIconFont(e){return this.iconFontsById[e]}toString(){let e=(o,s)=>o.id.localeCompare(s.id),t=o=>{for(;qe.isThemeIcon(o.defaults);)o=this.iconsById[o.defaults.id];return`codicon codicon-${o?o.id:""}`},n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");let i=Object.keys(this.iconsById).map(o=>this.iconsById[o]);for(let o of i.filter(s=>!!s.description).sort(e))n.push(`|<i class="${t(o)}"></i>|${o.id}|${qe.isThemeIcon(o.defaults)?o.defaults.id:o.id}|${o.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(let o of i.filter(s=>!qe.isThemeIcon(s.defaults)).sort(e))n.push(`|<i class="${t(o)}"></i>|${o.id}|`);return n.join(`
`)}},Xu=new Nk;Ce.add(x5.IconContribution,Xu);function Ne(r,e,t,n){return Xu.registerIcon(r,e,t,n)}function w5(){let r=ew();for(let e in r){let t="\\"+r[e].toString(16);Xu.registerIcon(e,{fontCharacter:t})}}w5();var GO="vscode://schemas/icons",qO=Ce.as(As.JSONContribution);qO.registerSchema(GO,Xu.getIconSchema());var KO=new Bn(()=>qO.notifySchemaChanged(GO),200);Xu.onDidChange(()=>{KO.isScheduled()||KO.schedule()});var che=Ne("widget-close",z.close,c("widgetClose","Icon for the close action in widgets.")),uhe=Ne("goto-previous-location",z.arrowUp,c("previousChangeIcon","Icon for goto previous editor location.")),phe=Ne("goto-next-location",z.arrowDown,c("nextChangeIcon","Icon for goto next editor location.")),Fk=qe.modify(z.sync,"spin"),$O=qe.modify(z.loading,"spin");function jO(r){return r==="hcDark"||r==="hcLight"}function Bk(r){return r==="dark"||r==="hcDark"}var _n=A("themeService");var Lhe=z.file,Phe=z.folder;var k5={ThemingContribution:"base.contributions.theming"},Uk=class{themingParticipants=[];onThemingParticipantAddedEmitter;constructor(){this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new x}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),ie(()=>{let t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}get onThemingParticipantAdded(){return this.onThemingParticipantAddedEmitter.event}getThemingParticipants(){return this.themingParticipants}},YO=new Uk;Ce.add(k5.ThemingContribution,YO);function Ly(r){return YO.onColorThemeChange(r)}var Qu=class extends P{constructor(t){super();this.themeService=t;this.theme=t.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(n=>this.onThemeChange(n)))}theme;onThemeChange(t){this.theme=t,this.updateStyles()}updateStyles(){}getColor(t,n){let i=this.theme.getColor(t);return i&&n&&(i=n(i,this.theme)),i?i.toString():null}};function QO(r){return`--vscode-${r.replace(/\./g,"-")}`}function ne(r){return`var(${QO(r)})`}function JO(r,e){return`var(${QO(r)}, ${e})`}function D5(r){return r!==null&&typeof r=="object"&&"light"in r&&"dark"in r}var _5={ColorContribution:"base.contributions.colors"},R5="default",Vk=class{_onDidChangeSchema=new x;onDidChangeSchema=this._onDidChangeSchema.event;colorsById;colorSchema={type:"object",properties:{}};colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]};constructor(){this.colorsById={}}notifyThemeUpdate(e){for(let t of Object.keys(this.colorsById)){let n=e.getColor(t);n&&(this.colorSchema.properties[t].oneOf[0].defaultSnippets[0].body=`\${1:${n.toString()}}`)}this._onDidChangeSchema.fire()}registerColor(e,t,n,i=!1,o){let s={id:e,description:n,defaults:t,needsTransparency:i,deprecationMessage:o};this.colorsById[e]=s;let a={type:"string",format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return o&&(a.deprecationMessage=o),i&&(a.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",a.patternErrorMessage=c("transparecyRequired","This color must be transparent or it will obscure content")),this.colorSchema.properties[e]={description:n,oneOf:[a,{type:"string",const:R5,description:c("useDefault","Use the default color.")}]},this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}deregisterColor(e){delete this.colorsById[e],delete this.colorSchema.properties[e];let t=this.colorReferenceSchema.enum.indexOf(e);t!==-1&&(this.colorReferenceSchema.enum.splice(t,1),this.colorReferenceSchema.enumDescriptions.splice(t,1)),this._onDidChangeSchema.fire()}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){let n=this.colorsById[e];if(n?.defaults){let i=D5(n.defaults)?n.defaults[t.type]:n.defaults;return ns(i,t)}}getColorSchema(){return this.colorSchema}getColorReferenceSchema(){return this.colorReferenceSchema}toString(){let e=(t,n)=>{let i=t.indexOf(".")===-1?0:1,o=n.indexOf(".")===-1?0:1;return i!==o?i-o:t.localeCompare(n)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}},Py=new Vk;Ce.add(_5.ColorContribution,Py);function I(r,e,t,n,i){return Py.registerColor(r,e,t,n,i)}function L5(r,e){switch(r.op){case 0:return ns(r.value,e)?.darken(r.factor);case 1:return ns(r.value,e)?.lighten(r.factor);case 2:return ns(r.value,e)?.transparent(r.factor);case 3:{let t=ns(r.background,e);return t?ns(r.value,e)?.makeOpaque(t):ns(r.value,e)}case 4:for(let t of r.values){let n=ns(t,e);if(n)return n}return;case 6:return ns(e.defines(r.if)?r.then:r.else,e);case 5:{let t=ns(r.value,e);if(!t)return;let n=ns(r.background,e);return n?t.isDarkerThan(n)?B.getLighterColor(t,n,r.factor).transparent(r.transparency):B.getDarkerColor(t,n,r.factor).transparent(r.transparency):t.transparent(r.factor*r.transparency)}default:throw EE(r)}}function zi(r,e){return{op:0,value:r,factor:e}}function tr(r,e){return{op:1,value:r,factor:e}}function ce(r,e){return{op:2,value:r,factor:e}}function Wk(...r){return{op:4,values:r}}function ZO(r,e,t){return{op:6,if:r,then:e,else:t}}function zk(r,e,t,n){return{op:5,value:r,background:e,factor:t,transparency:n}}function ns(r,e){if(r!==null){if(typeof r=="string")return r[0]==="#"?B.fromHex(r):e.getColor(r);if(r instanceof B)return r;if(typeof r=="object")return L5(r,e)}}var eM="vscode://schemas/workbench-colors",tM=Ce.as(As.JSONContribution);tM.registerSchema(eM,Py.getColorSchema());var XO=new Bn(()=>tM.notifySchemaChanged(eM),200);Py.onDidChangeSchema(()=>{XO.isScheduled()||XO.schedule()});var pt=I("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},c("foreground","Overall foreground color. This color is only used if not overridden by a component.")),Yhe=I("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},c("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component.")),Hk=I("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},c("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),Xhe=I("descriptionForeground",{light:"#717171",dark:ce(pt,.7),hcDark:ce(pt,.7),hcLight:ce(pt,.7)},c("descriptionForeground","Foreground color for description text providing additional information, for example for a label.")),sg=I("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},c("iconForeground","The default color for icons in the workbench.")),Hi=I("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},c("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),pe=I("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},c("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),yt=I("contrastActiveBorder",{light:null,dark:null,hcDark:Hi,hcLight:Hi},c("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),Qhe=I("selection.background",null,c("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor.")),Ay=I("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},c("textLinkForeground","Foreground color for links in text.")),Jhe=I("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},c("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),Zhe=I("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:B.black,hcLight:"#292929"},c("textSeparatorForeground","Color for text separators.")),eme=I("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},c("textPreformatForeground","Foreground color for preformatted text segments.")),tme=I("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},c("textPreformatBackground","Background color for preformatted text segments.")),nme=I("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},c("textBlockQuoteBackground","Background color for block quotes in text.")),ime=I("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:B.white,hcLight:"#292929"},c("textBlockQuoteBorder","Border color for block quotes in text.")),rme=I("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:B.black,hcLight:"#F2F2F2"},c("textCodeBlockBackground","Background color for code blocks in text."));var dme=I("sash.hoverBorder",Hi,c("sashActiveBorder","Border color of active sashes.")),Wl=I("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:B.black,hcLight:"#0F4A85"},c("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),Oy=I("badge.foreground",{dark:B.white,light:"#333",hcDark:B.white,hcLight:B.white},c("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),zl=I("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},c("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),My=I("scrollbarSlider.background",{dark:B.fromHex("#797979").transparent(.4),light:B.fromHex("#646464").transparent(.4),hcDark:ce(pe,.6),hcLight:ce(pe,.4)},c("scrollbarSliderBackground","Scrollbar slider background color.")),Ny=I("scrollbarSlider.hoverBackground",{dark:B.fromHex("#646464").transparent(.7),light:B.fromHex("#646464").transparent(.7),hcDark:ce(pe,.8),hcLight:ce(pe,.8)},c("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),Fy=I("scrollbarSlider.activeBackground",{dark:B.fromHex("#BFBFBF").transparent(.4),light:B.fromHex("#000000").transparent(.6),hcDark:pe,hcLight:pe},c("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),nM=I("progressBar.background",{dark:B.fromHex("#0E70C0"),light:B.fromHex("#0E70C0"),hcDark:pe,hcLight:pe},c("progressBarBackground","Background color of the progress bar that can show for long running operations."));var Hr=I("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:B.black,hcLight:B.white},c("editorBackground","Editor background color.")),Hl=I("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:B.white,hcLight:pt},c("editorForeground","Editor default foreground color.")),gme=I("editorStickyScroll.background",Hr,c("editorStickyScrollBackground","Background color of sticky scroll in the editor")),fme=I("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:B.fromHex("#0F4A85").transparent(.1)},c("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor")),bme=I("editorStickyScroll.border",{dark:null,light:null,hcDark:pe,hcLight:pe},c("editorStickyScrollBorder","Border color of sticky scroll in the editor")),vme=I("editorStickyScroll.shadow",zl,c("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor")),mi=I("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:B.white},c("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),Fs=I("editorWidget.foreground",pt,c("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),$k=I("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:pe,hcLight:pe},c("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),yme=I("editorWidget.resizeBorder",null,c("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),Ime=I("editorError.background",null,c("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),lg=I("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},c("editorError.foreground","Foreground color of error squigglies in the editor.")),Sme=I("editorError.border",{dark:null,light:null,hcDark:B.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},c("errorBorder","If set, color of double underlines for errors in the editor.")),dM=I("editorWarning.background",null,c("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Kr=I("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},c("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),tp=I("editorWarning.border",{dark:null,light:null,hcDark:B.fromHex("#FFCC00").transparent(.8),hcLight:B.fromHex("#FFCC00").transparent(.8)},c("warningBorder","If set, color of double underlines for warnings in the editor.")),xme=I("editorInfo.background",null,c("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Ro=I("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},c("editorInfo.foreground","Foreground color of info squigglies in the editor.")),np=I("editorInfo.border",{dark:null,light:null,hcDark:B.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},c("infoBorder","If set, color of double underlines for infos in the editor.")),Tme=I("editorHint.foreground",{dark:B.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},c("editorHint.foreground","Foreground color of hint squigglies in the editor.")),Eme=I("editorHint.border",{dark:null,light:null,hcDark:B.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},c("hintBorder","If set, color of double underlines for hints in the editor.")),wme=I("editorLink.activeForeground",{dark:"#4E94CE",light:B.blue,hcDark:B.cyan,hcLight:"#292929"},c("activeLinkForeground","Color of active links.")),Ju=I("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},c("editorSelectionBackground","Color of the editor selection.")),Cme=I("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:B.white},c("editorSelectionForeground","Color of the selected text for high contrast.")),kme=I("editor.inactiveSelectionBackground",{light:ce(Ju,.5),dark:ce(Ju,.5),hcDark:ce(Ju,.7),hcLight:ce(Ju,.5)},c("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),Dme=I("editor.selectionHighlightBackground",{light:zk(Ju,Hr,.3,.6),dark:zk(Ju,Hr,.3,.6),hcDark:null,hcLight:null},c("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),_me=I("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:yt,hcLight:yt},c("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),Rme=I("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},c("editorFindMatch","Color of the current search match.")),Lme=I("editor.findMatchForeground",null,c("editorFindMatchForeground","Text color of the current search match.")),is=I("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},c("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),Pme=I("editor.findMatchHighlightForeground",null,c("findMatchHighlightForeground","Foreground color of the other search matches."),!0),Ame=I("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},c("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),Ome=I("editor.findMatchBorder",{light:null,dark:null,hcDark:yt,hcLight:yt},c("editorFindMatchBorder","Border color of the current search match.")),Kl=I("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:yt,hcLight:yt},c("findMatchHighlightBorder","Border color of the other search matches.")),Mme=I("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:ce(yt,.4),hcLight:ce(yt,.4)},c("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),Nme=I("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},c("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),iM=I("editorHoverWidget.background",mi,c("hoverBackground","Background color of the editor hover.")),Fme=I("editorHoverWidget.foreground",Fs,c("hoverForeground","Foreground color of the editor hover.")),Bme=I("editorHoverWidget.border",$k,c("hoverBorder","Border color of the editor hover.")),Ume=I("editorHoverWidget.statusBarBackground",{dark:tr(iM,.2),light:zi(iM,.05),hcDark:mi,hcLight:mi},c("statusBarBackground","Background color of the editor hover status bar.")),cM=I("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:B.white,hcLight:B.black},c("editorInlayHintForeground","Foreground color of inline hints")),uM=I("editorInlayHint.background",{dark:ce(Wl,.1),light:ce(Wl,.1),hcDark:ce(B.white,.1),hcLight:ce(Wl,.1)},c("editorInlayHintBackground","Background color of inline hints")),Vme=I("editorInlayHint.typeForeground",cM,c("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),Wme=I("editorInlayHint.typeBackground",uM,c("editorInlayHintBackgroundTypes","Background color of inline hints for types")),zme=I("editorInlayHint.parameterForeground",cM,c("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),Hme=I("editorInlayHint.parameterBackground",uM,c("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),P5=I("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},c("editorLightBulbForeground","The color used for the lightbulb actions icon.")),Kme=I("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},c("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),Gme=I("editorLightBulbAi.foreground",P5,c("editorLightBulbAiForeground","The color used for the lightbulb AI icon.")),qme=I("editor.snippetTabstopHighlightBackground",{dark:new B(new Je(124,124,124,.3)),light:new B(new Je(10,50,100,.2)),hcDark:new B(new Je(124,124,124,.3)),hcLight:new B(new Je(10,50,100,.2))},c("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop.")),$me=I("editor.snippetTabstopHighlightBorder",null,c("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop.")),jme=I("editor.snippetFinalTabstopHighlightBackground",null,c("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet.")),Yme=I("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new B(new Je(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},c("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet.")),rM=new B(new Je(155,185,85,.2)),oM=new B(new Je(255,0,0,.2)),Xme=I("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},c("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),Qme=I("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},c("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),Jme=I("diffEditor.insertedLineBackground",{dark:rM,light:rM,hcDark:null,hcLight:null},c("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),Zme=I("diffEditor.removedLineBackground",{dark:oM,light:oM,hcDark:null,hcLight:null},c("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),ege=I("diffEditorGutter.insertedLineBackground",null,c("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted.")),tge=I("diffEditorGutter.removedLineBackground",null,c("diffEditorRemovedLineGutter","Background color for the margin where lines got removed.")),nge=I("diffEditorOverview.insertedForeground",null,c("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),ige=I("diffEditorOverview.removedForeground",null,c("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content.")),rge=I("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},c("diffEditorInsertedOutline","Outline color for the text that got inserted.")),oge=I("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},c("diffEditorRemovedOutline","Outline color for text that got removed.")),sge=I("diffEditor.border",{dark:null,light:null,hcDark:pe,hcLight:pe},c("diffEditorBorder","Border color between the two text editors.")),age=I("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},c("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),lge=I("diffEditor.unchangedRegionBackground","sideBar.background",c("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor.")),dge=I("diffEditor.unchangedRegionForeground","foreground",c("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor.")),cge=I("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},c("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor.")),ip=I("widget.shadow",{dark:ce(B.black,.36),light:ce(B.black,.16),hcDark:null,hcLight:null},c("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),dg=I("widget.border",{dark:null,light:null,hcDark:pe,hcLight:pe},c("widgetBorder","Border color of widgets such as find/replace inside the editor.")),ag=I("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},c("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse")),uge=I("toolbar.hoverOutline",{dark:null,light:null,hcDark:yt,hcLight:yt},c("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse")),pge=I("toolbar.activeBackground",{dark:tr(ag,.1),light:zi(ag,.1),hcDark:null,hcLight:null},c("toolbarActiveBackground","Toolbar background when holding the mouse over actions")),pM=I("breadcrumb.foreground",ce(pt,.8),c("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),hM=I("breadcrumb.background",Hr,c("breadcrumbsBackground","Background color of breadcrumb items.")),jk=I("breadcrumb.focusForeground",{light:zi(pt,.2),dark:tr(pt,.1),hcDark:tr(pt,.1),hcLight:tr(pt,.1)},c("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),mM=I("breadcrumb.activeSelectionForeground",{light:zi(pt,.2),dark:tr(pt,.1),hcDark:tr(pt,.1),hcLight:tr(pt,.1)},c("breadcrumbsSelectedForeground","Color of selected breadcrumb items.")),hge=I("breadcrumbPicker.background",mi,c("breadcrumbsSelectedBackground","Background color of breadcrumb item picker.")),gM=.5,sM=B.fromHex("#40C8AE").transparent(gM),aM=B.fromHex("#40A6FF").transparent(gM),lM=B.fromHex("#606060").transparent(.4),Yk=.4,Zu=1,Kk=I("merge.currentHeaderBackground",{dark:sM,light:sM,hcDark:null,hcLight:null},c("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),mge=I("merge.currentContentBackground",ce(Kk,Yk),c("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),Gk=I("merge.incomingHeaderBackground",{dark:aM,light:aM,hcDark:null,hcLight:null},c("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),gge=I("merge.incomingContentBackground",ce(Gk,Yk),c("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),qk=I("merge.commonHeaderBackground",{dark:lM,light:lM,hcDark:null,hcLight:null},c("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),fge=I("merge.commonContentBackground",ce(qk,Yk),c("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),ep=I("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},c("mergeBorder","Border color on headers and the splitter in inline merge-conflicts.")),bge=I("editorOverviewRuler.currentContentForeground",{dark:ce(Kk,Zu),light:ce(Kk,Zu),hcDark:ep,hcLight:ep},c("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts.")),vge=I("editorOverviewRuler.incomingContentForeground",{dark:ce(Gk,Zu),light:ce(Gk,Zu),hcDark:ep,hcLight:ep},c("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts.")),yge=I("editorOverviewRuler.commonContentForeground",{dark:ce(qk,Zu),light:ce(qk,Zu),hcDark:ep,hcLight:ep},c("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts.")),Ige=I("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:"#AB5A00"},c("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),Sge=I("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",c("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),fM=I("problemsErrorIcon.foreground",lg,c("problemsErrorIconForeground","The color used for the problems error icon.")),bM=I("problemsWarningIcon.foreground",Kr,c("problemsWarningIconForeground","The color used for the problems warning icon.")),vM=I("problemsInfoIcon.foreground",Ro,c("problemsInfoIconForeground","The color used for the problems info icon."));var yM=I("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},c("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),kge=I("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},c("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),Dge=I("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},c("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),_ge=I("minimap.infoHighlight",{dark:Ro,light:Ro,hcDark:np,hcLight:np},c("minimapInfo","Minimap marker color for infos.")),Rge=I("minimap.warningHighlight",{dark:Kr,light:Kr,hcDark:tp,hcLight:tp},c("overviewRuleWarning","Minimap marker color for warnings.")),Lge=I("minimap.errorHighlight",{dark:new B(new Je(255,18,18,.7)),light:new B(new Je(255,18,18,.7)),hcDark:new B(new Je(255,50,50,1)),hcLight:"#B5200D"},c("minimapError","Minimap marker color for errors.")),Pge=I("minimap.background",null,c("minimapBackground","Minimap background color.")),Age=I("minimap.foregroundOpacity",B.fromHex("#000f"),c("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),Oge=I("minimapSlider.background",ce(My,.5),c("minimapSliderBackground","Minimap slider background color.")),Mge=I("minimapSlider.hoverBackground",ce(Ny,.5),c("minimapSliderHoverBackground","Minimap slider background color when hovering.")),Nge=I("minimapSlider.activeBackground",ce(Fy,.5),c("minimapSliderActiveBackground","Minimap slider background color when clicked on."));var zge=I("charts.foreground",pt,c("chartsForeground","The foreground color used in charts.")),Hge=I("charts.lines",ce(pt,.5),c("chartsLines","The color used for horizontal lines in charts.")),Kge=I("charts.red",lg,c("chartsRed","The red color used in chart visualizations.")),Gge=I("charts.blue",Ro,c("chartsBlue","The blue color used in chart visualizations.")),qge=I("charts.yellow",Kr,c("chartsYellow","The yellow color used in chart visualizations.")),$ge=I("charts.orange",yM,c("chartsOrange","The orange color used in chart visualizations.")),jge=I("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},c("chartsGreen","The green color used in chart visualizations.")),Yge=I("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},c("chartsPurple","The purple color used in chart visualizations."));var IM=I("input.background",{dark:"#3C3C3C",light:B.white,hcDark:B.black,hcLight:B.white},c("inputBoxBackground","Input box background.")),SM=I("input.foreground",pt,c("inputBoxForeground","Input box foreground.")),sp=I("input.border",{dark:null,light:null,hcDark:pe,hcLight:pe},c("inputBoxBorder","Input box border.")),Xk=I("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:pe,hcLight:pe},c("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),A5=I("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},c("inputOption.hoverBackground","Background color of activated options in input fields.")),Qk=I("inputOption.activeBackground",{dark:ce(Hi,.4),light:ce(Hi,.2),hcDark:B.transparent,hcLight:B.transparent},c("inputOption.activeBackground","Background hover color of options in input fields.")),Jk=I("inputOption.activeForeground",{dark:B.white,light:B.black,hcDark:pt,hcLight:pt},c("inputOption.activeForeground","Foreground color of activated options in input fields.")),tfe=I("input.placeholderForeground",{light:ce(pt,.5),dark:ce(pt,.5),hcDark:ce(pt,.7),hcLight:ce(pt,.7)},c("inputPlaceholderForeground","Input box foreground color for placeholder text.")),xM=I("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:B.black,hcLight:B.white},c("inputValidationInfoBackground","Input validation background color for information severity.")),TM=I("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:pt},c("inputValidationInfoForeground","Input validation foreground color for information severity.")),EM=I("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:pe,hcLight:pe},c("inputValidationInfoBorder","Input validation border color for information severity.")),wM=I("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:B.black,hcLight:B.white},c("inputValidationWarningBackground","Input validation background color for warning severity.")),CM=I("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:pt},c("inputValidationWarningForeground","Input validation foreground color for warning severity.")),kM=I("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:pe,hcLight:pe},c("inputValidationWarningBorder","Input validation border color for warning severity.")),DM=I("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:B.black,hcLight:B.white},c("inputValidationErrorBackground","Input validation background color for error severity.")),_M=I("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:pt},c("inputValidationErrorForeground","Input validation foreground color for error severity.")),RM=I("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:pe,hcLight:pe},c("inputValidationErrorBorder","Input validation border color for error severity.")),ap=I("dropdown.background",{dark:"#3C3C3C",light:B.white,hcDark:B.black,hcLight:B.white},c("dropdownBackground","Dropdown background.")),LM=I("dropdown.listBackground",{dark:null,light:null,hcDark:B.black,hcLight:B.white},c("dropdownListBackground","Dropdown list background.")),cg=I("dropdown.foreground",{dark:"#F0F0F0",light:pt,hcDark:B.white,hcLight:pt},c("dropdownForeground","Dropdown foreground.")),ug=I("dropdown.border",{dark:ap,light:"#CECECE",hcDark:pe,hcLight:pe},c("dropdownBorder","Dropdown border.")),Zk=I("button.foreground",B.white,c("buttonForeground","Button foreground color.")),PM=I("button.separator",ce(Zk,.4),c("buttonSeparator","Button separator color.")),rp=I("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},c("buttonBackground","Button background color.")),AM=I("button.hoverBackground",{dark:tr(rp,.2),light:zi(rp,.2),hcDark:rp,hcLight:rp},c("buttonHoverBackground","Button background color when hovering.")),OM=I("button.border",pe,c("buttonBorder","Button border color.")),MM=I("button.secondaryForeground",{dark:B.white,light:B.white,hcDark:B.white,hcLight:pt},c("buttonSecondaryForeground","Secondary button foreground color.")),By=I("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:B.white},c("buttonSecondaryBackground","Secondary button background color.")),NM=I("button.secondaryHoverBackground",{dark:tr(By,.2),light:zi(By,.2),hcDark:null,hcLight:null},c("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),op=I("radio.activeForeground",Jk,c("radioActiveForeground","Foreground color of active radio option.")),FM=I("radio.activeBackground",Qk,c("radioBackground","Background color of active radio option.")),BM=I("radio.activeBorder",Xk,c("radioActiveBorder","Border color of the active radio option.")),UM=I("radio.inactiveForeground",null,c("radioInactiveForeground","Foreground color of inactive radio option.")),VM=I("radio.inactiveBackground",null,c("radioInactiveBackground","Background color of inactive radio option.")),WM=I("radio.inactiveBorder",{light:ce(op,.2),dark:ce(op,.2),hcDark:ce(op,.4),hcLight:ce(op,.2)},c("radioInactiveBorder","Border color of the inactive radio option.")),zM=I("radio.inactiveHoverBackground",A5,c("radioHoverBackground","Background color of inactive active radio option when hovering.")),HM=I("checkbox.background",ap,c("checkbox.background","Background color of checkbox widget.")),nfe=I("checkbox.selectBackground",mi,c("checkbox.select.background","Background color of checkbox widget when the element it's in is selected.")),KM=I("checkbox.foreground",cg,c("checkbox.foreground","Foreground color of checkbox widget.")),GM=I("checkbox.border",ug,c("checkbox.border","Border color of checkbox widget.")),ife=I("checkbox.selectBorder",sg,c("checkbox.select.border","Border color of checkbox widget when the element it's in is selected.")),qM=I("keybindingLabel.background",{dark:new B(new Je(128,128,128,.17)),light:new B(new Je(221,221,221,.4)),hcDark:B.transparent,hcLight:B.transparent},c("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),$M=I("keybindingLabel.foreground",{dark:B.fromHex("#CCCCCC"),light:B.fromHex("#555555"),hcDark:B.white,hcLight:pt},c("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),jM=I("keybindingLabel.border",{dark:new B(new Je(51,51,51,.6)),light:new B(new Je(204,204,204,.4)),hcDark:new B(new Je(111,195,223)),hcLight:pe},c("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),YM=I("keybindingLabel.bottomBorder",{dark:new B(new Je(68,68,68,.6)),light:new B(new Je(187,187,187,.4)),hcDark:new B(new Je(111,195,223)),hcLight:pt},c("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut."));var XM=I("list.focusBackground",null,c("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),QM=I("list.focusForeground",null,c("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),JM=I("list.focusOutline",{dark:Hi,light:Hi,hcDark:yt,hcLight:yt},c("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),ZM=I("list.focusAndSelectionOutline",null,c("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),Tr=I("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:B.fromHex("#0F4A85").transparent(.1)},c("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Bs=I("list.activeSelectionForeground",{dark:B.white,light:B.white,hcDark:null,hcLight:null},c("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Vy=I("list.activeSelectionIconForeground",null,c("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),eN=I("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:B.fromHex("#0F4A85").transparent(.1)},c("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),tN=I("list.inactiveSelectionForeground",null,c("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),nN=I("list.inactiveSelectionIconForeground",null,c("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),iN=I("list.inactiveFocusBackground",null,c("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),rN=I("list.inactiveFocusOutline",null,c("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),eD=I("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:B.white.transparent(.1),hcLight:B.fromHex("#0F4A85").transparent(.1)},c("listHoverBackground","List/Tree background when hovering over items using the mouse.")),tD=I("list.hoverForeground",null,c("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),oN=I("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},c("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),sN=I("list.dropBetweenBackground",{dark:sg,light:sg,hcDark:null,hcLight:null},c("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),Uy=I("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:Hi,hcLight:Hi},c("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),dfe=I("list.focusHighlightForeground",{dark:Uy,light:ZO(Tr,Uy,"#BBE7FF"),hcDark:Uy,hcLight:Uy},c("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree.")),cfe=I("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},c("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer.")),ufe=I("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},c("listErrorForeground","Foreground color of list items containing errors.")),pfe=I("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},c("listWarningForeground","Foreground color of list items containing warnings.")),aN=I("listFilterWidget.background",{light:zi(mi,0),dark:tr(mi,0),hcDark:mi,hcLight:mi},c("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),lN=I("listFilterWidget.outline",{dark:B.transparent,light:B.transparent,hcDark:"#f38518",hcLight:"#007ACC"},c("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),dN=I("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:pe,hcLight:pe},c("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),cN=I("listFilterWidget.shadow",ip,c("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees.")),hfe=I("list.filterMatchBackground",{dark:is,light:is,hcDark:null,hcLight:null},c("listFilterMatchHighlight","Background color of the filtered match.")),mfe=I("list.filterMatchBorder",{dark:Kl,light:Kl,hcDark:pe,hcLight:yt},c("listFilterMatchHighlightBorder","Border color of the filtered match.")),gfe=I("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},c("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized.")),lp=I("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},c("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),uN=I("tree.inactiveIndentGuidesStroke",ce(lp,.4),c("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),pN=I("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},c("tableColumnsBorder","Table border color between columns.")),hN=I("tree.tableOddRowsBackground",{dark:ce(pt,.04),light:ce(pt,.04),hcDark:null,hcLight:null},c("tableOddRowsBackgroundColor","Background color for odd table rows.")),ffe=I("editorActionList.background",mi,c("editorActionListBackground","Action List background color.")),bfe=I("editorActionList.foreground",Fs,c("editorActionListForeground","Action List foreground color.")),vfe=I("editorActionList.focusForeground",Bs,c("editorActionListFocusForeground","Action List foreground color for the focused item.")),yfe=I("editorActionList.focusBackground",Tr,c("editorActionListFocusBackground","Action List background color for the focused item."));var mN=I("menu.border",{dark:null,light:null,hcDark:pe,hcLight:pe},c("menuBorder","Border color of menus.")),gN=I("menu.foreground",cg,c("menuForeground","Foreground color of menu items.")),fN=I("menu.background",ap,c("menuBackground","Background color of menu items.")),bN=I("menu.selectionForeground",Bs,c("menuSelectionForeground","Foreground color of the selected menu item in menus.")),vN=I("menu.selectionBackground",Tr,c("menuSelectionBackground","Background color of the selected menu item in menus.")),yN=I("menu.selectionBorder",{dark:null,light:null,hcDark:yt,hcLight:yt},c("menuSelectionBorder","Border color of the selected menu item in menus.")),IN=I("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:pe,hcLight:pe},c("menuSeparatorBackground","Color of a separator menu item in menus."));var Rfe=I("quickInput.background",mi,c("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),Lfe=I("quickInput.foreground",Fs,c("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),Pfe=I("quickInputTitle.background",{dark:new B(new Je(255,255,255,.105)),light:new B(new Je(0,0,0,.06)),hcDark:"#000000",hcLight:B.white},c("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),xN=I("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:B.white,hcLight:"#0F4A85"},c("pickerGroupForeground","Quick picker color for grouping labels.")),Afe=I("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:B.white,hcLight:"#0F4A85"},c("pickerGroupBorder","Quick picker color for grouping borders.")),SN=I("quickInput.list.focusBackground",null,"",void 0,c("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),TN=I("quickInputList.focusForeground",Bs,c("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),EN=I("quickInputList.focusIconForeground",Vy,c("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),wN=I("quickInputList.focusBackground",{dark:Wk(SN,Tr),light:Wk(SN,Tr),hcDark:null,hcLight:null},c("quickInput.listFocusBackground","Quick picker background color for the focused item."));var Bfe=I("search.resultsInfoForeground",{light:pt,dark:ce(pt,.65),hcDark:pt,hcLight:pt},c("search.resultsInfoForeground","Color of the text in the search viewlet's completion message.")),Ufe=I("searchEditor.findMatchBackground",{light:ce(is,.66),dark:ce(is,.66),hcDark:is,hcLight:is},c("searchEditor.queryMatch","Color of the Search Editor query matches.")),Vfe=I("searchEditor.findMatchBorder",{light:ce(Kl,.66),dark:ce(Kl,.66),hcDark:Kl,hcLight:Kl},c("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));var O5=I("editor.lineHighlightBackground",null,c("lineHighlight","Background color for the highlight of line at the cursor position.")),ibe=I("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:pe},c("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),rbe=I("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},c("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),obe=I("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:yt,hcLight:yt},c("rangeHighlightBorder","Background color of the border around highlighted ranges.")),sbe=I("editor.symbolHighlightBackground",{dark:is,light:is,hcDark:null,hcLight:null},c("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),abe=I("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:yt,hcLight:yt},c("symbolHighlightBorder","Background color of the border around highlighted symbols.")),CN=I("editorCursor.foreground",{dark:"#AEAFAD",light:B.black,hcDark:B.white,hcLight:"#0F4A85"},c("caret","Color of the editor cursor.")),kN=I("editorCursor.background",null,c("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),lbe=I("editorMultiCursor.primary.foreground",CN,c("editorMultiCursorPrimaryForeground","Color of the primary editor cursor when multiple cursors are present.")),dbe=I("editorMultiCursor.primary.background",kN,c("editorMultiCursorPrimaryBackground","The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),cbe=I("editorMultiCursor.secondary.foreground",CN,c("editorMultiCursorSecondaryForeground","Color of secondary editor cursors when multiple cursors are present.")),ube=I("editorMultiCursor.secondary.background",kN,c("editorMultiCursorSecondaryBackground","The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),DN=I("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},c("editorWhitespaces","Color of whitespace characters in the editor.")),pbe=I("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:B.white,hcLight:"#292929"},c("editorLineNumbers","Color of editor line numbers.")),M5=I("editorIndentGuide.background",DN,c("editorIndentGuides","Color of the editor indentation guides."),!1,c("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),N5=I("editorIndentGuide.activeBackground",DN,c("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,c("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),hbe=I("editorIndentGuide.background1",M5,c("editorIndentGuides1","Color of the editor indentation guides (1).")),mbe=I("editorIndentGuide.background2","#00000000",c("editorIndentGuides2","Color of the editor indentation guides (2).")),gbe=I("editorIndentGuide.background3","#00000000",c("editorIndentGuides3","Color of the editor indentation guides (3).")),fbe=I("editorIndentGuide.background4","#00000000",c("editorIndentGuides4","Color of the editor indentation guides (4).")),bbe=I("editorIndentGuide.background5","#00000000",c("editorIndentGuides5","Color of the editor indentation guides (5).")),vbe=I("editorIndentGuide.background6","#00000000",c("editorIndentGuides6","Color of the editor indentation guides (6).")),ybe=I("editorIndentGuide.activeBackground1",N5,c("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),Ibe=I("editorIndentGuide.activeBackground2","#00000000",c("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),Sbe=I("editorIndentGuide.activeBackground3","#00000000",c("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),xbe=I("editorIndentGuide.activeBackground4","#00000000",c("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),Tbe=I("editorIndentGuide.activeBackground5","#00000000",c("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),Ebe=I("editorIndentGuide.activeBackground6","#00000000",c("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),F5=I("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:yt,hcLight:yt},c("editorActiveLineNumber","Color of editor active line number"),!1,c("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),wbe=I("editorLineNumber.activeForeground",F5,c("editorActiveLineNumber","Color of editor active line number")),Cbe=I("editorLineNumber.dimmedForeground",null,c("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed.")),kbe=I("editorRuler.foreground",{dark:"#5A5A5A",light:B.lightgrey,hcDark:B.white,hcLight:"#292929"},c("editorRuler","Color of the editor rulers.")),Dbe=I("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},c("editorCodeLensForeground","Foreground color of editor CodeLens")),_be=I("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},c("editorBracketMatchBackground","Background color behind matching brackets")),Rbe=I("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:pe,hcLight:pe},c("editorBracketMatchBorder","Color for matching brackets boxes")),Lbe=I("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},c("editorOverviewRulerBorder","Color of the overview ruler border.")),Pbe=I("editorOverviewRuler.background",null,c("editorOverviewRulerBackground","Background color of the editor overview ruler.")),Abe=I("editorGutter.background",Hr,c("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),Obe=I("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:B.fromHex("#fff").transparent(.8),hcLight:pe},c("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),Mbe=I("editorUnnecessaryCode.opacity",{dark:B.fromHex("#000a"),light:B.fromHex("#0007"),hcDark:null,hcLight:null},c("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),Nbe=I("editorGhostText.border",{dark:null,light:null,hcDark:B.fromHex("#fff").transparent(.8),hcLight:B.fromHex("#292929").transparent(.8)},c("editorGhostTextBorder","Border color of ghost text in the editor.")),Fbe=I("editorGhostText.foreground",{dark:B.fromHex("#ffffff56"),light:B.fromHex("#0007"),hcDark:null,hcLight:null},c("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),Bbe=I("editorGhostText.background",null,c("editorGhostTextBackground","Background color of the ghost text in the editor.")),B5=new B(new Je(0,122,204,.6)),Ube=I("editorOverviewRuler.rangeHighlightForeground",B5,c("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),Vbe=I("editorOverviewRuler.errorForeground",{dark:new B(new Je(255,18,18,.7)),light:new B(new Je(255,18,18,.7)),hcDark:new B(new Je(255,50,50,1)),hcLight:"#B5200D"},c("overviewRuleError","Overview ruler marker color for errors.")),Wbe=I("editorOverviewRuler.warningForeground",{dark:Kr,light:Kr,hcDark:tp,hcLight:tp},c("overviewRuleWarning","Overview ruler marker color for warnings.")),zbe=I("editorOverviewRuler.infoForeground",{dark:Ro,light:Ro,hcDark:np,hcLight:np},c("overviewRuleInfo","Overview ruler marker color for infos.")),_N=I("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},c("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),RN=I("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},c("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),LN=I("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},c("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),PN=I("editorBracketHighlight.foreground4","#00000000",c("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),AN=I("editorBracketHighlight.foreground5","#00000000",c("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),ON=I("editorBracketHighlight.foreground6","#00000000",c("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),MN=I("editorBracketHighlight.unexpectedBracket.foreground",{dark:new B(new Je(255,18,18,.8)),light:new B(new Je(255,18,18,.8)),hcDark:"new Color(new RGBA(255, 50, 50, 1))",hcLight:"#B5200D"},c("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),Hbe=I("editorBracketPairGuide.background1","#00000000",c("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),Kbe=I("editorBracketPairGuide.background2","#00000000",c("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),Gbe=I("editorBracketPairGuide.background3","#00000000",c("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),qbe=I("editorBracketPairGuide.background4","#00000000",c("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),$be=I("editorBracketPairGuide.background5","#00000000",c("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),jbe=I("editorBracketPairGuide.background6","#00000000",c("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),Ybe=I("editorBracketPairGuide.activeBackground1","#00000000",c("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),Xbe=I("editorBracketPairGuide.activeBackground2","#00000000",c("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),Qbe=I("editorBracketPairGuide.activeBackground3","#00000000",c("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),Jbe=I("editorBracketPairGuide.activeBackground4","#00000000",c("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),Zbe=I("editorBracketPairGuide.activeBackground5","#00000000",c("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),eve=I("editorBracketPairGuide.activeBackground6","#00000000",c("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides.")),tve=I("editorUnicodeHighlight.border",Kr,c("editorUnicodeHighlight.border","Border color used to highlight unicode characters.")),nve=I("editorUnicodeHighlight.background",dM,c("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));Ly((r,e)=>{let t=r.getColor(Hr),n=r.getColor(O5),i=n&&!n.isTransparent()?n:t;i&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${i}; }`)});var Wy=class extends P{constructor(t){super();this.textModel=t;this.colorizationOptions=t.getOptions().bracketPairColorizationOptions,this._register(t.bracketPairs.onDidChange(n=>{this.onDidChangeEmitter.fire()}))}colorizationOptions;colorProvider=new zy;onDidChangeEmitter=new x;onDidChange=this.onDidChangeEmitter.event;handleDidChangeOptions(t){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(t,n,i,o){return o?[]:n===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(t,!0).map(a=>({id:`bracket${a.range.toString()}-${a.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(a,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:a.range})).toArray():[]}getAllDecorations(t,n){return t===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new ge(1,1,this.textModel.getLineCount(),1),t,n):[]}},zy=class{unexpectedClosingBracketClassName="unexpected-closing-bracket";getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}};Ly((r,e)=>{let t=[_N,RN,LN,PN,AN,ON],n=new zy;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${r.getColor(MN)}; }`);let i=t.map(o=>r.getColor(o)).filter(o=>!!o).filter(o=>!o.isTransparent());for(let o=0;o<30;o++){let s=i[o%i.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(o)} { color: ${s}; }`)}});function dp(r){return r.toString()}var Er=class r{constructor(e,t,n,i,o,s,a){this.beforeVersionId=e;this.afterVersionId=t;this.beforeEOL=n;this.afterEOL=i;this.beforeCursorState=o;this.afterCursorState=s;this.changes=a}static create(e,t){let n=e.getAlternativeVersionId(),i=rD(e);return new r(n,n,i,i,t,t,[])}append(e,t,n,i,o){t.length>0&&(this.changes=XA(this.changes,t)),this.afterEOL=n,this.afterVersionId=i,this.afterCursorState=o}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(ni(e,t?t.length:0,n),n+=4,t)for(let i of t)ni(e,i.selectionStartLineNumber,n),n+=4,ni(e,i.selectionStartColumn,n),n+=4,ni(e,i.positionLineNumber,n),n+=4,ni(e,i.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){let i=ti(e,t);t+=4;for(let o=0;o<i;o++){let s=ti(e,t);t+=4;let a=ti(e,t);t+=4;let l=ti(e,t);t+=4;let d=ti(e,t);t+=4,n.push(new Aa(s,a,l,d))}return t}serialize(){let e=10+r._writeSelectionsSize(this.beforeCursorState)+r._writeSelectionsSize(this.afterCursorState)+4;for(let i of this.changes)e+=i.writeSize();let t=new Uint8Array(e),n=0;ni(t,this.beforeVersionId,n),n+=4,ni(t,this.afterVersionId,n),n+=4,lv(t,this.beforeEOL,n),n+=1,lv(t,this.afterEOL,n),n+=1,n=r._writeSelections(t,this.beforeCursorState,n),n=r._writeSelections(t,this.afterCursorState,n),ni(t,this.changes.length,n),n+=4;for(let i of this.changes)n=i.write(t,n);return t.buffer}static deserialize(e){let t=new Uint8Array(e),n=0,i=ti(t,n);n+=4;let o=ti(t,n);n+=4;let s=av(t,n);n+=1;let a=av(t,n);n+=1;let l=[];n=r._readSelections(t,n,l);let d=[];n=r._readSelections(t,n,d);let u=ti(t,n);n+=4;let p=[];for(let h=0;h<u;h++)n=Br.read(t,n,p);return new r(i,o,s,a,l,d,p)}},Hy=class{constructor(e,t,n,i){this.label=e;this.code=t;this.model=n,this._data=Er.create(n,i)}model;_data;get type(){return 0}get resource(){return W.isUri(this.model)?this.model:this.model.uri}toString(){return(this._data instanceof Er?this._data:Er.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(W.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof Er}append(e,t,n,i,o){this._data instanceof Er&&this._data.append(e,t,n,i,o)}close(){this._data instanceof Er&&(this._data=this._data.serialize())}open(){this._data instanceof Er||(this._data=Er.deserialize(this._data))}undo(){if(W.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Er&&(this._data=this._data.serialize());let e=Er.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(W.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Er&&(this._data=this._data.serialize());let e=Er.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof Er&&(this._data=this._data.serialize()),this._data.byteLength+168}},iD=class{constructor(e,t,n){this.label=e;this.code=t;this._isOpen=!0,this._editStackElementsArr=n.slice(0),this._editStackElementsMap=new Map;for(let i of this._editStackElementsArr){let o=dp(i.resource);this._editStackElementsMap.set(o,i)}this._delegate=null}type=1;_isOpen;_editStackElementsArr;_editStackElementsMap;_delegate;get resources(){return this._editStackElementsArr.map(e=>e.resource)}setDelegate(e){this._delegate=e}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}getMissingModels(){let e=[];for(let t of this._editStackElementsArr)W.isUri(t.model)&&e.push(t.model);return e}matchesResource(e){let t=dp(e);return this._editStackElementsMap.has(t)}setModel(e){let t=dp(W.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;let t=dp(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,i,o){let s=dp(e.uri);this._editStackElementsMap.get(s).append(e,t,n,i,o)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(let e of this._editStackElementsArr)e.undo()}redo(){for(let e of this._editStackElementsArr)e.redo()}heapSize(e){let t=dp(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){let e=[];for(let t of this._editStackElementsArr)e.push(`${oo(t.resource)}: ${t}`);return`{${e.join(", ")}}`}};function rD(r){return r.getEOL()===`
`?0:1}function nD(r){return r?r instanceof Hy||r instanceof iD:!1}var Ky=class r{_model;_undoRedoService;constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){let e=this._undoRedoService.getLastElement(this._model.uri);nD(e)&&e.close()}popStackElement(){let e=this._undoRedoService.getLastElement(this._model.uri);nD(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){let n=this._undoRedoService.getLastElement(this._model.uri);if(nD(n)&&n.canAppend(this._model))return n;let i=new Hy(c("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(i,t),i}pushEOL(e){let t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],rD(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n,i){let o=this._getOrCreateEditStackElement(e,i),s=this._model.applyEdits(t,!0),a=r._computeCursorState(n,s),l=s.map((d,u)=>({index:u,textChange:d.textChange}));return l.sort((d,u)=>d.textChange.oldPosition===u.textChange.oldPosition?d.index-u.index:d.textChange.oldPosition-u.textChange.oldPosition),o.append(this._model,l.map(d=>d.textChange),rD(this._model),this._model.getAlternativeVersionId(),a),a}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return Ze(n),null}}};var cp=class extends P{_isDisposed=!1;dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}};function NN(r,e){let t=0,n=0,i=r.length;for(;n<i;){let o=r.charCodeAt(n);if(o===32)t++;else if(o===9)t=t-t%e+e;else break;n++}return n===i?-1:t}var Gy=class extends cp{constructor(t,n){super();this.textModel=t;this.languageConfigurationService=n}getLanguageConfiguration(t){return this.languageConfigurationService.getLanguageConfiguration(t)}_computeIndentLevel(t){return NN(this.textModel.getLineContent(t+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(t,n,i){this.assertNotDisposed();let o=this.textModel.getLineCount();if(t<1||t>o)throw new gt("Illegal value for lineNumber");let s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,a=!!(s&&s.offSide),l=-2,d=-1,u=-2,p=-1,h=M=>{if(l!==-1&&(l===-2||l>M-1)){l=-1,d=-1;for(let H=M-2;H>=0;H--){let oe=this._computeIndentLevel(H);if(oe>=0){l=H,d=oe;break}}}if(u===-2){u=-1,p=-1;for(let H=M;H<o;H++){let oe=this._computeIndentLevel(H);if(oe>=0){u=H,p=oe;break}}}},m=-2,f=-1,g=-2,y=-1,T=M=>{if(m===-2){m=-1,f=-1;for(let H=M-2;H>=0;H--){let oe=this._computeIndentLevel(H);if(oe>=0){m=H,f=oe;break}}}if(g!==-1&&(g===-2||g<M-1)){g=-1,y=-1;for(let H=M;H<o;H++){let oe=this._computeIndentLevel(H);if(oe>=0){g=H,y=oe;break}}}},E=0,D=!0,_=0,O=!0,G=0,Z=0;for(let M=0;D||O;M++){let H=t-M,oe=t+M;M>1&&(H<1||H<n)&&(D=!1),M>1&&(oe>o||oe>i)&&(O=!1),M>5e4&&(D=!1,O=!1);let ee=-1;if(D&&H>=1){let Fe=this._computeIndentLevel(H-1);Fe>=0?(u=H-1,p=Fe,ee=Math.ceil(Fe/this.textModel.getOptions().indentSize)):(h(H),ee=this._getIndentLevelForWhitespaceLine(a,d,p))}let re=-1;if(O&&oe<=o){let Fe=this._computeIndentLevel(oe-1);Fe>=0?(m=oe-1,f=Fe,re=Math.ceil(Fe/this.textModel.getOptions().indentSize)):(T(oe),re=this._getIndentLevelForWhitespaceLine(a,f,y))}if(M===0){Z=ee;continue}if(M===1){if(oe<=o&&re>=0&&Z+1===re){D=!1,E=oe,_=oe,G=re;continue}if(H>=1&&ee>=0&&ee-1===Z){O=!1,E=H,_=H,G=ee;continue}if(E=t,_=t,G=Z,G===0)return{startLineNumber:E,endLineNumber:_,indent:G}}D&&(ee>=G?E=H:D=!1),O&&(re>=G?_=oe:O=!1)}return{startLineNumber:E,endLineNumber:_,indent:G}}getLinesBracketGuides(t,n,i,o){let s=[];for(let h=t;h<=n;h++)s.push([]);let a=!0,l=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new ge(t,1,n,this.textModel.getLineMaxColumn(n))).toArray(),d;if(i&&l.length>0){let h=(t<=i.lineNumber&&i.lineNumber<=n?l:this.textModel.bracketPairs.getBracketPairsInRange(ge.fromPositions(i)).toArray()).filter(m=>ge.strictContainsPosition(m.range,i));d=UL(h,m=>a||m.range.startLineNumber!==m.range.endLineNumber)?.range}let u=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,p=new oD;for(let h of l){if(!h.closingBracketRange)continue;let m=d&&h.range.equalsRange(d);if(!m&&!o.includeInactive)continue;let f=p.getInlineClassName(h.nestingLevel,h.nestingLevelOfEqualBracketType,u)+(o.highlightActive&&m?" "+p.activeClassName:""),g=h.openingBracketRange.getStartPosition(),y=h.closingBracketRange.getStartPosition(),T=o.horizontalGuides===2||o.horizontalGuides===1&&m;if(h.range.startLineNumber===h.range.endLineNumber){a&&T&&s[h.range.startLineNumber-t].push(new rc(-1,h.openingBracketRange.getEndPosition().column,f,new Ku(!1,y.column),-1,-1));continue}let E=this.getVisibleColumnFromPosition(y),D=this.getVisibleColumnFromPosition(h.openingBracketRange.getStartPosition()),_=Math.min(D,E,h.minVisibleColumnIndentation+1),O=!1;ka(this.textModel.getLineContent(h.closingBracketRange.startLineNumber))<h.closingBracketRange.startColumn-1&&(O=!0);let M=Math.max(g.lineNumber,t),H=Math.min(y.lineNumber,n),oe=O?1:0;for(let ee=M;ee<H+oe;ee++)s[ee-t].push(new rc(_,-1,f,null,ee===g.lineNumber?g.column:-1,ee===y.lineNumber?y.column:-1));T&&(g.lineNumber>=t&&D>_&&s[g.lineNumber-t].push(new rc(_,-1,f,new Ku(!1,g.column),-1,-1)),y.lineNumber<=n&&E>_&&s[y.lineNumber-t].push(new rc(_,-1,f,new Ku(!O,y.column),-1,-1)))}for(let h of s)h.sort((m,f)=>m.visibleColumn-f.visibleColumn);return s}getVisibleColumnFromPosition(t){return Oa.visibleColumnFromColumn(this.textModel.getLineContent(t.lineNumber),t.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(t,n){this.assertNotDisposed();let i=this.textModel.getLineCount();if(t<1||t>i)throw new Error("Illegal value for startLineNumber");if(n<1||n>i)throw new Error("Illegal value for endLineNumber");let o=this.textModel.getOptions(),s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,a=!!(s&&s.offSide),l=new Array(n-t+1),d=-2,u=-1,p=-2,h=-1;for(let m=t;m<=n;m++){let f=m-t,g=this._computeIndentLevel(m-1);if(g>=0){d=m-1,u=g,l[f]=Math.ceil(g/o.indentSize);continue}if(d===-2){d=-1,u=-1;for(let y=m-2;y>=0;y--){let T=this._computeIndentLevel(y);if(T>=0){d=y,u=T;break}}}if(p!==-1&&(p===-2||p<m-1)){p=-1,h=-1;for(let y=m;y<i;y++){let T=this._computeIndentLevel(y);if(T>=0){p=y,h=T;break}}}l[f]=this._getIndentLevelForWhitespaceLine(a,u,h)}return l}_getIndentLevelForWhitespaceLine(t,n,i){let o=this.textModel.getOptions();return n===-1||i===-1?0:n<i?1+Math.floor(n/o.indentSize):n===i||t?Math.ceil(i/o.indentSize):1+Math.floor(i/o.indentSize)}},oD=class{activeClassName="indent-active";getInlineClassName(e,t,n){return this.getInlineClassNameOfLevel(n?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}};var sD=class{spacesDiff=0;looksLikeAlignment=!1};function V5(r,e,t,n,i){i.spacesDiff=0,i.looksLikeAlignment=!1;let o;for(o=0;o<e&&o<n;o++){let h=r.charCodeAt(o),m=t.charCodeAt(o);if(h!==m)break}let s=0,a=0;for(let h=o;h<e;h++)r.charCodeAt(h)===32?s++:a++;let l=0,d=0;for(let h=o;h<n;h++)t.charCodeAt(h)===32?l++:d++;if(s>0&&a>0||l>0&&d>0)return;let u=Math.abs(a-d),p=Math.abs(s-l);if(u===0){i.spacesDiff=p,p>0&&0<=l-1&&l-1<r.length&&l<t.length&&t.charCodeAt(l)!==32&&r.charCodeAt(l-1)===32&&r.charCodeAt(r.length-1)===44&&(i.looksLikeAlignment=!0);return}if(p%u===0){i.spacesDiff=p/u;return}}function aD(r,e,t){let n=Math.min(r.getLineCount(),1e4),i=0,o=0,s="",a=0,l=[2,4,6,8,3,5,7],d=8,u=[0,0,0,0,0,0,0,0,0],p=new sD;for(let f=1;f<=n;f++){let g=r.getLineLength(f),y=r.getLineContent(f),T=g<=65536,E=!1,D=0,_=0,O=0;for(let Z=0,M=g;Z<M;Z++){let H=T?y.charCodeAt(Z):r.getLineCharCode(f,Z);if(H===9)O++;else if(H===32)_++;else{E=!0,D=Z;break}}if(!E||(O>0?i++:_>1&&o++,V5(s,a,y,D,p),p.looksLikeAlignment&&!(t&&e===p.spacesDiff)))continue;let G=p.spacesDiff;G<=d&&u[G]++,s=y,a=D}let h=t;i!==o&&(h=i<o);let m=e;if(h){let f=h?0:.1*n;l.forEach(g=>{let y=u[g];y>f&&(f=y,m=g)}),m===4&&u[4]>0&&u[2]>0&&u[2]>=u[4]/2&&(m=2)}return{insertSpaces:h,tabSize:m}}function nr(r){return(r.metadata&1)>>>0}function Ft(r,e){r.metadata=r.metadata&254|e<<0}function oi(r){return(r.metadata&2)>>>1===1}function Nt(r,e){r.metadata=r.metadata&253|(e?1:0)<<1}function KN(r){return(r.metadata&4)>>>2===1}function FN(r,e){r.metadata=r.metadata&251|(e?1:0)<<2}function GN(r){return(r.metadata&64)>>>6===1}function BN(r,e){r.metadata=r.metadata&191|(e?1:0)<<6}function z5(r){return(r.metadata&24)>>>3}function UN(r,e){r.metadata=r.metadata&231|e<<3}function H5(r){return(r.metadata&32)>>>5===1}function VN(r,e){r.metadata=r.metadata&223|(e?1:0)<<5}var mg=class{metadata;parent;left;right;start;end;delta;maxEnd;id;ownerId;options;cachedVersionId;cachedAbsoluteStart;cachedAbsoluteEnd;range;constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,Ft(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,FN(this,!1),BN(this,!1),UN(this,1),VN(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,Nt(this,!1)}reset(e,t,n,i){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=i}setOptions(e){this.options=e;let t=this.options.className;FN(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),BN(this,this.options.glyphMarginClassName!==null),UN(this,this.options.stickiness),VN(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}},Ye=new mg(null,0,0);Ye.parent=Ye;Ye.left=Ye;Ye.right=Ye;Ft(Ye,0);var pp=class{root;requestNormalizeDelta;constructor(){this.root=Ye,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,i,o,s){return this.root===Ye?[]:X5(this,e,t,n,i,o,s)}search(e,t,n,i){return this.root===Ye?[]:WN(this,e,t,n,i)}collectNodesFromOwner(e){return j5(this,e)}collectNodesPostOrder(){return Y5(this)}insert(e){zN(this,e),this._normalizeDeltaIfNecessary()}delete(e){HN(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){let n=e,i=0;for(;e!==this.root;)e===e.parent.right&&(i+=e.parent.delta),e=e.parent;let o=n.start+i,s=n.end+i;n.setCachedOffsets(o,s,t)}acceptReplace(e,t,n,i){let o=q5(this,e,e+t);for(let s=0,a=o.length;s<a;s++){let l=o[s];HN(this,l)}this._normalizeDeltaIfNecessary(),$5(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let s=0,a=o.length;s<a;s++){let l=o[s];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,G5(l,e,e+t,n,i),l.maxEnd=l.end,zN(this,l)}this._normalizeDeltaIfNecessary()}getAllInOrder(){return WN(this,0,!1,0,!1)}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,K5(this))}};function K5(r){let e=r.root,t=0;for(;e!==Ye;){if(e.left!==Ye&&!oi(e.left)){e=e.left;continue}if(e.right!==Ye&&!oi(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,Fa(e),Nt(e,!0),Nt(e.left,!1),Nt(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}Nt(r.root,!1)}function up(r,e,t,n){return r<t?!0:r>t||n===1?!1:n===2?!0:e}function G5(r,e,t,n,i){let o=z5(r),s=o===0||o===2,a=o===1||o===2,l=t-e,d=n,u=Math.min(l,d),p=r.start,h=!1,m=r.end,f=!1;e<=p&&m<=t&&H5(r)&&(r.start=e,h=!0,r.end=e,f=!0);{let y=i?1:l>0?2:0;!h&&up(p,s,e,y)&&(h=!0),!f&&up(m,a,e,y)&&(f=!0)}if(u>0&&!i){let y=l>d?2:0;!h&&up(p,s,e+u,y)&&(h=!0),!f&&up(m,a,e+u,y)&&(f=!0)}{let y=i?1:0;!h&&up(p,s,t,y)&&(r.start=e+d,h=!0),!f&&up(m,a,t,y)&&(r.end=e+d,f=!0)}let g=d-l;h||(r.start=Math.max(0,p+g)),f||(r.end=Math.max(0,m+g)),r.start>r.end&&(r.end=r.start)}function q5(r,e,t){let n=r.root,i=0,o=0,s=0,a=0,l=[],d=0;for(;n!==Ye;){if(oi(n)){Nt(n.left,!1),Nt(n.right,!1),n===n.parent.right&&(i-=n.parent.delta),n=n.parent;continue}if(!oi(n.left)){if(o=i+n.maxEnd,o<e){Nt(n,!0);continue}if(n.left!==Ye){n=n.left;continue}}if(s=i+n.start,s>t){Nt(n,!0);continue}if(a=i+n.end,a>=e&&(n.setCachedOffsets(s,a,0),l[d++]=n),Nt(n,!0),n.right!==Ye&&!oi(n.right)){i+=n.delta,n=n.right;continue}}return Nt(r.root,!1),l}function $5(r,e,t,n){let i=r.root,o=0,s=0,a=0,l=n-(t-e);for(;i!==Ye;){if(oi(i)){Nt(i.left,!1),Nt(i.right,!1),i===i.parent.right&&(o-=i.parent.delta),Fa(i),i=i.parent;continue}if(!oi(i.left)){if(s=o+i.maxEnd,s<e){Nt(i,!0);continue}if(i.left!==Ye){i=i.left;continue}}if(a=o+i.start,a>t){i.start+=l,i.end+=l,i.delta+=l,(i.delta<-1073741824||i.delta>1073741824)&&(r.requestNormalizeDelta=!0),Nt(i,!0);continue}if(Nt(i,!0),i.right!==Ye&&!oi(i.right)){o+=i.delta,i=i.right;continue}}Nt(r.root,!1)}function j5(r,e){let t=r.root,n=[],i=0;for(;t!==Ye;){if(oi(t)){Nt(t.left,!1),Nt(t.right,!1),t=t.parent;continue}if(t.left!==Ye&&!oi(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[i++]=t),Nt(t,!0),t.right!==Ye&&!oi(t.right)){t=t.right;continue}}return Nt(r.root,!1),n}function Y5(r){let e=r.root,t=[],n=0;for(;e!==Ye;){if(oi(e)){Nt(e.left,!1),Nt(e.right,!1),e=e.parent;continue}if(e.left!==Ye&&!oi(e.left)){e=e.left;continue}if(e.right!==Ye&&!oi(e.right)){e=e.right;continue}t[n++]=e,Nt(e,!0)}return Nt(r.root,!1),t}function WN(r,e,t,n,i){let o=r.root,s=0,a=0,l=0,d=[],u=0;for(;o!==Ye;){if(oi(o)){Nt(o.left,!1),Nt(o.right,!1),o===o.parent.right&&(s-=o.parent.delta),o=o.parent;continue}if(o.left!==Ye&&!oi(o.left)){o=o.left;continue}a=s+o.start,l=s+o.end,o.setCachedOffsets(a,l,n);let p=!0;if(e&&o.ownerId&&o.ownerId!==e&&(p=!1),t&&KN(o)&&(p=!1),i&&!GN(o)&&(p=!1),p&&(d[u++]=o),Nt(o,!0),o.right!==Ye&&!oi(o.right)){s+=o.delta,o=o.right;continue}}return Nt(r.root,!1),d}function X5(r,e,t,n,i,o,s){let a=r.root,l=0,d=0,u=0,p=0,h=[],m=0;for(;a!==Ye;){if(oi(a)){Nt(a.left,!1),Nt(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;continue}if(!oi(a.left)){if(d=l+a.maxEnd,d<e){Nt(a,!0);continue}if(a.left!==Ye){a=a.left;continue}}if(u=l+a.start,u>t){Nt(a,!0);continue}if(p=l+a.end,p>=e){a.setCachedOffsets(u,p,o);let f=!0;n&&a.ownerId&&a.ownerId!==n&&(f=!1),i&&KN(a)&&(f=!1),s&&!GN(a)&&(f=!1),f&&(h[m++]=a)}if(Nt(a,!0),a.right!==Ye&&!oi(a.right)){l+=a.delta,a=a.right;continue}}return Nt(r.root,!1),h}function zN(r,e){if(r.root===Ye)return e.parent=Ye,e.left=Ye,e.right=Ye,Ft(e,0),r.root=e,r.root;Q5(r,e),Gl(e.parent);let t=e;for(;t!==r.root&&nr(t.parent)===1;)if(t.parent===t.parent.parent.left){let n=t.parent.parent.right;nr(n)===1?(Ft(t.parent,0),Ft(n,0),Ft(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,pg(r,t)),Ft(t.parent,0),Ft(t.parent.parent,1),hg(r,t.parent.parent))}else{let n=t.parent.parent.left;nr(n)===1?(Ft(t.parent,0),Ft(n,0),Ft(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,hg(r,t)),Ft(t.parent,0),Ft(t.parent.parent,1),pg(r,t.parent.parent))}return Ft(r.root,0),e}function Q5(r,e){let t=0,n=r.root,i=e.start,o=e.end;for(;;)if(Z5(i,o,n.start+t,n.end+t)<0)if(n.left===Ye){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===Ye){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=Ye,e.right=Ye,Ft(e,1)}function HN(r,e){let t,n;if(e.left===Ye?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===Ye?(t=e.left,n=e):(n=J5(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(r.requestNormalizeDelta=!0)),n===r.root){r.root=t,Ft(t,0),e.detach(),lD(),Fa(t),r.root.parent=Ye;return}let i=nr(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,Ft(n,nr(e)),e===r.root?r.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==Ye&&(n.left.parent=n),n.right!==Ye&&(n.right.parent=n)),e.detach(),i){Gl(t.parent),n!==e&&(Gl(n),Gl(n.parent)),lD();return}Gl(t),Gl(t.parent),n!==e&&(Gl(n),Gl(n.parent));let o;for(;t!==r.root&&nr(t)===0;)t===t.parent.left?(o=t.parent.right,nr(o)===1&&(Ft(o,0),Ft(t.parent,1),pg(r,t.parent),o=t.parent.right),nr(o.left)===0&&nr(o.right)===0?(Ft(o,1),t=t.parent):(nr(o.right)===0&&(Ft(o.left,0),Ft(o,1),hg(r,o),o=t.parent.right),Ft(o,nr(t.parent)),Ft(t.parent,0),Ft(o.right,0),pg(r,t.parent),t=r.root)):(o=t.parent.left,nr(o)===1&&(Ft(o,0),Ft(t.parent,1),hg(r,t.parent),o=t.parent.left),nr(o.left)===0&&nr(o.right)===0?(Ft(o,1),t=t.parent):(nr(o.left)===0&&(Ft(o.right,0),Ft(o,1),pg(r,o),o=t.parent.left),Ft(o,nr(t.parent)),Ft(t.parent,0),Ft(o.left,0),hg(r,t.parent),t=r.root));Ft(t,0),lD()}function J5(r){for(;r.left!==Ye;)r=r.left;return r}function lD(){Ye.parent=Ye,Ye.delta=0,Ye.start=0,Ye.end=0}function pg(r,e){let t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==Ye&&(t.left.parent=e),t.parent=e.parent,e.parent===Ye?r.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,Fa(e),Fa(t)}function hg(r,e){let t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(r.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==Ye&&(t.right.parent=e),t.parent=e.parent,e.parent===Ye?r.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,Fa(e),Fa(t)}function qN(r){let e=r.end;if(r.left!==Ye){let t=r.left.maxEnd;t>e&&(e=t)}if(r.right!==Ye){let t=r.right.maxEnd+r.delta;t>e&&(e=t)}return e}function Fa(r){r.maxEnd=qN(r)}function Gl(r){for(;r!==Ye;){let e=qN(r);if(r.maxEnd===e)return;r.maxEnd=e,r=r.parent}}function Z5(r,e,t,n){return r===t?e-n:r-t}var hp=class{parent;left;right;color;piece;size_left;lf_left;constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==Oe)return qy(this.right);let e=this;for(;e.parent!==Oe&&e.parent.left!==e;)e=e.parent;return e.parent===Oe?Oe:e.parent}prev(){if(this.left!==Oe)return cD(this.left);let e=this;for(;e.parent!==Oe&&e.parent.right!==e;)e=e.parent;return e.parent===Oe?Oe:e.parent}detach(){this.parent=null,this.left=null,this.right=null}};var Oe=new hp(null,0);Oe.parent=Oe;Oe.left=Oe;Oe.right=Oe;Oe.color=0;function qy(r){for(;r.left!==Oe;)r=r.left;return r}function cD(r){for(;r.right!==Oe;)r=r.right;return r}function uD(r){return r===Oe?0:r.size_left+r.piece.length+uD(r.right)}function pD(r){return r===Oe?0:r.lf_left+r.piece.lineFeedCnt+pD(r.right)}function dD(){Oe.parent=Oe}function fg(r,e){let t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==Oe&&(t.left.parent=e),t.parent=e.parent,e.parent===Oe?r.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function bg(r,e){let t=e.left;e.left=t.right,t.right!==Oe&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===Oe?r.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function vg(r,e){let t,n;if(e.left===Oe?(n=e,t=n.right):e.right===Oe?(n=e,t=n.left):(n=qy(e.right),t=n.right),n===r.root){r.root=t,t.color=0,e.detach(),dD(),r.root.parent=Oe;return}let i=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,gg(r,t)):(n.parent===e?t.parent=n:t.parent=n.parent,gg(r,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===r.root?r.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==Oe&&(n.left.parent=n),n.right!==Oe&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,gg(r,n)),e.detach(),t.parent.left===t){let s=uD(t),a=pD(t);if(s!==t.parent.size_left||a!==t.parent.lf_left){let l=s-t.parent.size_left,d=a-t.parent.lf_left;t.parent.size_left=s,t.parent.lf_left=a,Us(r,t.parent,l,d)}}if(gg(r,t.parent),i){dD();return}let o;for(;t!==r.root&&t.color===0;)t===t.parent.left?(o=t.parent.right,o.color===1&&(o.color=0,t.parent.color=1,fg(r,t.parent),o=t.parent.right),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.right.color===0&&(o.left.color=0,o.color=1,bg(r,o),o=t.parent.right),o.color=t.parent.color,t.parent.color=0,o.right.color=0,fg(r,t.parent),t=r.root)):(o=t.parent.left,o.color===1&&(o.color=0,t.parent.color=1,bg(r,t.parent),o=t.parent.left),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.left.color===0&&(o.right.color=0,o.color=1,fg(r,o),o=t.parent.left),o.color=t.parent.color,t.parent.color=0,o.left.color=0,bg(r,t.parent),t=r.root));t.color=0,dD()}function hD(r,e){for(gg(r,e);e!==r.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){let t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,fg(r,e)),e.parent.color=0,e.parent.parent.color=1,bg(r,e.parent.parent))}else{let t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,bg(r,e)),e.parent.color=0,e.parent.parent.color=1,fg(r,e.parent.parent))}r.root.color=0}function Us(r,e,t,n){for(;e!==r.root&&e!==Oe;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}function gg(r,e){let t=0,n=0;if(e!==r.root){for(;e!==r.root&&e===e.parent.right;)e=e.parent;if(e!==r.root)for(e=e.parent,t=uD(e.left)-e.size_left,n=pD(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==r.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}var eH=999,Ba=class{searchString;isRegex;matchCase;wordSeparators;constructor(e,t,n,i){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=i}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=tH(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=Ub(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new vy(t,this.wordSeparators?JA(this.wordSeparators,[]):null,n?this.searchString:null)}};function tH(r){if(!r||r.length===0)return!1;for(let e=0,t=r.length;e<t;e++){let n=r.charCodeAt(e);if(n===10)return!0;if(n===92){if(e++,e>=t)break;let i=r.charCodeAt(e);if(i===110||i===114||i===87)return!0}}return!1}function ql(r,e,t){if(!t)return new Ul(r,null);let n=[];for(let i=0,o=e.length;i<o;i++)n[i]=e[i];return new Ul(r,n)}var $y=class{_lineFeedsOffsets;constructor(e){let t=[],n=0;for(let i=0,o=e.length;i<o;i++)e.charCodeAt(i)===10&&(t[n++]=i);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){let t=this._lineFeedsOffsets,n=0,i=t.length-1;if(i===-1||e<=t[0])return 0;for(;n<i;){let o=n+((i-n)/2>>0);t[o]>=e?i=o-1:t[o+1]>=e?(n=o,i=o):n=o+1}return n+1}},ac=class{static findMatches(e,t,n,i,o){let s=t.parseSearchRequest();return s?s.regex.multiline?this._doFindMatchesMultiline(e,n,new $l(s.wordSeparators,s.regex),i,o):this._doFindMatchesLineByLine(e,n,s,i,o):[]}static _getMultilineMatchRange(e,t,n,i,o,s){let a,l=0;i?(l=i.findLineFeedCountBeforeOffset(o),a=t+o+l):a=t+o;let d;if(i){let m=i.findLineFeedCountBeforeOffset(o+s.length)-l;d=a+s.length+m}else d=a+s.length;let u=e.getPositionAt(a),p=e.getPositionAt(d);return new ge(u.lineNumber,u.column,p.lineNumber,p.column)}static _doFindMatchesMultiline(e,t,n,i,o){let s=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new $y(a):null,d=[],u=0,p;for(n.reset(0);p=n.next(a);)if(d[u++]=ql(this._getMultilineMatchRange(e,s,a,l,p.index,p[0]),p,i),u>=o)return d;return d}static _doFindMatchesLineByLine(e,t,n,i,o){let s=[],a=0;if(t.startLineNumber===t.endLineNumber){let d=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,d,t.startLineNumber,t.startColumn-1,a,s,i,o),s}let l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,s,i,o);for(let d=t.startLineNumber+1;d<t.endLineNumber&&a<o;d++)a=this._findMatchesInLine(n,e.getLineContent(d),d,0,a,s,i,o);if(a<o){let d=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,d,t.endLineNumber,0,a,s,i,o)}return s}static _findMatchesInLine(e,t,n,i,o,s,a,l){let d=e.wordSeparators;if(!a&&e.simpleSearch){let h=e.simpleSearch,m=h.length,f=t.length,g=-m;for(;(g=t.indexOf(h,g+m))!==-1;)if((!d||jy(d,t,f,g,m))&&(s[o++]=new Ul(new ge(n,g+1+i,n,g+1+m+i),null),o>=l))return o;return o}let u=new $l(e.wordSeparators,e.regex),p;u.reset(0);do if(p=u.next(t),p&&(s[o++]=ql(new ge(n,p.index+1+i,n,p.index+1+p[0].length+i),p,a),o>=l))return o;while(p);return o}static findNextMatch(e,t,n,i){let o=t.parseSearchRequest();if(!o)return null;let s=new $l(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindNextMatchMultiline(e,n,s,i):this._doFindNextMatchLineByLine(e,n,s,i)}static _doFindNextMatchMultiline(e,t,n,i){let o=new ot(t.lineNumber,1),s=e.getOffsetAt(o),a=e.getLineCount(),l=e.getValueInRange(new ge(o.lineNumber,o.column,a,e.getLineMaxColumn(a)),1),d=e.getEOL()===`\r
`?new $y(l):null;n.reset(t.column-1);let u=n.next(l);return u?ql(this._getMultilineMatchRange(e,s,l,d,u.index,u[0]),u,i):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new ot(1,1),n,i):null}static _doFindNextMatchLineByLine(e,t,n,i){let o=e.getLineCount(),s=t.lineNumber,a=e.getLineContent(s),l=this._findFirstMatchInLine(n,a,s,t.column,i);if(l)return l;for(let d=1;d<=o;d++){let u=(s+d-1)%o,p=e.getLineContent(u+1),h=this._findFirstMatchInLine(n,p,u+1,1,i);if(h)return h}return null}static _findFirstMatchInLine(e,t,n,i,o){e.reset(i-1);let s=e.next(t);return s?ql(new ge(n,s.index+1,n,s.index+1+s[0].length),s,o):null}static findPreviousMatch(e,t,n,i){let o=t.parseSearchRequest();if(!o)return null;let s=new $l(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindPreviousMatchMultiline(e,n,s,i):this._doFindPreviousMatchLineByLine(e,n,s,i)}static _doFindPreviousMatchMultiline(e,t,n,i){let o=this._doFindMatchesMultiline(e,new ge(1,1,t.lineNumber,t.column),n,i,10*eH);if(o.length>0)return o[o.length-1];let s=e.getLineCount();return t.lineNumber!==s||t.column!==e.getLineMaxColumn(s)?this._doFindPreviousMatchMultiline(e,new ot(s,e.getLineMaxColumn(s)),n,i):null}static _doFindPreviousMatchLineByLine(e,t,n,i){let o=e.getLineCount(),s=t.lineNumber,a=e.getLineContent(s).substring(0,t.column-1),l=this._findLastMatchInLine(n,a,s,i);if(l)return l;for(let d=1;d<=o;d++){let u=(o+s-d-1)%o,p=e.getLineContent(u+1),h=this._findLastMatchInLine(n,p,u+1,i);if(h)return h}return null}static _findLastMatchInLine(e,t,n,i){let o=null,s;for(e.reset(0);s=e.next(t);)o=ql(new ge(n,s.index+1,n,s.index+1+s[0].length),s,i);return o}};function nH(r,e,t,n,i){if(n===0)return!0;let o=e.charCodeAt(n-1);if(r.get(o)!==0||o===13||o===10)return!0;if(i>0){let s=e.charCodeAt(n);if(r.get(s)!==0)return!0}return!1}function iH(r,e,t,n,i){if(n+i===t)return!0;let o=e.charCodeAt(n+i);if(r.get(o)!==0||o===13||o===10)return!0;if(i>0){let s=e.charCodeAt(n+i-1);if(r.get(s)!==0)return!0}return!1}function jy(r,e,t,n,i){return nH(r,e,t,n,i)&&iH(r,e,t,n,i)}var $l=class{_wordSeparators;_searchRegex;_prevMatchStartIndex;_prevMatchLength;constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){let t=e.length,n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;let i=n.index,o=n[0].length;if(i===this._prevMatchStartIndex&&o===this._prevMatchLength){if(o===0){fu(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=i,this._prevMatchLength=o,!this._wordSeparators||jy(this._wordSeparators,e,t,i,o))return n}while(n);return null}};var Ua=65535;function jN(r){let e;return r[r.length-1]<65536?e=new Uint16Array(r.length):e=new Uint32Array(r.length),e.set(r,0),e}var mD=class{constructor(e,t,n,i,o){this.lineStarts=e;this.cr=t;this.lf=n;this.crlf=i;this.isBasicASCII=o}};function Vs(r,e=!0){let t=[0],n=1;for(let i=0,o=r.length;i<o;i++){let s=r.charCodeAt(i);s===13?i+1<o&&r.charCodeAt(i+1)===10?(t[n++]=i+2,i++):t[n++]=i+1:s===10&&(t[n++]=i+1)}return e?jN(t):t}function YN(r,e){r.length=0,r[0]=0;let t=1,n=0,i=0,o=0,s=!0;for(let l=0,d=e.length;l<d;l++){let u=e.charCodeAt(l);u===13?l+1<d&&e.charCodeAt(l+1)===10?(o++,r[t++]=l+2,l++):(n++,r[t++]=l+1):u===10?(i++,r[t++]=l+1):s&&u!==9&&(u<32||u>126)&&(s=!1)}let a=new mD(jN(r),n,i,o,s);return r.length=0,a}var Ki=class{bufferIndex;start;end;length;lineFeedCnt;constructor(e,t,n,i,o){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=i,this.length=o}},Ws=class{buffer;lineStarts;constructor(e,t){this.buffer=e,this.lineStarts=t}},gD=class{_pieces;_index;_tree;_BOM;constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==Oe&&e.iterate(e.root,n=>(n!==Oe&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}},fD=class{_limit;_cache;constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1,n=this._cache;for(let i=0;i<n.length;i++){let o=n[i];if(o.node.parent===null||o.nodeStartOffset>=e){n[i]=null,t=!0;continue}}if(t){let i=[];for(let o of n)o!==null&&i.push(o);this._cache=i}}},Yy=class{root;_buffers;_lineCnt;_length;_EOL;_EOLLength;_EOLNormalized;_lastChangeBufferPos;_searchCache;_lastVisitedLine;constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new Ws("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=Oe,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let i=null;for(let o=0,s=e.length;o<s;o++)if(e[o].buffer.length>0){e[o].lineStarts||(e[o].lineStarts=Vs(e[o].buffer));let a=new Ki(o+1,{line:0,column:0},{line:e[o].lineStarts.length-1,column:e[o].buffer.length-e[o].lineStarts[e[o].lineStarts.length-1]},e[o].lineStarts.length-1,e[o].buffer.length);this._buffers.push(e[o]),i=this.rbInsertRight(i,a)}this._searchCache=new fD(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){let t=Ua,n=t-Math.floor(t/3),i=n*2,o="",s=0,a=[];if(this.iterate(this.root,l=>{let d=this.getNodeContent(l),u=d.length;if(s<=n||s+u<i)return o+=d,s+=u,!0;let p=o.replace(/\r\n|\r|\n/g,e);return a.push(new Ws(p,Vs(p))),o=d,s=u,!0}),s>0){let l=o.replace(/\r\n|\r|\n/g,e);a.push(new Ws(l,Vs(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new gD(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,i=>{if(i===Oe)return!0;let o=this.getNodeContent(i),s=o.length,a=e.nodeAt(t),l=e.nodeAt(t+s),d=e.getValueInRange2(a,l);return t+=s,o===d})}getOffsetAt(e,t){let n=0,i=this.root;for(;i!==Oe;)if(i.left!==Oe&&i.lf_left+1>=e)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt+1>=e){n+=i.size_left;let o=this.getAccumulatedValue(i,e-i.lf_left-2);return n+=o+t-1}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0,i=e;for(;t!==Oe;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){let o=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+o.index,o.index===0){let s=this.getOffsetAt(n+1,1),a=i-s;return new ot(n+1,a+1)}return new ot(n+1,o.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===Oe){let o=this.getOffsetAt(n+1,1),s=i-e-o;return new ot(n+1,s+1)}else t=t.right;return new ot(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";let n=this.nodeAt2(e.startLineNumber,e.startColumn),i=this.nodeAt2(e.endLineNumber,e.endColumn),o=this.getValueInRange2(n,i);return t?t!==this._EOL||!this._EOLNormalized?o.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?o:o.replace(/\r\n|\r|\n/g,t):o}getValueInRange2(e,t){if(e.node===t.node){let a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,d=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(d+e.remainder,d+t.remainder)}let n=e.node,i=this._buffers[n.piece.bufferIndex].buffer,o=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start),s=i.substring(o+e.remainder,o+n.piece.length);for(n=n.next();n!==Oe;){let a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){s+=a.substring(l,l+t.remainder);break}else s+=a.substr(l,n.piece.length);n=n.next()}return s}getLinesContent(){let e=[],t=0,n="",i=!1;return this.iterate(this.root,o=>{if(o===Oe)return!0;let s=o.piece,a=s.length;if(a===0)return!0;let l=this._buffers[s.bufferIndex].buffer,d=this._buffers[s.bufferIndex].lineStarts,u=s.start.line,p=s.end.line,h=d[u]+s.start.column;if(i&&(l.charCodeAt(h)===10&&(h++,a--),e[t++]=n,n="",i=!1,a===0))return!0;if(u===p)return!this._EOLNormalized&&l.charCodeAt(h+a-1)===13?(i=!0,n+=l.substr(h,a-1)):n+=l.substr(h,a),!0;n+=this._EOLNormalized?l.substring(h,Math.max(h,d[u+1]-this._EOLLength)):l.substring(h,d[u+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let m=u+1;m<p;m++)n=this._EOLNormalized?l.substring(d[m],d[m+1]-this._EOLLength):l.substring(d[m],d[m+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&l.charCodeAt(d[p]+s.end.column-1)===13?(i=!0,s.end.column===0?t--:n=l.substr(d[p],s.end.column-1)):n=l.substr(d[p],s.end.column),!0}),i&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){let t=e.node.next();if(!t)return 0;let n=this._buffers[t.piece.bufferIndex],i=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(i)}else{let t=this._buffers[e.node.piece.bufferIndex],i=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){let n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}getCharCode(e){let t=this.nodeAt(e);return this._getCharCode(t)}getNearestChunk(e){let t=this.nodeAt(e);if(t.remainder===t.node.piece.length){let n=t.node.next();if(!n||n===Oe)return"";let i=this._buffers[n.piece.bufferIndex],o=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i.buffer.substring(o,o+n.piece.length)}else{let n=this._buffers[t.node.piece.bufferIndex],i=this.offsetInBuffer(t.node.piece.bufferIndex,t.node.piece.start),o=i+t.remainder,s=i+t.node.piece.length;return n.buffer.substring(o,s)}}findMatchesInNode(e,t,n,i,o,s,a,l,d,u,p){let h=this._buffers[e.piece.bufferIndex],m=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),f=this.offsetInBuffer(e.piece.bufferIndex,o),g=this.offsetInBuffer(e.piece.bufferIndex,s),y,T={line:0,column:0},E,D;t._wordSeparators?(E=h.buffer.substring(f,g),D=_=>_+f,t.reset(0)):(E=h.buffer,D=_=>_,t.reset(f));do if(y=t.next(E),y){if(D(y.index)>=g)return u;this.positionInBuffer(e,D(y.index)-m,T);let _=this.getLineFeedCnt(e.piece.bufferIndex,o,T),O=T.line===o.line?T.column-o.column+i:T.column+1,G=O+y[0].length;if(p[u++]=ql(new ge(n+_,O,n+_,G),y,l),D(y.index)+y[0].length>=g||u>=d)return u}while(y);return u}findMatchesLineByLine(e,t,n,i){let o=[],s=0,a=new $l(t.wordSeparators,t.regex),l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];let d=this.nodeAt2(e.endLineNumber,e.endColumn);if(d===null)return[];let u=this.positionInBuffer(l.node,l.remainder),p=this.positionInBuffer(d.node,d.remainder);if(l.node===d.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,u,p,t,n,i,s,o),o;let h=e.startLineNumber,m=l.node;for(;m!==d.node;){let g=this.getLineFeedCnt(m.piece.bufferIndex,u,m.piece.end);if(g>=1){let T=this._buffers[m.piece.bufferIndex].lineStarts,E=this.offsetInBuffer(m.piece.bufferIndex,m.piece.start),D=T[u.line+g],_=h===e.startLineNumber?e.startColumn:1;if(s=this.findMatchesInNode(m,a,h,_,u,this.positionInBuffer(m,D-E),t,n,i,s,o),s>=i)return o;h+=g}let y=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){let T=this.getLineContent(h).substring(y,e.endColumn-1);return s=this._findMatchesInLine(t,a,T,e.endLineNumber,y,s,o,n,i),o}if(s=this._findMatchesInLine(t,a,this.getLineContent(h).substr(y),h,y,s,o,n,i),s>=i)return o;h++,l=this.nodeAt2(h,1),m=l.node,u=this.positionInBuffer(l.node,l.remainder)}if(h===e.endLineNumber){let g=h===e.startLineNumber?e.startColumn-1:0,y=this.getLineContent(h).substring(g,e.endColumn-1);return s=this._findMatchesInLine(t,a,y,e.endLineNumber,g,s,o,n,i),o}let f=h===e.startLineNumber?e.startColumn:1;return s=this.findMatchesInNode(d.node,a,h,f,u,p,t,n,i,s,o),o}_findMatchesInLine(e,t,n,i,o,s,a,l,d){let u=e.wordSeparators;if(!l&&e.simpleSearch){let h=e.simpleSearch,m=h.length,f=n.length,g=-m;for(;(g=n.indexOf(h,g+m))!==-1;)if((!u||jy(u,n,f,g,m))&&(a[s++]=new Ul(new ge(i,g+1+o,i,g+1+m+o),null),s>=d))return s;return s}let p;t.reset(0);do if(p=t.next(n),p&&(a[s++]=ql(new ge(i,p.index+1+o,i,p.index+1+p[0].length+o),p,l),s>=d))return s;while(p);return s}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==Oe){let{node:i,remainder:o,nodeStartOffset:s}=this.nodeAt(e),a=i.piece,l=a.bufferIndex,d=this.positionInBuffer(i,o);if(i.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&s+a.length===e&&t.length<Ua){this.appendToNode(i,t),this.computeBufferMetadata();return}if(s===e)this.insertContentToNodeLeft(t,i),this._searchCache.validate(e);else if(s+i.piece.length>e){let u=[],p=new Ki(a.bufferIndex,d,a.end,this.getLineFeedCnt(a.bufferIndex,d,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,d));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(i,o)===10){let g={line:p.start.line+1,column:0};p=new Ki(p.bufferIndex,g,p.end,this.getLineFeedCnt(p.bufferIndex,g,p.end),p.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(i,o-1)===13){let g=this.positionInBuffer(i,o-1);this.deleteNodeTail(i,g),t="\r"+t,i.piece.length===0&&u.push(i)}else this.deleteNodeTail(i,d);else this.deleteNodeTail(i,d);let h=this.createNewPieces(t);p.length>0&&this.rbInsertRight(i,p);let m=i;for(let f=0;f<h.length;f++)m=this.rbInsertRight(m,h[f]);this.deleteNodes(u)}else this.insertContentToNodeRight(t,i)}else{let i=this.createNewPieces(t),o=this.rbInsertLeft(null,i[0]);for(let s=1;s<i.length;s++)o=this.rbInsertRight(o,i[s])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===Oe)return;let n=this.nodeAt(e),i=this.nodeAt(e+t),o=n.node,s=i.node;if(o===s){let h=this.positionInBuffer(o,n.remainder),m=this.positionInBuffer(o,i.remainder);if(n.nodeStartOffset===e){if(t===o.piece.length){let f=o.next();vg(this,o),this.validateCRLFWithPrevNode(f),this.computeBufferMetadata();return}this.deleteNodeHead(o,m),this._searchCache.validate(e),this.validateCRLFWithPrevNode(o),this.computeBufferMetadata();return}if(n.nodeStartOffset+o.piece.length===e+t){this.deleteNodeTail(o,h),this.validateCRLFWithNextNode(o),this.computeBufferMetadata();return}this.shrinkNode(o,h,m),this.computeBufferMetadata();return}let a=[],l=this.positionInBuffer(o,n.remainder);this.deleteNodeTail(o,l),this._searchCache.validate(e),o.piece.length===0&&a.push(o);let d=this.positionInBuffer(s,i.remainder);this.deleteNodeHead(s,d),s.piece.length===0&&a.push(s);let u=o.next();for(let h=u;h!==Oe&&h!==s;h=h.next())a.push(h);let p=o.piece.length===0?o.prev():o;this.deleteNodes(a),this.validateCRLFWithNextNode(p),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let s=t.piece,a={line:s.start.line+1,column:0},l=new Ki(s.bufferIndex,a,s.end,this.getLineFeedCnt(s.bufferIndex,a,s.end),s.length-1);t.piece=l,e+=`
`,Us(this,t,-1,-1),t.piece.length===0&&n.push(t)}let i=this.createNewPieces(e),o=this.rbInsertLeft(t,i[i.length-1]);for(let s=i.length-2;s>=0;s--)o=this.rbInsertLeft(o,i[s]);this.validateCRLFWithPrevNode(o),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);let n=this.createNewPieces(e),i=this.rbInsertRight(t,n[0]),o=i;for(let s=1;s<n.length;s++)o=this.rbInsertRight(o,n[s]);this.validateCRLFWithPrevNode(i)}positionInBuffer(e,t,n){let i=e.piece,o=e.piece.bufferIndex,s=this._buffers[o].lineStarts,l=s[i.start.line]+i.start.column+t,d=i.start.line,u=i.end.line,p=0,h=0,m=0;for(;d<=u&&(p=d+(u-d)/2|0,m=s[p],p!==u);)if(h=s[p+1],l<m)u=p-1;else if(l>=h)d=p+1;else break;return n?(n.line=p,n.column=l-m,null):{line:p,column:l-m}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;let i=this._buffers[e].lineStarts;if(n.line===i.length-1)return n.line-t.line;let o=i[n.line+1],s=i[n.line]+n.column;if(o>s+1)return n.line-t.line;let a=s-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)vg(this,e[t])}createNewPieces(e){if(e.length>Ua){let u=[];for(;e.length>Ua;){let h=e.charCodeAt(Ua-1),m;h===13||h>=55296&&h<=56319?(m=e.substring(0,Ua-1),e=e.substring(Ua-1)):(m=e.substring(0,Ua),e=e.substring(Ua));let f=Vs(m);u.push(new Ki(this._buffers.length,{line:0,column:0},{line:f.length-1,column:m.length-f[f.length-1]},f.length-1,m.length)),this._buffers.push(new Ws(m,f))}let p=Vs(e);return u.push(new Ki(this._buffers.length,{line:0,column:0},{line:p.length-1,column:e.length-p[p.length-1]},p.length-1,e.length)),this._buffers.push(new Ws(e,p)),u}let t=this._buffers[0].buffer.length,n=Vs(e,!1),i=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},i=this._lastChangeBufferPos;for(let u=0;u<n.length;u++)n[u]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let u=0;u<n.length;u++)n[u]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}let o=this._buffers[0].buffer.length,s=this._buffers[0].lineStarts.length-1,a=o-this._buffers[0].lineStarts[s],l={line:s,column:a},d=new Ki(0,i,l,this.getLineFeedCnt(0,i,l),o-t);return this._lastChangeBufferPos=l,[d]}getLinesRawContent(){return this.getContentOfSubTree(this.root)}getLineRawContent(e,t=0){let n=this.root,i="",o=this._searchCache.get2(e);if(o){n=o.node;let s=this.getAccumulatedValue(n,e-o.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(o.nodeStartLineNumber+n.piece.lineFeedCnt===e)i=a.substring(l+s,l+n.piece.length);else{let d=this.getAccumulatedValue(n,e-o.nodeStartLineNumber);return a.substring(l+s,l+d-t)}}else{let s=0,a=e;for(;n!==Oe;)if(n.left!==Oe&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),d=this.getAccumulatedValue(n,e-n.lf_left-1),u=this._buffers[n.piece.bufferIndex].buffer,p=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return s+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:s,nodeStartLineNumber:a-(e-1-n.lf_left)}),u.substring(p+l,p+d-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),d=this._buffers[n.piece.bufferIndex].buffer,u=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i=d.substring(u+l,u+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,s+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==Oe;){let s=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){let a=this.getAccumulatedValue(n,0),l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i+=s.substring(l,l+a-t),i}else{let a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i+=s.substr(a,n.piece.length)}n=n.next()}return i}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==Oe;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){let n=e.piece,i=this.positionInBuffer(e,t),o=i.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){let s=this.getLineFeedCnt(e.piece.bufferIndex,n.start,i);if(s!==o)return{index:s,remainder:0}}return{index:o,remainder:i.column}}getAccumulatedValue(e,t){if(t<0)return 0;let n=e.piece,i=this._buffers[n.bufferIndex].lineStarts,o=n.start.line+t+1;return o>n.end.line?i[n.end.line]+n.end.column-i[n.start.line]-n.start.column:i[o]-i[n.start.line]-n.start.column}deleteNodeTail(e,t){let n=e.piece,i=n.lineFeedCnt,o=this.offsetInBuffer(n.bufferIndex,n.end),s=t,a=this.offsetInBuffer(n.bufferIndex,s),l=this.getLineFeedCnt(n.bufferIndex,n.start,s),d=l-i,u=a-o,p=n.length+u;e.piece=new Ki(n.bufferIndex,n.start,s,l,p),Us(this,e,u,d)}deleteNodeHead(e,t){let n=e.piece,i=n.lineFeedCnt,o=this.offsetInBuffer(n.bufferIndex,n.start),s=t,a=this.getLineFeedCnt(n.bufferIndex,s,n.end),l=this.offsetInBuffer(n.bufferIndex,s),d=a-i,u=o-l,p=n.length+u;e.piece=new Ki(n.bufferIndex,s,n.end,a,p),Us(this,e,u,d)}shrinkNode(e,t,n){let i=e.piece,o=i.start,s=i.end,a=i.length,l=i.lineFeedCnt,d=t,u=this.getLineFeedCnt(i.bufferIndex,i.start,d),p=this.offsetInBuffer(i.bufferIndex,t)-this.offsetInBuffer(i.bufferIndex,o);e.piece=new Ki(i.bufferIndex,i.start,d,u,p),Us(this,e,p-a,u-l);let h=new Ki(i.bufferIndex,n,s,this.getLineFeedCnt(i.bufferIndex,n,s),this.offsetInBuffer(i.bufferIndex,s)-this.offsetInBuffer(i.bufferIndex,n)),m=this.rbInsertRight(e,h);this.validateCRLFWithPrevNode(m)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);let n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),i=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;let o=Vs(t,!1);for(let m=0;m<o.length;m++)o[m]+=i;if(n){let m=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:i-m}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(o.slice(1));let s=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[s],l={line:s,column:a},d=e.piece.length+t.length,u=e.piece.lineFeedCnt,p=this.getLineFeedCnt(0,e.piece.start,l),h=p-u;e.piece=new Ki(e.piece.bufferIndex,e.piece.start,l,p,d),this._lastChangeBufferPos=l,Us(this,e,t.length,h)}nodeAt(e){let t=this.root,n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let i=0;for(;t!==Oe;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){i+=t.size_left;let o={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this._searchCache.set(o),o}else e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,i=0;for(;n!==Oe;)if(n.left!==Oe&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let o=this.getAccumulatedValue(n,e-n.lf_left-2),s=this.getAccumulatedValue(n,e-n.lf_left-1);return i+=n.size_left,{node:n,remainder:Math.min(o+t-1,s),nodeStartOffset:i}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let o=this.getAccumulatedValue(n,e-n.lf_left-2);if(o+t-1<=n.piece.length)return{node:n,remainder:o+t-1,nodeStartOffset:i};t-=n.piece.length-o;break}else e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==Oe;){if(n.piece.lineFeedCnt>0){let o=this.getAccumulatedValue(n,0),s=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,o),nodeStartOffset:s}}else if(n.piece.length>=t-1){let o=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:o}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;let n=this._buffers[e.piece.bufferIndex],i=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(i)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===Oe||e.piece.lineFeedCnt===0)return!1;let t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,i=t.start.line,o=n[i]+t.start.column;return i===n.length-1||n[i+1]>o+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(o)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===Oe||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let n=[],i=this._buffers[e.piece.bufferIndex].lineStarts,o;e.piece.end.column===0?o={line:e.piece.end.line-1,column:i[e.piece.end.line]-i[e.piece.end.line-1]-1}:o={line:e.piece.end.line,column:e.piece.end.column-1};let s=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new Ki(e.piece.bufferIndex,e.piece.start,o,a,s),Us(this,e,-1,-1),e.piece.length===0&&n.push(e);let l={line:t.piece.start.line+1,column:0},d=t.piece.length-1,u=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new Ki(t.piece.bufferIndex,l,t.piece.end,u,d),Us(this,t,-1,-1),t.piece.length===0&&n.push(t);let p=this.createNewPieces(`\r
`);this.rbInsertRight(e,p[0]);for(let h=0;h<n.length;h++)vg(this,n[h])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)vg(this,n);else{let i=n.piece,o={line:i.start.line+1,column:0},s=i.length-1,a=this.getLineFeedCnt(i.bufferIndex,o,i.end);n.piece=new Ki(i.bufferIndex,o,i.end,a,s),Us(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===Oe)return t(Oe);let n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===Oe)return"";let t=this._buffers[e.piece.bufferIndex],n=e.piece,i=this.offsetInBuffer(n.bufferIndex,n.start),o=this.offsetInBuffer(n.bufferIndex,n.end);return t.buffer.substring(i,o)}getPieceContent(e){let t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),i=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,i)}rbInsertRight(e,t){let n=new hp(t,1);if(n.left=Oe,n.right=Oe,n.parent=Oe,n.size_left=0,n.lf_left=0,this.root===Oe)this.root=n,n.color=0;else if(e.right===Oe)e.right=n,n.parent=e;else{let o=qy(e.right);o.left=n,n.parent=o}return hD(this,n),n}rbInsertLeft(e,t){let n=new hp(t,1);if(n.left=Oe,n.right=Oe,n.parent=Oe,n.size_left=0,n.lf_left=0,this.root===Oe)this.root=n,n.color=0;else if(e.left===Oe)e.left=n,n.parent=e;else{let i=cD(e.left);i.right=n,n.parent=i}return hD(this,n),n}getContentOfSubTree(e){let t="";return this.iterate(e,n=>(t+=this.getNodeContent(n),!0)),t}};var mp=class r extends P{_pieceTree;_BOM;_mightContainRTL;_mightContainUnusualLineTerminators;_mightContainNonBasicASCII;_onDidChangeContent=this._register(new x);onDidChangeContent=this._onDidChangeContent.event;constructor(e,t,n,i,o,s,a){super(),this._BOM=t,this._mightContainNonBasicASCII=!s,this._mightContainRTL=i,this._mightContainUnusualLineTerminators=o,this._pieceTree=new Yy(e,n,a)}equals(e){return!(e instanceof r)||this._BOM!==e._BOM||this.getEOL()!==e.getEOL()?!1:this._pieceTree.equal(e._pieceTree)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){let n=e+t,i=this.getPositionAt(e),o=this.getPositionAt(n);return new ge(i.lineNumber,i.column,o.lineNumber,o.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";let n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;let n=this.getOffsetAt(e.startLineNumber,e.startColumn),i=this.getOffsetAt(e.endLineNumber,e.endColumn),o=0,s=this._getEndOfLine(t),a=this.getEOL();if(s.length!==a.length){let l=s.length-a.length,d=e.endLineNumber-e.startLineNumber;o=l*d}return i-n+o}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0,i=e.startLineNumber,o=e.endLineNumber;for(let s=i;s<=o;s++){let a=this.getLineContent(s),l=s===i?e.startColumn-1:0,d=s===o?e.endColumn-1:a.length;for(let u=l;u<d;u++)Fr(a.charCodeAt(u))?(n=n+1,u=u+1):n=n+1}return n+=this._getEndOfLine(t).length*(o-i),n}return this.getValueLengthInRange(e,t)}getNearestChunk(e){return this._pieceTree.getNearestChunk(e)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getCharCode(e){return this._pieceTree.getCharCode(e)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineMinColumn(e){return 1}getLineMaxColumn(e){return this.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){let t=ka(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){let t=rw(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let i=this._mightContainRTL,o=this._mightContainUnusualLineTerminators,s=this._mightContainNonBasicASCII,a=!0,l=[];for(let g=0;g<e.length;g++){let y=e[g];a&&y._isTracked&&(a=!1);let T=y.range;if(y.text){let G=!0;s||(G=!ow(y.text),s=G),!i&&G&&(i=sm(y.text)),!o&&G&&(o=zb(y.text))}let E="",D=0,_=0,O=0;if(y.text){let G;[D,_,O,G]=xr(y.text);let Z=this.getEOL(),M=Z===`\r
`?2:1;G===0||G===M?E=y.text:E=y.text.replace(/\r\n|\r|\n/g,Z)}l[g]={sortIndex:g,identifier:y.identifier||null,range:T,rangeOffset:this.getOffsetAt(T.startLineNumber,T.startColumn),rangeLength:this.getValueLengthInRange(T),text:E,eolCount:D,firstLineLength:_,lastLineLength:O,forceMoveMarkers:!!y.forceMoveMarkers,isAutoWhitespaceEdit:y.isAutoWhitespaceEdit||!1}}l.sort(r._sortOpsAscending);let d=!1;for(let g=0,y=l.length-1;g<y;g++){let T=l[g].range.getEndPosition(),E=l[g+1].range.getStartPosition();if(E.isBeforeOrEqual(T)){if(E.isBefore(T))throw new Error("Overlapping ranges are not allowed!");d=!0}}a&&(l=this._reduceOperations(l));let u=n||t?r._getInverseEditRanges(l):[],p=[];if(t)for(let g=0;g<l.length;g++){let y=l[g],T=u[g];if(y.isAutoWhitespaceEdit&&y.range.isEmpty())for(let E=T.startLineNumber;E<=T.endLineNumber;E++){let D="";E===T.startLineNumber&&(D=this.getLineContent(y.range.startLineNumber),ka(D)!==-1)||p.push({lineNumber:E,oldContent:D})}}let h=null;if(n){let g=0;h=[];for(let y=0;y<l.length;y++){let T=l[y],E=u[y],D=this.getValueInRange(T.range),_=T.rangeOffset+g;g+=T.text.length-D.length,h[y]={sortIndex:T.sortIndex,identifier:T.identifier,range:E,text:D,textChange:new Br(T.rangeOffset,D,_,T.text)}}d||h.sort((y,T)=>y.sortIndex-T.sortIndex)}this._mightContainRTL=i,this._mightContainUnusualLineTerminators=o,this._mightContainNonBasicASCII=s;let m=this._doApplyEdits(l),f=null;if(t&&p.length>0){p.sort((g,y)=>y.lineNumber-g.lineNumber),f=[];for(let g=0,y=p.length;g<y;g++){let T=p[g].lineNumber;if(g>0&&p[g-1].lineNumber===T)continue;let E=p[g].oldContent,D=this.getLineContent(T);D.length===0||D===E||ka(D)!==-1||f.push(T)}}return this._onDidChangeContent.fire(),new yy(h,m,f)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1,n=e[0].range,i=e[e.length-1].range,o=new ge(n.startLineNumber,n.startColumn,i.endLineNumber,i.endColumn),s=n.startLineNumber,a=n.startColumn,l=[];for(let m=0,f=e.length;m<f;m++){let g=e[m],y=g.range;t=t||g.forceMoveMarkers,l.push(this.getValueInRange(new ge(s,a,y.startLineNumber,y.startColumn))),g.text.length>0&&l.push(g.text),s=y.endLineNumber,a=y.endColumn}let d=l.join(""),[u,p,h]=xr(d);return{sortIndex:0,identifier:e[0].identifier,range:o,rangeOffset:this.getOffsetAt(o.startLineNumber,o.startColumn),rangeLength:this.getValueLengthInRange(o,0),text:d,eolCount:u,firstLineLength:p,lastLineLength:h,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(r._sortOpsDescending);let t=[];for(let n=0;n<e.length;n++){let i=e[n],o=i.range.startLineNumber,s=i.range.startColumn,a=i.range.endLineNumber,l=i.range.endColumn;if(o===a&&s===l&&i.text.length===0)continue;i.text?(this._pieceTree.delete(i.rangeOffset,i.rangeLength),this._pieceTree.insert(i.rangeOffset,i.text,!0)):this._pieceTree.delete(i.rangeOffset,i.rangeLength);let d=new ge(o,s,a,l);t.push({range:d,rangeLength:i.rangeLength,text:i.text,rangeOffset:i.rangeOffset,forceMoveMarkers:i.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,i){return this._pieceTree.findMatchesLineByLine(e,t,n,i)}getPieceTree(){return this._pieceTree}static _getInverseEditRange(e,t){let n=e.startLineNumber,i=e.startColumn,[o,s,a]=xr(t),l;if(t.length>0){let d=o+1;d===1?l=new ge(n,i,n,i+s):l=new ge(n,i,n+d-1,a+1)}else l=new ge(n,i,n,i);return l}static _getInverseEditRanges(e){let t=[],n=0,i=0,o=null;for(let s=0,a=e.length;s<a;s++){let l=e[s],d,u;o?o.range.endLineNumber===l.range.startLineNumber?(d=n,u=i+(l.range.startColumn-o.range.endColumn)):(d=n+(l.range.startLineNumber-o.range.endLineNumber),u=l.range.startColumn):(d=l.range.startLineNumber,u=l.range.startColumn);let p;if(l.text.length>0){let h=l.eolCount+1;h===1?p=new ge(d,u,d,u+l.firstLineLength):p=new ge(d,u,d+h-1,l.lastLineLength+1)}else p=new ge(d,u,d,u);n=p.endLineNumber,i=p.endColumn,t.push(p),o=l}return t}static _sortOpsAscending(e,t){let n=ge.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){let n=ge.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}};var bD=class{constructor(e,t,n,i,o,s,a,l,d){this._chunks=e;this._bom=t;this._cr=n;this._lf=i;this._crlf=o;this._containsRTL=s;this._containsUnusualLineTerminators=a;this._isBasicASCII=l;this._normalizeEOL=d}_getEOL(e){let t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){let t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let o=0,s=n.length;o<s;o++){let a=n[o].buffer.replace(/\r\n|\r|\n/g,t),l=Vs(a);n[o]=new Ws(a,l)}let i=new mp(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:i,disposable:i}}getFirstLineText(e){return this._chunks[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}},gp=class{chunks;BOM;_hasPreviousChar;_previousChar;_tmpLineStarts;cr;lf;crlf;containsRTL;containsUnusualLineTerminators;isBasicASCII;constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&GP(e)&&(this.BOM=KP,e=e.substr(1));let t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){let t=YN(this._tmpLineStarts,e);this.chunks.push(new Ws(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=sm(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=zb(e)))}finish(e=!0){return this._finish(),new bD(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);let t=Vs(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}};var oH=new class{clone(){return this}equals(r){return this===r}};function XN(r,e){let t=new Uint32Array(2);return t[0]=0,t[1]=(r<<0|0|0|32768|2<<24)>>>0,new Kv(t,e===null?oH:e)}var Xy=class{constructor(e){this._default=e}_store=[];get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,n){if(e>=this._store.length)return;if(t===0){this.insert(e,n);return}else if(n===0){this.delete(e,t);return}let i=this._store.slice(0,e),o=this._store.slice(e+t),s=sH(n,this._default);this._store=i.concat(s,o)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;let n=[];for(let i=0;i<t;i++)n[i]=this._default;this._store=ul(this._store,e,n)}};function sH(r,e){let t=[];for(let n=0;n<r;n++)t[n]=e;return t}var lc=class{static deserialize(e){let t=0,n=ti(e,t);t+=4;let i=[];for(let o=0;o<n;o++)t=zm.deserialize(e,t,i);return i}_tokens;constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){let n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e){n.appendLineTokens(t);return}}this._tokens.push(new zm(e,[t]))}finalize(){return this._tokens}serialize(){let e=this._serializeSize(),t=new Uint8Array(e);return this._serialize(t),t}_serializeSize(){let e=0;e+=4;for(let t=0;t<this._tokens.length;t++)e+=this._tokens[t].serializeSize();return e}_serialize(e){let t=0;ni(e,this._tokens.length,t),t+=4;for(let n=0;n<this._tokens.length;n++)t=this._tokens[n].serialize(e,t)}};var vD=class{constructor(e,t){this.tokenizationSupport=t;this.store=new bp(e)}initialState=this.tokenizationSupport.getInitialState();store;getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}},Qy=class extends vD{constructor(t,n,i,o){super(t,n);this._textModel=i;this._languageIdCodec=o}updateTokensUntilLine(t,n){let i=this._textModel.getLanguageId();for(;;){let o=this.getFirstInvalidLine();if(!o||o.lineNumber>n)break;let s=this._textModel.getLineContent(o.lineNumber),a=fp(this._languageIdCodec,i,this.tokenizationSupport,s,!0,o.startState);t.add(o.lineNumber,a.tokens),this.store.setEndState(o.lineNumber,a.endState)}}getTokenTypeIfInsertingCharacter(t,n){let i=this.getStartState(t.lineNumber);if(!i)return 0;let o=this._textModel.getLanguageId(),s=this._textModel.getLineContent(t.lineNumber),a=s.substring(0,t.column-1)+n+s.substring(t.column-1),l=fp(this._languageIdCodec,o,this.tokenizationSupport,a,!0,i),d=new Di(l.tokens,a,this._languageIdCodec);if(d.getCount()===0)return 0;let u=d.findTokenIndexAtOffset(t.column-1);return d.getStandardTokenType(u)}tokenizeLineWithEdit(t,n){let i=this.getStartState(t);if(!i)return{mainLineTokens:null,additionalLines:null};let o=this._textModel.getLineContent(t),s=n.lineEdit.apply(o),a=this._textModel.getLanguageIdAtPosition(t,0),l=fp(this._languageIdCodec,a,this.tokenizationSupport,s,!0,i),d=null;if(n.additionalLines){d=[];let p=l.endState;for(let h of n.additionalLines){let m=fp(this._languageIdCodec,a,this.tokenizationSupport,h,!0,p);d.push(new Di(m.tokens,h,this._languageIdCodec)),p=m.endState}}return{mainLineTokens:new Di(l.tokens,s,this._languageIdCodec),additionalLines:d}}hasAccurateTokensForLine(t){let n=this.store.getFirstInvalidEndStateLineNumberOrMax();return t<n}isCheapToTokenize(t){let n=this.store.getFirstInvalidEndStateLineNumberOrMax();return t<n||t===n&&this._textModel.getLineLength(t)<2048}tokenizeHeuristically(t,n,i){if(i<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(n<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(t,i),{heuristicTokens:!1};let o=this.guessStartState(n),s=this._textModel.getLanguageId();for(let a=n;a<=i;a++){let l=this._textModel.getLineContent(a),d=fp(this._languageIdCodec,s,this.tokenizationSupport,l,!0,o);t.add(a,d.tokens),o=d.endState}return{heuristicTokens:!0}}guessStartState(t){let n=this._textModel.getLineFirstNonWhitespaceColumn(t),i=[],o=null;for(let l=t-1;n>1&&l>=1;l--){let d=this._textModel.getLineFirstNonWhitespaceColumn(l);if(d!==0&&d<n&&(i.push(this._textModel.getLineContent(l)),n=d,o=this.getStartState(l),o))break}o||(o=this.tokenizationSupport.getInitialState()),i.reverse();let s=this._textModel.getLanguageId(),a=o;for(let l of i)a=fp(this._languageIdCodec,s,this.tokenizationSupport,l,!1,a).endState;return a}},bp=class{constructor(e){this.lineCount=e;this._invalidEndStatesLineNumbers.addRange(new qt(1,e+1))}_tokenizationStateStore=new yD;_invalidEndStatesLineNumbers=new ID;getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new gt("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);let n=this._tokenizationStateStore.setEndState(e,t);return n&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new qt(e+1,e+2)),n}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new qt(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(let t of e){let[n]=xr(t.text);this.acceptChange(new Vi(t.range.startLineNumber,t.range.endLineNumber+1),n+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new qt(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){let t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;let n=this.getStartState(t,e);if(!n)throw new gt("Start state must be defined");return{lineNumber:t,startState:n}}},yD=class{_lineEndStates=new Xy(null);getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){let n=this._lineEndStates.get(e);return n&&n.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let n=e.length;t>0&&n>0&&(n--,t--),this._lineEndStates.replace(e.startLineNumber,n,t)}acceptChanges(e){for(let t of e){let[n]=xr(t.text);this.acceptChange(new Vi(t.range.startLineNumber,t.range.endLineNumber+1),n+1)}}},ID=class{_ranges=[];getRanges(){return this._ranges}get min(){return this._ranges.length===0?null:this._ranges[0].start}removeMin(){if(this._ranges.length===0)return null;let e=this._ranges[0];return e.start+1===e.endExclusive?this._ranges.shift():this._ranges[0]=new qt(e.start+1,e.endExclusive),e.start}delete(e){let t=this._ranges.findIndex(n=>n.contains(e));if(t!==-1){let n=this._ranges[t];n.start===e?n.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new qt(e+1,n.endExclusive):n.endExclusive===e+1?this._ranges[t]=new qt(n.start,e):this._ranges.splice(t,1,new qt(n.start,e),new qt(e+1,n.endExclusive))}}addRange(e){qt.addRange(e,this._ranges)}addRangeAndResize(e,t){let n=0;for(;!(n>=this._ranges.length||e.start<=this._ranges[n].endExclusive);)n++;let i=n;for(;!(i>=this._ranges.length||e.endExclusive<this._ranges[i].start);)i++;let o=t-e.length;for(let s=i;s<this._ranges.length;s++)this._ranges[s]=this._ranges[s].delta(o);if(n===i){let s=new qt(e.start,e.start+t);s.isEmpty||this._ranges.splice(n,0,s)}else{let s=Math.min(e.start,this._ranges[n].start),a=Math.max(e.endExclusive,this._ranges[i-1].endExclusive),l=new qt(s,a+o);l.isEmpty?this._ranges.splice(n,i-n):this._ranges.splice(n,i-n,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}};function fp(r,e,t,n,i,o){let s=null;if(t)try{s=t.tokenizeEncoded(n,i,o.clone())}catch(a){Ze(a)}return s||(s=XN(r.encodeLanguageId(e),o)),Di.convertToEndOffset(s.tokens,n.length),s}var Jy=class{constructor(e,t){this._tokenizerWithStateStore=e;this._backgroundTokenStore=t}_isDisposed=!1;dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_isScheduled=!1;_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,Cl(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){let t=Date.now()+e.timeRemaining(),n=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?Db(n):this._beginBackgroundTokenization())};n()}_backgroundTokenizeForAtLeast1ms(){let e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new lc,n=Ld.create(!1);do if(n.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){let t=this._tokenizerWithStateStore?.getFirstInvalidLine();return t?(this._tokenizerWithStateStore.updateTokensUntilLine(e,t.lineNumber),t.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new Vi(e,t))}};var Zy=class{_onDidChangeVisibleRanges=new x;onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event;_views=new Set;attachView(){let e=new SD(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}},SD=class{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){let n=e.map(i=>new Vi(i.startLineNumber,i.endLineNumber+1));this.handleStateChange({visibleLineRanges:n,stabilized:t})}},eI=class extends P{constructor(t){super();this._refreshTokens=t}runner=this._register(new Bn(()=>this.update(),50));_computedLineRanges=[];_lineRanges=[];get lineRanges(){return this._lineRanges}update(){ln(this._computedLineRanges,this._lineRanges,(t,n)=>t.equals(n))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(t){this._lineRanges=t.visibleLineRanges,t.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}},vp=class extends P{constructor(t,n,i){super();this._languageIdCodec=t;this._textModel=n;this.getLanguageId=i}_backgroundTokenizationState=1;get backgroundTokenizationState(){return this._backgroundTokenizationState}_onDidChangeBackgroundTokenizationState=this._register(new x);onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event;_onDidChangeTokens=this._register(new x);onDidChangeTokens=this._onDidChangeTokens.event;tokenizeIfCheap(t){this.isCheapToTokenize(t)&&this.forceTokenization(t)}};var QN=A("treeSitterParserService");var yg=class extends vp{constructor(t,n,i,o){super(n,i,o);this._treeSitterService=t;this._initialize()}_tokenizationSupport=null;_lastLanguageId;_initialize(){let t=this.getLanguageId();(!this._tokenizationSupport||this._lastLanguageId!==t)&&(this._lastLanguageId=t,this._tokenizationSupport=Hm.get(t))}getLineTokens(t){let n=this._textModel.getLineContent(t);if(this._tokenizationSupport){let i=this._tokenizationSupport.tokenizeEncoded(t,this._textModel);if(i)return new Di(i,n,this._languageIdCodec)}return Di.createEmpty(n,this._languageIdCodec)}resetTokenization(t=!0){t&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]}),this._initialize()}handleDidChangeAttached(){}handleDidChangeContent(t){t.isFlush&&this.resetTokenization(!1)}forceTokenization(t){}hasAccurateTokensForLine(t){return!0}isCheapToTokenize(t){return!0}getTokenTypeIfInsertingCharacter(t,n,i){return 0}tokenizeLineWithEdit(t,n){return{mainLineTokens:null,additionalLines:null}}get hasTokens(){return this._treeSitterService.getParseResult(this._textModel)!==void 0}};var Ig=class r{_lineTokens;_len;_languageIdCodec;constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,n){let i=null;if(t<this._len&&(i=this._lineTokens[t]),i!==null&&i!==Ms)return new Di(Ns(i),n,this._languageIdCodec);let o=new Uint32Array(2);return o[0]=n.length,o[1]=JN(this._languageIdCodec.encodeLanguageId(e)),new Di(o,n,this._languageIdCodec)}static _massageTokens(e,t,n){let i=n?Ns(n):null;if(t===0){let o=!1;if(i&&i.length>1&&(o=Ur.getLanguageId(i[1])!==e),!o)return Ms}if(!i||i.length===0){let o=new Uint32Array(2);return o[0]=t,o[1]=JN(e),o.buffer}return i[i.length-2]=t,i.byteOffset===0&&i.byteLength===i.buffer.byteLength?i.buffer:i}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;let n=[];for(let i=0;i<t;i++)n[i]=null;this._lineTokens=ul(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,i,o){let s=r._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,i);this._ensureLine(t);let a=this._lineTokens[t];return this._lineTokens[t]=s,o?!r._equals(a,s):!1}static _equals(e,t){if(!e||!t)return!e&&!t;let n=Ns(e),i=Ns(t);if(n.length!==i.length)return!1;for(let o=0,s=n.length;o<s;o++)if(n[o]!==i[o])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new ot(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){let t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=ri.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=ri.deleteEnding(this._lineTokens[t],e.startColumn-1);let n=e.endLineNumber-1,i=null;n<this._len&&(i=ri.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=ri.append(this._lineTokens[t],i),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;let i=e.lineNumber-1;if(!(i>=this._len)){if(t===0){this._lineTokens[i]=ri.insert(this._lineTokens[i],e.column-1,n);return}this._lineTokens[i]=ri.deleteEnding(this._lineTokens[i],e.column-1),this._lineTokens[i]=ri.insert(this._lineTokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};let n=[];for(let i=0,o=e.length;i<o;i++){let s=e[i],a=0,l=0,d=!1;for(let u=s.startLineNumber;u<=s.endLineNumber;u++)d?(this.setTokens(t.getLanguageId(),u-1,t.getLineLength(u),s.getLineTokens(u),!1),l=u):this.setTokens(t.getLanguageId(),u-1,t.getLineLength(u),s.getLineTokens(u),!0)&&(d=!0,a=u,l=u);d&&n.push({fromLineNumber:a,toLineNumber:l})}return{changes:n}}};function JN(r){return(r<<0|0|0|32768|2<<24|1024)>>>0}var tI=class r{_pieces;_isComplete;_languageIdCodec;constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){let o=t[0].getRange(),s=t[t.length-1].getRange();if(!o||!s)return e;n=e.plusRange(o).plusRange(s)}let i=null;for(let o=0,s=this._pieces.length;o<s;o++){let a=this._pieces[o];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:o};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(o,1),o--,s--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:o};continue}let[l,d]=a.split(n);if(l.isEmpty()){i=i||{index:o};continue}d.isEmpty()||(this._pieces.splice(o,1,l,d),o++,s++,i=i||{index:o})}return i=i||{index:this._pieces.length},t.length>0&&(this._pieces=ul(this._pieces,i.index,t)),n}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;let n=this._pieces;if(n.length===0)return t;let i=r._findFirstPieceWithLine(n,e),o=n[i].getLineTokens(e);if(!o)return t;let s=t.getCount(),a=o.getCount(),l=0,d=[],u=0,p=0,h=(m,f)=>{m!==p&&(p=m,d[u++]=m,d[u++]=f)};for(let m=0;m<a;m++){let f=o.getStartCharacter(m),g=o.getEndCharacter(m),y=o.getMetadata(m),T=((y&1?2048:0)|(y&2?4096:0)|(y&4?8192:0)|(y&8?16384:0)|(y&16?16744448:0)|(y&32?4278190080:0))>>>0,E=~T>>>0;for(;l<s&&t.getEndOffset(l)<=f;)h(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<s&&t.getStartOffset(l)<f&&h(f,t.getMetadata(l));l<s&&t.getEndOffset(l)<g;)h(t.getEndOffset(l),t.getMetadata(l)&E|y&T),l++;if(l<s)h(g,t.getMetadata(l)&E|y&T),t.getEndOffset(l)===g&&l++;else{let D=Math.min(Math.max(0,l-1),s-1);h(g,t.getMetadata(D)&E|y&T)}}for(;l<s;)h(t.getEndOffset(l),t.getMetadata(l)),l++;return new Di(new Uint32Array(d),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,i=e.length-1;for(;n<i;){let o=n+Math.floor((i-n)/2);if(e[o].endLineNumber<t)n=o+1;else if(e[o].startLineNumber>t)i=o-1;else{for(;o>n&&e[o-1].startLineNumber<=t&&t<=e[o-1].endLineNumber;)o--;return o}}return n}acceptEdit(e,t,n,i,o){for(let s of this._pieces)s.acceptEdit(e,t,n,i,o)}};var Va=class extends cp{constructor(t,n,i,o,s,a,l){super();this._textModel=t;this._bracketPairsTextModelPart=n;this._languageId=i;this._attachedViews=o;this._languageService=s;this._languageConfigurationService=a;this._treeSitterService=l;this._register(this._languageConfigurationService.onDidChange(d=>{d.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(N.filter(Hm.onDidChange,d=>d.changedLanguages.includes(this._languageId))(()=>{this.createPreferredTokenProvider()})),this.createPreferredTokenProvider()}_semanticTokens=new tI(this._languageService.languageIdCodec);_onDidChangeLanguage=this._register(new x);onDidChangeLanguage=this._onDidChangeLanguage.event;_onDidChangeLanguageConfiguration=this._register(new x);onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event;_onDidChangeTokens=this._register(new x);onDidChangeTokens=this._onDidChangeTokens.event;_tokens;_tokensDisposables=this._register(new Q);createGrammarTokens(){return this._register(new nI(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews))}createTreeSitterTokens(){return this._register(new yg(this._treeSitterService,this._languageService.languageIdCodec,this._textModel,()=>this._languageId))}createTokens(t){let n=this._tokens!==void 0;this._tokens?.dispose(),this._tokens=t?this.createTreeSitterTokens():this.createGrammarTokens(),this._tokensDisposables.clear(),this._tokensDisposables.add(this._tokens.onDidChangeTokens(i=>{this._emitModelTokensChangedEvent(i)})),this._tokensDisposables.add(this._tokens.onDidChangeBackgroundTokenizationState(i=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})),n&&this._tokens.resetTokenization()}createPreferredTokenProvider(){Hm.get(this._languageId)?this._tokens instanceof yg||this.createTokens(!0):this._tokens instanceof nI||this.createTokens(!1)}_hasListeners(){return this._onDidChangeLanguage.hasListeners()||this._onDidChangeLanguageConfiguration.hasListeners()||this._onDidChangeTokens.hasListeners()}handleLanguageConfigurationServiceChange(t){t.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}handleDidChangeContent(t){if(t.isFlush)this._semanticTokens.flush();else if(!t.isEolChange)for(let n of t.changes){let[i,o,s]=xr(n.text);this._semanticTokens.acceptEdit(n.range,i,o,s,n.text.length>0?n.text.charCodeAt(0):0)}this._tokens.handleDidChangeContent(t)}handleDidChangeAttached(){this._tokens.handleDidChangeAttached()}getLineTokens(t){this.validateLineNumber(t);let n=this._tokens.getLineTokens(t);return this._semanticTokens.addSparseTokens(t,n)}_emitModelTokensChangedEvent(t){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(t),this._onDidChangeTokens.fire(t))}validateLineNumber(t){if(t<1||t>this._textModel.getLineCount())throw new gt("Illegal value for lineNumber")}get hasTokens(){return this._tokens.hasTokens}resetTokenization(){this._tokens.resetTokenization()}get backgroundTokenizationState(){return this._tokens.backgroundTokenizationState}forceTokenization(t){this.validateLineNumber(t),this._tokens.forceTokenization(t)}hasAccurateTokensForLine(t){return this.validateLineNumber(t),this._tokens.hasAccurateTokensForLine(t)}isCheapToTokenize(t){return this.validateLineNumber(t),this._tokens.isCheapToTokenize(t)}tokenizeIfCheap(t){this.validateLineNumber(t),this._tokens.tokenizeIfCheap(t)}getTokenTypeIfInsertingCharacter(t,n,i){return this._tokens.getTokenTypeIfInsertingCharacter(t,n,i)}tokenizeLineWithEdit(t,n){return this._tokens.tokenizeLineWithEdit(t,n)}setSemanticTokens(t,n){this._semanticTokens.set(t,n),this._emitModelTokensChangedEvent({semanticTokensApplied:t!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(t,n){if(this.hasCompleteSemanticTokens())return;let i=this._textModel.validateRange(this._semanticTokens.setPartial(t,n));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})}getWordAtPosition(t){this.assertNotDisposed();let n=this._textModel.validatePosition(t),i=this._textModel.getLineContent(n.lineNumber),o=this.getLineTokens(n.lineNumber),s=o.findTokenIndexAtOffset(n.column-1),[a,l]=Va._findLanguageBoundaries(o,s),d=xv(n.column,this.getLanguageConfiguration(o.getLanguageId(s)).getWordDefinition(),i.substring(a,l),a);if(d&&d.startColumn<=t.column&&t.column<=d.endColumn)return d;if(s>0&&a===n.column-1){let[u,p]=Va._findLanguageBoundaries(o,s-1),h=xv(n.column,this.getLanguageConfiguration(o.getLanguageId(s-1)).getWordDefinition(),i.substring(u,p),u);if(h&&h.startColumn<=t.column&&t.column<=h.endColumn)return h}return null}getLanguageConfiguration(t){return this._languageConfigurationService.getLanguageConfiguration(t)}static _findLanguageBoundaries(t,n){let i=t.getLanguageId(n),o=0;for(let a=n;a>=0&&t.getLanguageId(a)===i;a--)o=t.getStartOffset(a);let s=t.getLineContent().length;for(let a=n,l=t.getCount();a<l&&t.getLanguageId(a)===i;a++)s=t.getEndOffset(a);return[o,s]}getWordUntilPosition(t){let n=this.getWordAtPosition(t);return n?{word:n.word.substr(0,t.column-n.startColumn),startColumn:n.startColumn,endColumn:t.column}:{word:"",startColumn:t.column,endColumn:t.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(t,n){let i=this._textModel.validatePosition(new ot(t,n)),o=this.getLineTokens(i.lineNumber);return o.getLanguageId(o.findTokenIndexAtOffset(i.column-1))}setLanguageId(t,n="api"){if(this._languageId===t)return;let i={oldLanguage:this._languageId,newLanguage:t,source:n};this._languageId=t,this._bracketPairsTextModelPart.handleDidChangeLanguage(i),this._tokens.resetTokenization(),this.createPreferredTokenProvider(),this._onDidChangeLanguage.fire(i),this._onDidChangeLanguageConfiguration.fire({})}};Va=C([v(4,ko),v(5,$m),v(6,QN)],Va);var nI=class extends vp{_tokenizer=null;_defaultBackgroundTokenizer=null;_backgroundTokenizer=this._register(new Ut);_tokens=new Ig(this._languageIdCodec);_debugBackgroundTokens;_debugBackgroundStates;_debugBackgroundTokenizer=this._register(new Ut);_attachedViewStates=this._register(new hr);constructor(e,t,n,i){super(e,t,n),this._register(ak.onDidChange(o=>{let s=this.getLanguageId();o.changedLanguages.indexOf(s)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(i.onDidChangeVisibleRanges(({view:o,state:s})=>{if(s){let a=this._attachedViewStates.get(o);a||(a=new eI(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(o,a)),a.handleStateChange(s)}else this._attachedViewStates.deleteAndDispose(o)}))}resetTokenization(e=!0){this._tokens.flush(),this._debugBackgroundTokens?.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new bp(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});let t=()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];let o=ak.get(this.getLanguageId());if(!o)return[null,null];let s;try{s=o.getInitialState()}catch(a){return Ze(a),[null,null]}return[o,s]},[n,i]=t();if(n&&i?this._tokenizer=new Qy(this._textModel.getLineCount(),n,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){let o={setTokens:s=>{this.setTokens(s)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;let s=2;this._backgroundTokenizationState=s,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(s,a)=>{if(!this._tokenizer)return;let l=this._tokenizer.store.getFirstInvalidEndStateLineNumber();l!==null&&s>=l&&this._tokenizer?.store.setEndState(s,a)}};n&&n.createBackgroundTokenizer&&!n.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,o)),!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization()&&(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new Jy(this._tokenizer,o),this._defaultBackgroundTokenizer.handleChanges()),n?.backgroundTokenizerShouldOnlyVerifyTokens&&n.createBackgroundTokenizer?(this._debugBackgroundTokens=new Ig(this._languageIdCodec),this._debugBackgroundStates=new bp(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,{setTokens:s=>{this._debugBackgroundTokens?.setMultilineTokens(s,this._textModel)},backgroundTokenizationFinished(){},setEndState:(s,a)=>{this._debugBackgroundStates?.setEndState(s,a)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){this._defaultBackgroundTokenizer?.handleChanges()}handleDidChangeContent(e){if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(let t of e.changes){let[n,i]=xr(t.text);this._tokens.acceptEdit(t.range,n,i),this._debugBackgroundTokens?.acceptEdit(t.range,n,i)}this._debugBackgroundStates?.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),this._defaultBackgroundTokenizer?.handleChanges()}}setTokens(e){let{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){let e=Vi.joinMany([...this._attachedViewStates].map(([t,n])=>n.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(let t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);let n=new lc,{heuristicTokens:i}=this._tokenizer.tokenizeHeuristically(n,e,t),o=this.setTokens(n.finalize());if(i)for(let s of o.changes)this._backgroundTokenizer.value?.requestTokens(s.fromLineNumber,s.toLineNumber+1);this._defaultBackgroundTokenizer?.checkFinished()}forceTokenization(e){let t=new lc;this._tokenizer?.updateTokensUntilLine(t,e),this.setTokens(t.finalize()),this._defaultBackgroundTokenizer?.checkFinished()}hasAccurateTokensForLine(e){return this._tokenizer?this._tokenizer.hasAccurateTokensForLine(e):!0}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}getLineTokens(e){let t=this._textModel.getLineContent(e),n=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){let i=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!n.equals(i)&&this._debugBackgroundTokenizer.value?.reportMismatchingTokens&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return n}getTokenTypeIfInsertingCharacter(e,t,n){if(!this._tokenizer)return 0;let i=this._textModel.validatePosition(new ot(e,t));return this.forceTokenization(i.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(i,n)}tokenizeLineWithEdit(e,t){return this._tokenizer?(this.forceTokenization(e),this._tokenizer.tokenizeLineWithEdit(e,t)):{mainLineTokens:null,additionalLines:null}}get hasTokens(){return this._tokens.hasTokens}};function _D(r){let e=new gp;return e.acceptChunk(r),e.finish()}function nF(r){return new Promise((e,t)=>{let n=new gp,i=!1;ov(r,{onData:o=>{n.acceptChunk(typeof o=="string"?o:o.toString())},onError:o=>{i||(i=!0,t(o))},onEnd:()=>{i||(i=!0,e(n.finish()))}})})}function aH(r){let e=new gp,t;for(;typeof(t=r.read())=="string";)e.acceptChunk(t);return e.finish()}function ZN(r,e){let t;return typeof r=="string"?t=_D(r):LO(r)?t=aH(r):t=r,t.create(e)}var iI=0,lH=999,dH=1e4,TD=class{_source;_eos;constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,n=0;do{let i=this._source.read();if(i===null)return this._eos=!0,t===0?null:e.join("");if(i.length>0&&(e[t++]=i,n+=i.length),n>=64*1024)return e.join("")}while(!0)}},Sg=()=>{throw new Error("Invalid change accessor")};var Hs=class extends P{constructor(t,n,i,o=null,s,a,l,d){super();this._undoRedoService=s;this._languageService=a;this._languageConfigurationService=l;this.instantiationService=d;iI++,this.id="$model"+iI,this.isForSimpleWidget=i.isForSimpleWidget,typeof o>"u"||o===null?this._associatedResource=W.parse("inmemory://model/"+iI):this._associatedResource=o,this._attachedEditorCount=0;let{textBuffer:u,disposable:p}=ZN(t,i.defaultEOL);this._buffer=u,this._bufferDisposable=p,this._options=Hs.resolveOptions(this._buffer,i);let h=typeof n=="string"?n:n.languageId;typeof n!="string"&&(this._languageSelectionListener.value=n.onDidChange(()=>this._setLanguage(n.languageId))),this._bracketPairs=this._register(new Ry(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new Gy(this,this._languageConfigurationService)),this._decorationProvider=this._register(new Wy(this)),this._tokenizationTextModelPart=this.instantiationService.createInstance(Va,this,this._bracketPairs,h,this._attachedViews);let m=this._buffer.getLineCount(),f=this._buffer.getValueLengthInRange(new ge(1,1,m,this._buffer.getLineLength(m)+1),0);i.largeFileOptimizations?(this._isTooLargeForTokenization=f>Hs.LARGE_FILE_SIZE_THRESHOLD||m>Hs.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=f>Hs.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=f>Hs._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=$P(iI),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new oI,this._commandManager=new Ky(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(h),this._register(this._languageConfigurationService.onDidChange(g=>{this._bracketPairs.handleLanguageConfigurationServiceChange(g),this._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(g)}))}static _MODEL_SYNC_LIMIT=50*1024*1024;static LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;static LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;static LARGE_FILE_HEAP_OPERATION_THRESHOLD=256*1024*1024;static DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Ls.tabSize,indentSize:Ls.indentSize,insertSpaces:Ls.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Ls.trimAutoWhitespace,largeFileOptimizations:Ls.largeFileOptimizations,bracketPairColorizationOptions:Ls.bracketPairColorizationOptions};static resolveOptions(t,n){if(n.detectIndentation){let i=aD(t,n.tabSize,n.insertSpaces);return new Gu({tabSize:i.tabSize,indentSize:"tabSize",insertSpaces:i.insertSpaces,trimAutoWhitespace:n.trimAutoWhitespace,defaultEOL:n.defaultEOL,bracketPairColorizationOptions:n.bracketPairColorizationOptions})}return new Gu(n)}_onWillDispose=this._register(new x);onWillDispose=this._onWillDispose.event;_onDidChangeDecorations=this._register(new kD(t=>this.handleBeforeFireDecorationsChangedEvent(t)));onDidChangeDecorations=this._onDidChangeDecorations.event;get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}_onDidChangeOptions=this._register(new x);onDidChangeOptions=this._onDidChangeOptions.event;_onDidChangeAttached=this._register(new x);onDidChangeAttached=this._onDidChangeAttached.event;_onDidChangeInjectedText=this._register(new x);_eventEmitter=this._register(new DD);onDidChangeContent(t){return this._eventEmitter.slowEvent(n=>t(n.contentChangedEvent))}onDidChangeContentOrInjectedText(t){return Ti(this._eventEmitter.fastEvent(n=>t(n)),this._onDidChangeInjectedText.event(n=>t(n)))}id;isForSimpleWidget;_associatedResource;_attachedEditorCount;_buffer;_bufferDisposable;_options;_languageSelectionListener=this._register(new Ut);_isDisposed;__isDisposing;_isDisposing(){return this.__isDisposing}_versionId;_alternativeVersionId;_initialUndoRedoSnapshot;_isTooLargeForSyncing;_isTooLargeForTokenization;_isTooLargeForHeapOperation;_commandManager;_isUndoing;_isRedoing;_trimAutoWhitespaceLines;_instanceId;_deltaDecorationCallCnt=0;_lastDecorationId;_decorations;_decorationsTree;_decorationProvider;_tokenizationTextModelPart;get tokenization(){return this._tokenizationTextModelPart}_bracketPairs;get bracketPairs(){return this._bracketPairs}_guidesTextModelPart;get guides(){return this._guidesTextModelPart}_attachedViews=new Zy;dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;let t=new mp([],"",`
`,!1,!1,!0,!0);t.dispose(),this._buffer=t,this._bufferDisposable=P.None}_hasListeners(){return this._onWillDispose.hasListeners()||this._onDidChangeDecorations.hasListeners()||this._tokenizationTextModelPart._hasListeners()||this._onDidChangeOptions.hasListeners()||this._onDidChangeAttached.hasListeners()||this._onDidChangeInjectedText.hasListeners()||this._eventEmitter.hasListeners()}_assertNotDisposed(){if(this._isDisposed)throw new gt("Model is disposed!")}equalsTextBuffer(t){return this._assertNotDisposed(),this._buffer.equals(t)}getTextBuffer(){return this._assertNotDisposed(),this._buffer}_emitContentChangedEvent(t,n){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(n),this._bracketPairs.handleDidChangeContent(n),this._eventEmitter.fire(new fy(t,n)))}setValue(t){if(this._assertNotDisposed(),t==null)throw Dd();let{textBuffer:n,disposable:i}=ZN(t,this._options.defaultEOL);this._setValueFromTextBuffer(n,i)}_createContentChanged2(t,n,i,o,s,a,l,d){return{changes:[{range:t,rangeOffset:n,rangeLength:i,text:o}],eol:this._buffer.getEOL(),isEolChange:d,versionId:this.getVersionId(),isUndoing:s,isRedoing:a,isFlush:l}}_setValueFromTextBuffer(t,n){this._assertNotDisposed();let i=this.getFullModelRange(),o=this.getValueLengthInRange(i),s=this.getLineCount(),a=this.getLineMaxColumn(s);this._buffer=t,this._bufferDisposable.dispose(),this._bufferDisposable=n,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new oI,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new ic([new uy],this._versionId,!1,!1),this._createContentChanged2(new ge(1,1,s,a),0,o,this.getValue(),!1,!1,!0,!1))}setEOL(t){this._assertNotDisposed();let n=t===1?`\r
`:`
`;if(this._buffer.getEOL()===n)return;let i=this.getFullModelRange(),o=this.getValueLengthInRange(i),s=this.getLineCount(),a=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(n),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new ic([new my],this._versionId,!1,!1),this._createContentChanged2(new ge(1,1,s,a),0,o,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){let t=this.getVersionId(),n=this._decorationsTree.collectNodesPostOrder();for(let i=0,o=n.length;i<o;i++){let s=n[i],a=s.range,l=s.cachedAbsoluteStart-s.start,d=this._buffer.getOffsetAt(a.startLineNumber,a.startColumn),u=this._buffer.getOffsetAt(a.endLineNumber,a.endColumn);s.cachedAbsoluteStart=d,s.cachedAbsoluteEnd=u,s.cachedVersionId=t,s.start=d-l,s.end=u-l,Fa(s)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(t){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(t)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let t=0,n=0,i=this._buffer.getLineCount();for(let o=1;o<=i;o++){let s=this._buffer.getLineLength(o);s>=dH?n+=s:t+=s}return n>t}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(t){this._assertNotDisposed();let n=typeof t.tabSize<"u"?t.tabSize:this._options.tabSize,i=typeof t.indentSize<"u"?t.indentSize:this._options.originalIndentSize,o=typeof t.insertSpaces<"u"?t.insertSpaces:this._options.insertSpaces,s=typeof t.trimAutoWhitespace<"u"?t.trimAutoWhitespace:this._options.trimAutoWhitespace,a=typeof t.bracketColorizationOptions<"u"?t.bracketColorizationOptions:this._options.bracketPairColorizationOptions,l=new Gu({tabSize:n,indentSize:i,insertSpaces:o,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s,bracketPairColorizationOptions:a});if(this._options.equals(l))return;let d=this._options.createChangeEvent(l);this._options=l,this._bracketPairs.handleDidChangeOptions(d),this._decorationProvider.handleDidChangeOptions(d),this._onDidChangeOptions.fire(d)}detectIndentation(t,n){this._assertNotDisposed();let i=aD(this._buffer,n,t);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})}normalizeIndentation(t){return this._assertNotDisposed(),Ek(t,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(t=null){let n=this.findMatches(sw.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(t,n.map(i=>({range:i.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(t){this._assertNotDisposed();let n=this._validatePosition(t.lineNumber,t.column,0);return this._buffer.getOffsetAt(n.lineNumber,n.column)}getPositionAt(t){this._assertNotDisposed();let n=Math.min(this._buffer.getLength(),Math.max(0,t));return this._buffer.getPositionAt(n)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(t){this._versionId=t}_overwriteAlternativeVersionId(t){this._alternativeVersionId=t}_overwriteInitialUndoRedoSnapshot(t){this._initialUndoRedoSnapshot=t}getValue(t,n=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new gt("Operation would exceed heap memory limits");let i=this.getFullModelRange(),o=this.getValueInRange(i,t);return n?this._buffer.getBOM()+o:o}createSnapshot(t=!1){return new TD(this._buffer.createSnapshot(t))}getValueLength(t,n=!1){this._assertNotDisposed();let i=this.getFullModelRange(),o=this.getValueLengthInRange(i,t);return n?this._buffer.getBOM().length+o:o}getValueInRange(t,n=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(t),n)}getValueLengthInRange(t,n=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(t),n)}getCharacterCountInRange(t,n=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(t),n)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new gt("Illegal value for lineNumber");return this._buffer.getLineContent(t)}getLineLength(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new gt("Illegal value for lineNumber");return this._buffer.getLineLength(t)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new gt("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(t){return this._assertNotDisposed(),1}getLineMaxColumn(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new gt("Illegal value for lineNumber");return this._buffer.getLineLength(t)+1}getLineFirstNonWhitespaceColumn(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new gt("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(t)}getLineLastNonWhitespaceColumn(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new gt("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(t)}_validateRangeRelaxedNoAllocations(t){let n=this._buffer.getLineCount(),i=t.startLineNumber,o=t.startColumn,s=Math.floor(typeof i=="number"&&!isNaN(i)?i:1),a=Math.floor(typeof o=="number"&&!isNaN(o)?o:1);if(s<1)s=1,a=1;else if(s>n)s=n,a=this.getLineMaxColumn(s);else if(a<=1)a=1;else{let h=this.getLineMaxColumn(s);a>=h&&(a=h)}let l=t.endLineNumber,d=t.endColumn,u=Math.floor(typeof l=="number"&&!isNaN(l)?l:1),p=Math.floor(typeof d=="number"&&!isNaN(d)?d:1);if(u<1)u=1,p=1;else if(u>n)u=n,p=this.getLineMaxColumn(u);else if(p<=1)p=1;else{let h=this.getLineMaxColumn(u);p>=h&&(p=h)}return i===s&&o===a&&l===u&&d===p&&t instanceof ge&&!(t instanceof Aa)?t:new ge(s,a,u,p)}_isValidPosition(t,n,i){if(typeof t!="number"||typeof n!="number"||isNaN(t)||isNaN(n)||t<1||n<1||(t|0)!==t||(n|0)!==n)return!1;let o=this._buffer.getLineCount();if(t>o)return!1;if(n===1)return!0;let s=this.getLineMaxColumn(t);if(n>s)return!1;if(i===1){let a=this._buffer.getLineCharCode(t,n-2);if(Fr(a))return!1}return!0}_validatePosition(t,n,i){let o=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),s=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),a=this._buffer.getLineCount();if(o<1)return new ot(1,1);if(o>a)return new ot(a,this.getLineMaxColumn(a));if(s<=1)return new ot(o,1);let l=this.getLineMaxColumn(o);if(s>=l)return new ot(o,l);if(i===1){let d=this._buffer.getLineCharCode(o,s-2);if(Fr(d))return new ot(o,s-1)}return new ot(o,s)}validatePosition(t){let n=1;return this._assertNotDisposed(),t instanceof ot&&this._isValidPosition(t.lineNumber,t.column,n)?t:this._validatePosition(t.lineNumber,t.column,n)}_isValidRange(t,n){let i=t.startLineNumber,o=t.startColumn,s=t.endLineNumber,a=t.endColumn;if(!this._isValidPosition(i,o,0)||!this._isValidPosition(s,a,0))return!1;if(n===1){let l=o>1?this._buffer.getLineCharCode(i,o-2):0,d=a>1&&a<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,a-2):0,u=Fr(l),p=Fr(d);return!u&&!p}return!0}validateRange(t){let n=1;if(this._assertNotDisposed(),t instanceof ge&&!(t instanceof Aa)&&this._isValidRange(t,n))return t;let i=this._validatePosition(t.startLineNumber,t.startColumn,0),o=this._validatePosition(t.endLineNumber,t.endColumn,0),s=i.lineNumber,a=i.column,l=o.lineNumber,d=o.column;if(n===1){let u=a>1?this._buffer.getLineCharCode(s,a-2):0,p=d>1&&d<=this._buffer.getLineLength(l)?this._buffer.getLineCharCode(l,d-2):0,h=Fr(u),m=Fr(p);return!h&&!m?new ge(s,a,l,d):s===l&&a===d?new ge(s,a-1,l,d-1):h&&m?new ge(s,a-1,l,d+1):h?new ge(s,a-1,l,d):new ge(s,a,l,d+1)}return new ge(s,a,l,d)}modifyPosition(t,n){this._assertNotDisposed();let i=this.getOffsetAt(t)+n;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))}getFullModelRange(){this._assertNotDisposed();let t=this.getLineCount();return new ge(1,1,t,this.getLineMaxColumn(t))}findMatchesLineByLine(t,n,i,o){return this._buffer.findMatchesLineByLine(t,n,i,o)}findMatches(t,n,i,o,s,a,l=lH){this._assertNotDisposed();let d=null;n!==null&&(Array.isArray(n)||(n=[n]),n.every(h=>ge.isIRange(h))&&(d=n.map(h=>this.validateRange(h)))),d===null&&(d=[this.getFullModelRange()]),d=d.sort((h,m)=>h.startLineNumber-m.startLineNumber||h.startColumn-m.startColumn);let u=[];u.push(d.reduce((h,m)=>ge.areIntersecting(h,m)?h.plusRange(m):(u.push(h),m)));let p;if(!i&&t.indexOf(`
`)<0){let m=new Ba(t,i,o,s).parseSearchRequest();if(!m)return[];p=f=>this.findMatchesLineByLine(f,m,a,l)}else p=h=>ac.findMatches(this,new Ba(t,i,o,s),h,a,l);return u.map(p).reduce((h,m)=>h.concat(m),[])}findNextMatch(t,n,i,o,s,a){this._assertNotDisposed();let l=this.validatePosition(n);if(!i&&t.indexOf(`
`)<0){let u=new Ba(t,i,o,s).parseSearchRequest();if(!u)return null;let p=this.getLineCount(),h=new ge(l.lineNumber,l.column,p,this.getLineMaxColumn(p)),m=this.findMatchesLineByLine(h,u,a,1);return ac.findNextMatch(this,new Ba(t,i,o,s),l,a),m.length>0||(h=new ge(1,1,l.lineNumber,this.getLineMaxColumn(l.lineNumber)),m=this.findMatchesLineByLine(h,u,a,1),m.length>0)?m[0]:null}return ac.findNextMatch(this,new Ba(t,i,o,s),l,a)}findPreviousMatch(t,n,i,o,s,a){this._assertNotDisposed();let l=this.validatePosition(n);return ac.findPreviousMatch(this,new Ba(t,i,o,s),l,a)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(t){if((this.getEOL()===`
`?0:1)!==t)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(t){return t instanceof qu?t:new qu(t.identifier||null,this.validateRange(t.range),t.text,t.forceMoveMarkers||!1,t.isAutoWhitespaceEdit||!1,t._isTracked||!1)}_validateEditOperations(t){let n=[];for(let i=0,o=t.length;i<o;i++)n[i]=this._validateEditOperation(t[i]);return n}pushEditOperations(t,n,i,o){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(t,this._validateEditOperations(n),i,o)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(t,n,i,o){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let s=n.map(l=>({range:this.validateRange(l.range),text:l.text})),a=!0;if(t)for(let l=0,d=t.length;l<d;l++){let u=t[l],p=!1;for(let h=0,m=s.length;h<m;h++){let f=s[h].range,g=f.startLineNumber>u.endLineNumber,y=u.startLineNumber>f.endLineNumber;if(!g&&!y){p=!0;break}}if(!p){a=!1;break}}if(a)for(let l=0,d=this._trimAutoWhitespaceLines.length;l<d;l++){let u=this._trimAutoWhitespaceLines[l],p=this.getLineMaxColumn(u),h=!0;for(let m=0,f=s.length;m<f;m++){let g=s[m].range,y=s[m].text;if(!(u<g.startLineNumber||u>g.endLineNumber)&&!(u===g.startLineNumber&&g.startColumn===p&&g.isEmpty()&&y&&y.length>0&&y.charAt(0)===`
`)&&!(u===g.startLineNumber&&g.startColumn===1&&g.isEmpty()&&y&&y.length>0&&y.charAt(y.length-1)===`
`)){h=!1;break}}if(h){let m=new ge(u,1,u,p);n.push(new qu(null,m,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(t,n,i,o)}_applyUndo(t,n,i,o){let s=t.map(a=>{let l=this.getPositionAt(a.newPosition),d=this.getPositionAt(a.newEnd);return{range:new ge(l.lineNumber,l.column,d.lineNumber,d.column),text:a.oldText}});this._applyUndoRedoEdits(s,n,!0,!1,i,o)}_applyRedo(t,n,i,o){let s=t.map(a=>{let l=this.getPositionAt(a.oldPosition),d=this.getPositionAt(a.oldEnd);return{range:new ge(l.lineNumber,l.column,d.lineNumber,d.column),text:a.newText}});this._applyUndoRedoEdits(s,n,!1,!0,i,o)}_applyUndoRedoEdits(t,n,i,o,s,a){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=o,this.applyEdits(t,!1),this.setEOL(n),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(a),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(t,n=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();let i=this._validateEditOperations(t);return this._doApplyEdits(i,n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(t,n){let i=this._buffer.getLineCount(),o=this._buffer.applyEdits(t,this._options.trimAutoWhitespace,n),s=this._buffer.getLineCount(),a=o.changes;if(this._trimAutoWhitespaceLines=o.trimAutoWhitespaceLineNumbers,a.length!==0){for(let u=0,p=a.length;u<p;u++){let h=a[u];this._decorationsTree.acceptReplace(h.rangeOffset,h.rangeLength,h.text.length,h.forceMoveMarkers)}let l=[];this._increaseVersionId();let d=i;for(let u=0,p=a.length;u<p;u++){let h=a[u],[m]=xr(h.text);this._onDidChangeDecorations.fire();let f=h.range.startLineNumber,g=h.range.endLineNumber,y=g-f,T=m,E=Math.min(y,T),D=T-y,_=s-d-D+f,O=_,G=_+T,Z=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new ot(O,1)),this.getOffsetAt(new ot(G,this.getLineMaxColumn(G))),0),M=tg.fromDecorations(Z),H=new Pd(M);for(let oe=E;oe>=0;oe--){let ee=f+oe,re=_+oe;H.takeFromEndWhile(st=>st.lineNumber>re);let Fe=H.takeFromEndWhile(st=>st.lineNumber===re);l.push(new ng(ee,this.getLineContent(re),Fe))}if(E<y){let oe=f+E;l.push(new py(oe+1,g))}if(E<T){let oe=new Pd(M),ee=f+E,re=T-E,Fe=s-d-re+ee+1,st=[],be=[];for(let ae=0;ae<re;ae++){let fe=Fe+ae;be[ae]=this.getLineContent(fe),oe.takeWhile(ve=>ve.lineNumber<fe),st[ae]=oe.takeWhile(ve=>ve.lineNumber===fe)}l.push(new hy(ee+1,f+T,be,st))}d+=D}this._emitContentChangedEvent(new ic(l,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:a,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return o.reverseEdits===null?void 0:o.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(t){if(t===null||t.size===0)return;let i=Array.from(t).map(o=>new ng(o,this.getLineContent(o),this._getInjectedTextInLine(o)));this._onDidChangeInjectedText.fire(new gy(i))}changeDecorations(t,n=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(n,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(t,n){let i={addDecoration:(s,a)=>this._deltaDecorationsImpl(t,[],[{range:s,options:a}])[0],changeDecoration:(s,a)=>{this._changeDecorationImpl(s,a)},changeDecorationOptions:(s,a)=>{this._changeDecorationOptionsImpl(s,tF(a))},removeDecoration:s=>{this._deltaDecorationsImpl(t,[s],[])},deltaDecorations:(s,a)=>s.length===0&&a.length===0?[]:this._deltaDecorationsImpl(t,s,a)},o=null;try{o=n(i)}catch(s){Ze(s)}return i.addDecoration=Sg,i.changeDecoration=Sg,i.changeDecorationOptions=Sg,i.removeDecoration=Sg,i.deltaDecorations=Sg,o}deltaDecorations(t,n,i=0){if(this._assertNotDisposed(),t||(t=[]),t.length===0&&n.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),Ze(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,t,n)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(t){return this.getDecorationRange(t)}_setTrackedRange(t,n,i){let o=t?this._decorations[t]:null;if(!o)return n?this._deltaDecorationsImpl(0,[],[{range:n,options:eF[i]}],!0)[0]:null;if(!n)return this._decorationsTree.delete(o),delete this._decorations[o.id],null;let s=this._validateRangeRelaxedNoAllocations(n),a=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),l=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(o),o.reset(this.getVersionId(),a,l,s),o.setOptions(eF[i]),this._decorationsTree.insert(o),o.id}removeAllDecorationsWithOwnerId(t){if(this._isDisposed)return;let n=this._decorationsTree.collectNodesFromOwner(t);for(let i=0,o=n.length;i<o;i++){let s=n[i];this._decorationsTree.delete(s),delete this._decorations[s.id]}}getDecorationOptions(t){let n=this._decorations[t];return n?n.options:null}getDecorationRange(t){let n=this._decorations[t];return n?this._decorationsTree.getNodeRange(this,n):null}getLineDecorations(t,n=0,i=!1){return t<1||t>this.getLineCount()?[]:this.getLinesDecorations(t,t,n,i)}getLinesDecorations(t,n,i=0,o=!1,s=!1){let a=this.getLineCount(),l=Math.min(a,Math.max(1,t)),d=Math.min(a,Math.max(1,n)),u=this.getLineMaxColumn(d),p=new ge(l,1,d,u),h=this._getDecorationsInRange(p,i,o,s);return FE(h,this._decorationProvider.getDecorationsInRange(p,i,o)),h}getDecorationsInRange(t,n=0,i=!1,o=!1,s=!1){let a=this.validateRange(t),l=this._getDecorationsInRange(a,n,i,s);return FE(l,this._decorationProvider.getDecorationsInRange(a,n,i,o)),l}getOverviewRulerDecorations(t=0,n=!1){return this._decorationsTree.getAll(this,t,n,!0,!1)}getInjectedTextDecorations(t=0){return this._decorationsTree.getAllInjectedText(this,t)}_getInjectedTextInLine(t){let n=this._buffer.getOffsetAt(t,1),i=n+this._buffer.getLineLength(t),o=this._decorationsTree.getInjectedTextInInterval(this,n,i,0);return tg.fromDecorations(o).filter(s=>s.lineNumber===t)}getAllDecorations(t=0,n=!1){let i=this._decorationsTree.getAll(this,t,n,!1,!1);return i=i.concat(this._decorationProvider.getAllDecorations(t,n)),i}getAllMarginDecorations(t=0){return this._decorationsTree.getAll(this,t,!1,!1,!0)}_getDecorationsInRange(t,n,i,o){let s=this._buffer.getOffsetAt(t.startLineNumber,t.startColumn),a=this._buffer.getOffsetAt(t.endLineNumber,t.endColumn);return this._decorationsTree.getAllInInterval(this,s,a,n,i,o)}getRangeAt(t,n){return this._buffer.getRangeAt(t,n-t)}_changeDecorationImpl(t,n){let i=this._decorations[t];if(!i)return;if(i.options.after){let l=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.endLineNumber)}if(i.options.before){let l=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.startLineNumber)}let o=this._validateRangeRelaxedNoAllocations(n),s=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),a=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);this._decorationsTree.delete(i),i.reset(this.getVersionId(),s,a,o),this._decorationsTree.insert(i),this._onDidChangeDecorations.checkAffectedAndFire(i.options),i.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.endLineNumber),i.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.startLineNumber)}_changeDecorationOptionsImpl(t,n){let i=this._decorations[t];if(!i)return;let o=!!(i.options.overviewRuler&&i.options.overviewRuler.color),s=!!(n.overviewRuler&&n.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(i.options),this._onDidChangeDecorations.checkAffectedAndFire(n),i.options.after||n.after){let d=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.endLineNumber)}if(i.options.before||n.before){let d=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.startLineNumber)}let a=o!==s,l=uH(n)!==rI(i);a||l?(this._decorationsTree.delete(i),i.setOptions(n),this._decorationsTree.insert(i)):i.setOptions(n)}_deltaDecorationsImpl(t,n,i,o=!1){let s=this.getVersionId(),a=n.length,l=0,d=i.length,u=0;this._onDidChangeDecorations.beginDeferredEmit();try{let p=new Array(d);for(;l<a||u<d;){let h=null;if(l<a){do h=this._decorations[n[l++]];while(!h&&l<a);if(h){if(h.options.after){let m=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(m.endLineNumber)}if(h.options.before){let m=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(m.startLineNumber)}this._decorationsTree.delete(h),o||this._onDidChangeDecorations.checkAffectedAndFire(h.options)}}if(u<d){if(!h){let E=++this._lastDecorationId,D=`${this._instanceId};${E}`;h=new mg(D,0,0),this._decorations[D]=h}let m=i[u],f=this._validateRangeRelaxedNoAllocations(m.range),g=tF(m.options),y=this._buffer.getOffsetAt(f.startLineNumber,f.startColumn),T=this._buffer.getOffsetAt(f.endLineNumber,f.endColumn);h.ownerId=t,h.reset(s,y,T,f),h.setOptions(g),h.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.endLineNumber),h.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.startLineNumber),o||this._onDidChangeDecorations.checkAffectedAndFire(g),this._decorationsTree.insert(h),p[u]=h.id,u++}else h&&delete this._decorations[h.id]}return p}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(t,n){typeof t=="string"?(this._languageSelectionListener.clear(),this._setLanguage(t,n)):(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId,n)),this._setLanguage(t.languageId,n))}_setLanguage(t,n){this.tokenization.setLanguageId(t,n),this._languageService.requestRichLanguageFeatures(t)}getLanguageIdAtPosition(t,n){return this.tokenization.getLanguageIdAtPosition(t,n)}getWordAtPosition(t){return this._tokenizationTextModelPart.getWordAtPosition(t)}getWordUntilPosition(t){return this._tokenizationTextModelPart.getWordUntilPosition(t)}normalizePosition(t,n){return t}getLineIndentColumn(t){return cH(this.getLineContent(t))+1}};Hs=C([v(4,RO),v(5,ko),v(6,$m),v(7,_e)],Hs);function cH(r){let e=0;for(let t of r)if(t===" "||t==="	")e++;else break;return e}function xD(r){return!!(r.options.overviewRuler&&r.options.overviewRuler.color)}function uH(r){return!!r.after||!!r.before}function rI(r){return!!r.options.after||!!r.options.before}var oI=class{_decorationsTree0;_decorationsTree1;_injectedTextDecorationsTree;constructor(){this._decorationsTree0=new pp,this._decorationsTree1=new pp,this._injectedTextDecorationsTree=new pp}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(let n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,i,o,s){let a=e.getVersionId(),l=this._intervalSearch(t,n,i,o,a,s);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,n,i,o,s){let a=this._decorationsTree0.intervalSearch(e,t,n,i,o,s),l=this._decorationsTree1.intervalSearch(e,t,n,i,o,s),d=this._injectedTextDecorationsTree.intervalSearch(e,t,n,i,o,s);return a.concat(l).concat(d)}getInjectedTextInInterval(e,t,n,i){let o=e.getVersionId(),s=this._injectedTextDecorationsTree.intervalSearch(t,n,i,!1,o,!1);return this._ensureNodesHaveRanges(e,s).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){let n=e.getVersionId(),i=this._injectedTextDecorationsTree.search(t,!1,n,!1);return this._ensureNodesHaveRanges(e,i).filter(o=>o.options.showIfCollapsed||!o.range.isEmpty())}getAll(e,t,n,i,o){let s=e.getVersionId(),a=this._search(t,n,i,s,o);return this._ensureNodesHaveRanges(e,a)}_search(e,t,n,i,o){if(n)return this._decorationsTree1.search(e,t,i,o);{let s=this._decorationsTree0.search(e,t,i,o),a=this._decorationsTree1.search(e,t,i,o),l=this._injectedTextDecorationsTree.search(e,t,i,o);return s.concat(a).concat(l)}}collectNodesFromOwner(e){let t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),i=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(i)}collectNodesPostOrder(){let e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){rI(e)?this._injectedTextDecorationsTree.insert(e):xD(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){rI(e)?this._injectedTextDecorationsTree.delete(e):xD(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){let n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){rI(e)?this._injectedTextDecorationsTree.resolveNode(e,t):xD(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,i){this._decorationsTree0.acceptReplace(e,t,n,i),this._decorationsTree1.acceptReplace(e,t,n,i),this._injectedTextDecorationsTree.acceptReplace(e,t,n,i)}};function zs(r){return r.replace(/[^a-z0-9\-_]/gi," ")}var sI=class{color;darkColor;constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}},ED=class extends sI{position;_resolvedColor;constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:2}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;let n=e?t.getColor(e.id):null;return n?n.toString():""}},wD=class{position;persistLane;constructor(e){this.position=e?.position??2,this.persistLane=e?.persistLane}},CD=class extends sI{position;sectionHeaderStyle;sectionHeaderText;_resolvedColor;constructor(e){super(e),this.position=e.position,this.sectionHeaderStyle=e.sectionHeaderStyle??null,this.sectionHeaderText=e.sectionHeaderText??null}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?B.fromHex(e):t.getColor(e.id)}},aI=class r{static from(e){return e instanceof r?e:new r(e)}content;tokens;inlineClassName;inlineClassNameAffectsLetterSpacing;attachedData;cursorStops;constructor(e){this.content=e.content||"",this.tokens=e.tokens??null,this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}},Ks=class r{static EMPTY;static register(e){return new r(e)}static createDynamic(e){return new r(e)}description;blockClassName;blockIsAfterEnd;blockDoesNotCollapse;blockPadding;stickiness;zIndex;className;shouldFillLineOnLineBreak;hoverMessage;glyphMarginHoverMessage;isWholeLine;showIfCollapsed;collapseOnReplaceEdit;overviewRuler;minimap;glyphMargin;glyphMarginClassName;linesDecorationsClassName;lineNumberClassName;lineNumberHoverMessage;linesDecorationsTooltip;firstLineDecorationClassName;marginClassName;inlineClassName;inlineClassNameAffectsLetterSpacing;beforeContentClassName;afterContentClassName;after;before;hideInCommentTokens;hideInStringTokens;constructor(e){this.description=e.description,this.blockClassName=e.blockClassName?zs(e.blockClassName):null,this.blockDoesNotCollapse=e.blockDoesNotCollapse??null,this.blockIsAfterEnd=e.blockIsAfterEnd??null,this.blockPadding=e.blockPadding??null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?zs(e.className):null,this.shouldFillLineOnLineBreak=e.shouldFillLineOnLineBreak??null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new ED(e.overviewRuler):null,this.minimap=e.minimap?new CD(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new wD(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?zs(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?zs(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?zs(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?VP(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?zs(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?zs(e.marginClassName):null,this.inlineClassName=e.inlineClassName?zs(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?zs(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?zs(e.afterContentClassName):null,this.after=e.after?aI.from(e.after):null,this.before=e.before?aI.from(e.before):null,this.hideInCommentTokens=e.hideInCommentTokens??!1,this.hideInStringTokens=e.hideInStringTokens??!1}};Ks.EMPTY=Ks.register({description:"empty"});var eF=[Ks.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),Ks.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),Ks.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),Ks.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function tF(r){return r instanceof Ks?r:Ks.createDynamic(r)}var kD=class extends P{constructor(t){super();this.handleBeforeFire=t;this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}_actual=this._register(new x);event=this._actual.event;_deferredCnt;_shouldFireDeferred;_affectsMinimap;_affectsOverviewRuler;_affectedInjectedTextLines=null;_affectsGlyphMargin;_affectsLineNumber;hasListeners(){return this._actual.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),this._affectedInjectedTextLines?.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(t){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(t)}checkAffectedAndFire(t){this._affectsMinimap||=!!t.minimap?.position,this._affectsOverviewRuler||=!!t.overviewRuler?.color,this._affectsGlyphMargin||=!!t.glyphMarginClassName,this._affectsLineNumber||=!!t.lineNumberClassName,this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);let t={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(t)}},DD=class extends P{_fastEmitter=this._register(new x);fastEvent=this._fastEmitter.event;_slowEmitter=this._register(new x);slowEvent=this._slowEmitter.event;_deferredCnt;_deferredEvent;constructor(){super(),this._deferredCnt=0,this._deferredEvent=null}hasListeners(){return this._fastEmitter.hasListeners()||this._slowEmitter.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;let t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}};var jl=A("workingCopyService"),RD=class extends P{_onDidRegister=this._register(new x);onDidRegister=this._onDidRegister.event;_onDidUnregister=this._register(new x);onDidUnregister=this._onDidUnregister.event;_onDidChangeDirty=this._register(new x);onDidChangeDirty=this._onDidChangeDirty.event;_onDidChangeContent=this._register(new x);onDidChangeContent=this._onDidChangeContent.event;_onDidSave=this._register(new x);onDidSave=this._onDidSave.event;get workingCopies(){return Array.from(this._workingCopies.values())}_workingCopies=new Set;mapResourceToWorkingCopies=new ci;mapWorkingCopyToListeners=this._register(new hr);registerWorkingCopy(e){let t=this.mapResourceToWorkingCopies.get(e.resource);if(t?.has(e.typeId))throw new Error(`Cannot register more than one working copy with the same resource ${e.resource.toString()} and type ${e.typeId}.`);this._workingCopies.add(e),t||(t=new Map,this.mapResourceToWorkingCopies.set(e.resource,t)),t.set(e.typeId,e);let n=new Q;return n.add(e.onDidChangeContent(()=>this._onDidChangeContent.fire(e))),n.add(e.onDidChangeDirty(()=>this._onDidChangeDirty.fire(e))),n.add(e.onDidSave(i=>this._onDidSave.fire({workingCopy:e,...i}))),this.mapWorkingCopyToListeners.set(e,n),this._onDidRegister.fire(e),e.isDirty()&&this._onDidChangeDirty.fire(e),ie(()=>{this.unregisterWorkingCopy(e),this._onDidUnregister.fire(e)})}unregisterWorkingCopy(e){this._workingCopies.delete(e);let t=this.mapResourceToWorkingCopies.get(e.resource);t?.delete(e.typeId)&&t.size===0&&this.mapResourceToWorkingCopies.delete(e.resource),e.isDirty()&&this._onDidChangeDirty.fire(e),this.mapWorkingCopyToListeners.deleteAndDispose(e)}has(e){return W.isUri(e)?this.mapResourceToWorkingCopies.has(e):this.mapResourceToWorkingCopies.get(e.resource)?.has(e.typeId)??!1}get(e){return this.mapResourceToWorkingCopies.get(e.resource)?.get(e.typeId)}getAll(e){let t=this.mapResourceToWorkingCopies.get(e);if(t)return Array.from(t.values())}get hasDirty(){for(let e of this._workingCopies)if(e.isDirty())return!0;return!1}get dirtyCount(){let e=0;for(let t of this._workingCopies)t.isDirty()&&e++;return e}get dirtyWorkingCopies(){return this.workingCopies.filter(e=>e.isDirty())}get modifiedCount(){let e=0;for(let t of this._workingCopies)t.isModified()&&e++;return e}get modifiedWorkingCopies(){return this.workingCopies.filter(e=>e.isModified())}isDirty(e,t){let n=this.mapResourceToWorkingCopies.get(e);if(n){if(typeof t=="string")return n.get(t)?.isDirty()??!1;for(let[,i]of n)if(i.isDirty())return!0}return!1}};cn(jl,RD,1);var Gs=A("labelService");var Ot=A("telemetryService"),vwe=A("customEndpointTelemetryService");var gi=A("productService"),iF="vscode://schemas/vscode-product";var Gi=A("dialogService");var rF=A("fileDialogService");var ao=class extends xg{_onDidChangeDirty=this._register(new x);_onDidChangeLabel=this._register(new x);_onDidChangeCapabilities=this._register(new x);_onWillDispose=this._register(new x);onDidChangeDirty=this._onDidChangeDirty.event;onDidChangeLabel=this._onDidChangeLabel.event;onDidChangeCapabilities=this._onDidChangeCapabilities.event;onWillDispose=this._onWillDispose.event;closeHandler;get editorId(){}get capabilities(){return 2}hasCapability(e){return e===0?this.capabilities===0:(this.capabilities&e)!==0}isReadonly(){return this.hasCapability(2)}getName(){return`Editor ${this.typeId}`}getDescription(e){}getTitle(e){return this.getName()}getLabelExtraClasses(){return[]}getAriaLabel(){return this.getTitle(0)}getIcon(){}getTelemetryDescriptor(){return{typeId:this.typeId}}isDirty(){return!1}isModified(){return this.isDirty()}isSaving(){return!1}async resolve(){return null}async save(e,t){return this}async saveAs(e,t){return this}async revert(e,t){}async rename(e,t){}copy(){return this}canMove(e,t){return!0}matches(e){if(fi(e))return this===e;let t=e.options?.override;return this.editorId!==t&&t!==void 0&&this.editorId!==void 0?!1:To(this.resource,Wa.getCanonicalUri(e))}prefersEditorPane(e){return e.at(0)}toUntyped(e){}isDisposed(){return this._store.isDisposed}dispose(){this.isDisposed()||this._onWillDispose.fire(),super.dispose()}};var Gr=class extends ao{constructor(t,n,i,o,s){super();this.preferredName=t;this.preferredDescription=n;this.secondary=i;this.primary=o;this.editorService=s;this.registerListeners()}static ID="workbench.editorinputs.sidebysideEditorInput";get typeId(){return Gr.ID}get capabilities(){let t=this.primary.capabilities;return t&=-33,this.secondary.hasCapability(16)&&(t|=16),this.secondary.hasCapability(8)&&(t|=8),t|=256,t}get resource(){if(this.hasIdenticalSides)return this.primary.resource}hasIdenticalSides=this.primary.matches(this.secondary);registerListeners(){this._register(N.once(N.any(this.primary.onWillDispose,this.secondary.onWillDispose))(()=>{this.isDisposed()||this.dispose()})),this._register(this.primary.onDidChangeDirty(()=>this._onDidChangeDirty.fire())),this._register(this.primary.onDidChangeCapabilities(()=>this._onDidChangeCapabilities.fire())),this._register(this.secondary.onDidChangeCapabilities(()=>this._onDidChangeCapabilities.fire())),this._register(this.primary.onDidChangeLabel(()=>this._onDidChangeLabel.fire())),this._register(this.secondary.onDidChangeLabel(()=>this._onDidChangeLabel.fire()))}getName(){let t=this.getPreferredName();return t||(this.hasIdenticalSides?this.primary.getName():c("sideBySideLabels","{0} - {1}",this.secondary.getName(),this.primary.getName()))}getPreferredName(){return this.preferredName}getDescription(t){let n=this.getPreferredDescription();return n||(this.hasIdenticalSides?this.primary.getDescription(t):super.getDescription(t))}getPreferredDescription(){return this.preferredDescription}getTitle(t){let n;this.hasIdenticalSides?n=this.primary.getTitle(t)??this.getName():n=super.getTitle(t);let i=this.getPreferredTitle();return i&&(n=`${i} (${n})`),n}getPreferredTitle(){if(this.preferredName&&this.preferredDescription)return`${this.preferredName} ${this.preferredDescription}`;if(this.preferredName||this.preferredDescription)return this.preferredName??this.preferredDescription}getLabelExtraClasses(){return this.hasIdenticalSides?this.primary.getLabelExtraClasses():super.getLabelExtraClasses()}getAriaLabel(){return this.hasIdenticalSides?this.primary.getAriaLabel():super.getAriaLabel()}getTelemetryDescriptor(){return{...this.primary.getTelemetryDescriptor(),...super.getTelemetryDescriptor()}}isDirty(){return this.primary.isDirty()}isSaving(){return this.primary.isSaving()}async save(t,n){let i=await this.primary.save(t,n);return this.saveResultToEditor(i)}async saveAs(t,n){let i=await this.primary.saveAs(t,n);return this.saveResultToEditor(i)}saveResultToEditor(t){if(!t||!this.hasIdenticalSides)return t;if(this.primary.matches(t))return this;if(t instanceof ao)return new Gr(this.preferredName,this.preferredDescription,t,t,this.editorService);if(!rs(t)&&!yp(t)&&!qs(t)&&!$s(t))return{primary:t,secondary:t,label:this.preferredName,description:this.preferredDescription}}revert(t,n){return this.primary.revert(t,n)}async rename(t,n){if(!this.hasIdenticalSides)return;let i=await this.primary.rename(t,n);if(i){if(fi(i.editor))return{editor:new Gr(this.preferredName,this.preferredDescription,i.editor,i.editor,this.editorService),options:{...i.options,viewState:lI(this,t,this.editorService)}};if(oF(i.editor))return{editor:{label:this.preferredName,description:this.preferredDescription,primary:i.editor,secondary:i.editor,options:{...i.options,viewState:lI(this,t,this.editorService)}}}}}isReadonly(){return this.primary.isReadonly()}toUntyped(t){let n=this.primary.toUntyped(t),i=this.secondary.toUntyped(t);if(n&&i&&!rs(n)&&!rs(i)&&!yp(n)&&!yp(i)&&!qs(n)&&!qs(i)&&!$s(n)&&!$s(i)){let o={label:this.preferredName,description:this.preferredDescription,primary:n,secondary:i};return typeof t?.preserveViewState=="number"&&(o.options={viewState:lI(this,t.preserveViewState,this.editorService)}),o}}matches(t){return this===t?!0:PD(t)||rs(t)?!1:t instanceof Gr?this.primary.matches(t.primary)&&this.secondary.matches(t.secondary):qs(t)?this.primary.matches(t.primary)&&this.secondary.matches(t.secondary):!1}};Gr=C([v(4,Rn)],Gr);var AD={LEFT:"left",RIGHT:"right",FIRST:"first",LAST:"last"};function hH(r){let e=r;return!!(e&&typeof e=="object"&&Array.isArray(e.editors)&&Array.isArray(e.mru))}var Ys=class extends P{constructor(t,n,i){super();this.instantiationService=n;this.configurationService=i;hH(t)?this._id=this.deserialize(t):this._id=Ys.IDS++,this.onConfigurationUpdated(),this.registerListeners()}static IDS=0;_onDidModelChange=this._register(new x({leakWarningThreshold:500}));onDidModelChange=this._onDidModelChange.event;_id;get id(){return this._id}editors=[];mru=[];editorListeners=new Set;locked=!1;selection=[];get active(){return this.selection[0]??null}preview=null;sticky=-1;transient=new Set;editorOpenPositioning;focusRecentEditorAfterClose;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>this.onConfigurationUpdated(t)))}onConfigurationUpdated(t){t&&!t.affectsConfiguration("workbench.editor.openPositioning")&&!t.affectsConfiguration("workbench.editor.focusRecentEditorAfterClose")||(this.editorOpenPositioning=this.configurationService.getValue("workbench.editor.openPositioning"),this.focusRecentEditorAfterClose=this.configurationService.getValue("workbench.editor.focusRecentEditorAfterClose"))}get count(){return this.editors.length}get stickyCount(){return this.sticky+1}getEditors(t,n){let i=t===0?this.mru.slice(0):this.editors.slice(0);return n?.excludeSticky?t===0?i.filter(o=>!this.isSticky(o)):i.slice(this.sticky+1):i}getEditorByIndex(t){return this.editors[t]}get activeEditor(){return this.active}isActive(t){return this.matches(this.active,t)}get previewEditor(){return this.preview}openEditor(t,n){let i=n?.sticky||typeof n?.index=="number"&&this.isSticky(n.index),o=n?.pinned||n?.sticky,s=!!n?.transient,a=n?.active||!this.activeEditor||!o&&this.preview===this.activeEditor,l=this.findEditor(t,n);if(l){let[d,u]=l;return this.doSetTransient(d,u,s===!1?!1:this.isTransient(d)),o&&this.doPin(d,u),this.setSelection(a?d:this.activeEditor,n?.inactiveSelection??[]),n&&typeof n.index=="number"&&this.moveEditor(d,n.index),i&&this.doStick(d,this.indexOf(d)),{editor:d,isNew:!1}}else{let d=t,u=this.indexOf(this.active),p;if(n&&typeof n.index=="number"?p=n.index:this.editorOpenPositioning===AD.FIRST?(p=0,!i&&this.isSticky(p)&&(p=this.sticky+1)):this.editorOpenPositioning===AD.LAST?p=this.editors.length:(this.editorOpenPositioning===AD.LEFT?u===0||!this.editors.length?p=0:p=u:p=u+1,!i&&this.isSticky(p)&&(p=this.sticky+1)),i&&(this.sticky++,this.isSticky(p)||(p=this.sticky)),(o||!this.preview)&&this.splice(p,!1,d),s&&this.doSetTransient(d,p,!0),!o){if(this.preview){let m=this.indexOf(this.preview);p>m&&p--,this.replaceEditor(this.preview,d,p,!a)}this.preview=d}this.registerEditorListeners(d);let h={kind:5,editor:d,editorIndex:p};return this._onDidModelChange.fire(h),this.setSelection(a?d:this.activeEditor,n?.inactiveSelection??[]),{editor:d,isNew:!0}}}registerEditorListeners(t){let n=new Q;this.editorListeners.add(n),n.add(N.once(t.onWillDispose)(()=>{let i=this.editors.indexOf(t);if(i>=0){let o={kind:15,editor:t,editorIndex:i};this._onDidModelChange.fire(o)}})),n.add(t.onDidChangeDirty(()=>{let i={kind:14,editor:t,editorIndex:this.editors.indexOf(t)};this._onDidModelChange.fire(i)})),n.add(t.onDidChangeLabel(()=>{let i={kind:9,editor:t,editorIndex:this.editors.indexOf(t)};this._onDidModelChange.fire(i)})),n.add(t.onDidChangeCapabilities(()=>{let i={kind:10,editor:t,editorIndex:this.editors.indexOf(t)};this._onDidModelChange.fire(i)})),n.add(this.onDidModelChange(i=>{i.kind===6&&i.editor?.matches(t)&&(vt(n),this.editorListeners.delete(n))}))}replaceEditor(t,n,i,o=!0){let s=this.doCloseEditor(t,1,o);if(this.splice(i,!1,n),s){let a={kind:6,...s};this._onDidModelChange.fire(a)}}closeEditor(t,n=0,i=!0){let o=this.doCloseEditor(t,n,i);if(o){let s={kind:6,...o};return this._onDidModelChange.fire(s),o}}doCloseEditor(t,n,i){let o=this.indexOf(t);if(o===-1)return;let s=this.editors[o],a=this.isSticky(o),l=this.active===s;if(i&&l)if(this.mru.length>1){let d;this.focusRecentEditorAfterClose?d=this.mru[1]:o===this.editors.length-1?d=this.editors[o-1]:d=this.editors[o+1];let u=this.selection.filter(p=>p!==s&&p!==d);this.doSetSelection(d,this.editors.indexOf(d),u)}else this.doSetSelection(null,void 0,[]);else if(!l&&this.doIsSelected(s)){let d=this.selection.filter(u=>u!==s&&u!==this.activeEditor);this.doSetSelection(this.activeEditor,this.indexOf(this.activeEditor),d)}return this.preview===s&&(this.preview=null),this.transient.delete(s),this.splice(o,!0),{editor:s,sticky:a,editorIndex:o,context:n}}moveEditor(t,n){n>=this.editors.length?n=this.editors.length-1:n<0&&(n=0);let i=this.indexOf(t);if(i<0||n===i)return;let o=this.editors[i],s=this.sticky;this.isSticky(i)&&n>this.sticky?this.sticky--:!this.isSticky(i)&&n<=this.sticky&&this.sticky++,this.editors.splice(i,1),this.editors.splice(n,0,o);let a={kind:7,editor:o,oldEditorIndex:i,editorIndex:n};if(this._onDidModelChange.fire(a),s!==this.sticky){let l={kind:13,editor:o,editorIndex:n};this._onDidModelChange.fire(l)}return o}setActive(t){let n;return t?n=this.setEditorActive(t):this.setGroupActive(),n}setGroupActive(){this._onDidModelChange.fire({kind:0})}setEditorActive(t){let n=this.findEditor(t);if(!n)return;let[i,o]=n;return this.doSetSelection(i,o,[]),i}get selectedEditors(){return this.editors.filter(t=>this.doIsSelected(t))}isSelected(t){let n;return typeof t=="number"?n=this.editors[t]:n=this.findEditor(t)?.[0],!!n&&this.doIsSelected(n)}doIsSelected(t){return this.selection.includes(t)}setSelection(t,n){let i=this.findEditor(t);if(!i)return;let[o,s]=i,a=new Set;for(let l of n){let d=this.findEditor(l);if(!d)return;let[u]=d;u!==o&&a.add(u)}this.doSetSelection(o,s,Array.from(a))}doSetSelection(t,n,i){let o=this.activeEditor,s=this.selection,a;t?a=[t,...i]:a=[],this.selection=a;let l=t&&typeof n=="number"&&o!==t;if(l){let d=this.indexOf(t,this.mru);this.mru.splice(d,1),this.mru.unshift(t);let u={kind:8,editor:t,editorIndex:n};this._onDidModelChange.fire(u)}if(l||s.length!==a.length||s.some(d=>!a.includes(d))){let d={kind:4};this._onDidModelChange.fire(d)}}setIndex(t){this._onDidModelChange.fire({kind:1})}setLabel(t){this._onDidModelChange.fire({kind:2})}pin(t){let n=this.findEditor(t);if(!n)return;let[i,o]=n;return this.doPin(i,o),i}doPin(t,n){if(this.isPinned(t))return;this.setTransient(t,!1),this.preview=null;let i={kind:11,editor:t,editorIndex:n};this._onDidModelChange.fire(i)}unpin(t){let n=this.findEditor(t);if(!n)return;let[i,o]=n;return this.doUnpin(i,o),i}doUnpin(t,n){if(!this.isPinned(t))return;let i=this.preview;this.preview=t;let o={kind:11,editor:t,editorIndex:n};this._onDidModelChange.fire(o),i&&this.closeEditor(i,3)}isPinned(t){let n;return typeof t=="number"?n=this.editors[t]:n=t,!this.matches(this.preview,n)}stick(t){let n=this.findEditor(t);if(!n)return;let[i,o]=n;return this.doStick(i,o),i}doStick(t,n){if(this.isSticky(n))return;this.pin(t);let i=this.sticky+1;this.moveEditor(t,i),this.sticky++;let o={kind:13,editor:t,editorIndex:i};this._onDidModelChange.fire(o)}unstick(t){let n=this.findEditor(t);if(!n)return;let[i,o]=n;return this.doUnstick(i,o),i}doUnstick(t,n){if(!this.isSticky(n))return;let i=this.sticky;this.moveEditor(t,i),this.sticky--;let o={kind:13,editor:t,editorIndex:i};this._onDidModelChange.fire(o)}isSticky(t){if(this.sticky<0)return!1;let n;return typeof t=="number"?n=t:n=this.indexOf(t),n<0?!1:n<=this.sticky}setTransient(t,n){if(!n&&this.transient.size===0)return;let i=this.findEditor(t);if(!i)return;let[o,s]=i;return this.doSetTransient(o,s,n),o}doSetTransient(t,n,i){if(i){if(this.transient.has(t))return;this.transient.add(t)}else{if(!this.transient.has(t))return;this.transient.delete(t)}let o={kind:12,editor:t,editorIndex:n};this._onDidModelChange.fire(o)}isTransient(t){if(this.transient.size===0)return!1;let n;return typeof t=="number"?n=this.editors[t]:n=this.findEditor(t)?.[0],!!n&&this.transient.has(n)}splice(t,n,i){let o=this.editors[t];if(n&&this.isSticky(t)&&this.sticky--,i?this.editors.splice(t,n?1:0,i):this.editors.splice(t,n?1:0),!n&&i)this.mru.length===0?this.mru.push(i):this.mru.splice(1,0,i);else{let s=this.indexOf(o,this.mru);n&&!i?this.mru.splice(s,1):n&&i&&this.mru.splice(s,1,i)}}indexOf(t,n=this.editors,i){let o=-1;if(!t)return o;for(let s=0;s<n.length;s++){let a=n[s];if(this.matches(a,t,i))if(i?.supportSideBySide&&a instanceof Gr&&!(t instanceof Gr))o=s;else{o=s;break}}return o}findEditor(t,n){let i=this.indexOf(t,this.editors,n);if(i!==-1)return[this.editors[i],i]}isFirst(t,n=this.editors){return this.matches(n[0],t)}isLast(t,n=this.editors){return this.matches(n[n.length-1],t)}contains(t,n){return this.indexOf(t,this.editors,n)!==-1}matches(t,n,i){if(!t||!n)return!1;if(i?.supportSideBySide&&t instanceof Gr&&!(n instanceof Gr))switch(i.supportSideBySide){case 4:if(this.matches(t.primary,n,i)||this.matches(t.secondary,n,i))return!0;break;case 3:if(this.matches(t.primary,n,i)&&this.matches(t.secondary,n,i))return!0;break}let o=t===n;return i?.strictEquals?o:o||t.matches(n)}get isLocked(){return this.locked}lock(t){this.isLocked!==t&&(this.locked=t,this._onDidModelChange.fire({kind:3}))}clone(){let t=this.instantiationService.createInstance(Ys,void 0);t.editors=this.editors.slice(0),t.mru=this.mru.slice(0),t.preview=this.preview,t.selection=this.selection.slice(0),t.sticky=this.sticky;for(let n of t.editors)t.registerEditorListeners(n);return t}serialize(){let t=Ce.as(js.EditorFactory),n=[],i=[],o,s=this.sticky;for(let l=0;l<this.editors.length;l++){let d=this.editors[l],u=!1,p=t.getEditorSerializer(d);if(p){let h=p.canSerialize(d)?p.serialize(d):void 0;typeof h=="string"?(u=!0,i.push({id:d.typeId,value:h}),n.push(d),this.preview===d&&(o=n.length-1)):u=!1}!u&&this.isSticky(l)&&s--}let a=this.mru.map(l=>this.indexOf(l,n)).filter(l=>l>=0);return{id:this.id,locked:this.locked?!0:void 0,editors:i,mru:a,preview:o,sticky:s>=0?s:void 0}}deserialize(t){let n=Ce.as(js.EditorFactory);return typeof t.id=="number"?(this._id=t.id,Ys.IDS=Math.max(t.id+1,Ys.IDS)):this._id=Ys.IDS++,t.locked&&(this.locked=!0),this.editors=vn(t.editors.map((i,o)=>{let s,a=n.getEditorSerializer(i.id);if(a){let l=a.deserialize(this.instantiationService,i.value);l instanceof ao&&(s=l,this.registerEditorListeners(s))}return!s&&typeof t.sticky=="number"&&o<=t.sticky&&t.sticky--,s})),this.mru=vn(t.mru.map(i=>this.editors[i])),this.selection=this.mru.length>0?[this.mru[0]]:[],typeof t.preview=="number"&&(this.preview=this.editors[t.preview]),typeof t.sticky=="number"&&(this.sticky=t.sticky),this._id}dispose(){vt(Array.from(this.editorListeners)),this.editorListeners.clear(),this.transient.clear(),super.dispose()}};Ys=C([v(1,_e),v(2,ke)],Ys);var Tg={exports:{}};(function(){function e(o){let s=[];typeof o=="number"&&s.push("code/timeOrigin",o);function a(d){s.push(d,Date.now())}function l(){let d=[];for(let u=0;u<s.length;u+=2)d.push({name:s[u],startTime:s[u+1]});return d}return{mark:a,getMarks:l}}function t(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?e():{mark(o){performance.mark(o)},getMarks(){let o=performance.timeOrigin;typeof o!="number"&&(o=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);let s=[{name:"code/timeOrigin",startTime:Math.round(o)}];for(let a of performance.getEntriesByType("mark"))s.push({name:a.name,startTime:Math.round(o+a.startTime)});return s}};if(typeof process=="object"){let o=performance?.timeOrigin;return e(o)}else return console.trace("perf-util loaded in UNKNOWN environment"),e()}function n(o){return o.MonacoPerformanceMarks||(o.MonacoPerformanceMarks=t()),o.MonacoPerformanceMarks}var i;typeof global=="object"?i=global:typeof self=="object"?i=self:i={},typeof Tg=="object"&&typeof Tg.exports=="object"?Tg.exports=n(i):(console.trace("perf-util defined in UNKNOWN context (neither requirejs or commonjs)"),i.perf=n(i))})();var Vn=Tg.exports.mark,aF=Tg.exports.getMarks;function OD(r,e){return e&&(r.stack||r.stacktrace)?c("stackTrace.format","{0}: {1}",cF(r),dF(r.stack)||dF(r.stacktrace)):cF(r)}function dF(r){return Array.isArray(r)?r.join(`
`):r}function cF(r){return r.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${r.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof r.code=="string"&&typeof r.errno=="number"&&typeof r.syscall=="string"?c("nodeExceptionMessage","A system error occurred ({0})",r.message):r.message||c("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function dc(r=null,e=!1){if(!r)return c("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(r)){let t=vn(r),n=dc(t[0],e);return t.length>1?c("error.moreErrors","{0} ({1} errors in total)",n,t.length):n}if(lt(r))return r;if(r.detail){let t=r.detail;if(t.error)return OD(t.error,e);if(t.exception)return OD(t.exception,e)}return r.stack?OD(r,e):r.message?r.message:c("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function MD(r){let e=r;return e instanceof Error&&Array.isArray(e.actions)}function os(r){return FD(r,0)}function FD(r,e){switch(typeof r){case"object":return r===null?za(349,e):Array.isArray(r)?vH(r,e):yH(r,e);case"string":return wg(r,e);case"boolean":return bH(r,e);case"number":return za(r,e);case"undefined":return za(937,e);default:return za(617,e)}}function za(r,e){return(e<<5)-e+r|0}function bH(r,e){return za(r?433:863,e)}function wg(r,e){e=za(149417,e);for(let t=0,n=r.length;t<n;t++)e=za(r.charCodeAt(t),e);return e}function vH(r,e){return e=za(104579,e),r.reduce((t,n)=>FD(n,t),e)}function yH(r,e){return e=za(181387,e),Object.keys(r).sort().reduce((t,n)=>(t=wg(n,t),FD(r[n],t)),e)}function ND(r,e,t=32){let n=t-e,i=~((1<<n)-1);return(r<<e|(i&r)>>>n)>>>0}function uF(r,e=0,t=r.byteLength,n=0){for(let i=0;i<t;i++)r[e+i]=n}function IH(r,e,t="0"){for(;r.length<e;)r=t+r;return r}function Eg(r,e=32){return r instanceof ArrayBuffer?Array.from(new Uint8Array(r)).map(t=>t.toString(16).padStart(2,"0")).join(""):IH((r>>>0).toString(16),e/4)}var pF=class r{static _bigBlock32=new DataView(new ArrayBuffer(320));_h0=1732584193;_h1=4023233417;_h2=2562383102;_h3=271733878;_h4=3285377520;_buff;_buffDV;_buffLen;_totalLen;_leftoverHighSurrogate;_finished;constructor(){this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){let t=e.length;if(t===0)return;let n=this._buff,i=this._buffLen,o=this._leftoverHighSurrogate,s,a;for(o!==0?(s=o,a=-1,o=0):(s=e.charCodeAt(0),a=0);;){let l=s;if(Fr(s))if(a+1<t){let d=e.charCodeAt(a+1);gu(d)?(a++,l=Wb(s,d)):l=65533}else{o=s;break}else gu(s)&&(l=65533);if(i=this._push(n,i,l),a++,a<t)s=e.charCodeAt(a);else break}this._buffLen=i,this._leftoverHighSurrogate=o}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),Eg(this._h0)+Eg(this._h1)+Eg(this._h2)+Eg(this._h3)+Eg(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,uF(this._buff,this._buffLen),this._buffLen>56&&(this._step(),uF(this._buff));let e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){let e=r._bigBlock32,t=this._buffDV;for(let p=0;p<64;p+=4)e.setUint32(p,t.getUint32(p,!1),!1);for(let p=64;p<320;p+=4)e.setUint32(p,ND(e.getUint32(p-12,!1)^e.getUint32(p-32,!1)^e.getUint32(p-56,!1)^e.getUint32(p-64,!1),1),!1);let n=this._h0,i=this._h1,o=this._h2,s=this._h3,a=this._h4,l,d,u;for(let p=0;p<80;p++)p<20?(l=i&o|~i&s,d=1518500249):p<40?(l=i^o^s,d=1859775393):p<60?(l=i&o|i&s|o&s,d=2400959708):(l=i^o^s,d=3395469782),u=ND(n,5)+l+a+d+e.getUint32(p*4,!1)&4294967295,a=s,s=o,o=ND(i,30),i=n,n=u;this._h0=this._h0+n&4294967295,this._h1=this._h1+i&4294967295,this._h2=this._h2+o&4294967295,this._h3=this._h3+s&4294967295,this._h4=this._h4+a&4294967295}};var Et=A("logService"),Bke=A("loggerService");function dI(r){switch(r){case 1:return"trace";case 2:return"debug";case 3:return"info";case 4:return"warn";case 5:return"error";case 0:return"off"}}var Uke=new V("logLevel",dI(3));var Ln=A("IUriIdentityService");function hF(r){let e=r;return!!(e&&typeof e=="object"&&typeof e.id=="string"&&typeof e.isDefault=="boolean"&&typeof e.name=="string"&&W.isUri(e.location)&&W.isUri(e.globalStorageHome)&&W.isUri(e.settingsResource)&&W.isUri(e.keybindingsResource)&&W.isUri(e.tasksResource)&&W.isUri(e.snippetsHome)&&W.isUri(e.extensionsResource))}var Yl=A("IUserDataProfilesService");function cI(r,e,t,n,i,o){return{id:r,name:e,location:t,isDefault:!1,shortName:i?.shortName,icon:i?.icon,globalStorageHome:o&&i?.useDefaultFlags?.globalState?o.globalStorageHome:Be(t,"globalStorage"),settingsResource:o&&i?.useDefaultFlags?.settings?o.settingsResource:Be(t,"settings.json"),keybindingsResource:o&&i?.useDefaultFlags?.keybindings?o.keybindingsResource:Be(t,"keybindings.json"),tasksResource:o&&i?.useDefaultFlags?.tasks?o.tasksResource:Be(t,"tasks.json"),snippetsHome:o&&i?.useDefaultFlags?.snippets?o.snippetsHome:Be(t,"snippets"),extensionsResource:o&&i?.useDefaultFlags?.extensions?o.extensionsResource:Be(t,"extensions.json"),cacheHome:Be(n,r),useDefaultFlags:i?.useDefaultFlags,isTransient:i?.transient}}var uI=class extends P{constructor(t,n,i,o){super();this.environmentService=t;this.fileService=n;this.uriIdentityService=i;this.logService=o;this.profilesHome=Be(this.environmentService.userRoamingDataHome,"profiles"),this.profilesCacheHome=Be(this.environmentService.cacheHome,"CachedProfilesData")}static PROFILES_KEY="userDataProfiles";static PROFILE_ASSOCIATIONS_KEY="profileAssociations";_serviceBrand;enabled=!0;profilesHome;profilesCacheHome;get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.profilesObject.profiles,...this.transientProfilesObject.profiles]}_onDidChangeProfiles=this._register(new x);onDidChangeProfiles=this._onDidChangeProfiles.event;_onWillCreateProfile=this._register(new x);onWillCreateProfile=this._onWillCreateProfile.event;_onWillRemoveProfile=this._register(new x);onWillRemoveProfile=this._onWillRemoveProfile.event;_onDidResetWorkspaces=this._register(new x);onDidResetWorkspaces=this._onDidResetWorkspaces.event;profileCreationPromises=new Map;transientProfilesObject={profiles:[],folders:new ci,workspaces:new ci,emptyWindows:new Map};init(){this._profilesObject=void 0}setEnablement(t){this.enabled!==t&&(this._profilesObject=void 0,this.enabled=t)}isEnabled(){return this.enabled}_profilesObject;get profilesObject(){if(!this._profilesObject){let t=this.createDefaultProfile(),n=[t];if(this.enabled)try{for(let s of this.getStoredProfiles()){if(!s.name||!lt(s.name)||!s.location){this.logService.warn("Skipping the invalid stored profile",s.location||s.name);continue}n.push(cI(oo(s.location),s.name,s.location,this.profilesCacheHome,{shortName:s.shortName,icon:s.icon,useDefaultFlags:s.useDefaultFlags},t))}}catch(s){this.logService.error(s)}let i=new ci,o=new Map;if(n.length)try{let s=this.getStoredProfileAssociations();if(s.workspaces)for(let[a,l]of Object.entries(s.workspaces)){let d=W.parse(a),u=n.find(p=>p.id===l);u&&i.set(d,u)}if(s.emptyWindows)for(let[a,l]of Object.entries(s.emptyWindows)){let d=n.find(u=>u.id===l);d&&o.set(a,d)}}catch(s){this.logService.error(s)}this._profilesObject={profiles:n,workspaces:i,emptyWindows:o}}return this._profilesObject}createDefaultProfile(){let t=cI("__default__profile__",c("defaultProfile","Default"),this.environmentService.userRoamingDataHome,this.profilesCacheHome);return{...t,extensionsResource:this.getDefaultProfileExtensionsLocation()??t.extensionsResource,isDefault:!0}}async createTransientProfile(t){let n="Temp",i=new RegExp(`${Ni(n)}\\s(\\d+)`),o=0;for(let a of this.profiles){let l=i.exec(a.name),d=l?parseInt(l[1]):0;o=d>o?d:o}let s=`${n} ${o+1}`;return this.createProfile(os(In()).toString(16),s,{transient:!0},t)}async createNamedProfile(t,n,i){return this.createProfile(os(In()).toString(16),t,n,i)}async createProfile(t,n,i,o){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");let s=await this.doCreateProfile(t,n,i);return o&&await this.setProfileForWorkspace(o,s),s}async doCreateProfile(t,n,i){if(!lt(n)||!n)throw new Error("Name of the profile is mandatory and must be of type `string`");let o=this.profileCreationPromises.get(n);return o||(o=(async()=>{try{if(this.profiles.find(d=>d.name===n||d.id===t))throw new Error(`Profile with ${n} name already exists`);let a=cI(t,n,Be(this.profilesHome,t),this.profilesCacheHome,i,this.defaultProfile);await this.fileService.createFolder(a.location);let l=[];return this._onWillCreateProfile.fire({profile:a,join(d){l.push(d)}}),await Ci.settled(l),this.updateProfiles([a],[],[]),a}finally{this.profileCreationPromises.delete(n)}})(),this.profileCreationPromises.set(n,o)),o}async updateProfile(t,n){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");let i=this.profiles.find(o=>o.id===t.id);if(!i)throw new Error(`Profile '${t.name}' does not exist`);return i=cI(i.id,n.name??i.name,i.location,this.profilesCacheHome,{shortName:n.shortName??i.shortName,icon:n.icon===null?void 0:n.icon??i.icon,transient:n.transient??i.isTransient,useDefaultFlags:n.useDefaultFlags??i.useDefaultFlags},this.defaultProfile),this.updateProfiles([],[],[i]),i}async removeProfile(t){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");if(t.isDefault)throw new Error("Cannot remove default profile");let n=this.profiles.find(o=>o.id===t.id);if(!n)throw new Error(`Profile '${t.name}' does not exist`);let i=[];this._onWillRemoveProfile.fire({profile:n,join(o){i.push(o)}});try{await Promise.allSettled(i)}catch(o){this.logService.error(o)}for(let o of[...this.profilesObject.emptyWindows.keys()])n.id===this.profilesObject.emptyWindows.get(o)?.id&&this.profilesObject.emptyWindows.delete(o);for(let o of[...this.profilesObject.workspaces.keys()])n.id===this.profilesObject.workspaces.get(o)?.id&&this.profilesObject.workspaces.delete(o);this.updateStoredProfileAssociations(),this.updateProfiles([],[n],[]);try{await this.fileService.del(n.cacheHome,{recursive:!0})}catch(o){xy(o)!==1&&this.logService.error(o)}}async setProfileForWorkspace(t,n){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");let i=this.profiles.find(o=>o.id===n.id);if(!i)throw new Error(`Profile '${n.name}' does not exist`);this.updateWorkspaceAssociation(t,i)}unsetWorkspace(t,n){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");this.updateWorkspaceAssociation(t,void 0,n)}async resetWorkspaces(){this.transientProfilesObject.folders.clear(),this.transientProfilesObject.workspaces.clear(),this.transientProfilesObject.emptyWindows.clear(),this.profilesObject.workspaces.clear(),this.profilesObject.emptyWindows.clear(),this.updateStoredProfileAssociations(),this._onDidResetWorkspaces.fire()}async cleanUp(){if(this.enabled&&await this.fileService.exists(this.profilesHome)){let t=await this.fileService.resolve(this.profilesHome);await Promise.all((t.children||[]).filter(n=>n.isDirectory&&this.profiles.every(i=>!this.uriIdentityService.extUri.isEqual(i.location,n.resource))).map(n=>this.fileService.del(n.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){if(!this.enabled)return;let t=this.transientProfilesObject.profiles.filter(n=>!this.isProfileAssociatedToWorkspace(n));await Promise.allSettled(t.map(n=>this.removeProfile(n)))}getProfileForWorkspace(t){let n=this.getWorkspace(t),i=W.isUri(n)?this.profilesObject.workspaces.get(n):this.profilesObject.emptyWindows.get(n);return i||(jd(t)?this.transientProfilesObject.folders.get(t.uri):wv(t)?this.transientProfilesObject.workspaces.get(t.configPath):this.transientProfilesObject.emptyWindows.get(t.id))}getWorkspace(t){return jd(t)?t.uri:wv(t)?t.configPath:t.id}isProfileAssociatedToWorkspace(t){return!!([...this.profilesObject.emptyWindows.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location))||[...this.profilesObject.workspaces.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location))||[...this.transientProfilesObject.emptyWindows.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location))||[...this.transientProfilesObject.workspaces.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location))||[...this.transientProfilesObject.folders.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location)))}updateProfiles(t,n,i){let o=[...this.profiles,...t],s=[],a=this.transientProfilesObject.profiles;this.transientProfilesObject.profiles=[];for(let l of o){if(l.isDefault||n.some(u=>l.id===u.id))continue;l=i.find(u=>l.id===u.id)??l;let d=a.find(u=>l.id===u.id);if(l.isTransient)this.transientProfilesObject.profiles.push(l);else{if(d){for(let[u,p]of this.transientProfilesObject.emptyWindows.entries())if(l.id===p.id){this.updateWorkspaceAssociation({id:u},l);break}for(let[u,p]of this.transientProfilesObject.workspaces.entries())if(l.id===p.id){this.updateWorkspaceAssociation({id:"",configPath:u},l);break}for(let[u,p]of this.transientProfilesObject.folders.entries())if(l.id===p.id){this.updateWorkspaceAssociation({id:"",uri:u},l);break}}s.push({location:l.location,name:l.name,shortName:l.shortName,icon:l.icon,useDefaultFlags:l.useDefaultFlags})}}this.saveStoredProfiles(s),this._profilesObject=void 0,this.triggerProfilesChanges(t,n,i)}triggerProfilesChanges(t,n,i){this._onDidChangeProfiles.fire({added:t,removed:n,updated:i,all:this.profiles})}updateWorkspaceAssociation(t,n,i){if(i=n?.isTransient?!0:i,i)jd(t)?(this.transientProfilesObject.folders.delete(t.uri),n&&this.transientProfilesObject.folders.set(t.uri,n)):wv(t)?(this.transientProfilesObject.workspaces.delete(t.configPath),n&&this.transientProfilesObject.workspaces.set(t.configPath,n)):(this.transientProfilesObject.emptyWindows.delete(t.id),n&&this.transientProfilesObject.emptyWindows.set(t.id,n));else{this.updateWorkspaceAssociation(t,void 0,!0);let o=this.getWorkspace(t);W.isUri(o)?(this.profilesObject.workspaces.delete(o),n&&this.profilesObject.workspaces.set(o,n)):(this.profilesObject.emptyWindows.delete(o),n&&this.profilesObject.emptyWindows.set(o,n)),this.updateStoredProfileAssociations()}}updateStoredProfileAssociations(){let t={};for(let[i,o]of this.profilesObject.workspaces.entries())t[i.toString()]=o.id;let n={};for(let[i,o]of this.profilesObject.emptyWindows.entries())n[i.toString()]=o.id;this.saveStoredProfileAssociations({workspaces:t,emptyWindows:n}),this._profilesObject=void 0}migrateStoredProfileAssociations(t){let n={},i=this.createDefaultProfile();if(t.workspaces)for(let[s,a]of Object.entries(t.workspaces)){let l=W.parse(a);n[s]=this.uriIdentityService.extUri.isEqual(l,i.location)?i.id:this.uriIdentityService.extUri.basename(l)}let o={};if(t.emptyWindows)for(let[s,a]of Object.entries(t.emptyWindows)){let l=W.parse(a);o[s]=this.uriIdentityService.extUri.isEqual(l,i.location)?i.id:this.uriIdentityService.extUri.basename(l)}return{workspaces:n,emptyWindows:o}}getStoredProfiles(){return[]}saveStoredProfiles(t){throw new Error("not implemented")}getStoredProfileAssociations(){return{}}saveStoredProfileAssociations(t){throw new Error("not implemented")}getDefaultProfileExtensionsLocation(){}};uI=C([v(0,Qt),v(1,dt),v(2,Ln),v(3,Et)],uI);var UD={WIDTH:400,WIDTH_WITH_VERTICAL_PANEL:600,HEIGHT:270};var B_e=A("editorGroupsService");var Rn=A("editorService");var VD=-2;var WD=class{constructor(e,t,n){this.id=e;this.dependencies=t;this.callback=n}};var mF=class r{static INSTANCE=new r;_isWebWorker=typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope";_isRenderer=typeof document=="object";_defineCalls=[];_state=1;_amdPolicy;constructor(){}_initialize(){if(this._state===1){if(globalThis.define){console.log("[amdX] AMD loader already present externally"),this._state=3;return}}else return;this._state=2,globalThis.define=(e,t,n)=>{typeof e!="string"&&(n=t,t=e,e=null),(typeof t!="object"||!Array.isArray(t))&&(n=t,t=null),this._defineCalls.push(new WD(e,t,n))},globalThis.define.amd=!0,this._isRenderer?this._amdPolicy=globalThis._VSCODE_WEB_PACKAGE_TTP??window.trustedTypes?.createPolicy("amdLoader",{createScriptURL(e){if(e.startsWith(window.location.origin)||e.startsWith(`${le.vscodeFileResource}://${Iw}`))return e;throw new Error(`[trusted_script_src] Invalid script url: ${e}`)}}):this._isWebWorker&&(this._amdPolicy=globalThis._VSCODE_WEB_PACKAGE_TTP??globalThis.trustedTypes?.createPolicy("amdLoader",{createScriptURL(e){return e}}))}async load(e){if(this._initialize(),this._state===3)return new Promise(s=>{let a=In();console.log(`[amdX] Using external define("${a}", ["${e}"])`),globalThis.define(a,[e],function(l){console.log(`[amdX] Got a result for ${a}: ${!!l}`),s(l)})});let t=await(this._isWebWorker?this._workerLoadScript(e):this._isRenderer?this._rendererLoadScript(e):this._nodeJSLoadScript(e));if(!t){console.warn(`Did not receive a define call from script ${e}`);return}let n={},i=[],o=[];if(Array.isArray(t.dependencies))for(let s of t.dependencies)s==="exports"?i.push(n):o.push(s);if(o.length>0)throw new Error(`Cannot resolve dependencies for script ${e}. The dependencies are: ${o.join(", ")}`);return typeof t.callback=="function"?t.callback(...i)??n:t.callback}_rendererLoadScript(e){return new Promise((t,n)=>{let i=document.createElement("script");i.setAttribute("async","async"),i.setAttribute("type","text/javascript");let o=()=>{i.removeEventListener("load",s),i.removeEventListener("error",a)},s=l=>{o(),t(this._defineCalls.pop())},a=l=>{o(),n(l)};i.addEventListener("load",s),i.addEventListener("error",a),this._amdPolicy&&(e=this._amdPolicy.createScriptURL(e)),i.setAttribute("src",e),window.document.getElementsByTagName("head")[0].appendChild(i)})}async _workerLoadScript(e){return this._amdPolicy&&(e=this._amdPolicy.createScriptURL(e)),await import(e),this._defineCalls.pop()}async _nodeJSLoadScript(e){try{let t=(await import("fs")).default,n=(await import("vm")).default,i=(await import("module")).default,o=W.parse(e).fsPath,s=t.readFileSync(o).toString(),a=i.wrap(s.replace(/^#!.*/,""));return new n.Script(a).runInThisContext().apply(),this._defineCalls.pop()}catch(t){throw t}}};var HD="utf8";var J1e=512*8,Z1e=512*128;var zD={utf8:{labelLong:"UTF-8",labelShort:"UTF-8",order:1,alias:"utf8bom",guessableName:"UTF-8"},utf8bom:{labelLong:"UTF-8 with BOM",labelShort:"UTF-8 with BOM",encodeOnly:!0,order:2,alias:"utf8"},utf16le:{labelLong:"UTF-16 LE",labelShort:"UTF-16 LE",order:3,guessableName:"UTF-16LE"},utf16be:{labelLong:"UTF-16 BE",labelShort:"UTF-16 BE",order:4,guessableName:"UTF-16BE"},windows1252:{labelLong:"Western (Windows 1252)",labelShort:"Windows 1252",order:5,guessableName:"windows-1252"},iso88591:{labelLong:"Western (ISO 8859-1)",labelShort:"ISO 8859-1",order:6},iso88593:{labelLong:"Western (ISO 8859-3)",labelShort:"ISO 8859-3",order:7},iso885915:{labelLong:"Western (ISO 8859-15)",labelShort:"ISO 8859-15",order:8},macroman:{labelLong:"Western (Mac Roman)",labelShort:"Mac Roman",order:9},cp437:{labelLong:"DOS (CP 437)",labelShort:"CP437",order:10},windows1256:{labelLong:"Arabic (Windows 1256)",labelShort:"Windows 1256",order:11},iso88596:{labelLong:"Arabic (ISO 8859-6)",labelShort:"ISO 8859-6",order:12},windows1257:{labelLong:"Baltic (Windows 1257)",labelShort:"Windows 1257",order:13},iso88594:{labelLong:"Baltic (ISO 8859-4)",labelShort:"ISO 8859-4",order:14},iso885914:{labelLong:"Celtic (ISO 8859-14)",labelShort:"ISO 8859-14",order:15},windows1250:{labelLong:"Central European (Windows 1250)",labelShort:"Windows 1250",order:16,guessableName:"windows-1250"},iso88592:{labelLong:"Central European (ISO 8859-2)",labelShort:"ISO 8859-2",order:17,guessableName:"ISO-8859-2"},cp852:{labelLong:"Central European (CP 852)",labelShort:"CP 852",order:18},windows1251:{labelLong:"Cyrillic (Windows 1251)",labelShort:"Windows 1251",order:19,guessableName:"windows-1251"},cp866:{labelLong:"Cyrillic (CP 866)",labelShort:"CP 866",order:20,guessableName:"IBM866"},iso88595:{labelLong:"Cyrillic (ISO 8859-5)",labelShort:"ISO 8859-5",order:21,guessableName:"ISO-8859-5"},koi8r:{labelLong:"Cyrillic (KOI8-R)",labelShort:"KOI8-R",order:22,guessableName:"KOI8-R"},koi8u:{labelLong:"Cyrillic (KOI8-U)",labelShort:"KOI8-U",order:23},iso885913:{labelLong:"Estonian (ISO 8859-13)",labelShort:"ISO 8859-13",order:24},windows1253:{labelLong:"Greek (Windows 1253)",labelShort:"Windows 1253",order:25,guessableName:"windows-1253"},iso88597:{labelLong:"Greek (ISO 8859-7)",labelShort:"ISO 8859-7",order:26,guessableName:"ISO-8859-7"},windows1255:{labelLong:"Hebrew (Windows 1255)",labelShort:"Windows 1255",order:27,guessableName:"windows-1255"},iso88598:{labelLong:"Hebrew (ISO 8859-8)",labelShort:"ISO 8859-8",order:28,guessableName:"ISO-8859-8"},iso885910:{labelLong:"Nordic (ISO 8859-10)",labelShort:"ISO 8859-10",order:29},iso885916:{labelLong:"Romanian (ISO 8859-16)",labelShort:"ISO 8859-16",order:30},windows1254:{labelLong:"Turkish (Windows 1254)",labelShort:"Windows 1254",order:31},iso88599:{labelLong:"Turkish (ISO 8859-9)",labelShort:"ISO 8859-9",order:32},windows1258:{labelLong:"Vietnamese (Windows 1258)",labelShort:"Windows 1258",order:33},gbk:{labelLong:"Simplified Chinese (GBK)",labelShort:"GBK",order:34},gb18030:{labelLong:"Simplified Chinese (GB18030)",labelShort:"GB18030",order:35},cp950:{labelLong:"Traditional Chinese (Big5)",labelShort:"Big5",order:36,guessableName:"Big5"},big5hkscs:{labelLong:"Traditional Chinese (Big5-HKSCS)",labelShort:"Big5-HKSCS",order:37},shiftjis:{labelLong:"Japanese (Shift JIS)",labelShort:"Shift JIS",order:38,guessableName:"SHIFT_JIS"},eucjp:{labelLong:"Japanese (EUC-JP)",labelShort:"EUC-JP",order:39,guessableName:"EUC-JP"},euckr:{labelLong:"Korean (EUC-KR)",labelShort:"EUC-KR",order:40,guessableName:"EUC-KR"},windows874:{labelLong:"Thai (Windows 874)",labelShort:"Windows 874",order:41},iso885911:{labelLong:"Latin/Thai (ISO 8859-11)",labelShort:"ISO 8859-11",order:42},koi8ru:{labelLong:"Cyrillic (KOI8-RU)",labelShort:"KOI8-RU",order:43},koi8t:{labelLong:"Tajik (KOI8-T)",labelShort:"KOI8-T",order:44},gb2312:{labelLong:"Simplified Chinese (GB 2312)",labelShort:"GB 2312",order:45,guessableName:"GB2312"},cp865:{labelLong:"Nordic DOS (CP 865)",labelShort:"CP 865",order:46},cp850:{labelLong:"Western European DOS (CP 850)",labelShort:"CP 850",order:47}},eRe=(()=>{let r={};for(let e in zD)zD[e].guessableName&&(r[e]=zD[e]);return r})();var ss=class extends Vl{constructor(t,n,i,o,s,a,l,d,u,p,h,m,f,g,y){super(l,a,g,y);this.resource=t;this.hasAssociatedFilePath=n;this.initialValue=i;this.preferredLanguageId=o;this.preferredEncoding=s;this.workingCopyBackupService=d;this.textResourceConfigurationService=u;this.workingCopyService=p;this.textFileService=h;this.labelService=m;this.editorService=f;this._register(this.workingCopyService.registerWorkingCopy(this)),o&&this.setLanguageId(o),this.onConfigurationChange(void 0,!1),this.registerListeners()}static FIRST_LINE_NAME_MAX_LENGTH=40;static FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH=this.FIRST_LINE_NAME_MAX_LENGTH*10;static ACTIVE_EDITOR_LANGUAGE_ID="${activeEditorLanguage}";_onDidChangeContent=this._register(new x);onDidChangeContent=this._onDidChangeContent.event;_onDidChangeName=this._register(new x);onDidChangeName=this._onDidChangeName.event;_onDidChangeDirty=this._register(new x);onDidChangeDirty=this._onDidChangeDirty.event;_onDidChangeEncoding=this._register(new x);onDidChangeEncoding=this._onDidChangeEncoding.event;_onDidSave=this._register(new x);onDidSave=this._onDidSave.event;_onDidRevert=this._register(new x);onDidRevert=this._onDidRevert.event;typeId=NO;capabilities=2;configuredLabelFormat="content";cachedModelFirstLineWords=void 0;get name(){return this.configuredLabelFormat==="content"&&!this.hasAssociatedFilePath&&this.cachedModelFirstLineWords?this.cachedModelFirstLineWords:this.labelService.getUriBasenameLabel(this.resource)}registerListeners(){this._register(this.textResourceConfigurationService.onDidChangeConfiguration(t=>this.onConfigurationChange(t,!0)))}onConfigurationChange(t,n){if(!t||t.affectsConfiguration(this.resource,"files.encoding")){let i=this.textResourceConfigurationService.getValue(this.resource,"files.encoding");this.configuredEncoding!==i&&typeof i=="string"&&(this.configuredEncoding=i,n&&!this.preferredEncoding&&this._onDidChangeEncoding.fire())}if(!t||t.affectsConfiguration(this.resource,"workbench.editor.untitled.labelFormat")){let i=this.textResourceConfigurationService.getValue(this.resource,"workbench.editor.untitled.labelFormat");this.configuredLabelFormat!==i&&(i==="content"||i==="name")&&(this.configuredLabelFormat=i,n&&this._onDidChangeName.fire())}}setLanguageId(t,n){let i=t===ss.ACTIVE_EDITOR_LANGUAGE_ID?this.editorService.activeTextEditorLanguageId:t;this.preferredLanguageId=i,i&&super.setLanguageId(i,n)}getLanguageId(){return this.textEditorModel?this.textEditorModel.getLanguageId():this.preferredLanguageId}configuredEncoding;getEncoding(){return this.preferredEncoding||this.configuredEncoding}async setEncoding(t){let n=this.getEncoding();this.preferredEncoding=t,n!==this.preferredEncoding&&this._onDidChangeEncoding.fire()}dirty=this.hasAssociatedFilePath||!!this.initialValue;isDirty(){return this.dirty}isModified(){return this.isDirty()}setDirty(t){this.dirty!==t&&(this.dirty=t,this._onDidChangeDirty.fire())}async save(t){let n=await this.textFileService.save(this.resource,t);return n&&this._onDidSave.fire({reason:t?.reason,source:t?.source}),!!n}async revert(){this.ignoreDirtyOnModelContentChange=!0;try{this.updateTextEditorModel(_D(""))}finally{this.ignoreDirtyOnModelContentChange=!1}this.setDirty(!1),this._onDidRevert.fire()}async backup(t){let n;return this.isResolved()?n=await this.textFileService.getEncodedReadable(this.resource,this.createSnapshot()??void 0,{encoding:HD}):typeof this.initialValue=="string"&&(n=vA(et.fromString(this.initialValue))),{content:n}}ignoreDirtyOnModelContentChange=!1;async resolve(){let t=!1,n=!1;if(this.textEditorModel)this.updateTextEditorModel(void 0,this.preferredLanguageId);else{let o,s=await this.workingCopyBackupService.resolve(this);s?(o=s.value,n=!0):o=yA(et.fromString(this.initialValue||""));let a=await nF(await this.textFileService.getDecodedStream(this.resource,o,{encoding:HD}));this.createTextEditorModel(a,this.resource,this.preferredLanguageId),t=!0}let i=Rt(this.textEditorModel);return this.installModelListeners(i),t&&((n||this.initialValue)&&this.updateNameFromFirstLine(i),this.setDirty(this.hasAssociatedFilePath||!!n||!!this.initialValue),(n||this.initialValue)&&this._onDidChangeContent.fire()),super.resolve()}installModelListeners(t){this._register(t.onDidChangeContent(n=>this.onModelContentChanged(t,n))),this._register(t.onDidChangeLanguage(()=>this.onConfigurationChange(void 0,!0))),super.installModelListeners(t)}onModelContentChanged(t,n){this.ignoreDirtyOnModelContentChange||(!this.hasAssociatedFilePath&&t.getLineCount()===1&&t.getLineLength(1)===0?this.setDirty(!1):this.setDirty(!0)),n.changes.some(i=>(i.range.startLineNumber===1||i.range.endLineNumber===1)&&i.range.startColumn<=ss.FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH)&&this.updateNameFromFirstLine(t),this._onDidChangeContent.fire(),this.autoDetectLanguage()}updateNameFromFirstLine(t){if(this.hasAssociatedFilePath)return;let n,i=t.getValueInRange({startLineNumber:1,endLineNumber:1,startColumn:1,endColumn:ss.FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH+1}).trim().replace(/\s+/g," ").replace(/\u202E/g,"");i=i.substr(0,zP(i,ss.FIRST_LINE_NAME_MAX_LENGTH)[0]),i&&Mm().exec(i)&&(n=i),n!==this.cachedModelFirstLineWords&&(this.cachedModelFirstLineWords=n,this._onDidChangeName.fire())}isReadonly(){return!1}};ss=C([v(5,ko),v(6,oc),v(7,Ey),v(8,wy),v(9,jl),v(10,Xl),v(11,Gs),v(12,Rn),v(13,Ty),v(14,Ps)],ss);var xH=A("untitledTextEditorService"),cc=class extends P{constructor(t,n){super();this.instantiationService=t;this.configurationService=n}static UNTITLED_WITHOUT_ASSOCIATED_RESOURCE_REGEX=/Untitled-\d+/;_onDidChangeDirty=this._register(new x);onDidChangeDirty=this._onDidChangeDirty.event;_onDidChangeEncoding=this._register(new x);onDidChangeEncoding=this._onDidChangeEncoding.event;_onDidCreate=this._register(new x);onDidCreate=this._onDidCreate.event;_onWillDispose=this._register(new x);onWillDispose=this._onWillDispose.event;_onDidChangeLabel=this._register(new x);onDidChangeLabel=this._onDidChangeLabel.event;mapResourceToModel=new ci;get(t){return this.mapResourceToModel.get(t)}getValue(t){return this.get(t)?.textEditorModel?.getValue()}async resolve(t){let n=this.doCreateOrGet(t);return await n.resolve(),n}create(t){return this.doCreateOrGet(t)}doCreateOrGet(t=Object.create(null)){let n=this.massageOptions(t);return n.untitledResource&&this.mapResourceToModel.has(n.untitledResource)?this.mapResourceToModel.get(n.untitledResource):this.doCreate(n)}massageOptions(t){let n=Object.create(null);if(t.associatedResource?(n.untitledResource=W.from({scheme:le.untitled,authority:t.associatedResource.authority,fragment:t.associatedResource.fragment,path:t.associatedResource.path,query:t.associatedResource.query}),n.associatedResource=t.associatedResource):t.untitledResource?.scheme===le.untitled&&(n.untitledResource=t.untitledResource),t.languageId)n.languageId=t.languageId;else if(!n.associatedResource){let i=this.configurationService.getValue();i.files?.defaultLanguage&&(n.languageId=i.files.defaultLanguage)}return n.encoding=t.encoding,n.initialValue=t.initialValue,n}doCreate(t){let n=t.untitledResource;if(!n){let o=1;do n=W.from({scheme:le.untitled,path:`Untitled-${o}`}),o++;while(this.mapResourceToModel.has(n))}let i=this._register(this.instantiationService.createInstance(ss,n,!!t.associatedResource,t.initialValue,t.languageId,t.encoding));return this.registerModel(i),i}registerModel(t){let n=new Q;n.add(t.onDidChangeDirty(()=>this._onDidChangeDirty.fire(t))),n.add(t.onDidChangeName(()=>this._onDidChangeLabel.fire(t))),n.add(t.onDidChangeEncoding(()=>this._onDidChangeEncoding.fire(t))),n.add(t.onWillDispose(()=>this._onWillDispose.fire(t))),N.once(t.onWillDispose)(()=>{this.mapResourceToModel.delete(t.resource),n.dispose()}),this.mapResourceToModel.set(t.resource,t),this._onDidCreate.fire(t),t.isDirty()&&this._onDidChangeDirty.fire(t)}isUntitledWithAssociatedResource(t){return t.scheme===le.untitled&&t.path.length>1&&!cc.UNTITLED_WITHOUT_ASSOCIATED_RESOURCE_REGEX.test(t.path)}canDispose(t){return t.isDisposed()?!0:this.doCanDispose(t)}async doCanDispose(t){return t.isDirty()?(await N.toPromise(t.onDidChangeDirty),this.canDispose(t)):!0}};cc=C([v(0,_e),v(1,ke)],cc);cn(xH,cc,1);var Ip=bn,wr=A("notificationService");var Cg=A("progressService");var TH=Object.freeze({total(){},worked(){},done(){}}),fF=class{constructor(e){this.callback=e}static None=Object.freeze({report(){}});_value;get value(){return this._value}report(e){this._value=e,this.callback(this._value)}};var pI=class extends P{deferred=new Ir;reporter;lastStep;constructor(e,t){super(),t.withProgress(e,n=>(this.reporter=n,this.lastStep&&n.report(this.lastStep),this.deferred.p)),this._register(ie(()=>this.deferred.complete()))}report(e){this.reporter?this.reporter.report(e):this.lastStep=e}};pI=C([v(1,Cg)],pI);var x0e=A("editorProgressService");var Sp=class extends P{constructor(t,n){super();this.logService=t;this.configurationService=n}participants=new ei;addFileOperationParticipant(t){let n=this.participants.push(t);return ie(()=>n())}async participate(t,n,i,o){let s=this.configurationService.getValue("files.participants.timeout");if(!(typeof s!="number"||s<=0))for(let a of this.participants)try{await a.participate(t,n,i,s,o)}catch(l){this.logService.warn(l)}}dispose(){this.participants.clear(),super.dispose()}};Sp=C([v(0,Et),v(1,ke)],Sp);var Cr=class extends P{constructor(t,n,i,o){super();this.getExpression=t;this.shouldUpdate=n;this.contextService=i;this.configurationService=o;this.updateExpressions(!1),this.registerListeners()}static NO_FOLDER=null;_onExpressionChange=this._register(new x);onExpressionChange=this._onExpressionChange.event;mapFolderToParsedExpression=new Map;mapFolderToConfiguredExpression=new Map;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>{this.shouldUpdate(t)&&this.updateExpressions(!0)})),this._register(this.contextService.onDidChangeWorkspaceFolders(()=>this.updateExpressions(!0)))}updateExpressions(t){let n=!1;for(let a of this.contextService.getWorkspace().folders){let l=a.uri.toString(),d=this.doGetExpression(a.uri),u=this.mapFolderToConfiguredExpression.get(l);d?(!u||!ii(u.expression,d.expression))&&(n=!0,this.mapFolderToParsedExpression.set(l,ek(d.expression)),this.mapFolderToConfiguredExpression.set(l,d)):u&&(n=!0,this.mapFolderToParsedExpression.delete(l),this.mapFolderToConfiguredExpression.delete(l))}let i=new Mb(this.contextService.getWorkspace().folders.map(a=>a.uri));for(let[a]of this.mapFolderToConfiguredExpression)a!==Cr.NO_FOLDER&&(i.has(W.parse(a))||(this.mapFolderToParsedExpression.delete(a),this.mapFolderToConfiguredExpression.delete(a),n=!0));let o=this.doGetExpression(void 0),s=this.mapFolderToConfiguredExpression.get(Cr.NO_FOLDER);o?(!s||!ii(s.expression,o.expression))&&(n=!0,this.mapFolderToParsedExpression.set(Cr.NO_FOLDER,ek(o.expression)),this.mapFolderToConfiguredExpression.set(Cr.NO_FOLDER,o)):s&&(n=!0,this.mapFolderToParsedExpression.delete(Cr.NO_FOLDER),this.mapFolderToConfiguredExpression.delete(Cr.NO_FOLDER)),t&&n&&this._onExpressionChange.fire()}doGetExpression(t){let n=this.getExpression(t);if(!n)return;let i=Object.keys(n);if(i.length===0)return;let o=!1,s=Object.create(null);for(let a of i){o||(o=wa(a));let l=a,d=aA(l,!0);if(d){let u=d.toLowerCase();d!==d.toLowerCase()&&(l=`${u}${l.substring(1)}`)}s[l]=n[a]}return{expression:s,hasAbsolutePath:o}}matches(t,n){if(this.mapFolderToParsedExpression.size===0)return!1;let i=this.contextService.getWorkspaceFolder(t),o,s;if(i&&this.mapFolderToParsedExpression.has(i.uri.toString())?(o=this.mapFolderToParsedExpression.get(i.uri.toString()),s=this.mapFolderToConfiguredExpression.get(i.uri.toString())):(o=this.mapFolderToParsedExpression.get(Cr.NO_FOLDER),s=this.mapFolderToConfiguredExpression.get(Cr.NO_FOLDER)),!o)return!1;let a;return i?a=Su(i.uri,t):a=this.uriToPath(t),typeof a=="string"&&o(a,void 0,n)?!0:a!==this.uriToPath(t)&&s?.hasAbsolutePath?!!o(this.uriToPath(t),void 0,n):!1}uriToPath(t){return t.scheme===le.file?t.fsPath:t.path}};Cr=C([v(2,Un),v(3,ke)],Cr);var EH=new V("autoSaveAfterShortDelayContext",!1,!0);var KD=A("filesConfigurationService"),kr=class extends P{constructor(t,n,i,o,s,a,l,d){super();this.contextKeyService=t;this.configurationService=n;this.contextService=i;this.environmentService=o;this.uriIdentityService=s;this.fileService=a;this.markerService=l;this.textResourceConfigurationService=d;let u=n.getValue();this.currentGlobalAutoSaveConfiguration=this.computeAutoSaveConfiguration(void 0,u.files),this.currentFilesAssociationConfiguration=u?.files?.associations,this.currentHotExitConfiguration=u?.files?.hotExit||ju.ON_EXIT,this.onFilesConfigurationChange(u,!1),this.registerListeners()}static DEFAULT_AUTO_SAVE_MODE=_t?ts.AFTER_DELAY:ts.OFF;static DEFAULT_AUTO_SAVE_DELAY=1e3;static READONLY_MESSAGES={providerReadonly:{value:c("providerReadonly","Editor is read-only because the file system of the file is read-only."),isTrusted:!0},sessionReadonly:{value:c({key:"sessionReadonly",comment:['Please do not translate the word "command", it is part of our internal syntax which must not change','{Locked="](command:{0})"}']},"Editor is read-only because the file was set read-only in this session. [Click here](command:{0}) to set writeable.","workbench.action.files.setActiveEditorWriteableInSession"),isTrusted:!0},configuredReadonly:{value:c({key:"configuredReadonly",comment:['Please do not translate the word "command", it is part of our internal syntax which must not change','{Locked="](command:{0})"}']},"Editor is read-only because the file was set read-only via settings. [Click here](command:{0}) to configure or [toggle for this session](command:{1}).",`workbench.action.openSettings?${encodeURIComponent('["files.readonly"]')}`,"workbench.action.files.toggleActiveEditorReadonlyInSession"),isTrusted:!0},fileLocked:{value:c({key:"fileLocked",comment:['Please do not translate the word "command", it is part of our internal syntax which must not change','{Locked="](command:{0})"}']},"Editor is read-only because of file permissions. [Click here](command:{0}) to set writeable anyway.","workbench.action.files.setActiveEditorWriteableInSession"),isTrusted:!0},fileReadonly:{value:c("fileReadonly","Editor is read-only because the file is read-only."),isTrusted:!0}};_onDidChangeAutoSaveConfiguration=this._register(new x);onDidChangeAutoSaveConfiguration=this._onDidChangeAutoSaveConfiguration.event;_onDidChangeAutoSaveDisabled=this._register(new x);onDidChangeAutoSaveDisabled=this._onDidChangeAutoSaveDisabled.event;_onDidChangeFilesAssociation=this._register(new x);onDidChangeFilesAssociation=this._onDidChangeFilesAssociation.event;_onDidChangeReadonly=this._register(new x);onDidChangeReadonly=this._onDidChangeReadonly.event;currentGlobalAutoSaveConfiguration;currentFilesAssociationConfiguration;currentHotExitConfiguration;autoSaveConfigurationCache=new xo(1e3);autoSaveDisabledOverrides=new ci;autoSaveAfterShortDelayContext=EH.bindTo(this.contextKeyService);readonlyIncludeMatcher=this._register(new wm(()=>this.createReadonlyMatcher(OO)));readonlyExcludeMatcher=this._register(new wm(()=>this.createReadonlyMatcher(MO)));configuredReadonlyFromPermissions;sessionReadonlyOverrides=new ci(t=>this.uriIdentityService.extUri.getComparisonKey(t));createReadonlyMatcher(t){let n=this._register(new Cr(i=>this.configurationService.getValue(t,{resource:i}),i=>i.affectsConfiguration(t),this.contextService,this.configurationService));return this._register(n.onExpressionChange(()=>this._onDidChangeReadonly.fire())),n}isReadonly(t,n){let i=this.fileService.getProvider(t.scheme);if(i&&AO(i))return i.readOnlyMessage??kr.READONLY_MESSAGES.providerReadonly;let o=this.sessionReadonlyOverrides.get(t);return typeof o=="boolean"?o===!0?kr.READONLY_MESSAGES.sessionReadonly:!1:this.uriIdentityService.extUri.isEqualOrParent(t,this.environmentService.userRoamingDataHome)||this.uriIdentityService.extUri.isEqual(t,this.contextService.getWorkspace().configuration??void 0)?!1:this.readonlyIncludeMatcher.value.matches(t)?this.readonlyExcludeMatcher.value.matches(t)?!1:kr.READONLY_MESSAGES.configuredReadonly:this.configuredReadonlyFromPermissions&&n?.locked?kr.READONLY_MESSAGES.fileLocked:n?.readonly?kr.READONLY_MESSAGES.fileReadonly:!1}async updateReadonly(t,n){if(n==="toggle"){let i;try{i=await this.fileService.resolve(t,{resolveMetadata:!0})}catch{}n=!this.isReadonly(t,i)}n==="reset"?this.sessionReadonlyOverrides.delete(t):this.sessionReadonlyOverrides.set(t,n),this._onDidChangeReadonly.fire()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>{t.affectsConfiguration("files")&&this.onFilesConfigurationChange(this.configurationService.getValue(),!0)}))}onFilesConfigurationChange(t,n){this.currentGlobalAutoSaveConfiguration=this.computeAutoSaveConfiguration(void 0,t.files),this.autoSaveConfigurationCache.clear(),this.autoSaveAfterShortDelayContext.set(this.getAutoSaveMode(void 0).mode===1),n&&this._onDidChangeAutoSaveConfiguration.fire();let i=t?.files?.associations;ii(this.currentFilesAssociationConfiguration,i)||(this.currentFilesAssociationConfiguration=i,n&&this._onDidChangeFilesAssociation.fire());let o=t?.files?.hotExit;o===ju.OFF||o===ju.ON_EXIT_AND_WINDOW_CLOSE?this.currentHotExitConfiguration=o:this.currentHotExitConfiguration=ju.ON_EXIT;let s=!!t?.files?.readonlyFromPermissions;s!==!!this.configuredReadonlyFromPermissions&&(this.configuredReadonlyFromPermissions=s,n&&this._onDidChangeReadonly.fire())}getAutoSaveConfiguration(t){let n=this.toResource(t);if(n){let i=this.autoSaveConfigurationCache.get(n);return i||(i=this.computeAutoSaveConfiguration(n,this.textResourceConfigurationService.getValue(n,"files")),this.autoSaveConfigurationCache.set(n,i)),i}return this.currentGlobalAutoSaveConfiguration}computeAutoSaveConfiguration(t,n){let i,o,s,a,l,d;switch(n?.autoSave??kr.DEFAULT_AUTO_SAVE_MODE){case ts.AFTER_DELAY:{i="afterDelay",o=typeof n?.autoSaveDelay=="number"&&n.autoSaveDelay>=0?n.autoSaveDelay:kr.DEFAULT_AUTO_SAVE_DELAY,d=o<=kr.DEFAULT_AUTO_SAVE_DELAY;break}case ts.ON_FOCUS_CHANGE:i="onFocusChange";break;case ts.ON_WINDOW_CHANGE:i="onWindowChange";break}return n?.autoSaveWorkspaceFilesOnly===!0&&(s=!0,t&&!this.contextService.isInsideWorkspace(t)&&(l=!0,d=void 0)),n?.autoSaveWhenNoErrors===!0&&(a=!0,d=void 0),{autoSave:i,autoSaveDelay:o,autoSaveWorkspaceFilesOnly:s,autoSaveWhenNoErrors:a,isOutOfWorkspace:l,isShortAutoSaveDelay:d}}toResource(t){return t instanceof ao?Wa.getOriginalUri(t,{supportSideBySide:1}):t}hasShortAutoSaveDelay(t){let n=this.toResource(t);return this.getAutoSaveConfiguration(n).isShortAutoSaveDelay?!n||!this.autoSaveDisabledOverrides.has(n):!1}getAutoSaveMode(t,n){let i=this.toResource(t);if(i&&this.autoSaveDisabledOverrides.has(i))return{mode:0,reason:4};let o=this.getAutoSaveConfiguration(i);if(typeof o.autoSave>"u")return{mode:0,reason:1};if(typeof n=="number"&&(o.autoSave==="afterDelay"&&n!==2||o.autoSave==="onFocusChange"&&n!==3&&n!==4||o.autoSave==="onWindowChange"&&n!==4))return{mode:0,reason:1};if(i){if(o.autoSaveWorkspaceFilesOnly&&o.isOutOfWorkspace)return{mode:0,reason:2};if(o.autoSaveWhenNoErrors&&this.markerService.read({resource:i,take:1,severities:8}).length>0)return{mode:0,reason:3}}switch(o.autoSave){case"afterDelay":return typeof o.autoSaveDelay=="number"&&o.autoSaveDelay<=kr.DEFAULT_AUTO_SAVE_DELAY?{mode:o.autoSaveWhenNoErrors?2:1}:{mode:2};case"onFocusChange":return{mode:3};case"onWindowChange":return{mode:4}}}async toggleAutoSave(){let t=this.configurationService.getValue("files.autoSave"),n;return[ts.AFTER_DELAY,ts.ON_FOCUS_CHANGE,ts.ON_WINDOW_CHANGE].some(i=>i===t)?n=ts.OFF:n=ts.AFTER_DELAY,this.configurationService.updateValue("files.autoSave",n)}disableAutoSave(t){let n=this.toResource(t);if(!n)return P.None;let i=this.autoSaveDisabledOverrides.get(n)??0;return this.autoSaveDisabledOverrides.set(n,i+1),i===0&&this._onDidChangeAutoSaveDisabled.fire(n),ie(()=>{let o=this.autoSaveDisabledOverrides.get(n)??0;o<=1?(this.autoSaveDisabledOverrides.delete(n),this._onDidChangeAutoSaveDisabled.fire(n)):this.autoSaveDisabledOverrides.set(n,o-1)})}get isHotExitEnabled(){return this.contextService.getWorkspace().transient?!1:this.currentHotExitConfiguration!==ju.OFF}get hotExitConfiguration(){return this.currentHotExitConfiguration}preventSaveConflicts(t,n){return this.configurationService.getValue("files.saveConflictResolution",{resource:t,overrideIdentifier:n})!=="overwriteFileOnDisk"}};kr=C([v(0,Ge),v(1,ke),v(2,Un),v(3,Qt),v(4,Ln),v(5,dt),v(6,gO),v(7,wy)],kr);cn(KD,kr,0);var GD=A("workingCopyEditorService"),kg=class extends P{constructor(t){super();this.editorService=t}_onDidRegisterHandler=this._register(new x);onDidRegisterHandler=this._onDidRegisterHandler.event;handlers=new Set;registerHandler(t){return this.handlers.add(t),this._onDidRegisterHandler.fire(t),ie(()=>this.handlers.delete(t))}findEditor(t){for(let n of this.editorService.getEditors(0))if(this.isOpen(t,n.editor))return n}isOpen(t,n){for(let i of this.handlers)if(i.isOpen(t,n))return!0;return!1}};kg=C([v(0,Rn)],kg);cn(GD,kg,1);var bF=A("elevatedFileService");var xp=class extends P{constructor(t,n){super();this.resource=t;this.fileService=n;this._register(this.fileService.onDidFilesChange(i=>this.onDidFilesChange(i)))}_onDidChangeOrphaned=this._register(new x);onDidChangeOrphaned=this._onDidChangeOrphaned.event;orphaned=!1;isOrphaned(){return this.orphaned}async onDidFilesChange(t){let n=!1,i;if(this.orphaned?t.contains(this.resource,1)&&(i=!1,n=!0):t.contains(this.resource,2)&&(i=!0,n=!0),n&&this.orphaned!==i){let o=!1;i&&(await Cn(100,rt.None),this.isDisposed()?o=!0:o=!await this.fileService.exists(this.resource)),this.orphaned!==o&&!this.isDisposed()&&this.setOrphaned(o)}}setOrphaned(t){this.orphaned!==t&&(this.orphaned=t,this._onDidChangeOrphaned.fire())}_onWillDispose=this._register(new x);onWillDispose=this._onWillDispose.event;isDisposed(){return this._store.isDisposed}dispose(){this.orphaned=!1,this._onWillDispose.fire(),super.dispose()}isModified(){return this.isDirty()}};xp=C([v(1,dt)],xp);var uc=class extends xp{constructor(t,n,i,o,s,a,l,d,u,p,h,m,f,g,y,T){super(n,a);this.typeId=t;this.name=i;this.modelFactory=o;this.externalResolver=s;this.logService=l;this.workingCopyFileService=d;this.filesConfigurationService=u;this.workingCopyBackupService=p;this.notificationService=m;this.workingCopyEditorService=f;this.editorService=g;this.elevatedFileService=y;this.progressService=T;this._register(h.registerWorkingCopy(this)),this.registerListeners()}capabilities=0;_model=void 0;get model(){return this._model}_onDidChangeContent=this._register(new x);onDidChangeContent=this._onDidChangeContent.event;_onDidResolve=this._register(new x);onDidResolve=this._onDidResolve.event;_onDidChangeDirty=this._register(new x);onDidChangeDirty=this._onDidChangeDirty.event;_onDidSaveError=this._register(new x);onDidSaveError=this._onDidSaveError.event;_onDidSave=this._register(new x);onDidSave=this._onDidSave.event;_onDidRevert=this._register(new x);onDidRevert=this._onDidRevert.event;_onDidChangeReadonly=this._register(new x);onDidChangeReadonly=this._onDidChangeReadonly.event;registerListeners(){this._register(this.filesConfigurationService.onDidChangeReadonly(()=>this._onDidChangeReadonly.fire()))}dirty=!1;savedVersionId;isDirty(){return this.dirty}markModified(){this.setDirty(!0)}setDirty(t){if(!this.isResolved())return;let n=this.dirty;this.doSetDirty(t),t!==n&&this._onDidChangeDirty.fire()}doSetDirty(t){let n=this.dirty,i=this.inConflictMode,o=this.inErrorMode,s=this.savedVersionId;return t?this.dirty=!0:(this.dirty=!1,this.inConflictMode=!1,this.inErrorMode=!1,this.isResolved()&&(this.savedVersionId=this.model.versionId)),()=>{this.dirty=n,this.inConflictMode=i,this.inErrorMode=o,this.savedVersionId=s}}lastResolvedFileStat;isResolved(){return!!this.model}async resolve(t){if(this.trace("resolve() - enter"),this.isDisposed()){this.trace("resolve() - exit - without resolving because file working copy is disposed");return}if(!t?.contents&&(this.dirty||this.saveSequentializer.isRunning())){this.trace("resolve() - exit - without resolving because file working copy is dirty or being saved");return}return this.doResolve(t)}async doResolve(t){if(t?.contents)return this.resolveFromBuffer(t.contents);if(!(!this.isResolved()&&await this.resolveFromBackup()))return this.resolveFromFile(t)}async resolveFromBuffer(t){this.trace("resolveFromBuffer()");let n,i,o,s;try{let a=await this.fileService.stat(this.resource);n=a.mtime,i=a.ctime,o=a.size,s=a.etag,this.setOrphaned(!1)}catch(a){n=Date.now(),i=Date.now(),o=0,s=ig,this.setOrphaned(a.fileOperationResult===1)}return this.resolveFromContent({resource:this.resource,name:this.name,mtime:n,ctime:i,size:o,etag:s,value:t,readonly:!1,locked:!1},!0)}async resolveFromBackup(){let t=await this.workingCopyBackupService.resolve(this);return this.isResolved()?(this.trace("resolveFromBackup() - exit - withoutresolving because previously new file working copy got created meanwhile"),!0):t?(await this.doResolveFromBackup(t),!0):!1}async doResolveFromBackup(t){this.trace("doResolveFromBackup()"),await this.resolveFromContent({resource:this.resource,name:this.name,mtime:t.meta?t.meta.mtime:Date.now(),ctime:t.meta?t.meta.ctime:Date.now(),size:t.meta?t.meta.size:0,etag:t.meta?t.meta.etag:ig,value:t.value,readonly:!1,locked:!1},!0),t.meta&&t.meta.orphaned&&this.setOrphaned(!0)}async resolveFromFile(t){this.trace("resolveFromFile()");let n=t?.forceReadFromFile,i;n?i=ig:this.lastResolvedFileStat&&(i=this.lastResolvedFileStat.etag);let o=this.versionId;try{let s=await this.fileService.readFileStream(this.resource,{etag:i,limits:t?.limits});if(this.setOrphaned(!1),o!==this.versionId){this.trace("resolveFromFile() - exit - without resolving because file working copy content changed");return}await this.resolveFromContent(s,!1)}catch(s){let a=s.fileOperationResult;if(this.setOrphaned(a===1),this.isResolved()&&a===2){s instanceof Iy&&this.updateLastResolvedFileStat(s.stat);return}if(this.isResolved()&&a===1&&!n)return;throw s}}async resolveFromContent(t,n){if(this.trace("resolveFromContent() - enter"),this.isDisposed()){this.trace("resolveFromContent() - exit - because working copy is disposed");return}this.updateLastResolvedFileStat({resource:this.resource,name:t.name,mtime:t.mtime,ctime:t.ctime,size:t.size,etag:t.etag,readonly:t.readonly,locked:t.locked,isFile:!0,isDirectory:!1,isSymbolicLink:!1,children:void 0}),this.isResolved()?await this.doUpdateModel(t.value):await this.doCreateModel(t.value),this.setDirty(!!n),this._onDidResolve.fire()}async doCreateModel(t){this.trace("doCreateModel()"),this._model=this._register(await this.modelFactory.createModel(this.resource,t,rt.None)),this.installModelListeners(this._model)}ignoreDirtyOnModelContentChange=!1;async doUpdateModel(t){this.trace("doUpdateModel()"),this.ignoreDirtyOnModelContentChange=!0;try{await this.model?.update(t,rt.None)}finally{this.ignoreDirtyOnModelContentChange=!1}}installModelListeners(t){this._register(t.onDidChangeContent(n=>this.onModelContentChanged(t,n.isUndoing||n.isRedoing))),this._register(t.onWillDispose(()=>this.dispose()))}onModelContentChanged(t,n){if(this.trace("onModelContentChanged() - enter"),this.versionId++,this.trace(`onModelContentChanged() - new versionId ${this.versionId}`),n&&(this.lastContentChangeFromUndoRedo=Date.now()),!this.ignoreDirtyOnModelContentChange&&!this.isReadonly())if(t.versionId===this.savedVersionId){this.trace("onModelContentChanged() - model content changed back to last saved version");let i=this.dirty;this.setDirty(!1),i&&this._onDidRevert.fire()}else this.trace("onModelContentChanged() - model content changed and marked as dirty"),this.setDirty(!0);this._onDidChangeContent.fire()}async forceResolveFromFile(){this.isDisposed()||await this.externalResolver({forceReadFromFile:!0})}get backupDelay(){return this.model?.configuration?.backupDelay}async backup(t){let n;this.lastResolvedFileStat&&(n={mtime:this.lastResolvedFileStat.mtime,ctime:this.lastResolvedFileStat.ctime,size:this.lastResolvedFileStat.size,etag:this.lastResolvedFileStat.etag,orphaned:this.isOrphaned()});let i;return this.isResolved()&&(i=await Cm(this.model.snapshot(2,t),t)),{meta:n,content:i}}versionId=0;static UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD=500;lastContentChangeFromUndoRedo=void 0;saveSequentializer=new iv;ignoreSaveFromSaveParticipants=!1;async save(t=Object.create(null)){return this.isResolved()?this.isReadonly()?(this.trace("save() - ignoring request for readonly resource"),!1):(this.hasState(3)||this.hasState(5))&&(t.reason===2||t.reason===3||t.reason===4)?(this.trace("save() - ignoring auto save request for file working copy that is in conflict or error"),!1):(this.trace("save() - enter"),await this.doSave(t),this.trace("save() - exit"),this.hasState(0)):!1}async doSave(t){typeof t.reason!="number"&&(t.reason=1);let n=this.versionId;if(this.trace(`doSave(${n}) - enter with versionId ${n}`),this.ignoreSaveFromSaveParticipants){this.trace(`doSave(${n}) - exit - refusing to save() recursively from save participant`);return}if(this.saveSequentializer.isRunning(n))return this.trace(`doSave(${n}) - exit - found a running save for versionId ${n}`),this.saveSequentializer.running;if(!t.force&&!this.dirty){this.trace(`doSave(${n}) - exit - because not dirty and/or versionId is different (this.isDirty: ${this.dirty}, this.versionId: ${this.versionId})`);return}if(this.saveSequentializer.isRunning())return this.trace(`doSave(${n}) - exit - because busy saving`),this.saveSequentializer.cancelRunning(),this.saveSequentializer.queue(()=>this.doSave(t));this.isResolved()&&this.model.pushStackElement();let i=new xi;return this.progressService.withProgress({title:c("saveParticipants","Saving '{0}'",this.name),location:10,cancellable:!0,delay:this.isDirty()?3e3:5e3},o=>this.doSaveSequential(n,t,o,i),()=>{i.cancel()}).finally(()=>{i.dispose()})}doSaveSequential(t,n,i,o){return this.saveSequentializer.run(t,(async()=>{if(this.isResolved()&&!n.skipSaveParticipants&&this.workingCopyFileService.hasSaveParticipants)try{if(n.reason===2&&typeof this.lastContentChangeFromUndoRedo=="number"){let l=Date.now()-this.lastContentChangeFromUndoRedo;l<uc.UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD&&await Cn(uc.UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD-l)}if(!o.token.isCancellationRequested){this.ignoreSaveFromSaveParticipants=!0;try{await this.workingCopyFileService.runSaveParticipants(this,{reason:n.reason??1,savedFrom:n.from},i,o.token)}finally{this.ignoreSaveFromSaveParticipants=!1}}}catch(l){this.logService.error(`[stored file working copy] runSaveParticipants(${t}) - resulted in an error: ${l.toString()}`,this.resource.toString(),this.typeId)}if(o.token.isCancellationRequested||this.isDisposed()||!this.isResolved())return;t=this.versionId,this.inErrorMode=!1,i.report({message:c("saveTextFile","Writing into file...")}),this.trace(`doSave(${t}) - before write()`);let s=Rt(this.lastResolvedFileStat),a=this;return this.saveSequentializer.run(t,(async()=>{try{let l={mtime:s.mtime,etag:n.ignoreModifiedSince||!this.filesConfigurationService.preventSaveConflicts(s.resource)?ig:s.etag,unlock:n.writeUnlock},d;if(typeof a.model.save=="function")try{d=await a.model.save(l,o.token)}catch(u){if(o.token.isCancellationRequested)return;throw u}else{let u=await Cm(a.model.snapshot(1,o.token),o.token);if(o.token.isCancellationRequested)return;o.dispose(),n?.writeElevated&&this.elevatedFileService.isSupported(s.resource)?d=await this.elevatedFileService.writeFileElevated(s.resource,Rt(u),l):d=await this.fileService.writeFile(s.resource,Rt(u),l)}this.handleSaveSuccess(d,t,n)}catch(l){this.handleSaveError(l,t,n)}})(),()=>o.cancel())})(),()=>o.cancel())}handleSaveSuccess(t,n,i){this.updateLastResolvedFileStat(t),n===this.versionId?(this.trace(`handleSaveSuccess(${n}) - setting dirty to false because versionId did not change`),this.setDirty(!1)):this.trace(`handleSaveSuccess(${n}) - not setting dirty to false because versionId did change meanwhile`),this.setOrphaned(!1),this._onDidSave.fire({reason:i.reason,stat:t,source:i.source})}handleSaveError(t,n,i){if((i.ignoreErrorHandler?this.logService.trace:this.logService.error).apply(this.logService,[`[stored file working copy] handleSaveError(${n}) - exit - resulted in a save error: ${t.toString()}`,this.resource.toString(),this.typeId]),i.ignoreErrorHandler)throw t;this.setDirty(!0),this.inErrorMode=!0,t.fileOperationResult===3&&(this.inConflictMode=!0),this.doHandleSaveError(t,i),this._onDidSaveError.fire()}doHandleSaveError(t,n){let i=t,o=[],s;if(i.fileOperationResult===3)s=c("staleSaveError","Failed to save '{0}': The content of the file is newer. Do you want to overwrite the file with your changes?",this.name),o.push(ui({id:"fileWorkingCopy.overwrite",label:c("overwrite","Overwrite"),run:()=>this.save({...n,ignoreModifiedSince:!0,reason:1})})),o.push(ui({id:"fileWorkingCopy.revert",label:c("revert","Revert"),run:()=>this.revert()}));else{let d=i.fileOperationResult===5,u=d&&i.options?.unlock,p=i.fileOperationResult===6,h=this.elevatedFileService.isSupported(this.resource);MD(t)&&o.push(...t.actions),h&&(p||u)?o.push(ui({id:"fileWorkingCopy.saveElevated",label:u?xt?c("overwriteElevated","Overwrite as Admin..."):c("overwriteElevatedSudo","Overwrite as Sudo..."):xt?c("saveElevated","Retry as Admin..."):c("saveElevatedSudo","Retry as Sudo..."),run:()=>{this.save({...n,writeElevated:!0,writeUnlock:u,reason:1})}})):d?o.push(ui({id:"fileWorkingCopy.unlock",label:c("overwrite","Overwrite"),run:()=>this.save({...n,writeUnlock:!0,reason:1})})):o.push(ui({id:"fileWorkingCopy.retry",label:c("retry","Retry"),run:()=>this.save({...n,reason:1})})),o.push(ui({id:"fileWorkingCopy.saveAs",label:c("saveAs","Save As..."),run:async()=>{let m=this.workingCopyEditorService.findEditor(this);m&&((await this.editorService.save(m,{saveAs:!0,reason:1})).success||this.doHandleSaveError(t,n))}})),o.push(ui({id:"fileWorkingCopy.revert",label:c("revert","Revert"),run:()=>this.revert()})),d?u&&h?s=xt?c("readonlySaveErrorAdmin","Failed to save '{0}': File is read-only. Select 'Overwrite as Admin' to retry as administrator.",this.name):c("readonlySaveErrorSudo","Failed to save '{0}': File is read-only. Select 'Overwrite as Sudo' to retry as superuser.",this.name):s=c("readonlySaveError","Failed to save '{0}': File is read-only. Select 'Overwrite' to attempt to make it writeable.",this.name):h&&p?s=xt?c("permissionDeniedSaveError","Failed to save '{0}': Insufficient permissions. Select 'Retry as Admin' to retry as administrator.",this.name):c("permissionDeniedSaveErrorSudo","Failed to save '{0}': Insufficient permissions. Select 'Retry as Sudo' to retry as superuser.",this.name):s=c({key:"genericSaveError",comment:["{0} is the resource that failed to save and {1} the error message"]},"Failed to save '{0}': {1}",this.name,dc(t,!1))}let a=this.notificationService.notify({id:`${os(this.resource.toString())}`,severity:Ip.Error,message:s,actions:{primary:o}}),l=this._register(N.once(N.any(this.onDidSave,this.onDidRevert))(()=>a.close()));this._register(N.once(a.onDidClose)(()=>l.dispose()))}updateLastResolvedFileStat(t){let n=this.isReadonly();this.lastResolvedFileStat?this.lastResolvedFileStat.mtime<=t.mtime?this.lastResolvedFileStat=t:this.lastResolvedFileStat={...this.lastResolvedFileStat,readonly:t.readonly,locked:t.locked}:this.lastResolvedFileStat=t,this.isReadonly()!==n&&this._onDidChangeReadonly.fire()}async revert(t){if(!this.isResolved()||!this.dirty&&!t?.force)return;this.trace("revert()");let n=this.dirty,i=this.doSetDirty(!1);if(!t?.soft)try{await this.forceResolveFromFile()}catch(s){if(s.fileOperationResult!==1)throw i(),s}this._onDidRevert.fire(),n&&this._onDidChangeDirty.fire()}inConflictMode=!1;inErrorMode=!1;hasState(t){switch(t){case 3:return this.inConflictMode;case 1:return this.dirty;case 5:return this.inErrorMode;case 4:return this.isOrphaned();case 2:return this.saveSequentializer.isRunning();case 0:return!this.dirty}}async joinState(t){return this.saveSequentializer.running}isReadonly(){return this.filesConfigurationService.isReadonly(this.resource,this.lastResolvedFileStat)}trace(t){this.logService.trace(`[stored file working copy] ${t}`,this.resource.toString(),this.typeId)}dispose(){this.trace("dispose()"),this.inConflictMode=!1,this.inErrorMode=!1,this._model=void 0,super.dispose()}};uc=C([v(5,dt),v(6,Et),v(7,qD),v(8,KD),v(9,Ey),v(10,jl),v(11,wr),v(12,GD),v(13,Rn),v(14,bF),v(15,Cg)],uc);var Tp=class extends P{constructor(t){super();this.logService=t}saveParticipants=[];get length(){return this.saveParticipants.length}addSaveParticipant(t){let n=xb(this.saveParticipants,t);return ie(()=>n())}async participate(t,n,i,o){t.model?.pushStackElement();for(let s of this.saveParticipants){if(o.isCancellationRequested||t.isDisposed())break;try{let a=s.participate(t,n,i,o);await Cm(a,o)}catch(a){this.logService.warn(a)}}t.model?.pushStackElement()}dispose(){this.saveParticipants.splice(0,this.saveParticipants.length),super.dispose()}};Tp=C([v(0,Et)],Tp);var qD=A("workingCopyFileService"),Dg=class extends P{constructor(t,n,i,o){super();this.fileService=t;this.workingCopyService=n;this.instantiationService=i;this.uriIdentityService=o;this._register(this.registerWorkingCopyProvider(s=>this.workingCopyService.workingCopies.filter(a=>this.fileService.hasProvider(s)?this.uriIdentityService.extUri.isEqualOrParent(a.resource,s):this.uriIdentityService.extUri.isEqual(a.resource,s))))}_onWillRunWorkingCopyFileOperation=this._register(new su);onWillRunWorkingCopyFileOperation=this._onWillRunWorkingCopyFileOperation.event;_onDidFailWorkingCopyFileOperation=this._register(new su);onDidFailWorkingCopyFileOperation=this._onDidFailWorkingCopyFileOperation.event;_onDidRunWorkingCopyFileOperation=this._register(new su);onDidRunWorkingCopyFileOperation=this._onDidRunWorkingCopyFileOperation.event;correlationIds=0;create(t,n,i){return this.doCreateFileOrFolder(t,!0,n,i)}createFolder(t,n,i){return this.doCreateFileOrFolder(t,!1,n,i)}async doCreateFileOrFolder(t,n,i,o){if(t.length===0)return[];if(n){let u=(await Ci.settled(t.map(p=>this.fileService.canCreateFile(p.resource,{overwrite:p.overwrite})))).find(p=>p instanceof Error);if(u instanceof Error)throw u}let s=t.map(d=>({target:d.resource}));await this.runFileOperationParticipants(s,0,o,i);let a={correlationId:this.correlationIds++,operation:0,files:s};await this._onWillRunWorkingCopyFileOperation.fireAsync(a,rt.None);let l;try{n?l=await Ci.settled(t.map(d=>this.fileService.createFile(d.resource,d.contents,{overwrite:d.overwrite}))):l=await Ci.settled(t.map(d=>this.fileService.createFolder(d.resource)))}catch(d){throw await this._onDidFailWorkingCopyFileOperation.fireAsync(a,rt.None),d}return await this._onDidRunWorkingCopyFileOperation.fireAsync(a,rt.None),l}async move(t,n,i){return this.doMoveOrCopy(t,!0,n,i)}async copy(t,n,i){return this.doMoveOrCopy(t,!1,n,i)}async doMoveOrCopy(t,n,i,o){let s=[];for(let{file:{source:d,target:u},overwrite:p}of t){let h=await(n?this.fileService.canMove(d,u,p):this.fileService.canCopy(d,u,p));if(h instanceof Error)throw h}let a=t.map(d=>d.file);await this.runFileOperationParticipants(a,n?2:3,o,i);let l={correlationId:this.correlationIds++,operation:n?2:3,files:a};await this._onWillRunWorkingCopyFileOperation.fireAsync(l,rt.None);try{for(let{file:{source:d,target:u},overwrite:p}of t){if(!this.uriIdentityService.extUri.isEqual(d,u)){let h=n?[...this.getDirty(d),...this.getDirty(u)]:this.getDirty(u);await Ci.settled(h.map(m=>m.revert({soft:!0})))}n?s.push(await this.fileService.move(d,u,p)):s.push(await this.fileService.copy(d,u,p))}}catch(d){throw await this._onDidFailWorkingCopyFileOperation.fireAsync(l,rt.None),d}return await this._onDidRunWorkingCopyFileOperation.fireAsync(l,rt.None),s}async delete(t,n,i){for(let a of t){let l=await this.fileService.canDelete(a.resource,{recursive:a.recursive,useTrash:a.useTrash});if(l instanceof Error)throw l}let o=t.map(a=>({target:a.resource}));await this.runFileOperationParticipants(o,1,i,n);let s={correlationId:this.correlationIds++,operation:1,files:o};await this._onWillRunWorkingCopyFileOperation.fireAsync(s,rt.None);for(let a of t){let l=this.getDirty(a.resource);await Ci.settled(l.map(d=>d.revert({soft:!0})))}try{for(let a of t)await this.fileService.del(a.resource,{recursive:a.recursive,useTrash:a.useTrash})}catch(a){throw await this._onDidFailWorkingCopyFileOperation.fireAsync(s,rt.None),a}await this._onDidRunWorkingCopyFileOperation.fireAsync(s,rt.None)}fileOperationParticipants=this._register(this.instantiationService.createInstance(Sp));addFileOperationParticipant(t){return this.fileOperationParticipants.addFileOperationParticipant(t)}runFileOperationParticipants(t,n,i,o){return this.fileOperationParticipants.participate(t,n,i,o)}saveParticipants=this._register(this.instantiationService.createInstance(Tp));get hasSaveParticipants(){return this.saveParticipants.length>0}addSaveParticipant(t){return this.saveParticipants.addSaveParticipant(t)}runSaveParticipants(t,n,i,o){return this.saveParticipants.participate(t,n,i,o)}workingCopyProviders=[];registerWorkingCopyProvider(t){let n=xb(this.workingCopyProviders,t);return ie(n)}getDirty(t){let n=new Set;for(let i of this.workingCopyProviders)for(let o of i(t))o.isDirty()&&n.add(o);return Array.from(n)}};Dg=C([v(0,dt),v(1,jl),v(2,_e),v(3,Ln)],Dg);cn(qD,Dg,1);var Xl=A("textFileService");var jD;(e=>e.DEFAULT={allowTrailingComma:!0})(jD||={});function vF(r,e=!1){let t=0,n=r.length,i="",o=0,s=16,a=0;function l(g){let y=0,T=0;for(;y<g;){let E=r.charCodeAt(t);if(E>=48&&E<=57)T=T*16+E-48;else if(E>=65&&E<=70)T=T*16+E-65+10;else if(E>=97&&E<=102)T=T*16+E-97+10;else break;t++,y++}return y<g&&(T=-1),T}function d(g){t=g,i="",o=0,s=16,a=0}function u(){let g=t;if(r.charCodeAt(t)===48)t++;else for(t++;t<r.length&&Ep(r.charCodeAt(t));)t++;if(t<r.length&&r.charCodeAt(t)===46)if(t++,t<r.length&&Ep(r.charCodeAt(t)))for(t++;t<r.length&&Ep(r.charCodeAt(t));)t++;else return a=3,r.substring(g,t);let y=t;if(t<r.length&&(r.charCodeAt(t)===69||r.charCodeAt(t)===101))if(t++,(t<r.length&&r.charCodeAt(t)===43||r.charCodeAt(t)===45)&&t++,t<r.length&&Ep(r.charCodeAt(t))){for(t++;t<r.length&&Ep(r.charCodeAt(t));)t++;y=t}else a=3;return r.substring(g,y)}function p(){let g="",y=t;for(;;){if(t>=n){g+=r.substring(y,t),a=2;break}let T=r.charCodeAt(t);if(T===34){g+=r.substring(y,t),t++;break}if(T===92){if(g+=r.substring(y,t),t++,t>=n){a=2;break}switch(r.charCodeAt(t++)){case 34:g+='"';break;case 92:g+="\\";break;case 47:g+="/";break;case 98:g+="\b";break;case 102:g+="\f";break;case 110:g+=`
`;break;case 114:g+="\r";break;case 116:g+="	";break;case 117:{let D=l(4);D>=0?g+=String.fromCharCode(D):a=4;break}default:a=5}y=t;continue}if(T>=0&&T<=31)if(hI(T)){g+=r.substring(y,t),a=2;break}else a=6;t++}return g}function h(){if(i="",a=0,o=t,t>=n)return o=n,s=17;let g=r.charCodeAt(t);if($D(g)){do t++,i+=String.fromCharCode(g),g=r.charCodeAt(t);while($D(g));return s=15}if(hI(g))return t++,i+=String.fromCharCode(g),g===13&&r.charCodeAt(t)===10&&(t++,i+=`
`),s=14;switch(g){case 123:return t++,s=1;case 125:return t++,s=2;case 91:return t++,s=3;case 93:return t++,s=4;case 58:return t++,s=6;case 44:return t++,s=5;case 34:return t++,i=p(),s=10;case 47:{let y=t-1;if(r.charCodeAt(t+1)===47){for(t+=2;t<n&&!hI(r.charCodeAt(t));)t++;return i=r.substring(y,t),s=12}if(r.charCodeAt(t+1)===42){t+=2;let T=n-1,E=!1;for(;t<T;){if(r.charCodeAt(t)===42&&r.charCodeAt(t+1)===47){t+=2,E=!0;break}t++}return E||(t++,a=1),i=r.substring(y,t),s=13}return i+=String.fromCharCode(g),t++,s=16}case 45:if(i+=String.fromCharCode(g),t++,t===n||!Ep(r.charCodeAt(t)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=u(),s=11;default:for(;t<n&&m(g);)t++,g=r.charCodeAt(t);if(o!==t){switch(i=r.substring(o,t),i){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return i+=String.fromCharCode(g),t++,s=16}}function m(g){if($D(g)||hI(g))return!1;switch(g){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function f(){let g;do g=h();while(g>=12&&g<=15);return g}return{setPosition:d,getPosition:()=>t,scan:e?f:h,getToken:()=>s,getTokenValue:()=>i,getTokenOffset:()=>o,getTokenLength:()=>t-o,getTokenError:()=>a}}function $D(r){return r===32||r===9||r===11||r===12||r===160||r===5760||r>=8192&&r<=8203||r===8239||r===8287||r===12288||r===65279}function hI(r){return r===10||r===13||r===8232||r===8233}function Ep(r){return r>=48&&r<=57}function YD(r,e=[],t=jD.DEFAULT){let n=null,i=[],o=[];function s(l){Array.isArray(i)?i.push(l):n!==null&&(i[n]=l)}return yF(r,{onObjectBegin:()=>{let l={};s(l),o.push(i),i=l,n=null},onObjectProperty:l=>{n=l},onObjectEnd:()=>{i=o.pop()},onArrayBegin:()=>{let l=[];s(l),o.push(i),i=l,n=null},onArrayEnd:()=>{i=o.pop()},onLiteralValue:s,onError:(l,d,u)=>{e.push({error:l,offset:d,length:u})}},t),i[0]}function yF(r,e,t=jD.DEFAULT){let n=vF(r,!1);function i(H){return H?()=>H(n.getTokenOffset(),n.getTokenLength()):()=>!0}function o(H){return H?oe=>H(oe,n.getTokenOffset(),n.getTokenLength()):()=>!0}let s=i(e.onObjectBegin),a=o(e.onObjectProperty),l=i(e.onObjectEnd),d=i(e.onArrayBegin),u=i(e.onArrayEnd),p=o(e.onLiteralValue),h=o(e.onSeparator),m=i(e.onComment),f=o(e.onError),g=t&&t.disallowComments,y=t&&t.allowTrailingComma;function T(){for(;;){let H=n.scan();switch(n.getTokenError()){case 4:E(14);break;case 5:E(15);break;case 3:E(13);break;case 1:g||E(11);break;case 2:E(12);break;case 6:E(16);break}switch(H){case 12:case 13:g?E(10):m();break;case 16:E(1);break;case 15:case 14:break;default:return H}}}function E(H,oe=[],ee=[]){if(f(H),oe.length+ee.length>0){let re=n.getToken();for(;re!==17;){if(oe.indexOf(re)!==-1){T();break}else if(ee.indexOf(re)!==-1)break;re=T()}}}function D(H){let oe=n.getTokenValue();return H?p(oe):a(oe),T(),!0}function _(){switch(n.getToken()){case 11:{let H=0;try{H=JSON.parse(n.getTokenValue()),typeof H!="number"&&(E(2),H=0)}catch{E(2)}p(H);break}case 7:p(null);break;case 8:p(!0);break;case 9:p(!1);break;default:return!1}return T(),!0}function O(){return n.getToken()!==10?(E(3,[],[2,5]),!1):(D(!1),n.getToken()===6?(h(":"),T(),M()||E(4,[],[2,5])):E(5,[],[2,5]),!0)}function G(){s(),T();let H=!1;for(;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(H||E(4,[],[]),h(","),T(),n.getToken()===2&&y)break}else H&&E(6,[],[]);O()||E(4,[],[2,5]),H=!0}return l(),n.getToken()!==2?E(7,[2],[]):T(),!0}function Z(){d(),T();let H=!1;for(;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(H||E(4,[],[]),h(","),T(),n.getToken()===4&&y)break}else H&&E(6,[],[]);M()||E(4,[],[4,5]),H=!0}return u(),n.getToken()!==4?E(8,[4],[]):T(),!0}function M(){switch(n.getToken()){case 3:return Z();case 1:return G();case 10:return D(!0);default:return _()}}return T(),n.getToken()===17?t.allowEmptyContent?!0:(E(4,[],[]),!1):M()?(n.getToken()!==17&&E(9,[],[]),!0):(E(4,[],[]),!1)}var Wn=A("keybindingService");var XD=".vscode",DH="settings",xNe=`${XD}/${DH}.json`;var TNe=[1],ENe=[2,3,4,5,6],_H=[3,4,5],wNe=[1,..._H],CNe=[2,3,4,5,6],RH=[3,4,5,6],LH=[4,5,6],mI="tasks",IF="launch",SF=Object.create(null);SF[mI]=`${XD}/${mI}.json`;SF[IF]=`${XD}/${IF}.json`;var PH=Object.create(null);PH[mI]=`${mI}.json`;var kNe=ke;var QD=class extends Yu{_currentResultGroups=new Map;updateResultGroup(e,t){return t?this._currentResultGroups.set(e,t):this._currentResultGroups.delete(e),this.removeDuplicateResults(),this.update()}removeDuplicateResults(){let e=new Set;[...this._currentResultGroups.keys()].sort((t,n)=>this._currentResultGroups.get(t).order-this._currentResultGroups.get(n).order).forEach(t=>{let n=this._currentResultGroups.get(t);n.result.filterMatches=n.result.filterMatches.filter(i=>!e.has(i.setting.key)),n.result.filterMatches.forEach(i=>e.add(i.setting.key))})}filterSettings(e,t,n){let i=this.filterGroups,o=[];for(let s of i){let a=t(s);for(let l of s.sections)for(let d of l.settings){let u=n(d,s);(a||u)&&o.push({setting:d,matches:u&&u.matches,matchType:u?.matchType??0,score:u?.score??0})}}return o}getPreference(e){for(let t of this.settingsGroups)for(let n of t.sections)for(let i of n.settings)if(e===i.key)return i}collectMetadata(e){let t=Object.create(null),n=!1;return e.forEach(i=>{i.result.metadata&&(t[i.id]=i.result.metadata,n=!0)}),n?t:null}get filterGroups(){return this.settingsGroups}};var fI=class extends QD{constructor(t,n){super();this._defaultSettings=t;this._register(n.onDidChangeConfiguration(i=>{i.source===7&&(this.dirty=!0,this._onDidChangeGroups.fire())})),this._register(Ce.as(Sr.Configuration).onDidSchemaChange(i=>{this.dirty=!0,this._onDidChangeGroups.fire()}))}_onDidChangeGroups=this._register(new x);onDidChangeGroups=this._onDidChangeGroups.event;additionalGroups=[];dirty=!1;get filterGroups(){return this.settingsGroups.slice(1)}get settingsGroups(){let t=this._defaultSettings.getSettingsGroups(this.dirty);return this.dirty=!1,[...t,...this.additionalGroups]}setAdditionalGroups(t){this.additionalGroups=t}findValueMatches(t,n){return[]}update(){throw new Error("Not supported")}};fI=C([v(1,ke)],fI);function AH(r){return"// "+c("defaultKeybindingsHeader","Override key bindings by placing them into your key bindings file.")+`
`+r.getDefaultKeybindingsContent()}var bI=class{constructor(e,t){this._uri=e;this.keybindingService=t}_content;get uri(){return this._uri}get content(){return this._content||(this._content=AH(this.keybindingService)),this._content}getPreference(){return null}dispose(){}};bI=C([v(1,Wn)],bI);var ZD=A("preferencesService");var js={EditorPane:"workbench.contributions.editors",EditorFactory:"workbench.contributions.editor.inputFactories"},xF={id:"default",displayName:c("promptOpenWith.defaultEditor.displayName","Text Editor"),providerDisplayName:c("builtinProviderDisplayName","Built-in")};function lI(r,e,t){for(let n of t.visibleEditorPanes)if(n.group.id===e&&r.matches(n.input))return n.getViewState()}function oF(r){if(fi(r))return!1;let e=r;return W.isUri(e?.resource)}function rs(r){if(fi(r))return!1;let e=r;return e?.original!==void 0&&e.modified!==void 0}function yp(r){if(fi(r))return!1;let e=r;return!e||e.resources&&!Array.isArray(e.resources)?!1:!!e.resources||!!e.multiDiffSource}function qs(r){if(fi(r)||rs(r))return!1;let e=r;return e?.primary!==void 0&&e.secondary!==void 0}function $s(r){if(fi(r))return!1;let e=r;return W.isUri(e?.base?.resource)&&W.isUri(e?.input1?.resource)&&W.isUri(e?.input2?.resource)&&W.isUri(e?.result?.resource)}var e_=class{mapIdToSaveSource=new Map;registerSource(e,t){let n=this.mapIdToSaveSource.get(e);return n||(n={source:e,label:t},this.mapIdToSaveSource.set(e,n)),n.source}getSourceLabel(e){return this.mapIdToSaveSource.get(e)?.label??e}},b2e=new e_;var xg=class extends P{};function fi(r){return r instanceof xg}function OH(r){let e=r;return W.isUri(e?.preferredResource)}function MH(r){let e=r;return fi(e?.primary)&&fi(e?.secondary)}function PD(r){let e=r;return fi(e?.modified)&&fi(e?.original)}function i_(r){let e=r;return typeof e?.groupId=="number"&&fi(e.editor)}var t_=class{getOriginalUri(e,t){if(!e)return;if($s(e))return Wa.getOriginalUri(e.result,t);if(t?.supportSideBySide){let{primary:i,secondary:o}=this.getSideEditors(e);if(i&&o){if(t?.supportSideBySide===3)return{primary:this.getOriginalUri(i,{filterByScheme:t.filterByScheme}),secondary:this.getOriginalUri(o,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===4)return this.getOriginalUri(i,{filterByScheme:t.filterByScheme})??this.getOriginalUri(o,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===1?i:o}}if(rs(e)||yp(e)||qs(e)||$s(e))return;let n=OH(e)?e.preferredResource:e.resource;return!n||!t||!t.filterByScheme?n:this.filterUri(n,t.filterByScheme)}getSideEditors(e){return MH(e)||qs(e)?{primary:e.primary,secondary:e.secondary}:PD(e)||rs(e)?{primary:e.modified,secondary:e.original}:{primary:void 0,secondary:void 0}}getCanonicalUri(e,t){if(!e)return;if($s(e))return Wa.getCanonicalUri(e.result,t);if(t?.supportSideBySide){let{primary:i,secondary:o}=this.getSideEditors(e);if(i&&o){if(t?.supportSideBySide===3)return{primary:this.getCanonicalUri(i,{filterByScheme:t.filterByScheme}),secondary:this.getCanonicalUri(o,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===4)return this.getCanonicalUri(i,{filterByScheme:t.filterByScheme})??this.getCanonicalUri(o,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===1?i:o}}if(rs(e)||yp(e)||qs(e)||$s(e))return;let n=e.resource;return!n||!t||!t.filterByScheme?n:this.filterUri(n,t.filterByScheme)}filterUri(e,t){if(Array.isArray(t)){if(t.some(n=>e.scheme===n))return e}else if(t===e.scheme)return e}};var Wa=new t_;var n_=class{instantiationService;fileEditorFactory;editorSerializerConstructors=new Map;editorSerializerInstances=new Map;start(e){let t=this.instantiationService=e.get(_e);for(let[n,i]of this.editorSerializerConstructors)this.createEditorSerializer(n,i,t);this.editorSerializerConstructors.clear()}createEditorSerializer(e,t,n){let i=n.createInstance(t);this.editorSerializerInstances.set(e,i)}registerFileEditorFactory(e){if(this.fileEditorFactory)throw new Error("Can only register one file editor factory.");this.fileEditorFactory=e}getFileEditorFactory(){return Rt(this.fileEditorFactory)}registerEditorSerializer(e,t){if(this.editorSerializerConstructors.has(e)||this.editorSerializerInstances.has(e))throw new Error(`A editor serializer with type ID '${e}' was already registered.`);return this.instantiationService?this.createEditorSerializer(e,t,this.instantiationService):this.editorSerializerConstructors.set(e,t),ie(()=>{this.editorSerializerConstructors.delete(e),this.editorSerializerInstances.delete(e)})}getEditorSerializer(e){return this.editorSerializerInstances.get(typeof e=="string"?e:e.typeId)}};Ce.add(js.EditorFactory,new n_);var _g=class r extends P{constructor(t,n=Object.create(null)){super();this.database=t;this.options=n;this.registerListeners()}static DEFAULT_FLUSH_DELAY=100;_onDidChangeStorage=this._register(new dl);onDidChangeStorage=this._onDidChangeStorage.event;state=0;cache=new Map;flushDelayer=this._register(new El(r.DEFAULT_FLUSH_DELAY));pendingDeletes=new Set;pendingInserts=new Map;pendingClose=void 0;whenFlushedCallbacks=[];registerListeners(){this._register(this.database.onDidChangeItemsExternal(t=>this.onDidChangeItemsExternal(t)))}onDidChangeItemsExternal(t){this._onDidChangeStorage.pause();try{t.changed?.forEach((n,i)=>this.acceptExternal(i,n)),t.deleted?.forEach(n=>this.acceptExternal(n,void 0))}finally{this._onDidChangeStorage.resume()}}acceptExternal(t,n){if(this.state===2)return;let i=!1;zt(n)?i=this.cache.delete(t):this.cache.get(t)!==n&&(this.cache.set(t,n),i=!0),i&&this._onDidChangeStorage.fire({key:t,external:!0})}get items(){return this.cache}get size(){return this.cache.size}async init(){this.state===0&&(this.state=1,this.options.hint!==0&&(this.cache=await this.database.getItems()))}get(t,n){let i=this.cache.get(t);return zt(i)?n:i}getBoolean(t,n){let i=this.get(t);return zt(i)?n:i==="true"}getNumber(t,n){let i=this.get(t);return zt(i)?n:parseInt(i,10)}getObject(t,n){let i=this.get(t);return zt(i)?n:Tu(i)}async set(t,n,i=!1){if(this.state===2)return;if(zt(n))return this.delete(t,i);let o=fn(n)||Array.isArray(n)?dv(n):String(n);if(this.cache.get(t)!==o)return this.cache.set(t,o),this.pendingInserts.set(t,o),this.pendingDeletes.delete(t),this._onDidChangeStorage.fire({key:t,external:i}),this.doFlush()}async delete(t,n=!1){if(!(this.state===2||!this.cache.delete(t)))return this.pendingDeletes.has(t)||this.pendingDeletes.add(t),this.pendingInserts.delete(t),this._onDidChangeStorage.fire({key:t,external:n}),this.doFlush()}async optimize(){if(this.state!==2)return await this.flush(0),this.database.optimize()}async close(){return this.pendingClose||(this.pendingClose=this.doClose()),this.pendingClose}async doClose(){this.state=2;try{await this.doFlush(0)}catch{}await this.database.close(()=>this.cache)}get hasPending(){return this.pendingInserts.size>0||this.pendingDeletes.size>0}async flushPending(){if(!this.hasPending)return;let t={insert:this.pendingInserts,delete:this.pendingDeletes};return this.pendingDeletes=new Set,this.pendingInserts=new Map,this.database.updateItems(t).finally(()=>{if(!this.hasPending)for(;this.whenFlushedCallbacks.length;)this.whenFlushedCallbacks.pop()?.()})}async flush(t){if(!(this.state===2||this.pendingClose))return this.doFlush(t)}async doFlush(t){return this.options.hint===1?this.flushPending():this.flushDelayer.trigger(()=>this.flushPending(),t)}async whenFlushed(){if(this.hasPending)return new Promise(t=>this.whenFlushedCallbacks.push(t))}isInMemory(){return this.options.hint===1}};var o_="__$__isNewStorageMarker",vI="__$__targetStorageMarker",Xe=A("storageService");function NH(r){let e=r.get(vI);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}var yI=class r extends P{constructor(t={flushInterval:r.DEFAULT_FLUSH_INTERVAL}){super();this.options=t}static DEFAULT_FLUSH_INTERVAL=60*1e3;_onDidChangeValue=this._register(new dl);_onDidChangeTarget=this._register(new dl);onDidChangeTarget=this._onDidChangeTarget.event;_onWillSaveState=this._register(new x);onWillSaveState=this._onWillSaveState.event;initializationPromise;flushWhenIdleScheduler=this._register(new Bn(()=>this.doFlushWhenIdle(),this.options.flushInterval));runFlushWhenIdle=this._register(new Ut);onDidChangeValue(t,n,i){return N.filter(this._onDidChangeValue.event,o=>o.scope===t&&(n===void 0||o.key===n),i)}doFlushWhenIdle(){this.runFlushWhenIdle.value=Cl(()=>{this.shouldFlushWhenIdle()&&this.flush(),this.flushWhenIdleScheduler.schedule()})}shouldFlushWhenIdle(){return!0}stopFlushWhenIdle(){vt([this.runFlushWhenIdle,this.flushWhenIdleScheduler])}initialize(){return this.initializationPromise||(this.initializationPromise=(async()=>{Vn("code/willInitStorage");try{await this.doInitialize()}finally{Vn("code/didInitStorage")}this.flushWhenIdleScheduler.schedule()})()),this.initializationPromise}emitDidChangeValue(t,n){let{key:i,external:o}=n;if(i===vI){switch(t){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:t})}else this._onDidChangeValue.fire({scope:t,key:i,target:this.getKeyTargets(t)[i],external:o})}emitWillSaveState(t){this._onWillSaveState.fire({reason:t})}get(t,n,i){return this.getStorage(n)?.get(t,i)}getBoolean(t,n,i){return this.getStorage(n)?.getBoolean(t,i)}getNumber(t,n,i){return this.getStorage(n)?.getNumber(t,i)}getObject(t,n,i){return this.getStorage(n)?.getObject(t,i)}storeAll(t,n){this.withPausedEmitters(()=>{for(let i of t)this.store(i.key,i.value,i.scope,i.target,n)})}store(t,n,i,o,s=!1){if(zt(n)){this.remove(t,i,s);return}this.withPausedEmitters(()=>{this.updateKeyTarget(t,i,o),this.getStorage(i)?.set(t,n,s)})}remove(t,n,i=!1){this.withPausedEmitters(()=>{this.updateKeyTarget(t,n,void 0),this.getStorage(n)?.delete(t,i)})}withPausedEmitters(t){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{t()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}keys(t,n){let i=[],o=this.getKeyTargets(t);for(let s of Object.keys(o))o[s]===n&&i.push(s);return i}updateKeyTarget(t,n,i,o=!1){let s=this.getKeyTargets(n);typeof i=="number"?s[t]!==i&&(s[t]=i,this.getStorage(n)?.set(vI,JSON.stringify(s),o)):typeof s[t]=="number"&&(delete s[t],this.getStorage(n)?.set(vI,JSON.stringify(s),o))}_workspaceKeyTargets=void 0;get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}_profileKeyTargets=void 0;get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}_applicationKeyTargets=void 0;get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(t){switch(t){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(t){let n=this.getStorage(t);return n?NH(n):Object.create(null)}isNew(t){return this.getBoolean(o_,t)===!0}async flush(t=0){this._onWillSaveState.fire({reason:t});let n=this.getStorage(-1),i=this.getStorage(0),o=this.getStorage(1);switch(t){case 0:await Ci.settled([n?.whenFlushed()??Promise.resolve(),i?.whenFlushed()??Promise.resolve(),o?.whenFlushed()??Promise.resolve()]);break;case 1:await Ci.settled([n?.flush(0)??Promise.resolve(),i?.flush(0)??Promise.resolve(),o?.flush(0)??Promise.resolve()]);break}}async log(){let t=this.getStorage(-1)?.items??new Map,n=this.getStorage(0)?.items??new Map,i=this.getStorage(1)?.items??new Map;return FH(t,n,i,this.getLogDetails(-1)??"",this.getLogDetails(0)??"",this.getLogDetails(1)??"")}async optimize(t){return await this.flush(),this.getStorage(t)?.optimize()}async switch(t,n){return this.emitWillSaveState(0),hF(t)?this.switchToProfile(t,n):this.switchToWorkspace(t,n)}canSwitchProfile(t,n){return!(t.id===n.id||r_(n)&&r_(t))}switchData(t,n,i){this.withPausedEmitters(()=>{let o=new Set;for(let[s,a]of t)o.add(s),n.get(s)!==a&&this.emitDidChangeValue(i,{key:s,external:!0});for(let[s]of n.items)o.has(s)||this.emitDidChangeValue(i,{key:s,external:!0})})}};function r_(r){return r.isDefault||!!r.useDefaultFlags?.globalState}async function FH(r,e,t,n,i,o){let s=g=>{try{return JSON.parse(g)}catch{return g}},a=new Map,l=new Map;r.forEach((g,y)=>{a.set(y,g),l.set(y,s(g))});let d=new Map,u=new Map;e.forEach((g,y)=>{d.set(y,g),u.set(y,s(g))});let p=new Map,h=new Map;t.forEach((g,y)=>{p.set(y,g),h.set(y,s(g))}),console.group(n!==i?`Storage: Application (path: ${n})`:`Storage: Application & Profile (path: ${n}, default profile)`);let m=[];if(a.forEach((g,y)=>{m.push({key:y,value:g})}),console.table(m),console.groupEnd(),console.log(l),n!==i){console.group(`Storage: Profile (path: ${i}, profile specific)`);let g=[];d.forEach((y,T)=>{g.push({key:T,value:y})}),console.table(g),console.groupEnd(),console.log(u)}console.group(`Storage: Workspace (path: ${o})`);let f=[];p.forEach((g,y)=>{f.push({key:y,value:g})}),console.table(f),console.groupEnd(),console.log(h)}var wp=class r{constructor(e,t){this.storageService=t;this.id=r.COMMON_PREFIX+e}static applicationMementos=new Map;static profileMementos=new Map;static workspaceMementos=new Map;static COMMON_PREFIX="memento/";id;getMemento(e,t){switch(e){case 1:{let n=r.workspaceMementos.get(this.id);return n||(n=new Rg(this.id,e,t,this.storageService),r.workspaceMementos.set(this.id,n)),n.getMemento()}case 0:{let n=r.profileMementos.get(this.id);return n||(n=new Rg(this.id,e,t,this.storageService),r.profileMementos.set(this.id,n)),n.getMemento()}case-1:{let n=r.applicationMementos.get(this.id);return n||(n=new Rg(this.id,e,t,this.storageService),r.applicationMementos.set(this.id,n)),n.getMemento()}}}onDidChangeValue(e,t){return this.storageService.onDidChangeValue(e,this.id,t)}saveMemento(){r.workspaceMementos.get(this.id)?.save(),r.profileMementos.get(this.id)?.save(),r.applicationMementos.get(this.id)?.save()}reloadMemento(e){let t;switch(e){case-1:t=r.applicationMementos.get(this.id);break;case 0:t=r.profileMementos.get(this.id);break;case 1:t=r.workspaceMementos.get(this.id);break}t?.reload()}static clear(e){switch(e){case 1:r.workspaceMementos.clear();break;case 0:r.profileMementos.clear();break;case-1:r.applicationMementos.clear();break}}},Rg=class{constructor(e,t,n,i){this.id=e;this.scope=t;this.target=n;this.storageService=i;this.mementoObj=this.doLoad()}mementoObj;doLoad(){try{return this.storageService.getObject(this.id,this.scope,{})}catch(e){Ze(`[memento]: failed to parse contents: ${e} (id: ${this.id}, scope: ${this.scope}, contents: ${this.storageService.get(this.id,this.scope)})`)}return{}}getMemento(){return this.mementoObj}reload(){for(let e of Object.getOwnPropertyNames(this.mementoObj))delete this.mementoObj[e];Object.assign(this.mementoObj,this.doLoad())}save(){Bd(this.mementoObj)?this.storageService.remove(this.id,this.scope):this.storageService.store(this.id,this.mementoObj,this.scope,this.target)}};var Ha=class extends Qu{constructor(t,n,i){super(n);this.id=t;this.memento=new wp(this.id,i),this._register(i.onWillSaveState(()=>{this.saveState(),this.memento.saveMemento()}))}memento;getId(){return this.id}getMemento(t,n){return this.memento.getMemento(t,n)}reloadMemento(t){return this.memento.reloadMemento(t)}onDidChangeMementoValue(t,n){return this.memento.onDidChangeValue(t,n)}saveState(){}};function II(r,e){let t=r;typeof t.vscodeWindowId!="number"&&Object.defineProperty(t,"vscodeWindowId",{get:()=>e})}var xe=window;function s_(r){return r===xe?!1:typeof r?.vscodeWindowId=="number"}var pc=class r{static INSTANCE=new r;mapWindowIdToZoomLevel=new Map;_onDidChangeZoomLevel=new x;onDidChangeZoomLevel=this._onDidChangeZoomLevel.event;getZoomLevel(e){return this.mapWindowIdToZoomLevel.get(this.getWindowId(e))??0}setZoomLevel(e,t){if(this.getZoomLevel(t)===e)return;let n=this.getWindowId(t);this.mapWindowIdToZoomLevel.set(n,e),this._onDidChangeZoomLevel.fire(n)}mapWindowIdToZoomFactor=new Map;getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}setZoomFactor(e,t){this.mapWindowIdToZoomFactor.set(this.getWindowId(t),e)}_onDidChangeFullscreen=new x;onDidChangeFullscreen=this._onDidChangeFullscreen.event;mapWindowIdToFullScreen=new Map;setFullscreen(e,t){if(this.isFullscreen(t)===e)return;let n=this.getWindowId(t);this.mapWindowIdToFullScreen.set(n,e),this._onDidChangeFullscreen.fire(n)}isFullscreen(e){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(e))}getWindowId(e){return e.vscodeWindowId}};function BH(r,e,t){typeof e=="string"&&(e=r.matchMedia(e)),e.addEventListener("change",t)}function EF(r){return pc.INSTANCE.getZoomLevel(r)}var yUe=pc.INSTANCE.onDidChangeZoomLevel;function wF(r){return pc.INSTANCE.getZoomFactor(r)}function CF(r,e){pc.INSTANCE.setFullscreen(r,e)}var IUe=pc.INSTANCE.onDidChangeFullscreen,Cp=navigator.userAgent,Lo=Cp.indexOf("Firefox")>=0,Ka=Cp.indexOf("AppleWebKit")>=0,kp=Cp.indexOf("Chrome")>=0,Xs=!kp&&Cp.indexOf("Safari")>=0,kF=!kp&&!Xs&&Ka,SUe=Cp.indexOf("Electron/")>=0,xUe=Cp.indexOf("Android")>=0,SI=!1;if(typeof xe.matchMedia=="function"){let r=xe.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=xe.matchMedia("(display-mode: fullscreen)");SI=r.matches,BH(xe,r,({matches:t})=>{SI&&e.matches||(SI=t)})}function DF(){return SI}var _F={clipboard:{writeText:qo||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:qo||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:qo||DF()?0:navigator.keyboard||Xs?1:2,touch:"ontouchstart"in xe||navigator.maxTouchPoints>0,pointerEvents:xe.PointerEvent&&("ontouchstart"in xe||navigator.maxTouchPoints>0)};function UH(r){if(r.charCode){let t=String.fromCharCode(r.charCode).toUpperCase();return bm.fromString(t)}let e=r.keyCode;if(e===3)return 7;if(Lo)switch(e){case 59:return 85;case 60:if(Wt)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(ze)return 57;break}else if(Ka){if(ze&&e===93)return 57;if(!ze&&e===92)return 57}return hw[e]||0}var VH=ze?256:2048,WH=512,zH=1024,HH=ze?2048:256;var ht=class{_standardKeyboardEventBrand=!0;browserEvent;target;ctrlKey;shiftKey;altKey;metaKey;altGraphKey;keyCode;code;_asKeybinding;_asKeyCodeChord;constructor(e){let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=t.getModifierState?.("AltGraph"),this.keyCode=UH(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=VH),this.altKey&&(t|=WH),this.shiftKey&&(t|=zH),this.metaKey&&(t|=HH),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new vm(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}};var RF=new WeakMap;function KH(r){if(!r.parent||r.parent===r)return null;try{let e=r.location,t=r.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return null}catch{return null}return r.parent}var xI=class{static getSameOriginWindowChain(e){let t=RF.get(e);if(!t){t=[],RF.set(e,t);let n=e,i;do i=KH(n),i?t.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):t.push({window:new WeakRef(n),iframeElement:null}),n=i;while(n)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,i=0,o=this.getSameOriginWindowChain(e);for(let s of o){let a=s.window.deref();if(n+=a?.scrollY??0,i+=a?.scrollX??0,a===t||!s.iframeElement)break;let l=s.iframeElement.getBoundingClientRect();n+=l.top,i+=l.left}return{top:n,left:i}}};var zn=class{browserEvent;leftButton;middleButton;rightButton;buttons;target;detail;posx;posy;ctrlKey;shiftKey;altKey;metaKey;timestamp;constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let n=xI.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=n.left,this.posy-=n.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}};var as=class{browserEvent;deltaY;deltaX;target;constructor(e,t=0,n=0){this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t;let i=!1;if(kp){let o=navigator.userAgent.match(/Chrome\/(\d+)/);i=(o?parseInt(o[1]):123)<=122}if(e){let o=e,s=e,a=e.view?.devicePixelRatio||1;if(typeof o.wheelDeltaY<"u")i?this.deltaY=o.wheelDeltaY/(120*a):this.deltaY=o.wheelDeltaY/120;else if(typeof s.VERTICAL_AXIS<"u"&&s.axis===s.VERTICAL_AXIS)this.deltaY=-s.detail/3;else if(e.type==="wheel"){let l=e;l.deltaMode===l.DOM_DELTA_LINE?Lo&&!ze?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof o.wheelDeltaX<"u")Xs&&xt?this.deltaX=-(o.wheelDeltaX/120):i?this.deltaX=o.wheelDeltaX/(120*a):this.deltaX=o.wheelDeltaX/120;else if(typeof s.HORIZONTAL_AXIS<"u"&&s.axis===s.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){let l=e;l.deltaMode===l.DOM_DELTA_LINE?Lo&&!ze?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(i?this.deltaY=e.wheelDelta/(120*a):this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}};var{entries:BF,setPrototypeOf:LF,isFrozen:GH,getPrototypeOf:qH,getOwnPropertyDescriptor:$H}=Object,{freeze:Dr,seal:ds,create:jH}=Object,{apply:p_,construct:h_}=typeof Reflect<"u"&&Reflect;p_||(p_=function(e,t,n){return e.apply(t,n)});Dr||(Dr=function(e){return e});ds||(ds=function(e){return e});h_||(h_=function(e,t){return new e(...t)});var YH=Po(Array.prototype.forEach),PF=Po(Array.prototype.pop),Pg=Po(Array.prototype.push),wI=Po(String.prototype.toLowerCase),a_=Po(String.prototype.toString),XH=Po(String.prototype.match),ls=Po(String.prototype.replace),QH=Po(String.prototype.indexOf),JH=Po(String.prototype.trim),lo=Po(RegExp.prototype.test),Ag=ZH(TypeError);function Po(r){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return p_(r,e,n)}}function ZH(r){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return h_(r,t)}}function It(r,e,t){var n;t=(n=t)!==null&&n!==void 0?n:wI,LF&&LF(r,null);let i=e.length;for(;i--;){let o=e[i];if(typeof o=="string"){let s=t(o);s!==o&&(GH(e)||(e[i]=s),o=s)}r[o]=!0}return r}function Dp(r){let e=jH(null);for(let[t,n]of BF(r))e[t]=n;return e}function TI(r,e){for(;r!==null;){let n=$H(r,e);if(n){if(n.get)return Po(n.get);if(typeof n.value=="function")return Po(n.value)}r=qH(r)}function t(n){return console.warn("fallback value for",n),null}return t}var AF=Dr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),l_=Dr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),d_=Dr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),e9=Dr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),c_=Dr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),t9=Dr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),OF=Dr(["#text"]),MF=Dr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),u_=Dr(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),NF=Dr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),EI=Dr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),n9=ds(/\{\{[\w\W]*|[\w\W]*\}\}/gm),i9=ds(/<%[\w\W]*|[\w\W]*%>/gm),r9=ds(/\${[\w\W]*}/gm),o9=ds(/^data-[\-\w.\u00B7-\uFFFF]/),s9=ds(/^aria-[\-\w]+$/),UF=ds(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),a9=ds(/^(?:\w+script|data):/i),l9=ds(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),VF=ds(/^html$/i),FF=Object.freeze({__proto__:null,MUSTACHE_EXPR:n9,ERB_EXPR:i9,TMPLIT_EXPR:r9,DATA_ATTR:o9,ARIA_ATTR:s9,IS_ALLOWED_URI:UF,IS_SCRIPT_OR_DATA:a9,ATTR_WHITESPACE:l9,DOCTYPE_NAME:VF}),d9=()=>typeof window>"u"?null:window,c9=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null,i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(n=t.getAttribute(i));let o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function WF(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d9(),e=Ae=>WF(Ae);if(e.version="3.0.5",e.removed=[],!r||!r.document||r.document.nodeType!==9)return e.isSupported=!1,e;let t=r.document,n=t.currentScript,{document:i}=r,{DocumentFragment:o,HTMLTemplateElement:s,Node:a,Element:l,NodeFilter:d,NamedNodeMap:u=r.NamedNodeMap||r.MozNamedAttrMap,HTMLFormElement:p,DOMParser:h,trustedTypes:m}=r,f=l.prototype,g=TI(f,"cloneNode"),y=TI(f,"nextSibling"),T=TI(f,"childNodes"),E=TI(f,"parentNode");if(typeof s=="function"){let Ae=i.createElement("template");Ae.content&&Ae.content.ownerDocument&&(i=Ae.content.ownerDocument)}let D,_="",{implementation:O,createNodeIterator:G,createDocumentFragment:Z,getElementsByTagName:M}=i,{importNode:H}=t,oe={};e.isSupported=typeof BF=="function"&&typeof E=="function"&&O&&O.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:ee,ERB_EXPR:re,TMPLIT_EXPR:Fe,DATA_ATTR:st,ARIA_ATTR:be,IS_SCRIPT_OR_DATA:ae,ATTR_WHITESPACE:fe}=FF,{IS_ALLOWED_URI:ve}=FF,Te=null,Qe=It({},[...AF,...l_,...d_,...c_,...OF]),He=null,St=It({},[...MF,...u_,...NF,...EI]),nt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Re=null,Gn=null,xn=!0,Li=!0,dr=!1,ba=!0,Pi=!1,Ai=!1,Jr=!1,kt=!1,Bo=!1,Zr=!1,ji=!1,va=!0,ya=!1,kd="user-content-",Uo=!0,Vo=!1,eo={},Ar=null,Oi=It({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),vo=null,on=It({},["audio","video","img","source","image","track"]),Tn=null,eu=It({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Wo="http://www.w3.org/1998/Math/MathML",cr="http://www.w3.org/2000/svg",mn="http://www.w3.org/1999/xhtml",L=mn,q=!1,j=null,Pe=It({},[Wo,cr,mn],a_),Ke,tn=["application/xhtml+xml","text/html"],Ve="text/html",Mt,jt=null,Zn=i.createElement("form"),ur=function(U){return U instanceof RegExp||U instanceof Function},sn=function(U){if(!(jt&&jt===U)){if((!U||typeof U!="object")&&(U={}),U=Dp(U),Ke=tn.indexOf(U.PARSER_MEDIA_TYPE)===-1?Ke=Ve:Ke=U.PARSER_MEDIA_TYPE,Mt=Ke==="application/xhtml+xml"?a_:wI,Te="ALLOWED_TAGS"in U?It({},U.ALLOWED_TAGS,Mt):Qe,He="ALLOWED_ATTR"in U?It({},U.ALLOWED_ATTR,Mt):St,j="ALLOWED_NAMESPACES"in U?It({},U.ALLOWED_NAMESPACES,a_):Pe,Tn="ADD_URI_SAFE_ATTR"in U?It(Dp(eu),U.ADD_URI_SAFE_ATTR,Mt):eu,vo="ADD_DATA_URI_TAGS"in U?It(Dp(on),U.ADD_DATA_URI_TAGS,Mt):on,Ar="FORBID_CONTENTS"in U?It({},U.FORBID_CONTENTS,Mt):Oi,Re="FORBID_TAGS"in U?It({},U.FORBID_TAGS,Mt):{},Gn="FORBID_ATTR"in U?It({},U.FORBID_ATTR,Mt):{},eo="USE_PROFILES"in U?U.USE_PROFILES:!1,xn=U.ALLOW_ARIA_ATTR!==!1,Li=U.ALLOW_DATA_ATTR!==!1,dr=U.ALLOW_UNKNOWN_PROTOCOLS||!1,ba=U.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Pi=U.SAFE_FOR_TEMPLATES||!1,Ai=U.WHOLE_DOCUMENT||!1,Bo=U.RETURN_DOM||!1,Zr=U.RETURN_DOM_FRAGMENT||!1,ji=U.RETURN_TRUSTED_TYPE||!1,kt=U.FORCE_BODY||!1,va=U.SANITIZE_DOM!==!1,ya=U.SANITIZE_NAMED_PROPS||!1,Uo=U.KEEP_CONTENT!==!1,Vo=U.IN_PLACE||!1,ve=U.ALLOWED_URI_REGEXP||UF,L=U.NAMESPACE||mn,nt=U.CUSTOM_ELEMENT_HANDLING||{},U.CUSTOM_ELEMENT_HANDLING&&ur(U.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(nt.tagNameCheck=U.CUSTOM_ELEMENT_HANDLING.tagNameCheck),U.CUSTOM_ELEMENT_HANDLING&&ur(U.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(nt.attributeNameCheck=U.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),U.CUSTOM_ELEMENT_HANDLING&&typeof U.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(nt.allowCustomizedBuiltInElements=U.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Pi&&(Li=!1),Zr&&(Bo=!0),eo&&(Te=It({},[...OF]),He=[],eo.html===!0&&(It(Te,AF),It(He,MF)),eo.svg===!0&&(It(Te,l_),It(He,u_),It(He,EI)),eo.svgFilters===!0&&(It(Te,d_),It(He,u_),It(He,EI)),eo.mathMl===!0&&(It(Te,c_),It(He,NF),It(He,EI))),U.ADD_TAGS&&(Te===Qe&&(Te=Dp(Te)),It(Te,U.ADD_TAGS,Mt)),U.ADD_ATTR&&(He===St&&(He=Dp(He)),It(He,U.ADD_ATTR,Mt)),U.ADD_URI_SAFE_ATTR&&It(Tn,U.ADD_URI_SAFE_ATTR,Mt),U.FORBID_CONTENTS&&(Ar===Oi&&(Ar=Dp(Ar)),It(Ar,U.FORBID_CONTENTS,Mt)),Uo&&(Te["#text"]=!0),Ai&&It(Te,["html","head","body"]),Te.table&&(It(Te,["tbody"]),delete Re.tbody),U.TRUSTED_TYPES_POLICY){if(typeof U.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ag('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof U.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ag('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');D=U.TRUSTED_TYPES_POLICY,_=D.createHTML("")}else D===void 0&&(D=c9(m,n)),D!==null&&typeof _=="string"&&(_=D.createHTML(""));Dr&&Dr(U),jt=U}},On=It({},["mi","mo","mn","ms","mtext"]),li=It({},["foreignobject","desc","title","annotation-xml"]),pr=It({},["title","style","font","a","script"]),de=It({},l_);It(de,d_),It(de,e9);let S=It({},c_);It(S,t9);let w=function(U){let he=E(U);(!he||!he.tagName)&&(he={namespaceURI:L,tagName:"template"});let De=wI(U.tagName),Gt=wI(he.tagName);return j[U.namespaceURI]?U.namespaceURI===cr?he.namespaceURI===mn?De==="svg":he.namespaceURI===Wo?De==="svg"&&(Gt==="annotation-xml"||On[Gt]):!!de[De]:U.namespaceURI===Wo?he.namespaceURI===mn?De==="math":he.namespaceURI===cr?De==="math"&&li[Gt]:!!S[De]:U.namespaceURI===mn?he.namespaceURI===cr&&!li[Gt]||he.namespaceURI===Wo&&!On[Gt]?!1:!S[De]&&(pr[De]||!de[De]):!!(Ke==="application/xhtml+xml"&&j[U.namespaceURI]):!1},k=function(U){Pg(e.removed,{element:U});try{U.parentNode.removeChild(U)}catch{U.remove()}},R=function(U,he){try{Pg(e.removed,{attribute:he.getAttributeNode(U),from:he})}catch{Pg(e.removed,{attribute:null,from:he})}if(he.removeAttribute(U),U==="is"&&!He[U])if(Bo||Zr)try{k(he)}catch{}else try{he.setAttribute(U,"")}catch{}},F=function(U){let he,De;if(kt)U="<remove></remove>"+U;else{let Yi=XH(U,/^[\r\n\t ]+/);De=Yi&&Yi[0]}Ke==="application/xhtml+xml"&&L===mn&&(U='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+U+"</body></html>");let Gt=D?D.createHTML(U):U;if(L===mn)try{he=new h().parseFromString(Gt,Ke)}catch{}if(!he||!he.documentElement){he=O.createDocument(L,"template",null);try{he.documentElement.innerHTML=q?_:Gt}catch{}}let qn=he.body||he.documentElement;return U&&De&&qn.insertBefore(i.createTextNode(De),qn.childNodes[0]||null),L===mn?M.call(he,Ai?"html":"body")[0]:Ai?he.documentElement:qn},Y=function(U){return G.call(U.ownerDocument||U,U,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},te=function(U){return U instanceof p&&(typeof U.nodeName!="string"||typeof U.textContent!="string"||typeof U.removeChild!="function"||!(U.attributes instanceof u)||typeof U.removeAttribute!="function"||typeof U.setAttribute!="function"||typeof U.namespaceURI!="string"||typeof U.insertBefore!="function"||typeof U.hasChildNodes!="function")},Se=function(U){return typeof a=="object"?U instanceof a:U&&typeof U=="object"&&typeof U.nodeType=="number"&&typeof U.nodeName=="string"},we=function(U,he,De){oe[U]&&YH(oe[U],Gt=>{Gt.call(e,he,De,jt)})},it=function(U){let he;if(we("beforeSanitizeElements",U,null),te(U))return k(U),!0;let De=Mt(U.nodeName);if(we("uponSanitizeElement",U,{tagName:De,allowedTags:Te}),U.hasChildNodes()&&!Se(U.firstElementChild)&&(!Se(U.content)||!Se(U.content.firstElementChild))&&lo(/<[/\w]/g,U.innerHTML)&&lo(/<[/\w]/g,U.textContent))return k(U),!0;if(!Te[De]||Re[De]){if(!Re[De]&&Jt(De)&&(nt.tagNameCheck instanceof RegExp&&lo(nt.tagNameCheck,De)||nt.tagNameCheck instanceof Function&&nt.tagNameCheck(De)))return!1;if(Uo&&!Ar[De]){let Gt=E(U)||U.parentNode,qn=T(U)||U.childNodes;if(qn&&Gt){let Yi=qn.length;for(let En=Yi-1;En>=0;--En)Gt.insertBefore(g(qn[En],!0),y(U))}}return k(U),!0}return U instanceof l&&!w(U)||(De==="noscript"||De==="noembed"||De==="noframes")&&lo(/<\/no(script|embed|frames)/i,U.innerHTML)?(k(U),!0):(Pi&&U.nodeType===3&&(he=U.textContent,he=ls(he,ee," "),he=ls(he,re," "),he=ls(he,Fe," "),U.textContent!==he&&(Pg(e.removed,{element:U.cloneNode()}),U.textContent=he)),we("afterSanitizeElements",U,null),!1)},Dt=function(U,he,De){if(va&&(he==="id"||he==="name")&&(De in i||De in Zn))return!1;if(!(Li&&!Gn[he]&&lo(st,he))){if(!(xn&&lo(be,he))){if(!He[he]||Gn[he]){if(!(Jt(U)&&(nt.tagNameCheck instanceof RegExp&&lo(nt.tagNameCheck,U)||nt.tagNameCheck instanceof Function&&nt.tagNameCheck(U))&&(nt.attributeNameCheck instanceof RegExp&&lo(nt.attributeNameCheck,he)||nt.attributeNameCheck instanceof Function&&nt.attributeNameCheck(he))||he==="is"&&nt.allowCustomizedBuiltInElements&&(nt.tagNameCheck instanceof RegExp&&lo(nt.tagNameCheck,De)||nt.tagNameCheck instanceof Function&&nt.tagNameCheck(De))))return!1}else if(!Tn[he]){if(!lo(ve,ls(De,fe,""))){if(!((he==="src"||he==="xlink:href"||he==="href")&&U!=="script"&&QH(De,"data:")===0&&vo[U])){if(!(dr&&!lo(ae,ls(De,fe,"")))){if(De)return!1}}}}}}return!0},Jt=function(U){return U.indexOf("-")>0},Mn=function(U){let he,De,Gt,qn;we("beforeSanitizeAttributes",U,null);let{attributes:Yi}=U;if(!Yi)return;let En={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:He};for(qn=Yi.length;qn--;){he=Yi[qn];let{name:ws,namespaceURI:bE}=he;if(De=ws==="value"?he.value:JH(he.value),Gt=Mt(ws),En.attrName=Gt,En.attrValue=De,En.keepAttr=!0,En.forceKeepAttr=void 0,we("uponSanitizeAttribute",U,En),De=En.attrValue,En.forceKeepAttr||(R(ws,U),!En.keepAttr))continue;if(!ba&&lo(/\/>/i,De)){R(ws,U);continue}Pi&&(De=ls(De,ee," "),De=ls(De,re," "),De=ls(De,Fe," "));let BL=Mt(U.nodeName);if(Dt(BL,Gt,De)){if(ya&&(Gt==="id"||Gt==="name")&&(R(ws,U),De=kd+De),D&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!bE)switch(m.getAttributeType(BL,Gt)){case"TrustedHTML":{De=D.createHTML(De);break}case"TrustedScriptURL":{De=D.createScriptURL(De);break}}try{bE?U.setAttributeNS(bE,ws,De):U.setAttribute(ws,De),PF(e.removed)}catch{}}}we("afterSanitizeAttributes",U,null)},an=function Ae(U){let he,De=Y(U);for(we("beforeSanitizeShadowDOM",U,null);he=De.nextNode();)we("uponSanitizeShadowNode",he,null),!it(he)&&(he.content instanceof o&&Ae(he.content),Mn(he));we("afterSanitizeShadowDOM",U,null)};return e.sanitize=function(Ae){let U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},he,De,Gt,qn;if(q=!Ae,q&&(Ae="<!-->"),typeof Ae!="string"&&!Se(Ae))if(typeof Ae.toString=="function"){if(Ae=Ae.toString(),typeof Ae!="string")throw Ag("dirty is not a string, aborting")}else throw Ag("toString is not a function");if(!e.isSupported)return Ae;if(Jr||sn(U),e.removed=[],typeof Ae=="string"&&(Vo=!1),Vo){if(Ae.nodeName){let ws=Mt(Ae.nodeName);if(!Te[ws]||Re[ws])throw Ag("root node is forbidden and cannot be sanitized in-place")}}else if(Ae instanceof a)he=F("<!---->"),De=he.ownerDocument.importNode(Ae,!0),De.nodeType===1&&De.nodeName==="BODY"||De.nodeName==="HTML"?he=De:he.appendChild(De);else{if(!Bo&&!Pi&&!Ai&&Ae.indexOf("<")===-1)return D&&ji?D.createHTML(Ae):Ae;if(he=F(Ae),!he)return Bo?null:ji?_:""}he&&kt&&k(he.firstChild);let Yi=Y(Vo?Ae:he);for(;Gt=Yi.nextNode();)it(Gt)||(Gt.content instanceof o&&an(Gt.content),Mn(Gt));if(Vo)return Ae;if(Bo){if(Zr)for(qn=Z.call(he.ownerDocument);he.firstChild;)qn.appendChild(he.firstChild);else qn=he;return(He.shadowroot||He.shadowrootmode)&&(qn=H.call(t,qn,!0)),qn}let En=Ai?he.outerHTML:he.innerHTML;return Ai&&Te["!doctype"]&&he.ownerDocument&&he.ownerDocument.doctype&&he.ownerDocument.doctype.name&&lo(VF,he.ownerDocument.doctype.name)&&(En="<!DOCTYPE "+he.ownerDocument.doctype.name+`>
`+En),Pi&&(En=ls(En,ee," "),En=ls(En,re," "),En=ls(En,Fe," ")),D&&ji?D.createHTML(En):En},e.setConfig=function(Ae){sn(Ae),Jr=!0},e.clearConfig=function(){jt=null,Jr=!1},e.isValidAttribute=function(Ae,U,he){jt||sn({});let De=Mt(Ae),Gt=Mt(U);return Dt(De,Gt,he)},e.addHook=function(Ae,U){typeof U=="function"&&(oe[Ae]=oe[Ae]||[],Pg(oe[Ae],U))},e.removeHook=function(Ae){if(oe[Ae])return PF(oe[Ae])},e.removeHooks=function(Ae){oe[Ae]&&(oe[Ae]=[])},e.removeAllHooks=function(){oe={}},e}var Qs=WF();var LUe=Qs.version,PUe=Qs.isSupported,Og=Qs.sanitize,AUe=Qs.setConfig,OUe=Qs.clearConfig,MUe=Qs.isValidAttribute,CI=Qs.addHook,kI=Qs.removeHook,NUe=Qs.removeHooks,FUe=Qs.removeAllHooks;function bi(r,e,t){return Math.min(Math.max(r,e),t)}var{registerWindow:qF,getWindow:Le,getDocument:iVe,getWindows:Ng,getWindowsCount:_I,getWindowId:Jl,getWindowById:gc,hasWindow:rVe,onDidRegisterWindow:Fg,onWillUnregisterWindow:oVe,onDidUnregisterWindow:$F}=function(){let r=new Map;II(xe,1);let e={window:xe,disposables:new Q};r.set(xe.vscodeWindowId,e);let t=new x,n=new x,i=new x;function o(s,a){return(typeof s=="number"?r.get(s):void 0)??(a?e:void 0)}return{onDidRegisterWindow:t.event,onWillUnregisterWindow:i.event,onDidUnregisterWindow:n.event,registerWindow(s){if(r.has(s.vscodeWindowId))return P.None;let a=new Q,l={window:s,disposables:a.add(new Q)};return r.set(s.vscodeWindowId,l),a.add(ie(()=>{r.delete(s.vscodeWindowId),n.fire(s)})),a.add(K(s,se.BEFORE_UNLOAD,()=>{i.fire(s)})),t.fire(l),a},getWindows(){return r.values()},getWindowsCount(){return r.size},getWindowId(s){return s.vscodeWindowId},hasWindow(s){return r.has(s)},getWindowById:o,getWindow(s){let a=s;if(a?.ownerDocument?.defaultView)return a.ownerDocument.defaultView.window;let l=s;return l?.view?l.view.window:xe},getDocument(s){return Le(s).document}}}();function pn(r){for(;r.firstChild;)r.firstChild.remove()}var g_=class{_handler;_node;_type;_options;constructor(e,t,n,i){this._node=e,this._type=t,this._handler=n,this._options=i||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function K(r,e,t,n){return new g_(r,e,t,n)}function u9(r,e){return function(t){return e(new zn(r,t))}}function p9(r){return function(e){return r(new ht(e))}}var si=function(e,t,n,i){let o=n;return t==="click"||t==="mousedown"||t==="contextmenu"?o=u9(Le(e),n):(t==="keydown"||t==="keypress"||t==="keyup")&&(o=p9(n)),K(e,t,o,i)};var h9,rr;function jF(r,e,t,n){let i=0,o=r.setInterval(()=>{i++,(typeof n=="number"&&i>=n||e()===!0)&&s.dispose()},t),s=ie(()=>{r.clearInterval(o)});return s}var DI=class extends tv{defaultTarget;constructor(e){super(),this.defaultTarget=e&&Le(e)}cancelAndSet(e,t,n){return super.cancelAndSet(e,t,n??this.defaultTarget)}},Mg=class{_runner;priority;_canceled;constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Ze(e)}}static sort(e,t){return t.priority-e.priority}};(function(){let r=new Map,e=new Map,t=new Map,n=new Map,i=o=>{t.set(o,!1);let s=r.get(o)??[];for(e.set(o,s),r.set(o,[]),n.set(o,!0);s.length>0;)s.sort(Mg.sort),s.shift().execute();n.set(o,!1)};rr=(o,s,a=0)=>{let l=Jl(o),d=new Mg(s,a),u=r.get(l);return u||(u=[],r.set(l,u)),u.push(d),t.get(l)||(t.set(l,!0),o.requestAnimationFrame(()=>i(l))),d},h9=(o,s,a)=>{let l=Jl(o);if(n.get(l)){let d=new Mg(s,a),u=e.get(l);return u||(u=[],e.set(l,u)),u.push(d),d}else return rr(o,s,a)}})();function YF(r){return Le(r).getComputedStyle(r,null)}function Bg(r,e){let t=Le(r),n=t.document;if(r!==n.body)return new Pn(r.clientWidth,r.clientHeight);if(pl&&t?.visualViewport)return new Pn(t.visualViewport.width,t.visualViewport.height);if(t?.innerWidth&&t.innerHeight)return new Pn(t.innerWidth,t.innerHeight);if(n.body&&n.body.clientWidth&&n.body.clientHeight)return new Pn(n.body.clientWidth,n.body.clientHeight);if(n.documentElement&&n.documentElement.clientWidth&&n.documentElement.clientHeight)return new Pn(n.documentElement.clientWidth,n.documentElement.clientHeight);if(e)return Bg(e);throw new Error("Unable to figure out browser width and height")}var ir=class r{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){let i=YF(e),o=i?i.getPropertyValue(t):"0";return r.convertToPixels(e,o)}static getBorderLeftWidth(e){return r.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return r.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return r.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return r.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return r.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return r.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return r.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return r.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return r.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return r.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return r.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return r.getDimension(e,"margin-bottom","marginBottom")}},Pn=class r{constructor(e,t){this.width=e;this.height=t}static None=new r(0,0);with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new r(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof r?e:new r(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}};function Ug(r){let e=r.offsetParent,t=r.offsetTop,n=r.offsetLeft;for(;(r=r.parentNode)!==null&&r!==r.ownerDocument.body&&r!==r.ownerDocument.documentElement;){t-=r.scrollTop;let i=JF(r)?null:YF(r);i&&(n-=i.direction!=="rtl"?r.scrollLeft:-r.scrollLeft),r===e&&(n+=ir.getBorderLeftWidth(r),t+=ir.getBorderTopWidth(r),t+=r.offsetTop,n+=r.offsetLeft,e=r.offsetParent)}return{left:n,top:t}}function XF(r,e,t){typeof e=="number"&&(r.style.width=`${e}px`),typeof t=="number"&&(r.style.height=`${t}px`)}function QF(r,e,t,n,i,o="absolute"){typeof e=="number"&&(r.style.top=`${e}px`),typeof t=="number"&&(r.style.right=`${t}px`),typeof n=="number"&&(r.style.bottom=`${n}px`),typeof i=="number"&&(r.style.left=`${i}px`),r.style.position=o}function Vg(r){let e=r.getBoundingClientRect(),t=Le(r);return{left:e.left+t.scrollX,top:e.top+t.scrollY,width:e.width,height:e.height}}function _p(r){let e=ir.getMarginLeft(r)+ir.getMarginRight(r);return r.offsetWidth+e}function Rp(r){let e=ir.getBorderLeftWidth(r)+ir.getBorderRightWidth(r),t=ir.getPaddingLeft(r)+ir.getPaddingRight(r);return r.offsetWidth-e-t}function RI(r){let e=ir.getBorderTopWidth(r)+ir.getBorderBottomWidth(r),t=ir.getPaddingTop(r)+ir.getPaddingBottom(r);return r.offsetHeight-e-t}function LI(r){let e=ir.getMarginTop(r)+ir.getMarginBottom(r);return r.offsetHeight+e}function _r(r,e){return!!e?.contains(r)}function m9(r,e,t){for(;r&&r.nodeType===r.ELEMENT_NODE;){if(r.classList.contains(e))return r;if(t){if(typeof t=="string"){if(r.classList.contains(t))return null}else if(r===t)return null}r=r.parentNode}return null}function PI(r,e,t){return!!m9(r,e,t)}function JF(r){return r&&!!r.host&&!!r.mode}function g9(r){for(;r.parentNode;){if(r===r.ownerDocument?.body)return null;r=r.parentNode}return JF(r)?r:null}function cs(){let r=AI().activeElement;for(;r?.shadowRoot;)r=r.shadowRoot.activeElement;return r}function or(r){return cs()===r}function b_(r){return _r(cs(),r)}function AI(){return _I()<=1?xe.document:Array.from(Ng()).map(({window:e})=>e.document).find(e=>e.hasFocus())??xe.document}function fc(){return AI().defaultView?.window??xe}var OI=new Map;function ZF(r){return OI.has(r)}function sr(r=xe.document.head,e,t){let n=document.createElement("style");if(n.type="text/css",n.media="screen",e?.(n),r.appendChild(n),t&&t.add(ie(()=>n.remove())),r===xe.document.head){let i=new Set;OI.set(n,i);for(let{window:o,disposables:s}of Ng()){if(o===xe)continue;let a=s.add(tB(n,i,o));t?.add(a)}}return n}function eB(r){let e=new Q;for(let[t,n]of OI)e.add(tB(t,n,r));return e}function tB(r,e,t){let n=new Q,i=r.cloneNode(!0);t.document.head.appendChild(i),n.add(ie(()=>i.remove()));for(let o of b9(r))i.sheet?.insertRule(o.cssText,i.sheet?.cssRules.length);return n.add(MI.observe(r,n,{childList:!0})(()=>{i.textContent=r.textContent})),e.add(i),n.add(ie(()=>e.delete(i))),n}var MI=new class{mutationObservers=new Map;observe(r,e,t){let n=this.mutationObservers.get(r);n||(n=new Map,this.mutationObservers.set(r,n));let i=os(t),o=n.get(i);if(o)o.users+=1;else{let s=new x,a=new MutationObserver(d=>s.fire(d));a.observe(r,t);let l=o={users:1,observer:a,onDidMutate:s.event};e.add(ie(()=>{l.users-=1,l.users===0&&(s.dispose(),a.disconnect(),n?.delete(i),n?.size===0&&this.mutationObservers.delete(r))})),n.set(i,o)}return o.onDidMutate}};function nB(r=xe.document.head){return rB("meta",r)}function iB(r=xe.document.head){return rB("link",r)}function rB(r,e=xe.document.head){let t=document.createElement(r);return e.appendChild(t),t}var m_=null;function f9(){return m_||(m_=sr()),m_}function b9(r){return r?.sheet?.rules?r.sheet.rules:r?.sheet?.cssRules?r.sheet.cssRules:[]}function v_(r,e,t=f9()){if(!(!t||!e)){t.sheet?.insertRule(`${r} {${e}}`,0);for(let n of OI.get(t)??[])v_(r,e,n)}}function An(r){return r instanceof HTMLElement||r instanceof Le(r).HTMLElement}function oB(r){return r instanceof SVGElement||r instanceof Le(r).SVGElement}function NI(r){return r instanceof MouseEvent||r instanceof Le(r).MouseEvent}function Js(r){return r instanceof KeyboardEvent||r instanceof Le(r).KeyboardEvent}var se={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:Ka?"webkitAnimationStart":"animationstart",ANIMATION_END:Ka?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:Ka?"webkitAnimationIteration":"animationiteration"};var We={stop:(r,e)=>(r.preventDefault(),e&&r.stopPropagation(),r)};var f_=class r extends P{_onDidFocus=this._register(new x);onDidFocus=this._onDidFocus.event;_onDidBlur=this._register(new x);onDidBlur=this._onDidBlur.event;_refreshStateHandler;static hasFocusWithin(e){if(An(e)){let t=g9(e),n=t?t.activeElement:e.ownerDocument.activeElement;return _r(n,e)}else{let t=e;return _r(t.document.activeElement,t.document)}}constructor(e){super();let t=r.hasFocusWithin(e),n=!1,i=()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},o=()=>{t&&(n=!0,(An(e)?Le(e):e).setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{r.hasFocusWithin(e)!==t&&(t?o():i())},this._register(K(e,se.FOCUS,i,!0)),this._register(K(e,se.BLUR,o,!0)),An(e)&&(this._register(K(e,se.FOCUS_IN,()=>this._refreshStateHandler())),this._register(K(e,se.FOCUS_OUT,()=>this._refreshStateHandler())))}refreshState(){this._refreshStateHandler()}};function co(r){return new f_(r)}function sB(r,e){return r.after(e),e}function Ie(r,...e){if(r.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function FI(r,e){return r.insertBefore(e,r.firstChild),e}function us(r,...e){r.innerText="",Ie(r,...e)}var v9=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;function aB(r,e,t,...n){let i=v9.exec(e);if(!i)throw new Error("Bad use of emmet");let o=i[1]||"div",s;return r!=="http://www.w3.org/1999/xhtml"?s=document.createElementNS(r,o):s=document.createElement(o),i[3]&&(s.id=i[3]),i[4]&&(s.className=i[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?s[a]=l:a==="selected"?l&&s.setAttribute(a,"true"):s.setAttribute(a,l))}),s.append(...n),s}function ue(r,e,...t){return aB("http://www.w3.org/1999/xhtml",r,e,...t)}ue.SVG=function(r,e,...t){return aB("http://www.w3.org/2000/svg",r,e,...t)};function Ga(...r){for(let e of r)e.style.display="",e.removeAttribute("aria-hidden")}function Zl(...r){for(let e of r)e.style.display="none",e.setAttribute("aria-hidden","true")}function y_(r){xe.open(r,"_blank","noopener")}var HF=780,KF=640;function I_(r){let e=Math.floor(xe.screenLeft+xe.innerWidth/2-HF/2),t=Math.floor(xe.screenTop+xe.innerHeight/2-KF/2);xe.open(r,"_blank",`width=${HF},height=${KF},top=${t},left=${e}`)}function lB(r,e=!0){let t=xe.open();return t?(e&&(t.opener=null),t.location.href=r,!0):!1}function dB(r,e){let t=()=>{e(),n=rr(r,t)},n=rr(r,t);return ie(()=>n.dispose())}Jb.setPreferredWebSchema(/^https:/.test(xe.location.href)?"https":"http");function ed(r){return r?`url('${yr.uriToBrowserUri(r).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function Rr(r,e){if(r!==void 0){let t=r.match(/^\s*var\((.+)\)$/);if(t){let n=t[1].split(",",2);return n.length===2&&(e=Rr(n[1].trim(),e)),`var(${n[0]}, ${e})`}return r}return e}function cB(r,e=!1){let t=document.createElement("a");return CI("afterSanitizeAttributes",n=>{for(let i of["href","src"])if(n.hasAttribute(i)){let o=n.getAttribute(i);if(i==="href"&&o.startsWith("#"))continue;if(t.href=o,!r.includes(t.protocol.replace(/:$/,""))){if(e&&i==="src"&&t.href.startsWith("data:"))continue;n.removeAttribute(i)}}}),ie(()=>{kI("afterSanitizeAttributes")})}var sVe=[le.http,le.https,le.command],uB=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]),aVe=Object.freeze({ALLOWED_TAGS:["a","button","blockquote","code","div","h1","h2","h3","h4","h5","h6","hr","input","label","li","p","pre","select","small","span","strong","textarea","ul","ol"],ALLOWED_ATTR:["href","data-href","data-command","target","title","name","src","alt","class","id","role","tabindex","style","data-code","width","height","align","x-dispatch","required","checked","placeholder","type","start"],RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,RETURN_TRUSTED_TYPE:!0});var hc=class r extends x{_subscriptions=new Q;_keyStatus;static instance;constructor(){super(),this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(N.runAndSubscribe(Fg,({window:e,disposables:t})=>this.registerListeners(e,t),{window:xe,disposables:this._subscriptions}))}registerListeners(e,t){t.add(K(e,"keydown",n=>{if(n.defaultPrevented)return;let i=new ht(n);if(!(i.keyCode===6&&n.repeat)){if(n.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(n.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(n.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(n.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(i.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=n.altKey,this._keyStatus.ctrlKey=n.ctrlKey,this._keyStatus.metaKey=n.metaKey,this._keyStatus.shiftKey=n.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=n,this.fire(this._keyStatus))}},!0)),t.add(K(e,"keyup",n=>{n.defaultPrevented||(!n.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!n.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!n.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!n.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=n.altKey,this._keyStatus.ctrlKey=n.ctrlKey,this._keyStatus.metaKey=n.metaKey,this._keyStatus.shiftKey=n.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=n,this.fire(this._keyStatus)))},!0)),t.add(K(e.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(K(e.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(K(e.document.body,"mousemove",n=>{n.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),t.add(K(e,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}get isModifierPressed(){return this._keyStatus.altKey||this._keyStatus.ctrlKey||this._keyStatus.metaKey||this._keyStatus.shiftKey}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return r.instance||(r.instance=new r),r.instance}dispose(){super.dispose(),this._subscriptions.dispose()}};var mc=class extends P{constructor(t,n){super();this.element=t;this.callbacks=n;this.registerListeners()}counter=0;dragStartTime=0;registerListeners(){this.callbacks.onDragStart&&this._register(K(this.element,se.DRAG_START,t=>{this.callbacks.onDragStart?.(t)})),this.callbacks.onDrag&&this._register(K(this.element,se.DRAG,t=>{this.callbacks.onDrag?.(t)})),this._register(K(this.element,se.DRAG_ENTER,t=>{this.counter++,this.dragStartTime=t.timeStamp,this.callbacks.onDragEnter?.(t)})),this._register(K(this.element,se.DRAG_OVER,t=>{t.preventDefault(),this.callbacks.onDragOver?.(t,t.timeStamp-this.dragStartTime)})),this._register(K(this.element,se.DRAG_LEAVE,t=>{this.counter--,this.counter===0&&(this.dragStartTime=0,this.callbacks.onDragLeave?.(t))})),this._register(K(this.element,se.DRAG_END,t=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDragEnd?.(t)})),this._register(K(this.element,se.DROP,t=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDrop?.(t)}))}},y9=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function Lp(r,...e){let t,n;Array.isArray(e[0])?(t={},n=e[0]):(t=e[0]||{},n=e[1]);let i=y9.exec(r);if(!i||!i.groups)throw new Error("Bad use of h");let o=i.groups.tag||"div",s=document.createElement(o);i.groups.id&&(s.id=i.groups.id);let a=[];if(i.groups.class)for(let d of i.groups.class.split("."))d!==""&&a.push(d);if(t.className!==void 0)for(let d of t.className.split("."))d!==""&&a.push(d);a.length>0&&(s.className=a.join(" "));let l={};if(i.groups.name&&(l[i.groups.name]=s),n)for(let d of n)An(d)?s.appendChild(d):typeof d=="string"?s.append(d):"root"in d&&(Object.assign(l,d),s.appendChild(d.root));for(let[d,u]of Object.entries(t))if(d!=="className")if(d==="style")for(let[p,h]of Object.entries(u))s.style.setProperty(GF(p),typeof h=="number"?h+"px":""+h);else d==="tabIndex"?s.tabIndex=u:s.setAttribute(GF(d),u.toString());return l.root=s,l}function GF(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function BI(r,e,t){for(let{name:n,value:i}of r.attributes)(!t||t.includes(n))&&e.setAttribute(n,i)}function I9(r,e,t){let n=r.getAttribute(t);n?e.setAttribute(t,n):e.removeAttribute(t)}function UI(r,e,t){BI(r,e,t);let n=new Q;return n.add(MI.observe(r,n,{attributes:!0,attributeFilter:t})(i=>{for(let o of i)o.type==="attributes"&&o.attributeName&&I9(r,e,o.attributeName)})),n}function Zs(r){return r.tagName.toLowerCase()==="input"||r.tagName.toLowerCase()==="textarea"||An(r)&&!!r.editContext}var qr={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:Xo.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"};var wt;(o=>(o.Tap="-monaco-gesturetap",o.Change="-monaco-gesturechange",o.Start="-monaco-gesturestart",o.End="-monaco-gesturesend",o.Contextmenu="-monaco-gesturecontextmenu"))(wt||={});var Ri=class Ri extends P{static SCROLL_FRICTION=-.005;static INSTANCE;static HOLD_DELAY=700;dispatched=!1;targets=new ei;ignoreTargets=new ei;handle;activeTouches;_lastSetTapCountTime;static CLEAR_TAP_COUNT_TIME=400;constructor(){super(),this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(N.runAndSubscribe(Fg,({window:e,disposables:t})=>{t.add(K(e.document,"touchstart",n=>this.onTouchStart(n),{passive:!1})),t.add(K(e.document,"touchend",n=>this.onTouchEnd(e,n))),t.add(K(e.document,"touchmove",n=>this.onTouchMove(n),{passive:!1}))},{window:xe,disposables:this._store}))}static addTarget(e){if(!Ri.isTouchDevice())return P.None;Ri.INSTANCE||(Ri.INSTANCE=vl(new Ri));let t=Ri.INSTANCE.targets.push(e);return ie(t)}static ignoreTarget(e){if(!Ri.isTouchDevice())return P.None;Ri.INSTANCE||(Ri.INSTANCE=vl(new Ri));let t=Ri.INSTANCE.ignoreTargets.push(e);return ie(t)}static isTouchDevice(){return"ontouchstart"in xe||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,i=e.targetTouches.length;n<i;n++){let o=e.targetTouches.item(n);this.activeTouches[o.identifier]={id:o.identifier,initialTarget:o.target,initialTimeStamp:t,initialPageX:o.pageX,initialPageY:o.pageY,rollingTimestamps:[t],rollingPageX:[o.pageX],rollingPageY:[o.pageY]};let s=this.newGestureEvent(wt.Start,o.target);s.pageX=o.pageX,s.pageY=o.pageY,this.dispatchEvent(s)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){let n=Date.now(),i=Object.keys(this.activeTouches).length;for(let o=0,s=t.changedTouches.length;o<s;o++){let a=t.changedTouches.item(o);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("move of an UNKNOWN touch",a);continue}let l=this.activeTouches[a.identifier],d=Date.now()-l.initialTimeStamp;if(d<Ri.HOLD_DELAY&&Math.abs(l.initialPageX-mr(l.rollingPageX))<30&&Math.abs(l.initialPageY-mr(l.rollingPageY))<30){let u=this.newGestureEvent(wt.Tap,l.initialTarget);u.pageX=mr(l.rollingPageX),u.pageY=mr(l.rollingPageY),this.dispatchEvent(u)}else if(d>=Ri.HOLD_DELAY&&Math.abs(l.initialPageX-mr(l.rollingPageX))<30&&Math.abs(l.initialPageY-mr(l.rollingPageY))<30){let u=this.newGestureEvent(wt.Contextmenu,l.initialTarget);u.pageX=mr(l.rollingPageX),u.pageY=mr(l.rollingPageY),this.dispatchEvent(u)}else if(i===1){let u=mr(l.rollingPageX),p=mr(l.rollingPageY),h=mr(l.rollingTimestamps)-l.rollingTimestamps[0],m=u-l.rollingPageX[0],f=p-l.rollingPageY[0],g=[...this.targets].filter(y=>l.initialTarget instanceof Node&&y.contains(l.initialTarget));this.inertia(e,g,n,Math.abs(m)/h,m>0?1:-1,u,Math.abs(f)/h,f>0?1:-1,p)}this.dispatchEvent(this.newGestureEvent(wt.End,l.initialTarget)),delete this.activeTouches[a.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){let n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===wt.Tap){let t=new Date().getTime(),n=0;t-this._lastSetTapCountTime>Ri.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===wt.Change||e.type===wt.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(let n of this.ignoreTargets)if(n.contains(e.initialTarget))return;let t=[];for(let n of this.targets)if(n.contains(e.initialTarget)){let i=0,o=e.initialTarget;for(;o&&o!==n;)i++,o=o.parentElement;t.push([i,n])}t.sort((n,i)=>n[0]-i[0]);for(let[n,i]of t)i.dispatchEvent(e),this.dispatched=!0}}inertia(e,t,n,i,o,s,a,l,d){this.handle=rr(e,()=>{let u=Date.now(),p=u-n,h=0,m=0,f=!0;i+=Ri.SCROLL_FRICTION*p,a+=Ri.SCROLL_FRICTION*p,i>0&&(f=!1,h=o*i*p),a>0&&(f=!1,m=l*a*p);let g=this.newGestureEvent(wt.Change);g.translationX=h,g.translationY=m,t.forEach(y=>y.dispatchEvent(g)),f||this.inertia(e,t,u,i,o,s+h,a,l,d+m)})}onTouchMove(e){let t=Date.now();for(let n=0,i=e.changedTouches.length;n<i;n++){let o=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("end of an UNKNOWN touch",o);continue}let s=this.activeTouches[o.identifier],a=this.newGestureEvent(wt.Change,s.initialTarget);a.translationX=o.pageX-mr(s.rollingPageX),a.translationY=o.pageY-mr(s.rollingPageY),a.pageX=o.pageX,a.pageY=o.pageY,this.dispatchEvent(a),s.rollingPageX.length>3&&(s.rollingPageX.shift(),s.rollingPageY.shift(),s.rollingTimestamps.shift()),s.rollingPageX.push(o.pageX),s.rollingPageY.push(o.pageY),s.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};C([J],Ri,"isTouchDevice",1);var Zt=Ri;var qi;(i=>{function r(o,s){if(o.start>=s.end||s.start>=o.end)return{start:0,end:0};let a=Math.max(o.start,s.start),l=Math.min(o.end,s.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}i.intersect=r;function e(o){return o.end-o.start<=0}i.isEmpty=e;function t(o,s){return!e(r(o,s))}i.intersects=t;function n(o,s){let a=[],l={start:o.start,end:Math.min(s.start,o.end)},d={start:Math.max(s.end,o.start),end:o.end};return e(l)||a.push(l),e(d)||a.push(d),a}i.relativeComplement=n})(qi||={});var Wg=class{constructor(e){this.domNode=e}_maxWidth="";_width="";_height="";_top="";_left="";_bottom="";_right="";_paddingTop="";_paddingLeft="";_paddingBottom="";_paddingRight="";_fontFamily="";_fontWeight="";_fontSize="";_fontStyle="";_fontFeatureSettings="";_fontVariationSettings="";_textDecoration="";_lineHeight="";_letterSpacing="";_className="";_display="";_position="";_visibility="";_color="";_backgroundColor="";_layerHint=!1;_contain="none";_boxShadow="";setMaxWidth(e){let t=$r(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){let t=$r(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){let t=$r(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){let t=$r(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){let t=$r(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){let t=$r(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){let t=$r(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingTop(e){let t=$r(e);this._paddingTop!==t&&(this._paddingTop=t,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(e){let t=$r(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(e){let t=$r(e);this._paddingBottom!==t&&(this._paddingBottom=t,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(e){let t=$r(e);this._paddingRight!==t&&(this._paddingRight=t,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){let t=$r(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){let t=$r(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){let t=$r(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};function $r(r){return typeof r=="number"?`${r}px`:r}function bc(r){return new Wg(r)}var Pp=class{_hooks=new Q;_pointerMoveCallback=null;_onStopCallback=null;dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,n,i,o){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=i,this._onStopCallback=o;let s=e;try{e.setPointerCapture(t),this._hooks.add(ie(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{s=Le(e)}this._hooks.add(K(s,se.POINTER_MOVE,a=>{if(a.buttons!==n){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(K(s,se.POINTER_UP,a=>this.stopMonitoring(!0)))}};var Jn=class extends P{onclick(e,t){this._register(K(e,se.CLICK,n=>t(new zn(Le(e),n))))}onmousedown(e,t){this._register(K(e,se.MOUSE_DOWN,n=>t(new zn(Le(e),n))))}onmouseover(e,t){this._register(K(e,se.MOUSE_OVER,n=>t(new zn(Le(e),n))))}onmouseleave(e,t){this._register(K(e,se.MOUSE_LEAVE,n=>t(new zn(Le(e),n))))}onkeydown(e,t){this._register(K(e,se.KEY_DOWN,n=>t(new ht(n))))}onkeyup(e,t){this._register(K(e,se.KEY_UP,n=>t(new ht(n))))}oninput(e,t){this._register(K(e,se.INPUT,t))}onblur(e,t){this._register(K(e,se.BLUR,t))}onfocus(e,t){this._register(K(e,se.FOCUS,t))}onchange(e,t){this._register(K(e,se.CHANGE,t))}ignoreGesture(e){return Zt.ignoreTarget(e)}};var td=11,VI=class extends Jn{_onActivate;bgDomNode;domNode;_pointerdownRepeatTimer;_pointerdownScheduleRepeatTimer;_pointerMoveMonitor;constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...qe.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=td+"px",this.domNode.style.height=td+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new Pp),this._register(si(this.bgDomNode,se.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(si(this.domNode,se.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new DI),this._pointerdownScheduleRepeatTimer=this._register(new La)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,Le(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}};var Ap=class r{_scrollbarSize;_oppositeScrollbarSize;_arrowSize;_visibleSize;_scrollSize;_scrollPosition;_computedAvailableSize;_computedIsNeeded;_computedSliderSize;_computedSliderRatio;_computedSliderPosition;constructor(e,t,n,i,o,s){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=i,this._scrollSize=o,this._scrollPosition=s,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new r(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){let t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){let t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){let t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,i,o){let s=Math.max(0,n-e),a=Math.max(0,s-2*t),l=i>0&&i>n;if(!l)return{computedAvailableSize:Math.round(s),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};let d=Math.round(Math.max(20,Math.floor(n*a/i))),u=(a-d)/(i-n),p=o*u;return{computedAvailableSize:Math.round(s),computedIsNeeded:l,computedSliderSize:Math.round(d),computedSliderRatio:u,computedSliderPosition:Math.round(p)}}_refreshComputedValues(){let e=r._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;let t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;let t=e-this._arrowSize,n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;let t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}};var WI=class extends P{_visibility;_visibleClassName;_invisibleClassName;_domNode;_rawShouldBeVisible;_shouldBeVisible;_isNeeded;_isVisible;_revealTimer;constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new La)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(e?" fade":"")))}};var S9=140,Op=class extends Jn{_host;_scrollable;_scrollByPage;_lazyRender;_scrollbarState;_visibilityController;_pointerMoveMonitor;domNode;slider;_shouldRender;constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new WI(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new Pp),this._shouldRender=!0,this.domNode=bc(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(K(this.domNode.domNode,se.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){let t=this._register(new VI(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,i){this.slider=bc(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof i=="number"&&this.slider.setHeight(i),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(K(this.slider.domNode,se.POINTER_DOWN,o=>{o.button===0&&(o.preventDefault(),this._sliderPointerDown(o))})),this.onclick(this.slider.domNode,o=>{o.leftButton&&o.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){let t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),i=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderPointerPosition(e);n<=o&&o<=i?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,n=e.offsetY;else{let o=Vg(this.domNode.domNode);t=e.pageX-o.left,n=e.pageY-o.top}let i=this._pointerDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(i):this._scrollbarState.getDesiredScrollPositionFromOffset(i)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=this._sliderPointerPosition(e),n=this._sliderOrthogonalPointerPosition(e),i=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>{let s=this._sliderOrthogonalPointerPosition(o),a=Math.abs(s-n);if(xt&&a>S9){this._setDesiredScrollPositionNow(i.getScrollPosition());return}let d=this._sliderPointerPosition(o)-t;this._setDesiredScrollPositionNow(i.getDesiredScrollPositionFromDelta(d))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}};var zI=class extends Op{constructor(e,t,n){let i=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new Ap(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,i.width,i.scrollWidth,o.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){let s=(t.arrowSize-td)/2,a=(t.horizontalScrollbarSize-td)/2;this._createArrow({className:"scra",icon:z.scrollbarButtonLeft,top:a,left:s,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new as(null,1,0))}),this._createArrow({className:"scra",icon:z.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:s,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new as(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}};var HI=class extends Op{constructor(e,t,n){let i=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new Ap(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,i.height,i.scrollHeight,o.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){let s=(t.arrowSize-td)/2,a=(t.verticalScrollbarSize-td)/2;this._createArrow({className:"scra",icon:z.scrollbarButtonUp,top:s,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new as(null,0,1))}),this._createArrow({className:"scra",icon:z.scrollbarButtonDown,top:void 0,left:a,bottom:s,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new as(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}};var x9=500,pB=50,hB=!0,S_=class{timestamp;deltaX;deltaY;score;constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}},x_=class r{static INSTANCE=new r;_capacity;_memory;_front;_rear;constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,i=this._rear;do{let o=i===this._front?e:Math.pow(2,-n);if(e-=o,t+=this._memory[i].score*o,i===this._front)break;i=(this._capacity+i-1)%this._capacity,n++}while(!0);return t<=.5}acceptStandardWheelEvent(e){if(kp){let t=Le(e.browserEvent),n=wF(t);this.accept(Date.now(),e.deltaX*n,e.deltaY*n)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,n){let i=null,o=new S_(e,t,n);this._front===-1&&this._rear===-1?(this._memory[0]=o,this._front=0,this._rear=0):(i=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=o),o.score=this._computeScore(o,i)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let n=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(n+=.25),t){let i=Math.abs(e.deltaX),o=Math.abs(e.deltaY),s=Math.abs(t.deltaX),a=Math.abs(t.deltaY),l=Math.max(Math.min(i,s),1),d=Math.max(Math.min(o,a),1),u=Math.max(i,s),p=Math.max(o,a);u%l===0&&p%d===0&&(n-=.5)}return Math.min(Math.max(n,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}},zg=class extends Jn{_options;_scrollable;_verticalScrollbar;_horizontalScrollbar;_domNode;_leftShadowDomNode;_topShadowDomNode;_topLeftShadowDomNode;_listenOnDomNode;_mouseWheelToDispose;_isDragging;_mouseIsOver;_hideTimeout;_shouldRender;_revealOnScroll;_onScroll=this._register(new x);onScroll=this._onScroll.event;_onWillScroll=this._register(new x);onWillScroll=this._onWillScroll.event;get options(){return this._options}constructor(e,t,n){super(),e.style.overflow="hidden",this._options=T9(t),this._scrollable=n,this._register(this._scrollable.onScroll(o=>{this._onWillScroll.fire(o),this._onDidScroll(o),this._onScroll.fire(o)}));let i={onMouseWheel:o=>this._onMouseWheel(o),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new HI(this._scrollable,this._options,i)),this._horizontalScrollbar=this._register(new zI(this._scrollable,this._options,i)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=bc(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=bc(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=bc(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,o=>this._onMouseOver(o)),this.onmouseleave(this._listenOnDomNode,o=>this._onMouseLeave(o)),this._hideTimeout=this._register(new La),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=vt(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,ze&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(e){this._revealOnScroll=e}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new as(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=vt(this._mouseWheelToDispose),e)){let n=i=>{this._onMouseWheel(new as(i))};this._mouseWheelToDispose.push(K(this._listenOnDomNode,se.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){if(e.browserEvent?.defaultPrevented)return;let t=x_.INSTANCE;hB&&t.acceptStandardWheelEvent(e);let n=!1;if(e.deltaY||e.deltaX){let o=e.deltaY*this._options.mouseWheelScrollSensitivity,s=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&s+o===0?s=o=0:Math.abs(o)>=Math.abs(s)?s=0:o=0),this._options.flipAxes&&([o,s]=[s,o]);let a=!ze&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!s&&(s=o,o=0),e.browserEvent&&e.browserEvent.altKey&&(s=s*this._options.fastScrollSensitivity,o=o*this._options.fastScrollSensitivity);let l=this._scrollable.getFutureScrollPosition(),d={};if(o){let u=pB*o,p=l.scrollTop-(u<0?Math.floor(u):Math.ceil(u));this._verticalScrollbar.writeScrollPosition(d,p)}if(s){let u=pB*s,p=l.scrollLeft-(u<0?Math.floor(u):Math.ceil(u));this._horizontalScrollbar.writeScrollPosition(d,p)}d=this._scrollable.validateScrollPosition(d),(l.scrollLeft!==d.scrollLeft||l.scrollTop!==d.scrollTop)&&(hB&&this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(d):this._scrollable.setScrollPositionNow(d),n=!0)}let i=n;!i&&this._options.alwaysConsumeMouseWheel&&(i=!0),!i&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(i=!0),i&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,i=n?" left":"",o=t?" top":"",s=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${i}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${s}${o}${i}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),x9)}},KI=class extends zg{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;let n=new Pa({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:i=>rr(Le(e),i)});super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}},Mp=class extends zg{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}},vc=class extends zg{_element;constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;let n=new Pa({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:i=>rr(Le(e),i)});super(e,t,n),this._register(n),this._element=e,this._register(this.onScroll(i=>{i.scrollTopChanged&&(this._element.scrollTop=i.scrollTop),i.scrollLeftChanged&&(this._element.scrollLeft=i.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}};function T9(r){let e={lazyRender:typeof r.lazyRender<"u"?r.lazyRender:!1,className:typeof r.className<"u"?r.className:"",useShadows:typeof r.useShadows<"u"?r.useShadows:!0,handleMouseWheel:typeof r.handleMouseWheel<"u"?r.handleMouseWheel:!0,flipAxes:typeof r.flipAxes<"u"?r.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof r.consumeMouseWheelIfScrollbarIsNeeded<"u"?r.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof r.alwaysConsumeMouseWheel<"u"?r.alwaysConsumeMouseWheel:!1,scrollYToX:typeof r.scrollYToX<"u"?r.scrollYToX:!1,mouseWheelScrollSensitivity:typeof r.mouseWheelScrollSensitivity<"u"?r.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof r.fastScrollSensitivity<"u"?r.fastScrollSensitivity:5,scrollPredominantAxis:typeof r.scrollPredominantAxis<"u"?r.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof r.mouseWheelSmoothScroll<"u"?r.mouseWheelSmoothScroll:!0,arrowSize:typeof r.arrowSize<"u"?r.arrowSize:11,listenOnDomNode:typeof r.listenOnDomNode<"u"?r.listenOnDomNode:null,horizontal:typeof r.horizontal<"u"?r.horizontal:1,horizontalScrollbarSize:typeof r.horizontalScrollbarSize<"u"?r.horizontalScrollbarSize:10,horizontalSliderSize:typeof r.horizontalSliderSize<"u"?r.horizontalSliderSize:0,horizontalHasArrows:typeof r.horizontalHasArrows<"u"?r.horizontalHasArrows:!1,vertical:typeof r.vertical<"u"?r.vertical:1,verticalScrollbarSize:typeof r.verticalScrollbarSize<"u"?r.verticalScrollbarSize:10,verticalHasArrows:typeof r.verticalHasArrows<"u"?r.verticalHasArrows:!1,verticalSliderSize:typeof r.verticalSliderSize<"u"?r.verticalSliderSize:0,scrollByPage:typeof r.scrollByPage<"u"?r.scrollByPage:!1};return e.horizontalSliderSize=typeof r.horizontalSliderSize<"u"?r.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof r.verticalSliderSize<"u"?r.verticalSliderSize:e.verticalScrollbarSize,ze&&(e.className+=" mac"),e}var E9=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}}),T_=E9,w9=new Fn(()=>T_("mouse",!1)),C9=new Fn(()=>T_("element",!1));function Pt(r){return r==="element"?C9.value:w9.value}function qa(){return T_("element",!0)}function mB(r,e={}){let t=GI(e);return t.textContent=r,t}function gB(r,e={}){let t=GI(e);return fB(t,k9(r,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function GI(r){let e=r.inline?"span":"div",t=document.createElement(e);return r.className&&(t.className=r.className),t}var E_=class{source;index;constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){let e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}};function fB(r,e,t,n){let i;if(e.type===2)i=document.createTextNode(e.content||"");else if(e.type===3)i=document.createElement("b");else if(e.type===4)i=document.createElement("i");else if(e.type===7&&n)i=document.createElement("code");else if(e.type===5&&t){let o=document.createElement("a");t.disposables.add(si(o,"click",s=>{t.callback(String(e.index),s)})),i=o}else e.type===8?i=document.createElement("br"):e.type===1&&(i=r);i&&r!==i&&r.appendChild(i),i&&Array.isArray(e.children)&&e.children.forEach(o=>{fB(i,o,t,n)})}function k9(r,e){let t={type:1,children:[]},n=0,i=t,o=[],s=new E_(r);for(;!s.eos();){let a=s.next(),l=a==="\\"&&w_(s.peek(),e)!==0;if(l&&(a=s.next()),!l&&D9(a,e)&&a===s.peek()){s.advance(),i.type===2&&(i=o.pop());let d=w_(a,e);if(i.type===d||i.type===5&&d===6)i=o.pop();else{let u={type:d,children:[]};d===5&&(u.index=n,n++),i.children.push(u),o.push(i),i=u}}else if(a===`
`)i.type===2&&(i=o.pop()),i.children.push({type:8});else if(i.type!==2){let d={type:2,content:a};i.children.push(d),o.push(i),i=d}else i.content+=a}return i.type===2&&(i=o.pop()),o.length,t}function D9(r,e){return w_(r,e)!==0}function w_(r,e){switch(r){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}var Ue=class{emitter;get event(){return this.emitter.event}constructor(e,t,n){let i=o=>this.emitter.fire(o);this.emitter=new x({onWillAddFirstListener:()=>e.addEventListener(t,i,n),onDidRemoveLastListener:()=>e.removeEventListener(t,i,n)})}dispose(){this.emitter.dispose()}};var bB=2e4,IB,C_,vB,k_,yB;function nd(r){IB&&(C_.textContent!==r?(pn(vB),qI(C_,r)):(pn(C_),qI(vB,r)))}function D_(r){IB&&(k_.textContent!==r?(pn(yB),qI(k_,r)):(pn(k_),qI(yB,r)))}function qI(r,e){pn(r),e.length>bB&&(e=e.substr(0,bB)),r.textContent=e,r.style.visibility="hidden",r.style.visibility="visible"}var $I=class{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(i=>i.splice(e,t,n))}};function SB(r,e){let t=[];for(let n of e){if(r.start>=n.range.end)continue;if(r.end<n.range.start)break;let i=qi.intersect(r,n.range);qi.isEmpty(i)||t.push({range:i,size:n.size})}return t}function YI({start:r,end:e},t){return{start:r+t,end:e+t}}function R9(r){let e=[],t=null;for(let n of r){let i=n.range.start,o=n.range.end,s=n.size;if(t&&s===t.size){t.range.end=o;continue}t={range:{start:i,end:o},size:s},e.push(t)}return e}function L9(...r){return R9(r.reduce((e,t)=>e.concat(t),[]))}var jI=class{groups=[];_size=0;_paddingTop=0;get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,n=[]){let i=n.length-t,o=SB({start:0,end:e},this.groups),s=SB({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:YI(l.range,i),size:l.size})),a=n.map((l,d)=>({range:{start:e+d,end:e+d+1},size:l.size}));this.groups=L9(o,a,s),this._size=this._paddingTop+this.groups.reduce((l,d)=>l+d.size*(d.range.end-d.range.start),0)}get count(){let e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,n=this._paddingTop;for(let i of this.groups){let o=i.range.end-i.range.start,s=n+o*i.size;if(e<s)return t+Math.floor((e-n)/i.size);t+=o,n=s}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(let i of this.groups){let o=i.range.end-i.range.start,s=n+o;if(e<s)return this._paddingTop+t+(e-n)*i.size;t+=o*i.size,n=s}return-1}};var XI=class{constructor(e){this.renderers=e}cache=new Map;transactionNodesPendingRemoval=new Set;inTransaction=!1;alloc(e){let t=this.getTemplateCache(e).pop(),n=!1;if(t)n=this.transactionNodesPendingRemoval.has(t.domNode),n&&this.transactionNodesPendingRemoval.delete(t.domNode);else{let i=ue(".monaco-list-row"),s=this.getRenderer(e).renderTemplate(i);t={domNode:i,templateId:e,templateData:s}}return{row:t,isReusingConnectedDomNode:n}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(let t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){let{domNode:t,templateId:n}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(n).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),e.remove()}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(let n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){let t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}};var yc={CurrentDragAndDropData:void 0};var ea={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(r){return[r]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0},$a=class{elements;_context;get context(){return this._context}set context(e){this._context=e}constructor(e){this.elements=e}update(){}getData(){return this.elements}},__=class{elements;constructor(e){this.elements=e}update(){}getData(){return this.elements}},R_=class{types;files;constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){let n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}};function P9(r,e){return Array.isArray(r)&&Array.isArray(e)?ln(r,e):r===e}var L_=class{getSetSize;getPosInSet;getRole;isChecked;constructor(e){e?.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,i)=>i,e?.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e?.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e?.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}},jr=class jr{constructor(e,t,n,i=ea){this.virtualDelegate=t;if(i.horizontalScrolling&&i.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(i.paddingTop??0);for(let s of n)this.renderers.set(s.templateId,s);this.cache=this.disposables.add(new XI(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof i.mouseSupport=="boolean"?i.mouseSupport:!0),this._horizontalScrolling=i.horizontalScrolling??ea.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof i.paddingBottom>"u"?0:i.paddingBottom,this.accessibilityProvider=new L_(i.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(i.transformOptimization??ea.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(Zt.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new Pa({forceIntegerValues:!0,smoothScrollDuration:i.smoothScrolling??!1?125:0,scheduleAtNextAnimationFrame:s=>rr(Le(this.domNode),s)})),this.scrollableElement=this.disposables.add(new Mp(this.rowsContainer,{alwaysConsumeMouseWheel:i.alwaysConsumeMouseWheel??ea.alwaysConsumeMouseWheel,horizontal:1,vertical:i.verticalScrollMode??ea.verticalScrollMode,useShadows:i.useShadows??ea.useShadows,mouseWheelScrollSensitivity:i.mouseWheelScrollSensitivity,fastScrollSensitivity:i.fastScrollSensitivity,scrollByPage:i.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(K(this.rowsContainer,wt.Change,s=>this.onTouchChange(s))),this.disposables.add(K(this.scrollableElement.getDomNode(),"scroll",s=>s.target.scrollTop=0)),this.disposables.add(K(this.domNode,"dragover",s=>this.onDragOver(this.toDragEvent(s)))),this.disposables.add(K(this.domNode,"drop",s=>this.onDrop(this.toDragEvent(s)))),this.disposables.add(K(this.domNode,"dragleave",s=>this.onDragLeave(this.toDragEvent(s)))),this.disposables.add(K(this.domNode,"dragend",s=>this.onDragEnd(s))),this.setRowLineHeight=i.setRowLineHeight??ea.setRowLineHeight,this.setRowHeight=i.setRowHeight??ea.setRowHeight,this.supportDynamicHeights=i.supportDynamicHeights??ea.supportDynamicHeights,this.dnd=i.dnd??this.disposables.add(ea.dnd),this.layout(i.initialSize?.height,i.initialSize?.width)}static InstanceCount=0;domId=`list_id_${++jr.InstanceCount}`;domNode;items;itemId;rangeMap;cache;renderers=new Map;lastRenderTop;lastRenderHeight;renderWidth=0;rowsContainer;scrollable;scrollableElement;_scrollHeight=0;scrollableElementUpdateDisposable=null;scrollableElementWidthDelayer=new so(50);splicing=!1;dragOverAnimationDisposable;dragOverAnimationStopDisposable=P.None;dragOverMouseY=0;setRowLineHeight;setRowHeight;supportDynamicHeights;paddingBottom;accessibilityProvider;scrollWidth;dnd;canDrop=!1;currentDragData;currentDragFeedback;currentDragFeedbackPosition;currentDragFeedbackDisposable=P.None;onDragLeaveTimeout=P.None;disposables=new Q;_onDidChangeContentHeight=new x;_onDidChangeContentWidth=new x;onDidChangeContentHeight=N.latch(this._onDidChangeContentHeight.event,void 0,this.disposables);onDidChangeContentWidth=N.latch(this._onDidChangeContentWidth.event,void 0,this.disposables);get contentHeight(){return this.rangeMap.size}get contentWidth(){return this.scrollWidth??0}get onDidScroll(){return this.scrollableElement.onScroll}get onWillScroll(){return this.scrollableElement.onWillScroll}get containerDomNode(){return this.rowsContainer}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}_horizontalScrolling=!1;get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(let t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:Rp(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t={...t??{},scrollByPage:e.scrollByPage}),e.mouseWheelScrollSensitivity!==void 0&&(t={...t??{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&(t={...t??{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){let n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),i=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(n,Math.max(0,this.lastRenderTop+i),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}delegateScrollFromMouseWheelEvent(e){this.scrollableElement.delegateScrollFromMouseWheelEvent(e)}delegateVerticalScrollbarPointerDown(e){this.scrollableElement.delegateVerticalScrollbarPointerDown(e)}updateElementHeight(e,t,n){if(e<0||e>=this.items.length)return;let i=this.items[e].size;if(typeof t>"u"){if(!this.supportDynamicHeights){console.warn("Dynamic heights not supported",new Error().stack);return}this.items[e].lastDynamicHeightWidth=void 0,t=i+this.probeDynamicHeight(e)}if(i===t)return;let o=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s=0;e<o.start||n!==null&&n>e&&n<o.end?s=t-i:s=0,this.rangeMap.splice(e,1,[{size:t}]),this.items[e].size=t,this.render(o,Math.max(0,this.lastRenderTop+s),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}createRangeMap(e){return new jI(e)}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){let i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),o={start:e,end:e+t},s=qi.intersect(i,o),a=new Map;for(let O=s.end-1;O>=s.start;O--){let G=this.items[O];if(G.dragStartDisposable.dispose(),G.checkedDisposable.dispose(),G.row){let Z=a.get(G.templateId);Z||(Z=[],a.set(G.templateId,Z));let M=this.renderers.get(G.templateId);M&&M.disposeElement&&M.disposeElement(G.element,O,G.row.templateData,G.size),Z.unshift(G.row)}G.row=null,G.stale=!0}let l={start:e+t,end:this.items.length},d=qi.intersect(l,i),u=qi.relativeComplement(l,i),p=n.map(O=>({id:String(this.itemId++),element:O,templateId:this.virtualDelegate.getTemplateId(O),size:this.virtualDelegate.getHeight(O),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(O),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:P.None,checkedDisposable:P.None,stale:!1})),h;e===0&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,p),h=this.items,this.items=p):(this.rangeMap.splice(e,t,p),h=this.items.splice(e,t,...p));let m=n.length-t,f=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),g=YI(d,m),y=qi.intersect(f,g);for(let O=y.start;O<y.end;O++)this.updateItemInDOM(this.items[O],O);let T=qi.relativeComplement(g,f);for(let O of T)for(let G=O.start;G<O.end;G++)this.removeItemFromDOM(G);let E=u.map(O=>YI(O,m)),_=[{start:e,end:e+n.length},...E].map(O=>qi.intersect(f,O)).reverse();for(let O of _)for(let G=O.end-1;G>=O.start;G--){let Z=this.items[G],H=a.get(Z.templateId)?.pop();this.insertItemInDOM(G,H)}for(let O of a.values())for(let G of O)this.cache.release(G);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),h.map(O=>O.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=rr(Le(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(let t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}updateWidth(e){if(!this.horizontalScrolling||typeof this.scrollWidth>"u")return;let t=this.items[e];this.measureItemWidth(t),typeof t.width<"u"&&t.width>this.scrollWidth&&(this.scrollWidth=t.width,this.scrollableElement.setScrollDimensions({scrollWidth:this.scrollWidth+10}),this._onDidChangeContentWidth.fire(this.scrollWidth))}rerender(){if(this.supportDynamicHeights){for(let e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}get firstMostlyVisibleIndex(){let e=this.firstVisibleIndex,t=this.rangeMap.positionAt(e),n=this.rangeMap.positionAt(e+1);return n!==-1&&(n-t)/2+t<this.scrollTop?e+1:e}get lastVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).end-1}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex(t=>t.element===e)}domElement(e){let t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let n={height:typeof e=="number"?e:RI(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:Rp(this.domNode)})}render(e,t,n,i,o,s=!1){let a=this.getRenderRange(t,n),l=qi.relativeComplement(a,e).reverse(),d=qi.relativeComplement(e,a);if(s){let u=qi.intersect(e,a);for(let p=u.start;p<u.end;p++)this.updateItemInDOM(this.items[p],p)}this.cache.transact(()=>{for(let u of d)for(let p=u.start;p<u.end;p++)this.removeItemFromDOM(p);for(let u of l)for(let p=u.end-1;p>=u.start;p--)this.insertItemInDOM(p)}),i!==void 0&&(this.rowsContainer.style.left=`-${i}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&o!==void 0&&(this.rowsContainer.style.width=`${Math.max(o,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t){let n=this.items[e];if(!n.row)if(t)n.row=t,n.stale=!0;else{let l=this.cache.alloc(n.templateId);n.row=l.row,n.stale||=l.isReusingConnectedDomNode}let i=this.accessibilityProvider.getRole(n.element)||"listitem";n.row.domNode.setAttribute("role",i);let o=this.accessibilityProvider.isChecked(n.element);if(typeof o=="boolean")n.row.domNode.setAttribute("aria-checked",String(!!o));else if(o){let l=d=>n.row.domNode.setAttribute("aria-checked",String(!!d));l(o.value),n.checkedDisposable=o.onDidChange(()=>l(o.value))}if(n.stale||!n.row.domNode.parentElement){let l=this.items.at(e+1)?.row?.domNode??null;(n.row.domNode.parentElement!==this.rowsContainer||n.row.domNode.nextElementSibling!==l)&&this.rowsContainer.insertBefore(n.row.domNode,l),n.stale=!1}this.updateItemInDOM(n,e);let s=this.renderers.get(n.templateId);if(!s)throw new Error(`No renderer found for template id ${n.templateId}`);s?.renderElement(n.element,e,n.row.templateData,n.size);let a=this.dnd.getDragURI(n.element);n.dragStartDisposable.dispose(),n.row.domNode.draggable=!!a,a&&(n.dragStartDisposable=K(n.row.domNode,"dragstart",l=>this.onDragStart(n.element,a,l))),this.horizontalScrolling&&(this.measureItemWidth(n),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=Rp(e.row.domNode);let t=Le(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){let t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){let n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}getScrollLeft(){return this.scrollableElement.getScrollPosition().scrollLeft}setScrollLeft(e){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollWidth:this.scrollWidth})),this.scrollableElement.setScrollPosition({scrollLeft:e})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return N.map(this.disposables.add(new Ue(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return N.map(this.disposables.add(new Ue(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return N.filter(N.map(this.disposables.add(new Ue(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseUp(){return N.map(this.disposables.add(new Ue(this.domNode,"mouseup")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDown(){return N.map(this.disposables.add(new Ue(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return N.map(this.disposables.add(new Ue(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMove(){return N.map(this.disposables.add(new Ue(this.domNode,"mousemove")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return N.map(this.disposables.add(new Ue(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return N.any(N.map(this.disposables.add(new Ue(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),N.map(this.disposables.add(new Ue(this.domNode,wt.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return N.map(this.disposables.add(new Ue(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return N.map(this.disposables.add(new Ue(this.rowsContainer,wt.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toTouchEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toGestureEvent(e){let t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toDragEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element,o=this.getTargetSector(e,t);return{browserEvent:e,index:t,element:i,sector:o}}onScroll(e){try{let t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){if(!n.dataTransfer)return;let i=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(qr.TEXT,t),n.dataTransfer.setDragImage){let o;this.dnd.getDragLabel&&(o=this.dnd.getDragLabel(i,n)),typeof o>"u"&&(o=String(i.length));let s=ue(".monaco-drag-image");s.textContent=o,(d=>{for(;d&&!d.classList.contains("monaco-workbench");)d=d.parentElement;return d||this.domNode.ownerDocument})(this.domNode).appendChild(s),n.dataTransfer.setDragImage(s,-10,-10),setTimeout(()=>s.remove(),0)}this.domNode.classList.add("dragging"),this.currentDragData=new $a(i),yc.CurrentDragAndDropData=new __(i),this.dnd.onDragStart?.(this.currentDragData,n)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),yc.CurrentDragAndDropData&&yc.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(yc.CurrentDragAndDropData)this.currentDragData=yc.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new R_}let t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&t.effect?.type===0?"copy":"move";let n;typeof t!="boolean"&&t.feedback?n=t.feedback:typeof e.index>"u"?n=[-1]:n=[e.index],n=di(n).filter(o=>o>=-1&&o<this.length).sort((o,s)=>o-s),n=n[0]===-1?[-1]:n;let i=typeof t!="boolean"&&t.effect&&t.effect.position?t.effect.position:"drop-target";if(P9(this.currentDragFeedback,n)&&this.currentDragFeedbackPosition===i)return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackPosition=i,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add(i),this.rowsContainer.classList.add(i),this.currentDragFeedbackDisposable=ie(()=>{this.domNode.classList.remove(i),this.rowsContainer.classList.remove(i)});else{if(n.length>1&&i!=="drop-target")throw new Error("Can't use multiple feedbacks with position different than 'over'");i==="drop-target-after"&&n[0]<this.length-1&&(n[0]+=1,i="drop-target-before");for(let o of n){let s=this.items[o];s.dropTarget=!0,s.row?.domNode.classList.add(i)}this.currentDragFeedbackDisposable=ie(()=>{for(let o of n){let s=this.items[o];s.dropTarget=!1,s.row?.domNode.classList.remove(i)}})}return!0}onDragLeave(e){this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=Dm(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&this.dnd.onDragLeave?.(this.currentDragData,e.element,e.index,e.browserEvent)}onDrop(e){if(!this.canDrop)return;let t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,yc.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,yc.CurrentDragAndDropData=void 0,this.dnd.onDragEnd?.(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=P.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){let t=Ug(this.domNode).top;this.dragOverAnimationDisposable=dB(Le(this.domNode),this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=Dm(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;let t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(t===void 0)return;let n=e.offsetY/this.items[t].size,i=Math.floor(n/.25);return bi(i,0,3)}getItemIndexFromEventTarget(e){let t=this.scrollableElement.getDomNode(),n=e;for(;(An(n)||oB(n))&&n!==this.rowsContainer&&t.contains(n);){let i=n.getAttribute("data-index");if(i){let o=Number(i);if(!isNaN(o))return o}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){let i=this.getRenderRange(e,t),o,s;e===this.elementTop(i.start)?(o=i.start,s=0):i.end-i.start>1&&(o=i.start+1,s=this.elementTop(o)-e);let a=0;for(;;){let l=this.getRenderRange(e,t),d=!1;for(let u=l.start;u<l.end;u++){let p=this.probeDynamicHeight(u);p!==0&&this.rangeMap.splice(u,1,[this.items[u]]),a+=p,d=d||p!==0}if(!d){a!==0&&this.eventuallyUpdateScrollDimensions();let u=qi.relativeComplement(i,l);for(let h of u)for(let m=h.start;m<h.end;m++)this.items[m].row&&this.removeItemFromDOM(m);let p=qi.relativeComplement(l,i).reverse();for(let h of p)for(let m=h.end-1;m>=h.start;m--)this.insertItemInDOM(m);for(let h=l.start;h<l.end;h++)this.items[h].row&&this.updateItemInDOM(this.items[h],h);if(typeof o=="number"){let h=this.scrollable.getFutureScrollPosition().scrollTop-e,m=this.elementTop(o)-s+h;this.setScrollTop(m,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){let t=this.items[e];if(this.virtualDelegate.getDynamicHeight){let s=this.virtualDelegate.getDynamicHeight(t.element);if(s!==null){let a=t.size;return t.size=s,t.lastDynamicHeightWidth=this.renderWidth,s-a}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;let n=t.size;if(t.row)return t.row.domNode.style.height="",t.size=t.row.domNode.offsetHeight,t.size===0&&!_r(t.row.domNode,Le(t.row.domNode).document.body)&&console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!",new Error().stack),t.lastDynamicHeightWidth=this.renderWidth,t.size-n;let{row:i}=this.cache.alloc(t.templateId);i.domNode.style.height="",this.rowsContainer.appendChild(i.domNode);let o=this.renderers.get(t.templateId);if(!o)throw new gt("Missing renderer for templateId: "+t.templateId);return o.renderElement(t.element,e,i.templateData,void 0),t.size=i.domNode.offsetHeight,o.disposeElement?.(t.element,e,i.templateData,void 0),this.virtualDelegate.setDynamicHeight?.(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,i.domNode.remove(),this.cache.release(i),t.size-n}getElementDomId(e){return`${this.domId}_${e}`}dispose(){for(let e of this.items)if(e.dragStartDisposable.dispose(),e.checkedDisposable.dispose(),e.row){let t=this.renderers.get(e.row.templateId);t&&(t.disposeElement?.(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[],this.domNode?.remove(),this.dragOverAnimationDisposable?.dispose(),this.disposables.dispose()}};C([J],jr.prototype,"onMouseClick",1),C([J],jr.prototype,"onMouseDblClick",1),C([J],jr.prototype,"onMouseMiddleClick",1),C([J],jr.prototype,"onMouseUp",1),C([J],jr.prototype,"onMouseDown",1),C([J],jr.prototype,"onMouseOver",1),C([J],jr.prototype,"onMouseMove",1),C([J],jr.prototype,"onMouseOut",1),C([J],jr.prototype,"onContextMenu",1),C([J],jr.prototype,"onTouchStart",1),C([J],jr.prototype,"onTap",1);var QI=jr;var ta=class extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}};var P_=class{constructor(e){this.trait=e}renderedElements=[];get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,n){let i=this.renderedElements.findIndex(o=>o.templateData===n);if(i>=0){let o=this.renderedElements[i];this.trait.unrender(n),o.index=t}else{let o={index:t,templateData:n};this.renderedElements.push(o)}this.trait.renderIndex(t,n)}splice(e,t,n){let i=[];for(let o of this.renderedElements)o.index<e?i.push(o):o.index>=e+t&&i.push({index:o.index+n-t,templateData:o.templateData});this.renderedElements=i}renderIndexes(e){for(let{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){let t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}},Fp=class{constructor(e){this._trait=e}indexes=[];sortedIndexes=[];_onChange=new x;onChange=this._onChange.event;get name(){return this._trait}get renderer(){return new P_(this)}splice(e,t,n){let i=n.length-t,o=e+t,s=[],a=0;for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]<e;)s.push(this.sortedIndexes[a++]);for(let l=0;l<n.length;l++)n[l]&&s.push(l+e);for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]>=o;)s.push(this.sortedIndexes[a++]+i);this.renderer.splice(e,t,n.length),this._set(s,s)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(TB),t)}_set(e,t,n){let i=this.indexes,o=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;let s=N_(o,e);return this.renderer.renderIndexes(s),this._onChange.fire({indexes:e,browserEvent:n}),i}get(){return this.indexes}contains(e){return aP(this.sortedIndexes,e,TB)>=0}dispose(){vt(this._onChange)}};C([J],Fp.prototype,"renderer",1);var A_=class extends Fp{constructor(t){super("selected");this.setAriaSelected=t}renderIndex(t,n){super.renderIndex(t,n),this.setAriaSelected&&(this.contains(t)?n.setAttribute("aria-selected","true"):n.setAttribute("aria-selected","false"))}},Hg=class{constructor(e,t,n){this.trait=e;this.view=t;this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,new Array(n.length).fill(!1));let i=this.trait.get().map(a=>this.identityProvider.getId(this.view.element(a)).toString());if(i.length===0)return this.trait.splice(e,t,new Array(n.length).fill(!1));let o=new Set(i),s=n.map(a=>o.has(this.identityProvider.getId(a).toString()));this.trait.splice(e,t,s)}};function Gg(r,e){return r.classList.contains(e)?!0:r.classList.contains("monaco-list")||!r.parentElement?!1:Gg(r.parentElement,e)}function Np(r){return Gg(r,"monaco-editor")}function EB(r){return Gg(r,"monaco-custom-toggle")}function wB(r){return Gg(r,"action-item")}function Bp(r){return Gg(r,"monaco-tree-sticky-row")}function Up(r){return r.classList.contains("monaco-tree-sticky-container")}function V_(r){return r.tagName==="A"&&r.classList.contains("monaco-button")||r.tagName==="DIV"&&r.classList.contains("monaco-button-dropdown")?!0:r.classList.contains("monaco-list")||!r.parentElement?!1:V_(r.parentElement)}var JI=class{constructor(e,t,n){this.list=e;this.view=t;this.multipleSelectionSupport=n.multipleSelectionSupport,this.disposables.add(this.onKeyDown(i=>{switch(i.keyCode){case 3:return this.onEnter(i);case 16:return this.onUpArrow(i);case 18:return this.onDownArrow(i);case 11:return this.onPageUpArrow(i);case 12:return this.onPageDownArrow(i);case 9:return this.onEscape(i);case 31:this.multipleSelectionSupport&&(ze?i.metaKey:i.ctrlKey)&&this.onCtrlA(i)}}))}disposables=new Q;multipleSelectionDisposables=new Q;multipleSelectionSupport;get onKeyDown(){return N.chain(this.disposables.add(new Ue(this.view.domNode,"keydown")).event,e=>e.filter(t=>!Zs(t.target)).map(t=>new ht(t)))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection($n(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}};C([J],JI.prototype,"onKeyDown",1);var M9=new class{mightProducePrintableCharacter(r){return r.ctrlKey||r.metaKey||r.altKey?!1:r.keyCode>=31&&r.keyCode<=56||r.keyCode>=21&&r.keyCode<=30||r.keyCode>=98&&r.keyCode<=107||r.keyCode>=85&&r.keyCode<=95}},O_=class{constructor(e,t,n,i,o){this.list=e;this.view=t;this.keyboardNavigationLabelProvider=n;this.keyboardNavigationEventFilter=i;this.delegate=o;this.updateOptions(e.options)}enabled=!1;state=0;mode=0;triggered=!1;previouslyFocused=-1;enabledDisposables=new Q;disposables=new Q;updateOptions(e){e.typeNavigationEnabled??!0?this.enable():this.disable(),this.mode=e.typeNavigationMode??0}trigger(){this.triggered=!this.triggered}enable(){if(this.enabled)return;let e=!1,t=N.chain(this.enabledDisposables.add(new Ue(this.view.domNode,"keydown")).event,o=>o.filter(s=>!Zs(s.target)).filter(()=>this.mode===0||this.triggered).map(s=>new ht(s)).filter(s=>e||this.keyboardNavigationEventFilter(s)).filter(s=>this.delegate.mightProducePrintableCharacter(s)).forEach(s=>We.stop(s,!0)).map(s=>s.browserEvent.key)),n=N.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);N.reduce(N.any(t,n),(o,s)=>s===null?null:(o||"")+s,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),n(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),n(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){let e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){let t=this.list.options.accessibilityProvider?.getAriaLabel(this.list.element(e[0]));typeof t=="string"?nd(t):t&&nd(t.get())}this.previouslyFocused=-1}onInput(e){if(!e){this.state=0,this.triggered=!1;return}let t=this.list.getFocus(),n=t.length>0?t[0]:0,i=this.state===0?1:0;this.state=1;for(let o=0;o<this.list.length;o++){let s=(n+o+i)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(s)),l=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(typeof l<"u"){if(Cu(e,l)){this.previouslyFocused=n,this.list.setFocus([s]),this.list.reveal(s);return}let d=RA(e,l);if(d&&d[0].end-d[0].start>1&&d.length===1){this.previouslyFocused=n,this.list.setFocus([s]),this.list.reveal(s);return}}}else if(typeof l>"u"||Cu(e,l)){this.previouslyFocused=n,this.list.setFocus([s]),this.list.reveal(s);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}},M_=class{constructor(e,t){this.list=e;this.view=t;let n=N.chain(this.disposables.add(new Ue(t.domNode,"keydown")).event,o=>o.filter(s=>!Zs(s.target)).map(s=>new ht(s)));N.chain(n,o=>o.filter(s=>s.keyCode===2&&!s.ctrlKey&&!s.metaKey&&!s.shiftKey&&!s.altKey))(this.onTab,this,this.disposables)}disposables=new Q;onTab(e){if(e.target!==this.view.domNode)return;let t=this.list.getFocus();if(t.length===0)return;let n=this.view.domElement(t[0]);if(!n)return;let i=n.querySelector("[tabIndex]");if(!i||!An(i)||i.tabIndex===-1)return;let o=Le(i).getComputedStyle(i);o.visibility==="hidden"||o.display==="none"||(e.preventDefault(),e.stopPropagation(),i.focus())}dispose(){this.disposables.dispose()}};function W_(r){return ze?r.browserEvent.metaKey:r.browserEvent.ctrlKey}function z_(r){return r.browserEvent.shiftKey}function N9(r){return NI(r)&&r.button===2}var xB={isSelectionSingleChangeEvent:W_,isSelectionRangeChangeEvent:z_},Kg=class{constructor(e){this.list=e;e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||xB),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Zt.addTarget(e.getHTMLElement()))),N.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}multipleSelectionController;mouseSupport;disposables=new Q;_onPointer=new x;onPointer=this._onPointer.event;updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||xB))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){Np(e.browserEvent.target)||cs()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(Zs(e.browserEvent.target)||Np(e.browserEvent.target))return;let t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||Zs(e.browserEvent.target)||Np(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;let t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),N9(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(Zs(e.browserEvent.target)||Np(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;let t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){let t=e.index,n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){typeof n>"u"&&(n=this.list.getFocus()[0]??t,this.list.setAnchor(n));let i=Math.min(n,t),o=Math.max(n,t),s=$n(i,o+1),a=this.list.getSelection(),l=B9(N_(a,[n]),n);if(l.length===0)return;let d=N_(s,U9(a,l));this.list.setSelection(d,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){let i=this.list.getSelection(),o=i.filter(s=>s!==t);this.list.setFocus([t]),this.list.setAnchor(t),i.length===o.length?this.list.setSelection([...o,t],e.browserEvent):this.list.setSelection(o,e.browserEvent)}}dispose(){this.disposables.dispose()}},ZI=class{constructor(e,t){this.styleElement=e;this.selectorSuffix=t}style(e){let t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);let i=Rr(e.listFocusAndSelectionOutline,Rr(e.listSelectionOutline,e.listFocusOutline??""));i&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused.selected { outline: 1px solid ${i}; outline-offset: -1px;}`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);let o=Rr(e.listSelectionOutline,e.listInactiveFocusOutline??"");o&&n.push(`.monaco-list${t} .monaco-list-row.focused.selected { outline: 1px dotted ${o}; outline-offset: -1px; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }
			`),e.listDropBetweenBackground&&(n.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${t} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`),n.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${t} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`)),e.tableColumnsBorder&&n.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&n.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=n.join(`
`)}},eS={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:B.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:B.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:B.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},F9={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function B9(r,e){let t=r.indexOf(e);if(t===-1)return[];let n=[],i=t-1;for(;i>=0&&r[i]===e-(t-i);)n.push(r[i--]);for(n.reverse(),i=t;i<r.length&&r[i]===e+(i-t);)n.push(r[i++]);return n}function N_(r,e){let t=[],n=0,i=0;for(;n<r.length||i<e.length;)if(n>=r.length)t.push(e[i++]);else if(i>=e.length)t.push(r[n++]);else if(r[n]===e[i]){t.push(r[n]),n++,i++;continue}else r[n]<e[i]?t.push(r[n++]):t.push(e[i++]);return t}function U9(r,e){let t=[],n=0,i=0;for(;n<r.length||i<e.length;)if(n>=r.length)t.push(e[i++]);else if(i>=e.length)t.push(r[n++]);else if(r[n]===e[i]){n++,i++;continue}else r[n]<e[i]?t.push(r[n++]):i++;return t}var TB=(r,e)=>r-e,F_=class{constructor(e,t){this._templateId=e;this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,i){let o=0;for(let s of this.renderers)s.renderElement(e,t,n[o++],i)}disposeElement(e,t,n,i){let o=0;for(let s of this.renderers)s.disposeElement?.(e,t,n[o],i),o+=1}disposeTemplate(e){let t=0;for(let n of this.renderers)n.disposeTemplate(e[t++])}},B_=class{constructor(e){this.accessibilityProvider=e}templateId="a18n";renderTemplate(e){return{container:e,disposables:new Q}}renderElement(e,t,n){let i=this.accessibilityProvider.getAriaLabel(e),o=i&&typeof i!="string"?i:Mh(i);n.disposables.add(yo(a=>{this.setAriaLabel(a.readObservable(o),n.container)}));let s=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof s=="number"?n.container.setAttribute("aria-level",`${s}`):n.container.removeAttribute("aria-level")}setAriaLabel(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}disposeElement(e,t,n,i){n.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}},U_=class{constructor(e,t){this.list=e;this.dnd=t}getDragElements(e){let t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart?.(e,t)}onDragOver(e,t,n,i,o){return this.dnd.onDragOver(e,t,n,i,o)}onDragLeave(e,t,n,i){this.dnd.onDragLeave?.(e,t,n,i)}onDragEnd(e){this.dnd.onDragEnd?.(e)}drop(e,t,n,i,o){this.dnd.drop(e,t,n,i,o)}dispose(){this.dnd.dispose()}},ai=class{constructor(e,t,n,i,o=F9){this.user=e;this._options=o;let s=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?this._options.accessibilityProvider?.getWidgetRole():"list";this.selection=new A_(s!=="listbox");let a=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=o.accessibilityProvider,this.accessibilityProvider&&(a.push(new B_(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant?.(this.onDidChangeActiveDescendant,this,this.disposables)),i=i.map(d=>new F_(d.templateId,[...a,d]));let l={...o,dnd:o.dnd&&new U_(this,o.dnd)};if(this.view=this.createListView(t,n,i,l),this.view.domNode.setAttribute("role",s),o.styleController)this.styleController=o.styleController(this.view.domId);else{let d=sr(this.view.domNode);this.styleController=new ZI(d,this.view.domId)}if(this.spliceable=new $I([new Hg(this.focus,this.view,o.identityProvider),new Hg(this.selection,this.view,o.identityProvider),new Hg(this.anchor,this.view,o.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new M_(this,this.view)),(typeof o.keyboardSupport!="boolean"||o.keyboardSupport)&&(this.keyboardController=new JI(this,this.view,o),this.disposables.add(this.keyboardController)),o.keyboardNavigationLabelProvider){let d=o.keyboardNavigationDelegate||M9;this.typeNavigationController=new O_(this,this.view,o.keyboardNavigationLabelProvider,o.keyboardNavigationEventFilter??(()=>!0),d),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(o),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}focus=new Fp("focused");selection;anchor=new Fp("anchor");eventBufferer=new cl;view;spliceable;styleController;typeNavigationController;accessibilityProvider;keyboardController;mouseController;_ariaLabel="";disposables=new Q;get onDidChangeFocus(){return N.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return N.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseUp(){return this.view.onMouseUp}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseMove(){return this.view.onMouseMove}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1,t=N.chain(this.disposables.add(new Ue(this.view.domNode,"keydown")).event,o=>o.map(s=>new ht(s)).filter(s=>e=s.keyCode===58||s.shiftKey&&s.keyCode===68).map(s=>We.stop(s,!0)).filter(()=>!1)),n=N.chain(this.disposables.add(new Ue(this.view.domNode,"keyup")).event,o=>o.forEach(()=>e=!1).map(s=>new ht(s)).filter(s=>s.keyCode===58||s.shiftKey&&s.keyCode===68).map(s=>We.stop(s,!0)).map(({browserEvent:s})=>{let a=this.getFocus(),l=a.length?a[0]:void 0,d=typeof l<"u"?this.view.element(l):void 0,u=typeof l<"u"?this.view.domElement(l):this.view.domNode;return{index:l,element:d,anchor:u,browserEvent:s}})),i=N.chain(this.view.onContextMenu,o=>o.filter(s=>!e).map(({element:s,index:a,browserEvent:l})=>({element:s,index:a,anchor:new zn(Le(this.view.domNode),l),browserEvent:l})));return N.any(t,n,i)}get onKeyDown(){return this.disposables.add(new Ue(this.view.domNode,"keydown")).event}get onKeyUp(){return this.disposables.add(new Ue(this.view.domNode,"keyup")).event}get onKeyPress(){return this.disposables.add(new Ue(this.view.domNode,"keypress")).event}get onDidFocus(){return N.signal(this.disposables.add(new Ue(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return N.signal(this.disposables.add(new Ue(this.view.domNode,"blur",!0)).event)}_onDidDispose=new x;onDidDispose=this._onDidDispose.event;createListView(e,t,n,i){return new QI(e,t,n,i)}createMouseController(e){return new Kg(this)}updateOptions(e={}){this._options={...this._options,...e},this.typeNavigationController?.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),this.keyboardController?.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new ta(this.user,`Invalid start index: ${e}`);if(t<0)throw new ta(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}updateWidth(e){this.view.updateWidth(e)}updateElementHeight(e,t){this.view.updateElementHeight(e,t,null)}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get contentWidth(){return this.view.contentWidth}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.view.onDidChangeContentWidth}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollLeft(){return this.view.getScrollLeft()}set scrollLeft(e){this.view.setScrollLeft(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get firstMostlyVisibleIndex(){return this.view.firstMostlyVisibleIndex}get lastVisibleIndex(){return this.view.lastVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}triggerTypeNavigation(){this.typeNavigationController?.trigger()}setSelection(e,t){for(let n of e)if(n<0||n>=this.length)throw new ta(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new ta(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return this.anchor.get().at(0)}getAnchorElement(){let e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(let n of e)if(n<0||n>=this.length)throw new ta(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,i){if(this.length===0)return;let o=this.focus.get(),s=this.findNextIndex(o.length>0?o[0]+e:0,t,i);s>-1&&this.setFocus([s],n)}focusPrevious(e=1,t=!1,n,i){if(this.length===0)return;let o=this.focus.get(),s=this.findPreviousIndex(o.length>0?o[0]-e:0,t,i);s>-1&&this.setFocus([s],n)}async focusNextPage(e,t){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;let i=this.getFocus()[0];if(i!==n&&(i===void 0||n>i)){let o=this.findPreviousIndex(n,!1,t);o>-1&&i!==o?this.setFocus([o],e):this.setFocus([n],e)}else{let o=this.view.getScrollTop(),s=o+this.view.renderHeight;n>i&&(s-=this.view.elementHeight(n)),this.view.setScrollTop(s),this.view.getScrollTop()!==o&&(this.setFocus([]),await Cn(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t,n=()=>0){let i,o=n(),s=this.view.getScrollTop()+o;s===0?i=this.view.indexAt(s):i=this.view.indexAfter(s-1);let a=this.getFocus()[0];if(a!==i&&(a===void 0||a>=i)){let l=this.findNextIndex(i,!1,t);l>-1&&a!==l?this.setFocus([l],e):this.setFocus([i],e)}else{let l=s;this.view.setScrollTop(s-this.view.renderHeight-o),this.view.getScrollTop()+n()!==l&&(this.setFocus([]),await Cn(0),await this.focusPreviousPage(e,t,n))}}focusLast(e,t){if(this.length===0)return;let n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;let i=this.findNextIndex(e,!1,n);i>-1&&this.setFocus([i],t)}findNextIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t,n=0){if(e<0||e>=this.length)throw new ta(this.user,`Invalid index ${e}`);let i=this.view.getScrollTop(),o=this.view.elementTop(e),s=this.view.elementHeight(e);if(fr(t)){let a=s-this.view.renderHeight+n;this.view.setScrollTop(a*bi(t,0,1)+o-n)}else{let a=o+s,l=i+this.view.renderHeight;o<i+n&&a>=l||(o<i+n||a>=l&&s>=this.view.renderHeight?this.view.setScrollTop(o-n):a>=l&&this.view.setScrollTop(a-this.view.renderHeight))}}getRelativeTop(e,t=0){if(e<0||e>=this.length)throw new ta(this.user,`Invalid index ${e}`);let n=this.view.getScrollTop(),i=this.view.elementTop(e),o=this.view.elementHeight(e);if(i<n+t||i+o>n+this.view.renderHeight)return null;let s=o-this.view.renderHeight+t;return Math.abs((n+t-i)/s)}isDOMFocused(){return or(this.view.domNode)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){let e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){let e=this.focus.get();if(e.length>0){let t;this.accessibilityProvider?.getActiveDescendantId&&(t=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute("aria-activedescendant",t||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){let e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}};C([J],ai.prototype,"onDidChangeFocus",1),C([J],ai.prototype,"onDidChangeSelection",1),C([J],ai.prototype,"onContextMenu",1),C([J],ai.prototype,"onKeyDown",1),C([J],ai.prototype,"onKeyUp",1),C([J],ai.prototype,"onKeyPress",1),C([J],ai.prototype,"onDidFocus",1),C([J],ai.prototype,"onDidBlur",1);var V9=new RegExp(`(\\\\)?\\$\\((${qe.iconNameExpression}(?:${qe.iconModifierExpression})?)\\)`,"g");function Yr(r){let e=new Array,t,n=0,i=0;for(;(t=V9.exec(r))!==null;){i=t.index||0,n<i&&e.push(r.substring(n,i)),n=(t.index||0)+t[0].length;let[,o,s]=t;e.push(o?`$(${s})`:tS({id:s}))}return n<r.length&&e.push(r.substring(n)),e}function tS(r){let e=ue("span");return e.classList.add(...qe.asClassNameArray(r)),e}var H_=class{_prefix;_lastId;constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}},K_=new H_("id#");var vi={};(function(){function r(e,t){t(vi)}r.amd=!0,function(e,t){typeof r=="function"&&r.amd?r(["exports"],t):typeof exports=="object"&&typeof module<"u"?t(exports):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){"use strict";function t(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}e.defaults=t();function n(de){e.defaults=de}let i=/[&<>"']/,o=new RegExp(i.source,"g"),s=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,a=new RegExp(s.source,"g"),l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},d=de=>l[de];function u(de,S){if(S){if(i.test(de))return de.replace(o,d)}else if(s.test(de))return de.replace(a,d);return de}let p=/(^|[^\[])\^/g;function h(de,S){let w=typeof de=="string"?de:de.source;S=S||"";let k={replace:(R,F)=>{let Y=typeof F=="string"?F:F.source;return Y=Y.replace(p,"$1"),w=w.replace(R,Y),k},getRegex:()=>new RegExp(w,S)};return k}function m(de){try{de=encodeURI(de).replace(/%25/g,"%")}catch{return null}return de}let f={exec:()=>null};function g(de,S){let w=de.replace(/\|/g,(F,Y,te)=>{let Se=!1,we=Y;for(;--we>=0&&te[we]==="\\";)Se=!Se;return Se?"|":" |"}),k=w.split(/ \|/),R=0;if(k[0].trim()||k.shift(),k.length>0&&!k[k.length-1].trim()&&k.pop(),S)if(k.length>S)k.splice(S);else for(;k.length<S;)k.push("");for(;R<k.length;R++)k[R]=k[R].trim().replace(/\\\|/g,"|");return k}function y(de,S,w){let k=de.length;if(k===0)return"";let R=0;for(;R<k;){let F=de.charAt(k-R-1);if(F===S&&!w)R++;else if(F!==S&&w)R++;else break}return de.slice(0,k-R)}function T(de,S){if(de.indexOf(S[1])===-1)return-1;let w=0;for(let k=0;k<de.length;k++)if(de[k]==="\\")k++;else if(de[k]===S[0])w++;else if(de[k]===S[1]&&(w--,w<0))return k;return-1}function E(de,S,w,k){let R=S.href,F=S.title?u(S.title):null,Y=de[1].replace(/\\([\[\]])/g,"$1");if(de[0].charAt(0)!=="!"){k.state.inLink=!0;let te={type:"link",raw:w,href:R,title:F,text:Y,tokens:k.inlineTokens(Y)};return k.state.inLink=!1,te}return{type:"image",raw:w,href:R,title:F,text:u(Y)}}function D(de,S){let w=de.match(/^(\s+)(?:```)/);if(w===null)return S;let k=w[1];return S.split(`
`).map(R=>{let F=R.match(/^\s+/);if(F===null)return R;let[Y]=F;return Y.length>=k.length?R.slice(k.length):R}).join(`
`)}class _{options;rules;lexer;constructor(S){this.options=S||e.defaults}space(S){let w=this.rules.block.newline.exec(S);if(w&&w[0].length>0)return{type:"space",raw:w[0]}}code(S){let w=this.rules.block.code.exec(S);if(w){let k=w[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:w[0],codeBlockStyle:"indented",text:this.options.pedantic?k:y(k,`
`)}}}fences(S){let w=this.rules.block.fences.exec(S);if(w){let k=w[0],R=D(k,w[3]||"");return{type:"code",raw:k,lang:w[2]?w[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):w[2],text:R}}}heading(S){let w=this.rules.block.heading.exec(S);if(w){let k=w[2].trim();if(/#$/.test(k)){let R=y(k,"#");(this.options.pedantic||!R||/ $/.test(R))&&(k=R.trim())}return{type:"heading",raw:w[0],depth:w[1].length,text:k,tokens:this.lexer.inline(k)}}}hr(S){let w=this.rules.block.hr.exec(S);if(w)return{type:"hr",raw:y(w[0],`
`)}}blockquote(S){let w=this.rules.block.blockquote.exec(S);if(w){let k=y(w[0],`
`).split(`
`),R="",F="",Y=[];for(;k.length>0;){let te=!1,Se=[],we;for(we=0;we<k.length;we++)if(/^ {0,3}>/.test(k[we]))Se.push(k[we]),te=!0;else if(!te)Se.push(k[we]);else break;k=k.slice(we);let it=Se.join(`
`),Dt=it.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");R=R?`${R}
${it}`:it,F=F?`${F}
${Dt}`:Dt;let Jt=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(Dt,Y,!0),this.lexer.state.top=Jt,k.length===0)break;let Mn=Y[Y.length-1];if(Mn?.type==="code")break;if(Mn?.type==="blockquote"){let an=Mn,Ae=an.raw+`
`+k.join(`
`),U=this.blockquote(Ae);Y[Y.length-1]=U,R=R.substring(0,R.length-an.raw.length)+U.raw,F=F.substring(0,F.length-an.text.length)+U.text;break}else if(Mn?.type==="list"){let an=Mn,Ae=an.raw+`
`+k.join(`
`),U=this.list(Ae);Y[Y.length-1]=U,R=R.substring(0,R.length-Mn.raw.length)+U.raw,F=F.substring(0,F.length-an.raw.length)+U.raw,k=Ae.substring(Y[Y.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:R,tokens:Y,text:F}}}list(S){let w=this.rules.block.list.exec(S);if(w){let k=w[1].trim(),R=k.length>1,F={type:"list",raw:"",ordered:R,start:R?+k.slice(0,-1):"",loose:!1,items:[]};k=R?`\\d{1,9}\\${k.slice(-1)}`:`\\${k}`,this.options.pedantic&&(k=R?k:"[*+-]");let Y=new RegExp(`^( {0,3}${k})((?:[	 ][^\\n]*)?(?:\\n|$))`),te=!1;for(;S;){let Se=!1,we="",it="";if(!(w=Y.exec(S))||this.rules.block.hr.test(S))break;we=w[0],S=S.substring(we.length);let Dt=w[2].split(`
`,1)[0].replace(/^\t+/,he=>" ".repeat(3*he.length)),Jt=S.split(`
`,1)[0],Mn=!Dt.trim(),an=0;if(this.options.pedantic?(an=2,it=Dt.trimStart()):Mn?an=w[1].length+1:(an=w[2].search(/[^ ]/),an=an>4?1:an,it=Dt.slice(an),an+=w[1].length),Mn&&/^ *$/.test(Jt)&&(we+=Jt+`
`,S=S.substring(Jt.length+1),Se=!0),!Se){let he=new RegExp(`^ {0,${Math.min(3,an-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),De=new RegExp(`^ {0,${Math.min(3,an-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),Gt=new RegExp(`^ {0,${Math.min(3,an-1)}}(?:\`\`\`|~~~)`),qn=new RegExp(`^ {0,${Math.min(3,an-1)}}#`);for(;S;){let Yi=S.split(`
`,1)[0];if(Jt=Yi,this.options.pedantic&&(Jt=Jt.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),Gt.test(Jt)||qn.test(Jt)||he.test(Jt)||De.test(S))break;if(Jt.search(/[^ ]/)>=an||!Jt.trim())it+=`
`+Jt.slice(an);else{if(Mn||Dt.search(/[^ ]/)>=4||Gt.test(Dt)||qn.test(Dt)||De.test(Dt))break;it+=`
`+Jt}!Mn&&!Jt.trim()&&(Mn=!0),we+=Yi+`
`,S=S.substring(Yi.length+1),Dt=Jt.slice(an)}}F.loose||(te?F.loose=!0:/\n *\n *$/.test(we)&&(te=!0));let Ae=null,U;this.options.gfm&&(Ae=/^\[[ xX]\] /.exec(it),Ae&&(U=Ae[0]!=="[ ] ",it=it.replace(/^\[[ xX]\] +/,""))),F.items.push({type:"list_item",raw:we,task:!!Ae,checked:U,loose:!1,text:it,tokens:[]}),F.raw+=we}F.items[F.items.length-1].raw=F.items[F.items.length-1].raw.trimEnd(),F.items[F.items.length-1].text=F.items[F.items.length-1].text.trimEnd(),F.raw=F.raw.trimEnd();for(let Se=0;Se<F.items.length;Se++)if(this.lexer.state.top=!1,F.items[Se].tokens=this.lexer.blockTokens(F.items[Se].text,[]),!F.loose){let we=F.items[Se].tokens.filter(Dt=>Dt.type==="space"),it=we.length>0&&we.some(Dt=>/\n.*\n/.test(Dt.raw));F.loose=it}if(F.loose)for(let Se=0;Se<F.items.length;Se++)F.items[Se].loose=!0;return F}}html(S){let w=this.rules.block.html.exec(S);if(w)return{type:"html",block:!0,raw:w[0],pre:w[1]==="pre"||w[1]==="script"||w[1]==="style",text:w[0]}}def(S){let w=this.rules.block.def.exec(S);if(w){let k=w[1].toLowerCase().replace(/\s+/g," "),R=w[2]?w[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",F=w[3]?w[3].substring(1,w[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):w[3];return{type:"def",tag:k,raw:w[0],href:R,title:F}}}table(S){let w=this.rules.block.table.exec(S);if(!w||!/[:|]/.test(w[2]))return;let k=g(w[1]),R=w[2].replace(/^\||\| *$/g,"").split("|"),F=w[3]&&w[3].trim()?w[3].replace(/\n[ \t]*$/,"").split(`
`):[],Y={type:"table",raw:w[0],header:[],align:[],rows:[]};if(k.length===R.length){for(let te of R)/^ *-+: *$/.test(te)?Y.align.push("right"):/^ *:-+: *$/.test(te)?Y.align.push("center"):/^ *:-+ *$/.test(te)?Y.align.push("left"):Y.align.push(null);for(let te=0;te<k.length;te++)Y.header.push({text:k[te],tokens:this.lexer.inline(k[te]),header:!0,align:Y.align[te]});for(let te of F)Y.rows.push(g(te,Y.header.length).map((Se,we)=>({text:Se,tokens:this.lexer.inline(Se),header:!1,align:Y.align[we]})));return Y}}lheading(S){let w=this.rules.block.lheading.exec(S);if(w)return{type:"heading",raw:w[0],depth:w[2].charAt(0)==="="?1:2,text:w[1],tokens:this.lexer.inline(w[1])}}paragraph(S){let w=this.rules.block.paragraph.exec(S);if(w){let k=w[1].charAt(w[1].length-1)===`
`?w[1].slice(0,-1):w[1];return{type:"paragraph",raw:w[0],text:k,tokens:this.lexer.inline(k)}}}text(S){let w=this.rules.block.text.exec(S);if(w)return{type:"text",raw:w[0],text:w[0],tokens:this.lexer.inline(w[0])}}escape(S){let w=this.rules.inline.escape.exec(S);if(w)return{type:"escape",raw:w[0],text:u(w[1])}}tag(S){let w=this.rules.inline.tag.exec(S);if(w)return!this.lexer.state.inLink&&/^<a /i.test(w[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(w[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(w[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(w[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:w[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:w[0]}}link(S){let w=this.rules.inline.link.exec(S);if(w){let k=w[2].trim();if(!this.options.pedantic&&/^</.test(k)){if(!/>$/.test(k))return;let Y=y(k.slice(0,-1),"\\");if((k.length-Y.length)%2===0)return}else{let Y=T(w[2],"()");if(Y>-1){let Se=(w[0].indexOf("!")===0?5:4)+w[1].length+Y;w[2]=w[2].substring(0,Y),w[0]=w[0].substring(0,Se).trim(),w[3]=""}}let R=w[2],F="";if(this.options.pedantic){let Y=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(R);Y&&(R=Y[1],F=Y[3])}else F=w[3]?w[3].slice(1,-1):"";return R=R.trim(),/^</.test(R)&&(this.options.pedantic&&!/>$/.test(k)?R=R.slice(1):R=R.slice(1,-1)),E(w,{href:R&&R.replace(this.rules.inline.anyPunctuation,"$1"),title:F&&F.replace(this.rules.inline.anyPunctuation,"$1")},w[0],this.lexer)}}reflink(S,w){let k;if((k=this.rules.inline.reflink.exec(S))||(k=this.rules.inline.nolink.exec(S))){let R=(k[2]||k[1]).replace(/\s+/g," "),F=w[R.toLowerCase()];if(!F){let Y=k[0].charAt(0);return{type:"text",raw:Y,text:Y}}return E(k,F,k[0],this.lexer)}}emStrong(S,w,k=""){let R=this.rules.inline.emStrongLDelim.exec(S);if(!R||R[3]&&k.match(/[\p{L}\p{N}]/u))return;if(!(R[1]||R[2]||"")||!k||this.rules.inline.punctuation.exec(k)){let Y=[...R[0]].length-1,te,Se,we=Y,it=0,Dt=R[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(Dt.lastIndex=0,w=w.slice(-1*S.length+Y);(R=Dt.exec(w))!=null;){if(te=R[1]||R[2]||R[3]||R[4]||R[5]||R[6],!te)continue;if(Se=[...te].length,R[3]||R[4]){we+=Se;continue}else if((R[5]||R[6])&&Y%3&&!((Y+Se)%3)){it+=Se;continue}if(we-=Se,we>0)continue;Se=Math.min(Se,Se+we+it);let Jt=[...R[0]][0].length,Mn=S.slice(0,Y+R.index+Jt+Se);if(Math.min(Y,Se)%2){let Ae=Mn.slice(1,-1);return{type:"em",raw:Mn,text:Ae,tokens:this.lexer.inlineTokens(Ae)}}let an=Mn.slice(2,-2);return{type:"strong",raw:Mn,text:an,tokens:this.lexer.inlineTokens(an)}}}}codespan(S){let w=this.rules.inline.code.exec(S);if(w){let k=w[2].replace(/\n/g," "),R=/[^ ]/.test(k),F=/^ /.test(k)&&/ $/.test(k);return R&&F&&(k=k.substring(1,k.length-1)),k=u(k,!0),{type:"codespan",raw:w[0],text:k}}}br(S){let w=this.rules.inline.br.exec(S);if(w)return{type:"br",raw:w[0]}}del(S){let w=this.rules.inline.del.exec(S);if(w)return{type:"del",raw:w[0],text:w[2],tokens:this.lexer.inlineTokens(w[2])}}autolink(S){let w=this.rules.inline.autolink.exec(S);if(w){let k,R;return w[2]==="@"?(k=u(w[1]),R="mailto:"+k):(k=u(w[1]),R=k),{type:"link",raw:w[0],text:k,href:R,tokens:[{type:"text",raw:k,text:k}]}}}url(S){let w;if(w=this.rules.inline.url.exec(S)){let k,R;if(w[2]==="@")k=u(w[0]),R="mailto:"+k;else{let F;do F=w[0],w[0]=this.rules.inline._backpedal.exec(w[0])?.[0]??"";while(F!==w[0]);k=u(w[0]),w[1]==="www."?R="http://"+w[0]:R=w[0]}return{type:"link",raw:w[0],text:k,href:R,tokens:[{type:"text",raw:k,text:k}]}}}inlineText(S){let w=this.rules.inline.text.exec(S);if(w){let k;return this.lexer.state.inRawBlock?k=w[0]:k=u(w[0]),{type:"text",raw:w[0],text:k}}}}let O=/^(?: *(?:\n|$))+/,G=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,Z=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,M=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,H=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,oe=/(?:[*+-]|\d{1,9}[.)])/,ee=h(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,oe).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),re=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Fe=/^[^\n]+/,st=/(?!\s*\])(?:\\.|[^\[\]\\])+/,be=h(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",st).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),ae=h(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,oe).getRegex(),fe="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ve=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Te=h("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",ve).replace("tag",fe).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),Qe=h(re).replace("hr",M).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fe).getRegex(),St={blockquote:h(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",Qe).getRegex(),code:G,def:be,fences:Z,heading:H,hr:M,html:Te,lheading:ee,list:ae,newline:O,paragraph:Qe,table:f,text:Fe},nt=h("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",M).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fe).getRegex(),Re={...St,table:nt,paragraph:h(re).replace("hr",M).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",nt).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fe).getRegex()},Gn={...St,html:h(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ve).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:f,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:h(re).replace("hr",M).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ee).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},xn=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Li=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,dr=/^( {2,}|\\)\n(?!\s*$)/,ba=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Pi="\\p{P}\\p{S}",Ai=h(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Pi).getRegex(),Jr=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,kt=h(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Pi).getRegex(),Bo=h("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Pi).getRegex(),Zr=h("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Pi).getRegex(),ji=h(/\\([punct])/,"gu").replace(/punct/g,Pi).getRegex(),va=h(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ya=h(ve).replace("(?:-->|$)","-->").getRegex(),kd=h("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ya).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Uo=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,Vo=h(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Uo).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),eo=h(/^!?\[(label)\]\[(ref)\]/).replace("label",Uo).replace("ref",st).getRegex(),Ar=h(/^!?\[(ref)\](?:\[\])?/).replace("ref",st).getRegex(),Oi=h("reflink|nolink(?!\\()","g").replace("reflink",eo).replace("nolink",Ar).getRegex(),vo={_backpedal:f,anyPunctuation:ji,autolink:va,blockSkip:Jr,br:dr,code:Li,del:f,emStrongLDelim:kt,emStrongRDelimAst:Bo,emStrongRDelimUnd:Zr,escape:xn,link:Vo,nolink:Ar,punctuation:Ai,reflink:eo,reflinkSearch:Oi,tag:kd,text:ba,url:f},on={...vo,link:h(/^!?\[(label)\]\((.*?)\)/).replace("label",Uo).getRegex(),reflink:h(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Uo).getRegex()},Tn={...vo,escape:h(xn).replace("])","~|])").getRegex(),url:h(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},eu={...Tn,br:h(dr).replace("{2,}","*").getRegex(),text:h(Tn.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},Wo={normal:St,gfm:Re,pedantic:Gn},cr={normal:vo,gfm:Tn,breaks:eu,pedantic:on};class mn{tokens;options;state;tokenizer;inlineQueue;constructor(S){this.tokens=[],this.tokens.links=Object.create(null),this.options=S||e.defaults,this.options.tokenizer=this.options.tokenizer||new _,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let w={block:Wo.normal,inline:cr.normal};this.options.pedantic?(w.block=Wo.pedantic,w.inline=cr.pedantic):this.options.gfm&&(w.block=Wo.gfm,this.options.breaks?w.inline=cr.breaks:w.inline=cr.gfm),this.tokenizer.rules=w}static get rules(){return{block:Wo,inline:cr}}static lex(S,w){return new mn(w).lex(S)}static lexInline(S,w){return new mn(w).inlineTokens(S)}lex(S){S=S.replace(/\r\n|\r/g,`
`),this.blockTokens(S,this.tokens);for(let w=0;w<this.inlineQueue.length;w++){let k=this.inlineQueue[w];this.inlineTokens(k.src,k.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(S,w=[],k=!1){this.options.pedantic?S=S.replace(/\t/g,"    ").replace(/^ +$/gm,""):S=S.replace(/^( *)(\t+)/gm,(te,Se,we)=>Se+"    ".repeat(we.length));let R,F,Y;for(;S;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(te=>(R=te.call({lexer:this},S,w))?(S=S.substring(R.raw.length),w.push(R),!0):!1))){if(R=this.tokenizer.space(S)){S=S.substring(R.raw.length),R.raw.length===1&&w.length>0?w[w.length-1].raw+=`
`:w.push(R);continue}if(R=this.tokenizer.code(S)){S=S.substring(R.raw.length),F=w[w.length-1],F&&(F.type==="paragraph"||F.type==="text")?(F.raw+=`
`+R.raw,F.text+=`
`+R.text,this.inlineQueue[this.inlineQueue.length-1].src=F.text):w.push(R);continue}if(R=this.tokenizer.fences(S)){S=S.substring(R.raw.length),w.push(R);continue}if(R=this.tokenizer.heading(S)){S=S.substring(R.raw.length),w.push(R);continue}if(R=this.tokenizer.hr(S)){S=S.substring(R.raw.length),w.push(R);continue}if(R=this.tokenizer.blockquote(S)){S=S.substring(R.raw.length),w.push(R);continue}if(R=this.tokenizer.list(S)){S=S.substring(R.raw.length),w.push(R);continue}if(R=this.tokenizer.html(S)){S=S.substring(R.raw.length),w.push(R);continue}if(R=this.tokenizer.def(S)){S=S.substring(R.raw.length),F=w[w.length-1],F&&(F.type==="paragraph"||F.type==="text")?(F.raw+=`
`+R.raw,F.text+=`
`+R.raw,this.inlineQueue[this.inlineQueue.length-1].src=F.text):this.tokens.links[R.tag]||(this.tokens.links[R.tag]={href:R.href,title:R.title});continue}if(R=this.tokenizer.table(S)){S=S.substring(R.raw.length),w.push(R);continue}if(R=this.tokenizer.lheading(S)){S=S.substring(R.raw.length),w.push(R);continue}if(Y=S,this.options.extensions&&this.options.extensions.startBlock){let te=1/0,Se=S.slice(1),we;this.options.extensions.startBlock.forEach(it=>{we=it.call({lexer:this},Se),typeof we=="number"&&we>=0&&(te=Math.min(te,we))}),te<1/0&&te>=0&&(Y=S.substring(0,te+1))}if(this.state.top&&(R=this.tokenizer.paragraph(Y))){F=w[w.length-1],k&&F?.type==="paragraph"?(F.raw+=`
`+R.raw,F.text+=`
`+R.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=F.text):w.push(R),k=Y.length!==S.length,S=S.substring(R.raw.length);continue}if(R=this.tokenizer.text(S)){S=S.substring(R.raw.length),F=w[w.length-1],F&&F.type==="text"?(F.raw+=`
`+R.raw,F.text+=`
`+R.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=F.text):w.push(R);continue}if(S){let te="Infinite loop on byte: "+S.charCodeAt(0);if(this.options.silent){console.error(te);break}else throw new Error(te)}}return this.state.top=!0,w}inline(S,w=[]){return this.inlineQueue.push({src:S,tokens:w}),w}inlineTokens(S,w=[]){let k,R,F,Y=S,te,Se,we;if(this.tokens.links){let it=Object.keys(this.tokens.links);if(it.length>0)for(;(te=this.tokenizer.rules.inline.reflinkSearch.exec(Y))!=null;)it.includes(te[0].slice(te[0].lastIndexOf("[")+1,-1))&&(Y=Y.slice(0,te.index)+"["+"a".repeat(te[0].length-2)+"]"+Y.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(te=this.tokenizer.rules.inline.blockSkip.exec(Y))!=null;)Y=Y.slice(0,te.index)+"["+"a".repeat(te[0].length-2)+"]"+Y.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(te=this.tokenizer.rules.inline.anyPunctuation.exec(Y))!=null;)Y=Y.slice(0,te.index)+"++"+Y.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;S;)if(Se||(we=""),Se=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(it=>(k=it.call({lexer:this},S,w))?(S=S.substring(k.raw.length),w.push(k),!0):!1))){if(k=this.tokenizer.escape(S)){S=S.substring(k.raw.length),w.push(k);continue}if(k=this.tokenizer.tag(S)){S=S.substring(k.raw.length),R=w[w.length-1],R&&k.type==="text"&&R.type==="text"?(R.raw+=k.raw,R.text+=k.text):w.push(k);continue}if(k=this.tokenizer.link(S)){S=S.substring(k.raw.length),w.push(k);continue}if(k=this.tokenizer.reflink(S,this.tokens.links)){S=S.substring(k.raw.length),R=w[w.length-1],R&&k.type==="text"&&R.type==="text"?(R.raw+=k.raw,R.text+=k.text):w.push(k);continue}if(k=this.tokenizer.emStrong(S,Y,we)){S=S.substring(k.raw.length),w.push(k);continue}if(k=this.tokenizer.codespan(S)){S=S.substring(k.raw.length),w.push(k);continue}if(k=this.tokenizer.br(S)){S=S.substring(k.raw.length),w.push(k);continue}if(k=this.tokenizer.del(S)){S=S.substring(k.raw.length),w.push(k);continue}if(k=this.tokenizer.autolink(S)){S=S.substring(k.raw.length),w.push(k);continue}if(!this.state.inLink&&(k=this.tokenizer.url(S))){S=S.substring(k.raw.length),w.push(k);continue}if(F=S,this.options.extensions&&this.options.extensions.startInline){let it=1/0,Dt=S.slice(1),Jt;this.options.extensions.startInline.forEach(Mn=>{Jt=Mn.call({lexer:this},Dt),typeof Jt=="number"&&Jt>=0&&(it=Math.min(it,Jt))}),it<1/0&&it>=0&&(F=S.substring(0,it+1))}if(k=this.tokenizer.inlineText(F)){S=S.substring(k.raw.length),k.raw.slice(-1)!=="_"&&(we=k.raw.slice(-1)),Se=!0,R=w[w.length-1],R&&R.type==="text"?(R.raw+=k.raw,R.text+=k.text):w.push(k);continue}if(S){let it="Infinite loop on byte: "+S.charCodeAt(0);if(this.options.silent){console.error(it);break}else throw new Error(it)}}return w}}class L{options;parser;constructor(S){this.options=S||e.defaults}space(S){return""}code({text:S,lang:w,escaped:k}){let R=(w||"").match(/^\S*/)?.[0],F=S.replace(/\n$/,"")+`
`;return R?'<pre><code class="language-'+u(R)+'">'+(k?F:u(F,!0))+`</code></pre>
`:"<pre><code>"+(k?F:u(F,!0))+`</code></pre>
`}blockquote({tokens:S}){return`<blockquote>
${this.parser.parse(S)}</blockquote>
`}html({text:S}){return S}heading({tokens:S,depth:w}){return`<h${w}>${this.parser.parseInline(S)}</h${w}>
`}hr(S){return`<hr>
`}list(S){let w=S.ordered,k=S.start,R="";for(let te=0;te<S.items.length;te++){let Se=S.items[te];R+=this.listitem(Se)}let F=w?"ol":"ul",Y=w&&k!==1?' start="'+k+'"':"";return"<"+F+Y+`>
`+R+"</"+F+`>
`}listitem(S){let w="";if(S.task){let k=this.checkbox({checked:!!S.checked});S.loose?S.tokens.length>0&&S.tokens[0].type==="paragraph"?(S.tokens[0].text=k+" "+S.tokens[0].text,S.tokens[0].tokens&&S.tokens[0].tokens.length>0&&S.tokens[0].tokens[0].type==="text"&&(S.tokens[0].tokens[0].text=k+" "+S.tokens[0].tokens[0].text)):S.tokens.unshift({type:"text",raw:k+" ",text:k+" "}):w+=k+" "}return w+=this.parser.parse(S.tokens,!!S.loose),`<li>${w}</li>
`}checkbox({checked:S}){return"<input "+(S?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:S}){return`<p>${this.parser.parseInline(S)}</p>
`}table(S){let w="",k="";for(let F=0;F<S.header.length;F++)k+=this.tablecell(S.header[F]);w+=this.tablerow({text:k});let R="";for(let F=0;F<S.rows.length;F++){let Y=S.rows[F];k="";for(let te=0;te<Y.length;te++)k+=this.tablecell(Y[te]);R+=this.tablerow({text:k})}return R&&(R=`<tbody>${R}</tbody>`),`<table>
<thead>
`+w+`</thead>
`+R+`</table>
`}tablerow({text:S}){return`<tr>
${S}</tr>
`}tablecell(S){let w=this.parser.parseInline(S.tokens),k=S.header?"th":"td";return(S.align?`<${k} align="${S.align}">`:`<${k}>`)+w+`</${k}>
`}strong({tokens:S}){return`<strong>${this.parser.parseInline(S)}</strong>`}em({tokens:S}){return`<em>${this.parser.parseInline(S)}</em>`}codespan({text:S}){return`<code>${S}</code>`}br(S){return"<br>"}del({tokens:S}){return`<del>${this.parser.parseInline(S)}</del>`}link({href:S,title:w,tokens:k}){let R=this.parser.parseInline(k),F=m(S);if(F===null)return R;S=F;let Y='<a href="'+S+'"';return w&&(Y+=' title="'+w+'"'),Y+=">"+R+"</a>",Y}image({href:S,title:w,text:k}){let R=m(S);if(R===null)return k;S=R;let F=`<img src="${S}" alt="${k}"`;return w&&(F+=` title="${w}"`),F+=">",F}text(S){return"tokens"in S&&S.tokens?this.parser.parseInline(S.tokens):S.text}}class q{strong({text:S}){return S}em({text:S}){return S}codespan({text:S}){return S}del({text:S}){return S}html({text:S}){return S}text({text:S}){return S}link({text:S}){return""+S}image({text:S}){return""+S}br(){return""}}class j{options;renderer;textRenderer;constructor(S){this.options=S||e.defaults,this.options.renderer=this.options.renderer||new L,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new q}static parse(S,w){return new j(w).parse(S)}static parseInline(S,w){return new j(w).parseInline(S)}parse(S,w=!0){let k="";for(let R=0;R<S.length;R++){let F=S[R];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[F.type]){let te=F,Se=this.options.extensions.renderers[te.type].call({parser:this},te);if(Se!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(te.type)){k+=Se||"";continue}}let Y=F;switch(Y.type){case"space":{k+=this.renderer.space(Y);continue}case"hr":{k+=this.renderer.hr(Y);continue}case"heading":{k+=this.renderer.heading(Y);continue}case"code":{k+=this.renderer.code(Y);continue}case"table":{k+=this.renderer.table(Y);continue}case"blockquote":{k+=this.renderer.blockquote(Y);continue}case"list":{k+=this.renderer.list(Y);continue}case"html":{k+=this.renderer.html(Y);continue}case"paragraph":{k+=this.renderer.paragraph(Y);continue}case"text":{let te=Y,Se=this.renderer.text(te);for(;R+1<S.length&&S[R+1].type==="text";)te=S[++R],Se+=`
`+this.renderer.text(te);w?k+=this.renderer.paragraph({type:"paragraph",raw:Se,text:Se,tokens:[{type:"text",raw:Se,text:Se}]}):k+=Se;continue}default:{let te='Token with "'+Y.type+'" type was not found.';if(this.options.silent)return console.error(te),"";throw new Error(te)}}}return k}parseInline(S,w){w=w||this.renderer;let k="";for(let R=0;R<S.length;R++){let F=S[R];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[F.type]){let te=this.options.extensions.renderers[F.type].call({parser:this},F);if(te!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(F.type)){k+=te||"";continue}}let Y=F;switch(Y.type){case"escape":{k+=w.text(Y);break}case"html":{k+=w.html(Y);break}case"link":{k+=w.link(Y);break}case"image":{k+=w.image(Y);break}case"strong":{k+=w.strong(Y);break}case"em":{k+=w.em(Y);break}case"codespan":{k+=w.codespan(Y);break}case"br":{k+=w.br(Y);break}case"del":{k+=w.del(Y);break}case"text":{k+=w.text(Y);break}default:{let te='Token with "'+Y.type+'" type was not found.';if(this.options.silent)return console.error(te),"";throw new Error(te)}}}return k}}class Pe{options;constructor(S){this.options=S||e.defaults}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(S){return S}postprocess(S){return S}processAllTokens(S){return S}}class Ke{defaults=t();options=this.setOptions;parse=this.parseMarkdown(mn.lex,j.parse);parseInline=this.parseMarkdown(mn.lexInline,j.parseInline);Parser=j;Renderer=L;TextRenderer=q;Lexer=mn;Tokenizer=_;Hooks=Pe;constructor(...S){this.use(...S)}walkTokens(S,w){let k=[];for(let R of S)switch(k=k.concat(w.call(this,R)),R.type){case"table":{let F=R;for(let Y of F.header)k=k.concat(this.walkTokens(Y.tokens,w));for(let Y of F.rows)for(let te of Y)k=k.concat(this.walkTokens(te.tokens,w));break}case"list":{let F=R;k=k.concat(this.walkTokens(F.items,w));break}default:{let F=R;this.defaults.extensions?.childTokens?.[F.type]?this.defaults.extensions.childTokens[F.type].forEach(Y=>{let te=F[Y].flat(1/0);k=k.concat(this.walkTokens(te,w))}):F.tokens&&(k=k.concat(this.walkTokens(F.tokens,w)))}}return k}use(...S){let w=this.defaults.extensions||{renderers:{},childTokens:{}};return S.forEach(k=>{let R={...k};if(R.async=this.defaults.async||R.async||!1,k.extensions&&(k.extensions.forEach(F=>{if(!F.name)throw new Error("extension name required");if("renderer"in F){let Y=w.renderers[F.name];Y?w.renderers[F.name]=function(...te){let Se=F.renderer.apply(this,te);return Se===!1&&(Se=Y.apply(this,te)),Se}:w.renderers[F.name]=F.renderer}if("tokenizer"in F){if(!F.level||F.level!=="block"&&F.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let Y=w[F.level];Y?Y.unshift(F.tokenizer):w[F.level]=[F.tokenizer],F.start&&(F.level==="block"?w.startBlock?w.startBlock.push(F.start):w.startBlock=[F.start]:F.level==="inline"&&(w.startInline?w.startInline.push(F.start):w.startInline=[F.start]))}"childTokens"in F&&F.childTokens&&(w.childTokens[F.name]=F.childTokens)}),R.extensions=w),k.renderer){let F=this.defaults.renderer||new L(this.defaults);for(let Y in k.renderer){if(!(Y in F))throw new Error(`renderer '${Y}' does not exist`);if(["options","parser"].includes(Y))continue;let te=Y,Se=k.renderer[te],we=F[te];F[te]=(...it)=>{let Dt=Se.apply(F,it);return Dt===!1&&(Dt=we.apply(F,it)),Dt||""}}R.renderer=F}if(k.tokenizer){let F=this.defaults.tokenizer||new _(this.defaults);for(let Y in k.tokenizer){if(!(Y in F))throw new Error(`tokenizer '${Y}' does not exist`);if(["options","rules","lexer"].includes(Y))continue;let te=Y,Se=k.tokenizer[te],we=F[te];F[te]=(...it)=>{let Dt=Se.apply(F,it);return Dt===!1&&(Dt=we.apply(F,it)),Dt}}R.tokenizer=F}if(k.hooks){let F=this.defaults.hooks||new Pe;for(let Y in k.hooks){if(!(Y in F))throw new Error(`hook '${Y}' does not exist`);if(Y==="options")continue;let te=Y,Se=k.hooks[te],we=F[te];Pe.passThroughHooks.has(Y)?F[te]=it=>{if(this.defaults.async)return Promise.resolve(Se.call(F,it)).then(Jt=>we.call(F,Jt));let Dt=Se.call(F,it);return we.call(F,Dt)}:F[te]=(...it)=>{let Dt=Se.apply(F,it);return Dt===!1&&(Dt=we.apply(F,it)),Dt}}R.hooks=F}if(k.walkTokens){let F=this.defaults.walkTokens,Y=k.walkTokens;R.walkTokens=function(te){let Se=[];return Se.push(Y.call(this,te)),F&&(Se=Se.concat(F.call(this,te))),Se}}this.defaults={...this.defaults,...R}}),this}setOptions(S){return this.defaults={...this.defaults,...S},this}lexer(S,w){return mn.lex(S,w??this.defaults)}parser(S,w){return j.parse(S,w??this.defaults)}parseMarkdown(S,w){return(R,F)=>{let Y={...F},te={...this.defaults,...Y},Se=this.onError(!!te.silent,!!te.async);if(this.defaults.async===!0&&Y.async===!1)return Se(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof R>"u"||R===null)return Se(new Error("marked(): input parameter is undefined or null"));if(typeof R!="string")return Se(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(R)+", string expected"));if(te.hooks&&(te.hooks.options=te),te.async)return Promise.resolve(te.hooks?te.hooks.preprocess(R):R).then(we=>S(we,te)).then(we=>te.hooks?te.hooks.processAllTokens(we):we).then(we=>te.walkTokens?Promise.all(this.walkTokens(we,te.walkTokens)).then(()=>we):we).then(we=>w(we,te)).then(we=>te.hooks?te.hooks.postprocess(we):we).catch(Se);try{te.hooks&&(R=te.hooks.preprocess(R));let we=S(R,te);te.hooks&&(we=te.hooks.processAllTokens(we)),te.walkTokens&&this.walkTokens(we,te.walkTokens);let it=w(we,te);return te.hooks&&(it=te.hooks.postprocess(it)),it}catch(we){return Se(we)}}}onError(S,w){return k=>{if(k.message+=`
Please report this to https://github.com/markedjs/marked.`,S){let R="<p>An error occurred:</p><pre>"+u(k.message+"",!0)+"</pre>";return w?Promise.resolve(R):R}if(w)return Promise.reject(k);throw k}}}let tn=new Ke;function Ve(de,S){return tn.parse(de,S)}Ve.options=Ve.setOptions=function(de){return tn.setOptions(de),Ve.defaults=tn.defaults,n(Ve.defaults),Ve},Ve.getDefaults=t,Ve.defaults=e.defaults,Ve.use=function(...de){return tn.use(...de),Ve.defaults=tn.defaults,n(Ve.defaults),Ve},Ve.walkTokens=function(de,S){return tn.walkTokens(de,S)},Ve.parseInline=tn.parseInline,Ve.Parser=j,Ve.parser=j.parse,Ve.Renderer=L,Ve.TextRenderer=q,Ve.Lexer=mn,Ve.lexer=mn.lex,Ve.Tokenizer=_,Ve.Hooks=Pe,Ve.parse=Ve;let Mt=Ve.options,jt=Ve.setOptions,Zn=Ve.use,ur=Ve.walkTokens,sn=Ve.parseInline,On=Ve,li=j.parse,pr=mn.lex;e.Hooks=Pe,e.Lexer=mn,e.Marked=Ke,e.Parser=j,e.Renderer=L,e.TextRenderer=q,e.Tokenizer=_,e.getDefaults=t,e.lexer=pr,e.marked=Ve,e.options=Mt,e.parse=On,e.parseInline=sn,e.parser=li,e.setOptions=jt,e.use=Zn,e.walkTokens=ur})})();var PHe=vi.Hooks||exports.Hooks,AHe=vi.Lexer||exports.Lexer,OHe=vi.Marked||exports.Marked,MHe=vi.Parser||exports.Parser,G_=vi.Renderer||exports.Renderer,NHe=vi.TextRenderer||exports.TextRenderer,FHe=vi.Tokenizer||exports.Tokenizer,CB=vi.defaults||exports.defaults,BHe=vi.getDefaults||exports.getDefaults,qg=vi.lexer||exports.lexer,UHe=vi.marked||exports.marked,VHe=vi.options||exports.options,q_=vi.parse||exports.parse,WHe=vi.parseInline||exports.parseInline,kB=vi.parser||exports.parser,zHe=vi.setOptions||exports.setOptions,HHe=vi.use||exports.use,KHe=vi.walkTokens||exports.walkTokens;var $_=Object.freeze({image:({href:r,title:e,text:t})=>{let n=[],i=[];return r&&({href:r,dimensions:n}=NA(r),i.push(`src="${Pm(r)}"`)),t&&i.push(`alt="${Pm(t)}"`),e&&i.push(`title="${Pm(e)}"`),n.length&&(i=i.concat(n)),"<img "+i.join(" ")+">"},paragraph({tokens:r}){return`<p>${this.parser.parseInline(r)}</p>`},link({href:r,title:e,tokens:t}){let n=this.parser.parseInline(t);return typeof r!="string"?"":(r===n&&(n=vv(n)),e=typeof e=="string"?Pm(vv(e)):"",r=vv(r),r=r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${r}" title="${e||r}" draggable="false">${n}</a>`)}});function iS(r,e={},t={}){let n=new Q,i=!1,o=GI(e),s=function(g){let y;try{y=Tu(decodeURIComponent(g))}catch{}return y?(y=Yw(y,T=>{if(r.uris&&r.uris[T])return W.revive(r.uris[T])}),encodeURIComponent(JSON.stringify(y))):g},a=function(g,y){let T=r.uris&&r.uris[g],E=W.revive(T);return y?g.startsWith(le.data+":")?g:(E||(E=W.parse(g)),yr.uriToBrowserUri(E).toString(!0)):!E||W.parse(g).toString()===E.toString()?g:(E.query&&(E=E.with({query:s(E.query)})),E.toString())},l=new G_;l.image=$_.image,l.link=$_.link,l.paragraph=$_.paragraph;let d=[],u=[];if(e.codeBlockRendererSync?l.code=({text:g,lang:y})=>{let T=K_.nextId(),E=e.codeBlockRendererSync(DB(y),g);return u.push([T,E]),`<div class="code" data-code="${T}">${rm(g)}</div>`}:e.codeBlockRenderer&&(l.code=({text:g,lang:y})=>{let T=K_.nextId(),E=e.codeBlockRenderer(DB(y),g);return d.push(E.then(D=>[T,D])),`<div class="code" data-code="${T}">${rm(g)}</div>`}),e.actionHandler){let g=function(E){let D=E.target.closest("a[data-href]");if(An(D))try{let _=D.dataset.href;_&&(r.baseUri&&(_=j_(W.from(r.baseUri),_)),e.actionHandler.callback(_,E))}catch(_){Ze(_)}finally{E.preventDefault()}},y=e.actionHandler.disposables.add(new Ue(o,"click")),T=e.actionHandler.disposables.add(new Ue(o,"auxclick"));e.actionHandler.disposables.add(N.any(y.event,T.event)(E=>{let D=new zn(Le(o),E);!D.leftButton&&!D.middleButton||g(D)})),e.actionHandler.disposables.add(K(o,"keydown",E=>{let D=new ht(E);!D.equals(10)&&!D.equals(3)||g(D)}))}r.supportHtml||(l.html=({text:g})=>e.sanitizerOptions?.replaceWithPlaintext?rm(g):(r.isTrusted?g.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?g:""),t.renderer=l;let p=r.value??"";p.length>1e5&&(p=`${p.substr(0,1e5)}\u2026`),r.supportThemeIcons&&(p=MA(p));let h;if(e.fillInIncompleteTokens){let g={...CB,...t},y=qg(p,g),T=Z9(y);h=kB(T,g)}else h=q_(p,{...t,async:!1});r.supportThemeIcons&&(h=Yr(h).map(y=>typeof y=="string"?y:y.outerHTML).join(""));let f=new DOMParser().parseFromString(Y_({isTrusted:r.isTrusted,...e.sanitizerOptions},h),"text/html");if(f.body.querySelectorAll("img, audio, video, source").forEach(g=>{let y=g.getAttribute("src");if(y){let T=y;try{r.baseUri&&(T=j_(W.from(r.baseUri),T))}catch{}if(g.setAttribute("src",a(T,!0)),e.remoteImageIsAllowed){let E=W.parse(T);E.scheme!==le.file&&E.scheme!==le.data&&!e.remoteImageIsAllowed(E)&&g.replaceWith(ue("",void 0,g.outerHTML))}}}),f.body.querySelectorAll("a").forEach(g=>{let y=g.getAttribute("href");if(g.setAttribute("href",""),!y||/^data:|javascript:/i.test(y)||/^command:/i.test(y)&&!r.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(y))g.replaceWith(...g.childNodes);else{let T=a(y,!1);r.baseUri&&(T=j_(W.from(r.baseUri),y)),g.dataset.href=T}}),o.innerHTML=Y_({isTrusted:r.isTrusted,...e.sanitizerOptions},f.body.innerHTML),d.length>0)Promise.all(d).then(g=>{if(i)return;let y=new Map(g),T=o.querySelectorAll("div[data-code]");for(let E of T){let D=y.get(E.dataset.code??"");D&&us(E,D)}e.asyncRenderCallback?.()});else if(u.length>0){let g=new Map(u),y=o.querySelectorAll("div[data-code]");for(let T of y){let E=g.get(T.dataset.code??"");E&&us(T,E)}}if(e.asyncRenderCallback)for(let g of o.getElementsByTagName("img")){let y=n.add(K(g,"load",()=>{y.dispose(),e.asyncRenderCallback()}))}return{element:o,dispose:()=>{i=!0,n.dispose()}}}function DB(r){if(!r)return"";let e=r.split(/[\s+|:|,|\{|\?]/,1);return e.length?e[0]:r}function j_(r,e){return/^\w[\w\d+.-]*:/.test(e)?e:r.path.endsWith("/")?Tw(r,e).toString():Tw(ev(r),e).toString()}var z9=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function Y_(r,e){let{config:t,allowedSchemes:n}=K9(r),i=new Q;i.add(_B("uponSanitizeAttribute",(o,s)=>{if(s.attrName==="style"||s.attrName==="class"){if(o.tagName==="SPAN"){if(s.attrName==="style"){s.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z0-9]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z0-9]+)+\));)?(border-radius:[0-9]+px;)?$/.test(s.attrValue);return}else if(s.attrName==="class"){s.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(s.attrValue);return}}s.keepAttr=!1;return}else if(o.tagName==="INPUT"&&o.attributes.getNamedItem("type")?.value==="checkbox"){if(s.attrName==="type"&&s.attrValue==="checkbox"||s.attrName==="disabled"||s.attrName==="checked"){s.keepAttr=!0;return}s.keepAttr=!1}})),i.add(_B("uponSanitizeElement",(o,s)=>{if(s.tagName==="input"&&(o.attributes.getNamedItem("type")?.value==="checkbox"?o.setAttribute("disabled",""):r.replaceWithPlaintext||o.remove()),r.replaceWithPlaintext&&!s.allowedTags[s.tagName]&&s.tagName!=="body"&&o.parentElement){let a,l;if(s.tagName==="#comment")a=`<!--${o.textContent}-->`;else{let h=z9.includes(s.tagName),m=o.attributes.length?" "+Array.from(o.attributes).map(f=>`${f.name}="${f.value}"`).join(" "):"";a=`<${s.tagName}${m}>`,h||(l=`</${s.tagName}>`)}let d=document.createDocumentFragment(),u=o.parentElement.ownerDocument.createTextNode(a);d.appendChild(u);let p=l?o.parentElement.ownerDocument.createTextNode(l):void 0;for(;o.firstChild;)d.appendChild(o.firstChild);p&&d.appendChild(p),o.parentElement.replaceChild(d,o)}})),i.add(cB(n));try{return Og(e,{...t,RETURN_TRUSTED_TYPE:!0})}finally{i.dispose()}}var H9=["align","autoplay","alt","checked","class","colspan","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","rowspan","src","style","target","title","type","width","start"];function K9(r){let e=[le.http,le.https,le.mailto,le.data,le.file,le.vscodeFileResource,le.vscodeRemote,le.vscodeRemoteResource];return r.isTrusted&&e.push(le.command),{config:{ALLOWED_TAGS:r.allowedTags??[...uB],ALLOWED_ATTR:H9,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}function RB(r){return typeof r=="string"?r:G9(r)}function G9(r,e){let t=r.value??"";t.length>1e5&&(t=`${t.substr(0,1e5)}\u2026`);let n=q_(t,{async:!1,renderer:e?j9.value:$9.value}).replace(/&(#\d+|[a-zA-Z]+);/g,i=>q9.get(i)??i);return Y_({isTrusted:!1},n).toString()}var q9=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]);function LB(){let r=new G_;return r.code=({text:e})=>e,r.blockquote=({text:e})=>e+`
`,r.html=e=>"",r.heading=function({tokens:e}){return this.parser.parseInline(e)+`
`},r.hr=()=>"",r.list=function({items:e}){return e.map(t=>this.listitem(t)).join(`
`)+`
`},r.listitem=({text:e})=>e+`
`,r.paragraph=function({tokens:e}){return this.parser.parseInline(e)+`
`},r.table=function({header:e,rows:t}){return e.map(n=>this.tablecell(n)).join(" ")+`
`+t.map(n=>n.map(i=>this.tablecell(i)).join(" ")).join(`
`)+`
`},r.tablerow=({text:e})=>e,r.tablecell=function({tokens:e}){return this.parser.parseInline(e)},r.strong=({text:e})=>e,r.em=({text:e})=>e,r.codespan=({text:e})=>e,r.br=e=>`
`,r.del=({text:e})=>e,r.image=e=>"",r.text=({text:e})=>e,r.link=({text:e})=>e,r}var $9=new Fn(r=>LB()),j9=new Fn(()=>{let r=LB();return r.code=({text:e})=>`
\`\`\`
${e}
\`\`\`
`,r});function nS(r){let e="";return r.forEach(t=>{e+=t.raw}),e}function PB(r){if(r.tokens)for(let e=r.tokens.length-1;e>=0;e--){let t=r.tokens[e];if(t.type==="text"){let n=t.raw.split(`
`),i=n[n.length-1];if(i.includes("`"))return t7(r);if(i.includes("**"))return a7(r);if(i.match(/\*\w/))return n7(r);if(i.match(/(^|\s)__\w/))return l7(r);if(i.match(/(^|\s)_\w/))return i7(r);if(Y9(i)||X9(i)&&r.tokens.slice(0,e).some(o=>o.type==="text"&&o.raw.match(/\[[^\]]*$/))){let o=r.tokens.slice(e+1);return o[0]?.type==="link"&&o[1]?.type==="text"&&o[1].raw.match(/^ *"[^"]*$/)||i.match(/^[^"]* +"[^"]*$/)?o7(r):r7(r)}else if(i.match(/(^|\s)\[\w*/))return s7(r)}}}function Y9(r){return!!r.match(/(^|\s)\[.*\]\(\w*/)}function X9(r){return!!r.match(/^[^\[]*\]\([^\)]*$/)}function Q9(r){let e=r.items[r.items.length-1],t=e.tokens?e.tokens[e.tokens.length-1]:void 0,n;if(t?.type==="text"&&!("inRawBlock"in e)&&(n=PB(t)),!n||n.type!=="paragraph")return;let i=nS(r.items.slice(0,-1)),o=e.raw.match(/^(\s*(-|\d+\.|\*) +)/)?.[0];if(!o)return;let s=o+nS(e.tokens.slice(0,-1))+n.raw,a=qg(i+s)[0];if(a.type==="list")return a}var J9=3;function Z9(r){for(let e=0;e<J9;e++){let t=e7(r);if(t)r=t;else break}return r}function e7(r){let e,t;for(e=0;e<r.length;e++){let n=r[e];if(n.type==="paragraph"&&n.raw.match(/(\n|^)\|/)){t=d7(r.slice(e));break}if(e===r.length-1&&n.type==="list"){let i=Q9(n);if(i){t=[i];break}}if(e===r.length-1&&n.type==="paragraph"){let i=PB(n);if(i){t=[i];break}}}if(t){let n=[...r.slice(0,e),...t];return n.links=r.links,n}return null}function t7(r){return id(r,"`")}function n7(r){return id(r,"*")}function i7(r){return id(r,"_")}function r7(r){return id(r,")")}function o7(r){return id(r,'")')}function s7(r){return id(r,"](https://microsoft.com)")}function a7(r){return id(r,"**")}function l7(r){return id(r,"__")}function id(r,e){let t=nS(Array.isArray(r)?r:[r]);return qg(t+e)[0]}function d7(r){let e=nS(r),t=e.split(`
`),n,i=!1;for(let o=0;o<t.length;o++){let s=t[o].trim();if(typeof n>"u"&&s.match(/^\s*\|/)){let a=s.match(/(\|[^\|]+)(?=\||$)/g);a&&(n=a.length)}else if(typeof n=="number")if(s.match(/^\s*\|/)){if(o!==t.length-1)return;i=!0}else return}if(typeof n=="number"&&n>0){let o=i?t.slice(0,-1).join(`
`):e,s=!!o.match(/\|\s*$/),a=o+(s?"":"|")+`
|${" --- |".repeat(n)}`;return qg(a)}}function _B(r,e){return CI(r,e),ie(()=>kI(r))}var c7={showHover:()=>{},hideHover:()=>{},showAndFocusLastHover:()=>{},setupManagedHover:()=>null,showManagedHover:()=>{}};function yi(){return c7}var Ic=ue,AB="selectOption.entry.template",X_=class{get templateId(){return AB}renderTemplate(e){let t=Object.create(null);return t.root=e,t.text=Ie(e,Ic(".option-text")),t.detail=Ie(e,Ic(".option-detail")),t.decoratorRight=Ie(e,Ic(".option-decorator-right")),t}renderElement(e,t,n){let i=n,o=e.text,s=e.detail,a=e.decoratorRight,l=e.isDisabled;i.text.textContent=o,i.detail.textContent=s||"",i.decoratorRight.innerText=a||"",l?i.root.classList.add("option-disabled"):i.root.classList.remove("option-disabled")}disposeTemplate(e){}},rS=class r extends P{static DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32;static DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2;static DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;_isVisible;selectBoxOptions;selectElement;container;options=[];selected;_onDidSelect;styles;listRenderer;contextViewProvider;selectDropDownContainer;styleElement;selectList;selectDropDownListContainer;widthControlElement;_currentSelection=0;_dropDownPosition;_hasDetails=!1;selectionDetailsPane;_skipLayout=!1;_cachedMaxDetailsHeight;_hover;_sticky=!1;constructor(e,t,n,i,o){super(),this._isVisible=!1,this.styles=i,this.selectBoxOptions=o||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=r.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new x,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(n),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}setTitle(e){!this._hover&&e?this._hover=this._register(yi().setupManagedHover(Pt("mouse"),this.selectElement,e)):this._hover&&this._hover.update(e)}getHeight(){return 22}getTemplateId(){return AB}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=ue(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=Ie(this.selectDropDownContainer,Ic(".select-box-details-pane"));let t=Ie(this.selectDropDownContainer,Ic(".select-box-dropdown-container-width-control")),n=Ie(t,Ic(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",Ie(n,this.widthControlElement),this._dropDownPosition=0,this.styleElement=sr(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(K(this.selectDropDownContainer,se.DRAG_START,i=>{We.stop(i,!0)}))}registerListeners(){this._register(si(this.selectElement,"change",t=>{this.selected=t.target.selectedIndex,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)})),this._register(K(this.selectElement,se.CLICK,t=>{We.stop(t),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(K(this.selectElement,se.MOUSE_DOWN,t=>{We.stop(t)}));let e;this._register(K(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register(K(this.selectElement,"touchend",t=>{We.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(K(this.selectElement,se.KEY_DOWN,t=>{let n=new ht(t),i=!1;ze?(n.keyCode===18||n.keyCode===16||n.keyCode===10||n.keyCode===3)&&(i=!0):(n.keyCode===18&&n.altKey||n.keyCode===16&&n.altKey||n.keyCode===10||n.keyCode===3)&&(i=!0),i&&(this.showSelectDropDown(),We.stop(t,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){ln(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((n,i)=>{this.selectElement.add(this.createOption(n.text,i,n.isDisabled)),typeof n.description=="string"&&(this._hasDetails=!0)})),t!==void 0&&(this.select(t),this._currentSelection=this.selected)}setEnabled(e){this.selectElement.disabled=!e}setOptionsList(){this.selectList?.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}setAriaLabel(e){this.selectBoxOptions.ariaLabel=e,this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){let e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join(`
`)}styleSelectElement(){let e=this.styles.selectBackground??"",t=this.styles.selectForeground??"",n=this.styles.selectBorder??"";this.selectElement.style.backgroundColor=e,this.selectElement.style.color=t,this.selectElement.style.borderColor=n}styleList(){let e=this.styles.selectBackground??"",t=Rr(this.styles.selectListBackground,e);this.selectDropDownListContainer.style.backgroundColor=t,this.selectionDetailsPane.style.backgroundColor=t;let n=this.styles.focusBorder??"";this.selectDropDownContainer.style.outlineColor=n,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,n){let i=document.createElement("option");return i.value=e,i.text=e,i.disabled=!!n,i}showSelectDropDown(){this.selectionDetailsPane.innerText="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{this.selectDropDownContainer.remove()}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,n)=>{this.updateDetail(n),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");let t=Le(this.selectElement),n=Vg(this.selectElement),i=Le(this.selectElement).getComputedStyle(this.selectElement),o=parseFloat(i.getPropertyValue("--dropdown-padding-top"))+parseFloat(i.getPropertyValue("--dropdown-padding-bottom")),s=t.innerHeight-n.top-n.height-(this.selectBoxOptions.minBottomMargin||0),a=n.top-r.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,l=this.selectElement.offsetWidth,d=this.setWidthControlElement(this.widthControlElement),u=Math.max(d,Math.round(l)).toString()+"px";this.selectDropDownContainer.style.width=u,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let p=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());let h=this._hasDetails?this._cachedMaxDetailsHeight:0,m=p+o+h,f=Math.floor((s-o-h)/this.getHeight()),g=Math.floor((a-o-h)/this.getHeight());if(e)return n.top+n.height>t.innerHeight-22||n.top<r.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||f<1&&g<1?!1:(f<r.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&g>f&&this.options.length>f?(this._dropDownPosition=1,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(n.top+n.height>t.innerHeight-22||n.top<r.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&f<1||this._dropDownPosition===1&&g<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&f+g<1)return this.hideSelectDropDown(!0),!1;m>s&&(p=f*this.getHeight())}else m>a&&(p=g*this.getHeight());return this.selectList.layout(p),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=p+o+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=p+o+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=u,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(e){let t=0;if(e){let n=0,i=0;this.options.forEach((o,s)=>{let a=o.detail?o.detail.length:0,l=o.decoratorRight?o.decoratorRight.length:0,d=o.text.length+a+l;d>i&&(n=s,i=d)}),e.textContent=this.options[n].text+(this.options[n].decoratorRight?this.options[n].decoratorRight+" ":""),t=_p(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=Ie(e,Ic(".select-box-dropdown-list-container")),this.listRenderer=new X_,this.selectList=this._register(new ai("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:i=>{let o=i.text;return i.detail&&(o+=`. ${i.detail}`),i.decoratorRight&&(o+=`. ${i.decoratorRight}`),i.description&&(o+=`. ${i.description}`),o},getWidgetAriaLabel:()=>c({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>ze?"":"option",getWidgetRole:()=>"listbox"}})),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);let t=this._register(new Ue(this.selectDropDownListContainer,"keydown")),n=N.chain(t.event,i=>i.filter(()=>this.selectList.length>0).map(o=>new ht(o)));this._register(N.chain(n,i=>i.filter(o=>o.keyCode===3))(this.onEnter,this)),this._register(N.chain(n,i=>i.filter(o=>o.keyCode===2))(this.onEnter,this)),this._register(N.chain(n,i=>i.filter(o=>o.keyCode===9))(this.onEscape,this)),this._register(N.chain(n,i=>i.filter(o=>o.keyCode===16))(this.onUpArrow,this)),this._register(N.chain(n,i=>i.filter(o=>o.keyCode===18))(this.onDownArrow,this)),this._register(N.chain(n,i=>i.filter(o=>o.keyCode===12))(this.onPageDown,this)),this._register(N.chain(n,i=>i.filter(o=>o.keyCode===11))(this.onPageUp,this)),this._register(N.chain(n,i=>i.filter(o=>o.keyCode===14))(this.onHome,this)),this._register(N.chain(n,i=>i.filter(o=>o.keyCode===13))(this.onEnd,this)),this._register(N.chain(n,i=>i.filter(o=>o.keyCode>=21&&o.keyCode<=56||o.keyCode>=85&&o.keyCode<=113))(this.onCharacter,this)),this._register(K(this.selectList.getHTMLElement(),se.POINTER_UP,i=>this.onPointerUp(i))),this._register(this.selectList.onMouseOver(i=>typeof i.index<"u"&&this.selectList.setFocus([i.index]))),this._register(this.selectList.onDidChangeFocus(i=>this.onListFocus(i))),this._register(K(this.selectDropDownContainer,se.FOCUS_OUT,i=>{!this._isVisible||_r(i.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;We.stop(e);let t=e.target;if(!t||t.classList.contains("slider"))return;let n=t.closest(".monaco-list-row");if(!n)return;let i=Number(n.getAttribute("data-index")),o=n.classList.contains("option-disabled");i>=0&&i<this.options.length&&!o&&(this.selected=i,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){let n=o=>{for(let s=0;s<o.childNodes.length;s++){let a=o.childNodes.item(s);(a.tagName&&a.tagName.toLowerCase())==="img"?a.remove():n(a)}},i=iS({value:e,supportThemeIcons:!0},{actionHandler:t});return i.element.classList.add("select-box-description-markdown"),n(i.element),i.element}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){this.selectionDetailsPane.innerText="";let t=this.options[e],n=t?.description??"",i=t?.descriptionIsMarkdown??!1;if(n){if(i){let o=t.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(n,o))}else this.selectionDetailsPane.innerText=n;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){We.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){We.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){We.stop(e,!0);let t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&(We.stop(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){We.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){We.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){We.stop(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){We.stop(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){let t=bm.toString(e.keyCode),n=-1;for(let i=0;i<this.options.length-1;i++)if(n=(i+this.selected+1)%this.options.length,this.options[n].text.charAt(0).toUpperCase()===t&&!this.options[n].isDisabled){this.select(n),this.selectList.setFocus([n]),this.selectList.reveal(this.selectList.getFocus()[0]),We.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}};var oS=class extends P{selectElement;selectBoxOptions;options;selected=0;_onDidSelect;styles;constructor(e,t,n,i){super(),this.selectBoxOptions=i||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new x),this.styles=n,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(Zt.addTarget(this.selectElement)),[wt.Tap].forEach(e=>{this._register(K(this.selectElement,e,t=>{this.selectElement.focus()}))}),this._register(si(this.selectElement,"click",e=>{We.stop(e,!0)})),this._register(si(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(si(this.selectElement,"keydown",e=>{let t=!1;ze?(e.keyCode===18||e.keyCode===16||e.keyCode===10)&&(t=!0):(e.keyCode===18&&e.altKey||e.keyCode===10||e.keyCode===3)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!ln(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((n,i)=>{this.selectElement.add(this.createOption(n.text,i,n.isDisabled))})),t!==void 0&&this.select(t)}select(e){this.options.length===0?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}setAriaLabel(e){this.selectBoxOptions.ariaLabel=e,this.selectElement.setAttribute("aria-label",e)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setEnabled(e){this.selectElement.disabled=!e}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}style(e){this.styles=e,this.applyStyles()}applyStyles(){this.selectElement&&(this.selectElement.style.backgroundColor=this.styles.selectBackground??"",this.selectElement.style.color=this.styles.selectForeground??"",this.selectElement.style.borderColor=this.styles.selectBorder??"")}createOption(e,t,n){let i=document.createElement("option");return i.value=e,i.text=e,i.disabled=!!n,i}};var E7e={...eS,selectBackground:"#3C3C3C",selectForeground:"#F0F0F0",selectBorder:"#3C3C3C",decoratorRightForeground:void 0,selectListBackground:void 0,selectListBorder:void 0,focusBorder:void 0},sS=class extends Jn{selectBoxDelegate;constructor(e,t,n,i,o){super(),ze&&!o?.useCustomDrawn?this.selectBoxDelegate=new oS(e,t,i,o):this.selectBoxDelegate=new rS(e,t,n,i,o),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}setAriaLabel(e){this.selectBoxDelegate.setAriaLabel(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}setEnabled(e){this.selectBoxDelegate.setEnabled(e)}render(e){this.selectBoxDelegate.render(e)}};var OB={inputActiveOptionBorder:"#007ACC00",inputActiveOptionForeground:"#FFFFFF",inputActiveOptionBackground:"#0E639C50"};var ps=class extends Jn{_onChange=this._register(new x);onChange=this._onChange.event;_onKeyDown=this._register(new x);onKeyDown=this._onKeyDown.event;_opts;_icon;domNode;_checked;_hover;constructor(e){super(),this._opts=e,this._checked=this._opts.isChecked;let t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...qe.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register(yi().setupManagedHover(e.hoverDelegate??Pt("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault(),n.stopPropagation();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}setIcon(e){this._icon&&this.domNode.classList.remove(...qe.asClassNameArray(this._icon)),this._icon=e,this._icon&&this.domNode.classList.add(...qe.asClassNameArray(this._icon))}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}setTitle(e){this._hover.update(e),this.domNode.setAttribute("aria-label",e)}set visible(e){this.domNode.style.display=e?"":"none"}get visible(){return this.domNode.style.display!=="none"}};var Ii=class extends P{constructor(t,n,i={}){super();this.options=i;this._context=t||this,this._action=n,n instanceof un&&this._register(n.onDidChange(o=>{this.element&&this.handleActionChangeEvent(o)}))}element;_context;_action;customHover;get action(){return this._action}_actionRunner;handleActionChangeEvent(t){t.enabled!==void 0&&this.updateEnabled(),t.checked!==void 0&&this.updateChecked(),t.class!==void 0&&this.updateClass(),t.label!==void 0&&(this.updateLabel(),this.updateTooltip()),t.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new io)),this._actionRunner}set actionRunner(t){this._actionRunner=t}isEnabled(){return this._action.enabled}setActionContext(t){this._context=t}render(t){let n=this.element=t;this._register(Zt.addTarget(t));let i=this.options&&this.options.draggable;i&&(t.draggable=!0,Lo&&this._register(K(t,se.DRAG_START,o=>o.dataTransfer?.setData(qr.TEXT,this._action.label)))),this._register(K(n,wt.Tap,o=>this.onClick(o,!0))),this._register(K(n,se.MOUSE_DOWN,o=>{i||We.stop(o,!0),this._action.enabled&&o.button===0&&n.classList.add("active")})),ze&&this._register(K(n,se.CONTEXT_MENU,o=>{o.button===0&&o.ctrlKey===!0&&this.onClick(o)})),this._register(K(n,se.CLICK,o=>{We.stop(o,!0),this.options&&this.options.isMenu||this.onClick(o)})),this._register(K(n,se.DBLCLICK,o=>{We.stop(o,!0)})),[se.MOUSE_UP,se.MOUSE_OUT].forEach(o=>{this._register(K(n,o,s=>{We.stop(s),n.classList.remove("active")}))})}onClick(t,n=!1){We.stop(t,!0);let i=zt(this._context)?this.options?.useEventAsContext?t:{preserveFocus:n}:this._context;this.actionRunner.run(this._action,i)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}isFocused(){return!!this.element?.classList.contains("focused")}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(t){this.element&&(this.element.tabIndex=t?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){if(!this.element)return;let t=this.getTooltip()??"";if(this.updateAriaLabel(),this.options.hoverDelegate?.showNativeHover)this.element.title=t;else if(!this.customHover&&t!==""){let n=this.options.hoverDelegate??Pt("element");this.customHover=this._store.add(yi().setupManagedHover(n,this.element,t))}else this.customHover&&this.customHover.update(t)}updateAriaLabel(){if(this.element){let t=this.getTooltip()??"";this.element.setAttribute("aria-label",t)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}},rd=class extends Ii{label;options;cssClass;constructor(e,t,n){super(e,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),pu(this.element);let t=document.createElement("a");if(t.classList.add("action-label"),t.setAttribute("role",this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding){let n=document.createElement("span");n.classList.add("keybinding"),n.textContent=this.options.keybinding,this.element.appendChild(n)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===Yt.ID?"presentation":this.options.isMenu?"menuitem":this.options.isTabList?"tab":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}isFocused(){return!!this.label&&this.label?.tabIndex===0}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=c({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label?.classList.remove("codicon")}updateEnabled(){this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element?.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element?.classList.add("disabled"))}updateAriaLabel(){if(this.label){let e=this.getTooltip()??"";this.label.setAttribute("aria-label",e)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.options.isTabList?this.label.setAttribute("aria-selected",this.action.checked?"true":"false"):(this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox"))):(this.label.classList.remove("checked"),this.label.removeAttribute(this.options.isTabList?"aria-selected":"aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}},aS=class extends Ii{selectBox;constructor(e,t,n,i,o,s,a){super(e,t),this.selectBox=new sS(n,i,o,s,a),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}setOptions(e,t){this.selectBox.setOptions(e,t)}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){this.selectBox?.focus()}blur(){this.selectBox?.blur()}render(e){this.selectBox.render(e)}};var Ao=class extends P{options;_hoverDelegate;_actionRunner;_actionRunnerDisposables=this._register(new Q);_context;_orientation;_triggerKeys;viewItems;viewItemDisposables=this._register(new hr);previouslyFocusedItem;focusedItem;focusTracker;triggerKeyDown=!1;focusable=!0;domNode;actionsList;_onDidBlur=this._register(new x);onDidBlur=this._onDidBlur.event;_onDidCancel=this._register(new x({onWillAddFirstListener:()=>this.cancelHasListener=!0}));onDidCancel=this._onDidCancel.event;cancelHasListener=!1;_onDidRun=this._register(new x);onDidRun=this._onDidRun.event;_onWillRun=this._register(new x);onWillRun=this._onWillRun.event;constructor(e,t={}){super(),this.options=t,this._context=t.context??null,this._orientation=this.options.orientation??0,this._triggerKeys={keyDown:this.options.triggerKeys?.keyDown??!1,keys:this.options.triggerKeys?.keys??[3,10]},this._hoverDelegate=t.hoverDelegate??this._register(qa()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new io,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(o=>this._onDidRun.fire(o))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(o=>this._onWillRun.fire(o))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar";let n,i;switch(this._orientation){case 0:n=[15],i=[17];break;case 1:n=[16],i=[18],this.domNode.className+=" vertical";break}this._register(K(this.domNode,se.KEY_DOWN,o=>{let s=new ht(o),a=!0,l=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;n&&(s.equals(n[0])||s.equals(n[1]))?a=this.focusPrevious():i&&(s.equals(i[0])||s.equals(i[1]))?a=this.focusNext():s.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():s.equals(14)?a=this.focusFirst():s.equals(13)?a=this.focusLast():s.equals(2)&&l instanceof Ii&&l.trapsArrowNavigation?a=this.focusNext(void 0,!0):this.isTriggerKeyEvent(s)?this._triggerKeys.keyDown?this.doTrigger(s):this.triggerKeyDown=!0:a=!1,a&&(s.preventDefault(),s.stopPropagation())})),this._register(K(this.domNode,se.KEY_UP,o=>{let s=new ht(o);this.isTriggerKeyEvent(s)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(s)),s.preventDefault(),s.stopPropagation()):(s.equals(2)||s.equals(1026)||s.equals(16)||s.equals(18)||s.equals(15)||s.equals(17))&&this.updateFocusedItem()})),this.focusTracker=this._register(co(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(cs()===this.domNode||!_r(cs(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setAriaLabel(e){e?this.actionsList.setAttribute("aria-label",e):this.actionsList.removeAttribute("aria-label")}setFocusable(e){if(this.focusable=e,this.focusable){let t=this.viewItems.find(n=>n instanceof Ii&&n.isEnabled());t instanceof Ii&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof Ii&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){let t=this.actionsList.children[e];if(_r(cs(),t)){this.focusedItem=e,this.viewItems[this.focusedItem]?.showHover?.();break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(t=>this._onDidRun.fire(t))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(t=>this._onWillRun.fire(t))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}hasAction(e){return this.viewItems.findIndex(t=>t.action.id===e.id)!==-1}getAction(e){if(typeof e=="number")return this.viewItems[e]?.action;if(An(e)){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let t=0;t<this.actionsList.childNodes.length;t++)if(this.actionsList.childNodes[t]===e)return this.viewItems[t].action}}push(e,t={}){let n=Array.isArray(e)?e:[e],i=fr(t.index)?t.index:null;n.forEach(o=>{let s=document.createElement("li");s.className="action-item",s.setAttribute("role","presentation");let a,l={hoverDelegate:this._hoverDelegate,...t,isTabList:this.options.ariaRole==="tablist"};this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(o,l)),a||(a=new rd(this.context,o,l)),this.options.allowContextMenu||this.viewItemDisposables.set(a,K(s,se.CONTEXT_MENU,d=>{We.stop(d,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(s),this.focusable&&a instanceof Ii&&this.viewItems.length===0&&a.setFocusable(!0),i===null||i<0||i>=this.actionsList.children.length?(this.actionsList.appendChild(s),this.viewItems.push(a)):(this.actionsList.insertBefore(s,this.actionsList.children[i]),this.viewItems.splice(i,0,a),i++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}getWidth(e){if(e>=0&&e<this.actionsList.children.length){let t=this.actionsList.children.item(e);if(t)return t.clientWidth}return 0}getHeight(e){if(e>=0&&e<this.actionsList.children.length){let t=this.actionsList.children.item(e);if(t)return t.clientHeight}return 0}pull(e){e>=0&&e<this.viewItems.length&&(this.actionsList.childNodes[e].remove(),this.viewItemDisposables.deleteAndDispose(this.viewItems[e]),vt(this.viewItems.splice(e,1)),this.refreshRole())}clear(){this.isEmpty()||(this.viewItems=vt(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),pn(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){let i=this.viewItems.findIndex(o=>o.isEnabled());this.focusedItem=i===-1?void 0:i,this.updateFocus(void 0,void 0,!0)}else n!==void 0&&(this.focusedItem=n),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e,t){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;let n=this.focusedItem,i;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=n,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,i=this.viewItems[this.focusedItem]}while(this.focusedItem!==n&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===Yt.ID));return this.updateFocus(void 0,void 0,t),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;let t=this.focusedItem,n;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===Yt.ID));return this.updateFocus(!0),!0}updateFocus(e,t,n=!1){typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&this.viewItems[this.previouslyFocusedItem]?.blur();let i=this.focusedItem!==void 0?this.viewItems[this.focusedItem]:void 0;if(i){let o=!0;tm(i.focus)||(o=!1),this.options.focusOnlyEnabledItems&&tm(i.isEnabled)&&!i.isEnabled()&&(o=!1),i.action.id===Yt.ID&&(o=!1),o?(n||this.previouslyFocusedItem!==this.focusedItem)&&(i.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),o&&i.showHover?.()}}doTrigger(e){if(typeof this.focusedItem>"u")return;let t=this.viewItems[this.focusedItem];if(t instanceof Ii){let n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=vt(this.viewItems),this.getContainer().remove(),super.dispose()}};function Q_(r){if(!r.length)return r;let e=-1;for(let n=0;n<r.length;n++)if(r[n].id!==Yt.ID){e=n;break}if(e===-1)return[];r=r.slice(e);for(let n=r.length-1;n>=0&&r[n].id===Yt.ID;n--)r.splice(n,1);let t=!1;for(let n=r.length-1;n>=0;n--){let i=r[n].id===Yt.ID;i&&!t?r.splice(n,1):i?i&&(t=!1):t=!0}return r}var u7=!1;var p7=4,h7=new x;var m7=300,g7=new x;var $g=class{constructor(e){this.el=e}disposables=new Q;get onPointerMove(){return this.disposables.add(new Ue(Le(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new Ue(Le(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}};C([J],$g.prototype,"onPointerMove",1),C([J],$g.prototype,"onPointerUp",1);var jg=class{constructor(e){this.el=e}disposables=new Q;get onPointerMove(){return this.disposables.add(new Ue(this.el,wt.Change)).event}get onPointerUp(){return this.disposables.add(new Ue(this.el,wt.End)).event}dispose(){this.disposables.dispose()}};C([J],jg.prototype,"onPointerMove",1),C([J],jg.prototype,"onPointerUp",1);var Vp=class{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}};C([J],Vp.prototype,"onPointerMove",1),C([J],Vp.prototype,"onPointerUp",1);var MB="pointer-events-disabled",Yg=class r extends P{el;layoutProvider;orientation;size;hoverDelay=m7;hoverDelayer=this._register(new so(this.hoverDelay));_state=3;onDidEnablementChange=this._register(new x);_onDidStart=this._register(new x);_onDidChange=this._register(new x);_onDidReset=this._register(new x);_onDidEnd=this._register(new x);orthogonalStartSashDisposables=this._register(new Q);_orthogonalStartSash;orthogonalStartDragHandleDisposables=this._register(new Q);_orthogonalStartDragHandle;orthogonalEndSashDisposables=this._register(new Q);_orthogonalEndSash;orthogonalEndDragHandleDisposables=this._register(new Q);_orthogonalEndDragHandle;get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}onDidStart=this._onDidStart.event;onDidChange=this._onDidChange.event;onDidReset=this._onDidReset.event;onDidEnd=this._onDidEnd.event;linkedSash=void 0;set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){let t=n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=Ie(this.el,ue(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(ie(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new Ue(this._orthogonalStartDragHandle,"mouseenter")).event(()=>r.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new Ue(this._orthogonalStartDragHandle,"mouseleave")).event(()=>r.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){let t=n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=Ie(this.el,ue(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(ie(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new Ue(this._orthogonalEndDragHandle,"mouseenter")).event(()=>r.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new Ue(this._orthogonalEndDragHandle,"mouseleave")).event(()=>r.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,n){super(),this.el=Ie(e,ue(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),ze&&this.el.classList.add("mac");let i=this._register(new Ue(this.el,"mousedown")).event;this._register(i(p=>this.onPointerStart(p,new $g(e)),this));let o=this._register(new Ue(this.el,"dblclick")).event;this._register(o(this.onPointerDoublePress,this));let s=this._register(new Ue(this.el,"mouseenter")).event;this._register(s(()=>r.onMouseEnter(this)));let a=this._register(new Ue(this.el,"mouseleave")).event;this._register(a(()=>r.onMouseLeave(this))),this._register(Zt.addTarget(this.el));let l=this._register(new Ue(this.el,wt.Start)).event;this._register(l(p=>this.onPointerStart(p,new jg(this.el)),this));let d=this._register(new Ue(this.el,wt.Tap)).event,u;this._register(d(p=>{if(u){clearTimeout(u),u=void 0,this.onPointerDoublePress(p);return}clearTimeout(u),u=setTimeout(()=>u=void 0,250)},this)),typeof n.size=="number"?(this.size=n.size,n.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=p7,this._register(h7.event(p=>{this.size=p,this.layout()}))),this._register(g7.event(p=>this.hoverDelay=p)),this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",u7),this.layout()}onPointerStart(e,t){We.stop(e);let n=!1;if(!e.__orthogonalSashEvent){let f=this.getOrthogonalSash(e);f&&(n=!0,e.__orthogonalSashEvent=!0,f.onPointerStart(e,new Vp(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new Vp(t))),!this.state)return;let i=this.el.ownerDocument.getElementsByTagName("iframe");for(let f of i)f.classList.add(MB);let o=e.pageX,s=e.pageY,a=e.altKey,l={startX:o,currentX:o,startY:s,currentY:s,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);let d=sr(this.el),u=()=>{let f="";n?f="all-scroll":this.orientation===1?this.state===1?f="s-resize":this.state===2?f="n-resize":f=ze?"row-resize":"ns-resize":this.state===1?f="e-resize":this.state===2?f="w-resize":f=ze?"col-resize":"ew-resize",d.textContent=`* { cursor: ${f} !important; }`},p=new Q;u(),n||this.onDidEnablementChange.event(u,null,p);let h=f=>{We.stop(f,!1);let g={startX:o,currentX:f.pageX,startY:s,currentY:f.pageY,altKey:a};this._onDidChange.fire(g)},m=f=>{We.stop(f,!1),d.remove(),this.el.classList.remove("active"),this._onDidEnd.fire(),p.dispose();for(let g of i)g.classList.remove(MB)};t.onPointerMove(h,null,p),t.onPointerUp(m,null,p),p.add(t)}onPointerDoublePress(e){let t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&r.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&r.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){r.onMouseLeave(this)}layout(){if(this.orientation===0){let e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{let e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){let t=e.initialTarget??e.target;if(!(!t||!An(t))&&t.classList.contains("orthogonal-drag-handle"))return t.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}};var Wp=class extends Ha{constructor(t,n,i,o){super(t,i,o);this.telemetryService=n}_onTitleAreaUpdate=this._register(new x);onTitleAreaUpdate=this._onTitleAreaUpdate.event;_onDidFocus;get onDidFocus(){return this._onDidFocus||(this._onDidFocus=this.registerFocusTrackEvents().onDidFocus),this._onDidFocus.event}_onDidBlur;get onDidBlur(){return this._onDidBlur||(this._onDidBlur=this.registerFocusTrackEvents().onDidBlur),this._onDidBlur.event}_hasFocus=!1;hasFocus(){return this._hasFocus}registerFocusTrackEvents(){let t=Rt(this.getContainer()),n=this._register(co(t)),i=this._onDidFocus=this._register(new x);this._register(n.onDidFocus(()=>{this._hasFocus=!0,i.fire()}));let o=this._onDidBlur=this._register(new x);return this._register(n.onDidBlur(()=>{this._hasFocus=!1,o.fire()})),{onDidFocus:i,onDidBlur:o}}actionRunner;visible=!1;parent;getTitle(){}create(t){this.parent=t}getContainer(){return this.parent}setVisible(t){this.visible!==!!t&&(this.visible=t)}focus(){}getMenuIds(){return[]}getActions(){return[]}getSecondaryActions(){return[]}getContextMenuActions(){return[]}getActionViewItem(t,n){}getActionsContext(){return null}getActionRunner(){return this.actionRunner||(this.actionRunner=this._register(new io)),this.actionRunner}updateTitleArea(){this._onTitleAreaUpdate.fire()}isVisible(){return this.visible}getControl(){}};var lS=class extends P{_onDidRegister=this._register(new x);onDidRegister=this._onDidRegister.event;_onDidDeregister=this._register(new x);onDidDeregister=this._onDidDeregister.event;composites=[];registerComposite(e){this.compositeById(e.id)||(this.composites.push(e),this._onDidRegister.fire(e))}deregisterComposite(e){let t=this.compositeById(e);t&&(this.composites.splice(this.composites.indexOf(t),1),this._onDidDeregister.fire(t))}getComposite(e){return this.compositeById(e)}getComposites(){return this.composites.slice(0)}compositeById(e){return this.composites.find(t=>t.id===e)}};var f7={separatorBorder:B.transparent};var dS=class{constructor(e,t,n,i){this.container=e;this.view=t;this.disposable=i;typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}_size;set size(e){this._size=e}get size(){return this._size}_cachedVisibleSize=void 0;get cachedVisibleSize(){return this._cachedVisibleSize}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){if(e!==this.visible){e?(this.size=bi(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{this.view.setVisible?.(e)}catch(n){console.error("Splitview: Failed to set visible view"),console.error(n)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(n){console.error("Splitview: Failed to layout view"),console.error(n)}}dispose(){this.disposable.dispose()}},J_=class extends dS{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}},Z_=class extends dS{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}};var Sc;(i=>{i.Distribute={type:"distribute"};function e(o){return{type:"split",index:o}}i.Split=e;function t(o){return{type:"auto",index:o}}i.Auto=t;function n(o){return{type:"invisible",cachedVisibleSize:o}}i.Invisible=n})(Sc||={});var od=class extends P{orientation;el;sashContainer;viewContainer;scrollable;scrollableElement;size=0;layoutContext;_contentSize=0;proportions=void 0;viewItems=[];sashItems=[];sashDragState;state=0;inverseAltBehavior;proportionalLayout;getSashOrthogonalSize;_onDidSashChange=this._register(new x);_onDidSashReset=this._register(new x);_orthogonalStartSash;_orthogonalEndSash;_startSnappingEnabled=!0;_endSnappingEnabled=!0;get contentSize(){return this._contentSize}onDidSashChange=this._onDidSashChange.event;onDidSashReset=this._onDidSashReset.event;onDidScroll;get length(){return this.viewItems.length}get minimumSize(){return this.viewItems.reduce((e,t)=>e+t.minimumSize,0)}get maximumSize(){return this.length===0?Number.POSITIVE_INFINITY:this.viewItems.reduce((e,t)=>e+t.maximumSize,0)}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(let t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(let t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}get sashes(){return this.sashItems.map(e=>e.sash)}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){super(),this.orientation=t.orientation??0,this.inverseAltBehavior=t.inverseAltBehavior??!1,this.proportionalLayout=t.proportionalLayout??!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=Ie(this.el,ue(".sash-container")),this.viewContainer=ue(".split-view-container"),this.scrollable=this._register(new Pa({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:i=>rr(Le(this.el),i)})),this.scrollableElement=this._register(new Mp(this.viewContainer,{vertical:this.orientation===0?t.scrollbarVisibility??1:2,horizontal:this.orientation===1?t.scrollbarVisibility??1:2},this.scrollable));let n=this._register(new Ue(this.viewContainer,"scroll")).event;this._register(n(i=>{let o=this.scrollableElement.getScrollPosition(),s=Math.abs(this.viewContainer.scrollLeft-o.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,a=Math.abs(this.viewContainer.scrollTop-o.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(s!==void 0||a!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:s,scrollTop:a})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(i=>{i.scrollTopChanged&&(this.viewContainer.scrollTop=i.scrollTop),i.scrollLeftChanged&&(this.viewContainer.scrollLeft=i.scrollLeft)})),Ie(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||f7),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((i,o)=>{let s=jn(i.visible)||i.visible?i.size:{type:"invisible",cachedVisibleSize:i.size},a=i.view;this.doAddView(a,s,o,!0)}),this._contentSize=this.viewItems.reduce((i,o)=>i+o.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,i){this.doAddView(e,t,n,i)}removeView(e,t){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");if(this.state!==0)throw new Error("Cant modify splitview");this.state=1;try{t?.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index});let n=t?.type==="split"?this.viewItems[t.index]:void 0,i=this.viewItems.splice(e,1)[0];if(n&&(n.size+=i.size),this.viewItems.length>=1){let s=Math.max(e-1,0);this.sashItems.splice(s,1)[0].disposable.dispose()}this.relayout(),t?.type==="distribute"&&this.distributeViewSizes();let o=i.view;return i.dispose(),o}finally{this.state=0}}removeAllViews(){if(this.state!==0)throw new Error("Cant modify splitview");this.state=1;try{let e=this.viewItems.splice(0,this.viewItems.length);for(let n of e)n.dispose();let t=this.sashItems.splice(0,this.sashItems.length);for(let n of t)n.disposable.dispose();return this.relayout(),e.map(n=>n.view)}finally{this.state=0}}moveView(e,t){if(this.state!==0)throw new Error("Cant modify splitview");let n=this.getViewCachedVisibleSize(e),i=typeof n>"u"?this.getViewSize(e):Sc.Invisible(n),o=this.removeView(e);this.addView(o,i,t)}swapViews(e,t){if(this.state!==0)throw new Error("Cant modify splitview");if(e>t)return this.swapViews(t,e);let n=this.getViewSize(e),i=this.getViewSize(t),o=this.removeView(t),s=this.removeView(e);this.addView(o,n,e),this.addView(s,i,t)}isViewVisible(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].visible}setViewVisible(e,t){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");this.viewItems[e].setVisible(t),this.distributeEmptySpace(e),this.layoutViews(),this.saveProportions()}getViewCachedVisibleSize(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].cachedVisibleSize}layout(e,t){let n=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let i=0;for(let o=0;o<this.viewItems.length;o++){let s=this.viewItems[o],a=this.proportions[o];typeof a=="number"?i+=a:e-=s.size}for(let o=0;o<this.viewItems.length;o++){let s=this.viewItems[o],a=this.proportions[o];typeof a=="number"&&i>0&&(s.size=bi(Math.round(a*e/i),s.minimumSize,s.maximumSize))}}else{let i=$n(this.viewItems.length),o=i.filter(a=>this.viewItems[a].priority===1),s=i.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,o,s)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0))}onSashStart({sash:e,start:t,alt:n}){for(let a of this.viewItems)a.enabled=!1;let i=this.sashItems.findIndex(a=>a.sash===e),o=Ti(K(this.el.ownerDocument.body,"keydown",a=>s(this.sashDragState.current,a.altKey)),K(this.el.ownerDocument.body,"keyup",()=>s(this.sashDragState.current,!1))),s=(a,l)=>{let d=this.viewItems.map(f=>f.size),u=Number.NEGATIVE_INFINITY,p=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(i===this.sashItems.length-1){let g=this.viewItems[i];u=(g.minimumSize-g.size)/2,p=(g.maximumSize-g.size)/2}else{let g=this.viewItems[i+1];u=(g.size-g.maximumSize)/2,p=(g.size-g.minimumSize)/2}let h,m;if(!l){let f=$n(i,-1),g=$n(i+1,this.viewItems.length),y=f.reduce((M,H)=>M+(this.viewItems[H].minimumSize-d[H]),0),T=f.reduce((M,H)=>M+(this.viewItems[H].viewMaximumSize-d[H]),0),E=g.length===0?Number.POSITIVE_INFINITY:g.reduce((M,H)=>M+(d[H]-this.viewItems[H].minimumSize),0),D=g.length===0?Number.NEGATIVE_INFINITY:g.reduce((M,H)=>M+(d[H]-this.viewItems[H].viewMaximumSize),0),_=Math.max(y,D),O=Math.min(E,T),G=this.findFirstSnapIndex(f),Z=this.findFirstSnapIndex(g);if(typeof G=="number"){let M=this.viewItems[G],H=Math.floor(M.viewMinimumSize/2);h={index:G,limitDelta:M.visible?_-H:_+H,size:M.size}}if(typeof Z=="number"){let M=this.viewItems[Z],H=Math.floor(M.viewMinimumSize/2);m={index:Z,limitDelta:M.visible?O+H:O-H,size:M.size}}}this.sashDragState={start:a,current:a,index:i,sizes:d,minDelta:u,maxDelta:p,alt:l,snapBefore:h,snapAfter:m,disposable:o}};s(t,n)}onSashChange({current:e}){let{index:t,start:n,sizes:i,alt:o,minDelta:s,maxDelta:a,snapBefore:l,snapAfter:d}=this.sashDragState;this.sashDragState.current=e;let u=e-n,p=this.resize(t,u,i,void 0,void 0,s,a,l,d);if(o){let h=t===this.sashItems.length-1,m=this.viewItems.map(D=>D.size),f=h?t:t+1,g=this.viewItems[f],y=g.size-g.maximumSize,T=g.size-g.minimumSize,E=h?t-1:t+1;this.resize(E,-p,m,void 0,void 0,y,T)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(let t of this.viewItems)t.enabled=!0}onViewChange(e,t){let n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=bi(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){if(this.state!==0)throw new Error("Cant modify splitview");this.state=1;try{let n=$n(this.viewItems.length).filter(a=>a!==e),i=[...n.filter(a=>this.viewItems[a].priority===1),e],o=n.filter(a=>this.viewItems[a].priority===2),s=this.viewItems[e];t=Math.round(t),t=bi(t,s.minimumSize,Math.min(s.maximumSize,this.size)),s.size=t,this.relayout(i,o)}finally{this.state=0}}}isViewExpanded(e){if(e<0||e>=this.viewItems.length)return!1;for(let t of this.viewItems)if(t!==this.viewItems[e]&&t.size>t.minimumSize)return!1;return!0}distributeViewSizes(){let e=[],t=0;for(let a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);let n=Math.floor(t/e.length);for(let a of e)a.size=bi(n,a.minimumSize,a.maximumSize);let i=$n(this.viewItems.length),o=i.filter(a=>this.viewItems[a].priority===1),s=i.filter(a=>this.viewItems[a].priority===2);this.relayout(o,s)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,i){if(this.state!==0)throw new Error("Cant modify splitview");this.state=1;try{let o=ue(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(o):this.viewContainer.insertBefore(o,this.viewContainer.children.item(n));let s=e.onDidChange(h=>this.onViewChange(u,h)),a=ie(()=>o.remove()),l=Ti(s,a),d;typeof t=="number"?d=t:(t.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index}),t.type==="split"?d=this.getViewSize(t.index)/2:t.type==="invisible"?d={cachedVisibleSize:t.cachedVisibleSize}:d=e.minimumSize);let u=this.orientation===0?new J_(o,e,d,l):new Z_(o,e,d,l);if(this.viewItems.splice(n,0,u),this.viewItems.length>1){let h={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},m=this.orientation===0?new Yg(this.sashContainer,{getHorizontalSashTop:M=>this.getSashPosition(M),getHorizontalSashWidth:this.getSashOrthogonalSize},{...h,orientation:1}):new Yg(this.sashContainer,{getVerticalSashLeft:M=>this.getSashPosition(M),getVerticalSashHeight:this.getSashOrthogonalSize},{...h,orientation:0}),f=this.orientation===0?M=>({sash:m,start:M.startY,current:M.currentY,alt:M.altKey}):M=>({sash:m,start:M.startX,current:M.currentX,alt:M.altKey}),y=N.map(m.onDidStart,f)(this.onSashStart,this),E=N.map(m.onDidChange,f)(this.onSashChange,this),_=N.map(m.onDidEnd,()=>this.sashItems.findIndex(M=>M.sash===m))(this.onSashEnd,this),O=m.onDidReset(()=>{let M=this.sashItems.findIndex(Fe=>Fe.sash===m),H=$n(M,-1),oe=$n(M+1,this.viewItems.length),ee=this.findFirstSnapIndex(H),re=this.findFirstSnapIndex(oe);typeof ee=="number"&&!this.viewItems[ee].visible||typeof re=="number"&&!this.viewItems[re].visible||this._onDidSashReset.fire(M)}),G=Ti(y,E,_,O,m),Z={sash:m,disposable:G};this.sashItems.splice(n-1,0,Z)}o.appendChild(e.element);let p;typeof t!="number"&&t.type==="split"&&(p=[t.index]),i||this.relayout([n],p),!i&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}finally{this.state=0}}relayout(e,t){let n=this.viewItems.reduce((i,o)=>i+o.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(u=>u.size),i,o,s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,d){if(e<0||e>=this.viewItems.length)return 0;let u=$n(e,-1),p=$n(e+1,this.viewItems.length);if(o)for(let Z of o)Tb(u,Z),Tb(p,Z);if(i)for(let Z of i)zh(u,Z),zh(p,Z);let h=u.map(Z=>this.viewItems[Z]),m=u.map(Z=>n[Z]),f=p.map(Z=>this.viewItems[Z]),g=p.map(Z=>n[Z]),y=u.reduce((Z,M)=>Z+(this.viewItems[M].minimumSize-n[M]),0),T=u.reduce((Z,M)=>Z+(this.viewItems[M].maximumSize-n[M]),0),E=p.length===0?Number.POSITIVE_INFINITY:p.reduce((Z,M)=>Z+(n[M]-this.viewItems[M].minimumSize),0),D=p.length===0?Number.NEGATIVE_INFINITY:p.reduce((Z,M)=>Z+(n[M]-this.viewItems[M].maximumSize),0),_=Math.max(y,D,s),O=Math.min(E,T,a),G=!1;if(l){let Z=this.viewItems[l.index],M=t>=l.limitDelta;G=M!==Z.visible,Z.setVisible(M,l.size)}if(!G&&d){let Z=this.viewItems[d.index],M=t<d.limitDelta;G=M!==Z.visible,Z.setVisible(M,d.size)}if(G)return this.resize(e,t,n,i,o,s,a);t=bi(t,_,O);for(let Z=0,M=t;Z<h.length;Z++){let H=h[Z],oe=bi(m[Z]+M,H.minimumSize,H.maximumSize),ee=oe-m[Z];M-=ee,H.size=oe}for(let Z=0,M=t;Z<f.length;Z++){let H=f[Z],oe=bi(g[Z]-M,H.minimumSize,H.maximumSize),ee=oe-g[Z];M+=ee,H.size=oe}return t}distributeEmptySpace(e){let t=this.viewItems.reduce((a,l)=>a+l.size,0),n=this.size-t,i=$n(this.viewItems.length-1,-1),o=i.filter(a=>this.viewItems[a].priority===1),s=i.filter(a=>this.viewItems[a].priority===2);for(let a of s)Tb(i,a);for(let a of o)zh(i,a);typeof e=="number"&&zh(i,e);for(let a=0;n!==0&&a<i.length;a++){let l=this.viewItems[i[a]],d=bi(l.size+n,l.minimumSize,l.maximumSize),u=d-l.size;n-=u,l.size=d}}layoutViews(){this._contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(let t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1,t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;let n=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),i=[...this.viewItems].reverse();e=!1;let o=i.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;let s=i.map(l=>e=l.maximumSize-l.size>0||e).reverse(),a=0;for(let l=0;l<this.sashItems.length;l++){let{sash:d}=this.sashItems[l],u=this.viewItems[l];a+=u.size;let p=!(t[l]&&s[l+1]),h=!(n[l]&&o[l+1]);if(p&&h){let m=$n(l,-1),f=$n(l+1,this.viewItems.length),g=this.findFirstSnapIndex(m),y=this.findFirstSnapIndex(f),T=typeof g=="number"&&!this.viewItems[g].visible,E=typeof y=="number"&&!this.viewItems[y].visible;T&&o[l]&&(a>0||this.startSnappingEnabled)?d.state=1:E&&t[l]&&(a<this._contentSize||this.endSnappingEnabled)?d.state=2:d.state=0}else p&&!h?d.state=1:!p&&h?d.state=2:d.state=3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(let t of e){let n=this.viewItems[t];if(n.visible&&n.snap)return t}for(let t of e){let n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}areViewsDistributed(){let e,t;for(let n of this.viewItems)if(e=e===void 0?n.size:Math.min(e,n.size),t=t===void 0?n.size:Math.max(t,n.size),t-e>2)return!1;return!0}dispose(){this.sashDragState?.disposable.dispose(),vt(this.viewItems),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[],super.dispose()}};var g6e={separatorBorder:B.transparent};var v7;(i=>{i.Distribute={type:"distribute"},i.Split={type:"split"},i.Auto={type:"auto"};function n(o){return{type:"invisible",cachedVisibleSize:o}}i.Invisible=n})(v7||={});async function FB(r){let e=navigator.usb;if(!e)return;let t=await e.requestDevice({filters:r?.filters??[]});if(t)return{deviceClass:t.deviceClass,deviceProtocol:t.deviceProtocol,deviceSubclass:t.deviceSubclass,deviceVersionMajor:t.deviceVersionMajor,deviceVersionMinor:t.deviceVersionMinor,deviceVersionSubminor:t.deviceVersionSubminor,manufacturerName:t.manufacturerName,productId:t.productId,productName:t.productName,serialNumber:t.serialNumber,usbVersionMajor:t.usbVersionMajor,usbVersionMinor:t.usbVersionMinor,usbVersionSubminor:t.usbVersionSubminor,vendorId:t.vendorId}}async function BB(r){let e=navigator.serial;if(!e)return;let t=await e.requestPort({filters:r?.filters??[]});if(!t)return;let n=t.getInfo();return{usbVendorId:n.usbVendorId,usbProductId:n.usbProductId}}async function UB(r){let e=navigator.hid;if(!e)return;let t=await e.requestDevice({filters:r?.filters??[]});if(!t.length)return;let n=t[0];return{opened:n.opened,vendorId:n.vendorId,productId:n.productId,productName:n.productName,collections:n.collections}}var hs=A("openerService");function cS(r){let e,t=/^L?(\d+)(?:,(\d+))?(-L?(\d+)(?:,(\d+))?)?/.exec(r.fragment);return t&&(e={startLineNumber:parseInt(t[1]),startColumn:t[2]?parseInt(t[2]):1,endLineNumber:t[4]?parseInt(t[4]):void 0,endColumn:t[4]?t[5]?parseInt(t[5]):1:void 0},r=r.with({fragment:""})),{selection:e,uri:r}}var uo=Qt;var e1=60,t1=e1*60,Xg=t1*24,VB=Xg*7,WB=Xg*30,zB=Xg*365;function n1(r,e,t,n){typeof r!="number"&&(r=r.getTime());let i=Math.round((new Date().getTime()-r)/1e3);if(i<-30)return c("date.fromNow.in","in {0}",n1(new Date().getTime()+i*1e3,!1));if(!n&&i<30)return c("date.fromNow.now","now");let o;return i<e1?(o=i,e?o===1?t?c("date.fromNow.seconds.singular.ago.fullWord","{0} second ago",o):c("date.fromNow.seconds.singular.ago","{0} sec ago",o):t?c("date.fromNow.seconds.plural.ago.fullWord","{0} seconds ago",o):c("date.fromNow.seconds.plural.ago","{0} secs ago",o):o===1?t?c("date.fromNow.seconds.singular.fullWord","{0} second",o):c("date.fromNow.seconds.singular","{0} sec",o):t?c("date.fromNow.seconds.plural.fullWord","{0} seconds",o):c("date.fromNow.seconds.plural","{0} secs",o)):i<t1?(o=Math.floor(i/e1),e?o===1?t?c("date.fromNow.minutes.singular.ago.fullWord","{0} minute ago",o):c("date.fromNow.minutes.singular.ago","{0} min ago",o):t?c("date.fromNow.minutes.plural.ago.fullWord","{0} minutes ago",o):c("date.fromNow.minutes.plural.ago","{0} mins ago",o):o===1?t?c("date.fromNow.minutes.singular.fullWord","{0} minute",o):c("date.fromNow.minutes.singular","{0} min",o):t?c("date.fromNow.minutes.plural.fullWord","{0} minutes",o):c("date.fromNow.minutes.plural","{0} mins",o)):i<Xg?(o=Math.floor(i/t1),e?o===1?t?c("date.fromNow.hours.singular.ago.fullWord","{0} hour ago",o):c("date.fromNow.hours.singular.ago","{0} hr ago",o):t?c("date.fromNow.hours.plural.ago.fullWord","{0} hours ago",o):c("date.fromNow.hours.plural.ago","{0} hrs ago",o):o===1?t?c("date.fromNow.hours.singular.fullWord","{0} hour",o):c("date.fromNow.hours.singular","{0} hr",o):t?c("date.fromNow.hours.plural.fullWord","{0} hours",o):c("date.fromNow.hours.plural","{0} hrs",o)):i<VB?(o=Math.floor(i/Xg),e?o===1?c("date.fromNow.days.singular.ago","{0} day ago",o):c("date.fromNow.days.plural.ago","{0} days ago",o):o===1?c("date.fromNow.days.singular","{0} day",o):c("date.fromNow.days.plural","{0} days",o)):i<WB?(o=Math.floor(i/VB),e?o===1?t?c("date.fromNow.weeks.singular.ago.fullWord","{0} week ago",o):c("date.fromNow.weeks.singular.ago","{0} wk ago",o):t?c("date.fromNow.weeks.plural.ago.fullWord","{0} weeks ago",o):c("date.fromNow.weeks.plural.ago","{0} wks ago",o):o===1?t?c("date.fromNow.weeks.singular.fullWord","{0} week",o):c("date.fromNow.weeks.singular","{0} wk",o):t?c("date.fromNow.weeks.plural.fullWord","{0} weeks",o):c("date.fromNow.weeks.plural","{0} wks",o)):i<zB?(o=Math.floor(i/WB),e?o===1?t?c("date.fromNow.months.singular.ago.fullWord","{0} month ago",o):c("date.fromNow.months.singular.ago","{0} mo ago",o):t?c("date.fromNow.months.plural.ago.fullWord","{0} months ago",o):c("date.fromNow.months.plural.ago","{0} mos ago",o):o===1?t?c("date.fromNow.months.singular.fullWord","{0} month",o):c("date.fromNow.months.singular","{0} mo",o):t?c("date.fromNow.months.plural.fullWord","{0} months",o):c("date.fromNow.months.plural","{0} mos",o)):(o=Math.floor(i/zB),e?o===1?t?c("date.fromNow.years.singular.ago.fullWord","{0} year ago",o):c("date.fromNow.years.singular.ago","{0} yr ago",o):t?c("date.fromNow.years.plural.ago.fullWord","{0} years ago",o):c("date.fromNow.years.plural.ago","{0} yrs ago",o):o===1?t?c("date.fromNow.years.singular.fullWord","{0} year",o):c("date.fromNow.years.singular","{0} yr",o):t?c("date.fromNow.years.plural.fullWord","{0} years",o):c("date.fromNow.years.plural","{0} yrs",o))}function HB(r){return r.getFullYear()+"-"+String(r.getMonth()+1).padStart(2,"0")+"-"+String(r.getDate()).padStart(2,"0")+"T"+String(r.getHours()).padStart(2,"0")+":"+String(r.getMinutes()).padStart(2,"0")+":"+String(r.getSeconds()).padStart(2,"0")+"."+(r.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}var Qg=/^([^.]+\..+)[:=](.+)$/,Bt=class{constructor(e,t,n){this._args=e;this.paths=t;this.productService=n}get appRoot(){return Ab(yr.asFileUri("").fsPath)}get userHome(){return W.file(this.paths.homeDir)}get userDataPath(){return this.paths.userDataDir}get appSettingsHome(){return W.file(Mi(this.userDataPath,"User"))}get tmpDir(){return W.file(this.paths.tmpDir)}get cacheHome(){return W.file(this.userDataPath)}get stateResource(){return Be(this.appSettingsHome,"globalStorage","storage.json")}get userRoamingDataHome(){return this.appSettingsHome.with({scheme:le.vscodeUserData})}get userDataSyncHome(){return Be(this.appSettingsHome,"sync")}get logsHome(){if(!this.args.logsPath){let e=HB(new Date).replace(/-|:|\.\d+Z$/g,"");this.args.logsPath=Mi(this.userDataPath,"logs",e)}return W.file(this.args.logsPath)}get sync(){return this.args.sync}get machineSettingsResource(){return Be(W.file(Mi(this.userDataPath,"Machine")),"settings.json")}get workspaceStorageHome(){return Be(this.appSettingsHome,"workspaceStorage")}get localHistoryHome(){return Be(this.appSettingsHome,"History")}get keyboardLayoutResource(){return Be(this.userRoamingDataHome,"keyboardLayout.json")}get argvResource(){let e=Ea.VSCODE_PORTABLE;return e?W.file(Mi(e,"argv.json")):Be(this.userHome,this.productService.dataFolderName,"argv.json")}get isExtensionDevelopment(){return!!this.args.extensionDevelopmentPath}get untitledWorkspacesHome(){return W.file(Mi(this.userDataPath,"Workspaces"))}get builtinExtensionsPath(){let e=this.args["builtin-extensions-dir"];return e?uu(e):So(Mi(yr.asFileUri("").fsPath,"..","extensions"))}get extensionsDownloadLocation(){let e=this.args["extensions-download-dir"];return e?W.file(uu(e)):W.file(Mi(this.userDataPath,"CachedExtensionVSIXs"))}get extensionsPath(){let e=this.args["extensions-dir"];if(e)return uu(e);let t=Ea.VSCODE_EXTENSIONS;if(t)return t;let n=Ea.VSCODE_PORTABLE;return n?Mi(n,"extensions"):Be(this.userHome,this.productService.dataFolderName,"extensions").fsPath}get extensionDevelopmentLocationURI(){let e=this.args.extensionDevelopmentPath;if(Array.isArray(e))return e.map(t=>/^[^:/?#]+?:\/\//.test(t)?W.parse(t):W.file(So(t)))}get extensionDevelopmentKind(){return this.args.extensionDevelopmentKind?.map(e=>e==="ui"||e==="workspace"||e==="web"?e:"workspace")}get extensionTestsLocationURI(){let e=this.args.extensionTestsPath;if(e)return/^[^:/?#]+?:\/\//.test(e)?W.parse(e):W.file(So(e))}get disableExtensions(){if(this.args["disable-extensions"])return!0;let e=this.args["disable-extension"];if(e){if(typeof e=="string")return[e];if(Array.isArray(e)&&e.length>0)return e}return!1}get debugExtensionHost(){return y7(this.args,this.isBuilt)}get debugRenderer(){return!!this.args.debugRenderer}get isBuilt(){return!Ea.VSCODE_DEV}get verbose(){return!!this.args.verbose}get logLevel(){return this.args.log?.find(e=>!Qg.test(e))}get extensionLogLevel(){let e=[];for(let t of this.args.log||[]){let n=Qg.exec(t);n&&n[1]&&n[2]&&e.push([n[1],n[2]])}return e.length?e:void 0}get serviceMachineIdResource(){return Be(W.file(this.userDataPath),"machineid")}get crashReporterId(){return this.args["crash-reporter-id"]}get crashReporterDirectory(){return this.args["crash-reporter-directory"]}get disableTelemetry(){return!!this.args["disable-telemetry"]}get disableWorkspaceTrust(){return!!this.args["disable-workspace-trust"]}get useInMemorySecretStorage(){return!!this.args["use-inmemory-secretstorage"]}get policyFile(){if(this.args["__enable-file-policy"]){let e=Ea.VSCODE_PORTABLE;return e?W.file(Mi(e,"policy.json")):Be(this.userHome,this.productService.dataFolderName,"policy.json")}}editSessionId=this.args.editSessionId;get continueOn(){return this.args.continueOn}set continueOn(e){this.args.continueOn=e}get args(){return this._args}};C([J],Bt.prototype,"appRoot",1),C([J],Bt.prototype,"userHome",1),C([J],Bt.prototype,"userDataPath",1),C([J],Bt.prototype,"appSettingsHome",1),C([J],Bt.prototype,"tmpDir",1),C([J],Bt.prototype,"cacheHome",1),C([J],Bt.prototype,"stateResource",1),C([J],Bt.prototype,"userRoamingDataHome",1),C([J],Bt.prototype,"userDataSyncHome",1),C([J],Bt.prototype,"sync",1),C([J],Bt.prototype,"machineSettingsResource",1),C([J],Bt.prototype,"workspaceStorageHome",1),C([J],Bt.prototype,"localHistoryHome",1),C([J],Bt.prototype,"keyboardLayoutResource",1),C([J],Bt.prototype,"argvResource",1),C([J],Bt.prototype,"isExtensionDevelopment",1),C([J],Bt.prototype,"untitledWorkspacesHome",1),C([J],Bt.prototype,"builtinExtensionsPath",1),C([J],Bt.prototype,"extensionsPath",1),C([J],Bt.prototype,"extensionDevelopmentLocationURI",1),C([J],Bt.prototype,"extensionDevelopmentKind",1),C([J],Bt.prototype,"extensionTestsLocationURI",1),C([J],Bt.prototype,"debugExtensionHost",1),C([J],Bt.prototype,"logLevel",1),C([J],Bt.prototype,"extensionLogLevel",1),C([J],Bt.prototype,"serviceMachineIdResource",1),C([J],Bt.prototype,"disableTelemetry",1),C([J],Bt.prototype,"disableWorkspaceTrust",1),C([J],Bt.prototype,"useInMemorySecretStorage",1),C([J],Bt.prototype,"policyFile",1);function y7(r,e){return I7(r["inspect-extensions"],r["inspect-brk-extensions"],5870,e,r.debugId,r.extensionEnvironment)}function I7(r,e,t,n,i,o){let a=Number(e||r)||(n?null:t),l=a?!!e:!1,d;if(o)try{d=JSON.parse(o)}catch{}return{port:a,break:l,debugId:i,env:d}}var KB=Qt,mt=class{constructor(e,t,n,i){this.workspaceId=e;this.logsHome=t;this.options=n;this.productService=i;if(n.workspaceProvider&&Array.isArray(n.workspaceProvider.payload))try{this.payload=new Map(n.workspaceProvider.payload)}catch(o){Ze(o)}}get remoteAuthority(){return this.options.remoteAuthority}get expectsResolverExtension(){return!!this.options.remoteAuthority?.includes("+")&&!this.options.webSocketFactory}get isBuilt(){return!!this.productService.commit}get logLevel(){let e=this.payload?.get("logLevel");return e?e.split(",").find(t=>!Qg.test(t)):this.options.developmentOptions?.logLevel!==void 0?dI(this.options.developmentOptions?.logLevel):void 0}get extensionLogLevel(){let e=this.payload?.get("logLevel");if(e){let t=[];for(let n of e.split(",")){let i=Qg.exec(n);i&&i[1]&&i[2]&&t.push([i[1],i[2]])}return t.length?t:void 0}return this.options.developmentOptions?.extensionLogLevel!==void 0?this.options.developmentOptions?.extensionLogLevel.map(([t,n])=>[t,dI(n)]):void 0}get profDurationMarkers(){let e=this.payload?.get("profDurationMarkers");if(e){let t=[];for(let n of e.split(","))t.push(n);return t.length===2?t:void 0}}get windowLogsPath(){return this.logsHome}get logFile(){return Be(this.windowLogsPath,"window.log")}get userRoamingDataHome(){return W.file("/User").with({scheme:le.vscodeUserData})}get argvResource(){return Be(this.userRoamingDataHome,"argv.json")}get cacheHome(){return Be(this.userRoamingDataHome,"caches")}get workspaceStorageHome(){return Be(this.userRoamingDataHome,"workspaceStorage")}get localHistoryHome(){return Be(this.userRoamingDataHome,"History")}get stateResource(){return Be(this.userRoamingDataHome,"State","storage.json")}get userDataSyncHome(){return Be(this.userRoamingDataHome,"sync",this.workspaceId)}get sync(){}get keyboardLayoutResource(){return Be(this.userRoamingDataHome,"keyboardLayout.json")}get untitledWorkspacesHome(){return Be(this.userRoamingDataHome,"Workspaces")}get serviceMachineIdResource(){return Be(this.userRoamingDataHome,"machineid")}get extHostLogsPath(){return Be(this.logsHome,"exthost")}get extHostTelemetryLogFile(){return Be(this.extHostLogsPath,"extensionTelemetry.log")}extensionHostDebugEnvironment=void 0;get debugExtensionHost(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.params}get isExtensionDevelopment(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.isExtensionDevelopment}get extensionDevelopmentLocationURI(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionDevelopmentLocationURI}get extensionDevelopmentLocationKind(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionDevelopmentKind}get extensionTestsLocationURI(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionTestsLocationURI}get extensionEnabledProposedApi(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionEnabledProposedApi}get debugRenderer(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.debugRenderer}get enableSmokeTestDriver(){return this.options.developmentOptions?.enableSmokeTestDriver}get disableExtensions(){return this.payload?.get("disableExtensions")==="true"}get enableExtensions(){return this.options.enabledExtensions}get webviewExternalEndpoint(){let e=this.options.webviewEndpoint||this.productService.webviewContentExternalBaseUrlTemplate||"https://{{uuid}}.vscode-cdn.net/{{quality}}/{{commit}}/out/vs/workbench/contrib/webview/browser/pre/",t=this.payload?.get("webviewExternalEndpointCommit");return e.replace("{{commit}}",t??this.productService.commit??"ef65ac1ba57f57f2a3961bfe94aa20481caca4c6").replace("{{quality}}",(t?"insider":this.productService.quality)??"insider")}get extensionTelemetryLogResource(){return Be(this.logsHome,"extensionTelemetry.log")}get disableTelemetry(){return!1}get verbose(){return this.payload?.get("verbose")==="true"}get logExtensionHostCommunication(){return this.payload?.get("logExtensionHostCommunication")==="true"}get skipReleaseNotes(){return this.payload?.get("skipReleaseNotes")==="true"}get skipWelcome(){return this.payload?.get("skipWelcome")==="true"}get disableWorkspaceTrust(){return!this.options.enableWorkspaceTrust}get profile(){return this.payload?.get("profile")}editSessionId=this.options.editSessionId;payload;resolveExtensionHostDebugEnvironment(){let e={params:{port:null,break:!1},debugRenderer:!1,isExtensionDevelopment:!1,extensionDevelopmentLocationURI:void 0,extensionDevelopmentKind:void 0};if(this.payload)for(let[n,i]of this.payload)switch(n){case"extensionDevelopmentPath":e.extensionDevelopmentLocationURI||(e.extensionDevelopmentLocationURI=[]),e.extensionDevelopmentLocationURI.push(W.parse(i)),e.isExtensionDevelopment=!0;break;case"extensionDevelopmentKind":e.extensionDevelopmentKind=[i];break;case"extensionTestsPath":e.extensionTestsLocationURI=W.parse(i);break;case"debugRenderer":e.debugRenderer=i==="true";break;case"debugId":e.params.debugId=i;break;case"inspect-brk-extensions":e.params.port=parseInt(i),e.params.break=!0;break;case"inspect-extensions":e.params.port=parseInt(i);break;case"enableProposedApi":e.extensionEnabledProposedApi=[];break}let t=this.options.developmentOptions;return t&&!e.isExtensionDevelopment&&(t.extensions?.length&&(e.extensionDevelopmentLocationURI=t.extensions.map(n=>W.revive(n)),e.isExtensionDevelopment=!0),t.extensionTestsPath&&(e.extensionTestsLocationURI=W.revive(t.extensionTestsPath))),e}get filesToOpenOrCreate(){if(this.payload){let e=this.payload.get("openFile");if(e){let t=W.parse(e);if(this.payload.has("gotoLineMode")){let n=dA(t.path);return[{fileUri:t.with({path:n.path}),options:{selection:jn(n.line)?void 0:{startLineNumber:n.line,startColumn:n.column||1}}}]}return[{fileUri:t}]}}}get filesToDiff(){if(this.payload){let e=this.payload.get("diffFilePrimary"),t=this.payload.get("diffFileSecondary");if(e&&t)return[{fileUri:W.parse(t)},{fileUri:W.parse(e)}]}}get filesToMerge(){if(this.payload){let e=this.payload.get("mergeFile1"),t=this.payload.get("mergeFile2"),n=this.payload.get("mergeFileBase"),i=this.payload.get("mergeFileResult");if(e&&t&&n&&i)return[{fileUri:W.parse(e)},{fileUri:W.parse(t)},{fileUri:W.parse(n)},{fileUri:W.parse(i)}]}}};C([J],mt.prototype,"remoteAuthority",1),C([J],mt.prototype,"expectsResolverExtension",1),C([J],mt.prototype,"isBuilt",1),C([J],mt.prototype,"logLevel",1),C([J],mt.prototype,"windowLogsPath",1),C([J],mt.prototype,"logFile",1),C([J],mt.prototype,"userRoamingDataHome",1),C([J],mt.prototype,"argvResource",1),C([J],mt.prototype,"cacheHome",1),C([J],mt.prototype,"workspaceStorageHome",1),C([J],mt.prototype,"localHistoryHome",1),C([J],mt.prototype,"stateResource",1),C([J],mt.prototype,"userDataSyncHome",1),C([J],mt.prototype,"sync",1),C([J],mt.prototype,"keyboardLayoutResource",1),C([J],mt.prototype,"untitledWorkspacesHome",1),C([J],mt.prototype,"serviceMachineIdResource",1),C([J],mt.prototype,"extHostLogsPath",1),C([J],mt.prototype,"extHostTelemetryLogFile",1),C([J],mt.prototype,"debugExtensionHost",1),C([J],mt.prototype,"isExtensionDevelopment",1),C([J],mt.prototype,"extensionDevelopmentLocationURI",1),C([J],mt.prototype,"extensionDevelopmentLocationKind",1),C([J],mt.prototype,"extensionTestsLocationURI",1),C([J],mt.prototype,"extensionEnabledProposedApi",1),C([J],mt.prototype,"debugRenderer",1),C([J],mt.prototype,"enableSmokeTestDriver",1),C([J],mt.prototype,"disableExtensions",1),C([J],mt.prototype,"enableExtensions",1),C([J],mt.prototype,"webviewExternalEndpoint",1),C([J],mt.prototype,"extensionTelemetryLogResource",1),C([J],mt.prototype,"disableTelemetry",1),C([J],mt.prototype,"verbose",1),C([J],mt.prototype,"logExtensionHostCommunication",1),C([J],mt.prototype,"skipReleaseNotes",1),C([J],mt.prototype,"skipWelcome",1),C([J],mt.prototype,"disableWorkspaceTrust",1),C([J],mt.prototype,"profile",1),C([J],mt.prototype,"filesToOpenOrCreate",1),C([J],mt.prototype,"filesToDiff",1),C([J],mt.prototype,"filesToMerge",1);var GB=A("layoutService");var uS=class extends Ha{constructor(t,n,i,o,s){super(t,i,o);this.options=n;this.layoutService=s;this._register(s.registerPart(this))}_dimension;get dimension(){return this._dimension}_contentPosition;get contentPosition(){return this._contentPosition}_onDidVisibilityChange=this._register(new x);onDidVisibilityChange=this._onDidVisibilityChange.event;parent;headerArea;titleArea;contentArea;footerArea;partLayout;onThemeChange(t){this.parent&&super.onThemeChange(t)}create(t,n){this.parent=t,this.titleArea=this.createTitleArea(t,n),this.contentArea=this.createContentArea(t,n),this.partLayout=new i1(this.options,this.contentArea),this.updateStyles()}getContainer(){return this.parent}createTitleArea(t,n){}getTitleArea(){return this.titleArea}createContentArea(t,n){}getContentArea(){return this.contentArea}setHeaderArea(t){if(this.headerArea)throw new Error("Header already exists");!this.parent||!this.titleArea||(FI(this.parent,t),t.classList.add("header-or-footer"),t.classList.add("header"),this.headerArea=t,this.partLayout?.setHeaderVisibility(!0),this.relayout())}setFooterArea(t){if(this.footerArea)throw new Error("Footer already exists");!this.parent||!this.titleArea||(this.parent.appendChild(t),t.classList.add("header-or-footer"),t.classList.add("footer"),this.footerArea=t,this.partLayout?.setFooterVisibility(!0),this.relayout())}removeHeaderArea(){this.headerArea&&(this.headerArea.remove(),this.headerArea=void 0,this.partLayout?.setHeaderVisibility(!1),this.relayout())}removeFooterArea(){this.footerArea&&(this.footerArea.remove(),this.footerArea=void 0,this.partLayout?.setFooterVisibility(!1),this.relayout())}relayout(){this.dimension&&this.contentPosition&&this.layout(this.dimension.width,this.dimension.height,this.contentPosition.top,this.contentPosition.left)}layoutContents(t,n){return Rt(this.partLayout).layout(t,n)}_onDidChange=this._register(new x);get onDidChange(){return this._onDidChange.event}element;layout(t,n,i,o){this._dimension=new Pn(t,n),this._contentPosition={top:i,left:o}}setVisible(t){this._onDidVisibilityChange.fire(t)}},i1=class r{constructor(e,t){this.options=e;this.contentArea=t}static HEADER_HEIGHT=35;static TITLE_HEIGHT=35;static Footer_HEIGHT=35;headerVisible=!1;footerVisible=!1;layout(e,t){let n;this.options.hasTitle?n=new Pn(e,Math.min(t,r.TITLE_HEIGHT)):n=Pn.None;let i;this.headerVisible?i=new Pn(e,Math.min(t,r.HEADER_HEIGHT)):i=Pn.None;let o;this.footerVisible?o=new Pn(e,Math.min(t,r.Footer_HEIGHT)):o=Pn.None;let s=e;this.options&&typeof this.options.borderWidth=="function"&&(s-=this.options.borderWidth());let a=new Pn(s,t-n.height-i.height-o.height);return this.contentArea&&XF(this.contentArea,a.width,a.height),{headerSize:i,titleSize:n,contentSize:a,footerSize:o}}setFooterVisibility(e){this.footerVisible=e}setHeaderVisibility(e){this.headerVisible=e}},pS=class extends Ha{_parts=new Set;get parts(){return Array.from(this._parts)}registerPart(e){return this._parts.add(e),ie(()=>this.unregisterPart(e))}unregisterPart(e){this._parts.delete(e)}getPart(e){return this.getPartByDocument(e.ownerDocument)}getPartByDocument(e){if(this._parts.size>1){for(let t of this._parts)if(t.element?.ownerDocument===e)return t}return this.mainPart}get activePart(){return this.getPartByDocument(AI())}};var ct=GB;function hS(r){return r===2||r===3}function sd(r){switch(r){case 0:return"left";case 1:return"right";case 2:return"bottom";case 3:return"top";default:return"bottom"}}var jGe={[sd(0)]:0,[sd(1)]:1,[sd(2)]:2,[sd(3)]:3};function r1(r){switch(r){case 0:return"always";case 1:return"never";case 2:return"preserve";default:return"preserve"}}var YGe={[r1(0)]:0,[r1(1)]:1,[r1(2)]:2};var Oo=A("lifecycleService");function qB(r){switch(r){case 1:return"Starting";case 2:return"Ready";case 3:return"Restored";case 4:return"Eventually"}}var na=class extends P{constructor(t,n){super();this.logService=t;this.storageService=n;this._startupKind=this.resolveStartupKind(),this._register(this.storageService.onWillSaveState(i=>{i.reason===1&&this.storageService.store(na.LAST_SHUTDOWN_REASON_KEY,this.shutdownReason,1,1)}))}static LAST_SHUTDOWN_REASON_KEY="lifecyle.lastShutdownReason";_onBeforeShutdown=this._register(new x);onBeforeShutdown=this._onBeforeShutdown.event;_onWillShutdown=this._register(new x);onWillShutdown=this._onWillShutdown.event;_onDidShutdown=this._register(new x);onDidShutdown=this._onDidShutdown.event;_onBeforeShutdownError=this._register(new x);onBeforeShutdownError=this._onBeforeShutdownError.event;_onShutdownVeto=this._register(new x);onShutdownVeto=this._onShutdownVeto.event;_startupKind;get startupKind(){return this._startupKind}_phase=1;get phase(){return this._phase}phaseWhen=new Map;shutdownReason;resolveStartupKind(){let t=this.doResolveStartupKind()??1;return this.logService.trace(`[lifecycle] starting up (startup kind: ${t})`),t}doResolveStartupKind(){let t=this.storageService.getNumber(na.LAST_SHUTDOWN_REASON_KEY,1);this.storageService.remove(na.LAST_SHUTDOWN_REASON_KEY,1);let n;switch(t){case 3:n=3;break;case 4:n=4;break}return n}set phase(t){if(t<this.phase)throw new Error("Lifecycle cannot go backwards");if(this._phase===t)return;this.logService.trace(`lifecycle: phase changed (value: ${t})`),this._phase=t,Vn(`code/LifecyclePhase/${qB(t)}`);let n=this.phaseWhen.get(this._phase);n&&(n.open(),this.phaseWhen.delete(this._phase))}async when(t){if(t<=this._phase)return;let n=this.phaseWhen.get(t);n||(n=new wl,this.phaseWhen.set(t,n)),await n.wait()}};na=C([v(0,Et),v(1,Xe)],na);var Jg=class extends na{beforeUnloadListener=void 0;unloadListener=void 0;ignoreBeforeUnload=!1;didUnload=!1;constructor(e,t){super(e,t),this.registerListeners()}registerListeners(){this.beforeUnloadListener=K(xe,se.BEFORE_UNLOAD,e=>this.onBeforeUnload(e)),this.unloadListener=K(xe,se.PAGE_HIDE,()=>this.onUnload())}onBeforeUnload(e){this.ignoreBeforeUnload?(this.logService.info("[lifecycle] onBeforeUnload triggered but ignored once"),this.ignoreBeforeUnload=!1):(this.logService.info("[lifecycle] onBeforeUnload triggered and handled with veto support"),this.doShutdown(()=>this.vetoBeforeUnload(e)))}vetoBeforeUnload(e){e.preventDefault(),e.returnValue=c("lifecycleVeto","Changes that you made may not be saved. Please check press 'Cancel' and try again.")}withExpectedShutdown(e,t){if(typeof e=="number")return this.shutdownReason=e,this.storageService.flush(1);this.ignoreBeforeUnload=!0;try{t?.()}finally{this.ignoreBeforeUnload=!1}}async shutdown(){this.logService.info("[lifecycle] shutdown triggered"),this.beforeUnloadListener?.dispose(),this.unloadListener?.dispose(),await this.storageService.flush(1),this.doShutdown()}doShutdown(e){let t=this.logService;this.storageService.flush(1);let n=!1;function i(o,s){typeof e=="function"&&(o instanceof Promise&&(t.error(`[lifecycle] Long running operations before shutdown are unsupported in the web (id: ${s})`),n=!0),o===!0&&(t.info(`[lifecycle]: Unload was prevented (id: ${s})`),n=!0))}return this._onBeforeShutdown.fire({reason:2,veto(o,s){i(o,s)},finalVeto(o,s){i(o(),s)}}),n&&typeof e=="function"?e():this.onUnload()}onUnload(){if(this.didUnload)return;this.didUnload=!0,this._register(K(xe,se.PAGE_SHOW,t=>this.onLoadAfterUnload(t)));let e=this.logService;this._onWillShutdown.fire({reason:2,joiners:()=>[],token:rt.None,join(t,n){e.error(`[lifecycle] Long running operations during shutdown are unsupported in the web (id: ${n.id})`)},force:()=>{}}),this._onDidShutdown.fire()}onLoadAfterUnload(e){e.persisted&&this.withExpectedShutdown({disableShutdownHandling:!0},()=>xe.location.reload())}doResolveStartupKind(){let e=super.doResolveStartupKind();return typeof e!="number"&&performance.getEntriesByType("navigation").at(0)?.type==="reload"&&(e=3),e}};Jg=C([v(0,Et),v(1,Xe)],Jg);cn(Oo,Jg,0);var ia=A("hostService");var T7=c("open","open"),E7=c("close","close"),w7=c("find","find"),gS={open:T7,close:E7,find:w7};async function jB(r,e){let t=[];return await YB(r,t,e.logsHome,e.logsHome),t}async function YB(r,e,t,n){let i=await r.resolve(t);for(let{resource:o,isDirectory:s}of i.children||[])if(s)await YB(r,e,o,n);else{let a=(await r.readFile(o)).value.toString();if(a){let l=Su(n,o);l&&e.push({relativePath:l,contents:a})}}}var XB=A("editorPaneService");var zp;(e=>e.Workbench="workbench.contributions.kind")(zp||={});var xc=(i=>(i[i.BlockStartup=1]="BlockStartup",i[i.BlockRestore=2]="BlockRestore",i[i.AfterRestored=3]="AfterRestored",i[i.Eventually=4]="Eventually",i))(xc||{});function QB(r){let e=r;return!!e&&typeof e.editorTypeId=="string"}function C7(r){switch(r){case 3:return xc.AfterRestored;case 4:return xc.Eventually}}function JB(r){switch(r){case xc.BlockStartup:return 1;case xc.BlockRestore:return 2;case xc.AfterRestored:return 3;case xc.Eventually:return 4}}var Tc=class r extends P{static INSTANCE=new r;static BLOCK_BEFORE_RESTORE_WARN_THRESHOLD=20;static BLOCK_AFTER_RESTORE_WARN_THRESHOLD=100;instantiationService;lifecycleService;logService;environmentService;editorPaneService;contributionsByPhase=new Map;contributionsByEditor=new Map;contributionsById=new Map;instancesById=new Map;instanceDisposables=this._register(new Q);timingsByPhase=new Map;get timings(){return this.timingsByPhase}pendingRestoredContributions=new Ir;whenRestored=this.pendingRestoredContributions.p;registerWorkbenchContribution2(e,t,n){let i={id:e,ctor:t};this.instantiationService&&this.lifecycleService&&this.logService&&this.environmentService&&this.editorPaneService&&(typeof n=="number"&&this.lifecycleService.phase>=n||typeof e=="string"&&QB(n)&&this.editorPaneService.didInstantiateEditorPane(n.editorTypeId))?this.safeCreateContribution(this.instantiationService,this.logService,this.environmentService,i,typeof n=="number"?JB(n):this.lifecycleService.phase):(typeof n=="number"&&Qh(this.contributionsByPhase,JB(n),[]).push(i),typeof e=="string"&&(this.contributionsById.has(e)?console.error(`IWorkbenchContributionsRegistry#registerWorkbenchContribution(): Can't register multiple contributions with same id '${e}'`):this.contributionsById.set(e,i),QB(n)&&Qh(this.contributionsByEditor,n.editorTypeId,[]).push(i)))}registerWorkbenchContribution(e,t){this.registerWorkbenchContribution2(void 0,e,C7(t))}getWorkbenchContribution(e){if(this.instancesById.has(e))return this.instancesById.get(e);let t=this.instantiationService,n=this.lifecycleService,i=this.logService,o=this.environmentService;if(!t||!n||!i||!o)throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): cannot be called before registry started`);let s=this.contributionsById.get(e);if(!s)throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): contribution with that identifier is unknown.`);n.phase<3&&i.warn(`IWorkbenchContributionsRegistry#getContribution('${e}'): contribution instantiated before LifecyclePhase.Restored!`),this.safeCreateContribution(t,i,o,s,n.phase);let a=this.instancesById.get(e);if(!a)throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): failed to create contribution.`);return a}start(e){let t=this.instantiationService=e.get(_e),n=this.lifecycleService=e.get(Oo),i=this.logService=e.get(Et),o=this.environmentService=e.get(Qt),s=this.editorPaneService=e.get(XB);this._register(n.onDidShutdown(()=>{this.instanceDisposables.clear()}));for(let a of[1,2,3,4])this.instantiateByPhase(t,n,i,o,a);for(let a of this.contributionsByEditor.keys())s.didInstantiateEditorPane(a)&&this.onEditor(a,t,n,i,o);this._register(s.onWillInstantiateEditorPane(a=>this.onEditor(a.typeId,t,n,i,o)))}onEditor(e,t,n,i,o){let s=this.contributionsByEditor.get(e);if(s){this.contributionsByEditor.delete(e);for(let a of s)this.safeCreateContribution(t,i,o,a,n.phase)}}instantiateByPhase(e,t,n,i,o){t.phase>=o?this.doInstantiateByPhase(e,n,i,o):t.when(o).then(()=>this.doInstantiateByPhase(e,n,i,o))}async doInstantiateByPhase(e,t,n,i){let o=this.contributionsByPhase.get(i);if(o)switch(this.contributionsByPhase.delete(i),i){case 1:case 2:{Vn(`code/willCreateWorkbenchContributions/${i}`);for(let s of o)this.safeCreateContribution(e,t,n,s,i);Vn(`code/didCreateWorkbenchContributions/${i}`);break}case 3:case 4:{i===4&&await this.pendingRestoredContributions.p,this.doInstantiateWhenIdle(o,e,t,n,i);break}}}doInstantiateWhenIdle(e,t,n,i,o){Vn(`code/willCreateWorkbenchContributions/${o}`);let s=0,a=o===4?3e3:500,l=d=>{for(;s<e.length;){let u=e[s++];if(this.safeCreateContribution(t,n,i,u,o),d.timeRemaining()<1){Cl(l,a);break}}s===e.length&&(Vn(`code/didCreateWorkbenchContributions/${o}`),o===3&&this.pendingRestoredContributions.complete())};Cl(l,a)}safeCreateContribution(e,t,n,i,o){if(typeof i.id=="string"&&this.instancesById.has(i.id))return;let s=Date.now();try{typeof i.id=="string"&&Vn(`code/willCreateWorkbenchContribution/${o}/${i.id}`);let a=e.createInstance(i.ctor);typeof i.id=="string"&&(this.instancesById.set(i.id,a),this.contributionsById.delete(i.id)),Zh(a)&&this.instanceDisposables.add(a)}catch(a){t.error(`Unable to create workbench contribution '${i.id??i.ctor.name}'.`,a)}finally{typeof i.id=="string"&&Vn(`code/didCreateWorkbenchContribution/${o}/${i.id}`)}if(typeof i.id=="string"||!n.isBuilt){let a=Date.now()-s;if(a>(o<3?r.BLOCK_BEFORE_RESTORE_WARN_THRESHOLD:r.BLOCK_AFTER_RESTORE_WARN_THRESHOLD)&&t.warn(`Creation of workbench contribution '${i.id??i.ctor.name}' took ${a}ms.`),typeof i.id=="string"){let l=this.timingsByPhase.get(o);l||(l=[],this.timingsByPhase.set(o,l)),l.push([i.id,a])}}}},I$e=Tc.INSTANCE.registerWorkbenchContribution2.bind(Tc.INSTANCE),S$e=Tc.INSTANCE.getWorkbenchContribution.bind(Tc.INSTANCE);Ce.add(zp.Workbench,Tc.INSTANCE);var Zg=class{constructor(e,t,n,i){this.fileService=e;this.environmentService=t;this.lifecycleService=n;this.logService=i}async getLogs(){return jB(this.fileService,this.environmentService)}async whenWorkbenchRestored(){this.logService.info("[driver] Waiting for restored lifecycle phase..."),await this.lifecycleService.when(3),this.logService.info("[driver] Restored lifecycle phase reached. Waiting for contributions..."),await Ce.as(zp.Workbench).whenRestored,this.logService.info("[driver] Workbench contributions created.")}async setValue(e,t){let n=xe.document.querySelector(e);if(!n)return Promise.reject(new Error(`Element not found: ${e}`));let i=n;i.value=t;let o=new Event("input",{bubbles:!0,cancelable:!0});i.dispatchEvent(o)}async isActiveElement(e){if(xe.document.querySelector(e)!==xe.document.activeElement){let n=[],i=xe.document.activeElement;for(;i;){let o=i.tagName,s=i.id?`#${i.id}`:"",a=vn(i.className.split(/\s+/g).map(l=>l.trim())).map(l=>`.${l}`).join("");n.unshift(`${o}${s}${a}`),i=i.parentElement}throw new Error(`Active element not found. Current active element is '${n.join(" > ")}'. Looking for ${e}`)}return!0}async getElements(e,t){let n=xe.document.querySelectorAll(e),i=[];for(let o=0;o<n.length;o++){let s=n.item(o);i.push(this.serializeElement(s,t))}return i}serializeElement(e,t){let n=Object.create(null);for(let a=0;a<e.attributes.length;a++){let l=e.attributes.item(a);l&&(n[l.name]=l.value)}let i=[];if(t)for(let a=0;a<e.children.length;a++){let l=e.children.item(a);l&&i.push(this.serializeElement(l,!0))}let{left:o,top:s}=Ug(e);return{tagName:e.tagName,className:e.className,textContent:e.textContent||"",attributes:n,children:i,left:o,top:s}}async getElementXY(e,t,n){let i=typeof t=="number"&&typeof n=="number"?{x:t,y:n}:void 0;return this._getElementXY(e,i)}async typeInEditor(e,t){let n=xe.document.querySelector(e);if(!n)throw new Error(`Editor not found: ${e}`);let i=n,o=i.selectionStart,s=o+t.length,a=i.value,l=a.substr(0,o)+t+a.substr(o);i.value=l,i.setSelectionRange(s,s);let d=new Event("input",{bubbles:!0,cancelable:!0});i.dispatchEvent(d)}async getTerminalBuffer(e){let t=xe.document.querySelector(e);if(!t)throw new Error(`Terminal not found: ${e}`);let n=t.xterm;if(!n)throw new Error(`Xterm not found: ${e}`);let i=[];for(let o=0;o<n.buffer.active.length;o++)i.push(n.buffer.active.getLine(o).translateToString(!0));return i}async writeInTerminal(e,t){let n=xe.document.querySelector(e);if(!n)throw new Error(`Element not found: ${e}`);let i=n.xterm;if(!i)throw new Error(`Xterm not found: ${e}`);i.input(t)}getLocaleInfo(){return Promise.resolve({language:Io,locale:IP})}getLocalizedStrings(){return Promise.resolve({open:gS.open,close:gS.close,find:gS.find})}async _getElementXY(e,t){let n=xe.document.querySelector(e);if(!n)return Promise.reject(new Error(`Element not found: ${e}`));let{left:i,top:o}=Ug(n),{width:s,height:a}=Bg(n),l,d;return t?(l=i+t.x,d=o+t.y):(l=i+s/2,d=o+a/2),l=Math.round(l),d=Math.round(d),{x:l,y:d}}async exitApplication(){}};Zg=C([v(0,dt),v(1,Qt),v(2,Oo),v(3,Et)],Zg);function ZB(r){Object.assign(xe,{driver:r.createInstance(Zg)})}var po=class extends P{constructor(t,n={getWindowsCount:_I,getWindows:Ng},i,o){super();this.hostService=i;this.environmentService=o;this.enableWindowFocusOnElementFocus(t),this.enableMultiWindowAwareTimeout(t,n),this.registerFullScreenListeners(t.vscodeWindowId)}static TIMEOUT_HANDLES=Number.MIN_SAFE_INTEGER;static TIMEOUT_DISPOSABLES=new Map;enableWindowFocusOnElementFocus(t){let n=t.HTMLElement.prototype.focus,i=this;t.HTMLElement.prototype.focus=function(o){i.onElementFocus(Le(this)),n.apply(this,[o])}}onElementFocus(t){let n=fc();n!==t&&n.document.hasFocus()&&(t.focus(),!this.environmentService.extensionTestsLocationURI&&!t.document.hasFocus()&&this.hostService.focus(t))}enableMultiWindowAwareTimeout(t,n={getWindowsCount:_I,getWindows:Ng}){let i=t.setTimeout;Object.defineProperty(t,"vscodeOriginalSetTimeout",{get:()=>i});let o=t.clearTimeout;Object.defineProperty(t,"vscodeOriginalClearTimeout",{get:()=>o}),t.setTimeout=function(s,a=0,...l){if(n.getWindowsCount()===1||typeof s=="string"||a===0)return i.apply(this,[s,a,...l]);let d=new Set,u=po.TIMEOUT_HANDLES++;po.TIMEOUT_DISPOSABLES.set(u,d);let p=ol(s,()=>{vt(d),po.TIMEOUT_DISPOSABLES.delete(u)});for(let{window:h,disposables:m}of n.getWindows()){if(s_(h)&&h.document.visibilityState==="hidden")continue;let f=!1,g=h.vscodeOriginalSetTimeout.apply(this,[(...T)=>{f||p(...T)},a,...l]),y=ie(()=>{f=!0,h.vscodeOriginalClearTimeout(g),d.delete(y)});m.add(y),d.add(y)}return u},t.clearTimeout=function(s){let a=typeof s=="number"?po.TIMEOUT_DISPOSABLES.get(s):void 0;a?(vt(a),po.TIMEOUT_DISPOSABLES.delete(s)):o.apply(this,[s])}}registerFullScreenListeners(t){this._register(this.hostService.onDidChangeFullScreen(({windowId:n,fullscreen:i})=>{if(n===t){let o=gc(t);o&&CF(i,o.window)}}))}static async confirmOnShutdown(t,n){let i=t.get(Gi),o=t.get(ke),s=n===2?ze?c("quitMessageMac","Are you sure you want to quit?"):c("quitMessage","Are you sure you want to exit?"):c("closeWindowMessage","Are you sure you want to close the window?"),a=n===2?ze?c({key:"quitButtonLabel",comment:["&& denotes a mnemonic"]},"&&Quit"):c({key:"exitButtonLabel",comment:["&& denotes a mnemonic"]},"&&Exit"):c({key:"closeWindowButtonLabel",comment:["&& denotes a mnemonic"]},"&&Close Window"),l=await i.confirm({message:s,primaryButton:a,checkbox:{label:c("doNotAskAgain","Do not ask me again")}});return l.confirmed&&l.checkboxChecked&&await o.updateValue("window.confirmBeforeClose","never"),l.confirmed}};po=C([v(2,ia),v(3,uo)],po);var fS=class extends po{constructor(t,n,i,o,s,a,l,d,u){super(xe,void 0,u,a);this.openerService=t;this.lifecycleService=n;this.dialogService=i;this.labelService=o;this.productService=s;this.browserEnvironmentService=a;this.layoutService=l;this.instantiationService=d;this.registerListeners(),this.create()}registerListeners(){this._register(this.lifecycleService.onWillShutdown(()=>this.onWillShutdown()));let t=pl&&xe.visualViewport?xe.visualViewport:xe;this._register(K(t,se.RESIZE,()=>{this.layoutService.layout(),pl&&xe.scrollTo(0,0)})),this._register(K(this.layoutService.mainContainer,se.WHEEL,n=>n.preventDefault(),{passive:!1})),this._register(K(this.layoutService.mainContainer,se.CONTEXT_MENU,n=>We.stop(n,!0))),this._register(K(this.layoutService.mainContainer,se.DROP,n=>We.stop(n,!0)))}onWillShutdown(){N.toPromise(N.any(N.once(new Ue(xe.document.body,se.KEY_DOWN,!0).event),N.once(new Ue(xe.document.body,se.MOUSE_DOWN,!0).event))).then(async()=>{await Cn(3e3),await this.dialogService.prompt({type:bn.Error,message:c("shutdownError","An unexpected error occurred that requires a reload of this page."),detail:c("shutdownErrorDetail","The workbench was unexpectedly disposed while running."),buttons:[{label:c({key:"reload",comment:["&& denotes a mnemonic"]},"&&Reload"),run:()=>xe.location.reload()}]})})}create(){this.setupOpenHandlers(),this.registerLabelFormatters(),this.registerCommands(),this.setupDriver()}setupDriver(){this.environmentService.enableSmokeTestDriver&&ZB(this.instantiationService)}setupOpenHandlers(){this.openerService.setDefaultExternalOpener({openExternal:async t=>{let n=!1;if(this.browserEnvironmentService.options?.openerAllowedExternalUrlPrefixes){for(let i of this.browserEnvironmentService.options.openerAllowedExternalUrlPrefixes)if(t.startsWith(i)){n=!0;break}}if(Qb(t,le.http)||Qb(t,le.https))Xs?lB(t,!n)||await this.dialogService.prompt({type:bn.Warning,message:c("unableToOpenExternal","The browser interrupted the opening of a new tab or window. Press 'Open' to open it anyway."),detail:t,buttons:[{label:c({key:"open",comment:["&& denotes a mnemonic"]},"&&Open"),run:()=>n?I_(t):y_(t)},{label:c({key:"learnMore",comment:["&& denotes a mnemonic"]},"&&Learn More"),run:()=>this.openerService.open(W.parse("https://aka.ms/allow-vscode-popup"))}],cancelButton:!0}):n?I_(t):y_(t);else{let i=()=>{this.lifecycleService.withExpectedShutdown({disableShutdownHandling:!0},()=>xe.location.href=t)};i();let o=async()=>{let{downloadUrl:s}=this.productService,a,l=[{label:c({key:"openExternalDialogButtonRetry.v2",comment:["&& denotes a mnemonic"]},"&&Try Again"),run:()=>i()}];s!==void 0?(a=c("openExternalDialogDetail.v2",`We launched {0} on your computer.

If {1} did not launch, try again or install it below.`,this.productService.nameLong,this.productService.nameLong),l.push({label:c({key:"openExternalDialogButtonInstall.v3",comment:["&& denotes a mnemonic"]},"&&Install"),run:async()=>{await this.openerService.open(W.parse(s)),o()}})):a=c("openExternalDialogDetailNoInstall",`We launched {0} on your computer.

If {1} did not launch, try again below.`,this.productService.nameLong,this.productService.nameLong),await this.hostService.withExpectedShutdown(()=>this.dialogService.prompt({type:bn.Info,message:c("openExternalDialogTitle","All done. You can close this tab now."),detail:a,buttons:l,cancelButton:!0}))};Qb(t,this.productService.urlProtocol)&&await o()}return!0}})}registerLabelFormatters(){this._register(this.labelService.registerFormatter({scheme:le.vscodeUserData,priority:!0,formatting:{label:"(Settings) ${path}",separator:"/"}}))}registerCommands(){vr.registerCommand("workbench.experimental.requestUsbDevice",async(t,n)=>FB(n)),vr.registerCommand("workbench.experimental.requestSerialPort",async(t,n)=>BB(n)),vr.registerCommand("workbench.experimental.requestHidDevice",async(t,n)=>UB(n))}};fS=C([v(0,hs),v(1,Oo),v(2,Gi),v(3,Gs),v(4,gi),v(5,KB),v(6,ct),v(7,_e),v(8,ia)],fS);var k7=A("auxiliaryWindowService");var ef=class extends po{constructor(t,n,i,o,s,a){super(t,void 0,s,a);this.window=t;this.container=n;this.configurationService=o;this.whenStylesHaveLoaded=i.wait().then(()=>{}),this.registerListeners()}_onWillLayout=this._register(new x);onWillLayout=this._onWillLayout.event;_onDidLayout=this._register(new x);onDidLayout=this._onDidLayout.event;_onBeforeUnload=this._register(new x);onBeforeUnload=this._onBeforeUnload.event;_onUnload=this._register(new x);onUnload=this._onUnload.event;_onWillDispose=this._register(new x);onWillDispose=this._onWillDispose.event;whenStylesHaveLoaded;registerListeners(){this._register(K(this.window,se.BEFORE_UNLOAD,t=>this.handleBeforeUnload(t))),this._register(K(this.window,se.UNLOAD,()=>this.handleUnload())),this._register(K(this.window,"unhandledrejection",t=>{Ze(t.reason),t.preventDefault()})),this._register(K(this.window,se.RESIZE,()=>this.layout())),this._register(K(this.container,se.SCROLL,()=>this.container.scrollTop=0)),_t?(this._register(K(this.container,se.DROP,t=>We.stop(t,!0))),this._register(K(this.container,se.WHEEL,t=>t.preventDefault(),{passive:!1})),this._register(K(this.container,se.CONTEXT_MENU,t=>We.stop(t,!0)))):(this._register(K(this.window.document.body,se.DRAG_OVER,t=>We.stop(t))),this._register(K(this.window.document.body,se.DROP,t=>We.stop(t))))}handleBeforeUnload(t){let n;if(this._onBeforeUnload.fire({veto(s){s&&(n=s)}}),n){this.handleVetoBeforeClose(t,n);return}let i=this.configurationService.getValue("window.confirmBeforeClose");(i==="always"||i==="keyboardOnly"&&hc.getInstance().isModifierPressed)&&this.confirmBeforeClose(t)}handleVetoBeforeClose(t,n){this.preventUnload(t)}preventUnload(t){t.preventDefault(),t.returnValue=c("lifecycleVeto","Changes that you made may not be saved. Please check press 'Cancel' and try again.")}confirmBeforeClose(t){this.preventUnload(t)}handleUnload(){this._onUnload.fire()}layout(){let t=Bg(this.window.document.body,this.container);this._onWillLayout.fire(t),this._onDidLayout.fire(t)}createState(){return{bounds:{x:this.window.screenX,y:this.window.screenY,width:this.window.outerWidth,height:this.window.outerHeight},zoomLevel:EF(this.window)}}dispose(){this._store.isDisposed||(this._onWillDispose.fire(),super.dispose())}};ef=C([v(3,ke),v(4,ia),v(5,uo)],ef);var Ya=class extends P{constructor(t,n,i,o,s,a){super();this.layoutService=t;this.dialogService=n;this.configurationService=i;this.telemetryService=o;this.hostService=s;this.environmentService=a}static DEFAULT_SIZE={width:800,height:600};static WINDOW_IDS=Jl(xe)+1;_onDidOpenAuxiliaryWindow=this._register(new x);onDidOpenAuxiliaryWindow=this._onDidOpenAuxiliaryWindow.event;windows=new Map;async open(t){Vn("code/auxiliaryWindow/willOpen");let n=await this.openWindow(t);if(!n)throw new Error(c("unableToOpenWindowError","Unable to open a new window."));let i=await this.resolveWindowId(n);II(n,i);let o=new Q,{container:s,stylesLoaded:a}=this.createContainer(n,o,t),l=this.createAuxiliaryWindow(n,s,a),d=new Q;this.windows.set(n.vscodeWindowId,l),d.add(ie(()=>this.windows.delete(n.vscodeWindowId)));let u=new Q;return N.once(l.onWillDispose)(()=>{n.close(),o.dispose(),d.dispose(),u.dispose()}),d.add(qF(n)),this._onDidOpenAuxiliaryWindow.fire({window:l,disposables:u}),Vn("code/auxiliaryWindow/didOpen"),this.telemetryService.publicLog2("auxiliaryWindowOpen",{bounds:!!t?.bounds}),l}createAuxiliaryWindow(t,n,i){return new ef(t,n,i,this.configurationService,this.hostService,this.environmentService)}async openWindow(t){let n=fc(),i={x:n.screenX,y:n.screenY,width:n.outerWidth,height:n.outerHeight},o=Math.max(t?.bounds?.width??Ya.DEFAULT_SIZE.width,UD.WIDTH),s=Math.max(t?.bounds?.height??Ya.DEFAULT_SIZE.height,UD.HEIGHT),a={x:t?.bounds?.x??Math.max(i.x+i.width/2-o/2,0),y:t?.bounds?.y??Math.max(i.y+i.height/2-s/2,0),width:o,height:s};!t?.bounds&&a.x===i.x&&a.y===i.y&&(a={...a,x:a.x+30,y:a.y+30});let l=vn(["popup=yes",`left=${a.x}`,`top=${a.y}`,`width=${a.width}`,`height=${a.height}`,t?.nativeTitlebar?"window-native-titlebar=yes":void 0,t?.disableFullscreen?"window-disable-fullscreen=yes":void 0,t?.mode===0?"window-maximized=yes":void 0,t?.mode===2?"window-fullscreen=yes":void 0]),d=xe.open(cu?"":"about:blank",void 0,l.join(","));return!d&&_t?(await this.dialogService.prompt({type:bn.Warning,message:c("unableToOpenWindow","The browser interrupted the opening of a new window. Press 'Retry' to try again."),detail:c("unableToOpenWindowDetail","To avoid this problem in the future, please ensure to allow popups for this website."),buttons:[{label:c({key:"retry",comment:["&& denotes a mnemonic"]},"&&Retry"),run:()=>this.openWindow(t)}],cancelButton:!0})).result:d?.window}async resolveWindowId(t){return Ya.WINDOW_IDS++}createContainer(t,n,i){t.document.createElement=function(){throw new Error('Not allowed to create elements in child window JavaScript context. Always use the main window so that "xyz instanceof HTMLElement" continues to work.')},this.applyMeta(t);let{stylesLoaded:o}=this.applyCSS(t,n),s=this.applyHTML(t,n);return{stylesLoaded:o,container:s}}applyMeta(t){for(let i of['meta[charset="utf-8"]','meta[http-equiv="Content-Security-Policy"]','meta[name="viewport"]','meta[name="theme-color"]']){let o=xe.document.querySelector(i);if(o){let s=nB(t.document.head);if(BI(o,s),i==='meta[http-equiv="Content-Security-Policy"]'){let a=s.getAttribute("content");a&&s.setAttribute("content",a.replace(/(script-src[^\;]*)/,"script-src 'none'"))}}}let n=xe.document.querySelector('link[rel="icon"]');if(n){let i=iB(t.document.head);BI(n,i)}}applyCSS(t,n){Vn("code/auxiliaryWindow/willApplyCSS");let i=new Map,o=new wl;o.wait().then(()=>Vn("code/auxiliaryWindow/didLoadCSSStyles"));let s=n.add(new Q),a=0;function l(){--a===0&&(s.dispose(),o.open())}function d(u){if(ZF(u))return;let p=t.document.head.appendChild(u.cloneNode(!0));u.tagName.toLowerCase()==="link"&&(a++,s.add(K(p,"load",l)),s.add(K(p,"error",l))),i.set(u,p)}a++;try{for(let u of xe.document.head.querySelectorAll('link[rel="stylesheet"], style'))d(u)}finally{l()}return n.add(eB(t)),n.add(MI.observe(xe.document.head,n,{childList:!0,subtree:!0})(u=>{for(let p of u)if(!(p.type!=="childList"||p.target.nodeName.toLowerCase()==="title"||p.target.nodeName.toLowerCase()==="script"||p.target.nodeName.toLowerCase()==="meta")){for(let h of p.addedNodes)if(An(h)&&(h.tagName.toLowerCase()==="style"||h.tagName.toLowerCase()==="link"))d(h);else if(h.nodeType===Node.TEXT_NODE&&h.parentNode){let m=i.get(h.parentNode);m&&(m.textContent=h.textContent)}for(let h of p.removedNodes){let m=i.get(h);m&&(m.parentNode?.removeChild(m),i.delete(h))}}})),Vn("code/auxiliaryWindow/didApplyCSS"),{stylesLoaded:o}}applyHTML(t,n){Vn("code/auxiliaryWindow/willApplyHTML");let i=document.createElement("div");return i.setAttribute("role","application"),QF(i,0,0,0,0,"relative"),i.style.display="flex",i.style.height="100%",i.style.flexDirection="column",t.document.body.append(i),n.add(UI(xe.document.documentElement,t.document.documentElement)),n.add(UI(xe.document.body,t.document.body)),n.add(UI(this.layoutService.mainContainer,i,["class"])),Vn("code/auxiliaryWindow/didApplyHTML"),i}getWindow(t){return this.windows.get(t)}};Ya=C([v(0,ct),v(1,Gi),v(2,ke),v(3,Ot),v(4,ia),v(5,uo)],Ya);cn(k7,Ya,1);var o1=new Pn(220,70),s1=new Pn(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);var bS=class r extends Wp{constructor(t,n,i,o,s){super(t,i,o,s);this.group=n}onDidChangeSizeConstraints=N.None;_onDidChangeControl=this._register(new x);onDidChangeControl=this._onDidChangeControl.event;static EDITOR_MEMENTOS=new Map;get minimumWidth(){return o1.width}get maximumWidth(){return s1.width}get minimumHeight(){return o1.height}get maximumHeight(){return s1.height}_input;get input(){return this._input}_options;get options(){return this._options}get window(){return gc(this.group.windowId,!0).window}get scopedContextKeyService(){}create(t){super.create(t),this.createEditor(t)}async setInput(t,n,i,o){this._input=t,this._options=n}clearInput(){this._input=void 0,this._options=void 0}setOptions(t){this._options=t}setVisible(t){super.setVisible(t),this.setEditorVisible(t)}setEditorVisible(t){}setBoundarySashes(t){}getEditorMemento(t,n,i,o=10){let s=`${this.getId()}${i}`,a=r.EDITOR_MEMENTOS.get(s);return a||(a=this._register(new a1(this.getId(),i,this.getMemento(1,1),o,t,n)),r.EDITOR_MEMENTOS.set(s,a)),a}getViewState(){}saveState(){for(let[,t]of r.EDITOR_MEMENTOS)t.id===this.getId()&&t.saveState();super.saveState()}dispose(){this._input=void 0,this._options=void 0,super.dispose()}},a1=class r extends P{constructor(t,n,i,o,s,a){super();this.id=t;this.key=n;this.memento=i;this.limit=o;this.editorGroupService=s;this.configurationService=a;this.updateConfiguration(void 0),this.registerListeners()}static SHARED_EDITOR_STATE=-1;cache;cleanedUp=!1;editorDisposables;shareEditorState=!1;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>this.updateConfiguration(t)))}updateConfiguration(t){(!t||t.affectsConfiguration(void 0,"workbench.editor.sharedViewState"))&&(this.shareEditorState=this.configurationService.getValue(void 0,"workbench.editor.sharedViewState")===!0)}saveEditorState(t,n,i){let o=this.doGetResource(n);if(!o||!t)return;let s=this.doLoad(),a=s.get(o.toString());a||(a=Object.create(null),s.set(o.toString(),a)),a[t.id]=i,this.shareEditorState&&(a[r.SHARED_EDITOR_STATE]=i),fi(n)&&this.clearEditorStateOnDispose(o,n)}loadEditorState(t,n){let i=this.doGetResource(n);if(!i||!t)return;let s=this.doLoad().get(i.toString());if(s){let a=s[t.id];if(a)return a;if(this.shareEditorState)return s[r.SHARED_EDITOR_STATE]}}clearEditorState(t,n){fi(t)&&this.editorDisposables?.delete(t);let i=this.doGetResource(t);if(i){let o=this.doLoad();if(n){let s=o.get(i.toString());s&&(delete s[n.id],Bd(s)&&o.delete(i.toString()))}else o.delete(i.toString())}}clearEditorStateOnDispose(t,n){this.editorDisposables||(this.editorDisposables=new Map),this.editorDisposables.has(n)||this.editorDisposables.set(n,N.once(n.onWillDispose)(()=>{this.clearEditorState(t),this.editorDisposables?.delete(n)}))}moveEditorState(t,n,i){let o=this.doLoad(),s=[...o.keys()];for(let a of s){let l=W.parse(a);if(!i.isEqualOrParent(l,t))continue;let d;if(To(t,l))d=n;else{let p=lA(l.path,t.path);d=Be(n,l.path.substr(p+t.path.length+1))}let u=o.get(a,0);u&&(o.delete(a),o.set(d.toString(),u))}}doGetResource(t){return fi(t)?t.resource:t}doLoad(){if(!this.cache){this.cache=new xo(this.limit);let t=this.memento[this.key];Array.isArray(t)&&this.cache.fromJSON(t)}return this.cache}saveState(){let t=this.doLoad();this.cleanedUp||(this.cleanUp(),this.cleanedUp=!0),this.memento[this.key]=t.toJSON()}cleanUp(){let t=this.doLoad(),n=[...t.entries()];for(let[i,o]of n)for(let s of Object.keys(o)){let a=Number(s);a===r.SHARED_EDITOR_STATE&&this.shareEditorState||this.editorGroupService.getGroup(a)||(delete o[a],Bd(o)&&t.delete(i))}}};var vS=class r{constructor(e,t,n){this.ctor=e;this.typeId=t;this.name=n}static instantiatedEditorPanes=new Set;static didInstantiateEditorPane(e){return r.instantiatedEditorPanes.has(e)}static _onWillInstantiateEditorPane=new x;static onWillInstantiateEditorPane=r._onWillInstantiateEditorPane.event;static create(e,t,n){return new r(e,t,n)}instantiate(e,t){r._onWillInstantiateEditorPane.fire({typeId:this.typeId});let n=e.createInstance(this.ctor,t);return r.instantiatedEditorPanes.add(this.typeId),n}describes(e){return e.getId()===this.typeId}},l1=class{mapEditorPanesToEditors=new Map;registerEditorPane(e,t){return this.mapEditorPanesToEditors.set(e,t),ie(()=>{this.mapEditorPanesToEditors.delete(e)})}getEditorPane(e){let t=this.findEditorPaneDescriptors(e);if(t.length!==0)return t.length===1?t[0]:e.prefersEditorPane(t)}findEditorPaneDescriptors(e,t){let n=[];for(let i of this.mapEditorPanesToEditors.keys()){let o=this.mapEditorPanesToEditors.get(i)||[];for(let s of o){let a=s.ctor;if(!t&&e.constructor===a){n.push(i);break}else if(t&&e instanceof a){n.push(i);break}}}return!t&&n.length===0?this.findEditorPaneDescriptors(e,!0):n}getEditorPaneByType(e){return $e.find(this.mapEditorPanesToEditors.keys(),t=>t.typeId===e)}getEditorPanes(){return Array.from(this.mapEditorPanesToEditors.keys())}getEditors(){let e=[];for(let t of this.mapEditorPanesToEditors.keys()){let n=this.mapEditorPanesToEditors.get(t);n&&e.push(...n.map(i=>i.ctor))}return e}};Ce.add(js.EditorPane,new l1);var D7=Ne("runtime-extensions-editor-label-icon",z.extensions,c("runtimeExtensionEditorLabelIcon","Icon of the runtime extensions editor label.")),ms=class r extends ao{static ID="workbench.runtimeExtensions.input";get typeId(){return r.ID}get capabilities(){return 10}static _instance;static get instance(){return(!r._instance||r._instance.isDisposed())&&(r._instance=new r),r._instance}resource=W.from({scheme:"runtime-extensions",path:"default"});getName(){return c("extensionsInputName","Running Extensions")}getIcon(){return D7}matches(e){return super.matches(e)?!0:e instanceof r}};function yS(){return 1025+Math.floor(64510*Math.random())}var e2=A("IV8InspectProfilingService"),Hp;(t=>{function r(n){return!!(n.samples&&n.timeDeltas)}t.isValidProfile=r;function e(n,i="noAbsolutePaths"){for(let o of n.nodes)o.callFrame&&o.callFrame.url&&(wa(o.callFrame.url)||/^\w[\w\d+.-]*:\/\/\/?/.test(o.callFrame.url))&&(o.callFrame.url=Mi(i,fl(o.callFrame.url)));return n}t.rewriteAbsolutePaths=e})(Hp||={});var tf=A("requestService");function Kp(r){return r.res.statusCode&&r.res.statusCode>=200&&r.res.statusCode<300||r.res.statusCode===1223}function IS(r){return r.res.statusCode===204}async function nf(r){return IS(r)?null:(await _w(r.stream)).toString()}async function rf(r){if(!Kp(r))throw new Error("Server returned "+r.res.statusCode);return nf(r)}async function c1(r){if(!Kp(r))throw new Error("Server returned "+r.res.statusCode);if(IS(r))return null;let t=(await _w(r.stream)).toString();try{return JSON.parse(t)}catch(n){throw n.message+=`:
`+t,n}}var d1;function _7(r){let e=Ce.as(Sr.Configuration),t=d1;d1={id:"http",order:15,title:c("httpConfigurationTitle","HTTP"),type:"object",scope:r,properties:{"http.proxy":{type:"string",pattern:"^(https?|socks|socks4a?|socks5h?)://([^:]*(:[^@]*)?@)?([^:]+|\\[[:0-9a-fA-F]+\\])(:\\d+)?/?$|^$",markdownDescription:c("proxy","The proxy setting to use. If not set, will be inherited from the `http_proxy` and `https_proxy` environment variables."),restricted:!0},"http.proxyStrictSSL":{type:"boolean",default:!0,description:c("strictSSL","Controls whether the proxy server certificate should be verified against the list of supplied CAs."),restricted:!0},"http.proxyKerberosServicePrincipal":{type:"string",markdownDescription:c("proxyKerberosServicePrincipal","Overrides the principal service name for Kerberos authentication with the HTTP proxy. A default based on the proxy hostname is used when this is not set."),restricted:!0},"http.noProxy":{type:"array",items:{type:"string"},markdownDescription:c("noProxy","Specifies domain names for which proxy settings should be ignored for HTTP/HTTPS requests."),restricted:!0},"http.proxyAuthorization":{type:["null","string"],default:null,markdownDescription:c("proxyAuthorization","The value to send as the `Proxy-Authorization` header for every network request."),restricted:!0},"http.proxySupport":{type:"string",enum:["off","on","fallback","override"],enumDescriptions:[c("proxySupportOff","Disable proxy support for extensions."),c("proxySupportOn","Enable proxy support for extensions."),c("proxySupportFallback","Enable proxy support for extensions, fall back to request options, when no proxy found."),c("proxySupportOverride","Enable proxy support for extensions, override request options.")],default:"override",description:c("proxySupport","Use the proxy support for extensions."),restricted:!0},"http.systemCertificates":{type:"boolean",default:!0,description:c("systemCertificates","Controls whether CA certificates should be loaded from the OS. (On Windows and macOS, a reload of the window is required after turning this off.)"),restricted:!0},"http.experimental.systemCertificatesV2":{type:"boolean",tags:["experimental"],default:!1,description:c("systemCertificatesV2","Controls whether experimental loading of CA certificates from the OS should be enabled. This uses a more general approach than the default implemenation."),restricted:!0}}},e.updateConfigurations({add:[d1],remove:t?[t]:[]})}_7(1);var ad=A("nativeHostService");var R7="diagnosticsService",$Je=A(R7);var L7;(s=>{s.enableDiagnostics=!1,s.records=[];let t=new WeakMap,n=0;function i(a,l){if(!t.has(a)){let d=String(++n);t.set(a,d)}return t.get(a)}function o(a,l,d,u){}s.traceSocketEvent=o})(L7||={});var SS=A("remoteAuthorityResolverService");var SZe=A("remoteSocketFactoryService");var P7="signService",EZe=A(P7);var tet=30*1e3;var xS=A("remoteAgentService"),Tet=new class{maxSampleCount=5;sampleDelay=2e3;initial=[];maxInitialCount=3;average=[];maxAverageCount=100;highLatencyMultiple=2;highLatencyMinThreshold=500;highLatencyMaxThreshold=1500;lastMeasurement=void 0;get latency(){return this.lastMeasurement}async measure(r){let e=1/0;for(let n=0;n<this.maxSampleCount;n++){let i=await r.getRoundTripTime();if(i===void 0)return;e=Math.min(e,i/2),await Cn(this.sampleDelay)}this.average.push(e),this.average.length>this.maxAverageCount&&this.average.shift();let t;return this.initial.length<this.maxInitialCount?this.initial.push(e):t=this.initial.reduce((n,i)=>n+i,0)/this.initial.length,this.lastMeasurement={initial:t,current:e,average:this.average.reduce((n,i)=>n+i,0)/this.average.length,high:typeof t>"u"?!1:e>this.highLatencyMaxThreshold||e>this.highLatencyMinThreshold&&e>t*this.highLatencyMultiple},this.lastMeasurement}};var jet=Object.freeze({id:"application",order:100,title:c("applicationConfigurationTitle","Application"),type:"object"}),t2=Object.freeze({id:"workbench",order:7,title:c("workbenchConfigurationTitle","Workbench"),type:"object"}),A7=Object.freeze({id:"security",scope:1,title:c("securityConfigurationTitle","Security"),type:"object",order:7}),Yet=Object.freeze({id:"problems",title:c("problemsConfigurationTitle","Problems"),type:"object",order:101}),O7=Object.freeze({id:"window",order:8,title:c("windowConfigurationTitle","Window"),type:"object"}),M7={ConfigurationMigration:"base.contributions.configuration.migration"},u1=class{migrations=[];_onDidRegisterConfigurationMigrations=new x;onDidRegisterConfigurationMigration=this._onDidRegisterConfigurationMigrations.event;registerConfigurationMigrations(e){this.migrations.push(...e)}},CS=new u1;Ce.add(M7.ConfigurationMigration,CS);var TS=class extends P{constructor(t,n){super();this.configurationService=t;this.workspaceService=n;this._register(this.workspaceService.onDidChangeWorkspaceFolders(async i=>{for(let o of i.added)await this.migrateConfigurationsForFolder(o,CS.migrations)})),this.migrateConfigurations(CS.migrations),this._register(CS.onDidRegisterConfigurationMigration(i=>this.migrateConfigurations(i)))}static ID="workbench.contrib.configurationMigration";async migrateConfigurations(t){await this.migrateConfigurationsForFolder(void 0,t);for(let n of this.workspaceService.getWorkspace().folders)await this.migrateConfigurationsForFolder(n,t)}async migrateConfigurationsForFolder(t,n){await Promise.all([n.map(i=>this.migrateConfigurationsForFolderAndOverride(i,t?.uri))])}async migrateConfigurationsForFolderAndOverride(t,n){let i=this.configurationService.inspect(t.key,{resource:n}),o=this.workspaceService.getWorkbenchState()===3?[["user",2],["userLocal",3],["userRemote",4],["workspace",5],["workspaceFolder",6]]:[["user",2],["userLocal",3],["userRemote",4],["workspace",5]];for(let[s,a]of o){let l=i[s];if(!l)continue;let d=[];if(l.value!==void 0){let u=await this.runMigration(t,s,l.value,n,void 0);for(let p of u??[])d.push([p,[]])}for(let{identifiers:u,value:p}of l.overrides??[])if(p!==void 0){let h=await this.runMigration(t,s,p,n,u);for(let m of h??[])d.push([m,u])}d.length&&await Promise.allSettled(d.map(async([[u,p],h])=>this.configurationService.updateValue(u,p.value,{resource:n,overrideIdentifiers:h},a)))}}async runMigration(t,n,i,o,s){let a=d=>{let p=this.configurationService.inspect(d,{resource:o})[n];if(p)return s?p.overrides?.find(({identifiers:h})=>ii(h,s))?.value:p.value},l=await t.migrateFn(i,a);return Array.isArray(l)?l:[[t.key,l]]}};TS=C([v(0,ke),v(1,Un)],TS);var ES=class extends P{constructor(t){super();this.remoteAgentService=t;this.create()}static ID="workbench.contrib.dynamicWorkbenchSecurityConfiguration";_ready=new Ir;ready=this._ready.p;async create(){try{await this.doCreate()}finally{this._ready.complete()}}async doCreate(){if(!xt&&(await this.remoteAgentService.getEnvironment())?.os!==1)return;Ce.as(Sr.Configuration).registerConfiguration({...A7,properties:{"security.allowedUNCHosts":{type:"array",items:{type:"string",pattern:"^[^\\\\]+$",patternErrorMessage:c("security.allowedUNCHosts.patternErrorMessage","UNC host names must not contain backslashes.")},default:[],markdownDescription:c("security.allowedUNCHosts","A set of UNC host names (without leading or trailing backslash, for example `192.168.0.1` or `my-server`) to allow without user confirmation. If a UNC host is being accessed that is not allowed via this setting or has not been acknowledged via user confirmation, an error will occur and the operation stopped. A restart is required when changing this setting. Find out more about this setting at https://aka.ms/vscode-windows-unc."),scope:2},"security.restrictUNCAccess":{type:"boolean",default:!0,markdownDescription:c("security.restrictUNCAccess","If enabled, only allows access to UNC host names that are allowed by the `#security.allowedUNCHosts#` setting or after user confirmation. Find out more about this setting at https://aka.ms/vscode-windows-unc."),scope:2}}})}};ES=C([v(0,xS)],ES);var of="window.newWindowProfile",wS=class extends P{constructor(t,n){super();this.userDataProfilesService=t;this.configurationService=n;this.registerNewWindowProfileConfiguration(),this._register(this.userDataProfilesService.onDidChangeProfiles(i=>this.registerNewWindowProfileConfiguration())),this.setNewWindowProfile(),this.checkAndResetNewWindowProfileConfig(),this._register(n.onDidChangeConfiguration(i=>{i.source!==7&&i.affectsConfiguration(of)&&this.setNewWindowProfile()})),this._register(this.userDataProfilesService.onDidChangeProfiles(()=>this.checkAndResetNewWindowProfileConfig()))}static ID="workbench.contrib.dynamicWindowConfiguration";configurationNode;newWindowProfile;registerNewWindowProfileConfiguration(){let t=Ce.as(Sr.Configuration),n={...O7,properties:{[of]:{type:["string","null"],default:null,enum:[...this.userDataProfilesService.profiles.map(i=>i.name),null],enumItemLabels:[...this.userDataProfilesService.profiles.map(i=>""),c("active window","Active Window")],description:c("newWindowProfile","Specifies the profile to use when opening a new window. If a profile name is provided, the new window will use that profile. If no profile name is provided, the new window will use the profile of the active window or the Default profile if no active window exists."),scope:1}}};this.configurationNode?t.updateConfigurations({add:[n],remove:[this.configurationNode]}):t.registerConfiguration(n),this.configurationNode=n}setNewWindowProfile(){let t=this.configurationService.getValue(of);this.newWindowProfile=t?this.userDataProfilesService.profiles.find(n=>n.name===t):void 0}checkAndResetNewWindowProfileConfig(){let t=this.configurationService.getValue(of);if(!t)return;let n=this.newWindowProfile?this.userDataProfilesService.profiles.find(i=>i.id===this.newWindowProfile.id):void 0;t!==n?.name&&this.configurationService.updateValue(of,n?.name)}};wS=C([v(0,Yl),v(1,ke)],wS);var Ltt=A("editorResolverService");var N7=Ce.as(Sr.Configuration),F7={...t2,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:c("editor.editorAssociations",'Configure [glob patterns](https://aka.ms/vscode-glob-patterns) to editors (for example `"*.hex": "hexEditor.hexedit"`). These have precedence over the default behavior.'),additionalProperties:{type:"string"}}}};N7.registerConfiguration(F7);var Xtt=new V("workbenchState",void 0,{type:"string",description:c("workbenchState","The kind of workspace opened in the window, either 'empty' (no workspace), 'folder' (single folder) or 'workspace' (multi-root workspace)")}),Qtt=new V("workspaceFolderCount",0,c("workspaceFolderCount","The number of root folders in the workspace")),Jtt=new V("openFolderWorkspaceSupport",!0,!0),Ztt=new V("enterMultiRootWorkspaceSupport",!0,!0),ent=new V("emptyWorkspaceSupport",!0,!0),tnt=new V("dirtyWorkingCopies",!1,c("dirtyWorkingCopies","Whether there are any working copies with unsaved changes")),nnt=new V("remoteName","",c("remoteName","The name of the remote the window is connected to or an empty string if not connected to any remote")),int=new V("virtualWorkspace","",c("virtualWorkspace","The scheme of the current workspace is from a virtual file system or an empty string.")),rnt=new V("temporaryWorkspace",!1,c("temporaryWorkspace","The scheme of the current workspace is from a temporary file system.")),h1=new V("isFullscreen",!1,c("isFullscreen","Whether the main window is in fullscreen mode")),gs=new V("isAuxiliaryWindowFocusedContext",!1,c("isAuxiliaryWindowFocusedContext","Whether an auxiliary window is focused")),ont=new V("hasWebFileSystemAccess",!1,!0),snt=new V("embedderIdentifier",void 0,c("embedderIdentifier","The identifier of the embedder according to the product service, if one is defined")),ant=new V("activeEditorIsDirty",!1,c("activeEditorIsDirty","Whether the active editor has unsaved changes")),lnt=new V("activeEditorIsNotPreview",!1,c("activeEditorIsNotPreview","Whether the active editor is not in preview mode")),dnt=new V("activeEditorIsFirstInGroup",!1,c("activeEditorIsFirstInGroup","Whether the active editor is the first one in its group")),cnt=new V("activeEditorIsLastInGroup",!1,c("activeEditorIsLastInGroup","Whether the active editor is the last one in its group")),unt=new V("activeEditorIsPinned",!1,c("activeEditorIsPinned","Whether the active editor is pinned")),pnt=new V("activeEditorIsReadonly",!1,c("activeEditorIsReadonly","Whether the active editor is read-only")),hnt=new V("activeCompareEditorCanSwap",!1,c("activeCompareEditorCanSwap","Whether the active compare editor can swap sides")),mnt=new V("activeEditorCanToggleReadonly",!0,c("activeEditorCanToggleReadonly","Whether the active editor can toggle between being read-only or writeable")),gnt=new V("activeEditorCanRevert",!1,c("activeEditorCanRevert","Whether the active editor can revert")),fnt=new V("activeEditorCanSplitInGroup",!0),Ec=new V("activeEditor",null,{type:"string",description:c("activeEditor","The identifier of the active editor")}),bnt=new V("activeEditorAvailableEditorIds","",c("activeEditorAvailableEditorIds","The available editor identifiers that are usable for the active editor")),vnt=new V("textCompareEditorVisible",!1,c("textCompareEditorVisible","Whether a text compare editor is visible")),ynt=new V("textCompareEditorActive",!1,c("textCompareEditorActive","Whether a text compare editor is active")),Int=new V("sideBySideEditorActive",!1,c("sideBySideEditorActive","Whether a side by side editor is active")),Snt=new V("groupEditorsCount",0,c("groupEditorsCount","The number of opened editor groups")),xnt=new V("activeEditorGroupEmpty",!1,c("activeEditorGroupEmpty","Whether the active editor group is empty")),Tnt=new V("activeEditorGroupIndex",0,c("activeEditorGroupIndex","The index of the active editor group")),Ent=new V("activeEditorGroupLast",!1,c("activeEditorGroupLast","Whether the active editor group is the last group")),wnt=new V("activeEditorGroupLocked",!1,c("activeEditorGroupLocked","Whether the active editor group is locked")),B7=new V("multipleEditorGroups",!1,c("multipleEditorGroups","Whether there are multiple editor groups opened")),Cnt=B7.toNegated(),knt=new V("multipleEditorsSelectedInGroup",!1,c("multipleEditorsSelectedInGroup","Whether multiple editors have been selected in an editor group")),Dnt=new V("twoEditorsSelectedInGroup",!1,c("twoEditorsSelectedInGroup","Whether exactly two editors have been selected in an editor group")),_nt=new V("SelectedEditorsInGroupFileOrUntitledResourceContextKey",!0,c("SelectedEditorsInGroupFileOrUntitledResourceContextKey","Whether all selected editors in a group have a file or untitled resource associated")),U7=new V("editorPartMultipleEditorGroups",!1,c("editorPartMultipleEditorGroups","Whether there are multiple editor groups opened in an editor part")),Rnt=U7.toNegated(),Lnt=new V("editorPartMaximizedEditorGroup",!1,c("editorPartEditorGroupMaximized","Editor Part has a maximized group")),Pnt=new V("isAuxiliaryEditorPart",!1,c("isAuxiliaryEditorPart","Editor Part is in an auxiliary window")),Ant=new V("editorIsOpen",!1,c("editorIsOpen","Whether an editor is open")),ho=new V("inZenMode",!1,c("inZenMode","Whether Zen mode is enabled")),m1=new V("isCenteredLayout",!1,c("isMainEditorCenteredLayout","Whether centered layout is enabled for the main editor")),Ont=new V("splitEditorsVertically",!1,c("splitEditorsVertically","Whether editors split vertically")),n2=new V("mainEditorAreaVisible",!0,c("mainEditorAreaVisible","Whether the editor area in the main window is visible")),Mnt=new V("editorTabsVisible",!0,c("editorTabsVisible","Whether editor tabs are visible")),wc=new V("sideBarVisible",!1,c("sideBarVisible","Whether the sidebar is visible")),Nnt=new V("sideBarFocus",!1,c("sideBarFocus","Whether the sidebar has keyboard focus")),Fnt=new V("activeViewlet","",c("activeViewlet","The identifier of the active viewlet")),ld=new V("statusBarFocused",!1,c("statusBarFocused","Whether the status bar has keyboard focus")),i2=new V("titleBarStyle",Wt?"native":"custom",c("titleBarStyle","Style of the window title bar")),Bnt=new V("titleBarVisible",!1,c("titleBarVisible","Whether the title bar is visible")),Unt=new V("bannerFocused",!1,c("bannerFocused","Whether the banner has keyboard focus")),Vnt=new V("notificationFocus",!0,c("notificationFocus","Whether a notification has keyboard focus")),Wnt=new V("notificationCenterVisible",!1,c("notificationCenterVisible","Whether the notifications center is visible")),znt=new V("notificationToastsVisible",!1,c("notificationToastsVisible","Whether a notification toast is visible")),Hnt=new V("activeAuxiliary","",c("activeAuxiliary","The identifier of the active auxiliary panel")),Knt=new V("auxiliaryBarFocus",!1,c("auxiliaryBarFocus","Whether the auxiliary bar has keyboard focus")),Xa=new V("auxiliaryBarVisible",!1,c("auxiliaryBarVisible","Whether the auxiliary bar is visible")),Gnt=new V("activePanel","",c("activePanel","The identifier of the active panel")),qnt=new V("panelFocus",!1,c("panelFocus","Whether the panel has keyboard focus")),dd=new V("panelPosition","bottom",c("panelPosition","The position of the panel, always 'bottom'")),ra=new V("panelAlignment","center",c("panelAlignment","The alignment of the panel, either 'center', 'left', 'right' or 'justify'")),Cc=new V("panelVisible",!1,c("panelVisible","Whether the panel is visible")),r2=new V("panelMaximized",!1,c("panelMaximized","Whether the panel is maximized")),Mo=new V("focusedView","",c("focusedView","The identifier of the view that has keyboard focus"));var Xr=class{constructor(e,t,n,i){this._contextKeyService=e;this._fileService=t;this._languageService=n;this._modelService=i;this._schemeKey=Xr.Scheme.bindTo(this._contextKeyService),this._filenameKey=Xr.Filename.bindTo(this._contextKeyService),this._dirnameKey=Xr.Dirname.bindTo(this._contextKeyService),this._pathKey=Xr.Path.bindTo(this._contextKeyService),this._langIdKey=Xr.LangId.bindTo(this._contextKeyService),this._resourceKey=Xr.Resource.bindTo(this._contextKeyService),this._extensionKey=Xr.Extension.bindTo(this._contextKeyService),this._hasResource=Xr.HasResource.bindTo(this._contextKeyService),this._isFileSystemResource=Xr.IsFileSystemResource.bindTo(this._contextKeyService),this._disposables.add(t.onDidChangeFileSystemProviderRegistrations(()=>{let o=this.get();this._isFileSystemResource.set(!!(o&&t.hasProvider(o)))})),this._disposables.add(i.onModelAdded(o=>{To(o.uri,this.get())&&this._setLangId()})),this._disposables.add(i.onModelLanguageChanged(o=>{To(o.model.uri,this.get())&&this._setLangId()}))}static Scheme=new V("resourceScheme",void 0,{type:"string",description:c("resourceScheme","The scheme of the resource")});static Filename=new V("resourceFilename",void 0,{type:"string",description:c("resourceFilename","The file name of the resource")});static Dirname=new V("resourceDirname",void 0,{type:"string",description:c("resourceDirname","The folder name the resource is contained in")});static Path=new V("resourcePath",void 0,{type:"string",description:c("resourcePath","The full path of the resource")});static LangId=new V("resourceLangId",void 0,{type:"string",description:c("resourceLangId","The language identifier of the resource")});static Resource=new V("resource",void 0,{type:"URI",description:c("resource","The full value of the resource including scheme and path")});static Extension=new V("resourceExtname",void 0,{type:"string",description:c("resourceExtname","The extension name of the resource")});static HasResource=new V("resourceSet",void 0,{type:"boolean",description:c("resourceSet","Whether a resource is present or not")});static IsFileSystemResource=new V("isFileSystemResource",void 0,{type:"boolean",description:c("isFileSystemResource","Whether the resource is backed by a file system provider")});_disposables=new Q;_value;_resourceKey;_schemeKey;_filenameKey;_dirnameKey;_pathKey;_langIdKey;_extensionKey;_hasResource;_isFileSystemResource;dispose(){this._disposables.dispose()}_setLangId(){let e=this.get();if(!e){this._langIdKey.set(null);return}let t=this._modelService.getModel(e)?.getLanguageId()??this._languageService.guessLanguageIdByFilepathOrFirstLine(e);this._langIdKey.set(t)}set(e){e=e??void 0,!To(this._value,e)&&(this._value=e,this._contextKeyService.bufferChangeEvents(()=>{this._resourceKey.set(e?e.toString():null),this._schemeKey.set(e?e.scheme:null),this._filenameKey.set(e?oo(e):null),this._dirnameKey.set(e?this.uriToPath(ev(e)):null),this._pathKey.set(e?this.uriToPath(e):null),this._setLangId(),this._extensionKey.set(e?Zb(e):null),this._hasResource.set(!!e),this._isFileSystemResource.set(e?this._fileService.hasProvider(e):!1)}))}uriToPath(e){return e.scheme===le.file?e.fsPath:e.path}reset(){this._value=void 0,this._contextKeyService.bufferChangeEvents(()=>{this._resourceKey.reset(),this._schemeKey.reset(),this._filenameKey.reset(),this._dirnameKey.reset(),this._pathKey.reset(),this._langIdKey.reset(),this._extensionKey.reset(),this._hasResource.reset(),this._isFileSystemResource.reset()})}get(){return this._value}};Xr=C([v(0,Ge),v(1,dt),v(2,ko),v(3,oc)],Xr);var sf="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",xit=new RegExp(sf);var a2="skipWalkthrough",l2="extensionInstallSource";var DS=A("extensionGalleryService");var kS=class extends Error{constructor(t,n){super(t);this.code=n;this.name=n}},mo=A("extensionManagementService"),af="extensionsIdentifiers/disabled";var Tit=A("IGlobalExtensionEnablementService"),Eit=A("IExtensionTipsService"),d2=ye("extensions","Extensions"),wit=ye("preferences","Preferences");var lf=class{constructor(e){this.value=e}isTrustedTelemetryValue=!0},g1=class{telemetryLevel=0;sessionId="someValue.sessionId";machineId="someValue.machineId";sqmId="someValue.sqmId";devDeviceId="someValue.devDeviceId";firstSessionDate="someValue.firstSessionDate";sendErrorTelemetry=!1;publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}setExperimentProperty(){}},rrt=new g1;function Hn(r,e){return r.uuid&&e.uuid?r.uuid===e.uuid:r.id===e.id?!0:om(r.id,e.id)===0}function _S(r,e){return`${r}.${e}`}function f1(r){return r.toLowerCase()}function Qa(r,e){return f1(_S(r??uO,e))}var Trt=new Dn("pprice.better-merge");var b1=class{_generators=new Map;_cache=new WeakMap;register(e,t){this._generators.set(e,t)}readActivationEvents(e){return this._cache.has(e)||this._cache.set(e,this._readActivationEvents(e)),this._cache.get(e)}createActivationEventsMap(e){let t=Object.create(null);for(let n of e){let i=this.readActivationEvents(n);i.length>0&&(t[Dn.toKey(n.identifier)]=i)}return t}_readActivationEvents(e){if(typeof e.main>"u"&&typeof e.browser>"u")return[];let t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let n=0;n<t.length;n++)t[n]==="onUri"&&(t[n]=`onUri:${Dn.toKey(e.identifier)}`);if(!e.contributes)return t;for(let n in e.contributes){let i=this._generators.get(n);if(!i)continue;let o=e.contributes[n],s=Array.isArray(o)?o:[o];try{i(s,t)}catch(a){Ze(a)}}return t}},v1=new b1;var V7={activeComment:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts"},aiRelatedInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts"},aiTextSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts"},aiTextSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProviderNew.d.ts"},attributableCoverage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.attributableCoverage.d.ts"},authLearnMore:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts"},authSession:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts"},canonicalUriProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts"},chatParticipantAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts"},chatParticipantPrivate:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts",version:2},chatProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts"},chatTab:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts"},chatVariableResolver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatVariableResolver.d.ts"},codeActionAI:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts"},codeActionRanges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts"},codiconDecoration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts"},commentReactor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts"},commentReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts"},commentThreadApplicability:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts"},commentingRangeHint:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts"},commentsDraftState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts"},contribAccessibilityHelpContent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts"},contribChatParticipantDetection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribChatParticipantDetection.d.ts"},contribCommentEditorActionsMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts"},contribCommentPeekContext:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts"},contribCommentThreadAdditionalMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts"},contribCommentsViewThreadMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts"},contribDebugCreateConfiguration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDebugCreateConfiguration.d.ts"},contribDiffEditorGutterToolBarMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts"},contribEditSessions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts"},contribEditorContentMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts"},contribIssueReporter:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribIssueReporter.d.ts"},contribLabelFormatterWorkspaceTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts"},contribMenuBarHome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts"},contribMergeEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts"},contribMultiDiffEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts"},contribNotebookStaticPreloads:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts"},contribRemoteHelp:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts"},contribShareMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts"},contribSourceControlHistoryItemMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts"},contribSourceControlHistoryTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryTitleMenu.d.ts"},contribSourceControlInputBoxMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts"},contribSourceControlTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts"},contribStatusBarItems:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts"},contribViewContainerTitle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts"},contribViewsRemote:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts"},contribViewsWelcome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts"},createFileSystemWatcher:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.createFileSystemWatcher.d.ts"},customEditorMove:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts"},debugVisualization:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts"},defaultChatParticipant:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts"},diffCommand:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts"},diffContentOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts"},documentFiltersExclusive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts"},documentPaste:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentPaste.d.ts"},editSessionIdentityProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts"},editorHoverVerbosityLevel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts"},editorInsets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts"},embeddings:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts"},extensionRuntime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts"},extensionsAny:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts"},externalUriOpener:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts"},fileComments:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileComments.d.ts"},fileSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts"},fileSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProviderNew.d.ts"},findFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts"},findFiles2New:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2New.d.ts"},findTextInFiles:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts"},findTextInFilesNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFilesNew.d.ts"},fsChunks:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts"},idToken:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts"},inlineCompletionsAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts"},inlineEdit:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineEdit.d.ts"},interactive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts"},interactiveWindow:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts"},ipc:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts"},languageModelSystem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts"},languageStatusText:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts"},lmTools:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.lmTools.d.ts",version:6},mappedEditsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts"},multiDocumentHighlightProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts"},newSymbolNamesProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts"},notebookCellExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts"},notebookCellExecutionState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecutionState.d.ts"},notebookControllerAffinityHidden:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts"},notebookDeprecated:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts"},notebookExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts"},notebookKernelSource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts"},notebookLiveShare:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts"},notebookMessaging:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts"},notebookMime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts"},notebookReplDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts"},notebookVariableProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts"},portsAttributes:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts"},profileContentHandlers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts"},quickDiffProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts"},quickInputButtonLocation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickInputButtonLocation.d.ts"},quickPickItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts"},quickPickSortByLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts"},resolvers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts"},scmActionButton:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts"},scmHistoryProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts"},scmMultiDiffEditor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts"},scmSelectedProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts"},scmTextDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts"},scmValidation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts"},shareProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts"},showLocal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.showLocal.d.ts"},speech:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts"},tabInputMultiDiff:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts"},tabInputTextMerge:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts"},taskPresentationGroup:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts"},telemetry:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts"},terminalDataWriteEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts"},terminalDimensions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts"},terminalExecuteCommandEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts"},terminalQuickFixProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts"},terminalSelection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts"},testObserver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts"},testRelatedCode:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts"},textSearchCompleteNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchCompleteNew.d.ts"},textSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts"},textSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProviderNew.d.ts"},timeline:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts"},tokenInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts"},treeViewActiveItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts"},treeViewMarkdownMessage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts"},treeViewReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts"},tunnelFactory:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts"},tunnels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts"},workspaceTrust:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}},df=Object.freeze(V7);var cf=class{constructor(e){this.affinity=e}kind=2;equals(e){return this.kind===e.kind&&this.affinity===e.affinity}asString(){return this.affinity===0?"LocalWebWorker":`LocalWebWorker${this.affinity}`}};var E1=Ce.as(As.JSONContribution);var I1=class r{constructor(e,t){this.added=e;this.removed=t}static _toSet(e){let t=new Zd;for(let n=0,i=e.length;n<i;n++)t.add(e[n].description.identifier);return t}static compute(e,t){if(!e||!e.length)return new r(t,[]);if(!t||!t.length)return new r([],e);let n=this._toSet(e),i=this._toSet(t),o=t.filter(a=>!n.has(a.description.identifier)),s=e.filter(a=>!i.has(a.description.identifier));return new r(o,s)}},S1=class{name;defaultExtensionKind;_handler;_users;_delta;constructor(e,t){this.name=e,this.defaultExtensionKind=t,this._handler=null,this._users=null,this._delta=null}setHandler(e){if(this._handler!==null)throw new Error("Handler already set!");return this._handler=e,this._handle(),{dispose:()=>{this._handler=null}}}acceptUsers(e){this._delta=I1.compute(this._users,e),this._users=e,this._handle()}_handle(){if(!(this._handler===null||this._users===null||this._delta===null))try{this._handler(this._users,this._delta)}catch(e){Ze(e)}}},W7={type:"string",enum:["ui","workspace"],enumDescriptions:[c("ui","UI extension kind. In a remote window, such extensions are enabled only when available on the local machine."),c("workspace","Workspace extension kind. In a remote window, such extensions are enabled only when available on the remote.")]},c2="vscode://schemas/vscode-extensions",x1={properties:{engines:{type:"object",description:c("vscode.extension.engines","Engine compatibility."),properties:{vscode:{type:"string",description:c("vscode.extension.engines.vscode","For VS Code extensions, specifies the VS Code version that the extension is compatible with. Cannot be *. For example: ^0.10.5 indicates compatibility with a minimum VS Code version of 0.10.5."),default:"^1.22.0"}}},publisher:{description:c("vscode.extension.publisher","The publisher of the VS Code extension."),type:"string"},displayName:{description:c("vscode.extension.displayName","The display name for the extension used in the VS Code gallery."),type:"string"},categories:{description:c("vscode.extension.categories","The categories used by the VS Code gallery to categorize the extension."),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:hO},{type:"string",const:"Languages",deprecationMessage:c("vscode.extension.category.languages.deprecated","Use 'Programming  Languages' instead")}]}},galleryBanner:{type:"object",description:c("vscode.extension.galleryBanner","Banner used in the VS Code marketplace."),properties:{color:{description:c("vscode.extension.galleryBanner.color","The banner color on the VS Code marketplace page header."),type:"string"},theme:{description:c("vscode.extension.galleryBanner.theme","The color theme for the font used in the banner."),type:"string",enum:["dark","light"]}}},contributes:{description:c("vscode.extension.contributes","All contributions of the VS Code extension represented by this package."),type:"object",properties:{},default:{}},preview:{type:"boolean",description:c("vscode.extension.preview","Sets the extension to be flagged as a Preview in the Marketplace.")},enableProposedApi:{type:"boolean",deprecationMessage:c("vscode.extension.enableProposedApi.deprecated","Use `enabledApiProposals` instead.")},enabledApiProposals:{markdownDescription:c("vscode.extension.enabledApiProposals","Enable API proposals to try them out. Only valid **during development**. Extensions **cannot be published** with this property. For more details visit: https://code.visualstudio.com/api/advanced-topics/using-proposed-api"),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(df).map(r=>r),markdownEnumDescriptions:Object.values(df).map(r=>r.proposal)}},api:{markdownDescription:c("vscode.extension.api","Describe the API provided by this extension. For more details visit: https://code.visualstudio.com/api/advanced-topics/remote-extensions#handling-dependencies-with-remote-extensions"),type:"string",enum:["none"],enumDescriptions:[c("vscode.extension.api.none","Give up entirely the ability to export any APIs. This allows other extensions that depend on this extension to run in a separate extension host process or in a remote machine.")]},activationEvents:{description:c("vscode.extension.activationEvents","Activation events for the VS Code extension."),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:c("vscode.extension.activationEvents.onWebviewPanel","An activation event emmited when a webview is loaded of a certain viewType"),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:c("vscode.extension.activationEvents.onLanguage","An activation event emitted whenever a file that resolves to the specified language gets opened."),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:c("vscode.extension.activationEvents.onCommand","An activation event emitted whenever the specified command gets invoked."),body:"onCommand:${2:commandId}"},{label:"onDebug",description:c("vscode.extension.activationEvents.onDebug","An activation event emitted whenever a user is about to start debugging or about to setup debug configurations."),body:"onDebug"},{label:"onDebugInitialConfigurations",description:c("vscode.extension.activationEvents.onDebugInitialConfigurations",'An activation event emitted whenever a "launch.json" needs to be created (and all provideDebugConfigurations methods need to be called).'),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:c("vscode.extension.activationEvents.onDebugDynamicConfigurations",'An activation event emitted whenever a list of all debug configurations needs to be created (and all provideDebugConfigurations methods for the "dynamic" scope need to be called).'),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:c("vscode.extension.activationEvents.onDebugResolve","An activation event emitted whenever a debug session with the specific type is about to be launched (and a corresponding resolveDebugConfiguration method needs to be called)."),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:c("vscode.extension.activationEvents.onDebugAdapterProtocolTracker","An activation event emitted whenever a debug session with the specific type is about to be launched and a debug protocol tracker might be needed."),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:c("vscode.extension.activationEvents.workspaceContains","An activation event emitted whenever a folder is opened that contains at least a file matching the specified glob pattern."),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:c("vscode.extension.activationEvents.onStartupFinished","An activation event emitted after the start-up finished (after all `*` activated extensions have finished activating)."),body:"onStartupFinished"},{label:"onTaskType",description:c("vscode.extension.activationEvents.onTaskType","An activation event emitted whenever tasks of a certain type need to be listed or resolved."),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:c("vscode.extension.activationEvents.onFileSystem","An activation event emitted whenever a file or folder is accessed with the given scheme."),body:"onFileSystem:${1:scheme}"},{label:"onEditSession",description:c("vscode.extension.activationEvents.onEditSession","An activation event emitted whenever an edit session is accessed with the given scheme."),body:"onEditSession:${1:scheme}"},{label:"onSearch",description:c("vscode.extension.activationEvents.onSearch","An activation event emitted whenever a search is started in the folder with the given scheme."),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:c("vscode.extension.activationEvents.onView","An activation event emitted whenever the specified view is expanded.")},{label:"onUri",body:"onUri",description:c("vscode.extension.activationEvents.onUri","An activation event emitted whenever a system-wide Uri directed towards this extension is open.")},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:c("vscode.extension.activationEvents.onOpenExternalUri","An activation event emitted whenever a external uri (such as an http or https link) is being opened.")},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:c("vscode.extension.activationEvents.onCustomEditor","An activation event emitted whenever the specified custom editor becomes visible.")},{label:"onNotebook",body:"onNotebook:${1:type}",description:c("vscode.extension.activationEvents.onNotebook","An activation event emitted whenever the specified notebook document is opened.")},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:c("vscode.extension.activationEvents.onAuthenticationRequest","An activation event emitted whenever sessions are requested from the specified authentication provider.")},{label:"onRenderer",description:c("vscode.extension.activationEvents.onRenderer","An activation event emitted whenever a notebook output renderer is used."),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:c("vscode.extension.activationEvents.onTerminalProfile","An activation event emitted when a specific terminal profile is launched.")},{label:"onTerminalQuickFixRequest",body:"onTerminalQuickFixRequest:${1:quickFixId}",description:c("vscode.extension.activationEvents.onTerminalQuickFixRequest","An activation event emitted when a command matches the selector associated with this ID")},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:c("vscode.extension.activationEvents.onWalkthrough","An activation event emitted when a specified walkthrough is opened.")},{label:"onIssueReporterOpened",body:"onIssueReporterOpened",description:c("vscode.extension.activationEvents.onIssueReporterOpened","An activation event emitted when the issue reporter is opened.")},{label:"onChatParticipant",body:"onChatParticipant:${1:participantId}",description:c("vscode.extension.activationEvents.onChatParticipant","An activation event emitted when the specified chat participant is invoked.")},{label:"onLanguageModelTool",body:"onLanguageModelTool:${1:toolId}",description:c("vscode.extension.activationEvents.onLanguageModelTool","An activation event emitted when the specified language model tool is invoked.")},{label:"*",description:c("vscode.extension.activationEvents.star","An activation event emitted on VS Code startup. To ensure a great end user experience, please use this activation event in your extension only when no other activation events combination works in your use-case."),body:"*"}]}},badges:{type:"array",description:c("vscode.extension.badges","Array of badges to display in the sidebar of the Marketplace's extension page."),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:c("vscode.extension.badges.url","Badge image URL.")},href:{type:"string",description:c("vscode.extension.badges.href","Badge link.")},description:{type:"string",description:c("vscode.extension.badges.description","Badge description.")}}}},markdown:{type:"string",description:c("vscode.extension.markdown","Controls the Markdown rendering engine used in the Marketplace. Either github (default) or standard."),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:c("vscode.extension.qna","Controls the Q&A link in the Marketplace. Set to marketplace to enable the default Marketplace Q & A site. Set to a string to provide the URL of a custom Q & A site. Set to false to disable Q & A altogether."),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:c("vscode.extension.extensionDependencies","Dependencies to other extensions. The identifier of an extension is always ${publisher}.${name}. For example: vscode.csharp."),type:"array",uniqueItems:!0,items:{type:"string",pattern:sf}},extensionPack:{description:c("vscode.extension.contributes.extensionPack","A set of extensions that can be installed together. The identifier of an extension is always ${publisher}.${name}. For example: vscode.csharp."),type:"array",uniqueItems:!0,items:{type:"string",pattern:sf}},extensionKind:{description:c("extensionKind","Define the kind of an extension. `ui` extensions are installed and run on the local machine while `workspace` extensions run on the remote."),type:"array",items:W7,default:["workspace"],defaultSnippets:[{body:["ui"],description:c("extensionKind.ui","Define an extension which can run only on the local machine when connected to remote window.")},{body:["workspace"],description:c("extensionKind.workspace","Define an extension which can run only on the remote machine when connected remote window.")},{body:["ui","workspace"],description:c("extensionKind.ui-workspace","Define an extension which can run on either side, with a preference towards running on the local machine.")},{body:["workspace","ui"],description:c("extensionKind.workspace-ui","Define an extension which can run on either side, with a preference towards running on the remote machine.")},{body:[],description:c("extensionKind.empty","Define an extension which cannot run in a remote context, neither on the local, nor on the remote machine.")}]},capabilities:{description:c("vscode.extension.capabilities","Declare the set of supported capabilities by the extension."),type:"object",properties:{virtualWorkspaces:{description:c("vscode.extension.capabilities.virtualWorkspaces","Declares whether the extension should be enabled in virtual workspaces. A virtual workspace is a workspace which is not backed by any on-disk resources. When false, this extension will be automatically disabled in virtual workspaces. Default is true."),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:c("vscode.extension.capabilities.virtualWorkspaces.supported","Declares the level of support for virtual workspaces by the extension."),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[c("vscode.extension.capabilities.virtualWorkspaces.supported.limited","The extension will be enabled in virtual workspaces with some functionality disabled."),c("vscode.extension.capabilities.virtualWorkspaces.supported.true","The extension will be enabled in virtual workspaces with all functionality enabled."),c("vscode.extension.capabilities.virtualWorkspaces.supported.false","The extension will not be enabled in virtual workspaces.")]},description:{type:"string",markdownDescription:c("vscode.extension.capabilities.virtualWorkspaces.description","A description of how virtual workspaces affects the extensions behavior and why it is needed. This only applies when `supported` is not `true`.")}}},untrustedWorkspaces:{description:c("vscode.extension.capabilities.untrustedWorkspaces","Declares how the extension should be handled in untrusted workspaces."),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:c("vscode.extension.capabilities.untrustedWorkspaces.supported","Declares the level of support for untrusted workspaces by the extension."),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[c("vscode.extension.capabilities.untrustedWorkspaces.supported.limited","The extension will be enabled in untrusted workspaces with some functionality disabled."),c("vscode.extension.capabilities.untrustedWorkspaces.supported.true","The extension will be enabled in untrusted workspaces with all functionality enabled."),c("vscode.extension.capabilities.untrustedWorkspaces.supported.false","The extension will not be enabled in untrusted workspaces.")]},restrictedConfigurations:{description:c("vscode.extension.capabilities.untrustedWorkspaces.restrictedConfigurations","A list of configuration keys contributed by the extension that should not use workspace values in untrusted workspaces."),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:c("vscode.extension.capabilities.untrustedWorkspaces.description","A description of how workspace trust affects the extensions behavior and why it is needed. This only applies when `supported` is not `true`.")}}}}},sponsor:{description:c("vscode.extension.contributes.sponsor","Specify the location from where users can sponsor your extension."),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:c("vscode.extension.contributes.sponsor.url","URL from where users can sponsor your extension. It must be a valid URL with a HTTP or HTTPS protocol. Example value: https://github.com/sponsors/nvaccess"),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:c("vscode.extension.scripts.prepublish","Script executed before the package is published as a VS Code extension."),type:"string"},"vscode:uninstall":{description:c("vscode.extension.scripts.uninstall","Uninstall hook for VS Code extension. Script that gets executed when the extension is completely uninstalled from VS Code which is when VS Code is restarted (shutdown and start) after the extension is uninstalled. Only Node scripts are supported."),type:"string"}}},icon:{type:"string",description:c("vscode.extension.icon","The path to a 128x128 pixel icon.")},l10n:{type:"string",description:c({key:"vscode.extension.l10n",comment:['{Locked="bundle.l10n._locale_.json"}','{Locked="vscode.l10n API"}']},"The relative path to a folder containing localization (bundle.l10n.*.json) files. Must be specified if you are using the vscode.l10n API.")},pricing:{type:"string",markdownDescription:c("vscode.extension.pricing","The pricing information for the extension. Can be Free (default) or Trial. For more details visit: https://code.visualstudio.com/api/working-with-extensions/publishing-extension#extension-pricing-label"),enum:["Free","Trial"],default:"Free"}}},T1=class{_extensionPoints=new Map;registerExtensionPoint(e){if(this._extensionPoints.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);let t=new S1(e.extensionPoint,e.defaultExtensionKind);return this._extensionPoints.set(e.extensionPoint,t),e.activationEventsGenerator&&v1.register(e.extensionPoint,e.activationEventsGenerator),x1.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,E1.registerSchema(c2,x1),t}getExtensionPoints(){return Array.from(this._extensionPoints.values())}},u2={ExtensionsRegistry:"ExtensionsRegistry"};Ce.add(u2.ExtensionsRegistry,new T1);var Ja=Ce.as(u2.ExtensionsRegistry);E1.registerSchema(c2,x1);E1.registerSchema(iF,{properties:{extensionEnabledApiProposals:{description:c("product.extensionEnabledApiProposals","API proposals that the respective extensions can freely use."),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(df),markdownEnumDescriptions:Object.values(df).map(r=>r.proposal)}}]}}}});var Uot=Object.freeze({identifier:new Dn("nullExtensionDescription"),name:"Null Extension Description",version:"0.0.0",publisher:"vscode",engines:{vscode:""},extensionLocation:W.parse("void:location"),isBuiltin:!1,targetPlatform:"undefined",isUserBuiltin:!1,isUnderDevelopment:!1});var Kn=A("extensionService");var Vst=A("ILanguageFeaturesService");var H7=/^[a-zA-Z][a-zA-Z0-9\+\-\.]+:/;function p2(r){return!!(r&&r.match(H7))}var K7=c("unknownSource","Unknown Source");function h2(r,e,t,n,i){let o=s=>typeof r.sourceReference=="number"&&r.sourceReference>0?W.from({scheme:w1,path:s?.replace(/^\/+/g,"/"),query:`session=${t}&ref=${r.sourceReference}`}):s&&p2(s)?n.asCanonicalUri(W.parse(s)):s&&wa(s)?n.asCanonicalUri(W.file(s)):n.asCanonicalUri(W.from({scheme:w1,path:s,query:`session=${t}`}));try{return o(e)}catch{return i.error("Invalid path from debug adapter: "+e),o("/invalidDebugSource")}}var RS="debug.breakpoint",LS="debug.functionbreakpoint",PS="debug.databreakpoint",AS="debug.exceptionbreakpoint",OS="debug.watchexpressions",m2="debug.chosenenvironment",g2="debug.uxstate",MS=class extends P{constructor(t,n,i,o){super();this.storageService=t;this.textFileService=n;this.uriIdentityService=i;this.logService=o;this._register(t.onDidChangeValue(1,void 0,this._store)(s=>{if(s.external)switch(s.key){case RS:return this.breakpoints.set(this.loadBreakpoints(),void 0);case LS:return this.functionBreakpoints.set(this.loadFunctionBreakpoints(),void 0);case AS:return this.exceptionBreakpoints.set(this.loadExceptionBreakpoints(),void 0);case PS:return this.dataBreakpoints.set(this.loadDataBreakpoints(),void 0);case OS:return this.watchExpressions.set(this.loadWatchExpressions(),void 0)}}))}breakpoints=Ko(this,this.loadBreakpoints());functionBreakpoints=Ko(this,this.loadFunctionBreakpoints());exceptionBreakpoints=Ko(this,this.loadExceptionBreakpoints());dataBreakpoints=Ko(this,this.loadDataBreakpoints());watchExpressions=Ko(this,this.loadWatchExpressions());loadDebugUxState(){return this.storageService.get(g2,1,"default")}storeDebugUxState(t){this.storageService.store(g2,t,1,1)}loadBreakpoints(){let t;try{t=JSON.parse(this.storageService.get(RS,1,"[]")).map(n=>(n.uri=W.revive(n.uri),new Dc(n,this.textFileService,this.uriIdentityService,this.logService,n.id)))}catch{}return t||[]}loadFunctionBreakpoints(){let t;try{t=JSON.parse(this.storageService.get(LS,1,"[]")).map(n=>new _c(n,n.id))}catch{}return t||[]}loadExceptionBreakpoints(){let t;try{t=JSON.parse(this.storageService.get(AS,1,"[]")).map(n=>new Gp(n,n.id))}catch{}return t||[]}loadDataBreakpoints(){let t;try{t=JSON.parse(this.storageService.get(PS,1,"[]")).map(n=>new Rc(n,n.id))}catch{}return t||[]}loadWatchExpressions(){let t;try{t=JSON.parse(this.storageService.get(OS,1,"[]")).map(n=>new kc(n.name,n.id))}catch{}return t||[]}loadChosenEnvironments(){return JSON.parse(this.storageService.get(m2,1,"{}"))}storeChosenEnvironments(t){this.storageService.store(m2,JSON.stringify(t),1,1)}storeWatchExpressions(t){t.length?this.storageService.store(OS,JSON.stringify(t.map(n=>({name:n.name,id:n.getId()}))),1,1):this.storageService.remove(OS,1)}storeBreakpoints(t){let n=t.getBreakpoints();n.length?this.storageService.store(RS,JSON.stringify(n),1,1):this.storageService.remove(RS,1);let i=t.getFunctionBreakpoints();i.length?this.storageService.store(LS,JSON.stringify(i),1,1):this.storageService.remove(LS,1);let o=t.getDataBreakpoints().filter(a=>a.canPersist);o.length?this.storageService.store(PS,JSON.stringify(o),1,1):this.storageService.remove(PS,1);let s=t.getExceptionBreakpoints();s.length?this.storageService.store(AS,JSON.stringify(s),1,1):this.storageService.remove(AS,1)}};MS=C([v(0,Xe),v(1,Xl),v(2,Ln),v(3,Et)],MS);function f2(r,e,t=[]){let n=e.getSession(),i=[[y2.key,e.variableMenuContext||""],[I2.key,!!e.evaluateName],[v2.key,!!n?.capabilities.supportsReadMemoryRequest&&e.memoryReference!==void 0],[S2.key,!!e.presentationHint?.attributes?.includes("readOnly")||e.presentationHint?.lazy],[b2.key,n?.configuration.type],...t];return r.createOverlay(i)}var Ilt=A("debugVisualizerService"),C1=class{constructor(e,t){this.handle=e;this.viz=t}get name(){return this.viz.name}get iconPath(){return this.viz.iconPath}get iconClass(){return this.viz.iconClass}async resolve(e){return this.viz.visualization??=await this.handle.resolveDebugVisualizer(this.viz,e)}async execute(){await this.handle.executeDebugVisualizerCommand(this.viz.id)}},x2={object:[],dispose:()=>{}},NS=class{constructor(e,t,n){this.contextKeyService=e;this.extensionService=t;this.logService=n;G7.setHandler((i,{added:o,removed:s})=>{this.registrations=this.registrations.filter(a=>!s.some(l=>Dn.equals(l.description.identifier,a.extensionId))),o.forEach(a=>this.processExtensionRegistration(a.description))})}handles=new Map;trees=new Map;didActivate=new Map;registrations=[];async getApplicableFor(e,t){if(!(e instanceof fs))return x2;let n=e.getThreadId();if(n===void 0)return x2;let i=this.getVariableContext(n,e),o=f2(this.contextKeyService,e,[[C2.key,e.name],[E2.key,e.value],[w2.key,e.type]]),s=await Promise.all(this.registrations.map(async l=>{if(!o.contextMatchesRules(l.expr))return;let d=this.didActivate.get(l.id);if(d||(d=this.extensionService.activateByEvent(`onDebugVisualizer:${l.id}`),this.didActivate.set(l.id,d)),await d,t.isCancellationRequested)return;let u=this.handles.get(T2(l.extensionId,l.id));return u&&{handle:u,result:await u.provideDebugVisualizers(i,t)}})),a={object:s.filter(LP).flatMap(l=>l.result.map(d=>new C1(l.handle,d))),dispose:()=>{for(let l of s)l?.handle.disposeDebugVisualizers(l.result.map(d=>d.id))}};return t.isCancellationRequested&&a.dispose(),a}register(e){let t=T2(e.extensionId,e.id);return this.handles.set(t,e),ie(()=>this.handles.delete(t))}registerTree(e,t){return this.trees.set(e,t),ie(()=>this.trees.delete(e))}async getVisualizedNodeFor(e,t){if(!(t instanceof fs))return;let n=t.getThreadId();if(n===void 0)return;let i=this.trees.get(e);if(i)try{let o=await i.getTreeItem(this.getVariableContext(n,t));return o?new uf(this,e,o,t):void 0}catch(o){this.logService.warn("Failed to get visualized node",o);return}}async getVisualizedChildren(e,t){return(await this.trees.get(e)?.getChildren(t)||[]).map(i=>new uf(this,e,i,void 0))}async editTreeItem(e,t,n){let i=await this.trees.get(e)?.editItem?.(t.id,n);i&&Object.assign(t,i)}getVariableContext(e,t){let n={sessionId:t.getSession()?.getId()||"",containerId:t.parent instanceof fs?t.reference:void 0,threadId:e,variable:{name:t.name,value:t.value,type:t.type,evaluateName:t.evaluateName,variablesReference:t.reference||0,indexedVariables:t.indexedVariables,memoryReference:t.memoryReference,namedVariables:t.namedVariables,presentationHint:t.presentationHint}};for(let i=t;i instanceof fs;i=i.parent)i.parent instanceof FS&&(n.frameId=i.parent.stackFrame.frameId);return n}processExtensionRegistration(e){let t=e.contributes?.debugVisualizers;if(t instanceof Array)for(let{when:n,id:i}of t)try{let o=X.deserialize(n);o&&this.registrations.push({expr:o,id:i,extensionId:e.identifier})}catch(o){this.logService.error(`Error processing debug visualizer registration from extension '${e.identifier.value}'`,o)}}};NS=C([v(0,Ge),v(1,Kn),v(2,Et)],NS);var T2=(r,e)=>`${Dn.toKey(r)}\0${e}`,G7=Ja.registerExtensionPoint({extensionPoint:"debugVisualizers",jsonSchema:{type:"array",items:{type:"object",properties:{id:{type:"string",description:"Name of the debug visualizer"},when:{type:"string",description:"Condition when the debug visualizer is applicable"}},required:["id","when"]}},activationEventsGenerator:(r,e)=>{for(let t of r)t.id&&e.push(`onDebugVisualizer:${t.id}`)}});var _lt=Ne("disassembly-editor-label-icon",z.debug,c("disassemblyEditorLabelIcon","Icon of the disassembly editor label."));var mf=class r{constructor(e,t,n,i,o=0,s=0,a=void 0,l=0,d=void 0,u=void 0){this.session=e;this.threadId=t;this._reference=n;this.id=i;this.namedVariables=o;this.indexedVariables=s;this.memoryReference=a;this.startOfVariables=l;this.presentationHint=d;this.valueLocationReference=u}static allValues=new Map;static BASE_CHUNK_SIZE=100;type;valueChanged=!1;_value="";children;get reference(){return this._reference}set reference(e){this._reference=e,this.children=void 0}async evaluateLazy(){if(typeof this.reference>"u")return;let e=await this.session.variables(this.reference,this.threadId,void 0,void 0,void 0);if(!e||!e.body||!e.body.variables||e.body.variables.length!==1)return;let t=e.body.variables[0];this.reference=t.variablesReference,this._value=t.value,this.namedVariables=t.namedVariables,this.indexedVariables=t.indexedVariables,this.memoryReference=t.memoryReference,this.presentationHint=t.presentationHint,this.valueLocationReference=t.valueLocationReference,this.adoptLazyResponse(t)}adoptLazyResponse(e){}getChildren(){return this.children||(this.children=this.doGetChildren()),this.children}async doGetChildren(){if(!this.hasChildren)return[];if(!this.getChildrenInChunks)return this.fetchVariables(void 0,void 0,void 0);let e=this.namedVariables?await this.fetchVariables(void 0,void 0,"named"):[],t=r.BASE_CHUNK_SIZE;for(;this.indexedVariables&&this.indexedVariables>t*r.BASE_CHUNK_SIZE;)t*=r.BASE_CHUNK_SIZE;if(this.indexedVariables&&this.indexedVariables>t){let i=Math.ceil(this.indexedVariables/t);for(let o=0;o<i;o++){let s=(this.startOfVariables||0)+o*t,a=Math.min(t,this.indexedVariables-o*t);e.push(new fs(this.session,this.threadId,this,this.reference,`[${s}..${s+a-1}]`,"","",void 0,a,void 0,{kind:"virtual"},void 0,void 0,!0,s))}return e}let n=await this.fetchVariables(this.startOfVariables,this.indexedVariables,"indexed");return e.concat(n)}getId(){return this.id}getSession(){return this.session}get value(){return this._value}get hasChildren(){return!!this.reference&&this.reference>0&&!this.presentationHint?.lazy}async fetchVariables(e,t,n){try{let i=await this.session.variables(this.reference||0,this.threadId,n,e,t);if(!i||!i.body||!i.body.variables)return[];let o=new Map,s=i.body.variables.filter(a=>!!a).map(a=>{if(lt(a.value)&&lt(a.name)&&typeof a.variablesReference=="number"){let l=o.get(a.name)||0,d=l>0?l.toString():"";return o.set(a.name,l+1),new fs(this.session,this.threadId,this,a.variablesReference,a.name,a.evaluateName,a.value,a.namedVariables,a.indexedVariables,a.memoryReference,a.presentationHint,a.type,a.__vscodeVariableMenuContext,!0,0,d,a.declarationLocationReference,a.valueLocationReference)}return new fs(this.session,this.threadId,this,0,"",void 0,c("invalidVariableAttributes","Invalid variable attributes"),0,0,void 0,{kind:"virtual"},void 0,void 0,!1)});return this.session.autoExpandLazyVariables&&await Promise.all(s.map(a=>a.presentationHint?.lazy&&a.evaluateLazy())),s}catch(i){return[new fs(this.session,this.threadId,this,0,"",void 0,i.message,0,0,void 0,{kind:"virtual"},void 0,void 0,!1)]}}get getChildrenInChunks(){return!!this.indexedVariables}set value(e){this._value=e,this.valueChanged=!!r.allValues.get(this.getId())&&r.allValues.get(this.getId())!==kc.DEFAULT_VALUE&&r.allValues.get(this.getId())!==e,r.allValues.set(this.getId(),e)}toString(){return this.value}async evaluateExpression(e,t,n,i,o=!1,s){if(!t||!n&&i!=="repl")return this.value=i==="repl"?c("startDebugFirst","Please start a debug session to evaluate expressions"):kc.DEFAULT_VALUE,this.reference=0,!1;this.session=t;try{let a=await t.evaluate(e,n?n.frameId:void 0,i,s);return a&&a.body?(this.value=a.body.result||"",this.reference=a.body.variablesReference,this.namedVariables=a.body.namedVariables,this.indexedVariables=a.body.indexedVariables,this.memoryReference=a.body.memoryReference,this.type=a.body.type||this.type,this.presentationHint=a.body.presentationHint,this.valueLocationReference=a.body.valueLocationReference,!o&&a.body.presentationHint?.lazy&&await this.evaluateLazy(),!0):!1}catch(a){return this.value=a.message||"",this.reference=0,!1}}};function k1(r,e){e&&e.body&&(r.value=e.body.value||"",r.type=e.body.type||r.type,r.reference=e.body.variablesReference,r.namedVariables=e.body.namedVariables,r.indexedVariables=e.body.indexedVariables)}var uf=class{constructor(e,t,n,i){this.visualizer=e;this.treeId=t;this.treeItem=n;this.original=i}errorMessage;id=In();evaluateLazy(){return Promise.resolve()}getChildren(){return this.visualizer.getVisualizedChildren(this.treeId,this.treeItem.id)}getId(){return this.id}get name(){return this.treeItem.label}get value(){return this.treeItem.description||""}get hasChildren(){return this.treeItem.collapsibleState!==0}async edit(e){try{return await this.visualizer.editTreeItem(this.treeId,this.treeItem,e),!0}catch(t){return this.errorMessage=t.message,!1}}},kc=class r extends mf{constructor(t,n=In()){super(void 0,void 0,0,n);this.name=t;this.available=!1,t&&(this.value=r.DEFAULT_VALUE)}static DEFAULT_VALUE=c("notAvailable","not available");available;_onDidChangeValue=new x;onDidChangeValue=this._onDidChangeValue.event;async evaluate(t,n,i,o,s){let a=this.value===r.DEFAULT_VALUE;this.available=await this.evaluateExpression(this.name,t,n,i,o,s),(a||this.valueChanged)&&this._onDidChangeValue.fire(this)}toString(){return`${this.name}
${this.value}`}async setExpression(t,n){if(!this.session)return;let i=await this.session.setExpression(n.frameId,this.name,t);k1(this,i)}},fs=class extends mf{constructor(t,n,i,o,s,a,l,d,u,p,h,m=void 0,f=void 0,g=!0,y=0,T="",E=void 0,D=void 0){super(t,n,o,`variable:${i.getId()}:${s}:${T}`,d,u,p,y,h,D);this.parent=i;this.name=s;this.evaluateName=a;this.variableMenuContext=f;this.available=g;this.declarationLocationReference=E;this.value=l||"",this.type=m}errorMessage;getThreadId(){return this.threadId}async setVariable(t,n){if(this.session)try{if(this.session.capabilities.supportsSetExpression&&!this.session.capabilities.supportsSetVariable&&this.evaluateName)return this.setExpression(t,n);let i=await this.session.setVariable(this.parent.reference,this.name,t);k1(this,i)}catch(i){this.errorMessage=i.message}}async setExpression(t,n){if(!this.session||!this.evaluateName)return;let i=await this.session.setExpression(n.frameId,this.evaluateName,t);k1(this,i)}toString(){return this.name?`${this.name}: ${this.value}`:this.value}adoptLazyResponse(t){this.evaluateName=t.evaluateName}toDebugProtocolObject(){return{name:this.name,variablesReference:this.reference||0,memoryReference:this.memoryReference,value:this.value,evaluateName:this.evaluateName}}},FS=class extends mf{constructor(t,n,i,o,s,a,l,d){super(t.thread.session,t.thread.threadId,o,`scope:${i}:${n}`,a,l);this.stackFrame=t;this.name=i;this.expensive=s;this.range=d}toString(){return this.name}toDebugProtocolObject(){return{name:this.name,variablesReference:this.reference||0,expensive:this.expensive}}};var D1=class{constructor(e,t){this.enabled=e;this.id=t}getId(){return this.id}};function pf(r,e){return $d({supportsConditionalBreakpoints:!!e.supportsConditionalBreakpoints,supportsHitConditionalBreakpoints:!!e.supportsHitConditionalBreakpoints,supportsLogPoints:!!e.supportsLogPoints,supportsFunctionBreakpoints:!!e.supportsFunctionBreakpoints,supportsDataBreakpoints:!!e.supportsDataBreakpoints,supportsInstructionBreakpoints:!!e.supportsInstructionBreakpoints},r)}var Lc=class extends D1{sessionData=new Map;data;hitCondition;condition;logMessage;mode;modeLabel;constructor(e,t){super(t.enabled??!0,e),this.condition=t.condition,this.hitCondition=t.hitCondition,this.logMessage=t.logMessage,this.mode=t.mode,this.modeLabel=t.modeLabel}setSessionData(e,t){t?(t.sessionId=e,this.sessionData.set(e,t)):this.sessionData.delete(e);let n=Array.from(this.sessionData.values()),i=di(n.filter(o=>o.verified),o=>`${o.line}:${o.column}`);i.length?this.data=i.length===1?i[0]:void 0:this.data=n.length?n[0]:void 0}get message(){if(this.data)return this.data.message}get verified(){return this.data?this.data.verified:!0}get sessionsThatVerified(){let e=[];for(let[t,n]of this.sessionData)n.verified&&e.push(t);return e}getIdFromAdapter(e){let t=this.sessionData.get(e);return t?t.id:void 0}getDebugProtocolBreakpoint(e){let t=this.sessionData.get(e);if(t)return{id:t.id,verified:t.verified,message:t.message,source:t.source,line:t.line,column:t.column,endLine:t.endLine,endColumn:t.endColumn,instructionReference:t.instructionReference,offset:t.offset}}toJSON(){return{id:this.getId(),enabled:this.enabled,condition:this.condition,hitCondition:this.hitCondition,logMessage:this.logMessage,mode:this.mode,modeLabel:this.modeLabel}}},Dc=class extends Lc{constructor(t,n,i,o,s=In()){super(s,t);this.textFileService=n;this.uriIdentityService=i;this.logService=o;this._uri=t.uri,this._lineNumber=t.lineNumber,this._column=t.column,this._adapterData=t.adapterData,this.triggeredBy=t.triggeredBy}sessionsDidTrigger;_uri;_adapterData;_lineNumber;_column;triggeredBy;toDAP(){return{line:this.sessionAgnosticData.lineNumber,column:this.sessionAgnosticData.column,condition:this.condition,hitCondition:this.hitCondition,logMessage:this.logMessage,mode:this.mode}}get originalUri(){return this._uri}get lineNumber(){return this.verified&&this.data&&typeof this.data.line=="number"?this.data.line:this._lineNumber}get verified(){return this.data?this.data.verified&&!this.textFileService.isDirty(this._uri):!0}get pending(){return this.data?!1:this.triggeredBy!==void 0}get uri(){return this.verified&&this.data&&this.data.source?h2(this.data.source,this.data.source.path,this.data.sessionId,this.uriIdentityService,this.logService):this._uri}get column(){return this.verified&&this.data&&typeof this.data.column=="number"?this.data.column:this._column}get message(){return this.textFileService.isDirty(this.uri)?c("breakpointDirtydHover","Unverified breakpoint. File is modified, please restart debug session."):super.message}get adapterData(){return this.data&&this.data.source&&this.data.source.adapterData?this.data.source.adapterData:this._adapterData}get endLineNumber(){return this.verified&&this.data?this.data.endLine:void 0}get endColumn(){return this.verified&&this.data?this.data.endColumn:void 0}get sessionAgnosticData(){return{lineNumber:this._lineNumber,column:this._column}}get supported(){return this.data?!(this.logMessage&&!this.data.supportsLogPoints||this.condition&&!this.data.supportsConditionalBreakpoints||this.hitCondition&&!this.data.supportsHitConditionalBreakpoints):!0}setSessionData(t,n){super.setSessionData(t,n),this._adapterData||(this._adapterData=this.adapterData)}toJSON(){return{...super.toJSON(),uri:this._uri,lineNumber:this._lineNumber,column:this._column,adapterData:this.adapterData,triggeredBy:this.triggeredBy}}toString(){return`${Iu(this.uri)} ${this.lineNumber}`}setSessionDidTrigger(t){this.sessionsDidTrigger??=new Set,this.sessionsDidTrigger.add(t)}getSessionDidTrigger(t){return!!this.sessionsDidTrigger?.has(t)}update(t){t.hasOwnProperty("lineNumber")&&!zt(t.lineNumber)&&(this._lineNumber=t.lineNumber),t.hasOwnProperty("column")&&(this._column=t.column),t.hasOwnProperty("condition")&&(this.condition=t.condition),t.hasOwnProperty("hitCondition")&&(this.hitCondition=t.hitCondition),t.hasOwnProperty("logMessage")&&(this.logMessage=t.logMessage),t.hasOwnProperty("mode")&&(this.mode=t.mode,this.modeLabel=t.modeLabel),t.hasOwnProperty("triggeredBy")&&(this.triggeredBy=t.triggeredBy,this.sessionsDidTrigger=void 0)}},_c=class extends Lc{name;constructor(e,t=In()){super(t,e),this.name=e.name}toDAP(){return{name:this.name,condition:this.condition,hitCondition:this.hitCondition}}toJSON(){return{...super.toJSON(),name:this.name}}get supported(){return this.data?this.data.supportsFunctionBreakpoints:!0}toString(){return this.name}},Rc=class extends Lc{sessionDataIdForAddr=new WeakMap;description;src;canPersist;accessTypes;accessType;constructor(e,t=In()){super(t,e),this.description=e.description,"dataId"in e&&(e.src={type:0,dataId:e.dataId}),this.src=e.src,this.canPersist=e.canPersist,this.accessTypes=e.accessTypes,this.accessType=e.accessType,e.initialSessionData&&this.sessionDataIdForAddr.set(e.initialSessionData.session,e.initialSessionData.dataId)}async toDAP(e){let t;if(this.src.type===0)t=this.src.dataId;else{let n=this.sessionDataIdForAddr.get(e);if(!n){if(n=(await e.dataBytesBreakpointInfo(this.src.address,this.src.bytes))?.dataId,!n)return;this.sessionDataIdForAddr.set(e,n)}t=n}return{dataId:t,accessType:this.accessType,condition:this.condition,hitCondition:this.hitCondition}}toJSON(){return{...super.toJSON(),description:this.description,src:this.src,accessTypes:this.accessTypes,accessType:this.accessType,canPersist:this.canPersist}}get supported(){return this.data?this.data.supportsDataBreakpoints:!0}toString(){return this.description}},Gp=class extends Lc{supportedSessions=new Set;filter;label;supportsCondition;description;conditionDescription;fallback=!1;constructor(e,t=In()){super(t,e),this.filter=e.filter,this.label=e.label,this.supportsCondition=e.supportsCondition,this.description=e.description,this.conditionDescription=e.conditionDescription,this.fallback=e.fallback||!1}toJSON(){return{...super.toJSON(),filter:this.filter,label:this.label,enabled:this.enabled,supportsCondition:this.supportsCondition,conditionDescription:this.conditionDescription,condition:this.condition,fallback:this.fallback,description:this.description}}setSupportedSession(e,t){t?this.supportedSessions.add(e):this.supportedSessions.delete(e)}setFallback(e){this.fallback=e}get supported(){return!0}isSupportedSession(e){return e?this.supportedSessions.has(e):this.fallback}matches(e){return this.filter===e.filter&&this.label===e.label&&this.supportsCondition===!!e.supportsCondition&&this.conditionDescription===e.conditionDescription&&this.description===e.description}toString(){return this.label}},hf=class extends Lc{instructionReference;offset;canPersist;address;constructor(e,t=In()){super(t,e),this.instructionReference=e.instructionReference,this.offset=e.offset,this.canPersist=e.canPersist,this.address=e.address}toDAP(){return{instructionReference:this.instructionReference,condition:this.condition,hitCondition:this.hitCondition,mode:this.mode,offset:this.offset}}toJSON(){return{...super.toJSON(),instructionReference:this.instructionReference,offset:this.offset,canPersist:this.canPersist,address:this.address}}get supported(){return this.data?this.data.supportsInstructionBreakpoints:!0}toString(){return this.instructionReference}};var BS=class extends P{constructor(t,n,i,o){super();this.textFileService=n;this.uriIdentityService=i;this.logService=o;this._register(yo(s=>{this.breakpoints=t.breakpoints.read(s),this.functionBreakpoints=t.functionBreakpoints.read(s),this.exceptionBreakpoints=t.exceptionBreakpoints.read(s),this.dataBreakpoints=t.dataBreakpoints.read(s),this._onDidChangeBreakpoints.fire(void 0)})),this._register(yo(s=>{this.watchExpressions=t.watchExpressions.read(s),this._onDidChangeWatchExpressions.fire(void 0)})),this.instructionBreakpoints=[],this.sessions=[];for(let s of this.watchExpressions)this.watchExpressionChangeListeners.set(s.getId(),s.onDidChangeValue(a=>this._onDidChangeWatchExpressionValue.fire(a)))}sessions;schedulers=new Map;breakpointsActivated=!0;_onDidChangeBreakpoints=this._register(new x);_onDidChangeCallStack=this._register(new x);_onDidChangeWatchExpressions=this._register(new x);_onDidChangeWatchExpressionValue=this._register(new x);_breakpointModes=new Map;breakpoints;functionBreakpoints;exceptionBreakpoints;dataBreakpoints;watchExpressions;watchExpressionChangeListeners=this._register(new hr);instructionBreakpoints;getId(){return"root"}getSession(t,n=!1){if(t)return this.getSessions(n).find(i=>i.getId()===t)}getSessions(t=!1){return this.sessions.filter(n=>t||n.state!==0)}addSession(t){this.sessions=this.sessions.filter(o=>!(o.getId()===t.getId()||o.state===0&&o.configuration.name===t.configuration.name));let n=1;for(;this.sessions.some(o=>o.getLabel()===t.getLabel());)t.setName(`${t.configuration.name} ${++n}`);let i=-1;t.parentSession&&(i=vE(this.sessions,o=>o.parentSession===t.parentSession||o===t.parentSession)),i>=0?this.sessions.splice(i+1,0,t):this.sessions.push(t),this._onDidChangeCallStack.fire(void 0)}get onDidChangeBreakpoints(){return this._onDidChangeBreakpoints.event}get onDidChangeCallStack(){return this._onDidChangeCallStack.event}get onDidChangeWatchExpressions(){return this._onDidChangeWatchExpressions.event}get onDidChangeWatchExpressionValue(){return this._onDidChangeWatchExpressionValue.event}rawUpdate(t){let n=this.sessions.find(i=>i.getId()===t.sessionId);n&&(n.rawUpdate(t),this._onDidChangeCallStack.fire(void 0))}clearThreads(t,n,i=void 0){let o=this.sessions.find(s=>s.getId()===t);this.schedulers.forEach(s=>{s.scheduler.dispose(),s.completeDeferred.complete()}),this.schedulers.clear(),o&&(o.clearThreads(n,i),this._onDidChangeCallStack.fire(void 0))}async fetchCallstack(t,n){if(t.reachedEndOfCallStack)return;let i=t.stoppedDetails?.totalFrames,o=typeof i=="number"?i-t.getCallStack().length:void 0;(!n||o&&n>o)&&(n=o),n&&n>0&&(await t.fetchCallStack(n),this._onDidChangeCallStack.fire())}refreshTopOfCallstack(t,n=!0){if(t.session.capabilities.supportsDelayedStackTraceLoading){let o=Promise.resolve(),s=new Promise((a,l)=>{o=t.fetchCallStack(1).then(()=>{if(!n){a(),this._onDidChangeCallStack.fire();return}if(!this.schedulers.has(t.getId())){let u=new Ir;this.schedulers.set(t.getId(),{completeDeferred:u,scheduler:new Bn(()=>{t.fetchCallStack(19).then(()=>{let p=t.getStaleCallStack(),h=t.getCallStack(),m=p.length!==h.length;for(let f=1;f<p.length&&!m;f++)m=!p[f].equals(h[f]);m&&this._onDidChangeCallStack.fire()}).finally(()=>{u.complete(),this.schedulers.delete(t.getId())})},420)})}let d=this.schedulers.get(t.getId());d.scheduler.schedule(),d.completeDeferred.p.then(a,l),this._onDidChangeCallStack.fire()})});return{topCallStack:o,wholeCallStack:s}}let i=t.fetchCallStack();return{wholeCallStack:i,topCallStack:i}}getBreakpoints(t){if(t){let n=t.uri?.toString(),i=t.originalUri?.toString();return this.breakpoints.filter(o=>!(n&&o.uri.toString()!==n||i&&o.originalUri.toString()!==i||t.lineNumber&&o.lineNumber!==t.lineNumber||t.column&&o.column!==t.column||t.enabledOnly&&(!this.breakpointsActivated||!o.enabled)||t.triggeredOnly&&o.triggeredBy===void 0))}return this.breakpoints}getFunctionBreakpoints(){return this.functionBreakpoints}getDataBreakpoints(){return this.dataBreakpoints}getExceptionBreakpoints(){return this.exceptionBreakpoints}getExceptionBreakpointsForSession(t){return this.exceptionBreakpoints.filter(n=>n.isSupportedSession(t))}getInstructionBreakpoints(){return this.instructionBreakpoints}setExceptionBreakpointsForSession(t,n){if(!n)return;let i=!1;n.forEach(o=>{let s=this.exceptionBreakpoints.filter(a=>a.matches(o)).pop();s||(i=!0,s=new Gp({filter:o.filter,label:o.label,enabled:!!o.default,supportsCondition:!!o.supportsCondition,description:o.description,conditionDescription:o.conditionDescription}),this.exceptionBreakpoints.push(s)),s.setSupportedSession(t,!0)}),i&&this._onDidChangeBreakpoints.fire(void 0)}removeExceptionBreakpointsForSession(t){this.exceptionBreakpoints.forEach(n=>n.setSupportedSession(t,!1))}setExceptionBreakpointFallbackSession(t){this.exceptionBreakpoints.forEach(n=>n.setFallback(n.isSupportedSession(t)))}setExceptionBreakpointCondition(t,n){t.condition=n,this._onDidChangeBreakpoints.fire(void 0)}areBreakpointsActivated(){return this.breakpointsActivated}setBreakpointsActivated(t){this.breakpointsActivated=t,this._onDidChangeBreakpoints.fire(void 0)}addBreakpoints(t,n,i=!0){let o=n.map(s=>new Dc({uri:t,lineNumber:s.lineNumber,column:s.column,enabled:s.enabled??!0,condition:s.condition,hitCondition:s.hitCondition,logMessage:s.logMessage,triggeredBy:s.triggeredBy,adapterData:void 0,mode:s.mode,modeLabel:s.modeLabel},this.textFileService,this.uriIdentityService,this.logService,s.id));return this.breakpoints=this.breakpoints.concat(o),this.breakpointsActivated=!0,this.sortAndDeDup(),i&&this._onDidChangeBreakpoints.fire({added:o,sessionOnly:!1}),o}removeBreakpoints(t){this.breakpoints=this.breakpoints.filter(n=>!t.some(i=>i.getId()===n.getId())),this._onDidChangeBreakpoints.fire({removed:t,sessionOnly:!1})}updateBreakpoints(t){let n=[];this.breakpoints.forEach(i=>{let o=t.get(i.getId());o&&(i.update(o),n.push(i))}),this.sortAndDeDup(),this._onDidChangeBreakpoints.fire({changed:n,sessionOnly:!1})}setBreakpointSessionData(t,n,i){this.breakpoints.forEach(o=>{if(!i)o.setSessionData(t,void 0);else{let s=i.get(o.getId());s&&o.setSessionData(t,pf(s,n))}}),this.functionBreakpoints.forEach(o=>{if(!i)o.setSessionData(t,void 0);else{let s=i.get(o.getId());s&&o.setSessionData(t,pf(s,n))}}),this.dataBreakpoints.forEach(o=>{if(!i)o.setSessionData(t,void 0);else{let s=i.get(o.getId());s&&o.setSessionData(t,pf(s,n))}}),this.exceptionBreakpoints.forEach(o=>{if(!i)o.setSessionData(t,void 0);else{let s=i.get(o.getId());s&&o.setSessionData(t,pf(s,n))}}),this.instructionBreakpoints.forEach(o=>{if(!i)o.setSessionData(t,void 0);else{let s=i.get(o.getId());s&&o.setSessionData(t,pf(s,n))}}),this._onDidChangeBreakpoints.fire({sessionOnly:!0})}getDebugProtocolBreakpoint(t,n){let i=this.breakpoints.find(o=>o.getId()===t);if(i)return i.getDebugProtocolBreakpoint(n)}getBreakpointModes(t){return[...this._breakpointModes.values()].filter(n=>n.appliesTo.includes(t))}registerBreakpointModes(t,n){for(let i of n){let o=`${i.mode}/${i.label}`,s=this._breakpointModes.get(o);if(s)for(let a of i.appliesTo)s.appliesTo.includes(a)||s.appliesTo.push(a);else{let a=[...this._breakpointModes.values()].find(l=>l!==s&&l.label===i.label);a&&(a.label=`${a.label} (${a.firstFromDebugType})`),this._breakpointModes.set(o,{mode:i.mode,label:a?`${i.label} (${t})`:i.label,firstFromDebugType:t,description:i.description,appliesTo:i.appliesTo.slice()})}}}sortAndDeDup(){this.breakpoints=this.breakpoints.sort((t,n)=>t.uri.toString()!==n.uri.toString()?Iu(t.uri).localeCompare(Iu(n.uri)):t.lineNumber===n.lineNumber?t.column&&n.column?t.column-n.column:1:t.lineNumber-n.lineNumber),this.breakpoints=di(this.breakpoints,t=>`${t.uri.toString()}:${t.lineNumber}:${t.column}`)}setEnablement(t,n){if(t instanceof Dc||t instanceof _c||t instanceof Gp||t instanceof Rc||t instanceof hf){let i=[];t.enabled!==n&&(t instanceof Dc||t instanceof _c||t instanceof Rc||t instanceof hf)&&i.push(t),t.enabled=n,n&&(this.breakpointsActivated=!0),this._onDidChangeBreakpoints.fire({changed:i,sessionOnly:!1})}}enableOrDisableAllBreakpoints(t){let n=[];this.breakpoints.forEach(i=>{i.enabled!==t&&n.push(i),i.enabled=t}),this.functionBreakpoints.forEach(i=>{i.enabled!==t&&n.push(i),i.enabled=t}),this.dataBreakpoints.forEach(i=>{i.enabled!==t&&n.push(i),i.enabled=t}),this.instructionBreakpoints.forEach(i=>{i.enabled!==t&&n.push(i),i.enabled=t}),t&&(this.breakpointsActivated=!0),this._onDidChangeBreakpoints.fire({changed:n,sessionOnly:!1})}addFunctionBreakpoint(t,n){let i=new _c(t,n);return this.functionBreakpoints.push(i),this._onDidChangeBreakpoints.fire({added:[i],sessionOnly:!1}),i}updateFunctionBreakpoint(t,n){let i=this.functionBreakpoints.find(o=>o.getId()===t);i&&(typeof n.name=="string"&&(i.name=n.name),typeof n.condition=="string"&&(i.condition=n.condition),typeof n.hitCondition=="string"&&(i.hitCondition=n.hitCondition),this._onDidChangeBreakpoints.fire({changed:[i],sessionOnly:!1}))}removeFunctionBreakpoints(t){let n;t?(n=this.functionBreakpoints.filter(i=>i.getId()===t),this.functionBreakpoints=this.functionBreakpoints.filter(i=>i.getId()!==t)):(n=this.functionBreakpoints,this.functionBreakpoints=[]),this._onDidChangeBreakpoints.fire({removed:n,sessionOnly:!1})}addDataBreakpoint(t,n){let i=new Rc(t,n);this.dataBreakpoints.push(i),this._onDidChangeBreakpoints.fire({added:[i],sessionOnly:!1})}updateDataBreakpoint(t,n){let i=this.dataBreakpoints.find(o=>o.getId()===t);i&&(typeof n.condition=="string"&&(i.condition=n.condition),typeof n.hitCondition=="string"&&(i.hitCondition=n.hitCondition),this._onDidChangeBreakpoints.fire({changed:[i],sessionOnly:!1}))}removeDataBreakpoints(t){let n;t?(n=this.dataBreakpoints.filter(i=>i.getId()===t),this.dataBreakpoints=this.dataBreakpoints.filter(i=>i.getId()!==t)):(n=this.dataBreakpoints,this.dataBreakpoints=[]),this._onDidChangeBreakpoints.fire({removed:n,sessionOnly:!1})}addInstructionBreakpoint(t){let n=new hf(t);this.instructionBreakpoints.push(n),this._onDidChangeBreakpoints.fire({added:[n],sessionOnly:!0})}removeInstructionBreakpoints(t,n){let i=[];if(t)for(let o=0;o<this.instructionBreakpoints.length;o++){let s=this.instructionBreakpoints[o];s.instructionReference===t&&(n===void 0||s.offset===n)&&(i.push(s),this.instructionBreakpoints.splice(o--,1))}else i=this.instructionBreakpoints,this.instructionBreakpoints=[];this._onDidChangeBreakpoints.fire({removed:i,sessionOnly:!1})}getWatchExpressions(){return this.watchExpressions}addWatchExpression(t){let n=new kc(t||"");return this.watchExpressionChangeListeners.set(n.getId(),n.onDidChangeValue(i=>this._onDidChangeWatchExpressionValue.fire(i))),this.watchExpressions.push(n),this._onDidChangeWatchExpressions.fire(n),n}renameWatchExpression(t,n){let i=this.watchExpressions.filter(o=>o.getId()===t);i.length===1&&(i[0].name=n,this._onDidChangeWatchExpressions.fire(i[0]))}removeWatchExpressions(t=null){if(this.watchExpressions=t?this.watchExpressions.filter(n=>n.getId()!==t):[],this._onDidChangeWatchExpressions.fire(void 0),!t){this.watchExpressionChangeListeners.clearAndDisposeAll();return}this.watchExpressionChangeListeners.deleteAndDispose(t)}moveWatchExpression(t,n){let i=this.watchExpressions.find(o=>o.getId()===t);i&&(this.watchExpressions=this.watchExpressions.filter(o=>o.getId()!==t),this.watchExpressions=this.watchExpressions.slice(0,n).concat(i,this.watchExpressions.slice(n)),this._onDidChangeWatchExpressions.fire(void 0))}sourceIsNotAvailable(t){this.sessions.forEach(n=>{let i=n.getSourceForUri(t);i&&(i.available=!1)}),this._onDidChangeCallStack.fire(void 0)}};BS=C([v(1,Xl),v(2,Ln),v(3,Et)],BS);var US=class{_state;constructor(){this._state=0}get state(){return this._state}set state(e){e>this._state&&(this._state=e)}isOK(){return this._state===0}isFatal(){return this._state===4}},gf=class{_problemReporter;constructor(e){this._problemReporter=e}reset(){this._problemReporter.status.state=0}get problemReporter(){return this._problemReporter}info(e){this._problemReporter.info(e)}warn(e){this._problemReporter.warn(e)}error(e){this._problemReporter.error(e)}fatal(e){this._problemReporter.fatal(e)}};var qp=(o=>(o[o.Default=0]="Default",o[o.Relative=1]="Relative",o[o.Absolute=2]="Absolute",o[o.AutoDetect=3]="AutoDetect",o[o.Search=4]="Search",o))(qp||{});(e=>{function r(t){return t=t.toLowerCase(),t==="absolute"?2:t==="relative"?1:t==="autodetect"?3:t==="search"?4:void 0}e.fromString=r})(qp||={});var HS=(t=>(t[t.File=0]="File",t[t.Location=1]="Location",t))(HS||{});(e=>{function r(t){return t=t.toLowerCase(),t==="file"?0:t==="location"?1:void 0}e.fromString=r})(HS||={});var KS=(n=>(n[n.allDocuments=0]="allDocuments",n[n.openDocuments=1]="openDocuments",n[n.closedDocuments=2]="closedDocuments",n))(KS||{});(e=>{function r(t){return t=t.toLowerCase(),t==="alldocuments"?0:t==="opendocuments"?1:t==="closeddocuments"?2:void 0}e.fromString=r})(KS||={});function q7(r){return!!(r&&lt(r.name))}var Ict=Ds===1?`\r
`:`
`;var cd;(a=>{let r;(d=>{function l(u){let p=u;return p&&lt(p.regexp)}d.is=l})(r=a.CheckedProblemPattern||={});let e;(d=>{function l(u){let p=u;return p&&lt(p.name)}d.is=l})(e=a.NamedProblemPattern||={});let t;(d=>{function l(u){let p=u;return p&&e.is(p)&&lt(p.regexp)}d.is=l})(t=a.NamedCheckedProblemPattern||={});let n;(d=>{function l(u){return u&&Array.isArray(u)}d.is=l})(n=a.MultiLineProblemPattern||={});let i;(d=>{function l(u){if(!n.is(u))return!1;for(let p of u)if(!a.CheckedProblemPattern.is(p))return!1;return!0}d.is=l})(i=a.MultiLineCheckedProblemPattern||={});let o;(d=>{function l(u){let p=u;return p&&lt(p.name)&&Array.isArray(p.patterns)&&i.is(p.patterns)}d.is=l})(o=a.NamedMultiLineCheckedProblemPattern||={});function s(l){return lt(l.name)}a.isNamedProblemMatcher=s})(cd||={});var VS=class extends gf{constructor(e){super(e)}parse(e){if(cd.NamedMultiLineCheckedProblemPattern.is(e))return this.createNamedMultiLineProblemPattern(e);if(cd.MultiLineCheckedProblemPattern.is(e))return this.createMultiLineProblemPattern(e);if(cd.NamedCheckedProblemPattern.is(e)){let t=this.createSingleProblemPattern(e);return t.name=e.name,t}else return cd.CheckedProblemPattern.is(e)?this.createSingleProblemPattern(e):(this.error(c("ProblemPatternParser.problemPattern.missingRegExp","The problem pattern is missing a regular expression.")),null)}createSingleProblemPattern(e){let t=this.doCreateSingleProblemPattern(e,!0);return t===void 0?null:(t.kind===void 0&&(t.kind=1),this.validateProblemPattern([t])?t:null)}createNamedMultiLineProblemPattern(e){let t=this.createMultiLineProblemPattern(e.patterns);return t?{name:e.name,label:e.label?e.label:e.name,patterns:t}:null}createMultiLineProblemPattern(e){let t=[];for(let n=0;n<e.length;n++){let i=this.doCreateSingleProblemPattern(e[n],!1);if(i===void 0)return null;n<e.length-1&&!jn(i.loop)&&i.loop&&(i.loop=!1,this.error(c("ProblemPatternParser.loopProperty.notLast","The loop property is only supported on the last line matcher."))),t.push(i)}return t[0].kind===void 0&&(t[0].kind=1),this.validateProblemPattern(t)?t:null}doCreateSingleProblemPattern(e,t){let n=this.createRegularExpression(e.regexp);if(n===void 0)return;let i={regexp:n};e.kind&&(i.kind=HS.fromString(e.kind));function o(s,a,l,d){let u=a[d];typeof u=="number"&&(s[l]=u)}return o(i,e,"file","file"),o(i,e,"location","location"),o(i,e,"line","line"),o(i,e,"character","column"),o(i,e,"endLine","endLine"),o(i,e,"endCharacter","endColumn"),o(i,e,"severity","severity"),o(i,e,"code","code"),o(i,e,"message","message"),(e.loop===!0||e.loop===!1)&&(i.loop=e.loop),t&&(i.location||i.kind===0?i=$d(i,{file:1,message:0},!1):i=$d(i,{file:1,line:2,character:3,message:0},!1)),i}validateProblemPattern(e){let t=!1,n=!1,i=!1,o=!1,s=e[0].kind===void 0?1:e[0].kind;return e.forEach((a,l)=>{l!==0&&a.kind&&this.error(c("ProblemPatternParser.problemPattern.kindProperty.notFirst","The problem pattern is invalid. The kind property must be provided only in the first element")),t=t||!jn(a.file),n=n||!jn(a.message),i=i||!jn(a.location),o=o||!jn(a.line)}),t&&n?s===1&&!(i||o)?(this.error(c("ProblemPatternParser.problemPattern.missingLocation",'The problem pattern is invalid. It must either have kind: "file" or have a line or location match group.')),!1):!0:(this.error(c("ProblemPatternParser.problemPattern.missingProperty","The problem pattern is invalid. It must have at least have a file and a message.")),!1)}createRegularExpression(e){let t;try{t=new RegExp(e)}catch{this.error(c("ProblemPatternParser.invalidRegexp",`Error: The string {0} is not a valid regular expression.
`,e))}return t}},WS=class{constructor(e,t=new US){this._collector=e;this._validationStatus=t}info(e){this._validationStatus.state=1,this._collector.info(e)}warn(e){this._validationStatus.state=2,this._collector.warn(e)}error(e){this._validationStatus.state=3,this._collector.error(e)}fatal(e){this._validationStatus.state=4,this._collector.error(e)}get status(){return this._validationStatus}},zS;(d=>(d.ProblemPattern={default:{regexp:"^([^\\\\s].*)\\\\((\\\\d+,\\\\d+)\\\\):\\\\s*(.*)$",file:1,location:2,message:3},type:"object",additionalProperties:!1,properties:{regexp:{type:"string",description:c("ProblemPatternSchema.regexp","The regular expression to find an error, warning or info in the output.")},kind:{type:"string",description:c("ProblemPatternSchema.kind","whether the pattern matches a location (file and line) or only a file.")},file:{type:"integer",description:c("ProblemPatternSchema.file","The match group index of the filename. If omitted 1 is used.")},location:{type:"integer",description:c("ProblemPatternSchema.location","The match group index of the problem's location. Valid location patterns are: (line), (line,column) and (startLine,startColumn,endLine,endColumn). If omitted (line,column) is assumed.")},line:{type:"integer",description:c("ProblemPatternSchema.line","The match group index of the problem's line. Defaults to 2")},column:{type:"integer",description:c("ProblemPatternSchema.column","The match group index of the problem's line character. Defaults to 3")},endLine:{type:"integer",description:c("ProblemPatternSchema.endLine","The match group index of the problem's end line. Defaults to undefined")},endColumn:{type:"integer",description:c("ProblemPatternSchema.endColumn","The match group index of the problem's end line character. Defaults to undefined")},severity:{type:"integer",description:c("ProblemPatternSchema.severity","The match group index of the problem's severity. Defaults to undefined")},code:{type:"integer",description:c("ProblemPatternSchema.code","The match group index of the problem's code. Defaults to undefined")},message:{type:"integer",description:c("ProblemPatternSchema.message","The match group index of the message. If omitted it defaults to 4 if location is specified. Otherwise it defaults to 5.")},loop:{type:"boolean",description:c("ProblemPatternSchema.loop","In a multi line matcher loop indicated whether this pattern is executed in a loop as long as it matches. Can only specified on a last pattern in a multi line pattern.")}}},d.NamedProblemPattern=kn(d.ProblemPattern),d.NamedProblemPattern.properties=kn(d.NamedProblemPattern.properties)||{},d.NamedProblemPattern.properties.name={type:"string",description:c("NamedProblemPatternSchema.name","The name of the problem pattern.")},d.MultiLineProblemPattern={type:"array",items:d.ProblemPattern},d.NamedMultiLineProblemPattern={type:"object",additionalProperties:!1,properties:{name:{type:"string",description:c("NamedMultiLineProblemPatternSchema.name","The name of the problem multi line problem pattern.")},patterns:{type:"array",description:c("NamedMultiLineProblemPatternSchema.patterns","The actual patterns."),items:d.ProblemPattern}}},d.WatchingPattern={type:"object",additionalProperties:!1,properties:{regexp:{type:"string",description:c("WatchingPatternSchema.regexp","The regular expression to detect the begin or end of a background task.")},file:{type:"integer",description:c("WatchingPatternSchema.file","The match group index of the filename. Can be omitted.")}}},d.PatternType={anyOf:[{type:"string",description:c("PatternTypeSchema.name","The name of a contributed or predefined pattern")},d.ProblemPattern,d.MultiLineProblemPattern],description:c("PatternTypeSchema.description","A problem pattern or the name of a contributed or predefined problem pattern. Can be omitted if base is specified.")},d.ProblemMatcher={type:"object",additionalProperties:!1,properties:{base:{type:"string",description:c("ProblemMatcherSchema.base","The name of a base problem matcher to use.")},owner:{type:"string",description:c("ProblemMatcherSchema.owner","The owner of the problem inside Code. Can be omitted if base is specified. Defaults to 'external' if omitted and base is not specified.")},source:{type:"string",description:c("ProblemMatcherSchema.source","A human-readable string describing the source of this diagnostic, e.g. 'typescript' or 'super lint'.")},severity:{type:"string",enum:["error","warning","info"],description:c("ProblemMatcherSchema.severity","The default severity for captures problems. Is used if the pattern doesn't define a match group for severity.")},applyTo:{type:"string",enum:["allDocuments","openDocuments","closedDocuments"],description:c("ProblemMatcherSchema.applyTo","Controls if a problem reported on a text document is applied only to open, closed or all documents.")},pattern:d.PatternType,fileLocation:{oneOf:[{type:"string",enum:["absolute","relative","autoDetect","search"]},{type:"array",prefixItems:[{type:"string",enum:["absolute","relative","autoDetect","search"]}],minItems:1,maxItems:1,additionalItems:!1},{type:"array",prefixItems:[{type:"string",enum:["relative","autoDetect"]},{type:"string"}],minItems:2,maxItems:2,additionalItems:!1,examples:[["relative","${workspaceFolder}"],["autoDetect","${workspaceFolder}"]]},{type:"array",prefixItems:[{type:"string",enum:["search"]},{type:"object",properties:{include:{oneOf:[{type:"string"},{type:"array",items:{type:"string"}}]},exclude:{oneOf:[{type:"string"},{type:"array",items:{type:"string"}}]}},required:["include"]}],minItems:2,maxItems:2,additionalItems:!1,examples:[["search",{include:["${workspaceFolder}"]}],["search",{include:["${workspaceFolder}"],exclude:[]}]]}],description:c("ProblemMatcherSchema.fileLocation","Defines how file names reported in a problem pattern should be interpreted. A relative fileLocation may be an array, where the second element of the array is the path of the relative file location. The search fileLocation mode, performs a deep (and, possibly, heavy) file system search within the directories specified by the include/exclude properties of the second element (or the current workspace directory if not specified).")},background:{type:"object",additionalProperties:!1,description:c("ProblemMatcherSchema.background","Patterns to track the begin and end of a matcher active on a background task."),properties:{activeOnStart:{type:"boolean",description:c("ProblemMatcherSchema.background.activeOnStart","If set to true the background monitor is in active mode when the task starts. This is equals of issuing a line that matches the beginsPattern")},beginsPattern:{oneOf:[{type:"string"},d.WatchingPattern],description:c("ProblemMatcherSchema.background.beginsPattern","If matched in the output the start of a background task is signaled.")},endsPattern:{oneOf:[{type:"string"},d.WatchingPattern],description:c("ProblemMatcherSchema.background.endsPattern","If matched in the output the end of a background task is signaled.")}}},watching:{type:"object",additionalProperties:!1,deprecationMessage:c("ProblemMatcherSchema.watching.deprecated","The watching property is deprecated. Use background instead."),description:c("ProblemMatcherSchema.watching","Patterns to track the begin and end of a watching matcher."),properties:{activeOnStart:{type:"boolean",description:c("ProblemMatcherSchema.watching.activeOnStart","If set to true the watcher is in active mode when the task starts. This is equals of issuing a line that matches the beginPattern")},beginsPattern:{oneOf:[{type:"string"},d.WatchingPattern],description:c("ProblemMatcherSchema.watching.beginsPattern","If matched in the output the start of a watching task is signaled.")},endsPattern:{oneOf:[{type:"string"},d.WatchingPattern],description:c("ProblemMatcherSchema.watching.endsPattern","If matched in the output the end of a watching task is signaled.")}}}}},d.LegacyProblemMatcher=kn(d.ProblemMatcher),d.LegacyProblemMatcher.properties=kn(d.LegacyProblemMatcher.properties)||{},d.LegacyProblemMatcher.properties.watchedTaskBeginsRegExp={type:"string",deprecationMessage:c("LegacyProblemMatcherSchema.watchedBegin.deprecated","This property is deprecated. Use the watching property instead."),description:c("LegacyProblemMatcherSchema.watchedBegin","A regular expression signaling that a watched tasks begins executing triggered through file watching.")},d.LegacyProblemMatcher.properties.watchedTaskEndsRegExp={type:"string",deprecationMessage:c("LegacyProblemMatcherSchema.watchedEnd.deprecated","This property is deprecated. Use the watching property instead."),description:c("LegacyProblemMatcherSchema.watchedEnd","A regular expression signaling that a watched tasks ends executing.")},d.NamedProblemMatcher=kn(d.ProblemMatcher),d.NamedProblemMatcher.properties=kn(d.NamedProblemMatcher.properties)||{},d.NamedProblemMatcher.properties.name={type:"string",description:c("NamedProblemMatcherSchema.name","The name of the problem matcher used to refer to it.")},d.NamedProblemMatcher.properties.label={type:"string",description:c("NamedProblemMatcherSchema.label","A human readable label of the problem matcher.")}))(zS||={});var k2=Ja.registerExtensionPoint({extensionPoint:"problemPatterns",jsonSchema:{description:c("ProblemPatternExtPoint","Contributes problem patterns"),type:"array",items:{anyOf:[zS.NamedProblemPattern,zS.NamedMultiLineProblemPattern]}}}),_1=class{patterns;readyPromise;constructor(){this.patterns=Object.create(null),this.fillDefaults(),this.readyPromise=new Promise((e,t)=>{k2.setHandler((n,i)=>{try{i.removed.forEach(o=>{let s=o.value;for(let a of s)this.patterns[a.name]&&delete this.patterns[a.name]}),i.added.forEach(o=>{let s=o.value,a=new VS(new WS(o.collector));for(let l of s){if(cd.NamedMultiLineCheckedProblemPattern.is(l)){let d=a.parse(l);a.problemReporter.status.state<3?this.add(d.name,d.patterns):(o.collector.error(c("ProblemPatternRegistry.error","Invalid problem pattern. The pattern will be ignored.")),o.collector.error(JSON.stringify(l,void 0,4)))}else if(cd.NamedProblemPattern.is(l)){let d=a.parse(l);a.problemReporter.status.state<3?this.add(l.name,d):(o.collector.error(c("ProblemPatternRegistry.error","Invalid problem pattern. The pattern will be ignored.")),o.collector.error(JSON.stringify(l,void 0,4)))}a.reset()}})}catch{}e(void 0)})})}onReady(){return this.readyPromise}add(e,t){this.patterns[e]=t}get(e){return this.patterns[e]}fillDefaults(){this.add("msCompile",{regexp:/^(?:\s*\d+>)?(\S.*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\)\s*:\s+((?:fatal +)?error|warning|info)\s+(\w+\d+)\s*:\s*(.*)$/,kind:1,file:1,location:2,severity:3,code:4,message:5}),this.add("gulp-tsc",{regexp:/^([^\s].*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\):\s+(\d+)\s+(.*)$/,kind:1,file:1,location:2,code:3,message:4}),this.add("cpp",{regexp:/^(\S.*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\):\s+(error|warning|info)\s+(C\d+)\s*:\s*(.*)$/,kind:1,file:1,location:2,severity:3,code:4,message:5}),this.add("csc",{regexp:/^(\S.*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\):\s+(error|warning|info)\s+(CS\d+)\s*:\s*(.*)$/,kind:1,file:1,location:2,severity:3,code:4,message:5}),this.add("vb",{regexp:/^(\S.*)\((\d+|\d+,\d+|\d+,\d+,\d+,\d+)\):\s+(error|warning|info)\s+(BC\d+)\s*:\s*(.*)$/,kind:1,file:1,location:2,severity:3,code:4,message:5}),this.add("lessCompile",{regexp:/^\s*(.*) in file (.*) line no. (\d+)$/,kind:1,message:1,file:2,line:3}),this.add("jshint",{regexp:/^(.*):\s+line\s+(\d+),\s+col\s+(\d+),\s(.+?)(?:\s+\((\w)(\d+)\))?$/,kind:1,file:1,line:2,character:3,message:4,severity:5,code:6}),this.add("jshint-stylish",[{regexp:/^(.+)$/,kind:1,file:1},{regexp:/^\s+line\s+(\d+)\s+col\s+(\d+)\s+(.+?)(?:\s+\((\w)(\d+)\))?$/,line:1,character:2,message:3,severity:4,code:5,loop:!0}]),this.add("eslint-compact",{regexp:/^(.+):\sline\s(\d+),\scol\s(\d+),\s(Error|Warning|Info)\s-\s(.+)\s\((.+)\)$/,file:1,kind:1,line:2,character:3,severity:4,message:5,code:6}),this.add("eslint-stylish",[{regexp:/^((?:[a-zA-Z]:)*[./\\]+.*?)$/,kind:1,file:1},{regexp:/^\s+(\d+):(\d+)\s+(error|warning|info)\s+(.+?)(?:\s\s+(.*))?$/,line:1,character:2,severity:3,message:4,code:5,loop:!0}]),this.add("go",{regexp:/^([^:]*: )?((.:)?[^:]*):(\d+)(:(\d+))?: (.*)$/,kind:1,file:2,line:4,character:6,message:7})}},oa=new _1,R1=class extends gf{constructor(e){super(e)}parse(e){let t=this.createProblemMatcher(e);if(this.checkProblemMatcherValid(e,t))return this.addWatchingMatcher(e,t),t}checkProblemMatcherValid(e,t){return t?t.pattern?t.owner?jn(t.fileLocation)?(this.error(c("ProblemMatcherParser.noFileLocation",`Error: the description doesn't define a file location:
{0}
`,JSON.stringify(e,null,4))),!1):!0:(this.error(c("ProblemMatcherParser.noOwner",`Error: the description doesn't define an owner:
{0}
`,JSON.stringify(e,null,4))),!1):(this.error(c("ProblemMatcherParser.noProblemPattern",`Error: the description doesn't define a valid problem pattern:
{0}
`,JSON.stringify(e,null,4))),!1):(this.error(c("ProblemMatcherParser.noProblemMatcher",`Error: the description can't be converted into a problem matcher:
{0}
`,JSON.stringify(e,null,4))),!1)}createProblemMatcher(e){let t=null,n=lt(e.owner)?e.owner:In(),i=lt(e.source)?e.source:void 0,o=lt(e.applyTo)?KS.fromString(e.applyTo):0;o||(o=0);let s,a,l;if(jn(e.fileLocation))s=1,a="${workspaceFolder}";else if(lt(e.fileLocation))l=qp.fromString(e.fileLocation),l&&(s=l,l===1||l===3?a="${workspaceFolder}":l===4&&(a={include:["${workspaceFolder}"]}));else if(QE(e.fileLocation)){let p=e.fileLocation;p.length>0&&(l=qp.fromString(p[0]),p.length===1&&l===2?s=l:p.length===2&&(l===1||l===3)&&p[1]&&(s=l,a=p[1]))}else Array.isArray(e.fileLocation)&&qp.fromString(e.fileLocation[0])===4&&(s=4,a=e.fileLocation[1]??{include:["${workspaceFolder}"]});let d=e.pattern?this.createProblemPattern(e.pattern):void 0,u=e.severity?bn.fromValue(e.severity):void 0;if(u===bn.Ignore&&(this.info(c("ProblemMatcherParser.unknownSeverity",`Info: unknown severity {0}. Valid values are error, warning and info.
`,e.severity)),u=bn.Error),lt(e.base)){let p=e.base;if(p.length>1&&p[0]==="$"){let h=j7.get(p.substring(1));h&&(t=kn(h),e.owner!==void 0&&n!==void 0&&(t.owner=n),e.source!==void 0&&i!==void 0&&(t.source=i),e.fileLocation!==void 0&&s!==void 0&&(t.fileLocation=s,t.filePrefix=a),e.pattern!==void 0&&d!==void 0&&d!==null&&(t.pattern=d),e.severity!==void 0&&u!==void 0&&(t.severity=u),e.applyTo!==void 0&&o!==void 0&&(t.applyTo=o))}}else s&&d&&(t={owner:n,applyTo:o,fileLocation:s,pattern:d},i&&(t.source=i),a&&(t.filePrefix=a),u&&(t.severity=u));return cd.isNamedProblemMatcher(e)&&(t.name=e.name,t.label=lt(e.label)?e.label:e.name),t}createProblemPattern(e){if(lt(e)){let t=e;if(t.length>1&&t[0]==="$"){let n=oa.get(t.substring(1));return n||this.error(c("ProblemMatcherParser.noDefinedPatter","Error: the pattern with the identifier {0} doesn't exist.",t)),n}else t.length===0?this.error(c("ProblemMatcherParser.noIdentifier","Error: the pattern property refers to an empty identifier.")):this.error(c("ProblemMatcherParser.noValidIdentifier","Error: the pattern property {0} is not a valid pattern variable name.",t))}else if(e){let t=new VS(this.problemReporter);return Array.isArray(e),t.parse(e)}return null}addWatchingMatcher(e,t){let n=this.createRegularExpression(e.watchedTaskBeginsRegExp),i=this.createRegularExpression(e.watchedTaskEndsRegExp);if(n&&i){t.watching={activeOnStart:!1,beginsPattern:{regexp:n},endsPattern:{regexp:i}};return}let o=e.background||e.watching;if(zt(o))return;let s=this.createWatchingPattern(o.beginsPattern),a=this.createWatchingPattern(o.endsPattern);if(s&&a){t.watching={activeOnStart:em(o.activeOnStart)?o.activeOnStart:!1,beginsPattern:s,endsPattern:a};return}(s||a)&&this.error(c("ProblemMatcherParser.problemPattern.watchingMatcher","A problem matcher must define both a begin pattern and an end pattern for watching."))}createWatchingPattern(e){if(zt(e))return null;let t,n;return lt(e)?t=this.createRegularExpression(e):(t=this.createRegularExpression(e.regexp),fr(e.file)&&(n=e.file)),t?n?{regexp:t,file:n}:{regexp:t,file:1}:null}createRegularExpression(e){let t=null;if(!e)return t;try{t=new RegExp(e)}catch{this.error(c("ProblemMatcherParser.invalidRegexp",`Error: The string {0} is not a valid regular expression.
`,e))}return t}},$7=Ja.registerExtensionPoint({extensionPoint:"problemMatchers",deps:[k2],jsonSchema:{description:c("ProblemMatcherExtPoint","Contributes problem matchers"),type:"array",items:zS.NamedProblemMatcher}}),L1=class{matchers;readyPromise;_onMatchersChanged=new x;onMatcherChanged=this._onMatchersChanged.event;constructor(){this.matchers=Object.create(null),this.fillDefaults(),this.readyPromise=new Promise((e,t)=>{$7.setHandler((n,i)=>{try{i.removed.forEach(s=>{let a=s.value;for(let l of a)this.matchers[l.name]&&delete this.matchers[l.name]}),i.added.forEach(s=>{let a=s.value,l=new R1(new WS(s.collector));for(let d of a){let u=l.parse(d);u&&q7(u)&&this.add(u)}}),(i.removed.length>0||i.added.length>0)&&this._onMatchersChanged.fire()}catch{}let o=this.get("tsc-watch");o&&(o.tscWatch=!0),e(void 0)})})}onReady(){return oa.onReady(),this.readyPromise}add(e){this.matchers[e.name]=e}get(e){return this.matchers[e]}keys(){return Object.keys(this.matchers)}fillDefaults(){this.add({name:"msCompile",label:c("msCompile","Microsoft compiler problems"),owner:"msCompile",source:"cpp",applyTo:0,fileLocation:2,pattern:oa.get("msCompile")}),this.add({name:"lessCompile",label:c("lessCompile","Less problems"),deprecated:!0,owner:"lessCompile",source:"less",applyTo:0,fileLocation:2,pattern:oa.get("lessCompile"),severity:bn.Error}),this.add({name:"gulp-tsc",label:c("gulp-tsc","Gulp TSC Problems"),owner:"typescript",source:"ts",applyTo:2,fileLocation:1,filePrefix:"${workspaceFolder}",pattern:oa.get("gulp-tsc")}),this.add({name:"jshint",label:c("jshint","JSHint problems"),owner:"jshint",source:"jshint",applyTo:0,fileLocation:2,pattern:oa.get("jshint")}),this.add({name:"jshint-stylish",label:c("jshint-stylish","JSHint stylish problems"),owner:"jshint",source:"jshint",applyTo:0,fileLocation:2,pattern:oa.get("jshint-stylish")}),this.add({name:"eslint-compact",label:c("eslint-compact","ESLint compact problems"),owner:"eslint",source:"eslint",applyTo:0,fileLocation:2,filePrefix:"${workspaceFolder}",pattern:oa.get("eslint-compact")}),this.add({name:"eslint-stylish",label:c("eslint-stylish","ESLint stylish problems"),owner:"eslint",source:"eslint",applyTo:0,fileLocation:2,pattern:oa.get("eslint-stylish")}),this.add({name:"go",label:c("go","Go problems"),owner:"go",source:"go",applyTo:0,fileLocation:1,filePrefix:"${workspaceFolder}",pattern:oa.get("go")})}},j7=new L1;var Y7={type:"object",additionalProperties:!1,properties:{type:{type:"string",description:c("TaskDefinition.description","The actual task type. Please note that types starting with a '$' are reserved for internal usage.")},required:{type:"array",items:{type:"string"}},properties:{type:"object",description:c("TaskDefinition.properties","Additional properties of the task type"),additionalProperties:{$ref:"http://json-schema.org/draft-07/schema#"}},when:{type:"string",markdownDescription:c("TaskDefinition.when","Condition which must be true to enable this type of task. Consider using `shellExecutionSupported`, `processExecutionSupported`, and `customExecutionSupported` as appropriate for this task definition. See the [API documentation](https://code.visualstudio.com/api/extension-guides/task-provider#when-clause) for more information."),default:""}}},D2;(e=>{function r(t,n,i){if(!t)return;let o=lt(t.type)?t.type:void 0;if(!o||o.length===0){i.error(c("TaskTypeConfiguration.noType","The task type configuration is missing the required 'taskType' property"));return}let s=[];if(Array.isArray(t.required))for(let a of t.required)lt(a)&&s.push(a);return{extensionId:n.value,taskType:o,required:s,properties:t.properties?kn(t.properties):{},when:t.when?X.deserialize(t.when):void 0}}e.from=r})(D2||={});var X7=Ja.registerExtensionPoint({extensionPoint:"taskDefinitions",activationEventsGenerator:(r,e)=>{for(let t of r)t.type&&e.push(`onTaskType:${t.type}`)},jsonSchema:{description:c("TaskDefinitionExtPoint","Contributes task kinds"),type:"array",items:Y7}}),P1=class{taskTypes;readyPromise;_schema;_onDefinitionsChanged=new x;onDefinitionsChanged=this._onDefinitionsChanged.event;constructor(){this.taskTypes=Object.create(null),this.readyPromise=new Promise((e,t)=>{X7.setHandler((n,i)=>{this._schema=void 0;try{for(let o of i.removed){let s=o.value;for(let a of s)this.taskTypes&&a.type&&this.taskTypes[a.type]&&delete this.taskTypes[a.type]}for(let o of i.added){let s=o.value;for(let a of s){let l=D2.from(a,o.description.identifier,o.collector);l&&(this.taskTypes[l.taskType]=l)}}(i.removed.length>0||i.added.length>0)&&this._onDefinitionsChanged.fire()}catch{}e(void 0)})})}onReady(){return this.readyPromise}get(e){return this.taskTypes[e]}all(){return Object.keys(this.taskTypes).map(e=>this.taskTypes[e])}getJsonSchema(){if(this._schema===void 0){let e=[];for(let t of this.all()){let n={type:"object",additionalProperties:!1};t.required.length>0&&(n.required=t.required.slice(0)),t.properties!==void 0?n.properties=kn(t.properties):n.properties=Object.create(null),n.properties.type={type:"string",enum:[t.taskType]},e.push(n)}this._schema={oneOf:e}}return this._schema}},_2=new P1;var Jut=new V("terminalTabFocusMode",!1,!0);var Zut=A("ptyService");var O1={Backend:"workbench.contributions.terminal.processBackend"},A1=class{_backends=new Map;get backends(){return this._backends}registerTerminalBackend(e){let t=this._sanitizeRemoteAuthority(e.remoteAuthority);if(this._backends.has(t))throw new Error(`A terminal backend with remote authority '${t}' was already registered.`);this._backends.set(t,e)}getTerminalBackend(e){return this._backends.get(this._sanitizeRemoteAuthority(e))}_sanitizeRemoteAuthority(e){return e?.toLowerCase()??""}};Ce.add(O1.Backend,new A1);var ept=A("localPtyService"),tpt=A("terminalLogService");var Spt=new V("taskRunning",!1,c("tasks.taskRunningContext","Whether a task is currently running.")),xpt=ye("tasksCategory","Tasks"),N1=(n=>(n[n.Escape=1]="Escape",n[n.Strong=2]="Strong",n[n.Weak=3]="Weak",n))(N1||{});(e=>{function r(t){if(!t)return 2;switch(t.toLowerCase()){case"escape":return 1;case"strong":return 2;case"weak":return 3;default:return 2}}e.from=r})(N1||={});var Q7;(e=>e.defaults={cwd:"${workspaceFolder}"})(Q7||={});var F1=(n=>(n[n.Always=1]="Always",n[n.Silent=2]="Silent",n[n.Never=3]="Never",n))(F1||{});(e=>{function r(t){switch(t.toLowerCase()){case"always":return 1;case"silent":return 2;case"never":return 3;default:return 1}}e.fromString=r})(F1||={});var B1=(n=>(n[n.Never=1]="Never",n[n.OnProblem=2]="OnProblem",n[n.Always=3]="Always",n))(B1||{});(e=>{function r(t){switch(t.toLowerCase()){case"always":return 3;case"never":return 1;case"onproblem":return 2;default:return 2}}e.fromString=r})(B1||={});var U1=(n=>(n[n.Shared=1]="Shared",n[n.Dedicated=2]="Dedicated",n[n.New=3]="New",n))(U1||{});(e=>{function r(t){switch(t.toLowerCase()){case"shared":return 1;case"dedicated":return 2;case"new":return 3;default:return 1}}e.fromString=r})(U1||={});var J7;(e=>e.defaults={echo:!0,reveal:1,revealProblems:1,focus:!1,panel:1,showReuseMessage:!0,clear:!1})(J7||={});var V1=(n=>(n[n.Shell=1]="Shell",n[n.Process=2]="Process",n[n.CustomExecution=3]="CustomExecution",n))(V1||{});(t=>{function r(n){switch(n.toLowerCase()){case"shell":return 1;case"process":return 2;case"customExecution":return 3;default:return 2}}t.fromString=r;function e(n){switch(n){case 1:return"shell";case 2:return"process";case 3:return"customExecution";default:return"process"}}t.toString=e})(V1||={});var Z7;(e=>{function r(t){return lt(t)?t:t.value}e.value=r})(Z7||={});var e8;(s=>{s.Clean={_id:"clean",isDefault:!1},s.Build={_id:"build",isDefault:!1},s.Rebuild={_id:"rebuild",isDefault:!1},s.Test={_id:"test",isDefault:!1};function i(a){return a===s.Clean._id||a===s.Build._id||a===s.Rebuild._id||a===s.Test._id}s.is=i;function o(a){if(a!==void 0)return lt(a)?i(a)?{_id:a,isDefault:!1}:void 0:a}s.from=o})(e8||={});var t8;(s=>{s.Workspace="workspace",s.Extension="extension",s.InMemory="inMemory",s.WorkspaceFile="workspaceFile",s.User="user";function o(a){switch(a){case s.User:return 2;case s.WorkspaceFile:return 5;default:return 6}}s.toConfigurationTarget=o})(t8||={});var n8;(e=>e.defaults={reevaluateOnRerun:!0,runOn:1,instanceLimit:1})(n8||={});var W1=(t=>(t[t.Process=1]="Process",t[t.Terminal=2]="Terminal",t))(W1||{});(e=>e._default=2)(W1||={});var i8;(a=>{function r(l){return{taskId:l._id,taskName:l.configurationProperties.name,runType:l.configurationProperties.isBackground?"background":"singleRun",group:l.configurationProperties.group,__task:l}}function e(l,d,u){return{...r(l),kind:"start",terminalId:d,resolvedVariables:u}}a.start=e;function t(l,d,u){return{...r(l),kind:"processStarted",terminalId:d,processId:u}}a.processStarted=t;function n(l,d,u){return{...r(l),kind:"processEnded",terminalId:d,exitCode:u}}a.processEnded=n;function i(l,d,u){return{...r(l),kind:"terminated",exitReason:u,terminalId:d}}a.terminated=i;function o(l,d,u){return{...r(d),kind:l,terminalId:u}}a.general=o;function s(){return{kind:"changed"}}a.changed=s})(i8||={});var M1;(t=>{function r(n){let i=Object.keys(n).sort(),o="";for(let s of i){let a=n[s];a instanceof Object?a=r(a):typeof a=="string"&&(a=a.replace(/,/g,",,")),o+=s+","+a+","}return o}function e(n){let o={_key:r(n),type:n.taskType};return Object.assign(o,n),o}t.create=e})(M1||={});var r8;(e=>{function r(t,n){let i=_2.get(t.type);if(i===void 0){let l=kn(t);return delete l._key,M1.create(l)}let o=Object.create(null);o.type=i.taskType;let s=new Set;i.required.forEach(l=>s.add(l));let a=i.properties;for(let l of Object.keys(a)){let d=t[l];if(d!=null)o[l]=d;else if(s.has(l)){let u=a[l];if(u.default!==void 0)o[l]=kn(u.default);else switch(u.type){case"boolean":o[l]=!1;break;case"number":case"integer":o[l]=0;break;case"string":o[l]="";break;default:n.error(c("TaskDefinition.missingRequiredProperty","Error: the task identifier '{0}' is missing the required property '{1}'. The task identifier will be ignored.",JSON.stringify(t,void 0,0),l));return}}}return M1.create(o)}e.createTaskIdentifier=r})(r8||={});var wpt=Symbol("unset");var Pc=class r{constructor(e,t=e.length){this.path=e;this.viewEnd=t;if(e.length===0||t<1)throw new Error("cannot create test with empty path")}stringifed;static fromExtHostTestItem(e,t,n=e.parent){if(e._isRoot)return new r([t]);let i=[e.id];for(let o=n;o&&o.id!==t;o=o.parent)i.push(o.id);return i.push(t),new r(i.reverse())}static isRoot(e){return!e.includes("\0")}static root(e){let t=e.indexOf("\0");return t===-1?e:e.slice(0,t)}static fromString(e){return new r(e.split("\0"))}static join(e,t){return new r([...e.path,t])}static joinToString(e,t){return e.toString()+"\0"+t}static parentId(e){let t=e.lastIndexOf("\0");return t===-1?void 0:e.slice(0,t)}static localId(e){let t=e.lastIndexOf("\0");return t===-1?e:e.slice(t+1)}static isChild(e,t){return t[e.length]==="\0"&&t.startsWith(e)}static compare(e,t){return e===t?0:r.isChild(e,t)?2:r.isChild(t,e)?3:1}static getLengthOfCommonPrefix(e,t){if(e===0)return 0;let n=0;for(;n<e-1;){for(let i=1;i<e;i++){let o=t(i-1),s=t(i);if(o.path[n]!==s.path[n])return n}n++}return n}get rootId(){return new r(this.path,1)}get parentId(){return this.viewEnd>1?new r(this.path,this.viewEnd-1):void 0}get localId(){return this.path[this.viewEnd-1]}get controllerId(){return this.path[0]}get isRoot(){return this.viewEnd===1}*idsFromRoot(){for(let e=1;e<=this.viewEnd;e++)yield new r(this.path,e)}*idsToRoot(){for(let e=this.viewEnd;e>0;e--)yield new r(this.path,e)}compare(e){if(typeof e=="string")return r.compare(this.toString(),e);for(let t=0;t<e.viewEnd&&t<this.viewEnd;t++)if(e.path[t]!==this.path[t])return 1;return e.viewEnd>this.viewEnd?2:e.viewEnd<this.viewEnd?3:0}toJSON(){return this.toString()}toString(){if(!this.stringifed){this.stringifed=this.path[0];for(let e=1;e<this.viewEnd;e++)this.stringifed+="\0",this.stringifed+=this.path[e]}return this.stringifed}};var ff;(t=>(t.serialize=n=>({range:n.range.toJSON(),uri:n.uri.toJSON()}),t.deserialize=(n,i)=>({range:ge.lift(i.range),uri:n.asCanonicalUri(W.revive(i.uri))})))(ff||={});var z1;(t=>(t.serialize=n=>({label:n.label,uri:n.uri?.toJSON(),position:n.position?.toJSON()}),t.deserialize=(n,i)=>({label:i.label,uri:i.uri?n.asCanonicalUri(W.revive(i.uri)):void 0,position:i.position?ot.lift(i.position):void 0})))(z1||={});var H1;(t=>(t.serialize=n=>({message:n.message,type:0,expected:n.expected,actual:n.actual,contextValue:n.contextValue,location:n.location&&ff.serialize(n.location),stackTrace:n.stackTrace?.map(z1.serialize)}),t.deserialize=(n,i)=>({message:i.message,type:0,expected:i.expected,actual:i.actual,contextValue:i.contextValue,location:i.location&&ff.deserialize(n,i.location),stackTrace:i.stackTrace&&i.stackTrace.map(o=>z1.deserialize(n,o))})))(H1||={});var R2=(r,e)=>`${e?"s":"e"}${r}`,K1;(t=>(t.serialize=n=>({message:n.message,type:1,offset:n.offset,length:n.length,location:n.location&&ff.serialize(n.location)}),t.deserialize=(n,i)=>({message:i.message,type:1,offset:i.offset,length:i.length,location:i.location&&ff.deserialize(n,i.location)})))(K1||={});var G1;(n=>(n.serialize=i=>i.type===0?H1.serialize(i):K1.serialize(i),n.deserialize=(i,o)=>o.type===0?H1.deserialize(i,o):K1.deserialize(i,o),n.isDiffable=i=>i.type===0&&i.actual!==void 0&&i.expected!==void 0))(G1||={});var GS;(n=>(n.serializeWithoutMessages=i=>({state:i.state,duration:i.duration,messages:[]}),n.serialize=i=>({state:i.state,duration:i.duration,messages:i.messages.map(G1.serialize)}),n.deserialize=(i,o)=>({state:o.state,duration:o.duration,messages:o.messages.map(s=>G1.deserialize(i,s))})))(GS||={});var q1;(t=>(t.serialize=n=>({extId:n.extId,label:n.label,tags:n.tags,busy:n.busy,children:void 0,uri:n.uri?.toJSON(),range:n.range?.toJSON()||null,description:n.description,error:n.error,sortText:n.sortText}),t.deserialize=(n,i)=>({extId:i.extId,label:i.label,tags:i.tags,busy:i.busy,children:void 0,uri:i.uri?n.asCanonicalUri(W.revive(i.uri)):void 0,range:i.range?ge.lift(i.range):null,description:i.description,error:i.error,sortText:i.sortText})))(q1||={});var $p;(t=>(t.serialize=n=>({expand:n.expand,item:q1.serialize(n.item)}),t.deserialize=(n,i)=>({controllerId:Pc.root(i.item.extId),expand:i.expand,item:q1.deserialize(n,i.item)})))($p||={});var $1;(t=>(t.serialize=n=>{let i;return n.item&&(i={},n.item.label!==void 0&&(i.label=n.item.label),n.item.tags!==void 0&&(i.tags=n.item.tags),n.item.busy!==void 0&&(i.busy=n.item.busy),n.item.uri!==void 0&&(i.uri=n.item.uri?.toJSON()),n.item.range!==void 0&&(i.range=n.item.range?.toJSON()),n.item.description!==void 0&&(i.description=n.item.description),n.item.error!==void 0&&(i.error=n.item.error),n.item.sortText!==void 0&&(i.sortText=n.item.sortText)),{extId:n.extId,expand:n.expand,item:i}},t.deserialize=n=>{let i;return n.item&&(i={},n.item.label!==void 0&&(i.label=n.item.label),n.item.tags!==void 0&&(i.tags=n.item.tags),n.item.busy!==void 0&&(i.busy=n.item.busy),n.item.range!==void 0&&(i.range=n.item.range?ge.lift(n.item.range):null),n.item.description!==void 0&&(i.description=n.item.description),n.item.error!==void 0&&(i.error=n.item.error),n.item.sortText!==void 0&&(i.sortText=n.item.sortText)),{extId:n.extId,expand:n.expand,item:i}}))($1||={});var qS;(n=>(n.serializeWithoutMessages=i=>({...$p.serialize(i),ownComputedState:i.ownComputedState,computedState:i.computedState,tasks:i.tasks.map(GS.serializeWithoutMessages)}),n.serialize=i=>({...$p.serialize(i),ownComputedState:i.ownComputedState,computedState:i.computedState,tasks:i.tasks.map(GS.serialize)}),n.deserialize=(i,o)=>({...$p.deserialize(i,o),ownComputedState:o.ownComputedState,computedState:o.computedState,tasks:o.tasks.map(s=>GS.deserialize(i,s)),retired:!0})))(qS||={});var Q1;(t=>(t.empty=()=>({covered:0,total:0}),t.sum=(n,i)=>{n.covered+=i.covered,n.total+=i.total}))(Q1||={});var o8;(n=>(n.serialize=i=>({id:i.id,statement:i.statement,branch:i.branch,declaration:i.declaration,testIds:i.testIds,uri:i.uri.toJSON()}),n.deserialize=(i,o)=>({id:o.id,statement:o.statement,branch:o.branch,declaration:o.declaration,testIds:o.testIds,uri:i.asCanonicalUri(W.revive(o.uri))}),n.empty=(i,o)=>({id:i,uri:o,statement:Q1.empty()})))(o8||={});function J1(r){return{...r,location:r.location?.toJSON()}}function Z1(r){return r.location=r.location?ot.isIPosition(r.location)?ot.lift(r.location):ge.lift(r.location):void 0,r}var s8;(t=>(t.serialize=n=>n.type===0?Y1.serialize(n):X1.serialize(n),t.deserialize=n=>n.type===0?Y1.deserialize(n):X1.deserialize(n)))(s8||={});var j1;(t=>(t.serialize=J1,t.deserialize=Z1))(j1||={});var Y1;(t=>(t.serialize=J1,t.deserialize=Z1))(Y1||={});var X1;(t=>(t.serialize=n=>({...J1(n),branches:n.branches?.map(j1.serialize)}),t.deserialize=n=>({...Z1(n),branches:n.branches?.map(j1.deserialize)})))(X1||={});var a8;(t=>(t.deserialize=(n,i)=>i.op===0?{op:i.op,item:$p.deserialize(n,i.item)}:i.op===1?{op:i.op,item:$1.deserialize(i.item)}:i.op===2?{op:i.op,uri:n.asCanonicalUri(W.revive(i.uri)),docv:i.docv}:i,t.serialize=n=>n.op===0?{op:n.op,item:$p.serialize(n.item)}:n.op===1?{op:n.op,item:$1.serialize(n.item)}:n))(a8||={});var go={2:6,6:5,4:4,1:3,3:2,0:0,5:1};var zpt=FA(go,(r,e)=>({statusNode:!0,state:Number(e),priority:r})),l8=(r,e)=>go[e]-go[r],$S=(...r)=>{switch(r.length){case 0:return 0;case 1:return r[0];case 2:return go[r[0]]>go[r[1]]?r[0]:r[1];default:{let e=r[0];for(let t=1;t<r.length;t++)go[e]<go[r[t]]&&(e=r[t]);return e}}},P2=Object.keys(go).map(r=>Number(r)).sort(l8),eR={3:0,5:1,4:2,6:3},jS=()=>new Uint32Array(P2.length);var d8=r=>"getOwnDuration"in r,tR=(r,e,t=!1)=>{let n=r.getCurrentComputedState(e);if(n===void 0||t){n=r.getOwnState(e)??0;let i=0,o=jS();for(let s of r.getChildren(e)){let a=tR(r,s);i++,o[a]++,n=a===5&&n===0?5:$S(n,a)}i>c8&&O2.set(e,o),r.setComputedState(e,n)}return n},A2=(r,e,t=!1)=>{let n=r.getCurrentComputedDuration(e);if(n===void 0||t){let i=r.getOwnDuration(e);if(i!==void 0)n=i;else{n=void 0;for(let o of r.getChildren(e)){let s=A2(r,o);s!==void 0&&(n=(n||0)+s)}}r.setComputedDuration(e,n)}return n},c8=64,O2=new WeakMap,M2=(r,e,t,n=!0)=>{let i=r.getCurrentComputedState(e),o=go[i],s=t??tR(r,e,!0),a=go[s],l=new Set;if(a!==o){r.setComputedState(e,s),l.add(e);let d=i,u=s;for(let p of r.getParents(e)){let h=O2.get(p);h&&(h[d]--,h[u]++);let m=r.getCurrentComputedState(p);if(a>o){if(m!==void 0&&go[m]>=a||h&&h[u]>1)break;r.setComputedState(p,s),l.add(p)}else{if(m===void 0||go[m]>o||h&&h[d]>0)break;u=tR(r,p,!0),r.setComputedState(p,u),l.add(p)}d=m}}if(d8(r)&&n)for(let d of $e.concat($e.single(e),r.getParents(e))){let u=r.getCurrentComputedDuration(d),p=A2(r,d,!0);if(u===p)break;r.setComputedDuration(d,p),l.add(d)}return l};var qht={buffers:[],length:0,onDidWriteData:N.None,endPromise:Promise.resolve(),getRange:()=>et.alloc(0),getRangeIter:()=>[]},nR=class{writeDataEmitter=new x;endDeferred=new Ir;offset=0;onDidWriteData=this.writeDataEmitter.event;endPromise=this.endDeferred.p;buffers=[];get length(){return this.offset}getRange(e,t){let n=et.alloc(t),i=0;for(let o of this.getRangeIter(e,t))n.buffer.set(o.buffer,i),i+=o.byteLength;return i<t?n.slice(0,i):n}*getRangeIter(e,t){let n=0,i=0;for(let o of this.buffers){if(i+o.byteLength<=e){i+=o.byteLength;continue}let s=Math.max(0,e-i),a=Math.min(o.byteLength,s+t-n);if(yield o.slice(s,a),n+=a-s,i+=o.byteLength,n===t)break}}append(e,t){let n=this.offset,i=e.byteLength;if(t===void 0)return this.push(e),{offset:n,length:i};let o;(p=>(p[p.CR=13]="CR",p[p.LF=10]="LF"))(o||={});let s=et.fromString(N2(t,!0)),a=et.fromString(N2(t,!1));i+=s.byteLength+a.byteLength,this.push(s);let l=e.byteLength;for(;l>0;l--){let d=e.buffer[l-1];if(d!==13&&d!==10)break}return this.push(e.slice(0,l)),this.push(a),this.push(e.slice(l)),{offset:n,length:i}}push(e){e.byteLength!==0&&(this.buffers.push(e),this.writeDataEmitter.fire(e),this.offset+=e.byteLength)}end(){this.endDeferred.complete()}};var N2=(r,e)=>`\x1B]633;SetMark;Id=${R2(r,e)};Hidden\x07`,u8=(r,e,t)=>({controllerId:r,expand:0,item:{...e},children:[],tasks:[],ownComputedState:0,computedState:0});var YS=class extends P{constructor(t,n,i,o){super();this.id=t;this.persist=n;this.request=i;this.telemetry=o}completeEmitter=this._register(new x);newTaskEmitter=this._register(new x);endTaskEmitter=this._register(new x);changeEmitter=this._register(new x);testById=new Map;testMarkerCounter=0;_completedAt;startedAt=Date.now();onChange=this.changeEmitter.event;onComplete=this.completeEmitter.event;onNewTask=this.newTaskEmitter.event;onEndTask=this.endTaskEmitter.event;tasks=[];name=c("runFinished","Test run at {0}",new Date().toLocaleString(Io));get completedAt(){return this._completedAt}counts=jS();get tests(){return this.testById.values()}getTestById(t){return this.testById.get(t)?.item}computedStateAccessor={getOwnState:t=>t.ownComputedState,getCurrentComputedState:t=>t.computedState,setComputedState:(t,n)=>t.computedState=n,getChildren:t=>t.children,getParents:t=>{let{testById:n}=this;return function*(){let i=Pc.fromString(t.item.extId).parentId;if(i)for(let o of i.idsToRoot())yield n.get(o.toString())}()}};getStateById(t){return this.testById.get(t)}appendOutput(t,n,i,o){let s=t.byteLength>100?t.slice(0,100).toString()+"\u2026":t.toString(),a;(o||i)&&(a=this.testMarkerCounter++);let l=this.mustGetTaskIndex(n),d=this.tasks[l],{offset:u,length:p}=d.output.append(t,a),h={location:i,message:s,offset:u,length:p,marker:a,type:1},m=o&&this.testById.get(o);m?(m.tasks[l].messages.push(h),this.changeEmitter.fire({item:m,result:this,reason:2,message:h})):d.otherMessages.push(h)}addTask(t){this.tasks.push({...t,coverage:Ko(this,void 0),otherMessages:[],output:new nR});for(let n of this.tests)n.tasks.push({duration:void 0,messages:[],state:0});this.newTaskEmitter.fire(this.tasks.length-1)}addTestChainToRun(t,n){let i=this.testById.get(n[0].extId);i||(i=this.addTestToRun(t,n[0],null));for(let o=1;o<n.length;o++)i=this.addTestToRun(t,n[o],i.item.extId)}updateState(t,n,i,o){let s=this.testById.get(t);if(!s)return;let a=this.mustGetTaskIndex(n),l=eR[s.tasks[a].state],d=eR[i];l!==void 0&&(d===void 0||d<l)||this.fireUpdateAndRefresh(s,a,i,o)}appendMessage(t,n,i){let o=this.testById.get(t);o&&(o.tasks[this.mustGetTaskIndex(n)].messages.push(i),this.changeEmitter.fire({item:o,result:this,reason:2,message:i}))}markTaskComplete(t){let n=this.mustGetTaskIndex(t),i=this.tasks[n];i.running=!1,i.output.end(),this.setAllToState(0,t,o=>o.state===1||o.state===2),this.endTaskEmitter.fire(n)}markComplete(){if(this._completedAt!==void 0)throw new Error("cannot complete a test result multiple times");for(let t of this.tasks)t.running&&this.markTaskComplete(t.id);this._completedAt=Date.now(),this.completeEmitter.fire(),this.telemetry.publicLog2("test.outcomes",{failures:this.counts[6]+this.counts[4],passes:this.counts[3],controller:this.request.targets.map(t=>t.controllerId).join(",")})}markRetired(t){for(let[n,i]of this.testById)!i.retired&&(!t||t.hasKeyOrParent(Pc.fromString(n).path))&&(i.retired=!0,this.changeEmitter.fire({reason:0,item:i,result:this}))}toJSON(){return this.completedAt&&this.persist?this.doSerialize.value:void 0}toJSONWithMessages(){return this.completedAt&&this.persist?this.doSerializeWithMessages.value:void 0}setAllToState(t,n,i){let o=this.mustGetTaskIndex(n);for(let s of this.testById.values())i(s.tasks[o],s)&&this.fireUpdateAndRefresh(s,o,t)}fireUpdateAndRefresh(t,n,i,o){let s=t.ownComputedState,a=t.ownDuration,l={item:t,result:this,reason:1,previousState:s,previousOwnDuration:a};t.tasks[n].state=i,o!==void 0&&(t.tasks[n].duration=o,t.ownDuration=Math.max(t.ownDuration||0,o));let d=$S(...t.tasks.map(u=>u.state));if(d===s){o!==a&&this.changeEmitter.fire(l);return}t.ownComputedState=d,this.counts[s]--,this.counts[d]++,M2(this.computedStateAccessor,t).forEach(u=>this.changeEmitter.fire(u===t?l:{item:u,result:this,reason:0}))}addTestToRun(t,n,i){let o=u8(t,n,i);if(this.testById.set(n.extId,o),this.counts[0]++,i&&this.testById.get(i)?.children.push(o),this.tasks.length)for(let s=0;s<this.tasks.length;s++)o.tasks.push({duration:void 0,messages:[],state:0});return o}mustGetTaskIndex(t){let n=this.tasks.findIndex(i=>i.id===t);if(n===-1)throw new Error(`Unknown task ${t} in updateState`);return n}doSerialize=new Fn(()=>({id:this.id,completedAt:this.completedAt,tasks:this.tasks.map(t=>({id:t.id,name:t.name,ctrlId:t.ctrlId,hasCoverage:!!t.coverage.get()})),name:this.name,request:this.request,items:[...this.testById.values()].map(qS.serializeWithoutMessages)}));doSerializeWithMessages=new Fn(()=>({id:this.id,completedAt:this.completedAt,tasks:this.tasks.map(t=>({id:t.id,name:t.name,ctrlId:t.ctrlId,hasCoverage:!!t.coverage.get()})),name:this.name,request:this.request,items:[...this.testById.values()].map(qS.serialize)}))};YS=C([v(3,Ot)],YS);var b2=new V("debugType",void 0,{type:"string",description:c("debugType","Debug type of the active debug session. For example 'python'.")}),qmt=new V("debugConfigurationType",void 0,{type:"string",description:c("debugConfigurationType","Debug type of the selected launch configuration. For example 'python'.")}),$mt=new V("debugState","inactive",{type:"string",description:c("debugState","State that the focused debug session is in. One of the following: 'inactive', 'initializing', 'stopped' or 'running'.")}),p8="debugUx",jmt=new V(p8,"default",{type:"string",description:c("debugUX","Debug UX state. When there are no debug configurations it is 'simple', otherwise 'default'. Used to decide when to show welcome views in the debug viewlet.")}),Ymt=new V("hasDebugged",!1,{type:"boolean",description:c("hasDebugged","True when a debug session has been started at least once, false otherwise.")}),Xmt=new V("inDebugMode",!1,{type:"boolean",description:c("inDebugMode","True when debugging, false otherwise.")}),Qmt=new V("inDebugRepl",!1,{type:"boolean",description:c("inDebugRepl","True when focus is in the debug console, false otherwise.")}),Jmt=new V("breakpointWidgetVisible",!1,{type:"boolean",description:c("breakpointWidgetVisibile","True when breakpoint editor zone widget is visible, false otherwise.")}),Zmt=new V("inBreakpointWidget",!1,{type:"boolean",description:c("inBreakpointWidget","True when focus is in the breakpoint editor zone widget, false otherwise.")}),egt=new V("breakpointsFocused",!0,{type:"boolean",description:c("breakpointsFocused","True when the BREAKPOINTS view is focused, false otherwise.")}),tgt=new V("watchExpressionsFocused",!0,{type:"boolean",description:c("watchExpressionsFocused","True when the WATCH view is focused, false otherwise.")}),ngt=new V("watchExpressionsExist",!1,{type:"boolean",description:c("watchExpressionsExist","True when at least one watch expression exists, false otherwise.")}),igt=new V("variablesFocused",!0,{type:"boolean",description:c("variablesFocused","True when the VARIABLES views is focused, false otherwise")}),rgt=new V("expressionSelected",!1,{type:"boolean",description:c("expressionSelected","True when an expression input box is open in either the WATCH or the VARIABLES view, false otherwise.")}),ogt=new V("breakpointInputFocused",!1,{type:"boolean",description:c("breakpointInputFocused","True when the input box has focus in the BREAKPOINTS view.")}),sgt=new V("callStackItemType",void 0,{type:"string",description:c("callStackItemType","Represents the item type of the focused element in the CALL STACK view. For example: 'session', 'thread', 'stackFrame'")}),agt=new V("callStackSessionIsAttach",!1,{type:"boolean",description:c("callStackSessionIsAttach","True when the session in the CALL STACK view is attach, false otherwise. Used internally for inline menus in the CALL STACK view.")}),lgt=new V("callStackItemStopped",!1,{type:"boolean",description:c("callStackItemStopped","True when the focused item in the CALL STACK is stopped. Used internaly for inline menus in the CALL STACK view.")}),dgt=new V("callStackSessionHasOneThread",!1,{type:"boolean",description:c("callStackSessionHasOneThread","True when the focused session in the CALL STACK view has exactly one thread. Used internally for inline menus in the CALL STACK view.")}),cgt=new V("watchItemType",void 0,{type:"string",description:c("watchItemType","Represents the item type of the focused element in the WATCH view. For example: 'expression', 'variable'")}),v2=new V("canViewMemory",void 0,{type:"boolean",description:c("canViewMemory","Indicates whether the item in the view has an associated memory refrence.")}),ugt=new V("breakpointItemType",void 0,{type:"string",description:c("breakpointItemType","Represents the item type of the focused element in the BREAKPOINTS view. For example: 'breakpoint', 'exceptionBreakppint', 'functionBreakpoint', 'dataBreakpoint'")}),pgt=new V("breakpointItemBytes",void 0,{type:"boolean",description:c("breakpointItemIsDataBytes","Whether the breakpoint item is a data breakpoint on a byte range.")}),hgt=new V("breakpointHasModes",!1,{type:"boolean",description:c("breakpointHasModes","Whether the breakpoint has multiple modes it can switch to.")}),mgt=new V("breakpointSupportsCondition",!1,{type:"boolean",description:c("breakpointSupportsCondition","True when the focused breakpoint supports conditions.")}),ggt=new V("loadedScriptsSupported",!1,{type:"boolean",description:c("loadedScriptsSupported","True when the focused sessions supports the LOADED SCRIPTS view")}),fgt=new V("loadedScriptsItemType",void 0,{type:"string",description:c("loadedScriptsItemType","Represents the item type of the focused element in the LOADED SCRIPTS view.")}),bgt=new V("focusedSessionIsAttach",!1,{type:"boolean",description:c("focusedSessionIsAttach","True when the focused session is 'attach'.")}),vgt=new V("focusedSessionIsNoDebug",!1,{type:"boolean",description:c("focusedSessionIsNoDebug","True when the focused session is run without debugging.")}),ygt=new V("stepBackSupported",!1,{type:"boolean",description:c("stepBackSupported","True when the focused session supports 'stepBack' requests.")}),Igt=new V("restartFrameSupported",!1,{type:"boolean",description:c("restartFrameSupported","True when the focused session supports 'restartFrame' requests.")}),Sgt=new V("stackFrameSupportsRestart",!1,{type:"boolean",description:c("stackFrameSupportsRestart","True when the focused stack frame supports 'restartFrame'.")}),xgt=new V("jumpToCursorSupported",!1,{type:"boolean",description:c("jumpToCursorSupported","True when the focused session supports 'jumpToCursor' request.")}),Tgt=new V("stepIntoTargetsSupported",!1,{type:"boolean",description:c("stepIntoTargetsSupported","True when the focused session supports 'stepIntoTargets' request.")}),Egt=new V("breakpointsExist",!1,{type:"boolean",description:c("breakpointsExist","True when at least one breakpoint exists.")}),wgt=new V("debuggersAvailable",!1,{type:"boolean",description:c("debuggersAvailable","True when there is at least one debug extensions active.")}),Cgt=new V("debugExtensionAvailable",!0,{type:"boolean",description:c("debugExtensionsAvailable","True when there is at least one debug extension installed and enabled.")}),y2=new V("debugProtocolVariableMenuContext",void 0,{type:"string",description:c("debugProtocolVariableMenuContext","Represents the context the debug adapter sets on the focused variable in the VARIABLES view.")}),kgt=new V("debugSetVariableSupported",!1,{type:"boolean",description:c("debugSetVariableSupported","True when the focused session supports 'setVariable' request.")}),Dgt=new V("debugSetDataBreakpointAddressSupported",!1,{type:"boolean",description:c("debugSetDataBreakpointAddressSupported","True when the focused session supports 'getBreakpointInfo' request on an address.")}),_gt=new V("debugSetExpressionSupported",!1,{type:"boolean",description:c("debugSetExpressionSupported","True when the focused session supports 'setExpression' request.")}),Rgt=new V("breakWhenValueChangesSupported",!1,{type:"boolean",description:c("breakWhenValueChangesSupported","True when the focused session supports to break when value changes.")}),Lgt=new V("breakWhenValueIsAccessedSupported",!1,{type:"boolean",description:c("breakWhenValueIsAccessedSupported","True when the focused breakpoint supports to break when value is accessed.")}),Pgt=new V("breakWhenValueIsReadSupported",!1,{type:"boolean",description:c("breakWhenValueIsReadSupported","True when the focused breakpoint supports to break when value is read.")}),Agt=new V("terminateDebuggeeSupported",!1,{type:"boolean",description:c("terminateDebuggeeSupported","True when the focused session supports the terminate debuggee capability.")}),Ogt=new V("suspendDebuggeeSupported",!1,{type:"boolean",description:c("suspendDebuggeeSupported","True when the focused session supports the suspend debuggee capability.")}),I2=new V("variableEvaluateNamePresent",!1,{type:"boolean",description:c("variableEvaluateNamePresent","True when the focused variable has an 'evalauteName' field set.")}),S2=new V("variableIsReadonly",!1,{type:"boolean",description:c("variableIsReadonly","True when the focused variable is read-only.")}),E2=new V("variableValue",!1,{type:"string",description:c("variableValue","Value of the variable, present for debug visualization clauses.")}),w2=new V("variableType",!1,{type:"string",description:c("variableType","Type of the variable, present for debug visualization clauses.")}),Mgt=new V("variableInterfaces",!1,{type:"array",description:c("variableInterfaces","Any interfaces or contracts that the variable satisfies, present for debug visualization clauses.")}),C2=new V("variableName",!1,{type:"string",description:c("variableName","Name of the variable, present for debug visualization clauses.")}),Ngt=new V("variableLanguage",!1,{type:"string",description:c("variableLanguage","Language of the variable source, present for debug visualization clauses.")}),Fgt=new V("variableExtensionId",!1,{type:"string",description:c("variableExtensionId","Extension ID of the variable source, present for debug visualization clauses.")}),Bgt=new V("exceptionWidgetVisible",!1,{type:"boolean",description:c("exceptionWidgetVisible","True when the exception widget is visible.")}),Ugt=new V("multiSessionRepl",!1,{type:"boolean",description:c("multiSessionRepl","True when there is more than 1 debug console.")}),Vgt=new V("multiSessionDebug",!1,{type:"boolean",description:c("multiSessionDebug","True when there is more than 1 active debug session.")}),Wgt=new V("disassembleRequestSupported",!1,{type:"boolean",description:c("disassembleRequestSupported","True when the focused sessions supports disassemble request.")}),zgt=new V("disassemblyViewFocus",!1,{type:"boolean",description:c("disassemblyViewFocus","True when the Disassembly View is focused.")}),Hgt=new V("languageSupportsDisassembleRequest",!1,{type:"boolean",description:c("languageSupportsDisassembleRequest","True when the language in the current editor supports disassemble request.")}),Kgt=new V("focusedStackFrameHasInstructionReference",!1,{type:"boolean",description:c("focusedStackFrameHasInstructionReference","True when the focused stack frame has instruction pointer reference.")});var w1="debug",Ggt={enum:["neverOpen","openOnSessionStart","openOnFirstSessionStart"],default:"openOnFirstSessionStart",description:c("internalConsoleOptions","Controls when the internal Debug Console should open.")};var F2=A("debugService");var h8;(t=>(t.deserialize=n=>n,t.serialize=n=>n))(h8||={});var m8;(t=>(t.deserialize=n=>({id:n.id,name:n.name,iconPath:n.iconPath&&{light:W.revive(n.iconPath.light),dark:W.revive(n.iconPath.dark)},iconClass:n.iconClass,visualization:n.visualization}),t.serialize=n=>n))(m8||={});var XS=A("clipboardService");var jp=A("contextViewService"),Sn=A("contextMenuService");var No=A("hoverService"),Yp=class extends P{constructor(t,n,i={},o,s){super();this.placement=t;this.instantHover=n;this.overrideOptions=i;this.configurationService=o;this.hoverService=s;this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))}))}lastHoverHideTime=0;timeLimit=200;_delay;get delay(){return this.isInstantlyHovering()?0:this._delay}hoverDisposables=this._register(new Q);showHover(t,n){let i=typeof this.overrideOptions=="function"?this.overrideOptions(t,n):this.overrideOptions;this.hoverDisposables.clear();let o=An(t.target)?[t.target]:t.target.targetElements;for(let a of o)this.hoverDisposables.add(si(a,"keydown",l=>{l.equals(9)&&this.hoverService.hideHover()}));let s=An(t.content)?void 0:t.content.toString();return this.hoverService.showHover({...t,...i,persistence:{hideOnKeyDown:!0,...i.persistence},id:s,appearance:{...t.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...i.appearance}},n)}isInstantlyHovering(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}setInstantHoverTimeLimit(t){if(!this.instantHover)throw new Error("Instant hover is not enabled");this.timeLimit=t}onDidHideHover(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}};Yp=C([v(3,ke),v(4,No)],Yp);var QS;(e=>e.ExtensionFeaturesRegistry="workbench.registry.extensionFeatures")(QS||={});var JS=A("IExtensionFeaturesManagementService"),iR=class{extensionFeatures=new Map;registerExtensionFeature(e){if(this.extensionFeatures.has(e.id))throw new Error(`Extension feature with id '${e.id}' already exists`);return this.extensionFeatures.set(e.id,e),{dispose:()=>this.extensionFeatures.delete(e.id)}}getExtensionFeature(e){return this.extensionFeatures.get(e)}getExtensionFeatures(){return Array.from(this.extensionFeatures.values())}};Ce.add(QS.ExtensionFeaturesRegistry,new iR);var rR=class extends io{_element;boxContainer;_label;contents;visible;_onDidChangeVisibility=this._register(new x);onDidChangeVisibility=this._onDidChangeVisibility.event;hover;constructor(e,t){super(),this._element=Ie(e,ue(".monaco-dropdown")),this._label=Ie(this._element,ue(".dropdown-label"));let n=t.labelRenderer;n||(n=o=>(o.textContent=t.label||"",null));for(let o of[se.CLICK,se.MOUSE_DOWN,wt.Tap])this._register(K(this.element,o,s=>We.stop(s,!0)));for(let o of[se.MOUSE_DOWN,wt.Tap])this._register(K(this._label,o,s=>{NI(s)&&(s.detail>1||s.button!==0)||(this.visible?this.hide():this.show())}));this._register(K(this._label,se.KEY_UP,o=>{let s=new ht(o);(s.equals(3)||s.equals(10))&&(We.stop(o,!0),this.visible?this.hide():this.show())}));let i=n(this._label);i&&this._register(i),this._register(Zt.addTarget(this._label))}get element(){return this._element}get label(){return this._label}set tooltip(e){this._label&&(!this.hover&&e!==""?this.hover=this._register(yi().setupManagedHover(Pt("mouse"),this._label,e)):this.hover&&this.hover.update(e))}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}isVisible(){return!!this.visible}onEvent(e,t){this.hide()}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}},ZS=class extends rR{constructor(t,n){super(t,n);this._options=n;this.actions=n.actions||[]}_menuOptions;_actions=[];set menuOptions(t){this._menuOptions=t}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(t){this._actions=t}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(t,n)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(t,n):void 0,getKeyBinding:t=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(t):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}};var ud=class extends Ii{menuActionsOrProvider;dropdownMenu;contextMenuProvider;actionItem=null;_onDidChangeVisibility=this._register(new x);onDidChangeVisibility=this._onDidChangeVisibility.event;options;constructor(e,t,n,i=Object.create(null)){super(null,e,i),this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=i,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;let t=o=>{this.element=Ie(o,ue("a.action-label"));let s=[];return typeof this.options.classNames=="string"?s=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(s=this.options.classNames),s.find(a=>a==="icon")||s.push("codicon"),this.element.classList.add(...s),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this._action.label&&this._register(yi().setupManagedHover(this.options.hoverDelegate??Pt("mouse"),this.element,this._action.label)),this.element.ariaLabel=this._action.label||"",null},n=Array.isArray(this.menuActionsOrProvider),i={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new ZS(e,i)),this._register(this.dropdownMenu.onDidChangeVisibility(o=>{this.element?.setAttribute("aria-expanded",`${o}`),this._onDidChangeVisibility.fire(o)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){let o=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return o.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){this.dropdownMenu?.show()}updateEnabled(){let e=!this.action.enabled;this.actionItem?.classList.toggle("disabled",e),this.element?.classList.toggle("disabled",e)}};var Xp=class{modifierLabels;constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;let i=[];for(let o=0,s=t.length;o<s;o++){let a=t[o],l=n(a);if(l===null)return null;i[o]=f8(a,l,this.modifierLabels[e])}return i.join(" ")}},oR=new Xp({ctrlKey:"\u2303",shiftKey:"\u21E7",altKey:"\u2325",metaKey:"\u2318",separator:""},{ctrlKey:c({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:c({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:c({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:c({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:c({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:c({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:c({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:c({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),Xvt=new Xp({ctrlKey:c({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:c({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:c({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:c({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:c({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:c({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:c({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:c({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:c({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:c({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:c({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:c({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),Qvt=new Xp({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),Jvt=new Xp({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function f8(r,e,t){if(e===null)return"";let n=[];return r.ctrlKey&&n.push(t.ctrlKey),r.shiftKey&&n.push(t.shiftKey),r.altKey&&n.push(t.altKey),r.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}var Oyt={buttonBackground:"#0E639C",buttonHoverBackground:"#006BB3",buttonSeparator:B.white.toString(),buttonForeground:B.white.toString(),buttonBorder:void 0,buttonSecondaryBackground:void 0,buttonSecondaryForeground:void 0,buttonSecondaryHoverBackground:void 0},bf=class extends P{options;_element;_label="";_labelElement;_labelShortElement;_hover;_onDidClick=this._register(new x);get onDidClick(){return this._onDidClick.event}_onDidEscape=this._register(new x);get onDidEscape(){return this._onDidEscape.event}focusTracker;constructor(e,t){super(),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);let n=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,i=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=i||"",this._element.style.backgroundColor=n||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),typeof t.title=="string"&&this.setTitle(t.title),typeof t.ariaLabel=="string"&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this._register(Zt.addTarget(this._element)),[se.CLICK,wt.Tap].forEach(o=>{this._register(K(this._element,o,s=>{if(!this.enabled){We.stop(s);return}this._onDidClick.fire(s)}))}),this._register(K(this._element,se.KEY_DOWN,o=>{let s=new ht(o),a=!1;this.enabled&&(s.equals(3)||s.equals(10))?(this._onDidClick.fire(o),a=!0):s.equals(9)&&(this._onDidEscape.fire(o),this._element.blur(),a=!0),a&&We.stop(s,!0)})),this._register(K(this._element,se.MOUSE_OVER,o=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register(K(this._element,se.MOUSE_OUT,o=>{this.updateBackground(!1)})),this.focusTracker=this._register(co(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){let t=[];for(let n of Yr(e))if(typeof n=="string"){if(n=n.trim(),n==="")continue;let i=document.createElement("span");i.textContent=n,t.push(i)}else t.push(n);return t}updateBackground(e){let t;this.options.secondary?t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t=e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){if(this._label===e||Rl(this._label)&&Rl(e)&&bv(this._label,e))return;this._element.classList.add("monaco-text-button");let t=this.options.supportShortLabel?this._labelElement:this._element;if(Rl(e)){let i=iS(e,{inline:!0});i.dispose();let o=i.element.querySelector("p")?.innerHTML;if(o){let s=Og(o,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});t.innerHTML=s}else us(t)}else this.options.supportIcons?us(t,...this.getContentElements(e)):t.textContent=e;let n="";typeof this.options.title=="string"?n=this.options.title:this.options.title&&(n=RB(e)),this.setTitle(n),typeof this.options.ariaLabel=="string"?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",n),this._label=e}get label(){return this._label}set labelShort(e){!this.options.supportShortLabel||!this._labelShortElement||(this.options.supportIcons?us(this._labelShortElement,...this.getContentElements(e)):this._labelShortElement.textContent=e)}set icon(e){this._element.classList.add(...qe.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}set checked(e){e?(this._element.classList.add("checked"),this._element.setAttribute("aria-checked","true")):(this._element.classList.remove("checked"),this._element.setAttribute("aria-checked","false"))}get checked(){return this._element.classList.contains("checked")}setTitle(e){!this._hover&&e!==""?this._hover=this._register(yi().setupManagedHover(this.options.hoverDelegate??Pt("mouse"),this._element,e)):this._hover&&this._hover.update(e)}focus(){this._element.focus()}hasFocus(){return or(this._element)}};var b8=()=>({msLoopTime:-1,msDelayTime:-1,dispose:()=>{}}),v8=b8;function U2(r,e){return v8(r,e)}var sR="done",aR="active",ex="infinite",tx="infinite-long-running",lR="discrete";var nx=class r extends P{static LONG_RUNNING_INFINITE_THRESHOLD=1e4;static PROGRESS_SIGNAL_DEFAULT_DELAY=3e3;workedVal;element;bit;totalWork;showDelayedScheduler;longRunningScheduler;progressSignal=this._register(new Ut);constructor(e,t){super(),this.workedVal=0,this.showDelayedScheduler=this._register(new Bn(()=>Ga(this.element),0)),this.longRunningScheduler=this._register(new Bn(()=>this.infiniteLongRunning(),r.LONG_RUNNING_INFINITE_THRESHOLD)),this.create(e,t)}create(e,t){this.element=document.createElement("div"),this.element.classList.add("monaco-progress-container"),this.element.setAttribute("role","progressbar"),this.element.setAttribute("aria-valuemin","0"),e.appendChild(this.element),this.bit=document.createElement("div"),this.bit.classList.add("progress-bit"),this.bit.style.backgroundColor=t?.progressBarBackground||"#0E70C0",this.element.appendChild(this.bit)}off(){this.bit.style.width="inherit",this.bit.style.opacity="1",this.element.classList.remove(aR,ex,tx,lR),this.workedVal=0,this.totalWork=void 0,this.longRunningScheduler.cancel(),this.progressSignal.clear()}done(){return this.doDone(!0)}stop(){return this.doDone(!1)}doDone(e){return this.element.classList.add(sR),this.element.classList.contains(ex)?(this.bit.style.opacity="0",e?setTimeout(()=>this.off(),200):this.off()):(this.bit.style.width="inherit",e?setTimeout(()=>this.off(),200):this.off()),this}infinite(){return this.bit.style.width="2%",this.bit.style.opacity="1",this.element.classList.remove(lR,sR,tx),this.element.classList.add(aR,ex),this.longRunningScheduler.schedule(),this}infiniteLongRunning(){this.element.classList.add(tx)}total(e){return this.workedVal=0,this.totalWork=e,this.element.setAttribute("aria-valuemax",e.toString()),this}hasTotal(){return fr(this.totalWork)}worked(e){return e=Math.max(1,Number(e)),this.doSetWorked(this.workedVal+e)}setWorked(e){return e=Math.max(1,Number(e)),this.doSetWorked(e)}doSetWorked(e){let t=this.totalWork||100;return this.workedVal=e,this.workedVal=Math.min(t,this.workedVal),this.element.classList.remove(ex,tx,sR),this.element.classList.add(aR,lR),this.element.setAttribute("aria-valuenow",e.toString()),this.bit.style.width=100*(this.workedVal/t)+"%",this}getContainer(){return this.element}show(e){this.showDelayedScheduler.cancel(),this.progressSignal.value=U2(r.PROGRESS_SIGNAL_DEFAULT_DELAY),typeof e=="number"?this.showDelayedScheduler.schedule(e):Ga(this.element)}hide(){Zl(this.element),this.showDelayedScheduler.cancel(),this.progressSignal.clear()}};var ix=class{constructor(e,t=0,n=e.length,i=t-1){this.items=e;this.start=t;this.end=n;this.index=i}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}};var rx=class{_history;_limit;_navigator;constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isFirst(){return this._currentPosition()===0}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(e){return this._history.has(e)}clear(){this._initialize([]),this._onChange()}_onChange(){this._reduceToLimit();let e=this._elements;this._navigator=new ix(e,0,e.length,e.length)}_reduceToLimit(){let e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){let e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(let t of e)this._history.add(t)}get _elements(){let e=[];return this._history.forEach(t=>e.push(t)),e}};var vf=ue;var V2={inputBackground:"#3C3C3C",inputForeground:"#CCCCCC",inputValidationInfoBorder:"#55AAFF",inputValidationInfoBackground:"#063B49",inputValidationWarningBorder:"#B89500",inputValidationWarningBackground:"#352A05",inputValidationErrorBorder:"#BE1100",inputValidationErrorBackground:"#5A1D1D",inputBorder:void 0,inputValidationErrorForeground:void 0,inputValidationInfoForeground:void 0,inputValidationWarningForeground:void 0},ox=class extends Jn{contextViewProvider;element;input;actionbar;options;message;placeholder;tooltip;ariaLabel;validation;state="idle";mirror;cachedHeight;cachedContentHeight;maxHeight=Number.POSITIVE_INFINITY;scrollableElement;hover;_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;_onDidHeightChange=this._register(new x);onDidHeightChange=this._onDidHeightChange.event;constructor(e,t,n){super(),this.contextViewProvider=t,this.options=n,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=this.options.tooltip??(this.placeholder||""),this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=Ie(e,vf(".monaco-inputbox.idle"));let i=this.options.flexibleHeight?"textarea":"input",o=Ie(this.element,vf(".ibwrapper"));if(this.input=Ie(o,vf(i+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=Ie(o,vf("div.mirror")),this.mirror.innerText="\xA0",this.scrollableElement=new KI(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),Ie(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(l=>this.input.scrollTop=l.scrollTop));let s=this._register(new Ue(e.ownerDocument,"selectionchange")),a=N.filter(s.event,()=>e.ownerDocument.getSelection()?.anchorNode===o);this._register(a(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new Ao(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.hover?this.hover.update(e):this.hover=this._register(yi().setupManagedHover(Pt("mouse"),this.input,e))}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get mirrorElement(){return this.mirror}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get step(){return this.input.step}set step(e){this.input.step=e}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:LI(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return or(this.input)}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){let e=this.input.selectionStart;if(e===null)return null;let t=this.input.selectionEnd??e;return{start:e,end:t}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}setEnabled(e){e?this.enable():this.disable()}get width(){return _p(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;if(this.mirror){let n=parseFloat(this.mirror.style.paddingLeft||"")||0,i=parseFloat(this.mirror.style.paddingRight||"")||0;t=n+i}this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;let e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){if(this.state==="open"&&ii(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));let n=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${Rr(n.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}isInputValid(){return!!this.validation&&!this.validation(this.value)}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e?.type}stylesForType(e){let t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e,t=()=>e.style.width=_p(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:i=>{if(!this.message)return null;e=Ie(i,vf(".monaco-inputbox-container")),t();let o={inline:!0,className:"monaco-inputbox-message"},s=this.message.formatContent?gB(this.message.content,o):mB(this.message.content,o);s.classList.add(this.classForType(this.message.type));let a=this.stylesForType(this.message.type);return s.style.backgroundColor=a.background??"",s.style.color=a.foreground??"",s.style.border=a.border?`1px solid ${a.border}`:"",Ie(e,s),null},onHide:()=>{this.state="closed"},layout:t});let n;this.message.type===3?n=c("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?n=c("alertWarningMessage","Warning: {0}",this.message.content):n=c("alertInfoMessage","Info: {0}",this.message.content),nd(n),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;let e=this.value,n=e.charCodeAt(e.length-1)===10?" ":"";(e+n).replace(/\u000c/g,"")?this.mirror.textContent=e+n:this.mirror.innerText="\xA0",this.layout()}applyStyles(){let e=this.options.inputBoxStyles,t=e.inputBackground??"",n=e.inputForeground??"",i=e.inputBorder??"";this.element.style.backgroundColor=t,this.element.style.color=n,this.input.style.backgroundColor="inherit",this.input.style.color=n,this.element.style.border=`1px solid ${Rr(i,"transparent")}`}layout(){if(!this.mirror)return;let e=this.cachedContentHeight;this.cachedContentHeight=LI(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){let t=this.inputElement,n=t.selectionStart,i=t.selectionEnd,o=t.value;n!==null&&i!==null&&(this.value=o.substr(0,n)+e+o.substr(i),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar?.dispose(),super.dispose()}},pd=class extends ox{history;observer;_onDidFocus=this._register(new x);onDidFocus=this._onDidFocus.event;_onDidBlur=this._register(new x);onDidBlur=this._onDidBlur.event;constructor(e,t,n){let i=c({key:"history.inputbox.hint.suffix.noparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis ")", for example "Filter (e.g. text, !exclude)". The character inserted into the final string is \u21C5 to represent the up and down arrow keys.']}," or {0} for history","\u21C5"),o=c({key:"history.inputbox.hint.suffix.inparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. "Find"). The character inserted into the final string is \u21C5 to represent the up and down arrow keys.']}," ({0} for history)","\u21C5");super(e,t,n),this.history=new rx(n.history,100);let s=()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(i)&&!this.placeholder.endsWith(o)&&this.history.getHistory().length){let a=this.placeholder.endsWith(")")?i:o,l=this.placeholder+a;n.showPlaceholderOnFocus&&!or(this.input)?this.placeholder=l:this.setPlaceHolder(l)}};this.observer=new MutationObserver((a,l)=>{a.forEach(d=>{d.target.textContent||s()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>s()),this.onblur(this.input,()=>{let a=l=>{if(this.placeholder.endsWith(l)){let d=this.placeholder.slice(0,this.placeholder.length-l.length);return n.showPlaceholderOnFocus?this.placeholder=d:this.setPlaceHolder(d),!0}else return!1};a(o)||a(i)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}prependHistory(e){let t=this.getHistory();this.clearHistory(),e.forEach(n=>{this.history.add(n)}),t.forEach(n=>{this.history.add(n)})}getHistory(){return this.history.getHistory()}isAtFirstInHistory(){return this.history.isFirst()}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=e??"",D_(this.value?this.value:c("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,D_(this.value))}clearHistory(){this.history.clear()}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}};var y8=c("caseDescription","Match Case"),I8=c("wordsDescription","Match Whole Word"),S8=c("regexDescription","Use Regular Expression"),sx=class extends ps{constructor(e){super({icon:z.caseSensitive,title:y8+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Pt("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},ax=class extends ps{constructor(e){super({icon:z.wholeWord,title:I8+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Pt("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},lx=class extends ps{constructor(e){super({icon:z.regex,title:S8+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Pt("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}};var x8=c("defaultLabel","input"),Qp=class extends Jn{static OPTION_CHANGE="optionChange";placeholder;validation;label;showCommonFindToggles;fixFocusOnOptionClickEnabled=!0;imeSessionInProgress=!1;additionalTogglesDisposables=this._register(new Ut);controls;regex;wholeWords;caseSensitive;additionalToggles=[];domNode;inputBox;_onDidOptionChange=this._register(new x);onDidOptionChange=this._onDidOptionChange.event;_onKeyDown=this._register(new x);onKeyDown=this._onKeyDown.event;_onMouseDown=this._register(new x);onMouseDown=this._onMouseDown.event;_onInput=this._register(new x);onInput=this._onInput.event;_onKeyUp=this._register(new x);onKeyUp=this._onKeyUp.event;_onCaseSensitiveKeyDown=this._register(new x);onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event;_onRegexKeyDown=this._register(new x);onRegexKeyDown=this._onRegexKeyDown.event;constructor(e,t,n){super(),this.placeholder=n.placeholder||"",this.validation=n.validation,this.label=n.label||x8,this.showCommonFindToggles=!!n.showCommonFindToggles;let i=n.appendCaseSensitiveLabel||"",o=n.appendWholeWordsLabel||"",s=n.appendRegexLabel||"",a=n.history||[],l=!!n.flexibleHeight,d=!!n.flexibleWidth,u=n.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new pd(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:n.showHistoryHint,flexibleHeight:l,flexibleWidth:d,flexibleMaxHeight:u,inputBoxStyles:n.inputBoxStyles}));let p=this._register(qa());if(this.showCommonFindToggles){this.regex=this._register(new lx({appendTitle:s,isChecked:!1,hoverDelegate:p,...n.toggleStyles})),this._register(this.regex.onChange(m=>{this._onDidOptionChange.fire(m),!m&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(m=>{this._onRegexKeyDown.fire(m)})),this.wholeWords=this._register(new ax({appendTitle:o,isChecked:!1,hoverDelegate:p,...n.toggleStyles})),this._register(this.wholeWords.onChange(m=>{this._onDidOptionChange.fire(m),!m&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new sx({appendTitle:i,isChecked:!1,hoverDelegate:p,...n.toggleStyles})),this._register(this.caseSensitive.onChange(m=>{this._onDidOptionChange.fire(m),!m&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(m=>{this._onCaseSensitiveKeyDown.fire(m)}));let h=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,m=>{if(m.equals(15)||m.equals(17)||m.equals(9)){let f=h.indexOf(this.domNode.ownerDocument.activeElement);if(f>=0){let g=-1;m.equals(17)?g=(f+1)%h.length:m.equals(15)&&(f===0?g=h.length-1:g=f-1),m.equals(9)?(h[f].blur(),this.inputBox.focus()):g>=0&&h[g].focus(),We.stop(m,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(n?.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e?.appendChild(this.domNode),this._register(K(this.inputBox.inputElement,"compositionstart",h=>{this.imeSessionInProgress=!0})),this._register(K(this.inputBox.inputElement,"compositionend",h=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,h=>this._onKeyDown.fire(h)),this.onkeyup(this.inputBox.inputElement,h=>this._onKeyUp.fire(h)),this.oninput(this.inputBox.inputElement,h=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,h=>this._onMouseDown.fire(h))}get isImeSessionInProgress(){return this.imeSessionInProgress}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex?.enable(),this.wholeWords?.enable(),this.caseSensitive?.enable();for(let e of this.additionalToggles)e.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex?.disable(),this.wholeWords?.disable(),this.caseSensitive?.disable();for(let e of this.additionalToggles)e.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(let t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new Q;for(let t of e??[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange(n=>{this._onDidOptionChange.fire(n),!n&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=(this.caseSensitive?.width()??0)+(this.wholeWords?.width()??0)+(this.regex?.width()??0)+this.additionalToggles.reduce((t,n)=>t+n.width(),0)}clear(){this.clearValidation(),this.setValue(""),this.focus()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}onSearchSubmit(){this.inputBox.addToHistory()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive?.checked??!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){return this.wholeWords?.checked??!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){return this.regex?.checked??!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){this.caseSensitive?.focus()}focusOnRegex(){this.regex?.focus()}_lastHighlightFindOptions=0;highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}clearValidation(){this.inputBox.hideMessage()}};var en=class extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}},Ac=class{constructor(e){this.fn=e}_map=new WeakMap;map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}};var bs=class{originalStart;originalLength;modifiedStart;modifiedLength;constructor(e,t,n,i){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}};var hd=class{static Assert(e,t){if(!e)throw new Error(t)}},md=class{static Copy(e,t,n,i,o){for(let s=0;s<o;s++)n[i+s]=e[t+s]}static Copy2(e,t,n,i,o){for(let s=0;s<o;s++)n[i+s]=e[t+s]}};var dx=class{m_changes;m_originalStart;m_modifiedStart;m_originalCount;m_modifiedCount;constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new bs(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},yf=class r{ContinueProcessingPredicate;_originalSequence;_modifiedSequence;_hasStrings;_originalStringElements;_originalElementsOrHash;_modifiedStringElements;_modifiedElementsOrHash;m_forwardHistory;m_reverseHistory;constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;let[i,o,s]=r._getElements(e),[a,l,d]=r._getElements(t);this._hasStrings=s&&d,this._originalStringElements=i,this._originalElementsOrHash=o,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){let t=e.getElements();if(r._isStringArray(t)){let n=new Int32Array(t.length);for(let i=0,o=t.length;i<o;i++)n[i]=wg(t[i],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;let n=r._getStrictElement(this._originalSequence,e),i=r._getStrictElement(this._modifiedSequence,t);return n===i}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,i,o){let s=[!1],a=this.ComputeDiffRecursive(e,t,n,i,s);return o&&(a=this.PrettifyChanges(a)),{quitEarly:s[0],changes:a}}ComputeDiffRecursive(e,t,n,i,o){for(o[0]=!1;e<=t&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&i>=n&&this.ElementsAreEqual(t,i);)t--,i--;if(e>t||n>i){let p;return n<=i?(hd.Assert(e===t+1,"originalStart should only be one more than originalEnd"),p=[new bs(e,0,n,i-n+1)]):e<=t?(hd.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),p=[new bs(e,t-e+1,n,0)]):(hd.Assert(e===t+1,"originalStart should only be one more than originalEnd"),hd.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),p=[]),p}let s=[0],a=[0],l=this.ComputeRecursionPoint(e,t,n,i,s,a,o),d=s[0],u=a[0];if(l!==null)return l;if(!o[0]){let p=this.ComputeDiffRecursive(e,d,n,u,o),h=[];return o[0]?h=[new bs(d+1,t-(d+1)+1,u+1,i-(u+1)+1)]:h=this.ComputeDiffRecursive(d+1,t,u+1,i,o),this.ConcatenateChanges(p,h)}return[new bs(e,t-e+1,n,i-n+1)]}WALKTRACE(e,t,n,i,o,s,a,l,d,u,p,h,m,f,g,y,T,E){let D=null,_=null,O=new dx,G=t,Z=n,M=m[0]-y[0]-i,H=-1073741824,oe=this.m_forwardHistory.length-1;do{let ee=M+e;ee===G||ee<Z&&d[ee-1]<d[ee+1]?(p=d[ee+1],f=p-M-i,p<H&&O.MarkNextChange(),H=p,O.AddModifiedElement(p+1,f),M=ee+1-e):(p=d[ee-1]+1,f=p-M-i,p<H&&O.MarkNextChange(),H=p-1,O.AddOriginalElement(p,f+1),M=ee-1-e),oe>=0&&(d=this.m_forwardHistory[oe],e=d[0],G=1,Z=d.length-1)}while(--oe>=-1);if(D=O.getReverseChanges(),E[0]){let ee=m[0]+1,re=y[0]+1;if(D!==null&&D.length>0){let Fe=D[D.length-1];ee=Math.max(ee,Fe.getOriginalEnd()),re=Math.max(re,Fe.getModifiedEnd())}_=[new bs(ee,h-ee+1,re,g-re+1)]}else{O=new dx,G=s,Z=a,M=m[0]-y[0]-l,H=1073741824,oe=T?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let ee=M+o;ee===G||ee<Z&&u[ee-1]>=u[ee+1]?(p=u[ee+1]-1,f=p-M-l,p>H&&O.MarkNextChange(),H=p+1,O.AddOriginalElement(p+1,f+1),M=ee+1-o):(p=u[ee-1],f=p-M-l,p>H&&O.MarkNextChange(),H=p,O.AddModifiedElement(p+1,f+1),M=ee-1-o),oe>=0&&(u=this.m_reverseHistory[oe],o=u[0],G=1,Z=u.length-1)}while(--oe>=-1);_=O.getChanges()}return this.ConcatenateChanges(D,_)}ComputeRecursionPoint(e,t,n,i,o,s,a){let l=0,d=0,u=0,p=0,h=0,m=0;e--,n--,o[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let f=t-e+(i-n),g=f+1,y=new Int32Array(g),T=new Int32Array(g),E=i-n,D=t-e,_=e-n,O=t-i,Z=(D-E)%2===0;y[E]=e,T[D]=t,a[0]=!1;for(let M=1;M<=f/2+1;M++){let H=0,oe=0;u=this.ClipDiagonalBound(E-M,M,E,g),p=this.ClipDiagonalBound(E+M,M,E,g);for(let re=u;re<=p;re+=2){re===u||re<p&&y[re-1]<y[re+1]?l=y[re+1]:l=y[re-1]+1,d=l-(re-E)-_;let Fe=l;for(;l<t&&d<i&&this.ElementsAreEqual(l+1,d+1);)l++,d++;if(y[re]=l,l+d>H+oe&&(H=l,oe=d),!Z&&Math.abs(re-D)<=M-1&&l>=T[re])return o[0]=l,s[0]=d,Fe<=T[re]&&M<=1448?this.WALKTRACE(E,u,p,_,D,h,m,O,y,T,l,t,o,d,i,s,Z,a):null}let ee=(H-e+(oe-n)-M)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(H,ee))return a[0]=!0,o[0]=H,s[0]=oe,ee>0&&M<=1448?this.WALKTRACE(E,u,p,_,D,h,m,O,y,T,l,t,o,d,i,s,Z,a):(e++,n++,[new bs(e,t-e+1,n,i-n+1)]);h=this.ClipDiagonalBound(D-M,M,D,g),m=this.ClipDiagonalBound(D+M,M,D,g);for(let re=h;re<=m;re+=2){re===h||re<m&&T[re-1]>=T[re+1]?l=T[re+1]-1:l=T[re-1],d=l-(re-D)-O;let Fe=l;for(;l>e&&d>n&&this.ElementsAreEqual(l,d);)l--,d--;if(T[re]=l,Z&&Math.abs(re-E)<=M&&l<=y[re])return o[0]=l,s[0]=d,Fe>=y[re]&&M<=1448?this.WALKTRACE(E,u,p,_,D,h,m,O,y,T,l,t,o,d,i,s,Z,a):null}if(M<=1447){let re=new Int32Array(p-u+2);re[0]=E-u+1,md.Copy2(y,u,re,1,p-u+1),this.m_forwardHistory.push(re),re=new Int32Array(m-h+2),re[0]=D-h+1,md.Copy2(T,h,re,1,m-h+1),this.m_reverseHistory.push(re)}}return this.WALKTRACE(E,u,p,_,D,h,m,O,y,T,l,t,o,d,i,s,Z,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){let n=e[t],i=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,o=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,s=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<i&&n.modifiedStart+n.modifiedLength<o&&(!s||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){let d=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!d)break;n.originalStart++,n.modifiedStart++}let l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){let n=e[t],i=0,o=0;if(t>0){let p=e[t-1];i=p.originalStart+p.originalLength,o=p.modifiedStart+p.modifiedLength}let s=n.originalLength>0,a=n.modifiedLength>0,l=0,d=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let p=1;;p++){let h=n.originalStart-p,m=n.modifiedStart-p;if(h<i||m<o||s&&!this.OriginalElementsAreEqual(h,h+n.originalLength)||a&&!this.ModifiedElementsAreEqual(m,m+n.modifiedLength))break;let g=(h===i&&m===o?5:0)+this._boundaryScore(h,n.originalLength,m,n.modifiedLength);g>d&&(d=g,l=p)}n.originalStart-=l,n.modifiedStart-=l;let u=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],u)){e[t-1]=u[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){let i=e[t-1],o=e[t],s=o.originalStart-i.originalStart-i.originalLength,a=i.originalStart,l=o.originalStart+o.originalLength,d=l-a,u=i.modifiedStart,p=o.modifiedStart+o.modifiedLength,h=p-u;if(s<5&&d<20&&h<20){let m=this._findBetterContiguousSequence(a,d,u,h,s);if(m){let[f,g]=m;(f!==i.originalStart+i.originalLength||g!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=f-i.originalStart,i.modifiedLength=g-i.modifiedStart,o.originalStart=f+s,o.modifiedStart=g+s,o.originalLength=l-o.originalStart,o.modifiedLength=p-o.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,i,o){if(t<o||i<o)return null;let s=e+t-o+1,a=n+i-o+1,l=0,d=0,u=0;for(let p=e;p<s;p++)for(let h=n;h<a;h++){let m=this._contiguousSequenceScore(p,h,o);m>0&&m>l&&(l=m,d=p,u=h)}return l>0?[d,u]:null}_contiguousSequenceScore(e,t,n){let i=0;for(let o=0;o<n;o++){if(!this.ElementsAreEqual(e+o,t+o))return 0;i+=this._originalStringElements[e+o].length}return i}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){let n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){let n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,i){let o=this._OriginalRegionIsBoundary(e,t)?1:0,s=this._ModifiedRegionIsBoundary(n,i)?1:0;return o+s}ConcatenateChanges(e,t){let n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){let i=new Array(e.length+t.length-1);return md.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],md.Copy(t,1,i,e.length,t.length-1),i}else{let i=new Array(e.length+t.length);return md.Copy(e,0,i,0,e.length),md.Copy(t,0,i,e.length,t.length),i}}ChangesOverlap(e,t,n){if(hd.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),hd.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){let i=e.originalStart,o=e.originalLength,s=e.modifiedStart,a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(o=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new bs(i,o,s,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,i){if(e>=0&&e<i)return e;let o=n,s=i-n-1,a=t%2===0;if(e<0){let l=o%2===0;return a===l?0:1}else{let l=s%2===0;return a===l?i-1:i-2}}};function If(r){return typeof r=="object"&&"visibility"in r&&"data"in r}function Oc(r){switch(r){case!0:return 1;case!1:return 0;default:return r}}function dR(r){return typeof r.collapsible=="boolean"}var cx=class{constructor(e,t,n={}){this.user=e;this.collapseByDefault=typeof n.collapseByDefault>"u"?!1:n.collapseByDefault,this.allowNonCollapsibleParents=n.allowNonCollapsibleParents??!1,this.filter=n.filter,this.autoExpandSingleChildren=typeof n.autoExpandSingleChildren>"u"?!1:n.autoExpandSingleChildren,this.root={parent:void 0,element:t,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}rootRef=[];root;eventBufferer=new cl;_onDidSpliceModel=new x;onDidSpliceModel=this._onDidSpliceModel.event;_onDidSpliceRenderedNodes=new x;onDidSpliceRenderedNodes=this._onDidSpliceRenderedNodes.event;_onDidChangeCollapseState=new x;onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event);_onDidChangeRenderNodeCount=new x;onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event);collapseByDefault;allowNonCollapsibleParents;filter;autoExpandSingleChildren;refilterDelayer=new so(bb);splice(e,t,n=$e.empty(),i={}){if(e.length===0)throw new en(this.user,"Invalid tree location");i.diffIdentityProvider?this.spliceSmart(i.diffIdentityProvider,e,t,n,i):this.spliceSimple(e,t,n,i)}spliceSmart(e,t,n,i=$e.empty(),o,s=o.diffDepth??0){let{parentNode:a}=this.getParentNodeWithListIndex(t);if(!a.lastDiffIds)return this.spliceSimple(t,n,i,o);let l=[...i],d=t[t.length-1],u=new yf({getElements:()=>a.lastDiffIds},{getElements:()=>[...a.children.slice(0,d),...l,...a.children.slice(d+n)].map(g=>e.getId(g.element).toString())}).ComputeDiff(!1);if(u.quitEarly)return a.lastDiffIds=void 0,this.spliceSimple(t,n,l,o);let p=t.slice(0,-1),h=(g,y,T)=>{if(s>0)for(let E=0;E<T;E++)g--,y--,this.spliceSmart(e,[...p,g,0],Number.MAX_SAFE_INTEGER,l[y].children,o,s-1)},m=Math.min(a.children.length,d+n),f=l.length;for(let g of u.changes.sort((y,T)=>T.originalStart-y.originalStart))h(m,f,m-(g.originalStart+g.originalLength)),m=g.originalStart,f=g.modifiedStart-d,this.spliceSimple([...p,m],g.originalLength,$e.slice(l,f,f+g.modifiedLength),o);h(m,f,m)}spliceSimple(e,t,n=$e.empty(),{onDidCreateNode:i,onDidDeleteNode:o,diffIdentityProvider:s}){let{parentNode:a,listIndex:l,revealed:d,visible:u}=this.getParentNodeWithListIndex(e),p=[],h=$e.map(n,O=>this.createTreeNode(O,a,a.visible?1:0,d,p,i)),m=e[e.length-1],f=0;for(let O=m;O>=0&&O<a.children.length;O--){let G=a.children[O];if(G.visible){f=G.visibleChildIndex;break}}let g=[],y=0,T=0;for(let O of h)g.push(O),T+=O.renderNodeCount,O.visible&&(O.visibleChildIndex=f+y++);let E=BE(a.children,m,t,g);s?a.lastDiffIds?BE(a.lastDiffIds,m,t,g.map(O=>s.getId(O.element).toString())):a.lastDiffIds=a.children.map(O=>s.getId(O.element).toString()):a.lastDiffIds=void 0;let D=0;for(let O of E)O.visible&&D++;if(D!==0)for(let O=m+g.length;O<a.children.length;O++){let G=a.children[O];G.visible&&(G.visibleChildIndex-=D)}if(a.visibleChildrenCount+=y-D,d&&u){let O=E.reduce((G,Z)=>G+(Z.visible?Z.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,T-O),this._onDidSpliceRenderedNodes.fire({start:l,deleteCount:O,elements:p})}if(E.length>0&&o){let O=G=>{o(G),G.children.forEach(O)};E.forEach(O)}this._onDidSpliceModel.fire({insertedNodes:g,deletedNodes:E});let _=a;for(;_;){if(_.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}_=_.parent}}rerender(e){if(e.length===0)throw new en(this.user,"Invalid tree location");let{node:t,listIndex:n,revealed:i}=this.getTreeNodeWithListIndex(e);t.visible&&i&&this._onDidSpliceRenderedNodes.fire({start:n,deleteCount:1,elements:[t]})}has(e){return this.hasTreeNode(e)}getListIndex(e){let{listIndex:t,visible:n,revealed:i}=this.getTreeNodeWithListIndex(e);return n&&i?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){let n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsible);let i={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,i))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){let i=this.getTreeNode(e);typeof t>"u"&&(t=!i.collapsed);let o={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,o))}_setCollapseState(e,t){let{node:n,listIndex:i,revealed:o}=this.getTreeNodeWithListIndex(e),s=this._setListNodeCollapseState(n,i,o,t);if(n!==this.root&&this.autoExpandSingleChildren&&s&&!dR(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let a=-1;for(let l=0;l<n.children.length;l++)if(n.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return s}_setListNodeCollapseState(e,t,n,i){let o=this._setNodeCollapseState(e,i,!1);if(!n||!e.visible||!o)return o;let s=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=s-(t===-1?0:1);return this._onDidSpliceRenderedNodes.fire({start:t+1,deleteCount:l,elements:a.slice(1)}),o}_setNodeCollapseState(e,t,n){let i;if(e===this.root?i=!1:(dR(t)?(i=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(i=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):i=!1,i&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!dR(t)&&t.recursive)for(let o of e.children)i=this._setNodeCollapseState(o,t,!0)||i;return i}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){let e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this._onDidSpliceRenderedNodes.fire({start:0,deleteCount:e,elements:t}),this.refilterDelayer.cancel()}createTreeNode(e,t,n,i,o,s){let a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,n);a.visibility=l,i&&o.push(a);let d=e.children||$e.empty(),u=i&&l!==0&&!a.collapsed,p=0,h=1;for(let m of d){let f=this.createTreeNode(m,a,l,u,o,s);a.children.push(f),h+=f.renderNodeCount,f.visible&&(f.visibleChildIndex=p++)}return this.allowNonCollapsibleParents||(a.collapsible=a.collapsible||a.children.length>0),a.visibleChildrenCount=p,a.visible=l===2?p>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=h):(a.renderNodeCount=0,i&&o.pop()),s?.(a),a}updateNodeAfterCollapseChange(e){let t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(let n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){let t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,i=!0){let o;if(e!==this.root){if(o=this._filterNode(e,t),o===0)return e.visible=!1,e.renderNodeCount=0,!1;i&&n.push(e)}let s=n.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||o!==0){let l=0;for(let d of e.children)a=this._updateNodeAfterFilterChange(d,o,n,i&&!e.collapsed)||a,d.visible&&(d.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=o===2?a:o===1,e.visibility=o),e.visible?e.collapsed||(e.renderNodeCount+=n.length-s):(e.renderNodeCount=0,i&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){let n=this.filter?this.filter.filter(e.element,t):1;return typeof n=="boolean"?(e.filterData=void 0,n?1:0):If(n)?(e.filterData=n.data,Oc(n.visibility)):(e.filterData=void 0,Oc(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;let[n,...i]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(i,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;let[n,...i]=e;if(n<0||n>t.children.length)throw new en(this.user,"Invalid tree location");return this.getTreeNode(i,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};let{parentNode:t,listIndex:n,revealed:i,visible:o}=this.getParentNodeWithListIndex(e),s=e[e.length-1];if(s<0||s>t.children.length)throw new en(this.user,"Invalid tree location");let a=t.children[s];return{node:a,listIndex:n,revealed:i,visible:o&&a.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,i=!0,o=!0){let[s,...a]=e;if(s<0||s>t.children.length)throw new en(this.user,"Invalid tree location");for(let l=0;l<s;l++)n+=t.children[l].renderNodeCount;return i=i&&!t.collapsed,o=o&&t.visible,a.length===0?{parentNode:t,listIndex:n,revealed:i,visible:o}:this.getParentNodeWithListIndex(a,t.children[s],n+1,i,o)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){let t=[],n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:Sb(e)[0]}getFirstElementChild(e){let t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}getLastElementAncestor(e=[]){let t=this.getTreeNode(e);if(t.children.length!==0)return this._getLastElementAncestor(t)}_getLastElementAncestor(e){return e.children.length===0?e.element:this._getLastElementAncestor(e.children[e.children.length-1])}};var uR=class extends $a{constructor(t){super(t.elements.map(n=>n.element));this.data=t}set context(t){this.data.context=t}get context(){return this.data.context}};function cR(r){return r instanceof $a?new uR(r):r}var pR=class{constructor(e,t){this.modelProvider=e;this.dnd=t}autoExpandNode;autoExpandDisposable=P.None;disposables=new Q;getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart?.(cR(e),t)}onDragOver(e,t,n,i,o,s=!0){let a=this.dnd.onDragOver(cR(e),t&&t.element,n,i,o),l=this.autoExpandNode!==t;if(l&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return a;if(l&&typeof a!="boolean"&&a.autoExpand&&(this.autoExpandDisposable=Dm(()=>{let m=this.modelProvider(),f=m.getNodeLocation(t);m.isCollapsed(f)&&m.setCollapsed(f,!1),this.autoExpandNode=void 0},500,this.disposables)),typeof a=="boolean"||!a.accept||typeof a.bubble>"u"||a.feedback){if(!s){let m=typeof a=="boolean"?a:a.accept,f=typeof a=="boolean"?void 0:a.effect;return{accept:m,effect:f,feedback:[n]}}return a}if(a.bubble===1){let m=this.modelProvider(),f=m.getNodeLocation(t),g=m.getParentNodeLocation(f),y=m.getNode(g),T=g&&m.getListIndex(g);return this.onDragOver(e,y,T,i,o,!1)}let d=this.modelProvider(),u=d.getNodeLocation(t),p=d.getListIndex(u),h=d.getListRenderCount(u);return{...a,feedback:$n(p,p+h)}}drop(e,t,n,i,o){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(cR(e),t&&t.element,n,i,o)}onDragEnd(e){this.dnd.onDragEnd?.(e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}};function T8(r,e){return e&&{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new pR(r,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent({...t,element:t.element})},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent({...t,element:t.element})}},accessibilityProvider:e.accessibilityProvider&&{...e.accessibilityProvider,getSetSize(t){let n=r(),i=n.getNodeLocation(t),o=n.getParentNodeLocation(i);return n.getNode(o).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}}}var Zp=class{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight?.(e.element,t)}},hR=class r{focus;selection;expanded;scrollTop;static lift(e){return e instanceof r?e:new r(e)}static empty(e=0){return new r({focus:[],selection:[],expanded:Object.create(null),scrollTop:e})}constructor(e){if(this.focus=new Set(e.focus),this.selection=new Set(e.selection),e.expanded instanceof Array){this.expanded=Object.create(null);for(let t of e.expanded)this.expanded[t]=1}else this.expanded=e.expanded;this.expanded=e.expanded,this.scrollTop=e.scrollTop}toJSON(){return{focus:Array.from(this.focus),selection:Array.from(this.selection),expanded:this.expanded,scrollTop:this.scrollTop}}};var mR=class{constructor(e,t=[]){this._elements=t;this.onDidChange=N.forEach(e,n=>this._elements=n,this.disposables)}disposables=new Q;onDidChange;get elements(){return this._elements}dispose(){this.disposables.dispose()}},gR=class r{constructor(e,t,n,i,o,s={}){this.renderer=e;this.model=t;this.activeNodes=i;this.renderedIndentGuides=o;this.templateId=e.templateId,this.updateOptions(s),N.map(n,a=>a.node)(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState?.(this.onDidChangeTwistieState,this,this.disposables)}static DefaultIndent=8;templateId;renderedElements=new Map;renderedNodes=new Map;indent=r.DefaultIndent;hideTwistiesOfChildlessElements=!1;shouldRenderIndentGuides=!1;activeIndentNodes=new Set;indentGuidesDisposable=P.None;disposables=new Q;updateOptions(e={}){if(typeof e.indent<"u"){let t=bi(e.indent,0,40);if(t!==this.indent){this.indent=t;for(let[n,i]of this.renderedNodes)this.renderTreeElement(n,i)}}if(typeof e.renderIndentGuides<"u"){let t=e.renderIndentGuides!=="none";if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(let[n,i]of this.renderedNodes)this._renderIndentGuides(n,i);if(this.indentGuidesDisposable.dispose(),t){let n=new Q;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,n),this.indentGuidesDisposable=n,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){let t=Ie(e,ue(".monaco-tl-row")),n=Ie(t,ue(".monaco-tl-indent")),i=Ie(t,ue(".monaco-tl-twistie")),o=Ie(t,ue(".monaco-tl-contents")),s=this.renderer.renderTemplate(o);return{container:e,indent:n,twistie:i,indentGuidesDisposable:P.None,templateData:s}}renderElement(e,t,n,i){this.renderedNodes.set(e,n),this.renderedElements.set(e.element,e),this.renderTreeElement(e,n),this.renderer.renderElement(e,t,n.templateData,i)}disposeElement(e,t,n,i){n.indentGuidesDisposable.dispose(),this.renderer.disposeElement?.(e,t,n.templateData,i),typeof i=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){let t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){let t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){let n=r.DefaultIndent+(e.depth-1)*this.indent;t.twistie.style.paddingLeft=`${n}px`,t.indent.style.width=`${n+this.indent-16}px`,e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...qe.asClassNameArray(z.treeItemExpanded));let i=!1;this.renderer.renderTwistie&&(i=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(i||t.twistie.classList.add(...qe.asClassNameArray(z.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(pn(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;let n=new Q;for(;;){let i=this.model.getNodeLocation(e),o=this.model.getParentNodeLocation(i);if(!o)break;let s=this.model.getNode(o),a=ue(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(s)&&a.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(a):t.indent.insertBefore(a,t.indent.firstElementChild),this.renderedIndentGuides.add(s,a),n.add(ie(()=>this.renderedIndentGuides.delete(s,a))),e=s}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;let t=new Set;e.forEach(n=>{let i=this.model.getNodeLocation(n);try{let o=this.model.getParentNodeLocation(i);n.collapsible&&n.children.length>0&&!n.collapsed?t.add(n):o&&t.add(this.model.getNode(o))}catch{}}),this.activeIndentNodes.forEach(n=>{t.has(n)||this.renderedIndentGuides.forEach(n,i=>i.classList.remove("active"))}),t.forEach(n=>{this.activeIndentNodes.has(n)||this.renderedIndentGuides.forEach(n,i=>i.classList.add("active"))}),this.activeIndentNodes=t}setModel(e){this.model=e}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),vt(this.disposables)}},fR=class{constructor(e,t,n){this.tree=e;this.keyboardNavigationLabelProvider=t;this._filter=n;e.onWillRefilter(this.reset,this,this.disposables)}_totalCount=0;get totalCount(){return this._totalCount}_matchCount=0;get matchCount(){return this._matchCount}_pattern="";_lowercasePattern="";disposables=new Q;set pattern(e){this._pattern=e,this._lowercasePattern=e.toLowerCase()}filter(e,t){let n=1;if(this._filter){let s=this._filter.filter(e,t);if(typeof s=="boolean"?n=s?1:0:If(s)?n=Oc(s.visibility):n=s,n===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:qd.Default,visibility:n};let i=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),o=Array.isArray(i)?i:[i];for(let s of o){let a=s&&s.toString();if(typeof a>"u")return{data:qd.Default,visibility:n};let l;if(this.tree.findMatchType===1){let d=a.toLowerCase().indexOf(this._lowercasePattern);if(d>-1){l=[Number.MAX_SAFE_INTEGER,0];for(let u=this._lowercasePattern.length;u>0;u--)l.push(d+u-1)}}else l=fv(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(l)return this._matchCount++,o.length===1?{data:l,visibility:n}:{data:{label:a,score:l},visibility:n}}return this.tree.findMode===1?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):2:{data:qd.Default,visibility:n}}reset(){this._totalCount=0,this._matchCount=0}dispose(){vt(this.disposables)}},bR=class extends ps{constructor(e){super({icon:z.listFilter,title:c("filter","Filter"),isChecked:e.isChecked??!1,hoverDelegate:e.hoverDelegate??Pt("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},vR=class extends ps{constructor(e){super({icon:z.searchFuzzy,title:c("fuzzySearch","Fuzzy Match"),isChecked:e.isChecked??!1,hoverDelegate:e.hoverDelegate??Pt("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},E8={inputBoxStyles:V2,toggleStyles:OB,listFilterWidgetBackground:void 0,listFilterWidgetNoMatchesOutline:void 0,listFilterWidgetOutline:void 0,listFilterWidgetShadow:void 0};var yR=class extends P{constructor(t,n,i,o,s,a){super();this.tree=n;t.appendChild(this.elements.root),this._register(ie(()=>this.elements.root.remove()));let l=a?.styles??E8;l.listFilterWidgetBackground&&(this.elements.root.style.backgroundColor=l.listFilterWidgetBackground),l.listFilterWidgetShadow&&(this.elements.root.style.boxShadow=`0 0 8px 2px ${l.listFilterWidgetShadow}`);let d=this._register(qa());this.modeToggle=this._register(new bR({...l.toggleStyles,isChecked:o===1,hoverDelegate:d})),this.matchTypeToggle=this._register(new vR({...l.toggleStyles,isChecked:s===0,hoverDelegate:d})),this.onDidChangeMode=N.map(this.modeToggle.onChange,()=>this.modeToggle.checked?1:0,this._store),this.onDidChangeMatchType=N.map(this.matchTypeToggle.onChange,()=>this.matchTypeToggle.checked?0:1,this._store),this.findInput=this._register(new Qp(this.elements.findInput,i,{label:c("type to search","Type to search"),additionalToggles:[this.modeToggle,this.matchTypeToggle],showCommonFindToggles:!1,inputBoxStyles:l.inputBoxStyles,toggleStyles:l.toggleStyles,history:a?.history})),this.actionbar=this._register(new Ao(this.elements.actionbar)),this.mode=o;let u=this._register(new Ue(this.findInput.inputBox.inputElement,"keydown")),p=N.chain(u.event,g=>g.map(y=>new ht(y)));this._register(p(g=>{if(g.equals(3)){g.preventDefault(),g.stopPropagation(),this.findInput.inputBox.addToHistory(),this.tree.domFocus();return}if(g.equals(18)){g.preventDefault(),g.stopPropagation(),this.findInput.inputBox.isAtLastInHistory()||this.findInput.inputBox.isNowhereInHistory()?(this.findInput.inputBox.addToHistory(),this.tree.domFocus()):this.findInput.inputBox.showNextValue();return}if(g.equals(16)){g.preventDefault(),g.stopPropagation(),this.findInput.inputBox.showPreviousValue();return}}));let h=this._register(new un("close",c("close","Close"),"codicon codicon-close",!0,()=>this.dispose()));this.actionbar.push(h,{icon:!0,label:!1});let m=this._register(new Ue(this.elements.grab,"mousedown"));this._register(m.event(g=>{let y=new Q,T=y.add(new Ue(Le(g),"mousemove")),E=y.add(new Ue(Le(g),"mouseup")),D=this.right,_=g.pageX,O=this.top,G=g.pageY;this.elements.grab.classList.add("grabbing");let Z=this.elements.root.style.transition;this.elements.root.style.transition="unset";let M=H=>{let oe=H.pageX-_;this.right=D-oe;let ee=H.pageY-G;this.top=O+ee,this.layout()};y.add(T.event(M)),y.add(E.event(H=>{M(H),this.elements.grab.classList.remove("grabbing"),this.elements.root.style.transition=Z,y.dispose()}))}));let f=N.chain(this._register(new Ue(this.elements.grab,"keydown")).event,g=>g.map(y=>new ht(y)));this._register(f(g=>{let y,T;if(g.keyCode===15?y=Number.POSITIVE_INFINITY:g.keyCode===17?y=0:g.keyCode===10&&(y=this.right===0?Number.POSITIVE_INFINITY:0),g.keyCode===16?T=0:g.keyCode===18&&(T=Number.POSITIVE_INFINITY),y!==void 0&&(g.preventDefault(),g.stopPropagation(),this.right=y,this.layout()),T!==void 0){g.preventDefault(),g.stopPropagation(),this.top=T;let E=this.elements.root.style.transition;this.elements.root.style.transition="unset",this.layout(),setTimeout(()=>{this.elements.root.style.transition=E},0)}})),this.onDidChangeValue=this.findInput.onDidChange}elements=Lp(".monaco-tree-type-filter",[Lp(".monaco-tree-type-filter-grab.codicon.codicon-debug-gripper@grab",{tabIndex:0}),Lp(".monaco-tree-type-filter-input@findInput"),Lp(".monaco-tree-type-filter-actionbar@actionbar")]);set mode(t){this.modeToggle.checked=t===1,this.findInput.inputBox.setPlaceHolder(t===1?c("type to filter","Type to filter"):c("type to search","Type to search"))}set matchType(t){this.matchTypeToggle.checked=t===0}get value(){return this.findInput.inputBox.value}set value(t){this.findInput.inputBox.value=t}modeToggle;matchTypeToggle;findInput;actionbar;width=0;right=0;top=0;_onDidDisable=new x;onDidDisable=this._onDidDisable.event;onDidChangeValue;onDidChangeMode;onDidChangeMatchType;getHistory(){return this.findInput.inputBox.getHistory()}focus(){this.findInput.focus()}select(){this.findInput.select(),this.findInput.inputBox.addToHistory(!0)}layout(t=this.width){this.width=t,this.right=bi(this.right,0,Math.max(0,t-212)),this.elements.root.style.right=`${this.right}px`,this.top=bi(this.top,0,24),this.elements.root.style.top=`${this.top}px`}showMessage(t){this.findInput.showMessage(t)}clearMessage(){this.findInput.clearMessage()}async dispose(){this._onDidDisable.fire(),this.elements.root.classList.add("disabled"),await Cn(300),super.dispose()}},IR=class{constructor(e,t,n,i,o={}){this.tree=e;this.view=t;this.filter=n;this.contextViewProvider=i;this.options=o;this._mode=e.options.defaultFindMode??0,this._matchType=e.options.defaultFindMatchType??0}_history;_pattern="";get pattern(){return this._pattern}previousPattern="";_mode;get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}_matchType;get matchType(){return this._matchType}set matchType(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}widget;width=0;_onDidChangeMode=new x;onDidChangeMode=this._onDidChangeMode.event;_onDidChangeMatchType=new x;onDidChangeMatchType=this._onDidChangeMatchType.event;_onDidChangePattern=new x;onDidChangePattern=this._onDidChangePattern.event;_onDidChangeOpenState=new x;onDidChangeOpenState=this._onDidChangeOpenState.event;enabledDisposables=new Q;disposables=new Q;updateOptions(e={}){e.defaultFindMode!==void 0&&(this.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.matchType=e.defaultFindMatchType)}isOpened(){return!!this.widget}open(){if(this.widget){this.widget.focus(),this.widget.select();return}this.widget=new yR(this.view.getHTMLElement(),this.tree,this.contextViewProvider,this.mode,this.matchType,{...this.options,history:this._history}),this.enabledDisposables.add(this.widget),this.widget.onDidChangeValue(this.onDidChangeValue,this,this.enabledDisposables),this.widget.onDidChangeMode(e=>this.mode=e,void 0,this.enabledDisposables),this.widget.onDidChangeMatchType(e=>this.matchType=e,void 0,this.enabledDisposables),this.widget.onDidDisable(this.close,this,this.enabledDisposables),this.widget.layout(this.width),this.widget.focus(),this.widget.value=this.previousPattern,this.widget.select(),this._onDidChangeOpenState.fire(!0)}close(){this.widget&&(this._history=this.widget.getHistory(),this.widget=void 0,this.enabledDisposables.clear(),this.previousPattern=this.pattern,this.onDidChangeValue(""),this.tree.domFocus(),this._onDidChangeOpenState.fire(!1))}onDidChangeValue(e){this._pattern=e,this._onDidChangePattern.fire(e),this.filter.pattern=e,this.tree.refilter(),e&&this.tree.focusNext(0,!0,void 0,n=>!qd.isDefault(n.filterData));let t=this.tree.getFocus();if(t.length>0){let n=t[0];this.tree.getRelativeTop(n)===null&&this.tree.reveal(n,.5)}this.render()}render(){let e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&e?(nd(c("replFindNoResults","No results")),this.tree.options.showNotFoundMessage??!0?this.widget?.showMessage({type:2,content:c("not found","No elements found.")}):this.widget?.showMessage({type:2})):(this.widget?.clearMessage(),this.pattern&&nd(c("replFindResults","{0} results",this.filter.matchCount)))}shouldAllowFocus(e){return!this.widget||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!qd.isDefault(e.filterData)}layout(e){this.width=e,this.widget?.layout(e)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}};function w8(r,e){return r.position===e.position&&z2(r,e)}function z2(r,e){return r.node.element===e.node.element&&r.startIndex===e.startIndex&&r.height===e.height&&r.endIndex===e.endIndex}var SR=class{constructor(e=[]){this.stickyNodes=e}get count(){return this.stickyNodes.length}equal(e){return ln(this.stickyNodes,e.stickyNodes,w8)}lastNodePartiallyVisible(){if(this.count===0)return!1;let e=this.stickyNodes[this.count-1];if(this.count===1)return e.position!==0;let t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}animationStateChanged(e){if(!ln(this.stickyNodes,e.stickyNodes,z2)||this.count===0)return!1;let t=this.stickyNodes[this.count-1],n=e.stickyNodes[e.count-1];return t.position!==n.position}},xR=class{constrainStickyScrollNodes(e,t,n){for(let i=0;i<e.length;i++){let o=e[i];if(o.position+o.height>n||i>=t)return e.slice(0,i)}return e}},px=class extends P{constructor(t,n,i,o,s,a={}){super();this.tree=t;this.model=n;this.view=i;this.treeDelegate=s;let l=this.validateStickySettings(a);this.stickyScrollMaxItemCount=l.stickyScrollMaxItemCount,this.stickyScrollDelegate=a.stickyScrollDelegate??new xR,this._widget=this._register(new TR(i.getScrollableElement(),i,t,o,s,a.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(i.onDidScroll(()=>this.update())),this._register(i.onDidChangeContentHeight(()=>this.update())),this._register(t.onDidChangeCollapseState(()=>this.update())),this.update()}onDidChangeHasFocus;onContextMenu;stickyScrollDelegate;stickyScrollMaxItemCount;maxWidgetViewRatio=.4;_widget;get height(){return this._widget.height}get count(){return this._widget.count}getNode(t){return this._widget.getNode(t)}getNodeAtHeight(t){let n;if(t===0?n=this.view.firstVisibleIndex:n=this.view.indexAt(t+this.view.scrollTop),!(n<0||n>=this.view.length))return this.view.element(n)}update(){let t=this.getNodeAtHeight(0);if(!t||this.tree.scrollTop===0){this._widget.setState(void 0);return}let n=this.findStickyState(t);this._widget.setState(n)}findStickyState(t){let n=[],i=t,o=0,s=this.getNextStickyNode(i,void 0,o);for(;s&&(n.push(s),o+=s.height,!(n.length<=this.stickyScrollMaxItemCount&&(i=this.getNextVisibleNode(s),!i)));)s=this.getNextStickyNode(i,s.node,o);let a=this.constrainStickyNodes(n);return a.length?new SR(a):void 0}getNextVisibleNode(t){return this.getNodeAtHeight(t.position+t.height)}getNextStickyNode(t,n,i){let o=this.getAncestorUnderPrevious(t,n);if(o&&!(o===t&&(!this.nodeIsUncollapsedParent(t)||this.nodeTopAlignsWithStickyNodesBottom(t,i))))return this.createStickyScrollNode(o,i)}nodeTopAlignsWithStickyNodesBottom(t,n){let i=this.getNodeIndex(t),o=this.view.getElementTop(i),s=n;return this.view.scrollTop===o-s}createStickyScrollNode(t,n){let i=this.treeDelegate.getHeight(t),{startIndex:o,endIndex:s}=this.getNodeRange(t),a=this.calculateStickyNodePosition(s,n,i);return{node:t,position:a,height:i,startIndex:o,endIndex:s}}getAncestorUnderPrevious(t,n=void 0){let i=t,o=this.getParentNode(i);for(;o;){if(o===n)return i;i=o,o=this.getParentNode(i)}if(n===void 0)return i}calculateStickyNodePosition(t,n,i){let o=this.view.getRelativeTop(t);if(o===null&&this.view.firstVisibleIndex===t&&t+1<this.view.length){let u=this.treeDelegate.getHeight(this.view.element(t)),p=this.view.getRelativeTop(t+1);o=p?p-u/this.view.renderHeight:null}if(o===null)return n;let s=this.view.element(t),a=this.treeDelegate.getHeight(s),d=o*this.view.renderHeight+a;return n+i>d&&n<=d?d-i:n}constrainStickyNodes(t){if(t.length===0)return[];let n=this.view.renderHeight*this.maxWidgetViewRatio,i=t[t.length-1];if(t.length<=this.stickyScrollMaxItemCount&&i.position+i.height<=n)return t;let o=this.stickyScrollDelegate.constrainStickyScrollNodes(t,this.stickyScrollMaxItemCount,n);if(!o.length)return[];let s=o[o.length-1];if(o.length>this.stickyScrollMaxItemCount||s.position+s.height>n)throw new Error("stickyScrollDelegate violates constraints");return o}getParentNode(t){let n=this.model.getNodeLocation(t),i=this.model.getParentNodeLocation(n);return i?this.model.getNode(i):void 0}nodeIsUncollapsedParent(t){let n=this.model.getNodeLocation(t);return this.model.getListRenderCount(n)>1}getNodeIndex(t){let n=this.model.getNodeLocation(t);return this.model.getListIndex(n)}getNodeRange(t){let n=this.model.getNodeLocation(t),i=this.model.getListIndex(n);if(i<0)throw new Error("Node not found in tree");let o=this.model.getListRenderCount(n),s=i+o-1;return{startIndex:i,endIndex:s}}nodePositionTopBelowWidget(t){let n=[],i=this.getParentNode(t);for(;i;)n.push(i),i=this.getParentNode(i);let o=0;for(let s=0;s<n.length&&s<this.stickyScrollMaxItemCount;s++)o+=this.treeDelegate.getHeight(n[s]);return o}getFocus(){return this._widget.getFocus()}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(t={}){if(!t.stickyScrollMaxItemCount)return;let n=this.validateStickySettings(t);this.stickyScrollMaxItemCount!==n.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=n.stickyScrollMaxItemCount,this.update())}validateStickySettings(t){let n=7;return typeof t.stickyScrollMaxItemCount=="number"&&(n=Math.max(t.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:n}}setModel(t){this.model=t}},TR=class{constructor(e,t,n,i,o,s){this.view=t;this.tree=n;this.treeRenderers=i;this.treeDelegate=o;this.accessibilityProvider=s;this._rootDomNode=ue(".monaco-tree-sticky-container.empty"),e.appendChild(this._rootDomNode);let a=ue(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(a),this.stickyScrollFocus=new ER(this._rootDomNode,t),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}_rootDomNode;_previousState;_previousElements=[];_previousStateDisposables=new Q;stickyScrollFocus;onDidChangeHasFocus;onContextMenu;get height(){if(!this._previousState)return 0;let e=this._previousState.stickyNodes[this._previousState.count-1];return e.position+e.height}get count(){return this._previousState?.count??0}getNode(e){return this._previousState?.stickyNodes.find(t=>t.node===e)}setState(e){let t=!!this._previousState&&this._previousState.count>0,n=!!e&&e.count>0;if(!t&&!n||t&&n&&this._previousState.equal(e))return;if(t!==n&&this.setVisible(n),!n){this._previousState=void 0,this._previousElements=[],this._previousStateDisposables.clear();return}let i=e.stickyNodes[e.count-1];if(this._previousState&&e.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top=`${i.position}px`;else{this._previousStateDisposables.clear();let o=Array(e.count);for(let s=e.count-1;s>=0;s--){let a=e.stickyNodes[s],{element:l,disposable:d}=this.createElement(a,s,e.count);o[s]=l,this._rootDomNode.appendChild(l),this._previousStateDisposables.add(d)}this.stickyScrollFocus.updateElements(o,e),this._previousElements=o}this._previousState=e,this._rootDomNode.style.height=`${i.position+i.height}px`}createElement(e,t,n){let i=e.startIndex,o=document.createElement("div");o.style.top=`${e.position}px`,this.tree.options.setRowHeight!==!1&&(o.style.height=`${e.height}px`),this.tree.options.setRowLineHeight!==!1&&(o.style.lineHeight=`${e.height}px`),o.classList.add("monaco-tree-sticky-row"),o.classList.add("monaco-list-row"),o.setAttribute("data-index",`${i}`),o.setAttribute("data-parity",i%2===0?"even":"odd"),o.setAttribute("id",this.view.getElementID(i));let s=this.setAccessibilityAttributes(o,e.node.element,t,n),a=this.treeDelegate.getTemplateId(e.node),l=this.treeRenderers.find(h=>h.templateId===a);if(!l)throw new Error(`No renderer found for template id ${a}`);let d=e.node;d===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(d=new Proxy(e.node,{}));let u=l.renderTemplate(o);l.renderElement(d,e.startIndex,u,e.height);let p=ie(()=>{s.dispose(),l.disposeElement(d,e.startIndex,u,e.height),l.disposeTemplate(u),o.remove()});return{element:o,disposable:p}}setAccessibilityAttributes(e,t,n,i){if(!this.accessibilityProvider)return P.None;this.accessibilityProvider.getSetSize&&e.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t,n,i))),this.accessibilityProvider.getPosInSet&&e.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t,n))),this.accessibilityProvider.getRole&&e.setAttribute("role",this.accessibilityProvider.getRole(t)??"treeitem");let o=this.accessibilityProvider.getAriaLabel(t),s=o&&typeof o!="string"?o:Mh(o),a=yo(d=>{let u=d.readObservable(s);u?e.setAttribute("aria-label",u):e.removeAttribute("aria-label")});typeof o=="string"||o&&e.setAttribute("aria-label",o.get());let l=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);return typeof l=="number"&&e.setAttribute("aria-level",`${l}`),e.setAttribute("aria-selected",String(!1)),a}setVisible(e){this._rootDomNode.classList.toggle("empty",!e),e||this.stickyScrollFocus.updateElements([],void 0)}getFocus(){return this.stickyScrollFocus.getFocus()}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}},ER=class extends P{constructor(t,n){super();this.container=t;this.view=n;this._register(K(this.container,"focus",()=>this.onFocus())),this._register(K(this.container,"blur",()=>this.onBlur())),this._register(this.view.onDidFocus(()=>this.toggleStickyScrollFocused(!1))),this._register(this.view.onKeyDown(i=>this.onKeyDown(i))),this._register(this.view.onMouseDown(i=>this.onMouseDown(i))),this._register(this.view.onContextMenu(i=>this.handleContextMenu(i)))}focusedIndex=-1;elements=[];state;_onDidChangeHasFocus=new x;onDidChangeHasFocus=this._onDidChangeHasFocus.event;_onContextMenu=new x;onContextMenu=this._onContextMenu.event;_domHasFocus=!1;get domHasFocus(){return this._domHasFocus}set domHasFocus(t){t!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(t),this._domHasFocus=t)}handleContextMenu(t){let n=t.browserEvent.target;if(!Up(n)&&!Bp(n)){this.focusedLast()&&this.view.domFocus();return}if(!Js(t.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");let a=this.state.stickyNodes.findIndex(l=>l.node.element===t.element?.element);if(a===-1)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");this.container.focus(),this.setFocus(a);return}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");let o=this.state.stickyNodes[this.focusedIndex].node.element,s=this.elements[this.focusedIndex];this._onContextMenu.fire({element:o,anchor:s,browserEvent:t.browserEvent,isStickyScroll:!0})}onKeyDown(t){if(this.domHasFocus&&this.state){if(t.key==="ArrowUp")this.setFocusedElement(Math.max(0,this.focusedIndex-1)),t.preventDefault(),t.stopPropagation();else if(t.key==="ArrowDown"||t.key==="ArrowRight"){if(this.focusedIndex>=this.state.count-1){let n=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([n]),this.scrollNodeUnderWidget(n,this.state)}else this.setFocusedElement(this.focusedIndex+1);t.preventDefault(),t.stopPropagation()}}}onMouseDown(t){let n=t.browserEvent.target;!Up(n)&&!Bp(n)||(t.browserEvent.preventDefault(),t.browserEvent.stopPropagation())}updateElements(t,n){if(n&&n.count===0)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(n&&n.count!==t.length)throw new Error("Sticky scroll focus received illigel state");let i=this.focusedIndex;if(this.removeFocus(),this.elements=t,this.state=n,n){let o=bi(i,0,n.count-1);this.setFocus(o)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=n?0:-1}setFocusedElement(t){let n=this.state;if(!n)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(t),!(t<n.count-1)&&n.lastNodePartiallyVisible()){let i=n.stickyNodes[t];this.scrollNodeUnderWidget(i.endIndex+1,n)}}scrollNodeUnderWidget(t,n){let i=n.stickyNodes[n.count-1],o=n.count>1?n.stickyNodes[n.count-2]:void 0,s=this.view.getElementTop(t),a=o?o.position+o.height+i.height:i.height;this.view.scrollTop=s-a}getFocus(){if(!(!this.state||this.focusedIndex===-1))return this.state.stickyNodes[this.focusedIndex].node.element}domFocus(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return this.state?this.view.getHTMLElement().classList.contains("sticky-scroll-focused"):!1}removeFocus(){this.focusedIndex!==-1&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(t){if(0>t)throw new Error("addFocus() can not remove focus");if(!this.state&&t>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&t>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");let n=this.focusedIndex;n>=0&&this.toggleElementFocus(this.elements[n],!1),t>=0&&this.toggleElementFocus(this.elements[t],!0),this.focusedIndex=t}toggleElementFocus(t,n){this.toggleElementActiveFocus(t,n&&this.domHasFocus),this.toggleElementPassiveFocus(t,n)}toggleCurrentElementActiveFocus(t){this.focusedIndex!==-1&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],t)}toggleElementActiveFocus(t,n){t.classList.toggle("focused",n)}toggleElementPassiveFocus(t,n){t.classList.toggle("passive-focused",n)}toggleStickyScrollFocused(t){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",t)}onFocus(){if(!this.state||this.elements.length===0)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),this.focusedIndex===-1&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}};function Jp(r){let e=0;return PI(r.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=1:PI(r.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=2:PI(r.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=3),{browserEvent:r.browserEvent,element:r.element?r.element.element:null,target:e}}function C8(r){let e=Up(r.browserEvent.target);return{element:r.element?r.element.element:null,browserEvent:r.browserEvent,anchor:r.anchor,isStickyScroll:e}}function ux(r,e){e(r),r.children.forEach(t=>ux(t,e))}var Sf=class{constructor(e,t){this.getFirstViewElementWithTrait=e;this.identityProvider=t}nodes=[];elements;_onDidChange=new x;onDidChange=this._onDidChange.event;_nodeSet;get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(e,t){!t?.__forceEvent&&ln(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){let i=this;this._onDidChange.fire({get elements(){return i.get()},browserEvent:n})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){let l=this.createNodeSet(),d=u=>l.delete(u);t.forEach(u=>ux(u,d)),this.set([...l.values()]);return}let n=new Set,i=l=>n.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>ux(l,i));let o=new Map,s=l=>o.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>ux(l,s));let a=[];for(let l of this.nodes){let d=this.identityProvider.getId(l.element).toString();if(!n.has(d))a.push(l);else{let p=o.get(d);p&&p.visible&&a.push(p)}}if(this.nodes.length>0&&a.length===0){let l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){let e=new Set;for(let t of this.nodes)e.add(t);return e}},wR=class extends Kg{constructor(t,n,i){super(t);this.tree=n;this.stickyScrollProvider=i}onViewPointer(t){if(V_(t.browserEvent.target)||Zs(t.browserEvent.target)||Np(t.browserEvent.target)||t.browserEvent.isHandledByList)return;let n=t.element;if(!n)return super.onViewPointer(t);if(this.isSelectionRangeChangeEvent(t)||this.isSelectionSingleChangeEvent(t))return super.onViewPointer(t);let i=t.browserEvent.target,o=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&t.browserEvent.offsetX<16,s=Bp(t.browserEvent.target),a=!1;if(s?a=!0:typeof this.tree.expandOnlyOnTwistieClick=="function"?a=this.tree.expandOnlyOnTwistieClick(n.element):a=!!this.tree.expandOnlyOnTwistieClick,s)this.handleStickyScrollMouseEvent(t,n);else{if(a&&!o&&t.browserEvent.detail!==2)return super.onViewPointer(t);if(!this.tree.expandOnDoubleClick&&t.browserEvent.detail===2)return super.onViewPointer(t)}if(n.collapsible&&(!s||o)){let l=this.tree.getNodeLocation(n),d=t.browserEvent.altKey;if(this.tree.setFocus([l]),this.tree.toggleCollapsed(l,d),o){t.browserEvent.isHandledByList=!0;return}}s||super.onViewPointer(t)}handleStickyScrollMouseEvent(t,n){if(EB(t.browserEvent.target)||wB(t.browserEvent.target))return;let i=this.stickyScrollProvider();if(!i)throw new Error("Sticky scroll controller not found");let o=this.list.indexOf(n),s=this.list.getElementTop(o),a=i.nodePositionTopBelowWidget(n);this.tree.scrollTop=s-a,this.list.domFocus(),this.list.setFocus([o]),this.list.setSelection([o])}onDoubleClick(t){t.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||t.browserEvent.isHandledByList||super.onDoubleClick(t)}onMouseDown(t){let n=t.browserEvent.target;if(!Up(n)&&!Bp(n)){super.onMouseDown(t);return}}onContextMenu(t){let n=t.browserEvent.target;if(!Up(n)&&!Bp(n)){super.onContextMenu(t);return}}},CR=class extends ai{constructor(t,n,i,o,s,a,l,d){super(t,n,i,o,d);this.focusTrait=s;this.selectionTrait=a;this.anchorTrait=l}createMouseController(t){return new wR(this,t.tree,t.stickyScrollProvider)}splice(t,n,i=[]){if(super.splice(t,n,i),i.length===0)return;let o=[],s=[],a;i.forEach((l,d)=>{this.focusTrait.has(l)&&o.push(t+d),this.selectionTrait.has(l)&&s.push(t+d),this.anchorTrait.has(l)&&(a=t+d)}),o.length>0&&super.setFocus(di([...super.getFocus(),...o])),s.length>0&&super.setSelection(di([...super.getSelection(),...s])),typeof a=="number"&&super.setAnchor(a)}setFocus(t,n,i=!1){super.setFocus(t,n),i||this.focusTrait.set(t.map(o=>this.element(o)),n)}setSelection(t,n,i=!1){super.setSelection(t,n),i||this.selectionTrait.set(t.map(o=>this.element(o)),n)}setAnchor(t,n=!1){super.setAnchor(t),n||(typeof t>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(t)]))}};var eh=class{constructor(e,t,n,i,o={}){this._user=e;this._options=o;let s;o.keyboardNavigationLabelProvider&&(s=new fR(this,o.keyboardNavigationLabelProvider,o.filter),o={...o,filter:s},this.disposables.add(s)),this.model=this.createModel(e,o),this.treeDelegate=new Zp(n);let a=this.disposables.add(new mR(this.onDidChangeActiveNodesRelay.event)),l=new Nd;this.renderers=i.map(d=>new gR(d,this.model,this.onDidChangeCollapseStateRelay.event,a,l,o));for(let d of this.renderers)this.disposables.add(d);if(this.focus=new Sf(()=>this.view.getFocusedElements()[0],o.identityProvider),this.selection=new Sf(()=>this.view.getSelectedElements()[0],o.identityProvider),this.anchor=new Sf(()=>this.view.getAnchorElement(),o.identityProvider),this.view=new CR(e,t,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...T8(()=>this.model,o),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.setupModel(this.model),o.keyboardSupport!==!1){let d=N.chain(this.view.onKeyDown,u=>u.filter(p=>!Zs(p.target)).map(p=>new ht(p)));N.chain(d,u=>u.filter(p=>p.keyCode===15))(this.onLeftArrow,this,this.disposables),N.chain(d,u=>u.filter(p=>p.keyCode===17))(this.onRightArrow,this,this.disposables),N.chain(d,u=>u.filter(p=>p.keyCode===10))(this.onSpace,this,this.disposables)}if((o.findWidgetEnabled??!0)&&o.keyboardNavigationLabelProvider&&o.contextViewProvider){let d=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new IR(this,this.view,s,o.contextViewProvider,d),this.focusNavigationFilter=u=>this.findController.shouldAllowFocus(u),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType,this.disposables.add(this.onDidSpliceModelRelay.event(()=>{!this.findController.isOpened()||this.findController.pattern.length===0||(this.refilter(),this.findController.render())}))}else this.onDidChangeFindMode=N.None,this.onDidChangeFindMatchType=N.None;o.enableStickyScroll&&(this.stickyScrollController=new px(this,this.model,this.view,this.renderers,this.treeDelegate,o),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=sr(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides==="always")}view;renderers;model;treeDelegate;focus;selection;anchor;eventBufferer=new cl;findController;onDidChangeFindOpenState=N.None;onDidChangeStickyScrollFocused=N.None;focusNavigationFilter;stickyScrollController;styleElement;disposables=new Q;get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseClick(){return N.map(this.view.onMouseClick,Jp)}get onMouseDblClick(){return N.filter(N.map(this.view.onMouseDblClick,Jp),e=>e.target!==3)}get onMouseOver(){return N.map(this.view.onMouseOver,Jp)}get onMouseOut(){return N.map(this.view.onMouseOut,Jp)}get onContextMenu(){return N.any(N.filter(N.map(this.view.onContextMenu,C8),e=>!e.isStickyScroll),this.stickyScrollController?.onContextMenu??N.None)}get onTap(){return N.map(this.view.onTap,Jp)}get onPointer(){return N.map(this.view.onPointer,Jp)}get onKeyDown(){return this.view.onKeyDown}get onKeyUp(){return this.view.onKeyUp}get onKeyPress(){return this.view.onKeyPress}get onDidFocus(){return this.view.onDidFocus}get onDidBlur(){return this.view.onDidBlur}onDidSwapModel=this.disposables.add(new x);onDidChangeModelRelay=this.disposables.add(new Cs);onDidSpliceModelRelay=this.disposables.add(new Cs);onDidChangeCollapseStateRelay=this.disposables.add(new Cs);onDidChangeRenderNodeCountRelay=this.disposables.add(new Cs);onDidChangeActiveNodesRelay=this.disposables.add(new Cs);get onDidChangeModel(){return N.any(this.onDidChangeModelRelay.event,this.onDidSwapModel.event)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}_onWillRefilter=new x;onWillRefilter=this._onWillRefilter.event;get findMode(){return this.findController?.mode??0}set findMode(e){this.findController&&(this.findController.mode=e)}onDidChangeFindMode;get findMatchType(){return this.findController?.matchType??0}set findMatchType(e){this.findController&&(this.findController.matchType=e)}onDidChangeFindMatchType;get onDidChangeFindPattern(){return this.findController?this.findController.onDidChangePattern:N.None}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}_onDidUpdateOptions=new x;onDidUpdateOptions=this._onDidUpdateOptions.event;get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options={...this._options,...e};for(let t of this.renderers)t.updateOptions(e);this.view.updateOptions(this._options),this.findController?.updateOptions(e),this.updateStickyScroll(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides==="always")}get options(){return this._options}updateStickyScroll(e){!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new px(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=N.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),this.stickyScrollController?.updateOptions(e)}updateWidth(e){let t=this.model.getListIndex(e);t!==-1&&this.view.updateWidth(t)}getHTMLElement(){return this.view.getHTMLElement()}get contentHeight(){return this.view.contentHeight}get contentWidth(){return this.view.contentWidth}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.view.onDidChangeContentWidth}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollLeft(){return this.view.scrollLeft}set scrollLeft(e){this.view.scrollLeft=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleElement(){let e=this.view.firstVisibleIndex;return this.stickyScrollController&&(e+=this.stickyScrollController.count),e<0||e>=this.view.length?void 0:this.view.element(e).element}get lastVisibleElement(){let e=this.view.lastVisibleIndex;return this.view.element(e).element}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(e){this.view.ariaLabel=e}get selectionSize(){return this.selection.getNodes().length}domFocus(){this.stickyScrollController?.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}isDOMFocused(){return or(this.getHTMLElement())}layout(e,t){this.view.layout(e,t),fr(t)&&this.findController?.layout(t)}style(e){let t=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeInactiveIndentGuidesStroke}; }`),n.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`));let i=e.treeStickyScrollBackground??e.listBackground;i&&(n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${i}; }`),n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${i}; }`)),e.treeStickyScrollBorder&&n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ${e.treeStickyScrollBorder}; }`),e.treeStickyScrollShadow&&n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ${e.treeStickyScrollShadow} 0 6px 6px -6px inset; height: 3px; }`),e.listFocusForeground&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));let o=Rr(e.listFocusAndSelectionOutline,Rr(e.listSelectionOutline,e.listFocusOutline??""));o&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${o}; outline-offset: -1px;}`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),e.listFocusOutline&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=n.join(`
`),this.view.style(e)}getParentElement(e){let t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}expandAll(){this.model.setCollapsed(this.model.rootRef,!1,!0)}collapseAll(){this.model.setCollapsed(this.model.rootRef,!0,!0)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}expandTo(e){this.model.expandTo(e)}triggerTypeNavigation(){this.view.triggerTypeNavigation()}openFind(){this.findController?.open()}closeFind(){this.findController?.close()}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setAnchor(e){if(typeof e>"u")return this.view.setAnchor(void 0);this.eventBufferer.bufferEvents(()=>{let t=this.model.getNode(e);this.anchor.set([t]);let n=this.model.getListIndex(e);n>-1&&this.view.setAnchor(n,!0)})}getAnchor(){return this.anchor.get().at(0)}setSelection(e,t){this.eventBufferer.bufferEvents(()=>{let n=e.map(o=>this.model.getNode(o));this.selection.set(n,t);let i=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setSelection(i,t,!0)})}getSelection(){return this.selection.get()}setFocus(e,t){this.eventBufferer.bufferEvents(()=>{let n=e.map(o=>this.model.getNode(o));this.focus.set(n,t);let i=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setFocus(i,t,!0)})}focusNext(e=1,t=!1,n,i=Js(n)&&n.altKey?void 0:this.focusNavigationFilter){this.view.focusNext(e,t,n,i)}focusPrevious(e=1,t=!1,n,i=Js(n)&&n.altKey?void 0:this.focusNavigationFilter){this.view.focusPrevious(e,t,n,i)}focusNextPage(e,t=Js(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusNextPage(e,t)}focusPreviousPage(e,t=Js(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusPreviousPage(e,t,()=>this.stickyScrollController?.height??0)}focusLast(e,t=Js(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusLast(e,t)}focusFirst(e,t=Js(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusFirst(e,t)}getFocus(){return this.focus.get()}getStickyScrollFocus(){let e=this.stickyScrollController?.getFocus();return e!==void 0?[e]:[]}getFocusedPart(){return this.stickyScrollController?.focusedLast()?1:0}reveal(e,t){this.model.expandTo(e);let n=this.model.getListIndex(e);if(n!==-1)if(!this.stickyScrollController)this.view.reveal(n,t);else{let i=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(n,t,i)}}getRelativeTop(e){let t=this.model.getListIndex(e);if(t===-1)return null;let n=this.stickyScrollController?.getNode(this.getNode(e));return this.view.getRelativeTop(t,n?.position??this.stickyScrollController?.height)}getViewState(e=this.options.identityProvider){if(!e)throw new en(this._user,"Can't get tree view state without an identity provider");let t=s=>e.getId(s).toString(),n=hR.empty(this.scrollTop);for(let s of this.getFocus())n.focus.add(t(s));for(let s of this.getSelection())n.selection.add(t(s));let i=this.model.getNode(),o=[i];for(;o.length>0;){let s=o.shift();s!==i&&s.collapsible&&(n.expanded[t(s.element)]=s.collapsed?0:1),o.push(...s.children)}return n}onLeftArrow(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(t.length===0)return;let n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!0)){let s=this.model.getParentNodeLocation(i);if(!s)return;let a=this.model.getListIndex(s);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(t.length===0)return;let n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!1)){if(!n.children.some(l=>l.visible))return;let[s]=this.view.getFocus(),a=s+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(t.length===0)return;let n=t[0],i=this.model.getNodeLocation(n),o=e.browserEvent.altKey;this.model.setCollapsed(i,void 0,o)}modelDisposables=new Q;setupModel(e){this.modelDisposables.clear(),this.modelDisposables.add(e.onDidSpliceRenderedNodes(({start:o,deleteCount:s,elements:a})=>this.view.splice(o,s,a)));let t=N.forEach(e.onDidSpliceModel,o=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(o),this.selection.onDidModelSplice(o)})},this.modelDisposables);t(()=>null,null,this.modelDisposables);let n=this.modelDisposables.add(new x),i=this.modelDisposables.add(new so(0));this.modelDisposables.add(N.any(t,this.focus.onDidChange,this.selection.onDidChange)(()=>{i.trigger(()=>{let o=new Set;for(let s of this.focus.getNodes())o.add(s);for(let s of this.selection.getNodes())o.add(s);n.fire([...o.values()])})})),this.onDidChangeActiveNodesRelay.input=n.event,this.onDidChangeModelRelay.input=N.signal(e.onDidSpliceModel),this.onDidChangeCollapseStateRelay.input=e.onDidChangeCollapseState,this.onDidChangeRenderNodeCountRelay.input=e.onDidChangeRenderNodeCount}setModel(e){let t=this.model;this.model=e,this.setupModel(e),this.renderers.forEach(n=>n.setModel(e)),this.stickyScrollController?.setModel(e),this.focus.set([]),this.selection.set([]),this.anchor.set([]),this.view.splice(0,t.getListRenderCount(t.rootRef)),this.model.refilter(),this.onDidSwapModel.fire()}getModel(){return this.model}navigate(e){return new kR(this.view,this.model,e)}dispose(){vt(this.disposables),this.stickyScrollController?.dispose(),this.view.dispose(),this.modelDisposables.dispose()}},kR=class{constructor(e,t,n){this.view=e;this.model=t;n?this.index=this.model.getListIndex(n):this.index=-1}index;current(){return this.index<0||this.index>=this.view.length?null:this.view.element(this.index).element}previous(){return this.index--,this.current()}next(){return this.index++,this.current()}first(){return this.index=0,this.current()}last(){return this.index=this.view.length-1,this.current()}};function k8(r,e){let t={...e};for(let n in r){let i=r[n];t[n]=i!==void 0?ne(i):void 0}return t}var nwt={keybindingLabelBackground:ne(qM),keybindingLabelForeground:ne($M),keybindingLabelBorder:ne(jM),keybindingLabelBottomBorder:ne(YM),keybindingLabelShadow:ne(ip)};var H2={buttonForeground:ne(Zk),buttonSeparator:ne(PM),buttonBackground:ne(rp),buttonHoverBackground:ne(AM),buttonSecondaryForeground:ne(MM),buttonSecondaryBackground:ne(By),buttonSecondaryHoverBackground:ne(NM),buttonBorder:ne(OM)};var K2={progressBarBackground:ne(nM)};var D8={inputActiveOptionBorder:ne(Xk),inputActiveOptionForeground:ne(Jk),inputActiveOptionBackground:ne(Qk)},iwt={activeForeground:ne(op),activeBackground:ne(FM),activeBorder:ne(BM),inactiveForeground:ne(UM),inactiveBackground:ne(VM),inactiveBorder:ne(WM),inactiveHoverBackground:ne(zM)};var rwt={checkboxBackground:ne(HM),checkboxBorder:ne(GM),checkboxForeground:ne(KM)};var owt={dialogBackground:ne(mi),dialogForeground:ne(Fs),dialogShadow:ne(ip),dialogBorder:ne(pe),errorIconForeground:ne(fM),warningIconForeground:ne(bM),infoIconForeground:ne(vM),textLinkForeground:ne(Ay)};var DR={inputBackground:ne(IM),inputForeground:ne(SM),inputBorder:ne(sp),inputValidationInfoBorder:ne(EM),inputValidationInfoBackground:ne(xM),inputValidationInfoForeground:ne(TM),inputValidationWarningBorder:ne(kM),inputValidationWarningBackground:ne(wM),inputValidationWarningForeground:ne(CM),inputValidationErrorBorder:ne(RM),inputValidationErrorBackground:ne(DM),inputValidationErrorForeground:ne(_M)};var G2={listFilterWidgetBackground:ne(aN),listFilterWidgetOutline:ne(lN),listFilterWidgetNoMatchesOutline:ne(dN),listFilterWidgetShadow:ne(cN),inputBoxStyles:DR,toggleStyles:D8},swt={badgeBackground:ne(Wl),badgeForeground:ne(Oy),badgeBorder:ne(pe)};var awt={breadcrumbsBackground:ne(hM),breadcrumbsForeground:ne(pM),breadcrumbsHoverForeground:ne(jk),breadcrumbsFocusForeground:ne(jk),breadcrumbsFocusAndSelectionForeground:ne(mM)};var th={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:ne(XM),listFocusForeground:ne(QM),listFocusOutline:ne(JM),listActiveSelectionBackground:ne(Tr),listActiveSelectionForeground:ne(Bs),listActiveSelectionIconForeground:ne(Vy),listFocusAndSelectionOutline:ne(ZM),listFocusAndSelectionBackground:ne(Tr),listFocusAndSelectionForeground:ne(Bs),listInactiveSelectionBackground:ne(eN),listInactiveSelectionIconForeground:ne(nN),listInactiveSelectionForeground:ne(tN),listInactiveFocusBackground:ne(iN),listInactiveFocusOutline:ne(rN),listHoverBackground:ne(eD),listHoverForeground:ne(tD),listDropOverBackground:ne(oN),listDropBetweenBackground:ne(sN),listSelectionOutline:ne(yt),listHoverOutline:ne(yt),treeIndentGuidesStroke:ne(lp),treeInactiveIndentGuidesStroke:ne(uN),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:ne(zl),tableColumnsBorder:ne(pN),tableOddRowsBackgroundColor:ne(hN)};function xf(r){return k8(r,th)}var q2={selectBackground:ne(ap),selectListBackground:ne(LM),selectForeground:ne(cg),decoratorRightForeground:ne(xN),selectBorder:ne(ug),focusBorder:ne(Hi),listFocusBackground:ne(wN),listInactiveSelectionIconForeground:ne(EN),listFocusForeground:ne(TN),listFocusOutline:JO(yt,B.transparent.toString()),listHoverBackground:ne(eD),listHoverForeground:ne(tD),listHoverOutline:ne(yt),selectListBorder:ne($k),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0};var lwt={shadowColor:ne(ip),borderColor:ne(mN),foregroundColor:ne(gN),backgroundColor:ne(fN),selectionForegroundColor:ne(bN),selectionBackgroundColor:ne(vN),selectionBorderColor:ne(yN),separatorColor:ne(IN),scrollbarShadow:ne(zl),scrollbarSliderBackground:ne(My),scrollbarSliderHoverBackground:ne(Ny),scrollbarSliderActiveBackground:ne(Fy)};function $2(r,e,t,n){let i,o,s;if(Array.isArray(r))s=r,i=e,o=t;else{let d=e;s=r.getActions(d),i=t,o=n}let a=hc.getInstance(),l=a.keyStatus.altKey||(xt||Wt)&&a.keyStatus.shiftKey;j2(s,i,l,o?d=>d===o:d=>d==="navigation")}function wf(r,e,t,n,i,o){let s,a,l,d,u;if(Array.isArray(r))u=r,s=e,a=t,l=n,d=i;else{let h=e;u=r.getActions(h),s=t,a=n,l=i,d=o}j2(u,s,!1,typeof a=="string"?h=>h===a:a,l,d)}function j2(r,e,t,n=s=>s==="navigation",i=()=>!1,o=!1){let s,a;Array.isArray(e)?(s=e,a=e):(s=e.primary,a=e.secondary);let l=new Set;for(let[d,u]of r){let p;n(d)?(p=s,p.length>0&&o&&p.push(new Yt)):(p=a,p.length>0&&p.push(new Yt));for(let h of u){t&&(h=h instanceof Ui&&h.alt?h.alt:h);let m=p.push(h);h instanceof Ca&&l.add({group:d,action:h,index:m-1})}}for(let{group:d,action:u,index:p}of l){let h=n(d)?s:a,m=u.actions;i(u,d,h.length)&&h.splice(p,1,...m)}}var Mc=class extends rd{constructor(t,n,i,o,s,a,l,d){super(void 0,t,{icon:!!(t.class||t.item.icon),label:!t.class&&!t.item.icon,draggable:n?.draggable,keybinding:n?.keybinding,hoverDelegate:n?.hoverDelegate});this._options=n;this._keybindingService=i;this._notificationService=o;this._contextKeyService=s;this._themeService=a;this._contextMenuService=l;this._accessibilityService=d;this._altKey=hc.getInstance()}_wantsAltCommand=!1;_itemClassDispose=this._register(new Ut);_altKey;get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(t){t.preventDefault(),t.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(n){this._notificationService.error(n)}}render(t){if(super.render(t),t.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let n=!1,i=()=>{let o=!!this._menuItemAction.alt?.enabled&&(!this._accessibilityService.isMotionReduced()||n)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&n);o!==this._wantsAltCommand&&(this._wantsAltCommand=o,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(i)),this._register(K(t,"mouseleave",o=>{n=!1,i()})),this._register(K(t,"mouseenter",o=>{n=!0,i()})),i()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){let t=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),n=t&&t.getLabel(),i=this._commandAction.tooltip||this._commandAction.label,o=n?c("titleAndKb","{0} ({1})",i,n):i;if(!this._wantsAltCommand&&this._menuItemAction.alt?.enabled){let s=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,a=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),l=a&&a.getLabel(),d=l?c("titleAndKb","{0} ({1})",s,l):s;o=c("titleAndKbAndAlt",`{0}
[{1}] {2}`,o,oR.modifierLabels[Ds].altKey,d)}return o}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(t){this._itemClassDispose.value=void 0;let{element:n,label:i}=this;if(!n||!i)return;let o=this._commandAction.checked&&ZP(t.toggled)&&t.toggled.icon?t.toggled.icon:t.icon;if(o)if(qe.isThemeIcon(o)){let s=qe.asClassNameArray(o);i.classList.add(...s),this._itemClassDispose.value=ie(()=>{i.classList.remove(...s)})}else i.style.backgroundImage=Bk(this._themeService.getColorTheme().type)?ed(o.dark):ed(o.light),i.classList.add("icon"),this._itemClassDispose.value=Ti(ie(()=>{i.style.backgroundImage="",i.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};Mc=C([v(2,Wn),v(3,wr),v(4,Ge),v(5,_n),v(6,Sn),v(7,Ps)],Mc);var Nc=class extends ud{constructor(t,n,i,o,s){let a={...n,menuAsChild:n?.menuAsChild??!1,classNames:n?.classNames??(qe.isThemeIcon(t.item.icon)?qe.asClassName(t.item.icon):void 0),keybindingProvider:n?.keybindingProvider??(l=>i.lookupKeybinding(l.id))};super(t,{getActions:()=>t.actions},o,a);this._keybindingService=i;this._contextMenuService=o;this._themeService=s}render(t){super.render(t),pu(this.element),t.classList.add("menu-entry");let n=this._action,{icon:i}=n.item;if(i&&!qe.isThemeIcon(i)){this.element.classList.add("icon");let o=()=>{this.element&&(this.element.style.backgroundImage=Bk(this._themeService.getColorTheme().type)?ed(i.dark):ed(i.light))};o(),this._register(this._themeService.onDidColorThemeChange(()=>{o()}))}}};Nc=C([v(2,Wn),v(3,Sn),v(4,_n)],Nc);var Tf=class extends Ii{constructor(t,n,i,o,s,a,l,d){super(null,t);this._keybindingService=i;this._notificationService=o;this._contextMenuService=s;this._menuService=a;this._instaService=l;this._storageService=d;this._options=n,this._storageKey=`${t.item.submenu.id}_lastActionId`;let u,p=n?.persistLastActionId?d.get(this._storageKey,1):void 0;p&&(u=t.actions.find(m=>p===m.id)),u||(u=t.actions[0]),this._defaultAction=this._instaService.createInstance(Mc,u,{keybinding:this._getDefaultActionKeybindingLabel(u)});let h={keybindingProvider:m=>this._keybindingService.lookupKeybinding(m.id),...n,menuAsChild:n?.menuAsChild??!0,classNames:n?.classNames??["codicon","codicon-chevron-down"],actionRunner:n?.actionRunner??new io};this._dropdown=new ud(t,t.actions,this._contextMenuService,h),this._register(this._dropdown.actionRunner.onDidRun(m=>{m.action instanceof Ui&&this.update(m.action)}))}_options;_defaultAction;_dropdown;_container=null;_storageKey;get onDidChangeDropdownVisibility(){return this._dropdown.onDidChangeVisibility}update(t){this._options?.persistLastActionId&&this._storageService.store(this._storageKey,t.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(Mc,t,{keybinding:this._getDefaultActionKeybindingLabel(t)}),this._defaultAction.actionRunner=new class extends io{async runAction(n,i){await n.run(void 0)}},this._container&&this._defaultAction.render(FI(this._container,ue(".action-container")))}_getDefaultActionKeybindingLabel(t){let n;if(this._options?.renderKeybindingWithDefaultActionLabel){let i=this._keybindingService.lookupKeybinding(t.id);i&&(n=`(${i.getLabel()})`)}return n}setActionContext(t){super.setActionContext(t),this._defaultAction.setActionContext(t),this._dropdown.setActionContext(t)}render(t){this._container=t,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");let n=ue(".action-container");this._defaultAction.render(Ie(this._container,n)),this._register(K(n,se.KEY_DOWN,o=>{let s=new ht(o);s.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),s.stopPropagation())}));let i=ue(".dropdown-action-container");this._dropdown.render(Ie(this._container,i)),this._register(K(i,se.KEY_DOWN,o=>{let s=new ht(o);s.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),this._defaultAction.element?.focus(),s.stopPropagation())}))}focus(t){t?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(t){t?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};Tf=C([v(2,Wn),v(3,wr),v(4,Sn),v(5,ro),v(6,_e),v(7,Xe)],Tf);var Ef=class extends aS{constructor(e,t){super(null,e,e.actions.map(n=>({text:n.id===Yt.ID?"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500":n.label,isDisabled:!n.enabled})),0,t,q2,{ariaLabel:e.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,e.actions.findIndex(n=>n.checked)))}render(e){super.render(e),e.style.borderColor=ne(ug)}runAction(e,t){let n=this.action.actions[t];n&&this.actionRunner.run(n)}};Ef=C([v(1,jp)],Ef);function hx(r,e,t){return e instanceof Ui?r.createInstance(Mc,e,t):e instanceof wi?e.item.isSelection?r.createInstance(Ef,e):e.item.rememberDefaultAction?r.createInstance(Tf,e,{...t,persistLastActionId:!0}):r.createInstance(Nc,e,t):void 0}var _R=class{constructor(e,t){this.renderer=e;this.modelProvider=t}get templateId(){return this.renderer.templateId}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:P.None}}renderElement(e,t,n,i){if(n.disposable?.dispose(),!n.data)return;let o=this.modelProvider();if(o.isResolved(e))return this.renderer.renderElement(o.get(e),e,n.data,i);let s=new xi,a=o.resolve(e,s.token);n.disposable={dispose:()=>s.cancel()},this.renderer.renderPlaceholder(e,n.data),a.then(l=>this.renderer.renderElement(l,e,n.data,i))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}},RR=class{constructor(e,t){this.modelProvider=e;this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){let t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}};function _8(r,e){return{...e,accessibilityProvider:e.accessibilityProvider&&new RR(r,e.accessibilityProvider)}}var mx=class{list;_model;constructor(e,t,n,i,o={}){let s=()=>this.model,a=i.map(l=>new _R(l,s));this.list=new ai(e,t,n,a,_8(s,o))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}isDOMFocused(){return or(this.getHTMLElement())}domFocus(){this.list.domFocus()}get onDidFocus(){return this.list.onDidFocus}get onDidBlur(){return this.list.onDidBlur}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseClick(){return N.map(this.list.onMouseClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onMouseDblClick(){return N.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onTap(){return N.map(this.list.onTap,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return N.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeFocus(){return N.map(this.list.onDidChangeFocus,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(i=>this._model.get(i)),indexes:t,browserEvent:n}))}get onDidChangeSelection(){return N.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(i=>this._model.get(i)),indexes:t,browserEvent:n}))}get onContextMenu(){return N.map(this.list.onContextMenu,({element:e,index:t,anchor:n,browserEvent:i})=>typeof e>"u"?{element:e,index:t,anchor:n,browserEvent:i}:{element:this._model.get(e),index:t,anchor:n,browserEvent:i})}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,$n(e.length))}get length(){return this.list.length}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollLeft(){return this.list.scrollLeft}set scrollLeft(e){this.list.scrollLeft=e}setAnchor(e){this.list.setAnchor(e)}getAnchor(){return this.list.getAnchor()}setFocus(e){this.list.setFocus(e)}focusNext(e,t){this.list.focusNext(e,t)}focusPrevious(e,t){this.list.focusPrevious(e,t)}focusNextPage(){return this.list.focusNextPage()}focusPreviousPage(){return this.list.focusPreviousPage()}focusLast(){this.list.focusLast()}focusFirst(){this.list.focusFirst()}getFocus(){return this.list.getFocus()}setSelection(e,t){this.list.setSelection(e,t)}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}layout(e,t){this.list.layout(e,t)}triggerTypeNavigation(){this.list.triggerTypeNavigation()}reveal(e,t){this.list.reveal(e,t)}style(e){this.list.style(e)}dispose(){this.list.dispose()}};var gx=class r{constructor(e,t,n){this.columns=e;this.getColumnSize=n;let i=new Map(t.map(o=>[o.templateId,o]));this.renderers=[];for(let o of e){let s=i.get(o.templateId);if(!s)throw new Error(`Table cell renderer for template id ${o.templateId} not found.`);this.renderers.push(s)}}static TemplateId="row";templateId=r.TemplateId;renderers;renderedTemplates=new Set;renderTemplate(e){let t=Ie(e,ue(".monaco-table-tr")),n=[],i=[];for(let s=0;s<this.columns.length;s++){let a=this.renderers[s],l=Ie(t,ue(".monaco-table-td",{"data-col-index":s}));l.style.width=`${this.getColumnSize(s)}px`,n.push(l),i.push(a.renderTemplate(l))}let o={container:e,cellContainers:n,cellTemplateData:i};return this.renderedTemplates.add(o),o}renderElement(e,t,n,i){for(let o=0;o<this.columns.length;o++){let a=this.columns[o].project(e);this.renderers[o].renderElement(a,t,n.cellTemplateData[o],i)}}disposeElement(e,t,n,i){for(let o=0;o<this.columns.length;o++){let s=this.renderers[o];if(s.disposeElement){let l=this.columns[o].project(e);s.disposeElement(l,t,n.cellTemplateData[o],i)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);pn(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(let{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}};function R8(r){return{getHeight(e){return r.getHeight(e)},getTemplateId(){return gx.TemplateId}}}var LR=class extends P{constructor(t,n){super();this.column=t;this.index=n;this.element=ue(".monaco-table-th",{"data-col-index":n},t.label),t.tooltip&&this._register(yi().setupManagedHover(Pt("mouse"),this.element,t.tooltip))}element;get minimumSize(){return this.column.minimumWidth??120}get maximumSize(){return this.column.maximumWidth??Number.POSITIVE_INFINITY}get onDidChange(){return this.column.onDidChangeWidthConstraints??N.None}_onDidLayout=new x;onDidLayout=this._onDidLayout.event;layout(t){this._onDidLayout.fire([this.index,t])}},fx=class r{constructor(e,t,n,i,o,s){this.virtualDelegate=n;this.columns=i;this.domNode=Ie(t,ue(`.monaco-table.${this.domId}`));let a=i.map((u,p)=>this.disposables.add(new LR(u,p))),l={size:a.reduce((u,p)=>u+p.column.weight,0),views:a.map(u=>({size:u.column.weight,view:u}))};this.splitview=this.disposables.add(new od(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${n.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${n.headerRowHeight}px`;let d=new gx(i,o,u=>this.splitview.getViewSize(u));this.list=this.disposables.add(new ai(e,this.domNode,R8(n),[d],s)),N.any(...a.map(u=>u.onDidLayout))(([u,p])=>d.layoutColumn(u,p),null,this.disposables),this.splitview.onDidSashReset(u=>{let p=i.reduce((m,f)=>m+f.weight,0),h=i[u].weight/p*this.cachedWidth;this.splitview.resizeView(u,h)},null,this.disposables),this.styleElement=sr(this.domNode),this.style(eS)}static InstanceCount=0;domId=`table_id_${++r.InstanceCount}`;domNode;splitview;list;styleElement;disposables=new Q;cachedWidth=0;cachedHeight=0;get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseClick(){return this.list.onMouseClick}get onMouseDblClick(){return this.list.onMouseDblClick}get onMouseMiddleClick(){return this.list.onMouseMiddleClick}get onPointer(){return this.list.onPointer}get onMouseUp(){return this.list.onMouseUp}get onMouseDown(){return this.list.onMouseDown}get onMouseOver(){return this.list.onMouseOver}get onMouseMove(){return this.list.onMouseMove}get onMouseOut(){return this.list.onMouseOut}get onTouchStart(){return this.list.onTouchStart}get onTap(){return this.list.onTap}get onContextMenu(){return this.list.onContextMenu}get onDidFocus(){return this.list.onDidFocus}get onDidBlur(){return this.list.onDidBlur}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollLeft(){return this.list.scrollLeft}set scrollLeft(e){this.list.scrollLeft=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}getColumnLabels(){return this.columns.map(e=>e.label)}resizeColumn(e,t){let n=Math.round(t/100*this.cachedWidth);this.splitview.resizeView(e,n)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}rerender(){this.list.rerender()}row(e){return this.list.element(e)}indexOf(e){return this.list.indexOf(e)}get length(){return this.list.length}getHTMLElement(){return this.domNode}layout(e,t){e=e??RI(this.domNode),t=t??Rp(this.domNode),this.cachedWidth=t,this.cachedHeight=e,this.splitview.layout(t);let n=e-this.virtualDelegate.headerRowHeight;this.list.getHTMLElement().style.height=`${n}px`,this.list.layout(n,t)}triggerTypeNavigation(){this.list.triggerTypeNavigation()}style(e){let t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}domFocus(){this.list.domFocus()}setAnchor(e){this.list.setAnchor(e)}getAnchor(){return this.list.getAnchor()}getSelectedElements(){return this.list.getSelectedElements()}setSelection(e,t){this.list.setSelection(e,t)}getSelection(){return this.list.getSelection()}setFocus(e,t){this.list.setFocus(e,t)}focusNext(e=1,t=!1,n){this.list.focusNext(e,t,n)}focusPrevious(e=1,t=!1,n){this.list.focusPrevious(e,t,n)}focusNextPage(e){return this.list.focusNextPage(e)}focusPreviousPage(e){return this.list.focusPreviousPage(e)}focusFirst(e){this.list.focusFirst(e)}focusLast(e){this.list.focusLast(e)}getFocus(){return this.list.getFocus()}getFocusedElements(){return this.list.getFocusedElements()}getRelativeTop(e){return this.list.getRelativeTop(e)}reveal(e,t){this.list.reveal(e,t)}dispose(){this.disposables.dispose()}};var gd=class{constructor(e,t={}){this.user=e;this.model=new cx(e,null,t),this.onDidSpliceModel=this.model.onDidSpliceModel,this.onDidSpliceRenderedNodes=this.model.onDidSpliceRenderedNodes,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,t.sorter&&(this.sorter={compare(n,i){return t.sorter.compare(n.element,i.element)}}),this.identityProvider=t.identityProvider}rootRef=null;model;nodes=new Map;nodesByIdentity=new Map;identityProvider;sorter;onDidSpliceModel;onDidSpliceRenderedNodes;onDidChangeCollapseState;onDidChangeRenderNodeCount;get size(){return this.nodes.size}setChildren(e,t=$e.empty(),n={}){let i=this.getElementLocation(e);this._setChildren(i,this.preserveCollapseState(t),n)}_setChildren(e,t=$e.empty(),n){let i=new Set,o=new Set,s=l=>{if(l.element===null)return;let d=l;if(i.add(d.element),this.nodes.set(d.element,d),this.identityProvider){let u=this.identityProvider.getId(d.element).toString();o.add(u),this.nodesByIdentity.set(u,d)}n.onDidCreateNode?.(d)},a=l=>{if(l.element===null)return;let d=l;if(i.has(d.element)||this.nodes.delete(d.element),this.identityProvider){let u=this.identityProvider.getId(d.element).toString();o.has(u)||this.nodesByIdentity.delete(u)}n.onDidDeleteNode?.(d)};this.model.splice([...e,0],Number.MAX_VALUE,t,{...n,onDidCreateNode:s,onDidDeleteNode:a})}preserveCollapseState(e=$e.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),$e.map(e,t=>{let n=this.nodes.get(t.element);if(!n&&this.identityProvider){let s=this.identityProvider.getId(t.element).toString();n=this.nodesByIdentity.get(s)}if(!n){let s;return typeof t.collapsed>"u"?s=void 0:t.collapsed===1||t.collapsed===3?s=!0:t.collapsed===0||t.collapsed===2?s=!1:s=!!t.collapsed,{...t,children:this.preserveCollapseState(t.children),collapsed:s}}let i=typeof t.collapsible=="boolean"?t.collapsible:n.collapsible,o;return typeof t.collapsed>"u"||t.collapsed===3||t.collapsed===2?o=n.collapsed:t.collapsed===1?o=!0:t.collapsed===0?o=!1:o=!!t.collapsed,{...t,collapsible:i,collapsed:o,children:this.preserveCollapseState(t.children)}})}rerender(e){let t=this.getElementLocation(e);this.model.rerender(t)}resort(e=null,t=!0){if(!this.sorter)return;let n=this.getElementLocation(e),i=this.model.getNode(n);this._setChildren(n,this.resortChildren(i,t),{})}resortChildren(e,t,n=!0){let i=[...e.children];return(t||n)&&(i=i.sort(this.sorter.compare.bind(this.sorter))),$e.map(i,o=>({element:o.element,collapsible:o.collapsible,collapsed:o.collapsed,children:this.resortChildren(o,t,!1)}))}getFirstElementChild(e=null){let t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}getLastElementAncestor(e=null){let t=this.getElementLocation(e);return this.model.getLastElementAncestor(t)}has(e){return this.nodes.has(e)}getListIndex(e){let t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){let t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){let t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){let n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){let t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){let i=this.getElementLocation(e);return this.model.setCollapsed(i,t,n)}expandTo(e){let t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);let t=this.nodes.get(e);if(!t)throw new en(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new en(this.user,"Invalid getParentNodeLocation call");let t=this.nodes.get(e);if(!t)throw new en(this.user,`Tree element not found: ${e}`);let n=this.model.getNodeLocation(t),i=this.model.getParentNodeLocation(n);return this.model.getNode(i).element}getElementLocation(e){if(e===null)return[];let t=this.nodes.get(e);if(!t)throw new en(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}};function bx(r){let e=[r.element],t=r.incompressible||!1;return{element:{elements:e,incompressible:t},children:$e.map($e.from(r.children),bx),collapsible:r.collapsible,collapsed:r.collapsed}}function vx(r){let e=[r.element],t=r.incompressible||!1,n,i;for(;[i,n]=$e.consume($e.from(r.children),2),!(i.length!==1||i[0].incompressible);)r=i[0],e.push(r.element);return{element:{elements:e,incompressible:t},children:$e.map($e.concat(i,n),vx),collapsible:r.collapsible,collapsed:r.collapsed}}function PR(r,e=0){let t;return e<r.element.elements.length-1?t=[PR(r,e+1)]:t=$e.map($e.from(r.children),n=>PR(n,0)),e===0&&r.element.incompressible?{element:r.element.elements[e],children:t,incompressible:!0,collapsible:r.collapsible,collapsed:r.collapsed}:{element:r.element.elements[e],children:t,collapsible:r.collapsible,collapsed:r.collapsed}}function Y2(r){return PR(r,0)}function X2(r,e,t){return r.element===e?{...r,children:t}:{...r,children:$e.map($e.from(r.children),n=>X2(n,e,t))}}var P8=r=>({getId(e){return e.elements.map(t=>r.getId(t).toString()).join("\0")}}),AR=class{constructor(e,t={}){this.user=e;this.model=new gd(e,t),this.enabled=typeof t.compressionEnabled>"u"?!0:t.compressionEnabled,this.identityProvider=t.identityProvider}rootRef=null;get onDidSpliceRenderedNodes(){return this.model.onDidSpliceRenderedNodes}get onDidSpliceModel(){return this.model.onDidSpliceModel}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}model;nodes=new Map;enabled;identityProvider;get size(){return this.nodes.size}setChildren(e,t=$e.empty(),n){let i=n.diffIdentityProvider&&P8(n.diffIdentityProvider);if(e===null){let f=$e.map(t,this.enabled?vx:bx);this._setChildren(null,f,{diffIdentityProvider:i,diffDepth:1/0});return}let o=this.nodes.get(e);if(!o)throw new en(this.user,"Unknown compressed tree node");let s=this.model.getNode(o),a=this.model.getParentNodeLocation(o),l=this.model.getNode(a),d=Y2(s),u=X2(d,e,t),p=(this.enabled?vx:bx)(u),h=n.diffIdentityProvider?(f,g)=>n.diffIdentityProvider.getId(f)===n.diffIdentityProvider.getId(g):void 0;if(ln(p.element.elements,s.element.elements,h)){this._setChildren(o,p.children||$e.empty(),{diffIdentityProvider:i,diffDepth:1});return}let m=l.children.map(f=>f===s?p:f);this._setChildren(l.element,m,{diffIdentityProvider:i,diffDepth:s.depth-l.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;let n=this.model.getNode().children,i=$e.map(n,Y2),o=$e.map(i,e?vx:bx);this._setChildren(null,o,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){let i=new Set,o=a=>{for(let l of a.element.elements)i.add(l),this.nodes.set(l,a.element)},s=a=>{for(let l of a.element.elements)i.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,{...n,onDidCreateNode:o,onDidDeleteNode:s})}has(e){return this.nodes.has(e)}getListIndex(e){let t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){let t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();let t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){let t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){let t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}getFirstElementChild(e){let t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}getLastElementAncestor(e){let t=typeof e>"u"?void 0:this.getCompressedNode(e);return this.model.getLastElementAncestor(t)}isCollapsible(e){let t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){let n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){let t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){let i=this.getCompressedNode(e);return this.model.setCollapsed(i,t,n)}expandTo(e){let t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){let t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}resort(e=null,t=!0){let n=this.getCompressedNode(e);this.model.resort(n,t)}getCompressedNode(e){if(e===null)return null;let t=this.nodes.get(e);if(!t)throw new en(this.user,`Tree element not found: ${e}`);return t}},A8=r=>r[r.length-1],OR=class r{constructor(e,t){this.unwrapper=e;this.node=t}get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new r(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}};function O8(r,e){return{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(r(t))}},sorter:e.sorter&&{compare(t,n){return e.sorter.compare(t.elements[0],n.elements[0])}},filter:e.filter&&{filter(t,n){return e.filter.filter(r(t),n)}}}}var yx=class{rootRef=null;get onDidSpliceModel(){return N.map(this.model.onDidSpliceModel,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(n=>this.nodeMapper.map(n)),deletedNodes:t.map(n=>this.nodeMapper.map(n))}))}get onDidSpliceRenderedNodes(){return N.map(this.model.onDidSpliceRenderedNodes,({start:e,deleteCount:t,elements:n})=>({start:e,deleteCount:t,elements:n.map(i=>this.nodeMapper.map(i))}))}get onDidChangeCollapseState(){return N.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return N.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}elementMapper;nodeMapper;model;constructor(e,t={}){this.elementMapper=t.elementMapper||A8;let n=i=>this.elementMapper(i.elements);this.nodeMapper=new Ac(i=>new OR(n,i)),this.model=new AR(e,O8(n,t))}setChildren(e,t=$e.empty(),n={}){this.model.setChildren(e,t,n)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){let t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}getLastElementAncestor(e){let t=this.model.getLastElementAncestor(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}resort(e=null,t=!0){return this.model.resort(e,t)}getCompressedTreeNode(e=null){return this.model.getNode(e)}};var Fc=class extends eh{constructor(t,n,i,o,s={}){super(t,n,i,o,s);this.user=t}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(t,n=$e.empty(),i){this.model.setChildren(t,n,i)}rerender(t){if(t===void 0){this.view.rerender();return}this.model.rerender(t)}updateElementHeight(t,n){let i=this.model.getListIndex(t);if(i===-1)throw new en(this.user,"updateElementHeight failed - index not found");this.view.updateElementHeight(i,n)}resort(t,n=!0){this.model.resort(t,n)}hasElement(t){return this.model.has(t)}createModel(t,n){return new gd(t,n)}},Ix=class{constructor(e,t,n){this._compressedTreeNodeProvider=e;this.stickyScrollDelegate=t;this.renderer=n;this.templateId=n.templateId,n.onDidChangeTwistieState&&(this.onDidChangeTwistieState=n.onDidChangeTwistieState)}templateId;onDidChangeTwistieState;get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){let o=this.stickyScrollDelegate.getCompressedNode(e);o||(o=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element)),o.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,i)):(n.compressedTreeNode=o,this.renderer.renderCompressedElements(o,t,n.data,i))}disposeElement(e,t,n,i){n.compressedTreeNode?this.renderer.disposeCompressedElements?.(n.compressedTreeNode,t,n.data,i):this.renderer.disposeElement?.(e,t,n.data,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}};C([J],Ix.prototype,"compressedTreeNodeProvider",1);var MR=class{constructor(e){this.modelProvider=e}compressedStickyNodes=new Map;getCompressedNode(e){return this.compressedStickyNodes.get(e)}constrainStickyScrollNodes(e,t,n){if(this.compressedStickyNodes.clear(),e.length===0)return[];for(let i=0;i<e.length;i++){let o=e[i],s=o.position+o.height;if(i+1<e.length&&s+e[i+1].height>n||i>=t-1&&t<e.length){let l=e.slice(0,i),d=e.slice(i),u=this.compressStickyNodes(d);return[...l,u]}}return e}compressStickyNodes(e){if(e.length===0)throw new Error("Can't compress empty sticky nodes");let t=this.modelProvider();if(!t.isCompressionEnabled())return e[0];let n=[];for(let d=0;d<e.length;d++){let u=e[d],p=t.getCompressedTreeNode(u.node.element);if(p.element){if(d!==0&&p.element.incompressible)break;n.push(...p.element.elements)}}if(n.length<2)return e[0];let i=e[e.length-1],o={elements:n,incompressible:!1},s={...i.node,children:[],element:o},a=new Proxy(e[0].node,{}),l={node:a,startIndex:e[0].startIndex,endIndex:i.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(a,s),l}};function M8(r,e){return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let n;try{n=r().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return n.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}}}var nh=class extends Fc{constructor(e,t,n,i,o={}){let s=()=>this,a=new MR(()=>this.model),l=i.map(d=>new Ix(s,a,d));super(e,t,n,l,{...M8(s,o),stickyScrollDelegate:a})}setChildren(e,t=$e.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t){return new yx(e,t)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}};function NR(r){return{...r,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function BR(r,e){return e.parent?e.parent===r?!0:BR(r,e.parent):!1}function N8(r,e){return r===e||BR(r,e)||BR(e,r)}var UR=class r{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new r(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}},VR=class{constructor(e,t,n){this.renderer=e;this.nodeMapper=t;this.onDidChangeTwistieState=n;this.templateId=e.templateId}templateId;renderedNodes=new Map;renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(...qe.asClassNameArray(z.treeItemLoading)),!0):(t.classList.remove(...qe.asClassNameArray(z.treeItemLoading)),!1)}disposeElement(e,t,n,i){this.renderer.disposeElement?.(this.nodeMapper.map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}};function Q2(r){return{browserEvent:r.browserEvent,elements:r.elements.map(e=>e.element)}}function Sx(r){return{browserEvent:r.browserEvent,element:r.element&&r.element.element,target:r.target}}function F8(r){return{browserEvent:r.browserEvent,element:r.element&&r.element.element,anchor:r.anchor,isStickyScroll:r.isStickyScroll}}var WR=class extends $a{constructor(t){super(t.elements.map(n=>n.element));this.data=t}set context(t){this.data.context=t}get context(){return this.data.context}};function FR(r){return r instanceof $a?new WR(r):r}var zR=class{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart?.(FR(e),t)}onDragOver(e,t,n,i,o,s=!0){return this.dnd.onDragOver(FR(e),t&&t.element,n,i,o)}drop(e,t,n,i,o){this.dnd.drop(FR(e),t&&t.element,n,i,o)}onDragEnd(e){this.dnd.onDragEnd?.(e)}dispose(){this.dnd.dispose()}};function J2(r){return r&&{...r,collapseByDefault:!0,identityProvider:r.identityProvider&&{getId(e){return r.identityProvider.getId(e.element)}},dnd:r.dnd&&new zR(r.dnd),multipleSelectionController:r.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return r.multipleSelectionController.isSelectionSingleChangeEvent({...e,element:e.element})},isSelectionRangeChangeEvent(e){return r.multipleSelectionController.isSelectionRangeChangeEvent({...e,element:e.element})}},accessibilityProvider:r.accessibilityProvider&&{...r.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:r.accessibilityProvider.getRole?e=>r.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:r.accessibilityProvider.isChecked?e=>!!r.accessibilityProvider?.isChecked(e.element):void 0,getAriaLabel(e){return r.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return r.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:r.accessibilityProvider.getWidgetRole?()=>r.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:r.accessibilityProvider.getAriaLevel&&(e=>r.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:r.accessibilityProvider.getActiveDescendantId&&(e=>r.accessibilityProvider.getActiveDescendantId(e.element))},filter:r.filter&&{filter(e,t){return r.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:r.keyboardNavigationLabelProvider&&{...r.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(e){return r.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}},sorter:void 0,expandOnlyOnTwistieClick:typeof r.expandOnlyOnTwistieClick>"u"?void 0:typeof r.expandOnlyOnTwistieClick!="function"?r.expandOnlyOnTwistieClick:e=>r.expandOnlyOnTwistieClick(e.element),defaultFindVisibility:e=>e.hasChildren&&e.stale?1:typeof r.defaultFindVisibility=="number"?r.defaultFindVisibility:typeof r.defaultFindVisibility>"u"?2:r.defaultFindVisibility(e.element)}}function HR(r,e){e(r),r.children.forEach(t=>HR(t,e))}var Cf=class{constructor(e,t,n,i,o,s={}){this.user=e;this.dataSource=o;this.identityProvider=s.identityProvider,this.autoExpandSingleChildren=typeof s.autoExpandSingleChildren>"u"?!1:s.autoExpandSingleChildren,this.sorter=s.sorter,this.getDefaultCollapseState=a=>s.collapseByDefault?s.collapseByDefault(a)?3:2:void 0,this.tree=this.createTree(e,t,n,i,s),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=NR({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}tree;root;nodes=new Map;sorter;getDefaultCollapseState;subTreeRefreshPromises=new Map;refreshPromises=new Map;identityProvider;autoExpandSingleChildren;_onDidRender=new x;_onDidChangeNodeSlowState=new x;nodeMapper=new Ac(e=>new UR(e));disposables=new Q;get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return N.map(this.tree.onDidChangeFocus,Q2)}get onDidChangeSelection(){return N.map(this.tree.onDidChangeSelection,Q2)}get onKeyDown(){return this.tree.onKeyDown}get onMouseClick(){return N.map(this.tree.onMouseClick,Sx)}get onMouseDblClick(){return N.map(this.tree.onMouseDblClick,Sx)}get onContextMenu(){return N.map(this.tree.onContextMenu,F8)}get onTap(){return N.map(this.tree.onTap,Sx)}get onPointer(){return N.map(this.tree.onPointer,Sx)}get onDidFocus(){return this.tree.onDidFocus}get onDidBlur(){return this.tree.onDidBlur}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidUpdateOptions(){return this.tree.onDidUpdateOptions}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get findMode(){return this.tree.findMode}set findMode(e){this.tree.findMode=e}onDidChangeFindMode;get findMatchType(){return this.tree.findMatchType}set findMatchType(e){this.tree.findMatchType=e}onDidChangeFindMatchType;get expandOnlyOnTwistieClick(){if(typeof this.tree.expandOnlyOnTwistieClick=="boolean")return this.tree.expandOnlyOnTwistieClick;let e=this.tree.expandOnlyOnTwistieClick;return t=>e(this.nodes.get(t===this.root.element?null:t)||null)}get onDidDispose(){return this.tree.onDidDispose}createTree(e,t,n,i,o){let s=new Zp(n),a=i.map(d=>new VR(d,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=J2(o)||{};return new Fc(e,t,s,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}get options(){return this.tree.options}getHTMLElement(){return this.tree.getHTMLElement()}get contentHeight(){return this.tree.contentHeight}get contentWidth(){return this.tree.contentWidth}get onDidChangeContentHeight(){return this.tree.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.tree.onDidChangeContentWidth}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollLeft(){return this.tree.scrollLeft}set scrollLeft(e){this.tree.scrollLeft=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}get lastVisibleElement(){return this.tree.lastVisibleElement.element}get ariaLabel(){return this.tree.ariaLabel}set ariaLabel(e){this.tree.ariaLabel=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}async setInput(e,t){this.refreshPromises.forEach(i=>i.cancel()),this.refreshPromises.clear(),this.root.element=e;let n=t&&{viewState:t,focus:[],selection:[]};await this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)}async updateChildren(e=this.root.element,t=!0,n=!1,i){await this._updateChildren(e,t,n,void 0,i)}async _updateChildren(e=this.root.element,t=!0,n=!1,i,o){if(typeof this.root.element>"u")throw new en(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await N.toPromise(this._onDidRender.event));let s=this.getDataNode(e);if(await this.refreshAndRenderNode(s,t,i,o),n)try{this.tree.rerender(s)}catch{}}resort(e=this.root.element,t=!0){this.tree.resort(this.getDataNode(e),t)}hasNode(e){return e===this.root.element||this.nodes.has(e)}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}let t=this.getDataNode(e);this.tree.rerender(t)}updateElementHeight(e,t){let n=this.getDataNode(e);this.tree.updateElementHeight(n,t)}updateWidth(e){let t=this.getDataNode(e);this.tree.updateWidth(t)}getNode(e=this.root.element){let t=this.getDataNode(e),n=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(n)}collapse(e,t=!1){let n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}async expand(e,t=!1){if(typeof this.root.element>"u")throw new en(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await N.toPromise(this._onDidRender.event));let n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(await this.root.refreshPromise,await N.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;let i=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(await this.root.refreshPromise,await N.toPromise(this._onDidRender.event)),i}toggleCollapsed(e,t=!1){return this.tree.toggleCollapsed(this.getDataNode(e),t)}expandAll(){this.tree.expandAll()}async expandTo(e){if(!this.dataSource.getParent)throw new Error("Can't expand to element without getParent method");let t=[];for(;!this.hasNode(e);)e=this.dataSource.getParent(e),e!==this.root.element&&t.push(e);for(let n of $e.reverse(t))await this.expand(n);this.tree.expandTo(this.getDataNode(e))}collapseAll(){this.tree.collapseAll()}isCollapsible(e){return this.tree.isCollapsible(this.getDataNode(e))}isCollapsed(e){return this.tree.isCollapsed(this.getDataNode(e))}triggerTypeNavigation(){this.tree.triggerTypeNavigation()}openFind(){this.tree.openFind()}closeFind(){this.tree.closeFind()}refilter(){this.tree.refilter()}setAnchor(e){this.tree.setAnchor(typeof e>"u"?void 0:this.getDataNode(e))}getAnchor(){return this.tree.getAnchor()?.element}setSelection(e,t){let n=e.map(i=>this.getDataNode(i));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){let n=e.map(i=>this.getDataNode(i));this.tree.setFocus(n,t)}focusNext(e=1,t=!1,n){this.tree.focusNext(e,t,n)}focusPrevious(e=1,t=!1,n){this.tree.focusPrevious(e,t,n)}focusNextPage(e){return this.tree.focusNextPage(e)}focusPreviousPage(e){return this.tree.focusPreviousPage(e)}focusLast(e){this.tree.focusLast(e)}focusFirst(e){this.tree.focusFirst(e)}getFocus(){return this.tree.getFocus().map(t=>t.element)}getStickyScrollFocus(){return this.tree.getStickyScrollFocus().map(t=>t.element)}getFocusedPart(){return this.tree.getFocusedPart()}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getRelativeTop(e){return this.tree.getRelativeTop(this.getDataNode(e))}getParentElement(e){let t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){let t=this.getDataNode(e),n=this.tree.getFirstElementChild(t===this.root?null:t);return n&&n.element}getDataNode(e){let t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new en(this.user,`Data tree node not found: ${e}`);return t}async refreshAndRenderNode(e,t,n,i){await this.refreshNode(e,t,n),!this.disposables.isDisposed&&this.render(e,n,i)}async refreshNode(e,t,n){let i;if(this.subTreeRefreshPromises.forEach((o,s)=>{!i&&N8(s,e)&&(i=o.then(()=>this.refreshNode(e,t,n)))}),i)return i;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0,this.setChildren(e,[],t,n);return}return this.doRefreshSubTree(e,t,n)}async doRefreshSubTree(e,t,n){let i;e.refreshPromise=new Promise(o=>i=o),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{let o=await this.doRefreshNode(e,t,n);e.stale=!1,await Ci.settled(o.map(s=>this.doRefreshSubTree(s,t,n)))}finally{i()}}async doRefreshNode(e,t,n){e.hasChildren=!!this.dataSource.hasChildren(e.element);let i;if(!e.hasChildren)i=Promise.resolve($e.empty());else{let o=this.doGetChildren(e);if(JE(o))i=Promise.resolve(o);else{let s=Cn(800);s.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),i=o.finally(()=>s.cancel())}}try{let o=await i;return this.setChildren(e,o,t,n)}catch(o){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),nu(o))return[];throw o}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;let n=this.dataSource.getChildren(e.element);return JE(n)?this.processChildren(n):(t=Eo(async()=>this.processChildren(await n)),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(Ze))}setChildren(e,t,n,i){let o=[...t];if(e.children.length===0&&o.length===0)return[];let s=new Map,a=new Map;for(let u of e.children)s.set(u.element,u),this.identityProvider&&a.set(u.id,{node:u,collapsed:this.tree.hasElement(u)&&this.tree.isCollapsed(u)});let l=[],d=o.map(u=>{let p=!!this.dataSource.hasChildren(u);if(!this.identityProvider){let g=NR({element:u,parent:e,hasChildren:p,defaultCollapseState:this.getDefaultCollapseState(u)});return p&&g.defaultCollapseState===2&&l.push(g),g}let h=this.identityProvider.getId(u).toString(),m=a.get(h);if(m){let g=m.node;return s.delete(g.element),this.nodes.delete(g.element),this.nodes.set(u,g),g.element=u,g.hasChildren=p,n?m.collapsed?(g.children.forEach(y=>HR(y,T=>this.nodes.delete(T.element))),g.children.splice(0,g.children.length),g.stale=!0):l.push(g):p&&!m.collapsed&&l.push(g),g}let f=NR({element:u,parent:e,id:h,hasChildren:p,defaultCollapseState:this.getDefaultCollapseState(u)});return i&&i.viewState.focus&&i.viewState.focus.indexOf(h)>-1&&i.focus.push(f),i&&i.viewState.selection&&i.viewState.selection.indexOf(h)>-1&&i.selection.push(f),(i&&i.viewState.expanded&&i.viewState.expanded.indexOf(h)>-1||p&&f.defaultCollapseState===2)&&l.push(f),f});for(let u of s.values())HR(u,p=>this.nodes.delete(p.element));for(let u of d)this.nodes.set(u.element,u);return e.children.splice(0,e.children.length,...d),e!==this.root&&this.autoExpandSingleChildren&&d.length===1&&l.length===0&&(d[0].forceExpanded=!0,l.push(d[0])),l}render(e,t,n){let i=e.children.map(s=>this.asTreeElement(s,t)),o=n&&{...n,diffIdentityProvider:n.diffIdentityProvider&&{getId(s){return n.diffIdentityProvider.getId(s.element)}}};this.tree.setChildren(e===this.root?null:e,i,o),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:e.forceExpanded?(n=!1,e.forceExpanded=!1):n=e.defaultCollapseState,{element:e,children:e.hasChildren?$e.map(e.children,i=>this.asTreeElement(i,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}getViewState(){if(!this.identityProvider)throw new en(this.user,"Can't get tree view state without an identity provider");let e=a=>this.identityProvider.getId(a).toString(),t=this.getFocus().map(e),n=this.getSelection().map(e),i=[],o=this.tree.getNode(),s=[o];for(;s.length>0;){let a=s.pop();a!==o&&a.collapsible&&!a.collapsed&&i.push(e(a.element.element)),s.push(...a.children)}return{focus:t,selection:n,expanded:i,scrollTop:this.scrollTop}}dispose(){this.disposables.dispose(),this.tree.dispose()}},KR=class r{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new r(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}},GR=class{constructor(e,t,n,i){this.renderer=e;this.nodeMapper=t;this.compressibleNodeMapperProvider=n;this.onDidChangeTwistieState=i;this.templateId=e.templateId}templateId;renderedNodes=new Map;disposables=[];renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderCompressedElements(e,t,n,i){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(...qe.asClassNameArray(z.treeItemLoading)),!0):(t.classList.remove(...qe.asClassNameArray(z.treeItemLoading)),!1)}disposeElement(e,t,n,i){this.renderer.disposeElement?.(this.nodeMapper.map(e),t,n.templateData,i)}disposeCompressedElements(e,t,n,i){this.renderer.disposeCompressedElements?.(this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=vt(this.disposables)}};function B8(r){let e=r&&J2(r);return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel(t){return r.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(n=>n.element))}}}}var xx=class extends Cf{constructor(t,n,i,o,s,a,l={}){super(t,n,i,s,a,l);this.compressionDelegate=o;this.filter=l.filter}compressibleNodeMapper=new Ac(t=>new KR(t));filter;createTree(t,n,i,o,s){let a=new Zp(i),l=o.map(u=>new GR(u,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),d=B8(s)||{};return new nh(t,n,a,l,d)}asTreeElement(t,n){return{incompressible:this.compressionDelegate.isIncompressible(t.element),...super.asTreeElement(t,n)}}updateOptions(t={}){this.tree.updateOptions(t)}getViewState(){if(!this.identityProvider)throw new en(this.user,"Can't get tree view state without an identity provider");let t=l=>this.identityProvider.getId(l).toString(),n=this.getFocus().map(t),i=this.getSelection().map(t),o=[],s=this.tree.getCompressedTreeNode(),a=[s];for(;a.length>0;){let l=a.pop();if(l!==s&&l.collapsible&&!l.collapsed)for(let d of l.element.elements)o.push(t(d.element));a.push(...l.children)}return{focus:n,selection:i,expanded:o,scrollTop:this.scrollTop}}render(t,n,i){if(!this.identityProvider)return super.render(t,n);let o=f=>this.identityProvider.getId(f).toString(),s=f=>{let g=new Set;for(let y of f){let T=this.tree.getCompressedTreeNode(y===this.root?null:y);if(T.element)for(let E of T.element.elements)g.add(o(E.element))}return g},a=s(this.tree.getSelection()),l=s(this.tree.getFocus());super.render(t,n,i);let d=this.getSelection(),u=!1,p=this.getFocus(),h=!1,m=f=>{let g=f.element;if(g)for(let y=0;y<g.elements.length;y++){let T=o(g.elements[y].element),E=g.elements[g.elements.length-1].element;a.has(T)&&d.indexOf(E)===-1&&(d.push(E),u=!0),l.has(T)&&p.indexOf(E)===-1&&(p.push(E),h=!0)}f.children.forEach(m)};m(this.tree.getCompressedTreeNode(t===this.root?null:t)),u&&this.setSelection(d),h&&this.setFocus(p)}processChildren(t){return this.filter&&(t=$e.filter(t,n=>{let i=this.filter.filter(n,1),o=U8(i);if(o===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return o===1})),super.processChildren(t)}};function U8(r){return typeof r=="boolean"?r?1:0:If(r)?Oc(r.visibility):Oc(r)}var Tx=class extends eh{constructor(t,n,i,o,s,a={}){super(t,n,i,o,a);this.user=t;this.dataSource=s;this.identityProvider=a.identityProvider}input;identityProvider;nodesByIdentity=new Map;getInput(){return this.input}setInput(t,n){if(n&&!this.identityProvider)throw new en(this.user,"Can't restore tree view state without an identity provider");if(this.input=t,!t){this.nodesByIdentity.clear(),this.model.setChildren(null,$e.empty());return}if(!n){this._refresh(t);return}let i=[],o=[],s=l=>{let d=this.identityProvider.getId(l).toString();return!n.expanded[d]},a=l=>{let d=this.identityProvider.getId(l.element).toString();n.focus.has(d)&&i.push(l.element),n.selection.has(d)&&o.push(l.element)};this._refresh(t,s,a),this.setFocus(i),this.setSelection(o),n&&typeof n.scrollTop=="number"&&(this.scrollTop=n.scrollTop)}updateChildren(t=this.input){if(typeof this.input>"u")throw new en(this.user,"Tree input not set");let n;this.identityProvider&&(n=i=>{let o=this.identityProvider.getId(i).toString(),s=this.nodesByIdentity.get(o);if(s)return s.collapsed}),this._refresh(t,n)}resort(t=this.input,n=!0){this.model.resort(t===this.input?null:t,n)}refresh(t){if(t===void 0){this.view.rerender();return}this.model.rerender(t)}_refresh(t,n,i){let o;if(this.identityProvider){let s=new Set,a=i;i=l=>{let d=this.identityProvider.getId(l.element).toString();s.add(d),this.nodesByIdentity.set(d,l),a?.(l)},o=l=>{let d=this.identityProvider.getId(l.element).toString();s.has(d)||this.nodesByIdentity.delete(d)}}this.model.setChildren(t===this.input?null:t,this.iterate(t,n).elements,{onDidCreateNode:i,onDidDeleteNode:o})}iterate(t,n){let i=[...this.dataSource.getChildren(t)];return{elements:$e.map(i,s=>{let{elements:a,size:l}=this.iterate(s,n),d=this.dataSource.hasChildren?this.dataSource.hasChildren(s):void 0,u=l===0?void 0:n&&n(s);return{element:s,children:a,collapsible:d,collapsed:u}}),size:i.length}}createModel(t,n){return new gd(t,n)}};var W_t=new V("isMac",ze,c("isMac","Whether the operating system is macOS")),z_t=new V("isLinux",Wt,c("isLinux","Whether the operating system is Linux")),H_t=new V("isWindows",xt,c("isWindows","Whether the operating system is Windows")),K_t=new V("isWeb",_t,c("isWeb","Whether the platform is a web browser")),Ex=new V("isMacNative",ze&&!_t,c("isMacNative","Whether the operating system is macOS on a non-browser platform")),G_t=new V("isIOS",pl,c("isIOS","Whether the operating system is iOS")),q_t=new V("isMobile",yP,c("isMobile","Whether the platform is a mobile web browser")),$_t=new V("isDevelopment",!1,!0),j_t=new V("productQualityType","",c("productQualityType","Quality type of VS Code")),qR="inputFocus",Y_t=new V(qR,!1,c("inputFocus","Whether keyboard focus is inside an input box"));var el=A("listService");var kf=new V("listScrollAtBoundary","none"),fRt=X.or(kf.isEqualTo("top"),kf.isEqualTo("both")),bRt=X.or(kf.isEqualTo("bottom"),kf.isEqualTo("both")),Z2=new V("listFocus",!0),eU=new V("treestickyScrollFocused",!1),Ux=new V("listSupportsMultiselect",!0),vRt=X.and(Z2,X.not(qR),eU.negate()),XR=new V("listHasSelectionOrFocus",!1),QR=new V("listDoubleSelection",!1),JR=new V("listMultiSelection",!1),Vx=new V("listSelectionNavigation",!1),V8=new V("listSupportsFind",!0),W8=new V("treeElementCanCollapse",!1),z8=new V("treeElementHasParent",!1),H8=new V("treeElementCanExpand",!1),K8=new V("treeElementHasChild",!1),G8=new V("treeFindOpen",!1),tU="listTypeNavigationMode",nU="listAutomaticKeyboardNavigation";function Wx(r,e){let t=r.createScoped(e.getHTMLElement());return Z2.bindTo(t),t}function zx(r,e){let t=kf.bindTo(r),n=()=>{let i=e.scrollTop===0,o=e.scrollHeight-e.renderHeight-e.scrollTop<1;i&&o?t.set("both"):i?t.set("top"):o?t.set("bottom"):t.set("none")};return n(),e.onDidScroll(n)}var Bc="workbench.list.multiSelectModifier",Px="workbench.list.openMode",fo="workbench.list.horizontalScrolling",ZR="workbench.list.defaultFindMode",e0="workbench.list.typeNavigationMode",Ax="workbench.list.keyboardNavigation",vs="workbench.list.scrollByPage",t0="workbench.list.defaultFindMatchType",Df="workbench.tree.indent",Ox="workbench.tree.renderIndentGuides",ys="workbench.list.smoothScrolling",sa="workbench.list.mouseWheelScrollSensitivity",aa="workbench.list.fastScrollSensitivity",Mx="workbench.tree.expandMode",Nx="workbench.tree.enableStickyScroll",Fx="workbench.tree.stickyScrollMaxItemCount";function la(r){return r.getValue(Bc)==="alt"}var $R=class extends P{constructor(t){super();this.configurationService=t;this.useAltAsMultipleSelectionModifier=la(t),this.registerListeners()}useAltAsMultipleSelectionModifier;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>{t.affectsConfiguration(Bc)&&(this.useAltAsMultipleSelectionModifier=la(this.configurationService))}))}isSelectionSingleChangeEvent(t){return this.useAltAsMultipleSelectionModifier?t.browserEvent.altKey:W_(t)}isSelectionRangeChangeEvent(t){return z_(t)}};function Hx(r,e){let t=r.get(ke),n=r.get(Wn),i=new Q;return[{...e,keyboardNavigationDelegate:{mightProducePrintableCharacter(s){return n.mightProducePrintableCharacter(s)}},smoothScrolling:!!t.getValue(ys),mouseWheelScrollSensitivity:t.getValue(sa),fastScrollSensitivity:t.getValue(aa),multipleSelectionController:e.multipleSelectionController??i.add(new $R(t)),keyboardNavigationEventFilter:q8(n),scrollByPage:!!t.getValue(vs)},i]}var ih=class extends ai{contextKeyService;listSupportsMultiSelect;listHasSelectionOrFocus;listDoubleSelection;listMultiSelection;horizontalScrolling;_useAltAsMultipleSelectionModifier;navigator;get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,n,i,o,s,a,l,d){let u=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!l.getValue(fo),[p,h]=d.invokeFunction(Hx,o);super(e,t,n,i,{keyboardSupport:!1,...p,horizontalScrolling:u}),this.disposables.add(h),this.contextKeyService=Wx(s,this),this.disposables.add(zx(this.contextKeyService,this)),this.listSupportsMultiSelect=Ux.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),Vx.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=XR.bindTo(this.contextKeyService),this.listDoubleSelection=QR.bindTo(this.contextKeyService),this.listMultiSelection=JR.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=la(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{let f=this.getSelection(),g=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(f.length>0||g.length>0),this.listMultiSelection.set(f.length>1),this.listDoubleSelection.set(f.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{let f=this.getSelection(),g=this.getFocus();this.listHasSelectionOrFocus.set(f.length>0||g.length>0)})),this.disposables.add(l.onDidChangeConfiguration(f=>{f.affectsConfiguration(Bc)&&(this._useAltAsMultipleSelectionModifier=la(l));let g={};if(f.affectsConfiguration(fo)&&this.horizontalScrolling===void 0){let y=!!l.getValue(fo);g={...g,horizontalScrolling:y}}if(f.affectsConfiguration(vs)){let y=!!l.getValue(vs);g={...g,scrollByPage:y}}if(f.affectsConfiguration(ys)){let y=!!l.getValue(ys);g={...g,smoothScrolling:y}}if(f.affectsConfiguration(sa)){let y=l.getValue(sa);g={...g,mouseWheelScrollSensitivity:y}}if(f.affectsConfiguration(aa)){let y=l.getValue(aa);g={...g,fastScrollSensitivity:y}}Object.keys(g).length>0&&this.updateOptions(g)})),this.navigator=new Bx(this,{configurationService:l,...o}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?xf(e):th)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}};ih=C([v(5,Ge),v(6,el),v(7,ke),v(8,_e)],ih);var wx=class extends mx{contextKeyService;disposables;listSupportsMultiSelect;_useAltAsMultipleSelectionModifier;horizontalScrolling;navigator;get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,n,i,o,s,a,l,d){let u=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!l.getValue(fo),[p,h]=d.invokeFunction(Hx,o);super(e,t,n,i,{keyboardSupport:!1,...p,horizontalScrolling:u}),this.disposables=new Q,this.disposables.add(h),this.contextKeyService=Wx(s,this),this.disposables.add(zx(this.contextKeyService,this.widget)),this.horizontalScrolling=o.horizontalScrolling,this.listSupportsMultiSelect=Ux.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),Vx.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this._useAltAsMultipleSelectionModifier=la(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(l.onDidChangeConfiguration(f=>{f.affectsConfiguration(Bc)&&(this._useAltAsMultipleSelectionModifier=la(l));let g={};if(f.affectsConfiguration(fo)&&this.horizontalScrolling===void 0){let y=!!l.getValue(fo);g={...g,horizontalScrolling:y}}if(f.affectsConfiguration(vs)){let y=!!l.getValue(vs);g={...g,scrollByPage:y}}if(f.affectsConfiguration(ys)){let y=!!l.getValue(ys);g={...g,smoothScrolling:y}}if(f.affectsConfiguration(sa)){let y=l.getValue(sa);g={...g,mouseWheelScrollSensitivity:y}}if(f.affectsConfiguration(aa)){let y=l.getValue(aa);g={...g,fastScrollSensitivity:y}}Object.keys(g).length>0&&this.updateOptions(g)})),this.navigator=new Bx(this,{configurationService:l,...o}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?xf(e):th)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}dispose(){this.disposables.dispose(),super.dispose()}};wx=C([v(5,Ge),v(6,el),v(7,ke),v(8,_e)],wx);var Cx=class extends fx{contextKeyService;listSupportsMultiSelect;listHasSelectionOrFocus;listDoubleSelection;listMultiSelection;horizontalScrolling;_useAltAsMultipleSelectionModifier;navigator;get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,n,i,o,s,a,l,d,u){let p=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!d.getValue(fo),[h,m]=u.invokeFunction(Hx,s);super(e,t,n,i,o,{keyboardSupport:!1,...h,horizontalScrolling:p}),this.disposables.add(m),this.contextKeyService=Wx(a,this),this.disposables.add(zx(this.contextKeyService,this)),this.listSupportsMultiSelect=Ux.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),Vx.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this.listHasSelectionOrFocus=XR.bindTo(this.contextKeyService),this.listDoubleSelection=QR.bindTo(this.contextKeyService),this.listMultiSelection=JR.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=la(d),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{let g=this.getSelection(),y=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(g.length>0||y.length>0),this.listMultiSelection.set(g.length>1),this.listDoubleSelection.set(g.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{let g=this.getSelection(),y=this.getFocus();this.listHasSelectionOrFocus.set(g.length>0||y.length>0)})),this.disposables.add(d.onDidChangeConfiguration(g=>{g.affectsConfiguration(Bc)&&(this._useAltAsMultipleSelectionModifier=la(d));let y={};if(g.affectsConfiguration(fo)&&this.horizontalScrolling===void 0){let T=!!d.getValue(fo);y={...y,horizontalScrolling:T}}if(g.affectsConfiguration(vs)){let T=!!d.getValue(vs);y={...y,scrollByPage:T}}if(g.affectsConfiguration(ys)){let T=!!d.getValue(ys);y={...y,smoothScrolling:T}}if(g.affectsConfiguration(sa)){let T=d.getValue(sa);y={...y,mouseWheelScrollSensitivity:T}}if(g.affectsConfiguration(aa)){let T=d.getValue(aa);y={...y,fastScrollSensitivity:T}}Object.keys(y).length>0&&this.updateOptions(y)})),this.navigator=new jR(this,{configurationService:d,...s}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?xf(e):th)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}dispose(){this.disposables.dispose(),super.dispose()}};Cx=C([v(6,Ge),v(7,el),v(8,ke),v(9,_e)],Cx);var _f=class extends P{constructor(t,n){super();this.widget=t;this._register(N.filter(this.widget.onDidChangeSelection,i=>Js(i.browserEvent))(i=>this.onSelectionFromKeyboard(i))),this._register(this.widget.onPointer(i=>this.onPointer(i.element,i.browserEvent))),this._register(this.widget.onMouseDblClick(i=>this.onMouseDblClick(i.element,i.browserEvent))),typeof n?.openOnSingleClick!="boolean"&&n?.configurationService?(this.openOnSingleClick=n?.configurationService.getValue(Px)!=="doubleClick",this._register(n?.configurationService.onDidChangeConfiguration(i=>{i.affectsConfiguration(Px)&&(this.openOnSingleClick=n?.configurationService.getValue(Px)!=="doubleClick")}))):this.openOnSingleClick=n?.openOnSingleClick??!0}openOnSingleClick;_onDidOpen=this._register(new x);onDidOpen=this._onDidOpen.event;onSelectionFromKeyboard(t){if(t.elements.length!==1)return;let n=t.browserEvent,i=typeof n.preserveFocus=="boolean"?n.preserveFocus:!0,o=typeof n.pinned=="boolean"?n.pinned:!i;this._open(this.getSelectedElement(),i,o,!1,t.browserEvent)}onPointer(t,n){if(!this.openOnSingleClick||n.detail===2)return;let o=n.button===1,s=!0,a=o,l=n.ctrlKey||n.metaKey||n.altKey;this._open(t,s,a,l,n)}onMouseDblClick(t,n){if(!n)return;let i=n.target;if(i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&n.offsetX<16)return;let s=!1,a=!0,l=n.ctrlKey||n.metaKey||n.altKey;this._open(t,s,a,l,n)}_open(t,n,i,o,s){t&&this._onDidOpen.fire({editorOptions:{preserveFocus:n,pinned:i,revealIfVisible:!0},sideBySide:o,element:t,browserEvent:s})}},Bx=class extends _f{widget;constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}},jR=class extends _f{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}},YR=class extends _f{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelection()[0]??void 0}};function q8(r){let e=!1;return t=>{if(t.toKeyCodeChord().isModifierKey())return!1;if(e)return e=!1,!1;let n=r.softDispatch(t,t.target);return n.kind===1?(e=!0,!1):(e=!1,n.kind===0)}}var kx=class extends Fc{internals;get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,i,o,s,a,l,d){let{options:u,getTypeNavigationMode:p,disposable:h}=s.invokeFunction(Rf,o);super(e,t,n,i,u),this.disposables.add(h),this.internals=new Za(this,o,p,o.overrideStyles,a,l,d),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};kx=C([v(5,_e),v(6,Ge),v(7,el),v(8,ke)],kx);var Dx=class extends nh{internals;get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,i,o,s,a,l,d){let{options:u,getTypeNavigationMode:p,disposable:h}=s.invokeFunction(Rf,o);super(e,t,n,i,u),this.disposables.add(h),this.internals=new Za(this,o,p,o.overrideStyles,a,l,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};Dx=C([v(5,_e),v(6,Ge),v(7,el),v(8,ke)],Dx);var _x=class extends Tx{internals;get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,i,o,s,a,l,d,u){let{options:p,getTypeNavigationMode:h,disposable:m}=a.invokeFunction(Rf,s);super(e,t,n,i,o,p),this.disposables.add(m),this.internals=new Za(this,s,h,s.overrideStyles,l,d,u),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles!==void 0&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};_x=C([v(6,_e),v(7,Ge),v(8,el),v(9,ke)],_x);var Rx=class extends Cf{internals;get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,i,o,s,a,l,d,u){let{options:p,getTypeNavigationMode:h,disposable:m}=a.invokeFunction(Rf,s);super(e,t,n,i,o,p),this.disposables.add(m),this.internals=new Za(this,s,h,s.overrideStyles,l,d,u),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};Rx=C([v(6,_e),v(7,Ge),v(8,el),v(9,ke)],Rx);var Lx=class extends xx{internals;get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,i,o,s,a,l,d,u,p){let{options:h,getTypeNavigationMode:m,disposable:f}=l.invokeFunction(Rf,a);super(e,t,n,i,o,s,h),this.disposables.add(f),this.internals=new Za(this,a,m,a.overrideStyles,d,u,p),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};Lx=C([v(7,_e),v(8,Ge),v(9,el),v(10,ke)],Lx);function iU(r){let e=r.getValue(ZR);if(e==="highlight")return 0;if(e==="filter")return 1;let t=r.getValue(Ax);if(t==="simple"||t==="highlight")return 0;if(t==="filter")return 1}function rU(r){let e=r.getValue(t0);if(e==="fuzzy")return 0;if(e==="contiguous")return 1}function Rf(r,e){let t=r.get(ke),n=r.get(jp),i=r.get(Ge),o=r.get(_e),s=()=>{let h=i.getContextKeyValue(tU);if(h==="automatic")return 0;if(h==="trigger")return 1;if(i.getContextKeyValue(nU)===!1)return 1;let f=t.getValue(e0);if(f==="automatic")return 0;if(f==="trigger")return 1},a=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!t.getValue(fo),[l,d]=o.invokeFunction(Hx,e),u=e.paddingBottom,p=e.renderIndentGuides!==void 0?e.renderIndentGuides:t.getValue(Ox);return{getTypeNavigationMode:s,disposable:d,options:{keyboardSupport:!1,...l,indent:typeof t.getValue(Df)=="number"?t.getValue(Df):void 0,renderIndentGuides:p,smoothScrolling:!!t.getValue(ys),defaultFindMode:iU(t),defaultFindMatchType:rU(t),horizontalScrolling:a,scrollByPage:!!t.getValue(vs),paddingBottom:u,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:e.expandOnlyOnTwistieClick??t.getValue(Mx)==="doubleClick",contextViewProvider:n,findWidgetStyles:G2,enableStickyScroll:!!t.getValue(Nx),stickyScrollMaxItemCount:Number(t.getValue(Fx))}}}var Za=class{constructor(e,t,n,i,o,s,a){this.tree=e;this.contextKeyService=Wx(o,e),this.disposables.push(zx(this.contextKeyService,e)),this.listSupportsMultiSelect=Ux.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),Vx.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.listSupportFindWidget=V8.bindTo(this.contextKeyService),this.listSupportFindWidget.set(t.findWidgetEnabled??!0),this.hasSelectionOrFocus=XR.bindTo(this.contextKeyService),this.hasDoubleSelection=QR.bindTo(this.contextKeyService),this.hasMultiSelection=JR.bindTo(this.contextKeyService),this.treeElementCanCollapse=W8.bindTo(this.contextKeyService),this.treeElementHasParent=z8.bindTo(this.contextKeyService),this.treeElementCanExpand=H8.bindTo(this.contextKeyService),this.treeElementHasChild=K8.bindTo(this.contextKeyService),this.treeFindOpen=G8.bindTo(this.contextKeyService),this.treeStickyScrollFocused=eU.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=la(a),this.updateStyleOverrides(i);let d=()=>{let p=e.getFocus()[0];if(!p)return;let h=e.getNode(p);this.treeElementCanCollapse.set(h.collapsible&&!h.collapsed),this.treeElementHasParent.set(!!e.getParentElement(p)),this.treeElementCanExpand.set(h.collapsible&&h.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(p))},u=new Set;u.add(tU),u.add(nU),this.disposables.push(this.contextKeyService,s.register(e),e.onDidChangeSelection(()=>{let p=e.getSelection(),h=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(p.length>0||h.length>0),this.hasMultiSelection.set(p.length>1),this.hasDoubleSelection.set(p.length===2)})}),e.onDidChangeFocus(()=>{let p=e.getSelection(),h=e.getFocus();this.hasSelectionOrFocus.set(p.length>0||h.length>0),d()}),e.onDidChangeCollapseState(d),e.onDidChangeModel(d),e.onDidChangeFindOpenState(p=>this.treeFindOpen.set(p)),e.onDidChangeStickyScrollFocused(p=>this.treeStickyScrollFocused.set(p)),a.onDidChangeConfiguration(p=>{let h={};if(p.affectsConfiguration(Bc)&&(this._useAltAsMultipleSelectionModifier=la(a)),p.affectsConfiguration(Df)){let m=a.getValue(Df);h={...h,indent:m}}if(p.affectsConfiguration(Ox)&&t.renderIndentGuides===void 0){let m=a.getValue(Ox);h={...h,renderIndentGuides:m}}if(p.affectsConfiguration(ys)){let m=!!a.getValue(ys);h={...h,smoothScrolling:m}}if(p.affectsConfiguration(ZR)||p.affectsConfiguration(Ax)){let m=iU(a);h={...h,defaultFindMode:m}}if(p.affectsConfiguration(e0)||p.affectsConfiguration(Ax)){let m=n();h={...h,typeNavigationMode:m}}if(p.affectsConfiguration(t0)){let m=rU(a);h={...h,defaultFindMatchType:m}}if(p.affectsConfiguration(fo)&&t.horizontalScrolling===void 0){let m=!!a.getValue(fo);h={...h,horizontalScrolling:m}}if(p.affectsConfiguration(vs)){let m=!!a.getValue(vs);h={...h,scrollByPage:m}}if(p.affectsConfiguration(Mx)&&t.expandOnlyOnTwistieClick===void 0&&(h={...h,expandOnlyOnTwistieClick:a.getValue(Mx)==="doubleClick"}),p.affectsConfiguration(Nx)){let m=a.getValue(Nx);h={...h,enableStickyScroll:m}}if(p.affectsConfiguration(Fx)){let m=Math.max(1,a.getValue(Fx));h={...h,stickyScrollMaxItemCount:m}}if(p.affectsConfiguration(sa)){let m=a.getValue(sa);h={...h,mouseWheelScrollSensitivity:m}}if(p.affectsConfiguration(aa)){let m=a.getValue(aa);h={...h,fastScrollSensitivity:m}}Object.keys(h).length>0&&e.updateOptions(h)}),this.contextKeyService.onDidChangeContext(p=>{p.affectsSome(u)&&e.updateOptions({typeNavigationMode:n()})})),this.navigator=new YR(e,{configurationService:a,...t}),this.disposables.push(this.navigator)}contextKeyService;listSupportsMultiSelect;listSupportFindWidget;hasSelectionOrFocus;hasDoubleSelection;hasMultiSelection;treeElementCanCollapse;treeElementHasParent;treeElementCanExpand;treeElementHasChild;treeFindOpen;treeStickyScrollFocused;_useAltAsMultipleSelectionModifier;disposables=[];navigator;get onDidOpen(){return this.navigator.onDidOpen}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?xf(e):th)}dispose(){this.disposables=vt(this.disposables)}};Za=C([v(4,Ge),v(5,el),v(6,ke)],Za);var $8=Ce.as(Sr.Configuration);$8.registerConfiguration({id:"workbench",order:7,title:c("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[Bc]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[c("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),c("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:c({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[Px]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:c({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[fo]:{type:"boolean",default:!1,description:c("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[vs]:{type:"boolean",default:!1,description:c("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[Df]:{type:"number",default:8,minimum:4,maximum:40,description:c("tree indent setting","Controls tree indentation in pixels.")},[Ox]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:c("render tree indent guides","Controls whether the tree should render indent guides.")},[ys]:{type:"boolean",default:!1,description:c("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[sa]:{type:"number",default:1,markdownDescription:c("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[aa]:{type:"number",default:5,markdownDescription:c("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[ZR]:{type:"string",enum:["highlight","filter"],enumDescriptions:[c("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),c("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:c("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[Ax]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[c("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),c("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),c("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:c("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:c("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[t0]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[c("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),c("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:c("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[Mx]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:c("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[Nx]:{type:"boolean",default:!0,description:c("sticky scroll","Controls whether sticky scrolling is enabled in trees.")},[Fx]:{type:"number",minimum:1,default:7,markdownDescription:c("sticky scroll maximum items","Controls the number of sticky elements displayed in the tree when {0} is enabled.","`#workbench.tree.enableStickyScroll#`")},[e0]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:c("typeNavigationMode2","Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}});var j8=mo;var oU=A("extensionManagementServerService"),n0=yr.asBrowserUri("vs/workbench/services/extensionManagement/common/media/defaultIcon.png").toString(!0),zRt=j8,HRt={id:"extensions",order:30,title:c("extensionsConfigurationTitle","Extensions"),type:"object"};var KRt=A("extensionEnablementService"),GRt=A("IWebExtensionsScannerService");var O0t=c("views log","Views"),sU=Ne("default-view-icon",z.window,c("defaultViewIcon","Default view icon.")),Lf;(t=>(t.ViewContainersRegistry="workbench.registry.view.containers",t.ViewsRegistry="workbench.registry.view"))(Lf||={});function Si(r){switch(r){case 0:return"sidebar";case 1:return"panel";case 2:return"auxiliarybar"}}var i0=class extends P{_onDidRegister=this._register(new x);onDidRegister=this._onDidRegister.event;_onDidDeregister=this._register(new x);onDidDeregister=this._onDidDeregister.event;viewContainers=new Map;defaultViewContainers=[];get all(){return[...this.viewContainers.values()].flat()}registerViewContainer(e,t,n){let i=this.get(e.id);if(i)return i;let o=e;return o.openCommandActionDescriptor=n?.doNotRegisterOpenCommand?void 0:o.openCommandActionDescriptor??{id:o.id},Qh(this.viewContainers,t,[]).push(o),n?.isDefault&&this.defaultViewContainers.push(o),this._onDidRegister.fire({viewContainer:o,viewContainerLocation:t}),o}deregisterViewContainer(e){for(let t of this.viewContainers.keys()){let n=this.viewContainers.get(t),i=n?.indexOf(e);if(i!==-1){n?.splice(i,1),n.length===0&&this.viewContainers.delete(t),this._onDidDeregister.fire({viewContainer:e,viewContainerLocation:t});return}}}get(e){return this.all.filter(t=>t.id===e)[0]}getViewContainers(e){return[...this.viewContainers.get(e)||[]]}getViewContainerLocation(e){return[...this.viewContainers.keys()].filter(t=>this.getViewContainers(t).filter(n=>n?.id===e.id).length>0)[0]}getDefaultViewContainer(e){return this.defaultViewContainers.find(t=>this.getViewContainerLocation(t)===e)}};Ce.add(Lf.ViewContainersRegistry,new i0);function Y8(r,e){let t=r.group??"9_more",n=e.group??"9_more";return t!==n?t.localeCompare(n):(r.order??5)-(e.order??5)}var r0=class extends P{_onViewsRegistered=this._register(new x);onViewsRegistered=this._onViewsRegistered.event;_onViewsDeregistered=this._register(new x);onViewsDeregistered=this._onViewsDeregistered.event;_onDidChangeContainer=this._register(new x);onDidChangeContainer=this._onDidChangeContainer.event;_onDidChangeViewWelcomeContent=this._register(new x);onDidChangeViewWelcomeContent=this._onDidChangeViewWelcomeContent.event;_viewContainers=[];_views=new Map;_viewWelcomeContents=new Nd;registerViews(e,t){this.registerViews2([{views:e,viewContainer:t}])}registerViews2(e){e.forEach(({views:t,viewContainer:n})=>this.addViews(t,n)),this._onViewsRegistered.fire(e)}deregisterViews(e,t){let n=this.removeViews(e,t);n.length&&this._onViewsDeregistered.fire({views:n,viewContainer:t})}moveViews(e,t){for(let n of this._views.keys())if(n!==t){let i=this.removeViews(e,n);i.length&&(this.addViews(i,t),this._onDidChangeContainer.fire({views:i,from:n,to:t}))}}getViews(e){return this._views.get(e)||[]}getView(e){for(let t of this._viewContainers){let n=(this._views.get(t)||[]).filter(i=>i.id===e)[0];if(n)return n}return null}getViewContainer(e){for(let t of this._viewContainers)if((this._views.get(t)||[]).filter(i=>i.id===e)[0])return t;return null}registerViewWelcomeContent(e,t){return this._viewWelcomeContents.add(e,t),this._onDidChangeViewWelcomeContent.fire(e),ie(()=>{this._viewWelcomeContents.delete(e,t),this._onDidChangeViewWelcomeContent.fire(e)})}registerViewWelcomeContent2(e,t){let n=new Map;for(let[i,o]of t)this._viewWelcomeContents.add(e,o),n.set(i,ie(()=>{this._viewWelcomeContents.delete(e,o),this._onDidChangeViewWelcomeContent.fire(e)}));return this._onDidChangeViewWelcomeContent.fire(e),n}getViewWelcomeContent(e){let t=[];return this._viewWelcomeContents.forEach(e,n=>t.push(n)),t.sort(Y8)}addViews(e,t){let n=this._views.get(t);n||(n=[],this._views.set(t,n),this._viewContainers.push(t));for(let i of e){if(this.getView(i.id)!==null)throw new Error(c("duplicateId","A view with id '{0}' is already registered",i.id));n.push(i)}}removeViews(e,t){let n=this._views.get(t);if(!n)return[];let i=[],o=[];for(let s of n)e.includes(s)?i.push(s):o.push(s);return i.length&&(o.length?this._views.set(t,o):(this._views.delete(t),this._viewContainers.splice(this._viewContainers.indexOf(t),1))),i}};Ce.add(Lf.ViewsRegistry,new r0);var $i=A("viewDescriptorService");var Z0t=Ne("extensions-editor-label-icon",z.extensions,c("extensionsEditorLabelIcon","Icon of the extensions editor label."));var Pf=A("extensionsWorkbenchService");var Kx=class extends P{constructor(t,n){super();this.containers=t;this._register(n.onChange(this.update,this))}set extension(t){this.containers.forEach(n=>n.extension=t)}update(t){for(let n of this.containers)t&&n.extension?Hn(n.extension.identifier,t.identifier)&&(n.extension.server&&t.server&&n.extension.server!==t.server?n.updateWhenCounterExtensionChanges&&n.update():n.extension=t):n.update()}};Kx=C([v(1,Pf)],Kx);var WLt=new V("hasOutdatedExtensions",!1),zLt=new V("hasGallery",!1);var HLt=new me("extensionsSearchActionsMenu");var YLt=Ne("extensions-view-icon",z.extensions,c("extensionsViewIcon","View icon of the extensions view.")),XLt=Ne("extensions-manage",z.gear,c("manageExtensionIcon","Icon for the 'Manage' action in the extensions view.")),QLt=Ne("extensions-clear-search-results",z.clearAll,c("clearSearchResultsIcon","Icon for the 'Clear Search Result' action in the extensions view.")),JLt=Ne("extensions-refresh",z.refresh,c("refreshIcon","Icon for the 'Refresh' action in the extensions view.")),ZLt=Ne("extensions-filter",z.filter,c("filterIcon","Icon for the 'Filter' action in the extensions view.")),ePt=Ne("extensions-install-local-in-remote",z.cloudDownload,c("installLocalInRemoteIcon","Icon for the 'Install Local Extension in Remote' action in the extensions view.")),tPt=Ne("extensions-install-workspace-recommended",z.cloudDownload,c("installWorkspaceRecommendedIcon","Icon for the 'Install Workspace Recommended Extensions' action in the extensions view.")),nPt=Ne("extensions-configure-recommended",z.pencil,c("configureRecommendedIcon","Icon for the 'Configure Recommended Extensions' action in the extensions view.")),iPt=Ne("extensions-sync-enabled",z.sync,c("syncEnabledIcon","Icon to indicate that an extension is synced.")),rPt=Ne("extensions-sync-ignored",z.syncIgnored,c("syncIgnoredIcon","Icon to indicate that an extension is ignored when syncing.")),oPt=Ne("extensions-remote",z.remote,c("remoteIcon","Icon to indicate that an extension is remote in the extensions view and editor.")),sPt=Ne("extensions-install-count",z.cloudDownload,c("installCountIcon","Icon shown along with the install count in the extensions view and editor.")),aPt=Ne("extensions-rating",z.star,c("ratingIcon","Icon shown along with the rating in the extensions view and editor.")),lPt=Ne("extensions-verified-publisher",z.verifiedFilled,c("verifiedPublisher","Icon used for the verified extension publisher in the extensions view and editor.")),dPt=Ne("extensions-pre-release",z.versions,c("preReleaseIcon","Icon shown for extensions having pre-release versions in extensions view and editor.")),cPt=Ne("extensions-sponsor",z.heartFilled,c("sponsorIcon","Icon used for sponsoring extensions in the extensions view and editor.")),uPt=Ne("extensions-star-full",z.starFull,c("starFullIcon","Full star icon used for the rating in the extensions editor.")),pPt=Ne("extensions-star-half",z.starHalf,c("starHalfIcon","Half star icon used for the rating in the extensions editor.")),hPt=Ne("extensions-star-empty",z.starEmpty,c("starEmptyIcon","Empty star icon used for the rating in the extensions editor.")),aU=Ne("extensions-error-message",z.error,c("errorIcon","Icon shown with a error message in the extensions editor.")),lU=Ne("extensions-warning-message",z.warning,c("warningIcon","Icon shown with a warning message in the extensions editor.")),mPt=Ne("extensions-info-message",z.info,c("infoIcon","Icon shown with an info message in the extensions editor.")),gPt=Ne("extension-workspace-trust",z.shield,c("trustIcon","Icon shown with a workspace trust message in the extension editor.")),fPt=Ne("extension-activation-time",z.history,c("activationtimeIcon","Icon shown with a activation time message in the extension editor."));var fd=class extends bS{constructor(t,n,i,o,s,a,l,d,u,p,h,m,f,g,y,T){super(fd.ID,t,n,i,p);this.contextKeyService=o;this._extensionsWorkbenchService=s;this._extensionService=a;this._notificationService=l;this._contextMenuService=d;this._instantiationService=u;this._labelService=h;this._environmentService=m;this._clipboardService=f;this._extensionFeaturesManagementService=g;this._hoverService=y;this._menuService=T;this._list=null,this._elements=null,this._updateSoon=this._register(new Bn(()=>this._updateExtensions(),200)),this._register(this._extensionService.onDidChangeExtensionsStatus(()=>this._updateSoon.schedule())),this._register(this._extensionFeaturesManagementService.onDidChangeAccessData(()=>this._updateSoon.schedule())),this._updateExtensions()}static ID="workbench.editor.runtimeExtensions";_list;_elements;_updateSoon;async _updateExtensions(){this._elements=await this._resolveExtensions(),this._list?.splice(0,this._list.length,this._elements)}async _resolveExtensions(){await this._extensionService.whenInstalledExtensionsRegistered();let t=this._extensionService.extensions.filter(h=>!!h.main||!!h.browser),n=new Vr,i=await this._extensionsWorkbenchService.queryLocal();for(let h of i)n.set(h.identifier.id,h);let o=this._extensionService.getExtensionsStatus(),s=new Vr,a=this._getProfileInfo();if(a){let h=a.startTime;for(let m=0,f=a.deltas.length;m<f;m++){let g=a.ids[m],y=a.deltas[m],T=s.get(g);T||(T=[],s.set(g,T)),T.push(h),h=h+y,T.push(h)}}let l=[];for(let h=0,m=t.length;h<m;h++){let f=t[h],g=null;if(a){let y=s.get(f.identifier)||[],T=0;for(let E=0,D=y.length/2;E<D;E++){let _=y[2*E],O=y[2*E+1];T+=O-_}g={segments:y,totalTime:T}}l[h]={originalIndex:h,description:f,marketplaceInfo:n.get(f.identifier),status:o[f.identifier.value],profileInfo:g||void 0,unresponsiveProfile:this._getUnresponsiveProfile(f.identifier)}}l=l.filter(h=>h.status.activationStarted);let d=h=>h.unresponsiveProfile===a,u=h=>h.profileInfo?.totalTime??0,p=h=>(h.status.activationTimes?.codeLoadingTime??0)+(h.status.activationTimes?.activateCallTime??0);return l=l.sort((h,m)=>d(h)||d(m)?+d(m)-+d(h):u(h)||u(m)?u(m)-u(h):p(h)||p(m)?p(m)-p(h):h.originalIndex-m.originalIndex),l}createEditor(t){t.classList.add("runtime-extensions-editor");let n="runtimeExtensionElementTemplate",i=new class{getHeight(s){return 70}getTemplateId(s){return n}},o={templateId:n,renderTemplate:s=>{let a=Ie(s,ue(".extension")),l=Ie(a,ue(".icon-container")),d=Ie(l,ue("img.icon")),u=Ie(a,ue("div.desc")),p=Ie(u,ue(".header-container")),h=Ie(p,ue(".header")),m=Ie(h,ue("div.name")),f=Ie(h,ue("span.version")),g=Ie(u,ue("div.msg")),y=new Ao(u);y.onDidRun(({error:O})=>O&&this._notificationService.error(O));let T=Ie(a,ue(".time")),E=Ie(T,ue("div.activation-time")),D=Ie(T,ue("div.profile-time"));return{root:s,element:a,icon:d,name:m,version:f,actionbar:y,activationTime:E,profileTime:D,msgContainer:g,disposables:[y],elementDisposables:[]}},renderElement:(s,a,l)=>{l.elementDisposables=vt(l.elementDisposables),l.root.classList.toggle("odd",a%2===1),l.elementDisposables.push(K(l.icon,"error",()=>l.icon.src=s.marketplaceInfo?.iconUrlFallback||n0,{once:!0})),l.icon.src=s.marketplaceInfo?.iconUrl||n0,l.icon.complete?l.icon.style.visibility="inherit":(l.icon.style.visibility="hidden",l.icon.onload=()=>l.icon.style.visibility="inherit"),l.name.textContent=(s.marketplaceInfo?.displayName||s.description.identifier.value).substr(0,50),l.version.textContent=s.description.version;let d=s.status.activationTimes;if(d){let f=d.codeLoadingTime+d.activateCallTime;l.activationTime.textContent=d.activationReason.startup?`Startup Activation: ${f}ms`:`Activation: ${f}ms`}else l.activationTime.textContent="Activating...";l.actionbar.clear();let u=this._createSlowExtensionAction(s);if(u&&l.actionbar.push(u,{icon:!1,label:!0}),lu(s.status.runtimeErrors)){let f=this._createReportExtensionIssueAction(s);f&&l.actionbar.push(f,{icon:!1,label:!0})}let p;if(d){let f=d.activationReason.extensionId.value,g=d.activationReason.activationEvent;if(g==="*")p=c({key:"starActivation",comment:["{0} will be an extension identifier"]},"Activated by {0} on start-up",f);else if(/^workspaceContains:/.test(g)){let y=g.substr(18);y.indexOf("*")>=0||y.indexOf("?")>=0?p=c({key:"workspaceContainsGlobActivation",comment:["{0} will be a glob pattern","{1} will be an extension identifier"]},"Activated by {1} because a file matching {0} exists in your workspace",y,f):p=c({key:"workspaceContainsFileActivation",comment:["{0} will be a file name","{1} will be an extension identifier"]},"Activated by {1} because file {0} exists in your workspace",y,f)}else if(/^workspaceContainsTimeout:/.test(g)){let y=g.substr(25);p=c({key:"workspaceContainsTimeout",comment:["{0} will be a glob pattern","{1} will be an extension identifier"]},"Activated by {1} because searching for {0} took too long",y,f)}else if(g==="onStartupFinished")p=c({key:"startupFinishedActivation",comment:["This refers to an extension. {0} will be an activation event."]},"Activated by {0} after start-up finished",f);else if(/^onLanguage:/.test(g)){let y=g.substr(11);p=c("languageActivation","Activated by {1} because you opened a {0} file",y,f)}else p=c({key:"workspaceGenericActivation",comment:["{0} will be an activation event, like e.g. 'language:typescript', 'debug', etc.","{1} will be an extension identifier"]},"Activated by {1} on {0}",g,f)}else p=c("extensionActivating","Extension is activating...");if(l.elementDisposables.push(this._hoverService.setupManagedHover(Pt("mouse"),l.activationTime,p)),pn(l.msgContainer),this._getUnresponsiveProfile(s.description.identifier)){let f=ue("span",void 0,...Yr(" $(alert) Unresponsive")),g=c("unresponsive.title","Extension has caused the extension host to freeze.");l.elementDisposables.push(this._hoverService.setupManagedHover(Pt("mouse"),f,g)),l.msgContainer.appendChild(f)}if(lu(s.status.runtimeErrors)){let f=ue("span",void 0,...Yr(`$(bug) ${c("errors","{0} uncaught errors",s.status.runtimeErrors.length)}`));l.msgContainer.appendChild(f)}if(s.status.messages&&s.status.messages.length>0){let f=ue("span",void 0,...Yr(`$(alert) ${s.status.messages[0].message}`));l.msgContainer.appendChild(f)}let h=null;if(s.status.runningLocation&&s.status.runningLocation.equals(new cf(0)))h="$(globe) web worker";else if(s.description.extensionLocation.scheme===le.vscodeRemote){let f=this._labelService.getHostLabel(le.vscodeRemote,this._environmentService.remoteAuthority);f?h=`$(remote) ${f}`:h=`$(remote) ${s.description.extensionLocation.authority}`}else s.status.runningLocation&&s.status.runningLocation.affinity>0&&(h=s.status.runningLocation instanceof cf?`$(globe) web worker ${s.status.runningLocation.affinity+1}`:`$(server-process) local process ${s.status.runningLocation.affinity+1}`);if(h){let f=ue("span",void 0,...Yr(h));l.msgContainer.appendChild(f)}let m=Ce.as(QS.ExtensionFeaturesRegistry).getExtensionFeatures();for(let f of m){let g=this._extensionFeaturesManagementService.getAccessData(s.description.identifier,f.id);if(g){let y=g?.current?.status;if(y&&(l.msgContainer.appendChild(ue("span",void 0,`${f.label}: `)),l.msgContainer.appendChild(ue("span",void 0,...Yr(`$(${y.severity===Ip.Error?aU.id:lU.id}) ${y.message}`)))),g?.totalCount>0){let T=ue("span",void 0,`${c("requests count","{0} Requests: {1} (Overall)",f.label,g.totalCount)}${g.current?c("session requests count",", {0} (Session)",g.current.count):""}`);if(g.current){let E=c("requests count title","Last request was {0}.",n1(g.current.lastAccessed,!0,!0));l.elementDisposables.push(this._hoverService.setupManagedHover(Pt("mouse"),T,E))}l.msgContainer.appendChild(T)}}}s.profileInfo?l.profileTime.textContent=`Profile: ${(s.profileInfo.totalTime/1e3).toFixed(2)}ms`:l.profileTime.textContent=""},disposeTemplate:s=>{s.disposables=vt(s.disposables)}};this._list=this._instantiationService.createInstance(ih,"RuntimeExtensions",t,i,[o],{multipleSelectionSupport:!1,setRowLineHeight:!1,horizontalScrolling:!1,overrideStyles:{listBackground:Hr},accessibilityProvider:new class{getWidgetAriaLabel(){return c("runtimeExtensions","Runtime Extensions")}getAriaLabel(s){return s.description.name}}}),this._list.splice(0,this._list.length,this._elements||void 0),this._list.onContextMenu(s=>{if(!s.element)return;let a=[];a.push(new un("runtimeExtensionsEditor.action.copyId",c("copy id","Copy id ({0})",s.element.description.identifier.value),void 0,!0,()=>{this._clipboardService.writeText(s.element.description.identifier.value)}));let l=this._createReportExtensionIssueAction(s.element);l&&a.push(l),a.push(new Yt),s.element.marketplaceInfo&&(a.push(new un("runtimeExtensionsEditor.action.disableWorkspace",c("disable workspace","Disable (Workspace)"),void 0,!0,()=>this._extensionsWorkbenchService.setEnablement(s.element.marketplaceInfo,8))),a.push(new un("runtimeExtensionsEditor.action.disable",c("disable","Disable"),void 0,!0,()=>this._extensionsWorkbenchService.setEnablement(s.element.marketplaceInfo,7)))),a.push(new Yt);let d=this._menuService.getMenuActions(me.ExtensionEditorContextMenu,this.contextKeyService);$2(d,{primary:[],secondary:a}),this._contextMenuService.showContextMenu({getAnchor:()=>s.anchor,getActions:()=>a})})}layout(t){this._list?.layout(t.height)}};fd=C([v(1,Ot),v(2,_n),v(3,Ge),v(4,Pf),v(5,Kn),v(6,wr),v(7,Sn),v(8,_e),v(9,Xe),v(10,Gs),v(11,uo),v(12,XS),v(13,JS),v(14,No),v(15,ro)],fd);var OAt=A("issueService"),MAt=A("processService");var KAt=A("issueFormService"),dU=A("workbenchIssueService"),GAt=A("workbenchProcessService");var tl=class extends un{constructor(t,n){super(tl._id,tl._label,"extension-action report-issue");this.extension=t;this.issueService=n;this.enabled=t.isBuiltin||!!t.repository&&!!t.repository.url}static _id="workbench.extensions.action.reportExtensionIssue";static _label=c("reportExtensionIssue","Report Issue");async run(){await this.issueService.openReporter({extensionId:this.extension.identifier.value})}};tl=C([v(1,dU)],tl);var Uc=Qt,hn=class extends Bt{constructor(t,n){super(t,{homeDir:t.homeDir,tmpDir:t.tmpDir,userDataDir:t.userDataDir},n);this.configuration=t}get mainPid(){return this.configuration.mainPid}get machineId(){return this.configuration.machineId}get sqmId(){return this.configuration.sqmId}get devDeviceId(){return this.configuration.devDeviceId}get remoteAuthority(){return this.configuration.remoteAuthority}get expectsResolverExtension(){return!!this.configuration.remoteAuthority?.includes("+")}get execPath(){return this.configuration.execPath}get backupPath(){return this.configuration.backupPath}get window(){return{id:this.configuration.windowId,colorScheme:this.configuration.colorScheme,maximized:this.configuration.maximized,accessibilitySupport:this.configuration.accessibilitySupport,perfMarks:this.configuration.perfMarks,isInitialStartup:this.configuration.isInitialStartup,isCodeCaching:typeof this.configuration.codeCachePath=="string"}}get windowLogsPath(){return Be(this.logsHome,`window${this.configuration.windowId}`)}get logFile(){return Be(this.windowLogsPath,"renderer.log")}get extHostLogsPath(){return Be(this.windowLogsPath,"exthost")}get extHostTelemetryLogFile(){return Be(this.extHostLogsPath,"extensionTelemetry.log")}get webviewExternalEndpoint(){return`${le.vscodeWebview}://{{uuid}}`}get skipReleaseNotes(){return!!this.args["skip-release-notes"]}get skipWelcome(){return!!this.args["skip-welcome"]}get logExtensionHostCommunication(){return!!this.args.logExtensionHostCommunication}get enableSmokeTestDriver(){return!!this.args["enable-smoke-test-driver"]}get extensionEnabledProposedApi(){if(Array.isArray(this.args["enable-proposed-api"]))return this.args["enable-proposed-api"];if("enable-proposed-api"in this.args)return[]}get os(){return this.configuration.os}get filesToOpenOrCreate(){return this.configuration.filesToOpenOrCreate}get filesToDiff(){return this.configuration.filesToDiff}get filesToMerge(){return this.configuration.filesToMerge}get filesToWait(){return this.configuration.filesToWait}};C([J],hn.prototype,"mainPid",1),C([J],hn.prototype,"machineId",1),C([J],hn.prototype,"sqmId",1),C([J],hn.prototype,"devDeviceId",1),C([J],hn.prototype,"remoteAuthority",1),C([J],hn.prototype,"expectsResolverExtension",1),C([J],hn.prototype,"execPath",1),C([J],hn.prototype,"backupPath",1),C([J],hn.prototype,"window",1),C([J],hn.prototype,"windowLogsPath",1),C([J],hn.prototype,"logFile",1),C([J],hn.prototype,"extHostLogsPath",1),C([J],hn.prototype,"extHostTelemetryLogFile",1),C([J],hn.prototype,"webviewExternalEndpoint",1),C([J],hn.prototype,"skipReleaseNotes",1),C([J],hn.prototype,"skipWelcome",1),C([J],hn.prototype,"logExtensionHostCommunication",1),C([J],hn.prototype,"enableSmokeTestDriver",1),C([J],hn.prototype,"extensionEnabledProposedApi",1),C([J],hn.prototype,"os",1),C([J],hn.prototype,"filesToOpenOrCreate",1),C([J],hn.prototype,"filesToDiff",1),C([J],hn.prototype,"filesToMerge",1),C([J],hn.prototype,"filesToWait",1);var Gx=class{static fromExtension(e){let t;if(e.bugs&&typeof e.bugs.url=="string"){let n=W.parse(e.bugs.url),i=/\/([^/]+)\/([^/]+)\/issues\/?$/.exec(e.bugs.url);i&&(t={base:n.with({path:null,fragment:null,query:null}).toString(!0),owner:i[1],repo:i[2]})}if(!t&&e.repository&&typeof e.repository.url=="string"){let n=W.parse(e.repository.url),i=/\/([^/]+)\/([^/]+)(\.git)?$/.exec(e.repository.url);i&&(t={base:n.with({path:null,fragment:null,query:null}).toString(!0),owner:i[1],repo:i[2]})}return t&&t.base.indexOf("github")===-1&&(t=void 0),t}},rh=class extends un{constructor(t,n,i){super("report.slow",c("cmd.reportOrShow","Performance Issue"),"extension-action report-issue");this.extension=t;this.profile=n;this._instantiationService=i;this.enabled=!!Gx.fromExtension(t)}async run(){let t=await this._instantiationService.invokeFunction(o0,this.extension,this.profile);t&&await t.run()}};rh=C([v(2,_e)],rh);async function o0(r,e,t){let n=Gx.fromExtension(e);if(!n)return;let i=r.get(tf),o=r.get(_e),s=`https://api.github.com/search/issues?q=is:issue+state:open+in:title+repo:${n.owner}/${n.repo}+%22Extension+causes+high+cpu+load%22`,a;try{a=await i.request({url:s},rt.None)}catch{return}let l=await nf(a);if(!l)return;let d=JSON.parse(l);if(!(!d||typeof d.total_count!="number"))return d.total_count===0?o.createInstance(Af,e,n,t):o.createInstance(Of,e,n,t)}var Af=class extends un{constructor(t,n,i,o,s,a,l,d,u){super("report.slow",c("cmd.report","Report Issue"));this.extension=t;this.repoInfo=n;this.profile=i;this._dialogService=o;this._openerService=s;this._productService=a;this._nativeHostService=l;this._environmentService=d;this._fileService=u}async run(){let t=Hp.rewriteAbsolutePaths(this.profile.data,"pii_removed"),n=Be(this._environmentService.tmpDir,`${this.extension.identifier.value}-unresponsive.cpuprofile.txt`);await this._fileService.writeFile(n,et.fromString(JSON.stringify(t,void 0,4)));let i=await this._nativeHostService.getOSProperties(),o=encodeURIComponent("Extension causes high cpu load"),s=`${i.type} ${i.arch} ${i.release}`,a=`:warning: Make sure to **attach** this file from your *home*-directory:
:warning:\`${n}\`

Find more details here: https://github.com/microsoft/vscode/wiki/Explain-extension-causes-high-cpu-load`,l=encodeURIComponent(`- Issue Type: \`Performance\`
- Extension Name: \`${this.extension.name}\`
- Extension Version: \`${this.extension.version}\`
- OS Version: \`${s}\`
- VS Code version: \`${this._productService.version}\`

${a}`),d=`${this.repoInfo.base}/${this.repoInfo.owner}/${this.repoInfo.repo}/issues/new/?body=${l}&title=${o}`;this._openerService.open(W.parse(d)),this._dialogService.info(c("attach.title","Did you attach the CPU-Profile?"),c("attach.msg","This is a reminder to make sure that you have not forgotten to attach '{0}' to the issue you have just created.",n.fsPath))}};Af=C([v(3,Gi),v(4,hs),v(5,gi),v(6,ad),v(7,Uc),v(8,dt)],Af);var Of=class extends un{constructor(t,n,i,o,s,a,l){super("show.slow",c("cmd.show","Show Issues"));this.extension=t;this.repoInfo=n;this.profile=i;this._dialogService=o;this._openerService=s;this._environmentService=a;this._fileService=l}async run(){let t=Hp.rewriteAbsolutePaths(this.profile.data,"pii_removed"),n=Be(this._environmentService.tmpDir,`${this.extension.identifier.value}-unresponsive.cpuprofile.txt`);await this._fileService.writeFile(n,et.fromString(JSON.stringify(t,void 0,4)));let i=`${this.repoInfo.base}/${this.repoInfo.owner}/${this.repoInfo.repo}/issues?utf8=\u2713&q=is%3Aissue+state%3Aopen+%22Extension+causes+high+cpu+load%22`;this._openerService.open(W.parse(i)),this._dialogService.info(c("attach.title","Did you attach the CPU-Profile?"),c("attach.msg2","This is a reminder to make sure that you have not forgotten to attach '{0}' to an existing performance issue.",n.fsPath))}};Of=C([v(3,Gi),v(4,hs),v(5,Uc),v(6,dt)],Of);var nl=A("extensionHostProfileService"),oh=new V("profileSessionState","none"),Mf=new V("extensionHostProfileRecorded",!1),s0=(i=>(i[i.None=0]="None",i[i.Starting=1]="Starting",i[i.Running=2]="Running",i[i.Stopping=3]="Stopping",i))(s0||{}),bo=class extends fd{constructor(t,n,i,o,s,a,l,d,u,p,h,m,f,g,y,T,E){super(t,n,i,o,s,a,l,d,u,p,h,m,f,y,T,E);this._extensionHostProfileService=g;this._profileInfo=this._extensionHostProfileService.lastProfile,this._extensionsHostRecorded=Mf.bindTo(o),this._profileSessionState=oh.bindTo(o),this._register(this._extensionHostProfileService.onDidChangeLastProfile(()=>{this._profileInfo=this._extensionHostProfileService.lastProfile,this._extensionsHostRecorded.set(!!this._profileInfo),this._updateExtensions()})),this._register(this._extensionHostProfileService.onDidChangeState(()=>{let D=this._extensionHostProfileService.state;this._profileSessionState.set(s0[D].toLowerCase())}))}_profileInfo;_extensionsHostRecorded;_profileSessionState;_getProfileInfo(){return this._profileInfo}_getUnresponsiveProfile(t){return this._extensionHostProfileService.getUnresponsiveProfile(t)}_createSlowExtensionAction(t){return t.unresponsiveProfile?this._instantiationService.createInstance(rh,t.description,t.unresponsiveProfile):null}_createReportExtensionIssueAction(t){return t.marketplaceInfo?this._instantiationService.createInstance(tl,t.description):null}};bo=C([v(1,Ot),v(2,_n),v(3,Ge),v(4,Pf),v(5,Kn),v(6,wr),v(7,Sn),v(8,_e),v(9,Xe),v(10,Gs),v(11,uo),v(12,XS),v(13,nl),v(14,JS),v(15,No),v(16,ro)],bo);var qx=class r extends je{static ID="workbench.extensions.action.extensionHostProfile";static LABEL=c("extensionHostProfileStart","Start Extension Host Profile");constructor(){super({id:r.ID,title:{value:r.LABEL,original:"Start Extension Host Profile"},precondition:oh.isEqualTo("none"),icon:z.circleFilled,menu:[{id:me.EditorTitle,when:X.and(Ec.isEqualTo(bo.ID),oh.notEqualsTo("running")),group:"navigation"},{id:me.ExtensionEditorContextMenu,when:oh.notEqualsTo("running"),group:"profiling"}]})}run(e){return e.get(nl).startProfiling(),Promise.resolve()}},$x=class r extends je{static ID="workbench.extensions.action.stopExtensionHostProfile";static LABEL=c("stopExtensionHostProfileStart","Stop Extension Host Profile");constructor(){super({id:r.ID,title:{value:r.LABEL,original:"Stop Extension Host Profile"},icon:z.debugStop,menu:[{id:me.EditorTitle,when:X.and(Ec.isEqualTo(bo.ID),oh.isEqualTo("running")),group:"navigation"},{id:me.ExtensionEditorContextMenu,when:oh.isEqualTo("running"),group:"profiling"}]})}run(e){return e.get(nl).stopProfiling(),Promise.resolve()}},jx=class r extends je{static LABEL=c("openExtensionHostProfile","Open Extension Host Profile");static ID="workbench.extensions.action.openExtensionHostProfile";constructor(){super({id:r.ID,title:{value:r.LABEL,original:"Open Extension Host Profile"},precondition:Mf,icon:z.graph,menu:[{id:me.EditorTitle,when:X.and(Ec.isEqualTo(bo.ID)),group:"navigation"},{id:me.ExtensionEditorContextMenu,when:Mf,group:"profiling"}]})}async run(e){let t=e.get(nl),n=e.get(Zi),i=e.get(Rn);t.lastProfileSavedTo||await n.executeCommand(Nf.ID),t.lastProfileSavedTo&&await i.openEditor({resource:t.lastProfileSavedTo,options:{revealIfOpened:!0,override:"jsProfileVisualizer.cpuprofile.table"}},VD)}},Nf=class r extends je{static LABEL=c("saveExtensionHostProfile","Save Extension Host Profile");static ID="workbench.extensions.action.saveExtensionHostProfile";constructor(){super({id:r.ID,title:{value:r.LABEL,original:"Save Extension Host Profile"},precondition:Mf,icon:z.saveAll,menu:[{id:me.EditorTitle,when:X.and(Ec.isEqualTo(bo.ID)),group:"navigation"},{id:me.ExtensionEditorContextMenu,when:Mf,group:"profiling"}]})}run(e){let t=e.get(uo),n=e.get(nl),i=e.get(dt),o=e.get(rF);return this._asyncRun(t,n,i,o)}async _asyncRun(e,t,n,i){let o=await i.showSaveDialog({title:c("saveprofile.dialogTitle","Save Extension Host Profile"),availableFileSystems:[le.file],defaultUri:Be(await i.defaultFilePath(),`CPU-${new Date().toISOString().replace(/[\-:]/g,"")}.cpuprofile`),filters:[{name:"CPU Profiles",extensions:["cpuprofile","txt"]}]});if(!o)return;let s=t.lastProfile,a=s?s.data:{},l=o.fsPath;e.isBuilt&&(a=Hp.rewriteAbsolutePaths(a,"piiRemoved"),l=l+".txt");let d=W.file(l);return t.lastProfileSavedTo=d,n.writeFile(d,et.fromString(JSON.stringify(s?s.data:{},null,"	")))}};var Yx=class extends je{constructor(){super({id:"workbench.extensions.action.debugExtensionHost",title:{value:c("debugExtensionHost","Start Debugging Extension Host In New Window"),original:"Start Debugging Extension Host In New Window"},category:ut.Developer,f1:!0,icon:z.debugStart,menu:{id:me.EditorTitle,when:Ec.isEqualTo(bo.ID),group:"navigation"}})}run(e){let t=e.get(ad),n=e.get(Gi),i=e.get(Kn),o=e.get(gi),s=e.get(_e),a=e.get(ia);i.getInspectPorts(1,!1).then(async l=>{if(l.length===0){(await n.confirm({message:c("restart1","Debug Extensions"),detail:c("restart2","In order to debug extensions a restart is required. Do you want to restart '{0}' now?",o.nameLong),primaryButton:c({key:"restart3",comment:["&& denotes a mnemonic"]},"&&Restart")})).confirmed&&await t.relaunch({addArgs:[`--inspect-extensions=${yS()}`]});return}l.length>1&&console.warn("There are multiple extension hosts available for debugging. Picking the first one..."),s.createInstance(sh).storeDebugOnNewWindow(l[0].port),a.openWindow()})}},sh=class{constructor(e){this._storageService=e}storeDebugOnNewWindow(e){this._storageService.store("debugExtensionHost.debugPort",e,-1,1)}getAndDeleteDebugPortIfSet(){let e=this._storageService.getNumber("debugExtensionHost.debugPort",-1);return e!==void 0&&this._storageService.remove("debugExtensionHost.debugPort",-1),e}};sh=C([v(0,Xe)],sh);var ah=class extends P{constructor(t,n,i){super();this._debugService=t;this._instantiationService=n;let s=this._instantiationService.createInstance(sh).getAndDeleteDebugPortIfSet();s!==void 0&&i.withProgress({location:15,title:c("debugExtensionHost.progress","Attaching Debugger To Extension Host")},async a=>{await this._debugService.startDebugging(void 0,{type:"node",name:c("debugExtensionHost.launch.name","Attach Extension Host"),request:"attach",port:s,trace:!0,resolveSourceMapLocations:null,eagerSources:!0,timeouts:{sourceMapMinPause:3e4,sourceMapCumulativePause:3e5}})})}};ah=C([v(0,F2),v(1,_e),v(2,Cg)],ah);var bd=class{constructor(e,t,n,i){this._host=e;this._port=t;this._extensionService=n;this._profilingService=i}async start(){let e=await this._profilingService.startProfiling({host:this._host,port:this._port});return{stop:ol(async()=>{let t=await this._profilingService.stopProfiling(e);await this._extensionService.whenInstalledExtensionsRegistered();let n=this._extensionService.extensions;return this._distill(t,n)})}}_distill(e,t){let n=Pl.forUris();for(let f of t)f.extensionLocation.scheme===le.file&&n.set(W.file(f.extensionLocation.fsPath),f);let i=e.nodes,o=new Map,s=new Map;for(let f of i)o.set(f.id,f);function a(f,g){if(g){if(g==="self"&&f.callFrame.url){let y;try{y=n.findSubstr(W.parse(f.callFrame.url))}catch{}y&&(g=y.identifier.value)}}else switch(f.callFrame.functionName){case"(root)":break;case"(program)":g="program";break;case"(garbage collector)":g="gc";break;default:g="self";break}if(s.set(f.id,g),f.children)for(let y of f.children){let T=o.get(y);T&&a(T,g)}}a(i[0],null);let l=e.samples||[],d=e.timeDeltas||[],u=[],p=[],h=0,m;for(let f=0;f<l.length;f++){let g=l[f],y=s.get(g);y!==m&&(m&&(p.push(m),u.push(h)),m=y??void 0,h=0),h+=d[f]}return m&&(p.push(m),u.push(h)),{startTime:e.startTime,endTime:e.endTime,deltas:u,ids:p,data:e,getAggregatedTimes:()=>{let f=new Map;for(let g=0;g<p.length;g++){let y=p[g];f.set(y,(f.get(y)||0)+u[g])}return f}}}};bd=C([v(2,Kn),v(3,e2)],bd);var vU=I("tab.activeBackground",Hr,c("tabActiveBackground","Active tab background color in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),DNt=I("tab.unfocusedActiveBackground",vU,c("tabUnfocusedActiveBackground","Active tab background color in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),X8=I("tab.inactiveBackground",{dark:"#2D2D2D",light:"#ECECEC",hcDark:null,hcLight:null},c("tabInactiveBackground","Inactive tab background color in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),_Nt=I("tab.unfocusedInactiveBackground",X8,c("tabUnfocusedInactiveBackground","Inactive tab background color in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),Vc=I("tab.activeForeground",{dark:B.white,light:"#333333",hcDark:B.white,hcLight:"#292929"},c("tabActiveForeground","Active tab foreground color in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),cU=I("tab.inactiveForeground",{dark:ce(Vc,.5),light:ce(Vc,.7),hcDark:B.white,hcLight:"#292929"},c("tabInactiveForeground","Inactive tab foreground color in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),RNt=I("tab.unfocusedActiveForeground",{dark:ce(Vc,.5),light:ce(Vc,.7),hcDark:B.white,hcLight:"#292929"},c("tabUnfocusedActiveForeground","Active tab foreground color in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),LNt=I("tab.unfocusedInactiveForeground",{dark:ce(cU,.5),light:ce(cU,.5),hcDark:B.white,hcLight:"#292929"},c("tabUnfocusedInactiveForeground","Inactive tab foreground color in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),uU=I("tab.hoverBackground",null,c("tabHoverBackground","Tab background color when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),PNt=I("tab.unfocusedHoverBackground",{dark:ce(uU,.5),light:ce(uU,.7),hcDark:null,hcLight:null},c("tabUnfocusedHoverBackground","Tab background color in an unfocused group when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),pU=I("tab.hoverForeground",null,c("tabHoverForeground","Tab foreground color when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),ANt=I("tab.unfocusedHoverForeground",{dark:ce(pU,.5),light:ce(pU,.5),hcDark:null,hcLight:null},c("tabUnfocusedHoverForeground","Tab foreground color in an unfocused group when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),ONt=I("tab.border",{dark:"#252526",light:"#F3F3F3",hcDark:pe,hcLight:pe},c("tabBorder","Border to separate tabs from each other. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),MNt=I("tab.lastPinnedBorder",{dark:lp,light:lp,hcDark:pe,hcLight:pe},c("lastPinnedTabBorder","Border to separate pinned tabs from other tabs. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),hU=I("tab.activeBorder",null,c("tabActiveBorder","Border on the bottom of an active tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),NNt=I("tab.unfocusedActiveBorder",{dark:ce(hU,.5),light:ce(hU,.7),hcDark:null,hcLight:null},c("tabActiveUnfocusedBorder","Border on the bottom of an active tab in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),a0=I("tab.activeBorderTop",{dark:null,light:null,hcDark:null,hcLight:"#B5200D"},c("tabActiveBorderTop","Border to the top of an active tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),FNt=I("tab.unfocusedActiveBorderTop",{dark:ce(a0,.5),light:ce(a0,.7),hcDark:null,hcLight:"#B5200D"},c("tabActiveUnfocusedBorderTop","Border to the top of an active tab in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),BNt=I("tab.selectedBorderTop",a0,c("tabSelectedBorderTop","Border to the top of a selected tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),UNt=I("tab.selectedBackground",vU,c("tabSelectedBackground","Background of a selected tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),VNt=I("tab.selectedForeground",Vc,c("tabSelectedForeground","Foreground of a selected tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),mU=I("tab.hoverBorder",null,c("tabHoverBorder","Border to highlight tabs when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),WNt=I("tab.unfocusedHoverBorder",{dark:ce(mU,.5),light:ce(mU,.7),hcDark:null,hcLight:pe},c("tabUnfocusedHoverBorder","Border to highlight tabs in an unfocused group when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),zNt=I("tab.dragAndDropBorder",{dark:Vc,light:Vc,hcDark:yt,hcLight:yt},c("tabDragAndDropBorder","Border between tabs to indicate that a tab can be inserted between two tabs. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),Qx=I("tab.activeModifiedBorder",{dark:"#3399CC",light:"#33AAEE",hcDark:null,hcLight:pe},c("tabActiveModifiedBorder","Border on the top of modified active tabs in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),gU=I("tab.inactiveModifiedBorder",{dark:ce(Qx,.5),light:ce(Qx,.5),hcDark:B.white,hcLight:pe},c("tabInactiveModifiedBorder","Border on the top of modified inactive tabs in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),HNt=I("tab.unfocusedActiveModifiedBorder",{dark:ce(Qx,.5),light:ce(Qx,.7),hcDark:B.white,hcLight:pe},c("unfocusedActiveModifiedBorder","Border on the top of modified active tabs in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),KNt=I("tab.unfocusedInactiveModifiedBorder",{dark:ce(gU,.5),light:ce(gU,.5),hcDark:B.white,hcLight:pe},c("unfocusedINactiveModifiedBorder","Border on the top of modified inactive tabs in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),GNt=I("editorPane.background",Hr,c("editorPaneBackground","Background color of the editor pane visible on the left and right side of the centered editor layout.")),qNt=I("editorGroup.emptyBackground",null,c("editorGroupEmptyBackground","Background color of an empty editor group. Editor groups are the containers of editors.")),$Nt=I("editorGroup.focusedEmptyBorder",{dark:null,light:null,hcDark:Hi,hcLight:Hi},c("editorGroupFocusedEmptyBorder","Border color of an empty editor group that is focused. Editor groups are the containers of editors.")),jNt=I("editorGroupHeader.tabsBackground",{dark:"#252526",light:"#F3F3F3",hcDark:null,hcLight:null},c("tabsContainerBackground","Background color of the editor group title header when tabs are enabled. Editor groups are the containers of editors.")),YNt=I("editorGroupHeader.tabsBorder",null,c("tabsContainerBorder","Border color of the editor group title header when tabs are enabled. Editor groups are the containers of editors.")),XNt=I("editorGroupHeader.noTabsBackground",Hr,c("editorGroupHeaderBackground",'Background color of the editor group title header when (`"workbench.editor.showTabs": "single"`). Editor groups are the containers of editors.')),QNt=I("editorGroupHeader.border",{dark:null,light:null,hcDark:pe,hcLight:pe},c("editorTitleContainerBorder","Border color of the editor group title header. Editor groups are the containers of editors.")),yU=I("editorGroup.border",{dark:"#444444",light:"#E7E7E7",hcDark:pe,hcLight:pe},c("editorGroupBorder","Color to separate multiple editor groups from each other. Editor groups are the containers of editors.")),IU=I("editorGroup.dropBackground",{dark:B.fromHex("#53595D").transparent(.5),light:B.fromHex("#2677CB").transparent(.18),hcDark:null,hcLight:B.fromHex("#0F4A85").transparent(.5)},c("editorDragAndDropBackground","Background color when dragging editors around. The color should have transparency so that the editor contents can still shine through.")),JNt=I("editorGroup.dropIntoPromptForeground",Fs,c("editorDropIntoPromptForeground","Foreground color of text shown over editors when dragging files. This text informs the user that they can hold shift to drop into the editor.")),ZNt=I("editorGroup.dropIntoPromptBackground",mi,c("editorDropIntoPromptBackground","Background color of text shown over editors when dragging files. This text informs the user that they can hold shift to drop into the editor.")),eFt=I("editorGroup.dropIntoPromptBorder",{dark:null,light:null,hcDark:pe,hcLight:pe},c("editorDropIntoPromptBorder","Border color of text shown over editors when dragging files. This text informs the user that they can hold shift to drop into the editor.")),tFt=I("sideBySideEditor.horizontalBorder",yU,c("sideBySideEditor.horizontalBorder","Color to separate two editors from each other when shown side by side in an editor group from top to bottom.")),nFt=I("sideBySideEditor.verticalBorder",yU,c("sideBySideEditor.verticalBorder","Color to separate two editors from each other when shown side by side in an editor group from left to right.")),l0=I("panel.background",Hr,c("panelBackground","Panel background color. Panels are shown below the editor area and contain views like output and integrated terminal.")),Q8=I("panel.border",{dark:B.fromHex("#808080").transparent(.35),light:B.fromHex("#808080").transparent(.35),hcDark:pe,hcLight:pe},c("panelBorder","Panel border color to separate the panel from the editor. Panels are shown below the editor area and contain views like output and integrated terminal.")),Ff=I("panelTitle.activeForeground",{dark:"#E7E7E7",light:"#424242",hcDark:B.white,hcLight:Hl},c("panelActiveTitleForeground","Title color for the active panel. Panels are shown below the editor area and contain views like output and integrated terminal.")),iFt=I("panelTitle.inactiveForeground",{dark:ce(Ff,.6),light:ce(Ff,.75),hcDark:B.white,hcLight:Hl},c("panelInactiveTitleForeground","Title color for the inactive panel. Panels are shown below the editor area and contain views like output and integrated terminal.")),rFt=I("panelTitle.activeBorder",{dark:Ff,light:Ff,hcDark:pe,hcLight:"#B5200D"},c("panelActiveTitleBorder","Border color for the active panel title. Panels are shown below the editor area and contain views like output and integrated terminal.")),oFt=I("panelInput.border",{dark:sp,light:B.fromHex("#ddd"),hcDark:sp,hcLight:sp},c("panelInputBorder","Input box border for inputs in the panel.")),sFt=I("panel.dropBorder",Ff,c("panelDragAndDropBorder","Drag and drop feedback color for the panel titles. Panels are shown below the editor area and contain views like output and integrated terminal.")),d0=I("panelSection.dropBackground",IU,c("panelSectionDragAndDropBackground","Drag and drop feedback color for the panel sections. The color should have transparency so that the panel sections can still shine through. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels.")),SU=I("panelSectionHeader.background",{dark:B.fromHex("#808080").transparent(.2),light:B.fromHex("#808080").transparent(.2),hcDark:null,hcLight:null},c("panelSectionHeaderBackground","Panel section header background color. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels.")),xU=I("panelSectionHeader.foreground",null,c("panelSectionHeaderForeground","Panel section header foreground color. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels.")),TU=I("panelSectionHeader.border",pe,c("panelSectionHeaderBorder","Panel section header border color used when multiple views are stacked vertically in the panel. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels.")),EU=I("panelSection.border",Q8,c("panelSectionBorder","Panel section border color used when multiple views are stacked horizontally in the panel. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels.")),wU=I("panelStickyScroll.background",l0,c("panelStickyScrollBackground","Background color of sticky scroll in the panel.")),CU=I("panelStickyScroll.border",null,c("panelStickyScrollBorder","Border color of sticky scroll in the panel.")),kU=I("panelStickyScroll.shadow",zl,c("panelStickyScrollShadow","Shadow color of sticky scroll in the panel.")),J8=I("outputView.background",null,c("outputViewBackground","Output view background color."));I("outputViewStickyScroll.background",J8,c("outputViewStickyScrollBackground","Output view sticky scroll background color."));var aFt=I("banner.background",{dark:Tr,light:zi(Tr,.3),hcDark:Tr,hcLight:Tr},c("banner.background","Banner background color. The banner is shown under the title bar of the window.")),lFt=I("banner.foreground",Bs,c("banner.foreground","Banner foreground color. The banner is shown under the title bar of the window.")),dFt=I("banner.iconForeground",Ro,c("banner.iconForeground","Banner icon color. The banner is shown under the title bar of the window.")),ca=I("statusBar.foreground",{dark:"#FFFFFF",light:"#FFFFFF",hcDark:"#FFFFFF",hcLight:Hl},c("statusBarForeground","Status bar foreground color when a workspace or folder is opened. The status bar is shown in the bottom of the window.")),DU=I("statusBar.noFolderForeground",ca,c("statusBarNoFolderForeground","Status bar foreground color when no folder is opened. The status bar is shown in the bottom of the window.")),_U=I("statusBar.background",{dark:"#007ACC",light:"#007ACC",hcDark:null,hcLight:null},c("statusBarBackground","Status bar background color when a workspace or folder is opened. The status bar is shown in the bottom of the window.")),RU=I("statusBar.noFolderBackground",{dark:"#68217A",light:"#68217A",hcDark:null,hcLight:null},c("statusBarNoFolderBackground","Status bar background color when no folder is opened. The status bar is shown in the bottom of the window.")),c0=I("statusBar.border",{dark:null,light:null,hcDark:pe,hcLight:pe},c("statusBarBorder","Status bar border color separating to the sidebar and editor. The status bar is shown in the bottom of the window.")),LU=I("statusBar.focusBorder",{dark:ca,light:ca,hcDark:null,hcLight:ca},c("statusBarFocusBorder","Status bar border color when focused on keyboard navigation. The status bar is shown in the bottom of the window.")),PU=I("statusBar.noFolderBorder",c0,c("statusBarNoFolderBorder","Status bar border color separating to the sidebar and editor when no folder is opened. The status bar is shown in the bottom of the window.")),cFt=I("statusBarItem.activeBackground",{dark:B.white.transparent(.18),light:B.white.transparent(.18),hcDark:B.white.transparent(.18),hcLight:B.black.transparent(.18)},c("statusBarItemActiveBackground","Status bar item background color when clicking. The status bar is shown in the bottom of the window.")),AU=I("statusBarItem.focusBorder",{dark:ca,light:ca,hcDark:null,hcLight:yt},c("statusBarItemFocusBorder","Status bar item border color when focused on keyboard navigation. The status bar is shown in the bottom of the window.")),ua=I("statusBarItem.hoverBackground",{dark:B.white.transparent(.12),light:B.white.transparent(.12),hcDark:B.white.transparent(.12),hcLight:B.black.transparent(.12)},c("statusBarItemHoverBackground","Status bar item background color when hovering. The status bar is shown in the bottom of the window.")),Uf=I("statusBarItem.hoverForeground",ca,c("statusBarItemHoverForeground","Status bar item foreground color when hovering. The status bar is shown in the bottom of the window.")),OU=I("statusBarItem.compactHoverBackground",{dark:B.white.transparent(.2),light:B.white.transparent(.2),hcDark:B.white.transparent(.2),hcLight:B.black.transparent(.2)},c("statusBarItemCompactHoverBackground","Status bar item background color when hovering an item that contains two hovers. The status bar is shown in the bottom of the window.")),uFt=I("statusBarItem.prominentForeground",ca,c("statusBarProminentItemForeground","Status bar prominent items foreground color. Prominent items stand out from other status bar entries to indicate importance. The status bar is shown in the bottom of the window.")),pFt=I("statusBarItem.prominentBackground",B.black.transparent(.5),c("statusBarProminentItemBackground","Status bar prominent items background color. Prominent items stand out from other status bar entries to indicate importance. The status bar is shown in the bottom of the window.")),hFt=I("statusBarItem.prominentHoverForeground",Uf,c("statusBarProminentItemHoverForeground","Status bar prominent items foreground color when hovering. Prominent items stand out from other status bar entries to indicate importance. The status bar is shown in the bottom of the window.")),mFt=I("statusBarItem.prominentHoverBackground",{dark:B.black.transparent(.3),light:B.black.transparent(.3),hcDark:B.black.transparent(.3),hcLight:null},c("statusBarProminentItemHoverBackground","Status bar prominent items background color when hovering. Prominent items stand out from other status bar entries to indicate importance. The status bar is shown in the bottom of the window.")),gFt=I("statusBarItem.errorBackground",{dark:zi(Hk,.4),light:zi(Hk,.4),hcDark:null,hcLight:"#B5200D"},c("statusBarErrorItemBackground","Status bar error items background color. Error items stand out from other status bar entries to indicate error conditions. The status bar is shown in the bottom of the window.")),fFt=I("statusBarItem.errorForeground",B.white,c("statusBarErrorItemForeground","Status bar error items foreground color. Error items stand out from other status bar entries to indicate error conditions. The status bar is shown in the bottom of the window.")),bFt=I("statusBarItem.errorHoverForeground",Uf,c("statusBarErrorItemHoverForeground","Status bar error items foreground color when hovering. Error items stand out from other status bar entries to indicate error conditions. The status bar is shown in the bottom of the window.")),vFt=I("statusBarItem.errorHoverBackground",ua,c("statusBarErrorItemHoverBackground","Status bar error items background color when hovering. Error items stand out from other status bar entries to indicate error conditions. The status bar is shown in the bottom of the window.")),yFt=I("statusBarItem.warningBackground",{dark:zi(Kr,.4),light:zi(Kr,.4),hcDark:null,hcLight:"#895503"},c("statusBarWarningItemBackground","Status bar warning items background color. Warning items stand out from other status bar entries to indicate warning conditions. The status bar is shown in the bottom of the window.")),IFt=I("statusBarItem.warningForeground",B.white,c("statusBarWarningItemForeground","Status bar warning items foreground color. Warning items stand out from other status bar entries to indicate warning conditions. The status bar is shown in the bottom of the window.")),SFt=I("statusBarItem.warningHoverForeground",Uf,c("statusBarWarningItemHoverForeground","Status bar warning items foreground color when hovering. Warning items stand out from other status bar entries to indicate warning conditions. The status bar is shown in the bottom of the window.")),xFt=I("statusBarItem.warningHoverBackground",ua,c("statusBarWarningItemHoverBackground","Status bar warning items background color when hovering. Warning items stand out from other status bar entries to indicate warning conditions. The status bar is shown in the bottom of the window.")),TFt=I("activityBar.background",{dark:"#333333",light:"#2C2C2C",hcDark:"#000000",hcLight:"#FFFFFF"},c("activityBarBackground","Activity bar background color. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),lh=I("activityBar.foreground",{dark:B.white,light:B.white,hcDark:B.white,hcLight:Hl},c("activityBarForeground","Activity bar item foreground color when it is active. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),EFt=I("activityBar.inactiveForeground",{dark:ce(lh,.4),light:ce(lh,.4),hcDark:B.white,hcLight:Hl},c("activityBarInActiveForeground","Activity bar item foreground color when it is inactive. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),wFt=I("activityBar.border",{dark:null,light:null,hcDark:pe,hcLight:pe},c("activityBarBorder","Activity bar border color separating to the side bar. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),CFt=I("activityBar.activeBorder",{dark:lh,light:lh,hcDark:pe,hcLight:pe},c("activityBarActiveBorder","Activity bar border color for the active item. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),kFt=I("activityBar.activeFocusBorder",{dark:null,light:null,hcDark:null,hcLight:"#B5200D"},c("activityBarActiveFocusBorder","Activity bar focus border color for the active item. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),DFt=I("activityBar.activeBackground",null,c("activityBarActiveBackground","Activity bar background color for the active item. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),_Ft=I("activityBar.dropBorder",{dark:lh,light:lh,hcDark:null,hcLight:null},c("activityBarDragAndDropBorder","Drag and drop feedback color for the activity bar items. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),MU=I("activityBarBadge.background",{dark:"#007ACC",light:"#007ACC",hcDark:"#000000",hcLight:"#0F4A85"},c("activityBarBadgeBackground","Activity notification badge background color. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),NU=I("activityBarBadge.foreground",B.white,c("activityBarBadgeForeground","Activity notification badge foreground color. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),Bf=I("activityBarTop.foreground",{dark:"#E7E7E7",light:"#424242",hcDark:B.white,hcLight:Hl},c("activityBarTop","Active foreground color of the item in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar.")),RFt=I("activityBarTop.activeBorder",{dark:Bf,light:Bf,hcDark:pe,hcLight:"#B5200D"},c("activityBarTopActiveFocusBorder","Focus border color for the active item in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar.")),LFt=I("activityBarTop.activeBackground",null,c("activityBarTopActiveBackground","Background color for the active item in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar.")),PFt=I("activityBarTop.inactiveForeground",{dark:ce(Bf,.6),light:ce(Bf,.75),hcDark:B.white,hcLight:Hl},c("activityBarTopInActiveForeground","Inactive foreground color of the item in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar.")),AFt=I("activityBarTop.dropBorder",Bf,c("activityBarTopDragAndDropBorder","Drag and drop feedback color for the items in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar.")),OFt=I("activityBarTop.background",null,c("activityBarTopBackground","Background color of the activity bar when set to top / bottom.")),MFt=I("profileBadge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:B.white,hcLight:B.black},c("profileBadgeBackground","Profile badge background color. The profile badge shows on top of the settings gear icon in the activity bar.")),NFt=I("profileBadge.foreground",{dark:B.white,light:"#333333",hcDark:B.black,hcLight:B.white},c("profileBadgeForeground","Profile badge foreground color. The profile badge shows on top of the settings gear icon in the activity bar.")),FFt=I("statusBarItem.remoteBackground",MU,c("statusBarItemHostBackground","Background color for the remote indicator on the status bar.")),Z8=I("statusBarItem.remoteForeground",NU,c("statusBarItemHostForeground","Foreground color for the remote indicator on the status bar.")),BFt=I("statusBarItem.remoteHoverForeground",Uf,c("statusBarRemoteItemHoverForeground","Foreground color for the remote indicator on the status bar when hovering.")),UFt=I("statusBarItem.remoteHoverBackground",{dark:ua,light:ua,hcDark:ua,hcLight:null},c("statusBarRemoteItemHoverBackground","Background color for the remote indicator on the status bar when hovering.")),VFt=I("statusBarItem.offlineBackground","#6c1717",c("statusBarItemOfflineBackground","Status bar item background color when the workbench is offline.")),WFt=I("statusBarItem.offlineForeground",Z8,c("statusBarItemOfflineForeground","Status bar item foreground color when the workbench is offline.")),zFt=I("statusBarItem.offlineHoverForeground",Uf,c("statusBarOfflineItemHoverForeground","Status bar item foreground hover color when the workbench is offline.")),HFt=I("statusBarItem.offlineHoverBackground",{dark:ua,light:ua,hcDark:ua,hcLight:null},c("statusBarOfflineItemHoverBackground","Status bar item background hover color when the workbench is offline.")),KFt=I("extensionBadge.remoteBackground",MU,c("extensionBadge.remoteBackground","Background color for the remote badge in the extensions view.")),GFt=I("extensionBadge.remoteForeground",NU,c("extensionBadge.remoteForeground","Foreground color for the remote badge in the extensions view.")),Jx=I("sideBar.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#000000",hcLight:"#FFFFFF"},c("sideBarBackground","Side bar background color. The side bar is the container for views like explorer and search.")),FU=I("sideBar.foreground",null,c("sideBarForeground","Side bar foreground color. The side bar is the container for views like explorer and search.")),qFt=I("sideBar.border",{dark:null,light:null,hcDark:pe,hcLight:pe},c("sideBarBorder","Side bar border color on the side separating to the editor. The side bar is the container for views like explorer and search.")),$Ft=I("sideBarTitle.background",Jx,c("sideBarTitleBackground","Side bar title background color. The side bar is the container for views like explorer and search.")),jFt=I("sideBarTitle.foreground",FU,c("sideBarTitleForeground","Side bar title foreground color. The side bar is the container for views like explorer and search.")),u0=I("sideBar.dropBackground",IU,c("sideBarDragAndDropBackground","Drag and drop feedback color for the side bar sections. The color should have transparency so that the side bar sections can still shine through. The side bar is the container for views like explorer and search. Side bar sections are views nested within the side bar.")),BU=I("sideBarSectionHeader.background",{dark:B.fromHex("#808080").transparent(.2),light:B.fromHex("#808080").transparent(.2),hcDark:null,hcLight:null},c("sideBarSectionHeaderBackground","Side bar section header background color. The side bar is the container for views like explorer and search. Side bar sections are views nested within the side bar.")),UU=I("sideBarSectionHeader.foreground",FU,c("sideBarSectionHeaderForeground","Side bar section header foreground color. The side bar is the container for views like explorer and search. Side bar sections are views nested within the side bar.")),p0=I("sideBarSectionHeader.border",pe,c("sideBarSectionHeaderBorder","Side bar section header border color. The side bar is the container for views like explorer and search. Side bar sections are views nested within the side bar.")),YFt=I("sideBarActivityBarTop.border",p0,c("sideBarActivityBarTopBorder","Border color between the activity bar at the top/bottom and the views.")),VU=I("sideBarStickyScroll.background",Jx,c("sideBarStickyScrollBackground","Background color of sticky scroll in the side bar.")),WU=I("sideBarStickyScroll.border",null,c("sideBarStickyScrollBorder","Border color of sticky scroll in the side bar.")),zU=I("sideBarStickyScroll.shadow",zl,c("sideBarStickyScrollShadow","Shadow color of sticky scroll in the side bar.")),da=I("titleBar.activeForeground",{dark:"#CCCCCC",light:"#333333",hcDark:"#FFFFFF",hcLight:"#292929"},c("titleBarActiveForeground","Title bar foreground when the window is active.")),HU=I("titleBar.inactiveForeground",{dark:ce(da,.6),light:ce(da,.6),hcDark:null,hcLight:"#292929"},c("titleBarInactiveForeground","Title bar foreground when the window is inactive.")),fU=I("titleBar.activeBackground",{dark:"#3C3C3C",light:"#DDDDDD",hcDark:"#000000",hcLight:"#FFFFFF"},c("titleBarActiveBackground","Title bar background when the window is active.")),XFt=I("titleBar.inactiveBackground",{dark:ce(fU,.6),light:ce(fU,.6),hcDark:null,hcLight:null},c("titleBarInactiveBackground","Title bar background when the window is inactive.")),QFt=I("titleBar.border",{dark:null,light:null,hcDark:pe,hcLight:pe},c("titleBarBorder","Title bar border color.")),e3=I("menubar.selectionForeground",da,c("menubarSelectionForeground","Foreground color of the selected menu item in the menubar.")),bU=I("menubar.selectionBackground",{dark:ag,light:ag,hcDark:null,hcLight:null},c("menubarSelectionBackground","Background color of the selected menu item in the menubar.")),JFt=I("menubar.selectionBorder",{dark:null,light:null,hcDark:yt,hcLight:yt},c("menubarSelectionBorder","Border color of the selected menu item in the menubar.")),ZFt=I("commandCenter.foreground",da,c("commandCenter-foreground","Foreground color of the command center"),!1),eBt=I("commandCenter.activeForeground",e3,c("commandCenter-activeForeground","Active foreground color of the command center"),!1),tBt=I("commandCenter.inactiveForeground",HU,c("commandCenter-inactiveForeground","Foreground color of the command center when the window is inactive"),!1),nBt=I("commandCenter.background",{dark:B.white.transparent(.05),hcDark:null,light:B.black.transparent(.05),hcLight:null},c("commandCenter-background","Background color of the command center"),!1),iBt=I("commandCenter.activeBackground",{dark:B.white.transparent(.08),hcDark:bU,light:B.black.transparent(.08),hcLight:bU},c("commandCenter-activeBackground","Active background color of the command center"),!1),rBt=I("commandCenter.border",{dark:ce(da,.2),hcDark:pe,light:ce(da,.2),hcLight:pe},c("commandCenter-border","Border color of the command center"),!1),oBt=I("commandCenter.activeBorder",{dark:ce(da,.3),hcDark:da,light:ce(da,.3),hcLight:da},c("commandCenter-activeBorder","Active border color of the command center"),!1),sBt=I("commandCenter.inactiveBorder",ce(HU,.25),c("commandCenter-inactiveBorder","Border color of the command center when the window is inactive"),!1),aBt=I("notificationCenter.border",{dark:dg,light:dg,hcDark:pe,hcLight:pe},c("notificationCenterBorder","Notifications center border color. Notifications slide in from the bottom right of the window.")),lBt=I("notificationToast.border",{dark:dg,light:dg,hcDark:pe,hcLight:pe},c("notificationToastBorder","Notification toast border color. Notifications slide in from the bottom right of the window.")),dBt=I("notifications.foreground",Fs,c("notificationsForeground","Notifications foreground color. Notifications slide in from the bottom right of the window.")),Xx=I("notifications.background",mi,c("notificationsBackground","Notifications background color. Notifications slide in from the bottom right of the window.")),cBt=I("notificationLink.foreground",Ay,c("notificationsLink","Notification links foreground color. Notifications slide in from the bottom right of the window.")),uBt=I("notificationCenterHeader.foreground",null,c("notificationCenterHeaderForeground","Notifications center header foreground color. Notifications slide in from the bottom right of the window.")),t3=I("notificationCenterHeader.background",{dark:tr(Xx,.3),light:zi(Xx,.05),hcDark:Xx,hcLight:Xx},c("notificationCenterHeaderBackground","Notifications center header background color. Notifications slide in from the bottom right of the window.")),pBt=I("notifications.border",t3,c("notificationsBorder","Notifications border color separating from other notifications in the notifications center. Notifications slide in from the bottom right of the window.")),hBt=I("notificationsErrorIcon.foreground",lg,c("notificationsErrorIconForeground","The color used for the icon of error notifications. Notifications slide in from the bottom right of the window.")),mBt=I("notificationsWarningIcon.foreground",Kr,c("notificationsWarningIconForeground","The color used for the icon of warning notifications. Notifications slide in from the bottom right of the window.")),gBt=I("notificationsInfoIcon.foreground",Ro,c("notificationsInfoIconForeground","The color used for the icon of info notifications. Notifications slide in from the bottom right of the window.")),fBt=I("window.activeBorder",{dark:null,light:null,hcDark:pe,hcLight:pe},c("windowActiveBorder","The color used for the border of the window when it is active. Only supported in the macOS and Linux desktop client when using the custom title bar.")),bBt=I("window.inactiveBorder",{dark:null,light:null,hcDark:pe,hcLight:pe},c("windowInactiveBorder","The color used for the border of the window when it is inactive. Only supported in the macOS and Linux desktop client when using the custom title bar."));var vd=A("viewsService");var n3={Quickaccess:"workbench.contributions.quickaccess"},h0=class{providers=[];defaultProvider=void 0;registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),ie(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return vn([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}clear(){let e=[...this.providers],t=this.defaultProvider;return this.providers=[],this.defaultProvider=void 0,()=>{this.providers=e,this.defaultProvider=t}}};Ce.add(n3.Quickaccess,new h0);var JBt=new Fn(()=>{let r=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:r,collatorIsNumeric:r.resolvedOptions().numeric}}),ZBt=new Fn(()=>({collator:new Intl.Collator(void 0,{numeric:!0})})),e2t=new Fn(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));var p2t=Object.freeze({score:0}),h2t=1<<18,m2t=1<<17;var m0=class{constructor(e){this.options=e}getItemLabel(e){return e.label}getItemDescription(e){if(!this.options?.skipDescription)return e.description}getItemPath(e){if(!this.options?.skipPath)return e.resource?.scheme===le.file?e.resource.fsPath:e.resource?.path}},B2t=new m0,Zx=A("quickInputService");var eT=class r extends P{static HEADER_SIZE=22;element;header;body;_expanded;_orientation;expandedSize=void 0;_headerVisible=!0;_collapsible=!0;_bodyRendered=!1;_minimumBodySize;_maximumBodySize;_ariaHeaderLabel;styles={dropBackground:void 0,headerBackground:void 0,headerBorder:void 0,headerForeground:void 0,leftBorder:void 0};animationTimer=void 0;_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;_onDidChangeExpansionState=this._register(new x);onDidChangeExpansionState=this._onDidChangeExpansionState.event;get ariaHeaderLabel(){return this._ariaHeaderLabel}set ariaHeaderLabel(e){this._ariaHeaderLabel=e,this.header.setAttribute("aria-label",this.ariaHeaderLabel)}get draggableElement(){return this.header}get dropTargetElement(){return this.element}get dropBackground(){return this.styles.dropBackground}get minimumBodySize(){return this._minimumBodySize}set minimumBodySize(e){this._minimumBodySize=e,this._onDidChange.fire(void 0)}get maximumBodySize(){return this._maximumBodySize}set maximumBodySize(e){this._maximumBodySize=e,this._onDidChange.fire(void 0)}get headerSize(){return this.headerVisible?r.HEADER_SIZE:0}get minimumSize(){let e=this.headerSize,n=!this.headerVisible||this.isExpanded()?this.minimumBodySize:0;return e+n}get maximumSize(){let e=this.headerSize,n=!this.headerVisible||this.isExpanded()?this.maximumBodySize:0;return e+n}orthogonalSize=0;constructor(e){super(),this._expanded=typeof e.expanded>"u"?!0:!!e.expanded,this._orientation=typeof e.orientation>"u"?0:e.orientation,this._ariaHeaderLabel=c("viewSection","{0} Section",e.title),this._minimumBodySize=typeof e.minimumBodySize=="number"?e.minimumBodySize:this._orientation===1?200:120,this._maximumBodySize=typeof e.maximumBodySize=="number"?e.maximumBodySize:Number.POSITIVE_INFINITY,this.element=ue(".pane")}isExpanded(){return this._expanded}setExpanded(e){return!e&&!this.collapsible||this._expanded===!!e?!1:(this.element?.classList.toggle("expanded",e),this._expanded=!!e,this.updateHeader(),e?(this._bodyRendered||(this.renderBody(this.body),this._bodyRendered=!0),typeof this.animationTimer=="number"&&Le(this.element).clearTimeout(this.animationTimer),Ie(this.element,this.body)):this.animationTimer=Le(this.element).setTimeout(()=>{this.body.remove()},200),this._onDidChangeExpansionState.fire(e),this._onDidChange.fire(e?this.expandedSize:void 0),!0)}get headerVisible(){return this._headerVisible}set headerVisible(e){this._headerVisible!==!!e&&(this._headerVisible=!!e,this.updateHeader(),this._onDidChange.fire(void 0))}get collapsible(){return this._collapsible}set collapsible(e){this._collapsible!==!!e&&(this._collapsible=!!e,this.updateHeader())}get orientation(){return this._orientation}set orientation(e){this._orientation!==e&&(this._orientation=e,this.element&&(this.element.classList.toggle("horizontal",this.orientation===1),this.element.classList.toggle("vertical",this.orientation===0)),this.header&&this.updateHeader())}render(){this.element.classList.toggle("expanded",this.isExpanded()),this.element.classList.toggle("horizontal",this.orientation===1),this.element.classList.toggle("vertical",this.orientation===0),this.header=ue(".pane-header"),Ie(this.element,this.header),this.header.setAttribute("tabindex","0"),this.header.setAttribute("role","button"),this.header.setAttribute("aria-label",this.ariaHeaderLabel),this.renderHeader(this.header);let e=co(this.header);this._register(e),this._register(e.onDidFocus(()=>this.header.classList.add("focused"),null)),this._register(e.onDidBlur(()=>this.header.classList.remove("focused"),null)),this.updateHeader();let t=this._register(new Q),n=this._register(new Ue(this.header,"keydown")),i=N.map(n.event,o=>new ht(o),t);this._register(N.filter(i,o=>o.keyCode===3||o.keyCode===10,t)(()=>this.setExpanded(!this.isExpanded()),null)),this._register(N.filter(i,o=>o.keyCode===15,t)(()=>this.setExpanded(!1),null)),this._register(N.filter(i,o=>o.keyCode===17,t)(()=>this.setExpanded(!0),null)),this._register(Zt.addTarget(this.header)),[se.CLICK,wt.Tap].forEach(o=>{this._register(K(this.header,o,s=>{s.defaultPrevented||this.setExpanded(!this.isExpanded())}))}),this.body=Ie(this.element,ue(".pane-body")),!this._bodyRendered&&this.isExpanded()&&(this.renderBody(this.body),this._bodyRendered=!0),this.isExpanded()||this.body.remove()}layout(e){let t=this.headerVisible?r.HEADER_SIZE:0,n=this._orientation===0?this.orthogonalSize:e,i=this._orientation===0?e-t:this.orthogonalSize-t;this.isExpanded()&&(this.body.classList.toggle("wide",n>=600),this.layoutBody(i,n),this.expandedSize=e)}style(e){this.styles=e,this.header&&this.updateHeader()}updateHeader(){let e=!this.headerVisible||this.isExpanded();this.collapsible?(this.header.setAttribute("tabindex","0"),this.header.setAttribute("role","button")):(this.header.removeAttribute("tabindex"),this.header.removeAttribute("role")),this.header.style.lineHeight=`${this.headerSize}px`,this.header.classList.toggle("hidden",!this.headerVisible),this.header.classList.toggle("expanded",e),this.header.classList.toggle("not-collapsible",!this.collapsible),this.header.setAttribute("aria-expanded",String(e)),this.header.style.color=this.collapsible?this.styles.headerForeground??"":"",this.header.style.backgroundColor=(this.collapsible?this.styles.headerBackground:"transparent")??"",this.header.style.borderTop=this.styles.headerBorder&&this.orientation===0?`1px solid ${this.styles.headerBorder}`:"",this.element.style.borderLeft=this.styles.leftBorder&&this.orientation===1?`1px solid ${this.styles.leftBorder}`:""}},g0=class r extends P{constructor(t,n,i){super();this.pane=t;this.dnd=n;this.context=i;t.draggableElement.draggable=!0,this._register(K(t.draggableElement,"dragstart",o=>this.onDragStart(o))),this._register(K(t.dropTargetElement,"dragenter",o=>this.onDragEnter(o))),this._register(K(t.dropTargetElement,"dragleave",o=>this.onDragLeave(o))),this._register(K(t.dropTargetElement,"dragend",o=>this.onDragEnd(o))),this._register(K(t.dropTargetElement,"drop",o=>this.onDrop(o)))}static DefaultDragOverBackgroundColor=new B(new Je(128,128,128,.5));dragOverCounter=0;_onDidDrop=this._register(new x);onDidDrop=this._onDidDrop.event;onDragStart(t){if(!this.dnd.canDrag(this.pane)||!t.dataTransfer){t.preventDefault(),t.stopPropagation();return}t.dataTransfer.effectAllowed="move",Lo&&t.dataTransfer?.setData(qr.TEXT,this.pane.draggableElement.textContent||"");let n=Ie(this.pane.element.ownerDocument.body,ue(".monaco-drag-image",{},this.pane.draggableElement.textContent||""));t.dataTransfer.setDragImage(n,-10,-10),setTimeout(()=>n.remove(),0),this.context.draggable=this}onDragEnter(t){!this.context.draggable||this.context.draggable===this||this.dnd.canDrop(this.context.draggable.pane,this.pane)&&(this.dragOverCounter++,this.render())}onDragLeave(t){!this.context.draggable||this.context.draggable===this||this.dnd.canDrop(this.context.draggable.pane,this.pane)&&(this.dragOverCounter--,this.dragOverCounter===0&&this.render())}onDragEnd(t){this.context.draggable&&(this.dragOverCounter=0,this.render(),this.context.draggable=null)}onDrop(t){this.context.draggable&&(We.stop(t),this.dragOverCounter=0,this.render(),this.dnd.canDrop(this.context.draggable.pane,this.pane)&&this.context.draggable!==this&&this._onDidDrop.fire({from:this.context.draggable.pane,to:this.pane}),this.context.draggable=null)}render(){let t=null;this.dragOverCounter>0&&(t=this.pane.dropBackground??r.DefaultDragOverBackgroundColor.toString()),this.pane.dropTargetElement.style.backgroundColor=t||""}};var tT=class extends P{dnd;dndContext={draggable:null};element;paneItems=[];orthogonalSize=0;size=0;splitview;animationTimer=void 0;_onDidDrop=this._register(new x);onDidDrop=this._onDidDrop.event;orientation;boundarySashes;onDidSashChange;onDidSashReset;onDidScroll;constructor(e,t={}){super(),this.dnd=t.dnd,this.orientation=t.orientation??0,this.element=Ie(e,ue(".monaco-pane-view")),this.splitview=this._register(new od(this.element,{orientation:this.orientation})),this.onDidSashReset=this.splitview.onDidSashReset,this.onDidSashChange=this.splitview.onDidSashChange,this.onDidScroll=this.splitview.onDidScroll;let n=this._register(new Q),i=this._register(new Ue(this.element,"keydown")),o=N.map(N.filter(i.event,s=>An(s.target)&&s.target.classList.contains("pane-header"),n),s=>new ht(s),n);this._register(N.filter(o,s=>s.keyCode===16,n)(()=>this.focusPrevious())),this._register(N.filter(o,s=>s.keyCode===18,n)(()=>this.focusNext()))}addPane(e,t,n=this.splitview.length){let i=new Q;e.onDidChangeExpansionState(this.setupAnimation,this,i);let o={pane:e,disposable:i};if(this.paneItems.splice(n,0,o),e.orientation=this.orientation,e.orthogonalSize=this.orthogonalSize,this.splitview.addView(e,t,n),this.dnd){let s=new g0(e,this.dnd,this.dndContext);i.add(s),i.add(s.onDidDrop(this._onDidDrop.fire,this._onDidDrop))}}removePane(e){let t=this.paneItems.findIndex(i=>i.pane===e);if(t===-1)return;this.splitview.removeView(t,e.isExpanded()?Sc.Distribute:void 0),this.paneItems.splice(t,1)[0].disposable.dispose()}movePane(e,t){let n=this.paneItems.findIndex(s=>s.pane===e),i=this.paneItems.findIndex(s=>s.pane===t);if(n===-1||i===-1)return;let[o]=this.paneItems.splice(n,1);this.paneItems.splice(i,0,o),this.splitview.moveView(n,i)}resizePane(e,t){let n=this.paneItems.findIndex(i=>i.pane===e);n!==-1&&this.splitview.resizeView(n,t)}getPaneSize(e){let t=this.paneItems.findIndex(n=>n.pane===e);return t===-1?-1:this.splitview.getViewSize(t)}layout(e,t){this.orthogonalSize=this.orientation===0?t:e,this.size=this.orientation===1?t:e;for(let n of this.paneItems)n.pane.orthogonalSize=this.orthogonalSize;this.splitview.layout(this.size)}setBoundarySashes(e){this.boundarySashes=e,this.updateSplitviewOrthogonalSashes(e)}updateSplitviewOrthogonalSashes(e){this.orientation===0?(this.splitview.orthogonalStartSash=e?.left,this.splitview.orthogonalEndSash=e?.right):this.splitview.orthogonalEndSash=e?.bottom}flipOrientation(e,t){this.orientation=this.orientation===0?1:0;let n=this.paneItems.map(s=>this.getPaneSize(s.pane));this.splitview.dispose(),pn(this.element),this.splitview=this._register(new od(this.element,{orientation:this.orientation})),this.updateSplitviewOrthogonalSashes(this.boundarySashes);let i=this.orientation===0?t:e,o=this.orientation===1?t:e;this.paneItems.forEach((s,a)=>{s.pane.orthogonalSize=i,s.pane.orientation=this.orientation;let l=this.size===0?0:o*n[a]/this.size;this.splitview.addView(s.pane,l,a)}),this.size=o,this.orthogonalSize=i,this.splitview.layout(this.size)}setupAnimation(){typeof this.animationTimer=="number"&&Le(this.element).clearTimeout(this.animationTimer),this.element.classList.add("animated"),this.animationTimer=Le(this.element).setTimeout(()=>{this.animationTimer=void 0,this.element.classList.remove("animated")},200)}getPaneHeaderElements(){return[...this.element.querySelectorAll(".pane-header")]}focusPrevious(){let e=this.getPaneHeaderElements(),t=e.indexOf(this.element.ownerDocument.activeElement);t!==-1&&e[Math.max(t-1,0)].focus()}focusNext(){let e=this.getPaneHeaderElements(),t=e.indexOf(this.element.ownerDocument.activeElement);t!==-1&&e[Math.min(t+1,e.length-1)].focus()}dispose(){super.dispose(),this.paneItems.forEach(e=>e.disposable.dispose())}};var f0=class extends P{constructor(t,n,i,o){super();this.options=n;this.menuService=i;this.contextKeyService=o;this.menu=this._register(i.createMenu(t,o)),this._register(this.menu.onDidChange(()=>this.updateActions())),this.updateActions()}menu;_primaryActions=[];get primaryActions(){return this._primaryActions}_secondaryActions=[];get secondaryActions(){return this._secondaryActions}_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;disposables=this._register(new Q);updateActions(){this.disposables.clear(),this._primaryActions=[],this._secondaryActions=[],wf(this.menu,this.options,{primary:this._primaryActions,secondary:this._secondaryActions}),this.disposables.add(this.updateSubmenus([...this._primaryActions,...this._secondaryActions],{})),this._onDidChange.fire()}updateSubmenus(t,n){let i=new Q;for(let o of t)if(o instanceof wi&&!n[o.item.submenu.id]){let s=n[o.item.submenu.id]=i.add(this.menuService.createMenu(o.item.submenu,this.contextKeyService));i.add(s.onDidChange(()=>this.updateActions())),i.add(this.updateSubmenus(o.actions,n))}return i}},yd=class extends P{constructor(t,n,i,o,s){super();this.menuId=t;this.contextMenuId=n;this.options=i;this.contextKeyService=o;this.menuService=s;this.menuActions=this._register(new f0(t,this.options,s,o)),this._register(this.menuActions.onDidChange(()=>this._onDidChange.fire()))}menuActions;_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;getPrimaryActions(){return this.menuActions.primaryActions}getSecondaryActions(){return this.menuActions.secondaryActions}getContextMenuActions(){let t=[];if(this.contextMenuId){let n=this.menuService.getMenuActions(this.contextMenuId,this.contextKeyService,this.options);wf(n,{primary:[],secondary:t})}return t}};yd=C([v(3,Ge),v(4,ro)],yd);var Is;(i=>{function r(o){return typeof o?.showDirectoryPicker=="function"}i.supported=r;function e(o){let s=o;return s?typeof s.kind=="string"&&typeof s.queryPermission=="function"&&typeof s.requestPermission=="function":!1}i.isFileSystemHandle=e;function t(o){return o.kind==="file"}i.isFileSystemFileHandle=t;function n(o){return o.kind==="directory"}i.isFileSystemDirectoryHandle=n})(Is||={});var nT=class{constructor(e,t,n){this.indexedDB=e;this.store=t;this.logService=n}onDidChangeCapabilities=N.None;onDidChangeFile=N.None;extUri=Wt?Tt:xw;_capabilities;get capabilities(){return this._capabilities||(this._capabilities=18,Wt&&(this._capabilities|=1024)),this._capabilities}async stat(e){try{let t=await this.getHandle(e);if(!t)throw this.createFileSystemProviderError(e,"No such file or directory, stat","EntryNotFound");if(Is.isFileSystemFileHandle(t)){let n=await t.getFile();return{type:1,mtime:n.lastModified,ctime:0,size:n.size}}return{type:2,mtime:0,ctime:0,size:0}}catch(t){throw this.toFileSystemProviderError(t)}}async readdir(e){try{let t=await this.getDirectoryHandle(e);if(!t)throw this.createFileSystemProviderError(e,"No such file or directory, readdir","EntryNotFound");let n=[];for await(let[i,o]of t)n.push([i,Is.isFileSystemFileHandle(o)?1:2]);return n}catch(t){throw this.toFileSystemProviderError(t)}}readFileStream(e,t,n){let i=_m(o=>et.concat(o.map(s=>et.wrap(s))).buffer,{highWaterMark:10});return(async()=>{try{let o=await this.getFileHandle(e);if(!o)throw this.createFileSystemProviderError(e,"No such file or directory, readFile","EntryNotFound");let s=await o.getFile();if(typeof t.length=="number"||typeof t.position=="number"){let a=new Uint8Array(await s.arrayBuffer());typeof t?.position=="number"&&(a=a.slice(t.position)),typeof t?.length=="number"&&(a=a.slice(0,t.length)),i.end(a)}else{let a=s.stream().getReader(),l=await a.read();for(;!l.done&&!(n.isCancellationRequested||(await i.write(l.value),n.isCancellationRequested));)l=await a.read();i.end(void 0)}}catch(o){i.error(this.toFileSystemProviderError(o)),i.end()}})(),i}async readFile(e){try{let t=await this.getFileHandle(e);if(!t)throw this.createFileSystemProviderError(e,"No such file or directory, readFile","EntryNotFound");let n=await t.getFile();return new Uint8Array(await n.arrayBuffer())}catch(t){throw this.toFileSystemProviderError(t)}}async writeFile(e,t,n){try{let i=await this.getFileHandle(e);if(!n.create||!n.overwrite){if(i){if(!n.overwrite)throw this.createFileSystemProviderError(e,"File already exists, writeFile","EntryExists")}else if(!n.create)throw this.createFileSystemProviderError(e,"No such file, writeFile","EntryNotFound")}if(!i){let s=await this.getDirectoryHandle(this.extUri.dirname(e));if(!s)throw this.createFileSystemProviderError(e,"No such parent directory, writeFile","EntryNotFound");if(i=await s.getFileHandle(this.extUri.basename(e),{create:!0}),!i)throw this.createFileSystemProviderError(e,"Unable to create file , writeFile","Unknown")}let o=await i.createWritable();await o.write(t),await o.close()}catch(i){throw this.toFileSystemProviderError(i)}}async mkdir(e){try{let t=await this.getDirectoryHandle(this.extUri.dirname(e));if(!t)throw this.createFileSystemProviderError(e,"No such parent directory, mkdir","EntryNotFound");await t.getDirectoryHandle(this.extUri.basename(e),{create:!0})}catch(t){throw this.toFileSystemProviderError(t)}}async delete(e,t){try{let n=await this.getDirectoryHandle(this.extUri.dirname(e));if(!n)throw this.createFileSystemProviderError(e,"No such parent directory, delete","EntryNotFound");return n.removeEntry(this.extUri.basename(e),{recursive:t.recursive})}catch(n){throw this.toFileSystemProviderError(n)}}async rename(e,t,n){try{if(this.extUri.isEqual(e,t))return;let i=await this.getFileHandle(e);if(i){let o=await i.getFile(),s=new Uint8Array(await o.arrayBuffer());await this.writeFile(t,s,{create:!0,overwrite:n.overwrite,unlock:!1,atomic:!1}),await this.delete(e,{recursive:!1,useTrash:!1,atomic:!1})}else throw this.createFileSystemProviderError(e,c("fileSystemRenameError","Rename is only supported for files."),"Unavailable")}catch(i){throw this.toFileSystemProviderError(i)}}watch(e,t){return P.None}_files=new Map;_directories=new Map;registerFileHandle(e){return this.registerHandle(e,this._files)}registerDirectoryHandle(e){return this.registerHandle(e,this._directories)}get directories(){return this._directories.values()}async registerHandle(e,t){let n=`/${e.name}`;if(t.has(n)&&!await t.get(n)?.isSameEntry(e)){let i=Md(e.name),o=fl(e.name,i),s=1;do n=`/${o}-${s++}${i}`;while(t.has(n)&&!await t.get(n)?.isSameEntry(e))}t.set(n,e);try{await this.indexedDB?.runInTransaction(this.store,"readwrite",i=>i.put(e,n))}catch(i){this.logService.error(i)}return W.from({scheme:le.file,path:n})}async getHandle(e){let t=await this.doGetHandle(e);if(!t){let n=await this.getDirectoryHandle(this.extUri.dirname(e));if(n){let i=Tt.basename(e);try{t=await n.getFileHandle(i)}catch{try{t=await n.getDirectoryHandle(i)}catch{}}}}return t}async getFileHandle(e){let t=await this.doGetHandle(e);if(t instanceof FileSystemFileHandle)return t;let n=await this.getDirectoryHandle(this.extUri.dirname(e));try{return await n?.getFileHandle(Tt.basename(e))}catch{return}}async getDirectoryHandle(e){let t=await this.doGetHandle(e);if(t instanceof FileSystemDirectoryHandle)return t;let n=this.extUri.dirname(e);if(this.extUri.isEqual(n,e))return;let i=await this.getDirectoryHandle(n);try{return await i?.getDirectoryHandle(Tt.basename(e))}catch{return}}async doGetHandle(e){if(this.extUri.dirname(e).path!=="/")return;let t=e.path.replace(/\/$/,""),n=this._files.get(t)??this._directories.get(t);if(n)return n;let i=await this.indexedDB?.runInTransaction(this.store,"readonly",o=>o.get(t));if(Is.isFileSystemHandle(i)){let o=await i.queryPermission()==="granted";try{o||(o=await i.requestPermission()==="granted")}catch(s){this.logService.error(s)}if(o)return Is.isFileSystemFileHandle(i)?this._files.set(t,i):Is.isFileSystemDirectoryHandle(i)&&this._directories.set(t,i),i}throw this.createFileSystemProviderError(e,"No file system handle registered","Unavailable")}toFileSystemProviderError(e){if(e instanceof $u)return e;let t="Unknown";return e.name==="NotAllowedError"&&(e=new Error(c("fileSystemNotAllowedError","Insufficient permissions. Please retry and allow the operation.")),t="Unavailable"),xk(e,t)}createFileSystemProviderError(e,t,n){return xk(new Error(`${t} (${So(e.path)})`),n)}};var iT={EDITORS:"CodeEditors",FILES:"CodeFiles"};function i3(r){let e=[];if(r.dataTransfer&&r.dataTransfer.types.length>0){let i=r.dataTransfer.getData(iT.EDITORS);if(i)try{e.push(...Tu(i))}catch{}else try{let a=r.dataTransfer.getData(qr.RESOURCES);e.push(...GU(a))}catch{}if(r.dataTransfer?.files)for(let a=0;a<r.dataTransfer.files.length;a++){let l=r.dataTransfer.files[a];if(l&&l.path)try{e.push({resource:W.file(l.path),isExternal:!0,allowWorkspaceOpen:!0})}catch{}}let o=r.dataTransfer.getData(iT.FILES);if(o)try{let a=JSON.parse(o);for(let l of a)e.push({resource:W.file(l),isExternal:!0,allowWorkspaceOpen:!0})}catch{}let s=Ce.as(oT.DragAndDropContribution).getAll();for(let a of s){let l=r.dataTransfer.getData(a.dataFormatKey);if(l)try{e.push(...a.getEditorInputs(l))}catch{}}}let t=[],n=new ci;for(let i of e)i.resource?n.has(i.resource)||(t.push(i),n.set(i.resource,!0)):t.push(i);return t}async function KU(r,e){let t=i3(e);if(e.dataTransfer&&_t&&a3(e,qr.FILES)&&e.dataTransfer.items){let o=await r.get(_e).invokeFunction(s=>r3(s,e));for(let s of o)t.push({resource:s.resource,contents:s.contents?.toString(),isExternal:!0,allowWorkspaceOpen:s.isDirectory})}return t}function GU(r){let e=[];if(r){let t=JSON.parse(r);for(let n of t)if(n.indexOf(":")>0){let{selection:i,uri:o}=cS(W.parse(n));e.push({resource:o,options:{selection:i}})}}return e}async function r3(r,e){if(Is.supported(xe)){let n=e.dataTransfer?.items;if(n)return o3(r,n)}let t=e.dataTransfer?.files;return t?s3(r,t):[]}async function o3(r,e){let t=r.get(dt).getProvider(le.file);if(!(t instanceof nT))return[];let n=[];for(let i=0;i<e.length;i++){let o=e[i];if(o){let s=new Ir;n.push(s),(async()=>{try{let a=await o.getAsFileSystemHandle();if(!a){s.complete(void 0);return}Is.isFileSystemFileHandle(a)?s.complete({resource:await t.registerFileHandle(a),isDirectory:!1}):Is.isFileSystemDirectoryHandle(a)?s.complete({resource:await t.registerDirectoryHandle(a),isDirectory:!0}):s.complete(void 0)}catch{s.complete(void 0)}})()}}return vn(await Promise.all(n.map(i=>i.p)))}async function s3(r,e){let t=r.get(Gi),n=[];for(let i=0;i<e.length;i++){let o=e.item(i);if(o){if(o.size>100*Sy.MB){t.warn(c("fileTooLarge","File is too large to open as untitled editor. Please upload it first into the file explorer and then try again."));continue}let s=new Ir;n.push(s);let a=new FileReader;a.onerror=()=>s.complete(void 0),a.onabort=()=>s.complete(void 0),a.onload=async l=>{let d=o.name,u=l.target?.result??void 0;if(typeof d!="string"||typeof u>"u"){s.complete(void 0);return}s.complete({resource:W.from({scheme:le.untitled,path:d}),contents:typeof u=="string"?et.fromString(u):et.wrap(new Uint8Array(u))})},a.readAsArrayBuffer(o)}}return vn(await Promise.all(n.map(i=>i.p)))}function a3(r,...e){if(!r.dataTransfer)return!1;let t=r.dataTransfer.types,n=[];for(let i=0;i<t.length;i++)n.push(t[i].toLowerCase());for(let i of e)if(n.indexOf(i.toLowerCase())>=0)return!0;return!1}var b0=class{_contributions=new Map;register(e){if(this._contributions.has(e.dataFormatKey))throw new Error(`A drag and drop contributiont with key '${e.dataFormatKey}' was already registered.`);this._contributions.set(e.dataFormatKey,e)}getAll(){return this._contributions.values()}},oT={DragAndDropContribution:"workbench.contributions.dragAndDrop"};Ce.add(oT.DragAndDropContribution,new b0);var rT=class r{static INSTANCE=new r;data;proto;constructor(){}static getInstance(){return r.INSTANCE}hasData(e){return e&&e===this.proto}clearData(e){this.hasData(e)&&(this.proto=void 0,this.data=void 0)}getData(e){if(this.hasData(e))return this.data}setData(e,t){t&&(this.data=e,this.proto=t)}};function qU(r,e){let t=JSON.stringify(r,void 0,e.insertSpaces?e.tabSize||4:"	");return e.eol!==void 0?t.replace(/\r\n|\r|\n/g,e.eol):t}var $U=A("workspacesService");var jU=A("workspaceEditingService");var sT=class extends P{constructor(t){super();this.channelName=t;if("BroadcastChannel"in xe)try{this.broadcastChannel=new BroadcastChannel(t);let n=i=>{this._onDidReceiveData.fire(i.data)};this.broadcastChannel.addEventListener("message",n),this._register(ie(()=>{this.broadcastChannel&&(this.broadcastChannel.removeEventListener("message",n),this.broadcastChannel.close())}))}catch(n){console.warn("Error while creating broadcast channel. Falling back to localStorage.",Ia(n))}this.broadcastChannel||(this.channelName=`BroadcastDataChannel.${t}`,this.createBroadcastChannel())}broadcastChannel;_onDidReceiveData=this._register(new x);onDidReceiveData=this._onDidReceiveData.event;createBroadcastChannel(){let t=n=>{n.key===this.channelName&&n.newValue&&this._onDidReceiveData.fire(JSON.parse(n.newValue))};xe.addEventListener("storage",t),this._register(ie(()=>xe.removeEventListener("storage",t)))}postData(t){this.broadcastChannel?this.broadcastChannel.postMessage(t):(localStorage.removeItem(this.channelName),localStorage.setItem(this.channelName,JSON.stringify(t)))}};var aT=class{constructor(e,t,n,i,o,s,a,l){this.options=e;this.fileService=t;this.workspacesService=n;this.editorService=i;this.workspaceEditingService=o;this.hostService=s;this.contextService=a;this.instantiationService=l}async handleDrop(e,t,n,i,o){let s=await this.instantiationService.invokeFunction(d=>KU(d,e));if(!s.length)return;if(await this.hostService.focus(t),this.options.allowWorkspaceOpen){let d=vn(s.filter(u=>u.allowWorkspaceOpen&&u.resource?.scheme===le.file).map(u=>u.resource));if(d.length>0&&await this.handleWorkspaceDrop(d))return}let a=vn(s.filter(d=>d.isExternal&&d.resource?.scheme===le.file).map(d=>d.resource));a.length&&this.workspacesService.addRecentlyOpened(a.map(d=>({fileUri:d})));let l=n?.();await this.editorService.openEditors(s.map(d=>({...d,resource:d.resource,options:{...d.options,...o,pinned:!0}})),l,{validateTrust:!0}),i?.(l)}async handleWorkspaceDrop(e){let t=[],n=[];return await Promise.all(e.map(async i=>{if(zA(i)){t.push({workspaceUri:i});return}try{let o=await this.fileService.stat(i);o.isDirectory&&(t.push({folderUri:o.resource}),n.push({uri:o.resource}))}catch{}})),t.length===0?!1:(t.length>n.length||n.length===1?await this.hostService.openWindow(t):Nm(this.contextService.getWorkspace())?await this.workspaceEditingService.addFolders(n):await this.workspaceEditingService.createAndEnterWorkspace(n),!0)}};aT=C([v(1,dt),v(2,$U),v(3,Rn),v(4,jU),v(5,ia),v(6,Un),v(7,_e)],aT);function d3(r,e,t,n){if(e.length===0||!t.dataTransfer)return;let i=r.get(Xl),o=r.get(Rn),s=r.get(dt),a=r.get(Gs),l=vn(e.map(m=>W.isUri(m)?{resource:m}:i_(m)?W.isUri(m.editor.resource)?{resource:m.editor.resource}:void 0:m)),d=l.filter(({resource:m})=>s.hasProvider(m));if(!n?.disableStandardTransfer){let m=xt?`\r
`:`
`;t.dataTransfer.setData(qr.TEXT,d.map(({resource:g})=>a.getUriLabel(g,{noPrefix:!0})).join(m));let f=d.find(({isDirectory:g})=>!g);if(f){let g=yr.uriToFileUri(f.resource);g.scheme===le.file&&t.dataTransfer.setData(qr.DOWNLOAD_URL,[Xo.binary,oo(f.resource),g.toString()].join(":"))}}let u=d.filter(({isDirectory:m})=>!m);u.length&&t.dataTransfer.setData(qr.RESOURCES,JSON.stringify(u.map(({resource:m})=>m.toString())));let p=Ce.as(oT.DragAndDropContribution).getAll();for(let m of p)m.setData(l,t);let h=[];for(let m of e){let f;if(i_(m)){let g=m.editor.toUntyped({preserveViewState:m.groupId});g&&(f={...g,resource:Wa.getCanonicalUri(g)})}else if(W.isUri(m)){let{selection:g,uri:y}=cS(m);f={resource:y,options:g?{selection:g}:void 0}}else m.isDirectory||(f={resource:m.resource});if(f){{let g=f.resource;if(g){let y=i.files.get(g);y&&(typeof f.languageId!="string"&&(f.languageId=y.getLanguageId()),typeof f.encoding!="string"&&(f.encoding=y.getEncoding()),typeof f.contents!="string"&&y.isDirty()&&!y.textEditorModel.isTooLargeForHeapOperation()&&(f.contents=y.textEditorModel.getValue())),f.options?.viewState||(f.options={...f.options,viewState:(()=>{for(let T of o.visibleEditorPanes)if(To(T.input.resource,g)){let E=T.getViewState();if(E)return E}})()})}}h.push(f)}}if(h.length){t.dataTransfer.setData(iT.EDITORS,dv(h));let m=[];for(let f of h)f.resource?m.push(f.resource):rs(f)?f.modified.resource&&m.push(f.modified.resource):qs(f)?f.primary.resource&&m.push(f.primary.resource):$s(f)&&m.push(f.result.resource);n?.disableStandardTransfer||t.dataTransfer.setData(Xo.uriList,Nv.create(m.slice(0,1))),t.dataTransfer.setData(qr.INTERNAL_URI_LIST,Nv.create(m))}}var v0=class{constructor(e,t){this.type=e;this.id=t}update(e){}getData(){return{type:this.type,id:this.id}}},Wc=class{constructor(e){this.compositeId=e}get id(){return this.compositeId}},zc=class{constructor(e){this.viewId=e}get id(){return this.viewId}},dh=class r extends P{static instance;static get INSTANCE(){return r.instance||(r.instance=new r,vl(r.instance)),r.instance}transferData=rT.getInstance();onDragStart=this._register(new x);onDragEnd=this._register(new x);constructor(){super(),this._register(this.onDragEnd.event(e=>{let t=e.dragAndDropData.getData().id,n=e.dragAndDropData.getData().type;this.readDragData(n)?.getData().id===t&&this.transferData.clearData(n==="view"?zc.prototype:Wc.prototype)}))}readDragData(e){if(this.transferData.hasData(e==="view"?zc.prototype:Wc.prototype)){let t=this.transferData.getData(e==="view"?zc.prototype:Wc.prototype);if(t&&t[0])return new v0(e,t[0].id)}}writeDragData(e,t){this.transferData.setData([t==="view"?new zc(e):new Wc(e)],t==="view"?zc.prototype:Wc.prototype)}registerTarget(e,t){let n=new Q;return n.add(new mc(e,{onDragEnter:i=>{if(i.preventDefault(),t.onDragEnter){let o=this.readDragData("composite")||this.readDragData("view");o&&t.onDragEnter({eventData:i,dragAndDropData:o})}},onDragLeave:i=>{let o=this.readDragData("composite")||this.readDragData("view");t.onDragLeave&&o&&t.onDragLeave({eventData:i,dragAndDropData:o})},onDrop:i=>{if(t.onDrop){let o=this.readDragData("composite")||this.readDragData("view");if(!o)return;t.onDrop({eventData:i,dragAndDropData:o}),this.onDragEnd.fire({eventData:i,dragAndDropData:o})}},onDragOver:i=>{if(i.preventDefault(),t.onDragOver){let o=this.readDragData("composite")||this.readDragData("view");if(!o)return;t.onDragOver({eventData:i,dragAndDropData:o})}}})),t.onDragStart&&this.onDragStart.event(i=>{t.onDragStart(i)},this,n),t.onDragEnd&&this.onDragEnd.event(i=>{t.onDragEnd(i)},this,n),this._register(n)}registerDraggable(e,t,n){e.draggable=!0;let i=new Q;return i.add(new mc(e,{onDragStart:o=>{let{id:s,type:a}=t();this.writeDragData(s,a),o.dataTransfer?.setDragImage(e,0,0),this.onDragStart.fire({eventData:o,dragAndDropData:this.readDragData(a)})},onDragEnd:o=>{let{type:s}=t(),a=this.readDragData(s);a&&this.onDragEnd.fire({eventData:o,dragAndDropData:a})},onDragEnter:o=>{if(n.onDragEnter){let s=this.readDragData("composite")||this.readDragData("view");if(!s)return;s&&n.onDragEnter({eventData:o,dragAndDropData:s})}},onDragLeave:o=>{let s=this.readDragData("composite")||this.readDragData("view");s&&n.onDragLeave?.({eventData:o,dragAndDropData:s})},onDrop:o=>{if(n.onDrop){let s=this.readDragData("composite")||this.readDragData("view");if(!s)return;n.onDrop({eventData:o,dragAndDropData:s}),this.onDragEnd.fire({eventData:o,dragAndDropData:s})}},onDragOver:o=>{if(n.onDragOver){let s=this.readDragData("composite")||this.readDragData("view");if(!s)return;n.onDragOver({eventData:o,dragAndDropData:s})}}})),n.onDragStart&&this.onDragStart.event(o=>{n.onDragStart(o)},this,i),n.onDragEnd&&this.onDragEnd.event(o=>{n.onDragEnd(o)},this,i),this._register(i)}};function I0(r,e,t){r&&(r.dropEffect=t?e:"none")}var lT=class{constructor(e,t){this.toResource=e;this.instantiationService=t}getDragURI(e){let t=this.toResource(e);return t?t.toString():null}getDragLabel(e){let t=vn(e.map(this.toResource));return t.length===1?oo(t[0]):t.length>1?String(t.length):void 0}onDragStart(e,t){let n=[];for(let i of e.elements){let o=this.toResource(i);o&&n.push(o)}n.length&&this.instantiationService.invokeFunction(i=>d3(i,n,t))}onDragOver(e,t,n,i,o){return!1}drop(e,t,n,i,o){}dispose(){}};lT=C([v(1,_e)],lT);var y0=class r extends P{static CHANNEL_NAME="monaco-workbench-global-dragged-over";broadcaster=this._register(new sT(r.CHANNEL_NAME));constructor(){super(),this.registerListeners()}registerListeners(){this._register(N.runAndSubscribe(Fg,({window:e,disposables:t})=>{t.add(K(e,se.DRAG_OVER,()=>this.markDraggedOver(!1),!0)),t.add(K(e,se.DRAG_LEAVE,()=>this.clearDraggedOver(!1),!0))},{window:xe,disposables:this._store})),this._register(this.broadcaster.onDidReceiveData(e=>{e===!0?this.markDraggedOver(!0):this.clearDraggedOver(!0)}))}draggedOver=!1;get isDraggedOver(){return this.draggedOver}markDraggedOver(e){this.draggedOver!==!0&&(this.draggedOver=!0,e||this.broadcaster.postData(!0))}clearDraggedOver(e){this.draggedOver!==!1&&(this.draggedOver=!1,e||this.broadcaster.postData(!1))}},Uzt=new y0;var dT=class{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>typeof e=="string"?e:e.label).join("")}};C([J],dT.prototype,"toString",1);var c3=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function YU(r){let e=[],t=0,n;for(;n=c3.exec(r);){n.index-t>0&&e.push(r.substring(t,n.index));let[,i,o,,s]=n;s?e.push({label:i,href:o,title:s}):e.push({label:i,href:o}),t=n.index+n[0].length}return t<r.length&&e.push(r.substring(t)),new dT(e)}var ch=class extends P{constructor(t,n,i={},o,s){super();this._link=n;this._hoverService=o;this.el=Ie(t,ue("a.monaco-link",{tabIndex:n.tabIndex??0,href:n.href},n.label)),this.hoverDelegate=i.hoverDelegate??Pt("mouse"),this.setTooltip(n.title),this.el.setAttribute("role","button");let a=this._register(new Ue(this.el,"click")),l=this._register(new Ue(this.el,"keypress")),d=N.chain(l.event,h=>h.map(m=>new ht(m)).filter(m=>m.keyCode===3)),u=this._register(new Ue(this.el,wt.Tap)).event;this._register(Zt.addTarget(this.el));let p=N.any(a.event,d,u);this._register(p(h=>{this.enabled&&(We.stop(h,!0),i?.opener?i.opener(this._link.href):s.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}el;hover;hoverDelegate;_enabled=!0;get enabled(){return this._enabled}set enabled(t){t?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=t}set link(t){typeof t.label=="string"?this.el.textContent=t.label:(pn(this.el),this.el.appendChild(t.label)),this.el.href=t.href,typeof t.tabIndex<"u"&&(this.el.tabIndex=t.tabIndex),this.setTooltip(t.title),this._link=t}setTooltip(t){this.hoverDelegate.showNativeHover?this.el.title=t??"":!this.hover&&t?this.hover=this._register(this._hoverService.setupManagedHover(this.hoverDelegate,this.el,t)):this.hover&&this.hover.update(t)}};ch=C([v(3,No),v(4,hs)],ch);var Ss;(s=>{let r;(h=>(h[h.None=0]="None",h[h.Done=1]="Done",h[h.Infinite=2]="Infinite",h[h.While=3]="While",h[h.Work=4]="Work"))(r=s.Type||={}),s.None={type:0},s.Done={type:1},s.Infinite={type:2};class i{constructor(l,d,u){this.whilePromise=l;this.whileStart=d;this.whileDelay=u}type=3}s.While=i;class o{constructor(l,d){this.total=l;this.worked=d}type=4}s.Work=o})(Ss||={});var cT=class extends P{constructor(t,n){super();this.progressBar=t;this.scope=n;this.registerListeners()}progressState=Ss.None;registerListeners(){this._register(this.scope.onDidChangeActive(()=>{this.scope.isActive?this.onDidScopeActivate():this.onDidScopeDeactivate()}))}onDidScopeActivate(){if(this.progressState.type!==Ss.Done.type)if(this.progressState.type===3){let t;if(this.progressState.whileDelay>0){let n=this.progressState.whileDelay-(Date.now()-this.progressState.whileStart);n>0&&(t=n)}this.doShowWhile(t)}else this.progressState.type===2?this.progressBar.infinite().show():this.progressState.type===4&&(this.progressState.total&&this.progressBar.total(this.progressState.total).show(),this.progressState.worked&&this.progressBar.worked(this.progressState.worked).show())}onDidScopeDeactivate(){this.progressBar.stop().hide()}show(t,n){return typeof t=="boolean"?this.progressState=Ss.Infinite:this.progressState=new Ss.Work(t,void 0),this.scope.isActive&&(this.progressState.type===2?this.progressBar.infinite().show(n):this.progressState.type===4&&typeof this.progressState.total=="number"&&this.progressBar.total(this.progressState.total).show(n)),{total:i=>{this.progressState=new Ss.Work(i,this.progressState.type===4?this.progressState.worked:void 0),this.scope.isActive&&this.progressBar.total(i)},worked:i=>{!this.scope.isActive||this.progressBar.hasTotal()?(this.progressState=new Ss.Work(this.progressState.type===4?this.progressState.total:void 0,this.progressState.type===4&&typeof this.progressState.worked=="number"?this.progressState.worked+i:i),this.scope.isActive&&this.progressBar.worked(i)):(this.progressState=Ss.Infinite,this.progressBar.infinite().show())},done:()=>{this.progressState=Ss.Done,this.scope.isActive&&this.progressBar.stop().hide()}}}async showWhile(t,n){this.progressState.type===3&&(t=Promise.all([t,this.progressState.whilePromise])),this.progressState=new Ss.While(t,n||0,Date.now());try{this.doShowWhile(n),await t}catch{}finally{(this.progressState.type!==3||this.progressState.whilePromise===t)&&(this.progressState=Ss.None,this.scope.isActive&&this.progressBar.stop().hide())}}doShowWhile(t){this.scope.isActive&&this.progressBar.infinite().show(t)}},uT=class extends P{constructor(t,n){super();this.scopeId=t;this._isActive=n}_onDidChangeActive=this._register(new x);onDidChangeActive=this._onDidChangeActive.event;get isActive(){return this._isActive}onScopeOpened(t){t===this.scopeId&&(this._isActive||(this._isActive=!0,this._onDidChangeActive.fire()))}onScopeClosed(t){t===this.scopeId&&this._isActive&&(this._isActive=!1,this._onDidChangeActive.fire())}};var pT=class extends P{options;actionBar;toggleMenuAction;toggleMenuActionViewItem;submenuActionViewItems=[];hasSecondaryActions=!1;element;_onDidChangeDropdownVisibility=this._register(new Wh);onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event;disposables=this._register(new Q);constructor(e,t,n={orientation:0}){super(),n.hoverDelegate=n.hoverDelegate??this._register(qa()),this.options=n,this.toggleMenuAction=this._register(new uh(()=>this.toggleMenuActionViewItem?.show(),n.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",e.appendChild(this.element),this.actionBar=this._register(new Ao(this.element,{orientation:n.orientation,ariaLabel:n.ariaLabel,actionRunner:n.actionRunner,allowContextMenu:n.allowContextMenu,highlightToggledItems:n.highlightToggledItems,hoverDelegate:n.hoverDelegate,actionViewItemProvider:(i,o)=>{if(i.id===uh.ID)return this.toggleMenuActionViewItem=new ud(i,i.menuActions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:qe.asClassNameArray(n.moreIcon??z.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0,hoverDelegate:this.options.hoverDelegate}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(n.actionViewItemProvider){let s=n.actionViewItemProvider(i,o);if(s)return s}if(i instanceof Ca){let s=new ud(i,i.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:i.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,hoverDelegate:this.options.hoverDelegate});return s.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(s),this.disposables.add(this._onDidChangeDropdownVisibility.add(s.onDidChangeVisibility)),s}}}))}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}set context(e){this.actionBar.context=e,this.toggleMenuActionViewItem?.setActionContext(e);for(let t of this.submenuActionViewItems)t.setActionContext(e)}getElement(){return this.element}focus(){this.actionBar.focus()}getItemsWidth(){let e=0;for(let t=0;t<this.actionBar.length();t++)e+=this.actionBar.getWidth(t);return e}getItemAction(e){return this.actionBar.getAction(e)}getItemWidth(e){return this.actionBar.getWidth(e)}getItemsLength(){return this.actionBar.length()}setAriaLabel(e){this.actionBar.setAriaLabel(e)}setActions(e,t){this.clear();let n=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),n.push(this.toggleMenuAction)),n.forEach(i=>{this.actionBar.push(i,{icon:this.options.icon??!0,label:this.options.label??!1,keybinding:this.getKeybindingLabel(i)})})}isEmpty(){return this.actionBar.isEmpty()}getKeybindingLabel(e){return this.options.getKeyBinding?.(e)?.getLabel()??void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}},uh=class r extends un{static ID="toolbar.toggle.more";_menuActions;toggleDropdownMenu;constructor(e,t){t=t||c("moreActions","More Actions..."),super(r.ID,t,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=e}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}};var hT=class{constructor(e,t,n){this._commandService=e;this._keybindingService=t;this._hiddenStates=new pa(n)}_hiddenStates;createMenu(e,t,n){return new ph(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...n},this._commandService,this._keybindingService,t)}getMenuActions(e,t,n){let i=new ph(e,this._hiddenStates,{emitEventsForSubmenuChanges:!1,eventDebounceDelay:50,...n},this._commandService,this._keybindingService,t),o=i.getActions(n);return i.dispose(),o}getMenuContexts(e){let t=new mT(e,!1);return new Set([...t.structureContextKeys,...t.preconditionContextKeys,...t.toggledContextKeys])}resetHiddenStates(e){this._hiddenStates.reset(e)}};hT=C([v(0,Zi),v(1,Wn),v(2,Xe)],hT);var pa=class{constructor(e){this._storageService=e;try{let t=e.get(pa._key,0,"{}");this._data=JSON.parse(t)}catch{this._data=Object.create(null)}this._disposables.add(e.onDidChangeValue(0,pa._key,this._disposables)(()=>{if(!this._ignoreChangeEvent)try{let t=e.get(pa._key,0,"{}");this._data=JSON.parse(t)}catch(t){console.log("FAILED to read storage after UPDATE",t)}this._onDidChange.fire()}))}static _key="menu.hiddenCommands";_disposables=new Q;_onDidChange=new x;onDidChange=this._onDidChange.event;_ignoreChangeEvent=!1;_data;_hiddenByDefaultCache=new Map;dispose(){this._onDidChange.dispose(),this._disposables.dispose()}_isHiddenByDefault(e,t){return this._hiddenByDefaultCache.get(`${e.id}/${t}`)??!1}setDefaultState(e,t,n){this._hiddenByDefaultCache.set(`${e.id}/${t}`,n)}isHidden(e,t){let n=this._isHiddenByDefault(e,t),i=this._data[e.id]?.includes(t)??!1;return n?!i:i}updateHidden(e,t,n){this._isHiddenByDefault(e,t)&&(n=!n);let o=this._data[e.id];if(n)o?o.indexOf(t)<0&&o.push(t):this._data[e.id]=[t];else if(o){let s=o.indexOf(t);s>=0&&sP(o,s),o.length===0&&delete this._data[e.id]}this._persist()}reset(e){if(e===void 0)this._data=Object.create(null),this._persist();else{for(let{id:t}of e)this._data[t]&&delete this._data[t];this._persist()}}_persist(){try{this._ignoreChangeEvent=!0;let e=JSON.stringify(this._data);this._storageService.store(pa._key,e,0,0)}finally{this._ignoreChangeEvent=!1}}};pa=C([v(0,Xe)],pa);var mT=class r{constructor(e,t){this._id=e;this._collectContextKeysForSubmenus=t;this.refresh()}_menuGroups=[];_allMenuIds=new Set;_structureContextKeys=new Set;_preconditionContextKeys=new Set;_toggledContextKeys=new Set;get allMenuIds(){return this._allMenuIds}get structureContextKeys(){return this._structureContextKeys}get preconditionContextKeys(){return this._preconditionContextKeys}get toggledContextKeys(){return this._toggledContextKeys}refresh(){this._menuGroups.length=0,this._allMenuIds.clear(),this._structureContextKeys.clear(),this._preconditionContextKeys.clear(),this._toggledContextKeys.clear();let e=this._sort(Vt.getMenuItems(this._id)),t;for(let n of e){let i=n.group||"";(!t||t[0]!==i)&&(t=[i,[]],this._menuGroups.push(t)),t[1].push(n),this._collectContextKeysAndSubmenuIds(n)}this._allMenuIds.add(this._id)}_sort(e){return e}_collectContextKeysAndSubmenuIds(e){if(r._fillInKbExprKeys(e.when,this._structureContextKeys),yu(e)){if(e.command.precondition&&r._fillInKbExprKeys(e.command.precondition,this._preconditionContextKeys),e.command.toggled){let t=e.command.toggled.condition||e.command.toggled;r._fillInKbExprKeys(t,this._toggledContextKeys)}}else this._collectContextKeysForSubmenus&&(Vt.getMenuItems(e.submenu).forEach(this._collectContextKeysAndSubmenuIds,this),this._allMenuIds.add(e.submenu))}static _fillInKbExprKeys(e,t){if(e)for(let n of e.keys())t.add(n)}},il=class extends mT{constructor(t,n,i,o,s,a){super(t,i);this._hiddenStates=n;this._commandService=o;this._keybindingService=s;this._contextKeyService=a;this.refresh()}createActionGroups(t){let n=[];for(let i of this._menuGroups){let[o,s]=i,a;for(let l of s)if(this._contextKeyService.contextMatchesRules(l.when)){let d=yu(l);d&&this._hiddenStates.setDefaultState(this._id,l.command.id,!!l.isHiddenByDefault);let u=u3(this._id,d?l.command:l,this._hiddenStates);if(d){let p=S0(this._commandService,this._keybindingService,l.command.id,l.when);(a??=[]).push(new Ui(l.command,l.alt,t,u,p,this._contextKeyService,this._commandService))}else{let p=new il(l.submenu,this._hiddenStates,this._collectContextKeysForSubmenus,this._commandService,this._keybindingService,this._contextKeyService).createActionGroups(t),h=Yt.join(...p.map(m=>m[1]));h.length>0&&(a??=[]).push(new wi(l,u,h))}}a&&a.length>0&&n.push([o,a])}return n}_sort(t){return t.sort(il._compareMenuItems)}static _compareMenuItems(t,n){let i=t.group,o=n.group;if(i!==o){if(i){if(!o)return-1}else return 1;if(i==="navigation")return-1;if(o==="navigation")return 1;let l=i.localeCompare(o);if(l!==0)return l}let s=t.order||0,a=n.order||0;return s<a?-1:s>a?1:il._compareTitles(yu(t)?t.command.title:t.title,yu(n)?n.command.title:n.title)}static _compareTitles(t,n){let i=typeof t=="string"?t:t.original,o=typeof n=="string"?n:n.original;return i.localeCompare(o)}};il=C([v(3,Zi),v(4,Wn),v(5,Ge)],il);var ph=class{_menuInfo;_disposables=new Q;_onDidChange;onDidChange;constructor(e,t,n,i,o,s){this._menuInfo=new il(e,t,n.emitEventsForSubmenuChanges,i,o,s);let a=new Bn(()=>{this._menuInfo.refresh(),this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!0,isToggleChange:!0})},n.eventDebounceDelay);this._disposables.add(a),this._disposables.add(Vt.onDidChangeMenu(p=>{for(let h of this._menuInfo.allMenuIds)if(p.has(h)){a.schedule();break}}));let l=this._disposables.add(new Q),d=p=>{let h=!1,m=!1,f=!1;for(let g of p)if(h=h||g.isStructuralChange,m=m||g.isEnablementChange,f=f||g.isToggleChange,h&&m&&f)break;return{menu:this,isStructuralChange:h,isEnablementChange:m,isToggleChange:f}},u=()=>{l.add(s.onDidChangeContext(p=>{let h=p.affectsSome(this._menuInfo.structureContextKeys),m=p.affectsSome(this._menuInfo.preconditionContextKeys),f=p.affectsSome(this._menuInfo.toggledContextKeys);(h||m||f)&&this._onDidChange.fire({menu:this,isStructuralChange:h,isEnablementChange:m,isToggleChange:f})})),l.add(t.onDidChange(p=>{this._onDidChange.fire({menu:this,isStructuralChange:!0,isEnablementChange:!1,isToggleChange:!1})}))};this._onDidChange=new yb({onWillAddFirstListener:u,onDidRemoveLastListener:l.clear.bind(l),delay:n.eventDebounceDelay,merge:d}),this.onDidChange=this._onDidChange.event}getActions(e){return this._menuInfo.createActionGroups(e)}dispose(){this._disposables.dispose(),this._onDidChange.dispose()}};ph=C([v(3,Zi),v(4,Wn),v(5,Ge)],ph);function u3(r,e,t){let n=tA(e)?e.submenu.id:e.id,i=typeof e.title=="string"?e.title:e.title.value,o=ui({id:`hide/${r.id}/${n}`,label:c("hide.label","Hide '{0}'",i),run(){t.updateHidden(r,n,!0)}}),s=ui({id:`toggle/${r.id}/${n}`,label:i,get checked(){return!t.isHidden(r,n)},run(){t.updateHidden(r,n,!!this.checked)}});return{hide:o,toggle:s,get isHidden(){return!s.checked}}}function S0(r,e,t,n=void 0,i=!0){return ui({id:`configureKeybinding/${t}`,label:c("configure keybinding","Configure Keybinding"),enabled:i,run(){let s=!!!e.lookupKeybinding(t)&&n?n.serialize():void 0;r.executeCommand("workbench.action.openGlobalKeybindings",`@command:${t}`+(s?` +when:${s}`:""))}})}var Hc=class extends pT{constructor(t,n,i,o,s,a,l,d){super(t,s,{getKeyBinding:p=>a.lookupKeybinding(p.id)??void 0,...n,allowContextMenu:!0,skipTelemetry:typeof n?.telemetrySource=="string"});this._options=n;this._menuService=i;this._contextKeyService=o;this._contextMenuService=s;this._keybindingService=a;this._commandService=l;let u=n?.telemetrySource;u&&this._store.add(this.actionBar.onDidRun(p=>d.publicLog2("workbenchActionExecuted",{id:p.action.id,from:u})))}_sessionDisposables=this._store.add(new Q);setActions(t,n=[],i){this._sessionDisposables.clear();let o=t.slice(),s=n.slice(),a=[],l=0,d=[],u=!1;if(this._options?.hiddenItemStrategy!==-1)for(let p=0;p<o.length;p++){let h=o[p];!(h instanceof Ui)&&!(h instanceof wi)||h.hideActions&&(a.push(h.hideActions.toggle),h.hideActions.toggle.checked&&l++,h.hideActions.isHidden&&(u=!0,o[p]=void 0,this._options?.hiddenItemStrategy!==0&&(d[p]=h)))}if(this._options?.overflowBehavior!==void 0){let p=cP(new Set(this._options.overflowBehavior.exempted),$e.map(o,f=>f?.id)),h=this._options.overflowBehavior.maxItems-p.size,m=0;for(let f=0;f<o.length;f++){let g=o[f];g&&(m++,!p.has(g.id)&&m>=h&&(o[f]=void 0,d[f]=g))}}ME(o),ME(d),super.setActions(o,Yt.join(d,s)),(a.length>0||o.length>0)&&this._sessionDisposables.add(K(this.getElement(),"contextmenu",p=>{let h=new zn(Le(this.getElement()),p),m=this.getItemAction(h.target);if(!m)return;h.preventDefault(),h.stopPropagation();let f=[];if(m instanceof Ui&&m.menuKeybinding)f.push(m.menuKeybinding);else if(!(m instanceof wi||m instanceof uh)){let y=!!this._keybindingService.lookupKeybinding(m.id);f.push(S0(this._commandService,this._keybindingService,m.id,void 0,y))}if(a.length>0){let y=!1;if(l===1&&this._options?.hiddenItemStrategy===0){y=!0;for(let T=0;T<a.length;T++)if(a[T].checked){a[T]=ui({id:m.id,label:m.label,checked:!0,enabled:!1,run(){}});break}}if(!y&&(m instanceof Ui||m instanceof wi)){if(!m.hideActions)return;f.push(m.hideActions.hide)}else f.push(ui({id:"label",label:c("hide","Hide"),enabled:!1,run(){}}))}let g=Yt.join(f,a);this._options?.resetMenu&&!i&&(i=[this._options.resetMenu]),u&&i&&(g.push(new Yt),g.push(ui({id:"resetThisMenu",label:c("resetThisMenu","Reset Menu"),run:()=>this._menuService.resetHiddenStates(i)}))),g.length!==0&&this._contextMenuService.showContextMenu({getAnchor:()=>h,getActions:()=>g,menuId:this._options?.contextMenu,menuActionOptions:{renderShortTitle:!0,...this._options?.menuOptions},skipTelemetry:typeof this._options?.telemetrySource=="string",contextKeyService:this._contextKeyService})}))}};Hc=C([v(2,ro),v(3,Ge),v(4,Sn),v(5,Wn),v(6,Zi),v(7,Ot)],Hc);var hh=class extends Hc{_onDidChangeMenuItems=this._store.add(new x);onDidChangeMenuItems=this._onDidChangeMenuItems.event;constructor(e,t,n,i,o,s,a,l,d){super(e,{resetMenu:t,...n},i,o,s,a,l,d);let u=this._store.add(i.createMenu(t,o,{emitEventsForSubmenuChanges:!0})),p=()=>{let h=[],m=[];wf(u,n?.menuOptions,{primary:h,secondary:m},n?.toolbarOptions?.primaryGroup,n?.toolbarOptions?.shouldInlineSubmenu,n?.toolbarOptions?.useSeparatorsInPrimaryActions),e.classList.toggle("has-no-actions",h.length===0&&m.length===0),super.setActions(h,m)};this._store.add(u.onDidChange(()=>{p(),this._onDidChangeMenuItems.fire(this)})),p()}setActions(){throw new gt("This toolbar is populated from a menu.")}};hh=C([v(3,ro),v(4,Ge),v(5,Sn),v(6,Wn),v(7,Zi),v(8,Ot)],hh);var p3=c("defaultLabel","input"),h3=c("label.preserveCaseToggle","Preserve Case"),x0=class extends ps{constructor(e){super({icon:z.preserveCase,title:h3+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??Pt("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},gT=class extends Jn{constructor(t,n,i,o){super();this._showOptionButtons=i;this.contextViewProvider=n,this.placeholder=o.placeholder||"",this.validation=o.validation,this.label=o.label||p3;let s=o.appendPreserveCaseLabel||"",a=o.history||[],l=!!o.flexibleHeight,d=!!o.flexibleWidth,u=o.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new pd(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:o.showHistoryHint,flexibleHeight:l,flexibleWidth:d,flexibleMaxHeight:u,inputBoxStyles:o.inputBoxStyles})),this.preserveCase=this._register(new x0({appendTitle:s,isChecked:!1,...o.toggleStyles})),this._register(this.preserveCase.onChange(m=>{this._onDidOptionChange.fire(m),!m&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(m=>{this._onPreserveCaseKeyDown.fire(m)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;let p=[this.preserveCase.domNode];this.onkeydown(this.domNode,m=>{if(m.equals(15)||m.equals(17)||m.equals(9)){let f=p.indexOf(this.domNode.ownerDocument.activeElement);if(f>=0){let g=-1;m.equals(17)?g=(f+1)%p.length:m.equals(15)&&(f===0?g=p.length-1:g=f-1),m.equals(9)?(p[f].blur(),this.inputBox.focus()):g>=0&&p[g].focus(),We.stop(m,!0)}}});let h=document.createElement("div");h.className="controls",h.style.display=this._showOptionButtons?"block":"none",h.appendChild(this.preserveCase.domNode),this.domNode.appendChild(h),t?.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,m=>this._onKeyDown.fire(m)),this.onkeyup(this.inputBox.inputElement,m=>this._onKeyUp.fire(m)),this.oninput(this.inputBox.inputElement,m=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,m=>this._onMouseDown.fire(m))}static OPTION_CHANGE="optionChange";contextViewProvider;placeholder;validation;label;fixFocusOnOptionClickEnabled=!0;preserveCase;cachedOptionsWidth=0;domNode;inputBox;_onDidOptionChange=this._register(new x);onDidOptionChange=this._onDidOptionChange.event;_onKeyDown=this._register(new x);onKeyDown=this._onKeyDown.event;_onMouseDown=this._register(new x);onMouseDown=this._onMouseDown.event;_onInput=this._register(new x);onInput=this._onInput.event;_onKeyUp=this._register(new x);onKeyUp=this._onKeyUp.event;_onPreserveCaseKeyDown=this._register(new x);onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event;enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setFocusInputOnOptionClick(t){this.fixFocusOnOptionClickEnabled=t}setEnabled(t){t?this.enable():this.disable()}clear(){this.clearValidation(),this.setValue(""),this.focus()}getValue(){return this.inputBox.value}setValue(t){this.inputBox.value!==t&&(this.inputBox.value=t)}onSearchSubmit(){this.inputBox.addToHistory()}applyStyles(){}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(t){this.preserveCase.checked=t}focusOnPreserve(){this.preserveCase.focus()}_lastHighlightFindOptions=0;highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox?.validate()}showMessage(t){this.inputBox?.showMessage(t)}clearMessage(){this.inputBox?.hideMessage()}clearValidation(){this.inputBox?.hideMessage()}set width(t){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=t+"px"}dispose(){super.dispose()}};var XU=new V("suggestWidgetVisible",!1,c("suggestWidgetVisible","Whether suggestion are visible")),T0="historyNavigationWidgetFocus",QU="historyNavigationForwardsEnabled",JU="historyNavigationBackwardsEnabled",Vf,fT=[];function E0(r,e){if(fT.includes(e))throw new Error("Cannot register the same widget multiple times");fT.push(e);let t=new Q,n=new V(T0,!1).bindTo(r),i=new V(QU,!0).bindTo(r),o=new V(JU,!0).bindTo(r),s=()=>{n.set(!0),Vf=e},a=()=>{n.set(!1),Vf===e&&(Vf=void 0)};return or(e.element)&&s(),t.add(e.onDidFocus(()=>s())),t.add(e.onDidBlur(()=>a())),t.add(ie(()=>{fT.splice(fT.indexOf(e),1),a()})),{historyNavigationForwardsEnablement:i,historyNavigationBackwardsEnablement:o,dispose(){t.dispose()}}}var mh=class extends pd{constructor(e,t,n,i){super(e,t,n);let o=this._register(i.createScoped(this.element));this._register(E0(o,this))}};mh=C([v(3,Ge)],mh);var bT=class extends Qp{constructor(e,t,n,i){super(e,t,n);let o=this._register(i.createScoped(this.inputBox.element));this._register(E0(o,this.inputBox))}};bT=C([v(3,Ge)],bT);var vT=class extends gT{constructor(e,t,n,i,o=!1){super(e,t,o,n);let s=this._register(i.createScoped(this.inputBox.element));this._register(E0(s,this.inputBox))}};vT=C([v(3,Ge)],vT);Bi.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:X.and(X.has(T0),X.equals(JU,!0),X.not("isComposing"),XU.isEqualTo(!1)),primary:16,secondary:[528],handler:r=>{Vf?.showPreviousValue()}});Bi.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:X.and(X.has(T0),X.equals(QU,!0),X.not("isComposing"),XU.isEqualTo(!1)),primary:18,secondary:[530],handler:r=>{Vf?.showNextValue()}});function ZU(r){return r.lookupKeybinding("history.showPrevious")?.getElectronAccelerator()==="Up"&&r.lookupKeybinding("history.showNext")?.getElectronAccelerator()==="Down"}var eV=new me("menu.view.filter"),tV=new me("submenu.view.filter");Vt.appendMenuItem(eV,{submenu:tV,title:c("more filters","More Filters..."),group:"navigation",icon:z.filter});var w0=class extends Nc{_checked=!1;set checked(e){this._checked!==e&&(this._checked=e,this.updateChecked())}updateChecked(){this.element&&this.element.classList.toggle("checked",this._checked)}render(e){super.render(e),this.updateChecked()}},fh=class extends Jn{constructor(t,n,i,o,s){super();this.options=t;this.instantiationService=n;this.contextViewService=i;this.keybindingService=s;this.delayedFilterUpdate=new so(400),this._register(ie(()=>this.delayedFilterUpdate.cancel())),t.focusContextKey&&(this.focusContextKey=new V(t.focusContextKey,!1).bindTo(o)),this.element=ue(".viewpane-filter"),[this.filterInputBox,this.focusTracker]=this.createInput(this.element),this._register(this.filterInputBox),this._register(this.focusTracker);let a=Ie(this.element,ue(".viewpane-filter-controls"));this.filterBadge=this.createBadge(a),this.toolbar=this._register(this.createToolBar(a)),this.adjustInputBox()}element;delayedFilterUpdate;filterInputBox;filterBadge;toolbar;focusContextKey;_onDidChangeFilterText=this._register(new x);onDidChangeFilterText=this._onDidChangeFilterText.event;moreFiltersActionViewItem;isMoreFiltersChecked=!1;lastWidth;focusTracker;get onDidFocus(){return this.focusTracker.onDidFocus}get onDidBlur(){return this.focusTracker.onDidBlur}hasFocus(){return this.filterInputBox.hasFocus()}focus(){this.filterInputBox.focus()}blur(){this.filterInputBox.blur()}updateBadge(t){this.filterBadge.classList.toggle("hidden",!t),this.filterBadge.textContent=t||"",this.adjustInputBox()}setFilterText(t){this.filterInputBox.value=t}getFilterText(){return this.filterInputBox.value}getHistory(){return this.filterInputBox.getHistory()}layout(t){this.element.parentElement?.classList.toggle("grow",t>700),this.element.classList.toggle("small",t<400),this.adjustInputBox(),this.lastWidth=t}relayout(){this.lastWidth&&this.layout(this.lastWidth)}checkMoreFilters(t){this.isMoreFiltersChecked=t,this.moreFiltersActionViewItem&&(this.moreFiltersActionViewItem.checked=t)}createInput(t){let n=this._register(this.instantiationService.createInstance(mh,t,this.contextViewService,{placeholder:this.options.placeholder,ariaLabel:this.options.ariaLabel,history:this.options.history||[],showHistoryHint:()=>ZU(this.keybindingService),inputBoxStyles:DR}));this.options.text&&(n.value=this.options.text),this._register(n.onDidChange(o=>this.delayedFilterUpdate.trigger(()=>this.onDidInputChange(n)))),this._register(si(n.inputElement,se.KEY_DOWN,o=>this.onInputKeyDown(o,n))),this._register(si(t,se.KEY_DOWN,this.handleKeyboardEvent)),this._register(si(t,se.KEY_UP,this.handleKeyboardEvent)),this._register(si(n.inputElement,se.CLICK,o=>{o.stopPropagation(),o.preventDefault()}));let i=this._register(co(n.inputElement));return this.focusContextKey&&(this._register(i.onDidFocus(()=>this.focusContextKey.set(!0))),this._register(i.onDidBlur(()=>this.focusContextKey.set(!1))),this._register(ie(()=>this.focusContextKey.reset()))),[n,i]}createBadge(t){let n=Ie(t,ue(".viewpane-filter-badge.hidden"));return n.style.backgroundColor=ne(Wl),n.style.color=ne(Oy),n.style.border=`1px solid ${ne(pe)}`,n}createToolBar(t){return this.instantiationService.createInstance(hh,t,eV,{hiddenItemStrategy:-1,actionViewItemProvider:(n,i)=>{if(n instanceof wi&&n.item.submenu.id===tV.id)return this.moreFiltersActionViewItem=this.instantiationService.createInstance(w0,n,i),this.moreFiltersActionViewItem.checked=this.isMoreFiltersChecked,this.moreFiltersActionViewItem}})}onDidInputChange(t){t.addToHistory(),this._onDidChangeFilterText.fire(t.value)}adjustInputBox(){this.filterInputBox.inputElement.style.paddingRight=this.element.classList.contains("small")||this.filterBadge.classList.contains("hidden")?"25px":"150px"}handleKeyboardEvent(t){(t.equals(10)||t.equals(15)||t.equals(17)||t.equals(14)||t.equals(13))&&t.stopPropagation()}onInputKeyDown(t,n){let i=!1;t.equals(2)&&!this.toolbar.isEmpty()&&(this.toolbar.focus(),i=!0),i&&(t.stopPropagation(),t.preventDefault())}};fh=C([v(1,_e),v(2,jp),v(3,Ge),v(4,Wn)],fh);var v9t=A("accessibleViewInformationService"),yT=class extends P{constructor(t){super();this._storageService=t}hasShownAccessibleView(t){return this._storageService.getBoolean(`${VA}${t}`,-1,!1)===!0}};yT=C([v(0,Xe)],yT);var ST=new un("viewpane.action.filter"),m3=Ne("view-pane-container-expanded",z.chevronDown,c("viewPaneContainerExpandedIcon","Icon for an expanded view pane container.")),g3=Ne("view-pane-container-collapsed",z.chevronRight,c("viewPaneContainerCollapsedIcon","Icon for a collapsed view pane container.")),nV=Ce.as(Lf.ViewsRegistry),Wf=class{constructor(e,t,n,i,o,s,a){this.container=e;this.delegate=t;this.instantiationService=n;this.openerService=i;this.telemetryService=o;this.contextKeyService=s;this.disposables.add(N.runAndSubscribe(this.delegate.onDidChangeViewWelcomeState,()=>this.onDidChangeViewWelcomeState())),this.disposables.add(a.onWillShutdown(()=>this.dispose()))}defaultItem;items=[];get enabled(){return this._enabled}_enabled=!1;element;scrollableElement;disposables=new Q;enabledDisposables=this.disposables.add(new Q);renderDisposables=this.disposables.add(new Q);layout(e,t){this._enabled&&(this.element.style.height=`${e}px`,this.element.style.width=`${t}px`,this.element.classList.toggle("wide",t>640),this.scrollableElement.scanDomNode())}focus(){this._enabled&&this.element.focus()}onDidChangeViewWelcomeState(){let e=this.delegate.shouldShowWelcome();if(this._enabled===e)return;if(this._enabled=e,!e){this.enabledDisposables.clear();return}this.container.classList.add("welcome");let t=Ie(this.container,ue(".welcome-view"));this.element=ue(".welcome-view-content",{tabIndex:0}),this.scrollableElement=new vc(this.element,{alwaysConsumeMouseWheel:!0,horizontal:2,vertical:3}),Ie(t,this.scrollableElement.getDomNode()),this.enabledDisposables.add(ie(()=>{this.container.classList.remove("welcome"),this.scrollableElement.dispose(),t.remove(),this.scrollableElement=void 0,this.element=void 0})),this.contextKeyService.onDidChangeContext(this.onDidChangeContext,this,this.enabledDisposables),N.chain(nV.onDidChangeViewWelcomeContent,n=>n.filter(i=>i===this.delegate.id))(this.onDidChangeViewWelcomeContent,this,this.enabledDisposables),this.onDidChangeViewWelcomeContent()}onDidChangeViewWelcomeContent(){let e=nV.getViewWelcomeContent(this.delegate.id);this.items=[];for(let t of e)if(t.when==="default")this.defaultItem={descriptor:t,visible:!0};else{let n=t.when?this.contextKeyService.contextMatchesRules(t.when):!0;this.items.push({descriptor:t,visible:n})}this.render()}onDidChangeContext(){let e=!1;for(let t of this.items){if(!t.descriptor.when||t.descriptor.when==="default")continue;let n=this.contextKeyService.contextMatchesRules(t.descriptor.when);t.visible!==n&&(t.visible=n,e=!0)}e&&this.render()}render(){this.renderDisposables.clear(),this.element.innerText="";let e=this.getContentDescriptors();if(e.length===0){this.container.classList.remove("welcome"),this.scrollableElement.scanDomNode();return}for(let{content:t,precondition:n}of e){let i=t.split(`
`);for(let o of i){if(o=o.trim(),!o)continue;let s=YU(o);if(s.nodes.length===1&&typeof s.nodes[0]!="string"){let a=s.nodes[0],l=Ie(this.element,ue(".button-container")),d=new bf(l,{title:a.title,supportIcons:!0,...H2});if(d.label=a.label,d.onDidClick(u=>{this.telemetryService.publicLog2("views.welcomeAction",{viewId:this.delegate.id,uri:a.href}),this.openerService.open(a.href,{allowCommands:!0})},null,this.renderDisposables),this.renderDisposables.add(d),n){let u=()=>d.enabled=this.contextKeyService.contextMatchesRules(n);u();let p=new Set(n.keys());N.filter(this.contextKeyService.onDidChangeContext,m=>m.affectsSome(p))(u,null,this.renderDisposables)}}else{let a=Ie(this.element,ue("p"));for(let l of s.nodes)if(typeof l=="string")Ie(a,document.createTextNode(l));else{let d=this.renderDisposables.add(this.instantiationService.createInstance(ch,a,l,{}));if(n&&l.href.startsWith("command:")){let u=()=>d.enabled=this.contextKeyService.contextMatchesRules(n);u();let p=new Set(n.keys());N.filter(this.contextKeyService.onDidChangeContext,m=>m.affectsSome(p))(u,null,this.renderDisposables)}}}}}this.container.classList.add("welcome"),this.scrollableElement.scanDomNode()}getContentDescriptors(){let e=this.items.filter(t=>t.visible);return e.length===0&&this.defaultItem?[this.defaultItem.descriptor]:e.map(t=>t.descriptor)}dispose(){this.disposables.dispose()}};Wf=C([v(2,_e),v(3,hs),v(4,Ot),v(5,Ge),v(6,Oo)],Wf);var Kc=class extends eT{constructor(t,n,i,o,s,a,l,d,u,p,h,m){super({...t,orientation:a.getViewLocationById(t.id)===1?1:0});this.keybindingService=n;this.contextMenuService=i;this.configurationService=o;this.contextKeyService=s;this.viewDescriptorService=a;this.instantiationService=l;this.openerService=d;this.themeService=u;this.telemetryService=p;this.hoverService=h;this.accessibleViewInformationService=m;this.id=t.id,this._title=t.title,this._titleDescription=t.titleDescription,this._singleViewPaneContainerTitle=t.singleViewPaneContainerTitle,this.showActions=t.showActions??0,this.scopedContextKeyService=this._register(s.createScoped(this.element)),this.scopedContextKeyService.createKey("view",this.id);let f=this.scopedContextKeyService.createKey("viewLocation",Si(a.getViewLocationById(this.id)));this._register(N.filter(a.onDidChangeLocation,y=>y.views.some(T=>T.id===this.id))(()=>f.set(Si(a.getViewLocationById(this.id)))));let g=this._register(this.instantiationService.createChild(new _a([Ge,this.scopedContextKeyService])));this.menuActions=this._register(g.createInstance(yd,t.titleMenuId??me.ViewTitle,me.ViewTitleContext,{shouldForwardArgs:!t.donotForwardArgs,renderShortTitle:!0})),this._register(this.menuActions.onDidChange(()=>this.updateActions()))}static AlwaysShowActionsConfig="workbench.view.alwaysShowHeaderActions";_onDidFocus=this._register(new x);onDidFocus=this._onDidFocus.event;_onDidBlur=this._register(new x);onDidBlur=this._onDidBlur.event;_onDidChangeBodyVisibility=this._register(new x);onDidChangeBodyVisibility=this._onDidChangeBodyVisibility.event;_onDidChangeTitleArea=this._register(new x);onDidChangeTitleArea=this._onDidChangeTitleArea.event;_onDidChangeViewWelcomeState=this._register(new x);onDidChangeViewWelcomeState=this._onDidChangeViewWelcomeState.event;_isVisible=!1;id;_title;get title(){return this._title}_titleDescription;get titleDescription(){return this._titleDescription}_singleViewPaneContainerTitle;get singleViewPaneContainerTitle(){return this._singleViewPaneContainerTitle}menuActions;progressBar;progressIndicator;toolbar;showActions;headerContainer;titleContainer;titleContainerHover;titleDescriptionContainer;titleDescriptionContainerHover;iconContainer;iconContainerHover;twistiesContainer;viewWelcomeController;scopedContextKeyService;get headerVisible(){return super.headerVisible}set headerVisible(t){super.headerVisible=t,this.element.classList.toggle("merged-header",!t)}setVisible(t){this._isVisible!==t&&(this._isVisible=t,this.isExpanded()&&this._onDidChangeBodyVisibility.fire(t))}isVisible(){return this._isVisible}isBodyVisible(){return this._isVisible&&this.isExpanded()}setExpanded(t){let n=super.setExpanded(t);return n&&this._onDidChangeBodyVisibility.fire(t),this.updateTwistyIcon(),n}render(){super.render();let t=co(this.element);this._register(t),this._register(t.onDidFocus(()=>this._onDidFocus.fire())),this._register(t.onDidBlur(()=>this._onDidBlur.fire()))}renderHeader(t){this.headerContainer=t,this.twistiesContainer=Ie(t,ue(`.twisty-container${qe.asCSSSelector(this.getTwistyIcon(this.isExpanded()))}`)),this.renderHeaderTitle(t,this.title);let n=Ie(t,ue(".actions"));n.classList.toggle("show-always",this.showActions===2),n.classList.toggle("show-expanded",this.showActions===1),this.toolbar=this.instantiationService.createInstance(Hc,n,{orientation:0,actionViewItemProvider:(s,a)=>this.getActionViewItem(s,a),ariaLabel:c("viewToolbarAriaLabel","{0} actions",this.title),getKeyBinding:s=>this.keybindingService.lookupKeybinding(s.id),renderDropdownAsChildElement:!0,actionRunner:this.getActionRunner(),resetMenu:this.menuActions.menuId}),this._register(this.toolbar),this.setActions(),this._register(K(n,se.CLICK,s=>s.preventDefault()));let i=this.viewDescriptorService.getViewContainerByViewId(this.id);i?this._register(this.viewDescriptorService.getViewContainerModel(i).onDidChangeContainerInfo(({title:s})=>this.updateTitle(this.title))):console.error(`View container model not found for view ${this.id}`);let o=N.filter(this.configurationService.onDidChangeConfiguration,s=>s.affectsConfiguration(Kc.AlwaysShowActionsConfig));this._register(o(this.updateActionsVisibility,this)),this.updateActionsVisibility()}updateHeader(){super.updateHeader(),this.updateTwistyIcon()}updateTwistyIcon(){this.twistiesContainer&&(this.twistiesContainer.classList.remove(...qe.asClassNameArray(this.getTwistyIcon(!this._expanded))),this.twistiesContainer.classList.add(...qe.asClassNameArray(this.getTwistyIcon(this._expanded))))}getTwistyIcon(t){return t?m3:g3}style(t){super.style(t);let n=this.getIcon();if(this.iconContainer){let i=Rr(t.headerForeground,ne(pt));W.isUri(n)?(this.iconContainer.style.backgroundColor=i,this.iconContainer.style.color=""):(this.iconContainer.style.color=i,this.iconContainer.style.backgroundColor="")}}getIcon(){return this.viewDescriptorService.getViewDescriptorById(this.id)?.containerIcon||sU}renderHeaderTitle(t,n){this.iconContainer=Ie(t,ue(".icon",void 0));let i=this.getIcon(),o;if(W.isUri(i)){o=`view-${this.id.replace(/[\.\:]/g,"-")}`;let a=`.pane-header .icon.${o}`;v_(a,`
				mask: ${ed(i)} no-repeat 50% 50%;
				mask-size: 24px;
				-webkit-mask: ${ed(i)} no-repeat 50% 50%;
				-webkit-mask-size: 16px;
			`)}else qe.isThemeIcon(i)&&(o=qe.asClassName(i));o&&this.iconContainer.classList.add(...o.split(" "));let s=this.calculateTitle(n);this.titleContainer=Ie(t,ue("h3.title",{},s)),this.titleContainerHover=this._register(this.hoverService.setupManagedHover(Pt("mouse"),this.titleContainer,s)),this._titleDescription&&this.setTitleDescription(this._titleDescription),this.iconContainerHover=this._register(this.hoverService.setupManagedHover(Pt("mouse"),this.iconContainer,s)),this.iconContainer.setAttribute("aria-label",this._getAriaLabel(s))}_getAriaLabel(t){let n=this.viewDescriptorService.getViewDescriptorById(this.id)?.accessibilityHelpContent,i=this.accessibleViewInformationService?.hasShownAccessibleView(this.id);return!n||i?t:c("viewAccessibilityHelp","Use Alt+F1 for accessibility help {0}",t)}updateTitle(t){let n=this.calculateTitle(t);this.titleContainer&&(this.titleContainer.textContent=n,this.titleContainerHover?.update(n)),this.iconContainer&&(this.iconContainerHover?.update(n),this.iconContainer.setAttribute("aria-label",this._getAriaLabel(n))),this._title=t,this._onDidChangeTitleArea.fire()}setTitleDescription(t){this.titleDescriptionContainer?(this.titleDescriptionContainer.textContent=t??"",this.titleDescriptionContainerHover?.update(t??"")):t&&this.titleContainer&&(this.titleDescriptionContainer=sB(this.titleContainer,ue("span.description",{},t)),this.titleDescriptionContainerHover=this._register(this.hoverService.setupManagedHover(Pt("mouse"),this.titleDescriptionContainer,t)))}updateTitleDescription(t){this.setTitleDescription(t),this._titleDescription=t,this._onDidChangeTitleArea.fire()}calculateTitle(t){let n=this.viewDescriptorService.getViewContainerByViewId(this.id),i=this.viewDescriptorService.getViewContainerModel(n),o=this.viewDescriptorService.getViewDescriptorById(this.id);return!(this.viewDescriptorService.getDefaultContainerById(this.id)===n)&&o?.containerTitle&&i.title!==o.containerTitle?`${o.containerTitle}: ${t}`:t}renderBody(t){this.viewWelcomeController=this._register(this.instantiationService.createInstance(Wf,t,this))}layoutBody(t,n){this.viewWelcomeController.layout(t,n)}onDidScrollRoot(){}getProgressIndicator(){if(this.progressBar===void 0&&(this.progressBar=this._register(new nx(this.element,K2)),this.progressBar.hide()),this.progressIndicator===void 0){let t=this;this.progressIndicator=this._register(new cT(Rt(this.progressBar),new class extends uT{constructor(){super(t.id,t.isBodyVisible()),this._register(t.onDidChangeBodyVisibility(n=>n?this.onScopeOpened(t.id):this.onScopeClosed(t.id)))}}))}return this.progressIndicator}getProgressLocation(){return this.viewDescriptorService.getViewContainerByViewId(this.id).id}getLocationBasedColors(){return f3(this.viewDescriptorService.getViewLocationById(this.id))}focus(){this.viewWelcomeController.enabled?this.viewWelcomeController.focus():this.element&&(this.element.focus(),this._onDidFocus.fire())}setActions(){if(this.toolbar){let t=[...this.menuActions.getPrimaryActions()];this.shouldShowFilterInHeader()&&t.unshift(ST),this.toolbar.setActions(Q_(t),Q_(this.menuActions.getSecondaryActions())),this.toolbar.context=this.getActionsContext()}}updateActionsVisibility(){if(!this.headerContainer)return;let t=this.configurationService.getValue("workbench.view.alwaysShowHeaderActions");this.headerContainer.classList.toggle("actions-always-visible",t)}updateActions(){this.setActions(),this._onDidChangeTitleArea.fire()}getActionViewItem(t,n){if(t.id===ST.id){let i=this;return new class extends Ii{constructor(){super(null,t)}setFocusable(){}get trapsArrowNavigation(){return!0}render(o){o.classList.add("viewpane-filter-container");let s=i.getFilterWidget();Ie(o,s.element),s.relayout()}}}return hx(this.instantiationService,t,{...n,menuAsChild:t instanceof wi})}getActionsContext(){}getActionRunner(){}getOptimalWidth(){return 0}saveState(){}shouldShowWelcome(){return!1}getFilterWidget(){}shouldShowFilterInHeader(){return!1}};Kc=C([v(1,Wn),v(2,Sn),v(3,ke),v(4,Ge),v(5,$i),v(6,_e),v(7,hs),v(8,_n),v(9,Ot),v(10,No)],Kc);var IT=class extends Kc{filterWidget;dimension;filterContainer;constructor(e,t,n,i,o,s,a,l,d,u,p,h){super(e,t,n,i,o,s,a,l,d,u,p,h);let m=this._register(a.createChild(new _a([Ge,this.scopedContextKeyService])));this.filterWidget=this._register(m.createInstance(fh,e.filterOptions))}getFilterWidget(){return this.filterWidget}renderBody(e){super.renderBody(e),this.filterContainer=Ie(e,ue(".viewpane-filter-container"))}layoutBody(e,t){super.layoutBody(e,t),this.dimension=new Pn(t,e);let n=!this.filterContainer?.hasChildNodes(),i=this.shouldShowFilterInHeader();n!==i&&(i&&us(this.filterContainer),this.updateActions(),i||Ie(this.filterContainer,this.filterWidget.element)),i||(e=e-44),this.filterWidget.layout(t),this.layoutBodyContent(e,t)}shouldShowFilterInHeader(){return!(this.dimension&&this.dimension.width<600&&this.dimension.height>100)}};IT=C([v(1,Wn),v(2,Sn),v(3,ke),v(4,Ge),v(5,$i),v(6,_e),v(7,hs),v(8,_n),v(9,Ot),v(10,No)],IT);function f3(r){let e,t,n,i;switch(r){case 1:e=l0,t=wU,n=CU,i=kU;break;case 0:case 2:default:e=Jx,t=VU,n=WU,i=zU}return{background:e,listOverrideStyles:{listBackground:e,treeStickyScrollBackground:t,treeStickyScrollBorder:n,treeStickyScrollShadow:i}}}var xT=class extends bh{constantViewDescriptors=new Map;allViews=new Map;filterValue;constructor(e,t,n,i,o,s,a,l,d,u,p,h){super(e,{mergeViewWithContainerWhenSingleView:!1},a,n,i,d,o,u,l,s,p,h),this._register(t(m=>{this.filterValue=m,this.onFilterChanged(m)})),this._register(this.viewContainerModel.onDidChangeActiveViewDescriptors(()=>{this.updateAllViews(this.viewContainerModel.activeViewDescriptors)}))}updateAllViews(e){e.forEach(t=>{let n=this.getFilterOn(t);n&&(this.allViews.has(n)||this.allViews.set(n,new Map),this.allViews.get(n).set(t.id,t),this.filterValue&&!this.filterValue.includes(n)&&this.panes.find(i=>i.id===t.id)&&this.viewContainerModel.setVisible(t.id,!1))})}addConstantViewDescriptors(e){e.forEach(t=>this.constantViewDescriptors.set(t.id,t))}onFilterChanged(e){this.allViews.size===0&&this.updateAllViews(this.viewContainerModel.activeViewDescriptors),this.getViewsNotForTarget(e).forEach(t=>this.viewContainerModel.setVisible(t.id,!1)),this.getViewsForTarget(e).forEach(t=>this.viewContainerModel.setVisible(t.id,!0))}getViewsForTarget(e){let t=[];for(let n=0;n<e.length;n++)this.allViews.has(e[n])&&t.push(...Array.from(this.allViews.get(e[n]).values()));return t}getViewsNotForTarget(e){let t=this.allViews.keys(),n=t.next(),i=[];for(;!n.done;){let o=!1;e.forEach(s=>{n.value===s&&(o=!0)}),o||(i=i.concat(this.getViewsForTarget([n.value]))),n=t.next()}return i}onDidAddViewDescriptors(e){let t=super.onDidAddViewDescriptors(e);for(let n=0;n<e.length;n++)this.constantViewDescriptors.has(e[n].viewDescriptor.id)&&t[n].setExpanded(!1);return this.allViews.size===0&&this.updateAllViews(this.viewContainerModel.activeViewDescriptors),t}openView(e,t){let n=super.openView(e,t);if(n){let i=Array.from(this.allViews.entries()).find(o=>o[1].has(e));i&&!this.filterValue?.includes(i[0])&&this.setFilter(i[1].get(e))}return n}};xT=C([v(2,ke),v(3,ct),v(4,Ot),v(5,Xe),v(6,_e),v(7,_n),v(8,Sn),v(9,Kn),v(10,Un),v(11,$i)],xT);var C0=new me("Views");Vt.appendMenuItem(me.ViewContainerTitle,{submenu:C0,title:c("views","Views"),order:1});var vh=class r extends Qu{constructor(t,n,i,o,s){super(s);this.paneElement=t;this.orientation=n;this.bounds=i;this.location=o;this.cleanupOverlayScheduler=this._register(new Bn(()=>this.dispose(),300)),this.create()}static OVERLAY_ID="monaco-pane-drop-overlay";container;overlay;_currentDropOperation;_disposed;cleanupOverlayScheduler;get currentDropOperation(){return this._currentDropOperation}get disposed(){return!!this._disposed}create(){this.container=document.createElement("div"),this.container.id=r.OVERLAY_ID,this.container.style.top="0px",this.paneElement.appendChild(this.container),this.paneElement.classList.add("dragged-over"),this._register(ie(()=>{this.container.remove(),this.paneElement.classList.remove("dragged-over")})),this.overlay=document.createElement("div"),this.overlay.classList.add("pane-overlay-indicator"),this.container.appendChild(this.overlay),this.registerListeners(),this.updateStyles()}updateStyles(){this.overlay.style.backgroundColor=this.getColor(this.location===1?d0:u0)||"";let t=this.getColor(yt);this.overlay.style.outlineColor=t||"",this.overlay.style.outlineOffset=t?"-2px":"",this.overlay.style.outlineStyle=t?"dashed":"",this.overlay.style.outlineWidth=t?"2px":"",this.overlay.style.borderColor=t||"",this.overlay.style.borderStyle="solid",this.overlay.style.borderWidth="0px"}registerListeners(){this._register(new mc(this.container,{onDragOver:t=>{this.positionOverlay(t.offsetX,t.offsetY),this.cleanupOverlayScheduler.isScheduled()&&this.cleanupOverlayScheduler.cancel()},onDragLeave:t=>this.dispose(),onDragEnd:t=>this.dispose(),onDrop:t=>{this.dispose()}})),this._register(K(this.container,se.MOUSE_OVER,()=>{this.cleanupOverlayScheduler.isScheduled()||this.cleanupOverlayScheduler.schedule()}))}positionOverlay(t,n){let i=this.paneElement.clientWidth,o=this.paneElement.clientHeight,s=i/2,a=o/2,l;switch(this.orientation===0?n<a?l=0:n>=a&&(l=1):this.orientation===1&&(t<s?l=2:t>=s&&(l=3)),l){case 0:this.doPositionOverlay({top:"0",left:"0",width:"100%",height:"50%"});break;case 1:this.doPositionOverlay({bottom:"0",left:"0",width:"100%",height:"50%"});break;case 2:this.doPositionOverlay({top:"0",left:"0",width:"50%",height:"100%"});break;case 3:this.doPositionOverlay({top:"0",right:"0",width:"50%",height:"100%"});break;default:{let d="0",u="0",p="100%",h="100%";if(this.bounds){let m=this.container.getBoundingClientRect();d=`${this.bounds.top-m.top}px`,u=`${this.bounds.left-m.left}px`,h=`${this.bounds.bottom-this.bounds.top}px`,p=`${this.bounds.right-this.bounds.left}px`}this.doPositionOverlay({top:d,left:u,width:p,height:h})}}this.orientation===0&&o<=25||this.orientation===1&&i<=25?this.doUpdateOverlayBorder(l):this.doUpdateOverlayBorder(void 0),this.overlay.style.opacity="1",setTimeout(()=>this.overlay.classList.add("overlay-move-transition"),0),this._currentDropOperation=l}doUpdateOverlayBorder(t){this.overlay.style.borderTopWidth=t===0?"2px":"0px",this.overlay.style.borderLeftWidth=t===2?"2px":"0px",this.overlay.style.borderBottomWidth=t===1?"2px":"0px",this.overlay.style.borderRightWidth=t===3?"2px":"0px"}doPositionOverlay(t){this.container.style.height="100%",this.overlay.style.top=t.top||"",this.overlay.style.left=t.left||"",this.overlay.style.bottom=t.bottom||"",this.overlay.style.right=t.right||"",this.overlay.style.width=t.width,this.overlay.style.height=t.height}contains(t){return t===this.container||t===this.overlay}dispose(){super.dispose(),this._disposed=!0}},Hf=class extends yd{constructor(e,t,n,i,o){let s=i.createScoped(e);s.createKey("viewContainer",t.id);let a=s.createKey("viewContainerLocation",Si(n.getViewContainerLocation(t)));super(me.ViewContainerTitle,me.ViewContainerTitleContext,{shouldForwardArgs:!0,renderShortTitle:!0},s,o),this._register(s),this._register(N.filter(n.onDidChangeContainerLocation,l=>l.viewContainer===t)(()=>a.set(Si(n.getViewContainerLocation(t)))))}};Hf=C([v(2,$i),v(3,Ge),v(4,ro)],Hf);var bh=class extends Ha{constructor(t,n,i,o,s,a,l,d,u,p,h,m){super(t,u,p);this.options=n;this.instantiationService=i;this.configurationService=o;this.layoutService=s;this.contextMenuService=a;this.telemetryService=l;this.extensionService=d;this.storageService=p;this.contextService=h;this.viewDescriptorService=m;let f=this.viewDescriptorService.getViewContainerById(t);if(!f)throw new Error("Could not find container");this.viewContainer=f,this.visibleViewsStorageId=`${t}.numberOfVisibleViews`,this.visibleViewsCountFromCache=this.storageService.getNumber(this.visibleViewsStorageId,1,void 0),this.viewContainerModel=this.viewDescriptorService.getViewContainerModel(f)}viewContainer;lastFocusedPane;lastMergedCollapsedPane;paneItems=[];paneview;visible=!1;areExtensionsReady=!1;didLayout=!1;dimension;_boundarySashes;visibleViewsCountFromCache;visibleViewsStorageId;viewContainerModel;_onTitleAreaUpdate=this._register(new x);onTitleAreaUpdate=this._onTitleAreaUpdate.event;_onDidChangeVisibility=this._register(new x);onDidChangeVisibility=this._onDidChangeVisibility.event;_onDidAddViews=this._register(new x);onDidAddViews=this._onDidAddViews.event;_onDidRemoveViews=this._register(new x);onDidRemoveViews=this._onDidRemoveViews.event;_onDidChangeViewVisibility=this._register(new x);onDidChangeViewVisibility=this._onDidChangeViewVisibility.event;_onDidFocusView=this._register(new x);onDidFocusView=this._onDidFocusView.event;_onDidBlurView=this._register(new x);onDidBlurView=this._onDidBlurView.event;get onDidSashChange(){return Rt(this.paneview).onDidSashChange}get panes(){return this.paneItems.map(t=>t.pane)}get views(){return this.panes}get length(){return this.paneItems.length}_menuActions;get menuActions(){return this._menuActions}create(t){let n=this.options;n.orientation=this.orientation,this.paneview=this._register(new tT(t,this.options)),this._boundarySashes&&this.paneview.setBoundarySashes(this._boundarySashes),this._register(this.paneview.onDidDrop(({from:d,to:u})=>this.movePane(d,u))),this._register(this.paneview.onDidScroll(d=>this.onDidScrollPane())),this._register(this.paneview.onDidSashReset(d=>this.onDidSashReset(d))),this._register(K(t,se.CONTEXT_MENU,d=>this.showContextMenu(new zn(Le(t),d)))),this._register(Zt.addTarget(t)),this._register(K(t,wt.Contextmenu,d=>this.showContextMenu(new zn(Le(t),d)))),this._menuActions=this._register(this.instantiationService.createInstance(Hf,this.paneview.element,this.viewContainer)),this._register(this._menuActions.onDidChange(()=>this.updateTitleArea()));let i,o=()=>{let d=t.getBoundingClientRect(),u=this.panes[this.panes.length-1].element.getBoundingClientRect(),p=this.orientation===0?u.bottom:d.top,h=this.orientation===1?u.right:d.left;return{top:p,bottom:d.bottom,left:h,right:d.right}},s=(d,u)=>u.x>=d.left&&u.x<=d.right&&u.y>=d.top&&u.y<=d.bottom,a;this._register(dh.INSTANCE.registerTarget(t,{onDragEnter:d=>{if(a=o(),i&&i.disposed&&(i=void 0),!i&&s(a,d.eventData)){let u=d.dragAndDropData.getData();if(u.type==="view"){let p=this.viewDescriptorService.getViewContainerByViewId(u.id),h=this.viewDescriptorService.getViewDescriptorById(u.id);if(p!==this.viewContainer&&(!h||!h.canMoveView||this.viewContainer.rejectAddedViews))return;i=new vh(t,void 0,a,this.viewDescriptorService.getViewContainerLocation(this.viewContainer),this.themeService)}if(u.type==="composite"&&u.id!==this.viewContainer.id){let p=this.viewDescriptorService.getViewContainerById(u.id),h=this.viewDescriptorService.getViewContainerModel(p).allViewDescriptors;!h.some(m=>!m.canMoveView)&&h.length>0&&(i=new vh(t,void 0,a,this.viewDescriptorService.getViewContainerLocation(this.viewContainer),this.themeService))}}},onDragOver:d=>{i&&i.disposed&&(i=void 0),i&&!s(a,d.eventData)&&(i.dispose(),i=void 0),s(a,d.eventData)&&I0(d.eventData.dataTransfer,"move",i!==void 0)},onDragLeave:d=>{i?.dispose(),i=void 0},onDrop:d=>{if(i){let u=d.dragAndDropData.getData(),p=[];if(u.type==="composite"&&u.id!==this.viewContainer.id){let m=this.viewDescriptorService.getViewContainerById(u.id),f=this.viewDescriptorService.getViewContainerModel(m).allViewDescriptors;f.some(g=>!g.canMoveView)||p.push(...f)}else if(u.type==="view"){let m=this.viewDescriptorService.getViewContainerByViewId(u.id),f=this.viewDescriptorService.getViewDescriptorById(u.id);m!==this.viewContainer&&f&&f.canMoveView&&this.viewDescriptorService.moveViewsToContainer([f],this.viewContainer,void 0,"dnd")}let h=this.panes.length;if(p.length>0&&this.viewDescriptorService.moveViewsToContainer(p,this.viewContainer,void 0,"dnd"),h>0)for(let m of p){let f=this.panes.find(g=>g.id===m.id);f&&this.movePane(f,this.panes[this.panes.length-1])}}i?.dispose(),i=void 0}})),this._register(this.onDidSashChange(()=>this.saveViewSizes())),this._register(this.viewContainerModel.onDidAddVisibleViewDescriptors(d=>this.onDidAddViewDescriptors(d))),this._register(this.viewContainerModel.onDidRemoveVisibleViewDescriptors(d=>this.onDidRemoveViewDescriptors(d)));let l=this.viewContainerModel.visibleViewDescriptors.map((d,u)=>{let p=this.viewContainerModel.getSize(d.id),h=this.viewContainerModel.isCollapsed(d.id);return{viewDescriptor:d,index:u,size:p,collapsed:h}});l.length&&this.onDidAddViewDescriptors(l),this.extensionService.whenInstalledExtensionsRegistered().then(()=>{this.areExtensionsReady=!0,this.panes.length&&(this.updateTitleArea(),this.updateViewHeaders()),this._register(this.configurationService.onDidChangeConfiguration(d=>{d.affectsConfiguration("workbench.activityBar.location")&&this.updateViewHeaders()}))}),this._register(this.viewContainerModel.onDidChangeActiveViewDescriptors(()=>this._onTitleAreaUpdate.fire()))}getTitle(){let t=this.viewContainerModel.title;if(this.isViewMergedWithContainer()){let n=this.paneItems[0].pane.singleViewPaneContainerTitle;if(n)return n;let i=this.paneItems[0].pane.title;return t===i?i:i?`${t}: ${i}`:t}return t}showContextMenu(t){for(let n of this.paneItems)if(_r(t.target,n.pane.element))return;t.stopPropagation(),t.preventDefault(),this.contextMenuService.showContextMenu({getAnchor:()=>t,getActions:()=>this.menuActions?.getContextMenuActions()??[]})}getActionsContext(){if(this.isViewMergedWithContainer())return this.panes[0].getActionsContext()}getActionViewItem(t,n){return this.isViewMergedWithContainer()?this.paneItems[0].pane.getActionViewItem(t,n):hx(this.instantiationService,t,n)}focus(){let t;if(this.lastFocusedPane)t=this.lastFocusedPane;else if(this.paneItems.length>0){for(let{pane:n}of this.paneItems)if(n.isExpanded()){t=n;break}}t&&t.focus()}get orientation(){switch(this.viewDescriptorService.getViewContainerLocation(this.viewContainer)){case 0:case 2:return 0;case 1:return hS(this.layoutService.getPanelPosition())?1:0}return 0}layout(t){this.paneview&&(this.paneview.orientation!==this.orientation&&this.paneview.flipOrientation(t.height,t.width),this.paneview.layout(t.height,t.width)),this.dimension=t,this.didLayout?this.saveViewSizes():(this.didLayout=!0,this.restoreViewSizes())}setBoundarySashes(t){this._boundarySashes=t,this.paneview?.setBoundarySashes(t)}getOptimalWidth(){return Math.max(...this.panes.map(i=>i.getOptimalWidth()||0))+16}addPanes(t){let n=this.isViewMergedWithContainer();for(let{pane:i,size:o,index:s,disposable:a}of t)this.addPane(i,o,a,s);this.updateViewHeaders(),this.isViewMergedWithContainer()!==n&&this.updateTitleArea(),this._onDidAddViews.fire(t.map(({pane:i})=>i))}setVisible(t){this.visible!==!!t&&(this.visible=t,this._onDidChangeVisibility.fire(t)),this.panes.filter(n=>n.isVisible()!==t).map(n=>n.setVisible(t))}isVisible(){return this.visible}updateTitleArea(){this._onTitleAreaUpdate.fire()}createView(t,n){return this.instantiationService.createInstance(t.ctorDescriptor.ctor,...t.ctorDescriptor.staticArguments||[],n)}getView(t){return this.panes.filter(n=>n.id===t)[0]}saveViewSizes(){this.didLayout&&this.viewContainerModel.setSizes(this.panes.map(t=>({id:t.id,size:this.getPaneSize(t)})))}restoreViewSizes(){if(this.didLayout){let t;for(let n=0;n<this.viewContainerModel.visibleViewDescriptors.length;n++){let i=this.panes[n],o=this.viewContainerModel.visibleViewDescriptors[n],s=this.viewContainerModel.getSize(o.id);typeof s=="number"?this.resizePane(i,s):(t=t||this.computeInitialSizes(),this.resizePane(i,t.get(i.id)||200))}}}computeInitialSizes(){let t=new Map;if(this.dimension){let n=this.viewContainerModel.visibleViewDescriptors.reduce((i,{weight:o})=>i+(o||20),0);for(let i of this.viewContainerModel.visibleViewDescriptors)this.orientation===0?t.set(i.id,this.dimension.height*(i.weight||20)/n):t.set(i.id,this.dimension.width*(i.weight||20)/n)}return t}saveState(){this.panes.forEach(t=>t.saveState()),this.storageService.store(this.visibleViewsStorageId,this.length,1,1)}onContextMenu(t,n){t.stopPropagation(),t.preventDefault();let i=n.menuActions.getContextMenuActions();this.contextMenuService.showContextMenu({getAnchor:()=>t,getActions:()=>i})}openView(t,n){let i=this.getView(t);return i||this.toggleViewVisibility(t),i=this.getView(t),i&&(i.setExpanded(!0),n&&i.focus()),i}onDidAddViewDescriptors(t){let n=[];for(let{viewDescriptor:o,collapsed:s,index:a,size:l}of t){let d=this.createView(o,{id:o.id,title:o.name.value,fromExtensionId:o.extensionId,expanded:!s,singleViewPaneContainerTitle:o.singleViewPaneContainerTitle});d.render();let u=K(d.draggableElement,"contextmenu",h=>{h.stopPropagation(),h.preventDefault(),this.onContextMenu(new zn(Le(d.draggableElement),h),d)}),p=N.latch(N.map(d.onDidChange,()=>!d.isExpanded()))(h=>{this.viewContainerModel.setCollapsed(o.id,h)});n.push({pane:d,size:l||d.minimumSize,index:a,disposable:Ti(u,p)})}this.addPanes(n),this.restoreViewSizes();let i=[];for(let{pane:o}of n)o.setVisible(this.isVisible()),i.push(o);return i}onDidRemoveViewDescriptors(t){t=t.sort((i,o)=>o.index-i.index);let n=[];for(let{index:i}of t)this.paneItems[i]&&n.push(this.paneItems[i].pane);if(n.length){this.removePanes(n);for(let i of n)i.setVisible(!1)}}toggleViewVisibility(t){if(this.viewContainerModel.activeViewDescriptors.some(n=>n.id===t)){let n=!this.viewContainerModel.isVisible(t);this.viewContainerModel.setVisible(t,n)}}addPane(t,n,i,o=this.paneItems.length-1){let s=t.onDidFocus(()=>{this._onDidFocusView.fire(t),this.lastFocusedPane=t}),a=t.onDidBlur(()=>this._onDidBlurView.fire(t)),l=t.onDidChangeTitleArea(()=>{this.isViewMergedWithContainer()&&this.updateTitleArea()}),d=t.onDidChangeBodyVisibility(()=>this._onDidChangeViewVisibility.fire(t)),u=t.onDidChange(()=>{t===this.lastFocusedPane&&!t.isExpanded()&&(this.lastFocusedPane=void 0)}),p=this.viewDescriptorService.getViewContainerLocation(this.viewContainer)===1;t.style({headerForeground:ne(p?xU:UU),headerBackground:ne(p?SU:BU),headerBorder:ne(p?TU:p0),dropBackground:ne(p?d0:u0),leftBorder:p?ne(EU):void 0});let h=new Q;h.add(i),h.add(Ti(t,s,a,l,u,d));let m={pane:t,disposable:h};this.paneItems.splice(o,0,m),Rt(this.paneview).addPane(t,n,o);let f;h.add(dh.INSTANCE.registerDraggable(t.draggableElement,()=>({type:"view",id:t.id}),{})),h.add(dh.INSTANCE.registerTarget(t.dropTargetElement,{onDragEnter:g=>{if(!f){let y=g.dragAndDropData.getData();if(y.type==="view"&&y.id!==t.id){let T=this.viewDescriptorService.getViewContainerByViewId(y.id),E=this.viewDescriptorService.getViewDescriptorById(y.id);if(T!==this.viewContainer&&(!E||!E.canMoveView||this.viewContainer.rejectAddedViews))return;f=new vh(t.dropTargetElement,this.orientation??0,void 0,this.viewDescriptorService.getViewContainerLocation(this.viewContainer),this.themeService)}if(y.type==="composite"&&y.id!==this.viewContainer.id&&!this.viewContainer.rejectAddedViews){let T=this.viewDescriptorService.getViewContainerById(y.id),E=this.viewDescriptorService.getViewContainerModel(T).allViewDescriptors;!E.some(D=>!D.canMoveView)&&E.length>0&&(f=new vh(t.dropTargetElement,this.orientation??0,void 0,this.viewDescriptorService.getViewContainerLocation(this.viewContainer),this.themeService))}}},onDragOver:g=>{I0(g.eventData.dataTransfer,"move",f!==void 0)},onDragLeave:g=>{f?.dispose(),f=void 0},onDrop:g=>{if(f){let y=g.dragAndDropData.getData(),T=[],E;if(y.type==="composite"&&y.id!==this.viewContainer.id&&!this.viewContainer.rejectAddedViews){let D=this.viewDescriptorService.getViewContainerById(y.id),_=this.viewDescriptorService.getViewContainerModel(D).allViewDescriptors;_.length>0&&!_.some(O=>!O.canMoveView)&&(T.push(..._),E=_[0])}else if(y.type==="view"){let D=this.viewDescriptorService.getViewContainerByViewId(y.id),_=this.viewDescriptorService.getViewDescriptorById(y.id);D!==this.viewContainer&&_&&_.canMoveView&&!this.viewContainer.rejectAddedViews&&T.push(_),_&&(E=_)}if(T&&this.viewDescriptorService.moveViewsToContainer(T,this.viewContainer,void 0,"dnd"),E){if(f.currentDropOperation===1||f.currentDropOperation===3){let D=this.panes.findIndex(O=>O.id===E.id),_=this.panes.findIndex(O=>O.id===t.id);D>=0&&_>=0&&(D>_&&_++,_<this.panes.length&&_!==D&&this.movePane(this.panes[D],this.panes[_]))}if(f.currentDropOperation===0||f.currentDropOperation===2){let D=this.panes.findIndex(O=>O.id===E.id),_=this.panes.findIndex(O=>O.id===t.id);D>=0&&_>=0&&(D<_&&_--,_>=0&&_!==D&&this.movePane(this.panes[D],this.panes[_]))}T.length>1&&T.slice(1).forEach(D=>{let _=this.panes.findIndex(G=>G.id===E.id),O=this.panes.findIndex(G=>G.id===D.id);O>=0&&_>=0&&(O>_&&_++,_<this.panes.length&&_!==O&&(this.movePane(this.panes[O],this.panes[_]),E=D))})}}f?.dispose(),f=void 0}}))}removePanes(t){let n=this.isViewMergedWithContainer();t.forEach(i=>this.removePane(i)),this.updateViewHeaders(),n!==this.isViewMergedWithContainer()&&this.updateTitleArea(),this._onDidRemoveViews.fire(t)}removePane(t){let n=this.paneItems.findIndex(o=>o.pane===t);if(n===-1)return;this.lastFocusedPane===t&&(this.lastFocusedPane=void 0),Rt(this.paneview).removePane(t);let[i]=this.paneItems.splice(n,1);i.disposable.dispose()}movePane(t,n){let i=this.paneItems.findIndex(d=>d.pane===t),o=this.paneItems.findIndex(d=>d.pane===n),s=this.viewContainerModel.visibleViewDescriptors[i],a=this.viewContainerModel.visibleViewDescriptors[o];if(i<0||i>=this.paneItems.length||o<0||o>=this.paneItems.length)return;let[l]=this.paneItems.splice(i,1);this.paneItems.splice(o,0,l),Rt(this.paneview).movePane(t,n),this.viewContainerModel.move(s.id,a.id),this.updateTitleArea()}resizePane(t,n){Rt(this.paneview).resizePane(t,n)}getPaneSize(t){return Rt(this.paneview).getPaneSize(t)}updateViewHeaders(){this.isViewMergedWithContainer()?(this.paneItems[0].pane.isExpanded()?this.lastMergedCollapsedPane=void 0:(this.lastMergedCollapsedPane=this.paneItems[0].pane,this.paneItems[0].pane.setExpanded(!0)),this.paneItems[0].pane.headerVisible=!1,this.paneItems[0].pane.collapsible=!0):(this.paneItems.length===1?(this.paneItems[0].pane.headerVisible=!0,this.paneItems[0].pane===this.lastMergedCollapsedPane&&this.paneItems[0].pane.setExpanded(!1),this.paneItems[0].pane.collapsible=!1):this.paneItems.forEach(t=>{t.pane.headerVisible=!0,t.pane.collapsible=!0,t.pane===this.lastMergedCollapsedPane&&t.pane.setExpanded(!1)}),this.lastMergedCollapsedPane=void 0)}isViewMergedWithContainer(){return this.options.mergeViewWithContainerWhenSingleView&&this.paneItems.length===1?this.areExtensionsReady?!0:this.visibleViewsCountFromCache===void 0?this.paneItems[0].pane.isExpanded():this.visibleViewsCountFromCache===1:!1}onDidScrollPane(){for(let t of this.panes)t.onDidScrollRoot()}onDidSashReset(t){let n,i;for(let o=t;o>=0;o--)if(this.paneItems[o].pane?.isVisible()&&this.paneItems[o]?.pane.isExpanded()){n=this.paneItems[o].pane;break}for(let o=t+1;o<this.paneItems.length;o++)if(this.paneItems[o].pane?.isVisible()&&this.paneItems[o]?.pane.isExpanded()){i=this.paneItems[o].pane;break}if(n&&i){let o=this.getPaneSize(n),s=this.getPaneSize(i),a=Math.ceil((o+s)/2),l=Math.floor((o+s)/2);o>s?(this.resizePane(n,a),this.resizePane(i,l)):(this.resizePane(i,l),this.resizePane(n,a))}}dispose(){super.dispose(),this.paneItems.forEach(t=>t.disposable.dispose()),this.paneview&&this.paneview.dispose()}};bh=C([v(2,_e),v(3,ke),v(4,ct),v(5,Sn),v(6,Ot),v(7,Kn),v(8,_n),v(9,Xe),v(10,Un),v(11,$i)],bh);var yh=class extends je{constructor(t,n){super(t);this.offset=n}async run(t){let n=t.get($i),i=t.get(Ge),o=Mo.getValue(i);if(o===void 0)return;let s=n.getViewContainerByViewId(o),a=n.getViewContainerModel(s),l=a.visibleViewDescriptors.find(p=>p.id===o),d=a.visibleViewDescriptors.indexOf(l);if(d+this.offset<0||d+this.offset>=a.visibleViewDescriptors.length)return;let u=a.visibleViewDescriptors[d+this.offset];a.move(l.id,u.id)}};Me(class extends yh{constructor(){super({id:"views.moveViewUp",title:c("viewMoveUp","Move View Up"),keybinding:{primary:xl(2089,16),weight:201,when:Mo.notEqualsTo("")}},-1)}});Me(class extends yh{constructor(){super({id:"views.moveViewLeft",title:c("viewMoveLeft","Move View Left"),keybinding:{primary:xl(2089,15),weight:201,when:Mo.notEqualsTo("")}},-1)}});Me(class extends yh{constructor(){super({id:"views.moveViewDown",title:c("viewMoveDown","Move View Down"),keybinding:{primary:xl(2089,18),weight:201,when:Mo.notEqualsTo("")}},1)}});Me(class extends yh{constructor(){super({id:"views.moveViewRight",title:c("viewMoveRight","Move View Right"),keybinding:{primary:xl(2089,17),weight:201,when:Mo.notEqualsTo("")}},1)}});Me(class extends je{constructor(){super({id:"vscode.moveViews",title:c("viewsMove","Move Views")})}async run(e,t){if(!Array.isArray(t?.viewIds)||typeof t?.destinationId!="string")return Promise.reject("Invalid arguments");let n=e.get($i),i=n.getViewContainerById(t.destinationId);if(i){for(let o of t.viewIds){let s=n.getViewDescriptorById(o);s?.canMoveView&&n.moveViewsToContainer([s],i,0,this.desc.id)}await e.get(vd).openViewContainer(i.id,!0)}}});var TT=class extends Wp{constructor(t,n,i,o,s,a,l,d){super(t,n,s,i);this.storageService=i;this.instantiationService=o;this.contextMenuService=a;this.extensionService=l;this.contextService=d}viewPaneContainer;create(t){super.create(t),this.viewPaneContainer=this._register(this.createViewPaneContainer(t)),this._register(this.viewPaneContainer.onTitleAreaUpdate(()=>this.updateTitleArea())),this.viewPaneContainer.create(t)}setVisible(t){super.setVisible(t),this.viewPaneContainer?.setVisible(t)}layout(t){this.viewPaneContainer?.layout(t)}setBoundarySashes(t){this.viewPaneContainer?.setBoundarySashes(t)}getOptimalWidth(){return this.viewPaneContainer?.getOptimalWidth()??0}openView(t,n){return this.viewPaneContainer?.openView(t,n)}getViewPaneContainer(){return this.viewPaneContainer}getActionsContext(){return this.getViewPaneContainer()?.getActionsContext()}getContextMenuActions(){return this.viewPaneContainer?.menuActions?.getContextMenuActions()??[]}getMenuIds(){let t=[];return this.viewPaneContainer?.menuActions&&(t.push(this.viewPaneContainer.menuActions.menuId),this.viewPaneContainer.isViewMergedWithContainer()&&t.push(this.viewPaneContainer.panes[0].menuActions.menuId)),t}getActions(){let t=[];if(this.viewPaneContainer?.menuActions&&(t.push(...this.viewPaneContainer.menuActions.getPrimaryActions()),this.viewPaneContainer.isViewMergedWithContainer())){let n=this.viewPaneContainer.panes[0];n.shouldShowFilterInHeader()&&t.push(ST),t.push(...n.menuActions.getPrimaryActions())}return t}getSecondaryActions(){if(!this.viewPaneContainer?.menuActions)return[];let t=this.viewPaneContainer.isViewMergedWithContainer()?this.viewPaneContainer.panes[0].menuActions.getSecondaryActions():[],n=this.viewPaneContainer.menuActions.getSecondaryActions(),i=n.findIndex(o=>o instanceof wi&&o.item.submenu===C0);if(i!==-1){let o=n[i];o.actions.some(({enabled:s})=>s)?n.length===1&&t.length===0?n=o.actions.slice():i!==0&&(n=[o,...n.slice(0,i),...n.slice(i+1)]):n.splice(i,1)}return n.length&&t.length?[...n,new Yt,...t]:n.length?n:t}getActionViewItem(t,n){return this.viewPaneContainer?.getActionViewItem(t,n)}getTitle(){return this.viewPaneContainer?.getTitle()??""}focus(){super.focus(),this.viewPaneContainer?.focus()}};TT=C([v(1,Ot),v(2,Xe),v(3,_e),v(4,_n),v(5,Sn),v(6,Kn),v(7,Un)],TT);var k0={Viewlets:"workbench.contributions.viewlets",Panels:"workbench.contributions.panels",Auxiliary:"workbench.contributions.auxiliary"},Kf=class extends lS{registerPaneComposite(e){super.registerComposite(e)}deregisterPaneComposite(e){super.deregisterComposite(e)}getPaneComposite(e){return this.getComposite(e)}getPaneComposites(){return this.getComposites()}};Ce.add(k0.Viewlets,new Kf);Ce.add(k0.Panels,new Kf);Ce.add(k0.Auxiliary,new Kf);var ha=A("paneCompositePartService");var b3=Ne("auxiliarybar-right-layout-icon",z.layoutSidebarRight,c("toggleAuxiliaryIconRight","Icon to toggle the auxiliary bar off in its right position.")),v3=Ne("auxiliarybar-right-off-layout-icon",z.layoutSidebarRightOff,c("toggleAuxiliaryIconRightOn","Icon to toggle the auxiliary bar on in its right position.")),y3=Ne("auxiliarybar-left-layout-icon",z.layoutSidebarLeft,c("toggleAuxiliaryIconLeft","Icon to toggle the auxiliary bar in its left position.")),I3=Ne("auxiliarybar-left-off-layout-icon",z.layoutSidebarLeftOff,c("toggleAuxiliaryIconLeftOn","Icon to toggle the auxiliary bar on in its left position.")),Id=class r extends je{static ID="workbench.action.toggleAuxiliaryBar";static LABEL=ye("toggleAuxiliaryBar","Toggle Secondary Side Bar Visibility");constructor(){super({id:r.ID,title:r.LABEL,toggled:{condition:Xa,title:c("secondary sidebar","Secondary Side Bar"),mnemonicTitle:c({key:"secondary sidebar mnemonic",comment:["&& denotes a mnemonic"]},"Secondary Si&&de Bar")},category:ut.View,f1:!0,keybinding:{weight:200,primary:2592},menu:[{id:me.LayoutControlMenuSubmenu,group:"0_workbench_layout",order:1},{id:me.MenubarAppearanceMenu,group:"2_workbench_layout",order:2}]})}async run(e){let t=e.get(ct);t.setPartHidden(t.isVisible("workbench.parts.auxiliarybar"),"workbench.parts.auxiliarybar")}};Me(Id);Me(class D0 extends je{static ID="workbench.action.focusAuxiliaryBar";static LABEL=ye("focusAuxiliaryBar","Focus into Secondary Side Bar");constructor(){super({id:D0.ID,title:D0.LABEL,category:ut.View,f1:!0})}async run(e){let t=e.get(ha),n=e.get(ct);n.isVisible("workbench.parts.auxiliarybar")||n.setPartHidden(!1,"workbench.parts.auxiliarybar"),t.getActivePaneComposite(2)?.focus()}});Vt.appendMenuItems([{id:me.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:Id.ID,title:c("toggleSecondarySideBar","Toggle Secondary Side Bar"),toggled:{condition:Xa,icon:y3},icon:I3},when:X.and(X.or(X.equals("config.workbench.layoutControl.type","toggles"),X.equals("config.workbench.layoutControl.type","both")),X.equals("config.workbench.sideBar.location","right")),order:0}},{id:me.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:Id.ID,title:c("toggleSecondarySideBar","Toggle Secondary Side Bar"),toggled:{condition:Xa,icon:b3},icon:v3},when:X.and(X.or(X.equals("config.workbench.layoutControl.type","toggles"),X.equals("config.workbench.layoutControl.type","both")),X.equals("config.workbench.sideBar.location","left")),order:2}},{id:me.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:Id.ID,title:ye("hideAuxiliaryBar","Hide Secondary Side Bar")},when:X.and(Xa,X.equals("viewLocation",Si(2))),order:2}}]);var wT=class extends P{_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;_referenceDomElement;_width;_height;_resizeObserver;constructor(e,t){super(),this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null,t=()=>{e?this.observe({width:e.width,height:e.height}):this.observe()},n=!1,i=!1,o=()=>{if(n&&!i)try{n=!1,i=!0,t()}finally{rr(Le(this._referenceDomElement),()=>{i=!1,o()})}};this._resizeObserver=new ResizeObserver(s=>{s&&s[0]&&s[0].contentRect?e={width:s[0].contentRect.width,height:s[0].contentRect.height}:e=null,n=!0,o()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,i=0;t?(n=t.width,i=t.height):this._referenceDomElement&&(n=this._referenceDomElement.clientWidth,i=this._referenceDomElement.clientHeight),n=Math.max(5,n),i=Math.max(5,i),(this._width!==n||this._height!==i)&&(this._width=n,this._height=i,e&&this._onDidChange.fire())}};var _0=class extends P{_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;_listener;_mediaQueryList;constructor(e){super(),this._listener=()=>this._handleChange(e,!0),this._mediaQueryList=null,this._handleChange(e,!1)}_handleChange(e,t){this._mediaQueryList?.removeEventListener("change",this._listener),this._mediaQueryList=e.matchMedia(`(resolution: ${e.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),t&&this._onDidChange.fire()}},R0=class extends P{_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;_value;get value(){return this._value}constructor(e){super(),this._value=this._getPixelRatio(e);let t=this._register(new _0(e));this._register(t.onDidChange(()=>{this._value=this._getPixelRatio(e),this._onDidChange.fire(this._value)}))}_getPixelRatio(e){let t=document.createElement("canvas").getContext("2d"),n=e.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/i}},L0=class{mapWindowIdToPixelRatioMonitor=new Map;_getOrCreatePixelRatioMonitor(e){let t=Jl(e),n=this.mapWindowIdToPixelRatioMonitor.get(t);return n||(n=vl(new R0(e)),this.mapWindowIdToPixelRatioMonitor.set(t,n),vl(N.once($F)(({vscodeWindowId:i})=>{i===t&&(n?.dispose(),this.mapWindowIdToPixelRatioMonitor.delete(t))}))),n}getInstance(e){return this._getOrCreatePixelRatioMonitor(e)}},Ih=new L0;function CT(r,e){r instanceof Wg?(r.setFontFamily(e.getMassagedFontFamily()),r.setFontWeight(e.fontWeight),r.setFontSize(e.fontSize),r.setFontFeatureSettings(e.fontFeatureSettings),r.setFontVariationSettings(e.fontVariationSettings),r.setLineHeight(e.lineHeight),r.setLetterSpacing(e.letterSpacing)):(r.style.fontFamily=e.getMassagedFontFamily(),r.style.fontWeight=e.fontWeight,r.style.fontSize=e.fontSize+"px",r.style.fontFeatureSettings=e.fontFeatureSettings,r.style.fontVariationSettings=e.fontVariationSettings,r.style.lineHeight=e.lineHeight+"px",r.style.letterSpacing=e.letterSpacing+"px")}var kT=class{chr;type;width;constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}},P0=class r{_bareFontInfo;_requests;_container;_testElements;constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(e){this._createDomElements(),e.document.body.appendChild(this._container),this._readFromDomElements(),this._container?.remove(),this._container=null,this._testElements=null}_createDomElements(){let e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";let t=document.createElement("div");CT(t,this._bareFontInfo),e.appendChild(t);let n=document.createElement("div");CT(n,this._bareFontInfo),n.style.fontWeight="bold",e.appendChild(n);let i=document.createElement("div");CT(i,this._bareFontInfo),i.style.fontStyle="italic",e.appendChild(i);let o=[];for(let s of this._requests){let a;s.type===0&&(a=t),s.type===2&&(a=n),s.type===1&&(a=i),a.appendChild(document.createElement("br"));let l=document.createElement("span");r._render(l,s),a.appendChild(l),o.push(l)}this._container=e,this._testElements=o}static _render(e,t){if(t.chr===" "){let n="\xA0";for(let i=0;i<8;i++)n+=n;e.innerText=n}else{let n=t.chr;for(let i=0;i<8;i++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){let n=this._requests[e],i=this._testElements[e];n.fulfill(i.offsetWidth/256)}}};function rV(r,e,t){new P0(e,t).read(r)}var A0=class extends P{_cache=new Map;_evictUntrustedReadingsTimeout=-1;_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache.clear(),this._onDidChange.fire()}_ensureCache(e){let t=Jl(e),n=this._cache.get(t);return n||(n=new O0,this._cache.set(t,n)),n}_writeToCache(e,t,n){this._ensureCache(e).put(t,n),!n.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=e.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings(e)},5e3))}_evictUntrustedReadings(e){let t=this._ensureCache(e),n=t.getValues(),i=!1;for(let o of n)o.isTrusted||(i=!0,t.remove(o));i&&this._onDidChange.fire()}serializeFontInfo(e){return this._ensureCache(e).getValues().filter(n=>n.isTrusted)}restoreFontInfo(e,t){for(let n of t){if(n.version!==Zw)continue;let i=new ku(n,!1);this._writeToCache(e,i,i)}}readFontInfo(e,t){let n=this._ensureCache(e);if(!n.has(t)){let i=this._actualReadFontInfo(e,t);(i.typicalHalfwidthCharacterWidth<=2||i.typicalFullwidthCharacterWidth<=2||i.spaceWidth<=2||i.maxDigitWidth<=2)&&(i=new ku({pixelRatio:Ih.getInstance(e).value,fontFamily:i.fontFamily,fontWeight:i.fontWeight,fontSize:i.fontSize,fontFeatureSettings:i.fontFeatureSettings,fontVariationSettings:i.fontVariationSettings,lineHeight:i.lineHeight,letterSpacing:i.letterSpacing,isMonospace:i.isMonospace,typicalHalfwidthCharacterWidth:Math.max(i.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(i.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:i.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(i.spaceWidth,5),middotWidth:Math.max(i.middotWidth,5),wsmiddotWidth:Math.max(i.wsmiddotWidth,5),maxDigitWidth:Math.max(i.maxDigitWidth,5)},!1)),this._writeToCache(e,t,i)}return n.get(t)}_createRequest(e,t,n,i){let o=new kT(e,t);return n.push(o),i?.push(o),o}_actualReadFontInfo(e,t){let n=[],i=[],o=this._createRequest("n",0,n,i),s=this._createRequest("\uFF4D",0,n,null),a=this._createRequest(" ",0,n,i),l=this._createRequest("0",0,n,i),d=this._createRequest("1",0,n,i),u=this._createRequest("2",0,n,i),p=this._createRequest("3",0,n,i),h=this._createRequest("4",0,n,i),m=this._createRequest("5",0,n,i),f=this._createRequest("6",0,n,i),g=this._createRequest("7",0,n,i),y=this._createRequest("8",0,n,i),T=this._createRequest("9",0,n,i),E=this._createRequest("\u2192",0,n,i),D=this._createRequest("\uFFEB",0,n,null),_=this._createRequest("\xB7",0,n,i),O=this._createRequest("\u2E31",0,n,null),G="|/-_ilm%";for(let ee=0,re=G.length;ee<re;ee++)this._createRequest(G.charAt(ee),0,n,i),this._createRequest(G.charAt(ee),1,n,i),this._createRequest(G.charAt(ee),2,n,i);rV(e,t,n);let Z=Math.max(l.width,d.width,u.width,p.width,h.width,m.width,f.width,g.width,y.width,T.width),M=t.fontFeatureSettings===Vm.OFF,H=i[0].width;for(let ee=1,re=i.length;M&&ee<re;ee++){let Fe=H-i[ee].width;if(Fe<-.001||Fe>.001){M=!1;break}}let oe=!0;return M&&D.width!==H&&(oe=!1),D.width>E.width&&(oe=!1),new ku({pixelRatio:Ih.getInstance(e).value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:M,typicalHalfwidthCharacterWidth:o.width,typicalFullwidthCharacterWidth:s.width,canUseHalfwidthRightwardsArrow:oe,spaceWidth:a.width,middotWidth:_.width,wsmiddotWidth:O.width,maxDigitWidth:Z},!0)}},O0=class{_keys;_values;constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){let t=e.getId();return!!this._values[t]}get(e){let t=e.getId();return this._values[t]}put(e,t){let n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){let t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}},M0=new A0;var Gf=class r{constructor(e,t){this.key=e;this.migrate=t}static items=[];apply(e){let t=r._read(e,this.key),n=o=>r._read(e,o),i=(o,s)=>r._write(e,o,s);this.migrate(t,n,i)}static _read(e,t){if(typeof e>"u")return;let n=t.indexOf(".");if(n>=0){let i=t.substring(0,n);return this._read(e[i],t.substring(n+1))}return e[t]}static _write(e,t,n){let i=t.indexOf(".");if(i>=0){let o=t.substring(0,i);e[o]=e[o]||{},this._write(e[o],t.substring(i+1),n);return}e[t]=n}};function xs(r,e){Gf.items.push(new Gf(r,e))}function Lr(r,e){xs(r,(t,n,i)=>{if(typeof t<"u"){for(let[o,s]of e)if(t===o){i(r,s);return}}})}function oV(r){Gf.items.forEach(e=>e.apply(r))}Lr("wordWrap",[[!0,"on"],[!1,"off"]]);Lr("lineNumbers",[[!0,"on"],[!1,"off"]]);Lr("cursorBlinking",[["visible","solid"]]);Lr("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);Lr("renderLineHighlight",[[!0,"line"],[!1,"none"]]);Lr("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);Lr("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);Lr("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Lr("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Lr("autoIndent",[[!1,"advanced"],[!0,"full"]]);Lr("matchBrackets",[[!0,"always"],[!1,"never"]]);Lr("renderFinalNewline",[[!0,"on"],[!1,"off"]]);Lr("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]);Lr("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]);Lr("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]);xs("autoClosingBrackets",(r,e,t)=>{r===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});xs("renderIndentGuides",(r,e,t)=>{typeof r<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!r))});xs("highlightActiveIndentGuide",(r,e,t)=>{typeof r<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!r))});var S3={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};xs("suggest.filteredTypes",(r,e,t)=>{if(r&&typeof r=="object"){for(let n of Object.entries(S3))r[n[0]]===!1&&typeof e(`suggest.${n[1]}`)>"u"&&t(`suggest.${n[1]}`,!1);t("suggest.filteredTypes",void 0)}});xs("quickSuggestions",(r,e,t)=>{if(typeof r=="boolean"){let n=r?"on":"off";t("quickSuggestions",{comments:n,strings:n,other:n})}});xs("experimental.stickyScroll.enabled",(r,e,t)=>{typeof r=="boolean"&&(t("experimental.stickyScroll.enabled",void 0),typeof e("stickyScroll.enabled")>"u"&&t("stickyScroll.enabled",r))});xs("experimental.stickyScroll.maxLineCount",(r,e,t)=>{typeof r=="number"&&(t("experimental.stickyScroll.maxLineCount",void 0),typeof e("stickyScroll.maxLineCount")>"u"&&t("stickyScroll.maxLineCount",r))});xs("codeActionsOnSave",(r,e,t)=>{if(r&&typeof r=="object"){let n=!1,i={};for(let o of Object.entries(r))typeof o[1]=="boolean"?(n=!0,i[o[0]]=o[1]?"explicit":"never"):i[o[0]]=o[1];n&&t("codeActionsOnSave",i)}});xs("codeActionWidget.includeNearbyQuickfixes",(r,e,t)=>{typeof r=="boolean"&&(t("codeActionWidget.includeNearbyQuickfixes",void 0),typeof e("codeActionWidget.includeNearbyQuickFixes")>"u"&&t("codeActionWidget.includeNearbyQuickFixes",r))});xs("lightbulb.enabled",(r,e,t)=>{typeof r=="boolean"&&t("lightbulb.enabled",r?void 0:"off")});var N0=class{_tabFocus=!1;_onDidChangeTabFocus=new x;onDidChangeTabFocus=this._onDidChangeTabFocus.event;getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}},F0=new N0;var DT=class extends P{constructor(t,n,i,o,s){super();this._accessibilityService=s;this.isSimpleWidget=t,this.contextMenuId=n,this._containerObserver=this._register(new wT(o,i.dimension)),this._targetWindowId=Le(o).vscodeWindowId,this._rawOptions=sV(i),this._validatedOptions=Gc.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register(Sv.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(F0.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(M0.onDidChange(()=>this._recomputeOptions())),this._register(Ih.getInstance(Le(o)).onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;_onDidChangeFast=this._register(new x);onDidChangeFast=this._onDidChangeFast.event;isSimpleWidget;contextMenuId;_containerObserver;_isDominatedByLongLines=!1;_viewLineCount=1;_lineNumbersDigitCount=1;_reservedHeight=0;_glyphMarginDecorationLaneCount=1;_targetWindowId;_computeOptionsMemory=new Um;_rawOptions;_validatedOptions;options;_recomputeOptions(){let t=this._computeOptions(),n=Gc.checkEquals(this.options,t);n!==null&&(this.options=t,this._onDidChangeFast.fire(n),this._onDidChange.fire(n))}_computeOptions(){let t=this._readEnvConfiguration(),n=Om.createFromValidatedSettings(this._validatedOptions,t.pixelRatio,this.isSimpleWidget),i=this._readFontInfo(n),o={memory:this._computeOptionsMemory,outerWidth:t.outerWidth,outerHeight:t.outerHeight-this._reservedHeight,fontInfo:i,extraEditorClassName:t.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:t.emptySelectionClipboard,pixelRatio:t.pixelRatio,tabFocusMode:F0.getTabFocusMode(),accessibilitySupport:t.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return Gc.computeOptions(this._validatedOptions,o)}_readEnvConfiguration(){return{extraEditorClassName:T3(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:Ka||Lo,pixelRatio:Ih.getInstance(gc(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(t){return M0.readFontInfo(gc(this._targetWindowId,!0).window,t)}getRawOptions(){return this._rawOptions}updateOptions(t){let n=sV(t);Gc.applyUpdate(this._rawOptions,n)&&(this._validatedOptions=Gc.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(t){this._containerObserver.observe(t)}setIsDominatedByLongLines(t){this._isDominatedByLongLines!==t&&(this._isDominatedByLongLines=t,this._recomputeOptions())}setModelLineCount(t){let n=x3(t);this._lineNumbersDigitCount!==n&&(this._lineNumbersDigitCount=n,this._recomputeOptions())}setViewLineCount(t){this._viewLineCount!==t&&(this._viewLineCount=t,this._recomputeOptions())}setReservedHeight(t){this._reservedHeight!==t&&(this._reservedHeight=t,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(t){this._glyphMarginDecorationLaneCount!==t&&(this._glyphMarginDecorationLaneCount=t,this._recomputeOptions())}};DT=C([v(4,Ps)],DT);function x3(r){let e=0;for(;r;)r=Math.floor(r/10),e++;return e||1}function T3(){let r="";return!Xs&&!kF&&(r+="no-user-select "),Xs&&(r+="no-minimap-shadow ",r+="enable-user-select "),ze&&(r+="mac "),r}var B0=class{_values=[];_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}},U0=class{_values=[];_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}},Gc=class r{static validateOptions(e){let t=new B0;for(let n of Mu){let i=n.name==="_never_"?void 0:e[n.name];t._write(n.id,n.validate(i))}return t}static computeOptions(e,t){let n=new U0;for(let i of Mu)n._write(i.id,i.compute(t,n,e._read(i.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?ln(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(!r._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){let n=[],i=!1;for(let o of Mu){let s=!r._deepEquals(e._read(o.id),t._read(o.id));n[o.id]=s,s&&(i=!0)}return i?new Pv(n):null}static applyUpdate(e,t){let n=!1;for(let i of Mu)if(t.hasOwnProperty(i.name)){let o=i.applyUpdate(e[i.name],t[i.name]);e[i.name]=o.newValue,n=n||o.didChange}return n}};function sV(r){let e=kn(r);return oV(e),e}var C3=A("codeEditorService");var _T=class{id;precondition;_kbOpts;_menuOpts;metadata;constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){let e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(let t of e){let n=t.kbExpr;this.precondition&&(n?n=X.and(n,this.precondition):n=this.precondition);let i={id:this.id,weight:t.weight,args:t.args,when:n,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};Bi.registerKeybindingRule(i)}}vr.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata})}_registerMenuItem(e){Vt.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}},qf=class extends _T{_implementations=[];addImplementation(e,t,n,i){return this._implementations.push({priority:e,name:t,implementation:n,when:i}),this._implementations.sort((o,s)=>s.priority-o.priority),{dispose:()=>{for(let o=0;o<this._implementations.length;o++)if(this._implementations[o].implementation===n){this._implementations.splice(o,1);return}}}}runCommand(e,t){let n=e.get(Et),i=e.get(Ge);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(let o of this._implementations){if(o.when){let a=i.getContext(cs());if(!o.when.evaluate(a))continue}let s=o.implementation(e,t);if(s)return n.trace(`Command '${this.id}' was handled by '${o.name}'.`),typeof s=="boolean"?void 0:s}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}},RT=class extends _T{constructor(t,n){super(n);this.command=t}runCommand(t,n){return this.command.runCommand(t,n)}};var k3;(o=>{function r(s){return Sd.INSTANCE.getEditorCommand(s)}o.getEditorCommand=r;function e(){return Sd.INSTANCE.getEditorActions()}o.getEditorActions=e;function t(){return Sd.INSTANCE.getEditorContributions()}o.getEditorContributions=t;function n(s){return Sd.INSTANCE.getEditorContributions().filter(a=>s.indexOf(a.id)>=0)}o.getSomeEditorContributions=n;function i(){return Sd.INSTANCE.getDiffEditorContributions()}o.getDiffEditorContributions=i})(k3||={});var D3={EditorCommonContributions:"editor.contributions"},Sd=class r{static INSTANCE=new r;editorContributions=[];diffEditorContributions=[];editorActions=[];editorCommands=Object.create(null);constructor(){}registerEditorContribution(e,t,n){this.editorContributions.push({id:e,ctor:t,instantiation:n})}getEditorContributions(){return this.editorContributions.slice(0)}registerDiffEditorContribution(e,t){this.diffEditorContributions.push({id:e,ctor:t})}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}};Ce.add(D3.EditorCommonContributions,Sd.INSTANCE);function $f(r){return r.register(),r}var _3=$f(new qf({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:me.MenubarEditMenu,group:"1_do",title:c({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:me.CommandPalette,group:"",title:c("undo","Undo"),order:1}]}));$f(new RT(_3,{id:"default:undo",precondition:void 0}));var R3=$f(new qf({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:me.MenubarEditMenu,group:"1_do",title:c({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:me.CommandPalette,group:"",title:c("redo","Redo"),order:1}]}));$f(new RT(R3,{id:"default:redo",precondition:void 0}));var QYt=$f(new qf({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:me.MenubarSelectionMenu,group:"1_basic",title:c({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:me.CommandPalette,group:"",title:c("selectAll","Select All"),order:1}]}));var P3=Ne("panel-maximize",z.chevronUp,c("maximizeIcon","Icon to maximize a panel.")),A3=Ne("panel-restore",z.chevronDown,c("restoreIcon","Icon to restore a panel.")),aV=Ne("panel-close",z.close,c("closeIcon","Icon to close a panel.")),O3=Ne("panel-layout-icon",z.layoutPanel,c("togglePanelOffIcon","Icon to toggle the panel off when it is on.")),M3=Ne("panel-layout-icon-off",z.layoutPanelOff,c("togglePanelOnIcon","Icon to toggle the panel on when it is off.")),qc=class r extends je{static ID="workbench.action.togglePanel";static LABEL=ye("togglePanelVisibility","Toggle Panel Visibility");constructor(){super({id:r.ID,title:r.LABEL,toggled:{condition:Cc,title:c("toggle panel","Panel"),mnemonicTitle:c({key:"toggle panel mnemonic",comment:["&& denotes a mnemonic"]},"&&Panel")},f1:!0,category:ut.View,keybinding:{primary:2088,weight:200},menu:[{id:me.MenubarAppearanceMenu,group:"2_workbench_layout",order:5},{id:me.LayoutControlMenuSubmenu,group:"0_workbench_layout",order:4}]})}async run(e){let t=e.get(ct);t.setPartHidden(t.isVisible("workbench.parts.panel"),"workbench.parts.panel")}};Me(qc);Me(class extends je{static ID="workbench.action.focusPanel";static LABEL=c("focusPanel","Focus into Panel");constructor(){super({id:"workbench.action.focusPanel",title:ye("focusPanel","Focus into Panel"),category:ut.View,f1:!0})}async run(r){let e=r.get(ct),t=r.get(ha);e.isVisible("workbench.parts.panel")||e.setPartHidden(!1,"workbench.parts.panel"),t.getActivePaneComposite(1)?.focus()}});var LT={LEFT:"workbench.action.positionPanelLeft",RIGHT:"workbench.action.positionPanelRight",BOTTOM:"workbench.action.positionPanelBottom",TOP:"workbench.action.positionPanelTop"},PT={LEFT:"workbench.action.alignPanelLeft",RIGHT:"workbench.action.alignPanelRight",CENTER:"workbench.action.alignPanelCenter",JUSTIFY:"workbench.action.alignPanelJustify"};function lV(r,e,t,n,i){return{id:r,title:e,shortLabel:t,value:n,when:i}}function AT(r,e,t,n){return lV(r,e,t,n,dd.notEqualsTo(sd(n)))}function OT(r,e,t,n){return lV(r,e,t,n,ra.notEqualsTo(n))}var N3=[AT(LT.TOP,ye("positionPanelTop","Move Panel To Top"),c("positionPanelTopShort","Top"),3),AT(LT.LEFT,ye("positionPanelLeft","Move Panel Left"),c("positionPanelLeftShort","Left"),0),AT(LT.RIGHT,ye("positionPanelRight","Move Panel Right"),c("positionPanelRightShort","Right"),1),AT(LT.BOTTOM,ye("positionPanelBottom","Move Panel To Bottom"),c("positionPanelBottomShort","Bottom"),2)],F3=[OT(PT.LEFT,ye("alignPanelLeft","Set Panel Alignment to Left"),c("alignPanelLeftShort","Left"),"left"),OT(PT.RIGHT,ye("alignPanelRight","Set Panel Alignment to Right"),c("alignPanelRightShort","Right"),"right"),OT(PT.CENTER,ye("alignPanelCenter","Set Panel Alignment to Center"),c("alignPanelCenterShort","Center"),"center"),OT(PT.JUSTIFY,ye("alignPanelJustify","Set Panel Alignment to Justify"),c("alignPanelJustifyShort","Justify"),"justify")];Vt.appendMenuItem(me.MenubarAppearanceMenu,{submenu:me.PanelPositionMenu,title:c("positionPanel","Panel Position"),group:"3_workbench_layout_move",order:4});N3.forEach((r,e)=>{let{id:t,title:n,shortLabel:i,value:o,when:s}=r;Me(class extends je{constructor(){super({id:t,title:n,category:ut.View,f1:!0})}run(a){a.get(ct).setPanelPosition(o===void 0?2:o)}}),Vt.appendMenuItem(me.PanelPositionMenu,{command:{id:t,title:i,toggled:s.negate()},order:5+e})});Vt.appendMenuItem(me.MenubarAppearanceMenu,{submenu:me.PanelAlignmentMenu,title:c("alignPanel","Align Panel"),group:"3_workbench_layout_move",order:5});F3.forEach(r=>{let{id:e,title:t,shortLabel:n,value:i,when:o}=r;Me(class extends je{constructor(){super({id:e,title:t,category:ut.View,toggled:o.negate(),f1:!0})}run(s){s.get(ct).setPanelAlignment(i===void 0?"center":i)}}),Vt.appendMenuItem(me.PanelAlignmentMenu,{command:{id:e,title:n,toggled:o.negate()},order:5})});var MT=class extends je{constructor(e,t){super({id:e,title:t,category:ut.View,f1:!0})}async run(e,t){let n=e.get(ha),i=n.getVisiblePaneCompositeIds(1),o=n.getActivePaneComposite(1);if(!o)return;let s;for(let a=0;a<i.length;a++)if(i[a]===o.getId()){s=i[(a+i.length+t)%i.length];break}typeof s=="string"&&await n.openPaneComposite(s,1,!0)}};Me(class extends MT{constructor(){super("workbench.action.previousPanelView",ye("previousPanelView","Previous Panel View"))}run(r){return super.run(r,-1)}});Me(class extends MT{constructor(){super("workbench.action.nextPanelView",ye("nextPanelView","Next Panel View"))}run(r){return super.run(r,1)}});Me(class extends je{constructor(){super({id:"workbench.action.toggleMaximizedPanel",title:ye("toggleMaximizedPanel","Toggle Maximized Panel"),tooltip:c("maximizePanel","Maximize Panel Size"),category:ut.View,f1:!0,icon:P3,precondition:X.or(ra.isEqualTo("center"),X.and(dd.notEqualsTo("bottom"),dd.notEqualsTo("top"))),toggled:{condition:r2,icon:A3,tooltip:c("minimizePanel","Restore Panel Size")},menu:[{id:me.PanelTitle,group:"navigation",order:1,when:X.or(ra.isEqualTo("center"),X.and(dd.notEqualsTo("bottom"),dd.notEqualsTo("top")))}]})}run(r){let e=r.get(ct),t=r.get(wr);if(e.getPanelAlignment()!=="center"&&hS(e.getPanelPosition())){t.warn(c("panelMaxNotSupported","Maximizing the panel is only supported when it is center aligned."));return}e.isVisible("workbench.parts.panel")?e.toggleMaximizedPanel():(e.setPartHidden(!1,"workbench.parts.panel"),e.isPanelMaximized()||e.toggleMaximizedPanel())}});Me(class extends je{constructor(){super({id:"workbench.action.closePanel",title:ye("closePanel","Hide Panel"),category:ut.View,icon:aV,menu:[{id:me.CommandPalette,when:Cc},{id:me.PanelTitle,group:"navigation",order:2}]})}run(r){r.get(ct).setPartHidden(!0,"workbench.parts.panel")}});Me(class extends je{constructor(){super({id:"workbench.action.closeAuxiliaryBar",title:ye("closeSecondarySideBar","Hide Secondary Side Bar"),category:ut.View,icon:aV,menu:[{id:me.CommandPalette,when:Xa},{id:me.AuxiliaryBarTitle,group:"navigation",order:2,when:X.notEquals("config.workbench.activityBar.location","top")}]})}run(r){r.get(ct).setPartHidden(!0,"workbench.parts.auxiliarybar")}});Vt.appendMenuItems([{id:me.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:qc.ID,title:c("togglePanel","Toggle Panel"),icon:M3,toggled:{condition:Cc,icon:O3}},when:X.or(X.equals("config.workbench.layoutControl.type","toggles"),X.equals("config.workbench.layoutControl.type","both")),order:1}},{id:me.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:qc.ID,title:ye("hidePanel","Hide Panel")},when:X.and(Cc,X.equals("viewLocation",Si(1))),order:2}}]);var Sh=class extends je{constructor(t,n,i){super(i);this.source=t;this.destination=n}run(t,...n){let i=t.get($i),o=t.get(ct),s=t.get(vd),a=i.getViewContainersByLocation(this.source),l=i.getViewContainersByLocation(this.destination);if(a.length){let d=s.getVisibleViewContainer(this.source);a.forEach(u=>i.moveViewContainerToLocation(u,this.destination,void 0,this.desc.id)),o.setPartHidden(!1,this.destination===1?"workbench.parts.panel":"workbench.parts.auxiliarybar"),d&&l.length===0&&s.openViewContainer(d.id,!0)}}},V0=class r extends Sh{static ID="workbench.action.movePanelToSidePanel";constructor(){super(1,2,{id:r.ID,title:ye("movePanelToSecondarySideBar","Move Panel Views To Secondary Side Bar"),category:ut.View,f1:!1})}},W0=class r extends Sh{static ID="workbench.action.movePanelToSecondarySideBar";constructor(){super(1,2,{id:r.ID,title:ye("movePanelToSecondarySideBar","Move Panel Views To Secondary Side Bar"),category:ut.View,f1:!0})}};Me(V0);Me(W0);var z0=class r extends Sh{static ID="workbench.action.moveSidePanelToPanel";constructor(){super(2,1,{id:r.ID,title:ye("moveSidePanelToPanel","Move Secondary Side Bar Views To Panel"),category:ut.View,f1:!1})}},H0=class r extends Sh{static ID="workbench.action.moveSecondarySideBarToPanel";constructor(){super(2,1,{id:r.ID,title:ye("moveSidePanelToPanel","Move Secondary Side Bar Views To Panel"),category:ut.View,f1:!0})}};Me(z0);Me(H0);var B3=Ne("menuBar",z.layoutMenubar,c("menuBarIcon","Represents the menu bar")),U3=Ne("activity-bar-left",z.layoutActivitybarLeft,c("activityBarLeft","Represents the activity bar in the left position")),V3=Ne("activity-bar-right",z.layoutActivitybarRight,c("activityBarRight","Represents the activity bar in the right position")),NT=Ne("panel-left",z.layoutSidebarLeft,c("panelLeft","Represents a side bar in the left position")),W3=Ne("panel-left-off",z.layoutSidebarLeftOff,c("panelLeftOff","Represents a side bar in the left position toggled off")),FT=Ne("panel-right",z.layoutSidebarRight,c("panelRight","Represents side bar in the right position")),z3=Ne("panel-right-off",z.layoutSidebarRightOff,c("panelRightOff","Represents side bar in the right position toggled off")),H3=Ne("panel-bottom",z.layoutPanel,c("panelBottom","Represents the bottom panel")),K3=Ne("statusBar",z.layoutStatusbar,c("statusBarIcon","Represents the status bar")),G3=Ne("panel-align-left",z.layoutPanelLeft,c("panelBottomLeft","Represents the bottom panel alignment set to the left")),q3=Ne("panel-align-right",z.layoutPanelRight,c("panelBottomRight","Represents the bottom panel alignment set to the right")),$3=Ne("panel-align-center",z.layoutPanelCenter,c("panelBottomCenter","Represents the bottom panel alignment set to the center")),j3=Ne("panel-align-justify",z.layoutPanelJustify,c("panelBottomJustify","Represents the bottom panel alignment set to justified")),Y3=Ne("fullscreen",z.screenFull,c("fullScreenIcon","Represents full screen")),X3=Ne("centerLayoutIcon",z.layoutCentered,c("centerLayoutIcon","Represents centered layout mode")),Q3=Ne("zenMode",z.target,c("zenModeIcon","Represents zen mode"));Me(class extends je{constructor(){super({id:"workbench.action.closeSidebar",title:ye("closeSidebar","Close Primary Side Bar"),category:ut.View,f1:!0})}run(r){r.get(ct).setPartHidden(!0,"workbench.parts.sidebar")}});var J3="workbench.action.toggleActivityBarVisibility";Me(class extends je{constructor(){super({id:"workbench.action.toggleCenteredLayout",title:{...ye("toggleCenteredLayout","Toggle Centered Layout"),mnemonicTitle:c({key:"miToggleCenteredLayout",comment:["&& denotes a mnemonic"]},"&&Centered Layout")},precondition:gs.toNegated(),category:ut.View,f1:!0,toggled:m1,menu:[{id:me.MenubarAppearanceMenu,group:"1_toggle_view",order:3}]})}run(r){let e=r.get(ct);e.centerMainEditorLayout(!e.isMainEditorLayoutCentered())}});var dV="workbench.sideBar.location",BT=class extends je{constructor(t,n,i){super({id:t,title:n,f1:!1});this.position=i}async run(t){let n=t.get(ct),i=t.get(ke);if(n.getSideBarPosition()!==this.position)return i.updateValue(dV,sd(this.position))}},UT=class r extends BT{static ID="workbench.action.moveSideBarRight";constructor(){super(r.ID,ye("moveSidebarRight","Move Primary Side Bar Right"),1)}},VT=class r extends BT{static ID="workbench.action.moveSideBarLeft";constructor(){super(r.ID,ye("moveSidebarLeft","Move Primary Side Bar Left"),0)}};Me(UT);Me(VT);var Ts=class r extends je{static ID="workbench.action.toggleSidebarPosition";static LABEL=c("toggleSidebarPosition","Toggle Primary Side Bar Position");static getLabel(e){return e.getSideBarPosition()===0?c("moveSidebarRight","Move Primary Side Bar Right"):c("moveSidebarLeft","Move Primary Side Bar Left")}constructor(){super({id:r.ID,title:ye("toggleSidebarPosition","Toggle Primary Side Bar Position"),category:ut.View,f1:!0})}run(e){let t=e.get(ct),n=e.get(ke),o=t.getSideBarPosition()===0?"right":"left";return n.updateValue(dV,o)}};Me(Ts);var cV=Ne("configure-layout-icon",z.layout,c("cofigureLayoutIcon","Icon represents workbench layout configuration."));Vt.appendMenuItem(me.LayoutControlMenu,{submenu:me.LayoutControlMenuSubmenu,title:c("configureLayout","Configure Layout"),icon:cV,group:"1_workbench_layout",when:X.equals("config.workbench.layoutControl.type","menu")});Vt.appendMenuItems([{id:me.ViewContainerTitleContext,item:{group:"3_workbench_layout_move",command:{id:Ts.ID,title:c("move side bar right","Move Primary Side Bar Right")},when:X.and(X.notEquals("config.workbench.sideBar.location","right"),X.equals("viewContainerLocation",Si(0))),order:1}},{id:me.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:Ts.ID,title:c("move sidebar right","Move Primary Side Bar Right")},when:X.and(X.notEquals("config.workbench.sideBar.location","right"),X.equals("viewLocation",Si(0))),order:1}},{id:me.ViewContainerTitleContext,item:{group:"3_workbench_layout_move",command:{id:Ts.ID,title:c("move sidebar left","Move Primary Side Bar Left")},when:X.and(X.equals("config.workbench.sideBar.location","right"),X.equals("viewContainerLocation",Si(0))),order:1}},{id:me.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:Ts.ID,title:c("move sidebar left","Move Primary Side Bar Left")},when:X.and(X.equals("config.workbench.sideBar.location","right"),X.equals("viewLocation",Si(0))),order:1}},{id:me.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:Ts.ID,title:c("move second sidebar left","Move Secondary Side Bar Left")},when:X.and(X.notEquals("config.workbench.sideBar.location","right"),X.equals("viewLocation",Si(2))),order:1}},{id:me.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:Ts.ID,title:c("move second sidebar right","Move Secondary Side Bar Right")},when:X.and(X.equals("config.workbench.sideBar.location","right"),X.equals("viewLocation",Si(2))),order:1}}]);Vt.appendMenuItem(me.MenubarAppearanceMenu,{group:"3_workbench_layout_move",command:{id:Ts.ID,title:c({key:"miMoveSidebarRight",comment:["&& denotes a mnemonic"]},"&&Move Primary Side Bar Right")},when:X.notEquals("config.workbench.sideBar.location","right"),order:2});Vt.appendMenuItem(me.MenubarAppearanceMenu,{group:"3_workbench_layout_move",command:{id:Ts.ID,title:c({key:"miMoveSidebarLeft",comment:["&& denotes a mnemonic"]},"&&Move Primary Side Bar Left")},when:X.equals("config.workbench.sideBar.location","right"),order:2});Me(class extends je{constructor(){super({id:"workbench.action.toggleEditorVisibility",title:{...ye("toggleEditor","Toggle Editor Area Visibility"),mnemonicTitle:c({key:"miShowEditorArea",comment:["&& denotes a mnemonic"]},"Show &&Editor Area")},category:ut.View,f1:!0,toggled:n2,precondition:X.and(gs.toNegated(),X.or(ra.isEqualTo("center"),dd.notEqualsTo("bottom")))})}run(r){r.get(ct).toggleMaximizedPanel()}});Vt.appendMenuItem(me.MenubarViewMenu,{group:"2_appearance",title:c({key:"miAppearance",comment:["&& denotes a mnemonic"]},"&&Appearance"),submenu:me.MenubarAppearanceMenu,order:1});var xd=class r extends je{static ID="workbench.action.toggleSidebarVisibility";constructor(){super({id:r.ID,title:ye("toggleSidebar","Toggle Primary Side Bar Visibility"),toggled:{condition:wc,title:c("primary sidebar","Primary Side Bar"),mnemonicTitle:c({key:"primary sidebar mnemonic",comment:["&& denotes a mnemonic"]},"&&Primary Side Bar")},category:ut.View,f1:!0,keybinding:{weight:200,primary:2080},menu:[{id:me.LayoutControlMenuSubmenu,group:"0_workbench_layout",order:0},{id:me.MenubarAppearanceMenu,group:"2_workbench_layout",order:1}]})}run(e){let t=e.get(ct);t.setPartHidden(t.isVisible("workbench.parts.sidebar"),"workbench.parts.sidebar")}};Me(xd);Vt.appendMenuItems([{id:me.ViewContainerTitleContext,item:{group:"3_workbench_layout_move",command:{id:xd.ID,title:c("compositePart.hideSideBarLabel","Hide Primary Side Bar")},when:X.and(wc,X.equals("viewContainerLocation",Si(0))),order:2}},{id:me.ViewTitleContext,item:{group:"3_workbench_layout_move",command:{id:xd.ID,title:c("compositePart.hideSideBarLabel","Hide Primary Side Bar")},when:X.and(wc,X.equals("viewLocation",Si(0))),order:2}},{id:me.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:xd.ID,title:c("toggleSideBar","Toggle Primary Side Bar"),icon:W3,toggled:{condition:wc,icon:NT}},when:X.and(X.or(X.equals("config.workbench.layoutControl.type","toggles"),X.equals("config.workbench.layoutControl.type","both")),X.equals("config.workbench.sideBar.location","left")),order:0}},{id:me.LayoutControlMenu,item:{group:"0_workbench_toggles",command:{id:xd.ID,title:c("toggleSideBar","Toggle Primary Side Bar"),icon:z3,toggled:{condition:wc,icon:FT}},when:X.and(X.or(X.equals("config.workbench.layoutControl.type","toggles"),X.equals("config.workbench.layoutControl.type","both")),X.equals("config.workbench.sideBar.location","right")),order:2}}]);var $c=class r extends je{static ID="workbench.action.toggleStatusbarVisibility";static statusbarVisibleKey="workbench.statusBar.visible";constructor(){super({id:r.ID,title:{...ye("toggleStatusbar","Toggle Status Bar Visibility"),mnemonicTitle:c({key:"miStatusbar",comment:["&& denotes a mnemonic"]},"S&&tatus Bar")},category:ut.View,f1:!0,toggled:X.equals("config.workbench.statusBar.visible",!0),menu:[{id:me.MenubarAppearanceMenu,group:"2_workbench_layout",order:3}]})}run(e){let t=e.get(ct),n=e.get(ke),o=!t.isVisible("workbench.parts.statusbar",xe);return n.updateValue(r.statusbarVisibleKey,o)}};Me($c);var Td=class extends je{constructor(t,n,i,o,s,a){super({id:o,title:i,category:ut.View,precondition:s,metadata:a?{description:a}:void 0,f1:!0});this.settingName=t;this.value=n}run(t){return t.get(ke).updateValue(this.settingName,this.value)}},K0=class r extends Td{static ID="workbench.action.hideEditorTabs";constructor(){let e=X.and(X.equals("config.workbench.editor.showTabs","none").negate(),ho.negate()),t=ye("hideEditorTabs","Hide Editor Tabs");super("workbench.editor.showTabs","none",t,r.ID,e,ye("hideEditorTabsDescription","Hide Tab Bar"))}},G0=class r extends Td{static ID="workbench.action.zenHideEditorTabs";constructor(){let e=X.and(X.equals("config.zenMode.showTabs","none").negate(),ho),t=ye("hideEditorTabsZenMode","Hide Editor Tabs in Zen Mode");super("zenMode.showTabs","none",t,r.ID,e,ye("hideEditorTabsZenModeDescription","Hide Tab Bar in Zen Mode"))}},q0=class r extends Td{static ID="workbench.action.showMultipleEditorTabs";constructor(){let e=X.and(X.equals("config.workbench.editor.showTabs","multiple").negate(),ho.negate()),t=ye("showMultipleEditorTabs","Show Multiple Editor Tabs");super("workbench.editor.showTabs","multiple",t,r.ID,e,ye("showMultipleEditorTabsDescription","Show Tab Bar with multiple tabs"))}},$0=class r extends Td{static ID="workbench.action.zenShowMultipleEditorTabs";constructor(){let e=X.and(X.equals("config.zenMode.showTabs","multiple").negate(),ho),t=ye("showMultipleEditorTabsZenMode","Show Multiple Editor Tabs in Zen Mode");super("zenMode.showTabs","multiple",t,r.ID,e,ye("showMultipleEditorTabsZenModeDescription","Show Tab Bar in Zen Mode"))}},j0=class r extends Td{static ID="workbench.action.showEditorTab";constructor(){let e=X.and(X.equals("config.workbench.editor.showTabs","single").negate(),ho.negate()),t=ye("showSingleEditorTab","Show Single Editor Tab");super("workbench.editor.showTabs","single",t,r.ID,e,ye("showSingleEditorTabDescription","Show Tab Bar with one Tab"))}},Y0=class r extends Td{static ID="workbench.action.zenShowEditorTab";constructor(){let e=X.and(X.equals("config.zenMode.showTabs","single").negate(),ho),t=ye("showSingleEditorTabZenMode","Show Single Editor Tab in Zen Mode");super("zenMode.showTabs","single",t,r.ID,e,ye("showSingleEditorTabZenModeDescription","Show Tab Bar in Zen Mode with one Tab"))}};Me(K0);Me(G0);Me(q0);Me($0);Me(j0);Me(Y0);Vt.appendMenuItem(me.MenubarAppearanceMenu,{submenu:me.EditorTabsBarShowTabsSubmenu,title:c("tabBar","Tab Bar"),group:"3_workbench_layout_move",order:10,when:ho.negate()});Vt.appendMenuItem(me.MenubarAppearanceMenu,{submenu:me.EditorTabsBarShowTabsZenModeSubmenu,title:c("tabBar","Tab Bar"),group:"3_workbench_layout_move",order:10,when:ho});var X0=class r extends je{static ID="workbench.action.editorActionsTitleBar";constructor(){super({id:r.ID,title:ye("moveEditorActionsToTitleBar","Move Editor Actions to Title Bar"),category:ut.View,precondition:X.equals("config.workbench.editor.editorActionsLocation","titleBar").negate(),metadata:{description:ye("moveEditorActionsToTitleBarDescription","Move Editor Actions from the tab bar to the title bar")},f1:!0})}run(e){return e.get(ke).updateValue("workbench.editor.editorActionsLocation","titleBar")}};Me(X0);var Q0=class r extends je{static ID="workbench.action.editorActionsDefault";constructor(){super({id:r.ID,title:ye("moveEditorActionsToTabBar","Move Editor Actions to Tab Bar"),category:ut.View,precondition:X.and(X.equals("config.workbench.editor.editorActionsLocation","default").negate(),X.equals("config.workbench.editor.showTabs","none").negate()),metadata:{description:ye("moveEditorActionsToTabBarDescription","Move Editor Actions from the title bar to the tab bar")},f1:!0})}run(e){return e.get(ke).updateValue("workbench.editor.editorActionsLocation","default")}};Me(Q0);var J0=class r extends je{static ID="workbench.action.hideEditorActions";constructor(){super({id:r.ID,title:ye("hideEditorActons","Hide Editor Actions"),category:ut.View,precondition:X.equals("config.workbench.editor.editorActionsLocation","hidden").negate(),metadata:{description:ye("hideEditorActonsDescription","Hide Editor Actions in the tab and title bar")},f1:!0})}run(e){return e.get(ke).updateValue("workbench.editor.editorActionsLocation","hidden")}};Me(J0);var Z0=class r extends je{static ID="workbench.action.showEditorActions";constructor(){super({id:r.ID,title:ye("showEditorActons","Show Editor Actions"),category:ut.View,precondition:X.equals("config.workbench.editor.editorActionsLocation","hidden"),metadata:{description:ye("showEditorActonsDescription","Make Editor Actions visible.")},f1:!0})}run(e){return e.get(ke).updateValue("workbench.editor.editorActionsLocation","default")}};Me(Z0);Vt.appendMenuItem(me.MenubarAppearanceMenu,{submenu:me.EditorActionsPositionSubmenu,title:c("editorActionsPosition","Editor Actions Position"),group:"3_workbench_layout_move",order:11});var eL=class r extends je{static ID="workbench.action.configureEditorTabs";constructor(){super({id:r.ID,title:ye("configureTabs","Configure Tabs"),category:ut.View})}run(e){e.get(ZD).openSettings({jsonEditor:!1,query:"workbench.editor tab"})}};Me(eL);var tL=class r extends je{static ID="workbench.action.configureEditor";constructor(){super({id:r.ID,title:ye("configureEditors","Configure Editors"),category:ut.View})}run(e){e.get(ZD).openSettings({jsonEditor:!1,query:"workbench.editor"})}};Me(tL);Me(class extends je{constructor(){super({id:"workbench.action.toggleSeparatePinnedEditorTabs",title:ye("toggleSeparatePinnedEditorTabs","Separate Pinned Editor Tabs"),category:ut.View,precondition:X.equals("config.workbench.editor.showTabs","multiple"),metadata:{description:ye("toggleSeparatePinnedEditorTabsDescription","Toggle whether pinned editor tabs are shown on a separate row above unpinned tabs.")},f1:!0})}run(r){let e=r.get(ke),n=!e.getValue("workbench.editor.pinnedTabsOnSeparateRow");return e.updateValue("workbench.editor.pinnedTabsOnSeparateRow",n)}});Me(class extends je{constructor(){super({id:"workbench.action.toggleZenMode",title:{...ye("toggleZenMode","Toggle Zen Mode"),mnemonicTitle:c({key:"miToggleZenMode",comment:["&& denotes a mnemonic"]},"Zen Mode")},precondition:gs.toNegated(),category:ut.View,f1:!0,keybinding:{weight:200,primary:xl(2089,56)},toggled:ho,menu:[{id:me.MenubarAppearanceMenu,group:"1_toggle_view",order:2}]})}run(r){return r.get(ct).toggleZenMode()}});Bi.registerCommandAndKeybindingRule({id:"workbench.action.exitZenMode",weight:-900,handler(r){let e=r.get(ct),t=r.get(Ge);ho.getValue(t)&&e.toggleZenMode()},when:ho,primary:xl(9,9)});if(xt||Wt||_t){Me(class extends je{constructor(){super({id:"workbench.action.toggleMenuBar",title:{...ye("toggleMenuBar","Toggle Menu Bar"),mnemonicTitle:c({key:"miMenuBar",comment:["&& denotes a mnemonic"]},"Menu &&Bar")},category:ut.View,f1:!0,toggled:X.and(Ex.toNegated(),X.notEquals("config.window.menuBarVisibility","hidden"),X.notEquals("config.window.menuBarVisibility","toggle"),X.notEquals("config.window.menuBarVisibility","compact")),menu:[{id:me.MenubarAppearanceMenu,group:"2_workbench_layout",order:0}]})}run(e){return e.get(ct).toggleMenuBar()}});for(let r of[me.TitleBarContext,me.TitleBarTitleContext])Vt.appendMenuItem(r,{command:{id:"workbench.action.toggleMenuBar",title:c("miMenuBarNoMnemonic","Menu Bar"),toggled:X.and(Ex.toNegated(),X.notEquals("config.window.menuBarVisibility","hidden"),X.notEquals("config.window.menuBarVisibility","toggle"),X.notEquals("config.window.menuBarVisibility","compact"))},when:X.and(gs.toNegated(),X.notEquals(i2.key,"native"),h1.negate()),group:"2_config",order:0})}Me(class extends je{constructor(){super({id:"workbench.action.resetViewLocations",title:ye("resetViewLocations","Reset View Locations"),category:ut.View,f1:!0})}run(r){return r.get($i).reset()}});Me(class extends je{constructor(){super({id:"workbench.action.moveView",title:ye("moveView","Move View"),category:ut.View,f1:!0})}async run(r){let e=r.get($i),t=r.get(_e),n=r.get(Zx),i=r.get(Ge),o=r.get(ha),s=Mo.getValue(i),a;s&&e.getViewDescriptorById(s)?.canMoveView&&(a=s);try{if(a=await this.getView(n,e,o,a),!a)return;let l=new WT;t.invokeFunction(d=>l.run(d,a))}catch{}}getViewItems(r,e){let t=[];return e.getVisiblePaneCompositeIds(0).forEach(s=>{let a=r.getViewContainerById(s),l=r.getViewContainerModel(a),d=!1;l.visibleViewDescriptors.forEach(u=>{u.canMoveView&&(d||(t.push({type:"separator",label:c("sidebarContainer","Side Bar / {0}",l.title)}),d=!0),t.push({id:u.id,label:u.name.value}))})}),e.getPinnedPaneCompositeIds(1).forEach(s=>{let a=r.getViewContainerById(s),l=r.getViewContainerModel(a),d=!1;l.visibleViewDescriptors.forEach(u=>{u.canMoveView&&(d||(t.push({type:"separator",label:c("panelContainer","Panel / {0}",l.title)}),d=!0),t.push({id:u.id,label:u.name.value}))})}),e.getPinnedPaneCompositeIds(2).forEach(s=>{let a=r.getViewContainerById(s),l=r.getViewContainerModel(a),d=!1;l.visibleViewDescriptors.forEach(u=>{u.canMoveView&&(d||(t.push({type:"separator",label:c("secondarySideBarContainer","Secondary Side Bar / {0}",l.title)}),d=!0),t.push({id:u.id,label:u.name.value}))})}),t}async getView(r,e,t,n){let i=new Q,o=i.add(r.createQuickPick({useSeparators:!0}));return o.placeholder=c("moveFocusedView.selectView","Select a View to Move"),o.items=this.getViewItems(e,t),o.selectedItems=o.items.filter(s=>s.id===n),new Promise((s,a)=>{i.add(o.onDidAccept(()=>{let l=o.selectedItems[0];l.id?s(l.id):a(),o.hide()})),i.add(o.onDidHide(()=>{i.dispose(),a()})),o.show()})}});var WT=class extends je{constructor(){super({id:"workbench.action.moveFocusedView",title:ye("moveFocusedView","Move Focused View"),category:ut.View,precondition:Mo.notEqualsTo(""),f1:!0})}run(e,t){let n=e.get($i),i=e.get(vd),o=e.get(Zx),s=e.get(Ge),a=e.get(Gi),l=e.get(ha),d=t||Mo.getValue(s);if(d===void 0||d.trim()===""){a.error(c("moveFocusedView.error.noFocusedView","There is no view currently focused."));return}let u=n.getViewDescriptorById(d);if(!u||!u.canMoveView){a.error(c("moveFocusedView.error.nonMovableView","The currently focused view is not movable."));return}let p=new Q,h=p.add(o.createQuickPick({useSeparators:!0}));h.placeholder=c("moveFocusedView.selectDestination","Select a Destination for the View"),h.title=c({key:"moveFocusedView.title",comment:["{0} indicates the title of the view the user has selected to move."]},"View: Move {0}",u.name.value);let m=[],f=n.getViewContainerByViewId(d),g=n.getViewLocationById(d),y=n.getViewContainerModel(f).allViewDescriptors.length===1;y&&g===1||m.push({id:"_.panel.newcontainer",label:c({key:"moveFocusedView.newContainerInPanel",comment:["Creates a new top-level tab in the panel."]},"New Panel Entry")}),y&&g===0||m.push({id:"_.sidebar.newcontainer",label:c("moveFocusedView.newContainerInSidebar","New Side Bar Entry")}),y&&g===2||m.push({id:"_.auxiliarybar.newcontainer",label:c("moveFocusedView.newContainerInSidePanel","New Secondary Side Bar Entry")}),m.push({type:"separator",label:c("sidebar","Side Bar")});let T=l.getVisiblePaneCompositeIds(0);m.push(...T.filter(_=>_===n.getViewContainerByViewId(d).id?!1:!n.getViewContainerById(_).rejectAddedViews).map(_=>({id:_,label:n.getViewContainerModel(n.getViewContainerById(_)).title}))),m.push({type:"separator",label:c("panel","Panel")});let E=l.getPinnedPaneCompositeIds(1);m.push(...E.filter(_=>_===n.getViewContainerByViewId(d).id?!1:!n.getViewContainerById(_).rejectAddedViews).map(_=>({id:_,label:n.getViewContainerModel(n.getViewContainerById(_)).title}))),m.push({type:"separator",label:c("secondarySideBar","Secondary Side Bar")});let D=l.getPinnedPaneCompositeIds(2);m.push(...D.filter(_=>_===n.getViewContainerByViewId(d).id?!1:!n.getViewContainerById(_).rejectAddedViews).map(_=>({id:_,label:n.getViewContainerModel(n.getViewContainerById(_)).title}))),h.items=m,p.add(h.onDidAccept(()=>{let _=h.selectedItems[0];_.id==="_.panel.newcontainer"?(n.moveViewToLocation(u,1,this.desc.id),i.openView(d,!0)):_.id==="_.sidebar.newcontainer"?(n.moveViewToLocation(u,0,this.desc.id),i.openView(d,!0)):_.id==="_.auxiliarybar.newcontainer"?(n.moveViewToLocation(u,2,this.desc.id),i.openView(d,!0)):_.id&&(n.moveViewsToContainer([u],n.getViewContainerById(_.id),void 0,this.desc.id),i.openView(d,!0)),h.hide()})),p.add(h.onDidHide(()=>p.dispose())),h.show()}};Me(WT);Me(class extends je{constructor(){super({id:"workbench.action.resetFocusedViewLocation",title:ye("resetFocusedViewLocation","Reset Focused View Location"),category:ut.View,f1:!0,precondition:Mo.notEqualsTo("")})}run(r){let e=r.get($i),t=r.get(Ge),n=r.get(Gi),i=r.get(vd),o=Mo.getValue(t),s=null;if(o!==void 0&&o.trim()!==""&&(s=e.getViewDescriptorById(o)),!s){n.error(c("resetFocusedView.error.noFocusedView","There is no view currently focused."));return}let a=e.getDefaultContainerById(s.id);!a||a===e.getViewContainerByViewId(s.id)||(e.moveViewsToContainer([s],a,void 0,this.desc.id),i.openView(s.id,!0))}});var lr=class extends je{static RESIZE_INCREMENT=60;resizePart(e,t,n,i){let o;if(i===void 0){let s=n.hasFocus("workbench.parts.editor"),a=n.hasFocus("workbench.parts.sidebar"),l=n.hasFocus("workbench.parts.panel"),d=n.hasFocus("workbench.parts.auxiliarybar");a?o="workbench.parts.sidebar":l?o="workbench.parts.panel":s?o="workbench.parts.editor":d&&(o="workbench.parts.auxiliarybar")}else o=i;o&&n.resizePart(o,e,t)}},nL=class extends lr{constructor(){super({id:"workbench.action.increaseViewSize",title:ye("increaseViewSize","Increase Current View Size"),f1:!0,precondition:gs.toNegated()})}run(e){this.resizePart(lr.RESIZE_INCREMENT,lr.RESIZE_INCREMENT,e.get(ct))}},iL=class extends lr{constructor(){super({id:"workbench.action.increaseViewWidth",title:ye("increaseEditorWidth","Increase Editor Width"),f1:!0,precondition:gs.toNegated()})}run(e){this.resizePart(lr.RESIZE_INCREMENT,0,e.get(ct),"workbench.parts.editor")}},rL=class extends lr{constructor(){super({id:"workbench.action.increaseViewHeight",title:ye("increaseEditorHeight","Increase Editor Height"),f1:!0,precondition:gs.toNegated()})}run(e){this.resizePart(0,lr.RESIZE_INCREMENT,e.get(ct),"workbench.parts.editor")}},oL=class extends lr{constructor(){super({id:"workbench.action.decreaseViewSize",title:ye("decreaseViewSize","Decrease Current View Size"),f1:!0,precondition:gs.toNegated()})}run(e){this.resizePart(-lr.RESIZE_INCREMENT,-lr.RESIZE_INCREMENT,e.get(ct))}},sL=class extends lr{constructor(){super({id:"workbench.action.decreaseViewWidth",title:ye("decreaseEditorWidth","Decrease Editor Width"),f1:!0,precondition:gs.toNegated()})}run(e){this.resizePart(-lr.RESIZE_INCREMENT,0,e.get(ct),"workbench.parts.editor")}},aL=class extends lr{constructor(){super({id:"workbench.action.decreaseViewHeight",title:ye("decreaseEditorHeight","Decrease Editor Height"),f1:!0,precondition:gs.toNegated()})}run(e){this.resizePart(0,-lr.RESIZE_INCREMENT,e.get(ct),"workbench.parts.editor")}};Me(nL);Me(iL);Me(rL);Me(oL);Me(sL);Me(aL);function Z3(r){return r.iconA!==void 0}var xh=(r,e,t,n)=>({id:r,active:e,label:t,visualIcon:n,activeIcon:z.eye,inactiveIcon:z.eyeClosed,activeAriaLabel:c("selectToHide","Select to Hide"),inactiveAriaLabel:c("selectToShow","Select to Show"),useButtons:!0}),rl=(r,e,t,n)=>({id:r,active:e,label:t,visualIcon:n,activeIcon:z.check,activeAriaLabel:c("active","Active"),useButtons:!1}),e6=X.and(Ex.toNegated(),X.notEquals("config.window.menuBarVisibility","hidden"),X.notEquals("config.window.menuBarVisibility","toggle"),X.notEquals("config.window.menuBarVisibility","compact")),zT=[];(!ze||!qo)&&zT.push(xh("workbench.action.toggleMenuBar",e6,c("menuBar","Menu Bar"),B3));zT.push(xh(J3,X.notEquals("config.workbench.activityBar.location","hidden"),c("activityBar","Activity Bar"),{whenA:X.equals("config.workbench.sideBar.location","left"),iconA:U3,iconB:V3}),xh(xd.ID,wc,c("sideBar","Primary Side Bar"),{whenA:X.equals("config.workbench.sideBar.location","left"),iconA:NT,iconB:FT}),xh(Id.ID,Xa,c("secondarySideBar","Secondary Side Bar"),{whenA:X.equals("config.workbench.sideBar.location","left"),iconA:FT,iconB:NT}),xh(qc.ID,Cc,c("panel","Panel"),H3),xh($c.ID,X.equals("config.workbench.statusBar.visible",!0),c("statusBar","Status Bar"),K3));var uV=[rl(VT.ID,X.equals("config.workbench.sideBar.location","left"),c("leftSideBar","Left"),NT),rl(UT.ID,X.equals("config.workbench.sideBar.location","right"),c("rightSideBar","Right"),FT)],pV=[rl("workbench.action.alignPanelLeft",ra.isEqualTo("left"),c("leftPanel","Left"),G3),rl("workbench.action.alignPanelRight",ra.isEqualTo("right"),c("rightPanel","Right"),q3),rl("workbench.action.alignPanelCenter",ra.isEqualTo("center"),c("centerPanel","Center"),$3),rl("workbench.action.alignPanelJustify",ra.isEqualTo("justify"),c("justifyPanel","Justify"),j3)],hV=[rl("workbench.action.toggleFullScreen",h1,c("fullscreen","Full Screen"),Y3),rl("workbench.action.toggleZenMode",ho,c("zenMode","Zen Mode"),Q3),rl("workbench.action.toggleCenteredLayout",m1,c("centeredLayout","Centered Layout"),X3)],mV=new Set;for(let{active:r}of[...zT,...uV,...pV,...hV])for(let e of r.keys())mV.add(e);Me(class extends je{_currentQuickPick;constructor(){super({id:"workbench.action.customizeLayout",title:ye("customizeLayout","Customize Layout..."),f1:!0,icon:cV,menu:[{id:me.LayoutControlMenuSubmenu,group:"z_end"},{id:me.LayoutControlMenu,when:X.equals("config.workbench.layoutControl.type","both"),group:"z_end"}]})}getItems(e,t){let n=i=>{let o=i.active.evaluate(e.getContext(null)),s=i.useButtons?i.label:i.label+(o&&i.activeIcon?` $(${i.activeIcon.id})`:!o&&i.inactiveIcon?` $(${i.inactiveIcon.id})`:""),a=i.label+(o&&i.activeAriaLabel?` (${i.activeAriaLabel})`:!o&&i.inactiveAriaLabel?` (${i.inactiveAriaLabel})`:"");if(i.visualIcon){let d=i.visualIcon;Z3(d)&&(d=d.whenA.evaluate(e.getContext(null))?d.iconA:d.iconB),s=`$(${d.id}) ${s}`}let l=o?i.activeIcon:i.inactiveIcon;return{type:"item",id:i.id,label:s,ariaLabel:a,keybinding:t.lookupKeybinding(i.id,e),buttons:i.useButtons?[{alwaysVisible:!1,tooltip:a,iconClass:l?qe.asClassName(l):void 0}]:void 0}};return[{type:"separator",label:c("toggleVisibility","Visibility")},...zT.map(n),{type:"separator",label:c("sideBarPosition","Primary Side Bar Position")},...uV.map(n),{type:"separator",label:c("panelAlignment","Panel Alignment")},...pV.map(n),{type:"separator",label:c("layoutModes","Modes")},...hV.map(n)]}run(e){if(this._currentQuickPick){this._currentQuickPick.hide();return}let t=e.get(ke),n=e.get(Ge),i=e.get(Zi),o=e.get(Zx),s=e.get(Wn),a=new Q,l=a.add(o.createQuickPick({useSeparators:!0}));this._currentQuickPick=l,l.items=this.getItems(n,s),l.ignoreFocusOut=!0,l.hideInput=!0,l.title=c("customizeLayoutQuickPickTitle","Customize Layout");let d={alwaysVisible:!0,iconClass:qe.asClassName(z.close),tooltip:c("close","Close")},u={alwaysVisible:!0,iconClass:qe.asClassName(z.discard),tooltip:c("restore defaults","Restore Defaults")};l.buttons=[u,d];let p;a.add(n.onDidChangeContext(h=>{h.affectsSome(mV)&&(l.items=this.getItems(n,s),p&&(l.activeItems=l.items.filter(m=>m.id===p?.id)),setTimeout(()=>o.focus(),0))})),a.add(l.onDidAccept(h=>{l.selectedItems.length&&(p=l.selectedItems[0],i.executeCommand(p.id))})),a.add(l.onDidTriggerItemButton(h=>{h.item&&(p=h.item,i.executeCommand(p.id))})),a.add(l.onDidTriggerButton(h=>{if(h===d)l.hide();else if(h===u){let m=f=>{let g=t.inspect(f);t.updateValue(f,g.defaultValue)};m("workbench.activityBar.location"),m("workbench.sideBar.location"),m("workbench.statusBar.visible"),m("workbench.panel.defaultLocation"),(!ze||!qo)&&m("window.menuBarVisibility"),i.executeCommand("workbench.action.alignPanelCenter")}})),a.add(l.onDidHide(()=>{l.dispose()})),a.add(l.onDispose(()=>{this._currentQuickPick=void 0,a.dispose()})),l.show()}});var HT=class r extends P{constructor(t){super();this.storageService=t;this.restoreState(),this.registerListeners()}static HIDDEN_ENTRIES_KEY="workbench.statusbar.hidden";_onDidChangeEntryVisibility=this._register(new x);onDidChangeEntryVisibility=this._onDidChangeEntryVisibility.event;_entries=[];get entries(){return this._entries.slice(0)}_lastFocusedEntry;get lastFocusedEntry(){return this._lastFocusedEntry&&!this.isHidden(this._lastFocusedEntry.id)?this._lastFocusedEntry:void 0}hidden=new Set;restoreState(){let t=this.storageService.get(r.HIDDEN_ENTRIES_KEY,0);if(t)try{this.hidden=new Set(JSON.parse(t))}catch{}}registerListeners(){this._register(this.storageService.onDidChangeValue(0,r.HIDDEN_ENTRIES_KEY,this._register(new Q))(()=>this.onDidStorageValueChange()))}onDidStorageValueChange(){let t=new Set(this.hidden);this.hidden.clear(),this.restoreState();let n=new Set;for(let i of t)this.hidden.has(i)||n.add(i);for(let i of this.hidden)t.has(i)||n.add(i);if(n.size>0)for(let i of this._entries)n.has(i.id)&&(this.updateVisibility(i.id,!0),n.delete(i.id))}add(t){this._entries.push(t),this.updateVisibility(t,!1),this.sort(),this.markFirstLastVisibleEntry()}remove(t){let n=this._entries.indexOf(t);n>=0&&(this._entries.splice(n,1),this._entries.some(i=>jc(i.priority.primary)&&i.priority.primary.id===t.id)&&this.sort(),this.markFirstLastVisibleEntry())}isHidden(t){return this.hidden.has(t)}hide(t){this.hidden.has(t)||(this.hidden.add(t),this.updateVisibility(t,!0),this.saveState())}show(t){this.hidden.has(t)&&(this.hidden.delete(t),this.updateVisibility(t,!0),this.saveState())}findEntry(t){return this._entries.find(n=>n.container===t)}getEntries(t){return this._entries.filter(n=>n.alignment===t)}focusNextEntry(){this.focusEntry(1,0)}focusPreviousEntry(){this.focusEntry(-1,this.entries.length-1)}isEntryFocused(){return!!this.getFocusedEntry()}getFocusedEntry(){return this._entries.find(t=>b_(t.container))}focusEntry(t,n){let i=a=>{let l=a,d=l>=0&&l<this._entries.length?this._entries[l]:void 0;for(;d&&this.isHidden(d.id);)l+=t,d=l>=0&&l<this._entries.length?this._entries[l]:void 0;return d},o=this.getFocusedEntry();if(o){let a=i(this._entries.indexOf(o)+t);if(a){this._lastFocusedEntry=a,a.labelContainer.focus();return}}let s=i(n);s&&(this._lastFocusedEntry=s,s.labelContainer.focus())}updateVisibility(t,n){if(typeof t=="string"){let i=t;for(let o of this._entries)o.id===i&&this.updateVisibility(o,n)}else{let i=t,o=this.isHidden(i.id);o?Zl(i.container):Ga(i.container),n&&this._onDidChangeEntryVisibility.fire({id:i.id,visible:!o}),this.markFirstLastVisibleEntry()}}saveState(){this.hidden.size>0?this.storageService.store(r.HIDDEN_ENTRIES_KEY,JSON.stringify(Array.from(this.hidden.values())),0,0):this.storageService.remove(r.HIDDEN_ENTRIES_KEY,0)}sort(){let t=new Map,n=new Map;for(let s=0;s<this._entries.length;s++){let a=this._entries[s];if(typeof a.priority.primary=="number")t.set(a,s);else{let l=a.priority.primary.id,d=n.get(l);if(!d){for(let u of n.values())if(u.has(l)){d=u;break}d||(d=new Map,n.set(l,d))}d.set(a.id,a)}}let i=Array.from(t.keys());i.sort((s,a)=>s.alignment===a.alignment?s.priority.primary!==a.priority.primary?Number(a.priority.primary)-Number(s.priority.primary):s.priority.secondary!==a.priority.secondary?a.priority.secondary-s.priority.secondary:t.get(s)-t.get(a):s.alignment===0?-1:a.alignment===0?1:0);let o;if(n.size>0){o=[];for(let s of i){let a=n.get(s.id),l=a?Array.from(a.values()):void 0;l&&o.push(...l.filter(d=>jc(d.priority.primary)&&d.priority.primary.alignment===0)),o.push(s),l&&o.push(...l.filter(d=>jc(d.priority.primary)&&d.priority.primary.alignment===1)),n.delete(s.id)}for(let[,s]of n)o.push(...s.values())}else o=i;this._entries=o}markFirstLastVisibleEntry(){this.doMarkFirstLastVisibleStatusbarItem(this.getEntries(0)),this.doMarkFirstLastVisibleStatusbarItem(this.getEntries(1))}doMarkFirstLastVisibleStatusbarItem(t){let n,i;for(let o of t)o.container.classList.remove("first-visible-item","last-visible-item"),!this.isHidden(o.id)&&(n||(n=o),i=o);n?.container.classList.add("first-visible-item"),i?.container.classList.add("last-visible-item")}};var KT=class extends un{constructor(t,n,i){super(t,n,void 0,!0);this.model=i;this.checked=!i.isHidden(t)}async run(){this.model.isHidden(this.id)?this.model.show(this.id):this.model.hide(this.id)}},GT=class extends un{constructor(t,n,i){super(t,c("hide","Hide '{0}'",n),void 0,!0);this.model=i}async run(){this.model.hide(this.id)}};Bi.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusPrevious",weight:200,primary:15,secondary:[16],when:ld,handler:r=>{r.get(Es).focusPreviousEntry()}});Bi.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusNext",weight:200,primary:17,secondary:[18],when:ld,handler:r=>{r.get(Es).focusNextEntry()}});Bi.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusFirst",weight:200,primary:14,when:ld,handler:r=>{let e=r.get(Es);e.focus(!1),e.focusNextEntry()}});Bi.registerCommandAndKeybindingRule({id:"workbench.statusBar.focusLast",weight:200,primary:13,when:ld,handler:r=>{let e=r.get(Es);e.focus(!1),e.focusPreviousEntry()}});Bi.registerCommandAndKeybindingRule({id:"workbench.statusBar.clearFocus",weight:200,primary:9,when:ld,handler:r=>{let e=r.get(Es),t=r.get(Rn);e.isEntryFocused()?e.focus(!1):t.activeEditorPane&&t.activeEditorPane.focus()}});var lL=class extends je{constructor(){super({id:"workbench.action.focusStatusBar",title:ye("focusStatusBar","Focus Status Bar"),category:ut.View,f1:!0})}async run(e){e.get(ct).focusPart("workbench.parts.statusbar",fc())}};Me(lL);var qT=class{constructor(e){this._container=e}hover;set text(e){us(this._container,...Yr(e??""))}set title(e){!this.hover&&e?this.hover=yi().setupManagedHover(Pt("mouse"),this._container,e):this.hover&&this.hover.update(e)}dispose(){this.hover?.dispose()}};var Th=class extends P{constructor(t,n,i,o,s,a,l,d){super();this.container=t;this.hoverDelegate=i;this.commandService=o;this.hoverService=s;this.notificationService=a;this.telemetryService=l;this.themeService=d;this.labelContainer=document.createElement("a"),this.labelContainer.tabIndex=-1,this.labelContainer.setAttribute("role","button"),this.labelContainer.className="statusbar-item-label",this._register(Zt.addTarget(this.labelContainer)),this.label=this._register(new dL(this.labelContainer)),this.container.appendChild(this.labelContainer),this.beakContainer=document.createElement("div"),this.beakContainer.className="status-bar-item-beak-container",this.container.appendChild(this.beakContainer),this.update(n)}label;entry=void 0;foregroundListener=this._register(new Ut);backgroundListener=this._register(new Ut);commandMouseListener=this._register(new Ut);commandTouchListener=this._register(new Ut);commandKeyboardListener=this._register(new Ut);focusListener=this._register(new Ut);focusOutListener=this._register(new Ut);hover=void 0;labelContainer;beakContainer;get name(){return Rt(this.entry).name}get hasCommand(){return typeof this.entry?.command<"u"}update(t){if(this.label.showProgress=t.showProgress??!1,(!this.entry||t.text!==this.entry.text)&&(this.label.text=t.text,t.text?Ga(this.labelContainer):Zl(this.labelContainer)),(!this.entry||t.ariaLabel!==this.entry.ariaLabel)&&(this.container.setAttribute("aria-label",t.ariaLabel),this.labelContainer.setAttribute("aria-label",t.ariaLabel)),(!this.entry||t.role!==this.entry.role)&&this.labelContainer.setAttribute("role",t.role||"button"),!this.entry||!this.isEqualTooltip(this.entry,t)){let i=Rl(t.tooltip)?{markdown:t.tooltip,markdownNotSupportedFallback:void 0}:t.tooltip;this.hover?this.hover.update(i):this.hover=this._register(this.hoverService.setupManagedHover(this.hoverDelegate,this.container,i)),t.command!==$T&&(this.focusListener.value=K(this.labelContainer,se.FOCUS,o=>{We.stop(o),this.hover?.show(!1)}),this.focusOutListener.value=K(this.labelContainer,se.FOCUS_OUT,o=>{We.stop(o),this.hover?.hide()}))}if(!this.entry||t.command!==this.entry.command){this.commandMouseListener.clear(),this.commandTouchListener.clear(),this.commandKeyboardListener.clear();let i=t.command;i&&(i!==$T||this.hover)?(this.commandMouseListener.value=K(this.labelContainer,se.CLICK,()=>this.executeCommand(i)),this.commandTouchListener.value=K(this.labelContainer,wt.Tap,()=>this.executeCommand(i)),this.commandKeyboardListener.value=K(this.labelContainer,se.KEY_DOWN,o=>{let s=new ht(o);s.equals(10)||s.equals(3)?(We.stop(o),this.executeCommand(i)):(s.equals(9)||s.equals(15)||s.equals(17))&&(We.stop(o),this.hover?.hide())}),this.labelContainer.classList.remove("disabled")):this.labelContainer.classList.add("disabled")}(!this.entry||t.showBeak!==this.entry.showBeak)&&(t.showBeak?this.container.classList.add("has-beak"):this.container.classList.remove("has-beak"));let n=!!t.backgroundColor||t.kind&&t.kind!=="standard";if(!this.entry||t.kind!==this.entry.kind){for(let i of fV)this.container.classList.remove(`${i}-kind`);t.kind&&t.kind!=="standard"&&this.container.classList.add(`${t.kind}-kind`),this.container.classList.toggle("has-background-color",n)}(!this.entry||t.color!==this.entry.color)&&this.applyColor(this.labelContainer,t.color),(!this.entry||t.backgroundColor!==this.entry.backgroundColor)&&(this.container.classList.toggle("has-background-color",n),this.applyColor(this.container,t.backgroundColor,!0)),this.entry=t}isEqualTooltip({tooltip:t},{tooltip:n}){return t===void 0?n===void 0:Rl(t)?Rl(n)&&bv(t,n):t===n}async executeCommand(t){if(t===$T)this.hover?.show(!0);else{let n=typeof t=="string"?t:t.id,i=typeof t=="string"?[]:t.arguments??[];this.telemetryService.publicLog2("workbenchActionExecuted",{id:n,from:"status bar"});try{await this.commandService.executeCommand(n,...i)}catch(o){this.notificationService.error(dc(o))}}}applyColor(t,n,i){let o;if(i?this.backgroundListener.clear():this.foregroundListener.clear(),n)if(PO(n)){o=this.themeService.getColorTheme().getColor(n.id)?.toString();let s=this.themeService.onDidColorThemeChange(a=>{let l=a.getColor(n.id)?.toString();i?t.style.backgroundColor=l??"":t.style.color=l??""});i?this.backgroundListener.value=s:this.foregroundListener.value=s}else o=n;i?t.style.backgroundColor=o??"":t.style.color=o??""}};Th=C([v(3,Zi),v(4,No),v(5,wr),v(6,Ot),v(7,_n)],Th);var dL=class extends qT{constructor(t){super(t);this.container=t}progressCodicon=tS(Fk);currentText="";currentShowProgress=!1;set showProgress(t){this.currentShowProgress!==t&&(this.currentShowProgress=t,this.progressCodicon=tS(t==="syncing"?Fk:$O),this.text=this.currentText)}set text(t){if(this.currentShowProgress){this.container.firstChild!==this.progressCodicon&&this.container.appendChild(this.progressCodicon);for(let i of Array.from(this.container.childNodes))i!==this.progressCodicon&&i.remove();let n=t??"";n&&(n=` ${n}`),Ie(this.container,...Yr(n))}else super.text=t}};var ma=class extends uS{constructor(t,n,i,o,s,a,l,d){super(t,{hasTitle:!1},i,s,a);this.instantiationService=n;this.contextService=o;this.storageService=s;this.contextMenuService=l;this.contextKeyService=d;this.registerListeners()}static HEIGHT=22;minimumWidth=0;maximumWidth=Number.POSITIVE_INFINITY;minimumHeight=ma.HEIGHT;maximumHeight=ma.HEIGHT;styleElement;pendingEntries=[];viewModel=this._register(new HT(this.storageService));onDidChangeEntryVisibility=this.viewModel.onDidChangeEntryVisibility;_onWillDispose=this._register(new x);onWillDispose=this._onWillDispose.event;leftItemsContainer;rightItemsContainer;hoverDelegate=this._register(this.instantiationService.createInstance(Yp,"element",!0,(t,n)=>({persistence:{hideOnKeyDown:!0,sticky:n}})));compactEntriesDisposable=this._register(new Ut);styleOverrides=new Set;registerListeners(){this._register(this.onDidChangeEntryVisibility(()=>this.updateCompactEntries())),this._register(this.contextService.onDidChangeWorkbenchState(()=>this.updateStyles()))}addEntry(t,n,i,o=0){let s;return bV(o)?s=o:s={primary:o,secondary:os(n)},this.element?this.doAddEntry(t,n,i,s):this.doAddPendingEntry(t,n,i,s)}doAddPendingEntry(t,n,i,o){let s={entry:t,id:n,alignment:i,priority:o};return this.pendingEntries.push(s),{update:l=>{s.accessor?s.accessor.update(l):s.entry=l},dispose:()=>{s.accessor?s.accessor.dispose():this.pendingEntries=this.pendingEntries.filter(l=>l!==s)}}}doAddEntry(t,n,i,o){let s=this.doCreateStatusItem(n,i),a=this.instantiationService.createInstance(Th,s,t,this.hoverDelegate),l=new class{id=n;alignment=i;priority=o;container=s;labelContainer=a.labelContainer;get name(){return a.name}get hasCommand(){return a.hasCommand}},{needsFullRefresh:d}=this.doAddOrRemoveModelEntry(l,!0);return d?this.appendStatusbarEntries():this.appendStatusbarEntry(l),{update:u=>{a.update(u)},dispose:()=>{let{needsFullRefresh:u}=this.doAddOrRemoveModelEntry(l,!1);u?this.appendStatusbarEntries():s.remove(),vt(a)}}}doCreateStatusItem(t,n,...i){let o=document.createElement("div");return o.id=t,o.classList.add("statusbar-item"),i&&o.classList.add(...i),n===1?o.classList.add("right"):o.classList.add("left"),o}doAddOrRemoveModelEntry(t,n){let i=this.viewModel.entries;n?this.viewModel.add(t):this.viewModel.remove(t);let o=this.viewModel.entries;return n?i.splice(o.indexOf(t),0,t):i.splice(i.indexOf(t),1),{needsFullRefresh:!ln(i,o)}}isEntryVisible(t){return!this.viewModel.isHidden(t)}updateEntryVisibility(t,n){n?this.viewModel.show(t):this.viewModel.hide(t)}focusNextEntry(){this.viewModel.focusNextEntry()}focusPreviousEntry(){this.viewModel.focusPreviousEntry()}isEntryFocused(){return this.viewModel.isEntryFocused()}focus(t=!0){this.getContainer()?.focus();let n=this.viewModel.lastFocusedEntry;t&&n&&setTimeout(()=>n.labelContainer.focus(),0)}createContentArea(t){this.element=t;let n=this._register(this.contextKeyService.createScoped(this.element));return ld.bindTo(n).set(!0),this.leftItemsContainer=document.createElement("div"),this.leftItemsContainer.classList.add("left-items","items-container"),this.element.appendChild(this.leftItemsContainer),this.element.tabIndex=0,this.rightItemsContainer=document.createElement("div"),this.rightItemsContainer.classList.add("right-items","items-container"),this.element.appendChild(this.rightItemsContainer),this._register(K(t,se.CONTEXT_MENU,i=>this.showContextMenu(i))),this._register(Zt.addTarget(t)),this._register(K(t,wt.Contextmenu,i=>this.showContextMenu(i))),this.createInitialStatusbarEntries(),this.element}createInitialStatusbarEntries(){for(this.appendStatusbarEntries();this.pendingEntries.length;){let t=this.pendingEntries.shift();t&&(t.accessor=this.addEntry(t.entry,t.id,t.alignment,t.priority.primary))}}appendStatusbarEntries(){let t=Rt(this.leftItemsContainer),n=Rt(this.rightItemsContainer);pn(t),pn(n);for(let i of[...this.viewModel.getEntries(0),...this.viewModel.getEntries(1).reverse()])(i.alignment===0?t:n).appendChild(i.container);this.updateCompactEntries()}appendStatusbarEntry(t){let n=this.viewModel.getEntries(t.alignment);t.alignment===1&&n.reverse();let i=Rt(t.alignment===0?this.leftItemsContainer:this.rightItemsContainer),o=n.indexOf(t);o+1===n.length?i.appendChild(t.container):i.insertBefore(t.container,n[o+1].container),this.updateCompactEntries()}updateCompactEntries(){let t=this.viewModel.entries,n=new Map;for(let a of t)this.viewModel.isHidden(a.id)||n.set(a.id,a),a.container.classList.remove("compact-left","compact-right");let i=new Map;for(let a of n.values())if(jc(a.priority.primary)&&a.priority.primary.compact){let l=a.priority.primary.id,d=n.get(l);if(!d)continue;let u=i.get(l);if(!u){for(let p of i.values())if(p.has(l)){u=p;break}u||(u=new Map,i.set(l,u))}u.set(a.id,a),u.set(d.id,d),a.priority.primary.alignment===0?(d.container.classList.add("compact-left"),a.container.classList.add("compact-right")):(d.container.classList.add("compact-right"),a.container.classList.add("compact-left"))}let o=this.getColor(ua),s=this.getColor(OU);if(this.compactEntriesDisposable.value=new Q,o&&s&&!jO(this.theme.type))for(let[,a]of i)for(let l of a.values())l.hasCommand&&(this.compactEntriesDisposable.value.add(K(l.labelContainer,se.MOUSE_OVER,()=>{a.forEach(d=>d.labelContainer.style.backgroundColor=o),l.labelContainer.style.backgroundColor=s})),this.compactEntriesDisposable.value.add(K(l.labelContainer,se.MOUSE_OUT,()=>{a.forEach(d=>d.labelContainer.style.backgroundColor="")})))}showContextMenu(t){We.stop(t,!0);let n=new zn(Le(this.element),t),i;this.contextMenuService.showContextMenu({getAnchor:()=>n,getActions:()=>(i=this.getContextMenuActions(n),i),onHide:()=>{i&&RP(i)}})}getContextMenuActions(t){let n=[];n.push(ui({id:$c.ID,label:c("hideStatusBar","Hide Status Bar"),run:()=>this.instantiationService.invokeFunction(s=>new $c().run(s))})),n.push(new Yt);let i=new Set;for(let s of this.viewModel.entries)i.has(s.id)||(n.push(new KT(s.id,s.name,this.viewModel)),i.add(s.id));let o;for(let s=t.target;s;s=s.parentElement){let a=this.viewModel.findEntry(s);if(a){o=a;break}}return o&&(n.push(new Yt),n.push(new GT(o.id,o.name,this.viewModel))),n}updateStyles(){super.updateStyles();let t=Rt(this.getContainer()),n=[...this.styleOverrides].sort((d,u)=>d.priority-u.priority)[0],i=this.getColor(n?.background??(this.contextService.getWorkbenchState()!==1?_U:RU))||"";t.style.backgroundColor=i;let o=this.getColor(n?.foreground??(this.contextService.getWorkbenchState()!==1?ca:DU))||"";t.style.color=o;let s=this.getColor(AU),a=this.getColor(n?.border??(this.contextService.getWorkbenchState()!==1?c0:PU))||this.getColor(pe);a?(t.classList.add("status-border-top"),t.style.setProperty("--status-border-top-color",a)):(t.classList.remove("status-border-top"),t.style.removeProperty("--status-border-top-color"));let l=this.getColor(LU);this.styleElement||(this.styleElement=sr(t)),this.styleElement.textContent=`

				/* Status bar focus outline */
				.monaco-workbench .part.statusbar:focus {
					outline-color: ${l};
				}

				/* Status bar item focus outline */
				.monaco-workbench .part.statusbar > .items-container > .statusbar-item a:focus-visible {
					outline: 1px solid ${this.getColor(yt)??s};
					outline-offset: ${a?"-2px":"-1px"};
				}

				/* Notification Beak */
				.monaco-workbench .part.statusbar > .items-container > .statusbar-item.has-beak > .status-bar-item-beak-container:before {
					border-bottom-color: ${i};
				}
			`}layout(t,n,i,o){super.layout(t,n,i,o),super.layoutContents(t,n)}overrideStyle(t){return this.styleOverrides.add(t),this.updateStyles(),ie(()=>{this.styleOverrides.delete(t),this.updateStyles()})}toJSON(){return{type:"workbench.parts.statusbar"}}dispose(){this._onWillDispose.fire(),super.dispose()}};ma=C([v(1,_e),v(2,_n),v(3,Un),v(4,Xe),v(5,ct),v(6,Sn),v(7,Ge)],ma);var jf=class extends ma{constructor(e,t,n,i,o,s,a){super("workbench.parts.statusbar",e,t,n,i,o,s,a)}};jf=C([v(0,_e),v(1,_n),v(2,Un),v(3,Xe),v(4,ct),v(5,Sn),v(6,Ge)],jf);var Yc=class extends ma{constructor(t,n,i,o,s,a,l,d){let u=Yc.COUNTER++;super(`workbench.parts.auxiliaryStatus.${u}`,n,i,o,s,a,l,d);this.container=t}static COUNTER=1;height=ma.HEIGHT};Yc=C([v(1,_e),v(2,_n),v(3,Un),v(4,Xe),v(5,ct),v(6,Sn),v(7,Ge)],Yc);var Yf=class extends pS{constructor(t,n,i){super("workbench.statusBarService",i,n);this.instantiationService=t;this._register(this.registerPart(this.mainPart))}mainPart=this._register(this.instantiationService.createInstance(jf));_onDidCreateAuxiliaryStatusbarPart=this._register(new x);onDidCreateAuxiliaryStatusbarPart=this._onDidCreateAuxiliaryStatusbarPart.event;createAuxiliaryStatusbarPart(t){let n=document.createElement("footer");n.classList.add("part","statusbar"),n.setAttribute("role","status"),n.style.position="relative",n.setAttribute("aria-live","off"),n.setAttribute("tabindex","0"),t.appendChild(n);let i=this.instantiationService.createInstance(Yc,n),o=this.registerPart(i);return i.create(n),N.once(i.onWillDispose)(()=>o.dispose()),this._onDidCreateAuxiliaryStatusbarPart.fire(i),i}createScoped(t,n){return n.add(this.instantiationService.createInstance(Xf,t))}onDidChangeEntryVisibility=this.mainPart.onDidChangeEntryVisibility;addEntry(t,n,i,o=0){return t.showInAllWindows?this.doAddEntryToAllWindows(t,n,i,o):this.mainPart.addEntry(t,n,i,o)}doAddEntryToAllWindows(t,n,i,o=0){let s=new Q,a=new Set;function l(d){let u=new Q;u.add(d.onWillDispose(()=>u.dispose()));let p=u.add(d.addEntry(t,n,i,o));a.add(p),u.add(ie(()=>a.delete(p))),s.add(u),u.add(ie(()=>s.delete(u)))}for(let d of this.parts)l(d);return s.add(this.onDidCreateAuxiliaryStatusbarPart(d=>l(d))),{update:d=>{for(let u of a)u.update(d)},dispose:()=>s.dispose()}}isEntryVisible(t){return this.mainPart.isEntryVisible(t)}updateEntryVisibility(t,n){for(let i of this.parts)i.updateEntryVisibility(t,n)}focus(t){this.activePart.focus(t)}focusNextEntry(){this.activePart.focusNextEntry()}focusPreviousEntry(){this.activePart.focusPreviousEntry()}isEntryFocused(){return this.activePart.isEntryFocused()}overrideStyle(t){let n=new Q;for(let i of this.parts)n.add(i.overrideStyle(t));return n}};Yf=C([v(0,_e),v(1,Xe),v(2,_n)],Yf);var Xf=class extends P{constructor(t,n){super();this.statusbarEntryContainer=t;this.statusbarService=n}createAuxiliaryStatusbarPart(t){return this.statusbarService.createAuxiliaryStatusbarPart(t)}createScoped(t,n){return this.statusbarService.createScoped(t,n)}getPart(){return this.statusbarEntryContainer}onDidChangeEntryVisibility=this.statusbarEntryContainer.onDidChangeEntryVisibility;addEntry(t,n,i,o=0){return this.statusbarEntryContainer.addEntry(t,n,i,o)}isEntryVisible(t){return this.statusbarEntryContainer.isEntryVisible(t)}updateEntryVisibility(t,n){this.statusbarEntryContainer.updateEntryVisibility(t,n)}focus(t){this.statusbarEntryContainer.focus(t)}focusNextEntry(){this.statusbarEntryContainer.focusNextEntry()}focusPreviousEntry(){this.statusbarEntryContainer.focusPreviousEntry()}isEntryFocused(){return this.statusbarEntryContainer.isEntryFocused()}overrideStyle(t){return this.statusbarEntryContainer.overrideStyle(t)}};Xf=C([v(1,Es)],Xf);cn(Es,Yf,0);var Es=A("statusbarService");function jc(r){let e=r;return typeof e?.id=="string"&&typeof e.alignment=="number"}function bV(r){let e=r;return(typeof e?.primary=="number"||jc(e?.primary))&&typeof e?.secondary=="number"}var $T={id:"statusBar.entry.showTooltip",title:""},fV=["standard","warning","error","prominent","remote","offline"];var Eh=class extends P{constructor(t,n,i,o,s,a,l){super();this._extensionService=t;this._editorService=n;this._instantiationService=i;this._nativeHostService=o;this._dialogService=s;this._statusbarService=a;this._productService=l;this._profile=null,this._profileSession=null,this._setState(0),vr.registerCommand("workbench.action.extensionHostProfiler.stop",()=>{this.stopProfiling(),this._editorService.openEditor(ms.instance,{pinned:!0})})}_onDidChangeState=this._register(new x);onDidChangeState=this._onDidChangeState.event;_onDidChangeLastProfile=this._register(new x);onDidChangeLastProfile=this._onDidChangeLastProfile.event;_unresponsiveProfiles=new Vr;_profile;_profileSession;_state=0;profilingStatusBarIndicator;profilingStatusBarIndicatorLabelUpdater=this._register(new Ut);lastProfileSavedTo;get state(){return this._state}get lastProfile(){return this._profile}_setState(t){this._state!==t&&(this._state=t,this._state===2?this.updateProfilingStatusBarIndicator(!0):this._state===3&&this.updateProfilingStatusBarIndicator(!1),this._onDidChangeState.fire(void 0))}updateProfilingStatusBarIndicator(t){if(this.profilingStatusBarIndicatorLabelUpdater.clear(),t){let n={name:c("status.profiler","Extension Profiler"),text:c("profilingExtensionHost","Profiling Extension Host"),showProgress:!0,ariaLabel:c("profilingExtensionHost","Profiling Extension Host"),tooltip:c("selectAndStartDebug","Click to stop profiling."),command:"workbench.action.extensionHostProfiler.stop"},i=Date.now(),o=jF(xe,()=>{this.profilingStatusBarIndicator?.update({...n,text:c("profilingExtensionHostTime","Profiling Extension Host ({0} sec)",Math.round((new Date().getTime()-i)/1e3))})},1e3);this.profilingStatusBarIndicatorLabelUpdater.value=o,this.profilingStatusBarIndicator?this.profilingStatusBarIndicator.update(n):this.profilingStatusBarIndicator=this._statusbarService.addEntry(n,"status.profiler",1)}else this.profilingStatusBarIndicator&&(this.profilingStatusBarIndicator.dispose(),this.profilingStatusBarIndicator=void 0)}async startProfiling(){if(this._state!==0)return null;let t=await this._extensionService.getInspectPorts(1,!0);return t.length===0?this._dialogService.confirm({type:"info",message:c("restart1","Profile Extensions"),detail:c("restart2","In order to profile extensions a restart is required. Do you want to restart '{0}' now?",this._productService.nameLong),primaryButton:c({key:"restart3",comment:["&& denotes a mnemonic"]},"&&Restart")}).then(n=>{n.confirmed&&this._nativeHostService.relaunch({addArgs:[`--inspect-extensions=${yS()}`]})}):(t.length>1&&console.warn("There are multiple extension hosts available for profiling. Picking the first one..."),this._setState(1),this._instantiationService.createInstance(bd,t[0].host,t[0].port).start().then(n=>{this._profileSession=n,this._setState(2)},n=>{Ze(n),this._setState(0)}))}stopProfiling(){this._state!==2||!this._profileSession||(this._setState(3),this._profileSession.stop().then(t=>{this._setLastProfile(t),this._setState(0)},t=>{Ze(t),this._setState(0)}),this._profileSession=null)}_setLastProfile(t){this._profile=t,this.lastProfileSavedTo=void 0,this._onDidChangeLastProfile.fire(void 0)}getUnresponsiveProfile(t){return this._unresponsiveProfiles.get(t)}setUnresponsiveProfile(t,n){this._unresponsiveProfiles.set(t,n),this._setLastProfile(n)}};Eh=C([v(0,Kn),v(1,Rn),v(2,_e),v(3,ad),v(4,Gi),v(5,Es),v(6,gi)],Eh);var jT=class extends je{constructor(){super({id:"workbench.extensions.action.openExtensionsFolder",title:ye("openExtensionsFolder","Open Extensions Folder"),category:d2,f1:!0})}async run(e){let t=e.get(ad),n=e.get(dt),i=e.get(Uc),o=W.file(i.extensionsPath),s=await n.resolve(o),a;if(s.children&&s.children.length>0?a=s.children[0].resource:a=o,a.scheme===le.file)return t.showItemInFolder(a.fsPath)}},YT=class extends je{constructor(){super({id:"_workbench.extensions.action.cleanUpExtensionsFolder",title:ye("cleanUpExtensionsFolder","Cleanup Extensions Folder"),category:ut.Developer,f1:!0})}async run(e){return e.get(mo).cleanUp()}};function vV(r,e){let t=globalThis.MonacoEnvironment;if(t?.createTrustedTypesPolicy)try{return t.createTrustedTypesPolicy(r,e)}catch(n){Ze(n);return}try{return globalThis.trustedTypes?.createPolicy(r,e)}catch(n){Ze(n);return}}var yV="default",t6="$initialize",IV=!1;function SV(r){_t&&(IV||(IV=!0,console.warn("Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq")),console.warn(r.message))}var cL=class{constructor(e,t,n,i,o){this.vsWorker=e;this.req=t;this.channel=n;this.method=i;this.args=o}type=0},XT=class{constructor(e,t,n,i){this.vsWorker=e;this.seq=t;this.res=n;this.err=i}type=1},uL=class{constructor(e,t,n,i,o){this.vsWorker=e;this.req=t;this.channel=n;this.eventName=i;this.arg=o}type=2},pL=class{constructor(e,t,n){this.vsWorker=e;this.req=t;this.event=n}type=3},hL=class{constructor(e,t){this.vsWorker=e;this.req=t}type=4},mL=class{_workerId;_lastSentReq;_pendingReplies;_pendingEmitters;_pendingEvents;_handler;constructor(e){this._workerId=-1,this._handler=e,this._lastSentReq=0,this._pendingReplies=Object.create(null),this._pendingEmitters=new Map,this._pendingEvents=new Map}setWorkerId(e){this._workerId=e}sendMessage(e,t,n){let i=String(++this._lastSentReq);return new Promise((o,s)=>{this._pendingReplies[i]={resolve:o,reject:s},this._send(new cL(this._workerId,i,e,t,n))})}listen(e,t,n){let i=null,o=new x({onWillAddFirstListener:()=>{i=String(++this._lastSentReq),this._pendingEmitters.set(i,o),this._send(new uL(this._workerId,i,e,t,n))},onDidRemoveLastListener:()=>{this._pendingEmitters.delete(i),this._send(new hL(this._workerId,i)),i=null}});return o.event}handleMessage(e){!e||!e.vsWorker||this._workerId!==-1&&e.vsWorker!==this._workerId||this._handleMessage(e)}createProxyToRemoteChannel(e,t){let n={get:(i,o)=>(typeof o=="string"&&!i[o]&&(TV(o)?i[o]=s=>this.listen(e,o,s):xV(o)?i[o]=this.listen(e,o,void 0):o.charCodeAt(0)===36&&(i[o]=async(...s)=>(await t?.(),this.sendMessage(e,o,s)))),i[o])};return new Proxy(Object.create(null),n)}_handleMessage(e){switch(e.type){case 1:return this._handleReplyMessage(e);case 0:return this._handleRequestMessage(e);case 2:return this._handleSubscribeEventMessage(e);case 3:return this._handleEventMessage(e);case 4:return this._handleUnsubscribeEventMessage(e)}}_handleReplyMessage(e){if(!this._pendingReplies[e.seq]){console.warn("Got reply to unknown seq");return}let t=this._pendingReplies[e.seq];if(delete this._pendingReplies[e.seq],e.err){let n=e.err;e.err.$isError&&(n=new Error,n.name=e.err.name,n.message=e.err.message,n.stack=e.err.stack),t.reject(n);return}t.resolve(e.res)}_handleRequestMessage(e){let t=e.req;this._handler.handleMessage(e.channel,e.method,e.args).then(i=>{this._send(new XT(this._workerId,t,i,void 0))},i=>{i.detail instanceof Error&&(i.detail=xE(i.detail)),this._send(new XT(this._workerId,t,void 0,xE(i)))})}_handleSubscribeEventMessage(e){let t=e.req,n=this._handler.handleEvent(e.channel,e.eventName,e.arg)(i=>{this._send(new pL(this._workerId,t,i))});this._pendingEvents.set(t,n)}_handleEventMessage(e){if(!this._pendingEmitters.has(e.req)){console.warn("Got event for unknown req");return}this._pendingEmitters.get(e.req).fire(e.event)}_handleUnsubscribeEventMessage(e){if(!this._pendingEvents.has(e.req)){console.warn("Got unsubscribe for unknown req");return}this._pendingEvents.get(e.req).dispose(),this._pendingEvents.delete(e.req)}_send(e){let t=[];if(e.type===0)for(let n=0;n<e.args.length;n++)e.args[n]instanceof ArrayBuffer&&t.push(e.args[n]);else e.type===1&&e.res instanceof ArrayBuffer&&t.push(e.res);this._handler.sendMessage(e,t)}},QT=class extends P{_worker;_onModuleLoaded;_protocol;proxy;_localChannels=new Map;_remoteChannels=new Map;constructor(e,t){super(),this._worker=this._register(e.create({amdModuleId:"vs/base/common/worker/simpleWorker",esmModuleLocation:t.esmModuleLocation,label:t.label},o=>{this._protocol.handleMessage(o)},o=>{Ze(o)})),this._protocol=new mL({sendMessage:(o,s)=>{this._worker.postMessage(o,s)},handleMessage:(o,s,a)=>this._handleMessage(o,s,a),handleEvent:(o,s,a)=>this._handleEvent(o,s,a)}),this._protocol.setWorkerId(this._worker.getId());let n=null,i=globalThis.require;typeof i<"u"&&typeof i.getConfig=="function"?n=i.getConfig():typeof globalThis.requirejs<"u"&&(n=globalThis.requirejs.s.contexts._.config),this._onModuleLoaded=this._protocol.sendMessage(yV,t6,[this._worker.getId(),JSON.parse(JSON.stringify(n)),t.amdModuleId]),this.proxy=this._protocol.createProxyToRemoteChannel(yV,async()=>{await this._onModuleLoaded}),this._onModuleLoaded.catch(o=>{this._onError("Worker failed to load "+t.amdModuleId,o)})}_handleMessage(e,t,n){let i=this._localChannels.get(e);if(!i)return Promise.reject(new Error(`Missing channel ${e} on main thread`));if(typeof i[t]!="function")return Promise.reject(new Error(`Missing method ${t} on main thread channel ${e}`));try{return Promise.resolve(i[t].apply(i,n))}catch(o){return Promise.reject(o)}}_handleEvent(e,t,n){let i=this._localChannels.get(e);if(!i)throw new Error(`Missing channel ${e} on main thread`);if(TV(t)){let o=i[t].call(i,n);if(typeof o!="function")throw new Error(`Missing dynamic event ${t} on main thread channel ${e}.`);return o}if(xV(t)){let o=i[t];if(typeof o!="function")throw new Error(`Missing event ${t} on main thread channel ${e}.`);return o}throw new Error(`Malformed event name ${t}`)}setChannel(e,t){this._localChannels.set(e,t)}getChannel(e){if(!this._remoteChannels.has(e)){let t=this._protocol.createProxyToRemoteChannel(e,async()=>{await this._onModuleLoaded});this._remoteChannels.set(e,t)}return this._remoteChannels.get(e)}_onError(e,t){console.error(e),console.info(t)}};function xV(r){return r[0]==="o"&&r[1]==="n"&&mu(r.charCodeAt(2))}function TV(r){return/^onDynamic/.test(r)&&mu(r.charCodeAt(9))}var Xc=!0,Ed;typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope"&&globalThis.workerttPolicy!==void 0?Ed=globalThis.workerttPolicy:Ed=vV("defaultWorkerFactory",{createScriptURL:r=>r});function EV(r,e){if(!r.startsWith("blob:"))throw new URIError("Not a blob-url: "+r);return new Worker(Ed?Ed.createScriptURL(r):r,{...e,type:Xc?"module":void 0})}function n6(r,e){let t=globalThis.MonacoEnvironment;if(t){if(typeof t.getWorker=="function")return t.getWorker("workerMain.js",e);if(typeof t.getWorkerUrl=="function"){let n=t.getWorkerUrl("workerMain.js",e);return new Worker(Ed?Ed.createScriptURL(n):n,{name:e,type:Xc?"module":void 0})}}if(r){let n=i6(e,r.toString(!0)),i=new Worker(Ed?Ed.createScriptURL(n):n,{name:e,type:Xc?"module":void 0});return Xc?r6(i):i}throw new Error("You must define a function MonacoEnvironment.getWorkerUrl or MonacoEnvironment.getWorker")}function i6(r,e,t){if(!(/^((http:)|(https:)|(file:))/.test(e)&&e.substring(0,globalThis.origin.length)!==globalThis.origin)){let i=e.lastIndexOf("?"),o=e.lastIndexOf("#",i),s=i>0?new URLSearchParams(e.substring(i+1,~o?o:void 0)):new URLSearchParams;Sw.addSearchParam(s,!0,!0),s.toString()?e=`${e}?${s.toString()}#${r}`:e=`${e}#${r}`}let n=new Blob([vn([`/*${r}*/`,t?`globalThis.MonacoEnvironment = { baseUrl: '${t}' };`:void 0,`globalThis._VSCODE_NLS_MESSAGES = ${JSON.stringify(Hh())};`,`globalThis._VSCODE_NLS_LANGUAGE = ${JSON.stringify(Ad())};`,`globalThis._VSCODE_FILE_ROOT = '${globalThis._VSCODE_FILE_ROOT}';`,"const ttPolicy = globalThis.trustedTypes?.createPolicy('defaultWorkerFactory', { createScriptURL: value => value });","globalThis.workerttPolicy = ttPolicy;",Xc?`await import(ttPolicy?.createScriptURL('${e}') ?? '${e}');`:`importScripts(ttPolicy?.createScriptURL('${e}') ?? '${e}');`,Xc?"globalThis.postMessage({ type: 'vscode-worker-ready' });":void 0,`/*${r}*/`]).join("")],{type:"application/javascript"});return URL.createObjectURL(n)}function r6(r){return new Promise((e,t)=>{r.onmessage=function(n){n.data.type==="vscode-worker-ready"&&(r.onmessage=null,e(r))},r.onerror=t})}function o6(r){return typeof r.then=="function"}var gL=class extends P{id;label;worker;constructor(e,t,n,i,o,s){super(),this.id=n,this.label=i;let a=n6(e,i);o6(a)?this.worker=a:this.worker=Promise.resolve(a),this.postMessage(t,[]),this.worker.then(l=>{l.onmessage=function(d){o(d.data)},l.onmessageerror=s,typeof l.addEventListener=="function"&&l.addEventListener("error",s)}),this._register(ie(()=>{this.worker?.then(l=>{l.onmessage=null,l.onmessageerror=null,l.removeEventListener("error",s),l.terminate()}),this.worker=null}))}getId(){return this.id}postMessage(e,t){this.worker?.then(n=>{try{n.postMessage(e,t)}catch(i){Ze(i),Ze(new Error(`FAILED to post message to '${this.label}'-worker`,{cause:i}))}})}},fL=class{constructor(e,t){this.amdModuleId=e;this.label=t;this.esmModuleLocation=Xc?yr.asBrowserUri(`${e}.esm.js`):void 0}esmModuleLocation},bL=class r{static LAST_WORKER_ID=0;_webWorkerFailedBeforeError;constructor(){this._webWorkerFailedBeforeError=!1}create(e,t,n){let i=++r.LAST_WORKER_ID;if(this._webWorkerFailedBeforeError)throw this._webWorkerFailedBeforeError;return new gL(e.esmModuleLocation,e.amdModuleId,i,e.label||"anonymous"+i,t,o=>{SV(o),this._webWorkerFailedBeforeError=o,n(o)})}};function wV(r,e){let t=typeof r=="string"?new fL(r,e):r;return new QT(new bL,t)}function CV(r,e,t,n){let{sample:i,perfBaseline:o,source:s}=r;e.publicLog2("unresponsive.sample",{perfBaseline:o,selfTime:i.selfTime,totalTime:i.totalTime,percentage:i.percentage,functionName:i.location,callers:i.caller.map(l=>l.location).join("<"),callersAnnotated:i.caller.map(l=>`${l.percentage}|${l.location}`).join("<"),source:s});let a=new vL(r);n?db.onUnexpectedError(a):t.error(a)}var vL=class extends Error{selfTime;constructor(e){super(`PerfSampleError: by ${e.source} in ${e.sample.location}`),this.name="PerfSampleError",this.selfTime=e.sample.selfTime;let t=[e.sample.absLocation,...e.sample.caller.map(n=>n.absLocation)];this.stack=`
	 at ${t.join(`
	 at `)}`}};var yL=A("IProfileAnalysisWorkerService"),Qf=class{constructor(e,t){this._telemetryService=e;this._logService=t}async _withWorker(e){let t=wV("vs/platform/profiling/electron-sandbox/profileAnalysisWorker","CpuProfileAnalysisWorker");try{return await e(t.proxy)}finally{t.dispose()}}async analyseBottomUp(e,t,n,i){return this._withWorker(async o=>{let s=await o.$analyseBottomUp(e);if(s.kind===2)for(let a of s.samples)CV({sample:a,perfBaseline:n,source:t(a.url)},this._telemetryService,this._logService,i);return s.kind})}async analyseByLocation(e,t){return this._withWorker(async n=>await n.$analyseByUrlCategory(e,t))}};Qf=C([v(0,Ot),v(1,Et)],Qf);cn(yL,Qf,1);var kV=A("updateService");var DV=A("timerService"),IL=class{_entries=[];setMarks(e,t){this._entries.push([e,t])}getDuration(e,t){let n=this._findEntry(e);if(!n)return 0;let i=this._findEntry(t);return i?i.startTime-n.startTime:0}getStartTime(e){let t=this._findEntry(e);return t?t.startTime:-1}_findEntry(e){for(let[,t]of this._entries)for(let n=t.length-1;n>=0;n--)if(t[n].name===e)return t[n]}getEntries(){return this._entries.slice(0)}},JT=class{constructor(e,t,n,i,o,s,a,l,d){this._lifecycleService=e;this._contextService=t;this._extensionService=n;this._updateService=i;this._paneCompositeService=o;this._editorService=s;this._accessibilityService=a;this._telemetryService=l;Promise.all([this._extensionService.whenInstalledExtensionsRegistered(),e.when(3),d.whenRestored,Promise.all(Array.from(Ce.as(O1.Backend).backends.values()).map(u=>u.whenReady))]).then(()=>(this.setPerformanceMarks("renderer",aF()),this._computeStartupMetrics())).then(u=>{this._startupMetrics=u,this._reportStartupTimes(u),this._barrier.open()}),this.perfBaseline=this._barrier.wait().then(()=>this._lifecycleService.when(4)).then(()=>Cn(this._startupMetrics.timers.ellapsedRequire)).then(()=>{let u=function(){let f=!1;function g(E){return f?0:(performance.now()-y>=1e3&&(f=!0),E<=2?E:g(E-1)+g(E-2))}let y=performance.now();g(24);let T=Math.round(performance.now()-y);self.postMessage({value:f?-1:T})}.toString(),p=new Blob([`(${u})();`],{type:"application/javascript"}),h=URL.createObjectURL(p),m=EV(h,{name:"perfBaseline"});return new Promise(f=>{m.onmessage=g=>f(g.data.value)}).finally(()=>{m.terminate(),URL.revokeObjectURL(h)})})}_barrier=new wl;_marks=new IL;_rndValueShouldSendTelemetry=Math.random()<.05;_startupMetrics;perfBaseline;whenReady(){return this._barrier.wait()}get startupMetrics(){if(!this._startupMetrics)throw new Error("illegal state, MUST NOT access startupMetrics before whenReady has resolved");return this._startupMetrics}setPerformanceMarks(e,t){let n=t.filter(i=>i.name.startsWith("code/"));this._marks.setMarks(e,n),this._reportPerformanceMarks(e,n)}getPerformanceMarks(){return this._marks.getEntries()}getDuration(e,t){return this._marks.getDuration(e,t)}getStartTime(e){return this._marks.getStartTime(e)}_reportStartupTimes(e){this._telemetryService.publicLog("startupTimeVaried",e)}_shouldReportPerfMarks(){return this._rndValueShouldSendTelemetry}_reportPerformanceMarks(e,t){if(this._shouldReportPerfMarks())for(let n of t)this._telemetryService.publicLog2("startup.timer.mark",{source:e,name:new lf(n.name),startTime:n.startTime})}async _computeStartupMetrics(){let e=this._isInitialStartup(),t;_t?t="code/timeOrigin":t=e?"code/didStartMain":"code/willOpenNewWindow";let n=this._paneCompositeService.getActivePaneComposite(0),i=this._paneCompositeService.getActivePaneComposite(1),o={version:2,ellapsed:this._marks.getDuration(t,"code/didStartWorkbench"),isLatestVersion:!!await this._updateService.isLatestVersion(),didUseCachedData:this._didUseCachedData(),windowKind:this._lifecycleService.startupKind,windowCount:await this._getWindowCount(),viewletId:n?.getId(),editorIds:this._editorService.visibleEditors.map(s=>s.typeId),panelId:i?i.getId():void 0,timers:{ellapsedAppReady:e?this._marks.getDuration("code/didStartMain","code/mainAppReady"):void 0,ellapsedNlsGeneration:e?this._marks.getDuration("code/willGenerateNls","code/didGenerateNls"):void 0,ellapsedLoadMainBundle:e?this._marks.getDuration("code/willLoadMainBundle","code/didLoadMainBundle"):void 0,ellapsedCrashReporter:e?this._marks.getDuration("code/willStartCrashReporter","code/didStartCrashReporter"):void 0,ellapsedMainServer:e?this._marks.getDuration("code/willStartMainServer","code/didStartMainServer"):void 0,ellapsedWindowCreate:e?this._marks.getDuration("code/willCreateCodeWindow","code/didCreateCodeWindow"):void 0,ellapsedWindowRestoreState:e?this._marks.getDuration("code/willRestoreCodeWindowState","code/didRestoreCodeWindowState"):void 0,ellapsedBrowserWindowCreate:e?this._marks.getDuration("code/willCreateCodeBrowserWindow","code/didCreateCodeBrowserWindow"):void 0,ellapsedWindowMaximize:e?this._marks.getDuration("code/willMaximizeCodeWindow","code/didMaximizeCodeWindow"):void 0,ellapsedWindowLoad:e?this._marks.getDuration("code/mainAppReady","code/willOpenNewWindow"):void 0,ellapsedWindowLoadToRequire:this._marks.getDuration("code/willOpenNewWindow","code/willLoadWorkbenchMain"),ellapsedRequire:this._marks.getDuration("code/willLoadWorkbenchMain","code/didLoadWorkbenchMain"),ellapsedWaitForWindowConfig:this._marks.getDuration("code/willWaitForWindowConfig","code/didWaitForWindowConfig"),ellapsedStorageInit:this._marks.getDuration("code/willInitStorage","code/didInitStorage"),ellapsedSharedProcesConnected:this._marks.getDuration("code/willConnectSharedProcess","code/didConnectSharedProcess"),ellapsedWorkspaceServiceInit:this._marks.getDuration("code/willInitWorkspaceService","code/didInitWorkspaceService"),ellapsedRequiredUserDataInit:this._marks.getDuration("code/willInitRequiredUserData","code/didInitRequiredUserData"),ellapsedOtherUserDataInit:this._marks.getDuration("code/willInitOtherUserData","code/didInitOtherUserData"),ellapsedExtensions:this._marks.getDuration("code/willLoadExtensions","code/didLoadExtensions"),ellapsedEditorRestore:this._marks.getDuration("code/willRestoreEditors","code/didRestoreEditors"),ellapsedViewletRestore:this._marks.getDuration("code/willRestoreViewlet","code/didRestoreViewlet"),ellapsedPanelRestore:this._marks.getDuration("code/willRestorePanel","code/didRestorePanel"),ellapsedWorkbenchContributions:this._marks.getDuration("code/willCreateWorkbenchContributions/1","code/didCreateWorkbenchContributions/2"),ellapsedWorkbench:this._marks.getDuration("code/willStartWorkbench","code/didStartWorkbench"),ellapsedExtensionsReady:this._marks.getDuration(t,"code/didLoadExtensions"),ellapsedRenderer:this._marks.getDuration("code/didStartRenderer","code/didStartWorkbench")},platform:void 0,release:void 0,arch:void 0,totalmem:void 0,freemem:void 0,meminfo:void 0,cpus:void 0,loadavg:void 0,isVMLikelyhood:void 0,initialStartup:e,hasAccessibilitySupport:this._accessibilityService.isScreenReaderOptimized(),emptyWorkbench:this._contextService.getWorkbenchState()===1};return await this._extendStartupInfo(o),o}};JT=C([v(0,Oo),v(1,Un),v(2,Kn),v(3,kV),v(4,ha),v(5,Rn),v(6,Ps),v(7,Ot),v(8,ct)],JT);var wh=class{constructor(e,t,n,i,o,s,a,l,d,u,p,h){this._extensionService=e;this._extensionProfileService=t;this._telemetryService=n;this._logService=i;this._notificationService=o;this._editorService=s;this._instantiationService=a;this._environmentServie=l;this._profileAnalysisService=d;this._configService=u;this._fileService=p;h.perfBaseline.then(m=>{m<0||(this._perfBaseline=m,this._unresponsiveListener=e.onDidChangeResponsiveChange(this._onDidChangeResponsiveChange,this))})}_blame=new Zd;_session;_unresponsiveListener;_perfBaseline=-1;dispose(){this._unresponsiveListener?.dispose(),this._session?.dispose(!0)}async _onDidChangeResponsiveChange(e){if(e.extensionHostKind!==1)return;let t=await e.getInspectListener(!0);if(t){if(e.isResponsive&&this._session)this._session.cancel(),this._logService.info("UNRESPONSIVE extension host: received responsive event and cancelling profiling session");else if(!e.isResponsive&&!this._session){let n=new xi;this._session=n;let i;try{i=await this._instantiationService.createInstance(bd,t.host,t.port).start()}catch{this._session=void 0;return}this._logService.info("UNRESPONSIVE extension host: starting to profile NOW");try{await Cn(5e3,n.token)}catch{}try{this._processCpuProfile(await i.stop())}catch(o){Ze(o)}finally{this._session=void 0}}}}async _processCpuProfile(e){if(await this._extensionService.whenInstalledExtensionsRegistered(),this._configService.getValue("application.experimental.rendererProfiling")){let h=Pl.forUris();h.fill(this._extensionService.extensions.map(m=>[m.extensionLocation,m])),await this._profileAnalysisService.analyseBottomUp(e.data,m=>h.findSubstr(W.parse(m))?.identifier.value??"<<not-found>>",this._perfBaseline,!1)}let t=this._extensionService.extensions.filter(h=>h.extensionLocation.scheme===le.file).map(h=>[h.extensionLocation,Dn.toKey(h.identifier)]),n=await this._profileAnalysisService.analyseByLocation(e.data,t),i=0,o="",s=-1;for(let[h,m]of n)i+=m,m>s&&(s=m,o=h);let a=s/(i/100),l=await this._extensionService.getExtension(o);if(!l)return;let d=In(),u=Be(this._environmentServie.tmpDir,`exthost-${Math.random().toString(16).slice(2,8)}.cpuprofile`);if(await this._fileService.writeFile(u,et.fromString(JSON.stringify(e.data))),this._logService.warn(`UNRESPONSIVE extension host: '${o}' took ${a}% of ${s/1e3}ms, saved PROFILE here: '${u}'`),this._telemetryService.publicLog2("exthostunresponsive",{sessionId:d,duration:i,data:n.map(h=>h[0]).flat(),id:Dn.toKey(l.identifier)}),this._extensionProfileService.setUnresponsiveProfile(l.identifier,e),!(a>=95&&s>=5e6))return;let p=await this._instantiationService.invokeFunction(o0,l,e);p&&(this._blame.has(l.identifier)||this._blame.size>=3||(this._blame.add(l.identifier),this._notificationService.prompt(Ip.Warning,c("unresponsive-exthost","The extension '{0}' took a very long time to complete its last operation and it has prevented other extensions from running.",l.displayName||l.name),[{label:c("show","Show Extensions"),run:()=>this._editorService.openEditor(ms.instance,{pinned:!0})},p],{priority:1})))}};wh=C([v(0,Kn),v(1,nl),v(2,Ot),v(3,Et),v(4,wr),v(5,Rn),v(6,_e),v(7,Uc),v(8,yL),v(9,ke),v(10,dt),v(11,DV)],wh);var Ch=class extends P{_onDidChangeEnablement=new x;onDidChangeEnablement=this._onDidChangeEnablement.event;storageManager;constructor(e,t){super(),this.storageManager=this._register(new SL(e)),this._register(this.storageManager.onDidChange(n=>this._onDidChangeEnablement.fire({extensions:n,source:"storage"}))),this._register(t.onDidInstallExtensions(n=>n.forEach(({local:i,operation:o})=>{i&&o===4&&this._removeFromDisabledExtensions(i.identifier)})))}async enableExtension(e,t){return this._removeFromDisabledExtensions(e)?(this._onDidChangeEnablement.fire({extensions:[e],source:t}),!0):!1}async disableExtension(e,t){return this._addToDisabledExtensions(e)?(this._onDidChangeEnablement.fire({extensions:[e],source:t}),!0):!1}getDisabledExtensions(){return this._getExtensions(af)}async getDisabledExtensionsAsync(){return this.getDisabledExtensions()}_addToDisabledExtensions(e){let t=this.getDisabledExtensions();return t.every(n=>!Hn(n,e))?(t.push(e),this._setDisabledExtensions(t),!0):!1}_removeFromDisabledExtensions(e){let t=this.getDisabledExtensions();for(let n=0;n<t.length;n++){let i=t[n];if(Hn(i,e))return t.splice(n,1),this._setDisabledExtensions(t),!0}return!1}_setDisabledExtensions(e){this._setExtensions(af,e)}_getExtensions(e){return this.storageManager.get(e,0)}_setExtensions(e,t){this.storageManager.set(e,t,0)}};Ch=C([v(0,Xe),v(1,mo)],Ch);var SL=class extends P{constructor(t){super();this.storageService=t;this._register(t.onDidChangeValue(0,void 0,this._register(new Q))(n=>this.onDidStorageChange(n)))}storage=Object.create(null);_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;get(t,n){let i;return n===0?(zt(this.storage[t])&&(this.storage[t]=this._get(t,n)),i=this.storage[t]):i=this._get(t,n),JSON.parse(i)}set(t,n,i){let o=JSON.stringify(n.map(({id:a,uuid:l})=>({id:a,uuid:l})));this._get(t,i)!==o&&(i===0&&(n.length?this.storage[t]=o:delete this.storage[t]),this._set(t,n.length?o:void 0,i))}onDidStorageChange(t){if(!zt(this.storage[t.key])&&this._get(t.key,t.scope)!==this.storage[t.key]){let i=this.get(t.key,t.scope);delete this.storage[t.key];let o=this.get(t.key,t.scope),s=i.filter(l=>!o.some(d=>Hn(l,d))),a=o.filter(l=>!i.some(d=>Hn(d,l)));(s.length||a.length)&&this._onDidChange.fire([...s,...a])}}_get(t,n){return this.storageService.get(t,n,"[]")}_set(t,n,i){n?this.storageService.store(t,n,i,1):this.storageService.remove(t,i)}};var _V=A("IExtensionStorageService"),s6=/^extensionKeys\/([^.]+\..+)@(\d+\.\d+\.\d+(-.*)?)$/,Pr=class extends P{constructor(t,n,i){super();this.storageService=t;this.productService=n;this.logService=i;this.extensionsWithKeysForSync=Pr.readAllExtensionsWithKeysForSync(t),this._register(this.storageService.onDidChangeValue(0,void 0,this._register(new Q))(o=>this.onDidChangeStorageValue(o)))}_serviceBrand;static LARGE_STATE_WARNING_THRESHOLD=512*1024;static toKey(t){return`extensionKeys/${f1(t.id)}@${t.version}`}static fromKey(t){let n=s6.exec(t);if(n&&n[1])return{id:n[1],version:n[2]}}static async removeOutdatedExtensionVersions(t,n){let i=await t.getInstalled(),o=[];for(let[s,a]of Pr.readAllExtensionsWithKeysForSync(n)){let l=i.find(d=>Hn(d.identifier,{id:s}))?.manifest.version;for(let d of a)l!==d&&o.push(Pr.toKey({id:s,version:d}))}for(let s of o)n.remove(s,0)}static readAllExtensionsWithKeysForSync(t){let n=new Map,i=t.keys(0,1);for(let o of i){let s=Pr.fromKey(o);if(s){let a=n.get(s.id.toLowerCase());a||n.set(s.id.toLowerCase(),a=[]),a.push(s.version)}}return n}_onDidChangeExtensionStorageToSync=this._register(new x);onDidChangeExtensionStorageToSync=this._onDidChangeExtensionStorageToSync.event;extensionsWithKeysForSync;onDidChangeStorageValue(t){if(this.extensionsWithKeysForSync.has(t.key.toLowerCase())){this._onDidChangeExtensionStorageToSync.fire();return}let n=Pr.fromKey(t.key);if(n){if(this.storageService.get(t.key,0)===void 0)this.extensionsWithKeysForSync.delete(n.id.toLowerCase());else{let i=this.extensionsWithKeysForSync.get(n.id.toLowerCase());i||this.extensionsWithKeysForSync.set(n.id.toLowerCase(),i=[]),i.push(n.version),this._onDidChangeExtensionStorageToSync.fire()}return}}getExtensionId(t){if(lt(t))return t;let n=t.manifest?t.manifest.publisher:t.publisher,i=t.manifest?t.manifest.name:t.name;return _S(n,i)}getExtensionState(t,n){let i=this.getExtensionId(t),o=this.getExtensionStateRaw(t,n);if(o)try{return JSON.parse(o)}catch(s){this.logService.error(`[mainThreadStorage] unexpected error parsing storage contents (extensionId: ${i}, global: ${n}): ${s}`)}}getExtensionStateRaw(t,n){let i=this.getExtensionId(t),o=this.storageService.get(i,n?0:1);return o&&o?.length>Pr.LARGE_STATE_WARNING_THRESHOLD&&this.logService.warn(`[mainThreadStorage] large extension state detected (extensionId: ${i}, global: ${n}): ${o.length/1024}kb. Consider to use 'storageUri' or 'globalStorageUri' to store this data on disk instead.`),o}setExtensionState(t,n,i){let o=this.getExtensionId(t);n===void 0?this.storageService.remove(o,i?0:1):this.storageService.store(o,JSON.stringify(n),i?0:1,1)}setKeysForSync(t,n){this.storageService.store(Pr.toKey(t),JSON.stringify(n),0,1)}getKeysForSync(t){let n=this.productService.extensionSyncedKeys?.[t.id.toLowerCase()],i=this.storageService.get(Pr.toKey(t),0),o=i?JSON.parse(i):void 0;return o&&n?di([...o,...n]):o||n}addToMigrationList(t,n){if(t!==n){let i=this.migrationList.filter(o=>!o.includes(t)&&!o.includes(n));i.push([t,n]),this.migrationList=i}}getSourceExtensionToMigrate(t){let n=this.migrationList.find(([,i])=>t===i);return n?n[0]:void 0}get migrationList(){let t=this.storageService.get("extensionStorage.migrationList",-1,"[]");try{let n=JSON.parse(t);if(Array.isArray(n))return n}catch{}return[]}set migrationList(t){t.length?this.storageService.store("extensionStorage.migrationList",JSON.stringify(t),-1,1):this.storageService.remove("extensionStorage.migrationList",-1)}};Pr=C([v(0,Xe),v(1,gi),v(2,Et)],Pr);async function kh(r,e,t){let n=t&&t.get("storage.serviceMachineId",-1)||null;if(n)return n;try{let o=(await e.readFile(r.serviceMachineIdResource)).value.toString();n=ZA(o)?o:null}catch{n=null}if(!n){n=In();try{await e.writeFile(r.serviceMachineIdResource,et.fromString(n))}catch{}}return t?.store("storage.serviceMachineId",n,-1,1),n}var Hin=A("IUserDataSyncMachinesService"),RV="sync.currentMachineName",a6="Safari",l6="Chrome",d6="Edge",c6="Firefox",u6="Android";function LV(){return _b?a6:jh?l6:Rb?d6:cu?c6:xP?u6:zE(_t?0:kb)}var ga=class extends P{constructor(t,n,i,o,s,a){super();this.storageService=i;this.userDataSyncStoreService=o;this.logService=s;this.productService=a;this.currentMachineIdPromise=kh(t,n,i)}static VERSION=1;static RESOURCE="machines";_serviceBrand;_onDidChange=this._register(new x);onDidChange=this._onDidChange.event;currentMachineIdPromise;userData=null;async getMachines(t){let n=await this.currentMachineIdPromise;return(await this.readMachinesData(t)).machines.map(o=>({...o,isCurrent:o.id===n}))}async addCurrentMachine(t){let n=await this.currentMachineIdPromise,i=await this.readMachinesData(t);i.machines.some(({id:o})=>o===n)||(i.machines.push({id:n,name:this.computeCurrentMachineName(i.machines),platform:LV()}),await this.writeMachinesData(i))}async removeCurrentMachine(t){let n=await this.currentMachineIdPromise,i=await this.readMachinesData(t),o=i.machines.filter(({id:s})=>s!==n);o.length!==i.machines.length&&(i.machines=o,await this.writeMachinesData(i))}async renameMachine(t,n,i){let o=await this.readMachinesData(i),s=o.machines.find(({id:a})=>a===t);if(s){s.name=n,await this.writeMachinesData(o);let a=await this.currentMachineIdPromise;t===a&&this.storageService.store(RV,n,-1,1)}}async setEnablements(t){let n=await this.readMachinesData();for(let[i,o]of t){let s=n.machines.find(a=>a.id===i);s&&(s.disabled=o?void 0:!0)}await this.writeMachinesData(n)}computeCurrentMachineName(t){let n=this.storageService.get(RV,-1);if(n)return n;let i=`${this.productService.embedderIdentifier?`${this.productService.embedderIdentifier} - `:""}${LV()} (${this.productService.nameShort})`,o=new RegExp(`${Ni(i)}\\s#(\\d+)`),s=0;for(let a of t){let l=o.exec(a.name),d=l?parseInt(l[1]):0;s=d>s?d:s}return`${i} #${s+1}`}async readMachinesData(t){this.userData=await this.readUserData(t);let n=this.parse(this.userData);if(n.version!==ga.VERSION)throw new Error(c("error incompatible","Cannot read machines data as the current version is incompatible. Please update {0} and try again.",this.productService.nameLong));return n}async writeMachinesData(t){let n=JSON.stringify(t),i=await this.userDataSyncStoreService.writeResource(ga.RESOURCE,n,this.userData?.ref||null);this.userData={ref:i,content:n},this._onDidChange.fire()}async readUserData(t){if(this.userData){let n=t&&t.latest?t.latest[ga.RESOURCE]:void 0;if(this.userData.ref===n)return this.userData;if(n===void 0&&this.userData.content===null)return this.userData}return this.userDataSyncStoreService.readResource(ga.RESOURCE,this.userData)}parse(t){if(t.content!==null)try{return JSON.parse(t.content)}catch(n){this.logService.error(n)}return{version:ga.VERSION,machines:[]}}};ga=C([v(0,Qt),v(1,dt),v(2,Xe),v(3,wd),v(4,Fo),v(5,gi)],ga);var PV="settingsSync";function xL(r,...e){return r?[r,...e]:e}function TL(r,e,t,n){return n.joinPath(t.userDataSyncHome,...xL(r,e,`lastSync${e}.json`))}var ZT=A("IUserDataSyncStoreManagementService"),wd=A("IUserDataSyncStoreService"),Dh=A("IUserDataSyncLocalStoreService"),fa="x-operation-id",AV="X-Execution-Id";var Qr=class extends Error{constructor(t,n,i,o){super(t);this.code=n;this.resource=i;this.operationId=o;this.name=`${this.code} (UserDataSyncError) syncResource:${this.resource||"unknown"} operationId:${this.operationId||"unknown"}`}},rn=class extends Qr{constructor(t,n,i,o,s){super(t,i,void 0,s);this.url=n;this.serverCode=o}};(e=>{function r(t){if(t instanceof e)return t;let n=/^(.+) \(UserDataSyncError\) syncResource:(.+) operationId:(.+)$/.exec(t.name);if(n&&n[1]){let i=n[2]==="unknown"?void 0:n[2],o=n[3]==="unknown"?void 0:n[3];return new e(t.message,n[1],i,o)}return new e(t.message,"Unknown")}e.toUserDataSyncError=r})(Qr||={});var eE="sync.store.url.type";var Cd=A("IUserDataSyncEnablementService"),Mrn=A("IUserDataSyncService"),Nrn=A("IUserDataSyncResourceProviderService"),Frn=A("IUserDataAutoSyncService"),OV=A("IUserDataSyncUtilService"),Fo=A("IUserDataSyncLogService");var Qc="vscode-userdata-sync",MV="preview";function m6(r){return!!(r&&r.ref!==void 0&&typeof r.ref=="string"&&r.ref!==""&&r.syncData!==void 0&&(r.syncData===null||EL(r.syncData)))}function EL(r){return!!(r&&r.version!==void 0&&typeof r.version=="number"&&r.content!==void 0&&typeof r.content=="string"&&(Object.keys(r).length===2||Object.keys(r).length===3&&r.machineId!==void 0&&typeof r.machineId=="string"))}function nE(r,e){return`${qP(r)}${e.isDefault?"":` (${e.name})`}`}var Jc=class extends P{constructor(t,n,i,o,s,a,l,d,u,p,h,m){super();this.syncResource=t;this.collection=n;this.fileService=i;this.environmentService=o;this.storageService=s;this.userDataSyncStoreService=a;this.userDataSyncLocalStoreService=l;this.userDataSyncEnablementService=d;this.telemetryService=u;this.logService=p;this.configurationService=h;this.syncResourceLogLabel=nE(t.syncResource,t.profile),this.extUri=m.extUri,this.syncFolder=this.extUri.joinPath(o.userDataSyncHome,...xL(t.profile.isDefault?void 0:t.profile.id,t.syncResource)),this.syncPreviewFolder=this.extUri.joinPath(this.syncFolder,MV),this.lastSyncResource=TL(t.profile.isDefault?void 0:t.profile.id,t.syncResource,o,this.extUri),this.currentMachineIdPromise=kh(o,i,s)}syncPreviewPromise=null;syncFolder;syncPreviewFolder;extUri;currentMachineIdPromise;_status="idle";get status(){return this._status}_onDidChangStatus=this._register(new x);onDidChangeStatus=this._onDidChangStatus.event;_conflicts=[];get conflicts(){return{...this.syncResource,conflicts:this._conflicts}}_onDidChangeConflicts=this._register(new x);onDidChangeConflicts=this._onDidChangeConflicts.event;localChangeTriggerThrottler=this._register(new El(50));_onDidChangeLocal=this._register(new x);onDidChangeLocal=this._onDidChangeLocal.event;lastSyncResource;lastSyncUserDataStateKey=`${this.collection?`${this.collection}.`:""}${this.syncResource.syncResource}.lastSyncUserData`;hasSyncResourceStateVersionChanged=!1;syncResourceLogLabel;syncHeaders={};resource=this.syncResource.syncResource;triggerLocalChange(){this.localChangeTriggerThrottler.trigger(()=>this.doTriggerLocalChange())}async doTriggerLocalChange(){if(this.status==="hasConflicts"){this.logService.info(`${this.syncResourceLogLabel}: In conflicts state and local change detected. Syncing again...`);let t=await this.syncPreviewPromise;this.syncPreviewPromise=null;let n=await this.performSync(t.remoteUserData,t.lastSyncUserData,!0,this.getUserDataSyncConfiguration());this.setStatus(n)}else{this.logService.trace(`${this.syncResourceLogLabel}: Checking for local changes...`);let t=await this.getLastSyncUserData();(t?await this.hasRemoteChanged(t):!0)&&this._onDidChangeLocal.fire()}}setStatus(t){this._status!==t&&(this._status=t,this._onDidChangStatus.fire(t))}async sync(t,n={}){await this._sync(t,!0,this.getUserDataSyncConfiguration(),n)}async preview(t,n,i={}){return this._sync(t,!1,n,i)}async apply(t,n={}){try{this.syncHeaders={...n};let i=await this.doApply(t);return this.setStatus(i),this.syncPreviewPromise}finally{this.syncHeaders={}}}async _sync(t,n,i,o){try{if(this.syncHeaders={...o},this.status==="hasConflicts")return this.logService.info(`${this.syncResourceLogLabel}: Skipped synchronizing ${this.resource.toLowerCase()} as there are conflicts.`),this.syncPreviewPromise;if(this.status==="syncing")return this.logService.info(`${this.syncResourceLogLabel}: Skipped synchronizing ${this.resource.toLowerCase()} as it is running already.`),this.syncPreviewPromise;this.logService.trace(`${this.syncResourceLogLabel}: Started synchronizing ${this.resource.toLowerCase()}...`),this.setStatus("syncing");let s="idle";try{let a=await this.getLastSyncUserData(),l=await this.getLatestRemoteUserData(t,a);return s=await this.performSync(l,a,n,i),s==="hasConflicts"?this.logService.info(`${this.syncResourceLogLabel}: Detected conflicts while synchronizing ${this.resource.toLowerCase()}.`):s==="idle"&&this.logService.trace(`${this.syncResourceLogLabel}: Finished synchronizing ${this.resource.toLowerCase()}.`),this.syncPreviewPromise||null}finally{this.setStatus(s)}}finally{this.syncHeaders={}}}async replace(t){let n=this.parseSyncData(t);if(!n)return!1;await this.stop();try{this.logService.trace(`${this.syncResourceLogLabel}: Started resetting ${this.resource.toLowerCase()}...`),this.setStatus("syncing");let i=await this.getLastSyncUserData(),o=await this.getLatestRemoteUserData(null,i),s=await this.isRemoteDataFromCurrentMachine(o),a=await this.generateSyncPreview({ref:o.ref,syncData:n},i,s,this.getUserDataSyncConfiguration(),rt.None),l=[];for(let d of a){let u=await this.getAcceptResult(d,d.remoteResource,void 0,rt.None),{remoteChange:p}=await this.getAcceptResult(d,d.previewResource,d.remoteContent,rt.None);l.push([d,{...u,remoteChange:p!==0?p:2}])}await this.applyResult(o,i,l,!1),this.logService.info(`${this.syncResourceLogLabel}: Finished resetting ${this.resource.toLowerCase()}.`)}finally{this.setStatus("idle")}return!0}async isRemoteDataFromCurrentMachine(t){let n=await this.currentMachineIdPromise;return!!t.syncData?.machineId&&t.syncData.machineId===n}async getLatestRemoteUserData(t,n){if(n){let i=t?t[this.resource]:void 0;if(n.ref===i||i===void 0&&n.syncData===null)return n}return this.getRemoteUserData(n)}async performSync(t,n,i,o){if(t.syncData&&t.syncData.version>this.version)throw this.telemetryService.publicLog2("sync/incompatible",{source:this.resource}),new Qr(c({key:"incompatible",comment:["This is an error while syncing a resource that its local version is not compatible with its remote version."]},"Cannot sync {0} as its local version {1} is not compatible with its remote version {2}",this.resource,this.version,t.syncData.version),"IncompatibleLocalContent",this.resource);try{return await this.doSync(t,n,i,o)}catch(s){if(s instanceof Qr)switch(s.code){case"LocalPreconditionFailed":return this.logService.info(`${this.syncResourceLogLabel}: Failed to synchronize ${this.syncResourceLogLabel} as there is a new local version available. Synchronizing again...`),this.performSync(t,n,i,o);case"Conflict":case"PreconditionFailed":return this.logService.info(`${this.syncResourceLogLabel}: Failed to synchronize as there is a new remote version available. Synchronizing again...`),t=await this.getRemoteUserData(null),n=await this.getLastSyncUserData(),this.performSync(t,n,i,o)}throw s}}async doSync(t,n,i,o){try{let s=await this.isRemoteDataFromCurrentMachine(t),a=!s&&n===null&&this.getStoredLastSyncUserDataStateContent()!==void 0,l=i&&!a;this.syncPreviewPromise||(this.syncPreviewPromise=Eo(u=>this.doGenerateSyncResourcePreview(t,n,s,l,o,u)));let d=await this.syncPreviewPromise;if(i&&a){this.logService.info(`${this.syncResourceLogLabel}: Accepting remote because it was synced before and the last sync data is not available.`);for(let u of d.resourcePreviews)d=await this.accept(u.remoteResource)||d}return this.updateConflicts(d.resourcePreviews),d.resourcePreviews.some(({mergeState:u})=>u==="conflict")?"hasConflicts":i?await this.doApply(!1):"syncing"}catch(s){throw this.syncPreviewPromise=null,s}}async merge(t){return await this.updateSyncResourcePreview(t,async n=>{let i=await this.getMergeResult(n,rt.None);await this.fileService.writeFile(n.previewResource,et.fromString(i?.content||""));let o=i&&!i.hasConflicts?await this.getAcceptResult(n,n.previewResource,void 0,rt.None):void 0;return n.acceptResult=o,n.mergeState=i.hasConflicts?"conflict":o?"accepted":"preview",n.localChange=o?o.localChange:i.localChange,n.remoteChange=o?o.remoteChange:i.remoteChange,n}),this.syncPreviewPromise}async accept(t,n){return await this.updateSyncResourcePreview(t,async i=>{let o=await this.getAcceptResult(i,t,n,rt.None);return i.acceptResult=o,i.mergeState="accepted",i.localChange=o.localChange,i.remoteChange=o.remoteChange,i}),this.syncPreviewPromise}async discard(t){return await this.updateSyncResourcePreview(t,async n=>{let i=await this.getMergeResult(n,rt.None);return await this.fileService.writeFile(n.previewResource,et.fromString(i.content||"")),n.acceptResult=void 0,n.mergeState="preview",n.localChange=i.localChange,n.remoteChange=i.remoteChange,n}),this.syncPreviewPromise}async updateSyncResourcePreview(t,n){if(!this.syncPreviewPromise)return;let i=await this.syncPreviewPromise,o=i.resourcePreviews.findIndex(({localResource:s,remoteResource:a,previewResource:l})=>this.extUri.isEqual(s,t)||this.extUri.isEqual(a,t)||this.extUri.isEqual(l,t));o!==-1&&(this.syncPreviewPromise=Eo(async s=>{let a=[...i.resourcePreviews];return a[o]=await n(a[o]),{...i,resourcePreviews:a}}),i=await this.syncPreviewPromise,this.updateConflicts(i.resourcePreviews),i.resourcePreviews.some(({mergeState:s})=>s==="conflict")?this.setStatus("hasConflicts"):this.setStatus("syncing"))}async doApply(t){if(!this.syncPreviewPromise)return"idle";let n=await this.syncPreviewPromise;return n.resourcePreviews.some(({mergeState:i})=>i==="conflict")?"hasConflicts":n.resourcePreviews.some(({mergeState:i})=>i!=="accepted")?"syncing":(await this.applyResult(n.remoteUserData,n.lastSyncUserData,n.resourcePreviews.map(i=>[i,i.acceptResult]),t),this.syncPreviewPromise=null,await this.clearPreviewFolder(),"idle")}async clearPreviewFolder(){try{await this.fileService.del(this.syncPreviewFolder,{recursive:!0})}catch{}}updateConflicts(t){let n=t.filter(({mergeState:i})=>i==="conflict");ln(this._conflicts,n,(i,o)=>this.extUri.isEqual(i.previewResource,o.previewResource))||(this._conflicts=n,this._onDidChangeConflicts.fire(this.conflicts))}async hasPreviouslySynced(){let t=await this.getLastSyncUserData();return!!t&&t.syncData!==null}async resolvePreviewContent(t){let n=this.syncPreviewPromise?await this.syncPreviewPromise:null;if(n)for(let i of n.resourcePreviews){if(this.extUri.isEqual(i.acceptedResource,t))return i.acceptResult?i.acceptResult.content:null;if(this.extUri.isEqual(i.remoteResource,t))return i.remoteContent;if(this.extUri.isEqual(i.localResource,t))return i.localContent;if(this.extUri.isEqual(i.baseResource,t))return i.baseContent}return null}async resetLocal(){this.storageService.remove(this.lastSyncUserDataStateKey,-1);try{await this.fileService.del(this.lastSyncResource)}catch(t){xy(t)!==1&&this.logService.error(t)}}async doGenerateSyncResourcePreview(t,n,i,o,s,a){let l=await this.generateSyncPreview(t,n,i,s,a),d=[];for(let u of l){let p=u.previewResource.with({scheme:Qc,authority:"accepted"});if(u.localChange===0&&u.remoteChange===0)d.push({...u,acceptedResource:p,acceptResult:{content:null,localChange:0,remoteChange:0},mergeState:"accepted"});else{let h=o?await this.getMergeResult(u,a):void 0;if(a.isCancellationRequested)break;await this.fileService.writeFile(u.previewResource,et.fromString(h?.content||""));let m=h&&!h.hasConflicts?await this.getAcceptResult(u,u.previewResource,void 0,a):void 0;d.push({...u,acceptResult:m,mergeState:h?.hasConflicts?"conflict":m?"accepted":"preview",localChange:m?m.localChange:h?h.localChange:u.localChange,remoteChange:m?m.remoteChange:h?h.remoteChange:u.remoteChange})}}return{syncResource:this.resource,profile:this.syncResource.profile,remoteUserData:t,lastSyncUserData:n,resourcePreviews:d,isLastSyncFromCurrentMachine:i}}async getLastSyncUserData(){let t=this.getStoredLastSyncUserDataStateContent();if(t||(t=await this.migrateLastSyncUserData()),!t)return this.logService.info(`${this.syncResourceLogLabel}: Last sync data state does not exist.`),null;let n=JSON.parse(t),i=this.userDataSyncEnablementService.getResourceSyncStateVersion(this.resource);if(this.hasSyncResourceStateVersionChanged=!!n.version&&!!i&&n.version!==i,this.hasSyncResourceStateVersionChanged)return this.logService.info(`${this.syncResourceLogLabel}: Reset last sync state because last sync state version ${n.version} is not compatible with current sync state version ${i}.`),await this.resetLocal(),null;let o,s=1;for(;o===void 0&&s++<6;)try{let a=await this.readLastSyncStoredRemoteUserData();a&&(a.ref===n.ref?o=a.syncData:this.logService.info(`${this.syncResourceLogLabel}: Last sync data stored locally is not same as the last sync state.`));break}catch(a){if(a instanceof es&&a.fileOperationResult===1){this.logService.info(`${this.syncResourceLogLabel}: Last sync resource does not exist locally.`);break}else{if(a instanceof Qr)throw a;this.logService.error(a,s)}}if(o===void 0)try{let a=await this.userDataSyncStoreService.resolveResourceContent(this.resource,n.ref,this.collection,this.syncHeaders);o=a===null?null:this.parseSyncData(a),await this.writeLastSyncStoredRemoteUserData({ref:n.ref,syncData:o})}catch(a){if(a instanceof Qr&&a.code==="NotFound")this.logService.info(`${this.syncResourceLogLabel}: Last sync resource does not exist remotely.`);else throw a}return o===void 0?null:{...n,syncData:o}}async updateLastSyncUserData(t,n={}){if(n.ref||n.version)throw new Error("Cannot have core properties as additional");let i=this.userDataSyncEnablementService.getResourceSyncStateVersion(this.resource),o={ref:t.ref,version:i,...n};this.storageService.store(this.lastSyncUserDataStateKey,JSON.stringify(o),-1,1),await this.writeLastSyncStoredRemoteUserData(t)}getStoredLastSyncUserDataStateContent(){return this.storageService.get(this.lastSyncUserDataStateKey,-1)}async readLastSyncStoredRemoteUserData(){let t=(await this.fileService.readFile(this.lastSyncResource)).value.toString();try{let n=t?JSON.parse(t):void 0;if(m6(n))return n}catch(n){this.logService.error(n)}}async writeLastSyncStoredRemoteUserData(t){await this.fileService.writeFile(this.lastSyncResource,et.fromString(JSON.stringify(t)))}async migrateLastSyncUserData(){try{let t=await this.fileService.readFile(this.lastSyncResource),n=JSON.parse(t.value.toString());await this.fileService.del(this.lastSyncResource),n.ref&&n.content!==void 0?(this.storageService.store(this.lastSyncUserDataStateKey,JSON.stringify({...n,content:void 0}),-1,1),await this.writeLastSyncStoredRemoteUserData({ref:n.ref,syncData:n.content===null?null:JSON.parse(n.content)})):this.logService.info(`${this.syncResourceLogLabel}: Migrating last sync user data. Invalid data.`,n)}catch(t){t instanceof es&&t.fileOperationResult===1?this.logService.info(`${this.syncResourceLogLabel}: Migrating last sync user data. Resource does not exist.`):this.logService.error(t)}return this.storageService.get(this.lastSyncUserDataStateKey,-1)}async getRemoteUserData(t){let{ref:n,content:i}=await this.getUserData(t),o=null;return i!==null&&(o=this.parseSyncData(i)),{ref:n,syncData:o}}parseSyncData(t){try{let n=JSON.parse(t);if(EL(n))return n}catch(n){this.logService.error(n)}throw new Qr(c("incompatible sync data","Cannot parse sync data as it is not compatible with the current version."),"IncompatibleRemoteContent",this.resource)}async getUserData(t){let n=t?{ref:t.ref,content:t.syncData?JSON.stringify(t.syncData):null}:null;return this.userDataSyncStoreService.readResource(this.resource,n,this.collection,this.syncHeaders)}async updateRemoteUserData(t,n){let i=await this.currentMachineIdPromise,o={version:this.version,machineId:i,content:t};try{return n=await this.userDataSyncStoreService.writeResource(this.resource,JSON.stringify(o),n,this.collection,this.syncHeaders),{ref:n,syncData:o}}catch(s){throw s instanceof Qr&&s.code==="TooLarge"&&(s=new Qr(s.message,s.code,this.resource)),s}}async backupLocal(t){let n={version:this.version,content:t};return this.userDataSyncLocalStoreService.writeResource(this.resource,JSON.stringify(n),new Date,this.syncResource.profile.isDefault?void 0:this.syncResource.profile.id)}async stop(){this.status!=="idle"&&(this.logService.trace(`${this.syncResourceLogLabel}: Stopping synchronizing ${this.resource.toLowerCase()}.`),this.syncPreviewPromise&&(this.syncPreviewPromise.cancel(),this.syncPreviewPromise=null),this.updateConflicts([]),await this.clearPreviewFolder(),this.setStatus("idle"),this.logService.info(`${this.syncResourceLogLabel}: Stopped synchronizing ${this.resource.toLowerCase()}.`))}getUserDataSyncConfiguration(){return this.configurationService.getValue(PV)}};Jc=C([v(2,dt),v(3,Qt),v(4,Xe),v(5,wd),v(6,Dh),v(7,Cd),v(8,Ot),v(9,Fo),v(10,ke),v(11,Ln)],Jc);var Jf=class extends Jc{constructor(t,n,i,o,s,a,l,d,u,p,h,m,f){super(n,i,o,s,a,l,d,u,p,h,m,f);this.file=t;this._register(this.fileService.watch(this.extUri.dirname(t))),this._register(this.fileService.onDidFilesChange(g=>this.onFileChanges(g)))}async getLocalFileContent(){try{return await this.fileService.readFile(this.file)}catch{return null}}async updateLocalFileContent(t,n,i){try{n?await this.fileService.writeFile(this.file,et.fromString(t),i?void 0:n):await this.fileService.createFile(this.file,et.fromString(t),{overwrite:i})}catch(o){throw o instanceof es&&o.fileOperationResult===1||o instanceof es&&o.fileOperationResult===3?new Qr(o.message,"LocalPreconditionFailed"):o}}async deleteLocalFile(){try{await this.fileService.del(this.file)}catch(t){if(!(t instanceof es&&t.fileOperationResult===1))throw t}}onFileChanges(t){t.contains(this.file)&&this.triggerLocalChange()}};Jf=C([v(3,dt),v(4,Qt),v(5,Xe),v(6,wd),v(7,Dh),v(8,Cd),v(9,Ot),v(10,Fo),v(11,ke),v(12,Ln)],Jf);var tE=class extends Jf{constructor(t,n,i,o,s,a,l,d,u,p,h,m,f,g){super(t,n,i,o,s,a,l,d,u,p,h,f,g);this.userDataSyncUtilService=m}hasErrors(t,n){let i=[],o=YD(t,i,{allowEmptyContent:!0,allowTrailingComma:!0});return i.length>0||!jn(o)&&n!==Array.isArray(o)}_formattingOptions=void 0;getFormattingOptions(){return this._formattingOptions||(this._formattingOptions=this.userDataSyncUtilService.resolveFormattingOptions(this.file)),this._formattingOptions}};tE=C([v(3,dt),v(4,Qt),v(5,Xe),v(6,wd),v(7,Dh),v(8,Cd),v(9,Ot),v(10,Fo),v(11,OV),v(12,ke),v(13,Ln)],tE);var _h=class{constructor(e,t,n,i,o,s,a){this.resource=e;this.userDataProfilesService=t;this.environmentService=n;this.logService=i;this.fileService=o;this.storageService=s;this.extUri=a.extUri,this.lastSyncResource=TL(void 0,this.resource,n,this.extUri)}extUri;lastSyncResource;async initialize({ref:e,content:t}){if(!t){this.logService.info("Remote content does not exist.",this.resource);return}let n=this.parseSyncData(t);if(n)try{await this.doInitialize({ref:e,syncData:n})}catch(i){this.logService.error(i)}}parseSyncData(e){try{let t=JSON.parse(e);if(EL(t))return t}catch(t){this.logService.error(t)}this.logService.info("Cannot parse sync data as it is not compatible with the current version.",this.resource)}async updateLastSyncUserData(e,t={}){if(t.ref||t.version)throw new Error("Cannot have core properties as additional");let n={ref:e.ref,version:void 0,...t};this.storageService.store(`${this.resource}.lastSyncUserData`,JSON.stringify(n),-1,1),await this.fileService.writeFile(this.lastSyncResource,et.fromString(JSON.stringify(e)))}};_h=C([v(1,Yl),v(2,Qt),v(3,Et),v(4,dt),v(5,Xe),v(6,Ln)],_h);var iE={},Ct={exports:iE};(function(r,e){if(typeof iE=="object"&&typeof Ct=="object")Ct.exports=e();else if(typeof define=="function"&&define.amd)define([],e);else{var t=e();for(var n in t)(typeof iE=="object"?iE:r)[n]=t[n]}})(typeof self<"u"?self:void 0,function(){return function(r){var e={};function t(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return r[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return t.m=r,t.c=e,t.d=function(n,i,o){t.o(n,i)||Object.defineProperty(n,i,{enumerable:!0,get:o})},t.r=function(n){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,i){if(1&i&&(n=t(n)),8&i||4&i&&typeof n=="object"&&n&&n.__esModule)return n;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:n}),2&i&&typeof n!="string")for(var s in n)t.d(o,s,function(a){return n[a]}.bind(null,s));return o},t.n=function(n){var i=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(i,"a",i),i},t.o=function(n,i){return Object.prototype.hasOwnProperty.call(n,i)},t.p="",t(t.s=0)}([function(r,e,t){(function(n){var i;e=r.exports=kt,i=typeof n=="object"&&n.env&&n.env.NODE_DEBUG&&/\bsemver\b/i.test(n.env.NODE_DEBUG)?function(){var L=Array.prototype.slice.call(arguments,0);L.unshift("SEMVER"),console.log.apply(console,L)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var o=256,s=Number.MAX_SAFE_INTEGER||9007199254740991,a=e.re=[],l=e.src=[],d=0,u=d++;l[u]="0|[1-9]\\d*";var p=d++;l[p]="[0-9]+";var h=d++;l[h]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var m=d++;l[m]="("+l[u]+")\\.("+l[u]+")\\.("+l[u]+")";var f=d++;l[f]="("+l[p]+")\\.("+l[p]+")\\.("+l[p]+")";var g=d++;l[g]="(?:"+l[u]+"|"+l[h]+")";var y=d++;l[y]="(?:"+l[p]+"|"+l[h]+")";var T=d++;l[T]="(?:-("+l[g]+"(?:\\."+l[g]+")*))";var E=d++;l[E]="(?:-?("+l[y]+"(?:\\."+l[y]+")*))";var D=d++;l[D]="[0-9A-Za-z-]+";var _=d++;l[_]="(?:\\+("+l[D]+"(?:\\."+l[D]+")*))";var O=d++,G="v?"+l[m]+l[T]+"?"+l[_]+"?";l[O]="^"+G+"$";var Z="[v=\\s]*"+l[f]+l[E]+"?"+l[_]+"?",M=d++;l[M]="^"+Z+"$";var H=d++;l[H]="((?:<|>)?=?)";var oe=d++;l[oe]=l[p]+"|x|X|\\*";var ee=d++;l[ee]=l[u]+"|x|X|\\*";var re=d++;l[re]="[v=\\s]*("+l[ee]+")(?:\\.("+l[ee]+")(?:\\.("+l[ee]+")(?:"+l[T]+")?"+l[_]+"?)?)?";var Fe=d++;l[Fe]="[v=\\s]*("+l[oe]+")(?:\\.("+l[oe]+")(?:\\.("+l[oe]+")(?:"+l[E]+")?"+l[_]+"?)?)?";var st=d++;l[st]="^"+l[H]+"\\s*"+l[re]+"$";var be=d++;l[be]="^"+l[H]+"\\s*"+l[Fe]+"$";var ae=d++;l[ae]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var fe=d++;l[fe]="(?:~>?)";var ve=d++;l[ve]="(\\s*)"+l[fe]+"\\s+",a[ve]=new RegExp(l[ve],"g");var Te=d++;l[Te]="^"+l[fe]+l[re]+"$";var Qe=d++;l[Qe]="^"+l[fe]+l[Fe]+"$";var He=d++;l[He]="(?:\\^)";var St=d++;l[St]="(\\s*)"+l[He]+"\\s+",a[St]=new RegExp(l[St],"g");var nt=d++;l[nt]="^"+l[He]+l[re]+"$";var Re=d++;l[Re]="^"+l[He]+l[Fe]+"$";var Gn=d++;l[Gn]="^"+l[H]+"\\s*("+Z+")$|^$";var xn=d++;l[xn]="^"+l[H]+"\\s*("+G+")$|^$";var Li=d++;l[Li]="(\\s*)"+l[H]+"\\s*("+Z+"|"+l[re]+")",a[Li]=new RegExp(l[Li],"g");var dr=d++;l[dr]="^\\s*("+l[re]+")\\s+-\\s+("+l[re]+")\\s*$";var ba=d++;l[ba]="^\\s*("+l[Fe]+")\\s+-\\s+("+l[Fe]+")\\s*$";var Pi=d++;l[Pi]="(<|>)?=?\\s*\\*";for(var Ai=0;Ai<35;Ai++)i(Ai,l[Ai]),a[Ai]||(a[Ai]=new RegExp(l[Ai]));function Jr(L,q){if(L instanceof kt)return L;if(typeof L!="string"||L.length>o||!(q?a[M]:a[O]).test(L))return null;try{return new kt(L,q)}catch{return null}}function kt(L,q){if(L instanceof kt){if(L.loose===q)return L;L=L.version}else if(typeof L!="string")throw new TypeError("Invalid Version: "+L);if(L.length>o)throw new TypeError("version is longer than "+o+" characters");if(!(this instanceof kt))return new kt(L,q);i("SemVer",L,q),this.loose=q;var j=L.trim().match(q?a[M]:a[O]);if(!j)throw new TypeError("Invalid Version: "+L);if(this.raw=L,this.major=+j[1],this.minor=+j[2],this.patch=+j[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");j[4]?this.prerelease=j[4].split(".").map(function(Pe){if(/^[0-9]+$/.test(Pe)){var Ke=+Pe;if(Ke>=0&&Ke<s)return Ke}return Pe}):this.prerelease=[],this.build=j[5]?j[5].split("."):[],this.format()}e.parse=Jr,e.valid=function(L,q){var j=Jr(L,q);return j?j.version:null},e.clean=function(L,q){var j=Jr(L.trim().replace(/^[=v]+/,""),q);return j?j.version:null},e.SemVer=kt,kt.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},kt.prototype.toString=function(){return this.version},kt.prototype.compare=function(L){return i("SemVer.compare",this.version,this.loose,L),L instanceof kt||(L=new kt(L,this.loose)),this.compareMain(L)||this.comparePre(L)},kt.prototype.compareMain=function(L){return L instanceof kt||(L=new kt(L,this.loose)),Zr(this.major,L.major)||Zr(this.minor,L.minor)||Zr(this.patch,L.patch)},kt.prototype.comparePre=function(L){if(L instanceof kt||(L=new kt(L,this.loose)),this.prerelease.length&&!L.prerelease.length)return-1;if(!this.prerelease.length&&L.prerelease.length)return 1;if(!this.prerelease.length&&!L.prerelease.length)return 0;var q=0;do{var j=this.prerelease[q],Pe=L.prerelease[q];if(i("prerelease compare",q,j,Pe),j===void 0&&Pe===void 0)return 0;if(Pe===void 0)return 1;if(j===void 0)return-1;if(j!==Pe)return Zr(j,Pe)}while(++q)},kt.prototype.inc=function(L,q){switch(L){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",q);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",q);break;case"prepatch":this.prerelease.length=0,this.inc("patch",q),this.inc("pre",q);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",q),this.inc("pre",q);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var j=this.prerelease.length;--j>=0;)typeof this.prerelease[j]=="number"&&(this.prerelease[j]++,j=-2);j===-1&&this.prerelease.push(0)}q&&(this.prerelease[0]===q?isNaN(this.prerelease[1])&&(this.prerelease=[q,0]):this.prerelease=[q,0]);break;default:throw new Error("invalid increment argument: "+L)}return this.format(),this.raw=this.version,this},e.inc=function(L,q,j,Pe){typeof j=="string"&&(Pe=j,j=void 0);try{return new kt(L,j).inc(q,Pe).version}catch{return null}},e.diff=function(L,q){if(kd(L,q))return null;var j=Jr(L),Pe=Jr(q);if(j.prerelease.length||Pe.prerelease.length){for(var Ke in j)if((Ke==="major"||Ke==="minor"||Ke==="patch")&&j[Ke]!==Pe[Ke])return"pre"+Ke;return"prerelease"}for(var Ke in j)if((Ke==="major"||Ke==="minor"||Ke==="patch")&&j[Ke]!==Pe[Ke])return Ke},e.compareIdentifiers=Zr;var Bo=/^[0-9]+$/;function Zr(L,q){var j=Bo.test(L),Pe=Bo.test(q);return j&&Pe&&(L=+L,q=+q),j&&!Pe?-1:Pe&&!j?1:L<q?-1:L>q?1:0}function ji(L,q,j){return new kt(L,j).compare(new kt(q,j))}function va(L,q,j){return ji(L,q,j)>0}function ya(L,q,j){return ji(L,q,j)<0}function kd(L,q,j){return ji(L,q,j)===0}function Uo(L,q,j){return ji(L,q,j)!==0}function Vo(L,q,j){return ji(L,q,j)>=0}function eo(L,q,j){return ji(L,q,j)<=0}function Ar(L,q,j,Pe){var Ke;switch(q){case"===":typeof L=="object"&&(L=L.version),typeof j=="object"&&(j=j.version),Ke=L===j;break;case"!==":typeof L=="object"&&(L=L.version),typeof j=="object"&&(j=j.version),Ke=L!==j;break;case"":case"=":case"==":Ke=kd(L,j,Pe);break;case"!=":Ke=Uo(L,j,Pe);break;case">":Ke=va(L,j,Pe);break;case">=":Ke=Vo(L,j,Pe);break;case"<":Ke=ya(L,j,Pe);break;case"<=":Ke=eo(L,j,Pe);break;default:throw new TypeError("Invalid operator: "+q)}return Ke}function Oi(L,q){if(L instanceof Oi){if(L.loose===q)return L;L=L.value}if(!(this instanceof Oi))return new Oi(L,q);i("comparator",L,q),this.loose=q,this.parse(L),this.semver===vo?this.value="":this.value=this.operator+this.semver.version,i("comp",this)}e.rcompareIdentifiers=function(L,q){return Zr(q,L)},e.major=function(L,q){return new kt(L,q).major},e.minor=function(L,q){return new kt(L,q).minor},e.patch=function(L,q){return new kt(L,q).patch},e.compare=ji,e.compareLoose=function(L,q){return ji(L,q,!0)},e.rcompare=function(L,q,j){return ji(q,L,j)},e.sort=function(L,q){return L.sort(function(j,Pe){return e.compare(j,Pe,q)})},e.rsort=function(L,q){return L.sort(function(j,Pe){return e.rcompare(j,Pe,q)})},e.gt=va,e.lt=ya,e.eq=kd,e.neq=Uo,e.gte=Vo,e.lte=eo,e.cmp=Ar,e.Comparator=Oi;var vo={};function on(L,q){if(L instanceof on)return L.loose===q?L:new on(L.raw,q);if(L instanceof Oi)return new on(L.value,q);if(!(this instanceof on))return new on(L,q);if(this.loose=q,this.raw=L,this.set=L.split(/\s*\|\|\s*/).map(function(j){return this.parseRange(j.trim())},this).filter(function(j){return j.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+L);this.format()}function Tn(L){return!L||L.toLowerCase()==="x"||L==="*"}function eu(L,q,j,Pe,Ke,tn,Ve,Mt,jt,Zn,ur,sn,On){return((q=Tn(j)?"":Tn(Pe)?">="+j+".0.0":Tn(Ke)?">="+j+"."+Pe+".0":">="+q)+" "+(Mt=Tn(jt)?"":Tn(Zn)?"<"+(+jt+1)+".0.0":Tn(ur)?"<"+jt+"."+(+Zn+1)+".0":sn?"<="+jt+"."+Zn+"."+ur+"-"+sn:"<="+Mt)).trim()}function Wo(L,q){for(var j=0;j<L.length;j++)if(!L[j].test(q))return!1;if(q.prerelease.length){for(j=0;j<L.length;j++)if(i(L[j].semver),L[j].semver!==vo&&L[j].semver.prerelease.length>0){var Pe=L[j].semver;if(Pe.major===q.major&&Pe.minor===q.minor&&Pe.patch===q.patch)return!0}return!1}return!0}function cr(L,q,j){try{q=new on(q,j)}catch{return!1}return q.test(L)}function mn(L,q,j,Pe){var Ke,tn,Ve,Mt,jt;switch(L=new kt(L,Pe),q=new on(q,Pe),j){case">":Ke=va,tn=eo,Ve=ya,Mt=">",jt=">=";break;case"<":Ke=ya,tn=Vo,Ve=va,Mt="<",jt="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(cr(L,q,Pe))return!1;for(var Zn=0;Zn<q.set.length;++Zn){var ur=q.set[Zn],sn=null,On=null;if(ur.forEach(function(li){li.semver===vo&&(li=new Oi(">=0.0.0")),sn=sn||li,On=On||li,Ke(li.semver,sn.semver,Pe)?sn=li:Ve(li.semver,On.semver,Pe)&&(On=li)}),sn.operator===Mt||sn.operator===jt||(!On.operator||On.operator===Mt)&&tn(L,On.semver)||On.operator===jt&&Ve(L,On.semver))return!1}return!0}Oi.prototype.parse=function(L){var q=this.loose?a[Gn]:a[xn],j=L.match(q);if(!j)throw new TypeError("Invalid comparator: "+L);this.operator=j[1],this.operator==="="&&(this.operator=""),j[2]?this.semver=new kt(j[2],this.loose):this.semver=vo},Oi.prototype.toString=function(){return this.value},Oi.prototype.test=function(L){return i("Comparator.test",L,this.loose),this.semver===vo||(typeof L=="string"&&(L=new kt(L,this.loose)),Ar(L,this.operator,this.semver,this.loose))},Oi.prototype.intersects=function(L,q){if(!(L instanceof Oi))throw new TypeError("a Comparator is required");var j;if(this.operator==="")return j=new on(L.value,q),cr(this.value,j,q);if(L.operator==="")return j=new on(this.value,q),cr(L.semver,j,q);var Pe=!(this.operator!==">="&&this.operator!==">"||L.operator!==">="&&L.operator!==">"),Ke=!(this.operator!=="<="&&this.operator!=="<"||L.operator!=="<="&&L.operator!=="<"),tn=this.semver.version===L.semver.version,Ve=!(this.operator!==">="&&this.operator!=="<="||L.operator!==">="&&L.operator!=="<="),Mt=Ar(this.semver,"<",L.semver,q)&&(this.operator===">="||this.operator===">")&&(L.operator==="<="||L.operator==="<"),jt=Ar(this.semver,">",L.semver,q)&&(this.operator==="<="||this.operator==="<")&&(L.operator===">="||L.operator===">");return Pe||Ke||tn&&Ve||Mt||jt},e.Range=on,on.prototype.format=function(){return this.range=this.set.map(function(L){return L.join(" ").trim()}).join("||").trim(),this.range},on.prototype.toString=function(){return this.range},on.prototype.parseRange=function(L){var q=this.loose;L=L.trim(),i("range",L,q);var j=q?a[ba]:a[dr];L=L.replace(j,eu),i("hyphen replace",L),L=L.replace(a[Li],"$1$2$3"),i("comparator trim",L,a[Li]),L=(L=(L=L.replace(a[ve],"$1~")).replace(a[St],"$1^")).split(/\s+/).join(" ");var Pe=q?a[Gn]:a[xn],Ke=L.split(" ").map(function(tn){return function(Ve,Mt){return i("comp",Ve),Ve=function(jt,Zn){return jt.trim().split(/\s+/).map(function(ur){return function(sn,On){i("caret",sn,On);var li=On?a[Re]:a[nt];return sn.replace(li,function(pr,de,S,w,k){var R;return i("caret",sn,pr,de,S,w,k),Tn(de)?R="":Tn(S)?R=">="+de+".0.0 <"+(+de+1)+".0.0":Tn(w)?R=de==="0"?">="+de+"."+S+".0 <"+de+"."+(+S+1)+".0":">="+de+"."+S+".0 <"+(+de+1)+".0.0":k?(i("replaceCaret pr",k),k.charAt(0)!=="-"&&(k="-"+k),R=de==="0"?S==="0"?">="+de+"."+S+"."+w+k+" <"+de+"."+S+"."+(+w+1):">="+de+"."+S+"."+w+k+" <"+de+"."+(+S+1)+".0":">="+de+"."+S+"."+w+k+" <"+(+de+1)+".0.0"):(i("no pr"),R=de==="0"?S==="0"?">="+de+"."+S+"."+w+" <"+de+"."+S+"."+(+w+1):">="+de+"."+S+"."+w+" <"+de+"."+(+S+1)+".0":">="+de+"."+S+"."+w+" <"+(+de+1)+".0.0"),i("caret return",R),R})}(ur,Zn)}).join(" ")}(Ve,Mt),i("caret",Ve),Ve=function(jt,Zn){return jt.trim().split(/\s+/).map(function(ur){return function(sn,On){var li=On?a[Qe]:a[Te];return sn.replace(li,function(pr,de,S,w,k){var R;return i("tilde",sn,pr,de,S,w,k),Tn(de)?R="":Tn(S)?R=">="+de+".0.0 <"+(+de+1)+".0.0":Tn(w)?R=">="+de+"."+S+".0 <"+de+"."+(+S+1)+".0":k?(i("replaceTilde pr",k),k.charAt(0)!=="-"&&(k="-"+k),R=">="+de+"."+S+"."+w+k+" <"+de+"."+(+S+1)+".0"):R=">="+de+"."+S+"."+w+" <"+de+"."+(+S+1)+".0",i("tilde return",R),R})}(ur,Zn)}).join(" ")}(Ve,Mt),i("tildes",Ve),Ve=function(jt,Zn){return i("replaceXRanges",jt,Zn),jt.split(/\s+/).map(function(ur){return function(sn,On){sn=sn.trim();var li=On?a[be]:a[st];return sn.replace(li,function(pr,de,S,w,k,R){i("xRange",sn,pr,de,S,w,k,R);var F=Tn(S),Y=F||Tn(w),te=Y||Tn(k);return de==="="&&te&&(de=""),F?pr=de===">"||de==="<"?"<0.0.0":"*":de&&te?(Y&&(w=0),te&&(k=0),de===">"?(de=">=",Y?(S=+S+1,w=0,k=0):te&&(w=+w+1,k=0)):de==="<="&&(de="<",Y?S=+S+1:w=+w+1),pr=de+S+"."+w+"."+k):Y?pr=">="+S+".0.0 <"+(+S+1)+".0.0":te&&(pr=">="+S+"."+w+".0 <"+S+"."+(+w+1)+".0"),i("xRange return",pr),pr})}(ur,Zn)}).join(" ")}(Ve,Mt),i("xrange",Ve),Ve=function(jt,Zn){return i("replaceStars",jt,Zn),jt.trim().replace(a[Pi],"")}(Ve,Mt),i("stars",Ve),Ve}(tn,q)}).join(" ").split(/\s+/);return this.loose&&(Ke=Ke.filter(function(tn){return!!tn.match(Pe)})),Ke=Ke.map(function(tn){return new Oi(tn,q)})},on.prototype.intersects=function(L,q){if(!(L instanceof on))throw new TypeError("a Range is required");return this.set.some(function(j){return j.every(function(Pe){return L.set.some(function(Ke){return Ke.every(function(tn){return Pe.intersects(tn,q)})})})})},e.toComparators=function(L,q){return new on(L,q).set.map(function(j){return j.map(function(Pe){return Pe.value}).join(" ").trim().split(" ")})},on.prototype.test=function(L){if(!L)return!1;typeof L=="string"&&(L=new kt(L,this.loose));for(var q=0;q<this.set.length;q++)if(Wo(this.set[q],L))return!0;return!1},e.satisfies=cr,e.maxSatisfying=function(L,q,j){var Pe=null,Ke=null;try{var tn=new on(q,j)}catch{return null}return L.forEach(function(Ve){tn.test(Ve)&&(Pe&&Ke.compare(Ve)!==-1||(Ke=new kt(Pe=Ve,j)))}),Pe},e.minSatisfying=function(L,q,j){var Pe=null,Ke=null;try{var tn=new on(q,j)}catch{return null}return L.forEach(function(Ve){tn.test(Ve)&&(Pe&&Ke.compare(Ve)!==1||(Ke=new kt(Pe=Ve,j)))}),Pe},e.validRange=function(L,q){try{return new on(L,q).range||"*"}catch{return null}},e.ltr=function(L,q,j){return mn(L,q,"<",j)},e.gtr=function(L,q,j){return mn(L,q,">",j)},e.outside=mn,e.prerelease=function(L,q){var j=Jr(L,q);return j&&j.prerelease.length?j.prerelease:null},e.intersects=function(L,q,j){return L=new on(L,j),q=new on(q,j),L.intersects(q)},e.coerce=function(L){if(L instanceof kt)return L;if(typeof L!="string")return null;var q=L.match(a[ae]);return q==null?null:Jr((q[1]||"0")+"."+(q[2]||"0")+"."+(q[3]||"0"))}}).call(this,t(1))},function(r,e){var t,n,i=r.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(y){if(t===setTimeout)return setTimeout(y,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(y,0);try{return t(y,0)}catch{try{return t.call(null,y,0)}catch{return t.call(this,y,0)}}}(function(){try{t=typeof setTimeout=="function"?setTimeout:o}catch{t=o}try{n=typeof clearTimeout=="function"?clearTimeout:s}catch{n=s}})();var l,d=[],u=!1,p=-1;function h(){u&&l&&(u=!1,l.length?d=l.concat(d):p=-1,d.length&&m())}function m(){if(!u){var y=a(h);u=!0;for(var T=d.length;T;){for(l=d,d=[];++p<T;)l&&l[p].run();p=-1,T=d.length}l=null,u=!1,function(E){if(n===clearTimeout)return clearTimeout(E);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(E);try{n(E)}catch{try{return n.call(null,E)}catch{return n.call(this,E)}}}(y)}}function f(y,T){this.fun=y,this.array=T}function g(){}i.nextTick=function(y){var T=new Array(arguments.length-1);if(arguments.length>1)for(var E=1;E<arguments.length;E++)T[E-1]=arguments[E];d.push(new f(y,T)),d.length!==1||u||a(m)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(y){return[]},i.binding=function(y){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(y){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}}])});var Fon=Ct.exports.SEMVER_SPEC_VERSION,Bon=Ct.exports.parse,Uon=Ct.exports.valid,Von=Ct.exports.coerce,Won=Ct.exports.clean,zon=Ct.exports.inc,Hon=Ct.exports.major,Kon=Ct.exports.minor,Gon=Ct.exports.patch,qon=Ct.exports.prerelease,rE=Ct.exports.gt,$on=Ct.exports.gte,jon=Ct.exports.lt,Yon=Ct.exports.lte,Xon=Ct.exports.eq,Qon=Ct.exports.neq,Jon=Ct.exports.cmp,Zon=Ct.exports.compare,esn=Ct.exports.rcompare,tsn=Ct.exports.compareIdentifiers,nsn=Ct.exports.rcompareIdentifiers,isn=Ct.exports.compareBuild,rsn=Ct.exports.sort,osn=Ct.exports.rsort,ssn=Ct.exports.diff,asn=Ct.exports.validRange,lsn=Ct.exports.satisfies,dsn=Ct.exports.maxSatisfying,csn=Ct.exports.minSatisfying,usn=Ct.exports.minVersion,psn=Ct.exports.gtr,hsn=Ct.exports.ltr,msn=Ct.exports.outside,gsn=Ct.exports.intersects,fsn=Ct.exports.SemVer,bsn=Ct.exports.Comparator,vsn=Ct.exports.Range;function eb(r,e,t,n,i,o){let s=[],a=[],l=[];if(!e){let M=r.filter(({identifier:H})=>i.every(oe=>oe.toLowerCase()!==H.id.toLowerCase()));return{local:{added:s,removed:a,updated:l},remote:M.length>0?{added:M,updated:[],removed:[],all:M}:null}}r=r.map(wL),e=e.map(wL),t=t?t.map(wL):null;let d=new Map,u=M=>{M.uuid&&d.set(M.id.toLowerCase(),M.uuid)};r.forEach(({identifier:M})=>u(M)),e.forEach(({identifier:M})=>u(M)),t?.forEach(({identifier:M})=>u(M)),n?.forEach(({identifier:M})=>u(M)),o?.forEach(M=>u(M));let p=M=>{let H=M.identifier.uuid||d.get(M.identifier.id.toLowerCase());return H?`uuid:${H}`:`id:${M.identifier.id.toLowerCase()}`},h=(M,H)=>(M.set(p(H),H),M),m=r.reduce(h,new Map),f=e.reduce(h,new Map),g=e.reduce((M,H)=>h(M,kn(H)),new Map),y=t?t.reduce(h,new Map):null,T=n.reduce(h,new Map),E=i.reduce((M,H)=>{let oe=d.get(H.toLowerCase());return M.add(oe?`uuid:${oe}`:`id:${H.toLowerCase()}`)},new Set),D=o?o.reduce((M,{id:H,uuid:oe})=>(oe=oe??d.get(H.toLowerCase()),M.add(oe?`uuid:${oe}`:`id:${H.toLowerCase()}`)),new Set):null,_=oE(m,f,E,!1);if(_.added.size>0||_.removed.size>0||_.updated.size>0){let M=oE(y,m,E,!1),H=oE(y,f,E,!0),oe=(ee,re,Fe,st)=>{let be,ae,fe;return re.installed?(be=st.pinned,fe=st.preRelease,be&&(ae=st.version)):(be=Fe.pinned,fe=Fe.preRelease,be&&(ae=Fe.version)),be===void 0&&(be=re.pinned,be&&(ae=re.version)),fe===void 0&&(fe=re.preRelease),{...st,installed:re.installed||Fe.installed,pinned:be,preRelease:fe,version:ae??(Fe.version&&(!re.installed||rE(Fe.version,re.version))?Fe.version:re.version),state:f6(re,Fe,y?.get(ee))}};for(let ee of H.removed.values()){let re=m.get(ee);if(!re)continue;let Fe=Rt(y?.get(ee)),st=D&&!D.has(ee)&&Fe.installed;re.installed&&st?a.push(re.identifier):g.set(ee,re)}for(let ee of H.added.values()){let re=Rt(f.get(ee)),Fe=m.get(ee);if(Fe){if(_.updated.has(ee)){let st=oe(ee,Fe,re,re);NV(Fe,re,!1,!1)||l.push(Zf(st,ee)),g.set(ee,st)}}else re.installed&&s.push(Zf(re,ee))}for(let ee of H.updated.values()){let re=Rt(f.get(ee)),Fe=Rt(y?.get(ee)),st=m.get(ee);if(st)if(D&&!D.has(ee)&&Fe.installed&&st.installed&&!re.installed)a.push(st.identifier);else{let ae=oe(ee,st,re,re);l.push(Zf(ae,ee)),g.set(ee,ae)}else re.installed&&s.push(Zf(re,ee))}for(let ee of M.added.values())H.added.has(ee)||g.set(ee,Rt(m.get(ee)));for(let ee of M.updated.values()){if(H.removed.has(ee)||H.updated.has(ee))continue;let re=Rt(m.get(ee)),Fe=Rt(f.get(ee));g.set(ee,oe(ee,re,Fe,re))}for(let ee of M.removed.values())H.updated.has(ee)||H.removed.has(ee)||T.has(ee)||Rt(f.get(ee)).installed&&D&&(D.has(ee)||!Rt(y?.get(ee)).installed||g.delete(ee))}let O=[],G=oE(f,g,new Set,!0),Z=G.added.size>0||G.updated.size>0||G.removed.size>0;return Z&&g.forEach((M,H)=>O.push(Zf(M,H))),{local:{added:s,removed:a,updated:l},remote:Z?{added:[...G.added].map(M=>g.get(M)),updated:[...G.updated].map(M=>g.get(M)),removed:[...G.removed].map(M=>f.get(M)),all:O}:null}}function oE(r,e,t,n){let i=r?[...r.keys()].filter(d=>!t.has(d)):[],o=[...e.keys()].filter(d=>!t.has(d)),s=o.filter(d=>!i.includes(d)).reduce((d,u)=>(d.add(u),d),new Set),a=i.filter(d=>!o.includes(d)).reduce((d,u)=>(d.add(u),d),new Set),l=new Set;for(let d of i){if(a.has(d))continue;let u=r.get(d),p=e.get(d);(!p||!NV(u,p,n,!0))&&l.add(d)}return{added:s,removed:a,updated:l}}function NV(r,e,t,n){return!(r.disabled!==e.disabled||!!r.isApplicationScoped!=!!e.isApplicationScoped||n&&r.installed!==e.installed||r.installed&&e.installed&&(r.preRelease!==e.preRelease||r.pinned!==e.pinned||e.pinned&&r.version!==e.version)||!b6(r.state,e.state)||t&&r.version!==e.version)}function f6(r,e,t){let n=r.state,i=e.state,o=t?.state;if(!e.version||n&&rE(r.version,e.version))return n;if(i&&rE(e.version,r.version)||!n)return i;if(!i)return n;let s=kn(n),a=o?CL(o,i):{added:Object.keys(i).reduce((d,u)=>(d.add(u),d),new Set),removed:new Set,updated:new Set},l=o?CL(o,n):{added:Object.keys(n).reduce((d,u)=>(d.add(u),d),new Set),removed:new Set,updated:new Set};for(let d of[...a.added.values(),...a.updated.values()])s[d]=i[d];for(let d of a.removed.values())l.updated.has(d)||delete s[d];return s}function CL(r,e){let t=Object.keys(r),n=Object.keys(e),i=n.filter(a=>!t.includes(a)).reduce((a,l)=>(a.add(l),a),new Set),o=t.filter(a=>!n.includes(a)).reduce((a,l)=>(a.add(l),a),new Set),s=new Set;for(let a of t){if(o.has(a))continue;let l=r[a],d=e[a];ii(l,d)||s.add(a)}return{added:i,removed:o,updated:s}}function b6(r={},e={}){let{added:t,removed:n,updated:i}=CL(r,e);return t.size===0&&n.size===0&&i.size===0}function wL(r){return{...r,disabled:!!r.disabled,installed:!!r.installed}}function Zf(r,e){let t={...r,identifier:{id:r.identifier.id,uuid:e.startsWith("uuid:")?e.substring(5):void 0},preRelease:!!r.preRelease,pinned:!!r.pinned};return r.disabled||delete t.disabled,r.installed||delete t.installed,r.state||delete t.state,r.isApplicationScoped||delete t.isApplicationScoped,t}var Rh=A("IIgnoredExtensionsManagementService"),sE=class{constructor(e){this.configurationService=e}hasToNeverSyncExtension(e){return this.getConfiguredIgnoredExtensions().includes(e.toLowerCase())}hasToAlwaysSyncExtension(e){return this.getConfiguredIgnoredExtensions().includes(`-${e.toLowerCase()}`)}updateIgnoredExtensions(e,t){let n=[...this.configurationService.getValue("settingsSync.ignoredExtensions")].map(i=>i.toLowerCase());return n=n.filter(i=>i!==e&&i!==`-${e}`),t&&n.push(e.toLowerCase()),this.configurationService.updateValue("settingsSync.ignoredExtensions",n.length?n:void 0,2)}updateSynchronizedExtensions(e,t){let n=[...this.configurationService.getValue("settingsSync.ignoredExtensions")].map(i=>i.toLowerCase());return n=n.filter(i=>i!==e&&i!==`-${e}`),t&&n.push(`-${e.toLowerCase()}`),this.configurationService.updateValue("settingsSync.ignoredExtensions",n.length?n:void 0,2)}getIgnoredExtensions(e){let t=e.filter(s=>s.isMachineScoped).map(s=>s.identifier.id.toLowerCase()),n=this.getConfiguredIgnoredExtensions().map(s=>s.toLowerCase()),i=[],o=[];if(Array.isArray(n))for(let s of n)s.startsWith("-")?o.push(s.substring(1)):i.push(s);return di([...t,...i].filter(s=>!o.includes(s)))}getConfiguredIgnoredExtensions(){let e=this.configurationService.inspect("settingsSync.ignoredExtensions").userValue;return e!==void 0||(e=this.configurationService.inspect("sync.ignoredExtensions").userValue,e!==void 0)?e:(this.configurationService.getValue("settingsSync.ignoredExtensions")||[]).map(t=>t.toLowerCase())}};sE=C([v(0,ke)],sE);var DL=A("IUserDataProfileStorageService"),aE=class extends P{constructor(t,n){super();this.storageService=n;t&&(this.storageServicesMap=this._register(new hr))}_serviceBrand;storageServicesMap;async readStorageData(t){return this.withProfileScopedStorageService(t,async n=>this.getItems(n))}async updateStorageData(t,n,i){return this.withProfileScopedStorageService(t,async o=>this.writeItems(o,n,i))}async withProfileScopedStorageService(t,n){if(this.storageService.hasScope(t))return n(this.storageService);let i=this.storageServicesMap?.get(t.id);if(!i){i=new kL(this.createStorageDatabase(t)),this.storageServicesMap?.set(t.id,i);try{await i.initialize()}catch(o){throw this.storageServicesMap?.has(t.id)?this.storageServicesMap.deleteAndDispose(t.id):i.dispose(),o}}try{let o=await n(i);return await i.flush(),o}finally{this.storageServicesMap?.has(t.id)||i.dispose()}}getItems(t){let n=new Map,i=o=>{for(let s of t.keys(0,o))n.set(s,{value:t.get(s,0),target:o})};return i(0),i(1),n}writeItems(t,n,i){t.storeAll(Array.from(n.entries()).map(([o,s])=>({key:o,value:s,scope:0,target:i})),!0)}};aE=C([v(1,Xe)],aE);var kL=class extends yI{constructor(t){super({flushInterval:100});this.profileStorageDatabase=t}profileStorage;async doInitialize(){let t=await this.profileStorageDatabase,n=new _g(t);return this._register(n.onDidChangeStorage(i=>{this.emitDidChangeValue(0,i)})),this._register(ie(()=>{n.close(),n.dispose(),Zh(t)&&t.dispose()})),this.profileStorage=n,this.profileStorage.init()}getStorage(t){return t===0?this.profileStorage:void 0}getLogDetails(){}async switchToProfile(){}async switchToWorkspace(){}hasScope(){return!1}};async function dE(r,e){let t=JSON.parse(r.content);if(r.version===1||r.version===2){let n=(await e.getInstalled(0)).filter(i=>i.isBuiltin);for(let i of t)r.version===1&&(i.enabled===!1&&(i.disabled=!0),delete i.enabled),r.version===2&&n.every(o=>!Hn(o.identifier,i.identifier))&&(i.installed=!0)}return t}function y6(r,e){return r.sort((t,n)=>!t.identifier.uuid&&n.identifier.uuid?-1:t.identifier.uuid&&!n.identifier.uuid?1:Vd(t.identifier.id,n.identifier.id)),e?qU(r,{}):JSON.stringify(r)}var lE=class extends Jc{constructor(t,n,i,o,s,a,l,d,u,p,h,m,f,g,y,T,E){super({syncResource:"extensions",profile:t},n,o,i,s,a,l,m,f,p,h,y);this.extensionManagementService=d;this.ignoredExtensionsManagementService=u;this.instantiationService=E;this.localExtensionsProvider=this.instantiationService.createInstance(tb),this._register(N.any(N.filter(this.extensionManagementService.onDidInstallExtensions,D=>D.some(({local:_})=>!!_)),N.filter(this.extensionManagementService.onDidUninstallExtension,D=>!D.error),N.filter(T.onDidChange,D=>D.valueChanges.some(({profile:_,changes:O})=>this.syncResource.profile.id===_.id&&O.some(G=>G.key===af))),g.onDidChangeExtensionStorageToSync)(()=>this.triggerLocalChange()))}version=6;previewResource=this.extUri.joinPath(this.syncPreviewFolder,"extensions.json");baseResource=this.previewResource.with({scheme:Qc,authority:"base"});localResource=this.previewResource.with({scheme:Qc,authority:"local"});remoteResource=this.previewResource.with({scheme:Qc,authority:"remote"});acceptedResource=this.previewResource.with({scheme:Qc,authority:"accepted"});localExtensionsProvider;async generateSyncPreview(t,n){let i=t.syncData?await dE(t.syncData,this.extensionManagementService):null,o=n?.skippedExtensions??[],s=n?.builtinExtensions??null,a=n?.syncData?await dE(n.syncData,this.extensionManagementService):null,{localExtensions:l,ignoredExtensions:d}=await this.localExtensionsProvider.getLocalExtensions(this.syncResource.profile);i?this.logService.trace(`${this.syncResourceLogLabel}: Merging remote extensions with local extensions...`):this.logService.trace(`${this.syncResourceLogLabel}: Remote extensions does not exist. Synchronizing extensions for the first time.`);let{local:u,remote:p}=eb(l,i,a,o,d,s),h={local:u,remote:p,content:this.getPreviewContent(l,u.added,u.updated,u.removed),localChange:u.added.length>0||u.removed.length>0||u.updated.length>0?2:0,remoteChange:p!==null?2:0},m=this.stringify(l,!1);return[{skippedExtensions:o,builtinExtensions:s,baseResource:this.baseResource,baseContent:a?this.stringify(a,!1):m,localResource:this.localResource,localContent:m,localExtensions:l,remoteResource:this.remoteResource,remoteExtensions:i,remoteContent:i?this.stringify(i,!1):null,previewResource:this.previewResource,previewResult:h,localChange:h.localChange,remoteChange:h.remoteChange,acceptedResource:this.acceptedResource}]}async hasRemoteChanged(t){let n=t.syncData?await dE(t.syncData,this.extensionManagementService):null,{localExtensions:i,ignoredExtensions:o}=await this.localExtensionsProvider.getLocalExtensions(this.syncResource.profile),{remote:s}=eb(i,n,n,t.skippedExtensions||[],o,t.builtinExtensions||[]);return s!==null}getPreviewContent(t,n,i,o){let s=[...n,...i],a=new Set,l=d=>{a.add(d.id.toLowerCase()),d.uuid&&a.add(d.uuid)};s.forEach(({identifier:d})=>l(d)),o.forEach(l);for(let d of t)a.has(d.identifier.id.toLowerCase())||d.identifier.uuid&&a.has(d.identifier.uuid)||s.push(d);return this.stringify(s,!1)}async getMergeResult(t,n){return{...t.previewResult,hasConflicts:!1}}async getAcceptResult(t,n,i,o){if(this.extUri.isEqual(n,this.localResource))return this.acceptLocal(t);if(this.extUri.isEqual(n,this.remoteResource))return this.acceptRemote(t);if(this.extUri.isEqual(n,this.previewResource))return t.previewResult;throw new Error(`Invalid Resource: ${n.toString()}`)}async acceptLocal(t){let n=await this.extensionManagementService.getInstalled(void 0,this.syncResource.profile.extensionsResource),i=this.ignoredExtensionsManagementService.getIgnoredExtensions(n),o=eb(t.localExtensions,null,null,t.skippedExtensions,i,t.builtinExtensions),{local:s,remote:a}=o;return{content:t.localContent,local:s,remote:a,localChange:s.added.length>0||s.removed.length>0||s.updated.length>0?2:0,remoteChange:a!==null?2:0}}async acceptRemote(t){let n=await this.extensionManagementService.getInstalled(void 0,this.syncResource.profile.extensionsResource),i=this.ignoredExtensionsManagementService.getIgnoredExtensions(n),o=t.remoteContent?JSON.parse(t.remoteContent):null;if(o!==null){let s=eb(t.localExtensions,o,t.localExtensions,[],i,t.builtinExtensions),{local:a,remote:l}=s;return{content:t.remoteContent,local:a,remote:l,localChange:a.added.length>0||a.removed.length>0||a.updated.length>0?2:0,remoteChange:l!==null?2:0}}else return{content:t.remoteContent,local:{added:[],removed:[],updated:[]},remote:null,localChange:0,remoteChange:0}}async applyResult(t,n,i,o){let{skippedExtensions:s,builtinExtensions:a,localExtensions:l}=i[0][0],{local:d,remote:u,localChange:p,remoteChange:h}=i[0][1];if(p===0&&h===0&&this.logService.info(`${this.syncResourceLogLabel}: No changes found during synchronizing extensions.`),p!==0&&(await this.backupLocal(JSON.stringify(l)),s=await this.localExtensionsProvider.updateLocalExtensions(d.added,d.removed,d.updated,s,this.syncResource.profile)),u){this.logService.trace(`${this.syncResourceLogLabel}: Updating remote extensions...`);let m=JSON.stringify(u.all);t=await this.updateRemoteUserData(m,o?null:t.ref),this.logService.info(`${this.syncResourceLogLabel}: Updated remote extensions.${u.added.length?` Added: ${JSON.stringify(u.added.map(f=>f.identifier.id))}.`:""}${u.updated.length?` Updated: ${JSON.stringify(u.updated.map(f=>f.identifier.id))}.`:""}${u.removed.length?` Removed: ${JSON.stringify(u.removed.map(f=>f.identifier.id))}.`:""}`)}n?.ref!==t.ref&&(this.logService.trace(`${this.syncResourceLogLabel}: Updating last synchronized extensions...`),a=this.computeBuiltinExtensions(l,a),await this.updateLastSyncUserData(t,{skippedExtensions:s,builtinExtensions:a}),this.logService.info(`${this.syncResourceLogLabel}: Updated last synchronized extensions.${s.length?` Skipped: ${JSON.stringify(s.map(m=>m.identifier.id))}.`:""}`))}computeBuiltinExtensions(t,n){let i=new Set,o=[];for(let s of t)i.add(s.identifier.id.toLowerCase()),s.installed||o.push(s.identifier);if(n)for(let s of n)i.has(s.id.toLowerCase())||o.push(s);return o}async resolveContent(t){if(this.extUri.isEqual(this.remoteResource,t)||this.extUri.isEqual(this.baseResource,t)||this.extUri.isEqual(this.localResource,t)||this.extUri.isEqual(this.acceptedResource,t)){let n=await this.resolvePreviewContent(t);return n&&this.stringify(JSON.parse(n),!0)}return null}stringify(t,n){return y6(t,n)}async hasLocalData(){try{let{localExtensions:t}=await this.localExtensionsProvider.getLocalExtensions(this.syncResource.profile);if(t.some(n=>n.installed||n.disabled))return!0}catch{}return!1}};lE=C([v(2,Qt),v(3,dt),v(4,Xe),v(5,wd),v(6,Dh),v(7,mo),v(8,Rh),v(9,Fo),v(10,ke),v(11,Cd),v(12,Ot),v(13,_V),v(14,Ln),v(15,DL),v(16,_e)],lE);var tb=class{constructor(e,t,n,i,o,s){this.extensionManagementService=e;this.userDataProfileStorageService=t;this.extensionGalleryService=n;this.ignoredExtensionsManagementService=i;this.instantiationService=o;this.logService=s}async getLocalExtensions(e){let t=await this.extensionManagementService.getInstalled(void 0,e.extensionsResource),n=this.ignoredExtensionsManagementService.getIgnoredExtensions(t);return{localExtensions:await this.withProfileScopedServices(e,async(o,s)=>{let a=o.getDisabledExtensions();return t.map(l=>{let{identifier:d,isBuiltin:u,manifest:p,preRelease:h,pinned:m,isApplicationScoped:f}=l,g={identifier:d,preRelease:h,version:p.version,pinned:!!m};f&&!mO(p)&&(g.isApplicationScoped=f),a.some(y=>Hn(y,d))&&(g.disabled=!0),u||(g.installed=!0);try{let y=s.getKeysForSync({id:d.id,version:p.version});if(y){let T=s.getExtensionState(l,!0)||{};g.state=Object.keys(T).reduce((E,D)=>(y.includes(D)&&(E[D]=T[D]),E),{})}}catch(y){this.logService.info(`${nE("extensions",e)}: Error while parsing extension state`,Ia(y))}return g})}),ignoredExtensions:n}}async updateLocalExtensions(e,t,n,i,o){let s=nE("extensions",o),a=[],l=new Map,d=[],u=[],p=await this.extensionManagementService.getInstalled(void 0,o.extensionsResource);if((e.length||n.length)&&await this.withProfileScopedServices(o,async(f,g)=>{await Ci.settled([...e,...n].map(async y=>{let T=p.find(_=>Hn(_.identifier,y.identifier));if(T&&T.isBuiltin){y.state&&T.manifest.version===y.version&&this.updateExtensionState(y.state,T,T.manifest.version,g),f.getDisabledExtensions().some(O=>Hn(O,y.identifier))!==!!y.disabled&&(y.disabled?(this.logService.trace(`${s}: Disabling extension...`,y.identifier.id),await f.disableExtension(y.identifier),this.logService.info(`${s}: Disabled extension`,y.identifier.id)):(this.logService.trace(`${s}: Enabling extension...`,y.identifier.id),await f.enableExtension(y.identifier),this.logService.info(`${s}: Enabled extension`,y.identifier.id))),d.push(y.identifier);return}let E=y.pinned?y.version:void 0,D=(await this.extensionGalleryService.getExtensions([{...y.identifier,version:E,preRelease:E?void 0:y.preRelease}],rt.None))[0];if(y.state&&(T?T.manifest.version===y.version:D)&&this.updateExtensionState(y.state,T||D,T?.manifest.version,g),D)try{f.getDisabledExtensions().some(O=>Hn(O,y.identifier))!==!!y.disabled&&(y.disabled?(this.logService.trace(`${s}: Disabling extension...`,y.identifier.id,D.version),await f.disableExtension(D.identifier),this.logService.info(`${s}: Disabled extension`,y.identifier.id,D.version)):(this.logService.trace(`${s}: Enabling extension...`,y.identifier.id,D.version),await f.enableExtension(D.identifier),this.logService.info(`${s}: Enabled extension`,y.identifier.id,D.version))),(!T||T.preRelease!==y.preRelease||T.pinned!==y.pinned||E&&T.manifest.version!==E)&&(await this.extensionManagementService.canInstall(D)?(a.push({extension:D,options:{isMachineScoped:!1,donotIncludePackAndDependencies:!0,installGivenVersion:y.pinned&&!!y.version,pinned:y.pinned,installPreReleaseVersion:y.preRelease,profileLocation:o.extensionsResource,isApplicationScoped:y.isApplicationScoped,context:{[a2]:!0,[l2]:"settingsSync"}}}),l.set(D.identifier.id.toLowerCase(),y)):(this.logService.info(`${s}: Skipped synchronizing extension because it cannot be installed.`,D.displayName||D.identifier.id),u.push(y)))}catch(_){u.push(y),this.logService.error(_),this.logService.info(`${s}: Skipped synchronizing extension`,D.displayName||D.identifier.id)}else u.push(y),this.logService.info(`${s}: Skipped synchronizing extension because the extension is not found.`,y.identifier.id)}))}),t.length){let f=p.filter(({identifier:g,isBuiltin:y})=>!y&&t.some(T=>Hn(g,T)));await Ci.settled(f.map(async g=>{this.logService.trace(`${s}: Uninstalling local extension...`,g.identifier.id),await this.extensionManagementService.uninstall(g,{donotIncludePack:!0,donotCheckDependents:!0,profileLocation:o.extensionsResource}),this.logService.info(`${s}: Uninstalled local extension.`,g.identifier.id),d.push(g.identifier)}))}let h=await this.extensionManagementService.installGalleryExtensions(a);for(let{identifier:f,local:g,error:y,source:T}of h){let E=T;if(g)this.logService.info(`${s}: Installed extension.`,f.id,E.version),d.push(f);else{let D=l.get(f.id.toLowerCase());D&&(u.push(D),this.logService.info(`${s}: Skipped synchronizing extension`,E.displayName||E.identifier.id)),y instanceof kS&&["Incompatible","IncompatibleApi","IncompatibleTargetPlatform"].includes(y.code)?this.logService.info(`${s}: Skipped synchronizing extension because the compatible extension is not found.`,E.displayName||E.identifier.id):y&&this.logService.error(y)}}let m=[];for(let f of i)d.some(g=>Hn(g,f.identifier))||m.push(f);for(let f of u)m.some(g=>Hn(g.identifier,f.identifier))||m.push(f);return m}updateExtensionState(e,t,n,i){let o=i.getExtensionState(t,!0)||{},s=n?i.getKeysForSync({id:t.identifier.id,version:n}):void 0;s?s.forEach(a=>{o[a]=e[a]}):Object.keys(e).forEach(a=>o[a]=e[a]),i.setExtensionState(t,o,!0)}async withProfileScopedServices(e,t){return this.userDataProfileStorageService.withProfileScopedStorageService(e,async n=>{let i=new Q,o=i.add(this.instantiationService.createChild(new _a([Xe,n]))),s=i.add(o.createInstance(Ch)),a=i.add(o.createInstance(Pr));try{return await t(s,a)}finally{i.dispose()}})}};tb=C([v(0,mo),v(1,DL),v(2,DS),v(3,Rh),v(4,_e),v(5,Fo)],tb);var Lh=class extends _h{constructor(t,n,i,o,s,a,l,d){super("extensions",o,s,a,i,l,d);this.extensionManagementService=t;this.ignoredExtensionsManagementService=n}async parseExtensions(t){return t.syncData?await dE(t.syncData,this.extensionManagementService):null}generatePreview(t,n){let i=[],o=[],s=[];for(let a of t){if(this.ignoredExtensionsManagementService.hasToNeverSyncExtension(a.identifier.id))continue;let l=n.find(d=>Hn(d.identifier,a.identifier));l?(i.push(l),a.disabled&&s.push(a.identifier)):a.installed&&(o.push({...a.identifier,preRelease:!!a.preRelease}),a.disabled&&s.push(a.identifier))}return{installedExtensions:i,newExtensions:o,disabledExtensions:s,remoteExtensions:t}}};Lh=C([v(0,mo),v(1,Rh),v(2,dt),v(3,Yl),v(4,Qt),v(5,Et),v(6,Xe),v(7,Ln)],Lh);var FV="configurationSync.store",_L="sync.previous.store",RL="sync.donot-make-requests-until",cE="sync.user-session-id",LL="sync.machine-session-id",I6=100,S6=1e3*60*5,nb=class extends P{constructor(t,n,i){super();this.productService=t;this.configurationService=n;this.storageService=i;this.updateUserDataSyncStore();let o=this._register(new Q);this._register(N.filter(i.onDidChangeValue(-1,eE,o),()=>this.userDataSyncStoreType!==this.userDataSyncStore?.type,o)(()=>this.updateUserDataSyncStore()))}_serviceBrand;_onDidChangeUserDataSyncStore=this._register(new x);onDidChangeUserDataSyncStore=this._onDidChangeUserDataSyncStore.event;_userDataSyncStore;get userDataSyncStore(){return this._userDataSyncStore}get userDataSyncStoreType(){return this.storageService.get(eE,-1)}set userDataSyncStoreType(t){this.storageService.store(eE,t,-1,_t?0:1)}updateUserDataSyncStore(){this._userDataSyncStore=this.toUserDataSyncStore(this.productService[FV]),this._onDidChangeUserDataSyncStore.fire()}toUserDataSyncStore(t){if(t&&(t=_t&&t.web?{...t,...t.web}:t,lt(t.url)&&fn(t.authenticationProviders)&&Object.keys(t.authenticationProviders).every(n=>Array.isArray(t.authenticationProviders[n].scopes)))){let n=t,i=!!n.canSwitch,o=n.url===n.insidersUrl?"insiders":"stable",s=(i?this.userDataSyncStoreType:void 0)||o,a=s==="insiders"?n.insidersUrl:s==="stable"?n.stableUrl:n.url;return{url:W.parse(a),type:s,defaultType:o,defaultUrl:W.parse(n.url),stableUrl:W.parse(n.stableUrl),insidersUrl:W.parse(n.insidersUrl),canSwitch:i,authenticationProviders:Object.keys(n.authenticationProviders).reduce((l,d)=>(l.push({id:d,scopes:n.authenticationProviders[d].scopes}),l),[])}}}};nb=C([v(0,gi),v(1,ke),v(2,Xe)],nb);var uE=class extends nb{previousConfigurationSyncStore;constructor(e,t,n){super(e,t,n);let i=this.storageService.get(_L,-1);i&&(this.previousConfigurationSyncStore=JSON.parse(i));let o=this.productService[FV];o?this.storageService.store(_L,JSON.stringify(o),-1,1):this.storageService.remove(_L,-1)}async switch(e){e!==this.userDataSyncStoreType&&(this.userDataSyncStoreType=e,this.updateUserDataSyncStore())}async getPreviousUserDataSyncStore(){return this.toUserDataSyncStore(this.previousConfigurationSyncStore)}};uE=C([v(0,gi),v(1,ke),v(2,Xe)],uE);var Zc=class extends P{constructor(t,n,i,o,s,a,l){super();this.requestService=i;this.logService=o;this.storageService=l;this.updateUserDataSyncStoreUrl(t),this.commonHeadersPromise=kh(s,a,l).then(d=>{let u={"X-Client-Name":`${n.applicationName}${_t?"-web":""}`,"X-Client-Version":n.version};return n.commit&&(u["X-Client-Commit"]=n.commit),u}),this.session=new PL(I6,S6,this.requestService,this.logService),this.initDonotMakeRequestsUntil(),this._register(ie(()=>{this.resetDonotMakeRequestsUntilPromise&&(this.resetDonotMakeRequestsUntilPromise.cancel(),this.resetDonotMakeRequestsUntilPromise=void 0)}))}userDataSyncStoreUrl;authToken;commonHeadersPromise;session;_onTokenFailed=this._register(new x);onTokenFailed=this._onTokenFailed.event;_onTokenSucceed=this._register(new x);onTokenSucceed=this._onTokenSucceed.event;_donotMakeRequestsUntil=void 0;get donotMakeRequestsUntil(){return this._donotMakeRequestsUntil}_onDidChangeDonotMakeRequestsUntil=this._register(new x);onDidChangeDonotMakeRequestsUntil=this._onDidChangeDonotMakeRequestsUntil.event;setAuthToken(t,n){this.authToken={token:t,type:n}}updateUserDataSyncStoreUrl(t){this.userDataSyncStoreUrl=t?Be(t,"v1"):void 0}initDonotMakeRequestsUntil(){let t=this.storageService.getNumber(RL,-1);t&&Date.now()<t&&this.setDonotMakeRequestsUntil(new Date(t))}resetDonotMakeRequestsUntilPromise=void 0;setDonotMakeRequestsUntil(t){this._donotMakeRequestsUntil?.getTime()!==t?.getTime()&&(this._donotMakeRequestsUntil=t,this.resetDonotMakeRequestsUntilPromise&&(this.resetDonotMakeRequestsUntilPromise.cancel(),this.resetDonotMakeRequestsUntilPromise=void 0),this._donotMakeRequestsUntil?(this.storageService.store(RL,this._donotMakeRequestsUntil.getTime(),-1,1),this.resetDonotMakeRequestsUntilPromise=Eo(n=>Cn(this._donotMakeRequestsUntil.getTime()-Date.now(),n).then(()=>this.setDonotMakeRequestsUntil(void 0))),this.resetDonotMakeRequestsUntilPromise.then(null,n=>null)):this.storageService.remove(RL,-1),this._onDidChangeDonotMakeRequestsUntil.fire())}async getAllCollections(t={}){if(!this.userDataSyncStoreUrl)throw new Error("No settings sync store url configured.");let n=Be(this.userDataSyncStoreUrl,"collection").toString();t={...t},t["Content-Type"]="application/json";let i=await this.request(n,{type:"GET",headers:t},[],rt.None);return(await c1(i))?.map(({id:o})=>o)||[]}async createCollection(t={}){if(!this.userDataSyncStoreUrl)throw new Error("No settings sync store url configured.");let n=Be(this.userDataSyncStoreUrl,"collection").toString();t={...t},t["Content-Type"]=Xo.text;let i=await this.request(n,{type:"POST",headers:t},[],rt.None),o=await rf(i);if(!o)throw new rn("Server did not return the collection id",n,"NoCollection",i.res.statusCode,i.res.headers[fa]);return o}async deleteCollection(t,n={}){if(!this.userDataSyncStoreUrl)throw new Error("No settings sync store url configured.");let i=t?Be(this.userDataSyncStoreUrl,"collection",t).toString():Be(this.userDataSyncStoreUrl,"collection").toString();n={...n},await this.request(i,{type:"DELETE",headers:n},[],rt.None)}async getAllResourceRefs(t,n){if(!this.userDataSyncStoreUrl)throw new Error("No settings sync store url configured.");let i=this.getResourceUrl(this.userDataSyncStoreUrl,n,t),o={},s=await this.request(i.toString(),{type:"GET",headers:o},[],rt.None);return(await c1(s)||[]).map(({url:l,created:d})=>({ref:Su(i,i.with({path:l})),created:d*1e3}))}async resolveResourceContent(t,n,i,o={}){if(!this.userDataSyncStoreUrl)throw new Error("No settings sync store url configured.");let s=Be(this.getResourceUrl(this.userDataSyncStoreUrl,i,t),n).toString();o={...o},o["Cache-Control"]="no-cache";let a=await this.request(s,{type:"GET",headers:o},[],rt.None);return await rf(a)}async deleteResource(t,n,i){if(!this.userDataSyncStoreUrl)throw new Error("No settings sync store url configured.");let o=n!==null?Be(this.getResourceUrl(this.userDataSyncStoreUrl,i,t),n).toString():this.getResourceUrl(this.userDataSyncStoreUrl,i,t).toString(),s={};await this.request(o,{type:"DELETE",headers:s},[],rt.None)}async deleteResources(){if(!this.userDataSyncStoreUrl)throw new Error("No settings sync store url configured.");let t=Be(this.userDataSyncStoreUrl,"resource").toString(),n={"Content-Type":Xo.text};await this.request(t,{type:"DELETE",headers:n},[],rt.None)}async readResource(t,n,i,o={}){if(!this.userDataSyncStoreUrl)throw new Error("No settings sync store url configured.");let s=Be(this.getResourceUrl(this.userDataSyncStoreUrl,i,t),"latest").toString();o={...o},o["Cache-Control"]="no-cache",n&&(o["If-None-Match"]=n.ref);let a=await this.request(s,{type:"GET",headers:o},[304],rt.None),l=null;if(a.res.statusCode===304&&(l=n),l===null){let d=a.res.headers.etag;if(!d)throw new rn("Server did not return the ref",s,"NoRef",a.res.statusCode,a.res.headers[fa]);let u=await rf(a);if(!u&&a.res.statusCode===304)throw new rn("Empty response",s,"EmptyResponse",a.res.statusCode,a.res.headers[fa]);l={ref:d,content:u}}return l}async writeResource(t,n,i,o,s={}){if(!this.userDataSyncStoreUrl)throw new Error("No settings sync store url configured.");let a=this.getResourceUrl(this.userDataSyncStoreUrl,o,t).toString();s={...s},s["Content-Type"]=Xo.text,i&&(s["If-Match"]=i);let l=await this.request(a,{type:"POST",data:n,headers:s},[],rt.None),d=l.res.headers.etag;if(!d)throw new rn("Server did not return the ref",a,"NoRef",l.res.statusCode,l.res.headers[fa]);return d}async manifest(t,n={}){if(!this.userDataSyncStoreUrl)throw new Error("No settings sync store url configured.");let i=Be(this.userDataSyncStoreUrl,"manifest").toString();n={...n},n["Content-Type"]="application/json",t&&(n["If-None-Match"]=t.ref);let o=await this.request(i,{type:"GET",headers:n},[304],rt.None),s=null;if(o.res.statusCode===304&&(s=t),!s){let l=o.res.headers.etag;if(!l)throw new rn("Server did not return the ref",i,"NoRef",o.res.statusCode,o.res.headers[fa]);let d=await rf(o);if(!d&&o.res.statusCode===304)throw new rn("Empty response",i,"EmptyResponse",o.res.statusCode,o.res.headers[fa]);d&&(s={...JSON.parse(d),ref:l})}let a=this.storageService.get(cE,-1);return a&&s&&a!==s.session&&this.clearSession(),s===null&&a&&this.clearSession(),s&&this.storageService.store(cE,s.session,-1,1),s}async clear(){if(!this.userDataSyncStoreUrl)throw new Error("No settings sync store url configured.");await this.deleteCollection(),await this.deleteResources(),this.clearSession()}async getActivityData(){if(!this.userDataSyncStoreUrl)throw new Error("No settings sync store url configured.");let t=Be(this.userDataSyncStoreUrl,"download").toString(),n={},i=await this.request(t,{type:"GET",headers:n},[],rt.None);if(!Kp(i))throw new rn("Server returned "+i.res.statusCode,t,"EmptyResponse",i.res.statusCode,i.res.headers[fa]);if(IS(i))throw new rn("Empty response",t,"EmptyResponse",i.res.statusCode,i.res.headers[fa]);return i.stream}getResourceUrl(t,n,i){return n?Be(t,"collection",n,"resource",i):Be(t,"resource",i)}clearSession(){this.storageService.remove(cE,-1),this.storageService.remove(LL,-1)}async request(t,n,i,o){if(!this.authToken)throw new rn("No Auth Token Available",t,"Unauthorized",void 0,void 0);if(this._donotMakeRequestsUntil&&Date.now()<this._donotMakeRequestsUntil.getTime())throw new rn(`${n.type} request '${t}' failed because of too many requests (429).`,t,"TooManyRequestsAndRetryAfter",void 0,void 0);this.setDonotMakeRequestsUntil(void 0);let s=await this.commonHeadersPromise;n.headers={...n.headers||{},...s,"X-Account-Type":this.authToken.type,authorization:`Bearer ${this.authToken.token}`},this.addSessionHeaders(n.headers),this.logService.trace("Sending request to server",{url:t,type:n.type,headers:{...n.headers,authorization:void 0}});let a;try{a=await this.session.request(t,n,o)}catch(h){if(!(h instanceof rn)){let m="RequestFailed",f=Ia(h).toLowerCase();f.includes("xhr timeout")?m="RequestTimeout":f.includes("protocol")&&f.includes("not supported")?m="RequestProtocolNotSupported":f.includes("request path contains unescaped characters")?m="RequestPathNotEscaped":f.includes("headers must be an object")?m="RequestHeadersNotObject":nu(h)&&(m="RequestCanceled"),h=new rn(`Connection refused for the request '${t}'.`,t,m,void 0,void 0)}throw this.logService.info("Request failed",t),h}let l=a.res.headers[fa],d={url:t,status:a.res.statusCode,"execution-id":n.headers[AV],"operation-id":l},u=Kp(a)||a.res.statusCode&&i.includes(a.res.statusCode),p="";if(u?this.logService.trace("Request succeeded",d):(p=await nf(a)||"",this.logService.info("Request failed",d,p)),a.res.statusCode===401||a.res.statusCode===403){if(this.authToken=void 0,a.res.statusCode===401)throw this._onTokenFailed.fire("Unauthorized"),new rn(`${n.type} request '${t}' failed because of Unauthorized (401).`,t,"Unauthorized",a.res.statusCode,l);if(a.res.statusCode===403)throw this._onTokenFailed.fire("Forbidden"),new rn(`${n.type} request '${t}' failed because the access is forbidden (403).`,t,"Forbidden",a.res.statusCode,l)}if(this._onTokenSucceed.fire(),a.res.statusCode===404)throw new rn(`${n.type} request '${t}' failed because the requested resource is not found (404).`,t,"NotFound",a.res.statusCode,l);if(a.res.statusCode===405)throw new rn(`${n.type} request '${t}' failed because the requested endpoint is not found (405). ${p}`,t,"MethodNotFound",a.res.statusCode,l);if(a.res.statusCode===409)throw new rn(`${n.type} request '${t}' failed because of Conflict (409). There is new data for this resource. Make the request again with latest data.`,t,"Conflict",a.res.statusCode,l);if(a.res.statusCode===410)throw new rn(`${n.type} request '${t}' failed because the requested resource is not longer available (410).`,t,"Gone",a.res.statusCode,l);if(a.res.statusCode===412)throw new rn(`${n.type} request '${t}' failed because of Precondition Failed (412). There is new data for this resource. Make the request again with latest data.`,t,"PreconditionFailed",a.res.statusCode,l);if(a.res.statusCode===413)throw new rn(`${n.type} request '${t}' failed because of too large payload (413).`,t,"TooLarge",a.res.statusCode,l);if(a.res.statusCode===426)throw new rn(`${n.type} request '${t}' failed with status Upgrade Required (426). Please upgrade the client and try again.`,t,"UpgradeRequired",a.res.statusCode,l);if(a.res.statusCode===429){let h=a.res.headers["retry-after"];throw h?(this.setDonotMakeRequestsUntil(new Date(Date.now()+parseInt(h)*1e3)),new rn(`${n.type} request '${t}' failed because of too many requests (429).`,t,"TooManyRequestsAndRetryAfter",a.res.statusCode,l)):new rn(`${n.type} request '${t}' failed because of too many requests (429).`,t,"RemoteTooManyRequests",a.res.statusCode,l)}if(!u)throw new rn("Server returned "+a.res.statusCode,t,"Unknown",a.res.statusCode,l);return a}addSessionHeaders(t){let n=this.storageService.get(LL,-1);n===void 0&&(n=In(),this.storageService.store(LL,n,-1,1)),t["X-Machine-Session-Id"]=n;let i=this.storageService.get(cE,-1);i!==void 0&&(t["X-User-Session-Id"]=i)}};Zc=C([v(1,gi),v(2,tf),v(3,Fo),v(4,Qt),v(5,dt),v(6,Xe)],Zc);var pE=class extends Zc{_serviceBrand;constructor(e,t,n,i,o,s,a){super(e.userDataSyncStore?.url,t,n,i,o,s,a),this._register(e.onDidChangeUserDataSyncStore(()=>this.updateUserDataSyncStoreUrl(e.userDataSyncStore?.url)))}};pE=C([v(0,ZT),v(1,gi),v(2,tf),v(3,Fo),v(4,Qt),v(5,dt),v(6,Xe)],pE);var PL=class{constructor(e,t,n,i){this.limit=e;this.interval=t;this.requestService=n;this.logService=i}requests=[];startTime=void 0;request(e,t,n){if(this.isExpired()&&this.reset(),t.url=e,this.requests.length>=this.limit)throw this.logService.info("Too many requests",...this.requests),new rn(`Too many requests. Only ${this.limit} requests allowed in ${this.interval/(1e3*60)} minutes.`,e,"LocalTooManyRequests",void 0,void 0);return this.startTime=this.startTime||new Date,this.requests.push(e),this.requestService.request(t,n)}isExpired(){return this.startTime!==void 0&&new Date().getTime()-this.startTime.getTime()>this.interval}reset(){this.requests=[],this.startTime=void 0}};var BV=A("IAuthenticationService"),sdn=A("IAuthenticationExtensionsService");function UV(r){return r.scheme!==le.file&&r.scheme!==le.vscodeRemote}var hE=A("workspaceTrustEnablementService"),VV=A("workspaceTrustManagementService");var WV=A("workspaceTrustRequestService");var x6="security.workspace.trust.enabled";var zV="security.workspace.trust.untrustedFiles",T6="security.workspace.trust.emptyWindow",HV="extensions.supportUntrustedWorkspaces",E6="content.trust.model.key",AL=class{constructor(e,t,n){this.originalWorkspace=e;this.canonicalFolderUris=t;this.canonicalConfiguration=n}get folders(){return this.originalWorkspace.folders.map((e,t)=>({index:e.index,name:e.name,toResource:e.toResource,uri:this.canonicalFolderUris[t]}))}get transient(){return this.originalWorkspace.transient}get configuration(){return this.canonicalConfiguration??this.originalWorkspace.configuration}get id(){return this.originalWorkspace.id}},mE=class extends P{constructor(t,n){super();this.configurationService=t;this.environmentService=n}_serviceBrand;isWorkspaceTrustEnabled(){return this.environmentService.disableWorkspaceTrust?!1:!!this.configurationService.getValue(x6)}};mE=C([v(0,ke),v(1,uo)],mE);var gE=class extends P{constructor(t,n,i,o,s,a,l,d){super();this.configurationService=t;this.remoteAuthorityResolverService=n;this.storageService=i;this.uriIdentityService=o;this.environmentService=s;this.workspaceService=a;this.workspaceTrustEnablementService=l;this.fileService=d;this._canonicalUrisResolved=!1,this._canonicalWorkspace=this.workspaceService.getWorkspace(),{promise:this._workspaceResolvedPromise,resolve:this._workspaceResolvedPromiseResolve}=km(),{promise:this._workspaceTrustInitializedPromise,resolve:this._workspaceTrustInitializedPromiseResolve}=km(),this._storedTrustState=new ML(_t&&this.isEmptyWorkspace()?void 0:this.storageService),this._trustTransitionManager=this._register(new OL),this._trustStateInfo=this.loadTrustInfo(),this._isTrusted=this.calculateWorkspaceTrust(),this.initializeWorkspaceTrust(),this.registerListeners()}_serviceBrand;storageKey=E6;_workspaceResolvedPromise;_workspaceResolvedPromiseResolve;_workspaceTrustInitializedPromise;_workspaceTrustInitializedPromiseResolve;_onDidChangeTrust=this._register(new x);onDidChangeTrust=this._onDidChangeTrust.event;_onDidChangeTrustedFolders=this._register(new x);onDidChangeTrustedFolders=this._onDidChangeTrustedFolders.event;_canonicalStartupFiles=[];_canonicalWorkspace;_canonicalUrisResolved;_isTrusted;_trustStateInfo;_remoteAuthority;_storedTrustState;_trustTransitionManager;initializeWorkspaceTrust(){this.resolveCanonicalUris().then(async()=>{this._canonicalUrisResolved=!0,await this.updateWorkspaceTrust()}).finally(()=>{this._workspaceResolvedPromiseResolve(),this.environmentService.remoteAuthority||this._workspaceTrustInitializedPromiseResolve()}),this.environmentService.remoteAuthority&&this.remoteAuthorityResolverService.resolveAuthority(this.environmentService.remoteAuthority).then(async t=>{this._remoteAuthority=t,await this.fileService.activateProvider(le.vscodeRemote),await this.updateWorkspaceTrust()}).finally(()=>{this._workspaceTrustInitializedPromiseResolve()}),this.isEmptyWorkspace()&&this._workspaceTrustInitializedPromise.then(()=>{this._storedTrustState.isEmptyWorkspaceTrusted===void 0&&(this._storedTrustState.isEmptyWorkspaceTrusted=this.isWorkspaceTrusted())})}registerListeners(){this._register(this.workspaceService.onDidChangeWorkspaceFolders(async()=>await this.updateWorkspaceTrust())),this._register(this.storageService.onDidChangeValue(-1,this.storageKey,this._register(new Q))(async()=>{JSON.stringify(this._trustStateInfo)!==JSON.stringify(this.loadTrustInfo())&&(this._trustStateInfo=this.loadTrustInfo(),this._onDidChangeTrustedFolders.fire(),await this.updateWorkspaceTrust())}))}async getCanonicalUri(t){let n=t;if(this.environmentService.remoteAuthority&&t.scheme===le.vscodeRemote)n=await this.remoteAuthorityResolverService.getCanonicalURI(t);else if(t.scheme==="vscode-vfs"){let i=t.authority.indexOf("+");i!==-1&&(n=t.with({authority:t.authority.substr(0,i)}))}return n.with({query:null,fragment:null})}async resolveCanonicalUris(){let t=[];if(this.environmentService.filesToOpenOrCreate&&t.push(...this.environmentService.filesToOpenOrCreate),this.environmentService.filesToDiff&&t.push(...this.environmentService.filesToDiff),this.environmentService.filesToMerge&&t.push(...this.environmentService.filesToMerge),t.length){let s=t.filter(l=>!!l.fileUri).map(l=>l.fileUri),a=await Promise.all(s.map(l=>this.getCanonicalUri(l)));this._canonicalStartupFiles.push(...a.filter(l=>this._canonicalStartupFiles.every(d=>!this.uriIdentityService.extUri.isEqual(l,d))))}let n=this.workspaceService.getWorkspace().folders.map(s=>s.uri),i=await Promise.all(n.map(s=>this.getCanonicalUri(s))),o=this.workspaceService.getWorkspace().configuration;o&&oC(o,this.environmentService)&&(o=await this.getCanonicalUri(o)),this._canonicalWorkspace=new AL(this.workspaceService.getWorkspace(),i,o)}loadTrustInfo(){let t=this.storageService.get(this.storageKey,-1),n;try{t&&(n=JSON.parse(t))}catch{}return n||(n={uriTrustInfo:[]}),n.uriTrustInfo||(n.uriTrustInfo=[]),n.uriTrustInfo=n.uriTrustInfo.map(i=>({uri:W.revive(i.uri),trusted:i.trusted})),n.uriTrustInfo=n.uriTrustInfo.filter(i=>i.trusted),n}async saveTrustInfo(){this.storageService.store(this.storageKey,JSON.stringify(this._trustStateInfo),-1,1),this._onDidChangeTrustedFolders.fire(),await this.updateWorkspaceTrust()}getWorkspaceUris(){let t=this._canonicalWorkspace.folders.map(i=>i.uri),n=this._canonicalWorkspace.configuration;return n&&oC(n,this.environmentService)&&t.push(n),t}calculateWorkspaceTrust(){return this.workspaceTrustEnablementService.isWorkspaceTrustEnabled()?this._canonicalUrisResolved?this.environmentService.remoteAuthority&&this._remoteAuthority?.options?.isTrusted?this._remoteAuthority.options.isTrusted:this.isEmptyWorkspace()?this._storedTrustState.isEmptyWorkspaceTrusted!==void 0?this._storedTrustState.isEmptyWorkspaceTrusted:this._canonicalStartupFiles.length?this.getUrisTrust(this._canonicalStartupFiles):!!this.configurationService.getValue(T6):this.getUrisTrust(this.getWorkspaceUris()):!1:!0}async updateWorkspaceTrust(t){this.workspaceTrustEnablementService.isWorkspaceTrustEnabled()&&(t===void 0&&(await this.resolveCanonicalUris(),t=this.calculateWorkspaceTrust()),this.isWorkspaceTrusted()!==t&&(this.isTrusted=t,await this._trustTransitionManager.participate(t),this._onDidChangeTrust.fire(t)))}getUrisTrust(t){let n=!0;for(let i of t){let{trusted:o}=this.doGetUriTrustInfo(i);if(!o)return n=o,n}return n}doGetUriTrustInfo(t){if(!this.workspaceTrustEnablementService.isWorkspaceTrustEnabled())return{trusted:!0,uri:t};if(this.isTrustedVirtualResource(t))return{trusted:!0,uri:t};if(this.isTrustedByRemote(t))return{trusted:!0,uri:t};let n=!1,i=-1,o=t;for(let s of this._trustStateInfo.uriTrustInfo)if(this.uriIdentityService.extUri.isEqualOrParent(t,s.uri)){let a=s.uri.fsPath;a.length>i&&(i=a.length,n=s.trusted,o=s.uri)}return{trusted:n,uri:o}}async doSetUrisTrust(t,n){let i=!1;for(let o of t)if(n){if(this.isTrustedVirtualResource(o)||this.isTrustedByRemote(o))continue;this._trustStateInfo.uriTrustInfo.find(a=>this.uriIdentityService.extUri.isEqual(a.uri,o))||(this._trustStateInfo.uriTrustInfo.push({uri:o,trusted:!0}),i=!0)}else{let s=this._trustStateInfo.uriTrustInfo.length;this._trustStateInfo.uriTrustInfo=this._trustStateInfo.uriTrustInfo.filter(a=>!this.uriIdentityService.extUri.isEqual(a.uri,o)),s!==this._trustStateInfo.uriTrustInfo.length&&(i=!0)}i&&await this.saveTrustInfo()}isEmptyWorkspace(){if(this.workspaceService.getWorkbenchState()===1)return!0;let t=this.workspaceService.getWorkspace();return t?Nm(this.workspaceService.getWorkspace())&&t.folders.length===0:!1}isTrustedVirtualResource(t){return UV(t)&&t.scheme!=="vscode-vfs"}isTrustedByRemote(t){return!this.environmentService.remoteAuthority||!this._remoteAuthority?!1:Tm(sk(t),this._remoteAuthority.authority.authority)&&!!this._remoteAuthority.options?.isTrusted}set isTrusted(t){this._isTrusted=t,t||(this._storedTrustState.acceptsOutOfWorkspaceFiles=!1),this.isEmptyWorkspace()&&(this._storedTrustState.isEmptyWorkspaceTrusted=t)}get workspaceResolved(){return this._workspaceResolvedPromise}get workspaceTrustInitialized(){return this._workspaceTrustInitializedPromise}get acceptsOutOfWorkspaceFiles(){return this._storedTrustState.acceptsOutOfWorkspaceFiles}set acceptsOutOfWorkspaceFiles(t){this._storedTrustState.acceptsOutOfWorkspaceFiles=t}isWorkspaceTrusted(){return this._isTrusted}isWorkspaceTrustForced(){return!!(this.environmentService.remoteAuthority&&this._remoteAuthority&&this._remoteAuthority.options?.isTrusted!==void 0||this.getWorkspaceUris().filter(n=>!this.isTrustedVirtualResource(n)).length===0)}canSetParentFolderTrust(){let t=Ev(this._canonicalWorkspace);if(!jd(t)||t.uri.scheme!==le.file&&t.uri.scheme!==le.vscodeRemote)return!1;let n=this.uriIdentityService.extUri.dirname(t.uri);return!this.uriIdentityService.extUri.isEqual(t.uri,n)}async setParentFolderTrust(t){if(this.canSetParentFolderTrust()){let n=Ev(this._canonicalWorkspace).uri,i=this.uriIdentityService.extUri.dirname(n);await this.setUrisTrust([i],t)}}canSetWorkspaceTrust(){if(this.environmentService.remoteAuthority&&(!this._remoteAuthority||this._remoteAuthority.options?.isTrusted!==void 0))return!1;if(this.isEmptyWorkspace())return!0;if(this.getWorkspaceUris().filter(o=>!this.isTrustedVirtualResource(o)).length===0)return!1;if(!this.isWorkspaceTrusted())return!0;let n=Ev(this._canonicalWorkspace);if(!jd(n)||n.uri.scheme!==le.file&&n.uri.scheme!=="vscode-vfs")return!1;let i=this.doGetUriTrustInfo(n.uri);if(!i.trusted||!this.uriIdentityService.extUri.isEqual(n.uri,i.uri))return!1;if(this.canSetParentFolderTrust()){let o=this.uriIdentityService.extUri.dirname(n.uri);if(this.doGetUriTrustInfo(o).trusted)return!1}return!0}async setWorkspaceTrust(t){if(this.isEmptyWorkspace()){await this.updateWorkspaceTrust(t);return}let n=this.getWorkspaceUris();await this.setUrisTrust(n,t)}async getUriTrustInfo(t){return this.workspaceTrustEnablementService.isWorkspaceTrustEnabled()?this.isTrustedByRemote(t)?{trusted:!0,uri:t}:this.doGetUriTrustInfo(await this.getCanonicalUri(t)):{trusted:!0,uri:t}}async setUrisTrust(t,n){this.doSetUrisTrust(await Promise.all(t.map(i=>this.getCanonicalUri(i))),n)}getTrustedUris(){return this._trustStateInfo.uriTrustInfo.map(t=>t.uri)}async setTrustedUris(t){this._trustStateInfo.uriTrustInfo=[];for(let n of t){let i=await this.getCanonicalUri(n),o=this.uriIdentityService.extUri.removeTrailingPathSeparator(i),s=!1;for(let a of this._trustStateInfo.uriTrustInfo)if(this.uriIdentityService.extUri.isEqual(a.uri,o)){s=!0;break}s||this._trustStateInfo.uriTrustInfo.push({trusted:!0,uri:o})}await this.saveTrustInfo()}addWorkspaceTrustTransitionParticipant(t){return this._trustTransitionManager.addWorkspaceTrustTransitionParticipant(t)}};gE=C([v(0,ke),v(1,SS),v(2,Xe),v(3,Ln),v(4,uo),v(5,Un),v(6,hE),v(7,dt)],gE);var ib=class extends P{constructor(t,n){super();this.configurationService=t;this.workspaceTrustManagementService=n}_serviceBrand;_openFilesTrustRequestPromise;_openFilesTrustRequestResolver;_workspaceTrustRequestPromise;_workspaceTrustRequestResolver;_onDidInitiateOpenFilesTrustRequest=this._register(new x);onDidInitiateOpenFilesTrustRequest=this._onDidInitiateOpenFilesTrustRequest.event;_onDidInitiateWorkspaceTrustRequest=this._register(new x);onDidInitiateWorkspaceTrustRequest=this._onDidInitiateWorkspaceTrustRequest.event;_onDidInitiateWorkspaceTrustRequestOnStartup=this._register(new x);onDidInitiateWorkspaceTrustRequestOnStartup=this._onDidInitiateWorkspaceTrustRequestOnStartup.event;get untrustedFilesSetting(){return this.configurationService.getValue(zV)}set untrustedFilesSetting(t){this.configurationService.updateValue(zV,t)}async completeOpenFilesTrustRequest(t,n){this._openFilesTrustRequestResolver&&(t===1&&(this.workspaceTrustManagementService.acceptsOutOfWorkspaceFiles=!0),n&&(t===1&&(this.untrustedFilesSetting="open"),t===2&&(this.untrustedFilesSetting="newWindow")),this._openFilesTrustRequestResolver(t),this._openFilesTrustRequestResolver=void 0,this._openFilesTrustRequestPromise=void 0)}async requestOpenFilesTrust(t){if(!this.workspaceTrustManagementService.isWorkspaceTrusted())return 1;if((await Promise.all(t.map(i=>this.workspaceTrustManagementService.getUriTrustInfo(i)))).map(i=>i.trusted).every(i=>i))return 1;if(this.untrustedFilesSetting!=="prompt"){if(this.untrustedFilesSetting==="newWindow")return 2;if(this.untrustedFilesSetting==="open")return 1}if(this.workspaceTrustManagementService.acceptsOutOfWorkspaceFiles)return 1;if(!this._openFilesTrustRequestPromise)this._openFilesTrustRequestPromise=new Promise(i=>{this._openFilesTrustRequestResolver=i});else return this._openFilesTrustRequestPromise;return this._onDidInitiateOpenFilesTrustRequest.fire(),this._openFilesTrustRequestPromise}resolveWorkspaceTrustRequest(t){this._workspaceTrustRequestResolver&&(this._workspaceTrustRequestResolver(t??this.workspaceTrustManagementService.isWorkspaceTrusted()),this._workspaceTrustRequestResolver=void 0,this._workspaceTrustRequestPromise=void 0)}cancelWorkspaceTrustRequest(){this._workspaceTrustRequestResolver&&(this._workspaceTrustRequestResolver(void 0),this._workspaceTrustRequestResolver=void 0,this._workspaceTrustRequestPromise=void 0)}async completeWorkspaceTrustRequest(t){if(t===void 0||t===this.workspaceTrustManagementService.isWorkspaceTrusted()){this.resolveWorkspaceTrustRequest(t);return}N.once(this.workspaceTrustManagementService.onDidChangeTrust)(n=>this.resolveWorkspaceTrustRequest(n)),await this.workspaceTrustManagementService.setWorkspaceTrust(t)}async requestWorkspaceTrust(t){if(this.workspaceTrustManagementService.isWorkspaceTrusted())return this.workspaceTrustManagementService.isWorkspaceTrusted();if(!this._workspaceTrustRequestPromise)this._workspaceTrustRequestPromise=new Promise(n=>{this._workspaceTrustRequestResolver=n});else return this._workspaceTrustRequestPromise;return this._onDidInitiateWorkspaceTrustRequest.fire(t),this._workspaceTrustRequestPromise}requestWorkspaceTrustOnStartup(){this._workspaceTrustRequestPromise||(this._workspaceTrustRequestPromise=new Promise(t=>{this._workspaceTrustRequestResolver=t})),this._onDidInitiateWorkspaceTrustRequestOnStartup.fire()}};ib=C([v(0,ke),v(1,VV)],ib);var OL=class extends P{participants=new ei;addWorkspaceTrustTransitionParticipant(e){let t=this.participants.push(e);return ie(()=>t())}async participate(e){for(let t of this.participants)await t.participate(e)}dispose(){this.participants.clear(),super.dispose()}},ML=class{_memento;_mementoObject;_acceptsOutOfWorkspaceFilesKey="acceptsOutOfWorkspaceFiles";_isEmptyWorkspaceTrustedKey="isEmptyWorkspaceTrusted";constructor(e){e?(this._memento=new wp("workspaceTrust",e),this._mementoObject=this._memento.getMemento(1,1)):this._mementoObject={}}get acceptsOutOfWorkspaceFiles(){return this._mementoObject[this._acceptsOutOfWorkspaceFilesKey]??!1}set acceptsOutOfWorkspaceFiles(e){this._mementoObject[this._acceptsOutOfWorkspaceFilesKey]=e,this._memento?.saveMemento()}get isEmptyWorkspaceTrusted(){return this._mementoObject[this._isEmptyWorkspaceTrustedKey]}set isEmptyWorkspaceTrusted(e){this._mementoObject[this._isEmptyWorkspaceTrustedKey]=e,this._memento?.saveMemento()}};cn(WV,ib,1);var NL=A("extensionManifestPropertiesService"),rb=class extends P{constructor(t,n,i,o){super();this.productService=t;this.configurationService=n;this.workspaceTrustEnablementService=i;this.logService=o;this._configuredExtensionWorkspaceTrustRequestMap=new Vr;let s=n.inspect(HV).userValue||{};for(let a of Object.keys(s))this._configuredExtensionWorkspaceTrustRequestMap.set(a,s[a]);if(this._productExtensionWorkspaceTrustRequestMap=new Map,t.extensionUntrustedWorkspaceSupport)for(let a of Object.keys(t.extensionUntrustedWorkspaceSupport))this._productExtensionWorkspaceTrustRequestMap.set(a,t.extensionUntrustedWorkspaceSupport[a])}_serviceBrand;_extensionPointExtensionKindsMap=null;_productExtensionKindsMap=null;_configuredExtensionKindsMap=null;_productVirtualWorkspaceSupportMap=null;_configuredVirtualWorkspaceSupportMap=null;_configuredExtensionWorkspaceTrustRequestMap;_productExtensionWorkspaceTrustRequestMap;prefersExecuteOnUI(t){let n=this.getExtensionKind(t);return n.length>0&&n[0]==="ui"}prefersExecuteOnWorkspace(t){let n=this.getExtensionKind(t);return n.length>0&&n[0]==="workspace"}prefersExecuteOnWeb(t){let n=this.getExtensionKind(t);return n.length>0&&n[0]==="web"}canExecuteOnUI(t){return this.getExtensionKind(t).some(i=>i==="ui")}canExecuteOnWorkspace(t){return this.getExtensionKind(t).some(i=>i==="workspace")}canExecuteOnWeb(t){return this.getExtensionKind(t).some(i=>i==="web")}getExtensionKind(t){let n=this.deduceExtensionKind(t),i=this.getConfiguredExtensionKind(t);if(i&&i.length>0){let o=[];for(let s of i)s!=="-web"&&o.push(s);return i.includes("-web")&&!o.length&&(o.push("ui"),o.push("workspace")),_t&&!i.includes("-web")&&!i.includes("web")&&n.includes("web")&&o.push("web"),o}return n}getUserConfiguredExtensionKind(t){if(this._configuredExtensionKindsMap===null){let i=new Vr,o=this.configurationService.getValue("remote.extensionKind")||{};for(let s of Object.keys(o))i.set(s,o[s]);this._configuredExtensionKindsMap=i}let n=this._configuredExtensionKindsMap.get(t.id);return n?this.toArray(n):void 0}getExtensionUntrustedWorkspaceSupportType(t){if(!this.workspaceTrustEnablementService.isWorkspaceTrustEnabled()||!t.main)return!0;let n=this.getConfiguredExtensionWorkspaceTrustRequest(t),i=this.getProductExtensionWorkspaceTrustRequest(t);return n!==void 0?n:i?.override!==void 0?i.override:t.capabilities?.untrustedWorkspaces?.supported!==void 0?t.capabilities.untrustedWorkspaces.supported:i?.default!==void 0?i.default:!1}getExtensionVirtualWorkspaceSupportType(t){let n=this.getConfiguredVirtualWorkspaceSupport(t);if(n!==void 0)return n;let i=this.getProductVirtualWorkspaceSupport(t);if(i?.override!==void 0)return i.override;let o=t.capabilities?.virtualWorkspaces;if(em(o))return o;if(o){let s=o.supported;if(em(s)||s==="limited")return s}return i?.default!==void 0?i.default:!0}deduceExtensionKind(t){if(t.main)return t.browser?_t?["workspace","web"]:["workspace"]:["workspace"];if(t.browser)return["web"];let n=[...pO];if((lu(t.extensionPack)||lu(t.extensionDependencies))&&(n=_t?["workspace","web"]:["workspace"]),t.contributes)for(let i of Object.keys(t.contributes)){let o=this.getSupportedExtensionKindsForExtensionPoint(i);o.length&&(n=n.filter(s=>o.includes(s)))}return n.length||this.logService.warn("Cannot deduce extensionKind for extension",Qa(t.publisher,t.name)),n}getSupportedExtensionKindsForExtensionPoint(t){if(this._extensionPointExtensionKindsMap===null){let i=new Map;Ja.getExtensionPoints().forEach(o=>i.set(o.name,o.defaultExtensionKind||[])),this._extensionPointExtensionKindsMap=i}let n=this._extensionPointExtensionKindsMap.get(t);return n||(n=this.productService.extensionPointExtensionKind?this.productService.extensionPointExtensionKind[t]:void 0,n)?n:_t?["workspace","web"]:["workspace"]}getConfiguredExtensionKind(t){let n={id:Qa(t.publisher,t.name)},i=this.getUserConfiguredExtensionKind(n);return typeof i<"u"?this.toArray(i):(i=this.getProductExtensionKind(t),typeof i<"u"?i:(i=t.extensionKind,typeof i<"u"?(i=this.toArray(i),i.filter(o=>["ui","workspace"].includes(o))):null))}getProductExtensionKind(t){if(this._productExtensionKindsMap===null){let i=new Vr;if(this.productService.extensionKind)for(let o of Object.keys(this.productService.extensionKind))i.set(o,this.productService.extensionKind[o]);this._productExtensionKindsMap=i}let n=Qa(t.publisher,t.name);return this._productExtensionKindsMap.get(n)}getProductVirtualWorkspaceSupport(t){if(this._productVirtualWorkspaceSupportMap===null){let i=new Vr;if(this.productService.extensionVirtualWorkspacesSupport)for(let o of Object.keys(this.productService.extensionVirtualWorkspacesSupport))i.set(o,this.productService.extensionVirtualWorkspacesSupport[o]);this._productVirtualWorkspaceSupportMap=i}let n=Qa(t.publisher,t.name);return this._productVirtualWorkspaceSupportMap.get(n)}getConfiguredVirtualWorkspaceSupport(t){if(this._configuredVirtualWorkspaceSupportMap===null){let i=new Vr,o=this.configurationService.getValue("extensions.supportVirtualWorkspaces")||{};for(let s of Object.keys(o))o[s]!==void 0&&i.set(s,o[s]);this._configuredVirtualWorkspaceSupportMap=i}let n=Qa(t.publisher,t.name);return this._configuredVirtualWorkspaceSupportMap.get(n)}getConfiguredExtensionWorkspaceTrustRequest(t){let n=Qa(t.publisher,t.name),i=this._configuredExtensionWorkspaceTrustRequestMap.get(n);if(i&&(i.version===void 0||i.version===t.version))return i.supported}getProductExtensionWorkspaceTrustRequest(t){let n=Qa(t.publisher,t.name);return this._productExtensionWorkspaceTrustRequestMap.get(n)}toArray(t){return Array.isArray(t)?t:t==="ui"?["ui","workspace"]:[t]}};rb=C([v(0,gi),v(1,ke),v(2,hE),v(3,Et)],rb);cn(NL,rb,1);var Ph=class{constructor(e,t,n,i,o,s,a,l,d){this.extensionManagementServerService=e;this.storageService=t;this.remoteAgentService=n;this.userDataSyncStoreManagementService=i;this.instantiationService=o;this.logService=s;this.authenticationService=a;this.remoteAuthorityResolverService=l;this.userDataSyncEnablementService=d;this.initializeRemoteExtensions()}async initializeRemoteExtensions(){let e=this.remoteAgentService.getConnection(),t=this.extensionManagementServerService.localExtensionManagementServer,n=this.extensionManagementServerService.remoteExtensionManagementServer;if(!e||!n||!t||!this.userDataSyncStoreManagementService.userDataSyncStore)return;let i=`${o_}.${e.remoteAuthority}`;if(!this.storageService.getBoolean(i,-1,!0)){this.logService.trace("Skipping initializing remote extensions because the window with this remote authority was opened before.");return}if(this.storageService.store(i,!1,-1,1),!this.storageService.isNew(1)){this.logService.trace("Skipping initializing remote extensions because this workspace was opened before.");return}if(!this.userDataSyncEnablementService.isEnabled())return;let o=await this.remoteAuthorityResolverService.resolveAuthority(e.remoteAuthority);if(!o.options?.authenticationSession)return;let a=(await this.authenticationService.getSessions(o.options?.authenticationSession.providerId)).find(m=>m.id===o.options?.authenticationSession?.id);if(!a){this.logService.info("Skipping initializing remote extensions because the account with given session id is not found",o.options.authenticationSession.id);return}let l=this.instantiationService.createInstance(Zc,this.userDataSyncStoreManagementService.userDataSyncStore.url);l.setAuthToken(a.accessToken,o.options.authenticationSession.providerId);let d=await l.readResource("extensions",null),u=new _a;u.set(mo,n.extensionManagementService),await this.instantiationService.createChild(u).createInstance(ob).initialize(d)}};Ph=C([v(0,oU),v(1,Xe),v(2,xS),v(3,ZT),v(4,_e),v(5,Et),v(6,BV),v(7,SS),v(8,Cd)],Ph);var ob=class extends Lh{constructor(t,n,i,o,s,a,l,d,u,p){super(t,n,i,o,s,a,u,l);this.extensionGalleryService=d;this.extensionManifestPropertiesService=p}async doInitialize(t){let n=await this.parseExtensions(t);if(!n){this.logService.info("No synced extensions exist while initializing remote extensions.");return}let i=await this.extensionManagementService.getInstalled(),{newExtensions:o}=this.generatePreview(n,i);if(!o.length){this.logService.trace("No new remote extensions to install.");return}let s=await this.extensionManagementService.getTargetPlatform(),a=await this.extensionGalleryService.getExtensions(o,{targetPlatform:s,compatible:!0},rt.None);a.length&&await Promise.allSettled(a.map(async l=>{let d=await this.extensionGalleryService.getManifest(l,rt.None);if(d&&this.extensionManifestPropertiesService.canExecuteOnWorkspace(d)){let u=n.find(p=>Hn(p.identifier,p.identifier));await this.extensionManagementService.installFromGallery(l,{installPreReleaseVersion:u?.preRelease,donotIncludePackAndDependencies:!0})}}))}};ob=C([v(0,mo),v(1,Rh),v(2,dt),v(3,Yl),v(4,Qt),v(5,Et),v(6,Ln),v(7,DS),v(8,Xe),v(9,NL)],ob);cn(nl,Eh,1);Ce.as(js.EditorPane).registerEditorPane(vS.create(bo,bo.ID,c("runtimeExtension","Running Extensions")),[new Da(ms)]);var FL=class{canSerialize(e){return!0}serialize(e){return""}deserialize(e){return ms.instance}};Ce.as(js.EditorFactory).registerEditorSerializer(ms.ID,FL);var sb=class extends P{constructor(e,t){super(),t.registerChannel("extensionRecommendationNotification",new cv(e)),this._register(Me(jT)),this._register(Me(YT))}};sb=C([v(0,nA),v(1,Fw)],sb);var fE=Ce.as(zp.Workbench);fE.registerWorkbenchContribution(sb,3);fE.registerWorkbenchContribution(wh,4);fE.registerWorkbenchContribution(Ph,3);fE.registerWorkbenchContribution(ah,3);Me(Yx);Me(qx);Me($x);Me(Nf);Me(jx);
