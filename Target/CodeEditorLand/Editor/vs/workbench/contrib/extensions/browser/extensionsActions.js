var Ft=Object.defineProperty;var Gt=Object.getOwnPropertyDescriptor;var p=(c,a,e,t)=>{for(var n=t>1?void 0:t?Gt(a,e):a,o=c.length-1,r;o>=0;o--)(r=c[o])&&(n=(t?r(a,e,n):r(n))||n);return t&&n&&Ft(a,e,n),n},s=(c,a)=>(e,t)=>a(e,t,c);import"./media/extensionActions.css";import{localize as i,localize2 as be}from"../../../../nls.js";import{Action as C,Separator as yt,SubmenuAction as Ht}from"../../../../base/common/actions.js";import{Delayer as nt,Promises as fe,Throttler as it}from"../../../../base/common/async.js";import*as qt from"../../../../base/browser/dom.js";import{Emitter as kt,Event as ke}from"../../../../base/common/event.js";import*as st from"../../../../base/common/json.js";import{IContextMenuService as Qt}from"../../../../platform/contextview/browser/contextView.js";import{disposeIfDisposable as Kt}from"../../../../base/common/lifecycle.js";import{ExtensionState as x,IExtensionsWorkbenchService as v,TOGGLE_IGNORE_EXTENSION_ACTION_ID as Xt,SELECT_INSTALL_VSIX_EXTENSION_COMMAND_ID as jt,THEME_ACTIONS_GROUP as Jt,INSTALL_ACTIONS_GROUP as Yt,UPDATE_ACTIONS_GROUP as zt,ExtensionEditorTab as $e,ExtensionRuntimeActionType as B,AutoUpdateConfigurationKey as Zt}from"../common/extensions.js";import{ExtensionsConfigurationInitialContent as Ct}from"../common/extensionsFileTemplate.js";import{IExtensionGalleryService as Re,InstallOperation as Ce,TargetPlatformToString as en,ExtensionManagementErrorCode as O}from"../../../../platform/extensionManagement/common/extensionManagement.js";import{IWorkbenchExtensionEnablementService as w,EnablementState as b,IExtensionManagementServerService as U,IWorkbenchExtensionManagementService as tn}from"../../../services/extensionManagement/common/extensionManagement.js";import{ExtensionRecommendationReason as nn,IExtensionIgnoredRecommendationsService as rt,IExtensionRecommendationsService as sn}from"../../../services/extensionRecommendations/common/extensionRecommendations.js";import{areSameExtensions as L,getExtensionId as wt}from"../../../../platform/extensionManagement/common/extensionManagementUtil.js";import{ExtensionType as Lt,ExtensionIdentifier as Tt,isLanguagePackExtension as Wt,getWorkspaceSupportTypeMessage as Be,TargetPlatform as Oe,isApplicationScopedExtension as rn}from"../../../../platform/extensions/common/extensions.js";import{IInstantiationService as y}from"../../../../platform/instantiation/common/instantiation.js";import{IFileService as we}from"../../../../platform/files/common/files.js";import{IWorkspaceContextService as ge,WorkbenchState as Ue}from"../../../../platform/workspace/common/workspace.js";import{IHostService as Mt}from"../../../services/host/browser/host.js";import{IExtensionService as M,toExtension as Pt,toExtensionDescription as Ve}from"../../../services/extensions/common/extensions.js";import{URI as Q}from"../../../../base/common/uri.js";import{CommandsRegistry as Dt,ICommandService as ot}from"../../../../platform/commands/common/commands.js";import{IConfigurationService as Nt}from"../../../../platform/configuration/common/configuration.js";import{registerThemingParticipant as on}from"../../../../platform/theme/common/themeService.js";import{ThemeIcon as g}from"../../../../base/common/themables.js";import{buttonBackground as _e,buttonForeground as Fe,buttonHoverBackground as Ge,registerColor as le,editorWarningForeground as an,editorInfoForeground as ln,editorErrorForeground as cn,buttonSeparator as dn}from"../../../../platform/theme/common/colorRegistry.js";import{IJSONEditingService as at}from"../../../services/configuration/common/jsonEditing.js";import"../../../../platform/editor/common/editor.js";import{ITextModelService as lt}from"../../../../editor/common/services/resolverService.js";import{IContextKeyService as hn}from"../../../../platform/contextkey/common/contextkey.js";import{MenuId as un,IMenuService as pn}from"../../../../platform/actions/common/actions.js";import{PICK_WORKSPACE_FOLDER_COMMAND_ID as xn}from"../../../browser/actions/workspaceCommands.js";import{INotificationService as Le,Severity as V}from"../../../../platform/notification/common/notification.js";import{IOpenerService as At}from"../../../../platform/opener/common/opener.js";import{IEditorService as ct}from"../../../services/editor/common/editorService.js";import{IQuickInputService as K}from"../../../../platform/quickinput/common/quickInput.js";import{CancellationToken as ce}from"../../../../base/common/cancellation.js";import{alert as T}from"../../../../base/browser/ui/aria/aria.js";import{IWorkbenchThemeService as Te}from"../../../services/themes/common/workbenchThemeService.js";import{ILabelService as $t}from"../../../../platform/label/common/label.js";import{ITextFileService as dt}from"../../../services/textfile/common/textfiles.js";import{IProductService as ht}from"../../../../platform/product/common/productService.js";import{IDialogService as We}from"../../../../platform/dialogs/common/dialogs.js";import{IProgressService as ut,ProgressLocation as vn}from"../../../../platform/progress/common/progress.js";import{ActionViewItem as mn}from"../../../../base/browser/ui/actionbar/actionViewItems.js";import{EXTENSIONS_CONFIG as Rt}from"../../../services/extensionRecommendations/common/workspaceExtensionsConfig.js";import{getErrorMessage as Me,isCancellationError as Bt}from"../../../../base/common/errors.js";import{IUserDataSyncEnablementService as Sn}from"../../../../platform/userDataSync/common/userDataSync.js";import"../../../../base/browser/contextmenu.js";import{ILogService as pt}from"../../../../platform/log/common/log.js";import{errorIcon as ee,infoIcon as W,manageExtensionIcon as Ot,syncEnabledIcon as bn,syncIgnoredIcon as fn,trustIcon as de,warningIcon as f}from"./extensionsIcons.js";import{isIOS as gn,isWeb as xt,language as vt}from"../../../../base/common/platform.js";import{IExtensionManifestPropertiesService as Ie}from"../../../services/extensions/common/extensionManifestPropertiesService.js";import{IWorkspaceTrustEnablementService as In,IWorkspaceTrustManagementService as En}from"../../../../platform/workspace/common/workspaceTrust.js";import{isVirtualWorkspace as yn}from"../../../../platform/workspace/common/virtualWorkspace.js";import{escapeMarkdownSyntaxTokens as He,MarkdownString as m}from"../../../../base/common/htmlContent.js";import{fromNow as kn}from"../../../../base/common/date.js";import{IPreferencesService as Cn}from"../../../services/preferences/common/preferences.js";import{getLocale as mt}from"../../../../platform/languagePacks/common/languagePacks.js";import{ILocaleService as wn}from"../../../services/localization/common/locale.js";import{isString as Ut}from"../../../../base/common/types.js";import{showWindowLogActionId as Ln}from"../../../services/log/common/logConstants.js";import{ITelemetryService as Vt}from"../../../../platform/telemetry/common/telemetry.js";import{Extensions as Tn,IExtensionFeaturesManagementService as Wn}from"../../../services/extensionManagement/common/extensionFeatures.js";import{Registry as Mn}from"../../../../platform/registry/common/platform.js";import{IUpdateService as Pn}from"../../../../platform/update/common/update.js";import{ActionWithDropdownActionViewItem as Dn}from"../../../../base/browser/ui/dropdown/dropdownActionViewItem.js";import{IAuthenticationUsageService as Nn}from"../../../services/authentication/browser/authenticationUsageService.js";let te=class extends C{constructor(e,t,n,o,r,l,d,S,R,u,ft,tt,gt,It,Et){super("extension.promptExtensionInstallFailure");this.extension=e;this.options=t;this.version=n;this.installOperation=o;this.error=r;this.productService=l;this.openerService=d;this.notificationService=S;this.dialogService=R;this.commandService=u;this.logService=ft;this.extensionManagementServerService=tt;this.instantiationService=gt;this.galleryService=It;this.extensionManifestPropertiesService=Et}async run(){if(Bt(this.error))return;if(this.logService.error(this.error),this.error.name===O.Unsupported){const l=xt?i("VS Code for Web","{0} for the Web",this.productService.nameLong):this.productService.nameLong,d=i("cannot be installed","The '{0}' extension is not available in {1}. Click 'More Information' to learn more.",this.extension.displayName||this.extension.identifier.id,l),{confirmed:S}=await this.dialogService.confirm({type:V.Info,message:d,primaryButton:i({key:"more information",comment:["&& denotes a mnemonic"]},"&&More Information"),cancelButton:i("close","Close")});S&&this.openerService.open(xt?Q.parse("https://aka.ms/vscode-web-extensions-guide"):Q.parse("https://aka.ms/vscode-remote"));return}if(O.ReleaseVersionNotFound===this.error.name){await this.dialogService.prompt({type:"error",message:Me(this.error),buttons:[{label:i("install prerelease","Install Pre-Release"),run:()=>{const l=this.instantiationService.createInstance(I,{installPreReleaseVersion:!0});return l.extension=this.extension,l.run()}}],cancelButton:i("cancel","Cancel")});return}if([O.Incompatible,O.IncompatibleApi,O.IncompatibleTargetPlatform,O.Malicious,O.Deprecated].includes(this.error.name)){await this.dialogService.info(Me(this.error));return}if(O.PackageNotSigned===this.error.name){await this.dialogService.prompt({type:"error",message:i("not signed","'{0}' is an extension from an unknown source. Are you sure you want to install?",this.extension.displayName),detail:Me(this.error),buttons:[{label:i("install anyway","Install Anyway"),run:()=>{const l=this.instantiationService.createInstance(I,{...this.options,donotVerifySignature:!0});return l.extension=this.extension,l.run()}}],cancelButton:!0});return}if(O.SignatureVerificationFailed===this.error.name||O.SignatureVerificationInternal===this.error.name){await this.dialogService.prompt({type:"error",message:i("verification failed","Cannot install '{0}' extension because {1} cannot verify the extension signature",this.extension.displayName,this.productService.nameLong),detail:Me(this.error),buttons:[{label:i("learn more","Learn More"),run:()=>this.openerService.open("https://code.visualstudio.com/docs/editor/extension-marketplace")},{label:i("install donot verify","Install Anyway (Don't Verify Signature)"),run:()=>{const l=this.instantiationService.createInstance(I,{...this.options,donotVerifySignature:!0});return l.extension=this.extension,l.run()}}],cancelButton:!0});return}const e=this.installOperation===Ce.Update?i("update operation","Error while updating '{0}' extension.",this.extension.displayName||this.extension.identifier.id):i("install operation","Error while installing '{0}' extension.",this.extension.displayName||this.extension.identifier.id);let t;const n=[],o=await this.getDownloadUrl();o&&(t=i("check logs","Please check the [log]({0}) for more details.",`command:${Ln}`),n.push({label:i("download","Try Downloading Manually..."),run:()=>this.openerService.open(o).then(()=>{this.notificationService.prompt(V.Info,i("install vsix","Once downloaded, please manually install the downloaded VSIX of '{0}'.",this.extension.identifier.id),[{label:i("installVSIX","Install from VSIX..."),run:()=>this.commandService.executeCommand(jt)}])})}));const r=`${e}${t?` ${t}`:""}`;this.notificationService.prompt(V.Error,r,n)}async getDownloadUrl(){if(gn||!this.extension.gallery||!this.productService.extensionsGallery||!this.extensionManagementServerService.localExtensionManagementServer&&!this.extensionManagementServerService.remoteExtensionManagementServer)return;let e=this.extension.gallery.properties.targetPlatform;if(e!==Oe.UNIVERSAL&&e!==Oe.UNDEFINED&&this.extensionManagementServerService.remoteExtensionManagementServer)try{const t=await this.galleryService.getManifest(this.extension.gallery,ce.None);t&&this.extensionManifestPropertiesService.prefersExecuteOnWorkspace(t)&&(e=await this.extensionManagementServerService.remoteExtensionManagementServer.extensionManagementService.getTargetPlatform())}catch(t){this.logService.error(t);return}if(e!==Oe.UNKNOWN)return Q.parse(`${this.productService.extensionsGallery.serviceUrl}/publishers/${this.extension.publisher}/vsextensions/${this.extension.name}/${this.version}/vspackage${e!==Oe.UNDEFINED?`?targetPlatform=${e}`:""}`)}};te=p([s(5,ht),s(6,At),s(7,Le),s(8,We),s(9,ot),s(10,pt),s(11,U),s(12,y),s(13,Re),s(14,Ie)],te);class h extends C{_onDidChange=this._register(new kt);onDidChange=this._onDidChange.event;static EXTENSION_ACTION_CLASS="extension-action";static TEXT_ACTION_CLASS=`${h.EXTENSION_ACTION_CLASS} text`;static LABEL_ACTION_CLASS=`${h.EXTENSION_ACTION_CLASS} label`;static PROMINENT_LABEL_ACTION_CLASS=`${h.LABEL_ACTION_CLASS} prominent`;static ICON_ACTION_CLASS=`${h.EXTENSION_ACTION_CLASS} icon`;_extension=null;get extension(){return this._extension}set extension(a){this._extension=a,this.update()}_hidden=!1;get hidden(){return this._hidden}set hidden(a){this._hidden!==a&&(this._hidden=a,this._onDidChange.fire({hidden:a}))}_setEnabled(a){super._setEnabled(a),this.hideOnDisabled&&(this.hidden=!a)}hideOnDisabled=!0}class St extends h{constructor(e,t,n){t=`${t} action-dropdown`;super(e,void 0,t);this.actionsGroups=n;this.menuActionClassNames=t.split(" "),this.hideOnDisabled=!1,this.extensionActions=n.flat(),this.update(),this._register(ke.any(...this.extensionActions.map(o=>o.onDidChange))(()=>this.update(!0))),this.extensionActions.forEach(o=>this._register(o))}primaryAction;menuActionClassNames=[];_menuActions=[];get menuActions(){return[...this._menuActions]}get extension(){return super.extension}set extension(e){this.extensionActions.forEach(t=>t.extension=e),super.extension=e}extensionActions;update(e){e||this.extensionActions.forEach(o=>o.update());const t=this.actionsGroups.map(o=>o.filter(r=>!r.hidden));let n=[];for(const o of t)o.length&&(n=[...n,...o,new yt]);n=n.length?n.slice(0,n.length-1):n,this.primaryAction=n[0],this._menuActions=n.length>1?n:[],this._onDidChange.fire({menuActions:this._menuActions}),this.primaryAction?(this.hidden=!1,this.enabled=this.primaryAction.enabled,this.label=this.getLabel(this.primaryAction),this.tooltip=this.primaryAction.tooltip):(this.hidden=!0,this.enabled=!1)}async run(){this.enabled&&await this.primaryAction?.run()}getLabel(e){return e.label}}class Ws extends Dn{constructor(a,e,t){super(null,a,e,t),this._register(a.onDidChange(n=>{(n.hidden!==void 0||n.menuActions!==void 0)&&this.updateClass()}))}render(a){super.render(a),this.updateClass()}updateClass(){if(super.updateClass(),this.element&&this.dropdownMenuActionViewItem?.element){this.element.classList.toggle("hide",this._action.hidden);const a=this._action.menuActions.length===0;this.element.classList.toggle("empty",a),this.dropdownMenuActionViewItem.element.classList.toggle("hide",a)}}}let I=class extends h{constructor(e,t,n,o,r,l,d,S,R,u){super("extensions.install",i("install","Install"),I.CLASS,!1);this.extensionsWorkbenchService=t;this.instantiationService=n;this.runtimeExtensionService=o;this.workbenchThemeService=r;this.labelService=l;this.dialogService=d;this.preferencesService=S;this.telemetryService=R;this.contextService=u;this.hideOnDisabled=!1,this.options={isMachineScoped:!1,...e},this.update(),this._register(this.labelService.onDidChangeFormatters(()=>this.updateLabel(),this))}static CLASS=`${this.LABEL_ACTION_CLASS} prominent install`;static HIDE=`${this.CLASS} hide`;_manifest=null;set manifest(e){this._manifest=e,this.updateLabel()}updateThrottler=new it;options;update(){this.updateThrottler.queue(()=>this.computeAndUpdateEnablement())}async computeAndUpdateEnablement(){this.enabled=!1,this.class=I.HIDE,this.hidden=!0,this.extension&&(this.extension.isBuiltin||this.extensionsWorkbenchService.canSetLanguage(this.extension)||this.extension.state===x.Uninstalled&&(this.options.installPreReleaseVersion&&!this.extension.hasPreReleaseVersion||!this.options.installPreReleaseVersion&&!this.extension.hasReleaseVersion||(this.hidden=!1,this.class=I.CLASS,await this.extensionsWorkbenchService.canInstall(this.extension)&&(this.enabled=!0,this.updateLabel()))))}async run(){if(!this.extension)return;if(this.extension.gallery&&!this.extension.gallery.isSigned){const{result:t}=await this.dialogService.prompt({type:V.Warning,message:i("not signed","'{0}' is an extension from an unknown source. Are you sure you want to install?",this.extension.displayName),detail:i("not signed detail","Extension is not signed."),buttons:[{label:i("install anyway","Install Anyway"),run:()=>(this.options.donotVerifySignature=!0,!0)}],cancelButton:{run:()=>!1}});if(!t)return}if(this.extension.deprecationInfo){let t=i("deprecated message","This extension is deprecated as it is no longer being maintained."),n;(u=>(u[u.InstallAnyway=0]="InstallAnyway",u[u.ShowAlternateExtension=1]="ShowAlternateExtension",u[u.ConfigureSettings=2]="ConfigureSettings",u[u.Cancel=3]="Cancel"))(n||={});const o=[{label:i("install anyway","Install Anyway"),run:()=>0}];if(this.extension.deprecationInfo.extension){t=i("deprecated with alternate extension message","This extension is deprecated. Use the {0} extension instead.",this.extension.deprecationInfo.extension.displayName);const l=this.extension.deprecationInfo.extension;o.push({label:i({key:"Show alternate extension",comment:["&& denotes a mnemonic"]},"&&Open {0}",this.extension.deprecationInfo.extension.displayName),run:async()=>{const[d]=await this.extensionsWorkbenchService.getExtensions([{id:l.id,preRelease:l.preRelease}],ce.None);return await this.extensionsWorkbenchService.open(d),1}})}else if(this.extension.deprecationInfo.settings){t=i("deprecated with alternate settings message","This extension is deprecated as this functionality is now built-in to VS Code.");const l=this.extension.deprecationInfo.settings;o.push({label:i({key:"configure in settings",comment:["&& denotes a mnemonic"]},"&&Configure Settings"),run:async()=>(await this.preferencesService.openSettings({query:l.map(d=>`@id:${d}`).join(" ")}),2)})}else this.extension.deprecationInfo.additionalInfo&&(t=new m(`${t} ${this.extension.deprecationInfo.additionalInfo}`));const{result:r}=await this.dialogService.prompt({type:V.Warning,message:i("install confirmation","Are you sure you want to install '{0}'?",this.extension.displayName),detail:Ut(t)?t:void 0,custom:Ut(t)?void 0:{markdownDetails:[{markdown:t}]},buttons:o,cancelButton:{run:()=>3}});if(r!==0)return}this.extensionsWorkbenchService.open(this.extension,{showPreReleaseVersion:this.options.installPreReleaseVersion}),T(i("installExtensionStart","Installing extension {0} started. An editor is now open with more details on this extension",this.extension.displayName)),this.telemetryService.publicLog("extensions:action:install",{...this.extension.telemetryData,actionId:this.id});const e=await this.install(this.extension);if(e?.local){T(i("installExtensionComplete","Installing extension {0} is completed.",this.extension.displayName));const t=await this.getRunningExtension(e.local);if(t&&!(t.activationEvents&&t.activationEvents.some(n=>n.startsWith("onLanguage")))){const n=await this.getThemeAction(e);if(n){n.extension=e;try{return n.run({showCurrentTheme:!0,ignoreFocusLost:!0})}finally{n.dispose()}}}}}async getThemeAction(e){if((await this.workbenchThemeService.getColorThemes()).some(r=>_(r,e)))return this.instantiationService.createInstance(N);if((await this.workbenchThemeService.getFileIconThemes()).some(r=>_(r,e)))return this.instantiationService.createInstance(A);if((await this.workbenchThemeService.getProductIconThemes()).some(r=>_(r,e)))return this.instantiationService.createInstance($)}async install(e){try{return await this.extensionsWorkbenchService.install(e,this.options)}catch(t){await this.instantiationService.createInstance(te,e,this.options,e.latestVersion,Ce.Install,t).run();return}}async getRunningExtension(e){const t=await this.runtimeExtensionService.getExtension(e.identifier.id);return t||(this.runtimeExtensionService.canAddExtension(Ve(e))?new Promise((n,o)=>{const r=this.runtimeExtensionService.onDidChangeExtensions(async()=>{const l=await this.runtimeExtensionService.getExtension(e.identifier.id);l&&(r.dispose(),n(l))})}):null)}updateLabel(){this.label=this.getLabel()}getLabel(e){return this.extension?.isWorkspaceScoped&&this.extension.resourceExtension&&this.contextService.isInsideWorkspace(this.extension.resourceExtension.location)?i("install workspace version","Install Workspace Extension"):this.options.installPreReleaseVersion&&this.extension?.hasPreReleaseVersion?e?i("install pre-release","Install Pre-Release"):i("install pre-release version","Install Pre-Release Version"):this.extension?.hasPreReleaseVersion?e?i("install","Install"):i("install release version","Install Release Version"):i("install","Install")}};I=p([s(1,v),s(2,y),s(3,M),s(4,Te),s(5,$t),s(6,We),s(7,Cn),s(8,Vt),s(9,ge)],I);let qe=class extends St{set manifest(a){this.extensionActions.forEach(e=>e.manifest=a),this.update()}constructor(a,e){super("extensions.installActions",I.CLASS,[[a.createInstance(I,{installPreReleaseVersion:e.preferPreReleases}),a.createInstance(I,{installPreReleaseVersion:!e.preferPreReleases})]])}getLabel(a){return a.getLabel(!0)}};qe=p([s(0,y),s(1,v)],qe);class et extends h{static LABEL=i("installing","Installing");static CLASS=`${h.LABEL_ACTION_CLASS} install installing`;constructor(){super("extension.installing",et.LABEL,et.CLASS,!1)}update(){this.class=`${et.CLASS}${this.extension&&this.extension.state===x.Installing?"":" hide"}`}}let E=class extends h{constructor(e,t,n,o,r,l){super(e,E.INSTALL_LABEL,E.Class,!1);this.server=t;this.canInstallAnyWhere=n;this.extensionsWorkbenchService=o;this.extensionManagementServerService=r;this.extensionManifestPropertiesService=l;this.update()}static INSTALL_LABEL=i("install","Install");static INSTALLING_LABEL=i("installing","Installing");static Class=`${h.LABEL_ACTION_CLASS} prominent install-other-server`;static InstallingClass=`${h.LABEL_ACTION_CLASS} install-other-server installing`;updateWhenCounterExtensionChanges=!0;update(){if(this.enabled=!1,this.class=E.Class,this.canInstall()){const e=this.extensionsWorkbenchService.installed.filter(t=>L(t.identifier,this.extension.identifier)&&t.server===this.server)[0];e?e.state===x.Installing&&!e.local&&(this.enabled=!0,this.label=E.INSTALLING_LABEL,this.class=E.InstallingClass):(this.enabled=!0,this.label=this.getInstallLabel())}}canInstall(){return!this.extension||!this.server||!this.extension.local||this.extension.state!==x.Installed||this.extension.type!==Lt.User||this.extension.enablementState===b.DisabledByEnvironment||this.extension.enablementState===b.DisabledByTrustRequirement||this.extension.enablementState===b.DisabledByVirtualWorkspace?!1:!!(Wt(this.extension.local.manifest)||this.server===this.extensionManagementServerService.localExtensionManagementServer&&this.extensionManifestPropertiesService.prefersExecuteOnUI(this.extension.local.manifest)||this.server===this.extensionManagementServerService.remoteExtensionManagementServer&&this.extensionManifestPropertiesService.prefersExecuteOnWorkspace(this.extension.local.manifest)||this.server===this.extensionManagementServerService.webExtensionManagementServer&&this.extensionManifestPropertiesService.prefersExecuteOnWeb(this.extension.local.manifest)||this.canInstallAnyWhere&&(this.server===this.extensionManagementServerService.localExtensionManagementServer&&this.extensionManifestPropertiesService.canExecuteOnUI(this.extension.local.manifest)||this.server===this.extensionManagementServerService.remoteExtensionManagementServer&&this.extensionManifestPropertiesService.canExecuteOnWorkspace(this.extension.local.manifest)))}async run(){if(this.extension?.local&&this.extension?.server&&this.server)return this.extensionsWorkbenchService.open(this.extension),T(i("installExtensionStart","Installing extension {0} started. An editor is now open with more details on this extension",this.extension.displayName)),this.extensionsWorkbenchService.installInServer(this.extension,this.server)}};E=p([s(3,v),s(4,U),s(5,Ie)],E);let Pe=class extends E{constructor(a,e,t,n){super("extensions.remoteinstall",t.remoteExtensionManagementServer,a,e,t,n)}getInstallLabel(){return this.extensionManagementServerService.remoteExtensionManagementServer?i({key:"install in remote",comment:["This is the name of the action to install an extension in remote server. Placeholder is for the name of remote server."]},"Install in {0}",this.extensionManagementServerService.remoteExtensionManagementServer.label):E.INSTALL_LABEL}};Pe=p([s(1,v),s(2,U),s(3,Ie)],Pe);let Qe=class extends E{constructor(a,e,t){super("extensions.localinstall",e.localExtensionManagementServer,!1,a,e,t)}getInstallLabel(){return i("install locally","Install Locally")}};Qe=p([s(0,v),s(1,U),s(2,Ie)],Qe);let Ke=class extends E{constructor(a,e,t){super("extensions.webInstall",e.webExtensionManagementServer,!1,a,e,t)}getInstallLabel(){return i("install browser","Install in Browser")}};Ke=p([s(0,v),s(1,U),s(2,Ie)],Ke);let k=class extends h{constructor(e,t){super("extensions.uninstall",k.UninstallLabel,k.UninstallClass,!1);this.extensionsWorkbenchService=e;this.dialogService=t;this.update()}static UninstallLabel=i("uninstallAction","Uninstall");static UninstallingLabel=i("Uninstalling","Uninstalling");static UninstallClass=`${h.LABEL_ACTION_CLASS} uninstall`;static UnInstallingClass=`${h.LABEL_ACTION_CLASS} uninstall uninstalling`;update(){if(!this.extension){this.enabled=!1;return}const e=this.extension.state;if(e===x.Uninstalling){this.label=k.UninstallingLabel,this.class=k.UnInstallingClass,this.enabled=!1;return}if(this.label=k.UninstallLabel,this.class=k.UninstallClass,this.tooltip=k.UninstallLabel,e!==x.Installed){this.enabled=!1;return}if(this.extension.isBuiltin){this.enabled=!1;return}this.enabled=!0}async run(){if(this.extension){T(i("uninstallExtensionStart","Uninstalling extension {0} started.",this.extension.displayName));try{await this.extensionsWorkbenchService.uninstall(this.extension),T(i("uninstallExtensionComplete","Please reload Visual Studio Code to complete the uninstallation of the extension {0}.",this.extension.displayName))}catch(e){Bt(e)||this.dialogService.error(Me(e))}}}};k=p([s(0,v),s(1,We)],k);let z=class extends h{constructor(e,t,n,o,r){super("extensions.update",i("update","Update"),z.DisabledClass,!1);this.verbose=e;this.extensionsWorkbenchService=t;this.dialogService=n;this.openerService=o;this.instantiationService=r;this.update()}static EnabledClass=`${this.LABEL_ACTION_CLASS} prominent update`;static DisabledClass=`${this.EnabledClass} disabled`;updateThrottler=new it;update(){this.updateThrottler.queue(()=>this.computeAndUpdateEnablement()),this.extension&&(this.label=this.verbose?i("update to","Update to v{0}",this.extension.latestVersion):i("update","Update"))}async computeAndUpdateEnablement(){if(this.enabled=!1,this.class=z.DisabledClass,!this.extension||this.extension.deprecationInfo)return;const e=await this.extensionsWorkbenchService.canInstall(this.extension),t=this.extension.state===x.Installed;this.enabled=e&&t&&this.extension.outdated,this.class=this.enabled?z.EnabledClass:z.DisabledClass}async run(){if(!this.extension)return;const e=await this.extensionsWorkbenchService.shouldRequireConsentToUpdate(this.extension);if(e){const{result:t}=await this.dialogService.prompt({type:"warning",title:i("updateExtensionConsentTitle","Update {0} Extension",this.extension.displayName),message:i("updateExtensionConsent",`{0}

Would you like to update the extension?`,e),buttons:[{label:i("update","Update"),run:()=>"update"},{label:i("review","Review"),run:()=>"review"},{label:i("cancel","Cancel"),run:()=>"cancel"}]});if(t==="cancel")return;if(t==="review")return this.extension.hasChangelog()?this.extensionsWorkbenchService.open(this.extension,{tab:$e.Changelog}):this.extension.repository?this.openerService.open(this.extension.repository):this.extensionsWorkbenchService.open(this.extension)}return T(i("updateExtensionStart","Updating extension {0} to version {1} started.",this.extension.displayName,this.extension.latestVersion)),this.install(this.extension)}async install(e){const t=e.local?.preRelease?{installPreReleaseVersion:!0}:void 0;try{await this.extensionsWorkbenchService.install(e,t),T(i("updateExtensionComplete","Updating extension {0} to version {1} completed.",e.displayName,e.latestVersion))}catch(n){this.instantiationService.createInstance(te,e,t,e.latestVersion,Ce.Update,n).run()}}};z=p([s(1,v),s(2,We),s(3,At),s(4,y)],z);let D=class extends h{constructor(e,t,n){super(D.ID,D.LABEL.value,D.DisabledClass);this.extensionsWorkbenchService=e;this.extensionEnablementService=t;this._register(n.onDidChangeConfiguration(o=>{o.affectsConfiguration(Zt)&&this.update()})),this.update()}static ID="workbench.extensions.action.toggleAutoUpdateForExtension";static LABEL=be("enableAutoUpdateLabel","Auto Update");static EnabledClass=`${h.EXTENSION_ACTION_CLASS} auto-update`;static DisabledClass=`${this.EnabledClass} hide`;update(){this.enabled=!1,this.class=D.DisabledClass,this.extension&&(this.extension.isBuiltin||this.extension.deprecationInfo?.disallowInstall||this.extensionsWorkbenchService.getAutoUpdateValue()==="onlyEnabledExtensions"&&!this.extensionEnablementService.isEnabledEnablementState(this.extension.enablementState)||(this.enabled=!0,this.class=D.EnabledClass,this.checked=this.extensionsWorkbenchService.isAutoUpdateEnabledFor(this.extension)))}async run(){if(!this.extension)return;const e=!this.extensionsWorkbenchService.isAutoUpdateEnabledFor(this.extension);await this.extensionsWorkbenchService.updateAutoUpdateEnablementFor(this.extension,e),e?T(i("enableAutoUpdate","Enabled auto updates for",this.extension.displayName)):T(i("disableAutoUpdate","Disabled auto updates for",this.extension.displayName))}};D=p([s(0,v),s(1,w),s(2,Nt)],D);let ne=class extends h{constructor(e){super(ne.ID,ne.LABEL);this.extensionsWorkbenchService=e}static ID="workbench.extensions.action.toggleAutoUpdatesForPublisher";static LABEL=i("toggleAutoUpdatesForPublisherLabel","Auto Update All (From Publisher)");update(){}async run(){if(!this.extension)return;T(i("ignoreExtensionUpdatePublisher","Ignoring updates published by {0}.",this.extension.publisherDisplayName));const e=!this.extensionsWorkbenchService.isAutoUpdateEnabledFor(this.extension.publisher);await this.extensionsWorkbenchService.updateAutoUpdateEnablementFor(this.extension.publisher,e),e?T(i("enableAutoUpdate","Enabled auto updates for",this.extension.displayName)):T(i("disableAutoUpdate","Disabled auto updates for",this.extension.displayName))}};ne=p([s(0,v)],ne);let ie=class extends h{constructor(e,t){super("extensionsAction.migrateDeprecatedExtension",i("migrateExtension","Migrate"),ie.DisabledClass,!1);this.small=e;this.extensionsWorkbenchService=t;this.update()}static EnabledClass=`${h.LABEL_ACTION_CLASS} migrate`;static DisabledClass=`${this.EnabledClass} disabled`;update(){if(this.enabled=!1,this.class=ie.DisabledClass,!this.extension?.local||this.extension.state!==x.Installed||!this.extension.deprecationInfo?.extension)return;const e=this.extension.deprecationInfo.extension.id;this.extensionsWorkbenchService.local.some(t=>L(t.identifier,{id:e}))||(this.enabled=!0,this.class=ie.EnabledClass,this.tooltip=i("migrate to","Migrate to {0}",this.extension.deprecationInfo.extension.displayName),this.label=this.small?i("migrate","Migrate"):this.tooltip)}async run(){if(!this.extension?.deprecationInfo?.extension)return;const e=this.extension.local;await this.extensionsWorkbenchService.uninstall(this.extension);const[t]=await this.extensionsWorkbenchService.getExtensions([{id:this.extension.deprecationInfo.extension.id,preRelease:this.extension.deprecationInfo?.extension?.preRelease}],ce.None);await this.extensionsWorkbenchService.install(t,{isMachineScoped:e?.isMachineScoped})}};ie=p([s(1,v)],ie);let he=class extends h{constructor(e,t,n,o,r){super(e,t,n,o);this.instantiationService=r}_actionViewItem=null;createActionViewItem(e){return this._actionViewItem=this.instantiationService.createInstance(De,this,e),this._actionViewItem}run({actionGroups:e,disposeActionsOnHide:t}){return this._actionViewItem?.showMenu(e,t),Promise.resolve()}};he=p([s(4,y)],he);let De=class extends mn{constructor(e,t,n){super(null,e,{...t,icon:!0,label:!0});this.contextMenuService=n}showMenu(e,t){if(this.element){const n=this.getActions(e),o=qt.getDomNodePagePosition(this.element),r={x:o.left,y:o.top+o.height+10};this.contextMenuService.showContextMenu({getAnchor:()=>r,getActions:()=>n,actionRunner:this.actionRunner,onHide:()=>{t&&Kt(n)}})}}getActions(e){let t=[];for(const n of e)t=[...t,...n,new yt];return t.length?t.slice(0,t.length-1):t}};De=p([s(2,Qt)],De);async function _t(c,a,e){return e.invokeFunction(async t=>{const n=t.get(v),o=t.get(w),r=t.get(pn),l=t.get(sn),d=t.get(rt),S=t.get(Te),R=t.get(Nn),u=[];if(c){switch(u.push(["extension",c.identifier.id]),u.push(["isBuiltinExtension",c.isBuiltin]),u.push(["isDefaultApplicationScopedExtension",c.local&&rn(c.local.manifest)]),u.push(["isApplicationScopedExtension",c.local&&c.local.isApplicationScoped]),u.push(["isWorkspaceScopedExtension",c.isWorkspaceScoped]),u.push(["isGalleryExtension",!!c.identifier.uuid]),c.local&&u.push(["extensionSource",c.local.source]),u.push(["extensionHasConfiguration",c.local&&!!c.local.manifest.contributes&&!!c.local.manifest.contributes.configuration]),u.push(["extensionHasKeybindings",c.local&&!!c.local.manifest.contributes&&!!c.local.manifest.contributes.keybindings]),u.push(["extensionHasCommands",c.local&&!!c.local.manifest.contributes&&!!c.local.manifest.contributes?.commands]),u.push(["isExtensionRecommended",!!l.getAllRecommendationsWithReason()[c.identifier.id.toLowerCase()]]),u.push(["isExtensionWorkspaceRecommended",l.getAllRecommendationsWithReason()[c.identifier.id.toLowerCase()]?.reasonId===nn.Workspace]),u.push(["isUserIgnoredRecommendation",d.globalIgnoredRecommendations.some(ae=>ae===c.identifier.id.toLowerCase())]),u.push(["isExtensionPinned",c.pinned]),u.push(["isExtensionEnabled",o.isEnabledEnablementState(c.enablementState)]),c.state){case x.Installing:u.push(["extensionStatus","installing"]);break;case x.Installed:u.push(["extensionStatus","installed"]);break;case x.Uninstalling:u.push(["extensionStatus","uninstalling"]);break;case x.Uninstalled:u.push(["extensionStatus","uninstalled"]);break}u.push(["installedExtensionIsPreReleaseVersion",!!c.local?.isPreReleaseVersion]),u.push(["installedExtensionIsOptedToPreRelease",!!c.local?.preRelease]),u.push(["galleryExtensionIsPreReleaseVersion",!!c.gallery?.properties.isPreReleaseVersion]),u.push(["galleryExtensionHasPreReleaseVersion",c.gallery?.hasPreReleaseVersion]),u.push(["extensionHasPreReleaseVersion",c.hasPreReleaseVersion]),u.push(["extensionHasReleaseVersion",c.hasReleaseVersion]),u.push(["extensionDisallowInstall",!!c.deprecationInfo?.disallowInstall]),u.push(["extensionIsUnsigned",c.gallery&&!c.gallery.isSigned]);const[tt,gt,It,Et]=await Promise.all([S.getColorThemes(),S.getFileIconThemes(),S.getProductIconThemes(),R.extensionUsesAuth(c.identifier.id.toLowerCase())]);u.push(["extensionHasColorThemes",tt.some(ae=>_(ae,c))]),u.push(["extensionHasFileIconThemes",gt.some(ae=>_(ae,c))]),u.push(["extensionHasProductIconThemes",It.some(ae=>_(ae,c))]),u.push(["extensionHasAccountPreferences",Et]),u.push(["canSetLanguage",n.canSetLanguage(c)]),u.push(["isActiveLanguagePackExtension",c.gallery&&vt===mt(c.gallery)])}return r.getMenuActions(un.ExtensionContext,a.createOverlay(u),{shouldForwardArgs:!0})})}function Ne(c,a){const e=[];for(const[,t]of c)e.push(t.map(n=>n instanceof Ht?n:a.createInstance(Ae,n)));return e}async function An(c,a,e){const t=await _t(c,a,e);return Ne(t,e)}let Z=class extends he{constructor(e,t,n){super(Z.ID,"","",!0,e);this.extensionService=t;this.contextKeyService=n;this.tooltip=i("manage","Manage"),this.update()}static ID="extensions.manage";static Class=`${h.ICON_ACTION_CLASS} manage `+g.asClassName(Ot);static HideManageExtensionClass=`${this.Class} hide`;async getActionGroups(){const e=[],t=await _t(this.extension,this.contextKeyService,this.instantiationService),n=[],o=[],r=[],l=[];for(const[d,S]of t)d===Yt?o.push(...Ne([[d,S]],this.instantiationService)[0]):d===zt?r.push(...Ne([[d,S]],this.instantiationService)[0]):d===Jt?n.push(...Ne([[d,S]],this.instantiationService)[0]):l.push(...Ne([[d,S]],this.instantiationService));return n.length&&e.push(n),e.push([this.instantiationService.createInstance(j),this.instantiationService.createInstance(X)]),e.push([this.instantiationService.createInstance(Y),this.instantiationService.createInstance(J)]),r.length&&e.push(r),e.push([...o.length?o:[],this.instantiationService.createInstance(F,this.extension,!1),this.instantiationService.createInstance(k)]),l.forEach(d=>e.push(d)),e.forEach(d=>d.forEach(S=>{S instanceof h&&(S.extension=this.extension)})),e}async run(){return await this.extensionService.whenInstalledExtensionsRegistered(),super.run({actionGroups:await this.getActionGroups(),disposeActionsOnHide:!0})}update(){if(this.class=Z.HideManageExtensionClass,this.enabled=!1,this.extension){const e=this.extension.state;this.enabled=e===x.Installed,this.class=this.enabled||e===x.Uninstalling?Z.Class:Z.HideManageExtensionClass}}};Z=p([s(0,y),s(1,M),s(2,hn)],Z);class Ms extends he{constructor(e,t){super("extensionEditor.manageExtension","",`${h.ICON_ACTION_CLASS} manage ${g.asClassName(Ot)}`,!0,t);this.contextKeyService=e;this.tooltip=i("manage","Manage")}update(){}async run(){const e=[];return(await An(this.extension,this.contextKeyService,this.instantiationService)).forEach(t=>e.push(t)),e.forEach(t=>t.forEach(n=>{n instanceof h&&(n.extension=this.extension)})),super.run({actionGroups:e,disposeActionsOnHide:!0})}}let Ae=class extends h{constructor(e,t){super(e.id,e.label);this.action=e;this.extensionsWorkbenchService=t}get enabled(){return this.action.enabled}set enabled(e){this.action.enabled=e}update(){this.extension&&(this.action.id===Xt?this.checked=!this.extensionsWorkbenchService.isExtensionIgnoredToSync(this.extension):this.action.id===D.ID?this.checked=this.extensionsWorkbenchService.isAutoUpdateEnabledFor(this.extension):this.action.id===ne.ID?this.checked=this.extensionsWorkbenchService.isAutoUpdateEnabledFor(this.extension.publisher):this.checked=this.action.checked)}async run(){if(this.extension){const e=this.extension.local?wt(this.extension.local.manifest.publisher,this.extension.local.manifest.name):this.extension.gallery?wt(this.extension.gallery.publisher,this.extension.gallery.name):this.extension.identifier.id,t={id:this.extension.identifier.id,version:this.extension.version,location:this.extension.local?.location};await this.action.run(e,t)}}};Ae=p([s(1,v)],Ae);let G=class extends h{constructor(e){super(G.ID,G.LABEL,G.DisabledClass);this.extensionsWorkbenchService=e;this.update()}static ID="workbench.extensions.action.togglePreRlease";static LABEL=i("togglePreRleaseLabel","Pre-Release");static EnabledClass=`${h.LABEL_ACTION_CLASS} pre-release`;static DisabledClass=`${this.EnabledClass} hide`;update(){this.enabled=!1,this.class=G.DisabledClass,this.extension&&(this.extension.isBuiltin||this.extension.state===x.Installed&&this.extension.hasPreReleaseVersion&&this.extension.gallery&&(this.extension.preRelease&&!this.extension.isPreReleaseVersion||!this.extension.preRelease&&!this.extension.gallery.hasPreReleaseVersion||(this.enabled=!0,this.class=G.EnabledClass,this.extension.preRelease?(this.label=i("togglePreRleaseDisableLabel","Switch to Release Version"),this.tooltip=i("togglePreRleaseDisableTooltip","This will switch and enable updates to release versions")):(this.label=i("switchToPreReleaseLabel","Switch to Pre-Release Version"),this.tooltip=i("switchToPreReleaseTooltip","This will switch to pre-release version and enable updates to latest version always")))))}async run(){this.extension&&(this.extensionsWorkbenchService.open(this.extension,{showPreReleaseVersion:!this.extension.preRelease}),await this.extensionsWorkbenchService.togglePreRelease(this.extension))}};G=p([s(0,v)],G);let F=class extends h{constructor(e,t,n,o,r,l,d,S){super(F.ID,F.LABEL,h.LABEL_ACTION_CLASS);this.whenInstalled=t;this.extensionsWorkbenchService=n;this.extensionManagementService=o;this.extensionGalleryService=r;this.quickInputService=l;this.instantiationService=d;this.dialogService=S;this.extension=e,this.update()}static ID="workbench.extensions.action.install.anotherVersion";static LABEL=i("install another version","Install Specific Version...");update(){this.enabled=!!this.extension&&!this.extension.isBuiltin&&!!this.extension.identifier.uuid&&!this.extension.deprecationInfo,this.enabled&&this.whenInstalled&&(this.enabled=!!this.extension?.local&&!!this.extension.server&&this.extension.state===x.Installed)}async run(){if(!this.enabled||!this.extension)return;const e=this.extension.server?await this.extension.server.extensionManagementService.getTargetPlatform():await this.extensionManagementService.getTargetPlatform(),t=await this.extensionGalleryService.getAllCompatibleVersions(this.extension.identifier,this.extension.local?.preRelease??this.extension.gallery?.properties.isPreReleaseVersion??!1,e);if(!t.length){await this.dialogService.info(i("no versions","This extension has no other versions."));return}const n=t.map((r,l)=>({id:r.version,label:r.version,description:`${kn(new Date(Date.parse(r.date)),!0)}${r.isPreReleaseVersion?` (${i("pre-release","pre-release")})`:""}${r.version===this.extension?.local?.manifest.version?` (${i("current","current")})`:""}`,ariaLabel:`${r.isPreReleaseVersion?"Pre-Release version":"Release version"} ${r.version}`,isPreReleaseVersion:r.isPreReleaseVersion})),o=await this.quickInputService.pick(n,{placeHolder:i("selectVersion","Select Version to Install"),matchOnDetail:!0});if(o){if(this.extension.local?.manifest.version===o.id)return;const r={installPreReleaseVersion:o.isPreReleaseVersion,version:o.id};try{await this.extensionsWorkbenchService.install(this.extension,r)}catch(l){this.instantiationService.createInstance(te,this.extension,r,o.id,Ce.Install,l).run()}}return null}};F=p([s(2,v),s(3,tn),s(4,Re),s(5,K),s(6,y),s(7,We)],F);let X=class extends h{constructor(e,t){super(X.ID,X.LABEL,h.LABEL_ACTION_CLASS);this.extensionsWorkbenchService=e;this.extensionEnablementService=t;this.tooltip=i("enableForWorkspaceActionToolTip","Enable this extension only in this workspace"),this.update()}static ID="extensions.enableForWorkspace";static LABEL=i("enableForWorkspaceAction","Enable (Workspace)");update(){this.enabled=!1,this.extension&&this.extension.local&&!this.extension.isWorkspaceScoped&&(this.enabled=this.extension.state===x.Installed&&!this.extensionEnablementService.isEnabled(this.extension.local)&&this.extensionEnablementService.canChangeWorkspaceEnablement(this.extension.local))}async run(){if(this.extension)return this.extensionsWorkbenchService.setEnablement(this.extension,b.EnabledWorkspace)}};X=p([s(0,v),s(1,w)],X);let j=class extends h{constructor(e,t){super(j.ID,j.LABEL,h.LABEL_ACTION_CLASS);this.extensionsWorkbenchService=e;this.extensionEnablementService=t;this.tooltip=i("enableGloballyActionToolTip","Enable this extension"),this.update()}static ID="extensions.enableGlobally";static LABEL=i("enableGloballyAction","Enable");update(){this.enabled=!1,this.extension&&this.extension.local&&!this.extension.isWorkspaceScoped&&(this.enabled=this.extension.state===x.Installed&&this.extensionEnablementService.isDisabledGlobally(this.extension.local)&&this.extensionEnablementService.canChangeEnablement(this.extension.local))}async run(){if(this.extension)return this.extensionsWorkbenchService.setEnablement(this.extension,b.EnabledGlobally)}};j=p([s(0,v),s(1,w)],j);let J=class extends h{constructor(e,t,n,o){super(J.ID,J.LABEL,h.LABEL_ACTION_CLASS);this.workspaceContextService=e;this.extensionsWorkbenchService=t;this.extensionEnablementService=n;this.extensionService=o;this.tooltip=i("disableForWorkspaceActionToolTip","Disable this extension only in this workspace"),this.update(),this._register(this.extensionService.onDidChangeExtensions(()=>this.update()))}static ID="extensions.disableForWorkspace";static LABEL=i("disableForWorkspaceAction","Disable (Workspace)");update(){this.enabled=!1,this.extension&&this.extension.local&&!this.extension.isWorkspaceScoped&&this.extensionService.extensions.some(e=>L({id:e.identifier.value,uuid:e.uuid},this.extension.identifier)&&this.workspaceContextService.getWorkbenchState()!==Ue.EMPTY)&&(this.enabled=this.extension.state===x.Installed&&(this.extension.enablementState===b.EnabledGlobally||this.extension.enablementState===b.EnabledWorkspace)&&this.extensionEnablementService.canChangeWorkspaceEnablement(this.extension.local))}async run(){if(this.extension)return this.extensionsWorkbenchService.setEnablement(this.extension,b.DisabledWorkspace)}};J=p([s(0,ge),s(1,v),s(2,w),s(3,M)],J);let Y=class extends h{constructor(e,t,n){super(Y.ID,Y.LABEL,h.LABEL_ACTION_CLASS);this.extensionsWorkbenchService=e;this.extensionEnablementService=t;this.extensionService=n;this.tooltip=i("disableGloballyActionToolTip","Disable this extension"),this.update(),this._register(this.extensionService.onDidChangeExtensions(()=>this.update()))}static ID="extensions.disableGlobally";static LABEL=i("disableGloballyAction","Disable");update(){this.enabled=!1,this.extension&&this.extension.local&&!this.extension.isWorkspaceScoped&&this.extensionService.extensions.some(e=>L({id:e.identifier.value,uuid:e.uuid},this.extension.identifier))&&(this.enabled=this.extension.state===x.Installed&&(this.extension.enablementState===b.EnabledGlobally||this.extension.enablementState===b.EnabledWorkspace)&&this.extensionEnablementService.canChangeEnablement(this.extension.local))}async run(){if(this.extension)return this.extensionsWorkbenchService.setEnablement(this.extension,b.DisabledGlobally)}};Y=p([s(0,v),s(1,w),s(2,M)],Y);let Xe=class extends St{constructor(a){super("extensions.enable",h.LABEL_ACTION_CLASS,[[a.createInstance(j),a.createInstance(X)]])}};Xe=p([s(0,y)],Xe);let je=class extends St{constructor(a){super("extensions.disable",h.LABEL_ACTION_CLASS,[[a.createInstance(Y),a.createInstance(J)]])}};je=p([s(0,y)],je);let se=class extends h{constructor(e,t,n,o,r,l){super("extensions.runtimeState","",se.DisabledClass,!1);this.hostService=e;this.extensionsWorkbenchService=t;this.updateService=n;this.extensionService=o;this.productService=r;this.telemetryService=l;this._register(this.extensionService.onDidChangeExtensions(()=>this.update())),this.update()}static EnabledClass=`${h.LABEL_ACTION_CLASS} reload`;static DisabledClass=`${this.EnabledClass} disabled`;updateWhenCounterExtensionChanges=!0;update(){if(this.enabled=!1,this.tooltip="",this.class=se.DisabledClass,!this.extension)return;const e=this.extension.state;if(e===x.Installing||e===x.Uninstalling||this.extension.local&&this.extension.local.manifest&&this.extension.local.manifest.contributes&&this.extension.local.manifest.contributes.localizations&&this.extension.local.manifest.contributes.localizations.length>0)return;const t=this.extension.runtimeState;t&&(this.enabled=!0,this.class=se.EnabledClass,this.tooltip=t.reason,this.label=t.action===B.ReloadWindow?i("reload window","Reload Window"):t.action===B.RestartExtensions?i("restart extensions","Restart Extensions"):t.action===B.QuitAndInstall?i("restart product","Restart to Update"):t.action===B.ApplyUpdate||t.action===B.DownloadUpdate?i("update product","Update {0}",this.productService.nameShort):"")}async run(){const e=this.extension?.runtimeState;if(e?.action){if(this.telemetryService.publicLog2("extensions:runtimestate:action",{action:e.action}),e?.action===B.ReloadWindow)return this.hostService.reload();if(e?.action===B.RestartExtensions)return this.extensionsWorkbenchService.updateRunningExtensions();if(e?.action===B.DownloadUpdate)return this.updateService.downloadUpdate();if(e?.action===B.ApplyUpdate)return this.updateService.applyUpdate();if(e?.action===B.QuitAndInstall)return this.updateService.quitAndInstall()}}};se=p([s(0,Mt),s(1,v),s(2,Pn),s(3,M),s(4,ht),s(5,Vt)],se);function _(c,a){return!!(a&&c.extensionData&&Tt.equals(c.extensionData.extensionId,a.identifier.id))}function bt(c,a,e,t){const n=[];for(const o of c)_(o,e)&&!(t&&o===a)&&n.push({label:o.label,id:o.id});return t&&(n.push({type:"separator",label:i("current","current")}),n.push({label:a.label,id:a.id})),n}let N=class extends h{constructor(e,t,n,o){super(N.ID,N.TITLE.value,N.DisabledClass,!1);this.workbenchThemeService=t;this.quickInputService=n;this.extensionEnablementService=o;this._register(ke.any(e.onDidChangeExtensions,t.onDidColorThemeChange)(()=>this.update(),this)),this.update()}static ID="workbench.extensions.action.setColorTheme";static TITLE=be("workbench.extensions.action.setColorTheme","Set Color Theme");static EnabledClass=`${h.LABEL_ACTION_CLASS} theme`;static DisabledClass=`${this.EnabledClass} disabled`;update(){this.workbenchThemeService.getColorThemes().then(e=>{this.enabled=this.computeEnablement(e),this.class=this.enabled?N.EnabledClass:N.DisabledClass})}computeEnablement(e){return!!this.extension&&this.extension.state===x.Installed&&this.extensionEnablementService.isEnabledEnablementState(this.extension.enablementState)&&e.some(t=>_(t,this.extension))}async run({showCurrentTheme:e,ignoreFocusLost:t}={showCurrentTheme:!1,ignoreFocusLost:!1}){const n=await this.workbenchThemeService.getColorThemes();if(!this.computeEnablement(n))return;const o=this.workbenchThemeService.getColorTheme(),r=new nt(100),l=bt(n,o,this.extension,e),d=await this.quickInputService.pick(l,{placeHolder:i("select color theme","Select Color Theme"),onDidFocus:S=>r.trigger(()=>this.workbenchThemeService.setColorTheme(S.id,void 0)),ignoreFocusLost:t});return this.workbenchThemeService.setColorTheme(d?d.id:o.id,"auto")}};N=p([s(0,M),s(1,Te),s(2,K),s(3,w)],N);let A=class extends h{constructor(e,t,n,o){super(A.ID,A.TITLE.value,A.DisabledClass,!1);this.workbenchThemeService=t;this.quickInputService=n;this.extensionEnablementService=o;this._register(ke.any(e.onDidChangeExtensions,t.onDidFileIconThemeChange)(()=>this.update(),this)),this.update()}static ID="workbench.extensions.action.setFileIconTheme";static TITLE=be("workbench.extensions.action.setFileIconTheme","Set File Icon Theme");static EnabledClass=`${h.LABEL_ACTION_CLASS} theme`;static DisabledClass=`${this.EnabledClass} disabled`;update(){this.workbenchThemeService.getFileIconThemes().then(e=>{this.enabled=this.computeEnablement(e),this.class=this.enabled?A.EnabledClass:A.DisabledClass})}computeEnablement(e){return!!this.extension&&this.extension.state===x.Installed&&this.extensionEnablementService.isEnabledEnablementState(this.extension.enablementState)&&e.some(t=>_(t,this.extension))}async run({showCurrentTheme:e,ignoreFocusLost:t}={showCurrentTheme:!1,ignoreFocusLost:!1}){const n=await this.workbenchThemeService.getFileIconThemes();if(!this.computeEnablement(n))return;const o=this.workbenchThemeService.getFileIconTheme(),r=new nt(100),l=bt(n,o,this.extension,e),d=await this.quickInputService.pick(l,{placeHolder:i("select file icon theme","Select File Icon Theme"),onDidFocus:S=>r.trigger(()=>this.workbenchThemeService.setFileIconTheme(S.id,void 0)),ignoreFocusLost:t});return this.workbenchThemeService.setFileIconTheme(d?d.id:o.id,"auto")}};A=p([s(0,M),s(1,Te),s(2,K),s(3,w)],A);let $=class extends h{constructor(e,t,n,o){super($.ID,$.TITLE.value,$.DisabledClass,!1);this.workbenchThemeService=t;this.quickInputService=n;this.extensionEnablementService=o;this._register(ke.any(e.onDidChangeExtensions,t.onDidProductIconThemeChange)(()=>this.update(),this)),this.update()}static ID="workbench.extensions.action.setProductIconTheme";static TITLE=be("workbench.extensions.action.setProductIconTheme","Set Product Icon Theme");static EnabledClass=`${h.LABEL_ACTION_CLASS} theme`;static DisabledClass=`${this.EnabledClass} disabled`;update(){this.workbenchThemeService.getProductIconThemes().then(e=>{this.enabled=this.computeEnablement(e),this.class=this.enabled?$.EnabledClass:$.DisabledClass})}computeEnablement(e){return!!this.extension&&this.extension.state===x.Installed&&this.extensionEnablementService.isEnabledEnablementState(this.extension.enablementState)&&e.some(t=>_(t,this.extension))}async run({showCurrentTheme:e,ignoreFocusLost:t}={showCurrentTheme:!1,ignoreFocusLost:!1}){const n=await this.workbenchThemeService.getProductIconThemes();if(!this.computeEnablement(n))return;const o=this.workbenchThemeService.getProductIconTheme(),r=new nt(100),l=bt(n,o,this.extension,e),d=await this.quickInputService.pick(l,{placeHolder:i("select product icon theme","Select Product Icon Theme"),onDidFocus:S=>r.trigger(()=>this.workbenchThemeService.setProductIconTheme(S.id,void 0)),ignoreFocusLost:t});return this.workbenchThemeService.setProductIconTheme(d?d.id:o.id,"auto")}};$=p([s(0,M),s(1,Te),s(2,K),s(3,w)],$);let H=class extends h{constructor(e){super(H.ID,H.TITLE.value,H.DisabledClass,!1);this.extensionsWorkbenchService=e;this.update()}static ID="workbench.extensions.action.setDisplayLanguage";static TITLE=be("workbench.extensions.action.setDisplayLanguage","Set Display Language");static EnabledClass=`${h.LABEL_ACTION_CLASS} language`;static DisabledClass=`${this.EnabledClass} disabled`;update(){this.enabled=!1,this.class=H.DisabledClass,this.extension&&this.extensionsWorkbenchService.canSetLanguage(this.extension)&&(this.extension.gallery&&vt===mt(this.extension.gallery)||(this.enabled=!0,this.class=H.EnabledClass))}async run(){return this.extension&&this.extensionsWorkbenchService.setLanguage(this.extension)}};H=p([s(0,v)],H);let q=class extends h{constructor(e,t){super(q.ID,q.TITLE.value,q.DisabledClass,!1);this.extensionsWorkbenchService=e;this.localeService=t;this.update()}static ID="workbench.extensions.action.clearLanguage";static TITLE=be("workbench.extensions.action.clearLanguage","Clear Display Language");static EnabledClass=`${h.LABEL_ACTION_CLASS} language`;static DisabledClass=`${this.EnabledClass} disabled`;update(){this.enabled=!1,this.class=q.DisabledClass,this.extension&&this.extensionsWorkbenchService.canSetLanguage(this.extension)&&(this.extension.gallery&&vt!==mt(this.extension.gallery)||(this.enabled=!0,this.class=q.EnabledClass))}async run(){return this.extension&&this.localeService.clearLocalePreference()}};q=p([s(0,v),s(1,wn)],q);let ue=class extends C{constructor(e,t){super(ue.ID,ue.LABEL,void 0,!1);this.extensionWorkbenchService=t;this.extensionId=e}static ID="workbench.extensions.action.showRecommendedExtension";static LABEL=i("showRecommendedExtension","Show Recommended Extension");extensionId;async run(){await this.extensionWorkbenchService.openSearch(`@id:${this.extensionId}`);const[e]=await this.extensionWorkbenchService.getExtensions([{id:this.extensionId}],{source:"install-recommendation"},ce.None);return e?this.extensionWorkbenchService.open(e):null}};ue=p([s(1,v)],ue);let pe=class extends C{constructor(e,t,n){super(pe.ID,pe.LABEL,void 0,!1);this.instantiationService=t;this.extensionWorkbenchService=n;this.extensionId=e}static ID="workbench.extensions.action.installRecommendedExtension";static LABEL=i("installRecommendedExtension","Install Recommended Extension");extensionId;async run(){await this.extensionWorkbenchService.openSearch(`@id:${this.extensionId}`);const[e]=await this.extensionWorkbenchService.getExtensions([{id:this.extensionId}],{source:"install-recommendation"},ce.None);if(e){await this.extensionWorkbenchService.open(e);try{await this.extensionWorkbenchService.install(e)}catch(t){this.instantiationService.createInstance(te,e,void 0,e.latestVersion,Ce.Install,t).run()}}}};pe=p([s(1,y),s(2,v)],pe);let xe=class extends C{constructor(e,t){super(xe.ID,"Ignore Recommendation");this.extension=e;this.extensionRecommendationsManagementService=t;this.class=xe.Class,this.tooltip=i("ignoreExtensionRecommendation","Do not recommend this extension again"),this.enabled=!0}static ID="extensions.ignore";static Class=`${h.LABEL_ACTION_CLASS} ignore`;run(){return this.extensionRecommendationsManagementService.toggleGlobalIgnoredRecommendation(this.extension.identifier.id,!0),Promise.resolve()}};xe=p([s(1,rt)],xe);let ve=class extends C{constructor(e,t){super(ve.ID,"Undo");this.extension=e;this.extensionRecommendationsManagementService=t;this.class=ve.Class,this.tooltip=i("undo","Undo"),this.enabled=!0}static ID="extensions.ignore";static Class=`${h.LABEL_ACTION_CLASS} undo-ignore`;run(){return this.extensionRecommendationsManagementService.toggleGlobalIgnoredRecommendation(this.extension.identifier.id,!1),Promise.resolve()}};ve=p([s(1,rt)],ve);let Ee=class extends C{constructor(e,t,n,o,r,l,d,S){super(e,t);this.contextService=n;this.fileService=o;this.textFileService=r;this.editorService=l;this.jsonEditingService=d;this.textModelResolverService=S}openExtensionsFile(e){return this.getOrCreateExtensionsFile(e).then(({created:t,content:n})=>this.getSelectionPosition(n,e,["recommendations"]).then(o=>this.editorService.openEditor({resource:e,options:{pinned:t,selection:o}})),t=>Promise.reject(new Error(i("OpenExtensionsFile.failed","Unable to create 'extensions.json' file inside the '.vscode' folder ({0}).",t))))}openWorkspaceConfigurationFile(e){return this.getOrUpdateWorkspaceConfigurationFile(e).then(t=>this.getSelectionPosition(t.value.toString(),t.resource,["extensions","recommendations"])).then(t=>this.editorService.openEditor({resource:e,options:{selection:t,forceReload:!0}}))}getOrUpdateWorkspaceConfigurationFile(e){return Promise.resolve(this.fileService.readFile(e)).then(t=>{const n=st.parse(t.value.toString()).extensions;return!n||!n.recommendations?this.jsonEditingService.write(e,[{path:["extensions"],value:{recommendations:[]}}],!0).then(()=>this.fileService.readFile(e)):t})}getSelectionPosition(e,t,n){const o=st.parseTree(e),r=st.findNodeAtLocation(o,n);if(r&&r.parent&&r.parent.children){const l=r.parent.children[1],d=l.children&&l.children.length?l.children[l.children.length-1]:null,S=d?d.offset+d.length:l.offset+1;return Promise.resolve(this.textModelResolverService.createModelReference(t)).then(R=>{const u=R.object.textEditorModel.getPositionAt(S);return R.dispose(),{startLineNumber:u.lineNumber,startColumn:u.column,endLineNumber:u.lineNumber,endColumn:u.column}})}return Promise.resolve(void 0)}getOrCreateExtensionsFile(e){return Promise.resolve(this.fileService.readFile(e)).then(t=>({created:!1,extensionsFileResource:e,content:t.value.toString()}),t=>this.textFileService.write(e,Ct).then(()=>({created:!0,extensionsFileResource:e,content:Ct})))}};Ee=p([s(2,ge),s(3,we),s(4,dt),s(5,ct),s(6,at),s(7,lt)],Ee);let Je=class extends Ee{static ID="workbench.extensions.action.configureWorkspaceRecommendedExtensions";static LABEL=i("configureWorkspaceRecommendedExtensions","Configure Recommended Extensions (Workspace)");constructor(a,e,t,n,o,r,l,d){super(a,e,o,t,n,r,l,d),this._register(this.contextService.onDidChangeWorkbenchState(()=>this.update(),this)),this.update()}update(){this.enabled=this.contextService.getWorkbenchState()!==Ue.EMPTY}run(){switch(this.contextService.getWorkbenchState()){case Ue.FOLDER:return this.openExtensionsFile(this.contextService.getWorkspace().folders[0].toResource(Rt));case Ue.WORKSPACE:return this.openWorkspaceConfigurationFile(this.contextService.getWorkspace().configuration)}return Promise.resolve()}};Je=p([s(2,we),s(3,dt),s(4,ge),s(5,ct),s(6,at),s(7,lt)],Je);let Ye=class extends Ee{constructor(e,t,n,o,r,l,d,S,R){super(e,t,r,n,o,l,d,S);this.commandService=R}static ID="workbench.extensions.action.configureWorkspaceFolderRecommendedExtensions";static LABEL=i("configureWorkspaceFolderRecommendedExtensions","Configure Recommended Extensions (Workspace Folder)");run(){const t=this.contextService.getWorkspace().folders.length===1?Promise.resolve(this.contextService.getWorkspace().folders[0]):this.commandService.executeCommand(xn);return Promise.resolve(t).then(n=>n?this.openExtensionsFile(n.toResource(Rt)):null)}};Ye=p([s(2,we),s(3,dt),s(4,ge),s(5,ct),s(6,at),s(7,lt),s(8,ot)],Ye);let re=class extends C{constructor(e,t,n){super("extensions.action.statusLabel","",re.DISABLED_CLASS,!1);this.extensionService=e;this.extensionManagementServerService=t;this.extensionEnablementService=n}static ENABLED_CLASS=`${h.TEXT_ACTION_CLASS} extension-status-label`;static DISABLED_CLASS=`${this.ENABLED_CLASS} hide`;initialStatus=null;status=null;version=null;enablementState=null;_extension=null;get extension(){return this._extension}set extension(e){this._extension&&e&&L(this._extension.identifier,e.identifier)||(this.initialStatus=null,this.status=null,this.enablementState=null),this._extension=e,this.update()}update(){const e=this.computeLabel();this.label=e||"",this.class=e?re.ENABLED_CLASS:re.DISABLED_CLASS}computeLabel(){if(!this.extension)return null;const e=this.status,t=this.version,n=this.enablementState;this.status=this.extension.state,this.version=this.extension.version,this.initialStatus===null&&(this.initialStatus=this.status),this.enablementState=this.extension.enablementState;const o=()=>{const l=this.extensionService.extensions.filter(d=>L({id:d.identifier.value,uuid:d.uuid},this.extension.identifier))[0];return this.extension.local?l&&this.extension.version===l.version?!0:this.extensionService.canAddExtension(Ve(this.extension.local)):!1},r=()=>this.extension.local?this.extensionService.extensions.every(l=>!(L({id:l.identifier.value,uuid:l.uuid},this.extension.identifier)&&this.extension.server===this.extensionManagementServerService.getExtensionManagementServer(Pt(l))))?!0:this.extensionService.canRemoveExtension(Ve(this.extension.local)):!1;if(e!==null){if(e===x.Installing&&this.status===x.Installed)return this.initialStatus===x.Uninstalled&&o()?i("installed","Installed"):this.initialStatus===x.Installed&&this.version!==t&&o()?i("updated","Updated"):null;if(e===x.Uninstalling&&this.status===x.Uninstalled)return this.initialStatus=this.status,r()?i("uninstalled","Uninstalled"):null}if(n!==null){const l=this.extensionEnablementService.isEnabledEnablementState(n),d=this.extensionEnablementService.isEnabledEnablementState(this.enablementState);if(!l&&d)return o()?i("enabled","Enabled"):null;if(l&&!d)return r()?i("disabled","Disabled"):null}return null}run(){return Promise.resolve()}};re=p([s(0,M),s(1,U),s(2,w)],re);let oe=class extends he{constructor(e,t,n,o){super("extensions.sync","",oe.SYNC_CLASS,!1,o);this.configurationService=e;this.extensionsWorkbenchService=t;this.userDataSyncEnablementService=n;this._register(ke.filter(this.configurationService.onDidChangeConfiguration,r=>r.affectsConfiguration("settingsSync.ignoredExtensions"))(()=>this.update())),this._register(n.onDidChangeEnablement(()=>this.update())),this.update()}static IGNORED_SYNC_CLASS=`${h.ICON_ACTION_CLASS} extension-sync ${g.asClassName(fn)}`;static SYNC_CLASS=`${this.ICON_ACTION_CLASS} extension-sync ${g.asClassName(bn)}`;update(){if(this.enabled=!!this.extension&&this.userDataSyncEnablementService.isEnabled()&&this.extension.state===x.Installed,this.extension){const e=this.extensionsWorkbenchService.isExtensionIgnoredToSync(this.extension);this.class=e?oe.IGNORED_SYNC_CLASS:oe.SYNC_CLASS,this.tooltip=e?i("ignored","This extension is ignored during sync"):i("synced","This extension is synced")}}async run(){return super.run({actionGroups:[[new C("extensions.syncignore",this.extensionsWorkbenchService.isExtensionIgnoredToSync(this.extension)?i("sync","Sync this extension"):i("do not sync","Do not sync this extension"),void 0,!0,()=>this.extensionsWorkbenchService.toggleExtensionIgnoredToSync(this.extension))]],disposeActionsOnHide:!0})}};oe=p([s(0,Nt),s(1,v),s(2,Sn),s(3,y)],oe);let P=class extends h{constructor(e,t,n,o,r,l,d,S,R,u,ft,tt){super("extensions.status","",`${P.CLASS} hide`,!1);this.extensionManagementServerService=e;this.labelService=t;this.commandService=n;this.workspaceTrustEnablementService=o;this.workspaceTrustService=r;this.extensionsWorkbenchService=l;this.extensionService=d;this.extensionManifestPropertiesService=S;this.contextService=R;this.productService=u;this.workbenchExtensionEnablementService=ft;this.extensionFeaturesManagementService=tt;this._register(this.labelService.onDidChangeFormatters(()=>this.update(),this)),this._register(this.extensionService.onDidChangeExtensions(()=>this.update())),this._register(this.extensionFeaturesManagementService.onDidChangeAccessData(()=>this.update())),this.update()}static CLASS=`${h.ICON_ACTION_CLASS} extension-status`;updateWhenCounterExtensionChanges=!0;_status=[];get status(){return this._status}_onDidChangeStatus=this._register(new kt);onDidChangeStatus=this._onDidChangeStatus.event;updateThrottler=new it;update(){this.updateThrottler.queue(()=>this.computeAndUpdateStatus())}async computeAndUpdateStatus(){if(this.updateStatus(void 0,!0),this.enabled=!1,!this.extension)return;if(this.extension.isMalicious){this.updateStatus({icon:f,message:new m(i("malicious tooltip","This extension was reported to be problematic."))},!0);return}if(this.extension.state===x.Uninstalled&&this.extension.gallery&&!this.extension.gallery.isSigned){this.updateStatus({icon:f,message:new m(i("not signed tooltip","This extension is not signed by the Extension Marketplace."))},!0);return}if(this.extension.deprecationInfo){if(this.extension.deprecationInfo.extension){const r=`[${this.extension.deprecationInfo.extension.displayName}](${Q.parse(`command:extension.open?${encodeURIComponent(JSON.stringify([this.extension.deprecationInfo.extension.id]))}`)})`;this.updateStatus({icon:f,message:new m(i("deprecated with alternate extension tooltip","This extension is deprecated. Use the {0} extension instead.",r))},!0)}else if(this.extension.deprecationInfo.settings){const r=`[${i("settings","settings")}](${Q.parse(`command:workbench.action.openSettings?${encodeURIComponent(JSON.stringify([this.extension.deprecationInfo.settings.map(l=>`@id:${l}`).join(" ")]))}`)})`;this.updateStatus({icon:f,message:new m(i("deprecated with alternate settings tooltip","This extension is deprecated as this functionality is now built-in to VS Code. Configure these {0} to use this functionality.",r))},!0)}else{const r=new m(i("deprecated tooltip","This extension is deprecated as it is no longer being maintained."));this.extension.deprecationInfo.additionalInfo&&r.appendMarkdown(` ${this.extension.deprecationInfo.additionalInfo}`),this.updateStatus({icon:f,message:r},!0)}return}if(this.extensionsWorkbenchService.canSetLanguage(this.extension))return;if(this.extension.outdated&&this.extensionsWorkbenchService.isAutoUpdateEnabledFor(this.extension)){const r=await this.extensionsWorkbenchService.shouldRequireConsentToUpdate(this.extension);if(r){const l=new m;l.appendMarkdown(`${r} `),l.appendMarkdown(i("auto update message","Please [review the extension]({0}) and update it manually.",this.extension.hasChangelog()?Q.parse(`command:extension.open?${encodeURIComponent(JSON.stringify([this.extension.identifier.id,$e.Changelog]))}`).toString():this.extension.repository?this.extension.repository:Q.parse(`command:extension.open?${encodeURIComponent(JSON.stringify([this.extension.identifier.id]))}`).toString())),this.updateStatus({icon:f,message:l},!0)}}if(this.extension.gallery&&this.extension.state===x.Uninstalled&&!await this.extensionsWorkbenchService.canInstall(this.extension)){if(this.extensionManagementServerService.localExtensionManagementServer||this.extensionManagementServerService.remoteExtensionManagementServer){const r=await(this.extensionManagementServerService.localExtensionManagementServer?this.extensionManagementServerService.localExtensionManagementServer.extensionManagementService.getTargetPlatform():this.extensionManagementServerService.remoteExtensionManagementServer.extensionManagementService.getTargetPlatform()),l=new m(`${i("incompatible platform","The '{0}' extension is not available in {1} for {2}.",this.extension.displayName||this.extension.identifier.id,this.productService.nameLong,en(r))} [${i("learn more","Learn More")}](https://aka.ms/vscode-platform-specific-extensions)`);this.updateStatus({icon:f,message:l},!0);return}if(this.extensionManagementServerService.webExtensionManagementServer){const r=i("VS Code for Web","{0} for the Web",this.productService.nameLong),l=new m(`${i("not web tooltip","The '{0}' extension is not available in {1}.",this.extension.displayName||this.extension.identifier.id,r)} [${i("learn why","Learn Why")}](https://aka.ms/vscode-web-extensions-guide)`);this.updateStatus({icon:f,message:l},!0);return}}if(!this.extension.local||!this.extension.server||this.extension.state!==x.Installed)return;if(this.extension.enablementState===b.DisabledByEnvironment){this.updateStatus({message:new m(i("disabled by environment","This extension is disabled by the environment."))},!0);return}if(this.extension.enablementState===b.EnabledByEnvironment){this.updateStatus({message:new m(i("enabled by environment","This extension is enabled because it is required in the current environment."))},!0);return}if(this.extension.enablementState===b.DisabledByVirtualWorkspace){const r=Be(this.extension.local.manifest.capabilities?.virtualWorkspaces);this.updateStatus({icon:W,message:new m(r?He(r):i("disabled because of virtual workspace","This extension has been disabled because it does not support virtual workspaces."))},!0);return}if(yn(this.contextService.getWorkspace())){const r=this.extensionManifestPropertiesService.getExtensionVirtualWorkspaceSupportType(this.extension.local.manifest),l=Be(this.extension.local.manifest.capabilities?.virtualWorkspaces);if(r==="limited"||l){this.updateStatus({icon:f,message:new m(l?He(l):i("extension limited because of virtual workspace","This extension has limited features because the current workspace is virtual."))},!0);return}}if(!this.workspaceTrustService.isWorkspaceTrusted()&&(this.extension.enablementState===b.DisabledByTrustRequirement||this.extension.enablementState===b.DisabledByExtensionDependency&&this.workbenchExtensionEnablementService.getDependenciesEnablementStates(this.extension.local).every(([,r])=>this.workbenchExtensionEnablementService.isEnabledEnablementState(r)||r===b.DisabledByTrustRequirement))){this.enabled=!0;const r=Be(this.extension.local.manifest.capabilities?.untrustedWorkspaces);this.updateStatus({icon:de,message:new m(r?He(r):i("extension disabled because of trust requirement","This extension has been disabled because the current workspace is not trusted."))},!0);return}if(this.workspaceTrustEnablementService.isWorkspaceTrustEnabled()&&!this.workspaceTrustService.isWorkspaceTrusted()){const r=this.extensionManifestPropertiesService.getExtensionUntrustedWorkspaceSupportType(this.extension.local.manifest),l=Be(this.extension.local.manifest.capabilities?.untrustedWorkspaces);if(r==="limited"||l){this.enabled=!0,this.updateStatus({icon:de,message:new m(l?He(l):i("extension limited because of trust requirement","This extension has limited features because the current workspace is not trusted."))},!0);return}}if(this.extension.enablementState===b.DisabledByExtensionKind&&!this.extensionsWorkbenchService.installed.some(r=>L(r.identifier,this.extension.identifier)&&r.server!==this.extension.server)){let r;this.extensionManagementServerService.localExtensionManagementServer===this.extension.server?this.extensionManifestPropertiesService.prefersExecuteOnWorkspace(this.extension.local.manifest)&&this.extensionManagementServerService.remoteExtensionManagementServer&&(r=new m(`${i("Install in remote server to enable","This extension is disabled in this workspace because it is defined to run in the Remote Extension Host. Please install the extension in '{0}' to enable.",this.extensionManagementServerService.remoteExtensionManagementServer.label)} [${i("learn more","Learn More")}](https://code.visualstudio.com/api/advanced-topics/remote-extensions#architecture-and-extension-kinds)`)):this.extensionManagementServerService.remoteExtensionManagementServer===this.extension.server?this.extensionManifestPropertiesService.prefersExecuteOnUI(this.extension.local.manifest)&&(this.extensionManagementServerService.localExtensionManagementServer?r=new m(`${i("Install in local server to enable","This extension is disabled in this workspace because it is defined to run in the Local Extension Host. Please install the extension locally to enable.",this.extensionManagementServerService.remoteExtensionManagementServer.label)} [${i("learn more","Learn More")}](https://code.visualstudio.com/api/advanced-topics/remote-extensions#architecture-and-extension-kinds)`):xt&&(r=new m(`${i("Defined to run in desktop","This extension is disabled because it is defined to run only in {0} for the Desktop.",this.productService.nameLong)} [${i("learn more","Learn More")}](https://code.visualstudio.com/api/advanced-topics/remote-extensions#architecture-and-extension-kinds)`))):this.extensionManagementServerService.webExtensionManagementServer===this.extension.server&&(r=new m(`${i("Cannot be enabled","This extension is disabled because it is not supported in {0} for the Web.",this.productService.nameLong)} [${i("learn more","Learn More")}](https://code.visualstudio.com/api/advanced-topics/remote-extensions#architecture-and-extension-kinds)`)),r&&this.updateStatus({icon:f,message:r},!0);return}const e=new Tt(this.extension.identifier.id),t=Mn.as(Tn.ExtensionFeaturesRegistry).getExtensionFeatures();for(const r of t){const l=this.extensionFeaturesManagementService.getAccessData(e,r.id)?.current?.status,d=`[${i("manage access","Manage Access")}](${Q.parse(`command:extension.open?${encodeURIComponent(JSON.stringify([this.extension.identifier.id,$e.Features,!1,r.id]))}`)})`;if(l?.severity===V.Error){this.updateStatus({icon:ee,message:new m().appendText(l.message).appendMarkdown(` ${d}`)},!0);return}if(l?.severity===V.Warning){this.updateStatus({icon:f,message:new m().appendText(l.message).appendMarkdown(` ${d}`)},!0);return}}if(this.extensionManagementServerService.remoteExtensionManagementServer){if(Wt(this.extension.local.manifest)){if(!this.extensionsWorkbenchService.installed.some(d=>L(d.identifier,this.extension.identifier)&&d.server!==this.extension.server)){const d=this.extension.server===this.extensionManagementServerService.localExtensionManagementServer?new m(i("Install language pack also in remote server","Install the language pack extension on '{0}' to enable it there also.",this.extensionManagementServerService.remoteExtensionManagementServer.label)):new m(i("Install language pack also locally","Install the language pack extension locally to enable it there also."));this.updateStatus({icon:W,message:d},!0)}return}const r=this.extensionService.extensions.filter(d=>L({id:d.identifier.value,uuid:d.uuid},this.extension.identifier))[0],l=r?this.extensionManagementServerService.getExtensionManagementServer(Pt(r)):null;if(this.extension.server===this.extensionManagementServerService.localExtensionManagementServer&&l===this.extensionManagementServerService.remoteExtensionManagementServer){this.extensionManifestPropertiesService.prefersExecuteOnWorkspace(this.extension.local.manifest)&&this.updateStatus({icon:W,message:new m(`${i("enabled remotely","This extension is enabled in the Remote Extension Host because it prefers to run there.")} [${i("learn more","Learn More")}](https://code.visualstudio.com/api/advanced-topics/remote-extensions#architecture-and-extension-kinds)`)},!0);return}if(this.extension.server===this.extensionManagementServerService.remoteExtensionManagementServer&&l===this.extensionManagementServerService.localExtensionManagementServer){this.extensionManifestPropertiesService.prefersExecuteOnUI(this.extension.local.manifest)&&this.updateStatus({icon:W,message:new m(`${i("enabled locally","This extension is enabled in the Local Extension Host because it prefers to run there.")} [${i("learn more","Learn More")}](https://code.visualstudio.com/api/advanced-topics/remote-extensions#architecture-and-extension-kinds)`)},!0);return}if(this.extension.server===this.extensionManagementServerService.remoteExtensionManagementServer&&l===this.extensionManagementServerService.webExtensionManagementServer){this.extensionManifestPropertiesService.canExecuteOnWeb(this.extension.local.manifest)&&this.updateStatus({icon:W,message:new m(`${i("enabled in web worker","This extension is enabled in the Web Worker Extension Host because it prefers to run there.")} [${i("learn more","Learn More")}](https://code.visualstudio.com/api/advanced-topics/remote-extensions#architecture-and-extension-kinds)`)},!0);return}}if(this.extension.enablementState===b.DisabledByExtensionDependency){this.updateStatus({icon:f,message:new m(i("extension disabled because of dependency","This extension depends on an extension that is disabled.")).appendMarkdown(`&nbsp;[${i("dependencies","Show Dependencies")}](${Q.parse(`command:extension.open?${encodeURIComponent(JSON.stringify([this.extension.identifier.id,$e.Dependencies]))}`)})`)},!0);return}if(!this.extension.local.isValid){const r=this.extension.local.validations.filter(([l])=>l===V.Error).map(([,l])=>l);this.updateStatus({icon:f,message:new m(r.join(" ").trim())},!0);return}const n=this.workbenchExtensionEnablementService.isEnabled(this.extension.local),o=this.extensionService.extensions.some(r=>L({id:r.identifier.value,uuid:r.uuid},this.extension.identifier));if(!this.extension.isWorkspaceScoped&&n&&o){if(this.extension.enablementState===b.EnabledWorkspace){this.updateStatus({message:new m(i("workspace enabled","This extension is enabled for this workspace by the user."))},!0);return}if(this.extensionManagementServerService.localExtensionManagementServer&&this.extensionManagementServerService.remoteExtensionManagementServer&&this.extension.server===this.extensionManagementServerService.remoteExtensionManagementServer){this.updateStatus({message:new m(i("extension enabled on remote","Extension is enabled on '{0}'",this.extension.server.label))},!0);return}if(this.extension.enablementState===b.EnabledGlobally)return}if(!n&&!o){if(this.extension.enablementState===b.DisabledGlobally){this.updateStatus({message:new m(i("globally disabled","This extension is disabled globally by the user."))},!0);return}if(this.extension.enablementState===b.DisabledWorkspace){this.updateStatus({message:new m(i("workspace disabled","This extension is disabled for this workspace by the user."))},!0);return}}}updateStatus(e,t){if(e){if(this._status.some(n=>n.message.value===e.message.value&&n.icon?.id===e.icon?.id))return}else{if(this._status.length===0)return;this._status=[]}e&&(this._status.push(e),this._status.sort((n,o)=>o.icon===de?-1:n.icon===de?1:o.icon===ee?-1:n.icon===ee?1:o.icon===f?-1:n.icon===f?1:o.icon===W?-1:n.icon===W?1:0)),t&&(e?.icon===ee?this.class=`${P.CLASS} extension-status-error ${g.asClassName(ee)}`:e?.icon===f?this.class=`${P.CLASS} extension-status-warning ${g.asClassName(f)}`:e?.icon===W?this.class=`${P.CLASS} extension-status-info ${g.asClassName(W)}`:e?.icon===de?this.class=`${P.CLASS} ${g.asClassName(de)}`:this.class=`${P.CLASS} hide`),this._onDidChangeStatus.fire()}async run(){if(this._status[0]?.icon===de)return this.commandService.executeCommand("workbench.trust.manage")}};P=p([s(0,U),s(1,$t),s(2,ot),s(3,In),s(4,En),s(5,v),s(6,M),s(7,Ie),s(8,ge),s(9,ht),s(10,w),s(11,Wn)],P);let me=class extends C{constructor(e=me.ID,t=me.LABEL,n,o,r,l,d,S){super(e,t);this.extensionsWorkbenchService=n;this.extensionManagementServerService=o;this.quickInputService=r;this.notificationService=l;this.hostService=d;this.extensionService=S}static ID="workbench.extensions.action.reinstall";static LABEL=i("reinstall","Reinstall Extension...");get enabled(){return this.extensionsWorkbenchService.local.filter(e=>!e.isBuiltin&&e.local).length>0}run(){return this.quickInputService.pick(this.getEntries(),{placeHolder:i("selectExtensionToReinstall","Select Extension to Reinstall")}).then(e=>e&&this.reinstallExtension(e.extension))}getEntries(){return this.extensionsWorkbenchService.queryLocal().then(e=>e.filter(n=>!n.isBuiltin&&n.server!==this.extensionManagementServerService.webExtensionManagementServer).map(n=>({id:n.identifier.id,label:n.displayName,description:n.identifier.id,extension:n})))}reinstallExtension(e){return this.extensionsWorkbenchService.openSearch("@installed ").then(()=>this.extensionsWorkbenchService.reinstall(e).then(t=>{const n=!(t.local&&this.extensionService.canAddExtension(Ve(t.local))),o=n?i("ReinstallAction.successReload","Please reload Visual Studio Code to complete reinstalling the extension {0}.",t.identifier.id):i("ReinstallAction.success","Reinstalling the extension {0} is completed.",t.identifier.id),r=n?[{label:i("InstallVSIXAction.reloadNow","Reload Now"),run:()=>this.hostService.reload()}]:[];this.notificationService.prompt(V.Info,o,r,{sticky:!0})},t=>this.notificationService.error(t)))}};me=p([s(2,v),s(3,U),s(4,K),s(5,Le),s(6,Mt),s(7,M)],me);let Se=class extends C{constructor(e=Se.ID,t=Se.LABEL,n,o,r,l){super(e,t);this.extensionsWorkbenchService=n;this.quickInputService=o;this.instantiationService=r;this.extensionEnablementService=l}static ID="workbench.extensions.action.install.specificVersion";static LABEL=i("install previous version","Install Specific Version of Extension...");get enabled(){return this.extensionsWorkbenchService.local.some(e=>this.isEnabled(e))}async run(){const e=await this.quickInputService.pick(this.getExtensionEntries(),{placeHolder:i("selectExtension","Select Extension"),matchOnDetail:!0});e&&e.extension&&(await this.instantiationService.createInstance(F,e.extension,!0).run(),await this.extensionsWorkbenchService.openSearch(e.extension.identifier.id))}isEnabled(e){return this.instantiationService.createInstance(F,e,!0).enabled&&!!e.local&&this.extensionEnablementService.isEnabled(e.local)}async getExtensionEntries(){const e=await this.extensionsWorkbenchService.queryLocal(),t=[];for(const n of e)this.isEnabled(n)&&t.push({id:n.identifier.id,label:n.displayName||n.identifier.id,description:n.identifier.id,extension:n});return t.sort((n,o)=>n.extension.displayName.localeCompare(o.extension.displayName))}};Se=p([s(2,v),s(3,K),s(4,y),s(5,w)],Se);let ye=class extends C{constructor(e,t,n,o,r){super(e);this.extensionsWorkbenchService=t;this.quickInputService=n;this.notificationService=o;this.progressService=r;this.update(),this.extensionsWorkbenchService.queryLocal().then(()=>this.updateExtensions()),this._register(this.extensionsWorkbenchService.onChange(()=>{this.extensions&&this.updateExtensions()}))}extensions=void 0;updateExtensions(){this.extensions=this.extensionsWorkbenchService.local,this.update()}update(){this.enabled=!!this.extensions&&this.getExtensionsToInstall(this.extensions).length>0,this.tooltip=this.label}async run(){return this.selectAndInstallExtensions()}async queryExtensionsToInstall(){const e=await this.extensionsWorkbenchService.queryLocal();return this.getExtensionsToInstall(e)}async selectAndInstallExtensions(){const e=this.quickInputService.createQuickPick();e.busy=!0;const t=e.onDidAccept(()=>{t.dispose(),e.hide(),e.dispose(),this.onDidAccept(e.selectedItems)});e.show();const n=await this.queryExtensionsToInstall();e.busy=!1,n.length?(e.title=this.getQuickPickTitle(),e.placeholder=i("select extensions to install","Select extensions to install"),e.canSelectMany=!0,n.sort((o,r)=>o.displayName.localeCompare(r.displayName)),e.items=n.map(o=>({extension:o,label:o.displayName,description:o.version}))):(e.hide(),e.dispose(),this.notificationService.notify({severity:V.Info,message:i("no local extensions","There are no extensions to install.")}))}async onDidAccept(e){if(e.length){const t=e.filter(n=>!!n.extension).map(n=>n.extension);t.length&&(await this.progressService.withProgress({location:vn.Notification,title:i("installing extensions","Installing Extensions...")},()=>this.installExtensions(t)),this.notificationService.info(i("finished installing","Successfully installed extensions.")))}}};ye=p([s(1,v),s(2,K),s(3,Le),s(4,ut)],ye);let ze=class extends ye{constructor(e,t,n,o,r,l,d,S,R){super("workbench.extensions.actions.installLocalExtensionsInRemote",e,t,o,n);this.extensionManagementServerService=r;this.extensionGalleryService=l;this.instantiationService=d;this.fileService=S;this.logService=R}get label(){return this.extensionManagementServerService&&this.extensionManagementServerService.remoteExtensionManagementServer?i("select and install local extensions","Install Local Extensions in '{0}'...",this.extensionManagementServerService.remoteExtensionManagementServer.label):""}getQuickPickTitle(){return i("install local extensions title","Install Local Extensions in '{0}'",this.extensionManagementServerService.remoteExtensionManagementServer.label)}getExtensionsToInstall(e){return e.filter(t=>{const n=this.instantiationService.createInstance(Pe,!0);return n.extension=t,n.enabled})}async installExtensions(e){const t=[],n=[],o=await this.extensionManagementServerService.remoteExtensionManagementServer.extensionManagementService.getTargetPlatform();await fe.settled(e.map(async r=>{if(this.extensionGalleryService.isEnabled()){const d=(await this.extensionGalleryService.getExtensions([{...r.identifier,preRelease:!!r.local?.preRelease}],{targetPlatform:o,compatible:!0},ce.None))[0];if(d){t.push(d);return}}const l=await this.extensionManagementServerService.localExtensionManagementServer.extensionManagementService.zip(r.local);n.push(l)})),await fe.settled(t.map(r=>this.extensionManagementServerService.remoteExtensionManagementServer.extensionManagementService.installFromGallery(r)));try{await fe.settled(n.map(r=>this.extensionManagementServerService.remoteExtensionManagementServer.extensionManagementService.install(r)))}finally{try{await Promise.allSettled(n.map(r=>this.fileService.del(r)))}catch(r){this.logService.error(r)}}}};ze=p([s(0,v),s(1,K),s(2,ut),s(3,Le),s(4,U),s(5,Re),s(6,y),s(7,we),s(8,pt)],ze);let Ze=class extends ye{constructor(e,t,n,o,r,l,d,S,R){super(e,t,n,r,o);this.extensionManagementServerService=l;this.extensionGalleryService=d;this.fileService=S;this.logService=R}get label(){return i("select and install remote extensions","Install Remote Extensions Locally...")}getQuickPickTitle(){return i("install remote extensions","Install Remote Extensions Locally")}getExtensionsToInstall(e){return e.filter(t=>t.type===Lt.User&&t.server!==this.extensionManagementServerService.localExtensionManagementServer&&!this.extensionsWorkbenchService.installed.some(n=>n.server===this.extensionManagementServerService.localExtensionManagementServer&&L(n.identifier,t.identifier)))}async installExtensions(e){const t=[],n=[],o=await this.extensionManagementServerService.localExtensionManagementServer.extensionManagementService.getTargetPlatform();await fe.settled(e.map(async r=>{if(this.extensionGalleryService.isEnabled()){const d=(await this.extensionGalleryService.getExtensions([{...r.identifier,preRelease:!!r.local?.preRelease}],{targetPlatform:o,compatible:!0},ce.None))[0];if(d){t.push(d);return}}const l=await this.extensionManagementServerService.remoteExtensionManagementServer.extensionManagementService.zip(r.local);n.push(l)})),await fe.settled(t.map(r=>this.extensionManagementServerService.localExtensionManagementServer.extensionManagementService.installFromGallery(r)));try{await fe.settled(n.map(r=>this.extensionManagementServerService.localExtensionManagementServer.extensionManagementService.install(r)))}finally{try{await Promise.allSettled(n.map(r=>this.fileService.del(r)))}catch(r){this.logService.error(r)}}}};Ze=p([s(1,v),s(2,K),s(3,ut),s(4,Le),s(5,U),s(6,Re),s(7,we),s(8,pt)],Ze),Dt.registerCommand("workbench.extensions.action.showExtensionsForLanguage",function(c,a){return c.get(v).openSearch(`ext:${a.replace(/^\./,"")}`)});const $n="workbench.extensions.action.showExtensionsWithIds";Dt.registerCommand($n,function(c,a){return c.get(v).openSearch(a.map(t=>`@id:${t}`).join(" "))}),le("extensionButton.background",{dark:_e,light:_e,hcDark:null,hcLight:null},i("extensionButtonBackground","Button background color for extension actions.")),le("extensionButton.foreground",{dark:Fe,light:Fe,hcDark:null,hcLight:null},i("extensionButtonForeground","Button foreground color for extension actions.")),le("extensionButton.hoverBackground",{dark:Ge,light:Ge,hcDark:null,hcLight:null},i("extensionButtonHoverBackground","Button background hover color for extension actions.")),le("extensionButton.separator",dn,i("extensionButtonSeparator","Button separator color for extension actions"));const Ps=le("extensionButton.prominentBackground",{dark:_e,light:_e,hcDark:null,hcLight:null},i("extensionButtonProminentBackground","Button background color for extension actions that stand out (e.g. install button)."));le("extensionButton.prominentForeground",{dark:Fe,light:Fe,hcDark:null,hcLight:null},i("extensionButtonProminentForeground","Button foreground color for extension actions that stand out (e.g. install button).")),le("extensionButton.prominentHoverBackground",{dark:Ge,light:Ge,hcDark:null,hcLight:null},i("extensionButtonProminentHoverBackground","Button background hover color for extension actions that stand out (e.g. install button).")),on((c,a)=>{const e=c.getColor(cn);e&&(a.addRule(`.extension-editor .header .actions-status-container > .status ${g.asCSSSelector(ee)} { color: ${e}; }`),a.addRule(`.extension-editor .body .subcontent .runtime-status ${g.asCSSSelector(ee)} { color: ${e}; }`),a.addRule(`.monaco-hover.extension-hover .markdown-hover .hover-contents ${g.asCSSSelector(ee)} { color: ${e}; }`));const t=c.getColor(an);t&&(a.addRule(`.extension-editor .header .actions-status-container > .status ${g.asCSSSelector(f)} { color: ${t}; }`),a.addRule(`.extension-editor .body .subcontent .runtime-status ${g.asCSSSelector(f)} { color: ${t}; }`),a.addRule(`.monaco-hover.extension-hover .markdown-hover .hover-contents ${g.asCSSSelector(f)} { color: ${t}; }`));const n=c.getColor(ln);n&&(a.addRule(`.extension-editor .header .actions-status-container > .status ${g.asCSSSelector(W)} { color: ${n}; }`),a.addRule(`.extension-editor .body .subcontent .runtime-status ${g.asCSSSelector(W)} { color: ${n}; }`),a.addRule(`.monaco-hover.extension-hover .markdown-hover .hover-contents ${g.asCSSSelector(W)} { color: ${n}; }`))});export{Ee as AbstractConfigureRecommendedExtensionsAction,ye as AbstractInstallExtensionsInServerAction,St as ButtonWithDropDownExtensionAction,Ws as ButtonWithDropdownExtensionActionViewItem,q as ClearLanguageAction,Ye as ConfigureWorkspaceFolderRecommendedExtensionsAction,Je as ConfigureWorkspaceRecommendedExtensionsAction,je as DisableDropDownAction,J as DisableForWorkspaceAction,Y as DisableGloballyAction,he as DropDownExtensionAction,De as DropDownExtensionActionViewItem,Xe as EnableDropDownAction,X as EnableForWorkspaceAction,j as EnableGloballyAction,h as ExtensionAction,Ms as ExtensionEditorManageExtensionAction,se as ExtensionRuntimeStateAction,P as ExtensionStatusAction,re as ExtensionStatusLabelAction,xe as IgnoreExtensionRecommendationAction,I as InstallAction,F as InstallAnotherVersionAction,qe as InstallDropdownAction,E as InstallInOtherServerAction,ze as InstallLocalExtensionsInRemoteAction,pe as InstallRecommendedExtensionAction,Ze as InstallRemoteExtensionsInLocalAction,Se as InstallSpecificVersionOfExtensionAction,et as InstallingLabelAction,Qe as LocalInstallAction,Z as ManageExtensionAction,Ae as MenuItemExtensionAction,ie as MigrateDeprecatedExtensionAction,te as PromptExtensionInstallFailureAction,me as ReinstallAction,Pe as RemoteInstallAction,N as SetColorThemeAction,A as SetFileIconThemeAction,H as SetLanguageAction,$ as SetProductIconThemeAction,ue as ShowRecommendedExtensionAction,D as ToggleAutoUpdateForExtensionAction,ne as ToggleAutoUpdatesForPublisherAction,G as TogglePreReleaseExtensionAction,oe as ToggleSyncExtensionAction,ve as UndoIgnoreExtensionRecommendationAction,k as UninstallAction,z as UpdateAction,Ke as WebInstallAction,Ps as extensionButtonProminentBackground,An as getContextMenuActions,$n as showExtensionsWithIdsCommandId};
