{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/extensions/browser/extensionsActions.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport \"./media/extensionActions.css\";\nimport type { IContextMenuProvider } from \"../../../../base/browser/contextmenu.js\";\nimport * as DOM from \"../../../../base/browser/dom.js\";\nimport {\n\tActionViewItem,\n\ttype IActionViewItemOptions,\n} from \"../../../../base/browser/ui/actionbar/actionViewItems.js\";\nimport { alert } from \"../../../../base/browser/ui/aria/aria.js\";\nimport {\n\tActionWithDropdownActionViewItem,\n\ttype IActionWithDropdownActionViewItemOptions,\n} from \"../../../../base/browser/ui/dropdown/dropdownActionViewItem.js\";\nimport {\n\tAction,\n\ttype IAction,\n\ttype IActionChangeEvent,\n\tSeparator,\n\tSubmenuAction,\n} from \"../../../../base/common/actions.js\";\nimport { Delayer, Promises, Throttler } from \"../../../../base/common/async.js\";\nimport { CancellationToken } from \"../../../../base/common/cancellation.js\";\nimport { fromNow } from \"../../../../base/common/date.js\";\nimport {\n\tgetErrorMessage,\n\tisCancellationError,\n} from \"../../../../base/common/errors.js\";\nimport { Emitter, Event } from \"../../../../base/common/event.js\";\nimport {\n\ttype IMarkdownString,\n\tMarkdownString,\n\tescapeMarkdownSyntaxTokens,\n} from \"../../../../base/common/htmlContent.js\";\nimport * as json from \"../../../../base/common/json.js\";\nimport { disposeIfDisposable } from \"../../../../base/common/lifecycle.js\";\nimport { isIOS, isWeb, language } from \"../../../../base/common/platform.js\";\nimport { ThemeIcon } from \"../../../../base/common/themables.js\";\nimport { isString } from \"../../../../base/common/types.js\";\nimport { URI } from \"../../../../base/common/uri.js\";\nimport { ITextModelService } from \"../../../../editor/common/services/resolverService.js\";\nimport { localize, localize2 } from \"../../../../nls.js\";\nimport {\n\tIMenuService,\n\tMenuId,\n\ttype MenuItemAction,\n\ttype SubmenuItemAction,\n} from \"../../../../platform/actions/common/actions.js\";\nimport {\n\tCommandsRegistry,\n\tICommandService,\n} from \"../../../../platform/commands/common/commands.js\";\nimport { IConfigurationService } from \"../../../../platform/configuration/common/configuration.js\";\nimport { IContextKeyService } from \"../../../../platform/contextkey/common/contextkey.js\";\nimport { IContextMenuService } from \"../../../../platform/contextview/browser/contextView.js\";\nimport {\n\tIDialogService,\n\ttype IPromptButton,\n} from \"../../../../platform/dialogs/common/dialogs.js\";\nimport type { ITextEditorSelection } from \"../../../../platform/editor/common/editor.js\";\nimport {\n\tExtensionManagementErrorCode,\n\tIExtensionGalleryService,\n\ttype IGalleryExtension,\n\ttype ILocalExtension,\n\tInstallOperation,\n\ttype InstallOptions,\n\tTargetPlatformToString,\n} from \"../../../../platform/extensionManagement/common/extensionManagement.js\";\nimport {\n\tareSameExtensions,\n\tgetExtensionId,\n} from \"../../../../platform/extensionManagement/common/extensionManagementUtil.js\";\nimport {\n\tExtensionIdentifier,\n\tExtensionType,\n\ttype IExtensionDescription,\n\ttype IExtensionManifest,\n\tTargetPlatform,\n\tgetWorkspaceSupportTypeMessage,\n\tisApplicationScopedExtension,\n\tisLanguagePackExtension,\n} from \"../../../../platform/extensions/common/extensions.js\";\nimport {\n\ttype IFileContent,\n\tIFileService,\n} from \"../../../../platform/files/common/files.js\";\nimport {\n\tIInstantiationService,\n\ttype ServicesAccessor,\n} from \"../../../../platform/instantiation/common/instantiation.js\";\nimport { ILabelService } from \"../../../../platform/label/common/label.js\";\nimport { getLocale } from \"../../../../platform/languagePacks/common/languagePacks.js\";\nimport { ILogService } from \"../../../../platform/log/common/log.js\";\nimport {\n\tINotificationService,\n\ttype IPromptChoice,\n\tSeverity,\n} from \"../../../../platform/notification/common/notification.js\";\nimport { IOpenerService } from \"../../../../platform/opener/common/opener.js\";\nimport { IProductService } from \"../../../../platform/product/common/productService.js\";\nimport {\n\tIProgressService,\n\tProgressLocation,\n} from \"../../../../platform/progress/common/progress.js\";\nimport {\n\tIQuickInputService,\n\ttype IQuickPickItem,\n\ttype QuickPickItem,\n} from \"../../../../platform/quickinput/common/quickInput.js\";\nimport { Registry } from \"../../../../platform/registry/common/platform.js\";\nimport { ITelemetryService } from \"../../../../platform/telemetry/common/telemetry.js\";\nimport {\n\tbuttonBackground,\n\tbuttonForeground,\n\tbuttonHoverBackground,\n\tbuttonSeparator,\n\teditorErrorForeground,\n\teditorInfoForeground,\n\teditorWarningForeground,\n\tregisterColor,\n} from \"../../../../platform/theme/common/colorRegistry.js\";\nimport {\n\ttype IColorTheme,\n\ttype ICssStyleCollector,\n\tregisterThemingParticipant,\n} from \"../../../../platform/theme/common/themeService.js\";\nimport { IUpdateService } from \"../../../../platform/update/common/update.js\";\nimport { IUserDataSyncEnablementService } from \"../../../../platform/userDataSync/common/userDataSync.js\";\nimport { isVirtualWorkspace } from \"../../../../platform/workspace/common/virtualWorkspace.js\";\nimport {\n\tIWorkspaceContextService,\n\ttype IWorkspaceFolder,\n\tWorkbenchState,\n} from \"../../../../platform/workspace/common/workspace.js\";\nimport {\n\tIWorkspaceTrustEnablementService,\n\tIWorkspaceTrustManagementService,\n} from \"../../../../platform/workspace/common/workspaceTrust.js\";\nimport { PICK_WORKSPACE_FOLDER_COMMAND_ID } from \"../../../browser/actions/workspaceCommands.js\";\nimport { IJSONEditingService } from \"../../../services/configuration/common/jsonEditing.js\";\nimport { IEditorService } from \"../../../services/editor/common/editorService.js\";\nimport {\n\tExtensions,\n\tIExtensionFeaturesManagementService,\n\ttype IExtensionFeaturesRegistry,\n} from \"../../../services/extensionManagement/common/extensionFeatures.js\";\nimport {\n\tEnablementState,\n\ttype IExtensionManagementServer,\n\tIExtensionManagementServerService,\n\tIWorkbenchExtensionEnablementService,\n\tIWorkbenchExtensionManagementService,\n} from \"../../../services/extensionManagement/common/extensionManagement.js\";\nimport {\n\tExtensionRecommendationReason,\n\tIExtensionIgnoredRecommendationsService,\n\tIExtensionRecommendationsService,\n} from \"../../../services/extensionRecommendations/common/extensionRecommendations.js\";\nimport {\n\tEXTENSIONS_CONFIG,\n\ttype IExtensionsConfigContent,\n} from \"../../../services/extensionRecommendations/common/workspaceExtensionsConfig.js\";\nimport { IExtensionManifestPropertiesService } from \"../../../services/extensions/common/extensionManifestPropertiesService.js\";\nimport {\n\tIExtensionService,\n\ttoExtension,\n\ttoExtensionDescription,\n} from \"../../../services/extensions/common/extensions.js\";\nimport { IHostService } from \"../../../services/host/browser/host.js\";\nimport { ILocaleService } from \"../../../services/localization/common/locale.js\";\nimport { showWindowLogActionId } from \"../../../services/log/common/logConstants.js\";\nimport { IPreferencesService } from \"../../../services/preferences/common/preferences.js\";\nimport { ITextFileService } from \"../../../services/textfile/common/textfiles.js\";\nimport {\n\ttype IWorkbenchColorTheme,\n\ttype IWorkbenchFileIconTheme,\n\ttype IWorkbenchProductIconTheme,\n\ttype IWorkbenchTheme,\n\tIWorkbenchThemeService,\n} from \"../../../services/themes/common/workbenchThemeService.js\";\nimport {\n\tAutoUpdateConfigurationKey,\n\tExtensionEditorTab,\n\tExtensionRuntimeActionType,\n\tExtensionState,\n\ttype IExtension,\n\ttype IExtensionArg,\n\ttype IExtensionContainer,\n\tIExtensionsWorkbenchService,\n\tINSTALL_ACTIONS_GROUP,\n\tSELECT_INSTALL_VSIX_EXTENSION_COMMAND_ID,\n\tTHEME_ACTIONS_GROUP,\n\tTOGGLE_IGNORE_EXTENSION_ACTION_ID,\n\tUPDATE_ACTIONS_GROUP,\n} from \"../common/extensions.js\";\nimport { ExtensionsConfigurationInitialContent } from \"../common/extensionsFileTemplate.js\";\nimport {\n\terrorIcon,\n\tinfoIcon,\n\tmanageExtensionIcon,\n\tsyncEnabledIcon,\n\tsyncIgnoredIcon,\n\ttrustIcon,\n\twarningIcon,\n} from \"./extensionsIcons.js\";\n\nexport class PromptExtensionInstallFailureAction extends Action {\n\tconstructor(\n\t\tprivate readonly extension: IExtension,\n\t\tprivate readonly options: InstallOptions | undefined,\n\t\tprivate readonly version: string,\n\t\tprivate readonly installOperation: InstallOperation,\n\t\tprivate readonly error: Error,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@IOpenerService private readonly openerService: IOpenerService,\n\t\t@INotificationService\n\t\tprivate readonly notificationService: INotificationService,\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@IExtensionManagementServerService\n\t\tprivate readonly extensionManagementServerService: IExtensionManagementServerService,\n\t\t@IInstantiationService\n\t\tprivate readonly instantiationService: IInstantiationService,\n\t\t@IExtensionGalleryService\n\t\tprivate readonly galleryService: IExtensionGalleryService,\n\t\t@IExtensionManifestPropertiesService\n\t\tprivate readonly extensionManifestPropertiesService: IExtensionManifestPropertiesService,\n\t) {\n\t\tsuper(\"extension.promptExtensionInstallFailure\");\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tif (isCancellationError(this.error)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.logService.error(this.error);\n\n\t\tif (this.error.name === ExtensionManagementErrorCode.Unsupported) {\n\t\t\tconst productName = isWeb\n\t\t\t\t? localize(\n\t\t\t\t\t\t\"VS Code for Web\",\n\t\t\t\t\t\t\"{0} for the Web\",\n\t\t\t\t\t\tthis.productService.nameLong,\n\t\t\t\t\t)\n\t\t\t\t: this.productService.nameLong;\n\t\t\tconst message = localize(\n\t\t\t\t\"cannot be installed\",\n\t\t\t\t\"The '{0}' extension is not available in {1}. Click 'More Information' to learn more.\",\n\t\t\t\tthis.extension.displayName || this.extension.identifier.id,\n\t\t\t\tproductName,\n\t\t\t);\n\t\t\tconst { confirmed } = await this.dialogService.confirm({\n\t\t\t\ttype: Severity.Info,\n\t\t\t\tmessage,\n\t\t\t\tprimaryButton: localize(\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: \"more information\",\n\t\t\t\t\t\tcomment: [\"&& denotes a mnemonic\"],\n\t\t\t\t\t},\n\t\t\t\t\t\"&&More Information\",\n\t\t\t\t),\n\t\t\t\tcancelButton: localize(\"close\", \"Close\"),\n\t\t\t});\n\t\t\tif (confirmed) {\n\t\t\t\tthis.openerService.open(\n\t\t\t\t\tisWeb\n\t\t\t\t\t\t? URI.parse(\n\t\t\t\t\t\t\t\t\"https://aka.ms/vscode-web-extensions-guide\",\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t: URI.parse(\"https://aka.ms/vscode-remote\"),\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\tExtensionManagementErrorCode.ReleaseVersionNotFound ===\n\t\t\t<ExtensionManagementErrorCode>this.error.name\n\t\t) {\n\t\t\tawait this.dialogService.prompt({\n\t\t\t\ttype: \"error\",\n\t\t\t\tmessage: getErrorMessage(this.error),\n\t\t\t\tbuttons: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: localize(\n\t\t\t\t\t\t\t\"install prerelease\",\n\t\t\t\t\t\t\t\"Install Pre-Release\",\n\t\t\t\t\t\t),\n\t\t\t\t\t\trun: () => {\n\t\t\t\t\t\t\tconst installAction =\n\t\t\t\t\t\t\t\tthis.instantiationService.createInstance(\n\t\t\t\t\t\t\t\t\tInstallAction,\n\t\t\t\t\t\t\t\t\t{ installPreReleaseVersion: true },\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tinstallAction.extension = this.extension;\n\t\t\t\t\t\t\treturn installAction.run();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tcancelButton: localize(\"cancel\", \"Cancel\"),\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\t[\n\t\t\t\tExtensionManagementErrorCode.Incompatible,\n\t\t\t\tExtensionManagementErrorCode.IncompatibleApi,\n\t\t\t\tExtensionManagementErrorCode.IncompatibleTargetPlatform,\n\t\t\t\tExtensionManagementErrorCode.Malicious,\n\t\t\t\tExtensionManagementErrorCode.Deprecated,\n\t\t\t].includes(<ExtensionManagementErrorCode>this.error.name)\n\t\t) {\n\t\t\tawait this.dialogService.info(getErrorMessage(this.error));\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\tExtensionManagementErrorCode.PackageNotSigned ===\n\t\t\t<ExtensionManagementErrorCode>this.error.name\n\t\t) {\n\t\t\tawait this.dialogService.prompt({\n\t\t\t\ttype: \"error\",\n\t\t\t\tmessage: localize(\n\t\t\t\t\t\"not signed\",\n\t\t\t\t\t\"'{0}' is an extension from an unknown source. Are you sure you want to install?\",\n\t\t\t\t\tthis.extension.displayName,\n\t\t\t\t),\n\t\t\t\tdetail: getErrorMessage(this.error),\n\t\t\t\tbuttons: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: localize(\"install anyway\", \"Install Anyway\"),\n\t\t\t\t\t\trun: () => {\n\t\t\t\t\t\t\tconst installAction =\n\t\t\t\t\t\t\t\tthis.instantiationService.createInstance(\n\t\t\t\t\t\t\t\t\tInstallAction,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t...this.options,\n\t\t\t\t\t\t\t\t\t\tdonotVerifySignature: true,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tinstallAction.extension = this.extension;\n\t\t\t\t\t\t\treturn installAction.run();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tcancelButton: true,\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\tExtensionManagementErrorCode.SignatureVerificationFailed ===\n\t\t\t\t<ExtensionManagementErrorCode>this.error.name ||\n\t\t\tExtensionManagementErrorCode.SignatureVerificationInternal ===\n\t\t\t\t<ExtensionManagementErrorCode>this.error.name\n\t\t) {\n\t\t\tawait this.dialogService.prompt({\n\t\t\t\ttype: \"error\",\n\t\t\t\tmessage: localize(\n\t\t\t\t\t\"verification failed\",\n\t\t\t\t\t\"Cannot install '{0}' extension because {1} cannot verify the extension signature\",\n\t\t\t\t\tthis.extension.displayName,\n\t\t\t\t\tthis.productService.nameLong,\n\t\t\t\t),\n\t\t\t\tdetail: getErrorMessage(this.error),\n\t\t\t\tbuttons: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: localize(\"learn more\", \"Learn More\"),\n\t\t\t\t\t\trun: () =>\n\t\t\t\t\t\t\tthis.openerService.open(\n\t\t\t\t\t\t\t\t\"https://code.visualstudio.com/docs/editor/extension-marketplace\",\n\t\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: localize(\n\t\t\t\t\t\t\t\"install donot verify\",\n\t\t\t\t\t\t\t\"Install Anyway (Don't Verify Signature)\",\n\t\t\t\t\t\t),\n\t\t\t\t\t\trun: () => {\n\t\t\t\t\t\t\tconst installAction =\n\t\t\t\t\t\t\t\tthis.instantiationService.createInstance(\n\t\t\t\t\t\t\t\t\tInstallAction,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t...this.options,\n\t\t\t\t\t\t\t\t\t\tdonotVerifySignature: true,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tinstallAction.extension = this.extension;\n\t\t\t\t\t\t\treturn installAction.run();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tcancelButton: true,\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tconst operationMessage =\n\t\t\tthis.installOperation === InstallOperation.Update\n\t\t\t\t? localize(\n\t\t\t\t\t\t\"update operation\",\n\t\t\t\t\t\t\"Error while updating '{0}' extension.\",\n\t\t\t\t\t\tthis.extension.displayName ||\n\t\t\t\t\t\t\tthis.extension.identifier.id,\n\t\t\t\t\t)\n\t\t\t\t: localize(\n\t\t\t\t\t\t\"install operation\",\n\t\t\t\t\t\t\"Error while installing '{0}' extension.\",\n\t\t\t\t\t\tthis.extension.displayName ||\n\t\t\t\t\t\t\tthis.extension.identifier.id,\n\t\t\t\t\t);\n\t\tlet additionalMessage;\n\t\tconst promptChoices: IPromptChoice[] = [];\n\n\t\tconst downloadUrl = await this.getDownloadUrl();\n\t\tif (downloadUrl) {\n\t\t\tadditionalMessage = localize(\n\t\t\t\t\"check logs\",\n\t\t\t\t\"Please check the [log]({0}) for more details.\",\n\t\t\t\t`command:${showWindowLogActionId}`,\n\t\t\t);\n\t\t\tpromptChoices.push({\n\t\t\t\tlabel: localize(\"download\", \"Try Downloading Manually...\"),\n\t\t\t\trun: () =>\n\t\t\t\t\tthis.openerService.open(downloadUrl).then(() => {\n\t\t\t\t\t\tthis.notificationService.prompt(\n\t\t\t\t\t\t\tSeverity.Info,\n\t\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\t\"install vsix\",\n\t\t\t\t\t\t\t\t\"Once downloaded, please manually install the downloaded VSIX of '{0}'.\",\n\t\t\t\t\t\t\t\tthis.extension.identifier.id,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tlabel: localize(\n\t\t\t\t\t\t\t\t\t\t\"installVSIX\",\n\t\t\t\t\t\t\t\t\t\t\"Install from VSIX...\",\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\trun: () =>\n\t\t\t\t\t\t\t\t\t\tthis.commandService.executeCommand(\n\t\t\t\t\t\t\t\t\t\t\tSELECT_INSTALL_VSIX_EXTENSION_COMMAND_ID,\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t);\n\t\t\t\t\t}),\n\t\t\t});\n\t\t}\n\n\t\tconst message = `${operationMessage}${additionalMessage ? ` ${additionalMessage}` : \"\"}`;\n\t\tthis.notificationService.prompt(Severity.Error, message, promptChoices);\n\t}\n\n\tprivate async getDownloadUrl(): Promise<URI | undefined> {\n\t\tif (isIOS) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (!this.extension.gallery) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (!this.productService.extensionsGallery) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (\n\t\t\t!this.extensionManagementServerService\n\t\t\t\t.localExtensionManagementServer &&\n\t\t\t!this.extensionManagementServerService\n\t\t\t\t.remoteExtensionManagementServer\n\t\t) {\n\t\t\treturn undefined;\n\t\t}\n\t\tlet targetPlatform = this.extension.gallery.properties.targetPlatform;\n\t\tif (\n\t\t\ttargetPlatform !== TargetPlatform.UNIVERSAL &&\n\t\t\ttargetPlatform !== TargetPlatform.UNDEFINED &&\n\t\t\tthis.extensionManagementServerService\n\t\t\t\t.remoteExtensionManagementServer\n\t\t) {\n\t\t\ttry {\n\t\t\t\tconst manifest = await this.galleryService.getManifest(\n\t\t\t\t\tthis.extension.gallery,\n\t\t\t\t\tCancellationToken.None,\n\t\t\t\t);\n\t\t\t\tif (\n\t\t\t\t\tmanifest &&\n\t\t\t\t\tthis.extensionManifestPropertiesService.prefersExecuteOnWorkspace(\n\t\t\t\t\t\tmanifest,\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\ttargetPlatform =\n\t\t\t\t\t\tawait this.extensionManagementServerService.remoteExtensionManagementServer.extensionManagementService.getTargetPlatform();\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tthis.logService.error(error);\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}\n\t\tif (targetPlatform === TargetPlatform.UNKNOWN) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn URI.parse(\n\t\t\t`${this.productService.extensionsGallery.serviceUrl}/publishers/${this.extension.publisher}/vsextensions/${this.extension.name}/${this.version}/vspackage${targetPlatform !== TargetPlatform.UNDEFINED ? `?targetPlatform=${targetPlatform}` : \"\"}`,\n\t\t);\n\t}\n}\n\nexport interface IExtensionActionChangeEvent extends IActionChangeEvent {\n\treadonly hidden?: boolean;\n\treadonly menuActions?: IAction[];\n}\n\nexport abstract class ExtensionAction\n\textends Action\n\timplements IExtensionContainer\n{\n\tprotected override _onDidChange = this._register(\n\t\tnew Emitter<IExtensionActionChangeEvent>(),\n\t);\n\toverride readonly onDidChange = this._onDidChange.event;\n\n\tstatic readonly EXTENSION_ACTION_CLASS = \"extension-action\";\n\tstatic readonly TEXT_ACTION_CLASS =\n\t\t`${ExtensionAction.EXTENSION_ACTION_CLASS} text`;\n\tstatic readonly LABEL_ACTION_CLASS =\n\t\t`${ExtensionAction.EXTENSION_ACTION_CLASS} label`;\n\tstatic readonly PROMINENT_LABEL_ACTION_CLASS =\n\t\t`${ExtensionAction.LABEL_ACTION_CLASS} prominent`;\n\tstatic readonly ICON_ACTION_CLASS =\n\t\t`${ExtensionAction.EXTENSION_ACTION_CLASS} icon`;\n\n\tprivate _extension: IExtension | null = null;\n\tget extension(): IExtension | null {\n\t\treturn this._extension;\n\t}\n\tset extension(extension: IExtension | null) {\n\t\tthis._extension = extension;\n\t\tthis.update();\n\t}\n\n\tprivate _hidden = false;\n\tget hidden(): boolean {\n\t\treturn this._hidden;\n\t}\n\tset hidden(hidden: boolean) {\n\t\tif (this._hidden !== hidden) {\n\t\t\tthis._hidden = hidden;\n\t\t\tthis._onDidChange.fire({ hidden });\n\t\t}\n\t}\n\n\tprotected override _setEnabled(value: boolean): void {\n\t\tsuper._setEnabled(value);\n\t\tif (this.hideOnDisabled) {\n\t\t\tthis.hidden = !value;\n\t\t}\n\t}\n\n\tprotected hideOnDisabled = true;\n\n\tabstract update(): void;\n}\n\nexport class ButtonWithDropDownExtensionAction extends ExtensionAction {\n\tprivate primaryAction: IAction | undefined;\n\n\treadonly menuActionClassNames: string[] = [];\n\tprivate _menuActions: IAction[] = [];\n\tget menuActions(): IAction[] {\n\t\treturn [...this._menuActions];\n\t}\n\n\toverride get extension(): IExtension | null {\n\t\treturn super.extension;\n\t}\n\n\toverride set extension(extension: IExtension | null) {\n\t\tthis.extensionActions.forEach((a) => (a.extension = extension));\n\t\tsuper.extension = extension;\n\t}\n\n\tprotected readonly extensionActions: ExtensionAction[];\n\n\tconstructor(\n\t\tid: string,\n\t\tclazz: string,\n\t\tprivate readonly actionsGroups: ExtensionAction[][],\n\t) {\n\t\tclazz = `${clazz} action-dropdown`;\n\t\tsuper(id, undefined, clazz);\n\t\tthis.menuActionClassNames = clazz.split(\" \");\n\t\tthis.hideOnDisabled = false;\n\t\tthis.extensionActions = actionsGroups.flat();\n\t\tthis.update();\n\t\tthis._register(\n\t\t\tEvent.any(...this.extensionActions.map((a) => a.onDidChange))(() =>\n\t\t\t\tthis.update(true),\n\t\t\t),\n\t\t);\n\t\tthis.extensionActions.forEach((a) => this._register(a));\n\t}\n\n\tupdate(donotUpdateActions?: boolean): void {\n\t\tif (!donotUpdateActions) {\n\t\t\tthis.extensionActions.forEach((a) => a.update());\n\t\t}\n\n\t\tconst actionsGroups = this.actionsGroups.map((actionsGroup) =>\n\t\t\tactionsGroup.filter((a) => !a.hidden),\n\t\t);\n\n\t\tlet actions: IAction[] = [];\n\t\tfor (const visibleActions of actionsGroups) {\n\t\t\tif (visibleActions.length) {\n\t\t\t\tactions = [...actions, ...visibleActions, new Separator()];\n\t\t\t}\n\t\t}\n\t\tactions = actions.length\n\t\t\t? actions.slice(0, actions.length - 1)\n\t\t\t: actions;\n\n\t\tthis.primaryAction = actions[0];\n\t\tthis._menuActions = actions.length > 1 ? actions : [];\n\t\tthis._onDidChange.fire({ menuActions: this._menuActions });\n\n\t\tif (this.primaryAction) {\n\t\t\tthis.hidden = false;\n\t\t\tthis.enabled = this.primaryAction.enabled;\n\t\t\tthis.label = this.getLabel(this.primaryAction as ExtensionAction);\n\t\t\tthis.tooltip = this.primaryAction.tooltip;\n\t\t} else {\n\t\t\tthis.hidden = true;\n\t\t\tthis.enabled = false;\n\t\t}\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tif (this.enabled) {\n\t\t\tawait this.primaryAction?.run();\n\t\t}\n\t}\n\n\tprotected getLabel(action: ExtensionAction): string {\n\t\treturn action.label;\n\t}\n}\n\nexport class ButtonWithDropdownExtensionActionViewItem extends ActionWithDropdownActionViewItem {\n\tconstructor(\n\t\taction: ButtonWithDropDownExtensionAction,\n\t\toptions: IActionViewItemOptions &\n\t\t\tIActionWithDropdownActionViewItemOptions,\n\t\tcontextMenuProvider: IContextMenuProvider,\n\t) {\n\t\tsuper(null, action, options, contextMenuProvider);\n\t\tthis._register(\n\t\t\taction.onDidChange((e) => {\n\t\t\t\tif (e.hidden !== undefined || e.menuActions !== undefined) {\n\t\t\t\t\tthis.updateClass();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t}\n\n\toverride render(container: HTMLElement): void {\n\t\tsuper.render(container);\n\t\tthis.updateClass();\n\t}\n\n\tprotected override updateClass(): void {\n\t\tsuper.updateClass();\n\t\tif (this.element && this.dropdownMenuActionViewItem?.element) {\n\t\t\tthis.element.classList.toggle(\n\t\t\t\t\"hide\",\n\t\t\t\t(<ButtonWithDropDownExtensionAction>this._action).hidden,\n\t\t\t);\n\t\t\tconst isMenuEmpty =\n\t\t\t\t(<ButtonWithDropDownExtensionAction>this._action).menuActions\n\t\t\t\t\t.length === 0;\n\t\t\tthis.element.classList.toggle(\"empty\", isMenuEmpty);\n\t\t\tthis.dropdownMenuActionViewItem.element.classList.toggle(\n\t\t\t\t\"hide\",\n\t\t\t\tisMenuEmpty,\n\t\t\t);\n\t\t}\n\t}\n}\n\nexport class InstallAction extends ExtensionAction {\n\tstatic readonly CLASS = `${this.LABEL_ACTION_CLASS} prominent install`;\n\tprivate static readonly HIDE = `${this.CLASS} hide`;\n\n\tprotected _manifest: IExtensionManifest | null = null;\n\tset manifest(manifest: IExtensionManifest | null) {\n\t\tthis._manifest = manifest;\n\t\tthis.updateLabel();\n\t}\n\n\tprivate readonly updateThrottler = new Throttler();\n\tpublic readonly options: InstallOptions;\n\n\tconstructor(\n\t\toptions: InstallOptions,\n\t\t@IExtensionsWorkbenchService\n\t\tprivate readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IInstantiationService\n\t\tprivate readonly instantiationService: IInstantiationService,\n\t\t@IExtensionService\n\t\tprivate readonly runtimeExtensionService: IExtensionService,\n\t\t@IWorkbenchThemeService\n\t\tprivate readonly workbenchThemeService: IWorkbenchThemeService,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t\t@IPreferencesService\n\t\tprivate readonly preferencesService: IPreferencesService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@IWorkspaceContextService\n\t\tprivate readonly contextService: IWorkspaceContextService,\n\t) {\n\t\tsuper(\n\t\t\t\"extensions.install\",\n\t\t\tlocalize(\"install\", \"Install\"),\n\t\t\tInstallAction.CLASS,\n\t\t\tfalse,\n\t\t);\n\t\tthis.hideOnDisabled = false;\n\t\tthis.options = { isMachineScoped: false, ...options };\n\t\tthis.update();\n\t\tthis._register(\n\t\t\tthis.labelService.onDidChangeFormatters(\n\t\t\t\t() => this.updateLabel(),\n\t\t\t\tthis,\n\t\t\t),\n\t\t);\n\t}\n\n\tupdate(): void {\n\t\tthis.updateThrottler.queue(() => this.computeAndUpdateEnablement());\n\t}\n\n\tprotected async computeAndUpdateEnablement(): Promise<void> {\n\t\tthis.enabled = false;\n\t\tthis.class = InstallAction.HIDE;\n\t\tthis.hidden = true;\n\t\tif (!this.extension) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.extension.isBuiltin) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.extensionsWorkbenchService.canSetLanguage(this.extension)) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.extension.state !== ExtensionState.Uninstalled) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tthis.options.installPreReleaseVersion &&\n\t\t\t!this.extension.hasPreReleaseVersion\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\t!this.options.installPreReleaseVersion &&\n\t\t\t!this.extension.hasReleaseVersion\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tthis.hidden = false;\n\t\tthis.class = InstallAction.CLASS;\n\t\tif (await this.extensionsWorkbenchService.canInstall(this.extension)) {\n\t\t\tthis.enabled = true;\n\t\t\tthis.updateLabel();\n\t\t}\n\t}\n\n\toverride async run(): Promise<any> {\n\t\tif (!this.extension) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.extension.deprecationInfo) {\n\t\t\tlet detail: string | MarkdownString = localize(\n\t\t\t\t\"deprecated message\",\n\t\t\t\t\"This extension is deprecated as it is no longer being maintained.\",\n\t\t\t);\n\t\t\tenum DeprecationChoice {\n\t\t\t\tInstallAnyway = 0,\n\t\t\t\tShowAlternateExtension = 1,\n\t\t\t\tConfigureSettings = 2,\n\t\t\t\tCancel = 3,\n\t\t\t}\n\t\t\tconst buttons: IPromptButton<DeprecationChoice>[] = [\n\t\t\t\t{\n\t\t\t\t\tlabel: localize(\"install anyway\", \"Install Anyway\"),\n\t\t\t\t\trun: () => DeprecationChoice.InstallAnyway,\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tif (this.extension.deprecationInfo.extension) {\n\t\t\t\tdetail = localize(\n\t\t\t\t\t\"deprecated with alternate extension message\",\n\t\t\t\t\t\"This extension is deprecated. Use the {0} extension instead.\",\n\t\t\t\t\tthis.extension.deprecationInfo.extension.displayName,\n\t\t\t\t);\n\n\t\t\t\tconst alternateExtension =\n\t\t\t\t\tthis.extension.deprecationInfo.extension;\n\t\t\t\tbuttons.push({\n\t\t\t\t\tlabel: localize(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: \"Show alternate extension\",\n\t\t\t\t\t\t\tcomment: [\"&& denotes a mnemonic\"],\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"&&Open {0}\",\n\t\t\t\t\t\tthis.extension.deprecationInfo.extension.displayName,\n\t\t\t\t\t),\n\t\t\t\t\trun: async () => {\n\t\t\t\t\t\tconst [extension] =\n\t\t\t\t\t\t\tawait this.extensionsWorkbenchService.getExtensions(\n\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tid: alternateExtension.id,\n\t\t\t\t\t\t\t\t\t\tpreRelease:\n\t\t\t\t\t\t\t\t\t\t\talternateExtension.preRelease,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\tCancellationToken.None,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\tawait this.extensionsWorkbenchService.open(extension);\n\n\t\t\t\t\t\treturn DeprecationChoice.ShowAlternateExtension;\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t} else if (this.extension.deprecationInfo.settings) {\n\t\t\t\tdetail = localize(\n\t\t\t\t\t\"deprecated with alternate settings message\",\n\t\t\t\t\t\"This extension is deprecated as this functionality is now built-in to VS Code.\",\n\t\t\t\t);\n\n\t\t\t\tconst settings = this.extension.deprecationInfo.settings;\n\t\t\t\tbuttons.push({\n\t\t\t\t\tlabel: localize(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tkey: \"configure in settings\",\n\t\t\t\t\t\t\tcomment: [\"&& denotes a mnemonic\"],\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"&&Configure Settings\",\n\t\t\t\t\t),\n\t\t\t\t\trun: async () => {\n\t\t\t\t\t\tawait this.preferencesService.openSettings({\n\t\t\t\t\t\t\tquery: settings\n\t\t\t\t\t\t\t\t.map((setting) => `@id:${setting}`)\n\t\t\t\t\t\t\t\t.join(\" \"),\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn DeprecationChoice.ConfigureSettings;\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t} else if (this.extension.deprecationInfo.additionalInfo) {\n\t\t\t\tdetail = new MarkdownString(\n\t\t\t\t\t`${detail} ${this.extension.deprecationInfo.additionalInfo}`,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst { result } = await this.dialogService.prompt({\n\t\t\t\ttype: Severity.Warning,\n\t\t\t\tmessage: localize(\n\t\t\t\t\t\"install confirmation\",\n\t\t\t\t\t\"Are you sure you want to install '{0}'?\",\n\t\t\t\t\tthis.extension.displayName,\n\t\t\t\t),\n\t\t\t\tdetail: isString(detail) ? detail : undefined,\n\t\t\t\tcustom: isString(detail)\n\t\t\t\t\t? undefined\n\t\t\t\t\t: {\n\t\t\t\t\t\t\tmarkdownDetails: [\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tmarkdown: detail,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t},\n\t\t\t\tbuttons,\n\t\t\t\tcancelButton: {\n\t\t\t\t\trun: () => DeprecationChoice.Cancel,\n\t\t\t\t},\n\t\t\t});\n\t\t\tif (result !== DeprecationChoice.InstallAnyway) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.extensionsWorkbenchService.open(this.extension, {\n\t\t\tshowPreReleaseVersion: this.options.installPreReleaseVersion,\n\t\t});\n\n\t\talert(\n\t\t\tlocalize(\n\t\t\t\t\"installExtensionStart\",\n\t\t\t\t\"Installing extension {0} started. An editor is now open with more details on this extension\",\n\t\t\t\tthis.extension.displayName,\n\t\t\t),\n\t\t);\n\n\t\t/* __GDPR__\n\t\t\t\"extensions:action:install\" : {\n\t\t\t\t\"owner\": \"sandy081\",\n\t\t\t\t\"actionId\" : { \"classification\": \"SystemMetaData\", \"purpose\": \"FeatureInsight\" },\n\t\t\t\t\"${include}\": [\n\t\t\t\t\t\"${GalleryExtensionTelemetryData}\"\n\t\t\t\t]\n\t\t\t}\n\t\t*/\n\t\tthis.telemetryService.publicLog(\"extensions:action:install\", {\n\t\t\t...this.extension.telemetryData,\n\t\t\tactionId: this.id,\n\t\t});\n\n\t\tconst extension = await this.install(this.extension);\n\n\t\tif (extension?.local) {\n\t\t\talert(\n\t\t\t\tlocalize(\n\t\t\t\t\t\"installExtensionComplete\",\n\t\t\t\t\t\"Installing extension {0} is completed.\",\n\t\t\t\t\tthis.extension.displayName,\n\t\t\t\t),\n\t\t\t);\n\t\t\tconst runningExtension = await this.getRunningExtension(\n\t\t\t\textension.local,\n\t\t\t);\n\t\t\tif (\n\t\t\t\trunningExtension &&\n\t\t\t\t!(\n\t\t\t\t\trunningExtension.activationEvents &&\n\t\t\t\t\trunningExtension.activationEvents.some((activationEent) =>\n\t\t\t\t\t\tactivationEent.startsWith(\"onLanguage\"),\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tconst action = await this.getThemeAction(extension);\n\t\t\t\tif (action) {\n\t\t\t\t\taction.extension = extension;\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn action.run({\n\t\t\t\t\t\t\tshowCurrentTheme: true,\n\t\t\t\t\t\t\tignoreFocusLost: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t} finally {\n\t\t\t\t\t\taction.dispose();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async getThemeAction(\n\t\textension: IExtension,\n\t): Promise<ExtensionAction | undefined> {\n\t\tconst colorThemes = await this.workbenchThemeService.getColorThemes();\n\t\tif (\n\t\t\tcolorThemes.some((theme) => isThemeFromExtension(theme, extension))\n\t\t) {\n\t\t\treturn this.instantiationService.createInstance(\n\t\t\t\tSetColorThemeAction,\n\t\t\t);\n\t\t}\n\t\tconst fileIconThemes =\n\t\t\tawait this.workbenchThemeService.getFileIconThemes();\n\t\tif (\n\t\t\tfileIconThemes.some((theme) =>\n\t\t\t\tisThemeFromExtension(theme, extension),\n\t\t\t)\n\t\t) {\n\t\t\treturn this.instantiationService.createInstance(\n\t\t\t\tSetFileIconThemeAction,\n\t\t\t);\n\t\t}\n\t\tconst productIconThemes =\n\t\t\tawait this.workbenchThemeService.getProductIconThemes();\n\t\tif (\n\t\t\tproductIconThemes.some((theme) =>\n\t\t\t\tisThemeFromExtension(theme, extension),\n\t\t\t)\n\t\t) {\n\t\t\treturn this.instantiationService.createInstance(\n\t\t\t\tSetProductIconThemeAction,\n\t\t\t);\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate async install(\n\t\textension: IExtension,\n\t): Promise<IExtension | undefined> {\n\t\ttry {\n\t\t\treturn await this.extensionsWorkbenchService.install(\n\t\t\t\textension,\n\t\t\t\tthis.options,\n\t\t\t);\n\t\t} catch (error) {\n\t\t\tawait this.instantiationService\n\t\t\t\t.createInstance(\n\t\t\t\t\tPromptExtensionInstallFailureAction,\n\t\t\t\t\textension,\n\t\t\t\t\tthis.options,\n\t\t\t\t\textension.latestVersion,\n\t\t\t\t\tInstallOperation.Install,\n\t\t\t\t\terror,\n\t\t\t\t)\n\t\t\t\t.run();\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\tprivate async getRunningExtension(\n\t\textension: ILocalExtension,\n\t): Promise<IExtensionDescription | null> {\n\t\tconst runningExtension =\n\t\t\tawait this.runtimeExtensionService.getExtension(\n\t\t\t\textension.identifier.id,\n\t\t\t);\n\t\tif (runningExtension) {\n\t\t\treturn runningExtension;\n\t\t}\n\t\tif (\n\t\t\tthis.runtimeExtensionService.canAddExtension(\n\t\t\t\ttoExtensionDescription(extension),\n\t\t\t)\n\t\t) {\n\t\t\treturn new Promise<IExtensionDescription | null>((c, e) => {\n\t\t\t\tconst disposable =\n\t\t\t\t\tthis.runtimeExtensionService.onDidChangeExtensions(\n\t\t\t\t\t\tasync () => {\n\t\t\t\t\t\t\tconst runningExtension =\n\t\t\t\t\t\t\t\tawait this.runtimeExtensionService.getExtension(\n\t\t\t\t\t\t\t\t\textension.identifier.id,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (runningExtension) {\n\t\t\t\t\t\t\t\tdisposable.dispose();\n\t\t\t\t\t\t\t\tc(runningExtension);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t});\n\t\t}\n\t\treturn null;\n\t}\n\n\tprotected updateLabel(): void {\n\t\tthis.label = this.getLabel();\n\t}\n\n\tgetLabel(primary?: boolean): string {\n\t\tif (\n\t\t\tthis.extension?.isWorkspaceScoped &&\n\t\t\tthis.extension.resourceExtension &&\n\t\t\tthis.contextService.isInsideWorkspace(\n\t\t\t\tthis.extension.resourceExtension.location,\n\t\t\t)\n\t\t) {\n\t\t\treturn localize(\n\t\t\t\t\"install workspace version\",\n\t\t\t\t\"Install Workspace Extension\",\n\t\t\t);\n\t\t}\n\t\t/* install pre-release version */\n\t\tif (\n\t\t\tthis.options.installPreReleaseVersion &&\n\t\t\tthis.extension?.hasPreReleaseVersion\n\t\t) {\n\t\t\treturn primary\n\t\t\t\t? localize(\"install pre-release\", \"Install Pre-Release\")\n\t\t\t\t: localize(\n\t\t\t\t\t\t\"install pre-release version\",\n\t\t\t\t\t\t\"Install Pre-Release Version\",\n\t\t\t\t\t);\n\t\t}\n\t\t/* install released version that has a pre release version */\n\t\tif (this.extension?.hasPreReleaseVersion) {\n\t\t\treturn primary\n\t\t\t\t? localize(\"install\", \"Install\")\n\t\t\t\t: localize(\n\t\t\t\t\t\t\"install release version\",\n\t\t\t\t\t\t\"Install Release Version\",\n\t\t\t\t\t);\n\t\t}\n\t\treturn localize(\"install\", \"Install\");\n\t}\n}\n\nexport class InstallDropdownAction extends ButtonWithDropDownExtensionAction {\n\tset manifest(manifest: IExtensionManifest | null) {\n\t\tthis.extensionActions.forEach(\n\t\t\t(a) => ((<InstallAction>a).manifest = manifest),\n\t\t);\n\t\tthis.update();\n\t}\n\n\tconstructor(\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IExtensionsWorkbenchService\n\t\textensionsWorkbenchService: IExtensionsWorkbenchService,\n\t) {\n\t\tsuper(`extensions.installActions`, InstallAction.CLASS, [\n\t\t\t[\n\t\t\t\tinstantiationService.createInstance(InstallAction, {\n\t\t\t\t\tinstallPreReleaseVersion:\n\t\t\t\t\t\textensionsWorkbenchService.preferPreReleases,\n\t\t\t\t}),\n\t\t\t\tinstantiationService.createInstance(InstallAction, {\n\t\t\t\t\tinstallPreReleaseVersion:\n\t\t\t\t\t\t!extensionsWorkbenchService.preferPreReleases,\n\t\t\t\t}),\n\t\t\t],\n\t\t]);\n\t}\n\n\tprotected override getLabel(action: InstallAction): string {\n\t\treturn action.getLabel(true);\n\t}\n}\n\nexport class InstallingLabelAction extends ExtensionAction {\n\tprivate static readonly LABEL = localize(\"installing\", \"Installing\");\n\tprivate static readonly CLASS =\n\t\t`${ExtensionAction.LABEL_ACTION_CLASS} install installing`;\n\n\tconstructor() {\n\t\tsuper(\n\t\t\t\"extension.installing\",\n\t\t\tInstallingLabelAction.LABEL,\n\t\t\tInstallingLabelAction.CLASS,\n\t\t\tfalse,\n\t\t);\n\t}\n\n\tupdate(): void {\n\t\tthis.class = `${InstallingLabelAction.CLASS}${this.extension && this.extension.state === ExtensionState.Installing ? \"\" : \" hide\"}`;\n\t}\n}\n\nexport abstract class InstallInOtherServerAction extends ExtensionAction {\n\tprotected static readonly INSTALL_LABEL = localize(\"install\", \"Install\");\n\tprotected static readonly INSTALLING_LABEL = localize(\n\t\t\"installing\",\n\t\t\"Installing\",\n\t);\n\n\tprivate static readonly Class =\n\t\t`${ExtensionAction.LABEL_ACTION_CLASS} prominent install-other-server`;\n\tprivate static readonly InstallingClass =\n\t\t`${ExtensionAction.LABEL_ACTION_CLASS} install-other-server installing`;\n\n\tupdateWhenCounterExtensionChanges = true;\n\n\tconstructor(\n\t\tid: string,\n\t\tprivate readonly server: IExtensionManagementServer | null,\n\t\tprivate readonly canInstallAnyWhere: boolean,\n\t\t@IExtensionsWorkbenchService\n\t\tprivate readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IExtensionManagementServerService\n\t\tprotected readonly extensionManagementServerService: IExtensionManagementServerService,\n\t\t@IExtensionManifestPropertiesService\n\t\tprivate readonly extensionManifestPropertiesService: IExtensionManifestPropertiesService,\n\t) {\n\t\tsuper(\n\t\t\tid,\n\t\t\tInstallInOtherServerAction.INSTALL_LABEL,\n\t\t\tInstallInOtherServerAction.Class,\n\t\t\tfalse,\n\t\t);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled = false;\n\t\tthis.class = InstallInOtherServerAction.Class;\n\n\t\tif (this.canInstall()) {\n\t\t\tconst extensionInOtherServer =\n\t\t\t\tthis.extensionsWorkbenchService.installed.filter(\n\t\t\t\t\t(e) =>\n\t\t\t\t\t\tareSameExtensions(\n\t\t\t\t\t\t\te.identifier,\n\t\t\t\t\t\t\tthis.extension!.identifier,\n\t\t\t\t\t\t) && e.server === this.server,\n\t\t\t\t)[0];\n\t\t\tif (extensionInOtherServer) {\n\t\t\t\t// Getting installed in other server\n\t\t\t\tif (\n\t\t\t\t\textensionInOtherServer.state ===\n\t\t\t\t\t\tExtensionState.Installing &&\n\t\t\t\t\t!extensionInOtherServer.local\n\t\t\t\t) {\n\t\t\t\t\tthis.enabled = true;\n\t\t\t\t\tthis.label = InstallInOtherServerAction.INSTALLING_LABEL;\n\t\t\t\t\tthis.class = InstallInOtherServerAction.InstallingClass;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Not installed in other server\n\t\t\t\tthis.enabled = true;\n\t\t\t\tthis.label = this.getInstallLabel();\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected canInstall(): boolean {\n\t\t// Disable if extension is not installed or not an user extension\n\t\tif (\n\t\t\t!this.extension ||\n\t\t\t!this.server ||\n\t\t\t!this.extension.local ||\n\t\t\tthis.extension.state !== ExtensionState.Installed ||\n\t\t\tthis.extension.type !== ExtensionType.User ||\n\t\t\tthis.extension.enablementState ===\n\t\t\t\tEnablementState.DisabledByEnvironment ||\n\t\t\tthis.extension.enablementState ===\n\t\t\t\tEnablementState.DisabledByTrustRequirement ||\n\t\t\tthis.extension.enablementState ===\n\t\t\t\tEnablementState.DisabledByVirtualWorkspace\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (isLanguagePackExtension(this.extension.local.manifest)) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Prefers to run on UI\n\t\tif (\n\t\t\tthis.server ===\n\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t.localExtensionManagementServer &&\n\t\t\tthis.extensionManifestPropertiesService.prefersExecuteOnUI(\n\t\t\t\tthis.extension.local.manifest,\n\t\t\t)\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Prefers to run on Workspace\n\t\tif (\n\t\t\tthis.server ===\n\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t.remoteExtensionManagementServer &&\n\t\t\tthis.extensionManifestPropertiesService.prefersExecuteOnWorkspace(\n\t\t\t\tthis.extension.local.manifest,\n\t\t\t)\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// Prefers to run on Web\n\t\tif (\n\t\t\tthis.server ===\n\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t.webExtensionManagementServer &&\n\t\t\tthis.extensionManifestPropertiesService.prefersExecuteOnWeb(\n\t\t\t\tthis.extension.local.manifest,\n\t\t\t)\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this.canInstallAnyWhere) {\n\t\t\t// Can run on UI\n\t\t\tif (\n\t\t\t\tthis.server ===\n\t\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t\t.localExtensionManagementServer &&\n\t\t\t\tthis.extensionManifestPropertiesService.canExecuteOnUI(\n\t\t\t\t\tthis.extension.local.manifest,\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\t// Can run on Workspace\n\t\t\tif (\n\t\t\t\tthis.server ===\n\t\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t\t.remoteExtensionManagementServer &&\n\t\t\t\tthis.extensionManifestPropertiesService.canExecuteOnWorkspace(\n\t\t\t\t\tthis.extension.local.manifest,\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tif (!this.extension?.local) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.extension?.server) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.server) {\n\t\t\treturn;\n\t\t}\n\t\tthis.extensionsWorkbenchService.open(this.extension);\n\t\talert(\n\t\t\tlocalize(\n\t\t\t\t\"installExtensionStart\",\n\t\t\t\t\"Installing extension {0} started. An editor is now open with more details on this extension\",\n\t\t\t\tthis.extension.displayName,\n\t\t\t),\n\t\t);\n\t\treturn this.extensionsWorkbenchService.installInServer(\n\t\t\tthis.extension,\n\t\t\tthis.server,\n\t\t);\n\t}\n\n\tprotected abstract getInstallLabel(): string;\n}\n\nexport class RemoteInstallAction extends InstallInOtherServerAction {\n\tconstructor(\n\t\tcanInstallAnyWhere: boolean,\n\t\t@IExtensionsWorkbenchService\n\t\textensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IExtensionManagementServerService\n\t\textensionManagementServerService: IExtensionManagementServerService,\n\t\t@IExtensionManifestPropertiesService\n\t\textensionManifestPropertiesService: IExtensionManifestPropertiesService,\n\t) {\n\t\tsuper(\n\t\t\t`extensions.remoteinstall`,\n\t\t\textensionManagementServerService.remoteExtensionManagementServer,\n\t\t\tcanInstallAnyWhere,\n\t\t\textensionsWorkbenchService,\n\t\t\textensionManagementServerService,\n\t\t\textensionManifestPropertiesService,\n\t\t);\n\t}\n\n\tprotected getInstallLabel(): string {\n\t\treturn this.extensionManagementServerService\n\t\t\t.remoteExtensionManagementServer\n\t\t\t? localize(\n\t\t\t\t\t{\n\t\t\t\t\t\tkey: \"install in remote\",\n\t\t\t\t\t\tcomment: [\n\t\t\t\t\t\t\t\"This is the name of the action to install an extension in remote server. Placeholder is for the name of remote server.\",\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\t\"Install in {0}\",\n\t\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t\t.remoteExtensionManagementServer.label,\n\t\t\t\t)\n\t\t\t: InstallInOtherServerAction.INSTALL_LABEL;\n\t}\n}\n\nexport class LocalInstallAction extends InstallInOtherServerAction {\n\tconstructor(\n\t\t@IExtensionsWorkbenchService\n\t\textensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IExtensionManagementServerService\n\t\textensionManagementServerService: IExtensionManagementServerService,\n\t\t@IExtensionManifestPropertiesService\n\t\textensionManifestPropertiesService: IExtensionManifestPropertiesService,\n\t) {\n\t\tsuper(\n\t\t\t`extensions.localinstall`,\n\t\t\textensionManagementServerService.localExtensionManagementServer,\n\t\t\tfalse,\n\t\t\textensionsWorkbenchService,\n\t\t\textensionManagementServerService,\n\t\t\textensionManifestPropertiesService,\n\t\t);\n\t}\n\n\tprotected getInstallLabel(): string {\n\t\treturn localize(\"install locally\", \"Install Locally\");\n\t}\n}\n\nexport class WebInstallAction extends InstallInOtherServerAction {\n\tconstructor(\n\t\t@IExtensionsWorkbenchService\n\t\textensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IExtensionManagementServerService\n\t\textensionManagementServerService: IExtensionManagementServerService,\n\t\t@IExtensionManifestPropertiesService\n\t\textensionManifestPropertiesService: IExtensionManifestPropertiesService,\n\t) {\n\t\tsuper(\n\t\t\t`extensions.webInstall`,\n\t\t\textensionManagementServerService.webExtensionManagementServer,\n\t\t\tfalse,\n\t\t\textensionsWorkbenchService,\n\t\t\textensionManagementServerService,\n\t\t\textensionManifestPropertiesService,\n\t\t);\n\t}\n\n\tprotected getInstallLabel(): string {\n\t\treturn localize(\"install browser\", \"Install in Browser\");\n\t}\n}\n\nexport class UninstallAction extends ExtensionAction {\n\tstatic readonly UninstallLabel = localize(\"uninstallAction\", \"Uninstall\");\n\tprivate static readonly UninstallingLabel = localize(\n\t\t\"Uninstalling\",\n\t\t\"Uninstalling\",\n\t);\n\n\tstatic readonly UninstallClass =\n\t\t`${ExtensionAction.LABEL_ACTION_CLASS} uninstall`;\n\tprivate static readonly UnInstallingClass =\n\t\t`${ExtensionAction.LABEL_ACTION_CLASS} uninstall uninstalling`;\n\n\tconstructor(\n\t\t@IExtensionsWorkbenchService\n\t\tprivate readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t) {\n\t\tsuper(\n\t\t\t\"extensions.uninstall\",\n\t\t\tUninstallAction.UninstallLabel,\n\t\t\tUninstallAction.UninstallClass,\n\t\t\tfalse,\n\t\t);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tif (!this.extension) {\n\t\t\tthis.enabled = false;\n\t\t\treturn;\n\t\t}\n\n\t\tconst state = this.extension.state;\n\n\t\tif (state === ExtensionState.Uninstalling) {\n\t\t\tthis.label = UninstallAction.UninstallingLabel;\n\t\t\tthis.class = UninstallAction.UnInstallingClass;\n\t\t\tthis.enabled = false;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.label = UninstallAction.UninstallLabel;\n\t\tthis.class = UninstallAction.UninstallClass;\n\t\tthis.tooltip = UninstallAction.UninstallLabel;\n\n\t\tif (state !== ExtensionState.Installed) {\n\t\t\tthis.enabled = false;\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.extension.isBuiltin) {\n\t\t\tthis.enabled = false;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabled = true;\n\t}\n\n\toverride async run(): Promise<any> {\n\t\tif (!this.extension) {\n\t\t\treturn;\n\t\t}\n\t\talert(\n\t\t\tlocalize(\n\t\t\t\t\"uninstallExtensionStart\",\n\t\t\t\t\"Uninstalling extension {0} started.\",\n\t\t\t\tthis.extension.displayName,\n\t\t\t),\n\t\t);\n\n\t\ttry {\n\t\t\tawait this.extensionsWorkbenchService.uninstall(this.extension);\n\t\t\talert(\n\t\t\t\tlocalize(\n\t\t\t\t\t\"uninstallExtensionComplete\",\n\t\t\t\t\t\"Please reload Visual Studio Code to complete the uninstallation of the extension {0}.\",\n\t\t\t\t\tthis.extension.displayName,\n\t\t\t\t),\n\t\t\t);\n\t\t} catch (error) {\n\t\t\tif (!isCancellationError(error)) {\n\t\t\t\tthis.dialogService.error(getErrorMessage(error));\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class UpdateAction extends ExtensionAction {\n\tprivate static readonly EnabledClass =\n\t\t`${this.LABEL_ACTION_CLASS} prominent update`;\n\tprivate static readonly DisabledClass = `${this.EnabledClass} disabled`;\n\n\tprivate readonly updateThrottler = new Throttler();\n\n\tconstructor(\n\t\tprivate readonly verbose: boolean,\n\t\t@IExtensionsWorkbenchService\n\t\tprivate readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t\t@IOpenerService private readonly openerService: IOpenerService,\n\t\t@IInstantiationService\n\t\tprivate readonly instantiationService: IInstantiationService,\n\t) {\n\t\tsuper(\n\t\t\t`extensions.update`,\n\t\t\tlocalize(\"update\", \"Update\"),\n\t\t\tUpdateAction.DisabledClass,\n\t\t\tfalse,\n\t\t);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.updateThrottler.queue(() => this.computeAndUpdateEnablement());\n\t\tif (this.extension) {\n\t\t\tthis.label = this.verbose\n\t\t\t\t? localize(\n\t\t\t\t\t\t\"update to\",\n\t\t\t\t\t\t\"Update to v{0}\",\n\t\t\t\t\t\tthis.extension.latestVersion,\n\t\t\t\t\t)\n\t\t\t\t: localize(\"update\", \"Update\");\n\t\t}\n\t}\n\n\tprivate async computeAndUpdateEnablement(): Promise<void> {\n\t\tthis.enabled = false;\n\t\tthis.class = UpdateAction.DisabledClass;\n\n\t\tif (!this.extension) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.extension.deprecationInfo) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst canInstall = await this.extensionsWorkbenchService.canInstall(\n\t\t\tthis.extension,\n\t\t);\n\t\tconst isInstalled = this.extension.state === ExtensionState.Installed;\n\n\t\tthis.enabled = canInstall && isInstalled && this.extension.outdated;\n\t\tthis.class = this.enabled\n\t\t\t? UpdateAction.EnabledClass\n\t\t\t: UpdateAction.DisabledClass;\n\t}\n\n\toverride async run(): Promise<any> {\n\t\tif (!this.extension) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst consent =\n\t\t\tawait this.extensionsWorkbenchService.shouldRequireConsentToUpdate(\n\t\t\t\tthis.extension,\n\t\t\t);\n\t\tif (consent) {\n\t\t\tconst { result } = await this.dialogService.prompt<\n\t\t\t\t\"update\" | \"review\" | \"cancel\"\n\t\t\t>({\n\t\t\t\ttype: \"warning\",\n\t\t\t\ttitle: localize(\n\t\t\t\t\t\"updateExtensionConsentTitle\",\n\t\t\t\t\t\"Update {0} Extension\",\n\t\t\t\t\tthis.extension.displayName,\n\t\t\t\t),\n\t\t\t\tmessage: localize(\n\t\t\t\t\t\"updateExtensionConsent\",\n\t\t\t\t\t\"{0}\\n\\nWould you like to update the extension?\",\n\t\t\t\t\tconsent,\n\t\t\t\t),\n\t\t\t\tbuttons: [\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: localize(\"update\", \"Update\"),\n\t\t\t\t\t\trun: () => \"update\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: localize(\"review\", \"Review\"),\n\t\t\t\t\t\trun: () => \"review\",\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: localize(\"cancel\", \"Cancel\"),\n\t\t\t\t\t\trun: () => \"cancel\",\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t\tif (result === \"cancel\") {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (result === \"review\") {\n\t\t\t\tif (this.extension.hasChangelog()) {\n\t\t\t\t\treturn this.extensionsWorkbenchService.open(\n\t\t\t\t\t\tthis.extension,\n\t\t\t\t\t\t{ tab: ExtensionEditorTab.Changelog },\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (this.extension.repository) {\n\t\t\t\t\treturn this.openerService.open(this.extension.repository);\n\t\t\t\t}\n\t\t\t\treturn this.extensionsWorkbenchService.open(this.extension);\n\t\t\t}\n\t\t}\n\n\t\talert(\n\t\t\tlocalize(\n\t\t\t\t\"updateExtensionStart\",\n\t\t\t\t\"Updating extension {0} to version {1} started.\",\n\t\t\t\tthis.extension.displayName,\n\t\t\t\tthis.extension.latestVersion,\n\t\t\t),\n\t\t);\n\t\treturn this.install(this.extension);\n\t}\n\n\tprivate async install(extension: IExtension): Promise<void> {\n\t\tconst options = extension.local?.preRelease\n\t\t\t? { installPreReleaseVersion: true }\n\t\t\t: undefined;\n\t\ttry {\n\t\t\tawait this.extensionsWorkbenchService.install(extension, options);\n\t\t\talert(\n\t\t\t\tlocalize(\n\t\t\t\t\t\"updateExtensionComplete\",\n\t\t\t\t\t\"Updating extension {0} to version {1} completed.\",\n\t\t\t\t\textension.displayName,\n\t\t\t\t\textension.latestVersion,\n\t\t\t\t),\n\t\t\t);\n\t\t} catch (err) {\n\t\t\tthis.instantiationService\n\t\t\t\t.createInstance(\n\t\t\t\t\tPromptExtensionInstallFailureAction,\n\t\t\t\t\textension,\n\t\t\t\t\toptions,\n\t\t\t\t\textension.latestVersion,\n\t\t\t\t\tInstallOperation.Update,\n\t\t\t\t\terr,\n\t\t\t\t)\n\t\t\t\t.run();\n\t\t}\n\t}\n}\n\nexport class ToggleAutoUpdateForExtensionAction extends ExtensionAction {\n\tstatic readonly ID =\n\t\t\"workbench.extensions.action.toggleAutoUpdateForExtension\";\n\tstatic readonly LABEL = localize2(\"enableAutoUpdateLabel\", \"Auto Update\");\n\n\tprivate static readonly EnabledClass =\n\t\t`${ExtensionAction.EXTENSION_ACTION_CLASS} auto-update`;\n\tprivate static readonly DisabledClass = `${this.EnabledClass} hide`;\n\n\tconstructor(\n\t\t@IExtensionsWorkbenchService\n\t\tprivate readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IWorkbenchExtensionEnablementService\n\t\tprivate readonly extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t) {\n\t\tsuper(\n\t\t\tToggleAutoUpdateForExtensionAction.ID,\n\t\t\tToggleAutoUpdateForExtensionAction.LABEL.value,\n\t\t\tToggleAutoUpdateForExtensionAction.DisabledClass,\n\t\t);\n\t\tthis._register(\n\t\t\tconfigurationService.onDidChangeConfiguration((e) => {\n\t\t\t\tif (e.affectsConfiguration(AutoUpdateConfigurationKey)) {\n\t\t\t\t\tthis.update();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t\tthis.update();\n\t}\n\n\toverride update() {\n\t\tthis.enabled = false;\n\t\tthis.class = ToggleAutoUpdateForExtensionAction.DisabledClass;\n\t\tif (!this.extension) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.extension.isBuiltin) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.extension.deprecationInfo?.disallowInstall) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tthis.extensionsWorkbenchService.getAutoUpdateValue() ===\n\t\t\t\t\"onlyEnabledExtensions\" &&\n\t\t\t!this.extensionEnablementService.isEnabledEnablementState(\n\t\t\t\tthis.extension.enablementState,\n\t\t\t)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tthis.enabled = true;\n\t\tthis.class = ToggleAutoUpdateForExtensionAction.EnabledClass;\n\t\tthis.checked = this.extensionsWorkbenchService.isAutoUpdateEnabledFor(\n\t\t\tthis.extension,\n\t\t);\n\t}\n\n\toverride async run(): Promise<any> {\n\t\tif (!this.extension) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst enableAutoUpdate =\n\t\t\t!this.extensionsWorkbenchService.isAutoUpdateEnabledFor(\n\t\t\t\tthis.extension,\n\t\t\t);\n\t\tawait this.extensionsWorkbenchService.updateAutoUpdateEnablementFor(\n\t\t\tthis.extension,\n\t\t\tenableAutoUpdate,\n\t\t);\n\n\t\tif (enableAutoUpdate) {\n\t\t\talert(\n\t\t\t\tlocalize(\n\t\t\t\t\t\"enableAutoUpdate\",\n\t\t\t\t\t\"Enabled auto updates for\",\n\t\t\t\t\tthis.extension.displayName,\n\t\t\t\t),\n\t\t\t);\n\t\t} else {\n\t\t\talert(\n\t\t\t\tlocalize(\n\t\t\t\t\t\"disableAutoUpdate\",\n\t\t\t\t\t\"Disabled auto updates for\",\n\t\t\t\t\tthis.extension.displayName,\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\t}\n}\n\nexport class ToggleAutoUpdatesForPublisherAction extends ExtensionAction {\n\tstatic readonly ID =\n\t\t\"workbench.extensions.action.toggleAutoUpdatesForPublisher\";\n\tstatic readonly LABEL = localize(\n\t\t\"toggleAutoUpdatesForPublisherLabel\",\n\t\t\"Auto Update All (From Publisher)\",\n\t);\n\n\tconstructor(\n\t\t@IExtensionsWorkbenchService\n\t\tprivate readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t) {\n\t\tsuper(\n\t\t\tToggleAutoUpdatesForPublisherAction.ID,\n\t\t\tToggleAutoUpdatesForPublisherAction.LABEL,\n\t\t);\n\t}\n\n\toverride update() {}\n\n\toverride async run(): Promise<any> {\n\t\tif (!this.extension) {\n\t\t\treturn;\n\t\t}\n\t\talert(\n\t\t\tlocalize(\n\t\t\t\t\"ignoreExtensionUpdatePublisher\",\n\t\t\t\t\"Ignoring updates published by {0}.\",\n\t\t\t\tthis.extension.publisherDisplayName,\n\t\t\t),\n\t\t);\n\t\tconst enableAutoUpdate =\n\t\t\t!this.extensionsWorkbenchService.isAutoUpdateEnabledFor(\n\t\t\t\tthis.extension.publisher,\n\t\t\t);\n\t\tawait this.extensionsWorkbenchService.updateAutoUpdateEnablementFor(\n\t\t\tthis.extension.publisher,\n\t\t\tenableAutoUpdate,\n\t\t);\n\t\tif (enableAutoUpdate) {\n\t\t\talert(\n\t\t\t\tlocalize(\n\t\t\t\t\t\"enableAutoUpdate\",\n\t\t\t\t\t\"Enabled auto updates for\",\n\t\t\t\t\tthis.extension.displayName,\n\t\t\t\t),\n\t\t\t);\n\t\t} else {\n\t\t\talert(\n\t\t\t\tlocalize(\n\t\t\t\t\t\"disableAutoUpdate\",\n\t\t\t\t\t\"Disabled auto updates for\",\n\t\t\t\t\tthis.extension.displayName,\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\t}\n}\n\nexport class MigrateDeprecatedExtensionAction extends ExtensionAction {\n\tprivate static readonly EnabledClass =\n\t\t`${ExtensionAction.LABEL_ACTION_CLASS} migrate`;\n\tprivate static readonly DisabledClass = `${this.EnabledClass} disabled`;\n\n\tconstructor(\n\t\tprivate readonly small: boolean,\n\t\t@IExtensionsWorkbenchService\n\t\tprivate extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t) {\n\t\tsuper(\n\t\t\t\"extensionsAction.migrateDeprecatedExtension\",\n\t\t\tlocalize(\"migrateExtension\", \"Migrate\"),\n\t\t\tMigrateDeprecatedExtensionAction.DisabledClass,\n\t\t\tfalse,\n\t\t);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled = false;\n\t\tthis.class = MigrateDeprecatedExtensionAction.DisabledClass;\n\t\tif (!this.extension?.local) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.extension.state !== ExtensionState.Installed) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.extension.deprecationInfo?.extension) {\n\t\t\treturn;\n\t\t}\n\t\tconst id = this.extension.deprecationInfo.extension.id;\n\t\tif (\n\t\t\tthis.extensionsWorkbenchService.local.some((e) =>\n\t\t\t\tareSameExtensions(e.identifier, { id }),\n\t\t\t)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tthis.enabled = true;\n\t\tthis.class = MigrateDeprecatedExtensionAction.EnabledClass;\n\t\tthis.tooltip = localize(\n\t\t\t\"migrate to\",\n\t\t\t\"Migrate to {0}\",\n\t\t\tthis.extension.deprecationInfo.extension.displayName,\n\t\t);\n\t\tthis.label = this.small ? localize(\"migrate\", \"Migrate\") : this.tooltip;\n\t}\n\n\toverride async run(): Promise<any> {\n\t\tif (!this.extension?.deprecationInfo?.extension) {\n\t\t\treturn;\n\t\t}\n\t\tconst local = this.extension.local;\n\t\tawait this.extensionsWorkbenchService.uninstall(this.extension);\n\t\tconst [extension] = await this.extensionsWorkbenchService.getExtensions(\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tid: this.extension.deprecationInfo.extension.id,\n\t\t\t\t\tpreRelease:\n\t\t\t\t\t\tthis.extension.deprecationInfo?.extension?.preRelease,\n\t\t\t\t},\n\t\t\t],\n\t\t\tCancellationToken.None,\n\t\t);\n\t\tawait this.extensionsWorkbenchService.install(extension, {\n\t\t\tisMachineScoped: local?.isMachineScoped,\n\t\t});\n\t}\n}\n\nexport abstract class DropDownExtensionAction extends ExtensionAction {\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\tcssClass: string,\n\t\tenabled: boolean,\n\t\t@IInstantiationService\n\t\tprotected instantiationService: IInstantiationService,\n\t) {\n\t\tsuper(id, label, cssClass, enabled);\n\t}\n\n\tprivate _actionViewItem: DropDownExtensionActionViewItem | null = null;\n\tcreateActionViewItem(\n\t\toptions: IActionViewItemOptions,\n\t): DropDownExtensionActionViewItem {\n\t\tthis._actionViewItem = this.instantiationService.createInstance(\n\t\t\tDropDownExtensionActionViewItem,\n\t\t\tthis,\n\t\t\toptions,\n\t\t);\n\t\treturn this._actionViewItem;\n\t}\n\n\tpublic override run({\n\t\tactionGroups,\n\t\tdisposeActionsOnHide,\n\t}: {\n\t\tactionGroups: IAction[][];\n\t\tdisposeActionsOnHide: boolean;\n\t}): Promise<any> {\n\t\tthis._actionViewItem?.showMenu(actionGroups, disposeActionsOnHide);\n\t\treturn Promise.resolve();\n\t}\n}\n\nexport class DropDownExtensionActionViewItem extends ActionViewItem {\n\tconstructor(\n\t\taction: DropDownExtensionAction,\n\t\toptions: IActionViewItemOptions,\n\t\t@IContextMenuService\n\t\tprivate readonly contextMenuService: IContextMenuService,\n\t) {\n\t\tsuper(null, action, { ...options, icon: true, label: true });\n\t}\n\n\tpublic showMenu(\n\t\tmenuActionGroups: IAction[][],\n\t\tdisposeActionsOnHide: boolean,\n\t): void {\n\t\tif (this.element) {\n\t\t\tconst actions = this.getActions(menuActionGroups);\n\t\t\tconst elementPosition = DOM.getDomNodePagePosition(this.element);\n\t\t\tconst anchor = {\n\t\t\t\tx: elementPosition.left,\n\t\t\t\ty: elementPosition.top + elementPosition.height + 10,\n\t\t\t};\n\t\t\tthis.contextMenuService.showContextMenu({\n\t\t\t\tgetAnchor: () => anchor,\n\t\t\t\tgetActions: () => actions,\n\t\t\t\tactionRunner: this.actionRunner,\n\t\t\t\tonHide: () => {\n\t\t\t\t\tif (disposeActionsOnHide) {\n\t\t\t\t\t\tdisposeIfDisposable(actions);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate getActions(menuActionGroups: IAction[][]): IAction[] {\n\t\tlet actions: IAction[] = [];\n\t\tfor (const menuActions of menuActionGroups) {\n\t\t\tactions = [...actions, ...menuActions, new Separator()];\n\t\t}\n\t\treturn actions.length ? actions.slice(0, actions.length - 1) : actions;\n\t}\n}\n\nasync function getContextMenuActionsGroups(\n\textension: IExtension | undefined | null,\n\tcontextKeyService: IContextKeyService,\n\tinstantiationService: IInstantiationService,\n): Promise<[string, Array<MenuItemAction | SubmenuItemAction>][]> {\n\treturn instantiationService.invokeFunction(async (accessor) => {\n\t\tconst extensionsWorkbenchService = accessor.get(\n\t\t\tIExtensionsWorkbenchService,\n\t\t);\n\t\tconst extensionEnablementService = accessor.get(\n\t\t\tIWorkbenchExtensionEnablementService,\n\t\t);\n\t\tconst menuService = accessor.get(IMenuService);\n\t\tconst extensionRecommendationsService = accessor.get(\n\t\t\tIExtensionRecommendationsService,\n\t\t);\n\t\tconst extensionIgnoredRecommendationsService = accessor.get(\n\t\t\tIExtensionIgnoredRecommendationsService,\n\t\t);\n\t\tconst workbenchThemeService = accessor.get(IWorkbenchThemeService);\n\t\tconst cksOverlay: [string, any][] = [];\n\n\t\tif (extension) {\n\t\t\tcksOverlay.push([\"extension\", extension.identifier.id]);\n\t\t\tcksOverlay.push([\"isBuiltinExtension\", extension.isBuiltin]);\n\t\t\tcksOverlay.push([\n\t\t\t\t\"isDefaultApplicationScopedExtension\",\n\t\t\t\textension.local &&\n\t\t\t\t\tisApplicationScopedExtension(extension.local.manifest),\n\t\t\t]);\n\t\t\tcksOverlay.push([\n\t\t\t\t\"isApplicationScopedExtension\",\n\t\t\t\textension.local && extension.local.isApplicationScoped,\n\t\t\t]);\n\t\t\tcksOverlay.push([\n\t\t\t\t\"isWorkspaceScopedExtension\",\n\t\t\t\textension.isWorkspaceScoped,\n\t\t\t]);\n\t\t\tcksOverlay.push([\n\t\t\t\t\"isGalleryExtension\",\n\t\t\t\t!!extension.identifier.uuid,\n\t\t\t]);\n\t\t\tif (extension.local) {\n\t\t\t\tcksOverlay.push([\"extensionSource\", extension.local.source]);\n\t\t\t}\n\t\t\tcksOverlay.push([\n\t\t\t\t\"extensionHasConfiguration\",\n\t\t\t\textension.local &&\n\t\t\t\t\t!!extension.local.manifest.contributes &&\n\t\t\t\t\t!!extension.local.manifest.contributes.configuration,\n\t\t\t]);\n\t\t\tcksOverlay.push([\n\t\t\t\t\"extensionHasKeybindings\",\n\t\t\t\textension.local &&\n\t\t\t\t\t!!extension.local.manifest.contributes &&\n\t\t\t\t\t!!extension.local.manifest.contributes.keybindings,\n\t\t\t]);\n\t\t\tcksOverlay.push([\n\t\t\t\t\"extensionHasCommands\",\n\t\t\t\textension.local &&\n\t\t\t\t\t!!extension.local.manifest.contributes &&\n\t\t\t\t\t!!extension.local.manifest.contributes?.commands,\n\t\t\t]);\n\t\t\tcksOverlay.push([\n\t\t\t\t\"isExtensionRecommended\",\n\t\t\t\t!!extensionRecommendationsService.getAllRecommendationsWithReason()[\n\t\t\t\t\textension.identifier.id.toLowerCase()\n\t\t\t\t],\n\t\t\t]);\n\t\t\tcksOverlay.push([\n\t\t\t\t\"isExtensionWorkspaceRecommended\",\n\t\t\t\textensionRecommendationsService.getAllRecommendationsWithReason()[\n\t\t\t\t\textension.identifier.id.toLowerCase()\n\t\t\t\t]?.reasonId === ExtensionRecommendationReason.Workspace,\n\t\t\t]);\n\t\t\tcksOverlay.push([\n\t\t\t\t\"isUserIgnoredRecommendation\",\n\t\t\t\textensionIgnoredRecommendationsService.globalIgnoredRecommendations.some(\n\t\t\t\t\t(e) => e === extension.identifier.id.toLowerCase(),\n\t\t\t\t),\n\t\t\t]);\n\t\t\tcksOverlay.push([\"isExtensionPinned\", extension.pinned]);\n\t\t\tcksOverlay.push([\n\t\t\t\t\"isExtensionEnabled\",\n\t\t\t\textensionEnablementService.isEnabledEnablementState(\n\t\t\t\t\textension.enablementState,\n\t\t\t\t),\n\t\t\t]);\n\t\t\tswitch (extension.state) {\n\t\t\t\tcase ExtensionState.Installing:\n\t\t\t\t\tcksOverlay.push([\"extensionStatus\", \"installing\"]);\n\t\t\t\t\tbreak;\n\t\t\t\tcase ExtensionState.Installed:\n\t\t\t\t\tcksOverlay.push([\"extensionStatus\", \"installed\"]);\n\t\t\t\t\tbreak;\n\t\t\t\tcase ExtensionState.Uninstalling:\n\t\t\t\t\tcksOverlay.push([\"extensionStatus\", \"uninstalling\"]);\n\t\t\t\t\tbreak;\n\t\t\t\tcase ExtensionState.Uninstalled:\n\t\t\t\t\tcksOverlay.push([\"extensionStatus\", \"uninstalled\"]);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcksOverlay.push([\n\t\t\t\t\"installedExtensionIsPreReleaseVersion\",\n\t\t\t\t!!extension.local?.isPreReleaseVersion,\n\t\t\t]);\n\t\t\tcksOverlay.push([\n\t\t\t\t\"installedExtensionIsOptedToPreRelease\",\n\t\t\t\t!!extension.local?.preRelease,\n\t\t\t]);\n\t\t\tcksOverlay.push([\n\t\t\t\t\"galleryExtensionIsPreReleaseVersion\",\n\t\t\t\t!!extension.gallery?.properties.isPreReleaseVersion,\n\t\t\t]);\n\t\t\tcksOverlay.push([\n\t\t\t\t\"galleryExtensionHasPreReleaseVersion\",\n\t\t\t\textension.gallery?.hasPreReleaseVersion,\n\t\t\t]);\n\t\t\tcksOverlay.push([\n\t\t\t\t\"extensionHasPreReleaseVersion\",\n\t\t\t\textension.hasPreReleaseVersion,\n\t\t\t]);\n\t\t\tcksOverlay.push([\n\t\t\t\t\"extensionHasReleaseVersion\",\n\t\t\t\textension.hasReleaseVersion,\n\t\t\t]);\n\t\t\tcksOverlay.push([\n\t\t\t\t\"extensionDisallowInstall\",\n\t\t\t\t!!extension.deprecationInfo?.disallowInstall,\n\t\t\t]);\n\n\t\t\tconst [colorThemes, fileIconThemes, productIconThemes] =\n\t\t\t\tawait Promise.all([\n\t\t\t\t\tworkbenchThemeService.getColorThemes(),\n\t\t\t\t\tworkbenchThemeService.getFileIconThemes(),\n\t\t\t\t\tworkbenchThemeService.getProductIconThemes(),\n\t\t\t\t]);\n\t\t\tcksOverlay.push([\n\t\t\t\t\"extensionHasColorThemes\",\n\t\t\t\tcolorThemes.some((theme) =>\n\t\t\t\t\tisThemeFromExtension(theme, extension),\n\t\t\t\t),\n\t\t\t]);\n\t\t\tcksOverlay.push([\n\t\t\t\t\"extensionHasFileIconThemes\",\n\t\t\t\tfileIconThemes.some((theme) =>\n\t\t\t\t\tisThemeFromExtension(theme, extension),\n\t\t\t\t),\n\t\t\t]);\n\t\t\tcksOverlay.push([\n\t\t\t\t\"extensionHasProductIconThemes\",\n\t\t\t\tproductIconThemes.some((theme) =>\n\t\t\t\t\tisThemeFromExtension(theme, extension),\n\t\t\t\t),\n\t\t\t]);\n\n\t\t\tcksOverlay.push([\n\t\t\t\t\"canSetLanguage\",\n\t\t\t\textensionsWorkbenchService.canSetLanguage(extension),\n\t\t\t]);\n\t\t\tcksOverlay.push([\n\t\t\t\t\"isActiveLanguagePackExtension\",\n\t\t\t\textension.gallery && language === getLocale(extension.gallery),\n\t\t\t]);\n\t\t}\n\n\t\tconst actionsGroups = menuService.getMenuActions(\n\t\t\tMenuId.ExtensionContext,\n\t\t\tcontextKeyService.createOverlay(cksOverlay),\n\t\t\t{ shouldForwardArgs: true },\n\t\t);\n\t\treturn actionsGroups;\n\t});\n}\n\nfunction toActions(\n\tactionsGroups: [string, Array<MenuItemAction | SubmenuItemAction>][],\n\tinstantiationService: IInstantiationService,\n): IAction[][] {\n\tconst result: IAction[][] = [];\n\tfor (const [, actions] of actionsGroups) {\n\t\tresult.push(\n\t\t\tactions.map((action) => {\n\t\t\t\tif (action instanceof SubmenuAction) {\n\t\t\t\t\treturn action;\n\t\t\t\t}\n\t\t\t\treturn instantiationService.createInstance(\n\t\t\t\t\tMenuItemExtensionAction,\n\t\t\t\t\taction,\n\t\t\t\t);\n\t\t\t}),\n\t\t);\n\t}\n\treturn result;\n}\n\nexport async function getContextMenuActions(\n\textension: IExtension | undefined | null,\n\tcontextKeyService: IContextKeyService,\n\tinstantiationService: IInstantiationService,\n): Promise<IAction[][]> {\n\tconst actionsGroups = await getContextMenuActionsGroups(\n\t\textension,\n\t\tcontextKeyService,\n\t\tinstantiationService,\n\t);\n\treturn toActions(actionsGroups, instantiationService);\n}\n\nexport class ManageExtensionAction extends DropDownExtensionAction {\n\tstatic readonly ID = \"extensions.manage\";\n\n\tprivate static readonly Class =\n\t\t`${ExtensionAction.ICON_ACTION_CLASS} manage ` +\n\t\tThemeIcon.asClassName(manageExtensionIcon);\n\tprivate static readonly HideManageExtensionClass = `${this.Class} hide`;\n\n\tconstructor(\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IContextKeyService\n\t\tprivate readonly contextKeyService: IContextKeyService,\n\t) {\n\t\tsuper(ManageExtensionAction.ID, \"\", \"\", true, instantiationService);\n\n\t\tthis.tooltip = localize(\"manage\", \"Manage\");\n\n\t\tthis.update();\n\t}\n\n\tasync getActionGroups(): Promise<IAction[][]> {\n\t\tconst groups: IAction[][] = [];\n\t\tconst contextMenuActionsGroups = await getContextMenuActionsGroups(\n\t\t\tthis.extension,\n\t\t\tthis.contextKeyService,\n\t\t\tthis.instantiationService,\n\t\t);\n\t\tconst themeActions: IAction[] = [],\n\t\t\tinstallActions: IAction[] = [],\n\t\t\tupdateActions: IAction[] = [],\n\t\t\totherActionGroups: IAction[][] = [];\n\t\tfor (const [group, actions] of contextMenuActionsGroups) {\n\t\t\tif (group === INSTALL_ACTIONS_GROUP) {\n\t\t\t\tinstallActions.push(\n\t\t\t\t\t...toActions(\n\t\t\t\t\t\t[[group, actions]],\n\t\t\t\t\t\tthis.instantiationService,\n\t\t\t\t\t)[0],\n\t\t\t\t);\n\t\t\t} else if (group === UPDATE_ACTIONS_GROUP) {\n\t\t\t\tupdateActions.push(\n\t\t\t\t\t...toActions(\n\t\t\t\t\t\t[[group, actions]],\n\t\t\t\t\t\tthis.instantiationService,\n\t\t\t\t\t)[0],\n\t\t\t\t);\n\t\t\t} else if (group === THEME_ACTIONS_GROUP) {\n\t\t\t\tthemeActions.push(\n\t\t\t\t\t...toActions(\n\t\t\t\t\t\t[[group, actions]],\n\t\t\t\t\t\tthis.instantiationService,\n\t\t\t\t\t)[0],\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\totherActionGroups.push(\n\t\t\t\t\t...toActions([[group, actions]], this.instantiationService),\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (themeActions.length) {\n\t\t\tgroups.push(themeActions);\n\t\t}\n\n\t\tgroups.push([\n\t\t\tthis.instantiationService.createInstance(EnableGloballyAction),\n\t\t\tthis.instantiationService.createInstance(EnableForWorkspaceAction),\n\t\t]);\n\t\tgroups.push([\n\t\t\tthis.instantiationService.createInstance(DisableGloballyAction),\n\t\t\tthis.instantiationService.createInstance(DisableForWorkspaceAction),\n\t\t]);\n\t\tif (updateActions.length) {\n\t\t\tgroups.push(updateActions);\n\t\t}\n\t\tgroups.push([\n\t\t\t...(installActions.length ? installActions : []),\n\t\t\tthis.instantiationService.createInstance(\n\t\t\t\tInstallAnotherVersionAction,\n\t\t\t\tthis.extension,\n\t\t\t\tfalse,\n\t\t\t),\n\t\t\tthis.instantiationService.createInstance(UninstallAction),\n\t\t]);\n\n\t\totherActionGroups.forEach((actions) => groups.push(actions));\n\n\t\tgroups.forEach((group) =>\n\t\t\tgroup.forEach((extensionAction) => {\n\t\t\t\tif (extensionAction instanceof ExtensionAction) {\n\t\t\t\t\textensionAction.extension = this.extension;\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\treturn groups;\n\t}\n\n\toverride async run(): Promise<any> {\n\t\tawait this.extensionService.whenInstalledExtensionsRegistered();\n\t\treturn super.run({\n\t\t\tactionGroups: await this.getActionGroups(),\n\t\t\tdisposeActionsOnHide: true,\n\t\t});\n\t}\n\n\tupdate(): void {\n\t\tthis.class = ManageExtensionAction.HideManageExtensionClass;\n\t\tthis.enabled = false;\n\t\tif (this.extension) {\n\t\t\tconst state = this.extension.state;\n\t\t\tthis.enabled = state === ExtensionState.Installed;\n\t\t\tthis.class =\n\t\t\t\tthis.enabled || state === ExtensionState.Uninstalling\n\t\t\t\t\t? ManageExtensionAction.Class\n\t\t\t\t\t: ManageExtensionAction.HideManageExtensionClass;\n\t\t}\n\t}\n}\n\nexport class ExtensionEditorManageExtensionAction extends DropDownExtensionAction {\n\tconstructor(\n\t\tprivate readonly contextKeyService: IContextKeyService,\n\t\tinstantiationService: IInstantiationService,\n\t) {\n\t\tsuper(\n\t\t\t\"extensionEditor.manageExtension\",\n\t\t\t\"\",\n\t\t\t`${ExtensionAction.ICON_ACTION_CLASS} manage ${ThemeIcon.asClassName(manageExtensionIcon)}`,\n\t\t\ttrue,\n\t\t\tinstantiationService,\n\t\t);\n\t\tthis.tooltip = localize(\"manage\", \"Manage\");\n\t}\n\n\tupdate(): void {}\n\n\toverride async run(): Promise<any> {\n\t\tconst actionGroups: IAction[][] = [];\n\t\t(\n\t\t\tawait getContextMenuActions(\n\t\t\t\tthis.extension,\n\t\t\t\tthis.contextKeyService,\n\t\t\t\tthis.instantiationService,\n\t\t\t)\n\t\t).forEach((actions) => actionGroups.push(actions));\n\t\tactionGroups.forEach((group) =>\n\t\t\tgroup.forEach((extensionAction) => {\n\t\t\t\tif (extensionAction instanceof ExtensionAction) {\n\t\t\t\t\textensionAction.extension = this.extension;\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t\treturn super.run({ actionGroups, disposeActionsOnHide: true });\n\t}\n}\n\nexport class MenuItemExtensionAction extends ExtensionAction {\n\tconstructor(\n\t\tprivate readonly action: IAction,\n\t\t@IExtensionsWorkbenchService\n\t\tprivate readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t) {\n\t\tsuper(action.id, action.label);\n\t}\n\n\toverride get enabled(): boolean {\n\t\treturn this.action.enabled;\n\t}\n\n\toverride set enabled(value: boolean) {\n\t\tthis.action.enabled = value;\n\t}\n\n\tupdate() {\n\t\tif (!this.extension) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.action.id === TOGGLE_IGNORE_EXTENSION_ACTION_ID) {\n\t\t\tthis.checked =\n\t\t\t\t!this.extensionsWorkbenchService.isExtensionIgnoredToSync(\n\t\t\t\t\tthis.extension,\n\t\t\t\t);\n\t\t} else if (this.action.id === ToggleAutoUpdateForExtensionAction.ID) {\n\t\t\tthis.checked =\n\t\t\t\tthis.extensionsWorkbenchService.isAutoUpdateEnabledFor(\n\t\t\t\t\tthis.extension,\n\t\t\t\t);\n\t\t} else if (this.action.id === ToggleAutoUpdatesForPublisherAction.ID) {\n\t\t\tthis.checked =\n\t\t\t\tthis.extensionsWorkbenchService.isAutoUpdateEnabledFor(\n\t\t\t\t\tthis.extension.publisher,\n\t\t\t\t);\n\t\t} else {\n\t\t\tthis.checked = this.action.checked;\n\t\t}\n\t}\n\n\toverride async run(): Promise<void> {\n\t\tif (this.extension) {\n\t\t\tconst id = this.extension.local\n\t\t\t\t? getExtensionId(\n\t\t\t\t\t\tthis.extension.local.manifest.publisher,\n\t\t\t\t\t\tthis.extension.local.manifest.name,\n\t\t\t\t\t)\n\t\t\t\t: this.extension.gallery\n\t\t\t\t\t? getExtensionId(\n\t\t\t\t\t\t\tthis.extension.gallery.publisher,\n\t\t\t\t\t\t\tthis.extension.gallery.name,\n\t\t\t\t\t\t)\n\t\t\t\t\t: this.extension.identifier.id;\n\t\t\tconst extensionArg: IExtensionArg = {\n\t\t\t\tid: this.extension.identifier.id,\n\t\t\t\tversion: this.extension.version,\n\t\t\t\tlocation: this.extension.local?.location,\n\t\t\t};\n\t\t\tawait this.action.run(id, extensionArg);\n\t\t}\n\t}\n}\n\nexport class TogglePreReleaseExtensionAction extends ExtensionAction {\n\tstatic readonly ID = \"workbench.extensions.action.togglePreRlease\";\n\tstatic readonly LABEL = localize(\"togglePreRleaseLabel\", \"Pre-Release\");\n\n\tprivate static readonly EnabledClass =\n\t\t`${ExtensionAction.LABEL_ACTION_CLASS} pre-release`;\n\tprivate static readonly DisabledClass = `${this.EnabledClass} hide`;\n\n\tconstructor(\n\t\t@IExtensionsWorkbenchService\n\t\tprivate readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t) {\n\t\tsuper(\n\t\t\tTogglePreReleaseExtensionAction.ID,\n\t\t\tTogglePreReleaseExtensionAction.LABEL,\n\t\t\tTogglePreReleaseExtensionAction.DisabledClass,\n\t\t);\n\t\tthis.update();\n\t}\n\n\toverride update() {\n\t\tthis.enabled = false;\n\t\tthis.class = TogglePreReleaseExtensionAction.DisabledClass;\n\t\tif (!this.extension) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.extension.isBuiltin) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.extension.state !== ExtensionState.Installed) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.extension.hasPreReleaseVersion) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.extension.gallery) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.extension.preRelease && !this.extension.isPreReleaseVersion) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\t!this.extension.preRelease &&\n\t\t\t!this.extension.gallery.hasPreReleaseVersion\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tthis.enabled = true;\n\t\tthis.class = TogglePreReleaseExtensionAction.EnabledClass;\n\n\t\tif (this.extension.preRelease) {\n\t\t\tthis.label = localize(\n\t\t\t\t\"togglePreRleaseDisableLabel\",\n\t\t\t\t\"Switch to Release Version\",\n\t\t\t);\n\t\t\tthis.tooltip = localize(\n\t\t\t\t\"togglePreRleaseDisableTooltip\",\n\t\t\t\t\"This will switch and enable updates to release versions\",\n\t\t\t);\n\t\t} else {\n\t\t\tthis.label = localize(\n\t\t\t\t\"switchToPreReleaseLabel\",\n\t\t\t\t\"Switch to Pre-Release Version\",\n\t\t\t);\n\t\t\tthis.tooltip = localize(\n\t\t\t\t\"switchToPreReleaseTooltip\",\n\t\t\t\t\"This will switch to pre-release version and enable updates to latest version always\",\n\t\t\t);\n\t\t}\n\t}\n\n\toverride async run(): Promise<any> {\n\t\tif (!this.extension) {\n\t\t\treturn;\n\t\t}\n\t\tthis.extensionsWorkbenchService.open(this.extension, {\n\t\t\tshowPreReleaseVersion: !this.extension.preRelease,\n\t\t});\n\t\tawait this.extensionsWorkbenchService.togglePreRelease(this.extension);\n\t}\n}\n\nexport class InstallAnotherVersionAction extends ExtensionAction {\n\tstatic readonly ID = \"workbench.extensions.action.install.anotherVersion\";\n\tstatic readonly LABEL = localize(\n\t\t\"install another version\",\n\t\t\"Install Specific Version...\",\n\t);\n\n\tconstructor(\n\t\textension: IExtension | null,\n\t\tprivate readonly whenInstalled: boolean,\n\t\t@IExtensionsWorkbenchService\n\t\tprivate readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IWorkbenchExtensionManagementService\n\t\tprivate readonly extensionManagementService: IWorkbenchExtensionManagementService,\n\t\t@IExtensionGalleryService\n\t\tprivate readonly extensionGalleryService: IExtensionGalleryService,\n\t\t@IQuickInputService\n\t\tprivate readonly quickInputService: IQuickInputService,\n\t\t@IInstantiationService\n\t\tprivate readonly instantiationService: IInstantiationService,\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t) {\n\t\tsuper(\n\t\t\tInstallAnotherVersionAction.ID,\n\t\t\tInstallAnotherVersionAction.LABEL,\n\t\t\tExtensionAction.LABEL_ACTION_CLASS,\n\t\t);\n\t\tthis.extension = extension;\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled =\n\t\t\t!!this.extension &&\n\t\t\t!this.extension.isBuiltin &&\n\t\t\t!!this.extension.identifier.uuid &&\n\t\t\t!this.extension.deprecationInfo;\n\t\tif (this.enabled && this.whenInstalled) {\n\t\t\tthis.enabled =\n\t\t\t\t!!this.extension?.local &&\n\t\t\t\t!!this.extension.server &&\n\t\t\t\tthis.extension.state === ExtensionState.Installed;\n\t\t}\n\t}\n\n\toverride async run(): Promise<any> {\n\t\tif (!this.enabled) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.extension) {\n\t\t\treturn;\n\t\t}\n\t\tconst targetPlatform = this.extension.server\n\t\t\t? await this.extension.server.extensionManagementService.getTargetPlatform()\n\t\t\t: await this.extensionManagementService.getTargetPlatform();\n\t\tconst allVersions =\n\t\t\tawait this.extensionGalleryService.getAllCompatibleVersions(\n\t\t\t\tthis.extension.identifier,\n\t\t\t\tthis.extension.local?.preRelease ??\n\t\t\t\t\tthis.extension.gallery?.properties.isPreReleaseVersion ??\n\t\t\t\t\tfalse,\n\t\t\t\ttargetPlatform,\n\t\t\t);\n\t\tif (!allVersions.length) {\n\t\t\tawait this.dialogService.info(\n\t\t\t\tlocalize(\n\t\t\t\t\t\"no versions\",\n\t\t\t\t\t\"This extension has no other versions.\",\n\t\t\t\t),\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconst picks = allVersions.map((v, i) => {\n\t\t\treturn {\n\t\t\t\tid: v.version,\n\t\t\t\tlabel: v.version,\n\t\t\t\tdescription: `${fromNow(new Date(Date.parse(v.date)), true)}${v.isPreReleaseVersion ? ` (${localize(\"pre-release\", \"pre-release\")})` : \"\"}${v.version === this.extension?.local?.manifest.version ? ` (${localize(\"current\", \"current\")})` : \"\"}`,\n\t\t\t\tariaLabel: `${v.isPreReleaseVersion ? \"Pre-Release version\" : \"Release version\"} ${v.version}`,\n\t\t\t\tisPreReleaseVersion: v.isPreReleaseVersion,\n\t\t\t};\n\t\t});\n\t\tconst pick = await this.quickInputService.pick(picks, {\n\t\t\tplaceHolder: localize(\"selectVersion\", \"Select Version to Install\"),\n\t\t\tmatchOnDetail: true,\n\t\t});\n\t\tif (pick) {\n\t\t\tif (this.extension.local?.manifest.version === pick.id) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst options = {\n\t\t\t\tinstallPreReleaseVersion: pick.isPreReleaseVersion,\n\t\t\t\tversion: pick.id,\n\t\t\t};\n\t\t\ttry {\n\t\t\t\tawait this.extensionsWorkbenchService.install(\n\t\t\t\t\tthis.extension,\n\t\t\t\t\toptions,\n\t\t\t\t);\n\t\t\t} catch (error) {\n\t\t\t\tthis.instantiationService\n\t\t\t\t\t.createInstance(\n\t\t\t\t\t\tPromptExtensionInstallFailureAction,\n\t\t\t\t\t\tthis.extension,\n\t\t\t\t\t\toptions,\n\t\t\t\t\t\tpick.id,\n\t\t\t\t\t\tInstallOperation.Install,\n\t\t\t\t\t\terror,\n\t\t\t\t\t)\n\t\t\t\t\t.run();\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n}\n\nexport class EnableForWorkspaceAction extends ExtensionAction {\n\tstatic readonly ID = \"extensions.enableForWorkspace\";\n\tstatic readonly LABEL = localize(\n\t\t\"enableForWorkspaceAction\",\n\t\t\"Enable (Workspace)\",\n\t);\n\n\tconstructor(\n\t\t@IExtensionsWorkbenchService\n\t\tprivate readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IWorkbenchExtensionEnablementService\n\t\tprivate readonly extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t) {\n\t\tsuper(\n\t\t\tEnableForWorkspaceAction.ID,\n\t\t\tEnableForWorkspaceAction.LABEL,\n\t\t\tExtensionAction.LABEL_ACTION_CLASS,\n\t\t);\n\t\tthis.tooltip = localize(\n\t\t\t\"enableForWorkspaceActionToolTip\",\n\t\t\t\"Enable this extension only in this workspace\",\n\t\t);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled = false;\n\t\tif (\n\t\t\tthis.extension &&\n\t\t\tthis.extension.local &&\n\t\t\t!this.extension.isWorkspaceScoped\n\t\t) {\n\t\t\tthis.enabled =\n\t\t\t\tthis.extension.state === ExtensionState.Installed &&\n\t\t\t\t!this.extensionEnablementService.isEnabled(\n\t\t\t\t\tthis.extension.local,\n\t\t\t\t) &&\n\t\t\t\tthis.extensionEnablementService.canChangeWorkspaceEnablement(\n\t\t\t\t\tthis.extension.local,\n\t\t\t\t);\n\t\t}\n\t}\n\n\toverride async run(): Promise<any> {\n\t\tif (!this.extension) {\n\t\t\treturn;\n\t\t}\n\t\treturn this.extensionsWorkbenchService.setEnablement(\n\t\t\tthis.extension,\n\t\t\tEnablementState.EnabledWorkspace,\n\t\t);\n\t}\n}\n\nexport class EnableGloballyAction extends ExtensionAction {\n\tstatic readonly ID = \"extensions.enableGlobally\";\n\tstatic readonly LABEL = localize(\"enableGloballyAction\", \"Enable\");\n\n\tconstructor(\n\t\t@IExtensionsWorkbenchService\n\t\tprivate readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IWorkbenchExtensionEnablementService\n\t\tprivate readonly extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t) {\n\t\tsuper(\n\t\t\tEnableGloballyAction.ID,\n\t\t\tEnableGloballyAction.LABEL,\n\t\t\tExtensionAction.LABEL_ACTION_CLASS,\n\t\t);\n\t\tthis.tooltip = localize(\n\t\t\t\"enableGloballyActionToolTip\",\n\t\t\t\"Enable this extension\",\n\t\t);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled = false;\n\t\tif (\n\t\t\tthis.extension &&\n\t\t\tthis.extension.local &&\n\t\t\t!this.extension.isWorkspaceScoped\n\t\t) {\n\t\t\tthis.enabled =\n\t\t\t\tthis.extension.state === ExtensionState.Installed &&\n\t\t\t\tthis.extensionEnablementService.isDisabledGlobally(\n\t\t\t\t\tthis.extension.local,\n\t\t\t\t) &&\n\t\t\t\tthis.extensionEnablementService.canChangeEnablement(\n\t\t\t\t\tthis.extension.local,\n\t\t\t\t);\n\t\t}\n\t}\n\n\toverride async run(): Promise<any> {\n\t\tif (!this.extension) {\n\t\t\treturn;\n\t\t}\n\t\treturn this.extensionsWorkbenchService.setEnablement(\n\t\t\tthis.extension,\n\t\t\tEnablementState.EnabledGlobally,\n\t\t);\n\t}\n}\n\nexport class DisableForWorkspaceAction extends ExtensionAction {\n\tstatic readonly ID = \"extensions.disableForWorkspace\";\n\tstatic readonly LABEL = localize(\n\t\t\"disableForWorkspaceAction\",\n\t\t\"Disable (Workspace)\",\n\t);\n\n\tconstructor(\n\t\t@IWorkspaceContextService\n\t\tprivate readonly workspaceContextService: IWorkspaceContextService,\n\t\t@IExtensionsWorkbenchService\n\t\tprivate readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IWorkbenchExtensionEnablementService\n\t\tprivate readonly extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t) {\n\t\tsuper(\n\t\t\tDisableForWorkspaceAction.ID,\n\t\t\tDisableForWorkspaceAction.LABEL,\n\t\t\tExtensionAction.LABEL_ACTION_CLASS,\n\t\t);\n\t\tthis.tooltip = localize(\n\t\t\t\"disableForWorkspaceActionToolTip\",\n\t\t\t\"Disable this extension only in this workspace\",\n\t\t);\n\t\tthis.update();\n\t\tthis._register(\n\t\t\tthis.extensionService.onDidChangeExtensions(() => this.update()),\n\t\t);\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled = false;\n\t\tif (\n\t\t\tthis.extension &&\n\t\t\tthis.extension.local &&\n\t\t\t!this.extension.isWorkspaceScoped &&\n\t\t\tthis.extensionService.extensions.some(\n\t\t\t\t(e) =>\n\t\t\t\t\tareSameExtensions(\n\t\t\t\t\t\t{ id: e.identifier.value, uuid: e.uuid },\n\t\t\t\t\t\tthis.extension!.identifier,\n\t\t\t\t\t) &&\n\t\t\t\t\tthis.workspaceContextService.getWorkbenchState() !==\n\t\t\t\t\t\tWorkbenchState.EMPTY,\n\t\t\t)\n\t\t) {\n\t\t\tthis.enabled =\n\t\t\t\tthis.extension.state === ExtensionState.Installed &&\n\t\t\t\t(this.extension.enablementState ===\n\t\t\t\t\tEnablementState.EnabledGlobally ||\n\t\t\t\t\tthis.extension.enablementState ===\n\t\t\t\t\t\tEnablementState.EnabledWorkspace) &&\n\t\t\t\tthis.extensionEnablementService.canChangeWorkspaceEnablement(\n\t\t\t\t\tthis.extension.local,\n\t\t\t\t);\n\t\t}\n\t}\n\n\toverride async run(): Promise<any> {\n\t\tif (!this.extension) {\n\t\t\treturn;\n\t\t}\n\t\treturn this.extensionsWorkbenchService.setEnablement(\n\t\t\tthis.extension,\n\t\t\tEnablementState.DisabledWorkspace,\n\t\t);\n\t}\n}\n\nexport class DisableGloballyAction extends ExtensionAction {\n\tstatic readonly ID = \"extensions.disableGlobally\";\n\tstatic readonly LABEL = localize(\"disableGloballyAction\", \"Disable\");\n\n\tconstructor(\n\t\t@IExtensionsWorkbenchService\n\t\tprivate readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IWorkbenchExtensionEnablementService\n\t\tprivate readonly extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t) {\n\t\tsuper(\n\t\t\tDisableGloballyAction.ID,\n\t\t\tDisableGloballyAction.LABEL,\n\t\t\tExtensionAction.LABEL_ACTION_CLASS,\n\t\t);\n\t\tthis.tooltip = localize(\n\t\t\t\"disableGloballyActionToolTip\",\n\t\t\t\"Disable this extension\",\n\t\t);\n\t\tthis.update();\n\t\tthis._register(\n\t\t\tthis.extensionService.onDidChangeExtensions(() => this.update()),\n\t\t);\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled = false;\n\t\tif (\n\t\t\tthis.extension &&\n\t\t\tthis.extension.local &&\n\t\t\t!this.extension.isWorkspaceScoped &&\n\t\t\tthis.extensionService.extensions.some((e) =>\n\t\t\t\tareSameExtensions(\n\t\t\t\t\t{ id: e.identifier.value, uuid: e.uuid },\n\t\t\t\t\tthis.extension!.identifier,\n\t\t\t\t),\n\t\t\t)\n\t\t) {\n\t\t\tthis.enabled =\n\t\t\t\tthis.extension.state === ExtensionState.Installed &&\n\t\t\t\t(this.extension.enablementState ===\n\t\t\t\t\tEnablementState.EnabledGlobally ||\n\t\t\t\t\tthis.extension.enablementState ===\n\t\t\t\t\t\tEnablementState.EnabledWorkspace) &&\n\t\t\t\tthis.extensionEnablementService.canChangeEnablement(\n\t\t\t\t\tthis.extension.local,\n\t\t\t\t);\n\t\t}\n\t}\n\n\toverride async run(): Promise<any> {\n\t\tif (!this.extension) {\n\t\t\treturn;\n\t\t}\n\t\treturn this.extensionsWorkbenchService.setEnablement(\n\t\t\tthis.extension,\n\t\t\tEnablementState.DisabledGlobally,\n\t\t);\n\t}\n}\n\nexport class EnableDropDownAction extends ButtonWithDropDownExtensionAction {\n\tconstructor(\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t) {\n\t\tsuper(\"extensions.enable\", ExtensionAction.LABEL_ACTION_CLASS, [\n\t\t\t[\n\t\t\t\tinstantiationService.createInstance(EnableGloballyAction),\n\t\t\t\tinstantiationService.createInstance(EnableForWorkspaceAction),\n\t\t\t],\n\t\t]);\n\t}\n}\n\nexport class DisableDropDownAction extends ButtonWithDropDownExtensionAction {\n\tconstructor(\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t) {\n\t\tsuper(\"extensions.disable\", ExtensionAction.LABEL_ACTION_CLASS, [\n\t\t\t[\n\t\t\t\tinstantiationService.createInstance(DisableGloballyAction),\n\t\t\t\tinstantiationService.createInstance(DisableForWorkspaceAction),\n\t\t\t],\n\t\t]);\n\t}\n}\n\nexport class ExtensionRuntimeStateAction extends ExtensionAction {\n\tprivate static readonly EnabledClass =\n\t\t`${ExtensionAction.LABEL_ACTION_CLASS} reload`;\n\tprivate static readonly DisabledClass = `${this.EnabledClass} disabled`;\n\n\tupdateWhenCounterExtensionChanges = true;\n\n\tconstructor(\n\t\t@IHostService private readonly hostService: IHostService,\n\t\t@IExtensionsWorkbenchService\n\t\tprivate readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IUpdateService private readonly updateService: IUpdateService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t) {\n\t\tsuper(\n\t\t\t\"extensions.runtimeState\",\n\t\t\t\"\",\n\t\t\tExtensionRuntimeStateAction.DisabledClass,\n\t\t\tfalse,\n\t\t);\n\t\tthis._register(\n\t\t\tthis.extensionService.onDidChangeExtensions(() => this.update()),\n\t\t);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled = false;\n\t\tthis.tooltip = \"\";\n\t\tthis.class = ExtensionRuntimeStateAction.DisabledClass;\n\n\t\tif (!this.extension) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst state = this.extension.state;\n\t\tif (\n\t\t\tstate === ExtensionState.Installing ||\n\t\t\tstate === ExtensionState.Uninstalling\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\tthis.extension.local &&\n\t\t\tthis.extension.local.manifest &&\n\t\t\tthis.extension.local.manifest.contributes &&\n\t\t\tthis.extension.local.manifest.contributes.localizations &&\n\t\t\tthis.extension.local.manifest.contributes.localizations.length > 0\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst runtimeState = this.extension.runtimeState;\n\t\tif (!runtimeState) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabled = true;\n\t\tthis.class = ExtensionRuntimeStateAction.EnabledClass;\n\t\tthis.tooltip = runtimeState.reason;\n\t\tthis.label =\n\t\t\truntimeState.action === ExtensionRuntimeActionType.ReloadWindow\n\t\t\t\t? localize(\"reload window\", \"Reload Window\")\n\t\t\t\t: runtimeState.action ===\n\t\t\t\t\t\tExtensionRuntimeActionType.RestartExtensions\n\t\t\t\t\t? localize(\"restart extensions\", \"Restart Extensions\")\n\t\t\t\t\t: runtimeState.action ===\n\t\t\t\t\t\t\tExtensionRuntimeActionType.QuitAndInstall\n\t\t\t\t\t\t? localize(\"restart product\", \"Restart to Update\")\n\t\t\t\t\t\t: runtimeState.action ===\n\t\t\t\t\t\t\t\t\tExtensionRuntimeActionType.ApplyUpdate ||\n\t\t\t\t\t\t\t\truntimeState.action ===\n\t\t\t\t\t\t\t\t\tExtensionRuntimeActionType.DownloadUpdate\n\t\t\t\t\t\t\t? localize(\n\t\t\t\t\t\t\t\t\t\"update product\",\n\t\t\t\t\t\t\t\t\t\"Update {0}\",\n\t\t\t\t\t\t\t\t\tthis.productService.nameShort,\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: \"\";\n\t}\n\n\toverride async run(): Promise<any> {\n\t\tconst runtimeState = this.extension?.runtimeState;\n\t\tif (!runtimeState?.action) {\n\t\t\treturn;\n\t\t}\n\n\t\ttype ExtensionRuntimeStateActionClassification = {\n\t\t\towner: \"sandy081\";\n\t\t\tcomment: \"Extension runtime state action event\";\n\t\t\taction: {\n\t\t\t\tclassification: \"SystemMetaData\";\n\t\t\t\tpurpose: \"FeatureInsight\";\n\t\t\t\tcomment: \"Executed action\";\n\t\t\t};\n\t\t};\n\t\ttype ExtensionRuntimeStateActionEvent = {\n\t\t\taction: string;\n\t\t};\n\t\tthis.telemetryService.publicLog2<\n\t\t\tExtensionRuntimeStateActionEvent,\n\t\t\tExtensionRuntimeStateActionClassification\n\t\t>(\"extensions:runtimestate:action\", {\n\t\t\taction: runtimeState.action,\n\t\t});\n\n\t\tif (runtimeState?.action === ExtensionRuntimeActionType.ReloadWindow) {\n\t\t\treturn this.hostService.reload();\n\t\t} else if (\n\t\t\truntimeState?.action ===\n\t\t\tExtensionRuntimeActionType.RestartExtensions\n\t\t) {\n\t\t\treturn this.extensionsWorkbenchService.updateRunningExtensions();\n\t\t} else if (\n\t\t\truntimeState?.action === ExtensionRuntimeActionType.DownloadUpdate\n\t\t) {\n\t\t\treturn this.updateService.downloadUpdate();\n\t\t} else if (\n\t\t\truntimeState?.action === ExtensionRuntimeActionType.ApplyUpdate\n\t\t) {\n\t\t\treturn this.updateService.applyUpdate();\n\t\t} else if (\n\t\t\truntimeState?.action === ExtensionRuntimeActionType.QuitAndInstall\n\t\t) {\n\t\t\treturn this.updateService.quitAndInstall();\n\t\t}\n\t}\n}\n\nfunction isThemeFromExtension(\n\ttheme: IWorkbenchTheme,\n\textension: IExtension | undefined | null,\n): boolean {\n\treturn !!(\n\t\textension &&\n\t\ttheme.extensionData &&\n\t\tExtensionIdentifier.equals(\n\t\t\ttheme.extensionData.extensionId,\n\t\t\textension.identifier.id,\n\t\t)\n\t);\n}\n\nfunction getQuickPickEntries(\n\tthemes: IWorkbenchTheme[],\n\tcurrentTheme: IWorkbenchTheme,\n\textension: IExtension | null | undefined,\n\tshowCurrentTheme: boolean,\n): QuickPickItem[] {\n\tconst picks: QuickPickItem[] = [];\n\tfor (const theme of themes) {\n\t\tif (\n\t\t\tisThemeFromExtension(theme, extension) &&\n\t\t\t!(showCurrentTheme && theme === currentTheme)\n\t\t) {\n\t\t\tpicks.push({ label: theme.label, id: theme.id });\n\t\t}\n\t}\n\tif (showCurrentTheme) {\n\t\tpicks.push({\n\t\t\ttype: \"separator\",\n\t\t\tlabel: localize(\"current\", \"current\"),\n\t\t});\n\t\tpicks.push({ label: currentTheme.label, id: currentTheme.id });\n\t}\n\treturn picks;\n}\n\nexport class SetColorThemeAction extends ExtensionAction {\n\tstatic readonly ID = \"workbench.extensions.action.setColorTheme\";\n\tstatic readonly TITLE = localize2(\n\t\t\"workbench.extensions.action.setColorTheme\",\n\t\t\"Set Color Theme\",\n\t);\n\n\tprivate static readonly EnabledClass =\n\t\t`${ExtensionAction.LABEL_ACTION_CLASS} theme`;\n\tprivate static readonly DisabledClass = `${this.EnabledClass} disabled`;\n\n\tconstructor(\n\t\t@IExtensionService extensionService: IExtensionService,\n\t\t@IWorkbenchThemeService\n\t\tprivate readonly workbenchThemeService: IWorkbenchThemeService,\n\t\t@IQuickInputService\n\t\tprivate readonly quickInputService: IQuickInputService,\n\t\t@IWorkbenchExtensionEnablementService\n\t\tprivate readonly extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t) {\n\t\tsuper(\n\t\t\tSetColorThemeAction.ID,\n\t\t\tSetColorThemeAction.TITLE.value,\n\t\t\tSetColorThemeAction.DisabledClass,\n\t\t\tfalse,\n\t\t);\n\t\tthis._register(\n\t\t\tEvent.any<any>(\n\t\t\t\textensionService.onDidChangeExtensions,\n\t\t\t\tworkbenchThemeService.onDidColorThemeChange,\n\t\t\t)(() => this.update(), this),\n\t\t);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.workbenchThemeService.getColorThemes().then((colorThemes) => {\n\t\t\tthis.enabled = this.computeEnablement(colorThemes);\n\t\t\tthis.class = this.enabled\n\t\t\t\t? SetColorThemeAction.EnabledClass\n\t\t\t\t: SetColorThemeAction.DisabledClass;\n\t\t});\n\t}\n\n\tprivate computeEnablement(colorThemes: IWorkbenchColorTheme[]): boolean {\n\t\treturn (\n\t\t\t!!this.extension &&\n\t\t\tthis.extension.state === ExtensionState.Installed &&\n\t\t\tthis.extensionEnablementService.isEnabledEnablementState(\n\t\t\t\tthis.extension.enablementState,\n\t\t\t) &&\n\t\t\tcolorThemes.some((th) => isThemeFromExtension(th, this.extension))\n\t\t);\n\t}\n\n\toverride async run(\n\t\t{\n\t\t\tshowCurrentTheme,\n\t\t\tignoreFocusLost,\n\t\t}: { showCurrentTheme: boolean; ignoreFocusLost: boolean } = {\n\t\t\tshowCurrentTheme: false,\n\t\t\tignoreFocusLost: false,\n\t\t},\n\t): Promise<any> {\n\t\tconst colorThemes = await this.workbenchThemeService.getColorThemes();\n\n\t\tif (!this.computeEnablement(colorThemes)) {\n\t\t\treturn;\n\t\t}\n\t\tconst currentTheme = this.workbenchThemeService.getColorTheme();\n\n\t\tconst delayer = new Delayer<any>(100);\n\t\tconst picks = getQuickPickEntries(\n\t\t\tcolorThemes,\n\t\t\tcurrentTheme,\n\t\t\tthis.extension,\n\t\t\tshowCurrentTheme,\n\t\t);\n\t\tconst pickedTheme = await this.quickInputService.pick(picks, {\n\t\t\tplaceHolder: localize(\"select color theme\", \"Select Color Theme\"),\n\t\t\tonDidFocus: (item) =>\n\t\t\t\tdelayer.trigger(() =>\n\t\t\t\t\tthis.workbenchThemeService.setColorTheme(\n\t\t\t\t\t\titem.id,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\tignoreFocusLost,\n\t\t});\n\t\treturn this.workbenchThemeService.setColorTheme(\n\t\t\tpickedTheme ? pickedTheme.id : currentTheme.id,\n\t\t\t\"auto\",\n\t\t);\n\t}\n}\n\nexport class SetFileIconThemeAction extends ExtensionAction {\n\tstatic readonly ID = \"workbench.extensions.action.setFileIconTheme\";\n\tstatic readonly TITLE = localize2(\n\t\t\"workbench.extensions.action.setFileIconTheme\",\n\t\t\"Set File Icon Theme\",\n\t);\n\n\tprivate static readonly EnabledClass =\n\t\t`${ExtensionAction.LABEL_ACTION_CLASS} theme`;\n\tprivate static readonly DisabledClass = `${this.EnabledClass} disabled`;\n\n\tconstructor(\n\t\t@IExtensionService extensionService: IExtensionService,\n\t\t@IWorkbenchThemeService\n\t\tprivate readonly workbenchThemeService: IWorkbenchThemeService,\n\t\t@IQuickInputService\n\t\tprivate readonly quickInputService: IQuickInputService,\n\t\t@IWorkbenchExtensionEnablementService\n\t\tprivate readonly extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t) {\n\t\tsuper(\n\t\t\tSetFileIconThemeAction.ID,\n\t\t\tSetFileIconThemeAction.TITLE.value,\n\t\t\tSetFileIconThemeAction.DisabledClass,\n\t\t\tfalse,\n\t\t);\n\t\tthis._register(\n\t\t\tEvent.any<any>(\n\t\t\t\textensionService.onDidChangeExtensions,\n\t\t\t\tworkbenchThemeService.onDidFileIconThemeChange,\n\t\t\t)(() => this.update(), this),\n\t\t);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.workbenchThemeService\n\t\t\t.getFileIconThemes()\n\t\t\t.then((fileIconThemes) => {\n\t\t\t\tthis.enabled = this.computeEnablement(fileIconThemes);\n\t\t\t\tthis.class = this.enabled\n\t\t\t\t\t? SetFileIconThemeAction.EnabledClass\n\t\t\t\t\t: SetFileIconThemeAction.DisabledClass;\n\t\t\t});\n\t}\n\n\tprivate computeEnablement(\n\t\tcolorThemfileIconThemess: IWorkbenchFileIconTheme[],\n\t): boolean {\n\t\treturn (\n\t\t\t!!this.extension &&\n\t\t\tthis.extension.state === ExtensionState.Installed &&\n\t\t\tthis.extensionEnablementService.isEnabledEnablementState(\n\t\t\t\tthis.extension.enablementState,\n\t\t\t) &&\n\t\t\tcolorThemfileIconThemess.some((th) =>\n\t\t\t\tisThemeFromExtension(th, this.extension),\n\t\t\t)\n\t\t);\n\t}\n\n\toverride async run(\n\t\t{\n\t\t\tshowCurrentTheme,\n\t\t\tignoreFocusLost,\n\t\t}: { showCurrentTheme: boolean; ignoreFocusLost: boolean } = {\n\t\t\tshowCurrentTheme: false,\n\t\t\tignoreFocusLost: false,\n\t\t},\n\t): Promise<any> {\n\t\tconst fileIconThemes =\n\t\t\tawait this.workbenchThemeService.getFileIconThemes();\n\t\tif (!this.computeEnablement(fileIconThemes)) {\n\t\t\treturn;\n\t\t}\n\t\tconst currentTheme = this.workbenchThemeService.getFileIconTheme();\n\n\t\tconst delayer = new Delayer<any>(100);\n\t\tconst picks = getQuickPickEntries(\n\t\t\tfileIconThemes,\n\t\t\tcurrentTheme,\n\t\t\tthis.extension,\n\t\t\tshowCurrentTheme,\n\t\t);\n\t\tconst pickedTheme = await this.quickInputService.pick(picks, {\n\t\t\tplaceHolder: localize(\n\t\t\t\t\"select file icon theme\",\n\t\t\t\t\"Select File Icon Theme\",\n\t\t\t),\n\t\t\tonDidFocus: (item) =>\n\t\t\t\tdelayer.trigger(() =>\n\t\t\t\t\tthis.workbenchThemeService.setFileIconTheme(\n\t\t\t\t\t\titem.id,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\tignoreFocusLost,\n\t\t});\n\t\treturn this.workbenchThemeService.setFileIconTheme(\n\t\t\tpickedTheme ? pickedTheme.id : currentTheme.id,\n\t\t\t\"auto\",\n\t\t);\n\t}\n}\n\nexport class SetProductIconThemeAction extends ExtensionAction {\n\tstatic readonly ID = \"workbench.extensions.action.setProductIconTheme\";\n\tstatic readonly TITLE = localize2(\n\t\t\"workbench.extensions.action.setProductIconTheme\",\n\t\t\"Set Product Icon Theme\",\n\t);\n\n\tprivate static readonly EnabledClass =\n\t\t`${ExtensionAction.LABEL_ACTION_CLASS} theme`;\n\tprivate static readonly DisabledClass = `${this.EnabledClass} disabled`;\n\n\tconstructor(\n\t\t@IExtensionService extensionService: IExtensionService,\n\t\t@IWorkbenchThemeService\n\t\tprivate readonly workbenchThemeService: IWorkbenchThemeService,\n\t\t@IQuickInputService\n\t\tprivate readonly quickInputService: IQuickInputService,\n\t\t@IWorkbenchExtensionEnablementService\n\t\tprivate readonly extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t) {\n\t\tsuper(\n\t\t\tSetProductIconThemeAction.ID,\n\t\t\tSetProductIconThemeAction.TITLE.value,\n\t\t\tSetProductIconThemeAction.DisabledClass,\n\t\t\tfalse,\n\t\t);\n\t\tthis._register(\n\t\t\tEvent.any<any>(\n\t\t\t\textensionService.onDidChangeExtensions,\n\t\t\t\tworkbenchThemeService.onDidProductIconThemeChange,\n\t\t\t)(() => this.update(), this),\n\t\t);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.workbenchThemeService\n\t\t\t.getProductIconThemes()\n\t\t\t.then((productIconThemes) => {\n\t\t\t\tthis.enabled = this.computeEnablement(productIconThemes);\n\t\t\t\tthis.class = this.enabled\n\t\t\t\t\t? SetProductIconThemeAction.EnabledClass\n\t\t\t\t\t: SetProductIconThemeAction.DisabledClass;\n\t\t\t});\n\t}\n\n\tprivate computeEnablement(\n\t\tproductIconThemes: IWorkbenchProductIconTheme[],\n\t): boolean {\n\t\treturn (\n\t\t\t!!this.extension &&\n\t\t\tthis.extension.state === ExtensionState.Installed &&\n\t\t\tthis.extensionEnablementService.isEnabledEnablementState(\n\t\t\t\tthis.extension.enablementState,\n\t\t\t) &&\n\t\t\tproductIconThemes.some((th) =>\n\t\t\t\tisThemeFromExtension(th, this.extension),\n\t\t\t)\n\t\t);\n\t}\n\n\toverride async run(\n\t\t{\n\t\t\tshowCurrentTheme,\n\t\t\tignoreFocusLost,\n\t\t}: { showCurrentTheme: boolean; ignoreFocusLost: boolean } = {\n\t\t\tshowCurrentTheme: false,\n\t\t\tignoreFocusLost: false,\n\t\t},\n\t): Promise<any> {\n\t\tconst productIconThemes =\n\t\t\tawait this.workbenchThemeService.getProductIconThemes();\n\t\tif (!this.computeEnablement(productIconThemes)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst currentTheme = this.workbenchThemeService.getProductIconTheme();\n\n\t\tconst delayer = new Delayer<any>(100);\n\t\tconst picks = getQuickPickEntries(\n\t\t\tproductIconThemes,\n\t\t\tcurrentTheme,\n\t\t\tthis.extension,\n\t\t\tshowCurrentTheme,\n\t\t);\n\t\tconst pickedTheme = await this.quickInputService.pick(picks, {\n\t\t\tplaceHolder: localize(\n\t\t\t\t\"select product icon theme\",\n\t\t\t\t\"Select Product Icon Theme\",\n\t\t\t),\n\t\t\tonDidFocus: (item) =>\n\t\t\t\tdelayer.trigger(() =>\n\t\t\t\t\tthis.workbenchThemeService.setProductIconTheme(\n\t\t\t\t\t\titem.id,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\tignoreFocusLost,\n\t\t});\n\t\treturn this.workbenchThemeService.setProductIconTheme(\n\t\t\tpickedTheme ? pickedTheme.id : currentTheme.id,\n\t\t\t\"auto\",\n\t\t);\n\t}\n}\n\nexport class SetLanguageAction extends ExtensionAction {\n\tstatic readonly ID = \"workbench.extensions.action.setDisplayLanguage\";\n\tstatic readonly TITLE = localize2(\n\t\t\"workbench.extensions.action.setDisplayLanguage\",\n\t\t\"Set Display Language\",\n\t);\n\n\tprivate static readonly EnabledClass =\n\t\t`${ExtensionAction.LABEL_ACTION_CLASS} language`;\n\tprivate static readonly DisabledClass = `${this.EnabledClass} disabled`;\n\n\tconstructor(\n\t\t@IExtensionsWorkbenchService\n\t\tprivate readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t) {\n\t\tsuper(\n\t\t\tSetLanguageAction.ID,\n\t\t\tSetLanguageAction.TITLE.value,\n\t\t\tSetLanguageAction.DisabledClass,\n\t\t\tfalse,\n\t\t);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled = false;\n\t\tthis.class = SetLanguageAction.DisabledClass;\n\t\tif (!this.extension) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.extensionsWorkbenchService.canSetLanguage(this.extension)) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tthis.extension.gallery &&\n\t\t\tlanguage === getLocale(this.extension.gallery)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tthis.enabled = true;\n\t\tthis.class = SetLanguageAction.EnabledClass;\n\t}\n\n\toverride async run(): Promise<any> {\n\t\treturn (\n\t\t\tthis.extension &&\n\t\t\tthis.extensionsWorkbenchService.setLanguage(this.extension)\n\t\t);\n\t}\n}\n\nexport class ClearLanguageAction extends ExtensionAction {\n\tstatic readonly ID = \"workbench.extensions.action.clearLanguage\";\n\tstatic readonly TITLE = localize2(\n\t\t\"workbench.extensions.action.clearLanguage\",\n\t\t\"Clear Display Language\",\n\t);\n\n\tprivate static readonly EnabledClass =\n\t\t`${ExtensionAction.LABEL_ACTION_CLASS} language`;\n\tprivate static readonly DisabledClass = `${this.EnabledClass} disabled`;\n\n\tconstructor(\n\t\t@IExtensionsWorkbenchService\n\t\tprivate readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@ILocaleService private readonly localeService: ILocaleService,\n\t) {\n\t\tsuper(\n\t\t\tClearLanguageAction.ID,\n\t\t\tClearLanguageAction.TITLE.value,\n\t\t\tClearLanguageAction.DisabledClass,\n\t\t\tfalse,\n\t\t);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled = false;\n\t\tthis.class = ClearLanguageAction.DisabledClass;\n\t\tif (!this.extension) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.extensionsWorkbenchService.canSetLanguage(this.extension)) {\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\tthis.extension.gallery &&\n\t\t\tlanguage !== getLocale(this.extension.gallery)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\tthis.enabled = true;\n\t\tthis.class = ClearLanguageAction.EnabledClass;\n\t}\n\n\toverride async run(): Promise<any> {\n\t\treturn this.extension && this.localeService.clearLocalePreference();\n\t}\n}\n\nexport class ShowRecommendedExtensionAction extends Action {\n\tstatic readonly ID = \"workbench.extensions.action.showRecommendedExtension\";\n\tstatic readonly LABEL = localize(\n\t\t\"showRecommendedExtension\",\n\t\t\"Show Recommended Extension\",\n\t);\n\n\tprivate extensionId: string;\n\n\tconstructor(\n\t\textensionId: string,\n\t\t@IExtensionsWorkbenchService\n\t\tprivate readonly extensionWorkbenchService: IExtensionsWorkbenchService,\n\t) {\n\t\tsuper(\n\t\t\tShowRecommendedExtensionAction.ID,\n\t\t\tShowRecommendedExtensionAction.LABEL,\n\t\t\tundefined,\n\t\t\tfalse,\n\t\t);\n\t\tthis.extensionId = extensionId;\n\t}\n\n\toverride async run(): Promise<any> {\n\t\tawait this.extensionWorkbenchService.openSearch(\n\t\t\t`@id:${this.extensionId}`,\n\t\t);\n\t\tconst [extension] = await this.extensionWorkbenchService.getExtensions(\n\t\t\t[{ id: this.extensionId }],\n\t\t\t{ source: \"install-recommendation\" },\n\t\t\tCancellationToken.None,\n\t\t);\n\t\tif (extension) {\n\t\t\treturn this.extensionWorkbenchService.open(extension);\n\t\t}\n\t\treturn null;\n\t}\n}\n\nexport class InstallRecommendedExtensionAction extends Action {\n\tstatic readonly ID =\n\t\t\"workbench.extensions.action.installRecommendedExtension\";\n\tstatic readonly LABEL = localize(\n\t\t\"installRecommendedExtension\",\n\t\t\"Install Recommended Extension\",\n\t);\n\n\tprivate extensionId: string;\n\n\tconstructor(\n\t\textensionId: string,\n\t\t@IInstantiationService\n\t\tprivate readonly instantiationService: IInstantiationService,\n\t\t@IExtensionsWorkbenchService\n\t\tprivate readonly extensionWorkbenchService: IExtensionsWorkbenchService,\n\t) {\n\t\tsuper(\n\t\t\tInstallRecommendedExtensionAction.ID,\n\t\t\tInstallRecommendedExtensionAction.LABEL,\n\t\t\tundefined,\n\t\t\tfalse,\n\t\t);\n\t\tthis.extensionId = extensionId;\n\t}\n\n\toverride async run(): Promise<any> {\n\t\tawait this.extensionWorkbenchService.openSearch(\n\t\t\t`@id:${this.extensionId}`,\n\t\t);\n\t\tconst [extension] = await this.extensionWorkbenchService.getExtensions(\n\t\t\t[{ id: this.extensionId }],\n\t\t\t{ source: \"install-recommendation\" },\n\t\t\tCancellationToken.None,\n\t\t);\n\t\tif (extension) {\n\t\t\tawait this.extensionWorkbenchService.open(extension);\n\t\t\ttry {\n\t\t\t\tawait this.extensionWorkbenchService.install(extension);\n\t\t\t} catch (err) {\n\t\t\t\tthis.instantiationService\n\t\t\t\t\t.createInstance(\n\t\t\t\t\t\tPromptExtensionInstallFailureAction,\n\t\t\t\t\t\textension,\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\textension.latestVersion,\n\t\t\t\t\t\tInstallOperation.Install,\n\t\t\t\t\t\terr,\n\t\t\t\t\t)\n\t\t\t\t\t.run();\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class IgnoreExtensionRecommendationAction extends Action {\n\tstatic readonly ID = \"extensions.ignore\";\n\n\tprivate static readonly Class =\n\t\t`${ExtensionAction.LABEL_ACTION_CLASS} ignore`;\n\n\tconstructor(\n\t\tprivate readonly extension: IExtension,\n\t\t@IExtensionIgnoredRecommendationsService\n\t\tprivate readonly extensionRecommendationsManagementService: IExtensionIgnoredRecommendationsService,\n\t) {\n\t\tsuper(IgnoreExtensionRecommendationAction.ID, \"Ignore Recommendation\");\n\n\t\tthis.class = IgnoreExtensionRecommendationAction.Class;\n\t\tthis.tooltip = localize(\n\t\t\t\"ignoreExtensionRecommendation\",\n\t\t\t\"Do not recommend this extension again\",\n\t\t);\n\t\tthis.enabled = true;\n\t}\n\n\tpublic override run(): Promise<any> {\n\t\tthis.extensionRecommendationsManagementService.toggleGlobalIgnoredRecommendation(\n\t\t\tthis.extension.identifier.id,\n\t\t\ttrue,\n\t\t);\n\t\treturn Promise.resolve();\n\t}\n}\n\nexport class UndoIgnoreExtensionRecommendationAction extends Action {\n\tstatic readonly ID = \"extensions.ignore\";\n\n\tprivate static readonly Class =\n\t\t`${ExtensionAction.LABEL_ACTION_CLASS} undo-ignore`;\n\n\tconstructor(\n\t\tprivate readonly extension: IExtension,\n\t\t@IExtensionIgnoredRecommendationsService\n\t\tprivate readonly extensionRecommendationsManagementService: IExtensionIgnoredRecommendationsService,\n\t) {\n\t\tsuper(UndoIgnoreExtensionRecommendationAction.ID, \"Undo\");\n\n\t\tthis.class = UndoIgnoreExtensionRecommendationAction.Class;\n\t\tthis.tooltip = localize(\"undo\", \"Undo\");\n\t\tthis.enabled = true;\n\t}\n\n\tpublic override run(): Promise<any> {\n\t\tthis.extensionRecommendationsManagementService.toggleGlobalIgnoredRecommendation(\n\t\t\tthis.extension.identifier.id,\n\t\t\tfalse,\n\t\t);\n\t\treturn Promise.resolve();\n\t}\n}\n\nexport abstract class AbstractConfigureRecommendedExtensionsAction extends Action {\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IWorkspaceContextService\n\t\tprotected contextService: IWorkspaceContextService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@ITextFileService private readonly textFileService: ITextFileService,\n\t\t@IEditorService protected editorService: IEditorService,\n\t\t@IJSONEditingService\n\t\tprivate readonly jsonEditingService: IJSONEditingService,\n\t\t@ITextModelService\n\t\tprivate readonly textModelResolverService: ITextModelService,\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\tprotected openExtensionsFile(extensionsFileResource: URI): Promise<any> {\n\t\treturn this.getOrCreateExtensionsFile(extensionsFileResource).then(\n\t\t\t({ created, content }) =>\n\t\t\t\tthis.getSelectionPosition(content, extensionsFileResource, [\n\t\t\t\t\t\"recommendations\",\n\t\t\t\t]).then((selection) =>\n\t\t\t\t\tthis.editorService.openEditor({\n\t\t\t\t\t\tresource: extensionsFileResource,\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tpinned: created,\n\t\t\t\t\t\t\tselection,\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t),\n\t\t\t(error) =>\n\t\t\t\tPromise.reject(\n\t\t\t\t\tnew Error(\n\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\"OpenExtensionsFile.failed\",\n\t\t\t\t\t\t\t\"Unable to create 'extensions.json' file inside the '.vscode' folder ({0}).\",\n\t\t\t\t\t\t\terror,\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t);\n\t}\n\n\tprotected openWorkspaceConfigurationFile(\n\t\tworkspaceConfigurationFile: URI,\n\t): Promise<any> {\n\t\treturn this.getOrUpdateWorkspaceConfigurationFile(\n\t\t\tworkspaceConfigurationFile,\n\t\t)\n\t\t\t.then((content) =>\n\t\t\t\tthis.getSelectionPosition(\n\t\t\t\t\tcontent.value.toString(),\n\t\t\t\t\tcontent.resource,\n\t\t\t\t\t[\"extensions\", \"recommendations\"],\n\t\t\t\t),\n\t\t\t)\n\t\t\t.then((selection) =>\n\t\t\t\tthis.editorService.openEditor({\n\t\t\t\t\tresource: workspaceConfigurationFile,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tselection,\n\t\t\t\t\t\tforceReload: true, // because content has changed\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t);\n\t}\n\n\tprivate getOrUpdateWorkspaceConfigurationFile(\n\t\tworkspaceConfigurationFile: URI,\n\t): Promise<IFileContent> {\n\t\treturn Promise.resolve(\n\t\t\tthis.fileService.readFile(workspaceConfigurationFile),\n\t\t).then((content) => {\n\t\t\tconst workspaceRecommendations = <IExtensionsConfigContent>(\n\t\t\t\tjson.parse(content.value.toString())[\"extensions\"]\n\t\t\t);\n\t\t\tif (\n\t\t\t\t!workspaceRecommendations ||\n\t\t\t\t!workspaceRecommendations.recommendations\n\t\t\t) {\n\t\t\t\treturn this.jsonEditingService\n\t\t\t\t\t.write(\n\t\t\t\t\t\tworkspaceConfigurationFile,\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpath: [\"extensions\"],\n\t\t\t\t\t\t\t\tvalue: { recommendations: [] },\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t)\n\t\t\t\t\t.then(() =>\n\t\t\t\t\t\tthis.fileService.readFile(workspaceConfigurationFile),\n\t\t\t\t\t);\n\t\t\t}\n\t\t\treturn content;\n\t\t});\n\t}\n\n\tprivate getSelectionPosition(\n\t\tcontent: string,\n\t\tresource: URI,\n\t\tpath: json.JSONPath,\n\t): Promise<ITextEditorSelection | undefined> {\n\t\tconst tree = json.parseTree(content);\n\t\tconst node = json.findNodeAtLocation(tree, path);\n\t\tif (node && node.parent && node.parent.children) {\n\t\t\tconst recommendationsValueNode = node.parent.children[1];\n\t\t\tconst lastExtensionNode =\n\t\t\t\trecommendationsValueNode.children &&\n\t\t\t\trecommendationsValueNode.children.length\n\t\t\t\t\t? recommendationsValueNode.children[\n\t\t\t\t\t\t\trecommendationsValueNode.children.length - 1\n\t\t\t\t\t\t]\n\t\t\t\t\t: null;\n\t\t\tconst offset = lastExtensionNode\n\t\t\t\t? lastExtensionNode.offset + lastExtensionNode.length\n\t\t\t\t: recommendationsValueNode.offset + 1;\n\t\t\treturn Promise.resolve(\n\t\t\t\tthis.textModelResolverService.createModelReference(resource),\n\t\t\t).then((reference) => {\n\t\t\t\tconst position =\n\t\t\t\t\treference.object.textEditorModel.getPositionAt(offset);\n\t\t\t\treference.dispose();\n\t\t\t\treturn {\n\t\t\t\t\tstartLineNumber: position.lineNumber,\n\t\t\t\t\tstartColumn: position.column,\n\t\t\t\t\tendLineNumber: position.lineNumber,\n\t\t\t\t\tendColumn: position.column,\n\t\t\t\t};\n\t\t\t});\n\t\t}\n\t\treturn Promise.resolve(undefined);\n\t}\n\n\tprivate getOrCreateExtensionsFile(\n\t\textensionsFileResource: URI,\n\t): Promise<{\n\t\tcreated: boolean;\n\t\textensionsFileResource: URI;\n\t\tcontent: string;\n\t}> {\n\t\treturn Promise.resolve(\n\t\t\tthis.fileService.readFile(extensionsFileResource),\n\t\t).then(\n\t\t\t(content) => {\n\t\t\t\treturn {\n\t\t\t\t\tcreated: false,\n\t\t\t\t\textensionsFileResource,\n\t\t\t\t\tcontent: content.value.toString(),\n\t\t\t\t};\n\t\t\t},\n\t\t\t(err) => {\n\t\t\t\treturn this.textFileService\n\t\t\t\t\t.write(\n\t\t\t\t\t\textensionsFileResource,\n\t\t\t\t\t\tExtensionsConfigurationInitialContent,\n\t\t\t\t\t)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tcreated: true,\n\t\t\t\t\t\t\textensionsFileResource,\n\t\t\t\t\t\t\tcontent: ExtensionsConfigurationInitialContent,\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t},\n\t\t);\n\t}\n}\n\nexport class ConfigureWorkspaceRecommendedExtensionsAction extends AbstractConfigureRecommendedExtensionsAction {\n\tstatic readonly ID =\n\t\t\"workbench.extensions.action.configureWorkspaceRecommendedExtensions\";\n\tstatic readonly LABEL = localize(\n\t\t\"configureWorkspaceRecommendedExtensions\",\n\t\t\"Configure Recommended Extensions (Workspace)\",\n\t);\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IFileService fileService: IFileService,\n\t\t@ITextFileService textFileService: ITextFileService,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IJSONEditingService jsonEditingService: IJSONEditingService,\n\t\t@ITextModelService textModelResolverService: ITextModelService,\n\t) {\n\t\tsuper(\n\t\t\tid,\n\t\t\tlabel,\n\t\t\tcontextService,\n\t\t\tfileService,\n\t\t\ttextFileService,\n\t\t\teditorService,\n\t\t\tjsonEditingService,\n\t\t\ttextModelResolverService,\n\t\t);\n\t\tthis._register(\n\t\t\tthis.contextService.onDidChangeWorkbenchState(\n\t\t\t\t() => this.update(),\n\t\t\t\tthis,\n\t\t\t),\n\t\t);\n\t\tthis.update();\n\t}\n\n\tprivate update(): void {\n\t\tthis.enabled =\n\t\t\tthis.contextService.getWorkbenchState() !== WorkbenchState.EMPTY;\n\t}\n\n\tpublic override run(): Promise<void> {\n\t\tswitch (this.contextService.getWorkbenchState()) {\n\t\t\tcase WorkbenchState.FOLDER:\n\t\t\t\treturn this.openExtensionsFile(\n\t\t\t\t\tthis.contextService\n\t\t\t\t\t\t.getWorkspace()\n\t\t\t\t\t\t.folders[0].toResource(EXTENSIONS_CONFIG),\n\t\t\t\t);\n\t\t\tcase WorkbenchState.WORKSPACE:\n\t\t\t\treturn this.openWorkspaceConfigurationFile(\n\t\t\t\t\tthis.contextService.getWorkspace().configuration!,\n\t\t\t\t);\n\t\t}\n\t\treturn Promise.resolve();\n\t}\n}\n\nexport class ConfigureWorkspaceFolderRecommendedExtensionsAction extends AbstractConfigureRecommendedExtensionsAction {\n\tstatic readonly ID =\n\t\t\"workbench.extensions.action.configureWorkspaceFolderRecommendedExtensions\";\n\tstatic readonly LABEL = localize(\n\t\t\"configureWorkspaceFolderRecommendedExtensions\",\n\t\t\"Configure Recommended Extensions (Workspace Folder)\",\n\t);\n\n\tconstructor(\n\t\tid: string,\n\t\tlabel: string,\n\t\t@IFileService fileService: IFileService,\n\t\t@ITextFileService textFileService: ITextFileService,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IJSONEditingService jsonEditingService: IJSONEditingService,\n\t\t@ITextModelService textModelResolverService: ITextModelService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t) {\n\t\tsuper(\n\t\t\tid,\n\t\t\tlabel,\n\t\t\tcontextService,\n\t\t\tfileService,\n\t\t\ttextFileService,\n\t\t\teditorService,\n\t\t\tjsonEditingService,\n\t\t\ttextModelResolverService,\n\t\t);\n\t}\n\n\tpublic override run(): Promise<any> {\n\t\tconst folderCount = this.contextService.getWorkspace().folders.length;\n\t\tconst pickFolderPromise =\n\t\t\tfolderCount === 1\n\t\t\t\t? Promise.resolve(this.contextService.getWorkspace().folders[0])\n\t\t\t\t: this.commandService.executeCommand<IWorkspaceFolder>(\n\t\t\t\t\t\tPICK_WORKSPACE_FOLDER_COMMAND_ID,\n\t\t\t\t\t);\n\t\treturn Promise.resolve(pickFolderPromise).then((workspaceFolder) => {\n\t\t\tif (workspaceFolder) {\n\t\t\t\treturn this.openExtensionsFile(\n\t\t\t\t\tworkspaceFolder.toResource(EXTENSIONS_CONFIG),\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn null;\n\t\t});\n\t}\n}\n\nexport class ExtensionStatusLabelAction\n\textends Action\n\timplements IExtensionContainer\n{\n\tprivate static readonly ENABLED_CLASS =\n\t\t`${ExtensionAction.TEXT_ACTION_CLASS} extension-status-label`;\n\tprivate static readonly DISABLED_CLASS = `${this.ENABLED_CLASS} hide`;\n\n\tprivate initialStatus: ExtensionState | null = null;\n\tprivate status: ExtensionState | null = null;\n\tprivate version: string | null = null;\n\tprivate enablementState: EnablementState | null = null;\n\n\tprivate _extension: IExtension | null = null;\n\tget extension(): IExtension | null {\n\t\treturn this._extension;\n\t}\n\tset extension(extension: IExtension | null) {\n\t\tif (\n\t\t\t!(\n\t\t\t\tthis._extension &&\n\t\t\t\textension &&\n\t\t\t\tareSameExtensions(\n\t\t\t\t\tthis._extension.identifier,\n\t\t\t\t\textension.identifier,\n\t\t\t\t)\n\t\t\t)\n\t\t) {\n\t\t\t// Different extension. Reset\n\t\t\tthis.initialStatus = null;\n\t\t\tthis.status = null;\n\t\t\tthis.enablementState = null;\n\t\t}\n\t\tthis._extension = extension;\n\t\tthis.update();\n\t}\n\n\tconstructor(\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IExtensionManagementServerService\n\t\tprivate readonly extensionManagementServerService: IExtensionManagementServerService,\n\t\t@IWorkbenchExtensionEnablementService\n\t\tprivate readonly extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t) {\n\t\tsuper(\n\t\t\t\"extensions.action.statusLabel\",\n\t\t\t\"\",\n\t\t\tExtensionStatusLabelAction.DISABLED_CLASS,\n\t\t\tfalse,\n\t\t);\n\t}\n\n\tupdate(): void {\n\t\tconst label = this.computeLabel();\n\t\tthis.label = label || \"\";\n\t\tthis.class = label\n\t\t\t? ExtensionStatusLabelAction.ENABLED_CLASS\n\t\t\t: ExtensionStatusLabelAction.DISABLED_CLASS;\n\t}\n\n\tprivate computeLabel(): string | null {\n\t\tif (!this.extension) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst currentStatus = this.status;\n\t\tconst currentVersion = this.version;\n\t\tconst currentEnablementState = this.enablementState;\n\t\tthis.status = this.extension.state;\n\t\tthis.version = this.extension.version;\n\t\tif (this.initialStatus === null) {\n\t\t\tthis.initialStatus = this.status;\n\t\t}\n\t\tthis.enablementState = this.extension.enablementState;\n\n\t\tconst canAddExtension = () => {\n\t\t\tconst runningExtension = this.extensionService.extensions.filter(\n\t\t\t\t(e) =>\n\t\t\t\t\tareSameExtensions(\n\t\t\t\t\t\t{ id: e.identifier.value, uuid: e.uuid },\n\t\t\t\t\t\tthis.extension!.identifier,\n\t\t\t\t\t),\n\t\t\t)[0];\n\t\t\tif (this.extension!.local) {\n\t\t\t\tif (\n\t\t\t\t\trunningExtension &&\n\t\t\t\t\tthis.extension!.version === runningExtension.version\n\t\t\t\t) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn this.extensionService.canAddExtension(\n\t\t\t\t\ttoExtensionDescription(this.extension!.local),\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\tconst canRemoveExtension = () => {\n\t\t\tif (this.extension!.local) {\n\t\t\t\tif (\n\t\t\t\t\tthis.extensionService.extensions.every(\n\t\t\t\t\t\t(e) =>\n\t\t\t\t\t\t\t!(\n\t\t\t\t\t\t\t\tareSameExtensions(\n\t\t\t\t\t\t\t\t\t{ id: e.identifier.value, uuid: e.uuid },\n\t\t\t\t\t\t\t\t\tthis.extension!.identifier,\n\t\t\t\t\t\t\t\t) &&\n\t\t\t\t\t\t\t\tthis.extension!.server ===\n\t\t\t\t\t\t\t\t\tthis.extensionManagementServerService.getExtensionManagementServer(\n\t\t\t\t\t\t\t\t\t\ttoExtension(e),\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t),\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn this.extensionService.canRemoveExtension(\n\t\t\t\t\ttoExtensionDescription(this.extension!.local),\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\tif (currentStatus !== null) {\n\t\t\tif (\n\t\t\t\tcurrentStatus === ExtensionState.Installing &&\n\t\t\t\tthis.status === ExtensionState.Installed\n\t\t\t) {\n\t\t\t\tif (\n\t\t\t\t\tthis.initialStatus === ExtensionState.Uninstalled &&\n\t\t\t\t\tcanAddExtension()\n\t\t\t\t) {\n\t\t\t\t\treturn localize(\"installed\", \"Installed\");\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\tthis.initialStatus === ExtensionState.Installed &&\n\t\t\t\t\tthis.version !== currentVersion &&\n\t\t\t\t\tcanAddExtension()\n\t\t\t\t) {\n\t\t\t\t\treturn localize(\"updated\", \"Updated\");\n\t\t\t\t}\n\t\t\t\treturn null;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tcurrentStatus === ExtensionState.Uninstalling &&\n\t\t\t\tthis.status === ExtensionState.Uninstalled\n\t\t\t) {\n\t\t\t\tthis.initialStatus = this.status;\n\t\t\t\treturn canRemoveExtension()\n\t\t\t\t\t? localize(\"uninstalled\", \"Uninstalled\")\n\t\t\t\t\t: null;\n\t\t\t}\n\t\t}\n\n\t\tif (currentEnablementState !== null) {\n\t\t\tconst currentlyEnabled =\n\t\t\t\tthis.extensionEnablementService.isEnabledEnablementState(\n\t\t\t\t\tcurrentEnablementState,\n\t\t\t\t);\n\t\t\tconst enabled =\n\t\t\t\tthis.extensionEnablementService.isEnabledEnablementState(\n\t\t\t\t\tthis.enablementState,\n\t\t\t\t);\n\t\t\tif (!currentlyEnabled && enabled) {\n\t\t\t\treturn canAddExtension()\n\t\t\t\t\t? localize(\"enabled\", \"Enabled\")\n\t\t\t\t\t: null;\n\t\t\t}\n\t\t\tif (currentlyEnabled && !enabled) {\n\t\t\t\treturn canRemoveExtension()\n\t\t\t\t\t? localize(\"disabled\", \"Disabled\")\n\t\t\t\t\t: null;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\toverride run(): Promise<any> {\n\t\treturn Promise.resolve();\n\t}\n}\n\nexport class ToggleSyncExtensionAction extends DropDownExtensionAction {\n\tprivate static readonly IGNORED_SYNC_CLASS =\n\t\t`${ExtensionAction.ICON_ACTION_CLASS} extension-sync ${ThemeIcon.asClassName(syncIgnoredIcon)}`;\n\tprivate static readonly SYNC_CLASS =\n\t\t`${this.ICON_ACTION_CLASS} extension-sync ${ThemeIcon.asClassName(syncEnabledIcon)}`;\n\n\tconstructor(\n\t\t@IConfigurationService\n\t\tprivate readonly configurationService: IConfigurationService,\n\t\t@IExtensionsWorkbenchService\n\t\tprivate readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IUserDataSyncEnablementService\n\t\tprivate readonly userDataSyncEnablementService: IUserDataSyncEnablementService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t) {\n\t\tsuper(\n\t\t\t\"extensions.sync\",\n\t\t\t\"\",\n\t\t\tToggleSyncExtensionAction.SYNC_CLASS,\n\t\t\tfalse,\n\t\t\tinstantiationService,\n\t\t);\n\t\tthis._register(\n\t\t\tEvent.filter(\n\t\t\t\tthis.configurationService.onDidChangeConfiguration,\n\t\t\t\t(e) => e.affectsConfiguration(\"settingsSync.ignoredExtensions\"),\n\t\t\t)(() => this.update()),\n\t\t);\n\t\tthis._register(\n\t\t\tuserDataSyncEnablementService.onDidChangeEnablement(() =>\n\t\t\t\tthis.update(),\n\t\t\t),\n\t\t);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.enabled =\n\t\t\t!!this.extension &&\n\t\t\tthis.userDataSyncEnablementService.isEnabled() &&\n\t\t\tthis.extension.state === ExtensionState.Installed;\n\t\tif (this.extension) {\n\t\t\tconst isIgnored =\n\t\t\t\tthis.extensionsWorkbenchService.isExtensionIgnoredToSync(\n\t\t\t\t\tthis.extension,\n\t\t\t\t);\n\t\t\tthis.class = isIgnored\n\t\t\t\t? ToggleSyncExtensionAction.IGNORED_SYNC_CLASS\n\t\t\t\t: ToggleSyncExtensionAction.SYNC_CLASS;\n\t\t\tthis.tooltip = isIgnored\n\t\t\t\t? localize(\"ignored\", \"This extension is ignored during sync\")\n\t\t\t\t: localize(\"synced\", \"This extension is synced\");\n\t\t}\n\t}\n\n\toverride async run(): Promise<any> {\n\t\treturn super.run({\n\t\t\tactionGroups: [\n\t\t\t\t[\n\t\t\t\t\tnew Action(\n\t\t\t\t\t\t\"extensions.syncignore\",\n\t\t\t\t\t\tthis.extensionsWorkbenchService.isExtensionIgnoredToSync(\n\t\t\t\t\t\t\tthis.extension!,\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t? localize(\"sync\", \"Sync this extension\")\n\t\t\t\t\t\t\t: localize(\n\t\t\t\t\t\t\t\t\t\"do not sync\",\n\t\t\t\t\t\t\t\t\t\"Do not sync this extension\",\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t() =>\n\t\t\t\t\t\t\tthis.extensionsWorkbenchService.toggleExtensionIgnoredToSync(\n\t\t\t\t\t\t\t\tthis.extension!,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t],\n\t\t\t],\n\t\t\tdisposeActionsOnHide: true,\n\t\t});\n\t}\n}\n\nexport type ExtensionStatus = {\n\treadonly message: IMarkdownString;\n\treadonly icon?: ThemeIcon;\n};\n\nexport class ExtensionStatusAction extends ExtensionAction {\n\tprivate static readonly CLASS =\n\t\t`${ExtensionAction.ICON_ACTION_CLASS} extension-status`;\n\n\tupdateWhenCounterExtensionChanges = true;\n\n\tprivate _status: ExtensionStatus[] = [];\n\tget status(): ExtensionStatus[] {\n\t\treturn this._status;\n\t}\n\n\tprivate readonly _onDidChangeStatus = this._register(new Emitter<void>());\n\treadonly onDidChangeStatus = this._onDidChangeStatus.event;\n\n\tprivate readonly updateThrottler = new Throttler();\n\n\tconstructor(\n\t\t@IExtensionManagementServerService\n\t\tprivate readonly extensionManagementServerService: IExtensionManagementServerService,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IWorkspaceTrustEnablementService\n\t\tprivate readonly workspaceTrustEnablementService: IWorkspaceTrustEnablementService,\n\t\t@IWorkspaceTrustManagementService\n\t\tprivate readonly workspaceTrustService: IWorkspaceTrustManagementService,\n\t\t@IExtensionsWorkbenchService\n\t\tprivate readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IExtensionManifestPropertiesService\n\t\tprivate readonly extensionManifestPropertiesService: IExtensionManifestPropertiesService,\n\t\t@IWorkspaceContextService\n\t\tprivate readonly contextService: IWorkspaceContextService,\n\t\t@IProductService private readonly productService: IProductService,\n\t\t@IWorkbenchExtensionEnablementService\n\t\tprivate readonly workbenchExtensionEnablementService: IWorkbenchExtensionEnablementService,\n\t\t@IExtensionFeaturesManagementService\n\t\tprivate readonly extensionFeaturesManagementService: IExtensionFeaturesManagementService,\n\t) {\n\t\tsuper(\n\t\t\t\"extensions.status\",\n\t\t\t\"\",\n\t\t\t`${ExtensionStatusAction.CLASS} hide`,\n\t\t\tfalse,\n\t\t);\n\t\tthis._register(\n\t\t\tthis.labelService.onDidChangeFormatters(() => this.update(), this),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.extensionService.onDidChangeExtensions(() => this.update()),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.extensionFeaturesManagementService.onDidChangeAccessData(() =>\n\t\t\t\tthis.update(),\n\t\t\t),\n\t\t);\n\t\tthis.update();\n\t}\n\n\tupdate(): void {\n\t\tthis.updateThrottler.queue(() => this.computeAndUpdateStatus());\n\t}\n\n\tprivate async computeAndUpdateStatus(): Promise<void> {\n\t\tthis.updateStatus(undefined, true);\n\t\tthis.enabled = false;\n\n\t\tif (!this.extension) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.extension.isMalicious) {\n\t\t\tthis.updateStatus(\n\t\t\t\t{\n\t\t\t\t\ticon: warningIcon,\n\t\t\t\t\tmessage: new MarkdownString(\n\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\"malicious tooltip\",\n\t\t\t\t\t\t\t\"This extension was reported to be problematic.\",\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t\ttrue,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.extension.deprecationInfo) {\n\t\t\tif (this.extension.deprecationInfo.extension) {\n\t\t\t\tconst link = `[${this.extension.deprecationInfo.extension.displayName}](${URI.parse(`command:extension.open?${encodeURIComponent(JSON.stringify([this.extension.deprecationInfo.extension.id]))}`)})`;\n\t\t\t\tthis.updateStatus(\n\t\t\t\t\t{\n\t\t\t\t\t\ticon: warningIcon,\n\t\t\t\t\t\tmessage: new MarkdownString(\n\t\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\t\"deprecated with alternate extension tooltip\",\n\t\t\t\t\t\t\t\t\"This extension is deprecated. Use the {0} extension instead.\",\n\t\t\t\t\t\t\t\tlink,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\ttrue,\n\t\t\t\t);\n\t\t\t} else if (this.extension.deprecationInfo.settings) {\n\t\t\t\tconst link = `[${localize(\"settings\", \"settings\")}](${URI.parse(`command:workbench.action.openSettings?${encodeURIComponent(JSON.stringify([this.extension.deprecationInfo.settings.map((setting) => `@id:${setting}`).join(\" \")]))}`)})`;\n\t\t\t\tthis.updateStatus(\n\t\t\t\t\t{\n\t\t\t\t\t\ticon: warningIcon,\n\t\t\t\t\t\tmessage: new MarkdownString(\n\t\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\t\"deprecated with alternate settings tooltip\",\n\t\t\t\t\t\t\t\t\"This extension is deprecated as this functionality is now built-in to VS Code. Configure these {0} to use this functionality.\",\n\t\t\t\t\t\t\t\tlink,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\ttrue,\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconst message = new MarkdownString(\n\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\"deprecated tooltip\",\n\t\t\t\t\t\t\"This extension is deprecated as it is no longer being maintained.\",\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t\tif (this.extension.deprecationInfo.additionalInfo) {\n\t\t\t\t\tmessage.appendMarkdown(\n\t\t\t\t\t\t` ${this.extension.deprecationInfo.additionalInfo}`,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.updateStatus({ icon: warningIcon, message }, true);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.extensionsWorkbenchService.canSetLanguage(this.extension)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\tthis.extension.outdated &&\n\t\t\tthis.extensionsWorkbenchService.isAutoUpdateEnabledFor(\n\t\t\t\tthis.extension,\n\t\t\t)\n\t\t) {\n\t\t\tconst message =\n\t\t\t\tawait this.extensionsWorkbenchService.shouldRequireConsentToUpdate(\n\t\t\t\t\tthis.extension,\n\t\t\t\t);\n\t\t\tif (message) {\n\t\t\t\tconst markdown = new MarkdownString();\n\t\t\t\tmarkdown.appendMarkdown(`${message} `);\n\t\t\t\tmarkdown.appendMarkdown(\n\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\"auto update message\",\n\t\t\t\t\t\t\"Please [review the extension]({0}) and update it manually.\",\n\t\t\t\t\t\tthis.extension.hasChangelog()\n\t\t\t\t\t\t\t? URI.parse(\n\t\t\t\t\t\t\t\t\t`command:extension.open?${encodeURIComponent(JSON.stringify([this.extension.identifier.id, ExtensionEditorTab.Changelog]))}`,\n\t\t\t\t\t\t\t\t).toString()\n\t\t\t\t\t\t\t: this.extension.repository\n\t\t\t\t\t\t\t\t? this.extension.repository\n\t\t\t\t\t\t\t\t: URI.parse(\n\t\t\t\t\t\t\t\t\t\t`command:extension.open?${encodeURIComponent(JSON.stringify([this.extension.identifier.id]))}`,\n\t\t\t\t\t\t\t\t\t).toString(),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t\tthis.updateStatus(\n\t\t\t\t\t{ icon: warningIcon, message: markdown },\n\t\t\t\t\ttrue,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\tthis.extension.gallery &&\n\t\t\tthis.extension.state === ExtensionState.Uninstalled &&\n\t\t\t!(await this.extensionsWorkbenchService.canInstall(this.extension))\n\t\t) {\n\t\t\tif (\n\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t.localExtensionManagementServer ||\n\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t.remoteExtensionManagementServer\n\t\t\t) {\n\t\t\t\tconst targetPlatform = await (this\n\t\t\t\t\t.extensionManagementServerService\n\t\t\t\t\t.localExtensionManagementServer\n\t\t\t\t\t? this.extensionManagementServerService.localExtensionManagementServer.extensionManagementService.getTargetPlatform()\n\t\t\t\t\t: this.extensionManagementServerService.remoteExtensionManagementServer!.extensionManagementService.getTargetPlatform());\n\t\t\t\tconst message = new MarkdownString(\n\t\t\t\t\t`${localize(\"incompatible platform\", \"The '{0}' extension is not available in {1} for {2}.\", this.extension.displayName || this.extension.identifier.id, this.productService.nameLong, TargetPlatformToString(targetPlatform))} [${localize(\"learn more\", \"Learn More\")}](https://aka.ms/vscode-platform-specific-extensions)`,\n\t\t\t\t);\n\t\t\t\tthis.updateStatus({ icon: warningIcon, message }, true);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t.webExtensionManagementServer\n\t\t\t) {\n\t\t\t\tconst productName = localize(\n\t\t\t\t\t\"VS Code for Web\",\n\t\t\t\t\t\"{0} for the Web\",\n\t\t\t\t\tthis.productService.nameLong,\n\t\t\t\t);\n\t\t\t\tconst message = new MarkdownString(\n\t\t\t\t\t`${localize(\"not web tooltip\", \"The '{0}' extension is not available in {1}.\", this.extension.displayName || this.extension.identifier.id, productName)} [${localize(\"learn why\", \"Learn Why\")}](https://aka.ms/vscode-web-extensions-guide)`,\n\t\t\t\t);\n\t\t\t\tthis.updateStatus({ icon: warningIcon, message }, true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\t!this.extension.local ||\n\t\t\t!this.extension.server ||\n\t\t\tthis.extension.state !== ExtensionState.Installed\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Extension is disabled by environment\n\t\tif (\n\t\t\tthis.extension.enablementState ===\n\t\t\tEnablementState.DisabledByEnvironment\n\t\t) {\n\t\t\tthis.updateStatus(\n\t\t\t\t{\n\t\t\t\t\tmessage: new MarkdownString(\n\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\"disabled by environment\",\n\t\t\t\t\t\t\t\"This extension is disabled by the environment.\",\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t\ttrue,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\t// Extension is enabled by environment\n\t\tif (\n\t\t\tthis.extension.enablementState ===\n\t\t\tEnablementState.EnabledByEnvironment\n\t\t) {\n\t\t\tthis.updateStatus(\n\t\t\t\t{\n\t\t\t\t\tmessage: new MarkdownString(\n\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\"enabled by environment\",\n\t\t\t\t\t\t\t\"This extension is enabled because it is required in the current environment.\",\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t\ttrue,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\t// Extension is disabled by virtual workspace\n\t\tif (\n\t\t\tthis.extension.enablementState ===\n\t\t\tEnablementState.DisabledByVirtualWorkspace\n\t\t) {\n\t\t\tconst details = getWorkspaceSupportTypeMessage(\n\t\t\t\tthis.extension.local.manifest.capabilities?.virtualWorkspaces,\n\t\t\t);\n\t\t\tthis.updateStatus(\n\t\t\t\t{\n\t\t\t\t\ticon: infoIcon,\n\t\t\t\t\tmessage: new MarkdownString(\n\t\t\t\t\t\tdetails\n\t\t\t\t\t\t\t? escapeMarkdownSyntaxTokens(details)\n\t\t\t\t\t\t\t: localize(\n\t\t\t\t\t\t\t\t\t\"disabled because of virtual workspace\",\n\t\t\t\t\t\t\t\t\t\"This extension has been disabled because it does not support virtual workspaces.\",\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t\ttrue,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\t// Limited support in Virtual Workspace\n\t\tif (isVirtualWorkspace(this.contextService.getWorkspace())) {\n\t\t\tconst virtualSupportType =\n\t\t\t\tthis.extensionManifestPropertiesService.getExtensionVirtualWorkspaceSupportType(\n\t\t\t\t\tthis.extension.local.manifest,\n\t\t\t\t);\n\t\t\tconst details = getWorkspaceSupportTypeMessage(\n\t\t\t\tthis.extension.local.manifest.capabilities?.virtualWorkspaces,\n\t\t\t);\n\t\t\tif (virtualSupportType === \"limited\" || details) {\n\t\t\t\tthis.updateStatus(\n\t\t\t\t\t{\n\t\t\t\t\t\ticon: warningIcon,\n\t\t\t\t\t\tmessage: new MarkdownString(\n\t\t\t\t\t\t\tdetails\n\t\t\t\t\t\t\t\t? escapeMarkdownSyntaxTokens(details)\n\t\t\t\t\t\t\t\t: localize(\n\t\t\t\t\t\t\t\t\t\t\"extension limited because of virtual workspace\",\n\t\t\t\t\t\t\t\t\t\t\"This extension has limited features because the current workspace is virtual.\",\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\ttrue,\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\t!this.workspaceTrustService.isWorkspaceTrusted() &&\n\t\t\t// Extension is disabled by untrusted workspace\n\t\t\t(this.extension.enablementState ===\n\t\t\t\tEnablementState.DisabledByTrustRequirement ||\n\t\t\t\t// All disabled dependencies of the extension are disabled by untrusted workspace\n\t\t\t\t(this.extension.enablementState ===\n\t\t\t\t\tEnablementState.DisabledByExtensionDependency &&\n\t\t\t\t\tthis.workbenchExtensionEnablementService\n\t\t\t\t\t\t.getDependenciesEnablementStates(this.extension.local)\n\t\t\t\t\t\t.every(\n\t\t\t\t\t\t\t([, enablementState]) =>\n\t\t\t\t\t\t\t\tthis.workbenchExtensionEnablementService.isEnabledEnablementState(\n\t\t\t\t\t\t\t\t\tenablementState,\n\t\t\t\t\t\t\t\t) ||\n\t\t\t\t\t\t\t\tenablementState ===\n\t\t\t\t\t\t\t\t\tEnablementState.DisabledByTrustRequirement,\n\t\t\t\t\t\t)))\n\t\t) {\n\t\t\tthis.enabled = true;\n\t\t\tconst untrustedDetails = getWorkspaceSupportTypeMessage(\n\t\t\t\tthis.extension.local.manifest.capabilities?.untrustedWorkspaces,\n\t\t\t);\n\t\t\tthis.updateStatus(\n\t\t\t\t{\n\t\t\t\t\ticon: trustIcon,\n\t\t\t\t\tmessage: new MarkdownString(\n\t\t\t\t\t\tuntrustedDetails\n\t\t\t\t\t\t\t? escapeMarkdownSyntaxTokens(untrustedDetails)\n\t\t\t\t\t\t\t: localize(\n\t\t\t\t\t\t\t\t\t\"extension disabled because of trust requirement\",\n\t\t\t\t\t\t\t\t\t\"This extension has been disabled because the current workspace is not trusted.\",\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t\ttrue,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\t// Limited support in Untrusted Workspace\n\t\tif (\n\t\t\tthis.workspaceTrustEnablementService.isWorkspaceTrustEnabled() &&\n\t\t\t!this.workspaceTrustService.isWorkspaceTrusted()\n\t\t) {\n\t\t\tconst untrustedSupportType =\n\t\t\t\tthis.extensionManifestPropertiesService.getExtensionUntrustedWorkspaceSupportType(\n\t\t\t\t\tthis.extension.local.manifest,\n\t\t\t\t);\n\t\t\tconst untrustedDetails = getWorkspaceSupportTypeMessage(\n\t\t\t\tthis.extension.local.manifest.capabilities?.untrustedWorkspaces,\n\t\t\t);\n\t\t\tif (untrustedSupportType === \"limited\" || untrustedDetails) {\n\t\t\t\tthis.enabled = true;\n\t\t\t\tthis.updateStatus(\n\t\t\t\t\t{\n\t\t\t\t\t\ticon: trustIcon,\n\t\t\t\t\t\tmessage: new MarkdownString(\n\t\t\t\t\t\t\tuntrustedDetails\n\t\t\t\t\t\t\t\t? escapeMarkdownSyntaxTokens(untrustedDetails)\n\t\t\t\t\t\t\t\t: localize(\n\t\t\t\t\t\t\t\t\t\t\"extension limited because of trust requirement\",\n\t\t\t\t\t\t\t\t\t\t\"This extension has limited features because the current workspace is not trusted.\",\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\ttrue,\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Extension is disabled by extension kind\n\t\tif (\n\t\t\tthis.extension.enablementState ===\n\t\t\tEnablementState.DisabledByExtensionKind\n\t\t) {\n\t\t\tif (\n\t\t\t\t!this.extensionsWorkbenchService.installed.some(\n\t\t\t\t\t(e) =>\n\t\t\t\t\t\tareSameExtensions(\n\t\t\t\t\t\t\te.identifier,\n\t\t\t\t\t\t\tthis.extension!.identifier,\n\t\t\t\t\t\t) && e.server !== this.extension!.server,\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tlet message;\n\t\t\t\t// Extension on Local Server\n\t\t\t\tif (\n\t\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t\t.localExtensionManagementServer ===\n\t\t\t\t\tthis.extension.server\n\t\t\t\t) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.extensionManifestPropertiesService.prefersExecuteOnWorkspace(\n\t\t\t\t\t\t\tthis.extension.local.manifest,\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t\t\t\t.remoteExtensionManagementServer\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tmessage = new MarkdownString(\n\t\t\t\t\t\t\t\t`${localize(\"Install in remote server to enable\", \"This extension is disabled in this workspace because it is defined to run in the Remote Extension Host. Please install the extension in '{0}' to enable.\", this.extensionManagementServerService.remoteExtensionManagementServer.label)} [${localize(\"learn more\", \"Learn More\")}](https://code.visualstudio.com/api/advanced-topics/remote-extensions#architecture-and-extension-kinds)`,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Extension on Remote Server\n\t\t\t\telse if (\n\t\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t\t.remoteExtensionManagementServer ===\n\t\t\t\t\tthis.extension.server\n\t\t\t\t) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.extensionManifestPropertiesService.prefersExecuteOnUI(\n\t\t\t\t\t\t\tthis.extension.local.manifest,\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t\t\t\t.localExtensionManagementServer\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tmessage = new MarkdownString(\n\t\t\t\t\t\t\t\t`${localize(\"Install in local server to enable\", \"This extension is disabled in this workspace because it is defined to run in the Local Extension Host. Please install the extension locally to enable.\", this.extensionManagementServerService.remoteExtensionManagementServer.label)} [${localize(\"learn more\", \"Learn More\")}](https://code.visualstudio.com/api/advanced-topics/remote-extensions#architecture-and-extension-kinds)`,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else if (isWeb) {\n\t\t\t\t\t\t\tmessage = new MarkdownString(\n\t\t\t\t\t\t\t\t`${localize(\"Defined to run in desktop\", \"This extension is disabled because it is defined to run only in {0} for the Desktop.\", this.productService.nameLong)} [${localize(\"learn more\", \"Learn More\")}](https://code.visualstudio.com/api/advanced-topics/remote-extensions#architecture-and-extension-kinds)`,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// Extension on Web Server\n\t\t\t\telse if (\n\t\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t\t.webExtensionManagementServer === this.extension.server\n\t\t\t\t) {\n\t\t\t\t\tmessage = new MarkdownString(\n\t\t\t\t\t\t`${localize(\"Cannot be enabled\", \"This extension is disabled because it is not supported in {0} for the Web.\", this.productService.nameLong)} [${localize(\"learn more\", \"Learn More\")}](https://code.visualstudio.com/api/advanced-topics/remote-extensions#architecture-and-extension-kinds)`,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (message) {\n\t\t\t\t\tthis.updateStatus({ icon: warningIcon, message }, true);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst extensionId = new ExtensionIdentifier(\n\t\t\tthis.extension.identifier.id,\n\t\t);\n\t\tconst features = Registry.as<IExtensionFeaturesRegistry>(\n\t\t\tExtensions.ExtensionFeaturesRegistry,\n\t\t).getExtensionFeatures();\n\t\tfor (const feature of features) {\n\t\t\tconst status =\n\t\t\t\tthis.extensionFeaturesManagementService.getAccessData(\n\t\t\t\t\textensionId,\n\t\t\t\t\tfeature.id,\n\t\t\t\t)?.current?.status;\n\t\t\tconst manageAccessLink = `[${localize(\"manage access\", \"Manage Access\")}](${URI.parse(`command:extension.open?${encodeURIComponent(JSON.stringify([this.extension.identifier.id, ExtensionEditorTab.Features, false, feature.id]))}`)})`;\n\t\t\tif (status?.severity === Severity.Error) {\n\t\t\t\tthis.updateStatus(\n\t\t\t\t\t{\n\t\t\t\t\t\ticon: errorIcon,\n\t\t\t\t\t\tmessage: new MarkdownString()\n\t\t\t\t\t\t\t.appendText(status.message)\n\t\t\t\t\t\t\t.appendMarkdown(` ${manageAccessLink}`),\n\t\t\t\t\t},\n\t\t\t\t\ttrue,\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (status?.severity === Severity.Warning) {\n\t\t\t\tthis.updateStatus(\n\t\t\t\t\t{\n\t\t\t\t\t\ticon: warningIcon,\n\t\t\t\t\t\tmessage: new MarkdownString()\n\t\t\t\t\t\t\t.appendText(status.message)\n\t\t\t\t\t\t\t.appendMarkdown(` ${manageAccessLink}`),\n\t\t\t\t\t},\n\t\t\t\t\ttrue,\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Remote Workspace\n\t\tif (\n\t\t\tthis.extensionManagementServerService\n\t\t\t\t.remoteExtensionManagementServer\n\t\t) {\n\t\t\tif (isLanguagePackExtension(this.extension.local.manifest)) {\n\t\t\t\tif (\n\t\t\t\t\t!this.extensionsWorkbenchService.installed.some(\n\t\t\t\t\t\t(e) =>\n\t\t\t\t\t\t\tareSameExtensions(\n\t\t\t\t\t\t\t\te.identifier,\n\t\t\t\t\t\t\t\tthis.extension!.identifier,\n\t\t\t\t\t\t\t) && e.server !== this.extension!.server,\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tconst message =\n\t\t\t\t\t\tthis.extension.server ===\n\t\t\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t\t\t.localExtensionManagementServer\n\t\t\t\t\t\t\t? new MarkdownString(\n\t\t\t\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\t\t\t\"Install language pack also in remote server\",\n\t\t\t\t\t\t\t\t\t\t\"Install the language pack extension on '{0}' to enable it there also.\",\n\t\t\t\t\t\t\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t\t\t\t\t\t\t.remoteExtensionManagementServer\n\t\t\t\t\t\t\t\t\t\t\t.label,\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: new MarkdownString(\n\t\t\t\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\t\t\t\"Install language pack also locally\",\n\t\t\t\t\t\t\t\t\t\t\"Install the language pack extension locally to enable it there also.\",\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\tthis.updateStatus({ icon: infoIcon, message }, true);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst runningExtension = this.extensionService.extensions.filter(\n\t\t\t\t(e) =>\n\t\t\t\t\tareSameExtensions(\n\t\t\t\t\t\t{ id: e.identifier.value, uuid: e.uuid },\n\t\t\t\t\t\tthis.extension!.identifier,\n\t\t\t\t\t),\n\t\t\t)[0];\n\t\t\tconst runningExtensionServer = runningExtension\n\t\t\t\t? this.extensionManagementServerService.getExtensionManagementServer(\n\t\t\t\t\t\ttoExtension(runningExtension),\n\t\t\t\t\t)\n\t\t\t\t: null;\n\t\t\tif (\n\t\t\t\tthis.extension.server ===\n\t\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t\t.localExtensionManagementServer &&\n\t\t\t\trunningExtensionServer ===\n\t\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t\t.remoteExtensionManagementServer\n\t\t\t) {\n\t\t\t\tif (\n\t\t\t\t\tthis.extensionManifestPropertiesService.prefersExecuteOnWorkspace(\n\t\t\t\t\t\tthis.extension.local.manifest,\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tthis.updateStatus(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: infoIcon,\n\t\t\t\t\t\t\tmessage: new MarkdownString(\n\t\t\t\t\t\t\t\t`${localize(\"enabled remotely\", \"This extension is enabled in the Remote Extension Host because it prefers to run there.\")} [${localize(\"learn more\", \"Learn More\")}](https://code.visualstudio.com/api/advanced-topics/remote-extensions#architecture-and-extension-kinds)`,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tthis.extension.server ===\n\t\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t\t.remoteExtensionManagementServer &&\n\t\t\t\trunningExtensionServer ===\n\t\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t\t.localExtensionManagementServer\n\t\t\t) {\n\t\t\t\tif (\n\t\t\t\t\tthis.extensionManifestPropertiesService.prefersExecuteOnUI(\n\t\t\t\t\t\tthis.extension.local.manifest,\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tthis.updateStatus(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: infoIcon,\n\t\t\t\t\t\t\tmessage: new MarkdownString(\n\t\t\t\t\t\t\t\t`${localize(\"enabled locally\", \"This extension is enabled in the Local Extension Host because it prefers to run there.\")} [${localize(\"learn more\", \"Learn More\")}](https://code.visualstudio.com/api/advanced-topics/remote-extensions#architecture-and-extension-kinds)`,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tthis.extension.server ===\n\t\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t\t.remoteExtensionManagementServer &&\n\t\t\t\trunningExtensionServer ===\n\t\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t\t.webExtensionManagementServer\n\t\t\t) {\n\t\t\t\tif (\n\t\t\t\t\tthis.extensionManifestPropertiesService.canExecuteOnWeb(\n\t\t\t\t\t\tthis.extension.local.manifest,\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tthis.updateStatus(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ticon: infoIcon,\n\t\t\t\t\t\t\tmessage: new MarkdownString(\n\t\t\t\t\t\t\t\t`${localize(\"enabled in web worker\", \"This extension is enabled in the Web Worker Extension Host because it prefers to run there.\")} [${localize(\"learn more\", \"Learn More\")}](https://code.visualstudio.com/api/advanced-topics/remote-extensions#architecture-and-extension-kinds)`,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Extension is disabled by its dependency\n\t\tif (\n\t\t\tthis.extension.enablementState ===\n\t\t\tEnablementState.DisabledByExtensionDependency\n\t\t) {\n\t\t\tthis.updateStatus(\n\t\t\t\t{\n\t\t\t\t\ticon: warningIcon,\n\t\t\t\t\tmessage: new MarkdownString(\n\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\"extension disabled because of dependency\",\n\t\t\t\t\t\t\t\"This extension depends on an extension that is disabled.\",\n\t\t\t\t\t\t),\n\t\t\t\t\t).appendMarkdown(\n\t\t\t\t\t\t`&nbsp;[${localize(\"dependencies\", \"Show Dependencies\")}](${URI.parse(`command:extension.open?${encodeURIComponent(JSON.stringify([this.extension.identifier.id, ExtensionEditorTab.Dependencies]))}`)})`,\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t\ttrue,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.extension.local.isValid) {\n\t\t\tconst errors = this.extension.local.validations\n\t\t\t\t.filter(([severity]) => severity === Severity.Error)\n\t\t\t\t.map(([, message]) => message);\n\t\t\tthis.updateStatus(\n\t\t\t\t{\n\t\t\t\t\ticon: warningIcon,\n\t\t\t\t\tmessage: new MarkdownString(errors.join(\" \").trim()),\n\t\t\t\t},\n\t\t\t\ttrue,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tconst isEnabled = this.workbenchExtensionEnablementService.isEnabled(\n\t\t\tthis.extension.local,\n\t\t);\n\t\tconst isRunning = this.extensionService.extensions.some((e) =>\n\t\t\tareSameExtensions(\n\t\t\t\t{ id: e.identifier.value, uuid: e.uuid },\n\t\t\t\tthis.extension!.identifier,\n\t\t\t),\n\t\t);\n\n\t\tif (!this.extension.isWorkspaceScoped && isEnabled && isRunning) {\n\t\t\tif (\n\t\t\t\tthis.extension.enablementState ===\n\t\t\t\tEnablementState.EnabledWorkspace\n\t\t\t) {\n\t\t\t\tthis.updateStatus(\n\t\t\t\t\t{\n\t\t\t\t\t\tmessage: new MarkdownString(\n\t\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\t\"workspace enabled\",\n\t\t\t\t\t\t\t\t\"This extension is enabled for this workspace by the user.\",\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\ttrue,\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t.localExtensionManagementServer &&\n\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t.remoteExtensionManagementServer\n\t\t\t) {\n\t\t\t\tif (\n\t\t\t\t\tthis.extension.server ===\n\t\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t\t.remoteExtensionManagementServer\n\t\t\t\t) {\n\t\t\t\t\tthis.updateStatus(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmessage: new MarkdownString(\n\t\t\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\t\t\"extension enabled on remote\",\n\t\t\t\t\t\t\t\t\t\"Extension is enabled on '{0}'\",\n\t\t\t\t\t\t\t\t\tthis.extension.server.label,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (\n\t\t\t\tthis.extension.enablementState ===\n\t\t\t\tEnablementState.EnabledGlobally\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (!isEnabled && !isRunning) {\n\t\t\tif (\n\t\t\t\tthis.extension.enablementState ===\n\t\t\t\tEnablementState.DisabledGlobally\n\t\t\t) {\n\t\t\t\tthis.updateStatus(\n\t\t\t\t\t{\n\t\t\t\t\t\tmessage: new MarkdownString(\n\t\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\t\"globally disabled\",\n\t\t\t\t\t\t\t\t\"This extension is disabled globally by the user.\",\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\ttrue,\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (\n\t\t\t\tthis.extension.enablementState ===\n\t\t\t\tEnablementState.DisabledWorkspace\n\t\t\t) {\n\t\t\t\tthis.updateStatus(\n\t\t\t\t\t{\n\t\t\t\t\t\tmessage: new MarkdownString(\n\t\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\t\"workspace disabled\",\n\t\t\t\t\t\t\t\t\"This extension is disabled for this workspace by the user.\",\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\ttrue,\n\t\t\t\t);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate updateStatus(\n\t\tstatus: ExtensionStatus | undefined,\n\t\tupdateClass: boolean,\n\t): void {\n\t\tif (status) {\n\t\t\tif (\n\t\t\t\tthis._status.some(\n\t\t\t\t\t(s) =>\n\t\t\t\t\t\ts.message.value === status.message.value &&\n\t\t\t\t\t\ts.icon?.id === status.icon?.id,\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} else {\n\t\t\tif (this._status.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._status = [];\n\t\t}\n\n\t\tif (status) {\n\t\t\tthis._status.push(status);\n\t\t\tthis._status.sort((a, b) =>\n\t\t\t\tb.icon === trustIcon\n\t\t\t\t\t? -1\n\t\t\t\t\t: a.icon === trustIcon\n\t\t\t\t\t\t? 1\n\t\t\t\t\t\t: b.icon === errorIcon\n\t\t\t\t\t\t\t? -1\n\t\t\t\t\t\t\t: a.icon === errorIcon\n\t\t\t\t\t\t\t\t? 1\n\t\t\t\t\t\t\t\t: b.icon === warningIcon\n\t\t\t\t\t\t\t\t\t? -1\n\t\t\t\t\t\t\t\t\t: a.icon === warningIcon\n\t\t\t\t\t\t\t\t\t\t? 1\n\t\t\t\t\t\t\t\t\t\t: b.icon === infoIcon\n\t\t\t\t\t\t\t\t\t\t\t? -1\n\t\t\t\t\t\t\t\t\t\t\t: a.icon === infoIcon\n\t\t\t\t\t\t\t\t\t\t\t\t? 1\n\t\t\t\t\t\t\t\t\t\t\t\t: 0,\n\t\t\t);\n\t\t}\n\n\t\tif (updateClass) {\n\t\t\tif (status?.icon === errorIcon) {\n\t\t\t\tthis.class = `${ExtensionStatusAction.CLASS} extension-status-error ${ThemeIcon.asClassName(errorIcon)}`;\n\t\t\t} else if (status?.icon === warningIcon) {\n\t\t\t\tthis.class = `${ExtensionStatusAction.CLASS} extension-status-warning ${ThemeIcon.asClassName(warningIcon)}`;\n\t\t\t} else if (status?.icon === infoIcon) {\n\t\t\t\tthis.class = `${ExtensionStatusAction.CLASS} extension-status-info ${ThemeIcon.asClassName(infoIcon)}`;\n\t\t\t} else if (status?.icon === trustIcon) {\n\t\t\t\tthis.class = `${ExtensionStatusAction.CLASS} ${ThemeIcon.asClassName(trustIcon)}`;\n\t\t\t} else {\n\t\t\t\tthis.class = `${ExtensionStatusAction.CLASS} hide`;\n\t\t\t}\n\t\t}\n\t\tthis._onDidChangeStatus.fire();\n\t}\n\n\toverride async run(): Promise<any> {\n\t\tif (this._status[0]?.icon === trustIcon) {\n\t\t\treturn this.commandService.executeCommand(\"workbench.trust.manage\");\n\t\t}\n\t}\n}\n\nexport class ReinstallAction extends Action {\n\tstatic readonly ID = \"workbench.extensions.action.reinstall\";\n\tstatic readonly LABEL = localize(\"reinstall\", \"Reinstall Extension...\");\n\n\tconstructor(\n\t\tid: string = ReinstallAction.ID,\n\t\tlabel: string = ReinstallAction.LABEL,\n\t\t@IExtensionsWorkbenchService\n\t\tprivate readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IExtensionManagementServerService\n\t\tprivate readonly extensionManagementServerService: IExtensionManagementServerService,\n\t\t@IQuickInputService\n\t\tprivate readonly quickInputService: IQuickInputService,\n\t\t@INotificationService\n\t\tprivate readonly notificationService: INotificationService,\n\t\t@IHostService private readonly hostService: IHostService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\toverride get enabled(): boolean {\n\t\treturn (\n\t\t\tthis.extensionsWorkbenchService.local.filter(\n\t\t\t\t(l) => !l.isBuiltin && l.local,\n\t\t\t).length > 0\n\t\t);\n\t}\n\n\toverride run(): Promise<any> {\n\t\treturn this.quickInputService\n\t\t\t.pick(this.getEntries(), {\n\t\t\t\tplaceHolder: localize(\n\t\t\t\t\t\"selectExtensionToReinstall\",\n\t\t\t\t\t\"Select Extension to Reinstall\",\n\t\t\t\t),\n\t\t\t})\n\t\t\t.then((pick) => pick && this.reinstallExtension(pick.extension));\n\t}\n\n\tprivate getEntries(): Promise<\n\t\t(IQuickPickItem & { extension: IExtension })[]\n\t> {\n\t\treturn this.extensionsWorkbenchService.queryLocal().then((local) => {\n\t\t\tconst entries = local\n\t\t\t\t.filter(\n\t\t\t\t\t(extension) =>\n\t\t\t\t\t\t!extension.isBuiltin &&\n\t\t\t\t\t\textension.server !==\n\t\t\t\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t\t\t\t.webExtensionManagementServer,\n\t\t\t\t)\n\t\t\t\t.map((extension) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: extension.identifier.id,\n\t\t\t\t\t\tlabel: extension.displayName,\n\t\t\t\t\t\tdescription: extension.identifier.id,\n\t\t\t\t\t\textension,\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\treturn entries;\n\t\t});\n\t}\n\n\tprivate reinstallExtension(extension: IExtension): Promise<void> {\n\t\treturn this.extensionsWorkbenchService\n\t\t\t.openSearch(\"@installed \")\n\t\t\t.then(() => {\n\t\t\t\treturn this.extensionsWorkbenchService\n\t\t\t\t\t.reinstall(extension)\n\t\t\t\t\t.then(\n\t\t\t\t\t\t(extension) => {\n\t\t\t\t\t\t\tconst requireReload = !(\n\t\t\t\t\t\t\t\textension.local &&\n\t\t\t\t\t\t\t\tthis.extensionService.canAddExtension(\n\t\t\t\t\t\t\t\t\ttoExtensionDescription(extension.local),\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tconst message = requireReload\n\t\t\t\t\t\t\t\t? localize(\n\t\t\t\t\t\t\t\t\t\t\"ReinstallAction.successReload\",\n\t\t\t\t\t\t\t\t\t\t\"Please reload Visual Studio Code to complete reinstalling the extension {0}.\",\n\t\t\t\t\t\t\t\t\t\textension.identifier.id,\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t: localize(\n\t\t\t\t\t\t\t\t\t\t\"ReinstallAction.success\",\n\t\t\t\t\t\t\t\t\t\t\"Reinstalling the extension {0} is completed.\",\n\t\t\t\t\t\t\t\t\t\textension.identifier.id,\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tconst actions = requireReload\n\t\t\t\t\t\t\t\t? [\n\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\tlabel: localize(\n\t\t\t\t\t\t\t\t\t\t\t\t\"InstallVSIXAction.reloadNow\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"Reload Now\",\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\trun: () =>\n\t\t\t\t\t\t\t\t\t\t\t\tthis.hostService.reload(),\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t: [];\n\t\t\t\t\t\t\tthis.notificationService.prompt(\n\t\t\t\t\t\t\t\tSeverity.Info,\n\t\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\t\tactions,\n\t\t\t\t\t\t\t\t{ sticky: true },\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t},\n\t\t\t\t\t\t(error) => this.notificationService.error(error),\n\t\t\t\t\t);\n\t\t\t});\n\t}\n}\n\nexport class InstallSpecificVersionOfExtensionAction extends Action {\n\tstatic readonly ID = \"workbench.extensions.action.install.specificVersion\";\n\tstatic readonly LABEL = localize(\n\t\t\"install previous version\",\n\t\t\"Install Specific Version of Extension...\",\n\t);\n\n\tconstructor(\n\t\tid: string = InstallSpecificVersionOfExtensionAction.ID,\n\t\tlabel: string = InstallSpecificVersionOfExtensionAction.LABEL,\n\t\t@IExtensionsWorkbenchService\n\t\tprivate readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IQuickInputService\n\t\tprivate readonly quickInputService: IQuickInputService,\n\t\t@IInstantiationService\n\t\tprivate readonly instantiationService: IInstantiationService,\n\t\t@IWorkbenchExtensionEnablementService\n\t\tprivate readonly extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t) {\n\t\tsuper(id, label);\n\t}\n\n\toverride get enabled(): boolean {\n\t\treturn this.extensionsWorkbenchService.local.some((l) =>\n\t\t\tthis.isEnabled(l),\n\t\t);\n\t}\n\n\toverride async run(): Promise<any> {\n\t\tconst extensionPick = await this.quickInputService.pick(\n\t\t\tthis.getExtensionEntries(),\n\t\t\t{\n\t\t\t\tplaceHolder: localize(\"selectExtension\", \"Select Extension\"),\n\t\t\t\tmatchOnDetail: true,\n\t\t\t},\n\t\t);\n\t\tif (extensionPick && extensionPick.extension) {\n\t\t\tconst action = this.instantiationService.createInstance(\n\t\t\t\tInstallAnotherVersionAction,\n\t\t\t\textensionPick.extension,\n\t\t\t\ttrue,\n\t\t\t);\n\t\t\tawait action.run();\n\t\t\tawait this.extensionsWorkbenchService.openSearch(\n\t\t\t\textensionPick.extension.identifier.id,\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate isEnabled(extension: IExtension): boolean {\n\t\tconst action = this.instantiationService.createInstance(\n\t\t\tInstallAnotherVersionAction,\n\t\t\textension,\n\t\t\ttrue,\n\t\t);\n\t\treturn (\n\t\t\taction.enabled &&\n\t\t\t!!extension.local &&\n\t\t\tthis.extensionEnablementService.isEnabled(extension.local)\n\t\t);\n\t}\n\n\tprivate async getExtensionEntries(): Promise<IExtensionPickItem[]> {\n\t\tconst installed = await this.extensionsWorkbenchService.queryLocal();\n\t\tconst entries: IExtensionPickItem[] = [];\n\t\tfor (const extension of installed) {\n\t\t\tif (this.isEnabled(extension)) {\n\t\t\t\tentries.push({\n\t\t\t\t\tid: extension.identifier.id,\n\t\t\t\t\tlabel: extension.displayName || extension.identifier.id,\n\t\t\t\t\tdescription: extension.identifier.id,\n\t\t\t\t\textension,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn entries.sort((e1, e2) =>\n\t\t\te1.extension.displayName.localeCompare(e2.extension.displayName),\n\t\t);\n\t}\n}\n\ninterface IExtensionPickItem extends IQuickPickItem {\n\textension: IExtension;\n}\n\nexport abstract class AbstractInstallExtensionsInServerAction extends Action {\n\tprivate extensions: IExtension[] | undefined = undefined;\n\n\tconstructor(\n\t\tid: string,\n\t\t@IExtensionsWorkbenchService\n\t\tprotected readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IQuickInputService\n\t\tprivate readonly quickInputService: IQuickInputService,\n\t\t@INotificationService\n\t\tprivate readonly notificationService: INotificationService,\n\t\t@IProgressService private readonly progressService: IProgressService,\n\t) {\n\t\tsuper(id);\n\t\tthis.update();\n\t\tthis.extensionsWorkbenchService\n\t\t\t.queryLocal()\n\t\t\t.then(() => this.updateExtensions());\n\t\tthis._register(\n\t\t\tthis.extensionsWorkbenchService.onChange(() => {\n\t\t\t\tif (this.extensions) {\n\t\t\t\t\tthis.updateExtensions();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t}\n\n\tprivate updateExtensions(): void {\n\t\tthis.extensions = this.extensionsWorkbenchService.local;\n\t\tthis.update();\n\t}\n\n\tprivate update(): void {\n\t\tthis.enabled =\n\t\t\t!!this.extensions &&\n\t\t\tthis.getExtensionsToInstall(this.extensions).length > 0;\n\t\tthis.tooltip = this.label;\n\t}\n\n\toverride async run(): Promise<void> {\n\t\treturn this.selectAndInstallExtensions();\n\t}\n\n\tprivate async queryExtensionsToInstall(): Promise<IExtension[]> {\n\t\tconst local = await this.extensionsWorkbenchService.queryLocal();\n\t\treturn this.getExtensionsToInstall(local);\n\t}\n\n\tprivate async selectAndInstallExtensions(): Promise<void> {\n\t\tconst quickPick =\n\t\t\tthis.quickInputService.createQuickPick<IExtensionPickItem>();\n\t\tquickPick.busy = true;\n\t\tconst disposable = quickPick.onDidAccept(() => {\n\t\t\tdisposable.dispose();\n\t\t\tquickPick.hide();\n\t\t\tquickPick.dispose();\n\t\t\tthis.onDidAccept(quickPick.selectedItems);\n\t\t});\n\t\tquickPick.show();\n\t\tconst localExtensionsToInstall = await this.queryExtensionsToInstall();\n\t\tquickPick.busy = false;\n\t\tif (localExtensionsToInstall.length) {\n\t\t\tquickPick.title = this.getQuickPickTitle();\n\t\t\tquickPick.placeholder = localize(\n\t\t\t\t\"select extensions to install\",\n\t\t\t\t\"Select extensions to install\",\n\t\t\t);\n\t\t\tquickPick.canSelectMany = true;\n\t\t\tlocalExtensionsToInstall.sort((e1, e2) =>\n\t\t\t\te1.displayName.localeCompare(e2.displayName),\n\t\t\t);\n\t\t\tquickPick.items = localExtensionsToInstall.map<IExtensionPickItem>(\n\t\t\t\t(extension) => ({\n\t\t\t\t\textension,\n\t\t\t\t\tlabel: extension.displayName,\n\t\t\t\t\tdescription: extension.version,\n\t\t\t\t}),\n\t\t\t);\n\t\t} else {\n\t\t\tquickPick.hide();\n\t\t\tquickPick.dispose();\n\t\t\tthis.notificationService.notify({\n\t\t\t\tseverity: Severity.Info,\n\t\t\t\tmessage: localize(\n\t\t\t\t\t\"no local extensions\",\n\t\t\t\t\t\"There are no extensions to install.\",\n\t\t\t\t),\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate async onDidAccept(\n\t\tselectedItems: ReadonlyArray<IExtensionPickItem>,\n\t): Promise<void> {\n\t\tif (selectedItems.length) {\n\t\t\tconst localExtensionsToInstall = selectedItems\n\t\t\t\t.filter((r) => !!r.extension)\n\t\t\t\t.map((r) => r.extension);\n\t\t\tif (localExtensionsToInstall.length) {\n\t\t\t\tawait this.progressService.withProgress(\n\t\t\t\t\t{\n\t\t\t\t\t\tlocation: ProgressLocation.Notification,\n\t\t\t\t\t\ttitle: localize(\n\t\t\t\t\t\t\t\"installing extensions\",\n\t\t\t\t\t\t\t\"Installing Extensions...\",\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\t() => this.installExtensions(localExtensionsToInstall),\n\t\t\t\t);\n\t\t\t\tthis.notificationService.info(\n\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\"finished installing\",\n\t\t\t\t\t\t\"Successfully installed extensions.\",\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected abstract getQuickPickTitle(): string;\n\tprotected abstract getExtensionsToInstall(\n\t\tlocal: IExtension[],\n\t): IExtension[];\n\tprotected abstract installExtensions(\n\t\textensions: IExtension[],\n\t): Promise<void>;\n}\n\nexport class InstallLocalExtensionsInRemoteAction extends AbstractInstallExtensionsInServerAction {\n\tconstructor(\n\t\t@IExtensionsWorkbenchService\n\t\textensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IQuickInputService quickInputService: IQuickInputService,\n\t\t@IProgressService progressService: IProgressService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IExtensionManagementServerService\n\t\tprivate readonly extensionManagementServerService: IExtensionManagementServerService,\n\t\t@IExtensionGalleryService\n\t\tprivate readonly extensionGalleryService: IExtensionGalleryService,\n\t\t@IInstantiationService\n\t\tprivate readonly instantiationService: IInstantiationService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@ILogService private readonly logService: ILogService,\n\t) {\n\t\tsuper(\n\t\t\t\"workbench.extensions.actions.installLocalExtensionsInRemote\",\n\t\t\textensionsWorkbenchService,\n\t\t\tquickInputService,\n\t\t\tnotificationService,\n\t\t\tprogressService,\n\t\t);\n\t}\n\n\toverride get label(): string {\n\t\tif (\n\t\t\tthis.extensionManagementServerService &&\n\t\t\tthis.extensionManagementServerService\n\t\t\t\t.remoteExtensionManagementServer\n\t\t) {\n\t\t\treturn localize(\n\t\t\t\t\"select and install local extensions\",\n\t\t\t\t\"Install Local Extensions in '{0}'...\",\n\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t.remoteExtensionManagementServer.label,\n\t\t\t);\n\t\t}\n\t\treturn \"\";\n\t}\n\n\tprotected getQuickPickTitle(): string {\n\t\treturn localize(\n\t\t\t\"install local extensions title\",\n\t\t\t\"Install Local Extensions in '{0}'\",\n\t\t\tthis.extensionManagementServerService\n\t\t\t\t.remoteExtensionManagementServer!.label,\n\t\t);\n\t}\n\n\tprotected getExtensionsToInstall(local: IExtension[]): IExtension[] {\n\t\treturn local.filter((extension) => {\n\t\t\tconst action = this.instantiationService.createInstance(\n\t\t\t\tRemoteInstallAction,\n\t\t\t\ttrue,\n\t\t\t);\n\t\t\taction.extension = extension;\n\t\t\treturn action.enabled;\n\t\t});\n\t}\n\n\tprotected async installExtensions(\n\t\tlocalExtensionsToInstall: IExtension[],\n\t): Promise<void> {\n\t\tconst galleryExtensions: IGalleryExtension[] = [];\n\t\tconst vsixs: URI[] = [];\n\t\tconst targetPlatform =\n\t\t\tawait this.extensionManagementServerService.remoteExtensionManagementServer!.extensionManagementService.getTargetPlatform();\n\t\tawait Promises.settled(\n\t\t\tlocalExtensionsToInstall.map(async (extension) => {\n\t\t\t\tif (this.extensionGalleryService.isEnabled()) {\n\t\t\t\t\tconst gallery = (\n\t\t\t\t\t\tawait this.extensionGalleryService.getExtensions(\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...extension.identifier,\n\t\t\t\t\t\t\t\t\tpreRelease: !!extension.local?.preRelease,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t{ targetPlatform, compatible: true },\n\t\t\t\t\t\t\tCancellationToken.None,\n\t\t\t\t\t\t)\n\t\t\t\t\t)[0];\n\t\t\t\t\tif (gallery) {\n\t\t\t\t\t\tgalleryExtensions.push(gallery);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst vsix =\n\t\t\t\t\tawait this.extensionManagementServerService.localExtensionManagementServer!.extensionManagementService.zip(\n\t\t\t\t\t\textension.local!,\n\t\t\t\t\t);\n\t\t\t\tvsixs.push(vsix);\n\t\t\t}),\n\t\t);\n\n\t\tawait Promises.settled(\n\t\t\tgalleryExtensions.map((gallery) =>\n\t\t\t\tthis.extensionManagementServerService.remoteExtensionManagementServer!.extensionManagementService.installFromGallery(\n\t\t\t\t\tgallery,\n\t\t\t\t),\n\t\t\t),\n\t\t);\n\t\ttry {\n\t\t\tawait Promises.settled(\n\t\t\t\tvsixs.map((vsix) =>\n\t\t\t\t\tthis.extensionManagementServerService.remoteExtensionManagementServer!.extensionManagementService.install(\n\t\t\t\t\t\tvsix,\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tawait Promise.allSettled(\n\t\t\t\t\tvsixs.map((vsix) => this.fileService.del(vsix)),\n\t\t\t\t);\n\t\t\t} catch (error) {\n\t\t\t\tthis.logService.error(error);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class InstallRemoteExtensionsInLocalAction extends AbstractInstallExtensionsInServerAction {\n\tconstructor(\n\t\tid: string,\n\t\t@IExtensionsWorkbenchService\n\t\textensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IQuickInputService quickInputService: IQuickInputService,\n\t\t@IProgressService progressService: IProgressService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IExtensionManagementServerService\n\t\tprivate readonly extensionManagementServerService: IExtensionManagementServerService,\n\t\t@IExtensionGalleryService\n\t\tprivate readonly extensionGalleryService: IExtensionGalleryService,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@ILogService private readonly logService: ILogService,\n\t) {\n\t\tsuper(\n\t\t\tid,\n\t\t\textensionsWorkbenchService,\n\t\t\tquickInputService,\n\t\t\tnotificationService,\n\t\t\tprogressService,\n\t\t);\n\t}\n\n\toverride get label(): string {\n\t\treturn localize(\n\t\t\t\"select and install remote extensions\",\n\t\t\t\"Install Remote Extensions Locally...\",\n\t\t);\n\t}\n\n\tprotected getQuickPickTitle(): string {\n\t\treturn localize(\n\t\t\t\"install remote extensions\",\n\t\t\t\"Install Remote Extensions Locally\",\n\t\t);\n\t}\n\n\tprotected getExtensionsToInstall(local: IExtension[]): IExtension[] {\n\t\treturn local.filter(\n\t\t\t(extension) =>\n\t\t\t\textension.type === ExtensionType.User &&\n\t\t\t\textension.server !==\n\t\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t\t.localExtensionManagementServer &&\n\t\t\t\t!this.extensionsWorkbenchService.installed.some(\n\t\t\t\t\t(e) =>\n\t\t\t\t\t\te.server ===\n\t\t\t\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t\t\t\t.localExtensionManagementServer &&\n\t\t\t\t\t\tareSameExtensions(e.identifier, extension.identifier),\n\t\t\t\t),\n\t\t);\n\t}\n\n\tprotected async installExtensions(extensions: IExtension[]): Promise<void> {\n\t\tconst galleryExtensions: IGalleryExtension[] = [];\n\t\tconst vsixs: URI[] = [];\n\t\tconst targetPlatform =\n\t\t\tawait this.extensionManagementServerService.localExtensionManagementServer!.extensionManagementService.getTargetPlatform();\n\t\tawait Promises.settled(\n\t\t\textensions.map(async (extension) => {\n\t\t\t\tif (this.extensionGalleryService.isEnabled()) {\n\t\t\t\t\tconst gallery = (\n\t\t\t\t\t\tawait this.extensionGalleryService.getExtensions(\n\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t...extension.identifier,\n\t\t\t\t\t\t\t\t\tpreRelease: !!extension.local?.preRelease,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t{ targetPlatform, compatible: true },\n\t\t\t\t\t\t\tCancellationToken.None,\n\t\t\t\t\t\t)\n\t\t\t\t\t)[0];\n\t\t\t\t\tif (gallery) {\n\t\t\t\t\t\tgalleryExtensions.push(gallery);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst vsix =\n\t\t\t\t\tawait this.extensionManagementServerService.remoteExtensionManagementServer!.extensionManagementService.zip(\n\t\t\t\t\t\textension.local!,\n\t\t\t\t\t);\n\t\t\t\tvsixs.push(vsix);\n\t\t\t}),\n\t\t);\n\n\t\tawait Promises.settled(\n\t\t\tgalleryExtensions.map((gallery) =>\n\t\t\t\tthis.extensionManagementServerService.localExtensionManagementServer!.extensionManagementService.installFromGallery(\n\t\t\t\t\tgallery,\n\t\t\t\t),\n\t\t\t),\n\t\t);\n\t\ttry {\n\t\t\tawait Promises.settled(\n\t\t\t\tvsixs.map((vsix) =>\n\t\t\t\t\tthis.extensionManagementServerService.localExtensionManagementServer!.extensionManagementService.install(\n\t\t\t\t\t\tvsix,\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\t\t} finally {\n\t\t\ttry {\n\t\t\t\tawait Promise.allSettled(\n\t\t\t\t\tvsixs.map((vsix) => this.fileService.del(vsix)),\n\t\t\t\t);\n\t\t\t} catch (error) {\n\t\t\t\tthis.logService.error(error);\n\t\t\t}\n\t\t}\n\t}\n}\n\nCommandsRegistry.registerCommand(\n\t\"workbench.extensions.action.showExtensionsForLanguage\",\n\t(accessor: ServicesAccessor, fileExtension: string) => {\n\t\tconst extensionsWorkbenchService = accessor.get(\n\t\t\tIExtensionsWorkbenchService,\n\t\t);\n\t\treturn extensionsWorkbenchService.openSearch(\n\t\t\t`ext:${fileExtension.replace(/^\\./, \"\")}`,\n\t\t);\n\t},\n);\n\nexport const showExtensionsWithIdsCommandId =\n\t\"workbench.extensions.action.showExtensionsWithIds\";\nCommandsRegistry.registerCommand(\n\tshowExtensionsWithIdsCommandId,\n\t(accessor: ServicesAccessor, extensionIds: string[]) => {\n\t\tconst extensionsWorkbenchService = accessor.get(\n\t\t\tIExtensionsWorkbenchService,\n\t\t);\n\t\treturn extensionsWorkbenchService.openSearch(\n\t\t\textensionIds.map((id) => `@id:${id}`).join(\" \"),\n\t\t);\n\t},\n);\n\nregisterColor(\n\t\"extensionButton.background\",\n\t{\n\t\tdark: buttonBackground,\n\t\tlight: buttonBackground,\n\t\thcDark: null,\n\t\thcLight: null,\n\t},\n\tlocalize(\n\t\t\"extensionButtonBackground\",\n\t\t\"Button background color for extension actions.\",\n\t),\n);\n\nregisterColor(\n\t\"extensionButton.foreground\",\n\t{\n\t\tdark: buttonForeground,\n\t\tlight: buttonForeground,\n\t\thcDark: null,\n\t\thcLight: null,\n\t},\n\tlocalize(\n\t\t\"extensionButtonForeground\",\n\t\t\"Button foreground color for extension actions.\",\n\t),\n);\n\nregisterColor(\n\t\"extensionButton.hoverBackground\",\n\t{\n\t\tdark: buttonHoverBackground,\n\t\tlight: buttonHoverBackground,\n\t\thcDark: null,\n\t\thcLight: null,\n\t},\n\tlocalize(\n\t\t\"extensionButtonHoverBackground\",\n\t\t\"Button background hover color for extension actions.\",\n\t),\n);\n\nregisterColor(\n\t\"extensionButton.separator\",\n\tbuttonSeparator,\n\tlocalize(\n\t\t\"extensionButtonSeparator\",\n\t\t\"Button separator color for extension actions\",\n\t),\n);\n\nexport const extensionButtonProminentBackground = registerColor(\n\t\"extensionButton.prominentBackground\",\n\t{\n\t\tdark: buttonBackground,\n\t\tlight: buttonBackground,\n\t\thcDark: null,\n\t\thcLight: null,\n\t},\n\tlocalize(\n\t\t\"extensionButtonProminentBackground\",\n\t\t\"Button background color for extension actions that stand out (e.g. install button).\",\n\t),\n);\n\nregisterColor(\n\t\"extensionButton.prominentForeground\",\n\t{\n\t\tdark: buttonForeground,\n\t\tlight: buttonForeground,\n\t\thcDark: null,\n\t\thcLight: null,\n\t},\n\tlocalize(\n\t\t\"extensionButtonProminentForeground\",\n\t\t\"Button foreground color for extension actions that stand out (e.g. install button).\",\n\t),\n);\n\nregisterColor(\n\t\"extensionButton.prominentHoverBackground\",\n\t{\n\t\tdark: buttonHoverBackground,\n\t\tlight: buttonHoverBackground,\n\t\thcDark: null,\n\t\thcLight: null,\n\t},\n\tlocalize(\n\t\t\"extensionButtonProminentHoverBackground\",\n\t\t\"Button background hover color for extension actions that stand out (e.g. install button).\",\n\t),\n);\n\nregisterThemingParticipant(\n\t(theme: IColorTheme, collector: ICssStyleCollector) => {\n\t\tconst errorColor = theme.getColor(editorErrorForeground);\n\t\tif (errorColor) {\n\t\t\tcollector.addRule(\n\t\t\t\t`.extension-editor .header .actions-status-container > .status ${ThemeIcon.asCSSSelector(errorIcon)} { color: ${errorColor}; }`,\n\t\t\t);\n\t\t\tcollector.addRule(\n\t\t\t\t`.extension-editor .body .subcontent .runtime-status ${ThemeIcon.asCSSSelector(errorIcon)} { color: ${errorColor}; }`,\n\t\t\t);\n\t\t\tcollector.addRule(\n\t\t\t\t`.monaco-hover.extension-hover .markdown-hover .hover-contents ${ThemeIcon.asCSSSelector(errorIcon)} { color: ${errorColor}; }`,\n\t\t\t);\n\t\t}\n\n\t\tconst warningColor = theme.getColor(editorWarningForeground);\n\t\tif (warningColor) {\n\t\t\tcollector.addRule(\n\t\t\t\t`.extension-editor .header .actions-status-container > .status ${ThemeIcon.asCSSSelector(warningIcon)} { color: ${warningColor}; }`,\n\t\t\t);\n\t\t\tcollector.addRule(\n\t\t\t\t`.extension-editor .body .subcontent .runtime-status ${ThemeIcon.asCSSSelector(warningIcon)} { color: ${warningColor}; }`,\n\t\t\t);\n\t\t\tcollector.addRule(\n\t\t\t\t`.monaco-hover.extension-hover .markdown-hover .hover-contents ${ThemeIcon.asCSSSelector(warningIcon)} { color: ${warningColor}; }`,\n\t\t\t);\n\t\t}\n\n\t\tconst infoColor = theme.getColor(editorInfoForeground);\n\t\tif (infoColor) {\n\t\t\tcollector.addRule(\n\t\t\t\t`.extension-editor .header .actions-status-container > .status ${ThemeIcon.asCSSSelector(infoIcon)} { color: ${infoColor}; }`,\n\t\t\t);\n\t\t\tcollector.addRule(\n\t\t\t\t`.extension-editor .body .subcontent .runtime-status ${ThemeIcon.asCSSSelector(infoIcon)} { color: ${infoColor}; }`,\n\t\t\t);\n\t\t\tcollector.addRule(\n\t\t\t\t`.monaco-hover.extension-hover .markdown-hover .hover-contents ${ThemeIcon.asCSSSelector(infoIcon)} { color: ${infoColor}; }`,\n\t\t\t);\n\t\t}\n\t},\n);\n"],
  "mappings": "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",
  "names": ["message", "DeprecationChoice", "extension", "runningExtension"]
}
