{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/extensions/browser/extensionsViewlet.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport \"./media/extensionsViewlet.css\";\nimport {\n\t$,\n\tDimension,\n\tDragAndDropObserver,\n\tEventType,\n\taddDisposableListener,\n\tappend,\n\tclearNode,\n\thide,\n\tshow,\n\ttrackFocus,\n} from \"../../../../base/browser/dom.js\";\nimport { StandardKeyboardEvent } from \"../../../../base/browser/keyboardEvent.js\";\nimport { alert } from \"../../../../base/browser/ui/aria/aria.js\";\nimport { Action } from \"../../../../base/common/actions.js\";\nimport { coalesce } from \"../../../../base/common/arrays.js\";\nimport { Delayer, Promises, timeout } from \"../../../../base/common/async.js\";\nimport { createErrorWithActions } from \"../../../../base/common/errorMessage.js\";\nimport { isCancellationError } from \"../../../../base/common/errors.js\";\nimport { Event } from \"../../../../base/common/event.js\";\nimport { KeyCode } from \"../../../../base/common/keyCodes.js\";\nimport {\n\tDisposable,\n\tDisposableStore,\n\tMutableDisposable,\n} from \"../../../../base/common/lifecycle.js\";\nimport { extname } from \"../../../../base/common/resources.js\";\nimport Severity from \"../../../../base/common/severity.js\";\nimport { localize, localize2 } from \"../../../../nls.js\";\nimport type { ILocalizedString } from \"../../../../platform/action/common/action.js\";\nimport { createActionViewItem } from \"../../../../platform/actions/browser/menuEntryActionViewItem.js\";\nimport { MenuWorkbenchToolBar } from \"../../../../platform/actions/browser/toolbar.js\";\nimport {\n\tAction2,\n\tMenuId,\n\tregisterAction2,\n} from \"../../../../platform/actions/common/actions.js\";\nimport { ICommandService } from \"../../../../platform/commands/common/commands.js\";\nimport { IConfigurationService } from \"../../../../platform/configuration/common/configuration.js\";\nimport {\n\tContextKeyExpr,\n\ttype IContextKey,\n\tIContextKeyService,\n\tRawContextKey,\n} from \"../../../../platform/contextkey/common/contextkey.js\";\nimport { IContextMenuService } from \"../../../../platform/contextview/browser/contextView.js\";\nimport { extractEditorsAndFilesDropData } from \"../../../../platform/dnd/browser/dnd.js\";\nimport { IExtensionManagementService } from \"../../../../platform/extensionManagement/common/extensionManagement.js\";\nimport { areSameExtensions } from \"../../../../platform/extensionManagement/common/extensionManagementUtil.js\";\nimport {\n\tEXTENSION_CATEGORIES,\n\tExtensionType,\n} from \"../../../../platform/extensions/common/extensions.js\";\nimport { SyncDescriptor } from \"../../../../platform/instantiation/common/descriptors.js\";\nimport {\n\tIInstantiationService,\n\ttype ServicesAccessor,\n} from \"../../../../platform/instantiation/common/instantiation.js\";\nimport { ILabelService } from \"../../../../platform/label/common/label.js\";\nimport { ILogService } from \"../../../../platform/log/common/log.js\";\nimport {\n\tINotificationService,\n\tNotificationPriority,\n} from \"../../../../platform/notification/common/notification.js\";\nimport {\n\tIProgressService,\n\tProgressLocation,\n} from \"../../../../platform/progress/common/progress.js\";\nimport { Registry } from \"../../../../platform/registry/common/platform.js\";\nimport { SeverityIcon } from \"../../../../platform/severityIcon/browser/severityIcon.js\";\nimport {\n\tIStorageService,\n\tStorageScope,\n\tStorageTarget,\n} from \"../../../../platform/storage/common/storage.js\";\nimport { ITelemetryService } from \"../../../../platform/telemetry/common/telemetry.js\";\nimport { IThemeService } from \"../../../../platform/theme/common/themeService.js\";\nimport { IWorkspaceContextService } from \"../../../../platform/workspace/common/workspace.js\";\nimport { registerNavigableContainer } from \"../../../browser/actions/widgetNavigationCommands.js\";\nimport type { ViewPane } from \"../../../browser/parts/views/viewPane.js\";\nimport { ViewPaneContainer } from \"../../../browser/parts/views/viewPaneContainer.js\";\nimport {\n\tVirtualWorkspaceContext,\n\tWorkbenchStateContext,\n} from \"../../../common/contextkeys.js\";\nimport type { IWorkbenchContribution } from \"../../../common/contributions.js\";\nimport type { MementoObject } from \"../../../common/memento.js\";\nimport type { IPaneComposite } from \"../../../common/panecomposite.js\";\nimport { SIDE_BAR_DRAG_AND_DROP_BACKGROUND } from \"../../../common/theme.js\";\nimport {\n\tExtensions,\n\ttype IAddedViewDescriptorRef,\n\ttype IViewDescriptor,\n\tIViewDescriptorService,\n\ttype IViewsRegistry,\n\ttype ViewContainer,\n\tViewContainerLocation,\n} from \"../../../common/views.js\";\nimport {\n\tIActivityService,\n\ttype IBadge,\n\tNumberBadge,\n\tWarningBadge,\n} from \"../../../services/activity/common/activity.js\";\nimport { IEditorGroupsService } from \"../../../services/editor/common/editorGroupsService.js\";\nimport { IWorkbenchEnvironmentService } from \"../../../services/environment/common/environmentService.js\";\nimport {\n\ttype IExtensionManagementServer,\n\tIExtensionManagementServerService,\n\tIWorkbenchExtensionEnablementService,\n} from \"../../../services/extensionManagement/common/extensionManagement.js\";\nimport { IExtensionService } from \"../../../services/extensions/common/extensions.js\";\nimport { IHostService } from \"../../../services/host/browser/host.js\";\nimport { IWorkbenchLayoutService } from \"../../../services/layout/browser/layoutService.js\";\nimport { IPaneCompositePartService } from \"../../../services/panecomposite/browser/panecomposite.js\";\nimport { IPreferencesService } from \"../../../services/preferences/common/preferences.js\";\nimport { SuggestEnabledInput } from \"../../codeEditor/browser/suggestEnabledInput/suggestEnabledInput.js\";\nimport { Query } from \"../common/extensionQuery.js\";\nimport {\n\tAutoCheckUpdatesConfigurationKey,\n\tAutoRestartConfigurationKey,\n\tCONTEXT_HAS_GALLERY,\n\tCloseExtensionDetailsOnViewChangeKey,\n\ttype IExtensionsViewPaneContainer,\n\tIExtensionsWorkbenchService,\n\tINSTALL_EXTENSION_FROM_VSIX_COMMAND_ID,\n\tOUTDATED_EXTENSIONS_VIEW_ID,\n\tVIEWLET_ID,\n\tWORKSPACE_RECOMMENDATIONS_VIEW_ID,\n\textensionsSearchActionsMenu,\n} from \"../common/extensions.js\";\nimport { ExtensionsInput } from \"../common/extensionsInput.js\";\nimport {\n\tInstallLocalExtensionsInRemoteAction,\n\tInstallRemoteExtensionsInLocalAction,\n} from \"./extensionsActions.js\";\nimport { installLocalInRemoteIcon } from \"./extensionsIcons.js\";\nimport {\n\tDefaultPopularExtensionsView,\n\tDefaultRecommendedExtensionsView,\n\tDeprecatedExtensionsView,\n\tDisabledExtensionsView,\n\tEnabledExtensionsView,\n\tExtensionsListView,\n\tNONE_CATEGORY,\n\tOutdatedExtensionsView,\n\tRecentlyUpdatedExtensionsView,\n\tRecommendedExtensionsView,\n\tSearchMarketplaceExtensionsView,\n\tServerInstalledExtensionsView,\n\tStaticQueryExtensionsView,\n\tUntrustedWorkspacePartiallySupportedExtensionsView,\n\tUntrustedWorkspaceUnsupportedExtensionsView,\n\tVirtualWorkspacePartiallySupportedExtensionsView,\n\tVirtualWorkspaceUnsupportedExtensionsView,\n\tWorkspaceRecommendedExtensionsView,\n} from \"./extensionsViews.js\";\n\nexport const DefaultViewsContext = new RawContextKey<boolean>(\n\t\"defaultExtensionViews\",\n\ttrue,\n);\nexport const ExtensionsSortByContext = new RawContextKey<string>(\n\t\"extensionsSortByValue\",\n\t\"\",\n);\nexport const SearchMarketplaceExtensionsContext = new RawContextKey<boolean>(\n\t\"searchMarketplaceExtensions\",\n\tfalse,\n);\nexport const SearchHasTextContext = new RawContextKey<boolean>(\n\t\"extensionSearchHasText\",\n\tfalse,\n);\nconst InstalledExtensionsContext = new RawContextKey<boolean>(\n\t\"installedExtensions\",\n\tfalse,\n);\nconst SearchInstalledExtensionsContext = new RawContextKey<boolean>(\n\t\"searchInstalledExtensions\",\n\tfalse,\n);\nconst SearchRecentlyUpdatedExtensionsContext = new RawContextKey<boolean>(\n\t\"searchRecentlyUpdatedExtensions\",\n\tfalse,\n);\nconst SearchExtensionUpdatesContext = new RawContextKey<boolean>(\n\t\"searchExtensionUpdates\",\n\tfalse,\n);\nconst SearchOutdatedExtensionsContext = new RawContextKey<boolean>(\n\t\"searchOutdatedExtensions\",\n\tfalse,\n);\nconst SearchEnabledExtensionsContext = new RawContextKey<boolean>(\n\t\"searchEnabledExtensions\",\n\tfalse,\n);\nconst SearchDisabledExtensionsContext = new RawContextKey<boolean>(\n\t\"searchDisabledExtensions\",\n\tfalse,\n);\nconst HasInstalledExtensionsContext = new RawContextKey<boolean>(\n\t\"hasInstalledExtensions\",\n\ttrue,\n);\nexport const BuiltInExtensionsContext = new RawContextKey<boolean>(\n\t\"builtInExtensions\",\n\tfalse,\n);\nconst SearchBuiltInExtensionsContext = new RawContextKey<boolean>(\n\t\"searchBuiltInExtensions\",\n\tfalse,\n);\nconst SearchUnsupportedWorkspaceExtensionsContext = new RawContextKey<boolean>(\n\t\"searchUnsupportedWorkspaceExtensions\",\n\tfalse,\n);\nconst SearchDeprecatedExtensionsContext = new RawContextKey<boolean>(\n\t\"searchDeprecatedExtensions\",\n\tfalse,\n);\nexport const RecommendedExtensionsContext = new RawContextKey<boolean>(\n\t\"recommendedExtensions\",\n\tfalse,\n);\nconst SortByUpdateDateContext = new RawContextKey<boolean>(\n\t\"sortByUpdateDate\",\n\tfalse,\n);\n\nconst REMOTE_CATEGORY: ILocalizedString = localize2(\n\t{ key: \"remote\", comment: [\"Remote as in remote machine\"] },\n\t\"Remote\",\n);\n\nexport class ExtensionsViewletViewsContribution\n\textends Disposable\n\timplements IWorkbenchContribution\n{\n\tprivate readonly container: ViewContainer;\n\n\tconstructor(\n\t\t@IExtensionManagementServerService private readonly extensionManagementServerService: IExtensionManagementServerService,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService\n\t) {\n\t\tsuper();\n\n\t\tthis.container = viewDescriptorService.getViewContainerById(VIEWLET_ID)!;\n\t\tthis.registerViews();\n\t}\n\n\tprivate registerViews(): void {\n\t\tconst viewDescriptors: IViewDescriptor[] = [];\n\n\t\t/* Default views */\n\t\tviewDescriptors.push(...this.createDefaultExtensionsViewDescriptors());\n\n\t\t/* Search views */\n\t\tviewDescriptors.push(...this.createSearchExtensionsViewDescriptors());\n\n\t\t/* Recommendations views */\n\t\tviewDescriptors.push(\n\t\t\t...this.createRecommendedExtensionsViewDescriptors(),\n\t\t);\n\n\t\t/* Built-in extensions views */\n\t\tviewDescriptors.push(...this.createBuiltinExtensionsViewDescriptors());\n\n\t\t/* Trust Required extensions views */\n\t\tviewDescriptors.push(\n\t\t\t...this.createUnsupportedWorkspaceExtensionsViewDescriptors(),\n\t\t);\n\n\t\t/* Other Local Filtered extensions views */\n\t\tviewDescriptors.push(\n\t\t\t...this.createOtherLocalFilteredExtensionsViewDescriptors(),\n\t\t);\n\n\t\tRegistry.as<IViewsRegistry>(Extensions.ViewsRegistry).registerViews(\n\t\t\tviewDescriptors,\n\t\t\tthis.container,\n\t\t);\n\t}\n\n\tprivate createDefaultExtensionsViewDescriptors(): IViewDescriptor[] {\n\t\tconst viewDescriptors: IViewDescriptor[] = [];\n\n\t\t/*\n\t\t * Default installed extensions views - Shows all user installed extensions.\n\t\t */\n\t\tconst servers: IExtensionManagementServer[] = [];\n\t\tif (\n\t\t\tthis.extensionManagementServerService.localExtensionManagementServer\n\t\t) {\n\t\t\tservers.push(\n\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t.localExtensionManagementServer,\n\t\t\t);\n\t\t}\n\t\tif (\n\t\t\tthis.extensionManagementServerService\n\t\t\t\t.remoteExtensionManagementServer\n\t\t) {\n\t\t\tservers.push(\n\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t.remoteExtensionManagementServer,\n\t\t\t);\n\t\t}\n\t\tif (\n\t\t\tthis.extensionManagementServerService.webExtensionManagementServer\n\t\t) {\n\t\t\tservers.push(\n\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t.webExtensionManagementServer,\n\t\t\t);\n\t\t}\n\t\tconst getViewName = (\n\t\t\tviewTitle: string,\n\t\t\tserver: IExtensionManagementServer,\n\t\t): string => {\n\t\t\treturn servers.length > 1\n\t\t\t\t? `${server.label} - ${viewTitle}`\n\t\t\t\t: viewTitle;\n\t\t};\n\t\tlet installedWebExtensionsContextChangeEvent = Event.None;\n\t\tif (\n\t\t\tthis.extensionManagementServerService\n\t\t\t\t.webExtensionManagementServer &&\n\t\t\tthis.extensionManagementServerService\n\t\t\t\t.remoteExtensionManagementServer\n\t\t) {\n\t\t\tconst interestingContextKeys = new Set();\n\t\t\tinterestingContextKeys.add(\"hasInstalledWebExtensions\");\n\t\t\tinstalledWebExtensionsContextChangeEvent = Event.filter(\n\t\t\t\tthis.contextKeyService.onDidChangeContext,\n\t\t\t\t(e) => e.affectsSome(interestingContextKeys),\n\t\t\t);\n\t\t}\n\t\tconst serverLabelChangeEvent = Event.any(\n\t\t\tthis.labelService.onDidChangeFormatters,\n\t\t\tinstalledWebExtensionsContextChangeEvent,\n\t\t);\n\t\tfor (const server of servers) {\n\t\t\tconst getInstalledViewName = (): string =>\n\t\t\t\tgetViewName(localize(\"installed\", \"Installed\"), server);\n\t\t\tconst onDidChangeTitle = Event.map<void, string>(\n\t\t\t\tserverLabelChangeEvent,\n\t\t\t\t() => getInstalledViewName(),\n\t\t\t);\n\t\t\tconst id =\n\t\t\t\tservers.length > 1\n\t\t\t\t\t? `workbench.views.extensions.${server.id}.installed`\n\t\t\t\t\t: `workbench.views.extensions.installed`;\n\t\t\t/* Installed extensions view */\n\t\t\tviewDescriptors.push({\n\t\t\t\tid,\n\t\t\t\tget name() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tvalue: getInstalledViewName(),\n\t\t\t\t\t\toriginal: getViewName(\"Installed\", server),\n\t\t\t\t\t};\n\t\t\t\t},\n\t\t\t\tweight: 100,\n\t\t\t\torder: 1,\n\t\t\t\twhen: ContextKeyExpr.and(DefaultViewsContext),\n\t\t\t\tctorDescriptor: new SyncDescriptor(\n\t\t\t\t\tServerInstalledExtensionsView,\n\t\t\t\t\t[{ server, flexibleHeight: true, onDidChangeTitle }],\n\t\t\t\t),\n\t\t\t\t/* Installed extensions views shall not be allowed to hidden when there are more than one server */\n\t\t\t\tcanToggleVisibility: servers.length === 1,\n\t\t\t});\n\n\t\t\tif (\n\t\t\t\tserver ===\n\t\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t\t.remoteExtensionManagementServer &&\n\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t.localExtensionManagementServer\n\t\t\t) {\n\t\t\t\tthis._register(\n\t\t\t\t\tregisterAction2(\n\t\t\t\t\t\tclass InstallLocalExtensionsInRemoteAction2 extends Action2 {\n\t\t\t\t\t\t\tconstructor() {\n\t\t\t\t\t\t\t\tsuper({\n\t\t\t\t\t\t\t\t\tid: \"workbench.extensions.installLocalExtensions\",\n\t\t\t\t\t\t\t\t\tget title() {\n\t\t\t\t\t\t\t\t\t\treturn localize2(\n\t\t\t\t\t\t\t\t\t\t\t\"select and install local extensions\",\n\t\t\t\t\t\t\t\t\t\t\t\"Install Local Extensions in '{0}'...\",\n\t\t\t\t\t\t\t\t\t\t\tserver.label,\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tcategory: REMOTE_CATEGORY,\n\t\t\t\t\t\t\t\t\ticon: installLocalInRemoteIcon,\n\t\t\t\t\t\t\t\t\tf1: true,\n\t\t\t\t\t\t\t\t\tmenu: {\n\t\t\t\t\t\t\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\t\t\t\t\t\t\twhen: ContextKeyExpr.equals(\"view\", id),\n\t\t\t\t\t\t\t\t\t\tgroup: \"navigation\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\trun(accessor: ServicesAccessor): Promise<void> {\n\t\t\t\t\t\t\t\treturn accessor\n\t\t\t\t\t\t\t\t\t.get(IInstantiationService)\n\t\t\t\t\t\t\t\t\t.createInstance(\n\t\t\t\t\t\t\t\t\t\tInstallLocalExtensionsInRemoteAction,\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t.run();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\tthis.extensionManagementServerService\n\t\t\t\t.localExtensionManagementServer &&\n\t\t\tthis.extensionManagementServerService\n\t\t\t\t.remoteExtensionManagementServer\n\t\t) {\n\t\t\tthis._register(\n\t\t\t\tregisterAction2(\n\t\t\t\t\tclass InstallRemoteExtensionsInLocalAction2 extends Action2 {\n\t\t\t\t\t\tconstructor() {\n\t\t\t\t\t\t\tsuper({\n\t\t\t\t\t\t\t\tid: \"workbench.extensions.actions.installLocalExtensionsInRemote\",\n\t\t\t\t\t\t\t\ttitle: localize2(\n\t\t\t\t\t\t\t\t\t\"install remote in local\",\n\t\t\t\t\t\t\t\t\t\"Install Remote Extensions Locally...\",\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tcategory: REMOTE_CATEGORY,\n\t\t\t\t\t\t\t\tf1: true,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\trun(accessor: ServicesAccessor): Promise<void> {\n\t\t\t\t\t\t\treturn accessor\n\t\t\t\t\t\t\t\t.get(IInstantiationService)\n\t\t\t\t\t\t\t\t.createInstance(\n\t\t\t\t\t\t\t\t\tInstallRemoteExtensionsInLocalAction,\n\t\t\t\t\t\t\t\t\t\"workbench.extensions.actions.installLocalExtensionsInRemote\",\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.run();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\n\t\t/*\n\t\t * Default popular extensions view\n\t\t * Separate view for popular extensions required as we need to show popular and recommended sections\n\t\t * in the default view when there is no search text, and user has no installed extensions.\n\t\t */\n\t\tviewDescriptors.push({\n\t\t\tid: \"workbench.views.extensions.popular\",\n\t\t\tname: localize2(\"popularExtensions\", \"Popular\"),\n\t\t\tctorDescriptor: new SyncDescriptor(DefaultPopularExtensionsView, [\n\t\t\t\t{ hideBadge: true },\n\t\t\t]),\n\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\tDefaultViewsContext,\n\t\t\t\tContextKeyExpr.not(\"hasInstalledExtensions\"),\n\t\t\t\tCONTEXT_HAS_GALLERY,\n\t\t\t),\n\t\t\tweight: 60,\n\t\t\torder: 2,\n\t\t\tcanToggleVisibility: false,\n\t\t});\n\n\t\t/*\n\t\t * Default recommended extensions view\n\t\t * When user has installed extensions, this is shown along with the views for enabled & disabled extensions\n\t\t * When user has no installed extensions, this is shown along with the view for popular extensions\n\t\t */\n\t\tviewDescriptors.push({\n\t\t\tid: \"extensions.recommendedList\",\n\t\t\tname: localize2(\"recommendedExtensions\", \"Recommended\"),\n\t\t\tctorDescriptor: new SyncDescriptor(\n\t\t\t\tDefaultRecommendedExtensionsView,\n\t\t\t\t[{ flexibleHeight: true }],\n\t\t\t),\n\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\tDefaultViewsContext,\n\t\t\t\tSortByUpdateDateContext.negate(),\n\t\t\t\tContextKeyExpr.not(\n\t\t\t\t\t\"config.extensions.showRecommendationsOnlyOnDemand\",\n\t\t\t\t),\n\t\t\t\tCONTEXT_HAS_GALLERY,\n\t\t\t),\n\t\t\tweight: 40,\n\t\t\torder: 3,\n\t\t\tcanToggleVisibility: true,\n\t\t});\n\n\t\t/* Installed views shall be default in multi server window  */\n\t\tif (servers.length === 1) {\n\t\t\t/*\n\t\t\t * Default enabled extensions view - Shows all user installed enabled extensions.\n\t\t\t * Hidden by default\n\t\t\t */\n\t\t\tviewDescriptors.push({\n\t\t\t\tid: \"workbench.views.extensions.enabled\",\n\t\t\t\tname: localize2(\"enabledExtensions\", \"Enabled\"),\n\t\t\t\tctorDescriptor: new SyncDescriptor(EnabledExtensionsView, [{}]),\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tDefaultViewsContext,\n\t\t\t\t\tContextKeyExpr.has(\"hasInstalledExtensions\"),\n\t\t\t\t),\n\t\t\t\thideByDefault: true,\n\t\t\t\tweight: 40,\n\t\t\t\torder: 4,\n\t\t\t\tcanToggleVisibility: true,\n\t\t\t});\n\n\t\t\t/*\n\t\t\t * Default disabled extensions view - Shows all disabled extensions.\n\t\t\t * Hidden by default\n\t\t\t */\n\t\t\tviewDescriptors.push({\n\t\t\t\tid: \"workbench.views.extensions.disabled\",\n\t\t\t\tname: localize2(\"disabledExtensions\", \"Disabled\"),\n\t\t\t\tctorDescriptor: new SyncDescriptor(DisabledExtensionsView, [\n\t\t\t\t\t{},\n\t\t\t\t]),\n\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\tDefaultViewsContext,\n\t\t\t\t\tContextKeyExpr.has(\"hasInstalledExtensions\"),\n\t\t\t\t),\n\t\t\t\thideByDefault: true,\n\t\t\t\tweight: 10,\n\t\t\t\torder: 5,\n\t\t\t\tcanToggleVisibility: true,\n\t\t\t});\n\t\t}\n\n\t\treturn viewDescriptors;\n\t}\n\n\tprivate createSearchExtensionsViewDescriptors(): IViewDescriptor[] {\n\t\tconst viewDescriptors: IViewDescriptor[] = [];\n\n\t\t/*\n\t\t * View used for searching Marketplace\n\t\t */\n\t\tviewDescriptors.push({\n\t\t\tid: \"workbench.views.extensions.marketplace\",\n\t\t\tname: localize2(\"marketPlace\", \"Marketplace\"),\n\t\t\tctorDescriptor: new SyncDescriptor(\n\t\t\t\tSearchMarketplaceExtensionsView,\n\t\t\t\t[{}],\n\t\t\t),\n\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\tContextKeyExpr.has(\"searchMarketplaceExtensions\"),\n\t\t\t),\n\t\t});\n\n\t\t/*\n\t\t * View used for searching all installed extensions\n\t\t */\n\t\tviewDescriptors.push({\n\t\t\tid: \"workbench.views.extensions.searchInstalled\",\n\t\t\tname: localize2(\"installed\", \"Installed\"),\n\t\t\tctorDescriptor: new SyncDescriptor(ExtensionsListView, [{}]),\n\t\t\twhen: ContextKeyExpr.or(\n\t\t\t\tContextKeyExpr.has(\"searchInstalledExtensions\"),\n\t\t\t\tContextKeyExpr.has(\"installedExtensions\"),\n\t\t\t),\n\t\t});\n\n\t\t/*\n\t\t * View used for searching recently updated extensions\n\t\t */\n\t\tviewDescriptors.push({\n\t\t\tid: \"workbench.views.extensions.searchRecentlyUpdated\",\n\t\t\tname: localize2(\"recently updated\", \"Recently Updated\"),\n\t\t\tctorDescriptor: new SyncDescriptor(RecentlyUpdatedExtensionsView, [\n\t\t\t\t{},\n\t\t\t]),\n\t\t\twhen: ContextKeyExpr.or(\n\t\t\t\tSearchExtensionUpdatesContext,\n\t\t\t\tContextKeyExpr.has(\"searchRecentlyUpdatedExtensions\"),\n\t\t\t),\n\t\t\torder: 2,\n\t\t});\n\n\t\t/*\n\t\t * View used for searching enabled extensions\n\t\t */\n\t\tviewDescriptors.push({\n\t\t\tid: \"workbench.views.extensions.searchEnabled\",\n\t\t\tname: localize2(\"enabled\", \"Enabled\"),\n\t\t\tctorDescriptor: new SyncDescriptor(ExtensionsListView, [{}]),\n\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\tContextKeyExpr.has(\"searchEnabledExtensions\"),\n\t\t\t),\n\t\t});\n\n\t\t/*\n\t\t * View used for searching disabled extensions\n\t\t */\n\t\tviewDescriptors.push({\n\t\t\tid: \"workbench.views.extensions.searchDisabled\",\n\t\t\tname: localize2(\"disabled\", \"Disabled\"),\n\t\t\tctorDescriptor: new SyncDescriptor(ExtensionsListView, [{}]),\n\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\tContextKeyExpr.has(\"searchDisabledExtensions\"),\n\t\t\t),\n\t\t});\n\n\t\t/*\n\t\t * View used for searching outdated extensions\n\t\t */\n\t\tviewDescriptors.push({\n\t\t\tid: OUTDATED_EXTENSIONS_VIEW_ID,\n\t\t\tname: localize2(\"availableUpdates\", \"Available Updates\"),\n\t\t\tctorDescriptor: new SyncDescriptor(OutdatedExtensionsView, [{}]),\n\t\t\twhen: ContextKeyExpr.or(\n\t\t\t\tSearchExtensionUpdatesContext,\n\t\t\t\tContextKeyExpr.has(\"searchOutdatedExtensions\"),\n\t\t\t),\n\t\t\torder: 1,\n\t\t});\n\n\t\t/*\n\t\t * View used for searching builtin extensions\n\t\t */\n\t\tviewDescriptors.push({\n\t\t\tid: \"workbench.views.extensions.searchBuiltin\",\n\t\t\tname: localize2(\"builtin\", \"Builtin\"),\n\t\t\tctorDescriptor: new SyncDescriptor(ExtensionsListView, [{}]),\n\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\tContextKeyExpr.has(\"searchBuiltInExtensions\"),\n\t\t\t),\n\t\t});\n\n\t\t/*\n\t\t * View used for searching workspace unsupported extensions\n\t\t */\n\t\tviewDescriptors.push({\n\t\t\tid: \"workbench.views.extensions.searchWorkspaceUnsupported\",\n\t\t\tname: localize2(\"workspaceUnsupported\", \"Workspace Unsupported\"),\n\t\t\tctorDescriptor: new SyncDescriptor(ExtensionsListView, [{}]),\n\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\tContextKeyExpr.has(\"searchWorkspaceUnsupportedExtensions\"),\n\t\t\t),\n\t\t});\n\n\t\treturn viewDescriptors;\n\t}\n\n\tprivate createRecommendedExtensionsViewDescriptors(): IViewDescriptor[] {\n\t\tconst viewDescriptors: IViewDescriptor[] = [];\n\n\t\tviewDescriptors.push({\n\t\t\tid: WORKSPACE_RECOMMENDATIONS_VIEW_ID,\n\t\t\tname: localize2(\n\t\t\t\t\"workspaceRecommendedExtensions\",\n\t\t\t\t\"Workspace Recommendations\",\n\t\t\t),\n\t\t\tctorDescriptor: new SyncDescriptor(\n\t\t\t\tWorkspaceRecommendedExtensionsView,\n\t\t\t\t[{}],\n\t\t\t),\n\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\tContextKeyExpr.has(\"recommendedExtensions\"),\n\t\t\t\tWorkbenchStateContext.notEqualsTo(\"empty\"),\n\t\t\t),\n\t\t\torder: 1,\n\t\t});\n\n\t\tviewDescriptors.push({\n\t\t\tid: \"workbench.views.extensions.otherRecommendations\",\n\t\t\tname: localize2(\n\t\t\t\t\"otherRecommendedExtensions\",\n\t\t\t\t\"Other Recommendations\",\n\t\t\t),\n\t\t\tctorDescriptor: new SyncDescriptor(RecommendedExtensionsView, [{}]),\n\t\t\twhen: ContextKeyExpr.has(\"recommendedExtensions\"),\n\t\t\torder: 2,\n\t\t});\n\n\t\treturn viewDescriptors;\n\t}\n\n\tprivate createBuiltinExtensionsViewDescriptors(): IViewDescriptor[] {\n\t\tconst viewDescriptors: IViewDescriptor[] = [];\n\n\t\tconst configuredCategories = [\"themes\", \"programming languages\"];\n\t\tconst otherCategories = EXTENSION_CATEGORIES.filter(\n\t\t\t(c) => !configuredCategories.includes(c.toLowerCase()),\n\t\t);\n\t\totherCategories.push(NONE_CATEGORY);\n\t\tconst otherCategoriesQuery = `${otherCategories.map((c) => `category:\"${c}\"`).join(\" \")} ${configuredCategories.map((c) => `category:\"-${c}\"`).join(\" \")}`;\n\t\tviewDescriptors.push({\n\t\t\tid: \"workbench.views.extensions.builtinFeatureExtensions\",\n\t\t\tname: localize2(\"builtinFeatureExtensions\", \"Features\"),\n\t\t\tctorDescriptor: new SyncDescriptor(StaticQueryExtensionsView, [\n\t\t\t\t{ query: `@builtin ${otherCategoriesQuery}` },\n\t\t\t]),\n\t\t\twhen: ContextKeyExpr.has(\"builtInExtensions\"),\n\t\t});\n\n\t\tviewDescriptors.push({\n\t\t\tid: \"workbench.views.extensions.builtinThemeExtensions\",\n\t\t\tname: localize2(\"builtInThemesExtensions\", \"Themes\"),\n\t\t\tctorDescriptor: new SyncDescriptor(StaticQueryExtensionsView, [\n\t\t\t\t{ query: `@builtin category:themes` },\n\t\t\t]),\n\t\t\twhen: ContextKeyExpr.has(\"builtInExtensions\"),\n\t\t});\n\n\t\tviewDescriptors.push({\n\t\t\tid: \"workbench.views.extensions.builtinProgrammingLanguageExtensions\",\n\t\t\tname: localize2(\n\t\t\t\t\"builtinProgrammingLanguageExtensions\",\n\t\t\t\t\"Programming Languages\",\n\t\t\t),\n\t\t\tctorDescriptor: new SyncDescriptor(StaticQueryExtensionsView, [\n\t\t\t\t{ query: `@builtin category:\"programming languages\"` },\n\t\t\t]),\n\t\t\twhen: ContextKeyExpr.has(\"builtInExtensions\"),\n\t\t});\n\n\t\treturn viewDescriptors;\n\t}\n\n\tprivate createUnsupportedWorkspaceExtensionsViewDescriptors(): IViewDescriptor[] {\n\t\tconst viewDescriptors: IViewDescriptor[] = [];\n\n\t\tviewDescriptors.push({\n\t\t\tid: \"workbench.views.extensions.untrustedUnsupportedExtensions\",\n\t\t\tname: localize2(\n\t\t\t\t\"untrustedUnsupportedExtensions\",\n\t\t\t\t\"Disabled in Restricted Mode\",\n\t\t\t),\n\t\t\tctorDescriptor: new SyncDescriptor(\n\t\t\t\tUntrustedWorkspaceUnsupportedExtensionsView,\n\t\t\t\t[{}],\n\t\t\t),\n\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\tSearchUnsupportedWorkspaceExtensionsContext,\n\t\t\t),\n\t\t});\n\n\t\tviewDescriptors.push({\n\t\t\tid: \"workbench.views.extensions.untrustedPartiallySupportedExtensions\",\n\t\t\tname: localize2(\n\t\t\t\t\"untrustedPartiallySupportedExtensions\",\n\t\t\t\t\"Limited in Restricted Mode\",\n\t\t\t),\n\t\t\tctorDescriptor: new SyncDescriptor(\n\t\t\t\tUntrustedWorkspacePartiallySupportedExtensionsView,\n\t\t\t\t[{}],\n\t\t\t),\n\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\tSearchUnsupportedWorkspaceExtensionsContext,\n\t\t\t),\n\t\t});\n\n\t\tviewDescriptors.push({\n\t\t\tid: \"workbench.views.extensions.virtualUnsupportedExtensions\",\n\t\t\tname: localize2(\n\t\t\t\t\"virtualUnsupportedExtensions\",\n\t\t\t\t\"Disabled in Virtual Workspaces\",\n\t\t\t),\n\t\t\tctorDescriptor: new SyncDescriptor(\n\t\t\t\tVirtualWorkspaceUnsupportedExtensionsView,\n\t\t\t\t[{}],\n\t\t\t),\n\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\tVirtualWorkspaceContext,\n\t\t\t\tSearchUnsupportedWorkspaceExtensionsContext,\n\t\t\t),\n\t\t});\n\n\t\tviewDescriptors.push({\n\t\t\tid: \"workbench.views.extensions.virtualPartiallySupportedExtensions\",\n\t\t\tname: localize2(\n\t\t\t\t\"virtualPartiallySupportedExtensions\",\n\t\t\t\t\"Limited in Virtual Workspaces\",\n\t\t\t),\n\t\t\tctorDescriptor: new SyncDescriptor(\n\t\t\t\tVirtualWorkspacePartiallySupportedExtensionsView,\n\t\t\t\t[{}],\n\t\t\t),\n\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\tVirtualWorkspaceContext,\n\t\t\t\tSearchUnsupportedWorkspaceExtensionsContext,\n\t\t\t),\n\t\t});\n\n\t\treturn viewDescriptors;\n\t}\n\n\tprivate createOtherLocalFilteredExtensionsViewDescriptors(): IViewDescriptor[] {\n\t\tconst viewDescriptors: IViewDescriptor[] = [];\n\n\t\tviewDescriptors.push({\n\t\t\tid: \"workbench.views.extensions.deprecatedExtensions\",\n\t\t\tname: localize2(\"deprecated\", \"Deprecated\"),\n\t\t\tctorDescriptor: new SyncDescriptor(DeprecatedExtensionsView, [{}]),\n\t\t\twhen: ContextKeyExpr.and(SearchDeprecatedExtensionsContext),\n\t\t});\n\n\t\treturn viewDescriptors;\n\t}\n}\n\nexport class ExtensionsViewPaneContainer\n\textends ViewPaneContainer\n\timplements IExtensionsViewPaneContainer\n{\n\tprivate defaultViewsContextKey: IContextKey<boolean>;\n\tprivate sortByContextKey: IContextKey<string>;\n\tprivate searchMarketplaceExtensionsContextKey: IContextKey<boolean>;\n\tprivate searchHasTextContextKey: IContextKey<boolean>;\n\tprivate sortByUpdateDateContextKey: IContextKey<boolean>;\n\tprivate installedExtensionsContextKey: IContextKey<boolean>;\n\tprivate searchInstalledExtensionsContextKey: IContextKey<boolean>;\n\tprivate searchRecentlyUpdatedExtensionsContextKey: IContextKey<boolean>;\n\tprivate searchExtensionUpdatesContextKey: IContextKey<boolean>;\n\tprivate searchOutdatedExtensionsContextKey: IContextKey<boolean>;\n\tprivate searchEnabledExtensionsContextKey: IContextKey<boolean>;\n\tprivate searchDisabledExtensionsContextKey: IContextKey<boolean>;\n\tprivate hasInstalledExtensionsContextKey: IContextKey<boolean>;\n\tprivate builtInExtensionsContextKey: IContextKey<boolean>;\n\tprivate searchBuiltInExtensionsContextKey: IContextKey<boolean>;\n\tprivate searchWorkspaceUnsupportedExtensionsContextKey: IContextKey<boolean>;\n\tprivate searchDeprecatedExtensionsContextKey: IContextKey<boolean>;\n\tprivate recommendedExtensionsContextKey: IContextKey<boolean>;\n\n\tprivate searchDelayer: Delayer<void>;\n\tprivate root: HTMLElement | undefined;\n\tprivate header: HTMLElement | undefined;\n\tprivate searchBox: SuggestEnabledInput | undefined;\n\tprivate notificationContainer: HTMLElement | undefined;\n\tprivate readonly searchViewletState: MementoObject;\n\n\tconstructor(\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IProgressService private readonly progressService: IProgressService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IEditorGroupsService private readonly editorGroupService: IEditorGroupsService,\n\t\t@IExtensionsWorkbenchService private readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IExtensionManagementServerService private readonly extensionManagementServerService: IExtensionManagementServerService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IPaneCompositePartService private readonly paneCompositeService: IPaneCompositePartService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IExtensionService extensionService: IExtensionService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IPreferencesService private readonly preferencesService: IPreferencesService,\n\t\t@ICommandService private readonly commandService: ICommandService\n\t) {\n\t\tsuper(VIEWLET_ID, { mergeViewWithContainerWhenSingleView: true }, instantiationService, configurationService, layoutService, contextMenuService, telemetryService, extensionService, themeService, storageService, contextService, viewDescriptorService);\n\n\t\tthis.searchDelayer = new Delayer(500);\n\t\tthis.defaultViewsContextKey = DefaultViewsContext.bindTo(contextKeyService);\n\t\tthis.sortByContextKey = ExtensionsSortByContext.bindTo(contextKeyService);\n\t\tthis.searchMarketplaceExtensionsContextKey = SearchMarketplaceExtensionsContext.bindTo(contextKeyService);\n\t\tthis.searchHasTextContextKey = SearchHasTextContext.bindTo(contextKeyService);\n\t\tthis.sortByUpdateDateContextKey = SortByUpdateDateContext.bindTo(contextKeyService);\n\t\tthis.installedExtensionsContextKey = InstalledExtensionsContext.bindTo(contextKeyService);\n\t\tthis.searchInstalledExtensionsContextKey = SearchInstalledExtensionsContext.bindTo(contextKeyService);\n\t\tthis.searchRecentlyUpdatedExtensionsContextKey = SearchRecentlyUpdatedExtensionsContext.bindTo(contextKeyService);\n\t\tthis.searchExtensionUpdatesContextKey = SearchExtensionUpdatesContext.bindTo(contextKeyService);\n\t\tthis.searchWorkspaceUnsupportedExtensionsContextKey = SearchUnsupportedWorkspaceExtensionsContext.bindTo(contextKeyService);\n\t\tthis.searchDeprecatedExtensionsContextKey = SearchDeprecatedExtensionsContext.bindTo(contextKeyService);\n\t\tthis.searchOutdatedExtensionsContextKey = SearchOutdatedExtensionsContext.bindTo(contextKeyService);\n\t\tthis.searchEnabledExtensionsContextKey = SearchEnabledExtensionsContext.bindTo(contextKeyService);\n\t\tthis.searchDisabledExtensionsContextKey = SearchDisabledExtensionsContext.bindTo(contextKeyService);\n\t\tthis.hasInstalledExtensionsContextKey = HasInstalledExtensionsContext.bindTo(contextKeyService);\n\t\tthis.builtInExtensionsContextKey = BuiltInExtensionsContext.bindTo(contextKeyService);\n\t\tthis.searchBuiltInExtensionsContextKey = SearchBuiltInExtensionsContext.bindTo(contextKeyService);\n\t\tthis.recommendedExtensionsContextKey = RecommendedExtensionsContext.bindTo(contextKeyService);\n\t\tthis._register(this.paneCompositeService.onDidPaneCompositeOpen(e => { if (e.viewContainerLocation === ViewContainerLocation.Sidebar) { this.onViewletOpen(e.composite); } }, this));\n\t\tthis._register(extensionsWorkbenchService.onReset(() => this.refresh()));\n\t\tthis.searchViewletState = this.getMemento(StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\t}\n\n\tget searchValue(): string | undefined {\n\t\treturn this.searchBox?.getValue();\n\t}\n\n\toverride create(parent: HTMLElement): void {\n\t\tparent.classList.add(\"extensions-viewlet\");\n\t\tthis.root = parent;\n\n\t\tconst overlay = append(this.root, $(\".overlay\"));\n\t\tconst overlayBackgroundColor =\n\t\t\tthis.getColor(SIDE_BAR_DRAG_AND_DROP_BACKGROUND) ?? \"\";\n\t\toverlay.style.backgroundColor = overlayBackgroundColor;\n\t\thide(overlay);\n\n\t\tthis.header = append(this.root, $(\".header\"));\n\t\tconst placeholder = localize(\n\t\t\t\"searchExtensions\",\n\t\t\t\"Search Extensions in Marketplace\",\n\t\t);\n\n\t\tconst searchValue = this.searchViewletState[\"query.value\"]\n\t\t\t? this.searchViewletState[\"query.value\"]\n\t\t\t: \"\";\n\n\t\tconst searchContainer = append(\n\t\t\tthis.header,\n\t\t\t$(\".extensions-search-container\"),\n\t\t);\n\n\t\tthis.searchBox = this._register(\n\t\t\tthis.instantiationService.createInstance(\n\t\t\t\tSuggestEnabledInput,\n\t\t\t\t`${VIEWLET_ID}.searchbox`,\n\t\t\t\tsearchContainer,\n\t\t\t\t{\n\t\t\t\t\ttriggerCharacters: [\"@\"],\n\t\t\t\t\tsortKey: (item: string) => {\n\t\t\t\t\t\tif (item.indexOf(\":\") === -1) {\n\t\t\t\t\t\t\treturn \"a\";\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\t/ext:/.test(item) ||\n\t\t\t\t\t\t\t/id:/.test(item) ||\n\t\t\t\t\t\t\t/tag:/.test(item)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn \"b\";\n\t\t\t\t\t\t} else if (/sort:/.test(item)) {\n\t\t\t\t\t\t\treturn \"c\";\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn \"d\";\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tprovideResults: (query: string) => Query.suggestions(query),\n\t\t\t\t},\n\t\t\t\tplaceholder,\n\t\t\t\t\"extensions:searchinput\",\n\t\t\t\t{ placeholderText: placeholder, value: searchValue },\n\t\t\t),\n\t\t);\n\n\t\tthis.notificationContainer = append(\n\t\t\tthis.header,\n\t\t\t$(\".notification-container.hidden\", { tabindex: \"0\" }),\n\t\t);\n\t\tthis.renderNotificaiton();\n\t\tthis._register(\n\t\t\tthis.extensionsWorkbenchService.onDidChangeExtensionsNotification(\n\t\t\t\t() => this.renderNotificaiton(),\n\t\t\t),\n\t\t);\n\n\t\tthis.updateInstalledExtensionsContexts();\n\t\tif (this.searchBox.getValue()) {\n\t\t\tthis.triggerSearch();\n\t\t}\n\n\t\tthis._register(\n\t\t\tthis.searchBox.onInputDidChange(() => {\n\t\t\t\tthis.sortByContextKey.set(\n\t\t\t\t\tQuery.parse(this.searchBox?.getValue() ?? \"\").sortBy,\n\t\t\t\t);\n\t\t\t\tthis.triggerSearch();\n\t\t\t}, this),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.searchBox.onShouldFocusResults(\n\t\t\t\t() => this.focusListView(),\n\t\t\t\tthis,\n\t\t\t),\n\t\t);\n\n\t\tconst controlElement = append(\n\t\t\tsearchContainer,\n\t\t\t$(\".extensions-search-actions-container\"),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.instantiationService.createInstance(\n\t\t\t\tMenuWorkbenchToolBar,\n\t\t\t\tcontrolElement,\n\t\t\t\textensionsSearchActionsMenu,\n\t\t\t\t{\n\t\t\t\t\ttoolbarOptions: {\n\t\t\t\t\t\tprimaryGroup: () => true,\n\t\t\t\t\t},\n\t\t\t\t\tactionViewItemProvider: (action, options) =>\n\t\t\t\t\t\tcreateActionViewItem(\n\t\t\t\t\t\t\tthis.instantiationService,\n\t\t\t\t\t\t\taction,\n\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\n\t\t// Register DragAndDrop support\n\t\tthis._register(\n\t\t\tnew DragAndDropObserver(this.root, {\n\t\t\t\tonDragEnter: (e: DragEvent) => {\n\t\t\t\t\tif (this.isSupportedDragElement(e)) {\n\t\t\t\t\t\tshow(overlay);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonDragLeave: (e: DragEvent) => {\n\t\t\t\t\tif (this.isSupportedDragElement(e)) {\n\t\t\t\t\t\thide(overlay);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonDragOver: (e: DragEvent) => {\n\t\t\t\t\tif (this.isSupportedDragElement(e)) {\n\t\t\t\t\t\te.dataTransfer!.dropEffect = \"copy\";\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonDrop: async (e: DragEvent) => {\n\t\t\t\t\tif (this.isSupportedDragElement(e)) {\n\t\t\t\t\t\thide(overlay);\n\n\t\t\t\t\t\tconst vsixs = coalesce(\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tawait this.instantiationService.invokeFunction(\n\t\t\t\t\t\t\t\t\t(accessor) =>\n\t\t\t\t\t\t\t\t\t\textractEditorsAndFilesDropData(\n\t\t\t\t\t\t\t\t\t\t\taccessor,\n\t\t\t\t\t\t\t\t\t\t\te,\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t).map((editor) =>\n\t\t\t\t\t\t\t\teditor.resource &&\n\t\t\t\t\t\t\t\textname(editor.resource) === \".vsix\"\n\t\t\t\t\t\t\t\t\t? editor.resource\n\t\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (vsixs.length > 0) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t// Attempt to install the extension(s)\n\t\t\t\t\t\t\t\tawait this.commandService.executeCommand(\n\t\t\t\t\t\t\t\t\tINSTALL_EXTENSION_FROM_VSIX_COMMAND_ID,\n\t\t\t\t\t\t\t\t\tvsixs,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\tthis.notificationService.error(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t}),\n\t\t);\n\n\t\tsuper.create(append(this.root, $(\".extensions\")));\n\n\t\tconst focusTracker = this._register(trackFocus(this.root));\n\t\tconst isSearchBoxFocused = () =>\n\t\t\tthis.searchBox?.inputWidget.hasWidgetFocus();\n\t\tthis._register(\n\t\t\tregisterNavigableContainer({\n\t\t\t\tname: \"extensionsView\",\n\t\t\t\tfocusNotifiers: [focusTracker],\n\t\t\t\tfocusNextWidget: () => {\n\t\t\t\t\tif (isSearchBoxFocused()) {\n\t\t\t\t\t\tthis.focusListView();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfocusPreviousWidget: () => {\n\t\t\t\t\tif (!isSearchBoxFocused()) {\n\t\t\t\t\t\tthis.searchBox?.focus();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t}),\n\t\t);\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\t\tthis.searchBox?.focus();\n\t}\n\n\tprivate _dimension: Dimension | undefined;\n\toverride layout(dimension: Dimension): void {\n\t\tthis._dimension = dimension;\n\t\tif (this.root) {\n\t\t\tthis.root.classList.toggle(\"narrow\", dimension.width <= 250);\n\t\t\tthis.root.classList.toggle(\"mini\", dimension.width <= 200);\n\t\t}\n\t\tthis.searchBox?.layout(\n\t\t\tnew Dimension(dimension.width - 34 - /*padding*/ 8 - 24 * 2, 20),\n\t\t);\n\t\tconst searchBoxHeight = 20 + 21 /*margin*/;\n\t\tconst headerHeight =\n\t\t\tthis.header && !!this.notificationContainer?.childNodes.length\n\t\t\t\t? this.notificationContainer.clientHeight +\n\t\t\t\t\tsearchBoxHeight +\n\t\t\t\t\t10 /*margin*/\n\t\t\t\t: searchBoxHeight;\n\t\tthis.header!.style.height = `${headerHeight}px`;\n\t\tsuper.layout(\n\t\t\tnew Dimension(dimension.width, dimension.height - headerHeight),\n\t\t);\n\t}\n\n\toverride getOptimalWidth(): number {\n\t\treturn 400;\n\t}\n\n\tsearch(value: string): void {\n\t\tif (this.searchBox && this.searchBox.getValue() !== value) {\n\t\t\tthis.searchBox.setValue(value);\n\t\t}\n\t}\n\n\tasync refresh(): Promise<void> {\n\t\tawait this.updateInstalledExtensionsContexts();\n\t\tthis.doSearch(true);\n\t\tif (\n\t\t\tthis.configurationService.getValue(AutoCheckUpdatesConfigurationKey)\n\t\t) {\n\t\t\tthis.extensionsWorkbenchService.checkForUpdates();\n\t\t}\n\t}\n\n\tprivate readonly notificationDisposables = this._register(\n\t\tnew MutableDisposable<DisposableStore>(),\n\t);\n\tprivate renderNotificaiton(): void {\n\t\tif (!this.notificationContainer) {\n\t\t\treturn;\n\t\t}\n\n\t\tclearNode(this.notificationContainer);\n\t\tthis.notificationDisposables.value = new DisposableStore();\n\t\tconst status =\n\t\t\tthis.extensionsWorkbenchService.getExtensionsNotification();\n\t\tconst query = status?.extensions\n\t\t\t.map((extension) => `@id:${extension.identifier.id}`)\n\t\t\t.join(\" \");\n\t\tif (\n\t\t\tstatus &&\n\t\t\t(query === this.searchBox?.getValue() ||\n\t\t\t\t!this.searchMarketplaceExtensionsContextKey.get())\n\t\t) {\n\t\t\tthis.notificationContainer.setAttribute(\n\t\t\t\t\"aria-label\",\n\t\t\t\tstatus.message,\n\t\t\t);\n\t\t\tthis.notificationContainer.classList.remove(\"hidden\");\n\t\t\tconst messageContainer = append(\n\t\t\t\tthis.notificationContainer,\n\t\t\t\t$(\".message-container\"),\n\t\t\t);\n\t\t\tappend(messageContainer, $(\"span\")).className =\n\t\t\t\tSeverityIcon.className(status.severity);\n\t\t\tappend(\n\t\t\t\tmessageContainer,\n\t\t\t\t$(\"span.message\", undefined, status.message),\n\t\t\t);\n\t\t\tconst showAction = append(\n\t\t\t\tmessageContainer,\n\t\t\t\t$(\n\t\t\t\t\t\"span.message-text-action\",\n\t\t\t\t\t{\n\t\t\t\t\t\ttabindex: \"0\",\n\t\t\t\t\t\trole: \"button\",\n\t\t\t\t\t\t\"aria-label\": `${status.message}. ${localize(\"click show\", \"Click to Show\")}`,\n\t\t\t\t\t},\n\t\t\t\t\tlocalize(\"show\", \"Show\"),\n\t\t\t\t),\n\t\t\t);\n\t\t\tthis.notificationDisposables.value.add(\n\t\t\t\taddDisposableListener(showAction, EventType.CLICK, () =>\n\t\t\t\t\tthis.search(query ?? \"\"),\n\t\t\t\t),\n\t\t\t);\n\t\t\tthis.notificationDisposables.value.add(\n\t\t\t\taddDisposableListener(\n\t\t\t\t\tshowAction,\n\t\t\t\t\tEventType.KEY_DOWN,\n\t\t\t\t\t(e: KeyboardEvent) => {\n\t\t\t\t\t\tconst standardKeyboardEvent = new StandardKeyboardEvent(\n\t\t\t\t\t\t\te,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tstandardKeyboardEvent.keyCode === KeyCode.Enter ||\n\t\t\t\t\t\t\tstandardKeyboardEvent.keyCode === KeyCode.Space\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tthis.search(query ?? \"\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\tstandardKeyboardEvent.stopPropagation();\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t);\n\t\t} else {\n\t\t\tthis.notificationContainer.removeAttribute(\"aria-label\");\n\t\t\tthis.notificationContainer.classList.add(\"hidden\");\n\t\t}\n\n\t\tif (this._dimension) {\n\t\t\tthis.layout(this._dimension);\n\t\t}\n\t}\n\n\tprivate async updateInstalledExtensionsContexts(): Promise<void> {\n\t\tconst result = await this.extensionsWorkbenchService.queryLocal();\n\t\tthis.hasInstalledExtensionsContextKey.set(\n\t\t\tresult.some((r) => !r.isBuiltin),\n\t\t);\n\t}\n\n\tprivate triggerSearch(): void {\n\t\tthis.searchDelayer\n\t\t\t.trigger(\n\t\t\t\t() => this.doSearch(),\n\t\t\t\tthis.searchBox && this.searchBox.getValue() ? 500 : 0,\n\t\t\t)\n\t\t\t.then(undefined, (err) => this.onError(err));\n\t}\n\n\tprivate normalizedQuery(): string {\n\t\treturn this.searchBox\n\t\t\t? this.searchBox\n\t\t\t\t\t.getValue()\n\t\t\t\t\t.trim()\n\t\t\t\t\t.replace(/@category/g, \"category\")\n\t\t\t\t\t.replace(/@tag:/g, \"tag:\")\n\t\t\t\t\t.replace(/@ext:/g, \"ext:\")\n\t\t\t\t\t.replace(/@featured/g, \"featured\")\n\t\t\t\t\t.replace(\n\t\t\t\t\t\t/@popular/g,\n\t\t\t\t\t\tthis.extensionManagementServerService\n\t\t\t\t\t\t\t.webExtensionManagementServer &&\n\t\t\t\t\t\t\t!this.extensionManagementServerService\n\t\t\t\t\t\t\t\t.localExtensionManagementServer &&\n\t\t\t\t\t\t\t!this.extensionManagementServerService\n\t\t\t\t\t\t\t\t.remoteExtensionManagementServer\n\t\t\t\t\t\t\t? \"@web\"\n\t\t\t\t\t\t\t: \"@popular\",\n\t\t\t\t\t)\n\t\t\t: \"\";\n\t}\n\n\tprotected override saveState(): void {\n\t\tconst value = this.searchBox ? this.searchBox.getValue() : \"\";\n\t\tif (ExtensionsListView.isLocalExtensionsQuery(value)) {\n\t\t\tthis.searchViewletState[\"query.value\"] = value;\n\t\t} else {\n\t\t\tthis.searchViewletState[\"query.value\"] = \"\";\n\t\t}\n\t\tsuper.saveState();\n\t}\n\n\tprivate doSearch(refresh?: boolean): Promise<void> {\n\t\tconst value = this.normalizedQuery();\n\t\tthis.contextKeyService.bufferChangeEvents(() => {\n\t\t\tconst isRecommendedExtensionsQuery =\n\t\t\t\tExtensionsListView.isRecommendedExtensionsQuery(value);\n\t\t\tthis.searchHasTextContextKey.set(value.trim() !== \"\");\n\t\t\tthis.installedExtensionsContextKey.set(\n\t\t\t\tExtensionsListView.isInstalledExtensionsQuery(value),\n\t\t\t);\n\t\t\tthis.searchInstalledExtensionsContextKey.set(\n\t\t\t\tExtensionsListView.isSearchInstalledExtensionsQuery(value),\n\t\t\t);\n\t\t\tthis.searchRecentlyUpdatedExtensionsContextKey.set(\n\t\t\t\tExtensionsListView.isSearchRecentlyUpdatedQuery(value) &&\n\t\t\t\t\t!ExtensionsListView.isSearchExtensionUpdatesQuery(value),\n\t\t\t);\n\t\t\tthis.searchOutdatedExtensionsContextKey.set(\n\t\t\t\tExtensionsListView.isOutdatedExtensionsQuery(value) &&\n\t\t\t\t\t!ExtensionsListView.isSearchExtensionUpdatesQuery(value),\n\t\t\t);\n\t\t\tthis.searchExtensionUpdatesContextKey.set(\n\t\t\t\tExtensionsListView.isSearchExtensionUpdatesQuery(value),\n\t\t\t);\n\t\t\tthis.searchEnabledExtensionsContextKey.set(\n\t\t\t\tExtensionsListView.isEnabledExtensionsQuery(value),\n\t\t\t);\n\t\t\tthis.searchDisabledExtensionsContextKey.set(\n\t\t\t\tExtensionsListView.isDisabledExtensionsQuery(value),\n\t\t\t);\n\t\t\tthis.searchBuiltInExtensionsContextKey.set(\n\t\t\t\tExtensionsListView.isSearchBuiltInExtensionsQuery(value),\n\t\t\t);\n\t\t\tthis.searchWorkspaceUnsupportedExtensionsContextKey.set(\n\t\t\t\tExtensionsListView.isSearchWorkspaceUnsupportedExtensionsQuery(\n\t\t\t\t\tvalue,\n\t\t\t\t),\n\t\t\t);\n\t\t\tthis.searchDeprecatedExtensionsContextKey.set(\n\t\t\t\tExtensionsListView.isSearchDeprecatedExtensionsQuery(value),\n\t\t\t);\n\t\t\tthis.builtInExtensionsContextKey.set(\n\t\t\t\tExtensionsListView.isBuiltInExtensionsQuery(value),\n\t\t\t);\n\t\t\tthis.recommendedExtensionsContextKey.set(\n\t\t\t\tisRecommendedExtensionsQuery,\n\t\t\t);\n\t\t\tthis.searchMarketplaceExtensionsContextKey.set(\n\t\t\t\t!!value &&\n\t\t\t\t\t!ExtensionsListView.isLocalExtensionsQuery(value) &&\n\t\t\t\t\t!isRecommendedExtensionsQuery,\n\t\t\t);\n\t\t\tthis.sortByUpdateDateContextKey.set(\n\t\t\t\tExtensionsListView.isSortUpdateDateQuery(value),\n\t\t\t);\n\t\t\tthis.defaultViewsContextKey.set(\n\t\t\t\t!value ||\n\t\t\t\t\tExtensionsListView.isSortInstalledExtensionsQuery(value),\n\t\t\t);\n\t\t});\n\n\t\tthis.renderNotificaiton();\n\n\t\treturn this.progress(\n\t\t\tPromise.all(\n\t\t\t\tthis.panes.map((view) =>\n\t\t\t\t\t(<ExtensionsListView>view)\n\t\t\t\t\t\t.show(this.normalizedQuery(), refresh)\n\t\t\t\t\t\t.then((model) =>\n\t\t\t\t\t\t\tthis.alertSearchResult(model.length, view.id),\n\t\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t),\n\t\t).then(() => undefined);\n\t}\n\n\tprotected override onDidAddViewDescriptors(\n\t\tadded: IAddedViewDescriptorRef[],\n\t): ViewPane[] {\n\t\tconst addedViews = super.onDidAddViewDescriptors(added);\n\t\tthis.progress(\n\t\t\tPromise.all(\n\t\t\t\taddedViews.map((addedView) =>\n\t\t\t\t\t(<ExtensionsListView>addedView)\n\t\t\t\t\t\t.show(this.normalizedQuery())\n\t\t\t\t\t\t.then((model) =>\n\t\t\t\t\t\t\tthis.alertSearchResult(model.length, addedView.id),\n\t\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t),\n\t\t);\n\t\treturn addedViews;\n\t}\n\n\tprivate alertSearchResult(count: number, viewId: string): void {\n\t\tconst view = this.viewContainerModel.visibleViewDescriptors.find(\n\t\t\t(view) => view.id === viewId,\n\t\t);\n\t\tswitch (count) {\n\t\t\tcase 0:\n\t\t\t\tbreak;\n\t\t\tcase 1:\n\t\t\t\tif (view) {\n\t\t\t\t\talert(\n\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\"extensionFoundInSection\",\n\t\t\t\t\t\t\t\"1 extension found in the {0} section.\",\n\t\t\t\t\t\t\tview.name.value,\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\talert(localize(\"extensionFound\", \"1 extension found.\"));\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tif (view) {\n\t\t\t\t\talert(\n\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\"extensionsFoundInSection\",\n\t\t\t\t\t\t\t\"{0} extensions found in the {1} section.\",\n\t\t\t\t\t\t\tcount,\n\t\t\t\t\t\t\tview.name.value,\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\talert(\n\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\"extensionsFound\",\n\t\t\t\t\t\t\t\"{0} extensions found.\",\n\t\t\t\t\t\t\tcount,\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate getFirstExpandedPane(): ExtensionsListView | undefined {\n\t\tfor (const pane of this.panes) {\n\t\t\tif (pane.isExpanded() && pane instanceof ExtensionsListView) {\n\t\t\t\treturn pane;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate focusListView(): void {\n\t\tconst pane = this.getFirstExpandedPane();\n\t\tif (pane && pane.count() > 0) {\n\t\t\tpane.focus();\n\t\t}\n\t}\n\n\tprivate onViewletOpen(viewlet: IPaneComposite): void {\n\t\tif (!viewlet || viewlet.getId() === VIEWLET_ID) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (\n\t\t\tthis.configurationService.getValue<boolean>(\n\t\t\t\tCloseExtensionDetailsOnViewChangeKey,\n\t\t\t)\n\t\t) {\n\t\t\tconst promises = this.editorGroupService.groups.map((group) => {\n\t\t\t\tconst editors = group.editors.filter(\n\t\t\t\t\t(input) => input instanceof ExtensionsInput,\n\t\t\t\t);\n\n\t\t\t\treturn group.closeEditors(editors);\n\t\t\t});\n\n\t\t\tPromise.all(promises);\n\t\t}\n\t}\n\n\tprivate progress<T>(promise: Promise<T>): Promise<T> {\n\t\treturn this.progressService.withProgress(\n\t\t\t{ location: ProgressLocation.Extensions },\n\t\t\t() => promise,\n\t\t);\n\t}\n\n\tprivate onError(err: Error): void {\n\t\tif (isCancellationError(err)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst message = (err && err.message) || \"\";\n\n\t\tif (/ECONNREFUSED/.test(message)) {\n\t\t\tconst error = createErrorWithActions(\n\t\t\t\tlocalize(\n\t\t\t\t\t\"suggestProxyError\",\n\t\t\t\t\t\"Marketplace returned 'ECONNREFUSED'. Please check the 'http.proxy' setting.\",\n\t\t\t\t),\n\t\t\t\t[\n\t\t\t\t\tnew Action(\n\t\t\t\t\t\t\"open user settings\",\n\t\t\t\t\t\tlocalize(\"open user settings\", \"Open User Settings\"),\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t() => this.preferencesService.openUserSettings(),\n\t\t\t\t\t),\n\t\t\t\t],\n\t\t\t);\n\n\t\t\tthis.notificationService.error(error);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.notificationService.error(err);\n\t}\n\n\tprivate isSupportedDragElement(e: DragEvent): boolean {\n\t\tif (e.dataTransfer) {\n\t\t\tconst typesLowerCase = e.dataTransfer.types.map((t) =>\n\t\t\t\tt.toLocaleLowerCase(),\n\t\t\t);\n\t\t\treturn typesLowerCase.indexOf(\"files\") !== -1;\n\t\t}\n\n\t\treturn false;\n\t}\n}\n\nexport class StatusUpdater\n\textends Disposable\n\timplements IWorkbenchContribution\n{\n\tprivate readonly badgeHandle = this._register(new MutableDisposable());\n\n\tconstructor(\n\t\t@IActivityService private readonly activityService: IActivityService,\n\t\t@IExtensionsWorkbenchService private readonly extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IWorkbenchExtensionEnablementService private readonly extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService\n\t) {\n\t\tsuper();\n\t\tthis.onServiceChange();\n\t\tthis._register(Event.any(Event.debounce(extensionsWorkbenchService.onChange, () => undefined, 100, undefined, undefined, undefined, this._store), extensionsWorkbenchService.onDidChangeExtensionsNotification)(this.onServiceChange, this));\n\t}\n\n\tprivate onServiceChange(): void {\n\t\tthis.badgeHandle.clear();\n\t\tlet badge: IBadge | undefined;\n\n\t\tconst extensionsNotification =\n\t\t\tthis.extensionsWorkbenchService.getExtensionsNotification();\n\t\tif (extensionsNotification) {\n\t\t\tif (extensionsNotification.severity === Severity.Warning) {\n\t\t\t\tbadge = new WarningBadge(() => extensionsNotification.message);\n\t\t\t}\n\t\t} else {\n\t\t\tconst actionRequired =\n\t\t\t\tthis.configurationService.getValue(\n\t\t\t\t\tAutoRestartConfigurationKey,\n\t\t\t\t) === true\n\t\t\t\t\t? []\n\t\t\t\t\t: this.extensionsWorkbenchService.installed.filter(\n\t\t\t\t\t\t\t(e) => e.runtimeState !== undefined,\n\t\t\t\t\t\t);\n\t\t\tconst outdated = this.extensionsWorkbenchService.outdated.reduce(\n\t\t\t\t(r, e) =>\n\t\t\t\t\tr +\n\t\t\t\t\t(this.extensionEnablementService.isEnabled(e.local!) &&\n\t\t\t\t\t!actionRequired.includes(e)\n\t\t\t\t\t\t? 1\n\t\t\t\t\t\t: 0),\n\t\t\t\t0,\n\t\t\t);\n\t\t\tconst newBadgeNumber = outdated + actionRequired.length;\n\t\t\tif (newBadgeNumber > 0) {\n\t\t\t\tlet msg = \"\";\n\t\t\t\tif (outdated) {\n\t\t\t\t\tmsg +=\n\t\t\t\t\t\toutdated === 1\n\t\t\t\t\t\t\t? localize(\n\t\t\t\t\t\t\t\t\t\"extensionToUpdate\",\n\t\t\t\t\t\t\t\t\t\"{0} requires update\",\n\t\t\t\t\t\t\t\t\toutdated,\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: localize(\n\t\t\t\t\t\t\t\t\t\"extensionsToUpdate\",\n\t\t\t\t\t\t\t\t\t\"{0} require update\",\n\t\t\t\t\t\t\t\t\toutdated,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (outdated > 0 && actionRequired.length > 0) {\n\t\t\t\t\tmsg += \", \";\n\t\t\t\t}\n\t\t\t\tif (actionRequired.length) {\n\t\t\t\t\tmsg +=\n\t\t\t\t\t\tactionRequired.length === 1\n\t\t\t\t\t\t\t? localize(\n\t\t\t\t\t\t\t\t\t\"extensionToReload\",\n\t\t\t\t\t\t\t\t\t\"{0} requires restart\",\n\t\t\t\t\t\t\t\t\tactionRequired.length,\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: localize(\n\t\t\t\t\t\t\t\t\t\"extensionsToReload\",\n\t\t\t\t\t\t\t\t\t\"{0} require restart\",\n\t\t\t\t\t\t\t\t\tactionRequired.length,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tbadge = new NumberBadge(newBadgeNumber, () => msg);\n\t\t\t}\n\t\t}\n\n\t\tif (badge) {\n\t\t\tthis.badgeHandle.value =\n\t\t\t\tthis.activityService.showViewContainerActivity(VIEWLET_ID, {\n\t\t\t\t\tbadge,\n\t\t\t\t});\n\t\t}\n\t}\n}\n\nexport class MaliciousExtensionChecker implements IWorkbenchContribution {\n\tconstructor(\n\t\t@IExtensionManagementService private readonly extensionsManagementService: IExtensionManagementService,\n\t\t@IHostService private readonly hostService: IHostService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IWorkbenchEnvironmentService private readonly environmentService: IWorkbenchEnvironmentService\n\t) {\n\t\tif (!this.environmentService.disableExtensions) {\n\t\t\tthis.loopCheckForMaliciousExtensions();\n\t\t}\n\t}\n\n\tprivate loopCheckForMaliciousExtensions(): void {\n\t\tthis.checkForMaliciousExtensions()\n\t\t\t.then(() => timeout(1000 * 60 * 5)) // every five minutes\n\t\t\t.then(() => this.loopCheckForMaliciousExtensions());\n\t}\n\n\tprivate checkForMaliciousExtensions(): Promise<void> {\n\t\treturn this.extensionsManagementService\n\t\t\t.getExtensionsControlManifest()\n\t\t\t.then(\n\t\t\t\t(extensionsControlManifest) => {\n\t\t\t\t\treturn this.extensionsManagementService\n\t\t\t\t\t\t.getInstalled(ExtensionType.User)\n\t\t\t\t\t\t.then((installed) => {\n\t\t\t\t\t\t\tconst maliciousExtensions = installed.filter((e) =>\n\t\t\t\t\t\t\t\textensionsControlManifest.malicious.some(\n\t\t\t\t\t\t\t\t\t(identifier) =>\n\t\t\t\t\t\t\t\t\t\tareSameExtensions(\n\t\t\t\t\t\t\t\t\t\t\te.identifier,\n\t\t\t\t\t\t\t\t\t\t\tidentifier,\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\tif (maliciousExtensions.length) {\n\t\t\t\t\t\t\t\treturn Promises.settled(\n\t\t\t\t\t\t\t\t\tmaliciousExtensions.map((e) =>\n\t\t\t\t\t\t\t\t\t\tthis.extensionsManagementService\n\t\t\t\t\t\t\t\t\t\t\t.uninstall(e)\n\t\t\t\t\t\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\t\t\t\t\t\tthis.notificationService.prompt(\n\t\t\t\t\t\t\t\t\t\t\t\t\tSeverity.Warning,\n\t\t\t\t\t\t\t\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"malicious warning\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"We have uninstalled '{0}' which was reported to be problematic.\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\te.identifier.id,\n\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlabel: localize(\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"reloadNow\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\"Reload Now\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trun: () =>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tthis.hostService.reload(),\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsticky: true,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tpriority:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tNotificationPriority.URGENT,\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\treturn Promise.resolve(undefined);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => undefined);\n\t\t\t\t},\n\t\t\t\t(err) => this.logService.error(err),\n\t\t\t);\n\t}\n}\n"],
  "mappings": "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",
  "names": ["view"]
}
