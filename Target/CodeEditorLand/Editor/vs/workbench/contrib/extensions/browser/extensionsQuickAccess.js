var S=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var m=(a,c,e,t)=>{for(var r=t>1?void 0:t?y(c,e):c,i=a.length-1,l;i>=0;i--)(l=a[i])&&(r=(t?l(c,e,r):l(r))||r);return t&&r&&S(c,e,r),r},o=(a,c)=>(e,t)=>c(e,t,a);import{localize as p}from"../../../../nls.js";import{IExtensionGalleryService as u,IExtensionManagementService as h}from"../../../../platform/extensionManagement/common/extensionManagement.js";import{ILogService as v}from"../../../../platform/log/common/log.js";import{INotificationService as x}from"../../../../platform/notification/common/notification.js";import{PickerQuickAccessProvider as I}from"../../../../platform/quickinput/browser/pickerQuickAccess.js";import{IExtensionsWorkbenchService as k}from"../common/extensions.js";let n=class extends I{constructor(e,t,r,i,l){super(n.PREFIX);this.extensionsWorkbenchService=e;this.galleryService=t;this.extensionsService=r;this.notificationService=i;this.logService=l}static PREFIX="ext install ";_getPicks(e,t,r){if(!e)return[{label:p("type","Type an extension name to install or search.")}];const i={label:p("searchFor","Press Enter to search for extension '{0}'.",e),accept:()=>this.extensionsWorkbenchService.openSearch(e)};return/\./.test(e)?this.getPicksForExtensionId(e,i,r):[i]}async getPicksForExtensionId(e,t,r){try{const[i]=await this.galleryService.getExtensions([{id:e}],r);return r.isCancellationRequested?[]:i?[{label:p("install","Press Enter to install extension '{0}'.",e),accept:()=>this.installExtension(i,e)}]:[t]}catch(i){return r.isCancellationRequested?[]:(this.logService.error(i),[t])}}async installExtension(e,t){try{await this.extensionsWorkbenchService.openSearch(`@id:${t}`),await this.extensionsService.installFromGallery(e)}catch(r){this.notificationService.error(r)}}};n=m([o(0,k),o(1,u),o(2,h),o(3,x),o(4,v)],n);let s=class extends I{constructor(e){super(s.PREFIX);this.extensionsWorkbenchService=e}static PREFIX="ext ";_getPicks(){return[{label:p("manage","Press Enter to manage your extensions."),accept:()=>this.extensionsWorkbenchService.openSearch("")}]}};s=m([o(0,k)],s);export{n as InstallExtensionQuickAccessProvider,s as ManageExtensionsQuickAccessProvider};
