{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/extensions/browser/extensionsViews.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { $, append } from \"../../../../base/browser/dom.js\";\nimport { alert } from \"../../../../base/browser/ui/aria/aria.js\";\nimport { CountBadge } from \"../../../../base/browser/ui/countBadge/countBadge.js\";\nimport { HoverPosition } from \"../../../../base/browser/ui/hover/hoverWidget.js\";\nimport type { IListContextMenuEvent } from \"../../../../base/browser/ui/list/list.js\";\nimport {\n\tAction,\n\tActionRunner,\n\ttype IAction,\n\tSeparator,\n} from \"../../../../base/common/actions.js\";\nimport { coalesce, distinct } from \"../../../../base/common/arrays.js\";\nimport {\n\ttype CancelablePromise,\n\tThrottledDelayer,\n\tcreateCancelablePromise,\n} from \"../../../../base/common/async.js\";\nimport { CancellationToken } from \"../../../../base/common/cancellation.js\";\nimport { createErrorWithActions } from \"../../../../base/common/errorMessage.js\";\nimport {\n\tgetErrorMessage,\n\tisCancellationError,\n} from \"../../../../base/common/errors.js\";\nimport { Emitter, Event } from \"../../../../base/common/event.js\";\nimport {\n\tDisposable,\n\tDisposableStore,\n\ttoDisposable,\n} from \"../../../../base/common/lifecycle.js\";\nimport {\n\tDelayedPagedModel,\n\ttype IPagedModel,\n\ttype IPager,\n\tPagedModel,\n} from \"../../../../base/common/paging.js\";\nimport { isString } from \"../../../../base/common/types.js\";\nimport type { URI } from \"../../../../base/common/uri.js\";\nimport { isOfflineError } from \"../../../../base/parts/request/common/request.js\";\nimport { localize } from \"../../../../nls.js\";\nimport { IConfigurationService } from \"../../../../platform/configuration/common/configuration.js\";\nimport { IContextKeyService } from \"../../../../platform/contextkey/common/contextkey.js\";\nimport { IContextMenuService } from \"../../../../platform/contextview/browser/contextView.js\";\nimport {\n\tExtensionGalleryError,\n\tExtensionGalleryErrorCode,\n\tSortBy as GallerySortBy,\n\ttype IQueryOptions as IGalleryQueryOptions,\n\ttype InstallExtensionInfo,\n\tSortOrder,\n} from \"../../../../platform/extensionManagement/common/extensionManagement.js\";\nimport {\n\tareSameExtensions,\n\tgetExtensionDependencies,\n} from \"../../../../platform/extensionManagement/common/extensionManagementUtil.js\";\nimport {\n\tExtensionIdentifier,\n\tExtensionIdentifierMap,\n\ttype ExtensionUntrustedWorkspaceSupportType,\n\ttype ExtensionVirtualWorkspaceSupportType,\n\ttype IExtensionDescription,\n\tisLanguagePackExtension,\n} from \"../../../../platform/extensions/common/extensions.js\";\nimport { IHoverService } from \"../../../../platform/hover/browser/hover.js\";\nimport { IInstantiationService } from \"../../../../platform/instantiation/common/instantiation.js\";\nimport { IKeybindingService } from \"../../../../platform/keybinding/common/keybinding.js\";\nimport { WorkbenchPagedList } from \"../../../../platform/list/browser/listService.js\";\nimport { ILogService } from \"../../../../platform/log/common/log.js\";\nimport {\n\tINotificationService,\n\tSeverity,\n} from \"../../../../platform/notification/common/notification.js\";\nimport { IOpenerService } from \"../../../../platform/opener/common/opener.js\";\nimport { IProductService } from \"../../../../platform/product/common/productService.js\";\nimport { Registry } from \"../../../../platform/registry/common/platform.js\";\nimport { SeverityIcon } from \"../../../../platform/severityIcon/browser/severityIcon.js\";\nimport {\n\tIStorageService,\n\tStorageScope,\n\tStorageTarget,\n} from \"../../../../platform/storage/common/storage.js\";\nimport { ITelemetryService } from \"../../../../platform/telemetry/common/telemetry.js\";\nimport { defaultCountBadgeStyles } from \"../../../../platform/theme/browser/defaultStyles.js\";\nimport { IThemeService } from \"../../../../platform/theme/common/themeService.js\";\nimport { IUriIdentityService } from \"../../../../platform/uriIdentity/common/uriIdentity.js\";\nimport { isVirtualWorkspace } from \"../../../../platform/workspace/common/virtualWorkspace.js\";\nimport { IWorkspaceContextService } from \"../../../../platform/workspace/common/workspace.js\";\nimport { IWorkspaceTrustManagementService } from \"../../../../platform/workspace/common/workspaceTrust.js\";\nimport {\n\ttype IViewPaneOptions,\n\tViewPane,\n\tViewPaneShowActions,\n} from \"../../../browser/parts/views/viewPane.js\";\nimport type { IViewletViewOptions } from \"../../../browser/parts/views/viewsViewlet.js\";\nimport {\n\tIViewDescriptorService,\n\tViewContainerLocation,\n} from \"../../../common/views.js\";\nimport {\n\tExtensions,\n\ttype IExtensionFeatureRenderer,\n\tIExtensionFeaturesManagementService,\n\ttype IExtensionFeaturesRegistry,\n} from \"../../../services/extensionManagement/common/extensionFeatures.js\";\nimport {\n\tEnablementState,\n\ttype IExtensionManagementServer,\n\tIExtensionManagementServerService,\n\tIWorkbenchExtensionEnablementService,\n\tIWorkbenchExtensionManagementService,\n} from \"../../../services/extensionManagement/common/extensionManagement.js\";\nimport { IExtensionRecommendationsService } from \"../../../services/extensionRecommendations/common/extensionRecommendations.js\";\nimport { IExtensionManifestPropertiesService } from \"../../../services/extensions/common/extensionManifestPropertiesService.js\";\nimport {\n\tIExtensionService,\n\ttoExtension,\n} from \"../../../services/extensions/common/extensions.js\";\nimport {\n\tIWorkbenchLayoutService,\n\tPosition,\n} from \"../../../services/layout/browser/layoutService.js\";\nimport { IPreferencesService } from \"../../../services/preferences/common/preferences.js\";\nimport { Query } from \"../common/extensionQuery.js\";\nimport {\n\tExtensionState,\n\ttype IExtension,\n\tIExtensionsWorkbenchService,\n\ttype IWorkspaceRecommendedExtensionsView,\n} from \"../common/extensions.js\";\nimport {\n\tExtensionAction,\n\tManageExtensionAction,\n\tgetContextMenuActions,\n} from \"./extensionsActions.js\";\nimport {\n\tDelegate,\n\ttype IExtensionsViewState,\n\tRenderer,\n} from \"./extensionsList.js\";\n\nexport const NONE_CATEGORY = \"none\";\n\nclass ExtensionsViewState extends Disposable implements IExtensionsViewState {\n\tprivate readonly _onFocus: Emitter<IExtension> = this._register(\n\t\tnew Emitter<IExtension>(),\n\t);\n\treadonly onFocus: Event<IExtension> = this._onFocus.event;\n\n\tprivate readonly _onBlur: Emitter<IExtension> = this._register(\n\t\tnew Emitter<IExtension>(),\n\t);\n\treadonly onBlur: Event<IExtension> = this._onBlur.event;\n\n\tprivate currentlyFocusedItems: IExtension[] = [];\n\n\tonFocusChange(extensions: IExtension[]): void {\n\t\tthis.currentlyFocusedItems.forEach((extension) =>\n\t\t\tthis._onBlur.fire(extension),\n\t\t);\n\t\tthis.currentlyFocusedItems = extensions;\n\t\tthis.currentlyFocusedItems.forEach((extension) =>\n\t\t\tthis._onFocus.fire(extension),\n\t\t);\n\t}\n}\n\nexport interface ExtensionsListViewOptions {\n\tserver?: IExtensionManagementServer;\n\tflexibleHeight?: boolean;\n\tonDidChangeTitle?: Event<string>;\n\thideBadge?: boolean;\n}\n\ninterface IQueryResult {\n\tmodel: IPagedModel<IExtension>;\n\treadonly onDidChangeModel?: Event<IPagedModel<IExtension>>;\n\treadonly disposables: DisposableStore;\n}\n\nenum LocalSortBy {\n\tUpdateDate = \"UpdateDate\",\n}\n\nfunction isLocalSortBy(value: any): value is LocalSortBy {\n\tswitch (value as LocalSortBy) {\n\t\tcase LocalSortBy.UpdateDate:\n\t\t\treturn true;\n\t}\n}\n\ntype SortBy = LocalSortBy | GallerySortBy;\ntype IQueryOptions = Omit<IGalleryQueryOptions, \"sortBy\"> & { sortBy?: SortBy };\n\nexport class ExtensionsListView extends ViewPane {\n\tprivate static RECENT_UPDATE_DURATION = 7 * 24 * 60 * 60 * 1000; // 7 days\n\n\tprivate bodyTemplate:\n\t\t| {\n\t\t\t\tmessageContainer: HTMLElement;\n\t\t\t\tmessageSeverityIcon: HTMLElement;\n\t\t\t\tmessageBox: HTMLElement;\n\t\t\t\textensionsList: HTMLElement;\n\t\t  }\n\t\t| undefined;\n\tprivate badge: CountBadge | undefined;\n\tprivate list: WorkbenchPagedList<IExtension> | null = null;\n\tprivate queryRequest: {\n\t\tquery: string;\n\t\trequest: CancelablePromise<IPagedModel<IExtension>>;\n\t} | null = null;\n\tprivate queryResult: IQueryResult | undefined;\n\n\tprivate readonly contextMenuActionRunner = this._register(\n\t\tnew ActionRunner(),\n\t);\n\n\tconstructor(\n\t\tprotected readonly options: ExtensionsListViewOptions,\n\t\tviewletViewOptions: IViewletViewOptions,\n\t\t@INotificationService\n\t\tprotected notificationService: INotificationService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IExtensionsWorkbenchService\n\t\tprotected extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IExtensionRecommendationsService\n\t\tprotected extensionRecommendationsService: IExtensionRecommendationsService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IHoverService hoverService: IHoverService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IWorkspaceContextService\n\t\tprotected contextService: IWorkspaceContextService,\n\t\t@IExtensionManagementServerService\n\t\tprotected readonly extensionManagementServerService: IExtensionManagementServerService,\n\t\t@IExtensionManifestPropertiesService\n\t\tprivate readonly extensionManifestPropertiesService: IExtensionManifestPropertiesService,\n\t\t@IWorkbenchExtensionManagementService\n\t\tprotected readonly extensionManagementService: IWorkbenchExtensionManagementService,\n\t\t@IWorkspaceContextService\n\t\tprotected readonly workspaceService: IWorkspaceContextService,\n\t\t@IProductService protected readonly productService: IProductService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IPreferencesService\n\t\tprivate readonly preferencesService: IPreferencesService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IWorkspaceTrustManagementService\n\t\tprivate readonly workspaceTrustManagementService: IWorkspaceTrustManagementService,\n\t\t@IWorkbenchExtensionEnablementService\n\t\tprivate readonly extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t\t@IWorkbenchLayoutService\n\t\tprivate readonly layoutService: IWorkbenchLayoutService,\n\t\t@IExtensionFeaturesManagementService\n\t\tprivate readonly extensionFeaturesManagementService: IExtensionFeaturesManagementService,\n\t\t@IUriIdentityService\n\t\tprotected readonly uriIdentityService: IUriIdentityService,\n\t\t@ILogService private readonly logService: ILogService,\n\t) {\n\t\tsuper(\n\t\t\t{\n\t\t\t\t...(viewletViewOptions as IViewPaneOptions),\n\t\t\t\tshowActions: ViewPaneShowActions.Always,\n\t\t\t\tmaximumBodySize: options.flexibleHeight\n\t\t\t\t\t? storageService.getNumber(\n\t\t\t\t\t\t\t`${viewletViewOptions.id}.size`,\n\t\t\t\t\t\t\tStorageScope.PROFILE,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t)\n\t\t\t\t\t\t? undefined\n\t\t\t\t\t\t: 0\n\t\t\t\t\t: undefined,\n\t\t\t},\n\t\t\tkeybindingService,\n\t\t\tcontextMenuService,\n\t\t\tconfigurationService,\n\t\t\tcontextKeyService,\n\t\t\tviewDescriptorService,\n\t\t\tinstantiationService,\n\t\t\topenerService,\n\t\t\tthemeService,\n\t\t\ttelemetryService,\n\t\t\thoverService,\n\t\t);\n\t\tif (this.options.onDidChangeTitle) {\n\t\t\tthis._register(\n\t\t\t\tthis.options.onDidChangeTitle((title) =>\n\t\t\t\t\tthis.updateTitle(title),\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\n\t\tthis._register(\n\t\t\tthis.contextMenuActionRunner.onDidRun(\n\t\t\t\t({ error }) => error && this.notificationService.error(error),\n\t\t\t),\n\t\t);\n\t\tthis.registerActions();\n\t}\n\n\tprotected registerActions(): void {}\n\n\tprotected override renderHeader(container: HTMLElement): void {\n\t\tcontainer.classList.add(\"extension-view-header\");\n\t\tsuper.renderHeader(container);\n\n\t\tif (!this.options.hideBadge) {\n\t\t\tthis.badge = new CountBadge(\n\t\t\t\tappend(container, $(\".count-badge-wrapper\")),\n\t\t\t\t{},\n\t\t\t\tdefaultCountBadgeStyles,\n\t\t\t);\n\t\t}\n\t}\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tconst extensionsList = append(container, $(\".extensions-list\"));\n\t\tconst messageContainer = append(container, $(\".message-container\"));\n\t\tconst messageSeverityIcon = append(messageContainer, $(\"\"));\n\t\tconst messageBox = append(messageContainer, $(\".message\"));\n\t\tconst delegate = new Delegate();\n\t\tconst extensionsViewState = new ExtensionsViewState();\n\t\tconst renderer = this.instantiationService.createInstance(\n\t\t\tRenderer,\n\t\t\textensionsViewState,\n\t\t\t{\n\t\t\t\thoverOptions: {\n\t\t\t\t\tposition: () => {\n\t\t\t\t\t\tconst viewLocation =\n\t\t\t\t\t\t\tthis.viewDescriptorService.getViewLocationById(\n\t\t\t\t\t\t\t\tthis.id,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\tif (viewLocation === ViewContainerLocation.Sidebar) {\n\t\t\t\t\t\t\treturn this.layoutService.getSideBarPosition() ===\n\t\t\t\t\t\t\t\tPosition.LEFT\n\t\t\t\t\t\t\t\t? HoverPosition.RIGHT\n\t\t\t\t\t\t\t\t: HoverPosition.LEFT;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tviewLocation === ViewContainerLocation.AuxiliaryBar\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn this.layoutService.getSideBarPosition() ===\n\t\t\t\t\t\t\t\tPosition.LEFT\n\t\t\t\t\t\t\t\t? HoverPosition.LEFT\n\t\t\t\t\t\t\t\t: HoverPosition.RIGHT;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn HoverPosition.RIGHT;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t\tthis.list = this.instantiationService.createInstance(\n\t\t\tWorkbenchPagedList,\n\t\t\t\"Extensions\",\n\t\t\textensionsList,\n\t\t\tdelegate,\n\t\t\t[renderer],\n\t\t\t{\n\t\t\t\tmultipleSelectionSupport: false,\n\t\t\t\tsetRowLineHeight: false,\n\t\t\t\thorizontalScrolling: false,\n\t\t\t\taccessibilityProvider: {\n\t\t\t\t\tgetAriaLabel(extension: IExtension | null): string {\n\t\t\t\t\t\treturn getAriaLabelForExtension(extension);\n\t\t\t\t\t},\n\t\t\t\t\tgetWidgetAriaLabel(): string {\n\t\t\t\t\t\treturn localize(\"extensions\", \"Extensions\");\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\toverrideStyles:\n\t\t\t\t\tthis.getLocationBasedColors().listOverrideStyles,\n\t\t\t\topenOnSingleClick: true,\n\t\t\t},\n\t\t) as WorkbenchPagedList<IExtension>;\n\t\tthis._register(\n\t\t\tthis.list.onContextMenu((e) => this.onContextMenu(e), this),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.list.onDidChangeFocus(\n\t\t\t\t(e) => extensionsViewState.onFocusChange(coalesce(e.elements)),\n\t\t\t\tthis,\n\t\t\t),\n\t\t);\n\t\tthis._register(this.list);\n\t\tthis._register(extensionsViewState);\n\n\t\tthis._register(\n\t\t\tEvent.debounce(\n\t\t\t\tEvent.filter(this.list.onDidOpen, (e) => e.element !== null),\n\t\t\t\t(_, event) => event,\n\t\t\t\t75,\n\t\t\t\ttrue,\n\t\t\t)((options) => {\n\t\t\t\tthis.openExtension(options.element!, {\n\t\t\t\t\tsideByside: options.sideBySide,\n\t\t\t\t\t...options.editorOptions,\n\t\t\t\t});\n\t\t\t}),\n\t\t);\n\n\t\tthis.bodyTemplate = {\n\t\t\textensionsList,\n\t\t\tmessageBox,\n\t\t\tmessageContainer,\n\t\t\tmessageSeverityIcon,\n\t\t};\n\n\t\tif (this.queryResult) {\n\t\t\tthis.setModel(this.queryResult.model);\n\t\t}\n\t}\n\n\tprotected override layoutBody(height: number, width: number): void {\n\t\tsuper.layoutBody(height, width);\n\t\tif (this.bodyTemplate) {\n\t\t\tthis.bodyTemplate.extensionsList.style.height = height + \"px\";\n\t\t}\n\t\tthis.list?.layout(height, width);\n\t}\n\n\tasync show(\n\t\tquery: string,\n\t\trefresh?: boolean,\n\t): Promise<IPagedModel<IExtension>> {\n\t\tif (this.queryRequest) {\n\t\t\tif (!refresh && this.queryRequest.query === query) {\n\t\t\t\treturn this.queryRequest.request;\n\t\t\t}\n\t\t\tthis.queryRequest.request.cancel();\n\t\t\tthis.queryRequest = null;\n\t\t}\n\n\t\tif (this.queryResult) {\n\t\t\tthis.queryResult.disposables.dispose();\n\t\t\tthis.queryResult = undefined;\n\t\t}\n\n\t\tconst parsedQuery = Query.parse(query);\n\n\t\tconst options: IQueryOptions = {\n\t\t\tsortOrder: SortOrder.Default,\n\t\t};\n\n\t\tswitch (parsedQuery.sortBy) {\n\t\t\tcase \"installs\":\n\t\t\t\toptions.sortBy = GallerySortBy.InstallCount;\n\t\t\t\tbreak;\n\t\t\tcase \"rating\":\n\t\t\t\toptions.sortBy = GallerySortBy.WeightedRating;\n\t\t\t\tbreak;\n\t\t\tcase \"name\":\n\t\t\t\toptions.sortBy = GallerySortBy.Title;\n\t\t\t\tbreak;\n\t\t\tcase \"publishedDate\":\n\t\t\t\toptions.sortBy = GallerySortBy.PublishedDate;\n\t\t\t\tbreak;\n\t\t\tcase \"updateDate\":\n\t\t\t\toptions.sortBy = LocalSortBy.UpdateDate;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst request = createCancelablePromise(async (token) => {\n\t\t\ttry {\n\t\t\t\tthis.queryResult = await this.query(\n\t\t\t\t\tparsedQuery,\n\t\t\t\t\toptions,\n\t\t\t\t\ttoken,\n\t\t\t\t);\n\t\t\t\tconst model = this.queryResult.model;\n\t\t\t\tthis.setModel(model);\n\t\t\t\tif (this.queryResult.onDidChangeModel) {\n\t\t\t\t\tthis.queryResult.disposables.add(\n\t\t\t\t\t\tthis.queryResult.onDidChangeModel((model) => {\n\t\t\t\t\t\t\tif (this.queryResult) {\n\t\t\t\t\t\t\t\tthis.queryResult.model = model;\n\t\t\t\t\t\t\t\tthis.updateModel(model);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn model;\n\t\t\t} catch (e) {\n\t\t\t\tconst model = new PagedModel([]);\n\t\t\t\tif (!isCancellationError(e)) {\n\t\t\t\t\tthis.logService.error(e);\n\t\t\t\t\tthis.setModel(model, e);\n\t\t\t\t}\n\t\t\t\treturn this.list ? this.list.model : model;\n\t\t\t}\n\t\t});\n\n\t\trequest.finally(() => (this.queryRequest = null));\n\t\tthis.queryRequest = { query, request };\n\t\treturn request;\n\t}\n\n\tcount(): number {\n\t\treturn this.queryResult?.model.length ?? 0;\n\t}\n\n\tprotected showEmptyModel(): Promise<IPagedModel<IExtension>> {\n\t\tconst emptyModel = new PagedModel([]);\n\t\tthis.setModel(emptyModel);\n\t\treturn Promise.resolve(emptyModel);\n\t}\n\n\tprivate async onContextMenu(\n\t\te: IListContextMenuEvent<IExtension>,\n\t): Promise<void> {\n\t\tif (e.element) {\n\t\t\tconst disposables = new DisposableStore();\n\t\t\tconst manageExtensionAction = disposables.add(\n\t\t\t\tthis.instantiationService.createInstance(ManageExtensionAction),\n\t\t\t);\n\t\t\tconst extension = e.element\n\t\t\t\t? this.extensionsWorkbenchService.local.find(\n\t\t\t\t\t\t(local) =>\n\t\t\t\t\t\t\tareSameExtensions(\n\t\t\t\t\t\t\t\tlocal.identifier,\n\t\t\t\t\t\t\t\te.element!.identifier,\n\t\t\t\t\t\t\t) &&\n\t\t\t\t\t\t\t(!e.element!.server ||\n\t\t\t\t\t\t\t\te.element!.server === local.server),\n\t\t\t\t\t) || e.element\n\t\t\t\t: e.element;\n\t\t\tmanageExtensionAction.extension = extension;\n\t\t\tlet groups: IAction[][] = [];\n\t\t\tif (manageExtensionAction.enabled) {\n\t\t\t\tgroups = await manageExtensionAction.getActionGroups();\n\t\t\t} else if (extension) {\n\t\t\t\tgroups = await getContextMenuActions(\n\t\t\t\t\textension,\n\t\t\t\t\tthis.contextKeyService,\n\t\t\t\t\tthis.instantiationService,\n\t\t\t\t);\n\t\t\t\tgroups.forEach((group) =>\n\t\t\t\t\tgroup.forEach((extensionAction) => {\n\t\t\t\t\t\tif (extensionAction instanceof ExtensionAction) {\n\t\t\t\t\t\t\textensionAction.extension = extension;\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t}\n\t\t\tlet actions: IAction[] = [];\n\t\t\tfor (const menuActions of groups) {\n\t\t\t\tactions = [...actions, ...menuActions, new Separator()];\n\t\t\t}\n\t\t\tactions.pop();\n\t\t\tthis.contextMenuService.showContextMenu({\n\t\t\t\tgetAnchor: () => e.anchor,\n\t\t\t\tgetActions: () => actions,\n\t\t\t\tactionRunner: this.contextMenuActionRunner,\n\t\t\t\tonHide: () => disposables.dispose(),\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate async query(\n\t\tquery: Query,\n\t\toptions: IQueryOptions,\n\t\ttoken: CancellationToken,\n\t): Promise<IQueryResult> {\n\t\tconst idRegex =\n\t\t\t/@id:(([a-z0-9A-Z][a-z0-9\\-A-Z]*)\\.([a-z0-9A-Z][a-z0-9\\-A-Z]*))/g;\n\t\tconst ids: string[] = [];\n\t\tlet idMatch;\n\t\twhile ((idMatch = idRegex.exec(query.value)) !== null) {\n\t\t\tconst name = idMatch[1];\n\t\t\tids.push(name);\n\t\t}\n\t\tif (ids.length) {\n\t\t\tconst model = await this.queryByIds(ids, options, token);\n\t\t\treturn { model, disposables: new DisposableStore() };\n\t\t}\n\n\t\tif (\n\t\t\tExtensionsListView.isLocalExtensionsQuery(query.value, query.sortBy)\n\t\t) {\n\t\t\treturn this.queryLocal(query, options);\n\t\t}\n\n\t\tif (ExtensionsListView.isSearchPopularQuery(query.value)) {\n\t\t\tquery.value = query.value.replace(\"@popular\", \"\");\n\t\t\toptions.sortBy = options.sortBy\n\t\t\t\t? options.sortBy\n\t\t\t\t: GallerySortBy.InstallCount;\n\t\t} else if (\n\t\t\tExtensionsListView.isSearchRecentlyPublishedQuery(query.value)\n\t\t) {\n\t\t\tquery.value = query.value.replace(\"@recentlyPublished\", \"\");\n\t\t\toptions.sortBy = options.sortBy\n\t\t\t\t? options.sortBy\n\t\t\t\t: GallerySortBy.PublishedDate;\n\t\t}\n\n\t\tconst galleryQueryOptions: IGalleryQueryOptions = {\n\t\t\t...options,\n\t\t\tsortBy: isLocalSortBy(options.sortBy) ? undefined : options.sortBy,\n\t\t};\n\t\tconst model = await this.queryGallery(\n\t\t\tquery,\n\t\t\tgalleryQueryOptions,\n\t\t\ttoken,\n\t\t);\n\t\treturn { model, disposables: new DisposableStore() };\n\t}\n\n\tprivate async queryByIds(\n\t\tids: string[],\n\t\toptions: IQueryOptions,\n\t\ttoken: CancellationToken,\n\t): Promise<IPagedModel<IExtension>> {\n\t\tconst idsSet: Set<string> = ids.reduce((result, id) => {\n\t\t\tresult.add(id.toLowerCase());\n\t\t\treturn result;\n\t\t}, new Set<string>());\n\t\tconst result = (\n\t\t\tawait this.extensionsWorkbenchService.queryLocal(\n\t\t\t\tthis.options.server,\n\t\t\t)\n\t\t).filter((e) => idsSet.has(e.identifier.id.toLowerCase()));\n\n\t\tconst galleryIds = result.length\n\t\t\t? ids.filter((id) =>\n\t\t\t\t\tresult.every(\n\t\t\t\t\t\t(r) => !areSameExtensions(r.identifier, { id }),\n\t\t\t\t\t),\n\t\t\t\t)\n\t\t\t: ids;\n\n\t\tif (galleryIds.length) {\n\t\t\tconst galleryResult =\n\t\t\t\tawait this.extensionsWorkbenchService.getExtensions(\n\t\t\t\t\tgalleryIds.map((id) => ({ id })),\n\t\t\t\t\t{ source: \"queryById\" },\n\t\t\t\t\ttoken,\n\t\t\t\t);\n\t\t\tresult.push(...galleryResult);\n\t\t}\n\n\t\treturn this.getPagedModel(result);\n\t}\n\n\tprivate async queryLocal(\n\t\tquery: Query,\n\t\toptions: IQueryOptions,\n\t): Promise<IQueryResult> {\n\t\tconst local = await this.extensionsWorkbenchService.queryLocal(\n\t\t\tthis.options.server,\n\t\t);\n\t\tlet { extensions, canIncludeInstalledExtensions } =\n\t\t\tawait this.filterLocal(\n\t\t\t\tlocal,\n\t\t\t\tthis.extensionService.extensions,\n\t\t\t\tquery,\n\t\t\t\toptions,\n\t\t\t);\n\t\tconst disposables = new DisposableStore();\n\t\tconst onDidChangeModel = disposables.add(\n\t\t\tnew Emitter<IPagedModel<IExtension>>(),\n\t\t);\n\n\t\tif (canIncludeInstalledExtensions) {\n\t\t\tlet isDisposed = false;\n\t\t\tdisposables.add(toDisposable(() => (isDisposed = true)));\n\t\t\tdisposables.add(\n\t\t\t\tEvent.debounce(\n\t\t\t\t\tEvent.any(\n\t\t\t\t\t\tEvent.filter(\n\t\t\t\t\t\t\tthis.extensionsWorkbenchService.onChange,\n\t\t\t\t\t\t\t(e) => e?.state === ExtensionState.Installed,\n\t\t\t\t\t\t),\n\t\t\t\t\t\tthis.extensionService.onDidChangeExtensions,\n\t\t\t\t\t),\n\t\t\t\t\t() => undefined,\n\t\t\t\t)(async () => {\n\t\t\t\t\tconst local = this.options.server\n\t\t\t\t\t\t? this.extensionsWorkbenchService.installed.filter(\n\t\t\t\t\t\t\t\t(e) => e.server === this.options.server,\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t: this.extensionsWorkbenchService.local;\n\t\t\t\t\tconst { extensions: newExtensions } =\n\t\t\t\t\t\tawait this.filterLocal(\n\t\t\t\t\t\t\tlocal,\n\t\t\t\t\t\t\tthis.extensionService.extensions,\n\t\t\t\t\t\t\tquery,\n\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t);\n\t\t\t\t\tif (!isDisposed) {\n\t\t\t\t\t\tconst mergedExtensions = this.mergeAddedExtensions(\n\t\t\t\t\t\t\textensions,\n\t\t\t\t\t\t\tnewExtensions,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (mergedExtensions) {\n\t\t\t\t\t\t\textensions = mergedExtensions;\n\t\t\t\t\t\t\tonDidChangeModel.fire(new PagedModel(extensions));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\treturn {\n\t\t\tmodel: new PagedModel(extensions),\n\t\t\tonDidChangeModel: onDidChangeModel.event,\n\t\t\tdisposables,\n\t\t};\n\t}\n\n\tprivate async filterLocal(\n\t\tlocal: IExtension[],\n\t\trunningExtensions: readonly IExtensionDescription[],\n\t\tquery: Query,\n\t\toptions: IQueryOptions,\n\t): Promise<{\n\t\textensions: IExtension[];\n\t\tcanIncludeInstalledExtensions: boolean;\n\t}> {\n\t\tconst value = query.value;\n\t\tlet extensions: IExtension[] = [];\n\t\tlet canIncludeInstalledExtensions = true;\n\n\t\tif (/@builtin/i.test(value)) {\n\t\t\textensions = this.filterBuiltinExtensions(local, query, options);\n\t\t\tcanIncludeInstalledExtensions = false;\n\t\t} else if (/@installed/i.test(value)) {\n\t\t\textensions = this.filterInstalledExtensions(\n\t\t\t\tlocal,\n\t\t\t\trunningExtensions,\n\t\t\t\tquery,\n\t\t\t\toptions,\n\t\t\t);\n\t\t} else if (/@outdated/i.test(value)) {\n\t\t\textensions = this.filterOutdatedExtensions(local, query, options);\n\t\t} else if (/@disabled/i.test(value)) {\n\t\t\textensions = this.filterDisabledExtensions(\n\t\t\t\tlocal,\n\t\t\t\trunningExtensions,\n\t\t\t\tquery,\n\t\t\t\toptions,\n\t\t\t);\n\t\t} else if (/@enabled/i.test(value)) {\n\t\t\textensions = this.filterEnabledExtensions(\n\t\t\t\tlocal,\n\t\t\t\trunningExtensions,\n\t\t\t\tquery,\n\t\t\t\toptions,\n\t\t\t);\n\t\t} else if (/@workspaceUnsupported/i.test(value)) {\n\t\t\textensions = this.filterWorkspaceUnsupportedExtensions(\n\t\t\t\tlocal,\n\t\t\t\tquery,\n\t\t\t\toptions,\n\t\t\t);\n\t\t} else if (/@deprecated/i.test(query.value)) {\n\t\t\textensions = await this.filterDeprecatedExtensions(\n\t\t\t\tlocal,\n\t\t\t\tquery,\n\t\t\t\toptions,\n\t\t\t);\n\t\t} else if (/@recentlyUpdated/i.test(query.value)) {\n\t\t\textensions = this.filterRecentlyUpdatedExtensions(\n\t\t\t\tlocal,\n\t\t\t\tquery,\n\t\t\t\toptions,\n\t\t\t);\n\t\t} else if (/@feature:/i.test(query.value)) {\n\t\t\textensions = this.filterExtensionsByFeature(local, query, options);\n\t\t}\n\n\t\treturn { extensions, canIncludeInstalledExtensions };\n\t}\n\n\tprivate filterBuiltinExtensions(\n\t\tlocal: IExtension[],\n\t\tquery: Query,\n\t\toptions: IQueryOptions,\n\t): IExtension[] {\n\t\tlet { value, includedCategories, excludedCategories } =\n\t\t\tthis.parseCategories(query.value);\n\t\tvalue = value\n\t\t\t.replace(/@builtin/g, \"\")\n\t\t\t.replace(/@sort:(\\w+)(-\\w*)?/g, \"\")\n\t\t\t.trim()\n\t\t\t.toLowerCase();\n\n\t\tconst result = local.filter(\n\t\t\t(e) =>\n\t\t\t\te.isBuiltin &&\n\t\t\t\t(e.name.toLowerCase().indexOf(value) > -1 ||\n\t\t\t\t\te.displayName.toLowerCase().indexOf(value) > -1) &&\n\t\t\t\tthis.filterExtensionByCategory(\n\t\t\t\t\te,\n\t\t\t\t\tincludedCategories,\n\t\t\t\t\texcludedCategories,\n\t\t\t\t),\n\t\t);\n\n\t\treturn this.sortExtensions(result, options);\n\t}\n\n\tprivate filterExtensionByCategory(\n\t\te: IExtension,\n\t\tincludedCategories: string[],\n\t\texcludedCategories: string[],\n\t): boolean {\n\t\tif (!includedCategories.length && !excludedCategories.length) {\n\t\t\treturn true;\n\t\t}\n\t\tif (e.categories.length) {\n\t\t\tif (\n\t\t\t\texcludedCategories.length &&\n\t\t\t\te.categories.some((category) =>\n\t\t\t\t\texcludedCategories.includes(category.toLowerCase()),\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn e.categories.some((category) =>\n\t\t\t\tincludedCategories.includes(category.toLowerCase()),\n\t\t\t);\n\t\t} else {\n\t\t\treturn includedCategories.includes(NONE_CATEGORY);\n\t\t}\n\t}\n\n\tprivate parseCategories(value: string): {\n\t\tvalue: string;\n\t\tincludedCategories: string[];\n\t\texcludedCategories: string[];\n\t} {\n\t\tconst includedCategories: string[] = [];\n\t\tconst excludedCategories: string[] = [];\n\t\tvalue = value.replace(\n\t\t\t/\\bcategory:(\"([^\"]*)\"|([^\"]\\S*))(\\s+|\\b|$)/g,\n\t\t\t(_, quotedCategory, category) => {\n\t\t\t\tconst entry = (category || quotedCategory || \"\").toLowerCase();\n\t\t\t\tif (entry.startsWith(\"-\")) {\n\t\t\t\t\tif (excludedCategories.indexOf(entry) === -1) {\n\t\t\t\t\t\texcludedCategories.push(entry);\n\t\t\t\t\t}\n\t\t\t\t} else if (includedCategories.indexOf(entry) === -1) {\n\t\t\t\t\tincludedCategories.push(entry);\n\t\t\t\t}\n\t\t\t\treturn \"\";\n\t\t\t},\n\t\t);\n\t\treturn { value, includedCategories, excludedCategories };\n\t}\n\n\tprivate filterInstalledExtensions(\n\t\tlocal: IExtension[],\n\t\trunningExtensions: readonly IExtensionDescription[],\n\t\tquery: Query,\n\t\toptions: IQueryOptions,\n\t): IExtension[] {\n\t\tlet { value, includedCategories, excludedCategories } =\n\t\t\tthis.parseCategories(query.value);\n\n\t\tvalue = value\n\t\t\t.replace(/@installed/g, \"\")\n\t\t\t.replace(/@sort:(\\w+)(-\\w*)?/g, \"\")\n\t\t\t.trim()\n\t\t\t.toLowerCase();\n\n\t\tconst matchingText = (e: IExtension) =>\n\t\t\t(e.name.toLowerCase().indexOf(value) > -1 ||\n\t\t\t\te.displayName.toLowerCase().indexOf(value) > -1 ||\n\t\t\t\te.description.toLowerCase().indexOf(value) > -1) &&\n\t\t\tthis.filterExtensionByCategory(\n\t\t\t\te,\n\t\t\t\tincludedCategories,\n\t\t\t\texcludedCategories,\n\t\t\t);\n\t\tlet result;\n\n\t\tif (options.sortBy !== undefined) {\n\t\t\tresult = local.filter((e) => !e.isBuiltin && matchingText(e));\n\t\t\tresult = this.sortExtensions(result, options);\n\t\t} else {\n\t\t\tresult = local.filter(\n\t\t\t\t(e) =>\n\t\t\t\t\t(!e.isBuiltin ||\n\t\t\t\t\t\te.outdated ||\n\t\t\t\t\t\te.runtimeState !== undefined) &&\n\t\t\t\t\tmatchingText(e),\n\t\t\t);\n\t\t\tconst runningExtensionsById = runningExtensions.reduce(\n\t\t\t\t(result, e) => {\n\t\t\t\t\tresult.set(e.identifier.value, e);\n\t\t\t\t\treturn result;\n\t\t\t\t},\n\t\t\t\tnew ExtensionIdentifierMap<IExtensionDescription>(),\n\t\t\t);\n\n\t\t\tconst defaultSort = (e1: IExtension, e2: IExtension) => {\n\t\t\t\tconst running1 = runningExtensionsById.get(e1.identifier.id);\n\t\t\t\tconst isE1Running =\n\t\t\t\t\t!!running1 &&\n\t\t\t\t\tthis.extensionManagementServerService.getExtensionManagementServer(\n\t\t\t\t\t\ttoExtension(running1),\n\t\t\t\t\t) === e1.server;\n\t\t\t\tconst running2 = runningExtensionsById.get(e2.identifier.id);\n\t\t\t\tconst isE2Running =\n\t\t\t\t\trunning2 &&\n\t\t\t\t\tthis.extensionManagementServerService.getExtensionManagementServer(\n\t\t\t\t\t\ttoExtension(running2),\n\t\t\t\t\t) === e2.server;\n\t\t\t\tif (isE1Running && isE2Running) {\n\t\t\t\t\treturn e1.displayName.localeCompare(e2.displayName);\n\t\t\t\t}\n\t\t\t\tconst isE1LanguagePackExtension =\n\t\t\t\t\te1.local && isLanguagePackExtension(e1.local.manifest);\n\t\t\t\tconst isE2LanguagePackExtension =\n\t\t\t\t\te2.local && isLanguagePackExtension(e2.local.manifest);\n\t\t\t\tif (!isE1Running && !isE2Running) {\n\t\t\t\t\tif (isE1LanguagePackExtension) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\tif (isE2LanguagePackExtension) {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn e1.displayName.localeCompare(e2.displayName);\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\t(isE1Running && isE2LanguagePackExtension) ||\n\t\t\t\t\t(isE2Running && isE1LanguagePackExtension)\n\t\t\t\t) {\n\t\t\t\t\treturn e1.displayName.localeCompare(e2.displayName);\n\t\t\t\t}\n\t\t\t\treturn isE1Running ? -1 : 1;\n\t\t\t};\n\n\t\t\tconst incompatible: IExtension[] = [];\n\t\t\tconst missingDeps: IExtension[] = [];\n\t\t\tconst deprecated: IExtension[] = [];\n\t\t\tconst outdated: IExtension[] = [];\n\t\t\tconst actionRequired: IExtension[] = [];\n\t\t\tconst noActionRequired: IExtension[] = [];\n\n\t\t\tfor (const e of result) {\n\t\t\t\tif (\n\t\t\t\t\te.enablementState ===\n\t\t\t\t\tEnablementState.DisabledByInvalidExtension\n\t\t\t\t) {\n\t\t\t\t\tincompatible.push(e);\n\t\t\t\t} else if (\n\t\t\t\t\te.enablementState ===\n\t\t\t\t\tEnablementState.DisabledByExtensionDependency\n\t\t\t\t) {\n\t\t\t\t\tmissingDeps.push(e);\n\t\t\t\t} else if (e.deprecationInfo) {\n\t\t\t\t\tdeprecated.push(e);\n\t\t\t\t} else if (e.outdated) {\n\t\t\t\t\toutdated.push(e);\n\t\t\t\t} else if (e.runtimeState) {\n\t\t\t\t\tactionRequired.push(e);\n\t\t\t\t} else {\n\t\t\t\t\tnoActionRequired.push(e);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tresult = [\n\t\t\t\t...incompatible.sort(defaultSort),\n\t\t\t\t...missingDeps.sort(defaultSort),\n\t\t\t\t...deprecated.sort(defaultSort),\n\t\t\t\t...outdated.sort(defaultSort),\n\t\t\t\t...actionRequired.sort(defaultSort),\n\t\t\t\t...noActionRequired.sort(defaultSort),\n\t\t\t];\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate filterOutdatedExtensions(\n\t\tlocal: IExtension[],\n\t\tquery: Query,\n\t\toptions: IQueryOptions,\n\t): IExtension[] {\n\t\tlet { value, includedCategories, excludedCategories } =\n\t\t\tthis.parseCategories(query.value);\n\n\t\tvalue = value\n\t\t\t.replace(/@outdated/g, \"\")\n\t\t\t.replace(/@sort:(\\w+)(-\\w*)?/g, \"\")\n\t\t\t.trim()\n\t\t\t.toLowerCase();\n\n\t\tconst result = local\n\t\t\t.sort((e1, e2) => e1.displayName.localeCompare(e2.displayName))\n\t\t\t.filter(\n\t\t\t\t(extension) =>\n\t\t\t\t\textension.outdated &&\n\t\t\t\t\t(extension.name.toLowerCase().indexOf(value) > -1 ||\n\t\t\t\t\t\textension.displayName.toLowerCase().indexOf(value) >\n\t\t\t\t\t\t\t-1) &&\n\t\t\t\t\tthis.filterExtensionByCategory(\n\t\t\t\t\t\textension,\n\t\t\t\t\t\tincludedCategories,\n\t\t\t\t\t\texcludedCategories,\n\t\t\t\t\t),\n\t\t\t);\n\n\t\treturn this.sortExtensions(result, options);\n\t}\n\n\tprivate filterDisabledExtensions(\n\t\tlocal: IExtension[],\n\t\trunningExtensions: readonly IExtensionDescription[],\n\t\tquery: Query,\n\t\toptions: IQueryOptions,\n\t): IExtension[] {\n\t\tlet { value, includedCategories, excludedCategories } =\n\t\t\tthis.parseCategories(query.value);\n\n\t\tvalue = value\n\t\t\t.replace(/@disabled/g, \"\")\n\t\t\t.replace(/@sort:(\\w+)(-\\w*)?/g, \"\")\n\t\t\t.trim()\n\t\t\t.toLowerCase();\n\n\t\tconst result = local\n\t\t\t.sort((e1, e2) => e1.displayName.localeCompare(e2.displayName))\n\t\t\t.filter(\n\t\t\t\t(e) =>\n\t\t\t\t\trunningExtensions.every(\n\t\t\t\t\t\t(r) =>\n\t\t\t\t\t\t\t!areSameExtensions(\n\t\t\t\t\t\t\t\t{ id: r.identifier.value, uuid: r.uuid },\n\t\t\t\t\t\t\t\te.identifier,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t) &&\n\t\t\t\t\t(e.name.toLowerCase().indexOf(value) > -1 ||\n\t\t\t\t\t\te.displayName.toLowerCase().indexOf(value) > -1) &&\n\t\t\t\t\tthis.filterExtensionByCategory(\n\t\t\t\t\t\te,\n\t\t\t\t\t\tincludedCategories,\n\t\t\t\t\t\texcludedCategories,\n\t\t\t\t\t),\n\t\t\t);\n\n\t\treturn this.sortExtensions(result, options);\n\t}\n\n\tprivate filterEnabledExtensions(\n\t\tlocal: IExtension[],\n\t\trunningExtensions: readonly IExtensionDescription[],\n\t\tquery: Query,\n\t\toptions: IQueryOptions,\n\t): IExtension[] {\n\t\tlet { value, includedCategories, excludedCategories } =\n\t\t\tthis.parseCategories(query.value);\n\n\t\tvalue = value\n\t\t\t? value\n\t\t\t\t\t.replace(/@enabled/g, \"\")\n\t\t\t\t\t.replace(/@sort:(\\w+)(-\\w*)?/g, \"\")\n\t\t\t\t\t.trim()\n\t\t\t\t\t.toLowerCase()\n\t\t\t: \"\";\n\n\t\tlocal = local.filter((e) => !e.isBuiltin);\n\t\tconst result = local\n\t\t\t.sort((e1, e2) => e1.displayName.localeCompare(e2.displayName))\n\t\t\t.filter(\n\t\t\t\t(e) =>\n\t\t\t\t\trunningExtensions.some((r) =>\n\t\t\t\t\t\tareSameExtensions(\n\t\t\t\t\t\t\t{ id: r.identifier.value, uuid: r.uuid },\n\t\t\t\t\t\t\te.identifier,\n\t\t\t\t\t\t),\n\t\t\t\t\t) &&\n\t\t\t\t\t(e.name.toLowerCase().indexOf(value) > -1 ||\n\t\t\t\t\t\te.displayName.toLowerCase().indexOf(value) > -1) &&\n\t\t\t\t\tthis.filterExtensionByCategory(\n\t\t\t\t\t\te,\n\t\t\t\t\t\tincludedCategories,\n\t\t\t\t\t\texcludedCategories,\n\t\t\t\t\t),\n\t\t\t);\n\n\t\treturn this.sortExtensions(result, options);\n\t}\n\n\tprivate filterWorkspaceUnsupportedExtensions(\n\t\tlocal: IExtension[],\n\t\tquery: Query,\n\t\toptions: IQueryOptions,\n\t): IExtension[] {\n\t\t// shows local extensions which are restricted or disabled in the current workspace because of the extension's capability\n\n\t\tconst queryString = query.value; // @sortby is already filtered out\n\n\t\tconst match = queryString.match(\n\t\t\t/^\\s*@workspaceUnsupported(?::(untrusted|virtual)(Partial)?)?(?:\\s+([^\\s]*))?/i,\n\t\t);\n\t\tif (!match) {\n\t\t\treturn [];\n\t\t}\n\t\tconst type = match[1]?.toLowerCase();\n\t\tconst partial = !!match[2];\n\t\tconst nameFilter = match[3]?.toLowerCase();\n\n\t\tif (nameFilter) {\n\t\t\tlocal = local.filter(\n\t\t\t\t(extension) =>\n\t\t\t\t\textension.name.toLowerCase().indexOf(nameFilter) > -1 ||\n\t\t\t\t\textension.displayName.toLowerCase().indexOf(nameFilter) >\n\t\t\t\t\t\t-1,\n\t\t\t);\n\t\t}\n\n\t\tconst hasVirtualSupportType = (\n\t\t\textension: IExtension,\n\t\t\tsupportType: ExtensionVirtualWorkspaceSupportType,\n\t\t) => {\n\t\t\treturn (\n\t\t\t\textension.local &&\n\t\t\t\tthis.extensionManifestPropertiesService.getExtensionVirtualWorkspaceSupportType(\n\t\t\t\t\textension.local.manifest,\n\t\t\t\t) === supportType\n\t\t\t);\n\t\t};\n\n\t\tconst hasRestrictedSupportType = (\n\t\t\textension: IExtension,\n\t\t\tsupportType: ExtensionUntrustedWorkspaceSupportType,\n\t\t) => {\n\t\t\tif (!extension.local) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst enablementState =\n\t\t\t\tthis.extensionEnablementService.getEnablementState(\n\t\t\t\t\textension.local,\n\t\t\t\t);\n\t\t\tif (\n\t\t\t\tenablementState !== EnablementState.EnabledGlobally &&\n\t\t\t\tenablementState !== EnablementState.EnabledWorkspace &&\n\t\t\t\tenablementState !==\n\t\t\t\t\tEnablementState.DisabledByTrustRequirement &&\n\t\t\t\tenablementState !==\n\t\t\t\t\tEnablementState.DisabledByExtensionDependency\n\t\t\t) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tthis.extensionManifestPropertiesService.getExtensionUntrustedWorkspaceSupportType(\n\t\t\t\t\textension.local.manifest,\n\t\t\t\t) === supportType\n\t\t\t) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (supportType === false) {\n\t\t\t\tconst dependencies = getExtensionDependencies(\n\t\t\t\t\tlocal.map((ext) => ext.local!),\n\t\t\t\t\textension.local,\n\t\t\t\t);\n\t\t\t\treturn dependencies.some(\n\t\t\t\t\t(ext) =>\n\t\t\t\t\t\tthis.extensionManifestPropertiesService.getExtensionUntrustedWorkspaceSupportType(\n\t\t\t\t\t\t\text.manifest,\n\t\t\t\t\t\t) === supportType,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tconst inVirtualWorkspace = isVirtualWorkspace(\n\t\t\tthis.workspaceService.getWorkspace(),\n\t\t);\n\t\tconst inRestrictedWorkspace =\n\t\t\t!this.workspaceTrustManagementService.isWorkspaceTrusted();\n\n\t\tif (type === \"virtual\") {\n\t\t\t// show limited and disabled extensions unless disabled because of a untrusted workspace\n\t\t\tlocal = local.filter(\n\t\t\t\t(extension) =>\n\t\t\t\t\tinVirtualWorkspace &&\n\t\t\t\t\thasVirtualSupportType(\n\t\t\t\t\t\textension,\n\t\t\t\t\t\tpartial ? \"limited\" : false,\n\t\t\t\t\t) &&\n\t\t\t\t\t!(\n\t\t\t\t\t\tinRestrictedWorkspace &&\n\t\t\t\t\t\thasRestrictedSupportType(extension, false)\n\t\t\t\t\t),\n\t\t\t);\n\t\t} else if (type === \"untrusted\") {\n\t\t\t// show limited and disabled extensions unless disabled because of a virtual workspace\n\t\t\tlocal = local.filter(\n\t\t\t\t(extension) =>\n\t\t\t\t\thasRestrictedSupportType(\n\t\t\t\t\t\textension,\n\t\t\t\t\t\tpartial ? \"limited\" : false,\n\t\t\t\t\t) &&\n\t\t\t\t\t!(\n\t\t\t\t\t\tinVirtualWorkspace &&\n\t\t\t\t\t\thasVirtualSupportType(extension, false)\n\t\t\t\t\t),\n\t\t\t);\n\t\t} else {\n\t\t\t// show extensions that are restricted or disabled in the current workspace\n\t\t\tlocal = local.filter(\n\t\t\t\t(extension) =>\n\t\t\t\t\t(inVirtualWorkspace &&\n\t\t\t\t\t\t!hasVirtualSupportType(extension, true)) ||\n\t\t\t\t\t(inRestrictedWorkspace &&\n\t\t\t\t\t\t!hasRestrictedSupportType(extension, true)),\n\t\t\t);\n\t\t}\n\t\treturn this.sortExtensions(local, options);\n\t}\n\n\tprivate async filterDeprecatedExtensions(\n\t\tlocal: IExtension[],\n\t\tquery: Query,\n\t\toptions: IQueryOptions,\n\t): Promise<IExtension[]> {\n\t\tconst value = query.value\n\t\t\t.replace(/@deprecated/g, \"\")\n\t\t\t.replace(/@sort:(\\w+)(-\\w*)?/g, \"\")\n\t\t\t.trim()\n\t\t\t.toLowerCase();\n\t\tconst extensionsControlManifest =\n\t\t\tawait this.extensionManagementService.getExtensionsControlManifest();\n\t\tconst deprecatedExtensionIds = Object.keys(\n\t\t\textensionsControlManifest.deprecated,\n\t\t);\n\t\tlocal = local.filter(\n\t\t\t(e) =>\n\t\t\t\tdeprecatedExtensionIds.includes(e.identifier.id) &&\n\t\t\t\t(!value ||\n\t\t\t\t\te.name.toLowerCase().indexOf(value) > -1 ||\n\t\t\t\t\te.displayName.toLowerCase().indexOf(value) > -1),\n\t\t);\n\t\treturn this.sortExtensions(local, options);\n\t}\n\n\tprivate filterRecentlyUpdatedExtensions(\n\t\tlocal: IExtension[],\n\t\tquery: Query,\n\t\toptions: IQueryOptions,\n\t): IExtension[] {\n\t\tlet { value, includedCategories, excludedCategories } =\n\t\t\tthis.parseCategories(query.value);\n\t\tconst currentTime = Date.now();\n\t\tlocal = local.filter(\n\t\t\t(e) =>\n\t\t\t\t!e.isBuiltin &&\n\t\t\t\t!e.outdated &&\n\t\t\t\te.local?.updated &&\n\t\t\t\te.local?.installedTimestamp !== undefined &&\n\t\t\t\tcurrentTime - e.local.installedTimestamp <\n\t\t\t\t\tExtensionsListView.RECENT_UPDATE_DURATION,\n\t\t);\n\n\t\tvalue = value\n\t\t\t.replace(/@recentlyUpdated/g, \"\")\n\t\t\t.replace(/@sort:(\\w+)(-\\w*)?/g, \"\")\n\t\t\t.trim()\n\t\t\t.toLowerCase();\n\n\t\tconst result = local.filter(\n\t\t\t(e) =>\n\t\t\t\t(e.name.toLowerCase().indexOf(value) > -1 ||\n\t\t\t\t\te.displayName.toLowerCase().indexOf(value) > -1) &&\n\t\t\t\tthis.filterExtensionByCategory(\n\t\t\t\t\te,\n\t\t\t\t\tincludedCategories,\n\t\t\t\t\texcludedCategories,\n\t\t\t\t),\n\t\t);\n\n\t\toptions.sortBy = options.sortBy ?? LocalSortBy.UpdateDate;\n\n\t\treturn this.sortExtensions(result, options);\n\t}\n\n\tprivate filterExtensionsByFeature(\n\t\tlocal: IExtension[],\n\t\tquery: Query,\n\t\toptions: IQueryOptions,\n\t): IExtension[] {\n\t\tconst value = query.value.replace(/@feature:/g, \"\").trim();\n\t\tconst featureId = value.split(\" \")[0];\n\t\tconst feature = Registry.as<IExtensionFeaturesRegistry>(\n\t\t\tExtensions.ExtensionFeaturesRegistry,\n\t\t).getExtensionFeature(featureId);\n\t\tif (!feature) {\n\t\t\treturn [];\n\t\t}\n\t\tconst renderer = feature.renderer\n\t\t\t? this.instantiationService.createInstance<IExtensionFeatureRenderer>(\n\t\t\t\t\tfeature.renderer,\n\t\t\t\t)\n\t\t\t: undefined;\n\t\ttry {\n\t\t\tconst result = local.filter((e) => {\n\t\t\t\tif (!e.local) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn (\n\t\t\t\t\trenderer?.shouldRender(e.local.manifest) ||\n\t\t\t\t\tthis.extensionFeaturesManagementService.getAccessData(\n\t\t\t\t\t\tnew ExtensionIdentifier(e.identifier.id),\n\t\t\t\t\t\tfeatureId,\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t});\n\t\t\treturn this.sortExtensions(result, options);\n\t\t} finally {\n\t\t\trenderer?.dispose();\n\t\t}\n\t}\n\n\tprivate mergeAddedExtensions(\n\t\textensions: IExtension[],\n\t\tnewExtensions: IExtension[],\n\t): IExtension[] | undefined {\n\t\tconst oldExtensions = [...extensions];\n\t\tconst findPreviousExtensionIndex = (from: number): number => {\n\t\t\tlet index = -1;\n\t\t\tconst previousExtensionInNew = newExtensions[from];\n\t\t\tif (previousExtensionInNew) {\n\t\t\t\tindex = oldExtensions.findIndex((e) =>\n\t\t\t\t\tareSameExtensions(\n\t\t\t\t\t\te.identifier,\n\t\t\t\t\t\tpreviousExtensionInNew.identifier,\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t\tif (index === -1) {\n\t\t\t\t\treturn findPreviousExtensionIndex(from - 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn index;\n\t\t};\n\n\t\tlet hasChanged = false;\n\t\tfor (let index = 0; index < newExtensions.length; index++) {\n\t\t\tconst extension = newExtensions[index];\n\t\t\tif (\n\t\t\t\textensions.every(\n\t\t\t\t\t(r) =>\n\t\t\t\t\t\t!areSameExtensions(r.identifier, extension.identifier),\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\thasChanged = true;\n\t\t\t\textensions.splice(\n\t\t\t\t\tfindPreviousExtensionIndex(index - 1) + 1,\n\t\t\t\t\t0,\n\t\t\t\t\textension,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\treturn hasChanged ? extensions : undefined;\n\t}\n\n\tprivate async queryGallery(\n\t\tquery: Query,\n\t\toptions: IGalleryQueryOptions,\n\t\ttoken: CancellationToken,\n\t): Promise<IPagedModel<IExtension>> {\n\t\tconst hasUserDefinedSortOrder = options.sortBy !== undefined;\n\t\tif (!hasUserDefinedSortOrder && !query.value.trim()) {\n\t\t\toptions.sortBy = GallerySortBy.InstallCount;\n\t\t}\n\n\t\tif (this.isRecommendationsQuery(query)) {\n\t\t\treturn this.queryRecommendations(query, options, token);\n\t\t}\n\n\t\tconst text = query.value;\n\n\t\tif (/\\bext:([^\\s]+)\\b/g.test(text)) {\n\t\t\toptions.text = text;\n\t\t\toptions.source = \"file-extension-tags\";\n\t\t\treturn this.extensionsWorkbenchService\n\t\t\t\t.queryGallery(options, token)\n\t\t\t\t.then((pager) => this.getPagedModel(pager));\n\t\t}\n\n\t\tlet preferredResults: string[] = [];\n\t\tif (text) {\n\t\t\toptions.text = text.substring(0, 350);\n\t\t\toptions.source = \"searchText\";\n\t\t\tif (!hasUserDefinedSortOrder) {\n\t\t\t\tconst manifest =\n\t\t\t\t\tawait this.extensionManagementService.getExtensionsControlManifest();\n\t\t\t\tconst search = manifest.search;\n\t\t\t\tif (Array.isArray(search)) {\n\t\t\t\t\tfor (const s of search) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\ts.query &&\n\t\t\t\t\t\t\ts.query.toLowerCase() === text.toLowerCase() &&\n\t\t\t\t\t\t\tArray.isArray(s.preferredResults)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tpreferredResults = s.preferredResults;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\toptions.source = \"viewlet\";\n\t\t}\n\n\t\tconst pager = await this.extensionsWorkbenchService.queryGallery(\n\t\t\toptions,\n\t\t\ttoken,\n\t\t);\n\n\t\tlet positionToUpdate = 0;\n\t\tfor (const preferredResult of preferredResults) {\n\t\t\tfor (let j = positionToUpdate; j < pager.firstPage.length; j++) {\n\t\t\t\tif (\n\t\t\t\t\tareSameExtensions(pager.firstPage[j].identifier, {\n\t\t\t\t\t\tid: preferredResult,\n\t\t\t\t\t})\n\t\t\t\t) {\n\t\t\t\t\tif (positionToUpdate !== j) {\n\t\t\t\t\t\tconst preferredExtension = pager.firstPage.splice(\n\t\t\t\t\t\t\tj,\n\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t)[0];\n\t\t\t\t\t\tpager.firstPage.splice(\n\t\t\t\t\t\t\tpositionToUpdate,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\tpreferredExtension,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tpositionToUpdate++;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this.getPagedModel(pager);\n\t}\n\n\tprivate sortExtensions(\n\t\textensions: IExtension[],\n\t\toptions: IQueryOptions,\n\t): IExtension[] {\n\t\tswitch (options.sortBy) {\n\t\t\tcase GallerySortBy.InstallCount:\n\t\t\t\textensions = extensions.sort((e1, e2) =>\n\t\t\t\t\ttypeof e2.installCount === \"number\" &&\n\t\t\t\t\ttypeof e1.installCount === \"number\"\n\t\t\t\t\t\t? e2.installCount - e1.installCount\n\t\t\t\t\t\t: Number.NaN,\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase LocalSortBy.UpdateDate:\n\t\t\t\textensions = extensions.sort((e1, e2) =>\n\t\t\t\t\ttypeof e2.local?.installedTimestamp === \"number\" &&\n\t\t\t\t\ttypeof e1.local?.installedTimestamp === \"number\"\n\t\t\t\t\t\t? e2.local.installedTimestamp -\n\t\t\t\t\t\t\te1.local.installedTimestamp\n\t\t\t\t\t\t: typeof e2.local?.installedTimestamp === \"number\"\n\t\t\t\t\t\t\t? 1\n\t\t\t\t\t\t\t: typeof e1.local?.installedTimestamp === \"number\"\n\t\t\t\t\t\t\t\t? -1\n\t\t\t\t\t\t\t\t: Number.NaN,\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tcase GallerySortBy.AverageRating:\n\t\t\tcase GallerySortBy.WeightedRating:\n\t\t\t\textensions = extensions.sort((e1, e2) =>\n\t\t\t\t\ttypeof e2.rating === \"number\" &&\n\t\t\t\t\ttypeof e1.rating === \"number\"\n\t\t\t\t\t\t? e2.rating - e1.rating\n\t\t\t\t\t\t: Number.NaN,\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\textensions = extensions.sort((e1, e2) =>\n\t\t\t\t\te1.displayName.localeCompare(e2.displayName),\n\t\t\t\t);\n\t\t\t\tbreak;\n\t\t}\n\t\tif (options.sortOrder === SortOrder.Descending) {\n\t\t\textensions = extensions.reverse();\n\t\t}\n\t\treturn extensions;\n\t}\n\n\tprivate isRecommendationsQuery(query: Query): boolean {\n\t\treturn (\n\t\t\tExtensionsListView.isWorkspaceRecommendedExtensionsQuery(\n\t\t\t\tquery.value,\n\t\t\t) ||\n\t\t\tExtensionsListView.isKeymapsRecommendedExtensionsQuery(\n\t\t\t\tquery.value,\n\t\t\t) ||\n\t\t\tExtensionsListView.isLanguageRecommendedExtensionsQuery(\n\t\t\t\tquery.value,\n\t\t\t) ||\n\t\t\tExtensionsListView.isExeRecommendedExtensionsQuery(query.value) ||\n\t\t\tExtensionsListView.isRemoteRecommendedExtensionsQuery(\n\t\t\t\tquery.value,\n\t\t\t) ||\n\t\t\t/@recommended:all/i.test(query.value) ||\n\t\t\tExtensionsListView.isSearchRecommendedExtensionsQuery(\n\t\t\t\tquery.value,\n\t\t\t) ||\n\t\t\tExtensionsListView.isRecommendedExtensionsQuery(query.value)\n\t\t);\n\t}\n\n\tprivate async queryRecommendations(\n\t\tquery: Query,\n\t\toptions: IQueryOptions,\n\t\ttoken: CancellationToken,\n\t): Promise<IPagedModel<IExtension>> {\n\t\t// Workspace recommendations\n\t\tif (\n\t\t\tExtensionsListView.isWorkspaceRecommendedExtensionsQuery(\n\t\t\t\tquery.value,\n\t\t\t)\n\t\t) {\n\t\t\treturn this.getWorkspaceRecommendationsModel(query, options, token);\n\t\t}\n\n\t\t// Keymap recommendations\n\t\tif (\n\t\t\tExtensionsListView.isKeymapsRecommendedExtensionsQuery(query.value)\n\t\t) {\n\t\t\treturn this.getKeymapRecommendationsModel(query, options, token);\n\t\t}\n\n\t\t// Language recommendations\n\t\tif (\n\t\t\tExtensionsListView.isLanguageRecommendedExtensionsQuery(query.value)\n\t\t) {\n\t\t\treturn this.getLanguageRecommendationsModel(query, options, token);\n\t\t}\n\n\t\t// Exe recommendations\n\t\tif (ExtensionsListView.isExeRecommendedExtensionsQuery(query.value)) {\n\t\t\treturn this.getExeRecommendationsModel(query, options, token);\n\t\t}\n\n\t\t// Remote recommendations\n\t\tif (\n\t\t\tExtensionsListView.isRemoteRecommendedExtensionsQuery(query.value)\n\t\t) {\n\t\t\treturn this.getRemoteRecommendationsModel(query, options, token);\n\t\t}\n\n\t\t// All recommendations\n\t\tif (/@recommended:all/i.test(query.value)) {\n\t\t\treturn this.getAllRecommendationsModel(options, token);\n\t\t}\n\n\t\t// Search recommendations\n\t\tif (\n\t\t\tExtensionsListView.isSearchRecommendedExtensionsQuery(\n\t\t\t\tquery.value,\n\t\t\t) ||\n\t\t\t(ExtensionsListView.isRecommendedExtensionsQuery(query.value) &&\n\t\t\t\toptions.sortBy !== undefined)\n\t\t) {\n\t\t\treturn this.searchRecommendations(query, options, token);\n\t\t}\n\n\t\t// Other recommendations\n\t\tif (ExtensionsListView.isRecommendedExtensionsQuery(query.value)) {\n\t\t\treturn this.getOtherRecommendationsModel(query, options, token);\n\t\t}\n\n\t\treturn new PagedModel([]);\n\t}\n\n\tprotected async getInstallableRecommendations(\n\t\trecommendations: Array<string | URI>,\n\t\toptions: IQueryOptions,\n\t\ttoken: CancellationToken,\n\t): Promise<IExtension[]> {\n\t\tconst result: IExtension[] = [];\n\t\tif (recommendations.length) {\n\t\t\tconst galleryExtensions: string[] = [];\n\t\t\tconst resourceExtensions: URI[] = [];\n\t\t\tfor (const recommendation of recommendations) {\n\t\t\t\tif (typeof recommendation === \"string\") {\n\t\t\t\t\tgalleryExtensions.push(recommendation);\n\t\t\t\t} else {\n\t\t\t\t\tresourceExtensions.push(recommendation);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (galleryExtensions.length) {\n\t\t\t\ttry {\n\t\t\t\t\tconst extensions =\n\t\t\t\t\t\tawait this.extensionsWorkbenchService.getExtensions(\n\t\t\t\t\t\t\tgalleryExtensions.map((id) => ({ id })),\n\t\t\t\t\t\t\t{ source: options.source },\n\t\t\t\t\t\t\ttoken,\n\t\t\t\t\t\t);\n\t\t\t\t\tfor (const extension of extensions) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\textension.gallery &&\n\t\t\t\t\t\t\t!extension.deprecationInfo &&\n\t\t\t\t\t\t\t(await this.extensionManagementService.canInstall(\n\t\t\t\t\t\t\t\textension.gallery,\n\t\t\t\t\t\t\t))\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tresult.push(extension);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tif (\n\t\t\t\t\t\t!resourceExtensions.length ||\n\t\t\t\t\t\t!this.isOfflineError(error)\n\t\t\t\t\t) {\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (resourceExtensions.length) {\n\t\t\t\tconst extensions =\n\t\t\t\t\tawait this.extensionsWorkbenchService.getResourceExtensions(\n\t\t\t\t\t\tresourceExtensions,\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t);\n\t\t\t\tfor (const extension of extensions) {\n\t\t\t\t\tif (\n\t\t\t\t\t\tawait this.extensionsWorkbenchService.canInstall(\n\t\t\t\t\t\t\textension,\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tresult.push(extension);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected async getWorkspaceRecommendations(): Promise<\n\t\tArray<string | URI>\n\t> {\n\t\tconst recommendations =\n\t\t\tawait this.extensionRecommendationsService.getWorkspaceRecommendations();\n\t\tconst { important } =\n\t\t\tawait this.extensionRecommendationsService.getConfigBasedRecommendations();\n\t\tfor (const configBasedRecommendation of important) {\n\t\t\tif (\n\t\t\t\t!recommendations.find(\n\t\t\t\t\t(extensionId) => extensionId === configBasedRecommendation,\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\trecommendations.push(configBasedRecommendation);\n\t\t\t}\n\t\t}\n\t\treturn recommendations;\n\t}\n\n\tprivate async getWorkspaceRecommendationsModel(\n\t\tquery: Query,\n\t\toptions: IQueryOptions,\n\t\ttoken: CancellationToken,\n\t): Promise<IPagedModel<IExtension>> {\n\t\tconst recommendations = await this.getWorkspaceRecommendations();\n\t\tconst installableRecommendations =\n\t\t\tawait this.getInstallableRecommendations(\n\t\t\t\trecommendations,\n\t\t\t\t{ ...options, source: \"recommendations-workspace\" },\n\t\t\t\ttoken,\n\t\t\t);\n\t\treturn new PagedModel(installableRecommendations);\n\t}\n\n\tprivate async getKeymapRecommendationsModel(\n\t\tquery: Query,\n\t\toptions: IQueryOptions,\n\t\ttoken: CancellationToken,\n\t): Promise<IPagedModel<IExtension>> {\n\t\tconst value = query.value\n\t\t\t.replace(/@recommended:keymaps/g, \"\")\n\t\t\t.trim()\n\t\t\t.toLowerCase();\n\t\tconst recommendations =\n\t\t\tthis.extensionRecommendationsService.getKeymapRecommendations();\n\t\tconst installableRecommendations = (\n\t\t\tawait this.getInstallableRecommendations(\n\t\t\t\trecommendations,\n\t\t\t\t{ ...options, source: \"recommendations-keymaps\" },\n\t\t\t\ttoken,\n\t\t\t)\n\t\t).filter(\n\t\t\t(extension) =>\n\t\t\t\textension.identifier.id.toLowerCase().indexOf(value) > -1,\n\t\t);\n\t\treturn new PagedModel(installableRecommendations);\n\t}\n\n\tprivate async getLanguageRecommendationsModel(\n\t\tquery: Query,\n\t\toptions: IQueryOptions,\n\t\ttoken: CancellationToken,\n\t): Promise<IPagedModel<IExtension>> {\n\t\tconst value = query.value\n\t\t\t.replace(/@recommended:languages/g, \"\")\n\t\t\t.trim()\n\t\t\t.toLowerCase();\n\t\tconst recommendations =\n\t\t\tthis.extensionRecommendationsService.getLanguageRecommendations();\n\t\tconst installableRecommendations = (\n\t\t\tawait this.getInstallableRecommendations(\n\t\t\t\trecommendations,\n\t\t\t\t{ ...options, source: \"recommendations-languages\" },\n\t\t\t\ttoken,\n\t\t\t)\n\t\t).filter(\n\t\t\t(extension) =>\n\t\t\t\textension.identifier.id.toLowerCase().indexOf(value) > -1,\n\t\t);\n\t\treturn new PagedModel(installableRecommendations);\n\t}\n\n\tprivate async getRemoteRecommendationsModel(\n\t\tquery: Query,\n\t\toptions: IQueryOptions,\n\t\ttoken: CancellationToken,\n\t): Promise<IPagedModel<IExtension>> {\n\t\tconst value = query.value\n\t\t\t.replace(/@recommended:remotes/g, \"\")\n\t\t\t.trim()\n\t\t\t.toLowerCase();\n\t\tconst recommendations =\n\t\t\tthis.extensionRecommendationsService.getRemoteRecommendations();\n\t\tconst installableRecommendations = (\n\t\t\tawait this.getInstallableRecommendations(\n\t\t\t\trecommendations,\n\t\t\t\t{ ...options, source: \"recommendations-remotes\" },\n\t\t\t\ttoken,\n\t\t\t)\n\t\t).filter(\n\t\t\t(extension) =>\n\t\t\t\textension.identifier.id.toLowerCase().indexOf(value) > -1,\n\t\t);\n\t\treturn new PagedModel(installableRecommendations);\n\t}\n\n\tprivate async getExeRecommendationsModel(\n\t\tquery: Query,\n\t\toptions: IQueryOptions,\n\t\ttoken: CancellationToken,\n\t): Promise<IPagedModel<IExtension>> {\n\t\tconst exe = query.value.replace(/@exe:/g, \"\").trim().toLowerCase();\n\t\tconst { important, others } =\n\t\t\tawait this.extensionRecommendationsService.getExeBasedRecommendations(\n\t\t\t\texe.startsWith('\"') ? exe.substring(1, exe.length - 1) : exe,\n\t\t\t);\n\t\tconst installableRecommendations =\n\t\t\tawait this.getInstallableRecommendations(\n\t\t\t\t[...important, ...others],\n\t\t\t\t{ ...options, source: \"recommendations-exe\" },\n\t\t\t\ttoken,\n\t\t\t);\n\t\treturn new PagedModel(installableRecommendations);\n\t}\n\n\tprivate async getOtherRecommendationsModel(\n\t\tquery: Query,\n\t\toptions: IQueryOptions,\n\t\ttoken: CancellationToken,\n\t): Promise<IPagedModel<IExtension>> {\n\t\tconst otherRecommendations = await this.getOtherRecommendations();\n\t\tconst installableRecommendations =\n\t\t\tawait this.getInstallableRecommendations(\n\t\t\t\totherRecommendations,\n\t\t\t\t{\n\t\t\t\t\t...options,\n\t\t\t\t\tsource: \"recommendations-other\",\n\t\t\t\t\tsortBy: undefined,\n\t\t\t\t},\n\t\t\t\ttoken,\n\t\t\t);\n\t\tconst result = coalesce(\n\t\t\totherRecommendations.map((id) =>\n\t\t\t\tinstallableRecommendations.find((i) =>\n\t\t\t\t\tareSameExtensions(i.identifier, { id }),\n\t\t\t\t),\n\t\t\t),\n\t\t);\n\t\treturn new PagedModel(result);\n\t}\n\n\tprivate async getOtherRecommendations(): Promise<string[]> {\n\t\tconst local = (\n\t\t\tawait this.extensionsWorkbenchService.queryLocal(\n\t\t\t\tthis.options.server,\n\t\t\t)\n\t\t).map((e) => e.identifier.id.toLowerCase());\n\t\tconst workspaceRecommendations = (\n\t\t\tawait this.getWorkspaceRecommendations()\n\t\t).map((extensionId) =>\n\t\t\tisString(extensionId) ? extensionId.toLowerCase() : extensionId,\n\t\t);\n\n\t\treturn distinct(\n\t\t\t(\n\t\t\t\tawait Promise.all([\n\t\t\t\t\t// Order is important\n\t\t\t\t\tthis.extensionRecommendationsService.getImportantRecommendations(),\n\t\t\t\t\tthis.extensionRecommendationsService.getFileBasedRecommendations(),\n\t\t\t\t\tthis.extensionRecommendationsService.getOtherRecommendations(),\n\t\t\t\t])\n\t\t\t)\n\t\t\t\t.flat()\n\t\t\t\t.filter(\n\t\t\t\t\t(extensionId) =>\n\t\t\t\t\t\t!local.includes(extensionId.toLowerCase()) &&\n\t\t\t\t\t\t!workspaceRecommendations.includes(\n\t\t\t\t\t\t\textensionId.toLowerCase(),\n\t\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t(extensionId) => extensionId.toLowerCase(),\n\t\t);\n\t}\n\n\t// Get All types of recommendations, trimmed to show a max of 8 at any given time\n\tprivate async getAllRecommendationsModel(\n\t\toptions: IQueryOptions,\n\t\ttoken: CancellationToken,\n\t): Promise<IPagedModel<IExtension>> {\n\t\tconst localExtensions =\n\t\t\tawait this.extensionsWorkbenchService.queryLocal(\n\t\t\t\tthis.options.server,\n\t\t\t);\n\t\tconst localExtensionIds = localExtensions.map((e) =>\n\t\t\te.identifier.id.toLowerCase(),\n\t\t);\n\n\t\tconst allRecommendations = distinct(\n\t\t\t(\n\t\t\t\tawait Promise.all([\n\t\t\t\t\t// Order is important\n\t\t\t\t\tthis.getWorkspaceRecommendations(),\n\t\t\t\t\tthis.extensionRecommendationsService.getImportantRecommendations(),\n\t\t\t\t\tthis.extensionRecommendationsService.getFileBasedRecommendations(),\n\t\t\t\t\tthis.extensionRecommendationsService.getOtherRecommendations(),\n\t\t\t\t])\n\t\t\t)\n\t\t\t\t.flat()\n\t\t\t\t.filter((extensionId) => {\n\t\t\t\t\tif (isString(extensionId)) {\n\t\t\t\t\t\treturn !localExtensionIds.includes(\n\t\t\t\t\t\t\textensionId.toLowerCase(),\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn !localExtensions.some(\n\t\t\t\t\t\t(localExtension) =>\n\t\t\t\t\t\t\tlocalExtension.local &&\n\t\t\t\t\t\t\tthis.uriIdentityService.extUri.isEqual(\n\t\t\t\t\t\t\t\tlocalExtension.local.location,\n\t\t\t\t\t\t\t\textensionId,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t}),\n\t\t);\n\n\t\tconst installableRecommendations =\n\t\t\tawait this.getInstallableRecommendations(\n\t\t\t\tallRecommendations,\n\t\t\t\t{\n\t\t\t\t\t...options,\n\t\t\t\t\tsource: \"recommendations-all\",\n\t\t\t\t\tsortBy: undefined,\n\t\t\t\t},\n\t\t\t\ttoken,\n\t\t\t);\n\n\t\tconst result: IExtension[] = [];\n\t\tfor (\n\t\t\tlet i = 0;\n\t\t\ti < installableRecommendations.length && result.length < 8;\n\t\t\ti++\n\t\t) {\n\t\t\tconst recommendation = allRecommendations[i];\n\t\t\tif (isString(recommendation)) {\n\t\t\t\tconst extension = installableRecommendations.find((extension) =>\n\t\t\t\t\tareSameExtensions(extension.identifier, {\n\t\t\t\t\t\tid: recommendation,\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t\tif (extension) {\n\t\t\t\t\tresult.push(extension);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst extension = installableRecommendations.find(\n\t\t\t\t\t(extension) =>\n\t\t\t\t\t\textension.resourceExtension &&\n\t\t\t\t\t\tthis.uriIdentityService.extUri.isEqual(\n\t\t\t\t\t\t\textension.resourceExtension.location,\n\t\t\t\t\t\t\trecommendation,\n\t\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t\tif (extension) {\n\t\t\t\t\tresult.push(extension);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn new PagedModel(result);\n\t}\n\n\tprivate async searchRecommendations(\n\t\tquery: Query,\n\t\toptions: IQueryOptions,\n\t\ttoken: CancellationToken,\n\t): Promise<IPagedModel<IExtension>> {\n\t\tconst value = query.value\n\t\t\t.replace(/@recommended/g, \"\")\n\t\t\t.trim()\n\t\t\t.toLowerCase();\n\t\tconst recommendations = distinct([\n\t\t\t...(await this.getWorkspaceRecommendations()),\n\t\t\t...(await this.getOtherRecommendations()),\n\t\t]);\n\t\tconst installableRecommendations = (\n\t\t\tawait this.getInstallableRecommendations(\n\t\t\t\trecommendations,\n\t\t\t\t{ ...options, source: \"recommendations\", sortBy: undefined },\n\t\t\t\ttoken,\n\t\t\t)\n\t\t).filter(\n\t\t\t(extension) =>\n\t\t\t\textension.identifier.id.toLowerCase().indexOf(value) > -1,\n\t\t);\n\t\treturn new PagedModel(\n\t\t\tthis.sortExtensions(installableRecommendations, options),\n\t\t);\n\t}\n\n\tprivate setModel(\n\t\tmodel: IPagedModel<IExtension>,\n\t\terror?: any,\n\t\tdonotResetScrollTop?: boolean,\n\t) {\n\t\tif (this.list) {\n\t\t\tthis.list.model = new DelayedPagedModel(model);\n\t\t\tif (!donotResetScrollTop) {\n\t\t\t\tthis.list.scrollTop = 0;\n\t\t\t}\n\t\t\tthis.updateBody(error);\n\t\t}\n\t\tif (this.badge) {\n\t\t\tthis.badge.setCount(this.count());\n\t\t}\n\t}\n\n\tprivate updateModel(model: IPagedModel<IExtension>) {\n\t\tif (this.list) {\n\t\t\tthis.list.model = new DelayedPagedModel(model);\n\t\t\tthis.updateBody();\n\t\t}\n\t\tif (this.badge) {\n\t\t\tthis.badge.setCount(this.count());\n\t\t}\n\t}\n\n\tprivate updateBody(error?: any): void {\n\t\tif (this.bodyTemplate) {\n\t\t\tconst count = this.count();\n\t\t\tthis.bodyTemplate.extensionsList.classList.toggle(\n\t\t\t\t\"hidden\",\n\t\t\t\tcount === 0,\n\t\t\t);\n\t\t\tthis.bodyTemplate.messageContainer.classList.toggle(\n\t\t\t\t\"hidden\",\n\t\t\t\tcount > 0,\n\t\t\t);\n\n\t\t\tif (count === 0 && this.isBodyVisible()) {\n\t\t\t\tif (error) {\n\t\t\t\t\tif (this.isOfflineError(error)) {\n\t\t\t\t\t\tthis.bodyTemplate.messageSeverityIcon.className =\n\t\t\t\t\t\t\tSeverityIcon.className(Severity.Warning);\n\t\t\t\t\t\tthis.bodyTemplate.messageBox.textContent = localize(\n\t\t\t\t\t\t\t\"offline error\",\n\t\t\t\t\t\t\t\"Unable to search the Marketplace when offline, please check your network connection.\",\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.bodyTemplate.messageSeverityIcon.className =\n\t\t\t\t\t\t\tSeverityIcon.className(Severity.Error);\n\t\t\t\t\t\tthis.bodyTemplate.messageBox.textContent = localize(\n\t\t\t\t\t\t\t\"error\",\n\t\t\t\t\t\t\t\"Error while fetching extensions. {0}\",\n\t\t\t\t\t\t\tgetErrorMessage(error),\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.bodyTemplate.messageSeverityIcon.className = \"\";\n\t\t\t\t\tthis.bodyTemplate.messageBox.textContent = localize(\n\t\t\t\t\t\t\"no extensions found\",\n\t\t\t\t\t\t\"No extensions found.\",\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\talert(this.bodyTemplate.messageBox.textContent);\n\t\t\t}\n\t\t}\n\n\t\tthis.updateSize();\n\t}\n\n\tprivate isOfflineError(error: Error): boolean {\n\t\tif (error instanceof ExtensionGalleryError) {\n\t\t\treturn error.code === ExtensionGalleryErrorCode.Offline;\n\t\t}\n\t\treturn isOfflineError(error);\n\t}\n\n\tprotected updateSize() {\n\t\tif (this.options.flexibleHeight) {\n\t\t\tthis.maximumBodySize = this.list?.model.length\n\t\t\t\t? Number.POSITIVE_INFINITY\n\t\t\t\t: 0;\n\t\t\tthis.storageService.store(\n\t\t\t\t`${this.id}.size`,\n\t\t\t\tthis.list?.model.length || 0,\n\t\t\t\tStorageScope.PROFILE,\n\t\t\t\tStorageTarget.MACHINE,\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate openExtension(\n\t\textension: IExtension,\n\t\toptions: {\n\t\t\tsideByside?: boolean;\n\t\t\tpreserveFocus?: boolean;\n\t\t\tpinned?: boolean;\n\t\t},\n\t): void {\n\t\textension =\n\t\t\tthis.extensionsWorkbenchService.local.filter((e) =>\n\t\t\t\tareSameExtensions(e.identifier, extension.identifier),\n\t\t\t)[0] || extension;\n\t\tthis.extensionsWorkbenchService\n\t\t\t.open(extension, options)\n\t\t\t.then(undefined, (err) => this.onError(err));\n\t}\n\n\tprivate onError(err: any): void {\n\t\tif (isCancellationError(err)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst message = (err && err.message) || \"\";\n\n\t\tif (/ECONNREFUSED/.test(message)) {\n\t\t\tconst error = createErrorWithActions(\n\t\t\t\tlocalize(\n\t\t\t\t\t\"suggestProxyError\",\n\t\t\t\t\t\"Marketplace returned 'ECONNREFUSED'. Please check the 'http.proxy' setting.\",\n\t\t\t\t),\n\t\t\t\t[\n\t\t\t\t\tnew Action(\n\t\t\t\t\t\t\"open user settings\",\n\t\t\t\t\t\tlocalize(\"open user settings\", \"Open User Settings\"),\n\t\t\t\t\t\tundefined,\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t() => this.preferencesService.openUserSettings(),\n\t\t\t\t\t),\n\t\t\t\t],\n\t\t\t);\n\n\t\t\tthis.notificationService.error(error);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.notificationService.error(err);\n\t}\n\n\tprivate getPagedModel(\n\t\targ: IPager<IExtension> | IExtension[],\n\t): IPagedModel<IExtension> {\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn new PagedModel(arg);\n\t\t}\n\t\tconst pager = {\n\t\t\ttotal: arg.total,\n\t\t\tpageSize: arg.pageSize,\n\t\t\tfirstPage: arg.firstPage,\n\t\t\tgetPage: (\n\t\t\t\tpageIndex: number,\n\t\t\t\tcancellationToken: CancellationToken,\n\t\t\t) => arg.getPage(pageIndex, cancellationToken),\n\t\t};\n\t\treturn new PagedModel(pager);\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tif (this.queryRequest) {\n\t\t\tthis.queryRequest.request.cancel();\n\t\t\tthis.queryRequest = null;\n\t\t}\n\t\tif (this.queryResult) {\n\t\t\tthis.queryResult.disposables.dispose();\n\t\t\tthis.queryResult = undefined;\n\t\t}\n\t\tthis.list = null;\n\t}\n\n\tstatic isLocalExtensionsQuery(query: string, sortBy?: string): boolean {\n\t\treturn (\n\t\t\tthis.isInstalledExtensionsQuery(query) ||\n\t\t\tthis.isSearchInstalledExtensionsQuery(query) ||\n\t\t\tthis.isOutdatedExtensionsQuery(query) ||\n\t\t\tthis.isEnabledExtensionsQuery(query) ||\n\t\t\tthis.isDisabledExtensionsQuery(query) ||\n\t\t\tthis.isBuiltInExtensionsQuery(query) ||\n\t\t\tthis.isSearchBuiltInExtensionsQuery(query) ||\n\t\t\tthis.isBuiltInGroupExtensionsQuery(query) ||\n\t\t\tthis.isSearchDeprecatedExtensionsQuery(query) ||\n\t\t\tthis.isSearchWorkspaceUnsupportedExtensionsQuery(query) ||\n\t\t\tthis.isSearchRecentlyUpdatedQuery(query) ||\n\t\t\tthis.isSearchExtensionUpdatesQuery(query) ||\n\t\t\tthis.isSortInstalledExtensionsQuery(query, sortBy) ||\n\t\t\tthis.isFeatureExtensionsQuery(query)\n\t\t);\n\t}\n\n\tstatic isSearchBuiltInExtensionsQuery(query: string): boolean {\n\t\treturn /@builtin\\s.+/i.test(query);\n\t}\n\n\tstatic isBuiltInExtensionsQuery(query: string): boolean {\n\t\treturn /^\\s*@builtin$/i.test(query.trim());\n\t}\n\n\tstatic isBuiltInGroupExtensionsQuery(query: string): boolean {\n\t\treturn /^\\s*@builtin:.+$/i.test(query.trim());\n\t}\n\n\tstatic isSearchWorkspaceUnsupportedExtensionsQuery(query: string): boolean {\n\t\treturn /^\\s*@workspaceUnsupported(:(untrusted|virtual)(Partial)?)?(\\s|$)/i.test(\n\t\t\tquery,\n\t\t);\n\t}\n\n\tstatic isInstalledExtensionsQuery(query: string): boolean {\n\t\treturn /@installed$/i.test(query);\n\t}\n\n\tstatic isSearchInstalledExtensionsQuery(query: string): boolean {\n\t\treturn (\n\t\t\t/@installed\\s./i.test(query) || this.isFeatureExtensionsQuery(query)\n\t\t);\n\t}\n\n\tstatic isOutdatedExtensionsQuery(query: string): boolean {\n\t\treturn /@outdated/i.test(query);\n\t}\n\n\tstatic isEnabledExtensionsQuery(query: string): boolean {\n\t\treturn /@enabled/i.test(query);\n\t}\n\n\tstatic isDisabledExtensionsQuery(query: string): boolean {\n\t\treturn /@disabled/i.test(query);\n\t}\n\n\tstatic isSearchDeprecatedExtensionsQuery(query: string): boolean {\n\t\treturn /@deprecated\\s?.*/i.test(query);\n\t}\n\n\tstatic isRecommendedExtensionsQuery(query: string): boolean {\n\t\treturn /^@recommended$/i.test(query.trim());\n\t}\n\n\tstatic isSearchRecommendedExtensionsQuery(query: string): boolean {\n\t\treturn /@recommended\\s.+/i.test(query);\n\t}\n\n\tstatic isWorkspaceRecommendedExtensionsQuery(query: string): boolean {\n\t\treturn /@recommended:workspace/i.test(query);\n\t}\n\n\tstatic isExeRecommendedExtensionsQuery(query: string): boolean {\n\t\treturn /@exe:.+/i.test(query);\n\t}\n\n\tstatic isRemoteRecommendedExtensionsQuery(query: string): boolean {\n\t\treturn /@recommended:remotes/i.test(query);\n\t}\n\n\tstatic isKeymapsRecommendedExtensionsQuery(query: string): boolean {\n\t\treturn /@recommended:keymaps/i.test(query);\n\t}\n\n\tstatic isLanguageRecommendedExtensionsQuery(query: string): boolean {\n\t\treturn /@recommended:languages/i.test(query);\n\t}\n\n\tstatic isSortInstalledExtensionsQuery(\n\t\tquery: string,\n\t\tsortBy?: string,\n\t): boolean {\n\t\treturn (\n\t\t\t(sortBy !== undefined && sortBy !== \"\" && query === \"\") ||\n\t\t\t(!sortBy && /^@sort:\\S*$/i.test(query))\n\t\t);\n\t}\n\n\tstatic isSearchPopularQuery(query: string): boolean {\n\t\treturn /@popular/i.test(query);\n\t}\n\n\tstatic isSearchRecentlyPublishedQuery(query: string): boolean {\n\t\treturn /@recentlyPublished/i.test(query);\n\t}\n\n\tstatic isSearchRecentlyUpdatedQuery(query: string): boolean {\n\t\treturn /@recentlyUpdated/i.test(query);\n\t}\n\n\tstatic isSearchExtensionUpdatesQuery(query: string): boolean {\n\t\treturn /@updates/i.test(query);\n\t}\n\n\tstatic isSortUpdateDateQuery(query: string): boolean {\n\t\treturn /@sort:updateDate/i.test(query);\n\t}\n\n\tstatic isFeatureExtensionsQuery(query: string): boolean {\n\t\treturn /@feature:/i.test(query);\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\t\tif (!this.list) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!(this.list.getFocus().length || this.list.getSelection().length)) {\n\t\t\tthis.list.focusNext();\n\t\t}\n\t\tthis.list.domFocus();\n\t}\n}\n\nexport class DefaultPopularExtensionsView extends ExtensionsListView {\n\toverride async show(): Promise<IPagedModel<IExtension>> {\n\t\tconst query =\n\t\t\tthis.extensionManagementServerService\n\t\t\t\t.webExtensionManagementServer &&\n\t\t\t!this.extensionManagementServerService\n\t\t\t\t.localExtensionManagementServer &&\n\t\t\t!this.extensionManagementServerService\n\t\t\t\t.remoteExtensionManagementServer\n\t\t\t\t? \"@web\"\n\t\t\t\t: \"\";\n\t\treturn super.show(query);\n\t}\n}\n\nexport class ServerInstalledExtensionsView extends ExtensionsListView {\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tquery = query ? query : \"@installed\";\n\t\tif (\n\t\t\t!ExtensionsListView.isLocalExtensionsQuery(query) ||\n\t\t\tExtensionsListView.isSortInstalledExtensionsQuery(query)\n\t\t) {\n\t\t\tquery = query += \" @installed\";\n\t\t}\n\t\treturn super.show(query.trim());\n\t}\n}\n\nexport class EnabledExtensionsView extends ExtensionsListView {\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tquery = query || \"@enabled\";\n\t\treturn ExtensionsListView.isEnabledExtensionsQuery(query)\n\t\t\t? super.show(query)\n\t\t\t: ExtensionsListView.isSortInstalledExtensionsQuery(query)\n\t\t\t\t? super.show(\"@enabled \" + query)\n\t\t\t\t: this.showEmptyModel();\n\t}\n}\n\nexport class DisabledExtensionsView extends ExtensionsListView {\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tquery = query || \"@disabled\";\n\t\treturn ExtensionsListView.isDisabledExtensionsQuery(query)\n\t\t\t? super.show(query)\n\t\t\t: ExtensionsListView.isSortInstalledExtensionsQuery(query)\n\t\t\t\t? super.show(\"@disabled \" + query)\n\t\t\t\t: this.showEmptyModel();\n\t}\n}\n\nexport class OutdatedExtensionsView extends ExtensionsListView {\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tquery = query ? query : \"@outdated\";\n\t\tif (ExtensionsListView.isSearchExtensionUpdatesQuery(query)) {\n\t\t\tquery = query.replace(\"@updates\", \"@outdated\");\n\t\t}\n\t\treturn super.show(query.trim());\n\t}\n\n\tprotected override updateSize() {\n\t\tsuper.updateSize();\n\t\tthis.setExpanded(this.count() > 0);\n\t}\n}\n\nexport class RecentlyUpdatedExtensionsView extends ExtensionsListView {\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tquery = query ? query : \"@recentlyUpdated\";\n\t\tif (ExtensionsListView.isSearchExtensionUpdatesQuery(query)) {\n\t\t\tquery = query.replace(\"@updates\", \"@recentlyUpdated\");\n\t\t}\n\t\treturn super.show(query.trim());\n\t}\n}\n\nexport interface StaticQueryExtensionsViewOptions\n\textends ExtensionsListViewOptions {\n\treadonly query: string;\n}\n\nexport class StaticQueryExtensionsView extends ExtensionsListView {\n\tconstructor(\n\t\tprotected override readonly options: StaticQueryExtensionsViewOptions,\n\t\tviewletViewOptions: IViewletViewOptions,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IExtensionService extensionService: IExtensionService,\n\t\t@IExtensionsWorkbenchService\n\t\textensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IExtensionRecommendationsService\n\t\textensionRecommendationsService: IExtensionRecommendationsService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IHoverService hoverService: IHoverService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IExtensionManagementServerService\n\t\textensionManagementServerService: IExtensionManagementServerService,\n\t\t@IExtensionManifestPropertiesService\n\t\textensionManifestPropertiesService: IExtensionManifestPropertiesService,\n\t\t@IWorkbenchExtensionManagementService\n\t\textensionManagementService: IWorkbenchExtensionManagementService,\n\t\t@IWorkspaceContextService workspaceService: IWorkspaceContextService,\n\t\t@IProductService productService: IProductService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IPreferencesService preferencesService: IPreferencesService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IWorkspaceTrustManagementService\n\t\tworkspaceTrustManagementService: IWorkspaceTrustManagementService,\n\t\t@IWorkbenchExtensionEnablementService\n\t\textensionEnablementService: IWorkbenchExtensionEnablementService,\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService,\n\t\t@IExtensionFeaturesManagementService\n\t\textensionFeaturesManagementService: IExtensionFeaturesManagementService,\n\t\t@IUriIdentityService uriIdentityService: IUriIdentityService,\n\t\t@ILogService logService: ILogService,\n\t) {\n\t\tsuper(\n\t\t\toptions,\n\t\t\tviewletViewOptions,\n\t\t\tnotificationService,\n\t\t\tkeybindingService,\n\t\t\tcontextMenuService,\n\t\t\tinstantiationService,\n\t\t\tthemeService,\n\t\t\textensionService,\n\t\t\textensionsWorkbenchService,\n\t\t\textensionRecommendationsService,\n\t\t\ttelemetryService,\n\t\t\thoverService,\n\t\t\tconfigurationService,\n\t\t\tcontextService,\n\t\t\textensionManagementServerService,\n\t\t\textensionManifestPropertiesService,\n\t\t\textensionManagementService,\n\t\t\tworkspaceService,\n\t\t\tproductService,\n\t\t\tcontextKeyService,\n\t\t\tviewDescriptorService,\n\t\t\topenerService,\n\t\t\tpreferencesService,\n\t\t\tstorageService,\n\t\t\tworkspaceTrustManagementService,\n\t\t\textensionEnablementService,\n\t\t\tlayoutService,\n\t\t\textensionFeaturesManagementService,\n\t\t\turiIdentityService,\n\t\t\tlogService,\n\t\t);\n\t}\n\n\toverride show(): Promise<IPagedModel<IExtension>> {\n\t\treturn super.show(this.options.query);\n\t}\n}\n\nfunction toSpecificWorkspaceUnsupportedQuery(\n\tquery: string,\n\tqualifier: string,\n): string | undefined {\n\tif (!query) {\n\t\treturn \"@workspaceUnsupported:\" + qualifier;\n\t}\n\tconst match = query.match(\n\t\tnew RegExp(`@workspaceUnsupported(:${qualifier})?(\\\\s|$)`, \"i\"),\n\t);\n\tif (match) {\n\t\tif (!match[1]) {\n\t\t\treturn query.replace(\n\t\t\t\t/@workspaceUnsupported/gi,\n\t\t\t\t\"@workspaceUnsupported:\" + qualifier,\n\t\t\t);\n\t\t}\n\t\treturn query;\n\t}\n\treturn undefined;\n}\n\nexport class UntrustedWorkspaceUnsupportedExtensionsView extends ExtensionsListView {\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tconst updatedQuery = toSpecificWorkspaceUnsupportedQuery(\n\t\t\tquery,\n\t\t\t\"untrusted\",\n\t\t);\n\t\treturn updatedQuery ? super.show(updatedQuery) : this.showEmptyModel();\n\t}\n}\n\nexport class UntrustedWorkspacePartiallySupportedExtensionsView extends ExtensionsListView {\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tconst updatedQuery = toSpecificWorkspaceUnsupportedQuery(\n\t\t\tquery,\n\t\t\t\"untrustedPartial\",\n\t\t);\n\t\treturn updatedQuery ? super.show(updatedQuery) : this.showEmptyModel();\n\t}\n}\n\nexport class VirtualWorkspaceUnsupportedExtensionsView extends ExtensionsListView {\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tconst updatedQuery = toSpecificWorkspaceUnsupportedQuery(\n\t\t\tquery,\n\t\t\t\"virtual\",\n\t\t);\n\t\treturn updatedQuery ? super.show(updatedQuery) : this.showEmptyModel();\n\t}\n}\n\nexport class VirtualWorkspacePartiallySupportedExtensionsView extends ExtensionsListView {\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tconst updatedQuery = toSpecificWorkspaceUnsupportedQuery(\n\t\t\tquery,\n\t\t\t\"virtualPartial\",\n\t\t);\n\t\treturn updatedQuery ? super.show(updatedQuery) : this.showEmptyModel();\n\t}\n}\n\nexport class DeprecatedExtensionsView extends ExtensionsListView {\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\treturn ExtensionsListView.isSearchDeprecatedExtensionsQuery(query)\n\t\t\t? super.show(query)\n\t\t\t: this.showEmptyModel();\n\t}\n}\n\nexport class SearchMarketplaceExtensionsView extends ExtensionsListView {\n\tprivate readonly reportSearchFinishedDelayer = this._register(\n\t\tnew ThrottledDelayer(2000),\n\t);\n\tprivate searchWaitPromise: Promise<void> = Promise.resolve();\n\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tconst queryPromise = super.show(query);\n\t\tthis.reportSearchFinishedDelayer.trigger(() =>\n\t\t\tthis.reportSearchFinished(),\n\t\t);\n\t\tthis.searchWaitPromise = queryPromise.then(null, null);\n\t\treturn queryPromise;\n\t}\n\n\tprivate async reportSearchFinished(): Promise<void> {\n\t\tawait this.searchWaitPromise;\n\t\tthis.telemetryService.publicLog2(\n\t\t\t\"extensionsView:MarketplaceSearchFinished\",\n\t\t);\n\t}\n}\n\nexport class DefaultRecommendedExtensionsView extends ExtensionsListView {\n\tprivate readonly recommendedExtensionsQuery = \"@recommended:all\";\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tthis._register(\n\t\t\tthis.extensionRecommendationsService.onDidChangeRecommendations(\n\t\t\t\t() => {\n\t\t\t\t\tthis.show(\"\");\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\t}\n\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tif (query && query.trim() !== this.recommendedExtensionsQuery) {\n\t\t\treturn this.showEmptyModel();\n\t\t}\n\t\tconst model = await super.show(this.recommendedExtensionsQuery);\n\t\tif (!this.extensionsWorkbenchService.local.some((e) => !e.isBuiltin)) {\n\t\t\t// This is part of popular extensions view. Collapse if no installed extensions.\n\t\t\tthis.setExpanded(model.length > 0);\n\t\t}\n\t\treturn model;\n\t}\n}\n\nexport class RecommendedExtensionsView extends ExtensionsListView {\n\tprivate readonly recommendedExtensionsQuery = \"@recommended\";\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tthis._register(\n\t\t\tthis.extensionRecommendationsService.onDidChangeRecommendations(\n\t\t\t\t() => {\n\t\t\t\t\tthis.show(\"\");\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\t}\n\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\treturn query && query.trim() !== this.recommendedExtensionsQuery\n\t\t\t? this.showEmptyModel()\n\t\t\t: super.show(this.recommendedExtensionsQuery);\n\t}\n}\n\nexport class WorkspaceRecommendedExtensionsView\n\textends ExtensionsListView\n\timplements IWorkspaceRecommendedExtensionsView\n{\n\tprivate readonly recommendedExtensionsQuery = \"@recommended:workspace\";\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tthis._register(\n\t\t\tthis.extensionRecommendationsService.onDidChangeRecommendations(\n\t\t\t\t() => this.show(this.recommendedExtensionsQuery),\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.contextService.onDidChangeWorkbenchState(() =>\n\t\t\t\tthis.show(this.recommendedExtensionsQuery),\n\t\t\t),\n\t\t);\n\t}\n\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tconst shouldShowEmptyView =\n\t\t\tquery &&\n\t\t\tquery.trim() !== \"@recommended\" &&\n\t\t\tquery.trim() !== \"@recommended:workspace\";\n\t\tconst model = await (shouldShowEmptyView\n\t\t\t? this.showEmptyModel()\n\t\t\t: super.show(this.recommendedExtensionsQuery));\n\t\tthis.setExpanded(model.length > 0);\n\t\treturn model;\n\t}\n\n\tprivate async getInstallableWorkspaceRecommendations(): Promise<\n\t\tIExtension[]\n\t> {\n\t\tconst installed = (\n\t\t\tawait this.extensionsWorkbenchService.queryLocal()\n\t\t).filter(\n\t\t\t(l) =>\n\t\t\t\tl.enablementState !== EnablementState.DisabledByExtensionKind,\n\t\t); // Filter extensions disabled by kind\n\t\tconst recommendations = (\n\t\t\tawait this.getWorkspaceRecommendations()\n\t\t).filter((recommendation) =>\n\t\t\tinstalled.every((local) =>\n\t\t\t\tisString(recommendation)\n\t\t\t\t\t? !areSameExtensions(\n\t\t\t\t\t\t\t{ id: recommendation },\n\t\t\t\t\t\t\tlocal.identifier,\n\t\t\t\t\t\t)\n\t\t\t\t\t: !this.uriIdentityService.extUri.isEqual(\n\t\t\t\t\t\t\trecommendation,\n\t\t\t\t\t\t\tlocal.local?.location,\n\t\t\t\t\t\t),\n\t\t\t),\n\t\t);\n\t\treturn this.getInstallableRecommendations(\n\t\t\trecommendations,\n\t\t\t{ source: \"install-all-workspace-recommendations\" },\n\t\t\tCancellationToken.None,\n\t\t);\n\t}\n\n\tasync installWorkspaceRecommendations(): Promise<void> {\n\t\tconst installableRecommendations =\n\t\t\tawait this.getInstallableWorkspaceRecommendations();\n\t\tif (installableRecommendations.length) {\n\t\t\tconst galleryExtensions: InstallExtensionInfo[] = [];\n\t\t\tconst resourceExtensions: IExtension[] = [];\n\t\t\tfor (const recommendation of installableRecommendations) {\n\t\t\t\tif (recommendation.gallery) {\n\t\t\t\t\tgalleryExtensions.push({\n\t\t\t\t\t\textension: recommendation.gallery,\n\t\t\t\t\t\toptions: {},\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tresourceExtensions.push(recommendation);\n\t\t\t\t}\n\t\t\t}\n\t\t\tawait Promise.all([\n\t\t\t\tthis.extensionManagementService.installGalleryExtensions(\n\t\t\t\t\tgalleryExtensions,\n\t\t\t\t),\n\t\t\t\t...resourceExtensions.map((extension) =>\n\t\t\t\t\tthis.extensionsWorkbenchService.install(extension),\n\t\t\t\t),\n\t\t\t]);\n\t\t} else {\n\t\t\tthis.notificationService.notify({\n\t\t\t\tseverity: Severity.Info,\n\t\t\t\tmessage: localize(\n\t\t\t\t\t\"no local extensions\",\n\t\t\t\t\t\"There are no extensions to install.\",\n\t\t\t\t),\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport function getAriaLabelForExtension(extension: IExtension | null): string {\n\tif (!extension) {\n\t\treturn \"\";\n\t}\n\tconst publisher = extension.publisherDomain?.verified\n\t\t? localize(\n\t\t\t\t\"extension.arialabel.verifiedPublisher\",\n\t\t\t\t\"Verified Publisher {0}\",\n\t\t\t\textension.publisherDisplayName,\n\t\t\t)\n\t\t: localize(\n\t\t\t\t\"extension.arialabel.publisher\",\n\t\t\t\t\"Publisher {0}\",\n\t\t\t\textension.publisherDisplayName,\n\t\t\t);\n\tconst deprecated = extension?.deprecationInfo\n\t\t? localize(\"extension.arialabel.deprecated\", \"Deprecated\")\n\t\t: \"\";\n\tconst rating = extension?.rating\n\t\t? localize(\n\t\t\t\t\"extension.arialabel.rating\",\n\t\t\t\t\"Rated {0} out of 5 stars by {1} users\",\n\t\t\t\textension.rating.toFixed(2),\n\t\t\t\textension.ratingCount,\n\t\t\t)\n\t\t: \"\";\n\treturn `${extension.displayName}, ${deprecated ? `${deprecated}, ` : \"\"}${extension.version}, ${publisher}, ${extension.description} ${rating ? `, ${rating}` : \"\"}`;\n}\n"],
  "mappings": "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",
  "names": ["LocalSortBy", "model", "result", "local", "pager", "extension"]
}
