{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/extensions/browser/extensionsViews.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from '../../../../nls.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { Event, Emitter } from '../../../../base/common/event.js';\nimport { isCancellationError, getErrorMessage } from '../../../../base/common/errors.js';\nimport { createErrorWithActions } from '../../../../base/common/errorMessage.js';\nimport { PagedModel, IPagedModel, IPager, DelayedPagedModel } from '../../../../base/common/paging.js';\nimport { SortOrder, IQueryOptions as IGalleryQueryOptions, SortBy as GallerySortBy, InstallExtensionInfo, ExtensionGalleryErrorCode, ExtensionGalleryError } from '../../../../platform/extensionManagement/common/extensionManagement.js';\nimport { IExtensionManagementServer, IExtensionManagementServerService, EnablementState, IWorkbenchExtensionManagementService, IWorkbenchExtensionEnablementService } from '../../../services/extensionManagement/common/extensionManagement.js';\nimport { IExtensionRecommendationsService } from '../../../services/extensionRecommendations/common/extensionRecommendations.js';\nimport { areSameExtensions, getExtensionDependencies } from '../../../../platform/extensionManagement/common/extensionManagementUtil.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { append, $ } from '../../../../base/browser/dom.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Delegate, Renderer, IExtensionsViewState } from './extensionsList.js';\nimport { ExtensionState, IExtension, IExtensionsWorkbenchService, IWorkspaceRecommendedExtensionsView } from '../common/extensions.js';\nimport { Query } from '../common/extensionQuery.js';\nimport { IExtensionService, toExtension } from '../../../services/extensions/common/extensions.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { IViewletViewOptions } from '../../../browser/parts/views/viewsViewlet.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CountBadge } from '../../../../base/browser/ui/countBadge/countBadge.js';\nimport { ManageExtensionAction, getContextMenuActions, ExtensionAction } from './extensionsActions.js';\nimport { WorkbenchPagedList } from '../../../../platform/list/browser/listService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nimport { ViewPane, IViewPaneOptions, ViewPaneShowActions } from '../../../browser/parts/views/viewPane.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { coalesce, distinct } from '../../../../base/common/arrays.js';\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { IListContextMenuEvent } from '../../../../base/browser/ui/list/list.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { IAction, Action, Separator, ActionRunner } from '../../../../base/common/actions.js';\nimport { ExtensionIdentifier, ExtensionIdentifierMap, ExtensionUntrustedWorkspaceSupportType, ExtensionVirtualWorkspaceSupportType, IExtensionDescription, isLanguagePackExtension } from '../../../../platform/extensions/common/extensions.js';\nimport { CancelablePromise, createCancelablePromise, ThrottledDelayer } from '../../../../base/common/async.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { SeverityIcon } from '../../../../platform/severityIcon/browser/severityIcon.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IViewDescriptorService, ViewContainerLocation } from '../../../common/views.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IPreferencesService } from '../../../services/preferences/common/preferences.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { IExtensionManifestPropertiesService } from '../../../services/extensions/common/extensionManifestPropertiesService.js';\nimport { isVirtualWorkspace } from '../../../../platform/workspace/common/virtualWorkspace.js';\nimport { IWorkspaceTrustManagementService } from '../../../../platform/workspace/common/workspaceTrust.js';\nimport { IWorkbenchLayoutService, Position } from '../../../services/layout/browser/layoutService.js';\nimport { HoverPosition } from '../../../../base/browser/ui/hover/hoverWidget.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { isOfflineError } from '../../../../base/parts/request/common/request.js';\nimport { defaultCountBadgeStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions, IExtensionFeatureRenderer, IExtensionFeaturesManagementService, IExtensionFeaturesRegistry } from '../../../services/extensionManagement/common/extensionFeatures.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { isString } from '../../../../base/common/types.js';\nimport { IUriIdentityService } from '../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\n\nexport const NONE_CATEGORY = 'none';\n\nclass ExtensionsViewState extends Disposable implements IExtensionsViewState {\n\n\tprivate readonly _onFocus: Emitter<IExtension> = this._register(new Emitter<IExtension>());\n\treadonly onFocus: Event<IExtension> = this._onFocus.event;\n\n\tprivate readonly _onBlur: Emitter<IExtension> = this._register(new Emitter<IExtension>());\n\treadonly onBlur: Event<IExtension> = this._onBlur.event;\n\n\tprivate currentlyFocusedItems: IExtension[] = [];\n\n\tonFocusChange(extensions: IExtension[]): void {\n\t\tthis.currentlyFocusedItems.forEach(extension => this._onBlur.fire(extension));\n\t\tthis.currentlyFocusedItems = extensions;\n\t\tthis.currentlyFocusedItems.forEach(extension => this._onFocus.fire(extension));\n\t}\n}\n\nexport interface ExtensionsListViewOptions {\n\tserver?: IExtensionManagementServer;\n\tflexibleHeight?: boolean;\n\tonDidChangeTitle?: Event<string>;\n\thideBadge?: boolean;\n}\n\ninterface IQueryResult {\n\tmodel: IPagedModel<IExtension>;\n\treadonly onDidChangeModel?: Event<IPagedModel<IExtension>>;\n\treadonly disposables: DisposableStore;\n}\n\nconst enum LocalSortBy {\n\tUpdateDate = 'UpdateDate',\n}\n\nfunction isLocalSortBy(value: any): value is LocalSortBy {\n\tswitch (value as LocalSortBy) {\n\t\tcase LocalSortBy.UpdateDate: return true;\n\t}\n}\n\ntype SortBy = LocalSortBy | GallerySortBy;\ntype IQueryOptions = Omit<IGalleryQueryOptions, 'sortBy'> & { sortBy?: SortBy };\n\nexport class ExtensionsListView extends ViewPane {\n\n\tprivate static RECENT_UPDATE_DURATION = 7 * 24 * 60 * 60 * 1000; // 7 days\n\n\tprivate bodyTemplate: {\n\t\tmessageContainer: HTMLElement;\n\t\tmessageSeverityIcon: HTMLElement;\n\t\tmessageBox: HTMLElement;\n\t\textensionsList: HTMLElement;\n\t} | undefined;\n\tprivate badge: CountBadge | undefined;\n\tprivate list: WorkbenchPagedList<IExtension> | null = null;\n\tprivate queryRequest: { query: string; request: CancelablePromise<IPagedModel<IExtension>> } | null = null;\n\tprivate queryResult: IQueryResult | undefined;\n\n\tprivate readonly contextMenuActionRunner = this._register(new ActionRunner());\n\n\tconstructor(\n\t\tprotected readonly options: ExtensionsListViewOptions,\n\t\tviewletViewOptions: IViewletViewOptions,\n\t\t@INotificationService protected notificationService: INotificationService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IExtensionsWorkbenchService protected extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IExtensionRecommendationsService protected extensionRecommendationsService: IExtensionRecommendationsService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IHoverService hoverService: IHoverService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IWorkspaceContextService protected contextService: IWorkspaceContextService,\n\t\t@IExtensionManagementServerService protected readonly extensionManagementServerService: IExtensionManagementServerService,\n\t\t@IExtensionManifestPropertiesService private readonly extensionManifestPropertiesService: IExtensionManifestPropertiesService,\n\t\t@IWorkbenchExtensionManagementService protected readonly extensionManagementService: IWorkbenchExtensionManagementService,\n\t\t@IWorkspaceContextService protected readonly workspaceService: IWorkspaceContextService,\n\t\t@IProductService protected readonly productService: IProductService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IPreferencesService private readonly preferencesService: IPreferencesService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IWorkspaceTrustManagementService private readonly workspaceTrustManagementService: IWorkspaceTrustManagementService,\n\t\t@IWorkbenchExtensionEnablementService private readonly extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t\t@IWorkbenchLayoutService private readonly layoutService: IWorkbenchLayoutService,\n\t\t@IExtensionFeaturesManagementService private readonly extensionFeaturesManagementService: IExtensionFeaturesManagementService,\n\t\t@IUriIdentityService protected readonly uriIdentityService: IUriIdentityService,\n\t\t@ILogService private readonly logService: ILogService\n\t) {\n\t\tsuper({\n\t\t\t...(viewletViewOptions as IViewPaneOptions),\n\t\t\tshowActions: ViewPaneShowActions.Always,\n\t\t\tmaximumBodySize: options.flexibleHeight ? (storageService.getNumber(`${viewletViewOptions.id}.size`, StorageScope.PROFILE, 0) ? undefined : 0) : undefined\n\t\t}, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, telemetryService, hoverService);\n\t\tif (this.options.onDidChangeTitle) {\n\t\t\tthis._register(this.options.onDidChangeTitle(title => this.updateTitle(title)));\n\t\t}\n\n\t\tthis._register(this.contextMenuActionRunner.onDidRun(({ error }) => error && this.notificationService.error(error)));\n\t\tthis.registerActions();\n\t}\n\n\tprotected registerActions(): void { }\n\n\tprotected override renderHeader(container: HTMLElement): void {\n\t\tcontainer.classList.add('extension-view-header');\n\t\tsuper.renderHeader(container);\n\n\t\tif (!this.options.hideBadge) {\n\t\t\tthis.badge = new CountBadge(append(container, $('.count-badge-wrapper')), {}, defaultCountBadgeStyles);\n\t\t}\n\t}\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tconst extensionsList = append(container, $('.extensions-list'));\n\t\tconst messageContainer = append(container, $('.message-container'));\n\t\tconst messageSeverityIcon = append(messageContainer, $(''));\n\t\tconst messageBox = append(messageContainer, $('.message'));\n\t\tconst delegate = new Delegate();\n\t\tconst extensionsViewState = new ExtensionsViewState();\n\t\tconst renderer = this.instantiationService.createInstance(Renderer, extensionsViewState, {\n\t\t\thoverOptions: {\n\t\t\t\tposition: () => {\n\t\t\t\t\tconst viewLocation = this.viewDescriptorService.getViewLocationById(this.id);\n\t\t\t\t\tif (viewLocation === ViewContainerLocation.Sidebar) {\n\t\t\t\t\t\treturn this.layoutService.getSideBarPosition() === Position.LEFT ? HoverPosition.RIGHT : HoverPosition.LEFT;\n\t\t\t\t\t}\n\t\t\t\t\tif (viewLocation === ViewContainerLocation.AuxiliaryBar) {\n\t\t\t\t\t\treturn this.layoutService.getSideBarPosition() === Position.LEFT ? HoverPosition.LEFT : HoverPosition.RIGHT;\n\t\t\t\t\t}\n\t\t\t\t\treturn HoverPosition.RIGHT;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis.list = this.instantiationService.createInstance(WorkbenchPagedList, 'Extensions', extensionsList, delegate, [renderer], {\n\t\t\tmultipleSelectionSupport: false,\n\t\t\tsetRowLineHeight: false,\n\t\t\thorizontalScrolling: false,\n\t\t\taccessibilityProvider: {\n\t\t\t\tgetAriaLabel(extension: IExtension | null): string {\n\t\t\t\t\treturn getAriaLabelForExtension(extension);\n\t\t\t\t},\n\t\t\t\tgetWidgetAriaLabel(): string {\n\t\t\t\t\treturn localize('extensions', \"Extensions\");\n\t\t\t\t}\n\t\t\t},\n\t\t\toverrideStyles: this.getLocationBasedColors().listOverrideStyles,\n\t\t\topenOnSingleClick: true\n\t\t}) as WorkbenchPagedList<IExtension>;\n\t\tthis._register(this.list.onContextMenu(e => this.onContextMenu(e), this));\n\t\tthis._register(this.list.onDidChangeFocus(e => extensionsViewState.onFocusChange(coalesce(e.elements)), this));\n\t\tthis._register(this.list);\n\t\tthis._register(extensionsViewState);\n\n\t\tthis._register(Event.debounce(Event.filter(this.list.onDidOpen, e => e.element !== null), (_, event) => event, 75, true)(options => {\n\t\t\tthis.openExtension(options.element!, { sideByside: options.sideBySide, ...options.editorOptions });\n\t\t}));\n\n\t\tthis.bodyTemplate = {\n\t\t\textensionsList,\n\t\t\tmessageBox,\n\t\t\tmessageContainer,\n\t\t\tmessageSeverityIcon\n\t\t};\n\n\t\tif (this.queryResult) {\n\t\t\tthis.setModel(this.queryResult.model);\n\t\t}\n\t}\n\n\tprotected override layoutBody(height: number, width: number): void {\n\t\tsuper.layoutBody(height, width);\n\t\tif (this.bodyTemplate) {\n\t\t\tthis.bodyTemplate.extensionsList.style.height = height + 'px';\n\t\t}\n\t\tthis.list?.layout(height, width);\n\t}\n\n\tasync show(query: string, refresh?: boolean): Promise<IPagedModel<IExtension>> {\n\t\tif (this.queryRequest) {\n\t\t\tif (!refresh && this.queryRequest.query === query) {\n\t\t\t\treturn this.queryRequest.request;\n\t\t\t}\n\t\t\tthis.queryRequest.request.cancel();\n\t\t\tthis.queryRequest = null;\n\t\t}\n\n\t\tif (this.queryResult) {\n\t\t\tthis.queryResult.disposables.dispose();\n\t\t\tthis.queryResult = undefined;\n\t\t}\n\n\t\tconst parsedQuery = Query.parse(query);\n\n\t\tconst options: IQueryOptions = {\n\t\t\tsortOrder: SortOrder.Default\n\t\t};\n\n\t\tswitch (parsedQuery.sortBy) {\n\t\t\tcase 'installs': options.sortBy = GallerySortBy.InstallCount; break;\n\t\t\tcase 'rating': options.sortBy = GallerySortBy.WeightedRating; break;\n\t\t\tcase 'name': options.sortBy = GallerySortBy.Title; break;\n\t\t\tcase 'publishedDate': options.sortBy = GallerySortBy.PublishedDate; break;\n\t\t\tcase 'updateDate': options.sortBy = LocalSortBy.UpdateDate; break;\n\t\t}\n\n\t\tconst request = createCancelablePromise(async token => {\n\t\t\ttry {\n\t\t\t\tthis.queryResult = await this.query(parsedQuery, options, token);\n\t\t\t\tconst model = this.queryResult.model;\n\t\t\t\tthis.setModel(model);\n\t\t\t\tif (this.queryResult.onDidChangeModel) {\n\t\t\t\t\tthis.queryResult.disposables.add(this.queryResult.onDidChangeModel(model => {\n\t\t\t\t\t\tif (this.queryResult) {\n\t\t\t\t\t\t\tthis.queryResult.model = model;\n\t\t\t\t\t\t\tthis.updateModel(model);\n\t\t\t\t\t\t}\n\t\t\t\t\t}));\n\t\t\t\t}\n\t\t\t\treturn model;\n\t\t\t} catch (e) {\n\t\t\t\tconst model = new PagedModel([]);\n\t\t\t\tif (!isCancellationError(e)) {\n\t\t\t\t\tthis.logService.error(e);\n\t\t\t\t\tthis.setModel(model, e);\n\t\t\t\t}\n\t\t\t\treturn this.list ? this.list.model : model;\n\t\t\t}\n\t\t});\n\n\t\trequest.finally(() => this.queryRequest = null);\n\t\tthis.queryRequest = { query, request };\n\t\treturn request;\n\t}\n\n\tcount(): number {\n\t\treturn this.queryResult?.model.length ?? 0;\n\t}\n\n\tprotected showEmptyModel(): Promise<IPagedModel<IExtension>> {\n\t\tconst emptyModel = new PagedModel([]);\n\t\tthis.setModel(emptyModel);\n\t\treturn Promise.resolve(emptyModel);\n\t}\n\n\tprivate async onContextMenu(e: IListContextMenuEvent<IExtension>): Promise<void> {\n\t\tif (e.element) {\n\t\t\tconst disposables = new DisposableStore();\n\t\t\tconst manageExtensionAction = disposables.add(this.instantiationService.createInstance(ManageExtensionAction));\n\t\t\tconst extension = e.element ? this.extensionsWorkbenchService.local.find(local => areSameExtensions(local.identifier, e.element!.identifier) && (!e.element!.server || e.element!.server === local.server)) || e.element\n\t\t\t\t: e.element;\n\t\t\tmanageExtensionAction.extension = extension;\n\t\t\tlet groups: IAction[][] = [];\n\t\t\tif (manageExtensionAction.enabled) {\n\t\t\t\tgroups = await manageExtensionAction.getActionGroups();\n\t\t\t} else if (extension) {\n\t\t\t\tgroups = await getContextMenuActions(extension, this.contextKeyService, this.instantiationService);\n\t\t\t\tgroups.forEach(group => group.forEach(extensionAction => {\n\t\t\t\t\tif (extensionAction instanceof ExtensionAction) {\n\t\t\t\t\t\textensionAction.extension = extension;\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t}\n\t\t\tlet actions: IAction[] = [];\n\t\t\tfor (const menuActions of groups) {\n\t\t\t\tactions = [...actions, ...menuActions, new Separator()];\n\t\t\t}\n\t\t\tactions.pop();\n\t\t\tthis.contextMenuService.showContextMenu({\n\t\t\t\tgetAnchor: () => e.anchor,\n\t\t\t\tgetActions: () => actions,\n\t\t\t\tactionRunner: this.contextMenuActionRunner,\n\t\t\t\tonHide: () => disposables.dispose()\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate async query(query: Query, options: IQueryOptions, token: CancellationToken): Promise<IQueryResult> {\n\t\tconst idRegex = /@id:(([a-z0-9A-Z][a-z0-9\\-A-Z]*)\\.([a-z0-9A-Z][a-z0-9\\-A-Z]*))/g;\n\t\tconst ids: string[] = [];\n\t\tlet idMatch;\n\t\twhile ((idMatch = idRegex.exec(query.value)) !== null) {\n\t\t\tconst name = idMatch[1];\n\t\t\tids.push(name);\n\t\t}\n\t\tif (ids.length) {\n\t\t\tconst model = await this.queryByIds(ids, options, token);\n\t\t\treturn { model, disposables: new DisposableStore() };\n\t\t}\n\n\t\tif (ExtensionsListView.isLocalExtensionsQuery(query.value, query.sortBy)) {\n\t\t\treturn this.queryLocal(query, options);\n\t\t}\n\n\t\tif (ExtensionsListView.isSearchPopularQuery(query.value)) {\n\t\t\tquery.value = query.value.replace('@popular', '');\n\t\t\toptions.sortBy = !options.sortBy ? GallerySortBy.InstallCount : options.sortBy;\n\t\t}\n\t\telse if (ExtensionsListView.isSearchRecentlyPublishedQuery(query.value)) {\n\t\t\tquery.value = query.value.replace('@recentlyPublished', '');\n\t\t\toptions.sortBy = !options.sortBy ? GallerySortBy.PublishedDate : options.sortBy;\n\t\t}\n\n\t\tconst galleryQueryOptions: IGalleryQueryOptions = { ...options, sortBy: isLocalSortBy(options.sortBy) ? undefined : options.sortBy };\n\t\tconst model = await this.queryGallery(query, galleryQueryOptions, token);\n\t\treturn { model, disposables: new DisposableStore() };\n\t}\n\n\tprivate async queryByIds(ids: string[], options: IQueryOptions, token: CancellationToken): Promise<IPagedModel<IExtension>> {\n\t\tconst idsSet: Set<string> = ids.reduce((result, id) => { result.add(id.toLowerCase()); return result; }, new Set<string>());\n\t\tconst result = (await this.extensionsWorkbenchService.queryLocal(this.options.server))\n\t\t\t.filter(e => idsSet.has(e.identifier.id.toLowerCase()));\n\n\t\tconst galleryIds = result.length ? ids.filter(id => result.every(r => !areSameExtensions(r.identifier, { id }))) : ids;\n\n\t\tif (galleryIds.length) {\n\t\t\tconst galleryResult = await this.extensionsWorkbenchService.getExtensions(galleryIds.map(id => ({ id })), { source: 'queryById' }, token);\n\t\t\tresult.push(...galleryResult);\n\t\t}\n\n\t\treturn this.getPagedModel(result);\n\t}\n\n\tprivate async queryLocal(query: Query, options: IQueryOptions): Promise<IQueryResult> {\n\t\tconst local = await this.extensionsWorkbenchService.queryLocal(this.options.server);\n\t\tlet { extensions, canIncludeInstalledExtensions } = await this.filterLocal(local, this.extensionService.extensions, query, options);\n\t\tconst disposables = new DisposableStore();\n\t\tconst onDidChangeModel = disposables.add(new Emitter<IPagedModel<IExtension>>());\n\n\t\tif (canIncludeInstalledExtensions) {\n\t\t\tlet isDisposed: boolean = false;\n\t\t\tdisposables.add(toDisposable(() => isDisposed = true));\n\t\t\tdisposables.add(Event.debounce(Event.any(\n\t\t\t\tEvent.filter(this.extensionsWorkbenchService.onChange, e => e?.state === ExtensionState.Installed),\n\t\t\t\tthis.extensionService.onDidChangeExtensions\n\t\t\t), () => undefined)(async () => {\n\t\t\t\tconst local = this.options.server ? this.extensionsWorkbenchService.installed.filter(e => e.server === this.options.server) : this.extensionsWorkbenchService.local;\n\t\t\t\tconst { extensions: newExtensions } = await this.filterLocal(local, this.extensionService.extensions, query, options);\n\t\t\t\tif (!isDisposed) {\n\t\t\t\t\tconst mergedExtensions = this.mergeAddedExtensions(extensions, newExtensions);\n\t\t\t\t\tif (mergedExtensions) {\n\t\t\t\t\t\textensions = mergedExtensions;\n\t\t\t\t\t\tonDidChangeModel.fire(new PagedModel(extensions));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\n\t\treturn {\n\t\t\tmodel: new PagedModel(extensions),\n\t\t\tonDidChangeModel: onDidChangeModel.event,\n\t\t\tdisposables\n\t\t};\n\t}\n\n\tprivate async filterLocal(local: IExtension[], runningExtensions: readonly IExtensionDescription[], query: Query, options: IQueryOptions): Promise<{ extensions: IExtension[]; canIncludeInstalledExtensions: boolean }> {\n\t\tconst value = query.value;\n\t\tlet extensions: IExtension[] = [];\n\t\tlet canIncludeInstalledExtensions = true;\n\n\t\tif (/@builtin/i.test(value)) {\n\t\t\textensions = this.filterBuiltinExtensions(local, query, options);\n\t\t\tcanIncludeInstalledExtensions = false;\n\t\t}\n\n\t\telse if (/@installed/i.test(value)) {\n\t\t\textensions = this.filterInstalledExtensions(local, runningExtensions, query, options);\n\t\t}\n\n\t\telse if (/@outdated/i.test(value)) {\n\t\t\textensions = this.filterOutdatedExtensions(local, query, options);\n\t\t}\n\n\t\telse if (/@disabled/i.test(value)) {\n\t\t\textensions = this.filterDisabledExtensions(local, runningExtensions, query, options);\n\t\t}\n\n\t\telse if (/@enabled/i.test(value)) {\n\t\t\textensions = this.filterEnabledExtensions(local, runningExtensions, query, options);\n\t\t}\n\n\t\telse if (/@workspaceUnsupported/i.test(value)) {\n\t\t\textensions = this.filterWorkspaceUnsupportedExtensions(local, query, options);\n\t\t}\n\n\t\telse if (/@deprecated/i.test(query.value)) {\n\t\t\textensions = await this.filterDeprecatedExtensions(local, query, options);\n\t\t}\n\n\t\telse if (/@recentlyUpdated/i.test(query.value)) {\n\t\t\textensions = this.filterRecentlyUpdatedExtensions(local, query, options);\n\t\t}\n\n\t\telse if (/@feature:/i.test(query.value)) {\n\t\t\textensions = this.filterExtensionsByFeature(local, query, options);\n\t\t}\n\n\t\treturn { extensions, canIncludeInstalledExtensions };\n\t}\n\n\tprivate filterBuiltinExtensions(local: IExtension[], query: Query, options: IQueryOptions): IExtension[] {\n\t\tlet { value, includedCategories, excludedCategories } = this.parseCategories(query.value);\n\t\tvalue = value.replace(/@builtin/g, '').replace(/@sort:(\\w+)(-\\w*)?/g, '').trim().toLowerCase();\n\n\t\tconst result = local\n\t\t\t.filter(e => e.isBuiltin && (e.name.toLowerCase().indexOf(value) > -1 || e.displayName.toLowerCase().indexOf(value) > -1)\n\t\t\t\t&& this.filterExtensionByCategory(e, includedCategories, excludedCategories));\n\n\t\treturn this.sortExtensions(result, options);\n\t}\n\n\tprivate filterExtensionByCategory(e: IExtension, includedCategories: string[], excludedCategories: string[]): boolean {\n\t\tif (!includedCategories.length && !excludedCategories.length) {\n\t\t\treturn true;\n\t\t}\n\t\tif (e.categories.length) {\n\t\t\tif (excludedCategories.length && e.categories.some(category => excludedCategories.includes(category.toLowerCase()))) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn e.categories.some(category => includedCategories.includes(category.toLowerCase()));\n\t\t} else {\n\t\t\treturn includedCategories.includes(NONE_CATEGORY);\n\t\t}\n\t}\n\n\tprivate parseCategories(value: string): { value: string; includedCategories: string[]; excludedCategories: string[] } {\n\t\tconst includedCategories: string[] = [];\n\t\tconst excludedCategories: string[] = [];\n\t\tvalue = value.replace(/\\bcategory:(\"([^\"]*)\"|([^\"]\\S*))(\\s+|\\b|$)/g, (_, quotedCategory, category) => {\n\t\t\tconst entry = (category || quotedCategory || '').toLowerCase();\n\t\t\tif (entry.startsWith('-')) {\n\t\t\t\tif (excludedCategories.indexOf(entry) === -1) {\n\t\t\t\t\texcludedCategories.push(entry);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (includedCategories.indexOf(entry) === -1) {\n\t\t\t\t\tincludedCategories.push(entry);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn '';\n\t\t});\n\t\treturn { value, includedCategories, excludedCategories };\n\t}\n\n\tprivate filterInstalledExtensions(local: IExtension[], runningExtensions: readonly IExtensionDescription[], query: Query, options: IQueryOptions): IExtension[] {\n\t\tlet { value, includedCategories, excludedCategories } = this.parseCategories(query.value);\n\n\t\tvalue = value.replace(/@installed/g, '').replace(/@sort:(\\w+)(-\\w*)?/g, '').trim().toLowerCase();\n\n\t\tconst matchingText = (e: IExtension) => (e.name.toLowerCase().indexOf(value) > -1 || e.displayName.toLowerCase().indexOf(value) > -1 || e.description.toLowerCase().indexOf(value) > -1)\n\t\t\t&& this.filterExtensionByCategory(e, includedCategories, excludedCategories);\n\t\tlet result;\n\n\t\tif (options.sortBy !== undefined) {\n\t\t\tresult = local.filter(e => !e.isBuiltin && matchingText(e));\n\t\t\tresult = this.sortExtensions(result, options);\n\t\t} else {\n\t\t\tresult = local.filter(e => (!e.isBuiltin || e.outdated || e.runtimeState !== undefined) && matchingText(e));\n\t\t\tconst runningExtensionsById = runningExtensions.reduce((result, e) => { result.set(e.identifier.value, e); return result; }, new ExtensionIdentifierMap<IExtensionDescription>());\n\n\t\t\tconst defaultSort = (e1: IExtension, e2: IExtension) => {\n\t\t\t\tconst running1 = runningExtensionsById.get(e1.identifier.id);\n\t\t\t\tconst isE1Running = !!running1 && this.extensionManagementServerService.getExtensionManagementServer(toExtension(running1)) === e1.server;\n\t\t\t\tconst running2 = runningExtensionsById.get(e2.identifier.id);\n\t\t\t\tconst isE2Running = running2 && this.extensionManagementServerService.getExtensionManagementServer(toExtension(running2)) === e2.server;\n\t\t\t\tif ((isE1Running && isE2Running)) {\n\t\t\t\t\treturn e1.displayName.localeCompare(e2.displayName);\n\t\t\t\t}\n\t\t\t\tconst isE1LanguagePackExtension = e1.local && isLanguagePackExtension(e1.local.manifest);\n\t\t\t\tconst isE2LanguagePackExtension = e2.local && isLanguagePackExtension(e2.local.manifest);\n\t\t\t\tif (!isE1Running && !isE2Running) {\n\t\t\t\t\tif (isE1LanguagePackExtension) {\n\t\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\t\t\tif (isE2LanguagePackExtension) {\n\t\t\t\t\t\treturn 1;\n\t\t\t\t\t}\n\t\t\t\t\treturn e1.displayName.localeCompare(e2.displayName);\n\t\t\t\t}\n\t\t\t\tif ((isE1Running && isE2LanguagePackExtension) || (isE2Running && isE1LanguagePackExtension)) {\n\t\t\t\t\treturn e1.displayName.localeCompare(e2.displayName);\n\t\t\t\t}\n\t\t\t\treturn isE1Running ? -1 : 1;\n\t\t\t};\n\n\t\t\tconst incompatible: IExtension[] = [];\n\t\t\tconst missingDeps: IExtension[] = [];\n\t\t\tconst deprecated: IExtension[] = [];\n\t\t\tconst outdated: IExtension[] = [];\n\t\t\tconst actionRequired: IExtension[] = [];\n\t\t\tconst noActionRequired: IExtension[] = [];\n\n\t\t\tfor (const e of result) {\n\t\t\t\tif (e.enablementState === EnablementState.DisabledByInvalidExtension) {\n\t\t\t\t\tincompatible.push(e);\n\t\t\t\t}\n\t\t\t\telse if (e.enablementState === EnablementState.DisabledByExtensionDependency) {\n\t\t\t\t\tmissingDeps.push(e);\n\t\t\t\t}\n\t\t\t\telse if (e.deprecationInfo) {\n\t\t\t\t\tdeprecated.push(e);\n\t\t\t\t}\n\t\t\t\telse if (e.outdated) {\n\t\t\t\t\toutdated.push(e);\n\t\t\t\t}\n\t\t\t\telse if (e.runtimeState) {\n\t\t\t\t\tactionRequired.push(e);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnoActionRequired.push(e);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tresult = [\n\t\t\t\t...incompatible.sort(defaultSort),\n\t\t\t\t...missingDeps.sort(defaultSort),\n\t\t\t\t...deprecated.sort(defaultSort),\n\t\t\t\t...outdated.sort(defaultSort),\n\t\t\t\t...actionRequired.sort(defaultSort),\n\t\t\t\t...noActionRequired.sort(defaultSort)\n\t\t\t];\n\t\t}\n\t\treturn result;\n\t}\n\n\tprivate filterOutdatedExtensions(local: IExtension[], query: Query, options: IQueryOptions): IExtension[] {\n\t\tlet { value, includedCategories, excludedCategories } = this.parseCategories(query.value);\n\n\t\tvalue = value.replace(/@outdated/g, '').replace(/@sort:(\\w+)(-\\w*)?/g, '').trim().toLowerCase();\n\n\t\tconst result = local\n\t\t\t.sort((e1, e2) => e1.displayName.localeCompare(e2.displayName))\n\t\t\t.filter(extension => extension.outdated\n\t\t\t\t&& (extension.name.toLowerCase().indexOf(value) > -1 || extension.displayName.toLowerCase().indexOf(value) > -1)\n\t\t\t\t&& this.filterExtensionByCategory(extension, includedCategories, excludedCategories));\n\n\t\treturn this.sortExtensions(result, options);\n\t}\n\n\tprivate filterDisabledExtensions(local: IExtension[], runningExtensions: readonly IExtensionDescription[], query: Query, options: IQueryOptions): IExtension[] {\n\t\tlet { value, includedCategories, excludedCategories } = this.parseCategories(query.value);\n\n\t\tvalue = value.replace(/@disabled/g, '').replace(/@sort:(\\w+)(-\\w*)?/g, '').trim().toLowerCase();\n\n\t\tconst result = local\n\t\t\t.sort((e1, e2) => e1.displayName.localeCompare(e2.displayName))\n\t\t\t.filter(e => runningExtensions.every(r => !areSameExtensions({ id: r.identifier.value, uuid: r.uuid }, e.identifier))\n\t\t\t\t&& (e.name.toLowerCase().indexOf(value) > -1 || e.displayName.toLowerCase().indexOf(value) > -1)\n\t\t\t\t&& this.filterExtensionByCategory(e, includedCategories, excludedCategories));\n\n\t\treturn this.sortExtensions(result, options);\n\t}\n\n\tprivate filterEnabledExtensions(local: IExtension[], runningExtensions: readonly IExtensionDescription[], query: Query, options: IQueryOptions): IExtension[] {\n\t\tlet { value, includedCategories, excludedCategories } = this.parseCategories(query.value);\n\n\t\tvalue = value ? value.replace(/@enabled/g, '').replace(/@sort:(\\w+)(-\\w*)?/g, '').trim().toLowerCase() : '';\n\n\t\tlocal = local.filter(e => !e.isBuiltin);\n\t\tconst result = local\n\t\t\t.sort((e1, e2) => e1.displayName.localeCompare(e2.displayName))\n\t\t\t.filter(e => runningExtensions.some(r => areSameExtensions({ id: r.identifier.value, uuid: r.uuid }, e.identifier))\n\t\t\t\t&& (e.name.toLowerCase().indexOf(value) > -1 || e.displayName.toLowerCase().indexOf(value) > -1)\n\t\t\t\t&& this.filterExtensionByCategory(e, includedCategories, excludedCategories));\n\n\t\treturn this.sortExtensions(result, options);\n\t}\n\n\tprivate filterWorkspaceUnsupportedExtensions(local: IExtension[], query: Query, options: IQueryOptions): IExtension[] {\n\t\t// shows local extensions which are restricted or disabled in the current workspace because of the extension's capability\n\n\t\tconst queryString = query.value; // @sortby is already filtered out\n\n\t\tconst match = queryString.match(/^\\s*@workspaceUnsupported(?::(untrusted|virtual)(Partial)?)?(?:\\s+([^\\s]*))?/i);\n\t\tif (!match) {\n\t\t\treturn [];\n\t\t}\n\t\tconst type = match[1]?.toLowerCase();\n\t\tconst partial = !!match[2];\n\t\tconst nameFilter = match[3]?.toLowerCase();\n\n\t\tif (nameFilter) {\n\t\t\tlocal = local.filter(extension => extension.name.toLowerCase().indexOf(nameFilter) > -1 || extension.displayName.toLowerCase().indexOf(nameFilter) > -1);\n\t\t}\n\n\t\tconst hasVirtualSupportType = (extension: IExtension, supportType: ExtensionVirtualWorkspaceSupportType) => {\n\t\t\treturn extension.local && this.extensionManifestPropertiesService.getExtensionVirtualWorkspaceSupportType(extension.local.manifest) === supportType;\n\t\t};\n\n\t\tconst hasRestrictedSupportType = (extension: IExtension, supportType: ExtensionUntrustedWorkspaceSupportType) => {\n\t\t\tif (!extension.local) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst enablementState = this.extensionEnablementService.getEnablementState(extension.local);\n\t\t\tif (enablementState !== EnablementState.EnabledGlobally && enablementState !== EnablementState.EnabledWorkspace &&\n\t\t\t\tenablementState !== EnablementState.DisabledByTrustRequirement && enablementState !== EnablementState.DisabledByExtensionDependency) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (this.extensionManifestPropertiesService.getExtensionUntrustedWorkspaceSupportType(extension.local.manifest) === supportType) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (supportType === false) {\n\t\t\t\tconst dependencies = getExtensionDependencies(local.map(ext => ext.local!), extension.local);\n\t\t\t\treturn dependencies.some(ext => this.extensionManifestPropertiesService.getExtensionUntrustedWorkspaceSupportType(ext.manifest) === supportType);\n\t\t\t}\n\n\t\t\treturn false;\n\t\t};\n\n\t\tconst inVirtualWorkspace = isVirtualWorkspace(this.workspaceService.getWorkspace());\n\t\tconst inRestrictedWorkspace = !this.workspaceTrustManagementService.isWorkspaceTrusted();\n\n\t\tif (type === 'virtual') {\n\t\t\t// show limited and disabled extensions unless disabled because of a untrusted workspace\n\t\t\tlocal = local.filter(extension => inVirtualWorkspace && hasVirtualSupportType(extension, partial ? 'limited' : false) && !(inRestrictedWorkspace && hasRestrictedSupportType(extension, false)));\n\t\t} else if (type === 'untrusted') {\n\t\t\t// show limited and disabled extensions unless disabled because of a virtual workspace\n\t\t\tlocal = local.filter(extension => hasRestrictedSupportType(extension, partial ? 'limited' : false) && !(inVirtualWorkspace && hasVirtualSupportType(extension, false)));\n\t\t} else {\n\t\t\t// show extensions that are restricted or disabled in the current workspace\n\t\t\tlocal = local.filter(extension => inVirtualWorkspace && !hasVirtualSupportType(extension, true) || inRestrictedWorkspace && !hasRestrictedSupportType(extension, true));\n\t\t}\n\t\treturn this.sortExtensions(local, options);\n\t}\n\n\tprivate async filterDeprecatedExtensions(local: IExtension[], query: Query, options: IQueryOptions): Promise<IExtension[]> {\n\t\tconst value = query.value.replace(/@deprecated/g, '').replace(/@sort:(\\w+)(-\\w*)?/g, '').trim().toLowerCase();\n\t\tconst extensionsControlManifest = await this.extensionManagementService.getExtensionsControlManifest();\n\t\tconst deprecatedExtensionIds = Object.keys(extensionsControlManifest.deprecated);\n\t\tlocal = local.filter(e => deprecatedExtensionIds.includes(e.identifier.id) && (!value || e.name.toLowerCase().indexOf(value) > -1 || e.displayName.toLowerCase().indexOf(value) > -1));\n\t\treturn this.sortExtensions(local, options);\n\t}\n\n\tprivate filterRecentlyUpdatedExtensions(local: IExtension[], query: Query, options: IQueryOptions): IExtension[] {\n\t\tlet { value, includedCategories, excludedCategories } = this.parseCategories(query.value);\n\t\tconst currentTime = Date.now();\n\t\tlocal = local.filter(e => !e.isBuiltin && !e.outdated && e.local?.updated && e.local?.installedTimestamp !== undefined && currentTime - e.local.installedTimestamp < ExtensionsListView.RECENT_UPDATE_DURATION);\n\n\t\tvalue = value.replace(/@recentlyUpdated/g, '').replace(/@sort:(\\w+)(-\\w*)?/g, '').trim().toLowerCase();\n\n\t\tconst result = local.filter(e =>\n\t\t\t(e.name.toLowerCase().indexOf(value) > -1 || e.displayName.toLowerCase().indexOf(value) > -1)\n\t\t\t&& this.filterExtensionByCategory(e, includedCategories, excludedCategories));\n\n\t\toptions.sortBy = options.sortBy ?? LocalSortBy.UpdateDate;\n\n\t\treturn this.sortExtensions(result, options);\n\t}\n\n\tprivate filterExtensionsByFeature(local: IExtension[], query: Query, options: IQueryOptions): IExtension[] {\n\t\tconst value = query.value.replace(/@feature:/g, '').trim();\n\t\tconst featureId = value.split(' ')[0];\n\t\tconst feature = Registry.as<IExtensionFeaturesRegistry>(Extensions.ExtensionFeaturesRegistry).getExtensionFeature(featureId);\n\t\tif (!feature) {\n\t\t\treturn [];\n\t\t}\n\t\tconst renderer = feature.renderer ? this.instantiationService.createInstance<IExtensionFeatureRenderer>(feature.renderer) : undefined;\n\t\ttry {\n\t\t\tconst result = local.filter(e => {\n\t\t\t\tif (!e.local) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn renderer?.shouldRender(e.local.manifest) || this.extensionFeaturesManagementService.getAccessData(new ExtensionIdentifier(e.identifier.id), featureId);\n\t\t\t});\n\t\t\treturn this.sortExtensions(result, options);\n\t\t} finally {\n\t\t\trenderer?.dispose();\n\t\t}\n\t}\n\n\tprivate mergeAddedExtensions(extensions: IExtension[], newExtensions: IExtension[]): IExtension[] | undefined {\n\t\tconst oldExtensions = [...extensions];\n\t\tconst findPreviousExtensionIndex = (from: number): number => {\n\t\t\tlet index = -1;\n\t\t\tconst previousExtensionInNew = newExtensions[from];\n\t\t\tif (previousExtensionInNew) {\n\t\t\t\tindex = oldExtensions.findIndex(e => areSameExtensions(e.identifier, previousExtensionInNew.identifier));\n\t\t\t\tif (index === -1) {\n\t\t\t\t\treturn findPreviousExtensionIndex(from - 1);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn index;\n\t\t};\n\n\t\tlet hasChanged: boolean = false;\n\t\tfor (let index = 0; index < newExtensions.length; index++) {\n\t\t\tconst extension = newExtensions[index];\n\t\t\tif (extensions.every(r => !areSameExtensions(r.identifier, extension.identifier))) {\n\t\t\t\thasChanged = true;\n\t\t\t\textensions.splice(findPreviousExtensionIndex(index - 1) + 1, 0, extension);\n\t\t\t}\n\t\t}\n\n\t\treturn hasChanged ? extensions : undefined;\n\t}\n\n\tprivate async queryGallery(query: Query, options: IGalleryQueryOptions, token: CancellationToken): Promise<IPagedModel<IExtension>> {\n\t\tconst hasUserDefinedSortOrder = options.sortBy !== undefined;\n\t\tif (!hasUserDefinedSortOrder && !query.value.trim()) {\n\t\t\toptions.sortBy = GallerySortBy.InstallCount;\n\t\t}\n\n\t\tif (this.isRecommendationsQuery(query)) {\n\t\t\treturn this.queryRecommendations(query, options, token);\n\t\t}\n\n\t\tconst text = query.value;\n\n\t\tif (/\\bext:([^\\s]+)\\b/g.test(text)) {\n\t\t\toptions.text = text;\n\t\t\toptions.source = 'file-extension-tags';\n\t\t\treturn this.extensionsWorkbenchService.queryGallery(options, token).then(pager => this.getPagedModel(pager));\n\t\t}\n\n\t\tlet preferredResults: string[] = [];\n\t\tif (text) {\n\t\t\toptions.text = text.substring(0, 350);\n\t\t\toptions.source = 'searchText';\n\t\t\tif (!hasUserDefinedSortOrder) {\n\t\t\t\tconst manifest = await this.extensionManagementService.getExtensionsControlManifest();\n\t\t\t\tconst search = manifest.search;\n\t\t\t\tif (Array.isArray(search)) {\n\t\t\t\t\tfor (const s of search) {\n\t\t\t\t\t\tif (s.query && s.query.toLowerCase() === text.toLowerCase() && Array.isArray(s.preferredResults)) {\n\t\t\t\t\t\t\tpreferredResults = s.preferredResults;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\toptions.source = 'viewlet';\n\t\t}\n\n\t\tconst pager = await this.extensionsWorkbenchService.queryGallery(options, token);\n\n\t\tlet positionToUpdate = 0;\n\t\tfor (const preferredResult of preferredResults) {\n\t\t\tfor (let j = positionToUpdate; j < pager.firstPage.length; j++) {\n\t\t\t\tif (areSameExtensions(pager.firstPage[j].identifier, { id: preferredResult })) {\n\t\t\t\t\tif (positionToUpdate !== j) {\n\t\t\t\t\t\tconst preferredExtension = pager.firstPage.splice(j, 1)[0];\n\t\t\t\t\t\tpager.firstPage.splice(positionToUpdate, 0, preferredExtension);\n\t\t\t\t\t\tpositionToUpdate++;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this.getPagedModel(pager);\n\n\t}\n\n\tprivate sortExtensions(extensions: IExtension[], options: IQueryOptions): IExtension[] {\n\t\tswitch (options.sortBy) {\n\t\t\tcase GallerySortBy.InstallCount:\n\t\t\t\textensions = extensions.sort((e1, e2) => typeof e2.installCount === 'number' && typeof e1.installCount === 'number' ? e2.installCount - e1.installCount : NaN);\n\t\t\t\tbreak;\n\t\t\tcase LocalSortBy.UpdateDate:\n\t\t\t\textensions = extensions.sort((e1, e2) =>\n\t\t\t\t\ttypeof e2.local?.installedTimestamp === 'number' && typeof e1.local?.installedTimestamp === 'number' ? e2.local.installedTimestamp - e1.local.installedTimestamp :\n\t\t\t\t\t\ttypeof e2.local?.installedTimestamp === 'number' ? 1 :\n\t\t\t\t\t\t\ttypeof e1.local?.installedTimestamp === 'number' ? -1 : NaN);\n\t\t\t\tbreak;\n\t\t\tcase GallerySortBy.AverageRating:\n\t\t\tcase GallerySortBy.WeightedRating:\n\t\t\t\textensions = extensions.sort((e1, e2) => typeof e2.rating === 'number' && typeof e1.rating === 'number' ? e2.rating - e1.rating : NaN);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\textensions = extensions.sort((e1, e2) => e1.displayName.localeCompare(e2.displayName));\n\t\t\t\tbreak;\n\t\t}\n\t\tif (options.sortOrder === SortOrder.Descending) {\n\t\t\textensions = extensions.reverse();\n\t\t}\n\t\treturn extensions;\n\t}\n\n\tprivate isRecommendationsQuery(query: Query): boolean {\n\t\treturn ExtensionsListView.isWorkspaceRecommendedExtensionsQuery(query.value)\n\t\t\t|| ExtensionsListView.isKeymapsRecommendedExtensionsQuery(query.value)\n\t\t\t|| ExtensionsListView.isLanguageRecommendedExtensionsQuery(query.value)\n\t\t\t|| ExtensionsListView.isExeRecommendedExtensionsQuery(query.value)\n\t\t\t|| ExtensionsListView.isRemoteRecommendedExtensionsQuery(query.value)\n\t\t\t|| /@recommended:all/i.test(query.value)\n\t\t\t|| ExtensionsListView.isSearchRecommendedExtensionsQuery(query.value)\n\t\t\t|| ExtensionsListView.isRecommendedExtensionsQuery(query.value);\n\t}\n\n\tprivate async queryRecommendations(query: Query, options: IQueryOptions, token: CancellationToken): Promise<IPagedModel<IExtension>> {\n\t\t// Workspace recommendations\n\t\tif (ExtensionsListView.isWorkspaceRecommendedExtensionsQuery(query.value)) {\n\t\t\treturn this.getWorkspaceRecommendationsModel(query, options, token);\n\t\t}\n\n\t\t// Keymap recommendations\n\t\tif (ExtensionsListView.isKeymapsRecommendedExtensionsQuery(query.value)) {\n\t\t\treturn this.getKeymapRecommendationsModel(query, options, token);\n\t\t}\n\n\t\t// Language recommendations\n\t\tif (ExtensionsListView.isLanguageRecommendedExtensionsQuery(query.value)) {\n\t\t\treturn this.getLanguageRecommendationsModel(query, options, token);\n\t\t}\n\n\t\t// Exe recommendations\n\t\tif (ExtensionsListView.isExeRecommendedExtensionsQuery(query.value)) {\n\t\t\treturn this.getExeRecommendationsModel(query, options, token);\n\t\t}\n\n\t\t// Remote recommendations\n\t\tif (ExtensionsListView.isRemoteRecommendedExtensionsQuery(query.value)) {\n\t\t\treturn this.getRemoteRecommendationsModel(query, options, token);\n\t\t}\n\n\t\t// All recommendations\n\t\tif (/@recommended:all/i.test(query.value)) {\n\t\t\treturn this.getAllRecommendationsModel(options, token);\n\t\t}\n\n\t\t// Search recommendations\n\t\tif (ExtensionsListView.isSearchRecommendedExtensionsQuery(query.value) ||\n\t\t\t(ExtensionsListView.isRecommendedExtensionsQuery(query.value) && options.sortBy !== undefined)) {\n\t\t\treturn this.searchRecommendations(query, options, token);\n\t\t}\n\n\t\t// Other recommendations\n\t\tif (ExtensionsListView.isRecommendedExtensionsQuery(query.value)) {\n\t\t\treturn this.getOtherRecommendationsModel(query, options, token);\n\t\t}\n\n\t\treturn new PagedModel([]);\n\t}\n\n\tprotected async getInstallableRecommendations(recommendations: Array<string | URI>, options: IQueryOptions, token: CancellationToken): Promise<IExtension[]> {\n\t\tconst result: IExtension[] = [];\n\t\tif (recommendations.length) {\n\t\t\tconst galleryExtensions: string[] = [];\n\t\t\tconst resourceExtensions: URI[] = [];\n\t\t\tfor (const recommendation of recommendations) {\n\t\t\t\tif (typeof recommendation === 'string') {\n\t\t\t\t\tgalleryExtensions.push(recommendation);\n\t\t\t\t} else {\n\t\t\t\t\tresourceExtensions.push(recommendation);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (galleryExtensions.length) {\n\t\t\t\ttry {\n\t\t\t\t\tconst extensions = await this.extensionsWorkbenchService.getExtensions(galleryExtensions.map(id => ({ id })), { source: options.source }, token);\n\t\t\t\t\tfor (const extension of extensions) {\n\t\t\t\t\t\tif (extension.gallery && !extension.deprecationInfo && (await this.extensionManagementService.canInstall(extension.gallery))) {\n\t\t\t\t\t\t\tresult.push(extension);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tif (!resourceExtensions.length || !this.isOfflineError(error)) {\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (resourceExtensions.length) {\n\t\t\t\tconst extensions = await this.extensionsWorkbenchService.getResourceExtensions(resourceExtensions, true);\n\t\t\t\tfor (const extension of extensions) {\n\t\t\t\t\tif (await this.extensionsWorkbenchService.canInstall(extension)) {\n\t\t\t\t\t\tresult.push(extension);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n\n\tprotected async getWorkspaceRecommendations(): Promise<Array<string | URI>> {\n\t\tconst recommendations = await this.extensionRecommendationsService.getWorkspaceRecommendations();\n\t\tconst { important } = await this.extensionRecommendationsService.getConfigBasedRecommendations();\n\t\tfor (const configBasedRecommendation of important) {\n\t\t\tif (!recommendations.find(extensionId => extensionId === configBasedRecommendation)) {\n\t\t\t\trecommendations.push(configBasedRecommendation);\n\t\t\t}\n\t\t}\n\t\treturn recommendations;\n\t}\n\n\tprivate async getWorkspaceRecommendationsModel(query: Query, options: IQueryOptions, token: CancellationToken): Promise<IPagedModel<IExtension>> {\n\t\tconst recommendations = await this.getWorkspaceRecommendations();\n\t\tconst installableRecommendations = (await this.getInstallableRecommendations(recommendations, { ...options, source: 'recommendations-workspace' }, token));\n\t\treturn new PagedModel(installableRecommendations);\n\t}\n\n\tprivate async getKeymapRecommendationsModel(query: Query, options: IQueryOptions, token: CancellationToken): Promise<IPagedModel<IExtension>> {\n\t\tconst value = query.value.replace(/@recommended:keymaps/g, '').trim().toLowerCase();\n\t\tconst recommendations = this.extensionRecommendationsService.getKeymapRecommendations();\n\t\tconst installableRecommendations = (await this.getInstallableRecommendations(recommendations, { ...options, source: 'recommendations-keymaps' }, token))\n\t\t\t.filter(extension => extension.identifier.id.toLowerCase().indexOf(value) > -1);\n\t\treturn new PagedModel(installableRecommendations);\n\t}\n\n\tprivate async getLanguageRecommendationsModel(query: Query, options: IQueryOptions, token: CancellationToken): Promise<IPagedModel<IExtension>> {\n\t\tconst value = query.value.replace(/@recommended:languages/g, '').trim().toLowerCase();\n\t\tconst recommendations = this.extensionRecommendationsService.getLanguageRecommendations();\n\t\tconst installableRecommendations = (await this.getInstallableRecommendations(recommendations, { ...options, source: 'recommendations-languages' }, token))\n\t\t\t.filter(extension => extension.identifier.id.toLowerCase().indexOf(value) > -1);\n\t\treturn new PagedModel(installableRecommendations);\n\t}\n\n\tprivate async getRemoteRecommendationsModel(query: Query, options: IQueryOptions, token: CancellationToken): Promise<IPagedModel<IExtension>> {\n\t\tconst value = query.value.replace(/@recommended:remotes/g, '').trim().toLowerCase();\n\t\tconst recommendations = this.extensionRecommendationsService.getRemoteRecommendations();\n\t\tconst installableRecommendations = (await this.getInstallableRecommendations(recommendations, { ...options, source: 'recommendations-remotes' }, token))\n\t\t\t.filter(extension => extension.identifier.id.toLowerCase().indexOf(value) > -1);\n\t\treturn new PagedModel(installableRecommendations);\n\t}\n\n\tprivate async getExeRecommendationsModel(query: Query, options: IQueryOptions, token: CancellationToken): Promise<IPagedModel<IExtension>> {\n\t\tconst exe = query.value.replace(/@exe:/g, '').trim().toLowerCase();\n\t\tconst { important, others } = await this.extensionRecommendationsService.getExeBasedRecommendations(exe.startsWith('\"') ? exe.substring(1, exe.length - 1) : exe);\n\t\tconst installableRecommendations = await this.getInstallableRecommendations([...important, ...others], { ...options, source: 'recommendations-exe' }, token);\n\t\treturn new PagedModel(installableRecommendations);\n\t}\n\n\tprivate async getOtherRecommendationsModel(query: Query, options: IQueryOptions, token: CancellationToken): Promise<IPagedModel<IExtension>> {\n\t\tconst otherRecommendations = await this.getOtherRecommendations();\n\t\tconst installableRecommendations = await this.getInstallableRecommendations(otherRecommendations, { ...options, source: 'recommendations-other', sortBy: undefined }, token);\n\t\tconst result = coalesce(otherRecommendations.map(id => installableRecommendations.find(i => areSameExtensions(i.identifier, { id }))));\n\t\treturn new PagedModel(result);\n\t}\n\n\tprivate async getOtherRecommendations(): Promise<string[]> {\n\t\tconst local = (await this.extensionsWorkbenchService.queryLocal(this.options.server))\n\t\t\t.map(e => e.identifier.id.toLowerCase());\n\t\tconst workspaceRecommendations = (await this.getWorkspaceRecommendations())\n\t\t\t.map(extensionId => isString(extensionId) ? extensionId.toLowerCase() : extensionId);\n\n\t\treturn distinct(\n\t\t\t(await Promise.all([\n\t\t\t\t// Order is important\n\t\t\t\tthis.extensionRecommendationsService.getImportantRecommendations(),\n\t\t\t\tthis.extensionRecommendationsService.getFileBasedRecommendations(),\n\t\t\t\tthis.extensionRecommendationsService.getOtherRecommendations()\n\t\t\t])).flat().filter(extensionId => !local.includes(extensionId.toLowerCase()) && !workspaceRecommendations.includes(extensionId.toLowerCase())\n\t\t\t), extensionId => extensionId.toLowerCase());\n\t}\n\n\t// Get All types of recommendations, trimmed to show a max of 8 at any given time\n\tprivate async getAllRecommendationsModel(options: IQueryOptions, token: CancellationToken): Promise<IPagedModel<IExtension>> {\n\t\tconst localExtensions = await this.extensionsWorkbenchService.queryLocal(this.options.server);\n\t\tconst localExtensionIds = localExtensions.map(e => e.identifier.id.toLowerCase());\n\n\t\tconst allRecommendations = distinct(\n\t\t\t(await Promise.all([\n\t\t\t\t// Order is important\n\t\t\t\tthis.getWorkspaceRecommendations(),\n\t\t\t\tthis.extensionRecommendationsService.getImportantRecommendations(),\n\t\t\t\tthis.extensionRecommendationsService.getFileBasedRecommendations(),\n\t\t\t\tthis.extensionRecommendationsService.getOtherRecommendations()\n\t\t\t])).flat().filter(extensionId => {\n\t\t\t\tif (isString(extensionId)) {\n\t\t\t\t\treturn !localExtensionIds.includes(extensionId.toLowerCase());\n\t\t\t\t}\n\t\t\t\treturn !localExtensions.some(localExtension => localExtension.local && this.uriIdentityService.extUri.isEqual(localExtension.local.location, extensionId));\n\t\t\t}));\n\n\t\tconst installableRecommendations = await this.getInstallableRecommendations(allRecommendations, { ...options, source: 'recommendations-all', sortBy: undefined }, token);\n\n\t\tconst result: IExtension[] = [];\n\t\tfor (let i = 0; i < installableRecommendations.length && result.length < 8; i++) {\n\t\t\tconst recommendation = allRecommendations[i];\n\t\t\tif (isString(recommendation)) {\n\t\t\t\tconst extension = installableRecommendations.find(extension => areSameExtensions(extension.identifier, { id: recommendation }));\n\t\t\t\tif (extension) {\n\t\t\t\t\tresult.push(extension);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst extension = installableRecommendations.find(extension => extension.resourceExtension && this.uriIdentityService.extUri.isEqual(extension.resourceExtension.location, recommendation));\n\t\t\t\tif (extension) {\n\t\t\t\t\tresult.push(extension);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn new PagedModel(result);\n\t}\n\n\tprivate async searchRecommendations(query: Query, options: IQueryOptions, token: CancellationToken): Promise<IPagedModel<IExtension>> {\n\t\tconst value = query.value.replace(/@recommended/g, '').trim().toLowerCase();\n\t\tconst recommendations = distinct([...await this.getWorkspaceRecommendations(), ...await this.getOtherRecommendations()]);\n\t\tconst installableRecommendations = (await this.getInstallableRecommendations(recommendations, { ...options, source: 'recommendations', sortBy: undefined }, token))\n\t\t\t.filter(extension => extension.identifier.id.toLowerCase().indexOf(value) > -1);\n\t\treturn new PagedModel(this.sortExtensions(installableRecommendations, options));\n\t}\n\n\tprivate setModel(model: IPagedModel<IExtension>, error?: any, donotResetScrollTop?: boolean) {\n\t\tif (this.list) {\n\t\t\tthis.list.model = new DelayedPagedModel(model);\n\t\t\tif (!donotResetScrollTop) {\n\t\t\t\tthis.list.scrollTop = 0;\n\t\t\t}\n\t\t\tthis.updateBody(error);\n\t\t}\n\t\tif (this.badge) {\n\t\t\tthis.badge.setCount(this.count());\n\t\t}\n\t}\n\n\tprivate updateModel(model: IPagedModel<IExtension>) {\n\t\tif (this.list) {\n\t\t\tthis.list.model = new DelayedPagedModel(model);\n\t\t\tthis.updateBody();\n\t\t}\n\t\tif (this.badge) {\n\t\t\tthis.badge.setCount(this.count());\n\t\t}\n\t}\n\n\tprivate updateBody(error?: any): void {\n\t\tif (this.bodyTemplate) {\n\n\t\t\tconst count = this.count();\n\t\t\tthis.bodyTemplate.extensionsList.classList.toggle('hidden', count === 0);\n\t\t\tthis.bodyTemplate.messageContainer.classList.toggle('hidden', count > 0);\n\n\t\t\tif (count === 0 && this.isBodyVisible()) {\n\t\t\t\tif (error) {\n\t\t\t\t\tif (this.isOfflineError(error)) {\n\t\t\t\t\t\tthis.bodyTemplate.messageSeverityIcon.className = SeverityIcon.className(Severity.Warning);\n\t\t\t\t\t\tthis.bodyTemplate.messageBox.textContent = localize('offline error', \"Unable to search the Marketplace when offline, please check your network connection.\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.bodyTemplate.messageSeverityIcon.className = SeverityIcon.className(Severity.Error);\n\t\t\t\t\t\tthis.bodyTemplate.messageBox.textContent = localize('error', \"Error while fetching extensions. {0}\", getErrorMessage(error));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.bodyTemplate.messageSeverityIcon.className = '';\n\t\t\t\t\tthis.bodyTemplate.messageBox.textContent = localize('no extensions found', \"No extensions found.\");\n\t\t\t\t}\n\t\t\t\talert(this.bodyTemplate.messageBox.textContent);\n\t\t\t}\n\t\t}\n\n\t\tthis.updateSize();\n\t}\n\n\tprivate isOfflineError(error: Error): boolean {\n\t\tif (error instanceof ExtensionGalleryError) {\n\t\t\treturn error.code === ExtensionGalleryErrorCode.Offline;\n\t\t}\n\t\treturn isOfflineError(error);\n\t}\n\n\tprotected updateSize() {\n\t\tif (this.options.flexibleHeight) {\n\t\t\tthis.maximumBodySize = this.list?.model.length ? Number.POSITIVE_INFINITY : 0;\n\t\t\tthis.storageService.store(`${this.id}.size`, this.list?.model.length || 0, StorageScope.PROFILE, StorageTarget.MACHINE);\n\t\t}\n\t}\n\n\tprivate openExtension(extension: IExtension, options: { sideByside?: boolean; preserveFocus?: boolean; pinned?: boolean }): void {\n\t\textension = this.extensionsWorkbenchService.local.filter(e => areSameExtensions(e.identifier, extension.identifier))[0] || extension;\n\t\tthis.extensionsWorkbenchService.open(extension, options).then(undefined, err => this.onError(err));\n\t}\n\n\tprivate onError(err: any): void {\n\t\tif (isCancellationError(err)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst message = err && err.message || '';\n\n\t\tif (/ECONNREFUSED/.test(message)) {\n\t\t\tconst error = createErrorWithActions(localize('suggestProxyError', \"Marketplace returned 'ECONNREFUSED'. Please check the 'http.proxy' setting.\"), [\n\t\t\t\tnew Action('open user settings', localize('open user settings', \"Open User Settings\"), undefined, true, () => this.preferencesService.openUserSettings())\n\t\t\t]);\n\n\t\t\tthis.notificationService.error(error);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.notificationService.error(err);\n\t}\n\n\tprivate getPagedModel(arg: IPager<IExtension> | IExtension[]): IPagedModel<IExtension> {\n\t\tif (Array.isArray(arg)) {\n\t\t\treturn new PagedModel(arg);\n\t\t}\n\t\tconst pager = {\n\t\t\ttotal: arg.total,\n\t\t\tpageSize: arg.pageSize,\n\t\t\tfirstPage: arg.firstPage,\n\t\t\tgetPage: (pageIndex: number, cancellationToken: CancellationToken) => arg.getPage(pageIndex, cancellationToken)\n\t\t};\n\t\treturn new PagedModel(pager);\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tif (this.queryRequest) {\n\t\t\tthis.queryRequest.request.cancel();\n\t\t\tthis.queryRequest = null;\n\t\t}\n\t\tif (this.queryResult) {\n\t\t\tthis.queryResult.disposables.dispose();\n\t\t\tthis.queryResult = undefined;\n\t\t}\n\t\tthis.list = null;\n\t}\n\n\tstatic isLocalExtensionsQuery(query: string, sortBy?: string): boolean {\n\t\treturn this.isInstalledExtensionsQuery(query)\n\t\t\t|| this.isSearchInstalledExtensionsQuery(query)\n\t\t\t|| this.isOutdatedExtensionsQuery(query)\n\t\t\t|| this.isEnabledExtensionsQuery(query)\n\t\t\t|| this.isDisabledExtensionsQuery(query)\n\t\t\t|| this.isBuiltInExtensionsQuery(query)\n\t\t\t|| this.isSearchBuiltInExtensionsQuery(query)\n\t\t\t|| this.isBuiltInGroupExtensionsQuery(query)\n\t\t\t|| this.isSearchDeprecatedExtensionsQuery(query)\n\t\t\t|| this.isSearchWorkspaceUnsupportedExtensionsQuery(query)\n\t\t\t|| this.isSearchRecentlyUpdatedQuery(query)\n\t\t\t|| this.isSearchExtensionUpdatesQuery(query)\n\t\t\t|| this.isSortInstalledExtensionsQuery(query, sortBy)\n\t\t\t|| this.isFeatureExtensionsQuery(query);\n\t}\n\n\tstatic isSearchBuiltInExtensionsQuery(query: string): boolean {\n\t\treturn /@builtin\\s.+/i.test(query);\n\t}\n\n\tstatic isBuiltInExtensionsQuery(query: string): boolean {\n\t\treturn /^\\s*@builtin$/i.test(query.trim());\n\t}\n\n\tstatic isBuiltInGroupExtensionsQuery(query: string): boolean {\n\t\treturn /^\\s*@builtin:.+$/i.test(query.trim());\n\t}\n\n\tstatic isSearchWorkspaceUnsupportedExtensionsQuery(query: string): boolean {\n\t\treturn /^\\s*@workspaceUnsupported(:(untrusted|virtual)(Partial)?)?(\\s|$)/i.test(query);\n\t}\n\n\tstatic isInstalledExtensionsQuery(query: string): boolean {\n\t\treturn /@installed$/i.test(query);\n\t}\n\n\tstatic isSearchInstalledExtensionsQuery(query: string): boolean {\n\t\treturn /@installed\\s./i.test(query) || this.isFeatureExtensionsQuery(query);\n\t}\n\n\tstatic isOutdatedExtensionsQuery(query: string): boolean {\n\t\treturn /@outdated/i.test(query);\n\t}\n\n\tstatic isEnabledExtensionsQuery(query: string): boolean {\n\t\treturn /@enabled/i.test(query);\n\t}\n\n\tstatic isDisabledExtensionsQuery(query: string): boolean {\n\t\treturn /@disabled/i.test(query);\n\t}\n\n\tstatic isSearchDeprecatedExtensionsQuery(query: string): boolean {\n\t\treturn /@deprecated\\s?.*/i.test(query);\n\t}\n\n\tstatic isRecommendedExtensionsQuery(query: string): boolean {\n\t\treturn /^@recommended$/i.test(query.trim());\n\t}\n\n\tstatic isSearchRecommendedExtensionsQuery(query: string): boolean {\n\t\treturn /@recommended\\s.+/i.test(query);\n\t}\n\n\tstatic isWorkspaceRecommendedExtensionsQuery(query: string): boolean {\n\t\treturn /@recommended:workspace/i.test(query);\n\t}\n\n\tstatic isExeRecommendedExtensionsQuery(query: string): boolean {\n\t\treturn /@exe:.+/i.test(query);\n\t}\n\n\tstatic isRemoteRecommendedExtensionsQuery(query: string): boolean {\n\t\treturn /@recommended:remotes/i.test(query);\n\t}\n\n\tstatic isKeymapsRecommendedExtensionsQuery(query: string): boolean {\n\t\treturn /@recommended:keymaps/i.test(query);\n\t}\n\n\tstatic isLanguageRecommendedExtensionsQuery(query: string): boolean {\n\t\treturn /@recommended:languages/i.test(query);\n\t}\n\n\tstatic isSortInstalledExtensionsQuery(query: string, sortBy?: string): boolean {\n\t\treturn (sortBy !== undefined && sortBy !== '' && query === '') || (!sortBy && /^@sort:\\S*$/i.test(query));\n\t}\n\n\tstatic isSearchPopularQuery(query: string): boolean {\n\t\treturn /@popular/i.test(query);\n\t}\n\n\tstatic isSearchRecentlyPublishedQuery(query: string): boolean {\n\t\treturn /@recentlyPublished/i.test(query);\n\t}\n\n\tstatic isSearchRecentlyUpdatedQuery(query: string): boolean {\n\t\treturn /@recentlyUpdated/i.test(query);\n\t}\n\n\tstatic isSearchExtensionUpdatesQuery(query: string): boolean {\n\t\treturn /@updates/i.test(query);\n\t}\n\n\tstatic isSortUpdateDateQuery(query: string): boolean {\n\t\treturn /@sort:updateDate/i.test(query);\n\t}\n\n\tstatic isFeatureExtensionsQuery(query: string): boolean {\n\t\treturn /@feature:/i.test(query);\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\t\tif (!this.list) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!(this.list.getFocus().length || this.list.getSelection().length)) {\n\t\t\tthis.list.focusNext();\n\t\t}\n\t\tthis.list.domFocus();\n\t}\n}\n\nexport class DefaultPopularExtensionsView extends ExtensionsListView {\n\n\toverride async show(): Promise<IPagedModel<IExtension>> {\n\t\tconst query = this.extensionManagementServerService.webExtensionManagementServer && !this.extensionManagementServerService.localExtensionManagementServer && !this.extensionManagementServerService.remoteExtensionManagementServer ? '@web' : '';\n\t\treturn super.show(query);\n\t}\n\n}\n\nexport class ServerInstalledExtensionsView extends ExtensionsListView {\n\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tquery = query ? query : '@installed';\n\t\tif (!ExtensionsListView.isLocalExtensionsQuery(query) || ExtensionsListView.isSortInstalledExtensionsQuery(query)) {\n\t\t\tquery = query += ' @installed';\n\t\t}\n\t\treturn super.show(query.trim());\n\t}\n\n}\n\nexport class EnabledExtensionsView extends ExtensionsListView {\n\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tquery = query || '@enabled';\n\t\treturn ExtensionsListView.isEnabledExtensionsQuery(query) ? super.show(query) :\n\t\t\tExtensionsListView.isSortInstalledExtensionsQuery(query) ? super.show('@enabled ' + query) : this.showEmptyModel();\n\t}\n}\n\nexport class DisabledExtensionsView extends ExtensionsListView {\n\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tquery = query || '@disabled';\n\t\treturn ExtensionsListView.isDisabledExtensionsQuery(query) ? super.show(query) :\n\t\t\tExtensionsListView.isSortInstalledExtensionsQuery(query) ? super.show('@disabled ' + query) : this.showEmptyModel();\n\t}\n}\n\nexport class OutdatedExtensionsView extends ExtensionsListView {\n\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tquery = query ? query : '@outdated';\n\t\tif (ExtensionsListView.isSearchExtensionUpdatesQuery(query)) {\n\t\t\tquery = query.replace('@updates', '@outdated');\n\t\t}\n\t\treturn super.show(query.trim());\n\t}\n\n\tprotected override updateSize() {\n\t\tsuper.updateSize();\n\t\tthis.setExpanded(this.count() > 0);\n\t}\n\n}\n\nexport class RecentlyUpdatedExtensionsView extends ExtensionsListView {\n\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tquery = query ? query : '@recentlyUpdated';\n\t\tif (ExtensionsListView.isSearchExtensionUpdatesQuery(query)) {\n\t\t\tquery = query.replace('@updates', '@recentlyUpdated');\n\t\t}\n\t\treturn super.show(query.trim());\n\t}\n\n}\n\nexport interface StaticQueryExtensionsViewOptions extends ExtensionsListViewOptions {\n\treadonly query: string;\n}\n\nexport class StaticQueryExtensionsView extends ExtensionsListView {\n\n\tconstructor(\n\t\tprotected override readonly options: StaticQueryExtensionsViewOptions,\n\t\tviewletViewOptions: IViewletViewOptions,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IExtensionService extensionService: IExtensionService,\n\t\t@IExtensionsWorkbenchService extensionsWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IExtensionRecommendationsService extensionRecommendationsService: IExtensionRecommendationsService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IHoverService hoverService: IHoverService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IExtensionManagementServerService extensionManagementServerService: IExtensionManagementServerService,\n\t\t@IExtensionManifestPropertiesService extensionManifestPropertiesService: IExtensionManifestPropertiesService,\n\t\t@IWorkbenchExtensionManagementService extensionManagementService: IWorkbenchExtensionManagementService,\n\t\t@IWorkspaceContextService workspaceService: IWorkspaceContextService,\n\t\t@IProductService productService: IProductService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IPreferencesService preferencesService: IPreferencesService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IWorkspaceTrustManagementService workspaceTrustManagementService: IWorkspaceTrustManagementService,\n\t\t@IWorkbenchExtensionEnablementService extensionEnablementService: IWorkbenchExtensionEnablementService,\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService,\n\t\t@IExtensionFeaturesManagementService extensionFeaturesManagementService: IExtensionFeaturesManagementService,\n\t\t@IUriIdentityService uriIdentityService: IUriIdentityService,\n\t\t@ILogService logService: ILogService\n\t) {\n\t\tsuper(options, viewletViewOptions, notificationService, keybindingService, contextMenuService, instantiationService, themeService, extensionService,\n\t\t\textensionsWorkbenchService, extensionRecommendationsService, telemetryService, hoverService, configurationService, contextService, extensionManagementServerService,\n\t\t\textensionManifestPropertiesService, extensionManagementService, workspaceService, productService, contextKeyService, viewDescriptorService, openerService,\n\t\t\tpreferencesService, storageService, workspaceTrustManagementService, extensionEnablementService, layoutService, extensionFeaturesManagementService,\n\t\t\turiIdentityService, logService);\n\t}\n\n\toverride show(): Promise<IPagedModel<IExtension>> {\n\t\treturn super.show(this.options.query);\n\t}\n}\n\nfunction toSpecificWorkspaceUnsupportedQuery(query: string, qualifier: string): string | undefined {\n\tif (!query) {\n\t\treturn '@workspaceUnsupported:' + qualifier;\n\t}\n\tconst match = query.match(new RegExp(`@workspaceUnsupported(:${qualifier})?(\\\\s|$)`, 'i'));\n\tif (match) {\n\t\tif (!match[1]) {\n\t\t\treturn query.replace(/@workspaceUnsupported/gi, '@workspaceUnsupported:' + qualifier);\n\t\t}\n\t\treturn query;\n\t}\n\treturn undefined;\n}\n\n\nexport class UntrustedWorkspaceUnsupportedExtensionsView extends ExtensionsListView {\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tconst updatedQuery = toSpecificWorkspaceUnsupportedQuery(query, 'untrusted');\n\t\treturn updatedQuery ? super.show(updatedQuery) : this.showEmptyModel();\n\t}\n}\n\nexport class UntrustedWorkspacePartiallySupportedExtensionsView extends ExtensionsListView {\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tconst updatedQuery = toSpecificWorkspaceUnsupportedQuery(query, 'untrustedPartial');\n\t\treturn updatedQuery ? super.show(updatedQuery) : this.showEmptyModel();\n\t}\n}\n\nexport class VirtualWorkspaceUnsupportedExtensionsView extends ExtensionsListView {\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tconst updatedQuery = toSpecificWorkspaceUnsupportedQuery(query, 'virtual');\n\t\treturn updatedQuery ? super.show(updatedQuery) : this.showEmptyModel();\n\t}\n}\n\nexport class VirtualWorkspacePartiallySupportedExtensionsView extends ExtensionsListView {\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tconst updatedQuery = toSpecificWorkspaceUnsupportedQuery(query, 'virtualPartial');\n\t\treturn updatedQuery ? super.show(updatedQuery) : this.showEmptyModel();\n\t}\n}\n\nexport class DeprecatedExtensionsView extends ExtensionsListView {\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\treturn ExtensionsListView.isSearchDeprecatedExtensionsQuery(query) ? super.show(query) : this.showEmptyModel();\n\t}\n}\n\nexport class SearchMarketplaceExtensionsView extends ExtensionsListView {\n\n\tprivate readonly reportSearchFinishedDelayer = this._register(new ThrottledDelayer(2000));\n\tprivate searchWaitPromise: Promise<void> = Promise.resolve();\n\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tconst queryPromise = super.show(query);\n\t\tthis.reportSearchFinishedDelayer.trigger(() => this.reportSearchFinished());\n\t\tthis.searchWaitPromise = queryPromise.then(null, null);\n\t\treturn queryPromise;\n\t}\n\n\tprivate async reportSearchFinished(): Promise<void> {\n\t\tawait this.searchWaitPromise;\n\t\tthis.telemetryService.publicLog2('extensionsView:MarketplaceSearchFinished');\n\t}\n}\n\nexport class DefaultRecommendedExtensionsView extends ExtensionsListView {\n\tprivate readonly recommendedExtensionsQuery = '@recommended:all';\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tthis._register(this.extensionRecommendationsService.onDidChangeRecommendations(() => {\n\t\t\tthis.show('');\n\t\t}));\n\t}\n\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tif (query && query.trim() !== this.recommendedExtensionsQuery) {\n\t\t\treturn this.showEmptyModel();\n\t\t}\n\t\tconst model = await super.show(this.recommendedExtensionsQuery);\n\t\tif (!this.extensionsWorkbenchService.local.some(e => !e.isBuiltin)) {\n\t\t\t// This is part of popular extensions view. Collapse if no installed extensions.\n\t\t\tthis.setExpanded(model.length > 0);\n\t\t}\n\t\treturn model;\n\t}\n\n}\n\nexport class RecommendedExtensionsView extends ExtensionsListView {\n\tprivate readonly recommendedExtensionsQuery = '@recommended';\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tthis._register(this.extensionRecommendationsService.onDidChangeRecommendations(() => {\n\t\t\tthis.show('');\n\t\t}));\n\t}\n\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\treturn (query && query.trim() !== this.recommendedExtensionsQuery) ? this.showEmptyModel() : super.show(this.recommendedExtensionsQuery);\n\t}\n}\n\nexport class WorkspaceRecommendedExtensionsView extends ExtensionsListView implements IWorkspaceRecommendedExtensionsView {\n\tprivate readonly recommendedExtensionsQuery = '@recommended:workspace';\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tthis._register(this.extensionRecommendationsService.onDidChangeRecommendations(() => this.show(this.recommendedExtensionsQuery)));\n\t\tthis._register(this.contextService.onDidChangeWorkbenchState(() => this.show(this.recommendedExtensionsQuery)));\n\t}\n\n\toverride async show(query: string): Promise<IPagedModel<IExtension>> {\n\t\tconst shouldShowEmptyView = query && query.trim() !== '@recommended' && query.trim() !== '@recommended:workspace';\n\t\tconst model = await (shouldShowEmptyView ? this.showEmptyModel() : super.show(this.recommendedExtensionsQuery));\n\t\tthis.setExpanded(model.length > 0);\n\t\treturn model;\n\t}\n\n\tprivate async getInstallableWorkspaceRecommendations(): Promise<IExtension[]> {\n\t\tconst installed = (await this.extensionsWorkbenchService.queryLocal())\n\t\t\t.filter(l => l.enablementState !== EnablementState.DisabledByExtensionKind); // Filter extensions disabled by kind\n\t\tconst recommendations = (await this.getWorkspaceRecommendations())\n\t\t\t.filter(recommendation => installed.every(local => isString(recommendation) ? !areSameExtensions({ id: recommendation }, local.identifier) : !this.uriIdentityService.extUri.isEqual(recommendation, local.local?.location)));\n\t\treturn this.getInstallableRecommendations(recommendations, { source: 'install-all-workspace-recommendations' }, CancellationToken.None);\n\t}\n\n\tasync installWorkspaceRecommendations(): Promise<void> {\n\t\tconst installableRecommendations = await this.getInstallableWorkspaceRecommendations();\n\t\tif (installableRecommendations.length) {\n\t\t\tconst galleryExtensions: InstallExtensionInfo[] = [];\n\t\t\tconst resourceExtensions: IExtension[] = [];\n\t\t\tfor (const recommendation of installableRecommendations) {\n\t\t\t\tif (recommendation.gallery) {\n\t\t\t\t\tgalleryExtensions.push({ extension: recommendation.gallery, options: {} });\n\t\t\t\t} else {\n\t\t\t\t\tresourceExtensions.push(recommendation);\n\t\t\t\t}\n\t\t\t}\n\t\t\tawait Promise.all([\n\t\t\t\tthis.extensionManagementService.installGalleryExtensions(galleryExtensions),\n\t\t\t\t...resourceExtensions.map(extension => this.extensionsWorkbenchService.install(extension))\n\t\t\t]);\n\t\t} else {\n\t\t\tthis.notificationService.notify({\n\t\t\t\tseverity: Severity.Info,\n\t\t\t\tmessage: localize('no local extensions', \"There are no extensions to install.\")\n\t\t\t});\n\t\t}\n\t}\n\n}\n\nexport function getAriaLabelForExtension(extension: IExtension | null): string {\n\tif (!extension) {\n\t\treturn '';\n\t}\n\tconst publisher = extension.publisherDomain?.verified ? localize('extension.arialabel.verifiedPublisher', \"Verified Publisher {0}\", extension.publisherDisplayName) : localize('extension.arialabel.publisher', \"Publisher {0}\", extension.publisherDisplayName);\n\tconst deprecated = extension?.deprecationInfo ? localize('extension.arialabel.deprecated', \"Deprecated\") : '';\n\tconst rating = extension?.rating ? localize('extension.arialabel.rating', \"Rated {0} out of 5 stars by {1} users\", extension.rating.toFixed(2), extension.ratingCount) : '';\n\treturn `${extension.displayName}, ${deprecated ? `${deprecated}, ` : ''}${extension.version}, ${publisher}, ${extension.description} ${rating ? `, ${rating}` : ''}`;\n}\n"],
  "mappings": "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",
  "names": ["LocalSortBy", "model", "result", "local", "pager", "extension"]
}
