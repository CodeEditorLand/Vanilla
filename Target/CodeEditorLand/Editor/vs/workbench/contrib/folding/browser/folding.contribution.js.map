{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/folding/browser/folding.contribution.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from \"../../../../base/common/lifecycle.js\";\nimport { editorConfigurationBaseNode } from \"../../../../editor/common/config/editorConfigurationSchema.js\";\nimport type { FoldingRangeProvider } from \"../../../../editor/common/languages.js\";\nimport type { ITextModel } from \"../../../../editor/common/model.js\";\nimport { FoldingController } from \"../../../../editor/contrib/folding/browser/folding.js\";\nimport * as nls from \"../../../../nls.js\";\nimport { IConfigurationService } from \"../../../../platform/configuration/common/configuration.js\";\nimport {\n\tExtensions as ConfigurationExtensions,\n\ttype IConfigurationRegistry,\n} from \"../../../../platform/configuration/common/configurationRegistry.js\";\nimport type { IExtensionDescription } from \"../../../../platform/extensions/common/extensions.js\";\nimport { Registry } from \"../../../../platform/registry/common/platform.js\";\nimport {\n\ttype IWorkbenchContribution,\n\ttype IWorkbenchContributionsRegistry,\n\tExtensions as WorkbenchExtensions,\n} from \"../../../common/contributions.js\";\nimport { IExtensionService } from \"../../../services/extensions/common/extensions.js\";\nimport { LifecyclePhase } from \"../../../services/lifecycle/common/lifecycle.js\";\n\nclass DefaultFoldingRangeProvider\n\textends Disposable\n\timplements IWorkbenchContribution\n{\n\tstatic readonly configName = \"editor.defaultFoldingRangeProvider\";\n\n\tstatic extensionIds: (string | null)[] = [];\n\tstatic extensionItemLabels: string[] = [];\n\tstatic extensionDescriptions: string[] = [];\n\n\tconstructor(\n\t\t@IExtensionService\n\t\tprivate readonly _extensionService: IExtensionService,\n\t\t@IConfigurationService\n\t\tprivate readonly _configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\t\tthis._store.add(\n\t\t\tthis._extensionService.onDidChangeExtensions(\n\t\t\t\tthis._updateConfigValues,\n\t\t\t\tthis,\n\t\t\t),\n\t\t);\n\t\tthis._store.add(\n\t\t\tFoldingController.setFoldingRangeProviderSelector(\n\t\t\t\tthis._selectFoldingRangeProvider.bind(this),\n\t\t\t),\n\t\t);\n\n\t\tthis._updateConfigValues();\n\t}\n\n\tprivate async _updateConfigValues(): Promise<void> {\n\t\tawait this._extensionService.whenInstalledExtensionsRegistered();\n\n\t\tDefaultFoldingRangeProvider.extensionIds.length = 0;\n\t\tDefaultFoldingRangeProvider.extensionItemLabels.length = 0;\n\t\tDefaultFoldingRangeProvider.extensionDescriptions.length = 0;\n\n\t\tDefaultFoldingRangeProvider.extensionIds.push(null);\n\t\tDefaultFoldingRangeProvider.extensionItemLabels.push(\n\t\t\tnls.localize(\"null\", \"All\"),\n\t\t);\n\t\tDefaultFoldingRangeProvider.extensionDescriptions.push(\n\t\t\tnls.localize(\n\t\t\t\t\"nullFormatterDescription\",\n\t\t\t\t\"All active folding range providers\",\n\t\t\t),\n\t\t);\n\n\t\tconst languageExtensions: IExtensionDescription[] = [];\n\t\tconst otherExtensions: IExtensionDescription[] = [];\n\n\t\tfor (const extension of this._extensionService.extensions) {\n\t\t\tif (extension.main || extension.browser) {\n\t\t\t\tif (\n\t\t\t\t\textension.categories?.find(\n\t\t\t\t\t\t(cat) => cat === \"Programming Languages\",\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tlanguageExtensions.push(extension);\n\t\t\t\t} else {\n\t\t\t\t\totherExtensions.push(extension);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst sorter = (a: IExtensionDescription, b: IExtensionDescription) =>\n\t\t\ta.name.localeCompare(b.name);\n\n\t\tfor (const extension of languageExtensions.sort(sorter)) {\n\t\t\tDefaultFoldingRangeProvider.extensionIds.push(\n\t\t\t\textension.identifier.value,\n\t\t\t);\n\t\t\tDefaultFoldingRangeProvider.extensionItemLabels.push(\n\t\t\t\textension.displayName ?? \"\",\n\t\t\t);\n\t\t\tDefaultFoldingRangeProvider.extensionDescriptions.push(\n\t\t\t\textension.description ?? \"\",\n\t\t\t);\n\t\t}\n\t\tfor (const extension of otherExtensions.sort(sorter)) {\n\t\t\tDefaultFoldingRangeProvider.extensionIds.push(\n\t\t\t\textension.identifier.value,\n\t\t\t);\n\t\t\tDefaultFoldingRangeProvider.extensionItemLabels.push(\n\t\t\t\textension.displayName ?? \"\",\n\t\t\t);\n\t\t\tDefaultFoldingRangeProvider.extensionDescriptions.push(\n\t\t\t\textension.description ?? \"\",\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate _selectFoldingRangeProvider(\n\t\tproviders: FoldingRangeProvider[],\n\t\tdocument: ITextModel,\n\t): FoldingRangeProvider[] | undefined {\n\t\tconst value = this._configurationService.getValue<string>(\n\t\t\tDefaultFoldingRangeProvider.configName,\n\t\t\t{ overrideIdentifier: document.getLanguageId() },\n\t\t);\n\t\tif (value) {\n\t\t\treturn providers.filter((p) => p.id === value);\n\t\t}\n\t\treturn undefined;\n\t}\n}\n\nRegistry.as<IConfigurationRegistry>(\n\tConfigurationExtensions.Configuration,\n).registerConfiguration({\n\t...editorConfigurationBaseNode,\n\tproperties: {\n\t\t[DefaultFoldingRangeProvider.configName]: {\n\t\t\tdescription: nls.localize(\n\t\t\t\t\"formatter.default\",\n\t\t\t\t\"Defines a default folding range provider that takes precedence over all other folding range providers. Must be the identifier of an extension contributing a folding range provider.\",\n\t\t\t),\n\t\t\ttype: [\"string\", \"null\"],\n\t\t\tdefault: null,\n\t\t\tenum: DefaultFoldingRangeProvider.extensionIds,\n\t\t\tenumItemLabels: DefaultFoldingRangeProvider.extensionItemLabels,\n\t\t\tmarkdownEnumDescriptions:\n\t\t\t\tDefaultFoldingRangeProvider.extensionDescriptions,\n\t\t},\n\t},\n});\n\nRegistry.as<IWorkbenchContributionsRegistry>(\n\tWorkbenchExtensions.Workbench,\n).registerWorkbenchContribution(\n\tDefaultFoldingRangeProvider,\n\tLifecyclePhase.Restored,\n);\n"],
  "mappings": "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",
  "names": []
}
