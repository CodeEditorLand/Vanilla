import o from"assert";import{SnippetFile as l,Snippet as n,SnippetSource as s}from"../../browser/snippetsFile.js";import{URI as a}from"../../../../../base/common/uri.js";import{SnippetParser as c}from"../../../../../editor/contrib/snippet/browser/snippetParser.js";import{generateUuid as i}from"../../../../../base/common/uuid.js";import{ensureNoDisposablesAreLeakedInTestSuite as u}from"../../../../../base/test/common/utils.js";suite("Snippets",function(){u();class r extends l{constructor(e,p){super(s.Extension,e,void 0,void 0,void 0,void 0),this.data.push(...p)}}test("SnippetFile#select",()=>{let t=new r(a.file("somepath/foo.code-snippets"),[]),e=[];t.select("",e),o.strictEqual(e.length,0),t=new r(a.file("somepath/foo.code-snippets"),[new n(!1,["foo"],"FooSnippet1","foo","","snippet","test",s.User,i()),new n(!1,["foo"],"FooSnippet2","foo","","snippet","test",s.User,i()),new n(!1,["bar"],"BarSnippet1","foo","","snippet","test",s.User,i()),new n(!1,["bar.comment"],"BarSnippet2","foo","","snippet","test",s.User,i()),new n(!1,["bar.strings"],"BarSnippet2","foo","","snippet","test",s.User,i()),new n(!1,["bazz","bazz"],"BazzSnippet1","foo","","snippet","test",s.User,i())]),e=[],t.select("foo",e),o.strictEqual(e.length,2),e=[],t.select("fo",e),o.strictEqual(e.length,0),e=[],t.select("bar",e),o.strictEqual(e.length,1),e=[],t.select("bar.comment",e),o.strictEqual(e.length,2),e=[],t.select("bazz",e),o.strictEqual(e.length,1)}),test("SnippetFile#select - any scope",function(){const t=new r(a.file("somepath/foo.code-snippets"),[new n(!1,[],"AnySnippet1","foo","","snippet","test",s.User,i()),new n(!1,["foo"],"FooSnippet1","foo","","snippet","test",s.User,i())]),e=[];t.select("foo",e),o.strictEqual(e.length,2)}),test("Snippet#needsClipboard",function(){function t(e,p){const f=new n(!1,["foo"],"FooSnippet1","foo","",e,"test",s.User,i());o.strictEqual(f.needsClipboard,p),o.strictEqual(c.guessNeedsClipboard(e),p)}t("foo$CLIPBOARD",!0),t("${CLIPBOARD}",!0),t("foo${CLIPBOARD}bar",!0),t("foo$clipboard",!1),t("foo${clipboard}",!1),t("baba",!1)}),test("Snippet#isTrivial",function(){function t(e,p){const f=new n(!1,["foo"],"FooSnippet1","foo","",e,"test",s.User,i());o.strictEqual(f.isTrivial,p)}t("foo",!0),t("foo$0",!0),t("foo$0bar",!1),t("foo$1",!1),t("foo$1$0",!1),t("${1:foo}",!1)})});
