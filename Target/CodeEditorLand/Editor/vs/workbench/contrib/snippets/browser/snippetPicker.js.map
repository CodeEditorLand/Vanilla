{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/snippets/browser/snippetPicker.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport { ISnippetsService } from './snippets.js';\nimport { Snippet, SnippetSource } from './snippetsFile.js';\nimport { IQuickPickItem, IQuickInputService, QuickPickInput } from '../../../../platform/quickinput/common/quickInput.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\n\nexport async function pickSnippet(accessor: ServicesAccessor, languageIdOrSnippets: string | Snippet[]): Promise<Snippet | undefined> {\n\n\tconst snippetService = accessor.get(ISnippetsService);\n\tconst quickInputService = accessor.get(IQuickInputService);\n\n\tinterface ISnippetPick extends IQuickPickItem {\n\t\tsnippet: Snippet;\n\t}\n\n\tlet snippets: Snippet[];\n\tif (Array.isArray(languageIdOrSnippets)) {\n\t\tsnippets = languageIdOrSnippets;\n\t} else {\n\t\tsnippets = (await snippetService.getSnippets(languageIdOrSnippets, { includeDisabledSnippets: true, includeNoPrefixSnippets: true }));\n\t}\n\n\tsnippets.sort((a, b) => a.snippetSource - b.snippetSource);\n\n\tconst makeSnippetPicks = () => {\n\t\tconst result: QuickPickInput<ISnippetPick>[] = [];\n\t\tlet prevSnippet: Snippet | undefined;\n\t\tfor (const snippet of snippets) {\n\t\t\tconst pick: ISnippetPick = {\n\t\t\t\tlabel: snippet.prefix || snippet.name,\n\t\t\t\tdetail: snippet.description || snippet.body,\n\t\t\t\tsnippet\n\t\t\t};\n\t\t\tif (!prevSnippet || prevSnippet.snippetSource !== snippet.snippetSource || prevSnippet.source !== snippet.source) {\n\t\t\t\tlet label = '';\n\t\t\t\tswitch (snippet.snippetSource) {\n\t\t\t\t\tcase SnippetSource.User:\n\t\t\t\t\t\tlabel = nls.localize('sep.userSnippet', \"User Snippets\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase SnippetSource.Extension:\n\t\t\t\t\t\tlabel = snippet.source;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase SnippetSource.Workspace:\n\t\t\t\t\t\tlabel = nls.localize('sep.workspaceSnippet', \"Workspace Snippets\");\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tresult.push({ type: 'separator', label });\n\t\t\t}\n\n\t\t\tif (snippet.snippetSource === SnippetSource.Extension) {\n\t\t\t\tconst isEnabled = snippetService.isEnabled(snippet);\n\t\t\t\tif (isEnabled) {\n\t\t\t\t\tpick.buttons = [{\n\t\t\t\t\t\ticonClass: ThemeIcon.asClassName(Codicon.eyeClosed),\n\t\t\t\t\t\ttooltip: nls.localize('disableSnippet', 'Hide from IntelliSense')\n\t\t\t\t\t}];\n\t\t\t\t} else {\n\t\t\t\t\tpick.description = nls.localize('isDisabled', \"(hidden from IntelliSense)\");\n\t\t\t\t\tpick.buttons = [{\n\t\t\t\t\t\ticonClass: ThemeIcon.asClassName(Codicon.eye),\n\t\t\t\t\t\ttooltip: nls.localize('enable.snippet', 'Show in IntelliSense')\n\t\t\t\t\t}];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tresult.push(pick);\n\t\t\tprevSnippet = snippet;\n\t\t}\n\t\treturn result;\n\t};\n\n\tconst disposables = new DisposableStore();\n\tconst picker = disposables.add(quickInputService.createQuickPick<ISnippetPick>({ useSeparators: true }));\n\tpicker.placeholder = nls.localize('pick.placeholder', \"Select a snippet\");\n\tpicker.matchOnDetail = true;\n\tpicker.ignoreFocusOut = false;\n\tpicker.keepScrollPosition = true;\n\tdisposables.add(picker.onDidTriggerItemButton(ctx => {\n\t\tconst isEnabled = snippetService.isEnabled(ctx.item.snippet);\n\t\tsnippetService.updateEnablement(ctx.item.snippet, !isEnabled);\n\t\tpicker.items = makeSnippetPicks();\n\t}));\n\tpicker.items = makeSnippetPicks();\n\tif (!picker.items.length) {\n\t\tpicker.validationMessage = nls.localize('pick.noSnippetAvailable', \"No snippet available\");\n\t}\n\tpicker.show();\n\n\t// wait for an item to be picked or the picker to become hidden\n\tawait Promise.race([Event.toPromise(picker.onDidAccept), Event.toPromise(picker.onDidHide)]);\n\tconst result = picker.selectedItems[0]?.snippet;\n\tdisposables.dispose();\n\treturn result;\n}\n"],
  "mappings": "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",
  "names": ["result"]
}
