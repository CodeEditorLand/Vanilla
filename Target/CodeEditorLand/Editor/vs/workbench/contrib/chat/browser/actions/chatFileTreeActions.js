import{KeyCode as a,KeyMod as s}from"../../../../../../vs/base/common/keyCodes.js";import"../../../../../../vs/editor/browser/editorExtensions.js";import{localize2 as d}from"../../../../../../vs/nls.js";import{Action2 as u,registerAction2 as p}from"../../../../../../vs/platform/actions/common/actions.js";import{KeybindingWeight as g}from"../../../../../../vs/platform/keybinding/common/keybindingsRegistry.js";import{CHAT_CATEGORY as f}from"../../../../../../vs/workbench/contrib/chat/browser/actions/chatActions.js";import{IChatWidgetService as A}from"../../../../../../vs/workbench/contrib/chat/browser/chat.js";import{CONTEXT_CHAT_ENABLED as m,CONTEXT_IN_CHAT_SESSION as h}from"../../../../../../vs/workbench/contrib/chat/common/chatContextKeys.js";import{isResponseVM as F}from"../../../../../../vs/workbench/contrib/chat/common/chatViewModel.js";function H(){p(class extends u{constructor(){super({id:"workbench.action.chat.nextFileTree",title:d("interactive.nextFileTree.label","Next File Tree"),keybinding:{primary:s.CtrlCmd|a.F9,weight:g.WorkbenchContrib,when:h},precondition:m,f1:!0,category:f})}run(t,...n){T(t,!1)}}),p(class extends u{constructor(){super({id:"workbench.action.chat.previousFileTree",title:d("interactive.previousFileTree.label","Previous File Tree"),keybinding:{primary:s.CtrlCmd|s.Shift|a.F9,weight:g.WorkbenchContrib,when:h},precondition:m,f1:!0,category:f})}run(t,...n){T(t,!0)}})}function T(i,t){const e=i.get(A).lastFocusedWidget;if(!e)return;const c=!e.inputEditor.hasWidgetFocus()&&e.getFocus(),r=(F(c)?c:void 0)??e.viewModel?.getItems().reverse().find(v=>F(v));if(!r)return;e.reveal(r);const o=e.getFileTreeInfosForResponse(r),l=e.getLastFocusedFileTreeForResponse(r),C=l?(l.treeIndex+(t?-1:1)+o.length)%o.length:t?o.length-1:0;o[C]?.focus()}export{H as registerChatFileTreeActions};
