var u=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var p=(l,e,t,i)=>{for(var o=i>1?void 0:i?b(e,t):e,r=l.length-1,n;r>=0;r--)(n=l[r])&&(o=(i?n(e,t,o):n(o))||o);return i&&o&&u(e,t,o),o},g=(l,e)=>(t,i)=>e(t,i,l);import{marked as d}from"../../../../base/common/marked/marked.js";import{localize as s}from"../../../../nls.js";import{IAccessibleViewService as m}from"../../../../platform/accessibility/browser/accessibleView.js";import{AccessibilityVerbositySettingId as f}from"../../accessibility/browser/accessibilityConfiguration.js";import{isRequestVM as k,isResponseVM as C,isWelcomeVM as h}from"../common/chatViewModel.js";let a=class{constructor(e){this._accessibleViewService=e}getWidgetRole(){return"list"}getRole(e){return"listitem"}getWidgetAriaLabel(){return s("chat","Chat")}getAriaLabel(e){return k(e)?e.messageText:C(e)?this._getLabelWithCodeBlockCount(e):h(e)?e.content.map(t=>"value"in t?t.value:t.map(i=>i.message).join(`
`)).join(`
`):""}_getLabelWithCodeBlockCount(e){const t=this._accessibleViewService.getOpenAriaHint(f.Chat);let i="";const o=e.response.value.filter(c=>!("value"in c))?.length??0;let r="";switch(o){case 0:break;case 1:r=s("singleFileTreeHint","1 file tree");break;default:r=s("multiFileTreeHint","{0} file trees",o);break}const n=d.lexer(e.response.toString()).filter(c=>c.type==="code")?.length??0;switch(n){case 0:i=t?s("noCodeBlocksHint","{0} {1} {2}",r,e.response.toString(),t):s("noCodeBlocks","{0} {1}",r,e.response.toString());break;case 1:i=t?s("singleCodeBlockHint","{0} 1 code block: {1} {2}",r,e.response.toString(),t):s("singleCodeBlock","{0} 1 code block: {1}",r,e.response.toString());break;default:i=t?s("multiCodeBlockHint","{0} {1} code blocks: {2}",r,n,e.response.toString(),t):s("multiCodeBlock","{0} {1} code blocks",r,n,e.response.toString());break}return i}};a=p([g(0,m)],a);export{a as ChatAccessibilityProvider};
