{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/chat/browser/chatContentParts/chatProgressContentPart.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { $ } from \"../../../../../base/browser/dom.js\";\nimport { alert } from \"../../../../../base/browser/ui/aria/aria.js\";\nimport { Codicon } from \"../../../../../base/common/codicons.js\";\nimport { MarkdownString } from \"../../../../../base/common/htmlContent.js\";\nimport { Disposable } from \"../../../../../base/common/lifecycle.js\";\nimport { ThemeIcon } from \"../../../../../base/common/themables.js\";\nimport type { MarkdownRenderer } from \"../../../../../editor/browser/widget/markdownRenderer/browser/markdownRenderer.js\";\nimport type {\n\tIChatProgressMessage,\n\tIChatTask,\n} from \"../../common/chatService.js\";\nimport {\n\ttype IChatRendererContent,\n\tisResponseVM,\n} from \"../../common/chatViewModel.js\";\nimport type { ChatTreeItem } from \"../chat.js\";\nimport type {\n\tIChatContentPart,\n\tIChatContentPartRenderContext,\n} from \"./chatContentParts.js\";\n\nexport class ChatProgressContentPart\n\textends Disposable\n\timplements IChatContentPart\n{\n\tpublic readonly domNode: HTMLElement;\n\n\tprivate readonly showSpinner: boolean;\n\n\tconstructor(\n\t\tprogress: IChatProgressMessage | IChatTask,\n\t\trenderer: MarkdownRenderer,\n\t\tcontext: IChatContentPartRenderContext,\n\t\tforceShowSpinner?: boolean,\n\t\tforceShowMessage?: boolean,\n\t) {\n\t\tsuper();\n\n\t\tconst followingContent = context.content.slice(context.index + 1);\n\t\tthis.showSpinner =\n\t\t\tforceShowSpinner ??\n\t\t\tshouldShowSpinner(followingContent, context.element);\n\t\tconst hideMessage =\n\t\t\tforceShowMessage !== true &&\n\t\t\tfollowingContent.some((part) => part.kind !== \"progressMessage\");\n\t\tif (hideMessage) {\n\t\t\t// Placeholder, don't show the progress message\n\t\t\tthis.domNode = $(\"\");\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.showSpinner) {\n\t\t\t// TODO@roblourens is this the right place for this?\n\t\t\t// this step is in progress, communicate it to SR users\n\t\t\talert(progress.content.value);\n\t\t}\n\t\tconst codicon = this.showSpinner\n\t\t\t? ThemeIcon.modify(Codicon.loading, \"spin\").id\n\t\t\t: Codicon.check.id;\n\t\tconst markdown = new MarkdownString(\n\t\t\t`$(${codicon}) ${progress.content.value}`,\n\t\t\t{\n\t\t\t\tsupportThemeIcons: true,\n\t\t\t},\n\t\t);\n\t\tconst result = this._register(renderer.render(markdown));\n\t\tresult.element.classList.add(\"progress-step\");\n\n\t\tthis.domNode = result.element;\n\t}\n\n\thasSameContent(\n\t\tother: IChatRendererContent,\n\t\tfollowingContent: IChatRendererContent[],\n\t\telement: ChatTreeItem,\n\t): boolean {\n\t\t// Needs rerender when spinner state changes\n\t\tconst showSpinner = shouldShowSpinner(followingContent, element);\n\t\treturn (\n\t\t\tother.kind === \"progressMessage\" && this.showSpinner === showSpinner\n\t\t);\n\t}\n}\n\nfunction shouldShowSpinner(\n\tfollowingContent: IChatRendererContent[],\n\telement: ChatTreeItem,\n): boolean {\n\treturn (\n\t\tisResponseVM(element) &&\n\t\t!element.isComplete &&\n\t\tfollowingContent.length === 0\n\t);\n}\n"],
  "mappings": ";;AAKA,SAAS,SAAS;AAClB,SAAS,aAAa;AACtB,SAAS,eAAe;AACxB,SAAS,sBAAsB;AAC/B,SAAS,kBAAkB;AAC3B,SAAS,iBAAiB;AAM1B;AAAA,EAEC;AAAA,OACM;AAOA,MAAM,gCACJ,WAET;AAAA,EA7BA,OA6BA;AAAA;AAAA;AAAA,EACiB;AAAA,EAEC;AAAA,EAEjB,YACC,UACA,UACA,SACA,kBACA,kBACC;AACD,UAAM;AAEN,UAAM,mBAAmB,QAAQ,QAAQ,MAAM,QAAQ,QAAQ,CAAC;AAChE,SAAK,cACJ,oBACA,kBAAkB,kBAAkB,QAAQ,OAAO;AACpD,UAAM,cACL,qBAAqB,QACrB,iBAAiB,KAAK,CAAC,SAAS,KAAK,SAAS,iBAAiB;AAChE,QAAI,aAAa;AAEhB,WAAK,UAAU,EAAE,EAAE;AACnB;AAAA,IACD;AAEA,QAAI,KAAK,aAAa;AAGrB,YAAM,SAAS,QAAQ,KAAK;AAAA,IAC7B;AACA,UAAM,UAAU,KAAK,cAClB,UAAU,OAAO,QAAQ,SAAS,MAAM,EAAE,KAC1C,QAAQ,MAAM;AACjB,UAAM,WAAW,IAAI;AAAA,MACpB,KAAK,OAAO,KAAK,SAAS,QAAQ,KAAK;AAAA,MACvC;AAAA,QACC,mBAAmB;AAAA,MACpB;AAAA,IACD;AACA,UAAM,SAAS,KAAK,UAAU,SAAS,OAAO,QAAQ,CAAC;AACvD,WAAO,QAAQ,UAAU,IAAI,eAAe;AAE5C,SAAK,UAAU,OAAO;AAAA,EACvB;AAAA,EAEA,eACC,OACA,kBACA,SACU;AAEV,UAAM,cAAc,kBAAkB,kBAAkB,OAAO;AAC/D,WACC,MAAM,SAAS,qBAAqB,KAAK,gBAAgB;AAAA,EAE3D;AACD;AAEA,SAAS,kBACR,kBACA,SACU;AACV,SACC,aAAa,OAAO,KACpB,CAAC,QAAQ,cACT,iBAAiB,WAAW;AAE9B;AATS;",
  "names": []
}
