{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/chat/browser/chatContentParts/chatProgressContentPart.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { $ } from '../../../../../base/browser/dom.js';\nimport { alert } from '../../../../../base/browser/ui/aria/aria.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { MarkdownRenderer } from '../../../../../editor/browser/widget/markdownRenderer/browser/markdownRenderer.js';\nimport { ChatTreeItem } from '../chat.js';\nimport { IChatContentPart, IChatContentPartRenderContext } from './chatContentParts.js';\nimport { IChatProgressMessage, IChatTask } from '../../common/chatService.js';\nimport { IChatRendererContent, isResponseVM } from '../../common/chatViewModel.js';\n\nexport class ChatProgressContentPart extends Disposable implements IChatContentPart {\n\tpublic readonly domNode: HTMLElement;\n\n\tprivate readonly showSpinner: boolean;\n\n\tconstructor(\n\t\tprogress: IChatProgressMessage | IChatTask,\n\t\trenderer: MarkdownRenderer,\n\t\tcontext: IChatContentPartRenderContext,\n\t\tforceShowSpinner?: boolean,\n\t\tforceShowMessage?: boolean\n\t) {\n\t\tsuper();\n\n\t\tconst followingContent = context.content.slice(context.index + 1);\n\t\tthis.showSpinner = forceShowSpinner ?? shouldShowSpinner(followingContent, context.element);\n\t\tconst hideMessage = forceShowMessage !== true && followingContent.some(part => part.kind !== 'progressMessage');\n\t\tif (hideMessage) {\n\t\t\t// Placeholder, don't show the progress message\n\t\t\tthis.domNode = $('');\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.showSpinner) {\n\t\t\t// TODO@roblourens is this the right place for this?\n\t\t\t// this step is in progress, communicate it to SR users\n\t\t\talert(progress.content.value);\n\t\t}\n\t\tconst codicon = this.showSpinner ? ThemeIcon.modify(Codicon.loading, 'spin').id : Codicon.check.id;\n\t\tconst markdown = new MarkdownString(`$(${codicon}) ${progress.content.value}`, {\n\t\t\tsupportThemeIcons: true\n\t\t});\n\t\tconst result = this._register(renderer.render(markdown));\n\t\tresult.element.classList.add('progress-step');\n\n\t\tthis.domNode = result.element;\n\t}\n\n\thasSameContent(other: IChatRendererContent, followingContent: IChatRendererContent[], element: ChatTreeItem): boolean {\n\t\t// Needs rerender when spinner state changes\n\t\tconst showSpinner = shouldShowSpinner(followingContent, element);\n\t\treturn other.kind === 'progressMessage' && this.showSpinner === showSpinner;\n\t}\n}\n\nfunction shouldShowSpinner(followingContent: IChatRendererContent[], element: ChatTreeItem): boolean {\n\treturn isResponseVM(element) && !element.isComplete && followingContent.length === 0;\n}\n"],
  "mappings": ";;AAKA,SAAS,SAAS;AAClB,SAAS,aAAa;AACtB,SAAS,eAAe;AACxB,SAAS,sBAAsB;AAC/B,SAAS,kBAAkB;AAC3B,SAAS,iBAAiB;AAC1B,SAAS,wBAAwB;AACjC,SAAS,oBAAoB;AAC7B,SAAS,kBAAkB,qCAAqC;AAChE,SAAS,sBAAsB,iBAAiB;AAChD,SAAS,sBAAsB,oBAAoB;AAE5C,MAAM,gCAAgC,WAAuC;AAAA,EAjBpF,OAiBoF;AAAA;AAAA;AAAA,EACnE;AAAA,EAEC;AAAA,EAEjB,YACC,UACA,UACA,SACA,kBACA,kBACC;AACD,UAAM;AAEN,UAAM,mBAAmB,QAAQ,QAAQ,MAAM,QAAQ,QAAQ,CAAC;AAChE,SAAK,cAAc,oBAAoB,kBAAkB,kBAAkB,QAAQ,OAAO;AAC1F,UAAM,cAAc,qBAAqB,QAAQ,iBAAiB,KAAK,UAAQ,KAAK,SAAS,iBAAiB;AAC9G,QAAI,aAAa;AAEhB,WAAK,UAAU,EAAE,EAAE;AACnB;AAAA,IACD;AAEA,QAAI,KAAK,aAAa;AAGrB,YAAM,SAAS,QAAQ,KAAK;AAAA,IAC7B;AACA,UAAM,UAAU,KAAK,cAAc,UAAU,OAAO,QAAQ,SAAS,MAAM,EAAE,KAAK,QAAQ,MAAM;AAChG,UAAM,WAAW,IAAI,eAAe,KAAK,OAAO,KAAK,SAAS,QAAQ,KAAK,IAAI;AAAA,MAC9E,mBAAmB;AAAA,IACpB,CAAC;AACD,UAAM,SAAS,KAAK,UAAU,SAAS,OAAO,QAAQ,CAAC;AACvD,WAAO,QAAQ,UAAU,IAAI,eAAe;AAE5C,SAAK,UAAU,OAAO;AAAA,EACvB;AAAA,EAEA,eAAe,OAA6B,kBAA0C,SAAgC;AAErH,UAAM,cAAc,kBAAkB,kBAAkB,OAAO;AAC/D,WAAO,MAAM,SAAS,qBAAqB,KAAK,gBAAgB;AAAA,EACjE;AACD;AAEA,SAAS,kBAAkB,kBAA0C,SAAgC;AACpG,SAAO,aAAa,OAAO,KAAK,CAAC,QAAQ,cAAc,iBAAiB,WAAW;AACpF;AAFS;",
  "names": []
}
