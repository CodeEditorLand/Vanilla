{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/chat/browser/actions/chatMoveActions.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize2 } from \"../../../../../nls.js\";\nimport {\n\tAction2,\n\tMenuId,\n\tregisterAction2,\n} from \"../../../../../platform/actions/common/actions.js\";\nimport { ContextKeyExpr } from \"../../../../../platform/contextkey/common/contextkey.js\";\nimport type { ServicesAccessor } from \"../../../../../platform/instantiation/common/instantiation.js\";\nimport { ActiveEditorContext } from \"../../../../common/contextkeys.js\";\nimport { IEditorGroupsService } from \"../../../../services/editor/common/editorGroupsService.js\";\nimport {\n\tACTIVE_GROUP,\n\tAUX_WINDOW_GROUP,\n\tIEditorService,\n} from \"../../../../services/editor/common/editorService.js\";\nimport { IViewsService } from \"../../../../services/views/common/viewsService.js\";\nimport { CONTEXT_CHAT_ENABLED } from \"../../common/chatContextKeys.js\";\nimport { CHAT_VIEW_ID, IChatWidgetService } from \"../chat.js\";\nimport type { IChatEditorOptions } from \"../chatEditor.js\";\nimport { ChatEditorInput } from \"../chatEditorInput.js\";\nimport type { ChatViewPane } from \"../chatViewPane.js\";\nimport { CHAT_CATEGORY, isChatViewTitleActionContext } from \"./chatActions.js\";\n\nenum MoveToNewLocation {\n\tEditor = \"Editor\",\n\tWindow = \"Window\",\n}\n\nexport function registerMoveActions() {\n\tregisterAction2(\n\t\tclass GlobalMoveToEditorAction extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: `workbench.action.chat.openInEditor`,\n\t\t\t\t\ttitle: localize2(\n\t\t\t\t\t\t\"chat.openInEditor.label\",\n\t\t\t\t\t\t\"Open Chat in Editor\",\n\t\t\t\t\t),\n\t\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\t\tprecondition: CONTEXT_CHAT_ENABLED,\n\t\t\t\t\tf1: true,\n\t\t\t\t\tmenu: {\n\t\t\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\t\t\twhen: ContextKeyExpr.equals(\"view\", CHAT_VIEW_ID),\n\t\t\t\t\t\torder: 0,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tasync run(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\t\tconst context = args[0];\n\t\t\t\texecuteMoveToAction(\n\t\t\t\t\taccessor,\n\t\t\t\t\tMoveToNewLocation.Editor,\n\t\t\t\t\tisChatViewTitleActionContext(context)\n\t\t\t\t\t\t? context.chatView\n\t\t\t\t\t\t: undefined,\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t);\n\n\tregisterAction2(\n\t\tclass GlobalMoveToNewWindowAction extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: `workbench.action.chat.openInNewWindow`,\n\t\t\t\t\ttitle: localize2(\n\t\t\t\t\t\t\"chat.openInNewWindow.label\",\n\t\t\t\t\t\t\"Open Chat in New Window\",\n\t\t\t\t\t),\n\t\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\t\tprecondition: CONTEXT_CHAT_ENABLED,\n\t\t\t\t\tf1: true,\n\t\t\t\t\tmenu: {\n\t\t\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\t\t\twhen: ContextKeyExpr.equals(\"view\", CHAT_VIEW_ID),\n\t\t\t\t\t\torder: 0,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tasync run(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\t\tconst context = args[0];\n\t\t\t\texecuteMoveToAction(\n\t\t\t\t\taccessor,\n\t\t\t\t\tMoveToNewLocation.Window,\n\t\t\t\t\tisChatViewTitleActionContext(context)\n\t\t\t\t\t\t? context.chatView\n\t\t\t\t\t\t: undefined,\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t);\n\n\tregisterAction2(\n\t\tclass GlobalMoveToSidebarAction extends Action2 {\n\t\t\tconstructor() {\n\t\t\t\tsuper({\n\t\t\t\t\tid: `workbench.action.chat.openInSidebar`,\n\t\t\t\t\ttitle: localize2(\n\t\t\t\t\t\t\"interactiveSession.openInSidebar.label\",\n\t\t\t\t\t\t\"Open Chat in Side Bar\",\n\t\t\t\t\t),\n\t\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\t\tprecondition: CONTEXT_CHAT_ENABLED,\n\t\t\t\t\tf1: true,\n\t\t\t\t\tmenu: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: MenuId.EditorTitle,\n\t\t\t\t\t\t\torder: 0,\n\t\t\t\t\t\t\twhen: ActiveEditorContext.isEqualTo(\n\t\t\t\t\t\t\t\tChatEditorInput.EditorID,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tasync run(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\t\treturn moveToSidebar(accessor);\n\t\t\t}\n\t\t},\n\t);\n}\n\nasync function executeMoveToAction(\n\taccessor: ServicesAccessor,\n\tmoveTo: MoveToNewLocation,\n\tchatView?: ChatViewPane,\n) {\n\tconst widgetService = accessor.get(IChatWidgetService);\n\tconst editorService = accessor.get(IEditorService);\n\n\tconst widget = chatView?.widget ?? widgetService.lastFocusedWidget;\n\tif (!widget || !(\"viewId\" in widget.viewContext)) {\n\t\tawait editorService.openEditor(\n\t\t\t{\n\t\t\t\tresource: ChatEditorInput.getNewEditorUri(),\n\t\t\t\toptions: { pinned: true },\n\t\t\t},\n\t\t\tmoveTo === MoveToNewLocation.Window\n\t\t\t\t? AUX_WINDOW_GROUP\n\t\t\t\t: ACTIVE_GROUP,\n\t\t);\n\t\treturn;\n\t}\n\n\tconst viewModel = widget.viewModel;\n\tif (!viewModel) {\n\t\treturn;\n\t}\n\n\tconst sessionId = viewModel.sessionId;\n\tconst viewState = widget.getViewState();\n\twidget.clear();\n\n\tconst options: IChatEditorOptions = {\n\t\ttarget: { sessionId },\n\t\tpinned: true,\n\t\tviewState: viewState,\n\t};\n\tawait editorService.openEditor(\n\t\t{ resource: ChatEditorInput.getNewEditorUri(), options },\n\t\tmoveTo === MoveToNewLocation.Window ? AUX_WINDOW_GROUP : ACTIVE_GROUP,\n\t);\n}\n\nasync function moveToSidebar(accessor: ServicesAccessor): Promise<void> {\n\tconst viewsService = accessor.get(IViewsService);\n\tconst editorService = accessor.get(IEditorService);\n\tconst editorGroupService = accessor.get(IEditorGroupsService);\n\n\tconst chatEditorInput = editorService.activeEditor;\n\tlet view: ChatViewPane;\n\tif (\n\t\tchatEditorInput instanceof ChatEditorInput &&\n\t\tchatEditorInput.sessionId\n\t) {\n\t\tawait editorService.closeEditor({\n\t\t\teditor: chatEditorInput,\n\t\t\tgroupId: editorGroupService.activeGroup.id,\n\t\t});\n\t\tview = (await viewsService.openView(CHAT_VIEW_ID)) as ChatViewPane;\n\t\tview.loadSession(chatEditorInput.sessionId);\n\t} else {\n\t\tview = (await viewsService.openView(CHAT_VIEW_ID)) as ChatViewPane;\n\t}\n\n\tview.focus();\n}\n"],
  "mappings": "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",
  "names": ["MoveToNewLocation"]
}
