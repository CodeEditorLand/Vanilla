{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/chat/browser/actions/chatMoveActions.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize2 } from '../../../../../nls.js';\nimport { Action2, MenuId, registerAction2 } from '../../../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { ServicesAccessor } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { ActiveEditorContext } from '../../../../common/contextkeys.js';\nimport { CHAT_CATEGORY, isChatViewTitleActionContext } from './chatActions.js';\nimport { CHAT_VIEW_ID, IChatWidgetService } from '../chat.js';\nimport { IChatEditorOptions } from '../chatEditor.js';\nimport { ChatEditorInput } from '../chatEditorInput.js';\nimport { ChatViewPane } from '../chatViewPane.js';\nimport { CONTEXT_CHAT_ENABLED } from '../../common/chatContextKeys.js';\nimport { IEditorGroupsService } from '../../../../services/editor/common/editorGroupsService.js';\nimport { ACTIVE_GROUP, AUX_WINDOW_GROUP, IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { IViewsService } from '../../../../services/views/common/viewsService.js';\n\nenum MoveToNewLocation {\n\tEditor = 'Editor',\n\tWindow = 'Window'\n}\n\nexport function registerMoveActions() {\n\tregisterAction2(class GlobalMoveToEditorAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: `workbench.action.chat.openInEditor`,\n\t\t\t\ttitle: localize2('chat.openInEditor.label', \"Open Chat in Editor\"),\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\tprecondition: CONTEXT_CHAT_ENABLED,\n\t\t\t\tf1: true,\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\t\twhen: ContextKeyExpr.equals('view', CHAT_VIEW_ID),\n\t\t\t\t\torder: 0\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tasync run(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\tconst context = args[0];\n\t\t\texecuteMoveToAction(accessor, MoveToNewLocation.Editor, isChatViewTitleActionContext(context) ? context.chatView : undefined);\n\t\t}\n\t});\n\n\tregisterAction2(class GlobalMoveToNewWindowAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: `workbench.action.chat.openInNewWindow`,\n\t\t\t\ttitle: localize2('chat.openInNewWindow.label', \"Open Chat in New Window\"),\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\tprecondition: CONTEXT_CHAT_ENABLED,\n\t\t\t\tf1: true,\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MenuId.ViewTitle,\n\t\t\t\t\twhen: ContextKeyExpr.equals('view', CHAT_VIEW_ID),\n\t\t\t\t\torder: 0\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tasync run(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\tconst context = args[0];\n\t\t\texecuteMoveToAction(accessor, MoveToNewLocation.Window, isChatViewTitleActionContext(context) ? context.chatView : undefined);\n\t\t}\n\t});\n\n\tregisterAction2(class GlobalMoveToSidebarAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: `workbench.action.chat.openInSidebar`,\n\t\t\t\ttitle: localize2('interactiveSession.openInSidebar.label', \"Open Chat in Side Bar\"),\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\tprecondition: CONTEXT_CHAT_ENABLED,\n\t\t\t\tf1: true,\n\t\t\t\tmenu: [{\n\t\t\t\t\tid: MenuId.EditorTitle,\n\t\t\t\t\torder: 0,\n\t\t\t\t\twhen: ActiveEditorContext.isEqualTo(ChatEditorInput.EditorID),\n\t\t\t\t}]\n\t\t\t});\n\t\t}\n\n\t\tasync run(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\treturn moveToSidebar(accessor);\n\t\t}\n\t});\n}\n\nasync function executeMoveToAction(accessor: ServicesAccessor, moveTo: MoveToNewLocation, chatView?: ChatViewPane) {\n\tconst widgetService = accessor.get(IChatWidgetService);\n\tconst editorService = accessor.get(IEditorService);\n\n\tconst widget = chatView?.widget ?? widgetService.lastFocusedWidget;\n\tif (!widget || !('viewId' in widget.viewContext)) {\n\t\tawait editorService.openEditor({ resource: ChatEditorInput.getNewEditorUri(), options: { pinned: true } }, moveTo === MoveToNewLocation.Window ? AUX_WINDOW_GROUP : ACTIVE_GROUP);\n\t\treturn;\n\t}\n\n\tconst viewModel = widget.viewModel;\n\tif (!viewModel) {\n\t\treturn;\n\t}\n\n\tconst sessionId = viewModel.sessionId;\n\tconst viewState = widget.getViewState();\n\twidget.clear();\n\n\tconst options: IChatEditorOptions = { target: { sessionId }, pinned: true, viewState: viewState };\n\tawait editorService.openEditor({ resource: ChatEditorInput.getNewEditorUri(), options }, moveTo === MoveToNewLocation.Window ? AUX_WINDOW_GROUP : ACTIVE_GROUP);\n}\n\nasync function moveToSidebar(accessor: ServicesAccessor): Promise<void> {\n\tconst viewsService = accessor.get(IViewsService);\n\tconst editorService = accessor.get(IEditorService);\n\tconst editorGroupService = accessor.get(IEditorGroupsService);\n\n\tconst chatEditorInput = editorService.activeEditor;\n\tlet view: ChatViewPane;\n\tif (chatEditorInput instanceof ChatEditorInput && chatEditorInput.sessionId) {\n\t\tawait editorService.closeEditor({ editor: chatEditorInput, groupId: editorGroupService.activeGroup.id });\n\t\tview = await viewsService.openView(CHAT_VIEW_ID) as ChatViewPane;\n\t\tview.loadSession(chatEditorInput.sessionId);\n\t} else {\n\t\tview = await viewsService.openView(CHAT_VIEW_ID) as ChatViewPane;\n\t}\n\n\tview.focus();\n}\n"],
  "mappings": "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",
  "names": ["MoveToNewLocation"]
}
