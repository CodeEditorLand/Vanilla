{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/chat/browser/chatInputPart.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../base/browser/dom.js';\nimport { DEFAULT_FONT_FAMILY } from '../../../../base/browser/fonts.js';\nimport { IHistoryNavigationWidget } from '../../../../base/browser/history.js';\nimport { StandardKeyboardEvent } from '../../../../base/browser/keyboardEvent.js';\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\nimport { Button } from '../../../../base/browser/ui/button/button.js';\nimport { IAction } from '../../../../base/common/actions.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { HistoryNavigator2 } from '../../../../base/common/history.js';\nimport { KeyCode } from '../../../../base/common/keyCodes.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { basename, dirname } from '../../../../base/common/path.js';\nimport { isMacintosh } from '../../../../base/common/platform.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IEditorConstructionOptions } from '../../../../editor/browser/config/editorConfiguration.js';\nimport { EditorExtensionsRegistry } from '../../../../editor/browser/editorExtensions.js';\nimport { CodeEditorWidget } from '../../../../editor/browser/widget/codeEditor/codeEditorWidget.js';\nimport { IDimension } from '../../../../editor/common/core/dimension.js';\nimport { IPosition } from '../../../../editor/common/core/position.js';\nimport { Range } from '../../../../editor/common/core/range.js';\nimport { ITextModel } from '../../../../editor/common/model.js';\nimport { IModelService } from '../../../../editor/common/services/model.js';\nimport { ContentHoverController } from '../../../../editor/contrib/hover/browser/contentHoverController.js';\nimport { GlyphHoverController } from '../../../../editor/contrib/hover/browser/glyphHoverController.js';\nimport { localize } from '../../../../nls.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { DropdownWithPrimaryActionViewItem } from '../../../../platform/actions/browser/dropdownWithPrimaryActionViewItem.js';\nimport { createAndFillInActionBarActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { HiddenItemStrategy, MenuWorkbenchToolBar } from '../../../../platform/actions/browser/toolbar.js';\nimport { IMenuService, MenuId, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKey, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { FileKind } from '../../../../platform/files/common/files.js';\nimport { registerAndCreateHistoryNavigationContext } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ResourceLabels } from '../../../browser/labels.js';\nimport { AccessibilityVerbositySettingId } from '../../accessibility/browser/accessibilityConfiguration.js';\nimport { AccessibilityCommandId } from '../../accessibility/common/accessibilityCommands.js';\nimport { getSimpleCodeEditorWidgetOptions, getSimpleEditorOptions, setupSimpleEditorSelectionStyling } from '../../codeEditor/browser/simpleEditorOptions.js';\nimport { ChatAgentLocation, IChatAgentService } from '../common/chatAgents.js';\nimport { CONTEXT_CHAT_INPUT_CURSOR_AT_TOP, CONTEXT_CHAT_INPUT_HAS_FOCUS, CONTEXT_CHAT_INPUT_HAS_TEXT, CONTEXT_IN_CHAT_INPUT } from '../common/chatContextKeys.js';\nimport { IChatRequestVariableEntry } from '../common/chatModel.js';\nimport { IChatFollowup } from '../common/chatService.js';\nimport { IChatResponseViewModel } from '../common/chatViewModel.js';\nimport { IChatHistoryEntry, IChatWidgetHistoryService } from '../common/chatWidgetHistoryService.js';\nimport { CancelAction, ChatSubmitSecondaryAgentAction, IChatExecuteActionContext, SubmitAction } from './actions/chatExecuteActions.js';\nimport { IChatWidget } from './chat.js';\nimport { ChatFollowups } from './chatFollowups.js';\n\nconst $ = dom.$;\n\nconst INPUT_EDITOR_MAX_HEIGHT = 250;\n\ninterface IChatInputPartOptions {\n\trenderFollowups: boolean;\n\trenderStyle?: 'default' | 'compact';\n\tmenus: {\n\t\texecuteToolbar: MenuId;\n\t\tinputSideToolbar?: MenuId;\n\t\ttelemetrySource?: string;\n\t};\n\teditorOverflowWidgetsDomNode?: HTMLElement;\n}\n\nexport class ChatInputPart extends Disposable implements IHistoryNavigationWidget {\n\tstatic readonly INPUT_SCHEME = 'chatSessionInput';\n\tprivate static _counter = 0;\n\n\tprivate _onDidLoadInputState = this._register(new Emitter<any>());\n\treadonly onDidLoadInputState = this._onDidLoadInputState.event;\n\n\tprivate _onDidChangeHeight = this._register(new Emitter<void>());\n\treadonly onDidChangeHeight = this._onDidChangeHeight.event;\n\n\tprivate _onDidFocus = this._register(new Emitter<void>());\n\treadonly onDidFocus = this._onDidFocus.event;\n\n\tprivate _onDidBlur = this._register(new Emitter<void>());\n\treadonly onDidBlur = this._onDidBlur.event;\n\n\tprivate _onDidChangeContext = this._register(new Emitter<{ removed?: IChatRequestVariableEntry[]; added?: IChatRequestVariableEntry[] }>());\n\treadonly onDidChangeContext = this._onDidChangeContext.event;\n\n\tprivate _onDidAcceptFollowup = this._register(new Emitter<{ followup: IChatFollowup; response: IChatResponseViewModel | undefined }>());\n\treadonly onDidAcceptFollowup = this._onDidAcceptFollowup.event;\n\n\tpublic get attachedContext(): ReadonlySet<IChatRequestVariableEntry> {\n\t\treturn this._attachedContext;\n\t}\n\n\tprivate _indexOfLastAttachedContextDeletedWithKeyboard: number = -1;\n\tprivate readonly _attachedContext = new Set<IChatRequestVariableEntry>();\n\n\tprivate readonly _onDidChangeVisibility = this._register(new Emitter<boolean>());\n\tprivate readonly _contextResourceLabels = this.instantiationService.createInstance(ResourceLabels, { onDidChangeVisibility: this._onDidChangeVisibility.event });\n\n\tprivate readonly inputEditorMaxHeight: number;\n\tprivate inputEditorHeight = 0;\n\tprivate container!: HTMLElement;\n\n\tprivate inputSideToolbarContainer?: HTMLElement;\n\n\tprivate followupsContainer!: HTMLElement;\n\tprivate readonly followupsDisposables = this._register(new DisposableStore());\n\n\tprivate attachedContextContainer!: HTMLElement;\n\tprivate readonly attachedContextDisposables = this._register(new DisposableStore());\n\n\tprivate _inputPartHeight: number = 0;\n\tget inputPartHeight() {\n\t\treturn this._inputPartHeight;\n\t}\n\n\tprivate _inputEditor!: CodeEditorWidget;\n\tprivate _inputEditorElement!: HTMLElement;\n\n\tprivate toolbar!: MenuWorkbenchToolBar;\n\n\tget inputEditor() {\n\t\treturn this._inputEditor;\n\t}\n\n\tprivate history: HistoryNavigator2<IChatHistoryEntry>;\n\tprivate historyNavigationBackwardsEnablement!: IContextKey<boolean>;\n\tprivate historyNavigationForewardsEnablement!: IContextKey<boolean>;\n\tprivate inHistoryNavigation = false;\n\tprivate inputModel: ITextModel | undefined;\n\tprivate inputEditorHasText: IContextKey<boolean>;\n\tprivate chatCursorAtTop: IContextKey<boolean>;\n\tprivate inputEditorHasFocus: IContextKey<boolean>;\n\n\tprivate cachedDimensions: dom.Dimension | undefined;\n\tprivate cachedToolbarWidth: number | undefined;\n\n\treadonly inputUri = URI.parse(`${ChatInputPart.INPUT_SCHEME}:input-${ChatInputPart._counter++}`);\n\n\tconstructor(\n\t\t// private readonly editorOptions: ChatEditorOptions, // TODO this should be used\n\t\tprivate readonly location: ChatAgentLocation,\n\t\tprivate readonly options: IChatInputPartOptions,\n\t\tprivate readonly getInputState: () => any,\n\t\t@IChatWidgetHistoryService private readonly historyService: IChatWidgetHistoryService,\n\t\t@IModelService private readonly modelService: IModelService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IKeybindingService private readonly keybindingService: IKeybindingService,\n\t\t@IAccessibilityService private readonly accessibilityService: IAccessibilityService,\n\t\t@ILogService private readonly logService: ILogService,\n\t) {\n\t\tsuper();\n\n\t\tthis.inputEditorMaxHeight = this.options.renderStyle === 'compact' ? INPUT_EDITOR_MAX_HEIGHT / 3 : INPUT_EDITOR_MAX_HEIGHT;\n\n\t\tthis.inputEditorHasText = CONTEXT_CHAT_INPUT_HAS_TEXT.bindTo(contextKeyService);\n\t\tthis.chatCursorAtTop = CONTEXT_CHAT_INPUT_CURSOR_AT_TOP.bindTo(contextKeyService);\n\t\tthis.inputEditorHasFocus = CONTEXT_CHAT_INPUT_HAS_FOCUS.bindTo(contextKeyService);\n\n\t\tthis.history = this.loadHistory();\n\t\tthis._register(this.historyService.onDidClearHistory(() => this.history = new HistoryNavigator2([{ text: '' }], 50, historyKeyFn)));\n\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(AccessibilityVerbositySettingId.Chat)) {\n\t\t\t\tthis.inputEditor.updateOptions({ ariaLabel: this._getAriaLabel() });\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate loadHistory(): HistoryNavigator2<IChatHistoryEntry> {\n\t\tconst history = this.historyService.getHistory(this.location);\n\t\tif (history.length === 0) {\n\t\t\thistory.push({ text: '' });\n\t\t}\n\n\t\treturn new HistoryNavigator2(history, 50, historyKeyFn);\n\t}\n\n\tprivate _getAriaLabel(): string {\n\t\tconst verbose = this.configurationService.getValue<boolean>(AccessibilityVerbositySettingId.Chat);\n\t\tif (verbose) {\n\t\t\tconst kbLabel = this.keybindingService.lookupKeybinding(AccessibilityCommandId.OpenAccessibilityHelp)?.getLabel();\n\t\t\treturn kbLabel ? localize('actions.chat.accessibiltyHelp', \"Chat Input,  Type to ask questions or type / for topics, press enter to send out the request. Use {0} for Chat Accessibility Help.\", kbLabel) : localize('chatInput.accessibilityHelpNoKb', \"Chat Input,  Type code here and press Enter to run. Use the Chat Accessibility Help command for more information.\");\n\t\t}\n\t\treturn localize('chatInput', \"Chat Input\");\n\t}\n\n\tupdateState(inputState: Object): void {\n\t\tif (this.inHistoryNavigation) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst newEntry = { text: this._inputEditor.getValue(), state: inputState };\n\n\t\tif (this.history.isAtEnd()) {\n\t\t\t// The last history entry should always be the current input value\n\t\t\tthis.history.replaceLast(newEntry);\n\t\t} else {\n\t\t\t// Added a reference while in the middle of history navigation, it's a new entry\n\t\t\tthis.history.replaceLast(newEntry);\n\t\t\tthis.history.resetCursor();\n\t\t}\n\t}\n\n\tinitForNewChatModel(inputValue: string | undefined, inputState: Object): void {\n\t\tthis.history = this.loadHistory();\n\t\tthis.history.add({ text: inputValue ?? this.history.current().text, state: inputState });\n\n\t\tif (inputValue) {\n\t\t\tthis.setValue(inputValue, false);\n\t\t}\n\t}\n\n\tlogInputHistory(): void {\n\t\tconst historyStr = [...this.history].map(entry => JSON.stringify(entry)).join('\\n');\n\t\tthis.logService.info(`[${this.location}] Chat input history:`, historyStr);\n\t}\n\n\tsetVisible(visible: boolean): void {\n\t\tthis._onDidChangeVisibility.fire(visible);\n\t}\n\n\tget element(): HTMLElement {\n\t\treturn this.container;\n\t}\n\n\tshowPreviousValue(): void {\n\t\tconst inputState = this.getInputState();\n\t\tif (this.history.isAtEnd()) {\n\t\t\tthis.saveCurrentValue(inputState);\n\t\t} else {\n\t\t\tif (!this.history.has({ text: this._inputEditor.getValue(), state: inputState })) {\n\t\t\t\tthis.saveCurrentValue(inputState);\n\t\t\t\tthis.history.resetCursor();\n\t\t\t}\n\t\t}\n\n\t\tthis.navigateHistory(true);\n\t}\n\n\tshowNextValue(): void {\n\t\tconst inputState = this.getInputState();\n\t\tif (this.history.isAtEnd()) {\n\t\t\treturn;\n\t\t} else {\n\t\t\tif (!this.history.has({ text: this._inputEditor.getValue(), state: inputState })) {\n\t\t\t\tthis.saveCurrentValue(inputState);\n\t\t\t\tthis.history.resetCursor();\n\t\t\t}\n\t\t}\n\n\t\tthis.navigateHistory(false);\n\t}\n\n\tprivate navigateHistory(previous: boolean): void {\n\t\tconst historyEntry = previous ?\n\t\t\tthis.history.previous() : this.history.next();\n\n\t\taria.status(historyEntry.text);\n\n\t\tthis.inHistoryNavigation = true;\n\t\tthis.setValue(historyEntry.text, true);\n\t\tthis.inHistoryNavigation = false;\n\n\t\tthis._onDidLoadInputState.fire(historyEntry.state);\n\t\tif (previous) {\n\t\t\tthis._inputEditor.setPosition({ lineNumber: 1, column: 1 });\n\t\t} else {\n\t\t\tconst model = this._inputEditor.getModel();\n\t\t\tif (!model) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._inputEditor.setPosition(getLastPosition(model));\n\t\t}\n\t}\n\n\tsetValue(value: string, transient: boolean): void {\n\t\tthis.inputEditor.setValue(value);\n\t\t// always leave cursor at the end\n\t\tthis.inputEditor.setPosition({ lineNumber: 1, column: value.length + 1 });\n\n\t\tif (!transient) {\n\t\t\tthis.saveCurrentValue(this.getInputState());\n\t\t}\n\t}\n\n\tprivate saveCurrentValue(inputState: any): void {\n\t\tconst newEntry = { text: this._inputEditor.getValue(), state: inputState };\n\t\tthis.history.replaceLast(newEntry);\n\t}\n\n\tfocus() {\n\t\tthis._inputEditor.focus();\n\t}\n\n\thasFocus(): boolean {\n\t\treturn this._inputEditor.hasWidgetFocus();\n\t}\n\n\t/**\n\t * Reset the input and update history.\n\t * @param userQuery If provided, this will be added to the history. Followups and programmatic queries should not be passed.\n\t */\n\tasync acceptInput(isUserQuery?: boolean): Promise<void> {\n\t\tif (isUserQuery) {\n\t\t\tconst userQuery = this._inputEditor.getValue();\n\t\t\tconst entry: IChatHistoryEntry = { text: userQuery, state: this.getInputState() };\n\t\t\tthis.history.replaceLast(entry);\n\t\t\tthis.history.add({ text: '' });\n\t\t}\n\n\t\t// Clear attached context, fire event to clear input state, and clear the input editor\n\t\tthis._attachedContext.clear();\n\t\tthis._onDidLoadInputState.fire({});\n\t\tif (this.accessibilityService.isScreenReaderOptimized() && isMacintosh) {\n\t\t\tthis._acceptInputForVoiceover();\n\t\t} else {\n\t\t\tthis._inputEditor.focus();\n\t\t\tthis._inputEditor.setValue('');\n\t\t}\n\t}\n\n\tprivate _acceptInputForVoiceover(): void {\n\t\tconst domNode = this._inputEditor.getDomNode();\n\t\tif (!domNode) {\n\t\t\treturn;\n\t\t}\n\t\t// Remove the input editor from the DOM temporarily to prevent VoiceOver\n\t\t// from reading the cleared text (the request) to the user.\n\t\tdomNode.remove();\n\t\tthis._inputEditor.setValue('');\n\t\tthis._inputEditorElement.appendChild(domNode);\n\t\tthis._inputEditor.focus();\n\t}\n\n\tattachContext(overwrite: boolean, ...contentReferences: IChatRequestVariableEntry[]): void {\n\t\tconst removed = [];\n\t\tif (overwrite) {\n\t\t\tremoved.push(...Array.from(this._attachedContext));\n\t\t\tthis._attachedContext.clear();\n\t\t}\n\n\t\tif (contentReferences.length > 0) {\n\t\t\tfor (const reference of contentReferences) {\n\t\t\t\tthis._attachedContext.add(reference);\n\t\t\t}\n\t\t}\n\n\t\tif (removed.length > 0 || contentReferences.length > 0) {\n\t\t\tthis.initAttachedContext(this.attachedContextContainer);\n\n\t\t\tif (!overwrite) {\n\t\t\t\tthis._onDidChangeContext.fire({ removed, added: contentReferences });\n\t\t\t}\n\t\t}\n\t}\n\n\trender(container: HTMLElement, initialValue: string, widget: IChatWidget) {\n\t\tthis.container = dom.append(container, $('.interactive-input-part'));\n\t\tthis.container.classList.toggle('compact', this.options.renderStyle === 'compact');\n\n\t\tlet inputContainer: HTMLElement;\n\t\tlet inputAndSideToolbar: HTMLElement;\n\t\tif (this.options.renderStyle === 'compact') {\n\t\t\tinputAndSideToolbar = dom.append(this.container, $('.interactive-input-and-side-toolbar'));\n\t\t\tthis.followupsContainer = dom.append(this.container, $('.interactive-input-followups'));\n\t\t\tinputContainer = dom.append(inputAndSideToolbar, $('.interactive-input-and-execute-toolbar'));\n\t\t\tthis.attachedContextContainer = dom.append(this.container, $('.chat-attached-context'));\n\t\t} else {\n\t\t\tthis.followupsContainer = dom.append(this.container, $('.interactive-input-followups'));\n\t\t\tthis.attachedContextContainer = dom.append(this.container, $('.chat-attached-context'));\n\t\t\tinputAndSideToolbar = dom.append(this.container, $('.interactive-input-and-side-toolbar'));\n\t\t\tinputContainer = dom.append(inputAndSideToolbar, $('.interactive-input-and-execute-toolbar'));\n\t\t}\n\t\tthis.initAttachedContext(this.attachedContextContainer);\n\n\t\tconst inputScopedContextKeyService = this._register(this.contextKeyService.createScoped(inputContainer));\n\t\tCONTEXT_IN_CHAT_INPUT.bindTo(inputScopedContextKeyService).set(true);\n\t\tconst scopedInstantiationService = this._register(this.instantiationService.createChild(new ServiceCollection([IContextKeyService, inputScopedContextKeyService])));\n\n\t\tconst { historyNavigationBackwardsEnablement, historyNavigationForwardsEnablement } = this._register(registerAndCreateHistoryNavigationContext(inputScopedContextKeyService, this));\n\t\tthis.historyNavigationBackwardsEnablement = historyNavigationBackwardsEnablement;\n\t\tthis.historyNavigationForewardsEnablement = historyNavigationForwardsEnablement;\n\n\t\tconst options: IEditorConstructionOptions = getSimpleEditorOptions(this.configurationService);\n\t\toptions.overflowWidgetsDomNode = this.options.editorOverflowWidgetsDomNode;\n\t\toptions.readOnly = false;\n\t\toptions.ariaLabel = this._getAriaLabel();\n\t\toptions.fontFamily = DEFAULT_FONT_FAMILY;\n\t\toptions.fontSize = 13;\n\t\toptions.lineHeight = 20;\n\t\toptions.padding = this.options.renderStyle === 'compact' ? { top: 2, bottom: 2 } : { top: 8, bottom: 8 };\n\t\toptions.cursorWidth = 1;\n\t\toptions.wrappingStrategy = 'advanced';\n\t\toptions.bracketPairColorization = { enabled: false };\n\t\toptions.suggest = {\n\t\t\tshowIcons: false,\n\t\t\tshowSnippets: false,\n\t\t\tshowWords: true,\n\t\t\tshowStatusBar: false,\n\t\t\tinsertMode: 'replace',\n\t\t};\n\t\toptions.scrollbar = { ...(options.scrollbar ?? {}), vertical: 'hidden' };\n\t\toptions.stickyScroll = { enabled: false };\n\n\t\tthis._inputEditorElement = dom.append(inputContainer, $(chatInputEditorContainerSelector));\n\t\tconst editorOptions = getSimpleCodeEditorWidgetOptions();\n\t\teditorOptions.contributions?.push(...EditorExtensionsRegistry.getSomeEditorContributions([ContentHoverController.ID, GlyphHoverController.ID]));\n\t\tthis._inputEditor = this._register(scopedInstantiationService.createInstance(CodeEditorWidget, this._inputEditorElement, options, editorOptions));\n\n\t\tthis._register(this._inputEditor.onDidChangeModelContent(() => {\n\t\t\tconst currentHeight = Math.min(this._inputEditor.getContentHeight(), this.inputEditorMaxHeight);\n\t\t\tif (currentHeight !== this.inputEditorHeight) {\n\t\t\t\tthis.inputEditorHeight = currentHeight;\n\t\t\t\tthis._onDidChangeHeight.fire();\n\t\t\t}\n\n\t\t\tconst model = this._inputEditor.getModel();\n\t\t\tconst inputHasText = !!model && model.getValue().trim().length > 0;\n\t\t\tthis.inputEditorHasText.set(inputHasText);\n\t\t}));\n\t\tthis._register(this._inputEditor.onDidFocusEditorText(() => {\n\t\t\tthis.inputEditorHasFocus.set(true);\n\t\t\tthis._onDidFocus.fire();\n\t\t\tinputContainer.classList.toggle('focused', true);\n\t\t}));\n\t\tthis._register(this._inputEditor.onDidBlurEditorText(() => {\n\t\t\tthis.inputEditorHasFocus.set(false);\n\t\t\tinputContainer.classList.toggle('focused', false);\n\n\t\t\tthis._onDidBlur.fire();\n\t\t}));\n\n\t\tthis.toolbar = this._register(this.instantiationService.createInstance(MenuWorkbenchToolBar, inputContainer, this.options.menus.executeToolbar, {\n\t\t\ttelemetrySource: this.options.menus.telemetrySource,\n\t\t\tmenuOptions: {\n\t\t\t\tshouldForwardArgs: true\n\t\t\t},\n\t\t\thiddenItemStrategy: HiddenItemStrategy.Ignore, // keep it lean when hiding items and avoid a \"...\" overflow menu\n\t\t\tactionViewItemProvider: (action, options) => {\n\t\t\t\tif (this.location === ChatAgentLocation.Panel) {\n\t\t\t\t\tif ((action.id === SubmitAction.ID || action.id === CancelAction.ID) && action instanceof MenuItemAction) {\n\t\t\t\t\t\tconst dropdownAction = this.instantiationService.createInstance(MenuItemAction, { id: 'chat.moreExecuteActions', title: localize('notebook.moreExecuteActionsLabel', \"More...\"), icon: Codicon.chevronDown }, undefined, undefined, undefined, undefined);\n\t\t\t\t\t\treturn this.instantiationService.createInstance(ChatSubmitDropdownActionItem, action, dropdownAction);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t}));\n\t\tthis.toolbar.getElement().classList.add('interactive-execute-toolbar');\n\t\tthis.toolbar.context = { widget } satisfies IChatExecuteActionContext;\n\t\tthis._register(this.toolbar.onDidChangeMenuItems(() => {\n\t\t\tif (this.cachedDimensions && typeof this.cachedToolbarWidth === 'number' && this.cachedToolbarWidth !== this.toolbar.getItemsWidth()) {\n\t\t\t\tthis.layout(this.cachedDimensions.height, this.cachedDimensions.width);\n\t\t\t}\n\t\t}));\n\n\t\tif (this.options.menus.inputSideToolbar) {\n\t\t\tconst toolbarSide = this._register(this.instantiationService.createInstance(MenuWorkbenchToolBar, inputAndSideToolbar, this.options.menus.inputSideToolbar, {\n\t\t\t\ttelemetrySource: this.options.menus.telemetrySource,\n\t\t\t\tmenuOptions: {\n\t\t\t\t\tshouldForwardArgs: true\n\t\t\t\t}\n\t\t\t}));\n\t\t\tthis.inputSideToolbarContainer = toolbarSide.getElement();\n\t\t\ttoolbarSide.getElement().classList.add('chat-side-toolbar');\n\t\t\ttoolbarSide.context = { widget } satisfies IChatExecuteActionContext;\n\t\t}\n\n\t\tlet inputModel = this.modelService.getModel(this.inputUri);\n\t\tif (!inputModel) {\n\t\t\tinputModel = this.modelService.createModel('', null, this.inputUri, true);\n\t\t\tthis._register(inputModel);\n\t\t}\n\n\t\tthis.inputModel = inputModel;\n\t\tthis.inputModel.updateOptions({ bracketColorizationOptions: { enabled: false, independentColorPoolPerBracketType: false } });\n\t\tthis._inputEditor.setModel(this.inputModel);\n\t\tif (initialValue) {\n\t\t\tthis.inputModel.setValue(initialValue);\n\t\t\tconst lineNumber = this.inputModel.getLineCount();\n\t\t\tthis._inputEditor.setPosition({ lineNumber, column: this.inputModel.getLineMaxColumn(lineNumber) });\n\t\t}\n\n\t\tconst onDidChangeCursorPosition = () => {\n\t\t\tconst model = this._inputEditor.getModel();\n\t\t\tif (!model) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst position = this._inputEditor.getPosition();\n\t\t\tif (!position) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst atTop = position.column === 1 && position.lineNumber === 1;\n\t\t\tthis.chatCursorAtTop.set(atTop);\n\n\t\t\tthis.historyNavigationBackwardsEnablement.set(atTop);\n\t\t\tthis.historyNavigationForewardsEnablement.set(position.equals(getLastPosition(model)));\n\t\t};\n\t\tthis._register(this._inputEditor.onDidChangeCursorPosition(e => onDidChangeCursorPosition()));\n\t\tonDidChangeCursorPosition();\n\t}\n\n\tprivate initAttachedContext(container: HTMLElement, isLayout = false) {\n\t\tconst oldHeight = container.offsetHeight;\n\t\tdom.clearNode(container);\n\t\tthis.attachedContextDisposables.clear();\n\t\tdom.setVisibility(Boolean(this.attachedContext.size), this.attachedContextContainer);\n\t\tif (!this.attachedContext.size) {\n\t\t\tthis._indexOfLastAttachedContextDeletedWithKeyboard = -1;\n\t\t}\n\t\t[...this.attachedContext.values()].forEach((attachment, index) => {\n\t\t\tconst widget = dom.append(container, $('.chat-attached-context-attachment.show-file-icons'));\n\t\t\tconst label = this._contextResourceLabels.create(widget, { supportIcons: true });\n\t\t\tconst file = URI.isUri(attachment.value) ? attachment.value : attachment.value && typeof attachment.value === 'object' && 'uri' in attachment.value && URI.isUri(attachment.value.uri) ? attachment.value.uri : undefined;\n\t\t\tconst range = attachment.value && typeof attachment.value === 'object' && 'range' in attachment.value && Range.isIRange(attachment.value.range) ? attachment.value.range : undefined;\n\t\t\tif (file && attachment.isFile) {\n\t\t\t\tconst fileBasename = basename(file.path);\n\t\t\t\tconst fileDirname = dirname(file.path);\n\t\t\t\tconst friendlyName = `${fileBasename} ${fileDirname}`;\n\t\t\t\tconst ariaLabel = range ? localize('chat.fileAttachmentWithRange', \"Attached file, {0}, line {1} to line {2}\", friendlyName, range.startLineNumber, range.endLineNumber) : localize('chat.fileAttachment', \"Attached file, {0}\", friendlyName);\n\n\t\t\t\tlabel.setFile(file, {\n\t\t\t\t\tfileKind: FileKind.FILE,\n\t\t\t\t\thidePath: true,\n\t\t\t\t\trange,\n\t\t\t\t});\n\t\t\t\twidget.ariaLabel = ariaLabel;\n\t\t\t\twidget.tabIndex = 0;\n\t\t\t} else {\n\t\t\t\tconst attachmentLabel = attachment.fullName ?? attachment.name;\n\t\t\t\tconst withIcon = attachment.icon?.id ? `$(${attachment.icon.id}) ${attachmentLabel}` : attachmentLabel;\n\t\t\t\tlabel.setLabel(withIcon, undefined);\n\n\t\t\t\twidget.ariaLabel = localize('chat.attachment', \"Attached context, {0}\", attachment.name);\n\t\t\t\twidget.tabIndex = 0;\n\t\t\t}\n\n\t\t\tconst clearButton = new Button(widget, { supportIcons: true });\n\n\t\t\t// If this item is rendering in place of the last attached context item, focus the clear button so the user can continue deleting attached context items with the keyboard\n\t\t\tif (index === Math.min(this._indexOfLastAttachedContextDeletedWithKeyboard, this.attachedContext.size - 1)) {\n\t\t\t\tclearButton.focus();\n\t\t\t}\n\n\t\t\tthis.attachedContextDisposables.add(clearButton);\n\t\t\tclearButton.icon = Codicon.close;\n\t\t\tconst disp = clearButton.onDidClick((e) => {\n\t\t\t\tthis._attachedContext.delete(attachment);\n\t\t\t\tdisp.dispose();\n\n\t\t\t\t// Set focus to the next attached context item if deletion was triggered by a keystroke (vs a mouse click)\n\t\t\t\tif (dom.isKeyboardEvent(e)) {\n\t\t\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\t\t\tif (event.equals(KeyCode.Enter) || event.equals(KeyCode.Space)) {\n\t\t\t\t\t\tthis._indexOfLastAttachedContextDeletedWithKeyboard = index;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis._onDidChangeHeight.fire();\n\t\t\t\tthis._onDidChangeContext.fire({ removed: [attachment] });\n\t\t\t});\n\t\t\tthis.attachedContextDisposables.add(disp);\n\t\t});\n\n\t\tif (oldHeight !== container.offsetHeight && !isLayout) {\n\t\t\tthis._onDidChangeHeight.fire();\n\t\t}\n\t}\n\n\tasync renderFollowups(items: IChatFollowup[] | undefined, response: IChatResponseViewModel | undefined): Promise<void> {\n\t\tif (!this.options.renderFollowups) {\n\t\t\treturn;\n\t\t}\n\t\tthis.followupsDisposables.clear();\n\t\tdom.clearNode(this.followupsContainer);\n\n\t\tif (items && items.length > 0) {\n\t\t\tthis.followupsDisposables.add(this.instantiationService.createInstance<typeof ChatFollowups<IChatFollowup>, ChatFollowups<IChatFollowup>>(ChatFollowups, this.followupsContainer, items, this.location, undefined, followup => this._onDidAcceptFollowup.fire({ followup, response })));\n\t\t}\n\t\tthis._onDidChangeHeight.fire();\n\t}\n\n\tget contentHeight(): number {\n\t\tconst data = this.getLayoutData();\n\t\treturn data.followupsHeight + data.inputPartEditorHeight + data.inputPartVerticalPadding + data.inputEditorBorder + data.implicitContextHeight + data.executeToolbarHeight;\n\t}\n\n\tlayout(height: number, width: number) {\n\t\tthis.cachedDimensions = new dom.Dimension(width, height);\n\n\t\treturn this._layout(height, width);\n\t}\n\n\tprivate previousInputEditorDimension: IDimension | undefined;\n\tprivate _layout(height: number, width: number, allowRecurse = true): void {\n\t\tthis.initAttachedContext(this.attachedContextContainer, true);\n\n\t\tconst data = this.getLayoutData();\n\n\t\tconst inputEditorHeight = Math.min(data.inputPartEditorHeight, height - data.followupsHeight - data.inputPartVerticalPadding);\n\n\t\tconst followupsWidth = width - data.inputPartHorizontalPadding;\n\t\tthis.followupsContainer.style.width = `${followupsWidth}px`;\n\n\t\tthis._inputPartHeight = data.followupsHeight + inputEditorHeight + data.inputPartVerticalPadding + data.inputEditorBorder + data.implicitContextHeight + data.executeToolbarHeight;\n\n\t\tconst initialEditorScrollWidth = this._inputEditor.getScrollWidth();\n\t\tconst newEditorWidth = width - data.inputPartHorizontalPadding - data.editorBorder - data.editorPadding - data.executeToolbarWidth - data.sideToolbarWidth;\n\t\tconst newDimension = { width: newEditorWidth, height: inputEditorHeight };\n\t\tif (!this.previousInputEditorDimension || (this.previousInputEditorDimension.width !== newDimension.width || this.previousInputEditorDimension.height !== newDimension.height)) {\n\t\t\t// This layout call has side-effects that are hard to understand. eg if we are calling this inside a onDidChangeContent handler, this can trigger the next onDidChangeContent handler\n\t\t\t// to be invoked, and we have a lot of these on this editor. Only doing a layout this when the editor size has actually changed makes it much easier to follow.\n\t\t\tthis._inputEditor.layout(newDimension);\n\t\t\tthis.previousInputEditorDimension = newDimension;\n\t\t}\n\n\t\tif (allowRecurse && initialEditorScrollWidth < 10) {\n\t\t\t// This is probably the initial layout. Now that the editor is layed out with its correct width, it should report the correct contentHeight\n\t\t\treturn this._layout(height, width, false);\n\t\t}\n\t}\n\n\tprivate getLayoutData() {\n\t\tconst executeToolbarWidth = this.cachedToolbarWidth = this.toolbar.getItemsWidth();\n\t\tconst executeToolbarPadding = (this.toolbar.getItemsLength() - 1) * 4;\n\t\treturn {\n\t\t\tinputEditorBorder: 2,\n\t\t\tfollowupsHeight: this.followupsContainer.offsetHeight,\n\t\t\tinputPartEditorHeight: Math.min(this._inputEditor.getContentHeight(), this.inputEditorMaxHeight),\n\t\t\tinputPartHorizontalPadding: this.options.renderStyle === 'compact' ? 12 : 32,\n\t\t\tinputPartVerticalPadding: this.options.renderStyle === 'compact' ? 12 : 24,\n\t\t\timplicitContextHeight: this.attachedContextContainer.offsetHeight,\n\t\t\teditorBorder: 2,\n\t\t\teditorPadding: 12,\n\t\t\texecuteToolbarWidth: this.options.renderStyle === 'compact' ? executeToolbarWidth + executeToolbarPadding : 0,\n\t\t\texecuteToolbarHeight: this.options.renderStyle === 'compact' ? 0 : 22,\n\t\t\tsideToolbarWidth: this.inputSideToolbarContainer ? dom.getTotalWidth(this.inputSideToolbarContainer) + 4 /*gap*/ : 0,\n\t\t};\n\t}\n\n\tsaveState(): void {\n\t\tthis.saveCurrentValue(this.getInputState());\n\t\tconst inputHistory = [...this.history];\n\t\tthis.historyService.saveHistory(this.location, inputHistory);\n\t}\n}\n\nconst historyKeyFn = (entry: IChatHistoryEntry) => JSON.stringify(entry);\n\nfunction getLastPosition(model: ITextModel): IPosition {\n\treturn { lineNumber: model.getLineCount(), column: model.getLineLength(model.getLineCount()) + 1 };\n}\n\n// This does seems like a lot just to customize an item with dropdown. This whole class exists just because we need an\n// onDidChange listener on the submenu, which is apparently not needed in other cases.\nclass ChatSubmitDropdownActionItem extends DropdownWithPrimaryActionViewItem {\n\tconstructor(\n\t\taction: MenuItemAction,\n\t\tdropdownAction: IAction,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IChatAgentService chatAgentService: IChatAgentService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IAccessibilityService accessibilityService: IAccessibilityService\n\t) {\n\t\tsuper(\n\t\t\taction,\n\t\t\tdropdownAction,\n\t\t\t[],\n\t\t\t'',\n\t\t\tcontextMenuService,\n\t\t\t{\n\t\t\t\tgetKeyBinding: (action: IAction) => keybindingService.lookupKeybinding(action.id, contextKeyService)\n\t\t\t},\n\t\t\tkeybindingService,\n\t\t\tnotificationService,\n\t\t\tcontextKeyService,\n\t\t\tthemeService,\n\t\t\taccessibilityService);\n\t\tconst menu = menuService.createMenu(MenuId.ChatExecuteSecondary, contextKeyService);\n\t\tconst setActions = () => {\n\t\t\tconst secondary: IAction[] = [];\n\t\t\tcreateAndFillInActionBarActions(menu, { shouldForwardArgs: true }, secondary);\n\t\t\tconst secondaryAgent = chatAgentService.getSecondaryAgent();\n\t\t\tif (secondaryAgent) {\n\t\t\t\tsecondary.forEach(a => {\n\t\t\t\t\tif (a.id === ChatSubmitSecondaryAgentAction.ID) {\n\t\t\t\t\t\ta.label = localize('chat.submitToSecondaryAgent', \"Send to @{0}\", secondaryAgent.name);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn a;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.update(dropdownAction, secondary);\n\t\t};\n\t\tsetActions();\n\t\tthis._register(menu.onDidChange(() => setActions()));\n\t}\n}\n\nconst chatInputEditorContainerSelector = '.interactive-input-editor';\nsetupSimpleEditorSelectionStyling(chatInputEditorContainerSelector);\n"],
  "mappings": "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",
  "names": ["options", "action"]
}
