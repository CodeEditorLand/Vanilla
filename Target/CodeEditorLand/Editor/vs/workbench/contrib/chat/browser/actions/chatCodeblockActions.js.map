{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/chat/browser/actions/chatCodeblockActions.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { KeyCode, KeyMod } from '../../../../../base/common/keyCodes.js';\nimport { ICodeEditor } from '../../../../../editor/browser/editorBrowser.js';\nimport { ServicesAccessor } from '../../../../../editor/browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../../../editor/browser/services/codeEditorService.js';\nimport { EditorContextKeys } from '../../../../../editor/common/editorContextKeys.js';\nimport { CopyAction } from '../../../../../editor/contrib/clipboard/browser/clipboard.js';\nimport { localize2 } from '../../../../../nls.js';\nimport { Action2, MenuId, registerAction2 } from '../../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../../platform/clipboard/common/clipboardService.js';\nimport { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingWeight } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { TerminalLocation } from '../../../../../platform/terminal/common/terminal.js';\nimport { IUntitledTextResourceEditorInput } from '../../../../common/editor.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { accessibleViewInCodeBlock } from '../../../accessibility/browser/accessibilityConfiguration.js';\nimport { ITerminalEditorService, ITerminalGroupService, ITerminalService } from '../../../terminal/browser/terminal.js';\nimport { CONTEXT_CHAT_EDIT_APPLIED, CONTEXT_CHAT_ENABLED, CONTEXT_IN_CHAT_INPUT, CONTEXT_IN_CHAT_SESSION } from '../../common/chatContextKeys.js';\nimport { ChatCopyKind, IChatService } from '../../common/chatService.js';\nimport { IChatResponseViewModel, isResponseVM } from '../../common/chatViewModel.js';\nimport { IChatCodeBlockContextProviderService, IChatWidgetService } from '../chat.js';\nimport { DefaultChatTextEditor, ICodeBlockActionContext, ICodeCompareBlockActionContext } from '../codeBlockPart.js';\nimport { CHAT_CATEGORY } from './chatActions.js';\nimport { InsertCodeBlockOperation, ApplyCodeBlockOperation } from './codeBlockOperations.js';\n\nconst shellLangIds = [\n\t'fish',\n\t'ps1',\n\t'pwsh',\n\t'powershell',\n\t'sh',\n\t'shellscript',\n\t'zsh'\n];\n\nexport interface IChatCodeBlockActionContext extends ICodeBlockActionContext {\n\telement: IChatResponseViewModel;\n}\n\nexport function isCodeBlockActionContext(thing: unknown): thing is ICodeBlockActionContext {\n\treturn typeof thing === 'object' && thing !== null && 'code' in thing && 'element' in thing;\n}\n\nexport function isCodeCompareBlockActionContext(thing: unknown): thing is ICodeCompareBlockActionContext {\n\treturn typeof thing === 'object' && thing !== null && 'element' in thing;\n}\n\nfunction isResponseFiltered(context: ICodeBlockActionContext) {\n\treturn isResponseVM(context.element) && context.element.errorDetails?.responseIsFiltered;\n}\n\nabstract class ChatCodeBlockAction extends Action2 {\n\trun(accessor: ServicesAccessor, ...args: any[]) {\n\t\tlet context = args[0];\n\t\tif (!isCodeBlockActionContext(context)) {\n\t\t\tconst codeEditorService = accessor.get(ICodeEditorService);\n\t\t\tconst editor = codeEditorService.getFocusedCodeEditor() || codeEditorService.getActiveCodeEditor();\n\t\t\tif (!editor) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcontext = getContextFromEditor(editor, accessor);\n\t\t\tif (!isCodeBlockActionContext(context)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\treturn this.runWithContext(accessor, context);\n\t}\n\n\tabstract runWithContext(accessor: ServicesAccessor, context: ICodeBlockActionContext): any;\n}\n\nexport function registerChatCodeBlockActions() {\n\tregisterAction2(class CopyCodeBlockAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.copyCodeBlock',\n\t\t\t\ttitle: localize2('interactive.copyCodeBlock.label', \"Copy\"),\n\t\t\t\tf1: false,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\ticon: Codicon.copy,\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MenuId.ChatCodeBlock,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 30\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\trun(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\tconst context = args[0];\n\t\t\tif (!isCodeBlockActionContext(context) || isResponseFiltered(context)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst clipboardService = accessor.get(IClipboardService);\n\t\t\tclipboardService.writeText(context.code);\n\n\t\t\tif (isResponseVM(context.element)) {\n\t\t\t\tconst chatService = accessor.get(IChatService);\n\t\t\t\tchatService.notifyUserAction({\n\t\t\t\t\tagentId: context.element.agent?.id,\n\t\t\t\t\tcommand: context.element.slashCommand?.name,\n\t\t\t\t\tsessionId: context.element.sessionId,\n\t\t\t\t\trequestId: context.element.requestId,\n\t\t\t\t\tresult: context.element.result,\n\t\t\t\t\taction: {\n\t\t\t\t\t\tkind: 'copy',\n\t\t\t\t\t\tcodeBlockIndex: context.codeBlockIndex,\n\t\t\t\t\t\tcopyKind: ChatCopyKind.Toolbar,\n\t\t\t\t\t\tcopiedCharacters: context.code.length,\n\t\t\t\t\t\ttotalCharacters: context.code.length,\n\t\t\t\t\t\tcopiedText: context.code,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tCopyAction?.addImplementation(50000, 'chat-codeblock', (accessor) => {\n\t\t// get active code editor\n\t\tconst editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n\t\tif (!editor) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst editorModel = editor.getModel();\n\t\tif (!editorModel) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst context = getContextFromEditor(editor, accessor);\n\t\tif (!context) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst noSelection = editor.getSelections()?.length === 1 && editor.getSelection()?.isEmpty();\n\t\tconst copiedText = noSelection ?\n\t\t\teditorModel.getValue() :\n\t\t\teditor.getSelections()?.reduce((acc, selection) => acc + editorModel.getValueInRange(selection), '') ?? '';\n\t\tconst totalCharacters = editorModel.getValueLength();\n\n\t\t// Report copy to extensions\n\t\tconst chatService = accessor.get(IChatService);\n\t\tconst element = context.element as IChatResponseViewModel | undefined;\n\t\tif (element) {\n\t\t\tchatService.notifyUserAction({\n\t\t\t\tagentId: element.agent?.id,\n\t\t\t\tcommand: element.slashCommand?.name,\n\t\t\t\tsessionId: element.sessionId,\n\t\t\t\trequestId: element.requestId,\n\t\t\t\tresult: element.result,\n\t\t\t\taction: {\n\t\t\t\t\tkind: 'copy',\n\t\t\t\t\tcodeBlockIndex: context.codeBlockIndex,\n\t\t\t\t\tcopyKind: ChatCopyKind.Action,\n\t\t\t\t\tcopiedText,\n\t\t\t\t\tcopiedCharacters: copiedText.length,\n\t\t\t\t\ttotalCharacters,\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// Copy full cell if no selection, otherwise fall back on normal editor implementation\n\t\tif (noSelection) {\n\t\t\taccessor.get(IClipboardService).writeText(context.code);\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t});\n\n\tregisterAction2(class SmartApplyInEditorAction extends ChatCodeBlockAction {\n\n\t\tprivate operation: ApplyCodeBlockOperation | undefined;\n\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.applyInEditor',\n\t\t\t\ttitle: localize2('interactive.applyInEditor.label', \"Apply in Editor\"),\n\t\t\t\tprecondition: CONTEXT_CHAT_ENABLED,\n\t\t\t\tf1: true,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\ticon: Codicon.gitPullRequestGoToChanges,\n\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MenuId.ChatCodeBlock,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tCONTEXT_IN_CHAT_SESSION,\n\t\t\t\t\t\t...shellLangIds.map(e => ContextKeyExpr.notEquals(EditorContextKeys.languageId.key, e))\n\t\t\t\t\t),\n\t\t\t\t\torder: 10\n\t\t\t\t},\n\t\t\t\tkeybinding: {\n\t\t\t\t\twhen: ContextKeyExpr.or(ContextKeyExpr.and(CONTEXT_IN_CHAT_SESSION, CONTEXT_IN_CHAT_INPUT.negate()), accessibleViewInCodeBlock),\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Enter,\n\t\t\t\t\tmac: { primary: KeyMod.WinCtrl | KeyCode.Enter },\n\t\t\t\t\tweight: KeybindingWeight.ExternalExtension + 1\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\toverride runWithContext(accessor: ServicesAccessor, context: ICodeBlockActionContext) {\n\t\t\tif (!this.operation) {\n\t\t\t\tthis.operation = accessor.get(IInstantiationService).createInstance(ApplyCodeBlockOperation);\n\t\t\t}\n\t\t\treturn this.operation.run(context);\n\t\t}\n\t});\n\n\tregisterAction2(class SmartApplyInEditorAction extends ChatCodeBlockAction {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.insertCodeBlock',\n\t\t\t\ttitle: localize2('interactive.insertCodeBlock.label', \"Insert At Cursor\"),\n\t\t\t\tprecondition: CONTEXT_CHAT_ENABLED,\n\t\t\t\tf1: true,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\ticon: Codicon.insert,\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MenuId.ChatCodeBlock,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\twhen: CONTEXT_IN_CHAT_SESSION,\n\t\t\t\t\torder: 20\n\t\t\t\t},\n\t\t\t\tkeybinding: {\n\t\t\t\t\twhen: ContextKeyExpr.or(ContextKeyExpr.and(CONTEXT_IN_CHAT_SESSION, CONTEXT_IN_CHAT_INPUT.negate()), accessibleViewInCodeBlock),\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Enter,\n\t\t\t\t\tmac: { primary: KeyMod.WinCtrl | KeyCode.Enter },\n\t\t\t\t\tweight: KeybindingWeight.ExternalExtension + 1\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\toverride runWithContext(accessor: ServicesAccessor, context: ICodeBlockActionContext) {\n\t\t\tconst operation = accessor.get(IInstantiationService).createInstance(InsertCodeBlockOperation);\n\t\t\treturn operation.run(context);\n\t\t}\n\t});\n\n\tregisterAction2(class InsertIntoNewFileAction extends ChatCodeBlockAction {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.insertIntoNewFile',\n\t\t\t\ttitle: localize2('interactive.insertIntoNewFile.label', \"Insert into New File\"),\n\t\t\t\tprecondition: CONTEXT_CHAT_ENABLED,\n\t\t\t\tf1: true,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\ticon: Codicon.newFile,\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MenuId.ChatCodeBlock,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\tisHiddenByDefault: true,\n\t\t\t\t\torder: 40,\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\toverride async runWithContext(accessor: ServicesAccessor, context: ICodeBlockActionContext) {\n\t\t\tif (isResponseFiltered(context)) {\n\t\t\t\t// When run from command palette\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst editorService = accessor.get(IEditorService);\n\t\t\tconst chatService = accessor.get(IChatService);\n\n\t\t\teditorService.openEditor({ contents: context.code, languageId: context.languageId, resource: undefined } satisfies IUntitledTextResourceEditorInput);\n\n\t\t\tif (isResponseVM(context.element)) {\n\t\t\t\tchatService.notifyUserAction({\n\t\t\t\t\tagentId: context.element.agent?.id,\n\t\t\t\t\tcommand: context.element.slashCommand?.name,\n\t\t\t\t\tsessionId: context.element.sessionId,\n\t\t\t\t\trequestId: context.element.requestId,\n\t\t\t\t\tresult: context.element.result,\n\t\t\t\t\taction: {\n\t\t\t\t\t\tkind: 'insert',\n\t\t\t\t\t\tcodeBlockIndex: context.codeBlockIndex,\n\t\t\t\t\t\ttotalCharacters: context.code.length,\n\t\t\t\t\t\tnewFile: true\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tregisterAction2(class RunInTerminalAction extends ChatCodeBlockAction {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.runInTerminal',\n\t\t\t\ttitle: localize2('interactive.runInTerminal.label', \"Insert into Terminal\"),\n\t\t\t\tprecondition: CONTEXT_CHAT_ENABLED,\n\t\t\t\tf1: true,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\ticon: Codicon.terminal,\n\t\t\t\tmenu: [{\n\t\t\t\t\tid: MenuId.ChatCodeBlock,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tCONTEXT_IN_CHAT_SESSION,\n\t\t\t\t\t\tContextKeyExpr.or(...shellLangIds.map(e => ContextKeyExpr.equals(EditorContextKeys.languageId.key, e)))\n\t\t\t\t\t),\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: MenuId.ChatCodeBlock,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\tisHiddenByDefault: true,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tCONTEXT_IN_CHAT_SESSION,\n\t\t\t\t\t\t...shellLangIds.map(e => ContextKeyExpr.notEquals(EditorContextKeys.languageId.key, e))\n\t\t\t\t\t)\n\t\t\t\t}],\n\t\t\t\tkeybinding: [{\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.Enter,\n\t\t\t\t\tmac: {\n\t\t\t\t\t\tprimary: KeyMod.WinCtrl | KeyMod.Alt | KeyCode.Enter\n\t\t\t\t\t},\n\t\t\t\t\tweight: KeybindingWeight.EditorContrib,\n\t\t\t\t\twhen: ContextKeyExpr.or(CONTEXT_IN_CHAT_SESSION, accessibleViewInCodeBlock),\n\t\t\t\t}]\n\t\t\t});\n\t\t}\n\n\t\toverride async runWithContext(accessor: ServicesAccessor, context: ICodeBlockActionContext) {\n\t\t\tif (isResponseFiltered(context)) {\n\t\t\t\t// When run from command palette\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst chatService = accessor.get(IChatService);\n\t\t\tconst terminalService = accessor.get(ITerminalService);\n\t\t\tconst editorService = accessor.get(IEditorService);\n\t\t\tconst terminalEditorService = accessor.get(ITerminalEditorService);\n\t\t\tconst terminalGroupService = accessor.get(ITerminalGroupService);\n\n\t\t\tlet terminal = await terminalService.getActiveOrCreateInstance();\n\n\t\t\t// isFeatureTerminal = debug terminal or task terminal\n\t\t\tconst unusableTerminal = terminal.xterm?.isStdinDisabled || terminal.shellLaunchConfig.isFeatureTerminal;\n\t\t\tterminal = unusableTerminal ? await terminalService.createTerminal() : terminal;\n\n\t\t\tterminalService.setActiveInstance(terminal);\n\t\t\tawait terminal.focusWhenReady(true);\n\t\t\tif (terminal.target === TerminalLocation.Editor) {\n\t\t\t\tconst existingEditors = editorService.findEditors(terminal.resource);\n\t\t\t\tterminalEditorService.openEditor(terminal, { viewColumn: existingEditors?.[0].groupId });\n\t\t\t} else {\n\t\t\t\tterminalGroupService.showPanel(true);\n\t\t\t}\n\n\t\t\tterminal.runCommand(context.code, false);\n\n\t\t\tif (isResponseVM(context.element)) {\n\t\t\t\tchatService.notifyUserAction({\n\t\t\t\t\tagentId: context.element.agent?.id,\n\t\t\t\t\tcommand: context.element.slashCommand?.name,\n\t\t\t\t\tsessionId: context.element.sessionId,\n\t\t\t\t\trequestId: context.element.requestId,\n\t\t\t\t\tresult: context.element.result,\n\t\t\t\t\taction: {\n\t\t\t\t\t\tkind: 'runInTerminal',\n\t\t\t\t\t\tcodeBlockIndex: context.codeBlockIndex,\n\t\t\t\t\t\tlanguageId: context.languageId,\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tfunction navigateCodeBlocks(accessor: ServicesAccessor, reverse?: boolean): void {\n\t\tconst codeEditorService = accessor.get(ICodeEditorService);\n\t\tconst chatWidgetService = accessor.get(IChatWidgetService);\n\t\tconst widget = chatWidgetService.lastFocusedWidget;\n\t\tif (!widget) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst editor = codeEditorService.getFocusedCodeEditor();\n\t\tconst editorUri = editor?.getModel()?.uri;\n\t\tconst curCodeBlockInfo = editorUri ? widget.getCodeBlockInfoForEditor(editorUri) : undefined;\n\t\tconst focused = !widget.inputEditor.hasWidgetFocus() && widget.getFocus();\n\t\tconst focusedResponse = isResponseVM(focused) ? focused : undefined;\n\n\t\tconst currentResponse = curCodeBlockInfo ?\n\t\t\tcurCodeBlockInfo.element :\n\t\t\t(focusedResponse ?? widget.viewModel?.getItems().reverse().find((item): item is IChatResponseViewModel => isResponseVM(item)));\n\t\tif (!currentResponse || !isResponseVM(currentResponse)) {\n\t\t\treturn;\n\t\t}\n\n\t\twidget.reveal(currentResponse);\n\t\tconst responseCodeblocks = widget.getCodeBlockInfosForResponse(currentResponse);\n\t\tconst focusIdx = curCodeBlockInfo ?\n\t\t\t(curCodeBlockInfo.codeBlockIndex + (reverse ? -1 : 1) + responseCodeblocks.length) % responseCodeblocks.length :\n\t\t\treverse ? responseCodeblocks.length - 1 : 0;\n\n\t\tresponseCodeblocks[focusIdx]?.focus();\n\t}\n\n\tregisterAction2(class NextCodeBlockAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.nextCodeBlock',\n\t\t\t\ttitle: localize2('interactive.nextCodeBlock.label', \"Next Code Block\"),\n\t\t\t\tkeybinding: {\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.PageDown,\n\t\t\t\t\tmac: { primary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.PageDown, },\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t\twhen: CONTEXT_IN_CHAT_SESSION,\n\t\t\t\t},\n\t\t\t\tprecondition: CONTEXT_CHAT_ENABLED,\n\t\t\t\tf1: true,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t});\n\t\t}\n\n\t\trun(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\tnavigateCodeBlocks(accessor);\n\t\t}\n\t});\n\n\tregisterAction2(class PreviousCodeBlockAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.previousCodeBlock',\n\t\t\t\ttitle: localize2('interactive.previousCodeBlock.label', \"Previous Code Block\"),\n\t\t\t\tkeybinding: {\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.PageUp,\n\t\t\t\t\tmac: { primary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.PageUp, },\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t\twhen: CONTEXT_IN_CHAT_SESSION,\n\t\t\t\t},\n\t\t\t\tprecondition: CONTEXT_CHAT_ENABLED,\n\t\t\t\tf1: true,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t});\n\t\t}\n\n\t\trun(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\tnavigateCodeBlocks(accessor, true);\n\t\t}\n\t});\n}\n\nfunction getContextFromEditor(editor: ICodeEditor, accessor: ServicesAccessor): ICodeBlockActionContext | undefined {\n\tconst chatWidgetService = accessor.get(IChatWidgetService);\n\tconst chatCodeBlockContextProviderService = accessor.get(IChatCodeBlockContextProviderService);\n\tconst model = editor.getModel();\n\tif (!model) {\n\t\treturn;\n\t}\n\n\tconst widget = chatWidgetService.lastFocusedWidget;\n\tconst codeBlockInfo = widget?.getCodeBlockInfoForEditor(model.uri);\n\tif (!codeBlockInfo) {\n\t\tfor (const provider of chatCodeBlockContextProviderService.providers) {\n\t\t\tconst context = provider.getCodeBlockContext(editor);\n\t\t\tif (context) {\n\t\t\t\treturn context;\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\treturn {\n\t\telement: codeBlockInfo.element,\n\t\tcodeBlockIndex: codeBlockInfo.codeBlockIndex,\n\t\tcode: editor.getValue(),\n\t\tlanguageId: editor.getModel()!.getLanguageId(),\n\t\tcodemapperUri: codeBlockInfo.codemapperUri\n\t};\n}\n\nexport function registerChatCodeCompareBlockActions() {\n\n\tabstract class ChatCompareCodeBlockAction extends Action2 {\n\t\trun(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\tconst context = args[0];\n\t\t\tif (!isCodeCompareBlockActionContext(context)) {\n\t\t\t\treturn;\n\t\t\t\t// TODO@jrieken derive context\n\t\t\t}\n\n\t\t\treturn this.runWithContext(accessor, context);\n\t\t}\n\n\t\tabstract runWithContext(accessor: ServicesAccessor, context: ICodeCompareBlockActionContext): any;\n\t}\n\n\tregisterAction2(class ApplyEditsCompareBlockAction extends ChatCompareCodeBlockAction {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.applyCompareEdits',\n\t\t\t\ttitle: localize2('interactive.compare.apply', \"Apply Edits\"),\n\t\t\t\tf1: false,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\ticon: Codicon.check,\n\t\t\t\tprecondition: ContextKeyExpr.and(EditorContextKeys.hasChanges, CONTEXT_CHAT_EDIT_APPLIED.negate()),\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MenuId.ChatCompareBlock,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 1,\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tasync runWithContext(accessor: ServicesAccessor, context: ICodeCompareBlockActionContext): Promise<any> {\n\n\t\t\tconst editorService = accessor.get(IEditorService);\n\t\t\tconst instaService = accessor.get(IInstantiationService);\n\n\t\t\tconst editor = instaService.createInstance(DefaultChatTextEditor);\n\t\t\tawait editor.apply(context.element, context.edit, context.diffEditor);\n\n\t\t\tawait editorService.openEditor({\n\t\t\t\tresource: context.edit.uri,\n\t\t\t\toptions: { revealIfVisible: true },\n\t\t\t});\n\t\t}\n\t});\n\n\tregisterAction2(class DiscardEditsCompareBlockAction extends ChatCompareCodeBlockAction {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: 'workbench.action.chat.discardCompareEdits',\n\t\t\t\ttitle: localize2('interactive.compare.discard', \"Discard Edits\"),\n\t\t\t\tf1: false,\n\t\t\t\tcategory: CHAT_CATEGORY,\n\t\t\t\ticon: Codicon.trash,\n\t\t\t\tprecondition: ContextKeyExpr.and(EditorContextKeys.hasChanges, CONTEXT_CHAT_EDIT_APPLIED.negate()),\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MenuId.ChatCompareBlock,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 2,\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tasync runWithContext(accessor: ServicesAccessor, context: ICodeCompareBlockActionContext): Promise<any> {\n\t\t\tconst instaService = accessor.get(IInstantiationService);\n\t\t\tconst editor = instaService.createInstance(DefaultChatTextEditor);\n\t\t\teditor.discard(context.element, context.edit);\n\t\t}\n\t});\n}\n"],
  "mappings": "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",
  "names": []
}
