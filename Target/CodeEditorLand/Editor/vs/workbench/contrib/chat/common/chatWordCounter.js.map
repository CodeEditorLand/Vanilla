{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/chat/common/chatWordCounter.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport interface IWordCountResult {\n\tvalue: string;\n\treturnedWordCount: number;\n\ttotalWordCount: number;\n\tisFullString: boolean;\n}\n\nconst r = String.raw;\n\n/**\n * Matches `[text](link title?)` or `[text](<link> title?)`\n *\n * Taken from vscode-markdown-languageservice\n */\nconst linkPattern =\n\tr`(?<!\\\\)` + // Must not start with escape\n\t// text\n\tr`(!?\\[` + // open prefix match -->\n\t/**/ r`(?:` +\n\t/*****/ r`[^\\[\\]\\\\]|` + // Non-bracket chars, or...\n\t/*****/ r`\\\\.|` + // Escaped char, or...\n\t/*****/ r`\\[[^\\[\\]]*\\]` + // Matched bracket pair\n\t/**/ r`)*` +\n\tr`\\])` + // <-- close prefix match\n\t// Destination\n\tr`(\\(\\s*)` + // Pre href\n\t/**/ r`(` +\n\t/*****/ r`[^\\s\\(\\)<](?:[^\\s\\(\\)]|\\([^\\s\\(\\)]*?\\))*|` + // Link without whitespace, or...\n\t/*****/ r`<(?:\\\\[<>]|[^<>])+>` + // In angle brackets\n\t/**/ r`)` +\n\t// Title\n\t/**/ r`\\s*(?:\"[^\"]*\"|'[^']*'|\\([^\\(\\)]*\\))?\\s*` +\n\tr`\\)`;\n\nexport function getNWords(\n\tstr: string,\n\tnumWordsToCount: number,\n): IWordCountResult {\n\t// This regex matches each word and skips over whitespace and separators. A word is:\n\t// A markdown link\n\t// One chinese character\n\t// One or more + - =, handled so that code like \"a=1+2-3\" is broken up better\n\t// One or more characters that aren't whitepace or any of the above\n\tconst allWordMatches = Array.from(\n\t\tstr.matchAll(\n\t\t\tnew RegExp(\n\t\t\t\tlinkPattern +\n\t\t\t\t\tr`|\\p{sc=Han}|=+|\\++|-+|[^\\s\\|\\p{sc=Han}|=|\\+|\\-]+`,\n\t\t\t\t\"gu\",\n\t\t\t),\n\t\t),\n\t);\n\n\tconst targetWords = allWordMatches.slice(0, numWordsToCount);\n\n\tconst endIndex =\n\t\tnumWordsToCount > allWordMatches.length\n\t\t\t? str.length // Reached end of string\n\t\t\t: targetWords.length\n\t\t\t\t? targetWords.at(-1)!.index + targetWords.at(-1)![0].length\n\t\t\t\t: 0;\n\n\tconst value = str.substring(0, endIndex);\n\treturn {\n\t\tvalue,\n\t\treturnedWordCount:\n\t\t\ttargetWords.length === 0\n\t\t\t\t? value.length\n\t\t\t\t\t? 1\n\t\t\t\t\t: 0\n\t\t\t\t: targetWords.length,\n\t\tisFullString: endIndex >= str.length,\n\t\ttotalWordCount: allWordMatches.length,\n\t};\n}\n\nexport function countWords(str: string): number {\n\tconst result = getNWords(str, Number.MAX_SAFE_INTEGER);\n\treturn result.returnedWordCount;\n}\n"],
  "mappings": ";;AAYA,MAAM,IAAI,OAAO;AAOjB,MAAM,cACL;AAAA;AAEA;AAAA;AACK;AACG;AAAA;AACA;AAAA;AACA;AAAA;AACH,QACL;AAAA;AAEA;AAAA;AACK;AACG;AAAA;AACA;AAAA;AACH;AAAA;AAEA,6CACL;AAEM,SAAS,UACf,KACA,iBACmB;AAMnB,QAAM,iBAAiB,MAAM;AAAA,IAC5B,IAAI;AAAA,MACH,IAAI;AAAA,QACH,cACC;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAEA,QAAM,cAAc,eAAe,MAAM,GAAG,eAAe;AAE3D,QAAM,WACL,kBAAkB,eAAe,SAC9B,IAAI,SACJ,YAAY,SACX,YAAY,GAAG,EAAE,EAAG,QAAQ,YAAY,GAAG,EAAE,EAAG,CAAC,EAAE,SACnD;AAEL,QAAM,QAAQ,IAAI,UAAU,GAAG,QAAQ;AACvC,SAAO;AAAA,IACN;AAAA,IACA,mBACC,YAAY,WAAW,IACpB,MAAM,SACL,IACA,IACD,YAAY;AAAA,IAChB,cAAc,YAAY,IAAI;AAAA,IAC9B,gBAAgB,eAAe;AAAA,EAChC;AACD;AAxCgB;AA0CT,SAAS,WAAW,KAAqB;AAC/C,QAAM,SAAS,UAAU,KAAK,OAAO,gBAAgB;AACrD,SAAO,OAAO;AACf;AAHgB;",
  "names": []
}
