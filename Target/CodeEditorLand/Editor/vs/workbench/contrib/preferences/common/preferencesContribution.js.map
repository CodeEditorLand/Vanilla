{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/preferences/common/preferencesContribution.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable, dispose, IDisposable } from '../../../../base/common/lifecycle.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport * as nls from '../../../../nls.js';\nimport { ConfigurationTarget, IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ConfigurationScope, Extensions, IConfigurationRegistry } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { IWorkspaceContextService, WorkbenchState } from '../../../../platform/workspace/common/workspace.js';\nimport { workbenchConfigurationNodeBase } from '../../../common/configuration.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { EditorInputWithOptions } from '../../../common/editor.js';\nimport { SideBySideEditorInput } from '../../../common/editor/sideBySideEditorInput.js';\nimport { RegisteredEditorPriority, IEditorResolverService } from '../../../services/editor/common/editorResolverService.js';\nimport { ITextEditorService } from '../../../services/textfile/common/textEditorService.js';\nimport { DEFAULT_SETTINGS_EDITOR_SETTING, FOLDER_SETTINGS_PATH, IPreferencesService, USE_SPLIT_JSON_SETTING } from '../../../services/preferences/common/preferences.js';\nimport { IUserDataProfileService } from '../../../services/userDataProfile/common/userDataProfile.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { SettingsFileSystemProvider } from './settingsFilesystemProvider.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\n\nexport class PreferencesContribution extends Disposable implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.preferences';\n\n\tprivate editorOpeningListener: IDisposable | undefined;\n\n\tconstructor(\n\t\t@IFileService fileService: IFileService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IPreferencesService private readonly preferencesService: IPreferencesService,\n\t\t@IUserDataProfileService private readonly userDataProfileService: IUserDataProfileService,\n\t\t@IWorkspaceContextService private readonly workspaceService: IWorkspaceContextService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IEditorResolverService private readonly editorResolverService: IEditorResolverService,\n\t\t@ITextEditorService private readonly textEditorService: ITextEditorService,\n\t) {\n\t\tsuper();\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(USE_SPLIT_JSON_SETTING) || e.affectsConfiguration(DEFAULT_SETTINGS_EDITOR_SETTING)) {\n\t\t\t\tthis.handleSettingsEditorRegistration();\n\t\t\t}\n\t\t}));\n\t\tthis.handleSettingsEditorRegistration();\n\n\t\tconst fileSystemProvider = this._register(this.instantiationService.createInstance(SettingsFileSystemProvider));\n\t\tthis._register(fileService.registerProvider(SettingsFileSystemProvider.SCHEMA, fileSystemProvider));\n\t}\n\n\tprivate handleSettingsEditorRegistration(): void {\n\n\t\t// dispose any old listener we had\n\t\tdispose(this.editorOpeningListener);\n\n\t\t// install editor opening listener unless user has disabled this\n\t\tif (!!this.configurationService.getValue(USE_SPLIT_JSON_SETTING) || !!this.configurationService.getValue(DEFAULT_SETTINGS_EDITOR_SETTING)) {\n\t\t\tthis.editorOpeningListener = this.editorResolverService.registerEditor(\n\t\t\t\t'**/settings.json',\n\t\t\t\t{\n\t\t\t\t\tid: SideBySideEditorInput.ID,\n\t\t\t\t\tlabel: nls.localize('splitSettingsEditorLabel', \"Split Settings Editor\"),\n\t\t\t\t\tpriority: RegisteredEditorPriority.builtin,\n\t\t\t\t},\n\t\t\t\t{},\n\t\t\t\t{\n\t\t\t\t\tcreateEditorInput: ({ resource, options }): EditorInputWithOptions => {\n\t\t\t\t\t\t// Global User Settings File\n\t\t\t\t\t\tif (isEqual(resource, this.userDataProfileService.currentProfile.settingsResource)) {\n\t\t\t\t\t\t\treturn { editor: this.preferencesService.createSplitJsonEditorInput(ConfigurationTarget.USER_LOCAL, resource), options };\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Single Folder Workspace Settings File\n\t\t\t\t\t\tconst state = this.workspaceService.getWorkbenchState();\n\t\t\t\t\t\tif (state === WorkbenchState.FOLDER) {\n\t\t\t\t\t\t\tconst folders = this.workspaceService.getWorkspace().folders;\n\t\t\t\t\t\t\tif (isEqual(resource, folders[0].toResource(FOLDER_SETTINGS_PATH))) {\n\t\t\t\t\t\t\t\treturn { editor: this.preferencesService.createSplitJsonEditorInput(ConfigurationTarget.WORKSPACE, resource), options };\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Multi Folder Workspace Settings File\n\t\t\t\t\t\telse if (state === WorkbenchState.WORKSPACE) {\n\t\t\t\t\t\t\tconst folders = this.workspaceService.getWorkspace().folders;\n\t\t\t\t\t\t\tfor (const folder of folders) {\n\t\t\t\t\t\t\t\tif (isEqual(resource, folder.toResource(FOLDER_SETTINGS_PATH))) {\n\t\t\t\t\t\t\t\t\treturn { editor: this.preferencesService.createSplitJsonEditorInput(ConfigurationTarget.WORKSPACE_FOLDER, resource), options };\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn { editor: this.textEditorService.createTextEditor({ resource }), options };\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\t}\n\toverride dispose(): void {\n\t\tdispose(this.editorOpeningListener);\n\t\tsuper.dispose();\n\t}\n}\n\n\nconst registry = Registry.as<IConfigurationRegistry>(Extensions.Configuration);\nregistry.registerConfiguration({\n\t...workbenchConfigurationNodeBase,\n\t'properties': {\n\t\t'workbench.settings.enableNaturalLanguageSearch': {\n\t\t\t'type': 'boolean',\n\t\t\t'description': nls.localize('enableNaturalLanguageSettingsSearch', \"Controls whether to enable the natural language search mode for settings. The natural language search is provided by a Microsoft online service.\"),\n\t\t\t'default': true,\n\t\t\t'scope': ConfigurationScope.WINDOW,\n\t\t\t'tags': ['usesOnlineServices']\n\t\t},\n\t\t'workbench.settings.settingsSearchTocBehavior': {\n\t\t\t'type': 'string',\n\t\t\t'enum': ['hide', 'filter'],\n\t\t\t'enumDescriptions': [\n\t\t\t\tnls.localize('settingsSearchTocBehavior.hide', \"Hide the Table of Contents while searching.\"),\n\t\t\t\tnls.localize('settingsSearchTocBehavior.filter', \"Filter the Table of Contents to just categories that have matching settings. Clicking on a category will filter the results to that category.\"),\n\t\t\t],\n\t\t\t'description': nls.localize('settingsSearchTocBehavior', \"Controls the behavior of the Settings editor Table of Contents while searching. If this setting is being changed in the Settings editor, the setting will take effect after the search query is modified.\"),\n\t\t\t'default': 'filter',\n\t\t\t'scope': ConfigurationScope.WINDOW\n\t\t},\n\t}\n});\n"],
  "mappings": "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",
  "names": []
}
