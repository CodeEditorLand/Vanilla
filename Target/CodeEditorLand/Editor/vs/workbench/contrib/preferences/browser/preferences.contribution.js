var D6=Object.defineProperty;var L6=Object.getOwnPropertyDescriptor;var _=(r,e,t,n)=>{for(var i=n>1?void 0:n?L6(e,t):e,o=r.length-1,s;o>=0;o--)(s=r[o])&&(i=(n?s(e,t,i):s(i))||i);return n&&i&&D6(e,t,i),i},y=(r,e)=>(t,n)=>e(t,n,r);var Bv=class{_keyCodeToStr;_strToKeyCode;constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}},QC=new Bv,L0=new Bv,k0=new Bv,M0=new Array(230),k6={},R6=[],M6=Object.create(null),O6=Object.create(null);var b2=[],R0=[];for(let r=0;r<=193;r++)b2[r]=-1;for(let r=0;r<=132;r++)R0[r]=-1;(function(){let r="",e=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",r,r],[1,1,"Hyper",0,r,0,r,r,r],[1,2,"Super",0,r,0,r,r,r],[1,3,"Fn",0,r,0,r,r,r],[1,4,"FnLock",0,r,0,r,r,r],[1,5,"Suspend",0,r,0,r,r,r],[1,6,"Resume",0,r,0,r,r,r],[1,7,"Turbo",0,r,0,r,r,r],[1,8,"Sleep",0,r,0,"VK_SLEEP",r,r],[1,9,"WakeUp",0,r,0,r,r,r],[0,10,"KeyA",31,"A",65,"VK_A",r,r],[0,11,"KeyB",32,"B",66,"VK_B",r,r],[0,12,"KeyC",33,"C",67,"VK_C",r,r],[0,13,"KeyD",34,"D",68,"VK_D",r,r],[0,14,"KeyE",35,"E",69,"VK_E",r,r],[0,15,"KeyF",36,"F",70,"VK_F",r,r],[0,16,"KeyG",37,"G",71,"VK_G",r,r],[0,17,"KeyH",38,"H",72,"VK_H",r,r],[0,18,"KeyI",39,"I",73,"VK_I",r,r],[0,19,"KeyJ",40,"J",74,"VK_J",r,r],[0,20,"KeyK",41,"K",75,"VK_K",r,r],[0,21,"KeyL",42,"L",76,"VK_L",r,r],[0,22,"KeyM",43,"M",77,"VK_M",r,r],[0,23,"KeyN",44,"N",78,"VK_N",r,r],[0,24,"KeyO",45,"O",79,"VK_O",r,r],[0,25,"KeyP",46,"P",80,"VK_P",r,r],[0,26,"KeyQ",47,"Q",81,"VK_Q",r,r],[0,27,"KeyR",48,"R",82,"VK_R",r,r],[0,28,"KeyS",49,"S",83,"VK_S",r,r],[0,29,"KeyT",50,"T",84,"VK_T",r,r],[0,30,"KeyU",51,"U",85,"VK_U",r,r],[0,31,"KeyV",52,"V",86,"VK_V",r,r],[0,32,"KeyW",53,"W",87,"VK_W",r,r],[0,33,"KeyX",54,"X",88,"VK_X",r,r],[0,34,"KeyY",55,"Y",89,"VK_Y",r,r],[0,35,"KeyZ",56,"Z",90,"VK_Z",r,r],[0,36,"Digit1",22,"1",49,"VK_1",r,r],[0,37,"Digit2",23,"2",50,"VK_2",r,r],[0,38,"Digit3",24,"3",51,"VK_3",r,r],[0,39,"Digit4",25,"4",52,"VK_4",r,r],[0,40,"Digit5",26,"5",53,"VK_5",r,r],[0,41,"Digit6",27,"6",54,"VK_6",r,r],[0,42,"Digit7",28,"7",55,"VK_7",r,r],[0,43,"Digit8",29,"8",56,"VK_8",r,r],[0,44,"Digit9",30,"9",57,"VK_9",r,r],[0,45,"Digit0",21,"0",48,"VK_0",r,r],[1,46,"Enter",3,"Enter",13,"VK_RETURN",r,r],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",r,r],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",r,r],[1,49,"Tab",2,"Tab",9,"VK_TAB",r,r],[1,50,"Space",10,"Space",32,"VK_SPACE",r,r],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,r,0,r,r,r],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",r,r],[1,64,"F1",59,"F1",112,"VK_F1",r,r],[1,65,"F2",60,"F2",113,"VK_F2",r,r],[1,66,"F3",61,"F3",114,"VK_F3",r,r],[1,67,"F4",62,"F4",115,"VK_F4",r,r],[1,68,"F5",63,"F5",116,"VK_F5",r,r],[1,69,"F6",64,"F6",117,"VK_F6",r,r],[1,70,"F7",65,"F7",118,"VK_F7",r,r],[1,71,"F8",66,"F8",119,"VK_F8",r,r],[1,72,"F9",67,"F9",120,"VK_F9",r,r],[1,73,"F10",68,"F10",121,"VK_F10",r,r],[1,74,"F11",69,"F11",122,"VK_F11",r,r],[1,75,"F12",70,"F12",123,"VK_F12",r,r],[1,76,"PrintScreen",0,r,0,r,r,r],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",r,r],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",r,r],[1,79,"Insert",19,"Insert",45,"VK_INSERT",r,r],[1,80,"Home",14,"Home",36,"VK_HOME",r,r],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",r,r],[1,82,"Delete",20,"Delete",46,"VK_DELETE",r,r],[1,83,"End",13,"End",35,"VK_END",r,r],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",r,r],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",r],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",r],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",r],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",r],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",r,r],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",r,r],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",r,r],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",r,r],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",r,r],[1,94,"NumpadEnter",3,r,0,r,r,r],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",r,r],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",r,r],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",r,r],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",r,r],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",r,r],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",r,r],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",r,r],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",r,r],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",r,r],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",r,r],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",r,r],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",r,r],[1,107,"ContextMenu",58,"ContextMenu",93,r,r,r],[1,108,"Power",0,r,0,r,r,r],[1,109,"NumpadEqual",0,r,0,r,r,r],[1,110,"F13",71,"F13",124,"VK_F13",r,r],[1,111,"F14",72,"F14",125,"VK_F14",r,r],[1,112,"F15",73,"F15",126,"VK_F15",r,r],[1,113,"F16",74,"F16",127,"VK_F16",r,r],[1,114,"F17",75,"F17",128,"VK_F17",r,r],[1,115,"F18",76,"F18",129,"VK_F18",r,r],[1,116,"F19",77,"F19",130,"VK_F19",r,r],[1,117,"F20",78,"F20",131,"VK_F20",r,r],[1,118,"F21",79,"F21",132,"VK_F21",r,r],[1,119,"F22",80,"F22",133,"VK_F22",r,r],[1,120,"F23",81,"F23",134,"VK_F23",r,r],[1,121,"F24",82,"F24",135,"VK_F24",r,r],[1,122,"Open",0,r,0,r,r,r],[1,123,"Help",0,r,0,r,r,r],[1,124,"Select",0,r,0,r,r,r],[1,125,"Again",0,r,0,r,r,r],[1,126,"Undo",0,r,0,r,r,r],[1,127,"Cut",0,r,0,r,r,r],[1,128,"Copy",0,r,0,r,r,r],[1,129,"Paste",0,r,0,r,r,r],[1,130,"Find",0,r,0,r,r,r],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",r,r],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",r,r],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",r,r],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",r,r],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",r,r],[1,136,"KanaMode",0,r,0,r,r,r],[0,137,"IntlYen",0,r,0,r,r,r],[1,138,"Convert",0,r,0,r,r,r],[1,139,"NonConvert",0,r,0,r,r,r],[1,140,"Lang1",0,r,0,r,r,r],[1,141,"Lang2",0,r,0,r,r,r],[1,142,"Lang3",0,r,0,r,r,r],[1,143,"Lang4",0,r,0,r,r,r],[1,144,"Lang5",0,r,0,r,r,r],[1,145,"Abort",0,r,0,r,r,r],[1,146,"Props",0,r,0,r,r,r],[1,147,"NumpadParenLeft",0,r,0,r,r,r],[1,148,"NumpadParenRight",0,r,0,r,r,r],[1,149,"NumpadBackspace",0,r,0,r,r,r],[1,150,"NumpadMemoryStore",0,r,0,r,r,r],[1,151,"NumpadMemoryRecall",0,r,0,r,r,r],[1,152,"NumpadMemoryClear",0,r,0,r,r,r],[1,153,"NumpadMemoryAdd",0,r,0,r,r,r],[1,154,"NumpadMemorySubtract",0,r,0,r,r,r],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",r,r],[1,156,"NumpadClearEntry",0,r,0,r,r,r],[1,0,r,5,"Ctrl",17,"VK_CONTROL",r,r],[1,0,r,4,"Shift",16,"VK_SHIFT",r,r],[1,0,r,6,"Alt",18,"VK_MENU",r,r],[1,0,r,57,"Meta",91,"VK_COMMAND",r,r],[1,157,"ControlLeft",5,r,0,"VK_LCONTROL",r,r],[1,158,"ShiftLeft",4,r,0,"VK_LSHIFT",r,r],[1,159,"AltLeft",6,r,0,"VK_LMENU",r,r],[1,160,"MetaLeft",57,r,0,"VK_LWIN",r,r],[1,161,"ControlRight",5,r,0,"VK_RCONTROL",r,r],[1,162,"ShiftRight",4,r,0,"VK_RSHIFT",r,r],[1,163,"AltRight",6,r,0,"VK_RMENU",r,r],[1,164,"MetaRight",57,r,0,"VK_RWIN",r,r],[1,165,"BrightnessUp",0,r,0,r,r,r],[1,166,"BrightnessDown",0,r,0,r,r,r],[1,167,"MediaPlay",0,r,0,r,r,r],[1,168,"MediaRecord",0,r,0,r,r,r],[1,169,"MediaFastForward",0,r,0,r,r,r],[1,170,"MediaRewind",0,r,0,r,r,r],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",r,r],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",r,r],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",r,r],[1,174,"Eject",0,r,0,r,r,r],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",r,r],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",r,r],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",r,r],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",r,r],[1,179,"LaunchApp1",0,r,0,"VK_MEDIA_LAUNCH_APP1",r,r],[1,180,"SelectTask",0,r,0,r,r,r],[1,181,"LaunchScreenSaver",0,r,0,r,r,r],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",r,r],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",r,r],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",r,r],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",r,r],[1,186,"BrowserStop",0,r,0,"VK_BROWSER_STOP",r,r],[1,187,"BrowserRefresh",0,r,0,"VK_BROWSER_REFRESH",r,r],[1,188,"BrowserFavorites",0,r,0,"VK_BROWSER_FAVORITES",r,r],[1,189,"ZoomToggle",0,r,0,r,r,r],[1,190,"MailReply",0,r,0,r,r,r],[1,191,"MailForward",0,r,0,r,r,r],[1,192,"MailSend",0,r,0,r,r,r],[1,0,r,114,"KeyInComposition",229,r,r,r],[1,0,r,116,"ABNT_C2",194,"VK_ABNT_C2",r,r],[1,0,r,96,"OEM_8",223,"VK_OEM_8",r,r],[1,0,r,0,r,0,"VK_KANA",r,r],[1,0,r,0,r,0,"VK_HANGUL",r,r],[1,0,r,0,r,0,"VK_JUNJA",r,r],[1,0,r,0,r,0,"VK_FINAL",r,r],[1,0,r,0,r,0,"VK_HANJA",r,r],[1,0,r,0,r,0,"VK_KANJI",r,r],[1,0,r,0,r,0,"VK_CONVERT",r,r],[1,0,r,0,r,0,"VK_NONCONVERT",r,r],[1,0,r,0,r,0,"VK_ACCEPT",r,r],[1,0,r,0,r,0,"VK_MODECHANGE",r,r],[1,0,r,0,r,0,"VK_SELECT",r,r],[1,0,r,0,r,0,"VK_PRINT",r,r],[1,0,r,0,r,0,"VK_EXECUTE",r,r],[1,0,r,0,r,0,"VK_SNAPSHOT",r,r],[1,0,r,0,r,0,"VK_HELP",r,r],[1,0,r,0,r,0,"VK_APPS",r,r],[1,0,r,0,r,0,"VK_PROCESSKEY",r,r],[1,0,r,0,r,0,"VK_PACKET",r,r],[1,0,r,0,r,0,"VK_DBE_SBCSCHAR",r,r],[1,0,r,0,r,0,"VK_DBE_DBCSCHAR",r,r],[1,0,r,0,r,0,"VK_ATTN",r,r],[1,0,r,0,r,0,"VK_CRSEL",r,r],[1,0,r,0,r,0,"VK_EXSEL",r,r],[1,0,r,0,r,0,"VK_EREOF",r,r],[1,0,r,0,r,0,"VK_PLAY",r,r],[1,0,r,0,r,0,"VK_ZOOM",r,r],[1,0,r,0,r,0,"VK_NONAME",r,r],[1,0,r,0,r,0,"VK_PA1",r,r],[1,0,r,0,r,0,"VK_OEM_CLEAR",r,r]],t=[],n=[];for(let i of e){let[o,s,a,l,d,c,p,h,g]=i;if(n[s]||(n[s]=!0,R6[s]=a,M6[a]=s,O6[a.toLowerCase()]=s,o&&(b2[s]=l,l!==0&&l!==3&&l!==5&&l!==4&&l!==6&&l!==57&&(R0[l]=s))),!t[l]){if(t[l]=!0,!d)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);QC.define(l,d),L0.define(l,h||d),k0.define(l,g||h||d)}c&&(M0[c]=l),p&&(k6[p]=l)}R0[3]=46})();var Wv;(s=>{function r(a){return QC.keyCodeToStr(a)}s.toString=r;function e(a){return QC.strToKeyCode(a)}s.fromString=e;function t(a){return L0.keyCodeToStr(a)}s.toUserSettingsUS=t;function n(a){return k0.keyCodeToStr(a)}s.toUserSettingsGeneral=n;function i(a){return L0.strToKeyCode(a)||k0.strToKeyCode(a)}s.fromUserSettings=i;function o(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return QC.keyCodeToStr(a)}s.toElectronAccelerator=o})(Wv||={});function Vv(r,e){let t=(e&65535)<<16>>>0;return(r|t)>>>0}function v2(r,e){let t=P6(r,e);if(t!==-1)return r[t]}function P6(r,e,t=r.length-1){for(let n=t;n>=0;n--){let i=r[n];if(e(i))return n}return-1}function O0(r,e){let t=sm(r,e);return t===-1?void 0:r[t]}function sm(r,e,t=0,n=r.length){let i=t,o=n;for(;i<o;){let s=Math.floor((i+o)/2);e(r[s])?i=s+1:o=s}return i-1}function ZC(r,e,t=0,n=r.length){let i=t,o=n;for(;i<o;){let s=Math.floor((i+o)/2);e(r[s])?o=s:i=s+1}return i}function y2(r,e){if(r.length===0)return;let t=r[0];for(let n=1;n<r.length;n++){let i=r[n];e(i,t)>0&&(t=i)}return t}function I2(r,e){if(r.length===0)return;let t=r[0];for(let n=1;n<r.length;n++){let i=r[n];e(i,t)>=0&&(t=i)}return t}function S2(r,e){return y2(r,(t,n)=>-e(t,n))}function C2(r,e){for(let t of r){let n=e(t);if(n!==void 0)return n}}var P0=class{unexpectedErrorHandler;listeners;constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?$d.isErrorNoTelemetry(e)?new $d(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},N0=new P0;function am(r){N0.onUnexpectedError(r)}function Be(r){qd(r)||N0.onUnexpectedError(r)}function wl(r){qd(r)||N0.onUnexpectedExternalError(r)}var A0="Canceled";function qd(r){return r instanceof Ro?!0:r instanceof Error&&r.name===A0&&r.message===A0}var Ro=class extends Error{constructor(){super(A0),this.name=this.message}};function Kp(r){return r?new Error(`Illegal argument: ${r}`):new Error("Illegal argument")}function x2(r){return r?new Error(`Illegal state: ${r}`):new Error("Illegal state")}var zp=class extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}};var $d=class r extends Error{name;constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof r)return e;let t=new r;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},st=class r extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,r.prototype)}};function _a(r,e){let t=this,n=!1,i;return function(){if(n)return i;if(n=!0,e)try{i=r.apply(t,arguments)}finally{e()}else i=r.apply(t,arguments);return i}}var Gn=class r{static Undefined=new r(void 0);element;next;prev;constructor(e){this.element=e,this.next=r.Undefined,this.prev=r.Undefined}},mi=class{_first=Gn.Undefined;_last=Gn.Undefined;_size=0;get size(){return this._size}isEmpty(){return this._first===Gn.Undefined}clear(){let e=this._first;for(;e!==Gn.Undefined;){let t=e.next;e.prev=Gn.Undefined,e.next=Gn.Undefined,e=t}this._first=Gn.Undefined,this._last=Gn.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){let n=new Gn(e);if(this._first===Gn.Undefined)this._first=n,this._last=n;else if(t){let o=this._last;this._last=n,n.prev=o,o.next=n}else{let o=this._first;this._first=n,n.next=o,o.prev=n}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(n))}}shift(){if(this._first!==Gn.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Gn.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Gn.Undefined&&e.next!==Gn.Undefined){let t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===Gn.Undefined&&e.next===Gn.Undefined?(this._first=Gn.Undefined,this._last=Gn.Undefined):e.next===Gn.Undefined?(this._last=this._last.prev,this._last.next=Gn.Undefined):e.prev===Gn.Undefined&&(this._first=this._first.next,this._first.prev=Gn.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Gn.Undefined;)yield e.element,e=e.next}};var Yr=(r,e)=>r===e;function B0(r=Yr){return(e,t)=>sn(e,t,r)}function T2(){return(r,e)=>r.equals(e)}function w2(r,e,t){if(t!==void 0){let n=r;return n==null||e===void 0||e===null?e===n:t(n,e)}else{let n=r;return(i,o)=>i==null||o===void 0||o===null?o===i:n(i,o)}}function _2(r){return JSON.stringify(F0(r))}var N6=0,E2=new WeakMap;function F0(r){if(Array.isArray(r))return r.map(F0);if(r&&typeof r=="object")if(Object.getPrototypeOf(r)===Object.prototype){let e=r,t=Object.create(null);for(let n of Object.keys(e).sort())t[n]=F0(e[n]);return t}else{let e=E2.get(r);return e===void 0&&(e=N6++,E2.set(r,e)),e+"----2b76a038c20c4bcc"}return r}var qi=class{constructor(e,t,n){this.owner=e;this.debugNameSource=t;this.referenceFn=n}getDebugName(e){return R2(e,this)}},D2=new Map,W0=new WeakMap;function R2(r,e){let t=W0.get(r);if(t)return t;let n=F6(r,e);if(n){let i=D2.get(n)??0;i++,D2.set(n,i);let o=i===1?n:`${n}#${i}`;return W0.set(r,o),o}}function F6(r,e){let t=W0.get(r);if(t)return t;let n=e.owner?W6(e.owner)+".":"",i,o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(i=o(),i!==void 0)return n+i}else return n+o;let s=e.referenceFn;if(s!==void 0&&(i=JC(s),i!==void 0))return n+i;if(e.owner!==void 0){let a=B6(e.owner,r);if(a!==void 0)return n+a}}function B6(r,e){for(let t in r)if(r[t]===e)return t}var L2=new Map,k2=new WeakMap;function W6(r){let e=k2.get(r);if(e)return e;let t=V6(r),n=L2.get(t)??0;n++,L2.set(t,n);let i=n===1?t:`${t}#${n}`;return k2.set(r,i),i}function V6(r){let e=r.constructor;return e?e.name:"Object"}function JC(r){let e=r.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}function ex(r,e){if(!r)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function Gp(r,e="Unreachable"){throw new Error(e)}function jp(r){if(!r()){debugger;r(),Be(new st("Assertion Failed"))}}function V0(r,e){let t=0;for(;t<r.length-1;){let n=r[t],i=r[t+1];if(!e(n,i))return!1;t++}return!0}function Zr(r){return new tx(new qi(void 0,void 0,r),r,void 0,void 0)}var tx=class{constructor(e,t,n,i){this._debugNameData=e;this._runFn=t;this.createChangeSummary=n;this._handleChange=i;this.changeSummary=this.createChangeSummary?.(),Qr()?.handleAutorunCreated(this),this._runIfNeeded(),$p(this)}state=2;updateCount=0;disposed=!1;dependencies=new Set;dependenciesToBeRemoved=new Set;changeSummary;get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),qp(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;let t=this.disposed;try{if(!t){Qr()?.handleAutorunTriggered(this);let n=this.changeSummary;try{this.changeSummary=this.createChangeSummary?.(),this._runFn(this,n)}catch(i){am(i)}}}finally{t||Qr()?.handleAutorunFinished(this);for(let n of this.dependenciesToBeRemoved)n.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){try{if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3)}finally{this.updateCount--}jp(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e))try{(this._handleChange?this._handleChange({changedObservable:e,change:t,didChange:i=>i===e},this.changeSummary):!0)&&(this.state=2)}catch(n){am(n)}}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);let t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}};(e=>e.Observer=tx)(Zr||={});function _l(r,e){return e!==void 0?new Yp(new qi(r,void 0,e),e,void 0,void 0,void 0,Yr):new Yp(new qi(void 0,void 0,r),r,void 0,void 0,void 0,Yr)}function Da(r,e){return new Yp(new qi(r.owner,r.debugName,r.debugReferenceFn),e,void 0,void 0,r.onLastObserverRemoved,r.equalsFn??Yr)}M2(Da);function H0(r,e){return new Yp(new qi(r.owner,r.debugName,void 0),e,r.createEmptyChangeSummary,r.handleChange,void 0,r.equalityComparer??Yr)}var Yp=class extends Yd{constructor(t,n,i,o,s=void 0,a){super();this._debugNameData=t;this._computeFn=n;this.createChangeSummary=i;this._handleChange=o;this._handleLastObserverRemoved=s;this._equalityComparator=a;this.changeSummary=this.createChangeSummary?.(),Qr()?.handleDerivedCreated(this)}state=0;value=void 0;updateCount=0;dependencies=new Set;dependenciesToBeRemoved=new Set;changeSummary=void 0;get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this.state=0,this.value=void 0;for(let t of this.dependencies)t.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this.observers.size===0){let t=this._computeFn(this,this.createChangeSummary?.());return this.onLastObserverRemoved(),t}else{do{if(this.state===1){for(let t of this.dependencies)if(t.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;let t=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=t;let n=this.state!==0,i=this.value;this.state=3;let o=!1;try{let s=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this.value=this._computeFn(this,s)}finally{for(let a of this.dependenciesToBeRemoved)a.removeObserver(this);this.dependenciesToBeRemoved.clear()}o=n&&!this._equalityComparator(i,this.value),Qr()?.handleDerivedRecomputed(this,{oldValue:i,newValue:this.value,change:void 0,didChange:o,hadValue:n})}catch(s){am(s)}if(o)for(let s of this.observers)s.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(t){this.updateCount++;let n=this.updateCount===1;if(this.state===3&&(this.state=1,!n))for(let i of this.observers)i.handlePossibleChange(this);if(n)for(let i of this.observers)i.beginUpdate(this)}endUpdate(t){if(this.updateCount--,this.updateCount===0){let n=[...this.observers];for(let i of n)i.endUpdate(this)}jp(()=>this.updateCount>=0)}handlePossibleChange(t){if(this.state===3&&this.dependencies.has(t)&&!this.dependenciesToBeRemoved.has(t)){this.state=1;for(let n of this.observers)n.handlePossibleChange(this)}}handleChange(t,n){if(this.dependencies.has(t)&&!this.dependenciesToBeRemoved.has(t)){let i=!1;try{i=this._handleChange?this._handleChange({changedObservable:t,change:n,didChange:s=>s===t},this.changeSummary):!0}catch(s){am(s)}let o=this.state===3;if(i&&(this.state===1||o)&&(this.state=2,o))for(let s of this.observers)s.handlePossibleChange(this)}}readObservable(t){t.addObserver(this);let n=t.get();return this.dependencies.add(t),this.dependenciesToBeRemoved.delete(t),n}addObserver(t){let n=!this.observers.has(t)&&this.updateCount>0;super.addObserver(t),n&&t.beginUpdate(this)}removeObserver(t){let n=this.observers.has(t)&&this.updateCount>0;super.removeObserver(t),n&&t.endUpdate(this)}};function Hv(r){return new U0(r)}var U0=class extends Uv{constructor(t){super();this.value=t}get debugName(){return this.toString()}get(){return this.value}addObserver(t){}removeObserver(t){}toString(){return`Const: ${this.value}`}};function Xp(...r){let e,t,n;return r.length===3?[e,t,n]=r:[t,n]=r,new Dl(new qi(e,void 0,n),t,n,()=>Dl.globalTransaction,Yr)}function O2(r,e,t){return new Dl(new qi(r.owner,r.debugName,r.debugReferenceFn??t),e,t,()=>Dl.globalTransaction,r.equalsFn??Yr)}var Dl=class extends Yd{constructor(t,n,i,o,s){super();this._debugNameData=t;this.event=n;this._getValue=i;this._getTransaction=o;this._equalityComparator=s}static globalTransaction;value;hasValue=!1;subscription;getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let t=this.getDebugName();return"From Event"+(t?`: ${t}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}handleEvent=t=>{let n=this._getValue(t),i=this.value,o=!this.hasValue||!this._equalityComparator(i,n),s=!1;o&&(this.value=n,this.hasValue&&(s=!0,lm(this._getTransaction(),a=>{Qr()?.handleFromEventObservableTriggered(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue});for(let l of this.observers)a.updateObserver(l,this),l.handleChange(this,void 0)},()=>{let a=this.getDebugName();return"Event fired"+(a?`: ${a}`:"")})),this.hasValue=!0),s||Qr()?.handleFromEventObservableTriggered(this,{oldValue:i,newValue:n,change:void 0,didChange:o,hadValue:this.hasValue})};onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};(t=>{t.Observer=Dl;function e(n,i){let o=!1;Dl.globalTransaction===void 0&&(Dl.globalTransaction=n,o=!0);try{i()}finally{o&&(Dl.globalTransaction=void 0)}}t.batchEventsGlobally=e})(Xp||={});function K0(r){return typeof r=="string"?new nx(r):new nx(void 0,r)}var nx=class extends Yd{constructor(t,n){super();this._debugName=t;this._owner=n}get debugName(){return new qi(this._owner,this._debugName,void 0).getDebugName(this)??"Observable Signal"}toString(){return this.debugName}trigger(t,n){if(!t){Xd(i=>{this.trigger(i,n)},()=>`Trigger signal ${this.debugName}`);return}for(let i of this.observers)t.updateObserver(i,this),i.handleChange(this,n)}get(){}};function P2(r){let e=new ix(!1,void 0);return r.addObserver(e),me(()=>{r.removeObserver(e)})}N2(P2);function rx(r,e){let t=new ix(!0,e);return r.addObserver(t),e?e(r.get()):r.reportChanges(),me(()=>{r.removeObserver(t)})}A2(rx);var ix=class{constructor(e,t){this._forceRecompute=e;this._handleValue=t}_counter=0;beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}};var ox=class{constructor(e){this.observable=e}get onDidChange(){return z.fromObservableLight(this.observable)}get value(){return this.observable.get()}};var F2;function B2(r){F2=r}function Qr(){return F2}var sx=class{indentation=0;textToConsoleArgs(e){return z6([cm(j6("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[cm(" "),La(Kv(e.oldValue,70),{color:"red",strikeThrough:!0}),cm(" "),La(Kv(e.newValue,60),{color:"green"})]:[cm(" (unchanged)")]:[cm(" "),La(Kv(e.newValue,60),{color:"green"}),cm(" (initial)")]}handleObservableChanged(e,t){console.log(...this.textToConsoleArgs([zv("observable value changed"),La(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t)]))}changedObservablesSets=new WeakMap;formatChanges(e){if(e.size!==0)return La(" (changed deps: "+[...e].map(t=>t.debugName).join(", ")+")",{color:"gray"})}handleDerivedCreated(e){let t=e.handleChange;this.changedObservablesSets.set(e,new Set),e.handleChange=(n,i)=>(this.changedObservablesSets.get(e).add(n),t.apply(e,[n,i]))}handleDerivedRecomputed(e,t){let n=this.changedObservablesSets.get(e);console.log(...this.textToConsoleArgs([zv("derived recomputed"),La(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),n.clear()}handleFromEventObservableTriggered(e,t){console.log(...this.textToConsoleArgs([zv("observable from event triggered"),La(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){let t=e.handleChange;this.changedObservablesSets.set(e,new Set),e.handleChange=(n,i)=>(this.changedObservablesSets.get(e).add(n),t.apply(e,[n,i]))}handleAutorunTriggered(e){let t=this.changedObservablesSets.get(e);console.log(...this.textToConsoleArgs([zv("autorun"),La(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.indentation++}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let t=e.getDebugName();t===void 0&&(t=""),console.log(...this.textToConsoleArgs([zv("transaction"),La(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function z6(r){let e=new Array,t=[],n="";function i(s){if("length"in s)for(let a of s)a&&i(a);else"text"in s?(n+=`%c${s.text}`,e.push(s.style),s.data&&t.push(...s.data)):"data"in s&&t.push(...s.data)}i(r);let o=[n,...e];return o.push(...t),o}function cm(r){return La(r,{color:"black"})}function zv(r){return La($6(`${r}: `,10),{color:"black",bold:!0})}function La(r,e={color:"black"}){function t(i){return Object.entries(i).reduce((o,[s,a])=>`${o}${s}:${a};`,"")}let n={color:e.color};return e.strikeThrough&&(n["text-decoration"]="line-through"),e.bold&&(n["font-weight"]="bold"),{text:r,style:t(n)}}function Kv(r,e){switch(typeof r){case"number":return""+r;case"string":return r.length+2<=e?`"${r}"`:`"${r.substr(0,e-7)}"+...`;case"boolean":return r?"true":"false";case"undefined":return"undefined";case"object":return r===null?"null":Array.isArray(r)?K6(r,e):G6(r,e);case"symbol":return r.toString();case"function":return`[[Function${r.name?" "+r.name:""}]]`;default:return""+r}}function K6(r,e){let t="[ ",n=!0;for(let i of r){if(n||(t+=", "),t.length-5>e){t+="...";break}n=!1,t+=`${Kv(i,e-t.length)}`}return t+=" ]",t}function G6(r,e){let t="{ ",n=!0;for(let[i,o]of Object.entries(r)){if(n||(t+=", "),t.length-5>e){t+="...";break}n=!1,t+=`${i}: ${Kv(o,e-t.length)}`}return t+=" }",t}function j6(r,e){let t="";for(let n=1;n<=e;n++)t+=r;return t}function $6(r,e){for(;r.length<e;)r+=" ";return r}var W2;function A2(r){W2=r}var V2;function N2(r){V2=r}var G0;function M2(r){G0=r}var Uv=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){let n=t===void 0?void 0:e,i=t===void 0?e:t;return G0({owner:n,debugName:()=>{let o=JC(i);if(o!==void 0)return o;let a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(a)return`${this.debugName}.${a[2]}`;if(!n)return`${this.debugName} (mapped)`},debugReferenceFn:i},o=>i(this.read(o),o))}flatten(){return G0({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(W2(this,t)),this}keepObserved(e){return e.add(V2(this)),this}get debugValue(){return this.get()}},Yd=class extends Uv{observers=new Set;addObserver(e){let t=this.observers.size;this.observers.add(e),t===0&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}};function Xd(r,e){let t=new Gv(r,e);try{r(t)}finally{t.finish()}}function lm(r,e,t){r?e(r):Xd(e,t)}var Gv=class{constructor(e,t){this._fn=e;this._getDebugName=t;Qr()?.handleBeginTransaction(this)}updatingObservers=[];getDebugName(){return this._getDebugName?this._getDebugName():JC(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){let e=this.updatingObservers;for(let t=0;t<e.length;t++){let{observer:n,observable:i}=e[t];n.endUpdate(i)}this.updatingObservers=null,Qr()?.handleEndTransaction()}};function dm(r,e){let t;return typeof r=="string"?t=new qi(void 0,r,void 0):t=new qi(r,void 0,void 0),new jv(t,e,Yr)}var jv=class extends Yd{constructor(t,n,i){super();this._debugNameData=t;this._equalityComparator=i;this._value=n}_value;get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}get(){return this._value}set(t,n,i){if(i===void 0&&this._equalityComparator(this._value,t))return;let o;n||(n=o=new Gv(()=>{},()=>`Setting ${this.debugName}`));try{let s=this._value;this._setValue(t),Qr()?.handleObservableChanged(this,{oldValue:s,newValue:t,change:i,didChange:!0,hadValue:!0});for(let a of this.observers)n.updateObserver(a,this),a.handleChange(this,i)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(t){this._value=t}};function ax(r,e){let t;return typeof r=="string"?t=new qi(void 0,r,void 0):t=new qi(r,void 0,void 0),new j0(t,e,Yr)}var j0=class extends jv{_setValue(e){this._value!==e&&(this._value&&this._value.dispose(),this._value=e)}dispose(){this._value?.dispose()}};var q6=!1;q6&&B2(new sx);var Y6=globalThis.performance&&typeof globalThis.performance.now=="function",Vo=class r{_startTime;_stopTime;_now;static create(e){return new r(e)}constructor(e){this._now=Y6&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var lx=Symbol("MicrotaskDelay");var X6=!1,H2=!1,Q6=!1,z;(De=>{De.None=()=>N.None;function e(ce){if(Q6){let{onDidAddListener:se}=ce,fe=$v.create(),ue=0;ce.onDidAddListener=()=>{++ue===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),fe.print()),se?.()}}}function t(ce,se){return g(ce,()=>{},0,void 0,!0,void 0,se)}De.defer=t;function n(ce){return(se,fe=null,ue)=>{let ae=!1,ke;return ke=ce(Re=>{if(!ae)return ke?ke.dispose():ae=!0,se.call(fe,Re)},null,ue),ae&&ke.dispose(),ke}}De.once=n;function i(ce,se){return De.once(De.filter(ce,se))}De.onceIf=i;function o(ce,se,fe){return p((ue,ae=null,ke)=>ce(Re=>ue.call(ae,se(Re)),null,ke),fe)}De.map=o;function s(ce,se,fe){return p((ue,ae=null,ke)=>ce(Re=>{se(Re),ue.call(ae,Re)},null,ke),fe)}De.forEach=s;function a(ce,se,fe){return p((ue,ae=null,ke)=>ce(Re=>se(Re)&&ue.call(ae,Re),null,ke),fe)}De.filter=a;function l(ce){return ce}De.signal=l;function d(...ce){return(se,fe=null,ue)=>{let ae=Li(...ce.map(ke=>ke(Re=>se.call(fe,Re))));return h(ae,ue)}}De.any=d;function c(ce,se,fe,ue){let ae=fe;return o(ce,ke=>(ae=se(ae,ke),ae),ue)}De.reduce=c;function p(ce,se){let fe,ue={onWillAddFirstListener(){fe=ce(ae.fire,ae)},onDidRemoveLastListener(){fe?.dispose()}};se||e(ue);let ae=new T(ue);return se?.add(ae),ae.event}function h(ce,se){return se instanceof Array?se.push(ce):se&&se.add(ce),ce}function g(ce,se,fe=100,ue=!1,ae=!1,ke,Re){let wt,ht,Ue,co=0,_i,kr={leakWarningThreshold:ke,onWillAddFirstListener(){wt=ce(Qc=>{co++,ht=se(ht,Qc),ue&&!Ue&&(qr.fire(ht),ht=void 0),_i=()=>{let Do=ht;ht=void 0,Ue=void 0,(!ue||co>1)&&qr.fire(Do),co=0},typeof fe=="number"?(clearTimeout(Ue),Ue=setTimeout(_i,fe)):Ue===void 0&&(Ue=0,queueMicrotask(_i))})},onWillRemoveListener(){ae&&co>0&&_i?.()},onDidRemoveLastListener(){_i=void 0,wt.dispose()}};Re||e(kr);let qr=new T(kr);return Re?.add(qr),qr.event}De.debounce=g;function f(ce,se=0,fe){return De.debounce(ce,(ue,ae)=>ue?(ue.push(ae),ue):[ae],se,void 0,!0,void 0,fe)}De.accumulate=f;function m(ce,se=(ue,ae)=>ue===ae,fe){let ue=!0,ae;return a(ce,ke=>{let Re=ue||!se(ke,ae);return ue=!1,ae=ke,Re},fe)}De.latch=m;function b(ce,se,fe){return[De.filter(ce,se,fe),De.filter(ce,ue=>!se(ue),fe)]}De.split=b;function v(ce,se=!1,fe=[],ue){let ae=fe.slice(),ke=ce(ht=>{ae?ae.push(ht):wt.fire(ht)});ue&&ue.add(ke);let Re=()=>{ae?.forEach(ht=>wt.fire(ht)),ae=null},wt=new T({onWillAddFirstListener(){ke||(ke=ce(ht=>wt.fire(ht)),ue&&ue.add(ke))},onDidAddFirstListener(){ae&&(se?setTimeout(Re):Re())},onDidRemoveLastListener(){ke&&ke.dispose(),ke=null}});return ue&&ue.add(wt),wt.event}De.buffer=v;function S(ce,se){return(ue,ae,ke)=>{let Re=se(new E);return ce(function(wt){let ht=Re.evaluate(wt);ht!==x&&ue.call(ae,ht)},void 0,ke)}}De.chain=S;let x=Symbol("HaltChainable");class E{steps=[];map(se){return this.steps.push(se),this}forEach(se){return this.steps.push(fe=>(se(fe),fe)),this}filter(se){return this.steps.push(fe=>se(fe)?fe:x),this}reduce(se,fe){let ue=fe;return this.steps.push(ae=>(ue=se(ue,ae),ue)),this}latch(se=(fe,ue)=>fe===ue){let fe=!0,ue;return this.steps.push(ae=>{let ke=fe||!se(ae,ue);return fe=!1,ue=ae,ke?ae:x}),this}evaluate(se){for(let fe of this.steps)if(se=fe(se),se===x)break;return se}}function w(ce,se,fe=ue=>ue){let ue=(...wt)=>Re.fire(fe(...wt)),ae=()=>ce.on(se,ue),ke=()=>ce.removeListener(se,ue),Re=new T({onWillAddFirstListener:ae,onDidRemoveLastListener:ke});return Re.event}De.fromNodeEventEmitter=w;function P(ce,se,fe=ue=>ue){let ue=(...wt)=>Re.fire(fe(...wt)),ae=()=>ce.addEventListener(se,ue),ke=()=>ce.removeEventListener(se,ue),Re=new T({onWillAddFirstListener:ae,onDidRemoveLastListener:ke});return Re.event}De.fromDOMEventEmitter=P;function R(ce){return new Promise(se=>n(ce)(se))}De.toPromise=R;function O(ce){let se=new T;return ce.then(fe=>{se.fire(fe)},()=>{se.fire(void 0)}).finally(()=>{se.dispose()}),se.event}De.fromPromise=O;function M(ce,se){return ce(fe=>se.fire(fe))}De.forward=M;function K(ce,se,fe){return se(fe),ce(ue=>se(ue))}De.runAndSubscribe=K;class ${constructor(se,fe){this._observable=se;let ue={onWillAddFirstListener:()=>{se.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{se.removeObserver(this)}};fe||e(ue),this.emitter=new T(ue),fe&&fe.add(this.emitter)}emitter;_counter=0;_hasChanged=!1;beginUpdate(se){this._counter++}handlePossibleChange(se){}handleChange(se,fe){this._hasChanged=!0}endUpdate(se){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function Q(ce,se){return new $(ce,se).emitter.event}De.fromObservable=Q;function he(ce){return(se,fe,ue)=>{let ae=0,ke=!1,Re={beginUpdate(){ae++},endUpdate(){ae--,ae===0&&(ce.reportChanges(),ke&&(ke=!1,se.call(fe)))},handlePossibleChange(){},handleChange(){ke=!0}};ce.addObserver(Re),ce.reportChanges();let wt={dispose(){ce.removeObserver(Re)}};return ue instanceof X?ue.add(wt):Array.isArray(ue)&&ue.push(wt),wt}}De.fromObservableLight=he})(z||={});var $0=class r{static all=new Set;static _idPool=0;name;listenerCount=0;invocationCount=0;elapsedOverall=0;durations=[];_stopWatch;constructor(e){this.name=`${e}_${r._idPool++}`,r.all.add(this)}start(e){this._stopWatch=new Vo,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},U2=-1;var q0=class r{constructor(e,t,n=(r._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e;this.threshold=t;this.name=n}static _idPool=1;_stacks;_warnCountdown=0;dispose(){this._stacks?.clear()}check(e,t){let n=this.threshold;if(n<=0||t<n)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[o,s]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${s}):`;console.warn(a),console.warn(o);let l=new Y0(a,o);this._errorHandler(l)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(let[n,i]of this._stacks)(!e||t<i)&&(e=[n,i],t=i);return e}},$v=class r{constructor(e){this.value=e}static create(){let e=new Error;return new r(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},Y0=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},X0=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},Z6=0,um=class{constructor(e){this.value=e}stack;id=Z6++},J6=2,z2=(r,e)=>{if(r instanceof um)e(r);else for(let t=0;t<r.length;t++){let n=r[t];n&&e(n)}},dx;if(X6){let r=[];setInterval(()=>{r.length!==0&&(console.warn("[LEAKING LISTENERS] GC'ed these listeners that were NOT yet disposed:"),console.warn(r.join(`
`)),r.length=0)},3e3),dx=new FinalizationRegistry(e=>{typeof e=="string"&&r.push(e)})}var T=class{_options;_leakageMon;_perfMon;_disposed;_event;_listeners;_deliveryQueue;_size=0;constructor(e){this._options=e,this._leakageMon=U2>0||this._options?.leakWarningThreshold?new q0(e?.onListenerError??Be,this._options?.leakWarningThreshold??U2):void 0,this._perfMon=this._options?._profName?new $0(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(H2){let e=this._listeners;queueMicrotask(()=>{z2(e,t=>t.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,t,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let l=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(l);let d=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],c=new X0(`${l}. HINT: Stack shows most frequent listener (${d[1]}-times)`,d[0]);return(this._options?.onListenerError||Be)(c),N.None}if(this._disposed)return N.None;t&&(e=e.bind(t));let i=new um(e),o,s;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=$v.create(),o=this._leakageMon.check(i.stack,this._size+1)),H2&&(i.stack=s??$v.create()),this._listeners?this._listeners instanceof um?(this._deliveryQueue??=new cx,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._size++;let a=me(()=>{dx?.unregister(a),o?.(),this._removeListener(i)});if(n instanceof X?n.add(a):Array.isArray(n)&&n.push(a),dx){let l=new Error().stack.split(`
`).slice(2,3).join(`
`).trim(),d=/(file:|vscode-file:\/\/vscode-app)?(\/[^:]*:\d+:\d+)/.exec(l);dx.register(a,d?.[2]??l,a)}return a},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let t=this._listeners,n=t.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,t[n]=void 0;let i=this._deliveryQueue.current===this;if(this._size*J6<=t.length){let o=0;for(let s=0;s<t.length;s++)t[s]?t[o++]=t[s]:i&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=o}}_deliver(e,t){if(!e)return;let n=this._options?.onListenerError||Be;if(!n){e.value(t);return}try{e.value(t)}catch(i){n(i)}}_deliverQueue(e){let t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof um)this._deliver(this._listeners,e);else{let t=this._deliveryQueue;t.enqueue(this,e,this._listeners.length),this._deliverQueue(t)}this._perfMon?.stop()}hasListeners(){return this._size>0}},K2=()=>new cx,cx=class{i=-1;end=0;current;value;enqueue(e,t,n){this.i=0,this.end=n,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},pm=class extends T{_asyncDeliveryQueue;async fireAsync(e,t,n){if(this._listeners)for(this._asyncDeliveryQueue||(this._asyncDeliveryQueue=new mi),z2(this._listeners,i=>this._asyncDeliveryQueue.push([i.value,e]));this._asyncDeliveryQueue.size>0&&!t.isCancellationRequested;){let[i,o]=this._asyncDeliveryQueue.shift(),s=[],a={...o,token:t,waitUntil:l=>{if(Object.isFrozen(s))throw new Error("waitUntil can NOT be called asynchronous");n&&(l=n(l,i)),s.push(l)}};try{i(a)}catch(l){Be(l);continue}Object.freeze(s),await Promise.allSettled(s).then(l=>{for(let d of l)d.status==="rejected"&&Be(d.reason)})}}},Qd=class extends T{_isPaused=0;_eventQueue=new mi;_mergeFn;get isPaused(){return this._isPaused!==0}constructor(e){super(e),this._mergeFn=e?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){let e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}};var ux=class extends T{_queuedEvents=[];_mergeFn;constructor(e){super(e),this._mergeFn=e?.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}},qv=class{emitter;hasListeners=!1;events=[];constructor(){this.emitter=new T({onWillAddFirstListener:()=>this.onFirstListenerAdd(),onDidRemoveLastListener:()=>this.onLastListenerRemove()})}get event(){return this.emitter.event}add(e){let t={event:e,listener:null};return this.events.push(t),this.hasListeners&&this.hook(t),me(_a(()=>{this.hasListeners&&this.unhook(t);let i=this.events.indexOf(t);this.events.splice(i,1)}))}onFirstListenerAdd(){this.hasListeners=!0,this.events.forEach(e=>this.hook(e))}onLastListenerRemove(){this.hasListeners=!1,this.events.forEach(e=>this.unhook(e))}hook(e){e.listener=e.event(t=>this.emitter.fire(t))}unhook(e){e.listener?.dispose(),e.listener=null}dispose(){this.emitter.dispose();for(let e of this.events)e.listener?.dispose();this.events=[]}};var iu=class{data=[];wrapEvent(e,t,n){return(i,o,s)=>e(a=>{let l=this.data[this.data.length-1];if(!t){l?l.buffers.push(()=>i.call(o,a)):i.call(o,a);return}let d=l;if(!d){i.call(o,t(n,a));return}d.items??=[],d.items.push(a),d.buffers.length===0&&l.buffers.push(()=>{d.reducedResult??=n?d.items.reduce(t,n):d.items.reduce(t),i.call(o,d.reducedResult)})},void 0,s)}bufferEvents(e){let t={buffers:new Array};this.data.push(t);let n=e();return this.data.pop(),t.buffers.forEach(i=>i()),n}},Ll=class{listening=!1;inputEvent=z.None;inputEventListener=N.None;emitter=new T({onDidAddFirstListener:()=>{this.listening=!0,this.inputEventListener=this.inputEvent(this.emitter.fire,this.emitter)},onDidRemoveLastListener:()=>{this.listening=!1,this.inputEventListener.dispose()}});event=this.emitter.event;set input(e){this.inputEvent=e,this.listening&&(this.inputEventListener.dispose(),this.inputEventListener=e(this.emitter.fire,this.emitter))}dispose(){this.inputEventListener.dispose(),this.emitter.dispose()}};var G2=Object.freeze(function(r,e){let t=setTimeout(r.bind(e),0);return{dispose(){clearTimeout(t)}}}),Yt;(n=>{function r(i){return i===n.None||i===n.Cancelled||i instanceof hm?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}n.isCancellationToken=r,n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:z.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:G2})})(Yt||={});var hm=class{_isCancelled=!1;_emitter=null;cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?G2:(this._emitter||(this._emitter=new T),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},jn=class{_token=void 0;_parentListener=void 0;constructor(e){this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new hm),this._token}cancel(){this._token?this._token instanceof hm&&this._token.cancel():this._token=Yt.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof hm&&this._token.dispose():this._token=Yt.None}};function Mo(r,e=0){return r[r.length-(1+e)]}function gx(r){if(r.length===0)throw new Error("Invalid tail call");return[r.slice(0,r.length-1),r[r.length-1]]}function sn(r,e,t=(n,i)=>n===i){if(r===e)return!0;if(!r||!e||r.length!==e.length)return!1;for(let n=0,i=r.length;n<i;n++)if(!t(r[n],e[n]))return!1;return!0}function mx(r,e,t){return tG(r.length,n=>t(r[n],e))}function tG(r,e){let t=0,n=r-1;for(;t<=n;){let i=(t+n)/2|0,o=e(i);if(o<0)t=i+1;else if(o>0)n=i-1;else return i}return-(t+1)}function px(r,e,t){if(r=r|0,r>=e.length)throw new TypeError("invalid index");let n=e[Math.floor(e.length*Math.random())],i=[],o=[],s=[];for(let a of e){let l=t(a,n);l<0?i.push(a):l>0?o.push(a):s.push(a)}return r<i.length?px(r,i,t):r<i.length+s.length?s[0]:px(r-(i.length+s.length),o,t)}function Q0(r,e){let t=[],n;for(let i of r.slice(0).sort(e))!n||e(n[0],i)!==0?(n=[i],t.push(n)):n.push(i);return t}function Mr(r){return r.filter(e=>!!e)}function j2(r){return!Array.isArray(r)||r.length===0}function gm(r){return Array.isArray(r)&&r.length>0}function ai(r,e=t=>t){let t=new Set;return r.filter(n=>{let i=e(n);return t.has(i)?!1:(t.add(i),!0)})}function ki(r,e){let t=typeof e=="number"?r:0;typeof e=="number"?t=r:(t=0,e=r);let n=[];if(t<=e)for(let i=t;i<e;i++)n.push(i);else for(let i=t;i>e;i--)n.push(i);return n}function $2(r,e,t){return r.reduce((n,i)=>(n[e(i)]=t?t(i):i,n),Object.create(null))}function fx(r,e){return r.push(e),()=>nG(r,e)}function nG(r,e){let t=r.indexOf(e);if(t>-1)return r.splice(t,1),e}function kl(r,e,t){let n=r.slice(0,e),i=r.slice(e);return n.concat(t,i)}function Z0(r,e){let t;if(typeof e=="number"){let n=e;t=()=>{let i=Math.sin(n++)*179426549;return i-Math.floor(i)}}else t=Math.random;for(let n=r.length-1;n>0;n-=1){let i=Math.floor(t()*(n+1)),o=r[n];r[n]=r[i],r[i]=o}}function bx(r,e){let t=r.indexOf(e);t>-1&&(r.splice(t,1),r.unshift(e))}function Yv(r,e){let t=r.indexOf(e);t>-1&&(r.splice(t,1),r.push(e))}function J0(r,e){for(let t of e)r.push(t)}function e1(r,e,t){let n=q2(r,e),i=r.length,o=t.length;r.length=i+o;for(let s=i-1;s>=n;s--)r[s+o]=r[s];for(let s=0;s<o;s++)r[s+n]=t[s]}function t1(r,e,t,n){let i=q2(r,e),o=r.splice(i,t);return o===void 0&&(o=[]),e1(r,i,n),o}function q2(r,e){return e<0?Math.max(e+r.length,0):Math.min(e,r.length)}var Y2;(a=>{function r(l){return l<0}a.isLessThan=r;function e(l){return l<=0}a.isLessThanOrEqual=e;function t(l){return l>0}a.isGreaterThan=t;function n(l){return l===0}a.isNeitherLessOrGreaterThan=n,a.greaterThan=1,a.lessThan=-1,a.neitherLessOrGreaterThan=0})(Y2||={});function Rl(r,e){return(t,n)=>e(r(t),r(n))}var Rr=class{constructor(e){this.items=e}firstIdx=0;lastIdx=this.items.length-1;get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;let n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;let n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}},Zd=class r{constructor(e){this.iterate=e}static empty=new r(e=>{});forEach(e){this.iterate(t=>(e(t),!0))}toArray(){let e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new r(t=>this.iterate(n=>e(n)?t(n):!0))}map(e){return new r(t=>this.iterate(n=>t(e(n))))}some(e){let t=!1;return this.iterate(n=>(t=e(n),!t)),t}findFirst(e){let t;return this.iterate(n=>e(n)?(t=n,!1):!0),t}findLast(e){let t;return this.iterate(n=>(e(n)&&(t=n),!0)),t}findLastMaxBy(e){let t,n=!0;return this.iterate(i=>((n||Y2.isGreaterThan(e(i,t)))&&(n=!1,t=i),!0)),t}},hx=class r{constructor(e){this._indexMap=e}static createSortPermutation(e,t){let n=Array.from(e.keys()).sort((i,o)=>t(e[i],e[o]));return new r(n)}apply(e){return e.map((t,n)=>e[this._indexMap[n]])}inverse(){let e=this._indexMap.slice();for(let t=0;t<this._indexMap.length;t++)e[this._indexMap[t]]=t;return new r(e)}};function n1(){return globalThis._VSCODE_NLS_MESSAGES}function Xv(){return globalThis._VSCODE_NLS_LANGUAGE}var iG=Xv()==="pseudo"||typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function vx(r,e){let t;return e.length===0?t=r:t=r.replace(/\{(\d+)\}/g,(n,i)=>{let o=i[0],s=e[o],a=n;return typeof s=="string"?a=s:(typeof s=="number"||typeof s=="boolean"||s===void 0||s===null)&&(a=String(s)),a}),iG&&(t="\uFF3B"+t.replace(/[aouei]/g,"$&$&")+"\uFF3D"),t}function u(r,e,...t){return vx(typeof r=="number"?X2(r,e):e,t)}function X2(r,e){let t=n1()?.[r];if(typeof t!="string"){if(typeof e=="string")return e;throw new Error(`!!! NLS MISSING: ${r} !!!`)}return t}function gt(r,e,...t){let n;typeof r=="number"?n=X2(r,e):n=e;let i=vx(n,t);return{value:i,original:e===n?i:vx(e,t)}}var mm="en",Jv=!1,ey=!1,Zv=!1,oG=!1,eH=!1,i1=!1,rG=!1,o1=!1,sG=!1,tH=!1,Qv,yx=mm,Q2=mm,aG,Jd,ec=globalThis,_s;typeof ec.vscode<"u"&&typeof ec.vscode.process<"u"?_s=ec.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(_s=process);var nH=typeof _s?.versions?.electron=="string",lG=nH&&_s?.type==="renderer";if(typeof _s=="object"){Jv=_s.platform==="win32",ey=_s.platform==="darwin",Zv=_s.platform==="linux",oG=Zv&&!!_s.env.SNAP&&!!_s.env.SNAP_REVISION,rG=nH,sG=!!_s.env.CI||!!_s.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Qv=mm,yx=mm;let r=_s.env.VSCODE_NLS_CONFIG;if(r)try{let e=JSON.parse(r);Qv=e.userLocale,Q2=e.osLocale,yx=e.resolvedLanguage||mm,aG=e.languagePack?.translationsConfigFile}catch{}eH=!0}else typeof navigator=="object"&&!lG?(Jd=navigator.userAgent,Jv=Jd.indexOf("Windows")>=0,ey=Jd.indexOf("Macintosh")>=0,o1=(Jd.indexOf("Macintosh")>=0||Jd.indexOf("iPad")>=0||Jd.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Zv=Jd.indexOf("Linux")>=0,tH=Jd?.indexOf("Mobi")>=0,i1=!0,yx=Xv()||mm,Qv=navigator.language.toLowerCase(),Q2=Qv):console.error("Unable to resolve platform.");function r1(r){switch(r){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}var Ix=0;ey?Ix=1:Jv?Ix=3:Zv&&(Ix=2);var It=Jv,Pe=ey,Xt=Zv;var Ol=eH;var Ri=i1,dG=i1&&typeof ec.importScripts=="function",iH=dG?ec.origin:void 0,li=o1,Sx=tH;var Cx=Ix,Ml=Jd,ka=yx,s1;(n=>{function r(){return ka}n.value=r;function e(){return ka.length===2?ka==="en":ka.length>=3?ka[0]==="e"&&ka[1]==="n"&&ka[2]==="-":!1}n.isDefaultVariant=e;function t(){return ka==="en"}n.isDefault=t})(s1||={});var oH=Qv;var cG=typeof ec.postMessage=="function"&&!ec.importScripts,xx=(()=>{if(cG){let r=[];ec.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,i=r.length;n<i;n++){let o=r[n];if(o.id===t.data.vscodeScheduleAsyncWork){r.splice(n,1),o.callback();return}}});let e=0;return t=>{let n=++e;r.push({id:n,callback:t}),ec.postMessage({vscodeScheduleAsyncWork:n},"*")}}return r=>setTimeout(r)})();var uo=ey||o1?2:Jv?1:3,Z2=!0,J2=!1;function rH(){if(!J2){J2=!0;let r=new Uint8Array(2);r[0]=1,r[1]=2,Z2=new Uint16Array(r.buffer)[0]===513}return Z2}var ty=!!(Ml&&Ml.indexOf("Chrome")>=0),fm=!!(Ml&&Ml.indexOf("Firefox")>=0),Ex=!!(!ty&&Ml&&Ml.indexOf("Safari")>=0),Tx=!!(Ml&&Ml.indexOf("Edg/")>=0),wx=!!(Ml&&Ml.indexOf("Android")>=0);var Qp,a1=globalThis.vscode;if(typeof a1<"u"&&typeof a1.process<"u"){let r=a1.process;Qp={get platform(){return r.platform},get arch(){return r.arch},get env(){return r.env},cwd(){return r.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?Qp={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:Qp={get platform(){return It?"win32":Pe?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var ny=Qp.cwd,tc=Qp.env,l1=Qp.platform,uG=Qp.arch;var hG=65,gG=97,mG=90,fG=122,su=46,Oo=47,Jr=92,ou=58,bG=63,_x=class extends Error{code;constructor(e,t,n){let i;typeof t=="string"&&t.indexOf("not ")===0?(i="must not be",t=t.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",s=`The "${e}" ${o} ${i} of type ${t}`;s+=`. Received type ${typeof n}`,super(s),this.code="ERR_INVALID_ARG_TYPE"}};function vG(r,e){if(r===null||typeof r!="object")throw new _x(e,"Object",r)}function fi(r,e){if(typeof r!="string")throw new _x(e,"string",r)}var es=l1==="win32";function Dt(r){return r===Oo||r===Jr}function d1(r){return r===Oo}function ru(r){return r>=hG&&r<=mG||r>=gG&&r<=fG}function Dx(r,e,t,n){let i="",o=0,s=-1,a=0,l=0;for(let d=0;d<=r.length;++d){if(d<r.length)l=r.charCodeAt(d);else{if(n(l))break;l=Oo}if(n(l)){if(!(s===d-1||a===1))if(a===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==su||i.charCodeAt(i.length-2)!==su){if(i.length>2){let c=i.lastIndexOf(t);c===-1?(i="",o=0):(i=i.slice(0,c),o=i.length-1-i.lastIndexOf(t)),s=d,a=0;continue}else if(i.length!==0){i="",o=0,s=d,a=0;continue}}e&&(i+=i.length>0?`${t}..`:"..",o=2)}else i.length>0?i+=`${t}${r.slice(s+1,d)}`:i=r.slice(s+1,d),o=d-s-1;s=d,a=0}else l===su&&a!==-1?++a:a=-1}return i}function yG(r){return r?`${r[0]==="."?"":"."}${r}`:""}function sH(r,e){vG(e,"pathObject");let t=e.dir||e.root,n=e.base||`${e.name||""}${yG(e.ext)}`;return t?t===e.root?`${t}${n}`:`${t}${r}${n}`:n}var $n={resolve(...r){let e="",t="",n=!1;for(let i=r.length-1;i>=-1;i--){let o;if(i>=0){if(o=r[i],fi(o,`paths[${i}]`),o.length===0)continue}else e.length===0?o=ny():(o=tc[`=${e}`]||ny(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Jr)&&(o=`${e}\\`));let s=o.length,a=0,l="",d=!1,c=o.charCodeAt(0);if(s===1)Dt(c)&&(a=1,d=!0);else if(Dt(c))if(d=!0,Dt(o.charCodeAt(1))){let p=2,h=p;for(;p<s&&!Dt(o.charCodeAt(p));)p++;if(p<s&&p!==h){let g=o.slice(h,p);for(h=p;p<s&&Dt(o.charCodeAt(p));)p++;if(p<s&&p!==h){for(h=p;p<s&&!Dt(o.charCodeAt(p));)p++;(p===s||p!==h)&&(l=`\\\\${g}\\${o.slice(h,p)}`,a=p)}}}else a=1;else ru(c)&&o.charCodeAt(1)===ou&&(l=o.slice(0,2),a=2,s>2&&Dt(o.charCodeAt(2))&&(d=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(t=`${o.slice(a)}\\${t}`,n=d,d&&e.length>0)break}return t=Dx(t,!n,"\\",Dt),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(r){fi(r,"path");let e=r.length;if(e===0)return".";let t=0,n,i=!1,o=r.charCodeAt(0);if(e===1)return d1(o)?"\\":r;if(Dt(o))if(i=!0,Dt(r.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Dt(r.charCodeAt(a));)a++;if(a<e&&a!==l){let d=r.slice(l,a);for(l=a;a<e&&Dt(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Dt(r.charCodeAt(a));)a++;if(a===e)return`\\\\${d}\\${r.slice(l)}\\`;a!==l&&(n=`\\\\${d}\\${r.slice(l,a)}`,t=a)}}}else t=1;else ru(o)&&r.charCodeAt(1)===ou&&(n=r.slice(0,2),t=2,e>2&&Dt(r.charCodeAt(2))&&(i=!0,t=3));let s=t<e?Dx(r.slice(t),!i,"\\",Dt):"";return s.length===0&&!i&&(s="."),s.length>0&&Dt(r.charCodeAt(e-1))&&(s+="\\"),n===void 0?i?`\\${s}`:s:i?`${n}\\${s}`:`${n}${s}`},isAbsolute(r){fi(r,"path");let e=r.length;if(e===0)return!1;let t=r.charCodeAt(0);return Dt(t)||e>2&&ru(t)&&r.charCodeAt(1)===ou&&Dt(r.charCodeAt(2))},join(...r){if(r.length===0)return".";let e,t;for(let o=0;o<r.length;++o){let s=r[o];fi(s,"path"),s.length>0&&(e===void 0?e=t=s:e+=`\\${s}`)}if(e===void 0)return".";let n=!0,i=0;if(typeof t=="string"&&Dt(t.charCodeAt(0))){++i;let o=t.length;o>1&&Dt(t.charCodeAt(1))&&(++i,o>2&&(Dt(t.charCodeAt(2))?++i:n=!1))}if(n){for(;i<e.length&&Dt(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return $n.normalize(e)},relative(r,e){if(fi(r,"from"),fi(e,"to"),r===e)return"";let t=$n.resolve(r),n=$n.resolve(e);if(t===n||(r=t.toLowerCase(),e=n.toLowerCase(),r===e))return"";let i=0;for(;i<r.length&&r.charCodeAt(i)===Jr;)i++;let o=r.length;for(;o-1>i&&r.charCodeAt(o-1)===Jr;)o--;let s=o-i,a=0;for(;a<e.length&&e.charCodeAt(a)===Jr;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===Jr;)l--;let d=l-a,c=s<d?s:d,p=-1,h=0;for(;h<c;h++){let f=r.charCodeAt(i+h);if(f!==e.charCodeAt(a+h))break;f===Jr&&(p=h)}if(h!==c){if(p===-1)return n}else{if(d>c){if(e.charCodeAt(a+h)===Jr)return n.slice(a+h+1);if(h===2)return n.slice(a+h)}s>c&&(r.charCodeAt(i+h)===Jr?p=h:h===2&&(p=3)),p===-1&&(p=0)}let g="";for(h=i+p+1;h<=o;++h)(h===o||r.charCodeAt(h)===Jr)&&(g+=g.length===0?"..":"\\..");return a+=p,g.length>0?`${g}${n.slice(a,l)}`:(n.charCodeAt(a)===Jr&&++a,n.slice(a,l))},toNamespacedPath(r){if(typeof r!="string"||r.length===0)return r;let e=$n.resolve(r);if(e.length<=2)return r;if(e.charCodeAt(0)===Jr){if(e.charCodeAt(1)===Jr){let t=e.charCodeAt(2);if(t!==bG&&t!==su)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(ru(e.charCodeAt(0))&&e.charCodeAt(1)===ou&&e.charCodeAt(2)===Jr)return`\\\\?\\${e}`;return r},dirname(r){fi(r,"path");let e=r.length;if(e===0)return".";let t=-1,n=0,i=r.charCodeAt(0);if(e===1)return Dt(i)?r:".";if(Dt(i)){if(t=n=1,Dt(r.charCodeAt(1))){let a=2,l=a;for(;a<e&&!Dt(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&Dt(r.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!Dt(r.charCodeAt(a));)a++;if(a===e)return r;a!==l&&(t=n=a+1)}}}}else ru(i)&&r.charCodeAt(1)===ou&&(t=e>2&&Dt(r.charCodeAt(2))?3:2,n=t);let o=-1,s=!0;for(let a=e-1;a>=n;--a)if(Dt(r.charCodeAt(a))){if(!s){o=a;break}}else s=!1;if(o===-1){if(t===-1)return".";o=t}return r.slice(0,o)},basename(r,e){e!==void 0&&fi(e,"suffix"),fi(r,"path");let t=0,n=-1,i=!0,o;if(r.length>=2&&ru(r.charCodeAt(0))&&r.charCodeAt(1)===ou&&(t=2),e!==void 0&&e.length>0&&e.length<=r.length){if(e===r)return"";let s=e.length-1,a=-1;for(o=r.length-1;o>=t;--o){let l=r.charCodeAt(o);if(Dt(l)){if(!i){t=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(l===e.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=a))}return t===n?n=a:n===-1&&(n=r.length),r.slice(t,n)}for(o=r.length-1;o>=t;--o)if(Dt(r.charCodeAt(o))){if(!i){t=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":r.slice(t,n)},extname(r){fi(r,"path");let e=0,t=-1,n=0,i=-1,o=!0,s=0;r.length>=2&&r.charCodeAt(1)===ou&&ru(r.charCodeAt(0))&&(e=n=2);for(let a=r.length-1;a>=e;--a){let l=r.charCodeAt(a);if(Dt(l)){if(!o){n=a+1;break}continue}i===-1&&(o=!1,i=a+1),l===su?t===-1?t=a:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||i===-1||s===0||s===1&&t===i-1&&t===n+1?"":r.slice(t,i)},format:sH.bind(null,"\\"),parse(r){fi(r,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;let t=r.length,n=0,i=r.charCodeAt(0);if(t===1)return Dt(i)?(e.root=e.dir=r,e):(e.base=e.name=r,e);if(Dt(i)){if(n=1,Dt(r.charCodeAt(1))){let p=2,h=p;for(;p<t&&!Dt(r.charCodeAt(p));)p++;if(p<t&&p!==h){for(h=p;p<t&&Dt(r.charCodeAt(p));)p++;if(p<t&&p!==h){for(h=p;p<t&&!Dt(r.charCodeAt(p));)p++;p===t?n=p:p!==h&&(n=p+1)}}}}else if(ru(i)&&r.charCodeAt(1)===ou){if(t<=2)return e.root=e.dir=r,e;if(n=2,Dt(r.charCodeAt(2))){if(t===3)return e.root=e.dir=r,e;n=3}}n>0&&(e.root=r.slice(0,n));let o=-1,s=n,a=-1,l=!0,d=r.length-1,c=0;for(;d>=n;--d){if(i=r.charCodeAt(d),Dt(i)){if(!l){s=d+1;break}continue}a===-1&&(l=!1,a=d+1),i===su?o===-1?o=d:c!==1&&(c=1):o!==-1&&(c=-1)}return a!==-1&&(o===-1||c===0||c===1&&o===a-1&&o===s+1?e.base=e.name=r.slice(s,a):(e.name=r.slice(s,o),e.base=r.slice(s,a),e.ext=r.slice(o,a))),s>0&&s!==n?e.dir=r.slice(0,s-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},IG=(()=>{if(es){let r=/\\/g;return()=>{let e=ny().replace(r,"/");return e.slice(e.indexOf("/"))}}return()=>ny()})(),mt={resolve(...r){let e="",t=!1;for(let n=r.length-1;n>=-1&&!t;n--){let i=n>=0?r[n]:IG();fi(i,`paths[${n}]`),i.length!==0&&(e=`${i}/${e}`,t=i.charCodeAt(0)===Oo)}return e=Dx(e,!t,"/",d1),t?`/${e}`:e.length>0?e:"."},normalize(r){if(fi(r,"path"),r.length===0)return".";let e=r.charCodeAt(0)===Oo,t=r.charCodeAt(r.length-1)===Oo;return r=Dx(r,!e,"/",d1),r.length===0?e?"/":t?"./":".":(t&&(r+="/"),e?`/${r}`:r)},isAbsolute(r){return fi(r,"path"),r.length>0&&r.charCodeAt(0)===Oo},join(...r){if(r.length===0)return".";let e;for(let t=0;t<r.length;++t){let n=r[t];fi(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":mt.normalize(e)},relative(r,e){if(fi(r,"from"),fi(e,"to"),r===e||(r=mt.resolve(r),e=mt.resolve(e),r===e))return"";let t=1,n=r.length,i=n-t,o=1,s=e.length-o,a=i<s?i:s,l=-1,d=0;for(;d<a;d++){let p=r.charCodeAt(t+d);if(p!==e.charCodeAt(o+d))break;p===Oo&&(l=d)}if(d===a)if(s>a){if(e.charCodeAt(o+d)===Oo)return e.slice(o+d+1);if(d===0)return e.slice(o+d)}else i>a&&(r.charCodeAt(t+d)===Oo?l=d:d===0&&(l=0));let c="";for(d=t+l+1;d<=n;++d)(d===n||r.charCodeAt(d)===Oo)&&(c+=c.length===0?"..":"/..");return`${c}${e.slice(o+l)}`},toNamespacedPath(r){return r},dirname(r){if(fi(r,"path"),r.length===0)return".";let e=r.charCodeAt(0)===Oo,t=-1,n=!0;for(let i=r.length-1;i>=1;--i)if(r.charCodeAt(i)===Oo){if(!n){t=i;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":r.slice(0,t)},basename(r,e){e!==void 0&&fi(e,"ext"),fi(r,"path");let t=0,n=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=r.length){if(e===r)return"";let s=e.length-1,a=-1;for(o=r.length-1;o>=0;--o){let l=r.charCodeAt(o);if(l===Oo){if(!i){t=o+1;break}}else a===-1&&(i=!1,a=o+1),s>=0&&(l===e.charCodeAt(s)?--s===-1&&(n=o):(s=-1,n=a))}return t===n?n=a:n===-1&&(n=r.length),r.slice(t,n)}for(o=r.length-1;o>=0;--o)if(r.charCodeAt(o)===Oo){if(!i){t=o+1;break}}else n===-1&&(i=!1,n=o+1);return n===-1?"":r.slice(t,n)},extname(r){fi(r,"path");let e=-1,t=0,n=-1,i=!0,o=0;for(let s=r.length-1;s>=0;--s){let a=r.charCodeAt(s);if(a===Oo){if(!i){t=s+1;break}continue}n===-1&&(i=!1,n=s+1),a===su?e===-1?e=s:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||n===-1||o===0||o===1&&e===n-1&&e===t+1?"":r.slice(e,n)},format:sH.bind(null,"/"),parse(r){fi(r,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(r.length===0)return e;let t=r.charCodeAt(0)===Oo,n;t?(e.root="/",n=1):n=0;let i=-1,o=0,s=-1,a=!0,l=r.length-1,d=0;for(;l>=n;--l){let c=r.charCodeAt(l);if(c===Oo){if(!a){o=l+1;break}continue}s===-1&&(a=!1,s=l+1),c===su?i===-1?i=l:d!==1&&(d=1):i!==-1&&(d=-1)}if(s!==-1){let c=o===0&&t?1:o;i===-1||d===0||d===1&&i===s-1&&i===o+1?e.base=e.name=r.slice(c,s):(e.name=r.slice(c,i),e.base=r.slice(c,s),e.ext=r.slice(i,s))}return o>0?e.dir=r.slice(0,o-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};mt.win32=$n.win32=$n;mt.posix=$n.posix=mt;var au=es?$n.normalize:mt.normalize,lu=es?$n.isAbsolute:mt.isAbsolute,ur=es?$n.join:mt.join,bm=es?$n.resolve:mt.resolve,aH=es?$n.relative:mt.relative,du=es?$n.dirname:mt.dirname,Ho=es?$n.basename:mt.basename,Zp=es?$n.extname:mt.extname,qoe=es?$n.format:mt.format,lH=es?$n.parse:mt.parse,Yoe=es?$n.toNamespacedPath:mt.toNamespacedPath,pr=es?$n.sep:mt.sep,Xoe=es?$n.delimiter:mt.delimiter;var CG=/^\w[\w\d+.-]*$/,xG=/^\//,EG=/^\/\//;function TG(r,e){if(!r.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${r.authority}", path: "${r.path}", query: "${r.query}", fragment: "${r.fragment}"}`);if(r.scheme&&!CG.test(r.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(r.path){if(r.authority){if(!xG.test(r.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(EG.test(r.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function wG(r,e){return!r&&!e?"file":r}function _G(r,e){switch(r){case"https":case"http":case"file":e?e[0]!==Ra&&(e=Ra+e):e=Ra;break}return e}var Nn="",Ra="/",DG=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,Z=class r{static isUri(e){return e instanceof r?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,t,n,i,o,s=!1){typeof e=="object"?(this.scheme=e.scheme||Nn,this.authority=e.authority||Nn,this.path=e.path||Nn,this.query=e.query||Nn,this.fragment=e.fragment||Nn):(this.scheme=wG(e,s),this.authority=t||Nn,this.path=_G(this.scheme,n||Nn),this.query=i||Nn,this.fragment=o||Nn,TG(this,s))}get fsPath(){return iy(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:i,query:o,fragment:s}=e;return t===void 0?t=this.scheme:t===null&&(t=Nn),n===void 0?n=this.authority:n===null&&(n=Nn),i===void 0?i=this.path:i===null&&(i=Nn),o===void 0?o=this.query:o===null&&(o=Nn),s===void 0?s=this.fragment:s===null&&(s=Nn),t===this.scheme&&n===this.authority&&i===this.path&&o===this.query&&s===this.fragment?this:new cu(t,n,i,o,s)}static parse(e,t=!1){let n=DG.exec(e);return n?new cu(n[2]||Nn,kx(n[4]||Nn),kx(n[5]||Nn),kx(n[7]||Nn),kx(n[9]||Nn),t):new cu(Nn,Nn,Nn,Nn,Nn)}static file(e){let t=Nn;if(It&&(e=e.replace(/\\/g,Ra)),e[0]===Ra&&e[1]===Ra){let n=e.indexOf(Ra,2);n===-1?(t=e.substring(2),e=Ra):(t=e.substring(2,n),e=e.substring(n)||Ra)}return new cu("file",t,e,Nn,Nn)}static from(e,t){return new cu(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return It&&e.scheme==="file"?n=r.file($n.join(iy(e,!0),...t)).path:n=mt.join(e.path,...t),e.with({path:n})}toString(e=!1){return c1(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof r)return e;{let t=new cu(e);return t._formatted=e.external??null,t._fsPath=e._sep===uH?e.fsPath??null:null,t}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};var uH=It?1:void 0,cu=class extends Z{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=iy(this,!1)),this._fsPath}toString(e=!1){return e?c1(this,!0):(this._formatted||(this._formatted=c1(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=uH),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},pH={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function dH(r,e,t){let n,i=-1;for(let o=0;o<r.length;o++){let s=r.charCodeAt(o);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||s===45||s===46||s===95||s===126||e&&s===47||t&&s===91||t&&s===93||t&&s===58)i!==-1&&(n+=encodeURIComponent(r.substring(i,o)),i=-1),n!==void 0&&(n+=r.charAt(o));else{n===void 0&&(n=r.substr(0,o));let a=pH[s];a!==void 0?(i!==-1&&(n+=encodeURIComponent(r.substring(i,o)),i=-1),n+=a):i===-1&&(i=o)}}return i!==-1&&(n+=encodeURIComponent(r.substring(i))),n!==void 0?n:r}function LG(r){let e;for(let t=0;t<r.length;t++){let n=r.charCodeAt(t);n===35||n===63?(e===void 0&&(e=r.substr(0,t)),e+=pH[n]):e!==void 0&&(e+=r[t])}return e!==void 0?e:r}function iy(r,e){let t;return r.authority&&r.path.length>1&&r.scheme==="file"?t=`//${r.authority}${r.path}`:r.path.charCodeAt(0)===47&&(r.path.charCodeAt(1)>=65&&r.path.charCodeAt(1)<=90||r.path.charCodeAt(1)>=97&&r.path.charCodeAt(1)<=122)&&r.path.charCodeAt(2)===58?e?t=r.path.substr(1):t=r.path[1].toLowerCase()+r.path.substr(2):t=r.path,It&&(t=t.replace(/\//g,"\\")),t}function c1(r,e){let t=e?LG:dH,n="",{scheme:i,authority:o,path:s,query:a,fragment:l}=r;if(i&&(n+=i,n+=":"),(o||i==="file")&&(n+=Ra,n+=Ra),o){let d=o.indexOf("@");if(d!==-1){let c=o.substr(0,d);o=o.substr(d+1),d=c.lastIndexOf(":"),d===-1?n+=t(c,!1,!1):(n+=t(c.substr(0,d),!1,!1),n+=":",n+=t(c.substr(d+1),!1,!0)),n+="@"}o=o.toLowerCase(),d=o.lastIndexOf(":"),d===-1?n+=t(o,!1,!0):(n+=t(o.substr(0,d),!1,!0),n+=o.substr(d))}if(s){if(s.length>=3&&s.charCodeAt(0)===47&&s.charCodeAt(2)===58){let d=s.charCodeAt(1);d>=65&&d<=90&&(s=`/${String.fromCharCode(d+32)}:${s.substr(3)}`)}else if(s.length>=2&&s.charCodeAt(1)===58){let d=s.charCodeAt(0);d>=65&&d<=90&&(s=`${String.fromCharCode(d+32)}:${s.substr(2)}`)}n+=t(s,!0,!1)}return a&&(n+="?",n+=t(a,!1,!1)),l&&(n+="#",n+=e?l:dH(l,!1,!1)),n}function hH(r){try{return decodeURIComponent(r)}catch{return r.length>3?r.substr(0,3)+hH(r.substr(3)):r}}var cH=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function kx(r){return r.match(cH)?r.replace(cH,e=>hH(e)):r}function oy(r,e,t){let n=r.get(e);return n===void 0&&(n=t,r.set(e,n)),n}var u1=class{constructor(e,t){this.uri=e;this.value=t}};function kG(r){return Array.isArray(r)}var bi=class r{static defaultToKey=e=>e.toString();[Symbol.toStringTag]="ResourceMap";map;toKey;constructor(e,t){if(e instanceof r)this.map=new Map(e.map),this.toKey=t??r.defaultToKey;else if(kG(e)){this.map=new Map,this.toKey=t??r.defaultToKey;for(let[n,i]of e)this.set(n,i)}else this.map=new Map,this.toKey=e??r.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new u1(e,t)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(let[n,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[Symbol.iterator](){for(let[,e]of this.map)yield[e.uri,e.value]}},Rx=class{[Symbol.toStringTag]="ResourceSet";_map;constructor(e,t){!e||typeof e=="function"?this._map=new bi(e):(this._map=new bi(t),e.forEach(this.add,this))}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,t){this._map.forEach((n,i)=>e.call(t,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[Symbol.iterator](){return this.keys()}};var p1=class{[Symbol.toStringTag]="LinkedMap";_map;_head;_tail;_size;_state;constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=0){let n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let i=this._map.get(e);if(i)i.value=t,n!==0&&this.touch(i,n);else{switch(i={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._state,i=this._head;for(;i;){if(t?e.bind(t)(i.value,i.key,this):e(i.value,i.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,t=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.key,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,t=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:n.value,done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,t=this._state,n=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let o={value:[n.key,n.value],done:!1};return n=n.next,o}else return{value:void 0,done:!0}}};return i}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._tail,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.previous,n--;this._tail=t,this._size=n,t&&(t.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;let n=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(n.previous=i,i.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;let n=e.next,i=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=i,i.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(let[t,n]of e)this.set(t,n)}},Mx=class extends p1{_limit;_ratio;constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},Po=class extends Mx{constructor(e,t=1){super(e,t)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}},Ox=class extends Mx{constructor(e,t=1){super(e,t)}trim(e){this.trimNew(e)}set(e,t){return this._limit<=this.size&&!this.has(e)&&this.trim(Math.round(this._limit*this._ratio)-1),super.set(e,t),this}};var nc=class{map=new Map;add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){let n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){let n=this.map.get(e);n&&n.forEach(t)}get(e){let t=this.map.get(e);return t||new Set}};var tt;(x=>{function r(E){return E&&typeof E=="object"&&typeof E[Symbol.iterator]=="function"}x.is=r;let e=Object.freeze([]);function t(){return e}x.empty=t;function*n(E){yield E}x.single=n;function i(E){return r(E)?E:n(E)}x.wrap=i;function o(E){return E||e}x.from=o;function*s(E){for(let w=E.length-1;w>=0;w--)yield E[w]}x.reverse=s;function a(E){return!E||E[Symbol.iterator]().next().done===!0}x.isEmpty=a;function l(E){return E[Symbol.iterator]().next().value}x.first=l;function d(E,w){let P=0;for(let R of E)if(w(R,P++))return!0;return!1}x.some=d;function c(E,w){for(let P of E)if(w(P))return P}x.find=c;function*p(E,w){for(let P of E)w(P)&&(yield P)}x.filter=p;function*h(E,w){let P=0;for(let R of E)yield w(R,P++)}x.map=h;function*g(E,w){let P=0;for(let R of E)yield*w(R,P++)}x.flatMap=g;function*f(...E){for(let w of E)yield*w}x.concat=f;function m(E,w,P){let R=P;for(let O of E)R=w(R,O);return R}x.reduce=m;function*b(E,w,P=E.length){for(w<0&&(w+=E.length),P<0?P+=E.length:P>E.length&&(P=E.length);w<P;w++)yield E[w]}x.slice=b;function v(E,w=Number.POSITIVE_INFINITY){let P=[];if(w===0)return[P,E];let R=E[Symbol.iterator]();for(let O=0;O<w;O++){let M=R.next();if(M.done)return[P,x.empty()];P.push(M.value)}return[P,{[Symbol.iterator](){return R}}]}x.consume=v;async function S(E){let w=[];for await(let P of E)w.push(P);return Promise.resolve(w)}x.asyncToArray=S})(tt||={});var MG=!1,Jp=null;function OG(r){Jp=r}if(MG){let r="__is_disposable_tracked__";OG(new class{trackDisposable(e){let t=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[r]||console.log(t)},3e3)}setParent(e,t){if(e&&e!==N.None)try{e[r]=!0}catch{}}markAsDisposed(e){if(e&&e!==N.None)try{e[r]=!0}catch{}}markAsSingleton(e){}})}function $p(r){return Jp?.trackDisposable(r),r}function qp(r){Jp?.markAsDisposed(r)}function ry(r,e){Jp?.setParent(r,e)}function PG(r,e){if(Jp)for(let t of r)Jp.setParent(t,e)}function uu(r){return Jp?.markAsSingleton(r),r}function pu(r){return typeof r=="object"&&r!==null&&typeof r.dispose=="function"&&r.dispose.length===0}function rt(r){if(tt.is(r)){let e=[];for(let t of r)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(r)?[]:r}else if(r)return r.dispose(),r}function Li(...r){let e=me(()=>rt(r));return PG(r,e),e}function me(r){let e=$p({dispose:_a(()=>{qp(e),r()})});return e}var X=class r{static DISABLE_DISPOSED_WARNING=!1;_toDispose=new Set;_isDisposed=!1;constructor(){$p(this)}dispose(){this._isDisposed||(qp(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{rt(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return ry(e,this),this._isDisposed?r.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),ry(e,null))}},N=class{static None=Object.freeze({dispose(){}});_store=new X;constructor(){$p(this),ry(this._store,this)}dispose(){qp(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}},Qt=class{_value;_isDisposed=!1;constructor(){$p(this)}get value(){return this._isDisposed?void 0:this._value}set value(e){this._isDisposed||e===this._value||(this._value?.dispose(),e&&ry(e,this),this._value=e)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,qp(this),this._value?.dispose(),this._value=void 0}clearAndLeak(){let e=this._value;return this._value=void 0,e&&ry(e,null),e}};var ws=class{_store=new Map;_isDisposed=!1;constructor(){$p(this)}dispose(){qp(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{rt(this._store.values())}finally{this._store.clear()}}has(e){return this._store.has(e)}get size(){return this._store.size}get(e){return this._store.get(e)}set(e,t,n=!1){this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),n||this._store.get(e)?.dispose(),this._store.set(e,t)}deleteAndDispose(e){this._store.get(e)?.dispose(),this._store.delete(e)}deleteAndLeak(e){let t=this._store.get(e);return this._store.delete(e),t}keys(){return this._store.keys()}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}};function gH(r){return r}var Px=class{lastCache=void 0;lastArgKey=void 0;_fn;_computeKey;constructor(e,t){typeof e=="function"?(this._fn=e,this._computeKey=gH):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){let t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}},hu=class{_map=new Map;_map2=new Map;get cachedValues(){return this._map}_fn;_computeKey;constructor(e,t){typeof e=="function"?(this._fn=e,this._computeKey=gH):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){let t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);let n=this._fn(e);return this._map.set(e,n),this._map2.set(t,n),n}};var Mi=class{constructor(e){this.executor=e}_didRun=!1;_value;_error;get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};function eh(r){return r<0?0:r>255?255:r|0}function Pl(r){return!r||typeof r!="string"?!0:r.trim().length===0}var AG=/{(\d+)}/g;function sy(r,...e){return e.length===0?r:r.replace(AG,function(t,n){let i=parseInt(n,10);return isNaN(i)||i<0||i>=e.length?t:e[i]})}function fH(r){return r.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}function rh(r){return r.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function vi(r){return r.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function Nx(r,e){if(!r||!e)return r;let t=e.length;if(t===0||r.length===0)return r;let n=0;for(;r.indexOf(e,n)===n;)n=n+t;return r.substring(n)}function Fx(r,e,t={}){if(!r)throw new Error("Cannot create regex from empty string");e||(r=vi(r)),t.wholeWord&&(/\B/.test(r.charAt(0))||(r="\\b"+r),/\B/.test(r.charAt(r.length-1))||(r=r+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(r,n)}function bH(r){return r.source==="^"||r.source==="^$"||r.source==="$"||r.source==="^\\s*$"?!1:!!(r.exec("")&&r.lastIndex===0)}function Ma(r){return r.split(/\r\n|\r|\n/)}function vH(r){let e=[],t=r.split(/(\r\n|\r|\n)/);for(let n=0;n<Math.ceil(t.length/2);n++)e.push(t[2*n]+(t[2*n+1]??""));return e}function kn(r){for(let e=0,t=r.length;e<t;e++){let n=r.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function an(r,e=0,t=r.length){for(let n=e;n<t;n++){let i=r.charCodeAt(n);if(i!==32&&i!==9)return r.substring(e,n)}return r.substring(e,t)}function Ds(r,e=r.length-1){for(let t=e;t>=0;t--){let n=r.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}function sh(r,e){return r<e?-1:r>e?1:0}function vm(r,e,t=0,n=r.length,i=0,o=e.length){for(;t<n&&i<o;t++,i++){let l=r.charCodeAt(t),d=e.charCodeAt(i);if(l<d)return-1;if(l>d)return 1}let s=n-t,a=o-i;return s<a?-1:s>a?1:0}function ts(r,e){return ym(r,e,0,r.length,0,e.length)}function ym(r,e,t=0,n=r.length,i=0,o=e.length){for(;t<n&&i<o;t++,i++){let l=r.charCodeAt(t),d=e.charCodeAt(i);if(l===d)continue;if(l>=128||d>=128)return vm(r.toLowerCase(),e.toLowerCase(),t,n,i,o);th(l)&&(l-=32),th(d)&&(d-=32);let c=l-d;if(c!==0)return c}let s=n-t,a=o-i;return s<a?-1:s>a?1:0}function ay(r){return r>=48&&r<=57}function th(r){return r>=97&&r<=122}function Al(r){return r>=65&&r<=90}function Rn(r,e){return r.length===e.length&&ym(r,e)===0}function gu(r,e){let t=e.length;return e.length>r.length?!1:ym(r,e,0,t)===0}function Oa(r,e){let t=Math.min(r.length,e.length),n;for(n=0;n<t;n++)if(r.charCodeAt(n)!==e.charCodeAt(n))return n;return t}function ly(r,e){let t=Math.min(r.length,e.length),n,i=r.length-1,o=e.length-1;for(n=0;n<t;n++)if(r.charCodeAt(i-n)!==e.charCodeAt(o-n))return n;return t}function mn(r){return 55296<=r&&r<=56319}function Nl(r){return 56320<=r&&r<=57343}function Bx(r,e){return(r-55296<<10)+(e-56320)+65536}function Im(r,e,t){let n=r.charCodeAt(t);if(mn(n)&&t+1<e){let i=r.charCodeAt(t+1);if(Nl(i))return Bx(n,i)}return n}function NG(r,e){let t=r.charCodeAt(e-1);if(Nl(t)&&e>1){let n=r.charCodeAt(e-2);if(mn(n))return Bx(n,t)}return t}var nh=class{_str;_len;_offset;get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){let e=NG(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){let e=Im(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}},ih=class{_iterator;get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new nh(e,t)}nextGraphemeLength(){let e=Ax.getInstance(),t=this._iterator,n=t.offset,i=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){let o=t.offset,s=e.getGraphemeBreakType(t.nextCodePoint());if(mH(i,s)){t.setOffset(o);break}i=s}return t.offset-n}prevGraphemeLength(){let e=Ax.getInstance(),t=this._iterator,n=t.offset,i=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){let o=t.offset,s=e.getGraphemeBreakType(t.prevCodePoint());if(mH(s,i)){t.setOffset(o);break}i=s}return n-t.offset}eol(){return this._iterator.eol()}};function dy(r,e){return new ih(r,e).nextGraphemeLength()}function m1(r,e){return new ih(r,e).prevGraphemeLength()}function Wx(r,e){e>0&&Nl(r.charCodeAt(e))&&e--;let t=e+dy(r,e);return[t-m1(r,t),t]}var h1;function FG(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function ic(r){return h1||(h1=FG()),h1.test(r)}var BG=/^[\t\n\r\x20-\x7E]*$/;function cy(r){return BG.test(r)}var f1=/[\u2028\u2029]/;function Vx(r){return f1.test(r)}function Ls(r){return r>=11904&&r<=55215||r>=63744&&r<=64255||r>=65281&&r<=65374}function uy(r){return r>=127462&&r<=127487||r===8986||r===8987||r===9200||r===9203||r>=9728&&r<=10175||r===11088||r===11093||r>=127744&&r<=128591||r>=128640&&r<=128764||r>=128992&&r<=129008||r>=129280&&r<=129535||r>=129648&&r<=129782}var yH=String.fromCharCode(65279);function Hx(r){return!!(r&&r.length>0&&r.charCodeAt(0)===65279)}function Ux(r){let e=26;return r=r%(2*e),r<e?String.fromCharCode(97+r):String.fromCharCode(65+r-e)}function mH(r,e){return r===0?e!==5&&e!==7:r===2&&e===3?!1:r===4||r===2||r===3||e===4||e===2||e===3?!0:!(r===8&&(e===8||e===9||e===11||e===12)||(r===11||r===9)&&(e===9||e===10)||(r===12||r===10)&&e===10||e===5||e===13||e===7||r===1||r===13&&e===14||r===6&&e===6)}var Ax=class r{static _INSTANCE=null;static getInstance(){return r._INSTANCE||(r._INSTANCE=new r),r._INSTANCE}_data;constructor(){this._data=WG()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let t=this._data,n=t.length/3,i=1;for(;i<=n;)if(e<t[3*i])i=2*i;else if(e>t[3*i+1])i=2*i+1;else return t[3*i+2];return 0}};function WG(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}function IH(r,e){if(r===0)return 0;let t=VG(r,e);if(t!==void 0)return t;let n=new nh(e,r);return n.prevCodePoint(),n.offset}function VG(r,e){let t=new nh(e,r),n=t.prevCodePoint();for(;HG(n)||n===65039||n===8419;){if(t.offset===0)return;n=t.prevCodePoint()}if(!uy(n))return;let i=t.offset;return i>0&&t.prevCodePoint()===8205&&(i=t.offset),i}function HG(r){return 127995<=r&&r<=127999}var g1=class r{constructor(e){this.confusableDictionary=e}static ambiguousCharacterData=new Mi(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'));static cache=new Px({getCacheKey:JSON.stringify},e=>{function t(c){let p=new Map;for(let h=0;h<c.length;h+=2)p.set(c[h],c[h+1]);return p}function n(c,p){let h=new Map(c);for(let[g,f]of p)h.set(g,f);return h}function i(c,p){if(!c)return p;let h=new Map;for(let[g,f]of c)p.has(g)&&h.set(g,f);return h}let o=this.ambiguousCharacterData.value,s=e.filter(c=>!c.startsWith("_")&&c in o);s.length===0&&(s=["_default"]);let a;for(let c of s){let p=t(o[c]);a=i(a,p)}let l=t(o._common),d=n(l,a);return new r(d)});static getInstance(e){return r.cache.get(Array.from(e))}static _locales=new Mi(()=>Object.keys(r.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")));static getLocales(){return r._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let t=0;t<e.length;t++){let n=e.codePointAt(t);if(typeof n=="number"&&this.isAmbiguous(n))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}};var ye;(Ue=>(Ue.inMemory="inmemory",Ue.vscode="vscode",Ue.internal="private",Ue.walkThrough="walkThrough",Ue.walkThroughSnippet="walkThroughSnippet",Ue.http="http",Ue.https="https",Ue.file="file",Ue.mailto="mailto",Ue.untitled="untitled",Ue.data="data",Ue.command="command",Ue.vscodeRemote="vscode-remote",Ue.vscodeRemoteResource="vscode-remote-resource",Ue.vscodeManagedRemoteResource="vscode-managed-remote-resource",Ue.vscodeUserData="vscode-userdata",Ue.vscodeCustomEditor="vscode-custom-editor",Ue.vscodeNotebookCell="vscode-notebook-cell",Ue.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",Ue.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",Ue.vscodeNotebookCellOutput="vscode-notebook-cell-output",Ue.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",Ue.vscodeNotebookMetadata="vscode-notebook-metadata",Ue.vscodeInteractiveInput="vscode-interactive-input",Ue.vscodeSettings="vscode-settings",Ue.vscodeWorkspaceTrust="vscode-workspace-trust",Ue.vscodeTerminal="vscode-terminal",Ue.vscodeChatCodeBlock="vscode-chat-code-block",Ue.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",Ue.vscodeChatSesssion="vscode-chat-editor",Ue.webviewPanel="webview-panel",Ue.vscodeWebview="vscode-webview",Ue.extension="extension",Ue.vscodeFileResource="vscode-file",Ue.tmp="tmp",Ue.vsls="vsls",Ue.vscodeSourceControl="vscode-scm",Ue.commentsInput="comment",Ue.codeSetting="code-setting",Ue.outputChannel="output"))(ye||={});function Sm(r,e){return Z.isUri(r)?Rn(r.scheme,e):gu(r,e+":")}var UG="tkn",b1=class{_hosts=Object.create(null);_ports=Object.create(null);_connectionTokens=Object.create(null);_preferredWebSchema="http";_delegate=null;_serverRootPath="/";setPreferredWebSchema(e){this._preferredWebSchema=e}setDelegate(e){this._delegate=e}setServerRootPath(e,t){this._serverRootPath=zG(e,t)}getServerRootPath(){return this._serverRootPath}get _remoteResourcesPath(){return mt.join(this._serverRootPath,ye.vscodeRemoteResource)}set(e,t,n){this._hosts[e]=t,this._ports[e]=n}setConnectionToken(e,t){this._connectionTokens[e]=t}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return Be(a),e}let t=e.authority,n=this._hosts[t];n&&n.indexOf(":")!==-1&&n.indexOf("[")===-1&&(n=`[${n}]`);let i=this._ports[t],o=this._connectionTokens[t],s=`path=${encodeURIComponent(e.path)}`;return typeof o=="string"&&(s+=`&${UG}=${encodeURIComponent(o)}`),Z.from({scheme:Ri?this._preferredWebSchema:ye.vscodeRemoteResource,authority:`${n}:${i}`,path:this._remoteResourcesPath,query:s})}},py=new b1;function zG(r,e){return mt.join(e??"/",`${r.quality??"oss"}-${r.commit??"dev"}`)}var y1="vscode-app",v1=class r{static FALLBACK_AUTHORITY=y1;asBrowserUri(e){let t=this.toUri(e);return this.uriToBrowserUri(t)}uriToBrowserUri(e){return e.scheme===ye.vscodeRemote?py.rewrite(e):e.scheme===ye.file&&(Ol||iH===`${ye.vscodeFileResource}://${r.FALLBACK_AUTHORITY}`)?e.with({scheme:ye.vscodeFileResource,authority:e.authority||r.FALLBACK_AUTHORITY,query:null,fragment:null}):e}asFileUri(e){let t=this.toUri(e);return this.uriToFileUri(t)}uriToFileUri(e){return e.scheme===ye.vscodeFileResource?e.with({scheme:ye.file,authority:e.authority!==r.FALLBACK_AUTHORITY?e.authority:null,query:null,fragment:null}):e}toUri(e,t){if(Z.isUri(e))return e;if(globalThis._VSCODE_FILE_ROOT){let n=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(n))return Z.joinPath(Z.parse(n,!0),e);let i=ur(n,e);return Z.file(i)}return Z.parse(t.toUrl(e))}},qs=new v1,KG;(o=>{let r=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);o.CoopAndCoep=Object.freeze(r.get("3"));let t="vscode-coi";function n(s){let a;typeof s=="string"?a=new URL(s).searchParams:s instanceof URL?a=s.searchParams:Z.isUri(s)&&(a=new URL(s.toString(!0)).searchParams);let l=a?.get(t);if(l)return r.get(l)}o.getHeadersFromQuery=n;function i(s,a,l){if(!globalThis.crossOriginIsolated)return;let d=a&&l?"3":l?"2":"1";s instanceof URLSearchParams?s.set(t,d):s[t]=d}o.addSearchParam=i})(KG||={});function xt(r){return typeof r=="string"}function I1(r){return Array.isArray(r)&&r.every(e=>xt(e))}function tn(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)&&!(r instanceof RegExp)&&!(r instanceof Date)}function Uo(r){return typeof r=="number"&&!isNaN(r)}function S1(r){return!!r&&typeof r[Symbol.iterator]=="function"}function Cm(r){return r===!0||r===!1}function Oi(r){return typeof r>"u"}function Pi(r){return!ln(r)}function ln(r){return Oi(r)||r===null}function Ao(r,e){if(!r)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}function ks(r){if(ln(r))throw new Error("Assertion Failed: argument is undefined or null");return r}var GG=Object.prototype.hasOwnProperty;function oc(r){if(!tn(r))return!1;for(let e in r)if(GG.call(r,e))return!1;return!0}function hy(r){return typeof r=="function"}function SH(r,e){let t=Math.min(r.length,e.length);for(let n=0;n<t;n++)jG(r[n],e[n])}function jG(r,e){if(xt(e)){if(typeof r!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(hy(e)){try{if(r instanceof e)return}catch{}if(!ln(r)&&r.constructor===e||e.length===1&&e.call(void 0,r)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function zx(r,e){let t=r;typeof t.vscodeWindowId!="number"&&Object.defineProperty(t,"vscodeWindowId",{get:()=>e})}var We=window;function C1(r){return r===We?!1:typeof r?.vscodeWindowId=="number"}var ah=class r{static INSTANCE=new r;mapWindowIdToZoomLevel=new Map;_onDidChangeZoomLevel=new T;onDidChangeZoomLevel=this._onDidChangeZoomLevel.event;getZoomLevel(e){return this.mapWindowIdToZoomLevel.get(this.getWindowId(e))??0}setZoomLevel(e,t){if(this.getZoomLevel(t)===e)return;let n=this.getWindowId(t);this.mapWindowIdToZoomLevel.set(n,e),this._onDidChangeZoomLevel.fire(n)}mapWindowIdToZoomFactor=new Map;getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}setZoomFactor(e,t){this.mapWindowIdToZoomFactor.set(this.getWindowId(t),e)}_onDidChangeFullscreen=new T;onDidChangeFullscreen=this._onDidChangeFullscreen.event;mapWindowIdToFullScreen=new Map;setFullscreen(e,t){if(this.isFullscreen(t)===e)return;let n=this.getWindowId(t);this.mapWindowIdToFullScreen.set(n,e),this._onDidChangeFullscreen.fire(n)}isFullscreen(e){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(e))}getWindowId(e){return e.vscodeWindowId}};function $G(r,e,t){typeof e=="string"&&(e=r.matchMedia(e)),e.addEventListener("change",t)}function CH(r){return ah.INSTANCE.getZoomLevel(r)}var Ore=ah.INSTANCE.onDidChangeZoomLevel;function xH(r){return ah.INSTANCE.getZoomFactor(r)}function EH(r,e){ah.INSTANCE.setFullscreen(r,e)}var Pre=ah.INSTANCE.onDidChangeFullscreen,xm=navigator.userAgent,yi=xm.indexOf("Firefox")>=0,Pa=xm.indexOf("AppleWebKit")>=0,mu=xm.indexOf("Chrome")>=0,Or=!mu&&xm.indexOf("Safari")>=0,TH=!mu&&!Or&&Pa,Are=xm.indexOf("Electron/")>=0,x1=xm.indexOf("Android")>=0,Kx=!1;if(typeof We.matchMedia=="function"){let r=We.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=We.matchMedia("(display-mode: fullscreen)");Kx=r.matches,$G(We,r,({matches:t})=>{Kx&&e.matches||(Kx=t)})}function wH(){return Kx}function E1(r,e){if(typeof r=="number"){if(r===0)return null;let t=(r&65535)>>>0,n=(r&4294901760)>>>16;return n!==0?new Em([Gx(t,e),Gx(n,e)]):new Em([Gx(t,e)])}else{let t=[];for(let n=0;n<r.length;n++)t.push(Gx(r[n],e));return new Em(t)}}function Gx(r,e){let t=!!(r&2048),n=!!(r&256),i=e===2?n:t,o=!!(r&1024),s=!!(r&512),a=e===2?t:n,l=r&255;return new bu(i,o,s,a,l)}var bu=class r{constructor(e,t,n,i,o){this.ctrlKey=e;this.shiftKey=t;this.altKey=n;this.metaKey=i;this.keyCode=o}equals(e){return e instanceof r&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){let e=this.ctrlKey?"1":"0",t=this.shiftKey?"1":"0",n=this.altKey?"1":"0",i=this.metaKey?"1":"0";return`K${e}${t}${n}${i}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new Em([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}};var Em=class{chords;constructor(e){if(e.length===0)throw Kp("chords");this.chords=e}getHashCode(){let e="";for(let t=0,n=this.chords.length;t<n;t++)t!==0&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}};function qG(r){if(r.charCode){let t=String.fromCharCode(r.charCode).toUpperCase();return Wv.fromString(t)}let e=r.keyCode;if(e===3)return 7;if(yi)switch(e){case 59:return 85;case 60:if(Xt)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Pe)return 57;break}else if(Pa){if(Pe&&e===93)return 57;if(!Pe&&e===92)return 57}return M0[e]||0}var YG=Pe?256:2048,XG=512,QG=1024,ZG=Pe?2048:256;var it=class{_standardKeyboardEventBrand=!0;browserEvent;target;ctrlKey;shiftKey;altKey;metaKey;altGraphKey;keyCode;code;_asKeybinding;_asKeyCodeChord;constructor(e){let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=t.getModifierState?.("AltGraph"),this.keyCode=qG(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=YG),this.altKey&&(t|=XG),this.shiftKey&&(t|=QG),this.metaKey&&(t|=ZG),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new bu(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}};var _H=new WeakMap;function JG(r){if(!r.parent||r.parent===r)return null;try{let e=r.location,t=r.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return null}catch{return null}return r.parent}var jx=class{static getSameOriginWindowChain(e){let t=_H.get(e);if(!t){t=[],_H.set(e,t);let n=e,i;do i=JG(n),i?t.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):t.push({window:new WeakRef(n),iframeElement:null}),n=i;while(n)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,i=0,o=this.getSameOriginWindowChain(e);for(let s of o){let a=s.window.deref();if(n+=a?.scrollY??0,i+=a?.scrollX??0,a===t||!s.iframeElement)break;let l=s.iframeElement.getBoundingClientRect();n+=l.top,i+=l.left}return{top:n,left:i}}};var hr=class{browserEvent;leftButton;middleButton;rightButton;buttons;target;detail;posx;posy;ctrlKey;shiftKey;altKey;metaKey;timestamp;constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let n=jx.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=n.left,this.posy-=n.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}};var Rs=class{browserEvent;deltaY;deltaX;target;constructor(e,t=0,n=0){this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t;let i=!1;if(mu){let o=navigator.userAgent.match(/Chrome\/(\d+)/);i=(o?parseInt(o[1]):123)<=122}if(e){let o=e,s=e,a=e.view?.devicePixelRatio||1;if(typeof o.wheelDeltaY<"u")i?this.deltaY=o.wheelDeltaY/(120*a):this.deltaY=o.wheelDeltaY/120;else if(typeof s.VERTICAL_AXIS<"u"&&s.axis===s.VERTICAL_AXIS)this.deltaY=-s.detail/3;else if(e.type==="wheel"){let l=e;l.deltaMode===l.DOM_DELTA_LINE?yi&&!Pe?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof o.wheelDeltaX<"u")Or&&It?this.deltaX=-(o.wheelDeltaX/120):i?this.deltaX=o.wheelDeltaX/(120*a):this.deltaX=o.wheelDeltaX/120;else if(typeof s.HORIZONTAL_AXIS<"u"&&s.axis===s.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){let l=e;l.deltaMode===l.DOM_DELTA_LINE?yi&&!Pe?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(i?this.deltaY=e.wheelDelta/(120*a):this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}};var vu={clipboard:{writeText:Ol||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:Ol||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:Ol||wH()?0:navigator.keyboard||Or?1:2,touch:"ontouchstart"in We||navigator.maxTouchPoints>0,pointerEvents:We.PointerEvent&&("ontouchstart"in We||navigator.maxTouchPoints>0)};function yu(r){return r===47||r===92}function gy(r){return r.replace(/[\\/]/g,mt.sep)}function LH(r){return r.indexOf("/")===-1&&(r=gy(r)),/^[a-zA-Z]:(\/|$)/.test(r)&&(r="/"+r),r}function T1(r,e=mt.sep){if(!r)return"";let t=r.length,n=r.charCodeAt(0);if(yu(n)){if(yu(r.charCodeAt(1))&&!yu(r.charCodeAt(2))){let o=3,s=o;for(;o<t&&!yu(r.charCodeAt(o));o++);if(s!==o&&!yu(r.charCodeAt(o+1))){for(o+=1;o<t;o++)if(yu(r.charCodeAt(o)))return r.slice(0,o+1).replace(/[\\/]/g,e)}}return e}else if(RH(n)&&r.charCodeAt(1)===58)return yu(r.charCodeAt(2))?r.slice(0,2)+e:r.slice(0,2);let i=r.indexOf("://");if(i!==-1){for(i+=3;i<t;i++)if(yu(r.charCodeAt(i)))return r.slice(0,i+1)}return""}var ej=/[\\/:\*\?"<>\|]/g,tj=/[/]/g,nj=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function kH(r,e=It){let t=e?ej:tj;return!(!r||r.length===0||/^\s+$/.test(r)||(t.lastIndex=0,t.test(r))||e&&nj.test(r)||r==="."||r===".."||e&&r[r.length-1]==="."||e&&r.length!==r.trim().length||r.length>255)}function my(r,e,t,n=pr){if(r===e)return!0;if(!r||!e||e.length>r.length)return!1;if(t){if(!gu(r,e))return!1;if(e.length===r.length)return!0;let o=e.length;return e.charAt(e.length-1)===n&&o--,r.charAt(o)===n}return e.charAt(e.length-1)!==n&&(e+=n),r.indexOf(e)===0}function RH(r){return r>=65&&r<=90||r>=97&&r<=122}function w1(r,e=It){return e?RH(r.charCodeAt(0))&&r.charCodeAt(1)===58:!1}function MH(r,e=It){return w1(r,e)?r[0]:void 0}function OH(r,e,t){return e.length>r.length?-1:r===e?0:(t&&(r=r.toLowerCase(),e=e.toLowerCase()),r.indexOf(e))}function PH(r){let e=r.split(":"),t,n,i;for(let o of e){let s=Number(o);Uo(s)?n===void 0?n=s:i===void 0&&(i=s):t=t?[t,o].join(":"):o}if(!t)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:t,line:n!==void 0?n:void 0,column:i!==void 0?i:n!==void 0?1:void 0}}function sc(r){return iy(r,!0)}var fy=class{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:sh(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,t,n=!1){if(e.scheme===t.scheme){if(e.scheme===ye.file)return my(sc(e),sc(t),this._ignorePathCasing(e))&&e.query===t.query&&(n||e.fragment===t.fragment);if(_1(e.authority,t.authority))return my(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(n||e.fragment===t.fragment)}return!1}joinPath(e,...t){return Z.joinPath(e,...t)}basenameOrAuthority(e){return zo(e)||e.authority}basename(e){return mt.basename(e.path)}extname(e){return mt.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===ye.file?t=Z.file(du(sc(e))).path:(t=mt.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===ye.file?t=Z.file(au(sc(e))).path:t=mt.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!_1(e.authority,t.authority))return;if(e.scheme===ye.file){let o=aH(sc(e),sc(t));return It?gy(o):o}let n=e.path||"/",i=t.path||"/";if(this._ignorePathCasing(e)){let o=0;for(let s=Math.min(n.length,i.length);o<s&&!(n.charCodeAt(o)!==i.charCodeAt(o)&&n.charAt(o).toLowerCase()!==i.charAt(o).toLowerCase());o++);n=i.substr(0,o)+n.substr(o)}return mt.relative(n,i)}resolvePath(e,t){if(e.scheme===ye.file){let n=Z.file(bm(sc(e),t));return e.with({authority:n.authority,path:n.path})}return t=LH(t),e.with({path:mt.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&Rn(e,t)}hasTrailingPathSeparator(e,t=pr){if(e.scheme===ye.file){let n=sc(e);return n.length>T1(n).length&&n[n.length-1]===t}else{let n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=pr){return AH(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=pr){let n=!1;if(e.scheme===ye.file){let i=sc(e);n=i!==void 0&&i.length===T1(i).length&&i[i.length-1]===t}else{t="/";let i=e.path;n=i.length===1&&i.charCodeAt(i.length-1)===47}return!n&&!AH(e,t)?e.with({path:e.path+"/"}):e}},Zt=new fy(()=>!1),oj=new fy(r=>r.scheme===ye.file?!Xt:!0),rj=new fy(r=>!0),yn=Zt.isEqual.bind(Zt),D1=Zt.isEqualOrParent.bind(Zt),rse=Zt.getComparisonKey.bind(Zt),sj=Zt.basenameOrAuthority.bind(Zt),zo=Zt.basename.bind(Zt),Iu=Zt.extname.bind(Zt),ns=Zt.dirname.bind(Zt),ft=Zt.joinPath.bind(Zt),sse=Zt.normalizePath.bind(Zt),Su=Zt.relativePath.bind(Zt),L1=Zt.resolvePath.bind(Zt),ase=Zt.isAbsolutePath.bind(Zt),_1=Zt.isEqualAuthority.bind(Zt),AH=Zt.hasTrailingPathSeparator.bind(Zt),lse=Zt.removeTrailingPathSeparator.bind(Zt),dse=Zt.addTrailingPathSeparator.bind(Zt);var ac;(o=>{o.META_DATA_LABEL="label",o.META_DATA_DESCRIPTION="description",o.META_DATA_SIZE="size",o.META_DATA_MIME="mime";function i(s){let a=new Map;s.path.substring(s.path.indexOf(";")+1,s.path.lastIndexOf(";")).split(";").forEach(c=>{let[p,h]=c.split(":");p&&h&&a.set(p,h)});let d=s.path.substring(0,s.path.indexOf(";"));return d&&a.set(o.META_DATA_MIME,d),a}o.parseMetaData=i})(ac||={});function NH(r,e,t){if(e){let n=r.path;return n&&n[0]!==mt.sep&&(n=mt.sep+n),r.with({scheme:t,authority:e,path:n})}return r.with({scheme:t})}function Xx(r){return!!r&&typeof r.then=="function"}function lc(r){let e=new jn,t=r(e.token),n=new Promise((i,o)=>{let s=e.token.onCancellationRequested(()=>{s.dispose(),o(new Ro)});Promise.resolve(t).then(a=>{s.dispose(),e.dispose(),i(a)},a=>{s.dispose(),e.dispose(),o(a)})});return new class{cancel(){e.cancel(),e.dispose()}then(i,o){return n.then(i,o)}catch(i){return this.then(void 0,i)}finally(i){return n.finally(i)}}}function Iy(r,e,t){return new Promise((n,i)=>{let o=e.onCancellationRequested(()=>{o.dispose(),n(t)});r.then(n,i).finally(()=>o.dispose())})}function BH(){let r,e;return{promise:new Promise((n,i)=>{r=n,e=i}),resolve:r,reject:e}}var k1=class{activePromise;queuedPromise;queuedPromiseFactory;isDisposed=!1;constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){let t=()=>{if(this.queuedPromise=null,this.isDisposed)return;let n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n};this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(i=>{this.activePromise=null,t(i)},i=>{this.activePromise=null,n(i)})})}dispose(){this.isDisposed=!0}};var lj=(r,e)=>{let t=!0,n=setTimeout(()=>{t=!1,e()},r);return{isTriggered:()=>t,dispose:()=>{clearTimeout(n),t=!1}}},dj=r=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,r())}),{isTriggered:()=>e,dispose:()=>{e=!1}}},Vn=class{constructor(e){this.defaultDelay=e;this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}deferred;completionPromise;doResolve;doReject;task;trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((i,o)=>{this.doResolve=i,this.doReject=o}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){let i=this.task;return this.task=null,i()}}));let n=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=t===lx?dj(n):lj(t,n),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new Ro),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}},by=class{delayer;throttler;constructor(e){this.delayer=new Vn(e),this.throttler=new k1}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}},_m=class{_isOpen;_promise;_completePromise;constructor(){this._isOpen=!1,this._promise=new Promise((e,t)=>{this._completePromise=e})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}};function po(r,e){return e?new Promise((t,n)=>{let i=setTimeout(()=>{o.dispose(),t()},r),o=e.onCancellationRequested(()=>{clearTimeout(i),o.dispose(),n(new Ro)})}):lc(t=>po(r,t))}function Ys(r,e=0,t){let n=setTimeout(()=>{r(),t&&i.dispose()},e),i=me(()=>{clearTimeout(n),t?.deleteAndLeak(i)});return t?.add(i),i}var R1=class{_size=0;_isDisposed=!1;runningPromises;maxDegreeOfParalellism;outstandingPromises;_onDrained;constructor(e){this.maxDegreeOfParalellism=e,this.outstandingPromises=[],this.runningPromises=0,this._onDrained=new T}whenIdle(){return this.size>0?z.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this._onDrained.event}get size(){return this._size}queue(e){if(this._isDisposed)throw new Error("Object has been disposed");return this._size++,new Promise((t,n)=>{this.outstandingPromises.push({factory:e,c:t,e:n}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let t=e.factory();t.then(e.c,e.e),t.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this._isDisposed||(this.runningPromises--,--this._size===0&&this._onDrained.fire(),this.outstandingPromises.length>0&&this.consume())}clear(){if(this._isDisposed)throw new Error("Object has been disposed");this.outstandingPromises.length=0,this._size=this.runningPromises}dispose(){this._isDisposed=!0,this.outstandingPromises.length=0,this._size=0,this._onDrained.dispose()}},$x=class extends R1{constructor(){super(1)}};var Pr=class{_token;_isDisposed=!1;constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new st("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new st("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}},qx=class{disposable=void 0;isDisposed=!1;cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(e,t,n=globalThis){if(this.isDisposed)throw new st("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let i=n.setInterval(()=>{e()},t);this.disposable=me(()=>{n.clearInterval(i),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},Hn=class{runner;timeoutToken;timeout;timeoutHandler;constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}flush(){this.isScheduled()&&(this.cancel(),this.doRun())}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner?.()}};var Cu,wm;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?wm=(r,e)=>{xx(()=>{if(t)return;let n=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,n-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:wm=(r,e,t)=>{let n=r.requestIdleCallback(e,typeof t=="number"?{timeout:t}:void 0),i=!1;return{dispose(){i||(i=!0,r.cancelIdleCallback(n))}}},Cu=r=>wm(globalThis,r)})();var vy=class{_executor;_handle;_didRun=!1;_value;_error;constructor(e,t){this._executor=()=>{try{this._value=t()}catch(n){this._error=n}finally{this._didRun=!0}},this._handle=wm(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}},yy=class extends vy{constructor(e){super(globalThis,e)}};var Yx=class{_running;_queued;isRunning(e){return typeof e=="number"?this._running?.taskId===e:!!this._running}get running(){return this._running?.promise}cancelRunning(){this._running?.cancel()}run(e,t,n){return this._running={taskId:e,cancel:()=>n?.(),promise:t},t.then(()=>this.doneRunning(e),()=>this.doneRunning(e)),t}doneRunning(e){this._running&&e===this._running.taskId&&(this._running=void 0,this.runQueued())}runQueued(){if(this._queued){let e=this._queued;this._queued=void 0,e.run().then(e.promiseResolve,e.promiseReject)}}queue(e){if(this._queued)this._queued.run=e;else{let{promise:t,resolve:n,reject:i}=BH();this._queued={run:e,promise:t,promiseResolve:n,promiseReject:i}}return this._queued.promise}hasQueued(){return!!this._queued}async join(){return this._queued?.promise??this._running?.promise}};var Fl=class{completeCallback;errorCallback;outcome;get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}p;constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new Ro)}},Ko;(t=>{async function r(n){let i,o=await Promise.all(n.map(s=>s.then(a=>a,a=>{i||(i=a)})));if(typeof i<"u")throw i;return o}t.settled=r;function e(n){return new Promise(async(i,o)=>{try{await n(i,o)}catch(s){o(s)}})}t.withAsyncBody=e})(Ko||={});var FH=class r{static fromArray(e){return new r(t=>{t.emitMany(e)})}static fromPromise(e){return new r(async t=>{t.emitMany(await e)})}static fromPromises(e){return new r(async t=>{await Promise.all(e.map(async n=>t.emitOne(await n)))})}static merge(e){return new r(async t=>{await Promise.all(e.map(async n=>{for await(let i of n)t.emitOne(i)}))})}static EMPTY=r.fromArray([]);_state;_results;_error;_onReturn;_onStateChanged;constructor(e,t){this._state=0,this._results=[],this._error=null,this._onReturn=t,this._onStateChanged=new T,queueMicrotask(async()=>{let n={emitOne:i=>this.emitOne(i),emitMany:i=>this.emitMany(i),reject:i=>this.reject(i)};try{await Promise.resolve(e(n)),this.resolve()}catch(i){this.reject(i)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await z.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(e,t){return new r(async n=>{for await(let i of e)n.emitOne(t(i))})}map(e){return r.map(this,e)}static filter(e,t){return new r(async n=>{for await(let i of e)t(i)&&n.emitOne(i)})}filter(e){return r.filter(this,e)}static coalesce(e){return r.filter(e,t=>!!t)}coalesce(){return r.coalesce(this)}static async toPromise(e){let t=[];for await(let n of e)t.push(n);return t}toPromise(){return r.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var{entries:jH,setPrototypeOf:WH,isFrozen:cj,getPrototypeOf:uj,getOwnPropertyDescriptor:pj}=Object,{freeze:Ar,seal:Fa,create:hj}=Object,{apply:F1,construct:B1}=typeof Reflect<"u"&&Reflect;F1||(F1=function(e,t,n){return e.apply(t,n)});Ar||(Ar=function(e){return e});Fa||(Fa=function(e){return e});B1||(B1=function(e,t){return new e(...t)});var gj=Xs(Array.prototype.forEach),VH=Xs(Array.prototype.pop),Sy=Xs(Array.prototype.push),Jx=Xs(String.prototype.toLowerCase),M1=Xs(String.prototype.toString),mj=Xs(String.prototype.match),Na=Xs(String.prototype.replace),fj=Xs(String.prototype.indexOf),bj=Xs(String.prototype.trim),Ms=Xs(RegExp.prototype.test),Cy=vj(TypeError);function Xs(r){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return F1(r,e,n)}}function vj(r){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return B1(r,t)}}function kt(r,e,t){var n;t=(n=t)!==null&&n!==void 0?n:Jx,WH&&WH(r,null);let i=e.length;for(;i--;){let o=e[i];if(typeof o=="string"){let s=t(o);s!==o&&(cj(e)||(e[i]=s),o=s)}r[o]=!0}return r}function Dm(r){let e=hj(null);for(let[t,n]of jH(r))e[t]=n;return e}function Qx(r,e){for(;r!==null;){let n=pj(r,e);if(n){if(n.get)return Xs(n.get);if(typeof n.value=="function")return Xs(n.value)}r=uj(r)}function t(n){return console.warn("fallback value for",n),null}return t}var HH=Ar(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),O1=Ar(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),P1=Ar(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),yj=Ar(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),A1=Ar(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Ij=Ar(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),UH=Ar(["#text"]),zH=Ar(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),N1=Ar(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),KH=Ar(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Zx=Ar(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Sj=Fa(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Cj=Fa(/<%[\w\W]*|[\w\W]*%>/gm),xj=Fa(/\${[\w\W]*}/gm),Ej=Fa(/^data-[\-\w.\u00B7-\uFFFF]/),Tj=Fa(/^aria-[\-\w]+$/),$H=Fa(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),wj=Fa(/^(?:\w+script|data):/i),_j=Fa(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),qH=Fa(/^html$/i),GH=Object.freeze({__proto__:null,MUSTACHE_EXPR:Sj,ERB_EXPR:Cj,TMPLIT_EXPR:xj,DATA_ATTR:Ej,ARIA_ATTR:Tj,IS_ALLOWED_URI:$H,IS_SCRIPT_OR_DATA:wj,ATTR_WHITESPACE:_j,DOCTYPE_NAME:qH}),Dj=()=>typeof window>"u"?null:window,Lj=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null,i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(n=t.getAttribute(i));let o="dompurify"+(n?"#"+n:"");try{return e.createPolicy(o,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+o+" could not be created."),null}};function YH(){let r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Dj(),e=Ke=>YH(Ke);if(e.version="3.0.5",e.removed=[],!r||!r.document||r.document.nodeType!==9)return e.isSupported=!1,e;let t=r.document,n=t.currentScript,{document:i}=r,{DocumentFragment:o,HTMLTemplateElement:s,Node:a,Element:l,NodeFilter:d,NamedNodeMap:c=r.NamedNodeMap||r.MozNamedAttrMap,HTMLFormElement:p,DOMParser:h,trustedTypes:g}=r,f=l.prototype,m=Qx(f,"cloneNode"),b=Qx(f,"nextSibling"),v=Qx(f,"childNodes"),S=Qx(f,"parentNode");if(typeof s=="function"){let Ke=i.createElement("template");Ke.content&&Ke.content.ownerDocument&&(i=Ke.content.ownerDocument)}let x,E="",{implementation:w,createNodeIterator:P,createDocumentFragment:R,getElementsByTagName:O}=i,{importNode:M}=t,K={};e.isSupported=typeof jH=="function"&&typeof S=="function"&&w&&w.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:$,ERB_EXPR:Q,TMPLIT_EXPR:he,DATA_ATTR:De,ARIA_ATTR:ce,IS_SCRIPT_OR_DATA:se,ATTR_WHITESPACE:fe}=GH,{IS_ALLOWED_URI:ue}=GH,ae=null,ke=kt({},[...HH,...O1,...P1,...A1,...UH]),Re=null,wt=kt({},[...zH,...N1,...KH,...Zx]),ht=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Ue=null,co=null,_i=!0,kr=!0,qr=!1,Qc=!0,Do=!1,Ta=!1,Hp=!1,Zc=!1,Lo=!1,Jc=!1,eu=!1,om=!0,rm=!1,Xe="user-content-",Gd=!0,tu=!1,Sl={},$s=null,Av=kt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Up=null,Nv=kt({},["audio","video","img","source","image","track"]),Cl=null,Fv=kt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),xl="http://www.w3.org/1998/Math/MathML",Es="http://www.w3.org/2000/svg",hi="http://www.w3.org/1999/xhtml",Ts=hi,jd=!1,dr=null,nu=kt({},[xl,Es,hi],M1),wa,El=["application/xhtml+xml","text/html"],Ce="text/html",ge,W=null,de=i.createElement("form"),Se=function(Y){return Y instanceof RegExp||Y instanceof Function},lt=function(Y){if(!(W&&W===Y)){if((!Y||typeof Y!="object")&&(Y={}),Y=Dm(Y),wa=El.indexOf(Y.PARSER_MEDIA_TYPE)===-1?wa=Ce:wa=Y.PARSER_MEDIA_TYPE,ge=wa==="application/xhtml+xml"?M1:Jx,ae="ALLOWED_TAGS"in Y?kt({},Y.ALLOWED_TAGS,ge):ke,Re="ALLOWED_ATTR"in Y?kt({},Y.ALLOWED_ATTR,ge):wt,dr="ALLOWED_NAMESPACES"in Y?kt({},Y.ALLOWED_NAMESPACES,M1):nu,Cl="ADD_URI_SAFE_ATTR"in Y?kt(Dm(Fv),Y.ADD_URI_SAFE_ATTR,ge):Fv,Up="ADD_DATA_URI_TAGS"in Y?kt(Dm(Nv),Y.ADD_DATA_URI_TAGS,ge):Nv,$s="FORBID_CONTENTS"in Y?kt({},Y.FORBID_CONTENTS,ge):Av,Ue="FORBID_TAGS"in Y?kt({},Y.FORBID_TAGS,ge):{},co="FORBID_ATTR"in Y?kt({},Y.FORBID_ATTR,ge):{},Sl="USE_PROFILES"in Y?Y.USE_PROFILES:!1,_i=Y.ALLOW_ARIA_ATTR!==!1,kr=Y.ALLOW_DATA_ATTR!==!1,qr=Y.ALLOW_UNKNOWN_PROTOCOLS||!1,Qc=Y.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Do=Y.SAFE_FOR_TEMPLATES||!1,Ta=Y.WHOLE_DOCUMENT||!1,Lo=Y.RETURN_DOM||!1,Jc=Y.RETURN_DOM_FRAGMENT||!1,eu=Y.RETURN_TRUSTED_TYPE||!1,Zc=Y.FORCE_BODY||!1,om=Y.SANITIZE_DOM!==!1,rm=Y.SANITIZE_NAMED_PROPS||!1,Gd=Y.KEEP_CONTENT!==!1,tu=Y.IN_PLACE||!1,ue=Y.ALLOWED_URI_REGEXP||$H,Ts=Y.NAMESPACE||hi,ht=Y.CUSTOM_ELEMENT_HANDLING||{},Y.CUSTOM_ELEMENT_HANDLING&&Se(Y.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ht.tagNameCheck=Y.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Y.CUSTOM_ELEMENT_HANDLING&&Se(Y.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ht.attributeNameCheck=Y.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Y.CUSTOM_ELEMENT_HANDLING&&typeof Y.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ht.allowCustomizedBuiltInElements=Y.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Do&&(kr=!1),Jc&&(Lo=!0),Sl&&(ae=kt({},[...UH]),Re=[],Sl.html===!0&&(kt(ae,HH),kt(Re,zH)),Sl.svg===!0&&(kt(ae,O1),kt(Re,N1),kt(Re,Zx)),Sl.svgFilters===!0&&(kt(ae,P1),kt(Re,N1),kt(Re,Zx)),Sl.mathMl===!0&&(kt(ae,A1),kt(Re,KH),kt(Re,Zx))),Y.ADD_TAGS&&(ae===ke&&(ae=Dm(ae)),kt(ae,Y.ADD_TAGS,ge)),Y.ADD_ATTR&&(Re===wt&&(Re=Dm(Re)),kt(Re,Y.ADD_ATTR,ge)),Y.ADD_URI_SAFE_ATTR&&kt(Cl,Y.ADD_URI_SAFE_ATTR,ge),Y.FORBID_CONTENTS&&($s===Av&&($s=Dm($s)),kt($s,Y.FORBID_CONTENTS,ge)),Gd&&(ae["#text"]=!0),Ta&&kt(ae,["html","head","body"]),ae.table&&(kt(ae,["tbody"]),delete Ue.tbody),Y.TRUSTED_TYPES_POLICY){if(typeof Y.TRUSTED_TYPES_POLICY.createHTML!="function")throw Cy('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Y.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Cy('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=Y.TRUSTED_TYPES_POLICY,E=x.createHTML("")}else x===void 0&&(x=Lj(g,n)),x!==null&&typeof E=="string"&&(E=x.createHTML(""));Ar&&Ar(Y),W=Y}},Ut=kt({},["mi","mo","mn","ms","mtext"]),$i=kt({},["foreignobject","desc","title","annotation-xml"]),ko=kt({},["title","style","font","a","script"]),Ze=kt({},O1);kt(Ze,P1),kt(Ze,yj);let L=kt({},A1);kt(L,Ij);let k=function(Y){let xe=S(Y);(!xe||!xe.tagName)&&(xe={namespaceURI:Ts,tagName:"template"});let Fe=Jx(Y.tagName),gn=Jx(xe.tagName);return dr[Y.namespaceURI]?Y.namespaceURI===Es?xe.namespaceURI===hi?Fe==="svg":xe.namespaceURI===xl?Fe==="svg"&&(gn==="annotation-xml"||Ut[gn]):!!Ze[Fe]:Y.namespaceURI===xl?xe.namespaceURI===hi?Fe==="math":xe.namespaceURI===Es?Fe==="math"&&$i[gn]:!!L[Fe]:Y.namespaceURI===hi?xe.namespaceURI===Es&&!$i[gn]||xe.namespaceURI===xl&&!Ut[gn]?!1:!L[Fe]&&(ko[Fe]||!Ze[Fe]):!!(wa==="application/xhtml+xml"&&dr[Y.namespaceURI]):!1},A=function(Y){Sy(e.removed,{element:Y});try{Y.parentNode.removeChild(Y)}catch{Y.remove()}},V=function(Y,xe){try{Sy(e.removed,{attribute:xe.getAttributeNode(Y),from:xe})}catch{Sy(e.removed,{attribute:null,from:xe})}if(xe.removeAttribute(Y),Y==="is"&&!Re[Y])if(Lo||Jc)try{A(xe)}catch{}else try{xe.setAttribute(Y,"")}catch{}},G=function(Y){let xe,Fe;if(Zc)Y="<remove></remove>"+Y;else{let cr=mj(Y,/^[\r\n\t ]+/);Fe=cr&&cr[0]}wa==="application/xhtml+xml"&&Ts===hi&&(Y='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Y+"</body></html>");let gn=x?x.createHTML(Y):Y;if(Ts===hi)try{xe=new h().parseFromString(gn,wa)}catch{}if(!xe||!xe.documentElement){xe=w.createDocument(Ts,"template",null);try{xe.documentElement.innerHTML=jd?E:gn}catch{}}let Di=xe.body||xe.documentElement;return Y&&Fe&&Di.insertBefore(i.createTextNode(Fe),Di.childNodes[0]||null),Ts===hi?O.call(xe,Ta?"html":"body")[0]:Ta?xe.documentElement:Di},te=function(Y){return P.call(Y.ownerDocument||Y,Y,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},le=function(Y){return Y instanceof p&&(typeof Y.nodeName!="string"||typeof Y.textContent!="string"||typeof Y.removeChild!="function"||!(Y.attributes instanceof c)||typeof Y.removeAttribute!="function"||typeof Y.setAttribute!="function"||typeof Y.namespaceURI!="string"||typeof Y.insertBefore!="function"||typeof Y.hasChildNodes!="function")},Le=function(Y){return typeof a=="object"?Y instanceof a:Y&&typeof Y=="object"&&typeof Y.nodeType=="number"&&typeof Y.nodeName=="string"},Oe=function(Y,xe,Fe){K[Y]&&gj(K[Y],gn=>{gn.call(e,xe,Fe,W)})},ut=function(Y){let xe;if(Oe("beforeSanitizeElements",Y,null),le(Y))return A(Y),!0;let Fe=ge(Y.nodeName);if(Oe("uponSanitizeElement",Y,{tagName:Fe,allowedTags:ae}),Y.hasChildNodes()&&!Le(Y.firstElementChild)&&(!Le(Y.content)||!Le(Y.content.firstElementChild))&&Ms(/<[/\w]/g,Y.innerHTML)&&Ms(/<[/\w]/g,Y.textContent))return A(Y),!0;if(!ae[Fe]||Ue[Fe]){if(!Ue[Fe]&&Tn(Fe)&&(ht.tagNameCheck instanceof RegExp&&Ms(ht.tagNameCheck,Fe)||ht.tagNameCheck instanceof Function&&ht.tagNameCheck(Fe)))return!1;if(Gd&&!$s[Fe]){let gn=S(Y)||Y.parentNode,Di=v(Y)||Y.childNodes;if(Di&&gn){let cr=Di.length;for(let si=cr-1;si>=0;--si)gn.insertBefore(m(Di[si],!0),b(Y))}}return A(Y),!0}return Y instanceof l&&!k(Y)||(Fe==="noscript"||Fe==="noembed"||Fe==="noframes")&&Ms(/<\/no(script|embed|frames)/i,Y.innerHTML)?(A(Y),!0):(Do&&Y.nodeType===3&&(xe=Y.textContent,xe=Na(xe,$," "),xe=Na(xe,Q," "),xe=Na(xe,he," "),Y.textContent!==xe&&(Sy(e.removed,{element:Y.cloneNode()}),Y.textContent=xe)),Oe("afterSanitizeElements",Y,null),!1)},Nt=function(Y,xe,Fe){if(om&&(xe==="id"||xe==="name")&&(Fe in i||Fe in de))return!1;if(!(kr&&!co[xe]&&Ms(De,xe))){if(!(_i&&Ms(ce,xe))){if(!Re[xe]||co[xe]){if(!(Tn(Y)&&(ht.tagNameCheck instanceof RegExp&&Ms(ht.tagNameCheck,Y)||ht.tagNameCheck instanceof Function&&ht.tagNameCheck(Y))&&(ht.attributeNameCheck instanceof RegExp&&Ms(ht.attributeNameCheck,xe)||ht.attributeNameCheck instanceof Function&&ht.attributeNameCheck(xe))||xe==="is"&&ht.allowCustomizedBuiltInElements&&(ht.tagNameCheck instanceof RegExp&&Ms(ht.tagNameCheck,Fe)||ht.tagNameCheck instanceof Function&&ht.tagNameCheck(Fe))))return!1}else if(!Cl[xe]){if(!Ms(ue,Na(Fe,fe,""))){if(!((xe==="src"||xe==="xlink:href"||xe==="href")&&Y!=="script"&&fj(Fe,"data:")===0&&Up[Y])){if(!(qr&&!Ms(se,Na(Fe,fe,"")))){if(Fe)return!1}}}}}}return!0},Tn=function(Y){return Y.indexOf("-")>0},gi=function(Y){let xe,Fe,gn,Di;Oe("beforeSanitizeAttributes",Y,null);let{attributes:cr}=Y;if(!cr)return;let si={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Re};for(Di=cr.length;Di--;){xe=cr[Di];let{name:Tl,namespaceURI:D0}=xe;if(Fe=Tl==="value"?xe.value:bj(xe.value),gn=ge(Tl),si.attrName=gn,si.attrValue=Fe,si.keepAttr=!0,si.forceKeepAttr=void 0,Oe("uponSanitizeAttribute",Y,si),Fe=si.attrValue,si.forceKeepAttr||(V(Tl,Y),!si.keepAttr))continue;if(!Qc&&Ms(/\/>/i,Fe)){V(Tl,Y);continue}Do&&(Fe=Na(Fe,$," "),Fe=Na(Fe,Q," "),Fe=Na(Fe,he," "));let f2=ge(Y.nodeName);if(Nt(f2,gn,Fe)){if(rm&&(gn==="id"||gn==="name")&&(V(Tl,Y),Fe=Xe+Fe),x&&typeof g=="object"&&typeof g.getAttributeType=="function"&&!D0)switch(g.getAttributeType(f2,gn)){case"TrustedHTML":{Fe=x.createHTML(Fe);break}case"TrustedScriptURL":{Fe=x.createScriptURL(Fe);break}}try{D0?Y.setAttributeNS(D0,Tl,Fe):Y.setAttribute(Tl,Fe),VH(e.removed)}catch{}}}Oe("afterSanitizeAttributes",Y,null)},An=function Ke(Y){let xe,Fe=te(Y);for(Oe("beforeSanitizeShadowDOM",Y,null);xe=Fe.nextNode();)Oe("uponSanitizeShadowNode",xe,null),!ut(xe)&&(xe.content instanceof o&&Ke(xe.content),gi(xe));Oe("afterSanitizeShadowDOM",Y,null)};return e.sanitize=function(Ke){let Y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},xe,Fe,gn,Di;if(jd=!Ke,jd&&(Ke="<!-->"),typeof Ke!="string"&&!Le(Ke))if(typeof Ke.toString=="function"){if(Ke=Ke.toString(),typeof Ke!="string")throw Cy("dirty is not a string, aborting")}else throw Cy("toString is not a function");if(!e.isSupported)return Ke;if(Hp||lt(Y),e.removed=[],typeof Ke=="string"&&(tu=!1),tu){if(Ke.nodeName){let Tl=ge(Ke.nodeName);if(!ae[Tl]||Ue[Tl])throw Cy("root node is forbidden and cannot be sanitized in-place")}}else if(Ke instanceof a)xe=G("<!---->"),Fe=xe.ownerDocument.importNode(Ke,!0),Fe.nodeType===1&&Fe.nodeName==="BODY"||Fe.nodeName==="HTML"?xe=Fe:xe.appendChild(Fe);else{if(!Lo&&!Do&&!Ta&&Ke.indexOf("<")===-1)return x&&eu?x.createHTML(Ke):Ke;if(xe=G(Ke),!xe)return Lo?null:eu?E:""}xe&&Zc&&A(xe.firstChild);let cr=te(tu?Ke:xe);for(;gn=cr.nextNode();)ut(gn)||(gn.content instanceof o&&An(gn.content),gi(gn));if(tu)return Ke;if(Lo){if(Jc)for(Di=R.call(xe.ownerDocument);xe.firstChild;)Di.appendChild(xe.firstChild);else Di=xe;return(Re.shadowroot||Re.shadowrootmode)&&(Di=M.call(t,Di,!0)),Di}let si=Ta?xe.outerHTML:xe.innerHTML;return Ta&&ae["!doctype"]&&xe.ownerDocument&&xe.ownerDocument.doctype&&xe.ownerDocument.doctype.name&&Ms(qH,xe.ownerDocument.doctype.name)&&(si="<!DOCTYPE "+xe.ownerDocument.doctype.name+`>
`+si),Do&&(si=Na(si,$," "),si=Na(si,Q," "),si=Na(si,he," ")),x&&eu?x.createHTML(si):si},e.setConfig=function(Ke){lt(Ke),Hp=!0},e.clearConfig=function(){W=null,Hp=!1},e.isValidAttribute=function(Ke,Y,xe){W||lt({});let Fe=ge(Ke),gn=ge(Y);return Nt(Fe,gn,xe)},e.addHook=function(Ke,Y){typeof Y=="function"&&(K[Ke]=K[Ke]||[],Sy(K[Ke],Y))},e.removeHook=function(Ke){if(K[Ke])return VH(K[Ke])},e.removeHooks=function(Ke){K[Ke]&&(K[Ke]=[])},e.removeAllHooks=function(){K={}},e}var Bl=YH();var wse=Bl.version,_se=Bl.isSupported,xy=Bl.sanitize,Dse=Bl.setConfig,Lse=Bl.clearConfig,kse=Bl.isValidAttribute,eE=Bl.addHook,tE=Bl.removeHook,Rse=Bl.removeHooks,Mse=Bl.removeAllHooks;function Os(r){return Ty(r,0)}function Ty(r,e){switch(typeof r){case"object":return r===null?dc(349,e):Array.isArray(r)?Rj(r,e):Mj(r,e);case"string":return nE(r,e);case"boolean":return kj(r,e);case"number":return dc(r,e);case"undefined":return dc(937,e);default:return dc(617,e)}}function dc(r,e){return(e<<5)-e+r|0}function kj(r,e){return dc(r?433:863,e)}function nE(r,e){e=dc(149417,e);for(let t=0,n=r.length;t<n;t++)e=dc(r.charCodeAt(t),e);return e}function Rj(r,e){return e=dc(104579,e),r.reduce((t,n)=>Ty(n,t),e)}function Mj(r,e){return e=dc(181387,e),Object.keys(r).sort().reduce((t,n)=>(t=nE(n,t),Ty(r[n],t)),e)}function W1(r,e,t=32){let n=t-e,i=~((1<<n)-1);return(r<<e|(i&r)>>>n)>>>0}function QH(r,e=0,t=r.byteLength,n=0){for(let i=0;i<t;i++)r[e+i]=n}function Oj(r,e,t="0"){for(;r.length<e;)r=t+r;return r}function Ey(r,e=32){return r instanceof ArrayBuffer?Array.from(new Uint8Array(r)).map(t=>t.toString(16).padStart(2,"0")).join(""):Oj((r>>>0).toString(16),e/4)}var ZH=class r{static _bigBlock32=new DataView(new ArrayBuffer(320));_h0=1732584193;_h1=4023233417;_h2=2562383102;_h3=271733878;_h4=3285377520;_buff;_buffDV;_buffLen;_totalLen;_leftoverHighSurrogate;_finished;constructor(){this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){let t=e.length;if(t===0)return;let n=this._buff,i=this._buffLen,o=this._leftoverHighSurrogate,s,a;for(o!==0?(s=o,a=-1,o=0):(s=e.charCodeAt(0),a=0);;){let l=s;if(mn(s))if(a+1<t){let d=e.charCodeAt(a+1);Nl(d)?(a++,l=Bx(s,d)):l=65533}else{o=s;break}else Nl(s)&&(l=65533);if(i=this._push(n,i,l),a++,a<t)s=e.charCodeAt(a);else break}this._buffLen=i,this._leftoverHighSurrogate=o}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),Ey(this._h0)+Ey(this._h1)+Ey(this._h2)+Ey(this._h3)+Ey(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,QH(this._buff,this._buffLen),this._buffLen>56&&(this._step(),QH(this._buff));let e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){let e=r._bigBlock32,t=this._buffDV;for(let p=0;p<64;p+=4)e.setUint32(p,t.getUint32(p,!1),!1);for(let p=64;p<320;p+=4)e.setUint32(p,W1(e.getUint32(p-12,!1)^e.getUint32(p-32,!1)^e.getUint32(p-56,!1)^e.getUint32(p-64,!1),1),!1);let n=this._h0,i=this._h1,o=this._h2,s=this._h3,a=this._h4,l,d,c;for(let p=0;p<80;p++)p<20?(l=i&o|~i&s,d=1518500249):p<40?(l=i^o^s,d=1859775393):p<60?(l=i&o|i&s|o&s,d=2400959708):(l=i^o^s,d=3395469782),c=W1(n,5)+l+a+d+e.getUint32(p*4,!1)&4294967295,a=s,s=o,o=W1(i,30),i=n,n=c;this._h0=this._h0+n&4294967295,this._h1=this._h1+i&4294967295,this._h2=this._h2+o&4294967295,this._h3=this._h3+s&4294967295,this._h4=this._h4+a&4294967295}};function qn(r,e,t){return Math.min(Math.max(r,e),t)}var wy=class{_n=1;_val=0;update(e){return this._val=this._val+(e-this._val)/this._n,this._n+=1,this._val}get value(){return this._val}},iE=class{_n=0;_val=0;_values=[];_index=0;_sum=0;constructor(e){this._values=new Array(e),this._values.fill(0,0,e)}update(e){let t=this._values[this._index];return this._values[this._index]=e,this._index=(this._index+1)%this._values.length,this._sum-=t,this._sum+=e,this._n<this._values.length&&(this._n+=1),this._val=this._sum/this._n,this._val}get value(){return this._val}};var{registerWindow:nU,getWindow:Ee,getDocument:Jse,getWindows:Dy,getWindowsCount:rE,getWindowId:xu,getWindowById:lh,hasWindow:eae,onDidRegisterWindow:U1,onWillUnregisterWindow:tae,onDidUnregisterWindow:iU}=function(){let r=new Map;zx(We,1);let e={window:We,disposables:new X};r.set(We.vscodeWindowId,e);let t=new T,n=new T,i=new T;function o(s,a){return(typeof s=="number"?r.get(s):void 0)??(a?e:void 0)}return{onDidRegisterWindow:t.event,onWillUnregisterWindow:i.event,onDidUnregisterWindow:n.event,registerWindow(s){if(r.has(s.vscodeWindowId))return N.None;let a=new X,l={window:s,disposables:a.add(new X)};return r.set(s.vscodeWindowId,l),a.add(me(()=>{r.delete(s.vscodeWindowId),n.fire(s)})),a.add(U(s,ee.BEFORE_UNLOAD,()=>{i.fire(s)})),t.fire(l),a},getWindows(){return r.values()},getWindowsCount(){return r.size},getWindowId(s){return s.vscodeWindowId},hasWindow(s){return r.has(s)},getWindowById:o,getWindow(s){let a=s;if(a?.ownerDocument?.defaultView)return a.ownerDocument.defaultView.window;let l=s;return l?.view?l.view.window:We},getDocument(s){return Ee(s).document}}}();function Kt(r){for(;r.firstChild;)r.firstChild.remove()}var V1=class{_handler;_node;_type;_options;constructor(e,t,n,i){this._node=e,this._type=t,this._handler=n,this._options=i||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function U(r,e,t,n){return new V1(r,e,t,n)}function Pj(r,e){return function(t){return e(new hr(r,t))}}function Aj(r){return function(e){return r(new it(e))}}var dn=function(e,t,n,i){let o=n;return t==="click"||t==="mousedown"||t==="contextmenu"?o=Pj(Ee(e),n):(t==="keydown"||t==="keypress"||t==="keyup")&&(o=Aj(n)),U(e,t,o,i)};function Ly(r,e,t){return wm(r,e,t)}var Eu=class extends vy{constructor(e,t){super(e,t)}},km,Ai;var Tu=class extends qx{defaultTarget;constructor(e){super(),this.defaultTarget=e&&Ee(e)}cancelAndSet(e,t,n){return super.cancelAndSet(e,t,n??this.defaultTarget)}},_y=class{_runner;priority;_canceled;constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Be(e)}}static sort(e,t){return t.priority-e.priority}};(function(){let r=new Map,e=new Map,t=new Map,n=new Map,i=o=>{t.set(o,!1);let s=r.get(o)??[];for(e.set(o,s),r.set(o,[]),n.set(o,!0);s.length>0;)s.sort(_y.sort),s.shift().execute();n.set(o,!1)};Ai=(o,s,a=0)=>{let l=xu(o),d=new _y(s,a),c=r.get(l);return c||(c=[],r.set(l,c)),c.push(d),t.get(l)||(t.set(l,!0),o.requestAnimationFrame(()=>i(l))),d},km=(o,s,a)=>{let l=xu(o);if(n.get(l)){let d=new _y(s,a),c=e.get(l);return c||(c=[],e.set(l,c)),c.push(d),d}else return Ai(o,s,a)}})();function oU(r){return Ee(r).getComputedStyle(r,null)}function Ba(r,e){let t=Ee(r),n=t.document;if(r!==n.body)return new Et(r.clientWidth,r.clientHeight);if(li&&t?.visualViewport)return new Et(t.visualViewport.width,t.visualViewport.height);if(t?.innerWidth&&t.innerHeight)return new Et(t.innerWidth,t.innerHeight);if(n.body&&n.body.clientWidth&&n.body.clientHeight)return new Et(n.body.clientWidth,n.body.clientHeight);if(n.documentElement&&n.documentElement.clientWidth&&n.documentElement.clientHeight)return new Et(n.documentElement.clientWidth,n.documentElement.clientHeight);if(e)return Ba(e);throw new Error("Unable to figure out browser width and height")}var gr=class r{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){let i=oU(e),o=i?i.getPropertyValue(t):"0";return r.convertToPixels(e,o)}static getBorderLeftWidth(e){return r.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return r.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return r.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return r.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return r.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return r.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return r.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return r.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return r.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return r.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return r.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return r.getDimension(e,"margin-bottom","marginBottom")}},Et=class r{constructor(e,t){this.width=e;this.height=t}static None=new r(0,0);with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new r(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof r?e:new r(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}};function ky(r){let e=r.offsetParent,t=r.offsetTop,n=r.offsetLeft;for(;(r=r.parentNode)!==null&&r!==r.ownerDocument.body&&r!==r.ownerDocument.documentElement;){t-=r.scrollTop;let i=sU(r)?null:oU(r);i&&(n-=i.direction!=="rtl"?r.scrollLeft:-r.scrollLeft),r===e&&(n+=gr.getBorderLeftWidth(r),t+=gr.getBorderTopWidth(r),t+=r.offsetTop,n+=r.offsetLeft,e=r.offsetParent)}return{left:n,top:t}}function z1(r,e,t){typeof e=="number"&&(r.style.width=`${e}px`),typeof t=="number"&&(r.style.height=`${t}px`)}function rU(r,e,t,n,i,o="absolute"){typeof e=="number"&&(r.style.top=`${e}px`),typeof t=="number"&&(r.style.right=`${t}px`),typeof n=="number"&&(r.style.bottom=`${n}px`),typeof i=="number"&&(r.style.left=`${i}px`),r.style.position=o}function Ii(r){let e=r.getBoundingClientRect(),t=Ee(r);return{left:e.left+t.scrollX,top:e.top+t.scrollY,width:e.width,height:e.height}}function Wl(r){let e=gr.getMarginLeft(r)+gr.getMarginRight(r);return r.offsetWidth+e}function Rm(r){let e=gr.getBorderLeftWidth(r)+gr.getBorderRightWidth(r),t=gr.getPaddingLeft(r)+gr.getPaddingRight(r);return r.offsetWidth-e-t}function sE(r){let e=gr.getBorderTopWidth(r)+gr.getBorderBottomWidth(r),t=gr.getPaddingTop(r)+gr.getPaddingBottom(r);return r.offsetHeight-e-t}function aE(r){let e=gr.getMarginTop(r)+gr.getMarginBottom(r);return r.offsetHeight+e}function Ps(r,e){return!!e?.contains(r)}function wu(r,e,t){for(;r&&r.nodeType===r.ELEMENT_NODE;){if(r.classList.contains(e))return r;if(t){if(typeof t=="string"){if(r.classList.contains(t))return null}else if(r===t)return null}r=r.parentNode}return null}function lE(r,e,t){return!!wu(r,e,t)}function sU(r){return r&&!!r.host&&!!r.mode}function Vl(r){for(;r.parentNode;){if(r===r.ownerDocument?.body)return null;r=r.parentNode}return sU(r)?r:null}function mr(){let r=K1().activeElement;for(;r?.shadowRoot;)r=r.shadowRoot.activeElement;return r}function fr(r){return mr()===r}function Ry(r){return Ps(mr(),r)}function K1(){return rE()<=1?We.document:Array.from(Dy()).map(({window:e})=>e.document).find(e=>e.hasFocus())??We.document}function Hl(){return K1().defaultView?.window??We}var G1=new Map;function aU(r){return G1.has(r)}function No(r=We.document.head,e,t){let n=document.createElement("style");if(n.type="text/css",n.media="screen",e?.(n),r.appendChild(n),t&&t.add(me(()=>n.remove())),r===We.document.head){let i=new Set;G1.set(n,i);for(let{window:o,disposables:s}of Dy()){if(o===We)continue;let a=s.add(dU(n,i,o));t?.add(a)}}return n}function lU(r){let e=new X;for(let[t,n]of G1)e.add(dU(t,n,r));return e}function dU(r,e,t){let n=new X,i=r.cloneNode(!0);t.document.head.appendChild(i),n.add(me(()=>i.remove()));for(let o of Nj(r))i.sheet?.insertRule(o.cssText,i.sheet?.cssRules.length);return n.add(dE.observe(r,n,{childList:!0})(()=>{i.textContent=r.textContent})),e.add(i),n.add(me(()=>e.delete(i))),n}var dE=new class{mutationObservers=new Map;observe(r,e,t){let n=this.mutationObservers.get(r);n||(n=new Map,this.mutationObservers.set(r,n));let i=Os(t),o=n.get(i);if(o)o.users+=1;else{let s=new T,a=new MutationObserver(d=>s.fire(d));a.observe(r,t);let l=o={users:1,observer:a,onDidMutate:s.event};e.add(me(()=>{l.users-=1,l.users===0&&(s.dispose(),a.disconnect(),n?.delete(i),n?.size===0&&this.mutationObservers.delete(r))})),n.set(i,o)}return o.onDidMutate}};function cU(r=We.document.head){return pU("meta",r)}function uU(r=We.document.head){return pU("link",r)}function pU(r,e=We.document.head){let t=document.createElement(r);return e.appendChild(t),t}function Nj(r){return r?.sheet?.rules?r.sheet.rules:r?.sheet?.cssRules?r.sheet.cssRules:[]}function Yn(r){return r instanceof HTMLElement||r instanceof Ee(r).HTMLElement}function hU(r){return r instanceof SVGElement||r instanceof Ee(r).SVGElement}function cE(r){return r instanceof MouseEvent||r instanceof Ee(r).MouseEvent}function Qs(r){return r instanceof KeyboardEvent||r instanceof Ee(r).KeyboardEvent}var ee={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:Pa?"webkitAnimationStart":"animationstart",ANIMATION_END:Pa?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:Pa?"webkitAnimationIteration":"animationiteration"};var qe={stop:(r,e)=>(r.preventDefault(),e&&r.stopPropagation(),r)};function gU(r){let e=[];for(let t=0;r&&r.nodeType===r.ELEMENT_NODE;t++)e[t]=r.scrollTop,r=r.parentNode;return e}function mU(r,e){for(let t=0;r&&r.nodeType===r.ELEMENT_NODE;t++)r.scrollTop!==e[t]&&(r.scrollTop=e[t]),r=r.parentNode}var H1=class r extends N{_onDidFocus=this._register(new T);onDidFocus=this._onDidFocus.event;_onDidBlur=this._register(new T);onDidBlur=this._onDidBlur.event;_refreshStateHandler;static hasFocusWithin(e){if(Yn(e)){let t=Vl(e),n=t?t.activeElement:e.ownerDocument.activeElement;return Ps(n,e)}else{let t=e;return Ps(t.document.activeElement,t.document)}}constructor(e){super();let t=r.hasFocusWithin(e),n=!1,i=()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},o=()=>{t&&(n=!0,(Yn(e)?Ee(e):e).setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{r.hasFocusWithin(e)!==t&&(t?o():i())},this._register(U(e,ee.FOCUS,i,!0)),this._register(U(e,ee.BLUR,o,!0)),Yn(e)&&(this._register(U(e,ee.FOCUS_IN,()=>this._refreshStateHandler())),this._register(U(e,ee.FOCUS_OUT,()=>this._refreshStateHandler())))}refreshState(){this._refreshStateHandler()}};function br(r){return new H1(r)}function fU(r,e){return r.after(e),e}function q(r,...e){if(r.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function j1(r,e){return r.insertBefore(e,r.firstChild),e}function Wa(r,...e){r.innerText="",q(r,...e)}var Fj=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;function bU(r,e,t,...n){let i=Fj.exec(e);if(!i)throw new Error("Bad use of emmet");let o=i[1]||"div",s;return r!=="http://www.w3.org/1999/xhtml"?s=document.createElementNS(r,o):s=document.createElement(o),i[3]&&(s.id=i[3]),i[4]&&(s.className=i[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?s[a]=l:a==="selected"?l&&s.setAttribute(a,"true"):s.setAttribute(a,l))}),s.append(...n),s}function ie(r,e,...t){return bU("http://www.w3.org/1999/xhtml",r,e,...t)}ie.SVG=function(r,e,...t){return bU("http://www.w3.org/2000/svg",r,e,...t)};function Go(...r){for(let e of r)e.style.display="",e.removeAttribute("aria-hidden")}function Yi(...r){for(let e of r)e.style.display="none",e.setAttribute("aria-hidden","true")}function vU(r){return e=>{e.preventDefault(),e.stopPropagation(),r(e)}}function $1(r,e){let t=r.devicePixelRatio*e;return Math.max(1,Math.floor(t))/r.devicePixelRatio}function q1(r){We.open(r,"_blank","noopener")}var JH=780,eU=640;function Y1(r){let e=Math.floor(We.screenLeft+We.innerWidth/2-JH/2),t=Math.floor(We.screenTop+We.innerHeight/2-eU/2);We.open(r,"_blank",`width=${JH},height=${eU},top=${t},left=${e}`)}function yU(r,e=!0){let t=We.open();return t?(e&&(t.opener=null),t.location.href=r,!0):!1}function IU(r,e){let t=()=>{e(),n=Ai(r,t)},n=Ai(r,t);return me(()=>n.dispose())}py.setPreferredWebSchema(/^https:/.test(We.location.href)?"https":"http");function dh(r){return r?`url('${qs.uriToBrowserUri(r).toString(!0).replace(/'/g,"%27")}')`:"url('')"}function As(r,e){if(r!==void 0){let t=r.match(/^\s*var\((.+)\)$/);if(t){let n=t[1].split(",",2);return n.length===2&&(e=As(n[1].trim(),e)),`var(${n[0]}, ${e})`}return r}return e}function SU(r,e=!1){let t=document.createElement("a");return eE("afterSanitizeAttributes",n=>{for(let i of["href","src"])if(n.hasAttribute(i)){let o=n.getAttribute(i);if(i==="href"&&o.startsWith("#"))continue;if(t.href=o,!r.includes(t.protocol.replace(/:$/,""))){if(e&&i==="src"&&t.href.startsWith("data:"))continue;n.removeAttribute(i)}}}),me(()=>{tE("afterSanitizeAttributes")})}var nae=[ye.http,ye.https,ye.command],CU=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]),iae=Object.freeze({ALLOWED_TAGS:["a","button","blockquote","code","div","h1","h2","h3","h4","h5","h6","hr","input","label","li","p","pre","select","small","span","strong","textarea","ul","ol"],ALLOWED_ATTR:["href","data-href","data-command","target","title","name","src","alt","class","id","role","tabindex","style","data-code","width","height","align","x-dispatch","required","checked","placeholder","type","start"],RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,RETURN_TRUSTED_TYPE:!0});var Lm=class r extends T{_subscriptions=new X;_keyStatus;static instance;constructor(){super(),this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(z.runAndSubscribe(U1,({window:e,disposables:t})=>this.registerListeners(e,t),{window:We,disposables:this._subscriptions}))}registerListeners(e,t){t.add(U(e,"keydown",n=>{if(n.defaultPrevented)return;let i=new it(n);if(!(i.keyCode===6&&n.repeat)){if(n.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(n.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(n.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(n.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(i.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=n.altKey,this._keyStatus.ctrlKey=n.ctrlKey,this._keyStatus.metaKey=n.metaKey,this._keyStatus.shiftKey=n.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=n,this.fire(this._keyStatus))}},!0)),t.add(U(e,"keyup",n=>{n.defaultPrevented||(!n.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!n.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!n.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!n.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=n.altKey,this._keyStatus.ctrlKey=n.ctrlKey,this._keyStatus.metaKey=n.metaKey,this._keyStatus.shiftKey=n.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=n,this.fire(this._keyStatus)))},!0)),t.add(U(e.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(U(e.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(U(e.document.body,"mousemove",n=>{n.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),t.add(U(e,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}get isModifierPressed(){return this._keyStatus.altKey||this._keyStatus.ctrlKey||this._keyStatus.metaKey||this._keyStatus.shiftKey}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return r.instance||(r.instance=new r),r.instance}dispose(){super.dispose(),this._subscriptions.dispose()}};var oE=class extends N{constructor(t,n){super();this.element=t;this.callbacks=n;this.registerListeners()}counter=0;dragStartTime=0;registerListeners(){this.callbacks.onDragStart&&this._register(U(this.element,ee.DRAG_START,t=>{this.callbacks.onDragStart?.(t)})),this.callbacks.onDrag&&this._register(U(this.element,ee.DRAG,t=>{this.callbacks.onDrag?.(t)})),this._register(U(this.element,ee.DRAG_ENTER,t=>{this.counter++,this.dragStartTime=t.timeStamp,this.callbacks.onDragEnter?.(t)})),this._register(U(this.element,ee.DRAG_OVER,t=>{t.preventDefault(),this.callbacks.onDragOver?.(t,t.timeStamp-this.dragStartTime)})),this._register(U(this.element,ee.DRAG_LEAVE,t=>{this.counter--,this.counter===0&&(this.dragStartTime=0,this.callbacks.onDragLeave?.(t))})),this._register(U(this.element,ee.DRAG_END,t=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDragEnd?.(t)})),this._register(U(this.element,ee.DROP,t=>{this.counter=0,this.dragStartTime=0,this.callbacks.onDrop?.(t)}))}},Bj=/(?<tag>[\w\-]+)?(?:#(?<id>[\w\-]+))?(?<class>(?:\.(?:[\w\-]+))*)(?:@(?<name>(?:[\w\_])+))?/;function Mm(r,...e){let t,n;Array.isArray(e[0])?(t={},n=e[0]):(t=e[0]||{},n=e[1]);let i=Bj.exec(r);if(!i||!i.groups)throw new Error("Bad use of h");let o=i.groups.tag||"div",s=document.createElement(o);i.groups.id&&(s.id=i.groups.id);let a=[];if(i.groups.class)for(let d of i.groups.class.split("."))d!==""&&a.push(d);if(t.className!==void 0)for(let d of t.className.split("."))d!==""&&a.push(d);a.length>0&&(s.className=a.join(" "));let l={};if(i.groups.name&&(l[i.groups.name]=s),n)for(let d of n)Yn(d)?s.appendChild(d):typeof d=="string"?s.append(d):"root"in d&&(Object.assign(l,d),s.appendChild(d.root));for(let[d,c]of Object.entries(t))if(d!=="className")if(d==="style")for(let[p,h]of Object.entries(c))s.style.setProperty(tU(p),typeof h=="number"?h+"px":""+h);else d==="tabIndex"?s.tabIndex=c:s.setAttribute(tU(d),c.toString());return l.root=s,l}function tU(r){return r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function uE(r,e,t){for(let{name:n,value:i}of r.attributes)(!t||t.includes(n))&&e.setAttribute(n,i)}function Wj(r,e,t){let n=r.getAttribute(t);n?e.setAttribute(t,n):e.removeAttribute(t)}function pE(r,e,t){uE(r,e,t);let n=new X;return n.add(dE.observe(r,n,{attributes:!0,attributeFilter:t})(i=>{for(let o of i)o.type==="attributes"&&o.attributeName&&Wj(r,e,o.attributeName)})),n}function is(r){return r.tagName.toLowerCase()==="input"||r.tagName.toLowerCase()==="textarea"||Yn(r)&&!!r.editContext}function be(r,e,t){let n=null,i=null;if(typeof t.value=="function"?(n="value",i=t.value,i.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",i=t.get),!i)throw new Error("not supported");let o=`$memoize$${e}`;t[n]=function(...s){return this.hasOwnProperty(o)||Object.defineProperty(this,o,{configurable:!1,enumerable:!1,writable:!1,value:i.apply(this,s)}),this[o]}}var Rt;(o=>(o.Tap="-monaco-gesturetap",o.Change="-monaco-gesturechange",o.Start="-monaco-gesturestart",o.End="-monaco-gesturesend",o.Contextmenu="-monaco-gesturecontextmenu"))(Rt||={});var Fo=class Fo extends N{static SCROLL_FRICTION=-.005;static INSTANCE;static HOLD_DELAY=700;dispatched=!1;targets=new mi;ignoreTargets=new mi;handle;activeTouches;_lastSetTapCountTime;static CLEAR_TAP_COUNT_TIME=400;constructor(){super(),this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(z.runAndSubscribe(U1,({window:e,disposables:t})=>{t.add(U(e.document,"touchstart",n=>this.onTouchStart(n),{passive:!1})),t.add(U(e.document,"touchend",n=>this.onTouchEnd(e,n))),t.add(U(e.document,"touchmove",n=>this.onTouchMove(n),{passive:!1}))},{window:We,disposables:this._store}))}static addTarget(e){if(!Fo.isTouchDevice())return N.None;Fo.INSTANCE||(Fo.INSTANCE=uu(new Fo));let t=Fo.INSTANCE.targets.push(e);return me(t)}static ignoreTarget(e){if(!Fo.isTouchDevice())return N.None;Fo.INSTANCE||(Fo.INSTANCE=uu(new Fo));let t=Fo.INSTANCE.ignoreTargets.push(e);return me(t)}static isTouchDevice(){return"ontouchstart"in We||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,i=e.targetTouches.length;n<i;n++){let o=e.targetTouches.item(n);this.activeTouches[o.identifier]={id:o.identifier,initialTarget:o.target,initialTimeStamp:t,initialPageX:o.pageX,initialPageY:o.pageY,rollingTimestamps:[t],rollingPageX:[o.pageX],rollingPageY:[o.pageY]};let s=this.newGestureEvent(Rt.Start,o.target);s.pageX=o.pageX,s.pageY=o.pageY,this.dispatchEvent(s)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){let n=Date.now(),i=Object.keys(this.activeTouches).length;for(let o=0,s=t.changedTouches.length;o<s;o++){let a=t.changedTouches.item(o);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("move of an UNKNOWN touch",a);continue}let l=this.activeTouches[a.identifier],d=Date.now()-l.initialTimeStamp;if(d<Fo.HOLD_DELAY&&Math.abs(l.initialPageX-Mo(l.rollingPageX))<30&&Math.abs(l.initialPageY-Mo(l.rollingPageY))<30){let c=this.newGestureEvent(Rt.Tap,l.initialTarget);c.pageX=Mo(l.rollingPageX),c.pageY=Mo(l.rollingPageY),this.dispatchEvent(c)}else if(d>=Fo.HOLD_DELAY&&Math.abs(l.initialPageX-Mo(l.rollingPageX))<30&&Math.abs(l.initialPageY-Mo(l.rollingPageY))<30){let c=this.newGestureEvent(Rt.Contextmenu,l.initialTarget);c.pageX=Mo(l.rollingPageX),c.pageY=Mo(l.rollingPageY),this.dispatchEvent(c)}else if(i===1){let c=Mo(l.rollingPageX),p=Mo(l.rollingPageY),h=Mo(l.rollingTimestamps)-l.rollingTimestamps[0],g=c-l.rollingPageX[0],f=p-l.rollingPageY[0],m=[...this.targets].filter(b=>l.initialTarget instanceof Node&&b.contains(l.initialTarget));this.inertia(e,m,n,Math.abs(g)/h,g>0?1:-1,c,Math.abs(f)/h,f>0?1:-1,p)}this.dispatchEvent(this.newGestureEvent(Rt.End,l.initialTarget)),delete this.activeTouches[a.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){let n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===Rt.Tap){let t=new Date().getTime(),n=0;t-this._lastSetTapCountTime>Fo.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===Rt.Change||e.type===Rt.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(let n of this.ignoreTargets)if(n.contains(e.initialTarget))return;let t=[];for(let n of this.targets)if(n.contains(e.initialTarget)){let i=0,o=e.initialTarget;for(;o&&o!==n;)i++,o=o.parentElement;t.push([i,n])}t.sort((n,i)=>n[0]-i[0]);for(let[n,i]of t)i.dispatchEvent(e),this.dispatched=!0}}inertia(e,t,n,i,o,s,a,l,d){this.handle=Ai(e,()=>{let c=Date.now(),p=c-n,h=0,g=0,f=!0;i+=Fo.SCROLL_FRICTION*p,a+=Fo.SCROLL_FRICTION*p,i>0&&(f=!1,h=o*i*p),a>0&&(f=!1,g=l*a*p);let m=this.newGestureEvent(Rt.Change);m.translationX=h,m.translationY=g,t.forEach(b=>b.dispatchEvent(m)),f||this.inertia(e,t,c,i,o,s+h,a,l,d+g)})}onTouchMove(e){let t=Date.now();for(let n=0,i=e.changedTouches.length;n<i;n++){let o=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(o.identifier))){console.warn("end of an UNKNOWN touch",o);continue}let s=this.activeTouches[o.identifier],a=this.newGestureEvent(Rt.Change,s.initialTarget);a.translationX=o.pageX-Mo(s.rollingPageX),a.translationY=o.pageY-Mo(s.rollingPageY),a.pageX=o.pageX,a.pageY=o.pageY,this.dispatchEvent(a),s.rollingPageX.length>3&&(s.rollingPageX.shift(),s.rollingPageY.shift(),s.rollingTimestamps.shift()),s.rollingPageX.push(o.pageX),s.rollingPageY.push(o.pageY),s.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};_([be],Fo,"isTouchDevice",1);var Jn=Fo;var He=class{emitter;get event(){return this.emitter.event}constructor(e,t,n){let i=o=>this.emitter.fire(o);this.emitter=new T({onWillAddFirstListener:()=>e.addEventListener(t,i,n),onDidRemoveLastListener:()=>e.removeEventListener(t,i,n)})}dispose(){this.emitter.dispose()}};var Vj=!1;var Hj=4,Uj=new T;var zj=300,Kj=new T;var My=class{constructor(e){this.el=e}disposables=new X;get onPointerMove(){return this.disposables.add(new He(Ee(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new He(Ee(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}};_([be],My.prototype,"onPointerMove",1),_([be],My.prototype,"onPointerUp",1);var Oy=class{constructor(e){this.el=e}disposables=new X;get onPointerMove(){return this.disposables.add(new He(this.el,Rt.Change)).event}get onPointerUp(){return this.disposables.add(new He(this.el,Rt.End)).event}dispose(){this.disposables.dispose()}};_([be],Oy.prototype,"onPointerMove",1),_([be],Oy.prototype,"onPointerUp",1);var Om=class{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}};_([be],Om.prototype,"onPointerMove",1),_([be],Om.prototype,"onPointerUp",1);var xU="pointer-events-disabled",Ul=class r extends N{el;layoutProvider;orientation;size;hoverDelay=zj;hoverDelayer=this._register(new Vn(this.hoverDelay));_state=3;onDidEnablementChange=this._register(new T);_onDidStart=this._register(new T);_onDidChange=this._register(new T);_onDidReset=this._register(new T);_onDidEnd=this._register(new T);orthogonalStartSashDisposables=this._register(new X);_orthogonalStartSash;orthogonalStartDragHandleDisposables=this._register(new X);_orthogonalStartDragHandle;orthogonalEndSashDisposables=this._register(new X);_orthogonalEndSash;orthogonalEndDragHandleDisposables=this._register(new X);_orthogonalEndDragHandle;get state(){return this._state}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}set state(e){this._state!==e&&(this.el.classList.toggle("disabled",e===0),this.el.classList.toggle("minimum",e===1),this.el.classList.toggle("maximum",e===2),this._state=e,this.onDidEnablementChange.fire(e))}onDidStart=this._onDidStart.event;onDidChange=this._onDidChange.event;onDidReset=this._onDidReset.event;onDidEnd=this._onDidEnd.event;linkedSash=void 0;set orthogonalStartSash(e){if(this._orthogonalStartSash!==e){if(this.orthogonalStartDragHandleDisposables.clear(),this.orthogonalStartSashDisposables.clear(),e){let t=n=>{this.orthogonalStartDragHandleDisposables.clear(),n!==0&&(this._orthogonalStartDragHandle=q(this.el,ie(".orthogonal-drag-handle.start")),this.orthogonalStartDragHandleDisposables.add(me(()=>this._orthogonalStartDragHandle.remove())),this.orthogonalStartDragHandleDisposables.add(new He(this._orthogonalStartDragHandle,"mouseenter")).event(()=>r.onMouseEnter(e),void 0,this.orthogonalStartDragHandleDisposables),this.orthogonalStartDragHandleDisposables.add(new He(this._orthogonalStartDragHandle,"mouseleave")).event(()=>r.onMouseLeave(e),void 0,this.orthogonalStartDragHandleDisposables))};this.orthogonalStartSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalStartSash=e}}set orthogonalEndSash(e){if(this._orthogonalEndSash!==e){if(this.orthogonalEndDragHandleDisposables.clear(),this.orthogonalEndSashDisposables.clear(),e){let t=n=>{this.orthogonalEndDragHandleDisposables.clear(),n!==0&&(this._orthogonalEndDragHandle=q(this.el,ie(".orthogonal-drag-handle.end")),this.orthogonalEndDragHandleDisposables.add(me(()=>this._orthogonalEndDragHandle.remove())),this.orthogonalEndDragHandleDisposables.add(new He(this._orthogonalEndDragHandle,"mouseenter")).event(()=>r.onMouseEnter(e),void 0,this.orthogonalEndDragHandleDisposables),this.orthogonalEndDragHandleDisposables.add(new He(this._orthogonalEndDragHandle,"mouseleave")).event(()=>r.onMouseLeave(e),void 0,this.orthogonalEndDragHandleDisposables))};this.orthogonalEndSashDisposables.add(e.onDidEnablementChange.event(t,this)),t(e.state)}this._orthogonalEndSash=e}}constructor(e,t,n){super(),this.el=q(e,ie(".monaco-sash")),n.orthogonalEdge&&this.el.classList.add(`orthogonal-edge-${n.orthogonalEdge}`),Pe&&this.el.classList.add("mac");let i=this._register(new He(this.el,"mousedown")).event;this._register(i(p=>this.onPointerStart(p,new My(e)),this));let o=this._register(new He(this.el,"dblclick")).event;this._register(o(this.onPointerDoublePress,this));let s=this._register(new He(this.el,"mouseenter")).event;this._register(s(()=>r.onMouseEnter(this)));let a=this._register(new He(this.el,"mouseleave")).event;this._register(a(()=>r.onMouseLeave(this))),this._register(Jn.addTarget(this.el));let l=this._register(new He(this.el,Rt.Start)).event;this._register(l(p=>this.onPointerStart(p,new Oy(this.el)),this));let d=this._register(new He(this.el,Rt.Tap)).event,c;this._register(d(p=>{if(c){clearTimeout(c),c=void 0,this.onPointerDoublePress(p);return}clearTimeout(c),c=setTimeout(()=>c=void 0,250)},this)),typeof n.size=="number"?(this.size=n.size,n.orientation===0?this.el.style.width=`${this.size}px`:this.el.style.height=`${this.size}px`):(this.size=Hj,this._register(Uj.event(p=>{this.size=p,this.layout()}))),this._register(Kj.event(p=>this.hoverDelay=p)),this.layoutProvider=t,this.orthogonalStartSash=n.orthogonalStartSash,this.orthogonalEndSash=n.orthogonalEndSash,this.orientation=n.orientation||0,this.orientation===1?(this.el.classList.add("horizontal"),this.el.classList.remove("vertical")):(this.el.classList.remove("horizontal"),this.el.classList.add("vertical")),this.el.classList.toggle("debug",Vj),this.layout()}onPointerStart(e,t){qe.stop(e);let n=!1;if(!e.__orthogonalSashEvent){let f=this.getOrthogonalSash(e);f&&(n=!0,e.__orthogonalSashEvent=!0,f.onPointerStart(e,new Om(t)))}if(this.linkedSash&&!e.__linkedSashEvent&&(e.__linkedSashEvent=!0,this.linkedSash.onPointerStart(e,new Om(t))),!this.state)return;let i=this.el.ownerDocument.getElementsByTagName("iframe");for(let f of i)f.classList.add(xU);let o=e.pageX,s=e.pageY,a=e.altKey,l={startX:o,currentX:o,startY:s,currentY:s,altKey:a};this.el.classList.add("active"),this._onDidStart.fire(l);let d=No(this.el),c=()=>{let f="";n?f="all-scroll":this.orientation===1?this.state===1?f="s-resize":this.state===2?f="n-resize":f=Pe?"row-resize":"ns-resize":this.state===1?f="e-resize":this.state===2?f="w-resize":f=Pe?"col-resize":"ew-resize",d.textContent=`* { cursor: ${f} !important; }`},p=new X;c(),n||this.onDidEnablementChange.event(c,null,p);let h=f=>{qe.stop(f,!1);let m={startX:o,currentX:f.pageX,startY:s,currentY:f.pageY,altKey:a};this._onDidChange.fire(m)},g=f=>{qe.stop(f,!1),d.remove(),this.el.classList.remove("active"),this._onDidEnd.fire(),p.dispose();for(let m of i)m.classList.remove(xU)};t.onPointerMove(h,null,p),t.onPointerUp(g,null,p),p.add(t)}onPointerDoublePress(e){let t=this.getOrthogonalSash(e);t&&t._onDidReset.fire(),this.linkedSash&&this.linkedSash._onDidReset.fire(),this._onDidReset.fire()}static onMouseEnter(e,t=!1){e.el.classList.contains("active")?(e.hoverDelayer.cancel(),e.el.classList.add("hover")):e.hoverDelayer.trigger(()=>e.el.classList.add("hover"),e.hoverDelay).then(void 0,()=>{}),!t&&e.linkedSash&&r.onMouseEnter(e.linkedSash,!0)}static onMouseLeave(e,t=!1){e.hoverDelayer.cancel(),e.el.classList.remove("hover"),!t&&e.linkedSash&&r.onMouseLeave(e.linkedSash,!0)}clearSashHoverState(){r.onMouseLeave(this)}layout(){if(this.orientation===0){let e=this.layoutProvider;this.el.style.left=e.getVerticalSashLeft(this)-this.size/2+"px",e.getVerticalSashTop&&(this.el.style.top=e.getVerticalSashTop(this)+"px"),e.getVerticalSashHeight&&(this.el.style.height=e.getVerticalSashHeight(this)+"px")}else{let e=this.layoutProvider;this.el.style.top=e.getHorizontalSashTop(this)-this.size/2+"px",e.getHorizontalSashLeft&&(this.el.style.left=e.getHorizontalSashLeft(this)+"px"),e.getHorizontalSashWidth&&(this.el.style.width=e.getHorizontalSashWidth(this)+"px")}}getOrthogonalSash(e){let t=e.initialTarget??e.target;if(!(!t||!Yn(t))&&t.classList.contains("orthogonal-drag-handle"))return t.classList.contains("start")?this.orthogonalStartSash:this.orthogonalEndSash}dispose(){super.dispose(),this.el.remove()}};function hE(r){if(!r||typeof r!="object"||r instanceof RegExp)return r;let e=Array.isArray(r)?[]:{};return Object.entries(r).forEach(([t,n])=>{e[t]=n&&typeof n=="object"?hE(n):n}),e}var Gj=Object.prototype.hasOwnProperty;function Q1(r,e){return X1(r,e,new Set)}function X1(r,e,t){if(ln(r))return r;let n=e(r);if(typeof n<"u")return n;if(Array.isArray(r)){let i=[];for(let o of r)i.push(X1(o,e,t));return i}if(tn(r)){if(t.has(r))throw new Error("Cannot clone recursive data-structure");t.add(r);let i={};for(let o in r)Gj.call(r,o)&&(i[o]=X1(r[o],e,t));return t.delete(r),i}return r}function Pm(r,e,t=!0){return tn(r)?(tn(e)&&Object.keys(e).forEach(n=>{n in r?t&&(tn(r[n])&&tn(e[n])?Pm(r[n],e[n],t):r[n]=e[n]):r[n]=e[n]}),r):e}function wn(r,e){if(r===e)return!0;if(r==null||e===null||e===void 0||typeof r!=typeof e||typeof r!="object"||Array.isArray(r)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(r)){if(r.length!==e.length)return!1;for(t=0;t<r.length;t++)if(!wn(r[t],e[t]))return!1}else{let i=[];for(n in r)i.push(n);i.sort();let o=[];for(n in e)o.push(n);if(o.sort(),!wn(i,o))return!1;for(t=0;t<i.length;t++)if(!wn(r[i[t]],e[i[t]]))return!1}return!0}var gE=class extends N{_onDidChange=this._register(new T);onDidChange=this._onDidChange.event;_referenceDomElement;_width;_height;_resizeObserver;constructor(e,t){super(),this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null,t=()=>{e?this.observe({width:e.width,height:e.height}):this.observe()},n=!1,i=!1,o=()=>{if(n&&!i)try{n=!1,i=!0,t()}finally{Ai(Ee(this._referenceDomElement),()=>{i=!1,o()})}};this._resizeObserver=new ResizeObserver(s=>{s&&s[0]&&s[0].contentRect?e={width:s[0].contentRect.width,height:s[0].contentRect.height}:e=null,n=!0,o()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,i=0;t?(n=t.width,i=t.height):this._referenceDomElement&&(n=this._referenceDomElement.clientWidth,i=this._referenceDomElement.clientHeight),n=Math.max(5,n),i=Math.max(5,i),(this._width!==n||this._height!==i)&&(this._width=n,this._height=i,e&&this._onDidChange.fire())}};var Z1=class extends N{_onDidChange=this._register(new T);onDidChange=this._onDidChange.event;_listener;_mediaQueryList;constructor(e){super(),this._listener=()=>this._handleChange(e,!0),this._mediaQueryList=null,this._handleChange(e,!1)}_handleChange(e,t){this._mediaQueryList?.removeEventListener("change",this._listener),this._mediaQueryList=e.matchMedia(`(resolution: ${e.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),t&&this._onDidChange.fire()}},J1=class extends N{_onDidChange=this._register(new T);onDidChange=this._onDidChange.event;_value;get value(){return this._value}constructor(e){super(),this._value=this._getPixelRatio(e);let t=this._register(new Z1(e));this._register(t.onDidChange(()=>{this._value=this._getPixelRatio(e),this._onDidChange.fire(this._value)}))}_getPixelRatio(e){let t=document.createElement("canvas").getContext("2d"),n=e.devicePixelRatio||1,i=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/i}},eM=class{mapWindowIdToPixelRatioMonitor=new Map;_getOrCreatePixelRatioMonitor(e){let t=xu(e),n=this.mapWindowIdToPixelRatioMonitor.get(t);return n||(n=uu(new J1(e)),this.mapWindowIdToPixelRatioMonitor.set(t,n),uu(z.once(iU)(({vscodeWindowId:i})=>{i===t&&(n?.dispose(),this.mapWindowIdToPixelRatioMonitor.delete(t))}))),n}getInstance(e){return this._getOrCreatePixelRatioMonitor(e)}},Nm=new eM;var ch=class{constructor(e){this.domNode=e}_maxWidth="";_width="";_height="";_top="";_left="";_bottom="";_right="";_paddingTop="";_paddingLeft="";_paddingBottom="";_paddingRight="";_fontFamily="";_fontWeight="";_fontSize="";_fontStyle="";_fontFeatureSettings="";_fontVariationSettings="";_textDecoration="";_lineHeight="";_letterSpacing="";_className="";_display="";_position="";_visibility="";_color="";_backgroundColor="";_layerHint=!1;_contain="none";_boxShadow="";setMaxWidth(e){let t=os(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){let t=os(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){let t=os(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){let t=os(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){let t=os(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){let t=os(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){let t=os(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingTop(e){let t=os(e);this._paddingTop!==t&&(this._paddingTop=t,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(e){let t=os(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(e){let t=os(e);this._paddingBottom!==t&&(this._paddingBottom=t,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(e){let t=os(e);this._paddingRight!==t&&(this._paddingRight=t,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){let t=os(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){let t=os(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){let t=os(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};function os(r){return typeof r=="number"?`${r}px`:r}function Ye(r){return new ch(r)}function EU(r){let e=jj(r);if(e&&e.length>0)return new Uint32Array(e)}var rs=0,_u=new Uint32Array(10);function jj(r){if(rs=0,zl(r,tM,4352),rs>0||(zl(r,nM,4449),rs>0)||(zl(r,iM,4520),rs>0)||(zl(r,uh,12593),rs))return _u.subarray(0,rs);if(r>=44032&&r<=55203){let e=r-44032,t=e%588,n=Math.floor(e/588),i=Math.floor(t/28),o=t%28-1;if(n<tM.length?zl(n,tM,0):4352+n-12593<uh.length&&zl(4352+n,uh,12593),i<nM.length?zl(i,nM,0):4449+i-12593<uh.length&&zl(4449+i-12593,uh,12593),o>=0&&(o<iM.length?zl(o,iM,0):4520+o-12593<uh.length&&zl(4520+o-12593,uh,12593)),rs>0)return _u.subarray(0,rs)}}function zl(r,e,t){r>=t&&r<t+e.length&&$j(e[r-t])}function $j(r){r!==0&&(_u[rs++]=r&255,r>>8&&(_u[rs++]=r>>8&255),r>>16&&(_u[rs++]=r>>16&255))}var tM=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),nM=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),iM=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),uh=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function Fm(...r){return function(e,t){for(let n=0,i=r.length;n<i;n++){let o=r[n](e,t);if(o)return o}return null}}var Jae=DU.bind(void 0,!1),ku=DU.bind(void 0,!0);function DU(r,e,t){if(!t||t.length<e.length)return null;let n;return r?n=gu(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function vE(r,e){let t=e.toLowerCase().indexOf(r.toLowerCase());return t===-1?null:[{start:t,end:t+r.length}]}function cM(r,e){return sM(r.toLowerCase(),e.toLowerCase(),0,0)}function sM(r,e,t,n){if(t===r.length)return[];if(n===e.length)return null;if(r[t]===e[n]){let i=null;return(i=sM(r,e,t+1,n+1))?hM({start:n,end:n+1},i):null}return sM(r,e,t,n+1)}function uM(r){return 97<=r&&r<=122}function Ay(r){return 65<=r&&r<=90}function pM(r){return 48<=r&&r<=57}function LU(r){return r===32||r===9||r===10||r===13}var kU=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(r=>kU.add(r.charCodeAt(0)));function bE(r){return LU(r)||kU.has(r)}function TU(r,e){return r===e||bE(r)&&bE(e)}var oM=new Map;function wU(r){if(oM.has(r))return oM.get(r);let e,t=EU(r);return t&&(e=t),oM.set(r,e),e}function RU(r){return uM(r)||Ay(r)||pM(r)}function hM(r,e){return e.length===0?e=[r]:r.end===e[0].start?e[0].start=r.start:e.unshift(r),e}function MU(r,e){for(let t=e;t<r.length;t++){let n=r.charCodeAt(t);if(Ay(n)||pM(n)||t>0&&!RU(r.charCodeAt(t-1)))return t}return r.length}function aM(r,e,t,n){if(t===r.length)return[];if(n===e.length)return null;if(r[t]!==e[n].toLowerCase())return null;{let i=null,o=n+1;for(i=aM(r,e,t+1,n+1);!i&&(o=MU(e,o))<e.length;)i=aM(r,e,t+1,o),o++;return i===null?null:hM({start:n,end:n+1},i)}}function qj(r){let e=0,t=0,n=0,i=0,o=0;for(let c=0;c<r.length;c++)o=r.charCodeAt(c),Ay(o)&&e++,uM(o)&&t++,RU(o)&&n++,pM(o)&&i++;let s=e/r.length,a=t/r.length,l=n/r.length,d=i/r.length;return{upperPercent:s,lowerPercent:a,alphaPercent:l,numericPercent:d}}function Yj(r){let{upperPercent:e,lowerPercent:t}=r;return t===0&&e>.6}function Xj(r){let{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:i}=r;return t>.2&&e<.8&&n>.6&&i<.2}function Qj(r){let e=0,t=0,n=0,i=0;for(let o=0;o<r.length;o++)n=r.charCodeAt(o),Ay(n)&&e++,uM(n)&&t++,LU(n)&&i++;return(e===0||t===0)&&i===0?r.length<=30:e<=5}function Ny(r,e){if(!e||(e=e.trim(),e.length===0)||!Qj(r))return null;e.length>60&&(e=e.substring(0,60));let t=qj(e);if(!Xj(t)){if(!Yj(t))return null;e=e.toLowerCase()}let n=null,i=0;for(r=r.toLowerCase();i<e.length&&(n=aM(r,e,0,i))===null;)i=MU(e,i+1);return n}function Ru(r,e,t=!1){if(!e||e.length===0)return null;let n=null,i=0;for(r=r.toLowerCase(),e=e.toLowerCase();i<e.length&&(n=lM(r,e,0,i,t),n===null);)i=OU(e,i+1);return n}function lM(r,e,t,n,i){let o=0;if(t===r.length)return[];if(n===e.length)return null;if(!TU(r.charCodeAt(t),e.charCodeAt(n))){let l=wU(r.charCodeAt(t));if(!l)return null;for(let d=0;d<l.length;d++)if(!TU(l[d],e.charCodeAt(n+d)))return null;o+=l.length-1}let s=null,a=n+o+1;if(s=lM(r,e,t+1,a,i),!i)for(;!s&&(a=OU(e,a))<e.length;)s=lM(r,e,t+1,a,i),a++;if(!s)return null;if(r.charCodeAt(t)!==e.charCodeAt(n)){let l=wU(r.charCodeAt(t));if(!l)return s;for(let d=0;d<l.length;d++)if(l[d]!==e.charCodeAt(n+d))return s}return hM({start:n,end:n+o+1},s)}function OU(r,e){for(let t=e;t<r.length;t++)if(bE(r.charCodeAt(t))||t>0&&bE(r.charCodeAt(t-1)))return t;return r.length}var ele=Fm(ku,Ny,vE),tle=Fm(ku,Ny,cM),nle=new Po(1e4);function PU(r,e){let t=cc(r,r.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return t?yE(t):null}function AU(r,e,t,n,i,o){let s=Math.min(13,r.length);for(;t<s;t++){let a=cc(r,e,t,n,i,o,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(a)return a}return[0,o]}function yE(r){if(typeof r>"u")return[];let e=[],t=r[1];for(let n=r.length-1;n>1;n--){let i=r[n]+t,o=e[e.length-1];o&&o.end===i?o.end=i+1:e.push({start:i,end:i+1})}return e}var Lu=128;function gM(){let r=[],e=[];for(let t=0;t<=Lu;t++)e[t]=0;for(let t=0;t<=Lu;t++)r.push(e.slice(0));return r}function NU(r){let e=[];for(let t=0;t<=r;t++)e[t]=0;return e}var FU=NU(2*Lu),dM=NU(2*Lu),Kl=gM(),Du=gM(),Py=gM(),Zj=!1;function rM(r,e,t,n,i){function o(a,l,d=" "){for(;a.length<l;)a=d+a;return a}let s=` |   |${n.split("").map(a=>o(a,3)).join("|")}
`;for(let a=0;a<=t;a++)a===0?s+=" |":s+=`${e[a-1]}|`,s+=r[a].slice(0,i+1).map(l=>o(l.toString(),3)).join("|")+`
`;return s}function Jj(r,e,t,n){r=r.substr(e),t=t.substr(n),console.log(rM(Du,r,r.length,t,t.length)),console.log(rM(Py,r,r.length,t,t.length)),console.log(rM(Kl,r,r.length,t,t.length))}function mE(r,e){if(e<0||e>=r.length)return!1;let t=r.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!uy(t)}}function _U(r,e){if(e<0||e>=r.length)return!1;switch(r.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function fE(r,e,t){return e[r]!==t[r]}function mM(r,e,t,n,i,o,s=!1){for(;e<t&&i<o;)r[e]===n[i]&&(s&&(FU[e]=i),e+=1),i+=1;return e===t}var Zs;(t=>{t.Default=[-100,0];function e(n){return!n||n.length===2&&n[0]===-100&&n[1]===0}t.isDefault=e})(Zs||={});var ph=class{constructor(e,t){this.firstMatchCanBeWeak=e;this.boostFullMatch=t}static default={boostFullMatch:!0,firstMatchCanBeWeak:!1}};function cc(r,e,t,n,i,o,s=ph.default){let a=r.length>Lu?Lu:r.length,l=n.length>Lu?Lu:n.length;if(t>=a||o>=l||a-t>l-o||!mM(e,t,a,i,o,l,!0))return;e$(a,l,t,o,e,i);let d=1,c=1,p=t,h=o,g=[!1];for(d=1,p=t;p<a;d++,p++){let S=FU[p],x=dM[p],E=p+1<a?dM[p+1]:l;for(c=S-o+1,h=S;h<E;c++,h++){let w=Number.MIN_SAFE_INTEGER,P=!1;h<=x&&(w=t$(r,e,p,t,n,i,h,l,o,Kl[d-1][c-1]===0,g));let R=0;w!==Number.MAX_SAFE_INTEGER&&(P=!0,R=w+Du[d-1][c-1]);let O=h>S,M=O?Du[d][c-1]+(Kl[d][c-1]>0?-5:0):0,K=h>S+1&&Kl[d][c-1]>0,$=K?Du[d][c-2]+(Kl[d][c-2]>0?-5:0):0;if(K&&(!O||$>=M)&&(!P||$>=R))Du[d][c]=$,Py[d][c]=3,Kl[d][c]=0;else if(O&&(!P||M>=R))Du[d][c]=M,Py[d][c]=2,Kl[d][c]=0;else if(P)Du[d][c]=R,Py[d][c]=1,Kl[d][c]=Kl[d-1][c-1]+1;else throw new Error("not possible")}}if(Zj&&Jj(r,t,n,o),!g[0]&&!s.firstMatchCanBeWeak)return;d--,c--;let f=[Du[d][c],o],m=0,b=0;for(;d>=1;){let S=c;do{let x=Py[d][S];if(x===3)S=S-2;else if(x===2)S=S-1;else break}while(S>=1);m>1&&e[t+d-1]===i[o+c-1]&&!fE(S+o-1,n,i)&&m+1>Kl[d][S]&&(S=c),S===c?m++:m=1,b||(b=S),d--,c=S-1,f.push(c)}l-o===a&&s.boostFullMatch&&(f[0]+=2);let v=b-a;return f[0]-=v,f}function e$(r,e,t,n,i,o){let s=r-1,a=e-1;for(;s>=t&&a>=n;)i[s]===o[a]&&(dM[s]=a,s--),a--}function t$(r,e,t,n,i,o,s,a,l,d,c){if(e[t]!==o[s])return Number.MIN_SAFE_INTEGER;let p=1,h=!1;return s===t-n?p=r[t]===i[s]?7:5:fE(s,i,o)&&(s===0||!fE(s-1,i,o))?(p=r[t]===i[s]?7:5,h=!0):mE(o,s)&&(s===0||!mE(o,s-1))?p=5:(mE(o,s-1)||_U(o,s-1))&&(p=5,h=!0),p>1&&t===n&&(c[0]=!0),h||(h=fE(s,i,o)||mE(o,s-1)||_U(o,s-1)),t===n?s>l&&(p-=h?3:5):d?p+=h?2:0:p+=h?0:1,s+1===a&&(p-=h?3:5),p}function BU(r,e,t,n,i,o,s){return n$(r,e,t,n,i,o,!0,s)}function n$(r,e,t,n,i,o,s,a){let l=cc(r,e,t,n,i,o,a);if(l&&!s)return l;if(r.length>=3){let d=Math.min(7,r.length-1);for(let c=t+1;c<d;c++){let p=i$(r,c);if(p){let h=cc(p,p.toLowerCase(),t,n,i,o,a);h&&(h[0]-=3,(!l||h[0]>l[0])&&(l=h))}}}return l}function i$(r,e){if(e+1>=r.length)return;let t=r[e],n=r[e+1];if(t!==n)return r.slice(0,e)+n+t+r.slice(e+2)}var fM=Object.create(null);function I(r,e){if(xt(e)){let t=fM[e];if(t===void 0)throw new Error(`${r} references an unknown codicon: ${e}`);e=t}return fM[r]=e,{id:r}}function bM(){return fM}var WU={add:I("add",6e4),plus:I("plus",6e4),gistNew:I("gist-new",6e4),repoCreate:I("repo-create",6e4),lightbulb:I("lightbulb",60001),lightBulb:I("light-bulb",60001),repo:I("repo",60002),repoDelete:I("repo-delete",60002),gistFork:I("gist-fork",60003),repoForked:I("repo-forked",60003),gitPullRequest:I("git-pull-request",60004),gitPullRequestAbandoned:I("git-pull-request-abandoned",60004),recordKeys:I("record-keys",60005),keyboard:I("keyboard",60005),tag:I("tag",60006),gitPullRequestLabel:I("git-pull-request-label",60006),tagAdd:I("tag-add",60006),tagRemove:I("tag-remove",60006),person:I("person",60007),personFollow:I("person-follow",60007),personOutline:I("person-outline",60007),personFilled:I("person-filled",60007),gitBranch:I("git-branch",60008),gitBranchCreate:I("git-branch-create",60008),gitBranchDelete:I("git-branch-delete",60008),sourceControl:I("source-control",60008),mirror:I("mirror",60009),mirrorPublic:I("mirror-public",60009),star:I("star",60010),starAdd:I("star-add",60010),starDelete:I("star-delete",60010),starEmpty:I("star-empty",60010),comment:I("comment",60011),commentAdd:I("comment-add",60011),alert:I("alert",60012),warning:I("warning",60012),search:I("search",60013),searchSave:I("search-save",60013),logOut:I("log-out",60014),signOut:I("sign-out",60014),logIn:I("log-in",60015),signIn:I("sign-in",60015),eye:I("eye",60016),eyeUnwatch:I("eye-unwatch",60016),eyeWatch:I("eye-watch",60016),circleFilled:I("circle-filled",60017),primitiveDot:I("primitive-dot",60017),closeDirty:I("close-dirty",60017),debugBreakpoint:I("debug-breakpoint",60017),debugBreakpointDisabled:I("debug-breakpoint-disabled",60017),debugHint:I("debug-hint",60017),terminalDecorationSuccess:I("terminal-decoration-success",60017),primitiveSquare:I("primitive-square",60018),edit:I("edit",60019),pencil:I("pencil",60019),info:I("info",60020),issueOpened:I("issue-opened",60020),gistPrivate:I("gist-private",60021),gitForkPrivate:I("git-fork-private",60021),lock:I("lock",60021),mirrorPrivate:I("mirror-private",60021),close:I("close",60022),removeClose:I("remove-close",60022),x:I("x",60022),repoSync:I("repo-sync",60023),sync:I("sync",60023),clone:I("clone",60024),desktopDownload:I("desktop-download",60024),beaker:I("beaker",60025),microscope:I("microscope",60025),vm:I("vm",60026),deviceDesktop:I("device-desktop",60026),file:I("file",60027),fileText:I("file-text",60027),more:I("more",60028),ellipsis:I("ellipsis",60028),kebabHorizontal:I("kebab-horizontal",60028),mailReply:I("mail-reply",60029),reply:I("reply",60029),organization:I("organization",60030),organizationFilled:I("organization-filled",60030),organizationOutline:I("organization-outline",60030),newFile:I("new-file",60031),fileAdd:I("file-add",60031),newFolder:I("new-folder",60032),fileDirectoryCreate:I("file-directory-create",60032),trash:I("trash",60033),trashcan:I("trashcan",60033),history:I("history",60034),clock:I("clock",60034),folder:I("folder",60035),fileDirectory:I("file-directory",60035),symbolFolder:I("symbol-folder",60035),logoGithub:I("logo-github",60036),markGithub:I("mark-github",60036),github:I("github",60036),terminal:I("terminal",60037),console:I("console",60037),repl:I("repl",60037),zap:I("zap",60038),symbolEvent:I("symbol-event",60038),error:I("error",60039),stop:I("stop",60039),variable:I("variable",60040),symbolVariable:I("symbol-variable",60040),array:I("array",60042),symbolArray:I("symbol-array",60042),symbolModule:I("symbol-module",60043),symbolPackage:I("symbol-package",60043),symbolNamespace:I("symbol-namespace",60043),symbolObject:I("symbol-object",60043),symbolMethod:I("symbol-method",60044),symbolFunction:I("symbol-function",60044),symbolConstructor:I("symbol-constructor",60044),symbolBoolean:I("symbol-boolean",60047),symbolNull:I("symbol-null",60047),symbolNumeric:I("symbol-numeric",60048),symbolNumber:I("symbol-number",60048),symbolStructure:I("symbol-structure",60049),symbolStruct:I("symbol-struct",60049),symbolParameter:I("symbol-parameter",60050),symbolTypeParameter:I("symbol-type-parameter",60050),symbolKey:I("symbol-key",60051),symbolText:I("symbol-text",60051),symbolReference:I("symbol-reference",60052),goToFile:I("go-to-file",60052),symbolEnum:I("symbol-enum",60053),symbolValue:I("symbol-value",60053),symbolRuler:I("symbol-ruler",60054),symbolUnit:I("symbol-unit",60054),activateBreakpoints:I("activate-breakpoints",60055),archive:I("archive",60056),arrowBoth:I("arrow-both",60057),arrowDown:I("arrow-down",60058),arrowLeft:I("arrow-left",60059),arrowRight:I("arrow-right",60060),arrowSmallDown:I("arrow-small-down",60061),arrowSmallLeft:I("arrow-small-left",60062),arrowSmallRight:I("arrow-small-right",60063),arrowSmallUp:I("arrow-small-up",60064),arrowUp:I("arrow-up",60065),bell:I("bell",60066),bold:I("bold",60067),book:I("book",60068),bookmark:I("bookmark",60069),debugBreakpointConditionalUnverified:I("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:I("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:I("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:I("debug-breakpoint-data-unverified",60072),debugBreakpointData:I("debug-breakpoint-data",60073),debugBreakpointDataDisabled:I("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:I("debug-breakpoint-log-unverified",60074),debugBreakpointLog:I("debug-breakpoint-log",60075),debugBreakpointLogDisabled:I("debug-breakpoint-log-disabled",60075),briefcase:I("briefcase",60076),broadcast:I("broadcast",60077),browser:I("browser",60078),bug:I("bug",60079),calendar:I("calendar",60080),caseSensitive:I("case-sensitive",60081),check:I("check",60082),checklist:I("checklist",60083),chevronDown:I("chevron-down",60084),chevronLeft:I("chevron-left",60085),chevronRight:I("chevron-right",60086),chevronUp:I("chevron-up",60087),chromeClose:I("chrome-close",60088),chromeMaximize:I("chrome-maximize",60089),chromeMinimize:I("chrome-minimize",60090),chromeRestore:I("chrome-restore",60091),circleOutline:I("circle-outline",60092),circle:I("circle",60092),debugBreakpointUnverified:I("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:I("terminal-decoration-incomplete",60092),circleSlash:I("circle-slash",60093),circuitBoard:I("circuit-board",60094),clearAll:I("clear-all",60095),clippy:I("clippy",60096),closeAll:I("close-all",60097),cloudDownload:I("cloud-download",60098),cloudUpload:I("cloud-upload",60099),code:I("code",60100),collapseAll:I("collapse-all",60101),colorMode:I("color-mode",60102),commentDiscussion:I("comment-discussion",60103),creditCard:I("credit-card",60105),dash:I("dash",60108),dashboard:I("dashboard",60109),database:I("database",60110),debugContinue:I("debug-continue",60111),debugDisconnect:I("debug-disconnect",60112),debugPause:I("debug-pause",60113),debugRestart:I("debug-restart",60114),debugStart:I("debug-start",60115),debugStepInto:I("debug-step-into",60116),debugStepOut:I("debug-step-out",60117),debugStepOver:I("debug-step-over",60118),debugStop:I("debug-stop",60119),debug:I("debug",60120),deviceCameraVideo:I("device-camera-video",60121),deviceCamera:I("device-camera",60122),deviceMobile:I("device-mobile",60123),diffAdded:I("diff-added",60124),diffIgnored:I("diff-ignored",60125),diffModified:I("diff-modified",60126),diffRemoved:I("diff-removed",60127),diffRenamed:I("diff-renamed",60128),diff:I("diff",60129),diffSidebyside:I("diff-sidebyside",60129),discard:I("discard",60130),editorLayout:I("editor-layout",60131),emptyWindow:I("empty-window",60132),exclude:I("exclude",60133),extensions:I("extensions",60134),eyeClosed:I("eye-closed",60135),fileBinary:I("file-binary",60136),fileCode:I("file-code",60137),fileMedia:I("file-media",60138),filePdf:I("file-pdf",60139),fileSubmodule:I("file-submodule",60140),fileSymlinkDirectory:I("file-symlink-directory",60141),fileSymlinkFile:I("file-symlink-file",60142),fileZip:I("file-zip",60143),files:I("files",60144),filter:I("filter",60145),flame:I("flame",60146),foldDown:I("fold-down",60147),foldUp:I("fold-up",60148),fold:I("fold",60149),folderActive:I("folder-active",60150),folderOpened:I("folder-opened",60151),gear:I("gear",60152),gift:I("gift",60153),gistSecret:I("gist-secret",60154),gist:I("gist",60155),gitCommit:I("git-commit",60156),gitCompare:I("git-compare",60157),compareChanges:I("compare-changes",60157),gitMerge:I("git-merge",60158),githubAction:I("github-action",60159),githubAlt:I("github-alt",60160),globe:I("globe",60161),grabber:I("grabber",60162),graph:I("graph",60163),gripper:I("gripper",60164),heart:I("heart",60165),home:I("home",60166),horizontalRule:I("horizontal-rule",60167),hubot:I("hubot",60168),inbox:I("inbox",60169),issueReopened:I("issue-reopened",60171),issues:I("issues",60172),italic:I("italic",60173),jersey:I("jersey",60174),json:I("json",60175),kebabVertical:I("kebab-vertical",60176),key:I("key",60177),law:I("law",60178),lightbulbAutofix:I("lightbulb-autofix",60179),linkExternal:I("link-external",60180),link:I("link",60181),listOrdered:I("list-ordered",60182),listUnordered:I("list-unordered",60183),liveShare:I("live-share",60184),loading:I("loading",60185),location:I("location",60186),mailRead:I("mail-read",60187),mail:I("mail",60188),markdown:I("markdown",60189),megaphone:I("megaphone",60190),mention:I("mention",60191),milestone:I("milestone",60192),gitPullRequestMilestone:I("git-pull-request-milestone",60192),mortarBoard:I("mortar-board",60193),move:I("move",60194),multipleWindows:I("multiple-windows",60195),mute:I("mute",60196),noNewline:I("no-newline",60197),note:I("note",60198),octoface:I("octoface",60199),openPreview:I("open-preview",60200),package:I("package",60201),paintcan:I("paintcan",60202),pin:I("pin",60203),play:I("play",60204),run:I("run",60204),plug:I("plug",60205),preserveCase:I("preserve-case",60206),preview:I("preview",60207),project:I("project",60208),pulse:I("pulse",60209),question:I("question",60210),quote:I("quote",60211),radioTower:I("radio-tower",60212),reactions:I("reactions",60213),references:I("references",60214),refresh:I("refresh",60215),regex:I("regex",60216),remoteExplorer:I("remote-explorer",60217),remote:I("remote",60218),remove:I("remove",60219),replaceAll:I("replace-all",60220),replace:I("replace",60221),repoClone:I("repo-clone",60222),repoForcePush:I("repo-force-push",60223),repoPull:I("repo-pull",60224),repoPush:I("repo-push",60225),report:I("report",60226),requestChanges:I("request-changes",60227),rocket:I("rocket",60228),rootFolderOpened:I("root-folder-opened",60229),rootFolder:I("root-folder",60230),rss:I("rss",60231),ruby:I("ruby",60232),saveAll:I("save-all",60233),saveAs:I("save-as",60234),save:I("save",60235),screenFull:I("screen-full",60236),screenNormal:I("screen-normal",60237),searchStop:I("search-stop",60238),server:I("server",60240),settingsGear:I("settings-gear",60241),settings:I("settings",60242),shield:I("shield",60243),smiley:I("smiley",60244),sortPrecedence:I("sort-precedence",60245),splitHorizontal:I("split-horizontal",60246),splitVertical:I("split-vertical",60247),squirrel:I("squirrel",60248),starFull:I("star-full",60249),starHalf:I("star-half",60250),symbolClass:I("symbol-class",60251),symbolColor:I("symbol-color",60252),symbolConstant:I("symbol-constant",60253),symbolEnumMember:I("symbol-enum-member",60254),symbolField:I("symbol-field",60255),symbolFile:I("symbol-file",60256),symbolInterface:I("symbol-interface",60257),symbolKeyword:I("symbol-keyword",60258),symbolMisc:I("symbol-misc",60259),symbolOperator:I("symbol-operator",60260),symbolProperty:I("symbol-property",60261),wrench:I("wrench",60261),wrenchSubaction:I("wrench-subaction",60261),symbolSnippet:I("symbol-snippet",60262),tasklist:I("tasklist",60263),telescope:I("telescope",60264),textSize:I("text-size",60265),threeBars:I("three-bars",60266),thumbsdown:I("thumbsdown",60267),thumbsup:I("thumbsup",60268),tools:I("tools",60269),triangleDown:I("triangle-down",60270),triangleLeft:I("triangle-left",60271),triangleRight:I("triangle-right",60272),triangleUp:I("triangle-up",60273),twitter:I("twitter",60274),unfold:I("unfold",60275),unlock:I("unlock",60276),unmute:I("unmute",60277),unverified:I("unverified",60278),verified:I("verified",60279),versions:I("versions",60280),vmActive:I("vm-active",60281),vmOutline:I("vm-outline",60282),vmRunning:I("vm-running",60283),watch:I("watch",60284),whitespace:I("whitespace",60285),wholeWord:I("whole-word",60286),window:I("window",60287),wordWrap:I("word-wrap",60288),zoomIn:I("zoom-in",60289),zoomOut:I("zoom-out",60290),listFilter:I("list-filter",60291),listFlat:I("list-flat",60292),listSelection:I("list-selection",60293),selection:I("selection",60293),listTree:I("list-tree",60294),debugBreakpointFunctionUnverified:I("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:I("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:I("debug-breakpoint-function-disabled",60296),debugStackframeActive:I("debug-stackframe-active",60297),circleSmallFilled:I("circle-small-filled",60298),debugStackframeDot:I("debug-stackframe-dot",60298),terminalDecorationMark:I("terminal-decoration-mark",60298),debugStackframe:I("debug-stackframe",60299),debugStackframeFocused:I("debug-stackframe-focused",60299),debugBreakpointUnsupported:I("debug-breakpoint-unsupported",60300),symbolString:I("symbol-string",60301),debugReverseContinue:I("debug-reverse-continue",60302),debugStepBack:I("debug-step-back",60303),debugRestartFrame:I("debug-restart-frame",60304),debugAlt:I("debug-alt",60305),callIncoming:I("call-incoming",60306),callOutgoing:I("call-outgoing",60307),menu:I("menu",60308),expandAll:I("expand-all",60309),feedback:I("feedback",60310),gitPullRequestReviewer:I("git-pull-request-reviewer",60310),groupByRefType:I("group-by-ref-type",60311),ungroupByRefType:I("ungroup-by-ref-type",60312),account:I("account",60313),gitPullRequestAssignee:I("git-pull-request-assignee",60313),bellDot:I("bell-dot",60314),debugConsole:I("debug-console",60315),library:I("library",60316),output:I("output",60317),runAll:I("run-all",60318),syncIgnored:I("sync-ignored",60319),pinned:I("pinned",60320),githubInverted:I("github-inverted",60321),serverProcess:I("server-process",60322),serverEnvironment:I("server-environment",60323),pass:I("pass",60324),issueClosed:I("issue-closed",60324),stopCircle:I("stop-circle",60325),playCircle:I("play-circle",60326),record:I("record",60327),debugAltSmall:I("debug-alt-small",60328),vmConnect:I("vm-connect",60329),cloud:I("cloud",60330),merge:I("merge",60331),export:I("export",60332),graphLeft:I("graph-left",60333),magnet:I("magnet",60334),notebook:I("notebook",60335),redo:I("redo",60336),checkAll:I("check-all",60337),pinnedDirty:I("pinned-dirty",60338),passFilled:I("pass-filled",60339),circleLargeFilled:I("circle-large-filled",60340),circleLarge:I("circle-large",60341),circleLargeOutline:I("circle-large-outline",60341),combine:I("combine",60342),gather:I("gather",60342),table:I("table",60343),variableGroup:I("variable-group",60344),typeHierarchy:I("type-hierarchy",60345),typeHierarchySub:I("type-hierarchy-sub",60346),typeHierarchySuper:I("type-hierarchy-super",60347),gitPullRequestCreate:I("git-pull-request-create",60348),runAbove:I("run-above",60349),runBelow:I("run-below",60350),notebookTemplate:I("notebook-template",60351),debugRerun:I("debug-rerun",60352),workspaceTrusted:I("workspace-trusted",60353),workspaceUntrusted:I("workspace-untrusted",60354),workspaceUnknown:I("workspace-unknown",60355),terminalCmd:I("terminal-cmd",60356),terminalDebian:I("terminal-debian",60357),terminalLinux:I("terminal-linux",60358),terminalPowershell:I("terminal-powershell",60359),terminalTmux:I("terminal-tmux",60360),terminalUbuntu:I("terminal-ubuntu",60361),terminalBash:I("terminal-bash",60362),arrowSwap:I("arrow-swap",60363),copy:I("copy",60364),personAdd:I("person-add",60365),filterFilled:I("filter-filled",60366),wand:I("wand",60367),debugLineByLine:I("debug-line-by-line",60368),inspect:I("inspect",60369),layers:I("layers",60370),layersDot:I("layers-dot",60371),layersActive:I("layers-active",60372),compass:I("compass",60373),compassDot:I("compass-dot",60374),compassActive:I("compass-active",60375),azure:I("azure",60376),issueDraft:I("issue-draft",60377),gitPullRequestClosed:I("git-pull-request-closed",60378),gitPullRequestDraft:I("git-pull-request-draft",60379),debugAll:I("debug-all",60380),debugCoverage:I("debug-coverage",60381),runErrors:I("run-errors",60382),folderLibrary:I("folder-library",60383),debugContinueSmall:I("debug-continue-small",60384),beakerStop:I("beaker-stop",60385),graphLine:I("graph-line",60386),graphScatter:I("graph-scatter",60387),pieChart:I("pie-chart",60388),bracket:I("bracket",60175),bracketDot:I("bracket-dot",60389),bracketError:I("bracket-error",60390),lockSmall:I("lock-small",60391),azureDevops:I("azure-devops",60392),verifiedFilled:I("verified-filled",60393),newline:I("newline",60394),layout:I("layout",60395),layoutActivitybarLeft:I("layout-activitybar-left",60396),layoutActivitybarRight:I("layout-activitybar-right",60397),layoutPanelLeft:I("layout-panel-left",60398),layoutPanelCenter:I("layout-panel-center",60399),layoutPanelJustify:I("layout-panel-justify",60400),layoutPanelRight:I("layout-panel-right",60401),layoutPanel:I("layout-panel",60402),layoutSidebarLeft:I("layout-sidebar-left",60403),layoutSidebarRight:I("layout-sidebar-right",60404),layoutStatusbar:I("layout-statusbar",60405),layoutMenubar:I("layout-menubar",60406),layoutCentered:I("layout-centered",60407),target:I("target",60408),indent:I("indent",60409),recordSmall:I("record-small",60410),errorSmall:I("error-small",60411),terminalDecorationError:I("terminal-decoration-error",60411),arrowCircleDown:I("arrow-circle-down",60412),arrowCircleLeft:I("arrow-circle-left",60413),arrowCircleRight:I("arrow-circle-right",60414),arrowCircleUp:I("arrow-circle-up",60415),layoutSidebarRightOff:I("layout-sidebar-right-off",60416),layoutPanelOff:I("layout-panel-off",60417),layoutSidebarLeftOff:I("layout-sidebar-left-off",60418),blank:I("blank",60419),heartFilled:I("heart-filled",60420),map:I("map",60421),mapHorizontal:I("map-horizontal",60421),foldHorizontal:I("fold-horizontal",60421),mapFilled:I("map-filled",60422),mapHorizontalFilled:I("map-horizontal-filled",60422),foldHorizontalFilled:I("fold-horizontal-filled",60422),circleSmall:I("circle-small",60423),bellSlash:I("bell-slash",60424),bellSlashDot:I("bell-slash-dot",60425),commentUnresolved:I("comment-unresolved",60426),gitPullRequestGoToChanges:I("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:I("git-pull-request-new-changes",60428),searchFuzzy:I("search-fuzzy",60429),commentDraft:I("comment-draft",60430),send:I("send",60431),sparkle:I("sparkle",60432),insert:I("insert",60433),mic:I("mic",60434),thumbsdownFilled:I("thumbsdown-filled",60435),thumbsupFilled:I("thumbsup-filled",60436),coffee:I("coffee",60437),snake:I("snake",60438),game:I("game",60439),vr:I("vr",60440),chip:I("chip",60441),piano:I("piano",60442),music:I("music",60443),micFilled:I("mic-filled",60444),repoFetch:I("repo-fetch",60445),copilot:I("copilot",60446),lightbulbSparkle:I("lightbulb-sparkle",60447),robot:I("robot",60448),sparkleFilled:I("sparkle-filled",60449),diffSingle:I("diff-single",60450),diffMultiple:I("diff-multiple",60451),surroundWith:I("surround-with",60452),share:I("share",60453),gitStash:I("git-stash",60454),gitStashApply:I("git-stash-apply",60455),gitStashPop:I("git-stash-pop",60456),vscode:I("vscode",60457),vscodeInsiders:I("vscode-insiders",60458),codeOss:I("code-oss",60459),runCoverage:I("run-coverage",60460),runAllCoverage:I("run-all-coverage",60461),coverage:I("coverage",60462),githubProject:I("github-project",60463),mapVertical:I("map-vertical",60464),foldVertical:I("fold-vertical",60464),mapVerticalFilled:I("map-vertical-filled",60465),foldVerticalFilled:I("fold-vertical-filled",60465),goToSearch:I("go-to-search",60466),percentage:I("percentage",60467),sortPercentage:I("sort-percentage",60467),attach:I("attach",60468)};var o$={dialogError:I("dialog-error","error"),dialogWarning:I("dialog-warning","warning"),dialogInfo:I("dialog-info","info"),dialogClose:I("dialog-close","close"),treeItemExpanded:I("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:I("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:I("tree-filter-on-type-off","list-selection"),treeFilterClear:I("tree-filter-clear","close"),treeItemLoading:I("tree-item-loading","loading"),menuSelection:I("menu-selection","check"),menuSubmenu:I("menu-submenu","chevron-right"),menuBarMore:I("menubar-more","more"),scrollbarButtonLeft:I("scrollbar-button-left","triangle-left"),scrollbarButtonRight:I("scrollbar-button-right","triangle-right"),scrollbarButtonUp:I("scrollbar-button-up","triangle-up"),scrollbarButtonDown:I("scrollbar-button-down","triangle-down"),toolBarMore:I("toolbar-more","more"),quickInputBack:I("quick-input-back","arrow-left"),dropDownButton:I("drop-down-button",60084),symbolCustomColor:I("symbol-customcolor",60252),exportIcon:I("export",60332),workspaceUnspecified:I("workspace-unspecified",60355),newLine:I("newline",60394),thumbsDownFilled:I("thumbsdown-filled",60435),thumbsUpFilled:I("thumbsup-filled",60436),gitFetch:I("git-fetch",60445),lightbulbSparkleAutofix:I("lightbulb-sparkle-autofix",60447),debugBreakpointPending:I("debug-breakpoint-pending",60377)},re={...WU,...o$};var VU;(e=>{function r(t){return t&&typeof t=="object"&&typeof t.id=="string"}e.isThemeColor=r})(VU||={});var Ae;(m=>{m.iconNameSegment="[A-Za-z0-9]+",m.iconNameExpression="[A-Za-z0-9-]+",m.iconModifierExpression="~[A-Za-z]+",m.iconNameCharacter="[A-Za-z0-9~-]";let i=new RegExp(`^(${m.iconNameExpression})(${m.iconModifierExpression})?$`);function o(b){let v=i.exec(b.id);if(!v)return o(re.error);let[,S,x]=v,E=["codicon","codicon-"+S];return x&&E.push("codicon-modifier-"+x.substring(1)),E}m.asClassNameArray=o;function s(b){return o(b).join(" ")}m.asClassName=s;function a(b){return"."+o(b).join(".")}m.asCSSSelector=a;function l(b){return b&&typeof b=="object"&&typeof b.id=="string"&&(typeof b.color>"u"||VU.isThemeColor(b.color))}m.isThemeIcon=l;let d=new RegExp(`^\\$\\((${m.iconNameExpression}(?:${m.iconModifierExpression})?)\\)$`);function c(b){let v=d.exec(b);if(!v)return;let[,S]=v;return{id:S}}m.fromString=c;function p(b){return{id:b}}m.fromId=p;function h(b,v){let S=b.id,x=S.lastIndexOf("~");return x!==-1&&(S=S.substring(0,x)),v&&(S=`${S}~${v}`),{id:S}}m.modify=h;function g(b){let v=b.id.lastIndexOf("~");if(v!==-1)return b.id.substring(v+1)}m.getModifier=g;function f(b,v){return b.id===v.id&&b.color?.id===v.color?.id}m.isEqual=f})(Ae||={});var r$="$(",vM=new RegExp(`\\$\\(${Ae.iconNameExpression}(?:${Ae.iconModifierExpression})?\\)`,"g"),s$=new RegExp(`(\\\\)?${vM.source}`,"g");function HU(r){return r.replace(s$,(e,t)=>t?e:`\\${e}`)}var a$=new RegExp(`\\\\${vM.source}`,"g");function UU(r){return r.replace(a$,e=>`\\${e}`)}var l$=new RegExp(`(\\s)?(\\\\)?${vM.source}(\\s)?`,"g");function yM(r){return r.indexOf(r$)===-1?r:r.replace(l$,(e,t,n,i)=>n?e:t||i||"")}var Cle=new RegExp(`\\$\\(${Ae.iconNameCharacter}+\\)`,"g");var jo=class{value;isTrusted;supportThemeIcons;supportHtml;baseUri;constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw Kp("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=d$(this.supportThemeIcons?HU(e):e).replace(/([ \t]+)/g,(n,i)=>"&nbsp;".repeat(i.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${c$(t,e)}
`,this}appendLink(e,t,n){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),n&&(this.value+=` "${this._escape(this._escape(n,'"'),")")}"`),this.value+=")",this}_escape(e,t){let n=new RegExp(vi(t),"g");return e.replace(n,(i,o)=>e.charAt(o-1)!=="\\"?`\\${i}`:i)}};function IE(r){return r instanceof jo?!0:r&&typeof r=="object"?typeof r.value=="string"&&(typeof r.isTrusted=="boolean"||typeof r.isTrusted=="object"||r.isTrusted===void 0)&&(typeof r.supportThemeIcons=="boolean"||r.supportThemeIcons===void 0):!1}function zU(r,e){return r===e?!0:!r||!e?!1:r.value===e.value&&r.isTrusted===e.isTrusted&&r.supportThemeIcons===e.supportThemeIcons&&r.supportHtml===e.supportHtml&&(r.baseUri===e.baseUri||!!r.baseUri&&!!e.baseUri&&yn(Z.from(r.baseUri),Z.from(e.baseUri)))}function d$(r){return r.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function c$(r,e){let t=r.match(/^`+/gm)?.reduce((i,o)=>i.length>o.length?i:o).length??0,n=t>=3?t+1:3;return[`${"`".repeat(n)}${e}`,r,`${"`".repeat(n)}`].join(`
`)}function Fy(r){return r.replace(/"/g,"&quot;")}function SE(r){return r&&r.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function KU(r){let e=[],t=r.split("|").map(i=>i.trim());r=t[0];let n=t[1];if(n){let i=/height=(\d+)/.exec(n),o=/width=(\d+)/.exec(n),s=i?i[1]:"",a=o?o[1]:"",l=isFinite(parseInt(a)),d=isFinite(parseInt(s));l&&e.push(`width="${a}"`),d&&e.push(`height="${s}"`)}return{href:r,dimensions:e}}function GU(r){let e=!1,t=new Map,n=new Map;if(u$(r,c=>{if(r===c)return!0;let p=JSON.stringify(c);if(p.length<30)return!0;let h=t.get(p);if(!h){let g={schemas:[c]};return t.set(p,g),n.set(c,g),!0}return h.schemas.push(c),n.set(c,h),e=!0,!1}),t.clear(),!e)return JSON.stringify(r);let o="$defs";for(;r.hasOwnProperty(o);)o+="_";let s=[];function a(c){return JSON.stringify(c,(p,h)=>{if(h!==c){let g=n.get(h);if(g&&g.schemas.length>1)return g.id||(g.id=`_${s.length}`,s.push(g.schemas[0])),{$ref:`#/${o}/${g.id}`}}return h})}let l=a(r),d=[];for(let c=0;c<s.length;c++)d.push(`"_${c}":${a(s[c])}`);return d.length?`${l.substring(0,l.length-1)},"${o}":{${d.join(",")}}}`:l}function Bm(r){return typeof r=="object"&&r!==null}function u$(r,e){if(!r||typeof r!="object")return;let t=(...l)=>{for(let d of l)Bm(d)&&s.push(d)},n=(...l)=>{for(let d of l)if(Bm(d))for(let c in d){let p=d[c];Bm(p)&&s.push(p)}},i=(...l)=>{for(let d of l)if(Array.isArray(d))for(let c of d)Bm(c)&&s.push(c)},o=l=>{if(Array.isArray(l))for(let d of l)Bm(d)&&s.push(d);else Bm(l)&&s.push(l)},s=[r],a=s.pop();for(;a;)e(a)&&(t(a.additionalItems,a.additionalProperties,a.not,a.contains,a.propertyNames,a.if,a.then,a.else,a.unevaluatedItems,a.unevaluatedProperties),n(a.definitions,a.$defs,a.properties,a.patternProperties,a.dependencies,a.dependentSchemas),i(a.anyOf,a.allOf,a.oneOf,a.prefixItems),o(a.items)),a=s.pop()}var SM=class r{constructor(e,t,n,i,o,s,a){this._forceIntegerValues=e;this._forceIntegerValues&&(t=t|0,n=n|0,i=i|0,o=o|0,s=s|0,a=a|0),this.rawScrollLeft=i,this.rawScrollTop=a,t<0&&(t=0),i+t>n&&(i=n-t),i<0&&(i=0),o<0&&(o=0),a+o>s&&(a=s-o),a<0&&(a=0),this.width=t,this.scrollWidth=n,this.scrollLeft=i,this.height=o,this.scrollHeight=s,this.scrollTop=a}_scrollStateBrand=void 0;rawScrollLeft;rawScrollTop;width;scrollWidth;scrollLeft;height;scrollHeight;scrollTop;equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new r(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new r(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){let n=this.width!==e.width,i=this.scrollWidth!==e.scrollWidth,o=this.scrollLeft!==e.scrollLeft,s=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:i,scrollLeftChanged:o,heightChanged:s,scrollHeightChanged:a,scrollTopChanged:l}}},Va=class extends N{_scrollableBrand=void 0;_smoothScrollDuration;_scheduleAtNextAnimationFrame;_state;_smoothScrolling;_onScroll=this._register(new T);onScroll=this._onScroll.event;constructor(e){super(),this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new SM(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){let n=this._state.withScrollDimensions(e,t);this._setState(n,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){let t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};let n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let i;t?i=new xE(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):i=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=i}else{let n=this._state.withScrollPosition(e);this._smoothScrolling=xE.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){let n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}},CE=class{scrollLeft;scrollTop;isDone;constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}};function IM(r,e){let t=e-r;return function(n){return r+t*g$(n)}}function p$(r,e,t){return function(n){return n<t?r(n/t):e((n-t)/(1-t))}}var xE=class r{from;to;duration;startTime;animationFrameDisposable;scrollLeft;scrollTop;constructor(e,t,n,i){this.from=e,this.to=t,this.duration=i,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let o,s;return e<t?(o=e+.75*n,s=t-.75*n):(o=e-.75*n,s=t+.75*n),p$(IM(e,o),IM(s,t),.33)}return IM(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){let t=(e-this.startTime)/this.duration;if(t<1){let n=this.scrollLeft(t),i=this.scrollTop(t);return new CE(n,i,!1)}return new CE(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return r.start(e,t,n)}static start(e,t,n){n=n+10;let i=Date.now()-10;return new r(e,t,i,n)}};function h$(r){return Math.pow(r,3)}function g$(r){return 1-h$(1-r)}var Gl={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};var CM="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function m$(r=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(let t of CM)r.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}var EE=m$();function hh(r){let e=EE;if(r&&r instanceof RegExp)if(r.global)e=r;else{let t="g";r.ignoreCase&&(t+="i"),r.multiline&&(t+="m"),r.unicode&&(t+="u"),e=new RegExp(r.source,t)}return e.lastIndex=0,e}var jU=new mi;jU.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function gh(r,e,t,n,i){if(e=hh(e),i||(i=tt.first(jU)),t.length>i.maxLen){let d=r-i.maxLen/2;return d<0?d=0:n+=d,t=t.substring(d,r+i.maxLen/2),gh(r,e,t,n,i)}let o=Date.now(),s=r-1-n,a=-1,l=null;for(let d=1;!(Date.now()-o>=i.timeBudget);d++){let c=s-i.windowSize*d;e.lastIndex=Math.max(0,c);let p=f$(e,t,s,a);if(!p&&l||(l=p,c<=0))break;a=c}if(l){let d={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,d}return null}function f$(r,e,t,n){let i;for(;i=r.exec(e);){let o=i.index||0;if(o<=t&&r.lastIndex>=t)return i;if(n>0&&o>n)return null}return null}function xM(...r){switch(r.length){case 1:return u("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",r[0]);case 2:return u("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",r[0],r[1]);case 3:return u("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",r[0],r[1],r[2]);default:return}}var b$=u("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),v$=u("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'."),Mu=class r{static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw x2(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}static _regexFlags=new Set(["i","g","s","m","y","u"].map(e=>e.charCodeAt(0)));static _keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);_input="";_start=0;_current=0;_tokens=[];_errors=[];get errors(){return this._errors}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){let t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){let t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(xM("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(xM("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(xM("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){let t=this._start,n=this._input.substring(this._start,this._current),i={type:19,offset:this._start,lexeme:n};this._errors.push({offset:t,lexeme:n,additionalInfo:e}),this._tokens.push(i)}stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy;_string(){this.stringRe.lastIndex=this._start;let e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;let t=this._input.substring(this._start,this._current),n=r._keywords.get(t);n?this._addToken(n):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(b$);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,n=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(v$);return}let o=this._input.charCodeAt(e);if(t)t=!1;else if(o===47&&!n){e++;break}else o===91?n=!0:o===92?t=!0:o===93&&(n=!1);e++}for(;e<this._input.length&&r._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;let i=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:i,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}};var jl=class{ctor;staticArguments;supportsDelayedInstantiation;constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}};var Wm=class{_entries=new Map;constructor(...e){for(let[t,n]of e)this.set(t,n)}set(e,t){let n=this._entries.get(e);return this._entries.set(e,t),n}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var Ou;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function n(o){return o[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=n})(Ou||={});var we=j("instantiationService");function y$(r,e,t){e[Ou.DI_TARGET]===e?e[Ou.DI_DEPENDENCIES].push({id:r,index:t}):(e[Ou.DI_DEPENDENCIES]=[{id:r,index:t}],e[Ou.DI_TARGET]=e)}function j(r){if(Ou.serviceIds.has(r))return Ou.serviceIds.get(r);let e=function(t,n,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");y$(e,t,i)};return e.toString=()=>r,Ou.serviceIds.set(r,e),e}var ho=new Map;ho.set("false",!1);ho.set("true",!0);ho.set("isMac",Pe);ho.set("isLinux",Xt);ho.set("isWindows",It);ho.set("isWeb",Ri);ho.set("isMacNative",Pe&&!Ri);ho.set("isEdge",Tx);ho.set("isFirefox",fm);ho.set("isChrome",ty);ho.set("isSafari",Ex);var I$=Object.prototype.hasOwnProperty;var S$={regexParsingWithErrorRecovery:!0},C$=u("contextkey.parser.error.emptyString","Empty context key expression"),x$=u("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),E$=u("contextkey.parser.error.noInAfterNot","'in' after 'not'."),$U=u("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),T$=u("contextkey.parser.error.unexpectedToken","Unexpected token"),w$=u("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),_$=u("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),D$=u("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?"),EM=class r{constructor(e=S$){this._config=e}static _parseError=new Error;_scanner=new Mu;_tokens=[];_current=0;_parsingErrors=[];get lexingErrors(){return this._scanner.errors}get parsingErrors(){return this._parsingErrors}parse(e){if(e===""){this._parsingErrors.push({message:C$,offset:0,lexeme:"",additionalInfo:x$});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{let t=this._expr();if(!this._isAtEnd()){let n=this._peek(),i=n.type===17?w$:void 0;throw this._parsingErrors.push({message:T$,offset:n.offset,lexeme:Mu.getLexeme(n),additionalInfo:i}),r._parseError}return t}catch(t){if(t!==r._parseError)throw t;return}}_expr(){return this._or()}_or(){let e=[this._and()];for(;this._matchOne(16);){let t=this._and();e.push(t)}return e.length===1?e[0]:oe.or(...e)}_and(){let e=[this._term()];for(;this._matchOne(15);){let t=this._term();e.push(t)}return e.length===1?e[0]:oe.and(...e)}_term(){if(this._matchOne(2)){let e=this._peek();switch(e.type){case 11:return this._advance(),$o.INSTANCE;case 12:return this._advance(),vr.INSTANCE;case 0:{this._advance();let t=this._expr();return this._consume(1,$U),t?.negate()}case 17:return this._advance(),fh.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){let e=this._peek();switch(e.type){case 11:return this._advance(),oe.true();case 12:return this._advance(),oe.false();case 0:{this._advance();let t=this._expr();return this._consume(1,$U),t}case 17:{let t=e.lexeme;if(this._advance(),this._matchOne(9)){let i=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),i.type!==10)throw this._errExpectedButGot("REGEX",i);let o=i.lexeme,s=o.lastIndexOf("/"),a=s===o.length-1?void 0:this._removeFlagsGY(o.substring(s+1)),l;try{l=new RegExp(o.substring(1,s),a)}catch{throw this._errExpectedButGot("REGEX",i)}return Gy.create(t,l)}switch(i.type){case 10:case 19:{let o=[i.lexeme];this._advance();let s=this._peek(),a=0;for(let h=0;h<i.lexeme.length;h++)i.lexeme.charCodeAt(h)===40?a++:i.lexeme.charCodeAt(h)===41&&a--;for(;!this._isAtEnd()&&s.type!==15&&s.type!==16;){switch(s.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let h=0;h<s.lexeme.length;h++)s.lexeme.charCodeAt(h)===40?a++:i.lexeme.charCodeAt(h)===41&&a--}if(a<0)break;o.push(Mu.getLexeme(s)),this._advance(),s=this._peek()}let l=o.join(""),d=l.lastIndexOf("/"),c=d===l.length-1?void 0:this._removeFlagsGY(l.substring(d+1)),p;try{p=new RegExp(l.substring(1,d),c)}catch{throw this._errExpectedButGot("REGEX",i)}return oe.regex(t,p)}case 18:{let o=i.lexeme;this._advance();let s=null;if(!Pl(o)){let a=o.indexOf("/"),l=o.lastIndexOf("/");if(a!==l&&a>=0){let d=o.slice(a+1,l),c=o[l+1]==="i"?"i":"";try{s=new RegExp(d,c)}catch{throw this._errExpectedButGot("REGEX",i)}}}if(s===null)throw this._errExpectedButGot("REGEX",i);return Gy.create(t,s)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,E$);let i=this._value();return oe.notIn(t,i)}switch(this._peek().type){case 3:{this._advance();let i=this._value();if(this._previous().type===18)return oe.equals(t,i);switch(i){case"true":return oe.has(t);case"false":return oe.not(t);default:return oe.equals(t,i)}}case 4:{this._advance();let i=this._value();if(this._previous().type===18)return oe.notEquals(t,i);switch(i){case"true":return oe.not(t);case"false":return oe.has(t);default:return oe.notEquals(t,i)}}case 5:return this._advance(),zy.create(t,this._value());case 6:return this._advance(),Ky.create(t,this._value());case 7:return this._advance(),Hy.create(t,this._value());case 8:return this._advance(),Uy.create(t,this._value());case 13:return this._advance(),oe.in(t,this._value());default:return oe.has(t)}}case 20:throw this._parsingErrors.push({message:_$,offset:e.offset,lexeme:"",additionalInfo:D$}),r._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){let e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_flagsGYRe=/g|y/g;_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,n){let i=u("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,e,Mu.getLexeme(t)),o=t.offset,s=Mu.getLexeme(t);return this._parsingErrors.push({message:i,offset:o,lexeme:s,additionalInfo:n}),r._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}},oe=class{static false(){return $o.INSTANCE}static true(){return vr.INSTANCE}static has(e){return mh.create(e)}static equals(e,t){return Wy.create(e,t)}static notEquals(e,t){return Vy.create(e,t)}static regex(e,t){return Gy.create(e,t)}static in(e,t){return TE.create(e,t)}static notIn(e,t){return wE.create(e,t)}static not(e){return fh.create(e)}static and(...e){return _E.create(e,null,!0)}static or(...e){return jy.create(e,null,!0)}static greater(e,t){return Hy.create(e,t)}static greaterEquals(e,t){return Uy.create(e,t)}static smaller(e,t){return zy.create(e,t)}static smallerEquals(e,t){return Ky.create(e,t)}static _parser=new EM({regexParsingWithErrorRecovery:!1});static deserialize(e){return e==null?void 0:this._parser.parse(e)}};function By(r,e){return r.cmp(e)}var $o=class r{static INSTANCE=new r;type=0;constructor(){}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return vr.INSTANCE}},vr=class r{static INSTANCE=new r;type=1;constructor(){}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return $o.INSTANCE}},mh=class r{constructor(e,t){this.key=e;this.negated=t}static create(e,t=null){let n=ho.get(e);return typeof n=="boolean"?n?vr.INSTANCE:$o.INSTANCE:new r(e,t)}type=2;cmp(e){return e.type!==this.type?this.type-e.type:XU(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){let e=ho.get(this.key);return typeof e=="boolean"?e?vr.INSTANCE:$o.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(e){return e.mapDefined(this.key)}negate(){return this.negated||(this.negated=fh.create(this.key,this)),this.negated}},Wy=class r{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){if(typeof t=="boolean")return t?mh.create(e,n):fh.create(e,n);let i=ho.get(e);return typeof i=="boolean"?t===(i?"true":"false")?vr.INSTANCE:$o.INSTANCE:new r(e,t,n)}type=4;cmp(e){return e.type!==this.type?this.type-e.type:bh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){let e=ho.get(this.key);if(typeof e=="boolean"){let t=e?"true":"false";return this.value===t?vr.INSTANCE:$o.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(e){return e.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Vy.create(this.key,this.value,this)),this.negated}},TE=class r{constructor(e,t){this.key=e;this.valueKey=t}static create(e,t){return new r(e,t)}type=10;negated=null;cmp(e){return e.type!==this.type?this.type-e.type:bh(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.includes(n):typeof n=="string"&&typeof t=="object"&&t!==null?I$.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}map(e){return e.mapIn(this.key,this.valueKey)}negate(){return this.negated||(this.negated=wE.create(this.key,this.valueKey)),this.negated}},wE=class r{constructor(e,t){this.key=e;this.valueKey=t;this._negated=TE.create(e,t)}static create(e,t){return new r(e,t)}type=11;_negated;cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}map(e){return e.mapNotIn(this.key,this.valueKey)}negate(){return this._negated}},Vy=class r{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){if(typeof t=="boolean")return t?fh.create(e,n):mh.create(e,n);let i=ho.get(e);return typeof i=="boolean"?t===(i?"true":"false")?$o.INSTANCE:vr.INSTANCE:new r(e,t,n)}type=5;cmp(e){return e.type!==this.type?this.type-e.type:bh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){let e=ho.get(this.key);if(typeof e=="boolean"){let t=e?"true":"false";return this.value===t?$o.INSTANCE:vr.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(e){return e.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Wy.create(this.key,this.value,this)),this.negated}},fh=class r{constructor(e,t){this.key=e;this.negated=t}static create(e,t=null){let n=ho.get(e);return typeof n=="boolean"?n?$o.INSTANCE:vr.INSTANCE:new r(e,t)}type=3;cmp(e){return e.type!==this.type?this.type-e.type:XU(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){let e=ho.get(this.key);return typeof e=="boolean"?e?$o.INSTANCE:vr.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(e){return e.mapNot(this.key)}negate(){return this.negated||(this.negated=mh.create(this.key,this)),this.negated}};function DE(r,e){if(typeof r=="string"){let t=parseFloat(r);isNaN(t)||(r=t)}return typeof r=="string"||typeof r=="number"?e(r):$o.INSTANCE}var Hy=class r{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){return DE(t,i=>new r(e,i,n))}type=12;cmp(e){return e.type!==this.type?this.type-e.type:bh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreater(this.key,this.value)}negate(){return this.negated||(this.negated=Ky.create(this.key,this.value,this)),this.negated}},Uy=class r{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){return DE(t,i=>new r(e,i,n))}type=13;cmp(e){return e.type!==this.type?this.type-e.type:bh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreaterEquals(this.key,this.value)}negate(){return this.negated||(this.negated=zy.create(this.key,this.value,this)),this.negated}},zy=class r{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){return DE(t,i=>new r(e,i,n))}type=14;cmp(e){return e.type!==this.type?this.type-e.type:bh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmaller(this.key,this.value)}negate(){return this.negated||(this.negated=Uy.create(this.key,this.value,this)),this.negated}},Ky=class r{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){return DE(t,i=>new r(e,i,n))}type=15;cmp(e){return e.type!==this.type?this.type-e.type:bh(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmallerEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Hy.create(this.key,this.value,this)),this.negated}},Gy=class r{constructor(e,t){this.key=e;this.regexp=t}static create(e,t){return new r(e,t)}type=7;negated=null;cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;let t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){let t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){let e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}map(e){return e.mapRegex(this.key,this.regexp)}negate(){return this.negated||(this.negated=TM.create(this)),this.negated}},TM=class r{constructor(e){this._actual=e}static create(e){return new r(e)}type=8;cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}map(e){return new r(this._actual.map(e))}negate(){return this._actual}};function YU(r){let e=null;for(let t=0,n=r.length;t<n;t++){let i=r[t].substituteConstants();if(r[t]!==i&&e===null){e=[];for(let o=0;o<t;o++)e[o]=r[o]}e!==null&&(e[t]=i)}return e===null?r:e}var _E=class r{constructor(e,t){this.expr=e;this.negated=t}static create(e,t,n){return r._normalizeArr(e,t,n)}type=6;cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){let i=By(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){let e=YU(this.expr);return e===this.expr?this:r.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,n){let i=[],o=!1;for(let s of e)if(s){if(s.type===1){o=!0;continue}if(s.type===0)return $o.INSTANCE;if(s.type===6){i.push(...s.expr);continue}i.push(s)}if(i.length===0&&o)return vr.INSTANCE;if(i.length!==0){if(i.length===1)return i[0];i.sort(By);for(let s=1;s<i.length;s++)i[s-1].equals(i[s])&&(i.splice(s,1),s--);if(i.length===1)return i[0];for(;i.length>1;){let s=i[i.length-1];if(s.type!==9)break;i.pop();let a=i.pop(),l=i.length===0,d=jy.create(s.expr.map(c=>r.create([c,a],null,n)),null,l);d&&(i.push(d),i.sort(By))}if(i.length===1)return i[0];if(n){for(let s=0;s<i.length;s++)for(let a=s+1;a<i.length;a++)if(i[s].negate().equals(i[a]))return $o.INSTANCE;if(i.length===1)return i[0]}return new r(i,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){let e=[];for(let t of this.expr)e.push(...t.keys());return e}map(e){return new r(this.expr.map(t=>t.map(e)),null)}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());this.negated=jy.create(e,this,!0)}return this.negated}},jy=class r{constructor(e,t){this.expr=e;this.negated=t}static create(e,t,n){return r._normalizeArr(e,t,n)}type=9;cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){let i=By(this.expr[t],e.expr[t]);if(i!==0)return i}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){let e=YU(this.expr);return e===this.expr?this:r.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let i=[],o=!1;if(e){for(let s=0,a=e.length;s<a;s++){let l=e[s];if(l){if(l.type===0){o=!0;continue}if(l.type===1)return vr.INSTANCE;if(l.type===9){i=i.concat(l.expr);continue}i.push(l)}}if(i.length===0&&o)return $o.INSTANCE;i.sort(By)}if(i.length!==0){if(i.length===1)return i[0];for(let s=1;s<i.length;s++)i[s-1].equals(i[s])&&(i.splice(s,1),s--);if(i.length===1)return i[0];if(n){for(let s=0;s<i.length;s++)for(let a=s+1;a<i.length;a++)if(i[s].negate().equals(i[a]))return vr.INSTANCE;if(i.length===1)return i[0]}return new r(i,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){let e=[];for(let t of this.expr)e.push(...t.keys());return e}map(e){return new r(this.expr.map(t=>t.map(e)),null)}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());for(;e.length>1;){let t=e.shift(),n=e.shift(),i=[];for(let o of qU(t))for(let s of qU(n))i.push(_E.create([o,s],null,!1));e.unshift(r.create(i,null,!1))}this.negated=r.create(e,this,!0)}return this.negated}},B=class r extends mh{static _info=[];static all(){return r._info.values()}_defaultValue;constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?r._info.push({...n,key:e}):n!==!0&&r._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return Wy.create(this.key,e)}notEqualsTo(e){return Vy.create(this.key,e)}},Ne=j("contextKeyService");function XU(r,e){return r<e?-1:r>e?1:0}function bh(r,e,t,n){return r<t?-1:r>t?1:e<n?-1:e>n?1:0}function qU(r){return r.type===9?r.expr:[r]}var Xi=j("accessibilityService");var xde=new B("accessibilityModeEnabled",!1);var wM=class{_value="";_pos=0;reset(e){return this._value=e,this._pos=0,this}next(){return this._pos+=1,this}hasNext(){return this._pos<this._value.length-1}cmp(e){let t=e.charCodeAt(0),n=this._value.charCodeAt(this._pos);return t-n}value(){return this._value[this._pos]}},_M=class{constructor(e=!0){this._caseSensitive=e}_value;_from;_to;reset(e){return this._value=e,this._from=0,this._to=0,this.next()}hasNext(){return this._to<this._value.length}next(){this._from=this._to;let e=!0;for(;this._to<this._value.length;this._to++)if(this._value.charCodeAt(this._to)===46)if(e)this._from++;else break;else e=!1;return this}cmp(e){return this._caseSensitive?vm(e,this._value,0,e.length,this._from,this._to):ym(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}},LE=class{constructor(e=!0,t=!0){this._splitOnBackslash=e;this._caseSensitive=t}_value;_valueLen;_from;_to;reset(e){this._from=0,this._to=0,this._value=e,this._valueLen=e.length;for(let t=e.length-1;t>=0;t--,this._valueLen--){let n=this._value.charCodeAt(t);if(!(n===47||this._splitOnBackslash&&n===92))break}return this.next()}hasNext(){return this._to<this._valueLen}next(){this._from=this._to;let e=!0;for(;this._to<this._valueLen;this._to++){let t=this._value.charCodeAt(this._to);if(t===47||this._splitOnBackslash&&t===92)if(e)this._from++;else break;else e=!1}return this}cmp(e){return this._caseSensitive?vm(e,this._value,0,e.length,this._from,this._to):ym(e,this._value,0,e.length,this._from,this._to)}value(){return this._value.substring(this._from,this._to)}};var DM=class{constructor(e,t){this._ignorePathCasing=e;this._ignoreQueryAndFragment=t}_pathIterator;_value;_states=[];_stateIdx=0;reset(e){return this._value=e,this._states=[],this._value.scheme&&this._states.push(1),this._value.authority&&this._states.push(2),this._value.path&&(this._pathIterator=new LE(!1,!this._ignorePathCasing(e)),this._pathIterator.reset(e.path),this._pathIterator.value()&&this._states.push(3)),this._ignoreQueryAndFragment(e)||(this._value.query&&this._states.push(4),this._value.fragment&&this._states.push(5)),this._stateIdx=0,this}next(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()?this._pathIterator.next():this._stateIdx+=1,this}hasNext(){return this._states[this._stateIdx]===3&&this._pathIterator.hasNext()||this._stateIdx<this._states.length-1}cmp(e){if(this._states[this._stateIdx]===1)return ts(e,this._value.scheme);if(this._states[this._stateIdx]===2)return ts(e,this._value.authority);if(this._states[this._stateIdx]===3)return this._pathIterator.cmp(e);if(this._states[this._stateIdx]===4)return sh(e,this._value.query);if(this._states[this._stateIdx]===5)return sh(e,this._value.fragment);throw new Error}value(){if(this._states[this._stateIdx]===1)return this._value.scheme;if(this._states[this._stateIdx]===2)return this._value.authority;if(this._states[this._stateIdx]===3)return this._pathIterator.value();if(this._states[this._stateIdx]===4)return this._value.query;if(this._states[this._stateIdx]===5)return this._value.fragment;throw new Error}},Vm=class{height=1;segment;value;key;left;mid;right;isEmpty(){return!this.left&&!this.mid&&!this.right&&!this.value}rotateLeft(){let e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){let e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}};var Hm=class r{static forUris(e=()=>!1,t=()=>!1){return new r(new DM(e,t))}static forPaths(e=!1){return new r(new LE(void 0,!e))}static forStrings(){return new r(new wM)}static forConfigKeys(){return new r(new _M)}_iter;_root;constructor(e){this._iter=e}clear(){this._root=void 0}fill(e,t){if(t){let n=t.slice(0);Z0(n);for(let i of n)this.set(i,e)}else{let n=e.slice(0);Z0(n);for(let i of n)this.set(i[0],i[1])}}set(e,t){let n=this._iter.reset(e),i;this._root||(this._root=new Vm,this._root.segment=n.value());let o=[];for(i=this._root;;){let a=n.cmp(i.segment);if(a>0)i.left||(i.left=new Vm,i.left.segment=n.value()),o.push([-1,i]),i=i.left;else if(a<0)i.right||(i.right=new Vm,i.right.segment=n.value()),o.push([1,i]),i=i.right;else if(n.hasNext())n.next(),i.mid||(i.mid=new Vm,i.mid.segment=n.value()),o.push([0,i]),i=i.mid;else break}let s=i.value;i.value=t,i.key=e;for(let a=o.length-1;a>=0;a--){let l=o[a][1];l.updateHeight();let d=l.balanceFactor();if(d<-1||d>1){let c=o[a][0],p=o[a+1][0];if(c===1&&p===1)o[a][1]=l.rotateLeft();else if(c===-1&&p===-1)o[a][1]=l.rotateRight();else if(c===1&&p===-1)l.right=o[a+1][1]=o[a+1][1].rotateRight(),o[a][1]=l.rotateLeft();else if(c===-1&&p===1)l.left=o[a+1][1]=o[a+1][1].rotateLeft(),o[a][1]=l.rotateRight();else throw new Error;if(a>0)switch(o[a-1][0]){case-1:o[a-1][1].left=o[a][1];break;case 1:o[a-1][1].right=o[a][1];break;case 0:o[a-1][1].mid=o[a][1];break}else this._root=o[0][1]}}return s}get(e){return this._getNode(e)?.value}_getNode(e){let t=this._iter.reset(e),n=this._root;for(;n;){let i=t.cmp(n.segment);if(i>0)n=n.left;else if(i<0)n=n.right;else if(t.hasNext())t.next(),n=n.mid;else break}return n}has(e){let t=this._getNode(e);return!(t?.value===void 0&&t?.mid===void 0)}delete(e){return this._delete(e,!1)}deleteSuperstr(e){return this._delete(e,!0)}_delete(e,t){let n=this._iter.reset(e),i=[],o=this._root;for(;o;){let s=n.cmp(o.segment);if(s>0)i.push([-1,o]),o=o.left;else if(s<0)i.push([1,o]),o=o.right;else if(n.hasNext())n.next(),i.push([0,o]),o=o.mid;else break}if(o){if(t?(o.left=void 0,o.mid=void 0,o.right=void 0,o.height=1):(o.key=void 0,o.value=void 0),!o.mid&&!o.value)if(o.left&&o.right){let s=this._min(o.right);if(s.key){let{key:a,value:l,segment:d}=s;this._delete(s.key,!1),o.key=a,o.value=l,o.segment=d}}else{let s=o.left??o.right;if(i.length>0){let[a,l]=i[i.length-1];switch(a){case-1:l.left=s;break;case 0:l.mid=s;break;case 1:l.right=s;break}}else this._root=s}for(let s=i.length-1;s>=0;s--){let a=i[s][1];a.updateHeight();let l=a.balanceFactor();if(l>1?(a.right.balanceFactor()>=0||(a.right=a.right.rotateRight()),i[s][1]=a.rotateLeft()):l<-1&&(a.left.balanceFactor()<=0||(a.left=a.left.rotateLeft()),i[s][1]=a.rotateRight()),s>0)switch(i[s-1][0]){case-1:i[s-1][1].left=i[s][1];break;case 1:i[s-1][1].right=i[s][1];break;case 0:i[s-1][1].mid=i[s][1];break}else this._root=i[0][1]}}}_min(e){for(;e.left;)e=e.left;return e}findSubstr(e){let t=this._iter.reset(e),n=this._root,i;for(;n;){let o=t.cmp(n.segment);if(o>0)n=n.left;else if(o<0)n=n.right;else if(t.hasNext())t.next(),i=n.value||i,n=n.mid;else break}return n&&n.value||i}findSuperstr(e){return this._findSuperstrOrElement(e,!1)}_findSuperstrOrElement(e,t){let n=this._iter.reset(e),i=this._root;for(;i;){let o=n.cmp(i.segment);if(o>0)i=i.left;else if(o<0)i=i.right;else if(n.hasNext())n.next(),i=i.mid;else return i.mid?this._entries(i.mid):t?i.value:void 0}}hasElementOrSubtree(e){return this._findSuperstrOrElement(e,!0)!==void 0}forEach(e){for(let[t,n]of this)e(n,t)}*[Symbol.iterator](){yield*this._entries(this._root)}_entries(e){let t=[];return this._dfsEntries(e,t),t[Symbol.iterator]()}_dfsEntries(e,t){e&&(e.left&&this._dfsEntries(e.left,t),e.value&&t.push([e.key,e.value]),e.mid&&this._dfsEntries(e.mid,t),e.right&&this._dfsEntries(e.right,t))}_isBalanced(){let e=t=>{if(!t)return!0;let n=t.balanceFactor();return n<-1||n>1?!1:e(t.left)&&e(t.right)};return e(this._root)}};var di=j("environmentService"),Pde=di;var fn=j("contextService");function Pu(r){let e=r;return typeof e?.id=="string"&&Z.isUri(e.uri)}function QU(r){return typeof r?.id=="string"&&!Pu(r)&&!qy(r)}var L$={id:"ext-dev"},k$={id:"empty-window"};function ZU(r,e){if(typeof r=="string"||typeof r>"u")return typeof r=="string"?{id:Ho(r)}:e?L$:k$;let t=r;return t.configuration?{id:t.id,configPath:t.configuration}:t.folders.length===1?{id:t.id,uri:t.folders[0].uri}:{id:t.id}}function qy(r){let e=r;return typeof e?.id=="string"&&Z.isUri(e.configPath)}function JU(r){let e=r;return!!(e&&typeof e=="object"&&Z.isUri(e.uri)&&typeof e.name=="string"&&typeof e.toResource=="function")}var Yy="code-workspace",R$=`.${Yy}`,qde=[{name:u("codeWorkspace","Code Workspace"),extensions:[Yy]}];var M$="4064f6ec-cb38-4ad0-af64-ee6467e63c82";function ez(r){return r.id===M$}function tz(r){return(typeof r=="string"?Zp(r):Iu(r))===R$}var Ge=j("configurationService");function nz(r){return r.applicationValue!==void 0||r.userValue!==void 0||r.userLocalValue!==void 0||r.userRemoteValue!==void 0||r.workspaceValue!==void 0||r.workspaceFolderValue!==void 0}function kE(r){return r.replace(/[\[\]]/g,"")}var LM=class{data=new Map;add(e,t){ex(xt(e)),ex(tn(t)),ex(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}knows(e){return this.data.has(e)}as(e){return this.data.get(e)||null}},Te=new LM;var Js={JSONContribution:"base.contributions.json"};function O$(r){return r.length>0&&r.charAt(r.length-1)==="#"?r.substring(0,r.length-1):r}var kM=class{schemasById;_onDidChangeSchema=new T;onDidChangeSchema=this._onDidChangeSchema.event;constructor(){this.schemasById={}}registerSchema(e,t){this.schemasById[O$(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}getSchemaContributions(){return{schemas:this.schemasById}}getSchemaContent(e){let t=this.schemasById[e];return t?GU(t):void 0}hasSchemaContent(e){return!!this.schemasById[e]}},P$=new kM;Te.add(Js.JSONContribution,P$);var gce=j("policy");var In={Configuration:"base.contributions.configuration"};var Qy={properties:{},patternProperties:{}},ME={properties:{},patternProperties:{}},OE={properties:{},patternProperties:{}},PE={properties:{},patternProperties:{}},AE={properties:{},patternProperties:{}},Xy={properties:{},patternProperties:{}},vh="vscode://schemas/settings/resourceLanguage";var NE=Te.as(Js.JSONContribution),RM=class{registeredConfigurationDefaults=[];configurationDefaultsOverrides;defaultLanguageConfigurationOverridesNode;configurationContributors;configurationProperties;policyConfigurations;excludedConfigurationProperties;resourceLanguageSettingsSchema;overrideIdentifiers=new Set;_onDidSchemaChange=new T;onDidSchemaChange=this._onDidSchemaChange.event;_onDidUpdateConfiguration=new T;onDidUpdateConfiguration=this._onDidUpdateConfiguration.event;constructor(){this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:u("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},NE.registerSchema(vh,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){let n=new Set;this.doRegisterConfigurations(e,t,n),NE.registerSchema(vh,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}deregisterConfigurations(e){let t=new Set;this.doDeregisterConfigurations(e,t),NE.registerSchema(vh,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t})}updateConfigurations({add:e,remove:t}){let n=new Set;this.doDeregisterConfigurations(t,n),this.doRegisterConfigurations(e,!1,n),NE.registerSchema(vh,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){let t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){this.registeredConfigurationDefaults.push(...e);let n=[];for(let{overrides:i,source:o}of e)for(let s in i){t.add(s);let a=this.configurationDefaultsOverrides.get(s)??this.configurationDefaultsOverrides.set(s,{configurationDefaultOverrides:[]}).get(s),l=i[s];if(a.configurationDefaultOverrides.push({value:l,source:o}),uc.test(s)){let d=this.mergeDefaultConfigurationsForOverrideIdentifier(s,l,o,a.configurationDefaultOverrideValue);if(!d)continue;a.configurationDefaultOverrideValue=d,this.updateDefaultOverrideProperty(s,d,o),n.push(...MM(s))}else{let d=this.mergeDefaultConfigurationsForConfigurationProperty(s,l,o,a.configurationDefaultOverrideValue);if(!d)continue;a.configurationDefaultOverrideValue=d;let c=this.configurationProperties[s];c&&(this.updatePropertyDefaultValue(s,c),this.updateSchema(s,c))}}this.doRegisterOverrideIdentifiers(n)}deregisterDefaultConfigurations(e){let t=new Set;this.doDeregisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doDeregisterDefaultConfigurations(e,t){for(let n of e){let i=this.registeredConfigurationDefaults.indexOf(n);i!==-1&&this.registeredConfigurationDefaults.splice(i,1)}for(let{overrides:n,source:i}of e)for(let o in n){let s=this.configurationDefaultsOverrides.get(o);if(!s)continue;let a=s.configurationDefaultOverrides.findIndex(l=>i?l.source?.id===i.id:l.value===n[o]);if(a!==-1){if(s.configurationDefaultOverrides.splice(a,1),s.configurationDefaultOverrides.length===0&&this.configurationDefaultsOverrides.delete(o),uc.test(o)){let l;for(let d of s.configurationDefaultOverrides)l=this.mergeDefaultConfigurationsForOverrideIdentifier(o,d.value,d.source,l);l&&!oc(l.value)?(s.configurationDefaultOverrideValue=l,this.updateDefaultOverrideProperty(o,l,i)):(this.configurationDefaultsOverrides.delete(o),delete this.configurationProperties[o],delete this.defaultLanguageConfigurationOverridesNode.properties[o])}else{let l;for(let c of s.configurationDefaultOverrides)l=this.mergeDefaultConfigurationsForConfigurationProperty(o,c.value,c.source,l);s.configurationDefaultOverrideValue=l;let d=this.configurationProperties[o];d&&(this.updatePropertyDefaultValue(o,d),this.updateSchema(o,d))}t.add(o)}}this.updateOverridePropertyPatternKey()}updateDefaultOverrideProperty(e,t,n){let i={type:"object",default:t.value,description:u("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",kE(e)),$ref:vh,defaultDefaultValue:t.value,source:n,defaultValueSource:n};this.configurationProperties[e]=i,this.defaultLanguageConfigurationOverridesNode.properties[e]=i}mergeDefaultConfigurationsForOverrideIdentifier(e,t,n,i){let o=i?.value||{},s=i?.source??new Map;if(!(s instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(let a of Object.keys(t)){let l=t[a];if(tn(l)&&(Oi(o[a])||tn(o[a]))){if(o[a]={...o[a]??{},...l},n)for(let c in l)s.set(`${a}.${c}`,n)}else o[a]=l,n?s.set(a,n):s.delete(a)}return{value:o,source:s}}mergeDefaultConfigurationsForConfigurationProperty(e,t,n,i){let o=this.configurationProperties[e],s=i?.value??o?.defaultDefaultValue,a=n;if(tn(t)&&(o!==void 0&&o.type==="object"||o===void 0&&(Oi(s)||tn(s)))){if(a=i?.source??new Map,!(a instanceof Map)){console.error("defaultValueSource is not a Map");return}for(let d in t)n&&a.set(`${e}.${d}`,n);t={...tn(s)?s:{},...t}}return{value:t,source:a}}deltaConfiguration(e){let t=!1,n=new Set;e.removedDefaults&&(this.doDeregisterDefaultConfigurations(e.removedDefaults,n),t=!0),e.addedDefaults&&(this.doRegisterDefaultConfigurations(e.addedDefaults,n),t=!0),e.removedConfigurations&&this.doDeregisterConfigurations(e.removedConfigurations,n),e.addedConfigurations&&this.doRegisterConfigurations(e.addedConfigurations,!1,n),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this._onDidSchemaChange.fire()}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(let t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,n){e.forEach(i=>{this.validateAndRegisterProperties(i,t,i.extensionInfo,i.restrictedProperties,void 0,n),this.configurationContributors.push(i),this.registerJSONConfiguration(i)})}doDeregisterConfigurations(e,t){let n=i=>{if(i.properties)for(let o in i.properties){t.add(o);let s=this.configurationProperties[o];s?.policy?.name&&this.policyConfigurations.delete(s.policy.name),delete this.configurationProperties[o],this.removeFromSchema(o,i.properties[o])}i.allOf?.forEach(o=>n(o))};for(let i of e){n(i);let o=this.configurationContributors.indexOf(i);o!==-1&&this.configurationContributors.splice(o,1)}}validateAndRegisterProperties(e,t=!0,n,i,o=3,s){o=ln(e.scope)?o:e.scope;let a=e.properties;if(a)for(let d in a){let c=a[d];if(t&&F$(d,c)){delete a[d];continue}if(c.source=n,c.defaultDefaultValue=a[d].default,this.updatePropertyDefaultValue(d,c),uc.test(d)?c.scope=void 0:(c.scope=ln(c.scope)?o:c.scope,c.restricted=ln(c.restricted)?!!i?.includes(d):c.restricted),a[d].hasOwnProperty("included")&&!a[d].included){this.excludedConfigurationProperties[d]=a[d],delete a[d];continue}else this.configurationProperties[d]=a[d],a[d].policy?.name&&this.policyConfigurations.set(a[d].policy.name,d);!a[d].deprecationMessage&&a[d].markdownDeprecationMessage&&(a[d].deprecationMessage=a[d].markdownDeprecationMessage),s.add(d)}let l=e.allOf;if(l)for(let d of l)this.validateAndRegisterProperties(d,t,n,i,o,s)}getConfigurations(){return this.configurationContributors}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}getExcludedConfigurationProperties(){return this.excludedConfigurationProperties}getRegisteredDefaultConfigurations(){return[...this.registeredConfigurationDefaults]}getConfigurationDefaultsOverrides(){let e=new Map;for(let[t,n]of this.configurationDefaultsOverrides)n.configurationDefaultOverrideValue&&e.set(t,n.configurationDefaultOverrideValue);return e}registerJSONConfiguration(e){let t=n=>{let i=n.properties;if(i)for(let s in i)this.updateSchema(s,i[s]);n.allOf?.forEach(t)};t(e)}updateSchema(e,t){switch(Qy.properties[e]=t,t.scope){case 1:ME.properties[e]=t;break;case 2:OE.properties[e]=t;break;case 6:PE.properties[e]=t;break;case 3:AE.properties[e]=t;break;case 4:Xy.properties[e]=t;break;case 5:Xy.properties[e]=t,this.resourceLanguageSettingsSchema.properties[e]=t;break}}removeFromSchema(e,t){switch(delete Qy.properties[e],t.scope){case 1:delete ME.properties[e];break;case 2:delete OE.properties[e];break;case 6:delete PE.properties[e];break;case 3:delete AE.properties[e];break;case 4:case 5:delete Xy.properties[e],delete this.resourceLanguageSettingsSchema.properties[e];break}}updateOverridePropertyPatternKey(){for(let e of this.overrideIdentifiers.values()){let t=`[${e}]`,n={type:"object",description:u("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:u("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:vh};this.updatePropertyDefaultValue(t,n),Qy.properties[t]=n,ME.properties[t]=n,OE.properties[t]=n,PE.properties[t]=n,AE.properties[t]=n,Xy.properties[t]=n}}registerOverridePropertyPatternKey(){let e={type:"object",description:u("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:u("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:vh};Qy.patternProperties[yh]=e,ME.patternProperties[yh]=e,OE.patternProperties[yh]=e,PE.patternProperties[yh]=e,AE.patternProperties[yh]=e,Xy.patternProperties[yh]=e,this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){let n=this.configurationDefaultsOverrides.get(e)?.configurationDefaultOverrideValue,i,o;n&&(!t.disallowConfigurationDefault||!n.source)&&(i=n.value,o=n.source),Oi(i)&&(i=t.defaultDefaultValue,o=void 0),Oi(i)&&(i=N$(t.type)),t.default=i,t.defaultValueSource=o}},oz="\\[([^\\]]+)\\]",iz=new RegExp(oz,"g"),yh=`^(${oz})+$`,uc=new RegExp(yh);function MM(r){let e=[];if(uc.test(r)){let t=iz.exec(r);for(;t?.length;){let n=t[1].trim();n&&e.push(n),t=iz.exec(r)}}return ai(e)}function N$(r){switch(Array.isArray(r)?r[0]:r){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}var FE=new RM;Te.add(In.Configuration,FE);function F$(r,e){return r.trim()?uc.test(r)?u("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",r):FE.getConfigurationProperties()[r]!==void 0?u("config.property.duplicate","Cannot register '{0}'. This property is already registered.",r):e.policy?.name&&FE.getPolicyConfigurations().get(e.policy?.name)!==void 0?u("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",r,e.policy?.name,FE.getPolicyConfigurations().get(e.policy?.name)):null:u("config.property.empty","Cannot register an empty property")}function rz(r){switch(r){case"application":return 1;case"machine":return 2;case"resource":return 4;case"machine-overridable":return 6;case"language-overridable":return 5;default:return 3}}var Ua=8,BE=class{_values;constructor(e){this._values=e}hasChanged(e){return this._values[e]}},Zy=class{stableMinimapLayoutInput;stableFitMaxMinimapScale;stableFitRemainingWidth;constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},Gt=class{id;name;defaultValue;schema;constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return VE(e,t)}compute(e,t,n){return n}},zm=class{constructor(e,t){this.newValue=e;this.didChange=t}};function VE(r,e){if(typeof r!="object"||typeof e!="object"||!r||!e)return new zm(e,r!==e);if(Array.isArray(r)||Array.isArray(e)){let n=Array.isArray(r)&&Array.isArray(e)&&sn(r,e);return new zm(e,!n)}let t=!1;for(let n in e)if(e.hasOwnProperty(n)){let i=VE(r[n],e[n]);i.didChange&&(r[n]=i.newValue,t=!0)}return new zm(r,t)}var Sh=class{id;name;defaultValue;schema=void 0;constructor(e){this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return VE(e,t)}validate(e){return this.defaultValue}},Au=class{id;name;defaultValue;schema;constructor(e,t,n,i){this.id=e,this.name=t,this.defaultValue=n,this.schema=i}applyUpdate(e,t){return VE(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}};function Me(r,e){return typeof r>"u"?e:r==="false"?!1:!!r}var ct=class extends Au{constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="boolean",i.default=n),super(e,t,n,i)}validate(e){return Me(e,this.defaultValue)}};function B$(r,e,t,n){if(typeof r>"u")return e;let i=parseInt(r,10);return isNaN(i)?e:(i=Math.max(t,i),i=Math.min(n,i),i|0)}var Ft=class r extends Au{static clampedInt(e,t,n,i){return B$(e,t,n,i)}minimum;maximum;constructor(e,t,n,i,o,s=void 0){typeof s<"u"&&(s.type="integer",s.default=n,s.minimum=i,s.maximum=o),super(e,t,n,s),this.minimum=i,this.maximum=o}validate(e){return r.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}};var ea=class r extends Au{static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;let n=parseFloat(e);return isNaN(n)?t:n}validationFn;constructor(e,t,n,i,o){typeof o<"u"&&(o.type="number",o.default=n),super(e,t,n,o),this.validationFn=i}validate(e){return this.validationFn(r.float(e,this.defaultValue))}},Bo=class r extends Au{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,i=void 0){typeof i<"u"&&(i.type="string",i.default=n),super(e,t,n,i)}validate(e){return r.string(e,this.defaultValue)}};function Mn(r,e,t,n){return typeof r!="string"?e:n&&r in n?n[r]:t.indexOf(r)===-1?e:r}var cn=class extends Au{_allowedValues;constructor(e,t,n,i,o=void 0){typeof o<"u"&&(o.type="string",o.enum=i,o.default=n),super(e,t,n,o),this._allowedValues=i}validate(e){return Mn(e,this.defaultValue,this._allowedValues)}},Um=class extends Gt{_allowedValues;_convert;constructor(e,t,n,i,o,s,a=void 0){typeof a<"u"&&(a.type="string",a.enum=o,a.default=i),super(e,t,n,a),this._allowedValues=o,this._convert=s}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}};function W$(r){switch(r){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}var OM=class extends Gt{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[u("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),u("accessibilitySupport.on","Optimize for usage with a Screen Reader."),u("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:u("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}},PM=class extends Gt{constructor(){let e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:u("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:u("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{insertSpace:Me(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Me(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}};function V$(r){switch(r){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}function H$(r){switch(r){case"line":return 1;case"block":return 2;case"underline":return 3;case"line-thin":return 4;case"block-outline":return 5;case"underline-thin":return 6}}var AM=class extends Sh{constructor(){super(144)}compute(e,t,n){let i=["monaco-editor"];return t.get(40)&&i.push(t.get(40)),e.extraEditorClassName&&i.push(e.extraEditorClassName),t.get(75)==="default"?i.push("mouse-default"):t.get(75)==="copy"&&i.push("mouse-copy"),t.get(113)&&i.push("showUnused"),t.get(142)&&i.push("showDeprecated"),i.join(" ")}},NM=class extends ct{constructor(){super(38,"emptySelectionClipboard",!0,{description:u("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}},FM=class extends Gt{constructor(){let e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(42,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:u("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[u("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),u("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),u("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:u("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[u("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),u("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),u("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:u("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:u("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:Pe},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:u("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:u("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{cursorMoveOnType:Me(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":Mn(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":Mn(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Me(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Me(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Me(t.loop,this.defaultValue.loop)}}},Ch=class r extends Gt{static OFF='"liga" off, "calt" off';static ON='"liga" on, "calt" on';constructor(){super(52,"fontLigatures",r.OFF,{anyOf:[{type:"boolean",description:u("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:u("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:u("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"||e.length===0?r.OFF:e==="true"?r.ON:e:e?r.ON:r.OFF}},Gm=class r extends Gt{static OFF="normal";static TRANSLATE="translate";constructor(){super(55,"fontVariations",r.OFF,{anyOf:[{type:"boolean",description:u("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:u("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:u("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?r.OFF:e==="true"?r.TRANSLATE:e:e?r.TRANSLATE:r.OFF}compute(e,t,n){return e.fontInfo.fontVariationSettings}},BM=class extends Sh{constructor(){super(51)}compute(e,t,n){return e.fontInfo}},WM=class extends Au{constructor(){super(53,"fontSize",Nr.fontSize,{type:"number",minimum:6,maximum:100,default:Nr.fontSize,description:u("fontSize","Controls the font size in pixels.")})}validate(e){let t=ea.float(e,this.defaultValue);return t===0?Nr.fontSize:ea.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}},VM=class r extends Gt{static SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];static MINIMUM_VALUE=1;static MAXIMUM_VALUE=1e3;constructor(){super(54,"fontWeight",Nr.fontWeight,{anyOf:[{type:"number",minimum:r.MINIMUM_VALUE,maximum:r.MAXIMUM_VALUE,errorMessage:u("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:r.SUGGESTION_VALUES}],default:Nr.fontWeight,description:u("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(Ft.clampedInt(e,Nr.fontWeight,r.MINIMUM_VALUE,r.MAXIMUM_VALUE))}},HM=class extends Gt{constructor(){let e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[u("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),u("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),u("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(59,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:u("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:u("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:u("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:u("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:u("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:u("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:u("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:u("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:u("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:u("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:u("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{multiple:Mn(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??Mn(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??Mn(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??Mn(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??Mn(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??Mn(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??Mn(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:Bo.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:Bo.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:Bo.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:Bo.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:Bo.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:Bo.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}},UM=class extends Gt{constructor(){let e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(61,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:u("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:u("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:u("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:u("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:u("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Me(t.enabled,this.defaultValue.enabled),delay:Ft.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Me(t.sticky,this.defaultValue.sticky),hidingDelay:Ft.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:Me(t.above,this.defaultValue.above)}}};var Jy=class r extends Sh{constructor(){super(147)}compute(e,t,n){return r.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){let t=e.height/e.lineHeight,n=Math.floor(e.paddingTop/e.lineHeight),i=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(i=Math.max(i,t-1));let o=(n+e.viewLineCount+i)/(e.pixelRatio*e.height),s=Math.floor(e.viewLineCount/o);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:n,extraLinesBeyondLastLine:i,desiredRatio:o,minimapLineCount:s}}static _computeMinimapLayout(e,t){let n=e.outerWidth,i=e.outerHeight,o=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(o*i),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:i};let s=t.stableMinimapLayoutInput,a=s&&e.outerHeight===s.outerHeight&&e.lineHeight===s.lineHeight&&e.typicalHalfwidthCharacterWidth===s.typicalHalfwidthCharacterWidth&&e.pixelRatio===s.pixelRatio&&e.scrollBeyondLastLine===s.scrollBeyondLastLine&&e.paddingTop===s.paddingTop&&e.paddingBottom===s.paddingBottom&&e.minimap.enabled===s.minimap.enabled&&e.minimap.side===s.minimap.side&&e.minimap.size===s.minimap.size&&e.minimap.showSlider===s.minimap.showSlider&&e.minimap.renderCharacters===s.minimap.renderCharacters&&e.minimap.maxColumn===s.minimap.maxColumn&&e.minimap.scale===s.minimap.scale&&e.verticalScrollbarWidth===s.verticalScrollbarWidth&&e.isViewportWrapping===s.isViewportWrapping,l=e.lineHeight,d=e.typicalHalfwidthCharacterWidth,c=e.scrollBeyondLastLine,p=e.minimap.renderCharacters,h=o>=2?Math.round(e.minimap.scale*2):e.minimap.scale,g=e.minimap.maxColumn,f=e.minimap.size,m=e.minimap.side,b=e.verticalScrollbarWidth,v=e.viewLineCount,S=e.remainingWidth,x=e.isViewportWrapping,E=p?2:3,w=Math.floor(o*i),P=w/o,R=!1,O=!1,M=E*h,K=h/o,$=1;if(f==="fill"||f==="fit"){let{typicalViewportLineCount:ue,extraLinesBeforeFirstLine:ae,extraLinesBeyondLastLine:ke,desiredRatio:Re,minimapLineCount:wt}=r.computeContainedMinimapLineCount({viewLineCount:v,scrollBeyondLastLine:c,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:i,lineHeight:l,pixelRatio:o});if(v/wt>1)R=!0,O=!0,h=1,M=1,K=h/o;else{let Ue=!1,co=h+1;if(f==="fit"){let _i=Math.ceil((ae+v+ke)*M);x&&a&&S<=t.stableFitRemainingWidth?(Ue=!0,co=t.stableFitMaxMinimapScale):Ue=_i>w}if(f==="fill"||Ue){R=!0;let _i=h;M=Math.min(l*o,Math.max(1,Math.floor(1/Re))),x&&a&&S<=t.stableFitRemainingWidth&&(co=t.stableFitMaxMinimapScale),h=Math.min(co,Math.max(1,Math.floor(M/E))),h>_i&&($=Math.min(2,h/_i)),K=h/o/$,w=Math.ceil(Math.max(ue,ae+v+ke)*M),x?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=S,t.stableFitMaxMinimapScale=h):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}let Q=Math.floor(g*K),he=Math.min(Q,Math.max(0,Math.floor((S-b-2)*K/(d+K)))+Ua),De=Math.floor(o*he),ce=De/o;De=Math.floor(De*$);let se=p?1:2,fe=m==="left"?0:n-he-b;return{renderMinimap:se,minimapLeft:fe,minimapWidth:he,minimapHeightIsEditorHeight:R,minimapIsSampling:O,minimapScale:h,minimapLineHeight:M,minimapCanvasInnerWidth:De,minimapCanvasInnerHeight:w,minimapCanvasOuterWidth:ce,minimapCanvasOuterHeight:P}}static computeLayout(e,t){let n=t.outerWidth|0,i=t.outerHeight|0,o=t.lineHeight|0,s=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,d=t.pixelRatio,c=t.viewLineCount,p=e.get(139),h=p==="inherit"?e.get(138):p,g=h==="inherit"?e.get(134):h,f=e.get(137),m=t.isDominatedByLongLines,b=e.get(58),v=e.get(69).renderType!==0,S=e.get(70),x=e.get(107),E=e.get(85),w=e.get(74),P=e.get(105),R=P.verticalScrollbarSize,O=P.verticalHasArrows,M=P.arrowSize,K=P.horizontalScrollbarSize,$=e.get(44),Q=e.get(112)!=="never",he=e.get(67);$&&Q&&(he+=16);let De=0;if(v){let qr=Math.max(s,S);De=Math.round(qr*l)}let ce=0;b&&(ce=o*t.glyphMarginDecorationLaneCount);let se=0,fe=se+ce,ue=fe+De,ae=ue+he,ke=n-ce-De-he,Re=!1,wt=!1,ht=-1;h==="inherit"&&m?(Re=!0,wt=!0):g==="on"||g==="bounded"?wt=!0:g==="wordWrapColumn"&&(ht=f);let Ue=r._computeMinimapLayout({outerWidth:n,outerHeight:i,lineHeight:o,typicalHalfwidthCharacterWidth:a,pixelRatio:d,scrollBeyondLastLine:x,paddingTop:E.top,paddingBottom:E.bottom,minimap:w,verticalScrollbarWidth:R,viewLineCount:c,remainingWidth:ke,isViewportWrapping:wt},t.memory||new Zy);Ue.renderMinimap!==0&&Ue.minimapLeft===0&&(se+=Ue.minimapWidth,fe+=Ue.minimapWidth,ue+=Ue.minimapWidth,ae+=Ue.minimapWidth);let co=ke-Ue.minimapWidth,_i=Math.max(1,Math.floor((co-R-2)/a)),kr=O?M:0;return wt&&(ht=Math.max(1,_i),g==="bounded"&&(ht=Math.min(ht,f))),{width:n,height:i,glyphMarginLeft:se,glyphMarginWidth:ce,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:fe,lineNumbersWidth:De,decorationsLeft:ue,decorationsWidth:he,contentLeft:ae,contentWidth:co,minimap:Ue,viewportColumn:_i,isWordWrapMinified:Re,isViewportWrapping:wt,wrappingColumn:ht,verticalScrollbarWidth:R,horizontalScrollbarHeight:K,overviewRuler:{top:kr,width:R,height:i-2*kr,right:0}}}},zM=class extends Gt{constructor(){super(141,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[u("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),u("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:u("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return Mn(e,"simple",["simple","advanced"])}compute(e,t,n){return t.get(2)===2?"advanced":n}};var KM=class extends Gt{constructor(){let e={enabled:"onCode"};super(66,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:["off","onCode","on"],default:e.enabled,enumDescriptions:[u("editor.lightbulb.enabled.off","Disable the code action menu."),u("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),u("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:u("enabled","Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Mn(e.enabled,this.defaultValue.enabled,["off","onCode","on"])}}},GM=class extends Gt{constructor(){let e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(117,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:u("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:u("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:u("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:u("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Me(t.enabled,this.defaultValue.enabled),maxLineCount:Ft.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:Mn(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:Me(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}},jM=class extends Gt{constructor(){let e={enabled:"on",fontSize:0,fontFamily:"",padding:!1,maximumLength:43};super(143,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:u("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[u("editor.inlayHints.on","Inlay hints are enabled"),u("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",Pe?"Ctrl+Option":"Ctrl+Alt"),u("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",Pe?"Ctrl+Option":"Ctrl+Alt"),u("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:u("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:u("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:u("inlayHints.padding","Enables the padding around the inlay hints in the editor.")},"editor.inlayHints.maximumLength":{type:"number",default:e.maximumLength,markdownDescription:u("inlayHints.maximumLength","Maximum overall length of inlay hints, for a single line, before they get truncated by the editor. Set to `0` to never truncate")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:Mn(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Ft.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:Bo.string(t.fontFamily,this.defaultValue.fontFamily),padding:Me(t.padding,this.defaultValue.padding),maximumLength:Ft.clampedInt(t.maximumLength,this.defaultValue.maximumLength,0,Number.MAX_SAFE_INTEGER)}}},$M=class extends Gt{constructor(){super(67,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):Ft.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,n){return n<0?Ft.clampedInt(-n*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):n}},qM=class extends ea{constructor(){super(68,"lineHeight",Nr.lineHeight,e=>ea.clamp(e,0,150),{markdownDescription:u("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}},YM=class extends Gt{constructor(){let e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(74,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:u("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:u("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[u("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),u("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),u("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:u("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:u("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:u("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:u("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:u("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:u("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:u("minimap.showRegionSectionHeaders","Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:u("minimap.showMarkSectionHeaders","Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:u("minimap.sectionHeaderFontSize","Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:u("minimap.sectionHeaderLetterSpacing","Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Me(t.enabled,this.defaultValue.enabled),autohide:Me(t.autohide,this.defaultValue.autohide),size:Mn(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:Mn(t.side,this.defaultValue.side,["right","left"]),showSlider:Mn(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Me(t.renderCharacters,this.defaultValue.renderCharacters),scale:Ft.clampedInt(t.scale,1,1,3),maxColumn:Ft.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:Me(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:Me(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:ea.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:ea.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}};function U$(r){return r==="ctrlCmd"?Pe?"metaKey":"ctrlKey":"altKey"}var XM=class extends Gt{constructor(){super(85,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:u("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:u("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{top:Ft.clampedInt(t.top,0,0,1e3),bottom:Ft.clampedInt(t.bottom,0,0,1e3)}}},QM=class extends Gt{constructor(){let e={enabled:!0,cycle:!0};super(87,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:u("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:u("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Me(t.enabled,this.defaultValue.enabled),cycle:Me(t.cycle,this.defaultValue.cycle)}}},ZM=class extends Sh{constructor(){super(145)}compute(e,t,n){return e.pixelRatio}},JM=class extends Gt{constructor(){super(89,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}},eO=class extends Gt{defaultValue;constructor(){let e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[u("on","Quick suggestions show inside the suggest widget"),u("inline","Quick suggestions show as ghost text"),u("off","Quick suggestions are disabled")]}];super(91,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:u("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:u("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:u("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:u("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){let d=e?"on":"off";return{comments:d,strings:d,other:d}}if(!e||typeof e!="object")return this.defaultValue;let{other:t,comments:n,strings:i}=e,o=["on","inline","off"],s,a,l;return typeof t=="boolean"?s=t?"on":"off":s=Mn(t,this.defaultValue.other,o),typeof n=="boolean"?a=n?"on":"off":a=Mn(n,this.defaultValue.comments,o),typeof i=="boolean"?l=i?"on":"off":l=Mn(i,this.defaultValue.strings,o),{other:s,comments:a,strings:l}}};var tO=class extends Gt{constructor(){super(69,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[u("lineNumbers.off","Line numbers are not rendered."),u("lineNumbers.on","Line numbers are rendered as absolute number."),u("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),u("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:u("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}};function xh(r){let e=r.get(100);return e==="editable"?r.get(93):e!=="on"}var nO=class extends Gt{constructor(){let e=[],t={type:"number",description:u("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(104,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:u("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:u("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){let t=[];for(let n of e)if(typeof n=="number")t.push({column:Ft.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){let i=n;t.push({column:Ft.clampedInt(i.column,0,0,1e4),color:i.color})}return t.sort((n,i)=>n.column-i.column),t}return this.defaultValue}},iO=class extends Gt{constructor(){super(94,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}};function sz(r,e){if(typeof r!="string")return e;switch(r){case"hidden":return 2;case"visible":return 3;default:return 1}}var oO=class extends Gt{constructor(){let e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(105,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[u("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),u("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),u("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:u("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[u("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),u("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),u("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:u("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:u("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:u("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:u("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:u("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e,n=Ft.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),i=Ft.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Ft.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:sz(t.vertical,this.defaultValue.vertical),horizontal:sz(t.horizontal,this.defaultValue.horizontal),useShadows:Me(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Me(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Me(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Me(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Me(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:Ft.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:i,verticalSliderSize:Ft.clampedInt(t.verticalSliderSize,i,0,1e3),scrollByPage:Me(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:Me(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}},Ha="inUntrustedWorkspace",Ih={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"},rO=class extends Gt{constructor(){let e={nonBasicASCII:Ha,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:Ha,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(127,"unicodeHighlight",e,{[Ih.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Ha],default:e.nonBasicASCII,description:u("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[Ih.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:u("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[Ih.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:u("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[Ih.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Ha],default:e.includeComments,description:u("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[Ih.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,Ha],default:e.includeStrings,description:u("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[Ih.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:u("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[Ih.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:u("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&e&&(wn(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},n=!0)),t.allowedLocales&&e&&(wn(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},n=!0));let i=super.applyUpdate(e,t);return n?new zm(i.newValue,!0):i}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{nonBasicASCII:Km(t.nonBasicASCII,Ha,[!0,!1,Ha]),invisibleCharacters:Me(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:Me(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Km(t.includeComments,Ha,[!0,!1,Ha]),includeStrings:Km(t.includeStrings,Ha,[!0,!1,Ha]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;let n={};for(let[i,o]of Object.entries(e))o===!0&&(n[i]=!0);return n}},sO=class extends Gt{constructor(){let e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default",syntaxHighlightingEnabled:!1};super(63,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:u("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[u("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),u("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),u("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:u("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.syntaxHighlightingEnabled":{type:"boolean",default:e.syntaxHighlightingEnabled,description:u("inlineSuggest.syntaxHighlightingEnabled","Controls whether to show syntax highlighting for inline suggestions in the editor.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:u("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:u("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Me(t.enabled,this.defaultValue.enabled),mode:Mn(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:Mn(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:Me(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:Me(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:Bo.string(t.fontFamily,this.defaultValue.fontFamily),syntaxHighlightingEnabled:Me(t.syntaxHighlightingEnabled,this.defaultValue.syntaxHighlightingEnabled)}}},aO=class extends Gt{constructor(){let e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};super(64,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:u("inlineEdit.enabled","Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[u("inlineEdit.showToolbar.always","Show the inline edit toolbar whenever an inline suggestion is shown."),u("inlineEdit.showToolbar.onHover","Show the inline edit toolbar when hovering over an inline suggestion."),u("inlineEdit.showToolbar.never","Never show the inline edit toolbar.")],description:u("inlineEdit.showToolbar","Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:u("inlineEdit.fontFamily","Controls the font family of the inline edit.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Me(t.enabled,this.defaultValue.enabled),showToolbar:Mn(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:Bo.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:Me(t.keepOnBlur,this.defaultValue.keepOnBlur)}}},lO=class extends Gt{constructor(){let e={enabled:Gl.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Gl.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:u("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:u("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Me(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:Me(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}},dO=class extends Gt{constructor(){let e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[u("editor.guides.bracketPairs.true","Enables bracket pair guides."),u("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),u("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:u("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[u("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),u("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),u("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:u("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:u("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:u("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[u("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),u("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),u("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:u("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{bracketPairs:Km(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Km(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Me(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Me(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Km(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}};function Km(r,e,t){let n=t.indexOf(r);return n===-1?e:t[n]}var cO=class extends Gt{constructor(){let e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(120,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[u("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),u("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:u("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:u("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:u("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:u("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[u("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),u("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),u("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),u("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:u("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:u("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:u("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:u("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:u("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:u("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:u("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:u("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:u("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{insertMode:Mn(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Me(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Me(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Me(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Me(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:Mn(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:Me(t.showIcons,this.defaultValue.showIcons),showStatusBar:Me(t.showStatusBar,this.defaultValue.showStatusBar),preview:Me(t.preview,this.defaultValue.preview),previewMode:Mn(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Me(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Me(t.showMethods,this.defaultValue.showMethods),showFunctions:Me(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Me(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Me(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:Me(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:Me(t.showFields,this.defaultValue.showFields),showVariables:Me(t.showVariables,this.defaultValue.showVariables),showClasses:Me(t.showClasses,this.defaultValue.showClasses),showStructs:Me(t.showStructs,this.defaultValue.showStructs),showInterfaces:Me(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Me(t.showModules,this.defaultValue.showModules),showProperties:Me(t.showProperties,this.defaultValue.showProperties),showEvents:Me(t.showEvents,this.defaultValue.showEvents),showOperators:Me(t.showOperators,this.defaultValue.showOperators),showUnits:Me(t.showUnits,this.defaultValue.showUnits),showValues:Me(t.showValues,this.defaultValue.showValues),showConstants:Me(t.showConstants,this.defaultValue.showConstants),showEnums:Me(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Me(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Me(t.showKeywords,this.defaultValue.showKeywords),showWords:Me(t.showWords,this.defaultValue.showWords),showColors:Me(t.showColors,this.defaultValue.showColors),showFiles:Me(t.showFiles,this.defaultValue.showFiles),showReferences:Me(t.showReferences,this.defaultValue.showReferences),showFolders:Me(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Me(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Me(t.showSnippets,this.defaultValue.showSnippets),showUsers:Me(t.showUsers,this.defaultValue.showUsers),showIssues:Me(t.showIssues,this.defaultValue.showIssues)}}},uO=class extends Gt{constructor(){super(115,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:u("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:u("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Me(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:Me(e.selectSubwords,this.defaultValue.selectSubwords)}}},pO=class extends Gt{constructor(){let e=[];super(132,"wordSegmenterLocales",e,{anyOf:[{description:u("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:u("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){let t=[];for(let n of e)if(typeof n=="string")try{Intl.Segmenter.supportedLocalesOf(n).length>0&&t.push(n)}catch{}return t}return this.defaultValue}};var hO=class extends Gt{constructor(){super(140,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[u("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),u("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),u("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),u("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:u("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,n){return t.get(2)===2?0:n}},gO=class extends Sh{constructor(){super(148)}compute(e,t,n){let i=t.get(147);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:i.isWordWrapMinified,isViewportWrapping:i.isViewportWrapping,wrappingColumn:i.wrappingColumn}}},mO=class extends Gt{constructor(){let e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:u("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:u("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[u("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),u("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Me(t.enabled,this.defaultValue.enabled),showDropSelector:Mn(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}},fO=class extends Gt{constructor(){let e={enabled:!0,showPasteSelector:"afterPaste"};super(86,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:u("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:u("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[u("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),u("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:Me(t.enabled,this.defaultValue.enabled),showPasteSelector:Mn(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}},z$="Consolas, 'Courier New', monospace",K$="Menlo, Monaco, 'Courier New', monospace",G$="'Droid Sans Mono', 'monospace', monospace",Nr={fontFamily:Pe?K$:Xt?G$:z$,fontWeight:"normal",fontSize:Pe?12:14,lineHeight:0,letterSpacing:0},jm=[];function J(r){return jm[r.id]=r,r}var $l={acceptSuggestionOnCommitCharacter:J(new ct(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:u("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:J(new cn(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",u("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:u("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:J(new OM),accessibilityPageSize:J(new Ft(3,"accessibilityPageSize",10,1,1073741824,{description:u("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:J(new Bo(4,"ariaLabel",u("editorViewAccessibleLabel","Editor content"))),ariaRequired:J(new ct(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:J(new ct(8,"screenReaderAnnounceInlineSuggestion",!0,{description:u("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:J(new cn(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",u("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),u("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:u("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:J(new cn(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",u("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),u("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:u("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:J(new cn(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",u("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:u("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:J(new cn(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",u("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:u("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:J(new cn(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",u("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),u("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:u("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:J(new Um(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],W$,{enumDescriptions:[u("editor.autoIndent.none","The editor will not insert indentation automatically."),u("editor.autoIndent.keep","The editor will keep the current line's indentation."),u("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),u("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),u("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:u("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:J(new ct(13,"automaticLayout",!1)),autoSurround:J(new cn(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[u("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),u("editor.autoSurround.quotes","Surround with quotes but not brackets."),u("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:u("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:J(new lO),bracketPairGuides:J(new dO),stickyTabStops:J(new ct(118,"stickyTabStops",!1,{description:u("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:J(new ct(17,"codeLens",!0,{description:u("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:J(new Bo(18,"codeLensFontFamily","",{description:u("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:J(new Ft(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:u("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:J(new ct(20,"colorDecorators",!0,{description:u("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:J(new cn(150,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[u("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),u("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),u("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:u("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:J(new Ft(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:u("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:J(new ct(22,"columnSelection",!1,{description:u("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:J(new PM),contextmenu:J(new ct(24,"contextmenu",!0)),copyWithSyntaxHighlighting:J(new ct(25,"copyWithSyntaxHighlighting",!0,{description:u("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:J(new Um(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],V$,{description:u("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:J(new cn(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[u("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),u("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),u("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:u("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:J(new Um(28,"cursorStyle",1,"line",["line","block","underline","line-thin","block-outline","underline-thin"],H$,{description:u("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:J(new Ft(29,"cursorSurroundingLines",0,0,1073741824,{description:u("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:J(new cn(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[u("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),u("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:u("cursorSurroundingLinesStyle","Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:J(new Ft(31,"cursorWidth",0,0,1073741824,{markdownDescription:u("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:J(new ct(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:J(new ct(33,"disableMonospaceOptimizations",!1)),domReadOnly:J(new ct(34,"domReadOnly",!1)),dragAndDrop:J(new ct(35,"dragAndDrop",!0,{description:u("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:J(new NM),dropIntoEditor:J(new mO),experimentalEditContextEnabled:J(new ct(37,"experimentalEditContextEnabled",!1,{description:u("experimentalEditContextEnabled","Sets whether the new experimental edit context should be used instead of the text area.")})),stickyScroll:J(new GM),experimentalWhitespaceRendering:J(new cn(39,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[u("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),u("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),u("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:u("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:J(new Bo(40,"extraEditorClassName","")),fastScrollSensitivity:J(new ea(41,"fastScrollSensitivity",5,r=>r<=0?5:r,{markdownDescription:u("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:J(new FM),fixedOverflowWidgets:J(new ct(43,"fixedOverflowWidgets",!1)),folding:J(new ct(44,"folding",!0,{description:u("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:J(new cn(45,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[u("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),u("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:u("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:J(new ct(46,"foldingHighlight",!0,{description:u("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:J(new ct(47,"foldingImportsByDefault",!1,{description:u("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:J(new Ft(48,"foldingMaximumRegions",5e3,10,65e3,{description:u("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:J(new ct(49,"unfoldOnClickAfterEndOfLine",!1,{description:u("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:J(new Bo(50,"fontFamily",Nr.fontFamily,{description:u("fontFamily","Controls the font family.")})),fontInfo:J(new BM),fontLigatures2:J(new Ch),fontSize:J(new WM),fontWeight:J(new VM),fontVariations:J(new Gm),formatOnPaste:J(new ct(56,"formatOnPaste",!1,{description:u("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:J(new ct(57,"formatOnType",!1,{description:u("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:J(new ct(58,"glyphMargin",!0,{description:u("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:J(new HM),hideCursorInOverviewRuler:J(new ct(60,"hideCursorInOverviewRuler",!1,{description:u("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:J(new UM),inDiffEditor:J(new ct(62,"inDiffEditor",!1)),letterSpacing:J(new ea(65,"letterSpacing",Nr.letterSpacing,r=>ea.clamp(r,-5,20),{description:u("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:J(new KM),lineDecorationsWidth:J(new $M),lineHeight:J(new qM),lineNumbers:J(new tO),lineNumbersMinChars:J(new Ft(70,"lineNumbersMinChars",5,1,300)),linkedEditing:J(new ct(71,"linkedEditing",!1,{description:u("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:J(new ct(72,"links",!0,{description:u("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:J(new cn(73,"matchBrackets","always",["always","near","never"],{description:u("matchBrackets","Highlight matching brackets.")})),minimap:J(new YM),mouseStyle:J(new cn(75,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:J(new ea(76,"mouseWheelScrollSensitivity",1,r=>r===0?1:r,{markdownDescription:u("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:J(new ct(77,"mouseWheelZoom",!1,{markdownDescription:Pe?u("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):u("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:J(new ct(78,"multiCursorMergeOverlapping",!0,{description:u("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:J(new Um(79,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],U$,{markdownEnumDescriptions:[u("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),u("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:u({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:J(new cn(80,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[u("multiCursorPaste.spread","Each cursor pastes a single line of the text."),u("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:u("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:J(new Ft(81,"multiCursorLimit",1e4,1,1e5,{markdownDescription:u("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:J(new cn(82,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[u("occurrencesHighlight.off","Does not highlight occurrences."),u("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),u("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:u("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:J(new ct(83,"overviewRulerBorder",!0,{description:u("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:J(new Ft(84,"overviewRulerLanes",3,0,3)),padding:J(new XM),pasteAs:J(new fO),parameterHints:J(new QM),peekWidgetDefaultFocus:J(new cn(88,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[u("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),u("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:u("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),placeholder:J(new JM),definitionLinkOpensInPeek:J(new ct(90,"definitionLinkOpensInPeek",!1,{description:u("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:J(new eO),quickSuggestionsDelay:J(new Ft(92,"quickSuggestionsDelay",10,0,1073741824,{description:u("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:J(new ct(93,"readOnly",!1)),readOnlyMessage:J(new iO),renameOnType:J(new ct(95,"renameOnType",!1,{description:u("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:u("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:J(new ct(96,"renderControlCharacters",!0,{description:u("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:J(new cn(97,"renderFinalNewline",Xt?"dimmed":"on",["off","on","dimmed"],{description:u("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:J(new cn(98,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",u("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:u("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:J(new ct(99,"renderLineHighlightOnlyWhenFocus",!1,{description:u("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:J(new cn(100,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:J(new cn(101,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",u("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),u("renderWhitespace.selection","Render whitespace characters only on selected text."),u("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:u("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:J(new Ft(102,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:J(new ct(103,"roundedSelection",!0,{description:u("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:J(new nO),scrollbar:J(new oO),scrollBeyondLastColumn:J(new Ft(106,"scrollBeyondLastColumn",4,0,1073741824,{description:u("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:J(new ct(107,"scrollBeyondLastLine",!0,{description:u("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:J(new ct(108,"scrollPredominantAxis",!0,{description:u("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:J(new ct(109,"selectionClipboard",!0,{description:u("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:Xt})),selectionHighlight:J(new ct(110,"selectionHighlight",!0,{description:u("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:J(new ct(111,"selectOnLineNumbers",!0)),showFoldingControls:J(new cn(112,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[u("showFoldingControls.always","Always show the folding controls."),u("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),u("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:u("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:J(new ct(113,"showUnused",!0,{description:u("showUnused","Controls fading out of unused code.")})),showDeprecated:J(new ct(142,"showDeprecated",!0,{description:u("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:J(new jM),snippetSuggestions:J(new cn(114,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[u("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),u("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),u("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),u("snippetSuggestions.none","Do not show snippet suggestions.")],description:u("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:J(new uO),smoothScrolling:J(new ct(116,"smoothScrolling",!1,{description:u("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:J(new Ft(119,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:J(new cO),inlineSuggest:J(new sO),inlineEdit:J(new aO),inlineCompletionsAccessibilityVerbose:J(new ct(151,"inlineCompletionsAccessibilityVerbose",!1,{description:u("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:J(new Ft(121,"suggestFontSize",0,0,1e3,{markdownDescription:u("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:J(new Ft(122,"suggestLineHeight",0,0,1e3,{markdownDescription:u("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:J(new ct(123,"suggestOnTriggerCharacters",!0,{description:u("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:J(new cn(124,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[u("suggestSelection.first","Always select the first suggestion."),u("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),u("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:u("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:J(new cn(125,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[u("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),u("tabCompletion.off","Disable tab completions."),u("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:u("tabCompletion","Enables tab completions.")})),tabIndex:J(new Ft(126,"tabIndex",0,-1,1073741824)),unicodeHighlight:J(new rO),unusualLineTerminators:J(new cn(128,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[u("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),u("unusualLineTerminators.off","Unusual line terminators are ignored."),u("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:u("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:J(new ct(129,"useShadowDOM",!0)),useTabStops:J(new ct(130,"useTabStops",!0,{description:u("useTabStops","Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:J(new cn(131,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[u("wordBreak.normal","Use the default line break rule."),u("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:u("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:J(new pO),wordSeparators:J(new Bo(133,"wordSeparators",CM,{description:u("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:J(new cn(134,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[u("wordWrap.off","Lines will never wrap."),u("wordWrap.on","Lines will wrap at the viewport width."),u({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),u({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:u({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:J(new Bo(135,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:J(new Bo(136,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:J(new Ft(137,"wordWrapColumn",80,1,1073741824,{markdownDescription:u({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:J(new cn(138,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:J(new cn(139,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:J(new AM),defaultColorDecorators:J(new ct(149,"defaultColorDecorators",!1,{markdownDescription:u("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:J(new ZM),tabFocusMode:J(new ct(146,"tabFocusMode",!1,{markdownDescription:u("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:J(new Jy),wrappingInfo:J(new gO),wrappingIndent:J(new hO),wrappingStrategy:J(new zM)};var ql=new class{_zoomLevel=0;_onDidChangeZoomLevel=new T;onDidChangeZoomLevel=this._onDidChangeZoomLevel.event;getZoomLevel(){return this._zoomLevel}setZoomLevel(r){r=Math.min(Math.max(-5,r),20),this._zoomLevel!==r&&(this._zoomLevel=r,this._onDidChangeZoomLevel.fire(this._zoomLevel))}};var j$=Pe?1.5:1.35,bO=8,eI=class r{_bareFontInfoBrand=void 0;static createFromValidatedSettings(e,t,n){let i=e.get(50),o=e.get(54),s=e.get(53),a=e.get(52),l=e.get(55),d=e.get(68),c=e.get(65);return r._create(i,o,s,a,l,d,c,t,n)}static createFromRawSettings(e,t,n=!1){let i=$l.fontFamily.validate(e.fontFamily),o=$l.fontWeight.validate(e.fontWeight),s=$l.fontSize.validate(e.fontSize),a=$l.fontLigatures2.validate(e.fontLigatures),l=$l.fontVariations.validate(e.fontVariations),d=$l.lineHeight.validate(e.lineHeight),c=$l.letterSpacing.validate(e.letterSpacing);return r._create(i,o,s,a,l,d,c,t,n)}static _create(e,t,n,i,o,s,a,l,d){s===0?s=j$*n:s<bO&&(s=s*n),s=Math.round(s),s<bO&&(s=bO);let c=1+(d?0:ql.getZoomLevel()*.1);return n*=c,s*=c,o===Gm.TRANSLATE&&(t==="normal"||t==="bold"?o=Gm.OFF:(o=`'wght' ${parseInt(t,10)}`,t="normal")),new r({pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:i,fontVariationSettings:o,lineHeight:s,letterSpacing:a})}pixelRatio;fontFamily;fontWeight;fontSize;fontFeatureSettings;fontVariationSettings;lineHeight;letterSpacing;constructor(e){this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){let e=Nr.fontFamily,t=r._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}},vO=2,$m=class extends eI{_editorStylingBrand=void 0;version=vO;isTrusted;isMonospace;typicalHalfwidthCharacterWidth;typicalFullwidthCharacterWidth;canUseHalfwidthRightwardsArrow;spaceWidth;middotWidth;wsmiddotWidth;maxDigitWidth;constructor(e,t){super(e),this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}};function Un(r,e){r instanceof ch?(r.setFontFamily(e.getMassagedFontFamily()),r.setFontWeight(e.fontWeight),r.setFontSize(e.fontSize),r.setFontFeatureSettings(e.fontFeatureSettings),r.setFontVariationSettings(e.fontVariationSettings),r.setLineHeight(e.lineHeight),r.setLetterSpacing(e.letterSpacing)):(r.style.fontFamily=e.getMassagedFontFamily(),r.style.fontWeight=e.fontWeight,r.style.fontSize=e.fontSize+"px",r.style.fontFeatureSettings=e.fontFeatureSettings,r.style.fontVariationSettings=e.fontVariationSettings,r.style.lineHeight=e.lineHeight+"px",r.style.letterSpacing=e.letterSpacing+"px")}var HE=class{chr;type;width;constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}},yO=class r{_bareFontInfo;_requests;_container;_testElements;constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(e){this._createDomElements(),e.document.body.appendChild(this._container),this._readFromDomElements(),this._container?.remove(),this._container=null,this._testElements=null}_createDomElements(){let e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";let t=document.createElement("div");Un(t,this._bareFontInfo),e.appendChild(t);let n=document.createElement("div");Un(n,this._bareFontInfo),n.style.fontWeight="bold",e.appendChild(n);let i=document.createElement("div");Un(i,this._bareFontInfo),i.style.fontStyle="italic",e.appendChild(i);let o=[];for(let s of this._requests){let a;s.type===0&&(a=t),s.type===2&&(a=n),s.type===1&&(a=i),a.appendChild(document.createElement("br"));let l=document.createElement("span");r._render(l,s),a.appendChild(l),o.push(l)}this._container=e,this._testElements=o}static _render(e,t){if(t.chr===" "){let n="\xA0";for(let i=0;i<8;i++)n+=n;e.innerText=n}else{let n=t.chr;for(let i=0;i<8;i++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){let n=this._requests[e],i=this._testElements[e];n.fulfill(i.offsetWidth/256)}}};function az(r,e,t){new yO(e,t).read(r)}var IO=class extends N{_cache=new Map;_evictUntrustedReadingsTimeout=-1;_onDidChange=this._register(new T);onDidChange=this._onDidChange.event;dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache.clear(),this._onDidChange.fire()}_ensureCache(e){let t=xu(e),n=this._cache.get(t);return n||(n=new SO,this._cache.set(t,n)),n}_writeToCache(e,t,n){this._ensureCache(e).put(t,n),!n.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=e.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings(e)},5e3))}_evictUntrustedReadings(e){let t=this._ensureCache(e),n=t.getValues(),i=!1;for(let o of n)o.isTrusted||(i=!0,t.remove(o));i&&this._onDidChange.fire()}serializeFontInfo(e){return this._ensureCache(e).getValues().filter(n=>n.isTrusted)}restoreFontInfo(e,t){for(let n of t){if(n.version!==vO)continue;let i=new $m(n,!1);this._writeToCache(e,i,i)}}readFontInfo(e,t){let n=this._ensureCache(e);if(!n.has(t)){let i=this._actualReadFontInfo(e,t);(i.typicalHalfwidthCharacterWidth<=2||i.typicalFullwidthCharacterWidth<=2||i.spaceWidth<=2||i.maxDigitWidth<=2)&&(i=new $m({pixelRatio:Nm.getInstance(e).value,fontFamily:i.fontFamily,fontWeight:i.fontWeight,fontSize:i.fontSize,fontFeatureSettings:i.fontFeatureSettings,fontVariationSettings:i.fontVariationSettings,lineHeight:i.lineHeight,letterSpacing:i.letterSpacing,isMonospace:i.isMonospace,typicalHalfwidthCharacterWidth:Math.max(i.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(i.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:i.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(i.spaceWidth,5),middotWidth:Math.max(i.middotWidth,5),wsmiddotWidth:Math.max(i.wsmiddotWidth,5),maxDigitWidth:Math.max(i.maxDigitWidth,5)},!1)),this._writeToCache(e,t,i)}return n.get(t)}_createRequest(e,t,n,i){let o=new HE(e,t);return n.push(o),i?.push(o),o}_actualReadFontInfo(e,t){let n=[],i=[],o=this._createRequest("n",0,n,i),s=this._createRequest("\uFF4D",0,n,null),a=this._createRequest(" ",0,n,i),l=this._createRequest("0",0,n,i),d=this._createRequest("1",0,n,i),c=this._createRequest("2",0,n,i),p=this._createRequest("3",0,n,i),h=this._createRequest("4",0,n,i),g=this._createRequest("5",0,n,i),f=this._createRequest("6",0,n,i),m=this._createRequest("7",0,n,i),b=this._createRequest("8",0,n,i),v=this._createRequest("9",0,n,i),S=this._createRequest("\u2192",0,n,i),x=this._createRequest("\uFFEB",0,n,null),E=this._createRequest("\xB7",0,n,i),w=this._createRequest("\u2E31",0,n,null),P="|/-_ilm%";for(let $=0,Q=P.length;$<Q;$++)this._createRequest(P.charAt($),0,n,i),this._createRequest(P.charAt($),1,n,i),this._createRequest(P.charAt($),2,n,i);az(e,t,n);let R=Math.max(l.width,d.width,c.width,p.width,h.width,g.width,f.width,m.width,b.width,v.width),O=t.fontFeatureSettings===Ch.OFF,M=i[0].width;for(let $=1,Q=i.length;O&&$<Q;$++){let he=M-i[$].width;if(he<-.001||he>.001){O=!1;break}}let K=!0;return O&&x.width!==M&&(K=!1),x.width>S.width&&(K=!1),new $m({pixelRatio:Nm.getInstance(e).value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:O,typicalHalfwidthCharacterWidth:o.width,typicalFullwidthCharacterWidth:s.width,canUseHalfwidthRightwardsArrow:K,spaceWidth:a.width,middotWidth:E.width,wsmiddotWidth:w.width,maxDigitWidth:R},!0)}},SO=class{_keys;_values;constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){let t=e.getId();return!!this._values[t]}get(e){let t=e.getId();return this._values[t]}put(e,t){let n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){let t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}},CO=new IO;var tI=class r{constructor(e,t){this.key=e;this.migrate=t}static items=[];apply(e){let t=r._read(e,this.key),n=o=>r._read(e,o),i=(o,s)=>r._write(e,o,s);this.migrate(t,n,i)}static _read(e,t){if(typeof e>"u")return;let n=t.indexOf(".");if(n>=0){let i=t.substring(0,n);return this._read(e[i],t.substring(n+1))}return e[t]}static _write(e,t,n){let i=t.indexOf(".");if(i>=0){let o=t.substring(0,i);e[o]=e[o]||{},this._write(e[o],t.substring(i+1),n);return}e[t]=n}};function za(r,e){tI.items.push(new tI(r,e))}function Fr(r,e){za(r,(t,n,i)=>{if(typeof t<"u"){for(let[o,s]of e)if(t===o){i(r,s);return}}})}function lz(r){tI.items.forEach(e=>e.apply(r))}Fr("wordWrap",[[!0,"on"],[!1,"off"]]);Fr("lineNumbers",[[!0,"on"],[!1,"off"]]);Fr("cursorBlinking",[["visible","solid"]]);Fr("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);Fr("renderLineHighlight",[[!0,"line"],[!1,"none"]]);Fr("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);Fr("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);Fr("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Fr("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);Fr("autoIndent",[[!1,"advanced"],[!0,"full"]]);Fr("matchBrackets",[[!0,"always"],[!1,"never"]]);Fr("renderFinalNewline",[[!0,"on"],[!1,"off"]]);Fr("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]);Fr("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]);Fr("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]);za("autoClosingBrackets",(r,e,t)=>{r===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});za("renderIndentGuides",(r,e,t)=>{typeof r<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!r))});za("highlightActiveIndentGuide",(r,e,t)=>{typeof r<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!r))});var $$={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};za("suggest.filteredTypes",(r,e,t)=>{if(r&&typeof r=="object"){for(let n of Object.entries($$))r[n[0]]===!1&&typeof e(`suggest.${n[1]}`)>"u"&&t(`suggest.${n[1]}`,!1);t("suggest.filteredTypes",void 0)}});za("quickSuggestions",(r,e,t)=>{if(typeof r=="boolean"){let n=r?"on":"off";t("quickSuggestions",{comments:n,strings:n,other:n})}});za("experimental.stickyScroll.enabled",(r,e,t)=>{typeof r=="boolean"&&(t("experimental.stickyScroll.enabled",void 0),typeof e("stickyScroll.enabled")>"u"&&t("stickyScroll.enabled",r))});za("experimental.stickyScroll.maxLineCount",(r,e,t)=>{typeof r=="number"&&(t("experimental.stickyScroll.maxLineCount",void 0),typeof e("stickyScroll.maxLineCount")>"u"&&t("stickyScroll.maxLineCount",r))});za("codeActionsOnSave",(r,e,t)=>{if(r&&typeof r=="object"){let n=!1,i={};for(let o of Object.entries(r))typeof o[1]=="boolean"?(n=!0,i[o[0]]=o[1]?"explicit":"never"):i[o[0]]=o[1];n&&t("codeActionsOnSave",i)}});za("codeActionWidget.includeNearbyQuickfixes",(r,e,t)=>{typeof r=="boolean"&&(t("codeActionWidget.includeNearbyQuickfixes",void 0),typeof e("codeActionWidget.includeNearbyQuickFixes")>"u"&&t("codeActionWidget.includeNearbyQuickFixes",r))});za("lightbulb.enabled",(r,e,t)=>{typeof r=="boolean"&&t("lightbulb.enabled",r?void 0:"off")});var xO=class{_tabFocus=!1;_onDidChangeTabFocus=new T;onDidChangeTabFocus=this._onDidChangeTabFocus.event;getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}},qm=new xO;var un=class extends N{_onDidChange=this._register(new T);onDidChange=this._onDidChange.event;_id;_label;_tooltip;_cssClass;_enabled=!0;_checked;_actionCallback;constructor(e,t="",n="",i=!0,o){super(),this._id=e,this._label=t,this._cssClass=n,this._enabled=i,this._actionCallback=o}get id(){return this._id}get label(){return this._label}set label(e){this._setLabel(e)}_setLabel(e){this._label!==e&&(this._label=e,this._onDidChange.fire({label:e}))}get tooltip(){return this._tooltip||""}set tooltip(e){this._setTooltip(e)}_setTooltip(e){this._tooltip!==e&&(this._tooltip=e,this._onDidChange.fire({tooltip:e}))}get class(){return this._cssClass}set class(e){this._setClass(e)}_setClass(e){this._cssClass!==e&&(this._cssClass=e,this._onDidChange.fire({class:e}))}get enabled(){return this._enabled}set enabled(e){this._setEnabled(e)}_setEnabled(e){this._enabled!==e&&(this._enabled=e,this._onDidChange.fire({enabled:e}))}get checked(){return this._checked}set checked(e){this._setChecked(e)}_setChecked(e){this._checked!==e&&(this._checked=e,this._onDidChange.fire({checked:e}))}async run(e,t){this._actionCallback&&await this._actionCallback(e)}},Ns=class extends N{_onWillRun=this._register(new T);onWillRun=this._onWillRun.event;_onDidRun=this._register(new T);onDidRun=this._onDidRun.event;async run(e,t){if(!e.enabled)return;this._onWillRun.fire({action:e});let n;try{await this.runAction(e,t)}catch(i){n=i}this._onDidRun.fire({action:e,error:n})}async runAction(e,t){await e.run(t)}},ei=class r{static join(...e){let t=[];for(let n of e)n.length&&(t.length?t=[...t,new r,...n]:t=n);return t}static ID="vs.actions.separator";id=r.ID;label="";tooltip="";class="separator";enabled=!1;checked=!1;async run(){}},ss=class{id;label;class;tooltip="";enabled=!0;checked=void 0;_actions;get actions(){return this._actions}constructor(e,t,n,i){this.id=e,this.label=t,this.class=i,this._actions=n}async run(){}};function pc(r){return{id:r.id,label:r.label,tooltip:r.tooltip??r.label,class:r.class,enabled:r.enabled??!0,checked:r.checked,run:async(...e)=>r.run(...e)}}var UE=Object.freeze({View:gt("view","View"),Help:gt("help","Help"),Test:gt("test","Test"),File:gt("file","File"),Preferences:gt("preferences","Preferences"),Developer:gt({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer")});var Xn=j("commandService"),St=new class{_commands=new Map;_onDidRegisterCommand=new T;onDidRegisterCommand=this._onDidRegisterCommand.event;registerCommand(r,e){if(!r)throw new Error("invalid command");if(typeof r=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:r,handler:e})}if(r.metadata&&Array.isArray(r.metadata.args)){let s=[];for(let l of r.metadata.args)s.push(l.constraint);let a=r.handler;r.handler=function(l,...d){return SH(d,s),a(l,...d)}}let{id:t}=r,n=this._commands.get(t);n||(n=new mi,this._commands.set(t,n));let i=n.unshift(r),o=me(()=>{i(),this._commands.get(t)?.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),o}registerCommandAlias(r,e){return St.registerCommand(r,(t,...n)=>t.get(Xn).executeCommand(e,...n))}getCommand(r){let e=this._commands.get(r);if(!(!e||e.isEmpty()))return tt.first(e)}getCommands(){let r=new Map;for(let e of this._commands.keys()){let t=this.getCommand(e);t&&r.set(e,t)}return r}};St.registerCommand("noop",()=>{});function EO(r){return r&&typeof r=="object"&&typeof r.original=="string"&&typeof r.value=="string"}function dz(r){return r?r.condition!==void 0:!1}var TO=class r{_coreKeybindings;_extensionKeybindings;_cachedMergedKeybindings;constructor(){this._coreKeybindings=new mi,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(uo===1){if(e&&e.win)return e.win}else if(uo===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){let t=r.bindToCurrentPlatform(e),n=new X;if(t&&t.primary){let i=E1(t.primary,uo);i&&n.add(this._registerDefaultKeybinding(i,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let i=0,o=t.secondary.length;i<o;i++){let s=t.secondary[i],a=E1(s,uo);a&&n.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-i-1,e.when))}return n}setExtensionKeybindings(e){let t=[],n=0;for(let i of e)i.keybinding&&(t[n++]={keybinding:i.keybinding,command:i.id,commandArgs:i.args,when:i.when,weight1:i.weight,weight2:0,extensionId:i.extensionId||null,isBuiltinExtension:i.isBuiltinExtension||!1});this._extensionKeybindings=t,this._cachedMergedKeybindings=null}registerCommandAndKeybindingRule(e){return Li(this.registerKeybindingRule(e),St.registerCommand(e))}_registerDefaultKeybinding(e,t,n,i,o,s){let a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:n,when:s,weight1:i,weight2:o,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,me(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(Y$)),this._cachedMergedKeybindings.slice(0)}},Sn=new TO,q$={EditorModes:"platform.keybindingsRegistry"};Te.add(q$.EditorModes,Sn);function Y$(r,e){if(r.weight1!==e.weight1)return r.weight1-e.weight1;if(r.command&&e.command){if(r.command<e.command)return-1;if(r.command>e.command)return 1}return r.weight2-e.weight2}function Th(r){return r.command!==void 0}var Je=class r{static _instances=new Map;static CommandPalette=new r("CommandPalette");static DebugBreakpointsContext=new r("DebugBreakpointsContext");static DebugCallStackContext=new r("DebugCallStackContext");static DebugConsoleContext=new r("DebugConsoleContext");static DebugVariablesContext=new r("DebugVariablesContext");static NotebookVariablesContext=new r("NotebookVariablesContext");static DebugHoverContext=new r("DebugHoverContext");static DebugWatchContext=new r("DebugWatchContext");static DebugToolBar=new r("DebugToolBar");static DebugToolBarStop=new r("DebugToolBarStop");static DebugCallStackToolbar=new r("DebugCallStackToolbar");static DebugCreateConfiguration=new r("DebugCreateConfiguration");static EditorContext=new r("EditorContext");static SimpleEditorContext=new r("SimpleEditorContext");static EditorContent=new r("EditorContent");static EditorLineNumberContext=new r("EditorLineNumberContext");static EditorContextCopy=new r("EditorContextCopy");static EditorContextPeek=new r("EditorContextPeek");static EditorContextShare=new r("EditorContextShare");static EditorTitle=new r("EditorTitle");static EditorTitleRun=new r("EditorTitleRun");static EditorTitleContext=new r("EditorTitleContext");static EditorTitleContextShare=new r("EditorTitleContextShare");static EmptyEditorGroup=new r("EmptyEditorGroup");static EmptyEditorGroupContext=new r("EmptyEditorGroupContext");static EditorTabsBarContext=new r("EditorTabsBarContext");static EditorTabsBarShowTabsSubmenu=new r("EditorTabsBarShowTabsSubmenu");static EditorTabsBarShowTabsZenModeSubmenu=new r("EditorTabsBarShowTabsZenModeSubmenu");static EditorActionsPositionSubmenu=new r("EditorActionsPositionSubmenu");static ExplorerContext=new r("ExplorerContext");static ExplorerContextShare=new r("ExplorerContextShare");static ExtensionContext=new r("ExtensionContext");static ExtensionEditorContextMenu=new r("ExtensionEditorContextMenu");static GlobalActivity=new r("GlobalActivity");static CommandCenter=new r("CommandCenter");static CommandCenterCenter=new r("CommandCenterCenter");static LayoutControlMenuSubmenu=new r("LayoutControlMenuSubmenu");static LayoutControlMenu=new r("LayoutControlMenu");static MenubarMainMenu=new r("MenubarMainMenu");static MenubarAppearanceMenu=new r("MenubarAppearanceMenu");static MenubarDebugMenu=new r("MenubarDebugMenu");static MenubarEditMenu=new r("MenubarEditMenu");static MenubarCopy=new r("MenubarCopy");static MenubarFileMenu=new r("MenubarFileMenu");static MenubarGoMenu=new r("MenubarGoMenu");static MenubarHelpMenu=new r("MenubarHelpMenu");static MenubarLayoutMenu=new r("MenubarLayoutMenu");static MenubarNewBreakpointMenu=new r("MenubarNewBreakpointMenu");static PanelAlignmentMenu=new r("PanelAlignmentMenu");static PanelPositionMenu=new r("PanelPositionMenu");static ActivityBarPositionMenu=new r("ActivityBarPositionMenu");static MenubarPreferencesMenu=new r("MenubarPreferencesMenu");static MenubarRecentMenu=new r("MenubarRecentMenu");static MenubarSelectionMenu=new r("MenubarSelectionMenu");static MenubarShare=new r("MenubarShare");static MenubarSwitchEditorMenu=new r("MenubarSwitchEditorMenu");static MenubarSwitchGroupMenu=new r("MenubarSwitchGroupMenu");static MenubarTerminalMenu=new r("MenubarTerminalMenu");static MenubarViewMenu=new r("MenubarViewMenu");static MenubarHomeMenu=new r("MenubarHomeMenu");static OpenEditorsContext=new r("OpenEditorsContext");static OpenEditorsContextShare=new r("OpenEditorsContextShare");static ProblemsPanelContext=new r("ProblemsPanelContext");static SCMInputBox=new r("SCMInputBox");static SCMChangesContext=new r("SCMChangesContext");static SCMChangeContext=new r("SCMChangeContext");static SCMResourceContext=new r("SCMResourceContext");static SCMResourceContextShare=new r("SCMResourceContextShare");static SCMResourceFolderContext=new r("SCMResourceFolderContext");static SCMResourceGroupContext=new r("SCMResourceGroupContext");static SCMSourceControl=new r("SCMSourceControl");static SCMSourceControlInline=new r("SCMSourceControlInline");static SCMSourceControlTitle=new r("SCMSourceControlTitle");static SCMHistoryTitle=new r("SCMHistoryTitle");static SCMTitle=new r("SCMTitle");static SearchContext=new r("SearchContext");static SearchActionMenu=new r("SearchActionContext");static StatusBarWindowIndicatorMenu=new r("StatusBarWindowIndicatorMenu");static StatusBarRemoteIndicatorMenu=new r("StatusBarRemoteIndicatorMenu");static StickyScrollContext=new r("StickyScrollContext");static TestItem=new r("TestItem");static TestItemGutter=new r("TestItemGutter");static TestProfilesContext=new r("TestProfilesContext");static TestMessageContext=new r("TestMessageContext");static TestMessageContent=new r("TestMessageContent");static TestPeekElement=new r("TestPeekElement");static TestPeekTitle=new r("TestPeekTitle");static TestCallStack=new r("TestCallStack");static TouchBarContext=new r("TouchBarContext");static TitleBarContext=new r("TitleBarContext");static TitleBarTitleContext=new r("TitleBarTitleContext");static TunnelContext=new r("TunnelContext");static TunnelPrivacy=new r("TunnelPrivacy");static TunnelProtocol=new r("TunnelProtocol");static TunnelPortInline=new r("TunnelInline");static TunnelTitle=new r("TunnelTitle");static TunnelLocalAddressInline=new r("TunnelLocalAddressInline");static TunnelOriginInline=new r("TunnelOriginInline");static ViewItemContext=new r("ViewItemContext");static ViewContainerTitle=new r("ViewContainerTitle");static ViewContainerTitleContext=new r("ViewContainerTitleContext");static ViewTitle=new r("ViewTitle");static ViewTitleContext=new r("ViewTitleContext");static CommentEditorActions=new r("CommentEditorActions");static CommentThreadTitle=new r("CommentThreadTitle");static CommentThreadActions=new r("CommentThreadActions");static CommentThreadAdditionalActions=new r("CommentThreadAdditionalActions");static CommentThreadTitleContext=new r("CommentThreadTitleContext");static CommentThreadCommentContext=new r("CommentThreadCommentContext");static CommentTitle=new r("CommentTitle");static CommentActions=new r("CommentActions");static CommentsViewThreadActions=new r("CommentsViewThreadActions");static InteractiveToolbar=new r("InteractiveToolbar");static InteractiveCellTitle=new r("InteractiveCellTitle");static InteractiveCellDelete=new r("InteractiveCellDelete");static InteractiveCellExecute=new r("InteractiveCellExecute");static InteractiveInputExecute=new r("InteractiveInputExecute");static InteractiveInputConfig=new r("InteractiveInputConfig");static ReplInputExecute=new r("ReplInputExecute");static IssueReporter=new r("IssueReporter");static NotebookToolbar=new r("NotebookToolbar");static NotebookStickyScrollContext=new r("NotebookStickyScrollContext");static NotebookCellTitle=new r("NotebookCellTitle");static NotebookCellDelete=new r("NotebookCellDelete");static NotebookCellInsert=new r("NotebookCellInsert");static NotebookCellBetween=new r("NotebookCellBetween");static NotebookCellListTop=new r("NotebookCellTop");static NotebookCellExecute=new r("NotebookCellExecute");static NotebookCellExecuteGoTo=new r("NotebookCellExecuteGoTo");static NotebookCellExecutePrimary=new r("NotebookCellExecutePrimary");static NotebookDiffCellInputTitle=new r("NotebookDiffCellInputTitle");static NotebookDiffCellMetadataTitle=new r("NotebookDiffCellMetadataTitle");static NotebookDiffCellOutputsTitle=new r("NotebookDiffCellOutputsTitle");static NotebookOutputToolbar=new r("NotebookOutputToolbar");static NotebookOutlineFilter=new r("NotebookOutlineFilter");static NotebookOutlineActionMenu=new r("NotebookOutlineActionMenu");static NotebookEditorLayoutConfigure=new r("NotebookEditorLayoutConfigure");static NotebookKernelSource=new r("NotebookKernelSource");static BulkEditTitle=new r("BulkEditTitle");static BulkEditContext=new r("BulkEditContext");static TimelineItemContext=new r("TimelineItemContext");static TimelineTitle=new r("TimelineTitle");static TimelineTitleContext=new r("TimelineTitleContext");static TimelineFilterSubMenu=new r("TimelineFilterSubMenu");static AccountsContext=new r("AccountsContext");static SidebarTitle=new r("SidebarTitle");static PanelTitle=new r("PanelTitle");static AuxiliaryBarTitle=new r("AuxiliaryBarTitle");static AuxiliaryBarHeader=new r("AuxiliaryBarHeader");static TerminalInstanceContext=new r("TerminalInstanceContext");static TerminalEditorInstanceContext=new r("TerminalEditorInstanceContext");static TerminalNewDropdownContext=new r("TerminalNewDropdownContext");static TerminalTabContext=new r("TerminalTabContext");static TerminalTabEmptyAreaContext=new r("TerminalTabEmptyAreaContext");static TerminalStickyScrollContext=new r("TerminalStickyScrollContext");static WebviewContext=new r("WebviewContext");static InlineCompletionsActions=new r("InlineCompletionsActions");static InlineEditsActions=new r("InlineEditsActions");static InlineEditActions=new r("InlineEditActions");static NewFile=new r("NewFile");static MergeInput1Toolbar=new r("MergeToolbar1Toolbar");static MergeInput2Toolbar=new r("MergeToolbar2Toolbar");static MergeBaseToolbar=new r("MergeBaseToolbar");static MergeInputResultToolbar=new r("MergeToolbarResultToolbar");static InlineSuggestionToolbar=new r("InlineSuggestionToolbar");static InlineEditToolbar=new r("InlineEditToolbar");static ChatContext=new r("ChatContext");static ChatCodeBlock=new r("ChatCodeblock");static ChatCompareBlock=new r("ChatCompareBlock");static ChatMessageTitle=new r("ChatMessageTitle");static ChatExecute=new r("ChatExecute");static ChatExecuteSecondary=new r("ChatExecuteSecondary");static ChatInputSide=new r("ChatInputSide");static AccessibleView=new r("AccessibleView");static MultiDiffEditorFileToolbar=new r("MultiDiffEditorFileToolbar");static DiffEditorHunkToolbar=new r("DiffEditorHunkToolbar");static DiffEditorSelectionToolbar=new r("DiffEditorSelectionToolbar");static for(e){return r._instances.get(e)??new r(e)}id;constructor(e){if(r._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);r._instances.set(e,this),this.id=e}},Ka=j("menuService"),Eh=class r{constructor(e){this.id=e;this.has=t=>t===e}static _all=new Map;static for(e){let t=this._all.get(e);return t||(t=new r(e),this._all.set(e,t)),t}static merge(e){let t=new Set;for(let n of e)n instanceof r&&t.add(n.id);return t}has},go=new class{_commands=new Map;_menuItems=new Map;_onDidChangeMenu=new ux({merge:Eh.merge});onDidChangeMenu=this._onDidChangeMenu.event;addCommand(r){return this._commands.set(r.id,r),this._onDidChangeMenu.fire(Eh.for(Je.CommandPalette)),me(()=>{this._commands.delete(r.id)&&this._onDidChangeMenu.fire(Eh.for(Je.CommandPalette))})}getCommand(r){return this._commands.get(r)}getCommands(){let r=new Map;return this._commands.forEach((e,t)=>r.set(t,e)),r}appendMenuItem(r,e){let t=this._menuItems.get(r);t||(t=new mi,this._menuItems.set(r,t));let n=t.push(e);return this._onDidChangeMenu.fire(Eh.for(r)),me(()=>{n(),this._onDidChangeMenu.fire(Eh.for(r))})}appendMenuItems(r){let e=new X;for(let{id:t,item:n}of r)e.add(this.appendMenuItem(t,n));return e}getMenuItems(r){let e;return this._menuItems.has(r)?e=[...this._menuItems.get(r)]:e=[],r===Je.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(r){let e=new Set;for(let t of r)Th(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||r.push({command:t})})}},nI=class extends ss{constructor(t,n,i){super(`submenuitem.${t.submenu.id}`,typeof t.title=="string"?t.title:t.title.value,i,"submenu");this.item=t;this.hideActions=n}},na=class{constructor(e,t,n,i,o,s,a){this.hideActions=i;this.menuKeybinding=o;this._commandService=a;this.id=e.id,this.label=na.label(e,n),this.tooltip=(typeof e.tooltip=="string"?e.tooltip:e.tooltip?.value)??"",this.enabled=!e.precondition||s.contextMatchesRules(e.precondition),this.checked=void 0;let l;if(e.toggled){let d=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=s.contextMatchesRules(d.condition),this.checked&&d.tooltip&&(this.tooltip=typeof d.tooltip=="string"?d.tooltip:d.tooltip.value),this.checked&&Ae.isThemeIcon(d.icon)&&(l=d.icon),this.checked&&d.title&&(this.label=typeof d.title=="string"?d.title:d.title.value)}l||(l=Ae.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new na(t,void 0,n,i,void 0,s,a):void 0,this._options=n,this.class=l&&Ae.asClassName(l)}static label(e,t){return t?.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value}item;alt;_options;id;label;tooltip;class;enabled;checked;run(...e){let t=[];return this._options?.arg&&(t=[...t,this._options.arg]),this._options?.shouldForwardArgs&&(t=[...t,...e]),this._commandService.executeCommand(this.id,...t)}};na=_([y(5,Ne),y(6,Xn)],na);var _t=class{constructor(e){this.desc=e}};function Pt(r){let e=[],t=new r,{f1:n,menu:i,keybinding:o,...s}=t.desc;if(St.getCommand(s.id))throw new Error(`Cannot register two commands with the same id: ${s.id}`);if(e.push(St.registerCommand({id:s.id,handler:(a,...l)=>t.run(a,...l),metadata:s.metadata})),Array.isArray(i))for(let a of i)e.push(go.appendMenuItem(a.id,{command:{...s,precondition:a.precondition===null?void 0:s.precondition},...a}));else i&&e.push(go.appendMenuItem(i.id,{command:{...s,precondition:i.precondition===null?void 0:s.precondition},...i}));if(n&&(e.push(go.appendMenuItem(Je.CommandPalette,{command:s,when:s.precondition})),e.push(go.addCommand(s))),Array.isArray(o))for(let a of o)e.push(Sn.registerKeybindingRule({...a,id:s.id,when:s.precondition?oe.and(s.precondition,a.when):a.when}));else o&&e.push(Sn.registerKeybindingRule({...o,id:s.id,when:s.precondition?oe.and(s.precondition,o.when):o.when}));return{dispose(){rt(e)}}}var Ym=class extends N{constructor(t,n,i,o,s){super();this._accessibilityService=s;this.isSimpleWidget=t,this.contextMenuId=n,this._containerObserver=this._register(new gE(o,i.dimension)),this._targetWindowId=Ee(o).vscodeWindowId,this._rawOptions=cz(i),this._validatedOptions=wh.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register(ql.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(qm.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(CO.onDidChange(()=>this._recomputeOptions())),this._register(Nm.getInstance(Ee(o)).onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_onDidChange=this._register(new T);onDidChange=this._onDidChange.event;_onDidChangeFast=this._register(new T);onDidChangeFast=this._onDidChangeFast.event;isSimpleWidget;contextMenuId;_containerObserver;_isDominatedByLongLines=!1;_viewLineCount=1;_lineNumbersDigitCount=1;_reservedHeight=0;_glyphMarginDecorationLaneCount=1;_targetWindowId;_computeOptionsMemory=new Zy;_rawOptions;_validatedOptions;options;_recomputeOptions(){let t=this._computeOptions(),n=wh.checkEquals(this.options,t);n!==null&&(this.options=t,this._onDidChangeFast.fire(n),this._onDidChange.fire(n))}_computeOptions(){let t=this._readEnvConfiguration(),n=eI.createFromValidatedSettings(this._validatedOptions,t.pixelRatio,this.isSimpleWidget),i=this._readFontInfo(n),o={memory:this._computeOptionsMemory,outerWidth:t.outerWidth,outerHeight:t.outerHeight-this._reservedHeight,fontInfo:i,extraEditorClassName:t.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:t.emptySelectionClipboard,pixelRatio:t.pixelRatio,tabFocusMode:qm.getTabFocusMode(),accessibilitySupport:t.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return wh.computeOptions(this._validatedOptions,o)}_readEnvConfiguration(){return{extraEditorClassName:Q$(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:Pa||yi,pixelRatio:Nm.getInstance(lh(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(t){return CO.readFontInfo(lh(this._targetWindowId,!0).window,t)}getRawOptions(){return this._rawOptions}updateOptions(t){let n=cz(t);wh.applyUpdate(this._rawOptions,n)&&(this._validatedOptions=wh.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(t){this._containerObserver.observe(t)}setIsDominatedByLongLines(t){this._isDominatedByLongLines!==t&&(this._isDominatedByLongLines=t,this._recomputeOptions())}setModelLineCount(t){let n=X$(t);this._lineNumbersDigitCount!==n&&(this._lineNumbersDigitCount=n,this._recomputeOptions())}setViewLineCount(t){this._viewLineCount!==t&&(this._viewLineCount=t,this._recomputeOptions())}setReservedHeight(t){this._reservedHeight!==t&&(this._reservedHeight=t,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(t){this._glyphMarginDecorationLaneCount!==t&&(this._glyphMarginDecorationLaneCount=t,this._recomputeOptions())}};Ym=_([y(4,Xi)],Ym);function X$(r){let e=0;for(;r;)r=Math.floor(r/10),e++;return e||1}function Q$(){let r="";return!Or&&!TH&&(r+="no-user-select "),Or&&(r+="no-minimap-shadow ",r+="enable-user-select "),Pe&&(r+="mac "),r}var wO=class{_values=[];_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}},_O=class{_values=[];_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}},wh=class r{static validateOptions(e){let t=new wO;for(let n of jm){let i=n.name==="_never_"?void 0:e[n.name];t._write(n.id,n.validate(i))}return t}static computeOptions(e,t){let n=new _O;for(let i of jm)n._write(i.id,i.compute(t,n,e._read(i.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?sn(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(!r._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){let n=[],i=!1;for(let o of jm){let s=!r._deepEquals(e._read(o.id),t._read(o.id));n[o.id]=s,s&&(i=!0)}return i?new BE(n):null}static applyUpdate(e,t){let n=!1;for(let i of jm)if(t.hasOwnProperty(i.name)){let o=i.applyUpdate(e[i.name],t[i.name]);e[i.name]=o.newValue,n=n||o.didChange}return n}};function cz(r){let e=hE(r);return lz(e),e}var F=class r{lineNumber;column;constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new r(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return r.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return r.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return r.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){let n=e.lineNumber|0,i=t.lineNumber|0;if(n===i){let o=e.column|0,s=t.column|0;return o-s}return n-i}clone(){return new r(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new r(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};var D=class r{startLineNumber;startColumn;endLineNumber;endColumn;constructor(e,t,n,i){e>n||e===n&&t>i?(this.startLineNumber=n,this.startColumn=i,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=i)}isEmpty(){return r.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return r.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return r.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return r.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return r.plusRange(this,e)}static plusRange(e,t){let n,i,o,s;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,i=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,i=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,i=e.startColumn),t.endLineNumber>e.endLineNumber?(o=t.endLineNumber,s=t.endColumn):t.endLineNumber===e.endLineNumber?(o=t.endLineNumber,s=Math.max(t.endColumn,e.endColumn)):(o=e.endLineNumber,s=e.endColumn),new r(n,i,o,s)}intersectRanges(e){return r.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,s=e.endColumn,a=t.startLineNumber,l=t.startColumn,d=t.endLineNumber,c=t.endColumn;return n<a?(n=a,i=l):n===a&&(i=Math.max(i,l)),o>d?(o=d,s=c):o===d&&(s=Math.min(s,c)),n>o||n===o&&i>s?null:new r(n,i,o,s)}equalsRange(e){return r.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return r.getEndPosition(this)}static getEndPosition(e){return new F(e.endLineNumber,e.endColumn)}getStartPosition(){return r.getStartPosition(this)}static getStartPosition(e){return new F(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new r(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new r(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return r.collapseToStart(this)}static collapseToStart(e){return new r(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return r.collapseToEnd(this)}static collapseToEnd(e){return new r(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new r(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new r(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new r(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){let o=e.startLineNumber|0,s=t.startLineNumber|0;if(o===s){let a=e.startColumn|0,l=t.startColumn|0;if(a===l){let d=e.endLineNumber|0,c=t.endLineNumber|0;if(d===c){let p=e.endColumn|0,h=t.endColumn|0;return p-h}return d-c}return a-l}return o-s}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};var ze=class r extends D{selectionStartLineNumber;selectionStartColumn;positionLineNumber;positionColumn;constructor(e,t,n,i){super(e,t,n,i),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=i}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return r.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new r(this.startLineNumber,this.startColumn,e,t):new r(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new F(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new F(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new r(e,t,this.endLineNumber,this.endColumn):new r(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new r(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new r(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new r(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new r(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,i,o){return o===0?new r(e,t,n,i):new r(n,i,e,t)}};var Ga=class{originalStart;originalLength;modifiedStart;modifiedLength;constructor(e,t,n,i){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}};var Nu=class{static Assert(e,t){if(!e)throw new Error(t)}},Fu=class{static Copy(e,t,n,i,o){for(let s=0;s<o;s++)n[i+s]=e[t+s]}static Copy2(e,t,n,i,o){for(let s=0;s<o;s++)n[i+s]=e[t+s]}};var zE=class{m_changes;m_originalStart;m_modifiedStart;m_originalCount;m_modifiedCount;constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new Ga(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},_h=class r{ContinueProcessingPredicate;_originalSequence;_modifiedSequence;_hasStrings;_originalStringElements;_originalElementsOrHash;_modifiedStringElements;_modifiedElementsOrHash;m_forwardHistory;m_reverseHistory;constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;let[i,o,s]=r._getElements(e),[a,l,d]=r._getElements(t);this._hasStrings=s&&d,this._originalStringElements=i,this._originalElementsOrHash=o,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){let t=e.getElements();if(r._isStringArray(t)){let n=new Int32Array(t.length);for(let i=0,o=t.length;i<o;i++)n[i]=nE(t[i],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;let n=r._getStrictElement(this._originalSequence,e),i=r._getStrictElement(this._modifiedSequence,t);return n===i}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,i,o){let s=[!1],a=this.ComputeDiffRecursive(e,t,n,i,s);return o&&(a=this.PrettifyChanges(a)),{quitEarly:s[0],changes:a}}ComputeDiffRecursive(e,t,n,i,o){for(o[0]=!1;e<=t&&n<=i&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&i>=n&&this.ElementsAreEqual(t,i);)t--,i--;if(e>t||n>i){let p;return n<=i?(Nu.Assert(e===t+1,"originalStart should only be one more than originalEnd"),p=[new Ga(e,0,n,i-n+1)]):e<=t?(Nu.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),p=[new Ga(e,t-e+1,n,0)]):(Nu.Assert(e===t+1,"originalStart should only be one more than originalEnd"),Nu.Assert(n===i+1,"modifiedStart should only be one more than modifiedEnd"),p=[]),p}let s=[0],a=[0],l=this.ComputeRecursionPoint(e,t,n,i,s,a,o),d=s[0],c=a[0];if(l!==null)return l;if(!o[0]){let p=this.ComputeDiffRecursive(e,d,n,c,o),h=[];return o[0]?h=[new Ga(d+1,t-(d+1)+1,c+1,i-(c+1)+1)]:h=this.ComputeDiffRecursive(d+1,t,c+1,i,o),this.ConcatenateChanges(p,h)}return[new Ga(e,t-e+1,n,i-n+1)]}WALKTRACE(e,t,n,i,o,s,a,l,d,c,p,h,g,f,m,b,v,S){let x=null,E=null,w=new zE,P=t,R=n,O=g[0]-b[0]-i,M=-1073741824,K=this.m_forwardHistory.length-1;do{let $=O+e;$===P||$<R&&d[$-1]<d[$+1]?(p=d[$+1],f=p-O-i,p<M&&w.MarkNextChange(),M=p,w.AddModifiedElement(p+1,f),O=$+1-e):(p=d[$-1]+1,f=p-O-i,p<M&&w.MarkNextChange(),M=p-1,w.AddOriginalElement(p,f+1),O=$-1-e),K>=0&&(d=this.m_forwardHistory[K],e=d[0],P=1,R=d.length-1)}while(--K>=-1);if(x=w.getReverseChanges(),S[0]){let $=g[0]+1,Q=b[0]+1;if(x!==null&&x.length>0){let he=x[x.length-1];$=Math.max($,he.getOriginalEnd()),Q=Math.max(Q,he.getModifiedEnd())}E=[new Ga($,h-$+1,Q,m-Q+1)]}else{w=new zE,P=s,R=a,O=g[0]-b[0]-l,M=1073741824,K=v?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let $=O+o;$===P||$<R&&c[$-1]>=c[$+1]?(p=c[$+1]-1,f=p-O-l,p>M&&w.MarkNextChange(),M=p+1,w.AddOriginalElement(p+1,f+1),O=$+1-o):(p=c[$-1],f=p-O-l,p>M&&w.MarkNextChange(),M=p,w.AddModifiedElement(p+1,f+1),O=$-1-o),K>=0&&(c=this.m_reverseHistory[K],o=c[0],P=1,R=c.length-1)}while(--K>=-1);E=w.getChanges()}return this.ConcatenateChanges(x,E)}ComputeRecursionPoint(e,t,n,i,o,s,a){let l=0,d=0,c=0,p=0,h=0,g=0;e--,n--,o[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let f=t-e+(i-n),m=f+1,b=new Int32Array(m),v=new Int32Array(m),S=i-n,x=t-e,E=e-n,w=t-i,R=(x-S)%2===0;b[S]=e,v[x]=t,a[0]=!1;for(let O=1;O<=f/2+1;O++){let M=0,K=0;c=this.ClipDiagonalBound(S-O,O,S,m),p=this.ClipDiagonalBound(S+O,O,S,m);for(let Q=c;Q<=p;Q+=2){Q===c||Q<p&&b[Q-1]<b[Q+1]?l=b[Q+1]:l=b[Q-1]+1,d=l-(Q-S)-E;let he=l;for(;l<t&&d<i&&this.ElementsAreEqual(l+1,d+1);)l++,d++;if(b[Q]=l,l+d>M+K&&(M=l,K=d),!R&&Math.abs(Q-x)<=O-1&&l>=v[Q])return o[0]=l,s[0]=d,he<=v[Q]&&O<=1448?this.WALKTRACE(S,c,p,E,x,h,g,w,b,v,l,t,o,d,i,s,R,a):null}let $=(M-e+(K-n)-O)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(M,$))return a[0]=!0,o[0]=M,s[0]=K,$>0&&O<=1448?this.WALKTRACE(S,c,p,E,x,h,g,w,b,v,l,t,o,d,i,s,R,a):(e++,n++,[new Ga(e,t-e+1,n,i-n+1)]);h=this.ClipDiagonalBound(x-O,O,x,m),g=this.ClipDiagonalBound(x+O,O,x,m);for(let Q=h;Q<=g;Q+=2){Q===h||Q<g&&v[Q-1]>=v[Q+1]?l=v[Q+1]-1:l=v[Q-1],d=l-(Q-x)-w;let he=l;for(;l>e&&d>n&&this.ElementsAreEqual(l,d);)l--,d--;if(v[Q]=l,R&&Math.abs(Q-S)<=O&&l<=b[Q])return o[0]=l,s[0]=d,he>=b[Q]&&O<=1448?this.WALKTRACE(S,c,p,E,x,h,g,w,b,v,l,t,o,d,i,s,R,a):null}if(O<=1447){let Q=new Int32Array(p-c+2);Q[0]=S-c+1,Fu.Copy2(b,c,Q,1,p-c+1),this.m_forwardHistory.push(Q),Q=new Int32Array(g-h+2),Q[0]=x-h+1,Fu.Copy2(v,h,Q,1,g-h+1),this.m_reverseHistory.push(Q)}}return this.WALKTRACE(S,c,p,E,x,h,g,w,b,v,l,t,o,d,i,s,R,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){let n=e[t],i=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,o=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,s=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<i&&n.modifiedStart+n.modifiedLength<o&&(!s||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){let d=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!d)break;n.originalStart++,n.modifiedStart++}let l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){let n=e[t],i=0,o=0;if(t>0){let p=e[t-1];i=p.originalStart+p.originalLength,o=p.modifiedStart+p.modifiedLength}let s=n.originalLength>0,a=n.modifiedLength>0,l=0,d=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let p=1;;p++){let h=n.originalStart-p,g=n.modifiedStart-p;if(h<i||g<o||s&&!this.OriginalElementsAreEqual(h,h+n.originalLength)||a&&!this.ModifiedElementsAreEqual(g,g+n.modifiedLength))break;let m=(h===i&&g===o?5:0)+this._boundaryScore(h,n.originalLength,g,n.modifiedLength);m>d&&(d=m,l=p)}n.originalStart-=l,n.modifiedStart-=l;let c=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],c)){e[t-1]=c[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){let i=e[t-1],o=e[t],s=o.originalStart-i.originalStart-i.originalLength,a=i.originalStart,l=o.originalStart+o.originalLength,d=l-a,c=i.modifiedStart,p=o.modifiedStart+o.modifiedLength,h=p-c;if(s<5&&d<20&&h<20){let g=this._findBetterContiguousSequence(a,d,c,h,s);if(g){let[f,m]=g;(f!==i.originalStart+i.originalLength||m!==i.modifiedStart+i.modifiedLength)&&(i.originalLength=f-i.originalStart,i.modifiedLength=m-i.modifiedStart,o.originalStart=f+s,o.modifiedStart=m+s,o.originalLength=l-o.originalStart,o.modifiedLength=p-o.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,i,o){if(t<o||i<o)return null;let s=e+t-o+1,a=n+i-o+1,l=0,d=0,c=0;for(let p=e;p<s;p++)for(let h=n;h<a;h++){let g=this._contiguousSequenceScore(p,h,o);g>0&&g>l&&(l=g,d=p,c=h)}return l>0?[d,c]:null}_contiguousSequenceScore(e,t,n){let i=0;for(let o=0;o<n;o++){if(!this.ElementsAreEqual(e+o,t+o))return 0;i+=this._originalStringElements[e+o].length}return i}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){let n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){let n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,i){let o=this._OriginalRegionIsBoundary(e,t)?1:0,s=this._ModifiedRegionIsBoundary(n,i)?1:0;return o+s}ConcatenateChanges(e,t){let n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){let i=new Array(e.length+t.length-1);return Fu.Copy(e,0,i,0,e.length-1),i[e.length-1]=n[0],Fu.Copy(t,1,i,e.length,t.length-1),i}else{let i=new Array(e.length+t.length);return Fu.Copy(e,0,i,0,e.length),Fu.Copy(t,0,i,e.length,t.length),i}}ChangesOverlap(e,t,n){if(Nu.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),Nu.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){let i=e.originalStart,o=e.originalLength,s=e.modifiedStart,a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(o=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new Ga(i,o,s,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,i){if(e>=0&&e<i)return e;let o=n,s=i-n-1,a=t%2===0;if(e<0){let l=o%2===0;return a===l?0:1}else{let l=s%2===0;return a===l?i-1:i-2}}};var Jt=class r{constructor(e,t){this.start=e;this.endExclusive=t;if(e>t)throw new st(`Invalid range: ${this.toString()}`)}static addRange(e,t){let n=0;for(;n<t.length&&t[n].endExclusive<e.start;)n++;let i=n;for(;i<t.length&&t[i].start<=e.endExclusive;)i++;if(n===i)t.splice(n,0,e);else{let o=Math.min(e.start,t[n].start),s=Math.max(e.endExclusive,t[i-1].endExclusive);t.splice(n,i-n,new r(o,s))}}static tryCreate(e,t){if(!(e>t))return new r(e,t)}static ofLength(e){return new r(0,e)}static ofStartAndLength(e,t){return new r(e,e+t)}static emptyAt(e){return new r(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new r(this.start+e,this.endExclusive+e)}deltaStart(e){return new r(this.start+e,this.endExclusive)}deltaEnd(e){return new r(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new r(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(t<=n)return new r(t,n)}intersectionLength(e){let t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,n-t)}intersects(e){let t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return t<n}intersectsOrTouches(e){let t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return t<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new st(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new st(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let t=[];for(let n=this.start;n<this.endExclusive;n++)t.push(e(n));return t}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}};var qo=class r{static fromRange(e){return new r(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new r(e.startLineNumber,e.endLineNumber+1)}static subtract(e,t){return t?e.startLineNumber<t.startLineNumber&&t.endLineNumberExclusive<e.endLineNumberExclusive?[new r(e.startLineNumber,t.startLineNumber),new r(t.endLineNumberExclusive,e.endLineNumberExclusive)]:t.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=t.endLineNumberExclusive?[]:t.endLineNumberExclusive<e.endLineNumberExclusive?[new r(Math.max(t.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new r(e.startLineNumber,Math.min(t.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let t=new KE(e[0].slice());for(let n=1;n<e.length;n++)t=t.getUnion(new KE(e[n].slice()));return t.ranges}static join(e){if(e.length===0)throw new st("lineRanges cannot be empty");let t=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let i=1;i<e.length;i++)t=Math.min(t,e[i].startLineNumber),n=Math.max(n,e[i].endLineNumberExclusive);return new r(t,n)}static ofLength(e,t){return new r(e,e+t)}static deserialize(e){return new r(e[0],e[1])}startLineNumber;endLineNumberExclusive;constructor(e,t){if(e>t)throw new st(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new r(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new r(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new r(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=n)return new r(t,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new D(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new D(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let t=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)t.push(e(n));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new Jt(this.startLineNumber-1,this.endLineNumberExclusive-1)}},KE=class r{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let t=ZC(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),n=sm(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)this._normalizedRanges.splice(t,0,e);else if(t===n-1){let i=this._normalizedRanges[t];this._normalizedRanges[t]=i.join(e)}else{let i=this._normalizedRanges[t].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(t,n-t,i)}}contains(e){let t=O0(this._normalizedRanges,n=>n.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){let t=O0(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let t=[],n=0,i=0,o=null;for(;n<this._normalizedRanges.length||i<e._normalizedRanges.length;){let s=null;if(n<this._normalizedRanges.length&&i<e._normalizedRanges.length){let a=this._normalizedRanges[n],l=e._normalizedRanges[i];a.startLineNumber<l.startLineNumber?(s=a,n++):(s=l,i++)}else n<this._normalizedRanges.length?(s=this._normalizedRanges[n],n++):(s=e._normalizedRanges[i],i++);o===null?o=s:o.endLineNumberExclusive>=s.startLineNumber?o=new qo(o.startLineNumber,Math.max(o.endLineNumberExclusive,s.endLineNumberExclusive)):(t.push(o),o=s)}return o!==null&&t.push(o),new r(t)}subtractFrom(e){let t=ZC(this._normalizedRanges,s=>s.endLineNumberExclusive>=e.startLineNumber),n=sm(this._normalizedRanges,s=>s.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)return new r([e]);let i=[],o=e.startLineNumber;for(let s=t;s<n;s++){let a=this._normalizedRanges[s];a.startLineNumber>o&&i.push(new qo(o,a.startLineNumber)),o=a.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new qo(o,e.endLineNumberExclusive)),new r(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let t=[],n=0,i=0;for(;n<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let o=this._normalizedRanges[n],s=e._normalizedRanges[i],a=o.intersect(s);a&&!a.isEmpty&&t.push(a),o.endLineNumberExclusive<s.endLineNumberExclusive?n++:i++}return new r(t)}getWithDelta(e){return new r(this._normalizedRanges.map(t=>t.delta(e)))}};var mo=class{static insert(e,t){return{range:new D(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}};var Yo=class r{constructor(e,t){this.lineCount=e;this.columnCount=t}static zero=new r(0,0);static lengthDiffNonNegative(e,t){return t.isLessThan(e)?r.zero:e.lineCount===t.lineCount?new r(0,t.columnCount-e.columnCount):new r(t.lineCount-e.lineCount,t.columnCount)}static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new r(0,t.column-e.column):new r(t.lineNumber-e.lineNumber,t.column-1)}static ofRange(e){return r.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,n=0;for(let i of e)i===`
`?(t++,n=0):n++;return new r(t,n)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new r(this.lineCount,this.columnCount+e.columnCount):new r(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new D(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new D(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new D(1,1,this.lineCount+1,this.columnCount+1)}addToPosition(e){return this.lineCount===0?new F(e.lineNumber,e.column+this.columnCount):new F(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}};var GE=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let t=0;t<e.length;t++)e.charAt(t)===`
`&&this.lineStartOffsetByLineIdx.push(t+1)}lineStartOffsetByLineIdx;getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Jt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let t=sm(this.lineStartOffsetByLineIdx,o=>o<=e),n=t+1,i=e-this.lineStartOffsetByLineIdx[t]+1;return new F(n,i)}getRange(e){return D.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Yo.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Yo(e,this.text.length-this.lineStartOffsetByLineIdx[e])}};var hc=class r{constructor(e){this.edits=e;jp(()=>V0(e,(t,n)=>t.range.getEndPosition().isBeforeOrEqual(n.range.getStartPosition())))}static single(e,t){return new r([new ti(e,t)])}normalize(){let e=[];for(let t of this.edits)if(e.length>0&&e[e.length-1].range.getEndPosition().equals(t.range.getStartPosition())){let n=e[e.length-1];e[e.length-1]=new ti(n.range.plusRange(t.range),n.text+t.text)}else t.isEmpty||e.push(t);return new r(e)}mapPosition(e){let t=0,n=0,i=0;for(let o of this.edits){let s=o.range.getStartPosition(),a=o.range.getEndPosition();if(e.isBeforeOrEqual(s))break;let l=Yo.ofText(o.text);if(e.isBefore(a)){let d=new F(s.lineNumber+t,s.column+(s.lineNumber+t===n?i:0)),c=l.addToPosition(d);return jE(d,c)}t+=l.lineCount-(o.range.endLineNumber-o.range.startLineNumber),l.lineCount===0?a.lineNumber!==s.lineNumber?i+=l.columnCount-(a.column-1):i+=l.columnCount-(a.column-s.column):i=l.columnCount,n=a.lineNumber+t}return new F(e.lineNumber+t,e.column+(e.lineNumber+t===n?i:0))}mapRange(e){function t(s){return s instanceof F?s:s.getStartPosition()}function n(s){return s instanceof F?s:s.getEndPosition()}let i=t(this.mapPosition(e.getStartPosition())),o=n(this.mapPosition(e.getEndPosition()));return jE(i,o)}inverseMapPosition(e,t){return this.inverse(t).mapPosition(e)}inverseMapRange(e,t){return this.inverse(t).mapRange(e)}apply(e){let t="",n=new F(1,1);for(let o of this.edits){let s=o.range,a=s.getStartPosition(),l=s.getEndPosition(),d=jE(n,a);d.isEmpty()||(t+=e.getValueOfRange(d)),t+=o.text,n=l}let i=jE(n,e.endPositionExclusive);return i.isEmpty()||(t+=e.getValueOfRange(i)),t}applyToString(e){let t=new LO(e);return this.apply(t)}inverse(e){let t=this.getNewRanges();return new r(this.edits.map((n,i)=>new ti(t[i],e.getValueOfRange(n.range))))}getNewRanges(){let e=[],t=0,n=0,i=0;for(let o of this.edits){let s=Yo.ofText(o.text),a=F.lift({lineNumber:o.range.startLineNumber+n,column:o.range.startColumn+(o.range.startLineNumber===t?i:0)}),l=s.createRange(a);e.push(l),n=l.endLineNumber-o.range.endLineNumber,i=l.endColumn-o.range.endColumn,t=o.range.endLineNumber}return e}},ti=class{constructor(e,t){this.range=e;this.text=t}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,t){return e.range.equalsRange(t.range)&&e.text===t.text}toSingleEditOperation(){return{range:this.range,text:this.text}}};function jE(r,e){if(r.lineNumber===e.lineNumber&&r.column===Number.MAX_SAFE_INTEGER)return D.fromPositions(e,e);if(!r.isBeforeOrEqual(e))throw new st("start must be before end");return new D(r.lineNumber,r.column,e.lineNumber,e.column)}var DO=class{get endPositionExclusive(){return this.length.addToPosition(new F(1,1))}getValue(){return this.getValueOfRange(this.length.toRange())}};var LO=class extends DO{constructor(t){super();this.value=t}_t=new GE(this.value);getValueOfRange(t){return this._t.getOffsetRange(t).substring(this.value)}get length(){return this._t.textLength}};function RO(r,e){return new kO(r,e)}var kO=class{constructor(e,t){this.reducer=e;this.options=t}state={flowing:!1,ended:!1,destroyed:!1};buffer={data:[],error:[]};listeners={data:[],error:[],end:[]};pendingWritePromises=[];pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(e){if(!this.state.destroyed){if(this.state.flowing)this.emitData(e);else if(this.buffer.data.push(e),typeof this.options?.highWaterMark=="number"&&this.buffer.data.length>this.options.highWaterMark)return new Promise(t=>this.pendingWritePromises.push(t))}}error(e){this.state.destroyed||(this.state.flowing?this.emitError(e):this.buffer.error.push(e))}end(e){this.state.destroyed||(typeof e<"u"&&this.write(e),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(e){this.listeners.data.slice(0).forEach(t=>t(e))}emitError(e){this.listeners.error.length===0?Be(e):this.listeners.error.slice(0).forEach(t=>t(e))}emitEnd(){this.listeners.end.slice(0).forEach(e=>e())}on(e,t){if(!this.state.destroyed)switch(e){case"data":this.listeners.data.push(t),this.resume();break;case"end":this.listeners.end.push(t),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(t),this.state.flowing&&this.flowErrors();break}}removeListener(e,t){if(this.state.destroyed)return;let n;switch(e){case"data":n=this.listeners.data;break;case"end":n=this.listeners.end;break;case"error":n=this.listeners.error;break}if(n){let i=n.indexOf(t);i>=0&&n.splice(i,1)}}flowData(){if(this.buffer.data.length>0){let e=this.reducer(this.buffer.data);this.emitData(e),this.buffer.data.length=0;let t=[...this.pendingWritePromises];this.pendingWritePromises.length=0,t.forEach(n=>n())}}flowErrors(){if(this.listeners.error.length>0){for(let e of this.buffer.error)this.emitError(e);this.buffer.error.length=0}}flowEnd(){return this.state.ended?(this.emitEnd(),this.listeners.end.length>0):!1}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}};function MO(r,e,t){r.on("error",n=>{t?.isCancellationRequested||e.onError(n)}),r.on("end",()=>{t?.isCancellationRequested||e.onEnd()}),r.on("data",n=>{t?.isCancellationRequested||e.onData(n)})}function uz(r,e){let t=RO(e);return t.end(r),t}function pz(r){let e=!1;return{read:()=>e?null:(e=!0,r)}}var $E=typeof Buffer<"u",J$=new Mi(()=>new Uint8Array(256)),OO,PO,Fn=class r{static alloc(e){return $E?new r(Buffer.allocUnsafe(e)):new r(new Uint8Array(e))}static wrap(e){return $E&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new r(e)}static fromString(e,t){return!(t?.dontUseNodeBuffer||!1)&&$E?new r(Buffer.from(e)):(OO||(OO=new TextEncoder),new r(OO.encode(e)))}static fromByteArray(e){let t=r.alloc(e.length);for(let n=0,i=e.length;n<i;n++)t.buffer[n]=e[n];return t}static concat(e,t){if(typeof t>"u"){t=0;for(let o=0,s=e.length;o<s;o++)t+=e[o].byteLength}let n=r.alloc(t),i=0;for(let o=0,s=e.length;o<s;o++){let a=e[o];n.set(a,i),i+=a.byteLength}return n}buffer;byteLength;constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}clone(){let e=r.alloc(this.byteLength);return e.set(this),e}toString(){return $E?this.buffer.toString():(PO||(PO=new TextDecoder),PO.decode(this.buffer))}slice(e,t){return new r(this.buffer.subarray(e,t))}set(e,t){if(e instanceof r)this.buffer.set(e.buffer,t);else if(e instanceof Uint8Array)this.buffer.set(e,t);else if(e instanceof ArrayBuffer)this.buffer.set(new Uint8Array(e),t);else if(ArrayBuffer.isView(e))this.buffer.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t);else throw new Error("Unknown argument 'array'")}readUInt32BE(e){return Qi(this.buffer,e)}writeUInt32BE(e,t){Zi(this.buffer,e,t)}readUInt32LE(e){return tq(this.buffer,e)}writeUInt32LE(e,t){nq(this.buffer,e,t)}readUInt8(e){return qE(this.buffer,e)}writeUInt8(e,t){YE(this.buffer,e,t)}indexOf(e,t=0){return eq(this.buffer,e instanceof r?e.buffer:e,t)}};function eq(r,e,t=0){let n=e.byteLength,i=r.byteLength;if(n===0)return 0;if(n===1)return r.indexOf(e[0]);if(n>i-t)return-1;let o=J$.value;o.fill(e.length);for(let d=0;d<e.length;d++)o[e[d]]=e.length-d-1;let s=t+e.length-1,a=s,l=-1;for(;s<i;)if(r[s]===e[a]){if(a===0){l=s;break}s--,a--}else s+=Math.max(e.length-a,o[r[s]]),a=e.length-1;return l}function hz(r,e){return r[e+0]<<0>>>0|r[e+1]<<8>>>0}function gz(r,e,t){r[t+0]=e&255,e=e>>>8,r[t+1]=e&255}function Qi(r,e){return r[e]*2**24+r[e+1]*2**16+r[e+2]*2**8+r[e+3]}function Zi(r,e,t){r[t+3]=e,e=e>>>8,r[t+2]=e,e=e>>>8,r[t+1]=e,e=e>>>8,r[t]=e}function tq(r,e){return r[e+0]<<0>>>0|r[e+1]<<8>>>0|r[e+2]<<16>>>0|r[e+3]<<24>>>0}function nq(r,e,t){r[t+0]=e&255,e=e>>>8,r[t+1]=e&255,e=e>>>8,r[t+2]=e&255,e=e>>>8,r[t+3]=e&255}function qE(r,e){return r[e]}function YE(r,e,t){r[t]=e}function mz(r){return pz(r)}function fz(r){return uz(r,e=>Fn.concat(e))}var NO;function bz(){return NO||(NO=new TextDecoder("UTF-16LE")),NO}var FO;function iq(){return FO||(FO=new TextDecoder("UTF-16BE")),FO}var BO;function WO(){return BO||(BO=rH()?bz():iq()),BO}function vz(r,e,t){let n=new Uint16Array(r.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?oq(r,e,t):bz().decode(n)}function oq(r,e,t){let n=[],i=0;for(let o=0;o<t;o++){let s=hz(r,e);e+=2,n[i++]=String.fromCharCode(s)}return n.join("")}var Dh=class{_capacity;_buffer;_completedStrings;_bufferLength;constructor(e){this._capacity=e|0,this._buffer=new Uint16Array(this._capacity),this._completedStrings=null,this._bufferLength=0}reset(){this._completedStrings=null,this._bufferLength=0}build(){return this._completedStrings!==null?(this._flushBuffer(),this._completedStrings.join("")):this._buildBuffer()}_buildBuffer(){if(this._bufferLength===0)return"";let e=new Uint16Array(this._buffer.buffer,0,this._bufferLength);return WO().decode(e)}_flushBuffer(){let e=this._buildBuffer();this._bufferLength=0,this._completedStrings===null?this._completedStrings=[e]:this._completedStrings[this._completedStrings.length]=e}appendCharCode(e){let t=this._capacity-this._bufferLength;t<=1&&(t===0||mn(e))&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendASCIICharCode(e){this._bufferLength===this._capacity&&this._flushBuffer(),this._buffer[this._bufferLength++]=e}appendString(e){let t=e.length;if(this._bufferLength+t>=this._capacity){this._flushBuffer(),this._completedStrings[this._completedStrings.length]=e;return}for(let n=0;n<t;n++)this._buffer[this._bufferLength++]=e.charCodeAt(n)}};function XE(r){return r.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}var as=class r{constructor(e,t,n,i){this.oldPosition=e;this.oldText=t;this.newPosition=n;this.newText=i}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${XE(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${XE(this.oldText)}")`:`(replace@${this.oldPosition} "${XE(this.oldText)}" with "${XE(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){let i=t.length;Zi(e,i,n),n+=4;for(let o=0;o<i;o++)gz(e,t.charCodeAt(o),n),n+=2;return n}static _readString(e,t){let n=Qi(e,t);return t+=4,vz(e,t,n)}writeSize(){return 8+r._writeStringSize(this.oldText)+r._writeStringSize(this.newText)}write(e,t){return Zi(e,this.oldPosition,t),t+=4,Zi(e,this.newPosition,t),t+=4,t=r._writeString(e,this.oldText,t),t=r._writeString(e,this.newText,t),t}static read(e,t,n){let i=Qi(e,t);t+=4;let o=Qi(e,t);t+=4;let s=r._readString(e,t);t+=r._writeStringSize(s);let a=r._readString(e,t);return t+=r._writeStringSize(a),n.push(new r(i,s,o,a)),t}};function yz(r,e){return r===null||r.length===0?e:new VO(r,e).compress()}var VO=class r{_prevEdits;_currEdits;_result;_resultLen;_prevLen;_prevDeltaOffset;_currLen;_currDeltaOffset;constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),i=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(i),i=this._getCurr(++t);continue}if(i===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldEnd<=n.newPosition){this._acceptCurr(i),i=this._getCurr(++t);continue}if(n.newEnd<=i.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(i.oldPosition<n.newPosition){let[d,c]=r._splitCurr(i,n.newPosition-i.oldPosition);this._acceptCurr(d),i=c;continue}if(n.newPosition<i.oldPosition){let[d,c]=r._splitPrev(n,i.oldPosition-n.newPosition);this._acceptPrev(d),n=c;continue}let a,l;if(i.oldEnd===n.newEnd)a=n,l=i,n=this._getPrev(++e),i=this._getCurr(++t);else if(i.oldEnd<n.newEnd){let[d,c]=r._splitPrev(n,i.oldLength);a=d,l=i,n=c,i=this._getCurr(++t)}else{let[d,c]=r._splitCurr(i,n.newLength);a=n,l=d,n=this._getPrev(++e),i=c}this._result[this._resultLen++]=new as(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}let o=r._merge(this._result);return r._removeNoOps(o)}_acceptCurr(e){this._result[this._resultLen++]=r._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=r._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new as(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new as(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){let n=e.newText.substr(0,t),i=e.newText.substr(t);return[new as(e.oldPosition,e.oldText,e.newPosition,n),new as(e.oldEnd,"",e.newPosition+t,i)]}static _splitCurr(e,t){let n=e.oldText.substr(0,t),i=e.oldText.substr(t);return[new as(e.oldPosition,n,e.newPosition,e.newText),new as(e.oldPosition+t,i,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;let t=[],n=0,i=e[0];for(let o=1;o<e.length;o++){let s=e[o];i.oldEnd===s.oldPosition?i=new as(i.oldPosition,i.oldText+s.oldText,i.newPosition,i.newText+s.newText):(t[n++]=i,i=s)}return t[n++]=i,t}static _removeNoOps(e){if(e.length===0)return e;let t=[],n=0;for(let i=0;i<e.length;i++){let o=e[i];o.oldText!==o.newText&&(t[n++]=o)}return t}};var Lh=class r{_asciiMap;_map;_defaultValue;constructor(e){let t=eh(e);this._defaultValue=t,this._asciiMap=r._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){let t=new Uint8Array(256);return t.fill(e),t}set(e,t){let n=eh(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}};var QE=class{_actual;constructor(){this._actual=new Lh(0)}add(e){this._actual.set(e,1)}has(e){return this._actual.get(e)===1}clear(){return this._actual.clear()}};var HO=class extends Lh{intlSegmenterLocales;_segmenter=null;_cachedLine=null;_cachedSegments=[];constructor(e,t){super(0),this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let n=0,i=e.length;n<i;n++)this.set(e.charCodeAt(n),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let n=null;for(let i of this._getIntlSegmenterWordsOnLine(e)){if(i.index>t)break;n=i}return n}findNextIntlWordAtOrAfterOffset(e,t){for(let n of this._getIntlSegmenterWordsOnLine(e))if(!(n.index<t))return n;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?this._cachedLine===e?this._cachedSegments:(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e)),this._cachedSegments):[]}_filterWordSegments(e){let t=[];for(let n of e)this._isWordLike(n)&&t.push(n);return t}_isWordLike(e){return!!e.isWordLike}},Iz=new Po(10);function Yl(r,e){let t=`${r}/${e.join(",")}`,n=Iz.get(t);return n||(n=new HO(r,e),Iz.set(t,n)),n}function Wu(r,e){let t=Math.pow(10,e);return Math.round(r*t)/t}var et=class{_rgbaBrand=void 0;r;g;b;a;constructor(e,t,n,i=1){this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=Wu(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}},Bu=class r{_hslaBrand=void 0;h;s;l;a;constructor(e,t,n,i){this.h=Math.max(Math.min(360,e),0)|0,this.s=Wu(Math.max(Math.min(1,t),0),3),this.l=Wu(Math.max(Math.min(1,n),0),3),this.a=Wu(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){let t=e.r/255,n=e.g/255,i=e.b/255,o=e.a,s=Math.max(t,n,i),a=Math.min(t,n,i),l=0,d=0,c=(a+s)/2,p=s-a;if(p>0){switch(d=Math.min(c<=.5?p/(2*c):p/(2-2*c),1),s){case t:l=(n-i)/p+(n<i?6:0);break;case n:l=(i-t)/p+2;break;case i:l=(t-n)/p+4;break}l*=60,l=Math.round(l)}return new r(l,d,c,o)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){let t=e.h/360,{s:n,l:i,a:o}=e,s,a,l;if(n===0)s=a=l=i;else{let d=i<.5?i*(1+n):i+n-i*n,c=2*i-d;s=r._hue2rgb(c,d,t+1/3),a=r._hue2rgb(c,d,t),l=r._hue2rgb(c,d,t-1/3)}return new et(Math.round(s*255),Math.round(a*255),Math.round(l*255),o)}},Xm=class r{_hsvaBrand=void 0;h;s;v;a;constructor(e,t,n,i){this.h=Math.max(Math.min(360,e),0)|0,this.s=Wu(Math.max(Math.min(1,t),0),3),this.v=Wu(Math.max(Math.min(1,n),0),3),this.a=Wu(Math.max(Math.min(1,i),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){let t=e.r/255,n=e.g/255,i=e.b/255,o=Math.max(t,n,i),s=Math.min(t,n,i),a=o-s,l=o===0?0:a/o,d;return a===0?d=0:o===t?d=((n-i)/a%6+6)%6:o===n?d=(i-t)/a+2:d=(t-n)/a+4,new r(Math.round(d*60),l,o,e.a)}static toRGBA(e){let{h:t,s:n,v:i,a:o}=e,s=i*n,a=s*(1-Math.abs(t/60%2-1)),l=i-s,[d,c,p]=[0,0,0];return t<60?(d=s,c=a):t<120?(d=a,c=s):t<180?(c=s,p=a):t<240?(c=a,p=s):t<300?(d=a,p=s):t<=360&&(d=s,p=a),d=Math.round((d+l)*255),c=Math.round((c+l)*255),p=Math.round((p+l)*255),new et(d,c,p,o)}},H=class r{static fromHex(e){return r.Format.CSS.parseHex(e)||r.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}rgba;_hsla;get hsla(){return this._hsla?this._hsla:Bu.fromRGBA(this.rgba)}_hsva;get hsva(){return this._hsva?this._hsva:Xm.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof et)this.rgba=e;else if(e instanceof Bu)this._hsla=e,this.rgba=Bu.toRGBA(e);else if(e instanceof Xm)this._hsva=e,this.rgba=Xm.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&et.equals(this.rgba,e.rgba)&&Bu.equals(this.hsla,e.hsla)&&Xm.equals(this.hsva,e.hsva)}getRelativeLuminance(){let e=r._relativeLuminanceForComponent(this.rgba.r),t=r._relativeLuminanceForComponent(this.rgba.g),n=r._relativeLuminanceForComponent(this.rgba.b),i=.2126*e+.7152*t+.0722*n;return Wu(i,4)}static _relativeLuminanceForComponent(e){let t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}getContrastRatio(e){let t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)}isDarker(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3<128}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){let t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){let t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new r(new Bu(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new r(new Bu(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){let{r:t,g:n,b:i,a:o}=this.rgba;return new r(new et(t,n,i,o*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new r(new et(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}blend(e){let t=e.rgba,n=this.rgba.a,i=t.a,o=n+i*(1-n);if(o<1e-6)return r.transparent;let s=this.rgba.r*n/o+t.r*i*(1-n)/o,a=this.rgba.g*n/o+t.g*i*(1-n)/o,l=this.rgba.b*n/o+t.b*i*(1-n)/o;return new r(new et(s,a,l,o))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;let{r:t,g:n,b:i,a:o}=this.rgba;return new r(new et(e.rgba.r-o*(e.rgba.r-t),e.rgba.g-o*(e.rgba.g-n),e.rgba.b-o*(e.rgba.b-i),1))}flatten(...e){let t=e.reduceRight((n,i)=>r._flatten(i,n));return r._flatten(this,t)}static _flatten(e,t){let n=1-e.rgba.a;return new r(new et(n*t.rgba.r+e.rgba.a*e.rgba.r,n*t.rgba.g+e.rgba.a*e.rgba.g,n*t.rgba.b+e.rgba.a*e.rgba.b))}_toString;toString(){return this._toString||(this._toString=r.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;let i=e.getRelativeLuminance(),o=t.getRelativeLuminance();return n=n*(o-i)/o,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;let i=e.getRelativeLuminance(),o=t.getRelativeLuminance();return n=n*(i-o)/i,e.darken(n)}static white=new r(new et(255,255,255,1));static black=new r(new et(0,0,0,1));static red=new r(new et(255,0,0,1));static blue=new r(new et(0,0,255,1));static green=new r(new et(0,255,0,1));static cyan=new r(new et(0,255,255,1));static lightgrey=new r(new et(211,211,211,1));static transparent=new r(new et(0,0,0,0))};(e=>{let r;(n=>{let t;(f=>{function i(m){return m.rgba.a===1?`rgb(${m.rgba.r}, ${m.rgba.g}, ${m.rgba.b})`:e.Format.CSS.formatRGBA(m)}f.formatRGB=i;function o(m){return`rgba(${m.rgba.r}, ${m.rgba.g}, ${m.rgba.b}, ${+m.rgba.a.toFixed(2)})`}f.formatRGBA=o;function s(m){return m.hsla.a===1?`hsl(${m.hsla.h}, ${(m.hsla.s*100).toFixed(2)}%, ${(m.hsla.l*100).toFixed(2)}%)`:e.Format.CSS.formatHSLA(m)}f.formatHSL=s;function a(m){return`hsla(${m.hsla.h}, ${(m.hsla.s*100).toFixed(2)}%, ${(m.hsla.l*100).toFixed(2)}%, ${m.hsla.a.toFixed(2)})`}f.formatHSLA=a;function l(m){let b=m.toString(16);return b.length!==2?"0"+b:b}function d(m){return`#${l(m.rgba.r)}${l(m.rgba.g)}${l(m.rgba.b)}`}f.formatHex=d;function c(m,b=!1){return b&&m.rgba.a===1?e.Format.CSS.formatHex(m):`#${l(m.rgba.r)}${l(m.rgba.g)}${l(m.rgba.b)}${l(Math.round(m.rgba.a*255))}`}f.formatHexA=c;function p(m){return m.isOpaque()?e.Format.CSS.formatHex(m):e.Format.CSS.formatRGBA(m)}f.format=p;function h(m){let b=m.length;if(b===0||m.charCodeAt(0)!==35)return null;if(b===7){let v=16*g(m.charCodeAt(1))+g(m.charCodeAt(2)),S=16*g(m.charCodeAt(3))+g(m.charCodeAt(4)),x=16*g(m.charCodeAt(5))+g(m.charCodeAt(6));return new e(new et(v,S,x,1))}if(b===9){let v=16*g(m.charCodeAt(1))+g(m.charCodeAt(2)),S=16*g(m.charCodeAt(3))+g(m.charCodeAt(4)),x=16*g(m.charCodeAt(5))+g(m.charCodeAt(6)),E=16*g(m.charCodeAt(7))+g(m.charCodeAt(8));return new e(new et(v,S,x,E/255))}if(b===4){let v=g(m.charCodeAt(1)),S=g(m.charCodeAt(2)),x=g(m.charCodeAt(3));return new e(new et(16*v+v,16*S+S,16*x+x))}if(b===5){let v=g(m.charCodeAt(1)),S=g(m.charCodeAt(2)),x=g(m.charCodeAt(3)),E=g(m.charCodeAt(4));return new e(new et(16*v+v,16*S+S,16*x+x,(16*E+E)/255))}return null}f.parseHex=h;function g(m){switch(m){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(t=n.CSS||={})})(r=e.Format||={})})(H||={});var sq=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Sz(r){return sq.test(r)}var ia=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let r;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?r=crypto.getRandomValues.bind(crypto):r=function(n){for(let i=0;i<n.length;i++)n[i]=Math.floor(Math.random()*256);return n};let e=new Uint8Array(16),t=[];for(let n=0;n<256;n++)t.push(n.toString(16).padStart(2,"0"));return function(){r(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let i=0,o="";return o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o+="-",o+=t[e[i++]],o+=t[e[i++]],o+="-",o+=t[e[i++]],o+=t[e[i++]],o+="-",o+=t[e[i++]],o+=t[e[i++]],o+="-",o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o+=t[e[i++]],o}}();var aq=Object.freeze({create:r=>ai(r.map(e=>e.toString())).join(`\r
`),split:r=>r.split(`\r
`),parse:r=>aq.split(r).filter(e=>!e.startsWith("#"))});var kh=class r{constructor(e){this.value=e}static sep=".";static None=new r("@@none@@");static Empty=new r("");equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+r.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(...e){return new r((this.value?[this.value,...e]:e).join(r.sep))}};var ls=class{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let n="mtk"+this.getForeground(e),i=this.getFontStyle(e);return i&1&&(n+=" mtki"),i&2&&(n+=" mtkb"),i&4&&(n+=" mtku"),i&8&&(n+=" mtks"),n}static getInlineStyleFromMetadata(e,t){let n=this.getForeground(e),i=this.getFontStyle(e),o=`color: ${t[n]};`;i&1&&(o+="font-style: italic;"),i&2&&(o+="font-weight: bold;");let s="";return i&4&&(s+=" underline"),i&8&&(s+=" line-through"),s&&(o+=`text-decoration:${s};`),o}static getPresentationFromMetadata(e){let t=this.getForeground(e),n=this.getFontStyle(e);return{foreground:t,italic:!!(n&1),bold:!!(n&2),underline:!!(n&4),strikethrough:!!(n&8)}}};var ZE="**",Cz="/",JE="[/\\\\]",eT="[^/\\\\]",lq=/\//g;function xz(r,e){switch(r){case 0:return"";case 1:return`${eT}*?`;default:return`(?:${JE}|${eT}+${JE}${e?`|${JE}${eT}+`:""})*?`}}function Ez(r,e){if(!r)return[];let t=[],n=!1,i=!1,o="";for(let s of r){switch(s){case e:if(!n&&!i){t.push(o),o="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":i=!0;break;case"]":i=!1;break}o+=s}return o&&t.push(o),t}function Lz(r){if(!r)return"";let e="",t=Ez(r,Cz);if(t.every(n=>n===ZE))e=".*";else{let n=!1;t.forEach((i,o)=>{if(i===ZE){if(n)return;e+=xz(2,o===t.length-1)}else{let s=!1,a="",l=!1,d="";for(let c of i){if(c!=="}"&&s){a+=c;continue}if(l&&(c!=="]"||!d)){let p;c==="-"?p=c:(c==="^"||c==="!")&&!d?p="^":c===Cz?p="":p=vi(c),d+=p;continue}switch(c){case"{":s=!0;continue;case"[":l=!0;continue;case"}":{let h=`(?:${Ez(a,",").map(g=>Lz(g)).join("|")})`;e+=h,s=!1,a="";break}case"]":{e+="["+d+"]",l=!1,d="";break}case"?":e+=eT;continue;case"*":e+=xz(1);continue;default:e+=vi(c)}}o<t.length-1&&(t[o+1]!==ZE||o+2<t.length)&&(e+=JE)}n=i===ZE})}return e}var dq=/^\*\*\/\*\.[\w\.-]+$/,cq=/^\*\*\/([\w\.-]+)\/?$/,uq=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,pq=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,hq=/^\*\*((\/[\w\.-]+)+)\/?$/,gq=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,Tz=new Po(1e4),wz=function(){return!1},Xl=function(){return null};function zO(r,e){if(!r)return Xl;let t;typeof r!="string"?t=r.pattern:t=r,t=t.trim();let n=`${t}_${!!e.trimForExclusions}`,i=Tz.get(n);if(i)return _z(i,r);let o;return dq.test(t)?i=mq(t.substr(4),t):(o=cq.exec(UO(t,e)))?i=fq(o[1],t):(e.trimForExclusions?pq:uq).test(t)?i=bq(t,e):(o=hq.exec(UO(t,e)))?i=Dz(o[1].substr(1),t,!0):(o=gq.exec(UO(t,e)))?i=Dz(o[1],t,!1):i=vq(t),Tz.set(n,i),_z(i,r)}function _z(r,e){if(typeof e=="string")return r;let t=function(n,i){return my(n,e.base,!Xt)?r(Nx(n.substr(e.base.length),pr),i):null};return t.allBasenames=r.allBasenames,t.allPaths=r.allPaths,t.basenames=r.basenames,t.patterns=r.patterns,t}function UO(r,e){return e.trimForExclusions&&r.endsWith("/**")?r.substr(0,r.length-2):r}function mq(r,e){return function(t,n){return typeof t=="string"&&t.endsWith(r)?e:null}}function fq(r,e){let t=`/${r}`,n=`\\${r}`,i=function(s,a){return typeof s!="string"?null:a?a===r?e:null:s===r||s.endsWith(t)||s.endsWith(n)?e:null},o=[r];return i.basenames=o,i.patterns=[e],i.allBasenames=o,i}function bq(r,e){let t=kz(r.slice(1,-1).split(",").map(a=>zO(a,e)).filter(a=>a!==Xl),r),n=t.length;if(!n)return Xl;if(n===1)return t[0];let i=function(a,l){for(let d=0,c=t.length;d<c;d++)if(t[d](a,l))return r;return null},o=t.find(a=>!!a.allBasenames);o&&(i.allBasenames=o.allBasenames);let s=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return s.length&&(i.allPaths=s),i}function Dz(r,e,t){let n=pr===mt.sep,i=n?r:r.replace(lq,pr),o=pr+i,s=mt.sep+r,a;return t?a=function(l,d){return typeof l=="string"&&(l===i||l.endsWith(o)||!n&&(l===r||l.endsWith(s)))?e:null}:a=function(l,d){return typeof l=="string"&&(l===i||!n&&l===r)?e:null},a.allPaths=[(t?"*/":"./")+r],a}function vq(r){try{let e=new RegExp(`^${Lz(r)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?r:null}}catch{return Xl}}function Rh(r,e={}){if(!r)return wz;if(typeof r=="string"||yq(r)){let t=zO(r,e);if(t===Xl)return wz;let n=function(i,o){return!!t(i,o)};return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return Iq(r,e)}function yq(r){let e=r;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function Iq(r,e){let t=kz(Object.getOwnPropertyNames(r).map(a=>Sq(a,r[a],e)).filter(a=>a!==Xl)),n=t.length;if(!n)return Xl;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];let a=function(c,p){let h;for(let g=0,f=t.length;g<f;g++){let m=t[g](c,p);if(typeof m=="string")return m;Xx(m)&&(h||(h=[]),h.push(m))}return h?(async()=>{for(let g of h){let f=await g;if(typeof f=="string")return f}return null})():null},l=t.find(c=>!!c.allBasenames);l&&(a.allBasenames=l.allBasenames);let d=t.reduce((c,p)=>p.allPaths?c.concat(p.allPaths):c,[]);return d.length&&(a.allPaths=d),a}let i=function(a,l,d){let c,p;for(let h=0,g=t.length;h<g;h++){let f=t[h];f.requiresSiblings&&d&&(l||(l=Ho(a)),c||(c=l.substr(0,l.length-Zp(a).length)));let m=f(a,l,c,d);if(typeof m=="string")return m;Xx(m)&&(p||(p=[]),p.push(m))}return p?(async()=>{for(let h of p){let g=await h;if(typeof g=="string")return g}return null})():null},o=t.find(a=>!!a.allBasenames);o&&(i.allBasenames=o.allBasenames);let s=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return s.length&&(i.allPaths=s),i}function Sq(r,e,t){if(e===!1)return Xl;let n=zO(r,t);if(n===Xl)return Xl;if(typeof e=="boolean")return n;if(e){let i=e.when;if(typeof i=="string"){let o=(s,a,l,d)=>{if(!d||!n(s,a))return null;let c=i.replace("$(basename)",()=>l),p=d(c);return Xx(p)?p.then(h=>h?r:null):p?r:null};return o.requiresSiblings=!0,o}}return n}function kz(r,e){let t=r.filter(a=>!!a.basenames);if(t.length<2)return r;let n=t.reduce((a,l)=>{let d=l.basenames;return d?a.concat(d):a},[]),i;if(e){i=[];for(let a=0,l=n.length;a<l;a++)i.push(e)}else i=t.reduce((a,l)=>{let d=l.patterns;return d?a.concat(d):a},[]);let o=function(a,l){if(typeof a!="string")return null;if(!l){let c;for(c=a.length;c>0;c--){let p=a.charCodeAt(c-1);if(p===47||p===92)break}l=a.substr(c)}let d=n.indexOf(l);return d!==-1?i[d]:null};o.basenames=n,o.patterns=i,o.allBasenames=n;let s=r.filter(a=>!a.basenames);return s.push(o),s}var iI=class{_tokenizationSupports=new Map;_factories=new Map;_onDidChange=new T;onDidChange=this._onDidChange.event;_colorMap;constructor(){this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),me(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){this._factories.get(e)?.dispose();let n=new KO(this,e,t);return this._factories.set(e,n),me(()=>{let i=this._factories.get(e);!i||i!==n||(this._factories.delete(e),i.dispose())})}async getOrCreate(e){let t=this.get(e);if(t)return t;let n=this._factories.get(e);return!n||n.isResolved?null:(await n.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;let n=this._factories.get(e);return!!(!n||n.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}},KO=class extends N{constructor(t,n,i){super();this._registry=t;this._languageId=n;this._factory=i}_isDisposed=!1;_resolvePromise=null;_isResolved=!1;get isResolved(){return this._isResolved}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){let t=await this._factory.tokenizationSupport;this._isResolved=!0,t&&!this._isDisposed&&this._register(this._registry.register(this._languageId,t))}};function Br(r){let e=0,t=0,n=0,i=0;for(let o=0,s=r.length;o<s;o++){let a=r.charCodeAt(o);a===13?(e===0&&(t=o),e++,o+1<s&&r.charCodeAt(o+1)===10?(i|=2,o++):i|=3,n=o+1):a===10&&(i|=1,e===0&&(t=o),e++,n=o+1)}return e===0&&(t=r.length),[e,t,r.length-n,i]}var GO=class r{constructor(e){this._tokenInfo=e}static create(e){return new r(e)}forEach(e){let t=0;for(let n of this._tokenInfo){let i=new Jt(t,t+n.length);e(i,n),t+=n.length}}slice(e){let t=[],n=0;for(let i of this._tokenInfo){let o=n,s=o+i.length;if(s>e.start){if(o>=e.endExclusive)break;let a=Math.max(0,e.start-o),l=Math.max(0,s-e.endExclusive);t.push(new tT(i.length-a-l,i.metadata))}n+=i.length}return r.create(t)}},tT=class{constructor(e,t){this.length=e;this.metadata=t}},nT=class{_tokens=[];add(e,t){this._tokens.push(new tT(e,t))}build(){return GO.create(this._tokens)}};var zn=class r{static createEmpty(e,t){let n=r.defaultTokenMetadata,i=new Uint32Array(2);return i[0]=e.length,i[1]=n,new r(i,e,t)}static createFromTextAndMetadata(e,t){let n=0,i="",o=new Array;for(let{text:s,metadata:a}of e)o.push(n+s.length,a),n+=s.length,i+=s;return new r(new Uint32Array(o),i,t)}static convertToEndOffset(e,t){let i=(e.length>>>1)-1;for(let o=0;o<i;o++)e[o<<1]=e[o+1<<1];e[i<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,i=(e.length>>>1)-1;for(;n<i;){let o=n+Math.floor((i-n)/2),s=e[o<<1];if(s===t)return o+1;s<t?n=o+1:s>t&&(i=o)}return n}_lineTokensBrand=void 0;_tokens;_tokensCount;_text;languageIdCodec;static defaultTokenMetadata=(32768|2<<24)>>>0;constructor(e,t,n){this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this.languageIdCodec=n}equals(e){return e instanceof r?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;let i=t<<1,o=i+(n<<1);for(let s=i;s<o;s++)if(this._tokens[s]!==e._tokens[s])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){let t=this._tokens[(e<<1)+1],n=ls.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){let t=this._tokens[(e<<1)+1];return ls.getTokenType(t)}getForeground(e){let t=this._tokens[(e<<1)+1];return ls.getForeground(t)}getClassName(e){let t=this._tokens[(e<<1)+1];return ls.getClassNameFromMetadata(t)}getInlineStyle(e,t){let n=this._tokens[(e<<1)+1];return ls.getInlineStyleFromMetadata(n,t)}getPresentation(e){let t=this._tokens[(e<<1)+1];return ls.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return r.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new jO(this,e,t,n)}withInserted(e){if(e.length===0)return this;let t=0,n=0,i="",o=new Array,s=0;for(;;){let a=t<this._tokensCount?this._tokens[t<<1]:-1,l=n<e.length?e[n]:null;if(a!==-1&&(l===null||a<=l.offset)){i+=this._text.substring(s,a);let d=this._tokens[(t<<1)+1];o.push(i.length,d),t++,s=a}else if(l){if(l.offset>s){i+=this._text.substring(s,l.offset);let d=this._tokens[(t<<1)+1];o.push(i.length,d),s=l.offset}i+=l.text,o.push(i.length,l.tokenMetadata),n++}else break}return new r(new Uint32Array(o),i,this.languageIdCodec)}getTokensInRange(e){let t=new nT,n=this.findTokenIndexAtOffset(e.start),i=this.findTokenIndexAtOffset(e.endExclusive);for(let o=n;o<=i;o++){let a=new Jt(this.getStartOffset(o),this.getEndOffset(o)).intersectionLength(e);a>0&&t.add(a,this.getMetadata(o))}return t.build()}getTokenText(e){let t=this.getStartOffset(e),n=this.getEndOffset(e);return this._text.substring(t,n)}forEach(e){let t=this.getCount();for(let n=0;n<t;n++)e(n)}},jO=class r{_source;_startOffset;_endOffset;_deltaOffset;_firstTokenIndex;_tokensCount;languageIdCodec;constructor(e,t,n,i){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=i,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this.languageIdCodec=e.languageIdCodec,this._tokensCount=0;for(let o=this._firstTokenIndex,s=e.getCount();o<s&&!(e.getStartOffset(o)>=n);o++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof r?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getStandardTokenType(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){let t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(e){let t=this._firstTokenIndex+e,n=this._source.getStartOffset(t),i=this._source.getEndOffset(t),o=this._source.getTokenText(t);return n<this._startOffset&&(o=o.substring(this._startOffset-n)),i>this._endOffset&&(o=o.substring(0,o.length-(i-this._endOffset))),o}forEach(e){for(let t=0;t<this.getCount();t++)e(t)}};var Ql=new Uint32Array(0).buffer,Ji=class r{static deleteBeginning(e,t){return e===null||e===Ql?e:r.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===Ql)return e;let n=Zl(e),i=n[n.length-2];return r.delete(e,t,i)}static delete(e,t,n){if(e===null||e===Ql||t===n)return e;let i=Zl(e),o=i.length>>>1;if(t===0&&i[i.length-2]===n)return Ql;let s=zn.findIndexInTokensArray(i,t),a=s>0?i[s-1<<1]:0,l=i[s<<1];if(n<l){let g=n-t;for(let f=s;f<o;f++)i[f<<1]-=g;return e}let d,c;a!==t?(i[s<<1]=t,d=s+1<<1,c=t):(d=s<<1,c=a);let p=n-t;for(let g=s+1;g<o;g++){let f=i[g<<1]-p;f>c&&(i[d++]=f,i[d++]=i[(g<<1)+1],c=f)}if(d===i.length)return e;let h=new Uint32Array(d);return h.set(i.subarray(0,d),0),h.buffer}static append(e,t){if(t===Ql)return e;if(e===Ql)return t;if(e===null)return e;if(t===null)return null;let n=Zl(e),i=Zl(t),o=i.length>>>1,s=new Uint32Array(n.length+i.length);s.set(n,0);let a=n.length,l=n[n.length-2];for(let d=0;d<o;d++)s[a++]=i[d<<1]+l,s[a++]=i[(d<<1)+1];return s.buffer}static insert(e,t,n){if(e===null||e===Ql)return e;let i=Zl(e),o=i.length>>>1,s=zn.findIndexInTokensArray(i,t);s>0&&i[s-1<<1]===t&&s--;for(let a=s;a<o;a++)i[a<<1]+=n;return e}};function Zl(r){return r instanceof Uint32Array?r:new Uint32Array(r)}var oI=class r{static deserialize(e,t,n){let i=new Uint32Array(e.buffer),o=Qi(e,t);t+=4;let s=Qi(e,t);t+=4;let a=[];for(let l=0;l<s;l++){let d=Qi(e,t);t+=4,a.push(i.subarray(t/4,t/4+d/4)),t+=d}return n.push(new r(o,a)),t}_startLineNumber;_tokens;get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineRange(){return new qo(this._startLineNumber,this._startLineNumber+this._tokens.length)}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}serializeSize(){let e=0;e+=4,e+=4;for(let t=0;t<this._tokens.length;t++){let n=this._tokens[t];if(!(n instanceof Uint32Array))throw new Error("Not supported!");e+=4,e+=n.byteLength}return e}serialize(e,t){Zi(e,this._startLineNumber,t),t+=4,Zi(e,this._tokens.length,t),t+=4;for(let n=0;n<this._tokens.length;n++){let i=this._tokens[n];if(!(i instanceof Uint32Array))throw new Error("Not supported!");Zi(e,i.byteLength,t),t+=4,e.set(new Uint8Array(i.buffer),t),t+=i.byteLength}return t}applyEdit(e,t){let[n,i]=Br(t);this._acceptDeleteRange(e),this._acceptInsertText(new F(e.startLineNumber,e.startColumn),n,i)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;let t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){let i=n-t;this._startLineNumber-=i;return}if(!(t>=this._tokens.length)){if(t<0&&n>=this._tokens.length){this._startLineNumber=0,this._tokens=[];return}if(t===n){this._tokens[t]=Ji.delete(this._tokens[t],e.startColumn-1,e.endColumn-1);return}if(t>=0)if(this._tokens[t]=Ji.deleteEnding(this._tokens[t],e.startColumn-1),n<this._tokens.length){let i=Ji.deleteBeginning(this._tokens[n],e.endColumn-1);this._tokens[t]=Ji.append(this._tokens[t],i),this._tokens.splice(t+1,n-t)}else this._tokens[t]=Ji.append(this._tokens[t],null),this._tokens=this._tokens.slice(0,t+1);else{let i=-t;this._startLineNumber-=i,this._tokens[n]=Ji.deleteBeginning(this._tokens[n],e.endColumn-1),this._tokens=this._tokens.slice(n)}}}_acceptInsertText(e,t,n){if(t===0&&n===0)return;let i=e.lineNumber-this._startLineNumber;if(i<0){this._startLineNumber+=t;return}if(!(i>=this._tokens.length)){if(t===0){this._tokens[i]=Ji.insert(this._tokens[i],e.column-1,n);return}this._tokens[i]=Ji.deleteEnding(this._tokens[i],e.column-1),this._tokens[i]=Ji.insert(this._tokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)}}_insertLines(e,t){if(t===0)return;let n=[];for(let i=0;i<t;i++)n[i]=null;this._tokens=kl(this._tokens,e,n)}};var iT=(i=>(i[i.Ignore=0]="Ignore",i[i.Info=1]="Info",i[i.Warning=2]="Warning",i[i.Error=3]="Error",i))(iT||{});(a=>{let r="error",e="warning",t="warn",n="info",i="ignore";function o(l){return l?Rn(r,l)?3:Rn(e,l)||Rn(t,l)?2:Rn(n,l)?1:0:0}a.fromValue=o;function s(l){switch(l){case 3:return r;case 2:return e;case 1:return n;default:return i}}a.toString=s})(iT||={});var eo=iT;var Mz=["AI","Azure","Chat","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"];var fo=class{value;_lower;constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(typeof e>"u"||e===null)return typeof t>"u"||t===null;if(typeof t>"u"||t===null)return!1;if(typeof e=="string"||typeof t=="string"){let n=typeof e=="string"?e:e.value,i=typeof t=="string"?t:t.value;return Rn(n,i)}return e._lower===t._lower}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}},rI=class{_set=new Set;get size(){return this._set.size}constructor(e){if(e)for(let t of e)this.add(t)}add(e){this._set.add(fo.toKey(e))}delete(e){return this._set.delete(fo.toKey(e))}has(e){return this._set.has(fo.toKey(e))}},sI=class{_map=new Map;clear(){this._map.clear()}delete(e){this._map.delete(fo.toKey(e))}get(e){return this._map.get(fo.toKey(e))}has(e){return this._map.has(fo.toKey(e))}set(e,t){this._map.set(fo.toKey(e),t)}values(){return this._map.values()}forEach(e){this._map.forEach(e)}[Symbol.iterator](){return this._map[Symbol.iterator]()}};var Ofe=j("IBuiltinExtensionsScannerService");var Qm=(i=>(i[i.Hint=1]="Hint",i[i.Info=2]="Info",i[i.Warning=4]="Warning",i[i.Error=8]="Error",i))(Qm||{});(o=>{function r(s,a){return a-s}o.compare=r;let e=Object.create(null);e[8]=u("sev.error","Error"),e[4]=u("sev.warning","Warning"),e[2]=u("sev.info","Info");function t(s){return e[s]||""}o.toString=t;function n(s){switch(s){case eo.Error:return 8;case eo.Warning:return 4;case eo.Info:return 2;case eo.Ignore:return 1}}o.fromSeverity=n;function i(s){switch(s){case 8:return eo.Error;case 4:return eo.Warning;case 2:return eo.Info;case 1:return eo.Ignore}}o.toSeverity=i})(Qm||={});var Tq;(n=>{let r="";function e(i){return t(i,!0)}n.makeKey=e;function t(i,o){let s=[r];return i.source?s.push(i.source.replace("\xA6","\\\xA6")):s.push(r),i.code?typeof i.code=="string"?s.push(i.code.replace("\xA6","\\\xA6")):s.push(i.code.value.replace("\xA6","\\\xA6")):s.push(r),i.severity!==void 0&&i.severity!==null?s.push(Qm.toString(i.severity)):s.push(r),i.message&&o?s.push(i.message.replace("\xA6","\\\xA6")):s.push(r),i.startLineNumber!==void 0&&i.startLineNumber!==null?s.push(i.startLineNumber.toString()):s.push(r),i.startColumn!==void 0&&i.startColumn!==null?s.push(i.startColumn.toString()):s.push(r),i.endLineNumber!==void 0&&i.endLineNumber!==null?s.push(i.endLineNumber.toString()):s.push(r),i.endColumn!==void 0&&i.endColumn!==null?s.push(i.endColumn.toString()):s.push(r),s.push(r),s.join("\xA6")}n.makeKeyOptionalMessage=t})(Tq||={});var aI=j("markerService");var oT=class{constructor(e,t){this.tokens=e;this.endState=t}_encodedTokenizationResultBrand=void 0};var Zm;(i=>{let r=new Map;r.set(0,re.symbolMethod),r.set(1,re.symbolFunction),r.set(2,re.symbolConstructor),r.set(3,re.symbolField),r.set(4,re.symbolVariable),r.set(5,re.symbolClass),r.set(6,re.symbolStruct),r.set(7,re.symbolInterface),r.set(8,re.symbolModule),r.set(9,re.symbolProperty),r.set(10,re.symbolEvent),r.set(11,re.symbolOperator),r.set(12,re.symbolUnit),r.set(13,re.symbolValue),r.set(15,re.symbolEnum),r.set(14,re.symbolConstant),r.set(15,re.symbolEnum),r.set(16,re.symbolEnumMember),r.set(17,re.symbolKeyword),r.set(27,re.symbolSnippet),r.set(18,re.symbolText),r.set(19,re.symbolColor),r.set(20,re.symbolFile),r.set(21,re.symbolReference),r.set(22,re.symbolCustomColor),r.set(23,re.symbolFolder),r.set(24,re.symbolTypeParameter),r.set(25,re.account),r.set(26,re.issues);function e(o){let s=r.get(o);return s||(console.info("No codicon found for CompletionItemKind "+o),s=re.symbolProperty),s}i.toIcon=e;let t=new Map;t.set("method",0),t.set("function",1),t.set("constructor",2),t.set("field",3),t.set("variable",4),t.set("class",5),t.set("struct",6),t.set("interface",7),t.set("module",8),t.set("property",9),t.set("event",10),t.set("operator",11),t.set("unit",12),t.set("value",13),t.set("constant",14),t.set("enum",15),t.set("enum-member",16),t.set("enumMember",16),t.set("keyword",17),t.set("snippet",27),t.set("text",18),t.set("color",19),t.set("file",20),t.set("reference",21),t.set("customcolor",22),t.set("folder",23),t.set("type-parameter",24),t.set("typeParameter",24),t.set("account",25),t.set("issue",26);function n(o,s){let a=t.get(o);return typeof a>"u"&&!s&&(a=9),a}i.fromString=n})(Zm||={});var Mbe={17:u("Array","array"),16:u("Boolean","boolean"),4:u("Class","class"),13:u("Constant","constant"),8:u("Constructor","constructor"),9:u("Enum","enumeration"),21:u("EnumMember","enumeration member"),23:u("Event","event"),7:u("Field","field"),0:u("File","file"),11:u("Function","function"),10:u("Interface","interface"),19:u("Key","key"),5:u("Method","method"),1:u("Module","module"),2:u("Namespace","namespace"),20:u("Null","null"),15:u("Number","number"),18:u("Object","object"),24:u("Operator","operator"),3:u("Package","package"),6:u("Property","property"),14:u("String","string"),22:u("Struct","struct"),25:u("TypeParameter","type parameter"),12:u("Variable","variable")};var wq;(t=>{let r=new Map;r.set(0,re.symbolFile),r.set(1,re.symbolModule),r.set(2,re.symbolNamespace),r.set(3,re.symbolPackage),r.set(4,re.symbolClass),r.set(5,re.symbolMethod),r.set(6,re.symbolProperty),r.set(7,re.symbolField),r.set(8,re.symbolConstructor),r.set(9,re.symbolEnum),r.set(10,re.symbolInterface),r.set(11,re.symbolFunction),r.set(12,re.symbolVariable),r.set(13,re.symbolConstant),r.set(14,re.symbolString),r.set(15,re.symbolNumber),r.set(16,re.symbolBoolean),r.set(17,re.symbolArray),r.set(18,re.symbolObject),r.set(19,re.symbolKey),r.set(20,re.symbolNull),r.set(21,re.symbolEnumMember),r.set(22,re.symbolStruct),r.set(23,re.symbolEvent),r.set(24,re.symbolOperator),r.set(25,re.symbolTypeParameter);function e(n){let i=r.get(n);return i||(console.info("No codicon found for SymbolKind "+n),i=re.symbolProperty),i}t.toIcon=e})(wq||={});var Oz=class r{constructor(e){this.value=e}static Comment=new r("comment");static Imports=new r("imports");static Region=new r("region");static fromValue(e){switch(e){case"comment":return r.Comment;case"imports":return r.Imports;case"region":return r.Region}return new r(e)}};var _q;(e=>{function r(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}e.is=r})(_q||={});var Xo=new iI,lI=new iI;var Lt=j("languageService");function ed(r,e){let t=r.getCount(),n=r.findTokenIndexAtOffset(e),i=r.getLanguageId(n),o=n;for(;o+1<t&&r.getLanguageId(o+1)===i;)o++;let s=n;for(;s>0&&r.getLanguageId(s-1)===i;)s--;return new qO(r,i,s,o+1,r.getStartOffset(s),r.getEndOffset(o))}var qO=class{_scopedLineTokensBrand=void 0;languageIdCodec;languageId;_actual;_firstTokenIndex;_lastTokenIndex;firstCharOffset;_lastCharOffset;constructor(e,t,n,i,o,s){this._actual=e,this.languageId=t,this._firstTokenIndex=n,this._lastTokenIndex=i,this.firstCharOffset=o,this._lastCharOffset=s,this.languageIdCodec=e.languageIdCodec}getLineContent(){return this._actual.getLineContent().substring(this.firstCharOffset,this._lastCharOffset)}getLineLength(){return this._lastCharOffset-this.firstCharOffset}getActualLineContentBefore(e){return this._actual.getLineContent().substring(0,this.firstCharOffset+e)}getTokenCount(){return this._lastTokenIndex-this._firstTokenIndex}findTokenIndexAtOffset(e){return this._actual.findTokenIndexAtOffset(e+this.firstCharOffset)-this._firstTokenIndex}getStandardTokenType(e){return this._actual.getStandardTokenType(e+this._firstTokenIndex)}toIViewLineTokens(){return this._actual.sliceAndInflate(this.firstCharOffset,this._lastCharOffset,0)}},Az=(e=>(e[e.value=3]="value",e))(Az||{});function oa(r){return(r&Az.value)!==0}var Jm=class{open;close;_inString;_inComment;_inRegEx;_neutralCharacter=null;_neutralCharacterSearched=!1;constructor(e){if(this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;let n=e.findTokenIndexAtOffset(t-2),i=e.getStandardTokenType(n);return this.isOK(i)}_findNeutralCharacterInRange(e,t){for(let n=e;n<=t;n++){let i=String.fromCharCode(n);if(!this.open.includes(i)&&!this.close.includes(i))return i}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}},rT=class{autoClosingPairsOpenByStart;autoClosingPairsOpenByEnd;autoClosingPairsCloseByStart;autoClosingPairsCloseByEnd;autoClosingPairsCloseSingleChar;constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(let t of e)dI(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),dI(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),dI(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),dI(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&dI(this.autoClosingPairsCloseSingleChar,t.close,t)}};function dI(r,e,t){r.has(e)?r.get(e).push(t):r.set(e,[t])}var YO=class r{_richEditBracketBrand=void 0;languageId;index;open;close;forwardRegex;reversedRegex;_openSet;_closeSet;constructor(e,t,n,i,o,s){this.languageId=e,this.index=t,this.open=n,this.close=i,this.forwardRegex=o,this.reversedRegex=s,this._openSet=r._toSet(this.open),this._closeSet=r._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){let t=new Set;for(let n of e)t.add(n);return t}};function Dq(r){let e=r.length;r=r.map(s=>[s[0].toLowerCase(),s[1].toLowerCase()]);let t=[];for(let s=0;s<e;s++)t[s]=s;let n=(s,a)=>{let[l,d]=s,[c,p]=a;return l===c||l===p||d===c||d===p},i=(s,a)=>{let l=Math.min(s,a),d=Math.max(s,a);for(let c=0;c<e;c++)t[c]===d&&(t[c]=l)};for(let s=0;s<e;s++){let a=r[s];for(let l=s+1;l<e;l++){let d=r[l];n(a,d)&&i(t[s],t[l])}}let o=[];for(let s=0;s<e;s++){let a=[],l=[];for(let d=0;d<e;d++)if(t[d]===s){let[c,p]=r[d];a.push(c),l.push(p)}a.length>0&&o.push({open:a,close:l})}return o}var sT=class{_richEditBracketsBrand=void 0;brackets;forwardRegex;reversedRegex;maxBracketLength;textIsBracket;textIsOpenBracket;constructor(e,t){let n=Dq(t);this.brackets=n.map((i,o)=>new YO(e,o,i.open,i.close,Lq(i.open,i.close,n,o),kq(i.open,i.close,n,o))),this.forwardRegex=Rq(this.brackets),this.reversedRegex=Mq(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(let i of this.brackets){for(let o of i.open)this.textIsBracket[o]=i,this.textIsOpenBracket[o]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,o.length);for(let o of i.close)this.textIsBracket[o]=i,this.textIsOpenBracket[o]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,o.length)}}};function Nz(r,e,t,n){for(let i=0,o=e.length;i<o;i++){if(i===t)continue;let s=e[i];for(let a of s.open)a.indexOf(r)>=0&&n.push(a);for(let a of s.close)a.indexOf(r)>=0&&n.push(a)}}function Fz(r,e){return r.length-e.length}function aT(r){if(r.length<=1)return r;let e=[],t=new Set;for(let n of r)t.has(n)||(e.push(n),t.add(n));return e}function Lq(r,e,t,n){let i=[];i=i.concat(r),i=i.concat(e);for(let o=0,s=i.length;o<s;o++)Nz(i[o],t,n,i);return i=aT(i),i.sort(Fz),i.reverse(),ef(i)}function kq(r,e,t,n){let i=[];i=i.concat(r),i=i.concat(e);for(let o=0,s=i.length;o<s;o++)Nz(i[o],t,n,i);return i=aT(i),i.sort(Fz),i.reverse(),ef(i.map(XO))}function Rq(r){let e=[];for(let t of r){for(let n of t.open)e.push(n);for(let n of t.close)e.push(n)}return e=aT(e),ef(e)}function Mq(r){let e=[];for(let t of r){for(let n of t.open)e.push(n);for(let n of t.close)e.push(n)}return e=aT(e),ef(e.map(XO))}function Oq(r){let e=/^[\w ]+$/.test(r);return r=vi(r),e?`\\b${r}\\b`:r}function ef(r,e){let t=`(${r.map(Oq).join(")|(")})`;return Fx(t,!0,e)}var XO=function(){function r(n){let i=new Uint16Array(n.length),o=0;for(let s=n.length-1;s>=0;s--)i[o++]=n.charCodeAt(s);return WO().decode(i)}let e=null,t=null;return function(i){return e!==i&&(e=i,t=r(e)),t}}(),yr=class{static _findPrevBracketInText(e,t,n,i){let o=n.match(e);if(!o)return null;let s=n.length-(o.index||0),a=o[0].length,l=i+s;return new D(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,n,i,o){let a=XO(n).substring(n.length-o,n.length-i);return this._findPrevBracketInText(e,t,a,i)}static findNextBracketInText(e,t,n,i){let o=n.match(e);if(!o)return null;let s=o.index||0,a=o[0].length;if(a===0)return null;let l=i+s;return new D(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,n,i,o){let s=n.substring(i,o);return this.findNextBracketInText(e,t,s,i)}};var lT=class{constructor(e,t){this.languageId=e;let n=t.brackets?Bz(t.brackets):[],i=new hu(a=>{let l=new Set;return{info:new QO(this,a,l),closing:l}}),o=new hu(a=>{let l=new Set,d=new Set;return{info:new ZO(this,a,l,d),opening:l,openingColorized:d}});for(let[a,l]of n){let d=i.get(a),c=o.get(l);d.closing.add(c.info),c.opening.add(d.info)}let s=t.colorizedBracketPairs?Bz(t.colorizedBracketPairs):n.filter(a=>!(a[0]==="<"&&a[1]===">"));for(let[a,l]of s){let d=i.get(a),c=o.get(l);d.closing.add(c.info),c.openingColorized.add(d.info),c.opening.add(d.info)}this._openingBrackets=new Map([...i.cachedValues].map(([a,l])=>[a,l.info])),this._closingBrackets=new Map([...o.cachedValues].map(([a,l])=>[a,l.info]))}_openingBrackets;_closingBrackets;get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}getBracketRegExp(e){let t=Array.from([...this._openingBrackets.keys(),...this._closingBrackets.keys()]);return ef(t,e)}};function Bz(r){return r.filter(([e,t])=>e!==""&&t!=="")}var dT=class{constructor(e,t){this.config=e;this.bracketText=t}get languageId(){return this.config.languageId}},QO=class extends dT{constructor(t,n,i){super(t,n);this.openedBrackets=i}isOpeningBracket=!0},ZO=class extends dT{constructor(t,n,i,o){super(t,n);this.openingBrackets=i;this.openingColorizedBrackets=o}isOpeningBracket=!1;closes(t){return t.config!==this.config?!1:this.openingBrackets.has(t)}closesColorized(t){return t.config!==this.config?!1:this.openingColorizedBrackets.has(t)}getOpeningBrackets(){return[...this.openingBrackets]}};var jt=class r{static _nextVisibleColumn(e,t,n){return e===9?r.nextRenderTabStop(t,n):Ls(e)||uy(e)?t+2:t+1}static visibleColumnFromColumn(e,t,n){let i=Math.min(t-1,e.length),o=e.substring(0,i),s=new ih(o),a=0;for(;!s.eol();){let l=Im(o,i,s.offset);s.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,n)}return a}static toStatusbarColumn(e,t,n){let i=e.substring(0,Math.min(t-1,e.length)),o=new nh(i),s=0;for(;!o.eol();)o.nextCodePoint()===9?s=r.nextRenderTabStop(s,n):s=s+1;return s+1}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;let i=e.length,o=new ih(e),s=0,a=1;for(;!o.eol();){let l=Im(e,i,o.offset);o.nextGraphemeLength();let d=this._nextVisibleColumn(l,s,n),c=o.offset+1;if(d>=t){let p=t-s;return d-t<p?c:a}s=d,a=c}return i+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}};function Wz(r,e,t,n){return r!==t?bn(t-r,n):bn(0,n-e)}var ci=0;function tf(r){return r===0}var ds=2**26;function bn(r,e){return r*ds+e}function Qo(r){let e=r,t=Math.floor(e/ds),n=e-t*ds;return new Yo(t,n)}function Vz(r){return Math.floor(r/ds)}function Bt(r,e){let t=r+e;return e>=ds&&(t=t-r%ds),t}function Hz(r,e){return r.reduce((t,n)=>Bt(t,e(n)),ci)}function JO(r,e){return r===e}function Oh(r,e){let t=r,n=e;if(n-t<=0)return ci;let o=Math.floor(t/ds),s=Math.floor(n/ds),a=n-s*ds;if(o===s){let l=t-o*ds;return bn(0,a-l)}else return bn(s-o,a)}function gc(r,e){return r<e}function Vu(r,e){return r<=e}function nf(r,e){return r>=e}function Hu(r){return bn(r.lineNumber-1,r.column-1)}function Uu(r,e){let t=r,n=Math.floor(t/ds),i=t-n*ds,o=e,s=Math.floor(o/ds),a=o-s*ds;return new D(n+1,i+1,s+1,a+1)}function Uz(r){let e=Ma(r);return bn(e.length-1,e[e.length-1].length)}var cT=[],bo=class r{constructor(e,t){this.items=e;this.additionalItems=t}static cache=new Array(129);static create(e,t){if(e<=128&&t.length===0){let n=r.cache[e];return n||(n=new r(e,t),r.cache[e]=n),n}return new r(e,t)}static empty=r.create(0,cT);static getEmpty(){return this.empty}add(e,t){let n=t.getKey(e),i=n>>5;if(i===0){let s=1<<n|this.items;return s===this.items?this:r.create(s,this.additionalItems)}i--;let o=this.additionalItems.slice(0);for(;o.length<i;)o.push(0);return o[i]|=1<<(n&31),r.create(this.items,o)}has(e,t){let n=t.getKey(e),i=n>>5;return i===0?(this.items&1<<n)!==0:(i--,((this.additionalItems[i]||0)&1<<(n&31))!==0)}merge(e){let t=this.items|e.items;if(this.additionalItems===cT&&e.additionalItems===cT)return t===this.items?this:t===e.items?e:r.create(t,cT);let n=[];for(let i=0;i<Math.max(this.additionalItems.length,e.additionalItems.length);i++){let o=this.additionalItems[i]||0,s=e.additionalItems[i]||0;n.push(o|s)}return r.create(t,n)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}equals(e){if(this.items!==e.items||this.additionalItems.length!==e.additionalItems.length)return!1;for(let t=0;t<this.additionalItems.length;t++)if(this.additionalItems[t]!==e.additionalItems[t])return!1;return!0}},eP={getKey(r){return r}},of=class{items=new Map;getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}reverseLookup(e){return[...this.items].find(([t,n])=>n===e)?.[0]}reverseLookupSet(e){let t=[];for(let[n]of this.items)e.has(n,this)&&t.push(n);return t}keys(){return this.items.keys()}};var uT=class r{static DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`;static DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;static DEFAULT_AUTOCLOSE_BEFORE_WHITESPACE=` 
	`;_autoClosingPairs;_surroundingPairs;_autoCloseBeforeForQuotes;_autoCloseBeforeForBrackets;constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new Jm(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new Jm({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){let t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new Jm({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:r.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:r.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}};var pT=class{_richEditBrackets;constructor(e){this._richEditBrackets=e}getElectricCharacters(){let e=[];if(this._richEditBrackets)for(let t of this._richEditBrackets.brackets)for(let n of t.close){let i=n.charAt(n.length-1);e.push(i)}return ai(e)}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;let i=t.findTokenIndexAtOffset(n-1);if(oa(t.getStandardTokenType(i)))return null;let o=this._richEditBrackets.reversedRegex,s=t.getLineContent().substring(0,n-1)+e,a=yr.findPrevBracketInRange(o,1,s,0,s.length);if(!a)return null;let l=s.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;let c=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(c)?{matchOpenBracket:l}:null}};function hT(r){return r.global&&(r.lastIndex=0),!0}var gT=class{_indentationRules;constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&hT(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&hT(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&hT(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&hT(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}};var mT=class r{_brackets;_regExpRules;constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{let n=r._createOpenBracketRegExp(t[0]),i=r._createCloseBracketRegExp(t[1]);n&&i&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:i})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,i){if(e>=3)for(let o=0,s=this._regExpRules.length;o<s;o++){let a=this._regExpRules[o];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:i},{reg:a.previousLineText,text:t}].every(d=>d.reg?(d.reg.lastIndex=0,d.reg.test(d.text)):!0))return a.action}if(e>=2&&n.length>0&&i.length>0)for(let o=0,s=this._brackets.length;o<s;o++){let a=this._brackets[o];if(a.openRegExp.test(n)&&a.closeRegExp.test(i))return{indentAction:2}}if(e>=2&&n.length>0){for(let o=0,s=this._brackets.length;o<s;o++)if(this._brackets[o].openRegExp.test(n))return{indentAction:1}}return null}static _createOpenBracketRegExp(e){let t=vi(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",r._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=vi(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,r._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return Be(t),null}}};var Pq=[];function Cn(r,e,t){e instanceof jl||(e=new jl(e,[],!!t)),Pq.push([r,e])}var Fs=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});var Aq={ModesRegistry:"editor.modesRegistry"},nP=class{_languages;_onDidChangeLanguages=new T;onDidChangeLanguages=this._onDidChangeLanguages.event;constructor(){this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}},rf=new nP;Te.add(Aq.ModesRegistry,rf);var Ni="plaintext",Nq=".txt";rf.registerLanguage({id:Ni,extensions:[Nq],aliases:[u("plainText.alias","Plain Text"),"text"],mimetypes:[Fs.text]});Te.as(In.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);var uI=class{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}},Qn=j("languageConfigurationService"),cI=class extends N{constructor(t,n){super();this.configurationService=t;this.languageService=n;let i=new Set(Object.values(iP));this._register(this.configurationService.onDidChangeConfiguration(o=>{let s=o.change.keys.some(l=>i.has(l)),a=o.change.overrides.filter(([l,d])=>d.some(c=>i.has(c))).map(([l])=>l);if(s)this.configurations.clear(),this.onDidChangeEmitter.fire(new uI(void 0));else for(let l of a)this.languageService.isRegisteredLanguageId(l)&&(this.configurations.delete(l),this.onDidChangeEmitter.fire(new uI(l)))})),this._register(this._registry.onDidChange(o=>{this.configurations.delete(o.languageId),this.onDidChangeEmitter.fire(new uI(o.languageId))}))}_serviceBrand;_registry=this._register(new rP);onDidChangeEmitter=this._register(new T);onDidChange=this.onDidChangeEmitter.event;configurations=new Map;register(t,n,i){return this._registry.register(t,n,i)}getLanguageConfiguration(t){let n=this.configurations.get(t);return n||(n=Fq(t,this._registry,this.configurationService,this.languageService),this.configurations.set(t,n)),n}};cI=_([y(0,Ge),y(1,Lt)],cI);function Fq(r,e,t,n){let i=e.getLanguageConfiguration(r);if(!i){if(!n.isRegisteredLanguageId(r))return new sf(r,{});i=new sf(r,{})}let o=Bq(i.languageId,t),s=Gz([i.underlyingConfig,o]);return new sf(i.languageId,s)}var iP={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function Bq(r,e){let t=e.getValue(iP.brackets,{overrideIdentifier:r}),n=e.getValue(iP.colorizedBracketPairs,{overrideIdentifier:r});return{brackets:Kz(t),colorizedBracketPairs:Kz(n)}}function Kz(r){if(Array.isArray(r))return r.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}function vT(r,e,t){let n=r.getLineContent(e),i=an(n);return i.length>t-1&&(i=i.substring(0,t-1)),i}var oP=class{constructor(e){this.languageId=e;this._entries=[],this._order=0,this._resolved=null}_entries;_order;_resolved=null;register(e,t){let n=new fT(e,t,++this._order);return this._entries.push(n),this._resolved=null,me(()=>{for(let i=0;i<this._entries.length;i++)if(this._entries[i]===n){this._entries.splice(i,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){let e=this._resolve();e&&(this._resolved=new sf(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(fT.cmp),Gz(this._entries.map(e=>e.configuration)))}};function Gz(r){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(let t of r)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}var fT=class{constructor(e,t,n){this.configuration=e;this.priority=t;this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}},bT=class{constructor(e){this.languageId=e}},rP=class extends N{_entries=new Map;_onDidChange=this._register(new T);onDidChange=this._onDidChange.event;constructor(){super(),this._register(this.register(Ni,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,n=0){let i=this._entries.get(e);i||(i=new oP(e),this._entries.set(e,i));let o=i.register(t,n);return this._onDidChange.fire(new bT(e)),me(()=>{o.dispose(),this._onDidChange.fire(new bT(e))})}getLanguageConfiguration(e){return this._entries.get(e)?.getResolvedConfiguration()||null}},sf=class r{constructor(e,t){this.languageId=e;this.underlyingConfig=t;this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new mT(this.underlyingConfig):null,this.comments=r._handleComments(this.underlyingConfig),this.characterPair=new uT(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||EE,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new gT(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new lT(e,this.underlyingConfig)}_brackets;_electricCharacter;_onEnterSupport;comments;characterPair;wordDefinition;indentRulesSupport;indentationRules;foldingRules;bracketsNew;getWordDefinition(){return hh(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new sT(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new pT(this.brackets)),this._electricCharacter}onEnter(e,t,n,i){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,i):null}getAutoClosingPairs(){return new rT(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){let t=e.comments;if(!t)return null;let n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){let[i,o]=t.blockComment;n.blockCommentStartToken=i,n.blockCommentEndToken=o}return n}};Cn(Qn,cI,1);var sP=class r{constructor(e){this.map=e}static createFromLanguage(e,t){function n(o){return t.getKey(`${o.languageId}:::${o.bracketText}`)}let i=new Map;for(let o of e.bracketsNew.openingBrackets){let s=bn(0,o.bracketText.length),a=n(o),l=bo.getEmpty().add(a,eP);i.set(o.bracketText,new ja(s,1,a,l,pI.create(s,o,l)))}for(let o of e.bracketsNew.closingBrackets){let s=bn(0,o.bracketText.length),a=bo.getEmpty(),l=o.getOpeningBrackets();for(let d of l)a=a.add(n(d),eP);i.set(o.bracketText,new ja(s,2,n(l[0]),a,pI.create(s,o,a)))}return new r(i)}hasRegExp=!1;_regExpGlobal=null;getRegExpStr(){if(this.isEmpty)return null;{let e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>Wq(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){let e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(let[t,n]of this.map)if(n.kind===2&&n.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}};function Wq(r){let e=vi(r);return/^[\w ]+/.test(r)&&(e=`\\b${e}`),/[\w ]+$/.test(r)&&(e=`${e}\\b`),e}var af=class{constructor(e,t){this.denseKeyProvider=e;this.getLanguageConfiguration=t}languageIdToBracketTokens=new Map;didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=sP.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}getToken(e,t){return this.getSingleLanguageBracketTokens(t).getToken(e)}};var ja=class{constructor(e,t,n,i,o){this.length=e;this.kind=t;this.bracketId=n;this.bracketIds=i;this.astNode=o}},lf=class{constructor(e,t){this.textModel=e;this.bracketTokens=t;this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}textBufferLineCount;textBufferLastLineLength;reader=new aP(this.textModel,this.bracketTokens);_offset=ci;get offset(){return this._offset}get length(){return bn(this.textBufferLineCount-1,this.textBufferLastLineLength)}getText(){return this.textModel.getValue()}skip(e){this.didPeek=!1,this._offset=Bt(this._offset,e);let t=Qo(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}didPeek=!1;peeked=null;read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=Bt(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}},aP=class{constructor(e,t){this.textModel=e;this.bracketTokens=t;this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}textBufferLineCount;textBufferLastLineLength;lineIdx=0;line=null;lineCharOffset=0;lineTokens=null;lineTokenOffset=0;setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}peekedToken=null;read(){if(this.peekedToken){let o=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=o.length,o}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));let e=this.lineIdx,t=this.lineCharOffset,n=0;for(;;){let o=this.lineTokens,s=o.getCount(),a=null;if(this.lineTokenOffset<s){let l=o.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<s&&l===o.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;let d=ls.getTokenType(l)===0,c=ls.containsBalancedBrackets(l),p=o.getEndOffset(this.lineTokenOffset);if(c&&d&&this.lineCharOffset<p){let h=o.getLanguageId(this.lineTokenOffset),g=this.line.substring(this.lineCharOffset,p),f=this.bracketTokens.getSingleLanguageBracketTokens(h),m=f.regExpGlobal;if(m){m.lastIndex=0;let b=m.exec(g);b&&(a=f.getToken(b[0]),a&&(this.lineCharOffset+=b.index))}}if(n+=p-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=p}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}let i=Wz(e,t,this.lineIdx,this.lineCharOffset);return new ja(i,0,-1,bo.getEmpty(),new $a(i))}},yT=class{constructor(e,t){this.text=e;let n=t.getRegExpStr(),i=n?new RegExp(n+`|
`,"gi"):null,o=[],s,a=0,l=0,d=0,c=0,p=[];for(let f=0;f<60;f++)p.push(new ja(bn(0,f),0,-1,bo.getEmpty(),new $a(bn(0,f))));let h=[];for(let f=0;f<60;f++)h.push(new ja(bn(1,f),0,-1,bo.getEmpty(),new $a(bn(1,f))));if(i)for(i.lastIndex=0;(s=i.exec(e))!==null;){let f=s.index,m=s[0];if(m===`
`)a++,l=f+1;else{if(d!==f){let b;if(c===a){let v=f-d;if(v<p.length)b=p[v];else{let S=bn(0,v);b=new ja(S,0,-1,bo.getEmpty(),new $a(S))}}else{let v=a-c,S=f-l;if(v===1&&S<h.length)b=h[S];else{let x=bn(v,S);b=new ja(x,0,-1,bo.getEmpty(),new $a(x))}}o.push(b)}o.push(t.getToken(m)),d=f+m.length,c=a}}let g=e.length;if(d!==g){let f=c===a?bn(0,g-d):bn(a-c,g-l);o.push(new ja(f,0,-1,bo.getEmpty(),new $a(f)))}this.length=bn(a,g-l),this.tokens=o}_offset=ci;tokens;idx=0;get offset(){return this._offset}length;read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new zp}getText(){return this.text}};var hI=class{_length;get length(){return this._length}constructor(e){this._length=e}},gI=class r extends hI{constructor(t,n,i,o,s){super(t);this.openingBracket=n;this.child=i;this.closingBracket=o;this.missingOpeningBracketIds=s}static create(t,n,i){let o=t.length;return n&&(o=Bt(o,n.length)),i&&(o=Bt(o,i.length)),new r(o,t,n,i,n?n.missingOpeningBracketIds:bo.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(t){switch(t){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){let t=[];return t.push(this.openingBracket),this.child&&t.push(this.child),this.closingBracket&&t.push(this.closingBracket),t}canBeReused(t){return!(this.closingBracket===null||t.intersects(this.missingOpeningBracketIds))}flattenLists(){return r.create(this.openingBracket.flattenLists(),this.child&&this.child.flattenLists(),this.closingBracket&&this.closingBracket.flattenLists())}deepClone(){return new r(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(t,n){return this.child?this.child.computeMinIndentation(Bt(t,this.openingBracket.length),n):Number.MAX_SAFE_INTEGER}},us=class r extends hI{constructor(t,n,i){super(t);this.listHeight=n;this._missingOpeningBracketIds=i}static create23(t,n,i,o=!1){let s=t.length,a=t.missingOpeningBracketIds;if(t.listHeight!==n.listHeight)throw new Error("Invalid list heights");if(s=Bt(s,n.length),a=a.merge(n.missingOpeningBracketIds),i){if(t.listHeight!==i.listHeight)throw new Error("Invalid list heights");s=Bt(s,i.length),a=a.merge(i.missingOpeningBracketIds)}return o?new lP(s,t.listHeight+1,t,n,i,a):new mI(s,t.listHeight+1,t,n,i,a)}static create(t,n=!1){if(t.length===0)return this.getEmpty();{let i=t[0].length,o=t[0].missingOpeningBracketIds;for(let s=1;s<t.length;s++)i=Bt(i,t[s].length),o=o.merge(t[s].missingOpeningBracketIds);return n?new IT(i,t[0].listHeight+1,t,o):new fI(i,t[0].listHeight+1,t,o)}}static getEmpty(){return new IT(ci,0,[],bo.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}cachedMinIndentation=-1;throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();let t=this.childrenLength;if(t===0)return;let n=this.getChild(t-1),i=n.kind===4?n.toMutable():n;return n!==i&&this.setChild(t-1,i),i}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;let n=this.getChild(0),i=n.kind===4?n.toMutable():n;return n!==i&&this.setChild(0,i),i}canBeReused(t){if(t.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let n=this;for(;n.kind===4;){let i=n.childrenLength;if(i===0)throw new st;n=n.getChild(i-1)}return n.canBeReused(t)}handleChildrenChanged(){this.throwIfImmutable();let t=this.childrenLength,n=this.getChild(0).length,i=this.getChild(0).missingOpeningBracketIds;for(let o=1;o<t;o++){let s=this.getChild(o);n=Bt(n,s.length),i=i.merge(s.missingOpeningBracketIds)}this._length=n,this._missingOpeningBracketIds=i,this.cachedMinIndentation=-1}flattenLists(){let t=[];for(let n of this.children){let i=n.flattenLists();i.kind===4?t.push(...i.children):t.push(i)}return r.create(t)}computeMinIndentation(t,n){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let i=Number.MAX_SAFE_INTEGER,o=t;for(let s=0;s<this.childrenLength;s++){let a=this.getChild(s);a&&(i=Math.min(i,a.computeMinIndentation(o,n)),o=Bt(o,a.length))}return this.cachedMinIndentation=i,i}},mI=class r extends us{constructor(t,n,i,o,s,a){super(t,n,a);this._item1=i;this._item2=o;this._item3=s}get childrenLength(){return this._item3!==null?3:2}getChild(t){switch(t){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(t,n){switch(t){case 0:this._item1=n;return;case 1:this._item2=n;return;case 2:this._item3=n;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new r(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(t){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=t,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();let t=this._item3;return this._item3=null,this.handleChildrenChanged(),t}prependChildOfSameHeight(t){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=t,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();let t=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),t}toMutable(){return this}},lP=class extends mI{toMutable(){return new mI(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}},fI=class r extends us{constructor(t,n,i,o){super(t,n,o);this._children=i}get childrenLength(){return this._children.length}getChild(t){return this._children[t]}setChild(t,n){this._children[t]=n}get children(){return this._children}deepClone(){let t=new Array(this._children.length);for(let n=0;n<this._children.length;n++)t[n]=this._children[n].deepClone();return new r(this.length,this.listHeight,t,this.missingOpeningBracketIds)}appendChildOfSameHeight(t){this.throwIfImmutable(),this._children.push(t),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();let t=this._children.pop();return this.handleChildrenChanged(),t}prependChildOfSameHeight(t){this.throwIfImmutable(),this._children.unshift(t),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();let t=this._children.shift();return this.handleChildrenChanged(),t}toMutable(){return this}},IT=class extends fI{toMutable(){return new fI(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}},Uq=[],bI=class extends hI{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return Uq}flattenLists(){return this}deepClone(){return this}},$a=class extends bI{get kind(){return 0}get missingOpeningBracketIds(){return bo.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){let n=Qo(e),i=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,o=Vz(Bt(e,this.length))+1,s=Number.MAX_SAFE_INTEGER;for(let a=i;a<=o;a++){let l=t.getLineFirstNonWhitespaceColumn(a),d=t.getLineContent(a);if(l===0)continue;let c=jt.visibleColumnFromColumn(d,l,t.getOptions().tabSize);s=Math.min(s,c)}return s}},pI=class r extends bI{constructor(t,n,i){super(t);this.bracketInfo=n;this.bracketIds=i}static create(t,n,i){return new r(t,n,i)}get kind(){return 1}get missingOpeningBracketIds(){return bo.getEmpty()}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(t){return!1}computeMinIndentation(t,n){return Number.MAX_SAFE_INTEGER}},ST=class extends bI{get kind(){return 3}missingOpeningBracketIds;constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}};var vI=class{constructor(e,t,n,i){this.range=e;this.nestingLevel=t;this.nestingLevelOfEqualBracketType=n;this.isInvalid=i}},dP=class{constructor(e,t,n,i,o,s){this.range=e;this.openingBracketRange=t;this.closingBracketRange=n;this.nestingLevel=i;this.nestingLevelOfEqualBracketType=o;this.bracketPairNode=s}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}get closingBracketInfo(){return this.bracketPairNode.closingBracket?.bracketInfo}},CT=class extends dP{constructor(t,n,i,o,s,a,l){super(t,n,i,o,s,a);this.minVisibleColumnIndentation=l}};var xT=class{changeType=1},Wr=class r{constructor(e,t,n,i,o){this.ownerId=e;this.lineNumber=t;this.column=n;this.options=i;this.order=o}static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",i=0;for(let o of t)n+=e.substring(i,o.column-1),i=o.column-1,n+=o.options.content;return n+=e.substring(i),n}static fromDecorations(e){let t=[];for(let n of e)n.options.before&&n.options.before.content.length>0&&t.push(new r(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new r(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,i)=>n.lineNumber===i.lineNumber?n.column===i.column?n.order-i.order:n.column-i.column:n.lineNumber-i.lineNumber),t}withText(e){return new r(this.ownerId,this.lineNumber,this.column,{...this.options,content:e},this.order)}},yI=class{changeType=2;lineNumber;detail;injectedText;constructor(e,t,n){this.lineNumber=e,this.detail=t,this.injectedText=n}},ET=class{changeType=3;fromLineNumber;toLineNumber;constructor(e,t){this.fromLineNumber=e,this.toLineNumber=t}},TT=class{changeType=4;fromLineNumber;toLineNumber;detail;injectedTexts;constructor(e,t,n,i){this.injectedTexts=i,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}},wT=class{changeType=5},Ph=class r{changes;versionId;isUndoing;isRedoing;resultingSelection;constructor(e,t,n,i){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=i,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){let n=[].concat(e.changes).concat(t.changes),i=t.versionId,o=e.isUndoing||t.isUndoing,s=e.isRedoing||t.isRedoing;return new r(n,i,o,s)}},df=class{changes;constructor(e){this.changes=e}},zu=class r{constructor(e,t){this.rawContentChangedEvent=e;this.contentChangedEvent=t}merge(e){let t=Ph.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=r._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new r(t,n)}static _mergeChangeEvents(e,t){let n=[].concat(e.changes).concat(t.changes),i=t.eol,o=t.versionId,s=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,d=e.isEolChange&&t.isEolChange;return{changes:n,eol:i,isEolChange:d,versionId:o,isUndoing:s,isRedoing:a,isFlush:l}}};var ra=class{constructor(e,t,n,i,o,s){this.visibleColumn=e;this.column=t;this.className=n;this.horizontalLine=i;this.forWrappedLinesAfterColumn=o;this.forWrappedLinesBeforeOrAtColumn=s;if(e!==-1==(t!==-1))throw new Error}},mc=class{constructor(e,t){this.top=e;this.endColumn=t}};var II=class r{constructor(e){this.edits=e;let t=-1;for(let n of e){if(!(n.replaceRange.start>=t))throw new st(`Edits must be disjoint and sorted. Found ${n} after ${t}`);t=n.replaceRange.endExclusive}}static empty=new r([]);static fromJson(e){return new r(e.map(qa.fromJson))}static replace(e,t){return new r([new qa(e,t)])}static insert(e,t){return r.replace(Jt.emptyAt(e),t)}normalize(){let e=[],t;for(let n of this.edits)n.newText.length===0&&n.replaceRange.length===0||(t&&t.replaceRange.endExclusive===n.replaceRange.start?t=new qa(t.replaceRange.join(n.replaceRange),t.newText+n.newText):(t&&e.push(t),t=n));return t&&e.push(t),new r(e)}toString(){return`[${this.edits.map(t=>t.toString()).join(", ")}]`}apply(e){let t=[],n=0;for(let i of this.edits)t.push(e.substring(n,i.replaceRange.start)),t.push(i.newText),n=i.replaceRange.endExclusive;return t.push(e.substring(n)),t.join("")}compose(e){return Kq(this,e)}inverse(e){let t=[],n=0;for(let i of this.edits)t.push(new qa(Jt.ofStartAndLength(i.replaceRange.start+n,i.newText.length),e.substring(i.replaceRange.start,i.replaceRange.endExclusive))),n+=i.newText.length-i.replaceRange.length;return new r(t)}getNewTextRanges(){let e=[],t=0;for(let n of this.edits)e.push(Jt.ofStartAndLength(n.replaceRange.start+t,n.newText.length)),t+=n.newText.length-n.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let t=[],n=0,i=0,o=0;for(;i<this.edits.length||n<e.edits.length;){let s=e.edits[n],a=this.edits[i];if(a)s?a.replaceRange.intersects(s.replaceRange)?i++:a.replaceRange.start<s.replaceRange.start?(t.push(new qa(a.replaceRange.delta(o),a.newText)),i++):(n++,o+=s.newText.length-s.replaceRange.length):(t.push(new qa(a.replaceRange.delta(o),a.newText)),i++);else break}return new r(t)}applyToOffset(e){let t=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+t;t+=n.newText.length-n.replaceRange.length}else break;return e+t}applyToOffsetRange(e){return new Jt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyInverseToOffset(e){let t=0;for(let n of this.edits){let i=n.newText.length;if(n.replaceRange.start<=e-t){if(e-t<n.replaceRange.start+i)return n.replaceRange.start;t+=i-n.replaceRange.length}else break}return e-t}},qa=class r{constructor(e,t){this.replaceRange=e;this.newText=t}static fromJson(e){return new r(Jt.ofStartAndLength(e.pos,e.len),e.txt)}static insert(e,t){return new r(Jt.emptyAt(e),t)}toString(){return`${this.replaceRange} -> "${this.newText}"`}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function Kq(r,e){if(r=r.normalize(),e=e.normalize(),r.isEmpty)return e;if(e.isEmpty)return r;let t=[...r.edits],n=[],i=0;for(let o of e.edits){for(;;){let d=t[0];if(!d||d.replaceRange.start+i+d.newText.length>=o.replaceRange.start)break;t.shift(),n.push(d),i+=d.newText.length-d.replaceRange.length}let s=i,a,l;for(;;){let d=t[0];if(!d||d.replaceRange.start+i>o.replaceRange.endExclusive)break;a||(a=d),l=d,t.shift(),i+=d.newText.length-d.replaceRange.length}if(!a)n.push(new qa(o.replaceRange.delta(-i),o.newText));else{let d="",c=o.replaceRange.start-(a.replaceRange.start+s);c>0&&(d=a.newText.slice(0,c));let p=l.replaceRange.endExclusive+i-o.replaceRange.endExclusive;if(p>0){let f=new qa(Jt.ofStartAndLength(l.replaceRange.endExclusive,0),l.newText.slice(-p));t.unshift(f),i-=f.newText.length-f.replaceRange.length}let h=d+o.newText,g=new Jt(Math.min(a.replaceRange.start,o.replaceRange.start-s),o.replaceRange.endExclusive-i);n.push(new qa(g,h))}}for(;;){let o=t.shift();if(!o)break;n.push(o)}return new II(n).normalize()}var _T=class r{constructor(e,t){this.lineEdit=e;this.additionalLines=t}static replace(e,t){return new r(II.replace(e,t),null)}};var qz=j("undoRedoService");var jz=class r{static _ID=0;id;order;constructor(){this.id=r._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}static None=new r},$z=class r{static _ID=0;id;order;constructor(){this.id=r._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}static None=new r};var cf=class{_textModelResolvedOptionsBrand=void 0;tabSize;indentSize;_indentSizeIsTabSize;insertSpaces;defaultEOL;trimAutoWhitespace;bracketPairColorizationOptions;get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&wn(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}},Ku=class{_findMatchBrand=void 0;range;matches;constructor(e,t){this.range=e,this.matches=t}};function Yz(r){return r&&typeof r.read=="function"}var uf=class{constructor(e,t,n,i,o,s){this.identifier=e;this.range=t;this.text=n;this.forceMoveMarkers=i;this.isAutoWhitespaceEdit=o;this._isTracked=s}},DT=class{regex;wordSeparators;simpleSearch;constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}},LT=class{constructor(e,t,n){this.reverseEdits=e;this.changes=t;this.trimAutoWhitespaceLineNumbers=n}};var kT={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};var fc=class{constructor(e,t,n,i,o){this.injectionOffsets=e;this.injectionOptions=t;this.breakOffsets=n;this.breakOffsetsVisibleColumn=i;this.wrappedTextIndentLength=o}getOutputLineCount(){return this.breakOffsets.length}getMinOutputOffset(e){return e>0?this.wrappedTextIndentLength:0}getLineLength(e){let t=e>0?this.breakOffsets[e-1]:0,i=this.breakOffsets[e]-t;return e>0&&(i+=this.wrappedTextIndentLength),i}getMaxOutputOffset(e){return this.getLineLength(e)}translateToInputOffset(e,t){e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength));let i=e===0?t:this.breakOffsets[e-1]+t;if(this.injectionOffsets!==null)for(let o=0;o<this.injectionOffsets.length&&i>this.injectionOffsets[o];o++)i<this.injectionOffsets[o]+this.injectionOptions[o].content.length?i=this.injectionOffsets[o]:i-=this.injectionOptions[o].content.length;return i}translateToOutputPosition(e,t=2){let n=e;if(this.injectionOffsets!==null)for(let i=0;i<this.injectionOffsets.length&&!(e<this.injectionOffsets[i]||t!==1&&e===this.injectionOffsets[i]);i++)n+=this.injectionOptions[i].content.length;return this.offsetInInputWithInjectionsToOutputPosition(n,t)}offsetInInputWithInjectionsToOutputPosition(e,t=2){let n=0,i=this.breakOffsets.length-1,o=0,s=0;for(;n<=i;){o=n+(i-n)/2|0;let l=this.breakOffsets[o];if(s=o>0?this.breakOffsets[o-1]:0,t===0)if(e<=s)i=o-1;else if(e>l)n=o+1;else break;else if(e<s)i=o-1;else if(e>=l)n=o+1;else break}let a=e-s;return o>0&&(a+=this.wrappedTextIndentLength),new pf(o,a)}normalizeOutputPosition(e,t,n){if(this.injectionOffsets!==null){let i=this.outputPositionToOffsetInInputWithInjections(e,t),o=this.normalizeOffsetInInputWithInjectionsAroundInjections(i,n);if(o!==i)return this.offsetInInputWithInjectionsToOutputPosition(o,n)}if(n===0){if(e>0&&t===this.getMinOutputOffset(e))return new pf(e-1,this.getMaxOutputOffset(e-1))}else if(n===1){let i=this.getOutputLineCount()-1;if(e<i&&t===this.getMaxOutputOffset(e))return new pf(e+1,this.getMinOutputOffset(e+1))}return new pf(e,t)}outputPositionToOffsetInInputWithInjections(e,t){return e>0&&(t=Math.max(0,t-this.wrappedTextIndentLength)),(e>0?this.breakOffsets[e-1]:0)+t}normalizeOffsetInInputWithInjectionsAroundInjections(e,t){let n=this.getInjectedTextAtOffset(e);if(!n)return e;if(t===2){if(e===n.offsetInInputWithInjections+n.length&&Xz(this.injectionOptions[n.injectedTextIndex].cursorStops))return n.offsetInInputWithInjections+n.length;{let i=n.offsetInInputWithInjections;if(Qz(this.injectionOptions[n.injectedTextIndex].cursorStops))return i;let o=n.injectedTextIndex-1;for(;o>=0&&this.injectionOffsets[o]===this.injectionOffsets[n.injectedTextIndex]&&!(Xz(this.injectionOptions[o].cursorStops)||(i-=this.injectionOptions[o].content.length,Qz(this.injectionOptions[o].cursorStops)));)o--;return i}}else if(t===1||t===4){let i=n.offsetInInputWithInjections+n.length,o=n.injectedTextIndex;for(;o+1<this.injectionOffsets.length&&this.injectionOffsets[o+1]===this.injectionOffsets[o];)i+=this.injectionOptions[o+1].content.length,o++;return i}else if(t===0||t===3){let i=n.offsetInInputWithInjections,o=n.injectedTextIndex;for(;o-1>=0&&this.injectionOffsets[o-1]===this.injectionOffsets[o];)i-=this.injectionOptions[o-1].content.length,o--;return i}Gp(t)}getInjectedText(e,t){let n=this.outputPositionToOffsetInInputWithInjections(e,t),i=this.getInjectedTextAtOffset(n);return i?{options:this.injectionOptions[i.injectedTextIndex]}:null}getInjectedTextAtOffset(e){let t=this.injectionOffsets,n=this.injectionOptions;if(t!==null){let i=0;for(let o=0;o<t.length;o++){let s=n[o].content.length,a=t[o]+i,l=t[o]+i+s;if(a>e)break;if(e<=l)return{injectedTextIndex:o,offsetInInputWithInjections:a,length:s};i+=s}}}};function Xz(r){return r==null?!0:r===1||r===0}function Qz(r){return r==null?!0:r===2||r===0}var pf=class{outputLineIndex;outputOffset;constructor(e,t){this.outputLineIndex=e,this.outputOffset=t}toString(){return`${this.outputLineIndex}:${this.outputOffset}`}toPosition(e){return new F(e+this.outputLineIndex,this.outputOffset+1)}};function jq(r,e,t){let n=0;for(let o=0;o<r.length;o++)r.charAt(o)==="	"?n=jt.nextIndentTabStop(n,e):n++;let i="";if(!t){let o=Math.floor(n/e);n=n%e;for(let s=0;s<o;s++)i+="	"}for(let o=0;o<n;o++)i+=" ";return i}function MT(r,e,t){let n=kn(r);return n===-1&&(n=r.length),jq(r.substring(0,n),e,t)+r.substring(n)}var $q=()=>!0,qq=()=>!1,Yq=r=>r===" "||r==="	",bc=class{constructor(e,t,n,i){this.languageConfigurationService=i;this._languageId=e;let o=n.options,s=o.get(147),a=o.get(51);this.readOnly=o.get(93),this.tabSize=t.tabSize,this.indentSize=t.indentSize,this.insertSpaces=t.insertSpaces,this.stickyTabStops=o.get(118),this.lineHeight=a.lineHeight,this.typicalHalfwidthCharacterWidth=a.typicalHalfwidthCharacterWidth,this.pageSize=Math.max(1,Math.floor(s.height/this.lineHeight)-2),this.useTabStops=o.get(130),this.wordSeparators=o.get(133),this.emptySelectionClipboard=o.get(38),this.copyWithSyntaxHighlighting=o.get(25),this.multiCursorMergeOverlapping=o.get(78),this.multiCursorPaste=o.get(80),this.multiCursorLimit=o.get(81),this.autoClosingBrackets=o.get(6),this.autoClosingComments=o.get(7),this.autoClosingQuotes=o.get(11),this.autoClosingDelete=o.get(9),this.autoClosingOvertype=o.get(10),this.autoSurround=o.get(14),this.autoIndent=o.get(12),this.wordSegmenterLocales=o.get(132),this.surroundingPairs={},this._electricChars=null,this.shouldAutoCloseBefore={quote:this._getShouldAutoClose(e,this.autoClosingQuotes,!0),comment:this._getShouldAutoClose(e,this.autoClosingComments,!1),bracket:this._getShouldAutoClose(e,this.autoClosingBrackets,!1)},this.autoClosingPairs=this.languageConfigurationService.getLanguageConfiguration(e).getAutoClosingPairs();let l=this.languageConfigurationService.getLanguageConfiguration(e).getSurroundingPairs();if(l)for(let c of l)this.surroundingPairs[c.open]=c.close;let d=this.languageConfigurationService.getLanguageConfiguration(e).comments;this.blockCommentStartToken=d?.blockCommentStartToken??null}_cursorMoveConfigurationBrand=void 0;readOnly;tabSize;indentSize;insertSpaces;stickyTabStops;pageSize;lineHeight;typicalHalfwidthCharacterWidth;useTabStops;wordSeparators;emptySelectionClipboard;copyWithSyntaxHighlighting;multiCursorMergeOverlapping;multiCursorPaste;multiCursorLimit;autoClosingBrackets;autoClosingComments;autoClosingQuotes;autoClosingDelete;autoClosingOvertype;autoSurround;autoIndent;autoClosingPairs;surroundingPairs;blockCommentStartToken;shouldAutoCloseBefore;wordSegmenterLocales;_languageId;_electricChars;static shouldRecreate(e){return e.hasChanged(147)||e.hasChanged(133)||e.hasChanged(38)||e.hasChanged(78)||e.hasChanged(80)||e.hasChanged(81)||e.hasChanged(6)||e.hasChanged(7)||e.hasChanged(11)||e.hasChanged(9)||e.hasChanged(10)||e.hasChanged(14)||e.hasChanged(130)||e.hasChanged(51)||e.hasChanged(93)||e.hasChanged(132)}get electricChars(){if(!this._electricChars){this._electricChars={};let e=this.languageConfigurationService.getLanguageConfiguration(this._languageId).electricCharacter?.getElectricCharacters();if(e)for(let t of e)this._electricChars[t]=!0}return this._electricChars}onElectricCharacter(e,t,n){let i=ed(t,n-1),o=this.languageConfigurationService.getLanguageConfiguration(i.languageId).electricCharacter;return o?o.onElectricCharacter(e,i,n-i.firstCharOffset):null}normalizeIndentation(e){return MT(e,this.indentSize,this.insertSpaces)}_getShouldAutoClose(e,t,n){switch(t){case"beforeWhitespace":return Yq;case"languageDefined":return this._getLanguageDefinedShouldAutoClose(e,n);case"always":return $q;case"never":return qq}}_getLanguageDefinedShouldAutoClose(e,t){let n=this.languageConfigurationService.getLanguageConfiguration(e).getAutoCloseBeforeSet(t);return i=>n.indexOf(i)!==-1}visibleColumnFromColumn(e,t){return jt.visibleColumnFromColumn(e.getLineContent(t.lineNumber),t.column,this.tabSize)}columnFromVisibleColumn(e,t,n){let i=jt.columnFromVisibleColumn(e.getLineContent(t),n,this.tabSize),o=e.getLineMinColumn(t);if(i<o)return o;let s=e.getLineMaxColumn(t);return i>s?s:i}},nt=class r{_cursorStateBrand=void 0;static fromModelState(e){return new cP(e)}static fromViewState(e){return new uP(e)}static fromModelSelection(e){let t=ze.liftSelection(e),n=new ni(D.fromPositions(t.getSelectionStart()),0,0,t.getPosition(),0);return r.fromModelState(n)}static fromModelSelections(e){let t=[];for(let n=0,i=e.length;n<i;n++)t[n]=this.fromModelSelection(e[n]);return t}modelState;viewState;constructor(e,t){this.modelState=e,this.viewState=t}equals(e){return this.viewState.equals(e.viewState)&&this.modelState.equals(e.modelState)}},cP=class{modelState;viewState;constructor(e){this.modelState=e,this.viewState=null}},uP=class{modelState;viewState;constructor(e){this.modelState=null,this.viewState=e}};var ni=class r{constructor(e,t,n,i,o){this.selectionStart=e;this.selectionStartKind=t;this.selectionStartLeftoverVisibleColumns=n;this.position=i;this.leftoverVisibleColumns=o;this.selection=r._computeSelection(this.selectionStart,this.position)}_singleCursorStateBrand=void 0;selection;equals(e){return this.selectionStartLeftoverVisibleColumns===e.selectionStartLeftoverVisibleColumns&&this.leftoverVisibleColumns===e.leftoverVisibleColumns&&this.selectionStartKind===e.selectionStartKind&&this.position.equals(e.position)&&this.selectionStart.equalsRange(e.selectionStart)}hasSelection(){return!this.selection.isEmpty()||!this.selectionStart.isEmpty()}move(e,t,n,i){return e?new r(this.selectionStart,this.selectionStartKind,this.selectionStartLeftoverVisibleColumns,new F(t,n),i):new r(new D(t,n,t,n),0,i,new F(t,n),i)}static _computeSelection(e,t){return e.isEmpty()||!t.isBeforeOrEqual(e.getStartPosition())?ze.fromPositions(e.getStartPosition(),t):ze.fromPositions(e.getEndPosition(),t)}},Si=class{_editOperationResultBrand=void 0;type;commands;shouldPushStackElementBefore;shouldPushStackElementAfter;constructor(e,t,n){this.type=e,this.commands=t,this.shouldPushStackElementBefore=n.shouldPushStackElementBefore,this.shouldPushStackElementAfter=n.shouldPushStackElementAfter}};function Ya(r){return r==="'"||r==='"'||r==="`"}function Jz(r){return`--vscode-${r.replace(/\./g,"-")}`}function ne(r){return`var(${Jz(r)})`}function Nh(r,e){return`var(${Jz(r)}, ${e})`}function Xq(r){return r!==null&&typeof r=="object"&&"light"in r&&"dark"in r}var Qq={ColorContribution:"base.contributions.colors"},Zq="default",pP=class{_onDidChangeSchema=new T;onDidChangeSchema=this._onDidChangeSchema.event;colorsById;colorSchema={type:"object",properties:{}};colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]};constructor(){this.colorsById={}}notifyThemeUpdate(e){for(let t of Object.keys(this.colorsById)){let n=e.getColor(t);n&&(this.colorSchema.properties[t].oneOf[0].defaultSnippets[0].body=`\${1:${n.toString()}}`)}this._onDidChangeSchema.fire()}registerColor(e,t,n,i=!1,o){let s={id:e,description:n,defaults:t,needsTransparency:i,deprecationMessage:o};this.colorsById[e]=s;let a={type:"string",format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return o&&(a.deprecationMessage=o),i&&(a.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",a.patternErrorMessage=u("transparecyRequired","This color must be transparent or it will obscure content")),this.colorSchema.properties[e]={description:n,oneOf:[a,{type:"string",const:Zq,description:u("useDefault","Use the default color.")}]},this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}deregisterColor(e){delete this.colorsById[e],delete this.colorSchema.properties[e];let t=this.colorReferenceSchema.enum.indexOf(e);t!==-1&&(this.colorReferenceSchema.enum.splice(t,1),this.colorReferenceSchema.enumDescriptions.splice(t,1)),this._onDidChangeSchema.fire()}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){let n=this.colorsById[e];if(n?.defaults){let i=Xq(n.defaults)?n.defaults[t.type]:n.defaults;return Xa(i,t)}}getColorSchema(){return this.colorSchema}getColorReferenceSchema(){return this.colorReferenceSchema}toString(){let e=(t,n)=>{let i=t.indexOf(".")===-1?0:1,o=n.indexOf(".")===-1?0:1;return i!==o?i-o:t.localeCompare(n)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}},OT=new pP;Te.add(Qq.ColorContribution,OT);function C(r,e,t,n,i){return OT.registerColor(r,e,t,n,i)}function Jq(r,e){switch(r.op){case 0:return Xa(r.value,e)?.darken(r.factor);case 1:return Xa(r.value,e)?.lighten(r.factor);case 2:return Xa(r.value,e)?.transparent(r.factor);case 3:{let t=Xa(r.background,e);return t?Xa(r.value,e)?.makeOpaque(t):Xa(r.value,e)}case 4:for(let t of r.values){let n=Xa(t,e);if(n)return n}return;case 6:return Xa(e.defines(r.if)?r.then:r.else,e);case 5:{let t=Xa(r.value,e);if(!t)return;let n=Xa(r.background,e);return n?t.isDarkerThan(n)?H.getLighterColor(t,n,r.factor).transparent(r.transparency):H.getDarkerColor(t,n,r.factor).transparent(r.transparency):t.transparent(r.factor*r.transparency)}default:throw Gp(r)}}function Zo(r,e){return{op:0,value:r,factor:e}}function Ir(r,e){return{op:1,value:r,factor:e}}function ve(r,e){return{op:2,value:r,factor:e}}function hP(...r){return{op:4,values:r}}function e4(r,e,t){return{op:6,if:r,then:e,else:t}}function gP(r,e,t,n){return{op:5,value:r,background:e,factor:t,transparency:n}}function Xa(r,e){if(r!==null){if(typeof r=="string")return r[0]==="#"?H.fromHex(r):e.getColor(r);if(r instanceof H)return r;if(typeof r=="object")return Jq(r,e)}}var t4="vscode://schemas/workbench-colors",n4=Te.as(Js.JSONContribution);n4.registerSchema(t4,OT.getColorSchema());var Zz=new Hn(()=>n4.notifySchemaChanged(t4),200);OT.onDidChangeSchema(()=>{Zz.isScheduled()||Zz.schedule()});var Ve=C("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},u("foreground","Overall foreground color. This color is only used if not overridden by a component.")),Xxe=C("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},u("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component.")),mP=C("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},u("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),Qxe=C("descriptionForeground",{light:"#717171",dark:ve(Ve,.7),hcDark:ve(Ve,.7),hcLight:ve(Ve,.7)},u("descriptionForeground","Foreground color for description text providing additional information, for example for a label.")),SI=C("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},u("iconForeground","The default color for icons in the workbench.")),Fi=C("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},u("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),Ie=C("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},u("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),Wt=C("contrastActiveBorder",{light:null,dark:null,hcDark:Fi,hcLight:Fi},u("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),i4=C("selection.background",null,u("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor.")),PT=C("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},u("textLinkForeground","Foreground color for links in text.")),Zxe=C("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},u("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),Jxe=C("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:H.black,hcLight:"#292929"},u("textSeparatorForeground","Color for text separators.")),eEe=C("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},u("textPreformatForeground","Foreground color for preformatted text segments.")),tEe=C("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},u("textPreformatBackground","Background color for preformatted text segments.")),nEe=C("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},u("textBlockQuoteBackground","Background color for block quotes in text.")),iEe=C("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:H.white,hcLight:"#292929"},u("textBlockQuoteBorder","Border color for block quotes in text.")),oEe=C("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:H.black,hcLight:"#F2F2F2"},u("textCodeBlockBackground","Background color for code blocks in text."));var dEe=C("sash.hoverBorder",Fi,u("sashActiveBorder","Border color of active sashes.")),sa=C("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:H.black,hcLight:"#0F4A85"},u("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),Gu=C("badge.foreground",{dark:H.white,light:"#333",hcDark:H.white,hcLight:H.white},u("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),ju=C("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},u("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),AT=C("scrollbarSlider.background",{dark:H.fromHex("#797979").transparent(.4),light:H.fromHex("#646464").transparent(.4),hcDark:ve(Ie,.6),hcLight:ve(Ie,.4)},u("scrollbarSliderBackground","Scrollbar slider background color.")),NT=C("scrollbarSlider.hoverBackground",{dark:H.fromHex("#646464").transparent(.7),light:H.fromHex("#646464").transparent(.7),hcDark:ve(Ie,.8),hcLight:ve(Ie,.8)},u("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),FT=C("scrollbarSlider.activeBackground",{dark:H.fromHex("#BFBFBF").transparent(.4),light:H.fromHex("#000000").transparent(.6),hcDark:Ie,hcLight:Ie},u("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),o4=C("progressBar.background",{dark:H.fromHex("#0E70C0"),light:H.fromHex("#0E70C0"),hcDark:Ie,hcLight:Ie},u("progressBarBackground","Background color of the progress bar that can show for long running operations."));var $t=C("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:H.black,hcLight:H.white},u("editorBackground","Editor background color.")),Sr=C("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:H.white,hcLight:Ve},u("editorForeground","Editor default foreground color.")),mEe=C("editorStickyScroll.background",$t,u("editorStickyScrollBackground","Background color of sticky scroll in the editor")),fEe=C("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:H.fromHex("#0F4A85").transparent(.1)},u("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor")),bEe=C("editorStickyScroll.border",{dark:null,light:null,hcDark:Ie,hcLight:Ie},u("editorStickyScrollBorder","Border color of sticky scroll in the editor")),vEe=C("editorStickyScroll.shadow",ju,u("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor")),ui=C("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:H.white},u("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),aa=C("editorWidget.foreground",Ve,u("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),Fh=C("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:Ie,hcLight:Ie},u("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),yEe=C("editorWidget.resizeBorder",null,u("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),IEe=C("editorError.background",null,u("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Bh=C("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},u("editorError.foreground","Foreground color of error squigglies in the editor.")),SEe=C("editorError.border",{dark:null,light:null,hcDark:H.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},u("errorBorder","If set, color of double underlines for errors in the editor.")),u4=C("editorWarning.background",null,u("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Cr=C("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},u("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),mf=C("editorWarning.border",{dark:null,light:null,hcDark:H.fromHex("#FFCC00").transparent(.8),hcLight:H.fromHex("#FFCC00").transparent(.8)},u("warningBorder","If set, color of double underlines for warnings in the editor.")),CEe=C("editorInfo.background",null,u("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),ps=C("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},u("editorInfo.foreground","Foreground color of info squigglies in the editor.")),ff=C("editorInfo.border",{dark:null,light:null,hcDark:H.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},u("infoBorder","If set, color of double underlines for infos in the editor.")),p4=C("editorHint.foreground",{dark:H.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},u("editorHint.foreground","Foreground color of hint squigglies in the editor.")),xEe=C("editorHint.border",{dark:null,light:null,hcDark:H.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},u("hintBorder","If set, color of double underlines for hints in the editor.")),EEe=C("editorLink.activeForeground",{dark:"#4E94CE",light:H.blue,hcDark:H.cyan,hcLight:"#292929"},u("activeLinkForeground","Color of active links.")),$u=C("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},u("editorSelectionBackground","Color of the editor selection.")),h4=C("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:H.white},u("editorSelectionForeground","Color of the selected text for high contrast.")),TEe=C("editor.inactiveSelectionBackground",{light:ve($u,.5),dark:ve($u,.5),hcDark:ve($u,.7),hcLight:ve($u,.5)},u("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),wEe=C("editor.selectionHighlightBackground",{light:gP($u,$t,.3,.6),dark:gP($u,$t,.3,.6),hcDark:null,hcLight:null},u("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),_Ee=C("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:Wt,hcLight:Wt},u("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),DEe=C("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},u("editorFindMatch","Color of the current search match.")),LEe=C("editor.findMatchForeground",null,u("editorFindMatchForeground","Text color of the current search match.")),Qa=C("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},u("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),kEe=C("editor.findMatchHighlightForeground",null,u("findMatchHighlightForeground","Foreground color of the other search matches."),!0),REe=C("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},u("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),MEe=C("editor.findMatchBorder",{light:null,dark:null,hcDark:Wt,hcLight:Wt},u("editorFindMatchBorder","Border color of the current search match.")),qu=C("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:Wt,hcLight:Wt},u("findMatchHighlightBorder","Border color of the other search matches.")),OEe=C("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:ve(Wt,.4),hcLight:ve(Wt,.4)},u("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),PEe=C("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},u("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),r4=C("editorHoverWidget.background",ui,u("hoverBackground","Background color of the editor hover.")),AEe=C("editorHoverWidget.foreground",aa,u("hoverForeground","Foreground color of the editor hover.")),NEe=C("editorHoverWidget.border",Fh,u("hoverBorder","Border color of the editor hover.")),FEe=C("editorHoverWidget.statusBarBackground",{dark:Ir(r4,.2),light:Zo(r4,.05),hcDark:ui,hcLight:ui},u("statusBarBackground","Background color of the editor hover status bar.")),g4=C("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:H.white,hcLight:H.black},u("editorInlayHintForeground","Foreground color of inline hints")),m4=C("editorInlayHint.background",{dark:ve(sa,.1),light:ve(sa,.1),hcDark:ve(H.white,.1),hcLight:ve(sa,.1)},u("editorInlayHintBackground","Background color of inline hints")),BEe=C("editorInlayHint.typeForeground",g4,u("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),WEe=C("editorInlayHint.typeBackground",m4,u("editorInlayHintBackgroundTypes","Background color of inline hints for types")),VEe=C("editorInlayHint.parameterForeground",g4,u("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),HEe=C("editorInlayHint.parameterBackground",m4,u("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),eY=C("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},u("editorLightBulbForeground","The color used for the lightbulb actions icon.")),UEe=C("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},u("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),zEe=C("editorLightBulbAi.foreground",eY,u("editorLightBulbAiForeground","The color used for the lightbulb AI icon.")),KEe=C("editor.snippetTabstopHighlightBackground",{dark:new H(new et(124,124,124,.3)),light:new H(new et(10,50,100,.2)),hcDark:new H(new et(124,124,124,.3)),hcLight:new H(new et(10,50,100,.2))},u("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop.")),GEe=C("editor.snippetTabstopHighlightBorder",null,u("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop.")),jEe=C("editor.snippetFinalTabstopHighlightBackground",null,u("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet.")),$Ee=C("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new H(new et(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},u("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet.")),s4=new H(new et(155,185,85,.2)),a4=new H(new et(255,0,0,.2)),qEe=C("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},u("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),YEe=C("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},u("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),XEe=C("diffEditor.insertedLineBackground",{dark:s4,light:s4,hcDark:null,hcLight:null},u("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),QEe=C("diffEditor.removedLineBackground",{dark:a4,light:a4,hcDark:null,hcLight:null},u("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),ZEe=C("diffEditorGutter.insertedLineBackground",null,u("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted.")),JEe=C("diffEditorGutter.removedLineBackground",null,u("diffEditorRemovedLineGutter","Background color for the margin where lines got removed.")),eTe=C("diffEditorOverview.insertedForeground",null,u("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),tTe=C("diffEditorOverview.removedForeground",null,u("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content.")),nTe=C("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},u("diffEditorInsertedOutline","Outline color for the text that got inserted.")),iTe=C("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},u("diffEditorRemovedOutline","Outline color for text that got removed.")),oTe=C("diffEditor.border",{dark:null,light:null,hcDark:Ie,hcLight:Ie},u("diffEditorBorder","Border color between the two text editors.")),rTe=C("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},u("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),sTe=C("diffEditor.unchangedRegionBackground","sideBar.background",u("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor.")),aTe=C("diffEditor.unchangedRegionForeground","foreground",u("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor.")),lTe=C("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},u("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor.")),Yu=C("widget.shadow",{dark:ve(H.black,.36),light:ve(H.black,.16),hcDark:null,hcLight:null},u("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),xI=C("widget.border",{dark:null,light:null,hcDark:Ie,hcLight:Ie},u("widgetBorder","Border color of widgets such as find/replace inside the editor.")),CI=C("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},u("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse")),dTe=C("toolbar.hoverOutline",{dark:null,light:null,hcDark:Wt,hcLight:Wt},u("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse")),cTe=C("toolbar.activeBackground",{dark:Ir(CI,.1),light:Zo(CI,.1),hcDark:null,hcLight:null},u("toolbarActiveBackground","Toolbar background when holding the mouse over actions")),f4=C("breadcrumb.foreground",ve(Ve,.8),u("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),b4=C("breadcrumb.background",$t,u("breadcrumbsBackground","Background color of breadcrumb items.")),yP=C("breadcrumb.focusForeground",{light:Zo(Ve,.2),dark:Ir(Ve,.1),hcDark:Ir(Ve,.1),hcLight:Ir(Ve,.1)},u("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),v4=C("breadcrumb.activeSelectionForeground",{light:Zo(Ve,.2),dark:Ir(Ve,.1),hcDark:Ir(Ve,.1),hcLight:Ir(Ve,.1)},u("breadcrumbsSelectedForeground","Color of selected breadcrumb items.")),uTe=C("breadcrumbPicker.background",ui,u("breadcrumbsSelectedBackground","Background color of breadcrumb item picker.")),y4=.5,l4=H.fromHex("#40C8AE").transparent(y4),d4=H.fromHex("#40A6FF").transparent(y4),c4=H.fromHex("#606060").transparent(.4),IP=.4,hf=1,fP=C("merge.currentHeaderBackground",{dark:l4,light:l4,hcDark:null,hcLight:null},u("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),pTe=C("merge.currentContentBackground",ve(fP,IP),u("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),bP=C("merge.incomingHeaderBackground",{dark:d4,light:d4,hcDark:null,hcLight:null},u("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),hTe=C("merge.incomingContentBackground",ve(bP,IP),u("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),vP=C("merge.commonHeaderBackground",{dark:c4,light:c4,hcDark:null,hcLight:null},u("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),gTe=C("merge.commonContentBackground",ve(vP,IP),u("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),gf=C("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},u("mergeBorder","Border color on headers and the splitter in inline merge-conflicts.")),mTe=C("editorOverviewRuler.currentContentForeground",{dark:ve(fP,hf),light:ve(fP,hf),hcDark:gf,hcLight:gf},u("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts.")),fTe=C("editorOverviewRuler.incomingContentForeground",{dark:ve(bP,hf),light:ve(bP,hf),hcDark:gf,hcLight:gf},u("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts.")),bTe=C("editorOverviewRuler.commonContentForeground",{dark:ve(vP,hf),light:ve(vP,hf),hcDark:gf,hcLight:gf},u("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts.")),vTe=C("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:"#AB5A00"},u("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),yTe=C("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",u("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),I4=C("problemsErrorIcon.foreground",Bh,u("problemsErrorIconForeground","The color used for the problems error icon.")),S4=C("problemsWarningIcon.foreground",Cr,u("problemsWarningIconForeground","The color used for the problems warning icon.")),C4=C("problemsInfoIcon.foreground",ps,u("problemsInfoIconForeground","The color used for the problems info icon."));var x4=C("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},u("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),TTe=C("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},u("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),SP=C("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},u("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),wTe=C("minimap.infoHighlight",{dark:ps,light:ps,hcDark:ff,hcLight:ff},u("minimapInfo","Minimap marker color for infos.")),_Te=C("minimap.warningHighlight",{dark:Cr,light:Cr,hcDark:mf,hcLight:mf},u("overviewRuleWarning","Minimap marker color for warnings.")),DTe=C("minimap.errorHighlight",{dark:new H(new et(255,18,18,.7)),light:new H(new et(255,18,18,.7)),hcDark:new H(new et(255,50,50,1)),hcLight:"#B5200D"},u("minimapError","Minimap marker color for errors.")),E4=C("minimap.background",null,u("minimapBackground","Minimap background color.")),T4=C("minimap.foregroundOpacity",H.fromHex("#000f"),u("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),LTe=C("minimapSlider.background",ve(AT,.5),u("minimapSliderBackground","Minimap slider background color.")),kTe=C("minimapSlider.hoverBackground",ve(NT,.5),u("minimapSliderHoverBackground","Minimap slider background color when hovering.")),RTe=C("minimapSlider.activeBackground",ve(FT,.5),u("minimapSliderActiveBackground","Minimap slider background color when clicked on."));var FTe=C("charts.foreground",Ve,u("chartsForeground","The foreground color used in charts.")),BTe=C("charts.lines",ve(Ve,.5),u("chartsLines","The color used for horizontal lines in charts.")),WTe=C("charts.red",Bh,u("chartsRed","The red color used in chart visualizations.")),VTe=C("charts.blue",ps,u("chartsBlue","The blue color used in chart visualizations.")),HTe=C("charts.yellow",Cr,u("chartsYellow","The yellow color used in chart visualizations.")),UTe=C("charts.orange",x4,u("chartsOrange","The orange color used in chart visualizations.")),zTe=C("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},u("chartsGreen","The green color used in chart visualizations.")),KTe=C("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},u("chartsPurple","The purple color used in chart visualizations."));var vc=C("input.background",{dark:"#3C3C3C",light:H.white,hcDark:H.black,hcLight:H.white},u("inputBoxBackground","Input box background.")),td=C("input.foreground",Ve,u("inputBoxForeground","Input box foreground.")),Za=C("input.border",{dark:null,light:null,hcDark:Ie,hcLight:Ie},u("inputBoxBorder","Input box border.")),CP=C("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:Ie,hcLight:Ie},u("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),tY=C("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},u("inputOption.hoverBackground","Background color of activated options in input fields.")),xP=C("inputOption.activeBackground",{dark:ve(Fi,.4),light:ve(Fi,.2),hcDark:H.transparent,hcLight:H.transparent},u("inputOption.activeBackground","Background hover color of options in input fields.")),EP=C("inputOption.activeForeground",{dark:H.white,light:H.black,hcDark:Ve,hcLight:Ve},u("inputOption.activeForeground","Foreground color of activated options in input fields.")),w4=C("input.placeholderForeground",{light:ve(Ve,.5),dark:ve(Ve,.5),hcDark:ve(Ve,.7),hcLight:ve(Ve,.7)},u("inputPlaceholderForeground","Input box foreground color for placeholder text.")),_4=C("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:H.black,hcLight:H.white},u("inputValidationInfoBackground","Input validation background color for information severity.")),D4=C("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:Ve},u("inputValidationInfoForeground","Input validation foreground color for information severity.")),L4=C("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:Ie,hcLight:Ie},u("inputValidationInfoBorder","Input validation border color for information severity.")),k4=C("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:H.black,hcLight:H.white},u("inputValidationWarningBackground","Input validation background color for warning severity.")),R4=C("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:Ve},u("inputValidationWarningForeground","Input validation foreground color for warning severity.")),M4=C("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:Ie,hcLight:Ie},u("inputValidationWarningBorder","Input validation border color for warning severity.")),O4=C("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:H.black,hcLight:H.white},u("inputValidationErrorBackground","Input validation background color for error severity.")),P4=C("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:Ve},u("inputValidationErrorForeground","Input validation foreground color for error severity.")),A4=C("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:Ie,hcLight:Ie},u("inputValidationErrorBorder","Input validation border color for error severity.")),Qu=C("dropdown.background",{dark:"#3C3C3C",light:H.white,hcDark:H.black,hcLight:H.white},u("dropdownBackground","Dropdown background.")),N4=C("dropdown.listBackground",{dark:null,light:null,hcDark:H.black,hcLight:H.white},u("dropdownListBackground","Dropdown list background.")),Wh=C("dropdown.foreground",{dark:"#F0F0F0",light:Ve,hcDark:H.white,hcLight:Ve},u("dropdownForeground","Dropdown foreground.")),Vh=C("dropdown.border",{dark:Qu,light:"#CECECE",hcDark:Ie,hcLight:Ie},u("dropdownBorder","Dropdown border.")),EI=C("button.foreground",H.white,u("buttonForeground","Button foreground color.")),F4=C("button.separator",ve(EI,.4),u("buttonSeparator","Button separator color.")),Xu=C("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},u("buttonBackground","Button background color.")),B4=C("button.hoverBackground",{dark:Ir(Xu,.2),light:Zo(Xu,.2),hcDark:Xu,hcLight:Xu},u("buttonHoverBackground","Button background color when hovering.")),W4=C("button.border",Ie,u("buttonBorder","Button border color.")),V4=C("button.secondaryForeground",{dark:H.white,light:H.white,hcDark:H.white,hcLight:Ve},u("buttonSecondaryForeground","Secondary button foreground color.")),BT=C("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:H.white},u("buttonSecondaryBackground","Secondary button background color.")),H4=C("button.secondaryHoverBackground",{dark:Ir(BT,.2),light:Zo(BT,.2),hcDark:null,hcLight:null},u("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),bf=C("radio.activeForeground",EP,u("radioActiveForeground","Foreground color of active radio option.")),U4=C("radio.activeBackground",xP,u("radioBackground","Background color of active radio option.")),z4=C("radio.activeBorder",CP,u("radioActiveBorder","Border color of the active radio option.")),K4=C("radio.inactiveForeground",null,u("radioInactiveForeground","Foreground color of inactive radio option.")),G4=C("radio.inactiveBackground",null,u("radioInactiveBackground","Background color of inactive radio option.")),j4=C("radio.inactiveBorder",{light:ve(bf,.2),dark:ve(bf,.2),hcDark:ve(bf,.4),hcLight:ve(bf,.2)},u("radioInactiveBorder","Border color of the inactive radio option.")),$4=C("radio.inactiveHoverBackground",tY,u("radioHoverBackground","Background color of inactive active radio option when hovering.")),WT=C("checkbox.background",Qu,u("checkbox.background","Background color of checkbox widget.")),XTe=C("checkbox.selectBackground",ui,u("checkbox.select.background","Background color of checkbox widget when the element it's in is selected.")),VT=C("checkbox.foreground",Wh,u("checkbox.foreground","Foreground color of checkbox widget.")),HT=C("checkbox.border",Vh,u("checkbox.border","Border color of checkbox widget.")),QTe=C("checkbox.selectBorder",SI,u("checkbox.select.border","Border color of checkbox widget when the element it's in is selected.")),q4=C("keybindingLabel.background",{dark:new H(new et(128,128,128,.17)),light:new H(new et(221,221,221,.4)),hcDark:H.transparent,hcLight:H.transparent},u("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),Y4=C("keybindingLabel.foreground",{dark:H.fromHex("#CCCCCC"),light:H.fromHex("#555555"),hcDark:H.white,hcLight:Ve},u("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),X4=C("keybindingLabel.border",{dark:new H(new et(51,51,51,.6)),light:new H(new et(204,204,204,.4)),hcDark:new H(new et(111,195,223)),hcLight:Ie},u("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),Q4=C("keybindingLabel.bottomBorder",{dark:new H(new et(68,68,68,.6)),light:new H(new et(187,187,187,.4)),hcDark:new H(new et(111,195,223)),hcLight:Ve},u("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut."));var UT=C("list.focusBackground",null,u("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),zT=C("list.focusForeground",null,u("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Z4=C("list.focusOutline",{dark:Fi,light:Fi,hcDark:Wt,hcLight:Wt},u("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),J4=C("list.focusAndSelectionOutline",null,u("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),Jo=C("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:H.fromHex("#0F4A85").transparent(.1)},u("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),la=C("list.activeSelectionForeground",{dark:H.white,light:H.white,hcDark:null,hcLight:null},u("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),KT=C("list.activeSelectionIconForeground",null,u("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),GT=C("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:H.fromHex("#0F4A85").transparent(.1)},u("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),jT=C("list.inactiveSelectionForeground",null,u("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),e5=C("list.inactiveSelectionIconForeground",null,u("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),t5=C("list.inactiveFocusBackground",null,u("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),n5=C("list.inactiveFocusOutline",null,u("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),nd=C("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:H.white.transparent(.1),hcLight:H.fromHex("#0F4A85").transparent(.1)},u("listHoverBackground","List/Tree background when hovering over items using the mouse.")),TI=C("list.hoverForeground",null,u("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),i5=C("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},u("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),o5=C("list.dropBetweenBackground",{dark:SI,light:SI,hcDark:null,hcLight:null},u("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),vf=C("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:Fi,hcLight:Fi},u("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),r5=C("list.focusHighlightForeground",{dark:vf,light:e4(Jo,vf,"#BBE7FF"),hcDark:vf,hcLight:vf},u("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree.")),iwe=C("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},u("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer.")),owe=C("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},u("listErrorForeground","Foreground color of list items containing errors.")),rwe=C("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},u("listWarningForeground","Foreground color of list items containing warnings.")),s5=C("listFilterWidget.background",{light:Zo(ui,0),dark:Ir(ui,0),hcDark:ui,hcLight:ui},u("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),a5=C("listFilterWidget.outline",{dark:H.transparent,light:H.transparent,hcDark:"#f38518",hcLight:"#007ACC"},u("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),l5=C("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:Ie,hcLight:Ie},u("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),d5=C("listFilterWidget.shadow",Yu,u("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees.")),swe=C("list.filterMatchBackground",{dark:Qa,light:Qa,hcDark:null,hcLight:null},u("listFilterMatchHighlight","Background color of the filtered match.")),awe=C("list.filterMatchBorder",{dark:qu,light:qu,hcDark:Ie,hcLight:Wt},u("listFilterMatchHighlightBorder","Border color of the filtered match.")),lwe=C("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},u("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized.")),yf=C("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},u("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),c5=C("tree.inactiveIndentGuidesStroke",ve(yf,.4),u("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),u5=C("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},u("tableColumnsBorder","Table border color between columns.")),wI=C("tree.tableOddRowsBackground",{dark:ve(Ve,.04),light:ve(Ve,.04),hcDark:null,hcLight:null},u("tableOddRowsBackgroundColor","Background color for odd table rows.")),dwe=C("editorActionList.background",ui,u("editorActionListBackground","Action List background color.")),cwe=C("editorActionList.foreground",aa,u("editorActionListForeground","Action List foreground color.")),uwe=C("editorActionList.focusForeground",la,u("editorActionListFocusForeground","Action List foreground color for the focused item.")),pwe=C("editorActionList.focusBackground",Jo,u("editorActionListFocusBackground","Action List background color for the focused item."));var p5=C("menu.border",{dark:null,light:null,hcDark:Ie,hcLight:Ie},u("menuBorder","Border color of menus.")),h5=C("menu.foreground",Wh,u("menuForeground","Foreground color of menu items.")),g5=C("menu.background",Qu,u("menuBackground","Background color of menu items.")),m5=C("menu.selectionForeground",la,u("menuSelectionForeground","Foreground color of the selected menu item in menus.")),f5=C("menu.selectionBackground",Jo,u("menuSelectionBackground","Background color of the selected menu item in menus.")),b5=C("menu.selectionBorder",{dark:null,light:null,hcDark:Wt,hcLight:Wt},u("menuSelectionBorder","Border color of the selected menu item in menus.")),v5=C("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:Ie,hcLight:Ie},u("menuSeparatorBackground","Color of a separator menu item in menus."));var xwe=C("quickInput.background",ui,u("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),Ewe=C("quickInput.foreground",aa,u("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),Twe=C("quickInputTitle.background",{dark:new H(new et(255,255,255,.105)),light:new H(new et(0,0,0,.06)),hcDark:"#000000",hcLight:H.white},u("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),I5=C("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:H.white,hcLight:"#0F4A85"},u("pickerGroupForeground","Quick picker color for grouping labels.")),wwe=C("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:H.white,hcLight:"#0F4A85"},u("pickerGroupBorder","Quick picker color for grouping borders.")),y5=C("quickInput.list.focusBackground",null,"",void 0,u("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),$T=C("quickInputList.focusForeground",la,u("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),qT=C("quickInputList.focusIconForeground",KT,u("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),YT=C("quickInputList.focusBackground",{dark:hP(y5,Jo),light:hP(y5,Jo),hcDark:null,hcLight:null},u("quickInput.listFocusBackground","Quick picker background color for the focused item."));var Rwe=C("search.resultsInfoForeground",{light:Ve,dark:ve(Ve,.65),hcDark:Ve,hcLight:Ve},u("search.resultsInfoForeground","Color of the text in the search viewlet's completion message.")),Mwe=C("searchEditor.findMatchBackground",{light:ve(Qa,.66),dark:ve(Qa,.66),hcDark:Qa,hcLight:Qa},u("searchEditor.queryMatch","Color of the Search Editor query matches.")),Owe=C("searchEditor.findMatchBorder",{light:ve(qu,.66),dark:ve(qu,.66),hcDark:qu,hcLight:qu},u("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));var nY={IconContribution:"base.contributions.icons"},iY;(e=>{function r(t,n){let i=t.defaults;for(;Ae.isThemeIcon(i);){let o=If.getIcon(i.id);if(!o)return;i=o.defaults}return i}e.getDefinition=r})(iY||={});var oY;(t=>{function r(n){return{weight:n.weight,style:n.style,src:n.src.map(i=>({format:i.format,location:i.location.toString()}))}}t.toJSONObject=r;function e(n){let i=o=>xt(o)?o:void 0;if(n&&Array.isArray(n.src)&&n.src.every(o=>xt(o.format)&&xt(o.location)))return{weight:i(n.weight),style:i(n.style),src:n.src.map(o=>({format:o.format,location:Z.parse(o.location)}))}}t.fromJSONObject=e})(oY||={});var TP=class{_onDidChange=new T;onDidChange=this._onDidChange.event;iconsById;iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:u("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:u("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}};iconReferenceSchema={type:"string",pattern:`^${Ae.iconNameExpression}$`,enum:[],enumDescriptions:[]};iconFontsById;constructor(){this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,i){let o=this.iconsById[e];if(o){if(n&&!o.description){o.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;let l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=n),this._onDidChange.fire()}return o}let s={id:e,description:n,defaults:t,deprecationMessage:i};this.iconsById[e]=s;let a={$ref:"#/definitions/icons"};return i&&(a.deprecationMessage=i),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}deregisterIcon(e){delete this.iconsById[e],delete this.iconSchema.properties[e];let t=this.iconReferenceSchema.enum.indexOf(e);t!==-1&&(this.iconReferenceSchema.enum.splice(t,1),this.iconReferenceSchema.enumDescriptions.splice(t,1)),this._onDidChange.fire()}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconReferenceSchema(){return this.iconReferenceSchema}registerIconFont(e,t){let n=this.iconFontsById[e];return n||(this.iconFontsById[e]=t,this._onDidChange.fire(),t)}deregisterIconFont(e){delete this.iconFontsById[e]}getIconFont(e){return this.iconFontsById[e]}toString(){let e=(o,s)=>o.id.localeCompare(s.id),t=o=>{for(;Ae.isThemeIcon(o.defaults);)o=this.iconsById[o.defaults.id];return`codicon codicon-${o?o.id:""}`},n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");let i=Object.keys(this.iconsById).map(o=>this.iconsById[o]);for(let o of i.filter(s=>!!s.description).sort(e))n.push(`|<i class="${t(o)}"></i>|${o.id}|${Ae.isThemeIcon(o.defaults)?o.defaults.id:o.id}|${o.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(let o of i.filter(s=>!Ae.isThemeIcon(s.defaults)).sort(e))n.push(`|<i class="${t(o)}"></i>|${o.id}|`);return n.join(`
`)}},If=new TP;Te.add(nY.IconContribution,If);function xn(r,e,t,n){return If.registerIcon(r,e,t,n)}function rY(){let r=bM();for(let e in r){let t="\\"+r[e].toString(16);If.registerIcon(e,{fontCharacter:t})}}rY();var C5="vscode://schemas/icons",x5=Te.as(Js.JSONContribution);x5.registerSchema(C5,If.getIconSchema());var S5=new Hn(()=>x5.notifySchemaChanged(C5),200);If.onDidChange(()=>{S5.isScheduled()||S5.schedule()});var l_e=xn("widget-close",re.close,u("widgetClose","Icon for the close action in widgets.")),d_e=xn("goto-previous-location",re.arrowUp,u("previousChangeIcon","Icon for goto previous editor location.")),c_e=xn("goto-next-location",re.arrowDown,u("nextChangeIcon","Icon for goto next editor location.")),u_e=Ae.modify(re.sync,"spin"),p_e=Ae.modify(re.loading,"spin");function id(r){return r==="hcDark"||r==="hcLight"}function wP(r){return r==="dark"||r==="hcDark"}var Ci=j("themeService");var R_e=re.file,M_e=re.folder;function _I(r){switch(r){case"dark":return"vs-dark";case"hcDark":return"hc-black";case"hcLight":return"hc-light";default:return"vs"}}var aY={ThemingContribution:"base.contributions.theming"},_P=class{themingParticipants=[];onThemingParticipantAddedEmitter;constructor(){this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new T}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),me(()=>{let t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}get onThemingParticipantAdded(){return this.onThemingParticipantAddedEmitter.event}getThemingParticipants(){return this.themingParticipants}},E5=new _P;Te.add(aY.ThemingContribution,E5);function to(r){return E5.onColorThemeChange(r)}var XT=class extends N{constructor(t){super();this.themeService=t;this.theme=t.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(n=>this.onThemeChange(n)))}theme;onThemeChange(t){this.theme=t,this.updateStyles()}updateStyles(){}getColor(t,n){let i=this.theme.getColor(t);return i&&n&&(i=n(i,this.theme)),i?i.toString():null}};var QT=class{_theme;get type(){return this._theme.type}get value(){return this._theme}constructor(e){this._theme=e}update(e){this._theme=e}getColor(e){return this._theme.getColor(e)}};var ZT=class{type=0;constructor(){}},JT=class{type=1;constructor(){}},ew=class{type=2;_source;constructor(e){this._source=e}hasChanged(e){return this._source.hasChanged(e)}},tw=class{constructor(e,t,n){this.selections=e;this.modelSelections=t;this.reason=n}type=3},od=class{type=4;affectsMinimap;affectsOverviewRuler;affectsGlyphMargin;affectsLineNumber;constructor(e){e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler,this.affectsGlyphMargin=e.affectsGlyphMargin,this.affectsLineNumber=e.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)}},Hh=class{type=5;constructor(){}},nw=class{type=6;isFocused;constructor(e){this.isFocused=e}},iw=class{type=7},Uh=class{type=8;constructor(){}},DI=class{constructor(e,t){this.fromLineNumber=e;this.count=t}type=9},Sf=class{type=10;fromLineNumber;toLineNumber;constructor(e,t){this.fromLineNumber=e,this.toLineNumber=t}},Cf=class{type=11;fromLineNumber;toLineNumber;constructor(e,t){this.fromLineNumber=e,this.toLineNumber=t}};var yc=class{constructor(e,t,n,i,o,s,a){this.source=e;this.minimalReveal=t;this.range=n;this.selections=i;this.verticalType=o;this.revealHorizontal=s;this.scrollType=a}type=12},ow=class{type=13;scrollWidth;scrollLeft;scrollHeight;scrollTop;scrollWidthChanged;scrollLeftChanged;scrollHeightChanged;scrollTopChanged;constructor(e){this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}},rw=class{constructor(e){this.theme=e}type=14},sw=class{type=15;ranges;constructor(e){this.ranges=e}},aw=class{type=16;constructor(){}},lw=class{type=17;constructor(){}};var da=class extends N{_shouldRender;constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,i=e.length;n<i;n++){let o=e[n];switch(o.type){case 0:this.onCompositionStart(o)&&(t=!0);break;case 1:this.onCompositionEnd(o)&&(t=!0);break;case 2:this.onConfigurationChanged(o)&&(t=!0);break;case 3:this.onCursorStateChanged(o)&&(t=!0);break;case 4:this.onDecorationsChanged(o)&&(t=!0);break;case 5:this.onFlushed(o)&&(t=!0);break;case 6:this.onFocusChanged(o)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(o)&&(t=!0);break;case 8:this.onLineMappingChanged(o)&&(t=!0);break;case 9:this.onLinesChanged(o)&&(t=!0);break;case 10:this.onLinesDeleted(o)&&(t=!0);break;case 11:this.onLinesInserted(o)&&(t=!0);break;case 12:this.onRevealRangeRequest(o)&&(t=!0);break;case 13:this.onScrollChanged(o)&&(t=!0);break;case 15:this.onTokensChanged(o)&&(t=!0);break;case 14:this.onThemeChanged(o)&&(t=!0);break;case 16:this.onTokensColorsChanged(o)&&(t=!0);break;case 17:this.onZonesChanged(o)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(o)}}t&&(this._shouldRender=!0)}};var LI=class{_viewportBrand=void 0;top;left;width;height;constructor(e,t,n,i){this.top=e|0,this.left=t|0,this.width=n|0,this.height=i|0}},dw=class{tabSize;data;constructor(e,t){this.tabSize=e,this.data=t}},zh=class{_viewLineDataBrand=void 0;content;continuesWithWrappedLine;minColumn;maxColumn;startVisibleColumn;tokens;inlineDecorations;constructor(e,t,n,i,o,s,a){this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=i,this.startVisibleColumn=o,this.tokens=s,this.inlineDecorations=a}},cw=class r{minColumn;maxColumn;content;continuesWithWrappedLine;containsRTL;isBasicASCII;tokens;inlineDecorations;tabSize;startVisibleColumn;constructor(e,t,n,i,o,s,a,l,d,c){this.minColumn=e,this.maxColumn=t,this.content=n,this.continuesWithWrappedLine=i,this.isBasicASCII=r.isBasicASCII(n,s),this.containsRTL=r.containsRTL(n,this.isBasicASCII,o),this.tokens=a,this.inlineDecorations=l,this.tabSize=d,this.startVisibleColumn=c}static isBasicASCII(e,t){return t?cy(e):!0}static containsRTL(e,t,n){return!t&&n?ic(e):!1}};var Kh=class{constructor(e,t,n){this.range=e;this.inlineClassName=t;this.type=n}},uw=class{constructor(e,t,n,i){this.startOffset=e;this.endOffset=t;this.inlineClassName=n;this.inlineClassNameAffectsLetterSpacing=i}toInlineDecoration(e){return new Kh(new D(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}},Ef=class{_viewModelDecorationBrand=void 0;range;options;constructor(e,t){this.range=e,this.options=t}},Gh=class r{constructor(e,t,n){this.color=e;this.zIndex=t;this.data=n}static compareByRenderingProps(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}static equals(e,t){return e.color===t.color&&e.zIndex===t.zIndex&&sn(e.data,t.data)}static equalsArr(e,t){return sn(e,t,r.equals)}};var pw=class{_colorZoneBrand=void 0;from;to;colorId;constructor(e,t,n){this.from=e|0,this.to=t|0,this.colorId=n|0}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}},DP=class{_overviewRulerZoneBrand=void 0;startLineNumber;endLineNumber;heightInLines;color;_colorZone;constructor(e,t,n,i){this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=n,this.color=i,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}},hw=class{_getVerticalOffsetForLine;_zones;_colorZonesInvalid;_lineHeight;_domWidth;_domHeight;_outerHeight;_pixelRatio;_lastAssignedId;_color2Id;_id2Color;constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(DP.compare)}setLineHeight(e){return this._lineHeight===e?!1:(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth===e?!1:(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight===e?!1:(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight===e?!1:(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){let e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),i=Math.floor(this._outerHeight),o=n/i,s=Math.floor(4*this._pixelRatio/2),a=[];for(let l=0,d=this._zones.length;l<d;l++){let c=this._zones[l];if(!e){let E=c.getColorZones();if(E){a.push(E);continue}}let p=this._getVerticalOffsetForLine(c.startLineNumber),h=c.heightInLines===0?this._getVerticalOffsetForLine(c.endLineNumber)+t:p+c.heightInLines*t,g=Math.floor(o*p),f=Math.floor(o*h),m=Math.floor((g+f)/2),b=f-m;b<s&&(b=s),m-b<0&&(m=b),m+b>n&&(m=n-b);let v=c.color,S=this._color2Id[v];S||(S=++this._lastAssignedId,this._color2Id[v]=S,this._id2Color[S]=v);let x=new pw(m-b,m+b,S);c.setColorZone(x),a.push(x)}return this._colorZonesInvalid=!1,a.sort(pw.compare),a}};function Tf(r){return r&&typeof r.getEditorType=="function"?r.getEditorType()===kT.ICodeEditor:!1}function T5(r){return!!r&&typeof r=="object"&&typeof r.onDidChangeActiveEditor=="function"}function LP(r){let e=r;return typeof e?.resolve=="function"&&typeof e?.isResolved=="function"}var rd=j("codeEditorService");var Bi=j("modelService");var Ic=j("textModelService");var er=j("telemetryService"),dRe=j("customEndpointTelemetryService");function kP(r,e){return e&&(r.stack||r.stacktrace)?u("stackTrace.format","{0}: {1}",_5(r),w5(r.stack)||w5(r.stacktrace)):_5(r)}function w5(r){return Array.isArray(r)?r.join(`
`):r}function _5(r){return r.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${r.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof r.code=="string"&&typeof r.errno=="number"&&typeof r.syscall=="string"?u("nodeExceptionMessage","A system error occurred ({0})",r.message):r.message||u("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function gw(r=null,e=!1){if(!r)return u("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(r)){let t=Mr(r),n=gw(t[0],e);return t.length>1?u("error.moreErrors","{0} ({1} errors in total)",n,t.length):n}if(xt(r))return r;if(r.detail){let t=r.detail;if(t.error)return kP(t.error,e);if(t.exception)return kP(t.exception,e)}return r.stack?kP(r,e):r.message?r.message:u("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function RP(r){let e=r;return e instanceof Error&&Array.isArray(e.actions)}var Vt=j("logService"),MRe=j("loggerService");function mw(r){switch(r){case 1:return"trace";case 2:return"debug";case 3:return"info";case 4:return"warn";case 5:return"error";case 0:return"off"}}var ORe=new B("logLevel",mw(3));var jh=class{id;precondition;_kbOpts;_menuOpts;metadata;constructor(e){this.id=e.id,this.precondition=e.precondition,this._kbOpts=e.kbOpts,this._menuOpts=e.menuOpts,this.metadata=e.metadata}register(){if(Array.isArray(this._menuOpts)?this._menuOpts.forEach(this._registerMenuItem,this):this._menuOpts&&this._registerMenuItem(this._menuOpts),this._kbOpts){let e=Array.isArray(this._kbOpts)?this._kbOpts:[this._kbOpts];for(let t of e){let n=t.kbExpr;this.precondition&&(n?n=oe.and(n,this.precondition):n=this.precondition);let i={id:this.id,weight:t.weight,args:t.args,when:n,primary:t.primary,secondary:t.secondary,win:t.win,linux:t.linux,mac:t.mac};Sn.registerKeybindingRule(i)}}St.registerCommand({id:this.id,handler:(e,t)=>this.runCommand(e,t),metadata:this.metadata})}_registerMenuItem(e){go.appendMenuItem(e.menuId,{group:e.group,command:{id:this.id,title:e.title,icon:e.icon,precondition:this.precondition},when:e.when,order:e.order})}},kI=class extends jh{_implementations=[];addImplementation(e,t,n,i){return this._implementations.push({priority:e,name:t,implementation:n,when:i}),this._implementations.sort((o,s)=>s.priority-o.priority),{dispose:()=>{for(let o=0;o<this._implementations.length;o++)if(this._implementations[o].implementation===n){this._implementations.splice(o,1);return}}}}runCommand(e,t){let n=e.get(Vt),i=e.get(Ne);n.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);for(let o of this._implementations){if(o.when){let a=i.getContext(mr());if(!o.when.evaluate(a))continue}let s=o.implementation(e,t);if(s)return n.trace(`Command '${this.id}' was handled by '${o.name}'.`),typeof s=="boolean"?void 0:s}n.trace(`The Command '${this.id}' was not handled by any implementation.`)}},fw=class extends jh{constructor(t,n){super(n);this.command=t}runCommand(t,n){return this.command.runCommand(t,n)}},hs=class r extends jh{static bindToContribution(e){return class extends r{_callback;constructor(n){super(n),this._callback=n.handler}runEditorCommand(n,i,o){let s=e(i);s&&this._callback(s,o)}}}static runEditorCommand(e,t,n,i){let o=e.get(rd),s=o.getFocusedCodeEditor()||o.getActiveCodeEditor();if(s)return s.invokeWithinContext(a=>{if(a.get(Ne).contextMatchesRules(n??void 0))return i(a,s,t)})}runCommand(e,t){return r.runEditorCommand(e,t,this.precondition,(n,i,o)=>this.runEditorCommand(n,i,o))}},$h=class r extends hs{static convertOptions(e){let t;Array.isArray(e.menuOpts)?t=e.menuOpts:e.menuOpts?t=[e.menuOpts]:t=[];function n(i){return i.menuId||(i.menuId=Je.EditorContext),i.title||(i.title=e.label),i.when=oe.and(e.precondition,i.when),i}return Array.isArray(e.contextMenuOpts)?t.push(...e.contextMenuOpts.map(n)):e.contextMenuOpts&&t.push(n(e.contextMenuOpts)),e.menuOpts=t,e}label;alias;constructor(e){super(r.convertOptions(e)),this.label=e.label,this.alias=e.alias}runEditorCommand(e,t,n){return this.reportTelemetry(e,t),this.run(e,t,n||{})}reportTelemetry(e,t){e.get(er).publicLog2("editorActionInvoked",{name:this.label,id:this.id})}};function _e(r){return Ja.INSTANCE.registerEditorCommand(r),r}function RI(r){let e=new r;return Ja.INSTANCE.registerEditorAction(e),e}function gs(r,e,t){Ja.INSTANCE.registerEditorContribution(r,e,t)}var ms;(o=>{function r(s){return Ja.INSTANCE.getEditorCommand(s)}o.getEditorCommand=r;function e(){return Ja.INSTANCE.getEditorActions()}o.getEditorActions=e;function t(){return Ja.INSTANCE.getEditorContributions()}o.getEditorContributions=t;function n(s){return Ja.INSTANCE.getEditorContributions().filter(a=>s.indexOf(a.id)>=0)}o.getSomeEditorContributions=n;function i(){return Ja.INSTANCE.getDiffEditorContributions()}o.getDiffEditorContributions=i})(ms||={});var lY={EditorCommonContributions:"editor.contributions"},Ja=class r{static INSTANCE=new r;editorContributions=[];diffEditorContributions=[];editorActions=[];editorCommands=Object.create(null);constructor(){}registerEditorContribution(e,t,n){this.editorContributions.push({id:e,ctor:t,instantiation:n})}getEditorContributions(){return this.editorContributions.slice(0)}registerDiffEditorContribution(e,t){this.diffEditorContributions.push({id:e,ctor:t})}getDiffEditorContributions(){return this.diffEditorContributions.slice(0)}registerEditorAction(e){e.register(),this.editorActions.push(e)}getEditorActions(){return this.editorActions}registerEditorCommand(e){e.register(),this.editorCommands[e.id]=e}getEditorCommand(e){return this.editorCommands[e]||null}};Te.add(lY.EditorCommonContributions,Ja.INSTANCE);function MI(r){return r.register(),r}var MP=MI(new kI({id:"undo",precondition:void 0,kbOpts:{weight:0,primary:2104},menuOpts:[{menuId:Je.MenubarEditMenu,group:"1_do",title:u({key:"miUndo",comment:["&& denotes a mnemonic"]},"&&Undo"),order:1},{menuId:Je.CommandPalette,group:"",title:u("undo","Undo"),order:1}]}));MI(new fw(MP,{id:"default:undo",precondition:void 0}));var OP=MI(new kI({id:"redo",precondition:void 0,kbOpts:{weight:0,primary:2103,secondary:[3128],mac:{primary:3128}},menuOpts:[{menuId:Je.MenubarEditMenu,group:"1_do",title:u({key:"miRedo",comment:["&& denotes a mnemonic"]},"&&Redo"),order:2},{menuId:Je.CommandPalette,group:"",title:u("redo","Redo"),order:1}]}));MI(new fw(OP,{id:"default:redo",precondition:void 0}));var D5=MI(new kI({id:"editor.action.selectAll",precondition:void 0,kbOpts:{weight:0,kbExpr:null,primary:2079},menuOpts:[{menuId:Je.MenubarSelectionMenu,group:"1_basic",title:u({key:"miSelectAll",comment:["&& denotes a mnemonic"]},"&&Select All"),order:1},{menuId:Je.CommandPalette,group:"",title:u("selectAll","Select All"),order:1}]}));var PP=class r{static _table={36:0,58:1,44:2,123:3,125:4,92:5,47:6,124:7,43:11,45:12,63:13};static isDigitCharacter(e){return e>=48&&e<=57}static isVariableCharacter(e){return e===95||e>=97&&e<=122||e>=65&&e<=90}value="";pos=0;text(e){this.value=e,this.pos=0}tokenText(e){return this.value.substr(e.pos,e.len)}next(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};let e=this.pos,t=0,n=this.value.charCodeAt(e),i;if(i=r._table[n],typeof i=="number")return this.pos+=1,{type:i,pos:e,len:1};if(r.isDigitCharacter(n)){i=8;do t+=1,n=this.value.charCodeAt(e+t);while(r.isDigitCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}if(r.isVariableCharacter(n)){i=9;do n=this.value.charCodeAt(e+ ++t);while(r.isVariableCharacter(n)||r.isDigitCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}i=10;do t+=1,n=this.value.charCodeAt(e+t);while(!isNaN(n)&&typeof r._table[n]>"u"&&!r.isDigitCharacter(n)&&!r.isVariableCharacter(n));return this.pos+=t,{type:i,pos:e,len:t}}},Zu=class{_markerBrand;parent;_children=[];appendChild(e){return e instanceof xi&&this._children[this._children.length-1]instanceof xi?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}replace(e,t){let{parent:n}=e,i=n.children.indexOf(e),o=n.children.slice(0);o.splice(i,1,...t),n._children=o,function s(a,l){for(let d of a)d.parent=l,s(d.children,d)}(t,n)}get children(){return this._children}get rightMostDescendant(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}get snippet(){let e=this;for(;;){if(!e)return;if(e instanceof wf)return e;e=e.parent}}toString(){return this.children.reduce((e,t)=>e+t.toString(),"")}len(){return 0}},xi=class r extends Zu{constructor(t){super();this.value=t}static escape(t){return t.replace(/\$|}|\\/g,"\\$&")}toString(){return this.value}toTextmateString(){return r.escape(this.value)}len(){return this.value.length}clone(){return new r(this.value)}},bw=class extends Zu{transform},tr=class r extends bw{constructor(t){super();this.index=t}static compareByIndex(t,n){return t.index===n.index?0:t.isFinalTabstop?1:n.isFinalTabstop||t.index<n.index?-1:t.index>n.index?1:0}get isFinalTabstop(){return this.index===0}get choice(){return this._children.length===1&&this._children[0]instanceof qh?this._children[0]:void 0}toTextmateString(){let t="";return this.transform&&(t=this.transform.toTextmateString()),this.children.length===0&&!this.transform?`$${this.index}`:this.children.length===0?`\${${this.index}${t}}`:this.choice?`\${${this.index}|${this.choice.toTextmateString()}|${t}}`:`\${${this.index}:${this.children.map(n=>n.toTextmateString()).join("")}${t}}`}clone(){let t=new r(this.index);return this.transform&&(t.transform=this.transform.clone()),t._children=this.children.map(n=>n.clone()),t}},qh=class r extends Zu{options=[];appendChild(e){return e instanceof xi&&(e.parent=this,this.options.push(e)),this}toString(){return this.options[0].value}toTextmateString(){return this.options.map(e=>e.value.replace(/\||,|\\/g,"\\$&")).join(",")}len(){return this.options[0].len()}clone(){let e=new r;return this.options.forEach(e.appendChild,e),e}},AP=class r extends Zu{regexp=new RegExp("");resolve(e){let t=this,n=!1,i=e.replace(this.regexp,function(){return n=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))});return!n&&this._children.some(o=>o instanceof el&&!!o.elseValue)&&(i=this._replace([])),i}_replace(e){let t="";for(let n of this._children)if(n instanceof el){let i=e[n.index]||"";i=n.resolve(i),t+=i}else t+=n.toString();return t}toString(){return""}toTextmateString(){return`/${this.regexp.source}/${this.children.map(e=>e.toTextmateString())}/${(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")}`}clone(){let e=new r;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map(t=>t.clone()),e}},el=class r extends Zu{constructor(t,n,i,o){super();this.index=t;this.shorthandName=n;this.ifValue=i;this.elseValue=o}resolve(t){return this.shorthandName==="upcase"?t?t.toLocaleUpperCase():"":this.shorthandName==="downcase"?t?t.toLocaleLowerCase():"":this.shorthandName==="capitalize"?t?t[0].toLocaleUpperCase()+t.substr(1):"":this.shorthandName==="pascalcase"?t?this._toPascalCase(t):"":this.shorthandName==="camelcase"?t?this._toCamelCase(t):"":t&&typeof this.ifValue=="string"?this.ifValue:!t&&typeof this.elseValue=="string"?this.elseValue:t||""}_toPascalCase(t){let n=t.match(/[a-z0-9]+/gi);return n?n.map(i=>i.charAt(0).toUpperCase()+i.substr(1)).join(""):t}_toCamelCase(t){let n=t.match(/[a-z0-9]+/gi);return n?n.map((i,o)=>o===0?i.charAt(0).toLowerCase()+i.substr(1):i.charAt(0).toUpperCase()+i.substr(1)).join(""):t}toTextmateString(){let t="${";return t+=this.index,this.shorthandName?t+=`:/${this.shorthandName}`:this.ifValue&&this.elseValue?t+=`:?${this.ifValue}:${this.elseValue}`:this.ifValue?t+=`:+${this.ifValue}`:this.elseValue&&(t+=`:-${this.elseValue}`),t+="}",t}clone(){return new r(this.index,this.shorthandName,this.ifValue,this.elseValue)}},Yh=class r extends bw{constructor(t){super();this.name=t}resolve(t){let n=t.resolve(this);return this.transform&&(n=this.transform.resolve(n||"")),n!==void 0?(this._children=[new xi(n)],!0):!1}toTextmateString(){let t="";return this.transform&&(t=this.transform.toTextmateString()),this.children.length===0?`\${${this.name}${t}}`:`\${${this.name}:${this.children.map(n=>n.toTextmateString()).join("")}${t}}`}clone(){let t=new r(this.name);return this.transform&&(t.transform=this.transform.clone()),t._children=this.children.map(n=>n.clone()),t}};function L5(r,e){let t=[...r];for(;t.length>0;){let n=t.shift();if(!e(n))break;t.unshift(...n.children)}}var wf=class r extends Zu{_placeholders;get placeholderInfo(){if(!this._placeholders){let e=[],t;this.walk(function(n){return n instanceof tr&&(e.push(n),t=!t||t.index<n.index?n:t),!0}),this._placeholders={all:e,last:t}}return this._placeholders}get placeholders(){let{all:e}=this.placeholderInfo;return e}offset(e){let t=0,n=!1;return this.walk(i=>i===e?(n=!0,!1):(t+=i.len(),!0)),n?t:-1}fullLen(e){let t=0;return L5([e],n=>(t+=n.len(),!0)),t}enclosingPlaceholders(e){let t=[],{parent:n}=e;for(;n;)n instanceof tr&&t.push(n),n=n.parent;return t}resolveVariables(e){return this.walk(t=>(t instanceof Yh&&t.resolve(e)&&(this._placeholders=void 0),!0)),this}appendChild(e){return this._placeholders=void 0,super.appendChild(e)}replace(e,t){return this._placeholders=void 0,super.replace(e,t)}toTextmateString(){return this.children.reduce((e,t)=>e+t.toTextmateString(),"")}clone(){let e=new r;return this._children=this.children.map(t=>t.clone()),e}walk(e){L5(this.children,e)}},xr=class r{static escape(e){return e.replace(/\$|}|\\/g,"\\$&")}static asInsertText(e){return new r().parse(e).toString()}static guessNeedsClipboard(e){return/\${?CLIPBOARD/.test(e)}_scanner=new PP;_token={type:14,pos:0,len:0};parse(e,t,n){let i=new wf;return this.parseFragment(e,i),this.ensureFinalTabstop(i,n??!1,t??!1),i}parseFragment(e,t){let n=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););let i=new Map,o=[];t.walk(l=>(l instanceof tr&&(l.isFinalTabstop?i.set(0,void 0):!i.has(l.index)&&l.children.length>0?i.set(l.index,l.children):o.push(l)),!0));let s=(l,d)=>{let c=i.get(l.index);if(!c)return;let p=new tr(l.index);p.transform=l.transform;for(let h of c){let g=h.clone();p.appendChild(g),g instanceof tr&&i.has(g.index)&&!d.has(g.index)&&(d.add(g.index),s(g,d),d.delete(g.index))}t.replace(l,[p])},a=new Set;for(let l of o)s(l,a);return t.children.slice(n)}ensureFinalTabstop(e,t,n){(t||n&&e.placeholders.length>0)&&(e.placeholders.find(o=>o.index===0)||e.appendChild(new tr(0)))}_accept(e,t){if(e===void 0||this._token.type===e){let n=t?this._scanner.tokenText(this._token):!0;return this._token=this._scanner.next(),n}return!1}_backTo(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}_until(e){let t=this._token;for(;this._token.type!==e;){if(this._token.type===14)return!1;if(this._token.type===5){let i=this._scanner.next();if(i.type!==0&&i.type!==4&&i.type!==5)return!1}this._token=this._scanner.next()}let n=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}_parse(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}_parseEscaped(e){let t;return(t=this._accept(5,!0))?(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new xi(t)),!0):!1}_parseTabstopOrVariableName(e){let t,n=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new tr(Number(t)):new Yh(t)),!0):this._backTo(n)}_parseComplexPlaceholder(e){let t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(n);let o=new tr(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new xi("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else if(o.index>0&&this._accept(7)){let s=new qh;for(;;){if(this._parseChoiceElement(s)){if(this._accept(2))continue;if(this._accept(7)&&(o.appendChild(s),this._accept(4)))return e.appendChild(o),!0}return this._backTo(n),!1}}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseChoiceElement(e){let t=this._token,n=[];for(;!(this._token.type===2||this._token.type===7);){let i;if((i=this._accept(5,!0))?i=this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||i:i=this._accept(void 0,!0),!i)return this._backTo(t),!1;n.push(i)}return n.length===0?(this._backTo(t),!1):(e.appendChild(new xi(n.join(""))),!0)}_parseComplexVariable(e){let t,n=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(n);let o=new Yh(t);if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(o),!0;if(!this._parse(o))return e.appendChild(new xi("${"+t+":")),o.children.forEach(e.appendChild,e),!0}else return this._accept(6)?this._parseTransform(o)?(e.appendChild(o),!0):(this._backTo(n),!1):this._accept(4)?(e.appendChild(o),!0):this._backTo(n)}_parseTransform(e){let t=new AP,n="",i="";for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(6,!0)||o,n+=o;continue}if(this._token.type!==14){n+=this._accept(void 0,!0);continue}return!1}for(;!this._accept(6);){let o;if(o=this._accept(5,!0)){o=this._accept(5,!0)||this._accept(6,!0)||o,t.appendChild(new xi(o));continue}if(!(this._parseFormatString(t)||this._parseAnything(t)))return!1}for(;!this._accept(4);){if(this._token.type!==14){i+=this._accept(void 0,!0);continue}return!1}try{t.regexp=new RegExp(n,i)}catch{return!1}return e.transform=t,!0}_parseFormatString(e){let t=this._token;if(!this._accept(0))return!1;let n=!1;this._accept(3)&&(n=!0);let i=this._accept(8,!0);if(i)if(n){if(this._accept(4))return e.appendChild(new el(Number(i))),!0;if(!this._accept(1))return this._backTo(t),!1}else return e.appendChild(new el(Number(i))),!0;else return this._backTo(t),!1;if(this._accept(6)){let o=this._accept(9,!0);return!o||!this._accept(4)?(this._backTo(t),!1):(e.appendChild(new el(Number(i),o)),!0)}else if(this._accept(11)){let o=this._until(4);if(o)return e.appendChild(new el(Number(i),void 0,o,void 0)),!0}else if(this._accept(12)){let o=this._until(4);if(o)return e.appendChild(new el(Number(i),void 0,void 0,o)),!0}else if(this._accept(13)){let o=this._until(1);if(o){let s=this._until(4);if(s)return e.appendChild(new el(Number(i),void 0,o,s)),!0}}else{let o=this._until(4);if(o)return e.appendChild(new el(Number(i),void 0,void 0,o)),!0}return this._backTo(t),!1}_parseAnything(e){return this._token.type!==14?(e.appendChild(new xi(this._scanner.tokenText(this._token))),this._accept(void 0),!0):!1}};var no=j("ILanguageFeaturesService");var io;(i=>{function r(o,s){if(o.start>=s.end||s.start>=o.end)return{start:0,end:0};let a=Math.max(o.start,s.start),l=Math.min(o.end,s.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}i.intersect=r;function e(o){return o.end-o.start<=0}i.isEmpty=e;function t(o,s){return!e(r(o,s))}i.intersects=t;function n(o,s){let a=[],l={start:o.start,end:Math.min(s.start,o.end)},d={start:Math.max(s.end,o.start),end:o.end};return e(l)||a.push(l),e(d)||a.push(d),a}i.relativeComplement=n})(io||={});var vw={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:Fs.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"};var sd=class{_hooks=new X;_pointerMoveCallback=null;_onStopCallback=null;dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,n,i,o){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=i,this._onStopCallback=o;let s=e;try{e.setPointerCapture(t),this._hooks.add(me(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{s=Ee(e)}this._hooks.add(U(s,ee.POINTER_MOVE,a=>{if(a.buttons!==n){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(U(s,ee.POINTER_UP,a=>this.stopMonitoring(!0)))}};var On=class extends N{onclick(e,t){this._register(U(e,ee.CLICK,n=>t(new hr(Ee(e),n))))}onmousedown(e,t){this._register(U(e,ee.MOUSE_DOWN,n=>t(new hr(Ee(e),n))))}onmouseover(e,t){this._register(U(e,ee.MOUSE_OVER,n=>t(new hr(Ee(e),n))))}onmouseleave(e,t){this._register(U(e,ee.MOUSE_LEAVE,n=>t(new hr(Ee(e),n))))}onkeydown(e,t){this._register(U(e,ee.KEY_DOWN,n=>t(new it(n))))}onkeyup(e,t){this._register(U(e,ee.KEY_UP,n=>t(new it(n))))}oninput(e,t){this._register(U(e,ee.INPUT,t))}onblur(e,t){this._register(U(e,ee.BLUR,t))}onfocus(e,t){this._register(U(e,ee.FOCUS,t))}onchange(e,t){this._register(U(e,ee.CHANGE,t))}ignoreGesture(e){return Jn.ignoreTarget(e)}};var Ju=11,yw=class extends On{_onActivate;bgDomNode;domNode;_pointerdownRepeatTimer;_pointerdownScheduleRepeatTimer;_pointerMoveMonitor;constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...Ae.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=Ju+"px",this.domNode.style.height=Ju+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new sd),this._register(dn(this.bgDomNode,ee.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(dn(this.domNode,ee.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new Tu),this._pointerdownScheduleRepeatTimer=this._register(new Pr)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,Ee(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}};var _f=class r{_scrollbarSize;_oppositeScrollbarSize;_arrowSize;_visibleSize;_scrollSize;_scrollPosition;_computedAvailableSize;_computedIsNeeded;_computedSliderSize;_computedSliderRatio;_computedSliderPosition;constructor(e,t,n,i,o,s){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=i,this._scrollSize=o,this._scrollPosition=s,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new r(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){let t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){let t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){let t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,i,o){let s=Math.max(0,n-e),a=Math.max(0,s-2*t),l=i>0&&i>n;if(!l)return{computedAvailableSize:Math.round(s),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};let d=Math.round(Math.max(20,Math.floor(n*a/i))),c=(a-d)/(i-n),p=o*c;return{computedAvailableSize:Math.round(s),computedIsNeeded:l,computedSliderSize:Math.round(d),computedSliderRatio:c,computedSliderPosition:Math.round(p)}}_refreshComputedValues(){let e=r._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;let t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;let t=e-this._arrowSize,n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;let t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}};var Iw=class extends N{_visibility;_visibleClassName;_invisibleClassName;_domNode;_rawShouldBeVisible;_shouldBeVisible;_isNeeded;_isVisible;_revealTimer;constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Pr)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(e?" fade":"")))}};var dY=140,Df=class extends On{_host;_scrollable;_scrollByPage;_lazyRender;_scrollbarState;_visibilityController;_pointerMoveMonitor;domNode;slider;_shouldRender;constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new Iw(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new sd),this._shouldRender=!0,this.domNode=Ye(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(U(this.domNode.domNode,ee.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){let t=this._register(new yw(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,i){this.slider=Ye(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof i=="number"&&this.slider.setHeight(i),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(U(this.slider.domNode,ee.POINTER_DOWN,o=>{o.button===0&&(o.preventDefault(),this._sliderPointerDown(o))})),this.onclick(this.slider.domNode,o=>{o.leftButton&&o.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){let t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),i=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),o=this._sliderPointerPosition(e);n<=o&&o<=i?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,n=e.offsetY;else{let o=Ii(this.domNode.domNode);t=e.pageX-o.left,n=e.pageY-o.top}let i=this._pointerDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(i):this._scrollbarState.getDesiredScrollPositionFromOffset(i)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=this._sliderPointerPosition(e),n=this._sliderOrthogonalPointerPosition(e),i=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,o=>{let s=this._sliderOrthogonalPointerPosition(o),a=Math.abs(s-n);if(It&&a>dY){this._setDesiredScrollPositionNow(i.getScrollPosition());return}let d=this._sliderPointerPosition(o)-t;this._setDesiredScrollPositionNow(i.getDesiredScrollPositionFromDelta(d))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}};var Sw=class extends Df{constructor(e,t,n){let i=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new _f(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,i.width,i.scrollWidth,o.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){let s=(t.arrowSize-Ju)/2,a=(t.horizontalScrollbarSize-Ju)/2;this._createArrow({className:"scra",icon:re.scrollbarButtonLeft,top:a,left:s,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Rs(null,1,0))}),this._createArrow({className:"scra",icon:re.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:s,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new Rs(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}};var Cw=class extends Df{constructor(e,t,n){let i=e.getScrollDimensions(),o=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new _f(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,i.height,i.scrollHeight,o.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){let s=(t.arrowSize-Ju)/2,a=(t.verticalScrollbarSize-Ju)/2;this._createArrow({className:"scra",icon:re.scrollbarButtonUp,top:s,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Rs(null,0,1))}),this._createArrow({className:"scra",icon:re.scrollbarButtonDown,top:void 0,left:a,bottom:s,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new Rs(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}};var cY=500,k5=50,R5=!0,NP=class{timestamp;deltaX;deltaY;score;constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}},OI=class r{static INSTANCE=new r;_capacity;_memory;_front;_rear;constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,i=this._rear;do{let o=i===this._front?e:Math.pow(2,-n);if(e-=o,t+=this._memory[i].score*o,i===this._front)break;i=(this._capacity+i-1)%this._capacity,n++}while(!0);return t<=.5}acceptStandardWheelEvent(e){if(mu){let t=Ee(e.browserEvent),n=xH(t);this.accept(Date.now(),e.deltaX*n,e.deltaY*n)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,n){let i=null,o=new NP(e,t,n);this._front===-1&&this._rear===-1?(this._memory[0]=o,this._front=0,this._rear=0):(i=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=o),o.score=this._computeScore(o,i)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let n=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(n+=.25),t){let i=Math.abs(e.deltaX),o=Math.abs(e.deltaY),s=Math.abs(t.deltaX),a=Math.abs(t.deltaY),l=Math.max(Math.min(i,s),1),d=Math.max(Math.min(o,a),1),c=Math.max(i,s),p=Math.max(o,a);c%l===0&&p%d===0&&(n-=.5)}return Math.min(Math.max(n,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}},PI=class extends On{_options;_scrollable;_verticalScrollbar;_horizontalScrollbar;_domNode;_leftShadowDomNode;_topShadowDomNode;_topLeftShadowDomNode;_listenOnDomNode;_mouseWheelToDispose;_isDragging;_mouseIsOver;_hideTimeout;_shouldRender;_revealOnScroll;_onScroll=this._register(new T);onScroll=this._onScroll.event;_onWillScroll=this._register(new T);onWillScroll=this._onWillScroll.event;get options(){return this._options}constructor(e,t,n){super(),e.style.overflow="hidden",this._options=uY(t),this._scrollable=n,this._register(this._scrollable.onScroll(o=>{this._onWillScroll.fire(o),this._onDidScroll(o),this._onScroll.fire(o)}));let i={onMouseWheel:o=>this._onMouseWheel(o),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new Cw(this._scrollable,this._options,i)),this._horizontalScrollbar=this._register(new Sw(this._scrollable,this._options,i)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Ye(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Ye(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Ye(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,o=>this._onMouseOver(o)),this.onmouseleave(this._listenOnDomNode,o=>this._onMouseLeave(o)),this._hideTimeout=this._register(new Pr),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=rt(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Pe&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(e){this._revealOnScroll=e}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new Rs(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=rt(this._mouseWheelToDispose),e)){let n=i=>{this._onMouseWheel(new Rs(i))};this._mouseWheelToDispose.push(U(this._listenOnDomNode,ee.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){if(e.browserEvent?.defaultPrevented)return;let t=OI.INSTANCE;R5&&t.acceptStandardWheelEvent(e);let n=!1;if(e.deltaY||e.deltaX){let o=e.deltaY*this._options.mouseWheelScrollSensitivity,s=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&s+o===0?s=o=0:Math.abs(o)>=Math.abs(s)?s=0:o=0),this._options.flipAxes&&([o,s]=[s,o]);let a=!Pe&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!s&&(s=o,o=0),e.browserEvent&&e.browserEvent.altKey&&(s=s*this._options.fastScrollSensitivity,o=o*this._options.fastScrollSensitivity);let l=this._scrollable.getFutureScrollPosition(),d={};if(o){let c=k5*o,p=l.scrollTop-(c<0?Math.floor(c):Math.ceil(c));this._verticalScrollbar.writeScrollPosition(d,p)}if(s){let c=k5*s,p=l.scrollLeft-(c<0?Math.floor(c):Math.ceil(c));this._horizontalScrollbar.writeScrollPosition(d,p)}d=this._scrollable.validateScrollPosition(d),(l.scrollLeft!==d.scrollLeft||l.scrollTop!==d.scrollTop)&&(R5&&this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(d):this._scrollable.setScrollPositionNow(d),n=!0)}let i=n;!i&&this._options.alwaysConsumeMouseWheel&&(i=!0),!i&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(i=!0),i&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,i=n?" left":"",o=t?" top":"",s=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${i}`),this._topShadowDomNode.setClassName(`shadow${o}`),this._topLeftShadowDomNode.setClassName(`shadow${s}${o}${i}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),cY)}},xw=class extends PI{constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;let n=new Va({forceIntegerValues:!0,smoothScrollDuration:0,scheduleAtNextAnimationFrame:i=>Ai(Ee(e),i)});super(e,t,n),this._register(n)}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}},ep=class extends PI{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}},Xh=class extends PI{_element;constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;let n=new Va({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:i=>Ai(Ee(e),i)});super(e,t,n),this._register(n),this._element=e,this._register(this.onScroll(i=>{i.scrollTopChanged&&(this._element.scrollTop=i.scrollTop),i.scrollLeftChanged&&(this._element.scrollLeft=i.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}};function uY(r){let e={lazyRender:typeof r.lazyRender<"u"?r.lazyRender:!1,className:typeof r.className<"u"?r.className:"",useShadows:typeof r.useShadows<"u"?r.useShadows:!0,handleMouseWheel:typeof r.handleMouseWheel<"u"?r.handleMouseWheel:!0,flipAxes:typeof r.flipAxes<"u"?r.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof r.consumeMouseWheelIfScrollbarIsNeeded<"u"?r.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof r.alwaysConsumeMouseWheel<"u"?r.alwaysConsumeMouseWheel:!1,scrollYToX:typeof r.scrollYToX<"u"?r.scrollYToX:!1,mouseWheelScrollSensitivity:typeof r.mouseWheelScrollSensitivity<"u"?r.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof r.fastScrollSensitivity<"u"?r.fastScrollSensitivity:5,scrollPredominantAxis:typeof r.scrollPredominantAxis<"u"?r.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof r.mouseWheelSmoothScroll<"u"?r.mouseWheelSmoothScroll:!0,arrowSize:typeof r.arrowSize<"u"?r.arrowSize:11,listenOnDomNode:typeof r.listenOnDomNode<"u"?r.listenOnDomNode:null,horizontal:typeof r.horizontal<"u"?r.horizontal:1,horizontalScrollbarSize:typeof r.horizontalScrollbarSize<"u"?r.horizontalScrollbarSize:10,horizontalSliderSize:typeof r.horizontalSliderSize<"u"?r.horizontalSliderSize:0,horizontalHasArrows:typeof r.horizontalHasArrows<"u"?r.horizontalHasArrows:!1,vertical:typeof r.vertical<"u"?r.vertical:1,verticalScrollbarSize:typeof r.verticalScrollbarSize<"u"?r.verticalScrollbarSize:10,verticalHasArrows:typeof r.verticalHasArrows<"u"?r.verticalHasArrows:!1,verticalSliderSize:typeof r.verticalSliderSize<"u"?r.verticalSliderSize:0,scrollByPage:typeof r.scrollByPage<"u"?r.scrollByPage:!1};return e.horizontalSliderSize=typeof r.horizontalSliderSize<"u"?r.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof r.verticalSliderSize<"u"?r.verticalSliderSize:e.verticalScrollbarSize,Pe&&(e.className+=" mac"),e}var pY=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}}),FP=pY,hY=new Mi(()=>FP("mouse",!1)),gY=new Mi(()=>FP("element",!1));function pt(r){return r==="element"?gY.value:hY.value}function Cc(){return FP("element",!0)}var Wi=class extends N{options;_hoverDelegate;_actionRunner;_actionRunnerDisposables=this._register(new X);_context;_orientation;_triggerKeys;viewItems;viewItemDisposables=this._register(new ws);previouslyFocusedItem;focusedItem;focusTracker;triggerKeyDown=!1;focusable=!0;domNode;actionsList;_onDidBlur=this._register(new T);onDidBlur=this._onDidBlur.event;_onDidCancel=this._register(new T({onWillAddFirstListener:()=>this.cancelHasListener=!0}));onDidCancel=this._onDidCancel.event;cancelHasListener=!1;_onDidRun=this._register(new T);onDidRun=this._onDidRun.event;_onWillRun=this._register(new T);onWillRun=this._onWillRun.event;constructor(e,t={}){super(),this.options=t,this._context=t.context??null,this._orientation=this.options.orientation??0,this._triggerKeys={keyDown:this.options.triggerKeys?.keyDown??!1,keys:this.options.triggerKeys?.keys??[3,10]},this._hoverDelegate=t.hoverDelegate??this._register(Cc()),this.options.actionRunner?this._actionRunner=this.options.actionRunner:(this._actionRunner=new Ns,this._actionRunnerDisposables.add(this._actionRunner)),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(o=>this._onDidRun.fire(o))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(o=>this._onWillRun.fire(o))),this.viewItems=[],this.focusedItem=void 0,this.domNode=document.createElement("div"),this.domNode.className="monaco-action-bar";let n,i;switch(this._orientation){case 0:n=[15],i=[17];break;case 1:n=[16],i=[18],this.domNode.className+=" vertical";break}this._register(U(this.domNode,ee.KEY_DOWN,o=>{let s=new it(o),a=!0,l=typeof this.focusedItem=="number"?this.viewItems[this.focusedItem]:void 0;n&&(s.equals(n[0])||s.equals(n[1]))?a=this.focusPrevious():i&&(s.equals(i[0])||s.equals(i[1]))?a=this.focusNext():s.equals(9)&&this.cancelHasListener?this._onDidCancel.fire():s.equals(14)?a=this.focusFirst():s.equals(13)?a=this.focusLast():s.equals(2)&&l instanceof oo&&l.trapsArrowNavigation?a=this.focusNext(void 0,!0):this.isTriggerKeyEvent(s)?this._triggerKeys.keyDown?this.doTrigger(s):this.triggerKeyDown=!0:a=!1,a&&(s.preventDefault(),s.stopPropagation())})),this._register(U(this.domNode,ee.KEY_UP,o=>{let s=new it(o);this.isTriggerKeyEvent(s)?(!this._triggerKeys.keyDown&&this.triggerKeyDown&&(this.triggerKeyDown=!1,this.doTrigger(s)),s.preventDefault(),s.stopPropagation()):(s.equals(2)||s.equals(1026)||s.equals(16)||s.equals(18)||s.equals(15)||s.equals(17))&&this.updateFocusedItem()})),this.focusTracker=this._register(br(this.domNode)),this._register(this.focusTracker.onDidBlur(()=>{(mr()===this.domNode||!Ps(mr(),this.domNode))&&(this._onDidBlur.fire(),this.previouslyFocusedItem=this.focusedItem,this.focusedItem=void 0,this.triggerKeyDown=!1)})),this._register(this.focusTracker.onDidFocus(()=>this.updateFocusedItem())),this.actionsList=document.createElement("ul"),this.actionsList.className="actions-container",this.options.highlightToggledItems&&this.actionsList.classList.add("highlight-toggled"),this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"),this.options.ariaLabel&&this.actionsList.setAttribute("aria-label",this.options.ariaLabel),this.domNode.appendChild(this.actionsList),e.appendChild(this.domNode)}refreshRole(){this.length()>=1?this.actionsList.setAttribute("role",this.options.ariaRole||"toolbar"):this.actionsList.setAttribute("role","presentation")}setAriaLabel(e){e?this.actionsList.setAttribute("aria-label",e):this.actionsList.removeAttribute("aria-label")}setFocusable(e){if(this.focusable=e,this.focusable){let t=this.viewItems.find(n=>n instanceof oo&&n.isEnabled());t instanceof oo&&t.setFocusable(!0)}else this.viewItems.forEach(t=>{t instanceof oo&&t.setFocusable(!1)})}isTriggerKeyEvent(e){let t=!1;return this._triggerKeys.keys.forEach(n=>{t=t||e.equals(n)}),t}updateFocusedItem(){for(let e=0;e<this.actionsList.children.length;e++){let t=this.actionsList.children[e];if(Ps(mr(),t)){this.focusedItem=e,this.viewItems[this.focusedItem]?.showHover?.();break}}}get context(){return this._context}set context(e){this._context=e,this.viewItems.forEach(t=>t.setActionContext(e))}get actionRunner(){return this._actionRunner}set actionRunner(e){this._actionRunner=e,this._actionRunnerDisposables.clear(),this._actionRunnerDisposables.add(this._actionRunner.onDidRun(t=>this._onDidRun.fire(t))),this._actionRunnerDisposables.add(this._actionRunner.onWillRun(t=>this._onWillRun.fire(t))),this.viewItems.forEach(t=>t.actionRunner=e)}getContainer(){return this.domNode}hasAction(e){return this.viewItems.findIndex(t=>t.action.id===e.id)!==-1}getAction(e){if(typeof e=="number")return this.viewItems[e]?.action;if(Yn(e)){for(;e.parentElement!==this.actionsList;){if(!e.parentElement)return;e=e.parentElement}for(let t=0;t<this.actionsList.childNodes.length;t++)if(this.actionsList.childNodes[t]===e)return this.viewItems[t].action}}push(e,t={}){let n=Array.isArray(e)?e:[e],i=Uo(t.index)?t.index:null;n.forEach(o=>{let s=document.createElement("li");s.className="action-item",s.setAttribute("role","presentation");let a,l={hoverDelegate:this._hoverDelegate,...t,isTabList:this.options.ariaRole==="tablist"};this.options.actionViewItemProvider&&(a=this.options.actionViewItemProvider(o,l)),a||(a=new tl(this.context,o,l)),this.options.allowContextMenu||this.viewItemDisposables.set(a,U(s,ee.CONTEXT_MENU,d=>{qe.stop(d,!0)})),a.actionRunner=this._actionRunner,a.setActionContext(this.context),a.render(s),this.focusable&&a instanceof oo&&this.viewItems.length===0&&a.setFocusable(!0),i===null||i<0||i>=this.actionsList.children.length?(this.actionsList.appendChild(s),this.viewItems.push(a)):(this.actionsList.insertBefore(s,this.actionsList.children[i]),this.viewItems.splice(i,0,a),i++)}),typeof this.focusedItem=="number"&&this.focus(this.focusedItem),this.refreshRole()}getWidth(e){if(e>=0&&e<this.actionsList.children.length){let t=this.actionsList.children.item(e);if(t)return t.clientWidth}return 0}getHeight(e){if(e>=0&&e<this.actionsList.children.length){let t=this.actionsList.children.item(e);if(t)return t.clientHeight}return 0}pull(e){e>=0&&e<this.viewItems.length&&(this.actionsList.childNodes[e].remove(),this.viewItemDisposables.deleteAndDispose(this.viewItems[e]),rt(this.viewItems.splice(e,1)),this.refreshRole())}clear(){this.isEmpty()||(this.viewItems=rt(this.viewItems),this.viewItemDisposables.clearAndDisposeAll(),Kt(this.actionsList),this.refreshRole())}length(){return this.viewItems.length}isEmpty(){return this.viewItems.length===0}focus(e){let t=!1,n;if(e===void 0?t=!0:typeof e=="number"?n=e:typeof e=="boolean"&&(t=e),t&&typeof this.focusedItem>"u"){let i=this.viewItems.findIndex(o=>o.isEnabled());this.focusedItem=i===-1?void 0:i,this.updateFocus(void 0,void 0,!0)}else n!==void 0&&(this.focusedItem=n),this.updateFocus(void 0,void 0,!0)}focusFirst(){return this.focusedItem=this.length()-1,this.focusNext(!0)}focusLast(){return this.focusedItem=0,this.focusPrevious(!0)}focusNext(e,t){if(typeof this.focusedItem>"u")this.focusedItem=this.viewItems.length-1;else if(this.viewItems.length<=1)return!1;let n=this.focusedItem,i;do{if(!e&&this.options.preventLoopNavigation&&this.focusedItem+1>=this.viewItems.length)return this.focusedItem=n,!1;this.focusedItem=(this.focusedItem+1)%this.viewItems.length,i=this.viewItems[this.focusedItem]}while(this.focusedItem!==n&&(this.options.focusOnlyEnabledItems&&!i.isEnabled()||i.action.id===ei.ID));return this.updateFocus(void 0,void 0,t),!0}focusPrevious(e){if(typeof this.focusedItem>"u")this.focusedItem=0;else if(this.viewItems.length<=1)return!1;let t=this.focusedItem,n;do{if(this.focusedItem=this.focusedItem-1,this.focusedItem<0){if(!e&&this.options.preventLoopNavigation)return this.focusedItem=t,!1;this.focusedItem=this.viewItems.length-1}n=this.viewItems[this.focusedItem]}while(this.focusedItem!==t&&(this.options.focusOnlyEnabledItems&&!n.isEnabled()||n.action.id===ei.ID));return this.updateFocus(!0),!0}updateFocus(e,t,n=!1){typeof this.focusedItem>"u"&&this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem!==void 0&&this.previouslyFocusedItem!==this.focusedItem&&this.viewItems[this.previouslyFocusedItem]?.blur();let i=this.focusedItem!==void 0?this.viewItems[this.focusedItem]:void 0;if(i){let o=!0;hy(i.focus)||(o=!1),this.options.focusOnlyEnabledItems&&hy(i.isEnabled)&&!i.isEnabled()&&(o=!1),i.action.id===ei.ID&&(o=!1),o?(n||this.previouslyFocusedItem!==this.focusedItem)&&(i.focus(e),this.previouslyFocusedItem=this.focusedItem):(this.actionsList.focus({preventScroll:t}),this.previouslyFocusedItem=void 0),o&&i.showHover?.()}}doTrigger(e){if(typeof this.focusedItem>"u")return;let t=this.viewItems[this.focusedItem];if(t instanceof oo){let n=t._context===null||t._context===void 0?e:t._context;this.run(t._action,n)}}async run(e,t){await this._actionRunner.run(e,t)}dispose(){this._context=void 0,this.viewItems=rt(this.viewItems),this.getContainer().remove(),super.dispose()}};function M5(r,e={}){let t=Ew(e);return t.textContent=r,t}function O5(r,e={}){let t=Ew(e);return P5(t,mY(r,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function Ew(r){let e=r.inline?"span":"div",t=document.createElement(e);return r.className&&(t.className=r.className),t}var BP=class{source;index;constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){let e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}};function P5(r,e,t,n){let i;if(e.type===2)i=document.createTextNode(e.content||"");else if(e.type===3)i=document.createElement("b");else if(e.type===4)i=document.createElement("i");else if(e.type===7&&n)i=document.createElement("code");else if(e.type===5&&t){let o=document.createElement("a");t.disposables.add(dn(o,"click",s=>{t.callback(String(e.index),s)})),i=o}else e.type===8?i=document.createElement("br"):e.type===1&&(i=r);i&&r!==i&&r.appendChild(i),i&&Array.isArray(e.children)&&e.children.forEach(o=>{P5(i,o,t,n)})}function mY(r,e){let t={type:1,children:[]},n=0,i=t,o=[],s=new BP(r);for(;!s.eos();){let a=s.next(),l=a==="\\"&&WP(s.peek(),e)!==0;if(l&&(a=s.next()),!l&&fY(a,e)&&a===s.peek()){s.advance(),i.type===2&&(i=o.pop());let d=WP(a,e);if(i.type===d||i.type===5&&d===6)i=o.pop();else{let c={type:d,children:[]};d===5&&(c.index=n,n++),i.children.push(c),o.push(i),i=c}}else if(a===`
`)i.type===2&&(i=o.pop()),i.children.push({type:8});else if(i.type!==2){let d={type:2,content:a};i.children.push(d),o.push(i),i=d}else i.content+=a}return i.type===2&&(i=o.pop()),o.length,t}function fY(r,e){return WP(r,e)!==0}function WP(r,e){switch(r){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}var A5=2e4,B5,VP,N5,HP,F5;function ca(r){B5&&(VP.textContent!==r?(Kt(N5),Tw(VP,r)):(Kt(VP),Tw(N5,r)))}function Bs(r){B5&&(HP.textContent!==r?(Kt(F5),Tw(HP,r)):(Kt(HP),Tw(F5,r)))}function Tw(r,e){Kt(r),e.length>A5&&(e=e.substr(0,A5)),r.textContent=e,r.style.visibility="hidden",r.style.visibility="visible"}var _w=class{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(i=>i.splice(e,t,n))}};function W5(r,e){let t=[];for(let n of e){if(r.start>=n.range.end)continue;if(r.end<n.range.start)break;let i=io.intersect(r,n.range);io.isEmpty(i)||t.push({range:i,size:n.size})}return t}function Lw({start:r,end:e},t){return{start:r+t,end:e+t}}function bY(r){let e=[],t=null;for(let n of r){let i=n.range.start,o=n.range.end,s=n.size;if(t&&s===t.size){t.range.end=o;continue}t={range:{start:i,end:o},size:s},e.push(t)}return e}function vY(...r){return bY(r.reduce((e,t)=>e.concat(t),[]))}var Dw=class{groups=[];_size=0;_paddingTop=0;get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,n=[]){let i=n.length-t,o=W5({start:0,end:e},this.groups),s=W5({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:Lw(l.range,i),size:l.size})),a=n.map((l,d)=>({range:{start:e+d,end:e+d+1},size:l.size}));this.groups=vY(o,a,s),this._size=this._paddingTop+this.groups.reduce((l,d)=>l+d.size*(d.range.end-d.range.start),0)}get count(){let e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,n=this._paddingTop;for(let i of this.groups){let o=i.range.end-i.range.start,s=n+o*i.size;if(e<s)return t+Math.floor((e-n)/i.size);t+=o,n=s}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(let i of this.groups){let o=i.range.end-i.range.start,s=n+o;if(e<s)return this._paddingTop+t+(e-n)*i.size;t+=o*i.size,n=s}return-1}};var kw=class{constructor(e){this.renderers=e}cache=new Map;transactionNodesPendingRemoval=new Set;inTransaction=!1;alloc(e){let t=this.getTemplateCache(e).pop(),n=!1;if(t)n=this.transactionNodesPendingRemoval.has(t.domNode),n&&this.transactionNodesPendingRemoval.delete(t.domNode);else{let i=ie(".monaco-list-row"),s=this.getRenderer(e).renderTemplate(i);t={domNode:i,templateId:e,templateData:s}}return{row:t,isReusingConnectedDomNode:n}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(let t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){let{domNode:t,templateId:n}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(n).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),e.remove()}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(let n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){let t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}};var Qh={CurrentDragAndDropData:void 0};var ad={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(r){return[r]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0},xc=class{elements;_context;get context(){return this._context}set context(e){this._context=e}constructor(e){this.elements=e}update(){}getData(){return this.elements}},UP=class{elements;constructor(e){this.elements=e}update(){}getData(){return this.elements}},zP=class{types;files;constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){let n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}};function yY(r,e){return Array.isArray(r)&&Array.isArray(e)?sn(r,e):r===e}var KP=class{getSetSize;getPosInSet;getRole;isChecked;constructor(e){e?.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,i)=>i,e?.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e?.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e?.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}},fs=class fs{constructor(e,t,n,i=ad){this.virtualDelegate=t;if(i.horizontalScrolling&&i.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(i.paddingTop??0);for(let s of n)this.renderers.set(s.templateId,s);this.cache=this.disposables.add(new kw(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof i.mouseSupport=="boolean"?i.mouseSupport:!0),this._horizontalScrolling=i.horizontalScrolling??ad.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof i.paddingBottom>"u"?0:i.paddingBottom,this.accessibilityProvider=new KP(i.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(i.transformOptimization??ad.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(Jn.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new Va({forceIntegerValues:!0,smoothScrollDuration:i.smoothScrolling??!1?125:0,scheduleAtNextAnimationFrame:s=>Ai(Ee(this.domNode),s)})),this.scrollableElement=this.disposables.add(new ep(this.rowsContainer,{alwaysConsumeMouseWheel:i.alwaysConsumeMouseWheel??ad.alwaysConsumeMouseWheel,horizontal:1,vertical:i.verticalScrollMode??ad.verticalScrollMode,useShadows:i.useShadows??ad.useShadows,mouseWheelScrollSensitivity:i.mouseWheelScrollSensitivity,fastScrollSensitivity:i.fastScrollSensitivity,scrollByPage:i.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(U(this.rowsContainer,Rt.Change,s=>this.onTouchChange(s))),this.disposables.add(U(this.scrollableElement.getDomNode(),"scroll",s=>s.target.scrollTop=0)),this.disposables.add(U(this.domNode,"dragover",s=>this.onDragOver(this.toDragEvent(s)))),this.disposables.add(U(this.domNode,"drop",s=>this.onDrop(this.toDragEvent(s)))),this.disposables.add(U(this.domNode,"dragleave",s=>this.onDragLeave(this.toDragEvent(s)))),this.disposables.add(U(this.domNode,"dragend",s=>this.onDragEnd(s))),this.setRowLineHeight=i.setRowLineHeight??ad.setRowLineHeight,this.setRowHeight=i.setRowHeight??ad.setRowHeight,this.supportDynamicHeights=i.supportDynamicHeights??ad.supportDynamicHeights,this.dnd=i.dnd??this.disposables.add(ad.dnd),this.layout(i.initialSize?.height,i.initialSize?.width)}static InstanceCount=0;domId=`list_id_${++fs.InstanceCount}`;domNode;items;itemId;rangeMap;cache;renderers=new Map;lastRenderTop;lastRenderHeight;renderWidth=0;rowsContainer;scrollable;scrollableElement;_scrollHeight=0;scrollableElementUpdateDisposable=null;scrollableElementWidthDelayer=new Vn(50);splicing=!1;dragOverAnimationDisposable;dragOverAnimationStopDisposable=N.None;dragOverMouseY=0;setRowLineHeight;setRowHeight;supportDynamicHeights;paddingBottom;accessibilityProvider;scrollWidth;dnd;canDrop=!1;currentDragData;currentDragFeedback;currentDragFeedbackPosition;currentDragFeedbackDisposable=N.None;onDragLeaveTimeout=N.None;disposables=new X;_onDidChangeContentHeight=new T;_onDidChangeContentWidth=new T;onDidChangeContentHeight=z.latch(this._onDidChangeContentHeight.event,void 0,this.disposables);onDidChangeContentWidth=z.latch(this._onDidChangeContentWidth.event,void 0,this.disposables);get contentHeight(){return this.rangeMap.size}get contentWidth(){return this.scrollWidth??0}get onDidScroll(){return this.scrollableElement.onScroll}get onWillScroll(){return this.scrollableElement.onWillScroll}get containerDomNode(){return this.rowsContainer}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}_horizontalScrolling=!1;get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(let t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:Rm(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t={...t??{},scrollByPage:e.scrollByPage}),e.mouseWheelScrollSensitivity!==void 0&&(t={...t??{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&(t={...t??{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){let n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),i=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(n,Math.max(0,this.lastRenderTop+i),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}delegateScrollFromMouseWheelEvent(e){this.scrollableElement.delegateScrollFromMouseWheelEvent(e)}delegateVerticalScrollbarPointerDown(e){this.scrollableElement.delegateVerticalScrollbarPointerDown(e)}updateElementHeight(e,t,n){if(e<0||e>=this.items.length)return;let i=this.items[e].size;if(typeof t>"u"){if(!this.supportDynamicHeights){console.warn("Dynamic heights not supported",new Error().stack);return}this.items[e].lastDynamicHeightWidth=void 0,t=i+this.probeDynamicHeight(e)}if(i===t)return;let o=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s=0;e<o.start||n!==null&&n>e&&n<o.end?s=t-i:s=0,this.rangeMap.splice(e,1,[{size:t}]),this.items[e].size=t,this.render(o,Math.max(0,this.lastRenderTop+s),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}createRangeMap(e){return new Dw(e)}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){let i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),o={start:e,end:e+t},s=io.intersect(i,o),a=new Map;for(let w=s.end-1;w>=s.start;w--){let P=this.items[w];if(P.dragStartDisposable.dispose(),P.checkedDisposable.dispose(),P.row){let R=a.get(P.templateId);R||(R=[],a.set(P.templateId,R));let O=this.renderers.get(P.templateId);O&&O.disposeElement&&O.disposeElement(P.element,w,P.row.templateData,P.size),R.unshift(P.row)}P.row=null,P.stale=!0}let l={start:e+t,end:this.items.length},d=io.intersect(l,i),c=io.relativeComplement(l,i),p=n.map(w=>({id:String(this.itemId++),element:w,templateId:this.virtualDelegate.getTemplateId(w),size:this.virtualDelegate.getHeight(w),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(w),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:N.None,checkedDisposable:N.None,stale:!1})),h;e===0&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,p),h=this.items,this.items=p):(this.rangeMap.splice(e,t,p),h=this.items.splice(e,t,...p));let g=n.length-t,f=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),m=Lw(d,g),b=io.intersect(f,m);for(let w=b.start;w<b.end;w++)this.updateItemInDOM(this.items[w],w);let v=io.relativeComplement(m,f);for(let w of v)for(let P=w.start;P<w.end;P++)this.removeItemFromDOM(P);let S=c.map(w=>Lw(w,g)),E=[{start:e,end:e+n.length},...S].map(w=>io.intersect(f,w)).reverse();for(let w of E)for(let P=w.end-1;P>=w.start;P--){let R=this.items[P],M=a.get(R.templateId)?.pop();this.insertItemInDOM(P,M)}for(let w of a.values())for(let P of w)this.cache.release(P);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),h.map(w=>w.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=Ai(Ee(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(let t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}updateWidth(e){if(!this.horizontalScrolling||typeof this.scrollWidth>"u")return;let t=this.items[e];this.measureItemWidth(t),typeof t.width<"u"&&t.width>this.scrollWidth&&(this.scrollWidth=t.width,this.scrollableElement.setScrollDimensions({scrollWidth:this.scrollWidth+10}),this._onDidChangeContentWidth.fire(this.scrollWidth))}rerender(){if(this.supportDynamicHeights){for(let e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}get firstMostlyVisibleIndex(){let e=this.firstVisibleIndex,t=this.rangeMap.positionAt(e),n=this.rangeMap.positionAt(e+1);return n!==-1&&(n-t)/2+t<this.scrollTop?e+1:e}get lastVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).end-1}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex(t=>t.element===e)}domElement(e){let t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let n={height:typeof e=="number"?e:sE(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:Rm(this.domNode)})}render(e,t,n,i,o,s=!1){let a=this.getRenderRange(t,n),l=io.relativeComplement(a,e).reverse(),d=io.relativeComplement(e,a);if(s){let c=io.intersect(e,a);for(let p=c.start;p<c.end;p++)this.updateItemInDOM(this.items[p],p)}this.cache.transact(()=>{for(let c of d)for(let p=c.start;p<c.end;p++)this.removeItemFromDOM(p);for(let c of l)for(let p=c.end-1;p>=c.start;p--)this.insertItemInDOM(p)}),i!==void 0&&(this.rowsContainer.style.left=`-${i}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&o!==void 0&&(this.rowsContainer.style.width=`${Math.max(o,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t){let n=this.items[e];if(!n.row)if(t)n.row=t,n.stale=!0;else{let l=this.cache.alloc(n.templateId);n.row=l.row,n.stale||=l.isReusingConnectedDomNode}let i=this.accessibilityProvider.getRole(n.element)||"listitem";n.row.domNode.setAttribute("role",i);let o=this.accessibilityProvider.isChecked(n.element);if(typeof o=="boolean")n.row.domNode.setAttribute("aria-checked",String(!!o));else if(o){let l=d=>n.row.domNode.setAttribute("aria-checked",String(!!d));l(o.value),n.checkedDisposable=o.onDidChange(()=>l(o.value))}if(n.stale||!n.row.domNode.parentElement){let l=this.items.at(e+1)?.row?.domNode??null;(n.row.domNode.parentElement!==this.rowsContainer||n.row.domNode.nextElementSibling!==l)&&this.rowsContainer.insertBefore(n.row.domNode,l),n.stale=!1}this.updateItemInDOM(n,e);let s=this.renderers.get(n.templateId);if(!s)throw new Error(`No renderer found for template id ${n.templateId}`);s?.renderElement(n.element,e,n.row.templateData,n.size);let a=this.dnd.getDragURI(n.element);n.dragStartDisposable.dispose(),n.row.domNode.draggable=!!a,a&&(n.dragStartDisposable=U(n.row.domNode,"dragstart",l=>this.onDragStart(n.element,a,l))),this.horizontalScrolling&&(this.measureItemWidth(n),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=Rm(e.row.domNode);let t=Ee(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){let t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){let n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}getScrollLeft(){return this.scrollableElement.getScrollPosition().scrollLeft}setScrollLeft(e){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollWidth:this.scrollWidth})),this.scrollableElement.setScrollPosition({scrollLeft:e})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return z.map(this.disposables.add(new He(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return z.map(this.disposables.add(new He(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return z.filter(z.map(this.disposables.add(new He(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseUp(){return z.map(this.disposables.add(new He(this.domNode,"mouseup")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDown(){return z.map(this.disposables.add(new He(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return z.map(this.disposables.add(new He(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMove(){return z.map(this.disposables.add(new He(this.domNode,"mousemove")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return z.map(this.disposables.add(new He(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return z.any(z.map(this.disposables.add(new He(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),z.map(this.disposables.add(new He(this.domNode,Rt.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return z.map(this.disposables.add(new He(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return z.map(this.disposables.add(new He(this.rowsContainer,Rt.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toTouchEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toGestureEvent(e){let t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element;return{browserEvent:e,index:t,element:i}}toDragEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],i=n&&n.element,o=this.getTargetSector(e,t);return{browserEvent:e,index:t,element:i,sector:o}}onScroll(e){try{let t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){if(!n.dataTransfer)return;let i=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(vw.TEXT,t),n.dataTransfer.setDragImage){let o;this.dnd.getDragLabel&&(o=this.dnd.getDragLabel(i,n)),typeof o>"u"&&(o=String(i.length));let s=ie(".monaco-drag-image");s.textContent=o,(d=>{for(;d&&!d.classList.contains("monaco-workbench");)d=d.parentElement;return d||this.domNode.ownerDocument})(this.domNode).appendChild(s),n.dataTransfer.setDragImage(s,-10,-10),setTimeout(()=>s.remove(),0)}this.domNode.classList.add("dragging"),this.currentDragData=new xc(i),Qh.CurrentDragAndDropData=new UP(i),this.dnd.onDragStart?.(this.currentDragData,n)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),Qh.CurrentDragAndDropData&&Qh.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(Qh.CurrentDragAndDropData)this.currentDragData=Qh.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new zP}let t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&t.effect?.type===0?"copy":"move";let n;typeof t!="boolean"&&t.feedback?n=t.feedback:typeof e.index>"u"?n=[-1]:n=[e.index],n=ai(n).filter(o=>o>=-1&&o<this.length).sort((o,s)=>o-s),n=n[0]===-1?[-1]:n;let i=typeof t!="boolean"&&t.effect&&t.effect.position?t.effect.position:"drop-target";if(yY(this.currentDragFeedback,n)&&this.currentDragFeedbackPosition===i)return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackPosition=i,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add(i),this.rowsContainer.classList.add(i),this.currentDragFeedbackDisposable=me(()=>{this.domNode.classList.remove(i),this.rowsContainer.classList.remove(i)});else{if(n.length>1&&i!=="drop-target")throw new Error("Can't use multiple feedbacks with position different than 'over'");i==="drop-target-after"&&n[0]<this.length-1&&(n[0]+=1,i="drop-target-before");for(let o of n){let s=this.items[o];s.dropTarget=!0,s.row?.domNode.classList.add(i)}this.currentDragFeedbackDisposable=me(()=>{for(let o of n){let s=this.items[o];s.dropTarget=!1,s.row?.domNode.classList.remove(i)}})}return!0}onDragLeave(e){this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=Ys(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&this.dnd.onDragLeave?.(this.currentDragData,e.element,e.index,e.browserEvent)}onDrop(e){if(!this.canDrop)return;let t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,Qh.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,Qh.CurrentDragAndDropData=void 0,this.dnd.onDragEnd?.(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=N.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){let t=ky(this.domNode).top;this.dragOverAnimationDisposable=IU(Ee(this.domNode),this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=Ys(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;let t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(t===void 0)return;let n=e.offsetY/this.items[t].size,i=Math.floor(n/.25);return qn(i,0,3)}getItemIndexFromEventTarget(e){let t=this.scrollableElement.getDomNode(),n=e;for(;(Yn(n)||hU(n))&&n!==this.rowsContainer&&t.contains(n);){let i=n.getAttribute("data-index");if(i){let o=Number(i);if(!isNaN(o))return o}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){let i=this.getRenderRange(e,t),o,s;e===this.elementTop(i.start)?(o=i.start,s=0):i.end-i.start>1&&(o=i.start+1,s=this.elementTop(o)-e);let a=0;for(;;){let l=this.getRenderRange(e,t),d=!1;for(let c=l.start;c<l.end;c++){let p=this.probeDynamicHeight(c);p!==0&&this.rangeMap.splice(c,1,[this.items[c]]),a+=p,d=d||p!==0}if(!d){a!==0&&this.eventuallyUpdateScrollDimensions();let c=io.relativeComplement(i,l);for(let h of c)for(let g=h.start;g<h.end;g++)this.items[g].row&&this.removeItemFromDOM(g);let p=io.relativeComplement(l,i).reverse();for(let h of p)for(let g=h.end-1;g>=h.start;g--)this.insertItemInDOM(g);for(let h=l.start;h<l.end;h++)this.items[h].row&&this.updateItemInDOM(this.items[h],h);if(typeof o=="number"){let h=this.scrollable.getFutureScrollPosition().scrollTop-e,g=this.elementTop(o)-s+h;this.setScrollTop(g,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){let t=this.items[e];if(this.virtualDelegate.getDynamicHeight){let s=this.virtualDelegate.getDynamicHeight(t.element);if(s!==null){let a=t.size;return t.size=s,t.lastDynamicHeightWidth=this.renderWidth,s-a}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;let n=t.size;if(t.row)return t.row.domNode.style.height="",t.size=t.row.domNode.offsetHeight,t.size===0&&!Ps(t.row.domNode,Ee(t.row.domNode).document.body)&&console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!",new Error().stack),t.lastDynamicHeightWidth=this.renderWidth,t.size-n;let{row:i}=this.cache.alloc(t.templateId);i.domNode.style.height="",this.rowsContainer.appendChild(i.domNode);let o=this.renderers.get(t.templateId);if(!o)throw new st("Missing renderer for templateId: "+t.templateId);return o.renderElement(t.element,e,i.templateData,void 0),t.size=i.domNode.offsetHeight,o.disposeElement?.(t.element,e,i.templateData,void 0),this.virtualDelegate.setDynamicHeight?.(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,i.domNode.remove(),this.cache.release(i),t.size-n}getElementDomId(e){return`${this.domId}_${e}`}dispose(){for(let e of this.items)if(e.dragStartDisposable.dispose(),e.checkedDisposable.dispose(),e.row){let t=this.renderers.get(e.row.templateId);t&&(t.disposeElement?.(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[],this.domNode?.remove(),this.dragOverAnimationDisposable?.dispose(),this.disposables.dispose()}};_([be],fs.prototype,"onMouseClick",1),_([be],fs.prototype,"onMouseDblClick",1),_([be],fs.prototype,"onMouseMiddleClick",1),_([be],fs.prototype,"onMouseUp",1),_([be],fs.prototype,"onMouseDown",1),_([be],fs.prototype,"onMouseOver",1),_([be],fs.prototype,"onMouseMove",1),_([be],fs.prototype,"onMouseOut",1),_([be],fs.prototype,"onContextMenu",1),_([be],fs.prototype,"onTouchStart",1),_([be],fs.prototype,"onTap",1);var Rw=fs;var ld=class extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}},Mw=class{cache=new WeakMap;getHeight(e){return this.cache.get(e)??this.estimateHeight(e)}setDynamicHeight(e,t){t>0&&this.cache.set(e,t)}};var GP=class{constructor(e){this.trait=e}renderedElements=[];get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,n){let i=this.renderedElements.findIndex(o=>o.templateData===n);if(i>=0){let o=this.renderedElements[i];this.trait.unrender(n),o.index=t}else{let o={index:t,templateData:n};this.renderedElements.push(o)}this.trait.renderIndex(t,n)}splice(e,t,n){let i=[];for(let o of this.renderedElements)o.index<e?i.push(o):o.index>=e+t&&i.push({index:o.index+n-t,templateData:o.templateData});this.renderedElements=i}renderIndexes(e){for(let{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){let t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}},kf=class{constructor(e){this._trait=e}indexes=[];sortedIndexes=[];_onChange=new T;onChange=this._onChange.event;get name(){return this._trait}get renderer(){return new GP(this)}splice(e,t,n){let i=n.length-t,o=e+t,s=[],a=0;for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]<e;)s.push(this.sortedIndexes[a++]);for(let l=0;l<n.length;l++)n[l]&&s.push(l+e);for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]>=o;)s.push(this.sortedIndexes[a++]+i);this.renderer.splice(e,t,n.length),this._set(s,s)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(H5),t)}_set(e,t,n){let i=this.indexes,o=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;let s=YP(o,e);return this.renderer.renderIndexes(s),this._onChange.fire({indexes:e,browserEvent:n}),i}get(){return this.indexes}contains(e){return mx(this.sortedIndexes,e,H5)>=0}dispose(){rt(this._onChange)}};_([be],kf.prototype,"renderer",1);var jP=class extends kf{constructor(t){super("selected");this.setAriaSelected=t}renderIndex(t,n){super.renderIndex(t,n),this.setAriaSelected&&(this.contains(t)?n.setAttribute("aria-selected","true"):n.setAttribute("aria-selected","false"))}},AI=class{constructor(e,t,n){this.trait=e;this.view=t;this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,new Array(n.length).fill(!1));let i=this.trait.get().map(a=>this.identityProvider.getId(this.view.element(a)).toString());if(i.length===0)return this.trait.splice(e,t,new Array(n.length).fill(!1));let o=new Set(i),s=n.map(a=>o.has(this.identityProvider.getId(a).toString()));this.trait.splice(e,t,s)}};function FI(r,e){return r.classList.contains(e)?!0:r.classList.contains("monaco-list")||!r.parentElement?!1:FI(r.parentElement,e)}function Lf(r){return FI(r,"monaco-editor")}function U5(r){return FI(r,"monaco-custom-toggle")}function z5(r){return FI(r,"action-item")}function Rf(r){return FI(r,"monaco-tree-sticky-row")}function Mf(r){return r.classList.contains("monaco-tree-sticky-container")}function JP(r){return r.tagName==="A"&&r.classList.contains("monaco-button")||r.tagName==="DIV"&&r.classList.contains("monaco-button-dropdown")?!0:r.classList.contains("monaco-list")||!r.parentElement?!1:JP(r.parentElement)}var Ow=class{constructor(e,t,n){this.list=e;this.view=t;this.multipleSelectionSupport=n.multipleSelectionSupport,this.disposables.add(this.onKeyDown(i=>{switch(i.keyCode){case 3:return this.onEnter(i);case 16:return this.onUpArrow(i);case 18:return this.onDownArrow(i);case 11:return this.onPageUpArrow(i);case 12:return this.onPageDownArrow(i);case 9:return this.onEscape(i);case 31:this.multipleSelectionSupport&&(Pe?i.metaKey:i.ctrlKey)&&this.onCtrlA(i)}}))}disposables=new X;multipleSelectionDisposables=new X;multipleSelectionSupport;get onKeyDown(){return z.chain(this.disposables.add(new He(this.view.domNode,"keydown")).event,e=>e.filter(t=>!is(t.target)).map(t=>new it(t)))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(ki(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}};_([be],Ow.prototype,"onKeyDown",1);var CY=new class{mightProducePrintableCharacter(r){return r.ctrlKey||r.metaKey||r.altKey?!1:r.keyCode>=31&&r.keyCode<=56||r.keyCode>=21&&r.keyCode<=30||r.keyCode>=98&&r.keyCode<=107||r.keyCode>=85&&r.keyCode<=95}},$P=class{constructor(e,t,n,i,o){this.list=e;this.view=t;this.keyboardNavigationLabelProvider=n;this.keyboardNavigationEventFilter=i;this.delegate=o;this.updateOptions(e.options)}enabled=!1;state=0;mode=0;triggered=!1;previouslyFocused=-1;enabledDisposables=new X;disposables=new X;updateOptions(e){e.typeNavigationEnabled??!0?this.enable():this.disable(),this.mode=e.typeNavigationMode??0}trigger(){this.triggered=!this.triggered}enable(){if(this.enabled)return;let e=!1,t=z.chain(this.enabledDisposables.add(new He(this.view.domNode,"keydown")).event,o=>o.filter(s=>!is(s.target)).filter(()=>this.mode===0||this.triggered).map(s=>new it(s)).filter(s=>e||this.keyboardNavigationEventFilter(s)).filter(s=>this.delegate.mightProducePrintableCharacter(s)).forEach(s=>qe.stop(s,!0)).map(s=>s.browserEvent.key)),n=z.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);z.reduce(z.any(t,n),(o,s)=>s===null?null:(o||"")+s,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),n(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),n(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){let e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){let t=this.list.options.accessibilityProvider?.getAriaLabel(this.list.element(e[0]));typeof t=="string"?ca(t):t&&ca(t.get())}this.previouslyFocused=-1}onInput(e){if(!e){this.state=0,this.triggered=!1;return}let t=this.list.getFocus(),n=t.length>0?t[0]:0,i=this.state===0?1:0;this.state=1;for(let o=0;o<this.list.length;o++){let s=(n+o+i)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(s)),l=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(typeof l<"u"){if(ku(e,l)){this.previouslyFocused=n,this.list.setFocus([s]),this.list.reveal(s);return}let d=PU(e,l);if(d&&d[0].end-d[0].start>1&&d.length===1){this.previouslyFocused=n,this.list.setFocus([s]),this.list.reveal(s);return}}}else if(typeof l>"u"||ku(e,l)){this.previouslyFocused=n,this.list.setFocus([s]),this.list.reveal(s);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}},qP=class{constructor(e,t){this.list=e;this.view=t;let n=z.chain(this.disposables.add(new He(t.domNode,"keydown")).event,o=>o.filter(s=>!is(s.target)).map(s=>new it(s)));z.chain(n,o=>o.filter(s=>s.keyCode===2&&!s.ctrlKey&&!s.metaKey&&!s.shiftKey&&!s.altKey))(this.onTab,this,this.disposables)}disposables=new X;onTab(e){if(e.target!==this.view.domNode)return;let t=this.list.getFocus();if(t.length===0)return;let n=this.view.domElement(t[0]);if(!n)return;let i=n.querySelector("[tabIndex]");if(!i||!Yn(i)||i.tabIndex===-1)return;let o=Ee(i).getComputedStyle(i);o.visibility==="hidden"||o.display==="none"||(e.preventDefault(),e.stopPropagation(),i.focus())}dispose(){this.disposables.dispose()}};function eA(r){return Pe?r.browserEvent.metaKey:r.browserEvent.ctrlKey}function tA(r){return r.browserEvent.shiftKey}function xY(r){return cE(r)&&r.button===2}var V5={isSelectionSingleChangeEvent:eA,isSelectionRangeChangeEvent:tA},NI=class{constructor(e){this.list=e;e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||V5),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(Jn.addTarget(e.getHTMLElement()))),z.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}multipleSelectionController;mouseSupport;disposables=new X;_onPointer=new T;onPointer=this._onPointer.event;updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||V5))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){Lf(e.browserEvent.target)||mr()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(is(e.browserEvent.target)||Lf(e.browserEvent.target))return;let t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||is(e.browserEvent.target)||Lf(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;let t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),xY(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(is(e.browserEvent.target)||Lf(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;let t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){let t=e.index,n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){typeof n>"u"&&(n=this.list.getFocus()[0]??t,this.list.setAnchor(n));let i=Math.min(n,t),o=Math.max(n,t),s=ki(i,o+1),a=this.list.getSelection(),l=TY(YP(a,[n]),n);if(l.length===0)return;let d=YP(s,wY(a,l));this.list.setSelection(d,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){let i=this.list.getSelection(),o=i.filter(s=>s!==t);this.list.setFocus([t]),this.list.setAnchor(t),i.length===o.length?this.list.setSelection([...o,t],e.browserEvent):this.list.setSelection(o,e.browserEvent)}}dispose(){this.disposables.dispose()}},tp=class{constructor(e,t){this.styleElement=e;this.selectorSuffix=t}style(e){let t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);let i=As(e.listFocusAndSelectionOutline,As(e.listSelectionOutline,e.listFocusOutline??""));i&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused.selected { outline: 1px solid ${i}; outline-offset: -1px;}`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);let o=As(e.listSelectionOutline,e.listInactiveFocusOutline??"");o&&n.push(`.monaco-list${t} .monaco-list-row.focused.selected { outline: 1px dotted ${o}; outline-offset: -1px; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }
			`),e.listDropBetweenBackground&&(n.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${t} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`),n.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${t} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`)),e.tableColumnsBorder&&n.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&n.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=n.join(`
`)}},Pw={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:H.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:H.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:H.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},EY={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function TY(r,e){let t=r.indexOf(e);if(t===-1)return[];let n=[],i=t-1;for(;i>=0&&r[i]===e-(t-i);)n.push(r[i--]);for(n.reverse(),i=t;i<r.length&&r[i]===e+(i-t);)n.push(r[i++]);return n}function YP(r,e){let t=[],n=0,i=0;for(;n<r.length||i<e.length;)if(n>=r.length)t.push(e[i++]);else if(i>=e.length)t.push(r[n++]);else if(r[n]===e[i]){t.push(r[n]),n++,i++;continue}else r[n]<e[i]?t.push(r[n++]):t.push(e[i++]);return t}function wY(r,e){let t=[],n=0,i=0;for(;n<r.length||i<e.length;)if(n>=r.length)t.push(e[i++]);else if(i>=e.length)t.push(r[n++]);else if(r[n]===e[i]){n++,i++;continue}else r[n]<e[i]?t.push(r[n++]):i++;return t}var H5=(r,e)=>r-e,XP=class{constructor(e,t){this._templateId=e;this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,i){let o=0;for(let s of this.renderers)s.renderElement(e,t,n[o++],i)}disposeElement(e,t,n,i){let o=0;for(let s of this.renderers)s.disposeElement?.(e,t,n[o],i),o+=1}disposeTemplate(e){let t=0;for(let n of this.renderers)n.disposeTemplate(e[t++])}},QP=class{constructor(e){this.accessibilityProvider=e}templateId="a18n";renderTemplate(e){return{container:e,disposables:new X}}renderElement(e,t,n){let i=this.accessibilityProvider.getAriaLabel(e),o=i&&typeof i!="string"?i:Hv(i);n.disposables.add(Zr(a=>{this.setAriaLabel(a.readObservable(o),n.container)}));let s=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof s=="number"?n.container.setAttribute("aria-level",`${s}`):n.container.removeAttribute("aria-level")}setAriaLabel(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}disposeElement(e,t,n,i){n.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}},ZP=class{constructor(e,t){this.list=e;this.dnd=t}getDragElements(e){let t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart?.(e,t)}onDragOver(e,t,n,i,o){return this.dnd.onDragOver(e,t,n,i,o)}onDragLeave(e,t,n,i){this.dnd.onDragLeave?.(e,t,n,i)}onDragEnd(e){this.dnd.onDragEnd?.(e)}drop(e,t,n,i,o){this.dnd.drop(e,t,n,i,o)}dispose(){this.dnd.dispose()}},Ei=class{constructor(e,t,n,i,o=EY){this.user=e;this._options=o;let s=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?this._options.accessibilityProvider?.getWidgetRole():"list";this.selection=new jP(s!=="listbox");let a=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=o.accessibilityProvider,this.accessibilityProvider&&(a.push(new QP(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant?.(this.onDidChangeActiveDescendant,this,this.disposables)),i=i.map(d=>new XP(d.templateId,[...a,d]));let l={...o,dnd:o.dnd&&new ZP(this,o.dnd)};if(this.view=this.createListView(t,n,i,l),this.view.domNode.setAttribute("role",s),o.styleController)this.styleController=o.styleController(this.view.domId);else{let d=No(this.view.domNode);this.styleController=new tp(d,this.view.domId)}if(this.spliceable=new _w([new AI(this.focus,this.view,o.identityProvider),new AI(this.selection,this.view,o.identityProvider),new AI(this.anchor,this.view,o.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new qP(this,this.view)),(typeof o.keyboardSupport!="boolean"||o.keyboardSupport)&&(this.keyboardController=new Ow(this,this.view,o),this.disposables.add(this.keyboardController)),o.keyboardNavigationLabelProvider){let d=o.keyboardNavigationDelegate||CY;this.typeNavigationController=new $P(this,this.view,o.keyboardNavigationLabelProvider,o.keyboardNavigationEventFilter??(()=>!0),d),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(o),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}focus=new kf("focused");selection;anchor=new kf("anchor");eventBufferer=new iu;view;spliceable;styleController;typeNavigationController;accessibilityProvider;keyboardController;mouseController;_ariaLabel="";disposables=new X;get onDidChangeFocus(){return z.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return z.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseUp(){return this.view.onMouseUp}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseMove(){return this.view.onMouseMove}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1,t=z.chain(this.disposables.add(new He(this.view.domNode,"keydown")).event,o=>o.map(s=>new it(s)).filter(s=>e=s.keyCode===58||s.shiftKey&&s.keyCode===68).map(s=>qe.stop(s,!0)).filter(()=>!1)),n=z.chain(this.disposables.add(new He(this.view.domNode,"keyup")).event,o=>o.forEach(()=>e=!1).map(s=>new it(s)).filter(s=>s.keyCode===58||s.shiftKey&&s.keyCode===68).map(s=>qe.stop(s,!0)).map(({browserEvent:s})=>{let a=this.getFocus(),l=a.length?a[0]:void 0,d=typeof l<"u"?this.view.element(l):void 0,c=typeof l<"u"?this.view.domElement(l):this.view.domNode;return{index:l,element:d,anchor:c,browserEvent:s}})),i=z.chain(this.view.onContextMenu,o=>o.filter(s=>!e).map(({element:s,index:a,browserEvent:l})=>({element:s,index:a,anchor:new hr(Ee(this.view.domNode),l),browserEvent:l})));return z.any(t,n,i)}get onKeyDown(){return this.disposables.add(new He(this.view.domNode,"keydown")).event}get onKeyUp(){return this.disposables.add(new He(this.view.domNode,"keyup")).event}get onKeyPress(){return this.disposables.add(new He(this.view.domNode,"keypress")).event}get onDidFocus(){return z.signal(this.disposables.add(new He(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return z.signal(this.disposables.add(new He(this.view.domNode,"blur",!0)).event)}_onDidDispose=new T;onDidDispose=this._onDidDispose.event;createListView(e,t,n,i){return new Rw(e,t,n,i)}createMouseController(e){return new NI(this)}updateOptions(e={}){this._options={...this._options,...e},this.typeNavigationController?.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),this.keyboardController?.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new ld(this.user,`Invalid start index: ${e}`);if(t<0)throw new ld(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}updateWidth(e){this.view.updateWidth(e)}updateElementHeight(e,t){this.view.updateElementHeight(e,t,null)}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get contentWidth(){return this.view.contentWidth}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.view.onDidChangeContentWidth}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollLeft(){return this.view.getScrollLeft()}set scrollLeft(e){this.view.setScrollLeft(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get firstMostlyVisibleIndex(){return this.view.firstMostlyVisibleIndex}get lastVisibleIndex(){return this.view.lastVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}triggerTypeNavigation(){this.typeNavigationController?.trigger()}setSelection(e,t){for(let n of e)if(n<0||n>=this.length)throw new ld(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new ld(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return this.anchor.get().at(0)}getAnchorElement(){let e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(let n of e)if(n<0||n>=this.length)throw new ld(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,i){if(this.length===0)return;let o=this.focus.get(),s=this.findNextIndex(o.length>0?o[0]+e:0,t,i);s>-1&&this.setFocus([s],n)}focusPrevious(e=1,t=!1,n,i){if(this.length===0)return;let o=this.focus.get(),s=this.findPreviousIndex(o.length>0?o[0]-e:0,t,i);s>-1&&this.setFocus([s],n)}async focusNextPage(e,t){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;let i=this.getFocus()[0];if(i!==n&&(i===void 0||n>i)){let o=this.findPreviousIndex(n,!1,t);o>-1&&i!==o?this.setFocus([o],e):this.setFocus([n],e)}else{let o=this.view.getScrollTop(),s=o+this.view.renderHeight;n>i&&(s-=this.view.elementHeight(n)),this.view.setScrollTop(s),this.view.getScrollTop()!==o&&(this.setFocus([]),await po(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t,n=()=>0){let i,o=n(),s=this.view.getScrollTop()+o;s===0?i=this.view.indexAt(s):i=this.view.indexAfter(s-1);let a=this.getFocus()[0];if(a!==i&&(a===void 0||a>=i)){let l=this.findNextIndex(i,!1,t);l>-1&&a!==l?this.setFocus([l],e):this.setFocus([i],e)}else{let l=s;this.view.setScrollTop(s-this.view.renderHeight-o),this.view.getScrollTop()+n()!==l&&(this.setFocus([]),await po(0),await this.focusPreviousPage(e,t,n))}}focusLast(e,t){if(this.length===0)return;let n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;let i=this.findNextIndex(e,!1,n);i>-1&&this.setFocus([i],t)}findNextIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let i=0;i<this.length;i++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t,n=0){if(e<0||e>=this.length)throw new ld(this.user,`Invalid index ${e}`);let i=this.view.getScrollTop(),o=this.view.elementTop(e),s=this.view.elementHeight(e);if(Uo(t)){let a=s-this.view.renderHeight+n;this.view.setScrollTop(a*qn(t,0,1)+o-n)}else{let a=o+s,l=i+this.view.renderHeight;o<i+n&&a>=l||(o<i+n||a>=l&&s>=this.view.renderHeight?this.view.setScrollTop(o-n):a>=l&&this.view.setScrollTop(a-this.view.renderHeight))}}getRelativeTop(e,t=0){if(e<0||e>=this.length)throw new ld(this.user,`Invalid index ${e}`);let n=this.view.getScrollTop(),i=this.view.elementTop(e),o=this.view.elementHeight(e);if(i<n+t||i+o>n+this.view.renderHeight)return null;let s=o-this.view.renderHeight+t;return Math.abs((n+t-i)/s)}isDOMFocused(){return fr(this.view.domNode)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){let e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){let e=this.focus.get();if(e.length>0){let t;this.accessibilityProvider?.getActiveDescendantId&&(t=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute("aria-activedescendant",t||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){let e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}};_([be],Ei.prototype,"onDidChangeFocus",1),_([be],Ei.prototype,"onDidChangeSelection",1),_([be],Ei.prototype,"onContextMenu",1),_([be],Ei.prototype,"onKeyDown",1),_([be],Ei.prototype,"onKeyUp",1),_([be],Ei.prototype,"onKeyPress",1),_([be],Ei.prototype,"onDidFocus",1),_([be],Ei.prototype,"onDidBlur",1);var _Y=new RegExp(`(\\\\)?\\$\\((${Ae.iconNameExpression}(?:${Ae.iconModifierExpression})?)\\)`,"g");function dd(r){let e=new Array,t,n=0,i=0;for(;(t=_Y.exec(r))!==null;){i=t.index||0,n<i&&e.push(r.substring(n,i)),n=(t.index||0)+t[0].length;let[,o,s]=t;e.push(o?`$(${s})`:DY({id:s}))}return n<r.length&&e.push(r.substring(n)),e}function DY(r){let e=ie("span");return e.classList.add(...Ae.asClassNameArray(r)),e}var nA=class{_prefix;_lastId;constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}},iA=new nA("id#");var vo={};(function(){function r(e,t){t(vo)}r.amd=!0,function(e,t){typeof r=="function"&&r.amd?r(["exports"],t):typeof exports=="object"&&typeof module<"u"?t(exports):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){"use strict";function t(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}e.defaults=t();function n(Ze){e.defaults=Ze}let i=/[&<>"']/,o=new RegExp(i.source,"g"),s=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,a=new RegExp(s.source,"g"),l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},d=Ze=>l[Ze];function c(Ze,L){if(L){if(i.test(Ze))return Ze.replace(o,d)}else if(s.test(Ze))return Ze.replace(a,d);return Ze}let p=/(^|[^\[])\^/g;function h(Ze,L){let k=typeof Ze=="string"?Ze:Ze.source;L=L||"";let A={replace:(V,G)=>{let te=typeof G=="string"?G:G.source;return te=te.replace(p,"$1"),k=k.replace(V,te),A},getRegex:()=>new RegExp(k,L)};return A}function g(Ze){try{Ze=encodeURI(Ze).replace(/%25/g,"%")}catch{return null}return Ze}let f={exec:()=>null};function m(Ze,L){let k=Ze.replace(/\|/g,(G,te,le)=>{let Le=!1,Oe=te;for(;--Oe>=0&&le[Oe]==="\\";)Le=!Le;return Le?"|":" |"}),A=k.split(/ \|/),V=0;if(A[0].trim()||A.shift(),A.length>0&&!A[A.length-1].trim()&&A.pop(),L)if(A.length>L)A.splice(L);else for(;A.length<L;)A.push("");for(;V<A.length;V++)A[V]=A[V].trim().replace(/\\\|/g,"|");return A}function b(Ze,L,k){let A=Ze.length;if(A===0)return"";let V=0;for(;V<A;){let G=Ze.charAt(A-V-1);if(G===L&&!k)V++;else if(G!==L&&k)V++;else break}return Ze.slice(0,A-V)}function v(Ze,L){if(Ze.indexOf(L[1])===-1)return-1;let k=0;for(let A=0;A<Ze.length;A++)if(Ze[A]==="\\")A++;else if(Ze[A]===L[0])k++;else if(Ze[A]===L[1]&&(k--,k<0))return A;return-1}function S(Ze,L,k,A){let V=L.href,G=L.title?c(L.title):null,te=Ze[1].replace(/\\([\[\]])/g,"$1");if(Ze[0].charAt(0)!=="!"){A.state.inLink=!0;let le={type:"link",raw:k,href:V,title:G,text:te,tokens:A.inlineTokens(te)};return A.state.inLink=!1,le}return{type:"image",raw:k,href:V,title:G,text:c(te)}}function x(Ze,L){let k=Ze.match(/^(\s+)(?:```)/);if(k===null)return L;let A=k[1];return L.split(`
`).map(V=>{let G=V.match(/^\s+/);if(G===null)return V;let[te]=G;return te.length>=A.length?V.slice(A.length):V}).join(`
`)}class E{options;rules;lexer;constructor(L){this.options=L||e.defaults}space(L){let k=this.rules.block.newline.exec(L);if(k&&k[0].length>0)return{type:"space",raw:k[0]}}code(L){let k=this.rules.block.code.exec(L);if(k){let A=k[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:k[0],codeBlockStyle:"indented",text:this.options.pedantic?A:b(A,`
`)}}}fences(L){let k=this.rules.block.fences.exec(L);if(k){let A=k[0],V=x(A,k[3]||"");return{type:"code",raw:A,lang:k[2]?k[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):k[2],text:V}}}heading(L){let k=this.rules.block.heading.exec(L);if(k){let A=k[2].trim();if(/#$/.test(A)){let V=b(A,"#");(this.options.pedantic||!V||/ $/.test(V))&&(A=V.trim())}return{type:"heading",raw:k[0],depth:k[1].length,text:A,tokens:this.lexer.inline(A)}}}hr(L){let k=this.rules.block.hr.exec(L);if(k)return{type:"hr",raw:b(k[0],`
`)}}blockquote(L){let k=this.rules.block.blockquote.exec(L);if(k){let A=b(k[0],`
`).split(`
`),V="",G="",te=[];for(;A.length>0;){let le=!1,Le=[],Oe;for(Oe=0;Oe<A.length;Oe++)if(/^ {0,3}>/.test(A[Oe]))Le.push(A[Oe]),le=!0;else if(!le)Le.push(A[Oe]);else break;A=A.slice(Oe);let ut=Le.join(`
`),Nt=ut.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");V=V?`${V}
${ut}`:ut,G=G?`${G}
${Nt}`:Nt;let Tn=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(Nt,te,!0),this.lexer.state.top=Tn,A.length===0)break;let gi=te[te.length-1];if(gi?.type==="code")break;if(gi?.type==="blockquote"){let An=gi,Ke=An.raw+`
`+A.join(`
`),Y=this.blockquote(Ke);te[te.length-1]=Y,V=V.substring(0,V.length-An.raw.length)+Y.raw,G=G.substring(0,G.length-An.text.length)+Y.text;break}else if(gi?.type==="list"){let An=gi,Ke=An.raw+`
`+A.join(`
`),Y=this.list(Ke);te[te.length-1]=Y,V=V.substring(0,V.length-gi.raw.length)+Y.raw,G=G.substring(0,G.length-An.raw.length)+Y.raw,A=Ke.substring(te[te.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:V,tokens:te,text:G}}}list(L){let k=this.rules.block.list.exec(L);if(k){let A=k[1].trim(),V=A.length>1,G={type:"list",raw:"",ordered:V,start:V?+A.slice(0,-1):"",loose:!1,items:[]};A=V?`\\d{1,9}\\${A.slice(-1)}`:`\\${A}`,this.options.pedantic&&(A=V?A:"[*+-]");let te=new RegExp(`^( {0,3}${A})((?:[	 ][^\\n]*)?(?:\\n|$))`),le=!1;for(;L;){let Le=!1,Oe="",ut="";if(!(k=te.exec(L))||this.rules.block.hr.test(L))break;Oe=k[0],L=L.substring(Oe.length);let Nt=k[2].split(`
`,1)[0].replace(/^\t+/,xe=>" ".repeat(3*xe.length)),Tn=L.split(`
`,1)[0],gi=!Nt.trim(),An=0;if(this.options.pedantic?(An=2,ut=Nt.trimStart()):gi?An=k[1].length+1:(An=k[2].search(/[^ ]/),An=An>4?1:An,ut=Nt.slice(An),An+=k[1].length),gi&&/^ *$/.test(Tn)&&(Oe+=Tn+`
`,L=L.substring(Tn.length+1),Le=!0),!Le){let xe=new RegExp(`^ {0,${Math.min(3,An-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),Fe=new RegExp(`^ {0,${Math.min(3,An-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),gn=new RegExp(`^ {0,${Math.min(3,An-1)}}(?:\`\`\`|~~~)`),Di=new RegExp(`^ {0,${Math.min(3,An-1)}}#`);for(;L;){let cr=L.split(`
`,1)[0];if(Tn=cr,this.options.pedantic&&(Tn=Tn.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),gn.test(Tn)||Di.test(Tn)||xe.test(Tn)||Fe.test(L))break;if(Tn.search(/[^ ]/)>=An||!Tn.trim())ut+=`
`+Tn.slice(An);else{if(gi||Nt.search(/[^ ]/)>=4||gn.test(Nt)||Di.test(Nt)||Fe.test(Nt))break;ut+=`
`+Tn}!gi&&!Tn.trim()&&(gi=!0),Oe+=cr+`
`,L=L.substring(cr.length+1),Nt=Tn.slice(An)}}G.loose||(le?G.loose=!0:/\n *\n *$/.test(Oe)&&(le=!0));let Ke=null,Y;this.options.gfm&&(Ke=/^\[[ xX]\] /.exec(ut),Ke&&(Y=Ke[0]!=="[ ] ",ut=ut.replace(/^\[[ xX]\] +/,""))),G.items.push({type:"list_item",raw:Oe,task:!!Ke,checked:Y,loose:!1,text:ut,tokens:[]}),G.raw+=Oe}G.items[G.items.length-1].raw=G.items[G.items.length-1].raw.trimEnd(),G.items[G.items.length-1].text=G.items[G.items.length-1].text.trimEnd(),G.raw=G.raw.trimEnd();for(let Le=0;Le<G.items.length;Le++)if(this.lexer.state.top=!1,G.items[Le].tokens=this.lexer.blockTokens(G.items[Le].text,[]),!G.loose){let Oe=G.items[Le].tokens.filter(Nt=>Nt.type==="space"),ut=Oe.length>0&&Oe.some(Nt=>/\n.*\n/.test(Nt.raw));G.loose=ut}if(G.loose)for(let Le=0;Le<G.items.length;Le++)G.items[Le].loose=!0;return G}}html(L){let k=this.rules.block.html.exec(L);if(k)return{type:"html",block:!0,raw:k[0],pre:k[1]==="pre"||k[1]==="script"||k[1]==="style",text:k[0]}}def(L){let k=this.rules.block.def.exec(L);if(k){let A=k[1].toLowerCase().replace(/\s+/g," "),V=k[2]?k[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",G=k[3]?k[3].substring(1,k[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):k[3];return{type:"def",tag:A,raw:k[0],href:V,title:G}}}table(L){let k=this.rules.block.table.exec(L);if(!k||!/[:|]/.test(k[2]))return;let A=m(k[1]),V=k[2].replace(/^\||\| *$/g,"").split("|"),G=k[3]&&k[3].trim()?k[3].replace(/\n[ \t]*$/,"").split(`
`):[],te={type:"table",raw:k[0],header:[],align:[],rows:[]};if(A.length===V.length){for(let le of V)/^ *-+: *$/.test(le)?te.align.push("right"):/^ *:-+: *$/.test(le)?te.align.push("center"):/^ *:-+ *$/.test(le)?te.align.push("left"):te.align.push(null);for(let le=0;le<A.length;le++)te.header.push({text:A[le],tokens:this.lexer.inline(A[le]),header:!0,align:te.align[le]});for(let le of G)te.rows.push(m(le,te.header.length).map((Le,Oe)=>({text:Le,tokens:this.lexer.inline(Le),header:!1,align:te.align[Oe]})));return te}}lheading(L){let k=this.rules.block.lheading.exec(L);if(k)return{type:"heading",raw:k[0],depth:k[2].charAt(0)==="="?1:2,text:k[1],tokens:this.lexer.inline(k[1])}}paragraph(L){let k=this.rules.block.paragraph.exec(L);if(k){let A=k[1].charAt(k[1].length-1)===`
`?k[1].slice(0,-1):k[1];return{type:"paragraph",raw:k[0],text:A,tokens:this.lexer.inline(A)}}}text(L){let k=this.rules.block.text.exec(L);if(k)return{type:"text",raw:k[0],text:k[0],tokens:this.lexer.inline(k[0])}}escape(L){let k=this.rules.inline.escape.exec(L);if(k)return{type:"escape",raw:k[0],text:c(k[1])}}tag(L){let k=this.rules.inline.tag.exec(L);if(k)return!this.lexer.state.inLink&&/^<a /i.test(k[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(k[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(k[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(k[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:k[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:k[0]}}link(L){let k=this.rules.inline.link.exec(L);if(k){let A=k[2].trim();if(!this.options.pedantic&&/^</.test(A)){if(!/>$/.test(A))return;let te=b(A.slice(0,-1),"\\");if((A.length-te.length)%2===0)return}else{let te=v(k[2],"()");if(te>-1){let Le=(k[0].indexOf("!")===0?5:4)+k[1].length+te;k[2]=k[2].substring(0,te),k[0]=k[0].substring(0,Le).trim(),k[3]=""}}let V=k[2],G="";if(this.options.pedantic){let te=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(V);te&&(V=te[1],G=te[3])}else G=k[3]?k[3].slice(1,-1):"";return V=V.trim(),/^</.test(V)&&(this.options.pedantic&&!/>$/.test(A)?V=V.slice(1):V=V.slice(1,-1)),S(k,{href:V&&V.replace(this.rules.inline.anyPunctuation,"$1"),title:G&&G.replace(this.rules.inline.anyPunctuation,"$1")},k[0],this.lexer)}}reflink(L,k){let A;if((A=this.rules.inline.reflink.exec(L))||(A=this.rules.inline.nolink.exec(L))){let V=(A[2]||A[1]).replace(/\s+/g," "),G=k[V.toLowerCase()];if(!G){let te=A[0].charAt(0);return{type:"text",raw:te,text:te}}return S(A,G,A[0],this.lexer)}}emStrong(L,k,A=""){let V=this.rules.inline.emStrongLDelim.exec(L);if(!V||V[3]&&A.match(/[\p{L}\p{N}]/u))return;if(!(V[1]||V[2]||"")||!A||this.rules.inline.punctuation.exec(A)){let te=[...V[0]].length-1,le,Le,Oe=te,ut=0,Nt=V[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(Nt.lastIndex=0,k=k.slice(-1*L.length+te);(V=Nt.exec(k))!=null;){if(le=V[1]||V[2]||V[3]||V[4]||V[5]||V[6],!le)continue;if(Le=[...le].length,V[3]||V[4]){Oe+=Le;continue}else if((V[5]||V[6])&&te%3&&!((te+Le)%3)){ut+=Le;continue}if(Oe-=Le,Oe>0)continue;Le=Math.min(Le,Le+Oe+ut);let Tn=[...V[0]][0].length,gi=L.slice(0,te+V.index+Tn+Le);if(Math.min(te,Le)%2){let Ke=gi.slice(1,-1);return{type:"em",raw:gi,text:Ke,tokens:this.lexer.inlineTokens(Ke)}}let An=gi.slice(2,-2);return{type:"strong",raw:gi,text:An,tokens:this.lexer.inlineTokens(An)}}}}codespan(L){let k=this.rules.inline.code.exec(L);if(k){let A=k[2].replace(/\n/g," "),V=/[^ ]/.test(A),G=/^ /.test(A)&&/ $/.test(A);return V&&G&&(A=A.substring(1,A.length-1)),A=c(A,!0),{type:"codespan",raw:k[0],text:A}}}br(L){let k=this.rules.inline.br.exec(L);if(k)return{type:"br",raw:k[0]}}del(L){let k=this.rules.inline.del.exec(L);if(k)return{type:"del",raw:k[0],text:k[2],tokens:this.lexer.inlineTokens(k[2])}}autolink(L){let k=this.rules.inline.autolink.exec(L);if(k){let A,V;return k[2]==="@"?(A=c(k[1]),V="mailto:"+A):(A=c(k[1]),V=A),{type:"link",raw:k[0],text:A,href:V,tokens:[{type:"text",raw:A,text:A}]}}}url(L){let k;if(k=this.rules.inline.url.exec(L)){let A,V;if(k[2]==="@")A=c(k[0]),V="mailto:"+A;else{let G;do G=k[0],k[0]=this.rules.inline._backpedal.exec(k[0])?.[0]??"";while(G!==k[0]);A=c(k[0]),k[1]==="www."?V="http://"+k[0]:V=k[0]}return{type:"link",raw:k[0],text:A,href:V,tokens:[{type:"text",raw:A,text:A}]}}}inlineText(L){let k=this.rules.inline.text.exec(L);if(k){let A;return this.lexer.state.inRawBlock?A=k[0]:A=c(k[0]),{type:"text",raw:k[0],text:A}}}}let w=/^(?: *(?:\n|$))+/,P=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,R=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,O=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,M=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,K=/(?:[*+-]|\d{1,9}[.)])/,$=h(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,K).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),Q=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,he=/^[^\n]+/,De=/(?!\s*\])(?:\\.|[^\[\]\\])+/,ce=h(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",De).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),se=h(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,K).getRegex(),fe="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ue=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,ae=h("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",ue).replace("tag",fe).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ke=h(Q).replace("hr",O).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fe).getRegex(),wt={blockquote:h(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",ke).getRegex(),code:P,def:ce,fences:R,heading:M,hr:O,html:ae,lheading:$,list:se,newline:w,paragraph:ke,table:f,text:he},ht=h("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",O).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fe).getRegex(),Ue={...wt,table:ht,paragraph:h(Q).replace("hr",O).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",ht).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",fe).getRegex()},co={...wt,html:h(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ue).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:f,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:h(Q).replace("hr",O).replace("heading",` *#{1,6} *[^
]`).replace("lheading",$).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},_i=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,kr=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,qr=/^( {2,}|\\)\n(?!\s*$)/,Qc=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,Do="\\p{P}\\p{S}",Ta=h(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,Do).getRegex(),Hp=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,Zc=h(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,Do).getRegex(),Lo=h("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,Do).getRegex(),Jc=h("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,Do).getRegex(),eu=h(/\\([punct])/,"gu").replace(/punct/g,Do).getRegex(),om=h(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),rm=h(ue).replace("(?:-->|$)","-->").getRegex(),Xe=h("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",rm).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Gd=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,tu=h(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Gd).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Sl=h(/^!?\[(label)\]\[(ref)\]/).replace("label",Gd).replace("ref",De).getRegex(),$s=h(/^!?\[(ref)\](?:\[\])?/).replace("ref",De).getRegex(),Av=h("reflink|nolink(?!\\()","g").replace("reflink",Sl).replace("nolink",$s).getRegex(),Up={_backpedal:f,anyPunctuation:eu,autolink:om,blockSkip:Hp,br:qr,code:kr,del:f,emStrongLDelim:Zc,emStrongRDelimAst:Lo,emStrongRDelimUnd:Jc,escape:_i,link:tu,nolink:$s,punctuation:Ta,reflink:Sl,reflinkSearch:Av,tag:Xe,text:Qc,url:f},Nv={...Up,link:h(/^!?\[(label)\]\((.*?)\)/).replace("label",Gd).getRegex(),reflink:h(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Gd).getRegex()},Cl={...Up,escape:h(_i).replace("])","~|])").getRegex(),url:h(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Fv={...Cl,br:h(qr).replace("{2,}","*").getRegex(),text:h(Cl.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},xl={normal:wt,gfm:Ue,pedantic:co},Es={normal:Up,gfm:Cl,breaks:Fv,pedantic:Nv};class hi{tokens;options;state;tokenizer;inlineQueue;constructor(L){this.tokens=[],this.tokens.links=Object.create(null),this.options=L||e.defaults,this.options.tokenizer=this.options.tokenizer||new E,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let k={block:xl.normal,inline:Es.normal};this.options.pedantic?(k.block=xl.pedantic,k.inline=Es.pedantic):this.options.gfm&&(k.block=xl.gfm,this.options.breaks?k.inline=Es.breaks:k.inline=Es.gfm),this.tokenizer.rules=k}static get rules(){return{block:xl,inline:Es}}static lex(L,k){return new hi(k).lex(L)}static lexInline(L,k){return new hi(k).inlineTokens(L)}lex(L){L=L.replace(/\r\n|\r/g,`
`),this.blockTokens(L,this.tokens);for(let k=0;k<this.inlineQueue.length;k++){let A=this.inlineQueue[k];this.inlineTokens(A.src,A.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(L,k=[],A=!1){this.options.pedantic?L=L.replace(/\t/g,"    ").replace(/^ +$/gm,""):L=L.replace(/^( *)(\t+)/gm,(le,Le,Oe)=>Le+"    ".repeat(Oe.length));let V,G,te;for(;L;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(le=>(V=le.call({lexer:this},L,k))?(L=L.substring(V.raw.length),k.push(V),!0):!1))){if(V=this.tokenizer.space(L)){L=L.substring(V.raw.length),V.raw.length===1&&k.length>0?k[k.length-1].raw+=`
`:k.push(V);continue}if(V=this.tokenizer.code(L)){L=L.substring(V.raw.length),G=k[k.length-1],G&&(G.type==="paragraph"||G.type==="text")?(G.raw+=`
`+V.raw,G.text+=`
`+V.text,this.inlineQueue[this.inlineQueue.length-1].src=G.text):k.push(V);continue}if(V=this.tokenizer.fences(L)){L=L.substring(V.raw.length),k.push(V);continue}if(V=this.tokenizer.heading(L)){L=L.substring(V.raw.length),k.push(V);continue}if(V=this.tokenizer.hr(L)){L=L.substring(V.raw.length),k.push(V);continue}if(V=this.tokenizer.blockquote(L)){L=L.substring(V.raw.length),k.push(V);continue}if(V=this.tokenizer.list(L)){L=L.substring(V.raw.length),k.push(V);continue}if(V=this.tokenizer.html(L)){L=L.substring(V.raw.length),k.push(V);continue}if(V=this.tokenizer.def(L)){L=L.substring(V.raw.length),G=k[k.length-1],G&&(G.type==="paragraph"||G.type==="text")?(G.raw+=`
`+V.raw,G.text+=`
`+V.raw,this.inlineQueue[this.inlineQueue.length-1].src=G.text):this.tokens.links[V.tag]||(this.tokens.links[V.tag]={href:V.href,title:V.title});continue}if(V=this.tokenizer.table(L)){L=L.substring(V.raw.length),k.push(V);continue}if(V=this.tokenizer.lheading(L)){L=L.substring(V.raw.length),k.push(V);continue}if(te=L,this.options.extensions&&this.options.extensions.startBlock){let le=1/0,Le=L.slice(1),Oe;this.options.extensions.startBlock.forEach(ut=>{Oe=ut.call({lexer:this},Le),typeof Oe=="number"&&Oe>=0&&(le=Math.min(le,Oe))}),le<1/0&&le>=0&&(te=L.substring(0,le+1))}if(this.state.top&&(V=this.tokenizer.paragraph(te))){G=k[k.length-1],A&&G?.type==="paragraph"?(G.raw+=`
`+V.raw,G.text+=`
`+V.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=G.text):k.push(V),A=te.length!==L.length,L=L.substring(V.raw.length);continue}if(V=this.tokenizer.text(L)){L=L.substring(V.raw.length),G=k[k.length-1],G&&G.type==="text"?(G.raw+=`
`+V.raw,G.text+=`
`+V.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=G.text):k.push(V);continue}if(L){let le="Infinite loop on byte: "+L.charCodeAt(0);if(this.options.silent){console.error(le);break}else throw new Error(le)}}return this.state.top=!0,k}inline(L,k=[]){return this.inlineQueue.push({src:L,tokens:k}),k}inlineTokens(L,k=[]){let A,V,G,te=L,le,Le,Oe;if(this.tokens.links){let ut=Object.keys(this.tokens.links);if(ut.length>0)for(;(le=this.tokenizer.rules.inline.reflinkSearch.exec(te))!=null;)ut.includes(le[0].slice(le[0].lastIndexOf("[")+1,-1))&&(te=te.slice(0,le.index)+"["+"a".repeat(le[0].length-2)+"]"+te.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(le=this.tokenizer.rules.inline.blockSkip.exec(te))!=null;)te=te.slice(0,le.index)+"["+"a".repeat(le[0].length-2)+"]"+te.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(le=this.tokenizer.rules.inline.anyPunctuation.exec(te))!=null;)te=te.slice(0,le.index)+"++"+te.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;L;)if(Le||(Oe=""),Le=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(ut=>(A=ut.call({lexer:this},L,k))?(L=L.substring(A.raw.length),k.push(A),!0):!1))){if(A=this.tokenizer.escape(L)){L=L.substring(A.raw.length),k.push(A);continue}if(A=this.tokenizer.tag(L)){L=L.substring(A.raw.length),V=k[k.length-1],V&&A.type==="text"&&V.type==="text"?(V.raw+=A.raw,V.text+=A.text):k.push(A);continue}if(A=this.tokenizer.link(L)){L=L.substring(A.raw.length),k.push(A);continue}if(A=this.tokenizer.reflink(L,this.tokens.links)){L=L.substring(A.raw.length),V=k[k.length-1],V&&A.type==="text"&&V.type==="text"?(V.raw+=A.raw,V.text+=A.text):k.push(A);continue}if(A=this.tokenizer.emStrong(L,te,Oe)){L=L.substring(A.raw.length),k.push(A);continue}if(A=this.tokenizer.codespan(L)){L=L.substring(A.raw.length),k.push(A);continue}if(A=this.tokenizer.br(L)){L=L.substring(A.raw.length),k.push(A);continue}if(A=this.tokenizer.del(L)){L=L.substring(A.raw.length),k.push(A);continue}if(A=this.tokenizer.autolink(L)){L=L.substring(A.raw.length),k.push(A);continue}if(!this.state.inLink&&(A=this.tokenizer.url(L))){L=L.substring(A.raw.length),k.push(A);continue}if(G=L,this.options.extensions&&this.options.extensions.startInline){let ut=1/0,Nt=L.slice(1),Tn;this.options.extensions.startInline.forEach(gi=>{Tn=gi.call({lexer:this},Nt),typeof Tn=="number"&&Tn>=0&&(ut=Math.min(ut,Tn))}),ut<1/0&&ut>=0&&(G=L.substring(0,ut+1))}if(A=this.tokenizer.inlineText(G)){L=L.substring(A.raw.length),A.raw.slice(-1)!=="_"&&(Oe=A.raw.slice(-1)),Le=!0,V=k[k.length-1],V&&V.type==="text"?(V.raw+=A.raw,V.text+=A.text):k.push(A);continue}if(L){let ut="Infinite loop on byte: "+L.charCodeAt(0);if(this.options.silent){console.error(ut);break}else throw new Error(ut)}}return k}}class Ts{options;parser;constructor(L){this.options=L||e.defaults}space(L){return""}code({text:L,lang:k,escaped:A}){let V=(k||"").match(/^\S*/)?.[0],G=L.replace(/\n$/,"")+`
`;return V?'<pre><code class="language-'+c(V)+'">'+(A?G:c(G,!0))+`</code></pre>
`:"<pre><code>"+(A?G:c(G,!0))+`</code></pre>
`}blockquote({tokens:L}){return`<blockquote>
${this.parser.parse(L)}</blockquote>
`}html({text:L}){return L}heading({tokens:L,depth:k}){return`<h${k}>${this.parser.parseInline(L)}</h${k}>
`}hr(L){return`<hr>
`}list(L){let k=L.ordered,A=L.start,V="";for(let le=0;le<L.items.length;le++){let Le=L.items[le];V+=this.listitem(Le)}let G=k?"ol":"ul",te=k&&A!==1?' start="'+A+'"':"";return"<"+G+te+`>
`+V+"</"+G+`>
`}listitem(L){let k="";if(L.task){let A=this.checkbox({checked:!!L.checked});L.loose?L.tokens.length>0&&L.tokens[0].type==="paragraph"?(L.tokens[0].text=A+" "+L.tokens[0].text,L.tokens[0].tokens&&L.tokens[0].tokens.length>0&&L.tokens[0].tokens[0].type==="text"&&(L.tokens[0].tokens[0].text=A+" "+L.tokens[0].tokens[0].text)):L.tokens.unshift({type:"text",raw:A+" ",text:A+" "}):k+=A+" "}return k+=this.parser.parse(L.tokens,!!L.loose),`<li>${k}</li>
`}checkbox({checked:L}){return"<input "+(L?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:L}){return`<p>${this.parser.parseInline(L)}</p>
`}table(L){let k="",A="";for(let G=0;G<L.header.length;G++)A+=this.tablecell(L.header[G]);k+=this.tablerow({text:A});let V="";for(let G=0;G<L.rows.length;G++){let te=L.rows[G];A="";for(let le=0;le<te.length;le++)A+=this.tablecell(te[le]);V+=this.tablerow({text:A})}return V&&(V=`<tbody>${V}</tbody>`),`<table>
<thead>
`+k+`</thead>
`+V+`</table>
`}tablerow({text:L}){return`<tr>
${L}</tr>
`}tablecell(L){let k=this.parser.parseInline(L.tokens),A=L.header?"th":"td";return(L.align?`<${A} align="${L.align}">`:`<${A}>`)+k+`</${A}>
`}strong({tokens:L}){return`<strong>${this.parser.parseInline(L)}</strong>`}em({tokens:L}){return`<em>${this.parser.parseInline(L)}</em>`}codespan({text:L}){return`<code>${L}</code>`}br(L){return"<br>"}del({tokens:L}){return`<del>${this.parser.parseInline(L)}</del>`}link({href:L,title:k,tokens:A}){let V=this.parser.parseInline(A),G=g(L);if(G===null)return V;L=G;let te='<a href="'+L+'"';return k&&(te+=' title="'+k+'"'),te+=">"+V+"</a>",te}image({href:L,title:k,text:A}){let V=g(L);if(V===null)return A;L=V;let G=`<img src="${L}" alt="${A}"`;return k&&(G+=` title="${k}"`),G+=">",G}text(L){return"tokens"in L&&L.tokens?this.parser.parseInline(L.tokens):L.text}}class jd{strong({text:L}){return L}em({text:L}){return L}codespan({text:L}){return L}del({text:L}){return L}html({text:L}){return L}text({text:L}){return L}link({text:L}){return""+L}image({text:L}){return""+L}br(){return""}}class dr{options;renderer;textRenderer;constructor(L){this.options=L||e.defaults,this.options.renderer=this.options.renderer||new Ts,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new jd}static parse(L,k){return new dr(k).parse(L)}static parseInline(L,k){return new dr(k).parseInline(L)}parse(L,k=!0){let A="";for(let V=0;V<L.length;V++){let G=L[V];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[G.type]){let le=G,Le=this.options.extensions.renderers[le.type].call({parser:this},le);if(Le!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(le.type)){A+=Le||"";continue}}let te=G;switch(te.type){case"space":{A+=this.renderer.space(te);continue}case"hr":{A+=this.renderer.hr(te);continue}case"heading":{A+=this.renderer.heading(te);continue}case"code":{A+=this.renderer.code(te);continue}case"table":{A+=this.renderer.table(te);continue}case"blockquote":{A+=this.renderer.blockquote(te);continue}case"list":{A+=this.renderer.list(te);continue}case"html":{A+=this.renderer.html(te);continue}case"paragraph":{A+=this.renderer.paragraph(te);continue}case"text":{let le=te,Le=this.renderer.text(le);for(;V+1<L.length&&L[V+1].type==="text";)le=L[++V],Le+=`
`+this.renderer.text(le);k?A+=this.renderer.paragraph({type:"paragraph",raw:Le,text:Le,tokens:[{type:"text",raw:Le,text:Le}]}):A+=Le;continue}default:{let le='Token with "'+te.type+'" type was not found.';if(this.options.silent)return console.error(le),"";throw new Error(le)}}}return A}parseInline(L,k){k=k||this.renderer;let A="";for(let V=0;V<L.length;V++){let G=L[V];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[G.type]){let le=this.options.extensions.renderers[G.type].call({parser:this},G);if(le!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(G.type)){A+=le||"";continue}}let te=G;switch(te.type){case"escape":{A+=k.text(te);break}case"html":{A+=k.html(te);break}case"link":{A+=k.link(te);break}case"image":{A+=k.image(te);break}case"strong":{A+=k.strong(te);break}case"em":{A+=k.em(te);break}case"codespan":{A+=k.codespan(te);break}case"br":{A+=k.br(te);break}case"del":{A+=k.del(te);break}case"text":{A+=k.text(te);break}default:{let le='Token with "'+te.type+'" type was not found.';if(this.options.silent)return console.error(le),"";throw new Error(le)}}}return A}}class nu{options;constructor(L){this.options=L||e.defaults}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(L){return L}postprocess(L){return L}processAllTokens(L){return L}}class wa{defaults=t();options=this.setOptions;parse=this.parseMarkdown(hi.lex,dr.parse);parseInline=this.parseMarkdown(hi.lexInline,dr.parseInline);Parser=dr;Renderer=Ts;TextRenderer=jd;Lexer=hi;Tokenizer=E;Hooks=nu;constructor(...L){this.use(...L)}walkTokens(L,k){let A=[];for(let V of L)switch(A=A.concat(k.call(this,V)),V.type){case"table":{let G=V;for(let te of G.header)A=A.concat(this.walkTokens(te.tokens,k));for(let te of G.rows)for(let le of te)A=A.concat(this.walkTokens(le.tokens,k));break}case"list":{let G=V;A=A.concat(this.walkTokens(G.items,k));break}default:{let G=V;this.defaults.extensions?.childTokens?.[G.type]?this.defaults.extensions.childTokens[G.type].forEach(te=>{let le=G[te].flat(1/0);A=A.concat(this.walkTokens(le,k))}):G.tokens&&(A=A.concat(this.walkTokens(G.tokens,k)))}}return A}use(...L){let k=this.defaults.extensions||{renderers:{},childTokens:{}};return L.forEach(A=>{let V={...A};if(V.async=this.defaults.async||V.async||!1,A.extensions&&(A.extensions.forEach(G=>{if(!G.name)throw new Error("extension name required");if("renderer"in G){let te=k.renderers[G.name];te?k.renderers[G.name]=function(...le){let Le=G.renderer.apply(this,le);return Le===!1&&(Le=te.apply(this,le)),Le}:k.renderers[G.name]=G.renderer}if("tokenizer"in G){if(!G.level||G.level!=="block"&&G.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let te=k[G.level];te?te.unshift(G.tokenizer):k[G.level]=[G.tokenizer],G.start&&(G.level==="block"?k.startBlock?k.startBlock.push(G.start):k.startBlock=[G.start]:G.level==="inline"&&(k.startInline?k.startInline.push(G.start):k.startInline=[G.start]))}"childTokens"in G&&G.childTokens&&(k.childTokens[G.name]=G.childTokens)}),V.extensions=k),A.renderer){let G=this.defaults.renderer||new Ts(this.defaults);for(let te in A.renderer){if(!(te in G))throw new Error(`renderer '${te}' does not exist`);if(["options","parser"].includes(te))continue;let le=te,Le=A.renderer[le],Oe=G[le];G[le]=(...ut)=>{let Nt=Le.apply(G,ut);return Nt===!1&&(Nt=Oe.apply(G,ut)),Nt||""}}V.renderer=G}if(A.tokenizer){let G=this.defaults.tokenizer||new E(this.defaults);for(let te in A.tokenizer){if(!(te in G))throw new Error(`tokenizer '${te}' does not exist`);if(["options","rules","lexer"].includes(te))continue;let le=te,Le=A.tokenizer[le],Oe=G[le];G[le]=(...ut)=>{let Nt=Le.apply(G,ut);return Nt===!1&&(Nt=Oe.apply(G,ut)),Nt}}V.tokenizer=G}if(A.hooks){let G=this.defaults.hooks||new nu;for(let te in A.hooks){if(!(te in G))throw new Error(`hook '${te}' does not exist`);if(te==="options")continue;let le=te,Le=A.hooks[le],Oe=G[le];nu.passThroughHooks.has(te)?G[le]=ut=>{if(this.defaults.async)return Promise.resolve(Le.call(G,ut)).then(Tn=>Oe.call(G,Tn));let Nt=Le.call(G,ut);return Oe.call(G,Nt)}:G[le]=(...ut)=>{let Nt=Le.apply(G,ut);return Nt===!1&&(Nt=Oe.apply(G,ut)),Nt}}V.hooks=G}if(A.walkTokens){let G=this.defaults.walkTokens,te=A.walkTokens;V.walkTokens=function(le){let Le=[];return Le.push(te.call(this,le)),G&&(Le=Le.concat(G.call(this,le))),Le}}this.defaults={...this.defaults,...V}}),this}setOptions(L){return this.defaults={...this.defaults,...L},this}lexer(L,k){return hi.lex(L,k??this.defaults)}parser(L,k){return dr.parse(L,k??this.defaults)}parseMarkdown(L,k){return(V,G)=>{let te={...G},le={...this.defaults,...te},Le=this.onError(!!le.silent,!!le.async);if(this.defaults.async===!0&&te.async===!1)return Le(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof V>"u"||V===null)return Le(new Error("marked(): input parameter is undefined or null"));if(typeof V!="string")return Le(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(V)+", string expected"));if(le.hooks&&(le.hooks.options=le),le.async)return Promise.resolve(le.hooks?le.hooks.preprocess(V):V).then(Oe=>L(Oe,le)).then(Oe=>le.hooks?le.hooks.processAllTokens(Oe):Oe).then(Oe=>le.walkTokens?Promise.all(this.walkTokens(Oe,le.walkTokens)).then(()=>Oe):Oe).then(Oe=>k(Oe,le)).then(Oe=>le.hooks?le.hooks.postprocess(Oe):Oe).catch(Le);try{le.hooks&&(V=le.hooks.preprocess(V));let Oe=L(V,le);le.hooks&&(Oe=le.hooks.processAllTokens(Oe)),le.walkTokens&&this.walkTokens(Oe,le.walkTokens);let ut=k(Oe,le);return le.hooks&&(ut=le.hooks.postprocess(ut)),ut}catch(Oe){return Le(Oe)}}}onError(L,k){return A=>{if(A.message+=`
Please report this to https://github.com/markedjs/marked.`,L){let V="<p>An error occurred:</p><pre>"+c(A.message+"",!0)+"</pre>";return k?Promise.resolve(V):V}if(k)return Promise.reject(A);throw A}}}let El=new wa;function Ce(Ze,L){return El.parse(Ze,L)}Ce.options=Ce.setOptions=function(Ze){return El.setOptions(Ze),Ce.defaults=El.defaults,n(Ce.defaults),Ce},Ce.getDefaults=t,Ce.defaults=e.defaults,Ce.use=function(...Ze){return El.use(...Ze),Ce.defaults=El.defaults,n(Ce.defaults),Ce},Ce.walkTokens=function(Ze,L){return El.walkTokens(Ze,L)},Ce.parseInline=El.parseInline,Ce.Parser=dr,Ce.parser=dr.parse,Ce.Renderer=Ts,Ce.TextRenderer=jd,Ce.Lexer=hi,Ce.lexer=hi.lex,Ce.Tokenizer=E,Ce.Hooks=nu,Ce.parse=Ce;let ge=Ce.options,W=Ce.setOptions,de=Ce.use,Se=Ce.walkTokens,lt=Ce.parseInline,Ut=Ce,$i=dr.parse,ko=hi.lex;e.Hooks=nu,e.Lexer=hi,e.Marked=wa,e.Parser=dr,e.Renderer=Ts,e.TextRenderer=jd,e.Tokenizer=E,e.getDefaults=t,e.lexer=ko,e.marked=Ce,e.options=ge,e.parse=Ut,e.parseInline=lt,e.parser=$i,e.setOptions=W,e.use=de,e.walkTokens=Se})})();var KNe=vo.Hooks||exports.Hooks,GNe=vo.Lexer||exports.Lexer,jNe=vo.Marked||exports.Marked,$Ne=vo.Parser||exports.Parser,oA=vo.Renderer||exports.Renderer,qNe=vo.TextRenderer||exports.TextRenderer,YNe=vo.Tokenizer||exports.Tokenizer,K5=vo.defaults||exports.defaults,XNe=vo.getDefaults||exports.getDefaults,BI=vo.lexer||exports.lexer,QNe=vo.marked||exports.marked,ZNe=vo.options||exports.options,rA=vo.parse||exports.parse,JNe=vo.parseInline||exports.parseInline,G5=vo.parser||exports.parser,eFe=vo.setOptions||exports.setOptions,tFe=vo.use||exports.use,nFe=vo.walkTokens||exports.walkTokens;function sA(r){let e=JSON.parse(r);return e=Of(e),e}function Of(r,e=0){if(!r||e>200)return r;if(typeof r=="object"){switch(r.$mid){case 1:return Z.revive(r);case 2:return new RegExp(r.source,r.flags);case 17:return new Date(r.source)}if(r instanceof Fn||r instanceof Uint8Array)return r;if(Array.isArray(r))for(let t=0;t<r.length;++t)r[t]=Of(r[t],e+1);else for(let t in r)Object.hasOwnProperty.call(r,t)&&(r[t]=Of(r[t],e+1))}return r}var aA=Object.freeze({image:({href:r,title:e,text:t})=>{let n=[],i=[];return r&&({href:r,dimensions:n}=KU(r),i.push(`src="${Fy(r)}"`)),t&&i.push(`alt="${Fy(t)}"`),e&&i.push(`title="${Fy(e)}"`),n.length&&(i=i.concat(n)),"<img "+i.join(" ")+">"},paragraph({tokens:r}){return`<p>${this.parser.parseInline(r)}</p>`},link({href:r,title:e,tokens:t}){let n=this.parser.parseInline(t);return typeof r!="string"?"":(r===n&&(n=SE(n)),e=typeof e=="string"?Fy(SE(e)):"",r=SE(r),r=r.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${r}" title="${e||r}" draggable="false">${n}</a>`)}});function Pf(r,e={},t={}){let n=new X,i=!1,o=Ew(e),s=function(m){let b;try{b=sA(decodeURIComponent(m))}catch{}return b?(b=Q1(b,v=>{if(r.uris&&r.uris[v])return Z.revive(r.uris[v])}),encodeURIComponent(JSON.stringify(b))):m},a=function(m,b){let v=r.uris&&r.uris[m],S=Z.revive(v);return b?m.startsWith(ye.data+":")?m:(S||(S=Z.parse(m)),qs.uriToBrowserUri(S).toString(!0)):!S||Z.parse(m).toString()===S.toString()?m:(S.query&&(S=S.with({query:s(S.query)})),S.toString())},l=new oA;l.image=aA.image,l.link=aA.link,l.paragraph=aA.paragraph;let d=[],c=[];if(e.codeBlockRendererSync?l.code=({text:m,lang:b})=>{let v=iA.nextId(),S=e.codeBlockRendererSync(j5(b),m);return c.push([v,S]),`<div class="code" data-code="${v}">${rh(m)}</div>`}:e.codeBlockRenderer&&(l.code=({text:m,lang:b})=>{let v=iA.nextId(),S=e.codeBlockRenderer(j5(b),m);return d.push(S.then(x=>[v,x])),`<div class="code" data-code="${v}">${rh(m)}</div>`}),e.actionHandler){let m=function(S){let x=S.target.closest("a[data-href]");if(Yn(x))try{let E=x.dataset.href;E&&(r.baseUri&&(E=lA(Z.from(r.baseUri),E)),e.actionHandler.callback(E,S))}catch(E){Be(E)}finally{S.preventDefault()}},b=e.actionHandler.disposables.add(new He(o,"click")),v=e.actionHandler.disposables.add(new He(o,"auxclick"));e.actionHandler.disposables.add(z.any(b.event,v.event)(S=>{let x=new hr(Ee(o),S);!x.leftButton&&!x.middleButton||m(x)})),e.actionHandler.disposables.add(U(o,"keydown",S=>{let x=new it(S);!x.equals(10)&&!x.equals(3)||m(x)}))}r.supportHtml||(l.html=({text:m})=>e.sanitizerOptions?.replaceWithPlaintext?rh(m):(r.isTrusted?m.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?m:""),t.renderer=l;let p=r.value??"";p.length>1e5&&(p=`${p.substr(0,1e5)}\u2026`),r.supportThemeIcons&&(p=UU(p));let h;if(e.fillInIncompleteTokens){let m={...K5,...t},b=BI(p,m),v=VY(b);h=G5(v,m)}else h=rA(p,{...t,async:!1});r.supportThemeIcons&&(h=dd(h).map(b=>typeof b=="string"?b:b.outerHTML).join(""));let f=new DOMParser().parseFromString(dA({isTrusted:r.isTrusted,...e.sanitizerOptions},h),"text/html");if(f.body.querySelectorAll("img, audio, video, source").forEach(m=>{let b=m.getAttribute("src");if(b){let v=b;try{r.baseUri&&(v=lA(Z.from(r.baseUri),v))}catch{}if(m.setAttribute("src",a(v,!0)),e.remoteImageIsAllowed){let S=Z.parse(v);S.scheme!==ye.file&&S.scheme!==ye.data&&!e.remoteImageIsAllowed(S)&&m.replaceWith(ie("",void 0,m.outerHTML))}}}),f.body.querySelectorAll("a").forEach(m=>{let b=m.getAttribute("href");if(m.setAttribute("href",""),!b||/^data:|javascript:/i.test(b)||/^command:/i.test(b)&&!r.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(b))m.replaceWith(...m.childNodes);else{let v=a(b,!1);r.baseUri&&(v=lA(Z.from(r.baseUri),b)),m.dataset.href=v}}),o.innerHTML=dA({isTrusted:r.isTrusted,...e.sanitizerOptions},f.body.innerHTML),d.length>0)Promise.all(d).then(m=>{if(i)return;let b=new Map(m),v=o.querySelectorAll("div[data-code]");for(let S of v){let x=b.get(S.dataset.code??"");x&&Wa(S,x)}e.asyncRenderCallback?.()});else if(c.length>0){let m=new Map(c),b=o.querySelectorAll("div[data-code]");for(let v of b){let S=m.get(v.dataset.code??"");S&&Wa(v,S)}}if(e.asyncRenderCallback)for(let m of o.getElementsByTagName("img")){let b=n.add(U(m,"load",()=>{b.dispose(),e.asyncRenderCallback()}))}return{element:o,dispose:()=>{i=!0,n.dispose()}}}function j5(r){if(!r)return"";let e=r.split(/[\s+|:|,|\{|\?]/,1);return e.length?e[0]:r}function lA(r,e){return/^\w[\w\d+.-]*:/.test(e)?e:r.path.endsWith("/")?L1(r,e).toString():L1(ns(r),e).toString()}var kY=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function dA(r,e){let{config:t,allowedSchemes:n}=MY(r),i=new X;i.add($5("uponSanitizeAttribute",(o,s)=>{if(s.attrName==="style"||s.attrName==="class"){if(o.tagName==="SPAN"){if(s.attrName==="style"){s.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z0-9]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z0-9]+)+\));)?(border-radius:[0-9]+px;)?$/.test(s.attrValue);return}else if(s.attrName==="class"){s.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(s.attrValue);return}}s.keepAttr=!1;return}else if(o.tagName==="INPUT"&&o.attributes.getNamedItem("type")?.value==="checkbox"){if(s.attrName==="type"&&s.attrValue==="checkbox"||s.attrName==="disabled"||s.attrName==="checked"){s.keepAttr=!0;return}s.keepAttr=!1}})),i.add($5("uponSanitizeElement",(o,s)=>{if(s.tagName==="input"&&(o.attributes.getNamedItem("type")?.value==="checkbox"?o.setAttribute("disabled",""):r.replaceWithPlaintext||o.remove()),r.replaceWithPlaintext&&!s.allowedTags[s.tagName]&&s.tagName!=="body"&&o.parentElement){let a,l;if(s.tagName==="#comment")a=`<!--${o.textContent}-->`;else{let h=kY.includes(s.tagName),g=o.attributes.length?" "+Array.from(o.attributes).map(f=>`${f.name}="${f.value}"`).join(" "):"";a=`<${s.tagName}${g}>`,h||(l=`</${s.tagName}>`)}let d=document.createDocumentFragment(),c=o.parentElement.ownerDocument.createTextNode(a);d.appendChild(c);let p=l?o.parentElement.ownerDocument.createTextNode(l):void 0;for(;o.firstChild;)d.appendChild(o.firstChild);p&&d.appendChild(p),o.parentElement.replaceChild(d,o)}})),i.add(SU(n));try{return xy(e,{...t,RETURN_TRUSTED_TYPE:!0})}finally{i.dispose()}}var RY=["align","autoplay","alt","checked","class","colspan","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","rowspan","src","style","target","title","type","width","start"];function MY(r){let e=[ye.http,ye.https,ye.mailto,ye.data,ye.file,ye.vscodeFileResource,ye.vscodeRemote,ye.vscodeRemoteResource];return r.isTrusted&&e.push(ye.command),{config:{ALLOWED_TAGS:r.allowedTags??[...CU],ALLOWED_ATTR:RY,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}function q5(r){return typeof r=="string"?r:cA(r)}function cA(r,e){let t=r.value??"";t.length>1e5&&(t=`${t.substr(0,1e5)}\u2026`);let n=rA(t,{async:!1,renderer:e?AY.value:PY.value}).replace(/&(#\d+|[a-zA-Z]+);/g,i=>OY.get(i)??i);return dA({isTrusted:!1},n).toString()}var OY=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]);function Y5(){let r=new oA;return r.code=({text:e})=>e,r.blockquote=({text:e})=>e+`
`,r.html=e=>"",r.heading=function({tokens:e}){return this.parser.parseInline(e)+`
`},r.hr=()=>"",r.list=function({items:e}){return e.map(t=>this.listitem(t)).join(`
`)+`
`},r.listitem=({text:e})=>e+`
`,r.paragraph=function({tokens:e}){return this.parser.parseInline(e)+`
`},r.table=function({header:e,rows:t}){return e.map(n=>this.tablecell(n)).join(" ")+`
`+t.map(n=>n.map(i=>this.tablecell(i)).join(" ")).join(`
`)+`
`},r.tablerow=({text:e})=>e,r.tablecell=function({tokens:e}){return this.parser.parseInline(e)},r.strong=({text:e})=>e,r.em=({text:e})=>e,r.codespan=({text:e})=>e,r.br=e=>`
`,r.del=({text:e})=>e,r.image=e=>"",r.text=({text:e})=>e,r.link=({text:e})=>e,r}var PY=new Mi(r=>Y5()),AY=new Mi(()=>{let r=Y5();return r.code=({text:e})=>`
\`\`\`
${e}
\`\`\`
`,r});function Aw(r){let e="";return r.forEach(t=>{e+=t.raw}),e}function X5(r){if(r.tokens)for(let e=r.tokens.length-1;e>=0;e--){let t=r.tokens[e];if(t.type==="text"){let n=t.raw.split(`
`),i=n[n.length-1];if(i.includes("`"))return UY(r);if(i.includes("**"))return qY(r);if(i.match(/\*\w/))return zY(r);if(i.match(/(^|\s)__\w/))return YY(r);if(i.match(/(^|\s)_\w/))return KY(r);if(NY(i)||FY(i)&&r.tokens.slice(0,e).some(o=>o.type==="text"&&o.raw.match(/\[[^\]]*$/))){let o=r.tokens.slice(e+1);return o[0]?.type==="link"&&o[1]?.type==="text"&&o[1].raw.match(/^ *"[^"]*$/)||i.match(/^[^"]* +"[^"]*$/)?jY(r):GY(r)}else if(i.match(/(^|\s)\[\w*/))return $Y(r)}}}function NY(r){return!!r.match(/(^|\s)\[.*\]\(\w*/)}function FY(r){return!!r.match(/^[^\[]*\]\([^\)]*$/)}function BY(r){let e=r.items[r.items.length-1],t=e.tokens?e.tokens[e.tokens.length-1]:void 0,n;if(t?.type==="text"&&!("inRawBlock"in e)&&(n=X5(t)),!n||n.type!=="paragraph")return;let i=Aw(r.items.slice(0,-1)),o=e.raw.match(/^(\s*(-|\d+\.|\*) +)/)?.[0];if(!o)return;let s=o+Aw(e.tokens.slice(0,-1))+n.raw,a=BI(i+s)[0];if(a.type==="list")return a}var WY=3;function VY(r){for(let e=0;e<WY;e++){let t=HY(r);if(t)r=t;else break}return r}function HY(r){let e,t;for(e=0;e<r.length;e++){let n=r[e];if(n.type==="paragraph"&&n.raw.match(/(\n|^)\|/)){t=XY(r.slice(e));break}if(e===r.length-1&&n.type==="list"){let i=BY(n);if(i){t=[i];break}}if(e===r.length-1&&n.type==="paragraph"){let i=X5(n);if(i){t=[i];break}}}if(t){let n=[...r.slice(0,e),...t];return n.links=r.links,n}return null}function UY(r){return np(r,"`")}function zY(r){return np(r,"*")}function KY(r){return np(r,"_")}function GY(r){return np(r,")")}function jY(r){return np(r,'")')}function $Y(r){return np(r,"](https://microsoft.com)")}function qY(r){return np(r,"**")}function YY(r){return np(r,"__")}function np(r,e){let t=Aw(Array.isArray(r)?r:[r]);return BI(t+e)[0]}function XY(r){let e=Aw(r),t=e.split(`
`),n,i=!1;for(let o=0;o<t.length;o++){let s=t[o].trim();if(typeof n>"u"&&s.match(/^\s*\|/)){let a=s.match(/(\|[^\|]+)(?=\||$)/g);a&&(n=a.length)}else if(typeof n=="number")if(s.match(/^\s*\|/)){if(o!==t.length-1)return;i=!0}else return}if(typeof n=="number"&&n>0){let o=i?t.slice(0,-1).join(`
`):e,s=!!o.match(/\|\s*$/),a=o+(s?"":"|")+`
|${" --- |".repeat(n)}`;return BI(a)}}function $5(r,e){return eE(r,e),me(()=>tE(r))}var QY={showHover:()=>{},hideHover:()=>{},showAndFocusLastHover:()=>{},setupManagedHover:()=>null,showManagedHover:()=>{}};function ii(){return QY}var Zh=ie,Q5="selectOption.entry.template",uA=class{get templateId(){return Q5}renderTemplate(e){let t=Object.create(null);return t.root=e,t.text=q(e,Zh(".option-text")),t.detail=q(e,Zh(".option-detail")),t.decoratorRight=q(e,Zh(".option-decorator-right")),t}renderElement(e,t,n){let i=n,o=e.text,s=e.detail,a=e.decoratorRight,l=e.isDisabled;i.text.textContent=o,i.detail.textContent=s||"",i.decoratorRight.innerText=a||"",l?i.root.classList.add("option-disabled"):i.root.classList.remove("option-disabled")}disposeTemplate(e){}},Nw=class r extends N{static DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN=32;static DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN=2;static DEFAULT_MINIMUM_VISIBLE_OPTIONS=3;_isVisible;selectBoxOptions;selectElement;container;options=[];selected;_onDidSelect;styles;listRenderer;contextViewProvider;selectDropDownContainer;styleElement;selectList;selectDropDownListContainer;widthControlElement;_currentSelection=0;_dropDownPosition;_hasDetails=!1;selectionDetailsPane;_skipLayout=!1;_cachedMaxDetailsHeight;_hover;_sticky=!1;constructor(e,t,n,i,o){super(),this._isVisible=!1,this.styles=i,this.selectBoxOptions=o||Object.create(null),typeof this.selectBoxOptions.minBottomMargin!="number"?this.selectBoxOptions.minBottomMargin=r.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN:this.selectBoxOptions.minBottomMargin<0&&(this.selectBoxOptions.minBottomMargin=0),this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box monaco-select-box-dropdown-padding",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=new T,this._register(this._onDidSelect),this.registerListeners(),this.constructSelectDropDown(n),this.selected=t||0,e&&this.setOptions(e,t),this.initStyleSheet()}setTitle(e){!this._hover&&e?this._hover=this._register(ii().setupManagedHover(pt("mouse"),this.selectElement,e)):this._hover&&this._hover.update(e)}getHeight(){return 22}getTemplateId(){return Q5}constructSelectDropDown(e){this.contextViewProvider=e,this.selectDropDownContainer=ie(".monaco-select-box-dropdown-container"),this.selectDropDownContainer.classList.add("monaco-select-box-dropdown-padding"),this.selectionDetailsPane=q(this.selectDropDownContainer,Zh(".select-box-details-pane"));let t=q(this.selectDropDownContainer,Zh(".select-box-dropdown-container-width-control")),n=q(t,Zh(".width-control-div"));this.widthControlElement=document.createElement("span"),this.widthControlElement.className="option-text-width-control",q(n,this.widthControlElement),this._dropDownPosition=0,this.styleElement=No(this.selectDropDownContainer),this.selectDropDownContainer.setAttribute("draggable","true"),this._register(U(this.selectDropDownContainer,ee.DRAG_START,i=>{qe.stop(i,!0)}))}registerListeners(){this._register(dn(this.selectElement,"change",t=>{this.selected=t.target.selectedIndex,this._onDidSelect.fire({index:t.target.selectedIndex,selected:t.target.value}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)})),this._register(U(this.selectElement,ee.CLICK,t=>{qe.stop(t),this._isVisible?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(U(this.selectElement,ee.MOUSE_DOWN,t=>{qe.stop(t)}));let e;this._register(U(this.selectElement,"touchstart",t=>{e=this._isVisible})),this._register(U(this.selectElement,"touchend",t=>{qe.stop(t),e?this.hideSelectDropDown(!0):this.showSelectDropDown()})),this._register(U(this.selectElement,ee.KEY_DOWN,t=>{let n=new it(t),i=!1;Pe?(n.keyCode===18||n.keyCode===16||n.keyCode===10||n.keyCode===3)&&(i=!0):(n.keyCode===18&&n.altKey||n.keyCode===16&&n.altKey||n.keyCode===10||n.keyCode===3)&&(i=!0),i&&(this.showSelectDropDown(),qe.stop(t,!0))}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){sn(this.options,e)||(this.options=e,this.selectElement.options.length=0,this._hasDetails=!1,this._cachedMaxDetailsHeight=void 0,this.options.forEach((n,i)=>{this.selectElement.add(this.createOption(n.text,i,n.isDisabled)),typeof n.description=="string"&&(this._hasDetails=!0)})),t!==void 0&&(this.select(t),this._currentSelection=this.selected)}setEnabled(e){this.selectElement.disabled=!e}setOptionsList(){this.selectList?.splice(0,this.selectList.length,this.options)}select(e){e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)}setAriaLabel(e){this.selectBoxOptions.ariaLabel=e,this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){this.container=e,e.classList.add("select-container"),e.appendChild(this.selectElement),this.styleSelectElement()}initStyleSheet(){let e=[];this.styles.listFocusBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`),this.styles.listFocusForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`),this.styles.decoratorRightForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`),this.styles.selectBackground&&this.styles.selectBorder&&this.styles.selectBorder!==this.styles.selectBackground?(e.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `)):this.styles.selectListBorder&&(e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `),e.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `)),this.styles.listHoverForeground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`),this.styles.listHoverBackground&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`),this.styles.listFocusOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`),this.styles.listHoverOutline&&e.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }"),e.push(".monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }"),this.styleElement.textContent=e.join(`
`)}styleSelectElement(){let e=this.styles.selectBackground??"",t=this.styles.selectForeground??"",n=this.styles.selectBorder??"";this.selectElement.style.backgroundColor=e,this.selectElement.style.color=t,this.selectElement.style.borderColor=n}styleList(){let e=this.styles.selectBackground??"",t=As(this.styles.selectListBackground,e);this.selectDropDownListContainer.style.backgroundColor=t,this.selectionDetailsPane.style.backgroundColor=t;let n=this.styles.focusBorder??"";this.selectDropDownContainer.style.outlineColor=n,this.selectDropDownContainer.style.outlineOffset="-1px",this.selectList.style(this.styles)}createOption(e,t,n){let i=document.createElement("option");return i.value=e,i.text=e,i.disabled=!!n,i}showSelectDropDown(){this.selectionDetailsPane.innerText="",!(!this.contextViewProvider||this._isVisible)&&(this.createSelectList(this.selectDropDownContainer),this.setOptionsList(),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e,!0),layout:()=>{this.layoutSelectDropDown()},onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._isVisible=!0,this.hideSelectDropDown(!1),this.contextViewProvider.showContextView({getAnchor:()=>this.selectElement,render:e=>this.renderSelectDropDown(e),layout:()=>this.layoutSelectDropDown(),onHide:()=>{this.selectDropDownContainer.classList.remove("visible"),this.selectElement.classList.remove("synthetic-focus")},anchorPosition:this._dropDownPosition},this.selectBoxOptions.optionsAsChildren?this.container:void 0),this._currentSelection=this.selected,this._isVisible=!0,this.selectElement.setAttribute("aria-expanded","true"))}hideSelectDropDown(e){!this.contextViewProvider||!this._isVisible||(this._isVisible=!1,this.selectElement.setAttribute("aria-expanded","false"),e&&this.selectElement.focus(),this.contextViewProvider.hideContextView())}renderSelectDropDown(e,t){return e.appendChild(this.selectDropDownContainer),this.layoutSelectDropDown(t),{dispose:()=>{this.selectDropDownContainer.remove()}}}measureMaxDetailsHeight(){let e=0;return this.options.forEach((t,n)=>{this.updateDetail(n),this.selectionDetailsPane.offsetHeight>e&&(e=this.selectionDetailsPane.offsetHeight)}),e}layoutSelectDropDown(e){if(this._skipLayout)return!1;if(this.selectList){this.selectDropDownContainer.classList.add("visible");let t=Ee(this.selectElement),n=Ii(this.selectElement),i=Ee(this.selectElement).getComputedStyle(this.selectElement),o=parseFloat(i.getPropertyValue("--dropdown-padding-top"))+parseFloat(i.getPropertyValue("--dropdown-padding-bottom")),s=t.innerHeight-n.top-n.height-(this.selectBoxOptions.minBottomMargin||0),a=n.top-r.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN,l=this.selectElement.offsetWidth,d=this.setWidthControlElement(this.widthControlElement),c=Math.max(d,Math.round(l)).toString()+"px";this.selectDropDownContainer.style.width=c,this.selectList.getHTMLElement().style.height="",this.selectList.layout();let p=this.selectList.contentHeight;this._hasDetails&&this._cachedMaxDetailsHeight===void 0&&(this._cachedMaxDetailsHeight=this.measureMaxDetailsHeight());let h=this._hasDetails?this._cachedMaxDetailsHeight:0,g=p+o+h,f=Math.floor((s-o-h)/this.getHeight()),m=Math.floor((a-o-h)/this.getHeight());if(e)return n.top+n.height>t.innerHeight-22||n.top<r.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||f<1&&m<1?!1:(f<r.DEFAULT_MINIMUM_VISIBLE_OPTIONS&&m>f&&this.options.length>f?(this._dropDownPosition=1,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectionDetailsPane.classList.remove("border-top"),this.selectionDetailsPane.classList.add("border-bottom")):(this._dropDownPosition=0,this.selectDropDownListContainer.remove(),this.selectionDetailsPane.remove(),this.selectDropDownContainer.appendChild(this.selectDropDownListContainer),this.selectDropDownContainer.appendChild(this.selectionDetailsPane),this.selectionDetailsPane.classList.remove("border-bottom"),this.selectionDetailsPane.classList.add("border-top")),!0);if(n.top+n.height>t.innerHeight-22||n.top<r.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN||this._dropDownPosition===0&&f<1||this._dropDownPosition===1&&m<1)return this.hideSelectDropDown(!0),!1;if(this._dropDownPosition===0){if(this._isVisible&&f+m<1)return this.hideSelectDropDown(!0),!1;g>s&&(p=f*this.getHeight())}else g>a&&(p=m*this.getHeight());return this.selectList.layout(p),this.selectList.domFocus(),this.selectList.length>0&&(this.selectList.setFocus([this.selected||0]),this.selectList.reveal(this.selectList.getFocus()[0]||0)),this._hasDetails?(this.selectList.getHTMLElement().style.height=p+o+"px",this.selectDropDownContainer.style.height=""):this.selectDropDownContainer.style.height=p+o+"px",this.updateDetail(this.selected),this.selectDropDownContainer.style.width=c,this.selectDropDownListContainer.setAttribute("tabindex","0"),this.selectElement.classList.add("synthetic-focus"),this.selectDropDownContainer.classList.add("synthetic-focus"),!0}else return!1}setWidthControlElement(e){let t=0;if(e){let n=0,i=0;this.options.forEach((o,s)=>{let a=o.detail?o.detail.length:0,l=o.decoratorRight?o.decoratorRight.length:0,d=o.text.length+a+l;d>i&&(n=s,i=d)}),e.textContent=this.options[n].text+(this.options[n].decoratorRight?this.options[n].decoratorRight+" ":""),t=Wl(e)}return t}createSelectList(e){if(this.selectList)return;this.selectDropDownListContainer=q(e,Zh(".select-box-dropdown-list-container")),this.listRenderer=new uA,this.selectList=this._register(new Ei("SelectBoxCustom",this.selectDropDownListContainer,this,[this.listRenderer],{useShadows:!1,verticalScrollMode:3,keyboardSupport:!1,mouseSupport:!1,accessibilityProvider:{getAriaLabel:i=>{let o=i.text;return i.detail&&(o+=`. ${i.detail}`),i.decoratorRight&&(o+=`. ${i.decoratorRight}`),i.description&&(o+=`. ${i.description}`),o},getWidgetAriaLabel:()=>u({key:"selectBox",comment:["Behave like native select dropdown element."]},"Select Box"),getRole:()=>Pe?"":"option",getWidgetRole:()=>"listbox"}})),this.selectBoxOptions.ariaLabel&&(this.selectList.ariaLabel=this.selectBoxOptions.ariaLabel);let t=this._register(new He(this.selectDropDownListContainer,"keydown")),n=z.chain(t.event,i=>i.filter(()=>this.selectList.length>0).map(o=>new it(o)));this._register(z.chain(n,i=>i.filter(o=>o.keyCode===3))(this.onEnter,this)),this._register(z.chain(n,i=>i.filter(o=>o.keyCode===2))(this.onEnter,this)),this._register(z.chain(n,i=>i.filter(o=>o.keyCode===9))(this.onEscape,this)),this._register(z.chain(n,i=>i.filter(o=>o.keyCode===16))(this.onUpArrow,this)),this._register(z.chain(n,i=>i.filter(o=>o.keyCode===18))(this.onDownArrow,this)),this._register(z.chain(n,i=>i.filter(o=>o.keyCode===12))(this.onPageDown,this)),this._register(z.chain(n,i=>i.filter(o=>o.keyCode===11))(this.onPageUp,this)),this._register(z.chain(n,i=>i.filter(o=>o.keyCode===14))(this.onHome,this)),this._register(z.chain(n,i=>i.filter(o=>o.keyCode===13))(this.onEnd,this)),this._register(z.chain(n,i=>i.filter(o=>o.keyCode>=21&&o.keyCode<=56||o.keyCode>=85&&o.keyCode<=113))(this.onCharacter,this)),this._register(U(this.selectList.getHTMLElement(),ee.POINTER_UP,i=>this.onPointerUp(i))),this._register(this.selectList.onMouseOver(i=>typeof i.index<"u"&&this.selectList.setFocus([i.index]))),this._register(this.selectList.onDidChangeFocus(i=>this.onListFocus(i))),this._register(U(this.selectDropDownContainer,ee.FOCUS_OUT,i=>{!this._isVisible||Ps(i.relatedTarget,this.selectDropDownContainer)||this.onListBlur()})),this.selectList.getHTMLElement().setAttribute("aria-label",this.selectBoxOptions.ariaLabel||""),this.selectList.getHTMLElement().setAttribute("aria-expanded","true"),this.styleList()}onPointerUp(e){if(!this.selectList.length)return;qe.stop(e);let t=e.target;if(!t||t.classList.contains("slider"))return;let n=t.closest(".monaco-list-row");if(!n)return;let i=Number(n.getAttribute("data-index")),o=n.classList.contains("option-disabled");i>=0&&i<this.options.length&&!o&&(this.selected=i,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0))}onListBlur(){this._sticky||(this.selected!==this._currentSelection&&this.select(this._currentSelection),this.hideSelectDropDown(!1))}renderDescriptionMarkdown(e,t){let n=o=>{for(let s=0;s<o.childNodes.length;s++){let a=o.childNodes.item(s);(a.tagName&&a.tagName.toLowerCase())==="img"?a.remove():n(a)}},i=Pf({value:e,supportThemeIcons:!0},{actionHandler:t});return i.element.classList.add("select-box-description-markdown"),n(i.element),i.element}onListFocus(e){!this._isVisible||!this._hasDetails||this.updateDetail(e.indexes[0])}updateDetail(e){this.selectionDetailsPane.innerText="";let t=this.options[e],n=t?.description??"",i=t?.descriptionIsMarkdown??!1;if(n){if(i){let o=t.descriptionMarkdownActionHandler;this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(n,o))}else this.selectionDetailsPane.innerText=n;this.selectionDetailsPane.style.display="block"}else this.selectionDetailsPane.style.display="none";this._skipLayout=!0,this.contextViewProvider.layout(),this._skipLayout=!1}onEscape(e){qe.stop(e),this.select(this._currentSelection),this.hideSelectDropDown(!0)}onEnter(e){qe.stop(e),this.selected!==this._currentSelection&&(this._currentSelection=this.selected,this._onDidSelect.fire({index:this.selectElement.selectedIndex,selected:this.options[this.selected].text}),this.options[this.selected]&&this.options[this.selected].text&&this.setTitle(this.options[this.selected].text)),this.hideSelectDropDown(!0)}onDownArrow(e){if(this.selected<this.options.length-1){qe.stop(e,!0);let t=this.options[this.selected+1].isDisabled;if(t&&this.options.length>this.selected+2)this.selected+=2;else{if(t)return;this.selected++}this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0])}}onUpArrow(e){this.selected>0&&(qe.stop(e,!0),this.options[this.selected-1].isDisabled&&this.selected>1?this.selected-=2:this.selected--,this.select(this.selected),this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selectList.getFocus()[0]))}onPageUp(e){qe.stop(e),this.selectList.focusPreviousPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected<this.options.length-1&&(this.selected++,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onPageDown(e){qe.stop(e),this.selectList.focusNextPage(),setTimeout(()=>{this.selected=this.selectList.getFocus()[0],this.options[this.selected].isDisabled&&this.selected>0&&(this.selected--,this.selectList.setFocus([this.selected])),this.selectList.reveal(this.selected),this.select(this.selected)},1)}onHome(e){qe.stop(e),!(this.options.length<2)&&(this.selected=0,this.options[this.selected].isDisabled&&this.selected>1&&this.selected++,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onEnd(e){qe.stop(e),!(this.options.length<2)&&(this.selected=this.options.length-1,this.options[this.selected].isDisabled&&this.selected>1&&this.selected--,this.selectList.setFocus([this.selected]),this.selectList.reveal(this.selected),this.select(this.selected))}onCharacter(e){let t=Wv.toString(e.keyCode),n=-1;for(let i=0;i<this.options.length-1;i++)if(n=(i+this.selected+1)%this.options.length,this.options[n].text.charAt(0).toUpperCase()===t&&!this.options[n].isDisabled){this.select(n),this.selectList.setFocus([n]),this.selectList.reveal(this.selectList.getFocus()[0]),qe.stop(e);break}}dispose(){this.hideSelectDropDown(!1),super.dispose()}};var Fw=class extends N{selectElement;selectBoxOptions;options;selected=0;_onDidSelect;styles;constructor(e,t,n,i){super(),this.selectBoxOptions=i||Object.create(null),this.options=[],this.selectElement=document.createElement("select"),this.selectElement.className="monaco-select-box",typeof this.selectBoxOptions.ariaLabel=="string"&&this.selectElement.setAttribute("aria-label",this.selectBoxOptions.ariaLabel),typeof this.selectBoxOptions.ariaDescription=="string"&&this.selectElement.setAttribute("aria-description",this.selectBoxOptions.ariaDescription),this._onDidSelect=this._register(new T),this.styles=n,this.registerListeners(),this.setOptions(e,t)}registerListeners(){this._register(Jn.addTarget(this.selectElement)),[Rt.Tap].forEach(e=>{this._register(U(this.selectElement,e,t=>{this.selectElement.focus()}))}),this._register(dn(this.selectElement,"click",e=>{qe.stop(e,!0)})),this._register(dn(this.selectElement,"change",e=>{this.selectElement.title=e.target.value,this._onDidSelect.fire({index:e.target.selectedIndex,selected:e.target.value})})),this._register(dn(this.selectElement,"keydown",e=>{let t=!1;Pe?(e.keyCode===18||e.keyCode===16||e.keyCode===10)&&(t=!0):(e.keyCode===18&&e.altKey||e.keyCode===10||e.keyCode===3)&&(t=!0),t&&e.stopPropagation()}))}get onDidSelect(){return this._onDidSelect.event}setOptions(e,t){(!this.options||!sn(this.options,e))&&(this.options=e,this.selectElement.options.length=0,this.options.forEach((n,i)=>{this.selectElement.add(this.createOption(n.text,i,n.isDisabled))})),t!==void 0&&this.select(t)}select(e){this.options.length===0?this.selected=0:e>=0&&e<this.options.length?this.selected=e:e>this.options.length-1?this.select(this.options.length-1):this.selected<0&&(this.selected=0),this.selectElement.selectedIndex=this.selected,this.selected<this.options.length&&typeof this.options[this.selected].text=="string"?this.selectElement.title=this.options[this.selected].text:this.selectElement.title=""}setAriaLabel(e){this.selectBoxOptions.ariaLabel=e,this.selectElement.setAttribute("aria-label",e)}focus(){this.selectElement&&(this.selectElement.tabIndex=0,this.selectElement.focus())}blur(){this.selectElement&&(this.selectElement.tabIndex=-1,this.selectElement.blur())}setEnabled(e){this.selectElement.disabled=!e}setFocusable(e){this.selectElement.tabIndex=e?0:-1}render(e){e.classList.add("select-container"),e.appendChild(this.selectElement),this.setOptions(this.options,this.selected),this.applyStyles()}style(e){this.styles=e,this.applyStyles()}applyStyles(){this.selectElement&&(this.selectElement.style.backgroundColor=this.styles.selectBackground??"",this.selectElement.style.color=this.styles.selectForeground??"",this.selectElement.style.borderColor=this.styles.selectBorder??"")}createOption(e,t,n){let i=document.createElement("option");return i.value=e,i.text=e,i.disabled=!!n,i}};var HBe={...Pw,selectBackground:"#3C3C3C",selectForeground:"#F0F0F0",selectBorder:"#3C3C3C",decoratorRightForeground:void 0,selectListBackground:void 0,selectListBorder:void 0,focusBorder:void 0},ip=class extends On{selectBoxDelegate;constructor(e,t,n,i,o){super(),Pe&&!o?.useCustomDrawn?this.selectBoxDelegate=new Fw(e,t,i,o):this.selectBoxDelegate=new Nw(e,t,n,i,o),this._register(this.selectBoxDelegate)}get onDidSelect(){return this.selectBoxDelegate.onDidSelect}setOptions(e,t){this.selectBoxDelegate.setOptions(e,t)}select(e){this.selectBoxDelegate.select(e)}setAriaLabel(e){this.selectBoxDelegate.setAriaLabel(e)}focus(){this.selectBoxDelegate.focus()}blur(){this.selectBoxDelegate.blur()}setFocusable(e){this.selectBoxDelegate.setFocusable(e)}setEnabled(e){this.selectBoxDelegate.setEnabled(e)}render(e){this.selectBoxDelegate.render(e)}};var oo=class extends N{constructor(t,n,i={}){super();this.options=i;this._context=t||this,this._action=n,n instanceof un&&this._register(n.onDidChange(o=>{this.element&&this.handleActionChangeEvent(o)}))}element;_context;_action;customHover;get action(){return this._action}_actionRunner;handleActionChangeEvent(t){t.enabled!==void 0&&this.updateEnabled(),t.checked!==void 0&&this.updateChecked(),t.class!==void 0&&this.updateClass(),t.label!==void 0&&(this.updateLabel(),this.updateTooltip()),t.tooltip!==void 0&&this.updateTooltip()}get actionRunner(){return this._actionRunner||(this._actionRunner=this._register(new Ns)),this._actionRunner}set actionRunner(t){this._actionRunner=t}isEnabled(){return this._action.enabled}setActionContext(t){this._context=t}render(t){let n=this.element=t;this._register(Jn.addTarget(t));let i=this.options&&this.options.draggable;i&&(t.draggable=!0,yi&&this._register(U(t,ee.DRAG_START,o=>o.dataTransfer?.setData(vw.TEXT,this._action.label)))),this._register(U(n,Rt.Tap,o=>this.onClick(o,!0))),this._register(U(n,ee.MOUSE_DOWN,o=>{i||qe.stop(o,!0),this._action.enabled&&o.button===0&&n.classList.add("active")})),Pe&&this._register(U(n,ee.CONTEXT_MENU,o=>{o.button===0&&o.ctrlKey===!0&&this.onClick(o)})),this._register(U(n,ee.CLICK,o=>{qe.stop(o,!0),this.options&&this.options.isMenu||this.onClick(o)})),this._register(U(n,ee.DBLCLICK,o=>{qe.stop(o,!0)})),[ee.MOUSE_UP,ee.MOUSE_OUT].forEach(o=>{this._register(U(n,o,s=>{qe.stop(s),n.classList.remove("active")}))})}onClick(t,n=!1){qe.stop(t,!0);let i=ln(this._context)?this.options?.useEventAsContext?t:{preserveFocus:n}:this._context;this.actionRunner.run(this._action,i)}focus(){this.element&&(this.element.tabIndex=0,this.element.focus(),this.element.classList.add("focused"))}isFocused(){return!!this.element?.classList.contains("focused")}blur(){this.element&&(this.element.blur(),this.element.tabIndex=-1,this.element.classList.remove("focused"))}setFocusable(t){this.element&&(this.element.tabIndex=t?0:-1)}get trapsArrowNavigation(){return!1}updateEnabled(){}updateLabel(){}getClass(){return this.action.class}getTooltip(){return this.action.tooltip}updateTooltip(){if(!this.element)return;let t=this.getTooltip()??"";if(this.updateAriaLabel(),this.options.hoverDelegate?.showNativeHover)this.element.title=t;else if(!this.customHover&&t!==""){let n=this.options.hoverDelegate??pt("element");this.customHover=this._store.add(ii().setupManagedHover(n,this.element,t))}else this.customHover&&this.customHover.update(t)}updateAriaLabel(){if(this.element){let t=this.getTooltip()??"";this.element.setAttribute("aria-label",t)}}updateClass(){}updateChecked(){}dispose(){this.element&&(this.element.remove(),this.element=void 0),this._context=void 0,super.dispose()}},tl=class extends oo{label;options;cssClass;constructor(e,t,n){super(e,t,n),this.options=n,this.options.icon=n.icon!==void 0?n.icon:!1,this.options.label=n.label!==void 0?n.label:!0,this.cssClass=""}render(e){super.render(e),Ao(this.element);let t=document.createElement("a");if(t.classList.add("action-label"),t.setAttribute("role",this.getDefaultAriaRole()),this.label=t,this.element.appendChild(t),this.options.label&&this.options.keybinding){let n=document.createElement("span");n.classList.add("keybinding"),n.textContent=this.options.keybinding,this.element.appendChild(n)}this.updateClass(),this.updateLabel(),this.updateTooltip(),this.updateEnabled(),this.updateChecked()}getDefaultAriaRole(){return this._action.id===ei.ID?"presentation":this.options.isMenu?"menuitem":this.options.isTabList?"tab":"button"}focus(){this.label&&(this.label.tabIndex=0,this.label.focus())}isFocused(){return!!this.label&&this.label?.tabIndex===0}blur(){this.label&&(this.label.tabIndex=-1)}setFocusable(e){this.label&&(this.label.tabIndex=e?0:-1)}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this.action.label)}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:!this.options.label&&this.action.label&&this.options.icon&&(e=this.action.label,this.options.keybinding&&(e=u({key:"titleLabel",comment:["action title","action keybinding"]},"{0} ({1})",e,this.options.keybinding))),e??void 0}updateClass(){this.cssClass&&this.label&&this.label.classList.remove(...this.cssClass.split(" ")),this.options.icon?(this.cssClass=this.getClass(),this.label&&(this.label.classList.add("codicon"),this.cssClass&&this.label.classList.add(...this.cssClass.split(" "))),this.updateEnabled()):this.label?.classList.remove("codicon")}updateEnabled(){this.action.enabled?(this.label&&(this.label.removeAttribute("aria-disabled"),this.label.classList.remove("disabled")),this.element?.classList.remove("disabled")):(this.label&&(this.label.setAttribute("aria-disabled","true"),this.label.classList.add("disabled")),this.element?.classList.add("disabled"))}updateAriaLabel(){if(this.label){let e=this.getTooltip()??"";this.label.setAttribute("aria-label",e)}}updateChecked(){this.label&&(this.action.checked!==void 0?(this.label.classList.toggle("checked",this.action.checked),this.options.isTabList?this.label.setAttribute("aria-selected",this.action.checked?"true":"false"):(this.label.setAttribute("aria-checked",this.action.checked?"true":"false"),this.label.setAttribute("role","checkbox"))):(this.label.classList.remove("checked"),this.label.removeAttribute(this.options.isTabList?"aria-selected":"aria-checked"),this.label.setAttribute("role",this.getDefaultAriaRole())))}},Bw=class extends oo{selectBox;constructor(e,t,n,i,o,s,a){super(e,t),this.selectBox=new ip(n,i,o,s,a),this.selectBox.setFocusable(!1),this._register(this.selectBox),this.registerListeners()}setOptions(e,t){this.selectBox.setOptions(e,t)}select(e){this.selectBox.select(e)}registerListeners(){this._register(this.selectBox.onDidSelect(e=>this.runAction(e.selected,e.index)))}runAction(e,t){this.actionRunner.run(this._action,this.getActionContext(e,t))}getActionContext(e,t){return e}setFocusable(e){this.selectBox.setFocusable(e)}focus(){this.selectBox?.focus()}blur(){this.selectBox?.blur()}render(e){this.selectBox.render(e)}};var Af={inputActiveOptionBorder:"#007ACC00",inputActiveOptionForeground:"#FFFFFF",inputActiveOptionBackground:"#0E639C50"},Ww=class extends oo{toggle;constructor(e,t,n){super(e,t,n),this.toggle=this._register(new Er({actionClassName:this._action.class,isChecked:!!this._action.checked,title:this.options.keybinding?`${this._action.label} (${this.options.keybinding})`:this._action.label,notFocusable:!0,inputActiveOptionBackground:n.toggleStyles?.inputActiveOptionBackground,inputActiveOptionBorder:n.toggleStyles?.inputActiveOptionBorder,inputActiveOptionForeground:n.toggleStyles?.inputActiveOptionForeground,hoverDelegate:n.hoverDelegate})),this._register(this.toggle.onChange(()=>this._action.checked=!!this.toggle&&this.toggle.checked))}render(e){this.element=e,this.element.appendChild(this.toggle.domNode)}updateEnabled(){this.toggle&&(this.isEnabled()?this.toggle.enable():this.toggle.disable())}updateChecked(){this.toggle.checked=!!this._action.checked}focus(){this.toggle.domNode.tabIndex=0,this.toggle.focus()}blur(){this.toggle.domNode.tabIndex=-1,this.toggle.domNode.blur()}setFocusable(e){this.toggle.domNode.tabIndex=e?0:-1}},Er=class extends On{_onChange=this._register(new T);onChange=this._onChange.event;_onKeyDown=this._register(new T);onKeyDown=this._onKeyDown.event;_opts;_icon;domNode;_checked;_hover;constructor(e){super(),this._opts=e,this._checked=this._opts.isChecked;let t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...Ae.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register(ii().setupManagedHover(e.hoverDelegate??pt("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault(),n.stopPropagation();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}setIcon(e){this._icon&&this.domNode.classList.remove(...Ae.asClassNameArray(this._icon)),this._icon=e,this._icon&&this.domNode.classList.add(...Ae.asClassNameArray(this._icon))}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}setTitle(e){this._hover.update(e),this.domNode.setAttribute("aria-label",e)}set visible(e){this.domNode.style.display=e?"":"none"}get visible(){return this.domNode.style.display!=="none"}};var ZY=u("caseDescription","Match Case"),JY=u("wordsDescription","Match Whole Word"),eX=u("regexDescription","Use Regular Expression"),Vw=class extends Er{constructor(e){super({icon:re.caseSensitive,title:ZY+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??pt("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},Hw=class extends Er{constructor(e){super({icon:re.wholeWord,title:JY+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??pt("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},Uw=class extends Er{constructor(e){super({icon:re.regex,title:eX+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??pt("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}};var zw=class{constructor(e,t=0,n=e.length,i=t-1){this.items=e;this.start=t;this.end=n;this.index=i}current(){return this.index===this.start-1||this.index===this.end?null:this.items[this.index]}next(){return this.index=Math.min(this.index+1,this.end),this.current()}previous(){return this.index=Math.max(this.index-1,this.start-1),this.current()}first(){return this.index=this.start,this.current()}last(){return this.index=this.end-1,this.current()}};var Nf=class{_history;_limit;_navigator;constructor(e=[],t=10){this._initialize(e),this._limit=t,this._onChange()}getHistory(){return this._elements}add(e){this._history.delete(e),this._history.add(e),this._onChange()}next(){return this._navigator.next()}previous(){return this._currentPosition()!==0?this._navigator.previous():null}current(){return this._navigator.current()}first(){return this._navigator.first()}last(){return this._navigator.last()}isFirst(){return this._currentPosition()===0}isLast(){return this._currentPosition()>=this._elements.length-1}isNowhere(){return this._navigator.current()===null}has(e){return this._history.has(e)}clear(){this._initialize([]),this._onChange()}_onChange(){this._reduceToLimit();let e=this._elements;this._navigator=new zw(e,0,e.length,e.length)}_reduceToLimit(){let e=this._elements;e.length>this._limit&&this._initialize(e.slice(e.length-this._limit))}_currentPosition(){let e=this._navigator.current();return e?this._elements.indexOf(e):-1}_initialize(e){this._history=new Set;for(let t of e)this._history.add(t)}get _elements(){let e=[];return this._history.forEach(t=>e.push(t)),e}};var WI=ie;var J5={inputBackground:"#3C3C3C",inputForeground:"#CCCCCC",inputValidationInfoBorder:"#55AAFF",inputValidationInfoBackground:"#063B49",inputValidationWarningBorder:"#B89500",inputValidationWarningBackground:"#352A05",inputValidationErrorBorder:"#BE1100",inputValidationErrorBackground:"#5A1D1D",inputBorder:void 0,inputValidationErrorForeground:void 0,inputValidationInfoForeground:void 0,inputValidationWarningForeground:void 0},bs=class extends On{contextViewProvider;element;input;actionbar;options;message;placeholder;tooltip;ariaLabel;validation;state="idle";mirror;cachedHeight;cachedContentHeight;maxHeight=Number.POSITIVE_INFINITY;scrollableElement;hover;_onDidChange=this._register(new T);onDidChange=this._onDidChange.event;_onDidHeightChange=this._register(new T);onDidHeightChange=this._onDidHeightChange.event;constructor(e,t,n){super(),this.contextViewProvider=t,this.options=n,this.message=null,this.placeholder=this.options.placeholder||"",this.tooltip=this.options.tooltip??(this.placeholder||""),this.ariaLabel=this.options.ariaLabel||"",this.options.validationOptions&&(this.validation=this.options.validationOptions.validation),this.element=q(e,WI(".monaco-inputbox.idle"));let i=this.options.flexibleHeight?"textarea":"input",o=q(this.element,WI(".ibwrapper"));if(this.input=q(o,WI(i+".input.empty")),this.input.setAttribute("autocorrect","off"),this.input.setAttribute("autocapitalize","off"),this.input.setAttribute("spellcheck","false"),this.onfocus(this.input,()=>this.element.classList.add("synthetic-focus")),this.onblur(this.input,()=>this.element.classList.remove("synthetic-focus")),this.options.flexibleHeight){this.maxHeight=typeof this.options.flexibleMaxHeight=="number"?this.options.flexibleMaxHeight:Number.POSITIVE_INFINITY,this.mirror=q(o,WI("div.mirror")),this.mirror.innerText="\xA0",this.scrollableElement=new xw(this.element,{vertical:1}),this.options.flexibleWidth&&(this.input.setAttribute("wrap","off"),this.mirror.style.whiteSpace="pre",this.mirror.style.wordWrap="initial"),q(e,this.scrollableElement.getDomNode()),this._register(this.scrollableElement),this._register(this.scrollableElement.onScroll(l=>this.input.scrollTop=l.scrollTop));let s=this._register(new He(e.ownerDocument,"selectionchange")),a=z.filter(s.event,()=>e.ownerDocument.getSelection()?.anchorNode===o);this._register(a(this.updateScrollDimensions,this)),this._register(this.onDidHeightChange(this.updateScrollDimensions,this))}else this.input.type=this.options.type||"text",this.input.setAttribute("wrap","off");this.ariaLabel&&this.input.setAttribute("aria-label",this.ariaLabel),this.placeholder&&!this.options.showPlaceholderOnFocus&&this.setPlaceHolder(this.placeholder),this.tooltip&&this.setTooltip(this.tooltip),this.oninput(this.input,()=>this.onValueChange()),this.onblur(this.input,()=>this.onBlur()),this.onfocus(this.input,()=>this.onFocus()),this._register(this.ignoreGesture(this.input)),setTimeout(()=>this.updateMirror(),0),this.options.actions&&(this.actionbar=this._register(new Wi(this.element)),this.actionbar.push(this.options.actions,{icon:!0,label:!1})),this.applyStyles()}onBlur(){this._hideMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder","")}onFocus(){this._showMessage(),this.options.showPlaceholderOnFocus&&this.input.setAttribute("placeholder",this.placeholder||"")}setPlaceHolder(e){this.placeholder=e,this.input.setAttribute("placeholder",e)}setTooltip(e){this.tooltip=e,this.hover?this.hover.update(e):this.hover=this._register(ii().setupManagedHover(pt("mouse"),this.input,e))}setAriaLabel(e){this.ariaLabel=e,e?this.input.setAttribute("aria-label",this.ariaLabel):this.input.removeAttribute("aria-label")}getAriaLabel(){return this.ariaLabel}get mirrorElement(){return this.mirror}get inputElement(){return this.input}get value(){return this.input.value}set value(e){this.input.value!==e&&(this.input.value=e,this.onValueChange())}get step(){return this.input.step}set step(e){this.input.step=e}get height(){return typeof this.cachedHeight=="number"?this.cachedHeight:aE(this.element)}focus(){this.input.focus()}blur(){this.input.blur()}hasFocus(){return fr(this.input)}select(e=null){this.input.select(),e&&(this.input.setSelectionRange(e.start,e.end),e.end===this.input.value.length&&(this.input.scrollLeft=this.input.scrollWidth))}isSelectionAtEnd(){return this.input.selectionEnd===this.input.value.length&&this.input.selectionStart===this.input.selectionEnd}getSelection(){let e=this.input.selectionStart;if(e===null)return null;let t=this.input.selectionEnd??e;return{start:e,end:t}}enable(){this.input.removeAttribute("disabled")}disable(){this.blur(),this.input.disabled=!0,this._hideMessage()}setEnabled(e){e?this.enable():this.disable()}get width(){return Wl(this.input)}set width(e){if(this.options.flexibleHeight&&this.options.flexibleWidth){let t=0;if(this.mirror){let n=parseFloat(this.mirror.style.paddingLeft||"")||0,i=parseFloat(this.mirror.style.paddingRight||"")||0;t=n+i}this.input.style.width=e-t+"px"}else this.input.style.width=e+"px";this.mirror&&(this.mirror.style.width=e+"px")}set paddingRight(e){this.input.style.width=`calc(100% - ${e}px)`,this.mirror&&(this.mirror.style.paddingRight=e+"px")}updateScrollDimensions(){if(typeof this.cachedContentHeight!="number"||typeof this.cachedHeight!="number"||!this.scrollableElement)return;let e=this.cachedContentHeight,t=this.cachedHeight,n=this.input.scrollTop;this.scrollableElement.setScrollDimensions({scrollHeight:e,height:t}),this.scrollableElement.setScrollPosition({scrollTop:n})}showMessage(e,t){if(this.state==="open"&&wn(this.message,e))return;this.message=e,this.element.classList.remove("idle"),this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add(this.classForType(e.type));let n=this.stylesForType(this.message.type);this.element.style.border=`1px solid ${As(n.border,"transparent")}`,this.message.content&&(this.hasFocus()||t)&&this._showMessage()}hideMessage(){this.message=null,this.element.classList.remove("info"),this.element.classList.remove("warning"),this.element.classList.remove("error"),this.element.classList.add("idle"),this._hideMessage(),this.applyStyles()}isInputValid(){return!!this.validation&&!this.validation(this.value)}validate(){let e=null;return this.validation&&(e=this.validation(this.value),e?(this.inputElement.setAttribute("aria-invalid","true"),this.showMessage(e)):this.inputElement.hasAttribute("aria-invalid")&&(this.inputElement.removeAttribute("aria-invalid"),this.hideMessage())),e?.type}stylesForType(e){let t=this.options.inputBoxStyles;switch(e){case 1:return{border:t.inputValidationInfoBorder,background:t.inputValidationInfoBackground,foreground:t.inputValidationInfoForeground};case 2:return{border:t.inputValidationWarningBorder,background:t.inputValidationWarningBackground,foreground:t.inputValidationWarningForeground};default:return{border:t.inputValidationErrorBorder,background:t.inputValidationErrorBackground,foreground:t.inputValidationErrorForeground}}}classForType(e){switch(e){case 1:return"info";case 2:return"warning";default:return"error"}}_showMessage(){if(!this.contextViewProvider||!this.message)return;let e,t=()=>e.style.width=Wl(this.element)+"px";this.contextViewProvider.showContextView({getAnchor:()=>this.element,anchorAlignment:1,render:i=>{if(!this.message)return null;e=q(i,WI(".monaco-inputbox-container")),t();let o={inline:!0,className:"monaco-inputbox-message"},s=this.message.formatContent?O5(this.message.content,o):M5(this.message.content,o);s.classList.add(this.classForType(this.message.type));let a=this.stylesForType(this.message.type);return s.style.backgroundColor=a.background??"",s.style.color=a.foreground??"",s.style.border=a.border?`1px solid ${a.border}`:"",q(e,s),null},onHide:()=>{this.state="closed"},layout:t});let n;this.message.type===3?n=u("alertErrorMessage","Error: {0}",this.message.content):this.message.type===2?n=u("alertWarningMessage","Warning: {0}",this.message.content):n=u("alertInfoMessage","Info: {0}",this.message.content),ca(n),this.state="open"}_hideMessage(){this.contextViewProvider&&(this.state==="open"&&this.contextViewProvider.hideContextView(),this.state="idle")}onValueChange(){this._onDidChange.fire(this.value),this.validate(),this.updateMirror(),this.input.classList.toggle("empty",!this.value),this.state==="open"&&this.contextViewProvider&&this.contextViewProvider.layout()}updateMirror(){if(!this.mirror)return;let e=this.value,n=e.charCodeAt(e.length-1)===10?" ":"";(e+n).replace(/\u000c/g,"")?this.mirror.textContent=e+n:this.mirror.innerText="\xA0",this.layout()}applyStyles(){let e=this.options.inputBoxStyles,t=e.inputBackground??"",n=e.inputForeground??"",i=e.inputBorder??"";this.element.style.backgroundColor=t,this.element.style.color=n,this.input.style.backgroundColor="inherit",this.input.style.color=n,this.element.style.border=`1px solid ${As(i,"transparent")}`}layout(){if(!this.mirror)return;let e=this.cachedContentHeight;this.cachedContentHeight=aE(this.mirror),e!==this.cachedContentHeight&&(this.cachedHeight=Math.min(this.cachedContentHeight,this.maxHeight),this.input.style.height=this.cachedHeight+"px",this._onDidHeightChange.fire(this.cachedContentHeight))}insertAtCursor(e){let t=this.inputElement,n=t.selectionStart,i=t.selectionEnd,o=t.value;n!==null&&i!==null&&(this.value=o.substr(0,n)+e+o.substr(i),t.setSelectionRange(n+1,n+1),this.layout())}dispose(){this._hideMessage(),this.message=null,this.actionbar?.dispose(),super.dispose()}},op=class extends bs{history;observer;_onDidFocus=this._register(new T);onDidFocus=this._onDidFocus.event;_onDidBlur=this._register(new T);onDidBlur=this._onDidBlur.event;constructor(e,t,n){let i=u({key:"history.inputbox.hint.suffix.noparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field ends in a closing parenthesis ")", for example "Filter (e.g. text, !exclude)". The character inserted into the final string is \u21C5 to represent the up and down arrow keys.']}," or {0} for history","\u21C5"),o=u({key:"history.inputbox.hint.suffix.inparens",comment:['Text is the suffix of an input field placeholder coming after the action the input field performs, this will be used when the input field does NOT end in a closing parenthesis (eg. "Find"). The character inserted into the final string is \u21C5 to represent the up and down arrow keys.']}," ({0} for history)","\u21C5");super(e,t,n),this.history=new Nf(n.history,100);let s=()=>{if(n.showHistoryHint&&n.showHistoryHint()&&!this.placeholder.endsWith(i)&&!this.placeholder.endsWith(o)&&this.history.getHistory().length){let a=this.placeholder.endsWith(")")?i:o,l=this.placeholder+a;n.showPlaceholderOnFocus&&!fr(this.input)?this.placeholder=l:this.setPlaceHolder(l)}};this.observer=new MutationObserver((a,l)=>{a.forEach(d=>{d.target.textContent||s()})}),this.observer.observe(this.input,{attributeFilter:["class"]}),this.onfocus(this.input,()=>s()),this.onblur(this.input,()=>{let a=l=>{if(this.placeholder.endsWith(l)){let d=this.placeholder.slice(0,this.placeholder.length-l.length);return n.showPlaceholderOnFocus?this.placeholder=d:this.setPlaceHolder(d),!0}else return!1};a(o)||a(i)})}dispose(){super.dispose(),this.observer&&(this.observer.disconnect(),this.observer=void 0)}addToHistory(e){this.value&&(e||this.value!==this.getCurrentValue())&&this.history.add(this.value)}prependHistory(e){let t=this.getHistory();this.clearHistory(),e.forEach(n=>{this.history.add(n)}),t.forEach(n=>{this.history.add(n)})}getHistory(){return this.history.getHistory()}isAtFirstInHistory(){return this.history.isFirst()}isAtLastInHistory(){return this.history.isLast()}isNowhereInHistory(){return this.history.isNowhere()}showNextValue(){this.history.has(this.value)||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.value?this.getNextValue():e),this.value=e??"",Bs(this.value?this.value:u("clearedInput","Cleared Input"))}showPreviousValue(){this.history.has(this.value)||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.value?this.getPreviousValue():e),e&&(this.value=e,Bs(this.value))}clearHistory(){this.history.clear()}setPlaceHolder(e){super.setPlaceHolder(e),this.setTooltip(e)}onBlur(){super.onBlur(),this._onDidBlur.fire()}onFocus(){super.onFocus(),this._onDidFocus.fire()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}};var tX=u("defaultLabel","input"),Ff=class extends On{static OPTION_CHANGE="optionChange";placeholder;validation;label;showCommonFindToggles;fixFocusOnOptionClickEnabled=!0;imeSessionInProgress=!1;additionalTogglesDisposables=this._register(new Qt);controls;regex;wholeWords;caseSensitive;additionalToggles=[];domNode;inputBox;_onDidOptionChange=this._register(new T);onDidOptionChange=this._onDidOptionChange.event;_onKeyDown=this._register(new T);onKeyDown=this._onKeyDown.event;_onMouseDown=this._register(new T);onMouseDown=this._onMouseDown.event;_onInput=this._register(new T);onInput=this._onInput.event;_onKeyUp=this._register(new T);onKeyUp=this._onKeyUp.event;_onCaseSensitiveKeyDown=this._register(new T);onCaseSensitiveKeyDown=this._onCaseSensitiveKeyDown.event;_onRegexKeyDown=this._register(new T);onRegexKeyDown=this._onRegexKeyDown.event;constructor(e,t,n){super(),this.placeholder=n.placeholder||"",this.validation=n.validation,this.label=n.label||tX,this.showCommonFindToggles=!!n.showCommonFindToggles;let i=n.appendCaseSensitiveLabel||"",o=n.appendWholeWordsLabel||"",s=n.appendRegexLabel||"",a=n.history||[],l=!!n.flexibleHeight,d=!!n.flexibleWidth,c=n.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new op(this.domNode,t,{placeholder:this.placeholder||"",ariaLabel:this.label||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:n.showHistoryHint,flexibleHeight:l,flexibleWidth:d,flexibleMaxHeight:c,inputBoxStyles:n.inputBoxStyles}));let p=this._register(Cc());if(this.showCommonFindToggles){this.regex=this._register(new Uw({appendTitle:s,isChecked:!1,hoverDelegate:p,...n.toggleStyles})),this._register(this.regex.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.regex.onKeyDown(g=>{this._onRegexKeyDown.fire(g)})),this.wholeWords=this._register(new Hw({appendTitle:o,isChecked:!1,hoverDelegate:p,...n.toggleStyles})),this._register(this.wholeWords.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this.caseSensitive=this._register(new Vw({appendTitle:i,isChecked:!1,hoverDelegate:p,...n.toggleStyles})),this._register(this.caseSensitive.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.caseSensitive.onKeyDown(g=>{this._onCaseSensitiveKeyDown.fire(g)}));let h=[this.caseSensitive.domNode,this.wholeWords.domNode,this.regex.domNode];this.onkeydown(this.domNode,g=>{if(g.equals(15)||g.equals(17)||g.equals(9)){let f=h.indexOf(this.domNode.ownerDocument.activeElement);if(f>=0){let m=-1;g.equals(17)?m=(f+1)%h.length:g.equals(15)&&(f===0?m=h.length-1:m=f-1),g.equals(9)?(h[f].blur(),this.inputBox.focus()):m>=0&&h[m].focus(),qe.stop(g,!0)}}})}this.controls=document.createElement("div"),this.controls.className="controls",this.controls.style.display=this.showCommonFindToggles?"":"none",this.caseSensitive&&this.controls.append(this.caseSensitive.domNode),this.wholeWords&&this.controls.appendChild(this.wholeWords.domNode),this.regex&&this.controls.appendChild(this.regex.domNode),this.setAdditionalToggles(n?.additionalToggles),this.controls&&this.domNode.appendChild(this.controls),e?.appendChild(this.domNode),this._register(U(this.inputBox.inputElement,"compositionstart",h=>{this.imeSessionInProgress=!0})),this._register(U(this.inputBox.inputElement,"compositionend",h=>{this.imeSessionInProgress=!1,this._onInput.fire()})),this.onkeydown(this.inputBox.inputElement,h=>this._onKeyDown.fire(h)),this.onkeyup(this.inputBox.inputElement,h=>this._onKeyUp.fire(h)),this.oninput(this.inputBox.inputElement,h=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,h=>this._onMouseDown.fire(h))}get isImeSessionInProgress(){return this.imeSessionInProgress}get onDidChange(){return this.inputBox.onDidChange}layout(e){this.inputBox.layout(),this.updateInputBoxPadding(e.collapsedFindWidget)}enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.regex?.enable(),this.wholeWords?.enable(),this.caseSensitive?.enable();for(let e of this.additionalToggles)e.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.regex?.disable(),this.wholeWords?.disable(),this.caseSensitive?.disable();for(let e of this.additionalToggles)e.disable()}setFocusInputOnOptionClick(e){this.fixFocusOnOptionClickEnabled=e}setEnabled(e){e?this.enable():this.disable()}setAdditionalToggles(e){for(let t of this.additionalToggles)t.domNode.remove();this.additionalToggles=[],this.additionalTogglesDisposables.value=new X;for(let t of e??[])this.additionalTogglesDisposables.value.add(t),this.controls.appendChild(t.domNode),this.additionalTogglesDisposables.value.add(t.onChange(n=>{this._onDidOptionChange.fire(n),!n&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus()})),this.additionalToggles.push(t);this.additionalToggles.length>0&&(this.controls.style.display=""),this.updateInputBoxPadding()}updateInputBoxPadding(e=!1){e?this.inputBox.paddingRight=0:this.inputBox.paddingRight=(this.caseSensitive?.width()??0)+(this.wholeWords?.width()??0)+(this.regex?.width()??0)+this.additionalToggles.reduce((t,n)=>t+n.width(),0)}clear(){this.clearValidation(),this.setValue(""),this.focus()}getValue(){return this.inputBox.value}setValue(e){this.inputBox.value!==e&&(this.inputBox.value=e)}onSearchSubmit(){this.inputBox.addToHistory()}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getCaseSensitive(){return this.caseSensitive?.checked??!1}setCaseSensitive(e){this.caseSensitive&&(this.caseSensitive.checked=e)}getWholeWords(){return this.wholeWords?.checked??!1}setWholeWords(e){this.wholeWords&&(this.wholeWords.checked=e)}getRegex(){return this.regex?.checked??!1}setRegex(e){this.regex&&(this.regex.checked=e,this.validate())}focusOnCaseSensitive(){this.caseSensitive?.focus()}focusOnRegex(){this.regex?.focus()}_lastHighlightFindOptions=0;highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox.validate()}showMessage(e){this.inputBox.showMessage(e)}clearMessage(){this.inputBox.hideMessage()}clearValidation(){this.inputBox.hideMessage()}};var nX=u("defaultLabel","input"),iX=u("label.preserveCaseToggle","Preserve Case"),pA=class extends Er{constructor(e){super({icon:re.preserveCase,title:iX+e.appendTitle,isChecked:e.isChecked,hoverDelegate:e.hoverDelegate??pt("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},Kw=class extends On{constructor(t,n,i,o){super();this._showOptionButtons=i;this.contextViewProvider=n,this.placeholder=o.placeholder||"",this.validation=o.validation,this.label=o.label||nX;let s=o.appendPreserveCaseLabel||"",a=o.history||[],l=!!o.flexibleHeight,d=!!o.flexibleWidth,c=o.flexibleMaxHeight;this.domNode=document.createElement("div"),this.domNode.classList.add("monaco-findInput"),this.inputBox=this._register(new op(this.domNode,this.contextViewProvider,{ariaLabel:this.label||"",placeholder:this.placeholder||"",validationOptions:{validation:this.validation},history:a,showHistoryHint:o.showHistoryHint,flexibleHeight:l,flexibleWidth:d,flexibleMaxHeight:c,inputBoxStyles:o.inputBoxStyles})),this.preserveCase=this._register(new pA({appendTitle:s,isChecked:!1,...o.toggleStyles})),this._register(this.preserveCase.onChange(g=>{this._onDidOptionChange.fire(g),!g&&this.fixFocusOnOptionClickEnabled&&this.inputBox.focus(),this.validate()})),this._register(this.preserveCase.onKeyDown(g=>{this._onPreserveCaseKeyDown.fire(g)})),this._showOptionButtons?this.cachedOptionsWidth=this.preserveCase.width():this.cachedOptionsWidth=0;let p=[this.preserveCase.domNode];this.onkeydown(this.domNode,g=>{if(g.equals(15)||g.equals(17)||g.equals(9)){let f=p.indexOf(this.domNode.ownerDocument.activeElement);if(f>=0){let m=-1;g.equals(17)?m=(f+1)%p.length:g.equals(15)&&(f===0?m=p.length-1:m=f-1),g.equals(9)?(p[f].blur(),this.inputBox.focus()):m>=0&&p[m].focus(),qe.stop(g,!0)}}});let h=document.createElement("div");h.className="controls",h.style.display=this._showOptionButtons?"block":"none",h.appendChild(this.preserveCase.domNode),this.domNode.appendChild(h),t?.appendChild(this.domNode),this.onkeydown(this.inputBox.inputElement,g=>this._onKeyDown.fire(g)),this.onkeyup(this.inputBox.inputElement,g=>this._onKeyUp.fire(g)),this.oninput(this.inputBox.inputElement,g=>this._onInput.fire()),this.onmousedown(this.inputBox.inputElement,g=>this._onMouseDown.fire(g))}static OPTION_CHANGE="optionChange";contextViewProvider;placeholder;validation;label;fixFocusOnOptionClickEnabled=!0;preserveCase;cachedOptionsWidth=0;domNode;inputBox;_onDidOptionChange=this._register(new T);onDidOptionChange=this._onDidOptionChange.event;_onKeyDown=this._register(new T);onKeyDown=this._onKeyDown.event;_onMouseDown=this._register(new T);onMouseDown=this._onMouseDown.event;_onInput=this._register(new T);onInput=this._onInput.event;_onKeyUp=this._register(new T);onKeyUp=this._onKeyUp.event;_onPreserveCaseKeyDown=this._register(new T);onPreserveCaseKeyDown=this._onPreserveCaseKeyDown.event;enable(){this.domNode.classList.remove("disabled"),this.inputBox.enable(),this.preserveCase.enable()}disable(){this.domNode.classList.add("disabled"),this.inputBox.disable(),this.preserveCase.disable()}setFocusInputOnOptionClick(t){this.fixFocusOnOptionClickEnabled=t}setEnabled(t){t?this.enable():this.disable()}clear(){this.clearValidation(),this.setValue(""),this.focus()}getValue(){return this.inputBox.value}setValue(t){this.inputBox.value!==t&&(this.inputBox.value=t)}onSearchSubmit(){this.inputBox.addToHistory()}applyStyles(){}select(){this.inputBox.select()}focus(){this.inputBox.focus()}getPreserveCase(){return this.preserveCase.checked}setPreserveCase(t){this.preserveCase.checked=t}focusOnPreserve(){this.preserveCase.focus()}_lastHighlightFindOptions=0;highlightFindOptions(){this.domNode.classList.remove("highlight-"+this._lastHighlightFindOptions),this._lastHighlightFindOptions=1-this._lastHighlightFindOptions,this.domNode.classList.add("highlight-"+this._lastHighlightFindOptions)}validate(){this.inputBox?.validate()}showMessage(t){this.inputBox?.showMessage(t)}clearMessage(){this.inputBox?.hideMessage()}clearValidation(){this.inputBox?.hideMessage()}set width(t){this.inputBox.paddingRight=this.cachedOptionsWidth,this.domNode.style.width=t+"px"}dispose(){super.dispose()}};var qw=new B("suggestWidgetVisible",!1,u("suggestWidgetVisible","Whether suggestion are visible")),hA="historyNavigationWidgetFocus",eK="historyNavigationForwardsEnabled",tK="historyNavigationBackwardsEnabled",VI,Gw=[];function HI(r,e){if(Gw.includes(e))throw new Error("Cannot register the same widget multiple times");Gw.push(e);let t=new X,n=new B(hA,!1).bindTo(r),i=new B(eK,!0).bindTo(r),o=new B(tK,!0).bindTo(r),s=()=>{n.set(!0),VI=e},a=()=>{n.set(!1),VI===e&&(VI=void 0)};return fr(e.element)&&s(),t.add(e.onDidFocus(()=>s())),t.add(e.onDidBlur(()=>a())),t.add(me(()=>{Gw.splice(Gw.indexOf(e),1),a()})),{historyNavigationForwardsEnablement:i,historyNavigationBackwardsEnablement:o,dispose(){t.dispose()}}}var Bf=class extends op{constructor(e,t,n,i){super(e,t,n);let o=this._register(i.createScoped(this.element));this._register(HI(o,this))}};Bf=_([y(3,Ne)],Bf);var jw=class extends Ff{constructor(e,t,n,i){super(e,t,n);let o=this._register(i.createScoped(this.inputBox.element));this._register(HI(o,this.inputBox))}};jw=_([y(3,Ne)],jw);var $w=class extends Kw{constructor(e,t,n,i,o=!1){super(e,t,o,n);let s=this._register(i.createScoped(this.inputBox.element));this._register(HI(s,this.inputBox))}};$w=_([y(3,Ne)],$w);Sn.registerCommandAndKeybindingRule({id:"history.showPrevious",weight:200,when:oe.and(oe.has(hA),oe.equals(tK,!0),oe.not("isComposing"),qw.isEqualTo(!1)),primary:16,secondary:[528],handler:r=>{VI?.showPreviousValue()}});Sn.registerCommandAndKeybindingRule({id:"history.showNext",weight:200,when:oe.and(oe.has(hA),oe.equals(eK,!0),oe.not("isComposing"),qw.isEqualTo(!1)),primary:18,secondary:[530],handler:r=>{VI?.showNextValue()}});var $e={Visible:qw,HasFocusedSuggestion:new B("suggestWidgetHasFocusedSuggestion",!1,u("suggestWidgetHasSelection","Whether any suggestion is focused")),DetailsVisible:new B("suggestWidgetDetailsVisible",!1,u("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new B("suggestWidgetMultipleSuggestions",!1,u("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new B("suggestionMakesTextEdit",!0,u("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new B("acceptSuggestionOnEnter",!0,u("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new B("suggestionHasInsertAndReplaceRange",!1,u("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new B("suggestionInsertMode",void 0,{type:"string",description:u("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new B("suggestionCanResolve",!1,u("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},cd=new Je("suggestWidgetStatusBar"),gA=class{constructor(e,t,n,i){this.position=e;this.completion=t;this.container=n;this.provider=i;this.textLabel=typeof t.label=="string"?t.label:t.label?.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),this.extensionId=t.extensionId,D.isIRange(t.range)?(this.editStart=new F(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new F(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new F(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||D.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new F(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new F(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new F(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||D.spansMultipleLines(t.range.insert)||D.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),typeof i.resolveCompletionItem!="function"&&(this._resolveCache=Promise.resolve(),this._resolveDuration=0)}_brand;editStart;editInsertEnd;editReplaceEnd;textLabel;labelLow;sortTextLow;filterTextLow;isInvalid=!1;score=Zs.Default;distance=0;idx;word;extensionId;_resolveDuration;_resolveCache;get isResolved(){return this._resolveDuration!==void 0}get resolveDuration(){return this._resolveDuration!==void 0?this._resolveDuration:-1}async resolve(e){if(!this._resolveCache){let t=e.onCancellationRequested(()=>{this._resolveCache=void 0,this._resolveDuration=void 0}),n=new Vo(!0);this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then(i=>{Object.assign(this.completion,i),this._resolveDuration=n.elapsed()},i=>{qd(i)&&(this._resolveCache=void 0,this._resolveDuration=void 0)}).finally(()=>{t.dispose()})}return this._resolveCache}};var UI=class r{constructor(e=2,t=new Set,n=new Set,i=new Map,o=!0){this.snippetSortOrder=e;this.kindFilter=t;this.providerFilter=n;this.providerItemsToReuse=i;this.showDeprecated=o}static default=new r},rp;function nK(){return rp}function iK(r){let e=rp;return rp=r,e}var mA=class{constructor(e,t,n,i){this.items=e;this.needsClipboard=t;this.durations=n;this.disposable=i}};async function vA(r,e,t,n=UI.default,i={triggerKind:0},o=Yt.None){let s=new Vo;t=t.clone();let a=e.getWordAtPosition(t),l=a?new D(t.lineNumber,a.startColumn,t.lineNumber,a.endColumn):D.fromPositions(t),d={replace:l,insert:l.setEndPosition(t.lineNumber,t.column)},c=[],p=new X,h=[],g=!1,f=(b,v,S)=>{let x=!1;if(!v)return x;for(let E of v.suggestions)if(!n.kindFilter.has(E.kind)){if(!n.showDeprecated&&E?.tags?.includes(1))continue;E.range||(E.range=d),E.sortText||(E.sortText=typeof E.label=="string"?E.label:E.label.label),!g&&E.insertTextRules&&E.insertTextRules&4&&(g=xr.guessNeedsClipboard(E.insertText)),c.push(new gA(t,E,v,b)),x=!0}return pu(v)&&p.add(v),h.push({providerName:b._debugDisplayName??"unknown_provider",elapsedProvider:v.duration??-1,elapsedOverall:S.elapsed()}),x},m=(async()=>{if(!rp||n.kindFilter.has(27))return;let b=n.providerItemsToReuse.get(rp);if(b){b.forEach(x=>c.push(x));return}if(n.providerFilter.size>0&&!n.providerFilter.has(rp))return;let v=new Vo,S=await rp.provideCompletionItems(e,t,i,o);f(rp,S,v)})();for(let b of r.orderedGroups(e)){let v=!1;if(await Promise.all(b.map(async S=>{if(n.providerItemsToReuse.has(S)){let x=n.providerItemsToReuse.get(S);x.forEach(E=>c.push(E)),v=v||x.length>0;return}if(!(n.providerFilter.size>0&&!n.providerFilter.has(S)))try{let x=new Vo,E=await S.provideCompletionItems(e,t,i,o);v=f(S,E,x)||v}catch(x){wl(x)}})),v||o.isCancellationRequested)break}return await m,o.isCancellationRequested?(p.dispose(),Promise.reject(new Ro)):new mA(c.sort(aX(n.snippetSortOrder)),g,{entries:h,elapsed:s.elapsed()},p)}function yA(r,e){if(r.sortTextLow&&e.sortTextLow){if(r.sortTextLow<e.sortTextLow)return-1;if(r.sortTextLow>e.sortTextLow)return 1}return r.textLabel<e.textLabel?-1:r.textLabel>e.textLabel?1:r.completion.kind-e.completion.kind}function rX(r,e){if(r.completion.kind!==e.completion.kind){if(r.completion.kind===27)return-1;if(e.completion.kind===27)return 1}return yA(r,e)}function sX(r,e){if(r.completion.kind!==e.completion.kind){if(r.completion.kind===27)return 1;if(e.completion.kind===27)return-1}return yA(r,e)}var Yw=new Map;Yw.set(0,rX);Yw.set(2,sX);Yw.set(1,yA);function aX(r){return Yw.get(r)}St.registerCommand("_executeCompletionItemProvider",async(r,...e)=>{let[t,n,i,o]=e;Ao(Z.isUri(t)),Ao(F.isIPosition(n)),Ao(typeof i=="string"||!i),Ao(typeof o=="number"||!o);let{completionProvider:s}=r.get(no),a=await r.get(Ic).createModelReference(t);try{let l={incomplete:!1,suggestions:[]},d=[],c=a.object.textEditorModel.validatePosition(n),p=await vA(s,a.object.textEditorModel,c,void 0,{triggerCharacter:i??void 0,triggerKind:i?1:0});for(let h of p.items)d.length<(o??0)&&d.push(h.resolve(Yt.None)),l.incomplete=l.incomplete||h.container.incomplete,l.suggestions.push(h.completion);try{return await Promise.all(d),l}finally{setTimeout(()=>p.disposable.dispose(),100)}}finally{a.dispose()}});function Xw(r,e){r.getContribution("editor.contrib.suggestController")?.triggerSuggest(new Set().add(e),void 0,!0)}var Jh=class{static isAllOff(e){return e.other==="off"&&e.comments==="off"&&e.strings==="off"}static isAllOn(e){return e.other==="on"&&e.comments==="on"&&e.strings==="on"}static valueFor(e,t){switch(t){case 1:return e.comments;case 2:return e.strings;default:return e.other}}};var pHe=new B("isMac",Pe,u("isMac","Whether the operating system is macOS")),hHe=new B("isLinux",Xt,u("isLinux","Whether the operating system is Linux")),gHe=new B("isWindows",It,u("isWindows","Whether the operating system is Windows")),mHe=new B("isWeb",Ri,u("isWeb","Whether the platform is a web browser")),oK=new B("isMacNative",Pe&&!Ri,u("isMacNative","Whether the operating system is macOS on a non-browser platform")),fHe=new B("isIOS",li,u("isIOS","Whether the operating system is iOS")),bHe=new B("isMobile",Sx,u("isMobile","Whether the platform is a mobile web browser")),vHe=new B("isDevelopment",!1,!0),yHe=new B("productQualityType","",u("productQualityType","Quality type of VS Code")),Wf="inputFocus",rK=new B(Wf,!1,u("inputFocus","Whether keyboard focus is inside an input box"));var ro=j("labelService");var Zw;(e=>e.DEFAULT={allowTrailingComma:!0})(Zw||={});function SA(r,e=!1){let t=0,n=r.length,i="",o=0,s=16,a=0;function l(m){let b=0,v=0;for(;b<m;){let S=r.charCodeAt(t);if(S>=48&&S<=57)v=v*16+S-48;else if(S>=65&&S<=70)v=v*16+S-65+10;else if(S>=97&&S<=102)v=v*16+S-97+10;else break;t++,b++}return b<m&&(v=-1),v}function d(m){t=m,i="",o=0,s=16,a=0}function c(){let m=t;if(r.charCodeAt(t)===48)t++;else for(t++;t<r.length&&Vf(r.charCodeAt(t));)t++;if(t<r.length&&r.charCodeAt(t)===46)if(t++,t<r.length&&Vf(r.charCodeAt(t)))for(t++;t<r.length&&Vf(r.charCodeAt(t));)t++;else return a=3,r.substring(m,t);let b=t;if(t<r.length&&(r.charCodeAt(t)===69||r.charCodeAt(t)===101))if(t++,(t<r.length&&r.charCodeAt(t)===43||r.charCodeAt(t)===45)&&t++,t<r.length&&Vf(r.charCodeAt(t))){for(t++;t<r.length&&Vf(r.charCodeAt(t));)t++;b=t}else a=3;return r.substring(m,b)}function p(){let m="",b=t;for(;;){if(t>=n){m+=r.substring(b,t),a=2;break}let v=r.charCodeAt(t);if(v===34){m+=r.substring(b,t),t++;break}if(v===92){if(m+=r.substring(b,t),t++,t>=n){a=2;break}switch(r.charCodeAt(t++)){case 34:m+='"';break;case 92:m+="\\";break;case 47:m+="/";break;case 98:m+="\b";break;case 102:m+="\f";break;case 110:m+=`
`;break;case 114:m+="\r";break;case 116:m+="	";break;case 117:{let x=l(4);x>=0?m+=String.fromCharCode(x):a=4;break}default:a=5}b=t;continue}if(v>=0&&v<=31)if(Qw(v)){m+=r.substring(b,t),a=2;break}else a=6;t++}return m}function h(){if(i="",a=0,o=t,t>=n)return o=n,s=17;let m=r.charCodeAt(t);if(IA(m)){do t++,i+=String.fromCharCode(m),m=r.charCodeAt(t);while(IA(m));return s=15}if(Qw(m))return t++,i+=String.fromCharCode(m),m===13&&r.charCodeAt(t)===10&&(t++,i+=`
`),s=14;switch(m){case 123:return t++,s=1;case 125:return t++,s=2;case 91:return t++,s=3;case 93:return t++,s=4;case 58:return t++,s=6;case 44:return t++,s=5;case 34:return t++,i=p(),s=10;case 47:{let b=t-1;if(r.charCodeAt(t+1)===47){for(t+=2;t<n&&!Qw(r.charCodeAt(t));)t++;return i=r.substring(b,t),s=12}if(r.charCodeAt(t+1)===42){t+=2;let v=n-1,S=!1;for(;t<v;){if(r.charCodeAt(t)===42&&r.charCodeAt(t+1)===47){t+=2,S=!0;break}t++}return S||(t++,a=1),i=r.substring(b,t),s=13}return i+=String.fromCharCode(m),t++,s=16}case 45:if(i+=String.fromCharCode(m),t++,t===n||!Vf(r.charCodeAt(t)))return s=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return i+=c(),s=11;default:for(;t<n&&g(m);)t++,m=r.charCodeAt(t);if(o!==t){switch(i=r.substring(o,t),i){case"true":return s=8;case"false":return s=9;case"null":return s=7}return s=16}return i+=String.fromCharCode(m),t++,s=16}}function g(m){if(IA(m)||Qw(m))return!1;switch(m){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function f(){let m;do m=h();while(m>=12&&m<=15);return m}return{setPosition:d,getPosition:()=>t,scan:e?f:h,getToken:()=>s,getTokenValue:()=>i,getTokenOffset:()=>o,getTokenLength:()=>t-o,getTokenError:()=>a}}function IA(r){return r===32||r===9||r===11||r===12||r===160||r===5760||r>=8192&&r<=8203||r===8239||r===8287||r===12288||r===65279}function Qw(r){return r===10||r===13||r===8232||r===8233}function Vf(r){return r>=48&&r<=57}function nl(r,e=[],t=Zw.DEFAULT){let n=null,i=[],o=[];function s(l){Array.isArray(i)?i.push(l):n!==null&&(i[n]=l)}return zI(r,{onObjectBegin:()=>{let l={};s(l),o.push(i),i=l,n=null},onObjectProperty:l=>{n=l},onObjectEnd:()=>{i=o.pop()},onArrayBegin:()=>{let l=[];s(l),o.push(i),i=l,n=null},onArrayEnd:()=>{i=o.pop()},onLiteralValue:s,onError:(l,d,c)=>{e.push({error:l,offset:d,length:c})}},t),i[0]}function sK(r,e=[],t=Zw.DEFAULT){let n={type:"array",offset:-1,length:-1,children:[],parent:void 0};function i(l){n.type==="property"&&(n.length=l-n.offset,n=n.parent)}function o(l){return n.children.push(l),l}zI(r,{onObjectBegin:l=>{n=o({type:"object",offset:l,length:-1,parent:n,children:[]})},onObjectProperty:(l,d,c)=>{n=o({type:"property",offset:d,length:-1,parent:n,children:[]}),n.children.push({type:"string",value:l,offset:d,length:c,parent:n})},onObjectEnd:(l,d)=>{n.length=l+d-n.offset,n=n.parent,i(l+d)},onArrayBegin:(l,d)=>{n=o({type:"array",offset:l,length:-1,parent:n,children:[]})},onArrayEnd:(l,d)=>{n.length=l+d-n.offset,n=n.parent,i(l+d)},onLiteralValue:(l,d,c)=>{o({type:xA(l),offset:d,length:c,parent:n,value:l}),i(d+c)},onSeparator:(l,d,c)=>{n.type==="property"&&(l===":"?n.colonOffset=d:l===","&&i(d))},onError:(l,d,c)=>{e.push({error:l,offset:d,length:c})}},t);let a=n.children[0];return a&&delete a.parent,a}function CA(r,e){if(!r)return;let t=r;for(let n of e)if(typeof n=="string"){if(t.type!=="object"||!Array.isArray(t.children))return;let i=!1;for(let o of t.children)if(Array.isArray(o.children)&&o.children[0].value===n){t=o.children[1],i=!0;break}if(!i)return}else{let i=n;if(t.type!=="array"||i<0||!Array.isArray(t.children)||i>=t.children.length)return;t=t.children[i]}return t}function zI(r,e,t=Zw.DEFAULT){let n=SA(r,!1);function i(M){return M?()=>M(n.getTokenOffset(),n.getTokenLength()):()=>!0}function o(M){return M?K=>M(K,n.getTokenOffset(),n.getTokenLength()):()=>!0}let s=i(e.onObjectBegin),a=o(e.onObjectProperty),l=i(e.onObjectEnd),d=i(e.onArrayBegin),c=i(e.onArrayEnd),p=o(e.onLiteralValue),h=o(e.onSeparator),g=i(e.onComment),f=o(e.onError),m=t&&t.disallowComments,b=t&&t.allowTrailingComma;function v(){for(;;){let M=n.scan();switch(n.getTokenError()){case 4:S(14);break;case 5:S(15);break;case 3:S(13);break;case 1:m||S(11);break;case 2:S(12);break;case 6:S(16);break}switch(M){case 12:case 13:m?S(10):g();break;case 16:S(1);break;case 15:case 14:break;default:return M}}}function S(M,K=[],$=[]){if(f(M),K.length+$.length>0){let Q=n.getToken();for(;Q!==17;){if(K.indexOf(Q)!==-1){v();break}else if($.indexOf(Q)!==-1)break;Q=v()}}}function x(M){let K=n.getTokenValue();return M?p(K):a(K),v(),!0}function E(){switch(n.getToken()){case 11:{let M=0;try{M=JSON.parse(n.getTokenValue()),typeof M!="number"&&(S(2),M=0)}catch{S(2)}p(M);break}case 7:p(null);break;case 8:p(!0);break;case 9:p(!1);break;default:return!1}return v(),!0}function w(){return n.getToken()!==10?(S(3,[],[2,5]),!1):(x(!1),n.getToken()===6?(h(":"),v(),O()||S(4,[],[2,5])):S(5,[],[2,5]),!0)}function P(){s(),v();let M=!1;for(;n.getToken()!==2&&n.getToken()!==17;){if(n.getToken()===5){if(M||S(4,[],[]),h(","),v(),n.getToken()===2&&b)break}else M&&S(6,[],[]);w()||S(4,[],[2,5]),M=!0}return l(),n.getToken()!==2?S(7,[2],[]):v(),!0}function R(){d(),v();let M=!1;for(;n.getToken()!==4&&n.getToken()!==17;){if(n.getToken()===5){if(M||S(4,[],[]),h(","),v(),n.getToken()===4&&b)break}else M&&S(6,[],[]);O()||S(4,[],[4,5]),M=!0}return c(),n.getToken()!==4?S(8,[4],[]):v(),!0}function O(){switch(n.getToken()){case 3:return R();case 1:return P();case 10:return x(!0);default:return E()}}return v(),n.getToken()===17?t.allowEmptyContent?!0:(S(4,[],[]),!1):O()?(n.getToken()!==17&&S(9,[],[]),!0):(S(4,[],[]),!1)}function xA(r){switch(typeof r){case"boolean":return"boolean";case"number":return"number";case"string":return"string";case"object":{if(r){if(Array.isArray(r))return"array"}else return"null";return"object"}default:return"null"}}function lK(r,e,t){let n,i,o,s,a;if(e){for(s=e.offset,a=s+e.length,o=s;o>0&&!KI(r,o-1);)o--;let x=a;for(;x<r.length&&!KI(r,x);)x++;i=r.substring(o,x),n=lX(i,t)}else i=r,n=0,o=0,s=0,a=r.length;let l=dK(t,r),d=!1,c=0,p;t.insertSpaces?p=EA(" ",t.tabSize||4):p="	";let h=SA(i,!1),g=!1;function f(){return l+EA(p,n+c)}function m(){let x=h.scan();for(d=!1;x===15||x===14;)d=d||x===14,x=h.scan();return g=x===16||h.getTokenError()!==0,x}let b=[];function v(x,E,w){!g&&E<a&&w>s&&r.substring(E,w)!==x&&b.push({offset:E,length:w-E,content:x})}let S=m();if(S!==17){let x=h.getTokenOffset()+o,E=EA(p,n);v(E,o,x)}for(;S!==17;){let x=h.getTokenOffset()+h.getTokenLength()+o,E=m(),w="";for(;!d&&(E===12||E===13);){let R=h.getTokenOffset()+o;v(" ",x,R),x=h.getTokenOffset()+h.getTokenLength()+o,w=E===12?f():"",E=m()}if(E===2)S!==1&&(c--,w=f());else if(E===4)S!==3&&(c--,w=f());else{switch(S){case 3:case 1:c++,w=f();break;case 5:case 12:w=f();break;case 13:d?w=f():w=" ";break;case 6:w=" ";break;case 10:if(E===6){w="";break}case 7:case 8:case 9:case 11:case 2:case 4:E===12||E===13?w=" ":E!==5&&E!==17&&(g=!0);break;case 16:g=!0;break}d&&(E===12||E===13)&&(w=f())}let P=h.getTokenOffset()+o;v(w,x,P),S=E}return b}function EA(r,e){let t="";for(let n=0;n<e;n++)t+=r;return t}function lX(r,e){let t=0,n=0,i=e.tabSize||4;for(;t<r.length;){let o=r.charAt(t);if(o===" ")n++;else if(o==="	")n+=i;else break;t++}return Math.floor(n/i)}function dK(r,e){for(let t=0;t<e.length;t++){let n=e.charAt(t);if(n==="\r")return t+1<e.length&&e.charAt(t+1)===`
`?`\r
`:"\r";if(n===`
`)return`
`}return r&&r.eol||`
`}function KI(r,e){return`\r
`.indexOf(r.charAt(e))!==-1}function ud(r,e,t,n,i){let o=e.slice(),a=sK(r,[]),l,d;for(;o.length>0&&(d=o.pop(),l=CA(a,o),l===void 0&&t!==void 0);)typeof d=="string"?t={[d]:t}:t=[t];if(l)if(l.type==="object"&&typeof d=="string"&&Array.isArray(l.children)){let c=CA(l,[d]);if(c!==void 0)if(t===void 0){if(!c.parent)throw new Error("Malformed AST");let p=l.children.indexOf(c.parent),h,g=c.parent.offset+c.parent.length;if(p>0){let f=l.children[p-1];h=f.offset+f.length}else h=l.offset+1,l.children.length>1&&(g=l.children[1].offset);return eg(r,{offset:h,length:g-h,content:""},n)}else return eg(r,{offset:c.offset,length:c.length,content:JSON.stringify(t)},n);else{if(t===void 0)return[];let p=`${JSON.stringify(d)}: ${JSON.stringify(t)}`,h=i?i(l.children.map(f=>f.children[0].value)):l.children.length,g;if(h>0){let f=l.children[h-1];g={offset:f.offset+f.length,length:0,content:","+p}}else l.children.length===0?g={offset:l.offset+1,length:0,content:p}:g={offset:l.offset+1,length:0,content:p+","};return eg(r,g,n)}}else if(l.type==="array"&&typeof d=="number"&&Array.isArray(l.children))if(t!==void 0){let c=`${JSON.stringify(t)}`,p;if(l.children.length===0||d===0)p={offset:l.offset+1,length:0,content:l.children.length===0?c:c+","};else{let h=d===-1||d>l.children.length?l.children.length:d,g=l.children[h-1];p={offset:g.offset+g.length,length:0,content:","+c}}return eg(r,p,n)}else{let c=d,p=l.children[c],h;if(l.children.length===1)h={offset:l.offset+1,length:l.length-2,content:""};else if(l.children.length-1===c){let g=l.children[c-1],f=g.offset+g.length,m=l.offset+l.length;h={offset:f,length:m-2-f,content:""}}else h={offset:p.offset,length:l.children[c+1].offset-p.offset,content:""};return eg(r,h,n)}else throw new Error(`Can not add ${typeof d!="number"?"index":"property"} to parent of type ${l.type}`);else return t===void 0?[]:eg(r,{offset:a?a.offset:0,length:a?a.length:0,content:JSON.stringify(t)},n)}function eg(r,e,t){let n=cK(r,e),i=e.offset,o=e.offset+e.content.length;if(e.length===0||e.content.length===0){for(;i>0&&!KI(n,i-1);)i--;for(;o<n.length&&!KI(n,o);)o++}let s=lK(n,{offset:i,length:o-i},t);for(let l=s.length-1;l>=0;l--){let d=s[l];n=cK(n,d),i=Math.min(i,d.offset),o=Math.max(o,d.offset+d.length),o+=d.content.length-d.length}let a=r.length-(n.length-o)-i;return[{offset:i,length:a,content:n.substring(i,o)}]}function cK(r,e){return r.substring(0,e.offset)+e.content+r.substring(e.offset+e.length)}function Jw(r,e=It){return w1(r,e)?r.charAt(0).toUpperCase()+r.slice(1):r}var uK="\u2026",GI="\\\\",jI="~";function pK(r,e=pr){let t=new Array(r.length),n=!1;for(let i=0;i<r.length;i++){let o=r[i];if(o===""){t[i]=`.${e}`;continue}if(!o){t[i]=o;continue}n=!0;let s="",a=o;a.indexOf(GI)===0?(s=a.substr(0,a.indexOf(GI)+GI.length),a=a.substr(a.indexOf(GI)+GI.length)):a.indexOf(e)===0?(s=a.substr(0,a.indexOf(e)+e.length),a=a.substr(a.indexOf(e)+e.length)):a.indexOf(jI)===0&&(s=a.substr(0,a.indexOf(jI)+jI.length),a=a.substr(a.indexOf(jI)+jI.length));let l=a.split(e);for(let d=1;n&&d<=l.length;d++)for(let c=l.length-d;n&&c>=0;c--){n=!1;let p=l.slice(c,c+d).join(e);for(let h=0;!n&&h<r.length;h++)if(h!==i&&r[h]&&r[h].indexOf(p)>-1){let g=c+d===l.length,f=c>0&&r[h].indexOf(e)>-1?e+p:p,m=r[h].endsWith(f);n=!g||m}if(!n){let h="";(l[0].endsWith(":")||s!=="")&&(c===1&&(c=0,d++,p=l[0]+e+p),c>0&&(h=l[0]+e),h=s+h),c>0&&(h=h+uK+e),h=h+p,c+d<l.length&&(h=h+e+uK),t[i]=h}}n&&(t[i]=o)}return t}function e_(r,e){return Pe||e?r.replace(/\(&&\w\)|&&/g,""):It?r.replace(/&&|&/g,t=>t==="&"?"&&":"&"):r.replace(/&&/g,"_")}var $I=j("workspacesService");var TA=j("workspaceEditingService");var nn=j("fileService");function hK(r){return!!(r.capabilities&2048)}var wA=class r extends Error{constructor(t,n){super(t);this.code=n}static create(t,n){let i=new r(t.toString(),n);return uX(i,n),i}};function uX(r,e){return r.name=e?`${e} (FileSystemError)`:"FileSystemError",r}function pX(r){if(!r)return"Unknown";if(r instanceof wA)return r.code;let e=/^(.+) \(FileSystemError\)$/.exec(r.name);if(!e)return"Unknown";switch(e[1]){case"EntryExists":return"EntryExists";case"EntryIsADirectory":return"EntryIsADirectory";case"EntryNotADirectory":return"EntryNotADirectory";case"EntryNotFound":return"EntryNotFound";case"EntryTooLarge":return"EntryTooLarge";case"EntryWriteLocked":return"EntryWriteLocked";case"NoPermissions":return"NoPermissions";case"Unavailable":return"Unavailable"}return"Unknown"}function gK(r){if(r instanceof qI)return r.fileOperationResult;switch(pX(r)){case"EntryNotFound":return 1;case"EntryIsADirectory":return 0;case"EntryNotADirectory":return 9;case"EntryWriteLocked":return 5;case"NoPermissions":return 6;case"EntryExists":return 4;case"EntryTooLarge":return 7;default:return 10}}var qI=class extends Error{constructor(t,n,i){super(t);this.fileOperationResult=n;this.options=i}};var t_=class extends qI{constructor(t,n,i){super(t,2,i);this.stat=n}};var il={OFF:"off",AFTER_DELAY:"afterDelay",ON_FOCUS_CHANGE:"onFocusChange",ON_WINDOW_CHANGE:"onWindowChange"},Hf={OFF:"off",ON_EXIT:"onExit",ON_EXIT_AND_WINDOW_CLOSE:"onExitAndWindowClose"},mK="files.associations";var fK="files.readonlyInclude",bK="files.readonlyExclude";var YI="";var ap=class r{static KB=1024;static MB=r.KB*r.KB;static GB=r.MB*r.KB;static TB=r.GB*r.KB;static formatSize(e){return Uo(e)||(e=0),e<r.KB?u("sizeB","{0}B",e.toFixed(0)):e<r.MB?u("sizeKB","{0}KB",(e/r.KB).toFixed(2)):e<r.GB?u("sizeMB","{0}MB",(e/r.MB).toFixed(2)):e<r.TB?u("sizeGB","{0}GB",(e/r.GB).toFixed(2)):u("sizeTB","{0}TB",(e/r.TB).toFixed(2))}};function vK(r){let e=typeof r=="string"||r?.scheme===ye.vscodeRemote;return typeof r!="string"&&r?.scheme===ye.file?1024*ap.MB:e?10*ap.MB:Ri?50*ap.MB:1024*ap.MB}var hX={Quickaccess:"workbench.contributions.quickaccess"},_A=class{providers=[];defaultProvider=void 0;registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),me(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return Mr([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}clear(){let e=[...this.providers],t=this.defaultProvider;return this.providers=[],this.defaultProvider=void 0,()=>{this.providers=e,this.defaultProvider=t}}};Te.add(hX.Quickaccess,new _A);var kze=new Mi(()=>{let r=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:r,collatorIsNumeric:r.resolvedOptions().numeric}}),Rze=new Mi(()=>({collator:new Intl.Collator(void 0,{numeric:!0})})),Mze=new Mi(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));var Kze=Object.freeze({score:0}),Gze=1<<18,jze=1<<17;var DA=class{constructor(e){this.options=e}getItemLabel(e){return e.label}getItemDescription(e){if(!this.options?.skipDescription)return e.description}getItemPath(e){if(!this.options?.skipPath)return e.resource?.scheme===ye.file?e.resource.fsPath:e.resource?.path}},f4e=new DA,n_=j("quickInputService");var gX=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function Ec(r,e,t,n,i){if(Ae.isThemeIcon(i))return[`codicon-${i.id}`,"predefined-file-icon"];if(Z.isUri(i))return[];let o=n===2?["rootfolder-icon"]:n===1?["folder-icon"]:["file-icon"];if(t){let s;if(t.scheme===ye.data)s=ac.parseMetaData(t).get(ac.META_DATA_LABEL);else{let a=t.path.match(gX);a?(s=i_(a[2].toLowerCase()),a[1]&&o.push(`${i_(a[1].toLowerCase())}-name-dir-icon`)):s=i_(t.authority.toLowerCase())}if(n===2)o.push(`${s}-root-name-folder-icon`);else if(n===1)o.push(`${s}-name-folder-icon`);else{if(s){if(o.push(`${s}-name-file-icon`),o.push("name-file-icon"),s.length<=255){let l=s.split(".");for(let d=1;d<l.length;d++)o.push(`${l.slice(d).join(".")}-ext-file-icon`)}o.push("ext-file-icon")}let a=mX(r,e,t);a&&o.push(`${i_(a)}-lang-file-icon`)}}return o}function mX(r,e,t){if(!t)return null;let n=null;if(t.scheme===ye.data){let o=ac.parseMetaData(t).get(ac.META_DATA_MIME);o&&(n=e.getLanguageIdByMimeType(o))}else{let i=r.getModel(t);i&&(n=i.getLanguageId())}return n&&n!==Ni?n:e.guessLanguageIdByFilepathOrFirstLine(t)}function i_(r){return r.replace(/[\s]/g,"/")}var vs=j("productService"),IK="vscode://schemas/vscode-product";var XI=j("dialogService");var tg=j("fileDialogService");var QI={exports:{}};(function(){function e(o){let s=[];typeof o=="number"&&s.push("code/timeOrigin",o);function a(d){s.push(d,Date.now())}function l(){let d=[];for(let c=0;c<s.length;c+=2)d.push({name:s[c],startTime:s[c+1]});return d}return{mark:a,getMarks:l}}function t(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?e():{mark(o){performance.mark(o)},getMarks(){let o=performance.timeOrigin;typeof o!="number"&&(o=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);let s=[{name:"code/timeOrigin",startTime:Math.round(o)}];for(let a of performance.getEntriesByType("mark"))s.push({name:a.name,startTime:Math.round(o+a.startTime)});return s}};if(typeof process=="object"){let o=performance?.timeOrigin;return e(o)}else return console.trace("perf-util loaded in UNKNOWN environment"),e()}function n(o){return o.MonacoPerformanceMarks||(o.MonacoPerformanceMarks=t()),o.MonacoPerformanceMarks}var i;typeof global=="object"?i=global:typeof self=="object"?i=self:i={},typeof QI=="object"&&typeof QI.exports=="object"?QI.exports=n(i):(console.trace("perf-util defined in UNKNOWN context (neither requirejs or commonjs)"),i.perf=n(i))})();var Vi=QI.exports.mark,o5e=QI.exports.getMarks;var ol=j("IUriIdentityService");function CK(r){let e=r;return!!(e&&typeof e=="object"&&typeof e.id=="string"&&typeof e.isDefault=="boolean"&&typeof e.name=="string"&&Z.isUri(e.location)&&Z.isUri(e.globalStorageHome)&&Z.isUri(e.settingsResource)&&Z.isUri(e.keybindingsResource)&&Z.isUri(e.tasksResource)&&Z.isUri(e.snippetsHome)&&Z.isUri(e.extensionsResource))}var ua=j("IUserDataProfilesService");function o_(r,e,t,n,i,o){return{id:r,name:e,location:t,isDefault:!1,shortName:i?.shortName,icon:i?.icon,globalStorageHome:o&&i?.useDefaultFlags?.globalState?o.globalStorageHome:ft(t,"globalStorage"),settingsResource:o&&i?.useDefaultFlags?.settings?o.settingsResource:ft(t,"settings.json"),keybindingsResource:o&&i?.useDefaultFlags?.keybindings?o.keybindingsResource:ft(t,"keybindings.json"),tasksResource:o&&i?.useDefaultFlags?.tasks?o.tasksResource:ft(t,"tasks.json"),snippetsHome:o&&i?.useDefaultFlags?.snippets?o.snippetsHome:ft(t,"snippets"),extensionsResource:o&&i?.useDefaultFlags?.extensions?o.extensionsResource:ft(t,"extensions.json"),cacheHome:ft(n,r),useDefaultFlags:i?.useDefaultFlags,isTransient:i?.transient}}var r_=class extends N{constructor(t,n,i,o){super();this.environmentService=t;this.fileService=n;this.uriIdentityService=i;this.logService=o;this.profilesHome=ft(this.environmentService.userRoamingDataHome,"profiles"),this.profilesCacheHome=ft(this.environmentService.cacheHome,"CachedProfilesData")}static PROFILES_KEY="userDataProfiles";static PROFILE_ASSOCIATIONS_KEY="profileAssociations";_serviceBrand;enabled=!0;profilesHome;profilesCacheHome;get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.profilesObject.profiles,...this.transientProfilesObject.profiles]}_onDidChangeProfiles=this._register(new T);onDidChangeProfiles=this._onDidChangeProfiles.event;_onWillCreateProfile=this._register(new T);onWillCreateProfile=this._onWillCreateProfile.event;_onWillRemoveProfile=this._register(new T);onWillRemoveProfile=this._onWillRemoveProfile.event;_onDidResetWorkspaces=this._register(new T);onDidResetWorkspaces=this._onDidResetWorkspaces.event;profileCreationPromises=new Map;transientProfilesObject={profiles:[],folders:new bi,workspaces:new bi,emptyWindows:new Map};init(){this._profilesObject=void 0}setEnablement(t){this.enabled!==t&&(this._profilesObject=void 0,this.enabled=t)}isEnabled(){return this.enabled}_profilesObject;get profilesObject(){if(!this._profilesObject){let t=this.createDefaultProfile(),n=[t];if(this.enabled)try{for(let s of this.getStoredProfiles()){if(!s.name||!xt(s.name)||!s.location){this.logService.warn("Skipping the invalid stored profile",s.location||s.name);continue}n.push(o_(zo(s.location),s.name,s.location,this.profilesCacheHome,{shortName:s.shortName,icon:s.icon,useDefaultFlags:s.useDefaultFlags},t))}}catch(s){this.logService.error(s)}let i=new bi,o=new Map;if(n.length)try{let s=this.getStoredProfileAssociations();if(s.workspaces)for(let[a,l]of Object.entries(s.workspaces)){let d=Z.parse(a),c=n.find(p=>p.id===l);c&&i.set(d,c)}if(s.emptyWindows)for(let[a,l]of Object.entries(s.emptyWindows)){let d=n.find(c=>c.id===l);d&&o.set(a,d)}}catch(s){this.logService.error(s)}this._profilesObject={profiles:n,workspaces:i,emptyWindows:o}}return this._profilesObject}createDefaultProfile(){let t=o_("__default__profile__",u("defaultProfile","Default"),this.environmentService.userRoamingDataHome,this.profilesCacheHome);return{...t,extensionsResource:this.getDefaultProfileExtensionsLocation()??t.extensionsResource,isDefault:!0}}async createTransientProfile(t){let n="Temp",i=new RegExp(`${vi(n)}\\s(\\d+)`),o=0;for(let a of this.profiles){let l=i.exec(a.name),d=l?parseInt(l[1]):0;o=d>o?d:o}let s=`${n} ${o+1}`;return this.createProfile(Os(ia()).toString(16),s,{transient:!0},t)}async createNamedProfile(t,n,i){return this.createProfile(Os(ia()).toString(16),t,n,i)}async createProfile(t,n,i,o){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");let s=await this.doCreateProfile(t,n,i);return o&&await this.setProfileForWorkspace(o,s),s}async doCreateProfile(t,n,i){if(!xt(n)||!n)throw new Error("Name of the profile is mandatory and must be of type `string`");let o=this.profileCreationPromises.get(n);return o||(o=(async()=>{try{if(this.profiles.find(d=>d.name===n||d.id===t))throw new Error(`Profile with ${n} name already exists`);let a=o_(t,n,ft(this.profilesHome,t),this.profilesCacheHome,i,this.defaultProfile);await this.fileService.createFolder(a.location);let l=[];return this._onWillCreateProfile.fire({profile:a,join(d){l.push(d)}}),await Ko.settled(l),this.updateProfiles([a],[],[]),a}finally{this.profileCreationPromises.delete(n)}})(),this.profileCreationPromises.set(n,o)),o}async updateProfile(t,n){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");let i=this.profiles.find(o=>o.id===t.id);if(!i)throw new Error(`Profile '${t.name}' does not exist`);return i=o_(i.id,n.name??i.name,i.location,this.profilesCacheHome,{shortName:n.shortName??i.shortName,icon:n.icon===null?void 0:n.icon??i.icon,transient:n.transient??i.isTransient,useDefaultFlags:n.useDefaultFlags??i.useDefaultFlags},this.defaultProfile),this.updateProfiles([],[],[i]),i}async removeProfile(t){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");if(t.isDefault)throw new Error("Cannot remove default profile");let n=this.profiles.find(o=>o.id===t.id);if(!n)throw new Error(`Profile '${t.name}' does not exist`);let i=[];this._onWillRemoveProfile.fire({profile:n,join(o){i.push(o)}});try{await Promise.allSettled(i)}catch(o){this.logService.error(o)}for(let o of[...this.profilesObject.emptyWindows.keys()])n.id===this.profilesObject.emptyWindows.get(o)?.id&&this.profilesObject.emptyWindows.delete(o);for(let o of[...this.profilesObject.workspaces.keys()])n.id===this.profilesObject.workspaces.get(o)?.id&&this.profilesObject.workspaces.delete(o);this.updateStoredProfileAssociations(),this.updateProfiles([],[n],[]);try{await this.fileService.del(n.cacheHome,{recursive:!0})}catch(o){gK(o)!==1&&this.logService.error(o)}}async setProfileForWorkspace(t,n){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");let i=this.profiles.find(o=>o.id===n.id);if(!i)throw new Error(`Profile '${n.name}' does not exist`);this.updateWorkspaceAssociation(t,i)}unsetWorkspace(t,n){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");this.updateWorkspaceAssociation(t,void 0,n)}async resetWorkspaces(){this.transientProfilesObject.folders.clear(),this.transientProfilesObject.workspaces.clear(),this.transientProfilesObject.emptyWindows.clear(),this.profilesObject.workspaces.clear(),this.profilesObject.emptyWindows.clear(),this.updateStoredProfileAssociations(),this._onDidResetWorkspaces.fire()}async cleanUp(){if(this.enabled&&await this.fileService.exists(this.profilesHome)){let t=await this.fileService.resolve(this.profilesHome);await Promise.all((t.children||[]).filter(n=>n.isDirectory&&this.profiles.every(i=>!this.uriIdentityService.extUri.isEqual(i.location,n.resource))).map(n=>this.fileService.del(n.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){if(!this.enabled)return;let t=this.transientProfilesObject.profiles.filter(n=>!this.isProfileAssociatedToWorkspace(n));await Promise.allSettled(t.map(n=>this.removeProfile(n)))}getProfileForWorkspace(t){let n=this.getWorkspace(t),i=Z.isUri(n)?this.profilesObject.workspaces.get(n):this.profilesObject.emptyWindows.get(n);return i||(Pu(t)?this.transientProfilesObject.folders.get(t.uri):qy(t)?this.transientProfilesObject.workspaces.get(t.configPath):this.transientProfilesObject.emptyWindows.get(t.id))}getWorkspace(t){return Pu(t)?t.uri:qy(t)?t.configPath:t.id}isProfileAssociatedToWorkspace(t){return!!([...this.profilesObject.emptyWindows.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location))||[...this.profilesObject.workspaces.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location))||[...this.transientProfilesObject.emptyWindows.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location))||[...this.transientProfilesObject.workspaces.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location))||[...this.transientProfilesObject.folders.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location)))}updateProfiles(t,n,i){let o=[...this.profiles,...t],s=[],a=this.transientProfilesObject.profiles;this.transientProfilesObject.profiles=[];for(let l of o){if(l.isDefault||n.some(c=>l.id===c.id))continue;l=i.find(c=>l.id===c.id)??l;let d=a.find(c=>l.id===c.id);if(l.isTransient)this.transientProfilesObject.profiles.push(l);else{if(d){for(let[c,p]of this.transientProfilesObject.emptyWindows.entries())if(l.id===p.id){this.updateWorkspaceAssociation({id:c},l);break}for(let[c,p]of this.transientProfilesObject.workspaces.entries())if(l.id===p.id){this.updateWorkspaceAssociation({id:"",configPath:c},l);break}for(let[c,p]of this.transientProfilesObject.folders.entries())if(l.id===p.id){this.updateWorkspaceAssociation({id:"",uri:c},l);break}}s.push({location:l.location,name:l.name,shortName:l.shortName,icon:l.icon,useDefaultFlags:l.useDefaultFlags})}}this.saveStoredProfiles(s),this._profilesObject=void 0,this.triggerProfilesChanges(t,n,i)}triggerProfilesChanges(t,n,i){this._onDidChangeProfiles.fire({added:t,removed:n,updated:i,all:this.profiles})}updateWorkspaceAssociation(t,n,i){if(i=n?.isTransient?!0:i,i)Pu(t)?(this.transientProfilesObject.folders.delete(t.uri),n&&this.transientProfilesObject.folders.set(t.uri,n)):qy(t)?(this.transientProfilesObject.workspaces.delete(t.configPath),n&&this.transientProfilesObject.workspaces.set(t.configPath,n)):(this.transientProfilesObject.emptyWindows.delete(t.id),n&&this.transientProfilesObject.emptyWindows.set(t.id,n));else{this.updateWorkspaceAssociation(t,void 0,!0);let o=this.getWorkspace(t);Z.isUri(o)?(this.profilesObject.workspaces.delete(o),n&&this.profilesObject.workspaces.set(o,n)):(this.profilesObject.emptyWindows.delete(o),n&&this.profilesObject.emptyWindows.set(o,n)),this.updateStoredProfileAssociations()}}updateStoredProfileAssociations(){let t={};for(let[i,o]of this.profilesObject.workspaces.entries())t[i.toString()]=o.id;let n={};for(let[i,o]of this.profilesObject.emptyWindows.entries())n[i.toString()]=o.id;this.saveStoredProfileAssociations({workspaces:t,emptyWindows:n}),this._profilesObject=void 0}migrateStoredProfileAssociations(t){let n={},i=this.createDefaultProfile();if(t.workspaces)for(let[s,a]of Object.entries(t.workspaces)){let l=Z.parse(a);n[s]=this.uriIdentityService.extUri.isEqual(l,i.location)?i.id:this.uriIdentityService.extUri.basename(l)}let o={};if(t.emptyWindows)for(let[s,a]of Object.entries(t.emptyWindows)){let l=Z.parse(a);o[s]=this.uriIdentityService.extUri.isEqual(l,i.location)?i.id:this.uriIdentityService.extUri.basename(l)}return{workspaces:n,emptyWindows:o}}getStoredProfiles(){return[]}saveStoredProfiles(t){throw new Error("not implemented")}getStoredProfileAssociations(){return{}}saveStoredProfileAssociations(t){throw new Error("not implemented")}getDefaultProfileExtensionsLocation(){}};r_=_([y(0,di),y(1,nn),y(2,ol),y(3,Vt)],r_);var LA={WIDTH:400,WIDTH_WITH_VERTICAL_PANEL:600,HEIGHT:270};function xK(r){return r.scheme!==ye.file&&r.scheme!==ye.vscodeRemote}function bX(r){if(r.folders.length)return r.folders.every(e=>xK(e.uri))?r.folders[0].uri:void 0;if(r.configuration&&xK(r.configuration))return r.configuration}function EK(r){return bX(r)?.scheme}var Hi=di;function TK(r){switch(r){case 100:return"req";case 101:return"cancel";case 102:return"subscribe";case 103:return"unsubscribe"}}function wK(r){switch(r){case 200:return"init";case 201:return"reply:";case 202:case 203:return"replyErr:";case 204:return"event:"}}function Uf(r){let e=0;for(let t=0;;t+=7){let n=r.read(1);if(e|=(n.buffer[0]&127)<<t,!(n.buffer[0]&128))return e}}var vX=lp(0);function zf(r,e){if(e===0){r.write(vX);return}let t=0;for(let i=e;i!==0;i=i>>>7)t++;let n=Fn.alloc(t);for(let i=0;e!==0;i++)n.buffer[i]=e&127,e=e>>>7,e>0&&(n.buffer[i]|=128);r.write(n)}var RA=class{constructor(e){this.buffer=e}pos=0;read(e){let t=this.buffer.slice(this.pos,this.pos+e);return this.pos+=t.byteLength,t}},MA=class{buffers=[];get buffer(){return Fn.concat(this.buffers)}write(e){this.buffers.push(e)}};function lp(r){let e=Fn.alloc(1);return e.writeUInt8(r,0),e}var ng={Undefined:lp(0),String:lp(1),Buffer:lp(2),VSBuffer:lp(3),Array:lp(4),Object:lp(5),Uint:lp(6)},yX=typeof Buffer<"u";function OA(r,e){if(typeof e>"u")r.write(ng.Undefined);else if(typeof e=="string"){let t=Fn.fromString(e);r.write(ng.String),zf(r,t.byteLength),r.write(t)}else if(yX&&Buffer.isBuffer(e)){let t=Fn.wrap(e);r.write(ng.Buffer),zf(r,t.byteLength),r.write(t)}else if(e instanceof Fn)r.write(ng.VSBuffer),zf(r,e.byteLength),r.write(e);else if(Array.isArray(e)){r.write(ng.Array),zf(r,e.length);for(let t of e)OA(r,t)}else if(typeof e=="number"&&(e|0)===e)r.write(ng.Uint),zf(r,e);else{let t=Fn.fromString(JSON.stringify(e));r.write(ng.Object),zf(r,t.byteLength),r.write(t)}}function PA(r){switch(r.read(1).readUInt8(0)){case 0:return;case 1:return r.read(Uf(r)).toString();case 2:return r.read(Uf(r)).buffer;case 3:return r.read(Uf(r));case 4:{let t=Uf(r),n=[];for(let i=0;i<t;i++)n.push(PA(r));return n}case 5:return JSON.parse(r.read(Uf(r)).toString());case 6:return Uf(r)}}var kA=class{constructor(e,t=null){this.protocol=e;this.protocolListener=this.protocol.onMessage(n=>this.onBuffer(n)),this.logger=t}isDisposed=!1;state=0;activeRequests=new Set;handlers=new Map;lastRequestId=0;protocolListener;logger;_onDidInitialize=new T;onDidInitialize=this._onDidInitialize.event;getChannel(e){let t=this;return{call(n,i,o){return t.isDisposed?Promise.reject(new Ro):t.requestPromise(e,n,i,o)},listen(n,i){return t.isDisposed?z.None:t.requestEvent(e,n,i)}}}requestPromise(e,t,n,i=Yt.None){let o=this.lastRequestId++,a={id:o,type:100,channelName:e,name:t,arg:n};if(i.isCancellationRequested)return Promise.reject(new Ro);let l;return new Promise((c,p)=>{if(i.isCancellationRequested)return p(new Ro);let h=()=>{let b=v=>{switch(v.type){case 201:this.handlers.delete(o),c(v.data);break;case 202:{this.handlers.delete(o);let S=new Error(v.data.message);S.stack=Array.isArray(v.data.stack)?v.data.stack.join(`
`):v.data.stack,S.name=v.data.name,p(S);break}case 203:this.handlers.delete(o),p(v.data);break}};this.handlers.set(o,b),this.sendRequest(a)},g=null;this.state===1?h():(g=lc(b=>this.whenInitialized()),g.then(()=>{g=null,h()}));let f=()=>{g?(g.cancel(),g=null):this.sendRequest({id:o,type:101}),p(new Ro)},m=i.onCancellationRequested(f);l=Li(me(f),m),this.activeRequests.add(l)}).finally(()=>{l.dispose(),this.activeRequests.delete(l)})}requestEvent(e,t,n){let i=this.lastRequestId++,s={id:i,type:102,channelName:e,name:t,arg:n},a=null,l=new T({onWillAddFirstListener:()=>{a=lc(c=>this.whenInitialized()),a.then(()=>{a=null,this.activeRequests.add(l),this.sendRequest(s)})},onDidRemoveLastListener:()=>{a?(a.cancel(),a=null):(this.activeRequests.delete(l),this.sendRequest({id:i,type:103}))}}),d=c=>l.fire(c.data);return this.handlers.set(i,d),l.event}sendRequest(e){switch(e.type){case 100:case 102:{let t=this.send([e.type,e.id,e.channelName,e.name],e.arg);this.logger?.logOutgoing(t,e.id,0,`${TK(e.type)}: ${e.channelName}.${e.name}`,e.arg);return}case 101:case 103:{let t=this.send([e.type,e.id]);this.logger?.logOutgoing(t,e.id,0,TK(e.type));return}}}send(e,t=void 0){let n=new MA;return OA(n,e),OA(n,t),this.sendBuffer(n.buffer)}sendBuffer(e){try{return this.protocol.send(e),e.byteLength}catch{return 0}}onBuffer(e){let t=new RA(e),n=PA(t),i=PA(t),o=n[0];switch(o){case 200:return this.logger?.logIncoming(e.byteLength,0,0,wK(o)),this.onResponse({type:n[0]});case 201:case 202:case 204:case 203:return this.logger?.logIncoming(e.byteLength,n[1],0,wK(o),i),this.onResponse({type:n[0],id:n[1],data:i})}}onResponse(e){if(e.type===200){this.state=1,this._onDidInitialize.fire();return}this.handlers.get(e.id)?.(e)}get onDidInitializePromise(){return z.toPromise(this.onDidInitialize)}whenInitialized(){return this.state===1?Promise.resolve():this.onDidInitializePromise}dispose(){this.isDisposed=!0,this.protocolListener&&(this.protocolListener.dispose(),this.protocolListener=null),rt(this.activeRequests.values()),this.activeRequests.clear()}};_([be],kA.prototype,"onDidInitializePromise",1);var IX;(i=>{function r(o,s,a){let l=o,d=a&&a.disableMarshalling,c=new Map;for(let p in l)t(p)&&c.set(p,z.buffer(l[p],!0,void 0,s));return new class{listen(p,h,g){let f=c.get(h);if(f)return f;let m=l[h];if(typeof m=="function"){if(n(h))return m.call(l,g);if(t(h))return c.set(h,z.buffer(l[h],!0,void 0,s)),c.get(h)}throw new $d(`Event not found: ${h}`)}call(p,h,g){let f=l[h];if(typeof f=="function"){if(!d&&Array.isArray(g))for(let b=0;b<g.length;b++)g[b]=Of(g[b]);let m=f.apply(l,g);return m instanceof Promise||(m=Promise.resolve(m)),m}throw new $d(`Method not found: ${h}`)}}}i.fromService=r;function e(o,s){let a=s&&s.disableMarshalling;return new Proxy({},{get(l,d){if(typeof d=="string")return s?.properties?.has(d)?s.properties.get(d):n(d)?function(c){return o.listen(d,c)}:t(d)?o.listen(d):async function(...c){let p;s&&!ln(s.context)?p=[s.context,...c]:p=c;let h=await o.call(d,p);return a?h:Of(h)};throw new $d(`Property not found: ${String(d)}`)}})}i.toService=e;function t(o){return o[0]==="o"&&o[1]==="n"&&Al(o.charCodeAt(2))}function n(o){return/^onDynamic/.test(o)&&Al(o.charCodeAt(9))}})(IX||={});var SX="diagnosticsService",u7e=j(SX);var CX;(s=>{s.enableDiagnostics=!1,s.records=[];let t=new WeakMap,n=0;function i(a,l){if(!t.has(a)){let d=String(++n);t.set(a,d)}return t.get(a)}function o(a,l,d,c){}s.traceSocketEvent=o})(CX||={});var L7e=j("remoteAuthorityResolverService");var V7e=j("remoteSocketFactoryService");var xX="signService",z7e=j(xX);var I8e=30*1e3;var s_=j("remoteAgentService"),V8e=new class{maxSampleCount=5;sampleDelay=2e3;initial=[];maxInitialCount=3;average=[];maxAverageCount=100;highLatencyMultiple=2;highLatencyMinThreshold=500;highLatencyMaxThreshold=1500;lastMeasurement=void 0;get latency(){return this.lastMeasurement}async measure(r){let e=1/0;for(let n=0;n<this.maxSampleCount;n++){let i=await r.getRoundTripTime();if(i===void 0)return;e=Math.min(e,i/2),await po(this.sampleDelay)}this.average.push(e),this.average.length>this.maxAverageCount&&this.average.shift();let t;return this.initial.length<this.maxInitialCount?this.initial.push(e):t=this.initial.reduce((n,i)=>n+i,0)/this.initial.length,this.lastMeasurement={initial:t,current:e,average:this.average.reduce((n,i)=>n+i,0)/this.average.length,high:typeof t>"u"?!1:e>this.highLatencyMaxThreshold||e>this.highLatencyMinThreshold&&e>t*this.highLatencyMultiple},this.lastMeasurement}};var a_=j("pathService"),Kf=class{constructor(e,t,n,i){this.localUserHome=e;this.remoteAgentService=t;this.environmentService=n;this.contextService=i;this.resolveOS=(async()=>(await this.remoteAgentService.getEnvironment())?.os||uo)(),this.resolveUserHome=(async()=>{let o=await this.remoteAgentService.getEnvironment();return this.maybeUnresolvedUserHome=o?.userHome??e})()}resolveOS;resolveUserHome;maybeUnresolvedUserHome;hasValidBasename(e,t,n){return typeof t=="string"||typeof t>"u"?this.resolveOS.then(i=>this.doHasValidBasename(e,i,t)):this.doHasValidBasename(e,t,n)}doHasValidBasename(e,t,n){return e.scheme===ye.file||e.scheme===ye.vscodeRemote?kH(n??zo(e),t===1):!0}get defaultUriScheme(){return Kf.findDefaultUriScheme(this.environmentService,this.contextService)}static findDefaultUriScheme(e,t){if(e.remoteAuthority)return ye.vscodeRemote;let n=EK(t.getWorkspace());if(n)return n;let i=t.getWorkspace().folders[0];if(i)return i.uri.scheme;let o=t.getWorkspace().configuration;return o?o.scheme:ye.file}userHome(e){return e?.preferLocal?this.localUserHome:this.resolveUserHome}get resolvedUserHome(){return this.maybeUnresolvedUserHome}get path(){return this.resolveOS.then(e=>e===1?$n:mt)}async fileURI(e){let t="";if(await this.resolveOS===1&&(e=e.replace(/\\/g,"/")),e[0]==="/"&&e[1]==="/"){let i=e.indexOf("/",2);i===-1?(t=e.substring(2),e="/"):(t=e.substring(2,i),e=e.substring(i)||"/")}return Z.from({scheme:ye.file,authority:t,path:e,query:"",fragment:""})}};Kf=_([y(1,s_),y(2,Hi),y(3,fn)],Kf);var EX="addRootFolder",P9e=gt("addFolderToWorkspace","Add Folder to Workspace..."),TX="setRootFolder",ZI="_workbench.pickWorkspaceFolder";St.registerCommand({id:"workbench.action.files.openFileFolderInNewWindow",handler:r=>r.get(tg).pickFileFolderAndOpen({forceNewWindow:!0})});St.registerCommand({id:"_files.pickFolderAndOpen",handler:(r,e)=>r.get(tg).pickFolderAndOpen(e)});St.registerCommand({id:"workbench.action.files.openFolderInNewWindow",handler:r=>r.get(tg).pickFolderAndOpen({forceNewWindow:!0})});St.registerCommand({id:"workbench.action.files.openFileInNewWindow",handler:r=>r.get(tg).pickFileAndOpen({forceNewWindow:!0})});St.registerCommand({id:"workbench.action.openWorkspaceInNewWindow",handler:r=>r.get(tg).pickWorkspaceAndOpen({forceNewWindow:!0})});St.registerCommand({id:EX,handler:async r=>{let e=r.get(TA),t=await _K(r);!t||!t.length||await e.addFolders(t.map(n=>({uri:n})))}});St.registerCommand({id:TX,handler:async r=>{let e=r.get(TA),t=r.get(fn),n=await _K(r);!n||!n.length||await e.updateFolders(0,t.getWorkspace().folders.length,n.map(i=>({uri:i})))}});async function _K(r){let e=r.get(tg),t=r.get(a_);return await e.showOpenDialog({openLabel:e_(u({key:"add",comment:["&& denotes a mnemonic"]},"&&Add")),title:u("addFolderToWorkspaceTitle","Add Folder to Workspace"),canSelectFolders:!0,canSelectMany:!0,defaultUri:await e.defaultFolderPath(),availableFileSystems:[t.defaultUriScheme]})}St.registerCommand(ZI,async function(r,e){let t=r.get(n_),n=r.get(ro),i=r.get(fn),o=r.get(Bi),s=r.get(Lt),a=i.getWorkspace().folders;if(!a.length)return;let l=a.map(h=>{let g=h.name,f=n.getUriLabel(ns(h.uri),{relative:!0});return{label:g,description:f!==g?f:void 0,folder:h,iconClasses:Ec(o,s,h.uri,2)}}),d=(e?e[0]:void 0)||Object.create(null);d.activeItem||(d.activeItem=l[0]),d.placeHolder||(d.placeHolder=u("workspaceFolderPickerPlaceholder","Select workspace folder")),typeof d.matchOnDescription!="boolean"&&(d.matchOnDescription=!0);let c=(e?e[1]:void 0)||Yt.None,p=await t.pick(l,d,c);if(p)return a[l.indexOf(p)]});St.registerCommand({id:"vscode.openFolder",handler:(r,e,t)=>{let n=r.get(Xn);if(typeof t=="boolean"&&(t={forceNewWindow:t}),!e){let a={forceNewWindow:t?.forceNewWindow};return t?.forceLocalWindow&&(a.remoteAuthority=null,a.availableFileSystems=["file"]),n.executeCommand("_files.pickFolderAndOpen",a)}let i=Z.from(e,!0),o={forceNewWindow:t?.forceNewWindow,forceReuseWindow:t?.forceReuseWindow,noRecentEntry:t?.noRecentEntry,remoteAuthority:t?.forceLocalWindow?null:void 0,forceProfile:t?.forceProfile,forceTempProfile:t?.forceTempProfile},s=tz(i)||i.scheme===ye.untitled?{workspaceUri:i}:{folderUri:i};return n.executeCommand("_files.windowOpen",[s],o)},metadata:{description:"Open a folder or workspace in the current window or new window depending on the newWindow argument. Note that opening in the same window will shutdown the current extension host process and start a new one on the given folder/workspace unless the newWindow parameter is set to true.",args:[{name:"uri",description:"(optional) Uri of the folder or workspace file to open. If not provided, a native dialog will ask the user for the folder",constraint:r=>r==null||r instanceof Z},{name:"options",description:"(optional) Options. Object with the following properties: `forceNewWindow`: Whether to open the folder/workspace in a new window or the same. Defaults to opening in the same window. `forceReuseWindow`: Whether to force opening the folder/workspace in the same window.  Defaults to false. `noRecentEntry`: Whether the opened URI will appear in the 'Open Recent' list. Defaults to false. Note, for backward compatibility, options can also be of type boolean, representing the `forceNewWindow` setting.",constraint:r=>r===void 0||typeof r=="object"||typeof r=="boolean"}]}});St.registerCommand({id:"vscode.newWindow",handler:(r,e)=>{let t=r.get(Xn),n={forceReuseWindow:e&&e.reuseWindow,remoteAuthority:e&&e.remoteAuthority};return t.executeCommand("_files.newWindow",n)},metadata:{description:"Opens an new window depending on the newWindow argument.",args:[{name:"options",description:"(optional) Options. Object with the following properties: `reuseWindow`: Whether to open a new window or the same. Defaults to opening in a new window. ",constraint:r=>r===void 0||typeof r=="object"}]}});St.registerCommand("_workbench.removeFromRecentlyOpened",function(r,e){return r.get($I).removeRecentlyOpened([e])});St.registerCommand({id:"vscode.removeFromRecentlyOpened",handler:(r,e)=>{let t=r.get($I);return typeof e=="string"?e=e.match(/^[^:/?#]+:\/\//)?Z.parse(e):Z.file(e):e=Z.revive(e),t.removeRecentlyOpened([e])},metadata:{description:"Removes an entry with the given path from the recently opened list.",args:[{name:"path",description:"URI or URI string to remove from recently opened.",constraint:r=>typeof r=="string"||r instanceof Z}]}});St.registerCommand("_workbench.addToRecentlyOpened",async function(r,e){let t=r.get($I),n=e.uri,i=e.label,o=e.remoteAuthority,s;return e.type==="workspace"?s={workspace:await t.getWorkspaceIdentifier(n),label:i,remoteAuthority:o}:e.type==="folder"?s={folderUri:n,label:i,remoteAuthority:o}:s={fileUri:n,label:i,remoteAuthority:o},t.addRecentlyOpened([s])});St.registerCommand("_workbench.getRecentlyOpened",async function(r){return r.get($I).getRecentlyOpened()});var DK="";var pd=class extends N{_onWillDispose=this._register(new T);onWillDispose=this._onWillDispose.event;resolved=!1;async resolve(){this.resolved=!0}isResolved(){return this.resolved}isDisposed(){return this._store.isDisposed}dispose(){this._onWillDispose.fire(),super.dispose()}};var Gf=j("ILanguageDetectionService"),AA="languageDetection";var Ws=class extends pd{constructor(t,n,i,o,s){super();this.modelService=t;this.languageService=n;this.languageDetectionService=i;this.accessibilityService=o;s&&this.handleExistingModel(s)}static AUTO_DETECT_LANGUAGE_THROTTLE_DELAY=600;textEditorModelHandle=void 0;createdEditorModel;modelDisposeListener=this._register(new Qt);autoDetectLanguageThrottler=this._register(new by(Ws.AUTO_DETECT_LANGUAGE_THROTTLE_DELAY));handleExistingModel(t){let n=this.modelService.getModel(t);if(!n)throw new Error(`Document with resource ${t.toString(!0)} does not exist`);this.textEditorModelHandle=t,this.registerModelDisposeListener(n)}registerModelDisposeListener(t){this.modelDisposeListener.value=t.onWillDispose(()=>{this.textEditorModelHandle=void 0,this.dispose()})}get textEditorModel(){return this.textEditorModelHandle?this.modelService.getModel(this.textEditorModelHandle):null}isReadonly(){return!0}_hasLanguageSetExplicitly=!1;get hasLanguageSetExplicitly(){return this._hasLanguageSetExplicitly}setLanguageId(t,n){this._hasLanguageSetExplicitly=!0,this.setLanguageIdInternal(t,n)}setLanguageIdInternal(t,n){this.isResolved()&&(!t||t===this.textEditorModel.getLanguageId()||this.textEditorModel.setLanguage(this.languageService.createById(t),n))}installModelListeners(t){let n=this._register(t.onDidChangeLanguage(i=>{i.source!==AA&&(this._hasLanguageSetExplicitly=!0,n.dispose())}))}getLanguageId(){return this.textEditorModel?.getLanguageId()}autoDetectLanguage(){return this.autoDetectLanguageThrottler.trigger(()=>this.doAutoDetectLanguage())}async doAutoDetectLanguage(){if(this.hasLanguageSetExplicitly||!this.textEditorModelHandle||!this.languageDetectionService.isEnabledForLanguage(this.getLanguageId()??Ni))return;let t=await this.languageDetectionService.detectLanguage(this.textEditorModelHandle),n=this.getLanguageId();if(t&&t!==n&&!this.isDisposed()){this.setLanguageIdInternal(t,AA);let i=this.languageService.getLanguageName(t);this.accessibilityService.alert(u("languageAutoDetected","Language {0} was automatically detected and set as the language mode.",i??t))}}createTextEditorModel(t,n,i){let o=this.getFirstLineText(t),s=this.getOrCreateLanguage(n,this.languageService,i,o);return this.doCreateTextEditorModel(t,s,n)}doCreateTextEditorModel(t,n,i){let o=i&&this.modelService.getModel(i);return o?this.updateTextEditorModel(t,n.languageId):(o=this.modelService.createModel(t,n,i),this.createdEditorModel=!0,this.registerModelDisposeListener(o)),this.textEditorModelHandle=o.uri,o}getFirstLineText(t){let n=t;return typeof n.getFirstLineText=="function"?n.getFirstLineText(1e3):t.getLineContent(1).substr(0,1e3)}getOrCreateLanguage(t,n,i,o){return!i||i===Ni?n.createByFilepathOrFirstLine(t??null,o):n.createById(i)}updateTextEditorModel(t,n){this.isResolved()&&(t&&this.modelService.updateModel(this.textEditorModel,t),n&&n!==Ni&&this.textEditorModel.getLanguageId()!==n&&this.textEditorModel.setLanguage(this.languageService.createById(n)))}createSnapshot(){return this.textEditorModel?this.textEditorModel.createSnapshot(!0):null}isResolved(){return!!this.textEditorModelHandle}dispose(){this.modelDisposeListener.dispose(),this.textEditorModelHandle&&this.createdEditorModel&&this.modelService.destroyModel(this.textEditorModelHandle),this.textEditorModelHandle=void 0,this.createdEditorModel=!1,super.dispose()}};Ws=_([y(0,Bi),y(1,Lt),y(2,Gf),y(3,Xi)],Ws);var l_=j("workingCopyBackupService");var Vs=j("textResourceConfigurationService"),X3e=j("textResourcePropertiesService");var ig=class r{constructor(e,t,n){this.startOffset=e;this.endOffset=t;this.newLength=n}static fromModelContentChanges(e){return e.map(n=>{let i=D.lift(n.range);return new r(Hu(i.getStartPosition()),Hu(i.getEndPosition()),Uz(n.text))}).reverse()}toString(){return`[${Qo(this.startOffset)}...${Qo(this.endOffset)}) -> ${Qo(this.newLength)}`}},d_=class{nextEditIdx=0;deltaOldToNewLineCount=0;deltaOldToNewColumnCount=0;deltaLineIdxInOld=-1;edits;constructor(e){this.edits=e.map(t=>NA.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);let t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):null;return n===null?null:Oh(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?bn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):bn(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){let t=Qo(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?bn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):bn(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){let t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(Vu(n,e)){this.nextEditIdx++;let i=Qo(n),o=Qo(this.translateOldToCur(t.endOffsetBeforeObj)),s=i.lineCount-o.lineCount;this.deltaOldToNewLineCount+=s;let a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=i.columnCount-o.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}},NA=class r{static from(e){return new r(e.startOffset,e.endOffset,e.newLength)}endOffsetBeforeObj;endOffsetAfterObj;offsetObj;constructor(e,t,n){this.endOffsetBeforeObj=Qo(t),this.endOffsetAfterObj=Qo(Bt(e,n)),this.offsetObj=Qo(e)}};function kK(r){if(r.length===0)return null;if(r.length===1)return r[0];let e=0;function t(){if(e>=r.length)return null;let s=e,a=r[s].listHeight;for(e++;e<r.length&&r[e].listHeight===a;)e++;return e-s>=2?WA(s===0&&e===r.length?r:r.slice(s,e),!1):r[s]}let n=t(),i=t();if(!i)return n;for(let s=t();s;s=t())LK(n,i)<=LK(i,s)?(n=FA(n,i),i=s):i=FA(i,s);return FA(n,i)}function WA(r,e=!1){if(r.length===0)return null;if(r.length===1)return r[0];let t=r.length;for(;t>3;){let n=t>>1;for(let i=0;i<n;i++){let o=i<<1;r[i]=us.create23(r[o],r[o+1],o+3===t?r[o+2]:null,e)}t=n}return us.create23(r[0],r[1],t>=3?r[2]:null,e)}function LK(r,e){return Math.abs(r.listHeight-e.listHeight)}function FA(r,e){return r.listHeight===e.listHeight?us.create23(r,e,null,!1):r.listHeight>e.listHeight?wX(r,e):_X(e,r)}function wX(r,e){r=r.toMutable();let t=r,n=[],i;for(;;){if(e.listHeight===t.listHeight){i=e;break}if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let o=n.length-1;o>=0;o--){let s=n[o];i?s.childrenLength>=3?i=us.create23(s.unappendChild(),i,null,!1):(s.appendChildOfSameHeight(i),i=void 0):s.handleChildrenChanged()}return i?us.create23(r,i,null,!1):r}function _X(r,e){r=r.toMutable();let t=r,n=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let i=e;for(let o=n.length-1;o>=0;o--){let s=n[o];i?s.childrenLength>=3?i=us.create23(i,s.unprependChild(),null,!1):(s.prependChildOfSameHeight(i),i=void 0):s.handleChildrenChanged()}return i?us.create23(i,r,null,!1):r}var c_=class{nextNodes;offsets;idxs;lastOffset=ci;constructor(e){this.nextNodes=[e],this.offsets=[ci],this.idxs=[]}readLongestNodeAt(e,t){if(gc(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){let n=JI(this.nextNodes);if(!n)return;let i=JI(this.offsets);if(gc(e,i))return;if(gc(i,e))if(Bt(i,n.length)<=e)this.nextNodeAfterCurrent();else{let o=VA(n);o!==-1?(this.nextNodes.push(n.getChild(o)),this.offsets.push(i),this.idxs.push(o)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{let o=VA(n);if(o===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(o)),this.offsets.push(i),this.idxs.push(o)}}}}nextNodeAfterCurrent(){for(;;){let e=JI(this.offsets),t=JI(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;let n=JI(this.nextNodes),i=VA(n,this.idxs[this.idxs.length-1]);if(i!==-1){this.nextNodes.push(n.getChild(i)),this.offsets.push(Bt(e,t.length)),this.idxs[this.idxs.length-1]=i;break}else this.idxs.pop()}}};function VA(r,e=-1){for(;;){if(e++,e>=r.childrenLength)return-1;if(r.getChild(e))return e}}function JI(r){return r.length>0?r[r.length-1]:void 0}function eS(r,e,t,n){return new HA(r,e,t,n).parseDocument()}var HA=class{constructor(e,t,n,i){this.tokenizer=e;this.createImmutableLists=i;if(n&&i)throw new Error("Not supported");this.oldNodeReader=n?new c_(n):void 0,this.positionMapper=new d_(t)}oldNodeReader;positionMapper;_itemsConstructed=0;_itemsFromCache=0;get nodesConstructed(){return this._itemsConstructed}get nodesReused(){return this._itemsFromCache}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(bo.getEmpty(),0);return e||(e=us.getEmpty()),e}parseList(e,t){let n=[];for(;;){let o=this.tryReadChildFromCache(e);if(!o){let s=this.tokenizer.peek();if(!s||s.kind===2&&s.bracketIds.intersects(e))break;o=this.parseChild(e,t+1)}o.kind===4&&o.childrenLength===0||n.push(o)}return this.oldNodeReader?kK(n):WA(n,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){let t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!tf(t)){let n=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),i=>t!==null&&!gc(i.length,t)?!1:i.canBeReused(e));if(n)return this._itemsFromCache++,this.tokenizer.skip(n.length),n}}}parseChild(e,t){this._itemsConstructed++;let n=this.tokenizer.read();switch(n.kind){case 2:return new ST(n.bracketIds,n.length);case 0:return n.astNode;case 1:{if(t>300)return new $a(n.length);let i=e.merge(n.bracketIds),o=this.parseList(i,t+1),s=this.tokenizer.peek();return s&&s.kind===2&&(s.bracketId===n.bracketId||s.bracketIds.intersects(n.bracketIds))?(this.tokenizer.read(),gI.create(n.astNode,o,s.astNode)):gI.create(n.astNode,o,null)}default:throw new Error("unexpected")}}};function UA(r,e){if(r.length===0)return e;if(e.length===0)return r;let t=new Rr(RK(r)),n=RK(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=t.dequeue();function o(d){if(d===void 0){let p=t.takeWhile(h=>!0)||[];return i&&p.unshift(i),p}let c=[];for(;i&&!tf(d);){let[p,h]=i.splitAt(d);c.push(p),d=Oh(p.lengthAfter,d),i=h??t.dequeue()}return tf(d)||c.push(new tS(!1,d,d)),c}let s=[];function a(d,c,p){if(s.length>0&&JO(s[s.length-1].endOffset,d)){let h=s[s.length-1];s[s.length-1]=new ig(h.startOffset,c,Bt(h.newLength,p))}else s.push({startOffset:d,endOffset:c,newLength:p})}let l=ci;for(let d of n){let c=o(d.lengthBefore);if(d.modified){let p=Hz(c,g=>g.lengthBefore),h=Bt(l,p);a(l,h,d.lengthAfter),l=h}else for(let p of c){let h=l;l=Bt(l,p.lengthBefore),p.modified&&a(h,l,p.lengthAfter)}}return s}var tS=class r{constructor(e,t,n){this.modified=e;this.lengthBefore=t;this.lengthAfter=n}splitAt(e){let t=Oh(e,this.lengthAfter);return JO(t,ci)?[this,void 0]:this.modified?[new r(this.modified,this.lengthBefore,e),new r(this.modified,ci,t)]:[new r(this.modified,e,e),new r(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${Qo(this.lengthBefore)} -> ${Qo(this.lengthAfter)}`}};function RK(r){let e=[],t=ci;for(let n of r){let i=Oh(t,n.startOffset);tf(i)||e.push(new tS(!1,i,i));let o=Oh(n.startOffset,n.endOffset);e.push(new tS(!0,o,n.newLength)),t=n.endOffset}return e}var u_=class extends N{constructor(t,n){super();this.textModel=t;this.getLanguageConfiguration=n;if(t.tokenization.hasTokens)t.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{let i=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),o=new yT(this.textModel.getValue(),i);this.initialAstWithoutTokens=eS(o,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}didChangeEmitter=new T;initialAstWithoutTokens;astWithTokens;denseKeyProvider=new of;brackets=new af(this.denseKeyProvider,this.getLanguageConfiguration);didLanguageChange(t){return this.brackets.didLanguageChange(t)}onDidChange=this.didChangeEmitter.event;queuedTextEditsForInitialAstWithoutTokens=[];queuedTextEdits=[];handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){let t=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,t||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:t}){let n=t.map(i=>new ig(bn(i.fromLineNumber-1,0),bn(i.toLineNumber,0),bn(i.toLineNumber-i.fromLineNumber+1,0)));this.handleEdits(n,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(t){let n=ig.fromModelContentChanges(t.changes);this.handleEdits(n,!1)}handleEdits(t,n){let i=UA(this.queuedTextEdits,t);this.queuedTextEdits=i,this.initialAstWithoutTokens&&!n&&(this.queuedTextEditsForInitialAstWithoutTokens=UA(this.queuedTextEditsForInitialAstWithoutTokens,t))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(t,n,i){let s=n,a=new lf(this.textModel,this.brackets);return eS(a,t,s,i)}getBracketsInRange(t,n){this.flushQueue();let i=bn(t.startLineNumber-1,t.startColumn-1),o=bn(t.endLineNumber-1,t.endColumn-1);return new Zd(s=>{let a=this.initialAstWithoutTokens||this.astWithTokens;zA(a,ci,a.length,i,o,s,0,0,new Map,n)})}getBracketPairsInRange(t,n){this.flushQueue();let i=Hu(t.getStartPosition()),o=Hu(t.getEndPosition());return new Zd(s=>{let a=this.initialAstWithoutTokens||this.astWithTokens,l=new KA(s,n,this.textModel);GA(a,ci,a.length,i,o,l,0,new Map)})}getFirstBracketAfter(t){this.flushQueue();let n=this.initialAstWithoutTokens||this.astWithTokens;return PK(n,ci,n.length,Hu(t))}getFirstBracketBefore(t){this.flushQueue();let n=this.initialAstWithoutTokens||this.astWithTokens;return OK(n,ci,n.length,Hu(t))}};function OK(r,e,t,n){if(r.kind===4||r.kind===2){let i=[];for(let o of r.children)t=Bt(e,o.length),i.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let o=i.length-1;o>=0;o--){let{nodeOffsetStart:s,nodeOffsetEnd:a}=i[o];if(gc(s,n)){let l=OK(r.children[o],s,a,n);if(l)return l}}return null}else{if(r.kind===3)return null;if(r.kind===1){let i=Uu(e,t);return{bracketInfo:r.bracketInfo,range:i}}}return null}function PK(r,e,t,n){if(r.kind===4||r.kind===2){for(let i of r.children){if(t=Bt(e,i.length),gc(n,t)){let o=PK(i,e,t,n);if(o)return o}e=t}return null}else{if(r.kind===3)return null;if(r.kind===1){let i=Uu(e,t);return{bracketInfo:r.bracketInfo,range:i}}}return null}function zA(r,e,t,n,i,o,s,a,l,d,c=!1){if(s>200)return!0;e:for(;;)switch(r.kind){case 4:{let p=r.childrenLength;for(let h=0;h<p;h++){let g=r.getChild(h);if(g){if(t=Bt(e,g.length),Vu(e,i)&&nf(t,n)){if(nf(t,i)){r=g;continue e}if(!zA(g,e,t,n,i,o,s,0,l,d))return!1}e=t}}return!0}case 2:{let p=!d||!r.closingBracket||r.closingBracket.bracketInfo.closesColorized(r.openingBracket.bracketInfo),h=0;if(l){let f=l.get(r.openingBracket.text);f===void 0&&(f=0),h=f,p&&(f++,l.set(r.openingBracket.text,f))}let g=r.childrenLength;for(let f=0;f<g;f++){let m=r.getChild(f);if(m){if(t=Bt(e,m.length),Vu(e,i)&&nf(t,n)){if(nf(t,i)&&m.kind!==1){r=m,p?(s++,a=h+1):a=h;continue e}if((p||m.kind!==1||!r.closingBracket)&&!zA(m,e,t,n,i,o,p?s+1:s,p?h+1:h,l,d,!r.closingBracket))return!1}e=t}}return l?.set(r.openingBracket.text,h),!0}case 3:{let p=Uu(e,t);return o(new vI(p,s-1,0,!0))}case 1:{let p=Uu(e,t);return o(new vI(p,s-1,a-1,c))}case 0:return!0}}var KA=class{constructor(e,t,n){this.push=e;this.includeMinIndentation=t;this.textModel=n}};function GA(r,e,t,n,i,o,s,a){if(s>200)return!0;let l=!0;if(r.kind===2){let d=0;if(a){let h=a.get(r.openingBracket.text);h===void 0&&(h=0),d=h,h++,a.set(r.openingBracket.text,h)}let c=Bt(e,r.openingBracket.length),p=-1;if(o.includeMinIndentation&&(p=r.computeMinIndentation(e,o.textModel)),l=o.push(new CT(Uu(e,t),Uu(e,c),r.closingBracket?Uu(Bt(c,r.child?.length||ci),t):void 0,s,d,r,p)),e=c,l&&r.child){let h=r.child;if(t=Bt(e,h.length),Vu(e,i)&&nf(t,n)&&(l=GA(h,e,t,n,i,o,s+1,a),!l))return!1}a?.set(r.openingBracket.text,d)}else{let d=e;for(let c of r.children){let p=d;if(d=Bt(d,c.length),Vu(p,i)&&Vu(n,d)&&(l=GA(c,p,d,n,i,o,s,a),!l))return!1}}return l}var h_=class extends N{constructor(t,n){super();this.textModel=t;this.languageConfigurationService=n}bracketPairsTree=this._register(new Qt);onDidChangeEmitter=new T;onDidChange=this.onDidChangeEmitter.event;get canBuildAST(){return this.textModel.getValueLength()<=5e6}bracketsRequested=!1;handleLanguageConfigurationServiceChange(t){(!t.languageId||this.bracketPairsTree.value?.object.didLanguageChange(t.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}handleDidChangeOptions(t){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(t){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(t){this.bracketPairsTree.value?.object.handleContentChanged(t)}handleDidChangeBackgroundTokenizationState(){this.bracketPairsTree.value?.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(t){this.bracketPairsTree.value?.object.handleDidChangeTokens(t)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){let t=new X;this.bracketPairsTree.value=DX(t.add(new u_(this.textModel,n=>this.languageConfigurationService.getLanguageConfiguration(n))),t),t.add(this.bracketPairsTree.value.object.onDidChange(n=>this.onDidChangeEmitter.fire(n))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(t){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(t,!1)||Zd.empty}getBracketPairsInRangeWithMinIndentation(t){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(t,!0)||Zd.empty}getBracketsInRange(t,n=!1){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketsInRange(t,n)||Zd.empty}findMatchingBracketUp(t,n,i){let o=this.textModel.validatePosition(n),s=this.textModel.getLanguageIdAtPosition(o.lineNumber,o.column);if(this.canBuildAST){let a=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew.getClosingBracketInfo(t);if(!a)return null;let l=this.getBracketPairsInRange(D.fromPositions(n,n)).findLast(d=>a.closes(d.openingBracketInfo));return l?l.openingBracketRange:null}else{let a=t.toLowerCase(),l=this.languageConfigurationService.getLanguageConfiguration(s).brackets;if(!l)return null;let d=l.textIsBracket[a];return d?p_(this._findMatchingBracketUp(d,o,jA(i))):null}}matchBracket(t,n){if(this.canBuildAST){let i=this.getBracketPairsInRange(D.fromPositions(t,t)).filter(o=>o.closingBracketRange!==void 0&&(o.openingBracketRange.containsPosition(t)||o.closingBracketRange.containsPosition(t))).findLastMaxBy(Rl(o=>o.openingBracketRange.containsPosition(t)?o.openingBracketRange:o.closingBracketRange,D.compareRangesUsingStarts));return i?[i.openingBracketRange,i.closingBracketRange]:null}else{let i=jA(n);return this._matchBracket(this.textModel.validatePosition(t),i)}}_establishBracketSearchOffsets(t,n,i,o){let s=n.getCount(),a=n.getLanguageId(o),l=Math.max(0,t.column-1-i.maxBracketLength);for(let c=o-1;c>=0;c--){let p=n.getEndOffset(c);if(p<=l)break;if(oa(n.getStandardTokenType(c))||n.getLanguageId(c)!==a){l=p;break}}let d=Math.min(n.getLineContent().length,t.column-1+i.maxBracketLength);for(let c=o+1;c<s;c++){let p=n.getStartOffset(c);if(p>=d)break;if(oa(n.getStandardTokenType(c))||n.getLanguageId(c)!==a){d=p;break}}return{searchStartOffset:l,searchEndOffset:d}}_matchBracket(t,n){let i=t.lineNumber,o=this.textModel.tokenization.getLineTokens(i),s=this.textModel.getLineContent(i),a=o.findTokenIndexAtOffset(t.column-1);if(a<0)return null;let l=this.languageConfigurationService.getLanguageConfiguration(o.getLanguageId(a)).brackets;if(l&&!oa(o.getStandardTokenType(a))){let{searchStartOffset:d,searchEndOffset:c}=this._establishBracketSearchOffsets(t,o,l,a),p=null;for(;;){let h=yr.findNextBracketInRange(l.forwardRegex,i,s,d,c);if(!h)break;if(h.startColumn<=t.column&&t.column<=h.endColumn){let g=s.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),f=this._matchFoundBracket(h,l.textIsBracket[g],l.textIsOpenBracket[g],n);if(f){if(f instanceof Tc)return null;p=f}}d=h.endColumn-1}if(p)return p}if(a>0&&o.getStartOffset(a)===t.column-1){let d=a-1,c=this.languageConfigurationService.getLanguageConfiguration(o.getLanguageId(d)).brackets;if(c&&!oa(o.getStandardTokenType(d))){let{searchStartOffset:p,searchEndOffset:h}=this._establishBracketSearchOffsets(t,o,c,d),g=yr.findPrevBracketInRange(c.reversedRegex,i,s,p,h);if(g&&g.startColumn<=t.column&&t.column<=g.endColumn){let f=s.substring(g.startColumn-1,g.endColumn-1).toLowerCase(),m=this._matchFoundBracket(g,c.textIsBracket[f],c.textIsOpenBracket[f],n);if(m)return m instanceof Tc?null:m}}}return null}_matchFoundBracket(t,n,i,o){if(!n)return null;let s=i?this._findMatchingBracketDown(n,t.getEndPosition(),o):this._findMatchingBracketUp(n,t.getStartPosition(),o);return s?s instanceof Tc?s:[t,s]:null}_findMatchingBracketUp(t,n,i){let o=t.languageId,s=t.reversedRegex,a=-1,l=0,d=(c,p,h,g)=>{for(;;){if(i&&++l%100===0&&!i())return Tc.INSTANCE;let f=yr.findPrevBracketInRange(s,c,p,h,g);if(!f)break;let m=p.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(t.isOpen(m)?a++:t.isClose(m)&&a--,a===0)return f;g=f.startColumn-1}return null};for(let c=n.lineNumber;c>=1;c--){let p=this.textModel.tokenization.getLineTokens(c),h=p.getCount(),g=this.textModel.getLineContent(c),f=h-1,m=g.length,b=g.length;c===n.lineNumber&&(f=p.findTokenIndexAtOffset(n.column-1),m=n.column-1,b=n.column-1);let v=!0;for(;f>=0;f--){let S=p.getLanguageId(f)===o&&!oa(p.getStandardTokenType(f));if(S)v?m=p.getStartOffset(f):(m=p.getStartOffset(f),b=p.getEndOffset(f));else if(v&&m!==b){let x=d(c,g,m,b);if(x)return x}v=S}if(v&&m!==b){let S=d(c,g,m,b);if(S)return S}}return null}_findMatchingBracketDown(t,n,i){let o=t.languageId,s=t.forwardRegex,a=1,l=0,d=(p,h,g,f)=>{for(;;){if(i&&++l%100===0&&!i())return Tc.INSTANCE;let m=yr.findNextBracketInRange(s,p,h,g,f);if(!m)break;let b=h.substring(m.startColumn-1,m.endColumn-1).toLowerCase();if(t.isOpen(b)?a++:t.isClose(b)&&a--,a===0)return m;g=m.endColumn-1}return null},c=this.textModel.getLineCount();for(let p=n.lineNumber;p<=c;p++){let h=this.textModel.tokenization.getLineTokens(p),g=h.getCount(),f=this.textModel.getLineContent(p),m=0,b=0,v=0;p===n.lineNumber&&(m=h.findTokenIndexAtOffset(n.column-1),b=n.column-1,v=n.column-1);let S=!0;for(;m<g;m++){let x=h.getLanguageId(m)===o&&!oa(h.getStandardTokenType(m));if(x)S||(b=h.getStartOffset(m)),v=h.getEndOffset(m);else if(S&&b!==v){let E=d(p,f,b,v);if(E)return E}S=x}if(S&&b!==v){let x=d(p,f,b,v);if(x)return x}}return null}findPrevBracket(t){let n=this.textModel.validatePosition(t);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketBefore(n)||null;let i=null,o=null,s=null;for(let a=n.lineNumber;a>=1;a--){let l=this.textModel.tokenization.getLineTokens(a),d=l.getCount(),c=this.textModel.getLineContent(a),p=d-1,h=c.length,g=c.length;if(a===n.lineNumber){p=l.findTokenIndexAtOffset(n.column-1),h=n.column-1,g=n.column-1;let m=l.getLanguageId(p);i!==m&&(i=m,o=this.languageConfigurationService.getLanguageConfiguration(i).brackets,s=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew)}let f=!0;for(;p>=0;p--){let m=l.getLanguageId(p);if(i!==m){if(o&&s&&f&&h!==g){let v=yr.findPrevBracketInRange(o.reversedRegex,a,c,h,g);if(v)return this._toFoundBracket(s,v);f=!1}i=m,o=this.languageConfigurationService.getLanguageConfiguration(i).brackets,s=this.languageConfigurationService.getLanguageConfiguration(i).bracketsNew}let b=!!o&&!oa(l.getStandardTokenType(p));if(b)f?h=l.getStartOffset(p):(h=l.getStartOffset(p),g=l.getEndOffset(p));else if(s&&o&&f&&h!==g){let v=yr.findPrevBracketInRange(o.reversedRegex,a,c,h,g);if(v)return this._toFoundBracket(s,v)}f=b}if(s&&o&&f&&h!==g){let m=yr.findPrevBracketInRange(o.reversedRegex,a,c,h,g);if(m)return this._toFoundBracket(s,m)}}return null}findNextBracket(t){let n=this.textModel.validatePosition(t);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketAfter(n)||null;let i=this.textModel.getLineCount(),o=null,s=null,a=null;for(let l=n.lineNumber;l<=i;l++){let d=this.textModel.tokenization.getLineTokens(l),c=d.getCount(),p=this.textModel.getLineContent(l),h=0,g=0,f=0;if(l===n.lineNumber){h=d.findTokenIndexAtOffset(n.column-1),g=n.column-1,f=n.column-1;let b=d.getLanguageId(h);o!==b&&(o=b,s=this.languageConfigurationService.getLanguageConfiguration(o).brackets,a=this.languageConfigurationService.getLanguageConfiguration(o).bracketsNew)}let m=!0;for(;h<c;h++){let b=d.getLanguageId(h);if(o!==b){if(a&&s&&m&&g!==f){let S=yr.findNextBracketInRange(s.forwardRegex,l,p,g,f);if(S)return this._toFoundBracket(a,S);m=!1}o=b,s=this.languageConfigurationService.getLanguageConfiguration(o).brackets,a=this.languageConfigurationService.getLanguageConfiguration(o).bracketsNew}let v=!!s&&!oa(d.getStandardTokenType(h));if(v)m||(g=d.getStartOffset(h)),f=d.getEndOffset(h);else if(a&&s&&m&&g!==f){let S=yr.findNextBracketInRange(s.forwardRegex,l,p,g,f);if(S)return this._toFoundBracket(a,S)}m=v}if(a&&s&&m&&g!==f){let b=yr.findNextBracketInRange(s.forwardRegex,l,p,g,f);if(b)return this._toFoundBracket(a,b)}}return null}findEnclosingBrackets(t,n){let i=this.textModel.validatePosition(t);if(this.canBuildAST){let f=D.fromPositions(i),m=this.getBracketPairsInRange(D.fromPositions(i,i)).findLast(b=>b.closingBracketRange!==void 0&&b.range.strictContainsRange(f));return m?[m.openingBracketRange,m.closingBracketRange]:null}let o=jA(n),s=this.textModel.getLineCount(),a=new Map,l=[],d=(f,m)=>{if(!a.has(f)){let b=[];for(let v=0,S=m?m.brackets.length:0;v<S;v++)b[v]=0;a.set(f,b)}l=a.get(f)},c=0,p=(f,m,b,v,S)=>{for(;;){if(o&&++c%100===0&&!o())return Tc.INSTANCE;let x=yr.findNextBracketInRange(f.forwardRegex,m,b,v,S);if(!x)break;let E=b.substring(x.startColumn-1,x.endColumn-1).toLowerCase(),w=f.textIsBracket[E];if(w&&(w.isOpen(E)?l[w.index]++:w.isClose(E)&&l[w.index]--,l[w.index]===-1))return this._matchFoundBracket(x,w,!1,o);v=x.endColumn-1}return null},h=null,g=null;for(let f=i.lineNumber;f<=s;f++){let m=this.textModel.tokenization.getLineTokens(f),b=m.getCount(),v=this.textModel.getLineContent(f),S=0,x=0,E=0;if(f===i.lineNumber){S=m.findTokenIndexAtOffset(i.column-1),x=i.column-1,E=i.column-1;let P=m.getLanguageId(S);h!==P&&(h=P,g=this.languageConfigurationService.getLanguageConfiguration(h).brackets,d(h,g))}let w=!0;for(;S<b;S++){let P=m.getLanguageId(S);if(h!==P){if(g&&w&&x!==E){let O=p(g,f,v,x,E);if(O)return p_(O);w=!1}h=P,g=this.languageConfigurationService.getLanguageConfiguration(h).brackets,d(h,g)}let R=!!g&&!oa(m.getStandardTokenType(S));if(R)w||(x=m.getStartOffset(S)),E=m.getEndOffset(S);else if(g&&w&&x!==E){let O=p(g,f,v,x,E);if(O)return p_(O)}w=R}if(g&&w&&x!==E){let P=p(g,f,v,x,E);if(P)return p_(P)}}return null}_toFoundBracket(t,n){if(!n)return null;let i=this.textModel.getValueInRange(n);i=i.toLowerCase();let o=t.getBracketInfo(i);return o?{range:n,bracketInfo:o}:null}};function DX(r,e){return{object:r,dispose:()=>e?.dispose()}}function jA(r){if(typeof r>"u")return()=>!0;{let e=Date.now();return()=>Date.now()-e<=r}}var Tc=class r{static INSTANCE=new r;_searchCanceledBrand=void 0;constructor(){}};function p_(r){return r instanceof Tc?null:r}var $A=C("editor.lineHighlightBackground",null,u("lineHighlight","Background color for the highlight of line at the cursor position.")),qA=C("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:Ie},u("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),tje=C("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},u("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),nje=C("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:Wt,hcLight:Wt},u("rangeHighlightBorder","Background color of the border around highlighted ranges.")),ije=C("editor.symbolHighlightBackground",{dark:Qa,light:Qa,hcDark:null,hcLight:null},u("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),oje=C("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:Wt,hcLight:Wt},u("symbolHighlightBorder","Background color of the border around highlighted symbols.")),jf=C("editorCursor.foreground",{dark:"#AEAFAD",light:H.black,hcDark:H.white,hcLight:"#0F4A85"},u("caret","Color of the editor cursor.")),g_=C("editorCursor.background",null,u("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),m_=C("editorMultiCursor.primary.foreground",jf,u("editorMultiCursorPrimaryForeground","Color of the primary editor cursor when multiple cursors are present.")),AK=C("editorMultiCursor.primary.background",g_,u("editorMultiCursorPrimaryBackground","The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),f_=C("editorMultiCursor.secondary.foreground",jf,u("editorMultiCursorSecondaryForeground","Color of secondary editor cursors when multiple cursors are present.")),NK=C("editorMultiCursor.secondary.background",g_,u("editorMultiCursorSecondaryBackground","The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),b_=C("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},u("editorWhitespaces","Color of whitespace characters in the editor.")),FK=C("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:H.white,hcLight:"#292929"},u("editorLineNumbers","Color of editor line numbers.")),LX=C("editorIndentGuide.background",b_,u("editorIndentGuides","Color of the editor indentation guides."),!1,u("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),kX=C("editorIndentGuide.activeBackground",b_,u("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,u("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),BK=C("editorIndentGuide.background1",LX,u("editorIndentGuides1","Color of the editor indentation guides (1).")),WK=C("editorIndentGuide.background2","#00000000",u("editorIndentGuides2","Color of the editor indentation guides (2).")),VK=C("editorIndentGuide.background3","#00000000",u("editorIndentGuides3","Color of the editor indentation guides (3).")),HK=C("editorIndentGuide.background4","#00000000",u("editorIndentGuides4","Color of the editor indentation guides (4).")),UK=C("editorIndentGuide.background5","#00000000",u("editorIndentGuides5","Color of the editor indentation guides (5).")),zK=C("editorIndentGuide.background6","#00000000",u("editorIndentGuides6","Color of the editor indentation guides (6).")),KK=C("editorIndentGuide.activeBackground1",kX,u("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),GK=C("editorIndentGuide.activeBackground2","#00000000",u("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),jK=C("editorIndentGuide.activeBackground3","#00000000",u("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),$K=C("editorIndentGuide.activeBackground4","#00000000",u("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),qK=C("editorIndentGuide.activeBackground5","#00000000",u("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),YK=C("editorIndentGuide.activeBackground6","#00000000",u("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),RX=C("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:Wt,hcLight:Wt},u("editorActiveLineNumber","Color of editor active line number"),!1,u("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),rje=C("editorLineNumber.activeForeground",RX,u("editorActiveLineNumber","Color of editor active line number")),XK=C("editorLineNumber.dimmedForeground",null,u("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed.")),sje=C("editorRuler.foreground",{dark:"#5A5A5A",light:H.lightgrey,hcDark:H.white,hcLight:"#292929"},u("editorRuler","Color of the editor rulers.")),aje=C("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},u("editorCodeLensForeground","Foreground color of editor CodeLens")),lje=C("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},u("editorBracketMatchBackground","Background color behind matching brackets")),dje=C("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:Ie,hcLight:Ie},u("editorBracketMatchBorder","Color for matching brackets boxes")),QK=C("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},u("editorOverviewRulerBorder","Color of the overview ruler border.")),ZK=C("editorOverviewRuler.background",null,u("editorOverviewRulerBackground","Background color of the editor overview ruler.")),cje=C("editorGutter.background",$t,u("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),uje=C("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:H.fromHex("#fff").transparent(.8),hcLight:Ie},u("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),JK=C("editorUnnecessaryCode.opacity",{dark:H.fromHex("#000a"),light:H.fromHex("#0007"),hcDark:null,hcLight:null},u("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),pje=C("editorGhostText.border",{dark:null,light:null,hcDark:H.fromHex("#fff").transparent(.8),hcLight:H.fromHex("#292929").transparent(.8)},u("editorGhostTextBorder","Border color of ghost text in the editor.")),hje=C("editorGhostText.foreground",{dark:H.fromHex("#ffffff56"),light:H.fromHex("#0007"),hcDark:null,hcLight:null},u("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),gje=C("editorGhostText.background",null,u("editorGhostTextBackground","Background color of the ghost text in the editor.")),MX=new H(new et(0,122,204,.6)),mje=C("editorOverviewRuler.rangeHighlightForeground",MX,u("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),fje=C("editorOverviewRuler.errorForeground",{dark:new H(new et(255,18,18,.7)),light:new H(new et(255,18,18,.7)),hcDark:new H(new et(255,50,50,1)),hcLight:"#B5200D"},u("overviewRuleError","Overview ruler marker color for errors.")),bje=C("editorOverviewRuler.warningForeground",{dark:Cr,light:Cr,hcDark:mf,hcLight:mf},u("overviewRuleWarning","Overview ruler marker color for warnings.")),vje=C("editorOverviewRuler.infoForeground",{dark:ps,light:ps,hcDark:ff,hcLight:ff},u("overviewRuleInfo","Overview ruler marker color for infos.")),v_=C("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},u("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),y_=C("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},u("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),I_=C("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},u("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),S_=C("editorBracketHighlight.foreground4","#00000000",u("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),C_=C("editorBracketHighlight.foreground5","#00000000",u("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),x_=C("editorBracketHighlight.foreground6","#00000000",u("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),e7=C("editorBracketHighlight.unexpectedBracket.foreground",{dark:new H(new et(255,18,18,.8)),light:new H(new et(255,18,18,.8)),hcDark:"new Color(new RGBA(255, 50, 50, 1))",hcLight:"#B5200D"},u("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),t7=C("editorBracketPairGuide.background1","#00000000",u("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),n7=C("editorBracketPairGuide.background2","#00000000",u("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),i7=C("editorBracketPairGuide.background3","#00000000",u("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),o7=C("editorBracketPairGuide.background4","#00000000",u("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),r7=C("editorBracketPairGuide.background5","#00000000",u("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),s7=C("editorBracketPairGuide.background6","#00000000",u("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),a7=C("editorBracketPairGuide.activeBackground1","#00000000",u("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),l7=C("editorBracketPairGuide.activeBackground2","#00000000",u("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),d7=C("editorBracketPairGuide.activeBackground3","#00000000",u("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),c7=C("editorBracketPairGuide.activeBackground4","#00000000",u("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),u7=C("editorBracketPairGuide.activeBackground5","#00000000",u("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),p7=C("editorBracketPairGuide.activeBackground6","#00000000",u("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides.")),yje=C("editorUnicodeHighlight.border",Cr,u("editorUnicodeHighlight.border","Border color used to highlight unicode characters.")),Ije=C("editorUnicodeHighlight.background",u4,u("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));to((r,e)=>{let t=r.getColor($t),n=r.getColor($A),i=n&&!n.isTransparent()?n:t;i&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${i}; }`)});var E_=class extends N{constructor(t){super();this.textModel=t;this.colorizationOptions=t.getOptions().bracketPairColorizationOptions,this._register(t.bracketPairs.onDidChange(n=>{this.onDidChangeEmitter.fire()}))}colorizationOptions;colorProvider=new T_;onDidChangeEmitter=new T;onDidChange=this.onDidChangeEmitter.event;handleDidChangeOptions(t){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(t,n,i,o){return o?[]:n===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(t,!0).map(a=>({id:`bracket${a.range.toString()}-${a.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(a,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:a.range})).toArray():[]}getAllDecorations(t,n){return t===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new D(1,1,this.textModel.getLineCount(),1),t,n):[]}},T_=class{unexpectedClosingBracketClassName="unexpected-closing-bracket";getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}};to((r,e)=>{let t=[v_,y_,I_,S_,C_,x_],n=new T_;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${r.getColor(e7)}; }`);let i=t.map(o=>r.getColor(o)).filter(o=>!!o).filter(o=>!o.isTransparent());for(let o=0;o<30;o++){let s=i[o%i.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(o)} { color: ${s}; }`)}});function $f(r){return r.toString()}var Vr=class r{constructor(e,t,n,i,o,s,a){this.beforeVersionId=e;this.afterVersionId=t;this.beforeEOL=n;this.afterEOL=i;this.beforeCursorState=o;this.afterCursorState=s;this.changes=a}static create(e,t){let n=e.getAlternativeVersionId(),i=QA(e);return new r(n,n,i,i,t,t,[])}append(e,t,n,i,o){t.length>0&&(this.changes=yz(this.changes,t)),this.afterEOL=n,this.afterVersionId=i,this.afterCursorState=o}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(Zi(e,t?t.length:0,n),n+=4,t)for(let i of t)Zi(e,i.selectionStartLineNumber,n),n+=4,Zi(e,i.selectionStartColumn,n),n+=4,Zi(e,i.positionLineNumber,n),n+=4,Zi(e,i.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){let i=Qi(e,t);t+=4;for(let o=0;o<i;o++){let s=Qi(e,t);t+=4;let a=Qi(e,t);t+=4;let l=Qi(e,t);t+=4;let d=Qi(e,t);t+=4,n.push(new ze(s,a,l,d))}return t}serialize(){let e=10+r._writeSelectionsSize(this.beforeCursorState)+r._writeSelectionsSize(this.afterCursorState)+4;for(let i of this.changes)e+=i.writeSize();let t=new Uint8Array(e),n=0;Zi(t,this.beforeVersionId,n),n+=4,Zi(t,this.afterVersionId,n),n+=4,YE(t,this.beforeEOL,n),n+=1,YE(t,this.afterEOL,n),n+=1,n=r._writeSelections(t,this.beforeCursorState,n),n=r._writeSelections(t,this.afterCursorState,n),Zi(t,this.changes.length,n),n+=4;for(let i of this.changes)n=i.write(t,n);return t.buffer}static deserialize(e){let t=new Uint8Array(e),n=0,i=Qi(t,n);n+=4;let o=Qi(t,n);n+=4;let s=qE(t,n);n+=1;let a=qE(t,n);n+=1;let l=[];n=r._readSelections(t,n,l);let d=[];n=r._readSelections(t,n,d);let c=Qi(t,n);n+=4;let p=[];for(let h=0;h<c;h++)n=as.read(t,n,p);return new r(i,o,s,a,l,d,p)}},w_=class{constructor(e,t,n,i){this.label=e;this.code=t;this.model=n,this._data=Vr.create(n,i)}model;_data;get type(){return 0}get resource(){return Z.isUri(this.model)?this.model:this.model.uri}toString(){return(this._data instanceof Vr?this._data:Vr.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(Z.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof Vr}append(e,t,n,i,o){this._data instanceof Vr&&this._data.append(e,t,n,i,o)}close(){this._data instanceof Vr&&(this._data=this._data.serialize())}open(){this._data instanceof Vr||(this._data=Vr.deserialize(this._data))}undo(){if(Z.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Vr&&(this._data=this._data.serialize());let e=Vr.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(Z.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof Vr&&(this._data=this._data.serialize());let e=Vr.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof Vr&&(this._data=this._data.serialize()),this._data.byteLength+168}},XA=class{constructor(e,t,n){this.label=e;this.code=t;this._isOpen=!0,this._editStackElementsArr=n.slice(0),this._editStackElementsMap=new Map;for(let i of this._editStackElementsArr){let o=$f(i.resource);this._editStackElementsMap.set(o,i)}this._delegate=null}type=1;_isOpen;_editStackElementsArr;_editStackElementsMap;_delegate;get resources(){return this._editStackElementsArr.map(e=>e.resource)}setDelegate(e){this._delegate=e}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}getMissingModels(){let e=[];for(let t of this._editStackElementsArr)Z.isUri(t.model)&&e.push(t.model);return e}matchesResource(e){let t=$f(e);return this._editStackElementsMap.has(t)}setModel(e){let t=$f(Z.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;let t=$f(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,i,o){let s=$f(e.uri);this._editStackElementsMap.get(s).append(e,t,n,i,o)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(let e of this._editStackElementsArr)e.undo()}redo(){for(let e of this._editStackElementsArr)e.redo()}heapSize(e){let t=$f(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){let e=[];for(let t of this._editStackElementsArr)e.push(`${zo(t.resource)}: ${t}`);return`{${e.join(", ")}}`}};function QA(r){return r.getEOL()===`
`?0:1}function YA(r){return r?r instanceof w_||r instanceof XA:!1}var __=class r{_model;_undoRedoService;constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){let e=this._undoRedoService.getLastElement(this._model.uri);YA(e)&&e.close()}popStackElement(){let e=this._undoRedoService.getLastElement(this._model.uri);YA(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){let n=this._undoRedoService.getLastElement(this._model.uri);if(YA(n)&&n.canAppend(this._model))return n;let i=new w_(u("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(i,t),i}pushEOL(e){let t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],QA(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n,i){let o=this._getOrCreateEditStackElement(e,i),s=this._model.applyEdits(t,!0),a=r._computeCursorState(n,s),l=s.map((d,c)=>({index:c,textChange:d.textChange}));return l.sort((d,c)=>d.textChange.oldPosition===c.textChange.oldPosition?d.index-c.index:d.textChange.oldPosition-c.textChange.oldPosition),o.append(this._model,l.map(d=>d.textChange),QA(this._model),this._model.getAlternativeVersionId(),a),a}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return Be(n),null}}};var qf=class extends N{_isDisposed=!1;dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}};function h7(r,e){let t=0,n=0,i=r.length;for(;n<i;){let o=r.charCodeAt(n);if(o===32)t++;else if(o===9)t=t-t%e+e;else break;n++}return n===i?-1:t}var D_=class extends qf{constructor(t,n){super();this.textModel=t;this.languageConfigurationService=n}getLanguageConfiguration(t){return this.languageConfigurationService.getLanguageConfiguration(t)}_computeIndentLevel(t){return h7(this.textModel.getLineContent(t+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(t,n,i){this.assertNotDisposed();let o=this.textModel.getLineCount();if(t<1||t>o)throw new st("Illegal value for lineNumber");let s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,a=!!(s&&s.offSide),l=-2,d=-1,c=-2,p=-1,h=O=>{if(l!==-1&&(l===-2||l>O-1)){l=-1,d=-1;for(let M=O-2;M>=0;M--){let K=this._computeIndentLevel(M);if(K>=0){l=M,d=K;break}}}if(c===-2){c=-1,p=-1;for(let M=O;M<o;M++){let K=this._computeIndentLevel(M);if(K>=0){c=M,p=K;break}}}},g=-2,f=-1,m=-2,b=-1,v=O=>{if(g===-2){g=-1,f=-1;for(let M=O-2;M>=0;M--){let K=this._computeIndentLevel(M);if(K>=0){g=M,f=K;break}}}if(m!==-1&&(m===-2||m<O-1)){m=-1,b=-1;for(let M=O;M<o;M++){let K=this._computeIndentLevel(M);if(K>=0){m=M,b=K;break}}}},S=0,x=!0,E=0,w=!0,P=0,R=0;for(let O=0;x||w;O++){let M=t-O,K=t+O;O>1&&(M<1||M<n)&&(x=!1),O>1&&(K>o||K>i)&&(w=!1),O>5e4&&(x=!1,w=!1);let $=-1;if(x&&M>=1){let he=this._computeIndentLevel(M-1);he>=0?(c=M-1,p=he,$=Math.ceil(he/this.textModel.getOptions().indentSize)):(h(M),$=this._getIndentLevelForWhitespaceLine(a,d,p))}let Q=-1;if(w&&K<=o){let he=this._computeIndentLevel(K-1);he>=0?(g=K-1,f=he,Q=Math.ceil(he/this.textModel.getOptions().indentSize)):(v(K),Q=this._getIndentLevelForWhitespaceLine(a,f,b))}if(O===0){R=$;continue}if(O===1){if(K<=o&&Q>=0&&R+1===Q){x=!1,S=K,E=K,P=Q;continue}if(M>=1&&$>=0&&$-1===R){w=!1,S=M,E=M,P=$;continue}if(S=t,E=t,P=R,P===0)return{startLineNumber:S,endLineNumber:E,indent:P}}x&&($>=P?S=M:x=!1),w&&(Q>=P?E=K:w=!1)}return{startLineNumber:S,endLineNumber:E,indent:P}}getLinesBracketGuides(t,n,i,o){let s=[];for(let h=t;h<=n;h++)s.push([]);let a=!0,l=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new D(t,1,n,this.textModel.getLineMaxColumn(n))).toArray(),d;if(i&&l.length>0){let h=(t<=i.lineNumber&&i.lineNumber<=n?l:this.textModel.bracketPairs.getBracketPairsInRange(D.fromPositions(i)).toArray()).filter(g=>D.strictContainsPosition(g.range,i));d=v2(h,g=>a||g.range.startLineNumber!==g.range.endLineNumber)?.range}let c=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,p=new nS;for(let h of l){if(!h.closingBracketRange)continue;let g=d&&h.range.equalsRange(d);if(!g&&!o.includeInactive)continue;let f=p.getInlineClassName(h.nestingLevel,h.nestingLevelOfEqualBracketType,c)+(o.highlightActive&&g?" "+p.activeClassName:""),m=h.openingBracketRange.getStartPosition(),b=h.closingBracketRange.getStartPosition(),v=o.horizontalGuides===2||o.horizontalGuides===1&&g;if(h.range.startLineNumber===h.range.endLineNumber){a&&v&&s[h.range.startLineNumber-t].push(new ra(-1,h.openingBracketRange.getEndPosition().column,f,new mc(!1,b.column),-1,-1));continue}let S=this.getVisibleColumnFromPosition(b),x=this.getVisibleColumnFromPosition(h.openingBracketRange.getStartPosition()),E=Math.min(x,S,h.minVisibleColumnIndentation+1),w=!1;kn(this.textModel.getLineContent(h.closingBracketRange.startLineNumber))<h.closingBracketRange.startColumn-1&&(w=!0);let O=Math.max(m.lineNumber,t),M=Math.min(b.lineNumber,n),K=w?1:0;for(let $=O;$<M+K;$++)s[$-t].push(new ra(E,-1,f,null,$===m.lineNumber?m.column:-1,$===b.lineNumber?b.column:-1));v&&(m.lineNumber>=t&&x>E&&s[m.lineNumber-t].push(new ra(E,-1,f,new mc(!1,m.column),-1,-1)),b.lineNumber<=n&&S>E&&s[b.lineNumber-t].push(new ra(E,-1,f,new mc(!w,b.column),-1,-1)))}for(let h of s)h.sort((g,f)=>g.visibleColumn-f.visibleColumn);return s}getVisibleColumnFromPosition(t){return jt.visibleColumnFromColumn(this.textModel.getLineContent(t.lineNumber),t.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(t,n){this.assertNotDisposed();let i=this.textModel.getLineCount();if(t<1||t>i)throw new Error("Illegal value for startLineNumber");if(n<1||n>i)throw new Error("Illegal value for endLineNumber");let o=this.textModel.getOptions(),s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,a=!!(s&&s.offSide),l=new Array(n-t+1),d=-2,c=-1,p=-2,h=-1;for(let g=t;g<=n;g++){let f=g-t,m=this._computeIndentLevel(g-1);if(m>=0){d=g-1,c=m,l[f]=Math.ceil(m/o.indentSize);continue}if(d===-2){d=-1,c=-1;for(let b=g-2;b>=0;b--){let v=this._computeIndentLevel(b);if(v>=0){d=b,c=v;break}}}if(p!==-1&&(p===-2||p<g-1)){p=-1,h=-1;for(let b=g;b<i;b++){let v=this._computeIndentLevel(b);if(v>=0){p=b,h=v;break}}}l[f]=this._getIndentLevelForWhitespaceLine(a,c,h)}return l}_getIndentLevelForWhitespaceLine(t,n,i){let o=this.textModel.getOptions();return n===-1||i===-1?0:n<i?1+Math.floor(n/o.indentSize):n===i||t?Math.ceil(i/o.indentSize):1+Math.floor(i/o.indentSize)}},nS=class{activeClassName="indent-active";getInlineClassName(e,t,n){return this.getInlineClassNameOfLevel(n?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}};var ZA=class{spacesDiff=0;looksLikeAlignment=!1};function AX(r,e,t,n,i){i.spacesDiff=0,i.looksLikeAlignment=!1;let o;for(o=0;o<e&&o<n;o++){let h=r.charCodeAt(o),g=t.charCodeAt(o);if(h!==g)break}let s=0,a=0;for(let h=o;h<e;h++)r.charCodeAt(h)===32?s++:a++;let l=0,d=0;for(let h=o;h<n;h++)t.charCodeAt(h)===32?l++:d++;if(s>0&&a>0||l>0&&d>0)return;let c=Math.abs(a-d),p=Math.abs(s-l);if(c===0){i.spacesDiff=p,p>0&&0<=l-1&&l-1<r.length&&l<t.length&&t.charCodeAt(l)!==32&&r.charCodeAt(l-1)===32&&r.charCodeAt(r.length-1)===44&&(i.looksLikeAlignment=!0);return}if(p%c===0){i.spacesDiff=p/c;return}}function JA(r,e,t){let n=Math.min(r.getLineCount(),1e4),i=0,o=0,s="",a=0,l=[2,4,6,8,3,5,7],d=8,c=[0,0,0,0,0,0,0,0,0],p=new ZA;for(let f=1;f<=n;f++){let m=r.getLineLength(f),b=r.getLineContent(f),v=m<=65536,S=!1,x=0,E=0,w=0;for(let R=0,O=m;R<O;R++){let M=v?b.charCodeAt(R):r.getLineCharCode(f,R);if(M===9)w++;else if(M===32)E++;else{S=!0,x=R;break}}if(!S||(w>0?i++:E>1&&o++,AX(s,a,b,x,p),p.looksLikeAlignment&&!(t&&e===p.spacesDiff)))continue;let P=p.spacesDiff;P<=d&&c[P]++,s=b,a=x}let h=t;i!==o&&(h=i<o);let g=e;if(h){let f=h?0:.1*n;l.forEach(m=>{let b=c[m];b>f&&(f=b,g=m)}),g===4&&c[4]>0&&c[2]>0&&c[2]>=c[4]/2&&(g=2)}return{insertSpaces:h,tabSize:g}}function Tr(r){return(r.metadata&1)>>>0}function en(r,e){r.metadata=r.metadata&254|e<<0}function so(r){return(r.metadata&2)>>>1===1}function qt(r,e){r.metadata=r.metadata&253|(e?1:0)<<1}function S7(r){return(r.metadata&4)>>>2===1}function g7(r,e){r.metadata=r.metadata&251|(e?1:0)<<2}function C7(r){return(r.metadata&64)>>>6===1}function m7(r,e){r.metadata=r.metadata&191|(e?1:0)<<6}function NX(r){return(r.metadata&24)>>>3}function f7(r,e){r.metadata=r.metadata&231|e<<3}function FX(r){return(r.metadata&32)>>>5===1}function b7(r,e){r.metadata=r.metadata&223|(e?1:0)<<5}var rS=class{metadata;parent;left;right;start;end;delta;maxEnd;id;ownerId;options;cachedVersionId;cachedAbsoluteStart;cachedAbsoluteEnd;range;constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,en(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,g7(this,!1),m7(this,!1),f7(this,1),b7(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,qt(this,!1)}reset(e,t,n,i){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=i}setOptions(e){this.options=e;let t=this.options.className;g7(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),m7(this,this.options.glyphMarginClassName!==null),f7(this,this.options.stickiness),b7(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}},ot=new rS(null,0,0);ot.parent=ot;ot.left=ot;ot.right=ot;en(ot,0);var Xf=class{root;requestNormalizeDelta;constructor(){this.root=ot,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,i,o,s){return this.root===ot?[]:KX(this,e,t,n,i,o,s)}search(e,t,n,i){return this.root===ot?[]:v7(this,e,t,n,i)}collectNodesFromOwner(e){return UX(this,e)}collectNodesPostOrder(){return zX(this)}insert(e){y7(this,e),this._normalizeDeltaIfNecessary()}delete(e){I7(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){let n=e,i=0;for(;e!==this.root;)e===e.parent.right&&(i+=e.parent.delta),e=e.parent;let o=n.start+i,s=n.end+i;n.setCachedOffsets(o,s,t)}acceptReplace(e,t,n,i){let o=VX(this,e,e+t);for(let s=0,a=o.length;s<a;s++){let l=o[s];I7(this,l)}this._normalizeDeltaIfNecessary(),HX(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let s=0,a=o.length;s<a;s++){let l=o[s];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,WX(l,e,e+t,n,i),l.maxEnd=l.end,y7(this,l)}this._normalizeDeltaIfNecessary()}getAllInOrder(){return v7(this,0,!1,0,!1)}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,BX(this))}};function BX(r){let e=r.root,t=0;for(;e!==ot;){if(e.left!==ot&&!so(e.left)){e=e.left;continue}if(e.right!==ot&&!so(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,wc(e),qt(e,!0),qt(e.left,!1),qt(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}qt(r.root,!1)}function Yf(r,e,t,n){return r<t?!0:r>t||n===1?!1:n===2?!0:e}function WX(r,e,t,n,i){let o=NX(r),s=o===0||o===2,a=o===1||o===2,l=t-e,d=n,c=Math.min(l,d),p=r.start,h=!1,g=r.end,f=!1;e<=p&&g<=t&&FX(r)&&(r.start=e,h=!0,r.end=e,f=!0);{let b=i?1:l>0?2:0;!h&&Yf(p,s,e,b)&&(h=!0),!f&&Yf(g,a,e,b)&&(f=!0)}if(c>0&&!i){let b=l>d?2:0;!h&&Yf(p,s,e+c,b)&&(h=!0),!f&&Yf(g,a,e+c,b)&&(f=!0)}{let b=i?1:0;!h&&Yf(p,s,t,b)&&(r.start=e+d,h=!0),!f&&Yf(g,a,t,b)&&(r.end=e+d,f=!0)}let m=d-l;h||(r.start=Math.max(0,p+m)),f||(r.end=Math.max(0,g+m)),r.start>r.end&&(r.end=r.start)}function VX(r,e,t){let n=r.root,i=0,o=0,s=0,a=0,l=[],d=0;for(;n!==ot;){if(so(n)){qt(n.left,!1),qt(n.right,!1),n===n.parent.right&&(i-=n.parent.delta),n=n.parent;continue}if(!so(n.left)){if(o=i+n.maxEnd,o<e){qt(n,!0);continue}if(n.left!==ot){n=n.left;continue}}if(s=i+n.start,s>t){qt(n,!0);continue}if(a=i+n.end,a>=e&&(n.setCachedOffsets(s,a,0),l[d++]=n),qt(n,!0),n.right!==ot&&!so(n.right)){i+=n.delta,n=n.right;continue}}return qt(r.root,!1),l}function HX(r,e,t,n){let i=r.root,o=0,s=0,a=0,l=n-(t-e);for(;i!==ot;){if(so(i)){qt(i.left,!1),qt(i.right,!1),i===i.parent.right&&(o-=i.parent.delta),wc(i),i=i.parent;continue}if(!so(i.left)){if(s=o+i.maxEnd,s<e){qt(i,!0);continue}if(i.left!==ot){i=i.left;continue}}if(a=o+i.start,a>t){i.start+=l,i.end+=l,i.delta+=l,(i.delta<-1073741824||i.delta>1073741824)&&(r.requestNormalizeDelta=!0),qt(i,!0);continue}if(qt(i,!0),i.right!==ot&&!so(i.right)){o+=i.delta,i=i.right;continue}}qt(r.root,!1)}function UX(r,e){let t=r.root,n=[],i=0;for(;t!==ot;){if(so(t)){qt(t.left,!1),qt(t.right,!1),t=t.parent;continue}if(t.left!==ot&&!so(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[i++]=t),qt(t,!0),t.right!==ot&&!so(t.right)){t=t.right;continue}}return qt(r.root,!1),n}function zX(r){let e=r.root,t=[],n=0;for(;e!==ot;){if(so(e)){qt(e.left,!1),qt(e.right,!1),e=e.parent;continue}if(e.left!==ot&&!so(e.left)){e=e.left;continue}if(e.right!==ot&&!so(e.right)){e=e.right;continue}t[n++]=e,qt(e,!0)}return qt(r.root,!1),t}function v7(r,e,t,n,i){let o=r.root,s=0,a=0,l=0,d=[],c=0;for(;o!==ot;){if(so(o)){qt(o.left,!1),qt(o.right,!1),o===o.parent.right&&(s-=o.parent.delta),o=o.parent;continue}if(o.left!==ot&&!so(o.left)){o=o.left;continue}a=s+o.start,l=s+o.end,o.setCachedOffsets(a,l,n);let p=!0;if(e&&o.ownerId&&o.ownerId!==e&&(p=!1),t&&S7(o)&&(p=!1),i&&!C7(o)&&(p=!1),p&&(d[c++]=o),qt(o,!0),o.right!==ot&&!so(o.right)){s+=o.delta,o=o.right;continue}}return qt(r.root,!1),d}function KX(r,e,t,n,i,o,s){let a=r.root,l=0,d=0,c=0,p=0,h=[],g=0;for(;a!==ot;){if(so(a)){qt(a.left,!1),qt(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;continue}if(!so(a.left)){if(d=l+a.maxEnd,d<e){qt(a,!0);continue}if(a.left!==ot){a=a.left;continue}}if(c=l+a.start,c>t){qt(a,!0);continue}if(p=l+a.end,p>=e){a.setCachedOffsets(c,p,o);let f=!0;n&&a.ownerId&&a.ownerId!==n&&(f=!1),i&&S7(a)&&(f=!1),s&&!C7(a)&&(f=!1),f&&(h[g++]=a)}if(qt(a,!0),a.right!==ot&&!so(a.right)){l+=a.delta,a=a.right;continue}}return qt(r.root,!1),h}function y7(r,e){if(r.root===ot)return e.parent=ot,e.left=ot,e.right=ot,en(e,0),r.root=e,r.root;GX(r,e),dp(e.parent);let t=e;for(;t!==r.root&&Tr(t.parent)===1;)if(t.parent===t.parent.parent.left){let n=t.parent.parent.right;Tr(n)===1?(en(t.parent,0),en(n,0),en(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,iS(r,t)),en(t.parent,0),en(t.parent.parent,1),oS(r,t.parent.parent))}else{let n=t.parent.parent.left;Tr(n)===1?(en(t.parent,0),en(n,0),en(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,oS(r,t)),en(t.parent,0),en(t.parent.parent,1),iS(r,t.parent.parent))}return en(r.root,0),e}function GX(r,e){let t=0,n=r.root,i=e.start,o=e.end;for(;;)if($X(i,o,n.start+t,n.end+t)<0)if(n.left===ot){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===ot){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=ot,e.right=ot,en(e,1)}function I7(r,e){let t,n;if(e.left===ot?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===ot?(t=e.left,n=e):(n=jX(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(r.requestNormalizeDelta=!0)),n===r.root){r.root=t,en(t,0),e.detach(),eN(),wc(t),r.root.parent=ot;return}let i=Tr(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,en(n,Tr(e)),e===r.root?r.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==ot&&(n.left.parent=n),n.right!==ot&&(n.right.parent=n)),e.detach(),i){dp(t.parent),n!==e&&(dp(n),dp(n.parent)),eN();return}dp(t),dp(t.parent),n!==e&&(dp(n),dp(n.parent));let o;for(;t!==r.root&&Tr(t)===0;)t===t.parent.left?(o=t.parent.right,Tr(o)===1&&(en(o,0),en(t.parent,1),iS(r,t.parent),o=t.parent.right),Tr(o.left)===0&&Tr(o.right)===0?(en(o,1),t=t.parent):(Tr(o.right)===0&&(en(o.left,0),en(o,1),oS(r,o),o=t.parent.right),en(o,Tr(t.parent)),en(t.parent,0),en(o.right,0),iS(r,t.parent),t=r.root)):(o=t.parent.left,Tr(o)===1&&(en(o,0),en(t.parent,1),oS(r,t.parent),o=t.parent.left),Tr(o.left)===0&&Tr(o.right)===0?(en(o,1),t=t.parent):(Tr(o.left)===0&&(en(o.right,0),en(o,1),iS(r,o),o=t.parent.left),en(o,Tr(t.parent)),en(t.parent,0),en(o.left,0),oS(r,t.parent),t=r.root));en(t,0),eN()}function jX(r){for(;r.left!==ot;)r=r.left;return r}function eN(){ot.parent=ot,ot.delta=0,ot.start=0,ot.end=0}function iS(r,e){let t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(r.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==ot&&(t.left.parent=e),t.parent=e.parent,e.parent===ot?r.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,wc(e),wc(t)}function oS(r,e){let t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(r.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==ot&&(t.right.parent=e),t.parent=e.parent,e.parent===ot?r.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,wc(e),wc(t)}function x7(r){let e=r.end;if(r.left!==ot){let t=r.left.maxEnd;t>e&&(e=t)}if(r.right!==ot){let t=r.right.maxEnd+r.delta;t>e&&(e=t)}return e}function wc(r){r.maxEnd=x7(r)}function dp(r){for(;r!==ot;){let e=x7(r);if(r.maxEnd===e)return;r.maxEnd=e,r=r.parent}}function $X(r,e,t,n){return r===t?e-n:r-t}var Qf=class{parent;left;right;color;piece;size_left;lf_left;constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==je)return L_(this.right);let e=this;for(;e.parent!==je&&e.parent.left!==e;)e=e.parent;return e.parent===je?je:e.parent}prev(){if(this.left!==je)return nN(this.left);let e=this;for(;e.parent!==je&&e.parent.right!==e;)e=e.parent;return e.parent===je?je:e.parent}detach(){this.parent=null,this.left=null,this.right=null}};var je=new Qf(null,0);je.parent=je;je.left=je;je.right=je;je.color=0;function L_(r){for(;r.left!==je;)r=r.left;return r}function nN(r){for(;r.right!==je;)r=r.right;return r}function iN(r){return r===je?0:r.size_left+r.piece.length+iN(r.right)}function oN(r){return r===je?0:r.lf_left+r.piece.lineFeedCnt+oN(r.right)}function tN(){je.parent=je}function aS(r,e){let t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==je&&(t.left.parent=e),t.parent=e.parent,e.parent===je?r.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function lS(r,e){let t=e.left;e.left=t.right,t.right!==je&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===je?r.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function dS(r,e){let t,n;if(e.left===je?(n=e,t=n.right):e.right===je?(n=e,t=n.left):(n=L_(e.right),t=n.right),n===r.root){r.root=t,t.color=0,e.detach(),tN(),r.root.parent=je;return}let i=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,sS(r,t)):(n.parent===e?t.parent=n:t.parent=n.parent,sS(r,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===r.root?r.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==je&&(n.left.parent=n),n.right!==je&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,sS(r,n)),e.detach(),t.parent.left===t){let s=iN(t),a=oN(t);if(s!==t.parent.size_left||a!==t.parent.lf_left){let l=s-t.parent.size_left,d=a-t.parent.lf_left;t.parent.size_left=s,t.parent.lf_left=a,hd(r,t.parent,l,d)}}if(sS(r,t.parent),i){tN();return}let o;for(;t!==r.root&&t.color===0;)t===t.parent.left?(o=t.parent.right,o.color===1&&(o.color=0,t.parent.color=1,aS(r,t.parent),o=t.parent.right),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.right.color===0&&(o.left.color=0,o.color=1,lS(r,o),o=t.parent.right),o.color=t.parent.color,t.parent.color=0,o.right.color=0,aS(r,t.parent),t=r.root)):(o=t.parent.left,o.color===1&&(o.color=0,t.parent.color=1,lS(r,t.parent),o=t.parent.left),o.left.color===0&&o.right.color===0?(o.color=1,t=t.parent):(o.left.color===0&&(o.right.color=0,o.color=1,aS(r,o),o=t.parent.left),o.color=t.parent.color,t.parent.color=0,o.left.color=0,lS(r,t.parent),t=r.root));t.color=0,tN()}function rN(r,e){for(sS(r,e);e!==r.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){let t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,aS(r,e)),e.parent.color=0,e.parent.parent.color=1,lS(r,e.parent.parent))}else{let t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,lS(r,e)),e.parent.color=0,e.parent.parent.color=1,aS(r,e.parent.parent))}r.root.color=0}function hd(r,e,t,n){for(;e!==r.root&&e!==je;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}function sS(r,e){let t=0,n=0;if(e!==r.root){for(;e!==r.root&&e===e.parent.right;)e=e.parent;if(e!==r.root)for(e=e.parent,t=iN(e.left)-e.size_left,n=oN(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==r.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}var qX=999,Lc=class{searchString;isRegex;matchCase;wordSeparators;constructor(e,t,n,i){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=i}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=YX(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=Fx(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new DT(t,this.wordSeparators?Yl(this.wordSeparators,[]):null,n?this.searchString:null)}};function YX(r){if(!r||r.length===0)return!1;for(let e=0,t=r.length;e<t;e++){let n=r.charCodeAt(e);if(n===10)return!0;if(n===92){if(e++,e>=t)break;let i=r.charCodeAt(e);if(i===110||i===114||i===87)return!0}}return!1}function cp(r,e,t){if(!t)return new Ku(r,null);let n=[];for(let i=0,o=e.length;i<o;i++)n[i]=e[i];return new Ku(r,n)}var k_=class{_lineFeedsOffsets;constructor(e){let t=[],n=0;for(let i=0,o=e.length;i<o;i++)e.charCodeAt(i)===10&&(t[n++]=i);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){let t=this._lineFeedsOffsets,n=0,i=t.length-1;if(i===-1||e<=t[0])return 0;for(;n<i;){let o=n+((i-n)/2>>0);t[o]>=e?i=o-1:t[o+1]>=e?(n=o,i=o):n=o+1}return n+1}},og=class{static findMatches(e,t,n,i,o){let s=t.parseSearchRequest();return s?s.regex.multiline?this._doFindMatchesMultiline(e,n,new Dc(s.wordSeparators,s.regex),i,o):this._doFindMatchesLineByLine(e,n,s,i,o):[]}static _getMultilineMatchRange(e,t,n,i,o,s){let a,l=0;i?(l=i.findLineFeedCountBeforeOffset(o),a=t+o+l):a=t+o;let d;if(i){let g=i.findLineFeedCountBeforeOffset(o+s.length)-l;d=a+s.length+g}else d=a+s.length;let c=e.getPositionAt(a),p=e.getPositionAt(d);return new D(c.lineNumber,c.column,p.lineNumber,p.column)}static _doFindMatchesMultiline(e,t,n,i,o){let s=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new k_(a):null,d=[],c=0,p;for(n.reset(0);p=n.next(a);)if(d[c++]=cp(this._getMultilineMatchRange(e,s,a,l,p.index,p[0]),p,i),c>=o)return d;return d}static _doFindMatchesLineByLine(e,t,n,i,o){let s=[],a=0;if(t.startLineNumber===t.endLineNumber){let d=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,d,t.startLineNumber,t.startColumn-1,a,s,i,o),s}let l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,s,i,o);for(let d=t.startLineNumber+1;d<t.endLineNumber&&a<o;d++)a=this._findMatchesInLine(n,e.getLineContent(d),d,0,a,s,i,o);if(a<o){let d=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,d,t.endLineNumber,0,a,s,i,o)}return s}static _findMatchesInLine(e,t,n,i,o,s,a,l){let d=e.wordSeparators;if(!a&&e.simpleSearch){let h=e.simpleSearch,g=h.length,f=t.length,m=-g;for(;(m=t.indexOf(h,m+g))!==-1;)if((!d||R_(d,t,f,m,g))&&(s[o++]=new Ku(new D(n,m+1+i,n,m+1+g+i),null),o>=l))return o;return o}let c=new Dc(e.wordSeparators,e.regex),p;c.reset(0);do if(p=c.next(t),p&&(s[o++]=cp(new D(n,p.index+1+i,n,p.index+1+p[0].length+i),p,a),o>=l))return o;while(p);return o}static findNextMatch(e,t,n,i){let o=t.parseSearchRequest();if(!o)return null;let s=new Dc(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindNextMatchMultiline(e,n,s,i):this._doFindNextMatchLineByLine(e,n,s,i)}static _doFindNextMatchMultiline(e,t,n,i){let o=new F(t.lineNumber,1),s=e.getOffsetAt(o),a=e.getLineCount(),l=e.getValueInRange(new D(o.lineNumber,o.column,a,e.getLineMaxColumn(a)),1),d=e.getEOL()===`\r
`?new k_(l):null;n.reset(t.column-1);let c=n.next(l);return c?cp(this._getMultilineMatchRange(e,s,l,d,c.index,c[0]),c,i):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new F(1,1),n,i):null}static _doFindNextMatchLineByLine(e,t,n,i){let o=e.getLineCount(),s=t.lineNumber,a=e.getLineContent(s),l=this._findFirstMatchInLine(n,a,s,t.column,i);if(l)return l;for(let d=1;d<=o;d++){let c=(s+d-1)%o,p=e.getLineContent(c+1),h=this._findFirstMatchInLine(n,p,c+1,1,i);if(h)return h}return null}static _findFirstMatchInLine(e,t,n,i,o){e.reset(i-1);let s=e.next(t);return s?cp(new D(n,s.index+1,n,s.index+1+s[0].length),s,o):null}static findPreviousMatch(e,t,n,i){let o=t.parseSearchRequest();if(!o)return null;let s=new Dc(o.wordSeparators,o.regex);return o.regex.multiline?this._doFindPreviousMatchMultiline(e,n,s,i):this._doFindPreviousMatchLineByLine(e,n,s,i)}static _doFindPreviousMatchMultiline(e,t,n,i){let o=this._doFindMatchesMultiline(e,new D(1,1,t.lineNumber,t.column),n,i,10*qX);if(o.length>0)return o[o.length-1];let s=e.getLineCount();return t.lineNumber!==s||t.column!==e.getLineMaxColumn(s)?this._doFindPreviousMatchMultiline(e,new F(s,e.getLineMaxColumn(s)),n,i):null}static _doFindPreviousMatchLineByLine(e,t,n,i){let o=e.getLineCount(),s=t.lineNumber,a=e.getLineContent(s).substring(0,t.column-1),l=this._findLastMatchInLine(n,a,s,i);if(l)return l;for(let d=1;d<=o;d++){let c=(o+s-d-1)%o,p=e.getLineContent(c+1),h=this._findLastMatchInLine(n,p,c+1,i);if(h)return h}return null}static _findLastMatchInLine(e,t,n,i){let o=null,s;for(e.reset(0);s=e.next(t);)o=cp(new D(n,s.index+1,n,s.index+1+s[0].length),s,i);return o}};function XX(r,e,t,n,i){if(n===0)return!0;let o=e.charCodeAt(n-1);if(r.get(o)!==0||o===13||o===10)return!0;if(i>0){let s=e.charCodeAt(n);if(r.get(s)!==0)return!0}return!1}function QX(r,e,t,n,i){if(n+i===t)return!0;let o=e.charCodeAt(n+i);if(r.get(o)!==0||o===13||o===10)return!0;if(i>0){let s=e.charCodeAt(n+i-1);if(r.get(s)!==0)return!0}return!1}function R_(r,e,t,n,i){return XX(r,e,t,n,i)&&QX(r,e,t,n,i)}var Dc=class{_wordSeparators;_searchRegex;_prevMatchStartIndex;_prevMatchLength;constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){let t=e.length,n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;let i=n.index,o=n[0].length;if(i===this._prevMatchStartIndex&&o===this._prevMatchLength){if(o===0){Im(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=i,this._prevMatchLength=o,!this._wordSeparators||R_(this._wordSeparators,e,t,i,o))return n}while(n);return null}};var kc=65535;function E7(r){let e;return r[r.length-1]<65536?e=new Uint16Array(r.length):e=new Uint32Array(r.length),e.set(r,0),e}var aN=class{constructor(e,t,n,i,o){this.lineStarts=e;this.cr=t;this.lf=n;this.crlf=i;this.isBasicASCII=o}};function md(r,e=!0){let t=[0],n=1;for(let i=0,o=r.length;i<o;i++){let s=r.charCodeAt(i);s===13?i+1<o&&r.charCodeAt(i+1)===10?(t[n++]=i+2,i++):t[n++]=i+1:s===10&&(t[n++]=i+1)}return e?E7(t):t}function T7(r,e){r.length=0,r[0]=0;let t=1,n=0,i=0,o=0,s=!0;for(let l=0,d=e.length;l<d;l++){let c=e.charCodeAt(l);c===13?l+1<d&&e.charCodeAt(l+1)===10?(o++,r[t++]=l+2,l++):(n++,r[t++]=l+1):c===10?(i++,r[t++]=l+1):s&&c!==9&&(c<32||c>126)&&(s=!1)}let a=new aN(E7(r),n,i,o,s);return r.length=0,a}var nr=class{bufferIndex;start;end;length;lineFeedCnt;constructor(e,t,n,i,o){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=i,this.length=o}},fd=class{buffer;lineStarts;constructor(e,t){this.buffer=e,this.lineStarts=t}},lN=class{_pieces;_index;_tree;_BOM;constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==je&&e.iterate(e.root,n=>(n!==je&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}},dN=class{_limit;_cache;constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1,n=this._cache;for(let i=0;i<n.length;i++){let o=n[i];if(o.node.parent===null||o.nodeStartOffset>=e){n[i]=null,t=!0;continue}}if(t){let i=[];for(let o of n)o!==null&&i.push(o);this._cache=i}}},M_=class{root;_buffers;_lineCnt;_length;_EOL;_EOLLength;_EOLNormalized;_lastChangeBufferPos;_searchCache;_lastVisitedLine;constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new fd("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=je,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let i=null;for(let o=0,s=e.length;o<s;o++)if(e[o].buffer.length>0){e[o].lineStarts||(e[o].lineStarts=md(e[o].buffer));let a=new nr(o+1,{line:0,column:0},{line:e[o].lineStarts.length-1,column:e[o].buffer.length-e[o].lineStarts[e[o].lineStarts.length-1]},e[o].lineStarts.length-1,e[o].buffer.length);this._buffers.push(e[o]),i=this.rbInsertRight(i,a)}this._searchCache=new dN(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){let t=kc,n=t-Math.floor(t/3),i=n*2,o="",s=0,a=[];if(this.iterate(this.root,l=>{let d=this.getNodeContent(l),c=d.length;if(s<=n||s+c<i)return o+=d,s+=c,!0;let p=o.replace(/\r\n|\r|\n/g,e);return a.push(new fd(p,md(p))),o=d,s=c,!0}),s>0){let l=o.replace(/\r\n|\r|\n/g,e);a.push(new fd(l,md(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new lN(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,i=>{if(i===je)return!0;let o=this.getNodeContent(i),s=o.length,a=e.nodeAt(t),l=e.nodeAt(t+s),d=e.getValueInRange2(a,l);return t+=s,o===d})}getOffsetAt(e,t){let n=0,i=this.root;for(;i!==je;)if(i.left!==je&&i.lf_left+1>=e)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt+1>=e){n+=i.size_left;let o=this.getAccumulatedValue(i,e-i.lf_left-2);return n+=o+t-1}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0,i=e;for(;t!==je;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){let o=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+o.index,o.index===0){let s=this.getOffsetAt(n+1,1),a=i-s;return new F(n+1,a+1)}return new F(n+1,o.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===je){let o=this.getOffsetAt(n+1,1),s=i-e-o;return new F(n+1,s+1)}else t=t.right;return new F(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";let n=this.nodeAt2(e.startLineNumber,e.startColumn),i=this.nodeAt2(e.endLineNumber,e.endColumn),o=this.getValueInRange2(n,i);return t?t!==this._EOL||!this._EOLNormalized?o.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?o:o.replace(/\r\n|\r|\n/g,t):o}getValueInRange2(e,t){if(e.node===t.node){let a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,d=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(d+e.remainder,d+t.remainder)}let n=e.node,i=this._buffers[n.piece.bufferIndex].buffer,o=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start),s=i.substring(o+e.remainder,o+n.piece.length);for(n=n.next();n!==je;){let a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){s+=a.substring(l,l+t.remainder);break}else s+=a.substr(l,n.piece.length);n=n.next()}return s}getLinesContent(){let e=[],t=0,n="",i=!1;return this.iterate(this.root,o=>{if(o===je)return!0;let s=o.piece,a=s.length;if(a===0)return!0;let l=this._buffers[s.bufferIndex].buffer,d=this._buffers[s.bufferIndex].lineStarts,c=s.start.line,p=s.end.line,h=d[c]+s.start.column;if(i&&(l.charCodeAt(h)===10&&(h++,a--),e[t++]=n,n="",i=!1,a===0))return!0;if(c===p)return!this._EOLNormalized&&l.charCodeAt(h+a-1)===13?(i=!0,n+=l.substr(h,a-1)):n+=l.substr(h,a),!0;n+=this._EOLNormalized?l.substring(h,Math.max(h,d[c+1]-this._EOLLength)):l.substring(h,d[c+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let g=c+1;g<p;g++)n=this._EOLNormalized?l.substring(d[g],d[g+1]-this._EOLLength):l.substring(d[g],d[g+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&l.charCodeAt(d[p]+s.end.column-1)===13?(i=!0,s.end.column===0?t--:n=l.substr(d[p],s.end.column-1)):n=l.substr(d[p],s.end.column),!0}),i&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){let t=e.node.next();if(!t)return 0;let n=this._buffers[t.piece.bufferIndex],i=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(i)}else{let t=this._buffers[e.node.piece.bufferIndex],i=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(i)}}getLineCharCode(e,t){let n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}getCharCode(e){let t=this.nodeAt(e);return this._getCharCode(t)}getNearestChunk(e){let t=this.nodeAt(e);if(t.remainder===t.node.piece.length){let n=t.node.next();if(!n||n===je)return"";let i=this._buffers[n.piece.bufferIndex],o=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i.buffer.substring(o,o+n.piece.length)}else{let n=this._buffers[t.node.piece.bufferIndex],i=this.offsetInBuffer(t.node.piece.bufferIndex,t.node.piece.start),o=i+t.remainder,s=i+t.node.piece.length;return n.buffer.substring(o,s)}}findMatchesInNode(e,t,n,i,o,s,a,l,d,c,p){let h=this._buffers[e.piece.bufferIndex],g=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),f=this.offsetInBuffer(e.piece.bufferIndex,o),m=this.offsetInBuffer(e.piece.bufferIndex,s),b,v={line:0,column:0},S,x;t._wordSeparators?(S=h.buffer.substring(f,m),x=E=>E+f,t.reset(0)):(S=h.buffer,x=E=>E,t.reset(f));do if(b=t.next(S),b){if(x(b.index)>=m)return c;this.positionInBuffer(e,x(b.index)-g,v);let E=this.getLineFeedCnt(e.piece.bufferIndex,o,v),w=v.line===o.line?v.column-o.column+i:v.column+1,P=w+b[0].length;if(p[c++]=cp(new D(n+E,w,n+E,P),b,l),x(b.index)+b[0].length>=m||c>=d)return c}while(b);return c}findMatchesLineByLine(e,t,n,i){let o=[],s=0,a=new Dc(t.wordSeparators,t.regex),l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];let d=this.nodeAt2(e.endLineNumber,e.endColumn);if(d===null)return[];let c=this.positionInBuffer(l.node,l.remainder),p=this.positionInBuffer(d.node,d.remainder);if(l.node===d.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,c,p,t,n,i,s,o),o;let h=e.startLineNumber,g=l.node;for(;g!==d.node;){let m=this.getLineFeedCnt(g.piece.bufferIndex,c,g.piece.end);if(m>=1){let v=this._buffers[g.piece.bufferIndex].lineStarts,S=this.offsetInBuffer(g.piece.bufferIndex,g.piece.start),x=v[c.line+m],E=h===e.startLineNumber?e.startColumn:1;if(s=this.findMatchesInNode(g,a,h,E,c,this.positionInBuffer(g,x-S),t,n,i,s,o),s>=i)return o;h+=m}let b=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){let v=this.getLineContent(h).substring(b,e.endColumn-1);return s=this._findMatchesInLine(t,a,v,e.endLineNumber,b,s,o,n,i),o}if(s=this._findMatchesInLine(t,a,this.getLineContent(h).substr(b),h,b,s,o,n,i),s>=i)return o;h++,l=this.nodeAt2(h,1),g=l.node,c=this.positionInBuffer(l.node,l.remainder)}if(h===e.endLineNumber){let m=h===e.startLineNumber?e.startColumn-1:0,b=this.getLineContent(h).substring(m,e.endColumn-1);return s=this._findMatchesInLine(t,a,b,e.endLineNumber,m,s,o,n,i),o}let f=h===e.startLineNumber?e.startColumn:1;return s=this.findMatchesInNode(d.node,a,h,f,c,p,t,n,i,s,o),o}_findMatchesInLine(e,t,n,i,o,s,a,l,d){let c=e.wordSeparators;if(!l&&e.simpleSearch){let h=e.simpleSearch,g=h.length,f=n.length,m=-g;for(;(m=n.indexOf(h,m+g))!==-1;)if((!c||R_(c,n,f,m,g))&&(a[s++]=new Ku(new D(i,m+1+o,i,m+1+g+o),null),s>=d))return s;return s}let p;t.reset(0);do if(p=t.next(n),p&&(a[s++]=cp(new D(i,p.index+1+o,i,p.index+1+p[0].length+o),p,l),s>=d))return s;while(p);return s}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==je){let{node:i,remainder:o,nodeStartOffset:s}=this.nodeAt(e),a=i.piece,l=a.bufferIndex,d=this.positionInBuffer(i,o);if(i.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&s+a.length===e&&t.length<kc){this.appendToNode(i,t),this.computeBufferMetadata();return}if(s===e)this.insertContentToNodeLeft(t,i),this._searchCache.validate(e);else if(s+i.piece.length>e){let c=[],p=new nr(a.bufferIndex,d,a.end,this.getLineFeedCnt(a.bufferIndex,d,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,d));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(i,o)===10){let m={line:p.start.line+1,column:0};p=new nr(p.bufferIndex,m,p.end,this.getLineFeedCnt(p.bufferIndex,m,p.end),p.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(i,o-1)===13){let m=this.positionInBuffer(i,o-1);this.deleteNodeTail(i,m),t="\r"+t,i.piece.length===0&&c.push(i)}else this.deleteNodeTail(i,d);else this.deleteNodeTail(i,d);let h=this.createNewPieces(t);p.length>0&&this.rbInsertRight(i,p);let g=i;for(let f=0;f<h.length;f++)g=this.rbInsertRight(g,h[f]);this.deleteNodes(c)}else this.insertContentToNodeRight(t,i)}else{let i=this.createNewPieces(t),o=this.rbInsertLeft(null,i[0]);for(let s=1;s<i.length;s++)o=this.rbInsertRight(o,i[s])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===je)return;let n=this.nodeAt(e),i=this.nodeAt(e+t),o=n.node,s=i.node;if(o===s){let h=this.positionInBuffer(o,n.remainder),g=this.positionInBuffer(o,i.remainder);if(n.nodeStartOffset===e){if(t===o.piece.length){let f=o.next();dS(this,o),this.validateCRLFWithPrevNode(f),this.computeBufferMetadata();return}this.deleteNodeHead(o,g),this._searchCache.validate(e),this.validateCRLFWithPrevNode(o),this.computeBufferMetadata();return}if(n.nodeStartOffset+o.piece.length===e+t){this.deleteNodeTail(o,h),this.validateCRLFWithNextNode(o),this.computeBufferMetadata();return}this.shrinkNode(o,h,g),this.computeBufferMetadata();return}let a=[],l=this.positionInBuffer(o,n.remainder);this.deleteNodeTail(o,l),this._searchCache.validate(e),o.piece.length===0&&a.push(o);let d=this.positionInBuffer(s,i.remainder);this.deleteNodeHead(s,d),s.piece.length===0&&a.push(s);let c=o.next();for(let h=c;h!==je&&h!==s;h=h.next())a.push(h);let p=o.piece.length===0?o.prev():o;this.deleteNodes(a),this.validateCRLFWithNextNode(p),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let s=t.piece,a={line:s.start.line+1,column:0},l=new nr(s.bufferIndex,a,s.end,this.getLineFeedCnt(s.bufferIndex,a,s.end),s.length-1);t.piece=l,e+=`
`,hd(this,t,-1,-1),t.piece.length===0&&n.push(t)}let i=this.createNewPieces(e),o=this.rbInsertLeft(t,i[i.length-1]);for(let s=i.length-2;s>=0;s--)o=this.rbInsertLeft(o,i[s]);this.validateCRLFWithPrevNode(o),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);let n=this.createNewPieces(e),i=this.rbInsertRight(t,n[0]),o=i;for(let s=1;s<n.length;s++)o=this.rbInsertRight(o,n[s]);this.validateCRLFWithPrevNode(i)}positionInBuffer(e,t,n){let i=e.piece,o=e.piece.bufferIndex,s=this._buffers[o].lineStarts,l=s[i.start.line]+i.start.column+t,d=i.start.line,c=i.end.line,p=0,h=0,g=0;for(;d<=c&&(p=d+(c-d)/2|0,g=s[p],p!==c);)if(h=s[p+1],l<g)c=p-1;else if(l>=h)d=p+1;else break;return n?(n.line=p,n.column=l-g,null):{line:p,column:l-g}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;let i=this._buffers[e].lineStarts;if(n.line===i.length-1)return n.line-t.line;let o=i[n.line+1],s=i[n.line]+n.column;if(o>s+1)return n.line-t.line;let a=s-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)dS(this,e[t])}createNewPieces(e){if(e.length>kc){let c=[];for(;e.length>kc;){let h=e.charCodeAt(kc-1),g;h===13||h>=55296&&h<=56319?(g=e.substring(0,kc-1),e=e.substring(kc-1)):(g=e.substring(0,kc),e=e.substring(kc));let f=md(g);c.push(new nr(this._buffers.length,{line:0,column:0},{line:f.length-1,column:g.length-f[f.length-1]},f.length-1,g.length)),this._buffers.push(new fd(g,f))}let p=md(e);return c.push(new nr(this._buffers.length,{line:0,column:0},{line:p.length-1,column:e.length-p[p.length-1]},p.length-1,e.length)),this._buffers.push(new fd(e,p)),c}let t=this._buffers[0].buffer.length,n=md(e,!1),i=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},i=this._lastChangeBufferPos;for(let c=0;c<n.length;c++)n[c]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let c=0;c<n.length;c++)n[c]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}let o=this._buffers[0].buffer.length,s=this._buffers[0].lineStarts.length-1,a=o-this._buffers[0].lineStarts[s],l={line:s,column:a},d=new nr(0,i,l,this.getLineFeedCnt(0,i,l),o-t);return this._lastChangeBufferPos=l,[d]}getLinesRawContent(){return this.getContentOfSubTree(this.root)}getLineRawContent(e,t=0){let n=this.root,i="",o=this._searchCache.get2(e);if(o){n=o.node;let s=this.getAccumulatedValue(n,e-o.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(o.nodeStartLineNumber+n.piece.lineFeedCnt===e)i=a.substring(l+s,l+n.piece.length);else{let d=this.getAccumulatedValue(n,e-o.nodeStartLineNumber);return a.substring(l+s,l+d-t)}}else{let s=0,a=e;for(;n!==je;)if(n.left!==je&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),d=this.getAccumulatedValue(n,e-n.lf_left-1),c=this._buffers[n.piece.bufferIndex].buffer,p=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return s+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:s,nodeStartLineNumber:a-(e-1-n.lf_left)}),c.substring(p+l,p+d-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),d=this._buffers[n.piece.bufferIndex].buffer,c=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i=d.substring(c+l,c+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,s+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==je;){let s=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){let a=this.getAccumulatedValue(n,0),l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return i+=s.substring(l,l+a-t),i}else{let a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);i+=s.substr(a,n.piece.length)}n=n.next()}return i}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==je;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){let n=e.piece,i=this.positionInBuffer(e,t),o=i.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){let s=this.getLineFeedCnt(e.piece.bufferIndex,n.start,i);if(s!==o)return{index:s,remainder:0}}return{index:o,remainder:i.column}}getAccumulatedValue(e,t){if(t<0)return 0;let n=e.piece,i=this._buffers[n.bufferIndex].lineStarts,o=n.start.line+t+1;return o>n.end.line?i[n.end.line]+n.end.column-i[n.start.line]-n.start.column:i[o]-i[n.start.line]-n.start.column}deleteNodeTail(e,t){let n=e.piece,i=n.lineFeedCnt,o=this.offsetInBuffer(n.bufferIndex,n.end),s=t,a=this.offsetInBuffer(n.bufferIndex,s),l=this.getLineFeedCnt(n.bufferIndex,n.start,s),d=l-i,c=a-o,p=n.length+c;e.piece=new nr(n.bufferIndex,n.start,s,l,p),hd(this,e,c,d)}deleteNodeHead(e,t){let n=e.piece,i=n.lineFeedCnt,o=this.offsetInBuffer(n.bufferIndex,n.start),s=t,a=this.getLineFeedCnt(n.bufferIndex,s,n.end),l=this.offsetInBuffer(n.bufferIndex,s),d=a-i,c=o-l,p=n.length+c;e.piece=new nr(n.bufferIndex,s,n.end,a,p),hd(this,e,c,d)}shrinkNode(e,t,n){let i=e.piece,o=i.start,s=i.end,a=i.length,l=i.lineFeedCnt,d=t,c=this.getLineFeedCnt(i.bufferIndex,i.start,d),p=this.offsetInBuffer(i.bufferIndex,t)-this.offsetInBuffer(i.bufferIndex,o);e.piece=new nr(i.bufferIndex,i.start,d,c,p),hd(this,e,p-a,c-l);let h=new nr(i.bufferIndex,n,s,this.getLineFeedCnt(i.bufferIndex,n,s),this.offsetInBuffer(i.bufferIndex,s)-this.offsetInBuffer(i.bufferIndex,n)),g=this.rbInsertRight(e,h);this.validateCRLFWithPrevNode(g)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);let n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),i=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;let o=md(t,!1);for(let g=0;g<o.length;g++)o[g]+=i;if(n){let g=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:i-g}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(o.slice(1));let s=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[s],l={line:s,column:a},d=e.piece.length+t.length,c=e.piece.lineFeedCnt,p=this.getLineFeedCnt(0,e.piece.start,l),h=p-c;e.piece=new nr(e.piece.bufferIndex,e.piece.start,l,p,d),this._lastChangeBufferPos=l,hd(this,e,t.length,h)}nodeAt(e){let t=this.root,n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let i=0;for(;t!==je;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){i+=t.size_left;let o={node:t,remainder:e-t.size_left,nodeStartOffset:i};return this._searchCache.set(o),o}else e-=t.size_left+t.piece.length,i+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,i=0;for(;n!==je;)if(n.left!==je&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let o=this.getAccumulatedValue(n,e-n.lf_left-2),s=this.getAccumulatedValue(n,e-n.lf_left-1);return i+=n.size_left,{node:n,remainder:Math.min(o+t-1,s),nodeStartOffset:i}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let o=this.getAccumulatedValue(n,e-n.lf_left-2);if(o+t-1<=n.piece.length)return{node:n,remainder:o+t-1,nodeStartOffset:i};t-=n.piece.length-o;break}else e-=n.lf_left+n.piece.lineFeedCnt,i+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==je;){if(n.piece.lineFeedCnt>0){let o=this.getAccumulatedValue(n,0),s=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,o),nodeStartOffset:s}}else if(n.piece.length>=t-1){let o=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:o}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;let n=this._buffers[e.piece.bufferIndex],i=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(i)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===je||e.piece.lineFeedCnt===0)return!1;let t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,i=t.start.line,o=n[i]+t.start.column;return i===n.length-1||n[i+1]>o+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(o)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===je||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let n=[],i=this._buffers[e.piece.bufferIndex].lineStarts,o;e.piece.end.column===0?o={line:e.piece.end.line-1,column:i[e.piece.end.line]-i[e.piece.end.line-1]-1}:o={line:e.piece.end.line,column:e.piece.end.column-1};let s=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new nr(e.piece.bufferIndex,e.piece.start,o,a,s),hd(this,e,-1,-1),e.piece.length===0&&n.push(e);let l={line:t.piece.start.line+1,column:0},d=t.piece.length-1,c=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new nr(t.piece.bufferIndex,l,t.piece.end,c,d),hd(this,t,-1,-1),t.piece.length===0&&n.push(t);let p=this.createNewPieces(`\r
`);this.rbInsertRight(e,p[0]);for(let h=0;h<n.length;h++)dS(this,n[h])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)dS(this,n);else{let i=n.piece,o={line:i.start.line+1,column:0},s=i.length-1,a=this.getLineFeedCnt(i.bufferIndex,o,i.end);n.piece=new nr(i.bufferIndex,o,i.end,a,s),hd(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===je)return t(je);let n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===je)return"";let t=this._buffers[e.piece.bufferIndex],n=e.piece,i=this.offsetInBuffer(n.bufferIndex,n.start),o=this.offsetInBuffer(n.bufferIndex,n.end);return t.buffer.substring(i,o)}getPieceContent(e){let t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),i=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,i)}rbInsertRight(e,t){let n=new Qf(t,1);if(n.left=je,n.right=je,n.parent=je,n.size_left=0,n.lf_left=0,this.root===je)this.root=n,n.color=0;else if(e.right===je)e.right=n,n.parent=e;else{let o=L_(e.right);o.left=n,n.parent=o}return rN(this,n),n}rbInsertLeft(e,t){let n=new Qf(t,1);if(n.left=je,n.right=je,n.parent=je,n.size_left=0,n.lf_left=0,this.root===je)this.root=n,n.color=0;else if(e.left===je)e.left=n,n.parent=e;else{let i=nN(e.left);i.right=n,n.parent=i}return rN(this,n),n}getContentOfSubTree(e){let t="";return this.iterate(e,n=>(t+=this.getNodeContent(n),!0)),t}};var Zf=class r extends N{_pieceTree;_BOM;_mightContainRTL;_mightContainUnusualLineTerminators;_mightContainNonBasicASCII;_onDidChangeContent=this._register(new T);onDidChangeContent=this._onDidChangeContent.event;constructor(e,t,n,i,o,s,a){super(),this._BOM=t,this._mightContainNonBasicASCII=!s,this._mightContainRTL=i,this._mightContainUnusualLineTerminators=o,this._pieceTree=new M_(e,n,a)}equals(e){return!(e instanceof r)||this._BOM!==e._BOM||this.getEOL()!==e.getEOL()?!1:this._pieceTree.equal(e._pieceTree)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){let n=e+t,i=this.getPositionAt(e),o=this.getPositionAt(n);return new D(i.lineNumber,i.column,o.lineNumber,o.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";let n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;let n=this.getOffsetAt(e.startLineNumber,e.startColumn),i=this.getOffsetAt(e.endLineNumber,e.endColumn),o=0,s=this._getEndOfLine(t),a=this.getEOL();if(s.length!==a.length){let l=s.length-a.length,d=e.endLineNumber-e.startLineNumber;o=l*d}return i-n+o}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0,i=e.startLineNumber,o=e.endLineNumber;for(let s=i;s<=o;s++){let a=this.getLineContent(s),l=s===i?e.startColumn-1:0,d=s===o?e.endColumn-1:a.length;for(let c=l;c<d;c++)mn(a.charCodeAt(c))?(n=n+1,c=c+1):n=n+1}return n+=this._getEndOfLine(t).length*(o-i),n}return this.getValueLengthInRange(e,t)}getNearestChunk(e){return this._pieceTree.getNearestChunk(e)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getCharCode(e){return this._pieceTree.getCharCode(e)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineMinColumn(e){return 1}getLineMaxColumn(e){return this.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){let t=kn(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){let t=Ds(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let i=this._mightContainRTL,o=this._mightContainUnusualLineTerminators,s=this._mightContainNonBasicASCII,a=!0,l=[];for(let m=0;m<e.length;m++){let b=e[m];a&&b._isTracked&&(a=!1);let v=b.range;if(b.text){let P=!0;s||(P=!cy(b.text),s=P),!i&&P&&(i=ic(b.text)),!o&&P&&(o=Vx(b.text))}let S="",x=0,E=0,w=0;if(b.text){let P;[x,E,w,P]=Br(b.text);let R=this.getEOL(),O=R===`\r
`?2:1;P===0||P===O?S=b.text:S=b.text.replace(/\r\n|\r|\n/g,R)}l[m]={sortIndex:m,identifier:b.identifier||null,range:v,rangeOffset:this.getOffsetAt(v.startLineNumber,v.startColumn),rangeLength:this.getValueLengthInRange(v),text:S,eolCount:x,firstLineLength:E,lastLineLength:w,forceMoveMarkers:!!b.forceMoveMarkers,isAutoWhitespaceEdit:b.isAutoWhitespaceEdit||!1}}l.sort(r._sortOpsAscending);let d=!1;for(let m=0,b=l.length-1;m<b;m++){let v=l[m].range.getEndPosition(),S=l[m+1].range.getStartPosition();if(S.isBeforeOrEqual(v)){if(S.isBefore(v))throw new Error("Overlapping ranges are not allowed!");d=!0}}a&&(l=this._reduceOperations(l));let c=n||t?r._getInverseEditRanges(l):[],p=[];if(t)for(let m=0;m<l.length;m++){let b=l[m],v=c[m];if(b.isAutoWhitespaceEdit&&b.range.isEmpty())for(let S=v.startLineNumber;S<=v.endLineNumber;S++){let x="";S===v.startLineNumber&&(x=this.getLineContent(b.range.startLineNumber),kn(x)!==-1)||p.push({lineNumber:S,oldContent:x})}}let h=null;if(n){let m=0;h=[];for(let b=0;b<l.length;b++){let v=l[b],S=c[b],x=this.getValueInRange(v.range),E=v.rangeOffset+m;m+=v.text.length-x.length,h[b]={sortIndex:v.sortIndex,identifier:v.identifier,range:S,text:x,textChange:new as(v.rangeOffset,x,E,v.text)}}d||h.sort((b,v)=>b.sortIndex-v.sortIndex)}this._mightContainRTL=i,this._mightContainUnusualLineTerminators=o,this._mightContainNonBasicASCII=s;let g=this._doApplyEdits(l),f=null;if(t&&p.length>0){p.sort((m,b)=>b.lineNumber-m.lineNumber),f=[];for(let m=0,b=p.length;m<b;m++){let v=p[m].lineNumber;if(m>0&&p[m-1].lineNumber===v)continue;let S=p[m].oldContent,x=this.getLineContent(v);x.length===0||x===S||kn(x)!==-1||f.push(v)}}return this._onDidChangeContent.fire(),new LT(h,g,f)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1,n=e[0].range,i=e[e.length-1].range,o=new D(n.startLineNumber,n.startColumn,i.endLineNumber,i.endColumn),s=n.startLineNumber,a=n.startColumn,l=[];for(let g=0,f=e.length;g<f;g++){let m=e[g],b=m.range;t=t||m.forceMoveMarkers,l.push(this.getValueInRange(new D(s,a,b.startLineNumber,b.startColumn))),m.text.length>0&&l.push(m.text),s=b.endLineNumber,a=b.endColumn}let d=l.join(""),[c,p,h]=Br(d);return{sortIndex:0,identifier:e[0].identifier,range:o,rangeOffset:this.getOffsetAt(o.startLineNumber,o.startColumn),rangeLength:this.getValueLengthInRange(o,0),text:d,eolCount:c,firstLineLength:p,lastLineLength:h,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(r._sortOpsDescending);let t=[];for(let n=0;n<e.length;n++){let i=e[n],o=i.range.startLineNumber,s=i.range.startColumn,a=i.range.endLineNumber,l=i.range.endColumn;if(o===a&&s===l&&i.text.length===0)continue;i.text?(this._pieceTree.delete(i.rangeOffset,i.rangeLength),this._pieceTree.insert(i.rangeOffset,i.text,!0)):this._pieceTree.delete(i.rangeOffset,i.rangeLength);let d=new D(o,s,a,l);t.push({range:d,rangeLength:i.rangeLength,text:i.text,rangeOffset:i.rangeOffset,forceMoveMarkers:i.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,i){return this._pieceTree.findMatchesLineByLine(e,t,n,i)}getPieceTree(){return this._pieceTree}static _getInverseEditRange(e,t){let n=e.startLineNumber,i=e.startColumn,[o,s,a]=Br(t),l;if(t.length>0){let d=o+1;d===1?l=new D(n,i,n,i+s):l=new D(n,i,n+d-1,a+1)}else l=new D(n,i,n,i);return l}static _getInverseEditRanges(e){let t=[],n=0,i=0,o=null;for(let s=0,a=e.length;s<a;s++){let l=e[s],d,c;o?o.range.endLineNumber===l.range.startLineNumber?(d=n,c=i+(l.range.startColumn-o.range.endColumn)):(d=n+(l.range.startLineNumber-o.range.endLineNumber),c=l.range.startColumn):(d=l.range.startLineNumber,c=l.range.startColumn);let p;if(l.text.length>0){let h=l.eolCount+1;h===1?p=new D(d,c,d,c+l.firstLineLength):p=new D(d,c,d+h-1,l.lastLineLength+1)}else p=new D(d,c,d,c);n=p.endLineNumber,i=p.endColumn,t.push(p),o=l}return t}static _sortOpsAscending(e,t){let n=D.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){let n=D.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}};var cN=class{constructor(e,t,n,i,o,s,a,l,d){this._chunks=e;this._bom=t;this._cr=n;this._lf=i;this._crlf=o;this._containsRTL=s;this._containsUnusualLineTerminators=a;this._isBasicASCII=l;this._normalizeEOL=d}_getEOL(e){let t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){let t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let o=0,s=n.length;o<s;o++){let a=n[o].buffer.replace(/\r\n|\r|\n/g,t),l=md(a);n[o]=new fd(a,l)}let i=new Zf(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:i,disposable:i}}getFirstLineText(e){return this._chunks[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}},Jf=class{chunks;BOM;_hasPreviousChar;_previousChar;_tmpLineStarts;cr;lf;crlf;containsRTL;containsUnusualLineTerminators;isBasicASCII;constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&Hx(e)&&(this.BOM=yH,e=e.substr(1));let t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){let t=T7(this._tmpLineStarts,e);this.chunks.push(new fd(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=ic(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=Vx(e)))}finish(e=!0){return this._finish(),new cN(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);let t=md(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}};var uN=new class{clone(){return this}equals(r){return this===r}};function O_(r,e){let t=new Uint32Array(2);return t[0]=0,t[1]=(r<<0|0|0|32768|2<<24)>>>0,new oT(t,e===null?uN:e)}var P_=class{constructor(e){this._default=e}_store=[];get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,n){if(e>=this._store.length)return;if(t===0){this.insert(e,n);return}else if(n===0){this.delete(e,t);return}let i=this._store.slice(0,e),o=this._store.slice(e+t),s=JX(n,this._default);this._store=i.concat(s,o)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;let n=[];for(let i=0;i<t;i++)n[i]=this._default;this._store=kl(this._store,e,n)}};function JX(r,e){let t=[];for(let n=0;n<r;n++)t[n]=e;return t}var rg=class{static deserialize(e){let t=0,n=Qi(e,t);t+=4;let i=[];for(let o=0;o<n;o++)t=oI.deserialize(e,t,i);return i}_tokens;constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){let n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e){n.appendLineTokens(t);return}}this._tokens.push(new oI(e,[t]))}finalize(){return this._tokens}serialize(){let e=this._serializeSize(),t=new Uint8Array(e);return this._serialize(t),t}_serializeSize(){let e=0;e+=4;for(let t=0;t<this._tokens.length;t++)e+=this._tokens[t].serializeSize();return e}_serialize(e){let t=0;Zi(e,this._tokens.length,t),t+=4;for(let n=0;n<this._tokens.length;n++)t=this._tokens[n].serialize(e,t)}};var pN=class{constructor(e,t){this.tokenizationSupport=t;this.store=new tb(e)}initialState=this.tokenizationSupport.getInitialState();store;getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}},A_=class extends pN{constructor(t,n,i,o){super(t,n);this._textModel=i;this._languageIdCodec=o}updateTokensUntilLine(t,n){let i=this._textModel.getLanguageId();for(;;){let o=this.getFirstInvalidLine();if(!o||o.lineNumber>n)break;let s=this._textModel.getLineContent(o.lineNumber),a=eb(this._languageIdCodec,i,this.tokenizationSupport,s,!0,o.startState);t.add(o.lineNumber,a.tokens),this.store.setEndState(o.lineNumber,a.endState)}}getTokenTypeIfInsertingCharacter(t,n){let i=this.getStartState(t.lineNumber);if(!i)return 0;let o=this._textModel.getLanguageId(),s=this._textModel.getLineContent(t.lineNumber),a=s.substring(0,t.column-1)+n+s.substring(t.column-1),l=eb(this._languageIdCodec,o,this.tokenizationSupport,a,!0,i),d=new zn(l.tokens,a,this._languageIdCodec);if(d.getCount()===0)return 0;let c=d.findTokenIndexAtOffset(t.column-1);return d.getStandardTokenType(c)}tokenizeLineWithEdit(t,n){let i=this.getStartState(t);if(!i)return{mainLineTokens:null,additionalLines:null};let o=this._textModel.getLineContent(t),s=n.lineEdit.apply(o),a=this._textModel.getLanguageIdAtPosition(t,0),l=eb(this._languageIdCodec,a,this.tokenizationSupport,s,!0,i),d=null;if(n.additionalLines){d=[];let p=l.endState;for(let h of n.additionalLines){let g=eb(this._languageIdCodec,a,this.tokenizationSupport,h,!0,p);d.push(new zn(g.tokens,h,this._languageIdCodec)),p=g.endState}}return{mainLineTokens:new zn(l.tokens,s,this._languageIdCodec),additionalLines:d}}hasAccurateTokensForLine(t){let n=this.store.getFirstInvalidEndStateLineNumberOrMax();return t<n}isCheapToTokenize(t){let n=this.store.getFirstInvalidEndStateLineNumberOrMax();return t<n||t===n&&this._textModel.getLineLength(t)<2048}tokenizeHeuristically(t,n,i){if(i<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(n<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(t,i),{heuristicTokens:!1};let o=this.guessStartState(n),s=this._textModel.getLanguageId();for(let a=n;a<=i;a++){let l=this._textModel.getLineContent(a),d=eb(this._languageIdCodec,s,this.tokenizationSupport,l,!0,o);t.add(a,d.tokens),o=d.endState}return{heuristicTokens:!0}}guessStartState(t){let n=this._textModel.getLineFirstNonWhitespaceColumn(t),i=[],o=null;for(let l=t-1;n>1&&l>=1;l--){let d=this._textModel.getLineFirstNonWhitespaceColumn(l);if(d!==0&&d<n&&(i.push(this._textModel.getLineContent(l)),n=d,o=this.getStartState(l),o))break}o||(o=this.tokenizationSupport.getInitialState()),i.reverse();let s=this._textModel.getLanguageId(),a=o;for(let l of i)a=eb(this._languageIdCodec,s,this.tokenizationSupport,l,!1,a).endState;return a}},tb=class{constructor(e){this.lineCount=e;this._invalidEndStatesLineNumbers.addRange(new Jt(1,e+1))}_tokenizationStateStore=new hN;_invalidEndStatesLineNumbers=new gN;getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new st("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);let n=this._tokenizationStateStore.setEndState(e,t);return n&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new Jt(e+1,e+2)),n}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new Jt(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(let t of e){let[n]=Br(t.text);this.acceptChange(new qo(t.range.startLineNumber,t.range.endLineNumber+1),n+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new Jt(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){let t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;let n=this.getStartState(t,e);if(!n)throw new st("Start state must be defined");return{lineNumber:t,startState:n}}},hN=class{_lineEndStates=new P_(null);getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){let n=this._lineEndStates.get(e);return n&&n.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let n=e.length;t>0&&n>0&&(n--,t--),this._lineEndStates.replace(e.startLineNumber,n,t)}acceptChanges(e){for(let t of e){let[n]=Br(t.text);this.acceptChange(new qo(t.range.startLineNumber,t.range.endLineNumber+1),n+1)}}},gN=class{_ranges=[];getRanges(){return this._ranges}get min(){return this._ranges.length===0?null:this._ranges[0].start}removeMin(){if(this._ranges.length===0)return null;let e=this._ranges[0];return e.start+1===e.endExclusive?this._ranges.shift():this._ranges[0]=new Jt(e.start+1,e.endExclusive),e.start}delete(e){let t=this._ranges.findIndex(n=>n.contains(e));if(t!==-1){let n=this._ranges[t];n.start===e?n.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new Jt(e+1,n.endExclusive):n.endExclusive===e+1?this._ranges[t]=new Jt(n.start,e):this._ranges.splice(t,1,new Jt(n.start,e),new Jt(e+1,n.endExclusive))}}addRange(e){Jt.addRange(e,this._ranges)}addRangeAndResize(e,t){let n=0;for(;!(n>=this._ranges.length||e.start<=this._ranges[n].endExclusive);)n++;let i=n;for(;!(i>=this._ranges.length||e.endExclusive<this._ranges[i].start);)i++;let o=t-e.length;for(let s=i;s<this._ranges.length;s++)this._ranges[s]=this._ranges[s].delta(o);if(n===i){let s=new Jt(e.start,e.start+t);s.isEmpty||this._ranges.splice(n,0,s)}else{let s=Math.min(e.start,this._ranges[n].start),a=Math.max(e.endExclusive,this._ranges[i-1].endExclusive),l=new Jt(s,a+o);l.isEmpty?this._ranges.splice(n,i-n):this._ranges.splice(n,i-n,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}};function eb(r,e,t,n,i,o){let s=null;if(t)try{s=t.tokenizeEncoded(n,i,o.clone())}catch(a){Be(a)}return s||(s=O_(r.encodeLanguageId(e),o)),zn.convertToEndOffset(s.tokens,n.length),s}var N_=class{constructor(e,t){this._tokenizerWithStateStore=e;this._backgroundTokenStore=t}_isDisposed=!1;dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_isScheduled=!1;_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,Cu(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){let t=Date.now()+e.timeRemaining(),n=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?xx(n):this._beginBackgroundTokenization())};n()}_backgroundTokenizeForAtLeast1ms(){let e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new rg,n=Vo.create(!1);do if(n.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){let t=this._tokenizerWithStateStore?.getFirstInvalidLine();return t?(this._tokenizerWithStateStore.updateTokensUntilLine(e,t.lineNumber),t.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new qo(e,t))}};var F_=class{_onDidChangeVisibleRanges=new T;onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event;_views=new Set;attachView(){let e=new mN(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}},mN=class{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){let n=e.map(i=>new qo(i.startLineNumber,i.endLineNumber+1));this.handleStateChange({visibleLineRanges:n,stabilized:t})}},B_=class extends N{constructor(t){super();this._refreshTokens=t}runner=this._register(new Hn(()=>this.update(),50));_computedLineRanges=[];_lineRanges=[];get lineRanges(){return this._lineRanges}update(){sn(this._computedLineRanges,this._lineRanges,(t,n)=>t.equals(n))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(t){this._lineRanges=t.visibleLineRanges,t.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}},nb=class extends N{constructor(t,n,i){super();this._languageIdCodec=t;this._textModel=n;this.getLanguageId=i}_backgroundTokenizationState=1;get backgroundTokenizationState(){return this._backgroundTokenizationState}_onDidChangeBackgroundTokenizationState=this._register(new T);onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event;_onDidChangeTokens=this._register(new T);onDidChangeTokens=this._onDidChangeTokens.event;tokenizeIfCheap(t){this.isCheapToTokenize(t)&&this.forceTokenization(t)}};var w7=j("treeSitterParserService");var cS=class extends nb{constructor(t,n,i,o){super(n,i,o);this._treeSitterService=t;this._initialize()}_tokenizationSupport=null;_lastLanguageId;_initialize(){let t=this.getLanguageId();(!this._tokenizationSupport||this._lastLanguageId!==t)&&(this._lastLanguageId=t,this._tokenizationSupport=lI.get(t))}getLineTokens(t){let n=this._textModel.getLineContent(t);if(this._tokenizationSupport){let i=this._tokenizationSupport.tokenizeEncoded(t,this._textModel);if(i)return new zn(i,n,this._languageIdCodec)}return zn.createEmpty(n,this._languageIdCodec)}resetTokenization(t=!0){t&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]}),this._initialize()}handleDidChangeAttached(){}handleDidChangeContent(t){t.isFlush&&this.resetTokenization(!1)}forceTokenization(t){}hasAccurateTokensForLine(t){return!0}isCheapToTokenize(t){return!0}getTokenTypeIfInsertingCharacter(t,n,i){return 0}tokenizeLineWithEdit(t,n){return{mainLineTokens:null,additionalLines:null}}get hasTokens(){return this._treeSitterService.getParseResult(this._textModel)!==void 0}};var uS=class r{_lineTokens;_len;_languageIdCodec;constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,n){let i=null;if(t<this._len&&(i=this._lineTokens[t]),i!==null&&i!==Ql)return new zn(Zl(i),n,this._languageIdCodec);let o=new Uint32Array(2);return o[0]=n.length,o[1]=_7(this._languageIdCodec.encodeLanguageId(e)),new zn(o,n,this._languageIdCodec)}static _massageTokens(e,t,n){let i=n?Zl(n):null;if(t===0){let o=!1;if(i&&i.length>1&&(o=ls.getLanguageId(i[1])!==e),!o)return Ql}if(!i||i.length===0){let o=new Uint32Array(2);return o[0]=t,o[1]=_7(e),o.buffer}return i[i.length-2]=t,i.byteOffset===0&&i.byteLength===i.buffer.byteLength?i.buffer:i}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;let n=[];for(let i=0;i<t;i++)n[i]=null;this._lineTokens=kl(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,i,o){let s=r._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,i);this._ensureLine(t);let a=this._lineTokens[t];return this._lineTokens[t]=s,o?!r._equals(a,s):!1}static _equals(e,t){if(!e||!t)return!e&&!t;let n=Zl(e),i=Zl(t);if(n.length!==i.length)return!1;for(let o=0,s=n.length;o<s;o++)if(n[o]!==i[o])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new F(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){let t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=Ji.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=Ji.deleteEnding(this._lineTokens[t],e.startColumn-1);let n=e.endLineNumber-1,i=null;n<this._len&&(i=Ji.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=Ji.append(this._lineTokens[t],i),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;let i=e.lineNumber-1;if(!(i>=this._len)){if(t===0){this._lineTokens[i]=Ji.insert(this._lineTokens[i],e.column-1,n);return}this._lineTokens[i]=Ji.deleteEnding(this._lineTokens[i],e.column-1),this._lineTokens[i]=Ji.insert(this._lineTokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};let n=[];for(let i=0,o=e.length;i<o;i++){let s=e[i],a=0,l=0,d=!1;for(let c=s.startLineNumber;c<=s.endLineNumber;c++)d?(this.setTokens(t.getLanguageId(),c-1,t.getLineLength(c),s.getLineTokens(c),!1),l=c):this.setTokens(t.getLanguageId(),c-1,t.getLineLength(c),s.getLineTokens(c),!0)&&(d=!0,a=c,l=c);d&&n.push({fromLineNumber:a,toLineNumber:l})}return{changes:n}}};function _7(r){return(r<<0|0|0|32768|2<<24|1024)>>>0}var W_=class r{_pieces;_isComplete;_languageIdCodec;constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){let o=t[0].getRange(),s=t[t.length-1].getRange();if(!o||!s)return e;n=e.plusRange(o).plusRange(s)}let i=null;for(let o=0,s=this._pieces.length;o<s;o++){let a=this._pieces[o];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:o};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(o,1),o--,s--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){i=i||{index:o};continue}let[l,d]=a.split(n);if(l.isEmpty()){i=i||{index:o};continue}d.isEmpty()||(this._pieces.splice(o,1,l,d),o++,s++,i=i||{index:o})}return i=i||{index:this._pieces.length},t.length>0&&(this._pieces=kl(this._pieces,i.index,t)),n}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;let n=this._pieces;if(n.length===0)return t;let i=r._findFirstPieceWithLine(n,e),o=n[i].getLineTokens(e);if(!o)return t;let s=t.getCount(),a=o.getCount(),l=0,d=[],c=0,p=0,h=(g,f)=>{g!==p&&(p=g,d[c++]=g,d[c++]=f)};for(let g=0;g<a;g++){let f=o.getStartCharacter(g),m=o.getEndCharacter(g),b=o.getMetadata(g),v=((b&1?2048:0)|(b&2?4096:0)|(b&4?8192:0)|(b&8?16384:0)|(b&16?16744448:0)|(b&32?4278190080:0))>>>0,S=~v>>>0;for(;l<s&&t.getEndOffset(l)<=f;)h(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<s&&t.getStartOffset(l)<f&&h(f,t.getMetadata(l));l<s&&t.getEndOffset(l)<m;)h(t.getEndOffset(l),t.getMetadata(l)&S|b&v),l++;if(l<s)h(m,t.getMetadata(l)&S|b&v),t.getEndOffset(l)===m&&l++;else{let x=Math.min(Math.max(0,l-1),s-1);h(m,t.getMetadata(x)&S|b&v)}}for(;l<s;)h(t.getEndOffset(l),t.getMetadata(l)),l++;return new zn(new Uint32Array(d),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,i=e.length-1;for(;n<i;){let o=n+Math.floor((i-n)/2);if(e[o].endLineNumber<t)n=o+1;else if(e[o].startLineNumber>t)i=o-1;else{for(;o>n&&e[o-1].startLineNumber<=t&&t<=e[o-1].endLineNumber;)o--;return o}}return n}acceptEdit(e,t,n,i,o){for(let s of this._pieces)s.acceptEdit(e,t,n,i,o)}};var Rc=class extends qf{constructor(t,n,i,o,s,a,l){super();this._textModel=t;this._bracketPairsTextModelPart=n;this._languageId=i;this._attachedViews=o;this._languageService=s;this._languageConfigurationService=a;this._treeSitterService=l;this._register(this._languageConfigurationService.onDidChange(d=>{d.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(z.filter(lI.onDidChange,d=>d.changedLanguages.includes(this._languageId))(()=>{this.createPreferredTokenProvider()})),this.createPreferredTokenProvider()}_semanticTokens=new W_(this._languageService.languageIdCodec);_onDidChangeLanguage=this._register(new T);onDidChangeLanguage=this._onDidChangeLanguage.event;_onDidChangeLanguageConfiguration=this._register(new T);onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event;_onDidChangeTokens=this._register(new T);onDidChangeTokens=this._onDidChangeTokens.event;_tokens;_tokensDisposables=this._register(new X);createGrammarTokens(){return this._register(new V_(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews))}createTreeSitterTokens(){return this._register(new cS(this._treeSitterService,this._languageService.languageIdCodec,this._textModel,()=>this._languageId))}createTokens(t){let n=this._tokens!==void 0;this._tokens?.dispose(),this._tokens=t?this.createTreeSitterTokens():this.createGrammarTokens(),this._tokensDisposables.clear(),this._tokensDisposables.add(this._tokens.onDidChangeTokens(i=>{this._emitModelTokensChangedEvent(i)})),this._tokensDisposables.add(this._tokens.onDidChangeBackgroundTokenizationState(i=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})),n&&this._tokens.resetTokenization()}createPreferredTokenProvider(){lI.get(this._languageId)?this._tokens instanceof cS||this.createTokens(!0):this._tokens instanceof V_||this.createTokens(!1)}_hasListeners(){return this._onDidChangeLanguage.hasListeners()||this._onDidChangeLanguageConfiguration.hasListeners()||this._onDidChangeTokens.hasListeners()}handleLanguageConfigurationServiceChange(t){t.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}handleDidChangeContent(t){if(t.isFlush)this._semanticTokens.flush();else if(!t.isEolChange)for(let n of t.changes){let[i,o,s]=Br(n.text);this._semanticTokens.acceptEdit(n.range,i,o,s,n.text.length>0?n.text.charCodeAt(0):0)}this._tokens.handleDidChangeContent(t)}handleDidChangeAttached(){this._tokens.handleDidChangeAttached()}getLineTokens(t){this.validateLineNumber(t);let n=this._tokens.getLineTokens(t);return this._semanticTokens.addSparseTokens(t,n)}_emitModelTokensChangedEvent(t){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(t),this._onDidChangeTokens.fire(t))}validateLineNumber(t){if(t<1||t>this._textModel.getLineCount())throw new st("Illegal value for lineNumber")}get hasTokens(){return this._tokens.hasTokens}resetTokenization(){this._tokens.resetTokenization()}get backgroundTokenizationState(){return this._tokens.backgroundTokenizationState}forceTokenization(t){this.validateLineNumber(t),this._tokens.forceTokenization(t)}hasAccurateTokensForLine(t){return this.validateLineNumber(t),this._tokens.hasAccurateTokensForLine(t)}isCheapToTokenize(t){return this.validateLineNumber(t),this._tokens.isCheapToTokenize(t)}tokenizeIfCheap(t){this.validateLineNumber(t),this._tokens.tokenizeIfCheap(t)}getTokenTypeIfInsertingCharacter(t,n,i){return this._tokens.getTokenTypeIfInsertingCharacter(t,n,i)}tokenizeLineWithEdit(t,n){return this._tokens.tokenizeLineWithEdit(t,n)}setSemanticTokens(t,n){this._semanticTokens.set(t,n),this._emitModelTokensChangedEvent({semanticTokensApplied:t!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(t,n){if(this.hasCompleteSemanticTokens())return;let i=this._textModel.validateRange(this._semanticTokens.setPartial(t,n));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:i.startLineNumber,toLineNumber:i.endLineNumber}]})}getWordAtPosition(t){this.assertNotDisposed();let n=this._textModel.validatePosition(t),i=this._textModel.getLineContent(n.lineNumber),o=this.getLineTokens(n.lineNumber),s=o.findTokenIndexAtOffset(n.column-1),[a,l]=Rc._findLanguageBoundaries(o,s),d=gh(n.column,this.getLanguageConfiguration(o.getLanguageId(s)).getWordDefinition(),i.substring(a,l),a);if(d&&d.startColumn<=t.column&&t.column<=d.endColumn)return d;if(s>0&&a===n.column-1){let[c,p]=Rc._findLanguageBoundaries(o,s-1),h=gh(n.column,this.getLanguageConfiguration(o.getLanguageId(s-1)).getWordDefinition(),i.substring(c,p),c);if(h&&h.startColumn<=t.column&&t.column<=h.endColumn)return h}return null}getLanguageConfiguration(t){return this._languageConfigurationService.getLanguageConfiguration(t)}static _findLanguageBoundaries(t,n){let i=t.getLanguageId(n),o=0;for(let a=n;a>=0&&t.getLanguageId(a)===i;a--)o=t.getStartOffset(a);let s=t.getLineContent().length;for(let a=n,l=t.getCount();a<l&&t.getLanguageId(a)===i;a++)s=t.getEndOffset(a);return[o,s]}getWordUntilPosition(t){let n=this.getWordAtPosition(t);return n?{word:n.word.substr(0,t.column-n.startColumn),startColumn:n.startColumn,endColumn:t.column}:{word:"",startColumn:t.column,endColumn:t.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(t,n){let i=this._textModel.validatePosition(new F(t,n)),o=this.getLineTokens(i.lineNumber);return o.getLanguageId(o.findTokenIndexAtOffset(i.column-1))}setLanguageId(t,n="api"){if(this._languageId===t)return;let i={oldLanguage:this._languageId,newLanguage:t,source:n};this._languageId=t,this._bracketPairsTextModelPart.handleDidChangeLanguage(i),this._tokens.resetTokenization(),this.createPreferredTokenProvider(),this._onDidChangeLanguage.fire(i),this._onDidChangeLanguageConfiguration.fire({})}};Rc=_([y(4,Lt),y(5,Qn),y(6,w7)],Rc);var V_=class extends nb{_tokenizer=null;_defaultBackgroundTokenizer=null;_backgroundTokenizer=this._register(new Qt);_tokens=new uS(this._languageIdCodec);_debugBackgroundTokens;_debugBackgroundStates;_debugBackgroundTokenizer=this._register(new Qt);_attachedViewStates=this._register(new ws);constructor(e,t,n,i){super(e,t,n),this._register(Xo.onDidChange(o=>{let s=this.getLanguageId();o.changedLanguages.indexOf(s)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(i.onDidChangeVisibleRanges(({view:o,state:s})=>{if(s){let a=this._attachedViewStates.get(o);a||(a=new B_(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(o,a)),a.handleStateChange(s)}else this._attachedViewStates.deleteAndDispose(o)}))}resetTokenization(e=!0){this._tokens.flush(),this._debugBackgroundTokens?.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new tb(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});let t=()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];let o=Xo.get(this.getLanguageId());if(!o)return[null,null];let s;try{s=o.getInitialState()}catch(a){return Be(a),[null,null]}return[o,s]},[n,i]=t();if(n&&i?this._tokenizer=new A_(this._textModel.getLineCount(),n,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){let o={setTokens:s=>{this.setTokens(s)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;let s=2;this._backgroundTokenizationState=s,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(s,a)=>{if(!this._tokenizer)return;let l=this._tokenizer.store.getFirstInvalidEndStateLineNumber();l!==null&&s>=l&&this._tokenizer?.store.setEndState(s,a)}};n&&n.createBackgroundTokenizer&&!n.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,o)),!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization()&&(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new N_(this._tokenizer,o),this._defaultBackgroundTokenizer.handleChanges()),n?.backgroundTokenizerShouldOnlyVerifyTokens&&n.createBackgroundTokenizer?(this._debugBackgroundTokens=new uS(this._languageIdCodec),this._debugBackgroundStates=new tb(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,{setTokens:s=>{this._debugBackgroundTokens?.setMultilineTokens(s,this._textModel)},backgroundTokenizationFinished(){},setEndState:(s,a)=>{this._debugBackgroundStates?.setEndState(s,a)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){this._defaultBackgroundTokenizer?.handleChanges()}handleDidChangeContent(e){if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(let t of e.changes){let[n,i]=Br(t.text);this._tokens.acceptEdit(t.range,n,i),this._debugBackgroundTokens?.acceptEdit(t.range,n,i)}this._debugBackgroundStates?.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),this._defaultBackgroundTokenizer?.handleChanges()}}setTokens(e){let{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){let e=qo.joinMany([...this._attachedViewStates].map(([t,n])=>n.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(let t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);let n=new rg,{heuristicTokens:i}=this._tokenizer.tokenizeHeuristically(n,e,t),o=this.setTokens(n.finalize());if(i)for(let s of o.changes)this._backgroundTokenizer.value?.requestTokens(s.fromLineNumber,s.toLineNumber+1);this._defaultBackgroundTokenizer?.checkFinished()}forceTokenization(e){let t=new rg;this._tokenizer?.updateTokensUntilLine(t,e),this.setTokens(t.finalize()),this._defaultBackgroundTokenizer?.checkFinished()}hasAccurateTokensForLine(e){return this._tokenizer?this._tokenizer.hasAccurateTokensForLine(e):!0}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}getLineTokens(e){let t=this._textModel.getLineContent(e),n=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){let i=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!n.equals(i)&&this._debugBackgroundTokenizer.value?.reportMismatchingTokens&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return n}getTokenTypeIfInsertingCharacter(e,t,n){if(!this._tokenizer)return 0;let i=this._textModel.validatePosition(new F(e,t));return this.forceTokenization(i.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(i,n)}tokenizeLineWithEdit(e,t){return this._tokenizer?(this.forceTokenization(e),this._tokenizer.tokenizeLineWithEdit(e,t)):{mainLineTokens:null,additionalLines:null}}get hasTokens(){return this._tokens.hasTokens}};function hS(r){let e=new Jf;return e.acceptChunk(r),e.finish()}function R7(r){return new Promise((e,t)=>{let n=new Jf,i=!1;MO(r,{onData:o=>{n.acceptChunk(typeof o=="string"?o:o.toString())},onError:o=>{i||(i=!0,t(o))},onEnd:()=>{i||(i=!0,e(n.finish()))}})})}function eQ(r){let e=new Jf,t;for(;typeof(t=r.read())=="string";)e.acceptChunk(t);return e.finish()}function D7(r,e){let t;return typeof r=="string"?t=hS(r):Yz(r)?t=eQ(r):t=r,t.create(e)}var H_=0,tQ=999,nQ=1e4,bN=class{_source;_eos;constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,n=0;do{let i=this._source.read();if(i===null)return this._eos=!0,t===0?null:e.join("");if(i.length>0&&(e[t++]=i,n+=i.length),n>=64*1024)return e.join("")}while(!0)}},pS=()=>{throw new Error("Invalid change accessor")};var vd=class extends N{constructor(t,n,i,o=null,s,a,l,d){super();this._undoRedoService=s;this._languageService=a;this._languageConfigurationService=l;this.instantiationService=d;H_++,this.id="$model"+H_,this.isForSimpleWidget=i.isForSimpleWidget,typeof o>"u"||o===null?this._associatedResource=Z.parse("inmemory://model/"+H_):this._associatedResource=o,this._attachedEditorCount=0;let{textBuffer:c,disposable:p}=D7(t,i.defaultEOL);this._buffer=c,this._bufferDisposable=p,this._options=vd.resolveOptions(this._buffer,i);let h=typeof n=="string"?n:n.languageId;typeof n!="string"&&(this._languageSelectionListener.value=n.onDidChange(()=>this._setLanguage(n.languageId))),this._bracketPairs=this._register(new h_(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new D_(this,this._languageConfigurationService)),this._decorationProvider=this._register(new E_(this)),this._tokenizationTextModelPart=this.instantiationService.createInstance(Rc,this,this._bracketPairs,h,this._attachedViews);let g=this._buffer.getLineCount(),f=this._buffer.getValueLengthInRange(new D(1,1,g,this._buffer.getLineLength(g)+1),0);i.largeFileOptimizations?(this._isTooLargeForTokenization=f>vd.LARGE_FILE_SIZE_THRESHOLD||g>vd.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=f>vd.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=f>vd._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=Ux(H_),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new z_,this._commandManager=new __(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(h),this._register(this._languageConfigurationService.onDidChange(m=>{this._bracketPairs.handleLanguageConfigurationServiceChange(m),this._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(m)}))}static _MODEL_SYNC_LIMIT=50*1024*1024;static LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;static LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;static LARGE_FILE_HEAP_OPERATION_THRESHOLD=256*1024*1024;static DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Gl.tabSize,indentSize:Gl.indentSize,insertSpaces:Gl.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Gl.trimAutoWhitespace,largeFileOptimizations:Gl.largeFileOptimizations,bracketPairColorizationOptions:Gl.bracketPairColorizationOptions};static resolveOptions(t,n){if(n.detectIndentation){let i=JA(t,n.tabSize,n.insertSpaces);return new cf({tabSize:i.tabSize,indentSize:"tabSize",insertSpaces:i.insertSpaces,trimAutoWhitespace:n.trimAutoWhitespace,defaultEOL:n.defaultEOL,bracketPairColorizationOptions:n.bracketPairColorizationOptions})}return new cf(n)}_onWillDispose=this._register(new T);onWillDispose=this._onWillDispose.event;_onDidChangeDecorations=this._register(new SN(t=>this.handleBeforeFireDecorationsChangedEvent(t)));onDidChangeDecorations=this._onDidChangeDecorations.event;get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}_onDidChangeOptions=this._register(new T);onDidChangeOptions=this._onDidChangeOptions.event;_onDidChangeAttached=this._register(new T);onDidChangeAttached=this._onDidChangeAttached.event;_onDidChangeInjectedText=this._register(new T);_eventEmitter=this._register(new CN);onDidChangeContent(t){return this._eventEmitter.slowEvent(n=>t(n.contentChangedEvent))}onDidChangeContentOrInjectedText(t){return Li(this._eventEmitter.fastEvent(n=>t(n)),this._onDidChangeInjectedText.event(n=>t(n)))}id;isForSimpleWidget;_associatedResource;_attachedEditorCount;_buffer;_bufferDisposable;_options;_languageSelectionListener=this._register(new Qt);_isDisposed;__isDisposing;_isDisposing(){return this.__isDisposing}_versionId;_alternativeVersionId;_initialUndoRedoSnapshot;_isTooLargeForSyncing;_isTooLargeForTokenization;_isTooLargeForHeapOperation;_commandManager;_isUndoing;_isRedoing;_trimAutoWhitespaceLines;_instanceId;_deltaDecorationCallCnt=0;_lastDecorationId;_decorations;_decorationsTree;_decorationProvider;_tokenizationTextModelPart;get tokenization(){return this._tokenizationTextModelPart}_bracketPairs;get bracketPairs(){return this._bracketPairs}_guidesTextModelPart;get guides(){return this._guidesTextModelPart}_attachedViews=new F_;dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;let t=new Zf([],"",`
`,!1,!1,!0,!0);t.dispose(),this._buffer=t,this._bufferDisposable=N.None}_hasListeners(){return this._onWillDispose.hasListeners()||this._onDidChangeDecorations.hasListeners()||this._tokenizationTextModelPart._hasListeners()||this._onDidChangeOptions.hasListeners()||this._onDidChangeAttached.hasListeners()||this._onDidChangeInjectedText.hasListeners()||this._eventEmitter.hasListeners()}_assertNotDisposed(){if(this._isDisposed)throw new st("Model is disposed!")}equalsTextBuffer(t){return this._assertNotDisposed(),this._buffer.equals(t)}getTextBuffer(){return this._assertNotDisposed(),this._buffer}_emitContentChangedEvent(t,n){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(n),this._bracketPairs.handleDidChangeContent(n),this._eventEmitter.fire(new zu(t,n)))}setValue(t){if(this._assertNotDisposed(),t==null)throw Kp();let{textBuffer:n,disposable:i}=D7(t,this._options.defaultEOL);this._setValueFromTextBuffer(n,i)}_createContentChanged2(t,n,i,o,s,a,l,d){return{changes:[{range:t,rangeOffset:n,rangeLength:i,text:o}],eol:this._buffer.getEOL(),isEolChange:d,versionId:this.getVersionId(),isUndoing:s,isRedoing:a,isFlush:l}}_setValueFromTextBuffer(t,n){this._assertNotDisposed();let i=this.getFullModelRange(),o=this.getValueLengthInRange(i),s=this.getLineCount(),a=this.getLineMaxColumn(s);this._buffer=t,this._bufferDisposable.dispose(),this._bufferDisposable=n,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new z_,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new Ph([new xT],this._versionId,!1,!1),this._createContentChanged2(new D(1,1,s,a),0,o,this.getValue(),!1,!1,!0,!1))}setEOL(t){this._assertNotDisposed();let n=t===1?`\r
`:`
`;if(this._buffer.getEOL()===n)return;let i=this.getFullModelRange(),o=this.getValueLengthInRange(i),s=this.getLineCount(),a=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(n),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new Ph([new wT],this._versionId,!1,!1),this._createContentChanged2(new D(1,1,s,a),0,o,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){let t=this.getVersionId(),n=this._decorationsTree.collectNodesPostOrder();for(let i=0,o=n.length;i<o;i++){let s=n[i],a=s.range,l=s.cachedAbsoluteStart-s.start,d=this._buffer.getOffsetAt(a.startLineNumber,a.startColumn),c=this._buffer.getOffsetAt(a.endLineNumber,a.endColumn);s.cachedAbsoluteStart=d,s.cachedAbsoluteEnd=c,s.cachedVersionId=t,s.start=d-l,s.end=c-l,wc(s)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(t){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(t)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let t=0,n=0,i=this._buffer.getLineCount();for(let o=1;o<=i;o++){let s=this._buffer.getLineLength(o);s>=nQ?n+=s:t+=s}return n>t}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(t){this._assertNotDisposed();let n=typeof t.tabSize<"u"?t.tabSize:this._options.tabSize,i=typeof t.indentSize<"u"?t.indentSize:this._options.originalIndentSize,o=typeof t.insertSpaces<"u"?t.insertSpaces:this._options.insertSpaces,s=typeof t.trimAutoWhitespace<"u"?t.trimAutoWhitespace:this._options.trimAutoWhitespace,a=typeof t.bracketColorizationOptions<"u"?t.bracketColorizationOptions:this._options.bracketPairColorizationOptions,l=new cf({tabSize:n,indentSize:i,insertSpaces:o,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s,bracketPairColorizationOptions:a});if(this._options.equals(l))return;let d=this._options.createChangeEvent(l);this._options=l,this._bracketPairs.handleDidChangeOptions(d),this._decorationProvider.handleDidChangeOptions(d),this._onDidChangeOptions.fire(d)}detectIndentation(t,n){this._assertNotDisposed();let i=JA(this._buffer,n,t);this.updateOptions({insertSpaces:i.insertSpaces,tabSize:i.tabSize,indentSize:i.tabSize})}normalizeIndentation(t){return this._assertNotDisposed(),MT(t,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(t=null){let n=this.findMatches(f1.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(t,n.map(i=>({range:i.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(t){this._assertNotDisposed();let n=this._validatePosition(t.lineNumber,t.column,0);return this._buffer.getOffsetAt(n.lineNumber,n.column)}getPositionAt(t){this._assertNotDisposed();let n=Math.min(this._buffer.getLength(),Math.max(0,t));return this._buffer.getPositionAt(n)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(t){this._versionId=t}_overwriteAlternativeVersionId(t){this._alternativeVersionId=t}_overwriteInitialUndoRedoSnapshot(t){this._initialUndoRedoSnapshot=t}getValue(t,n=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new st("Operation would exceed heap memory limits");let i=this.getFullModelRange(),o=this.getValueInRange(i,t);return n?this._buffer.getBOM()+o:o}createSnapshot(t=!1){return new bN(this._buffer.createSnapshot(t))}getValueLength(t,n=!1){this._assertNotDisposed();let i=this.getFullModelRange(),o=this.getValueLengthInRange(i,t);return n?this._buffer.getBOM().length+o:o}getValueInRange(t,n=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(t),n)}getValueLengthInRange(t,n=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(t),n)}getCharacterCountInRange(t,n=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(t),n)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new st("Illegal value for lineNumber");return this._buffer.getLineContent(t)}getLineLength(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new st("Illegal value for lineNumber");return this._buffer.getLineLength(t)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new st("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(t){return this._assertNotDisposed(),1}getLineMaxColumn(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new st("Illegal value for lineNumber");return this._buffer.getLineLength(t)+1}getLineFirstNonWhitespaceColumn(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new st("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(t)}getLineLastNonWhitespaceColumn(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new st("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(t)}_validateRangeRelaxedNoAllocations(t){let n=this._buffer.getLineCount(),i=t.startLineNumber,o=t.startColumn,s=Math.floor(typeof i=="number"&&!isNaN(i)?i:1),a=Math.floor(typeof o=="number"&&!isNaN(o)?o:1);if(s<1)s=1,a=1;else if(s>n)s=n,a=this.getLineMaxColumn(s);else if(a<=1)a=1;else{let h=this.getLineMaxColumn(s);a>=h&&(a=h)}let l=t.endLineNumber,d=t.endColumn,c=Math.floor(typeof l=="number"&&!isNaN(l)?l:1),p=Math.floor(typeof d=="number"&&!isNaN(d)?d:1);if(c<1)c=1,p=1;else if(c>n)c=n,p=this.getLineMaxColumn(c);else if(p<=1)p=1;else{let h=this.getLineMaxColumn(c);p>=h&&(p=h)}return i===s&&o===a&&l===c&&d===p&&t instanceof D&&!(t instanceof ze)?t:new D(s,a,c,p)}_isValidPosition(t,n,i){if(typeof t!="number"||typeof n!="number"||isNaN(t)||isNaN(n)||t<1||n<1||(t|0)!==t||(n|0)!==n)return!1;let o=this._buffer.getLineCount();if(t>o)return!1;if(n===1)return!0;let s=this.getLineMaxColumn(t);if(n>s)return!1;if(i===1){let a=this._buffer.getLineCharCode(t,n-2);if(mn(a))return!1}return!0}_validatePosition(t,n,i){let o=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),s=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),a=this._buffer.getLineCount();if(o<1)return new F(1,1);if(o>a)return new F(a,this.getLineMaxColumn(a));if(s<=1)return new F(o,1);let l=this.getLineMaxColumn(o);if(s>=l)return new F(o,l);if(i===1){let d=this._buffer.getLineCharCode(o,s-2);if(mn(d))return new F(o,s-1)}return new F(o,s)}validatePosition(t){let n=1;return this._assertNotDisposed(),t instanceof F&&this._isValidPosition(t.lineNumber,t.column,n)?t:this._validatePosition(t.lineNumber,t.column,n)}_isValidRange(t,n){let i=t.startLineNumber,o=t.startColumn,s=t.endLineNumber,a=t.endColumn;if(!this._isValidPosition(i,o,0)||!this._isValidPosition(s,a,0))return!1;if(n===1){let l=o>1?this._buffer.getLineCharCode(i,o-2):0,d=a>1&&a<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,a-2):0,c=mn(l),p=mn(d);return!c&&!p}return!0}validateRange(t){let n=1;if(this._assertNotDisposed(),t instanceof D&&!(t instanceof ze)&&this._isValidRange(t,n))return t;let i=this._validatePosition(t.startLineNumber,t.startColumn,0),o=this._validatePosition(t.endLineNumber,t.endColumn,0),s=i.lineNumber,a=i.column,l=o.lineNumber,d=o.column;if(n===1){let c=a>1?this._buffer.getLineCharCode(s,a-2):0,p=d>1&&d<=this._buffer.getLineLength(l)?this._buffer.getLineCharCode(l,d-2):0,h=mn(c),g=mn(p);return!h&&!g?new D(s,a,l,d):s===l&&a===d?new D(s,a-1,l,d-1):h&&g?new D(s,a-1,l,d+1):h?new D(s,a-1,l,d):new D(s,a,l,d+1)}return new D(s,a,l,d)}modifyPosition(t,n){this._assertNotDisposed();let i=this.getOffsetAt(t)+n;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,i)))}getFullModelRange(){this._assertNotDisposed();let t=this.getLineCount();return new D(1,1,t,this.getLineMaxColumn(t))}findMatchesLineByLine(t,n,i,o){return this._buffer.findMatchesLineByLine(t,n,i,o)}findMatches(t,n,i,o,s,a,l=tQ){this._assertNotDisposed();let d=null;n!==null&&(Array.isArray(n)||(n=[n]),n.every(h=>D.isIRange(h))&&(d=n.map(h=>this.validateRange(h)))),d===null&&(d=[this.getFullModelRange()]),d=d.sort((h,g)=>h.startLineNumber-g.startLineNumber||h.startColumn-g.startColumn);let c=[];c.push(d.reduce((h,g)=>D.areIntersecting(h,g)?h.plusRange(g):(c.push(h),g)));let p;if(!i&&t.indexOf(`
`)<0){let g=new Lc(t,i,o,s).parseSearchRequest();if(!g)return[];p=f=>this.findMatchesLineByLine(f,g,a,l)}else p=h=>og.findMatches(this,new Lc(t,i,o,s),h,a,l);return c.map(p).reduce((h,g)=>h.concat(g),[])}findNextMatch(t,n,i,o,s,a){this._assertNotDisposed();let l=this.validatePosition(n);if(!i&&t.indexOf(`
`)<0){let c=new Lc(t,i,o,s).parseSearchRequest();if(!c)return null;let p=this.getLineCount(),h=new D(l.lineNumber,l.column,p,this.getLineMaxColumn(p)),g=this.findMatchesLineByLine(h,c,a,1);return og.findNextMatch(this,new Lc(t,i,o,s),l,a),g.length>0||(h=new D(1,1,l.lineNumber,this.getLineMaxColumn(l.lineNumber)),g=this.findMatchesLineByLine(h,c,a,1),g.length>0)?g[0]:null}return og.findNextMatch(this,new Lc(t,i,o,s),l,a)}findPreviousMatch(t,n,i,o,s,a){this._assertNotDisposed();let l=this.validatePosition(n);return og.findPreviousMatch(this,new Lc(t,i,o,s),l,a)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(t){if((this.getEOL()===`
`?0:1)!==t)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(t){return t instanceof uf?t:new uf(t.identifier||null,this.validateRange(t.range),t.text,t.forceMoveMarkers||!1,t.isAutoWhitespaceEdit||!1,t._isTracked||!1)}_validateEditOperations(t){let n=[];for(let i=0,o=t.length;i<o;i++)n[i]=this._validateEditOperation(t[i]);return n}pushEditOperations(t,n,i,o){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(t,this._validateEditOperations(n),i,o)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(t,n,i,o){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let s=n.map(l=>({range:this.validateRange(l.range),text:l.text})),a=!0;if(t)for(let l=0,d=t.length;l<d;l++){let c=t[l],p=!1;for(let h=0,g=s.length;h<g;h++){let f=s[h].range,m=f.startLineNumber>c.endLineNumber,b=c.startLineNumber>f.endLineNumber;if(!m&&!b){p=!0;break}}if(!p){a=!1;break}}if(a)for(let l=0,d=this._trimAutoWhitespaceLines.length;l<d;l++){let c=this._trimAutoWhitespaceLines[l],p=this.getLineMaxColumn(c),h=!0;for(let g=0,f=s.length;g<f;g++){let m=s[g].range,b=s[g].text;if(!(c<m.startLineNumber||c>m.endLineNumber)&&!(c===m.startLineNumber&&m.startColumn===p&&m.isEmpty()&&b&&b.length>0&&b.charAt(0)===`
`)&&!(c===m.startLineNumber&&m.startColumn===1&&m.isEmpty()&&b&&b.length>0&&b.charAt(b.length-1)===`
`)){h=!1;break}}if(h){let g=new D(c,1,c,p);n.push(new uf(null,g,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(t,n,i,o)}_applyUndo(t,n,i,o){let s=t.map(a=>{let l=this.getPositionAt(a.newPosition),d=this.getPositionAt(a.newEnd);return{range:new D(l.lineNumber,l.column,d.lineNumber,d.column),text:a.oldText}});this._applyUndoRedoEdits(s,n,!0,!1,i,o)}_applyRedo(t,n,i,o){let s=t.map(a=>{let l=this.getPositionAt(a.oldPosition),d=this.getPositionAt(a.oldEnd);return{range:new D(l.lineNumber,l.column,d.lineNumber,d.column),text:a.newText}});this._applyUndoRedoEdits(s,n,!1,!0,i,o)}_applyUndoRedoEdits(t,n,i,o,s,a){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=i,this._isRedoing=o,this.applyEdits(t,!1),this.setEOL(n),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(a),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(t,n=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();let i=this._validateEditOperations(t);return this._doApplyEdits(i,n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(t,n){let i=this._buffer.getLineCount(),o=this._buffer.applyEdits(t,this._options.trimAutoWhitespace,n),s=this._buffer.getLineCount(),a=o.changes;if(this._trimAutoWhitespaceLines=o.trimAutoWhitespaceLineNumbers,a.length!==0){for(let c=0,p=a.length;c<p;c++){let h=a[c];this._decorationsTree.acceptReplace(h.rangeOffset,h.rangeLength,h.text.length,h.forceMoveMarkers)}let l=[];this._increaseVersionId();let d=i;for(let c=0,p=a.length;c<p;c++){let h=a[c],[g]=Br(h.text);this._onDidChangeDecorations.fire();let f=h.range.startLineNumber,m=h.range.endLineNumber,b=m-f,v=g,S=Math.min(b,v),x=v-b,E=s-d-x+f,w=E,P=E+v,R=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new F(w,1)),this.getOffsetAt(new F(P,this.getLineMaxColumn(P))),0),O=Wr.fromDecorations(R),M=new Rr(O);for(let K=S;K>=0;K--){let $=f+K,Q=E+K;M.takeFromEndWhile(De=>De.lineNumber>Q);let he=M.takeFromEndWhile(De=>De.lineNumber===Q);l.push(new yI($,this.getLineContent(Q),he))}if(S<b){let K=f+S;l.push(new ET(K+1,m))}if(S<v){let K=new Rr(O),$=f+S,Q=v-S,he=s-d-Q+$+1,De=[],ce=[];for(let se=0;se<Q;se++){let fe=he+se;ce[se]=this.getLineContent(fe),K.takeWhile(ue=>ue.lineNumber<fe),De[se]=K.takeWhile(ue=>ue.lineNumber===fe)}l.push(new TT($+1,f+v,ce,De))}d+=x}this._emitContentChangedEvent(new Ph(l,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:a,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return o.reverseEdits===null?void 0:o.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(t){if(t===null||t.size===0)return;let i=Array.from(t).map(o=>new yI(o,this.getLineContent(o),this._getInjectedTextInLine(o)));this._onDidChangeInjectedText.fire(new df(i))}changeDecorations(t,n=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(n,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(t,n){let i={addDecoration:(s,a)=>this._deltaDecorationsImpl(t,[],[{range:s,options:a}])[0],changeDecoration:(s,a)=>{this._changeDecorationImpl(s,a)},changeDecorationOptions:(s,a)=>{this._changeDecorationOptionsImpl(s,k7(a))},removeDecoration:s=>{this._deltaDecorationsImpl(t,[s],[])},deltaDecorations:(s,a)=>s.length===0&&a.length===0?[]:this._deltaDecorationsImpl(t,s,a)},o=null;try{o=n(i)}catch(s){Be(s)}return i.addDecoration=pS,i.changeDecoration=pS,i.changeDecorationOptions=pS,i.removeDecoration=pS,i.deltaDecorations=pS,o}deltaDecorations(t,n,i=0){if(this._assertNotDisposed(),t||(t=[]),t.length===0&&n.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),Be(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(i,t,n)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(t){return this.getDecorationRange(t)}_setTrackedRange(t,n,i){let o=t?this._decorations[t]:null;if(!o)return n?this._deltaDecorationsImpl(0,[],[{range:n,options:L7[i]}],!0)[0]:null;if(!n)return this._decorationsTree.delete(o),delete this._decorations[o.id],null;let s=this._validateRangeRelaxedNoAllocations(n),a=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),l=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(o),o.reset(this.getVersionId(),a,l,s),o.setOptions(L7[i]),this._decorationsTree.insert(o),o.id}removeAllDecorationsWithOwnerId(t){if(this._isDisposed)return;let n=this._decorationsTree.collectNodesFromOwner(t);for(let i=0,o=n.length;i<o;i++){let s=n[i];this._decorationsTree.delete(s),delete this._decorations[s.id]}}getDecorationOptions(t){let n=this._decorations[t];return n?n.options:null}getDecorationRange(t){let n=this._decorations[t];return n?this._decorationsTree.getNodeRange(this,n):null}getLineDecorations(t,n=0,i=!1){return t<1||t>this.getLineCount()?[]:this.getLinesDecorations(t,t,n,i)}getLinesDecorations(t,n,i=0,o=!1,s=!1){let a=this.getLineCount(),l=Math.min(a,Math.max(1,t)),d=Math.min(a,Math.max(1,n)),c=this.getLineMaxColumn(d),p=new D(l,1,d,c),h=this._getDecorationsInRange(p,i,o,s);return J0(h,this._decorationProvider.getDecorationsInRange(p,i,o)),h}getDecorationsInRange(t,n=0,i=!1,o=!1,s=!1){let a=this.validateRange(t),l=this._getDecorationsInRange(a,n,i,s);return J0(l,this._decorationProvider.getDecorationsInRange(a,n,i,o)),l}getOverviewRulerDecorations(t=0,n=!1){return this._decorationsTree.getAll(this,t,n,!0,!1)}getInjectedTextDecorations(t=0){return this._decorationsTree.getAllInjectedText(this,t)}_getInjectedTextInLine(t){let n=this._buffer.getOffsetAt(t,1),i=n+this._buffer.getLineLength(t),o=this._decorationsTree.getInjectedTextInInterval(this,n,i,0);return Wr.fromDecorations(o).filter(s=>s.lineNumber===t)}getAllDecorations(t=0,n=!1){let i=this._decorationsTree.getAll(this,t,n,!1,!1);return i=i.concat(this._decorationProvider.getAllDecorations(t,n)),i}getAllMarginDecorations(t=0){return this._decorationsTree.getAll(this,t,!1,!1,!0)}_getDecorationsInRange(t,n,i,o){let s=this._buffer.getOffsetAt(t.startLineNumber,t.startColumn),a=this._buffer.getOffsetAt(t.endLineNumber,t.endColumn);return this._decorationsTree.getAllInInterval(this,s,a,n,i,o)}getRangeAt(t,n){return this._buffer.getRangeAt(t,n-t)}_changeDecorationImpl(t,n){let i=this._decorations[t];if(!i)return;if(i.options.after){let l=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.endLineNumber)}if(i.options.before){let l=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.startLineNumber)}let o=this._validateRangeRelaxedNoAllocations(n),s=this._buffer.getOffsetAt(o.startLineNumber,o.startColumn),a=this._buffer.getOffsetAt(o.endLineNumber,o.endColumn);this._decorationsTree.delete(i),i.reset(this.getVersionId(),s,a,o),this._decorationsTree.insert(i),this._onDidChangeDecorations.checkAffectedAndFire(i.options),i.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.endLineNumber),i.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(o.startLineNumber)}_changeDecorationOptionsImpl(t,n){let i=this._decorations[t];if(!i)return;let o=!!(i.options.overviewRuler&&i.options.overviewRuler.color),s=!!(n.overviewRuler&&n.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(i.options),this._onDidChangeDecorations.checkAffectedAndFire(n),i.options.after||n.after){let d=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.endLineNumber)}if(i.options.before||n.before){let d=this._decorationsTree.getNodeRange(this,i);this._onDidChangeDecorations.recordLineAffectedByInjectedText(d.startLineNumber)}let a=o!==s,l=oQ(n)!==U_(i);a||l?(this._decorationsTree.delete(i),i.setOptions(n),this._decorationsTree.insert(i)):i.setOptions(n)}_deltaDecorationsImpl(t,n,i,o=!1){let s=this.getVersionId(),a=n.length,l=0,d=i.length,c=0;this._onDidChangeDecorations.beginDeferredEmit();try{let p=new Array(d);for(;l<a||c<d;){let h=null;if(l<a){do h=this._decorations[n[l++]];while(!h&&l<a);if(h){if(h.options.after){let g=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.endLineNumber)}if(h.options.before){let g=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(g.startLineNumber)}this._decorationsTree.delete(h),o||this._onDidChangeDecorations.checkAffectedAndFire(h.options)}}if(c<d){if(!h){let S=++this._lastDecorationId,x=`${this._instanceId};${S}`;h=new rS(x,0,0),this._decorations[x]=h}let g=i[c],f=this._validateRangeRelaxedNoAllocations(g.range),m=k7(g.options),b=this._buffer.getOffsetAt(f.startLineNumber,f.startColumn),v=this._buffer.getOffsetAt(f.endLineNumber,f.endColumn);h.ownerId=t,h.reset(s,b,v,f),h.setOptions(m),h.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.endLineNumber),h.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(f.startLineNumber),o||this._onDidChangeDecorations.checkAffectedAndFire(m),this._decorationsTree.insert(h),p[c]=h.id,c++}else h&&delete this._decorations[h.id]}return p}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(t,n){typeof t=="string"?(this._languageSelectionListener.clear(),this._setLanguage(t,n)):(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId,n)),this._setLanguage(t.languageId,n))}_setLanguage(t,n){this.tokenization.setLanguageId(t,n),this._languageService.requestRichLanguageFeatures(t)}getLanguageIdAtPosition(t,n){return this.tokenization.getLanguageIdAtPosition(t,n)}getWordAtPosition(t){return this._tokenizationTextModelPart.getWordAtPosition(t)}getWordUntilPosition(t){return this._tokenizationTextModelPart.getWordUntilPosition(t)}normalizePosition(t,n){return t}getLineIndentColumn(t){return iQ(this.getLineContent(t))+1}};vd=_([y(4,qz),y(5,Lt),y(6,Qn),y(7,we)],vd);function iQ(r){let e=0;for(let t of r)if(t===" "||t==="	")e++;else break;return e}function fN(r){return!!(r.options.overviewRuler&&r.options.overviewRuler.color)}function oQ(r){return!!r.after||!!r.before}function U_(r){return!!r.options.after||!!r.options.before}var z_=class{_decorationsTree0;_decorationsTree1;_injectedTextDecorationsTree;constructor(){this._decorationsTree0=new Xf,this._decorationsTree1=new Xf,this._injectedTextDecorationsTree=new Xf}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(let n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,i,o,s){let a=e.getVersionId(),l=this._intervalSearch(t,n,i,o,a,s);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,n,i,o,s){let a=this._decorationsTree0.intervalSearch(e,t,n,i,o,s),l=this._decorationsTree1.intervalSearch(e,t,n,i,o,s),d=this._injectedTextDecorationsTree.intervalSearch(e,t,n,i,o,s);return a.concat(l).concat(d)}getInjectedTextInInterval(e,t,n,i){let o=e.getVersionId(),s=this._injectedTextDecorationsTree.intervalSearch(t,n,i,!1,o,!1);return this._ensureNodesHaveRanges(e,s).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){let n=e.getVersionId(),i=this._injectedTextDecorationsTree.search(t,!1,n,!1);return this._ensureNodesHaveRanges(e,i).filter(o=>o.options.showIfCollapsed||!o.range.isEmpty())}getAll(e,t,n,i,o){let s=e.getVersionId(),a=this._search(t,n,i,s,o);return this._ensureNodesHaveRanges(e,a)}_search(e,t,n,i,o){if(n)return this._decorationsTree1.search(e,t,i,o);{let s=this._decorationsTree0.search(e,t,i,o),a=this._decorationsTree1.search(e,t,i,o),l=this._injectedTextDecorationsTree.search(e,t,i,o);return s.concat(a).concat(l)}}collectNodesFromOwner(e){let t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),i=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(i)}collectNodesPostOrder(){let e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){U_(e)?this._injectedTextDecorationsTree.insert(e):fN(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){U_(e)?this._injectedTextDecorationsTree.delete(e):fN(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){let n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){U_(e)?this._injectedTextDecorationsTree.resolveNode(e,t):fN(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,i){this._decorationsTree0.acceptReplace(e,t,n,i),this._decorationsTree1.acceptReplace(e,t,n,i),this._injectedTextDecorationsTree.acceptReplace(e,t,n,i)}};function bd(r){return r.replace(/[^a-z0-9\-_]/gi," ")}var K_=class{color;darkColor;constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}},vN=class extends K_{position;_resolvedColor;constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:2}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;let n=e?t.getColor(e.id):null;return n?n.toString():""}},yN=class{position;persistLane;constructor(e){this.position=e?.position??2,this.persistLane=e?.persistLane}},IN=class extends K_{position;sectionHeaderStyle;sectionHeaderText;_resolvedColor;constructor(e){super(e),this.position=e.position,this.sectionHeaderStyle=e.sectionHeaderStyle??null,this.sectionHeaderText=e.sectionHeaderText??null}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?H.fromHex(e):t.getColor(e.id)}},G_=class r{static from(e){return e instanceof r?e:new r(e)}content;tokens;inlineClassName;inlineClassNameAffectsLetterSpacing;attachedData;cursorStops;constructor(e){this.content=e.content||"",this.tokens=e.tokens??null,this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}},Bn=class r{static EMPTY;static register(e){return new r(e)}static createDynamic(e){return new r(e)}description;blockClassName;blockIsAfterEnd;blockDoesNotCollapse;blockPadding;stickiness;zIndex;className;shouldFillLineOnLineBreak;hoverMessage;glyphMarginHoverMessage;isWholeLine;showIfCollapsed;collapseOnReplaceEdit;overviewRuler;minimap;glyphMargin;glyphMarginClassName;linesDecorationsClassName;lineNumberClassName;lineNumberHoverMessage;linesDecorationsTooltip;firstLineDecorationClassName;marginClassName;inlineClassName;inlineClassNameAffectsLetterSpacing;beforeContentClassName;afterContentClassName;after;before;hideInCommentTokens;hideInStringTokens;constructor(e){this.description=e.description,this.blockClassName=e.blockClassName?bd(e.blockClassName):null,this.blockDoesNotCollapse=e.blockDoesNotCollapse??null,this.blockIsAfterEnd=e.blockIsAfterEnd??null,this.blockPadding=e.blockPadding??null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?bd(e.className):null,this.shouldFillLineOnLineBreak=e.shouldFillLineOnLineBreak??null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new vN(e.overviewRuler):null,this.minimap=e.minimap?new IN(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new yN(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?bd(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?bd(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?bd(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?fH(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?bd(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?bd(e.marginClassName):null,this.inlineClassName=e.inlineClassName?bd(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?bd(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?bd(e.afterContentClassName):null,this.after=e.after?G_.from(e.after):null,this.before=e.before?G_.from(e.before):null,this.hideInCommentTokens=e.hideInCommentTokens??!1,this.hideInStringTokens=e.hideInStringTokens??!1}};Bn.EMPTY=Bn.register({description:"empty"});var L7=[Bn.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),Bn.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),Bn.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),Bn.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function k7(r){return r instanceof Bn?r:Bn.createDynamic(r)}var SN=class extends N{constructor(t){super();this.handleBeforeFire=t;this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}_actual=this._register(new T);event=this._actual.event;_deferredCnt;_shouldFireDeferred;_affectsMinimap;_affectsOverviewRuler;_affectedInjectedTextLines=null;_affectsGlyphMargin;_affectsLineNumber;hasListeners(){return this._actual.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),this._affectedInjectedTextLines?.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(t){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(t)}checkAffectedAndFire(t){this._affectsMinimap||=!!t.minimap?.position,this._affectsOverviewRuler||=!!t.overviewRuler?.color,this._affectsGlyphMargin||=!!t.glyphMarginClassName,this._affectsLineNumber||=!!t.lineNumberClassName,this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);let t={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(t)}},CN=class extends N{_fastEmitter=this._register(new T);fastEvent=this._fastEmitter.event;_slowEmitter=this._register(new T);slowEvent=this._slowEmitter.event;_deferredCnt;_deferredEvent;constructor(){super(),this._deferredCnt=0,this._deferredEvent=null}hasListeners(){return this._fastEmitter.hasListeners()||this._slowEmitter.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;let t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}};var up=j("workingCopyService"),EN=class extends N{_onDidRegister=this._register(new T);onDidRegister=this._onDidRegister.event;_onDidUnregister=this._register(new T);onDidUnregister=this._onDidUnregister.event;_onDidChangeDirty=this._register(new T);onDidChangeDirty=this._onDidChangeDirty.event;_onDidChangeContent=this._register(new T);onDidChangeContent=this._onDidChangeContent.event;_onDidSave=this._register(new T);onDidSave=this._onDidSave.event;get workingCopies(){return Array.from(this._workingCopies.values())}_workingCopies=new Set;mapResourceToWorkingCopies=new bi;mapWorkingCopyToListeners=this._register(new ws);registerWorkingCopy(e){let t=this.mapResourceToWorkingCopies.get(e.resource);if(t?.has(e.typeId))throw new Error(`Cannot register more than one working copy with the same resource ${e.resource.toString()} and type ${e.typeId}.`);this._workingCopies.add(e),t||(t=new Map,this.mapResourceToWorkingCopies.set(e.resource,t)),t.set(e.typeId,e);let n=new X;return n.add(e.onDidChangeContent(()=>this._onDidChangeContent.fire(e))),n.add(e.onDidChangeDirty(()=>this._onDidChangeDirty.fire(e))),n.add(e.onDidSave(i=>this._onDidSave.fire({workingCopy:e,...i}))),this.mapWorkingCopyToListeners.set(e,n),this._onDidRegister.fire(e),e.isDirty()&&this._onDidChangeDirty.fire(e),me(()=>{this.unregisterWorkingCopy(e),this._onDidUnregister.fire(e)})}unregisterWorkingCopy(e){this._workingCopies.delete(e);let t=this.mapResourceToWorkingCopies.get(e.resource);t?.delete(e.typeId)&&t.size===0&&this.mapResourceToWorkingCopies.delete(e.resource),e.isDirty()&&this._onDidChangeDirty.fire(e),this.mapWorkingCopyToListeners.deleteAndDispose(e)}has(e){return Z.isUri(e)?this.mapResourceToWorkingCopies.has(e):this.mapResourceToWorkingCopies.get(e.resource)?.has(e.typeId)??!1}get(e){return this.mapResourceToWorkingCopies.get(e.resource)?.get(e.typeId)}getAll(e){let t=this.mapResourceToWorkingCopies.get(e);if(t)return Array.from(t.values())}get hasDirty(){for(let e of this._workingCopies)if(e.isDirty())return!0;return!1}get dirtyCount(){let e=0;for(let t of this._workingCopies)t.isDirty()&&e++;return e}get dirtyWorkingCopies(){return this.workingCopies.filter(e=>e.isDirty())}get modifiedCount(){let e=0;for(let t of this._workingCopies)t.isModified()&&e++;return e}get modifiedWorkingCopies(){return this.workingCopies.filter(e=>e.isModified())}isDirty(e,t){let n=this.mapResourceToWorkingCopies.get(e);if(n){if(typeof t=="string")return n.get(t)?.isDirty()??!1;for(let[,i]of n)if(i.isDirty())return!0}return!1}};Cn(up,EN,1);var wr=class extends gS{_onDidChangeDirty=this._register(new T);_onDidChangeLabel=this._register(new T);_onDidChangeCapabilities=this._register(new T);_onWillDispose=this._register(new T);onDidChangeDirty=this._onDidChangeDirty.event;onDidChangeLabel=this._onDidChangeLabel.event;onDidChangeCapabilities=this._onDidChangeCapabilities.event;onWillDispose=this._onWillDispose.event;closeHandler;get editorId(){}get capabilities(){return 2}hasCapability(e){return e===0?this.capabilities===0:(this.capabilities&e)!==0}isReadonly(){return this.hasCapability(2)}getName(){return`Editor ${this.typeId}`}getDescription(e){}getTitle(e){return this.getName()}getLabelExtraClasses(){return[]}getAriaLabel(){return this.getTitle(0)}getIcon(){}getTelemetryDescriptor(){return{typeId:this.typeId}}isDirty(){return!1}isModified(){return this.isDirty()}isSaving(){return!1}async resolve(){return null}async save(e,t){return this}async saveAs(e,t){return this}async revert(e,t){}async rename(e,t){}copy(){return this}canMove(e,t){return!0}matches(e){if(yo(e))return this===e;let t=e.options?.override;return this.editorId!==t&&t!==void 0&&this.editorId!==void 0?!1:yn(this.resource,pp.getCanonicalUri(e))}prefersEditorPane(e){return e.at(0)}toUntyped(e){}isDisposed(){return this._store.isDisposed}dispose(){this.isDisposed()||this._onWillDispose.fire(),super.dispose()}};var ao=class extends wr{constructor(t,n,i,o,s){super();this.preferredName=t;this.preferredDescription=n;this.secondary=i;this.primary=o;this.editorService=s;this.registerListeners()}static ID="workbench.editorinputs.sidebysideEditorInput";get typeId(){return ao.ID}get capabilities(){let t=this.primary.capabilities;return t&=-33,this.secondary.hasCapability(16)&&(t|=16),this.secondary.hasCapability(8)&&(t|=8),t|=256,t}get resource(){if(this.hasIdenticalSides)return this.primary.resource}hasIdenticalSides=this.primary.matches(this.secondary);registerListeners(){this._register(z.once(z.any(this.primary.onWillDispose,this.secondary.onWillDispose))(()=>{this.isDisposed()||this.dispose()})),this._register(this.primary.onDidChangeDirty(()=>this._onDidChangeDirty.fire())),this._register(this.primary.onDidChangeCapabilities(()=>this._onDidChangeCapabilities.fire())),this._register(this.secondary.onDidChangeCapabilities(()=>this._onDidChangeCapabilities.fire())),this._register(this.primary.onDidChangeLabel(()=>this._onDidChangeLabel.fire())),this._register(this.secondary.onDidChangeLabel(()=>this._onDidChangeLabel.fire()))}getName(){let t=this.getPreferredName();return t||(this.hasIdenticalSides?this.primary.getName():u("sideBySideLabels","{0} - {1}",this.secondary.getName(),this.primary.getName()))}getPreferredName(){return this.preferredName}getDescription(t){let n=this.getPreferredDescription();return n||(this.hasIdenticalSides?this.primary.getDescription(t):super.getDescription(t))}getPreferredDescription(){return this.preferredDescription}getTitle(t){let n;this.hasIdenticalSides?n=this.primary.getTitle(t)??this.getName():n=super.getTitle(t);let i=this.getPreferredTitle();return i&&(n=`${i} (${n})`),n}getPreferredTitle(){if(this.preferredName&&this.preferredDescription)return`${this.preferredName} ${this.preferredDescription}`;if(this.preferredName||this.preferredDescription)return this.preferredName??this.preferredDescription}getLabelExtraClasses(){return this.hasIdenticalSides?this.primary.getLabelExtraClasses():super.getLabelExtraClasses()}getAriaLabel(){return this.hasIdenticalSides?this.primary.getAriaLabel():super.getAriaLabel()}getTelemetryDescriptor(){return{...this.primary.getTelemetryDescriptor(),...super.getTelemetryDescriptor()}}isDirty(){return this.primary.isDirty()}isSaving(){return this.primary.isSaving()}async save(t,n){let i=await this.primary.save(t,n);return this.saveResultToEditor(i)}async saveAs(t,n){let i=await this.primary.saveAs(t,n);return this.saveResultToEditor(i)}saveResultToEditor(t){if(!t||!this.hasIdenticalSides)return t;if(this.primary.matches(t))return this;if(t instanceof wr)return new ao(this.preferredName,this.preferredDescription,t,t,this.editorService);if(!Hs(t)&&!ob(t)&&!yd(t)&&!Id(t))return{primary:t,secondary:t,label:this.preferredName,description:this.preferredDescription}}revert(t,n){return this.primary.revert(t,n)}async rename(t,n){if(!this.hasIdenticalSides)return;let i=await this.primary.rename(t,n);if(i){if(yo(i.editor))return{editor:new ao(this.preferredName,this.preferredDescription,i.editor,i.editor,this.editorService),options:{...i.options,viewState:ib(this,t,this.editorService)}};if($_(i.editor))return{editor:{label:this.preferredName,description:this.preferredDescription,primary:i.editor,secondary:i.editor,options:{...i.options,viewState:ib(this,t,this.editorService)}}}}}isReadonly(){return this.primary.isReadonly()}toUntyped(t){let n=this.primary.toUntyped(t),i=this.secondary.toUntyped(t);if(n&&i&&!Hs(n)&&!Hs(i)&&!ob(n)&&!ob(i)&&!yd(n)&&!yd(i)&&!Id(n)&&!Id(i)){let o={label:this.preferredName,description:this.preferredDescription,primary:n,secondary:i};return typeof t?.preserveViewState=="number"&&(o.options={viewState:ib(this,t.preserveViewState,this.editorService)}),o}}matches(t){return this===t?!0:wN(t)||Hs(t)?!1:t instanceof ao?this.primary.matches(t.primary)&&this.secondary.matches(t.secondary):yd(t)?this.primary.matches(t.primary)&&this.secondary.matches(t.secondary):!1}};ao=_([y(4,vt)],ao);var _N={LEFT:"left",RIGHT:"right",FIRST:"first",LAST:"last"};function rQ(r){let e=r;return!!(e&&typeof e=="object"&&Array.isArray(e.editors)&&Array.isArray(e.mru))}var Sd=class extends N{constructor(t,n,i){super();this.instantiationService=n;this.configurationService=i;rQ(t)?this._id=this.deserialize(t):this._id=Sd.IDS++,this.onConfigurationUpdated(),this.registerListeners()}static IDS=0;_onDidModelChange=this._register(new T({leakWarningThreshold:500}));onDidModelChange=this._onDidModelChange.event;_id;get id(){return this._id}editors=[];mru=[];editorListeners=new Set;locked=!1;selection=[];get active(){return this.selection[0]??null}preview=null;sticky=-1;transient=new Set;editorOpenPositioning;focusRecentEditorAfterClose;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>this.onConfigurationUpdated(t)))}onConfigurationUpdated(t){t&&!t.affectsConfiguration("workbench.editor.openPositioning")&&!t.affectsConfiguration("workbench.editor.focusRecentEditorAfterClose")||(this.editorOpenPositioning=this.configurationService.getValue("workbench.editor.openPositioning"),this.focusRecentEditorAfterClose=this.configurationService.getValue("workbench.editor.focusRecentEditorAfterClose"))}get count(){return this.editors.length}get stickyCount(){return this.sticky+1}getEditors(t,n){let i=t===0?this.mru.slice(0):this.editors.slice(0);return n?.excludeSticky?t===0?i.filter(o=>!this.isSticky(o)):i.slice(this.sticky+1):i}getEditorByIndex(t){return this.editors[t]}get activeEditor(){return this.active}isActive(t){return this.matches(this.active,t)}get previewEditor(){return this.preview}openEditor(t,n){let i=n?.sticky||typeof n?.index=="number"&&this.isSticky(n.index),o=n?.pinned||n?.sticky,s=!!n?.transient,a=n?.active||!this.activeEditor||!o&&this.preview===this.activeEditor,l=this.findEditor(t,n);if(l){let[d,c]=l;return this.doSetTransient(d,c,s===!1?!1:this.isTransient(d)),o&&this.doPin(d,c),this.setSelection(a?d:this.activeEditor,n?.inactiveSelection??[]),n&&typeof n.index=="number"&&this.moveEditor(d,n.index),i&&this.doStick(d,this.indexOf(d)),{editor:d,isNew:!1}}else{let d=t,c=this.indexOf(this.active),p;if(n&&typeof n.index=="number"?p=n.index:this.editorOpenPositioning===_N.FIRST?(p=0,!i&&this.isSticky(p)&&(p=this.sticky+1)):this.editorOpenPositioning===_N.LAST?p=this.editors.length:(this.editorOpenPositioning===_N.LEFT?c===0||!this.editors.length?p=0:p=c:p=c+1,!i&&this.isSticky(p)&&(p=this.sticky+1)),i&&(this.sticky++,this.isSticky(p)||(p=this.sticky)),(o||!this.preview)&&this.splice(p,!1,d),s&&this.doSetTransient(d,p,!0),!o){if(this.preview){let g=this.indexOf(this.preview);p>g&&p--,this.replaceEditor(this.preview,d,p,!a)}this.preview=d}this.registerEditorListeners(d);let h={kind:5,editor:d,editorIndex:p};return this._onDidModelChange.fire(h),this.setSelection(a?d:this.activeEditor,n?.inactiveSelection??[]),{editor:d,isNew:!0}}}registerEditorListeners(t){let n=new X;this.editorListeners.add(n),n.add(z.once(t.onWillDispose)(()=>{let i=this.editors.indexOf(t);if(i>=0){let o={kind:15,editor:t,editorIndex:i};this._onDidModelChange.fire(o)}})),n.add(t.onDidChangeDirty(()=>{let i={kind:14,editor:t,editorIndex:this.editors.indexOf(t)};this._onDidModelChange.fire(i)})),n.add(t.onDidChangeLabel(()=>{let i={kind:9,editor:t,editorIndex:this.editors.indexOf(t)};this._onDidModelChange.fire(i)})),n.add(t.onDidChangeCapabilities(()=>{let i={kind:10,editor:t,editorIndex:this.editors.indexOf(t)};this._onDidModelChange.fire(i)})),n.add(this.onDidModelChange(i=>{i.kind===6&&i.editor?.matches(t)&&(rt(n),this.editorListeners.delete(n))}))}replaceEditor(t,n,i,o=!0){let s=this.doCloseEditor(t,1,o);if(this.splice(i,!1,n),s){let a={kind:6,...s};this._onDidModelChange.fire(a)}}closeEditor(t,n=0,i=!0){let o=this.doCloseEditor(t,n,i);if(o){let s={kind:6,...o};return this._onDidModelChange.fire(s),o}}doCloseEditor(t,n,i){let o=this.indexOf(t);if(o===-1)return;let s=this.editors[o],a=this.isSticky(o),l=this.active===s;if(i&&l)if(this.mru.length>1){let d;this.focusRecentEditorAfterClose?d=this.mru[1]:o===this.editors.length-1?d=this.editors[o-1]:d=this.editors[o+1];let c=this.selection.filter(p=>p!==s&&p!==d);this.doSetSelection(d,this.editors.indexOf(d),c)}else this.doSetSelection(null,void 0,[]);else if(!l&&this.doIsSelected(s)){let d=this.selection.filter(c=>c!==s&&c!==this.activeEditor);this.doSetSelection(this.activeEditor,this.indexOf(this.activeEditor),d)}return this.preview===s&&(this.preview=null),this.transient.delete(s),this.splice(o,!0),{editor:s,sticky:a,editorIndex:o,context:n}}moveEditor(t,n){n>=this.editors.length?n=this.editors.length-1:n<0&&(n=0);let i=this.indexOf(t);if(i<0||n===i)return;let o=this.editors[i],s=this.sticky;this.isSticky(i)&&n>this.sticky?this.sticky--:!this.isSticky(i)&&n<=this.sticky&&this.sticky++,this.editors.splice(i,1),this.editors.splice(n,0,o);let a={kind:7,editor:o,oldEditorIndex:i,editorIndex:n};if(this._onDidModelChange.fire(a),s!==this.sticky){let l={kind:13,editor:o,editorIndex:n};this._onDidModelChange.fire(l)}return o}setActive(t){let n;return t?n=this.setEditorActive(t):this.setGroupActive(),n}setGroupActive(){this._onDidModelChange.fire({kind:0})}setEditorActive(t){let n=this.findEditor(t);if(!n)return;let[i,o]=n;return this.doSetSelection(i,o,[]),i}get selectedEditors(){return this.editors.filter(t=>this.doIsSelected(t))}isSelected(t){let n;return typeof t=="number"?n=this.editors[t]:n=this.findEditor(t)?.[0],!!n&&this.doIsSelected(n)}doIsSelected(t){return this.selection.includes(t)}setSelection(t,n){let i=this.findEditor(t);if(!i)return;let[o,s]=i,a=new Set;for(let l of n){let d=this.findEditor(l);if(!d)return;let[c]=d;c!==o&&a.add(c)}this.doSetSelection(o,s,Array.from(a))}doSetSelection(t,n,i){let o=this.activeEditor,s=this.selection,a;t?a=[t,...i]:a=[],this.selection=a;let l=t&&typeof n=="number"&&o!==t;if(l){let d=this.indexOf(t,this.mru);this.mru.splice(d,1),this.mru.unshift(t);let c={kind:8,editor:t,editorIndex:n};this._onDidModelChange.fire(c)}if(l||s.length!==a.length||s.some(d=>!a.includes(d))){let d={kind:4};this._onDidModelChange.fire(d)}}setIndex(t){this._onDidModelChange.fire({kind:1})}setLabel(t){this._onDidModelChange.fire({kind:2})}pin(t){let n=this.findEditor(t);if(!n)return;let[i,o]=n;return this.doPin(i,o),i}doPin(t,n){if(this.isPinned(t))return;this.setTransient(t,!1),this.preview=null;let i={kind:11,editor:t,editorIndex:n};this._onDidModelChange.fire(i)}unpin(t){let n=this.findEditor(t);if(!n)return;let[i,o]=n;return this.doUnpin(i,o),i}doUnpin(t,n){if(!this.isPinned(t))return;let i=this.preview;this.preview=t;let o={kind:11,editor:t,editorIndex:n};this._onDidModelChange.fire(o),i&&this.closeEditor(i,3)}isPinned(t){let n;return typeof t=="number"?n=this.editors[t]:n=t,!this.matches(this.preview,n)}stick(t){let n=this.findEditor(t);if(!n)return;let[i,o]=n;return this.doStick(i,o),i}doStick(t,n){if(this.isSticky(n))return;this.pin(t);let i=this.sticky+1;this.moveEditor(t,i),this.sticky++;let o={kind:13,editor:t,editorIndex:i};this._onDidModelChange.fire(o)}unstick(t){let n=this.findEditor(t);if(!n)return;let[i,o]=n;return this.doUnstick(i,o),i}doUnstick(t,n){if(!this.isSticky(n))return;let i=this.sticky;this.moveEditor(t,i),this.sticky--;let o={kind:13,editor:t,editorIndex:i};this._onDidModelChange.fire(o)}isSticky(t){if(this.sticky<0)return!1;let n;return typeof t=="number"?n=t:n=this.indexOf(t),n<0?!1:n<=this.sticky}setTransient(t,n){if(!n&&this.transient.size===0)return;let i=this.findEditor(t);if(!i)return;let[o,s]=i;return this.doSetTransient(o,s,n),o}doSetTransient(t,n,i){if(i){if(this.transient.has(t))return;this.transient.add(t)}else{if(!this.transient.has(t))return;this.transient.delete(t)}let o={kind:12,editor:t,editorIndex:n};this._onDidModelChange.fire(o)}isTransient(t){if(this.transient.size===0)return!1;let n;return typeof t=="number"?n=this.editors[t]:n=this.findEditor(t)?.[0],!!n&&this.transient.has(n)}splice(t,n,i){let o=this.editors[t];if(n&&this.isSticky(t)&&this.sticky--,i?this.editors.splice(t,n?1:0,i):this.editors.splice(t,n?1:0),!n&&i)this.mru.length===0?this.mru.push(i):this.mru.splice(1,0,i);else{let s=this.indexOf(o,this.mru);n&&!i?this.mru.splice(s,1):n&&i&&this.mru.splice(s,1,i)}}indexOf(t,n=this.editors,i){let o=-1;if(!t)return o;for(let s=0;s<n.length;s++){let a=n[s];if(this.matches(a,t,i))if(i?.supportSideBySide&&a instanceof ao&&!(t instanceof ao))o=s;else{o=s;break}}return o}findEditor(t,n){let i=this.indexOf(t,this.editors,n);if(i!==-1)return[this.editors[i],i]}isFirst(t,n=this.editors){return this.matches(n[0],t)}isLast(t,n=this.editors){return this.matches(n[n.length-1],t)}contains(t,n){return this.indexOf(t,this.editors,n)!==-1}matches(t,n,i){if(!t||!n)return!1;if(i?.supportSideBySide&&t instanceof ao&&!(n instanceof ao))switch(i.supportSideBySide){case 4:if(this.matches(t.primary,n,i)||this.matches(t.secondary,n,i))return!0;break;case 3:if(this.matches(t.primary,n,i)&&this.matches(t.secondary,n,i))return!0;break}let o=t===n;return i?.strictEquals?o:o||t.matches(n)}get isLocked(){return this.locked}lock(t){this.isLocked!==t&&(this.locked=t,this._onDidModelChange.fire({kind:3}))}clone(){let t=this.instantiationService.createInstance(Sd,void 0);t.editors=this.editors.slice(0),t.mru=this.mru.slice(0),t.preview=this.preview,t.selection=this.selection.slice(0),t.sticky=this.sticky;for(let n of t.editors)t.registerEditorListeners(n);return t}serialize(){let t=Te.as(ys.EditorFactory),n=[],i=[],o,s=this.sticky;for(let l=0;l<this.editors.length;l++){let d=this.editors[l],c=!1,p=t.getEditorSerializer(d);if(p){let h=p.canSerialize(d)?p.serialize(d):void 0;typeof h=="string"?(c=!0,i.push({id:d.typeId,value:h}),n.push(d),this.preview===d&&(o=n.length-1)):c=!1}!c&&this.isSticky(l)&&s--}let a=this.mru.map(l=>this.indexOf(l,n)).filter(l=>l>=0);return{id:this.id,locked:this.locked?!0:void 0,editors:i,mru:a,preview:o,sticky:s>=0?s:void 0}}deserialize(t){let n=Te.as(ys.EditorFactory);return typeof t.id=="number"?(this._id=t.id,Sd.IDS=Math.max(t.id+1,Sd.IDS)):this._id=Sd.IDS++,t.locked&&(this.locked=!0),this.editors=Mr(t.editors.map((i,o)=>{let s,a=n.getEditorSerializer(i.id);if(a){let l=a.deserialize(this.instantiationService,i.value);l instanceof wr&&(s=l,this.registerEditorListeners(s))}return!s&&typeof t.sticky=="number"&&o<=t.sticky&&t.sticky--,s})),this.mru=Mr(t.mru.map(i=>this.editors[i])),this.selection=this.mru.length>0?[this.mru[0]]:[],typeof t.preview=="number"&&(this.preview=this.editors[t.preview]),typeof t.sticky=="number"&&(this.sticky=t.sticky),this._id}dispose(){rt(Array.from(this.editorListeners)),this.editorListeners.clear(),this.transient.clear(),super.dispose()}};Sd=_([y(1,we),y(2,Ge)],Sd);var M7=j("editorGroupsService");var vt=j("editorService");var LN=class{constructor(e,t,n){this.id=e;this.dependencies=t;this.callback=n}};var O7=class r{static INSTANCE=new r;_isWebWorker=typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope";_isRenderer=typeof document=="object";_defineCalls=[];_state=1;_amdPolicy;constructor(){}_initialize(){if(this._state===1){if(globalThis.define){console.log("[amdX] AMD loader already present externally"),this._state=3;return}}else return;this._state=2,globalThis.define=(e,t,n)=>{typeof e!="string"&&(n=t,t=e,e=null),(typeof t!="object"||!Array.isArray(t))&&(n=t,t=null),this._defineCalls.push(new LN(e,t,n))},globalThis.define.amd=!0,this._isRenderer?this._amdPolicy=globalThis._VSCODE_WEB_PACKAGE_TTP??window.trustedTypes?.createPolicy("amdLoader",{createScriptURL(e){if(e.startsWith(window.location.origin)||e.startsWith(`${ye.vscodeFileResource}://${y1}`))return e;throw new Error(`[trusted_script_src] Invalid script url: ${e}`)}}):this._isWebWorker&&(this._amdPolicy=globalThis._VSCODE_WEB_PACKAGE_TTP??globalThis.trustedTypes?.createPolicy("amdLoader",{createScriptURL(e){return e}}))}async load(e){if(this._initialize(),this._state===3)return new Promise(s=>{let a=ia();console.log(`[amdX] Using external define("${a}", ["${e}"])`),globalThis.define(a,[e],function(l){console.log(`[amdX] Got a result for ${a}: ${!!l}`),s(l)})});let t=await(this._isWebWorker?this._workerLoadScript(e):this._isRenderer?this._rendererLoadScript(e):this._nodeJSLoadScript(e));if(!t){console.warn(`Did not receive a define call from script ${e}`);return}let n={},i=[],o=[];if(Array.isArray(t.dependencies))for(let s of t.dependencies)s==="exports"?i.push(n):o.push(s);if(o.length>0)throw new Error(`Cannot resolve dependencies for script ${e}. The dependencies are: ${o.join(", ")}`);return typeof t.callback=="function"?t.callback(...i)??n:t.callback}_rendererLoadScript(e){return new Promise((t,n)=>{let i=document.createElement("script");i.setAttribute("async","async"),i.setAttribute("type","text/javascript");let o=()=>{i.removeEventListener("load",s),i.removeEventListener("error",a)},s=l=>{o(),t(this._defineCalls.pop())},a=l=>{o(),n(l)};i.addEventListener("load",s),i.addEventListener("error",a),this._amdPolicy&&(e=this._amdPolicy.createScriptURL(e)),i.setAttribute("src",e),window.document.getElementsByTagName("head")[0].appendChild(i)})}async _workerLoadScript(e){return this._amdPolicy&&(e=this._amdPolicy.createScriptURL(e)),await import(e),this._defineCalls.pop()}async _nodeJSLoadScript(e){try{let t=(await import("fs")).default,n=(await import("vm")).default,i=(await import("module")).default,o=Z.parse(e).fsPath,s=t.readFileSync(o).toString(),a=i.wrap(s.replace(/^#!.*/,""));return new n.Script(a).runInThisContext().apply(),this._defineCalls.pop()}catch(t){throw t}}};var RN="utf8";var Pnt=512*8,Ant=512*128;var kN={utf8:{labelLong:"UTF-8",labelShort:"UTF-8",order:1,alias:"utf8bom",guessableName:"UTF-8"},utf8bom:{labelLong:"UTF-8 with BOM",labelShort:"UTF-8 with BOM",encodeOnly:!0,order:2,alias:"utf8"},utf16le:{labelLong:"UTF-16 LE",labelShort:"UTF-16 LE",order:3,guessableName:"UTF-16LE"},utf16be:{labelLong:"UTF-16 BE",labelShort:"UTF-16 BE",order:4,guessableName:"UTF-16BE"},windows1252:{labelLong:"Western (Windows 1252)",labelShort:"Windows 1252",order:5,guessableName:"windows-1252"},iso88591:{labelLong:"Western (ISO 8859-1)",labelShort:"ISO 8859-1",order:6},iso88593:{labelLong:"Western (ISO 8859-3)",labelShort:"ISO 8859-3",order:7},iso885915:{labelLong:"Western (ISO 8859-15)",labelShort:"ISO 8859-15",order:8},macroman:{labelLong:"Western (Mac Roman)",labelShort:"Mac Roman",order:9},cp437:{labelLong:"DOS (CP 437)",labelShort:"CP437",order:10},windows1256:{labelLong:"Arabic (Windows 1256)",labelShort:"Windows 1256",order:11},iso88596:{labelLong:"Arabic (ISO 8859-6)",labelShort:"ISO 8859-6",order:12},windows1257:{labelLong:"Baltic (Windows 1257)",labelShort:"Windows 1257",order:13},iso88594:{labelLong:"Baltic (ISO 8859-4)",labelShort:"ISO 8859-4",order:14},iso885914:{labelLong:"Celtic (ISO 8859-14)",labelShort:"ISO 8859-14",order:15},windows1250:{labelLong:"Central European (Windows 1250)",labelShort:"Windows 1250",order:16,guessableName:"windows-1250"},iso88592:{labelLong:"Central European (ISO 8859-2)",labelShort:"ISO 8859-2",order:17,guessableName:"ISO-8859-2"},cp852:{labelLong:"Central European (CP 852)",labelShort:"CP 852",order:18},windows1251:{labelLong:"Cyrillic (Windows 1251)",labelShort:"Windows 1251",order:19,guessableName:"windows-1251"},cp866:{labelLong:"Cyrillic (CP 866)",labelShort:"CP 866",order:20,guessableName:"IBM866"},iso88595:{labelLong:"Cyrillic (ISO 8859-5)",labelShort:"ISO 8859-5",order:21,guessableName:"ISO-8859-5"},koi8r:{labelLong:"Cyrillic (KOI8-R)",labelShort:"KOI8-R",order:22,guessableName:"KOI8-R"},koi8u:{labelLong:"Cyrillic (KOI8-U)",labelShort:"KOI8-U",order:23},iso885913:{labelLong:"Estonian (ISO 8859-13)",labelShort:"ISO 8859-13",order:24},windows1253:{labelLong:"Greek (Windows 1253)",labelShort:"Windows 1253",order:25,guessableName:"windows-1253"},iso88597:{labelLong:"Greek (ISO 8859-7)",labelShort:"ISO 8859-7",order:26,guessableName:"ISO-8859-7"},windows1255:{labelLong:"Hebrew (Windows 1255)",labelShort:"Windows 1255",order:27,guessableName:"windows-1255"},iso88598:{labelLong:"Hebrew (ISO 8859-8)",labelShort:"ISO 8859-8",order:28,guessableName:"ISO-8859-8"},iso885910:{labelLong:"Nordic (ISO 8859-10)",labelShort:"ISO 8859-10",order:29},iso885916:{labelLong:"Romanian (ISO 8859-16)",labelShort:"ISO 8859-16",order:30},windows1254:{labelLong:"Turkish (Windows 1254)",labelShort:"Windows 1254",order:31},iso88599:{labelLong:"Turkish (ISO 8859-9)",labelShort:"ISO 8859-9",order:32},windows1258:{labelLong:"Vietnamese (Windows 1258)",labelShort:"Windows 1258",order:33},gbk:{labelLong:"Simplified Chinese (GBK)",labelShort:"GBK",order:34},gb18030:{labelLong:"Simplified Chinese (GB18030)",labelShort:"GB18030",order:35},cp950:{labelLong:"Traditional Chinese (Big5)",labelShort:"Big5",order:36,guessableName:"Big5"},big5hkscs:{labelLong:"Traditional Chinese (Big5-HKSCS)",labelShort:"Big5-HKSCS",order:37},shiftjis:{labelLong:"Japanese (Shift JIS)",labelShort:"Shift JIS",order:38,guessableName:"SHIFT_JIS"},eucjp:{labelLong:"Japanese (EUC-JP)",labelShort:"EUC-JP",order:39,guessableName:"EUC-JP"},euckr:{labelLong:"Korean (EUC-KR)",labelShort:"EUC-KR",order:40,guessableName:"EUC-KR"},windows874:{labelLong:"Thai (Windows 874)",labelShort:"Windows 874",order:41},iso885911:{labelLong:"Latin/Thai (ISO 8859-11)",labelShort:"ISO 8859-11",order:42},koi8ru:{labelLong:"Cyrillic (KOI8-RU)",labelShort:"KOI8-RU",order:43},koi8t:{labelLong:"Tajik (KOI8-T)",labelShort:"KOI8-T",order:44},gb2312:{labelLong:"Simplified Chinese (GB 2312)",labelShort:"GB 2312",order:45,guessableName:"GB2312"},cp865:{labelLong:"Nordic DOS (CP 865)",labelShort:"CP 865",order:46},cp850:{labelLong:"Western European DOS (CP 850)",labelShort:"CP 850",order:47}},Nnt=(()=>{let r={};for(let e in kN)kN[e].guessableName&&(r[e]=kN[e]);return r})();var rl=class extends Ws{constructor(t,n,i,o,s,a,l,d,c,p,h,g,f,m,b){super(l,a,m,b);this.resource=t;this.hasAssociatedFilePath=n;this.initialValue=i;this.preferredLanguageId=o;this.preferredEncoding=s;this.workingCopyBackupService=d;this.textResourceConfigurationService=c;this.workingCopyService=p;this.textFileService=h;this.labelService=g;this.editorService=f;this._register(this.workingCopyService.registerWorkingCopy(this)),o&&this.setLanguageId(o),this.onConfigurationChange(void 0,!1),this.registerListeners()}static FIRST_LINE_NAME_MAX_LENGTH=40;static FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH=this.FIRST_LINE_NAME_MAX_LENGTH*10;static ACTIVE_EDITOR_LANGUAGE_ID="${activeEditorLanguage}";_onDidChangeContent=this._register(new T);onDidChangeContent=this._onDidChangeContent.event;_onDidChangeName=this._register(new T);onDidChangeName=this._onDidChangeName.event;_onDidChangeDirty=this._register(new T);onDidChangeDirty=this._onDidChangeDirty.event;_onDidChangeEncoding=this._register(new T);onDidChangeEncoding=this._onDidChangeEncoding.event;_onDidSave=this._register(new T);onDidSave=this._onDidSave.event;_onDidRevert=this._register(new T);onDidRevert=this._onDidRevert.event;typeId=DK;capabilities=2;configuredLabelFormat="content";cachedModelFirstLineWords=void 0;get name(){return this.configuredLabelFormat==="content"&&!this.hasAssociatedFilePath&&this.cachedModelFirstLineWords?this.cachedModelFirstLineWords:this.labelService.getUriBasenameLabel(this.resource)}registerListeners(){this._register(this.textResourceConfigurationService.onDidChangeConfiguration(t=>this.onConfigurationChange(t,!0)))}onConfigurationChange(t,n){if(!t||t.affectsConfiguration(this.resource,"files.encoding")){let i=this.textResourceConfigurationService.getValue(this.resource,"files.encoding");this.configuredEncoding!==i&&typeof i=="string"&&(this.configuredEncoding=i,n&&!this.preferredEncoding&&this._onDidChangeEncoding.fire())}if(!t||t.affectsConfiguration(this.resource,"workbench.editor.untitled.labelFormat")){let i=this.textResourceConfigurationService.getValue(this.resource,"workbench.editor.untitled.labelFormat");this.configuredLabelFormat!==i&&(i==="content"||i==="name")&&(this.configuredLabelFormat=i,n&&this._onDidChangeName.fire())}}setLanguageId(t,n){let i=t===rl.ACTIVE_EDITOR_LANGUAGE_ID?this.editorService.activeTextEditorLanguageId:t;this.preferredLanguageId=i,i&&super.setLanguageId(i,n)}getLanguageId(){return this.textEditorModel?this.textEditorModel.getLanguageId():this.preferredLanguageId}configuredEncoding;getEncoding(){return this.preferredEncoding||this.configuredEncoding}async setEncoding(t){let n=this.getEncoding();this.preferredEncoding=t,n!==this.preferredEncoding&&this._onDidChangeEncoding.fire()}dirty=this.hasAssociatedFilePath||!!this.initialValue;isDirty(){return this.dirty}isModified(){return this.isDirty()}setDirty(t){this.dirty!==t&&(this.dirty=t,this._onDidChangeDirty.fire())}async save(t){let n=await this.textFileService.save(this.resource,t);return n&&this._onDidSave.fire({reason:t?.reason,source:t?.source}),!!n}async revert(){this.ignoreDirtyOnModelContentChange=!0;try{this.updateTextEditorModel(hS(""))}finally{this.ignoreDirtyOnModelContentChange=!1}this.setDirty(!1),this._onDidRevert.fire()}async backup(t){let n;return this.isResolved()?n=await this.textFileService.getEncodedReadable(this.resource,this.createSnapshot()??void 0,{encoding:RN}):typeof this.initialValue=="string"&&(n=mz(Fn.fromString(this.initialValue))),{content:n}}ignoreDirtyOnModelContentChange=!1;async resolve(){let t=!1,n=!1;if(this.textEditorModel)this.updateTextEditorModel(void 0,this.preferredLanguageId);else{let o,s=await this.workingCopyBackupService.resolve(this);s?(o=s.value,n=!0):o=fz(Fn.fromString(this.initialValue||""));let a=await R7(await this.textFileService.getDecodedStream(this.resource,o,{encoding:RN}));this.createTextEditorModel(a,this.resource,this.preferredLanguageId),t=!0}let i=ks(this.textEditorModel);return this.installModelListeners(i),t&&((n||this.initialValue)&&this.updateNameFromFirstLine(i),this.setDirty(this.hasAssociatedFilePath||!!n||!!this.initialValue),(n||this.initialValue)&&this._onDidChangeContent.fire()),super.resolve()}installModelListeners(t){this._register(t.onDidChangeContent(n=>this.onModelContentChanged(t,n))),this._register(t.onDidChangeLanguage(()=>this.onConfigurationChange(void 0,!0))),super.installModelListeners(t)}onModelContentChanged(t,n){this.ignoreDirtyOnModelContentChange||(!this.hasAssociatedFilePath&&t.getLineCount()===1&&t.getLineLength(1)===0?this.setDirty(!1):this.setDirty(!0)),n.changes.some(i=>(i.range.startLineNumber===1||i.range.endLineNumber===1)&&i.range.startColumn<=rl.FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH)&&this.updateNameFromFirstLine(t),this._onDidChangeContent.fire(),this.autoDetectLanguage()}updateNameFromFirstLine(t){if(this.hasAssociatedFilePath)return;let n,i=t.getValueInRange({startLineNumber:1,endLineNumber:1,startColumn:1,endColumn:rl.FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH+1}).trim().replace(/\s+/g," ").replace(/\u202E/g,"");i=i.substr(0,Wx(i,rl.FIRST_LINE_NAME_MAX_LENGTH)[0]),i&&hh().exec(i)&&(n=i),n!==this.cachedModelFirstLineWords&&(this.cachedModelFirstLineWords=n,this._onDidChangeName.fire())}isReadonly(){return!1}};rl=_([y(5,Lt),y(6,Bi),y(7,l_),y(8,Vs),y(9,up),y(10,Us),y(11,ro),y(12,vt),y(13,Gf),y(14,Xi)],rl);var MN=j("untitledTextEditorService"),sg=class extends N{constructor(t,n){super();this.instantiationService=t;this.configurationService=n}static UNTITLED_WITHOUT_ASSOCIATED_RESOURCE_REGEX=/Untitled-\d+/;_onDidChangeDirty=this._register(new T);onDidChangeDirty=this._onDidChangeDirty.event;_onDidChangeEncoding=this._register(new T);onDidChangeEncoding=this._onDidChangeEncoding.event;_onDidCreate=this._register(new T);onDidCreate=this._onDidCreate.event;_onWillDispose=this._register(new T);onWillDispose=this._onWillDispose.event;_onDidChangeLabel=this._register(new T);onDidChangeLabel=this._onDidChangeLabel.event;mapResourceToModel=new bi;get(t){return this.mapResourceToModel.get(t)}getValue(t){return this.get(t)?.textEditorModel?.getValue()}async resolve(t){let n=this.doCreateOrGet(t);return await n.resolve(),n}create(t){return this.doCreateOrGet(t)}doCreateOrGet(t=Object.create(null)){let n=this.massageOptions(t);return n.untitledResource&&this.mapResourceToModel.has(n.untitledResource)?this.mapResourceToModel.get(n.untitledResource):this.doCreate(n)}massageOptions(t){let n=Object.create(null);if(t.associatedResource?(n.untitledResource=Z.from({scheme:ye.untitled,authority:t.associatedResource.authority,fragment:t.associatedResource.fragment,path:t.associatedResource.path,query:t.associatedResource.query}),n.associatedResource=t.associatedResource):t.untitledResource?.scheme===ye.untitled&&(n.untitledResource=t.untitledResource),t.languageId)n.languageId=t.languageId;else if(!n.associatedResource){let i=this.configurationService.getValue();i.files?.defaultLanguage&&(n.languageId=i.files.defaultLanguage)}return n.encoding=t.encoding,n.initialValue=t.initialValue,n}doCreate(t){let n=t.untitledResource;if(!n){let o=1;do n=Z.from({scheme:ye.untitled,path:`Untitled-${o}`}),o++;while(this.mapResourceToModel.has(n))}let i=this._register(this.instantiationService.createInstance(rl,n,!!t.associatedResource,t.initialValue,t.languageId,t.encoding));return this.registerModel(i),i}registerModel(t){let n=new X;n.add(t.onDidChangeDirty(()=>this._onDidChangeDirty.fire(t))),n.add(t.onDidChangeName(()=>this._onDidChangeLabel.fire(t))),n.add(t.onDidChangeEncoding(()=>this._onDidChangeEncoding.fire(t))),n.add(t.onWillDispose(()=>this._onWillDispose.fire(t))),z.once(t.onWillDispose)(()=>{this.mapResourceToModel.delete(t.resource),n.dispose()}),this.mapResourceToModel.set(t.resource,t),this._onDidCreate.fire(t),t.isDirty()&&this._onDidChangeDirty.fire(t)}isUntitledWithAssociatedResource(t){return t.scheme===ye.untitled&&t.path.length>1&&!sg.UNTITLED_WITHOUT_ASSOCIATED_RESOURCE_REGEX.test(t.path)}canDispose(t){return t.isDisposed()?!0:this.doCanDispose(t)}async doCanDispose(t){return t.isDirty()?(await z.toPromise(t.onDidChangeDirty),this.canDispose(t)):!0}};sg=_([y(0,we),y(1,Ge)],sg);Cn(MN,sg,1);var q_=eo,sl=j("notificationService");var ON=j("progressService");var oot=Object.freeze({total(){},worked(){},done(){}}),A7=class{constructor(e){this.callback=e}static None=Object.freeze({report(){}});_value;get value(){return this._value}report(e){this._value=e,this.callback(this._value)}};var Y_=class extends N{deferred=new Fl;reporter;lastStep;constructor(e,t){super(),t.withProgress(e,n=>(this.reporter=n,this.lastStep&&n.report(this.lastStep),this.deferred.p)),this._register(me(()=>this.deferred.complete()))}report(e){this.reporter?this.reporter.report(e):this.lastStep=e}};Y_=_([y(1,ON)],Y_);var N7=j("editorProgressService");var rb=class extends N{constructor(t,n){super();this.logService=t;this.configurationService=n}participants=new mi;addFileOperationParticipant(t){let n=this.participants.push(t);return me(()=>n())}async participate(t,n,i,o){let s=this.configurationService.getValue("files.participants.timeout");if(!(typeof s!="number"||s<=0))for(let a of this.participants)try{await a.participate(t,n,i,s,o)}catch(l){this.logService.warn(l)}}dispose(){this.participants.clear(),super.dispose()}};rb=_([y(0,Vt),y(1,Ge)],rb);var Hr=class extends N{constructor(t,n,i,o){super();this.getExpression=t;this.shouldUpdate=n;this.contextService=i;this.configurationService=o;this.updateExpressions(!1),this.registerListeners()}static NO_FOLDER=null;_onExpressionChange=this._register(new T);onExpressionChange=this._onExpressionChange.event;mapFolderToParsedExpression=new Map;mapFolderToConfiguredExpression=new Map;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>{this.shouldUpdate(t)&&this.updateExpressions(!0)})),this._register(this.contextService.onDidChangeWorkspaceFolders(()=>this.updateExpressions(!0)))}updateExpressions(t){let n=!1;for(let a of this.contextService.getWorkspace().folders){let l=a.uri.toString(),d=this.doGetExpression(a.uri),c=this.mapFolderToConfiguredExpression.get(l);d?(!c||!wn(c.expression,d.expression))&&(n=!0,this.mapFolderToParsedExpression.set(l,Rh(d.expression)),this.mapFolderToConfiguredExpression.set(l,d)):c&&(n=!0,this.mapFolderToParsedExpression.delete(l),this.mapFolderToConfiguredExpression.delete(l))}let i=new Rx(this.contextService.getWorkspace().folders.map(a=>a.uri));for(let[a]of this.mapFolderToConfiguredExpression)a!==Hr.NO_FOLDER&&(i.has(Z.parse(a))||(this.mapFolderToParsedExpression.delete(a),this.mapFolderToConfiguredExpression.delete(a),n=!0));let o=this.doGetExpression(void 0),s=this.mapFolderToConfiguredExpression.get(Hr.NO_FOLDER);o?(!s||!wn(s.expression,o.expression))&&(n=!0,this.mapFolderToParsedExpression.set(Hr.NO_FOLDER,Rh(o.expression)),this.mapFolderToConfiguredExpression.set(Hr.NO_FOLDER,o)):s&&(n=!0,this.mapFolderToParsedExpression.delete(Hr.NO_FOLDER),this.mapFolderToConfiguredExpression.delete(Hr.NO_FOLDER)),t&&n&&this._onExpressionChange.fire()}doGetExpression(t){let n=this.getExpression(t);if(!n)return;let i=Object.keys(n);if(i.length===0)return;let o=!1,s=Object.create(null);for(let a of i){o||(o=lu(a));let l=a,d=MH(l,!0);if(d){let c=d.toLowerCase();d!==d.toLowerCase()&&(l=`${c}${l.substring(1)}`)}s[l]=n[a]}return{expression:s,hasAbsolutePath:o}}matches(t,n){if(this.mapFolderToParsedExpression.size===0)return!1;let i=this.contextService.getWorkspaceFolder(t),o,s;if(i&&this.mapFolderToParsedExpression.has(i.uri.toString())?(o=this.mapFolderToParsedExpression.get(i.uri.toString()),s=this.mapFolderToConfiguredExpression.get(i.uri.toString())):(o=this.mapFolderToParsedExpression.get(Hr.NO_FOLDER),s=this.mapFolderToConfiguredExpression.get(Hr.NO_FOLDER)),!o)return!1;let a;return i?a=Su(i.uri,t):a=this.uriToPath(t),typeof a=="string"&&o(a,void 0,n)?!0:a!==this.uriToPath(t)&&s?.hasAbsolutePath?!!o(this.uriToPath(t),void 0,n):!1}uriToPath(t){return t.scheme===ye.file?t.fsPath:t.path}};Hr=_([y(2,fn),y(3,Ge)],Hr);var dQ=new B("autoSaveAfterShortDelayContext",!1,!0);var Cd=j("filesConfigurationService"),Ur=class extends N{constructor(t,n,i,o,s,a,l,d){super();this.contextKeyService=t;this.configurationService=n;this.contextService=i;this.environmentService=o;this.uriIdentityService=s;this.fileService=a;this.markerService=l;this.textResourceConfigurationService=d;let c=n.getValue();this.currentGlobalAutoSaveConfiguration=this.computeAutoSaveConfiguration(void 0,c.files),this.currentFilesAssociationConfiguration=c?.files?.associations,this.currentHotExitConfiguration=c?.files?.hotExit||Hf.ON_EXIT,this.onFilesConfigurationChange(c,!1),this.registerListeners()}static DEFAULT_AUTO_SAVE_MODE=Ri?il.AFTER_DELAY:il.OFF;static DEFAULT_AUTO_SAVE_DELAY=1e3;static READONLY_MESSAGES={providerReadonly:{value:u("providerReadonly","Editor is read-only because the file system of the file is read-only."),isTrusted:!0},sessionReadonly:{value:u({key:"sessionReadonly",comment:['Please do not translate the word "command", it is part of our internal syntax which must not change','{Locked="](command:{0})"}']},"Editor is read-only because the file was set read-only in this session. [Click here](command:{0}) to set writeable.","workbench.action.files.setActiveEditorWriteableInSession"),isTrusted:!0},configuredReadonly:{value:u({key:"configuredReadonly",comment:['Please do not translate the word "command", it is part of our internal syntax which must not change','{Locked="](command:{0})"}']},"Editor is read-only because the file was set read-only via settings. [Click here](command:{0}) to configure or [toggle for this session](command:{1}).",`workbench.action.openSettings?${encodeURIComponent('["files.readonly"]')}`,"workbench.action.files.toggleActiveEditorReadonlyInSession"),isTrusted:!0},fileLocked:{value:u({key:"fileLocked",comment:['Please do not translate the word "command", it is part of our internal syntax which must not change','{Locked="](command:{0})"}']},"Editor is read-only because of file permissions. [Click here](command:{0}) to set writeable anyway.","workbench.action.files.setActiveEditorWriteableInSession"),isTrusted:!0},fileReadonly:{value:u("fileReadonly","Editor is read-only because the file is read-only."),isTrusted:!0}};_onDidChangeAutoSaveConfiguration=this._register(new T);onDidChangeAutoSaveConfiguration=this._onDidChangeAutoSaveConfiguration.event;_onDidChangeAutoSaveDisabled=this._register(new T);onDidChangeAutoSaveDisabled=this._onDidChangeAutoSaveDisabled.event;_onDidChangeFilesAssociation=this._register(new T);onDidChangeFilesAssociation=this._onDidChangeFilesAssociation.event;_onDidChangeReadonly=this._register(new T);onDidChangeReadonly=this._onDidChangeReadonly.event;currentGlobalAutoSaveConfiguration;currentFilesAssociationConfiguration;currentHotExitConfiguration;autoSaveConfigurationCache=new Po(1e3);autoSaveDisabledOverrides=new bi;autoSaveAfterShortDelayContext=dQ.bindTo(this.contextKeyService);readonlyIncludeMatcher=this._register(new yy(()=>this.createReadonlyMatcher(fK)));readonlyExcludeMatcher=this._register(new yy(()=>this.createReadonlyMatcher(bK)));configuredReadonlyFromPermissions;sessionReadonlyOverrides=new bi(t=>this.uriIdentityService.extUri.getComparisonKey(t));createReadonlyMatcher(t){let n=this._register(new Hr(i=>this.configurationService.getValue(t,{resource:i}),i=>i.affectsConfiguration(t),this.contextService,this.configurationService));return this._register(n.onExpressionChange(()=>this._onDidChangeReadonly.fire())),n}isReadonly(t,n){let i=this.fileService.getProvider(t.scheme);if(i&&hK(i))return i.readOnlyMessage??Ur.READONLY_MESSAGES.providerReadonly;let o=this.sessionReadonlyOverrides.get(t);return typeof o=="boolean"?o===!0?Ur.READONLY_MESSAGES.sessionReadonly:!1:this.uriIdentityService.extUri.isEqualOrParent(t,this.environmentService.userRoamingDataHome)||this.uriIdentityService.extUri.isEqual(t,this.contextService.getWorkspace().configuration??void 0)?!1:this.readonlyIncludeMatcher.value.matches(t)?this.readonlyExcludeMatcher.value.matches(t)?!1:Ur.READONLY_MESSAGES.configuredReadonly:this.configuredReadonlyFromPermissions&&n?.locked?Ur.READONLY_MESSAGES.fileLocked:n?.readonly?Ur.READONLY_MESSAGES.fileReadonly:!1}async updateReadonly(t,n){if(n==="toggle"){let i;try{i=await this.fileService.resolve(t,{resolveMetadata:!0})}catch{}n=!this.isReadonly(t,i)}n==="reset"?this.sessionReadonlyOverrides.delete(t):this.sessionReadonlyOverrides.set(t,n),this._onDidChangeReadonly.fire()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>{t.affectsConfiguration("files")&&this.onFilesConfigurationChange(this.configurationService.getValue(),!0)}))}onFilesConfigurationChange(t,n){this.currentGlobalAutoSaveConfiguration=this.computeAutoSaveConfiguration(void 0,t.files),this.autoSaveConfigurationCache.clear(),this.autoSaveAfterShortDelayContext.set(this.getAutoSaveMode(void 0).mode===1),n&&this._onDidChangeAutoSaveConfiguration.fire();let i=t?.files?.associations;wn(this.currentFilesAssociationConfiguration,i)||(this.currentFilesAssociationConfiguration=i,n&&this._onDidChangeFilesAssociation.fire());let o=t?.files?.hotExit;o===Hf.OFF||o===Hf.ON_EXIT_AND_WINDOW_CLOSE?this.currentHotExitConfiguration=o:this.currentHotExitConfiguration=Hf.ON_EXIT;let s=!!t?.files?.readonlyFromPermissions;s!==!!this.configuredReadonlyFromPermissions&&(this.configuredReadonlyFromPermissions=s,n&&this._onDidChangeReadonly.fire())}getAutoSaveConfiguration(t){let n=this.toResource(t);if(n){let i=this.autoSaveConfigurationCache.get(n);return i||(i=this.computeAutoSaveConfiguration(n,this.textResourceConfigurationService.getValue(n,"files")),this.autoSaveConfigurationCache.set(n,i)),i}return this.currentGlobalAutoSaveConfiguration}computeAutoSaveConfiguration(t,n){let i,o,s,a,l,d;switch(n?.autoSave??Ur.DEFAULT_AUTO_SAVE_MODE){case il.AFTER_DELAY:{i="afterDelay",o=typeof n?.autoSaveDelay=="number"&&n.autoSaveDelay>=0?n.autoSaveDelay:Ur.DEFAULT_AUTO_SAVE_DELAY,d=o<=Ur.DEFAULT_AUTO_SAVE_DELAY;break}case il.ON_FOCUS_CHANGE:i="onFocusChange";break;case il.ON_WINDOW_CHANGE:i="onWindowChange";break}return n?.autoSaveWorkspaceFilesOnly===!0&&(s=!0,t&&!this.contextService.isInsideWorkspace(t)&&(l=!0,d=void 0)),n?.autoSaveWhenNoErrors===!0&&(a=!0,d=void 0),{autoSave:i,autoSaveDelay:o,autoSaveWorkspaceFilesOnly:s,autoSaveWhenNoErrors:a,isOutOfWorkspace:l,isShortAutoSaveDelay:d}}toResource(t){return t instanceof wr?pp.getOriginalUri(t,{supportSideBySide:1}):t}hasShortAutoSaveDelay(t){let n=this.toResource(t);return this.getAutoSaveConfiguration(n).isShortAutoSaveDelay?!n||!this.autoSaveDisabledOverrides.has(n):!1}getAutoSaveMode(t,n){let i=this.toResource(t);if(i&&this.autoSaveDisabledOverrides.has(i))return{mode:0,reason:4};let o=this.getAutoSaveConfiguration(i);if(typeof o.autoSave>"u")return{mode:0,reason:1};if(typeof n=="number"&&(o.autoSave==="afterDelay"&&n!==2||o.autoSave==="onFocusChange"&&n!==3&&n!==4||o.autoSave==="onWindowChange"&&n!==4))return{mode:0,reason:1};if(i){if(o.autoSaveWorkspaceFilesOnly&&o.isOutOfWorkspace)return{mode:0,reason:2};if(o.autoSaveWhenNoErrors&&this.markerService.read({resource:i,take:1,severities:8}).length>0)return{mode:0,reason:3}}switch(o.autoSave){case"afterDelay":return typeof o.autoSaveDelay=="number"&&o.autoSaveDelay<=Ur.DEFAULT_AUTO_SAVE_DELAY?{mode:o.autoSaveWhenNoErrors?2:1}:{mode:2};case"onFocusChange":return{mode:3};case"onWindowChange":return{mode:4}}}async toggleAutoSave(){let t=this.configurationService.getValue("files.autoSave"),n;return[il.AFTER_DELAY,il.ON_FOCUS_CHANGE,il.ON_WINDOW_CHANGE].some(i=>i===t)?n=il.OFF:n=il.AFTER_DELAY,this.configurationService.updateValue("files.autoSave",n)}disableAutoSave(t){let n=this.toResource(t);if(!n)return N.None;let i=this.autoSaveDisabledOverrides.get(n)??0;return this.autoSaveDisabledOverrides.set(n,i+1),i===0&&this._onDidChangeAutoSaveDisabled.fire(n),me(()=>{let o=this.autoSaveDisabledOverrides.get(n)??0;o<=1?(this.autoSaveDisabledOverrides.delete(n),this._onDidChangeAutoSaveDisabled.fire(n)):this.autoSaveDisabledOverrides.set(n,o-1)})}get isHotExitEnabled(){return this.contextService.getWorkspace().transient?!1:this.currentHotExitConfiguration!==Hf.OFF}get hotExitConfiguration(){return this.currentHotExitConfiguration}preventSaveConflicts(t,n){return this.configurationService.getValue("files.saveConflictResolution",{resource:t,overrideIdentifier:n})!=="overwriteFileOnDisk"}};Ur=_([y(0,Ne),y(1,Ge),y(2,fn),y(3,di),y(4,ol),y(5,nn),y(6,aI),y(7,Vs)],Ur);Cn(Cd,Ur,0);var PN=j("workingCopyEditorService"),mS=class extends N{constructor(t){super();this.editorService=t}_onDidRegisterHandler=this._register(new T);onDidRegisterHandler=this._onDidRegisterHandler.event;handlers=new Set;registerHandler(t){return this.handlers.add(t),this._onDidRegisterHandler.fire(t),me(()=>this.handlers.delete(t))}findEditor(t){for(let n of this.editorService.getEditors(0))if(this.isOpen(t,n.editor))return n}isOpen(t,n){for(let i of this.handlers)if(i.isOpen(t,n))return!0;return!1}};mS=_([y(0,vt)],mS);Cn(PN,mS,1);var F7=j("elevatedFileService");var sb=class extends N{constructor(t,n){super();this.resource=t;this.fileService=n;this._register(this.fileService.onDidFilesChange(i=>this.onDidFilesChange(i)))}_onDidChangeOrphaned=this._register(new T);onDidChangeOrphaned=this._onDidChangeOrphaned.event;orphaned=!1;isOrphaned(){return this.orphaned}async onDidFilesChange(t){let n=!1,i;if(this.orphaned?t.contains(this.resource,1)&&(i=!1,n=!0):t.contains(this.resource,2)&&(i=!0,n=!0),n&&this.orphaned!==i){let o=!1;i&&(await po(100,Yt.None),this.isDisposed()?o=!0:o=!await this.fileService.exists(this.resource)),this.orphaned!==o&&!this.isDisposed()&&this.setOrphaned(o)}}setOrphaned(t){this.orphaned!==t&&(this.orphaned=t,this._onDidChangeOrphaned.fire())}_onWillDispose=this._register(new T);onWillDispose=this._onWillDispose.event;isDisposed(){return this._store.isDisposed}dispose(){this.orphaned=!1,this._onWillDispose.fire(),super.dispose()}isModified(){return this.isDirty()}};sb=_([y(1,nn)],sb);var ag=class extends sb{constructor(t,n,i,o,s,a,l,d,c,p,h,g,f,m,b,v){super(n,a);this.typeId=t;this.name=i;this.modelFactory=o;this.externalResolver=s;this.logService=l;this.workingCopyFileService=d;this.filesConfigurationService=c;this.workingCopyBackupService=p;this.notificationService=g;this.workingCopyEditorService=f;this.editorService=m;this.elevatedFileService=b;this.progressService=v;this._register(h.registerWorkingCopy(this)),this.registerListeners()}capabilities=0;_model=void 0;get model(){return this._model}_onDidChangeContent=this._register(new T);onDidChangeContent=this._onDidChangeContent.event;_onDidResolve=this._register(new T);onDidResolve=this._onDidResolve.event;_onDidChangeDirty=this._register(new T);onDidChangeDirty=this._onDidChangeDirty.event;_onDidSaveError=this._register(new T);onDidSaveError=this._onDidSaveError.event;_onDidSave=this._register(new T);onDidSave=this._onDidSave.event;_onDidRevert=this._register(new T);onDidRevert=this._onDidRevert.event;_onDidChangeReadonly=this._register(new T);onDidChangeReadonly=this._onDidChangeReadonly.event;registerListeners(){this._register(this.filesConfigurationService.onDidChangeReadonly(()=>this._onDidChangeReadonly.fire()))}dirty=!1;savedVersionId;isDirty(){return this.dirty}markModified(){this.setDirty(!0)}setDirty(t){if(!this.isResolved())return;let n=this.dirty;this.doSetDirty(t),t!==n&&this._onDidChangeDirty.fire()}doSetDirty(t){let n=this.dirty,i=this.inConflictMode,o=this.inErrorMode,s=this.savedVersionId;return t?this.dirty=!0:(this.dirty=!1,this.inConflictMode=!1,this.inErrorMode=!1,this.isResolved()&&(this.savedVersionId=this.model.versionId)),()=>{this.dirty=n,this.inConflictMode=i,this.inErrorMode=o,this.savedVersionId=s}}lastResolvedFileStat;isResolved(){return!!this.model}async resolve(t){if(this.trace("resolve() - enter"),this.isDisposed()){this.trace("resolve() - exit - without resolving because file working copy is disposed");return}if(!t?.contents&&(this.dirty||this.saveSequentializer.isRunning())){this.trace("resolve() - exit - without resolving because file working copy is dirty or being saved");return}return this.doResolve(t)}async doResolve(t){if(t?.contents)return this.resolveFromBuffer(t.contents);if(!(!this.isResolved()&&await this.resolveFromBackup()))return this.resolveFromFile(t)}async resolveFromBuffer(t){this.trace("resolveFromBuffer()");let n,i,o,s;try{let a=await this.fileService.stat(this.resource);n=a.mtime,i=a.ctime,o=a.size,s=a.etag,this.setOrphaned(!1)}catch(a){n=Date.now(),i=Date.now(),o=0,s=YI,this.setOrphaned(a.fileOperationResult===1)}return this.resolveFromContent({resource:this.resource,name:this.name,mtime:n,ctime:i,size:o,etag:s,value:t,readonly:!1,locked:!1},!0)}async resolveFromBackup(){let t=await this.workingCopyBackupService.resolve(this);return this.isResolved()?(this.trace("resolveFromBackup() - exit - withoutresolving because previously new file working copy got created meanwhile"),!0):t?(await this.doResolveFromBackup(t),!0):!1}async doResolveFromBackup(t){this.trace("doResolveFromBackup()"),await this.resolveFromContent({resource:this.resource,name:this.name,mtime:t.meta?t.meta.mtime:Date.now(),ctime:t.meta?t.meta.ctime:Date.now(),size:t.meta?t.meta.size:0,etag:t.meta?t.meta.etag:YI,value:t.value,readonly:!1,locked:!1},!0),t.meta&&t.meta.orphaned&&this.setOrphaned(!0)}async resolveFromFile(t){this.trace("resolveFromFile()");let n=t?.forceReadFromFile,i;n?i=YI:this.lastResolvedFileStat&&(i=this.lastResolvedFileStat.etag);let o=this.versionId;try{let s=await this.fileService.readFileStream(this.resource,{etag:i,limits:t?.limits});if(this.setOrphaned(!1),o!==this.versionId){this.trace("resolveFromFile() - exit - without resolving because file working copy content changed");return}await this.resolveFromContent(s,!1)}catch(s){let a=s.fileOperationResult;if(this.setOrphaned(a===1),this.isResolved()&&a===2){s instanceof t_&&this.updateLastResolvedFileStat(s.stat);return}if(this.isResolved()&&a===1&&!n)return;throw s}}async resolveFromContent(t,n){if(this.trace("resolveFromContent() - enter"),this.isDisposed()){this.trace("resolveFromContent() - exit - because working copy is disposed");return}this.updateLastResolvedFileStat({resource:this.resource,name:t.name,mtime:t.mtime,ctime:t.ctime,size:t.size,etag:t.etag,readonly:t.readonly,locked:t.locked,isFile:!0,isDirectory:!1,isSymbolicLink:!1,children:void 0}),this.isResolved()?await this.doUpdateModel(t.value):await this.doCreateModel(t.value),this.setDirty(!!n),this._onDidResolve.fire()}async doCreateModel(t){this.trace("doCreateModel()"),this._model=this._register(await this.modelFactory.createModel(this.resource,t,Yt.None)),this.installModelListeners(this._model)}ignoreDirtyOnModelContentChange=!1;async doUpdateModel(t){this.trace("doUpdateModel()"),this.ignoreDirtyOnModelContentChange=!0;try{await this.model?.update(t,Yt.None)}finally{this.ignoreDirtyOnModelContentChange=!1}}installModelListeners(t){this._register(t.onDidChangeContent(n=>this.onModelContentChanged(t,n.isUndoing||n.isRedoing))),this._register(t.onWillDispose(()=>this.dispose()))}onModelContentChanged(t,n){if(this.trace("onModelContentChanged() - enter"),this.versionId++,this.trace(`onModelContentChanged() - new versionId ${this.versionId}`),n&&(this.lastContentChangeFromUndoRedo=Date.now()),!this.ignoreDirtyOnModelContentChange&&!this.isReadonly())if(t.versionId===this.savedVersionId){this.trace("onModelContentChanged() - model content changed back to last saved version");let i=this.dirty;this.setDirty(!1),i&&this._onDidRevert.fire()}else this.trace("onModelContentChanged() - model content changed and marked as dirty"),this.setDirty(!0);this._onDidChangeContent.fire()}async forceResolveFromFile(){this.isDisposed()||await this.externalResolver({forceReadFromFile:!0})}get backupDelay(){return this.model?.configuration?.backupDelay}async backup(t){let n;this.lastResolvedFileStat&&(n={mtime:this.lastResolvedFileStat.mtime,ctime:this.lastResolvedFileStat.ctime,size:this.lastResolvedFileStat.size,etag:this.lastResolvedFileStat.etag,orphaned:this.isOrphaned()});let i;return this.isResolved()&&(i=await Iy(this.model.snapshot(2,t),t)),{meta:n,content:i}}versionId=0;static UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD=500;lastContentChangeFromUndoRedo=void 0;saveSequentializer=new Yx;ignoreSaveFromSaveParticipants=!1;async save(t=Object.create(null)){return this.isResolved()?this.isReadonly()?(this.trace("save() - ignoring request for readonly resource"),!1):(this.hasState(3)||this.hasState(5))&&(t.reason===2||t.reason===3||t.reason===4)?(this.trace("save() - ignoring auto save request for file working copy that is in conflict or error"),!1):(this.trace("save() - enter"),await this.doSave(t),this.trace("save() - exit"),this.hasState(0)):!1}async doSave(t){typeof t.reason!="number"&&(t.reason=1);let n=this.versionId;if(this.trace(`doSave(${n}) - enter with versionId ${n}`),this.ignoreSaveFromSaveParticipants){this.trace(`doSave(${n}) - exit - refusing to save() recursively from save participant`);return}if(this.saveSequentializer.isRunning(n))return this.trace(`doSave(${n}) - exit - found a running save for versionId ${n}`),this.saveSequentializer.running;if(!t.force&&!this.dirty){this.trace(`doSave(${n}) - exit - because not dirty and/or versionId is different (this.isDirty: ${this.dirty}, this.versionId: ${this.versionId})`);return}if(this.saveSequentializer.isRunning())return this.trace(`doSave(${n}) - exit - because busy saving`),this.saveSequentializer.cancelRunning(),this.saveSequentializer.queue(()=>this.doSave(t));this.isResolved()&&this.model.pushStackElement();let i=new jn;return this.progressService.withProgress({title:u("saveParticipants","Saving '{0}'",this.name),location:10,cancellable:!0,delay:this.isDirty()?3e3:5e3},o=>this.doSaveSequential(n,t,o,i),()=>{i.cancel()}).finally(()=>{i.dispose()})}doSaveSequential(t,n,i,o){return this.saveSequentializer.run(t,(async()=>{if(this.isResolved()&&!n.skipSaveParticipants&&this.workingCopyFileService.hasSaveParticipants)try{if(n.reason===2&&typeof this.lastContentChangeFromUndoRedo=="number"){let l=Date.now()-this.lastContentChangeFromUndoRedo;l<ag.UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD&&await po(ag.UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD-l)}if(!o.token.isCancellationRequested){this.ignoreSaveFromSaveParticipants=!0;try{await this.workingCopyFileService.runSaveParticipants(this,{reason:n.reason??1,savedFrom:n.from},i,o.token)}finally{this.ignoreSaveFromSaveParticipants=!1}}}catch(l){this.logService.error(`[stored file working copy] runSaveParticipants(${t}) - resulted in an error: ${l.toString()}`,this.resource.toString(),this.typeId)}if(o.token.isCancellationRequested||this.isDisposed()||!this.isResolved())return;t=this.versionId,this.inErrorMode=!1,i.report({message:u("saveTextFile","Writing into file...")}),this.trace(`doSave(${t}) - before write()`);let s=ks(this.lastResolvedFileStat),a=this;return this.saveSequentializer.run(t,(async()=>{try{let l={mtime:s.mtime,etag:n.ignoreModifiedSince||!this.filesConfigurationService.preventSaveConflicts(s.resource)?YI:s.etag,unlock:n.writeUnlock},d;if(typeof a.model.save=="function")try{d=await a.model.save(l,o.token)}catch(c){if(o.token.isCancellationRequested)return;throw c}else{let c=await Iy(a.model.snapshot(1,o.token),o.token);if(o.token.isCancellationRequested)return;o.dispose(),n?.writeElevated&&this.elevatedFileService.isSupported(s.resource)?d=await this.elevatedFileService.writeFileElevated(s.resource,ks(c),l):d=await this.fileService.writeFile(s.resource,ks(c),l)}this.handleSaveSuccess(d,t,n)}catch(l){this.handleSaveError(l,t,n)}})(),()=>o.cancel())})(),()=>o.cancel())}handleSaveSuccess(t,n,i){this.updateLastResolvedFileStat(t),n===this.versionId?(this.trace(`handleSaveSuccess(${n}) - setting dirty to false because versionId did not change`),this.setDirty(!1)):this.trace(`handleSaveSuccess(${n}) - not setting dirty to false because versionId did change meanwhile`),this.setOrphaned(!1),this._onDidSave.fire({reason:i.reason,stat:t,source:i.source})}handleSaveError(t,n,i){if((i.ignoreErrorHandler?this.logService.trace:this.logService.error).apply(this.logService,[`[stored file working copy] handleSaveError(${n}) - exit - resulted in a save error: ${t.toString()}`,this.resource.toString(),this.typeId]),i.ignoreErrorHandler)throw t;this.setDirty(!0),this.inErrorMode=!0,t.fileOperationResult===3&&(this.inConflictMode=!0),this.doHandleSaveError(t,i),this._onDidSaveError.fire()}doHandleSaveError(t,n){let i=t,o=[],s;if(i.fileOperationResult===3)s=u("staleSaveError","Failed to save '{0}': The content of the file is newer. Do you want to overwrite the file with your changes?",this.name),o.push(pc({id:"fileWorkingCopy.overwrite",label:u("overwrite","Overwrite"),run:()=>this.save({...n,ignoreModifiedSince:!0,reason:1})})),o.push(pc({id:"fileWorkingCopy.revert",label:u("revert","Revert"),run:()=>this.revert()}));else{let d=i.fileOperationResult===5,c=d&&i.options?.unlock,p=i.fileOperationResult===6,h=this.elevatedFileService.isSupported(this.resource);RP(t)&&o.push(...t.actions),h&&(p||c)?o.push(pc({id:"fileWorkingCopy.saveElevated",label:c?It?u("overwriteElevated","Overwrite as Admin..."):u("overwriteElevatedSudo","Overwrite as Sudo..."):It?u("saveElevated","Retry as Admin..."):u("saveElevatedSudo","Retry as Sudo..."),run:()=>{this.save({...n,writeElevated:!0,writeUnlock:c,reason:1})}})):d?o.push(pc({id:"fileWorkingCopy.unlock",label:u("overwrite","Overwrite"),run:()=>this.save({...n,writeUnlock:!0,reason:1})})):o.push(pc({id:"fileWorkingCopy.retry",label:u("retry","Retry"),run:()=>this.save({...n,reason:1})})),o.push(pc({id:"fileWorkingCopy.saveAs",label:u("saveAs","Save As..."),run:async()=>{let g=this.workingCopyEditorService.findEditor(this);g&&((await this.editorService.save(g,{saveAs:!0,reason:1})).success||this.doHandleSaveError(t,n))}})),o.push(pc({id:"fileWorkingCopy.revert",label:u("revert","Revert"),run:()=>this.revert()})),d?c&&h?s=It?u("readonlySaveErrorAdmin","Failed to save '{0}': File is read-only. Select 'Overwrite as Admin' to retry as administrator.",this.name):u("readonlySaveErrorSudo","Failed to save '{0}': File is read-only. Select 'Overwrite as Sudo' to retry as superuser.",this.name):s=u("readonlySaveError","Failed to save '{0}': File is read-only. Select 'Overwrite' to attempt to make it writeable.",this.name):h&&p?s=It?u("permissionDeniedSaveError","Failed to save '{0}': Insufficient permissions. Select 'Retry as Admin' to retry as administrator.",this.name):u("permissionDeniedSaveErrorSudo","Failed to save '{0}': Insufficient permissions. Select 'Retry as Sudo' to retry as superuser.",this.name):s=u({key:"genericSaveError",comment:["{0} is the resource that failed to save and {1} the error message"]},"Failed to save '{0}': {1}",this.name,gw(t,!1))}let a=this.notificationService.notify({id:`${Os(this.resource.toString())}`,severity:q_.Error,message:s,actions:{primary:o}}),l=this._register(z.once(z.any(this.onDidSave,this.onDidRevert))(()=>a.close()));this._register(z.once(a.onDidClose)(()=>l.dispose()))}updateLastResolvedFileStat(t){let n=this.isReadonly();this.lastResolvedFileStat?this.lastResolvedFileStat.mtime<=t.mtime?this.lastResolvedFileStat=t:this.lastResolvedFileStat={...this.lastResolvedFileStat,readonly:t.readonly,locked:t.locked}:this.lastResolvedFileStat=t,this.isReadonly()!==n&&this._onDidChangeReadonly.fire()}async revert(t){if(!this.isResolved()||!this.dirty&&!t?.force)return;this.trace("revert()");let n=this.dirty,i=this.doSetDirty(!1);if(!t?.soft)try{await this.forceResolveFromFile()}catch(s){if(s.fileOperationResult!==1)throw i(),s}this._onDidRevert.fire(),n&&this._onDidChangeDirty.fire()}inConflictMode=!1;inErrorMode=!1;hasState(t){switch(t){case 3:return this.inConflictMode;case 1:return this.dirty;case 5:return this.inErrorMode;case 4:return this.isOrphaned();case 2:return this.saveSequentializer.isRunning();case 0:return!this.dirty}}async joinState(t){return this.saveSequentializer.running}isReadonly(){return this.filesConfigurationService.isReadonly(this.resource,this.lastResolvedFileStat)}trace(t){this.logService.trace(`[stored file working copy] ${t}`,this.resource.toString(),this.typeId)}dispose(){this.trace("dispose()"),this.inConflictMode=!1,this.inErrorMode=!1,this._model=void 0,super.dispose()}};ag=_([y(5,nn),y(6,Vt),y(7,NN),y(8,Cd),y(9,l_),y(10,up),y(11,sl),y(12,PN),y(13,vt),y(14,F7),y(15,ON)],ag);var ab=class extends N{constructor(t){super();this.logService=t}saveParticipants=[];get length(){return this.saveParticipants.length}addSaveParticipant(t){let n=fx(this.saveParticipants,t);return me(()=>n())}async participate(t,n,i,o){t.model?.pushStackElement();for(let s of this.saveParticipants){if(o.isCancellationRequested||t.isDisposed())break;try{let a=s.participate(t,n,i,o);await Iy(a,o)}catch(a){this.logService.warn(a)}}t.model?.pushStackElement()}dispose(){this.saveParticipants.splice(0,this.saveParticipants.length),super.dispose()}};ab=_([y(0,Vt)],ab);var NN=j("workingCopyFileService"),fS=class extends N{constructor(t,n,i,o){super();this.fileService=t;this.workingCopyService=n;this.instantiationService=i;this.uriIdentityService=o;this._register(this.registerWorkingCopyProvider(s=>this.workingCopyService.workingCopies.filter(a=>this.fileService.hasProvider(s)?this.uriIdentityService.extUri.isEqualOrParent(a.resource,s):this.uriIdentityService.extUri.isEqual(a.resource,s))))}_onWillRunWorkingCopyFileOperation=this._register(new pm);onWillRunWorkingCopyFileOperation=this._onWillRunWorkingCopyFileOperation.event;_onDidFailWorkingCopyFileOperation=this._register(new pm);onDidFailWorkingCopyFileOperation=this._onDidFailWorkingCopyFileOperation.event;_onDidRunWorkingCopyFileOperation=this._register(new pm);onDidRunWorkingCopyFileOperation=this._onDidRunWorkingCopyFileOperation.event;correlationIds=0;create(t,n,i){return this.doCreateFileOrFolder(t,!0,n,i)}createFolder(t,n,i){return this.doCreateFileOrFolder(t,!1,n,i)}async doCreateFileOrFolder(t,n,i,o){if(t.length===0)return[];if(n){let c=(await Ko.settled(t.map(p=>this.fileService.canCreateFile(p.resource,{overwrite:p.overwrite})))).find(p=>p instanceof Error);if(c instanceof Error)throw c}let s=t.map(d=>({target:d.resource}));await this.runFileOperationParticipants(s,0,o,i);let a={correlationId:this.correlationIds++,operation:0,files:s};await this._onWillRunWorkingCopyFileOperation.fireAsync(a,Yt.None);let l;try{n?l=await Ko.settled(t.map(d=>this.fileService.createFile(d.resource,d.contents,{overwrite:d.overwrite}))):l=await Ko.settled(t.map(d=>this.fileService.createFolder(d.resource)))}catch(d){throw await this._onDidFailWorkingCopyFileOperation.fireAsync(a,Yt.None),d}return await this._onDidRunWorkingCopyFileOperation.fireAsync(a,Yt.None),l}async move(t,n,i){return this.doMoveOrCopy(t,!0,n,i)}async copy(t,n,i){return this.doMoveOrCopy(t,!1,n,i)}async doMoveOrCopy(t,n,i,o){let s=[];for(let{file:{source:d,target:c},overwrite:p}of t){let h=await(n?this.fileService.canMove(d,c,p):this.fileService.canCopy(d,c,p));if(h instanceof Error)throw h}let a=t.map(d=>d.file);await this.runFileOperationParticipants(a,n?2:3,o,i);let l={correlationId:this.correlationIds++,operation:n?2:3,files:a};await this._onWillRunWorkingCopyFileOperation.fireAsync(l,Yt.None);try{for(let{file:{source:d,target:c},overwrite:p}of t){if(!this.uriIdentityService.extUri.isEqual(d,c)){let h=n?[...this.getDirty(d),...this.getDirty(c)]:this.getDirty(c);await Ko.settled(h.map(g=>g.revert({soft:!0})))}n?s.push(await this.fileService.move(d,c,p)):s.push(await this.fileService.copy(d,c,p))}}catch(d){throw await this._onDidFailWorkingCopyFileOperation.fireAsync(l,Yt.None),d}return await this._onDidRunWorkingCopyFileOperation.fireAsync(l,Yt.None),s}async delete(t,n,i){for(let a of t){let l=await this.fileService.canDelete(a.resource,{recursive:a.recursive,useTrash:a.useTrash});if(l instanceof Error)throw l}let o=t.map(a=>({target:a.resource}));await this.runFileOperationParticipants(o,1,i,n);let s={correlationId:this.correlationIds++,operation:1,files:o};await this._onWillRunWorkingCopyFileOperation.fireAsync(s,Yt.None);for(let a of t){let l=this.getDirty(a.resource);await Ko.settled(l.map(d=>d.revert({soft:!0})))}try{for(let a of t)await this.fileService.del(a.resource,{recursive:a.recursive,useTrash:a.useTrash})}catch(a){throw await this._onDidFailWorkingCopyFileOperation.fireAsync(s,Yt.None),a}await this._onDidRunWorkingCopyFileOperation.fireAsync(s,Yt.None)}fileOperationParticipants=this._register(this.instantiationService.createInstance(rb));addFileOperationParticipant(t){return this.fileOperationParticipants.addFileOperationParticipant(t)}runFileOperationParticipants(t,n,i,o){return this.fileOperationParticipants.participate(t,n,i,o)}saveParticipants=this._register(this.instantiationService.createInstance(ab));get hasSaveParticipants(){return this.saveParticipants.length>0}addSaveParticipant(t){return this.saveParticipants.addSaveParticipant(t)}runSaveParticipants(t,n,i,o){return this.saveParticipants.participate(t,n,i,o)}workingCopyProviders=[];registerWorkingCopyProvider(t){let n=fx(this.workingCopyProviders,t);return me(n)}getDirty(t){let n=new Set;for(let i of this.workingCopyProviders)for(let o of i(t))o.isDirty()&&n.add(o);return Array.from(n)}};fS=_([y(0,nn),y(1,up),y(2,we),y(3,ol)],fS);Cn(NN,fS,1);var Us=j("textFileService");var bS=class{_resolvedKeybindingItemBrand=void 0;resolvedKeybinding;chords;bubble;command;commandArgs;when;isDefault;extensionId;isBuiltinExtension;constructor(e,t,n,i,o,s,a){this.resolvedKeybinding=e,this.chords=e?B7(e.getDispatchChords()):[],e&&this.chords.length===0&&(this.chords=B7(e.getSingleModifierDispatchChords())),this.bubble=t?t.charCodeAt(0)===94:!1,this.command=this.bubble?t.substr(1):t,this.commandArgs=n,this.when=i,this.isDefault=o,this.extensionId=s,this.isBuiltinExtension=a}};function B7(r){let e=[];for(let t=0,n=r.length;t<n;t++){let i=r[t];if(!i)return[];e.push(i)}return e}var _n=j("keybindingService");var FN=".vscode",uQ="settings",oct=`${FN}/${uQ}.json`;var V7=[1],rct=[2,3,4,5,6],pQ=[3,4,5],H7=[1,...pQ],U7=[2,3,4,5,6],BN=[3,4,5,6],WN=[4,5,6],X_="tasks",W7="launch",z7=Object.create(null);z7[X_]=`${FN}/${X_}.json`;z7[W7]=`${FN}/${W7}.json`;var hQ=Object.create(null);hQ[X_]=`${X_}.json`;var pa=Ge;var Oc="workbench.settings.applyToAllProfiles";function VN(r,e){if(typeof e>"u")return;if(!(Array.isArray(e)?e:[e]).some(n=>gQ(r,n)))return u("invalidTypeError","Setting has an invalid type, expected {0}. Fix in JSON.",JSON.stringify(e))}function gQ(r,e){let t=typeof r;return e==="boolean"?t==="boolean":e==="object"?r&&!Array.isArray(r)&&t==="object":e==="null"?r===null:e==="array"?Array.isArray(r):e==="string"?t==="string":e==="number"||e==="integer"?t==="number":!0}var ha={startLineNumber:-1,startColumn:-1,endLineNumber:-1,endColumn:-1};function HN(r){return r.startLineNumber===-1&&r.startColumn===-1&&r.endLineNumber===-1&&r.endColumn===-1}var vS=class extends pd{_currentResultGroups=new Map;updateResultGroup(e,t){return t?this._currentResultGroups.set(e,t):this._currentResultGroups.delete(e),this.removeDuplicateResults(),this.update()}removeDuplicateResults(){let e=new Set;[...this._currentResultGroups.keys()].sort((t,n)=>this._currentResultGroups.get(t).order-this._currentResultGroups.get(n).order).forEach(t=>{let n=this._currentResultGroups.get(t);n.result.filterMatches=n.result.filterMatches.filter(i=>!e.has(i.setting.key)),n.result.filterMatches.forEach(i=>e.add(i.setting.key))})}filterSettings(e,t,n){let i=this.filterGroups,o=[];for(let s of i){let a=t(s);for(let l of s.sections)for(let d of l.settings){let c=n(d,s);(a||c)&&o.push({setting:d,matches:c&&c.matches,matchType:c?.matchType??0,score:c?.score??0})}}return o}getPreference(e){for(let t of this.settingsGroups)for(let n of t.sections)for(let i of n.settings)if(e===i.key)return i}collectMetadata(e){let t=Object.create(null),n=!1;return e.forEach(i=>{i.result.metadata&&(t[i.id]=i.result.metadata,n=!0)}),n?t:null}get filterGroups(){return this.settingsGroups}},yS=class extends vS{constructor(t,n){super();this._configurationTarget=n;this.settingsModel=t.object.textEditorModel,this._register(this.onWillDispose(()=>t.dispose())),this._register(this.settingsModel.onDidChangeContent(()=>{this._settingsGroups=void 0,this._onDidChangeGroups.fire()}))}_settingsGroups;settingsModel;_onDidChangeGroups=this._register(new T);onDidChangeGroups=this._onDidChangeGroups.event;get uri(){return this.settingsModel.uri}get configurationTarget(){return this._configurationTarget}get settingsGroups(){return this._settingsGroups||this.parse(),this._settingsGroups}get content(){return this.settingsModel.getValue()}findValueMatches(t,n){return this.settingsModel.findMatches(t,n.valueRange,!1,!1,null,!1).map(i=>i.range)}isSettingsProperty(t,n){return n.length===0}parse(){this._settingsGroups=K7(this.settingsModel,(t,n)=>this.isSettingsProperty(t,n))}update(){let t=[...this._currentResultGroups.values()];if(!t.length)return;let n=[],i=[];t.forEach(l=>{l.result.filterMatches.forEach(d=>{n.push(d.setting),d.matches&&i.push(...d.matches)})});let o,s=this.settingsGroups[0];s&&(o={id:s.id,range:s.range,sections:[{settings:n}],title:s.title,titleRange:s.titleRange,order:s.order,extensionInfo:s.extensionInfo});let a=this.collectMetadata(t);return{allGroups:this.settingsGroups,filteredGroups:o?[o]:[],matches:i,metadata:a}}},lb=class extends vS{constructor(t,n){super();this._defaultSettings=t;this._register(n.onDidChangeConfiguration(i=>{i.source===7&&(this.dirty=!0,this._onDidChangeGroups.fire())})),this._register(Te.as(In.Configuration).onDidSchemaChange(i=>{this.dirty=!0,this._onDidChangeGroups.fire()}))}_onDidChangeGroups=this._register(new T);onDidChangeGroups=this._onDidChangeGroups.event;additionalGroups=[];dirty=!1;get filterGroups(){return this.settingsGroups.slice(1)}get settingsGroups(){let t=this._defaultSettings.getSettingsGroups(this.dirty);return this.dirty=!1,[...t,...this.additionalGroups]}setAdditionalGroups(t){this.additionalGroups=t}findValueMatches(t,n){return[]}update(){throw new Error("Not supported")}};lb=_([y(1,Ge)],lb);function K7(r,e){let t=[],n=null,i=null,o=[],s=[],a=-1,l={startLineNumber:0,startColumn:0,endLineNumber:0,endColumn:0};function d(p,h,g){if(Array.isArray(o)?o.push(p):i&&(o[i]=p),s.length===a+1||s.length===a+2&&n!==null){let f=s.length===a+1?t[t.length-1]:n.overrides[n.overrides.length-1];if(f){let m=r.getPositionAt(h),b=r.getPositionAt(h+g);f.value=p,f.valueRange={startLineNumber:m.lineNumber,startColumn:m.column,endLineNumber:b.lineNumber,endColumn:b.column},f.range=Object.assign(f.range,{endLineNumber:b.lineNumber,endColumn:b.column})}}}let c={onObjectBegin:(p,h)=>{if(e(i,s)){a=s.length;let f=r.getPositionAt(p);l.startLineNumber=f.lineNumber,l.startColumn=f.column}let g={};d(g,p,h),o=g,i=null,s.push(o)},onObjectProperty:(p,h,g)=>{if(i=p,s.length===a+1||s.length===a+2&&n!==null){let f=r.getPositionAt(h),m={description:[],descriptionIsMarkdown:!1,key:p,keyRange:{startLineNumber:f.lineNumber,startColumn:f.column+1,endLineNumber:f.lineNumber,endColumn:f.column+g},range:{startLineNumber:f.lineNumber,startColumn:f.column,endLineNumber:0,endColumn:0},value:null,valueRange:ha,descriptionRanges:[],overrides:[],overrideOf:n??void 0};s.length===a+1?(t.push(m),uc.test(p)&&(n=m)):n.overrides.push(m)}},onObjectEnd:(p,h)=>{if(o=s.pop(),a!==-1&&(s.length===a+1||s.length===a+2&&n!==null)){let g=s.length===a+1?t[t.length-1]:n.overrides[n.overrides.length-1];if(g){let f=r.getPositionAt(p+h);g.valueRange=Object.assign(g.valueRange,{endLineNumber:f.lineNumber,endColumn:f.column}),g.range=Object.assign(g.range,{endLineNumber:f.lineNumber,endColumn:f.column})}s.length===a+1&&(n=null)}if(s.length===a){let g=r.getPositionAt(p);l.endLineNumber=g.lineNumber,l.endColumn=g.column,a=-1}},onArrayBegin:(p,h)=>{let g=[];d(g,p,h),s.push(o),o=g,i=null},onArrayEnd:(p,h)=>{if(o=s.pop(),s.length===a+1||s.length===a+2&&n!==null){let g=s.length===a+1?t[t.length-1]:n.overrides[n.overrides.length-1];if(g){let f=r.getPositionAt(p+h);g.valueRange=Object.assign(g.valueRange,{endLineNumber:f.lineNumber,endColumn:f.column}),g.range=Object.assign(g.range,{endLineNumber:f.lineNumber,endColumn:f.column})}}},onLiteralValue:d,onError:p=>{let h=t[t.length-1];h&&(HN(h.range)||HN(h.keyRange)||HN(h.valueRange))&&t.pop()}};return r.isDisposed()||zI(r.getValue(),c),t.length>0?[{sections:[{settings:t}],title:"",titleRange:ha,range:l}]:[]}var Z_=class extends yS{_configurationGroups=[];get configurationGroups(){return this._configurationGroups}parse(){super.parse(),this._configurationGroups=K7(this.settingsModel,(e,t)=>t.length===0)}isSettingsProperty(e,t){return e==="settings"&&t.length===1}};var J_=class extends vS{constructor(t,n,i){super();this._uri=t;this.defaultSettings=i;this._register(i.onDidChange(()=>this._onDidChangeGroups.fire())),this._model=n.object.textEditorModel,this._register(this.onWillDispose(()=>n.dispose()))}_model;_onDidChangeGroups=this._register(new T);onDidChangeGroups=this._onDidChangeGroups.event;get uri(){return this._uri}get target(){return this.defaultSettings.target}get settingsGroups(){return this.defaultSettings.getSettingsGroups()}get filterGroups(){return this.settingsGroups.slice(1)}update(){if(this._model.isDisposed())return;let t=[...this._currentResultGroups.values()].sort((l,d)=>l.order-d.order),n=t.filter(l=>l.result.filterMatches.length),i=Mo(this.settingsGroups).range.endLineNumber+2,{settingsGroups:o,matches:s}=this.writeResultGroups(n,i),a=this.collectMetadata(t);return t.length?{allGroups:this.settingsGroups,filteredGroups:o,matches:s,metadata:a}:void 0}writeResultGroups(t,n){let i=n-1,o=new UN(i),s=[],a=[];t.length&&(o.pushLine(","),t.forEach(g=>{let f=this.getGroup(g);s.push(f),a.push(...this.writeSettingsGroupToBuilder(o,f,g.result.filterMatches))}));let l=o.getContent()+`
`,d=this._model.getLineCount(),c=new ze(n,1,n,1),p={text:l,forceMoveMarkers:!0,range:new D(n,1,d,1)};this._model.pushEditOperations([c],[p],()=>[c]);let h=Math.min(n+60,this._model.getLineCount());return this._model.tokenization.forceTokenization(h),{matches:a,settingsGroups:s}}writeSettingsGroupToBuilder(t,n,i){return i=i.map(s=>({setting:s.setting,score:s.score,matches:s.matches&&s.matches.map(a=>new D(a.startLineNumber-s.setting.range.startLineNumber,a.startColumn,a.endLineNumber-s.setting.range.startLineNumber,a.endColumn))})),t.pushGroup(n),i.map(s=>s.matches||[]).flatMap((s,a)=>{let l=n.sections[0].settings[a];return s.map(d=>new D(d.startLineNumber+l.range.startLineNumber,d.startColumn,d.endLineNumber+l.range.startLineNumber,d.endColumn))})}copySetting(t){return{description:t.description,scope:t.scope,type:t.type,enum:t.enum,enumDescriptions:t.enumDescriptions,key:t.key,value:t.value,range:t.range,overrides:[],overrideOf:t.overrideOf,tags:t.tags,deprecationMessage:t.deprecationMessage,keyRange:ha,valueRange:ha,descriptionIsMarkdown:void 0,descriptionRanges:[]}}findValueMatches(t,n){return[]}getPreference(t){for(let n of this.settingsGroups)for(let i of n.sections)for(let o of i.settings)if(o.key===t)return o}getGroup(t){return{id:t.id,range:ha,title:t.label,titleRange:ha,sections:[{settings:t.result.filterMatches.map(n=>this.copySetting(n.setting))}]}}},UN=class{constructor(e=0){this._rangeOffset=e;this._contentByLines=[]}_contentByLines;get lineCountWithOffset(){return this._contentByLines.length+this._rangeOffset}get lastLine(){return this._contentByLines[this._contentByLines.length-1]||""}pushLine(...e){this._contentByLines.push(...e)}pushGroup(e,t,n){this._contentByLines.push(t?"[{":"{");let i=this._pushGroup(e,"  ");if(i){let o=i.range.endLineNumber-this._rangeOffset,s=this._contentByLines[o-2];this._contentByLines[o-2]=s.substring(0,s.length-1)}this._contentByLines.push(n?"}]":"},")}_pushGroup(e,t){let n=null,i=this.lineCountWithOffset+1;for(let o of e.sections){if(o.title){let s=this.lineCountWithOffset+1;this.addDescription([o.title],t,this._contentByLines),o.titleRange={startLineNumber:s,startColumn:1,endLineNumber:this.lineCountWithOffset,endColumn:this.lastLine.length}}if(o.settings.length)for(let s of o.settings)this.pushSetting(s,t),n=s}return e.range={startLineNumber:i,startColumn:1,endLineNumber:this.lineCountWithOffset,endColumn:this.lastLine.length},n}getContent(){return this._contentByLines.join(`
`)}pushSetting(e,t){let n=this.lineCountWithOffset+1;this.pushSettingDescription(e,t);let i=t,o=JSON.stringify(e.key);i+=o,e.keyRange={startLineNumber:this.lineCountWithOffset+1,startColumn:i.indexOf(e.key)+1,endLineNumber:this.lineCountWithOffset+1,endColumn:e.key.length},i+=": ";let s=this.lineCountWithOffset+1;this.pushValue(e,i,t),e.valueRange={startLineNumber:s,startColumn:i.length+1,endLineNumber:this.lineCountWithOffset,endColumn:this.lastLine.length+1},this._contentByLines[this._contentByLines.length-1]+=",",this._contentByLines.push(""),e.range={startLineNumber:n,startColumn:1,endLineNumber:this.lineCountWithOffset,endColumn:this.lastLine.length}}pushSettingDescription(e,t){let n=s=>s.replace(/`#(.*)#`/g,(a,l)=>`\`${l}\``);e.descriptionRanges=[];let i=t+"// ",o=e.deprecationMessage?.split(/\n/g)??[];for(let s of[...o,...e.description])s=n(s),this._contentByLines.push(i+s),e.descriptionRanges.push({startLineNumber:this.lineCountWithOffset,startColumn:this.lastLine.indexOf(s)+1,endLineNumber:this.lineCountWithOffset,endColumn:this.lastLine.length});e.enum&&e.enumDescriptions?.some(s=>!!s)&&e.enumDescriptions.forEach((s,a)=>{let l=mQ(String(e.enum[a])),d=s?`${l}: ${n(s)}`:l,c=d.split(/\n/g);c[0]=" - "+c[0],this._contentByLines.push(...c.map(p=>`${t}// ${p}`)),e.descriptionRanges.push({startLineNumber:this.lineCountWithOffset,startColumn:this.lastLine.indexOf(d)+1,endLineNumber:this.lineCountWithOffset,endColumn:this.lastLine.length})})}pushValue(e,t,n){let i=JSON.stringify(e.value,null,n);if(i&&typeof e.value=="object")if(e.overrides&&e.overrides.length){this._contentByLines.push(t+" {");for(let a of e.overrides)this.pushSetting(a,n+n),this._contentByLines.pop();let o=e.overrides[e.overrides.length-1],s=this._contentByLines[o.range.endLineNumber-2];this._contentByLines[o.range.endLineNumber-2]=s.substring(0,s.length-1),this._contentByLines.push(n+"}")}else{let o=i.split(`
`);this._contentByLines.push(t+o[0]);for(let s=1;s<o.length;s++)this._contentByLines.push(n+o[s])}else this._contentByLines.push(t+i)}addDescription(e,t,n){for(let i of e)n.push(t+"// "+i)}};function mQ(r){return r&&r.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}function fQ(r){return"// "+u("defaultKeybindingsHeader","Override key bindings by placing them into your key bindings file.")+`
`+r.getDefaultKeybindingsContent()}var Q_=class{constructor(e,t){this._uri=e;this.keybindingService=t}_content;get uri(){return this._uri}get content(){return this._content||(this._content=fQ(this.keybindingService)),this._content}getPreference(){return null}dispose(){}};Q_=_([y(1,_n)],Q_);function j7(r){return{...r,override:al.id,pinned:!0}}var At=j("preferencesService"),$7="editor.contrib.defineKeybinding",zN=".vscode/settings.json",KN="workbench.settings.openDefaultSettings",GN="workbench.settings.useSplitJSON",q7="settings";var ys={EditorPane:"workbench.contributions.editors",EditorFactory:"workbench.contributions.editor.inputFactories"},al={id:"default",displayName:u("promptOpenWith.defaultEditor.displayName","Text Editor"),providerDisplayName:u("builtinProviderDisplayName","Built-in")};var Y7="workbench.editors.textDiffEditor",X7="workbench.editors.binaryResourceDiffEditor";function ib(r,e,t){for(let n of t.visibleEditorPanes)if(n.group.id===e&&r.matches(n.input))return n.getViewState()}function $_(r){if(yo(r))return!1;let e=r;return Z.isUri(e?.resource)}function Hs(r){if(yo(r))return!1;let e=r;return e?.original!==void 0&&e.modified!==void 0}function ob(r){if(yo(r))return!1;let e=r;return!e||e.resources&&!Array.isArray(e.resources)?!1:!!e.resources||!!e.multiDiffSource}function yd(r){if(yo(r)||Hs(r))return!1;let e=r;return e?.primary!==void 0&&e.secondary!==void 0}function Q7(r){if(yo(r))return!1;let e=r;return e?e.resource===void 0||e.resource.scheme===ye.untitled||e.forceUntitled===!0:!1}function Id(r){if(yo(r))return!1;let e=r;return Z.isUri(e?.base?.resource)&&Z.isUri(e?.input1?.resource)&&Z.isUri(e?.input2?.resource)&&Z.isUri(e?.result?.resource)}var jN=class{mapIdToSaveSource=new Map;registerSource(e,t){let n=this.mapIdToSaveSource.get(e);return n||(n={source:e,label:t},this.mapIdToSaveSource.set(e,n)),n.source}getSourceLabel(e){return this.mapIdToSaveSource.get(e)?.label??e}},qpt=new jN;var gS=class extends N{};function yo(r){return r instanceof gS}function vQ(r){let e=r;return Z.isUri(e?.preferredResource)}function yQ(r){let e=r;return yo(e?.primary)&&yo(e?.secondary)}function wN(r){let e=r;return yo(e?.modified)&&yo(e?.original)}var $N=class{getOriginalUri(e,t){if(!e)return;if(Id(e))return pp.getOriginalUri(e.result,t);if(t?.supportSideBySide){let{primary:i,secondary:o}=this.getSideEditors(e);if(i&&o){if(t?.supportSideBySide===3)return{primary:this.getOriginalUri(i,{filterByScheme:t.filterByScheme}),secondary:this.getOriginalUri(o,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===4)return this.getOriginalUri(i,{filterByScheme:t.filterByScheme})??this.getOriginalUri(o,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===1?i:o}}if(Hs(e)||ob(e)||yd(e)||Id(e))return;let n=vQ(e)?e.preferredResource:e.resource;return!n||!t||!t.filterByScheme?n:this.filterUri(n,t.filterByScheme)}getSideEditors(e){return yQ(e)||yd(e)?{primary:e.primary,secondary:e.secondary}:wN(e)||Hs(e)?{primary:e.modified,secondary:e.original}:{primary:void 0,secondary:void 0}}getCanonicalUri(e,t){if(!e)return;if(Id(e))return pp.getCanonicalUri(e.result,t);if(t?.supportSideBySide){let{primary:i,secondary:o}=this.getSideEditors(e);if(i&&o){if(t?.supportSideBySide===3)return{primary:this.getCanonicalUri(i,{filterByScheme:t.filterByScheme}),secondary:this.getCanonicalUri(o,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===4)return this.getCanonicalUri(i,{filterByScheme:t.filterByScheme})??this.getCanonicalUri(o,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===1?i:o}}if(Hs(e)||ob(e)||yd(e)||Id(e))return;let n=e.resource;return!n||!t||!t.filterByScheme?n:this.filterUri(n,t.filterByScheme)}filterUri(e,t){if(Array.isArray(t)){if(t.some(n=>e.scheme===n))return e}else if(t===e.scheme)return e}};var pp=new $N;var qN=class{instantiationService;fileEditorFactory;editorSerializerConstructors=new Map;editorSerializerInstances=new Map;start(e){let t=this.instantiationService=e.get(we);for(let[n,i]of this.editorSerializerConstructors)this.createEditorSerializer(n,i,t);this.editorSerializerConstructors.clear()}createEditorSerializer(e,t,n){let i=n.createInstance(t);this.editorSerializerInstances.set(e,i)}registerFileEditorFactory(e){if(this.fileEditorFactory)throw new Error("Can only register one file editor factory.");this.fileEditorFactory=e}getFileEditorFactory(){return ks(this.fileEditorFactory)}registerEditorSerializer(e,t){if(this.editorSerializerConstructors.has(e)||this.editorSerializerInstances.has(e))throw new Error(`A editor serializer with type ID '${e}' was already registered.`);return this.instantiationService?this.createEditorSerializer(e,t,this.instantiationService):this.editorSerializerConstructors.set(e,t),me(()=>{this.editorSerializerConstructors.delete(e),this.editorSerializerInstances.delete(e)})}getEditorSerializer(e){return this.editorSerializerInstances.get(typeof e=="string"?e:e.typeId)}};Te.add(ys.EditorFactory,new qN);var IQ="__$__isNewStorageMarker",eD="__$__targetStorageMarker",Io=j("storageService");function SQ(r){let e=r.get(eD);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}var Z7=class r extends N{constructor(t={flushInterval:r.DEFAULT_FLUSH_INTERVAL}){super();this.options=t}static DEFAULT_FLUSH_INTERVAL=60*1e3;_onDidChangeValue=this._register(new Qd);_onDidChangeTarget=this._register(new Qd);onDidChangeTarget=this._onDidChangeTarget.event;_onWillSaveState=this._register(new T);onWillSaveState=this._onWillSaveState.event;initializationPromise;flushWhenIdleScheduler=this._register(new Hn(()=>this.doFlushWhenIdle(),this.options.flushInterval));runFlushWhenIdle=this._register(new Qt);onDidChangeValue(t,n,i){return z.filter(this._onDidChangeValue.event,o=>o.scope===t&&(n===void 0||o.key===n),i)}doFlushWhenIdle(){this.runFlushWhenIdle.value=Cu(()=>{this.shouldFlushWhenIdle()&&this.flush(),this.flushWhenIdleScheduler.schedule()})}shouldFlushWhenIdle(){return!0}stopFlushWhenIdle(){rt([this.runFlushWhenIdle,this.flushWhenIdleScheduler])}initialize(){return this.initializationPromise||(this.initializationPromise=(async()=>{Vi("code/willInitStorage");try{await this.doInitialize()}finally{Vi("code/didInitStorage")}this.flushWhenIdleScheduler.schedule()})()),this.initializationPromise}emitDidChangeValue(t,n){let{key:i,external:o}=n;if(i===eD){switch(t){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:t})}else this._onDidChangeValue.fire({scope:t,key:i,target:this.getKeyTargets(t)[i],external:o})}emitWillSaveState(t){this._onWillSaveState.fire({reason:t})}get(t,n,i){return this.getStorage(n)?.get(t,i)}getBoolean(t,n,i){return this.getStorage(n)?.getBoolean(t,i)}getNumber(t,n,i){return this.getStorage(n)?.getNumber(t,i)}getObject(t,n,i){return this.getStorage(n)?.getObject(t,i)}storeAll(t,n){this.withPausedEmitters(()=>{for(let i of t)this.store(i.key,i.value,i.scope,i.target,n)})}store(t,n,i,o,s=!1){if(ln(n)){this.remove(t,i,s);return}this.withPausedEmitters(()=>{this.updateKeyTarget(t,i,o),this.getStorage(i)?.set(t,n,s)})}remove(t,n,i=!1){this.withPausedEmitters(()=>{this.updateKeyTarget(t,n,void 0),this.getStorage(n)?.delete(t,i)})}withPausedEmitters(t){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{t()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}keys(t,n){let i=[],o=this.getKeyTargets(t);for(let s of Object.keys(o))o[s]===n&&i.push(s);return i}updateKeyTarget(t,n,i,o=!1){let s=this.getKeyTargets(n);typeof i=="number"?s[t]!==i&&(s[t]=i,this.getStorage(n)?.set(eD,JSON.stringify(s),o)):typeof s[t]=="number"&&(delete s[t],this.getStorage(n)?.set(eD,JSON.stringify(s),o))}_workspaceKeyTargets=void 0;get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}_profileKeyTargets=void 0;get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}_applicationKeyTargets=void 0;get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(t){switch(t){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(t){let n=this.getStorage(t);return n?SQ(n):Object.create(null)}isNew(t){return this.getBoolean(IQ,t)===!0}async flush(t=0){this._onWillSaveState.fire({reason:t});let n=this.getStorage(-1),i=this.getStorage(0),o=this.getStorage(1);switch(t){case 0:await Ko.settled([n?.whenFlushed()??Promise.resolve(),i?.whenFlushed()??Promise.resolve(),o?.whenFlushed()??Promise.resolve()]);break;case 1:await Ko.settled([n?.flush(0)??Promise.resolve(),i?.flush(0)??Promise.resolve(),o?.flush(0)??Promise.resolve()]);break}}async log(){let t=this.getStorage(-1)?.items??new Map,n=this.getStorage(0)?.items??new Map,i=this.getStorage(1)?.items??new Map;return CQ(t,n,i,this.getLogDetails(-1)??"",this.getLogDetails(0)??"",this.getLogDetails(1)??"")}async optimize(t){return await this.flush(),this.getStorage(t)?.optimize()}async switch(t,n){return this.emitWillSaveState(0),CK(t)?this.switchToProfile(t,n):this.switchToWorkspace(t,n)}canSwitchProfile(t,n){return!(t.id===n.id||J7(n)&&J7(t))}switchData(t,n,i){this.withPausedEmitters(()=>{let o=new Set;for(let[s,a]of t)o.add(s),n.get(s)!==a&&this.emitDidChangeValue(i,{key:s,external:!0});for(let[s]of n.items)o.has(s)||this.emitDidChangeValue(i,{key:s,external:!0})})}};function J7(r){return r.isDefault||!!r.useDefaultFlags?.globalState}async function CQ(r,e,t,n,i,o){let s=m=>{try{return JSON.parse(m)}catch{return m}},a=new Map,l=new Map;r.forEach((m,b)=>{a.set(b,m),l.set(b,s(m))});let d=new Map,c=new Map;e.forEach((m,b)=>{d.set(b,m),c.set(b,s(m))});let p=new Map,h=new Map;t.forEach((m,b)=>{p.set(b,m),h.set(b,s(m))}),console.group(n!==i?`Storage: Application (path: ${n})`:`Storage: Application & Profile (path: ${n}, default profile)`);let g=[];if(a.forEach((m,b)=>{g.push({key:b,value:m})}),console.table(g),console.groupEnd(),console.log(l),n!==i){console.group(`Storage: Profile (path: ${i}, profile specific)`);let m=[];d.forEach((b,v)=>{m.push({key:v,value:b})}),console.table(m),console.groupEnd(),console.log(c)}console.group(`Storage: Workspace (path: ${o})`);let f=[];p.forEach((m,b)=>{f.push({key:b,value:m})}),console.table(f),console.groupEnd(),console.log(h)}var tD=class r{constructor(e,t){this.storageService=t;this.id=r.COMMON_PREFIX+e}static applicationMementos=new Map;static profileMementos=new Map;static workspaceMementos=new Map;static COMMON_PREFIX="memento/";id;getMemento(e,t){switch(e){case 1:{let n=r.workspaceMementos.get(this.id);return n||(n=new IS(this.id,e,t,this.storageService),r.workspaceMementos.set(this.id,n)),n.getMemento()}case 0:{let n=r.profileMementos.get(this.id);return n||(n=new IS(this.id,e,t,this.storageService),r.profileMementos.set(this.id,n)),n.getMemento()}case-1:{let n=r.applicationMementos.get(this.id);return n||(n=new IS(this.id,e,t,this.storageService),r.applicationMementos.set(this.id,n)),n.getMemento()}}}onDidChangeValue(e,t){return this.storageService.onDidChangeValue(e,this.id,t)}saveMemento(){r.workspaceMementos.get(this.id)?.save(),r.profileMementos.get(this.id)?.save(),r.applicationMementos.get(this.id)?.save()}reloadMemento(e){let t;switch(e){case-1:t=r.applicationMementos.get(this.id);break;case 0:t=r.profileMementos.get(this.id);break;case 1:t=r.workspaceMementos.get(this.id);break}t?.reload()}static clear(e){switch(e){case 1:r.workspaceMementos.clear();break;case 0:r.profileMementos.clear();break;case-1:r.applicationMementos.clear();break}}},IS=class{constructor(e,t,n,i){this.id=e;this.scope=t;this.target=n;this.storageService=i;this.mementoObj=this.doLoad()}mementoObj;doLoad(){try{return this.storageService.getObject(this.id,this.scope,{})}catch(e){Be(`[memento]: failed to parse contents: ${e} (id: ${this.id}, scope: ${this.scope}, contents: ${this.storageService.get(this.id,this.scope)})`)}return{}}getMemento(){return this.mementoObj}reload(){for(let e of Object.getOwnPropertyNames(this.mementoObj))delete this.mementoObj[e];Object.assign(this.mementoObj,this.doLoad())}save(){oc(this.mementoObj)?this.storageService.remove(this.id,this.scope):this.storageService.store(this.id,this.mementoObj,this.scope,this.target)}};var SS=class extends XT{constructor(t,n,i){super(n);this.id=t;this.memento=new tD(this.id,i),this._register(i.onWillSaveState(()=>{this.saveState(),this.memento.saveMemento()}))}memento;getId(){return this.id}getMemento(t,n){return this.memento.getMemento(t,n)}reloadMemento(t){return this.memento.reloadMemento(t)}onDidChangeMementoValue(t,n){return this.memento.onDidChangeValue(t,n)}saveState(){}};var nD=class extends SS{constructor(t,n,i,o){super(t,i,o);this.telemetryService=n}_onTitleAreaUpdate=this._register(new T);onTitleAreaUpdate=this._onTitleAreaUpdate.event;_onDidFocus;get onDidFocus(){return this._onDidFocus||(this._onDidFocus=this.registerFocusTrackEvents().onDidFocus),this._onDidFocus.event}_onDidBlur;get onDidBlur(){return this._onDidBlur||(this._onDidBlur=this.registerFocusTrackEvents().onDidBlur),this._onDidBlur.event}_hasFocus=!1;hasFocus(){return this._hasFocus}registerFocusTrackEvents(){let t=ks(this.getContainer()),n=this._register(br(t)),i=this._onDidFocus=this._register(new T);this._register(n.onDidFocus(()=>{this._hasFocus=!0,i.fire()}));let o=this._onDidBlur=this._register(new T);return this._register(n.onDidBlur(()=>{this._hasFocus=!1,o.fire()})),{onDidFocus:i,onDidBlur:o}}actionRunner;visible=!1;parent;getTitle(){}create(t){this.parent=t}getContainer(){return this.parent}setVisible(t){this.visible!==!!t&&(this.visible=t)}focus(){}getMenuIds(){return[]}getActions(){return[]}getSecondaryActions(){return[]}getContextMenuActions(){return[]}getActionViewItem(t,n){}getActionsContext(){return null}getActionRunner(){return this.actionRunner||(this.actionRunner=this._register(new Ns)),this.actionRunner}updateTitleArea(){this._onTitleAreaUpdate.fire()}isVisible(){return this.visible}getControl(){}};var EQ={separatorBorder:H.transparent};var iD=class{constructor(e,t,n,i){this.container=e;this.view=t;this.disposable=i;typeof n=="number"?(this._size=n,this._cachedVisibleSize=void 0,e.classList.add("visible")):(this._size=0,this._cachedVisibleSize=n.cachedVisibleSize)}_size;set size(e){this._size=e}get size(){return this._size}_cachedVisibleSize=void 0;get cachedVisibleSize(){return this._cachedVisibleSize}get visible(){return typeof this._cachedVisibleSize>"u"}setVisible(e,t){if(e!==this.visible){e?(this.size=qn(this._cachedVisibleSize,this.viewMinimumSize,this.viewMaximumSize),this._cachedVisibleSize=void 0):(this._cachedVisibleSize=typeof t=="number"?t:this.size,this.size=0),this.container.classList.toggle("visible",e);try{this.view.setVisible?.(e)}catch(n){console.error("Splitview: Failed to set visible view"),console.error(n)}}}get minimumSize(){return this.visible?this.view.minimumSize:0}get viewMinimumSize(){return this.view.minimumSize}get maximumSize(){return this.visible?this.view.maximumSize:0}get viewMaximumSize(){return this.view.maximumSize}get priority(){return this.view.priority}get proportionalLayout(){return this.view.proportionalLayout??!0}get snap(){return!!this.view.snap}set enabled(e){this.container.style.pointerEvents=e?"":"none"}layout(e,t){this.layoutContainer(e);try{this.view.layout(this.size,e,t)}catch(n){console.error("Splitview: Failed to layout view"),console.error(n)}}dispose(){this.disposable.dispose()}},YN=class extends iD{layoutContainer(e){this.container.style.top=`${e}px`,this.container.style.height=`${this.size}px`}},XN=class extends iD{layoutContainer(e){this.container.style.left=`${e}px`,this.container.style.width=`${this.size}px`}};var dg;(i=>{i.Distribute={type:"distribute"};function e(o){return{type:"split",index:o}}i.Split=e;function t(o){return{type:"auto",index:o}}i.Auto=t;function n(o){return{type:"invisible",cachedVisibleSize:o}}i.Invisible=n})(dg||={});var lg=class extends N{orientation;el;sashContainer;viewContainer;scrollable;scrollableElement;size=0;layoutContext;_contentSize=0;proportions=void 0;viewItems=[];sashItems=[];sashDragState;state=0;inverseAltBehavior;proportionalLayout;getSashOrthogonalSize;_onDidSashChange=this._register(new T);_onDidSashReset=this._register(new T);_orthogonalStartSash;_orthogonalEndSash;_startSnappingEnabled=!0;_endSnappingEnabled=!0;get contentSize(){return this._contentSize}onDidSashChange=this._onDidSashChange.event;onDidSashReset=this._onDidSashReset.event;onDidScroll;get length(){return this.viewItems.length}get minimumSize(){return this.viewItems.reduce((e,t)=>e+t.minimumSize,0)}get maximumSize(){return this.length===0?Number.POSITIVE_INFINITY:this.viewItems.reduce((e,t)=>e+t.maximumSize,0)}get orthogonalStartSash(){return this._orthogonalStartSash}get orthogonalEndSash(){return this._orthogonalEndSash}get startSnappingEnabled(){return this._startSnappingEnabled}get endSnappingEnabled(){return this._endSnappingEnabled}set orthogonalStartSash(e){for(let t of this.sashItems)t.sash.orthogonalStartSash=e;this._orthogonalStartSash=e}set orthogonalEndSash(e){for(let t of this.sashItems)t.sash.orthogonalEndSash=e;this._orthogonalEndSash=e}get sashes(){return this.sashItems.map(e=>e.sash)}set startSnappingEnabled(e){this._startSnappingEnabled!==e&&(this._startSnappingEnabled=e,this.updateSashEnablement())}set endSnappingEnabled(e){this._endSnappingEnabled!==e&&(this._endSnappingEnabled=e,this.updateSashEnablement())}constructor(e,t={}){super(),this.orientation=t.orientation??0,this.inverseAltBehavior=t.inverseAltBehavior??!1,this.proportionalLayout=t.proportionalLayout??!0,this.getSashOrthogonalSize=t.getSashOrthogonalSize,this.el=document.createElement("div"),this.el.classList.add("monaco-split-view2"),this.el.classList.add(this.orientation===0?"vertical":"horizontal"),e.appendChild(this.el),this.sashContainer=q(this.el,ie(".sash-container")),this.viewContainer=ie(".split-view-container"),this.scrollable=this._register(new Va({forceIntegerValues:!0,smoothScrollDuration:125,scheduleAtNextAnimationFrame:i=>Ai(Ee(this.el),i)})),this.scrollableElement=this._register(new ep(this.viewContainer,{vertical:this.orientation===0?t.scrollbarVisibility??1:2,horizontal:this.orientation===1?t.scrollbarVisibility??1:2},this.scrollable));let n=this._register(new He(this.viewContainer,"scroll")).event;this._register(n(i=>{let o=this.scrollableElement.getScrollPosition(),s=Math.abs(this.viewContainer.scrollLeft-o.scrollLeft)<=1?void 0:this.viewContainer.scrollLeft,a=Math.abs(this.viewContainer.scrollTop-o.scrollTop)<=1?void 0:this.viewContainer.scrollTop;(s!==void 0||a!==void 0)&&this.scrollableElement.setScrollPosition({scrollLeft:s,scrollTop:a})})),this.onDidScroll=this.scrollableElement.onScroll,this._register(this.onDidScroll(i=>{i.scrollTopChanged&&(this.viewContainer.scrollTop=i.scrollTop),i.scrollLeftChanged&&(this.viewContainer.scrollLeft=i.scrollLeft)})),q(this.el,this.scrollableElement.getDomNode()),this.style(t.styles||EQ),t.descriptor&&(this.size=t.descriptor.size,t.descriptor.views.forEach((i,o)=>{let s=Oi(i.visible)||i.visible?i.size:{type:"invisible",cachedVisibleSize:i.size},a=i.view;this.doAddView(a,s,o,!0)}),this._contentSize=this.viewItems.reduce((i,o)=>i+o.size,0),this.saveProportions())}style(e){e.separatorBorder.isTransparent()?(this.el.classList.remove("separator-border"),this.el.style.removeProperty("--separator-border")):(this.el.classList.add("separator-border"),this.el.style.setProperty("--separator-border",e.separatorBorder.toString()))}addView(e,t,n=this.viewItems.length,i){this.doAddView(e,t,n,i)}removeView(e,t){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");if(this.state!==0)throw new Error("Cant modify splitview");this.state=1;try{t?.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index});let n=t?.type==="split"?this.viewItems[t.index]:void 0,i=this.viewItems.splice(e,1)[0];if(n&&(n.size+=i.size),this.viewItems.length>=1){let s=Math.max(e-1,0);this.sashItems.splice(s,1)[0].disposable.dispose()}this.relayout(),t?.type==="distribute"&&this.distributeViewSizes();let o=i.view;return i.dispose(),o}finally{this.state=0}}removeAllViews(){if(this.state!==0)throw new Error("Cant modify splitview");this.state=1;try{let e=this.viewItems.splice(0,this.viewItems.length);for(let n of e)n.dispose();let t=this.sashItems.splice(0,this.sashItems.length);for(let n of t)n.disposable.dispose();return this.relayout(),e.map(n=>n.view)}finally{this.state=0}}moveView(e,t){if(this.state!==0)throw new Error("Cant modify splitview");let n=this.getViewCachedVisibleSize(e),i=typeof n>"u"?this.getViewSize(e):dg.Invisible(n),o=this.removeView(e);this.addView(o,i,t)}swapViews(e,t){if(this.state!==0)throw new Error("Cant modify splitview");if(e>t)return this.swapViews(t,e);let n=this.getViewSize(e),i=this.getViewSize(t),o=this.removeView(t),s=this.removeView(e);this.addView(o,n,e),this.addView(s,i,t)}isViewVisible(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].visible}setViewVisible(e,t){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");this.viewItems[e].setVisible(t),this.distributeEmptySpace(e),this.layoutViews(),this.saveProportions()}getViewCachedVisibleSize(e){if(e<0||e>=this.viewItems.length)throw new Error("Index out of bounds");return this.viewItems[e].cachedVisibleSize}layout(e,t){let n=Math.max(this.size,this._contentSize);if(this.size=e,this.layoutContext=t,this.proportions){let i=0;for(let o=0;o<this.viewItems.length;o++){let s=this.viewItems[o],a=this.proportions[o];typeof a=="number"?i+=a:e-=s.size}for(let o=0;o<this.viewItems.length;o++){let s=this.viewItems[o],a=this.proportions[o];typeof a=="number"&&i>0&&(s.size=qn(Math.round(a*e/i),s.minimumSize,s.maximumSize))}}else{let i=ki(this.viewItems.length),o=i.filter(a=>this.viewItems[a].priority===1),s=i.filter(a=>this.viewItems[a].priority===2);this.resize(this.viewItems.length-1,e-n,void 0,o,s)}this.distributeEmptySpace(),this.layoutViews()}saveProportions(){this.proportionalLayout&&this._contentSize>0&&(this.proportions=this.viewItems.map(e=>e.proportionalLayout&&e.visible?e.size/this._contentSize:void 0))}onSashStart({sash:e,start:t,alt:n}){for(let a of this.viewItems)a.enabled=!1;let i=this.sashItems.findIndex(a=>a.sash===e),o=Li(U(this.el.ownerDocument.body,"keydown",a=>s(this.sashDragState.current,a.altKey)),U(this.el.ownerDocument.body,"keyup",()=>s(this.sashDragState.current,!1))),s=(a,l)=>{let d=this.viewItems.map(f=>f.size),c=Number.NEGATIVE_INFINITY,p=Number.POSITIVE_INFINITY;if(this.inverseAltBehavior&&(l=!l),l)if(i===this.sashItems.length-1){let m=this.viewItems[i];c=(m.minimumSize-m.size)/2,p=(m.maximumSize-m.size)/2}else{let m=this.viewItems[i+1];c=(m.size-m.maximumSize)/2,p=(m.size-m.minimumSize)/2}let h,g;if(!l){let f=ki(i,-1),m=ki(i+1,this.viewItems.length),b=f.reduce((O,M)=>O+(this.viewItems[M].minimumSize-d[M]),0),v=f.reduce((O,M)=>O+(this.viewItems[M].viewMaximumSize-d[M]),0),S=m.length===0?Number.POSITIVE_INFINITY:m.reduce((O,M)=>O+(d[M]-this.viewItems[M].minimumSize),0),x=m.length===0?Number.NEGATIVE_INFINITY:m.reduce((O,M)=>O+(d[M]-this.viewItems[M].viewMaximumSize),0),E=Math.max(b,x),w=Math.min(S,v),P=this.findFirstSnapIndex(f),R=this.findFirstSnapIndex(m);if(typeof P=="number"){let O=this.viewItems[P],M=Math.floor(O.viewMinimumSize/2);h={index:P,limitDelta:O.visible?E-M:E+M,size:O.size}}if(typeof R=="number"){let O=this.viewItems[R],M=Math.floor(O.viewMinimumSize/2);g={index:R,limitDelta:O.visible?w+M:w-M,size:O.size}}}this.sashDragState={start:a,current:a,index:i,sizes:d,minDelta:c,maxDelta:p,alt:l,snapBefore:h,snapAfter:g,disposable:o}};s(t,n)}onSashChange({current:e}){let{index:t,start:n,sizes:i,alt:o,minDelta:s,maxDelta:a,snapBefore:l,snapAfter:d}=this.sashDragState;this.sashDragState.current=e;let c=e-n,p=this.resize(t,c,i,void 0,void 0,s,a,l,d);if(o){let h=t===this.sashItems.length-1,g=this.viewItems.map(x=>x.size),f=h?t:t+1,m=this.viewItems[f],b=m.size-m.maximumSize,v=m.size-m.minimumSize,S=h?t-1:t+1;this.resize(S,-p,g,void 0,void 0,b,v)}this.distributeEmptySpace(),this.layoutViews()}onSashEnd(e){this._onDidSashChange.fire(e),this.sashDragState.disposable.dispose(),this.saveProportions();for(let t of this.viewItems)t.enabled=!0}onViewChange(e,t){let n=this.viewItems.indexOf(e);n<0||n>=this.viewItems.length||(t=typeof t=="number"?t:e.size,t=qn(t,e.minimumSize,e.maximumSize),this.inverseAltBehavior&&n>0?(this.resize(n-1,Math.floor((e.size-t)/2)),this.distributeEmptySpace(),this.layoutViews()):(e.size=t,this.relayout([n],void 0)))}resizeView(e,t){if(!(e<0||e>=this.viewItems.length)){if(this.state!==0)throw new Error("Cant modify splitview");this.state=1;try{let n=ki(this.viewItems.length).filter(a=>a!==e),i=[...n.filter(a=>this.viewItems[a].priority===1),e],o=n.filter(a=>this.viewItems[a].priority===2),s=this.viewItems[e];t=Math.round(t),t=qn(t,s.minimumSize,Math.min(s.maximumSize,this.size)),s.size=t,this.relayout(i,o)}finally{this.state=0}}}isViewExpanded(e){if(e<0||e>=this.viewItems.length)return!1;for(let t of this.viewItems)if(t!==this.viewItems[e]&&t.size>t.minimumSize)return!1;return!0}distributeViewSizes(){let e=[],t=0;for(let a of this.viewItems)a.maximumSize-a.minimumSize>0&&(e.push(a),t+=a.size);let n=Math.floor(t/e.length);for(let a of e)a.size=qn(n,a.minimumSize,a.maximumSize);let i=ki(this.viewItems.length),o=i.filter(a=>this.viewItems[a].priority===1),s=i.filter(a=>this.viewItems[a].priority===2);this.relayout(o,s)}getViewSize(e){return e<0||e>=this.viewItems.length?-1:this.viewItems[e].size}doAddView(e,t,n=this.viewItems.length,i){if(this.state!==0)throw new Error("Cant modify splitview");this.state=1;try{let o=ie(".split-view-view");n===this.viewItems.length?this.viewContainer.appendChild(o):this.viewContainer.insertBefore(o,this.viewContainer.children.item(n));let s=e.onDidChange(h=>this.onViewChange(c,h)),a=me(()=>o.remove()),l=Li(s,a),d;typeof t=="number"?d=t:(t.type==="auto"&&(this.areViewsDistributed()?t={type:"distribute"}:t={type:"split",index:t.index}),t.type==="split"?d=this.getViewSize(t.index)/2:t.type==="invisible"?d={cachedVisibleSize:t.cachedVisibleSize}:d=e.minimumSize);let c=this.orientation===0?new YN(o,e,d,l):new XN(o,e,d,l);if(this.viewItems.splice(n,0,c),this.viewItems.length>1){let h={orthogonalStartSash:this.orthogonalStartSash,orthogonalEndSash:this.orthogonalEndSash},g=this.orientation===0?new Ul(this.sashContainer,{getHorizontalSashTop:O=>this.getSashPosition(O),getHorizontalSashWidth:this.getSashOrthogonalSize},{...h,orientation:1}):new Ul(this.sashContainer,{getVerticalSashLeft:O=>this.getSashPosition(O),getVerticalSashHeight:this.getSashOrthogonalSize},{...h,orientation:0}),f=this.orientation===0?O=>({sash:g,start:O.startY,current:O.currentY,alt:O.altKey}):O=>({sash:g,start:O.startX,current:O.currentX,alt:O.altKey}),b=z.map(g.onDidStart,f)(this.onSashStart,this),S=z.map(g.onDidChange,f)(this.onSashChange,this),E=z.map(g.onDidEnd,()=>this.sashItems.findIndex(O=>O.sash===g))(this.onSashEnd,this),w=g.onDidReset(()=>{let O=this.sashItems.findIndex(he=>he.sash===g),M=ki(O,-1),K=ki(O+1,this.viewItems.length),$=this.findFirstSnapIndex(M),Q=this.findFirstSnapIndex(K);typeof $=="number"&&!this.viewItems[$].visible||typeof Q=="number"&&!this.viewItems[Q].visible||this._onDidSashReset.fire(O)}),P=Li(b,S,E,w,g),R={sash:g,disposable:P};this.sashItems.splice(n-1,0,R)}o.appendChild(e.element);let p;typeof t!="number"&&t.type==="split"&&(p=[t.index]),i||this.relayout([n],p),!i&&typeof t!="number"&&t.type==="distribute"&&this.distributeViewSizes()}finally{this.state=0}}relayout(e,t){let n=this.viewItems.reduce((i,o)=>i+o.size,0);this.resize(this.viewItems.length-1,this.size-n,void 0,e,t),this.distributeEmptySpace(),this.layoutViews(),this.saveProportions()}resize(e,t,n=this.viewItems.map(c=>c.size),i,o,s=Number.NEGATIVE_INFINITY,a=Number.POSITIVE_INFINITY,l,d){if(e<0||e>=this.viewItems.length)return 0;let c=ki(e,-1),p=ki(e+1,this.viewItems.length);if(o)for(let R of o)bx(c,R),bx(p,R);if(i)for(let R of i)Yv(c,R),Yv(p,R);let h=c.map(R=>this.viewItems[R]),g=c.map(R=>n[R]),f=p.map(R=>this.viewItems[R]),m=p.map(R=>n[R]),b=c.reduce((R,O)=>R+(this.viewItems[O].minimumSize-n[O]),0),v=c.reduce((R,O)=>R+(this.viewItems[O].maximumSize-n[O]),0),S=p.length===0?Number.POSITIVE_INFINITY:p.reduce((R,O)=>R+(n[O]-this.viewItems[O].minimumSize),0),x=p.length===0?Number.NEGATIVE_INFINITY:p.reduce((R,O)=>R+(n[O]-this.viewItems[O].maximumSize),0),E=Math.max(b,x,s),w=Math.min(S,v,a),P=!1;if(l){let R=this.viewItems[l.index],O=t>=l.limitDelta;P=O!==R.visible,R.setVisible(O,l.size)}if(!P&&d){let R=this.viewItems[d.index],O=t<d.limitDelta;P=O!==R.visible,R.setVisible(O,d.size)}if(P)return this.resize(e,t,n,i,o,s,a);t=qn(t,E,w);for(let R=0,O=t;R<h.length;R++){let M=h[R],K=qn(g[R]+O,M.minimumSize,M.maximumSize),$=K-g[R];O-=$,M.size=K}for(let R=0,O=t;R<f.length;R++){let M=f[R],K=qn(m[R]-O,M.minimumSize,M.maximumSize),$=K-m[R];O+=$,M.size=K}return t}distributeEmptySpace(e){let t=this.viewItems.reduce((a,l)=>a+l.size,0),n=this.size-t,i=ki(this.viewItems.length-1,-1),o=i.filter(a=>this.viewItems[a].priority===1),s=i.filter(a=>this.viewItems[a].priority===2);for(let a of s)bx(i,a);for(let a of o)Yv(i,a);typeof e=="number"&&Yv(i,e);for(let a=0;n!==0&&a<i.length;a++){let l=this.viewItems[i[a]],d=qn(l.size+n,l.minimumSize,l.maximumSize),c=d-l.size;n-=c,l.size=d}}layoutViews(){this._contentSize=this.viewItems.reduce((t,n)=>t+n.size,0);let e=0;for(let t of this.viewItems)t.layout(e,this.layoutContext),e+=t.size;this.sashItems.forEach(t=>t.sash.layout()),this.updateSashEnablement(),this.updateScrollableElement()}updateScrollableElement(){this.orientation===0?this.scrollableElement.setScrollDimensions({height:this.size,scrollHeight:this._contentSize}):this.scrollableElement.setScrollDimensions({width:this.size,scrollWidth:this._contentSize})}updateSashEnablement(){let e=!1,t=this.viewItems.map(l=>e=l.size-l.minimumSize>0||e);e=!1;let n=this.viewItems.map(l=>e=l.maximumSize-l.size>0||e),i=[...this.viewItems].reverse();e=!1;let o=i.map(l=>e=l.size-l.minimumSize>0||e).reverse();e=!1;let s=i.map(l=>e=l.maximumSize-l.size>0||e).reverse(),a=0;for(let l=0;l<this.sashItems.length;l++){let{sash:d}=this.sashItems[l],c=this.viewItems[l];a+=c.size;let p=!(t[l]&&s[l+1]),h=!(n[l]&&o[l+1]);if(p&&h){let g=ki(l,-1),f=ki(l+1,this.viewItems.length),m=this.findFirstSnapIndex(g),b=this.findFirstSnapIndex(f),v=typeof m=="number"&&!this.viewItems[m].visible,S=typeof b=="number"&&!this.viewItems[b].visible;v&&o[l]&&(a>0||this.startSnappingEnabled)?d.state=1:S&&t[l]&&(a<this._contentSize||this.endSnappingEnabled)?d.state=2:d.state=0}else p&&!h?d.state=1:!p&&h?d.state=2:d.state=3}}getSashPosition(e){let t=0;for(let n=0;n<this.sashItems.length;n++)if(t+=this.viewItems[n].size,this.sashItems[n].sash===e)return t;return 0}findFirstSnapIndex(e){for(let t of e){let n=this.viewItems[t];if(n.visible&&n.snap)return t}for(let t of e){let n=this.viewItems[t];if(n.visible&&n.maximumSize-n.minimumSize>0)return;if(!n.visible&&n.snap)return t}}areViewsDistributed(){let e,t;for(let n of this.viewItems)if(e=e===void 0?n.size:Math.min(e,n.size),t=t===void 0?n.size:Math.max(t,n.size),t-e>2)return!1;return!0}dispose(){this.sashDragState?.disposable.dispose(),rt(this.viewItems),this.viewItems=[],this.sashItems.forEach(e=>e.disposable.dispose()),this.sashItems=[],super.dispose()}};var cmt={separatorBorder:H.transparent};var wQ;(i=>{i.Distribute={type:"distribute"},i.Split={type:"split"},i.Auto={type:"auto"};function n(o){return{type:"invisible",cachedVisibleSize:o}}i.Invisible=n})(wQ||={});async function t8(r){let e=navigator.usb;if(!e)return;let t=await e.requestDevice({filters:r?.filters??[]});if(t)return{deviceClass:t.deviceClass,deviceProtocol:t.deviceProtocol,deviceSubclass:t.deviceSubclass,deviceVersionMajor:t.deviceVersionMajor,deviceVersionMinor:t.deviceVersionMinor,deviceVersionSubminor:t.deviceVersionSubminor,manufacturerName:t.manufacturerName,productId:t.productId,productName:t.productName,serialNumber:t.serialNumber,usbVersionMajor:t.usbVersionMajor,usbVersionMinor:t.usbVersionMinor,usbVersionSubminor:t.usbVersionSubminor,vendorId:t.vendorId}}async function n8(r){let e=navigator.serial;if(!e)return;let t=await e.requestPort({filters:r?.filters??[]});if(!t)return;let n=t.getInfo();return{usbVendorId:n.usbVendorId,usbProductId:n.usbProductId}}async function i8(r){let e=navigator.hid;if(!e)return;let t=await e.requestDevice({filters:r?.filters??[]});if(!t.length)return;let n=t[0];return{opened:n.opened,vendorId:n.vendorId,productId:n.productId,productName:n.productName,collections:n.collections}}var db=j("openerService");var QN=60,ZN=QN*60,CS=ZN*24,o8=CS*7,r8=CS*30,s8=CS*365;function JN(r,e,t,n){typeof r!="number"&&(r=r.getTime());let i=Math.round((new Date().getTime()-r)/1e3);if(i<-30)return u("date.fromNow.in","in {0}",JN(new Date().getTime()+i*1e3,!1));if(!n&&i<30)return u("date.fromNow.now","now");let o;return i<QN?(o=i,e?o===1?t?u("date.fromNow.seconds.singular.ago.fullWord","{0} second ago",o):u("date.fromNow.seconds.singular.ago","{0} sec ago",o):t?u("date.fromNow.seconds.plural.ago.fullWord","{0} seconds ago",o):u("date.fromNow.seconds.plural.ago","{0} secs ago",o):o===1?t?u("date.fromNow.seconds.singular.fullWord","{0} second",o):u("date.fromNow.seconds.singular","{0} sec",o):t?u("date.fromNow.seconds.plural.fullWord","{0} seconds",o):u("date.fromNow.seconds.plural","{0} secs",o)):i<ZN?(o=Math.floor(i/QN),e?o===1?t?u("date.fromNow.minutes.singular.ago.fullWord","{0} minute ago",o):u("date.fromNow.minutes.singular.ago","{0} min ago",o):t?u("date.fromNow.minutes.plural.ago.fullWord","{0} minutes ago",o):u("date.fromNow.minutes.plural.ago","{0} mins ago",o):o===1?t?u("date.fromNow.minutes.singular.fullWord","{0} minute",o):u("date.fromNow.minutes.singular","{0} min",o):t?u("date.fromNow.minutes.plural.fullWord","{0} minutes",o):u("date.fromNow.minutes.plural","{0} mins",o)):i<CS?(o=Math.floor(i/ZN),e?o===1?t?u("date.fromNow.hours.singular.ago.fullWord","{0} hour ago",o):u("date.fromNow.hours.singular.ago","{0} hr ago",o):t?u("date.fromNow.hours.plural.ago.fullWord","{0} hours ago",o):u("date.fromNow.hours.plural.ago","{0} hrs ago",o):o===1?t?u("date.fromNow.hours.singular.fullWord","{0} hour",o):u("date.fromNow.hours.singular","{0} hr",o):t?u("date.fromNow.hours.plural.fullWord","{0} hours",o):u("date.fromNow.hours.plural","{0} hrs",o)):i<o8?(o=Math.floor(i/CS),e?o===1?u("date.fromNow.days.singular.ago","{0} day ago",o):u("date.fromNow.days.plural.ago","{0} days ago",o):o===1?u("date.fromNow.days.singular","{0} day",o):u("date.fromNow.days.plural","{0} days",o)):i<r8?(o=Math.floor(i/o8),e?o===1?t?u("date.fromNow.weeks.singular.ago.fullWord","{0} week ago",o):u("date.fromNow.weeks.singular.ago","{0} wk ago",o):t?u("date.fromNow.weeks.plural.ago.fullWord","{0} weeks ago",o):u("date.fromNow.weeks.plural.ago","{0} wks ago",o):o===1?t?u("date.fromNow.weeks.singular.fullWord","{0} week",o):u("date.fromNow.weeks.singular","{0} wk",o):t?u("date.fromNow.weeks.plural.fullWord","{0} weeks",o):u("date.fromNow.weeks.plural","{0} wks",o)):i<s8?(o=Math.floor(i/r8),e?o===1?t?u("date.fromNow.months.singular.ago.fullWord","{0} month ago",o):u("date.fromNow.months.singular.ago","{0} mo ago",o):t?u("date.fromNow.months.plural.ago.fullWord","{0} months ago",o):u("date.fromNow.months.plural.ago","{0} mos ago",o):o===1?t?u("date.fromNow.months.singular.fullWord","{0} month",o):u("date.fromNow.months.singular","{0} mo",o):t?u("date.fromNow.months.plural.fullWord","{0} months",o):u("date.fromNow.months.plural","{0} mos",o)):(o=Math.floor(i/s8),e?o===1?t?u("date.fromNow.years.singular.ago.fullWord","{0} year ago",o):u("date.fromNow.years.singular.ago","{0} yr ago",o):t?u("date.fromNow.years.plural.ago.fullWord","{0} years ago",o):u("date.fromNow.years.plural.ago","{0} yrs ago",o):o===1?t?u("date.fromNow.years.singular.fullWord","{0} year",o):u("date.fromNow.years.singular","{0} yr",o):t?u("date.fromNow.years.plural.fullWord","{0} years",o):u("date.fromNow.years.plural","{0} yrs",o))}function a8(r){return r.getFullYear()+"-"+String(r.getMonth()+1).padStart(2,"0")+"-"+String(r.getDate()).padStart(2,"0")+"T"+String(r.getHours()).padStart(2,"0")+":"+String(r.getMinutes()).padStart(2,"0")+":"+String(r.getSeconds()).padStart(2,"0")+"."+(r.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}var xS=/^([^.]+\..+)[:=](.+)$/,pn=class{constructor(e,t,n){this._args=e;this.paths=t;this.productService=n}get appRoot(){return du(qs.asFileUri("").fsPath)}get userHome(){return Z.file(this.paths.homeDir)}get userDataPath(){return this.paths.userDataDir}get appSettingsHome(){return Z.file(ur(this.userDataPath,"User"))}get tmpDir(){return Z.file(this.paths.tmpDir)}get cacheHome(){return Z.file(this.userDataPath)}get stateResource(){return ft(this.appSettingsHome,"globalStorage","storage.json")}get userRoamingDataHome(){return this.appSettingsHome.with({scheme:ye.vscodeUserData})}get userDataSyncHome(){return ft(this.appSettingsHome,"sync")}get logsHome(){if(!this.args.logsPath){let e=a8(new Date).replace(/-|:|\.\d+Z$/g,"");this.args.logsPath=ur(this.userDataPath,"logs",e)}return Z.file(this.args.logsPath)}get sync(){return this.args.sync}get machineSettingsResource(){return ft(Z.file(ur(this.userDataPath,"Machine")),"settings.json")}get workspaceStorageHome(){return ft(this.appSettingsHome,"workspaceStorage")}get localHistoryHome(){return ft(this.appSettingsHome,"History")}get keyboardLayoutResource(){return ft(this.userRoamingDataHome,"keyboardLayout.json")}get argvResource(){let e=tc.VSCODE_PORTABLE;return e?Z.file(ur(e,"argv.json")):ft(this.userHome,this.productService.dataFolderName,"argv.json")}get isExtensionDevelopment(){return!!this.args.extensionDevelopmentPath}get untitledWorkspacesHome(){return Z.file(ur(this.userDataPath,"Workspaces"))}get builtinExtensionsPath(){let e=this.args["builtin-extensions-dir"];return e?bm(e):au(ur(qs.asFileUri("").fsPath,"..","extensions"))}get extensionsDownloadLocation(){let e=this.args["extensions-download-dir"];return e?Z.file(bm(e)):Z.file(ur(this.userDataPath,"CachedExtensionVSIXs"))}get extensionsPath(){let e=this.args["extensions-dir"];if(e)return bm(e);let t=tc.VSCODE_EXTENSIONS;if(t)return t;let n=tc.VSCODE_PORTABLE;return n?ur(n,"extensions"):ft(this.userHome,this.productService.dataFolderName,"extensions").fsPath}get extensionDevelopmentLocationURI(){let e=this.args.extensionDevelopmentPath;if(Array.isArray(e))return e.map(t=>/^[^:/?#]+?:\/\//.test(t)?Z.parse(t):Z.file(au(t)))}get extensionDevelopmentKind(){return this.args.extensionDevelopmentKind?.map(e=>e==="ui"||e==="workspace"||e==="web"?e:"workspace")}get extensionTestsLocationURI(){let e=this.args.extensionTestsPath;if(e)return/^[^:/?#]+?:\/\//.test(e)?Z.parse(e):Z.file(au(e))}get disableExtensions(){if(this.args["disable-extensions"])return!0;let e=this.args["disable-extension"];if(e){if(typeof e=="string")return[e];if(Array.isArray(e)&&e.length>0)return e}return!1}get debugExtensionHost(){return _Q(this.args,this.isBuilt)}get debugRenderer(){return!!this.args.debugRenderer}get isBuilt(){return!tc.VSCODE_DEV}get verbose(){return!!this.args.verbose}get logLevel(){return this.args.log?.find(e=>!xS.test(e))}get extensionLogLevel(){let e=[];for(let t of this.args.log||[]){let n=xS.exec(t);n&&n[1]&&n[2]&&e.push([n[1],n[2]])}return e.length?e:void 0}get serviceMachineIdResource(){return ft(Z.file(this.userDataPath),"machineid")}get crashReporterId(){return this.args["crash-reporter-id"]}get crashReporterDirectory(){return this.args["crash-reporter-directory"]}get disableTelemetry(){return!!this.args["disable-telemetry"]}get disableWorkspaceTrust(){return!!this.args["disable-workspace-trust"]}get useInMemorySecretStorage(){return!!this.args["use-inmemory-secretstorage"]}get policyFile(){if(this.args["__enable-file-policy"]){let e=tc.VSCODE_PORTABLE;return e?Z.file(ur(e,"policy.json")):ft(this.userHome,this.productService.dataFolderName,"policy.json")}}editSessionId=this.args.editSessionId;get continueOn(){return this.args.continueOn}set continueOn(e){this.args.continueOn=e}get args(){return this._args}};_([be],pn.prototype,"appRoot",1),_([be],pn.prototype,"userHome",1),_([be],pn.prototype,"userDataPath",1),_([be],pn.prototype,"appSettingsHome",1),_([be],pn.prototype,"tmpDir",1),_([be],pn.prototype,"cacheHome",1),_([be],pn.prototype,"stateResource",1),_([be],pn.prototype,"userRoamingDataHome",1),_([be],pn.prototype,"userDataSyncHome",1),_([be],pn.prototype,"sync",1),_([be],pn.prototype,"machineSettingsResource",1),_([be],pn.prototype,"workspaceStorageHome",1),_([be],pn.prototype,"localHistoryHome",1),_([be],pn.prototype,"keyboardLayoutResource",1),_([be],pn.prototype,"argvResource",1),_([be],pn.prototype,"isExtensionDevelopment",1),_([be],pn.prototype,"untitledWorkspacesHome",1),_([be],pn.prototype,"builtinExtensionsPath",1),_([be],pn.prototype,"extensionsPath",1),_([be],pn.prototype,"extensionDevelopmentLocationURI",1),_([be],pn.prototype,"extensionDevelopmentKind",1),_([be],pn.prototype,"extensionTestsLocationURI",1),_([be],pn.prototype,"debugExtensionHost",1),_([be],pn.prototype,"logLevel",1),_([be],pn.prototype,"extensionLogLevel",1),_([be],pn.prototype,"serviceMachineIdResource",1),_([be],pn.prototype,"disableTelemetry",1),_([be],pn.prototype,"disableWorkspaceTrust",1),_([be],pn.prototype,"useInMemorySecretStorage",1),_([be],pn.prototype,"policyFile",1);function _Q(r,e){return DQ(r["inspect-extensions"],r["inspect-brk-extensions"],5870,e,r.debugId,r.extensionEnvironment)}function DQ(r,e,t,n,i,o){let a=Number(e||r)||(n?null:t),l=a?!!e:!1,d;if(o)try{d=JSON.parse(o)}catch{}return{port:a,break:l,debugId:i,env:d}}var l8=di,Tt=class{constructor(e,t,n,i){this.workspaceId=e;this.logsHome=t;this.options=n;this.productService=i;if(n.workspaceProvider&&Array.isArray(n.workspaceProvider.payload))try{this.payload=new Map(n.workspaceProvider.payload)}catch(o){Be(o)}}get remoteAuthority(){return this.options.remoteAuthority}get expectsResolverExtension(){return!!this.options.remoteAuthority?.includes("+")&&!this.options.webSocketFactory}get isBuilt(){return!!this.productService.commit}get logLevel(){let e=this.payload?.get("logLevel");return e?e.split(",").find(t=>!xS.test(t)):this.options.developmentOptions?.logLevel!==void 0?mw(this.options.developmentOptions?.logLevel):void 0}get extensionLogLevel(){let e=this.payload?.get("logLevel");if(e){let t=[];for(let n of e.split(",")){let i=xS.exec(n);i&&i[1]&&i[2]&&t.push([i[1],i[2]])}return t.length?t:void 0}return this.options.developmentOptions?.extensionLogLevel!==void 0?this.options.developmentOptions?.extensionLogLevel.map(([t,n])=>[t,mw(n)]):void 0}get profDurationMarkers(){let e=this.payload?.get("profDurationMarkers");if(e){let t=[];for(let n of e.split(","))t.push(n);return t.length===2?t:void 0}}get windowLogsPath(){return this.logsHome}get logFile(){return ft(this.windowLogsPath,"window.log")}get userRoamingDataHome(){return Z.file("/User").with({scheme:ye.vscodeUserData})}get argvResource(){return ft(this.userRoamingDataHome,"argv.json")}get cacheHome(){return ft(this.userRoamingDataHome,"caches")}get workspaceStorageHome(){return ft(this.userRoamingDataHome,"workspaceStorage")}get localHistoryHome(){return ft(this.userRoamingDataHome,"History")}get stateResource(){return ft(this.userRoamingDataHome,"State","storage.json")}get userDataSyncHome(){return ft(this.userRoamingDataHome,"sync",this.workspaceId)}get sync(){}get keyboardLayoutResource(){return ft(this.userRoamingDataHome,"keyboardLayout.json")}get untitledWorkspacesHome(){return ft(this.userRoamingDataHome,"Workspaces")}get serviceMachineIdResource(){return ft(this.userRoamingDataHome,"machineid")}get extHostLogsPath(){return ft(this.logsHome,"exthost")}get extHostTelemetryLogFile(){return ft(this.extHostLogsPath,"extensionTelemetry.log")}extensionHostDebugEnvironment=void 0;get debugExtensionHost(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.params}get isExtensionDevelopment(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.isExtensionDevelopment}get extensionDevelopmentLocationURI(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionDevelopmentLocationURI}get extensionDevelopmentLocationKind(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionDevelopmentKind}get extensionTestsLocationURI(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionTestsLocationURI}get extensionEnabledProposedApi(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionEnabledProposedApi}get debugRenderer(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.debugRenderer}get enableSmokeTestDriver(){return this.options.developmentOptions?.enableSmokeTestDriver}get disableExtensions(){return this.payload?.get("disableExtensions")==="true"}get enableExtensions(){return this.options.enabledExtensions}get webviewExternalEndpoint(){let e=this.options.webviewEndpoint||this.productService.webviewContentExternalBaseUrlTemplate||"https://{{uuid}}.vscode-cdn.net/{{quality}}/{{commit}}/out/vs/workbench/contrib/webview/browser/pre/",t=this.payload?.get("webviewExternalEndpointCommit");return e.replace("{{commit}}",t??this.productService.commit??"ef65ac1ba57f57f2a3961bfe94aa20481caca4c6").replace("{{quality}}",(t?"insider":this.productService.quality)??"insider")}get extensionTelemetryLogResource(){return ft(this.logsHome,"extensionTelemetry.log")}get disableTelemetry(){return!1}get verbose(){return this.payload?.get("verbose")==="true"}get logExtensionHostCommunication(){return this.payload?.get("logExtensionHostCommunication")==="true"}get skipReleaseNotes(){return this.payload?.get("skipReleaseNotes")==="true"}get skipWelcome(){return this.payload?.get("skipWelcome")==="true"}get disableWorkspaceTrust(){return!this.options.enableWorkspaceTrust}get profile(){return this.payload?.get("profile")}editSessionId=this.options.editSessionId;payload;resolveExtensionHostDebugEnvironment(){let e={params:{port:null,break:!1},debugRenderer:!1,isExtensionDevelopment:!1,extensionDevelopmentLocationURI:void 0,extensionDevelopmentKind:void 0};if(this.payload)for(let[n,i]of this.payload)switch(n){case"extensionDevelopmentPath":e.extensionDevelopmentLocationURI||(e.extensionDevelopmentLocationURI=[]),e.extensionDevelopmentLocationURI.push(Z.parse(i)),e.isExtensionDevelopment=!0;break;case"extensionDevelopmentKind":e.extensionDevelopmentKind=[i];break;case"extensionTestsPath":e.extensionTestsLocationURI=Z.parse(i);break;case"debugRenderer":e.debugRenderer=i==="true";break;case"debugId":e.params.debugId=i;break;case"inspect-brk-extensions":e.params.port=parseInt(i),e.params.break=!0;break;case"inspect-extensions":e.params.port=parseInt(i);break;case"enableProposedApi":e.extensionEnabledProposedApi=[];break}let t=this.options.developmentOptions;return t&&!e.isExtensionDevelopment&&(t.extensions?.length&&(e.extensionDevelopmentLocationURI=t.extensions.map(n=>Z.revive(n)),e.isExtensionDevelopment=!0),t.extensionTestsPath&&(e.extensionTestsLocationURI=Z.revive(t.extensionTestsPath))),e}get filesToOpenOrCreate(){if(this.payload){let e=this.payload.get("openFile");if(e){let t=Z.parse(e);if(this.payload.has("gotoLineMode")){let n=PH(t.path);return[{fileUri:t.with({path:n.path}),options:{selection:Oi(n.line)?void 0:{startLineNumber:n.line,startColumn:n.column||1}}}]}return[{fileUri:t}]}}}get filesToDiff(){if(this.payload){let e=this.payload.get("diffFilePrimary"),t=this.payload.get("diffFileSecondary");if(e&&t)return[{fileUri:Z.parse(t)},{fileUri:Z.parse(e)}]}}get filesToMerge(){if(this.payload){let e=this.payload.get("mergeFile1"),t=this.payload.get("mergeFile2"),n=this.payload.get("mergeFileBase"),i=this.payload.get("mergeFileResult");if(e&&t&&n&&i)return[{fileUri:Z.parse(e)},{fileUri:Z.parse(t)},{fileUri:Z.parse(n)},{fileUri:Z.parse(i)}]}}};_([be],Tt.prototype,"remoteAuthority",1),_([be],Tt.prototype,"expectsResolverExtension",1),_([be],Tt.prototype,"isBuilt",1),_([be],Tt.prototype,"logLevel",1),_([be],Tt.prototype,"windowLogsPath",1),_([be],Tt.prototype,"logFile",1),_([be],Tt.prototype,"userRoamingDataHome",1),_([be],Tt.prototype,"argvResource",1),_([be],Tt.prototype,"cacheHome",1),_([be],Tt.prototype,"workspaceStorageHome",1),_([be],Tt.prototype,"localHistoryHome",1),_([be],Tt.prototype,"stateResource",1),_([be],Tt.prototype,"userDataSyncHome",1),_([be],Tt.prototype,"sync",1),_([be],Tt.prototype,"keyboardLayoutResource",1),_([be],Tt.prototype,"untitledWorkspacesHome",1),_([be],Tt.prototype,"serviceMachineIdResource",1),_([be],Tt.prototype,"extHostLogsPath",1),_([be],Tt.prototype,"extHostTelemetryLogFile",1),_([be],Tt.prototype,"debugExtensionHost",1),_([be],Tt.prototype,"isExtensionDevelopment",1),_([be],Tt.prototype,"extensionDevelopmentLocationURI",1),_([be],Tt.prototype,"extensionDevelopmentLocationKind",1),_([be],Tt.prototype,"extensionTestsLocationURI",1),_([be],Tt.prototype,"extensionEnabledProposedApi",1),_([be],Tt.prototype,"debugRenderer",1),_([be],Tt.prototype,"enableSmokeTestDriver",1),_([be],Tt.prototype,"disableExtensions",1),_([be],Tt.prototype,"enableExtensions",1),_([be],Tt.prototype,"webviewExternalEndpoint",1),_([be],Tt.prototype,"extensionTelemetryLogResource",1),_([be],Tt.prototype,"disableTelemetry",1),_([be],Tt.prototype,"verbose",1),_([be],Tt.prototype,"logExtensionHostCommunication",1),_([be],Tt.prototype,"skipReleaseNotes",1),_([be],Tt.prototype,"skipWelcome",1),_([be],Tt.prototype,"disableWorkspaceTrust",1),_([be],Tt.prototype,"profile",1),_([be],Tt.prototype,"filesToOpenOrCreate",1),_([be],Tt.prototype,"filesToDiff",1),_([be],Tt.prototype,"filesToMerge",1);var d8=j("layoutService");var rD=d8;function oD(r){switch(r){case 0:return"left";case 1:return"right";case 2:return"bottom";case 3:return"top";default:return"bottom"}}var Nbt={[oD(0)]:0,[oD(1)]:1,[oD(2)]:2,[oD(3)]:3};function eF(r){switch(r){case 0:return"always";case 1:return"never";case 2:return"preserve";default:return"preserve"}}var Fbt={[eF(0)]:0,[eF(1)]:1,[eF(2)]:2};var Ed=j("lifecycleService");function c8(r){switch(r){case 1:return"Starting";case 2:return"Ready";case 3:return"Restored";case 4:return"Eventually"}}var Td=class extends N{constructor(t,n){super();this.logService=t;this.storageService=n;this._startupKind=this.resolveStartupKind(),this._register(this.storageService.onWillSaveState(i=>{i.reason===1&&this.storageService.store(Td.LAST_SHUTDOWN_REASON_KEY,this.shutdownReason,1,1)}))}static LAST_SHUTDOWN_REASON_KEY="lifecyle.lastShutdownReason";_onBeforeShutdown=this._register(new T);onBeforeShutdown=this._onBeforeShutdown.event;_onWillShutdown=this._register(new T);onWillShutdown=this._onWillShutdown.event;_onDidShutdown=this._register(new T);onDidShutdown=this._onDidShutdown.event;_onBeforeShutdownError=this._register(new T);onBeforeShutdownError=this._onBeforeShutdownError.event;_onShutdownVeto=this._register(new T);onShutdownVeto=this._onShutdownVeto.event;_startupKind;get startupKind(){return this._startupKind}_phase=1;get phase(){return this._phase}phaseWhen=new Map;shutdownReason;resolveStartupKind(){let t=this.doResolveStartupKind()??1;return this.logService.trace(`[lifecycle] starting up (startup kind: ${t})`),t}doResolveStartupKind(){let t=this.storageService.getNumber(Td.LAST_SHUTDOWN_REASON_KEY,1);this.storageService.remove(Td.LAST_SHUTDOWN_REASON_KEY,1);let n;switch(t){case 3:n=3;break;case 4:n=4;break}return n}set phase(t){if(t<this.phase)throw new Error("Lifecycle cannot go backwards");if(this._phase===t)return;this.logService.trace(`lifecycle: phase changed (value: ${t})`),this._phase=t,Vi(`code/LifecyclePhase/${c8(t)}`);let n=this.phaseWhen.get(this._phase);n&&(n.open(),this.phaseWhen.delete(this._phase))}async when(t){if(t<=this._phase)return;let n=this.phaseWhen.get(t);n||(n=new _m,this.phaseWhen.set(t,n)),await n.wait()}};Td=_([y(0,Vt),y(1,Io)],Td);var ES=class extends Td{beforeUnloadListener=void 0;unloadListener=void 0;ignoreBeforeUnload=!1;didUnload=!1;constructor(e,t){super(e,t),this.registerListeners()}registerListeners(){this.beforeUnloadListener=U(We,ee.BEFORE_UNLOAD,e=>this.onBeforeUnload(e)),this.unloadListener=U(We,ee.PAGE_HIDE,()=>this.onUnload())}onBeforeUnload(e){this.ignoreBeforeUnload?(this.logService.info("[lifecycle] onBeforeUnload triggered but ignored once"),this.ignoreBeforeUnload=!1):(this.logService.info("[lifecycle] onBeforeUnload triggered and handled with veto support"),this.doShutdown(()=>this.vetoBeforeUnload(e)))}vetoBeforeUnload(e){e.preventDefault(),e.returnValue=u("lifecycleVeto","Changes that you made may not be saved. Please check press 'Cancel' and try again.")}withExpectedShutdown(e,t){if(typeof e=="number")return this.shutdownReason=e,this.storageService.flush(1);this.ignoreBeforeUnload=!0;try{t?.()}finally{this.ignoreBeforeUnload=!1}}async shutdown(){this.logService.info("[lifecycle] shutdown triggered"),this.beforeUnloadListener?.dispose(),this.unloadListener?.dispose(),await this.storageService.flush(1),this.doShutdown()}doShutdown(e){let t=this.logService;this.storageService.flush(1);let n=!1;function i(o,s){typeof e=="function"&&(o instanceof Promise&&(t.error(`[lifecycle] Long running operations before shutdown are unsupported in the web (id: ${s})`),n=!0),o===!0&&(t.info(`[lifecycle]: Unload was prevented (id: ${s})`),n=!0))}return this._onBeforeShutdown.fire({reason:2,veto(o,s){i(o,s)},finalVeto(o,s){i(o(),s)}}),n&&typeof e=="function"?e():this.onUnload()}onUnload(){if(this.didUnload)return;this.didUnload=!0,this._register(U(We,ee.PAGE_SHOW,t=>this.onLoadAfterUnload(t)));let e=this.logService;this._onWillShutdown.fire({reason:2,joiners:()=>[],token:Yt.None,join(t,n){e.error(`[lifecycle] Long running operations during shutdown are unsupported in the web (id: ${n.id})`)},force:()=>{}}),this._onDidShutdown.fire()}onLoadAfterUnload(e){e.persisted&&this.withExpectedShutdown({disableShutdownHandling:!0},()=>We.location.reload())}doResolveStartupKind(){let e=super.doResolveStartupKind();return typeof e!="number"&&performance.getEntriesByType("navigation").at(0)?.type==="reload"&&(e=3),e}};ES=_([y(0,Vt),y(1,Io)],ES);Cn(Ed,ES,0);var cb=j("hostService");var kQ=u("open","open"),RQ=u("close","close"),MQ=u("find","find"),aD={open:kQ,close:RQ,find:MQ};async function h8(r,e){let t=[];return await g8(r,t,e.logsHome,e.logsHome),t}async function g8(r,e,t,n){let i=await r.resolve(t);for(let{resource:o,isDirectory:s}of i.children||[])if(s)await g8(r,e,o,n);else{let a=(await r.readFile(o)).value.toString();if(a){let l=Su(n,o);l&&e.push({relativePath:l,contents:a})}}}var m8=j("editorPaneService");var ub;(e=>e.Workbench="workbench.contributions.kind")(ub||={});var ga=(i=>(i[i.BlockStartup=1]="BlockStartup",i[i.BlockRestore=2]="BlockRestore",i[i.AfterRestored=3]="AfterRestored",i[i.Eventually=4]="Eventually",i))(ga||{});function f8(r){let e=r;return!!e&&typeof e.editorTypeId=="string"}function PQ(r){switch(r){case 3:return ga.AfterRestored;case 4:return ga.Eventually}}function b8(r){switch(r){case ga.BlockStartup:return 1;case ga.BlockRestore:return 2;case ga.AfterRestored:return 3;case ga.Eventually:return 4}}var cg=class r extends N{static INSTANCE=new r;static BLOCK_BEFORE_RESTORE_WARN_THRESHOLD=20;static BLOCK_AFTER_RESTORE_WARN_THRESHOLD=100;instantiationService;lifecycleService;logService;environmentService;editorPaneService;contributionsByPhase=new Map;contributionsByEditor=new Map;contributionsById=new Map;instancesById=new Map;instanceDisposables=this._register(new X);timingsByPhase=new Map;get timings(){return this.timingsByPhase}pendingRestoredContributions=new Fl;whenRestored=this.pendingRestoredContributions.p;registerWorkbenchContribution2(e,t,n){let i={id:e,ctor:t};this.instantiationService&&this.lifecycleService&&this.logService&&this.environmentService&&this.editorPaneService&&(typeof n=="number"&&this.lifecycleService.phase>=n||typeof e=="string"&&f8(n)&&this.editorPaneService.didInstantiateEditorPane(n.editorTypeId))?this.safeCreateContribution(this.instantiationService,this.logService,this.environmentService,i,typeof n=="number"?b8(n):this.lifecycleService.phase):(typeof n=="number"&&oy(this.contributionsByPhase,b8(n),[]).push(i),typeof e=="string"&&(this.contributionsById.has(e)?console.error(`IWorkbenchContributionsRegistry#registerWorkbenchContribution(): Can't register multiple contributions with same id '${e}'`):this.contributionsById.set(e,i),f8(n)&&oy(this.contributionsByEditor,n.editorTypeId,[]).push(i)))}registerWorkbenchContribution(e,t){this.registerWorkbenchContribution2(void 0,e,PQ(t))}getWorkbenchContribution(e){if(this.instancesById.has(e))return this.instancesById.get(e);let t=this.instantiationService,n=this.lifecycleService,i=this.logService,o=this.environmentService;if(!t||!n||!i||!o)throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): cannot be called before registry started`);let s=this.contributionsById.get(e);if(!s)throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): contribution with that identifier is unknown.`);n.phase<3&&i.warn(`IWorkbenchContributionsRegistry#getContribution('${e}'): contribution instantiated before LifecyclePhase.Restored!`),this.safeCreateContribution(t,i,o,s,n.phase);let a=this.instancesById.get(e);if(!a)throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): failed to create contribution.`);return a}start(e){let t=this.instantiationService=e.get(we),n=this.lifecycleService=e.get(Ed),i=this.logService=e.get(Vt),o=this.environmentService=e.get(di),s=this.editorPaneService=e.get(m8);this._register(n.onDidShutdown(()=>{this.instanceDisposables.clear()}));for(let a of[1,2,3,4])this.instantiateByPhase(t,n,i,o,a);for(let a of this.contributionsByEditor.keys())s.didInstantiateEditorPane(a)&&this.onEditor(a,t,n,i,o);this._register(s.onWillInstantiateEditorPane(a=>this.onEditor(a.typeId,t,n,i,o)))}onEditor(e,t,n,i,o){let s=this.contributionsByEditor.get(e);if(s){this.contributionsByEditor.delete(e);for(let a of s)this.safeCreateContribution(t,i,o,a,n.phase)}}instantiateByPhase(e,t,n,i,o){t.phase>=o?this.doInstantiateByPhase(e,n,i,o):t.when(o).then(()=>this.doInstantiateByPhase(e,n,i,o))}async doInstantiateByPhase(e,t,n,i){let o=this.contributionsByPhase.get(i);if(o)switch(this.contributionsByPhase.delete(i),i){case 1:case 2:{Vi(`code/willCreateWorkbenchContributions/${i}`);for(let s of o)this.safeCreateContribution(e,t,n,s,i);Vi(`code/didCreateWorkbenchContributions/${i}`);break}case 3:case 4:{i===4&&await this.pendingRestoredContributions.p,this.doInstantiateWhenIdle(o,e,t,n,i);break}}}doInstantiateWhenIdle(e,t,n,i,o){Vi(`code/willCreateWorkbenchContributions/${o}`);let s=0,a=o===4?3e3:500,l=d=>{for(;s<e.length;){let c=e[s++];if(this.safeCreateContribution(t,n,i,c,o),d.timeRemaining()<1){Cu(l,a);break}}s===e.length&&(Vi(`code/didCreateWorkbenchContributions/${o}`),o===3&&this.pendingRestoredContributions.complete())};Cu(l,a)}safeCreateContribution(e,t,n,i,o){if(typeof i.id=="string"&&this.instancesById.has(i.id))return;let s=Date.now();try{typeof i.id=="string"&&Vi(`code/willCreateWorkbenchContribution/${o}/${i.id}`);let a=e.createInstance(i.ctor);typeof i.id=="string"&&(this.instancesById.set(i.id,a),this.contributionsById.delete(i.id)),pu(a)&&this.instanceDisposables.add(a)}catch(a){t.error(`Unable to create workbench contribution '${i.id??i.ctor.name}'.`,a)}finally{typeof i.id=="string"&&Vi(`code/didCreateWorkbenchContribution/${o}/${i.id}`)}if(typeof i.id=="string"||!n.isBuilt){let a=Date.now()-s;if(a>(o<3?r.BLOCK_BEFORE_RESTORE_WARN_THRESHOLD:r.BLOCK_AFTER_RESTORE_WARN_THRESHOLD)&&t.warn(`Creation of workbench contribution '${i.id??i.ctor.name}' took ${a}ms.`),typeof i.id=="string"){let l=this.timingsByPhase.get(o);l||(l=[],this.timingsByPhase.set(o,l)),l.push([i.id,a])}}}},TS=cg.INSTANCE.registerWorkbenchContribution2.bind(cg.INSTANCE),ayt=cg.INSTANCE.getWorkbenchContribution.bind(cg.INSTANCE);Te.add(ub.Workbench,cg.INSTANCE);var wS=class{constructor(e,t,n,i){this.fileService=e;this.environmentService=t;this.lifecycleService=n;this.logService=i}async getLogs(){return h8(this.fileService,this.environmentService)}async whenWorkbenchRestored(){this.logService.info("[driver] Waiting for restored lifecycle phase..."),await this.lifecycleService.when(3),this.logService.info("[driver] Restored lifecycle phase reached. Waiting for contributions..."),await Te.as(ub.Workbench).whenRestored,this.logService.info("[driver] Workbench contributions created.")}async setValue(e,t){let n=We.document.querySelector(e);if(!n)return Promise.reject(new Error(`Element not found: ${e}`));let i=n;i.value=t;let o=new Event("input",{bubbles:!0,cancelable:!0});i.dispatchEvent(o)}async isActiveElement(e){if(We.document.querySelector(e)!==We.document.activeElement){let n=[],i=We.document.activeElement;for(;i;){let o=i.tagName,s=i.id?`#${i.id}`:"",a=Mr(i.className.split(/\s+/g).map(l=>l.trim())).map(l=>`.${l}`).join("");n.unshift(`${o}${s}${a}`),i=i.parentElement}throw new Error(`Active element not found. Current active element is '${n.join(" > ")}'. Looking for ${e}`)}return!0}async getElements(e,t){let n=We.document.querySelectorAll(e),i=[];for(let o=0;o<n.length;o++){let s=n.item(o);i.push(this.serializeElement(s,t))}return i}serializeElement(e,t){let n=Object.create(null);for(let a=0;a<e.attributes.length;a++){let l=e.attributes.item(a);l&&(n[l.name]=l.value)}let i=[];if(t)for(let a=0;a<e.children.length;a++){let l=e.children.item(a);l&&i.push(this.serializeElement(l,!0))}let{left:o,top:s}=ky(e);return{tagName:e.tagName,className:e.className,textContent:e.textContent||"",attributes:n,children:i,left:o,top:s}}async getElementXY(e,t,n){let i=typeof t=="number"&&typeof n=="number"?{x:t,y:n}:void 0;return this._getElementXY(e,i)}async typeInEditor(e,t){let n=We.document.querySelector(e);if(!n)throw new Error(`Editor not found: ${e}`);let i=n,o=i.selectionStart,s=o+t.length,a=i.value,l=a.substr(0,o)+t+a.substr(o);i.value=l,i.setSelectionRange(s,s);let d=new Event("input",{bubbles:!0,cancelable:!0});i.dispatchEvent(d)}async getTerminalBuffer(e){let t=We.document.querySelector(e);if(!t)throw new Error(`Terminal not found: ${e}`);let n=t.xterm;if(!n)throw new Error(`Xterm not found: ${e}`);let i=[];for(let o=0;o<n.buffer.active.length;o++)i.push(n.buffer.active.getLine(o).translateToString(!0));return i}async writeInTerminal(e,t){let n=We.document.querySelector(e);if(!n)throw new Error(`Element not found: ${e}`);let i=n.xterm;if(!i)throw new Error(`Xterm not found: ${e}`);i.input(t)}getLocaleInfo(){return Promise.resolve({language:ka,locale:oH})}getLocalizedStrings(){return Promise.resolve({open:aD.open,close:aD.close,find:aD.find})}async _getElementXY(e,t){let n=We.document.querySelector(e);if(!n)return Promise.reject(new Error(`Element not found: ${e}`));let{left:i,top:o}=ky(n),{width:s,height:a}=Ba(n),l,d;return t?(l=i+t.x,d=o+t.y):(l=i+s/2,d=o+a/2),l=Math.round(l),d=Math.round(d),{x:l,y:d}}async exitApplication(){}};wS=_([y(0,nn),y(1,di),y(2,Ed),y(3,Vt)],wS);function v8(r){Object.assign(We,{driver:r.createInstance(wS)})}var zs=class extends N{constructor(t,n={getWindowsCount:rE,getWindows:Dy},i,o){super();this.hostService=i;this.environmentService=o;this.enableWindowFocusOnElementFocus(t),this.enableMultiWindowAwareTimeout(t,n),this.registerFullScreenListeners(t.vscodeWindowId)}static TIMEOUT_HANDLES=Number.MIN_SAFE_INTEGER;static TIMEOUT_DISPOSABLES=new Map;enableWindowFocusOnElementFocus(t){let n=t.HTMLElement.prototype.focus,i=this;t.HTMLElement.prototype.focus=function(o){i.onElementFocus(Ee(this)),n.apply(this,[o])}}onElementFocus(t){let n=Hl();n!==t&&n.document.hasFocus()&&(t.focus(),!this.environmentService.extensionTestsLocationURI&&!t.document.hasFocus()&&this.hostService.focus(t))}enableMultiWindowAwareTimeout(t,n={getWindowsCount:rE,getWindows:Dy}){let i=t.setTimeout;Object.defineProperty(t,"vscodeOriginalSetTimeout",{get:()=>i});let o=t.clearTimeout;Object.defineProperty(t,"vscodeOriginalClearTimeout",{get:()=>o}),t.setTimeout=function(s,a=0,...l){if(n.getWindowsCount()===1||typeof s=="string"||a===0)return i.apply(this,[s,a,...l]);let d=new Set,c=zs.TIMEOUT_HANDLES++;zs.TIMEOUT_DISPOSABLES.set(c,d);let p=_a(s,()=>{rt(d),zs.TIMEOUT_DISPOSABLES.delete(c)});for(let{window:h,disposables:g}of n.getWindows()){if(C1(h)&&h.document.visibilityState==="hidden")continue;let f=!1,m=h.vscodeOriginalSetTimeout.apply(this,[(...v)=>{f||p(...v)},a,...l]),b=me(()=>{f=!0,h.vscodeOriginalClearTimeout(m),d.delete(b)});g.add(b),d.add(b)}return c},t.clearTimeout=function(s){let a=typeof s=="number"?zs.TIMEOUT_DISPOSABLES.get(s):void 0;a?(rt(a),zs.TIMEOUT_DISPOSABLES.delete(s)):o.apply(this,[s])}}registerFullScreenListeners(t){this._register(this.hostService.onDidChangeFullScreen(({windowId:n,fullscreen:i})=>{if(n===t){let o=lh(t);o&&EH(i,o.window)}}))}static async confirmOnShutdown(t,n){let i=t.get(XI),o=t.get(Ge),s=n===2?Pe?u("quitMessageMac","Are you sure you want to quit?"):u("quitMessage","Are you sure you want to exit?"):u("closeWindowMessage","Are you sure you want to close the window?"),a=n===2?Pe?u({key:"quitButtonLabel",comment:["&& denotes a mnemonic"]},"&&Quit"):u({key:"exitButtonLabel",comment:["&& denotes a mnemonic"]},"&&Exit"):u({key:"closeWindowButtonLabel",comment:["&& denotes a mnemonic"]},"&&Close Window"),l=await i.confirm({message:s,primaryButton:a,checkbox:{label:u("doNotAskAgain","Do not ask me again")}});return l.confirmed&&l.checkboxChecked&&await o.updateValue("window.confirmBeforeClose","never"),l.confirmed}};zs=_([y(2,cb),y(3,Hi)],zs);var lD=class extends zs{constructor(t,n,i,o,s,a,l,d,c){super(We,void 0,c,a);this.openerService=t;this.lifecycleService=n;this.dialogService=i;this.labelService=o;this.productService=s;this.browserEnvironmentService=a;this.layoutService=l;this.instantiationService=d;this.registerListeners(),this.create()}registerListeners(){this._register(this.lifecycleService.onWillShutdown(()=>this.onWillShutdown()));let t=li&&We.visualViewport?We.visualViewport:We;this._register(U(t,ee.RESIZE,()=>{this.layoutService.layout(),li&&We.scrollTo(0,0)})),this._register(U(this.layoutService.mainContainer,ee.WHEEL,n=>n.preventDefault(),{passive:!1})),this._register(U(this.layoutService.mainContainer,ee.CONTEXT_MENU,n=>qe.stop(n,!0))),this._register(U(this.layoutService.mainContainer,ee.DROP,n=>qe.stop(n,!0)))}onWillShutdown(){z.toPromise(z.any(z.once(new He(We.document.body,ee.KEY_DOWN,!0).event),z.once(new He(We.document.body,ee.MOUSE_DOWN,!0).event))).then(async()=>{await po(3e3),await this.dialogService.prompt({type:eo.Error,message:u("shutdownError","An unexpected error occurred that requires a reload of this page."),detail:u("shutdownErrorDetail","The workbench was unexpectedly disposed while running."),buttons:[{label:u({key:"reload",comment:["&& denotes a mnemonic"]},"&&Reload"),run:()=>We.location.reload()}]})})}create(){this.setupOpenHandlers(),this.registerLabelFormatters(),this.registerCommands(),this.setupDriver()}setupDriver(){this.environmentService.enableSmokeTestDriver&&v8(this.instantiationService)}setupOpenHandlers(){this.openerService.setDefaultExternalOpener({openExternal:async t=>{let n=!1;if(this.browserEnvironmentService.options?.openerAllowedExternalUrlPrefixes){for(let i of this.browserEnvironmentService.options.openerAllowedExternalUrlPrefixes)if(t.startsWith(i)){n=!0;break}}if(Sm(t,ye.http)||Sm(t,ye.https))Or?yU(t,!n)||await this.dialogService.prompt({type:eo.Warning,message:u("unableToOpenExternal","The browser interrupted the opening of a new tab or window. Press 'Open' to open it anyway."),detail:t,buttons:[{label:u({key:"open",comment:["&& denotes a mnemonic"]},"&&Open"),run:()=>n?Y1(t):q1(t)},{label:u({key:"learnMore",comment:["&& denotes a mnemonic"]},"&&Learn More"),run:()=>this.openerService.open(Z.parse("https://aka.ms/allow-vscode-popup"))}],cancelButton:!0}):n?Y1(t):q1(t);else{let i=()=>{this.lifecycleService.withExpectedShutdown({disableShutdownHandling:!0},()=>We.location.href=t)};i();let o=async()=>{let{downloadUrl:s}=this.productService,a,l=[{label:u({key:"openExternalDialogButtonRetry.v2",comment:["&& denotes a mnemonic"]},"&&Try Again"),run:()=>i()}];s!==void 0?(a=u("openExternalDialogDetail.v2",`We launched {0} on your computer.

If {1} did not launch, try again or install it below.`,this.productService.nameLong,this.productService.nameLong),l.push({label:u({key:"openExternalDialogButtonInstall.v3",comment:["&& denotes a mnemonic"]},"&&Install"),run:async()=>{await this.openerService.open(Z.parse(s)),o()}})):a=u("openExternalDialogDetailNoInstall",`We launched {0} on your computer.

If {1} did not launch, try again below.`,this.productService.nameLong,this.productService.nameLong),await this.hostService.withExpectedShutdown(()=>this.dialogService.prompt({type:eo.Info,message:u("openExternalDialogTitle","All done. You can close this tab now."),detail:a,buttons:l,cancelButton:!0}))};Sm(t,this.productService.urlProtocol)&&await o()}return!0}})}registerLabelFormatters(){this._register(this.labelService.registerFormatter({scheme:ye.vscodeUserData,priority:!0,formatting:{label:"(Settings) ${path}",separator:"/"}}))}registerCommands(){St.registerCommand("workbench.experimental.requestUsbDevice",async(t,n)=>t8(n)),St.registerCommand("workbench.experimental.requestSerialPort",async(t,n)=>n8(n)),St.registerCommand("workbench.experimental.requestHidDevice",async(t,n)=>i8(n))}};lD=_([y(0,db),y(1,Ed),y(2,XI),y(3,ro),y(4,vs),y(5,l8),y(6,rD),y(7,we),y(8,cb)],lD);var AQ=j("auxiliaryWindowService");var _S=class extends zs{constructor(t,n,i,o,s,a){super(t,void 0,s,a);this.window=t;this.container=n;this.configurationService=o;this.whenStylesHaveLoaded=i.wait().then(()=>{}),this.registerListeners()}_onWillLayout=this._register(new T);onWillLayout=this._onWillLayout.event;_onDidLayout=this._register(new T);onDidLayout=this._onDidLayout.event;_onBeforeUnload=this._register(new T);onBeforeUnload=this._onBeforeUnload.event;_onUnload=this._register(new T);onUnload=this._onUnload.event;_onWillDispose=this._register(new T);onWillDispose=this._onWillDispose.event;whenStylesHaveLoaded;registerListeners(){this._register(U(this.window,ee.BEFORE_UNLOAD,t=>this.handleBeforeUnload(t))),this._register(U(this.window,ee.UNLOAD,()=>this.handleUnload())),this._register(U(this.window,"unhandledrejection",t=>{Be(t.reason),t.preventDefault()})),this._register(U(this.window,ee.RESIZE,()=>this.layout())),this._register(U(this.container,ee.SCROLL,()=>this.container.scrollTop=0)),Ri?(this._register(U(this.container,ee.DROP,t=>qe.stop(t,!0))),this._register(U(this.container,ee.WHEEL,t=>t.preventDefault(),{passive:!1})),this._register(U(this.container,ee.CONTEXT_MENU,t=>qe.stop(t,!0)))):(this._register(U(this.window.document.body,ee.DRAG_OVER,t=>qe.stop(t))),this._register(U(this.window.document.body,ee.DROP,t=>qe.stop(t))))}handleBeforeUnload(t){let n;if(this._onBeforeUnload.fire({veto(s){s&&(n=s)}}),n){this.handleVetoBeforeClose(t,n);return}let i=this.configurationService.getValue("window.confirmBeforeClose");(i==="always"||i==="keyboardOnly"&&Lm.getInstance().isModifierPressed)&&this.confirmBeforeClose(t)}handleVetoBeforeClose(t,n){this.preventUnload(t)}preventUnload(t){t.preventDefault(),t.returnValue=u("lifecycleVeto","Changes that you made may not be saved. Please check press 'Cancel' and try again.")}confirmBeforeClose(t){this.preventUnload(t)}handleUnload(){this._onUnload.fire()}layout(){let t=Ba(this.window.document.body,this.container);this._onWillLayout.fire(t),this._onDidLayout.fire(t)}createState(){return{bounds:{x:this.window.screenX,y:this.window.screenY,width:this.window.outerWidth,height:this.window.outerHeight},zoomLevel:CH(this.window)}}dispose(){this._store.isDisposed||(this._onWillDispose.fire(),super.dispose())}};_S=_([y(3,Ge),y(4,cb),y(5,Hi)],_S);var Nc=class extends N{constructor(t,n,i,o,s,a){super();this.layoutService=t;this.dialogService=n;this.configurationService=i;this.telemetryService=o;this.hostService=s;this.environmentService=a}static DEFAULT_SIZE={width:800,height:600};static WINDOW_IDS=xu(We)+1;_onDidOpenAuxiliaryWindow=this._register(new T);onDidOpenAuxiliaryWindow=this._onDidOpenAuxiliaryWindow.event;windows=new Map;async open(t){Vi("code/auxiliaryWindow/willOpen");let n=await this.openWindow(t);if(!n)throw new Error(u("unableToOpenWindowError","Unable to open a new window."));let i=await this.resolveWindowId(n);zx(n,i);let o=new X,{container:s,stylesLoaded:a}=this.createContainer(n,o,t),l=this.createAuxiliaryWindow(n,s,a),d=new X;this.windows.set(n.vscodeWindowId,l),d.add(me(()=>this.windows.delete(n.vscodeWindowId)));let c=new X;return z.once(l.onWillDispose)(()=>{n.close(),o.dispose(),d.dispose(),c.dispose()}),d.add(nU(n)),this._onDidOpenAuxiliaryWindow.fire({window:l,disposables:c}),Vi("code/auxiliaryWindow/didOpen"),this.telemetryService.publicLog2("auxiliaryWindowOpen",{bounds:!!t?.bounds}),l}createAuxiliaryWindow(t,n,i){return new _S(t,n,i,this.configurationService,this.hostService,this.environmentService)}async openWindow(t){let n=Hl(),i={x:n.screenX,y:n.screenY,width:n.outerWidth,height:n.outerHeight},o=Math.max(t?.bounds?.width??Nc.DEFAULT_SIZE.width,LA.WIDTH),s=Math.max(t?.bounds?.height??Nc.DEFAULT_SIZE.height,LA.HEIGHT),a={x:t?.bounds?.x??Math.max(i.x+i.width/2-o/2,0),y:t?.bounds?.y??Math.max(i.y+i.height/2-s/2,0),width:o,height:s};!t?.bounds&&a.x===i.x&&a.y===i.y&&(a={...a,x:a.x+30,y:a.y+30});let l=Mr(["popup=yes",`left=${a.x}`,`top=${a.y}`,`width=${a.width}`,`height=${a.height}`,t?.nativeTitlebar?"window-native-titlebar=yes":void 0,t?.disableFullscreen?"window-disable-fullscreen=yes":void 0,t?.mode===0?"window-maximized=yes":void 0,t?.mode===2?"window-fullscreen=yes":void 0]),d=We.open(fm?"":"about:blank",void 0,l.join(","));return!d&&Ri?(await this.dialogService.prompt({type:eo.Warning,message:u("unableToOpenWindow","The browser interrupted the opening of a new window. Press 'Retry' to try again."),detail:u("unableToOpenWindowDetail","To avoid this problem in the future, please ensure to allow popups for this website."),buttons:[{label:u({key:"retry",comment:["&& denotes a mnemonic"]},"&&Retry"),run:()=>this.openWindow(t)}],cancelButton:!0})).result:d?.window}async resolveWindowId(t){return Nc.WINDOW_IDS++}createContainer(t,n,i){t.document.createElement=function(){throw new Error('Not allowed to create elements in child window JavaScript context. Always use the main window so that "xyz instanceof HTMLElement" continues to work.')},this.applyMeta(t);let{stylesLoaded:o}=this.applyCSS(t,n),s=this.applyHTML(t,n);return{stylesLoaded:o,container:s}}applyMeta(t){for(let i of['meta[charset="utf-8"]','meta[http-equiv="Content-Security-Policy"]','meta[name="viewport"]','meta[name="theme-color"]']){let o=We.document.querySelector(i);if(o){let s=cU(t.document.head);if(uE(o,s),i==='meta[http-equiv="Content-Security-Policy"]'){let a=s.getAttribute("content");a&&s.setAttribute("content",a.replace(/(script-src[^\;]*)/,"script-src 'none'"))}}}let n=We.document.querySelector('link[rel="icon"]');if(n){let i=uU(t.document.head);uE(n,i)}}applyCSS(t,n){Vi("code/auxiliaryWindow/willApplyCSS");let i=new Map,o=new _m;o.wait().then(()=>Vi("code/auxiliaryWindow/didLoadCSSStyles"));let s=n.add(new X),a=0;function l(){--a===0&&(s.dispose(),o.open())}function d(c){if(aU(c))return;let p=t.document.head.appendChild(c.cloneNode(!0));c.tagName.toLowerCase()==="link"&&(a++,s.add(U(p,"load",l)),s.add(U(p,"error",l))),i.set(c,p)}a++;try{for(let c of We.document.head.querySelectorAll('link[rel="stylesheet"], style'))d(c)}finally{l()}return n.add(lU(t)),n.add(dE.observe(We.document.head,n,{childList:!0,subtree:!0})(c=>{for(let p of c)if(!(p.type!=="childList"||p.target.nodeName.toLowerCase()==="title"||p.target.nodeName.toLowerCase()==="script"||p.target.nodeName.toLowerCase()==="meta")){for(let h of p.addedNodes)if(Yn(h)&&(h.tagName.toLowerCase()==="style"||h.tagName.toLowerCase()==="link"))d(h);else if(h.nodeType===Node.TEXT_NODE&&h.parentNode){let g=i.get(h.parentNode);g&&(g.textContent=h.textContent)}for(let h of p.removedNodes){let g=i.get(h);g&&(g.parentNode?.removeChild(g),i.delete(h))}}})),Vi("code/auxiliaryWindow/didApplyCSS"),{stylesLoaded:o}}applyHTML(t,n){Vi("code/auxiliaryWindow/willApplyHTML");let i=document.createElement("div");return i.setAttribute("role","application"),rU(i,0,0,0,0,"relative"),i.style.display="flex",i.style.height="100%",i.style.flexDirection="column",t.document.body.append(i),n.add(pE(We.document.documentElement,t.document.documentElement)),n.add(pE(We.document.body,t.document.body)),n.add(pE(this.layoutService.mainContainer,i,["class"])),Vi("code/auxiliaryWindow/didApplyHTML"),i}getWindow(t){return this.windows.get(t)}};Nc=_([y(0,rD),y(1,XI),y(2,Ge),y(3,er),y(4,cb),y(5,Hi)],Nc);Cn(AQ,Nc,1);var tF=new Et(220,70),nF=new Et(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);var pb=class r extends nD{constructor(t,n,i,o,s){super(t,i,o,s);this.group=n}onDidChangeSizeConstraints=z.None;_onDidChangeControl=this._register(new T);onDidChangeControl=this._onDidChangeControl.event;static EDITOR_MEMENTOS=new Map;get minimumWidth(){return tF.width}get maximumWidth(){return nF.width}get minimumHeight(){return tF.height}get maximumHeight(){return nF.height}_input;get input(){return this._input}_options;get options(){return this._options}get window(){return lh(this.group.windowId,!0).window}get scopedContextKeyService(){}create(t){super.create(t),this.createEditor(t)}async setInput(t,n,i,o){this._input=t,this._options=n}clearInput(){this._input=void 0,this._options=void 0}setOptions(t){this._options=t}setVisible(t){super.setVisible(t),this.setEditorVisible(t)}setEditorVisible(t){}setBoundarySashes(t){}getEditorMemento(t,n,i,o=10){let s=`${this.getId()}${i}`,a=r.EDITOR_MEMENTOS.get(s);return a||(a=this._register(new iF(this.getId(),i,this.getMemento(1,1),o,t,n)),r.EDITOR_MEMENTOS.set(s,a)),a}getViewState(){}saveState(){for(let[,t]of r.EDITOR_MEMENTOS)t.id===this.getId()&&t.saveState();super.saveState()}dispose(){this._input=void 0,this._options=void 0,super.dispose()}},iF=class r extends N{constructor(t,n,i,o,s,a){super();this.id=t;this.key=n;this.memento=i;this.limit=o;this.editorGroupService=s;this.configurationService=a;this.updateConfiguration(void 0),this.registerListeners()}static SHARED_EDITOR_STATE=-1;cache;cleanedUp=!1;editorDisposables;shareEditorState=!1;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>this.updateConfiguration(t)))}updateConfiguration(t){(!t||t.affectsConfiguration(void 0,"workbench.editor.sharedViewState"))&&(this.shareEditorState=this.configurationService.getValue(void 0,"workbench.editor.sharedViewState")===!0)}saveEditorState(t,n,i){let o=this.doGetResource(n);if(!o||!t)return;let s=this.doLoad(),a=s.get(o.toString());a||(a=Object.create(null),s.set(o.toString(),a)),a[t.id]=i,this.shareEditorState&&(a[r.SHARED_EDITOR_STATE]=i),yo(n)&&this.clearEditorStateOnDispose(o,n)}loadEditorState(t,n){let i=this.doGetResource(n);if(!i||!t)return;let s=this.doLoad().get(i.toString());if(s){let a=s[t.id];if(a)return a;if(this.shareEditorState)return s[r.SHARED_EDITOR_STATE]}}clearEditorState(t,n){yo(t)&&this.editorDisposables?.delete(t);let i=this.doGetResource(t);if(i){let o=this.doLoad();if(n){let s=o.get(i.toString());s&&(delete s[n.id],oc(s)&&o.delete(i.toString()))}else o.delete(i.toString())}}clearEditorStateOnDispose(t,n){this.editorDisposables||(this.editorDisposables=new Map),this.editorDisposables.has(n)||this.editorDisposables.set(n,z.once(n.onWillDispose)(()=>{this.clearEditorState(t),this.editorDisposables?.delete(n)}))}moveEditorState(t,n,i){let o=this.doLoad(),s=[...o.keys()];for(let a of s){let l=Z.parse(a);if(!i.isEqualOrParent(l,t))continue;let d;if(yn(t,l))d=n;else{let p=OH(l.path,t.path);d=ft(n,l.path.substr(p+t.path.length+1))}let c=o.get(a,0);c&&(o.delete(a),o.set(d.toString(),c))}}doGetResource(t){return yo(t)?t.resource:t}doLoad(){if(!this.cache){this.cache=new Po(this.limit);let t=this.memento[this.key];Array.isArray(t)&&this.cache.fromJSON(t)}return this.cache}saveState(){let t=this.doLoad();this.cleanedUp||(this.cleanUp(),this.cleanedUp=!0),this.memento[this.key]=t.toJSON()}cleanUp(){let t=this.doLoad(),n=[...t.entries()];for(let[i,o]of n)for(let s of Object.keys(o)){let a=Number(s);a===r.SHARED_EDITOR_STATE&&this.shareEditorState||this.editorGroupService.getGroup(a)||(delete o[a],oc(o)&&t.delete(i))}}};var DS=class r{constructor(e,t,n){this.ctor=e;this.typeId=t;this.name=n}static instantiatedEditorPanes=new Set;static didInstantiateEditorPane(e){return r.instantiatedEditorPanes.has(e)}static _onWillInstantiateEditorPane=new T;static onWillInstantiateEditorPane=r._onWillInstantiateEditorPane.event;static create(e,t,n){return new r(e,t,n)}instantiate(e,t){r._onWillInstantiateEditorPane.fire({typeId:this.typeId});let n=e.createInstance(this.ctor,t);return r.instantiatedEditorPanes.add(this.typeId),n}describes(e){return e.getId()===this.typeId}},oF=class{mapEditorPanesToEditors=new Map;registerEditorPane(e,t){return this.mapEditorPanesToEditors.set(e,t),me(()=>{this.mapEditorPanesToEditors.delete(e)})}getEditorPane(e){let t=this.findEditorPaneDescriptors(e);if(t.length!==0)return t.length===1?t[0]:e.prefersEditorPane(t)}findEditorPaneDescriptors(e,t){let n=[];for(let i of this.mapEditorPanesToEditors.keys()){let o=this.mapEditorPanesToEditors.get(i)||[];for(let s of o){let a=s.ctor;if(!t&&e.constructor===a){n.push(i);break}else if(t&&e instanceof a){n.push(i);break}}}return!t&&n.length===0?this.findEditorPaneDescriptors(e,!0):n}getEditorPaneByType(e){return tt.find(this.mapEditorPanesToEditors.keys(),t=>t.typeId===e)}getEditorPanes(){return Array.from(this.mapEditorPanesToEditors.keys())}getEditors(){let e=[];for(let t of this.mapEditorPanesToEditors.keys()){let n=this.mapEditorPanesToEditors.get(t);n&&e.push(...n.map(i=>i.ctor))}return e}};Te.add(ys.EditorPane,new oF);var Dxt=Object.freeze({id:"application",order:100,title:u("applicationConfigurationTitle","Application"),type:"object"}),kS=Object.freeze({id:"workbench",order:7,title:u("workbenchConfigurationTitle","Workbench"),type:"object"}),NQ=Object.freeze({id:"security",scope:1,title:u("securityConfigurationTitle","Security"),type:"object",order:7}),Lxt=Object.freeze({id:"problems",title:u("problemsConfigurationTitle","Problems"),type:"object",order:101}),FQ=Object.freeze({id:"window",order:8,title:u("windowConfigurationTitle","Window"),type:"object"}),ll={ConfigurationMigration:"base.contributions.configuration.migration"},rF=class{migrations=[];_onDidRegisterConfigurationMigrations=new T;onDidRegisterConfigurationMigration=this._onDidRegisterConfigurationMigrations.event;registerConfigurationMigrations(e){this.migrations.push(...e)}},pD=new rF;Te.add(ll.ConfigurationMigration,pD);var dD=class extends N{constructor(t,n){super();this.configurationService=t;this.workspaceService=n;this._register(this.workspaceService.onDidChangeWorkspaceFolders(async i=>{for(let o of i.added)await this.migrateConfigurationsForFolder(o,pD.migrations)})),this.migrateConfigurations(pD.migrations),this._register(pD.onDidRegisterConfigurationMigration(i=>this.migrateConfigurations(i)))}static ID="workbench.contrib.configurationMigration";async migrateConfigurations(t){await this.migrateConfigurationsForFolder(void 0,t);for(let n of this.workspaceService.getWorkspace().folders)await this.migrateConfigurationsForFolder(n,t)}async migrateConfigurationsForFolder(t,n){await Promise.all([n.map(i=>this.migrateConfigurationsForFolderAndOverride(i,t?.uri))])}async migrateConfigurationsForFolderAndOverride(t,n){let i=this.configurationService.inspect(t.key,{resource:n}),o=this.workspaceService.getWorkbenchState()===3?[["user",2],["userLocal",3],["userRemote",4],["workspace",5],["workspaceFolder",6]]:[["user",2],["userLocal",3],["userRemote",4],["workspace",5]];for(let[s,a]of o){let l=i[s];if(!l)continue;let d=[];if(l.value!==void 0){let c=await this.runMigration(t,s,l.value,n,void 0);for(let p of c??[])d.push([p,[]])}for(let{identifiers:c,value:p}of l.overrides??[])if(p!==void 0){let h=await this.runMigration(t,s,p,n,c);for(let g of h??[])d.push([g,c])}d.length&&await Promise.allSettled(d.map(async([[c,p],h])=>this.configurationService.updateValue(c,p.value,{resource:n,overrideIdentifiers:h},a)))}}async runMigration(t,n,i,o,s){let a=d=>{let p=this.configurationService.inspect(d,{resource:o})[n];if(p)return s?p.overrides?.find(({identifiers:h})=>wn(h,s))?.value:p.value},l=await t.migrateFn(i,a);return Array.isArray(l)?l:[[t.key,l]]}};dD=_([y(0,Ge),y(1,fn)],dD);var cD=class extends N{constructor(t){super();this.remoteAgentService=t;this.create()}static ID="workbench.contrib.dynamicWorkbenchSecurityConfiguration";_ready=new Fl;ready=this._ready.p;async create(){try{await this.doCreate()}finally{this._ready.complete()}}async doCreate(){if(!It&&(await this.remoteAgentService.getEnvironment())?.os!==1)return;Te.as(In.Configuration).registerConfiguration({...NQ,properties:{"security.allowedUNCHosts":{type:"array",items:{type:"string",pattern:"^[^\\\\]+$",patternErrorMessage:u("security.allowedUNCHosts.patternErrorMessage","UNC host names must not contain backslashes.")},default:[],markdownDescription:u("security.allowedUNCHosts","A set of UNC host names (without leading or trailing backslash, for example `192.168.0.1` or `my-server`) to allow without user confirmation. If a UNC host is being accessed that is not allowed via this setting or has not been acknowledged via user confirmation, an error will occur and the operation stopped. A restart is required when changing this setting. Find out more about this setting at https://aka.ms/vscode-windows-unc."),scope:2},"security.restrictUNCAccess":{type:"boolean",default:!0,markdownDescription:u("security.restrictUNCAccess","If enabled, only allows access to UNC host names that are allowed by the `#security.allowedUNCHosts#` setting or after user confirmation. Find out more about this setting at https://aka.ms/vscode-windows-unc."),scope:2}}})}};cD=_([y(0,s_)],cD);var LS="window.newWindowProfile",uD=class extends N{constructor(t,n){super();this.userDataProfilesService=t;this.configurationService=n;this.registerNewWindowProfileConfiguration(),this._register(this.userDataProfilesService.onDidChangeProfiles(i=>this.registerNewWindowProfileConfiguration())),this.setNewWindowProfile(),this.checkAndResetNewWindowProfileConfig(),this._register(n.onDidChangeConfiguration(i=>{i.source!==7&&i.affectsConfiguration(LS)&&this.setNewWindowProfile()})),this._register(this.userDataProfilesService.onDidChangeProfiles(()=>this.checkAndResetNewWindowProfileConfig()))}static ID="workbench.contrib.dynamicWindowConfiguration";configurationNode;newWindowProfile;registerNewWindowProfileConfiguration(){let t=Te.as(In.Configuration),n={...FQ,properties:{[LS]:{type:["string","null"],default:null,enum:[...this.userDataProfilesService.profiles.map(i=>i.name),null],enumItemLabels:[...this.userDataProfilesService.profiles.map(i=>""),u("active window","Active Window")],description:u("newWindowProfile","Specifies the profile to use when opening a new window. If a profile name is provided, the new window will use that profile. If no profile name is provided, the new window will use the profile of the active window or the Default profile if no active window exists."),scope:1}}};this.configurationNode?t.updateConfigurations({add:[n],remove:[this.configurationNode]}):t.registerConfiguration(n),this.configurationNode=n}setNewWindowProfile(){let t=this.configurationService.getValue(LS);this.newWindowProfile=t?this.userDataProfilesService.profiles.find(n=>n.name===t):void 0}checkAndResetNewWindowProfileConfig(){let t=this.configurationService.getValue(LS);if(!t)return;let n=this.newWindowProfile?this.userDataProfilesService.profiles.find(i=>i.id===this.newWindowProfile.id):void 0;t!==n?.name&&this.configurationService.updateValue(LS,n?.name)}};uD=_([y(0,ua),y(1,Ge)],uD);var gD=j("editorResolverService");var BQ=Te.as(In.Configuration),WQ={...kS,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:u("editor.editorAssociations",'Configure [glob patterns](https://aka.ms/vscode-glob-patterns) to editors (for example `"*.hex": "hexEditor.hexedit"`). These have precedence over the default behavior.'),additionalProperties:{type:"string"}}}};BQ.registerConfiguration(WQ);var ug=new B("workbenchState",void 0,{type:"string",description:u("workbenchState","The kind of workspace opened in the window, either 'empty' (no workspace), 'folder' (single folder) or 'workspace' (multi-root workspace)")}),LEt=new B("workspaceFolderCount",0,u("workspaceFolderCount","The number of root folders in the workspace")),kEt=new B("openFolderWorkspaceSupport",!0,!0),REt=new B("enterMultiRootWorkspaceSupport",!0,!0),MEt=new B("emptyWorkspaceSupport",!0,!0),OEt=new B("dirtyWorkingCopies",!1,u("dirtyWorkingCopies","Whether there are any working copies with unsaved changes")),sF=new B("remoteName","",u("remoteName","The name of the remote the window is connected to or an empty string if not connected to any remote")),PEt=new B("virtualWorkspace","",u("virtualWorkspace","The scheme of the current workspace is from a virtual file system or an empty string.")),AEt=new B("temporaryWorkspace",!1,u("temporaryWorkspace","The scheme of the current workspace is from a temporary file system.")),NEt=new B("isFullscreen",!1,u("isFullscreen","Whether the main window is in fullscreen mode")),FEt=new B("isAuxiliaryWindowFocusedContext",!1,u("isAuxiliaryWindowFocusedContext","Whether an auxiliary window is focused")),BEt=new B("hasWebFileSystemAccess",!1,!0),WEt=new B("embedderIdentifier",void 0,u("embedderIdentifier","The identifier of the embedder according to the product service, if one is defined")),VEt=new B("activeEditorIsDirty",!1,u("activeEditorIsDirty","Whether the active editor has unsaved changes")),HEt=new B("activeEditorIsNotPreview",!1,u("activeEditorIsNotPreview","Whether the active editor is not in preview mode")),UEt=new B("activeEditorIsFirstInGroup",!1,u("activeEditorIsFirstInGroup","Whether the active editor is the first one in its group")),zEt=new B("activeEditorIsLastInGroup",!1,u("activeEditorIsLastInGroup","Whether the active editor is the last one in its group")),KEt=new B("activeEditorIsPinned",!1,u("activeEditorIsPinned","Whether the active editor is pinned")),GEt=new B("activeEditorIsReadonly",!1,u("activeEditorIsReadonly","Whether the active editor is read-only")),jEt=new B("activeCompareEditorCanSwap",!1,u("activeCompareEditorCanSwap","Whether the active compare editor can swap sides")),$Et=new B("activeEditorCanToggleReadonly",!0,u("activeEditorCanToggleReadonly","Whether the active editor can toggle between being read-only or writeable")),qEt=new B("activeEditorCanRevert",!1,u("activeEditorCanRevert","Whether the active editor can revert")),YEt=new B("activeEditorCanSplitInGroup",!0),XEt=new B("activeEditor",null,{type:"string",description:u("activeEditor","The identifier of the active editor")}),QEt=new B("activeEditorAvailableEditorIds","",u("activeEditorAvailableEditorIds","The available editor identifiers that are usable for the active editor")),ZEt=new B("textCompareEditorVisible",!1,u("textCompareEditorVisible","Whether a text compare editor is visible")),JEt=new B("textCompareEditorActive",!1,u("textCompareEditorActive","Whether a text compare editor is active")),eTt=new B("sideBySideEditorActive",!1,u("sideBySideEditorActive","Whether a side by side editor is active")),tTt=new B("groupEditorsCount",0,u("groupEditorsCount","The number of opened editor groups")),nTt=new B("activeEditorGroupEmpty",!1,u("activeEditorGroupEmpty","Whether the active editor group is empty")),iTt=new B("activeEditorGroupIndex",0,u("activeEditorGroupIndex","The index of the active editor group")),oTt=new B("activeEditorGroupLast",!1,u("activeEditorGroupLast","Whether the active editor group is the last group")),rTt=new B("activeEditorGroupLocked",!1,u("activeEditorGroupLocked","Whether the active editor group is locked")),VQ=new B("multipleEditorGroups",!1,u("multipleEditorGroups","Whether there are multiple editor groups opened")),sTt=VQ.toNegated(),aTt=new B("multipleEditorsSelectedInGroup",!1,u("multipleEditorsSelectedInGroup","Whether multiple editors have been selected in an editor group")),lTt=new B("twoEditorsSelectedInGroup",!1,u("twoEditorsSelectedInGroup","Whether exactly two editors have been selected in an editor group")),dTt=new B("SelectedEditorsInGroupFileOrUntitledResourceContextKey",!0,u("SelectedEditorsInGroupFileOrUntitledResourceContextKey","Whether all selected editors in a group have a file or untitled resource associated")),HQ=new B("editorPartMultipleEditorGroups",!1,u("editorPartMultipleEditorGroups","Whether there are multiple editor groups opened in an editor part")),cTt=HQ.toNegated(),uTt=new B("editorPartMaximizedEditorGroup",!1,u("editorPartEditorGroupMaximized","Editor Part has a maximized group")),pTt=new B("isAuxiliaryEditorPart",!1,u("isAuxiliaryEditorPart","Editor Part is in an auxiliary window")),hTt=new B("editorIsOpen",!1,u("editorIsOpen","Whether an editor is open")),gTt=new B("inZenMode",!1,u("inZenMode","Whether Zen mode is enabled")),mTt=new B("isCenteredLayout",!1,u("isMainEditorCenteredLayout","Whether centered layout is enabled for the main editor")),fTt=new B("splitEditorsVertically",!1,u("splitEditorsVertically","Whether editors split vertically")),bTt=new B("mainEditorAreaVisible",!0,u("mainEditorAreaVisible","Whether the editor area in the main window is visible")),vTt=new B("editorTabsVisible",!0,u("editorTabsVisible","Whether editor tabs are visible")),yTt=new B("sideBarVisible",!1,u("sideBarVisible","Whether the sidebar is visible")),ITt=new B("sideBarFocus",!1,u("sideBarFocus","Whether the sidebar has keyboard focus")),STt=new B("activeViewlet","",u("activeViewlet","The identifier of the active viewlet")),CTt=new B("statusBarFocused",!1,u("statusBarFocused","Whether the status bar has keyboard focus")),xTt=new B("titleBarStyle",Xt?"native":"custom",u("titleBarStyle","Style of the window title bar")),ETt=new B("titleBarVisible",!1,u("titleBarVisible","Whether the title bar is visible")),TTt=new B("bannerFocused",!1,u("bannerFocused","Whether the banner has keyboard focus")),wTt=new B("notificationFocus",!0,u("notificationFocus","Whether a notification has keyboard focus")),_Tt=new B("notificationCenterVisible",!1,u("notificationCenterVisible","Whether the notifications center is visible")),DTt=new B("notificationToastsVisible",!1,u("notificationToastsVisible","Whether a notification toast is visible")),LTt=new B("activeAuxiliary","",u("activeAuxiliary","The identifier of the active auxiliary panel")),kTt=new B("auxiliaryBarFocus",!1,u("auxiliaryBarFocus","Whether the auxiliary bar has keyboard focus")),RTt=new B("auxiliaryBarVisible",!1,u("auxiliaryBarVisible","Whether the auxiliary bar is visible")),MTt=new B("activePanel","",u("activePanel","The identifier of the active panel")),OTt=new B("panelFocus",!1,u("panelFocus","Whether the panel has keyboard focus")),PTt=new B("panelPosition","bottom",u("panelPosition","The position of the panel, always 'bottom'")),ATt=new B("panelAlignment","center",u("panelAlignment","The alignment of the panel, either 'center', 'left', 'right' or 'justify'")),NTt=new B("panelVisible",!1,u("panelVisible","Whether the panel is visible")),FTt=new B("panelMaximized",!1,u("panelMaximized","Whether the panel is maximized")),BTt=new B("focusedView","",u("focusedView","The identifier of the view that has keyboard focus"));var Ui=class{constructor(e,t,n,i){this._contextKeyService=e;this._fileService=t;this._languageService=n;this._modelService=i;this._schemeKey=Ui.Scheme.bindTo(this._contextKeyService),this._filenameKey=Ui.Filename.bindTo(this._contextKeyService),this._dirnameKey=Ui.Dirname.bindTo(this._contextKeyService),this._pathKey=Ui.Path.bindTo(this._contextKeyService),this._langIdKey=Ui.LangId.bindTo(this._contextKeyService),this._resourceKey=Ui.Resource.bindTo(this._contextKeyService),this._extensionKey=Ui.Extension.bindTo(this._contextKeyService),this._hasResource=Ui.HasResource.bindTo(this._contextKeyService),this._isFileSystemResource=Ui.IsFileSystemResource.bindTo(this._contextKeyService),this._disposables.add(t.onDidChangeFileSystemProviderRegistrations(()=>{let o=this.get();this._isFileSystemResource.set(!!(o&&t.hasProvider(o)))})),this._disposables.add(i.onModelAdded(o=>{yn(o.uri,this.get())&&this._setLangId()})),this._disposables.add(i.onModelLanguageChanged(o=>{yn(o.model.uri,this.get())&&this._setLangId()}))}static Scheme=new B("resourceScheme",void 0,{type:"string",description:u("resourceScheme","The scheme of the resource")});static Filename=new B("resourceFilename",void 0,{type:"string",description:u("resourceFilename","The file name of the resource")});static Dirname=new B("resourceDirname",void 0,{type:"string",description:u("resourceDirname","The folder name the resource is contained in")});static Path=new B("resourcePath",void 0,{type:"string",description:u("resourcePath","The full path of the resource")});static LangId=new B("resourceLangId",void 0,{type:"string",description:u("resourceLangId","The language identifier of the resource")});static Resource=new B("resource",void 0,{type:"URI",description:u("resource","The full value of the resource including scheme and path")});static Extension=new B("resourceExtname",void 0,{type:"string",description:u("resourceExtname","The extension name of the resource")});static HasResource=new B("resourceSet",void 0,{type:"boolean",description:u("resourceSet","Whether a resource is present or not")});static IsFileSystemResource=new B("isFileSystemResource",void 0,{type:"boolean",description:u("isFileSystemResource","Whether the resource is backed by a file system provider")});_disposables=new X;_value;_resourceKey;_schemeKey;_filenameKey;_dirnameKey;_pathKey;_langIdKey;_extensionKey;_hasResource;_isFileSystemResource;dispose(){this._disposables.dispose()}_setLangId(){let e=this.get();if(!e){this._langIdKey.set(null);return}let t=this._modelService.getModel(e)?.getLanguageId()??this._languageService.guessLanguageIdByFilepathOrFirstLine(e);this._langIdKey.set(t)}set(e){e=e??void 0,!yn(this._value,e)&&(this._value=e,this._contextKeyService.bufferChangeEvents(()=>{this._resourceKey.set(e?e.toString():null),this._schemeKey.set(e?e.scheme:null),this._filenameKey.set(e?zo(e):null),this._dirnameKey.set(e?this.uriToPath(ns(e)):null),this._pathKey.set(e?this.uriToPath(e):null),this._setLangId(),this._extensionKey.set(e?Iu(e):null),this._hasResource.set(!!e),this._isFileSystemResource.set(e?this._fileService.hasProvider(e):!1)}))}uriToPath(e){return e.scheme===ye.file?e.fsPath:e.path}reset(){this._value=void 0,this._contextKeyService.bufferChangeEvents(()=>{this._resourceKey.reset(),this._schemeKey.reset(),this._filenameKey.reset(),this._dirnameKey.reset(),this._pathKey.reset(),this._langIdKey.reset(),this._extensionKey.reset(),this._hasResource.reset(),this._isFileSystemResource.reset()})}get(){return this._value}};Ui=_([y(0,Ne),y(1,nn),y(2,Lt),y(3,Bi)],Ui);var ywt=new B("explorerViewletVisible",!0,{type:"boolean",description:u("explorerViewletVisible","True when the EXPLORER viewlet is visible.")}),y8=new B("foldersViewVisible",!0,{type:"boolean",description:u("foldersViewVisible","True when the FOLDERS view (the file tree within the explorer view container) is visible.")}),I8=new B("explorerResourceIsFolder",!1,{type:"boolean",description:u("explorerResourceIsFolder","True when the focused item in the EXPLORER is a folder.")}),UQ=new B("explorerResourceReadonly",!1,{type:"boolean",description:u("explorerResourceReadonly","True when the focused item in the EXPLORER is read-only.")}),Iwt=UQ.toNegated(),Swt=new B("explorerResourceAvailableEditorIds",""),S8=new B("explorerResourceIsRoot",!1,{type:"boolean",description:u("explorerResourceIsRoot","True when the focused item in the EXPLORER is a root folder.")}),Cwt=new B("explorerResourceCut",!1,{type:"boolean",description:u("explorerResourceCut","True when an item in the EXPLORER has been cut for cut and paste.")}),xwt=new B("explorerResourceMoveableToTrash",!1,{type:"boolean",description:u("explorerResourceMoveableToTrash","True when the focused item in the EXPLORER can be moved to trash.")}),zQ=new B("filesExplorerFocus",!0,{type:"boolean",description:u("filesExplorerFocus","True when the focus is inside the EXPLORER view.")}),Ewt=new B("openEditorsFocus",!0,{type:"boolean",description:u("openEditorsFocus","True when the focus is inside the OPEN EDITORS view.")}),KQ=new B("explorerViewletFocus",!0,{type:"boolean",description:u("explorerViewletFocus","True when the focus is inside the EXPLORER viewlet.")}),Twt=new B("explorerViewletCompressedFocus",!0,{type:"boolean",description:u("explorerViewletCompressedFocus","True when the focused item in the EXPLORER view is a compact item.")}),wwt=new B("explorerViewletCompressedFirstFocus",!0,{type:"boolean",description:u("explorerViewletCompressedFirstFocus","True when the focus is inside a compact item's first part in the EXPLORER view.")}),_wt=new B("explorerViewletCompressedLastFocus",!0,{type:"boolean",description:u("explorerViewletCompressedLastFocus","True when the focus is inside a compact item's last part in the EXPLORER view.")}),Dwt=new B("viewHasSomeCollapsibleItem",!1,{type:"boolean",description:u("viewHasSomeCollapsibleItem","True when a workspace in the EXPLORER view has some collapsible root child.")}),Lwt=oe.and(y8,zQ,oe.not(Wf)),kwt=oe.and(y8,KQ,oe.not(Wf));var gp=class extends N{constructor(t,n,i,o){super();this.textFileService=t;this.fileService=n;this.languageService=i;this.modelService=o}fileWatcherDisposable=this._register(new Qt);static async open(t,n,i,o,s){await o.openEditor({original:{resource:gp.resourceToTextFile(n,t)},modified:{resource:t},label:i,options:s})}static resourceToTextFile(t,n){return n.with({scheme:t,query:JSON.stringify({scheme:n.scheme,query:n.query})})}static textFileToResource(t){let{scheme:n,query:i}=JSON.parse(t.query);return t.with({scheme:n,query:i})}async provideTextContent(t){if(!t.query)return null;let n=gp.textFileToResource(t),i=await this.resolveEditorModel(t);if(!this.fileWatcherDisposable.value){let o=new X;this.fileWatcherDisposable.value=o,o.add(this.fileService.onDidFilesChange(s=>{s.contains(n,0)&&this.resolveEditorModel(t,!1)})),i&&o.add(z.once(i.onWillDispose)(()=>this.fileWatcherDisposable.clear()))}return i}async resolveEditorModel(t,n=!0){let i=gp.textFileToResource(t),o=await this.textFileService.readStream(i),s=this.modelService.getModel(t);if(s)this.modelService.updateModel(s,o.value);else if(n){let a=this.modelService.getModel(i),l;a?l=this.languageService.createById(a.getLanguageId()):l=this.languageService.createByFilepathOrFirstLine(i),s=this.modelService.createModel(o.value,l,t)}return s}};gp=_([y(0,Us),y(1,nn),y(2,Lt),y(3,Bi)],gp);var zr=class r extends N{constructor(t,n){super();this.options=n;this.supportIcons=n?.supportIcons??!1,this.domNode=q(t,ie("span.monaco-highlighted-label"))}domNode;text="";title="";highlights=[];supportIcons;didEverRender=!1;customHover;get element(){return this.domNode}set(t,n=[],i="",o){t||(t=""),o&&(t=r.escapeNewLines(t,n)),!(this.didEverRender&&this.text===t&&this.title===i&&wn(this.highlights,n))&&(this.text=t,this.title=i,this.highlights=n,this.render())}render(){let t=[],n=0;for(let i of this.highlights){if(i.end===i.start)continue;if(n<i.start){let a=this.text.substring(n,i.start);this.supportIcons?t.push(...dd(a)):t.push(a),n=i.start}let o=this.text.substring(n,i.end),s=ie("span.highlight",void 0,...this.supportIcons?dd(o):[o]);i.extraClasses&&s.classList.add(...i.extraClasses),t.push(s),n=i.end}if(n<this.text.length){let i=this.text.substring(n);this.supportIcons?t.push(...dd(i)):t.push(i)}if(Wa(this.domNode,...t),this.options?.hoverDelegate?.showNativeHover)this.domNode.title=this.title;else if(!this.customHover&&this.title!==""){let i=this.options?.hoverDelegate??pt("mouse");this.customHover=this._register(ii().setupManagedHover(i,this.domNode,this.title))}else this.customHover&&this.customHover.update(this.title);this.didEverRender=!0}static escapeNewLines(t,n){let i=0,o=0;return t.replace(/\r\n|\r|\n/g,(s,a)=>{o=s===`\r
`?-1:0,a+=i;for(let l of n)l.end<=a||(l.start>=a&&(l.start+=o),l.end>=a&&(l.end+=o));return i+=o,"\u23CE"})}};var hb=class{modifierLabels;constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;let i=[];for(let o=0,s=t.length;o<s;o++){let a=t[o],l=n(a);if(l===null)return null;i[o]=GQ(a,l,this.modifierLabels[e])}return i.join(" ")}},gb=new hb({ctrlKey:"\u2303",shiftKey:"\u21E7",altKey:"\u2325",metaKey:"\u2318",separator:""},{ctrlKey:u({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:u({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:u({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:u({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:u({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:u({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:u({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:u({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),C8=new hb({ctrlKey:u({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:u({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:u({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:u({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:u({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:u({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:u({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:u({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:u({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:u({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:u({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:u({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),Gwt=new hb({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),x8=new hb({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function GQ(r,e,t){if(e===null)return"";let n=[];return r.ctrlKey&&n.push(t.ctrlKey),r.shiftKey&&n.push(t.shiftKey),r.altKey&&n.push(t.altKey),r.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}var mD=ie;var pg=class r extends N{constructor(t,n,i){super();this.os=n;this.options=i||Object.create(null);let o=this.options.keybindingLabelForeground;this.domNode=q(t,mD(".monaco-keybinding")),o&&(this.domNode.style.color=o),this.hover=this._register(ii().setupManagedHover(pt("mouse"),this.domNode,"")),this.didEverRender=!1,t.appendChild(this.domNode)}domNode;options;keyElements=new Set;hover;keybinding;matches;didEverRender;get element(){return this.domNode}set(t,n){this.didEverRender&&this.keybinding===t&&r.areSame(this.matches,n)||(this.keybinding=t,this.matches=n,this.render())}render(){if(this.clear(),this.keybinding){let t=this.keybinding.getChords();t[0]&&this.renderChord(this.domNode,t[0],this.matches?this.matches.firstPart:null);for(let i=1;i<t.length;i++)q(this.domNode,mD("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderChord(this.domNode,t[i],this.matches?this.matches.chordPart:null);let n=this.options.disableTitle??!1?void 0:this.keybinding.getAriaLabel()||void 0;this.hover.update(n),this.domNode.setAttribute("aria-label",n||"")}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.didEverRender=!0}clear(){Kt(this.domNode),this.keyElements.clear()}renderChord(t,n,i){let o=gb.modifierLabels[this.os];n.ctrlKey&&this.renderKey(t,o.ctrlKey,!!i?.ctrlKey,o.separator),n.shiftKey&&this.renderKey(t,o.shiftKey,!!i?.shiftKey,o.separator),n.altKey&&this.renderKey(t,o.altKey,!!i?.altKey,o.separator),n.metaKey&&this.renderKey(t,o.metaKey,!!i?.metaKey,o.separator);let s=n.keyLabel;s&&this.renderKey(t,s,!!i?.keyCode,"")}renderKey(t,n,i,o){q(t,this.createKeyElement(n,i?".highlight":"")),o&&q(t,mD("span.monaco-keybinding-key-separator",void 0,o))}renderUnbound(t){q(t,this.createKeyElement(u("unbound","Unbound")))}createKeyElement(t,n=""){let i=mD("span.monaco-keybinding-key"+n,void 0,t);return this.keyElements.add(i),this.options.keybindingLabelBackground&&(i.style.backgroundColor=this.options.keybindingLabelBackground),this.options.keybindingLabelBorder&&(i.style.borderColor=this.options.keybindingLabelBorder),this.options.keybindingLabelBottomBorder&&(i.style.borderBottomColor=this.options.keybindingLabelBottomBorder),this.options.keybindingLabelShadow&&(i.style.boxShadow=`inset 0 -1px 0 ${this.options.keybindingLabelShadow}`),i}static areSame(t,n){return t===n||!t&&!n?!0:!!t&&!!n&&wn(t.firstPart,n.firstPart)&&wn(t.chordPart,n.chordPart)}};var ma=j("clipboardService");function E8(r){let e=[],t=new Map,n=(i,o)=>{if(!t.has(i)&&(t.set(i,!0),!(i[0]==="_"||i.indexOf("vscode.")===0)&&r.get(i)!==!0)){if(!o){let s=St.getCommand(i);if(s&&typeof s.metadata=="object"&&gm(s.metadata.args))return}e.push(i)}};for(let i of go.getMenuItems(Je.CommandPalette))Th(i)&&n(i.command.id,!0);for(let i of ms.getEditorActions())n(i.id,!0);for(let i of St.getCommands().keys())n(i,!1);return e}var RS="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",V_t=new RegExp(RS);var w8=j("extensionGalleryService");var fD=j("extensionManagementService");var H_t=j("IGlobalExtensionEnablementService"),U_t=j("IExtensionTipsService"),z_t=gt("extensions","Extensions"),K_t=gt("preferences","Preferences");var lF=class{telemetryLevel=0;sessionId="someValue.sessionId";machineId="someValue.machineId";sqmId="someValue.sqmId";devDeviceId="someValue.devDeviceId";firstSessionDate="someValue.firstSessionDate";sendErrorTelemetry=!1;publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}setExperimentProperty(){}},CDt=new lF;function dF(r,e){return r.uuid&&e.uuid?r.uuid===e.uuid:r.id===e.id?!0:ts(r.id,e.id)===0}var KDt=new fo("pprice.better-merge");var cF=class{_generators=new Map;_cache=new WeakMap;register(e,t){this._generators.set(e,t)}readActivationEvents(e){return this._cache.has(e)||this._cache.set(e,this._readActivationEvents(e)),this._cache.get(e)}createActivationEventsMap(e){let t=Object.create(null);for(let n of e){let i=this.readActivationEvents(n);i.length>0&&(t[fo.toKey(n.identifier)]=i)}return t}_readActivationEvents(e){if(typeof e.main>"u"&&typeof e.browser>"u")return[];let t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let n=0;n<t.length;n++)t[n]==="onUri"&&(t[n]=`onUri:${fo.toKey(e.identifier)}`);if(!e.contributes)return t;for(let n in e.contributes){let i=this._generators.get(n);if(!i)continue;let o=e.contributes[n],s=Array.isArray(o)?o:[o];try{i(s,t)}catch(a){Be(a)}}return t}},uF=new cF;var $Q={activeComment:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts"},aiRelatedInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts"},aiTextSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts"},aiTextSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProviderNew.d.ts"},attributableCoverage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.attributableCoverage.d.ts"},authLearnMore:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts"},authSession:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts"},canonicalUriProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts"},chatParticipantAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts"},chatParticipantPrivate:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts",version:2},chatProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts"},chatTab:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts"},chatVariableResolver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatVariableResolver.d.ts"},codeActionAI:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts"},codeActionRanges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts"},codiconDecoration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts"},commentReactor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts"},commentReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts"},commentThreadApplicability:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts"},commentingRangeHint:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts"},commentsDraftState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts"},contribAccessibilityHelpContent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts"},contribChatParticipantDetection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribChatParticipantDetection.d.ts"},contribCommentEditorActionsMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts"},contribCommentPeekContext:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts"},contribCommentThreadAdditionalMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts"},contribCommentsViewThreadMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts"},contribDebugCreateConfiguration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDebugCreateConfiguration.d.ts"},contribDiffEditorGutterToolBarMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts"},contribEditSessions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts"},contribEditorContentMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts"},contribIssueReporter:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribIssueReporter.d.ts"},contribLabelFormatterWorkspaceTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts"},contribMenuBarHome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts"},contribMergeEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts"},contribMultiDiffEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts"},contribNotebookStaticPreloads:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts"},contribRemoteHelp:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts"},contribShareMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts"},contribSourceControlHistoryItemMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts"},contribSourceControlHistoryTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryTitleMenu.d.ts"},contribSourceControlInputBoxMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts"},contribSourceControlTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts"},contribStatusBarItems:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts"},contribViewContainerTitle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts"},contribViewsRemote:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts"},contribViewsWelcome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts"},createFileSystemWatcher:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.createFileSystemWatcher.d.ts"},customEditorMove:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts"},debugVisualization:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts"},defaultChatParticipant:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts"},diffCommand:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts"},diffContentOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts"},documentFiltersExclusive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts"},documentPaste:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentPaste.d.ts"},editSessionIdentityProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts"},editorHoverVerbosityLevel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts"},editorInsets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts"},embeddings:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts"},extensionRuntime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts"},extensionsAny:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts"},externalUriOpener:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts"},fileComments:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileComments.d.ts"},fileSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts"},fileSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProviderNew.d.ts"},findFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts"},findFiles2New:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2New.d.ts"},findTextInFiles:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts"},findTextInFilesNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFilesNew.d.ts"},fsChunks:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts"},idToken:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts"},inlineCompletionsAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts"},inlineEdit:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineEdit.d.ts"},interactive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts"},interactiveWindow:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts"},ipc:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts"},languageModelSystem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts"},languageStatusText:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts"},lmTools:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.lmTools.d.ts",version:6},mappedEditsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts"},multiDocumentHighlightProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts"},newSymbolNamesProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts"},notebookCellExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts"},notebookCellExecutionState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecutionState.d.ts"},notebookControllerAffinityHidden:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts"},notebookDeprecated:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts"},notebookExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts"},notebookKernelSource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts"},notebookLiveShare:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts"},notebookMessaging:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts"},notebookMime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts"},notebookReplDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts"},notebookVariableProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts"},portsAttributes:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts"},profileContentHandlers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts"},quickDiffProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts"},quickInputButtonLocation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickInputButtonLocation.d.ts"},quickPickItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts"},quickPickSortByLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts"},resolvers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts"},scmActionButton:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts"},scmHistoryProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts"},scmMultiDiffEditor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts"},scmSelectedProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts"},scmTextDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts"},scmValidation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts"},shareProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts"},showLocal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.showLocal.d.ts"},speech:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts"},tabInputMultiDiff:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts"},tabInputTextMerge:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts"},taskPresentationGroup:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts"},telemetry:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts"},terminalDataWriteEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts"},terminalDimensions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts"},terminalExecuteCommandEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts"},terminalQuickFixProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts"},terminalSelection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts"},testObserver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts"},testRelatedCode:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts"},textSearchCompleteNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchCompleteNew.d.ts"},textSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts"},textSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProviderNew.d.ts"},timeline:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts"},tokenInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts"},treeViewActiveItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts"},treeViewMarkdownMessage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts"},treeViewReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts"},tunnelFactory:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts"},tunnels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts"},workspaceTrust:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}},MS=Object.freeze($Q);var JDt=j("IV8InspectProfilingService"),qQ;(t=>{function r(n){return!!(n.samples&&n.timeDeltas)}t.isValidProfile=r;function e(n,i="noAbsolutePaths"){for(let o of n.nodes)o.callFrame&&o.callFrame.url&&(lu(o.callFrame.url)||/^\w[\w\d+.-]*:\/\/\/?/.test(o.callFrame.url))&&(o.callFrame.url=ur(i,Ho(o.callFrame.url)));return n}t.rewriteAbsolutePaths=e})(qQ||={});var fF=Te.as(Js.JSONContribution);var pF=class r{constructor(e,t){this.added=e;this.removed=t}static _toSet(e){let t=new rI;for(let n=0,i=e.length;n<i;n++)t.add(e[n].description.identifier);return t}static compute(e,t){if(!e||!e.length)return new r(t,[]);if(!t||!t.length)return new r([],e);let n=this._toSet(e),i=this._toSet(t),o=t.filter(a=>!n.has(a.description.identifier)),s=e.filter(a=>!i.has(a.description.identifier));return new r(o,s)}},hF=class{name;defaultExtensionKind;_handler;_users;_delta;constructor(e,t){this.name=e,this.defaultExtensionKind=t,this._handler=null,this._users=null,this._delta=null}setHandler(e){if(this._handler!==null)throw new Error("Handler already set!");return this._handler=e,this._handle(),{dispose:()=>{this._handler=null}}}acceptUsers(e){this._delta=pF.compute(this._users,e),this._users=e,this._handle()}_handle(){if(!(this._handler===null||this._users===null||this._delta===null))try{this._handler(this._users,this._delta)}catch(e){Be(e)}}},YQ={type:"string",enum:["ui","workspace"],enumDescriptions:[u("ui","UI extension kind. In a remote window, such extensions are enabled only when available on the local machine."),u("workspace","Workspace extension kind. In a remote window, such extensions are enabled only when available on the remote.")]},_8="vscode://schemas/vscode-extensions",gF={properties:{engines:{type:"object",description:u("vscode.extension.engines","Engine compatibility."),properties:{vscode:{type:"string",description:u("vscode.extension.engines.vscode","For VS Code extensions, specifies the VS Code version that the extension is compatible with. Cannot be *. For example: ^0.10.5 indicates compatibility with a minimum VS Code version of 0.10.5."),default:"^1.22.0"}}},publisher:{description:u("vscode.extension.publisher","The publisher of the VS Code extension."),type:"string"},displayName:{description:u("vscode.extension.displayName","The display name for the extension used in the VS Code gallery."),type:"string"},categories:{description:u("vscode.extension.categories","The categories used by the VS Code gallery to categorize the extension."),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:Mz},{type:"string",const:"Languages",deprecationMessage:u("vscode.extension.category.languages.deprecated","Use 'Programming  Languages' instead")}]}},galleryBanner:{type:"object",description:u("vscode.extension.galleryBanner","Banner used in the VS Code marketplace."),properties:{color:{description:u("vscode.extension.galleryBanner.color","The banner color on the VS Code marketplace page header."),type:"string"},theme:{description:u("vscode.extension.galleryBanner.theme","The color theme for the font used in the banner."),type:"string",enum:["dark","light"]}}},contributes:{description:u("vscode.extension.contributes","All contributions of the VS Code extension represented by this package."),type:"object",properties:{},default:{}},preview:{type:"boolean",description:u("vscode.extension.preview","Sets the extension to be flagged as a Preview in the Marketplace.")},enableProposedApi:{type:"boolean",deprecationMessage:u("vscode.extension.enableProposedApi.deprecated","Use `enabledApiProposals` instead.")},enabledApiProposals:{markdownDescription:u("vscode.extension.enabledApiProposals","Enable API proposals to try them out. Only valid **during development**. Extensions **cannot be published** with this property. For more details visit: https://code.visualstudio.com/api/advanced-topics/using-proposed-api"),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(MS).map(r=>r),markdownEnumDescriptions:Object.values(MS).map(r=>r.proposal)}},api:{markdownDescription:u("vscode.extension.api","Describe the API provided by this extension. For more details visit: https://code.visualstudio.com/api/advanced-topics/remote-extensions#handling-dependencies-with-remote-extensions"),type:"string",enum:["none"],enumDescriptions:[u("vscode.extension.api.none","Give up entirely the ability to export any APIs. This allows other extensions that depend on this extension to run in a separate extension host process or in a remote machine.")]},activationEvents:{description:u("vscode.extension.activationEvents","Activation events for the VS Code extension."),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:u("vscode.extension.activationEvents.onWebviewPanel","An activation event emmited when a webview is loaded of a certain viewType"),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:u("vscode.extension.activationEvents.onLanguage","An activation event emitted whenever a file that resolves to the specified language gets opened."),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:u("vscode.extension.activationEvents.onCommand","An activation event emitted whenever the specified command gets invoked."),body:"onCommand:${2:commandId}"},{label:"onDebug",description:u("vscode.extension.activationEvents.onDebug","An activation event emitted whenever a user is about to start debugging or about to setup debug configurations."),body:"onDebug"},{label:"onDebugInitialConfigurations",description:u("vscode.extension.activationEvents.onDebugInitialConfigurations",'An activation event emitted whenever a "launch.json" needs to be created (and all provideDebugConfigurations methods need to be called).'),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:u("vscode.extension.activationEvents.onDebugDynamicConfigurations",'An activation event emitted whenever a list of all debug configurations needs to be created (and all provideDebugConfigurations methods for the "dynamic" scope need to be called).'),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:u("vscode.extension.activationEvents.onDebugResolve","An activation event emitted whenever a debug session with the specific type is about to be launched (and a corresponding resolveDebugConfiguration method needs to be called)."),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:u("vscode.extension.activationEvents.onDebugAdapterProtocolTracker","An activation event emitted whenever a debug session with the specific type is about to be launched and a debug protocol tracker might be needed."),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:u("vscode.extension.activationEvents.workspaceContains","An activation event emitted whenever a folder is opened that contains at least a file matching the specified glob pattern."),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:u("vscode.extension.activationEvents.onStartupFinished","An activation event emitted after the start-up finished (after all `*` activated extensions have finished activating)."),body:"onStartupFinished"},{label:"onTaskType",description:u("vscode.extension.activationEvents.onTaskType","An activation event emitted whenever tasks of a certain type need to be listed or resolved."),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:u("vscode.extension.activationEvents.onFileSystem","An activation event emitted whenever a file or folder is accessed with the given scheme."),body:"onFileSystem:${1:scheme}"},{label:"onEditSession",description:u("vscode.extension.activationEvents.onEditSession","An activation event emitted whenever an edit session is accessed with the given scheme."),body:"onEditSession:${1:scheme}"},{label:"onSearch",description:u("vscode.extension.activationEvents.onSearch","An activation event emitted whenever a search is started in the folder with the given scheme."),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:u("vscode.extension.activationEvents.onView","An activation event emitted whenever the specified view is expanded.")},{label:"onUri",body:"onUri",description:u("vscode.extension.activationEvents.onUri","An activation event emitted whenever a system-wide Uri directed towards this extension is open.")},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:u("vscode.extension.activationEvents.onOpenExternalUri","An activation event emitted whenever a external uri (such as an http or https link) is being opened.")},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:u("vscode.extension.activationEvents.onCustomEditor","An activation event emitted whenever the specified custom editor becomes visible.")},{label:"onNotebook",body:"onNotebook:${1:type}",description:u("vscode.extension.activationEvents.onNotebook","An activation event emitted whenever the specified notebook document is opened.")},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:u("vscode.extension.activationEvents.onAuthenticationRequest","An activation event emitted whenever sessions are requested from the specified authentication provider.")},{label:"onRenderer",description:u("vscode.extension.activationEvents.onRenderer","An activation event emitted whenever a notebook output renderer is used."),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:u("vscode.extension.activationEvents.onTerminalProfile","An activation event emitted when a specific terminal profile is launched.")},{label:"onTerminalQuickFixRequest",body:"onTerminalQuickFixRequest:${1:quickFixId}",description:u("vscode.extension.activationEvents.onTerminalQuickFixRequest","An activation event emitted when a command matches the selector associated with this ID")},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:u("vscode.extension.activationEvents.onWalkthrough","An activation event emitted when a specified walkthrough is opened.")},{label:"onIssueReporterOpened",body:"onIssueReporterOpened",description:u("vscode.extension.activationEvents.onIssueReporterOpened","An activation event emitted when the issue reporter is opened.")},{label:"onChatParticipant",body:"onChatParticipant:${1:participantId}",description:u("vscode.extension.activationEvents.onChatParticipant","An activation event emitted when the specified chat participant is invoked.")},{label:"onLanguageModelTool",body:"onLanguageModelTool:${1:toolId}",description:u("vscode.extension.activationEvents.onLanguageModelTool","An activation event emitted when the specified language model tool is invoked.")},{label:"*",description:u("vscode.extension.activationEvents.star","An activation event emitted on VS Code startup. To ensure a great end user experience, please use this activation event in your extension only when no other activation events combination works in your use-case."),body:"*"}]}},badges:{type:"array",description:u("vscode.extension.badges","Array of badges to display in the sidebar of the Marketplace's extension page."),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:u("vscode.extension.badges.url","Badge image URL.")},href:{type:"string",description:u("vscode.extension.badges.href","Badge link.")},description:{type:"string",description:u("vscode.extension.badges.description","Badge description.")}}}},markdown:{type:"string",description:u("vscode.extension.markdown","Controls the Markdown rendering engine used in the Marketplace. Either github (default) or standard."),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:u("vscode.extension.qna","Controls the Q&A link in the Marketplace. Set to marketplace to enable the default Marketplace Q & A site. Set to a string to provide the URL of a custom Q & A site. Set to false to disable Q & A altogether."),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:u("vscode.extension.extensionDependencies","Dependencies to other extensions. The identifier of an extension is always ${publisher}.${name}. For example: vscode.csharp."),type:"array",uniqueItems:!0,items:{type:"string",pattern:RS}},extensionPack:{description:u("vscode.extension.contributes.extensionPack","A set of extensions that can be installed together. The identifier of an extension is always ${publisher}.${name}. For example: vscode.csharp."),type:"array",uniqueItems:!0,items:{type:"string",pattern:RS}},extensionKind:{description:u("extensionKind","Define the kind of an extension. `ui` extensions are installed and run on the local machine while `workspace` extensions run on the remote."),type:"array",items:YQ,default:["workspace"],defaultSnippets:[{body:["ui"],description:u("extensionKind.ui","Define an extension which can run only on the local machine when connected to remote window.")},{body:["workspace"],description:u("extensionKind.workspace","Define an extension which can run only on the remote machine when connected remote window.")},{body:["ui","workspace"],description:u("extensionKind.ui-workspace","Define an extension which can run on either side, with a preference towards running on the local machine.")},{body:["workspace","ui"],description:u("extensionKind.workspace-ui","Define an extension which can run on either side, with a preference towards running on the remote machine.")},{body:[],description:u("extensionKind.empty","Define an extension which cannot run in a remote context, neither on the local, nor on the remote machine.")}]},capabilities:{description:u("vscode.extension.capabilities","Declare the set of supported capabilities by the extension."),type:"object",properties:{virtualWorkspaces:{description:u("vscode.extension.capabilities.virtualWorkspaces","Declares whether the extension should be enabled in virtual workspaces. A virtual workspace is a workspace which is not backed by any on-disk resources. When false, this extension will be automatically disabled in virtual workspaces. Default is true."),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:u("vscode.extension.capabilities.virtualWorkspaces.supported","Declares the level of support for virtual workspaces by the extension."),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[u("vscode.extension.capabilities.virtualWorkspaces.supported.limited","The extension will be enabled in virtual workspaces with some functionality disabled."),u("vscode.extension.capabilities.virtualWorkspaces.supported.true","The extension will be enabled in virtual workspaces with all functionality enabled."),u("vscode.extension.capabilities.virtualWorkspaces.supported.false","The extension will not be enabled in virtual workspaces.")]},description:{type:"string",markdownDescription:u("vscode.extension.capabilities.virtualWorkspaces.description","A description of how virtual workspaces affects the extensions behavior and why it is needed. This only applies when `supported` is not `true`.")}}},untrustedWorkspaces:{description:u("vscode.extension.capabilities.untrustedWorkspaces","Declares how the extension should be handled in untrusted workspaces."),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:u("vscode.extension.capabilities.untrustedWorkspaces.supported","Declares the level of support for untrusted workspaces by the extension."),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[u("vscode.extension.capabilities.untrustedWorkspaces.supported.limited","The extension will be enabled in untrusted workspaces with some functionality disabled."),u("vscode.extension.capabilities.untrustedWorkspaces.supported.true","The extension will be enabled in untrusted workspaces with all functionality enabled."),u("vscode.extension.capabilities.untrustedWorkspaces.supported.false","The extension will not be enabled in untrusted workspaces.")]},restrictedConfigurations:{description:u("vscode.extension.capabilities.untrustedWorkspaces.restrictedConfigurations","A list of configuration keys contributed by the extension that should not use workspace values in untrusted workspaces."),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:u("vscode.extension.capabilities.untrustedWorkspaces.description","A description of how workspace trust affects the extensions behavior and why it is needed. This only applies when `supported` is not `true`.")}}}}},sponsor:{description:u("vscode.extension.contributes.sponsor","Specify the location from where users can sponsor your extension."),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:u("vscode.extension.contributes.sponsor.url","URL from where users can sponsor your extension. It must be a valid URL with a HTTP or HTTPS protocol. Example value: https://github.com/sponsors/nvaccess"),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:u("vscode.extension.scripts.prepublish","Script executed before the package is published as a VS Code extension."),type:"string"},"vscode:uninstall":{description:u("vscode.extension.scripts.uninstall","Uninstall hook for VS Code extension. Script that gets executed when the extension is completely uninstalled from VS Code which is when VS Code is restarted (shutdown and start) after the extension is uninstalled. Only Node scripts are supported."),type:"string"}}},icon:{type:"string",description:u("vscode.extension.icon","The path to a 128x128 pixel icon.")},l10n:{type:"string",description:u({key:"vscode.extension.l10n",comment:['{Locked="bundle.l10n._locale_.json"}','{Locked="vscode.l10n API"}']},"The relative path to a folder containing localization (bundle.l10n.*.json) files. Must be specified if you are using the vscode.l10n API.")},pricing:{type:"string",markdownDescription:u("vscode.extension.pricing","The pricing information for the extension. Can be Free (default) or Trial. For more details visit: https://code.visualstudio.com/api/working-with-extensions/publishing-extension#extension-pricing-label"),enum:["Free","Trial"],default:"Free"}}},mF=class{_extensionPoints=new Map;registerExtensionPoint(e){if(this._extensionPoints.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);let t=new hF(e.extensionPoint,e.defaultExtensionKind);return this._extensionPoints.set(e.extensionPoint,t),e.activationEventsGenerator&&uF.register(e.extensionPoint,e.activationEventsGenerator),gF.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,fF.registerSchema(_8,gF),t}getExtensionPoints(){return Array.from(this._extensionPoints.values())}},D8={ExtensionsRegistry:"ExtensionsRegistry"};Te.add(D8.ExtensionsRegistry,new mF);var bD=Te.as(D8.ExtensionsRegistry);fF.registerSchema(_8,gF);fF.registerSchema(IK,{properties:{extensionEnabledApiProposals:{description:u("product.extensionEnabledApiProposals","API proposals that the respective extensions can freely use."),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(MS),markdownEnumDescriptions:Object.values(MS).map(r=>r.proposal)}}]}}}});var ykt=Object.freeze({identifier:new fo("nullExtensionDescription"),name:"Null Extension Description",version:"0.0.0",publisher:"vscode",engines:{vscode:""},extensionLocation:Z.parse("void:location"),isBuiltin:!1,targetPlatform:"undefined",isUserBuiltin:!1,isUnderDevelopment:!1});var wd=j("extensionService");var Fc="keybinding.entry.template",L8=u("default","System"),k8=u("extension","Extension"),R8=u("user","User");var XQ=Fm(ku,Ru,vE),QQ=/@command:\s*([^\+]+)/i,ZQ=/\+when:\s*(.+)/i,M8=/@source:\s*(user|default|system|extension)/i,O8=/@ext:\s*((".+")|([^\s]+))/i,JQ=/@keybinding:\s*((\".+\")|(\S+))/i,ir=class extends pd{constructor(t,n,i){super();this.keybindingsService=n;this.extensionService=i;this._keybindingItems=[],this._keybindingItemsSortedByPrecedence=[],this.modifierLabels={ui:gb.modifierLabels[t],aria:C8.modifierLabels[t],user:x8.modifierLabels[t]}}_keybindingItems;_keybindingItemsSortedByPrecedence;modifierLabels;fetch(t,n=!1){let i=n?this._keybindingItemsSortedByPrecedence:this._keybindingItems,o=QQ.exec(t);if(o&&o[1]){let s=o[1].trim(),a=i.filter(l=>l.command===s);if(a.length){let l=ZQ.exec(t);if(l&&l[1]){let d=l[1].trim();a=this.filterByWhen(a,s,d)}}return a.map(l=>({id:ir.getId(l),keybindingItem:l,templateId:Fc}))}if(M8.test(t))i=this.filterBySource(i,t),t=t.replace(M8,"");else{let s=O8.exec(t);if(s&&(s[2]||s[3])){let a=s[2]?s[2].substring(1,s[2].length-1):s[3];i=this.filterByExtension(i,a),t=t.replace(O8,"")}else{let a=JQ.exec(t);a&&(a[2]||a[3])&&(t=a[2]||`"${a[3]}"`)}}return t=t.trim(),t?this.filterByText(i,t):i.map(s=>({id:ir.getId(s),keybindingItem:s,templateId:Fc}))}filterBySource(t,n){return/@source:\s*default/i.test(n)||/@source:\s*system/i.test(n)?t.filter(i=>i.source===L8):/@source:\s*user/i.test(n)?t.filter(i=>i.source===R8):/@source:\s*extension/i.test(n)?t.filter(i=>!xt(i.source)||i.source===k8):t}filterByExtension(t,n){return n=n.toLowerCase().trim(),t.filter(i=>!xt(i.source)&&(fo.equals(i.source.identifier,n)||i.source.displayName?.toLowerCase()===n.toLowerCase()))}filterByText(t,n){let i=n.charAt(0)==='"',o=n.charAt(n.length-1)==='"',s=i&&o;i&&(n=n.substring(1)),o&&(n=n.substring(0,n.length-1)),n=n.trim();let a=[],l=n.split(" "),d=this.splitKeybindingWords(l);for(let c of t){let p=new bF(this.modifierLabels,c,n,l,d,s);(p.commandIdMatches||p.commandLabelMatches||p.commandDefaultLabelMatches||p.sourceMatches||p.whenMatches||p.keybindingMatches||p.extensionIdMatches||p.extensionLabelMatches)&&a.push({id:ir.getId(c),templateId:Fc,commandLabelMatches:p.commandLabelMatches||void 0,commandDefaultLabelMatches:p.commandDefaultLabelMatches||void 0,keybindingItem:c,keybindingMatches:p.keybindingMatches||void 0,commandIdMatches:p.commandIdMatches||void 0,sourceMatches:p.sourceMatches||void 0,whenMatches:p.whenMatches||void 0,extensionIdMatches:p.extensionIdMatches||void 0,extensionLabelMatches:p.extensionLabelMatches||void 0})}return a}filterByWhen(t,n,i){if(t.length===0)return[];let o=t.filter(d=>d.when===i);if(o.length)return o;let s=t[0].commandLabel,a=new bS(void 0,n,null,oe.deserialize(i),!1,null,!1),l=new Map([[n,s]]);return[ir.toKeybindingEntry(n,a,l,this.getExtensionsMapping())]}splitKeybindingWords(t){let n=[];for(let i of t)n.push(...Mr(i.split("+")));return n}async resolve(t=new Map){let n=this.getExtensionsMapping();this._keybindingItemsSortedByPrecedence=[];let i=new Map;for(let s of this.keybindingsService.getKeybindings())s.command&&(this._keybindingItemsSortedByPrecedence.push(ir.toKeybindingEntry(s.command,s,t,n)),i.set(s.command,!0));let o=this.keybindingsService.getDefaultKeybindings().map(s=>s.command);for(let s of E8(i)){let a=new bS(void 0,s,null,void 0,o.indexOf(s)===-1,null,!1);this._keybindingItemsSortedByPrecedence.push(ir.toKeybindingEntry(s,a,t,n))}return this._keybindingItemsSortedByPrecedence=ai(this._keybindingItemsSortedByPrecedence,s=>ir.getId(s)),this._keybindingItems=this._keybindingItemsSortedByPrecedence.slice(0).sort((s,a)=>ir.compareKeybindingData(s,a)),super.resolve()}static getId(t){return t.command+(t?.keybinding?.getAriaLabel()??"")+t.when+(xt(t.source)?t.source:t.source.identifier.value)}getExtensionsMapping(){let t=new sI;for(let n of this.extensionService.extensions)t.set(n.identifier,n);return t}static compareKeybindingData(t,n){return t.keybinding&&!n.keybinding?-1:n.keybinding&&!t.keybinding?1:t.commandLabel&&!n.commandLabel?-1:n.commandLabel&&!t.commandLabel?1:t.commandLabel&&n.commandLabel&&t.commandLabel!==n.commandLabel?t.commandLabel.localeCompare(n.commandLabel):t.command===n.command?t.keybindingItem.isDefault?1:-1:t.command.localeCompare(n.command)}static toKeybindingEntry(t,n,i,o){let s=go.getCommand(t),a=i.get(t),l=R8;if(n.isDefault){let d=n.extensionId??(n.resolvedKeybinding?void 0:s?.source?.id);l=d?o.get(d)??k8:L8}return{keybinding:n.resolvedKeybinding,keybindingItem:n,command:t,commandLabel:ir.getCommandLabel(s,a),commandDefaultLabel:ir.getCommandDefaultLabel(s),when:n.when?n.when.serialize():"",source:l}}static getCommandDefaultLabel(t){if(!s1.isDefaultVariant()&&t&&t.title&&t.title.original){let n=t.category?t.category.original:void 0,i=t.title.original;return n?u("cat.title","{0}: {1}",n,i):i}return null}static getCommandLabel(t,n){if(t){let i=t.category?typeof t.category=="string"?t.category:t.category.value:void 0,o=typeof t.title=="string"?t.title:t.title.value;return i?u("cat.title","{0}: {1}",i,o):o}return n||""}};ir=_([y(1,_n),y(2,wd)],ir);var bF=class{constructor(e,t,n,i,o,s){this.modifierLabels=e;s||(this.commandIdMatches=this.matches(n,t.command,Fm(Ru,Ny),i),this.commandLabelMatches=t.commandLabel?this.matches(n,t.commandLabel,(a,l)=>Ru(a,t.commandLabel,!0),i):null,this.commandDefaultLabelMatches=t.commandDefaultLabel?this.matches(n,t.commandDefaultLabel,(a,l)=>Ru(a,t.commandDefaultLabel,!0),i):null,this.whenMatches=t.when?this.matches(null,t.when,Fm(Ru,Ny),i):null,xt(t.source)?this.sourceMatches=this.matches(n,t.source,(a,l)=>Ru(a,t.source,!0),i):this.extensionLabelMatches=t.source.displayName?this.matches(n,t.source.displayName,(a,l)=>Ru(a,t.commandLabel,!0),i):null),this.keybindingMatches=t.keybinding?this.matchesKeybinding(t.keybinding,n,o,s):null}commandIdMatches=null;commandLabelMatches=null;commandDefaultLabelMatches=null;sourceMatches=null;whenMatches=null;keybindingMatches=null;extensionIdMatches=null;extensionLabelMatches=null;matches(e,t,n,i){let o=e?XQ(e,t):null;return o||(o=this.matchesWords(i,t,n)),o&&(o=this.filterAndSort(o)),o}matchesWords(e,t,n){let i=[];for(let o of e){let s=n(o,t);if(s)i=[...i||[],...s];else{i=null;break}}return i}filterAndSort(e){return ai(e,t=>t.start+"."+t.end).filter(t=>!e.some(n=>!(n.start===t.start&&n.end===t.end)&&n.start<=t.start&&n.end>=t.end)).sort((t,n)=>t.start-n.start)}matchesKeybinding(e,t,n,i){let[o,s]=e.getChords(),a=e.getUserSettingsLabel(),l=e.getAriaLabel(),d=e.getLabel();if(a&&ts(t,a)===0||l&&ts(t,l)===0||d&&ts(t,d)===0)return{firstPart:this.createCompleteMatch(o),chordPart:this.createCompleteMatch(s)};let c={},p={},h=[],g=[],f=[],m=!0;for(let b=0;b<n.length;b++){let v=n[b],S=!1,x=!1;m=m&&!c.keyCode;let E=!p.keyCode;if(m&&(S=this.matchPart(o,c,v,i),c.keyCode)){for(let w of f)g.indexOf(w)===-1&&h.splice(h.indexOf(w),1);p={},f=[],E=!1}E&&(x=this.matchPart(s,p,v,i)),S&&g.push(b),x&&f.push(b),(S||x)&&h.push(b),m=m&&this.isModifier(v)}return h.length!==n.length||i&&(!this.isCompleteMatch(o,c)||!oc(p)&&!this.isCompleteMatch(s,p))?null:this.hasAnyMatch(c)||this.hasAnyMatch(p)?{firstPart:c,chordPart:p}:null}matchPart(e,t,n,i){let o=!1;return this.matchesMetaModifier(e,n)&&(o=!0,t.metaKey=!0),this.matchesCtrlModifier(e,n)&&(o=!0,t.ctrlKey=!0),this.matchesShiftModifier(e,n)&&(o=!0,t.shiftKey=!0),this.matchesAltModifier(e,n)&&(o=!0,t.altKey=!0),this.matchesKeyCode(e,n,i)&&(t.keyCode=!0,o=!0),o}matchesKeyCode(e,t,n){if(!e)return!1;let i=e.keyAriaLabel||"";if(n||i.length===1||t.length===1){if(ts(i,t)===0)return!0}else if(vE(t,i))return!0;return!1}matchesMetaModifier(e,t){return!e||!e.metaKey?!1:this.wordMatchesMetaModifier(t)}matchesCtrlModifier(e,t){return!e||!e.ctrlKey?!1:this.wordMatchesCtrlModifier(t)}matchesShiftModifier(e,t){return!e||!e.shiftKey?!1:this.wordMatchesShiftModifier(t)}matchesAltModifier(e,t){return!e||!e.altKey?!1:this.wordMatchesAltModifier(t)}hasAnyMatch(e){return!!e.altKey||!!e.ctrlKey||!!e.metaKey||!!e.shiftKey||!!e.keyCode}isCompleteMatch(e,t){return e?!(!t.keyCode||e.metaKey&&!t.metaKey||e.altKey&&!t.altKey||e.ctrlKey&&!t.ctrlKey||e.shiftKey&&!t.shiftKey):!0}createCompleteMatch(e){let t={};return e&&(t.keyCode=!0,e.metaKey&&(t.metaKey=!0),e.altKey&&(t.altKey=!0),e.ctrlKey&&(t.ctrlKey=!0),e.shiftKey&&(t.shiftKey=!0)),t}isModifier(e){return!!(this.wordMatchesAltModifier(e)||this.wordMatchesCtrlModifier(e)||this.wordMatchesMetaModifier(e)||this.wordMatchesShiftModifier(e))}wordMatchesAltModifier(e){return!!(Rn(this.modifierLabels.ui.altKey,e)||Rn(this.modifierLabels.aria.altKey,e)||Rn(this.modifierLabels.user.altKey,e)||Rn(u("option","option"),e))}wordMatchesCtrlModifier(e){return!!(Rn(this.modifierLabels.ui.ctrlKey,e)||Rn(this.modifierLabels.aria.ctrlKey,e)||Rn(this.modifierLabels.user.ctrlKey,e))}wordMatchesMetaModifier(e){return!!(Rn(this.modifierLabels.ui.metaKey,e)||Rn(this.modifierLabels.aria.metaKey,e)||Rn(this.modifierLabels.user.metaKey,e)||Rn(u("meta","meta"),e))}wordMatchesShiftModifier(e){return!!(Rn(this.modifierLabels.ui.shiftKey,e)||Rn(this.modifierLabels.aria.shiftKey,e)||Rn(this.modifierLabels.user.shiftKey,e))}};var Wo=j("contextViewService"),or=j("contextMenuService");function P8(r){return r.lookupKeybinding("history.showPrevious")?.getElectronAccelerator()==="Up"&&r.lookupKeybinding("history.showNext")?.getElectronAccelerator()==="Down"}var A8=xn("settings-folder-dropdown",re.triangleDown,u("settingsScopeDropDownIcon","Icon for the folder dropdown button in the split JSON Settings editor.")),N8=xn("settings-more-action",re.gear,u("settingsMoreActionIcon","Icon for the 'more actions' action in the Settings UI.")),F8=xn("keybindings-record-keys",re.recordKeys,u("keybindingsRecordKeysIcon","Icon for the 'record keys' action in the keybinding UI.")),B8=xn("keybindings-sort",re.sortPrecedence,u("keybindingsSortIcon","Icon for the 'sort by precedence' toggle in the keybinding UI.")),W8=xn("keybindings-edit",re.edit,u("keybindingsEditIcon","Icon for the edit action in the keybinding UI.")),V8=xn("keybindings-add",re.add,u("keybindingsAddIcon","Icon for the add action in the keybinding UI.")),hg=xn("settings-edit",re.edit,u("settingsEditIcon","Icon for the edit action in the Settings UI.")),vF=xn("settings-remove",re.close,u("settingsRemoveIcon","Icon for the remove action in the Settings UI.")),H8=xn("settings-discard",re.discard,u("preferencesDiscardIcon","Icon for the discard action in the Settings UI.")),vD=xn("preferences-clear-input",re.clearAll,u("preferencesClearInput","Icon for clear input in the Settings and keybinding UI.")),U8=xn("preferences-filter",re.filter,u("settingsFilter","Icon for the button that suggests filters for the Settings UI.")),gg=xn("preferences-open-settings",re.goToFile,u("preferencesOpenSettings","Icon for open settings commands."));var rr=j("hoverService"),yD=class extends N{constructor(t,n,i={},o,s){super();this.placement=t;this.instantHover=n;this.overrideOptions=i;this.configurationService=o;this.hoverService=s;this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))}))}lastHoverHideTime=0;timeLimit=200;_delay;get delay(){return this.isInstantlyHovering()?0:this._delay}hoverDisposables=this._register(new X);showHover(t,n){let i=typeof this.overrideOptions=="function"?this.overrideOptions(t,n):this.overrideOptions;this.hoverDisposables.clear();let o=Yn(t.target)?[t.target]:t.target.targetElements;for(let a of o)this.hoverDisposables.add(dn(a,"keydown",l=>{l.equals(9)&&this.hoverService.hideHover()}));let s=Yn(t.content)?void 0:t.content.toString();return this.hoverService.showHover({...t,...i,persistence:{hideOnKeyDown:!0,...i.persistence},id:s,appearance:{...t.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...i.appearance}},n)}isInstantlyHovering(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}setInstantHoverTimeLimit(t){if(!this.instantHover)throw new Error("Instant hover is not enabled");this.timeLimit=t}onDidHideHover(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}};yD=_([y(3,Ge),y(4,rr)],yD);var OS=class extends oo{constructor(t,n,i,o){super(null,t);this.contextService=n;this.contextMenuService=i;this.hoverService=o;let s=this.contextService.getWorkspace();this._folder=s.folders.length===1?s.folders[0]:null,this._register(this.contextService.onDidChangeWorkspaceFolders(()=>this.onWorkspaceFoldersChanged()))}_folder;_folderSettingCounts=new Map;container;anchorElement;anchorElementHover;labelElement;detailsElement;dropDownElement;get folder(){return this._folder}set folder(t){this._folder=t,this.update()}setCount(t,n){let i=this.contextService.getWorkspaceFolder(t);if(!i)throw new Error("unknown folder");let o=i.uri;this._folderSettingCounts.set(o.toString(),n),this.update()}render(t){this.element=t,this.container=t,this.labelElement=ie(".action-title"),this.detailsElement=ie(".action-details"),this.dropDownElement=ie(".dropdown-icon.hide"+Ae.asCSSSelector(A8)),this.anchorElement=ie("a.action-label.folder-settings",{role:"button","aria-haspopup":"true",tabindex:"0"},this.labelElement,this.detailsElement,this.dropDownElement),this.anchorElementHover=this._register(this.hoverService.setupManagedHover(pt("mouse"),this.anchorElement,"")),this._register(U(this.anchorElement,ee.MOUSE_DOWN,n=>qe.stop(n))),this._register(U(this.anchorElement,ee.CLICK,n=>this.onClick(n))),this._register(U(this.container,ee.KEY_UP,n=>this.onKeyUp(n))),q(this.container,this.anchorElement),this.update()}onKeyUp(t){switch(new it(t).keyCode){case 3:case 10:this.onClick(t);return}}onClick(t){qe.stop(t,!0),!this.folder||this._action.checked?this.showMenu():this._action.run(this._folder)}updateEnabled(){this.update()}updateChecked(){this.update()}onWorkspaceFoldersChanged(){let t=this._folder,n=this.contextService.getWorkspace();t&&(this._folder=n.folders.filter(i=>yn(i.uri,t.uri))[0]||n.folders[0]),this._folder=this._folder?this._folder:n.folders.length===1?n.folders[0]:null,this.update(),this._action.checked&&this._action.run(this._folder)}update(){let t=0;this._folderSettingCounts.forEach(i=>t+=i);let n=this.contextService.getWorkspace();if(this._folder){this.labelElement.textContent=this._folder.name,this.anchorElementHover.update(this._folder.name);let i=this.labelWithCount(this._action.label,t);this.detailsElement.textContent=i,this.dropDownElement.classList.toggle("hide",n.folders.length===1||!this._action.checked)}else{let i=this.labelWithCount(this._action.label,t);this.labelElement.textContent=i,this.detailsElement.textContent="",this.anchorElementHover.update(this._action.label),this.dropDownElement.classList.remove("hide")}this.anchorElement.classList.toggle("checked",this._action.checked),this.container.classList.toggle("disabled",!this._action.enabled)}showMenu(){this.contextMenuService.showContextMenu({getAnchor:()=>this.container,getActions:()=>this.getDropdownMenuActions(),getActionViewItem:()=>{},onHide:()=>{this.anchorElement.blur()}})}getDropdownMenuActions(){let t=[],n=this.contextService.getWorkspace().folders;return this.contextService.getWorkbenchState()===3&&n.length>0&&t.push(...n.map((i,o)=>{let s=this._folderSettingCounts.get(i.uri.toString());return{id:"folderSettingsTarget"+o,label:this.labelWithCount(i.name,s),tooltip:this.labelWithCount(i.name,s),checked:!!this.folder&&yn(this.folder.uri,i.uri),enabled:!0,class:void 0,run:()=>this._action.run(i)}})),t}labelWithCount(t,n){return n&&(t+=` (${n})`),t}};OS=_([y(1,fn),y(2,or),y(3,rr)],OS);var mb=class extends On{constructor(t,n,i,o,s,a,l){super();this.contextService=i;this.instantiationService=o;this.environmentService=s;this.labelService=a;this.languageService=l;this.options=n??{},this.create(t),this._register(this.contextService.onDidChangeWorkbenchState(()=>this.onWorkbenchStateChanged())),this._register(this.contextService.onDidChangeWorkspaceFolders(()=>this.update()))}settingsSwitcherBar;userLocalSettings;userRemoteSettings;workspaceSettings;folderSettingsAction;folderSettings;options;_settingsTarget=null;_onDidTargetChange=this._register(new T);onDidTargetChange=this._onDidTargetChange.event;resetLabels(){let t=this.environmentService.remoteAuthority,n=t&&this.labelService.getHostLabel(ye.vscodeRemote,t);this.userLocalSettings.label=u("userSettings","User"),this.userRemoteSettings.label=u("userSettingsRemote","Remote")+(n?` [${n}]`:""),this.workspaceSettings.label=u("workspaceSettings","Workspace"),this.folderSettingsAction.label=u("folderSettings","Folder")}create(t){let n=q(t,ie(".settings-tabs-widget"));this.settingsSwitcherBar=this._register(new Wi(n,{orientation:0,focusOnlyEnabledItems:!0,ariaLabel:u("settingsSwitcherBarAriaLabel","Settings Switcher"),ariaRole:"tablist",actionViewItemProvider:(s,a)=>s.id==="folderSettings"?this.folderSettings:void 0})),this.userLocalSettings=new un("userSettings","",".settings-tab",!0,()=>this.updateTarget(3)),this.userLocalSettings.tooltip=u("userSettings","User"),this.userRemoteSettings=new un("userSettingsRemote","",".settings-tab",!0,()=>this.updateTarget(4));let i=this.environmentService.remoteAuthority,o=i&&this.labelService.getHostLabel(ye.vscodeRemote,i);this.userRemoteSettings.tooltip=u("userSettingsRemote","Remote")+(o?` [${o}]`:""),this.workspaceSettings=new un("workspaceSettings","",".settings-tab",!1,()=>this.updateTarget(5)),this.folderSettingsAction=new un("folderSettings","",".settings-tab",!1,async s=>{this.updateTarget(JU(s)?s.uri:3)}),this.folderSettings=this.instantiationService.createInstance(OS,this.folderSettingsAction),this.resetLabels(),this.update(),this.settingsSwitcherBar.push([this.userLocalSettings,this.userRemoteSettings,this.workspaceSettings,this.folderSettingsAction])}get settingsTarget(){return this._settingsTarget}set settingsTarget(t){this._settingsTarget=t,this.userLocalSettings.checked=3===this.settingsTarget,this.userRemoteSettings.checked=4===this.settingsTarget,this.workspaceSettings.checked=5===this.settingsTarget,this.settingsTarget instanceof Z?(this.folderSettings.action.checked=!0,this.folderSettings.folder=this.contextService.getWorkspaceFolder(this.settingsTarget)):this.folderSettings.action.checked=!1}setResultCount(t,n){if(t===5){let i=u("workspaceSettings","Workspace");n&&(i+=` (${n})`),this.workspaceSettings.label=i}else if(t===3){let i=u("userSettings","User");n&&(i+=` (${n})`),this.userLocalSettings.label=i}else t instanceof Z&&this.folderSettings.setCount(t,n)}updateLanguageFilterIndicators(t){if(this.resetLabels(),t){let n=this.languageService.getLanguageName(t);if(n){let i=` [${n}]`;this.userLocalSettings.label+=i,this.userRemoteSettings.label+=i,this.workspaceSettings.label+=i,this.folderSettingsAction.label+=i}}}onWorkbenchStateChanged(){this.folderSettings.folder=null,this.update(),this.settingsTarget===5&&this.contextService.getWorkbenchState()===3&&this.updateTarget(3)}updateTarget(t){return this.settingsTarget===t||t instanceof Z&&this.settingsTarget instanceof Z&&yn(this.settingsTarget,t)||(this.settingsTarget=t,this._onDidTargetChange.fire(this.settingsTarget)),Promise.resolve(void 0)}async update(){this.settingsSwitcherBar.domNode.classList.toggle("empty-workbench",this.contextService.getWorkbenchState()===1),this.userRemoteSettings.enabled=!!(this.options.enableRemoteSettings&&this.environmentService.remoteAuthority),this.workspaceSettings.enabled=this.contextService.getWorkbenchState()!==1,this.folderSettings.action.enabled=this.contextService.getWorkbenchState()===3&&this.contextService.getWorkspace().folders.length>0,this.workspaceSettings.tooltip=u("workspaceSettings","Workspace")}};mb=_([y(2,fn),y(3,we),y(4,Hi),y(5,ro),y(6,Lt)],mb);var fb=class extends On{constructor(t,n,i,o,s,a){super();this.options=n;this.contextViewService=i;this.instantiationService=o;this.contextKeyService=s;this.keybindingService=a;this.create(t)}domNode;countElement;searchContainer;inputBox;controlsDiv;_onDidChange=this._register(new T);onDidChange=this._onDidChange.event;_onFocus=this._register(new T);onFocus=this._onFocus.event;create(t){this.domNode=q(t,ie("div.settings-header-widget")),this.createSearchContainer(q(this.domNode,ie("div.settings-search-container"))),this.controlsDiv=q(this.domNode,ie("div.settings-search-controls")),this.options.showResultCount&&(this.countElement=q(this.controlsDiv,ie(".settings-count-widget")),this.countElement.style.backgroundColor=ne(sa),this.countElement.style.color=ne(Gu),this.countElement.style.border=`1px solid ${ne(Ie)}`),this.inputBox.inputElement.setAttribute("aria-live",this.options.ariaLive||"off"),this.options.ariaLabelledBy&&this.inputBox.inputElement.setAttribute("aria-labelledBy",this.options.ariaLabelledBy);let n=this._register(br(this.inputBox.inputElement));this._register(n.onDidFocus(()=>this._onFocus.fire()));let i=this.options.focusKey;i&&(this._register(n.onDidFocus(()=>i.set(!0))),this._register(n.onDidBlur(()=>i.set(!1))))}createSearchContainer(t){this.searchContainer=t;let n=q(this.searchContainer,ie("div.settings-search-input"));this.inputBox=this._register(this.createInputBox(n)),this._register(this.inputBox.onDidChange(i=>this._onDidChange.fire(i)))}createInputBox(t){let n=()=>P8(this.keybindingService);return new Bf(t,this.contextViewService,{...this.options,showHistoryHint:n},this.contextKeyService)}showMessage(t){this.countElement&&t!==this.countElement.textContent&&(this.countElement.textContent=t,this.inputBox.inputElement.setAttribute("aria-label",t),this.inputBox.inputElement.style.paddingRight=this.getControlsWidth()+"px")}layout(t){t.width<400?(this.countElement?.classList.add("hide"),this.inputBox.inputElement.style.paddingRight="0px"):(this.countElement?.classList.remove("hide"),this.inputBox.inputElement.style.paddingRight=this.getControlsWidth()+"px")}getControlsWidth(){return(this.countElement?Wl(this.countElement):0)+20}focus(){this.inputBox.focus(),this.getValue()&&this.inputBox.select()}hasFocus(){return this.inputBox.hasFocus()}clear(){this.inputBox.value=""}getValue(){return this.inputBox.value}setValue(t){return this.inputBox.value=t}dispose(){this.options.focusKey?.set(!1),super.dispose()}};fb=_([y(2,Wo),y(3,we),y(4,Ne),y(5,_n)],fb);var PS=class extends N{constructor(t){super();this.editor=t;this._register(this.editor.onMouseDown(n=>{n.target.type!==2||n.target.detail.isAfterLines||!this.isVisible()||this._onClick.fire(n)}))}_line=-1;_preferences=[];_editPreferenceDecoration=this.editor.createDecorationsCollection();_onClick=this._register(new T);onClick=this._onClick.event;get preferences(){return this._preferences}getLine(){return this._line}show(t,n,i){this._preferences=i;let o=[];this._line=t,o.push({options:{description:"edit-preference-widget-decoration",glyphMarginClassName:Ae.asClassName(hg),glyphMarginHoverMessage:new jo().appendText(n),stickiness:1},range:{startLineNumber:t,startColumn:1,endLineNumber:t,endColumn:1}}),this._editPreferenceDecoration.set(o)}hide(){this._editPreferenceDecoration.clear()}isVisible(){return this._editPreferenceDecoration.length>0}dispose(){this.hide(),super.dispose()}};var yF=class extends Ns{_element;boxContainer;_label;contents;visible;_onDidChangeVisibility=this._register(new T);onDidChangeVisibility=this._onDidChangeVisibility.event;hover;constructor(e,t){super(),this._element=q(e,ie(".monaco-dropdown")),this._label=q(this._element,ie(".dropdown-label"));let n=t.labelRenderer;n||(n=o=>(o.textContent=t.label||"",null));for(let o of[ee.CLICK,ee.MOUSE_DOWN,Rt.Tap])this._register(U(this.element,o,s=>qe.stop(s,!0)));for(let o of[ee.MOUSE_DOWN,Rt.Tap])this._register(U(this._label,o,s=>{cE(s)&&(s.detail>1||s.button!==0)||(this.visible?this.hide():this.show())}));this._register(U(this._label,ee.KEY_UP,o=>{let s=new it(o);(s.equals(3)||s.equals(10))&&(qe.stop(o,!0),this.visible?this.hide():this.show())}));let i=n(this._label);i&&this._register(i),this._register(Jn.addTarget(this._label))}get element(){return this._element}get label(){return this._label}set tooltip(e){this._label&&(!this.hover&&e!==""?this.hover=this._register(ii().setupManagedHover(pt("mouse"),this._label,e)):this.hover&&this.hover.update(e))}show(){this.visible||(this.visible=!0,this._onDidChangeVisibility.fire(!0))}hide(){this.visible&&(this.visible=!1,this._onDidChangeVisibility.fire(!1))}isVisible(){return!!this.visible}onEvent(e,t){this.hide()}dispose(){super.dispose(),this.hide(),this.boxContainer&&(this.boxContainer.remove(),this.boxContainer=void 0),this.contents&&(this.contents.remove(),this.contents=void 0),this._label&&(this._label.remove(),this._label=void 0)}},ID=class extends yF{constructor(t,n){super(t,n);this._options=n;this.actions=n.actions||[]}_menuOptions;_actions=[];set menuOptions(t){this._menuOptions=t}get menuOptions(){return this._menuOptions}get actions(){return this._options.actionProvider?this._options.actionProvider.getActions():this._actions}set actions(t){this._actions=t}show(){super.show(),this.element.classList.add("active"),this._options.contextMenuProvider.showContextMenu({getAnchor:()=>this.element,getActions:()=>this.actions,getActionsContext:()=>this.menuOptions?this.menuOptions.context:null,getActionViewItem:(t,n)=>this.menuOptions&&this.menuOptions.actionViewItemProvider?this.menuOptions.actionViewItemProvider(t,n):void 0,getKeyBinding:t=>this.menuOptions&&this.menuOptions.getKeyBinding?this.menuOptions.getKeyBinding(t):void 0,getMenuClassName:()=>this._options.menuClassName||"",onHide:()=>this.onHide(),actionRunner:this.menuOptions?this.menuOptions.actionRunner:void 0,anchorAlignment:this.menuOptions?this.menuOptions.anchorAlignment:0,domForShadowRoot:this._options.menuAsChild?this.element:void 0,skipTelemetry:this._options.skipTelemetry})}hide(){super.hide()}onHide(){this.hide(),this.element.classList.remove("active")}};var wMt={buttonBackground:"#0E639C",buttonHoverBackground:"#006BB3",buttonSeparator:H.white.toString(),buttonForeground:H.white.toString(),buttonBorder:void 0,buttonSecondaryBackground:void 0,buttonSecondaryForeground:void 0,buttonSecondaryHoverBackground:void 0},Kr=class extends N{options;_element;_label="";_labelElement;_labelShortElement;_hover;_onDidClick=this._register(new T);get onDidClick(){return this._onDidClick.event}_onDidEscape=this._register(new T);get onDidEscape(){return this._onDidEscape.event}focusTracker;constructor(e,t){super(),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);let n=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,i=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=i||"",this._element.style.backgroundColor=n||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),typeof t.title=="string"&&this.setTitle(t.title),typeof t.ariaLabel=="string"&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this._register(Jn.addTarget(this._element)),[ee.CLICK,Rt.Tap].forEach(o=>{this._register(U(this._element,o,s=>{if(!this.enabled){qe.stop(s);return}this._onDidClick.fire(s)}))}),this._register(U(this._element,ee.KEY_DOWN,o=>{let s=new it(o),a=!1;this.enabled&&(s.equals(3)||s.equals(10))?(this._onDidClick.fire(o),a=!0):s.equals(9)&&(this._onDidEscape.fire(o),this._element.blur(),a=!0),a&&qe.stop(s,!0)})),this._register(U(this._element,ee.MOUSE_OVER,o=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register(U(this._element,ee.MOUSE_OUT,o=>{this.updateBackground(!1)})),this.focusTracker=this._register(br(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){let t=[];for(let n of dd(e))if(typeof n=="string"){if(n=n.trim(),n==="")continue;let i=document.createElement("span");i.textContent=n,t.push(i)}else t.push(n);return t}updateBackground(e){let t;this.options.secondary?t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t=e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){if(this._label===e||IE(this._label)&&IE(e)&&zU(this._label,e))return;this._element.classList.add("monaco-text-button");let t=this.options.supportShortLabel?this._labelElement:this._element;if(IE(e)){let i=Pf(e,{inline:!0});i.dispose();let o=i.element.querySelector("p")?.innerHTML;if(o){let s=xy(o,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});t.innerHTML=s}else Wa(t)}else this.options.supportIcons?Wa(t,...this.getContentElements(e)):t.textContent=e;let n="";typeof this.options.title=="string"?n=this.options.title:this.options.title&&(n=q5(e)),this.setTitle(n),typeof this.options.ariaLabel=="string"?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",n),this._label=e}get label(){return this._label}set labelShort(e){!this.options.supportShortLabel||!this._labelShortElement||(this.options.supportIcons?Wa(this._labelShortElement,...this.getContentElements(e)):this._labelShortElement.textContent=e)}set icon(e){this._element.classList.add(...Ae.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}set checked(e){e?(this._element.classList.add("checked"),this._element.setAttribute("aria-checked","true")):(this._element.classList.remove("checked"),this._element.setAttribute("aria-checked","false"))}get checked(){return this._element.classList.contains("checked")}setTitle(e){!this._hover&&e!==""?this._hover=this._register(ii().setupManagedHover(this.options.hoverDelegate??pt("mouse"),this._element,e)):this._hover&&this._hover.update(e)}focus(){this._element.focus()}hasFocus(){return fr(this._element)}};var Dn=class extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}},mg=class{constructor(e){this.fn=e}_map=new WeakMap;map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}};function AS(r){return typeof r=="object"&&"visibility"in r&&"data"in r}function fg(r){switch(r){case!0:return 1;case!1:return 0;default:return r}}function IF(r){return typeof r.collapsible=="boolean"}var SD=class{constructor(e,t,n={}){this.user=e;this.collapseByDefault=typeof n.collapseByDefault>"u"?!1:n.collapseByDefault,this.allowNonCollapsibleParents=n.allowNonCollapsibleParents??!1,this.filter=n.filter,this.autoExpandSingleChildren=typeof n.autoExpandSingleChildren>"u"?!1:n.autoExpandSingleChildren,this.root={parent:void 0,element:t,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}rootRef=[];root;eventBufferer=new iu;_onDidSpliceModel=new T;onDidSpliceModel=this._onDidSpliceModel.event;_onDidSpliceRenderedNodes=new T;onDidSpliceRenderedNodes=this._onDidSpliceRenderedNodes.event;_onDidChangeCollapseState=new T;onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event);_onDidChangeRenderNodeCount=new T;onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event);collapseByDefault;allowNonCollapsibleParents;filter;autoExpandSingleChildren;refilterDelayer=new Vn(lx);splice(e,t,n=tt.empty(),i={}){if(e.length===0)throw new Dn(this.user,"Invalid tree location");i.diffIdentityProvider?this.spliceSmart(i.diffIdentityProvider,e,t,n,i):this.spliceSimple(e,t,n,i)}spliceSmart(e,t,n,i=tt.empty(),o,s=o.diffDepth??0){let{parentNode:a}=this.getParentNodeWithListIndex(t);if(!a.lastDiffIds)return this.spliceSimple(t,n,i,o);let l=[...i],d=t[t.length-1],c=new _h({getElements:()=>a.lastDiffIds},{getElements:()=>[...a.children.slice(0,d),...l,...a.children.slice(d+n)].map(m=>e.getId(m.element).toString())}).ComputeDiff(!1);if(c.quitEarly)return a.lastDiffIds=void 0,this.spliceSimple(t,n,l,o);let p=t.slice(0,-1),h=(m,b,v)=>{if(s>0)for(let S=0;S<v;S++)m--,b--,this.spliceSmart(e,[...p,m,0],Number.MAX_SAFE_INTEGER,l[b].children,o,s-1)},g=Math.min(a.children.length,d+n),f=l.length;for(let m of c.changes.sort((b,v)=>v.originalStart-b.originalStart))h(g,f,g-(m.originalStart+m.originalLength)),g=m.originalStart,f=m.modifiedStart-d,this.spliceSimple([...p,g],m.originalLength,tt.slice(l,f,f+m.modifiedLength),o);h(g,f,g)}spliceSimple(e,t,n=tt.empty(),{onDidCreateNode:i,onDidDeleteNode:o,diffIdentityProvider:s}){let{parentNode:a,listIndex:l,revealed:d,visible:c}=this.getParentNodeWithListIndex(e),p=[],h=tt.map(n,w=>this.createTreeNode(w,a,a.visible?1:0,d,p,i)),g=e[e.length-1],f=0;for(let w=g;w>=0&&w<a.children.length;w--){let P=a.children[w];if(P.visible){f=P.visibleChildIndex;break}}let m=[],b=0,v=0;for(let w of h)m.push(w),v+=w.renderNodeCount,w.visible&&(w.visibleChildIndex=f+b++);let S=t1(a.children,g,t,m);s?a.lastDiffIds?t1(a.lastDiffIds,g,t,m.map(w=>s.getId(w.element).toString())):a.lastDiffIds=a.children.map(w=>s.getId(w.element).toString()):a.lastDiffIds=void 0;let x=0;for(let w of S)w.visible&&x++;if(x!==0)for(let w=g+m.length;w<a.children.length;w++){let P=a.children[w];P.visible&&(P.visibleChildIndex-=x)}if(a.visibleChildrenCount+=b-x,d&&c){let w=S.reduce((P,R)=>P+(R.visible?R.renderNodeCount:0),0);this._updateAncestorsRenderNodeCount(a,v-w),this._onDidSpliceRenderedNodes.fire({start:l,deleteCount:w,elements:p})}if(S.length>0&&o){let w=P=>{o(P),P.children.forEach(w)};S.forEach(w)}this._onDidSpliceModel.fire({insertedNodes:m,deletedNodes:S});let E=a;for(;E;){if(E.visibility===2){this.refilterDelayer.trigger(()=>this.refilter());break}E=E.parent}}rerender(e){if(e.length===0)throw new Dn(this.user,"Invalid tree location");let{node:t,listIndex:n,revealed:i}=this.getTreeNodeWithListIndex(e);t.visible&&i&&this._onDidSpliceRenderedNodes.fire({start:n,deleteCount:1,elements:[t]})}has(e){return this.hasTreeNode(e)}getListIndex(e){let{listIndex:t,visible:n,revealed:i}=this.getTreeNodeWithListIndex(e);return n&&i?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){let n=this.getTreeNode(e);typeof t>"u"&&(t=!n.collapsible);let i={collapsible:t};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,i))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,n){let i=this.getTreeNode(e);typeof t>"u"&&(t=!i.collapsed);let o={collapsed:t,recursive:n||!1};return this.eventBufferer.bufferEvents(()=>this._setCollapseState(e,o))}_setCollapseState(e,t){let{node:n,listIndex:i,revealed:o}=this.getTreeNodeWithListIndex(e),s=this._setListNodeCollapseState(n,i,o,t);if(n!==this.root&&this.autoExpandSingleChildren&&s&&!IF(t)&&n.collapsible&&!n.collapsed&&!t.recursive){let a=-1;for(let l=0;l<n.children.length;l++)if(n.children[l].visible)if(a>-1){a=-1;break}else a=l;a>-1&&this._setCollapseState([...e,a],t)}return s}_setListNodeCollapseState(e,t,n,i){let o=this._setNodeCollapseState(e,i,!1);if(!n||!e.visible||!o)return o;let s=e.renderNodeCount,a=this.updateNodeAfterCollapseChange(e),l=s-(t===-1?0:1);return this._onDidSpliceRenderedNodes.fire({start:t+1,deleteCount:l,elements:a.slice(1)}),o}_setNodeCollapseState(e,t,n){let i;if(e===this.root?i=!1:(IF(t)?(i=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(i=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):i=!1,i&&this._onDidChangeCollapseState.fire({node:e,deep:n})),!IF(t)&&t.recursive)for(let o of e.children)i=this._setNodeCollapseState(o,t,!0)||i;return i}expandTo(e){this.eventBufferer.bufferEvents(()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})})}refilter(){let e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this._onDidSpliceRenderedNodes.fire({start:0,deleteCount:e,elements:t}),this.refilterDelayer.cancel()}createTreeNode(e,t,n,i,o,s){let a={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:typeof e.collapsible=="boolean"?e.collapsible:typeof e.collapsed<"u",collapsed:typeof e.collapsed>"u"?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(a,n);a.visibility=l,i&&o.push(a);let d=e.children||tt.empty(),c=i&&l!==0&&!a.collapsed,p=0,h=1;for(let g of d){let f=this.createTreeNode(g,a,l,c,o,s);a.children.push(f),h+=f.renderNodeCount,f.visible&&(f.visibleChildIndex=p++)}return this.allowNonCollapsibleParents||(a.collapsible=a.collapsible||a.children.length>0),a.visibleChildrenCount=p,a.visible=l===2?p>0:l===1,a.visible?a.collapsed||(a.renderNodeCount=h):(a.renderNodeCount=0,i&&o.pop()),s?.(a),a}updateNodeAfterCollapseChange(e){let t=e.renderNodeCount,n=[];return this._updateNodeAfterCollapseChange(e,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterCollapseChange(e,t){if(e.visible===!1)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(let n of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(n,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){let t=e.renderNodeCount,n=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,n),this._updateAncestorsRenderNodeCount(e.parent,n.length-t),n}_updateNodeAfterFilterChange(e,t,n,i=!0){let o;if(e!==this.root){if(o=this._filterNode(e,t),o===0)return e.visible=!1,e.renderNodeCount=0,!1;i&&n.push(e)}let s=n.length;e.renderNodeCount=e===this.root?0:1;let a=!1;if(!e.collapsed||o!==0){let l=0;for(let d of e.children)a=this._updateNodeAfterFilterChange(d,o,n,i&&!e.collapsed)||a,d.visible&&(d.visibleChildIndex=l++);e.visibleChildrenCount=l}else e.visibleChildrenCount=0;return e!==this.root&&(e.visible=o===2?a:o===1,e.visibility=o),e.visible?e.collapsed||(e.renderNodeCount+=n.length-s):(e.renderNodeCount=0,i&&n.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(t!==0)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){let n=this.filter?this.filter.filter(e.element,t):1;return typeof n=="boolean"?(e.filterData=void 0,n?1:0):AS(n)?(e.filterData=n.data,fg(n.visibility)):(e.filterData=void 0,fg(n))}hasTreeNode(e,t=this.root){if(!e||e.length===0)return!0;let[n,...i]=e;return n<0||n>t.children.length?!1:this.hasTreeNode(i,t.children[n])}getTreeNode(e,t=this.root){if(!e||e.length===0)return t;let[n,...i]=e;if(n<0||n>t.children.length)throw new Dn(this.user,"Invalid tree location");return this.getTreeNode(i,t.children[n])}getTreeNodeWithListIndex(e){if(e.length===0)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};let{parentNode:t,listIndex:n,revealed:i,visible:o}=this.getParentNodeWithListIndex(e),s=e[e.length-1];if(s<0||s>t.children.length)throw new Dn(this.user,"Invalid tree location");let a=t.children[s];return{node:a,listIndex:n,revealed:i,visible:o&&a.visible}}getParentNodeWithListIndex(e,t=this.root,n=0,i=!0,o=!0){let[s,...a]=e;if(s<0||s>t.children.length)throw new Dn(this.user,"Invalid tree location");for(let l=0;l<s;l++)n+=t.children[l].renderNodeCount;return i=i&&!t.collapsed,o=o&&t.visible,a.length===0?{parentNode:t,listIndex:n,revealed:i,visible:o}:this.getParentNodeWithListIndex(a,t.children[s],n+1,i,o)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){let t=[],n=e;for(;n.parent;)t.push(n.parent.children.indexOf(n)),n=n.parent;return t.reverse()}getParentNodeLocation(e){if(e.length!==0)return e.length===1?[]:gx(e)[0]}getFirstElementChild(e){let t=this.getTreeNode(e);if(t.children.length!==0)return t.children[0].element}getLastElementAncestor(e=[]){let t=this.getTreeNode(e);if(t.children.length!==0)return this._getLastElementAncestor(t)}_getLastElementAncestor(e){return e.children.length===0?e.element:this._getLastElementAncestor(e.children[e.children.length-1])}};var xF=class extends xc{constructor(t){super(t.elements.map(n=>n.element));this.data=t}set context(t){this.data.context=t}get context(){return this.data.context}};function CF(r){return r instanceof xc?new xF(r):r}var EF=class{constructor(e,t){this.modelProvider=e;this.dnd=t}autoExpandNode;autoExpandDisposable=N.None;disposables=new X;getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart?.(CF(e),t)}onDragOver(e,t,n,i,o,s=!0){let a=this.dnd.onDragOver(CF(e),t&&t.element,n,i,o),l=this.autoExpandNode!==t;if(l&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),typeof t>"u")return a;if(l&&typeof a!="boolean"&&a.autoExpand&&(this.autoExpandDisposable=Ys(()=>{let g=this.modelProvider(),f=g.getNodeLocation(t);g.isCollapsed(f)&&g.setCollapsed(f,!1),this.autoExpandNode=void 0},500,this.disposables)),typeof a=="boolean"||!a.accept||typeof a.bubble>"u"||a.feedback){if(!s){let g=typeof a=="boolean"?a:a.accept,f=typeof a=="boolean"?void 0:a.effect;return{accept:g,effect:f,feedback:[n]}}return a}if(a.bubble===1){let g=this.modelProvider(),f=g.getNodeLocation(t),m=g.getParentNodeLocation(f),b=g.getNode(m),v=m&&g.getListIndex(m);return this.onDragOver(e,b,v,i,o,!1)}let d=this.modelProvider(),c=d.getNodeLocation(t),p=d.getListIndex(c),h=d.getListRenderCount(c);return{...a,feedback:ki(p,p+h)}}drop(e,t,n,i,o){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(CF(e),t&&t.element,n,i,o)}onDragEnd(e){this.dnd.onDragEnd?.(e)}dispose(){this.disposables.dispose(),this.dnd.dispose()}};function tZ(r,e){return e&&{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new EF(r,e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent({...t,element:t.element})},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent({...t,element:t.element})}},accessibilityProvider:e.accessibilityProvider&&{...e.accessibilityProvider,getSetSize(t){let n=r(),i=n.getNodeLocation(t),o=n.getParentNodeLocation(i);return n.getNode(o).visibleChildrenCount},getPosInSet(t){return t.visibleChildIndex+1},isChecked:e.accessibilityProvider&&e.accessibilityProvider.isChecked?t=>e.accessibilityProvider.isChecked(t.element):void 0,getRole:e.accessibilityProvider&&e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider&&e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider&&e.accessibilityProvider.getAriaLevel?t=>e.accessibilityProvider.getAriaLevel(t.element):t=>t.depth,getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}}}var yb=class{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){this.delegate.setDynamicHeight?.(e.element,t)}},TF=class r{focus;selection;expanded;scrollTop;static lift(e){return e instanceof r?e:new r(e)}static empty(e=0){return new r({focus:[],selection:[],expanded:Object.create(null),scrollTop:e})}constructor(e){if(this.focus=new Set(e.focus),this.selection=new Set(e.selection),e.expanded instanceof Array){this.expanded=Object.create(null);for(let t of e.expanded)this.expanded[t]=1}else this.expanded=e.expanded;this.expanded=e.expanded,this.scrollTop=e.scrollTop}toJSON(){return{focus:Array.from(this.focus),selection:Array.from(this.selection),expanded:this.expanded,scrollTop:this.scrollTop}}};var wF=class{constructor(e,t=[]){this._elements=t;this.onDidChange=z.forEach(e,n=>this._elements=n,this.disposables)}disposables=new X;onDidChange;get elements(){return this._elements}dispose(){this.disposables.dispose()}},_F=class r{constructor(e,t,n,i,o,s={}){this.renderer=e;this.model=t;this.activeNodes=i;this.renderedIndentGuides=o;this.templateId=e.templateId,this.updateOptions(s),z.map(n,a=>a.node)(this.onDidChangeNodeTwistieState,this,this.disposables),e.onDidChangeTwistieState?.(this.onDidChangeTwistieState,this,this.disposables)}static DefaultIndent=8;templateId;renderedElements=new Map;renderedNodes=new Map;indent=r.DefaultIndent;hideTwistiesOfChildlessElements=!1;shouldRenderIndentGuides=!1;activeIndentNodes=new Set;indentGuidesDisposable=N.None;disposables=new X;updateOptions(e={}){if(typeof e.indent<"u"){let t=qn(e.indent,0,40);if(t!==this.indent){this.indent=t;for(let[n,i]of this.renderedNodes)this.renderTreeElement(n,i)}}if(typeof e.renderIndentGuides<"u"){let t=e.renderIndentGuides!=="none";if(t!==this.shouldRenderIndentGuides){this.shouldRenderIndentGuides=t;for(let[n,i]of this.renderedNodes)this._renderIndentGuides(n,i);if(this.indentGuidesDisposable.dispose(),t){let n=new X;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,n),this.indentGuidesDisposable=n,this._onDidChangeActiveNodes(this.activeNodes.elements)}}}typeof e.hideTwistiesOfChildlessElements<"u"&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){let t=q(e,ie(".monaco-tl-row")),n=q(t,ie(".monaco-tl-indent")),i=q(t,ie(".monaco-tl-twistie")),o=q(t,ie(".monaco-tl-contents")),s=this.renderer.renderTemplate(o);return{container:e,indent:n,twistie:i,indentGuidesDisposable:N.None,templateData:s}}renderElement(e,t,n,i){this.renderedNodes.set(e,n),this.renderedElements.set(e.element,e),this.renderTreeElement(e,n),this.renderer.renderElement(e,t,n.templateData,i)}disposeElement(e,t,n,i){n.indentGuidesDisposable.dispose(),this.renderer.disposeElement?.(e,t,n.templateData,i),typeof i=="number"&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){let t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){let t=this.renderedNodes.get(e);t&&(this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderTreeElement(e,t))}renderTreeElement(e,t){let n=r.DefaultIndent+(e.depth-1)*this.indent;t.twistie.style.paddingLeft=`${n}px`,t.indent.style.width=`${n+this.indent-16}px`,e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded"),t.twistie.classList.remove(...Ae.asClassNameArray(re.treeItemExpanded));let i=!1;this.renderer.renderTwistie&&(i=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(i||t.twistie.classList.add(...Ae.asClassNameArray(re.treeItemExpanded)),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),this._renderIndentGuides(e,t)}_renderIndentGuides(e,t){if(Kt(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;let n=new X;for(;;){let i=this.model.getNodeLocation(e),o=this.model.getParentNodeLocation(i);if(!o)break;let s=this.model.getNode(o),a=ie(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(s)&&a.classList.add("active"),t.indent.childElementCount===0?t.indent.appendChild(a):t.indent.insertBefore(a,t.indent.firstElementChild),this.renderedIndentGuides.add(s,a),n.add(me(()=>this.renderedIndentGuides.delete(s,a))),e=s}t.indentGuidesDisposable=n}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;let t=new Set;e.forEach(n=>{let i=this.model.getNodeLocation(n);try{let o=this.model.getParentNodeLocation(i);n.collapsible&&n.children.length>0&&!n.collapsed?t.add(n):o&&t.add(this.model.getNode(o))}catch{}}),this.activeIndentNodes.forEach(n=>{t.has(n)||this.renderedIndentGuides.forEach(n,i=>i.classList.remove("active"))}),t.forEach(n=>{this.activeIndentNodes.has(n)||this.renderedIndentGuides.forEach(n,i=>i.classList.add("active"))}),this.activeIndentNodes=t}setModel(e){this.model=e}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),rt(this.disposables)}},DF=class{constructor(e,t,n){this.tree=e;this.keyboardNavigationLabelProvider=t;this._filter=n;e.onWillRefilter(this.reset,this,this.disposables)}_totalCount=0;get totalCount(){return this._totalCount}_matchCount=0;get matchCount(){return this._matchCount}_pattern="";_lowercasePattern="";disposables=new X;set pattern(e){this._pattern=e,this._lowercasePattern=e.toLowerCase()}filter(e,t){let n=1;if(this._filter){let s=this._filter.filter(e,t);if(typeof s=="boolean"?n=s?1:0:AS(s)?n=fg(s.visibility):n=s,n===0)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:Zs.Default,visibility:n};let i=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),o=Array.isArray(i)?i:[i];for(let s of o){let a=s&&s.toString();if(typeof a>"u")return{data:Zs.Default,visibility:n};let l;if(this.tree.findMatchType===1){let d=a.toLowerCase().indexOf(this._lowercasePattern);if(d>-1){l=[Number.MAX_SAFE_INTEGER,0];for(let c=this._lowercasePattern.length;c>0;c--)l.push(d+c-1)}}else l=cc(this._pattern,this._lowercasePattern,0,a,a.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(l)return this._matchCount++,o.length===1?{data:l,visibility:n}:{data:{label:a,score:l},visibility:n}}return this.tree.findMode===1?typeof this.tree.options.defaultFindVisibility=="number"?this.tree.options.defaultFindVisibility:this.tree.options.defaultFindVisibility?this.tree.options.defaultFindVisibility(e):2:{data:Zs.Default,visibility:n}}reset(){this._totalCount=0,this._matchCount=0}dispose(){rt(this.disposables)}},LF=class extends Er{constructor(e){super({icon:re.listFilter,title:u("filter","Filter"),isChecked:e.isChecked??!1,hoverDelegate:e.hoverDelegate??pt("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},kF=class extends Er{constructor(e){super({icon:re.searchFuzzy,title:u("fuzzySearch","Fuzzy Match"),isChecked:e.isChecked??!1,hoverDelegate:e.hoverDelegate??pt("element"),inputActiveOptionBorder:e.inputActiveOptionBorder,inputActiveOptionForeground:e.inputActiveOptionForeground,inputActiveOptionBackground:e.inputActiveOptionBackground})}},nZ={inputBoxStyles:J5,toggleStyles:Af,listFilterWidgetBackground:void 0,listFilterWidgetNoMatchesOutline:void 0,listFilterWidgetOutline:void 0,listFilterWidgetShadow:void 0};var RF=class extends N{constructor(t,n,i,o,s,a){super();this.tree=n;t.appendChild(this.elements.root),this._register(me(()=>this.elements.root.remove()));let l=a?.styles??nZ;l.listFilterWidgetBackground&&(this.elements.root.style.backgroundColor=l.listFilterWidgetBackground),l.listFilterWidgetShadow&&(this.elements.root.style.boxShadow=`0 0 8px 2px ${l.listFilterWidgetShadow}`);let d=this._register(Cc());this.modeToggle=this._register(new LF({...l.toggleStyles,isChecked:o===1,hoverDelegate:d})),this.matchTypeToggle=this._register(new kF({...l.toggleStyles,isChecked:s===0,hoverDelegate:d})),this.onDidChangeMode=z.map(this.modeToggle.onChange,()=>this.modeToggle.checked?1:0,this._store),this.onDidChangeMatchType=z.map(this.matchTypeToggle.onChange,()=>this.matchTypeToggle.checked?0:1,this._store),this.findInput=this._register(new Ff(this.elements.findInput,i,{label:u("type to search","Type to search"),additionalToggles:[this.modeToggle,this.matchTypeToggle],showCommonFindToggles:!1,inputBoxStyles:l.inputBoxStyles,toggleStyles:l.toggleStyles,history:a?.history})),this.actionbar=this._register(new Wi(this.elements.actionbar)),this.mode=o;let c=this._register(new He(this.findInput.inputBox.inputElement,"keydown")),p=z.chain(c.event,m=>m.map(b=>new it(b)));this._register(p(m=>{if(m.equals(3)){m.preventDefault(),m.stopPropagation(),this.findInput.inputBox.addToHistory(),this.tree.domFocus();return}if(m.equals(18)){m.preventDefault(),m.stopPropagation(),this.findInput.inputBox.isAtLastInHistory()||this.findInput.inputBox.isNowhereInHistory()?(this.findInput.inputBox.addToHistory(),this.tree.domFocus()):this.findInput.inputBox.showNextValue();return}if(m.equals(16)){m.preventDefault(),m.stopPropagation(),this.findInput.inputBox.showPreviousValue();return}}));let h=this._register(new un("close",u("close","Close"),"codicon codicon-close",!0,()=>this.dispose()));this.actionbar.push(h,{icon:!0,label:!1});let g=this._register(new He(this.elements.grab,"mousedown"));this._register(g.event(m=>{let b=new X,v=b.add(new He(Ee(m),"mousemove")),S=b.add(new He(Ee(m),"mouseup")),x=this.right,E=m.pageX,w=this.top,P=m.pageY;this.elements.grab.classList.add("grabbing");let R=this.elements.root.style.transition;this.elements.root.style.transition="unset";let O=M=>{let K=M.pageX-E;this.right=x-K;let $=M.pageY-P;this.top=w+$,this.layout()};b.add(v.event(O)),b.add(S.event(M=>{O(M),this.elements.grab.classList.remove("grabbing"),this.elements.root.style.transition=R,b.dispose()}))}));let f=z.chain(this._register(new He(this.elements.grab,"keydown")).event,m=>m.map(b=>new it(b)));this._register(f(m=>{let b,v;if(m.keyCode===15?b=Number.POSITIVE_INFINITY:m.keyCode===17?b=0:m.keyCode===10&&(b=this.right===0?Number.POSITIVE_INFINITY:0),m.keyCode===16?v=0:m.keyCode===18&&(v=Number.POSITIVE_INFINITY),b!==void 0&&(m.preventDefault(),m.stopPropagation(),this.right=b,this.layout()),v!==void 0){m.preventDefault(),m.stopPropagation(),this.top=v;let S=this.elements.root.style.transition;this.elements.root.style.transition="unset",this.layout(),setTimeout(()=>{this.elements.root.style.transition=S},0)}})),this.onDidChangeValue=this.findInput.onDidChange}elements=Mm(".monaco-tree-type-filter",[Mm(".monaco-tree-type-filter-grab.codicon.codicon-debug-gripper@grab",{tabIndex:0}),Mm(".monaco-tree-type-filter-input@findInput"),Mm(".monaco-tree-type-filter-actionbar@actionbar")]);set mode(t){this.modeToggle.checked=t===1,this.findInput.inputBox.setPlaceHolder(t===1?u("type to filter","Type to filter"):u("type to search","Type to search"))}set matchType(t){this.matchTypeToggle.checked=t===0}get value(){return this.findInput.inputBox.value}set value(t){this.findInput.inputBox.value=t}modeToggle;matchTypeToggle;findInput;actionbar;width=0;right=0;top=0;_onDidDisable=new T;onDidDisable=this._onDidDisable.event;onDidChangeValue;onDidChangeMode;onDidChangeMatchType;getHistory(){return this.findInput.inputBox.getHistory()}focus(){this.findInput.focus()}select(){this.findInput.select(),this.findInput.inputBox.addToHistory(!0)}layout(t=this.width){this.width=t,this.right=qn(this.right,0,Math.max(0,t-212)),this.elements.root.style.right=`${this.right}px`,this.top=qn(this.top,0,24),this.elements.root.style.top=`${this.top}px`}showMessage(t){this.findInput.showMessage(t)}clearMessage(){this.findInput.clearMessage()}async dispose(){this._onDidDisable.fire(),this.elements.root.classList.add("disabled"),await po(300),super.dispose()}},MF=class{constructor(e,t,n,i,o={}){this.tree=e;this.view=t;this.filter=n;this.contextViewProvider=i;this.options=o;this._mode=e.options.defaultFindMode??0,this._matchType=e.options.defaultFindMatchType??0}_history;_pattern="";get pattern(){return this._pattern}previousPattern="";_mode;get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}_matchType;get matchType(){return this._matchType}set matchType(e){e!==this._matchType&&(this._matchType=e,this.widget&&(this.widget.matchType=this._matchType),this.tree.refilter(),this.render(),this._onDidChangeMatchType.fire(e))}widget;width=0;_onDidChangeMode=new T;onDidChangeMode=this._onDidChangeMode.event;_onDidChangeMatchType=new T;onDidChangeMatchType=this._onDidChangeMatchType.event;_onDidChangePattern=new T;onDidChangePattern=this._onDidChangePattern.event;_onDidChangeOpenState=new T;onDidChangeOpenState=this._onDidChangeOpenState.event;enabledDisposables=new X;disposables=new X;updateOptions(e={}){e.defaultFindMode!==void 0&&(this.mode=e.defaultFindMode),e.defaultFindMatchType!==void 0&&(this.matchType=e.defaultFindMatchType)}isOpened(){return!!this.widget}open(){if(this.widget){this.widget.focus(),this.widget.select();return}this.widget=new RF(this.view.getHTMLElement(),this.tree,this.contextViewProvider,this.mode,this.matchType,{...this.options,history:this._history}),this.enabledDisposables.add(this.widget),this.widget.onDidChangeValue(this.onDidChangeValue,this,this.enabledDisposables),this.widget.onDidChangeMode(e=>this.mode=e,void 0,this.enabledDisposables),this.widget.onDidChangeMatchType(e=>this.matchType=e,void 0,this.enabledDisposables),this.widget.onDidDisable(this.close,this,this.enabledDisposables),this.widget.layout(this.width),this.widget.focus(),this.widget.value=this.previousPattern,this.widget.select(),this._onDidChangeOpenState.fire(!0)}close(){this.widget&&(this._history=this.widget.getHistory(),this.widget=void 0,this.enabledDisposables.clear(),this.previousPattern=this.pattern,this.onDidChangeValue(""),this.tree.domFocus(),this._onDidChangeOpenState.fire(!1))}onDidChangeValue(e){this._pattern=e,this._onDidChangePattern.fire(e),this.filter.pattern=e,this.tree.refilter(),e&&this.tree.focusNext(0,!0,void 0,n=>!Zs.isDefault(n.filterData));let t=this.tree.getFocus();if(t.length>0){let n=t[0];this.tree.getRelativeTop(n)===null&&this.tree.reveal(n,.5)}this.render()}render(){let e=this.filter.totalCount>0&&this.filter.matchCount===0;this.pattern&&e?(ca(u("replFindNoResults","No results")),this.tree.options.showNotFoundMessage??!0?this.widget?.showMessage({type:2,content:u("not found","No elements found.")}):this.widget?.showMessage({type:2})):(this.widget?.clearMessage(),this.pattern&&ca(u("replFindResults","{0} results",this.filter.matchCount)))}shouldAllowFocus(e){return!this.widget||!this.pattern||this.filter.totalCount>0&&this.filter.matchCount<=1?!0:!Zs.isDefault(e.filterData)}layout(e){this.width=e,this.widget?.layout(e)}dispose(){this._history=void 0,this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}};function iZ(r,e){return r.position===e.position&&K8(r,e)}function K8(r,e){return r.node.element===e.node.element&&r.startIndex===e.startIndex&&r.height===e.height&&r.endIndex===e.endIndex}var OF=class{constructor(e=[]){this.stickyNodes=e}get count(){return this.stickyNodes.length}equal(e){return sn(this.stickyNodes,e.stickyNodes,iZ)}lastNodePartiallyVisible(){if(this.count===0)return!1;let e=this.stickyNodes[this.count-1];if(this.count===1)return e.position!==0;let t=this.stickyNodes[this.count-2];return t.position+t.height!==e.position}animationStateChanged(e){if(!sn(this.stickyNodes,e.stickyNodes,K8)||this.count===0)return!1;let t=this.stickyNodes[this.count-1],n=e.stickyNodes[e.count-1];return t.position!==n.position}},PF=class{constrainStickyScrollNodes(e,t,n){for(let i=0;i<e.length;i++){let o=e[i];if(o.position+o.height>n||i>=t)return e.slice(0,i)}return e}},xD=class extends N{constructor(t,n,i,o,s,a={}){super();this.tree=t;this.model=n;this.view=i;this.treeDelegate=s;let l=this.validateStickySettings(a);this.stickyScrollMaxItemCount=l.stickyScrollMaxItemCount,this.stickyScrollDelegate=a.stickyScrollDelegate??new PF,this._widget=this._register(new AF(i.getScrollableElement(),i,t,o,s,a.accessibilityProvider)),this.onDidChangeHasFocus=this._widget.onDidChangeHasFocus,this.onContextMenu=this._widget.onContextMenu,this._register(i.onDidScroll(()=>this.update())),this._register(i.onDidChangeContentHeight(()=>this.update())),this._register(t.onDidChangeCollapseState(()=>this.update())),this.update()}onDidChangeHasFocus;onContextMenu;stickyScrollDelegate;stickyScrollMaxItemCount;maxWidgetViewRatio=.4;_widget;get height(){return this._widget.height}get count(){return this._widget.count}getNode(t){return this._widget.getNode(t)}getNodeAtHeight(t){let n;if(t===0?n=this.view.firstVisibleIndex:n=this.view.indexAt(t+this.view.scrollTop),!(n<0||n>=this.view.length))return this.view.element(n)}update(){let t=this.getNodeAtHeight(0);if(!t||this.tree.scrollTop===0){this._widget.setState(void 0);return}let n=this.findStickyState(t);this._widget.setState(n)}findStickyState(t){let n=[],i=t,o=0,s=this.getNextStickyNode(i,void 0,o);for(;s&&(n.push(s),o+=s.height,!(n.length<=this.stickyScrollMaxItemCount&&(i=this.getNextVisibleNode(s),!i)));)s=this.getNextStickyNode(i,s.node,o);let a=this.constrainStickyNodes(n);return a.length?new OF(a):void 0}getNextVisibleNode(t){return this.getNodeAtHeight(t.position+t.height)}getNextStickyNode(t,n,i){let o=this.getAncestorUnderPrevious(t,n);if(o&&!(o===t&&(!this.nodeIsUncollapsedParent(t)||this.nodeTopAlignsWithStickyNodesBottom(t,i))))return this.createStickyScrollNode(o,i)}nodeTopAlignsWithStickyNodesBottom(t,n){let i=this.getNodeIndex(t),o=this.view.getElementTop(i),s=n;return this.view.scrollTop===o-s}createStickyScrollNode(t,n){let i=this.treeDelegate.getHeight(t),{startIndex:o,endIndex:s}=this.getNodeRange(t),a=this.calculateStickyNodePosition(s,n,i);return{node:t,position:a,height:i,startIndex:o,endIndex:s}}getAncestorUnderPrevious(t,n=void 0){let i=t,o=this.getParentNode(i);for(;o;){if(o===n)return i;i=o,o=this.getParentNode(i)}if(n===void 0)return i}calculateStickyNodePosition(t,n,i){let o=this.view.getRelativeTop(t);if(o===null&&this.view.firstVisibleIndex===t&&t+1<this.view.length){let c=this.treeDelegate.getHeight(this.view.element(t)),p=this.view.getRelativeTop(t+1);o=p?p-c/this.view.renderHeight:null}if(o===null)return n;let s=this.view.element(t),a=this.treeDelegate.getHeight(s),d=o*this.view.renderHeight+a;return n+i>d&&n<=d?d-i:n}constrainStickyNodes(t){if(t.length===0)return[];let n=this.view.renderHeight*this.maxWidgetViewRatio,i=t[t.length-1];if(t.length<=this.stickyScrollMaxItemCount&&i.position+i.height<=n)return t;let o=this.stickyScrollDelegate.constrainStickyScrollNodes(t,this.stickyScrollMaxItemCount,n);if(!o.length)return[];let s=o[o.length-1];if(o.length>this.stickyScrollMaxItemCount||s.position+s.height>n)throw new Error("stickyScrollDelegate violates constraints");return o}getParentNode(t){let n=this.model.getNodeLocation(t),i=this.model.getParentNodeLocation(n);return i?this.model.getNode(i):void 0}nodeIsUncollapsedParent(t){let n=this.model.getNodeLocation(t);return this.model.getListRenderCount(n)>1}getNodeIndex(t){let n=this.model.getNodeLocation(t);return this.model.getListIndex(n)}getNodeRange(t){let n=this.model.getNodeLocation(t),i=this.model.getListIndex(n);if(i<0)throw new Error("Node not found in tree");let o=this.model.getListRenderCount(n),s=i+o-1;return{startIndex:i,endIndex:s}}nodePositionTopBelowWidget(t){let n=[],i=this.getParentNode(t);for(;i;)n.push(i),i=this.getParentNode(i);let o=0;for(let s=0;s<n.length&&s<this.stickyScrollMaxItemCount;s++)o+=this.treeDelegate.getHeight(n[s]);return o}getFocus(){return this._widget.getFocus()}domFocus(){this._widget.domFocus()}focusedLast(){return this._widget.focusedLast()}updateOptions(t={}){if(!t.stickyScrollMaxItemCount)return;let n=this.validateStickySettings(t);this.stickyScrollMaxItemCount!==n.stickyScrollMaxItemCount&&(this.stickyScrollMaxItemCount=n.stickyScrollMaxItemCount,this.update())}validateStickySettings(t){let n=7;return typeof t.stickyScrollMaxItemCount=="number"&&(n=Math.max(t.stickyScrollMaxItemCount,1)),{stickyScrollMaxItemCount:n}}setModel(t){this.model=t}},AF=class{constructor(e,t,n,i,o,s){this.view=t;this.tree=n;this.treeRenderers=i;this.treeDelegate=o;this.accessibilityProvider=s;this._rootDomNode=ie(".monaco-tree-sticky-container.empty"),e.appendChild(this._rootDomNode);let a=ie(".monaco-tree-sticky-container-shadow");this._rootDomNode.appendChild(a),this.stickyScrollFocus=new NF(this._rootDomNode,t),this.onDidChangeHasFocus=this.stickyScrollFocus.onDidChangeHasFocus,this.onContextMenu=this.stickyScrollFocus.onContextMenu}_rootDomNode;_previousState;_previousElements=[];_previousStateDisposables=new X;stickyScrollFocus;onDidChangeHasFocus;onContextMenu;get height(){if(!this._previousState)return 0;let e=this._previousState.stickyNodes[this._previousState.count-1];return e.position+e.height}get count(){return this._previousState?.count??0}getNode(e){return this._previousState?.stickyNodes.find(t=>t.node===e)}setState(e){let t=!!this._previousState&&this._previousState.count>0,n=!!e&&e.count>0;if(!t&&!n||t&&n&&this._previousState.equal(e))return;if(t!==n&&this.setVisible(n),!n){this._previousState=void 0,this._previousElements=[],this._previousStateDisposables.clear();return}let i=e.stickyNodes[e.count-1];if(this._previousState&&e.animationStateChanged(this._previousState))this._previousElements[this._previousState.count-1].style.top=`${i.position}px`;else{this._previousStateDisposables.clear();let o=Array(e.count);for(let s=e.count-1;s>=0;s--){let a=e.stickyNodes[s],{element:l,disposable:d}=this.createElement(a,s,e.count);o[s]=l,this._rootDomNode.appendChild(l),this._previousStateDisposables.add(d)}this.stickyScrollFocus.updateElements(o,e),this._previousElements=o}this._previousState=e,this._rootDomNode.style.height=`${i.position+i.height}px`}createElement(e,t,n){let i=e.startIndex,o=document.createElement("div");o.style.top=`${e.position}px`,this.tree.options.setRowHeight!==!1&&(o.style.height=`${e.height}px`),this.tree.options.setRowLineHeight!==!1&&(o.style.lineHeight=`${e.height}px`),o.classList.add("monaco-tree-sticky-row"),o.classList.add("monaco-list-row"),o.setAttribute("data-index",`${i}`),o.setAttribute("data-parity",i%2===0?"even":"odd"),o.setAttribute("id",this.view.getElementID(i));let s=this.setAccessibilityAttributes(o,e.node.element,t,n),a=this.treeDelegate.getTemplateId(e.node),l=this.treeRenderers.find(h=>h.templateId===a);if(!l)throw new Error(`No renderer found for template id ${a}`);let d=e.node;d===this.tree.getNode(this.tree.getNodeLocation(e.node))&&(d=new Proxy(e.node,{}));let c=l.renderTemplate(o);l.renderElement(d,e.startIndex,c,e.height);let p=me(()=>{s.dispose(),l.disposeElement(d,e.startIndex,c,e.height),l.disposeTemplate(c),o.remove()});return{element:o,disposable:p}}setAccessibilityAttributes(e,t,n,i){if(!this.accessibilityProvider)return N.None;this.accessibilityProvider.getSetSize&&e.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(t,n,i))),this.accessibilityProvider.getPosInSet&&e.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(t,n))),this.accessibilityProvider.getRole&&e.setAttribute("role",this.accessibilityProvider.getRole(t)??"treeitem");let o=this.accessibilityProvider.getAriaLabel(t),s=o&&typeof o!="string"?o:Hv(o),a=Zr(d=>{let c=d.readObservable(s);c?e.setAttribute("aria-label",c):e.removeAttribute("aria-label")});typeof o=="string"||o&&e.setAttribute("aria-label",o.get());let l=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(t);return typeof l=="number"&&e.setAttribute("aria-level",`${l}`),e.setAttribute("aria-selected",String(!1)),a}setVisible(e){this._rootDomNode.classList.toggle("empty",!e),e||this.stickyScrollFocus.updateElements([],void 0)}getFocus(){return this.stickyScrollFocus.getFocus()}domFocus(){this.stickyScrollFocus.domFocus()}focusedLast(){return this.stickyScrollFocus.focusedLast()}dispose(){this.stickyScrollFocus.dispose(),this._previousStateDisposables.dispose(),this._rootDomNode.remove()}},NF=class extends N{constructor(t,n){super();this.container=t;this.view=n;this._register(U(this.container,"focus",()=>this.onFocus())),this._register(U(this.container,"blur",()=>this.onBlur())),this._register(this.view.onDidFocus(()=>this.toggleStickyScrollFocused(!1))),this._register(this.view.onKeyDown(i=>this.onKeyDown(i))),this._register(this.view.onMouseDown(i=>this.onMouseDown(i))),this._register(this.view.onContextMenu(i=>this.handleContextMenu(i)))}focusedIndex=-1;elements=[];state;_onDidChangeHasFocus=new T;onDidChangeHasFocus=this._onDidChangeHasFocus.event;_onContextMenu=new T;onContextMenu=this._onContextMenu.event;_domHasFocus=!1;get domHasFocus(){return this._domHasFocus}set domHasFocus(t){t!==this._domHasFocus&&(this._onDidChangeHasFocus.fire(t),this._domHasFocus=t)}handleContextMenu(t){let n=t.browserEvent.target;if(!Mf(n)&&!Rf(n)){this.focusedLast()&&this.view.domFocus();return}if(!Qs(t.browserEvent)){if(!this.state)throw new Error("Context menu should not be triggered when state is undefined");let a=this.state.stickyNodes.findIndex(l=>l.node.element===t.element?.element);if(a===-1)throw new Error("Context menu should not be triggered when element is not in sticky scroll widget");this.container.focus(),this.setFocus(a);return}if(!this.state||this.focusedIndex<0)throw new Error("Context menu key should not be triggered when focus is not in sticky scroll widget");let o=this.state.stickyNodes[this.focusedIndex].node.element,s=this.elements[this.focusedIndex];this._onContextMenu.fire({element:o,anchor:s,browserEvent:t.browserEvent,isStickyScroll:!0})}onKeyDown(t){if(this.domHasFocus&&this.state){if(t.key==="ArrowUp")this.setFocusedElement(Math.max(0,this.focusedIndex-1)),t.preventDefault(),t.stopPropagation();else if(t.key==="ArrowDown"||t.key==="ArrowRight"){if(this.focusedIndex>=this.state.count-1){let n=this.state.stickyNodes[this.state.count-1].startIndex+1;this.view.domFocus(),this.view.setFocus([n]),this.scrollNodeUnderWidget(n,this.state)}else this.setFocusedElement(this.focusedIndex+1);t.preventDefault(),t.stopPropagation()}}}onMouseDown(t){let n=t.browserEvent.target;!Mf(n)&&!Rf(n)||(t.browserEvent.preventDefault(),t.browserEvent.stopPropagation())}updateElements(t,n){if(n&&n.count===0)throw new Error("Sticky scroll state must be undefined when there are no sticky nodes");if(n&&n.count!==t.length)throw new Error("Sticky scroll focus received illigel state");let i=this.focusedIndex;if(this.removeFocus(),this.elements=t,this.state=n,n){let o=qn(i,0,n.count-1);this.setFocus(o)}else this.domHasFocus&&this.view.domFocus();this.container.tabIndex=n?0:-1}setFocusedElement(t){let n=this.state;if(!n)throw new Error("Cannot set focus when state is undefined");if(this.setFocus(t),!(t<n.count-1)&&n.lastNodePartiallyVisible()){let i=n.stickyNodes[t];this.scrollNodeUnderWidget(i.endIndex+1,n)}}scrollNodeUnderWidget(t,n){let i=n.stickyNodes[n.count-1],o=n.count>1?n.stickyNodes[n.count-2]:void 0,s=this.view.getElementTop(t),a=o?o.position+o.height+i.height:i.height;this.view.scrollTop=s-a}getFocus(){if(!(!this.state||this.focusedIndex===-1))return this.state.stickyNodes[this.focusedIndex].node.element}domFocus(){if(!this.state)throw new Error("Cannot focus when state is undefined");this.container.focus()}focusedLast(){return this.state?this.view.getHTMLElement().classList.contains("sticky-scroll-focused"):!1}removeFocus(){this.focusedIndex!==-1&&(this.toggleElementFocus(this.elements[this.focusedIndex],!1),this.focusedIndex=-1)}setFocus(t){if(0>t)throw new Error("addFocus() can not remove focus");if(!this.state&&t>=0)throw new Error("Cannot set focus index when state is undefined");if(this.state&&t>=this.state.count)throw new Error("Cannot set focus index to an index that does not exist");let n=this.focusedIndex;n>=0&&this.toggleElementFocus(this.elements[n],!1),t>=0&&this.toggleElementFocus(this.elements[t],!0),this.focusedIndex=t}toggleElementFocus(t,n){this.toggleElementActiveFocus(t,n&&this.domHasFocus),this.toggleElementPassiveFocus(t,n)}toggleCurrentElementActiveFocus(t){this.focusedIndex!==-1&&this.toggleElementActiveFocus(this.elements[this.focusedIndex],t)}toggleElementActiveFocus(t,n){t.classList.toggle("focused",n)}toggleElementPassiveFocus(t,n){t.classList.toggle("passive-focused",n)}toggleStickyScrollFocused(t){this.view.getHTMLElement().classList.toggle("sticky-scroll-focused",t)}onFocus(){if(!this.state||this.elements.length===0)throw new Error("Cannot focus when state is undefined or elements are empty");this.domHasFocus=!0,this.toggleStickyScrollFocused(!0),this.toggleCurrentElementActiveFocus(!0),this.focusedIndex===-1&&this.setFocus(0)}onBlur(){this.domHasFocus=!1,this.toggleCurrentElementActiveFocus(!1)}dispose(){this.toggleStickyScrollFocused(!1),this._onDidChangeHasFocus.fire(!1),super.dispose()}};function vb(r){let e=0;return lE(r.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?e=1:lE(r.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?e=2:lE(r.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(e=3),{browserEvent:r.browserEvent,element:r.element?r.element.element:null,target:e}}function oZ(r){let e=Mf(r.browserEvent.target);return{element:r.element?r.element.element:null,browserEvent:r.browserEvent,anchor:r.anchor,isStickyScroll:e}}function CD(r,e){e(r),r.children.forEach(t=>CD(t,e))}var NS=class{constructor(e,t){this.getFirstViewElementWithTrait=e;this.identityProvider=t}nodes=[];elements;_onDidChange=new T;onDidChange=this._onDidChange.event;_nodeSet;get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(e,t){!t?.__forceEvent&&sn(this.nodes,e)||this._set(e,!1,t)}_set(e,t,n){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){let i=this;this._onDidChange.fire({get elements(){return i.get()},browserEvent:n})}}get(){return this.elements||(this.elements=this.nodes.map(e=>e.element)),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){let l=this.createNodeSet(),d=c=>l.delete(c);t.forEach(c=>CD(c,d)),this.set([...l.values()]);return}let n=new Set,i=l=>n.add(this.identityProvider.getId(l.element).toString());t.forEach(l=>CD(l,i));let o=new Map,s=l=>o.set(this.identityProvider.getId(l.element).toString(),l);e.forEach(l=>CD(l,s));let a=[];for(let l of this.nodes){let d=this.identityProvider.getId(l.element).toString();if(!n.has(d))a.push(l);else{let p=o.get(d);p&&p.visible&&a.push(p)}}if(this.nodes.length>0&&a.length===0){let l=this.getFirstViewElementWithTrait();l&&a.push(l)}this._set(a,!0)}createNodeSet(){let e=new Set;for(let t of this.nodes)e.add(t);return e}},FF=class extends NI{constructor(t,n,i){super(t);this.tree=n;this.stickyScrollProvider=i}onViewPointer(t){if(JP(t.browserEvent.target)||is(t.browserEvent.target)||Lf(t.browserEvent.target)||t.browserEvent.isHandledByList)return;let n=t.element;if(!n)return super.onViewPointer(t);if(this.isSelectionRangeChangeEvent(t)||this.isSelectionSingleChangeEvent(t))return super.onViewPointer(t);let i=t.browserEvent.target,o=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&t.browserEvent.offsetX<16,s=Rf(t.browserEvent.target),a=!1;if(s?a=!0:typeof this.tree.expandOnlyOnTwistieClick=="function"?a=this.tree.expandOnlyOnTwistieClick(n.element):a=!!this.tree.expandOnlyOnTwistieClick,s)this.handleStickyScrollMouseEvent(t,n);else{if(a&&!o&&t.browserEvent.detail!==2)return super.onViewPointer(t);if(!this.tree.expandOnDoubleClick&&t.browserEvent.detail===2)return super.onViewPointer(t)}if(n.collapsible&&(!s||o)){let l=this.tree.getNodeLocation(n),d=t.browserEvent.altKey;if(this.tree.setFocus([l]),this.tree.toggleCollapsed(l,d),o){t.browserEvent.isHandledByList=!0;return}}s||super.onViewPointer(t)}handleStickyScrollMouseEvent(t,n){if(U5(t.browserEvent.target)||z5(t.browserEvent.target))return;let i=this.stickyScrollProvider();if(!i)throw new Error("Sticky scroll controller not found");let o=this.list.indexOf(n),s=this.list.getElementTop(o),a=i.nodePositionTopBelowWidget(n);this.tree.scrollTop=s-a,this.list.domFocus(),this.list.setFocus([o]),this.list.setSelection([o])}onDoubleClick(t){t.browserEvent.target.classList.contains("monaco-tl-twistie")||!this.tree.expandOnDoubleClick||t.browserEvent.isHandledByList||super.onDoubleClick(t)}onMouseDown(t){let n=t.browserEvent.target;if(!Mf(n)&&!Rf(n)){super.onMouseDown(t);return}}onContextMenu(t){let n=t.browserEvent.target;if(!Mf(n)&&!Rf(n)){super.onContextMenu(t);return}}},BF=class extends Ei{constructor(t,n,i,o,s,a,l,d){super(t,n,i,o,d);this.focusTrait=s;this.selectionTrait=a;this.anchorTrait=l}createMouseController(t){return new FF(this,t.tree,t.stickyScrollProvider)}splice(t,n,i=[]){if(super.splice(t,n,i),i.length===0)return;let o=[],s=[],a;i.forEach((l,d)=>{this.focusTrait.has(l)&&o.push(t+d),this.selectionTrait.has(l)&&s.push(t+d),this.anchorTrait.has(l)&&(a=t+d)}),o.length>0&&super.setFocus(ai([...super.getFocus(),...o])),s.length>0&&super.setSelection(ai([...super.getSelection(),...s])),typeof a=="number"&&super.setAnchor(a)}setFocus(t,n,i=!1){super.setFocus(t,n),i||this.focusTrait.set(t.map(o=>this.element(o)),n)}setSelection(t,n,i=!1){super.setSelection(t,n),i||this.selectionTrait.set(t.map(o=>this.element(o)),n)}setAnchor(t,n=!1){super.setAnchor(t),n||(typeof t>"u"?this.anchorTrait.set([]):this.anchorTrait.set([this.element(t)]))}};var Ib=class{constructor(e,t,n,i,o={}){this._user=e;this._options=o;let s;o.keyboardNavigationLabelProvider&&(s=new DF(this,o.keyboardNavigationLabelProvider,o.filter),o={...o,filter:s},this.disposables.add(s)),this.model=this.createModel(e,o),this.treeDelegate=new yb(n);let a=this.disposables.add(new wF(this.onDidChangeActiveNodesRelay.event)),l=new nc;this.renderers=i.map(d=>new _F(d,this.model,this.onDidChangeCollapseStateRelay.event,a,l,o));for(let d of this.renderers)this.disposables.add(d);if(this.focus=new NS(()=>this.view.getFocusedElements()[0],o.identityProvider),this.selection=new NS(()=>this.view.getSelectedElements()[0],o.identityProvider),this.anchor=new NS(()=>this.view.getAnchorElement(),o.identityProvider),this.view=new BF(e,t,this.treeDelegate,this.renderers,this.focus,this.selection,this.anchor,{...tZ(()=>this.model,o),tree:this,stickyScrollProvider:()=>this.stickyScrollController}),this.setupModel(this.model),o.keyboardSupport!==!1){let d=z.chain(this.view.onKeyDown,c=>c.filter(p=>!is(p.target)).map(p=>new it(p)));z.chain(d,c=>c.filter(p=>p.keyCode===15))(this.onLeftArrow,this,this.disposables),z.chain(d,c=>c.filter(p=>p.keyCode===17))(this.onRightArrow,this,this.disposables),z.chain(d,c=>c.filter(p=>p.keyCode===10))(this.onSpace,this,this.disposables)}if((o.findWidgetEnabled??!0)&&o.keyboardNavigationLabelProvider&&o.contextViewProvider){let d=this.options.findWidgetStyles?{styles:this.options.findWidgetStyles}:void 0;this.findController=new MF(this,this.view,s,o.contextViewProvider,d),this.focusNavigationFilter=c=>this.findController.shouldAllowFocus(c),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode,this.onDidChangeFindMatchType=this.findController.onDidChangeMatchType,this.disposables.add(this.onDidSpliceModelRelay.event(()=>{!this.findController.isOpened()||this.findController.pattern.length===0||(this.refilter(),this.findController.render())}))}else this.onDidChangeFindMode=z.None,this.onDidChangeFindMatchType=z.None;o.enableStickyScroll&&(this.stickyScrollController=new xD(this,this.model,this.view,this.renderers,this.treeDelegate,o),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus),this.styleElement=No(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides==="always")}view;renderers;model;treeDelegate;focus;selection;anchor;eventBufferer=new iu;findController;onDidChangeFindOpenState=z.None;onDidChangeStickyScrollFocused=z.None;focusNavigationFilter;stickyScrollController;styleElement;disposables=new X;get onDidScroll(){return this.view.onDidScroll}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseClick(){return z.map(this.view.onMouseClick,vb)}get onMouseDblClick(){return z.filter(z.map(this.view.onMouseDblClick,vb),e=>e.target!==3)}get onMouseOver(){return z.map(this.view.onMouseOver,vb)}get onMouseOut(){return z.map(this.view.onMouseOut,vb)}get onContextMenu(){return z.any(z.filter(z.map(this.view.onContextMenu,oZ),e=>!e.isStickyScroll),this.stickyScrollController?.onContextMenu??z.None)}get onTap(){return z.map(this.view.onTap,vb)}get onPointer(){return z.map(this.view.onPointer,vb)}get onKeyDown(){return this.view.onKeyDown}get onKeyUp(){return this.view.onKeyUp}get onKeyPress(){return this.view.onKeyPress}get onDidFocus(){return this.view.onDidFocus}get onDidBlur(){return this.view.onDidBlur}onDidSwapModel=this.disposables.add(new T);onDidChangeModelRelay=this.disposables.add(new Ll);onDidSpliceModelRelay=this.disposables.add(new Ll);onDidChangeCollapseStateRelay=this.disposables.add(new Ll);onDidChangeRenderNodeCountRelay=this.disposables.add(new Ll);onDidChangeActiveNodesRelay=this.disposables.add(new Ll);get onDidChangeModel(){return z.any(this.onDidChangeModelRelay.event,this.onDidSwapModel.event)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}_onWillRefilter=new T;onWillRefilter=this._onWillRefilter.event;get findMode(){return this.findController?.mode??0}set findMode(e){this.findController&&(this.findController.mode=e)}onDidChangeFindMode;get findMatchType(){return this.findController?.matchType??0}set findMatchType(e){this.findController&&(this.findController.matchType=e)}onDidChangeFindMatchType;get onDidChangeFindPattern(){return this.findController?this.findController.onDidChangePattern:z.None}get expandOnDoubleClick(){return typeof this._options.expandOnDoubleClick>"u"?!0:this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return typeof this._options.expandOnlyOnTwistieClick>"u"?!0:this._options.expandOnlyOnTwistieClick}_onDidUpdateOptions=new T;onDidUpdateOptions=this._onDidUpdateOptions.event;get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options={...this._options,...e};for(let t of this.renderers)t.updateOptions(e);this.view.updateOptions(this._options),this.findController?.updateOptions(e),this.updateStickyScroll(e),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides==="always")}get options(){return this._options}updateStickyScroll(e){!this.stickyScrollController&&this._options.enableStickyScroll?(this.stickyScrollController=new xD(this,this.model,this.view,this.renderers,this.treeDelegate,this._options),this.onDidChangeStickyScrollFocused=this.stickyScrollController.onDidChangeHasFocus):this.stickyScrollController&&!this._options.enableStickyScroll&&(this.onDidChangeStickyScrollFocused=z.None,this.stickyScrollController.dispose(),this.stickyScrollController=void 0),this.stickyScrollController?.updateOptions(e)}updateWidth(e){let t=this.model.getListIndex(e);t!==-1&&this.view.updateWidth(t)}getHTMLElement(){return this.view.getHTMLElement()}get contentHeight(){return this.view.contentHeight}get contentWidth(){return this.view.contentWidth}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.view.onDidChangeContentWidth}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}get scrollLeft(){return this.view.scrollLeft}set scrollLeft(e){this.view.scrollLeft=e}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleElement(){let e=this.view.firstVisibleIndex;return this.stickyScrollController&&(e+=this.stickyScrollController.count),e<0||e>=this.view.length?void 0:this.view.element(e).element}get lastVisibleElement(){let e=this.view.lastVisibleIndex;return this.view.element(e).element}get ariaLabel(){return this.view.ariaLabel}set ariaLabel(e){this.view.ariaLabel=e}get selectionSize(){return this.selection.getNodes().length}domFocus(){this.stickyScrollController?.focusedLast()?this.stickyScrollController.domFocus():this.view.domFocus()}isDOMFocused(){return fr(this.getHTMLElement())}layout(e,t){this.view.layout(e,t),Uo(t)&&this.findController?.layout(t)}style(e){let t=`.${this.view.domId}`,n=[];e.treeIndentGuidesStroke&&(n.push(`.monaco-list${t}:hover .monaco-tl-indent > .indent-guide, .monaco-list${t}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeInactiveIndentGuidesStroke}; }`),n.push(`.monaco-list${t} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`));let i=e.treeStickyScrollBackground??e.listBackground;i&&(n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { background-color: ${i}; }`),n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-row { background-color: ${i}; }`)),e.treeStickyScrollBorder&&n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container { border-bottom: 1px solid ${e.treeStickyScrollBorder}; }`),e.treeStickyScrollShadow&&n.push(`.monaco-list${t} .monaco-scrollable-element .monaco-tree-sticky-container .monaco-tree-sticky-container-shadow { box-shadow: ${e.treeStickyScrollShadow} 0 6px 6px -6px inset; height: 3px; }`),e.listFocusForeground&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { color: inherit; }`));let o=As(e.listFocusAndSelectionOutline,As(e.listSelectionOutline,e.listFocusOutline??""));o&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused.selected { outline: 1px solid ${o}; outline-offset: -1px;}`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused.selected { outline: inherit;}`)),e.listFocusOutline&&(n.push(`.monaco-list${t}.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),n.push(`.monaco-list${t}:not(.sticky-scroll-focused) .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.focused { outline: inherit; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-scrollable-element .monaco-tree-sticky-container .monaco-list-row.passive-focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused.sticky-scroll-focused .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`),n.push(`.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused:not(.sticky-scroll-focused) .monaco-tree-sticky-container .monaco-list-rows .monaco-list-row.focused { outline: inherit; }`)),this.styleElement.textContent=n.join(`
`),this.view.style(e)}getParentElement(e){let t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}getNodeLocation(e){return this.model.getNodeLocation(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}toggleCollapsed(e,t=!1){return this.model.setCollapsed(e,void 0,t)}expandAll(){this.model.setCollapsed(this.model.rootRef,!1,!0)}collapseAll(){this.model.setCollapsed(this.model.rootRef,!0,!0)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}expandTo(e){this.model.expandTo(e)}triggerTypeNavigation(){this.view.triggerTypeNavigation()}openFind(){this.findController?.open()}closeFind(){this.findController?.close()}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setAnchor(e){if(typeof e>"u")return this.view.setAnchor(void 0);this.eventBufferer.bufferEvents(()=>{let t=this.model.getNode(e);this.anchor.set([t]);let n=this.model.getListIndex(e);n>-1&&this.view.setAnchor(n,!0)})}getAnchor(){return this.anchor.get().at(0)}setSelection(e,t){this.eventBufferer.bufferEvents(()=>{let n=e.map(o=>this.model.getNode(o));this.selection.set(n,t);let i=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setSelection(i,t,!0)})}getSelection(){return this.selection.get()}setFocus(e,t){this.eventBufferer.bufferEvents(()=>{let n=e.map(o=>this.model.getNode(o));this.focus.set(n,t);let i=e.map(o=>this.model.getListIndex(o)).filter(o=>o>-1);this.view.setFocus(i,t,!0)})}focusNext(e=1,t=!1,n,i=Qs(n)&&n.altKey?void 0:this.focusNavigationFilter){this.view.focusNext(e,t,n,i)}focusPrevious(e=1,t=!1,n,i=Qs(n)&&n.altKey?void 0:this.focusNavigationFilter){this.view.focusPrevious(e,t,n,i)}focusNextPage(e,t=Qs(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusNextPage(e,t)}focusPreviousPage(e,t=Qs(e)&&e.altKey?void 0:this.focusNavigationFilter){return this.view.focusPreviousPage(e,t,()=>this.stickyScrollController?.height??0)}focusLast(e,t=Qs(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusLast(e,t)}focusFirst(e,t=Qs(e)&&e.altKey?void 0:this.focusNavigationFilter){this.view.focusFirst(e,t)}getFocus(){return this.focus.get()}getStickyScrollFocus(){let e=this.stickyScrollController?.getFocus();return e!==void 0?[e]:[]}getFocusedPart(){return this.stickyScrollController?.focusedLast()?1:0}reveal(e,t){this.model.expandTo(e);let n=this.model.getListIndex(e);if(n!==-1)if(!this.stickyScrollController)this.view.reveal(n,t);else{let i=this.stickyScrollController.nodePositionTopBelowWidget(this.getNode(e));this.view.reveal(n,t,i)}}getRelativeTop(e){let t=this.model.getListIndex(e);if(t===-1)return null;let n=this.stickyScrollController?.getNode(this.getNode(e));return this.view.getRelativeTop(t,n?.position??this.stickyScrollController?.height)}getViewState(e=this.options.identityProvider){if(!e)throw new Dn(this._user,"Can't get tree view state without an identity provider");let t=s=>e.getId(s).toString(),n=TF.empty(this.scrollTop);for(let s of this.getFocus())n.focus.add(t(s));for(let s of this.getSelection())n.selection.add(t(s));let i=this.model.getNode(),o=[i];for(;o.length>0;){let s=o.shift();s!==i&&s.collapsible&&(n.expanded[t(s.element)]=s.collapsed?0:1),o.push(...s.children)}return n}onLeftArrow(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(t.length===0)return;let n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!0)){let s=this.model.getParentNodeLocation(i);if(!s)return;let a=this.model.getListIndex(s);this.view.reveal(a),this.view.setFocus([a])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(t.length===0)return;let n=t[0],i=this.model.getNodeLocation(n);if(!this.model.setCollapsed(i,!1)){if(!n.children.some(l=>l.visible))return;let[s]=this.view.getFocus(),a=s+1;this.view.reveal(a),this.view.setFocus([a])}}onSpace(e){e.preventDefault(),e.stopPropagation();let t=this.view.getFocusedElements();if(t.length===0)return;let n=t[0],i=this.model.getNodeLocation(n),o=e.browserEvent.altKey;this.model.setCollapsed(i,void 0,o)}modelDisposables=new X;setupModel(e){this.modelDisposables.clear(),this.modelDisposables.add(e.onDidSpliceRenderedNodes(({start:o,deleteCount:s,elements:a})=>this.view.splice(o,s,a)));let t=z.forEach(e.onDidSpliceModel,o=>{this.eventBufferer.bufferEvents(()=>{this.focus.onDidModelSplice(o),this.selection.onDidModelSplice(o)})},this.modelDisposables);t(()=>null,null,this.modelDisposables);let n=this.modelDisposables.add(new T),i=this.modelDisposables.add(new Vn(0));this.modelDisposables.add(z.any(t,this.focus.onDidChange,this.selection.onDidChange)(()=>{i.trigger(()=>{let o=new Set;for(let s of this.focus.getNodes())o.add(s);for(let s of this.selection.getNodes())o.add(s);n.fire([...o.values()])})})),this.onDidChangeActiveNodesRelay.input=n.event,this.onDidChangeModelRelay.input=z.signal(e.onDidSpliceModel),this.onDidChangeCollapseStateRelay.input=e.onDidChangeCollapseState,this.onDidChangeRenderNodeCountRelay.input=e.onDidChangeRenderNodeCount}setModel(e){let t=this.model;this.model=e,this.setupModel(e),this.renderers.forEach(n=>n.setModel(e)),this.stickyScrollController?.setModel(e),this.focus.set([]),this.selection.set([]),this.anchor.set([]),this.view.splice(0,t.getListRenderCount(t.rootRef)),this.model.refilter(),this.onDidSwapModel.fire()}getModel(){return this.model}navigate(e){return new WF(this.view,this.model,e)}dispose(){rt(this.disposables),this.stickyScrollController?.dispose(),this.view.dispose(),this.modelDisposables.dispose()}},WF=class{constructor(e,t,n){this.view=e;this.model=t;n?this.index=this.model.getListIndex(n):this.index=-1}index;current(){return this.index<0||this.index>=this.view.length?null:this.view.element(this.index).element}previous(){return this.index--,this.current()}next(){return this.index++,this.current()}first(){return this.index=0,this.current()}last(){return this.index=this.view.length-1,this.current()}};function VF(r,e){let t={...e};for(let n in r){let i=r[n];t[n]=i!==void 0?ne(i):void 0}return t}var FS={keybindingLabelBackground:ne(q4),keybindingLabelForeground:ne(Y4),keybindingLabelBorder:ne(X4),keybindingLabelBottomBorder:ne(Q4),keybindingLabelShadow:ne(Yu)};var fa={buttonForeground:ne(EI),buttonSeparator:ne(F4),buttonBackground:ne(Xu),buttonHoverBackground:ne(B4),buttonSecondaryForeground:ne(V4),buttonSecondaryBackground:ne(BT),buttonSecondaryHoverBackground:ne(H4),buttonBorder:ne(W4)};var SNt={progressBarBackground:ne(o4)};var HF={inputActiveOptionBorder:ne(CP),inputActiveOptionForeground:ne(EP),inputActiveOptionBackground:ne(xP)},CNt={activeForeground:ne(bf),activeBackground:ne(U4),activeBorder:ne(z4),inactiveForeground:ne(K4),inactiveBackground:ne(G4),inactiveBorder:ne(j4),inactiveHoverBackground:ne($4)};var xNt={checkboxBackground:ne(WT),checkboxBorder:ne(HT),checkboxForeground:ne(VT)};var ENt={dialogBackground:ne(ui),dialogForeground:ne(aa),dialogShadow:ne(Yu),dialogBorder:ne(Ie),errorIconForeground:ne(I4),warningIconForeground:ne(S4),infoIconForeground:ne(C4),textLinkForeground:ne(PT)};var ED={inputBackground:ne(vc),inputForeground:ne(td),inputBorder:ne(Za),inputValidationInfoBorder:ne(L4),inputValidationInfoBackground:ne(_4),inputValidationInfoForeground:ne(D4),inputValidationWarningBorder:ne(M4),inputValidationWarningBackground:ne(k4),inputValidationWarningForeground:ne(R4),inputValidationErrorBorder:ne(A4),inputValidationErrorBackground:ne(O4),inputValidationErrorForeground:ne(P4)};function Bc(r){return VF(r,ED)}var G8={listFilterWidgetBackground:ne(s5),listFilterWidgetOutline:ne(a5),listFilterWidgetNoMatchesOutline:ne(l5),listFilterWidgetShadow:ne(d5),inputBoxStyles:ED,toggleStyles:HF},TNt={badgeBackground:ne(sa),badgeForeground:ne(Gu),badgeBorder:ne(Ie)};var wNt={breadcrumbsBackground:ne(b4),breadcrumbsForeground:ne(f4),breadcrumbsHoverForeground:ne(yP),breadcrumbsFocusForeground:ne(yP),breadcrumbsFocusAndSelectionForeground:ne(v4)};var Sb={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:ne(UT),listFocusForeground:ne(zT),listFocusOutline:ne(Z4),listActiveSelectionBackground:ne(Jo),listActiveSelectionForeground:ne(la),listActiveSelectionIconForeground:ne(KT),listFocusAndSelectionOutline:ne(J4),listFocusAndSelectionBackground:ne(Jo),listFocusAndSelectionForeground:ne(la),listInactiveSelectionBackground:ne(GT),listInactiveSelectionIconForeground:ne(e5),listInactiveSelectionForeground:ne(jT),listInactiveFocusBackground:ne(t5),listInactiveFocusOutline:ne(n5),listHoverBackground:ne(nd),listHoverForeground:ne(TI),listDropOverBackground:ne(i5),listDropBetweenBackground:ne(o5),listSelectionOutline:ne(Wt),listHoverOutline:ne(Wt),treeIndentGuidesStroke:ne(yf),treeInactiveIndentGuidesStroke:ne(c5),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:ne(ju),tableColumnsBorder:ne(u5),tableOddRowsBackgroundColor:ne(wI)};function dl(r){return VF(r,Sb)}var UF={selectBackground:ne(Qu),selectListBackground:ne(N4),selectForeground:ne(Wh),decoratorRightForeground:ne(I5),selectBorder:ne(Vh),focusBorder:ne(Fi),listFocusBackground:ne(YT),listInactiveSelectionIconForeground:ne(qT),listFocusForeground:ne($T),listFocusOutline:Nh(Wt,H.transparent.toString()),listHoverBackground:ne(nd),listHoverForeground:ne(TI),listHoverOutline:ne(Wt),selectListBorder:ne(Fh),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0};function TD(r){return VF(r,UF)}var _Nt={shadowColor:ne(Yu),borderColor:ne(p5),foregroundColor:ne(h5),backgroundColor:ne(g5),selectionForegroundColor:ne(m5),selectionBackgroundColor:ne(f5),selectionBorderColor:ne(b5),separatorColor:ne(v5),scrollbarShadow:ne(ju),scrollbarSliderBackground:ne(AT),scrollbarSliderHoverBackground:ne(NT),scrollbarSliderActiveBackground:ne(FT)};var bg=class extends fb{_chords;_inputValue;recordDisposables=this._register(new X);_onKeybinding=this._register(new T);onKeybinding=this._onKeybinding.event;_onEnter=this._register(new T);onEnter=this._onEnter.event;_onEscape=this._register(new T);onEscape=this._onEscape.event;_onBlur=this._register(new T);onBlur=this._onBlur.event;constructor(e,t,n,i,o,s){super(e,t,n,i,o,s),this._register(me(()=>this.stopRecordingKeys())),this._chords=null,this._inputValue=""}clear(){this._chords=null,super.clear()}startRecordingKeys(){this.recordDisposables.add(U(this.inputBox.inputElement,ee.KEY_DOWN,e=>this._onKeyDown(new it(e)))),this.recordDisposables.add(U(this.inputBox.inputElement,ee.BLUR,()=>this._onBlur.fire())),this.recordDisposables.add(U(this.inputBox.inputElement,ee.INPUT,()=>{this.setInputValue(this._inputValue)}))}stopRecordingKeys(){this._chords=null,this.recordDisposables.clear()}setInputValue(e){this._inputValue=e,this.inputBox.value=this._inputValue}_onKeyDown(e){if(e.preventDefault(),e.stopPropagation(),!this.options.recordEnter&&e.equals(3)){this._onEnter.fire();return}if(e.equals(9)){this._onEscape.fire();return}this.printKeybinding(e)}printKeybinding(e){let t=this.keybindingService.resolveKeyboardEvent(e),n=`code: ${e.browserEvent.code}, keyCode: ${e.browserEvent.keyCode}, key: ${e.browserEvent.key} => UI: ${t.getAriaLabel()}, user settings: ${t.getUserSettingsLabel()}, dispatch: ${t.getDispatchChords()[0]}`,i=this.options;this._chords||(this._chords=[]),this._chords.length>0&&this._chords[this._chords.length-1].getDispatchChords()[0]===null?this._chords[this._chords.length-1]=t:(this._chords.length===2&&(this._chords=[]),this._chords.push(t));let s=this._chords.map(a=>a.getUserSettingsLabel()||"").join(" ");this.setInputValue(i.quoteRecordedKeys?`"${s}"`:s),this.inputBox.inputElement.title=n,this._onKeybinding.fire(this._chords)}};bg=_([y(2,Wo),y(3,we),y(4,Ne),y(5,_n)],bg);var ba=class extends On{constructor(t,n){super();this.instantiationService=n;this._domNode=Ye(document.createElement("div")),this._domNode.setDisplay("none"),this._domNode.setClassName("defineKeybindingWidget"),this._domNode.setWidth(ba.WIDTH),this._domNode.setHeight(ba.HEIGHT);let i=u("defineKeybinding.initial","Press desired key combination and then press ENTER.");q(this._domNode.domNode,ie(".message",void 0,i)),this._domNode.domNode.style.backgroundColor=ne(ui),this._domNode.domNode.style.color=ne(aa),this._domNode.domNode.style.boxShadow=`0 2px 8px ${ne(Yu)}`,this._keybindingInputWidget=this._register(this.instantiationService.createInstance(bg,this._domNode.domNode,{ariaLabel:i,history:[],inputBoxStyles:ED})),this._keybindingInputWidget.startRecordingKeys(),this._register(this._keybindingInputWidget.onKeybinding(o=>this.onKeybinding(o))),this._register(this._keybindingInputWidget.onEnter(()=>this.hide())),this._register(this._keybindingInputWidget.onEscape(()=>this.clearOrHide())),this._register(this._keybindingInputWidget.onBlur(()=>this.onCancel())),this._outputNode=q(this._domNode.domNode,ie(".output")),this._showExistingKeybindingsNode=q(this._domNode.domNode,ie(".existing")),t&&q(t,this._domNode.domNode)}static WIDTH=400;static HEIGHT=110;_domNode;_keybindingInputWidget;_outputNode;_showExistingKeybindingsNode;_keybindingDisposables=this._register(new X);_chords=null;_isVisible=!1;_onHide=this._register(new T);_onDidChange=this._register(new T);onDidChange=this._onDidChange.event;_onShowExistingKeybindings=this._register(new T);onShowExistingKeybidings=this._onShowExistingKeybindings.event;get domNode(){return this._domNode.domNode}define(){return this._keybindingInputWidget.clear(),Ko.withAsyncBody(async t=>{this._isVisible||(this._isVisible=!0,this._domNode.setDisplay("block"),this._chords=null,this._keybindingInputWidget.setInputValue(""),Kt(this._outputNode),Kt(this._showExistingKeybindingsNode),await po(0),this._keybindingInputWidget.focus());let n=this._onHide.event(()=>{t(this.getUserSettingsLabel()),n.dispose()})})}layout(t){let n=Math.round((t.height-ba.HEIGHT)/2);this._domNode.setTop(n);let i=Math.round((t.width-ba.WIDTH)/2);this._domNode.setLeft(i)}printExisting(t){if(t>0){let n=ie("span.existingText"),i=t===1?u("defineKeybinding.oneExists","1 existing command has this keybinding",t):u("defineKeybinding.existing","{0} existing commands have this keybinding",t);q(n,document.createTextNode(i)),ca(i),this._showExistingKeybindingsNode.appendChild(n),n.onmousedown=o=>{o.preventDefault()},n.onmouseup=o=>{o.preventDefault()},n.onclick=()=>{this._onShowExistingKeybindings.fire(this.getUserSettingsLabel())}}}onKeybinding(t){if(this._keybindingDisposables.clear(),this._chords=t,Kt(this._outputNode),Kt(this._showExistingKeybindingsNode),this._keybindingDisposables.add(new pg(this._outputNode,uo,FS)).set(this._chords?.[0]??void 0),this._chords)for(let o=1;o<this._chords.length;o++)this._outputNode.appendChild(document.createTextNode(u("defineKeybinding.chordsTo","chord to"))),this._keybindingDisposables.add(new pg(this._outputNode,uo,FS)).set(this._chords[o]);let i=this.getUserSettingsLabel();i&&this._onDidChange.fire(i)}getUserSettingsLabel(){let t=null;return this._chords&&(t=this._chords.map(n=>n.getUserSettingsLabel()).join(" ")),t}onCancel(){this._chords=null,this.hide()}clearOrHide(){this._chords===null?this.hide():(this._chords=null,this._keybindingInputWidget.clear(),Kt(this._outputNode),Kt(this._showExistingKeybindingsNode))}hide(){this._domNode.setDisplay("none"),this._isVisible=!1,this._onHide.fire()}};ba=_([y(1,we)],ba);var Cb=class extends N{constructor(t,n){super();this._editor=t;this._widget=this._register(n.createInstance(ba,null)),this._editor.addOverlayWidget(this)}static ID="editor.contrib.defineKeybindingWidget";_widget;getId(){return Cb.ID}getDomNode(){return this._widget.domNode}getPosition(){return{preference:null}}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}start(){this._editor.hasModel()&&this._editor.revealPositionInCenterIfOutsideViewport(this._editor.getPosition(),0);let t=this._editor.getLayoutInfo();return this._widget.layout(new Et(t.width,t.height)),this._widget.define()}};Cb=_([y(1,we)],Cb);var j8=j("preferencesSearchService"),_D="settings.action.clearSearchResults",DD="settings.action.showContextMenu",$8="settings.action.suggestFilters",cl=new B("inSettingsEditor",!1),zF=new B("inSettingsJSONEditor",!1),vg=new B("inSettingsSearch",!1),LD=new B("settingsTocRowFocus",!1),BS=new B("settingRowFocus",!1),oi=new B("inKeybindings",!1),xb=new B("inKeybindingsSearch",!1),va=new B("keybindingFocus",!1),yg=new B("whenFocus",!1),q8="keybindings.editor.searchKeybindings",kD="keybindings.editor.clearSearchResults",Y8="keybindings.editor.clearSearchHistory",RD="keybindings.editor.recordSearchKeys",MD="keybindings.editor.toggleSortByPrecedence",Eb="keybindings.editor.defineKeybinding",OD="keybindings.editor.addKeybinding",PD="keybindings.editor.defineWhenExpression",X8="keybindings.editor.acceptWhenExpression",Q8="keybindings.editor.rejectWhenExpression",AD="keybindings.editor.removeKeybinding",ND="keybindings.editor.resetKeybinding",FD="keybindings.editor.copyKeybindingEntry",BD="keybindings.editor.copyCommandKeybindingEntry",WD="keybindings.editor.copyCommandTitle",VD="keybindings.editor.showConflicts",Z8="keybindings.editor.focusKeybindings",J8="keybindings.editor.showDefaultKeybindings",e9="keybindings.editor.showUserKeybindings",t9="keybindings.editor.showExtensionKeybindings",_d="modified",Tb="ext:",_r="feature:",KF="id:",ya="lang:",n9="tag:",Dd="hasPolicy",i9="workspaceTrust",wb="requireTrustedWorkspace";var HD=!0,GF=!0,wD;async function o9(r,e){if(GF&&r.isEnabled()){if(wD)return wD;if(e.extensionRecommendations&&e.commonlyUsedSettings){let t={};Object.keys(e.extensionRecommendations).forEach(i=>{let o=e.extensionRecommendations[i];o.onSettingsEditorOpen&&(t[i]=o)});let n={};for(let i in t){let o=i,s=e.quality==="stable";try{let[a]=await r.getExtensions([{id:o,preRelease:!s}],Yt.None);if(a)n[i]=a;else return}catch{return}}return wD={settingsEditorRecommendedExtensions:t,recommendedExtensionsGalleryInfo:n,commonlyUsed:e.commonlyUsedSettings},wD}}}function _b(r,e){let t=r??Number.MAX_SAFE_INTEGER,n=e??Number.MAX_SAFE_INTEGER;return t<n?-1:t>n?1:0}var lBt=u("views log","Views"),dBt=xn("default-view-icon",re.window,u("defaultViewIcon","Default view icon.")),qF;(t=>(t.ViewContainersRegistry="workbench.registry.view.containers",t.ViewsRegistry="workbench.registry.view"))(qF||={});var jF=class extends N{_onDidRegister=this._register(new T);onDidRegister=this._onDidRegister.event;_onDidDeregister=this._register(new T);onDidDeregister=this._onDidDeregister.event;viewContainers=new Map;defaultViewContainers=[];get all(){return[...this.viewContainers.values()].flat()}registerViewContainer(e,t,n){let i=this.get(e.id);if(i)return i;let o=e;return o.openCommandActionDescriptor=n?.doNotRegisterOpenCommand?void 0:o.openCommandActionDescriptor??{id:o.id},oy(this.viewContainers,t,[]).push(o),n?.isDefault&&this.defaultViewContainers.push(o),this._onDidRegister.fire({viewContainer:o,viewContainerLocation:t}),o}deregisterViewContainer(e){for(let t of this.viewContainers.keys()){let n=this.viewContainers.get(t),i=n?.indexOf(e);if(i!==-1){n?.splice(i,1),n.length===0&&this.viewContainers.delete(t),this._onDidDeregister.fire({viewContainer:e,viewContainerLocation:t});return}}}get(e){return this.all.filter(t=>t.id===e)[0]}getViewContainers(e){return[...this.viewContainers.get(e)||[]]}getViewContainerLocation(e){return[...this.viewContainers.keys()].filter(t=>this.getViewContainers(t).filter(n=>n?.id===e.id).length>0)[0]}getDefaultViewContainer(e){return this.defaultViewContainers.find(t=>this.getViewContainerLocation(t)===e)}};Te.add(qF.ViewContainersRegistry,new jF);function rZ(r,e){let t=r.group??"9_more",n=e.group??"9_more";return t!==n?t.localeCompare(n):(r.order??5)-(e.order??5)}var $F=class extends N{_onViewsRegistered=this._register(new T);onViewsRegistered=this._onViewsRegistered.event;_onViewsDeregistered=this._register(new T);onViewsDeregistered=this._onViewsDeregistered.event;_onDidChangeContainer=this._register(new T);onDidChangeContainer=this._onDidChangeContainer.event;_onDidChangeViewWelcomeContent=this._register(new T);onDidChangeViewWelcomeContent=this._onDidChangeViewWelcomeContent.event;_viewContainers=[];_views=new Map;_viewWelcomeContents=new nc;registerViews(e,t){this.registerViews2([{views:e,viewContainer:t}])}registerViews2(e){e.forEach(({views:t,viewContainer:n})=>this.addViews(t,n)),this._onViewsRegistered.fire(e)}deregisterViews(e,t){let n=this.removeViews(e,t);n.length&&this._onViewsDeregistered.fire({views:n,viewContainer:t})}moveViews(e,t){for(let n of this._views.keys())if(n!==t){let i=this.removeViews(e,n);i.length&&(this.addViews(i,t),this._onDidChangeContainer.fire({views:i,from:n,to:t}))}}getViews(e){return this._views.get(e)||[]}getView(e){for(let t of this._viewContainers){let n=(this._views.get(t)||[]).filter(i=>i.id===e)[0];if(n)return n}return null}getViewContainer(e){for(let t of this._viewContainers)if((this._views.get(t)||[]).filter(i=>i.id===e)[0])return t;return null}registerViewWelcomeContent(e,t){return this._viewWelcomeContents.add(e,t),this._onDidChangeViewWelcomeContent.fire(e),me(()=>{this._viewWelcomeContents.delete(e,t),this._onDidChangeViewWelcomeContent.fire(e)})}registerViewWelcomeContent2(e,t){let n=new Map;for(let[i,o]of t)this._viewWelcomeContents.add(e,o),n.set(i,me(()=>{this._viewWelcomeContents.delete(e,o),this._onDidChangeViewWelcomeContent.fire(e)}));return this._onDidChangeViewWelcomeContent.fire(e),n}getViewWelcomeContent(e){let t=[];return this._viewWelcomeContents.forEach(e,n=>t.push(n)),t.sort(rZ)}addViews(e,t){let n=this._views.get(t);n||(n=[],this._views.set(t,n),this._viewContainers.push(t));for(let i of e){if(this.getView(i.id)!==null)throw new Error(u("duplicateId","A view with id '{0}' is already registered",i.id));n.push(i)}}removeViews(e,t){let n=this._views.get(t);if(!n)return[];let i=[],o=[];for(let s of n)e.includes(s)?i.push(s):o.push(s);return i.length&&(o.length?this._views.set(t,o):(this._views.delete(t),this._viewContainers.splice(this._viewContainers.indexOf(t),1))),i}};Te.add(qF.ViewsRegistry,new $F);var cBt=j("viewDescriptorService");var Dr=j("IUserDataProfileService"),NBt=j("IUserDataProfileManagementService");var FBt=j("IUserDataProfileImportExportService"),BBt=xn("defaultProfile-icon",re.settings,u("defaultProfileIcon","Icon for Default Profile.")),sZ=gt("profiles","Profiles"),WBt={...sZ},aZ="code-profile",VBt=[{name:u("profile","Profile"),extensions:[aZ]}],HBt=new B("profiles.enabled",!0),r9=new B("currentProfile",""),UBt=new B("isCurrentProfileTransient",!1),zBt=new B("hasProfiles",!1);var YF=j("keybindingEditingService"),WS=class extends N{constructor(t,n,i,o){super();this.textModelResolverService=t;this.textFileService=n;this.fileService=i;this.userDataProfileService=o;this.queue=new $x}_serviceBrand;queue;addKeybinding(t,n,i){return this.queue.queue(()=>this.doEditKeybinding(t,n,i,!0))}editKeybinding(t,n,i){return this.queue.queue(()=>this.doEditKeybinding(t,n,i,!1))}resetKeybinding(t){return this.queue.queue(()=>this.doResetKeybinding(t))}removeKeybinding(t){return this.queue.queue(()=>this.doRemoveKeybinding(t))}async doEditKeybinding(t,n,i,o){let s=await this.resolveAndValidate(),a=s.object.textEditorModel;if(o)this.updateKeybinding(t,n,i,a,-1);else{let l=nl(a.getValue()),d=this.findUserKeybindingEntryIndex(t,l);this.updateKeybinding(t,n,i,a,d),t.isDefault&&t.resolvedKeybinding&&this.removeDefaultKeybinding(t,a)}try{await this.save()}finally{s.dispose()}}async doRemoveKeybinding(t){let n=await this.resolveAndValidate(),i=n.object.textEditorModel;t.isDefault?this.removeDefaultKeybinding(t,i):this.removeUserKeybinding(t,i);try{return await this.save()}finally{n.dispose()}}async doResetKeybinding(t){let n=await this.resolveAndValidate(),i=n.object.textEditorModel;t.isDefault||(this.removeUserKeybinding(t,i),this.removeUnassignedDefaultKeybinding(t,i));try{return await this.save()}finally{n.dispose()}}save(){return this.textFileService.save(this.userDataProfileService.currentProfile.keybindingsResource)}updateKeybinding(t,n,i,o,s){let{tabSize:a,insertSpaces:l}=o.getOptions(),d=o.getEOL();if(s!==-1){this.applyEditsToBuffer(ud(o.getValue(),[s,"key"],n,{tabSize:a,insertSpaces:l,eol:d})[0],o);let c=ud(o.getValue(),[s,"when"],i,{tabSize:a,insertSpaces:l,eol:d});c.length>0&&this.applyEditsToBuffer(c[0],o)}else this.applyEditsToBuffer(ud(o.getValue(),[-1],this.asObject(n,t.command,i,!1),{tabSize:a,insertSpaces:l,eol:d})[0],o)}removeUserKeybinding(t,n){let{tabSize:i,insertSpaces:o}=n.getOptions(),s=n.getEOL(),a=nl(n.getValue()),l=this.findUserKeybindingEntryIndex(t,a);l!==-1&&this.applyEditsToBuffer(ud(n.getValue(),[l],void 0,{tabSize:i,insertSpaces:o,eol:s})[0],n)}removeDefaultKeybinding(t,n){let{tabSize:i,insertSpaces:o}=n.getOptions(),s=n.getEOL(),a=t.resolvedKeybinding?t.resolvedKeybinding.getUserSettingsLabel():null;if(a){let l=this.asObject(a,t.command,t.when?t.when.serialize():void 0,!0);nl(n.getValue()).every(c=>!this.areSame(c,l))&&this.applyEditsToBuffer(ud(n.getValue(),[-1],l,{tabSize:i,insertSpaces:o,eol:s})[0],n)}}removeUnassignedDefaultKeybinding(t,n){let{tabSize:i,insertSpaces:o}=n.getOptions(),s=n.getEOL(),a=nl(n.getValue()),l=this.findUnassignedDefaultKeybindingEntryIndex(t,a).reverse();for(let d of l)this.applyEditsToBuffer(ud(n.getValue(),[d],void 0,{tabSize:i,insertSpaces:o,eol:s})[0],n)}findUserKeybindingEntryIndex(t,n){for(let i=0;i<n.length;i++){let o=n[i];if(o.command===t.command){if(!o.when&&!t.when)return i;if(o.when&&t.when){let s=oe.deserialize(o.when);if(s&&s.serialize()===t.when.serialize())return i}}}return-1}findUnassignedDefaultKeybindingEntryIndex(t,n){let i=[];for(let o=0;o<n.length;o++)n[o].command===`-${t.command}`&&i.push(o);return i}asObject(t,n,i,o){let s={key:t};return n&&(s.command=o?`-${n}`:n),i&&(s.when=i),s}areSame(t,n){if(t.command!==n.command||t.key!==n.key)return!1;let i=oe.deserialize(t.when),o=oe.deserialize(n.when);return!(i&&!o||!i&&o||i&&o&&!i.equals(o)||!wn(t.args,n.args))}applyEditsToBuffer(t,n){let i=n.getPositionAt(t.offset),o=n.getPositionAt(t.offset+t.length),s=new D(i.lineNumber,i.column,o.lineNumber,o.column),l=n.getValueInRange(s)?mo.replace(s,t.content):mo.insert(i,t.content);n.pushEditOperations([new ze(i.lineNumber,i.column,i.lineNumber,i.column)],[l],()=>[])}async resolveModelReference(){return await this.fileService.exists(this.userDataProfileService.currentProfile.keybindingsResource)||await this.textFileService.write(this.userDataProfileService.currentProfile.keybindingsResource,this.getEmptyContent(),{encoding:"utf8"}),this.textModelResolverService.createModelReference(this.userDataProfileService.currentProfile.keybindingsResource)}async resolveAndValidate(){if(this.textFileService.isDirty(this.userDataProfileService.currentProfile.keybindingsResource))throw new Error(u("errorKeybindingsFileDirty","Unable to write because the keybindings configuration file has unsaved changes. Please save it first and then try again."));let t=await this.resolveModelReference(),n=t.object.textEditorModel,i=n.getEOL();if(n.getValue()){let o=this.parse(n);if(o.parseErrors.length)throw t.dispose(),new Error(u("parseErrors","Unable to write to the keybindings configuration file. Please open it to correct errors/warnings in the file and try again."));if(o.result){if(!Array.isArray(o.result))throw t.dispose(),new Error(u("errorInvalidConfiguration","Unable to write to the keybindings configuration file. It has an object which is not of type Array. Please open the file to clean up and try again."))}else{let s=i+"[]";this.applyEditsToBuffer({content:s,length:s.length,offset:n.getValue().length},n)}}else{let o=this.getEmptyContent();this.applyEditsToBuffer({content:o,length:o.length,offset:0},n)}return t}parse(t){let n=[];return{result:nl(t.getValue(),n,{allowTrailingComma:!0,allowEmptyContent:!0}),parseErrors:n}}getEmptyContent(){return"// "+u("emptyKeybindingsHeader","Place your key bindings in this file to override the defaults")+`
[
]`}};WS=_([y(0,Ic),y(1,Us),y(2,nn),y(3,Dr)],WS);Cn(YF,WS,1);var XF=class{constructor(e,t){this.renderer=e;this.modelProvider=t}get templateId(){return this.renderer.templateId}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:N.None}}renderElement(e,t,n,i){if(n.disposable?.dispose(),!n.data)return;let o=this.modelProvider();if(o.isResolved(e))return this.renderer.renderElement(o.get(e),e,n.data,i);let s=new jn,a=o.resolve(e,s.token);n.disposable={dispose:()=>s.cancel()},this.renderer.renderPlaceholder(e,n.data),a.then(l=>this.renderer.renderElement(l,e,n.data,i))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}},QF=class{constructor(e,t){this.modelProvider=e;this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){let t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}};function lZ(r,e){return{...e,accessibilityProvider:e.accessibilityProvider&&new QF(r,e.accessibilityProvider)}}var UD=class{list;_model;constructor(e,t,n,i,o={}){let s=()=>this.model,a=i.map(l=>new XF(l,s));this.list=new Ei(e,t,n,a,lZ(s,o))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}isDOMFocused(){return fr(this.getHTMLElement())}domFocus(){this.list.domFocus()}get onDidFocus(){return this.list.onDidFocus}get onDidBlur(){return this.list.onDidBlur}get widget(){return this.list}get onDidDispose(){return this.list.onDidDispose}get onMouseClick(){return z.map(this.list.onMouseClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onMouseDblClick(){return z.map(this.list.onMouseDblClick,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onTap(){return z.map(this.list.onTap,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onPointer(){return z.map(this.list.onPointer,({element:e,index:t,browserEvent:n})=>({element:e===void 0?void 0:this._model.get(e),index:t,browserEvent:n}))}get onDidChangeFocus(){return z.map(this.list.onDidChangeFocus,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(i=>this._model.get(i)),indexes:t,browserEvent:n}))}get onDidChangeSelection(){return z.map(this.list.onDidChangeSelection,({elements:e,indexes:t,browserEvent:n})=>({elements:e.map(i=>this._model.get(i)),indexes:t,browserEvent:n}))}get onContextMenu(){return z.map(this.list.onContextMenu,({element:e,index:t,anchor:n,browserEvent:i})=>typeof e>"u"?{element:e,index:t,anchor:n,browserEvent:i}:{element:this._model.get(e),index:t,anchor:n,browserEvent:i})}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,ki(e.length))}get length(){return this.list.length}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollLeft(){return this.list.scrollLeft}set scrollLeft(e){this.list.scrollLeft=e}setAnchor(e){this.list.setAnchor(e)}getAnchor(){return this.list.getAnchor()}setFocus(e){this.list.setFocus(e)}focusNext(e,t){this.list.focusNext(e,t)}focusPrevious(e,t){this.list.focusPrevious(e,t)}focusNextPage(){return this.list.focusNextPage()}focusPreviousPage(){return this.list.focusPreviousPage()}focusLast(){this.list.focusLast()}focusFirst(){this.list.focusFirst()}getFocus(){return this.list.getFocus()}setSelection(e,t){this.list.setSelection(e,t)}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map(e=>this.model.get(e))}layout(e,t){this.list.layout(e,t)}triggerTypeNavigation(){this.list.triggerTypeNavigation()}reveal(e,t){this.list.reveal(e,t)}style(e){this.list.style(e)}dispose(){this.list.dispose()}};var zD=class r{constructor(e,t,n){this.columns=e;this.getColumnSize=n;let i=new Map(t.map(o=>[o.templateId,o]));this.renderers=[];for(let o of e){let s=i.get(o.templateId);if(!s)throw new Error(`Table cell renderer for template id ${o.templateId} not found.`);this.renderers.push(s)}}static TemplateId="row";templateId=r.TemplateId;renderers;renderedTemplates=new Set;renderTemplate(e){let t=q(e,ie(".monaco-table-tr")),n=[],i=[];for(let s=0;s<this.columns.length;s++){let a=this.renderers[s],l=q(t,ie(".monaco-table-td",{"data-col-index":s}));l.style.width=`${this.getColumnSize(s)}px`,n.push(l),i.push(a.renderTemplate(l))}let o={container:e,cellContainers:n,cellTemplateData:i};return this.renderedTemplates.add(o),o}renderElement(e,t,n,i){for(let o=0;o<this.columns.length;o++){let a=this.columns[o].project(e);this.renderers[o].renderElement(a,t,n.cellTemplateData[o],i)}}disposeElement(e,t,n,i){for(let o=0;o<this.columns.length;o++){let s=this.renderers[o];if(s.disposeElement){let l=this.columns[o].project(e);s.disposeElement(l,t,n.cellTemplateData[o],i)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++)this.renderers[t].disposeTemplate(e.cellTemplateData[t]);Kt(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(let{cellContainers:n}of this.renderedTemplates)n[e].style.width=`${t}px`}};function dZ(r){return{getHeight(e){return r.getHeight(e)},getTemplateId(){return zD.TemplateId}}}var ZF=class extends N{constructor(t,n){super();this.column=t;this.index=n;this.element=ie(".monaco-table-th",{"data-col-index":n},t.label),t.tooltip&&this._register(ii().setupManagedHover(pt("mouse"),this.element,t.tooltip))}element;get minimumSize(){return this.column.minimumWidth??120}get maximumSize(){return this.column.maximumWidth??Number.POSITIVE_INFINITY}get onDidChange(){return this.column.onDidChangeWidthConstraints??z.None}_onDidLayout=new T;onDidLayout=this._onDidLayout.event;layout(t){this._onDidLayout.fire([this.index,t])}},KD=class r{constructor(e,t,n,i,o,s){this.virtualDelegate=n;this.columns=i;this.domNode=q(t,ie(`.monaco-table.${this.domId}`));let a=i.map((c,p)=>this.disposables.add(new ZF(c,p))),l={size:a.reduce((c,p)=>c+p.column.weight,0),views:a.map(c=>({size:c.column.weight,view:c}))};this.splitview=this.disposables.add(new lg(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:l})),this.splitview.el.style.height=`${n.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${n.headerRowHeight}px`;let d=new zD(i,o,c=>this.splitview.getViewSize(c));this.list=this.disposables.add(new Ei(e,this.domNode,dZ(n),[d],s)),z.any(...a.map(c=>c.onDidLayout))(([c,p])=>d.layoutColumn(c,p),null,this.disposables),this.splitview.onDidSashReset(c=>{let p=i.reduce((g,f)=>g+f.weight,0),h=i[c].weight/p*this.cachedWidth;this.splitview.resizeView(c,h)},null,this.disposables),this.styleElement=No(this.domNode),this.style(Pw)}static InstanceCount=0;domId=`table_id_${++r.InstanceCount}`;domNode;splitview;list;styleElement;disposables=new X;cachedWidth=0;cachedHeight=0;get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onDidScroll(){return this.list.onDidScroll}get onMouseClick(){return this.list.onMouseClick}get onMouseDblClick(){return this.list.onMouseDblClick}get onMouseMiddleClick(){return this.list.onMouseMiddleClick}get onPointer(){return this.list.onPointer}get onMouseUp(){return this.list.onMouseUp}get onMouseDown(){return this.list.onMouseDown}get onMouseOver(){return this.list.onMouseOver}get onMouseMove(){return this.list.onMouseMove}get onMouseOut(){return this.list.onMouseOut}get onTouchStart(){return this.list.onTouchStart}get onTap(){return this.list.onTap}get onContextMenu(){return this.list.onContextMenu}get onDidFocus(){return this.list.onDidFocus}get onDidBlur(){return this.list.onDidBlur}get scrollTop(){return this.list.scrollTop}set scrollTop(e){this.list.scrollTop=e}get scrollLeft(){return this.list.scrollLeft}set scrollLeft(e){this.list.scrollLeft=e}get scrollHeight(){return this.list.scrollHeight}get renderHeight(){return this.list.renderHeight}get onDidDispose(){return this.list.onDidDispose}getColumnLabels(){return this.columns.map(e=>e.label)}resizeColumn(e,t){let n=Math.round(t/100*this.cachedWidth);this.splitview.resizeView(e,n)}updateOptions(e){this.list.updateOptions(e)}splice(e,t,n=[]){this.list.splice(e,t,n)}rerender(){this.list.rerender()}row(e){return this.list.element(e)}indexOf(e){return this.list.indexOf(e)}get length(){return this.list.length}getHTMLElement(){return this.domNode}layout(e,t){e=e??sE(this.domNode),t=t??Rm(this.domNode),this.cachedWidth=t,this.cachedHeight=e,this.splitview.layout(t);let n=e-this.virtualDelegate.headerRowHeight;this.list.getHTMLElement().style.height=`${n}px`,this.list.layout(n,t)}triggerTypeNavigation(){this.list.triggerTypeNavigation()}style(e){let t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {
			top: ${this.virtualDelegate.headerRowHeight+1}px;
			height: calc(100% - ${this.virtualDelegate.headerRowHeight}px);
		}`),this.styleElement.textContent=t.join(`
`),this.list.style(e)}domFocus(){this.list.domFocus()}setAnchor(e){this.list.setAnchor(e)}getAnchor(){return this.list.getAnchor()}getSelectedElements(){return this.list.getSelectedElements()}setSelection(e,t){this.list.setSelection(e,t)}getSelection(){return this.list.getSelection()}setFocus(e,t){this.list.setFocus(e,t)}focusNext(e=1,t=!1,n){this.list.focusNext(e,t,n)}focusPrevious(e=1,t=!1,n){this.list.focusPrevious(e,t,n)}focusNextPage(e){return this.list.focusNextPage(e)}focusPreviousPage(e){return this.list.focusPreviousPage(e)}focusFirst(e){this.list.focusFirst(e)}focusLast(e){this.list.focusLast(e)}getFocus(){return this.list.getFocus()}getFocusedElements(){return this.list.getFocusedElements()}getRelativeTop(e){return this.list.getRelativeTop(e)}reveal(e,t){this.list.reveal(e,t)}dispose(){this.disposables.dispose()}};var Ld=class{constructor(e,t={}){this.user=e;this.model=new SD(e,null,t),this.onDidSpliceModel=this.model.onDidSpliceModel,this.onDidSpliceRenderedNodes=this.model.onDidSpliceRenderedNodes,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,t.sorter&&(this.sorter={compare(n,i){return t.sorter.compare(n.element,i.element)}}),this.identityProvider=t.identityProvider}rootRef=null;model;nodes=new Map;nodesByIdentity=new Map;identityProvider;sorter;onDidSpliceModel;onDidSpliceRenderedNodes;onDidChangeCollapseState;onDidChangeRenderNodeCount;get size(){return this.nodes.size}setChildren(e,t=tt.empty(),n={}){let i=this.getElementLocation(e);this._setChildren(i,this.preserveCollapseState(t),n)}_setChildren(e,t=tt.empty(),n){let i=new Set,o=new Set,s=l=>{if(l.element===null)return;let d=l;if(i.add(d.element),this.nodes.set(d.element,d),this.identityProvider){let c=this.identityProvider.getId(d.element).toString();o.add(c),this.nodesByIdentity.set(c,d)}n.onDidCreateNode?.(d)},a=l=>{if(l.element===null)return;let d=l;if(i.has(d.element)||this.nodes.delete(d.element),this.identityProvider){let c=this.identityProvider.getId(d.element).toString();o.has(c)||this.nodesByIdentity.delete(c)}n.onDidDeleteNode?.(d)};this.model.splice([...e,0],Number.MAX_VALUE,t,{...n,onDidCreateNode:s,onDidDeleteNode:a})}preserveCollapseState(e=tt.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),tt.map(e,t=>{let n=this.nodes.get(t.element);if(!n&&this.identityProvider){let s=this.identityProvider.getId(t.element).toString();n=this.nodesByIdentity.get(s)}if(!n){let s;return typeof t.collapsed>"u"?s=void 0:t.collapsed===1||t.collapsed===3?s=!0:t.collapsed===0||t.collapsed===2?s=!1:s=!!t.collapsed,{...t,children:this.preserveCollapseState(t.children),collapsed:s}}let i=typeof t.collapsible=="boolean"?t.collapsible:n.collapsible,o;return typeof t.collapsed>"u"||t.collapsed===3||t.collapsed===2?o=n.collapsed:t.collapsed===1?o=!0:t.collapsed===0?o=!1:o=!!t.collapsed,{...t,collapsible:i,collapsed:o,children:this.preserveCollapseState(t.children)}})}rerender(e){let t=this.getElementLocation(e);this.model.rerender(t)}resort(e=null,t=!0){if(!this.sorter)return;let n=this.getElementLocation(e),i=this.model.getNode(n);this._setChildren(n,this.resortChildren(i,t),{})}resortChildren(e,t,n=!0){let i=[...e.children];return(t||n)&&(i=i.sort(this.sorter.compare.bind(this.sorter))),tt.map(i,o=>({element:o.element,collapsible:o.collapsible,collapsed:o.collapsed,children:this.resortChildren(o,t,!1)}))}getFirstElementChild(e=null){let t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}getLastElementAncestor(e=null){let t=this.getElementLocation(e);return this.model.getLastElementAncestor(t)}has(e){return this.nodes.has(e)}getListIndex(e){let t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){let t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){let t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){let n=this.getElementLocation(e);return this.model.setCollapsible(n,t)}isCollapsed(e){let t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){let i=this.getElementLocation(e);return this.model.setCollapsed(i,t,n)}expandTo(e){let t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(e===null)return this.model.getNode(this.model.rootRef);let t=this.nodes.get(e);if(!t)throw new Dn(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(e===null)throw new Dn(this.user,"Invalid getParentNodeLocation call");let t=this.nodes.get(e);if(!t)throw new Dn(this.user,`Tree element not found: ${e}`);let n=this.model.getNodeLocation(t),i=this.model.getParentNodeLocation(n);return this.model.getNode(i).element}getElementLocation(e){if(e===null)return[];let t=this.nodes.get(e);if(!t)throw new Dn(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}};function GD(r){let e=[r.element],t=r.incompressible||!1;return{element:{elements:e,incompressible:t},children:tt.map(tt.from(r.children),GD),collapsible:r.collapsible,collapsed:r.collapsed}}function jD(r){let e=[r.element],t=r.incompressible||!1,n,i;for(;[i,n]=tt.consume(tt.from(r.children),2),!(i.length!==1||i[0].incompressible);)r=i[0],e.push(r.element);return{element:{elements:e,incompressible:t},children:tt.map(tt.concat(i,n),jD),collapsible:r.collapsible,collapsed:r.collapsed}}function JF(r,e=0){let t;return e<r.element.elements.length-1?t=[JF(r,e+1)]:t=tt.map(tt.from(r.children),n=>JF(n,0)),e===0&&r.element.incompressible?{element:r.element.elements[e],children:t,incompressible:!0,collapsible:r.collapsible,collapsed:r.collapsed}:{element:r.element.elements[e],children:t,collapsible:r.collapsible,collapsed:r.collapsed}}function s9(r){return JF(r,0)}function a9(r,e,t){return r.element===e?{...r,children:t}:{...r,children:tt.map(tt.from(r.children),n=>a9(n,e,t))}}var uZ=r=>({getId(e){return e.elements.map(t=>r.getId(t).toString()).join("\0")}}),eB=class{constructor(e,t={}){this.user=e;this.model=new Ld(e,t),this.enabled=typeof t.compressionEnabled>"u"?!0:t.compressionEnabled,this.identityProvider=t.identityProvider}rootRef=null;get onDidSpliceRenderedNodes(){return this.model.onDidSpliceRenderedNodes}get onDidSpliceModel(){return this.model.onDidSpliceModel}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}model;nodes=new Map;enabled;identityProvider;get size(){return this.nodes.size}setChildren(e,t=tt.empty(),n){let i=n.diffIdentityProvider&&uZ(n.diffIdentityProvider);if(e===null){let f=tt.map(t,this.enabled?jD:GD);this._setChildren(null,f,{diffIdentityProvider:i,diffDepth:1/0});return}let o=this.nodes.get(e);if(!o)throw new Dn(this.user,"Unknown compressed tree node");let s=this.model.getNode(o),a=this.model.getParentNodeLocation(o),l=this.model.getNode(a),d=s9(s),c=a9(d,e,t),p=(this.enabled?jD:GD)(c),h=n.diffIdentityProvider?(f,m)=>n.diffIdentityProvider.getId(f)===n.diffIdentityProvider.getId(m):void 0;if(sn(p.element.elements,s.element.elements,h)){this._setChildren(o,p.children||tt.empty(),{diffIdentityProvider:i,diffDepth:1});return}let g=l.children.map(f=>f===s?p:f);this._setChildren(l.element,g,{diffIdentityProvider:i,diffDepth:s.depth-l.depth})}isCompressionEnabled(){return this.enabled}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;let n=this.model.getNode().children,i=tt.map(n,s9),o=tt.map(i,e?jD:GD);this._setChildren(null,o,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,n){let i=new Set,o=a=>{for(let l of a.element.elements)i.add(l),this.nodes.set(l,a.element)},s=a=>{for(let l of a.element.elements)i.has(l)||this.nodes.delete(l)};this.model.setChildren(e,t,{...n,onDidCreateNode:o,onDidDeleteNode:s})}has(e){return this.nodes.has(e)}getListIndex(e){let t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){let t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(typeof e>"u")return this.model.getNode();let t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){let t=this.model.getNodeLocation(e);return t===null?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){let t=this.getCompressedNode(e),n=this.model.getParentNodeLocation(t);return n===null?null:n.elements[n.elements.length-1]}getFirstElementChild(e){let t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}getLastElementAncestor(e){let t=typeof e>"u"?void 0:this.getCompressedNode(e);return this.model.getLastElementAncestor(t)}isCollapsible(e){let t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){let n=this.getCompressedNode(e);return this.model.setCollapsible(n,t)}isCollapsed(e){let t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,n){let i=this.getCompressedNode(e);return this.model.setCollapsed(i,t,n)}expandTo(e){let t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){let t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}resort(e=null,t=!0){let n=this.getCompressedNode(e);this.model.resort(n,t)}getCompressedNode(e){if(e===null)return null;let t=this.nodes.get(e);if(!t)throw new Dn(this.user,`Tree element not found: ${e}`);return t}},pZ=r=>r[r.length-1],tB=class r{constructor(e,t){this.unwrapper=e;this.node=t}get element(){return this.node.element===null?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map(e=>new r(this.unwrapper,e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}};function hZ(r,e){return{...e,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(r(t))}},sorter:e.sorter&&{compare(t,n){return e.sorter.compare(t.elements[0],n.elements[0])}},filter:e.filter&&{filter(t,n){return e.filter.filter(r(t),n)}}}}var $D=class{rootRef=null;get onDidSpliceModel(){return z.map(this.model.onDidSpliceModel,({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map(n=>this.nodeMapper.map(n)),deletedNodes:t.map(n=>this.nodeMapper.map(n))}))}get onDidSpliceRenderedNodes(){return z.map(this.model.onDidSpliceRenderedNodes,({start:e,deleteCount:t,elements:n})=>({start:e,deleteCount:t,elements:n.map(i=>this.nodeMapper.map(i))}))}get onDidChangeCollapseState(){return z.map(this.model.onDidChangeCollapseState,({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t}))}get onDidChangeRenderNodeCount(){return z.map(this.model.onDidChangeRenderNodeCount,e=>this.nodeMapper.map(e))}elementMapper;nodeMapper;model;constructor(e,t={}){this.elementMapper=t.elementMapper||pZ;let n=i=>this.elementMapper(i.elements);this.nodeMapper=new mg(i=>new tB(n,i)),this.model=new eB(e,hZ(n,t))}setChildren(e,t=tt.empty(),n={}){this.model.setChildren(e,t,n)}isCompressionEnabled(){return this.model.isCompressionEnabled()}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){let t=this.model.getFirstElementChild(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}getLastElementAncestor(e){let t=this.model.getLastElementAncestor(e);return t===null||typeof t>"u"?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,n){return this.model.setCollapsed(e,t,n)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}resort(e=null,t=!0){return this.model.resort(e,t)}getCompressedTreeNode(e=null){return this.model.getNode(e)}};var Ig=class extends Ib{constructor(t,n,i,o,s={}){super(t,n,i,o,s);this.user=t}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(t,n=tt.empty(),i){this.model.setChildren(t,n,i)}rerender(t){if(t===void 0){this.view.rerender();return}this.model.rerender(t)}updateElementHeight(t,n){let i=this.model.getListIndex(t);if(i===-1)throw new Dn(this.user,"updateElementHeight failed - index not found");this.view.updateElementHeight(i,n)}resort(t,n=!0){this.model.resort(t,n)}hasElement(t){return this.model.has(t)}createModel(t,n){return new Ld(t,n)}},qD=class{constructor(e,t,n){this._compressedTreeNodeProvider=e;this.stickyScrollDelegate=t;this.renderer=n;this.templateId=n.templateId,n.onDidChangeTwistieState&&(this.onDidChangeTwistieState=n.onDidChangeTwistieState)}templateId;onDidChangeTwistieState;get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){let o=this.stickyScrollDelegate.getCompressedNode(e);o||(o=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element)),o.element.elements.length===1?(n.compressedTreeNode=void 0,this.renderer.renderElement(e,t,n.data,i)):(n.compressedTreeNode=o,this.renderer.renderCompressedElements(o,t,n.data,i))}disposeElement(e,t,n,i){n.compressedTreeNode?this.renderer.disposeCompressedElements?.(n.compressedTreeNode,t,n.data,i):this.renderer.disposeElement?.(e,t,n.data,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return this.renderer.renderTwistie?this.renderer.renderTwistie(e,t):!1}};_([be],qD.prototype,"compressedTreeNodeProvider",1);var nB=class{constructor(e){this.modelProvider=e}compressedStickyNodes=new Map;getCompressedNode(e){return this.compressedStickyNodes.get(e)}constrainStickyScrollNodes(e,t,n){if(this.compressedStickyNodes.clear(),e.length===0)return[];for(let i=0;i<e.length;i++){let o=e[i],s=o.position+o.height;if(i+1<e.length&&s+e[i+1].height>n||i>=t-1&&t<e.length){let l=e.slice(0,i),d=e.slice(i),c=this.compressStickyNodes(d);return[...l,c]}}return e}compressStickyNodes(e){if(e.length===0)throw new Error("Can't compress empty sticky nodes");let t=this.modelProvider();if(!t.isCompressionEnabled())return e[0];let n=[];for(let d=0;d<e.length;d++){let c=e[d],p=t.getCompressedTreeNode(c.node.element);if(p.element){if(d!==0&&p.element.incompressible)break;n.push(...p.element.elements)}}if(n.length<2)return e[0];let i=e[e.length-1],o={elements:n,incompressible:!1},s={...i.node,children:[],element:o},a=new Proxy(e[0].node,{}),l={node:a,startIndex:e[0].startIndex,endIndex:i.endIndex,position:e[0].position,height:e[0].height};return this.compressedStickyNodes.set(a,s),l}};function gZ(r,e){return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(t){let n;try{n=r().getCompressedTreeNode(t)}catch{return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t)}return n.element.elements.length===1?e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t):e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}}}var Db=class extends Ig{constructor(e,t,n,i,o={}){let s=()=>this,a=new nB(()=>this.model),l=i.map(d=>new qD(s,a,d));super(e,t,n,l,{...gZ(s,o),stickyScrollDelegate:a})}setChildren(e,t=tt.empty(),n){this.model.setChildren(e,t,n)}createModel(e,t){return new $D(e,t)}updateOptions(e={}){super.updateOptions(e),typeof e.compressionEnabled<"u"&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}};function iB(r){return{...r,children:[],refreshPromise:void 0,stale:!0,slow:!1,forceExpanded:!1}}function rB(r,e){return e.parent?e.parent===r?!0:rB(r,e.parent):!1}function mZ(r,e){return r===e||rB(r,e)||rB(e,r)}var sB=class r{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map(e=>new r(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}},aB=class{constructor(e,t,n){this.renderer=e;this.nodeMapper=t;this.onDidChangeTwistieState=n;this.templateId=e.templateId}templateId;renderedNodes=new Map;renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(...Ae.asClassNameArray(re.treeItemLoading)),!0):(t.classList.remove(...Ae.asClassNameArray(re.treeItemLoading)),!1)}disposeElement(e,t,n,i){this.renderer.disposeElement?.(this.nodeMapper.map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}};function l9(r){return{browserEvent:r.browserEvent,elements:r.elements.map(e=>e.element)}}function YD(r){return{browserEvent:r.browserEvent,element:r.element&&r.element.element,target:r.target}}function fZ(r){return{browserEvent:r.browserEvent,element:r.element&&r.element.element,anchor:r.anchor,isStickyScroll:r.isStickyScroll}}var lB=class extends xc{constructor(t){super(t.elements.map(n=>n.element));this.data=t}set context(t){this.data.context=t}get context(){return this.data.context}};function oB(r){return r instanceof xc?new lB(r):r}var dB=class{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map(n=>n.element),t)}onDragStart(e,t){this.dnd.onDragStart?.(oB(e),t)}onDragOver(e,t,n,i,o,s=!0){return this.dnd.onDragOver(oB(e),t&&t.element,n,i,o)}drop(e,t,n,i,o){this.dnd.drop(oB(e),t&&t.element,n,i,o)}onDragEnd(e){this.dnd.onDragEnd?.(e)}dispose(){this.dnd.dispose()}};function d9(r){return r&&{...r,collapseByDefault:!0,identityProvider:r.identityProvider&&{getId(e){return r.identityProvider.getId(e.element)}},dnd:r.dnd&&new dB(r.dnd),multipleSelectionController:r.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return r.multipleSelectionController.isSelectionSingleChangeEvent({...e,element:e.element})},isSelectionRangeChangeEvent(e){return r.multipleSelectionController.isSelectionRangeChangeEvent({...e,element:e.element})}},accessibilityProvider:r.accessibilityProvider&&{...r.accessibilityProvider,getPosInSet:void 0,getSetSize:void 0,getRole:r.accessibilityProvider.getRole?e=>r.accessibilityProvider.getRole(e.element):()=>"treeitem",isChecked:r.accessibilityProvider.isChecked?e=>!!r.accessibilityProvider?.isChecked(e.element):void 0,getAriaLabel(e){return r.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return r.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:r.accessibilityProvider.getWidgetRole?()=>r.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:r.accessibilityProvider.getAriaLevel&&(e=>r.accessibilityProvider.getAriaLevel(e.element)),getActiveDescendantId:r.accessibilityProvider.getActiveDescendantId&&(e=>r.accessibilityProvider.getActiveDescendantId(e.element))},filter:r.filter&&{filter(e,t){return r.filter.filter(e.element,t)}},keyboardNavigationLabelProvider:r.keyboardNavigationLabelProvider&&{...r.keyboardNavigationLabelProvider,getKeyboardNavigationLabel(e){return r.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}},sorter:void 0,expandOnlyOnTwistieClick:typeof r.expandOnlyOnTwistieClick>"u"?void 0:typeof r.expandOnlyOnTwistieClick!="function"?r.expandOnlyOnTwistieClick:e=>r.expandOnlyOnTwistieClick(e.element),defaultFindVisibility:e=>e.hasChildren&&e.stale?1:typeof r.defaultFindVisibility=="number"?r.defaultFindVisibility:typeof r.defaultFindVisibility>"u"?2:r.defaultFindVisibility(e.element)}}function cB(r,e){e(r),r.children.forEach(t=>cB(t,e))}var VS=class{constructor(e,t,n,i,o,s={}){this.user=e;this.dataSource=o;this.identityProvider=s.identityProvider,this.autoExpandSingleChildren=typeof s.autoExpandSingleChildren>"u"?!1:s.autoExpandSingleChildren,this.sorter=s.sorter,this.getDefaultCollapseState=a=>s.collapseByDefault?s.collapseByDefault(a)?3:2:void 0,this.tree=this.createTree(e,t,n,i,s),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.onDidChangeFindMatchType=this.tree.onDidChangeFindMatchType,this.root=iB({element:void 0,parent:null,hasChildren:!0,defaultCollapseState:void 0}),this.identityProvider&&(this.root={...this.root,id:null}),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}tree;root;nodes=new Map;sorter;getDefaultCollapseState;subTreeRefreshPromises=new Map;refreshPromises=new Map;identityProvider;autoExpandSingleChildren;_onDidRender=new T;_onDidChangeNodeSlowState=new T;nodeMapper=new mg(e=>new sB(e));disposables=new X;get onDidScroll(){return this.tree.onDidScroll}get onDidChangeFocus(){return z.map(this.tree.onDidChangeFocus,l9)}get onDidChangeSelection(){return z.map(this.tree.onDidChangeSelection,l9)}get onKeyDown(){return this.tree.onKeyDown}get onMouseClick(){return z.map(this.tree.onMouseClick,YD)}get onMouseDblClick(){return z.map(this.tree.onMouseDblClick,YD)}get onContextMenu(){return z.map(this.tree.onContextMenu,fZ)}get onTap(){return z.map(this.tree.onTap,YD)}get onPointer(){return z.map(this.tree.onPointer,YD)}get onDidFocus(){return this.tree.onDidFocus}get onDidBlur(){return this.tree.onDidBlur}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidUpdateOptions(){return this.tree.onDidUpdateOptions}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidChangeStickyScrollFocused(){return this.tree.onDidChangeStickyScrollFocused}get findMode(){return this.tree.findMode}set findMode(e){this.tree.findMode=e}onDidChangeFindMode;get findMatchType(){return this.tree.findMatchType}set findMatchType(e){this.tree.findMatchType=e}onDidChangeFindMatchType;get expandOnlyOnTwistieClick(){if(typeof this.tree.expandOnlyOnTwistieClick=="boolean")return this.tree.expandOnlyOnTwistieClick;let e=this.tree.expandOnlyOnTwistieClick;return t=>e(this.nodes.get(t===this.root.element?null:t)||null)}get onDidDispose(){return this.tree.onDidDispose}createTree(e,t,n,i,o){let s=new yb(n),a=i.map(d=>new aB(d,this.nodeMapper,this._onDidChangeNodeSlowState.event)),l=d9(o)||{};return new Ig(e,t,s,a,l)}updateOptions(e={}){this.tree.updateOptions(e)}get options(){return this.tree.options}getHTMLElement(){return this.tree.getHTMLElement()}get contentHeight(){return this.tree.contentHeight}get contentWidth(){return this.tree.contentWidth}get onDidChangeContentHeight(){return this.tree.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.tree.onDidChangeContentWidth}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}get scrollLeft(){return this.tree.scrollLeft}set scrollLeft(e){this.tree.scrollLeft=e}get scrollHeight(){return this.tree.scrollHeight}get renderHeight(){return this.tree.renderHeight}get lastVisibleElement(){return this.tree.lastVisibleElement.element}get ariaLabel(){return this.tree.ariaLabel}set ariaLabel(e){this.tree.ariaLabel=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}async setInput(e,t){this.refreshPromises.forEach(i=>i.cancel()),this.refreshPromises.clear(),this.root.element=e;let n=t&&{viewState:t,focus:[],selection:[]};await this._updateChildren(e,!0,!1,n),n&&(this.tree.setFocus(n.focus),this.tree.setSelection(n.selection)),t&&typeof t.scrollTop=="number"&&(this.scrollTop=t.scrollTop)}async updateChildren(e=this.root.element,t=!0,n=!1,i){await this._updateChildren(e,t,n,void 0,i)}async _updateChildren(e=this.root.element,t=!0,n=!1,i,o){if(typeof this.root.element>"u")throw new Dn(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await z.toPromise(this._onDidRender.event));let s=this.getDataNode(e);if(await this.refreshAndRenderNode(s,t,i,o),n)try{this.tree.rerender(s)}catch{}}resort(e=this.root.element,t=!0){this.tree.resort(this.getDataNode(e),t)}hasNode(e){return e===this.root.element||this.nodes.has(e)}rerender(e){if(e===void 0||e===this.root.element){this.tree.rerender();return}let t=this.getDataNode(e);this.tree.rerender(t)}updateElementHeight(e,t){let n=this.getDataNode(e);this.tree.updateElementHeight(n,t)}updateWidth(e){let t=this.getDataNode(e);this.tree.updateWidth(t)}getNode(e=this.root.element){let t=this.getDataNode(e),n=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(n)}collapse(e,t=!1){let n=this.getDataNode(e);return this.tree.collapse(n===this.root?null:n,t)}async expand(e,t=!1){if(typeof this.root.element>"u")throw new Dn(this.user,"Tree input not set");this.root.refreshPromise&&(await this.root.refreshPromise,await z.toPromise(this._onDidRender.event));let n=this.getDataNode(e);if(this.tree.hasElement(n)&&!this.tree.isCollapsible(n)||(n.refreshPromise&&(await this.root.refreshPromise,await z.toPromise(this._onDidRender.event)),n!==this.root&&!n.refreshPromise&&!this.tree.isCollapsed(n)))return!1;let i=this.tree.expand(n===this.root?null:n,t);return n.refreshPromise&&(await this.root.refreshPromise,await z.toPromise(this._onDidRender.event)),i}toggleCollapsed(e,t=!1){return this.tree.toggleCollapsed(this.getDataNode(e),t)}expandAll(){this.tree.expandAll()}async expandTo(e){if(!this.dataSource.getParent)throw new Error("Can't expand to element without getParent method");let t=[];for(;!this.hasNode(e);)e=this.dataSource.getParent(e),e!==this.root.element&&t.push(e);for(let n of tt.reverse(t))await this.expand(n);this.tree.expandTo(this.getDataNode(e))}collapseAll(){this.tree.collapseAll()}isCollapsible(e){return this.tree.isCollapsible(this.getDataNode(e))}isCollapsed(e){return this.tree.isCollapsed(this.getDataNode(e))}triggerTypeNavigation(){this.tree.triggerTypeNavigation()}openFind(){this.tree.openFind()}closeFind(){this.tree.closeFind()}refilter(){this.tree.refilter()}setAnchor(e){this.tree.setAnchor(typeof e>"u"?void 0:this.getDataNode(e))}getAnchor(){return this.tree.getAnchor()?.element}setSelection(e,t){let n=e.map(i=>this.getDataNode(i));this.tree.setSelection(n,t)}getSelection(){return this.tree.getSelection().map(t=>t.element)}setFocus(e,t){let n=e.map(i=>this.getDataNode(i));this.tree.setFocus(n,t)}focusNext(e=1,t=!1,n){this.tree.focusNext(e,t,n)}focusPrevious(e=1,t=!1,n){this.tree.focusPrevious(e,t,n)}focusNextPage(e){return this.tree.focusNextPage(e)}focusPreviousPage(e){return this.tree.focusPreviousPage(e)}focusLast(e){this.tree.focusLast(e)}focusFirst(e){this.tree.focusFirst(e)}getFocus(){return this.tree.getFocus().map(t=>t.element)}getStickyScrollFocus(){return this.tree.getStickyScrollFocus().map(t=>t.element)}getFocusedPart(){return this.tree.getFocusedPart()}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getRelativeTop(e){return this.tree.getRelativeTop(this.getDataNode(e))}getParentElement(e){let t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){let t=this.getDataNode(e),n=this.tree.getFirstElementChild(t===this.root?null:t);return n&&n.element}getDataNode(e){let t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new Dn(this.user,`Data tree node not found: ${e}`);return t}async refreshAndRenderNode(e,t,n,i){await this.refreshNode(e,t,n),!this.disposables.isDisposed&&this.render(e,n,i)}async refreshNode(e,t,n){let i;if(this.subTreeRefreshPromises.forEach((o,s)=>{!i&&mZ(s,e)&&(i=o.then(()=>this.refreshNode(e,t,n)))}),i)return i;if(e!==this.root&&this.tree.getNode(e).collapsed){e.hasChildren=!!this.dataSource.hasChildren(e.element),e.stale=!0,this.setChildren(e,[],t,n);return}return this.doRefreshSubTree(e,t,n)}async doRefreshSubTree(e,t,n){let i;e.refreshPromise=new Promise(o=>i=o),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally(()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)});try{let o=await this.doRefreshNode(e,t,n);e.stale=!1,await Ko.settled(o.map(s=>this.doRefreshSubTree(s,t,n)))}finally{i()}}async doRefreshNode(e,t,n){e.hasChildren=!!this.dataSource.hasChildren(e.element);let i;if(!e.hasChildren)i=Promise.resolve(tt.empty());else{let o=this.doGetChildren(e);if(S1(o))i=Promise.resolve(o);else{let s=po(800);s.then(()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)},a=>null),i=o.finally(()=>s.cancel())}}try{let o=await i;return this.setChildren(e,o,t,n)}catch(o){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),qd(o))return[];throw o}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;let n=this.dataSource.getChildren(e.element);return S1(n)?this.processChildren(n):(t=lc(async()=>this.processChildren(await n)),this.refreshPromises.set(e,t),t.finally(()=>{this.refreshPromises.delete(e)}))}_onDidChangeCollapseState({node:e,deep:t}){e.element!==null&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(Be))}setChildren(e,t,n,i){let o=[...t];if(e.children.length===0&&o.length===0)return[];let s=new Map,a=new Map;for(let c of e.children)s.set(c.element,c),this.identityProvider&&a.set(c.id,{node:c,collapsed:this.tree.hasElement(c)&&this.tree.isCollapsed(c)});let l=[],d=o.map(c=>{let p=!!this.dataSource.hasChildren(c);if(!this.identityProvider){let m=iB({element:c,parent:e,hasChildren:p,defaultCollapseState:this.getDefaultCollapseState(c)});return p&&m.defaultCollapseState===2&&l.push(m),m}let h=this.identityProvider.getId(c).toString(),g=a.get(h);if(g){let m=g.node;return s.delete(m.element),this.nodes.delete(m.element),this.nodes.set(c,m),m.element=c,m.hasChildren=p,n?g.collapsed?(m.children.forEach(b=>cB(b,v=>this.nodes.delete(v.element))),m.children.splice(0,m.children.length),m.stale=!0):l.push(m):p&&!g.collapsed&&l.push(m),m}let f=iB({element:c,parent:e,id:h,hasChildren:p,defaultCollapseState:this.getDefaultCollapseState(c)});return i&&i.viewState.focus&&i.viewState.focus.indexOf(h)>-1&&i.focus.push(f),i&&i.viewState.selection&&i.viewState.selection.indexOf(h)>-1&&i.selection.push(f),(i&&i.viewState.expanded&&i.viewState.expanded.indexOf(h)>-1||p&&f.defaultCollapseState===2)&&l.push(f),f});for(let c of s.values())cB(c,p=>this.nodes.delete(p.element));for(let c of d)this.nodes.set(c.element,c);return e.children.splice(0,e.children.length,...d),e!==this.root&&this.autoExpandSingleChildren&&d.length===1&&l.length===0&&(d[0].forceExpanded=!0,l.push(d[0])),l}render(e,t,n){let i=e.children.map(s=>this.asTreeElement(s,t)),o=n&&{...n,diffIdentityProvider:n.diffIdentityProvider&&{getId(s){return n.diffIdentityProvider.getId(s.element)}}};this.tree.setChildren(e===this.root?null:e,i,o),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let n;return t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1?n=!1:e.forceExpanded?(n=!1,e.forceExpanded=!1):n=e.defaultCollapseState,{element:e,children:e.hasChildren?tt.map(e.children,i=>this.asTreeElement(i,t)):[],collapsible:e.hasChildren,collapsed:n}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}getViewState(){if(!this.identityProvider)throw new Dn(this.user,"Can't get tree view state without an identity provider");let e=a=>this.identityProvider.getId(a).toString(),t=this.getFocus().map(e),n=this.getSelection().map(e),i=[],o=this.tree.getNode(),s=[o];for(;s.length>0;){let a=s.pop();a!==o&&a.collapsible&&!a.collapsed&&i.push(e(a.element.element)),s.push(...a.children)}return{focus:t,selection:n,expanded:i,scrollTop:this.scrollTop}}dispose(){this.disposables.dispose(),this.tree.dispose()}},uB=class r{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map(e=>e.element),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map(e=>new r(e))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}},pB=class{constructor(e,t,n,i){this.renderer=e;this.nodeMapper=t;this.compressibleNodeMapperProvider=n;this.onDidChangeTwistieState=i;this.templateId=e.templateId}templateId;renderedNodes=new Map;disposables=[];renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,n,i){this.renderer.renderElement(this.nodeMapper.map(e),t,n.templateData,i)}renderCompressedElements(e,t,n,i){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}renderTwistie(e,t){return e.slow?(t.classList.add(...Ae.asClassNameArray(re.treeItemLoading)),!0):(t.classList.remove(...Ae.asClassNameArray(re.treeItemLoading)),!1)}disposeElement(e,t,n,i){this.renderer.disposeElement?.(this.nodeMapper.map(e),t,n.templateData,i)}disposeCompressedElements(e,t,n,i){this.renderer.disposeCompressedElements?.(this.compressibleNodeMapperProvider().map(e),t,n.templateData,i)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=rt(this.disposables)}};function bZ(r){let e=r&&d9(r);return e&&{...e,keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&{...e.keyboardNavigationLabelProvider,getCompressedNodeKeyboardNavigationLabel(t){return r.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map(n=>n.element))}}}}var XD=class extends VS{constructor(t,n,i,o,s,a,l={}){super(t,n,i,s,a,l);this.compressionDelegate=o;this.filter=l.filter}compressibleNodeMapper=new mg(t=>new uB(t));filter;createTree(t,n,i,o,s){let a=new yb(i),l=o.map(c=>new pB(c,this.nodeMapper,()=>this.compressibleNodeMapper,this._onDidChangeNodeSlowState.event)),d=bZ(s)||{};return new Db(t,n,a,l,d)}asTreeElement(t,n){return{incompressible:this.compressionDelegate.isIncompressible(t.element),...super.asTreeElement(t,n)}}updateOptions(t={}){this.tree.updateOptions(t)}getViewState(){if(!this.identityProvider)throw new Dn(this.user,"Can't get tree view state without an identity provider");let t=l=>this.identityProvider.getId(l).toString(),n=this.getFocus().map(t),i=this.getSelection().map(t),o=[],s=this.tree.getCompressedTreeNode(),a=[s];for(;a.length>0;){let l=a.pop();if(l!==s&&l.collapsible&&!l.collapsed)for(let d of l.element.elements)o.push(t(d.element));a.push(...l.children)}return{focus:n,selection:i,expanded:o,scrollTop:this.scrollTop}}render(t,n,i){if(!this.identityProvider)return super.render(t,n);let o=f=>this.identityProvider.getId(f).toString(),s=f=>{let m=new Set;for(let b of f){let v=this.tree.getCompressedTreeNode(b===this.root?null:b);if(v.element)for(let S of v.element.elements)m.add(o(S.element))}return m},a=s(this.tree.getSelection()),l=s(this.tree.getFocus());super.render(t,n,i);let d=this.getSelection(),c=!1,p=this.getFocus(),h=!1,g=f=>{let m=f.element;if(m)for(let b=0;b<m.elements.length;b++){let v=o(m.elements[b].element),S=m.elements[m.elements.length-1].element;a.has(v)&&d.indexOf(S)===-1&&(d.push(S),c=!0),l.has(v)&&p.indexOf(S)===-1&&(p.push(S),h=!0)}f.children.forEach(g)};g(this.tree.getCompressedTreeNode(t===this.root?null:t)),c&&this.setSelection(d),h&&this.setFocus(p)}processChildren(t){return this.filter&&(t=tt.filter(t,n=>{let i=this.filter.filter(n,1),o=vZ(i);if(o===2)throw new Error("Recursive tree visibility not supported in async data compressed trees");return o===1})),super.processChildren(t)}};function vZ(r){return typeof r=="boolean"?r?1:0:AS(r)?fg(r.visibility):fg(r)}var QD=class extends Ib{constructor(t,n,i,o,s,a={}){super(t,n,i,o,a);this.user=t;this.dataSource=s;this.identityProvider=a.identityProvider}input;identityProvider;nodesByIdentity=new Map;getInput(){return this.input}setInput(t,n){if(n&&!this.identityProvider)throw new Dn(this.user,"Can't restore tree view state without an identity provider");if(this.input=t,!t){this.nodesByIdentity.clear(),this.model.setChildren(null,tt.empty());return}if(!n){this._refresh(t);return}let i=[],o=[],s=l=>{let d=this.identityProvider.getId(l).toString();return!n.expanded[d]},a=l=>{let d=this.identityProvider.getId(l.element).toString();n.focus.has(d)&&i.push(l.element),n.selection.has(d)&&o.push(l.element)};this._refresh(t,s,a),this.setFocus(i),this.setSelection(o),n&&typeof n.scrollTop=="number"&&(this.scrollTop=n.scrollTop)}updateChildren(t=this.input){if(typeof this.input>"u")throw new Dn(this.user,"Tree input not set");let n;this.identityProvider&&(n=i=>{let o=this.identityProvider.getId(i).toString(),s=this.nodesByIdentity.get(o);if(s)return s.collapsed}),this._refresh(t,n)}resort(t=this.input,n=!0){this.model.resort(t===this.input?null:t,n)}refresh(t){if(t===void 0){this.view.rerender();return}this.model.rerender(t)}_refresh(t,n,i){let o;if(this.identityProvider){let s=new Set,a=i;i=l=>{let d=this.identityProvider.getId(l.element).toString();s.add(d),this.nodesByIdentity.set(d,l),a?.(l)},o=l=>{let d=this.identityProvider.getId(l.element).toString();s.has(d)||this.nodesByIdentity.delete(d)}}this.model.setChildren(t===this.input?null:t,this.iterate(t,n).elements,{onDidCreateNode:i,onDidDeleteNode:o})}iterate(t,n){let i=[...this.dataSource.getChildren(t)];return{elements:tt.map(i,s=>{let{elements:a,size:l}=this.iterate(s,n),d=this.dataSource.hasChildren?this.dataSource.hasChildren(s):void 0,c=l===0?void 0:n&&n(s);return{element:s,children:a,collapsible:d,collapsed:c}}),size:i.length}}createModel(t,n){return new Ld(t,n)}};var Gs=j("listService");var HS=new B("listScrollAtBoundary","none"),c9=oe.or(HS.isEqualTo("top"),HS.isEqualTo("both")),u9=oe.or(HS.isEqualTo("bottom"),HS.isEqualTo("both")),p9=new B("listFocus",!0),h9=new B("treestickyScrollFocused",!1),uL=new B("listSupportsMultiselect",!0),fB=oe.and(p9,oe.not(Wf),h9.negate()),bB=new B("listHasSelectionOrFocus",!1),vB=new B("listDoubleSelection",!1),yB=new B("listMultiSelection",!1),pL=new B("listSelectionNavigation",!1),yZ=new B("listSupportsFind",!0),IZ=new B("treeElementCanCollapse",!1),SZ=new B("treeElementHasParent",!1),CZ=new B("treeElementCanExpand",!1),xZ=new B("treeElementHasChild",!1),EZ=new B("treeFindOpen",!1),g9="listTypeNavigationMode",m9="listAutomaticKeyboardNavigation";function hL(r,e){let t=r.createScoped(e.getHTMLElement());return p9.bindTo(t),t}function gL(r,e){let t=HS.bindTo(r),n=()=>{let i=e.scrollTop===0,o=e.scrollHeight-e.renderHeight-e.scrollTop<1;i&&o?t.set("both"):i?t.set("top"):o?t.set("bottom"):t.set("none")};return n(),e.onDidScroll(n)}var Sg="workbench.list.multiSelectModifier",oL="workbench.list.openMode",Ks="workbench.list.horizontalScrolling",IB="workbench.list.defaultFindMode",SB="workbench.list.typeNavigationMode",rL="workbench.list.keyboardNavigation",ul="workbench.list.scrollByPage",CB="workbench.list.defaultFindMatchType",US="workbench.tree.indent",sL="workbench.tree.renderIndentGuides",pl="workbench.list.smoothScrolling",kd="workbench.list.mouseWheelScrollSensitivity",Rd="workbench.list.fastScrollSensitivity",aL="workbench.tree.expandMode",lL="workbench.tree.enableStickyScroll",dL="workbench.tree.stickyScrollMaxItemCount";function Md(r){return r.getValue(Sg)==="alt"}var hB=class extends N{constructor(t){super();this.configurationService=t;this.useAltAsMultipleSelectionModifier=Md(t),this.registerListeners()}useAltAsMultipleSelectionModifier;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>{t.affectsConfiguration(Sg)&&(this.useAltAsMultipleSelectionModifier=Md(this.configurationService))}))}isSelectionSingleChangeEvent(t){return this.useAltAsMultipleSelectionModifier?t.browserEvent.altKey:eA(t)}isSelectionRangeChangeEvent(t){return tA(t)}};function mL(r,e){let t=r.get(Ge),n=r.get(_n),i=new X;return[{...e,keyboardNavigationDelegate:{mightProducePrintableCharacter(s){return n.mightProducePrintableCharacter(s)}},smoothScrolling:!!t.getValue(pl),mouseWheelScrollSensitivity:t.getValue(kd),fastScrollSensitivity:t.getValue(Rd),multipleSelectionController:e.multipleSelectionController??i.add(new hB(t)),keyboardNavigationEventFilter:TZ(n),scrollByPage:!!t.getValue(ul)},i]}var ZD=class extends Ei{contextKeyService;listSupportsMultiSelect;listHasSelectionOrFocus;listDoubleSelection;listMultiSelection;horizontalScrolling;_useAltAsMultipleSelectionModifier;navigator;get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,n,i,o,s,a,l,d){let c=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!l.getValue(Ks),[p,h]=d.invokeFunction(mL,o);super(e,t,n,i,{keyboardSupport:!1,...p,horizontalScrolling:c}),this.disposables.add(h),this.contextKeyService=hL(s,this),this.disposables.add(gL(this.contextKeyService,this)),this.listSupportsMultiSelect=uL.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),pL.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this.listHasSelectionOrFocus=bB.bindTo(this.contextKeyService),this.listDoubleSelection=vB.bindTo(this.contextKeyService),this.listMultiSelection=yB.bindTo(this.contextKeyService),this.horizontalScrolling=o.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Md(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{let f=this.getSelection(),m=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(f.length>0||m.length>0),this.listMultiSelection.set(f.length>1),this.listDoubleSelection.set(f.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{let f=this.getSelection(),m=this.getFocus();this.listHasSelectionOrFocus.set(f.length>0||m.length>0)})),this.disposables.add(l.onDidChangeConfiguration(f=>{f.affectsConfiguration(Sg)&&(this._useAltAsMultipleSelectionModifier=Md(l));let m={};if(f.affectsConfiguration(Ks)&&this.horizontalScrolling===void 0){let b=!!l.getValue(Ks);m={...m,horizontalScrolling:b}}if(f.affectsConfiguration(ul)){let b=!!l.getValue(ul);m={...m,scrollByPage:b}}if(f.affectsConfiguration(pl)){let b=!!l.getValue(pl);m={...m,smoothScrolling:b}}if(f.affectsConfiguration(kd)){let b=l.getValue(kd);m={...m,mouseWheelScrollSensitivity:b}}if(f.affectsConfiguration(Rd)){let b=l.getValue(Rd);m={...m,fastScrollSensitivity:b}}Object.keys(m).length>0&&this.updateOptions(m)})),this.navigator=new cL(this,{configurationService:l,...o}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?dl(e):Sb)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}};ZD=_([y(5,Ne),y(6,Gs),y(7,Ge),y(8,we)],ZD);var JD=class extends UD{contextKeyService;disposables;listSupportsMultiSelect;_useAltAsMultipleSelectionModifier;horizontalScrolling;navigator;get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,n,i,o,s,a,l,d){let c=typeof o.horizontalScrolling<"u"?o.horizontalScrolling:!!l.getValue(Ks),[p,h]=d.invokeFunction(mL,o);super(e,t,n,i,{keyboardSupport:!1,...p,horizontalScrolling:c}),this.disposables=new X,this.disposables.add(h),this.contextKeyService=hL(s,this),this.disposables.add(gL(this.contextKeyService,this.widget)),this.horizontalScrolling=o.horizontalScrolling,this.listSupportsMultiSelect=uL.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(o.multipleSelectionSupport!==!1),pL.bindTo(this.contextKeyService).set(!!o.selectionNavigation),this._useAltAsMultipleSelectionModifier=Md(l),this.disposables.add(this.contextKeyService),this.disposables.add(a.register(this)),this.updateStyles(o.overrideStyles),this.disposables.add(l.onDidChangeConfiguration(f=>{f.affectsConfiguration(Sg)&&(this._useAltAsMultipleSelectionModifier=Md(l));let m={};if(f.affectsConfiguration(Ks)&&this.horizontalScrolling===void 0){let b=!!l.getValue(Ks);m={...m,horizontalScrolling:b}}if(f.affectsConfiguration(ul)){let b=!!l.getValue(ul);m={...m,scrollByPage:b}}if(f.affectsConfiguration(pl)){let b=!!l.getValue(pl);m={...m,smoothScrolling:b}}if(f.affectsConfiguration(kd)){let b=l.getValue(kd);m={...m,mouseWheelScrollSensitivity:b}}if(f.affectsConfiguration(Rd)){let b=l.getValue(Rd);m={...m,fastScrollSensitivity:b}}Object.keys(m).length>0&&this.updateOptions(m)})),this.navigator=new cL(this,{configurationService:l,...o}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?dl(e):Sb)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}dispose(){this.disposables.dispose(),super.dispose()}};JD=_([y(5,Ne),y(6,Gs),y(7,Ge),y(8,we)],JD);var Lb=class extends KD{contextKeyService;listSupportsMultiSelect;listHasSelectionOrFocus;listDoubleSelection;listMultiSelection;horizontalScrolling;_useAltAsMultipleSelectionModifier;navigator;get onDidOpen(){return this.navigator.onDidOpen}constructor(e,t,n,i,o,s,a,l,d,c){let p=typeof s.horizontalScrolling<"u"?s.horizontalScrolling:!!d.getValue(Ks),[h,g]=c.invokeFunction(mL,s);super(e,t,n,i,o,{keyboardSupport:!1,...h,horizontalScrolling:p}),this.disposables.add(g),this.contextKeyService=hL(a,this),this.disposables.add(gL(this.contextKeyService,this)),this.listSupportsMultiSelect=uL.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(s.multipleSelectionSupport!==!1),pL.bindTo(this.contextKeyService).set(!!s.selectionNavigation),this.listHasSelectionOrFocus=bB.bindTo(this.contextKeyService),this.listDoubleSelection=vB.bindTo(this.contextKeyService),this.listMultiSelection=yB.bindTo(this.contextKeyService),this.horizontalScrolling=s.horizontalScrolling,this._useAltAsMultipleSelectionModifier=Md(d),this.disposables.add(this.contextKeyService),this.disposables.add(l.register(this)),this.updateStyles(s.overrideStyles),this.disposables.add(this.onDidChangeSelection(()=>{let m=this.getSelection(),b=this.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.listHasSelectionOrFocus.set(m.length>0||b.length>0),this.listMultiSelection.set(m.length>1),this.listDoubleSelection.set(m.length===2)})})),this.disposables.add(this.onDidChangeFocus(()=>{let m=this.getSelection(),b=this.getFocus();this.listHasSelectionOrFocus.set(m.length>0||b.length>0)})),this.disposables.add(d.onDidChangeConfiguration(m=>{m.affectsConfiguration(Sg)&&(this._useAltAsMultipleSelectionModifier=Md(d));let b={};if(m.affectsConfiguration(Ks)&&this.horizontalScrolling===void 0){let v=!!d.getValue(Ks);b={...b,horizontalScrolling:v}}if(m.affectsConfiguration(ul)){let v=!!d.getValue(ul);b={...b,scrollByPage:v}}if(m.affectsConfiguration(pl)){let v=!!d.getValue(pl);b={...b,smoothScrolling:v}}if(m.affectsConfiguration(kd)){let v=d.getValue(kd);b={...b,mouseWheelScrollSensitivity:v}}if(m.affectsConfiguration(Rd)){let v=d.getValue(Rd);b={...b,fastScrollSensitivity:v}}Object.keys(b).length>0&&this.updateOptions(b)})),this.navigator=new gB(this,{configurationService:d,...s}),this.disposables.add(this.navigator)}updateOptions(e){super.updateOptions(e),e.overrideStyles!==void 0&&this.updateStyles(e.overrideStyles),e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyles(e){this.style(e?dl(e):Sb)}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}dispose(){this.disposables.dispose(),super.dispose()}};Lb=_([y(6,Ne),y(7,Gs),y(8,Ge),y(9,we)],Lb);var zS=class extends N{constructor(t,n){super();this.widget=t;this._register(z.filter(this.widget.onDidChangeSelection,i=>Qs(i.browserEvent))(i=>this.onSelectionFromKeyboard(i))),this._register(this.widget.onPointer(i=>this.onPointer(i.element,i.browserEvent))),this._register(this.widget.onMouseDblClick(i=>this.onMouseDblClick(i.element,i.browserEvent))),typeof n?.openOnSingleClick!="boolean"&&n?.configurationService?(this.openOnSingleClick=n?.configurationService.getValue(oL)!=="doubleClick",this._register(n?.configurationService.onDidChangeConfiguration(i=>{i.affectsConfiguration(oL)&&(this.openOnSingleClick=n?.configurationService.getValue(oL)!=="doubleClick")}))):this.openOnSingleClick=n?.openOnSingleClick??!0}openOnSingleClick;_onDidOpen=this._register(new T);onDidOpen=this._onDidOpen.event;onSelectionFromKeyboard(t){if(t.elements.length!==1)return;let n=t.browserEvent,i=typeof n.preserveFocus=="boolean"?n.preserveFocus:!0,o=typeof n.pinned=="boolean"?n.pinned:!i;this._open(this.getSelectedElement(),i,o,!1,t.browserEvent)}onPointer(t,n){if(!this.openOnSingleClick||n.detail===2)return;let o=n.button===1,s=!0,a=o,l=n.ctrlKey||n.metaKey||n.altKey;this._open(t,s,a,l,n)}onMouseDblClick(t,n){if(!n)return;let i=n.target;if(i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&n.offsetX<16)return;let s=!1,a=!0,l=n.ctrlKey||n.metaKey||n.altKey;this._open(t,s,a,l,n)}_open(t,n,i,o,s){t&&this._onDidOpen.fire({editorOptions:{preserveFocus:n,pinned:i,revealIfVisible:!0},sideBySide:o,element:t,browserEvent:s})}},cL=class extends zS{widget;constructor(e,t){super(e,t),this.widget=e}getSelectedElement(){return this.widget.getSelectedElements()[0]}},gB=class extends zS{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelectedElements()[0]}},mB=class extends zS{constructor(e,t){super(e,t)}getSelectedElement(){return this.widget.getSelection()[0]??void 0}};function TZ(r){let e=!1;return t=>{if(t.toKeyCodeChord().isModifierKey())return!1;if(e)return e=!1,!1;let n=r.softDispatch(t,t.target);return n.kind===1?(e=!0,!1):(e=!1,n.kind===0)}}var mp=class extends Ig{internals;get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,i,o,s,a,l,d){let{options:c,getTypeNavigationMode:p,disposable:h}=s.invokeFunction(KS,o);super(e,t,n,i,c),this.disposables.add(h),this.internals=new Wc(this,o,p,o.overrideStyles,a,l,d),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};mp=_([y(5,we),y(6,Ne),y(7,Gs),y(8,Ge)],mp);var eL=class extends Db{internals;get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,i,o,s,a,l,d){let{options:c,getTypeNavigationMode:p,disposable:h}=s.invokeFunction(KS,o);super(e,t,n,i,c),this.disposables.add(h),this.internals=new Wc(this,o,p,o.overrideStyles,a,l,d),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};eL=_([y(5,we),y(6,Ne),y(7,Gs),y(8,Ge)],eL);var tL=class extends QD{internals;get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,i,o,s,a,l,d,c){let{options:p,getTypeNavigationMode:h,disposable:g}=a.invokeFunction(KS,s);super(e,t,n,i,o,p),this.disposables.add(g),this.internals=new Wc(this,s,h,s.overrideStyles,l,d,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles!==void 0&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};tL=_([y(6,we),y(7,Ne),y(8,Gs),y(9,Ge)],tL);var nL=class extends VS{internals;get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,i,o,s,a,l,d,c){let{options:p,getTypeNavigationMode:h,disposable:g}=a.invokeFunction(KS,s);super(e,t,n,i,o,p),this.disposables.add(g),this.internals=new Wc(this,s,h,s.overrideStyles,l,d,c),this.disposables.add(this.internals)}updateOptions(e={}){super.updateOptions(e),e.overrideStyles&&this.internals.updateStyleOverrides(e.overrideStyles),this.internals.updateOptions(e)}};nL=_([y(6,we),y(7,Ne),y(8,Gs),y(9,Ge)],nL);var iL=class extends XD{internals;get contextKeyService(){return this.internals.contextKeyService}get useAltAsMultipleSelectionModifier(){return this.internals.useAltAsMultipleSelectionModifier}get onDidOpen(){return this.internals.onDidOpen}constructor(e,t,n,i,o,s,a,l,d,c,p){let{options:h,getTypeNavigationMode:g,disposable:f}=l.invokeFunction(KS,a);super(e,t,n,i,o,s,h),this.disposables.add(f),this.internals=new Wc(this,a,g,a.overrideStyles,d,c,p),this.disposables.add(this.internals)}updateOptions(e){super.updateOptions(e),this.internals.updateOptions(e)}};iL=_([y(7,we),y(8,Ne),y(9,Gs),y(10,Ge)],iL);function f9(r){let e=r.getValue(IB);if(e==="highlight")return 0;if(e==="filter")return 1;let t=r.getValue(rL);if(t==="simple"||t==="highlight")return 0;if(t==="filter")return 1}function b9(r){let e=r.getValue(CB);if(e==="fuzzy")return 0;if(e==="contiguous")return 1}function KS(r,e){let t=r.get(Ge),n=r.get(Wo),i=r.get(Ne),o=r.get(we),s=()=>{let h=i.getContextKeyValue(g9);if(h==="automatic")return 0;if(h==="trigger")return 1;if(i.getContextKeyValue(m9)===!1)return 1;let f=t.getValue(SB);if(f==="automatic")return 0;if(f==="trigger")return 1},a=e.horizontalScrolling!==void 0?e.horizontalScrolling:!!t.getValue(Ks),[l,d]=o.invokeFunction(mL,e),c=e.paddingBottom,p=e.renderIndentGuides!==void 0?e.renderIndentGuides:t.getValue(sL);return{getTypeNavigationMode:s,disposable:d,options:{keyboardSupport:!1,...l,indent:typeof t.getValue(US)=="number"?t.getValue(US):void 0,renderIndentGuides:p,smoothScrolling:!!t.getValue(pl),defaultFindMode:f9(t),defaultFindMatchType:b9(t),horizontalScrolling:a,scrollByPage:!!t.getValue(ul),paddingBottom:c,hideTwistiesOfChildlessElements:e.hideTwistiesOfChildlessElements,expandOnlyOnTwistieClick:e.expandOnlyOnTwistieClick??t.getValue(aL)==="doubleClick",contextViewProvider:n,findWidgetStyles:G8,enableStickyScroll:!!t.getValue(lL),stickyScrollMaxItemCount:Number(t.getValue(dL))}}}var Wc=class{constructor(e,t,n,i,o,s,a){this.tree=e;this.contextKeyService=hL(o,e),this.disposables.push(gL(this.contextKeyService,e)),this.listSupportsMultiSelect=uL.bindTo(this.contextKeyService),this.listSupportsMultiSelect.set(t.multipleSelectionSupport!==!1),pL.bindTo(this.contextKeyService).set(!!t.selectionNavigation),this.listSupportFindWidget=yZ.bindTo(this.contextKeyService),this.listSupportFindWidget.set(t.findWidgetEnabled??!0),this.hasSelectionOrFocus=bB.bindTo(this.contextKeyService),this.hasDoubleSelection=vB.bindTo(this.contextKeyService),this.hasMultiSelection=yB.bindTo(this.contextKeyService),this.treeElementCanCollapse=IZ.bindTo(this.contextKeyService),this.treeElementHasParent=SZ.bindTo(this.contextKeyService),this.treeElementCanExpand=CZ.bindTo(this.contextKeyService),this.treeElementHasChild=xZ.bindTo(this.contextKeyService),this.treeFindOpen=EZ.bindTo(this.contextKeyService),this.treeStickyScrollFocused=h9.bindTo(this.contextKeyService),this._useAltAsMultipleSelectionModifier=Md(a),this.updateStyleOverrides(i);let d=()=>{let p=e.getFocus()[0];if(!p)return;let h=e.getNode(p);this.treeElementCanCollapse.set(h.collapsible&&!h.collapsed),this.treeElementHasParent.set(!!e.getParentElement(p)),this.treeElementCanExpand.set(h.collapsible&&h.collapsed),this.treeElementHasChild.set(!!e.getFirstElementChild(p))},c=new Set;c.add(g9),c.add(m9),this.disposables.push(this.contextKeyService,s.register(e),e.onDidChangeSelection(()=>{let p=e.getSelection(),h=e.getFocus();this.contextKeyService.bufferChangeEvents(()=>{this.hasSelectionOrFocus.set(p.length>0||h.length>0),this.hasMultiSelection.set(p.length>1),this.hasDoubleSelection.set(p.length===2)})}),e.onDidChangeFocus(()=>{let p=e.getSelection(),h=e.getFocus();this.hasSelectionOrFocus.set(p.length>0||h.length>0),d()}),e.onDidChangeCollapseState(d),e.onDidChangeModel(d),e.onDidChangeFindOpenState(p=>this.treeFindOpen.set(p)),e.onDidChangeStickyScrollFocused(p=>this.treeStickyScrollFocused.set(p)),a.onDidChangeConfiguration(p=>{let h={};if(p.affectsConfiguration(Sg)&&(this._useAltAsMultipleSelectionModifier=Md(a)),p.affectsConfiguration(US)){let g=a.getValue(US);h={...h,indent:g}}if(p.affectsConfiguration(sL)&&t.renderIndentGuides===void 0){let g=a.getValue(sL);h={...h,renderIndentGuides:g}}if(p.affectsConfiguration(pl)){let g=!!a.getValue(pl);h={...h,smoothScrolling:g}}if(p.affectsConfiguration(IB)||p.affectsConfiguration(rL)){let g=f9(a);h={...h,defaultFindMode:g}}if(p.affectsConfiguration(SB)||p.affectsConfiguration(rL)){let g=n();h={...h,typeNavigationMode:g}}if(p.affectsConfiguration(CB)){let g=b9(a);h={...h,defaultFindMatchType:g}}if(p.affectsConfiguration(Ks)&&t.horizontalScrolling===void 0){let g=!!a.getValue(Ks);h={...h,horizontalScrolling:g}}if(p.affectsConfiguration(ul)){let g=!!a.getValue(ul);h={...h,scrollByPage:g}}if(p.affectsConfiguration(aL)&&t.expandOnlyOnTwistieClick===void 0&&(h={...h,expandOnlyOnTwistieClick:a.getValue(aL)==="doubleClick"}),p.affectsConfiguration(lL)){let g=a.getValue(lL);h={...h,enableStickyScroll:g}}if(p.affectsConfiguration(dL)){let g=Math.max(1,a.getValue(dL));h={...h,stickyScrollMaxItemCount:g}}if(p.affectsConfiguration(kd)){let g=a.getValue(kd);h={...h,mouseWheelScrollSensitivity:g}}if(p.affectsConfiguration(Rd)){let g=a.getValue(Rd);h={...h,fastScrollSensitivity:g}}Object.keys(h).length>0&&e.updateOptions(h)}),this.contextKeyService.onDidChangeContext(p=>{p.affectsSome(c)&&e.updateOptions({typeNavigationMode:n()})})),this.navigator=new mB(e,{configurationService:a,...t}),this.disposables.push(this.navigator)}contextKeyService;listSupportsMultiSelect;listSupportFindWidget;hasSelectionOrFocus;hasDoubleSelection;hasMultiSelection;treeElementCanCollapse;treeElementHasParent;treeElementCanExpand;treeElementHasChild;treeFindOpen;treeStickyScrollFocused;_useAltAsMultipleSelectionModifier;disposables=[];navigator;get onDidOpen(){return this.navigator.onDidOpen}get useAltAsMultipleSelectionModifier(){return this._useAltAsMultipleSelectionModifier}updateOptions(e){e.multipleSelectionSupport!==void 0&&this.listSupportsMultiSelect.set(!!e.multipleSelectionSupport)}updateStyleOverrides(e){this.tree.style(e?dl(e):Sb)}dispose(){this.disposables=rt(this.disposables)}};Wc=_([y(4,Ne),y(5,Gs),y(6,Ge)],Wc);var wZ=Te.as(In.Configuration);wZ.registerConfiguration({id:"workbench",order:7,title:u("workbenchConfigurationTitle","Workbench"),type:"object",properties:{[Sg]:{type:"string",enum:["ctrlCmd","alt"],markdownEnumDescriptions:[u("multiSelectModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),u("multiSelectModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],default:"ctrlCmd",description:u({key:"multiSelectModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add an item in trees and lists to a multi-selection with the mouse (for example in the explorer, open editors and scm view). The 'Open to Side' mouse gestures - if supported - will adapt such that they do not conflict with the multiselect modifier.")},[oL]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:u({key:"openModeModifier",comment:["`singleClick` and `doubleClick` refers to a value the setting can take and should not be localized."]},"Controls how to open items in trees and lists using the mouse (if supported). Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[Ks]:{type:"boolean",default:!1,description:u("horizontalScrolling setting","Controls whether lists and trees support horizontal scrolling in the workbench. Warning: turning on this setting has a performance implication.")},[ul]:{type:"boolean",default:!1,description:u("list.scrollByPage","Controls whether clicks in the scrollbar scroll page by page.")},[US]:{type:"number",default:8,minimum:4,maximum:40,description:u("tree indent setting","Controls tree indentation in pixels.")},[sL]:{type:"string",enum:["none","onHover","always"],default:"onHover",description:u("render tree indent guides","Controls whether the tree should render indent guides.")},[pl]:{type:"boolean",default:!1,description:u("list smoothScrolling setting","Controls whether lists and trees have smooth scrolling.")},[kd]:{type:"number",default:1,markdownDescription:u("Mouse Wheel Scroll Sensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")},[Rd]:{type:"number",default:5,markdownDescription:u("Fast Scroll Sensitivity","Scrolling speed multiplier when pressing `Alt`.")},[IB]:{type:"string",enum:["highlight","filter"],enumDescriptions:[u("defaultFindModeSettingKey.highlight","Highlight elements when searching. Further up and down navigation will traverse only the highlighted elements."),u("defaultFindModeSettingKey.filter","Filter elements when searching.")],default:"highlight",description:u("defaultFindModeSettingKey","Controls the default find mode for lists and trees in the workbench.")},[rL]:{type:"string",enum:["simple","highlight","filter"],enumDescriptions:[u("keyboardNavigationSettingKey.simple","Simple keyboard navigation focuses elements which match the keyboard input. Matching is done only on prefixes."),u("keyboardNavigationSettingKey.highlight","Highlight keyboard navigation highlights elements which match the keyboard input. Further up and down navigation will traverse only the highlighted elements."),u("keyboardNavigationSettingKey.filter","Filter keyboard navigation will filter out and hide all the elements which do not match the keyboard input.")],default:"highlight",description:u("keyboardNavigationSettingKey","Controls the keyboard navigation style for lists and trees in the workbench. Can be simple, highlight and filter."),deprecated:!0,deprecationMessage:u("keyboardNavigationSettingKeyDeprecated","Please use 'workbench.list.defaultFindMode' and	'workbench.list.typeNavigationMode' instead.")},[CB]:{type:"string",enum:["fuzzy","contiguous"],enumDescriptions:[u("defaultFindMatchTypeSettingKey.fuzzy","Use fuzzy matching when searching."),u("defaultFindMatchTypeSettingKey.contiguous","Use contiguous matching when searching.")],default:"fuzzy",description:u("defaultFindMatchTypeSettingKey","Controls the type of matching used when searching lists and trees in the workbench.")},[aL]:{type:"string",enum:["singleClick","doubleClick"],default:"singleClick",description:u("expand mode","Controls how tree folders are expanded when clicking the folder names. Note that some trees and lists might choose to ignore this setting if it is not applicable.")},[lL]:{type:"boolean",default:!0,description:u("sticky scroll","Controls whether sticky scrolling is enabled in trees.")},[dL]:{type:"number",minimum:1,default:7,markdownDescription:u("sticky scroll maximum items","Controls the number of sticky elements displayed in the tree when {0} is enabled.","`#workbench.tree.enableStickyScroll#`")},[SB]:{type:"string",enum:["automatic","trigger"],default:"automatic",markdownDescription:u("typeNavigationMode2","Controls how type navigation works in lists and trees in the workbench. When set to `trigger`, type navigation begins once the `list.triggerTypeNavigation` command is run.")}}});function w9(r){switch(r.type){case"light":return H.fromHex("#F3F3F3");case"hcLight":return H.fromHex("#FFFFFF");case"hcDark":return H.fromHex("#000000");default:return H.fromHex("#252526")}}var _9=C("tab.activeBackground",$t,u("tabActiveBackground","Active tab background color in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),Rzt=C("tab.unfocusedActiveBackground",_9,u("tabUnfocusedActiveBackground","Active tab background color in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),_Z=C("tab.inactiveBackground",{dark:"#2D2D2D",light:"#ECECEC",hcDark:null,hcLight:null},u("tabInactiveBackground","Inactive tab background color in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),Mzt=C("tab.unfocusedInactiveBackground",_Z,u("tabUnfocusedInactiveBackground","Inactive tab background color in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),Cg=C("tab.activeForeground",{dark:H.white,light:"#333333",hcDark:H.white,hcLight:"#292929"},u("tabActiveForeground","Active tab foreground color in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),v9=C("tab.inactiveForeground",{dark:ve(Cg,.5),light:ve(Cg,.7),hcDark:H.white,hcLight:"#292929"},u("tabInactiveForeground","Inactive tab foreground color in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),Ozt=C("tab.unfocusedActiveForeground",{dark:ve(Cg,.5),light:ve(Cg,.7),hcDark:H.white,hcLight:"#292929"},u("tabUnfocusedActiveForeground","Active tab foreground color in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),Pzt=C("tab.unfocusedInactiveForeground",{dark:ve(v9,.5),light:ve(v9,.5),hcDark:H.white,hcLight:"#292929"},u("tabUnfocusedInactiveForeground","Inactive tab foreground color in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),y9=C("tab.hoverBackground",null,u("tabHoverBackground","Tab background color when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),Azt=C("tab.unfocusedHoverBackground",{dark:ve(y9,.5),light:ve(y9,.7),hcDark:null,hcLight:null},u("tabUnfocusedHoverBackground","Tab background color in an unfocused group when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),I9=C("tab.hoverForeground",null,u("tabHoverForeground","Tab foreground color when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),Nzt=C("tab.unfocusedHoverForeground",{dark:ve(I9,.5),light:ve(I9,.5),hcDark:null,hcLight:null},u("tabUnfocusedHoverForeground","Tab foreground color in an unfocused group when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),Fzt=C("tab.border",{dark:"#252526",light:"#F3F3F3",hcDark:Ie,hcLight:Ie},u("tabBorder","Border to separate tabs from each other. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),Bzt=C("tab.lastPinnedBorder",{dark:yf,light:yf,hcDark:Ie,hcLight:Ie},u("lastPinnedTabBorder","Border to separate pinned tabs from other tabs. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),S9=C("tab.activeBorder",null,u("tabActiveBorder","Border on the bottom of an active tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),Wzt=C("tab.unfocusedActiveBorder",{dark:ve(S9,.5),light:ve(S9,.7),hcDark:null,hcLight:null},u("tabActiveUnfocusedBorder","Border on the bottom of an active tab in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),xB=C("tab.activeBorderTop",{dark:null,light:null,hcDark:null,hcLight:"#B5200D"},u("tabActiveBorderTop","Border to the top of an active tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),Vzt=C("tab.unfocusedActiveBorderTop",{dark:ve(xB,.5),light:ve(xB,.7),hcDark:null,hcLight:"#B5200D"},u("tabActiveUnfocusedBorderTop","Border to the top of an active tab in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),Hzt=C("tab.selectedBorderTop",xB,u("tabSelectedBorderTop","Border to the top of a selected tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),Uzt=C("tab.selectedBackground",_9,u("tabSelectedBackground","Background of a selected tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),zzt=C("tab.selectedForeground",Cg,u("tabSelectedForeground","Foreground of a selected tab. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),C9=C("tab.hoverBorder",null,u("tabHoverBorder","Border to highlight tabs when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),Kzt=C("tab.unfocusedHoverBorder",{dark:ve(C9,.5),light:ve(C9,.7),hcDark:null,hcLight:Ie},u("tabUnfocusedHoverBorder","Border to highlight tabs in an unfocused group when hovering. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),Gzt=C("tab.dragAndDropBorder",{dark:Cg,light:Cg,hcDark:Wt,hcLight:Wt},u("tabDragAndDropBorder","Border between tabs to indicate that a tab can be inserted between two tabs. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),bL=C("tab.activeModifiedBorder",{dark:"#3399CC",light:"#33AAEE",hcDark:null,hcLight:Ie},u("tabActiveModifiedBorder","Border on the top of modified active tabs in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),x9=C("tab.inactiveModifiedBorder",{dark:ve(bL,.5),light:ve(bL,.5),hcDark:H.white,hcLight:Ie},u("tabInactiveModifiedBorder","Border on the top of modified inactive tabs in an active group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),jzt=C("tab.unfocusedActiveModifiedBorder",{dark:ve(bL,.5),light:ve(bL,.7),hcDark:H.white,hcLight:Ie},u("unfocusedActiveModifiedBorder","Border on the top of modified active tabs in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),$zt=C("tab.unfocusedInactiveModifiedBorder",{dark:ve(x9,.5),light:ve(x9,.5),hcDark:H.white,hcLight:Ie},u("unfocusedINactiveModifiedBorder","Border on the top of modified inactive tabs in an unfocused group. Tabs are the containers for editors in the editor area. Multiple tabs can be opened in one editor group. There can be multiple editor groups.")),qzt=C("editorPane.background",$t,u("editorPaneBackground","Background color of the editor pane visible on the left and right side of the centered editor layout.")),Yzt=C("editorGroup.emptyBackground",null,u("editorGroupEmptyBackground","Background color of an empty editor group. Editor groups are the containers of editors.")),Xzt=C("editorGroup.focusedEmptyBorder",{dark:null,light:null,hcDark:Fi,hcLight:Fi},u("editorGroupFocusedEmptyBorder","Border color of an empty editor group that is focused. Editor groups are the containers of editors.")),Qzt=C("editorGroupHeader.tabsBackground",{dark:"#252526",light:"#F3F3F3",hcDark:null,hcLight:null},u("tabsContainerBackground","Background color of the editor group title header when tabs are enabled. Editor groups are the containers of editors.")),Zzt=C("editorGroupHeader.tabsBorder",null,u("tabsContainerBorder","Border color of the editor group title header when tabs are enabled. Editor groups are the containers of editors.")),Jzt=C("editorGroupHeader.noTabsBackground",$t,u("editorGroupHeaderBackground",'Background color of the editor group title header when (`"workbench.editor.showTabs": "single"`). Editor groups are the containers of editors.')),e4t=C("editorGroupHeader.border",{dark:null,light:null,hcDark:Ie,hcLight:Ie},u("editorTitleContainerBorder","Border color of the editor group title header. Editor groups are the containers of editors.")),D9=C("editorGroup.border",{dark:"#444444",light:"#E7E7E7",hcDark:Ie,hcLight:Ie},u("editorGroupBorder","Color to separate multiple editor groups from each other. Editor groups are the containers of editors.")),L9=C("editorGroup.dropBackground",{dark:H.fromHex("#53595D").transparent(.5),light:H.fromHex("#2677CB").transparent(.18),hcDark:null,hcLight:H.fromHex("#0F4A85").transparent(.5)},u("editorDragAndDropBackground","Background color when dragging editors around. The color should have transparency so that the editor contents can still shine through.")),t4t=C("editorGroup.dropIntoPromptForeground",aa,u("editorDropIntoPromptForeground","Foreground color of text shown over editors when dragging files. This text informs the user that they can hold shift to drop into the editor.")),n4t=C("editorGroup.dropIntoPromptBackground",ui,u("editorDropIntoPromptBackground","Background color of text shown over editors when dragging files. This text informs the user that they can hold shift to drop into the editor.")),i4t=C("editorGroup.dropIntoPromptBorder",{dark:null,light:null,hcDark:Ie,hcLight:Ie},u("editorDropIntoPromptBorder","Border color of text shown over editors when dragging files. This text informs the user that they can hold shift to drop into the editor.")),o4t=C("sideBySideEditor.horizontalBorder",D9,u("sideBySideEditor.horizontalBorder","Color to separate two editors from each other when shown side by side in an editor group from top to bottom.")),r4t=C("sideBySideEditor.verticalBorder",D9,u("sideBySideEditor.verticalBorder","Color to separate two editors from each other when shown side by side in an editor group from left to right.")),DZ=C("panel.background",$t,u("panelBackground","Panel background color. Panels are shown below the editor area and contain views like output and integrated terminal.")),vL=C("panel.border",{dark:H.fromHex("#808080").transparent(.35),light:H.fromHex("#808080").transparent(.35),hcDark:Ie,hcLight:Ie},u("panelBorder","Panel border color to separate the panel from the editor. Panels are shown below the editor area and contain views like output and integrated terminal.")),GS=C("panelTitle.activeForeground",{dark:"#E7E7E7",light:"#424242",hcDark:H.white,hcLight:Sr},u("panelActiveTitleForeground","Title color for the active panel. Panels are shown below the editor area and contain views like output and integrated terminal.")),s4t=C("panelTitle.inactiveForeground",{dark:ve(GS,.6),light:ve(GS,.75),hcDark:H.white,hcLight:Sr},u("panelInactiveTitleForeground","Title color for the inactive panel. Panels are shown below the editor area and contain views like output and integrated terminal.")),a4t=C("panelTitle.activeBorder",{dark:GS,light:GS,hcDark:Ie,hcLight:"#B5200D"},u("panelActiveTitleBorder","Border color for the active panel title. Panels are shown below the editor area and contain views like output and integrated terminal.")),l4t=C("panelInput.border",{dark:Za,light:H.fromHex("#ddd"),hcDark:Za,hcLight:Za},u("panelInputBorder","Input box border for inputs in the panel.")),d4t=C("panel.dropBorder",GS,u("panelDragAndDropBorder","Drag and drop feedback color for the panel titles. Panels are shown below the editor area and contain views like output and integrated terminal.")),c4t=C("panelSection.dropBackground",L9,u("panelSectionDragAndDropBackground","Drag and drop feedback color for the panel sections. The color should have transparency so that the panel sections can still shine through. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels.")),u4t=C("panelSectionHeader.background",{dark:H.fromHex("#808080").transparent(.2),light:H.fromHex("#808080").transparent(.2),hcDark:null,hcLight:null},u("panelSectionHeaderBackground","Panel section header background color. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels.")),p4t=C("panelSectionHeader.foreground",null,u("panelSectionHeaderForeground","Panel section header foreground color. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels.")),h4t=C("panelSectionHeader.border",Ie,u("panelSectionHeaderBorder","Panel section header border color used when multiple views are stacked vertically in the panel. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels.")),g4t=C("panelSection.border",vL,u("panelSectionBorder","Panel section border color used when multiple views are stacked horizontally in the panel. Panels are shown below the editor area and contain views like output and integrated terminal. Panel sections are views nested within the panels.")),m4t=C("panelStickyScroll.background",DZ,u("panelStickyScrollBackground","Background color of sticky scroll in the panel.")),f4t=C("panelStickyScroll.border",null,u("panelStickyScrollBorder","Border color of sticky scroll in the panel.")),b4t=C("panelStickyScroll.shadow",ju,u("panelStickyScrollShadow","Shadow color of sticky scroll in the panel.")),LZ=C("outputView.background",null,u("outputViewBackground","Output view background color."));C("outputViewStickyScroll.background",LZ,u("outputViewStickyScrollBackground","Output view sticky scroll background color."));var v4t=C("banner.background",{dark:Jo,light:Zo(Jo,.3),hcDark:Jo,hcLight:Jo},u("banner.background","Banner background color. The banner is shown under the title bar of the window.")),y4t=C("banner.foreground",la,u("banner.foreground","Banner foreground color. The banner is shown under the title bar of the window.")),I4t=C("banner.iconForeground",ps,u("banner.iconForeground","Banner icon color. The banner is shown under the title bar of the window.")),fp=C("statusBar.foreground",{dark:"#FFFFFF",light:"#FFFFFF",hcDark:"#FFFFFF",hcLight:Sr},u("statusBarForeground","Status bar foreground color when a workspace or folder is opened. The status bar is shown in the bottom of the window.")),S4t=C("statusBar.noFolderForeground",fp,u("statusBarNoFolderForeground","Status bar foreground color when no folder is opened. The status bar is shown in the bottom of the window.")),C4t=C("statusBar.background",{dark:"#007ACC",light:"#007ACC",hcDark:null,hcLight:null},u("statusBarBackground","Status bar background color when a workspace or folder is opened. The status bar is shown in the bottom of the window.")),x4t=C("statusBar.noFolderBackground",{dark:"#68217A",light:"#68217A",hcDark:null,hcLight:null},u("statusBarNoFolderBackground","Status bar background color when no folder is opened. The status bar is shown in the bottom of the window.")),kZ=C("statusBar.border",{dark:null,light:null,hcDark:Ie,hcLight:Ie},u("statusBarBorder","Status bar border color separating to the sidebar and editor. The status bar is shown in the bottom of the window.")),E4t=C("statusBar.focusBorder",{dark:fp,light:fp,hcDark:null,hcLight:fp},u("statusBarFocusBorder","Status bar border color when focused on keyboard navigation. The status bar is shown in the bottom of the window.")),T4t=C("statusBar.noFolderBorder",kZ,u("statusBarNoFolderBorder","Status bar border color separating to the sidebar and editor when no folder is opened. The status bar is shown in the bottom of the window.")),w4t=C("statusBarItem.activeBackground",{dark:H.white.transparent(.18),light:H.white.transparent(.18),hcDark:H.white.transparent(.18),hcLight:H.black.transparent(.18)},u("statusBarItemActiveBackground","Status bar item background color when clicking. The status bar is shown in the bottom of the window.")),_4t=C("statusBarItem.focusBorder",{dark:fp,light:fp,hcDark:null,hcLight:Wt},u("statusBarItemFocusBorder","Status bar item border color when focused on keyboard navigation. The status bar is shown in the bottom of the window.")),bp=C("statusBarItem.hoverBackground",{dark:H.white.transparent(.12),light:H.white.transparent(.12),hcDark:H.white.transparent(.12),hcLight:H.black.transparent(.12)},u("statusBarItemHoverBackground","Status bar item background color when hovering. The status bar is shown in the bottom of the window.")),$S=C("statusBarItem.hoverForeground",fp,u("statusBarItemHoverForeground","Status bar item foreground color when hovering. The status bar is shown in the bottom of the window.")),D4t=C("statusBarItem.compactHoverBackground",{dark:H.white.transparent(.2),light:H.white.transparent(.2),hcDark:H.white.transparent(.2),hcLight:H.black.transparent(.2)},u("statusBarItemCompactHoverBackground","Status bar item background color when hovering an item that contains two hovers. The status bar is shown in the bottom of the window.")),L4t=C("statusBarItem.prominentForeground",fp,u("statusBarProminentItemForeground","Status bar prominent items foreground color. Prominent items stand out from other status bar entries to indicate importance. The status bar is shown in the bottom of the window.")),k4t=C("statusBarItem.prominentBackground",H.black.transparent(.5),u("statusBarProminentItemBackground","Status bar prominent items background color. Prominent items stand out from other status bar entries to indicate importance. The status bar is shown in the bottom of the window.")),R4t=C("statusBarItem.prominentHoverForeground",$S,u("statusBarProminentItemHoverForeground","Status bar prominent items foreground color when hovering. Prominent items stand out from other status bar entries to indicate importance. The status bar is shown in the bottom of the window.")),M4t=C("statusBarItem.prominentHoverBackground",{dark:H.black.transparent(.3),light:H.black.transparent(.3),hcDark:H.black.transparent(.3),hcLight:null},u("statusBarProminentItemHoverBackground","Status bar prominent items background color when hovering. Prominent items stand out from other status bar entries to indicate importance. The status bar is shown in the bottom of the window.")),O4t=C("statusBarItem.errorBackground",{dark:Zo(mP,.4),light:Zo(mP,.4),hcDark:null,hcLight:"#B5200D"},u("statusBarErrorItemBackground","Status bar error items background color. Error items stand out from other status bar entries to indicate error conditions. The status bar is shown in the bottom of the window.")),P4t=C("statusBarItem.errorForeground",H.white,u("statusBarErrorItemForeground","Status bar error items foreground color. Error items stand out from other status bar entries to indicate error conditions. The status bar is shown in the bottom of the window.")),A4t=C("statusBarItem.errorHoverForeground",$S,u("statusBarErrorItemHoverForeground","Status bar error items foreground color when hovering. Error items stand out from other status bar entries to indicate error conditions. The status bar is shown in the bottom of the window.")),N4t=C("statusBarItem.errorHoverBackground",bp,u("statusBarErrorItemHoverBackground","Status bar error items background color when hovering. Error items stand out from other status bar entries to indicate error conditions. The status bar is shown in the bottom of the window.")),F4t=C("statusBarItem.warningBackground",{dark:Zo(Cr,.4),light:Zo(Cr,.4),hcDark:null,hcLight:"#895503"},u("statusBarWarningItemBackground","Status bar warning items background color. Warning items stand out from other status bar entries to indicate warning conditions. The status bar is shown in the bottom of the window.")),B4t=C("statusBarItem.warningForeground",H.white,u("statusBarWarningItemForeground","Status bar warning items foreground color. Warning items stand out from other status bar entries to indicate warning conditions. The status bar is shown in the bottom of the window.")),W4t=C("statusBarItem.warningHoverForeground",$S,u("statusBarWarningItemHoverForeground","Status bar warning items foreground color when hovering. Warning items stand out from other status bar entries to indicate warning conditions. The status bar is shown in the bottom of the window.")),V4t=C("statusBarItem.warningHoverBackground",bp,u("statusBarWarningItemHoverBackground","Status bar warning items background color when hovering. Warning items stand out from other status bar entries to indicate warning conditions. The status bar is shown in the bottom of the window.")),H4t=C("activityBar.background",{dark:"#333333",light:"#2C2C2C",hcDark:"#000000",hcLight:"#FFFFFF"},u("activityBarBackground","Activity bar background color. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),kb=C("activityBar.foreground",{dark:H.white,light:H.white,hcDark:H.white,hcLight:Sr},u("activityBarForeground","Activity bar item foreground color when it is active. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),U4t=C("activityBar.inactiveForeground",{dark:ve(kb,.4),light:ve(kb,.4),hcDark:H.white,hcLight:Sr},u("activityBarInActiveForeground","Activity bar item foreground color when it is inactive. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),z4t=C("activityBar.border",{dark:null,light:null,hcDark:Ie,hcLight:Ie},u("activityBarBorder","Activity bar border color separating to the side bar. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),K4t=C("activityBar.activeBorder",{dark:kb,light:kb,hcDark:Ie,hcLight:Ie},u("activityBarActiveBorder","Activity bar border color for the active item. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),G4t=C("activityBar.activeFocusBorder",{dark:null,light:null,hcDark:null,hcLight:"#B5200D"},u("activityBarActiveFocusBorder","Activity bar focus border color for the active item. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),j4t=C("activityBar.activeBackground",null,u("activityBarActiveBackground","Activity bar background color for the active item. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),$4t=C("activityBar.dropBorder",{dark:kb,light:kb,hcDark:null,hcLight:null},u("activityBarDragAndDropBorder","Drag and drop feedback color for the activity bar items. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),k9=C("activityBarBadge.background",{dark:"#007ACC",light:"#007ACC",hcDark:"#000000",hcLight:"#0F4A85"},u("activityBarBadgeBackground","Activity notification badge background color. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),R9=C("activityBarBadge.foreground",H.white,u("activityBarBadgeForeground","Activity notification badge foreground color. The activity bar is showing on the far left or right and allows to switch between views of the side bar.")),jS=C("activityBarTop.foreground",{dark:"#E7E7E7",light:"#424242",hcDark:H.white,hcLight:Sr},u("activityBarTop","Active foreground color of the item in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar.")),q4t=C("activityBarTop.activeBorder",{dark:jS,light:jS,hcDark:Ie,hcLight:"#B5200D"},u("activityBarTopActiveFocusBorder","Focus border color for the active item in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar.")),Y4t=C("activityBarTop.activeBackground",null,u("activityBarTopActiveBackground","Background color for the active item in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar.")),X4t=C("activityBarTop.inactiveForeground",{dark:ve(jS,.6),light:ve(jS,.75),hcDark:H.white,hcLight:Sr},u("activityBarTopInActiveForeground","Inactive foreground color of the item in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar.")),Q4t=C("activityBarTop.dropBorder",jS,u("activityBarTopDragAndDropBorder","Drag and drop feedback color for the items in the Activity bar when it is on top / bottom. The activity allows to switch between views of the side bar.")),Z4t=C("activityBarTop.background",null,u("activityBarTopBackground","Background color of the activity bar when set to top / bottom.")),J4t=C("profileBadge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:H.white,hcLight:H.black},u("profileBadgeBackground","Profile badge background color. The profile badge shows on top of the settings gear icon in the activity bar.")),e5t=C("profileBadge.foreground",{dark:H.white,light:"#333333",hcDark:H.black,hcLight:H.white},u("profileBadgeForeground","Profile badge foreground color. The profile badge shows on top of the settings gear icon in the activity bar.")),t5t=C("statusBarItem.remoteBackground",k9,u("statusBarItemHostBackground","Background color for the remote indicator on the status bar.")),RZ=C("statusBarItem.remoteForeground",R9,u("statusBarItemHostForeground","Foreground color for the remote indicator on the status bar.")),n5t=C("statusBarItem.remoteHoverForeground",$S,u("statusBarRemoteItemHoverForeground","Foreground color for the remote indicator on the status bar when hovering.")),i5t=C("statusBarItem.remoteHoverBackground",{dark:bp,light:bp,hcDark:bp,hcLight:null},u("statusBarRemoteItemHoverBackground","Background color for the remote indicator on the status bar when hovering.")),o5t=C("statusBarItem.offlineBackground","#6c1717",u("statusBarItemOfflineBackground","Status bar item background color when the workbench is offline.")),r5t=C("statusBarItem.offlineForeground",RZ,u("statusBarItemOfflineForeground","Status bar item foreground color when the workbench is offline.")),s5t=C("statusBarItem.offlineHoverForeground",$S,u("statusBarOfflineItemHoverForeground","Status bar item foreground hover color when the workbench is offline.")),a5t=C("statusBarItem.offlineHoverBackground",{dark:bp,light:bp,hcDark:bp,hcLight:null},u("statusBarOfflineItemHoverBackground","Status bar item background hover color when the workbench is offline.")),l5t=C("extensionBadge.remoteBackground",k9,u("extensionBadge.remoteBackground","Background color for the remote badge in the extensions view.")),d5t=C("extensionBadge.remoteForeground",R9,u("extensionBadge.remoteForeground","Foreground color for the remote badge in the extensions view.")),M9=C("sideBar.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#000000",hcLight:"#FFFFFF"},u("sideBarBackground","Side bar background color. The side bar is the container for views like explorer and search.")),O9=C("sideBar.foreground",null,u("sideBarForeground","Side bar foreground color. The side bar is the container for views like explorer and search.")),c5t=C("sideBar.border",{dark:null,light:null,hcDark:Ie,hcLight:Ie},u("sideBarBorder","Side bar border color on the side separating to the editor. The side bar is the container for views like explorer and search.")),u5t=C("sideBarTitle.background",M9,u("sideBarTitleBackground","Side bar title background color. The side bar is the container for views like explorer and search.")),p5t=C("sideBarTitle.foreground",O9,u("sideBarTitleForeground","Side bar title foreground color. The side bar is the container for views like explorer and search.")),h5t=C("sideBar.dropBackground",L9,u("sideBarDragAndDropBackground","Drag and drop feedback color for the side bar sections. The color should have transparency so that the side bar sections can still shine through. The side bar is the container for views like explorer and search. Side bar sections are views nested within the side bar.")),g5t=C("sideBarSectionHeader.background",{dark:H.fromHex("#808080").transparent(.2),light:H.fromHex("#808080").transparent(.2),hcDark:null,hcLight:null},u("sideBarSectionHeaderBackground","Side bar section header background color. The side bar is the container for views like explorer and search. Side bar sections are views nested within the side bar.")),m5t=C("sideBarSectionHeader.foreground",O9,u("sideBarSectionHeaderForeground","Side bar section header foreground color. The side bar is the container for views like explorer and search. Side bar sections are views nested within the side bar.")),MZ=C("sideBarSectionHeader.border",Ie,u("sideBarSectionHeaderBorder","Side bar section header border color. The side bar is the container for views like explorer and search. Side bar sections are views nested within the side bar.")),f5t=C("sideBarActivityBarTop.border",MZ,u("sideBarActivityBarTopBorder","Border color between the activity bar at the top/bottom and the views.")),b5t=C("sideBarStickyScroll.background",M9,u("sideBarStickyScrollBackground","Background color of sticky scroll in the side bar.")),v5t=C("sideBarStickyScroll.border",null,u("sideBarStickyScrollBorder","Border color of sticky scroll in the side bar.")),y5t=C("sideBarStickyScroll.shadow",ju,u("sideBarStickyScrollShadow","Shadow color of sticky scroll in the side bar.")),Od=C("titleBar.activeForeground",{dark:"#CCCCCC",light:"#333333",hcDark:"#FFFFFF",hcLight:"#292929"},u("titleBarActiveForeground","Title bar foreground when the window is active.")),P9=C("titleBar.inactiveForeground",{dark:ve(Od,.6),light:ve(Od,.6),hcDark:null,hcLight:"#292929"},u("titleBarInactiveForeground","Title bar foreground when the window is inactive.")),E9=C("titleBar.activeBackground",{dark:"#3C3C3C",light:"#DDDDDD",hcDark:"#000000",hcLight:"#FFFFFF"},u("titleBarActiveBackground","Title bar background when the window is active.")),I5t=C("titleBar.inactiveBackground",{dark:ve(E9,.6),light:ve(E9,.6),hcDark:null,hcLight:null},u("titleBarInactiveBackground","Title bar background when the window is inactive.")),S5t=C("titleBar.border",{dark:null,light:null,hcDark:Ie,hcLight:Ie},u("titleBarBorder","Title bar border color.")),OZ=C("menubar.selectionForeground",Od,u("menubarSelectionForeground","Foreground color of the selected menu item in the menubar.")),T9=C("menubar.selectionBackground",{dark:CI,light:CI,hcDark:null,hcLight:null},u("menubarSelectionBackground","Background color of the selected menu item in the menubar.")),C5t=C("menubar.selectionBorder",{dark:null,light:null,hcDark:Wt,hcLight:Wt},u("menubarSelectionBorder","Border color of the selected menu item in the menubar.")),x5t=C("commandCenter.foreground",Od,u("commandCenter-foreground","Foreground color of the command center"),!1),E5t=C("commandCenter.activeForeground",OZ,u("commandCenter-activeForeground","Active foreground color of the command center"),!1),T5t=C("commandCenter.inactiveForeground",P9,u("commandCenter-inactiveForeground","Foreground color of the command center when the window is inactive"),!1),w5t=C("commandCenter.background",{dark:H.white.transparent(.05),hcDark:null,light:H.black.transparent(.05),hcLight:null},u("commandCenter-background","Background color of the command center"),!1),_5t=C("commandCenter.activeBackground",{dark:H.white.transparent(.08),hcDark:T9,light:H.black.transparent(.08),hcLight:T9},u("commandCenter-activeBackground","Active background color of the command center"),!1),D5t=C("commandCenter.border",{dark:ve(Od,.2),hcDark:Ie,light:ve(Od,.2),hcLight:Ie},u("commandCenter-border","Border color of the command center"),!1),L5t=C("commandCenter.activeBorder",{dark:ve(Od,.3),hcDark:Od,light:ve(Od,.3),hcLight:Od},u("commandCenter-activeBorder","Active border color of the command center"),!1),k5t=C("commandCenter.inactiveBorder",ve(P9,.25),u("commandCenter-inactiveBorder","Border color of the command center when the window is inactive"),!1),R5t=C("notificationCenter.border",{dark:xI,light:xI,hcDark:Ie,hcLight:Ie},u("notificationCenterBorder","Notifications center border color. Notifications slide in from the bottom right of the window.")),M5t=C("notificationToast.border",{dark:xI,light:xI,hcDark:Ie,hcLight:Ie},u("notificationToastBorder","Notification toast border color. Notifications slide in from the bottom right of the window.")),O5t=C("notifications.foreground",aa,u("notificationsForeground","Notifications foreground color. Notifications slide in from the bottom right of the window.")),fL=C("notifications.background",ui,u("notificationsBackground","Notifications background color. Notifications slide in from the bottom right of the window.")),P5t=C("notificationLink.foreground",PT,u("notificationsLink","Notification links foreground color. Notifications slide in from the bottom right of the window.")),A5t=C("notificationCenterHeader.foreground",null,u("notificationCenterHeaderForeground","Notifications center header foreground color. Notifications slide in from the bottom right of the window.")),PZ=C("notificationCenterHeader.background",{dark:Ir(fL,.3),light:Zo(fL,.05),hcDark:fL,hcLight:fL},u("notificationCenterHeaderBackground","Notifications center header background color. Notifications slide in from the bottom right of the window.")),N5t=C("notifications.border",PZ,u("notificationsBorder","Notifications border color separating from other notifications in the notifications center. Notifications slide in from the bottom right of the window.")),F5t=C("notificationsErrorIcon.foreground",Bh,u("notificationsErrorIconForeground","The color used for the icon of error notifications. Notifications slide in from the bottom right of the window.")),B5t=C("notificationsWarningIcon.foreground",Cr,u("notificationsWarningIconForeground","The color used for the icon of warning notifications. Notifications slide in from the bottom right of the window.")),W5t=C("notificationsInfoIcon.foreground",ps,u("notificationsInfoIconForeground","The color used for the icon of info notifications. Notifications slide in from the bottom right of the window.")),V5t=C("window.activeBorder",{dark:null,light:null,hcDark:Ie,hcLight:Ie},u("windowActiveBorder","The color used for the border of the window when it is active. Only supported in the macOS and Linux desktop client when using the custom title bar.")),H5t=C("window.inactiveBorder",{dark:null,light:null,hcDark:Ie,hcLight:Ie},u("windowInactiveBorder","The color used for the border of the window when it is inactive. Only supported in the macOS and Linux desktop client when using the custom title bar."));var AZ=xn("keybindings-editor-label-icon",re.keyboard,u("keybindingsEditorLabelIcon","Icon of the keybindings editor label.")),hl=class extends wr{static ID="workbench.input.keybindings";keybindingsModel;searchOptions=null;resource=void 0;constructor(e){super(),this.keybindingsModel=e.createInstance(ir,uo)}get typeId(){return hl.ID}getName(){return u("keybindingsInputName","Keyboard Shortcuts")}getIcon(){return AZ}async resolve(){return this.keybindingsModel}matches(e){return e instanceof hl}dispose(){this.keybindingsModel.dispose(),super.dispose()}};hl=_([y(0,we)],hl);var Pd=class extends oo{menuActionsOrProvider;dropdownMenu;contextMenuProvider;actionItem=null;_onDidChangeVisibility=this._register(new T);onDidChangeVisibility=this._onDidChangeVisibility.event;options;constructor(e,t,n,i=Object.create(null)){super(null,e,i),this.menuActionsOrProvider=t,this.contextMenuProvider=n,this.options=i,this.options.actionRunner&&(this.actionRunner=this.options.actionRunner)}render(e){this.actionItem=e;let t=o=>{this.element=q(o,ie("a.action-label"));let s=[];return typeof this.options.classNames=="string"?s=this.options.classNames.split(/\s+/g).filter(a=>!!a):this.options.classNames&&(s=this.options.classNames),s.find(a=>a==="icon")||s.push("codicon"),this.element.classList.add(...s),this.element.setAttribute("role","button"),this.element.setAttribute("aria-haspopup","true"),this.element.setAttribute("aria-expanded","false"),this._action.label&&this._register(ii().setupManagedHover(this.options.hoverDelegate??pt("mouse"),this.element,this._action.label)),this.element.ariaLabel=this._action.label||"",null},n=Array.isArray(this.menuActionsOrProvider),i={contextMenuProvider:this.contextMenuProvider,labelRenderer:t,menuAsChild:this.options.menuAsChild,actions:n?this.menuActionsOrProvider:void 0,actionProvider:n?void 0:this.menuActionsOrProvider,skipTelemetry:this.options.skipTelemetry};if(this.dropdownMenu=this._register(new ID(e,i)),this._register(this.dropdownMenu.onDidChangeVisibility(o=>{this.element?.setAttribute("aria-expanded",`${o}`),this._onDidChangeVisibility.fire(o)})),this.dropdownMenu.menuOptions={actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,getKeyBinding:this.options.keybindingProvider,context:this._context},this.options.anchorAlignmentProvider){let o=this;this.dropdownMenu.menuOptions={...this.dropdownMenu.menuOptions,get anchorAlignment(){return o.options.anchorAlignmentProvider()}}}this.updateTooltip(),this.updateEnabled()}getTooltip(){let e=null;return this.action.tooltip?e=this.action.tooltip:this.action.label&&(e=this.action.label),e??void 0}setActionContext(e){super.setActionContext(e),this.dropdownMenu&&(this.dropdownMenu.menuOptions?this.dropdownMenu.menuOptions.context=e:this.dropdownMenu.menuOptions={context:e})}show(){this.dropdownMenu?.show()}updateEnabled(){let e=!this.action.enabled;this.actionItem?.classList.toggle("disabled",e),this.element?.classList.toggle("disabled",e)}};var Rb=class extends N{options;actionBar;toggleMenuAction;toggleMenuActionViewItem;submenuActionViewItems=[];hasSecondaryActions=!1;element;_onDidChangeDropdownVisibility=this._register(new qv);onDidChangeDropdownVisibility=this._onDidChangeDropdownVisibility.event;disposables=this._register(new X);constructor(e,t,n={orientation:0}){super(),n.hoverDelegate=n.hoverDelegate??this._register(Cc()),this.options=n,this.toggleMenuAction=this._register(new yL(()=>this.toggleMenuActionViewItem?.show(),n.toggleMenuTitle)),this.element=document.createElement("div"),this.element.className="monaco-toolbar",e.appendChild(this.element),this.actionBar=this._register(new Wi(this.element,{orientation:n.orientation,ariaLabel:n.ariaLabel,actionRunner:n.actionRunner,allowContextMenu:n.allowContextMenu,highlightToggledItems:n.highlightToggledItems,hoverDelegate:n.hoverDelegate,actionViewItemProvider:(i,o)=>{if(i.id===yL.ID)return this.toggleMenuActionViewItem=new Pd(i,i.menuActions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:Ae.asClassNameArray(n.moreIcon??re.toolBarMore),anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,isMenu:!0,hoverDelegate:this.options.hoverDelegate}),this.toggleMenuActionViewItem.setActionContext(this.actionBar.context),this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility)),this.toggleMenuActionViewItem;if(n.actionViewItemProvider){let s=n.actionViewItemProvider(i,o);if(s)return s}if(i instanceof ss){let s=new Pd(i,i.actions,t,{actionViewItemProvider:this.options.actionViewItemProvider,actionRunner:this.actionRunner,keybindingProvider:this.options.getKeyBinding,classNames:i.class,anchorAlignmentProvider:this.options.anchorAlignmentProvider,menuAsChild:!!this.options.renderDropdownAsChildElement,skipTelemetry:this.options.skipTelemetry,hoverDelegate:this.options.hoverDelegate});return s.setActionContext(this.actionBar.context),this.submenuActionViewItems.push(s),this.disposables.add(this._onDidChangeDropdownVisibility.add(s.onDidChangeVisibility)),s}}}))}set actionRunner(e){this.actionBar.actionRunner=e}get actionRunner(){return this.actionBar.actionRunner}set context(e){this.actionBar.context=e,this.toggleMenuActionViewItem?.setActionContext(e);for(let t of this.submenuActionViewItems)t.setActionContext(e)}getElement(){return this.element}focus(){this.actionBar.focus()}getItemsWidth(){let e=0;for(let t=0;t<this.actionBar.length();t++)e+=this.actionBar.getWidth(t);return e}getItemAction(e){return this.actionBar.getAction(e)}getItemWidth(e){return this.actionBar.getWidth(e)}getItemsLength(){return this.actionBar.length()}setAriaLabel(e){this.actionBar.setAriaLabel(e)}setActions(e,t){this.clear();let n=e?e.slice(0):[];this.hasSecondaryActions=!!(t&&t.length>0),this.hasSecondaryActions&&t&&(this.toggleMenuAction.menuActions=t.slice(0),n.push(this.toggleMenuAction)),n.forEach(i=>{this.actionBar.push(i,{icon:this.options.icon??!0,label:this.options.label??!1,keybinding:this.getKeybindingLabel(i)})})}isEmpty(){return this.actionBar.isEmpty()}getKeybindingLabel(e){return this.options.getKeyBinding?.(e)?.getLabel()??void 0}clear(){this.submenuActionViewItems=[],this.disposables.clear(),this.actionBar.clear()}dispose(){this.clear(),this.disposables.dispose(),super.dispose()}},yL=class r extends un{static ID="toolbar.toggle.more";_menuActions;toggleDropdownMenu;constructor(e,t){t=t||u("moreActions","More Actions..."),super(r.ID,t,void 0,!0),this._menuActions=[],this.toggleDropdownMenu=e}async run(){this.toggleDropdownMenu()}get menuActions(){return this._menuActions}set menuActions(e){this._menuActions=e}};var NZ=fD;var S7t=j("extensionManagementServerService"),C7t=qs.asBrowserUri("vs/workbench/services/extensionManagement/common/media/defaultIcon.png").toString(!0),x7t=NZ,E7t={id:"extensions",order:30,title:u("extensionsConfigurationTitle","Extensions"),type:"object"};var T7t=j("extensionEnablementService"),w7t=j("IWebExtensionsScannerService");var G7t=xn("extensions-editor-label-icon",re.extensions,u("extensionsEditorLabelIcon","Icon of the extensions editor label."));var qS=j("extensionsWorkbenchService");var IL=class extends N{constructor(t,n){super();this.containers=t;this._register(n.onChange(this.update,this))}set extension(t){this.containers.forEach(n=>n.extension=t)}update(t){for(let n of this.containers)t&&n.extension?dF(n.extension.identifier,t.identifier)&&(n.extension.server&&t.server&&n.extension.server!==t.server?n.updateWhenCounterExtensionChanges&&n.update():n.extension=t):n.update()}};IL=_([y(1,qS)],IL);var O8t=new B("hasOutdatedExtensions",!1),P8t=new B("hasGallery",!1);var A8t=new Je("extensionsSearchActionsMenu");var SL=It?'"Segoe WPC", "Segoe UI", sans-serif':Pe?"-apple-system, BlinkMacSystemFont, sans-serif":'system-ui, "Ubuntu", "Droid Sans", sans-serif';var A9=j("markerDecorationsService");var Mb=class{static ID="editor.contrib.markerDecorations";constructor(e,t){}dispose(){}};Mb=_([y(1,A9)],Mb);gs(Mb.ID,Mb,0);var Vc;(R=>{let r={total:0,min:Number.MAX_VALUE,max:0},e={...r},t={...r},n={...r},i=0,o;($=>($[$.Before=0]="Before",$[$.InProgress=1]="InProgress",$[$.Finished=2]="Finished"))(o||={});let s={keydown:0,input:0,render:0};function a(){v(),performance.mark("inputlatency/start"),performance.mark("keydown/start"),s.keydown=1,queueMicrotask(l)}R.onKeyDown=a;function l(){s.keydown===1&&(performance.mark("keydown/end"),s.keydown=2)}function d(){performance.mark("input/start"),s.input=1,b()}R.onBeforeInput=d;function c(){s.input===0&&d(),queueMicrotask(p)}R.onInput=c;function p(){s.input===1&&(performance.mark("input/end"),s.input=2)}function h(){v()}R.onKeyUp=h;function g(){v()}R.onSelectionChange=g;function f(){s.keydown===2&&s.input===2&&s.render===0&&(performance.mark("render/start"),s.render=1,queueMicrotask(m),b())}R.onRenderStart=f;function m(){s.render===1&&(performance.mark("render/end"),s.render=2)}function b(){setTimeout(v)}function v(){s.keydown===2&&s.input===2&&s.render===2&&(performance.mark("inputlatency/end"),performance.measure("keydown","keydown/start","keydown/end"),performance.measure("input","input/start","input/end"),performance.measure("render","render/start","render/end"),performance.measure("inputlatency","inputlatency/start","inputlatency/end"),S("keydown",r),S("input",e),S("render",t),S("inputlatency",n),i++,x())}function S(O,M){let K=performance.getEntriesByName(O)[0].duration;M.total+=K,M.min=Math.min(M.min,K),M.max=Math.max(M.max,K)}function x(){performance.clearMarks("keydown/start"),performance.clearMarks("keydown/end"),performance.clearMarks("input/start"),performance.clearMarks("input/end"),performance.clearMarks("render/start"),performance.clearMarks("render/end"),performance.clearMarks("inputlatency/start"),performance.clearMarks("inputlatency/end"),performance.clearMeasures("keydown"),performance.clearMeasures("input"),performance.clearMeasures("render"),performance.clearMeasures("inputlatency"),s.keydown=0,s.input=0,s.render=0}function E(){if(i===0)return;let O={keydown:w(r),input:w(e),render:w(t),total:w(n),sampleCount:i};return P(r),P(e),P(t),P(n),i=0,O}R.getAndClearMeasurements=E;function w(O){return{average:O.total/i,max:O.max,min:O.min}}function P(O){O.total=0,O.min=Number.MAX_VALUE,O.max=0}})(Vc||={});var vp=class{constructor(e,t){this.x=e;this.y=t}_pageCoordinatesBrand=void 0;toClientCoordinates(e){return new YS(this.x-e.scrollX,this.y-e.scrollY)}},YS=class{constructor(e,t){this.clientX=e;this.clientY=t}_clientCoordinatesBrand=void 0;toPageCoordinates(e){return new vp(this.clientX+e.scrollX,this.clientY+e.scrollY)}},EB=class{constructor(e,t,n,i){this.x=e;this.y=t;this.width=n;this.height=i}_editorPagePositionBrand=void 0},TB=class{constructor(e,t){this.x=e;this.y=t}_positionRelativeToEditorBrand=void 0};function TL(r){let e=Ii(r);return new EB(e.left,e.top,e.width,e.height)}function wL(r,e,t){let n=e.width/r.offsetWidth,i=e.height/r.offsetHeight,o=(t.x-e.x)/n,s=(t.y-e.y)/i;return new TB(o,s)}var Ia=class extends hr{_editorMouseEventBrand=void 0;isFromPointerCapture;pos;editorPos;relativePos;constructor(e,t,n){super(Ee(n),e),this.isFromPointerCapture=t,this.pos=new vp(this.posx,this.posy),this.editorPos=TL(n),this.relativePos=wL(n,this.editorPos,this.pos)}},CL=class{_editorViewDomNode;constructor(e){this._editorViewDomNode=e}_create(e){return new Ia(e,!1,this._editorViewDomNode)}onContextMenu(e,t){return U(e,"contextmenu",n=>{t(this._create(n))})}onMouseUp(e,t){return U(e,"mouseup",n=>{t(this._create(n))})}onMouseDown(e,t){return U(e,ee.MOUSE_DOWN,n=>{t(this._create(n))})}onPointerDown(e,t){return U(e,ee.POINTER_DOWN,n=>{t(this._create(n),n.pointerId)})}onMouseLeave(e,t){return U(e,ee.MOUSE_LEAVE,n=>{t(this._create(n))})}onMouseMove(e,t){return U(e,"mousemove",n=>t(this._create(n)))}},xL=class{_editorViewDomNode;constructor(e){this._editorViewDomNode=e}_create(e){return new Ia(e,!1,this._editorViewDomNode)}onPointerUp(e,t){return U(e,"pointerup",n=>{t(this._create(n))})}onPointerDown(e,t){return U(e,ee.POINTER_DOWN,n=>{t(this._create(n),n.pointerId)})}onPointerLeave(e,t){return U(e,ee.POINTER_LEAVE,n=>{t(this._create(n))})}onPointerMove(e,t){return U(e,"pointermove",n=>t(this._create(n)))}},EL=class extends N{_editorViewDomNode;_globalPointerMoveMonitor;_keydownListener;constructor(e){super(),this._editorViewDomNode=e,this._globalPointerMoveMonitor=this._register(new sd),this._keydownListener=null}startMonitoring(e,t,n,i,o){this._keydownListener=dn(e.ownerDocument,"keydown",s=>{s.toKeyCodeChord().isModifierKey()||this._globalPointerMoveMonitor.stopMonitoring(!0,s.browserEvent)},!0),this._globalPointerMoveMonitor.startMonitoring(e,t,n,s=>{i(new Ia(s,!0,this._editorViewDomNode))},s=>{this._keydownListener.dispose(),o(s)})}stopMonitoring(){this._globalPointerMoveMonitor.stopMonitoring(!0)}};var _L=class{selections;startLineNumber;endLineNumber;relativeVerticalOffset;visibleRange;bigNumbersDelta;whitespaceViewportData;_model;lineHeight;constructor(e,t,n,i){this.selections=e,this.startLineNumber=t.startLineNumber|0,this.endLineNumber=t.endLineNumber|0,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=t.bigNumbersDelta|0,this.lineHeight=t.lineHeight|0,this.whitespaceViewportData=n,this._model=i,this.visibleRange=new D(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}};var wB=class{_restrictedRenderingContextBrand=void 0;viewportData;scrollWidth;scrollHeight;visibleRange;bigNumbersDelta;scrollTop;scrollLeft;viewportWidth;viewportHeight;_viewLayout;constructor(e,t){this._viewLayout=e,this.viewportData=t,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;let n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}},DL=class extends wB{_renderingContextBrand=void 0;_viewLines;constructor(e,t,n){super(e,t),this._viewLines=n}linesVisibleRangesForRange(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}},LL=class{constructor(e,t,n,i){this.outsideRenderedLine=e;this.lineNumber=t;this.ranges=n;this.continuesOnNextLine=i}static firstLine(e){if(!e)return null;let t=null;for(let n of e)(!t||n.lineNumber<t.lineNumber)&&(t=n);return t}static lastLine(e){if(!e)return null;let t=null;for(let n of e)(!t||n.lineNumber>t.lineNumber)&&(t=n);return t}},Ob=class r{_horizontalRangeBrand=void 0;left;width;static from(e){let t=new Array(e.length);for(let n=0,i=e.length;n<i;n++){let o=e[n];t[n]=new r(o.left,o.width)}return t}constructor(e,t){this.left=Math.round(e),this.width=Math.round(t)}toString(){return`[${this.left},${this.width}]`}},gl=class{_floatHorizontalRangeBrand=void 0;left;width;constructor(e,t){this.left=e,this.width=t}toString(){return`[${this.left},${this.width}]`}static compare(e,t){return e.left-t.left}},kL=class{outsideRenderedLine;left;originalLeft;constructor(e,t){this.outsideRenderedLine=e,this.originalLeft=t,this.left=Math.round(this.originalLeft)}},XS=class{constructor(e,t){this.outsideRenderedLine=e;this.ranges=t}};var RL=class{configuration;viewModel;viewLayout;theme;constructor(e,t,n){this.configuration=e,this.theme=new QT(t),this.viewModel=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}};var hn=class extends da{_context;constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}};var zi=class{static write(e,t){e.setAttribute("data-mprt",String(t))}static read(e){let t=e.getAttribute("data-mprt");return t===null?0:parseInt(t,10)}static collect(e,t){let n=[],i=0;for(;e&&e!==e.ownerDocument.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(n[i++]=this.read(e)),e=e.parentElement;let o=new Uint8Array(i);for(let s=0;s<i;s++)o[s]=n[i-s-1];return o}};function Pb(r,e){let t=globalThis.MonacoEnvironment;if(t?.createTrustedTypesPolicy)try{return t.createTrustedTypesPolicy(r,e)}catch(n){Be(n);return}try{return globalThis.trustedTypes?.createPolicy(r,e)}catch(n){Be(n);return}}var QS=class{constructor(e){this._lineFactory=e;this._set(1,[])}_lines;_rendLineNumberStart;flush(){this._set(1,[])}_set(e,t){this._lines=t,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){let t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new st("Illegal value for lineNumber");return this._lines[t]}onLinesDeleted(e,t){if(this.getCount()===0)return null;let n=this.getStartLineNumber(),i=this.getEndLineNumber();if(t<n){let l=t-e+1;return this._rendLineNumberStart-=l,null}if(e>i)return null;let o=0,s=0;for(let l=n;l<=i;l++){let d=l-this._rendLineNumberStart;e<=l&&l<=t&&(s===0?(o=d,s=1):s++)}if(e<n){let l=0;t<n?l=t-e+1:l=n-e,this._rendLineNumberStart-=l}return this._lines.splice(o,s)}onLinesChanged(e,t){let n=e+t-1;if(this.getCount()===0)return!1;let i=this.getStartLineNumber(),o=this.getEndLineNumber(),s=!1;for(let a=e;a<=n;a++)a>=i&&a<=o&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),s=!0);return s}onLinesInserted(e,t){if(this.getCount()===0)return null;let n=t-e+1,i=this.getStartLineNumber(),o=this.getEndLineNumber();if(e<=i)return this._rendLineNumberStart+=n,null;if(e>o)return null;if(n+e>o)return this._lines.splice(e-this._rendLineNumberStart,o-e+1);let s=[];for(let p=0;p<n;p++)s[p]=this._lineFactory.createLine();let a=e-this._rendLineNumberStart,l=this._lines.slice(0,a),d=this._lines.slice(a,this._lines.length-n),c=this._lines.slice(this._lines.length-n,this._lines.length);return this._lines=l.concat(s).concat(d),c}onTokensChanged(e){if(this.getCount()===0)return!1;let t=this.getStartLineNumber(),n=this.getEndLineNumber(),i=!1;for(let o=0,s=e.length;o<s;o++){let a=e[o];if(a.toLineNumber<t||a.fromLineNumber>n)continue;let l=Math.max(t,a.fromLineNumber),d=Math.min(n,a.toLineNumber);for(let c=l;c<=d;c++){let p=c-this._rendLineNumberStart;this._lines[p].onTokensChanged(),i=!0}}return i}},Ab=class{constructor(e){this._lineFactory=e}domNode=this._createDomNode();_linesCollection=new QS(this._lineFactory);_createDomNode(){let e=Ye(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(147)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){let t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,i=t.length;n<i;n++)t[n].getDomNode()?.remove();return!0}onLinesInserted(e){let t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(let n=0,i=t.length;n<i;n++)t[n].getDomNode()?.remove();return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){let t=this._linesCollection._get(),n=new _B(this.domNode.domNode,this._lineFactory,e),i={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},o=n.render(i,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(o.rendLineNumberStart,o.lines)}},_B=class r{constructor(e,t,n){this._domNode=e;this._lineFactory=t;this._viewportData=n}static _ttPolicy=Pb("editorViewLayer",{createHTML:e=>e});render(e,t,n,i){let o={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(o.rendLineNumberStart+o.linesLength-1<t||n<o.rendLineNumberStart){o.rendLineNumberStart=t,o.linesLength=n-t+1,o.lines=[];for(let s=t;s<=n;s++)o.lines[s-t]=this._lineFactory.createLine();return this._finishRendering(o,!0,i),o}if(this._renderUntouchedLines(o,Math.max(t-o.rendLineNumberStart,0),Math.min(n-o.rendLineNumberStart,o.linesLength-1),i,t),o.rendLineNumberStart>t){let s=t,a=Math.min(n,o.rendLineNumberStart-1);s<=a&&(this._insertLinesBefore(o,s,a,i,t),o.linesLength+=a-s+1)}else if(o.rendLineNumberStart<t){let s=Math.min(o.linesLength,t-o.rendLineNumberStart);s>0&&(this._removeLinesBefore(o,s),o.linesLength-=s)}if(o.rendLineNumberStart=t,o.rendLineNumberStart+o.linesLength-1<n){let s=o.rendLineNumberStart+o.linesLength,a=n;s<=a&&(this._insertLinesAfter(o,s,a,i,t),o.linesLength+=a-s+1)}else if(o.rendLineNumberStart+o.linesLength-1>n){let s=Math.max(0,n-o.rendLineNumberStart+1),l=o.linesLength-1-s+1;l>0&&(this._removeLinesAfter(o,l),o.linesLength-=l)}return this._finishRendering(o,!1,i),o}_renderUntouchedLines(e,t,n,i,o){let s=e.rendLineNumberStart,a=e.lines;for(let l=t;l<=n;l++){let d=s+l;a[l].layoutLine(d,i[d-o],this._viewportData.lineHeight)}}_insertLinesBefore(e,t,n,i,o){let s=[],a=0;for(let l=t;l<=n;l++)s[a++]=this._lineFactory.createLine();e.lines=s.concat(e.lines)}_removeLinesBefore(e,t){for(let n=0;n<t;n++)e.lines[n].getDomNode()?.remove();e.lines.splice(0,t)}_insertLinesAfter(e,t,n,i,o){let s=[],a=0;for(let l=t;l<=n;l++)s[a++]=this._lineFactory.createLine();e.lines=e.lines.concat(s)}_removeLinesAfter(e,t){let n=e.linesLength-t;for(let i=0;i<t;i++)e.lines[n+i].getDomNode()?.remove();e.lines.splice(n,t)}_finishRenderingNewLines(e,t,n,i){r._ttPolicy&&(n=r._ttPolicy.createHTML(n));let o=this._domNode.lastChild;t||!o?this._domNode.innerHTML=n:o.insertAdjacentHTML("afterend",n);let s=this._domNode.lastChild;for(let a=e.linesLength-1;a>=0;a--){let l=e.lines[a];i[a]&&(l.setDomNode(s),s=s.previousSibling)}}_finishRenderingInvalidLines(e,t,n){let i=document.createElement("div");r._ttPolicy&&(t=r._ttPolicy.createHTML(t)),i.innerHTML=t;for(let o=0;o<e.linesLength;o++){let s=e.lines[o];if(n[o]){let a=i.firstChild,l=s.getDomNode();l.parentNode.replaceChild(a,l),s.setDomNode(a)}}}static _sb=new Dh(1e5);_finishRendering(e,t,n){let i=r._sb,o=e.linesLength,s=e.lines,a=e.rendLineNumberStart,l=[];{i.reset();let d=!1;for(let c=0;c<o;c++){let p=s[c];l[c]=!1,!(p.getDomNode()||!p.renderLine(c+a,n[c],this._viewportData.lineHeight,this._viewportData,i))&&(l[c]=!0,d=!0)}d&&this._finishRenderingNewLines(e,t,i.build(),l)}{i.reset();let d=!1,c=[];for(let p=0;p<o;p++){let h=s[p];c[p]=!1,!(l[p]||!h.renderLine(p+a,n[p],this._viewportData.lineHeight,this._viewportData,i))&&(c[p]=!0,d=!0)}d&&this._finishRenderingInvalidLines(e,i.build(),c)}}};var Nb=class{constructor(e,t){this._domNode=e;this.endNode=t}_didDomLayout=!1;_clientRectDeltaLeft=0;_clientRectScale=1;_clientRectRead=!1;get didDomLayout(){return this._didDomLayout}readClientRect(){if(!this._clientRectRead){this._clientRectRead=!0;let e=this._domNode.getBoundingClientRect();this.markDidDomLayout(),this._clientRectDeltaLeft=e.left,this._clientRectScale=e.width/this._domNode.offsetWidth}}get clientRectDeltaLeft(){return this._clientRectRead||this.readClientRect(),this._clientRectDeltaLeft}get clientRectScale(){return this._clientRectRead||this.readClientRect(),this._clientRectScale}markDidDomLayout(){this._didDomLayout=!0}};var Eg=class{static _handyReadyRange;static _createRange(){return this._handyReadyRange||(this._handyReadyRange=document.createRange()),this._handyReadyRange}static _detachRange(e,t){e.selectNodeContents(t)}static _readClientRects(e,t,n,i,o){let s=this._createRange();try{return s.setStart(e,t),s.setEnd(n,i),s.getClientRects()}catch{return null}finally{this._detachRange(s,o)}}static _mergeAdjacentRanges(e){if(e.length===1)return e;e.sort(gl.compare);let t=[],n=0,i=e[0];for(let o=1,s=e.length;o<s;o++){let a=e[o];i.left+i.width+.9>=a.left?i.width=Math.max(i.width,a.left+a.width-i.left):(t[n++]=i,i=a)}return t[n++]=i,t}static _createHorizontalRangesFromClientRects(e,t,n){if(!e||e.length===0)return null;let i=[];for(let o=0,s=e.length;o<s;o++){let a=e[o];i[o]=new gl(Math.max(0,(a.left-t)/n),a.width/n)}return this._mergeAdjacentRanges(i)}static readHorizontalRanges(e,t,n,i,o,s){let l=e.children.length-1;if(0>l)return null;if(t=Math.min(l,Math.max(0,t)),i=Math.min(l,Math.max(0,i)),t===i&&n===o&&n===0&&!e.children[t].firstChild){let h=e.children[t].getClientRects();return s.markDidDomLayout(),this._createHorizontalRangesFromClientRects(h,s.clientRectDeltaLeft,s.clientRectScale)}t!==i&&i>0&&o===0&&(i--,o=1073741824);let d=e.children[t].firstChild,c=e.children[i].firstChild;if((!d||!c)&&(!d&&n===0&&t>0&&(d=e.children[t-1].firstChild,n=1073741824),!c&&o===0&&i>0&&(c=e.children[i-1].firstChild,o=1073741824)),!d||!c)return null;n=Math.min(d.textContent.length,Math.max(0,n)),o=Math.min(c.textContent.length,Math.max(0,o));let p=this._readClientRects(d,n,c,o,s.endNode);return s.markDidDomLayout(),this._createHorizontalRangesFromClientRects(p,s.clientRectDeltaLeft,s.clientRectScale)}};var Zn=class{constructor(e,t,n,i){this.endIndex=e;this.type=t;this.metadata=n;this.containsRTL=i}_linePartBrand=void 0;isWhitespace(){return!!(this.metadata&1)}isPseudoAfter(){return!!(this.metadata&4)}};var Hc=class r{constructor(e,t,n,i){this.startColumn=e;this.endColumn=t;this.className=n;this.type=i}_lineDecorationBrand=void 0;static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){let n=e.length,i=t.length;if(n!==i)return!1;for(let o=0;o<n;o++)if(!r._equals(e[o],t[o]))return!1;return!0}static extractWrapped(e,t,n){if(e.length===0)return e;let i=t+1,o=n+1,s=n-t,a=[],l=0;for(let d of e)d.endColumn<=i||d.startColumn>=o||(a[l++]=new r(Math.max(1,d.startColumn-i+1),Math.min(s+1,d.endColumn-i+1),d.className,d.type));return a}static filter(e,t,n,i){if(e.length===0)return[];let o=[],s=0;for(let a=0,l=e.length;a<l;a++){let d=e[a],c=d.range;if(c.endLineNumber<t||c.startLineNumber>t||c.isEmpty()&&(d.type===0||d.type===3))continue;let p=c.startLineNumber===t?c.startColumn:n,h=c.endLineNumber===t?c.endColumn:i;o[s++]=new r(p,h,d.inlineClassName,d.type)}return o}static _typeCompare(e,t){let n=[2,0,1,3];return n[e]-n[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;let n=r._typeCompare(e.type,t.type);return n!==0?n:e.className!==t.className?e.className<t.className?-1:1:0}},ML=class{startOffset;endOffset;className;metadata;constructor(e,t,n,i){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=i}},DB=class r{count;stopOffsets;classNames;metadata;constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,i=e.length;n<i;n++)t|=e[n];return t}consumeLowerThan(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){let i=0;for(;i+1<this.count&&this.stopOffsets[i]===this.stopOffsets[i+1];)i++;n.push(new ML(t,this.stopOffsets[i],this.classNames.join(" "),r._metadata(this.metadata))),t=this.stopOffsets[i]+1,this.stopOffsets.splice(0,i+1),this.classNames.splice(0,i+1),this.metadata.splice(0,i+1),this.count-=i+1}return this.count>0&&t<e&&(n.push(new ML(t,e-1,this.classNames.join(" "),r._metadata(this.metadata))),t=e),t}insert(e,t,n){if(this.count===0||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let i=0;i<this.count;i++)if(this.stopOffsets[i]>=e){this.stopOffsets.splice(i,0,e),this.classNames.splice(i,0,t),this.metadata.splice(i,0,n);break}this.count++}},OL=class{static normalize(e,t){if(t.length===0)return[];let n=[],i=new DB,o=0;for(let s=0,a=t.length;s<a;s++){let l=t[s],d=l.startColumn,c=l.endColumn,p=l.className,h=l.type===1?2:l.type===2?4:0;if(d>1){let m=e.charCodeAt(d-2);mn(m)&&d--}if(c>1){let m=e.charCodeAt(c-2);mn(m)&&c--}let g=d-1,f=c-2;o=i.consumeLowerThan(g,o,n),i.count===0&&(o=g),i.insert(f,p,h)}return i.consumeLowerThan(1073741824,o,n),n}};var Fb=class{startOffset;endOffset;constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}},PL=class{useMonospaceOptimizations;canUseHalfwidthRightwardsArrow;lineContent;continuesWithWrappedLine;isBasicASCII;containsRTL;fauxIndentLength;lineTokens;lineDecorations;tabSize;startVisibleColumn;spaceWidth;renderSpaceWidth;renderSpaceCharCode;stopRenderingLineAfter;renderWhitespace;renderControlCharacters;fontLigatures;selectionsOnLine;constructor(e,t,n,i,o,s,a,l,d,c,p,h,g,f,m,b,v,S,x){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=i,this.isBasicASCII=o,this.containsRTL=s,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=d.sort(Hc.compare),this.tabSize=c,this.startVisibleColumn=p,this.spaceWidth=h,this.stopRenderingLineAfter=m,this.renderWhitespace=b==="all"?4:b==="boundary"?1:b==="selection"?2:b==="trailing"?3:0,this.renderControlCharacters=v,this.fontLigatures=S,this.selectionsOnLine=x&&x.sort((P,R)=>P.startOffset<R.startOffset?-1:1);let E=Math.abs(f-h),w=Math.abs(g-h);E<w?(this.renderSpaceWidth=f,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=g,this.renderSpaceCharCode=183)}sameSelection(e){if(this.selectionsOnLine===null)return e===null;if(e===null||e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&Hc.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}};var ZS=class{constructor(e,t){this.partIndex=e;this.charIndex=t}},JS=class r{static getPartIndex(e){return(e&4294901760)>>>16}static getCharIndex(e){return(e&65535)>>>0}length;_data;_horizontalOffset;constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(e,t,n,i){let o=(t<<16|n<<0)>>>0;this._data[e-1]=o,this._horizontalOffset[e-1]=i}getHorizontalOffset(e){return this._horizontalOffset.length===0?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return this.length===0?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){let t=this.charOffsetToPartData(e-1),n=r.getPartIndex(t),i=r.getCharIndex(t);return new ZS(n,i)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,n){if(this.length===0)return 0;let i=(e<<16|n<<0)>>>0,o=0,s=this.length-1;for(;o+1<s;){let m=o+s>>>1,b=this._data[m];if(b===i)return m;b>i?s=m:o=m}if(o===s)return o;let a=this._data[o],l=this._data[s];if(a===i)return o;if(l===i)return s;let d=r.getPartIndex(a),c=r.getCharIndex(a),p=r.getPartIndex(l),h;d!==p?h=t:h=r.getCharIndex(l);let g=n-c,f=h-n;return g<=f?o:s}inflate(){let e=[];for(let t=0;t<this.length;t++){let n=this._data[t],i=r.getPartIndex(n),o=r.getCharIndex(n),s=this._horizontalOffset[t];e.push([i,o,s])}return e}};var eC=class{_renderLineOutputBrand=void 0;characterMapping;containsRTL;containsForeignElements;constructor(e,t,n){this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}};function N9(r,e){if(r.lineContent.length===0){if(r.lineDecorations.length>0){e.appendString("<span>");let t=0,n=0,i=0;for(let s of r.lineDecorations)(s.type===1||s.type===2)&&(e.appendString('<span class="'),e.appendString(s.className),e.appendString('"></span>'),s.type===1&&(i|=1,t++),s.type===2&&(i|=2,n++));e.appendString("</span>");let o=new JS(1,t+n);return o.setColumnInfo(1,t,0,0),new eC(o,!1,i)}return e.appendString("<span><span></span></span>"),new eC(new JS(0,0),!1,0)}return KZ(BZ(r),e)}var kB=class{constructor(e,t,n,i,o,s,a,l,d,c,p,h,g,f,m,b){this.fontIsMonospace=e;this.canUseHalfwidthRightwardsArrow=t;this.lineContent=n;this.len=i;this.isOverflowing=o;this.overflowingCharCount=s;this.parts=a;this.containsForeignElements=l;this.fauxIndentLength=d;this.tabSize=c;this.startVisibleColumn=p;this.containsRTL=h;this.spaceWidth=g;this.renderSpaceCharCode=f;this.renderWhitespace=m;this.renderControlCharacters=b}};function BZ(r){let e=r.lineContent,t,n,i;r.stopRenderingLineAfter!==-1&&r.stopRenderingLineAfter<e.length?(t=!0,n=e.length-r.stopRenderingLineAfter,i=r.stopRenderingLineAfter):(t=!1,n=0,i=e.length);let o=WZ(e,r.containsRTL,r.lineTokens,r.fauxIndentLength,i);r.renderControlCharacters&&!r.isBasicASCII&&(o=HZ(e,o)),(r.renderWhitespace===4||r.renderWhitespace===1||r.renderWhitespace===2&&r.selectionsOnLine||r.renderWhitespace===3&&!r.continuesWithWrappedLine)&&(o=UZ(r,e,i,o));let s=0;if(r.lineDecorations.length>0){for(let a=0,l=r.lineDecorations.length;a<l;a++){let d=r.lineDecorations[a];d.type===3||d.type===1?s|=1:d.type===2&&(s|=2)}o=zZ(e,i,o,r.lineDecorations)}return r.containsRTL||(o=VZ(e,o,!r.isBasicASCII||r.fontLigatures)),new kB(r.useMonospaceOptimizations,r.canUseHalfwidthRightwardsArrow,e,i,t,n,o,s,r.fauxIndentLength,r.tabSize,r.startVisibleColumn,r.containsRTL,r.spaceWidth,r.renderSpaceCharCode,r.renderWhitespace,r.renderControlCharacters)}function WZ(r,e,t,n,i){let o=[],s=0;n>0&&(o[s++]=new Zn(n,"",0,!1));let a=n;for(let l=0,d=t.getCount();l<d;l++){let c=t.getEndOffset(l);if(c<=n)continue;let p=t.getClassName(l);if(c>=i){let g=e?ic(r.substring(a,i)):!1;o[s++]=new Zn(i,p,0,g);break}let h=e?ic(r.substring(a,c)):!1;o[s++]=new Zn(c,p,0,h),a=c}return o}function VZ(r,e,t){let n=0,i=[],o=0;if(t)for(let s=0,a=e.length;s<a;s++){let l=e[s],d=l.endIndex;if(n+50<d){let c=l.type,p=l.metadata,h=l.containsRTL,g=-1,f=n;for(let m=n;m<d;m++)r.charCodeAt(m)===32&&(g=m),g!==-1&&m-f>=50&&(i[o++]=new Zn(g+1,c,p,h),f=g+1,g=-1);f!==d&&(i[o++]=new Zn(d,c,p,h))}else i[o++]=l;n=d}else for(let s=0,a=e.length;s<a;s++){let l=e[s],d=l.endIndex,c=d-n;if(c>50){let p=l.type,h=l.metadata,g=l.containsRTL,f=Math.ceil(c/50);for(let m=1;m<f;m++){let b=n+m*50;i[o++]=new Zn(b,p,h,g)}i[o++]=new Zn(d,p,h,g)}else i[o++]=l;n=d}return i}function F9(r){return r<32?r!==9:r===127||r>=8234&&r<=8238||r>=8294&&r<=8297||r>=8206&&r<=8207||r===1564}function HZ(r,e){let t=[],n=new Zn(0,"",0,!1),i=0;for(let o of e){let s=o.endIndex;for(;i<s;i++){let a=r.charCodeAt(i);F9(a)&&(i>n.endIndex&&(n=new Zn(i,o.type,o.metadata,o.containsRTL),t.push(n)),n=new Zn(i+1,"mtkcontrol",o.metadata,!1),t.push(n))}i>n.endIndex&&(n=new Zn(s,o.type,o.metadata,o.containsRTL),t.push(n))}return t}function UZ(r,e,t,n){let i=r.continuesWithWrappedLine,o=r.fauxIndentLength,s=r.tabSize,a=r.startVisibleColumn,l=r.useMonospaceOptimizations,d=r.selectionsOnLine,c=r.renderWhitespace===1,p=r.renderWhitespace===3,h=r.renderSpaceWidth!==r.spaceWidth,g=[],f=0,m=0,b=n[m].type,v=n[m].containsRTL,S=n[m].endIndex,x=n.length,E=!1,w=kn(e),P;w===-1?(E=!0,w=t,P=t):P=Ds(e);let R=!1,O=0,M=d&&d[O],K=a%s;for(let Q=o;Q<t;Q++){let he=e.charCodeAt(Q);M&&Q>=M.endOffset&&(O++,M=d&&d[O]);let De;if(Q<w||Q>P)De=!0;else if(he===9)De=!0;else if(he===32)if(c)if(R)De=!0;else{let ce=Q+1<t?e.charCodeAt(Q+1):0;De=ce===32||ce===9}else De=!0;else De=!1;if(De&&d&&(De=!!M&&M.startOffset<=Q&&M.endOffset>Q),De&&p&&(De=E||Q>P),De&&v&&Q>=w&&Q<=P&&(De=!1),R){if(!De||!l&&K>=s){if(h){let ce=f>0?g[f-1].endIndex:o;for(let se=ce+1;se<=Q;se++)g[f++]=new Zn(se,"mtkw",1,!1)}else g[f++]=new Zn(Q,"mtkw",1,!1);K=K%s}}else(Q===S||De&&Q>o)&&(g[f++]=new Zn(Q,b,0,v),K=K%s);for(he===9?K=s:Ls(he)?K+=2:K++,R=De;Q===S&&(m++,m<x);)b=n[m].type,v=n[m].containsRTL,S=n[m].endIndex}let $=!1;if(R)if(i&&c){let Q=t>0?e.charCodeAt(t-1):0,he=t>1?e.charCodeAt(t-2):0;Q===32&&he!==32&&he!==9||($=!0)}else $=!0;if($)if(h){let Q=f>0?g[f-1].endIndex:o;for(let he=Q+1;he<=t;he++)g[f++]=new Zn(he,"mtkw",1,!1)}else g[f++]=new Zn(t,"mtkw",1,!1);else g[f++]=new Zn(t,b,0,v);return g}function zZ(r,e,t,n){n.sort(Hc.compare);let i=OL.normalize(r,n),o=i.length,s=0,a=[],l=0,d=0;for(let p=0,h=t.length;p<h;p++){let g=t[p],f=g.endIndex,m=g.type,b=g.metadata,v=g.containsRTL;for(;s<o&&i[s].startOffset<f;){let S=i[s];if(S.startOffset>d&&(d=S.startOffset,a[l++]=new Zn(d,m,b,v)),S.endOffset+1<=f)d=S.endOffset+1,a[l++]=new Zn(d,m+" "+S.className,b|S.metadata,v),s++;else{d=f,a[l++]=new Zn(d,m+" "+S.className,b|S.metadata,v);break}}f>d&&(d=f,a[l++]=new Zn(d,m,b,v))}let c=t[t.length-1].endIndex;if(s<o&&i[s].startOffset===c)for(;s<o&&i[s].startOffset===c;){let p=i[s];a[l++]=new Zn(d,p.className,p.metadata,!1),s++}return a}function KZ(r,e){let t=r.fontIsMonospace,n=r.canUseHalfwidthRightwardsArrow,i=r.containsForeignElements,o=r.lineContent,s=r.len,a=r.isOverflowing,l=r.overflowingCharCount,d=r.parts,c=r.fauxIndentLength,p=r.tabSize,h=r.startVisibleColumn,g=r.containsRTL,f=r.spaceWidth,m=r.renderSpaceCharCode,b=r.renderWhitespace,v=r.renderControlCharacters,S=new JS(s+1,d.length),x=!1,E=0,w=h,P=0,R=0,O=0;g?e.appendString('<span dir="ltr">'):e.appendString("<span>");for(let M=0,K=d.length;M<K;M++){let $=d[M],Q=$.endIndex,he=$.type,De=$.containsRTL,ce=b!==0&&$.isWhitespace(),se=ce&&!t&&(he==="mtkw"||!i),fe=E===Q&&$.isPseudoAfter();if(P=0,e.appendString("<span "),De&&e.appendString('style="unicode-bidi:isolate" '),e.appendString('class="'),e.appendString(se?"mtkz":he),e.appendASCIICharCode(34),ce){let ue=0;{let ae=E,ke=w;for(;ae<Q;ae++){let wt=(o.charCodeAt(ae)===9?p-ke%p:1)|0;ue+=wt,ae>=c&&(ke+=wt)}}for(se&&(e.appendString(' style="width:'),e.appendString(String(f*ue)),e.appendString('px"')),e.appendASCIICharCode(62);E<Q;E++){S.setColumnInfo(E+1,M-O,P,R),O=0;let ae=o.charCodeAt(E),ke,Re;if(ae===9){ke=p-w%p|0,Re=ke,!n||Re>1?e.appendCharCode(8594):e.appendCharCode(65515);for(let wt=2;wt<=Re;wt++)e.appendCharCode(160)}else ke=2,Re=1,e.appendCharCode(m),e.appendCharCode(8204);P+=ke,R+=Re,E>=c&&(w+=Re)}}else for(e.appendASCIICharCode(62);E<Q;E++){S.setColumnInfo(E+1,M-O,P,R),O=0;let ue=o.charCodeAt(E),ae=1,ke=1;switch(ue){case 9:ae=p-w%p,ke=ae;for(let Re=1;Re<=ae;Re++)e.appendCharCode(160);break;case 32:e.appendCharCode(160);break;case 60:e.appendString("&lt;");break;case 62:e.appendString("&gt;");break;case 38:e.appendString("&amp;");break;case 0:v?e.appendCharCode(9216):e.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:e.appendCharCode(65533);break;default:Ls(ue)&&ke++,v&&ue<32?e.appendCharCode(9216+ue):v&&ue===127?e.appendCharCode(9249):v&&F9(ue)?(e.appendString("[U+"),e.appendString(GZ(ue)),e.appendString("]"),ae=8,ke=ae):e.appendCharCode(ue)}P+=ae,R+=ke,E>=c&&(w+=ke)}fe?O++:O=0,E>=s&&!x&&$.isPseudoAfter()&&(x=!0,S.setColumnInfo(E+1,M,P,R)),e.appendString("</span>")}return x||S.setColumnInfo(s+1,d.length-1,P,R),a&&(e.appendString('<span class="mtkoverflow">'),e.appendString(u("showMore","Show more ({0})",jZ(l))),e.appendString("</span>")),e.appendString("</span>"),new eC(S,g,i)}function GZ(r){return r.toString(16).toUpperCase().padStart(4,"0")}function jZ(r){return r<1024?u("overflow.chars","{0} chars",r):r<1024*1024?`${(r/1024).toFixed(1)} KB`:`${(r/1024/1024).toFixed(1)} MB`}var $Z=function(){return Ol?!0:!(Xt||yi||Or)}(),Wb=!0,tC=class{themeType;renderWhitespace;renderControlCharacters;spaceWidth;middotWidth;wsmiddotWidth;useMonospaceOptimizations;canUseHalfwidthRightwardsArrow;lineHeight;stopRenderingLineAfter;fontLigatures;constructor(e,t){this.themeType=t;let n=e.options,i=n.get(51);n.get(39)==="off"?this.renderWhitespace=n.get(101):this.renderWhitespace="none",this.renderControlCharacters=n.get(96),this.spaceWidth=i.spaceWidth,this.middotWidth=i.middotWidth,this.wsmiddotWidth=i.wsmiddotWidth,this.useMonospaceOptimizations=i.isMonospace&&!n.get(33),this.canUseHalfwidthRightwardsArrow=i.canUseHalfwidthRightwardsArrow,this.lineHeight=n.get(68),this.stopRenderingLineAfter=n.get(119),this.fontLigatures=n.get(52)}equals(e){return this.themeType===e.themeType&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.fontLigatures===e.fontLigatures}},ml=class r{static CLASS_NAME="view-line";_options;_isMaybeInvalid;_renderedViewLine;constructor(e){this._options=e,this._isMaybeInvalid=!0,this._renderedViewLine=null}getDomNode(){return this._renderedViewLine&&this._renderedViewLine.domNode?this._renderedViewLine.domNode.domNode:null}setDomNode(e){if(this._renderedViewLine)this._renderedViewLine.domNode=Ye(e);else throw new Error("I have no rendered view line to set the dom node to...")}onContentChanged(){this._isMaybeInvalid=!0}onTokensChanged(){this._isMaybeInvalid=!0}onDecorationsChanged(){this._isMaybeInvalid=!0}onOptionsChanged(e){this._isMaybeInvalid=!0,this._options=e}onSelectionChanged(){return id(this._options.themeType)||this._options.renderWhitespace==="selection"?(this._isMaybeInvalid=!0,!0):!1}renderLine(e,t,n,i,o){if(this._isMaybeInvalid===!1)return!1;this._isMaybeInvalid=!1;let s=i.getViewLineRenderingData(e),a=this._options,l=Hc.filter(s.inlineDecorations,e,s.minColumn,s.maxColumn),d=null;if(id(a.themeType)||this._options.renderWhitespace==="selection"){let g=i.selections;for(let f of g){if(f.endLineNumber<e||f.startLineNumber>e)continue;let m=f.startLineNumber===e?f.startColumn:s.minColumn,b=f.endLineNumber===e?f.endColumn:s.maxColumn;m<b&&(id(a.themeType)&&l.push(new Hc(m,b,"inline-selected-text",0)),this._options.renderWhitespace==="selection"&&(d||(d=[]),d.push(new Fb(m-1,b-1))))}}let c=new PL(a.useMonospaceOptimizations,a.canUseHalfwidthRightwardsArrow,s.content,s.continuesWithWrappedLine,s.isBasicASCII,s.containsRTL,s.minColumn-1,s.tokens,l,s.tabSize,s.startVisibleColumn,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,a.stopRenderingLineAfter,a.renderWhitespace,a.renderControlCharacters,a.fontLigatures!==Ch.OFF,d);if(this._renderedViewLine&&this._renderedViewLine.input.equals(c))return!1;o.appendString('<div style="top:'),o.appendString(String(t)),o.appendString("px;height:"),o.appendString(String(n)),o.appendString('px;" class="'),o.appendString(r.CLASS_NAME),o.appendString('">');let p=N9(c,o);o.appendString("</div>");let h=null;return Wb&&$Z&&s.isBasicASCII&&a.useMonospaceOptimizations&&p.containsForeignElements===0&&(h=new Bb(this._renderedViewLine?this._renderedViewLine.domNode:null,c,p.characterMapping)),h||(h=B9(this._renderedViewLine?this._renderedViewLine.domNode:null,c,p.characterMapping,p.containsRTL,p.containsForeignElements)),this._renderedViewLine=h,!0}layoutLine(e,t,n){this._renderedViewLine&&this._renderedViewLine.domNode&&(this._renderedViewLine.domNode.setTop(t),this._renderedViewLine.domNode.setHeight(n))}getWidth(e){return this._renderedViewLine?this._renderedViewLine.getWidth(e):0}getWidthIsFast(){return this._renderedViewLine?this._renderedViewLine.getWidthIsFast():!0}needsMonospaceFontCheck(){return this._renderedViewLine?this._renderedViewLine instanceof Bb:!1}monospaceAssumptionsAreValid(){return this._renderedViewLine&&this._renderedViewLine instanceof Bb?this._renderedViewLine.monospaceAssumptionsAreValid():Wb}onMonospaceAssumptionsInvalidated(){this._renderedViewLine&&this._renderedViewLine instanceof Bb&&(this._renderedViewLine=this._renderedViewLine.toSlowRenderedLine())}getVisibleRangesForRange(e,t,n,i){if(!this._renderedViewLine)return null;t=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,t)),n=Math.min(this._renderedViewLine.input.lineContent.length+1,Math.max(1,n));let o=this._renderedViewLine.input.stopRenderingLineAfter;if(o!==-1&&t>o+1&&n>o+1)return new XS(!0,[new gl(this.getWidth(i),0)]);o!==-1&&t>o+1&&(t=o+1),o!==-1&&n>o+1&&(n=o+1);let s=this._renderedViewLine.getVisibleRangesForRange(e,t,n,i);return s&&s.length>0?new XS(!1,s):null}getColumnOfNodeOffset(e,t){return this._renderedViewLine?this._renderedViewLine.getColumnOfNodeOffset(e,t):1}};var Bb=class{domNode;input;_characterMapping;_charWidth;_keyColumnPixelOffsetCache;_cachedWidth=-1;constructor(e,t,n){this.domNode=e,this.input=t;let i=Math.floor(t.lineContent.length/300);if(i>0){this._keyColumnPixelOffsetCache=new Float32Array(i);for(let o=0;o<i;o++)this._keyColumnPixelOffsetCache[o]=-1}else this._keyColumnPixelOffsetCache=null;this._characterMapping=n,this._charWidth=t.spaceWidth}getWidth(e){if(!this.domNode||this.input.lineContent.length<300){let t=this._characterMapping.getHorizontalOffset(this._characterMapping.length);return Math.round(this._charWidth*t)}return this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e?.markDidDomLayout()),this._cachedWidth}getWidthIsFast(){return this.input.lineContent.length<300||this._cachedWidth!==-1}monospaceAssumptionsAreValid(){if(!this.domNode)return Wb;if(this.input.lineContent.length<300){let e=this.getWidth(null),t=this.domNode.domNode.firstChild.offsetWidth;Math.abs(e-t)>=2&&(console.warn("monospace assumptions have been violated, therefore disabling monospace optimizations!"),Wb=!1)}return Wb}toSlowRenderedLine(){return B9(this.domNode,this.input,this._characterMapping,!1,0)}getVisibleRangesForRange(e,t,n,i){let o=this._getColumnPixelOffset(e,t,i),s=this._getColumnPixelOffset(e,n,i);return[new gl(o,s-o)]}_getColumnPixelOffset(e,t,n){if(t<=300){let d=this._characterMapping.getHorizontalOffset(t);return this._charWidth*d}let i=Math.floor((t-1)/300)-1,o=(i+1)*300+1,s=-1;if(this._keyColumnPixelOffsetCache&&(s=this._keyColumnPixelOffsetCache[i],s===-1&&(s=this._actualReadPixelOffset(e,o,n),this._keyColumnPixelOffsetCache[i]=s)),s===-1){let d=this._characterMapping.getHorizontalOffset(t);return this._charWidth*d}let a=this._characterMapping.getHorizontalOffset(o),l=this._characterMapping.getHorizontalOffset(t);return s+this._charWidth*(l-a)}_getReadingTarget(e){return e.domNode.firstChild}_actualReadPixelOffset(e,t,n){if(!this.domNode)return-1;let i=this._characterMapping.getDomPosition(t),o=Eg.readHorizontalRanges(this._getReadingTarget(this.domNode),i.partIndex,i.charIndex,i.partIndex,i.charIndex,n);return!o||o.length===0?-1:o[0].left}getColumnOfNodeOffset(e,t){return W9(this._characterMapping,e,t)}},AL=class{domNode;input;_characterMapping;_isWhitespaceOnly;_containsForeignElements;_cachedWidth;_pixelOffsetCache;constructor(e,t,n,i,o){if(this.domNode=e,this.input=t,this._characterMapping=n,this._isWhitespaceOnly=/^\s*$/.test(t.lineContent),this._containsForeignElements=o,this._cachedWidth=-1,this._pixelOffsetCache=null,!i||this._characterMapping.length===0){this._pixelOffsetCache=new Float32Array(Math.max(2,this._characterMapping.length+1));for(let s=0,a=this._characterMapping.length;s<=a;s++)this._pixelOffsetCache[s]=-1}}_getReadingTarget(e){return e.domNode.firstChild}getWidth(e){return this.domNode?(this._cachedWidth===-1&&(this._cachedWidth=this._getReadingTarget(this.domNode).offsetWidth,e?.markDidDomLayout()),this._cachedWidth):0}getWidthIsFast(){return this._cachedWidth!==-1}getVisibleRangesForRange(e,t,n,i){if(!this.domNode)return null;if(this._pixelOffsetCache!==null){let o=this._readPixelOffset(this.domNode,e,t,i);if(o===-1)return null;let s=this._readPixelOffset(this.domNode,e,n,i);return s===-1?null:[new gl(o,s-o)]}return this._readVisibleRangesForRange(this.domNode,e,t,n,i)}_readVisibleRangesForRange(e,t,n,i,o){if(n===i){let s=this._readPixelOffset(e,t,n,o);return s===-1?null:[new gl(s,0)]}else return this._readRawVisibleRangesForRange(e,n,i,o)}_readPixelOffset(e,t,n,i){if(this._characterMapping.length===0){if(this._containsForeignElements===0||this._containsForeignElements===2)return 0;if(this._containsForeignElements===1)return this.getWidth(i);let o=this._getReadingTarget(e);return o.firstChild?(i.markDidDomLayout(),o.firstChild.offsetWidth):0}if(this._pixelOffsetCache!==null){let o=this._pixelOffsetCache[n];if(o!==-1)return o;let s=this._actualReadPixelOffset(e,t,n,i);return this._pixelOffsetCache[n]=s,s}return this._actualReadPixelOffset(e,t,n,i)}_actualReadPixelOffset(e,t,n,i){if(this._characterMapping.length===0){let l=Eg.readHorizontalRanges(this._getReadingTarget(e),0,0,0,0,i);return!l||l.length===0?-1:l[0].left}if(n===this._characterMapping.length&&this._isWhitespaceOnly&&this._containsForeignElements===0)return this.getWidth(i);let o=this._characterMapping.getDomPosition(n),s=Eg.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,o.partIndex,o.charIndex,i);if(!s||s.length===0)return-1;let a=s[0].left;if(this.input.isBasicASCII){let l=this._characterMapping.getHorizontalOffset(n),d=Math.round(this.input.spaceWidth*l);if(Math.abs(d-a)<=1)return d}return a}_readRawVisibleRangesForRange(e,t,n,i){if(t===1&&n===this._characterMapping.length)return[new gl(0,this.getWidth(i))];let o=this._characterMapping.getDomPosition(t),s=this._characterMapping.getDomPosition(n);return Eg.readHorizontalRanges(this._getReadingTarget(e),o.partIndex,o.charIndex,s.partIndex,s.charIndex,i)}getColumnOfNodeOffset(e,t){return W9(this._characterMapping,e,t)}},RB=class extends AL{_readVisibleRangesForRange(e,t,n,i,o){let s=super._readVisibleRangesForRange(e,t,n,i,o);if(!s||s.length===0||n===i||n===1&&i===this._characterMapping.length)return s;if(!this.input.containsRTL){let a=this._readPixelOffset(e,t,i,o);if(a!==-1){let l=s[s.length-1];l.left<a&&(l.width=a-l.left)}}return s}},B9=function(){return Pa?qZ:YZ}();function qZ(r,e,t,n,i){return new RB(r,e,t,n,i)}function YZ(r,e,t,n,i){return new AL(r,e,t,n,i)}function W9(r,e,t){let n=e.textContent.length,i=-1;for(;e;)e=e.previousSibling,i++;return r.getColumn(new ZS(i,t),n)}var Uc="monaco-mouse-cursor-text";var NL=class{constructor(e,t,n,i,o,s,a){this.top=e;this.left=t;this.paddingLeft=n;this.width=i;this.height=o;this.textContent=s;this.textContentClassName=a}};var nC=class{_context;_domNode;_cursorStyle;_lineCursorWidth;_lineHeight;_typicalHalfwidthCharacterWidth;_isVisible;_position;_pluralityClass;_lastRenderedContent;_renderData;constructor(e,t){this._context=e;let n=this._context.configuration.options,i=n.get(51);this._cursorStyle=n.get(28),this._lineHeight=n.get(68),this._typicalHalfwidthCharacterWidth=i.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(n.get(31),this._typicalHalfwidthCharacterWidth),this._isVisible=!0,this._domNode=Ye(document.createElement("div")),this._domNode.setClassName(`cursor ${Uc}`),this._domNode.setHeight(this._lineHeight),this._domNode.setTop(0),this._domNode.setLeft(0),Un(this._domNode,i),this._domNode.setDisplay("none"),this._position=new F(1,1),this._pluralityClass="",this.setPlurality(t),this._lastRenderedContent="",this._renderData=null}getDomNode(){return this._domNode}getPosition(){return this._position}setPlurality(e){switch(e){default:case 0:this._pluralityClass="";break;case 1:this._pluralityClass="cursor-primary";break;case 2:this._pluralityClass="cursor-secondary";break}}show(){this._isVisible||(this._domNode.setVisibility("inherit"),this._isVisible=!0)}hide(){this._isVisible&&(this._domNode.setVisibility("hidden"),this._isVisible=!1)}onConfigurationChanged(e){let t=this._context.configuration.options,n=t.get(51);return this._cursorStyle=t.get(28),this._lineHeight=t.get(68),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._lineCursorWidth=Math.min(t.get(31),this._typicalHalfwidthCharacterWidth),Un(this._domNode,n),!0}onCursorPositionChanged(e,t){return t?this._domNode.domNode.style.transitionProperty="none":this._domNode.domNode.style.transitionProperty="",this._position=e,!0}_getGraphemeAwarePosition(){let{lineNumber:e,column:t}=this._position,n=this._context.viewModel.getLineContent(e),[i,o]=Wx(n,t-1);return[new F(e,i+1),n.substring(i,o)]}_prepareRender(e){let t="",n="",[i,o]=this._getGraphemeAwarePosition();if(this._cursorStyle===1||this._cursorStyle===4){let h=e.visibleRangeForPosition(i);if(!h||h.outsideRenderedLine)return null;let g=Ee(this._domNode.domNode),f;this._cursorStyle===1?(f=$1(g,this._lineCursorWidth>0?this._lineCursorWidth:2),f>2&&(t=o,n=this._getTokenClassName(i))):f=$1(g,1);let m=h.left,b=0;f>=2&&m>=1&&(b=1,m-=b);let v=e.getVerticalOffsetForLineNumber(i.lineNumber)-e.bigNumbersDelta;return new NL(v,m,b,f,this._lineHeight,t,n)}let s=e.linesVisibleRangesForRange(new D(i.lineNumber,i.column,i.lineNumber,i.column+o.length),!1);if(!s||s.length===0)return null;let a=s[0];if(a.outsideRenderedLine||a.ranges.length===0)return null;let l=a.ranges[0],d=o==="	"?this._typicalHalfwidthCharacterWidth:l.width<1?this._typicalHalfwidthCharacterWidth:l.width;this._cursorStyle===2&&(t=o,n=this._getTokenClassName(i));let c=e.getVerticalOffsetForLineNumber(i.lineNumber)-e.bigNumbersDelta,p=this._lineHeight;return(this._cursorStyle===3||this._cursorStyle===6)&&(c+=this._lineHeight-2,p=2),new NL(c,l.left,0,d,p,t,n)}_getTokenClassName(e){let t=this._context.viewModel.getViewLineData(e.lineNumber),n=t.tokens.findTokenIndexAtOffset(e.column-1);return t.tokens.getClassName(n)}prepareRender(e){this._renderData=this._prepareRender(e)}render(e){return this._renderData?(this._lastRenderedContent!==this._renderData.textContent&&(this._lastRenderedContent=this._renderData.textContent,this._domNode.domNode.textContent=this._lastRenderedContent),this._domNode.setClassName(`cursor ${this._pluralityClass} ${Uc} ${this._renderData.textContentClassName}`),this._domNode.setDisplay("block"),this._domNode.setTop(this._renderData.top),this._domNode.setLeft(this._renderData.left),this._domNode.setPaddingLeft(this._renderData.paddingLeft),this._domNode.setWidth(this._renderData.width),this._domNode.setLineHeight(this._renderData.height),this._domNode.setHeight(this._renderData.height),{domNode:this._domNode.domNode,position:this._position,contentLeft:this._renderData.left,height:this._renderData.height,width:2}):(this._domNode.setDisplay("none"),null)}};var Tg=class r{static whitespaceVisibleColumn(e,t,n){let i=e.length,o=0,s=-1,a=-1;for(let l=0;l<i;l++){if(l===t)return[s,a,o];switch(o%n===0&&(s=l,a=o),e.charCodeAt(l)){case 32:o+=1;break;case 9:o=jt.nextRenderTabStop(o,n);break;default:return[-1,-1,-1]}}return t===i?[s,a,o]:[-1,-1,-1]}static atomicPosition(e,t,n,i){let o=e.length,[s,a,l]=r.whitespaceVisibleColumn(e,t,n);if(l===-1)return-1;let d;switch(i){case 0:d=!0;break;case 1:d=!1;break;case 2:if(l%n===0)return t;d=l%n<=n/2;break}if(d){if(s===-1)return-1;let h=a;for(let g=s;g<o;++g){if(h===a+n)return s;switch(e.charCodeAt(g)){case 32:h+=1;break;case 9:h=jt.nextRenderTabStop(h,n);break;default:return-1}}return h===a+n?s:-1}let c=jt.nextRenderTabStop(l,n),p=l;for(let h=t;h<o;h++){if(p===c)return h;switch(e.charCodeAt(h)){case 32:p+=1;break;case 9:p=jt.nextRenderTabStop(p,n);break;default:return-1}}return p===c?o:-1}};var Ad=class{constructor(e=null){this.hitTarget=e}type=0},FL=class{constructor(e,t,n){this.position=e;this.spanNode=t;this.injectedText=n}type=1;get hitTarget(){return this.spanNode}},Vb;(e=>{function r(t,n,i){let o=t.getPositionFromDOMInfo(n,i);return o?new FL(o,n,null):new Ad(n)}e.createFromDOMInfo=r})(Vb||={});var BL=class{constructor(e,t){this.lastViewCursorsRenderData=e;this.lastTextareaPosition=t}},Ki=class{static _deduceRage(e,t=null){return!t&&e?new D(e.lineNumber,e.column,e.lineNumber,e.column):t??null}static createUnknown(e,t,n){return{type:0,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,n,i,o,s){return{type:e,element:t,mouseColumn:n,position:i,range:o,detail:s}}static createViewZone(e,t,n,i,o){return{type:e,element:t,mouseColumn:n,position:i,range:this._deduceRage(i),detail:o}}static createContentText(e,t,n,i,o){return{type:6,element:e,mouseColumn:t,position:n,range:this._deduceRage(n,i),detail:o}}static createContentEmpty(e,t,n,i){return{type:7,element:e,mouseColumn:t,position:n,range:this._deduceRage(n),detail:i}}static createContentWidget(e,t,n){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createScrollbar(e,t,n){return{type:11,element:e,mouseColumn:t,position:n,range:this._deduceRage(n)}}static createOverlayWidget(e,t,n){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:n}}static createOutsideEditor(e,t,n,i){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:n,outsideDistance:i}}static _typeToString(e){return e===1?"TEXTAREA":e===2?"GUTTER_GLYPH_MARGIN":e===3?"GUTTER_LINE_NUMBERS":e===4?"GUTTER_LINE_DECORATIONS":e===5?"GUTTER_VIEW_ZONE":e===6?"CONTENT_TEXT":e===7?"CONTENT_EMPTY":e===8?"CONTENT_VIEW_ZONE":e===9?"CONTENT_WIDGET":e===10?"OVERVIEW_RULER":e===11?"SCROLLBAR":e===12?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}},So=class{static isTextArea(e){return e.length===2&&e[0]===3&&e[1]===7}static isChildOfViewLines(e){return e.length>=4&&e[0]===3&&e[3]===8}static isStrictChildOfViewLines(e){return e.length>4&&e[0]===3&&e[3]===8}static isChildOfScrollableElement(e){return e.length>=2&&e[0]===3&&e[1]===6}static isChildOfMinimap(e){return e.length>=2&&e[0]===3&&e[1]===9}static isChildOfContentWidgets(e){return e.length>=4&&e[0]===3&&e[3]===1}static isChildOfOverflowGuard(e){return e.length>=1&&e[0]===3}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&e[0]===2}static isChildOfOverlayWidgets(e){return e.length>=2&&e[0]===3&&e[1]===4}static isChildOfOverflowingOverlayWidgets(e){return e.length>=1&&e[0]===5}},Hb=class r{viewModel;layoutInfo;viewDomNode;lineHeight;stickyTabStops;typicalHalfwidthCharacterWidth;lastRenderData;_context;_viewHelper;constructor(e,t,n){this.viewModel=e.viewModel;let i=e.configuration.options;this.layoutInfo=i.get(147),this.viewDomNode=t.viewDomNode,this.lineHeight=i.get(68),this.stickyTabStops=i.get(118),this.typicalHalfwidthCharacterWidth=i.get(51).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return r.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){let n=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(n){let i=n.verticalOffset+n.height/2,o=e.viewModel.getLineCount(),s=null,a,l=null;return n.afterLineNumber!==o&&(l=new F(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(s=new F(n.afterLineNumber,e.viewModel.getLineMaxColumn(n.afterLineNumber))),l===null?a=s:s===null?a=l:t<i?a=s:a=l,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:s,positionAfter:l,position:a}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){let i=this._context.viewModel.getLineCount(),o=this._context.viewModel.getLineMaxColumn(i);return{range:new D(i,o,i,o),isAfterLines:!0}}let t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),n=this._context.viewModel.getLineMaxColumn(t);return{range:new D(t,1,t,n),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return r._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,n){for(;e&&e!==e.ownerDocument.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===n)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}},OB=class{editorPos;pos;relativePos;mouseVerticalOffset;isInMarginArea;isInContentArea;mouseContentHorizontalOffset;mouseColumn;constructor(e,t,n,i){this.editorPos=t,this.pos=n,this.relativePos=i,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,Ub._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}},PB=class extends OB{_ctx;_eventTarget;hitTestResult=new Mi(()=>Ub.doHitTest(this._ctx,this));_useHitTestTarget;_targetPathCacheElement=null;_targetPathCacheValue=new Uint8Array(0);get target(){return this._useHitTestTarget?this.hitTestResult.value.hitTarget:this._eventTarget}get targetPath(){return this._targetPathCacheElement!==this.target&&(this._targetPathCacheElement=this.target,this._targetPathCacheValue=zi.collect(this.target,this._ctx.viewDomNode)),this._targetPathCacheValue}constructor(e,t,n,i,o){super(e,t,n,i),this._ctx=e,this._eventTarget=o;let s=!!this._eventTarget;this._useHitTestTarget=!s}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}
	target: ${this.target?this.target.outerHTML:null}`}get wouldBenefitFromHitTestTargetSwitch(){return!this._useHitTestTarget&&this.hitTestResult.value.hitTarget!==null&&this.target!==this.hitTestResult.value.hitTarget}switchToHitTestTarget(){this._useHitTestTarget=!0}_getMouseColumn(e=null){return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?jt.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(e=null){return Ki.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return Ki.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,n,i){return Ki.createMargin(e,this.target,this._getMouseColumn(t),t,n,i)}fulfillViewZone(e,t,n){return Ki.createViewZone(e,this.target,this._getMouseColumn(t),t,n)}fulfillContentText(e,t,n){return Ki.createContentText(this.target,this._getMouseColumn(e),e,t,n)}fulfillContentEmpty(e,t){return Ki.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return Ki.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return Ki.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return Ki.createOverlayWidget(this.target,this._getMouseColumn(),e)}},V9={isAfterLines:!0};function MB(r){return{isAfterLines:!1,horizontalDistanceToText:r}}var Ub=class r{_context;_viewHelper;constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){let t=e.target,n=zi.collect(t,this._viewHelper.viewDomNode);return!!(So.isChildOfContentWidgets(n)||So.isChildOfOverflowingContentWidgets(n)||So.isChildOfOverlayWidgets(n)||So.isChildOfOverflowingOverlayWidgets(n))}createMouseTarget(e,t,n,i,o){let s=new Hb(this._context,this._viewHelper,e),a=new PB(s,t,n,i,o);try{let l=r._createMouseTarget(s,a);if(l.type===6&&s.stickyTabStops&&l.position!==null){let d=r._snapToSoftTabBoundary(l.position,s.viewModel),c=D.fromPositions(d,d).plusRange(l.range);return a.fulfillContentText(d,c,l.detail)}return l}catch{return a.fulfillUnknown()}}static _createMouseTarget(e,t){if(t.target===null)return t.fulfillUnknown();let n=t,i=null;return!So.isChildOfOverflowGuard(t.targetPath)&&!So.isChildOfOverflowingContentWidgets(t.targetPath)&&!So.isChildOfOverflowingOverlayWidgets(t.targetPath)&&(i=i||t.fulfillUnknown()),i=i||r._hitTestContentWidget(e,n),i=i||r._hitTestOverlayWidget(e,n),i=i||r._hitTestMinimap(e,n),i=i||r._hitTestScrollbarSlider(e,n),i=i||r._hitTestViewZone(e,n),i=i||r._hitTestMargin(e,n),i=i||r._hitTestViewCursor(e,n),i=i||r._hitTestTextArea(e,n),i=i||r._hitTestViewLines(e,n),i=i||r._hitTestScrollbar(e,n),i||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(So.isChildOfContentWidgets(t.targetPath)||So.isChildOfOverflowingContentWidgets(t.targetPath)){let n=e.findAttribute(t.target,"widgetId");return n?t.fulfillContentWidget(n):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(So.isChildOfOverlayWidgets(t.targetPath)||So.isChildOfOverflowingOverlayWidgets(t.targetPath)){let n=e.findAttribute(t.target,"widgetId");return n?t.fulfillOverlayWidget(n):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){let n=e.lastRenderData.lastViewCursorsRenderData;for(let i of n)if(t.target===i.domNode)return t.fulfillContentText(i.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){let n=e.lastRenderData.lastViewCursorsRenderData,i=t.mouseContentHorizontalOffset,o=t.mouseVerticalOffset;for(let s of n){if(i<s.contentLeft||i>s.contentLeft+s.width)continue;let a=e.getVerticalOffsetForLineNumber(s.position.lineNumber);if(a<=o&&o<=a+s.height)return t.fulfillContentText(s.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){let n=e.getZoneAtCoord(t.mouseVerticalOffset);if(n){let i=t.isInContentArea?8:5;return t.fulfillViewZone(i,n.position,n)}return null}static _hitTestTextArea(e,t){return So.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){let n=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),i=n.range.getStartPosition(),o=Math.abs(t.relativePos.x),s={isAfterLines:n.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:o};if(o-=e.layoutInfo.glyphMarginLeft,o<=e.layoutInfo.glyphMarginWidth){let a=e.viewModel.coordinatesConverter.convertViewPositionToModelPosition(n.range.getStartPosition()),l=e.viewModel.glyphLanes.getLanesAtLine(a.lineNumber);return s.glyphMarginLane=l[Math.floor(o/e.lineHeight)],t.fulfillMargin(2,i,n.range,s)}return o-=e.layoutInfo.glyphMarginWidth,o<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,i,n.range,s):(o-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,i,n.range,s))}return null}static _hitTestViewLines(e,t){if(!So.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new F(1,1),V9);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){let i=e.viewModel.getLineCount(),o=e.viewModel.getLineMaxColumn(i);return t.fulfillContentEmpty(new F(i,o),V9)}if(So.isStrictChildOfViewLines(t.targetPath)){let i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(e.viewModel.getLineLength(i)===0){let s=e.getLineWidth(i),a=MB(t.mouseContentHorizontalOffset-s);return t.fulfillContentEmpty(new F(i,1),a)}let o=e.getLineWidth(i);if(t.mouseContentHorizontalOffset>=o){let s=MB(t.mouseContentHorizontalOffset-o),a=new F(i,e.viewModel.getLineMaxColumn(i));return t.fulfillContentEmpty(a,s)}}let n=t.hitTestResult.value;return n.type===1?r.createMouseTargetFromHitTestPosition(e,t,n.spanNode,n.position,n.injectedText):t.wouldBenefitFromHitTestTargetSwitch?(t.switchToHitTestTarget(),this._createMouseTarget(e,t)):t.fulfillUnknown()}static _hitTestMinimap(e,t){if(So.isChildOfMinimap(t.targetPath)){let n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new F(n,i))}return null}static _hitTestScrollbarSlider(e,t){if(So.isChildOfScrollableElement(t.targetPath)&&t.target&&t.target.nodeType===1){let n=t.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){let i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new F(i,o))}}return null}static _hitTestScrollbar(e,t){if(So.isChildOfScrollableElement(t.targetPath)){let n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.viewModel.getLineMaxColumn(n);return t.fulfillScrollbar(new F(n,i))}return null}getMouseColumn(e){let t=this._context.configuration.options,n=t.get(147),i=this._context.viewLayout.getCurrentScrollLeft()+e.x-n.contentLeft;return r._getMouseColumn(i,t.get(51).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){return e<0?1:Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,n,i,o){let s=i.lineNumber,a=i.column,l=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>l){let v=MB(t.mouseContentHorizontalOffset-l);return t.fulfillContentEmpty(i,v)}let d=e.visibleRangeForPosition(s,a);if(!d)return t.fulfillUnknown(i);let c=d.left;if(Math.abs(t.mouseContentHorizontalOffset-c)<1)return t.fulfillContentText(i,null,{mightBeForeignElement:!!o,injectedText:o});let p=[];if(p.push({offset:d.left,column:a}),a>1){let v=e.visibleRangeForPosition(s,a-1);v&&p.push({offset:v.left,column:a-1})}let h=e.viewModel.getLineMaxColumn(s);if(a<h){let v=e.visibleRangeForPosition(s,a+1);v&&p.push({offset:v.left,column:a+1})}p.sort((v,S)=>v.offset-S.offset);let g=t.pos.toClientCoordinates(Ee(e.viewDomNode)),f=n.getBoundingClientRect(),m=f.left<=g.clientX&&g.clientX<=f.right,b=null;for(let v=1;v<p.length;v++){let S=p[v-1],x=p[v];if(S.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=x.offset){b=new D(s,S.column,s,x.column);let E=Math.abs(S.offset-t.mouseContentHorizontalOffset),w=Math.abs(x.offset-t.mouseContentHorizontalOffset);i=E<w?new F(s,S.column):new F(s,x.column);break}}return t.fulfillContentText(i,b,{mightBeForeignElement:!m||!!o,injectedText:o})}static _doHitTestWithCaretRangeFromPoint(e,t){let n=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),i=e.getVerticalOffsetForLineNumber(n),o=i+e.lineHeight;if(!(n===e.viewModel.getLineCount()&&t.mouseVerticalOffset>o)){let a=Math.floor((i+o)/2),l=t.pos.y+(a-t.mouseVerticalOffset);l<=t.editorPos.y&&(l=t.editorPos.y+1),l>=t.editorPos.y+t.editorPos.height&&(l=t.editorPos.y+t.editorPos.height-1);let d=new vp(t.pos.x,l),c=this._actualDoHitTestWithCaretRangeFromPoint(e,d.toClientCoordinates(Ee(e.viewDomNode)));if(c.type===1)return c}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates(Ee(e.viewDomNode)))}static _actualDoHitTestWithCaretRangeFromPoint(e,t){let n=Vl(e.viewDomNode),i;if(n?typeof n.caretRangeFromPoint>"u"?i=ZZ(n,t.clientX,t.clientY):i=n.caretRangeFromPoint(t.clientX,t.clientY):i=e.viewDomNode.ownerDocument.caretRangeFromPoint(t.clientX,t.clientY),!i||!i.startContainer)return new Ad;let o=i.startContainer;if(o.nodeType===o.TEXT_NODE){let s=o.parentNode,a=s?s.parentNode:null,l=a?a.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===ml.CLASS_NAME?Vb.createFromDOMInfo(e,s,i.startOffset):new Ad(o.parentNode)}else if(o.nodeType===o.ELEMENT_NODE){let s=o.parentNode,a=s?s.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===ml.CLASS_NAME?Vb.createFromDOMInfo(e,o,o.textContent.length):new Ad(o)}return new Ad}static _doHitTestWithCaretPositionFromPoint(e,t){let n=e.viewDomNode.ownerDocument.caretPositionFromPoint(t.clientX,t.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){let i=n.offsetNode.parentNode,o=i?i.parentNode:null,s=o?o.parentNode:null;return(s&&s.nodeType===s.ELEMENT_NODE?s.className:null)===ml.CLASS_NAME?Vb.createFromDOMInfo(e,n.offsetNode.parentNode,n.offset):new Ad(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){let i=n.offsetNode.parentNode,o=i&&i.nodeType===i.ELEMENT_NODE?i.className:null,s=i?i.parentNode:null,a=s&&s.nodeType===s.ELEMENT_NODE?s.className:null;if(o===ml.CLASS_NAME){let l=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(l)return Vb.createFromDOMInfo(e,l,0)}else if(a===ml.CLASS_NAME)return Vb.createFromDOMInfo(e,n.offsetNode,0)}return new Ad(n.offsetNode)}static _snapToSoftTabBoundary(e,t){let n=t.getLineContent(e.lineNumber),{tabSize:i}=t.model.getOptions(),o=Tg.atomicPosition(n,e.column-1,i,2);return o!==-1?new F(e.lineNumber,o+1):e}static doHitTest(e,t){let n=new Ad;if(typeof e.viewDomNode.ownerDocument.caretRangeFromPoint=="function"?n=this._doHitTestWithCaretRangeFromPoint(e,t):e.viewDomNode.ownerDocument.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates(Ee(e.viewDomNode)))),n.type===1){let i=e.viewModel.getInjectedTextAt(n.position),o=e.viewModel.normalizePosition(n.position,2);(i||!o.equals(n.position))&&(n=new FL(o,n.spanNode,i))}return n}};function ZZ(r,e,t){let n=document.createRange(),i=r.elementFromPoint(e,t);if(i!==null){for(;i&&i.firstChild&&i.firstChild.nodeType!==i.firstChild.TEXT_NODE&&i.lastChild&&i.lastChild.firstChild;)i=i.lastChild;let o=i.getBoundingClientRect(),s=Ee(i),a=s.getComputedStyle(i,null).getPropertyValue("font-style"),l=s.getComputedStyle(i,null).getPropertyValue("font-variant"),d=s.getComputedStyle(i,null).getPropertyValue("font-weight"),c=s.getComputedStyle(i,null).getPropertyValue("font-size"),p=s.getComputedStyle(i,null).getPropertyValue("line-height"),h=s.getComputedStyle(i,null).getPropertyValue("font-family"),g=`${a} ${l} ${d} ${c}/${p} ${h}`,f=i.innerText,m=o.left,b=0,v;if(e>o.left+o.width)b=f.length;else{let S=AB.getInstance();for(let x=0;x<f.length+1;x++){if(v=S.getCharWidth(f.charAt(x),g)/2,m+=v,e<m){b=x;break}m+=v}}n.setStart(i.firstChild,b),n.setEnd(i.firstChild,b)}return n}var AB=class r{static _INSTANCE=null;static getInstance(){return r._INSTANCE||(r._INSTANCE=new r),r._INSTANCE}_cache;_canvas;constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,t){let n=e+t;if(this._cache[n])return this._cache[n];let i=this._canvas.getContext("2d");i.font=t;let s=i.measureText(e).width;return this._cache[n]=s,s}};var yp=class r{static columnSelect(e,t,n,i,o,s){let a=Math.abs(o-n)+1,l=n>o,d=i>s,c=i<s,p=[];for(let h=0;h<a;h++){let g=n+(l?-h:h),f=e.columnFromVisibleColumn(t,g,i),m=e.columnFromVisibleColumn(t,g,s),b=e.visibleColumnFromColumn(t,new F(g,f)),v=e.visibleColumnFromColumn(t,new F(g,m));c&&(b>s||v<i)||d&&(v>i||b<s)||p.push(new ni(new D(g,f,g,f),0,0,new F(g,m),0))}if(p.length===0)for(let h=0;h<a;h++){let g=n+(l?-h:h),f=t.getLineMaxColumn(g);p.push(new ni(new D(g,f,g,f),0,0,new F(g,f),0))}return{viewStates:p,reversed:l,fromLineNumber:n,fromVisualColumn:i,toLineNumber:o,toVisualColumn:s}}static columnSelectLeft(e,t,n){let i=n.toViewVisualColumn;return i>0&&i--,r.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,i)}static columnSelectRight(e,t,n){let i=0,o=Math.min(n.fromViewLineNumber,n.toViewLineNumber),s=Math.max(n.fromViewLineNumber,n.toViewLineNumber);for(let l=o;l<=s;l++){let d=t.getLineMaxColumn(l),c=e.visibleColumnFromColumn(t,new F(l,d));i=Math.max(i,c)}let a=n.toViewVisualColumn;return a<i&&a++,this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,n.toViewLineNumber,a)}static columnSelectUp(e,t,n,i){let o=i?e.pageSize:1,s=Math.max(1,n.toViewLineNumber-o);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,s,n.toViewVisualColumn)}static columnSelectDown(e,t,n,i){let o=i?e.pageSize:1,s=Math.min(t.getLineCount(),n.toViewLineNumber+o);return this.columnSelect(e,t,n.fromViewLineNumber,n.fromViewVisualColumn,s,n.toViewVisualColumn)}};var Co=class{_range;_text;insertsAutoWhitespace;constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return ze.fromPositions(i.getEndPosition())}};var _g=class{_range;_text;insertsAutoWhitespace;constructor(e,t,n=!1){this._range=e,this._text=t,this.insertsAutoWhitespace=n}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return ze.fromPositions(i.getStartPosition())}},Dg=class{_range;_text;_columnDeltaOffset;_lineNumberDeltaOffset;insertsAutoWhitespace;constructor(e,t,n,i,o=!1){this._range=e,this._text=t,this._columnDeltaOffset=i,this._lineNumberDeltaOffset=n,this.insertsAutoWhitespace=o}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return ze.fromPositions(i.getEndPosition().delta(this._lineNumberDeltaOffset,this._columnDeltaOffset))}},VL=class{_range;_text;_initialSelection;_forceMoveMarkers;_selectionId;constructor(e,t,n,i=!1){this._range=e,this._text=t,this._initialSelection=n,this._forceMoveMarkers=i,this._selectionId=null}getEditOperations(e,t){t.addTrackedEditOperation(this._range,this._text,this._forceMoveMarkers),this._selectionId=t.trackSelection(this._initialSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._selectionId)}};var iC=class{_cursorPositionBrand=void 0;lineNumber;column;leftoverVisibleColumns;constructor(e,t,n){this.lineNumber=e,this.column=t,this.leftoverVisibleColumns=n}},Pn=class r{static leftPosition(e,t){if(t.column>e.getLineMinColumn(t.lineNumber))return t.delta(void 0,-m1(e.getLineContent(t.lineNumber),t.column-1));if(t.lineNumber>1){let n=t.lineNumber-1;return new F(n,e.getLineMaxColumn(n))}else return t}static leftPositionAtomicSoftTabs(e,t,n){if(t.column<=e.getLineIndentColumn(t.lineNumber)){let i=e.getLineMinColumn(t.lineNumber),o=e.getLineContent(t.lineNumber),s=Tg.atomicPosition(o,t.column-1,n,0);if(s!==-1&&s+1>=i)return new F(t.lineNumber,s+1)}return this.leftPosition(e,t)}static left(e,t,n){let i=e.stickyTabStops?r.leftPositionAtomicSoftTabs(t,n,e.tabSize):r.leftPosition(t,n);return new iC(i.lineNumber,i.column,0)}static moveLeft(e,t,n,i,o){let s,a;if(n.hasSelection()&&!i)s=n.selection.startLineNumber,a=n.selection.startColumn;else{let l=n.position.delta(void 0,-(o-1)),d=t.normalizePosition(r.clipPositionColumn(l,t),0),c=r.left(e,t,d);s=c.lineNumber,a=c.column}return n.move(i,s,a,0)}static clipPositionColumn(e,t){return new F(e.lineNumber,r.clipRange(e.column,t.getLineMinColumn(e.lineNumber),t.getLineMaxColumn(e.lineNumber)))}static clipRange(e,t,n){return e<t?t:e>n?n:e}static rightPosition(e,t,n){return n<e.getLineMaxColumn(t)?n=n+dy(e.getLineContent(t),n-1):t<e.getLineCount()&&(t=t+1,n=e.getLineMinColumn(t)),new F(t,n)}static rightPositionAtomicSoftTabs(e,t,n,i,o){if(n<e.getLineIndentColumn(t)){let s=e.getLineContent(t),a=Tg.atomicPosition(s,n-1,i,1);if(a!==-1)return new F(t,a+1)}return this.rightPosition(e,t,n)}static right(e,t,n){let i=e.stickyTabStops?r.rightPositionAtomicSoftTabs(t,n.lineNumber,n.column,e.tabSize,e.indentSize):r.rightPosition(t,n.lineNumber,n.column);return new iC(i.lineNumber,i.column,0)}static moveRight(e,t,n,i,o){let s,a;if(n.hasSelection()&&!i)s=n.selection.endLineNumber,a=n.selection.endColumn;else{let l=n.position.delta(void 0,o-1),d=t.normalizePosition(r.clipPositionColumn(l,t),1),c=r.right(e,t,d);s=c.lineNumber,a=c.column}return n.move(i,s,a,0)}static vertical(e,t,n,i,o,s,a,l){let d=jt.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize)+o,c=t.getLineCount(),p=n===1&&i===1,h=n===c&&i===t.getLineMaxColumn(n),g=s<n?p:h;if(n=s,n<1?(n=1,a?i=t.getLineMinColumn(n):i=Math.min(t.getLineMaxColumn(n),i)):n>c?(n=c,a?i=t.getLineMaxColumn(n):i=Math.min(t.getLineMaxColumn(n),i)):i=e.columnFromVisibleColumn(t,n,d),g?o=0:o=d-jt.visibleColumnFromColumn(t.getLineContent(n),i,e.tabSize),l!==void 0){let f=new F(n,i),m=t.normalizePosition(f,l);o=o+(i-m.column),n=m.lineNumber,i=m.column}return new iC(n,i,o)}static down(e,t,n,i,o,s,a){return this.vertical(e,t,n,i,o,n+s,a,4)}static moveDown(e,t,n,i,o){let s,a;n.hasSelection()&&!i?(s=n.selection.endLineNumber,a=n.selection.endColumn):(s=n.position.lineNumber,a=n.position.column);let l=0,d;do if(d=r.down(e,t,s+l,a,n.leftoverVisibleColumns,o,!0),t.normalizePosition(new F(d.lineNumber,d.column),2).lineNumber>s)break;while(l++<10&&s+l<t.getLineCount());return n.move(i,d.lineNumber,d.column,d.leftoverVisibleColumns)}static translateDown(e,t,n){let i=n.selection,o=r.down(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),s=r.down(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new ni(new D(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new F(s.lineNumber,s.column),s.leftoverVisibleColumns)}static up(e,t,n,i,o,s,a){return this.vertical(e,t,n,i,o,n-s,a,3)}static moveUp(e,t,n,i,o){let s,a;n.hasSelection()&&!i?(s=n.selection.startLineNumber,a=n.selection.startColumn):(s=n.position.lineNumber,a=n.position.column);let l=r.up(e,t,s,a,n.leftoverVisibleColumns,o,!0);return n.move(i,l.lineNumber,l.column,l.leftoverVisibleColumns)}static translateUp(e,t,n){let i=n.selection,o=r.up(e,t,i.selectionStartLineNumber,i.selectionStartColumn,n.selectionStartLeftoverVisibleColumns,1,!1),s=r.up(e,t,i.positionLineNumber,i.positionColumn,n.leftoverVisibleColumns,1,!1);return new ni(new D(o.lineNumber,o.column,o.lineNumber,o.column),0,o.leftoverVisibleColumns,new F(s.lineNumber,s.column),s.leftoverVisibleColumns)}static _isBlankLine(e,t){return e.getLineFirstNonWhitespaceColumn(t)===0}static moveToPrevBlankLine(e,t,n,i){let o=n.position.lineNumber;for(;o>1&&this._isBlankLine(t,o);)o--;for(;o>1&&!this._isBlankLine(t,o);)o--;return n.move(i,o,t.getLineMinColumn(o),0)}static moveToNextBlankLine(e,t,n,i){let o=t.getLineCount(),s=n.position.lineNumber;for(;s<o&&this._isBlankLine(t,s);)s++;for(;s<o&&!this._isBlankLine(t,s);)s++;return n.move(i,s,t.getLineMinColumn(s),0)}static moveToBeginningOfLine(e,t,n,i){let o=n.position.lineNumber,s=t.getLineMinColumn(o),a=t.getLineFirstNonWhitespaceColumn(o)||s,l;return n.position.column===a?l=s:l=a,n.move(i,o,l,0)}static moveToEndOfLine(e,t,n,i,o){let s=n.position.lineNumber,a=t.getLineMaxColumn(s);return n.move(i,s,a,o?1073741824-a:0)}static moveToBeginningOfBuffer(e,t,n,i){return n.move(i,1,1,0)}static moveToEndOfBuffer(e,t,n,i){let o=t.getLineCount(),s=t.getLineMaxColumn(o);return n.move(i,o,s,0)}};var zc=class r{static deleteRight(e,t,n,i){let o=[],s=e!==3;for(let a=0,l=i.length;a<l;a++){let d=i[a],c=d;if(c.isEmpty()){let p=d.getPosition(),h=Pn.right(t,n,p);c=new D(h.lineNumber,h.column,p.lineNumber,p.column)}if(c.isEmpty()){o[a]=null;continue}c.startLineNumber!==c.endLineNumber&&(s=!0),o[a]=new Co(c,"")}return[s,o]}static isAutoClosingPairDelete(e,t,n,i,o,s,a){if(t==="never"&&n==="never"||e==="never")return!1;for(let l=0,d=s.length;l<d;l++){let c=s[l],p=c.getPosition();if(!c.isEmpty())return!1;let h=o.getLineContent(p.lineNumber);if(p.column<2||p.column>=h.length+1)return!1;let g=h.charAt(p.column-2),f=i.get(g);if(!f)return!1;if(Ya(g)){if(n==="never")return!1}else if(t==="never")return!1;let m=h.charAt(p.column-1),b=!1;for(let v of f)v.open===g&&v.close===m&&(b=!0);if(!b)return!1;if(e==="auto"){let v=!1;for(let S=0,x=a.length;S<x;S++){let E=a[S];if(p.lineNumber===E.startLineNumber&&p.column===E.startColumn){v=!0;break}}if(!v)return!1}}return!0}static _runAutoClosingPairDelete(e,t,n){let i=[];for(let o=0,s=n.length;o<s;o++){let a=n[o].getPosition(),l=new D(a.lineNumber,a.column-1,a.lineNumber,a.column+1);i[o]=new Co(l,"")}return[!0,i]}static deleteLeft(e,t,n,i,o){if(this.isAutoClosingPairDelete(t.autoClosingDelete,t.autoClosingBrackets,t.autoClosingQuotes,t.autoClosingPairs.autoClosingPairsOpenByEnd,n,i,o))return this._runAutoClosingPairDelete(t,n,i);let s=[],a=e!==2;for(let l=0,d=i.length;l<d;l++){let c=r.getDeleteRange(i[l],n,t);if(c.isEmpty()){s[l]=null;continue}c.startLineNumber!==c.endLineNumber&&(a=!0),s[l]=new Co(c,"")}return[a,s]}static getDeleteRange(e,t,n){if(!e.isEmpty())return e;let i=e.getPosition();if(n.useTabStops&&i.column>1){let o=t.getLineContent(i.lineNumber),s=kn(o),a=s===-1?o.length+1:s+1;if(i.column<=a){let l=n.visibleColumnFromColumn(t,i),d=jt.prevIndentTabStop(l,n.indentSize),c=n.columnFromVisibleColumn(t,i.lineNumber,d);return new D(i.lineNumber,c,i.lineNumber,i.column)}}return D.fromPositions(r.getPositionAfterDeleteLeft(i,t),i)}static getPositionAfterDeleteLeft(e,t){if(e.column>1){let n=IH(e.column-1,t.getLineContent(e.lineNumber));return e.with(void 0,n+1)}else if(e.lineNumber>1){let n=e.lineNumber-1;return new F(n,t.getLineMaxColumn(n))}else return e}static cut(e,t,n){let i=[],o=null;n.sort((s,a)=>F.compare(s.getStartPosition(),a.getEndPosition()));for(let s=0,a=n.length;s<a;s++){let l=n[s];if(l.isEmpty())if(e.emptySelectionClipboard){let d=l.getPosition(),c,p,h,g;d.lineNumber<t.getLineCount()?(c=d.lineNumber,p=1,h=d.lineNumber+1,g=1):d.lineNumber>1&&o?.endLineNumber!==d.lineNumber?(c=d.lineNumber-1,p=t.getLineMaxColumn(d.lineNumber-1),h=d.lineNumber,g=t.getLineMaxColumn(d.lineNumber)):(c=d.lineNumber,p=1,h=d.lineNumber,g=t.getLineMaxColumn(d.lineNumber));let f=new D(c,p,h,g);o=f,f.isEmpty()?i[s]=null:i[s]=new Co(f,"")}else i[s]=null;else i[s]=new Co(l,"")}return new Si(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}};var zb=class r{static _createWord(e,t,n,i,o){return{start:i,end:o,wordType:t,nextCharClass:n}}static _createIntlWord(e,t){return{start:e.index,end:e.index+e.segment.length,wordType:1,nextCharClass:t}}static _findPreviousWordOnLine(e,t,n){let i=t.getLineContent(n.lineNumber);return this._doFindPreviousWordOnLine(i,e,n)}static _doFindPreviousWordOnLine(e,t,n){let i=0,o=t.findPrevIntlWordBeforeOrAtOffset(e,n.column-2);for(let s=n.column-2;s>=0;s--){let a=e.charCodeAt(s),l=t.get(a);if(o&&s===o.index)return this._createIntlWord(o,l);if(l===0){if(i===2)return this._createWord(e,i,l,s+1,this._findEndOfWord(e,t,i,s+1));i=1}else if(l===2){if(i===1)return this._createWord(e,i,l,s+1,this._findEndOfWord(e,t,i,s+1));i=2}else if(l===1&&i!==0)return this._createWord(e,i,l,s+1,this._findEndOfWord(e,t,i,s+1))}return i!==0?this._createWord(e,i,1,0,this._findEndOfWord(e,t,i,0)):null}static _findEndOfWord(e,t,n,i){let o=t.findNextIntlWordAtOrAfterOffset(e,i),s=e.length;for(let a=i;a<s;a++){let l=e.charCodeAt(a),d=t.get(l);if(o&&a===o.index+o.segment.length||d===1||n===1&&d===2||n===2&&d===0)return a}return s}static _findNextWordOnLine(e,t,n){let i=t.getLineContent(n.lineNumber);return this._doFindNextWordOnLine(i,e,n)}static _doFindNextWordOnLine(e,t,n){let i=0,o=e.length,s=t.findNextIntlWordAtOrAfterOffset(e,n.column-1);for(let a=n.column-1;a<o;a++){let l=e.charCodeAt(a),d=t.get(l);if(s&&a===s.index)return this._createIntlWord(s,d);if(d===0){if(i===2)return this._createWord(e,i,d,this._findStartOfWord(e,t,i,a-1),a);i=1}else if(d===2){if(i===1)return this._createWord(e,i,d,this._findStartOfWord(e,t,i,a-1),a);i=2}else if(d===1&&i!==0)return this._createWord(e,i,d,this._findStartOfWord(e,t,i,a-1),a)}return i!==0?this._createWord(e,i,1,this._findStartOfWord(e,t,i,o-1),o):null}static _findStartOfWord(e,t,n,i){let o=t.findPrevIntlWordBeforeOrAtOffset(e,i);for(let s=i;s>=0;s--){let a=e.charCodeAt(s),l=t.get(a);if(o&&s===o.index)return s;if(l===1||n===1&&l===2||n===2&&l===0)return s+1}return 0}static moveWordLeft(e,t,n,i,o){let s=n.lineNumber,a=n.column;a===1&&s>1&&(s=s-1,a=t.getLineMaxColumn(s));let l=r._findPreviousWordOnLine(e,t,new F(s,a));if(i===0)return new F(s,l?l.start+1:1);if(i===1)return!o&&l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=r._findPreviousWordOnLine(e,t,new F(s,l.start+1))),new F(s,l?l.start+1:1);if(i===3){for(;l&&l.wordType===2;)l=r._findPreviousWordOnLine(e,t,new F(s,l.start+1));return new F(s,l?l.start+1:1)}return l&&a<=l.end+1&&(l=r._findPreviousWordOnLine(e,t,new F(s,l.start+1))),new F(s,l?l.end+1:1)}static _moveWordPartLeft(e,t){let n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===1)return n>1?new F(n-1,e.getLineMaxColumn(n-1)):t;let o=e.getLineContent(n);for(let s=t.column-1;s>1;s--){let a=o.charCodeAt(s-2),l=o.charCodeAt(s-1);if(a===95&&l!==95)return new F(n,s);if(a===45&&l!==45)return new F(n,s);if((th(a)||ay(a))&&Al(l))return new F(n,s);if(Al(a)&&Al(l)&&s+1<i){let d=o.charCodeAt(s);if(th(d)||ay(d))return new F(n,s)}}return new F(n,1)}static moveWordRight(e,t,n,i){let o=n.lineNumber,s=n.column,a=!1;s===t.getLineMaxColumn(o)&&o<t.getLineCount()&&(a=!0,o=o+1,s=1);let l=r._findNextWordOnLine(e,t,new F(o,s));if(i===2)l&&l.wordType===2&&l.end-l.start===1&&l.nextCharClass===0&&(l=r._findNextWordOnLine(e,t,new F(o,l.end+1))),l?s=l.end+1:s=t.getLineMaxColumn(o);else if(i===3){for(a&&(s=0);l&&(l.wordType===2||l.start+1<=s);)l=r._findNextWordOnLine(e,t,new F(o,l.end+1));l?s=l.start+1:s=t.getLineMaxColumn(o)}else l&&!a&&s>=l.start+1&&(l=r._findNextWordOnLine(e,t,new F(o,l.end+1))),l?s=l.start+1:s=t.getLineMaxColumn(o);return new F(o,s)}static _moveWordPartRight(e,t){let n=t.lineNumber,i=e.getLineMaxColumn(n);if(t.column===i)return n<e.getLineCount()?new F(n+1,1):t;let o=e.getLineContent(n);for(let s=t.column+1;s<i;s++){let a=o.charCodeAt(s-2),l=o.charCodeAt(s-1);if(a!==95&&l===95)return new F(n,s);if(a!==45&&l===45)return new F(n,s);if((th(a)||ay(a))&&Al(l))return new F(n,s);if(Al(a)&&Al(l)&&s+1<i){let d=o.charCodeAt(s);if(th(d)||ay(d))return new F(n,s)}}return new F(n,i)}static _deleteWordLeftWhitespace(e,t){let n=e.getLineContent(t.lineNumber),i=t.column-2,o=Ds(n,i);return o+1<i?new D(t.lineNumber,o+2,t.lineNumber,t.column):null}static deleteWordLeft(e,t){let n=e.wordSeparators,i=e.model,o=e.selection,s=e.whitespaceHeuristics;if(!o.isEmpty())return o;if(zc.isAutoClosingPairDelete(e.autoClosingDelete,e.autoClosingBrackets,e.autoClosingQuotes,e.autoClosingPairs.autoClosingPairsOpenByEnd,e.model,[e.selection],e.autoClosedCharacters)){let p=e.selection.getPosition();return new D(p.lineNumber,p.column-1,p.lineNumber,p.column+1)}let a=new F(o.positionLineNumber,o.positionColumn),l=a.lineNumber,d=a.column;if(l===1&&d===1)return null;if(s){let p=this._deleteWordLeftWhitespace(i,a);if(p)return p}let c=r._findPreviousWordOnLine(n,i,a);return t===0?c?d=c.start+1:d>1?d=1:(l--,d=i.getLineMaxColumn(l)):(c&&d<=c.end+1&&(c=r._findPreviousWordOnLine(n,i,new F(l,c.start+1))),c?d=c.end+1:d>1?d=1:(l--,d=i.getLineMaxColumn(l))),new D(l,d,a.lineNumber,a.column)}static deleteInsideWord(e,t,n){if(!n.isEmpty())return n;let i=new F(n.positionLineNumber,n.positionColumn),o=this._deleteInsideWordWhitespace(t,i);return o||this._deleteInsideWordDetermineDeleteRange(e,t,i)}static _charAtIsWhitespace(e,t){let n=e.charCodeAt(t);return n===32||n===9}static _deleteInsideWordWhitespace(e,t){let n=e.getLineContent(t.lineNumber),i=n.length;if(i===0)return null;let o=Math.max(t.column-2,0);if(!this._charAtIsWhitespace(n,o))return null;let s=Math.min(t.column-1,i-1);if(!this._charAtIsWhitespace(n,s))return null;for(;o>0&&this._charAtIsWhitespace(n,o-1);)o--;for(;s+1<i&&this._charAtIsWhitespace(n,s+1);)s++;return new D(t.lineNumber,o+1,t.lineNumber,s+2)}static _deleteInsideWordDetermineDeleteRange(e,t,n){let i=t.getLineContent(n.lineNumber),o=i.length;if(o===0)return n.lineNumber>1?new D(n.lineNumber-1,t.getLineMaxColumn(n.lineNumber-1),n.lineNumber,1):n.lineNumber<t.getLineCount()?new D(n.lineNumber,1,n.lineNumber+1,1):new D(n.lineNumber,1,n.lineNumber,1);let s=p=>p.start+1<=n.column&&n.column<=p.end+1,a=(p,h)=>(p=Math.min(p,n.column),h=Math.max(h,n.column),new D(n.lineNumber,p,n.lineNumber,h)),l=p=>{let h=p.start+1,g=p.end+1,f=!1;for(;g-1<o&&this._charAtIsWhitespace(i,g-1);)f=!0,g++;if(!f)for(;h>1&&this._charAtIsWhitespace(i,h-2);)h--;return a(h,g)},d=r._findPreviousWordOnLine(e,t,n);if(d&&s(d))return l(d);let c=r._findNextWordOnLine(e,t,n);return c&&s(c)?l(c):d&&c?a(d.end+1,c.start+1):d?a(d.start+1,d.end+1):c?a(c.start+1,c.end+1):a(1,o+1)}static _deleteWordPartLeft(e,t){if(!t.isEmpty())return t;let n=t.getPosition(),i=r._moveWordPartLeft(e,n);return new D(n.lineNumber,n.column,i.lineNumber,i.column)}static _findFirstNonWhitespaceChar(e,t){let n=e.length;for(let i=t;i<n;i++){let o=e.charAt(i);if(o!==" "&&o!=="	")return i}return n}static _deleteWordRightWhitespace(e,t){let n=e.getLineContent(t.lineNumber),i=t.column-1,o=this._findFirstNonWhitespaceChar(n,i);return i+1<o?new D(t.lineNumber,t.column,t.lineNumber,o+1):null}static deleteWordRight(e,t){let n=e.wordSeparators,i=e.model,o=e.selection,s=e.whitespaceHeuristics;if(!o.isEmpty())return o;let a=new F(o.positionLineNumber,o.positionColumn),l=a.lineNumber,d=a.column,c=i.getLineCount(),p=i.getLineMaxColumn(l);if(l===c&&d===p)return null;if(s){let g=this._deleteWordRightWhitespace(i,a);if(g)return g}let h=r._findNextWordOnLine(n,i,a);return t===2?h?d=h.end+1:d<p||l===c?d=p:(l++,h=r._findNextWordOnLine(n,i,new F(l,1)),h?d=h.start+1:d=i.getLineMaxColumn(l)):(h&&d>=h.start+1&&(h=r._findNextWordOnLine(n,i,new F(l,h.end+1))),h?d=h.start+1:d<p||l===c?d=p:(l++,h=r._findNextWordOnLine(n,i,new F(l,1)),h?d=h.start+1:d=i.getLineMaxColumn(l))),new D(l,d,a.lineNumber,a.column)}static _deleteWordPartRight(e,t){if(!t.isEmpty())return t;let n=t.getPosition(),i=r._moveWordPartRight(e,n);return new D(n.lineNumber,n.column,i.lineNumber,i.column)}static _createWordAtPosition(e,t,n){let i=new D(t,n.start+1,t,n.end+1);return{word:e.getValueInRange(i),startColumn:i.startColumn,endColumn:i.endColumn}}static getWordAtPosition(e,t,n,i){let o=Yl(t,n),s=r._findPreviousWordOnLine(o,e,i);if(s&&s.wordType===1&&s.start<=i.column-1&&i.column-1<=s.end)return r._createWordAtPosition(e,i.lineNumber,s);let a=r._findNextWordOnLine(o,e,i);return a&&a.wordType===1&&a.start<=i.column-1&&i.column-1<=a.end?r._createWordAtPosition(e,i.lineNumber,a):null}static word(e,t,n,i,o){let s=Yl(e.wordSeparators,e.wordSegmenterLocales),a=r._findPreviousWordOnLine(s,t,o),l=r._findNextWordOnLine(s,t,o);if(!i){let g,f;return a&&a.wordType===1&&a.start<=o.column-1&&o.column-1<=a.end?(g=a.start+1,f=a.end+1):l&&l.wordType===1&&l.start<=o.column-1&&o.column-1<=l.end?(g=l.start+1,f=l.end+1):(a?g=a.end+1:g=1,l?f=l.start+1:f=t.getLineMaxColumn(o.lineNumber)),new ni(new D(o.lineNumber,g,o.lineNumber,f),1,0,new F(o.lineNumber,f),0)}let d,c;a&&a.wordType===1&&a.start<o.column-1&&o.column-1<a.end?(d=a.start+1,c=a.end+1):l&&l.wordType===1&&l.start<o.column-1&&o.column-1<l.end?(d=l.start+1,c=l.end+1):(d=o.column,c=o.column);let p=o.lineNumber,h;if(n.selectionStart.containsPosition(o))h=n.selectionStart.endColumn;else if(o.isBeforeOrEqual(n.selectionStart.getStartPosition())){h=d;let g=new F(p,h);n.selectionStart.containsPosition(g)&&(h=n.selectionStart.endColumn)}else{h=c;let g=new F(p,h);n.selectionStart.containsPosition(g)&&(h=n.selectionStart.startColumn)}return n.move(!0,p,h,0)}};var Gi=class{static addCursorDown(e,t,n){let i=[],o=0;for(let s=0,a=t.length;s<a;s++){let l=t[s];i[o++]=new nt(l.modelState,l.viewState),n?i[o++]=nt.fromModelState(Pn.translateDown(e.cursorConfig,e.model,l.modelState)):i[o++]=nt.fromViewState(Pn.translateDown(e.cursorConfig,e,l.viewState))}return i}static addCursorUp(e,t,n){let i=[],o=0;for(let s=0,a=t.length;s<a;s++){let l=t[s];i[o++]=new nt(l.modelState,l.viewState),n?i[o++]=nt.fromModelState(Pn.translateUp(e.cursorConfig,e.model,l.modelState)):i[o++]=nt.fromViewState(Pn.translateUp(e.cursorConfig,e,l.viewState))}return i}static moveToBeginningOfLine(e,t,n){let i=[];for(let o=0,s=t.length;o<s;o++){let a=t[o];i[o]=this._moveToLineStart(e,a,n)}return i}static _moveToLineStart(e,t,n){let i=t.viewState.position.column,o=t.modelState.position.column,s=i===o,a=t.viewState.position.lineNumber,l=e.getLineFirstNonWhitespaceColumn(a);return!s&&!(i===l)?this._moveToLineStartByView(e,t,n):this._moveToLineStartByModel(e,t,n)}static _moveToLineStartByView(e,t,n){return nt.fromViewState(Pn.moveToBeginningOfLine(e.cursorConfig,e,t.viewState,n))}static _moveToLineStartByModel(e,t,n){return nt.fromModelState(Pn.moveToBeginningOfLine(e.cursorConfig,e.model,t.modelState,n))}static moveToEndOfLine(e,t,n,i){let o=[];for(let s=0,a=t.length;s<a;s++){let l=t[s];o[s]=this._moveToLineEnd(e,l,n,i)}return o}static _moveToLineEnd(e,t,n,i){let o=t.viewState.position,s=e.getLineMaxColumn(o.lineNumber),a=o.column===s,l=t.modelState.position,d=e.model.getLineMaxColumn(l.lineNumber),c=s-o.column===d-l.column;return a||c?this._moveToLineEndByModel(e,t,n,i):this._moveToLineEndByView(e,t,n,i)}static _moveToLineEndByView(e,t,n,i){return nt.fromViewState(Pn.moveToEndOfLine(e.cursorConfig,e,t.viewState,n,i))}static _moveToLineEndByModel(e,t,n,i){return nt.fromModelState(Pn.moveToEndOfLine(e.cursorConfig,e.model,t.modelState,n,i))}static expandLineSelection(e,t){let n=[];for(let i=0,o=t.length;i<o;i++){let s=t[i],a=s.modelState.selection.startLineNumber,l=e.model.getLineCount(),d=s.modelState.selection.endLineNumber,c;d===l?c=e.model.getLineMaxColumn(l):(d++,c=1),n[i]=nt.fromModelState(new ni(new D(a,1,a,1),0,0,new F(d,c),0))}return n}static moveToBeginningOfBuffer(e,t,n){let i=[];for(let o=0,s=t.length;o<s;o++){let a=t[o];i[o]=nt.fromModelState(Pn.moveToBeginningOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static moveToEndOfBuffer(e,t,n){let i=[];for(let o=0,s=t.length;o<s;o++){let a=t[o];i[o]=nt.fromModelState(Pn.moveToEndOfBuffer(e.cursorConfig,e.model,a.modelState,n))}return i}static selectAll(e,t){let n=e.model.getLineCount(),i=e.model.getLineMaxColumn(n);return nt.fromModelState(new ni(new D(1,1,1,1),0,0,new F(n,i),0))}static line(e,t,n,i,o){let s=e.model.validatePosition(i),a=o?e.coordinatesConverter.validateViewPosition(new F(o.lineNumber,o.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);if(!n){let d=e.model.getLineCount(),c=s.lineNumber+1,p=1;return c>d&&(c=d,p=e.model.getLineMaxColumn(c)),nt.fromModelState(new ni(new D(s.lineNumber,1,c,p),2,0,new F(c,p),0))}let l=t.modelState.selectionStart.getStartPosition().lineNumber;if(s.lineNumber<l)return nt.fromViewState(t.viewState.move(!0,a.lineNumber,1,0));if(s.lineNumber>l){let d=e.getLineCount(),c=a.lineNumber+1,p=1;return c>d&&(c=d,p=e.getLineMaxColumn(c)),nt.fromViewState(t.viewState.move(!0,c,p,0))}else{let d=t.modelState.selectionStart.getEndPosition();return nt.fromModelState(t.modelState.move(!0,d.lineNumber,d.column,0))}}static word(e,t,n,i){let o=e.model.validatePosition(i);return nt.fromModelState(zb.word(e.cursorConfig,e.model,t.modelState,n,o))}static cancelSelection(e,t){if(!t.modelState.hasSelection())return new nt(t.modelState,t.viewState);let n=t.viewState.position.lineNumber,i=t.viewState.position.column;return nt.fromViewState(new ni(new D(n,i,n,i),0,0,new F(n,i),0))}static moveTo(e,t,n,i,o){if(n){if(t.modelState.selectionStartKind===1)return this.word(e,t,n,i);if(t.modelState.selectionStartKind===2)return this.line(e,t,n,i,o)}let s=e.model.validatePosition(i),a=o?e.coordinatesConverter.validateViewPosition(new F(o.lineNumber,o.column),s):e.coordinatesConverter.convertModelPositionToViewPosition(s);return nt.fromViewState(t.viewState.move(n,a.lineNumber,a.column,0))}static simpleMove(e,t,n,i,o,s){switch(n){case Qe.Direction.Left:return s===Qe.Unit.HalfLine?this._moveHalfLineLeft(e,t,i):this._moveLeft(e,t,i,o);case Qe.Direction.Right:return s===Qe.Unit.HalfLine?this._moveHalfLineRight(e,t,i):this._moveRight(e,t,i,o);case Qe.Direction.Up:return s===Qe.Unit.WrappedLine?this._moveUpByViewLines(e,t,i,o):this._moveUpByModelLines(e,t,i,o);case Qe.Direction.Down:return s===Qe.Unit.WrappedLine?this._moveDownByViewLines(e,t,i,o):this._moveDownByModelLines(e,t,i,o);case Qe.Direction.PrevBlankLine:return s===Qe.Unit.WrappedLine?t.map(a=>nt.fromViewState(Pn.moveToPrevBlankLine(e.cursorConfig,e,a.viewState,i))):t.map(a=>nt.fromModelState(Pn.moveToPrevBlankLine(e.cursorConfig,e.model,a.modelState,i)));case Qe.Direction.NextBlankLine:return s===Qe.Unit.WrappedLine?t.map(a=>nt.fromViewState(Pn.moveToNextBlankLine(e.cursorConfig,e,a.viewState,i))):t.map(a=>nt.fromModelState(Pn.moveToNextBlankLine(e.cursorConfig,e.model,a.modelState,i)));case Qe.Direction.WrappedLineStart:return this._moveToViewMinColumn(e,t,i);case Qe.Direction.WrappedLineFirstNonWhitespaceCharacter:return this._moveToViewFirstNonWhitespaceColumn(e,t,i);case Qe.Direction.WrappedLineColumnCenter:return this._moveToViewCenterColumn(e,t,i);case Qe.Direction.WrappedLineEnd:return this._moveToViewMaxColumn(e,t,i);case Qe.Direction.WrappedLineLastNonWhitespaceCharacter:return this._moveToViewLastNonWhitespaceColumn(e,t,i);default:return null}}static viewportMove(e,t,n,i,o){let s=e.getCompletelyVisibleViewRange(),a=e.coordinatesConverter.convertViewRangeToModelRange(s);switch(n){case Qe.Direction.ViewPortTop:{let l=this._firstLineNumberInRange(e.model,a,o),d=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,d)]}case Qe.Direction.ViewPortBottom:{let l=this._lastLineNumberInRange(e.model,a,o),d=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,d)]}case Qe.Direction.ViewPortCenter:{let l=Math.round((a.startLineNumber+a.endLineNumber)/2),d=e.model.getLineFirstNonWhitespaceColumn(l);return[this._moveToModelPosition(e,t[0],i,l,d)]}case Qe.Direction.ViewPortIfOutside:{let l=[];for(let d=0,c=t.length;d<c;d++){let p=t[d];l[d]=this.findPositionInViewportIfOutside(e,p,s,i)}return l}default:return null}}static findPositionInViewportIfOutside(e,t,n,i){let o=t.viewState.position.lineNumber;if(n.startLineNumber<=o&&o<=n.endLineNumber-1)return new nt(t.modelState,t.viewState);{let s;o>n.endLineNumber-1?s=n.endLineNumber-1:o<n.startLineNumber?s=n.startLineNumber:s=o;let a=Pn.vertical(e.cursorConfig,e,o,t.viewState.position.column,t.viewState.leftoverVisibleColumns,s,!1);return nt.fromViewState(t.viewState.move(i,a.lineNumber,a.column,a.leftoverVisibleColumns))}}static _firstLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.min(t.endLineNumber,i+n-1)}static _lastLineNumberInRange(e,t,n){let i=t.startLineNumber;return t.startColumn!==e.getLineMinColumn(i)&&i++,Math.max(i,t.endLineNumber-n+1)}static _moveLeft(e,t,n,i){return t.map(o=>nt.fromViewState(Pn.moveLeft(e.cursorConfig,e,o.viewState,n,i)))}static _moveHalfLineLeft(e,t,n){let i=[];for(let o=0,s=t.length;o<s;o++){let a=t[o],l=a.viewState.position.lineNumber,d=Math.round(e.getLineLength(l)/2);i[o]=nt.fromViewState(Pn.moveLeft(e.cursorConfig,e,a.viewState,n,d))}return i}static _moveRight(e,t,n,i){return t.map(o=>nt.fromViewState(Pn.moveRight(e.cursorConfig,e,o.viewState,n,i)))}static _moveHalfLineRight(e,t,n){let i=[];for(let o=0,s=t.length;o<s;o++){let a=t[o],l=a.viewState.position.lineNumber,d=Math.round(e.getLineLength(l)/2);i[o]=nt.fromViewState(Pn.moveRight(e.cursorConfig,e,a.viewState,n,d))}return i}static _moveDownByViewLines(e,t,n,i){let o=[];for(let s=0,a=t.length;s<a;s++){let l=t[s];o[s]=nt.fromViewState(Pn.moveDown(e.cursorConfig,e,l.viewState,n,i))}return o}static _moveDownByModelLines(e,t,n,i){let o=[];for(let s=0,a=t.length;s<a;s++){let l=t[s];o[s]=nt.fromModelState(Pn.moveDown(e.cursorConfig,e.model,l.modelState,n,i))}return o}static _moveUpByViewLines(e,t,n,i){let o=[];for(let s=0,a=t.length;s<a;s++){let l=t[s];o[s]=nt.fromViewState(Pn.moveUp(e.cursorConfig,e,l.viewState,n,i))}return o}static _moveUpByModelLines(e,t,n,i){let o=[];for(let s=0,a=t.length;s<a;s++){let l=t[s];o[s]=nt.fromModelState(Pn.moveUp(e.cursorConfig,e.model,l.modelState,n,i))}return o}static _moveToViewPosition(e,t,n,i,o){return nt.fromViewState(t.viewState.move(n,i,o,0))}static _moveToModelPosition(e,t,n,i,o){return nt.fromModelState(t.modelState.move(n,i,o,0))}static _moveToViewMinColumn(e,t,n){let i=[];for(let o=0,s=t.length;o<s;o++){let a=t[o],l=a.viewState.position.lineNumber,d=e.getLineMinColumn(l);i[o]=this._moveToViewPosition(e,a,n,l,d)}return i}static _moveToViewFirstNonWhitespaceColumn(e,t,n){let i=[];for(let o=0,s=t.length;o<s;o++){let a=t[o],l=a.viewState.position.lineNumber,d=e.getLineFirstNonWhitespaceColumn(l);i[o]=this._moveToViewPosition(e,a,n,l,d)}return i}static _moveToViewCenterColumn(e,t,n){let i=[];for(let o=0,s=t.length;o<s;o++){let a=t[o],l=a.viewState.position.lineNumber,d=Math.round((e.getLineMaxColumn(l)+e.getLineMinColumn(l))/2);i[o]=this._moveToViewPosition(e,a,n,l,d)}return i}static _moveToViewMaxColumn(e,t,n){let i=[];for(let o=0,s=t.length;o<s;o++){let a=t[o],l=a.viewState.position.lineNumber,d=e.getLineMaxColumn(l);i[o]=this._moveToViewPosition(e,a,n,l,d)}return i}static _moveToViewLastNonWhitespaceColumn(e,t,n){let i=[];for(let o=0,s=t.length;o<s;o++){let a=t[o],l=a.viewState.position.lineNumber,d=e.getLineLastNonWhitespaceColumn(l);i[o]=this._moveToViewPosition(e,a,n,l,d)}return i}},Qe;(a=>{let r=function(l){if(!tn(l))return!1;let d=l;return!(!xt(d.to)||!Oi(d.select)&&!Cm(d.select)||!Oi(d.by)&&!xt(d.by)||!Oi(d.value)&&!Uo(d.value))};a.metadata={description:"Move cursor to a logical position in the view",args:[{name:"Cursor move argument object",description:`Property-value pairs that can be passed through this argument:
					* 'to': A mandatory logical position value providing where to move the cursor.
						\`\`\`
						'left', 'right', 'up', 'down', 'prevBlankLine', 'nextBlankLine',
						'wrappedLineStart', 'wrappedLineEnd', 'wrappedLineColumnCenter'
						'wrappedLineFirstNonWhitespaceCharacter', 'wrappedLineLastNonWhitespaceCharacter'
						'viewPortTop', 'viewPortCenter', 'viewPortBottom', 'viewPortIfOutside'
						\`\`\`
					* 'by': Unit to move. Default is computed based on 'to' value.
						\`\`\`
						'line', 'wrappedLine', 'character', 'halfLine'
						\`\`\`
					* 'value': Number of units to move. Default is '1'.
					* 'select': If 'true' makes the selection. Default is 'false'.
				`,constraint:r,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["left","right","up","down","prevBlankLine","nextBlankLine","wrappedLineStart","wrappedLineEnd","wrappedLineColumnCenter","wrappedLineFirstNonWhitespaceCharacter","wrappedLineLastNonWhitespaceCharacter","viewPortTop","viewPortCenter","viewPortBottom","viewPortIfOutside"]},by:{type:"string",enum:["line","wrappedLine","character","halfLine"]},value:{type:"number",default:1},select:{type:"boolean",default:!1}}}}]},a.RawDirection={Left:"left",Right:"right",Up:"up",Down:"down",PrevBlankLine:"prevBlankLine",NextBlankLine:"nextBlankLine",WrappedLineStart:"wrappedLineStart",WrappedLineFirstNonWhitespaceCharacter:"wrappedLineFirstNonWhitespaceCharacter",WrappedLineColumnCenter:"wrappedLineColumnCenter",WrappedLineEnd:"wrappedLineEnd",WrappedLineLastNonWhitespaceCharacter:"wrappedLineLastNonWhitespaceCharacter",ViewPortTop:"viewPortTop",ViewPortCenter:"viewPortCenter",ViewPortBottom:"viewPortBottom",ViewPortIfOutside:"viewPortIfOutside"},a.RawUnit={Line:"line",WrappedLine:"wrappedLine",Character:"character",HalfLine:"halfLine"};function i(l){if(!l.to)return null;let d;switch(l.to){case a.RawDirection.Left:d=0;break;case a.RawDirection.Right:d=1;break;case a.RawDirection.Up:d=2;break;case a.RawDirection.Down:d=3;break;case a.RawDirection.PrevBlankLine:d=4;break;case a.RawDirection.NextBlankLine:d=5;break;case a.RawDirection.WrappedLineStart:d=6;break;case a.RawDirection.WrappedLineFirstNonWhitespaceCharacter:d=7;break;case a.RawDirection.WrappedLineColumnCenter:d=8;break;case a.RawDirection.WrappedLineEnd:d=9;break;case a.RawDirection.WrappedLineLastNonWhitespaceCharacter:d=10;break;case a.RawDirection.ViewPortTop:d=11;break;case a.RawDirection.ViewPortBottom:d=13;break;case a.RawDirection.ViewPortCenter:d=12;break;case a.RawDirection.ViewPortIfOutside:d=14;break;default:return null}let c=0;switch(l.by){case a.RawUnit.Line:c=1;break;case a.RawUnit.WrappedLine:c=2;break;case a.RawUnit.Character:c=3;break;case a.RawUnit.HalfLine:c=4;break}return{direction:d,unit:c,select:!!l.select,value:l.value||1}}a.parse=i;let o;(R=>(R[R.Left=0]="Left",R[R.Right=1]="Right",R[R.Up=2]="Up",R[R.Down=3]="Down",R[R.PrevBlankLine=4]="PrevBlankLine",R[R.NextBlankLine=5]="NextBlankLine",R[R.WrappedLineStart=6]="WrappedLineStart",R[R.WrappedLineFirstNonWhitespaceCharacter=7]="WrappedLineFirstNonWhitespaceCharacter",R[R.WrappedLineColumnCenter=8]="WrappedLineColumnCenter",R[R.WrappedLineEnd=9]="WrappedLineEnd",R[R.WrappedLineLastNonWhitespaceCharacter=10]="WrappedLineLastNonWhitespaceCharacter",R[R.ViewPortTop=11]="ViewPortTop",R[R.ViewPortCenter=12]="ViewPortCenter",R[R.ViewPortBottom=13]="ViewPortBottom",R[R.ViewPortIfOutside=14]="ViewPortIfOutside"))(o=a.Direction||={});let s;(g=>(g[g.None=0]="None",g[g.Line=1]="Line",g[g.WrappedLine=2]="WrappedLine",g[g.Character=3]="Character",g[g.HalfLine=4]="HalfLine"))(s=a.Unit||={})})(Qe||={});function JZ(r,e,t){let n=r.tokenization.getLanguageIdAtPosition(e,0);if(e>1){let i,o=-1;for(i=e-1;i>=1;i--){if(r.tokenization.getLanguageIdAtPosition(i,0)!==n)return o;let s=r.getLineContent(i);if(t.shouldIgnore(i)||/^\s+$/.test(s)||s===""){o=i;continue}return i}}return-1}function oC(r,e,t,n=!0,i){if(r<4)return null;let o=i.getLanguageConfiguration(e.tokenization.getLanguageId()).indentRulesSupport;if(!o)return null;let s=new UL(e,o,i);if(t<=1)return{indentation:"",action:null};for(let l=t-1;l>0&&e.getLineContent(l)==="";l--)if(l===1)return{indentation:"",action:null};let a=JZ(e,t,s);if(a<0)return null;if(a<1)return{indentation:"",action:null};if(s.shouldIncrease(a)||s.shouldIndentNextLine(a)){let l=e.getLineContent(a);return{indentation:an(l),action:1,line:a}}else if(s.shouldDecrease(a)){let l=e.getLineContent(a);return{indentation:an(l),action:null,line:a}}else{if(a===1)return{indentation:an(e.getLineContent(a)),action:null,line:a};let l=a-1,d=o.getIndentMetadata(e.getLineContent(l));if(!(d&3)&&d&4){let c=0;for(let p=l-1;p>0;p--)if(!s.shouldIndentNextLine(p)){c=p;break}return{indentation:an(e.getLineContent(c+1)),action:null,line:c+1}}if(n)return{indentation:an(e.getLineContent(a)),action:null,line:a};for(let c=a;c>0;c--){if(s.shouldIncrease(c))return{indentation:an(e.getLineContent(c)),action:1,line:c};if(s.shouldIndentNextLine(c)){let p=0;for(let h=c-1;h>0;h--)if(!s.shouldIndentNextLine(c)){p=h;break}return{indentation:an(e.getLineContent(p+1)),action:null,line:p+1}}else if(s.shouldDecrease(c))return{indentation:an(e.getLineContent(c)),action:null,line:c}}return{indentation:an(e.getLineContent(1)),action:null,line:1}}}function U9(r,e,t,n,i){if(r<4)return null;let o=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),s=i.getLanguageConfiguration(o).indentRulesSupport;if(!s)return null;e.tokenization.forceTokenization(t.startLineNumber);let l=new Lg(e,i).getProcessedTokenContextAroundRange(t),d=l.afterRangeProcessedTokens,c=l.beforeRangeProcessedTokens,p=an(c.getLineContent()),h=eJ(e,t.startLineNumber,c),g=zL(e,t.getStartPosition()),f=e.getLineContent(t.startLineNumber),m=an(f),b=oC(r,h,t.startLineNumber+1,void 0,i);if(!b){let S=g?m:p;return{beforeEnter:S,afterEnter:S}}let v=g?m:b.indentation;return b.action===1&&(v=n.shiftIndent(v)),s.shouldDecrease(d.getLineContent())&&(v=n.unshiftIndent(v)),{beforeEnter:g?m:p,afterEnter:v}}function z9(r,e,t,n,i,o){let s=r.autoIndent;if(s<4||zL(e,t.getStartPosition()))return null;let l=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),d=o.getLanguageConfiguration(l).indentRulesSupport;if(!d)return null;let p=new Lg(e,o).getProcessedTokenContextAroundRange(t),h=p.beforeRangeProcessedTokens.getLineContent(),g=p.afterRangeProcessedTokens.getLineContent(),f=h+g,m=h+n+g;if(!d.shouldDecrease(f)&&d.shouldDecrease(m)){let v=oC(s,e,t.startLineNumber,!1,o);if(!v)return null;let S=v.indentation;return v.action!==1&&(S=i.unshiftIndent(S)),S}let b=t.startLineNumber-1;if(b>0){let v=e.getLineContent(b);if(d.shouldIndentNextLine(v)&&d.shouldIncrease(m)){let x=oC(s,e,t.startLineNumber,!1,o)?.indentation;if(x!==void 0){let E=e.getLineContent(t.startLineNumber),w=an(E),R=i.shiftIndent(x)===w,O=/^\s*$/.test(f),M=r.autoClosingPairs.autoClosingPairsOpenByEnd.get(n),$=M&&M.length>0&&O;if(R&&$)return x}}}return null}function eJ(r,e,t){return{tokenization:{getLineTokens:i=>i===e?t:r.tokenization.getLineTokens(i),getLanguageId:()=>r.getLanguageId(),getLanguageIdAtPosition:(i,o)=>r.getLanguageIdAtPosition(i,o)},getLineContent:i=>i===e?t.getLineContent():r.getLineContent(i)}}var UL=class{_indentRulesSupport;_indentationLineProcessor;constructor(e,t,n){this._indentRulesSupport=t,this._indentationLineProcessor=new KL(e,n)}shouldIncrease(e,t){let n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIncrease(n)}shouldDecrease(e,t){let n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldDecrease(n)}shouldIgnore(e,t){let n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIgnore(n)}shouldIndentNextLine(e,t){let n=this._indentationLineProcessor.getProcessedLine(e,t);return this._indentRulesSupport.shouldIndentNextLine(n)}},Lg=class{model;indentationLineProcessor;constructor(e,t){this.model=e,this.indentationLineProcessor=new KL(e,t)}getProcessedTokenContextAroundRange(e){let t=this._getProcessedTokensBeforeRange(e),n=this._getProcessedTokensAfterRange(e),i=this._getProcessedPreviousLineTokens(e);return{beforeRangeProcessedTokens:t,afterRangeProcessedTokens:n,previousLineProcessedTokens:i}}_getProcessedTokensBeforeRange(e){this.model.tokenization.forceTokenization(e.startLineNumber);let t=this.model.tokenization.getLineTokens(e.startLineNumber),n=ed(t,e.startColumn-1),i;if(zL(this.model,e.getStartPosition())){let s=e.startColumn-1-n.firstCharOffset,a=n.firstCharOffset,l=a+s;i=t.sliceAndInflate(a,l,0)}else{let s=e.startColumn-1;i=t.sliceAndInflate(0,s,0)}return this.indentationLineProcessor.getProcessedTokens(i)}_getProcessedTokensAfterRange(e){let t=e.isEmpty()?e.getStartPosition():e.getEndPosition();this.model.tokenization.forceTokenization(t.lineNumber);let n=this.model.tokenization.getLineTokens(t.lineNumber),i=ed(n,t.column-1),o=t.column-1-i.firstCharOffset,s=i.firstCharOffset+o,a=i.firstCharOffset+i.getLineLength(),l=n.sliceAndInflate(s,a,0);return this.indentationLineProcessor.getProcessedTokens(l)}_getProcessedPreviousLineTokens(e){let t=g=>{this.model.tokenization.forceTokenization(g);let f=this.model.tokenization.getLineTokens(g),m=this.model.getLineMaxColumn(g)-1;return ed(f,m)};this.model.tokenization.forceTokenization(e.startLineNumber);let n=this.model.tokenization.getLineTokens(e.startLineNumber),i=ed(n,e.startColumn-1),o=zn.createEmpty("",i.languageIdCodec),s=e.startLineNumber-1;if(s===0||!(i.firstCharOffset===0))return o;let d=t(s);if(!(i.languageId===d.languageId))return o;let p=d.toIViewLineTokens();return this.indentationLineProcessor.getProcessedTokens(p)}},KL=class{constructor(e,t){this.model=e;this.languageConfigurationService=t}getProcessedLine(e,t){let n=(s,a)=>{let l=an(s);return a+s.substring(l.length)};this.model.tokenization.forceTokenization?.(e);let i=this.model.tokenization.getLineTokens(e),o=this.getProcessedTokens(i).getLineContent();return t!==void 0&&(o=n(o,t)),o}getProcessedTokens(e){let t=l=>l===2||l===3||l===1,n=e.getLanguageId(0),o=this.languageConfigurationService.getLanguageConfiguration(n).bracketsNew.getBracketRegExp({global:!0}),s=[];return e.forEach(l=>{let d=e.getStandardTokenType(l),c=e.getTokenText(l);t(d)&&(c=c.replace(o,""));let p=e.getMetadata(l);s.push({text:c,metadata:p})}),zn.createFromTextAndMetadata(s,e.languageIdCodec)}};function zL(r,e){r.tokenization.forceTokenization(e.lineNumber);let t=r.tokenization.getLineTokens(e.lineNumber),n=ed(t,e.column-1),i=n.firstCharOffset===0,o=t.getLanguageId(0)===n.languageId;return!i&&!o}function rC(r,e,t,n){e.tokenization.forceTokenization(t.startLineNumber);let i=e.getLanguageIdAtPosition(t.startLineNumber,t.startColumn),o=n.getLanguageConfiguration(i);if(!o)return null;let a=new Lg(e,n).getProcessedTokenContextAroundRange(t),l=a.previousLineProcessedTokens.getLineContent(),d=a.beforeRangeProcessedTokens.getLineContent(),c=a.afterRangeProcessedTokens.getLineContent(),p=o.onEnter(r,l,d,c);if(!p)return null;let h=p.indentAction,g=p.appendText,f=p.removeText||0;g?h===1&&(g="	"+g):h===1||h===2?g="	":g="";let m=vT(e,t.startLineNumber,t.startColumn);return f&&(m=m.substring(0,m.length-f)),{indentAction:h,appendText:g,removeText:f,indentation:m}}var NB=Object.create(null);function kg(r,e){if(e<=0)return"";NB[r]||(NB[r]=["",r]);let t=NB[r];for(let n=t.length;n<=e;n++)t[n]=t[n-1]+r;return t[e]}var Is=class{constructor(e,t,n){this._languageConfigurationService=n;this._opts=t,this._selection=e,this._selectionId=null,this._useLastEditRangeForCursorEndPosition=!1,this._selectionStartColumnStaysPut=!1}static unshiftIndent(e,t,n,i,o){let s=jt.visibleColumnFromColumn(e,t,n);if(o){let a=kg(" ",i),d=jt.prevIndentTabStop(s,i)/i;return kg(a,d)}else{let a="	",d=jt.prevRenderTabStop(s,n)/n;return kg(a,d)}}static shiftIndent(e,t,n,i,o){let s=jt.visibleColumnFromColumn(e,t,n);if(o){let a=kg(" ",i),d=jt.nextIndentTabStop(s,i)/i;return kg(a,d)}else{let a="	",d=jt.nextRenderTabStop(s,n)/n;return kg(a,d)}}_opts;_selection;_selectionId;_useLastEditRangeForCursorEndPosition;_selectionStartColumnStaysPut;_addEditOperation(e,t,n){this._useLastEditRangeForCursorEndPosition?e.addTrackedEditOperation(t,n):e.addEditOperation(t,n)}getEditOperations(e,t){let n=this._selection.startLineNumber,i=this._selection.endLineNumber;this._selection.endColumn===1&&n!==i&&(i=i-1);let{tabSize:o,indentSize:s,insertSpaces:a}=this._opts,l=n===i;if(this._opts.useTabStops){this._selection.isEmpty()&&/^\s*$/.test(e.getLineContent(n))&&(this._useLastEditRangeForCursorEndPosition=!0);let d=0,c=0;for(let p=n;p<=i;p++,d=c){c=0;let h=e.getLineContent(p),g=kn(h);if(this._opts.isUnshift&&(h.length===0||g===0)||!l&&!this._opts.isUnshift&&h.length===0)continue;if(g===-1&&(g=h.length),p>1&&jt.visibleColumnFromColumn(h,g+1,o)%s!==0&&e.tokenization.isCheapToTokenize(p-1)){let b=rC(this._opts.autoIndent,e,new D(p-1,e.getLineMaxColumn(p-1),p-1,e.getLineMaxColumn(p-1)),this._languageConfigurationService);if(b){if(c=d,b.appendText)for(let v=0,S=b.appendText.length;v<S&&c<s&&b.appendText.charCodeAt(v)===32;v++)c++;b.removeText&&(c=Math.max(0,c-b.removeText));for(let v=0;v<c&&!(g===0||h.charCodeAt(g-1)!==32);v++)g--}}if(this._opts.isUnshift&&g===0)continue;let f;this._opts.isUnshift?f=Is.unshiftIndent(h,g+1,o,s,a):f=Is.shiftIndent(h,g+1,o,s,a),this._addEditOperation(t,new D(p,1,p,g+1),f),p===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn<=g+1)}}else{!this._opts.isUnshift&&this._selection.isEmpty()&&e.getLineLength(n)===0&&(this._useLastEditRangeForCursorEndPosition=!0);let d=a?kg(" ",s):"	";for(let c=n;c<=i;c++){let p=e.getLineContent(c),h=kn(p);if(!(this._opts.isUnshift&&(p.length===0||h===0))&&!(!l&&!this._opts.isUnshift&&p.length===0)&&(h===-1&&(h=p.length),!(this._opts.isUnshift&&h===0)))if(this._opts.isUnshift){h=Math.min(h,s);for(let g=0;g<h;g++)if(p.charCodeAt(g)===9){h=g+1;break}this._addEditOperation(t,new D(c,1,c,h+1),"")}else this._addEditOperation(t,new D(c,1,c,1),d),c===n&&!this._selection.isEmpty()&&(this._selectionStartColumnStaysPut=this._selection.startColumn===1)}}this._selectionId=t.trackSelection(this._selection)}computeCursorState(e,t){if(this._useLastEditRangeForCursorEndPosition){let i=t.getInverseEditOperations()[0];return new ze(i.range.endLineNumber,i.range.endColumn,i.range.endLineNumber,i.range.endColumn)}let n=t.getTrackedSelection(this._selectionId);if(this._selectionStartColumnStaysPut){let i=this._selection.startColumn;return n.startColumn<=i?n:n.getDirection()===0?new ze(n.startLineNumber,i,n.endLineNumber,n.endColumn):new ze(n.endLineNumber,n.endColumn,n.startLineNumber,i)}return n}};Is=_([y(2,Qn)],Is);var GL=class{_range;_charBeforeSelection;_charAfterSelection;constructor(e,t,n){this._range=e,this._charBeforeSelection=t,this._charAfterSelection=n}getEditOperations(e,t){t.addTrackedEditOperation(new D(this._range.startLineNumber,this._range.startColumn,this._range.startLineNumber,this._range.startColumn),this._charBeforeSelection),t.addTrackedEditOperation(new D(this._range.endLineNumber,this._range.endColumn,this._range.endLineNumber,this._range.endColumn),this._charAfterSelection)}computeCursorState(e,t){let n=t.getInverseEditOperations(),i=n[0].range,o=n[1].range;return new ze(i.endLineNumber,i.endColumn,o.endLineNumber,o.endColumn-this._charAfterSelection.length)}},jL=class{constructor(e,t,n){this._position=e;this._text=t;this._charAfter=n}getEditOperations(e,t){t.addTrackedEditOperation(new D(this._position.lineNumber,this._position.column,this._position.lineNumber,this._position.column),this._text+this._charAfter)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return new ze(i.endLineNumber,i.startColumn,i.endLineNumber,i.endColumn-this._charAfter.length)}};var $L=class{static getEdits(e,t,n,i,o){if(!o&&this._isAutoIndentType(e,t,n)){let s=[];for(let l of n){let d=this._findActualIndentationForSelection(e,t,l,i);if(d===null)return;s.push({selection:l,indentation:d})}let a=Kb.getAutoClosingPairClose(e,t,n,i,!1);return this._getIndentationAndAutoClosingPairEdits(e,t,s,i,a)}}static _isAutoIndentType(e,t,n){if(e.autoIndent<4)return!1;for(let i=0,o=n.length;i<o;i++)if(!t.tokenization.isCheapToTokenize(n[i].getEndPosition().lineNumber))return!1;return!0}static _findActualIndentationForSelection(e,t,n,i){let o=z9(e,t,n,i,{shiftIndent:a=>sC(e,a),unshiftIndent:a=>$b(e,a)},e.languageConfigurationService);if(o===null)return null;let s=vT(t,n.startLineNumber,n.startColumn);return o===e.normalizeIndentation(s)?null:o}static _getIndentationAndAutoClosingPairEdits(e,t,n,i,o){let s=n.map(({selection:l,indentation:d})=>{if(o!==null){let c=this._getEditFromIndentationAndSelection(e,t,d,l,i,!1);return new BB(c,l,i,o)}else{let c=this._getEditFromIndentationAndSelection(e,t,d,l,i,!0);return Rg(c.range,c.text,!1)}}),a={shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1};return new Si(4,s,a)}static _getEditFromIndentationAndSelection(e,t,n,i,o,s=!0){let a=i.startLineNumber,l=t.getLineFirstNonWhitespaceColumn(a),d=e.normalizeIndentation(n);if(l!==0){let p=t.getLineContent(a);d+=p.substring(l-1,i.startColumn-1)}return d+=s?o:"",{range:new D(a,1,i.endLineNumber,i.endColumn),text:d}}},qL=class{static getEdits(e,t,n,i,o,s){if(j9(t,n,i,o,s))return this._runAutoClosingOvertype(e,i,s)}static _runAutoClosingOvertype(e,t,n){let i=[];for(let o=0,s=t.length;o<s;o++){let l=t[o].getPosition(),d=new D(l.lineNumber,l.column,l.lineNumber,l.column+1);i[o]=new Co(d,n)}return new Si(4,i,{shouldPushStackElementBefore:ik(e,4),shouldPushStackElementAfter:!1})}},YL=class{static getEdits(e,t,n,i,o){if(j9(e,t,n,i,o)){let s=n.map(a=>new Co(new D(a.positionLineNumber,a.positionColumn,a.positionLineNumber,a.positionColumn+1),"",!1));return new Si(4,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}},Kb=class{static getEdits(e,t,n,i,o,s){if(!s){let a=this.getAutoClosingPairClose(e,t,n,i,o);if(a!==null)return this._runAutoClosingOpenCharType(n,i,o,a)}}static _runAutoClosingOpenCharType(e,t,n,i){let o=[];for(let s=0,a=e.length;s<a;s++){let l=e[s];o[s]=new FB(l,t,!n,i)}return new Si(4,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}static getAutoClosingPairClose(e,t,n,i,o){for(let f of n)if(!f.isEmpty())return null;let s=n.map(f=>{let m=f.getPosition();return o?{lineNumber:m.lineNumber,beforeColumn:m.column-i.length,afterColumn:m.column}:{lineNumber:m.lineNumber,beforeColumn:m.column,afterColumn:m.column}}),a=this._findAutoClosingPairOpen(e,t,s.map(f=>new F(f.lineNumber,f.beforeColumn)),i);if(!a)return null;let l,d;if(Ya(i)?(l=e.autoClosingQuotes,d=e.shouldAutoCloseBefore.quote):(e.blockCommentStartToken?a.open.includes(e.blockCommentStartToken):!1)?(l=e.autoClosingComments,d=e.shouldAutoCloseBefore.comment):(l=e.autoClosingBrackets,d=e.shouldAutoCloseBefore.bracket),l==="never")return null;let p=this._findContainedAutoClosingPair(e,a),h=p?p.close:"",g=!0;for(let f of s){let{lineNumber:m,beforeColumn:b,afterColumn:v}=f,S=t.getLineContent(m),x=S.substring(0,b-1),E=S.substring(v-1);if(E.startsWith(h)||(g=!1),E.length>0){let O=E.charAt(0);if(!this._isBeforeClosingBrace(e,E)&&!d(O))return null}if(a.open.length===1&&(i==="'"||i==='"')&&l!=="always"){let O=Yl(e.wordSeparators,[]);if(x.length>0){let M=x.charCodeAt(x.length-1);if(O.get(M)===0)return null}}if(!t.tokenization.isCheapToTokenize(m))return null;t.tokenization.forceTokenization(m);let w=t.tokenization.getLineTokens(m),P=ed(w,b-1);if(!a.shouldAutoClose(P,b-P.firstCharOffset))return null;let R=a.findNeutralCharacter();if(R){let O=t.tokenization.getTokenTypeIfInsertingCharacter(m,b,R);if(!a.isOK(O))return null}}return g?a.close.substring(0,a.close.length-h.length):a.close}static _findContainedAutoClosingPair(e,t){if(t.open.length<=1)return null;let n=t.close.charAt(t.close.length-1),i=e.autoClosingPairs.autoClosingPairsCloseByEnd.get(n)||[],o=null;for(let s of i)s.open!==t.open&&t.open.includes(s.open)&&t.close.endsWith(s.close)&&(!o||s.open.length>o.open.length)&&(o=s);return o}static _findAutoClosingPairOpen(e,t,n,i){let o=e.autoClosingPairs.autoClosingPairsOpenByEnd.get(i);if(!o)return null;let s=null;for(let a of o)if(s===null||a.open.length>s.open.length){let l=!0;for(let d of n)if(t.getValueInRange(new D(d.lineNumber,d.column-a.open.length+1,d.lineNumber,d.column))+i!==a.open){l=!1;break}l&&(s=a)}return s}static _isBeforeClosingBrace(e,t){let n=t.charAt(0),i=e.autoClosingPairs.autoClosingPairsOpenByStart.get(n)||[],o=e.autoClosingPairs.autoClosingPairsCloseByStart.get(n)||[],s=i.some(l=>t.startsWith(l.open)),a=o.some(l=>t.startsWith(l.close));return!s&&a}},XL=class{static getEdits(e,t,n,i,o){if(!o&&this._isSurroundSelectionType(e,t,n,i))return this._runSurroundSelectionType(e,n,i)}static _runSurroundSelectionType(e,t,n){let i=[];for(let o=0,s=t.length;o<s;o++){let a=t[o],l=e.surroundingPairs[n];i[o]=new GL(a,n,l)}return new Si(0,i,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _isSurroundSelectionType(e,t,n,i){if(!VB(e,i)||!e.surroundingPairs.hasOwnProperty(i))return!1;let o=Ya(i);for(let s of n){if(s.isEmpty())return!1;let a=!0;for(let l=s.startLineNumber;l<=s.endLineNumber;l++){let d=t.getLineContent(l),c=l===s.startLineNumber?s.startColumn-1:0,p=l===s.endLineNumber?s.endColumn-1:d.length,h=d.substring(c,p);if(/[^ \t]/.test(h)){a=!1;break}}if(a)return!1;if(o&&s.startLineNumber===s.endLineNumber&&s.startColumn+1===s.endColumn){let l=t.getValueInRange(s);if(Ya(l))return!1}}return!0}},QL=class{static getEdits(e,t,n,i,o,s){if(!s&&this._isTypeInterceptorElectricChar(t,n,i)){let a=this._typeInterceptorElectricChar(e,t,n,i[0],o);if(a)return a}}static _isTypeInterceptorElectricChar(e,t,n){return!!(n.length===1&&t.tokenization.isCheapToTokenize(n[0].getEndPosition().lineNumber))}static _typeInterceptorElectricChar(e,t,n,i,o){if(!t.electricChars.hasOwnProperty(o)||!i.isEmpty())return null;let s=i.getPosition();n.tokenization.forceTokenization(s.lineNumber);let a=n.tokenization.getLineTokens(s.lineNumber),l;try{l=t.onElectricCharacter(o,a,s.column)}catch(d){return Be(d),null}if(!l)return null;if(l.matchOpenBracket){let d=(a.getLineContent()+o).lastIndexOf(l.matchOpenBracket)+1,c=n.bracketPairs.findMatchingBracketUp(l.matchOpenBracket,{lineNumber:s.lineNumber,column:d},500);if(c){if(c.startLineNumber===s.lineNumber)return null;let p=n.getLineContent(c.startLineNumber),h=an(p),g=t.normalizeIndentation(h),f=n.getLineContent(s.lineNumber),m=n.getLineFirstNonWhitespaceColumn(s.lineNumber)||s.column,b=f.substring(m-1,s.column-1),v=g+b+o,S=new D(s.lineNumber,1,s.lineNumber,s.column),x=new Co(S,v);return new Si(WB(v,e),[x],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!0})}}return null}},ZL=class{static getEdits(e,t,n){let i=[];for(let s=0,a=t.length;s<a;s++)i[s]=new Co(t[s],n);let o=WB(n,e);return new Si(o,i,{shouldPushStackElementBefore:ik(e,o),shouldPushStackElementAfter:!1})}},Gb=class{static getEdits(e,t,n,i,o){if(!o&&i===`
`){let s=[];for(let a=0,l=n.length;a<l;a++)s[a]=this._enter(e,t,!1,n[a]);return new Si(4,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}}static _enter(e,t,n,i){if(e.autoIndent===0)return Rg(i,`
`,n);if(!t.tokenization.isCheapToTokenize(i.getStartPosition().lineNumber)||e.autoIndent===1){let l=t.getLineContent(i.startLineNumber),d=an(l).substring(0,i.startColumn-1);return Rg(i,`
`+e.normalizeIndentation(d),n)}let o=rC(e.autoIndent,t,i,e.languageConfigurationService);if(o){if(o.indentAction===0)return Rg(i,`
`+e.normalizeIndentation(o.indentation+o.appendText),n);if(o.indentAction===1)return Rg(i,`
`+e.normalizeIndentation(o.indentation+o.appendText),n);if(o.indentAction===2){let l=e.normalizeIndentation(o.indentation),d=e.normalizeIndentation(o.indentation+o.appendText),c=`
`+d+`
`+l;return n?new _g(i,c,!0):new Dg(i,c,-1,d.length-l.length,!0)}else if(o.indentAction===3){let l=$b(e,o.indentation);return Rg(i,`
`+e.normalizeIndentation(l+o.appendText),n)}}let s=t.getLineContent(i.startLineNumber),a=an(s).substring(0,i.startColumn-1);if(e.autoIndent>=4){let l=U9(e.autoIndent,t,i,{unshiftIndent:d=>$b(e,d),shiftIndent:d=>sC(e,d),normalizeIndentation:d=>e.normalizeIndentation(d)},e.languageConfigurationService);if(l){let d=e.visibleColumnFromColumn(t,i.getEndPosition()),c=i.endColumn,p=t.getLineContent(i.endLineNumber),h=kn(p);if(h>=0?i=i.setEndPosition(i.endLineNumber,Math.max(i.endColumn,h+1)):i=i.setEndPosition(i.endLineNumber,t.getLineMaxColumn(i.endLineNumber)),n)return new _g(i,`
`+e.normalizeIndentation(l.afterEnter),!0);{let g=0;return c<=h+1&&(e.insertSpaces||(d=Math.ceil(d/e.indentSize)),g=Math.min(d+1-e.normalizeIndentation(l.afterEnter).length-1,0)),new Dg(i,`
`+e.normalizeIndentation(l.afterEnter),0,g,!0)}}}return Rg(i,`
`+e.normalizeIndentation(a),n)}static lineInsertBefore(e,t,n){if(t===null||n===null)return[];let i=[];for(let o=0,s=n.length;o<s;o++){let a=n[o].positionLineNumber;if(a===1)i[o]=new _g(new D(1,1,1,1),`
`);else{a--;let l=t.getLineMaxColumn(a);i[o]=this._enter(e,t,!1,new D(a,l,a,l))}}return i}static lineInsertAfter(e,t,n){if(t===null||n===null)return[];let i=[];for(let o=0,s=n.length;o<s;o++){let a=n[o].positionLineNumber,l=t.getLineMaxColumn(a);i[o]=this._enter(e,t,!1,new D(a,l,a,l))}return i}static lineBreakInsert(e,t,n){let i=[];for(let o=0,s=n.length;o<s;o++)i[o]=this._enter(e,t,!0,n[o]);return i}},JL=class{static getEdits(e,t,n,i,o,s){let a=this._distributePasteToCursors(e,n,i,o,s);return a?(n=n.sort(D.compareRangesUsingStarts),this._distributedPaste(e,t,n,a)):this._simplePaste(e,t,n,i,o)}static _distributePasteToCursors(e,t,n,i,o){if(i||t.length===1)return null;if(o&&o.length===t.length)return o;if(e.multiCursorPaste==="spread"){n.charCodeAt(n.length-1)===10&&(n=n.substring(0,n.length-1)),n.charCodeAt(n.length-1)===13&&(n=n.substring(0,n.length-1));let s=Ma(n);if(s.length===t.length)return s}return null}static _distributedPaste(e,t,n,i){let o=[];for(let s=0,a=n.length;s<a;s++)o[s]=new Co(n[s],i[s]);return new Si(0,o,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}static _simplePaste(e,t,n,i,o){let s=[];for(let a=0,l=n.length;a<l;a++){let d=n[a],c=d.getPosition();if(o&&!d.isEmpty()&&(o=!1),o&&i.indexOf(`
`)!==i.length-1&&(o=!1),o){let p=new D(c.lineNumber,1,c.lineNumber,1);s[a]=new VL(p,i,d,!0)}else s[a]=new Co(d,i)}return new Si(0,s,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!0})}},ek=class{static getEdits(e,t,n,i,o,s,a,l){let d=i.map(c=>this._compositionType(n,c,o,s,a,l));return new Si(4,d,{shouldPushStackElementBefore:ik(e,4),shouldPushStackElementAfter:!1})}static _compositionType(e,t,n,i,o,s){if(!t.isEmpty())return null;let a=t.getPosition(),l=Math.max(1,a.column-i),d=Math.min(e.getLineMaxColumn(a.lineNumber),a.column+o),c=new D(a.lineNumber,l,a.lineNumber,d);return e.getValueInRange(c)===n&&s===0?null:new Dg(c,n,0,s)}},tk=class{static getEdits(e,t,n){let i=[];for(let s=0,a=t.length;s<a;s++)i[s]=new Co(t[s],n);let o=WB(n,e);return new Si(o,i,{shouldPushStackElementBefore:ik(e,o),shouldPushStackElementAfter:!1})}},nk=class{static getCommands(e,t,n){let i=[];for(let o=0,s=n.length;o<s;o++){let a=n[o];if(a.isEmpty()){let l=t.getLineContent(a.startLineNumber);if(/^\s*$/.test(l)&&t.tokenization.isCheapToTokenize(a.startLineNumber)){let d=this._goodIndentForLine(e,t,a.startLineNumber);d=d||"	";let c=e.normalizeIndentation(d);if(!l.startsWith(c)){i[o]=new Co(new D(a.startLineNumber,1,a.startLineNumber,l.length+1),c,!0);continue}}i[o]=this._replaceJumpToNextIndent(e,t,a,!0)}else{if(a.startLineNumber===a.endLineNumber){let l=t.getLineMaxColumn(a.startLineNumber);if(a.startColumn!==1||a.endColumn!==l){i[o]=this._replaceJumpToNextIndent(e,t,a,!1);continue}}i[o]=new Is(a,{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService)}}return i}static _goodIndentForLine(e,t,n){let i=null,o="",s=oC(e.autoIndent,t,n,!1,e.languageConfigurationService);if(s)i=s.action,o=s.indentation;else if(n>1){let a;for(a=n-1;a>=1;a--){let c=t.getLineContent(a);if(Ds(c)>=0)break}if(a<1)return null;let l=t.getLineMaxColumn(a),d=rC(e.autoIndent,t,new D(a,l,a,l),e.languageConfigurationService);d&&(o=d.indentation+d.appendText)}return i&&(i===1&&(o=sC(e,o)),i===3&&(o=$b(e,o)),o=e.normalizeIndentation(o)),o||null}static _replaceJumpToNextIndent(e,t,n,i){let o="",s=n.getStartPosition();if(e.insertSpaces){let a=e.visibleColumnFromColumn(t,s),l=e.indentSize,d=l-a%l;for(let c=0;c<d;c++)o+=" "}else o="	";return new Co(n,o,i)}},jb=class extends Dg{_openCharacter;_closeCharacter;closeCharacterRange;enclosingRange;constructor(e,t,n,i,o,s){super(e,t,n,i),this._openCharacter=o,this._closeCharacter=s,this.closeCharacterRange=null,this.enclosingRange=null}_computeCursorStateWithRange(e,t,n){return this.closeCharacterRange=new D(t.startLineNumber,t.endColumn-this._closeCharacter.length,t.endLineNumber,t.endColumn),this.enclosingRange=new D(t.startLineNumber,t.endColumn-this._openCharacter.length-this._closeCharacter.length,t.endLineNumber,t.endColumn),super.computeCursorState(e,n)}},FB=class extends jb{constructor(e,t,n,i){let o=(n?t:"")+i,s=0,a=-i.length;super(e,o,s,a,t,i)}computeCursorState(e,t){let i=t.getInverseEditOperations()[0].range;return this._computeCursorStateWithRange(e,i,t)}},BB=class extends jb{_autoIndentationEdit;_autoClosingEdit;constructor(e,t,n,i){let o=n+i,s=0,a=n.length;super(t,o,s,a,n,i),this._autoIndentationEdit=e,this._autoClosingEdit={range:t,text:o}}getEditOperations(e,t){t.addTrackedEditOperation(this._autoIndentationEdit.range,this._autoIndentationEdit.text),t.addTrackedEditOperation(this._autoClosingEdit.range,this._autoClosingEdit.text)}computeCursorState(e,t){let n=t.getInverseEditOperations();if(n.length!==2)throw new Error("There should be two inverse edit operations!");let i=n[0].range,o=n[1].range,s=i.plusRange(o);return this._computeCursorStateWithRange(e,s,t)}};function WB(r,e){return r===" "?e===5||e===6?6:5:4}function ik(r,e){return G9(r)&&!G9(e)?!0:r===5?!1:K9(r)!==K9(e)}function K9(r){return r===6||r===5?"space":r}function G9(r){return r===4||r===5||r===6}function j9(r,e,t,n,i){if(r.autoClosingOvertype==="never"||!r.autoClosingPairs.autoClosingPairsCloseSingleChar.has(i))return!1;for(let o=0,s=t.length;o<s;o++){let a=t[o];if(!a.isEmpty())return!1;let l=a.getPosition(),d=e.getLineContent(l.lineNumber);if(d.charAt(l.column-1)!==i)return!1;let p=Ya(i);if((l.column>2?d.charCodeAt(l.column-2):0)===92&&p)return!1;if(r.autoClosingOvertype==="auto"){let g=!1;for(let f=0,m=n.length;f<m;f++){let b=n[f];if(l.lineNumber===b.startLineNumber&&l.column===b.startColumn){g=!0;break}}if(!g)return!1}}return!0}function Rg(r,e,t){return t?new _g(r,e,!0):new Co(r,e,!0)}function sC(r,e,t){return t=t||1,Is.shiftIndent(e,e.length+t,r.tabSize,r.indentSize,r.insertSpaces)}function $b(r,e,t){return t=t||1,Is.unshiftIndent(e,e.length+t,r.tabSize,r.indentSize,r.insertSpaces)}function VB(r,e){return Ya(e)?r.autoSurround==="quotes"||r.autoSurround==="languageDefined":r.autoSurround==="brackets"||r.autoSurround==="languageDefined"}var fl=class{static indent(e,t,n){if(t===null||n===null)return[];let i=[];for(let o=0,s=n.length;o<s;o++)i[o]=new Is(n[o],{isUnshift:!1,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return i}static outdent(e,t,n){let i=[];for(let o=0,s=n.length;o<s;o++)i[o]=new Is(n[o],{isUnshift:!0,tabSize:e.tabSize,indentSize:e.indentSize,insertSpaces:e.insertSpaces,useTabStops:e.useTabStops,autoIndent:e.autoIndent},e.languageConfigurationService);return i}static shiftIndent(e,t,n){return sC(e,t,n)}static unshiftIndent(e,t,n){return $b(e,t,n)}static paste(e,t,n,i,o,s){return JL.getEdits(e,t,n,i,o,s)}static tab(e,t,n){return nk.getCommands(e,t,n)}static compositionType(e,t,n,i,o,s,a,l){return ek.getEdits(e,t,n,i,o,s,a,l)}static compositionEndWithInterceptors(e,t,n,i,o,s){if(!i)return null;let a=null;for(let h of i)if(a===null)a=h.insertedText;else if(a!==h.insertedText)return null;if(!a||a.length!==1)return null;let l=a,d=!1;for(let h of i)if(h.deletedText.length!==0){d=!0;break}if(d){if(!VB(t,l)||!t.surroundingPairs.hasOwnProperty(l))return null;let h=Ya(l);for(let m of i)if(m.deletedSelectionStart!==0||m.deletedSelectionEnd!==m.deletedText.length||/^[ \t]+$/.test(m.deletedText)||h&&Ya(m.deletedText))return null;let g=[];for(let m of o){if(!m.isEmpty())return null;g.push(m.getPosition())}if(g.length!==i.length)return null;let f=[];for(let m=0,b=g.length;m<b;m++)f.push(new jL(g[m],i[m].deletedText,t.surroundingPairs[l]));return new Si(4,f,{shouldPushStackElementBefore:!0,shouldPushStackElementAfter:!1})}let c=YL.getEdits(t,n,o,s,l);if(c!==void 0)return c;let p=Kb.getEdits(t,n,o,l,!0,!1);return p!==void 0?p:null}static typeWithInterceptors(e,t,n,i,o,s,a){let l=Gb.getEdits(n,i,o,a,e);if(l!==void 0)return l;let d=$L.getEdits(n,i,o,a,e);if(d!==void 0)return d;let c=qL.getEdits(t,n,i,o,s,a);if(c!==void 0)return c;let p=Kb.getEdits(n,i,o,a,!1,e);if(p!==void 0)return p;let h=XL.getEdits(n,i,o,a,e);if(h!==void 0)return h;let g=QL.getEdits(t,n,i,o,a,e);return g!==void 0?g:ZL.getEdits(t,o,a)}static typeWithoutInterceptors(e,t,n,i,o){return tk.getEdits(e,i,o)}},ok=class{constructor(e,t,n,i,o,s){this.deletedText=e;this.deletedSelectionStart=t;this.deletedSelectionEnd=n;this.insertedText=i;this.insertedSelectionStart=o;this.insertedSelectionEnd=s}};var pe;(Xe=>(Xe.editorSimpleInput=new B("editorSimpleInput",!1,!0),Xe.editorTextFocus=new B("editorTextFocus",!1,u("editorTextFocus","Whether the editor text has focus (cursor is blinking)")),Xe.focus=new B("editorFocus",!1,u("editorFocus","Whether the editor or an editor widget has focus (e.g. focus is in the find widget)")),Xe.textInputFocus=new B("textInputFocus",!1,u("textInputFocus","Whether an editor or a rich text input has focus (cursor is blinking)")),Xe.readOnly=new B("editorReadonly",!1,u("editorReadonly","Whether the editor is read-only")),Xe.inDiffEditor=new B("inDiffEditor",!1,u("inDiffEditor","Whether the context is a diff editor")),Xe.isEmbeddedDiffEditor=new B("isEmbeddedDiffEditor",!1,u("isEmbeddedDiffEditor","Whether the context is an embedded diff editor")),Xe.multiDiffEditorAllCollapsed=new B("multiDiffEditorAllCollapsed",void 0,u("multiDiffEditorAllCollapsed","Whether all files in multi diff editor are collapsed")),Xe.hasChanges=new B("diffEditorHasChanges",!1,u("diffEditorHasChanges","Whether the diff editor has changes")),Xe.comparingMovedCode=new B("comparingMovedCode",!1,u("comparingMovedCode","Whether a moved code block is selected for comparison")),Xe.accessibleDiffViewerVisible=new B("accessibleDiffViewerVisible",!1,u("accessibleDiffViewerVisible","Whether the accessible diff viewer is visible")),Xe.diffEditorRenderSideBySideInlineBreakpointReached=new B("diffEditorRenderSideBySideInlineBreakpointReached",!1,u("diffEditorRenderSideBySideInlineBreakpointReached","Whether the diff editor render side by side inline breakpoint is reached")),Xe.diffEditorInlineMode=new B("diffEditorInlineMode",!1,u("diffEditorInlineMode","Whether inline mode is active")),Xe.diffEditorOriginalWritable=new B("diffEditorOriginalWritable",!1,u("diffEditorOriginalWritable","Whether modified is writable in the diff editor")),Xe.diffEditorModifiedWritable=new B("diffEditorModifiedWritable",!1,u("diffEditorModifiedWritable","Whether modified is writable in the diff editor")),Xe.diffEditorOriginalUri=new B("diffEditorOriginalUri","",u("diffEditorOriginalUri","The uri of the original document")),Xe.diffEditorModifiedUri=new B("diffEditorModifiedUri","",u("diffEditorModifiedUri","The uri of the modified document")),Xe.columnSelection=new B("editorColumnSelection",!1,u("editorColumnSelection","Whether `editor.columnSelection` is enabled")),Xe.writable=Xe.readOnly.toNegated(),Xe.hasNonEmptySelection=new B("editorHasSelection",!1,u("editorHasSelection","Whether the editor has text selected")),Xe.hasOnlyEmptySelection=Xe.hasNonEmptySelection.toNegated(),Xe.hasMultipleSelections=new B("editorHasMultipleSelections",!1,u("editorHasMultipleSelections","Whether the editor has multiple selections")),Xe.hasSingleSelection=Xe.hasMultipleSelections.toNegated(),Xe.tabMovesFocus=new B("editorTabMovesFocus",!1,u("editorTabMovesFocus","Whether `Tab` will move focus out of the editor")),Xe.tabDoesNotMoveFocus=Xe.tabMovesFocus.toNegated(),Xe.isInEmbeddedEditor=new B("isInEmbeddedEditor",!1,!0),Xe.canUndo=new B("canUndo",!1,!0),Xe.canRedo=new B("canRedo",!1,!0),Xe.hoverVisible=new B("editorHoverVisible",!1,u("editorHoverVisible","Whether the editor hover is visible")),Xe.hoverFocused=new B("editorHoverFocused",!1,u("editorHoverFocused","Whether the editor hover is focused")),Xe.stickyScrollFocused=new B("stickyScrollFocused",!1,u("stickyScrollFocused","Whether the sticky scroll is focused")),Xe.stickyScrollVisible=new B("stickyScrollVisible",!1,u("stickyScrollVisible","Whether the sticky scroll is visible")),Xe.standaloneColorPickerVisible=new B("standaloneColorPickerVisible",!1,u("standaloneColorPickerVisible","Whether the standalone color picker is visible")),Xe.standaloneColorPickerFocused=new B("standaloneColorPickerFocused",!1,u("standaloneColorPickerFocused","Whether the standalone color picker is focused")),Xe.inCompositeEditor=new B("inCompositeEditor",void 0,u("inCompositeEditor","Whether the editor is part of a larger editor (e.g. notebooks)")),Xe.notInCompositeEditor=Xe.inCompositeEditor.toNegated(),Xe.languageId=new B("editorLangId","",u("editorLangId","The language identifier of the editor")),Xe.hasCompletionItemProvider=new B("editorHasCompletionItemProvider",!1,u("editorHasCompletionItemProvider","Whether the editor has a completion item provider")),Xe.hasCodeActionsProvider=new B("editorHasCodeActionsProvider",!1,u("editorHasCodeActionsProvider","Whether the editor has a code actions provider")),Xe.hasCodeLensProvider=new B("editorHasCodeLensProvider",!1,u("editorHasCodeLensProvider","Whether the editor has a code lens provider")),Xe.hasDefinitionProvider=new B("editorHasDefinitionProvider",!1,u("editorHasDefinitionProvider","Whether the editor has a definition provider")),Xe.hasDeclarationProvider=new B("editorHasDeclarationProvider",!1,u("editorHasDeclarationProvider","Whether the editor has a declaration provider")),Xe.hasImplementationProvider=new B("editorHasImplementationProvider",!1,u("editorHasImplementationProvider","Whether the editor has an implementation provider")),Xe.hasTypeDefinitionProvider=new B("editorHasTypeDefinitionProvider",!1,u("editorHasTypeDefinitionProvider","Whether the editor has a type definition provider")),Xe.hasHoverProvider=new B("editorHasHoverProvider",!1,u("editorHasHoverProvider","Whether the editor has a hover provider")),Xe.hasDocumentHighlightProvider=new B("editorHasDocumentHighlightProvider",!1,u("editorHasDocumentHighlightProvider","Whether the editor has a document highlight provider")),Xe.hasDocumentSymbolProvider=new B("editorHasDocumentSymbolProvider",!1,u("editorHasDocumentSymbolProvider","Whether the editor has a document symbol provider")),Xe.hasReferenceProvider=new B("editorHasReferenceProvider",!1,u("editorHasReferenceProvider","Whether the editor has a reference provider")),Xe.hasRenameProvider=new B("editorHasRenameProvider",!1,u("editorHasRenameProvider","Whether the editor has a rename provider")),Xe.hasSignatureHelpProvider=new B("editorHasSignatureHelpProvider",!1,u("editorHasSignatureHelpProvider","Whether the editor has a signature help provider")),Xe.hasInlayHintsProvider=new B("editorHasInlayHintsProvider",!1,u("editorHasInlayHintsProvider","Whether the editor has an inline hints provider")),Xe.hasDocumentFormattingProvider=new B("editorHasDocumentFormattingProvider",!1,u("editorHasDocumentFormattingProvider","Whether the editor has a document formatting provider")),Xe.hasDocumentSelectionFormattingProvider=new B("editorHasDocumentSelectionFormattingProvider",!1,u("editorHasDocumentSelectionFormattingProvider","Whether the editor has a document selection formatting provider")),Xe.hasMultipleDocumentFormattingProvider=new B("editorHasMultipleDocumentFormattingProvider",!1,u("editorHasMultipleDocumentFormattingProvider","Whether the editor has multiple document formatting providers")),Xe.hasMultipleDocumentSelectionFormattingProvider=new B("editorHasMultipleDocumentSelectionFormattingProvider",!1,u("editorHasMultipleDocumentSelectionFormattingProvider","Whether the editor has multiple document selection formatting providers"))))(pe||={});var yt=0,vn=class extends hs{runEditorCommand(e,t,n){let i=t._getViewModel();i&&this.runCoreEditorCommand(i,n||{})}},xo;(a=>{let r=function(l){if(!tn(l))return!1;let d=l;return!(!xt(d.to)||!Oi(d.by)&&!xt(d.by)||!Oi(d.value)&&!Uo(d.value)||!Oi(d.revealCursor)&&!Cm(d.revealCursor))};a.metadata={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'to': A mandatory direction value.\n						```\n						'up', 'down'\n						```\n					* 'by': Unit to move. Default is computed based on 'to' value.\n						```\n						'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n						```\n					* 'value': Number of units to move. Default is '1'.\n					* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n				",constraint:r,schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},a.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},a.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"};function i(l){let d;switch(l.to){case a.RawDirection.Up:d=1;break;case a.RawDirection.Right:d=2;break;case a.RawDirection.Down:d=3;break;case a.RawDirection.Left:d=4;break;default:return null}let c;switch(l.by){case a.RawUnit.Line:c=1;break;case a.RawUnit.WrappedLine:c=2;break;case a.RawUnit.Page:c=3;break;case a.RawUnit.HalfPage:c=4;break;case a.RawUnit.Editor:c=5;break;case a.RawUnit.Column:c=6;break;default:c=2}let p=Math.floor(l.value||1),h=!!l.revealCursor;return{direction:d,unit:c,value:p,revealCursor:h,select:!!l.select}}a.parse=i;let o;(h=>(h[h.Up=1]="Up",h[h.Right=2]="Right",h[h.Down=3]="Down",h[h.Left=4]="Left"))(o=a.Direction||={});let s;(f=>(f[f.Line=1]="Line",f[f.WrappedLine=2]="WrappedLine",f[f.Page=3]="Page",f[f.HalfPage=4]="HalfPage",f[f.Editor=5]="Editor",f[f.Column=6]="Column"))(s=a.Unit||={})})(xo||={});var aC;(n=>{let r=function(i){if(!tn(i))return!1;let o=i;return!(!Uo(o.lineNumber)&&!xt(o.lineNumber)||!Oi(o.at)&&!xt(o.at))};n.metadata={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n					* 'lineNumber': A mandatory line number value.\n					* 'at': Logical position at which line has to be revealed.\n						```\n						'top', 'center', 'bottom'\n						```\n				",constraint:r,schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},n.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}})(aC||={});var lC=class{constructor(e){e.addImplementation(1e4,"code-editor",(t,n)=>{let i=t.get(rd).getFocusedCodeEditor();return i&&i.hasTextFocus()?this._runEditorCommand(t,i,n):!1}),e.addImplementation(1e3,"generic-dom-input-textarea",(t,n)=>{let i=mr();return i&&is(i)?(this.runDOMCommand(i),!0):!1}),e.addImplementation(0,"generic-dom",(t,n)=>{let i=t.get(rd).getActiveCodeEditor();return i?(i.focus(),this._runEditorCommand(t,i,n)):!1})}_runEditorCommand(e,t,n){let i=this.runEditorCommand(e,t,n);return i||!0}};var Ti;(Ce=>{class r extends vn{_inSelectionMode;constructor(W){super(W),this._inSelectionMode=W.inSelectionMode}runCoreEditorCommand(W,de){if(!de.position)return;W.model.pushStackElement(),W.setCursorStates(de.source,3,[Gi.moveTo(W,W.getPrimaryCursorState(),this._inSelectionMode,de.position,de.viewPosition)])&&de.revealType!==2&&W.revealAllCursors(de.source,!0,!0)}}Ce.MoveTo=_e(new r({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),Ce.MoveToSelect=_e(new r({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class n extends vn{runCoreEditorCommand(W,de){W.model.pushStackElement();let Se=this._getColumnSelectResult(W,W.getPrimaryCursorState(),W.getCursorColumnSelectData(),de);Se!==null&&(W.setCursorStates(de.source,3,Se.viewStates.map(lt=>nt.fromViewState(lt))),W.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:Se.fromLineNumber,fromViewVisualColumn:Se.fromVisualColumn,toViewLineNumber:Se.toLineNumber,toViewVisualColumn:Se.toVisualColumn}),Se.reversed?W.revealTopMostCursor(de.source):W.revealBottomMostCursor(de.source))}}Ce.ColumnSelect=_e(new class extends n{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(ge,W,de,Se){if(typeof Se.position>"u"||typeof Se.viewPosition>"u"||typeof Se.mouseColumn>"u")return null;let lt=ge.model.validatePosition(Se.position),Ut=ge.coordinatesConverter.validateViewPosition(new F(Se.viewPosition.lineNumber,Se.viewPosition.column),lt),$i=Se.doColumnSelect?de.fromViewLineNumber:Ut.lineNumber,ko=Se.doColumnSelect?de.fromViewVisualColumn:Se.mouseColumn-1;return yp.columnSelect(ge.cursorConfig,ge,$i,ko,Ut.lineNumber,Se.mouseColumn-1)}}),Ce.CursorColumnSelectLeft=_e(new class extends n{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(ge,W,de,Se){return yp.columnSelectLeft(ge.cursorConfig,ge,de)}}),Ce.CursorColumnSelectRight=_e(new class extends n{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(ge,W,de,Se){return yp.columnSelectRight(ge.cursorConfig,ge,de)}});class a extends n{_isPaged;constructor(W){super(W),this._isPaged=W.isPaged}_getColumnSelectResult(W,de,Se,lt){return yp.columnSelectUp(W.cursorConfig,W,Se,this._isPaged)}}Ce.CursorColumnSelectUp=_e(new a({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:3600,linux:{primary:0}}})),Ce.CursorColumnSelectPageUp=_e(new a({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:3595,linux:{primary:0}}}));class c extends n{_isPaged;constructor(W){super(W),this._isPaged=W.isPaged}_getColumnSelectResult(W,de,Se,lt){return yp.columnSelectDown(W.cursorConfig,W,Se,this._isPaged)}}Ce.CursorColumnSelectDown=_e(new c({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:3602,linux:{primary:0}}})),Ce.CursorColumnSelectPageDown=_e(new c({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:3596,linux:{primary:0}}}));class g extends vn{constructor(){super({id:"cursorMove",precondition:void 0,metadata:Qe.metadata})}runCoreEditorCommand(W,de){let Se=Qe.parse(de);Se&&this._runCursorMove(W,de.source,Se)}_runCursorMove(W,de,Se){W.model.pushStackElement(),W.setCursorStates(de,3,g._move(W,W.getCursorStates(),Se)),W.revealAllCursors(de,!0)}static _move(W,de,Se){let lt=Se.select,Ut=Se.value;switch(Se.direction){case Qe.Direction.Left:case Qe.Direction.Right:case Qe.Direction.Up:case Qe.Direction.Down:case Qe.Direction.PrevBlankLine:case Qe.Direction.NextBlankLine:case Qe.Direction.WrappedLineStart:case Qe.Direction.WrappedLineFirstNonWhitespaceCharacter:case Qe.Direction.WrappedLineColumnCenter:case Qe.Direction.WrappedLineEnd:case Qe.Direction.WrappedLineLastNonWhitespaceCharacter:return Gi.simpleMove(W,de,Se.direction,lt,Ut,Se.unit);case Qe.Direction.ViewPortTop:case Qe.Direction.ViewPortBottom:case Qe.Direction.ViewPortCenter:case Qe.Direction.ViewPortIfOutside:return Gi.viewportMove(W,de,Se.direction,lt,Ut);default:return null}}}Ce.CursorMoveImpl=g,Ce.CursorMove=_e(new g);let m;(W=>W[W.PAGE_SIZE_MARKER=-1]="PAGE_SIZE_MARKER")(m||={});class b extends vn{_staticArgs;constructor(W){super(W),this._staticArgs=W.args}runCoreEditorCommand(W,de){let Se=this._staticArgs;this._staticArgs.value===-1&&(Se={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:de.pageSize||W.cursorConfig.pageSize}),W.model.pushStackElement(),W.setCursorStates(de.source,3,Gi.simpleMove(W,W.getCursorStates(),Se.direction,Se.select,Se.value,Se.unit)),W.revealAllCursors(de.source,!0)}}Ce.CursorLeft=_e(new b({args:{direction:Qe.Direction.Left,unit:Qe.Unit.None,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),Ce.CursorLeftSelect=_e(new b({args:{direction:Qe.Direction.Left,unit:Qe.Unit.None,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:1039}})),Ce.CursorRight=_e(new b({args:{direction:Qe.Direction.Right,unit:Qe.Unit.None,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),Ce.CursorRightSelect=_e(new b({args:{direction:Qe.Direction.Right,unit:Qe.Unit.None,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:1041}})),Ce.CursorUp=_e(new b({args:{direction:Qe.Direction.Up,unit:Qe.Unit.WrappedLine,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),Ce.CursorUpSelect=_e(new b({args:{direction:Qe.Direction.Up,unit:Qe.Unit.WrappedLine,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),Ce.CursorPageUp=_e(new b({args:{direction:Qe.Direction.Up,unit:Qe.Unit.WrappedLine,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:11}})),Ce.CursorPageUpSelect=_e(new b({args:{direction:Qe.Direction.Up,unit:Qe.Unit.WrappedLine,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:1035}})),Ce.CursorDown=_e(new b({args:{direction:Qe.Direction.Down,unit:Qe.Unit.WrappedLine,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),Ce.CursorDownSelect=_e(new b({args:{direction:Qe.Direction.Down,unit:Qe.Unit.WrappedLine,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),Ce.CursorPageDown=_e(new b({args:{direction:Qe.Direction.Down,unit:Qe.Unit.WrappedLine,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:12}})),Ce.CursorPageDownSelect=_e(new b({args:{direction:Qe.Direction.Down,unit:Qe.Unit.WrappedLine,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:1036}})),Ce.CreateCursor=_e(new class extends vn{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(ge,W){if(!W.position)return;let de;W.wholeLine?de=Gi.line(ge,ge.getPrimaryCursorState(),!1,W.position,W.viewPosition):de=Gi.moveTo(ge,ge.getPrimaryCursorState(),!1,W.position,W.viewPosition);let Se=ge.getCursorStates();if(Se.length>1){let lt=de.modelState?de.modelState.position:null,Ut=de.viewState?de.viewState.position:null;for(let $i=0,ko=Se.length;$i<ko;$i++){let Ze=Se[$i];if(!(lt&&!Ze.modelState.selection.containsPosition(lt))&&!(Ut&&!Ze.viewState.selection.containsPosition(Ut))){Se.splice($i,1),ge.model.pushStackElement(),ge.setCursorStates(W.source,3,Se);return}}}Se.push(de),ge.model.pushStackElement(),ge.setCursorStates(W.source,3,Se)}}),Ce.LastCursorMoveToSelect=_e(new class extends vn{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(ge,W){if(!W.position)return;let de=ge.getLastAddedCursorIndex(),Se=ge.getCursorStates(),lt=Se.slice(0);lt[de]=Gi.moveTo(ge,Se[de],!0,W.position,W.viewPosition),ge.model.pushStackElement(),ge.setCursorStates(W.source,3,lt)}});class ce extends vn{_inSelectionMode;constructor(W){super(W),this._inSelectionMode=W.inSelectionMode}runCoreEditorCommand(W,de){W.model.pushStackElement(),W.setCursorStates(de.source,3,Gi.moveToBeginningOfLine(W,W.getCursorStates(),this._inSelectionMode)),W.revealAllCursors(de.source,!0)}}Ce.CursorHome=_e(new ce({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),Ce.CursorHomeSelect=_e(new ce({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class ue extends vn{_inSelectionMode;constructor(W){super(W),this._inSelectionMode=W.inSelectionMode}runCoreEditorCommand(W,de){W.model.pushStackElement(),W.setCursorStates(de.source,3,this._exec(W.getCursorStates())),W.revealAllCursors(de.source,!0)}_exec(W){let de=[];for(let Se=0,lt=W.length;Se<lt;Se++){let Ut=W[Se],$i=Ut.modelState.position.lineNumber;de[Se]=nt.fromModelState(Ut.modelState.move(this._inSelectionMode,$i,1,0))}return de}}Ce.CursorLineStart=_e(new ue({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:0,mac:{primary:287}}})),Ce.CursorLineStartSelect=_e(new ue({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:0,mac:{primary:1311}}}));class Re extends vn{_inSelectionMode;constructor(W){super(W),this._inSelectionMode=W.inSelectionMode}runCoreEditorCommand(W,de){W.model.pushStackElement(),W.setCursorStates(de.source,3,Gi.moveToEndOfLine(W,W.getCursorStates(),this._inSelectionMode,de.sticky||!1)),W.revealAllCursors(de.source,!0)}}Ce.CursorEnd=_e(new Re({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:yt,kbExpr:pe.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},metadata:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:u("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),Ce.CursorEndSelect=_e(new Re({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:yt,kbExpr:pe.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},metadata:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:u("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class Ue extends vn{_inSelectionMode;constructor(W){super(W),this._inSelectionMode=W.inSelectionMode}runCoreEditorCommand(W,de){W.model.pushStackElement(),W.setCursorStates(de.source,3,this._exec(W,W.getCursorStates())),W.revealAllCursors(de.source,!0)}_exec(W,de){let Se=[];for(let lt=0,Ut=de.length;lt<Ut;lt++){let $i=de[lt],ko=$i.modelState.position.lineNumber,Ze=W.model.getLineMaxColumn(ko);Se[lt]=nt.fromModelState($i.modelState.move(this._inSelectionMode,ko,Ze,0))}return Se}}Ce.CursorLineEnd=_e(new Ue({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:0,mac:{primary:291}}})),Ce.CursorLineEndSelect=_e(new Ue({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:0,mac:{primary:1315}}}));class kr extends vn{_inSelectionMode;constructor(W){super(W),this._inSelectionMode=W.inSelectionMode}runCoreEditorCommand(W,de){W.model.pushStackElement(),W.setCursorStates(de.source,3,Gi.moveToBeginningOfBuffer(W,W.getCursorStates(),this._inSelectionMode)),W.revealAllCursors(de.source,!0)}}Ce.CursorTop=_e(new kr({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:2062,mac:{primary:2064}}})),Ce.CursorTopSelect=_e(new kr({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:3086,mac:{primary:3088}}}));class Do extends vn{_inSelectionMode;constructor(W){super(W),this._inSelectionMode=W.inSelectionMode}runCoreEditorCommand(W,de){W.model.pushStackElement(),W.setCursorStates(de.source,3,Gi.moveToEndOfBuffer(W,W.getCursorStates(),this._inSelectionMode)),W.revealAllCursors(de.source,!0)}}Ce.CursorBottom=_e(new Do({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:2061,mac:{primary:2066}}})),Ce.CursorBottomSelect=_e(new Do({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:3085,mac:{primary:3090}}}));class Zc extends vn{constructor(){super({id:"editorScroll",precondition:void 0,metadata:xo.metadata})}determineScrollMethod(W){let de=[6],Se=[1,2,3,4,5,6],lt=[4,2],Ut=[1,3];return de.includes(W.unit)&&lt.includes(W.direction)?this._runHorizontalEditorScroll.bind(this):Se.includes(W.unit)&&Ut.includes(W.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(W,de){let Se=xo.parse(de);if(!Se)return;let lt=this.determineScrollMethod(Se);lt&&lt(W,de.source,Se)}_runVerticalEditorScroll(W,de,Se){let lt=this._computeDesiredScrollTop(W,Se);if(Se.revealCursor){let Ut=W.getCompletelyVisibleViewRangeAtScrollTop(lt);W.setCursorStates(de,3,[Gi.findPositionInViewportIfOutside(W,W.getPrimaryCursorState(),Ut,Se.select)])}W.viewLayout.setScrollPosition({scrollTop:lt},0)}_computeDesiredScrollTop(W,de){if(de.unit===1){let Ut=W.viewLayout.getFutureViewport(),$i=W.getCompletelyVisibleViewRangeAtScrollTop(Ut.top),ko=W.coordinatesConverter.convertViewRangeToModelRange($i),Ze;de.direction===1?Ze=Math.max(1,ko.startLineNumber-de.value):Ze=Math.min(W.model.getLineCount(),ko.startLineNumber+de.value);let L=W.coordinatesConverter.convertModelPositionToViewPosition(new F(Ze,1));return W.viewLayout.getVerticalOffsetForLineNumber(L.lineNumber)}if(de.unit===5){let Ut=0;return de.direction===3&&(Ut=W.model.getLineCount()-W.cursorConfig.pageSize),W.viewLayout.getVerticalOffsetForLineNumber(Ut)}let Se;de.unit===3?Se=W.cursorConfig.pageSize*de.value:de.unit===4?Se=Math.round(W.cursorConfig.pageSize/2)*de.value:Se=de.value;let lt=(de.direction===1?-1:1)*Se;return W.viewLayout.getCurrentScrollTop()+lt*W.cursorConfig.lineHeight}_runHorizontalEditorScroll(W,de,Se){let lt=this._computeDesiredScrollLeft(W,Se);W.viewLayout.setScrollPosition({scrollLeft:lt},0)}_computeDesiredScrollLeft(W,de){let Se=(de.direction===4?-1:1)*de.value;return W.viewLayout.getCurrentScrollLeft()+Se*W.cursorConfig.typicalHalfwidthCharacterWidth}}Ce.EditorScrollImpl=Zc,Ce.EditorScroll=_e(new Zc),Ce.ScrollLineUp=_e(new class extends vn{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(ge,W){Ce.EditorScroll.runCoreEditorCommand(ge,{to:xo.RawDirection.Up,by:xo.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:W.source})}}),Ce.ScrollPageUp=_e(new class extends vn{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(ge,W){Ce.EditorScroll.runCoreEditorCommand(ge,{to:xo.RawDirection.Up,by:xo.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:W.source})}}),Ce.ScrollEditorTop=_e(new class extends vn{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus}})}runCoreEditorCommand(ge,W){Ce.EditorScroll.runCoreEditorCommand(ge,{to:xo.RawDirection.Up,by:xo.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:W.source})}}),Ce.ScrollLineDown=_e(new class extends vn{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(ge,W){Ce.EditorScroll.runCoreEditorCommand(ge,{to:xo.RawDirection.Down,by:xo.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:W.source})}}),Ce.ScrollPageDown=_e(new class extends vn{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(ge,W){Ce.EditorScroll.runCoreEditorCommand(ge,{to:xo.RawDirection.Down,by:xo.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:W.source})}}),Ce.ScrollEditorBottom=_e(new class extends vn{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus}})}runCoreEditorCommand(ge,W){Ce.EditorScroll.runCoreEditorCommand(ge,{to:xo.RawDirection.Down,by:xo.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:W.source})}}),Ce.ScrollLeft=_e(new class extends vn{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus}})}runCoreEditorCommand(ge,W){Ce.EditorScroll.runCoreEditorCommand(ge,{to:xo.RawDirection.Left,by:xo.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:W.source})}}),Ce.ScrollRight=_e(new class extends vn{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus}})}runCoreEditorCommand(ge,W){Ce.EditorScroll.runCoreEditorCommand(ge,{to:xo.RawDirection.Right,by:xo.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:W.source})}});class $s extends vn{_inSelectionMode;constructor(W){super(W),this._inSelectionMode=W.inSelectionMode}runCoreEditorCommand(W,de){de.position&&(W.model.pushStackElement(),W.setCursorStates(de.source,3,[Gi.word(W,W.getPrimaryCursorState(),this._inSelectionMode,de.position)]),de.revealType!==2&&W.revealAllCursors(de.source,!0,!0))}}Ce.WordSelect=_e(new $s({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),Ce.WordSelectDrag=_e(new $s({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),Ce.LastCursorWordSelect=_e(new class extends vn{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(ge,W){if(!W.position)return;let de=ge.getLastAddedCursorIndex(),Se=ge.getCursorStates(),lt=Se.slice(0),Ut=Se[de];lt[de]=Gi.word(ge,Ut,Ut.modelState.hasSelection(),W.position),ge.model.pushStackElement(),ge.setCursorStates(W.source,3,lt)}});class Cl extends vn{_inSelectionMode;constructor(W){super(W),this._inSelectionMode=W.inSelectionMode}runCoreEditorCommand(W,de){de.position&&(W.model.pushStackElement(),W.setCursorStates(de.source,3,[Gi.line(W,W.getPrimaryCursorState(),this._inSelectionMode,de.position,de.viewPosition)]),de.revealType!==2&&W.revealAllCursors(de.source,!1,!0))}}Ce.LineSelect=_e(new Cl({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),Ce.LineSelectDrag=_e(new Cl({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class Es extends vn{_inSelectionMode;constructor(W){super(W),this._inSelectionMode=W.inSelectionMode}runCoreEditorCommand(W,de){if(!de.position)return;let Se=W.getLastAddedCursorIndex(),lt=W.getCursorStates(),Ut=lt.slice(0);Ut[Se]=Gi.line(W,lt[Se],this._inSelectionMode,de.position,de.viewPosition),W.model.pushStackElement(),W.setCursorStates(de.source,3,Ut)}}Ce.LastCursorLineSelect=_e(new Es({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),Ce.LastCursorLineSelectDrag=_e(new Es({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),Ce.CancelSelection=_e(new class extends vn{constructor(){super({id:"cancelSelection",precondition:pe.hasNonEmptySelection,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(ge,W){ge.model.pushStackElement(),ge.setCursorStates(W.source,3,[Gi.cancelSelection(ge,ge.getPrimaryCursorState())]),ge.revealAllCursors(W.source,!0)}}),Ce.RemoveSecondaryCursors=_e(new class extends vn{constructor(){super({id:"removeSecondaryCursors",precondition:pe.hasMultipleSelections,kbOpts:{weight:yt+1,kbExpr:pe.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(ge,W){ge.model.pushStackElement(),ge.setCursorStates(W.source,3,[ge.getPrimaryCursorState()]),ge.revealAllCursors(W.source,!0),Bs(u("removedCursor","Removed secondary cursors"))}}),Ce.RevealLine=_e(new class extends vn{constructor(){super({id:"revealLine",precondition:void 0,metadata:aC.metadata})}runCoreEditorCommand(ge,W){let de=W,Se=de.lineNumber||0,lt=typeof Se=="number"?Se+1:parseInt(Se)+1;lt<1&&(lt=1);let Ut=ge.model.getLineCount();lt>Ut&&(lt=Ut);let $i=new D(lt,1,lt,ge.model.getLineMaxColumn(lt)),ko=0;if(de.at)switch(de.at){case aC.RawAtArgument.Top:ko=3;break;case aC.RawAtArgument.Center:ko=1;break;case aC.RawAtArgument.Bottom:ko=4;break;default:break}let Ze=ge.coordinatesConverter.convertModelRangeToViewRange($i);ge.revealRange(W.source,!1,Ze,ko,0)}}),Ce.SelectAll=new class extends lC{constructor(){super(D5)}runDOMCommand(ge){yi&&(ge.focus(),ge.select()),ge.ownerDocument.execCommand("selectAll")}runEditorCommand(ge,W,de){let Se=W._getViewModel();Se&&this.runCoreEditorCommand(Se,de)}runCoreEditorCommand(ge,W){ge.model.pushStackElement(),ge.setCursorStates("keyboard",3,[Gi.selectAll(ge,ge.getPrimaryCursorState())])}},Ce.SetSelection=_e(new class extends vn{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(ge,W){W.selection&&(ge.model.pushStackElement(),ge.setCursorStates(W.source,3,[nt.fromModelSelection(W.selection)]))}})})(Ti||={});var nJ=oe.and(pe.textInputFocus,pe.columnSelection);function Yb(r,e){Sn.registerKeybindingRule({id:r,primary:e,when:nJ,weight:yt+1})}Yb(Ti.CursorColumnSelectLeft.id,1039);Yb(Ti.CursorColumnSelectRight.id,1041);Yb(Ti.CursorColumnSelectUp.id,1040);Yb(Ti.CursorColumnSelectPageUp.id,1035);Yb(Ti.CursorColumnSelectDown.id,1042);Yb(Ti.CursorColumnSelectPageDown.id,1036);function $9(r){return r.register(),r}var iJ;(l=>{class r extends hs{runEditorCommand(c,p,h){let g=p._getViewModel();g&&this.runCoreEditingCommand(p,g,h||{})}}l.CoreEditingCommand=r,l.LineBreakInsert=_e(new class extends r{constructor(){super({id:"lineBreakInsert",precondition:pe.writable,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(d,c,p){d.pushUndoStop(),d.executeCommands(this.id,Gb.lineBreakInsert(c.cursorConfig,c.model,c.getCursorStates().map(h=>h.modelState.selection)))}}),l.Outdent=_e(new class extends r{constructor(){super({id:"outdent",precondition:pe.writable,kbOpts:{weight:yt,kbExpr:oe.and(pe.editorTextFocus,pe.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(d,c,p){d.pushUndoStop(),d.executeCommands(this.id,fl.outdent(c.cursorConfig,c.model,c.getCursorStates().map(h=>h.modelState.selection))),d.pushUndoStop()}}),l.Tab=_e(new class extends r{constructor(){super({id:"tab",precondition:pe.writable,kbOpts:{weight:yt,kbExpr:oe.and(pe.editorTextFocus,pe.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(d,c,p){d.pushUndoStop(),d.executeCommands(this.id,fl.tab(c.cursorConfig,c.model,c.getCursorStates().map(h=>h.modelState.selection))),d.pushUndoStop()}}),l.DeleteLeft=_e(new class extends r{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(d,c,p){let[h,g]=zc.deleteLeft(c.getPrevEditOperationType(),c.cursorConfig,c.model,c.getCursorStates().map(f=>f.modelState.selection),c.getCursorAutoClosedCharacters());h&&d.pushUndoStop(),d.executeCommands(this.id,g),c.setPrevEditOperationType(2)}}),l.DeleteRight=_e(new class extends r{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:yt,kbExpr:pe.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(d,c,p){let[h,g]=zc.deleteRight(c.getPrevEditOperationType(),c.cursorConfig,c.model,c.getCursorStates().map(f=>f.modelState.selection));h&&d.pushUndoStop(),d.executeCommands(this.id,g),c.setPrevEditOperationType(3)}}),l.Undo=new class extends lC{constructor(){super(MP)}runDOMCommand(d){d.ownerDocument.execCommand("undo")}runEditorCommand(d,c,p){if(!(!c.hasModel()||c.getOption(93)===!0))return c.getModel().undo()}},l.Redo=new class extends lC{constructor(){super(OP)}runDOMCommand(d){d.ownerDocument.execCommand("redo")}runEditorCommand(d,c,p){if(!(!c.hasModel()||c.getOption(93)===!0))return c.getModel().redo()}}})(iJ||={});var rk=class extends jh{_handlerId;constructor(e,t,n){super({id:e,precondition:void 0,metadata:n}),this._handlerId=t}runCommand(e,t){let n=e.get(rd).getFocusedCodeEditor();n&&n.trigger("keyboard",this._handlerId,t)}};function Og(r,e){$9(new rk("default:"+r,r)),$9(new rk(r,r,e))}Og("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]});Og("replacePreviousChar");Og("compositionType");Og("compositionStart");Og("compositionEnd");Og("paste");Og("cut");var Xb=class r{onKeyDown=null;onKeyUp=null;onContextMenu=null;onMouseMove=null;onMouseLeave=null;onMouseDown=null;onMouseUp=null;onMouseDrag=null;onMouseDrop=null;onMouseDropCanceled=null;onMouseWheel=null;_coordinatesConverter;constructor(e){this._coordinatesConverter=e}emitKeyDown(e){this.onKeyDown?.(e)}emitKeyUp(e){this.onKeyUp?.(e)}emitContextMenu(e){this.onContextMenu?.(this._convertViewToModelMouseEvent(e))}emitMouseMove(e){this.onMouseMove?.(this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){this.onMouseLeave?.(this._convertViewToModelMouseEvent(e))}emitMouseDown(e){this.onMouseDown?.(this._convertViewToModelMouseEvent(e))}emitMouseUp(e){this.onMouseUp?.(this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){this.onMouseDrag?.(this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){this.onMouseDrop?.(this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){this.onMouseDropCanceled?.()}emitMouseWheel(e){this.onMouseWheel?.(e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return r.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,t){let n={...e};return n.position&&(n.position=t.convertViewPositionToModelPosition(n.position)),n.range&&(n.range=t.convertViewRangeToModelRange(n.range)),(n.type===5||n.type===8)&&(n.detail=this.convertViewToModelViewZoneData(n.detail,t)),n}static convertViewToModelViewZoneData(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new F(e.afterLineNumber,1)).lineNumber}}};var sk=class{configuration;viewModel;userInputEvents;commandDelegate;constructor(e,t,n,i){this.configuration=e,this.viewModel=t,this.userInputEvents=n,this.commandDelegate=i}paste(e,t,n,i){this.commandDelegate.paste(e,t,n,i)}type(e){this.commandDelegate.type(e)}compositionType(e,t,n,i){this.commandDelegate.compositionType(e,t,n,i)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){Ti.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){let t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new F(e.lineNumber,t):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(79)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(79)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){let t=this.configuration.options,n=Xt&&t.get(109),i=t.get(22);e.middleButton&&!n?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():e.mouseDownCount===3?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount===2?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey?this._columnSelect(e.position,e.mouseColumn,!0):i?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}moveTo(e,t){Ti.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_moveToSelect(e,t){Ti.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_columnSelect(e,t,n){e=this._validateViewColumn(e),Ti.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:n})}_createCursor(e,t){e=this._validateViewColumn(e),Ti.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}_lastCursorMoveToSelect(e,t){Ti.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelect(e,t){Ti.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_wordSelectDrag(e,t){Ti.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorWordSelect(e,t){Ti.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelect(e,t){Ti.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lineSelectDrag(e,t){Ti.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelect(e,t){Ti.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_lastCursorLineSelectDrag(e,t){Ti.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}_selectAll(){Ti.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}};var Qb=class extends da{_context;viewController;viewHelper;mouseTargetFactory;_mouseDownOperation;lastMouseLeaveTime;_height;_mouseLeaveMonitor=null;constructor(e,t,n){super(),this._context=e,this.viewController=t,this.viewHelper=n,this.mouseTargetFactory=new Ub(this._context,n),this._mouseDownOperation=this._register(new HB(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,(s,a)=>this._createMouseTarget(s,a),s=>this._getMouseColumn(s))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(147).height;let i=new CL(this.viewHelper.viewDomNode);this._register(i.onContextMenu(this.viewHelper.viewDomNode,s=>this._onContextMenu(s,!0))),this._register(i.onMouseMove(this.viewHelper.viewDomNode,s=>{this._onMouseMove(s),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=U(this.viewHelper.viewDomNode.ownerDocument,"mousemove",a=>{this.viewHelper.viewDomNode.contains(a.target)||this._onMouseLeave(new Ia(a,!1,this.viewHelper.viewDomNode))}))})),this._register(i.onMouseUp(this.viewHelper.viewDomNode,s=>this._onMouseUp(s))),this._register(i.onMouseLeave(this.viewHelper.viewDomNode,s=>this._onMouseLeave(s)));let o=0;this._register(i.onPointerDown(this.viewHelper.viewDomNode,(s,a)=>{o=a})),this._register(U(this.viewHelper.viewDomNode,ee.POINTER_UP,s=>{this._mouseDownOperation.onPointerUp()})),this._register(i.onMouseDown(this.viewHelper.viewDomNode,s=>this._onMouseDown(s,o))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){let e=OI.INSTANCE,t=0,n=ql.getZoomLevel(),i=!1,o=0,s=l=>{if(this.viewController.emitMouseWheel(l),!this._context.configuration.options.get(77))return;let d=new Rs(l);if(e.acceptStandardWheelEvent(d),e.isPhysicalMouseWheel()){if(a(l)){let c=ql.getZoomLevel(),p=d.deltaY>0?1:-1;ql.setZoomLevel(c+p),d.preventDefault(),d.stopPropagation()}}else Date.now()-t>50&&(n=ql.getZoomLevel(),i=a(l),o=0),t=Date.now(),o+=d.deltaY,i&&(ql.setZoomLevel(n+o/5),d.preventDefault(),d.stopPropagation())};this._register(U(this.viewHelper.viewDomNode,ee.MOUSE_WHEEL,s,{capture:!0,passive:!1}));function a(l){return Pe?(l.metaKey||l.ctrlKey)&&!l.shiftKey&&!l.altKey:l.ctrlKey&&!l.metaKey&&!l.shiftKey&&!l.altKey}}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(147)){let t=this._context.configuration.options.get(147).height;this._height!==t&&(this._height=t,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,t){let i=new YS(e,t).toPageCoordinates(Ee(this.viewHelper.viewDomNode)),o=TL(this.viewHelper.viewDomNode);if(i.y<o.y||i.y>o.y+o.height||i.x<o.x||i.x>o.x+o.width)return null;let s=wL(this.viewHelper.viewDomNode,o,i);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),o,i,s,null)}_createMouseTarget(e,t){let n=e.target;if(!this.viewHelper.viewDomNode.contains(n)){let i=Vl(this.viewHelper.viewDomNode);i&&(n=i.elementsFromPoint(e.posx,e.posy).find(o=>this.viewHelper.viewDomNode.contains(o)))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?n:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),!(this._mouseDownOperation.isActive()||e.timestamp<this.lastMouseLeaveTime)&&this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=new Date().getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){let n=this._createMouseTarget(e,!0),i=n.type===6||n.type===7,o=n.type===2||n.type===3||n.type===4,s=n.type===3,a=this._context.configuration.options.get(111),l=n.type===8||n.type===5,d=n.type===9,c=e.leftButton||e.middleButton;Pe&&e.leftButton&&e.ctrlKey&&(c=!1);let p=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(c&&(i||s&&a))p(),this._mouseDownOperation.start(n.type,e,t);else if(o)e.preventDefault();else if(l){let h=n.detail;c&&this.viewHelper.shouldSuppressMouseDownOnViewZone(h.viewZoneId)&&(p(),this._mouseDownOperation.start(n.type,e,t),e.preventDefault())}else d&&this.viewHelper.shouldSuppressMouseDownOnWidget(n.detail)&&(p(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:n})}_onMouseWheel(e){this.viewController.emitMouseWheel(e)}},HB=class extends N{constructor(t,n,i,o,s,a){super();this._context=t;this._viewController=n;this._viewHelper=i;this._mouseTargetFactory=o;this._createMouseTarget=s,this._getMouseColumn=a,this._mouseMoveMonitor=this._register(new EL(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new UB(this._context,this._viewHelper,this._mouseTargetFactory,(l,d,c)=>this._dispatchMouse(l,d,c))),this._mouseState=new KB,this._currentSelection=new ze(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}_createMouseTarget;_getMouseColumn;_mouseMoveMonitor;_topBottomDragScrolling;_mouseState;_currentSelection;_isActive;_lastMouseEvent;dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(t){this._lastMouseEvent=t,this._mouseState.setModifiers(t);let n=this._findMousePosition(t,!1);n&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:t,target:n}):n.type===13&&(n.outsidePosition==="above"||n.outsidePosition==="below")?this._topBottomDragScrolling.start(n,t):(this._topBottomDragScrolling.stop(),this._dispatchMouse(n,!0,1)))}start(t,n,i){this._lastMouseEvent=n,this._mouseState.setStartedOnLineNumbers(t===3),this._mouseState.setStartButtons(n),this._mouseState.setModifiers(n);let o=this._findMousePosition(n,!0);if(!o||!o.position)return;this._mouseState.trySetCount(n.detail,o.position),n.detail=this._mouseState.count;let s=this._context.configuration.options;if(!s.get(93)&&s.get(35)&&!s.get(22)&&!this._mouseState.altKey&&n.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&o.type===6&&o.position&&this._currentSelection.containsPosition(o.position)){this._mouseState.isDragAndDrop=!0,this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,n.buttons,a=>this._onMouseDownThenMove(a),a=>{let l=this._findMousePosition(this._lastMouseEvent,!1);Qs(a)?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:l?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()});return}this._mouseState.isDragAndDrop=!1,this._dispatchMouse(o,n.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,n.buttons,a=>this._onMouseDownThenMove(a),()=>this._stop()))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(t){this._currentSelection=t.selections[0]}_getPositionOutsideEditor(t){let n=t.editorPos,i=this._context.viewModel,o=this._context.viewLayout,s=this._getMouseColumn(t);if(t.posy<n.y){let l=n.y-t.posy,d=Math.max(o.getCurrentScrollTop()-l,0),c=Hb.getZoneAtCoord(this._context,d);if(c){let h=this._helpPositionJumpOverViewZone(c);if(h)return Ki.createOutsideEditor(s,h,"above",l)}let p=o.getLineNumberAtVerticalOffset(d);return Ki.createOutsideEditor(s,new F(p,1),"above",l)}if(t.posy>n.y+n.height){let l=t.posy-n.y-n.height,d=o.getCurrentScrollTop()+t.relativePos.y,c=Hb.getZoneAtCoord(this._context,d);if(c){let h=this._helpPositionJumpOverViewZone(c);if(h)return Ki.createOutsideEditor(s,h,"below",l)}let p=o.getLineNumberAtVerticalOffset(d);return Ki.createOutsideEditor(s,new F(p,i.getLineMaxColumn(p)),"below",l)}let a=o.getLineNumberAtVerticalOffset(o.getCurrentScrollTop()+t.relativePos.y);if(t.posx<n.x){let l=n.x-t.posx;return Ki.createOutsideEditor(s,new F(a,1),"left",l)}if(t.posx>n.x+n.width){let l=t.posx-n.x-n.width;return Ki.createOutsideEditor(s,new F(a,i.getLineMaxColumn(a)),"right",l)}return null}_findMousePosition(t,n){let i=this._getPositionOutsideEditor(t);if(i)return i;let o=this._createMouseTarget(t,n);if(!o.position)return null;if(o.type===8||o.type===5){let a=this._helpPositionJumpOverViewZone(o.detail);if(a)return Ki.createViewZone(o.type,o.element,o.mouseColumn,a,o.detail)}return o}_helpPositionJumpOverViewZone(t){let n=new F(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),i=t.positionBefore,o=t.positionAfter;return i&&o?i.isBefore(n)?i:o:null}_dispatchMouse(t,n,i){t.position&&this._viewController.dispatchMouse({position:t.position,mouseColumn:t.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:i,inSelectionMode:n,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:t.type===6&&t.detail.injectedText!==null})}},UB=class extends N{constructor(t,n,i,o){super();this._context=t;this._viewHelper=n;this._mouseTargetFactory=i;this._dispatchMouse=o;this._operation=null}_operation;dispose(){super.dispose(),this.stop()}start(t,n){this._operation?this._operation.setPosition(t,n):this._operation=new zB(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,t,n)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}},zB=class extends N{constructor(t,n,i,o,s,a){super();this._context=t;this._viewHelper=n;this._mouseTargetFactory=i;this._dispatchMouse=o;this._position=s,this._mouseEvent=a,this._lastTime=Date.now(),this._animationFrameDisposable=Ai(Ee(a.browserEvent),()=>this._execute())}_position;_mouseEvent;_lastTime;_animationFrameDisposable;dispose(){this._animationFrameDisposable.dispose(),super.dispose()}setPosition(t,n){this._position=t,this._mouseEvent=n}_tick(){let t=Date.now(),n=t-this._lastTime;return this._lastTime=t,n}_getScrollSpeed(){let t=this._context.configuration.options.get(68),n=this._context.configuration.options.get(147).height/t,i=this._position.outsideDistance/t;return i<=1.5?Math.max(30,n*(1+i)):i<=3?Math.max(60,n*(2+i)):Math.max(200,n*(7+i))}_execute(){let t=this._context.configuration.options.get(68),n=this._getScrollSpeed(),i=this._tick(),o=n*(i/1e3)*t,s=this._position.outsidePosition==="above"?-o:o;this._context.viewModel.viewLayout.deltaScrollNow(0,s),this._viewHelper.renderNow();let a=this._context.viewLayout.getLinesViewportData(),l=this._position.outsidePosition==="above"?a.startLineNumber:a.endLineNumber,d;{let c=TL(this._viewHelper.viewDomNode),p=this._context.configuration.options.get(147).horizontalScrollbarHeight,h=new vp(this._mouseEvent.pos.x,c.y+c.height-p-.1),g=wL(this._viewHelper.viewDomNode,c,h);d=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),c,h,g,null)}(!d.position||d.position.lineNumber!==l)&&(this._position.outsidePosition==="above"?d=Ki.createOutsideEditor(this._position.mouseColumn,new F(l,1),"above",this._position.outsideDistance):d=Ki.createOutsideEditor(this._position.mouseColumn,new F(l,this._context.viewModel.getLineMaxColumn(l)),"below",this._position.outsideDistance)),this._dispatchMouse(d,!0,2),this._animationFrameDisposable=Ai(Ee(d.element),()=>this._execute())}},KB=class r{static CLEAR_MOUSE_DOWN_COUNT_TIME=400;_altKey;get altKey(){return this._altKey}_ctrlKey;get ctrlKey(){return this._ctrlKey}_metaKey;get metaKey(){return this._metaKey}_shiftKey;get shiftKey(){return this._shiftKey}_leftButton;get leftButton(){return this._leftButton}_middleButton;get middleButton(){return this._middleButton}_startedOnLineNumbers;get startedOnLineNumbers(){return this._startedOnLineNumbers}_lastMouseDownPosition;_lastMouseDownPositionEqualCount;_lastMouseDownCount;_lastSetMouseDownCountTime;isDragAndDrop;constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){let n=new Date().getTime();n-this._lastSetMouseDownCountTime>r.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=n,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}};function ak(r,e,t,n){let i=r.getPlainTextToCopy(e,t,It),o=r.model.getEOL(),s=t&&e.length===1&&e[0].isEmpty(),a=Array.isArray(i)?i:null,l=Array.isArray(i)?i.join(o):i,d,c=null;if(rJ.forceCopyWithSyntaxHighlighting||n&&l.length<65536){let h=r.getRichTextToCopy(e,t);h&&(d=h.html,c=h.mode)}return{isFromEmptySelection:s,multicursorText:a,text:l,html:d,mode:c}}var Pg=class r{static INSTANCE=new r;_lastState;constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}},rJ={forceCopyWithSyntaxHighlighting:!1};var Zb=class r{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){let n=e*t,i=n+1,o=n+t;return new D(i,1,o+1,1)}static fromEditorSelection(e,t,n,i){let s=r._getPageOfLine(t.startLineNumber,n),a=r._getRangeForPage(s,n),l=r._getPageOfLine(t.endLineNumber,n),d=r._getRangeForPage(l,n),c=a.intersectRanges(new D(1,1,t.startLineNumber,t.startColumn));if(i&&e.getValueLengthInRange(c,1)>500){let v=e.modifyPosition(c.getEndPosition(),-500);c=D.fromPositions(v,c.getEndPosition())}let p=e.getValueInRange(c,1),h=e.getLineCount(),g=e.getLineMaxColumn(h),f=d.intersectRanges(new D(t.endLineNumber,t.endColumn,h,g));if(i&&e.getValueLengthInRange(f,1)>500){let v=e.modifyPosition(f.getStartPosition(),500);f=D.fromPositions(f.getStartPosition(),v)}let m=e.getValueInRange(f,1),b;if(s===l||s+1===l)b=e.getValueInRange(t,1);else{let v=a.intersectRanges(t),S=d.intersectRanges(t);b=e.getValueInRange(v,1)+"\u2026"+e.getValueInRange(S,1)}return i&&b.length>2*500&&(b=b.substring(0,500)+"\u2026"+b.substring(b.length-500,b.length)),{value:p+b+m,selection:t,selectionStart:p.length,selectionEnd:p.length+b.length,newlineCountBeforeSelection:c.endLineNumber-c.startLineNumber}}};function dC(r,e){if(r.get(2)===1){let n=e.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode")?.getAriaLabel(),i=e.lookupKeybinding("workbench.action.showCommands")?.getAriaLabel(),o=e.lookupKeybinding("workbench.action.openGlobalKeybindings")?.getAriaLabel(),s=u("accessibilityModeOff","The editor is not accessible at this time.");return n?u("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",s,n):i?u("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",s,i):o?u("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",s,o):s}return r.get(4)}function cC(r){let e=0,t=-1;do{if(t=r.indexOf(`
`,t+1),t===-1)break;e++}while(!0);return e}var jr=!1,ji=class r{constructor(e,t,n,i,o){this.value=e;this.selectionStart=t;this.selectionEnd=n;this.selection=i;this.newlineCountBeforeSelection=o}static EMPTY=new r("",0,0,null,void 0);toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(e,t){let n=e.getValue(),i=e.getSelectionStart(),o=e.getSelectionEnd(),s;if(t){let a=n.substring(0,i),l=t.value.substring(0,t.selectionStart);a===l&&(s=t.newlineCountBeforeSelection)}return new r(n,i,o,null,s)}collapseSelection(){return this.selectionStart===this.value.length?this:new r(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,n){jr&&console.log(`writeToTextArea ${e}: ${this.toString()}`),t.setValue(e,this.value),n&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){if(e<=this.selectionStart){let i=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(this.selection?.getStartPosition()??null,i,-1)}if(e>=this.selectionEnd){let i=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(this.selection?.getEndPosition()??null,i,1)}let t=this.value.substring(this.selectionStart,e);if(t.indexOf("\u2026")===-1)return this._finishDeduceEditorPosition(this.selection?.getStartPosition()??null,t,1);let n=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(this.selection?.getEndPosition()??null,n,-1)}_finishDeduceEditorPosition(e,t,n){let i=0,o=-1;for(;(o=t.indexOf(`
`,o+1))!==-1;)i++;return[e,n*t.length,i]}static deduceInput(e,t,n){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};jr&&(console.log("------------------------deduceInput"),console.log(`PREVIOUS STATE: ${e.toString()}`),console.log(`CURRENT STATE: ${t.toString()}`));let i=Math.min(Oa(e.value,t.value),e.selectionStart,t.selectionStart),o=Math.min(ly(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd),s=e.value.substring(i,e.value.length-o),a=t.value.substring(i,t.value.length-o),l=e.selectionStart-i,d=e.selectionEnd-i,c=t.selectionStart-i,p=t.selectionEnd-i;if(jr&&(console.log(`AFTER DIFFING PREVIOUS STATE: <${s}>, selectionStart: ${l}, selectionEnd: ${d}`),console.log(`AFTER DIFFING CURRENT STATE: <${a}>, selectionStart: ${c}, selectionEnd: ${p}`)),c===p){let g=e.selectionStart-i;return jr&&console.log(`REMOVE PREVIOUS: ${g} chars`),{text:a,replacePrevCharCnt:g,replaceNextCharCnt:0,positionDelta:0}}let h=d-l;return{text:a,replacePrevCharCnt:h,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(jr&&(console.log("------------------------deduceAndroidCompositionInput"),console.log(`PREVIOUS STATE: ${e.toString()}`),console.log(`CURRENT STATE: ${t.toString()}`)),e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};let n=Math.min(Oa(e.value,t.value),e.selectionEnd),i=Math.min(ly(e.value,t.value),e.value.length-e.selectionEnd),o=e.value.substring(n,e.value.length-i),s=t.value.substring(n,t.value.length-i),a=e.selectionStart-n,l=e.selectionEnd-n,d=t.selectionStart-n,c=t.selectionEnd-n;return jr&&(console.log(`AFTER DIFFING PREVIOUS STATE: <${o}>, selectionStart: ${a}, selectionEnd: ${l}`),console.log(`AFTER DIFFING CURRENT STATE: <${s}>, selectionStart: ${d}, selectionEnd: ${c}`)),{text:s,replacePrevCharCnt:l,replaceNextCharCnt:o.length-l,positionDelta:c-s.length}}static fromScreenReaderContentState(e){return new r(e.value,e.selectionStart,e.selectionEnd,e.selection,e.newlineCountBeforeSelection)}};var dk;(e=>e.Tap="-monaco-textarea-synthetic-tap")(dk||={});var GB=class{_lastTypeTextLength;constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){e=e||"";let t={text:e,replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}},Jb=class extends N{constructor(t,n,i,o,s,a){super();this._host=t;this._textArea=n;this._OS=i;this._browser=o;this._accessibilityService=s;this._logService=a;this._asyncTriggerCut=this._register(new Hn(()=>this._onCut.fire(),0)),this._textAreaState=ji.EMPTY,this._selectionChangeListener=null,this._accessibilityService.isScreenReaderOptimized()&&this.writeNativeTextAreaContent("ctor"),this._register(z.runAndSubscribe(this._accessibilityService.onDidChangeScreenReaderOptimized,()=>{this._accessibilityService.isScreenReaderOptimized()&&!this._asyncFocusGainWriteScreenReaderContent.value?this._asyncFocusGainWriteScreenReaderContent.value=this._register(new Hn(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)):this._asyncFocusGainWriteScreenReaderContent.clear()})),this._hasFocus=!1,this._currentComposition=null;let l=null;this._register(this._textArea.onKeyDown(d=>{let c=new it(d);(c.keyCode===114||this._currentComposition&&c.keyCode===1)&&c.stopPropagation(),c.equals(9)&&c.preventDefault(),l=c,this._onKeyDown.fire(c)})),this._register(this._textArea.onKeyUp(d=>{let c=new it(d);this._onKeyUp.fire(c)})),this._register(this._textArea.onCompositionStart(d=>{jr&&console.log("[compositionstart]",d);let c=new GB;if(this._currentComposition){this._currentComposition=c;return}if(this._currentComposition=c,this._OS===2&&l&&l.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===d.data&&(l.code==="ArrowRight"||l.code==="ArrowLeft")){jr&&console.log("[compositionstart] Handling long press case on macOS + arrow key",d),c.handleCompositionUpdate("x"),this._onCompositionStart.fire({data:d.data});return}if(this._browser.isAndroid){this._onCompositionStart.fire({data:d.data});return}this._onCompositionStart.fire({data:d.data})})),this._register(this._textArea.onCompositionUpdate(d=>{jr&&console.log("[compositionupdate]",d);let c=this._currentComposition;if(!c)return;if(this._browser.isAndroid){let h=ji.readFromTextArea(this._textArea,this._textAreaState),g=ji.deduceAndroidCompositionInput(this._textAreaState,h);this._textAreaState=h,this._onType.fire(g),this._onCompositionUpdate.fire(d);return}let p=c.handleCompositionUpdate(d.data);this._textAreaState=ji.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(p),this._onCompositionUpdate.fire(d)})),this._register(this._textArea.onCompositionEnd(d=>{jr&&console.log("[compositionend]",d);let c=this._currentComposition;if(!c)return;if(this._currentComposition=null,this._browser.isAndroid){let h=ji.readFromTextArea(this._textArea,this._textAreaState),g=ji.deduceAndroidCompositionInput(this._textAreaState,h);this._textAreaState=h,this._onType.fire(g),this._onCompositionEnd.fire();return}let p=c.handleCompositionUpdate(d.data);this._textAreaState=ji.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(p),this._onCompositionEnd.fire()})),this._register(this._textArea.onInput(d=>{if(jr&&console.log("[input]",d),this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;let c=ji.readFromTextArea(this._textArea,this._textAreaState),p=ji.deduceInput(this._textAreaState,c,this._OS===2);p.replacePrevCharCnt===0&&p.text.length===1&&(mn(p.text.charCodeAt(0))||p.text.charCodeAt(0)===127)||(this._textAreaState=c,(p.text!==""||p.replacePrevCharCnt!==0||p.replaceNextCharCnt!==0||p.positionDelta!==0)&&this._onType.fire(p))})),this._register(this._textArea.onCut(d=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(d),this._asyncTriggerCut.schedule()})),this._register(this._textArea.onCopy(d=>{this._ensureClipboardGetsEditorSelection(d)})),this._register(this._textArea.onPaste(d=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),d.preventDefault(),!d.clipboardData)return;let[c,p]=q9.getTextData(d.clipboardData);c&&(p=p||Pg.INSTANCE.get(c),this._onPaste.fire({text:c,metadata:p}))})),this._register(this._textArea.onFocus(()=>{let d=this._hasFocus;this._setHasFocus(!0),this._accessibilityService.isScreenReaderOptimized()&&this._browser.isSafari&&!d&&this._hasFocus&&(this._asyncFocusGainWriteScreenReaderContent.value||(this._asyncFocusGainWriteScreenReaderContent.value=new Hn(()=>this.writeNativeTextAreaContent("asyncFocusGain"),0)),this._asyncFocusGainWriteScreenReaderContent.value.schedule())})),this._register(this._textArea.onBlur(()=>{this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)})),this._register(this._textArea.onSyntheticTap(()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeNativeTextAreaContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())}))}_onFocus=this._register(new T);onFocus=this._onFocus.event;_onBlur=this._register(new T);onBlur=this._onBlur.event;_onKeyDown=this._register(new T);onKeyDown=this._onKeyDown.event;_onKeyUp=this._register(new T);onKeyUp=this._onKeyUp.event;_onCut=this._register(new T);onCut=this._onCut.event;_onPaste=this._register(new T);onPaste=this._onPaste.event;_onType=this._register(new T);onType=this._onType.event;_onCompositionStart=this._register(new T);onCompositionStart=this._onCompositionStart.event;_onCompositionUpdate=this._register(new T);onCompositionUpdate=this._onCompositionUpdate.event;_onCompositionEnd=this._register(new T);onCompositionEnd=this._onCompositionEnd.event;_onSelectionChangeRequest=this._register(new T);onSelectionChangeRequest=this._onSelectionChangeRequest.event;_asyncTriggerCut;_asyncFocusGainWriteScreenReaderContent=this._register(new Qt);_textAreaState;get textAreaState(){return this._textAreaState}_selectionChangeListener;_hasFocus;_currentComposition;_initializeFromTest(){this._hasFocus=!0,this._textAreaState=ji.readFromTextArea(this._textArea,null)}_installSelectionChangeListener(){let t=0;return U(this._textArea.ownerDocument,"selectionchange",n=>{if(Vc.onSelectionChange(),!this._hasFocus||this._currentComposition||!this._browser.isChrome)return;let i=Date.now(),o=i-t;if(t=i,o<5)return;let s=i-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),s<100||!this._textAreaState.selection)return;let a=this._textArea.getValue();if(this._textAreaState.value!==a)return;let l=this._textArea.getSelectionStart(),d=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===l&&this._textAreaState.selectionEnd===d)return;let c=this._textAreaState.deduceEditorPosition(l),p=this._host.deduceModelPosition(c[0],c[1],c[2]),h=this._textAreaState.deduceEditorPosition(d),g=this._host.deduceModelPosition(h[0],h[1],h[2]),f=new ze(p.lineNumber,p.column,g.lineNumber,g.column);this._onSelectionChangeRequest.fire(f)})}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(t){this._hasFocus!==t&&(this._hasFocus=t,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeNativeTextAreaContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(t,n){this._hasFocus||(n=n.collapseSelection()),n.writeToTextArea(t,this._textArea,this._hasFocus),this._textAreaState=n}writeNativeTextAreaContent(t){!this._accessibilityService.isScreenReaderOptimized()&&t==="render"||this._currentComposition||(this._logService.trace(`writeTextAreaState(reason: ${t})`),this._setAndWriteTextAreaState(t,this._host.getScreenReaderContent()))}_ensureClipboardGetsEditorSelection(t){let n=this._host.getDataToCopy(),i={version:1,isFromEmptySelection:n.isFromEmptySelection,multicursorText:n.multicursorText,mode:n.mode};Pg.INSTANCE.set(this._browser.isFirefox?n.text.replace(/\r\n/g,`
`):n.text,i),t.preventDefault(),t.clipboardData&&q9.setTextData(t.clipboardData,n.text,n.html,i)}};Jb=_([y(4,Xi),y(5,Vt)],Jb);var q9={getTextData(r){let e=r.getData(Fs.text),t=null,n=r.getData("vscode-editor-data");if(typeof n=="string")try{t=JSON.parse(n),t.version!==1&&(t=null)}catch{}return e.length===0&&t===null&&r.files.length>0?[Array.prototype.slice.call(r.files,0).map(o=>o.name).join(`
`),null]:[e,t]},setTextData(r,e,t,n){r.setData(Fs.text,e),typeof t=="string"&&r.setData("text/html",t),r.setData("vscode-editor-data",JSON.stringify(n))}},lk=class extends N{constructor(t){super();this._actual=t;this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown(()=>Vc.onKeyDown())),this._register(this.onBeforeInput(()=>Vc.onBeforeInput())),this._register(this.onInput(()=>Vc.onInput())),this._register(this.onKeyUp(()=>Vc.onKeyUp())),this._register(U(this._actual,dk.Tap,()=>this._onSyntheticTap.fire()))}onKeyDown=this._register(new He(this._actual,"keydown")).event;onKeyPress=this._register(new He(this._actual,"keypress")).event;onKeyUp=this._register(new He(this._actual,"keyup")).event;onCompositionStart=this._register(new He(this._actual,"compositionstart")).event;onCompositionUpdate=this._register(new He(this._actual,"compositionupdate")).event;onCompositionEnd=this._register(new He(this._actual,"compositionend")).event;onBeforeInput=this._register(new He(this._actual,"beforeinput")).event;onInput=this._register(new He(this._actual,"input")).event;onCut=this._register(new He(this._actual,"cut")).event;onCopy=this._register(new He(this._actual,"copy")).event;onPaste=this._register(new He(this._actual,"paste")).event;onFocus=this._register(new He(this._actual,"focus")).event;onBlur=this._register(new He(this._actual,"blur")).event;get ownerDocument(){return this._actual.ownerDocument}_onSyntheticTap=this._register(new T);onSyntheticTap=this._onSyntheticTap.event;_ignoreSelectionChangeTime;hasFocus(){let t=Vl(this._actual);return t?t.activeElement===this._actual:this._actual.isConnected?mr()===this._actual:!1}setIgnoreSelectionChangeTime(t){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(t,n){let i=this._actual;i.value!==n&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=n)}getSelectionStart(){return this._actual.selectionDirection==="backward"?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return this._actual.selectionDirection==="backward"?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(t,n,i){let o=this._actual,s=null,a=Vl(o);a?s=a.activeElement:s=mr();let l=Ee(s),d=s===o,c=o.selectionStart,p=o.selectionEnd;if(d&&c===n&&p===i){yi&&l.parent!==l&&o.focus();return}if(d){this.setIgnoreSelectionChangeTime("setSelectionRange"),o.setSelectionRange(n,i),yi&&l.parent!==l&&o.focus();return}try{let h=gU(o);this.setIgnoreSelectionChangeTime("setSelectionRange"),o.focus(),o.setSelectionRange(n,i),mU(o,h)}catch{}}};var jB=class extends Qb{_lastPointerType;constructor(e,t,n){super(e,t,n),this._register(Jn.addTarget(this.viewHelper.linesContentDomNode)),this._register(U(this.viewHelper.linesContentDomNode,Rt.Tap,o=>this.onTap(o))),this._register(U(this.viewHelper.linesContentDomNode,Rt.Change,o=>this.onChange(o))),this._register(U(this.viewHelper.linesContentDomNode,Rt.Contextmenu,o=>this._onContextMenu(new Ia(o,!1,this.viewHelper.viewDomNode),!1))),this._lastPointerType="mouse",this._register(U(this.viewHelper.linesContentDomNode,"pointerdown",o=>{let s=o.pointerType;if(s==="mouse"){this._lastPointerType="mouse";return}else s==="touch"?this._lastPointerType="touch":this._lastPointerType="pen"}));let i=new xL(this.viewHelper.viewDomNode);this._register(i.onPointerMove(this.viewHelper.viewDomNode,o=>this._onMouseMove(o))),this._register(i.onPointerUp(this.viewHelper.viewDomNode,o=>this._onMouseUp(o))),this._register(i.onPointerLeave(this.viewHelper.viewDomNode,o=>this._onMouseLeave(o))),this._register(i.onPointerDown(this.viewHelper.viewDomNode,(o,s)=>this._onMouseDown(o,s)))}onTap(e){!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget)||(e.preventDefault(),this.viewHelper.focusTextArea(),this._dispatchGesture(e,!1))}onChange(e){this._lastPointerType==="touch"&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY),this._lastPointerType==="pen"&&this._dispatchGesture(e,!0)}_dispatchGesture(e,t){let n=this._createMouseTarget(new Ia(e,!1,this.viewHelper.viewDomNode),!1);n.position&&this.viewController.dispatchMouse({position:n.position,mouseColumn:n.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:t,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:n.type===6&&n.detail.injectedText!==null})}_onMouseDown(e,t){e.browserEvent.pointerType!=="touch"&&super._onMouseDown(e,t)}},$B=class extends Qb{constructor(e,t,n){super(e,t,n),this._register(Jn.addTarget(this.viewHelper.linesContentDomNode)),this._register(U(this.viewHelper.linesContentDomNode,Rt.Tap,i=>this.onTap(i))),this._register(U(this.viewHelper.linesContentDomNode,Rt.Change,i=>this.onChange(i))),this._register(U(this.viewHelper.linesContentDomNode,Rt.Contextmenu,i=>this._onContextMenu(new Ia(i,!1,this.viewHelper.viewDomNode),!1)))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();let t=this._createMouseTarget(new Ia(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){let n=document.createEvent("CustomEvent");n.initEvent(dk.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(n),this.viewController.moveTo(t.position,1)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}},ck=class extends N{handler;constructor(e,t,n){super(),(li||wx&&Sx)&&vu.pointerEvents?this.handler=this._register(new jB(e,t,n)):We.TouchEvent?this.handler=this._register(new $B(e,t,n)):this.handler=this._register(new Qb(e,t,n))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}};var Lr=class extends da{};var uk=class extends hn{_visibleLines;domNode;_dynamicOverlays=[];_isFocused=!1;constructor(e){super(e),this._visibleLines=new Ab({createLine:()=>new qB(this._dynamicOverlays)}),this.domNode=this._visibleLines.domNode;let n=this._context.configuration.options.get(51);Un(this.domNode,n),this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,t=this._dynamicOverlays.length;e<t;e++)if(this._dynamicOverlays[e].shouldRender())return!0;return!1}dispose(){super.dispose();for(let e=0,t=this._dynamicOverlays.length;e<t;e++)this._dynamicOverlays[e].dispose();this._dynamicOverlays=[]}getDomNode(){return this.domNode}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);let n=this._context.configuration.options.get(51);return Un(this.domNode,n),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){let t=this._dynamicOverlays.filter(n=>n.shouldRender());for(let n=0,i=t.length;n<i;n++){let o=t[n];o.prepareRender(e),o.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}},qB=class{_dynamicOverlays;_domNode;_renderedContent;constructor(e){this._dynamicOverlays=e,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=Ye(e)}onContentChanged(){}onTokensChanged(){}renderLine(e,t,n,i,o){let s="";for(let a=0,l=this._dynamicOverlays.length;a<l;a++){let d=this._dynamicOverlays[a];s+=d.render(i.startLineNumber,e)}return this._renderedContent===s?!1:(this._renderedContent=s,o.appendString('<div style="top:'),o.appendString(String(t)),o.appendString("px;height:"),o.appendString(String(n)),o.appendString('px;">'),o.appendString(s),o.appendString("</div>"),!0)}layoutLine(e,t,n){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(n))}},pk=class extends uk{_contentWidth;constructor(e){super(e);let n=this._context.configuration.options.get(147);this._contentWidth=n.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){let n=this._context.configuration.options.get(147);return this._contentWidth=n.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}},hk=class extends uk{_contentLeft;constructor(e){super(e);let t=this._context.configuration.options,n=t.get(147);this._contentLeft=n.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),Un(this.domNode,t.get(51))}onConfigurationChanged(e){let t=this._context.configuration.options;Un(this.domNode,t.get(51));let n=t.get(147);return this._contentLeft=n.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);let t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}};var gk=class extends hn{domNode;blocks=[];contentWidth=-1;contentLeft=0;constructor(e){super(e),this.domNode=Ye(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("blockDecorations-container"),this.update()}update(){let e=!1,n=this._context.configuration.options.get(147),i=n.contentWidth-n.verticalScrollbarWidth;this.contentWidth!==i&&(this.contentWidth=i,e=!0);let o=n.contentLeft;return this.contentLeft!==o&&(this.contentLeft=o,e=!0),e}dispose(){super.dispose()}onConfigurationChanged(e){return this.update()}onScrollChanged(e){return e.scrollTopChanged||e.scrollLeftChanged}onDecorationsChanged(e){return!0}onZonesChanged(e){return!0}prepareRender(e){}render(e){let t=0,n=e.getDecorationsInViewport();for(let i of n){if(!i.options.blockClassName)continue;let o=this.blocks[t];o||(o=this.blocks[t]=Ye(document.createElement("div")),this.domNode.appendChild(o));let s,a;i.options.blockIsAfterEnd?(s=e.getVerticalOffsetAfterLineNumber(i.range.endLineNumber,!1),a=e.getVerticalOffsetAfterLineNumber(i.range.endLineNumber,!0)):(s=e.getVerticalOffsetForLineNumber(i.range.startLineNumber,!0),a=i.range.isEmpty()&&!i.options.blockDoesNotCollapse?e.getVerticalOffsetForLineNumber(i.range.startLineNumber,!1):e.getVerticalOffsetAfterLineNumber(i.range.endLineNumber,!0));let[l,d,c,p]=i.options.blockPadding??[0,0,0,0];o.setClassName("blockDecorations-block "+i.options.blockClassName),o.setLeft(this.contentLeft-p),o.setWidth(this.contentWidth+p+d),o.setTop(s-e.scrollTop-l),o.setHeight(a-s+l+c),t++}for(let i=t;i<this.blocks.length;i++)this.blocks[i].domNode.remove();this.blocks.length=t}};var mk=class extends hn{_viewDomNode;_widgets;domNode;overflowingContentWidgetsDomNode;constructor(e,t){super(e),this._viewDomNode=t,this._widgets={},this.domNode=Ye(document.createElement("div")),zi.write(this.domNode,1),this.domNode.setClassName("contentWidgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this.overflowingContentWidgetsDomNode=Ye(document.createElement("div")),zi.write(this.overflowingContentWidgetsDomNode,2),this.overflowingContentWidgetsDomNode.setClassName("overflowingContentWidgets")}dispose(){super.dispose(),this._widgets={}}onConfigurationChanged(e){let t=Object.keys(this._widgets);for(let n of t)this._widgets[n].onConfigurationChanged(e);return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLineMappingChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesChanged(e){return this._updateAnchorsViewPositions(),!0}onLinesDeleted(e){return this._updateAnchorsViewPositions(),!0}onLinesInserted(e){return this._updateAnchorsViewPositions(),!0}onScrollChanged(e){return!0}onZonesChanged(e){return!0}_updateAnchorsViewPositions(){let e=Object.keys(this._widgets);for(let t of e)this._widgets[t].updateAnchorViewPosition()}addWidget(e){let t=new XB(this._context,this._viewDomNode,e);this._widgets[t.id]=t,t.allowEditorOverflow?this.overflowingContentWidgetsDomNode.appendChild(t.domNode):this.domNode.appendChild(t.domNode),this.setShouldRender()}setWidgetPosition(e,t,n,i,o){this._widgets[e.getId()].setPosition(t,n,i,o),this.setShouldRender()}removeWidget(e){let t=e.getId();if(this._widgets.hasOwnProperty(t)){let n=this._widgets[t];delete this._widgets[t];let i=n.domNode.domNode;i.remove(),i.removeAttribute("monaco-visible-content-widget"),this.setShouldRender()}}shouldSuppressMouseDownOnWidget(e){return this._widgets.hasOwnProperty(e)?this._widgets[e].suppressMouseDown:!1}onBeforeRender(e){let t=Object.keys(this._widgets);for(let n of t)this._widgets[n].onBeforeRender(e)}prepareRender(e){let t=Object.keys(this._widgets);for(let n of t)this._widgets[n].prepareRender(e)}render(e){let t=Object.keys(this._widgets);for(let n of t)this._widgets[n].render(e)}},XB=class{_context;_viewDomNode;_actual;domNode;id;allowEditorOverflow;suppressMouseDown;_fixedOverflowWidgets;_contentWidth;_contentLeft;_lineHeight;_primaryAnchor=new Ag(null,null);_secondaryAnchor=new Ag(null,null);_affinity;_preference;_cachedDomNodeOffsetWidth;_cachedDomNodeOffsetHeight;_maxWidth;_isVisible;_renderData;constructor(e,t,n){this._context=e,this._viewDomNode=t,this._actual=n,this.domNode=Ye(this._actual.getDomNode()),this.id=this._actual.getId(),this.allowEditorOverflow=this._actual.allowEditorOverflow||!1,this.suppressMouseDown=this._actual.suppressMouseDown||!1;let i=this._context.configuration.options,o=i.get(147);this._fixedOverflowWidgets=i.get(43),this._contentWidth=o.contentWidth,this._contentLeft=o.contentLeft,this._lineHeight=i.get(68),this._affinity=null,this._preference=[],this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1,this._maxWidth=this._getMaxWidth(),this._isVisible=!1,this._renderData=null,this.domNode.setPosition(this._fixedOverflowWidgets&&this.allowEditorOverflow?"fixed":"absolute"),this.domNode.setDisplay("none"),this.domNode.setVisibility("hidden"),this.domNode.setAttribute("widgetId",this.id),this.domNode.setMaxWidth(this._maxWidth)}onConfigurationChanged(e){let t=this._context.configuration.options;if(this._lineHeight=t.get(68),e.hasChanged(147)){let n=t.get(147);this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._maxWidth=this._getMaxWidth()}}updateAnchorViewPosition(){this._setPosition(this._affinity,this._primaryAnchor.modelPosition,this._secondaryAnchor.modelPosition)}_setPosition(e,t,n){this._affinity=e,this._primaryAnchor=i(t,this._context.viewModel,this._affinity),this._secondaryAnchor=i(n,this._context.viewModel,this._affinity);function i(o,s,a){if(!o)return new Ag(null,null);let l=s.model.validatePosition(o);if(s.coordinatesConverter.modelPositionIsVisible(l)){let d=s.coordinatesConverter.convertModelPositionToViewPosition(l,a??void 0);return new Ag(o,d)}return new Ag(o,null)}}_getMaxWidth(){let e=this.domNode.domNode.ownerDocument,t=e.defaultView;return this.allowEditorOverflow?t?.innerWidth||e.documentElement.offsetWidth||e.body.offsetWidth:this._contentWidth}setPosition(e,t,n,i){this._setPosition(i,e,t),this._preference=n,this._primaryAnchor.viewPosition&&this._preference&&this._preference.length>0?this.domNode.setDisplay("block"):this.domNode.setDisplay("none"),this._cachedDomNodeOffsetWidth=-1,this._cachedDomNodeOffsetHeight=-1}_layoutBoxInViewport(e,t,n,i){let o=e.top,s=o,a=e.top+e.height,l=i.viewportHeight-a,d=o-n,c=s>=n,p=a,h=l>=n,g=e.left;return g+t>i.scrollLeft+i.viewportWidth&&(g=i.scrollLeft+i.viewportWidth-t),g<i.scrollLeft&&(g=i.scrollLeft),{fitsAbove:c,aboveTop:d,fitsBelow:h,belowTop:p,left:g}}_layoutHorizontalSegmentInPage(e,t,n,i){let a=Math.max(15,t.left-i),l=Math.min(t.left+t.width+i,e.width-15),c=this._viewDomNode.domNode.ownerDocument.defaultView,p=t.left+n-(c?.scrollX??0);if(p+i>l){let h=p-(l-i);p-=h,n-=h}if(p<a){let h=p-a;p-=h,n-=h}return[n,p]}_layoutBoxInPage(e,t,n,i){let o=e.top-n,s=e.top+e.height,a=Ii(this._viewDomNode.domNode),l=this._viewDomNode.domNode.ownerDocument,d=l.defaultView,c=a.top+o-(d?.scrollY??0),p=a.top+s-(d?.scrollY??0),h=Ba(l.body),[g,f]=this._layoutHorizontalSegmentInPage(h,a,e.left-i.scrollLeft+this._contentLeft,t),m=22,b=22,v=c>=m,S=p+n<=h.height-b;return this._fixedOverflowWidgets?{fitsAbove:v,aboveTop:Math.max(c,m),fitsBelow:S,belowTop:p,left:f}:{fitsAbove:v,aboveTop:o,fitsBelow:S,belowTop:s,left:g}}_prepareRenderWidgetAtExactPositionOverflowing(e){return new Ng(e.top,e.left+this._contentLeft)}_getAnchorsCoordinates(e){let t=o(this._primaryAnchor.viewPosition,this._affinity,this._lineHeight),n=this._secondaryAnchor.viewPosition?.lineNumber===this._primaryAnchor.viewPosition?.lineNumber?this._secondaryAnchor.viewPosition:null,i=o(n,this._affinity,this._lineHeight);return{primary:t,secondary:i};function o(s,a,l){if(!s)return null;let d=e.visibleRangeForPosition(s);if(!d)return null;let c=s.column===1&&a===3?0:d.left,p=e.getVerticalOffsetForLineNumber(s.lineNumber)-e.scrollTop;return new fk(p,c,l)}}_reduceAnchorCoordinates(e,t,n){if(!t)return e;let i=this._context.configuration.options.get(51),o=t.left;return o<e.left?o=Math.max(o,e.left-n+i.typicalFullwidthCharacterWidth):o=Math.min(o,e.left+n-i.typicalFullwidthCharacterWidth),new fk(e.top,o,e.height)}_prepareRenderWidget(e){if(!this._preference||this._preference.length===0)return null;let{primary:t,secondary:n}=this._getAnchorsCoordinates(e);if(!t)return{kind:"offViewport",preserveFocus:this.domNode.domNode.contains(this.domNode.domNode.ownerDocument.activeElement)};if(this._cachedDomNodeOffsetWidth===-1||this._cachedDomNodeOffsetHeight===-1){let s=null;if(typeof this._actual.beforeRender=="function"&&(s=YB(this._actual.beforeRender,this._actual)),s)this._cachedDomNodeOffsetWidth=s.width,this._cachedDomNodeOffsetHeight=s.height;else{let l=this.domNode.domNode.getBoundingClientRect();this._cachedDomNodeOffsetWidth=Math.round(l.width),this._cachedDomNodeOffsetHeight=Math.round(l.height)}}let i=this._reduceAnchorCoordinates(t,n,this._cachedDomNodeOffsetWidth),o;this.allowEditorOverflow?o=this._layoutBoxInPage(i,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e):o=this._layoutBoxInViewport(i,this._cachedDomNodeOffsetWidth,this._cachedDomNodeOffsetHeight,e);for(let s=1;s<=2;s++)for(let a of this._preference)if(a===1){if(!o)return null;if(s===2||o.fitsAbove)return{kind:"inViewport",coordinate:new Ng(o.aboveTop,o.left),position:1}}else if(a===2){if(!o)return null;if(s===2||o.fitsBelow)return{kind:"inViewport",coordinate:new Ng(o.belowTop,o.left),position:2}}else return this.allowEditorOverflow?{kind:"inViewport",coordinate:this._prepareRenderWidgetAtExactPositionOverflowing(new Ng(i.top,i.left)),position:0}:{kind:"inViewport",coordinate:new Ng(i.top,i.left),position:0};return null}onBeforeRender(e){!this._primaryAnchor.viewPosition||!this._preference||this._primaryAnchor.viewPosition.lineNumber<e.startLineNumber||this._primaryAnchor.viewPosition.lineNumber>e.endLineNumber||this.domNode.setMaxWidth(this._maxWidth)}prepareRender(e){this._renderData=this._prepareRenderWidget(e)}render(e){if(!this._renderData||this._renderData.kind==="offViewport"){this._isVisible&&(this.domNode.removeAttribute("monaco-visible-content-widget"),this._isVisible=!1,this._renderData?.kind==="offViewport"&&this._renderData.preserveFocus?this.domNode.setTop(-1e3):this.domNode.setVisibility("hidden")),typeof this._actual.afterRender=="function"&&YB(this._actual.afterRender,this._actual,null);return}this.allowEditorOverflow?(this.domNode.setTop(this._renderData.coordinate.top),this.domNode.setLeft(this._renderData.coordinate.left)):(this.domNode.setTop(this._renderData.coordinate.top+e.scrollTop-e.bigNumbersDelta),this.domNode.setLeft(this._renderData.coordinate.left)),this._isVisible||(this.domNode.setVisibility("inherit"),this.domNode.setAttribute("monaco-visible-content-widget","true"),this._isVisible=!0),typeof this._actual.afterRender=="function"&&YB(this._actual.afterRender,this._actual,this._renderData.position)}},Ag=class{constructor(e,t){this.modelPosition=e;this.viewPosition=t}},Ng=class{constructor(e,t){this.top=e;this.left=t}_coordinateBrand=void 0},fk=class{constructor(e,t,n){this.top=e;this.left=t;this.height=n}_anchorCoordinateBrand=void 0};function YB(r,e,...t){try{return r.call(e,...t)}catch{return null}}var bk=class extends Lr{_context;_renderLineHighlight;_wordWrap;_contentLeft;_contentWidth;_selectionIsEmpty;_renderLineHighlightOnlyWhenFocus;_focused;_cursorLineNumbers;_selections;_renderData;constructor(e){super(),this._context=e;let t=this._context.configuration.options,n=t.get(147);this._renderLineHighlight=t.get(98),this._renderLineHighlightOnlyWhenFocus=t.get(99),this._wordWrap=n.isViewportWrapping,this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,this._selectionIsEmpty=!0,this._focused=!1,this._cursorLineNumbers=[1],this._selections=[new ze(1,1,1,1)],this._renderData=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}_readFromSelections(){let e=!1,t=new Set;for(let o of this._selections)t.add(o.positionLineNumber);let n=Array.from(t);n.sort((o,s)=>o-s),sn(this._cursorLineNumbers,n)||(this._cursorLineNumbers=n,e=!0);let i=this._selections.every(o=>o.isEmpty());return this._selectionIsEmpty!==i&&(this._selectionIsEmpty=i,e=!0),e}onThemeChanged(e){return this._readFromSelections()}onConfigurationChanged(e){let t=this._context.configuration.options,n=t.get(147);return this._renderLineHighlight=t.get(98),this._renderLineHighlightOnlyWhenFocus=t.get(99),this._wordWrap=n.isViewportWrapping,this._contentLeft=n.contentLeft,this._contentWidth=n.contentWidth,!0}onCursorStateChanged(e){return this._selections=e.selections,this._readFromSelections()}onFlushed(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollWidthChanged||e.scrollTopChanged}onZonesChanged(e){return!0}onFocusChanged(e){return this._renderLineHighlightOnlyWhenFocus?(this._focused=e.isFocused,!0):!1}prepareRender(e){if(!this._shouldRenderThis()){this._renderData=null;return}let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=[];for(let s=t;s<=n;s++){let a=s-t;i[a]=""}if(this._wordWrap){let s=this._renderOne(e,!1);for(let a of this._cursorLineNumbers){let l=this._context.viewModel.coordinatesConverter,d=l.convertViewPositionToModelPosition(new F(a,1)).lineNumber,c=l.convertModelPositionToViewPosition(new F(d,1)).lineNumber,p=l.convertModelPositionToViewPosition(new F(d,this._context.viewModel.model.getLineMaxColumn(d))).lineNumber,h=Math.max(c,t),g=Math.min(p,n);for(let f=h;f<=g;f++){let m=f-t;i[m]=s}}}let o=this._renderOne(e,!0);for(let s of this._cursorLineNumbers){if(s<t||s>n)continue;let a=s-t;i[a]=o}this._renderData=i}render(e,t){if(!this._renderData)return"";let n=t-e;return n>=this._renderData.length?"":this._renderData[n]}_shouldRenderInMargin(){return(this._renderLineHighlight==="gutter"||this._renderLineHighlight==="all")&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}_shouldRenderInContent(){return(this._renderLineHighlight==="line"||this._renderLineHighlight==="all")&&this._selectionIsEmpty&&(!this._renderLineHighlightOnlyWhenFocus||this._focused)}},vk=class extends bk{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-both":"")+(t?" current-line-exact":"")}" style="width:${Math.max(e.scrollWidth,this._contentWidth)}px;"></div>`}_shouldRenderThis(){return this._shouldRenderInContent()}_shouldRenderOther(){return this._shouldRenderInMargin()}},yk=class extends bk{_renderOne(e,t){return`<div class="${"current-line"+(this._shouldRenderInMargin()?" current-line-margin":"")+(this._shouldRenderOther()?" current-line-margin-both":"")+(this._shouldRenderInMargin()&&t?" current-line-exact-margin":"")}" style="width:${this._contentLeft}px"></div>`}_shouldRenderThis(){return!0}_shouldRenderOther(){return this._shouldRenderInContent()}};to((r,e)=>{let t=r.getColor($A);if(t&&(e.addRule(`.monaco-editor .view-overlays .current-line { background-color: ${t}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-margin { background-color: ${t}; border: none; }`)),!t||t.isTransparent()||r.defines(qA)){let n=r.getColor(qA);n&&(e.addRule(`.monaco-editor .view-overlays .current-line-exact { border: 2px solid ${n}; }`),e.addRule(`.monaco-editor .margin-view-overlays .current-line-exact-margin { border: 2px solid ${n}; }`),id(r.type)&&(e.addRule(".monaco-editor .view-overlays .current-line-exact { border-width: 1px; }"),e.addRule(".monaco-editor .margin-view-overlays .current-line-exact-margin { border-width: 1px; }")))}});var Ik=class extends Lr{_context;_typicalHalfwidthCharacterWidth;_renderResult;constructor(e){super(),this._context=e;let t=this._context.configuration.options;this._typicalHalfwidthCharacterWidth=t.get(51).typicalHalfwidthCharacterWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return this._typicalHalfwidthCharacterWidth=t.get(51).typicalHalfwidthCharacterWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}prepareRender(e){let t=e.getDecorationsInViewport(),n=[],i=0;for(let l=0,d=t.length;l<d;l++){let c=t[l];c.options.className&&(n[i++]=c)}n=n.sort((l,d)=>{if(l.options.zIndex<d.options.zIndex)return-1;if(l.options.zIndex>d.options.zIndex)return 1;let c=l.options.className,p=d.options.className;return c<p?-1:c>p?1:D.compareRangesUsingStarts(l.range,d.range)});let o=e.visibleRange.startLineNumber,s=e.visibleRange.endLineNumber,a=[];for(let l=o;l<=s;l++){let d=l-o;a[d]=""}this._renderWholeLineDecorations(e,n,a),this._renderNormalDecorations(e,n,a),this._renderResult=a}_renderWholeLineDecorations(e,t,n){let i=e.visibleRange.startLineNumber,o=e.visibleRange.endLineNumber;for(let s=0,a=t.length;s<a;s++){let l=t[s];if(!l.options.isWholeLine)continue;let d='<div class="cdr '+l.options.className+'" style="left:0;width:100%;"></div>',c=Math.max(l.range.startLineNumber,i),p=Math.min(l.range.endLineNumber,o);for(let h=c;h<=p;h++){let g=h-i;n[g]+=d}}}_renderNormalDecorations(e,t,n){let i=e.visibleRange.startLineNumber,o=null,s=!1,a=null,l=!1;for(let d=0,c=t.length;d<c;d++){let p=t[d];if(p.options.isWholeLine)continue;let h=p.options.className,g=!!p.options.showIfCollapsed,f=p.range;if(g&&f.endColumn===1&&f.endLineNumber!==f.startLineNumber&&(f=new D(f.startLineNumber,f.startColumn,f.endLineNumber-1,this._context.viewModel.getLineMaxColumn(f.endLineNumber-1))),o===h&&s===g&&D.areIntersectingOrTouching(a,f)){a=D.plusRange(a,f);continue}o!==null&&this._renderNormalDecoration(e,a,o,l,s,i,n),o=h,s=g,a=f,l=p.options.shouldFillLineOnLineBreak??!1}o!==null&&this._renderNormalDecoration(e,a,o,l,s,i,n)}_renderNormalDecoration(e,t,n,i,o,s,a){let l=e.linesVisibleRangesForRange(t,n==="findMatch");if(l)for(let d=0,c=l.length;d<c;d++){let p=l[d];if(p.outsideRenderedLine)continue;let h=p.lineNumber-s;if(o&&p.ranges.length===1){let g=p.ranges[0];if(g.width<this._typicalHalfwidthCharacterWidth){let f=Math.round(g.left+g.width/2),m=Math.max(0,Math.round(f-this._typicalHalfwidthCharacterWidth/2));p.ranges[0]=new Ob(m,this._typicalHalfwidthCharacterWidth)}}for(let g=0,f=p.ranges.length;g<f;g++){let m=i&&p.continuesOnNextLine&&f===1,b=p.ranges[g],v='<div class="cdr '+n+'" style="left:'+String(b.left)+"px;width:"+(m?"100%;":String(b.width)+"px;")+'"></div>';a[h]+=v}}}render(e,t){if(!this._renderResult)return"";let n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}};var Sk=class extends hn{scrollbar;scrollbarDomNode;constructor(e,t,n,i){super(e);let o=this._context.configuration.options,s=o.get(105),a=o.get(76),l=o.get(41),d=o.get(108),c={listenOnDomNode:n.domNode,className:"editor-scrollable "+_I(e.theme.type),useShadows:!1,lazyRender:!0,vertical:s.vertical,horizontal:s.horizontal,verticalHasArrows:s.verticalHasArrows,horizontalHasArrows:s.horizontalHasArrows,verticalScrollbarSize:s.verticalScrollbarSize,verticalSliderSize:s.verticalSliderSize,horizontalScrollbarSize:s.horizontalScrollbarSize,horizontalSliderSize:s.horizontalSliderSize,handleMouseWheel:s.handleMouseWheel,alwaysConsumeMouseWheel:s.alwaysConsumeMouseWheel,arrowSize:s.arrowSize,mouseWheelScrollSensitivity:a,fastScrollSensitivity:l,scrollPredominantAxis:d,scrollByPage:s.scrollByPage};this.scrollbar=this._register(new ep(t.domNode,c,this._context.viewLayout.getScrollable())),zi.write(this.scrollbar.getDomNode(),6),this.scrollbarDomNode=Ye(this.scrollbar.getDomNode()),this.scrollbarDomNode.setPosition("absolute"),this._setLayout();let p=(h,g,f)=>{let m={};if(g){let b=h.scrollTop;b&&(m.scrollTop=this._context.viewLayout.getCurrentScrollTop()+b,h.scrollTop=0)}if(f){let b=h.scrollLeft;b&&(m.scrollLeft=this._context.viewLayout.getCurrentScrollLeft()+b,h.scrollLeft=0)}this._context.viewModel.viewLayout.setScrollPosition(m,1)};this._register(U(n.domNode,"scroll",h=>p(n.domNode,!0,!0))),this._register(U(t.domNode,"scroll",h=>p(t.domNode,!0,!1))),this._register(U(i.domNode,"scroll",h=>p(i.domNode,!0,!1))),this._register(U(this.scrollbarDomNode.domNode,"scroll",h=>p(this.scrollbarDomNode.domNode,!0,!1)))}dispose(){super.dispose()}_setLayout(){let e=this._context.configuration.options,t=e.get(147);this.scrollbarDomNode.setLeft(t.contentLeft),e.get(74).side==="right"?this.scrollbarDomNode.setWidth(t.contentWidth+t.minimap.minimapWidth):this.scrollbarDomNode.setWidth(t.contentWidth),this.scrollbarDomNode.setHeight(t.height)}getOverviewRulerLayoutInfo(){return this.scrollbar.getOverviewRulerLayoutInfo()}getDomNode(){return this.scrollbarDomNode}delegateVerticalScrollbarPointerDown(e){this.scrollbar.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this.scrollbar.delegateScrollFromMouseWheelEvent(e)}onConfigurationChanged(e){if(e.hasChanged(105)||e.hasChanged(76)||e.hasChanged(41)){let t=this._context.configuration.options,n=t.get(105),i=t.get(76),o=t.get(41),s=t.get(108),a={vertical:n.vertical,horizontal:n.horizontal,verticalScrollbarSize:n.verticalScrollbarSize,horizontalScrollbarSize:n.horizontalScrollbarSize,scrollByPage:n.scrollByPage,handleMouseWheel:n.handleMouseWheel,mouseWheelScrollSensitivity:i,fastScrollSensitivity:o,scrollPredominantAxis:s};this.scrollbar.updateOptions(a)}return e.hasChanged(147)&&this._setLayout(),!0}onScrollChanged(e){return!0}onThemeChanged(e){return this.scrollbar.updateClassName("editor-scrollable "+_I(this._context.theme.type)),!0}prepareRender(e){}render(e){this.scrollbar.renderNow()}};var Fg=class{constructor(e,t,n,i,o){this.startLineNumber=e;this.endLineNumber=t;this.className=n;this.tooltip=i;this.zIndex=o??0}_decorationToRenderBrand=void 0;zIndex},QB=class{constructor(e,t,n){this.className=e;this.zIndex=t;this.tooltip=n}},ZB=class{decorations=[];add(e){this.decorations.push(e)}getDecorations(){return this.decorations}},ev=class extends Lr{_render(e,t,n){let i=[];for(let a=e;a<=t;a++){let l=a-e;i[l]=new ZB}if(n.length===0)return i;n.sort((a,l)=>a.className===l.className?a.startLineNumber===l.startLineNumber?a.endLineNumber-l.endLineNumber:a.startLineNumber-l.startLineNumber:a.className<l.className?-1:1);let o=null,s=0;for(let a=0,l=n.length;a<l;a++){let d=n[a],c=d.className,p=d.zIndex,h=Math.max(d.startLineNumber,e)-e,g=Math.min(d.endLineNumber,t)-e;o===c?(h=Math.max(s+1,h),s=Math.max(s,g)):(o=c,s=g);for(let f=h;f<=s;f++)i[f].add(new QB(c,p,d.tooltip))}return i}},Ck=class extends hn{domNode;_lineHeight;_glyphMargin;_glyphMarginLeft;_glyphMarginWidth;_glyphMarginDecorationLaneCount;_managedDomNodes;_decorationGlyphsToRender;_widgets={};constructor(e){super(e),this._context=e;let t=this._context.configuration.options,n=t.get(147);this.domNode=Ye(document.createElement("div")),this.domNode.setClassName("glyph-margin-widgets"),this.domNode.setPosition("absolute"),this.domNode.setTop(0),this._lineHeight=t.get(68),this._glyphMargin=t.get(58),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._glyphMarginDecorationLaneCount=n.glyphMarginDecorationLaneCount,this._managedDomNodes=[],this._decorationGlyphsToRender=[]}dispose(){this._managedDomNodes=[],this._decorationGlyphsToRender=[],this._widgets={},super.dispose()}getWidgets(){return Object.values(this._widgets)}onConfigurationChanged(e){let t=this._context.configuration.options,n=t.get(147);return this._lineHeight=t.get(68),this._glyphMargin=t.get(58),this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._glyphMarginDecorationLaneCount=n.glyphMarginDecorationLaneCount,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}addWidget(e){let t=Ye(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:e.getPosition(),domNode:t,renderInfo:null},t.setPosition("absolute"),t.setDisplay("none"),t.setAttribute("widgetId",e.getId()),this.domNode.appendChild(t),this.setShouldRender()}setWidgetPosition(e,t){let n=this._widgets[e.getId()];return n.preference.lane===t.lane&&n.preference.zIndex===t.zIndex&&D.equalsRange(n.preference.range,t.range)?!1:(n.preference=t,this.setShouldRender(),!0)}removeWidget(e){let t=e.getId();if(this._widgets[t]){let i=this._widgets[t].domNode.domNode;delete this._widgets[t],i.remove(),this.setShouldRender()}}_collectDecorationBasedGlyphRenderRequest(e,t){let n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,o=e.getDecorationsInViewport();for(let s of o){let a=s.options.glyphMarginClassName;if(!a)continue;let l=Math.max(s.range.startLineNumber,n),d=Math.min(s.range.endLineNumber,i),c=s.options.glyphMargin?.position??2,p=s.options.zIndex??0;for(let h=l;h<=d;h++){let g=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new F(h,0)),f=this._context.viewModel.glyphLanes.getLanesAtLine(g.lineNumber).indexOf(c);t.push(new JB(h,f,p,a))}}}_collectWidgetBasedGlyphRenderRequest(e,t){let n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;for(let o of Object.values(this._widgets)){let s=o.preference.range,{startLineNumber:a,endLineNumber:l}=this._context.viewModel.coordinatesConverter.convertModelRangeToViewRange(D.lift(s));if(!a||!l||l<n||a>i)continue;let d=Math.max(a,n),c=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new F(d,0)),p=this._context.viewModel.glyphLanes.getLanesAtLine(c.lineNumber).indexOf(o.preference.lane);t.push(new eW(d,p,o.preference.zIndex,o))}}_collectSortedGlyphRenderRequests(e){let t=[];return this._collectDecorationBasedGlyphRenderRequest(e,t),this._collectWidgetBasedGlyphRenderRequest(e,t),t.sort((n,i)=>n.lineNumber===i.lineNumber?n.laneIndex===i.laneIndex?n.zIndex===i.zIndex?i.type===n.type?n.type===0&&i.type===0?n.className<i.className?-1:1:0:i.type-n.type:i.zIndex-n.zIndex:n.laneIndex-i.laneIndex:n.lineNumber-i.lineNumber),t}prepareRender(e){if(!this._glyphMargin){this._decorationGlyphsToRender=[];return}for(let i of Object.values(this._widgets))i.renderInfo=null;let t=new Rr(this._collectSortedGlyphRenderRequests(e)),n=[];for(;t.length>0;){let i=t.peek();if(!i)break;let o=t.takeWhile(a=>a.lineNumber===i.lineNumber&&a.laneIndex===i.laneIndex);if(!o||o.length===0)break;let s=o[0];if(s.type===0){let a=[];for(let l of o){if(l.zIndex!==s.zIndex||l.type!==s.type)break;(a.length===0||a[a.length-1]!==l.className)&&a.push(l.className)}n.push(s.accept(a.join(" ")))}else s.widget.renderInfo={lineNumber:s.lineNumber,laneIndex:s.laneIndex}}this._decorationGlyphsToRender=n}render(e){if(!this._glyphMargin){for(let n of Object.values(this._widgets))n.domNode.setDisplay("none");for(;this._managedDomNodes.length>0;)this._managedDomNodes.pop()?.domNode.remove();return}let t=Math.round(this._glyphMarginWidth/this._glyphMarginDecorationLaneCount);for(let n of Object.values(this._widgets))if(!n.renderInfo)n.domNode.setDisplay("none");else{let i=e.viewportData.relativeVerticalOffset[n.renderInfo.lineNumber-e.viewportData.startLineNumber],o=this._glyphMarginLeft+n.renderInfo.laneIndex*this._lineHeight;n.domNode.setDisplay("block"),n.domNode.setTop(i),n.domNode.setLeft(o),n.domNode.setWidth(t),n.domNode.setHeight(this._lineHeight)}for(let n=0;n<this._decorationGlyphsToRender.length;n++){let i=this._decorationGlyphsToRender[n],o=e.viewportData.relativeVerticalOffset[i.lineNumber-e.viewportData.startLineNumber],s=this._glyphMarginLeft+i.laneIndex*this._lineHeight,a;n<this._managedDomNodes.length?a=this._managedDomNodes[n]:(a=Ye(document.createElement("div")),this._managedDomNodes.push(a),this.domNode.appendChild(a)),a.setClassName("cgmr codicon "+i.combinedClassName),a.setPosition("absolute"),a.setTop(o),a.setLeft(s),a.setWidth(t),a.setHeight(this._lineHeight)}for(;this._managedDomNodes.length>this._decorationGlyphsToRender.length;)this._managedDomNodes.pop()?.domNode.remove()}};var JB=class{constructor(e,t,n,i){this.lineNumber=e;this.laneIndex=t;this.zIndex=n;this.className=i}type=0;accept(e){return new tW(this.lineNumber,this.laneIndex,e)}},eW=class{constructor(e,t,n,i){this.lineNumber=e;this.laneIndex=t;this.zIndex=n;this.widget=i}type=1},tW=class{constructor(e,t,n){this.lineNumber=e;this.laneIndex=t;this.combinedClassName=n}};var xk=class extends Lr{_context;_primaryPosition;_spaceWidth;_renderResult;_maxIndentLeft;_bracketPairGuideOptions;constructor(e){super(),this._context=e,this._primaryPosition=null;let t=this._context.configuration.options,n=t.get(148),i=t.get(51);this._spaceWidth=i.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options,n=t.get(148),i=t.get(51);return this._spaceWidth=i.spaceWidth,this._maxIndentLeft=n.wrappingColumn===-1?-1:n.wrappingColumn*i.typicalHalfwidthCharacterWidth,this._bracketPairGuideOptions=t.get(16),!0}onCursorStateChanged(e){let n=e.selections[0].getPosition();return this._primaryPosition?.equals(n)?!1:(this._primaryPosition=n,!0)}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onLanguageConfigurationChanged(e){return!0}prepareRender(e){if(!this._bracketPairGuideOptions.indentation&&this._bracketPairGuideOptions.bracketPairs===!1){this._renderResult=null;return}let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=e.scrollWidth,o=this._primaryPosition,s=this.getGuidesByLine(t,Math.min(n+1,this._context.viewModel.getLineCount()),o),a=[];for(let l=t;l<=n;l++){let d=l-t,c=s[d],p="",h=e.visibleRangeForPosition(new F(l,1))?.left??0;for(let g of c){let f=g.column===-1?h+(g.visibleColumn-1)*this._spaceWidth:e.visibleRangeForPosition(new F(l,g.column)).left;if(f>i||this._maxIndentLeft>0&&f>this._maxIndentLeft)break;let m=g.horizontalLine?g.horizontalLine.top?"horizontal-top":"horizontal-bottom":"vertical",b=g.horizontalLine?(e.visibleRangeForPosition(new F(l,g.horizontalLine.endColumn))?.left??f+this._spaceWidth)-f:this._spaceWidth;p+=`<div class="core-guide ${g.className} ${m}" style="left:${f}px;width:${b}px"></div>`}a[d]=p}this._renderResult=a}getGuidesByLine(e,t,n){let i=this._bracketPairGuideOptions.bracketPairs!==!1?this._context.viewModel.getBracketGuidesInRangeByLine(e,t,n,{highlightActive:this._bracketPairGuideOptions.highlightActiveBracketPair,horizontalGuides:this._bracketPairGuideOptions.bracketPairsHorizontal===!0?2:this._bracketPairGuideOptions.bracketPairsHorizontal==="active"?1:0,includeInactive:this._bracketPairGuideOptions.bracketPairs===!0}):null,o=this._bracketPairGuideOptions.indentation?this._context.viewModel.getLinesIndentGuides(e,t):null,s=0,a=0,l=0;if(this._bracketPairGuideOptions.highlightActiveIndentation!==!1&&n){let p=this._context.viewModel.getActiveIndentGuide(n.lineNumber,e,t);s=p.startLineNumber,a=p.endLineNumber,l=p.indent}let{indentSize:d}=this._context.viewModel.model.getOptions(),c=[];for(let p=e;p<=t;p++){let h=new Array;c.push(h);let g=i?i[p-e]:[],f=new Rr(g),m=o?o[p-e]:0;for(let b=1;b<=m;b++){let v=(b-1)*d+1,S=(this._bracketPairGuideOptions.highlightActiveIndentation==="always"||g.length===0)&&s<=p&&p<=a&&b===l;h.push(...f.takeWhile(E=>E.visibleColumn<v)||[]);let x=f.peek();(!x||x.visibleColumn!==v||x.horizontalLine)&&h.push(new ra(v,-1,`core-guide-indent lvl-${(b-1)%30}`+(S?" indent-active":""),null,-1,-1))}h.push(...f.takeWhile(b=>!0)||[])}return c}render(e,t){if(!this._renderResult)return"";let n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}};function tv(r){if(!(r&&r.isTransparent()))return r}to((r,e)=>{let t=[{bracketColor:v_,guideColor:t7,guideColorActive:a7},{bracketColor:y_,guideColor:n7,guideColorActive:l7},{bracketColor:I_,guideColor:i7,guideColorActive:d7},{bracketColor:S_,guideColor:o7,guideColorActive:c7},{bracketColor:C_,guideColor:r7,guideColorActive:u7},{bracketColor:x_,guideColor:s7,guideColorActive:p7}],n=new nS,i=[{indentColor:BK,indentColorActive:KK},{indentColor:WK,indentColorActive:GK},{indentColor:VK,indentColorActive:jK},{indentColor:HK,indentColorActive:$K},{indentColor:UK,indentColorActive:qK},{indentColor:zK,indentColorActive:YK}],o=t.map(a=>{let l=r.getColor(a.bracketColor),d=r.getColor(a.guideColor),c=r.getColor(a.guideColorActive),p=tv(tv(d)??l?.transparent(.3)),h=tv(tv(c)??l);if(!(!p||!h))return{guideColor:p,guideColorActive:h}}).filter(Pi),s=i.map(a=>{let l=r.getColor(a.indentColor),d=r.getColor(a.indentColorActive),c=tv(l),p=tv(d);if(!(!c||!p))return{indentColor:c,indentColorActive:p}}).filter(Pi);if(o.length>0){for(let a=0;a<30;a++){let l=o[a%o.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(a).replace(/ /g,".")} { --guide-color: ${l.guideColor}; --guide-color-active: ${l.guideColorActive}; }`)}e.addRule(".monaco-editor .vertical { box-shadow: 1px 0 0 0 var(--guide-color) inset; }"),e.addRule(".monaco-editor .horizontal-top { border-top: 1px solid var(--guide-color); }"),e.addRule(".monaco-editor .horizontal-bottom { border-bottom: 1px solid var(--guide-color); }"),e.addRule(`.monaco-editor .vertical.${n.activeClassName} { box-shadow: 1px 0 0 0 var(--guide-color-active) inset; }`),e.addRule(`.monaco-editor .horizontal-top.${n.activeClassName} { border-top: 1px solid var(--guide-color-active); }`),e.addRule(`.monaco-editor .horizontal-bottom.${n.activeClassName} { border-bottom: 1px solid var(--guide-color-active); }`)}if(s.length>0){for(let a=0;a<30;a++){let l=s[a%s.length];e.addRule(`.monaco-editor .lines-content .core-guide-indent.lvl-${a} { --indent-color: ${l.indentColor}; --indent-color-active: ${l.indentColorActive}; }`)}e.addRule(".monaco-editor .lines-content .core-guide-indent { box-shadow: 1px 0 0 0 var(--indent-color) inset; }"),e.addRule(".monaco-editor .lines-content .core-guide-indent.indent-active { box-shadow: 1px 0 0 0 var(--indent-color-active) inset; }")}});var nv=class r extends Lr{static CLASS_NAME="line-numbers";_context;_lineHeight;_renderLineNumbers;_renderCustomLineNumbers;_renderFinalNewline;_lineNumbersLeft;_lineNumbersWidth;_lastCursorModelPosition;_renderResult;_activeLineNumber;constructor(e){super(),this._context=e,this._readConfig(),this._lastCursorModelPosition=new F(1,1),this._renderResult=null,this._activeLineNumber=1,this._context.addEventHandler(this)}_readConfig(){let e=this._context.configuration.options;this._lineHeight=e.get(68);let t=e.get(69);this._renderLineNumbers=t.renderType,this._renderCustomLineNumbers=t.renderFn,this._renderFinalNewline=e.get(97);let n=e.get(147);this._lineNumbersLeft=n.lineNumbersLeft,this._lineNumbersWidth=n.lineNumbersWidth}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return this._readConfig(),!0}onCursorStateChanged(e){let t=e.selections[0].getPosition();this._lastCursorModelPosition=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(t);let n=!1;return this._activeLineNumber!==t.lineNumber&&(this._activeLineNumber=t.lineNumber,n=!0),(this._renderLineNumbers===2||this._renderLineNumbers===3)&&(n=!0),n}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}onDecorationsChanged(e){return e.affectsLineNumber}_getLineRenderLineNumber(e){let t=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new F(e,1));if(t.column!==1)return"";let n=t.lineNumber;if(this._renderCustomLineNumbers)return this._renderCustomLineNumbers(n);if(this._renderLineNumbers===2){let i=Math.abs(this._lastCursorModelPosition.lineNumber-n);return i===0?'<span class="relative-current-line-number">'+n+"</span>":String(i)}if(this._renderLineNumbers===3){if(this._lastCursorModelPosition.lineNumber===n||n%10===0)return String(n);let i=this._context.viewModel.getLineCount();return n===i?String(n):""}return String(n)}prepareRender(e){if(this._renderLineNumbers===0){this._renderResult=null;return}let t=Xt?this._lineHeight%2===0?" lh-even":" lh-odd":"",n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber,o=this._context.viewModel.getDecorationsInViewport(e.visibleRange).filter(d=>!!d.options.lineNumberClassName);o.sort((d,c)=>D.compareRangesUsingEnds(d.range,c.range));let s=0,a=this._context.viewModel.getLineCount(),l=[];for(let d=n;d<=i;d++){let c=d-n,p=this._getLineRenderLineNumber(d),h="";for(;s<o.length&&o[s].range.endLineNumber<d;)s++;for(let g=s;g<o.length;g++){let{range:f,options:m}=o[g];f.startLineNumber<=d&&(h+=" "+m.lineNumberClassName)}if(!p&&!h){l[c]="";continue}d===a&&this._context.viewModel.getLineLength(d)===0&&(this._renderFinalNewline==="off"&&(p=""),this._renderFinalNewline==="dimmed"&&(h+=" dimmed-line-number")),d===this._activeLineNumber&&(h+=" active-line-number"),l[c]=`<div class="${r.CLASS_NAME}${t}${h}" style="left:${this._lineNumbersLeft}px;width:${this._lineNumbersWidth}px;">${p}</div>`}this._renderResult=l}render(e,t){if(!this._renderResult)return"";let n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}};to((r,e)=>{let t=r.getColor(FK),n=r.getColor(XK);n?e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${n}; }`):t&&e.addRule(`.monaco-editor .line-numbers.dimmed-line-number { color: ${t.transparent(.4)}; }`)});var nW=class{_currentVisibleRange;constructor(){this._currentVisibleRange=new D(1,1,1,1)}getCurrentVisibleRange(){return this._currentVisibleRange}setCurrentVisibleRange(e){this._currentVisibleRange=e}},iW=class{constructor(e,t,n,i,o,s,a){this.minimalReveal=e;this.lineNumber=t;this.startColumn=n;this.endColumn=i;this.startScrollTop=o;this.stopScrollTop=s;this.scrollType=a;this.minLineNumber=t,this.maxLineNumber=t}type="range";minLineNumber;maxLineNumber},oW=class{constructor(e,t,n,i,o){this.minimalReveal=e;this.selections=t;this.startScrollTop=n;this.stopScrollTop=i;this.scrollType=o;let s=t[0].startLineNumber,a=t[0].endLineNumber;for(let l=1,d=t.length;l<d;l++){let c=t[l];s=Math.min(s,c.startLineNumber),a=Math.max(a,c.endLineNumber)}this.minLineNumber=s,this.maxLineNumber=a}type="selections";minLineNumber;maxLineNumber},Ek=class r extends hn{static HORIZONTAL_EXTRA_PX=30;_linesContent;_textRangeRestingSpot;_visibleLines;domNode;_lineHeight;_typicalHalfwidthCharacterWidth;_isViewportWrapping;_revealHorizontalRightPadding;_cursorSurroundingLines;_cursorSurroundingLinesStyle;_canUseLayerHinting;_viewLineOptions;_maxLineWidth;_asyncUpdateLineWidths;_asyncCheckMonospaceFontAssumptions;_horizontalRevealRequest;_lastRenderedData;_stickyScrollEnabled;_maxNumberStickyLines;constructor(e,t){super(e);let n=this._context.configuration,i=this._context.configuration.options,o=i.get(51),s=i.get(148);this._lineHeight=i.get(68),this._typicalHalfwidthCharacterWidth=o.typicalHalfwidthCharacterWidth,this._isViewportWrapping=s.isViewportWrapping,this._revealHorizontalRightPadding=i.get(102),this._cursorSurroundingLines=i.get(29),this._cursorSurroundingLinesStyle=i.get(30),this._canUseLayerHinting=!i.get(32),this._viewLineOptions=new tC(n,this._context.theme.type),this._linesContent=t,this._textRangeRestingSpot=document.createElement("div"),this._visibleLines=new Ab({createLine:()=>new ml(this._viewLineOptions)}),this.domNode=this._visibleLines.domNode,zi.write(this.domNode,8),this.domNode.setClassName(`view-lines ${Uc}`),Un(this.domNode,o),this._maxLineWidth=0,this._asyncUpdateLineWidths=new Hn(()=>{this._updateLineWidthsSlow()},200),this._asyncCheckMonospaceFontAssumptions=new Hn(()=>{this._checkMonospaceFontAssumptions()},2e3),this._lastRenderedData=new nW,this._horizontalRevealRequest=null,this._stickyScrollEnabled=i.get(117).enabled,this._maxNumberStickyLines=i.get(117).maxLineCount}dispose(){this._asyncUpdateLineWidths.dispose(),this._asyncCheckMonospaceFontAssumptions.dispose(),super.dispose()}getDomNode(){return this.domNode}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e),e.hasChanged(148)&&(this._maxLineWidth=0);let t=this._context.configuration.options,n=t.get(51),i=t.get(148);return this._lineHeight=t.get(68),this._typicalHalfwidthCharacterWidth=n.typicalHalfwidthCharacterWidth,this._isViewportWrapping=i.isViewportWrapping,this._revealHorizontalRightPadding=t.get(102),this._cursorSurroundingLines=t.get(29),this._cursorSurroundingLinesStyle=t.get(30),this._canUseLayerHinting=!t.get(32),this._stickyScrollEnabled=t.get(117).enabled,this._maxNumberStickyLines=t.get(117).maxLineCount,Un(this.domNode,n),this._onOptionsMaybeChanged(),e.hasChanged(147)&&(this._maxLineWidth=0),!0}_onOptionsMaybeChanged(){let e=this._context.configuration,t=new tC(e,this._context.theme.type);if(!this._viewLineOptions.equals(t)){this._viewLineOptions=t;let n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let o=n;o<=i;o++)this._visibleLines.getVisibleLine(o).onOptionsChanged(this._viewLineOptions);return!0}return!1}onCursorStateChanged(e){let t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber(),i=!1;for(let o=t;o<=n;o++)i=this._visibleLines.getVisibleLine(o).onSelectionChanged()||i;return i}onDecorationsChanged(e){{let t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++)this._visibleLines.getVisibleLine(i).onDecorationsChanged()}return!0}onFlushed(e){let t=this._visibleLines.onFlushed(e);return this._maxLineWidth=0,t}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onRevealRangeRequest(e){let t=this._computeScrollTopToRevealRange(this._context.viewLayout.getFutureViewport(),e.source,e.minimalReveal,e.range,e.selections,e.verticalType);if(t===-1)return!1;let n=this._context.viewLayout.validateScrollPosition({scrollTop:t});e.revealHorizontal?e.range&&e.range.startLineNumber!==e.range.endLineNumber?n={scrollTop:n.scrollTop,scrollLeft:0}:e.range?this._horizontalRevealRequest=new iW(e.minimalReveal,e.range.startLineNumber,e.range.startColumn,e.range.endColumn,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType):e.selections&&e.selections.length>0&&(this._horizontalRevealRequest=new oW(e.minimalReveal,e.selections,this._context.viewLayout.getCurrentScrollTop(),n.scrollTop,e.scrollType)):this._horizontalRevealRequest=null;let o=Math.abs(this._context.viewLayout.getCurrentScrollTop()-n.scrollTop)<=this._lineHeight?1:e.scrollType;return this._context.viewModel.viewLayout.setScrollPosition(n,o),!0}onScrollChanged(e){if(this._horizontalRevealRequest&&e.scrollLeftChanged&&(this._horizontalRevealRequest=null),this._horizontalRevealRequest&&e.scrollTopChanged){let t=Math.min(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop),n=Math.max(this._horizontalRevealRequest.startScrollTop,this._horizontalRevealRequest.stopScrollTop);(e.scrollTop<t||e.scrollTop>n)&&(this._horizontalRevealRequest=null)}return this.domNode.setWidth(e.scrollWidth),this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth),this._visibleLines.onZonesChanged(e)}onThemeChanged(e){return this._onOptionsMaybeChanged()}getPositionFromDOMInfo(e,t){let n=this._getViewLineDomNode(e);if(n===null)return null;let i=this._getLineNumberFor(n);if(i===-1||i<1||i>this._context.viewModel.getLineCount())return null;if(this._context.viewModel.getLineMaxColumn(i)===1)return new F(i,1);let o=this._visibleLines.getStartLineNumber(),s=this._visibleLines.getEndLineNumber();if(i<o||i>s)return null;let a=this._visibleLines.getVisibleLine(i).getColumnOfNodeOffset(e,t),l=this._context.viewModel.getLineMinColumn(i);return a<l&&(a=l),new F(i,a)}_getViewLineDomNode(e){for(;e&&e.nodeType===1;){if(e.className===ml.CLASS_NAME)return e;e=e.parentElement}return null}_getLineNumberFor(e){let t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();for(let i=t;i<=n;i++){let o=this._visibleLines.getVisibleLine(i);if(e===o.getDomNode())return i}return-1}getLineWidth(e){let t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber();if(e<t||e>n)return-1;let i=new Nb(this.domNode.domNode,this._textRangeRestingSpot),o=this._visibleLines.getVisibleLine(e).getWidth(i);return this._updateLineWidthsSlowIfDomDidLayout(i),o}linesVisibleRangesForRange(e,t){if(this.shouldRender())return null;let n=e.endLineNumber,i=D.intersectRanges(e,this._lastRenderedData.getCurrentVisibleRange());if(!i)return null;let o=[],s=0,a=new Nb(this.domNode.domNode,this._textRangeRestingSpot),l=0;t&&(l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new F(i.startLineNumber,1)).lineNumber);let d=this._visibleLines.getStartLineNumber(),c=this._visibleLines.getEndLineNumber();for(let p=i.startLineNumber;p<=i.endLineNumber;p++){if(p<d||p>c)continue;let h=p===i.startLineNumber?i.startColumn:1,g=p!==i.endLineNumber,f=g?this._context.viewModel.getLineMaxColumn(p):i.endColumn,m=this._visibleLines.getVisibleLine(p).getVisibleRangesForRange(p,h,f,a);if(m){if(t&&p<n){let b=l;l=this._context.viewModel.coordinatesConverter.convertViewPositionToModelPosition(new F(p+1,1)).lineNumber,b!==l&&(m.ranges[m.ranges.length-1].width+=this._typicalHalfwidthCharacterWidth)}o[s++]=new LL(m.outsideRenderedLine,p,Ob.from(m.ranges),g)}}return this._updateLineWidthsSlowIfDomDidLayout(a),s===0?null:o}_visibleRangesForLineRange(e,t,n){if(this.shouldRender()||e<this._visibleLines.getStartLineNumber()||e>this._visibleLines.getEndLineNumber())return null;let i=new Nb(this.domNode.domNode,this._textRangeRestingSpot),o=this._visibleLines.getVisibleLine(e).getVisibleRangesForRange(e,t,n,i);return this._updateLineWidthsSlowIfDomDidLayout(i),o}visibleRangeForPosition(e){let t=this._visibleRangesForLineRange(e.lineNumber,e.column,e.column);return t?new kL(t.outsideRenderedLine,t.ranges[0].left):null}updateLineWidths(){this._updateLineWidths(!1)}_updateLineWidthsFast(){return this._updateLineWidths(!0)}_updateLineWidthsSlow(){this._updateLineWidths(!1)}_updateLineWidthsSlowIfDomDidLayout(e){e.didDomLayout&&(this._asyncUpdateLineWidths.isScheduled()||(this._asyncUpdateLineWidths.cancel(),this._updateLineWidthsSlow()))}_updateLineWidths(e){let t=this._visibleLines.getStartLineNumber(),n=this._visibleLines.getEndLineNumber(),i=1,o=!0;for(let s=t;s<=n;s++){let a=this._visibleLines.getVisibleLine(s);if(e&&!a.getWidthIsFast()){o=!1;continue}i=Math.max(i,a.getWidth(null))}return o&&t===1&&n===this._context.viewModel.getLineCount()&&(this._maxLineWidth=0),this._ensureMaxLineWidth(i),o}_checkMonospaceFontAssumptions(){let e=-1,t=-1,n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let o=n;o<=i;o++){let s=this._visibleLines.getVisibleLine(o);if(s.needsMonospaceFontCheck()){let a=s.getWidth(null);a>t&&(t=a,e=o)}}if(e!==-1&&!this._visibleLines.getVisibleLine(e).monospaceAssumptionsAreValid())for(let o=n;o<=i;o++)this._visibleLines.getVisibleLine(o).onMonospaceAssumptionsInvalidated()}prepareRender(){throw new Error("Not supported")}render(){throw new Error("Not supported")}renderText(e){if(this._visibleLines.renderLines(e),this._lastRenderedData.setCurrentVisibleRange(e.visibleRange),this.domNode.setWidth(this._context.viewLayout.getScrollWidth()),this.domNode.setHeight(Math.min(this._context.viewLayout.getScrollHeight(),1e6)),this._horizontalRevealRequest){let n=this._horizontalRevealRequest;if(e.startLineNumber<=n.minLineNumber&&n.maxLineNumber<=e.endLineNumber){this._horizontalRevealRequest=null,this.onDidRender();let i=this._computeScrollLeftToReveal(n);i&&(this._isViewportWrapping||this._ensureMaxLineWidth(i.maxHorizontalOffset),this._context.viewModel.viewLayout.setScrollPosition({scrollLeft:i.scrollLeft},n.scrollType))}}if(this._updateLineWidthsFast()?this._asyncUpdateLineWidths.cancel():this._asyncUpdateLineWidths.schedule(),Xt&&!this._asyncCheckMonospaceFontAssumptions.isScheduled()){let n=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber();for(let o=n;o<=i;o++)if(this._visibleLines.getVisibleLine(o).needsMonospaceFontCheck()){this._asyncCheckMonospaceFontAssumptions.schedule();break}}this._linesContent.setLayerHinting(this._canUseLayerHinting),this._linesContent.setContain("strict");let t=this._context.viewLayout.getCurrentScrollTop()-e.bigNumbersDelta;this._linesContent.setTop(-t),this._linesContent.setLeft(-this._context.viewLayout.getCurrentScrollLeft())}_ensureMaxLineWidth(e){let t=Math.ceil(e);this._maxLineWidth<t&&(this._maxLineWidth=t,this._context.viewModel.viewLayout.setMaxLineWidth(this._maxLineWidth))}_computeScrollTopToRevealRange(e,t,n,i,o,s){let a=e.top,l=e.height,d=a+l,c,p,h;if(o&&o.length>0){let v=o[0].startLineNumber,S=o[0].endLineNumber;for(let x=1,E=o.length;x<E;x++){let w=o[x];v=Math.min(v,w.startLineNumber),S=Math.max(S,w.endLineNumber)}c=!1,p=this._context.viewLayout.getVerticalOffsetForLineNumber(v),h=this._context.viewLayout.getVerticalOffsetForLineNumber(S)+this._lineHeight}else if(i)c=!0,p=this._context.viewLayout.getVerticalOffsetForLineNumber(i.startLineNumber),h=this._context.viewLayout.getVerticalOffsetForLineNumber(i.endLineNumber)+this._lineHeight;else return-1;let g=(t==="mouse"||n)&&this._cursorSurroundingLinesStyle==="default",f=0,m=0;if(g)n||(f=this._lineHeight);else{let v=l/this._lineHeight,S=Math.max(this._cursorSurroundingLines,this._stickyScrollEnabled?this._maxNumberStickyLines:0),x=Math.min(v/2,S);f=x*this._lineHeight,m=Math.max(0,x-1)*this._lineHeight}n||(s===0||s===4)&&(m+=this._lineHeight),p-=f,h+=m;let b;if(h-p>l){if(!c)return-1;b=p}else if(s===5||s===6)if(s===6&&a<=p&&h<=d)b=a;else{let v=Math.max(5*this._lineHeight,l*.2),S=p-v,x=h-l;b=Math.max(x,S)}else if(s===1||s===2)if(s===2&&a<=p&&h<=d)b=a;else{let v=(p+h)/2;b=Math.max(0,v-l/2)}else b=this._computeMinimumScrolling(a,d,p,h,s===3,s===4);return b}_computeScrollLeftToReveal(e){let t=this._context.viewLayout.getCurrentViewport(),n=this._context.configuration.options.get(147),i=t.left,o=i+t.width-n.verticalScrollbarWidth,s=1073741824,a=0;if(e.type==="range"){let d=this._visibleRangesForLineRange(e.lineNumber,e.startColumn,e.endColumn);if(!d)return null;for(let c of d.ranges)s=Math.min(s,Math.round(c.left)),a=Math.max(a,Math.round(c.left+c.width))}else for(let d of e.selections){if(d.startLineNumber!==d.endLineNumber)return null;let c=this._visibleRangesForLineRange(d.startLineNumber,d.startColumn,d.endColumn);if(!c)return null;for(let p of c.ranges)s=Math.min(s,Math.round(p.left)),a=Math.max(a,Math.round(p.left+p.width))}return e.minimalReveal||(s=Math.max(0,s-r.HORIZONTAL_EXTRA_PX),a+=this._revealHorizontalRightPadding),e.type==="selections"&&a-s>t.width?null:{scrollLeft:this._computeMinimumScrolling(i,o,s,a),maxHorizontalOffset:a}}_computeMinimumScrolling(e,t,n,i,o,s){e=e|0,t=t|0,n=n|0,i=i|0,o=!!o,s=!!s;let a=t-e;if(i-n<a){if(o)return n;if(s)return Math.max(0,i-a);if(n<e)return n;if(i>t)return Math.max(0,i-a)}else return n;return e}};var Tk=class extends ev{_context;_decorationsLeft;_decorationsWidth;_renderResult;constructor(e){super(),this._context=e;let n=this._context.configuration.options.get(147);this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let n=this._context.configuration.options.get(147);return this._decorationsLeft=n.decorationsLeft,this._decorationsWidth=n.decorationsWidth,!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){let t=e.getDecorationsInViewport(),n=[],i=0;for(let o=0,s=t.length;o<s;o++){let a=t[o],l=a.options.linesDecorationsClassName,d=a.options.zIndex;l&&(n[i++]=new Fg(a.range.startLineNumber,a.range.endLineNumber,l,a.options.linesDecorationsTooltip??null,d));let c=a.options.firstLineDecorationClassName;c&&(n[i++]=new Fg(a.range.startLineNumber,a.range.startLineNumber,c,a.options.linesDecorationsTooltip??null,d))}return n}prepareRender(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),o=this._decorationsLeft.toString(),s=this._decorationsWidth.toString(),a='" style="left:'+o+"px;width:"+s+'px;"></div>',l=[];for(let d=t;d<=n;d++){let c=d-t,p=i[c].getDecorations(),h="";for(let g of p){let f='<div class="cldr '+g.className;g.tooltip!==null&&(f+='" title="'+g.tooltip),f+=a,h+=f}l[c]=h}this._renderResult=l}render(e,t){return this._renderResult?this._renderResult[t-e]:""}};var iv=class r extends hn{static CLASS_NAME="glyph-margin";static OUTER_CLASS_NAME="margin";_domNode;_canUseLayerHinting;_contentLeft;_glyphMarginLeft;_glyphMarginWidth;_glyphMarginBackgroundDomNode;constructor(e){super(e);let t=this._context.configuration.options,n=t.get(147);this._canUseLayerHinting=!t.get(32),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,this._domNode=Ye(document.createElement("div")),this._domNode.setClassName(r.OUTER_CLASS_NAME),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._glyphMarginBackgroundDomNode=Ye(document.createElement("div")),this._glyphMarginBackgroundDomNode.setClassName(r.CLASS_NAME),this._domNode.appendChild(this._glyphMarginBackgroundDomNode)}dispose(){super.dispose()}getDomNode(){return this._domNode}onConfigurationChanged(e){let t=this._context.configuration.options,n=t.get(147);return this._canUseLayerHinting=!t.get(32),this._contentLeft=n.contentLeft,this._glyphMarginLeft=n.glyphMarginLeft,this._glyphMarginWidth=n.glyphMarginWidth,!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollTopChanged}prepareRender(e){}render(e){this._domNode.setLayerHinting(this._canUseLayerHinting),this._domNode.setContain("strict");let t=e.scrollTop-e.bigNumbersDelta;this._domNode.setTop(-t);let n=Math.min(e.scrollHeight,1e6);this._domNode.setHeight(n),this._domNode.setWidth(this._contentLeft),this._glyphMarginBackgroundDomNode.setLeft(this._glyphMarginLeft),this._glyphMarginBackgroundDomNode.setWidth(this._glyphMarginWidth),this._glyphMarginBackgroundDomNode.setHeight(n)}};var wk=class extends ev{_context;_renderResult;constructor(e){super(),this._context=e,this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){return!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_getDecorations(e){let t=e.getDecorationsInViewport(),n=[],i=0;for(let o=0,s=t.length;o<s;o++){let a=t[o],l=a.options.marginClassName,d=a.options.zIndex;l&&(n[i++]=new Fg(a.range.startLineNumber,a.range.endLineNumber,l,null,d))}return n}prepareRender(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber,i=this._render(t,n,this._getDecorations(e)),o=[];for(let s=t;s<=n;s++){let a=s-t,l=i[a].getDecorations(),d="";for(let c of l)d+='<div class="cmdr '+c.className+'" style=""></div>';o[a]=d}this._renderResult=o}render(e,t){return this._renderResult?this._renderResult[t-e]:""}};var bl=class r{_rgba8Brand=void 0;static Empty=new r(0,0,0,0);r;g;b;a;constructor(e,t,n,i){this.r=r._clamp(e),this.g=r._clamp(t),this.b=r._clamp(n),this.a=r._clamp(i)}equals(e){return this.r===e.r&&this.g===e.g&&this.b===e.b&&this.a===e.a}static _clamp(e){return e<0?0:e>255?255:e|0}};var Y9=(()=>{let r=[];for(let e=32;e<=126;e++)r.push(e);return r.push(65533),r})(),X9=(r,e)=>(r-=32,r<0||r>96?e<=2?(r+96)%96:95:r);var uC=class r{constructor(e,t){this.scale=t;this.charDataNormal=r.soften(e,12/15),this.charDataLight=r.soften(e,50/60)}_minimapCharRendererBrand=void 0;charDataNormal;charDataLight;static soften(e,t){let n=new Uint8ClampedArray(e.length);for(let i=0,o=e.length;i<o;i++)n[i]=eh(e[i]*t);return n}renderChar(e,t,n,i,o,s,a,l,d,c,p){let h=1*this.scale,g=2*this.scale,f=p?1:g;if(t+h>e.width||n+f>e.height){console.warn("bad render request outside image data");return}let m=c?this.charDataLight:this.charDataNormal,b=X9(i,d),v=e.width*4,S=a.r,x=a.g,E=a.b,w=o.r-S,P=o.g-x,R=o.b-E,O=Math.max(s,l),M=e.data,K=b*h*g,$=n*v+t*4;for(let Q=0;Q<f;Q++){let he=$;for(let De=0;De<h;De++){let ce=m[K++]/255*(s/255);M[he++]=S+w*ce,M[he++]=x+P*ce,M[he++]=E+R*ce,M[he++]=O}$+=v}}blockRenderChar(e,t,n,i,o,s,a,l){let d=1*this.scale,c=2*this.scale,p=l?1:c;if(t+d>e.width||n+p>e.height){console.warn("bad render request outside image data");return}let h=e.width*4,g=.5*(o/255),f=s.r,m=s.g,b=s.b,v=i.r-f,S=i.g-m,x=i.b-b,E=f+v*g,w=m+S*g,P=b+x*g,R=Math.max(o,a),O=e.data,M=n*h+t*4;for(let K=0;K<p;K++){let $=M;for(let Q=0;Q<d;Q++)O[$++]=E,O[$++]=w,O[$++]=P,O[$++]=R;M+=h}}};var ov=class r extends N{static _INSTANCE=null;static getInstance(){return this._INSTANCE||(this._INSTANCE=uu(new r)),this._INSTANCE}_colors;_backgroundIsLight;_onDidChange=new T;onDidChange=this._onDidChange.event;constructor(){super(),this._updateColorMap(),this._register(Xo.onDidChange(e=>{e.changedColorMap&&this._updateColorMap()}))}_updateColorMap(){let e=Xo.getColorMap();if(!e){this._colors=[bl.Empty],this._backgroundIsLight=!0;return}this._colors=[bl.Empty];for(let n=1;n<e.length;n++){let i=e[n].rgba;this._colors[n]=new bl(i.r,i.g,i.b,Math.round(i.a*255))}let t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}};var Z9={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15},J9=r=>{let e=new Uint8ClampedArray(r.length/2);for(let t=0;t<r.length;t+=2)e[t>>1]=Z9[r[t]]<<4|Z9[r[t+1]]&15;return e},rW={1:_a(()=>J9("0000511D6300CF609C709645A78432005642574171487021003C451900274D35D762755E8B629C5BA856AF57BA649530C167D1512A272A3F6038604460398526BCA2A968DB6F8957C768BE5FBE2FB467CF5D8D5B795DC7625B5DFF50DE64C466DB2FC47CD860A65E9A2EB96CB54CE06DA763AB2EA26860524D3763536601005116008177A8705E53AB738E6A982F88BAA35B5F5B626D9C636B449B737E5B7B678598869A662F6B5B8542706C704C80736A607578685B70594A49715A4522E792")),2:_a(()=>J9("000000000000000055394F383D2800008B8B1F210002000081B1CBCBCC820000847AAF6B9AAF2119BE08B8881AD60000A44FD07DCCF107015338130C00000000385972265F390B406E2437634B4B48031B12B8A0847000001E15B29A402F0000000000004B33460B00007A752C2A0000000000004D3900000084394B82013400ABA5CFC7AD9C0302A45A3E5A98AB000089A43382D97900008BA54AA087A70A0248A6A7AE6DBE0000BF6F94987EA40A01A06DCFA7A7A9030496C32F77891D0000A99FB1A0AFA80603B29AB9CA75930D010C0948354D3900000C0948354F37460D0028BE673D8400000000AF9D7B6E00002B007AA8933400007AA642675C2700007984CFB9C3985B768772A8A6B7B20000CAAECAAFC4B700009F94A6009F840009D09F9BA4CA9C0000CC8FC76DC87F0000C991C472A2000000A894A48CA7B501079BA2C9C69BA20000B19A5D3FA89000005CA6009DA2960901B0A7F0669FB200009D009E00B7890000DAD0F5D092820000D294D4C48BD10000B5A7A4A3B1A50402CAB6CBA6A2000000B5A7A4A3B1A8044FCDADD19D9CB00000B7778F7B8AAE0803C9AB5D3F5D3F00009EA09EA0BAB006039EA0989A8C7900009B9EF4D6B7C00000A9A7816CACA80000ABAC84705D3F000096DA635CDC8C00006F486F266F263D4784006124097B00374F6D2D6D2D6D4A3A95872322000000030000000000008D8939130000000000002E22A5C9CBC70600AB25C0B5C9B400061A2DB04CA67001082AA6BEBEBFC606002321DACBC19E03087AA08B6768380000282FBAC0B8CA7A88AD25BBA5A29900004C396C5894A6000040485A6E356E9442A32CD17EADA70000B4237923628600003E2DE9C1D7B500002F25BBA5A2990000231DB6AFB4A804023025C0B5CAB588062B2CBDBEC0C706882435A75CA20000002326BD6A82A908048B4B9A5A668000002423A09CB4BB060025259C9D8A7900001C1FCAB2C7C700002A2A9387ABA200002626A4A47D6E9D14333163A0C87500004B6F9C2D643A257049364936493647358A34438355497F1A0000A24C1D590000D38DFFBDD4CD3126"))};var _k=class r{static lastCreated;static lastFontFamily;static create(e,t){if(this.lastCreated&&e===this.lastCreated.scale&&t===this.lastFontFamily)return this.lastCreated;let n;return rW[e]?n=new uC(rW[e](),e):n=r.createFromSampleData(r.createSampleData(t).data,e),this.lastFontFamily=t,this.lastCreated=n,n}static createSampleData(e){let t=document.createElement("canvas"),n=t.getContext("2d");t.style.height="16px",t.height=16,t.width=96*10,t.style.width=96*10+"px",n.fillStyle="#ffffff",n.font=`bold 16px ${e}`,n.textBaseline="middle";let i=0;for(let o of Y9)n.fillText(String.fromCharCode(o),i,16/2),i+=10;return n.getImageData(0,0,96*10,16)}static createFromSampleData(e,t){let n=16*10*4*96;if(e.length!==n)throw new Error("Unexpected source in MinimapCharRenderer");let i=r._downsample(e,t);return new uC(i,t)}static _downsampleChar(e,t,n,i,o){let s=1*o,a=2*o,l=i,d=0;for(let c=0;c<a;c++){let p=c/a*16,h=(c+1)/a*16;for(let g=0;g<s;g++){let f=g/s*10,m=(g+1)/s*10,b=0,v=0;for(let x=p;x<h;x++){let E=t+Math.floor(x)*3840,w=1-(x-Math.floor(x));for(let P=f;P<m;P++){let R=1-(P-Math.floor(P)),O=E+Math.floor(P)*4,M=R*w;v+=M,b+=e[O]*e[O+3]/255*M}}let S=b/v;d=Math.max(d,S),n[l++]=eh(S)}}return d}static _downsample(e,t){let n=2*t*1*t,i=n*96,o=new Uint8ClampedArray(i),s=0,a=0,l=0;for(let d=0;d<96;d++)l=Math.max(l,this._downsampleChar(e,a,o,s,t)),s+=n,a+=10*4;if(l>0){let d=255/l;for(let c=0;c<i;c++)o[c]*=d}return o}};var lJ=140,dJ=2,Dk=class r{renderMinimap;size;minimapHeightIsEditorHeight;scrollBeyondLastLine;paddingTop;paddingBottom;showSlider;autohide;pixelRatio;typicalHalfwidthCharacterWidth;lineHeight;minimapLeft;minimapWidth;minimapHeight;canvasInnerWidth;canvasInnerHeight;canvasOuterWidth;canvasOuterHeight;isSampling;editorHeight;fontScale;minimapLineHeight;minimapCharWidth;sectionHeaderFontFamily;sectionHeaderFontSize;sectionHeaderLetterSpacing;sectionHeaderFontColor;charRenderer;defaultBackgroundColor;backgroundColor;foregroundAlpha;constructor(e,t,n){let i=e.options,o=i.get(145),s=i.get(147),a=s.minimap,l=i.get(51),d=i.get(74);this.renderMinimap=a.renderMinimap,this.size=d.size,this.minimapHeightIsEditorHeight=a.minimapHeightIsEditorHeight,this.scrollBeyondLastLine=i.get(107),this.paddingTop=i.get(85).top,this.paddingBottom=i.get(85).bottom,this.showSlider=d.showSlider,this.autohide=d.autohide,this.pixelRatio=o,this.typicalHalfwidthCharacterWidth=l.typicalHalfwidthCharacterWidth,this.lineHeight=i.get(68),this.minimapLeft=a.minimapLeft,this.minimapWidth=a.minimapWidth,this.minimapHeight=s.height,this.canvasInnerWidth=a.minimapCanvasInnerWidth,this.canvasInnerHeight=a.minimapCanvasInnerHeight,this.canvasOuterWidth=a.minimapCanvasOuterWidth,this.canvasOuterHeight=a.minimapCanvasOuterHeight,this.isSampling=a.minimapIsSampling,this.editorHeight=s.height,this.fontScale=a.minimapScale,this.minimapLineHeight=a.minimapLineHeight,this.minimapCharWidth=1*this.fontScale,this.sectionHeaderFontFamily=SL,this.sectionHeaderFontSize=d.sectionHeaderFontSize*o,this.sectionHeaderLetterSpacing=d.sectionHeaderLetterSpacing,this.sectionHeaderFontColor=r._getSectionHeaderColor(t,n.getColor(1)),this.charRenderer=_a(()=>_k.create(this.fontScale,l.fontFamily)),this.defaultBackgroundColor=n.getColor(2),this.backgroundColor=r._getMinimapBackground(t,this.defaultBackgroundColor),this.foregroundAlpha=r._getMinimapForegroundOpacity(t)}static _getMinimapBackground(e,t){let n=e.getColor(E4);return n?new bl(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}static _getMinimapForegroundOpacity(e){let t=e.getColor(T4);return t?bl._clamp(Math.round(255*t.rgba.a)):255}static _getSectionHeaderColor(e,t){let n=e.getColor(Sr);return n?new bl(n.rgba.r,n.rgba.g,n.rgba.b,Math.round(255*n.rgba.a)):t}equals(e){return this.renderMinimap===e.renderMinimap&&this.size===e.size&&this.minimapHeightIsEditorHeight===e.minimapHeightIsEditorHeight&&this.scrollBeyondLastLine===e.scrollBeyondLastLine&&this.paddingTop===e.paddingTop&&this.paddingBottom===e.paddingBottom&&this.showSlider===e.showSlider&&this.autohide===e.autohide&&this.pixelRatio===e.pixelRatio&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.lineHeight===e.lineHeight&&this.minimapLeft===e.minimapLeft&&this.minimapWidth===e.minimapWidth&&this.minimapHeight===e.minimapHeight&&this.canvasInnerWidth===e.canvasInnerWidth&&this.canvasInnerHeight===e.canvasInnerHeight&&this.canvasOuterWidth===e.canvasOuterWidth&&this.canvasOuterHeight===e.canvasOuterHeight&&this.isSampling===e.isSampling&&this.editorHeight===e.editorHeight&&this.fontScale===e.fontScale&&this.minimapLineHeight===e.minimapLineHeight&&this.minimapCharWidth===e.minimapCharWidth&&this.sectionHeaderFontSize===e.sectionHeaderFontSize&&this.sectionHeaderLetterSpacing===e.sectionHeaderLetterSpacing&&this.defaultBackgroundColor&&this.defaultBackgroundColor.equals(e.defaultBackgroundColor)&&this.backgroundColor&&this.backgroundColor.equals(e.backgroundColor)&&this.foregroundAlpha===e.foregroundAlpha}},sW=class r{constructor(e,t,n,i,o,s,a,l,d){this.scrollTop=e;this.scrollHeight=t;this.sliderNeeded=n;this._computedSliderRatio=i;this.sliderTop=o;this.sliderHeight=s;this.topPaddingLineCount=a;this.startLineNumber=l;this.endLineNumber=d}getDesiredScrollTopFromDelta(e){return Math.round(this.scrollTop+e/this._computedSliderRatio)}getDesiredScrollTopFromTouchLocation(e){return Math.round((e-this.sliderHeight/2)/this._computedSliderRatio)}intersectWithViewport(e){let t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumber,e.endLineNumber);return t>n?null:[t,n]}getYForLineNumber(e,t){return+(e-this.startLineNumber+this.topPaddingLineCount)*t}static create(e,t,n,i,o,s,a,l,d,c,p){let h=e.pixelRatio,g=e.minimapLineHeight,f=Math.floor(e.canvasInnerHeight/g),m=e.lineHeight;if(e.minimapHeightIsEditorHeight){let P=l*e.lineHeight+e.paddingTop+e.paddingBottom;e.scrollBeyondLastLine&&(P+=Math.max(0,o-e.lineHeight-e.paddingBottom));let R=Math.max(1,Math.floor(o*o/P)),O=Math.max(0,e.minimapHeight-R),M=O/(c-o),K=d*M,$=O>0,Q=Math.floor(e.canvasInnerHeight/e.minimapLineHeight),he=Math.floor(e.paddingTop/e.lineHeight);return new r(d,c,$,M,K,R,he,1,Math.min(a,Q))}let b;if(s&&n!==a){let P=n-t+1;b=Math.floor(P*g/h)}else{let P=o/m;b=Math.floor(P*g/h)}let v=Math.floor(e.paddingTop/m),S=Math.floor(e.paddingBottom/m);if(e.scrollBeyondLastLine){let P=o/m;S=Math.max(S,P-1)}let x;if(S>0){let P=o/m;x=(v+a+S-P-1)*g/h}else x=Math.max(0,(v+a)*g/h-b);x=Math.min(e.minimapHeight-b,x);let E=x/(c-o),w=d*E;if(f>=v+a+S){let P=x>0;return new r(d,c,P,E,w,b,v,1,a)}else{let P;t>1?P=t+v:P=Math.max(1,d/m);let R,O=Math.max(1,Math.floor(P-w*h/g));O<v?(R=v-O+1,O=1):(R=0,O=Math.max(1,O-v)),p&&p.scrollHeight===c&&(p.scrollTop>d&&(O=Math.min(O,p.startLineNumber),R=Math.max(R,p.topPaddingLineCount)),p.scrollTop<d&&(O=Math.max(O,p.startLineNumber),R=Math.min(R,p.topPaddingLineCount)));let M=Math.min(a,O-R+f-1),K=(d-i)/m,$;return d>=e.paddingTop?$=(t-O+R+K)*g/h:$=d/e.paddingTop*(R+K)*g/h,new r(d,c,!0,E,$,b,R,O,M)}}},Lk=class r{static INVALID=new r(-1);dy;constructor(e){this.dy=e}onContentChanged(){this.dy=-1}onTokensChanged(){this.dy=-1}},kk=class{renderedLayout;_imageData;_renderedLines;constructor(e,t,n){this.renderedLayout=e,this._imageData=t,this._renderedLines=new QS({createLine:()=>Lk.INVALID}),this._renderedLines._set(e.startLineNumber,n)}linesEquals(e){if(!this.scrollEquals(e))return!1;let n=this._renderedLines._get().lines;for(let i=0,o=n.length;i<o;i++)if(n[i].dy===-1)return!1;return!0}scrollEquals(e){return this.renderedLayout.startLineNumber===e.startLineNumber&&this.renderedLayout.endLineNumber===e.endLineNumber}_get(){let e=this._renderedLines._get();return{imageData:this._imageData,rendLineNumberStart:e.rendLineNumberStart,lines:e.lines}}onLinesChanged(e,t){return this._renderedLines.onLinesChanged(e,t)}onLinesDeleted(e,t){this._renderedLines.onLinesDeleted(e,t)}onLinesInserted(e,t){this._renderedLines.onLinesInserted(e,t)}onTokensChanged(e){return this._renderedLines.onTokensChanged(e)}},aW=class r{_backgroundFillData;_buffers;_lastUsedBuffer;constructor(e,t,n,i){this._backgroundFillData=r._createBackgroundFillData(t,n,i),this._buffers=[e.createImageData(t,n),e.createImageData(t,n)],this._lastUsedBuffer=0}getBuffer(){this._lastUsedBuffer=1-this._lastUsedBuffer;let e=this._buffers[this._lastUsedBuffer];return e.data.set(this._backgroundFillData),e}static _createBackgroundFillData(e,t,n){let i=n.r,o=n.g,s=n.b,a=n.a,l=new Uint8ClampedArray(e*t*4),d=0;for(let c=0;c<t;c++)for(let p=0;p<e;p++)l[d]=i,l[d+1]=o,l[d+2]=s,l[d+3]=a,d+=4;return l}},Rk=class r{constructor(e,t){this.samplingRatio=e;this.minimapLines=t}static compute(e,t,n){if(e.renderMinimap===0||!e.isSampling)return[null,[]];let{minimapLineCount:i}=Jy.computeContainedMinimapLineCount({viewLineCount:t,scrollBeyondLastLine:e.scrollBeyondLastLine,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:e.editorHeight,lineHeight:e.lineHeight,pixelRatio:e.pixelRatio}),o=t/i,s=o/2;if(!n||n.minimapLines.length===0){let b=[];if(b[0]=1,i>1){for(let v=0,S=i-1;v<S;v++)b[v]=Math.round(v*o+s);b[i-1]=t}return[new r(o,b),[]]}let a=n.minimapLines,l=a.length,d=[],c=0,p=0,h=1,g=10,f=[],m=null;for(let b=0;b<i;b++){let v=Math.max(h,Math.round(b*o)),S=Math.max(v,Math.round((b+1)*o));for(;c<l&&a[c]<v;){if(f.length<g){let E=c+1+p;m&&m.type==="deleted"&&m._oldIndex===c-1?m.deleteToLineNumber++:(m={type:"deleted",_oldIndex:c,deleteFromLineNumber:E,deleteToLineNumber:E},f.push(m)),p--}c++}let x;if(c<l&&a[c]<=S)x=a[c],c++;else if(b===0?x=1:b+1===i?x=t:x=Math.round(b*o+s),f.length<g){let E=c+1+p;m&&m.type==="inserted"&&m._i===b-1?m.insertToLineNumber++:(m={type:"inserted",_i:b,insertFromLineNumber:E,insertToLineNumber:E},f.push(m)),p++}d[b]=x,h=x}if(f.length<g)for(;c<l;){let b=c+1+p;m&&m.type==="deleted"&&m._oldIndex===c-1?m.deleteToLineNumber++:(m={type:"deleted",_oldIndex:c,deleteFromLineNumber:b,deleteToLineNumber:b},f.push(m)),p--,c++}else f=[{type:"flush"}];return[new r(o,d),f]}modelLineToMinimapLine(e){return Math.min(this.minimapLines.length,Math.max(1,Math.round(e/this.samplingRatio)))}modelLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e)-1;for(;n>0&&this.minimapLines[n-1]>=e;)n--;let i=this.modelLineToMinimapLine(t)-1;for(;i+1<this.minimapLines.length&&this.minimapLines[i+1]<=t;)i++;if(n===i){let o=this.minimapLines[n];if(o<e||o>t)return null}return[n+1,i+1]}decorationLineRangeToMinimapLineRange(e,t){let n=this.modelLineToMinimapLine(e),i=this.modelLineToMinimapLine(t);return e!==t&&i===n&&(i===this.minimapLines.length?n>1&&n--:i++),[n,i]}onLinesDeleted(e){let t=e.toLineNumber-e.fromLineNumber+1,n=this.minimapLines.length,i=0;for(let o=this.minimapLines.length-1;o>=0&&!(this.minimapLines[o]<e.fromLineNumber);o--)this.minimapLines[o]<=e.toLineNumber?(this.minimapLines[o]=Math.max(1,e.fromLineNumber-1),n=Math.min(n,o),i=Math.max(i,o)):this.minimapLines[o]-=t;return[n,i]}onLinesInserted(e){let t=e.toLineNumber-e.fromLineNumber+1;for(let n=this.minimapLines.length-1;n>=0&&!(this.minimapLines[n]<e.fromLineNumber);n--)this.minimapLines[n]+=t}},Mk=class extends hn{tokensColorTracker;_selections;_minimapSelections;options;_samplingState;_shouldCheckSampling;_sectionHeaderCache=new Po(10,1.5);_actual;constructor(e){super(e),this.tokensColorTracker=ov.getInstance(),this._selections=[],this._minimapSelections=null,this.options=new Dk(this._context.configuration,this._context.theme,this.tokensColorTracker);let[t]=Rk.compute(this.options,this._context.viewModel.getLineCount(),null);this._samplingState=t,this._shouldCheckSampling=!1,this._actual=new lW(e.theme,this)}dispose(){this._actual.dispose(),super.dispose()}getDomNode(){return this._actual.getDomNode()}_onOptionsMaybeChanged(){let e=new Dk(this._context.configuration,this._context.theme,this.tokensColorTracker);return this.options.equals(e)?!1:(this.options=e,this._recreateLineSampling(),this._actual.onDidChangeOptions(),!0)}onConfigurationChanged(e){return this._onOptionsMaybeChanged()}onCursorStateChanged(e){return this._selections=e.selections,this._minimapSelections=null,this._actual.onSelectionChanged()}onDecorationsChanged(e){return e.affectsMinimap?this._actual.onDecorationsChanged():!1}onFlushed(e){return this._samplingState&&(this._shouldCheckSampling=!0),this._actual.onFlushed()}onLinesChanged(e){if(this._samplingState){let t=this._samplingState.modelLineRangeToMinimapLineRange(e.fromLineNumber,e.fromLineNumber+e.count-1);return t?this._actual.onLinesChanged(t[0],t[1]-t[0]+1):!1}else return this._actual.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){if(this._samplingState){let[t,n]=this._samplingState.onLinesDeleted(e);return t<=n&&this._actual.onLinesChanged(t+1,n-t+1),this._shouldCheckSampling=!0,!0}else return this._actual.onLinesDeleted(e.fromLineNumber,e.toLineNumber)}onLinesInserted(e){return this._samplingState?(this._samplingState.onLinesInserted(e),this._shouldCheckSampling=!0,!0):this._actual.onLinesInserted(e.fromLineNumber,e.toLineNumber)}onScrollChanged(e){return this._actual.onScrollChanged()}onThemeChanged(e){return this._actual.onThemeChanged(),this._onOptionsMaybeChanged(),!0}onTokensChanged(e){if(this._samplingState){let t=[];for(let n of e.ranges){let i=this._samplingState.modelLineRangeToMinimapLineRange(n.fromLineNumber,n.toLineNumber);i&&t.push({fromLineNumber:i[0],toLineNumber:i[1]})}return t.length?this._actual.onTokensChanged(t):!1}else return this._actual.onTokensChanged(e.ranges)}onTokensColorsChanged(e){return this._onOptionsMaybeChanged(),this._actual.onTokensColorsChanged()}onZonesChanged(e){return this._actual.onZonesChanged()}prepareRender(e){this._shouldCheckSampling&&(this._shouldCheckSampling=!1,this._recreateLineSampling())}render(e){let t=e.visibleRange.startLineNumber,n=e.visibleRange.endLineNumber;this._samplingState&&(t=this._samplingState.modelLineToMinimapLine(t),n=this._samplingState.modelLineToMinimapLine(n));let i={viewportContainsWhitespaceGaps:e.viewportData.whitespaceViewportData.length>0,scrollWidth:e.scrollWidth,scrollHeight:e.scrollHeight,viewportStartLineNumber:t,viewportEndLineNumber:n,viewportStartLineNumberVerticalOffset:e.getVerticalOffsetForLineNumber(t),scrollTop:e.scrollTop,scrollLeft:e.scrollLeft,viewportWidth:e.viewportWidth,viewportHeight:e.viewportHeight};this._actual.render(i)}_recreateLineSampling(){this._minimapSelections=null;let e=!!this._samplingState,[t,n]=Rk.compute(this.options,this._context.viewModel.getLineCount(),this._samplingState);if(this._samplingState=t,e&&this._samplingState)for(let i of n)switch(i.type){case"deleted":this._actual.onLinesDeleted(i.deleteFromLineNumber,i.deleteToLineNumber);break;case"inserted":this._actual.onLinesInserted(i.insertFromLineNumber,i.insertToLineNumber);break;case"flush":this._actual.onFlushed();break}}getLineCount(){return this._samplingState?this._samplingState.minimapLines.length:this._context.viewModel.getLineCount()}getRealLineCount(){return this._context.viewModel.getLineCount()}getLineContent(e){return this._samplingState?this._context.viewModel.getLineContent(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineContent(e)}getLineMaxColumn(e){return this._samplingState?this._context.viewModel.getLineMaxColumn(this._samplingState.minimapLines[e-1]):this._context.viewModel.getLineMaxColumn(e)}getMinimapLinesRenderingData(e,t,n){if(this._samplingState){let i=[];for(let o=0,s=t-e+1;o<s;o++)n[o]?i[o]=this._context.viewModel.getViewLineData(this._samplingState.minimapLines[e+o-1]):i[o]=null;return i}return this._context.viewModel.getMinimapLinesRenderingData(e,t,n).data}getSelections(){if(this._minimapSelections===null)if(this._samplingState){this._minimapSelections=[];for(let e of this._selections){let[t,n]=this._samplingState.decorationLineRangeToMinimapLineRange(e.startLineNumber,e.endLineNumber);this._minimapSelections.push(new ze(t,e.startColumn,n,e.endColumn))}}else this._minimapSelections=this._selections;return this._minimapSelections}getMinimapDecorationsInViewport(e,t){let n=this._getMinimapDecorationsInViewport(e,t).filter(i=>!i.options.minimap?.sectionHeaderStyle);if(this._samplingState){let i=[];for(let o of n){if(!o.options.minimap)continue;let s=o.range,a=this._samplingState.modelLineToMinimapLine(s.startLineNumber),l=this._samplingState.modelLineToMinimapLine(s.endLineNumber);i.push(new Ef(new D(a,s.startColumn,l,s.endColumn),o.options))}return i}return n}getSectionHeaderDecorationsInViewport(e,t){let n=this.options.minimapLineHeight,o=this.options.sectionHeaderFontSize/n;return e=Math.floor(Math.max(1,e-o)),this._getMinimapDecorationsInViewport(e,t).filter(s=>!!s.options.minimap?.sectionHeaderStyle)}_getMinimapDecorationsInViewport(e,t){let n;if(this._samplingState){let i=this._samplingState.minimapLines[e-1],o=this._samplingState.minimapLines[t-1];n=new D(i,1,o,this._context.viewModel.getLineMaxColumn(o))}else n=new D(e,1,t,this._context.viewModel.getLineMaxColumn(t));return this._context.viewModel.getMinimapDecorationsInRange(n)}getSectionHeaderText(e,t){let n=e.options.minimap?.sectionHeaderText;if(!n)return null;let i=this._sectionHeaderCache.get(n);if(i)return i;let o=t(n);return this._sectionHeaderCache.set(n,o),o}getOptions(){return this._context.viewModel.model.getOptions()}revealLineNumber(e){this._samplingState&&(e=this._samplingState.minimapLines[e-1]),this._context.viewModel.revealRange("mouse",!1,new D(e,1,e,1),1,0)}setScrollTop(e){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:e},1)}},lW=class r extends N{_theme;_model;_domNode;_shadow;_canvas;_decorationsCanvas;_slider;_sliderHorizontal;_pointerDownListener;_sliderPointerMoveMonitor;_sliderPointerDownListener;_gestureDisposable;_sliderTouchStartListener;_sliderTouchMoveListener;_sliderTouchEndListener;_lastRenderData;_selectionColor;_renderDecorations=!1;_gestureInProgress=!1;_buffers;constructor(e,t){super(),this._theme=e,this._model=t,this._lastRenderData=null,this._buffers=null,this._selectionColor=this._theme.getColor(SP),this._domNode=Ye(document.createElement("div")),zi.write(this._domNode,9),this._domNode.setClassName(this._getMinimapDomNodeClassName()),this._domNode.setPosition("absolute"),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._shadow=Ye(document.createElement("div")),this._shadow.setClassName("minimap-shadow-hidden"),this._domNode.appendChild(this._shadow),this._canvas=Ye(document.createElement("canvas")),this._canvas.setPosition("absolute"),this._canvas.setLeft(0),this._domNode.appendChild(this._canvas),this._decorationsCanvas=Ye(document.createElement("canvas")),this._decorationsCanvas.setPosition("absolute"),this._decorationsCanvas.setClassName("minimap-decorations-layer"),this._decorationsCanvas.setLeft(0),this._domNode.appendChild(this._decorationsCanvas),this._slider=Ye(document.createElement("div")),this._slider.setPosition("absolute"),this._slider.setClassName("minimap-slider"),this._slider.setLayerHinting(!0),this._slider.setContain("strict"),this._domNode.appendChild(this._slider),this._sliderHorizontal=Ye(document.createElement("div")),this._sliderHorizontal.setPosition("absolute"),this._sliderHorizontal.setClassName("minimap-slider-horizontal"),this._slider.appendChild(this._sliderHorizontal),this._applyLayout(),this._pointerDownListener=dn(this._domNode.domNode,ee.POINTER_DOWN,n=>{if(n.preventDefault(),this._model.options.renderMinimap===0||!this._lastRenderData)return;if(this._model.options.size!=="proportional"){if(n.button===0&&this._lastRenderData){let d=Ii(this._slider.domNode),c=d.top+d.height/2;this._startSliderDragging(n,c,this._lastRenderData.renderedLayout)}return}let o=this._model.options.minimapLineHeight,s=this._model.options.canvasInnerHeight/this._model.options.canvasOuterHeight*n.offsetY,l=Math.floor(s/o)+this._lastRenderData.renderedLayout.startLineNumber-this._lastRenderData.renderedLayout.topPaddingLineCount;l=Math.min(l,this._model.getLineCount()),this._model.revealLineNumber(l)}),this._sliderPointerMoveMonitor=new sd,this._sliderPointerDownListener=dn(this._slider.domNode,ee.POINTER_DOWN,n=>{n.preventDefault(),n.stopPropagation(),n.button===0&&this._lastRenderData&&this._startSliderDragging(n,n.pageY,this._lastRenderData.renderedLayout)}),this._gestureDisposable=Jn.addTarget(this._domNode.domNode),this._sliderTouchStartListener=U(this._domNode.domNode,Rt.Start,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&(this._slider.toggleClassName("active",!0),this._gestureInProgress=!0,this.scrollDueToTouchEvent(n))},{passive:!1}),this._sliderTouchMoveListener=U(this._domNode.domNode,Rt.Change,n=>{n.preventDefault(),n.stopPropagation(),this._lastRenderData&&this._gestureInProgress&&this.scrollDueToTouchEvent(n)},{passive:!1}),this._sliderTouchEndListener=dn(this._domNode.domNode,Rt.End,n=>{n.preventDefault(),n.stopPropagation(),this._gestureInProgress=!1,this._slider.toggleClassName("active",!1)})}_startSliderDragging(e,t,n){if(!e.target||!(e.target instanceof Element))return;let i=e.pageX;this._slider.toggleClassName("active",!0);let o=(s,a)=>{let l=Ii(this._domNode.domNode),d=Math.min(Math.abs(a-i),Math.abs(a-l.left),Math.abs(a-l.left-l.width));if(It&&d>lJ){this._model.setScrollTop(n.scrollTop);return}let c=s-t;this._model.setScrollTop(n.getDesiredScrollTopFromDelta(c))};e.pageY!==t&&o(e.pageY,i),this._sliderPointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,s=>o(s.pageY,s.pageX),()=>{this._slider.toggleClassName("active",!1)})}scrollDueToTouchEvent(e){let t=this._domNode.domNode.getBoundingClientRect().top,n=this._lastRenderData.renderedLayout.getDesiredScrollTopFromTouchLocation(e.pageY-t);this._model.setScrollTop(n)}dispose(){this._pointerDownListener.dispose(),this._sliderPointerMoveMonitor.dispose(),this._sliderPointerDownListener.dispose(),this._gestureDisposable.dispose(),this._sliderTouchStartListener.dispose(),this._sliderTouchMoveListener.dispose(),this._sliderTouchEndListener.dispose(),super.dispose()}_getMinimapDomNodeClassName(){let e=["minimap"];return this._model.options.showSlider==="always"?e.push("slider-always"):e.push("slider-mouseover"),this._model.options.autohide&&e.push("autohide"),e.join(" ")}getDomNode(){return this._domNode}_applyLayout(){this._domNode.setLeft(this._model.options.minimapLeft),this._domNode.setWidth(this._model.options.minimapWidth),this._domNode.setHeight(this._model.options.minimapHeight),this._shadow.setHeight(this._model.options.minimapHeight),this._canvas.setWidth(this._model.options.canvasOuterWidth),this._canvas.setHeight(this._model.options.canvasOuterHeight),this._canvas.domNode.width=this._model.options.canvasInnerWidth,this._canvas.domNode.height=this._model.options.canvasInnerHeight,this._decorationsCanvas.setWidth(this._model.options.canvasOuterWidth),this._decorationsCanvas.setHeight(this._model.options.canvasOuterHeight),this._decorationsCanvas.domNode.width=this._model.options.canvasInnerWidth,this._decorationsCanvas.domNode.height=this._model.options.canvasInnerHeight,this._slider.setWidth(this._model.options.minimapWidth)}_getBuffer(){return this._buffers||this._model.options.canvasInnerWidth>0&&this._model.options.canvasInnerHeight>0&&(this._buffers=new aW(this._canvas.domNode.getContext("2d"),this._model.options.canvasInnerWidth,this._model.options.canvasInnerHeight,this._model.options.backgroundColor)),this._buffers?this._buffers.getBuffer():null}onDidChangeOptions(){this._lastRenderData=null,this._buffers=null,this._applyLayout(),this._domNode.setClassName(this._getMinimapDomNodeClassName())}onSelectionChanged(){return this._renderDecorations=!0,!0}onDecorationsChanged(){return this._renderDecorations=!0,!0}onFlushed(){return this._lastRenderData=null,!0}onLinesChanged(e,t){return this._lastRenderData?this._lastRenderData.onLinesChanged(e,t):!1}onLinesDeleted(e,t){return this._lastRenderData?.onLinesDeleted(e,t),!0}onLinesInserted(e,t){return this._lastRenderData?.onLinesInserted(e,t),!0}onScrollChanged(){return this._renderDecorations=!0,!0}onThemeChanged(){return this._selectionColor=this._theme.getColor(SP),this._renderDecorations=!0,!0}onTokensChanged(e){return this._lastRenderData?this._lastRenderData.onTokensChanged(e):!1}onTokensColorsChanged(){return this._lastRenderData=null,this._buffers=null,!0}onZonesChanged(){return this._lastRenderData=null,!0}render(e){if(this._model.options.renderMinimap===0){this._shadow.setClassName("minimap-shadow-hidden"),this._sliderHorizontal.setWidth(0),this._sliderHorizontal.setHeight(0);return}e.scrollLeft+e.viewportWidth>=e.scrollWidth?this._shadow.setClassName("minimap-shadow-hidden"):this._shadow.setClassName("minimap-shadow-visible");let n=sW.create(this._model.options,e.viewportStartLineNumber,e.viewportEndLineNumber,e.viewportStartLineNumberVerticalOffset,e.viewportHeight,e.viewportContainsWhitespaceGaps,this._model.getLineCount(),this._model.getRealLineCount(),e.scrollTop,e.scrollHeight,this._lastRenderData?this._lastRenderData.renderedLayout:null);this._slider.setDisplay(n.sliderNeeded?"block":"none"),this._slider.setTop(n.sliderTop),this._slider.setHeight(n.sliderHeight),this._sliderHorizontal.setLeft(0),this._sliderHorizontal.setWidth(this._model.options.minimapWidth),this._sliderHorizontal.setTop(0),this._sliderHorizontal.setHeight(n.sliderHeight),this.renderDecorations(n),this._lastRenderData=this.renderLines(n)}renderDecorations(e){if(this._renderDecorations){this._renderDecorations=!1;let t=this._model.getSelections();t.sort(D.compareRangesUsingStarts);let n=this._model.getMinimapDecorationsInViewport(e.startLineNumber,e.endLineNumber);n.sort((h,g)=>(h.options.zIndex||0)-(g.options.zIndex||0));let{canvasInnerWidth:i,canvasInnerHeight:o}=this._model.options,s=this._model.options.minimapLineHeight,a=this._model.options.minimapCharWidth,l=this._model.getOptions().tabSize,d=this._decorationsCanvas.domNode.getContext("2d");d.clearRect(0,0,i,o);let c=new Ok(e.startLineNumber,e.endLineNumber,!1);this._renderSelectionLineHighlights(d,t,c,e,s),this._renderDecorationsLineHighlights(d,n,c,e,s);let p=new Ok(e.startLineNumber,e.endLineNumber,null);this._renderSelectionsHighlights(d,t,p,e,s,l,a,i),this._renderDecorationsHighlights(d,n,p,e,s,l,a,i),this._renderSectionHeaders(e)}}_renderSelectionLineHighlights(e,t,n,i,o){if(!this._selectionColor||this._selectionColor.isTransparent())return;e.fillStyle=this._selectionColor.transparent(.5).toString();let s=0,a=0;for(let l of t){let d=i.intersectWithViewport(l);if(!d)continue;let[c,p]=d;for(let f=c;f<=p;f++)n.set(f,!0);let h=i.getYForLineNumber(c,o),g=i.getYForLineNumber(p,o);a>=h||(a>s&&e.fillRect(Ua,s,e.canvas.width,a-s),s=h),a=g}a>s&&e.fillRect(Ua,s,e.canvas.width,a-s)}_renderDecorationsLineHighlights(e,t,n,i,o){let s=new Map;for(let a=t.length-1;a>=0;a--){let l=t[a],d=l.options.minimap;if(!d||d.position!==1)continue;let c=i.intersectWithViewport(l.range);if(!c)continue;let[p,h]=c,g=d.getColor(this._theme.value);if(!g||g.isTransparent())continue;let f=s.get(g.toString());f||(f=g.transparent(.5).toString(),s.set(g.toString(),f)),e.fillStyle=f;for(let m=p;m<=h;m++){if(n.has(m))continue;n.set(m,!0);let b=i.getYForLineNumber(p,o);e.fillRect(Ua,b,e.canvas.width,o)}}}_renderSelectionsHighlights(e,t,n,i,o,s,a,l){if(!(!this._selectionColor||this._selectionColor.isTransparent()))for(let d of t){let c=i.intersectWithViewport(d);if(!c)continue;let[p,h]=c;for(let g=p;g<=h;g++)this.renderDecorationOnLine(e,n,d,this._selectionColor,i,g,o,o,s,a,l)}}_renderDecorationsHighlights(e,t,n,i,o,s,a,l){for(let d of t){let c=d.options.minimap;if(!c)continue;let p=i.intersectWithViewport(d.range);if(!p)continue;let[h,g]=p,f=c.getColor(this._theme.value);if(!(!f||f.isTransparent()))for(let m=h;m<=g;m++)switch(c.position){case 1:this.renderDecorationOnLine(e,n,d.range,f,i,m,o,o,s,a,l);continue;case 2:{let b=i.getYForLineNumber(m,o);this.renderDecoration(e,f,2,b,dJ,o);continue}}}}renderDecorationOnLine(e,t,n,i,o,s,a,l,d,c,p){let h=o.getYForLineNumber(s,l);if(h+a<0||h>this._model.options.canvasInnerHeight)return;let{startLineNumber:g,endLineNumber:f}=n,m=g===s?n.startColumn:1,b=f===s?n.endColumn:this._model.getLineMaxColumn(s),v=this.getXOffsetForPosition(t,s,m,d,c,p),S=this.getXOffsetForPosition(t,s,b,d,c,p);this.renderDecoration(e,i,v,h,S-v,a)}getXOffsetForPosition(e,t,n,i,o,s){if(n===1)return Ua;if((n-1)*o>=s)return s;let l=e.get(t);if(!l){let d=this._model.getLineContent(t);l=[Ua];let c=Ua;for(let p=1;p<d.length+1;p++){let h=d.charCodeAt(p-1),g=h===9?i*o:Ls(h)?2*o:o,f=c+g;if(f>=s){l[p]=s;break}l[p]=f,c=f}e.set(t,l)}return n-1<l.length?l[n-1]:s}renderDecoration(e,t,n,i,o,s){e.fillStyle=t&&t.toString()||"",e.fillRect(n,i,o,s)}_renderSectionHeaders(e){let t=this._model.options.minimapLineHeight,n=this._model.options.sectionHeaderFontSize,i=this._model.options.sectionHeaderLetterSpacing,o=n*1.5,{canvasInnerWidth:s}=this._model.options,a=this._model.options.backgroundColor,l=`rgb(${a.r} ${a.g} ${a.b} / .7)`,d=this._model.options.sectionHeaderFontColor,c=`rgb(${d.r} ${d.g} ${d.b})`,p=c,h=this._decorationsCanvas.domNode.getContext("2d");h.letterSpacing=i+"px",h.font="500 "+n+"px "+this._model.options.sectionHeaderFontFamily,h.strokeStyle=p,h.lineWidth=.2;let g=this._model.getSectionHeaderDecorationsInViewport(e.startLineNumber,e.endLineNumber);g.sort((m,b)=>m.range.startLineNumber-b.range.startLineNumber);let f=r._fitSectionHeader.bind(null,h,s-Ua);for(let m of g){let b=e.getYForLineNumber(m.range.startLineNumber,t)+n,v=b-n,S=v+2,x=this._model.getSectionHeaderText(m,f);r._renderSectionLabel(h,x,m.options.minimap?.sectionHeaderStyle===2,l,c,s,v,o,b,S)}}static _fitSectionHeader(e,t,n){if(!n)return n;let i="\u2026",o=e.measureText(n).width,s=e.measureText(i).width;if(o<=t||o<=s)return n;let a=n.length,l=o/n.length,d=Math.floor((t-s)/l)-1,c=Math.ceil(d/2);for(;c>0&&/\s/.test(n[c-1]);)--c;return n.substring(0,c)+i+n.substring(a-(d-c))}static _renderSectionLabel(e,t,n,i,o,s,a,l,d,c){t&&(e.fillStyle=i,e.fillRect(0,a,s,l),e.fillStyle=o,e.fillText(t,Ua,d)),n&&(e.beginPath(),e.moveTo(0,c),e.lineTo(s,c),e.closePath(),e.stroke())}renderLines(e){let t=e.startLineNumber,n=e.endLineNumber,i=this._model.options.minimapLineHeight;if(this._lastRenderData&&this._lastRenderData.linesEquals(e)){let ce=this._lastRenderData._get();return new kk(e,ce.imageData,ce.lines)}let o=this._getBuffer();if(!o)return null;let[s,a,l]=r._renderUntouchedLines(o,e.topPaddingLineCount,t,n,i,this._lastRenderData),d=this._model.getMinimapLinesRenderingData(t,n,l),c=this._model.getOptions().tabSize,p=this._model.options.defaultBackgroundColor,h=this._model.options.backgroundColor,g=this._model.options.foregroundAlpha,f=this._model.tokensColorTracker,m=f.backgroundIsLight(),b=this._model.options.renderMinimap,v=this._model.options.charRenderer(),S=this._model.options.fontScale,x=this._model.options.minimapCharWidth,w=(b===1?2:3)*S,P=i>w?Math.floor((i-w)/2):0,R=h.a/255,O=new bl(Math.round((h.r-p.r)*R+p.r),Math.round((h.g-p.g)*R+p.g),Math.round((h.b-p.b)*R+p.b),255),M=e.topPaddingLineCount*i,K=[];for(let ce=0,se=n-t+1;ce<se;ce++)l[ce]&&r._renderLine(o,O,h.a,m,b,x,f,g,v,M,P,c,d[ce],S,i),K[ce]=new Lk(M),M+=i;let $=s===-1?0:s,he=(a===-1?o.height:a)-$;return this._canvas.domNode.getContext("2d").putImageData(o,0,0,0,$,o.width,he),new kk(e,o,K)}static _renderUntouchedLines(e,t,n,i,o,s){let a=[];if(!s){for(let M=0,K=i-n+1;M<K;M++)a[M]=!0;return[-1,-1,a]}let l=s._get(),d=l.imageData.data,c=l.rendLineNumberStart,p=l.lines,h=p.length,g=e.width,f=e.data,m=(i-n+1)*o*g*4,b=-1,v=-1,S=-1,x=-1,E=-1,w=-1,P=t*o;for(let M=n;M<=i;M++){let K=M-n,$=M-c,Q=$>=0&&$<h?p[$].dy:-1;if(Q===-1){a[K]=!0,P+=o;continue}let he=Q*g*4,De=(Q+o)*g*4,ce=P*g*4,se=(P+o)*g*4;x===he&&w===ce?(x=De,w=se):(S!==-1&&(f.set(d.subarray(S,x),E),b===-1&&S===0&&S===E&&(b=x),v===-1&&x===m&&S===E&&(v=S)),S=he,x=De,E=ce,w=se),a[K]=!1,P+=o}S!==-1&&(f.set(d.subarray(S,x),E),b===-1&&S===0&&S===E&&(b=x),v===-1&&x===m&&S===E&&(v=S));let R=b===-1?-1:b/(g*4),O=v===-1?-1:v/(g*4);return[R,O,a]}static _renderLine(e,t,n,i,o,s,a,l,d,c,p,h,g,f,m){let b=g.content,v=g.tokens,S=e.width-s,x=m===1,E=Ua,w=0,P=0;for(let R=0,O=v.getCount();R<O;R++){let M=v.getEndOffset(R),K=v.getForeground(R),$=a.getColor(K);for(;w<M;w++){if(E>S)return;let Q=b.charCodeAt(w);if(Q===9){let he=h-(w+P)%h;P+=he-1,E+=he*s}else if(Q===32)E+=s;else{let he=Ls(Q)?2:1;for(let De=0;De<he;De++)if(o===2?d.blockRenderChar(e,E,c+p,$,l,t,n,x):d.renderChar(e,E,c+p,Q,$,l,t,n,f,i,x),E+=s,E>S)return}}}}},Ok=class{_startLineNumber;_endLineNumber;_defaultValue;_values;constructor(e,t,n){this._startLineNumber=e,this._endLineNumber=t,this._defaultValue=n,this._values=[];for(let i=0,o=this._endLineNumber-this._startLineNumber+1;i<o;i++)this._values[i]=n}has(e){return this.get(e)!==this._defaultValue}set(e,t){e<this._startLineNumber||e>this._endLineNumber||(this._values[e-this._startLineNumber]=t)}get(e){return e<this._startLineNumber||e>this._endLineNumber?this._defaultValue:this._values[e-this._startLineNumber]}};var Pk=class extends hn{_viewDomNode;_widgets;_viewDomNodeRect;_domNode;overflowingOverlayWidgetsDomNode;_verticalScrollbarWidth;_minimapWidth;_horizontalScrollbarHeight;_editorHeight;_editorWidth;constructor(e,t){super(e),this._viewDomNode=t;let i=this._context.configuration.options.get(147);this._widgets={},this._verticalScrollbarWidth=i.verticalScrollbarWidth,this._minimapWidth=i.minimap.minimapWidth,this._horizontalScrollbarHeight=i.horizontalScrollbarHeight,this._editorHeight=i.height,this._editorWidth=i.width,this._viewDomNodeRect={top:0,left:0,width:0,height:0},this._domNode=Ye(document.createElement("div")),zi.write(this._domNode,4),this._domNode.setClassName("overlayWidgets"),this.overflowingOverlayWidgetsDomNode=Ye(document.createElement("div")),zi.write(this.overflowingOverlayWidgetsDomNode,5),this.overflowingOverlayWidgetsDomNode.setClassName("overflowingOverlayWidgets")}dispose(){super.dispose(),this._widgets={}}getDomNode(){return this._domNode}onConfigurationChanged(e){let n=this._context.configuration.options.get(147);return this._verticalScrollbarWidth=n.verticalScrollbarWidth,this._minimapWidth=n.minimap.minimapWidth,this._horizontalScrollbarHeight=n.horizontalScrollbarHeight,this._editorHeight=n.height,this._editorWidth=n.width,!0}addWidget(e){let t=Ye(e.getDomNode());this._widgets[e.getId()]={widget:e,preference:null,domNode:t},t.setPosition("absolute"),t.setAttribute("widgetId",e.getId()),e.allowEditorOverflow?this.overflowingOverlayWidgetsDomNode.appendChild(t):this._domNode.appendChild(t),this.setShouldRender(),this._updateMaxMinWidth()}setWidgetPosition(e,t){let n=this._widgets[e.getId()],i=t?t.preference:null,o=t?.stackOridinal;return n.preference===i&&n.stack===o?(this._updateMaxMinWidth(),!1):(n.preference=i,n.stack=o,this.setShouldRender(),this._updateMaxMinWidth(),!0)}removeWidget(e){let t=e.getId();if(this._widgets.hasOwnProperty(t)){let i=this._widgets[t].domNode.domNode;delete this._widgets[t],i.remove(),this.setShouldRender(),this._updateMaxMinWidth()}}_updateMaxMinWidth(){let e=0,t=Object.keys(this._widgets);for(let n=0,i=t.length;n<i;n++){let o=t[n],a=this._widgets[o].widget.getMinContentWidthInPx?.();typeof a<"u"&&(e=Math.max(e,a))}this._context.viewLayout.setOverlayWidgetsMinWidth(e)}_renderWidget(e,t){let n=e.domNode;if(e.preference===null){n.setTop("");return}let i=2*this._verticalScrollbarWidth+this._minimapWidth;if(e.preference===0||e.preference===1){if(e.preference===1){let o=n.domNode.clientHeight;n.setTop(this._editorHeight-o-2*this._horizontalScrollbarHeight)}else n.setTop(0);e.stack!==void 0?(n.setTop(t[e.preference]),t[e.preference]+=n.domNode.clientWidth):n.setRight(i)}else if(e.preference===2)n.domNode.style.right="50%",e.stack!==void 0?(n.setTop(t[2]),t[2]+=n.domNode.clientHeight):n.setTop(0);else{let{top:o,left:s}=e.preference;if(this._context.configuration.options.get(43)&&e.widget.allowEditorOverflow){let l=this._viewDomNodeRect;n.setTop(o+l.top),n.setLeft(s+l.left),n.setPosition("fixed")}else n.setTop(o),n.setLeft(s),n.setPosition("absolute")}}prepareRender(e){this._viewDomNodeRect=Ii(this._viewDomNode.domNode)}render(e){this._domNode.setWidth(this._editorWidth);let t=Object.keys(this._widgets),n=Array.from({length:3},()=>0);t.sort((i,o)=>(this._widgets[i].stack||0)-(this._widgets[o].stack||0));for(let i=0,o=t.length;i<o;i++){let s=t[i];this._renderWidget(this._widgets[s],n)}}};var dW=class{lineHeight;pixelRatio;overviewRulerLanes;renderBorder;borderColor;hideCursor;cursorColorSingle;cursorColorPrimary;cursorColorSecondary;themeType;backgroundColor;top;right;domWidth;domHeight;canvasWidth;canvasHeight;x;w;constructor(e,t){let n=e.options;this.lineHeight=n.get(68),this.pixelRatio=n.get(145),this.overviewRulerLanes=n.get(84),this.renderBorder=n.get(83);let i=t.getColor(QK);this.borderColor=i?i.toString():null,this.hideCursor=n.get(60);let o=t.getColor(jf);this.cursorColorSingle=o?o.transparent(.7).toString():null;let s=t.getColor(m_);this.cursorColorPrimary=s?s.transparent(.7).toString():null;let a=t.getColor(f_);this.cursorColorSecondary=a?a.transparent(.7).toString():null,this.themeType=t.type;let l=n.get(74),d=l.enabled,c=l.side,p=t.getColor(ZK),h=Xo.getDefaultBackground();p?this.backgroundColor=p:d&&c==="right"?this.backgroundColor=h:this.backgroundColor=null;let f=n.get(147).overviewRuler;this.top=f.top,this.right=f.right,this.domWidth=f.width,this.domHeight=f.height,this.overviewRulerLanes===0?(this.canvasWidth=0,this.canvasHeight=0):(this.canvasWidth=this.domWidth*this.pixelRatio|0,this.canvasHeight=this.domHeight*this.pixelRatio|0);let[m,b]=this._initLanes(1,this.canvasWidth,this.overviewRulerLanes);this.x=m,this.w=b}_initLanes(e,t,n){let i=t-e;if(n>=3){let o=Math.floor(i/3),s=Math.floor(i/3),a=i-o-s,l=e,d=l+o,c=l+o+a;return[[0,l,d,l,c,l,d,l],[0,o,a,o+a,s,o+a+s,a+s,o+a+s]]}else if(n===2){let o=Math.floor(i/2),s=i-o,a=e,l=a+o;return[[0,a,a,a,l,a,a,a],[0,o,o,o,s,o+s,o+s,o+s]]}else{let o=e,s=i;return[[0,o,o,o,o,o,o,o],[0,s,s,s,s,s,s,s]]}}equals(e){return this.lineHeight===e.lineHeight&&this.pixelRatio===e.pixelRatio&&this.overviewRulerLanes===e.overviewRulerLanes&&this.renderBorder===e.renderBorder&&this.borderColor===e.borderColor&&this.hideCursor===e.hideCursor&&this.cursorColorSingle===e.cursorColorSingle&&this.cursorColorPrimary===e.cursorColorPrimary&&this.cursorColorSecondary===e.cursorColorSecondary&&this.themeType===e.themeType&&H.equals(this.backgroundColor,e.backgroundColor)&&this.top===e.top&&this.right===e.right&&this.domWidth===e.domWidth&&this.domHeight===e.domHeight&&this.canvasWidth===e.canvasWidth&&this.canvasHeight===e.canvasHeight}};var Ak=class extends hn{_actualShouldRender=0;_tokensColorTrackerListener;_domNode;_settings;_cursorPositions;_renderedDecorations=[];_renderedCursorPositions=[];constructor(e){super(e),this._domNode=Ye(document.createElement("canvas")),this._domNode.setClassName("decorationsOverviewRuler"),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._domNode.setAttribute("aria-hidden","true"),this._updateSettings(!1),this._tokensColorTrackerListener=Xo.onDidChange(t=>{t.changedColorMap&&this._updateSettings(!0)}),this._cursorPositions=[{position:new F(1,1),color:this._settings.cursorColorSingle}]}dispose(){super.dispose(),this._tokensColorTrackerListener.dispose()}_updateSettings(e){let t=new dW(this._context.configuration,this._context.theme);return this._settings&&this._settings.equals(t)?!1:(this._settings=t,this._domNode.setTop(this._settings.top),this._domNode.setRight(this._settings.right),this._domNode.setWidth(this._settings.domWidth),this._domNode.setHeight(this._settings.domHeight),this._domNode.domNode.width=this._settings.canvasWidth,this._domNode.domNode.height=this._settings.canvasHeight,e&&this._render(),!0)}_markRenderingIsNeeded(){return this._actualShouldRender=2,!0}_markRenderingIsMaybeNeeded(){return this._actualShouldRender=1,!0}onConfigurationChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}onCursorStateChanged(e){this._cursorPositions=[];for(let t=0,n=e.selections.length;t<n;t++){let i=this._settings.cursorColorSingle;n>1&&(i=t===0?this._settings.cursorColorPrimary:this._settings.cursorColorSecondary),this._cursorPositions.push({position:e.selections[t].getPosition(),color:i})}return this._cursorPositions.sort((t,n)=>F.compare(t.position,n.position)),this._markRenderingIsMaybeNeeded()}onDecorationsChanged(e){return e.affectsOverviewRuler?this._markRenderingIsMaybeNeeded():!1}onFlushed(e){return this._markRenderingIsNeeded()}onScrollChanged(e){return e.scrollHeightChanged?this._markRenderingIsNeeded():!1}onZonesChanged(e){return this._markRenderingIsNeeded()}onThemeChanged(e){return this._updateSettings(!1)?this._markRenderingIsNeeded():!1}getDomNode(){return this._domNode.domNode}prepareRender(e){}render(e){this._render(),this._actualShouldRender=0}_render(){let e=this._settings.backgroundColor;if(this._settings.overviewRulerLanes===0){this._domNode.setBackgroundColor(e?H.Format.CSS.formatHexA(e):""),this._domNode.setDisplay("none");return}let t=this._context.viewModel.getAllOverviewRulerDecorations(this._context.theme);if(t.sort(Gh.compareByRenderingProps),this._actualShouldRender===1&&!Gh.equalsArr(this._renderedDecorations,t)&&(this._actualShouldRender=2),this._actualShouldRender===1&&!sn(this._renderedCursorPositions,this._cursorPositions,(f,m)=>f.position.lineNumber===m.position.lineNumber&&f.color===m.color)&&(this._actualShouldRender=2),this._actualShouldRender===1)return;this._renderedDecorations=t,this._renderedCursorPositions=this._cursorPositions,this._domNode.setDisplay("block");let n=this._settings.canvasWidth,i=this._settings.canvasHeight,o=this._settings.lineHeight,s=this._context.viewLayout,a=this._context.viewLayout.getScrollHeight(),l=i/a,d=6*this._settings.pixelRatio|0,c=d/2|0,p=this._domNode.domNode.getContext("2d");e?e.isOpaque()?(p.fillStyle=H.Format.CSS.formatHexA(e),p.fillRect(0,0,n,i)):(p.clearRect(0,0,n,i),p.fillStyle=H.Format.CSS.formatHexA(e),p.fillRect(0,0,n,i)):p.clearRect(0,0,n,i);let h=this._settings.x,g=this._settings.w;for(let f of t){let m=f.color,b=f.data;p.fillStyle=m;let v=0,S=0,x=0;for(let E=0,w=b.length/3;E<w;E++){let P=b[3*E],R=b[3*E+1],O=b[3*E+2],M=s.getVerticalOffsetForLineNumber(R)*l|0,K=(s.getVerticalOffsetForLineNumber(O)+o)*l|0;if(K-M<d){let Q=(M+K)/2|0;Q<c?Q=c:Q+c>i&&(Q=i-c),M=Q-c,K=Q+c}M>x+1||P!==v?(E!==0&&p.fillRect(h[v],S,g[v],x-S),v=P,S=M,x=K):K>x&&(x=K)}p.fillRect(h[v],S,g[v],x-S)}if(!this._settings.hideCursor){let f=2*this._settings.pixelRatio|0,m=f/2|0,b=this._settings.x[7],v=this._settings.w[7],S=-100,x=-100,E=null;for(let w=0,P=this._cursorPositions.length;w<P;w++){let R=this._cursorPositions[w].color;if(!R)continue;let O=this._cursorPositions[w].position,M=s.getVerticalOffsetForLineNumber(O.lineNumber)*l|0;M<m?M=m:M+m>i&&(M=i-m);let K=M-m,$=K+f;K>x+1||R!==E?(w!==0&&E&&p.fillRect(b,S,v,x-S),S=K,x=$):$>x&&(x=$),E=R,p.fillStyle=R}E&&p.fillRect(b,S,v,x-S)}this._settings.renderBorder&&this._settings.borderColor&&this._settings.overviewRulerLanes>0&&(p.beginPath(),p.lineWidth=1,p.strokeStyle=this._settings.borderColor,p.moveTo(0,0),p.lineTo(0,i),p.moveTo(1,0),p.lineTo(n,0),p.stroke())}};var Nk=class extends da{_context;_domNode;_zoneManager;constructor(e,t){super(),this._context=e;let n=this._context.configuration.options;this._domNode=Ye(document.createElement("canvas")),this._domNode.setClassName(t),this._domNode.setPosition("absolute"),this._domNode.setLayerHinting(!0),this._domNode.setContain("strict"),this._zoneManager=new hw(i=>this._context.viewLayout.getVerticalOffsetForLineNumber(i)),this._zoneManager.setDOMWidth(0),this._zoneManager.setDOMHeight(0),this._zoneManager.setOuterHeight(this._context.viewLayout.getScrollHeight()),this._zoneManager.setLineHeight(n.get(68)),this._zoneManager.setPixelRatio(n.get(145)),this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return e.hasChanged(68)&&(this._zoneManager.setLineHeight(t.get(68)),this._render()),e.hasChanged(145)&&(this._zoneManager.setPixelRatio(t.get(145)),this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render()),!0}onFlushed(e){return this._render(),!0}onScrollChanged(e){return e.scrollHeightChanged&&(this._zoneManager.setOuterHeight(e.scrollHeight),this._render()),!0}onZonesChanged(e){return this._render(),!0}getDomNode(){return this._domNode.domNode}setLayout(e){this._domNode.setTop(e.top),this._domNode.setRight(e.right);let t=!1;t=this._zoneManager.setDOMWidth(e.width)||t,t=this._zoneManager.setDOMHeight(e.height)||t,t&&(this._domNode.setWidth(this._zoneManager.getDOMWidth()),this._domNode.setHeight(this._zoneManager.getDOMHeight()),this._domNode.domNode.width=this._zoneManager.getCanvasWidth(),this._domNode.domNode.height=this._zoneManager.getCanvasHeight(),this._render())}setZones(e){this._zoneManager.setZones(e),this._render()}_render(){if(this._zoneManager.getOuterHeight()===0)return!1;let e=this._zoneManager.getCanvasWidth(),t=this._zoneManager.getCanvasHeight(),n=this._zoneManager.resolveColorZones(),i=this._zoneManager.getId2Color(),o=this._domNode.domNode.getContext("2d");return o.clearRect(0,0,e,t),n.length>0&&this._renderOneLane(o,n,i,e),!0}_renderOneLane(e,t,n,i){let o=0,s=0,a=0;for(let l of t){let d=l.colorId,c=l.from,p=l.to;d!==o?(e.fillRect(0,s,i,a-s),o=d,e.fillStyle=n[o],s=c,a=p):a>=c?a=Math.max(a,p):(e.fillRect(0,s,i,a-s),s=c,a=p)}e.fillRect(0,s,i,a-s)}};var Fk=class extends hn{domNode;_renderedRulers;_rulers;_typicalHalfwidthCharacterWidth;constructor(e){super(e),this.domNode=Ye(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.domNode.setClassName("view-rulers"),this._renderedRulers=[];let t=this._context.configuration.options;this._rulers=t.get(104),this._typicalHalfwidthCharacterWidth=t.get(51).typicalHalfwidthCharacterWidth}dispose(){super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return this._rulers=t.get(104),this._typicalHalfwidthCharacterWidth=t.get(51).typicalHalfwidthCharacterWidth,!0}onScrollChanged(e){return e.scrollHeightChanged}prepareRender(e){}_ensureRulersCount(){let e=this._renderedRulers.length,t=this._rulers.length;if(e===t)return;if(e<t){let{tabSize:i}=this._context.viewModel.model.getOptions(),o=i,s=t-e;for(;s>0;){let a=Ye(document.createElement("div"));a.setClassName("view-ruler"),a.setWidth(o),this.domNode.appendChild(a),this._renderedRulers.push(a),s--}return}let n=e-t;for(;n>0;){let i=this._renderedRulers.pop();this.domNode.removeChild(i),n--}}render(e){this._ensureRulersCount();for(let t=0,n=this._rulers.length;t<n;t++){let i=this._renderedRulers[t],o=this._rulers[t];i.setBoxShadow(o.color?`1px 0 0 0 ${o.color} inset`:""),i.setHeight(Math.min(e.scrollHeight,1e6)),i.setLeft(o.column*this._typicalHalfwidthCharacterWidth)}}};var Bk=class extends hn{_domNode;_scrollTop;_width;_shouldShow;_useShadows;constructor(e){super(e),this._scrollTop=0,this._width=0,this._updateWidth(),this._shouldShow=!1;let n=this._context.configuration.options.get(105);this._useShadows=n.useShadows,this._domNode=Ye(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true")}dispose(){super.dispose()}_updateShouldShow(){let e=this._useShadows&&this._scrollTop>0;return this._shouldShow!==e?(this._shouldShow=e,!0):!1}getDomNode(){return this._domNode}_updateWidth(){let t=this._context.configuration.options.get(147);t.minimap.renderMinimap===0||t.minimap.minimapWidth>0&&t.minimap.minimapLeft===0?this._width=t.width:this._width=t.width-t.verticalScrollbarWidth}onConfigurationChanged(e){let n=this._context.configuration.options.get(105);return this._useShadows=n.useShadows,this._updateWidth(),this._updateShouldShow(),!0}onScrollChanged(e){return this._scrollTop=e.scrollTop,this._updateShouldShow()}prepareRender(e){}render(e){this._domNode.setWidth(this._width),this._domNode.setClassName(this._shouldShow?"scroll-decoration":"")}};var cW=class{left;width;startStyle;endStyle;constructor(e){this.left=e.left,this.width=e.width,this.startStyle=null,this.endStyle=null}},uW=class{lineNumber;ranges;constructor(e,t){this.lineNumber=e,this.ranges=t}};function uJ(r){return new cW(r)}function pJ(r){return new uW(r.lineNumber,r.ranges.map(uJ))}var Vk=class r extends Lr{static SELECTION_CLASS_NAME="selected-text";static SELECTION_TOP_LEFT="top-left-radius";static SELECTION_BOTTOM_LEFT="bottom-left-radius";static SELECTION_TOP_RIGHT="top-right-radius";static SELECTION_BOTTOM_RIGHT="bottom-right-radius";static EDITOR_BACKGROUND_CLASS_NAME="monaco-editor-background";static ROUNDED_PIECE_WIDTH=10;_context;_roundedSelection;_typicalHalfwidthCharacterWidth;_selections;_renderResult;constructor(e){super(),this._context=e;let t=this._context.configuration.options;this._roundedSelection=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(51).typicalHalfwidthCharacterWidth,this._selections=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=this._context.configuration.options;return this._roundedSelection=t.get(103),this._typicalHalfwidthCharacterWidth=t.get(51).typicalHalfwidthCharacterWidth,!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}_visibleRangesHaveGaps(e){for(let t=0,n=e.length;t<n;t++)if(e[t].ranges.length>1)return!0;return!1}_enrichVisibleRangesWithStyle(e,t,n){let i=this._typicalHalfwidthCharacterWidth/4,o=null,s=null;if(n&&n.length>0&&t.length>0){let a=t[0].lineNumber;if(a===e.startLineNumber)for(let d=0;!o&&d<n.length;d++)n[d].lineNumber===a&&(o=n[d].ranges[0]);let l=t[t.length-1].lineNumber;if(l===e.endLineNumber)for(let d=n.length-1;!s&&d>=0;d--)n[d].lineNumber===l&&(s=n[d].ranges[0]);o&&!o.startStyle&&(o=null),s&&!s.startStyle&&(s=null)}for(let a=0,l=t.length;a<l;a++){let d=t[a].ranges[0],c=d.left,p=d.left+d.width,h={top:0,bottom:0},g={top:0,bottom:0};if(a>0){let f=t[a-1].ranges[0].left,m=t[a-1].ranges[0].left+t[a-1].ranges[0].width;Wk(c-f)<i?h.top=2:c>f&&(h.top=1),Wk(p-m)<i?g.top=2:f<p&&p<m&&(g.top=1)}else o&&(h.top=o.startStyle.top,g.top=o.endStyle.top);if(a+1<l){let f=t[a+1].ranges[0].left,m=t[a+1].ranges[0].left+t[a+1].ranges[0].width;Wk(c-f)<i?h.bottom=2:f<c&&c<m&&(h.bottom=1),Wk(p-m)<i?g.bottom=2:p<m&&(g.bottom=1)}else s&&(h.bottom=s.startStyle.bottom,g.bottom=s.endStyle.bottom);d.startStyle=h,d.endStyle=g}}_getVisibleRangesWithStyle(e,t,n){let o=(t.linesVisibleRangesForRange(e,!0)||[]).map(pJ);return!this._visibleRangesHaveGaps(o)&&this._roundedSelection&&this._enrichVisibleRangesWithStyle(t.visibleRange,o,n),o}_createSelectionPiece(e,t,n,i,o){return'<div class="cslr '+n+'" style="top:'+e.toString()+"px;bottom:"+t.toString()+"px;left:"+i.toString()+"px;width:"+o.toString()+'px;"></div>'}_actualRenderOneSelection(e,t,n,i){if(i.length===0)return;let o=!!i[0].ranges[0].startStyle,s=i[0].lineNumber,a=i[i.length-1].lineNumber;for(let l=0,d=i.length;l<d;l++){let c=i[l],p=c.lineNumber,h=p-t,g=n&&p===s?1:0,f=n&&p!==s&&p===a?1:0,m="",b="";for(let v=0,S=c.ranges.length;v<S;v++){let x=c.ranges[v];if(o){let w=x.startStyle,P=x.endStyle;if(w.top===1||w.bottom===1){m+=this._createSelectionPiece(g,f,r.SELECTION_CLASS_NAME,x.left-r.ROUNDED_PIECE_WIDTH,r.ROUNDED_PIECE_WIDTH);let R=r.EDITOR_BACKGROUND_CLASS_NAME;w.top===1&&(R+=" "+r.SELECTION_TOP_RIGHT),w.bottom===1&&(R+=" "+r.SELECTION_BOTTOM_RIGHT),m+=this._createSelectionPiece(g,f,R,x.left-r.ROUNDED_PIECE_WIDTH,r.ROUNDED_PIECE_WIDTH)}if(P.top===1||P.bottom===1){m+=this._createSelectionPiece(g,f,r.SELECTION_CLASS_NAME,x.left+x.width,r.ROUNDED_PIECE_WIDTH);let R=r.EDITOR_BACKGROUND_CLASS_NAME;P.top===1&&(R+=" "+r.SELECTION_TOP_LEFT),P.bottom===1&&(R+=" "+r.SELECTION_BOTTOM_LEFT),m+=this._createSelectionPiece(g,f,R,x.left+x.width,r.ROUNDED_PIECE_WIDTH)}}let E=r.SELECTION_CLASS_NAME;if(o){let w=x.startStyle,P=x.endStyle;w.top===0&&(E+=" "+r.SELECTION_TOP_LEFT),w.bottom===0&&(E+=" "+r.SELECTION_BOTTOM_LEFT),P.top===0&&(E+=" "+r.SELECTION_TOP_RIGHT),P.bottom===0&&(E+=" "+r.SELECTION_BOTTOM_RIGHT)}b+=this._createSelectionPiece(g,f,E,x.left,x.width)}e[h][0]+=m,e[h][1]+=b}}_previousFrameVisibleRangesWithStyle=[];prepareRender(e){let t=[],n=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber;for(let s=n;s<=i;s++){let a=s-n;t[a]=["",""]}let o=[];for(let s=0,a=this._selections.length;s<a;s++){let l=this._selections[s];if(l.isEmpty()){o[s]=null;continue}let d=this._getVisibleRangesWithStyle(l,e,this._previousFrameVisibleRangesWithStyle[s]);o[s]=d,this._actualRenderOneSelection(t,n,this._selections.length>1,d)}this._previousFrameVisibleRangesWithStyle=o,this._renderResult=t.map(([s,a])=>s+a)}render(e,t){if(!this._renderResult)return"";let n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}};to((r,e)=>{let t=r.getColor(h4);t&&!t.isTransparent()&&e.addRule(`.monaco-editor .view-line span.inline-selected-text { color: ${t}; }`)});function Wk(r){return r<0?-r:r}var Hk=class r extends hn{static BLINK_INTERVAL=500;_readOnly;_cursorBlinking;_cursorStyle;_cursorSmoothCaretAnimation;_selectionIsEmpty;_isComposingInput;_isVisible;_domNode;_startCursorBlinkAnimation;_cursorFlatBlinkInterval;_blinkingEnabled;_editorHasFocus;_primaryCursor;_secondaryCursors;_renderData;constructor(e){super(e);let t=this._context.configuration.options;this._readOnly=t.get(93),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._selectionIsEmpty=!0,this._isComposingInput=!1,this._isVisible=!1,this._primaryCursor=new nC(this._context,0),this._secondaryCursors=[],this._renderData=[],this._domNode=Ye(document.createElement("div")),this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true"),this._updateDomClassName(),this._domNode.appendChild(this._primaryCursor.getDomNode()),this._startCursorBlinkAnimation=new Pr,this._cursorFlatBlinkInterval=new Tu,this._blinkingEnabled=!1,this._editorHasFocus=!1,this._updateBlinking()}dispose(){super.dispose(),this._startCursorBlinkAnimation.dispose(),this._cursorFlatBlinkInterval.dispose()}getDomNode(){return this._domNode}onCompositionStart(e){return this._isComposingInput=!0,this._updateBlinking(),!0}onCompositionEnd(e){return this._isComposingInput=!1,this._updateBlinking(),!0}onConfigurationChanged(e){let t=this._context.configuration.options;this._readOnly=t.get(93),this._cursorBlinking=t.get(26),this._cursorStyle=t.get(28),this._cursorSmoothCaretAnimation=t.get(27),this._updateBlinking(),this._updateDomClassName(),this._primaryCursor.onConfigurationChanged(e);for(let n=0,i=this._secondaryCursors.length;n<i;n++)this._secondaryCursors[n].onConfigurationChanged(e);return!0}_onCursorPositionChanged(e,t,n){let i=this._secondaryCursors.length!==t.length||this._cursorSmoothCaretAnimation==="explicit"&&n!==3;if(this._primaryCursor.setPlurality(t.length?1:0),this._primaryCursor.onCursorPositionChanged(e,i),this._updateBlinking(),this._secondaryCursors.length<t.length){let o=t.length-this._secondaryCursors.length;for(let s=0;s<o;s++){let a=new nC(this._context,2);this._domNode.domNode.insertBefore(a.getDomNode().domNode,this._primaryCursor.getDomNode().domNode.nextSibling),this._secondaryCursors.push(a)}}else if(this._secondaryCursors.length>t.length){let o=this._secondaryCursors.length-t.length;for(let s=0;s<o;s++)this._domNode.removeChild(this._secondaryCursors[0].getDomNode()),this._secondaryCursors.splice(0,1)}for(let o=0;o<t.length;o++)this._secondaryCursors[o].onCursorPositionChanged(t[o],i)}onCursorStateChanged(e){let t=[];for(let i=0,o=e.selections.length;i<o;i++)t[i]=e.selections[i].getPosition();this._onCursorPositionChanged(t[0],t.slice(1),e.reason);let n=e.selections[0].isEmpty();return this._selectionIsEmpty!==n&&(this._selectionIsEmpty=n,this._updateDomClassName()),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onFocusChanged(e){return this._editorHasFocus=e.isFocused,this._updateBlinking(),!1}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return!0}onTokensChanged(e){let t=n=>{for(let i=0,o=e.ranges.length;i<o;i++)if(e.ranges[i].fromLineNumber<=n.lineNumber&&n.lineNumber<=e.ranges[i].toLineNumber)return!0;return!1};if(t(this._primaryCursor.getPosition()))return!0;for(let n of this._secondaryCursors)if(t(n.getPosition()))return!0;return!1}onZonesChanged(e){return!0}_getCursorBlinking(){return this._isComposingInput?0:this._editorHasFocus?this._readOnly?5:this._cursorBlinking:0}_updateBlinking(){this._startCursorBlinkAnimation.cancel(),this._cursorFlatBlinkInterval.cancel();let e=this._getCursorBlinking(),t=e===0,n=e===5;t?this._hide():this._show(),this._blinkingEnabled=!1,this._updateDomClassName(),!t&&!n&&(e===1?this._cursorFlatBlinkInterval.cancelAndSet(()=>{this._isVisible?this._hide():this._show()},r.BLINK_INTERVAL,Ee(this._domNode.domNode)):this._startCursorBlinkAnimation.setIfNotSet(()=>{this._blinkingEnabled=!0,this._updateDomClassName()},r.BLINK_INTERVAL))}_updateDomClassName(){this._domNode.setClassName(this._getClassName())}_getClassName(){let e="cursors-layer";switch(this._selectionIsEmpty||(e+=" has-selection"),this._cursorStyle){case 1:e+=" cursor-line-style";break;case 2:e+=" cursor-block-style";break;case 3:e+=" cursor-underline-style";break;case 4:e+=" cursor-line-thin-style";break;case 5:e+=" cursor-block-outline-style";break;case 6:e+=" cursor-underline-thin-style";break;default:e+=" cursor-line-style"}if(this._blinkingEnabled)switch(this._getCursorBlinking()){case 1:e+=" cursor-blink";break;case 2:e+=" cursor-smooth";break;case 3:e+=" cursor-phase";break;case 4:e+=" cursor-expand";break;case 5:e+=" cursor-solid";break;default:e+=" cursor-solid"}else e+=" cursor-solid";return(this._cursorSmoothCaretAnimation==="on"||this._cursorSmoothCaretAnimation==="explicit")&&(e+=" cursor-smooth-caret-animation"),e}_show(){this._primaryCursor.show();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].show();this._isVisible=!0}_hide(){this._primaryCursor.hide();for(let e=0,t=this._secondaryCursors.length;e<t;e++)this._secondaryCursors[e].hide();this._isVisible=!1}prepareRender(e){this._primaryCursor.prepareRender(e);for(let t=0,n=this._secondaryCursors.length;t<n;t++)this._secondaryCursors[t].prepareRender(e)}render(e){let t=[],n=0,i=this._primaryCursor.render(e);i&&(t[n++]=i);for(let o=0,s=this._secondaryCursors.length;o<s;o++){let a=this._secondaryCursors[o].render(e);a&&(t[n++]=a)}this._renderData=t}getLastRenderData(){return this._renderData}};to((r,e)=>{let t=[{class:".cursor",foreground:jf,background:g_},{class:".cursor-primary",foreground:m_,background:AK},{class:".cursor-secondary",foreground:f_,background:NK}];for(let n of t){let i=r.getColor(n.foreground);if(i){let o=r.getColor(n.background);o||(o=i.opposite()),e.addRule(`.monaco-editor .cursors-layer ${n.class} { background-color: ${i}; border-color: ${i}; color: ${o}; }`),id(r.type)&&e.addRule(`.monaco-editor .cursors-layer.has-selection ${n.class} { border-left: 1px solid ${o}; border-right: 1px solid ${o}; }`)}}});var pW=()=>{throw new Error("Invalid change accessor")},Uk=class extends hn{_zones;_lineHeight;_contentWidth;_contentLeft;domNode;marginDomNode;constructor(e){super(e);let t=this._context.configuration.options,n=t.get(147);this._lineHeight=t.get(68),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,this.domNode=Ye(document.createElement("div")),this.domNode.setClassName("view-zones"),this.domNode.setPosition("absolute"),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this.marginDomNode=Ye(document.createElement("div")),this.marginDomNode.setClassName("margin-view-zones"),this.marginDomNode.setPosition("absolute"),this.marginDomNode.setAttribute("role","presentation"),this.marginDomNode.setAttribute("aria-hidden","true"),this._zones={}}dispose(){super.dispose(),this._zones={}}_recomputeWhitespacesProps(){let e=this._context.viewLayout.getWhitespaces(),t=new Map;for(let i of e)t.set(i.id,i);let n=!1;return this._context.viewModel.changeWhitespace(i=>{let o=Object.keys(this._zones);for(let s=0,a=o.length;s<a;s++){let l=o[s],d=this._zones[l],c=this._computeWhitespaceProps(d.delegate);d.isInHiddenArea=c.isInHiddenArea;let p=t.get(l);p&&(p.afterLineNumber!==c.afterViewLineNumber||p.height!==c.heightInPx)&&(i.changeOneWhitespace(l,c.afterViewLineNumber,c.heightInPx),this._safeCallOnComputedHeight(d.delegate,c.heightInPx),n=!0)}}),n}onConfigurationChanged(e){let t=this._context.configuration.options,n=t.get(147);return this._lineHeight=t.get(68),this._contentWidth=n.contentWidth,this._contentLeft=n.contentLeft,e.hasChanged(68)&&this._recomputeWhitespacesProps(),!0}onLineMappingChanged(e){return this._recomputeWhitespacesProps()}onLinesDeleted(e){return!0}onScrollChanged(e){return e.scrollTopChanged||e.scrollWidthChanged}onZonesChanged(e){return!0}onLinesInserted(e){return!0}_getZoneOrdinal(e){return e.ordinal??e.afterColumn??1e4}_computeWhitespaceProps(e){if(e.afterLineNumber===0)return{isInHiddenArea:!1,afterViewLineNumber:0,heightInPx:this._heightInPixels(e),minWidthInPx:this._minWidthInPixels(e)};let t;if(typeof e.afterColumn<"u")t=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:e.afterColumn});else{let s=this._context.viewModel.model.validatePosition({lineNumber:e.afterLineNumber,column:1}).lineNumber;t=new F(s,this._context.viewModel.model.getLineMaxColumn(s))}let n;t.column===this._context.viewModel.model.getLineMaxColumn(t.lineNumber)?n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber+1,column:1}):n=this._context.viewModel.model.validatePosition({lineNumber:t.lineNumber,column:t.column+1});let i=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t,e.afterColumnAffinity,!0),o=e.showInHiddenAreas||this._context.viewModel.coordinatesConverter.modelPositionIsVisible(n);return{isInHiddenArea:!o,afterViewLineNumber:i.lineNumber,heightInPx:o?this._heightInPixels(e):0,minWidthInPx:this._minWidthInPixels(e)}}changeViewZones(e){let t=!1;return this._context.viewModel.changeWhitespace(n=>{let i={addZone:o=>(t=!0,this._addZone(n,o)),removeZone:o=>{o&&(t=this._removeZone(n,o)||t)},layoutZone:o=>{o&&(t=this._layoutZone(n,o)||t)}};hJ(e,i),i.addZone=pW,i.removeZone=pW,i.layoutZone=pW}),t}_addZone(e,t){let n=this._computeWhitespaceProps(t),o={whitespaceId:e.insertWhitespace(n.afterViewLineNumber,this._getZoneOrdinal(t),n.heightInPx,n.minWidthInPx),delegate:t,isInHiddenArea:n.isInHiddenArea,isVisible:!1,domNode:Ye(t.domNode),marginDomNode:t.marginDomNode?Ye(t.marginDomNode):null};return this._safeCallOnComputedHeight(o.delegate,n.heightInPx),o.domNode.setPosition("absolute"),o.domNode.domNode.style.width="100%",o.domNode.setDisplay("none"),o.domNode.setAttribute("monaco-view-zone",o.whitespaceId),this.domNode.appendChild(o.domNode),o.marginDomNode&&(o.marginDomNode.setPosition("absolute"),o.marginDomNode.domNode.style.width="100%",o.marginDomNode.setDisplay("none"),o.marginDomNode.setAttribute("monaco-view-zone",o.whitespaceId),this.marginDomNode.appendChild(o.marginDomNode)),this._zones[o.whitespaceId]=o,this.setShouldRender(),o.whitespaceId}_removeZone(e,t){if(this._zones.hasOwnProperty(t)){let n=this._zones[t];return delete this._zones[t],e.removeWhitespace(n.whitespaceId),n.domNode.removeAttribute("monaco-visible-view-zone"),n.domNode.removeAttribute("monaco-view-zone"),n.domNode.domNode.remove(),n.marginDomNode&&(n.marginDomNode.removeAttribute("monaco-visible-view-zone"),n.marginDomNode.removeAttribute("monaco-view-zone"),n.marginDomNode.domNode.remove()),this.setShouldRender(),!0}return!1}_layoutZone(e,t){if(this._zones.hasOwnProperty(t)){let n=this._zones[t],i=this._computeWhitespaceProps(n.delegate);return n.isInHiddenArea=i.isInHiddenArea,e.changeOneWhitespace(n.whitespaceId,i.afterViewLineNumber,i.heightInPx),this._safeCallOnComputedHeight(n.delegate,i.heightInPx),this.setShouldRender(),!0}return!1}shouldSuppressMouseDownOnViewZone(e){return this._zones.hasOwnProperty(e)?!!this._zones[e].delegate.suppressMouseDown:!1}_heightInPixels(e){return typeof e.heightInPx=="number"?e.heightInPx:typeof e.heightInLines=="number"?this._lineHeight*e.heightInLines:this._lineHeight}_minWidthInPixels(e){return typeof e.minWidthInPx=="number"?e.minWidthInPx:0}_safeCallOnComputedHeight(e,t){if(typeof e.onComputedHeight=="function")try{e.onComputedHeight(t)}catch(n){Be(n)}}_safeCallOnDomNodeTop(e,t){if(typeof e.onDomNodeTop=="function")try{e.onDomNodeTop(t)}catch(n){Be(n)}}prepareRender(e){}render(e){let t=e.viewportData.whitespaceViewportData,n={},i=!1;for(let s of t)this._zones[s.id].isInHiddenArea||(n[s.id]=s,i=!0);let o=Object.keys(this._zones);for(let s=0,a=o.length;s<a;s++){let l=o[s],d=this._zones[l],c=0,p=0,h="none";n.hasOwnProperty(l)?(c=n[l].verticalOffset-e.bigNumbersDelta,p=n[l].height,h="block",d.isVisible||(d.domNode.setAttribute("monaco-visible-view-zone","true"),d.isVisible=!0),this._safeCallOnDomNodeTop(d.delegate,e.getScrolledTopFromAbsoluteTop(n[l].verticalOffset))):(d.isVisible&&(d.domNode.removeAttribute("monaco-visible-view-zone"),d.isVisible=!1),this._safeCallOnDomNodeTop(d.delegate,e.getScrolledTopFromAbsoluteTop(-1e6))),d.domNode.setTop(c),d.domNode.setHeight(p),d.domNode.setDisplay(h),d.marginDomNode&&(d.marginDomNode.setTop(c),d.marginDomNode.setHeight(p),d.marginDomNode.setDisplay(h))}i&&(this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth)),this.marginDomNode.setWidth(this._contentLeft))}};function hJ(r,e){try{return r(e)}catch(t){Be(t)}}var zk=class extends Lr{_context;_options;_selection;_renderResult;constructor(e){super(),this._context=e,this._options=new Kk(this._context.configuration),this._selection=[],this._renderResult=null,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),this._renderResult=null,super.dispose()}onConfigurationChanged(e){let t=new Kk(this._context.configuration);return this._options.equals(t)?e.hasChanged(147):(this._options=t,!0)}onCursorStateChanged(e){return this._selection=e.selections,this._options.renderWhitespace==="selection"}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return e.scrollTopChanged}onZonesChanged(e){return!0}prepareRender(e){if(this._options.renderWhitespace==="none"){this._renderResult=null;return}let t=e.visibleRange.startLineNumber,i=e.visibleRange.endLineNumber-t+1,o=new Array(i);for(let a=0;a<i;a++)o[a]=!0;let s=this._context.viewModel.getMinimapLinesRenderingData(e.viewportData.startLineNumber,e.viewportData.endLineNumber,o);this._renderResult=[];for(let a=e.viewportData.startLineNumber;a<=e.viewportData.endLineNumber;a++){let l=a-e.viewportData.startLineNumber,d=s.data[l],c=null;if(this._options.renderWhitespace==="selection"){let p=this._selection;for(let h of p){if(h.endLineNumber<a||h.startLineNumber>a)continue;let g=h.startLineNumber===a?h.startColumn:d.minColumn,f=h.endLineNumber===a?h.endColumn:d.maxColumn;g<f&&(c||(c=[]),c.push(new Fb(g-1,f-1)))}}this._renderResult[l]=this._applyRenderWhitespace(e,a,c,d)}}_applyRenderWhitespace(e,t,n,i){if(this._options.renderWhitespace==="selection"&&!n||this._options.renderWhitespace==="trailing"&&i.continuesWithWrappedLine)return"";let o=this._context.theme.getColor(b_),s=this._options.renderWithSVG,a=i.content,l=this._options.stopRenderingLineAfter===-1?a.length:Math.min(this._options.stopRenderingLineAfter,a.length),d=i.continuesWithWrappedLine,c=i.minColumn-1,p=this._options.renderWhitespace==="boundary",h=this._options.renderWhitespace==="trailing",g=this._options.lineHeight,f=this._options.middotWidth,m=this._options.wsmiddotWidth,b=this._options.spaceWidth,v=Math.abs(m-b),S=Math.abs(f-b),x=v<S?11825:183,E=this._options.canUseHalfwidthRightwardsArrow,w="",P=!1,R=kn(a),O;R===-1?(P=!0,R=l,O=l):O=Ds(a);let M=0,K=n&&n[M],$=0;for(let Q=c;Q<l;Q++){let he=a.charCodeAt(Q);if(K&&Q>=K.endOffset&&(M++,K=n&&n[M]),he!==9&&he!==32||h&&!P&&Q<=O)continue;if(p&&Q>=R&&Q<=O&&he===32){let ce=Q-1>=0?a.charCodeAt(Q-1):0,se=Q+1<l?a.charCodeAt(Q+1):0;if(ce!==32&&se!==32)continue}if(p&&d&&Q===l-1){let ce=Q-1>=0?a.charCodeAt(Q-1):0;if(he===32&&ce!==32&&ce!==9)continue}if(n&&(!K||K.startOffset>Q||K.endOffset<=Q))continue;let De=e.visibleRangeForPosition(new F(t,Q+1));De&&(s?($=Math.max($,De.left),he===9?w+=this._renderArrow(g,b,De.left):w+=`<circle cx="${(De.left+b/2).toFixed(2)}" cy="${(g/2).toFixed(2)}" r="${(b/7).toFixed(2)}" />`):he===9?w+=`<div class="mwh" style="left:${De.left}px;height:${g}px;">${E?"\uFFEB":"\u2192"}</div>`:w+=`<div class="mwh" style="left:${De.left}px;height:${g}px;">${String.fromCharCode(x)}</div>`)}return s?($=Math.round($+b),`<svg style="bottom:0;position:absolute;width:${$}px;height:${g}px" viewBox="0 0 ${$} ${g}" xmlns="http://www.w3.org/2000/svg" fill="${o}">`+w+"</svg>"):w}_renderArrow(e,t,n){let i=t/7,o=t,s=e/2,a=n,l={x:0,y:i/2},d={x:100/125*o,y:l.y},c={x:d.x-.2*d.x,y:d.y+.2*d.x},p={x:c.x+.1*d.x,y:c.y+.1*d.x},h={x:p.x+.35*d.x,y:p.y-.35*d.x},g={x:h.x,y:-h.y},f={x:p.x,y:-p.y},m={x:c.x,y:-c.y},b={x:d.x,y:-d.y},v={x:l.x,y:-l.y};return`<path d="M ${[l,d,c,p,h,g,f,m,b,v].map(E=>`${(a+E.x).toFixed(2)} ${(s+E.y).toFixed(2)}`).join(" L ")}" />`}render(e,t){if(!this._renderResult)return"";let n=t-e;return n<0||n>=this._renderResult.length?"":this._renderResult[n]}},Kk=class{renderWhitespace;renderWithSVG;spaceWidth;middotWidth;wsmiddotWidth;canUseHalfwidthRightwardsArrow;lineHeight;stopRenderingLineAfter;constructor(e){let t=e.options,n=t.get(51),i=t.get(39);i==="off"?(this.renderWhitespace="none",this.renderWithSVG=!1):i==="svg"?(this.renderWhitespace=t.get(101),this.renderWithSVG=!0):(this.renderWhitespace=t.get(101),this.renderWithSVG=!1),this.spaceWidth=n.spaceWidth,this.middotWidth=n.middotWidth,this.wsmiddotWidth=n.wsmiddotWidth,this.canUseHalfwidthRightwardsArrow=n.canUseHalfwidthRightwardsArrow,this.lineHeight=t.get(68),this.stopRenderingLineAfter=t.get(119)}equals(e){return this.renderWhitespace===e.renderWhitespace&&this.renderWithSVG===e.renderWithSVG&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineHeight===e.lineHeight&&this.stopRenderingLineAfter===e.stopRenderingLineAfter}};var rv=class extends hn{};var hW=class{_onDidChange=new T;onDidChange=this._onDidChange.event;_enabled=!0;get enabled(){return this._enabled}enable(){this._enabled=!0,this._onDidChange.fire()}disable(){this._enabled=!1,this._onDidChange.fire()}},gW=new hW;var fW=class{constructor(e,t,n,i,o){this._context=e;this.modelLineNumber=t;this.distanceToModelLineStart=n;this.widthOfHiddenLineTextBefore=i;this.distanceToModelLineEnd=o}_visibleTextAreaBrand=void 0;startPosition=null;endPosition=null;visibleTextareaStart=null;visibleTextareaEnd=null;_previousPresentation=null;prepareRender(e){let t=new F(this.modelLineNumber,this.distanceToModelLineStart+1),n=new F(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(e?this._previousPresentation=e:this._previousPresentation={foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}},mW=yi,sv=class extends rv{constructor(t,n,i,o,s){super(t);this._keybindingService=o;this._instantiationService=s;this._viewController=n,this._visibleRangeProvider=i,this._scrollLeft=0,this._scrollTop=0;let a=this._context.configuration.options,l=a.get(147);this._setAccessibilityOptions(a),this._contentLeft=l.contentLeft,this._contentWidth=l.contentWidth,this._contentHeight=l.height,this._fontInfo=a.get(51),this._lineHeight=a.get(68),this._emptySelectionClipboard=a.get(38),this._copyWithSyntaxHighlighting=a.get(25),this._visibleTextArea=null,this._selections=[new ze(1,1,1,1)],this._modelSelections=[new ze(1,1,1,1)],this._lastRenderPosition=null,this.textArea=Ye(document.createElement("textarea")),zi.write(this.textArea,7),this.textArea.setClassName(`inputarea ${Uc}`),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");let{tabSize:d}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize=`${d*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",dC(a,this._keybindingService)),this.textArea.setAttribute("aria-required",a.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(a.get(126))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",u("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",a.get(93)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=Ye(document.createElement("div")),this.textAreaCover.setPosition("absolute");let c={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:g=>this._context.viewModel.getLineMaxColumn(g),getValueInRange:(g,f)=>this._context.viewModel.getValueInRange(g,f),getValueLengthInRange:(g,f)=>this._context.viewModel.getValueLengthInRange(g,f),modifyPosition:(g,f)=>this._context.viewModel.modifyPosition(g,f)},p={getDataToCopy:()=>ak(this._context.viewModel,this._modelSelections,this._emptySelectionClipboard,this._copyWithSyntaxHighlighting),getScreenReaderContent:()=>{if(this._accessibilitySupport===1){let f=this._selections[0];if(Pe&&f.isEmpty()){let b=f.getStartPosition(),v=this._getWordBeforePosition(b);if(v.length===0&&(v=this._getCharacterBeforePosition(b)),v.length>0)return new ji(v,v.length,v.length,D.fromPositions(b),0)}if(Pe&&!f.isEmpty()&&c.getValueLengthInRange(f,0)<500){let b=c.getValueInRange(f,0);return new ji(b,0,b.length,f,0)}if(Or&&!f.isEmpty()){let b="vscode-placeholder";return new ji(b,0,b.length,null,void 0)}return ji.EMPTY}if(x1){let f=this._selections[0];if(f.isEmpty()){let m=f.getStartPosition(),[b,v]=this._getAndroidWordAtPosition(m);if(b.length>0)return new ji(b,v,v,D.fromPositions(m),0)}return ji.EMPTY}let g=Zb.fromEditorSelection(c,this._selections[0],this._accessibilityPageSize,this._accessibilitySupport===0);return ji.fromScreenReaderContentState(g)},deduceModelPosition:(g,f,m)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(g,f,m)},h=this._register(new lk(this.textArea.domNode));this._textAreaInput=this._register(this._instantiationService.createInstance(Jb,p,h,uo,{isAndroid:x1,isChrome:mu,isFirefox:yi,isSafari:Or})),this._register(this._textAreaInput.onKeyDown(g=>{this._viewController.emitKeyDown(g)})),this._register(this._textAreaInput.onKeyUp(g=>{this._viewController.emitKeyUp(g)})),this._register(this._textAreaInput.onPaste(g=>{let f=!1,m=null,b=null;g.metadata&&(f=this._emptySelectionClipboard&&!!g.metadata.isFromEmptySelection,m=typeof g.metadata.multicursorText<"u"?g.metadata.multicursorText:null,b=g.metadata.mode),this._viewController.paste(g.text,f,m,b)})),this._register(this._textAreaInput.onCut(()=>{this._viewController.cut()})),this._register(this._textAreaInput.onType(g=>{g.replacePrevCharCnt||g.replaceNextCharCnt||g.positionDelta?(jr&&console.log(` => compositionType: <<${g.text}>>, ${g.replacePrevCharCnt}, ${g.replaceNextCharCnt}, ${g.positionDelta}`),this._viewController.compositionType(g.text,g.replacePrevCharCnt,g.replaceNextCharCnt,g.positionDelta)):(jr&&console.log(` => type: <<${g.text}>>`),this._viewController.type(g.text))})),this._register(this._textAreaInput.onSelectionChangeRequest(g=>{this._viewController.setSelection(g)})),this._register(this._textAreaInput.onCompositionStart(g=>{let f=this.textArea.domNode,m=this._modelSelections[0],{distanceToModelLineStart:b,widthOfHiddenTextBefore:v}=(()=>{let x=f.value.substring(0,Math.min(f.selectionStart,f.selectionEnd)),E=x.lastIndexOf(`
`),w=x.substring(E+1),P=w.lastIndexOf("	"),R=w.length-P-1,O=m.getStartPosition(),M=Math.min(O.column-1,R),K=O.column-1-M,$=w.substring(0,w.length-M),{tabSize:Q}=this._context.viewModel.model.getOptions(),he=gJ(this.textArea.domNode.ownerDocument,$,this._fontInfo,Q);return{distanceToModelLineStart:K,widthOfHiddenTextBefore:he}})(),{distanceToModelLineEnd:S}=(()=>{let x=f.value.substring(Math.max(f.selectionStart,f.selectionEnd)),E=x.indexOf(`
`),w=E===-1?x:x.substring(0,E),P=w.indexOf("	"),R=P===-1?w.length:w.length-P-1,O=m.getEndPosition(),M=Math.min(this._context.viewModel.model.getLineMaxColumn(O.lineNumber)-O.column,R);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(O.lineNumber)-O.column-M}})();this._context.viewModel.revealRange("keyboard",!0,D.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new fW(this._context,m.startLineNumber,b,v,S),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName(`inputarea ${Uc} ime-input`),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(this._textAreaInput.onCompositionUpdate(g=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())})),this._register(this._textAreaInput.onCompositionEnd(()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName(`inputarea ${Uc}`),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()})),this._register(this._textAreaInput.onFocus(()=>{this._context.viewModel.setHasFocus(!0)})),this._register(this._textAreaInput.onBlur(()=>{this._context.viewModel.setHasFocus(!1)})),this._register(gW.onDidChange(()=>{this._ensureReadOnlyAttribute()}))}_viewController;_visibleRangeProvider;_scrollLeft;_scrollTop;_accessibilitySupport;_accessibilityPageSize;_textAreaWrapping;_textAreaWidth;_contentLeft;_contentWidth;_contentHeight;_fontInfo;_lineHeight;_emptySelectionClipboard;_copyWithSyntaxHighlighting;_visibleTextArea;_selections;_modelSelections;_lastRenderPosition;textArea;textAreaCover;_textAreaInput;get domNode(){return this.textArea}appendTo(t){t.appendChild(this.textArea),t.appendChild(this.textAreaCover)}writeScreenReaderContent(t){this._textAreaInput.writeNativeTextAreaContent(t)}dispose(){super.dispose(),this.textArea.domNode.remove(),this.textAreaCover.domNode.remove()}_getAndroidWordAtPosition(t){let n='`~!@#$%^&*()-=+[{]}\\|;:",.<>/?',i=this._context.viewModel.getLineContent(t.lineNumber),o=Yl(n,[]),s=!0,a=t.column,l=!0,d=t.column,c=0;for(;c<50&&(s||l);){if(s&&a<=1&&(s=!1),s){let p=i.charCodeAt(a-2);o.get(p)!==0?s=!1:a--}if(l&&d>i.length&&(l=!1),l){let p=i.charCodeAt(d-1);o.get(p)!==0?l=!1:d++}c++}return[i.substring(a-1,d-1),t.column-a]}_getWordBeforePosition(t){let n=this._context.viewModel.getLineContent(t.lineNumber),i=Yl(this._context.configuration.options.get(133),[]),o=t.column,s=0;for(;o>1;){let a=n.charCodeAt(o-2);if(i.get(a)!==0||s>50)return n.substring(o-1,t.column-1);s++,o--}return n.substring(0,t.column-1)}_getCharacterBeforePosition(t){if(t.column>1){let i=this._context.viewModel.getLineContent(t.lineNumber).charAt(t.column-2);if(!mn(i.charCodeAt(0)))return i}return""}_setAccessibilityOptions(t){this._accessibilitySupport=t.get(2);let n=t.get(3);this._accessibilitySupport===2&&n===$l.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=n;let o=t.get(147).wrappingColumn;if(o!==-1&&this._accessibilitySupport!==1){let s=t.get(51);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(o*s.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=mW?0:1}onConfigurationChanged(t){let n=this._context.configuration.options,i=n.get(147);this._setAccessibilityOptions(n),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._contentHeight=i.height,this._fontInfo=n.get(51),this._lineHeight=n.get(68),this._emptySelectionClipboard=n.get(38),this._copyWithSyntaxHighlighting=n.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");let{tabSize:o}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize=`${o*this._fontInfo.spaceWidth}px`,this.textArea.setAttribute("aria-label",dC(n,this._keybindingService)),this.textArea.setAttribute("aria-required",n.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(n.get(126))),(t.hasChanged(34)||t.hasChanged(93))&&this._ensureReadOnlyAttribute(),t.hasChanged(2)&&this._textAreaInput.writeNativeTextAreaContent("strategy changed"),!0}onCursorStateChanged(t){return this._selections=t.selections.slice(0),this._modelSelections=t.modelSelections.slice(0),this._textAreaInput.writeNativeTextAreaContent("selection changed"),!0}onDecorationsChanged(t){return!0}onFlushed(t){return!0}onLinesChanged(t){return!0}onLinesDeleted(t){return!0}onLinesInserted(t){return!0}onScrollChanged(t){return this._scrollLeft=t.scrollLeft,this._scrollTop=t.scrollTop,!0}onZonesChanged(t){return!0}isFocused(){return this._textAreaInput.isFocused()}focus(){this._textAreaInput.focusTextArea()}refreshFocusState(){this._textAreaInput.refreshFocusState()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(t){t.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",t.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),t.role&&this.textArea.setAttribute("role",t.role)}_ensureReadOnlyAttribute(){let t=this._context.configuration.options;!gW.enabled||t.get(34)&&t.get(93)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}_primaryCursorPosition=new F(1,1);_primaryCursorVisibleRange=null;prepareRender(t){this._primaryCursorPosition=new F(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=t.visibleRangeForPosition(this._primaryCursorPosition),this._visibleTextArea?.prepareRender(t)}render(t){this._textAreaInput.writeNativeTextAreaContent("render"),this._render()}_render(){if(this._visibleTextArea){let i=this._visibleTextArea.visibleTextareaStart,o=this._visibleTextArea.visibleTextareaEnd,s=this._visibleTextArea.startPosition,a=this._visibleTextArea.endPosition;if(s&&a&&i&&o&&o.left>=this._scrollLeft&&i.left<=this._scrollLeft+this._contentWidth){let l=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,d=cC(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart)),c=this._visibleTextArea.widthOfHiddenLineTextBefore,p=this._contentLeft+i.left-this._scrollLeft,h=o.left-i.left+1;if(p<this._contentLeft){let S=this._contentLeft-p;p+=S,c+=S,h-=S}h>this._contentWidth&&(h=this._contentWidth);let g=this._context.viewModel.getViewLineData(s.lineNumber),f=g.tokens.findTokenIndexAtOffset(s.column-1),m=g.tokens.findTokenIndexAtOffset(a.column-1),b=f===m,v=this._visibleTextArea.definePresentation(b?g.tokens.getPresentation(f):null);this.textArea.domNode.scrollTop=d*this._lineHeight,this.textArea.domNode.scrollLeft=c,this._doRender({lastRenderPosition:null,top:l,left:p,width:h,height:this._lineHeight,useCover:!1,color:(Xo.getColorMap()||[])[v.foreground],italic:v.italic,bold:v.bold,underline:v.underline,strikethrough:v.strikethrough})}return}if(!this._primaryCursorVisibleRange){this._renderAtTopLeft();return}let t=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(t<this._contentLeft||t>this._contentLeft+this._contentWidth){this._renderAtTopLeft();return}let n=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(n<0||n>this._contentHeight){this._renderAtTopLeft();return}if(Pe||this._accessibilitySupport===2){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:n,left:this._textAreaWrapping?this._contentLeft:t,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;let i=this._textAreaInput.textAreaState.newlineCountBeforeSelection??cC(this.textArea.domNode.value.substring(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=i*this._lineHeight;return}this._doRender({lastRenderPosition:this._primaryCursorPosition,top:n,left:this._textAreaWrapping?this._contentLeft:t,width:this._textAreaWidth,height:mW?0:1,useCover:!1})}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:mW?0:1,useCover:!0})}_doRender(t){this._lastRenderPosition=t.lastRenderPosition;let n=this.textArea,i=this.textAreaCover;Un(n,this._fontInfo),n.setTop(t.top),n.setLeft(t.left),n.setWidth(t.width),n.setHeight(t.height),n.setColor(t.color?H.Format.CSS.formatHex(t.color):""),n.setFontStyle(t.italic?"italic":""),t.bold&&n.setFontWeight("bold"),n.setTextDecoration(`${t.underline?" underline":""}${t.strikethrough?" line-through":""}`),i.setTop(t.useCover?t.top:0),i.setLeft(t.useCover?t.left:0),i.setWidth(t.useCover?t.width:0),i.setHeight(t.useCover?t.height:0);let o=this._context.configuration.options;o.get(58)?i.setClassName("monaco-editor-background textAreaCover "+iv.OUTER_CLASS_NAME):o.get(69).renderType!==0?i.setClassName("monaco-editor-background textAreaCover "+nv.CLASS_NAME):i.setClassName("monaco-editor-background textAreaCover")}};sv=_([y(3,_n),y(4,we)],sv);function gJ(r,e,t,n){if(e.length===0)return 0;let i=r.createElement("div");i.style.position="absolute",i.style.top="-50000px",i.style.width="50000px";let o=r.createElement("span");Un(o,t),o.style.whiteSpace="pre",o.style.tabSize=`${n*t.spaceWidth}px`,o.append(e),i.appendChild(o),r.body.appendChild(i);let s=o.offsetWidth;return i.remove(),s}var Gk=class extends N{constructor(t,n){super();this._domNode=t;this._onFocusChange=n;this._register(U(this._domNode,"focus",()=>this._handleFocusedChanged(!0))),this._register(U(this._domNode,"blur",()=>this._handleFocusedChanged(!1)))}_isFocused=!1;_handleFocusedChanged(t){this._isFocused!==t&&(this._isFocused=t,this._onFocusChange(this._isFocused))}focus(){this._domNode.focus()}get isFocused(){return this._isFocused}};function av(r,e,t,n){return r.addEventListener(e,t,n),{dispose(){r.removeEventListener(e,t)}}}var lv=class{constructor(e,t,n){this._domNode=e;this._context=t;this._keybindingService=n;this._updateConfigurationSettings(),this._updateDomAttributes()}_contentLeft=1;_contentWidth=1;_lineHeight=1;_fontInfo;_accessibilitySupport=0;_accessibilityPageSize=1;_primarySelection=new ze(1,1,1,1);_screenReaderContentState;onConfigurationChanged(e){this._updateConfigurationSettings(),this._updateDomAttributes(),e.hasChanged(2)&&this.writeScreenReaderContent()}_updateConfigurationSettings(){let e=this._context.configuration.options,t=e.get(147);this._contentLeft=t.contentLeft,this._contentWidth=t.contentWidth,this._fontInfo=e.get(51),this._lineHeight=e.get(68),this._accessibilitySupport=e.get(2),this._accessibilityPageSize=e.get(3)}_updateDomAttributes(){let e=this._context.configuration.options;this._domNode.domNode.setAttribute("aria-label",dC(e,this._keybindingService));let t=this._context.viewModel.model.getOptions().tabSize,n=e.get(51).spaceWidth;this._domNode.domNode.style.tabSize=`${t*n}px`}onCursorStateChanged(e){this._primarySelection=e.selections[0]??new ze(1,1,1,1)}prepareRender(e){this.writeScreenReaderContent()}render(e){if(!this._screenReaderContentState)return;Un(this._domNode,this._fontInfo);let t=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primarySelection.positionLineNumber),n=this._context.viewLayout.getCurrentScrollTop(),i=t-n;this._domNode.setTop(i),this._domNode.setLeft(this._contentLeft),this._domNode.setWidth(this._contentWidth),this._domNode.setHeight(this._lineHeight);let o=this._screenReaderContentState.value.substring(0,this._screenReaderContentState.selectionStart),s=cC(o);this._domNode.domNode.scrollTop=s*this._lineHeight}setAriaOptions(){}writeScreenReaderContent(){this._screenReaderContentState=this._getScreenReaderContentState(),this._screenReaderContentState&&(this._domNode.domNode.textContent!==this._screenReaderContentState.value&&(this._domNode.domNode.textContent=this._screenReaderContentState.value),this._setSelectionOfScreenReaderContent(this._screenReaderContentState.selectionStart,this._screenReaderContentState.selectionEnd))}_getScreenReaderContentState(){let e=this._accessibilitySupport===1?1:this._accessibilityPageSize,t={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:n=>this._context.viewModel.getLineMaxColumn(n),getValueInRange:(n,i)=>this._context.viewModel.getValueInRange(n,i),getValueLengthInRange:(n,i)=>this._context.viewModel.getValueLengthInRange(n,i),modifyPosition:(n,i)=>this._context.viewModel.modifyPosition(n,i)};return Zb.fromEditorSelection(t,this._primarySelection,e,this._accessibilitySupport===0)}_setSelectionOfScreenReaderContent(e,t){let i=Hl().document.getSelection();if(!i)return;let o=this._domNode.domNode.firstChild;if(!o)return;let s=Hl().document.activeElement,a=new globalThis.Range;a.setStart(o,e),a.setEnd(o,t),i.removeAllRanges(),i.addRange(a),Yn(s)&&s.focus()}};lv=_([y(2,_n)],lv);var dv=class extends rv{domNode;_editContext;_screenReaderSupport;_parent;_decorations=[];_renderingContext;_primarySelection=new ze(1,1,1,1);_textStartPositionWithinEditor=new F(1,1);_compositionRangeWithinEditor;_focusTracker;constructor(e,t,n,i){super(e),this.domNode=new ch(document.createElement("div")),this.domNode.setClassName("native-edit-context"),this._updateDomAttributes(),this._focusTracker=this._register(new Gk(this.domNode.domNode,o=>this._context.viewModel.setHasFocus(o))),this._editContext=new EditContext,this.domNode.domNode.editContext=this._editContext,this._screenReaderSupport=n.createInstance(lv,this.domNode,e),this._register(U(this.domNode.domNode,"copy",()=>this._ensureClipboardGetsEditorSelection(i))),this._register(U(this.domNode.domNode,"cut",()=>{this._ensureClipboardGetsEditorSelection(i),t.cut()})),this._register(U(this.domNode.domNode,"keyup",o=>t.emitKeyUp(new it(o)))),this._register(U(this.domNode.domNode,"keydown",async o=>{let s=new it(o);s.keyCode===114&&s.stopPropagation(),s.keyCode===3&&this._onType(t,{text:`
`,replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0}),t.emitKeyDown(s)})),this._register(av(this._editContext,"textformatupdate",o=>this._handleTextFormatUpdate(o))),this._register(av(this._editContext,"characterboundsupdate",o=>this._updateCharacterBounds())),this._register(av(this._editContext,"textupdate",o=>{let s=this._compositionRangeWithinEditor;if(s){let a=this._context.viewModel.getPrimaryCursorState().modelState.position,l=D.fromPositions(s.getStartPosition(),a);this._compositionRangeWithinEditor=l}this._emitTypeEvent(t,o),this._screenReaderSupport.writeScreenReaderContent()})),this._register(av(this._editContext,"compositionstart",o=>{let s=this._context.viewModel.getPrimaryCursorState().modelState.position,a=D.fromPositions(s,s);this._compositionRangeWithinEditor=a,t.compositionStart(),this._context.viewModel.onCompositionStart()})),this._register(av(this._editContext,"compositionend",o=>{this._compositionRangeWithinEditor=void 0,t.compositionEnd(),this._context.viewModel.onCompositionEnd()}))}dispose(){super.dispose(),this.domNode.domNode.remove()}appendTo(e){e.appendChild(this.domNode),this._parent=e.domNode}setAriaOptions(){this._screenReaderSupport.setAriaOptions()}getLastRenderData(){return this._primarySelection.getPosition()}prepareRender(e){this._renderingContext=e,this._screenReaderSupport.prepareRender(e),this._updateEditContext(),this._updateSelectionAndControlBounds(),this._updateCharacterBounds()}render(e){this._screenReaderSupport.render(e)}onCursorStateChanged(e){return this._primarySelection=e.modelSelections[0]??new ze(1,1,1,1),this._screenReaderSupport.onCursorStateChanged(e),!0}onConfigurationChanged(e){return this._screenReaderSupport.onConfigurationChanged(e),this._updateDomAttributes(),!0}writeScreenReaderContent(){this._screenReaderSupport.writeScreenReaderContent()}isFocused(){return this._focusTracker.isFocused}focus(){this._focusTracker.focus()}refreshFocusState(){}_updateDomAttributes(){let e=this._context.configuration.options;this.domNode.domNode.setAttribute("tabindex",String(e.get(126)))}_updateEditContext(){let e=this._getNewEditContextState();this._editContext.updateText(0,Number.MAX_SAFE_INTEGER,e.text),this._editContext.updateSelection(e.selectionStartOffset,e.selectionEndOffset),this._textStartPositionWithinEditor=e.textStartPositionWithinEditor}_emitTypeEvent(e,t){if(!this._editContext)return;let n=this._context.viewModel.model,i=n.getOffsetAt(this._textStartPositionWithinEditor),o=n.getOffsetAt(this._primarySelection.getEndPosition()),s=n.getOffsetAt(this._primarySelection.getStartPosition()),a=o-i,l=s-i,d=0,c=0;t.updateRangeEnd>a&&(d=t.updateRangeEnd-a),t.updateRangeStart<l&&(c=l-t.updateRangeStart);let p="";l<t.updateRangeStart&&(p+=this._editContext.text.substring(l,t.updateRangeStart)),p+=t.text,a>t.updateRangeEnd&&(p+=this._editContext.text.substring(t.updateRangeEnd,a));let h={text:p,replacePrevCharCnt:c,replaceNextCharCnt:d,positionDelta:0};this._onType(e,h);let g=l-c+p.length;this._updateCursorStatesAfterType(g,t.selectionStart,t.selectionEnd)}_onType(e,t){t.replacePrevCharCnt||t.replaceNextCharCnt||t.positionDelta?e.compositionType(t.text,t.replacePrevCharCnt,t.replaceNextCharCnt,t.positionDelta):e.type(t.text)}_updateCursorStatesAfterType(e,t,n){let i=t-e,o=n-e,l=this._context.viewModel.getCursorStates().map(d=>d.modelState.position).map(d=>{let c=d.lineNumber,p=d.column;return new ze(c,p+i,c,p+o)}).map(d=>nt.fromModelSelection(d));this._context.viewModel.setCursorStates("editContext",3,l)}_getNewEditContextState(){let e=this._primarySelection.startColumn-1,t=0;for(let a=this._primarySelection.startLineNumber;a<=this._primarySelection.endLineNumber;a++)a===this._primarySelection.endLineNumber?t+=this._primarySelection.endColumn-1:t+=this._context.viewModel.model.getLineMaxColumn(a);let n=this._context.viewModel.model.getLineMaxColumn(this._primarySelection.endLineNumber),i=new D(this._primarySelection.startLineNumber,1,this._primarySelection.endLineNumber,n),o=this._context.viewModel.model.getValueInRange(i,0),s=i.getStartPosition();return{text:o,selectionStartOffset:e,selectionEndOffset:t,textStartPositionWithinEditor:s}}_handleTextFormatUpdate(e){if(!this._editContext)return;let t=e.getTextFormats(),n=this._textStartPositionWithinEditor,i=[];t.forEach(o=>{let s=this._context.viewModel.model,a=s.getOffsetAt(n),l=s.getPositionAt(a+o.rangeStart),d=s.getPositionAt(a+o.rangeEnd),c=D.fromPositions(l,d),p=["edit-context-format-decoration",`underline-style-${o.underlineStyle.toLowerCase()}`,`underline-thickness-${o.underlineThickness.toLowerCase()}`];i.push({range:c,options:{description:"textFormatDecoration",inlineClassName:p.join(" ")}})}),this._decorations=this._context.viewModel.model.deltaDecorations(this._decorations,i)}_updateSelectionAndControlBounds(){if(!this._parent)return;let e=this._context.configuration.options,t=e.get(68),n=e.get(147).contentLeft,i=this._parent.getBoundingClientRect(),o=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primarySelection.startLineNumber),s=this._context.viewLayout.getCurrentScrollTop(),a=i.top+o-s,l=(this._primarySelection.endLineNumber-this._primarySelection.startLineNumber+1)*t,d=i.left+n,c;if(this._primarySelection.isEmpty()){if(this._renderingContext){let g=this._renderingContext.linesVisibleRangesForRange(this._primarySelection,!0)??[];g.length>0&&(d+=Math.min(...g.map(f=>Math.min(...f.ranges.map(m=>m.left)))))}c=e.get(51).typicalHalfwidthCharacterWidth/2}else c=i.width-n;let p=new DOMRect(d,a,c,l),h=p;this._editContext.updateControlBounds(h),this._editContext.updateSelectionBounds(p)}_updateCharacterBounds(){if(!this._parent||!this._compositionRangeWithinEditor)return;let e=this._context.configuration.options,t=e.get(68),n=e.get(147).contentLeft,i=this._parent.getBoundingClientRect(),o=this._compositionRangeWithinEditor,s=this._context.viewLayout.getVerticalOffsetForLineNumber(o.startLineNumber),a=this._context.viewLayout.getCurrentScrollTop(),l=i.top+s-a,d=[];if(this._renderingContext){let f=this._renderingContext.linesVisibleRangesForRange(o,!0)??[];for(let m of f)for(let b of m.ranges)d.push(new DOMRect(i.left+n+b.left,l,b.width,t))}let c=this._context.viewModel.model,p=c.getOffsetAt(this._textStartPositionWithinEditor),g=c.getOffsetAt(o.getStartPosition())-p;this._editContext.updateCharacterBounds(g,d)}_ensureClipboardGetsEditorSelection(e){let t=this._context.configuration.options,n=t.get(38),i=t.get(25),o=this._context.viewModel.getCursorStates().map(l=>l.modelState.selection),s=ak(this._context.viewModel,o,n,i),a={version:1,isFromEmptySelection:s.isFromEmptySelection,multicursorText:s.multicursorText,mode:s.mode};Pg.INSTANCE.set(yi?s.text.replace(/\r\n/g,`
`):s.text,a),e.writeText(s.text)}};dv=_([y(2,we),y(3,ma)],dv);var cv=class extends da{constructor(t,n,i,o,s,a,l){super();this._instantiationService=l;this._selections=[new ze(1,1,1,1)],this._renderAnimationFrame=null;let d=new sk(n,o,s,t);this._context=new RL(n,i,o),this._context.addEventHandler(this),this._viewParts=[];let c=this._context.configuration.options.get(37);this._editContext=c?this._instantiationService.createInstance(dv,this._context,d):this._instantiationService.createInstance(sv,this._context,d,this._createTextAreaHandlerHelper()),this._viewParts.push(this._editContext),this._linesContent=Ye(document.createElement("div")),this._linesContent.setClassName("lines-content monaco-editor-background"),this._linesContent.setPosition("absolute"),this.domNode=Ye(document.createElement("div")),this.domNode.setClassName(this._getEditorClassName()),this.domNode.setAttribute("role","code"),this._overflowGuardContainer=Ye(document.createElement("div")),zi.write(this._overflowGuardContainer,3),this._overflowGuardContainer.setClassName("overflow-guard"),this._scrollbar=new Sk(this._context,this._linesContent,this.domNode,this._overflowGuardContainer),this._viewParts.push(this._scrollbar),this._viewLines=new Ek(this._context,this._linesContent),this._viewZones=new Uk(this._context),this._viewParts.push(this._viewZones);let p=new Ak(this._context);this._viewParts.push(p);let h=new Bk(this._context);this._viewParts.push(h);let g=new pk(this._context);this._viewParts.push(g),g.addDynamicOverlay(new vk(this._context)),g.addDynamicOverlay(new Vk(this._context)),g.addDynamicOverlay(new xk(this._context)),g.addDynamicOverlay(new Ik(this._context)),g.addDynamicOverlay(new zk(this._context));let f=new hk(this._context);this._viewParts.push(f),f.addDynamicOverlay(new yk(this._context)),f.addDynamicOverlay(new wk(this._context)),f.addDynamicOverlay(new Tk(this._context)),f.addDynamicOverlay(new nv(this._context)),this._glyphMarginWidgets=new Ck(this._context),this._viewParts.push(this._glyphMarginWidgets);let m=new iv(this._context);m.getDomNode().appendChild(this._viewZones.marginDomNode),m.getDomNode().appendChild(f.getDomNode()),m.getDomNode().appendChild(this._glyphMarginWidgets.domNode),this._viewParts.push(m),this._contentWidgets=new mk(this._context,this.domNode),this._viewParts.push(this._contentWidgets),this._viewCursors=new Hk(this._context),this._viewParts.push(this._viewCursors),this._overlayWidgets=new Pk(this._context,this.domNode),this._viewParts.push(this._overlayWidgets);let b=new Fk(this._context);this._viewParts.push(b);let v=new gk(this._context);this._viewParts.push(v);let S=new Mk(this._context);if(this._viewParts.push(S),p){let x=this._scrollbar.getOverviewRulerLayoutInfo();x.parent.insertBefore(p.getDomNode(),x.insertBefore)}this._linesContent.appendChild(g.getDomNode()),this._linesContent.appendChild(b.domNode),this._linesContent.appendChild(this._viewZones.domNode),this._linesContent.appendChild(this._viewLines.getDomNode()),this._linesContent.appendChild(this._contentWidgets.domNode),this._linesContent.appendChild(this._viewCursors.getDomNode()),this._overflowGuardContainer.appendChild(m.getDomNode()),this._overflowGuardContainer.appendChild(this._scrollbar.getDomNode()),this._overflowGuardContainer.appendChild(h.getDomNode()),this._editContext.appendTo(this._overflowGuardContainer),this._overflowGuardContainer.appendChild(this._overlayWidgets.getDomNode()),this._overflowGuardContainer.appendChild(S.getDomNode()),this._overflowGuardContainer.appendChild(v.domNode),this.domNode.appendChild(this._overflowGuardContainer),a?(a.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode.domNode),a.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode.domNode)):(this.domNode.appendChild(this._contentWidgets.overflowingContentWidgetsDomNode),this.domNode.appendChild(this._overlayWidgets.overflowingOverlayWidgetsDomNode)),this._applyLayout(),this._pointerHandler=this._register(new ck(this._context,d,this._createPointerHandlerHelper()))}_scrollbar;_context;_selections;_viewLines;_viewZones;_contentWidgets;_overlayWidgets;_glyphMarginWidgets;_viewCursors;_viewParts;_editContext;_pointerHandler;_linesContent;domNode;_overflowGuardContainer;_shouldRecomputeGlyphMarginLanes=!1;_renderAnimationFrame;_computeGlyphMarginLanes(){let t=this._context.viewModel.model,n=this._context.viewModel.glyphLanes,i=[],o=0;i=i.concat(t.getAllMarginDecorations().map(s=>{let a=s.options.glyphMargin?.position??2;return o=Math.max(o,s.range.endLineNumber),{range:s.range,lane:a,persist:s.options.glyphMargin?.persistLane}})),i=i.concat(this._glyphMarginWidgets.getWidgets().map(s=>{let a=t.validateRange(s.preference.range);return o=Math.max(o,a.endLineNumber),{range:a,lane:s.preference.lane}})),i.sort((s,a)=>D.compareRangesUsingStarts(s.range,a.range)),n.reset(o);for(let s of i)n.push(s.lane,s.range,s.persist);return n}_createPointerHandlerHelper(){return{viewDomNode:this.domNode.domNode,linesContentDomNode:this._linesContent.domNode,viewLinesDomNode:this._viewLines.getDomNode().domNode,focusTextArea:()=>{this.focus()},dispatchTextAreaEvent:t=>{this._editContext.domNode.domNode.dispatchEvent(t)},getLastRenderData:()=>{let t=this._viewCursors.getLastRenderData()||[],n=this._editContext.getLastRenderData();return new BL(t,n)},renderNow:()=>{this.render(!0,!1)},shouldSuppressMouseDownOnViewZone:t=>this._viewZones.shouldSuppressMouseDownOnViewZone(t),shouldSuppressMouseDownOnWidget:t=>this._contentWidgets.shouldSuppressMouseDownOnWidget(t),getPositionFromDOMInfo:(t,n)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getPositionFromDOMInfo(t,n)),visibleRangeForPosition:(t,n)=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(new F(t,n))),getLineWidth:t=>(this._flushAccumulatedAndRenderNow(),this._viewLines.getLineWidth(t))}}_createTextAreaHandlerHelper(){return{visibleRangeForPosition:t=>(this._flushAccumulatedAndRenderNow(),this._viewLines.visibleRangeForPosition(t))}}_applyLayout(){let n=this._context.configuration.options.get(147);this.domNode.setWidth(n.width),this.domNode.setHeight(n.height),this._overflowGuardContainer.setWidth(n.width),this._overflowGuardContainer.setHeight(n.height),this._linesContent.setWidth(16777216),this._linesContent.setHeight(16777216)}_getEditorClassName(){let t=this._editContext.isFocused()?" focused":"";return this._context.configuration.options.get(144)+" "+_I(this._context.theme.type)+t}handleEvents(t){super.handleEvents(t),this._scheduleRender()}onConfigurationChanged(t){return this.domNode.setClassName(this._getEditorClassName()),this._applyLayout(),!1}onCursorStateChanged(t){return this._selections=t.selections,!1}onDecorationsChanged(t){return t.affectsGlyphMargin&&(this._shouldRecomputeGlyphMarginLanes=!0),!1}onFocusChanged(t){return this.domNode.setClassName(this._getEditorClassName()),!1}onThemeChanged(t){return this._context.theme.update(t.theme),this.domNode.setClassName(this._getEditorClassName()),!1}dispose(){this._renderAnimationFrame!==null&&(this._renderAnimationFrame.dispose(),this._renderAnimationFrame=null),this._contentWidgets.overflowingContentWidgetsDomNode.domNode.remove(),this._context.removeEventHandler(this),this._viewLines.dispose();for(let t of this._viewParts)t.dispose();super.dispose()}_scheduleRender(){if(this._store.isDisposed)throw new st;if(this._renderAnimationFrame===null){let t=this._createCoordinatedRendering();this._renderAnimationFrame=bW.INSTANCE.scheduleCoordinatedRendering({window:Ee(this.domNode?.domNode),prepareRenderText:()=>{if(this._store.isDisposed)throw new st;try{return t.prepareRenderText()}finally{this._renderAnimationFrame=null}},renderText:()=>{if(this._store.isDisposed)throw new st;return t.renderText()},prepareRender:(n,i)=>{if(this._store.isDisposed)throw new st;return t.prepareRender(n,i)},render:(n,i)=>{if(this._store.isDisposed)throw new st;return t.render(n,i)}})}}_flushAccumulatedAndRenderNow(){let t=this._createCoordinatedRendering();Ip(()=>t.prepareRenderText());let n=Ip(()=>t.renderText());if(n){let[i,o]=n;Ip(()=>t.prepareRender(i,o)),Ip(()=>t.render(i,o))}}_getViewPartsToRender(){let t=[],n=0;for(let i of this._viewParts)i.shouldRender()&&(t[n++]=i);return t}_createCoordinatedRendering(){return{prepareRenderText:()=>{if(this._shouldRecomputeGlyphMarginLanes){this._shouldRecomputeGlyphMarginLanes=!1;let t=this._computeGlyphMarginLanes();this._context.configuration.setGlyphMarginDecorationLaneCount(t.requiredLanes)}Vc.onRenderStart()},renderText:()=>{if(!this.domNode.domNode.isConnected)return null;let t=this._getViewPartsToRender();if(!this._viewLines.shouldRender()&&t.length===0)return null;let n=this._context.viewLayout.getLinesViewportData();this._context.viewModel.setViewport(n.startLineNumber,n.endLineNumber,n.centeredLineNumber);let i=new _L(this._selections,n,this._context.viewLayout.getWhitespaceViewportData(),this._context.viewModel);return this._contentWidgets.shouldRender()&&this._contentWidgets.onBeforeRender(i),this._viewLines.shouldRender()&&(this._viewLines.renderText(i),this._viewLines.onDidRender(),t=this._getViewPartsToRender()),[t,new DL(this._context.viewLayout,i,this._viewLines)]},prepareRender:(t,n)=>{for(let i of t)i.prepareRender(n)},render:(t,n)=>{for(let i of t)i.render(n),i.onDidRender()}}}delegateVerticalScrollbarPointerDown(t){this._scrollbar.delegateVerticalScrollbarPointerDown(t)}delegateScrollFromMouseWheelEvent(t){this._scrollbar.delegateScrollFromMouseWheelEvent(t)}restoreState(t){this._context.viewModel.viewLayout.setScrollPosition({scrollTop:t.scrollTop,scrollLeft:t.scrollLeft},1),this._context.viewModel.visibleLinesStabilized()}getOffsetForColumn(t,n){let i=this._context.viewModel.model.validatePosition({lineNumber:t,column:n}),o=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i);this._flushAccumulatedAndRenderNow();let s=this._viewLines.visibleRangeForPosition(new F(o.lineNumber,o.column));return s?s.left:-1}getTargetAtClientPoint(t,n){let i=this._pointerHandler.getTargetAtClientPoint(t,n);return i?Xb.convertViewToModelMouseTarget(i,this._context.viewModel.coordinatesConverter):null}createOverviewRuler(t){return new Nk(this._context,t)}change(t){this._viewZones.changeViewZones(t),this._scheduleRender()}render(t,n){if(n){this._viewLines.forceShouldRender();for(let i of this._viewParts)i.forceShouldRender()}t?this._flushAccumulatedAndRenderNow():this._scheduleRender()}writeScreenReaderContent(t){this._editContext.writeScreenReaderContent(t)}focus(){this._editContext.focus()}isFocused(){return this._editContext.isFocused()}refreshFocusState(){this._editContext.refreshFocusState()}setAriaOptions(t){this._editContext.setAriaOptions(t)}addContentWidget(t){this._contentWidgets.addWidget(t.widget),this.layoutContentWidget(t),this._scheduleRender()}layoutContentWidget(t){this._contentWidgets.setWidgetPosition(t.widget,t.position?.position??null,t.position?.secondaryPosition??null,t.position?.preference??null,t.position?.positionAffinity??null),this._scheduleRender()}removeContentWidget(t){this._contentWidgets.removeWidget(t.widget),this._scheduleRender()}addOverlayWidget(t){this._overlayWidgets.addWidget(t.widget),this.layoutOverlayWidget(t),this._scheduleRender()}layoutOverlayWidget(t){this._overlayWidgets.setWidgetPosition(t.widget,t.position)&&this._scheduleRender()}removeOverlayWidget(t){this._overlayWidgets.removeWidget(t.widget),this._scheduleRender()}addGlyphMarginWidget(t){this._glyphMarginWidgets.addWidget(t.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}layoutGlyphMarginWidget(t){let n=t.position;this._glyphMarginWidgets.setWidgetPosition(t.widget,n)&&(this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender())}removeGlyphMarginWidget(t){this._glyphMarginWidgets.removeWidget(t.widget),this._shouldRecomputeGlyphMarginLanes=!0,this._scheduleRender()}};cv=_([y(6,we)],cv);function Ip(r){try{return r()}catch(e){return Be(e),null}}var bW=class r{static INSTANCE=new r;_coordinatedRenderings=[];_animationFrameRunners=new Map;constructor(){}scheduleCoordinatedRendering(e){return this._coordinatedRenderings.push(e),this._scheduleRender(e.window),{dispose:()=>{let t=this._coordinatedRenderings.indexOf(e);if(t!==-1&&(this._coordinatedRenderings.splice(t,1),this._coordinatedRenderings.length===0)){for(let[n,i]of this._animationFrameRunners)i.dispose();this._animationFrameRunners.clear()}}}}_scheduleRender(e){if(!this._animationFrameRunners.has(e)){let t=()=>{this._animationFrameRunners.delete(e),this._onRenderScheduled()};this._animationFrameRunners.set(e,km(e,t,100))}}_onRenderScheduled(){let e=this._coordinatedRenderings.slice(0);this._coordinatedRenderings=[];for(let n of e)Ip(()=>n.prepareRenderText());let t=[];for(let n=0,i=e.length;n<i;n++){let o=e[n];t[n]=Ip(()=>o.renderText())}for(let n=0,i=e.length;n<i;n++){let o=e[n],s=t[n];if(!s)continue;let[a,l]=s;Ip(()=>o.prepareRender(a,l))}for(let n=0,i=e.length;n<i;n++){let o=e[n],s=t[n];if(!s)continue;let[a,l]=s;Ip(()=>o.render(a,l))}}};var fJ=Pb("domLineBreaksComputer",{createHTML:r=>r}),jk=class r{constructor(e){this.targetWindow=e}static create(e){return new r(new WeakRef(e))}createLineBreaksComputer(e,t,n,i,o){let s=[],a=[];return{addRequest:(l,d,c)=>{s.push(l),a.push(d)},finalize:()=>bJ(ks(this.targetWindow.deref()),s,e,t,n,i,o,a)}}};function bJ(r,e,t,n,i,o,s,a){function l(M){let K=a[M];if(K){let $=Wr.applyInjectedText(e[M],K),Q=K.map(De=>De.options),he=K.map(De=>De.column-1);return new fc(he,Q,[$.length],[],0)}else return null}if(i===-1){let M=[];for(let K=0,$=e.length;K<$;K++)M[K]=l(K);return M}let d=Math.round(i*t.typicalHalfwidthCharacterWidth),c=o===3?2:o===2?1:0,p=Math.round(n*c),h=Math.ceil(t.spaceWidth*p),g=document.createElement("div");Un(g,t);let f=new Dh(1e4),m=[],b=[],v=[],S=[],x=[];for(let M=0;M<e.length;M++){let K=Wr.applyInjectedText(e[M],a[M]),$=0,Q=0,he=d;if(o!==0)if($=kn(K),$===-1)$=0;else{for(let fe=0;fe<$;fe++){let ue=K.charCodeAt(fe)===9?n-Q%n:1;Q+=ue}let se=Math.ceil(t.spaceWidth*Q);se+t.typicalFullwidthCharacterWidth>d?($=0,Q=0):he=d-se}let De=K.substr($),ce=vJ(De,Q,n,he,f,h);m[M]=$,b[M]=Q,v[M]=De,S[M]=ce[0],x[M]=ce[1]}let E=f.build(),w=fJ?.createHTML(E)??E;g.innerHTML=w,g.style.position="absolute",g.style.top="10000",s==="keepAll"?(g.style.wordBreak="keep-all",g.style.overflowWrap="anywhere"):(g.style.wordBreak="inherit",g.style.overflowWrap="break-word"),r.document.body.appendChild(g);let P=document.createRange(),R=Array.prototype.slice.call(g.children,0),O=[];for(let M=0;M<e.length;M++){let K=R[M],$=yJ(P,K,v[M],S[M]);if($===null){O[M]=l(M);continue}let Q=m[M],he=b[M]+p,De=x[M],ce=[];for(let ae=0,ke=$.length;ae<ke;ae++)ce[ae]=De[$[ae]];if(Q!==0)for(let ae=0,ke=$.length;ae<ke;ae++)$[ae]+=Q;let se,fe,ue=a[M];ue?(se=ue.map(ae=>ae.options),fe=ue.map(ae=>ae.column-1)):(se=null,fe=null),O[M]=new fc(fe,se,$,ce,he)}return g.remove(),O}function vJ(r,e,t,n,i,o){if(o!==0){let h=String(o);i.appendString('<div style="text-indent: -'),i.appendString(h),i.appendString("px; padding-left: "),i.appendString(h),i.appendString("px; box-sizing: border-box; width:")}else i.appendString('<div style="width:');i.appendString(String(n)),i.appendString('px;">');let s=r.length,a=e,l=0,d=[],c=[],p=0<s?r.charCodeAt(0):0;i.appendString("<span>");for(let h=0;h<s;h++){h!==0&&h%16384===0&&i.appendString("</span><span>"),d[h]=l,c[h]=a;let g=p;p=h+1<s?r.charCodeAt(h+1):0;let f=1,m=1;switch(g){case 9:f=t-a%t,m=f;for(let b=1;b<=f;b++)b<f?i.appendCharCode(160):i.appendASCIICharCode(32);break;case 32:p===32?i.appendCharCode(160):i.appendASCIICharCode(32);break;case 60:i.appendString("&lt;");break;case 62:i.appendString("&gt;");break;case 38:i.appendString("&amp;");break;case 0:i.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:i.appendCharCode(65533);break;default:Ls(g)&&m++,g<32?i.appendCharCode(9216+g):i.appendCharCode(g)}l+=f,a+=m}return i.appendString("</span>"),d[r.length]=l,c[r.length]=a,i.appendString("</div>"),[d,c]}function yJ(r,e,t,n){if(t.length<=1)return null;let i=Array.prototype.slice.call(e.children,0),o=[];try{yW(r,i,n,0,null,t.length-1,null,o)}catch(s){return console.log(s),null}return o.length===0?null:(o.push(t.length),o)}function yW(r,e,t,n,i,o,s,a){if(n===o||(i=i||vW(r,e,t[n],t[n+1]),s=s||vW(r,e,t[o],t[o+1]),Math.abs(i[0].top-s[0].top)<=.1))return;if(n+1===o){a.push(o);return}let l=n+(o-n)/2|0,d=vW(r,e,t[l],t[l+1]);yW(r,e,t,n,i,l,d,a),yW(r,e,t,l,d,o,s,a)}function vW(r,e,t,n){return r.setStart(e[t/16384|0].firstChild,t%16384),r.setEnd(e[n/16384|0].firstChild,n%16384),r.getClientRects()}var $k=class extends N{_editor=null;_instantiationService=null;_instances=this._register(new ws);_pending=new Map;_finishedInstantiation=[];constructor(){super(),this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,t,n){this._editor=e,this._instantiationService=n;for(let i of t){if(this._pending.has(i.id)){Be(new Error(`Cannot have two contributions with the same id ${i.id}`));continue}this._pending.set(i.id,i)}this._instantiateSome(0),this._register(Ly(Ee(this._editor.getDomNode()),()=>{this._instantiateSome(1)})),this._register(Ly(Ee(this._editor.getDomNode()),()=>{this._instantiateSome(2)})),this._register(Ly(Ee(this._editor.getDomNode()),()=>{this._instantiateSome(3)},5e3))}saveViewState(){let e={};for(let[t,n]of this._instances)typeof n.saveViewState=="function"&&(e[t]=n.saveViewState());return e}restoreViewState(e){for(let[t,n]of this._instances)typeof n.restoreViewState=="function"&&n.restoreViewState(e[t])}get(e){return this._instantiateById(e),this._instances.get(e)||null}set(e,t){this._instances.set(e,t)}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){return Ly(Ee(this._editor?.getDomNode()),()=>{this._instantiateSome(1)},50)}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;let t=this._findPendingContributionsByInstantiation(e);for(let n of t)this._instantiateById(n.id)}_findPendingContributionsByInstantiation(e){let t=[];for(let[,n]of this._pending)n.instantiation===e&&t.push(n);return t}_instantiateById(e){let t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{let n=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,n),typeof n.restoreViewState=="function"&&t.instantiation!==0&&console.warn(`Editor contribution '${t.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`)}catch(n){Be(n)}}}};var qk=class{constructor(e,t,n,i,o,s,a){this.id=e;this.label=t;this.alias=n;this.metadata=i;this._precondition=o;this._run=s;this._contextKeyService=a}isSupported(){return this._contextKeyService.contextMatchesRules(this._precondition)}run(e){return this.isSupported()?this._run(e):Promise.resolve(void 0)}};var Yk=class r{static create(e){return new r(e.get(136),e.get(135))}classifier;constructor(e,t){this.classifier=new IW(e,t)}createLineBreaksComputer(e,t,n,i,o){let s=[],a=[],l=[];return{addRequest:(d,c,p)=>{s.push(d),a.push(c),l.push(p)},finalize:()=>{let d=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,c=[];for(let p=0,h=s.length;p<h;p++){let g=a[p],f=l[p];f&&!f.injectionOptions&&!g?c[p]=IJ(this.classifier,f,s[p],t,n,d,i,o):c[p]=SJ(this.classifier,s[p],g,t,n,d,i,o)}return SW.length=0,CW.length=0,c}}}};var IW=class extends Lh{constructor(e,t){super(0);for(let n=0;n<e.length;n++)this.set(e.charCodeAt(n),1);for(let n=0;n<t.length;n++)this.set(t.charCodeAt(n),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}},SW=[],CW=[];function IJ(r,e,t,n,i,o,s,a){if(i===-1)return null;let l=t.length;if(l<=1)return null;let d=a==="keepAll",c=e.breakOffsets,p=e.breakOffsetsVisibleColumn,h=t3(t,n,i,o,s),g=i-h,f=SW,m=CW,b=0,v=0,S=0,x=i,E=c.length,w=0;if(w>=0){let P=Math.abs(p[w]-x);for(;w+1<E;){let R=Math.abs(p[w+1]-x);if(R>=P)break;P=R,w++}}for(;w<E;){let P=w<0?0:c[w],R=w<0?0:p[w];v>P&&(P=v,R=S);let O=0,M=0,K=0,$=0;if(R<=x){let he=R,De=P===0?0:t.charCodeAt(P-1),ce=P===0?0:r.get(De),se=!0;for(let fe=P;fe<l;fe++){let ue=fe,ae=t.charCodeAt(fe),ke,Re;if(mn(ae)?(fe++,ke=0,Re=2):(ke=r.get(ae),Re=pC(ae,he,n,o)),ue>v&&xW(De,ce,ae,ke,d)&&(O=ue,M=he),he+=Re,he>x){ue>v?(K=ue,$=he-Re):(K=fe+1,$=he),he-M>g&&(O=0),se=!1;break}De=ae,ce=ke}if(se){b>0&&(f[b]=c[c.length-1],m[b]=p[c.length-1],b++);break}}if(O===0){let he=R,De=t.charCodeAt(P),ce=r.get(De),se=!1;for(let fe=P-1;fe>=v;fe--){let ue=fe+1,ae=t.charCodeAt(fe);if(ae===9){se=!0;break}let ke,Re;if(Nl(ae)?(fe--,ke=0,Re=2):(ke=r.get(ae),Re=Ls(ae)?o:1),he<=x){if(K===0&&(K=ue,$=he),he<=x-g)break;if(xW(ae,ke,De,ce,d)){O=ue,M=he;break}}he-=Re,De=ae,ce=ke}if(O!==0){let fe=g-($-M);if(fe<=n){let ue=t.charCodeAt(K),ae;mn(ue)?ae=2:ae=pC(ue,$,n,o),fe-ae<0&&(O=0)}}if(se){w--;continue}}if(O===0&&(O=K,M=$),O<=v){let he=t.charCodeAt(v);mn(he)?(O=v+2,M=S+2):(O=v+1,M=S+pC(he,S,n,o))}for(v=O,f[b]=O,S=M,m[b]=M,b++,x=M+g;w<0||w<E&&p[w]<M;)w++;let Q=Math.abs(p[w]-x);for(;w+1<E;){let he=Math.abs(p[w+1]-x);if(he>=Q)break;Q=he,w++}}return b===0?null:(f.length=b,m.length=b,SW=e.breakOffsets,CW=e.breakOffsetsVisibleColumn,e.breakOffsets=f,e.breakOffsetsVisibleColumn=m,e.wrappedTextIndentLength=h,e)}function SJ(r,e,t,n,i,o,s,a){let l=Wr.applyInjectedText(e,t),d,c;if(t&&t.length>0?(d=t.map(M=>M.options),c=t.map(M=>M.column-1)):(d=null,c=null),i===-1)return d?new fc(c,d,[l.length],[],0):null;let p=l.length;if(p<=1)return d?new fc(c,d,[l.length],[],0):null;let h=a==="keepAll",g=t3(l,n,i,o,s),f=i-g,m=[],b=[],v=0,S=0,x=0,E=i,w=l.charCodeAt(0),P=r.get(w),R=pC(w,0,n,o),O=1;mn(w)&&(R+=1,w=l.charCodeAt(1),P=r.get(w),O++);for(let M=O;M<p;M++){let K=M,$=l.charCodeAt(M),Q,he;mn($)?(M++,Q=0,he=2):(Q=r.get($),he=pC($,R,n,o)),xW(w,P,$,Q,h)&&(S=K,x=R),R+=he,R>E&&((S===0||R-x>f)&&(S=K,x=R-he),m[v]=S,b[v]=x,v++,E=x+f,S=0),w=$,P=Q}return v===0&&(!t||t.length===0)?null:(m[v]=p,b[v]=R,new fc(c,d,m,b,g))}function pC(r,e,t,n){return r===9?t-e%t:Ls(r)||r<32?n:1}function e3(r,e){return e-r%e}function xW(r,e,t,n,i){return t!==32&&(e===2&&n!==2||e!==1&&n===1||!i&&e===3&&n!==2||!i&&n===3&&e!==1)}function t3(r,e,t,n,i){let o=0;if(i!==0){let s=kn(r);if(s!==-1){for(let l=0;l<s;l++){let d=r.charCodeAt(l)===9?e3(o,e):1;o+=d}let a=i===3?2:i===2?1:0;for(let l=0;l<a;l++){let d=e3(o,e);o+=d}o+n>t&&(o=0)}}return o}var hC=class{_cursorContextBrand=void 0;model;viewModel;coordinatesConverter;cursorConfig;constructor(e,t,n,i){this.model=e,this.viewModel=t,this.coordinatesConverter=n,this.cursorConfig=i}};var gC=class r{modelState;viewState;_selTrackedRange;_trackSelection;constructor(e){this._selTrackedRange=null,this._trackSelection=!0,this._setState(e,new ni(new D(1,1,1,1),0,0,new F(1,1),0),new ni(new D(1,1,1,1),0,0,new F(1,1),0))}dispose(e){this._removeTrackedRange(e)}startTrackingSelection(e){this._trackSelection=!0,this._updateTrackedRange(e)}stopTrackingSelection(e){this._trackSelection=!1,this._removeTrackedRange(e)}_updateTrackedRange(e){this._trackSelection&&(this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,this.modelState.selection,0))}_removeTrackedRange(e){this._selTrackedRange=e.model._setTrackedRange(this._selTrackedRange,null,0)}asCursorState(){return new nt(this.modelState,this.viewState)}readSelectionFromMarkers(e){let t=e.model._getTrackedRange(this._selTrackedRange);return this.modelState.selection.isEmpty()&&!t.isEmpty()?ze.fromRange(t.collapseToEnd(),this.modelState.selection.getDirection()):ze.fromRange(t,this.modelState.selection.getDirection())}ensureValidState(e){this._setState(e,this.modelState,this.viewState)}setState(e,t,n){this._setState(e,t,n)}static _validatePositionWithCache(e,t,n,i){return t.equals(n)?i:e.normalizePosition(t,2)}static _validateViewState(e,t){let n=t.position,i=t.selectionStart.getStartPosition(),o=t.selectionStart.getEndPosition(),s=e.normalizePosition(n,2),a=this._validatePositionWithCache(e,i,n,s),l=this._validatePositionWithCache(e,o,i,a);return n.equals(s)&&i.equals(a)&&o.equals(l)?t:new ni(D.fromPositions(a,l),t.selectionStartKind,t.selectionStartLeftoverVisibleColumns+i.column-a.column,s,t.leftoverVisibleColumns+n.column-s.column)}_setState(e,t,n){if(n&&(n=r._validateViewState(e.viewModel,n)),t){let i=e.model.validateRange(t.selectionStart),o=t.selectionStart.equalsRange(i)?t.selectionStartLeftoverVisibleColumns:0,s=e.model.validatePosition(t.position),a=t.position.equals(s)?t.leftoverVisibleColumns:0;t=new ni(i,t.selectionStartKind,o,s,a)}else{if(!n)return;let i=e.model.validateRange(e.coordinatesConverter.convertViewRangeToModelRange(n.selectionStart)),o=e.model.validatePosition(e.coordinatesConverter.convertViewPositionToModelPosition(n.position));t=new ni(i,n.selectionStartKind,n.selectionStartLeftoverVisibleColumns,o,n.leftoverVisibleColumns)}if(n){let i=e.coordinatesConverter.validateViewRange(n.selectionStart,t.selectionStart),o=e.coordinatesConverter.validateViewPosition(n.position,t.position);n=new ni(i,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,o,t.leftoverVisibleColumns)}else{let i=e.coordinatesConverter.convertModelPositionToViewPosition(new F(t.selectionStart.startLineNumber,t.selectionStart.startColumn)),o=e.coordinatesConverter.convertModelPositionToViewPosition(new F(t.selectionStart.endLineNumber,t.selectionStart.endColumn)),s=new D(i.lineNumber,i.column,o.lineNumber,o.column),a=e.coordinatesConverter.convertModelPositionToViewPosition(t.position);n=new ni(s,t.selectionStartKind,t.selectionStartLeftoverVisibleColumns,a,t.leftoverVisibleColumns)}this.modelState=t,this.viewState=n,this._updateTrackedRange(e)}};var mC=class{context;cursors;lastAddedCursorIndex;constructor(e){this.context=e,this.cursors=[new gC(e)],this.lastAddedCursorIndex=0}dispose(){for(let e of this.cursors)e.dispose(this.context)}startTrackingSelections(){for(let e of this.cursors)e.startTrackingSelection(this.context)}stopTrackingSelections(){for(let e of this.cursors)e.stopTrackingSelection(this.context)}updateContext(e){this.context=e}ensureValidState(){for(let e of this.cursors)e.ensureValidState(this.context)}readSelectionFromMarkers(){return this.cursors.map(e=>e.readSelectionFromMarkers(this.context))}getAll(){return this.cursors.map(e=>e.asCursorState())}getViewPositions(){return this.cursors.map(e=>e.viewState.position)}getTopMostViewPosition(){return S2(this.cursors,Rl(e=>e.viewState.position,F.compare)).viewState.position}getBottomMostViewPosition(){return I2(this.cursors,Rl(e=>e.viewState.position,F.compare)).viewState.position}getSelections(){return this.cursors.map(e=>e.modelState.selection)}getViewSelections(){return this.cursors.map(e=>e.viewState.selection)}setSelections(e){this.setStates(nt.fromModelSelections(e))}getPrimaryCursor(){return this.cursors[0].asCursorState()}setStates(e){e!==null&&(this.cursors[0].setState(this.context,e[0].modelState,e[0].viewState),this._setSecondaryStates(e.slice(1)))}_setSecondaryStates(e){let t=this.cursors.length-1,n=e.length;if(t<n){let i=n-t;for(let o=0;o<i;o++)this._addSecondaryCursor()}else if(t>n){let i=t-n;for(let o=0;o<i;o++)this._removeSecondaryCursor(this.cursors.length-2)}for(let i=0;i<n;i++)this.cursors[i+1].setState(this.context,e[i].modelState,e[i].viewState)}killSecondaryCursors(){this._setSecondaryStates([])}_addSecondaryCursor(){this.cursors.push(new gC(this.context)),this.lastAddedCursorIndex=this.cursors.length-1}getLastAddedCursorIndex(){return this.cursors.length===1||this.lastAddedCursorIndex===0?0:this.lastAddedCursorIndex}_removeSecondaryCursor(e){this.lastAddedCursorIndex>=e+1&&this.lastAddedCursorIndex--,this.cursors[e+1].dispose(this.context),this.cursors.splice(e+1,1)}normalize(){if(this.cursors.length===1)return;let e=this.cursors.slice(0),t=[];for(let n=0,i=e.length;n<i;n++)t.push({index:n,selection:e[n].modelState.selection});t.sort(Rl(n=>n.selection,D.compareRangesUsingStarts));for(let n=0;n<t.length-1;n++){let i=t[n],o=t[n+1],s=i.selection,a=o.selection;if(!this.context.cursorConfig.multiCursorMergeOverlapping)continue;let l;if(a.isEmpty()||s.isEmpty()?l=a.getStartPosition().isBeforeOrEqual(s.getEndPosition()):l=a.getStartPosition().isBefore(s.getEndPosition()),l){let d=i.index<o.index?n:n+1,c=i.index<o.index?n+1:n,p=t[c].index,h=t[d].index,g=t[c].selection,f=t[d].selection;if(!g.equalsSelection(f)){let m=g.plusRange(f),b=g.selectionStartLineNumber===g.startLineNumber&&g.selectionStartColumn===g.startColumn,v=f.selectionStartLineNumber===f.startLineNumber&&f.selectionStartColumn===f.startColumn,S;p===this.lastAddedCursorIndex?(S=b,this.lastAddedCursorIndex=h):S=v;let x;S?x=new ze(m.startLineNumber,m.startColumn,m.endLineNumber,m.endColumn):x=new ze(m.endLineNumber,m.endColumn,m.startLineNumber,m.startColumn),t[d].selection=x;let E=nt.fromModelSelection(x);e[h].setState(this.context,E.modelState,E.viewState)}for(let m of t)m.index>p&&m.index--;e.splice(p,1),t.splice(c,1),this._removeSecondaryCursor(p-1),n--}}}};var Xk=class extends N{_onEvent=this._register(new T);onEvent=this._onEvent.event;_eventHandlers;_viewEventQueue;_isConsumingViewEventQueue;_collector;_collectorCnt;_outgoingEvents;constructor(){super(),this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++){let i=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(i){this._outgoingEvents[t]=i;return}}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;let e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,this._collectorCnt===1&&(this._collector=new EW),this._collector}endEmitViewEvents(){if(this._collectorCnt--,this._collectorCnt===0){let e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(let n of e)this._addOutgoingEvent(n);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){let e=this._viewEventQueue;this._viewEventQueue=null;let t=this._eventHandlers.slice(0);for(let n of t)n.handleEvents(e)}}},EW=class{viewEvents;outgoingEvents;constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}};var Qk=class r{kind=0;_oldContentWidth;_oldContentHeight;contentWidth;contentHeight;contentWidthChanged;contentHeightChanged;constructor(e,t,n,i){this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=i,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new r(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}},Zk=class r{kind=1;oldHasFocus;hasFocus;constructor(e,t){this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new r(this.oldHasFocus,e.hasFocus)}},Jk=class r{kind=2;_oldScrollWidth;_oldScrollLeft;_oldScrollHeight;_oldScrollTop;scrollWidth;scrollLeft;scrollHeight;scrollTop;scrollWidthChanged;scrollLeftChanged;scrollHeightChanged;scrollTopChanged;constructor(e,t,n,i,o,s,a,l){this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=i,this.scrollWidth=o,this.scrollLeft=s,this.scrollHeight=a,this.scrollTop=l,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new r(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}},eR=class{kind=3;constructor(){}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}},tR=class{kind=4;constructor(){}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}},nR=class r{kind=6;oldSelections;selections;oldModelVersionId;modelVersionId;source;reason;reachedMaxCursorCount;constructor(e,t,n,i,o,s,a){this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=i,this.source=o,this.reason=s,this.reachedMaxCursorCount=a}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;let n=e.length,i=t.length;if(n!==i)return!1;for(let o=0;o<n;o++)if(!e[o].equalsSelection(t[o]))return!1;return!0}isNoOp(){return r._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new r(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}},iR=class{kind=5;constructor(){}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}},oR=class{constructor(e){this.event=e}kind=7;isNoOp(){return!1}attemptToMerge(e){return null}},rR=class{constructor(e){this.event=e}kind=8;isNoOp(){return!1}attemptToMerge(e){return null}},sR=class{constructor(e){this.event=e}kind=9;isNoOp(){return!1}attemptToMerge(e){return null}},aR=class{constructor(e){this.event=e}kind=10;isNoOp(){return!1}attemptToMerge(e){return null}},lR=class{constructor(e){this.event=e}kind=11;isNoOp(){return!1}attemptToMerge(e){return null}},dR=class{constructor(e){this.event=e}kind=12;isNoOp(){return!1}attemptToMerge(e){return null}};var cR=class extends N{_model;_knownModelVersionId;_viewModel;_coordinatesConverter;context;_cursors;_hasFocus;_isHandling;_compositionState;_columnSelectData;_autoClosedActions;_prevEditOperationType;constructor(e,t,n,i){super(),this._model=e,this._knownModelVersionId=this._model.getVersionId(),this._viewModel=t,this._coordinatesConverter=n,this.context=new hC(this._model,this._viewModel,this._coordinatesConverter,i),this._cursors=new mC(this.context),this._hasFocus=!1,this._isHandling=!1,this._compositionState=null,this._columnSelectData=null,this._autoClosedActions=[],this._prevEditOperationType=0}dispose(){this._cursors.dispose(),this._autoClosedActions=rt(this._autoClosedActions),super.dispose()}updateConfiguration(e){this.context=new hC(this._model,this._viewModel,this._coordinatesConverter,e),this._cursors.updateContext(this.context)}onLineMappingChanged(e){this._knownModelVersionId===this._model.getVersionId()&&this.setStates(e,"viewModel",0,this.getCursorStates())}setHasFocus(e){this._hasFocus=e}_validateAutoClosedActions(){if(this._autoClosedActions.length>0){let e=this._cursors.getSelections();for(let t=0;t<this._autoClosedActions.length;t++){let n=this._autoClosedActions[t];n.isValid(e)||(n.dispose(),this._autoClosedActions.splice(t,1),t--)}}}getPrimaryCursorState(){return this._cursors.getPrimaryCursor()}getLastAddedCursorIndex(){return this._cursors.getLastAddedCursorIndex()}getCursorStates(){return this._cursors.getAll()}setStates(e,t,n,i){let o=!1,s=this.context.cursorConfig.multiCursorLimit;i!==null&&i.length>s&&(i=i.slice(0,s),o=!0);let a=fC.from(this._model,this);return this._cursors.setStates(i),this._cursors.normalize(),this._columnSelectData=null,this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,t,n,a,o)}setCursorColumnSelectData(e){this._columnSelectData=e}revealAll(e,t,n,i,o,s){let a=this._cursors.getViewPositions(),l=null,d=null;a.length>1?d=this._cursors.getViewSelections():l=D.fromPositions(a[0],a[0]),e.emitViewEvent(new yc(t,n,l,d,i,o,s))}revealPrimary(e,t,n,i,o,s){let l=[this._cursors.getPrimaryCursor().viewState.selection];e.emitViewEvent(new yc(t,n,null,l,i,o,s))}saveState(){let e=[],t=this._cursors.getSelections();for(let n=0,i=t.length;n<i;n++){let o=t[n];e.push({inSelectionMode:!o.isEmpty(),selectionStart:{lineNumber:o.selectionStartLineNumber,column:o.selectionStartColumn},position:{lineNumber:o.positionLineNumber,column:o.positionColumn}})}return e}restoreState(e,t){let n=[];for(let i=0,o=t.length;i<o;i++){let s=t[i],a=1,l=1;s.position&&s.position.lineNumber&&(a=s.position.lineNumber),s.position&&s.position.column&&(l=s.position.column);let d=a,c=l;s.selectionStart&&s.selectionStart.lineNumber&&(d=s.selectionStart.lineNumber),s.selectionStart&&s.selectionStart.column&&(c=s.selectionStart.column),n.push({selectionStartLineNumber:d,selectionStartColumn:c,positionLineNumber:a,positionColumn:l})}this.setStates(e,"restoreState",0,nt.fromModelSelections(n)),this.revealAll(e,"restoreState",!1,0,!0,1)}onModelContentChanged(e,t){if(t instanceof df){if(this._isHandling)return;this._isHandling=!0;try{this.setStates(e,"modelChange",0,this.getCursorStates())}finally{this._isHandling=!1}}else{let n=t.rawContentChangedEvent;if(this._knownModelVersionId=n.versionId,this._isHandling)return;let i=n.containsEvent(1);if(this._prevEditOperationType=0,i)this._cursors.dispose(),this._cursors=new mC(this.context),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(e,"model",1,null,!1);else if(this._hasFocus&&n.resultingSelection&&n.resultingSelection.length>0){let o=nt.fromModelSelections(n.resultingSelection);this.setStates(e,"modelChange",n.isUndoing?5:n.isRedoing?6:2,o)&&this.revealAll(e,"modelChange",!1,0,!0,0)}else{let o=this._cursors.readSelectionFromMarkers();this.setStates(e,"modelChange",2,nt.fromModelSelections(o))}}}getSelection(){return this._cursors.getPrimaryCursor().modelState.selection}getTopMostViewPosition(){return this._cursors.getTopMostViewPosition()}getBottomMostViewPosition(){return this._cursors.getBottomMostViewPosition()}getCursorColumnSelectData(){if(this._columnSelectData)return this._columnSelectData;let e=this._cursors.getPrimaryCursor(),t=e.viewState.selectionStart.getStartPosition(),n=e.viewState.position;return{isReal:!1,fromViewLineNumber:t.lineNumber,fromViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,t),toViewLineNumber:n.lineNumber,toViewVisualColumn:this.context.cursorConfig.visibleColumnFromColumn(this._viewModel,n)}}getSelections(){return this._cursors.getSelections()}getPosition(){return this._cursors.getPrimaryCursor().modelState.position}setSelections(e,t,n,i){this.setStates(e,t,i,nt.fromModelSelections(n))}getPrevEditOperationType(){return this._prevEditOperationType}setPrevEditOperationType(e){this._prevEditOperationType=e}_pushAutoClosedAction(e,t){let n=[],i=[];for(let a=0,l=e.length;a<l;a++)n.push({range:e[a],options:{description:"auto-closed-character",inlineClassName:"auto-closed-character",stickiness:1}}),i.push({range:t[a],options:{description:"auto-closed-enclosing",stickiness:1}});let o=this._model.deltaDecorations([],n),s=this._model.deltaDecorations([],i);this._autoClosedActions.push(new uR(this._model,o,s))}_executeEditOperation(e){if(!e)return;e.shouldPushStackElementBefore&&this._model.pushStackElement();let t=TW.executeCommands(this._model,this._cursors.getSelections(),e.commands);if(t){this._interpretCommandResult(t);let n=[],i=[];for(let o=0;o<e.commands.length;o++){let s=e.commands[o];s instanceof jb&&s.enclosingRange&&s.closeCharacterRange&&(n.push(s.closeCharacterRange),i.push(s.enclosingRange))}n.length>0&&this._pushAutoClosedAction(n,i),this._prevEditOperationType=e.type}e.shouldPushStackElementAfter&&this._model.pushStackElement()}_interpretCommandResult(e){(!e||e.length===0)&&(e=this._cursors.readSelectionFromMarkers()),this._columnSelectData=null,this._cursors.setSelections(e),this._cursors.normalize()}_emitStateChangedIfNecessary(e,t,n,i,o){let s=fC.from(this._model,this);if(s.equals(i))return!1;let a=this._cursors.getSelections(),l=this._cursors.getViewSelections();if(e.emitViewEvent(new tw(l,a,n)),!i||i.cursorState.length!==s.cursorState.length||s.cursorState.some((d,c)=>!d.modelState.equals(i.cursorState[c].modelState))){let d=i?i.cursorState.map(p=>p.modelState.selection):null,c=i?i.modelVersionId:0;e.emitOutgoingEvent(new nR(d,a,c,s.modelVersionId,t||"keyboard",n,o))}return!0}_findAutoClosingPairs(e){if(!e.length)return null;let t=[];for(let n=0,i=e.length;n<i;n++){let o=e[n];if(!o.text||o.text.indexOf(`
`)>=0)return null;let s=o.text.match(/([)\]}>'"`])([^)\]}>'"`]*)$/);if(!s)return null;let a=s[1],l=this.context.cursorConfig.autoClosingPairs.autoClosingPairsCloseSingleChar.get(a);if(!l||l.length!==1)return null;let d=l[0].open,c=o.text.length-s[2].length-1,p=o.text.lastIndexOf(d,c-1);if(p===-1)return null;t.push([p,c])}return t}executeEdits(e,t,n,i){let o=null;t==="snippet"&&(o=this._findAutoClosingPairs(n)),o&&(n[0]._isTracked=!0);let s=[],a=[],l=this._model.pushEditOperations(this.getSelections(),n,d=>{if(o)for(let p=0,h=o.length;p<h;p++){let[g,f]=o[p],m=d[p],b=m.range.startLineNumber,v=m.range.startColumn-1+g,S=m.range.startColumn-1+f;s.push(new D(b,S+1,b,S+2)),a.push(new D(b,v+1,b,S+2))}let c=i(d);return c&&(this._isHandling=!0),c});l&&(this._isHandling=!1,this.setSelections(e,t,l,0)),s.length>0&&this._pushAutoClosedAction(s,a)}_executeEdit(e,t,n,i=0){if(this.context.cursorConfig.readOnly)return;let o=fC.from(this._model,this);this._cursors.stopTrackingSelections(),this._isHandling=!0;try{this._cursors.ensureValidState(),e()}catch(s){Be(s)}this._isHandling=!1,this._cursors.startTrackingSelections(),this._validateAutoClosedActions(),this._emitStateChangedIfNecessary(t,n,i,o,!1)&&this.revealAll(t,n,!1,0,!0,0)}getAutoClosedCharacters(){return uR.getAllAutoClosedCharacters(this._autoClosedActions)}startComposition(e){this._compositionState=new _W(this._model,this.getSelections())}endComposition(e,t){let n=this._compositionState?this._compositionState.deduceOutcome(this._model,this.getSelections()):null;this._compositionState=null,this._executeEdit(()=>{t==="keyboard"&&this._executeEditOperation(fl.compositionEndWithInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,n,this.getSelections(),this.getAutoClosedCharacters()))},e,t)}type(e,t,n){this._executeEdit(()=>{if(n==="keyboard"){let i=t.length,o=0;for(;o<i;){let s=dy(t,o),a=t.substr(o,s);this._executeEditOperation(fl.typeWithInterceptors(!!this._compositionState,this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),this.getAutoClosedCharacters(),a)),o+=s}}else this._executeEditOperation(fl.typeWithoutInterceptors(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t))},e,n)}compositionType(e,t,n,i,o,s){if(t.length===0&&n===0&&i===0){if(o!==0){let a=this.getSelections().map(l=>{let d=l.getPosition();return new ze(d.lineNumber,d.column+o,d.lineNumber,d.column+o)});this.setSelections(e,s,a,0)}return}this._executeEdit(()=>{this._executeEditOperation(fl.compositionType(this._prevEditOperationType,this.context.cursorConfig,this._model,this.getSelections(),t,n,i,o))},e,s)}paste(e,t,n,i,o){this._executeEdit(()=>{this._executeEditOperation(fl.paste(this.context.cursorConfig,this._model,this.getSelections(),t,n,i||[]))},e,o,4)}cut(e,t){this._executeEdit(()=>{this._executeEditOperation(zc.cut(this.context.cursorConfig,this._model,this.getSelections()))},e,t)}executeCommand(e,t,n){this._executeEdit(()=>{this._cursors.killSecondaryCursors(),this._executeEditOperation(new Si(0,[t],{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}executeCommands(e,t,n){this._executeEdit(()=>{this._executeEditOperation(new Si(0,t,{shouldPushStackElementBefore:!1,shouldPushStackElementAfter:!1}))},e,n)}},fC=class r{constructor(e,t){this.modelVersionId=e;this.cursorState=t}static from(e,t){return new r(e.getVersionId(),t.getCursorStates())}equals(e){if(!e||this.modelVersionId!==e.modelVersionId||this.cursorState.length!==e.cursorState.length)return!1;for(let t=0,n=this.cursorState.length;t<n;t++)if(!this.cursorState[t].equals(e.cursorState[t]))return!1;return!0}},uR=class{static getAllAutoClosedCharacters(e){let t=[];for(let n of e)t=t.concat(n.getAutoClosedCharactersRanges());return t}_model;_autoClosedCharactersDecorations;_autoClosedEnclosingDecorations;constructor(e,t,n){this._model=e,this._autoClosedCharactersDecorations=t,this._autoClosedEnclosingDecorations=n}dispose(){this._autoClosedCharactersDecorations=this._model.deltaDecorations(this._autoClosedCharactersDecorations,[]),this._autoClosedEnclosingDecorations=this._model.deltaDecorations(this._autoClosedEnclosingDecorations,[])}getAutoClosedCharactersRanges(){let e=[];for(let t=0;t<this._autoClosedCharactersDecorations.length;t++){let n=this._model.getDecorationRange(this._autoClosedCharactersDecorations[t]);n&&e.push(n)}return e}isValid(e){let t=[];for(let n=0;n<this._autoClosedEnclosingDecorations.length;n++){let i=this._model.getDecorationRange(this._autoClosedEnclosingDecorations[n]);if(i&&(t.push(i),i.startLineNumber!==i.endLineNumber))return!1}t.sort(D.compareRangesUsingStarts),e.sort(D.compareRangesUsingStarts);for(let n=0;n<e.length;n++)if(n>=t.length||!t[n].strictContainsRange(e[n]))return!1;return!0}},TW=class{static executeCommands(e,t,n){let i={model:e,selectionsBefore:t,trackedRanges:[],trackedRangesDirection:[]},o=this._innerExecuteCommands(i,n);for(let s=0,a=i.trackedRanges.length;s<a;s++)i.model._setTrackedRange(i.trackedRanges[s],null,0);return o}static _innerExecuteCommands(e,t){if(this._arrayIsEmpty(t))return null;let n=this._getEditOperations(e,t);if(n.operations.length===0)return null;let i=n.operations,o=this._getLoserCursorMap(i);if(o.hasOwnProperty("0"))return console.warn("Ignoring commands"),null;let s=[];for(let d=0,c=i.length;d<c;d++)o.hasOwnProperty(i[d].identifier.major.toString())||s.push(i[d]);n.hadTrackedEditOperation&&s.length>0&&(s[0]._isTracked=!0);let a=e.model.pushEditOperations(e.selectionsBefore,s,d=>{let c=[];for(let g=0;g<e.selectionsBefore.length;g++)c[g]=[];for(let g of d)g.identifier&&c[g.identifier.major].push(g);let p=(g,f)=>g.identifier.minor-f.identifier.minor,h=[];for(let g=0;g<e.selectionsBefore.length;g++)c[g].length>0?(c[g].sort(p),h[g]=t[g].computeCursorState(e.model,{getInverseEditOperations:()=>c[g],getTrackedSelection:f=>{let m=parseInt(f,10),b=e.model._getTrackedRange(e.trackedRanges[m]);return e.trackedRangesDirection[m]===0?new ze(b.startLineNumber,b.startColumn,b.endLineNumber,b.endColumn):new ze(b.endLineNumber,b.endColumn,b.startLineNumber,b.startColumn)}})):h[g]=e.selectionsBefore[g];return h});a||(a=e.selectionsBefore);let l=[];for(let d in o)o.hasOwnProperty(d)&&l.push(parseInt(d,10));l.sort((d,c)=>c-d);for(let d of l)a.splice(d,1);return a}static _arrayIsEmpty(e){for(let t=0,n=e.length;t<n;t++)if(e[t])return!1;return!0}static _getEditOperations(e,t){let n=[],i=!1;for(let o=0,s=t.length;o<s;o++){let a=t[o];if(a){let l=this._getEditOperationsFromCommand(e,o,a);n=n.concat(l.operations),i=i||l.hadTrackedEditOperation}}return{operations:n,hadTrackedEditOperation:i}}static _getEditOperationsFromCommand(e,t,n){let i=[],o=0,s=(p,h,g=!1)=>{D.isEmpty(p)&&h===""||i.push({identifier:{major:t,minor:o++},range:p,text:h,forceMoveMarkers:g,isAutoWhitespaceEdit:n.insertsAutoWhitespace})},a=!1,c={addEditOperation:s,addTrackedEditOperation:(p,h,g)=>{a=!0,s(p,h,g)},trackSelection:(p,h)=>{let g=ze.liftSelection(p),f;if(g.isEmpty())if(typeof h=="boolean")h?f=2:f=3;else{let v=e.model.getLineMaxColumn(g.startLineNumber);g.startColumn===v?f=2:f=3}else f=1;let m=e.trackedRanges.length,b=e.model._setTrackedRange(null,g,f);return e.trackedRanges[m]=b,e.trackedRangesDirection[m]=g.getDirection(),m.toString()}};try{n.getEditOperations(e.model,c)}catch(p){return Be(p),{operations:[],hadTrackedEditOperation:!1}}return{operations:i,hadTrackedEditOperation:a}}static _getLoserCursorMap(e){e=e.slice(0),e.sort((n,i)=>-D.compareRangesUsingEnds(n.range,i.range));let t={};for(let n=1;n<e.length;n++){let i=e[n-1],o=e[n];if(D.getStartPosition(i.range).isBefore(D.getEndPosition(o.range))){let s;i.identifier.major>o.identifier.major?s=i.identifier.major:s=o.identifier.major,t[s.toString()]=!0;for(let a=0;a<e.length;a++)e[a].identifier.major===s&&(e.splice(a,1),a<n&&n--,a--);n>0&&n--}}return t}},wW=class{constructor(e,t,n){this.text=e;this.startSelection=t;this.endSelection=n}},_W=class r{_original;static _capture(e,t){let n=[];for(let i of t){if(i.startLineNumber!==i.endLineNumber)return null;n.push(new wW(e.getLineContent(i.startLineNumber),i.startColumn-1,i.endColumn-1))}return n}constructor(e,t){this._original=r._capture(e,t)}deduceOutcome(e,t){if(!this._original)return null;let n=r._capture(e,t);if(!n||this._original.length!==n.length)return null;let i=[];for(let o=0,s=this._original.length;o<s;o++)i.push(r._deduceOutcome(this._original[o],n[o]));return i}static _deduceOutcome(e,t){let n=Math.min(e.startSelection,t.startSelection,Oa(e.text,t.text)),i=Math.min(e.text.length-e.endSelection,t.text.length-t.endSelection,ly(e.text,t.text)),o=e.text.substring(n,e.text.length-i),s=t.text.substring(n,t.text.length-i);return new ok(o,e.startSelection-n,e.endSelection-n,s,t.startSelection-n,t.endSelection-n)}};var n3={getInitialState:()=>uN,tokenizeEncoded:(r,e,t)=>O_(0,t)};async function o3(r,e,t){if(!t)return i3(e,r.languageIdCodec,n3);let n=await Xo.getOrCreate(t);return i3(e,r.languageIdCodec,n||n3)}function r3(r,e,t,n,i,o,s){let a="<div>",l=n,d=0,c=!0;for(let p=0,h=e.getCount();p<h;p++){let g=e.getEndOffset(p);if(g<=n)continue;let f="";for(;l<g&&l<i;l++){let m=r.charCodeAt(l);switch(m){case 9:{let b=o-(l+d)%o;for(d+=b-1;b>0;)s&&c?(f+="&#160;",c=!1):(f+=" ",c=!0),b--;break}case 60:f+="&lt;",c=!1;break;case 62:f+="&gt;",c=!1;break;case 38:f+="&amp;",c=!1;break;case 0:f+="&#00;",c=!1;break;case 65279:case 8232:case 8233:case 133:f+="\uFFFD",c=!1;break;case 13:f+="&#8203",c=!1;break;case 32:s&&c?(f+="&#160;",c=!1):(f+=" ",c=!0);break;default:f+=String.fromCharCode(m),c=!1}}if(a+=`<span style="${e.getInlineStyle(p,t)}">${f}</span>`,g>i||l>=i)break}return a+="</div>",a}function i3(r,e,t){let n='<div class="monaco-tokenized-source">',i=Ma(r),o=t.getInitialState();for(let s=0,a=i.length;s<a;s++){let l=i[s];s>0&&(n+="<br/>");let d=t.tokenizeEncoded(l,!0,o);zn.convertToEndOffset(d.tokens,l.length);let p=new zn(d.tokens,l,e).inflate(),h=0;for(let g=0,f=p.getCount();g<f;g++){let m=p.getClassName(g),b=p.getEndOffset(g);n+=`<span class="${m}">${rh(l.substring(h,b))}</span>`,h=b}o=d.endState}return n+="</div>",n}var DW=class{_hasPending;_inserts;_changes;_removes;constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;let t=this._inserts,n=this._changes,i=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,i)}},LW=class{id;afterLineNumber;ordinal;height;minWidth;prefixSum;constructor(e,t,n,i,o){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=i,this.minWidth=o,this.prefixSum=0}},pR=class r{static INSTANCE_COUNT=0;_instanceId;_pendingChanges;_lastWhitespaceId;_arr;_prefixSumValidIndex;_minWidth;_lineCount;_lineHeight;_paddingTop;_paddingBottom;constructor(e,t,n,i){this._instanceId=Ux(++r.INSTANCE_COUNT),this._pendingChanges=new DW,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=n,this._paddingBottom=i}static findInsertionIndex(e,t,n){let i=0,o=e.length;for(;i<o;){let s=i+o>>>1;t===e[s].afterLineNumber?n<e[s].ordinal?o=s:i=s+1:t<e[s].afterLineNumber?o=s:i=s+1}return i}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(i,o,s,a)=>{t=!0,i=i|0,o=o|0,s=s|0,a=a|0;let l=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new LW(l,i,o,s,a)),l},changeOneWhitespace:(i,o,s)=>{t=!0,o=o|0,s=s|0,this._pendingChanges.change({id:i,newAfterLineNumber:o,newHeight:s})},removeWhitespace:i=>{t=!0,this._pendingChanges.remove({id:i})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(let l of e)this._insertWhitespace(l);for(let l of t)this._changeOneWhitespace(l.id,l.newAfterLineNumber,l.newHeight);for(let l of n){let d=this._findWhitespaceIndex(l.id);d!==-1&&this._removeWhitespace(d)}return}let i=new Set;for(let l of n)i.add(l.id);let o=new Map;for(let l of t)o.set(l.id,l);let s=l=>{let d=[];for(let c of l)if(!i.has(c.id)){if(o.has(c.id)){let p=o.get(c.id);c.afterLineNumber=p.newAfterLineNumber,c.height=p.newHeight}d.push(c)}return d},a=s(this._arr).concat(s(e));a.sort((l,d)=>l.afterLineNumber===d.afterLineNumber?l.ordinal-d.ordinal:l.afterLineNumber-d.afterLineNumber),this._arr=a,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){let t=r.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){let t=this._arr;for(let n=0,i=t.length;n<i;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){let i=this._findWhitespaceIndex(e);if(i!==-1&&(this._arr[i].height!==n&&(this._arr[i].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,i-1)),this._arr[i].afterLineNumber!==t)){let o=this._arr[i];this._removeWhitespace(i),o.afterLineNumber=t,this._insertWhitespace(o)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount-=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){let o=this._arr[n].afterLineNumber;e<=o&&o<=t?this._arr[n].afterLineNumber=e-1:o>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e=e|0,t=t|0,this._lineCount+=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){let o=this._arr[n].afterLineNumber;e<=o&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),this._arr.length===0?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e=e|0;let t=Math.max(0,this._prefixSumValidIndex+1);t===0&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();let e=this._lineHeight*this._lineCount,t=this.getWhitespacesTotalHeight();return e+t+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e=e|0;let t=this._findLastWhitespaceBeforeLineNumber(e);return t===-1?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e=e|0;let t=this._arr,n=0,i=t.length-1;for(;n<=i;){let s=(i-n|0)/2|0,a=n+s|0;if(t[a].afterLineNumber<e){if(a+1>=t.length||t[a+1].afterLineNumber>=e)return a;n=a+1|0}else i=a-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e=e|0;let n=this._findLastWhitespaceBeforeLineNumber(e)+1;return n<this._arr.length?n:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e=e|0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let n;e>1?n=this._lineHeight*(e-1):n=0;let i=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(t?1:0));return n+i+this._paddingTop}getVerticalOffsetAfterLineNumber(e,t=!1){this._checkPendingChanges(),e=e|0;let n=this._lineHeight*e,i=this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0));return n+i+this._paddingTop}hasWhitespace(){return this._checkPendingChanges(),this.getWhitespacesCount()>0}getWhitespaceMinWidth(){if(this._checkPendingChanges(),this._minWidth===-1){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();let t=this.getLinesTotalHeight();return e>t}isInTopPadding(e){return this._paddingTop===0?!1:(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(this._paddingBottom===0)return!1;this._checkPendingChanges();let t=this.getLinesTotalHeight();return e>=t-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),e=e|0,e<0)return 1;let t=this._lineCount|0,n=this._lineHeight,i=1,o=t;for(;i<o;){let s=(i+o)/2|0,a=this.getVerticalOffsetForLineNumber(s)|0;if(e>=a+n)i=s+1;else{if(e>=a)return s;o=s}}return i>t?t:i}getLinesViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;let n=this._lineHeight,i=this.getLineNumberAtOrAfterVerticalOffset(e)|0,o=this.getVerticalOffsetForLineNumber(i)|0,s=this._lineCount|0,a=this.getFirstWhitespaceIndexAfterLineNumber(i)|0,l=this.getWhitespacesCount()|0,d,c;a===-1?(a=l,c=s+1,d=0):(c=this.getAfterLineNumberForWhitespaceIndex(a)|0,d=this.getHeightForWhitespaceIndex(a)|0);let p=o,h=p,g=5e5,f=0;o>=g&&(f=Math.floor(o/g)*g,f=Math.floor(f/n)*n,h-=f);let m=[],b=e+(t-e)/2,v=-1;for(let w=i;w<=s;w++){if(v===-1){let P=p,R=p+n;(P<=b&&b<R||P>b)&&(v=w)}for(p+=n,m[w-i]=h,h+=n;c===w;)h+=d,p+=d,a++,a>=l?c=s+1:(c=this.getAfterLineNumberForWhitespaceIndex(a)|0,d=this.getHeightForWhitespaceIndex(a)|0);if(p>=t){s=w;break}}v===-1&&(v=s);let S=this.getVerticalOffsetForLineNumber(s)|0,x=i,E=s;return x<E&&o<e&&x++,x<E&&S+n>t&&E--,{bigNumbersDelta:f,startLineNumber:i,endLineNumber:s,relativeVerticalOffset:m,centeredLineNumber:v,completelyVisibleStartLineNumber:x,completelyVisibleEndLineNumber:E,lineHeight:this._lineHeight}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e=e|0;let t=this.getAfterLineNumberForWhitespaceIndex(e),n;t>=1?n=this._lineHeight*t:n=0;let i;return e>0?i=this.getWhitespacesAccumulatedHeight(e-1):i=0,n+i+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e=e|0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;let i=this.getVerticalOffsetForWhitespaceIndex(n),o=this.getHeightForWhitespaceIndex(n);if(e>=i+o)return-1;for(;t<n;){let s=Math.floor((t+n)/2),a=this.getVerticalOffsetForWhitespaceIndex(s),l=this.getHeightForWhitespaceIndex(s);if(e>=a+l)t=s+1;else{if(e>=a)return s;n=s}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e=e|0;let t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0||t>=this.getWhitespacesCount())return null;let n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;let i=this.getHeightForWhitespaceIndex(t),o=this.getIdForWhitespaceIndex(t),s=this.getAfterLineNumberForWhitespaceIndex(t);return{id:o,afterLineNumber:s,verticalOffset:n,height:i}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e=e|0,t=t|0;let n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),i=this.getWhitespacesCount()-1;if(n<0)return[];let o=[];for(let s=n;s<=i;s++){let a=this.getVerticalOffsetForWhitespaceIndex(s),l=this.getHeightForWhitespaceIndex(s);if(a>=t)break;o.push({id:this.getIdForWhitespaceIndex(s),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(s),verticalOffset:a,height:l})}return o}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e=e|0,this._arr[e].height}};var EJ=125,Bg=class{width;contentWidth;scrollWidth;height;contentHeight;scrollHeight;constructor(e,t,n,i){e=e|0,t=t|0,n=n|0,i=i|0,e<0&&(e=0),t<0&&(t=0),n<0&&(n=0),i<0&&(i=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=i,this.scrollHeight=Math.max(n,i)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}},kW=class extends N{_scrollable;_dimensions;onDidScroll;_onDidContentSizeChange=this._register(new T);onDidContentSizeChange=this._onDidContentSizeChange.event;constructor(e,t){super(),this._dimensions=new Bg(0,0,0,0),this._scrollable=this._register(new Va({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;let t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);let n=t.contentWidth!==e.contentWidth,i=t.contentHeight!==e.contentHeight;(n||i)&&this._onDidContentSizeChange.fire(new Qk(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}},hR=class extends N{_configuration;_linesLayout;_maxLineWidth;_overlayWidgetsMinWidth;_scrollable;onDidScroll;onDidContentSizeChange;constructor(e,t,n){super(),this._configuration=e;let i=this._configuration.options,o=i.get(147),s=i.get(85);this._linesLayout=new pR(t,i.get(68),s.top,s.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new kW(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new Bg(o.contentWidth,0,o.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(116)?EJ:0)}onConfigurationChanged(e){let t=this._configuration.options;if(e.hasChanged(68)&&this._linesLayout.setLineHeight(t.get(68)),e.hasChanged(85)){let n=t.get(85);this._linesLayout.setPadding(n.top,n.bottom)}if(e.hasChanged(147)){let n=t.get(147),i=n.contentWidth,o=n.height,s=this._scrollable.getScrollDimensions(),a=s.contentWidth;this._scrollable.setScrollDimensions(new Bg(i,s.contentWidth,o,this._getContentHeight(i,o,a)))}else this._updateHeight();e.hasChanged(116)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){let i=this._configuration.options.get(105);return i.horizontal===2||e>=t?0:i.horizontalScrollbarSize}_getContentHeight(e,t,n){let i=this._configuration.options,o=this._linesLayout.getLinesTotalHeight();return i.get(107)?o+=Math.max(0,t-i.get(68)-i.get(85).bottom):i.get(105).ignoreHorizontalScrollbarInContentHeight||(o+=this._getHorizontalScrollbarHeight(e,n)),o}_updateHeight(){let e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,i=e.contentWidth;this._scrollable.setScrollDimensions(new Bg(t,e.contentWidth,n,this._getContentHeight(t,n,i)))}getCurrentViewport(){let e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new LI(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){let e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new LI(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(){let e=this._configuration.options,t=this._maxLineWidth,n=e.get(148),i=e.get(51),o=e.get(147);if(n.isViewportWrapping){let s=e.get(74);return t>o.contentWidth+i.typicalHalfwidthCharacterWidth&&s.enabled&&s.side==="right"?t+o.verticalScrollbarWidth:t}else{let s=e.get(106)*i.typicalHalfwidthCharacterWidth,a=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+s+o.verticalScrollbarWidth,a,this._overlayWidgetsMinWidth)}}setMaxLineWidth(e){this._maxLineWidth=e,this._updateContentWidth()}setOverlayWidgetsMinWidth(e){this._overlayWidgetsMinWidth=e,this._updateContentWidth()}_updateContentWidth(){let e=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new Bg(e.width,this._computeContentWidth(),e.height,e.contentHeight)),this._updateHeight()}saveState(){let e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t),i=this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n);return{scrollTop:t,scrollTopWithoutViewZones:t-i,scrollLeft:e.scrollLeft}}changeWhitespace(e){let t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e,t=!1){return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){let e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){let t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){let e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){t===1?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(e,t){let n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}};function fR(r,e){return r===null?e?gR.INSTANCE:mR.INSTANCE:new MW(r,e)}var MW=class{_projectionData;_isVisible;constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,n){this._assertVisible();let i=n>0?this._projectionData.breakOffsets[n-1]:0,o=this._projectionData.breakOffsets[n],s;if(this._projectionData.injectionOffsets!==null){let a=this._projectionData.injectionOffsets.map((d,c)=>new Wr(0,0,d+1,this._projectionData.injectionOptions[c],0));s=Wr.applyInjectedText(e.getLineContent(t),a).substring(i,o)}else s=e.getValueInRange({startLineNumber:t,startColumn:i+1,endLineNumber:t,endColumn:o+1});return n>0&&(s=s3(this._projectionData.wrappedTextIndentLength)+s),s}getViewLineLength(e,t,n){return this._assertVisible(),this._projectionData.getLineLength(n)}getViewLineMinColumn(e,t,n){return this._assertVisible(),this._projectionData.getMinOutputOffset(n)+1}getViewLineMaxColumn(e,t,n){return this._assertVisible(),this._projectionData.getMaxOutputOffset(n)+1}getViewLineData(e,t,n){let i=new Array;return this.getViewLinesData(e,t,n,1,0,[!0],i),i[0]}getViewLinesData(e,t,n,i,o,s,a){this._assertVisible();let l=this._projectionData,d=l.injectionOffsets,c=l.injectionOptions,p=null;if(d){p=[];let g=0,f=0;for(let m=0;m<l.getOutputLineCount();m++){let b=new Array;p[m]=b;let v=m>0?l.breakOffsets[m-1]:0,S=l.breakOffsets[m];for(;f<d.length;){let x=c[f].content.length,E=d[f]+g,w=E+x;if(E>S)break;if(v<w){let P=c[f];if(P.inlineClassName){let R=m>0?l.wrappedTextIndentLength:0,O=R+Math.max(E-v,0),M=R+Math.min(w-v,S-v);O!==M&&b.push(new uw(O,M,P.inlineClassName,P.inlineClassNameAffectsLetterSpacing))}}if(w<=S)g+=x,f++;else break}}}let h;if(d){let g=[];for(let f=0;f<d.length;f++){let m=d[f],b=c[f].tokens;b?b.forEach((v,S)=>{g.push({offset:m,text:v.substring(c[f].content),tokenMetadata:S.metadata})}):g.push({offset:m,text:c[f].content,tokenMetadata:zn.defaultTokenMetadata})}h=e.tokenization.getLineTokens(t).withInserted(g)}else h=e.tokenization.getLineTokens(t);for(let g=n;g<n+i;g++){let f=o+g-n;if(!s[f]){a[f]=null;continue}a[f]=this._getViewLineData(h,p?p[g]:null,g)}}_getViewLineData(e,t,n){this._assertVisible();let i=this._projectionData,o=n>0?i.wrappedTextIndentLength:0,s=n>0?i.breakOffsets[n-1]:0,a=i.breakOffsets[n],l=e.sliceAndInflate(s,a,o),d=l.getLineContent();n>0&&(d=s3(i.wrappedTextIndentLength)+d);let c=this._projectionData.getMinOutputOffset(n)+1,p=d.length+1,h=n+1<this.getViewLineCount(),g=n===0?0:i.breakOffsetsVisibleColumn[n-1];return new zh(d,h,c,p,g,l,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t,n=2){return this._assertVisible(),this._projectionData.translateToOutputPosition(t-1,n).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();let n=this._projectionData.translateToOutputPosition(t-1);return e+n.outputLineIndex}normalizePosition(e,t,n){let i=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,n).toPosition(i)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}},gR=class r{static INSTANCE=new r;constructor(){}isVisible(){return!0}setVisible(e){return e?this:mR.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){let i=e.tokenization.getLineTokens(t),o=i.getLineContent();return new zh(o,!1,1,o.length+1,0,i.inflate(),null)}getViewLinesData(e,t,n,i,o,s,a){if(!s[o]){a[o]=null;return}a[o]=this.getViewLineData(e,t,0)}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new F(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n){return t}getInjectedTextAt(e,t){return null}},mR=class r{static INSTANCE=new r;constructor(){}isVisible(){return!1}setVisible(e){return e?gR.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw new Error("Not supported")}getViewLineLength(e,t,n){throw new Error("Not supported")}getViewLineMinColumn(e,t,n){throw new Error("Not supported")}getViewLineMaxColumn(e,t,n){throw new Error("Not supported")}getViewLineData(e,t,n){throw new Error("Not supported")}getViewLinesData(e,t,n,i,o,s,a){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,n){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}},RW=[""];function s3(r){if(r>=RW.length)for(let e=1;e<=r;e++)RW[e]=TJ(e);return RW[r]}function TJ(r){return new Array(r+1).join(" ")}var bR=class{_values;_isValid;_validEndIndex;_prefixSum;_indexBySum;constructor(e){this._values=e,this._isValid=!1,this._validEndIndex=-1,this._prefixSum=[],this._indexBySum=[]}getTotalSum(){return this._ensureValid(),this._indexBySum.length}getPrefixSum(e){return this._ensureValid(),e===0?0:this._prefixSum[e-1]}getIndexOf(e){this._ensureValid();let t=this._indexBySum[e],n=t>0?this._prefixSum[t-1]:0;return new OW(t,e-n)}removeValues(e,t){this._values.splice(e,t),this._invalidate(e)}insertValues(e,t){this._values=kl(this._values,e,t),this._invalidate(e)}_invalidate(e){this._isValid=!1,this._validEndIndex=Math.min(this._validEndIndex,e-1)}_ensureValid(){if(!this._isValid){for(let e=this._validEndIndex+1,t=this._values.length;e<t;e++){let n=this._values[e],i=e>0?this._prefixSum[e-1]:0;this._prefixSum[e]=i+n;for(let o=0;o<n;o++)this._indexBySum[i+o]=e}this._prefixSum.length=this._values.length,this._indexBySum.length=this._prefixSum[this._prefixSum.length-1],this._isValid=!0,this._validEndIndex=this._values.length-1}}setValue(e,t){this._values[e]!==t&&(this._values[e]=t,this._invalidate(e))}},OW=class{constructor(e,t){this.index=e;this.remainder=t;this.index=e,this.remainder=t}_prefixSumIndexOfResultBrand=void 0};var vR=class{_editorId;model;_validModelVersionId;_domLineBreaksComputerFactory;_monospaceLineBreaksComputerFactory;fontInfo;tabSize;wrappingColumn;wrappingIndent;wordBreak;wrappingStrategy;modelLineProjections;projectedModelLineLineCounts;hiddenAreasDecorationIds;constructor(e,t,n,i,o,s,a,l,d,c){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=i,this.fontInfo=o,this.tabSize=s,this.wrappingStrategy=a,this.wrappingColumn=l,this.wrappingIndent=d,this.wordBreak=c,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new PW(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));let n=this.model.getLinesContent(),i=this.model.getInjectedTextDecorations(this._editorId),o=n.length,s=this.createLineBreaksComputer(),a=new Rr(Wr.fromDecorations(i));for(let m=0;m<o;m++){let b=a.takeWhile(v=>v.lineNumber===m+1);s.addRequest(n[m],b,t?t[m]:null)}let l=s.finalize(),d=[],c=this.hiddenAreasDecorationIds.map(m=>this.model.getDecorationRange(m)).sort(D.compareRangesUsingStarts),p=1,h=0,g=-1,f=g+1<c.length?h+1:o+2;for(let m=0;m<o;m++){let b=m+1;b===f&&(g++,p=c[g].startLineNumber,h=c[g].endLineNumber,f=g+1<c.length?h+1:o+2);let v=b>=p&&b<=h,S=fR(l[m],!v);d[m]=S.getViewLineCount(),this.modelLineProjections[m]=S}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new bR(d)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map(e=>this.model.getDecorationRange(e))}setHiddenAreas(e){let t=e.map(h=>this.model.validateRange(h)),n=wJ(t),i=this.hiddenAreasDecorationIds.map(h=>this.model.getDecorationRange(h)).sort(D.compareRangesUsingStarts);if(n.length===i.length){let h=!1;for(let g=0;g<n.length;g++)if(!n[g].equalsRange(i[g])){h=!0;break}if(!h)return!1}let o=n.map(h=>({range:h,options:Bn.EMPTY}));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,o);let s=n,a=1,l=0,d=-1,c=d+1<s.length?l+1:this.modelLineProjections.length+2,p=!1;for(let h=0;h<this.modelLineProjections.length;h++){let g=h+1;g===c&&(d++,a=s[d].startLineNumber,l=s[d].endLineNumber,c=d+1<s.length?l+1:this.modelLineProjections.length+2);let f=!1;if(g>=a&&g<=l?this.modelLineProjections[h].isVisible()&&(this.modelLineProjections[h]=this.modelLineProjections[h].setVisible(!1),f=!0):(p=!0,this.modelLineProjections[h].isVisible()||(this.modelLineProjections[h]=this.modelLineProjections[h].setVisible(!0),f=!0)),f){let m=this.modelLineProjections[h].getViewLineCount();this.projectedModelLineLineCounts.setValue(h,m)}}return p||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return e<1||e>this.modelLineProjections.length?!1:this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize===e?!1:(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,i,o){let s=this.fontInfo.equals(e),a=this.wrappingStrategy===t,l=this.wrappingColumn===n,d=this.wrappingIndent===i,c=this.wordBreak===o;if(s&&a&&l&&d&&c)return!1;let p=s&&a&&!l&&d&&c;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=i,this.wordBreak=o;let h=null;if(p){h=[];for(let g=0,f=this.modelLineProjections.length;g<f;g++)h[g]=this.modelLineProjections[g].getProjectionData()}return this._constructLines(!1,h),!0}createLineBreaksComputer(){return(this.wrappingStrategy==="advanced"?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;let i=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,o=this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections.splice(t-1,n-t+1),this.projectedModelLineLineCounts.removeValues(t-1,n-t+1),new Sf(i,o)}onModelLinesInserted(e,t,n,i){if(!e||e<=this._validModelVersionId)return null;let o=t>2&&!this.modelLineProjections[t-2].isVisible(),s=t===1?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,a=0,l=[],d=[];for(let c=0,p=i.length;c<p;c++){let h=fR(i[c],!o);l.push(h);let g=h.getViewLineCount();a+=g,d[c]=g}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(l).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,d),new Cf(s,s+a-1)}onModelLineChanged(e,t,n){if(e!==null&&e<=this._validModelVersionId)return[!1,null,null,null];let i=t-1,o=this.modelLineProjections[i].getViewLineCount(),s=this.modelLineProjections[i].isVisible(),a=fR(n,s);this.modelLineProjections[i]=a;let l=this.modelLineProjections[i].getViewLineCount(),d=!1,c=0,p=-1,h=0,g=-1,f=0,m=-1;o>l?(c=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,p=c+l-1,f=p+1,m=f+(o-l)-1,d=!0):o<l?(c=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,p=c+o-1,h=p+1,g=h+(l-o)-1,d=!0):(c=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,p=c+l-1),this.projectedModelLineLineCounts.setValue(i,l);let b=c<=p?new DI(c,p-c+1):null,v=h<=g?new Cf(h,g):null,S=f<=m?new Sf(f,m):null;return[d,b,v,S]}acceptVersionId(e){this._validModelVersionId=e,this.modelLineProjections.length===1&&!this.modelLineProjections[0].isVisible()&&this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;let t=this.getViewLineCount();return e>t?t:e|0}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);let i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),o=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),s=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),a=this.model.guides.getActiveIndentGuide(i.lineNumber,o.lineNumber,s.lineNumber),l=this.convertModelPositionToViewPosition(a.startLineNumber,1),d=this.convertModelPositionToViewPosition(a.endLineNumber,this.model.getLineMaxColumn(a.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:d.lineNumber,indent:a.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);let t=this.projectedModelLineLineCounts.getIndexOf(e-1),n=t.index,i=t.remainder;return new yR(n+1,i)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){let t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new F(e.modelLineNumber,i)}getModelEndPositionOfViewLine(e){let t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new F(e.modelLineNumber,i)}getViewLineInfosGroupedByModelRanges(e,t){let n=this.getViewLineInfo(e),i=this.getViewLineInfo(t),o=new Array,s=this.getModelStartPositionOfViewLine(n),a=new Array;for(let l=n.modelLineNumber;l<=i.modelLineNumber;l++){let d=this.modelLineProjections[l-1];if(d.isVisible()){let c=l===n.modelLineNumber?n.modelLineWrappedLineIdx:0,p=l===i.modelLineNumber?i.modelLineWrappedLineIdx+1:d.getViewLineCount();for(let h=c;h<p;h++)a.push(new yR(l,h))}if(!d.isVisible()&&s){let c=new F(l-1,this.model.getLineMaxColumn(l-1)+1),p=D.fromPositions(s,c);o.push(new IR(p,a)),a=[],s=null}else d.isVisible()&&!s&&(s=new F(l,1))}if(s){let l=D.fromPositions(s,this.getModelEndPositionOfViewLine(i));o.push(new IR(l,a))}return o}getViewLinesBracketGuides(e,t,n,i){let o=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,s=[];for(let a of this.getViewLineInfosGroupedByModelRanges(e,t)){let l=a.modelRange.startLineNumber,d=this.model.guides.getLinesBracketGuides(l,a.modelRange.endLineNumber,o,i);for(let c of a.viewLines){let h=d[c.modelLineNumber-l].map(g=>{if(g.forWrappedLinesAfterColumn!==-1&&this.modelLineProjections[c.modelLineNumber-1].getViewPositionOfModelPosition(0,g.forWrappedLinesAfterColumn).lineNumber>=c.modelLineWrappedLineIdx||g.forWrappedLinesBeforeOrAtColumn!==-1&&this.modelLineProjections[c.modelLineNumber-1].getViewPositionOfModelPosition(0,g.forWrappedLinesBeforeOrAtColumn).lineNumber<c.modelLineWrappedLineIdx)return;if(!g.horizontalLine)return g;let f=-1;if(g.column!==-1){let v=this.modelLineProjections[c.modelLineNumber-1].getViewPositionOfModelPosition(0,g.column);if(v.lineNumber===c.modelLineWrappedLineIdx)f=v.column;else if(v.lineNumber<c.modelLineWrappedLineIdx)f=this.getMinColumnOfViewLine(c);else if(v.lineNumber>c.modelLineWrappedLineIdx)return}let m=this.convertModelPositionToViewPosition(c.modelLineNumber,g.horizontalLine.endColumn),b=this.modelLineProjections[c.modelLineNumber-1].getViewPositionOfModelPosition(0,g.horizontalLine.endColumn);return b.lineNumber===c.modelLineWrappedLineIdx?new ra(g.visibleColumn,f,g.className,new mc(g.horizontalLine.top,m.column),-1,-1):b.lineNumber<c.modelLineWrappedLineIdx||g.visibleColumn!==-1?void 0:new ra(g.visibleColumn,f,g.className,new mc(g.horizontalLine.top,this.getMaxColumnOfViewLine(c)),-1,-1)});s.push(h.filter(g=>!!g))}}return s}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);let n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),i=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t)),o=[],s=[],a=[],l=n.lineNumber-1,d=i.lineNumber-1,c=null;for(let f=l;f<=d;f++){let m=this.modelLineProjections[f];if(m.isVisible()){let b=m.getViewLineNumberOfModelPosition(0,f===l?n.column:1),v=m.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(f+1)),S=v-b+1,x=0;S>1&&m.getViewLineMinColumn(this.model,f+1,v)===1&&(x=b===0?1:2),s.push(S),a.push(x),c===null&&(c=new F(f+1,0))}else c!==null&&(o=o.concat(this.model.guides.getLinesIndentGuides(c.lineNumber,f)),c=null)}c!==null&&(o=o.concat(this.model.guides.getLinesIndentGuides(c.lineNumber,i.lineNumber)),c=null);let p=t-e+1,h=new Array(p),g=0;for(let f=0,m=o.length;f<m;f++){let b=o[f],v=Math.min(p-g,s[f]),S=a[f],x;S===2?x=0:S===1?x=1:x=v;for(let E=0;E<v;E++)E===x&&(b=0),h[g++]=b}return h}getViewLineContent(e){let t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){let t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){let t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){let t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){let t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);let i=this.projectedModelLineLineCounts.getIndexOf(e-1),o=e,s=i.index,a=i.remainder,l=[];for(let d=s,c=this.model.getLineCount();d<c;d++){let p=this.modelLineProjections[d];if(!p.isVisible())continue;let h=d===s?a:0,g=p.getViewLineCount()-h,f=!1;if(o+g>t&&(f=!0,g=t-o+1),p.getViewLinesData(this.model,d+1,h,g,o-e,n,l),o+=g,f)break}return l}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);let i=this.projectedModelLineLineCounts.getIndexOf(e-1),o=i.index,s=i.remainder,a=this.modelLineProjections[o],l=a.getViewLineMinColumn(this.model,o+1,s),d=a.getViewLineMaxColumn(this.model,o+1,s);t<l&&(t=l),t>d&&(t=d);let c=a.getModelColumnOfViewPosition(s,t);return this.model.validatePosition(new F(o+1,c)).equals(n)?new F(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){let n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),i=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new D(n.lineNumber,n.column,i.lineNumber,i.column)}convertViewPositionToModelPosition(e,t){let n=this.getViewLineInfo(e),i=this.modelLineProjections[n.modelLineNumber-1].getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,t);return this.model.validatePosition(new F(n.modelLineNumber,i))}convertViewRangeToModelRange(e){let t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new D(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t,n=2,i=!1,o=!1){let s=this.model.validatePosition(new F(e,t)),a=s.lineNumber,l=s.column,d=a-1,c=!1;if(o)for(;d<this.modelLineProjections.length&&!this.modelLineProjections[d].isVisible();)d++,c=!0;else for(;d>0&&!this.modelLineProjections[d].isVisible();)d--,c=!0;if(d===0&&!this.modelLineProjections[d].isVisible())return new F(i?0:1,1);let p=1+this.projectedModelLineLineCounts.getPrefixSum(d),h;return c?o?h=this.modelLineProjections[d].getViewPositionOfModelPosition(p,1,n):h=this.modelLineProjections[d].getViewPositionOfModelPosition(p,this.model.getLineMaxColumn(d+1),n):h=this.modelLineProjections[a-1].getViewPositionOfModelPosition(p,l,n),h}convertModelRangeToViewRange(e,t=0){if(e.isEmpty()){let n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return D.fromPositions(n)}else{let n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),i=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new D(n.lineNumber,n.column,i.lineNumber,i.column)}}getViewLineNumberOfModelPosition(e,t){let n=e-1;if(this.modelLineProjections[n].isVisible()){let o=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(o,t)}for(;n>0&&!this.modelLineProjections[n].isVisible();)n--;if(n===0&&!this.modelLineProjections[n].isVisible())return 1;let i=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(i,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,t,n,i,o){let s=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),a=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(a.lineNumber-s.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new D(s.lineNumber,1,a.lineNumber,a.column),t,n,i,o);let l=[],d=s.lineNumber-1,c=a.lineNumber-1,p=null;for(let m=d;m<=c;m++)if(this.modelLineProjections[m].isVisible())p===null&&(p=new F(m+1,m===d?s.column:1));else if(p!==null){let v=this.model.getLineMaxColumn(m);l=l.concat(this.model.getDecorationsInRange(new D(p.lineNumber,p.column,m,v),t,n,i)),p=null}p!==null&&(l=l.concat(this.model.getDecorationsInRange(new D(p.lineNumber,p.column,a.lineNumber,a.column),t,n,i)),p=null),l.sort((m,b)=>{let v=D.compareRangesUsingStarts(m.range,b.range);return v===0?m.id<b.id?-1:m.id>b.id?1:0:v});let h=[],g=0,f=null;for(let m of l){let b=m.id;f!==b&&(f=b,h[g++]=m)}return h}getInjectedTextAt(e){let t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){let n=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].normalizePosition(n.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){let t=this.getViewLineInfo(e);return t.modelLineWrappedLineIdx===0?this.model.getLineIndentColumn(t.modelLineNumber):0}};function wJ(r){if(r.length===0)return[];let e=r.slice();e.sort(D.compareRangesUsingStarts);let t=[],n=e[0].startLineNumber,i=e[0].endLineNumber;for(let o=1,s=e.length;o<s;o++){let a=e[o];a.startLineNumber>i+1?(t.push(new D(n,1,i,1)),n=a.startLineNumber,i=a.endLineNumber):a.endLineNumber>i&&(i=a.endLineNumber)}return t.push(new D(n,1,i,1)),t}var yR=class{constructor(e,t){this.modelLineNumber=e;this.modelLineWrappedLineIdx=t}get isWrappedLineContinuation(){return this.modelLineWrappedLineIdx>0}},IR=class{constructor(e,t){this.modelRange=e;this.viewLines=t}},PW=class{_lines;constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t,n,i){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t,n,i)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}};var SR=class{model;constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new AW(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,i){return!1}createLineBreaksComputer(){let e=[];return{addRequest:(t,n,i)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new Sf(t,n)}onModelLinesInserted(e,t,n,i){return new Cf(t,n)}onModelLineChanged(e,t,n){return[!1,new DI(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,n){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){let n=t-e+1,i=new Array(n);for(let o=0;o<n;o++)i[o]=0;return i}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){let t=this.model.tokenization.getLineTokens(e),n=t.getLineContent();return new zh(n,!1,1,n.length+1,0,t.inflate(),null)}getViewLinesData(e,t,n){let i=this.model.getLineCount();e=Math.min(Math.max(1,e),i),t=Math.min(Math.max(1,t),i);let o=[];for(let s=e;s<=t;s++){let a=s-e;o[a]=n[a]?this.getViewLineData(s):null}return o}getDecorationsInRange(e,t,n,i,o){return this.model.getDecorationsInRange(e,t,n,i,o)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}},AW=class{_lines;constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){let t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}modelRangeIsVisible(e){let t=this._lines.model.getLineCount();return!(e.startLineNumber<1||e.startLineNumber>t||e.endLineNumber<1||e.endLineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}};var CR=class{editorId;model;configuration;_linesCollection;_coordinatesConverter;_decorationsCache;_cachedModelDecorationsResolver;_cachedModelDecorationsResolverViewRange;constructor(e,t,n,i,o){this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=i,this._coordinatesConverter=o,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){let t=e.id,n=this._decorationsCache[t];if(!n){let i=e.range,o=e.options,s;if(o.isWholeLine){let a=this._coordinatesConverter.convertModelPositionToViewPosition(new F(i.startLineNumber,1),0,!1,!0),l=this._coordinatesConverter.convertModelPositionToViewPosition(new F(i.endLineNumber,this.model.getLineMaxColumn(i.endLineNumber)),1);s=new D(a.lineNumber,a.column,l.lineNumber,l.column)}else s=this._coordinatesConverter.convertModelRangeToViewRange(i,1);n=new Ef(s,o),this._decorationsCache[t]=n}return n}getMinimapDecorationsInRange(e){return this._getDecorationsInRange(e,!0,!1).decorations}getDecorationsViewportData(e){let t=this._cachedModelDecorationsResolver!==null;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e,t=!1,n=!1){let i=new D(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(i,t,n).inlineDecorations[0]}_getDecorationsInRange(e,t,n){let i=this._linesCollection.getDecorationsInRange(e,this.editorId,xh(this.configuration.options),t,n),o=e.startLineNumber,s=e.endLineNumber,a=[],l=0,d=[];for(let c=o;c<=s;c++)d[c-o]=[];for(let c=0,p=i.length;c<p;c++){let h=i[c],g=h.options;if(!_J(this.model,h))continue;let f=this._getOrCreateViewModelDecoration(h),m=f.range;if(a[l++]=f,g.inlineClassName){let b=new Kh(m,g.inlineClassName,g.inlineClassNameAffectsLetterSpacing?3:0),v=Math.max(o,m.startLineNumber),S=Math.min(s,m.endLineNumber);for(let x=v;x<=S;x++)d[x-o].push(b)}if(g.beforeContentClassName&&o<=m.startLineNumber&&m.startLineNumber<=s){let b=new Kh(new D(m.startLineNumber,m.startColumn,m.startLineNumber,m.startColumn),g.beforeContentClassName,1);d[m.startLineNumber-o].push(b)}if(g.afterContentClassName&&o<=m.endLineNumber&&m.endLineNumber<=s){let b=new Kh(new D(m.endLineNumber,m.endColumn,m.endLineNumber,m.endColumn),g.afterContentClassName,2);d[m.endLineNumber-o].push(b)}}return{decorations:a,inlineDecorations:d}}};function _J(r,e){return!(e.options.hideInCommentTokens&&DJ(r,e)||e.options.hideInStringTokens&&LJ(r,e))}function DJ(r,e){return a3(r,e.range,t=>t===1)}function LJ(r,e){return a3(r,e.range,t=>t===2)}function a3(r,e,t){for(let n=e.startLineNumber;n<=e.endLineNumber;n++){let i=r.tokenization.getLineTokens(n),o=n===e.startLineNumber,s=n===e.endLineNumber,a=o?i.findTokenIndexAtOffset(e.startColumn-1):0;for(;a<i.getCount()&&!(s&&i.getStartOffset(a)>e.endColumn-1);){if(!t(i.getStandardTokenType(a)))return!1;a++}}return!0}var Wg=3,xR=class{lanes;persist=0;_requiredLanes=1;constructor(e){this.lanes=new Uint8Array(Math.ceil((e+1)*Wg/8))}reset(e){let t=Math.ceil((e+1)*Wg/8);this.lanes.length<t?this.lanes=new Uint8Array(t):this.lanes.fill(0),this._requiredLanes=1}get requiredLanes(){return this._requiredLanes}push(e,t,n){n&&(this.persist|=1<<e-1);for(let i=t.startLineNumber;i<=t.endLineNumber;i++){let o=Wg*i+(e-1);this.lanes[o>>>3]|=1<<o%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(i))}}getLanesAtLine(e){let t=[],n=Wg*e;for(let i=0;i<Wg;i++)(this.persist&1<<i||this.lanes[n>>>3]&1<<n%8)&&t.push(i+1),n++;return t.length?t:[2]}countAtLine(e){let t=Wg*e,n=0;for(let i=0;i<Wg;i++)(this.persist&1<<i||this.lanes[t>>>3]&1<<t%8)&&n++,t++;return n}};var kJ=!0,ER=class extends N{constructor(t,n,i,o,s,a,l,d,c,p){super();this.languageConfigurationService=l;this._themeService=d;this._attachedView=c;this._transactionalTarget=p;if(this._editorId=t,this._configuration=n,this.model=i,this._eventDispatcher=new Xk,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new bc(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new Hn(()=>this._updateConfigurationViewLineCountNow(),0)),this._hasFocus=!1,this._viewportStart=NW.create(this.model),this.glyphLanes=new xR(0),kJ&&this.model.isTooLargeForTokenization())this._lines=new SR(this.model);else{let h=this._configuration.options,g=h.get(51),f=h.get(141),m=h.get(148),b=h.get(140),v=h.get(131);this._lines=new vR(this._editorId,this.model,o,s,g,this.model.getOptions().tabSize,f,m.wrappingColumn,b,v)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new cR(i,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new hR(this._configuration,this.getLineCount(),a)),this._register(this.viewLayout.onDidScroll(h=>{h.scrollTopChanged&&this._handleVisibleLinesChanged(),h.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new ow(h)),this._eventDispatcher.emitOutgoingEvent(new Jk(h.oldScrollWidth,h.oldScrollLeft,h.oldScrollHeight,h.oldScrollTop,h.scrollWidth,h.scrollLeft,h.scrollHeight,h.scrollTop))})),this._register(this.viewLayout.onDidContentSizeChange(h=>{this._eventDispatcher.emitOutgoingEvent(h)})),this._decorations=new CR(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast(h=>{try{let g=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(g,h)}finally{this._eventDispatcher.endEmitViewEvents()}})),this._register(ov.getInstance().onDidChange(()=>{this._eventDispatcher.emitSingleViewEvent(new aw)})),this._register(this._themeService.onDidColorThemeChange(h=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new rw(h))})),this._updateConfigurationViewLineCountNow()}_editorId;_configuration;model;_eventDispatcher;onEvent;cursorConfig;_updateConfigurationViewLineCount;_hasFocus;_viewportStart;_lines;coordinatesConverter;viewLayout;_cursor;_decorations;glyphLanes;dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(t){this._eventDispatcher.addViewEventHandler(t)}removeViewEventHandler(t){this._eventDispatcher.removeViewEventHandler(t)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){let t=this.viewLayout.getLinesViewportData(),n=new D(t.startLineNumber,this.getLineMinColumn(t.startLineNumber),t.endLineNumber,this.getLineMaxColumn(t.endLineNumber));return this._toModelVisibleRanges(n)}visibleLinesStabilized(){let t=this.getModelVisibleRanges();this._attachedView.setVisibleLines(t,!0)}_handleVisibleLinesChanged(){let t=this.getModelVisibleRanges();this._attachedView.setVisibleLines(t,!1)}setHasFocus(t){this._hasFocus=t,this._cursor.setHasFocus(t),this._eventDispatcher.emitSingleViewEvent(new nw(t)),this._eventDispatcher.emitOutgoingEvent(new Zk(!t,t))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new ZT)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new JT)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){let t=new F(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),n=this.coordinatesConverter.convertViewPositionToModelPosition(t);return new TR(n,this._viewportStart.startLineDelta)}return new TR(null,0)}_onConfigurationChanged(t,n){let i=this._captureStableViewport(),o=this._configuration.options,s=o.get(51),a=o.get(141),l=o.get(148),d=o.get(140),c=o.get(131);this._lines.setWrappingSettings(s,a,l.wrappingColumn,d,c)&&(t.emitViewEvent(new Hh),t.emitViewEvent(new Uh),t.emitViewEvent(new od(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),n.hasChanged(93)&&(this._decorations.reset(),t.emitViewEvent(new od(null))),n.hasChanged(100)&&(this._decorations.reset(),t.emitViewEvent(new od(null))),t.emitViewEvent(new ew(n)),this.viewLayout.onConfigurationChanged(n),i.recoverViewportStart(this.coordinatesConverter,this.viewLayout),bc.shouldRecreate(n)&&(this.cursorConfig=new bc(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText(t=>{try{let i=this._eventDispatcher.beginEmitViewEvents(),o=!1,s=!1,a=t instanceof zu?t.rawContentChangedEvent.changes:t.changes,l=t instanceof zu?t.rawContentChangedEvent.versionId:null,d=this._lines.createLineBreaksComputer();for(let h of a)switch(h.changeType){case 4:{for(let g=0;g<h.detail.length;g++){let f=h.detail[g],m=h.injectedTexts[g];m&&(m=m.filter(b=>!b.ownerId||b.ownerId===this._editorId)),d.addRequest(f,m,null)}break}case 2:{let g=null;h.injectedText&&(g=h.injectedText.filter(f=>!f.ownerId||f.ownerId===this._editorId)),d.addRequest(h.detail,g,null);break}}let c=d.finalize(),p=new Rr(c);for(let h of a)switch(h.changeType){case 1:{this._lines.onModelFlushed(),i.emitViewEvent(new Hh),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),o=!0;break}case 3:{let g=this._lines.onModelLinesDeleted(l,h.fromLineNumber,h.toLineNumber);g!==null&&(i.emitViewEvent(g),this.viewLayout.onLinesDeleted(g.fromLineNumber,g.toLineNumber)),o=!0;break}case 4:{let g=p.takeCount(h.detail.length),f=this._lines.onModelLinesInserted(l,h.fromLineNumber,h.toLineNumber,g);f!==null&&(i.emitViewEvent(f),this.viewLayout.onLinesInserted(f.fromLineNumber,f.toLineNumber)),o=!0;break}case 2:{let g=p.dequeue(),[f,m,b,v]=this._lines.onModelLineChanged(l,h.lineNumber,g);s=f,m&&i.emitViewEvent(m),b&&(i.emitViewEvent(b),this.viewLayout.onLinesInserted(b.fromLineNumber,b.toLineNumber)),v&&(i.emitViewEvent(v),this.viewLayout.onLinesDeleted(v.fromLineNumber,v.toLineNumber));break}case 5:break}l!==null&&this._lines.acceptVersionId(l),this.viewLayout.onHeightMaybeChanged(),!o&&s&&(i.emitViewEvent(new Uh),i.emitViewEvent(new od(null)),this._cursor.onLineMappingChanged(i),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}let n=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&n){let i=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(i){let o=this.coordinatesConverter.convertModelPositionToViewPosition(i.getStartPosition()),s=this.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber);this.viewLayout.setScrollPosition({scrollTop:s+this._viewportStart.startLineDelta},1)}}try{let i=this._eventDispatcher.beginEmitViewEvents();t instanceof zu&&i.emitOutgoingEvent(new aR(t.contentChangedEvent)),this._cursor.onModelContentChanged(i,t)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()})),this._register(this.model.onDidChangeTokens(t=>{let n=[];for(let i=0,o=t.ranges.length;i<o;i++){let s=t.ranges[i],a=this.coordinatesConverter.convertModelPositionToViewPosition(new F(s.fromLineNumber,1)).lineNumber,l=this.coordinatesConverter.convertModelPositionToViewPosition(new F(s.toLineNumber,this.model.getLineMaxColumn(s.toLineNumber))).lineNumber;n[i]={fromLineNumber:a,toLineNumber:l}}this._eventDispatcher.emitSingleViewEvent(new sw(n)),this._eventDispatcher.emitOutgoingEvent(new dR(t))})),this._register(this.model.onDidChangeLanguageConfiguration(t=>{this._eventDispatcher.emitSingleViewEvent(new iw),this.cursorConfig=new bc(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new sR(t))})),this._register(this.model.onDidChangeLanguage(t=>{this.cursorConfig=new bc(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new rR(t))})),this._register(this.model.onDidChangeOptions(t=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{let n=this._eventDispatcher.beginEmitViewEvents();n.emitViewEvent(new Hh),n.emitViewEvent(new Uh),n.emitViewEvent(new od(null)),this._cursor.onLineMappingChanged(n),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new bc(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new lR(t))})),this._register(this.model.onDidChangeDecorations(t=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new od(t)),this._eventDispatcher.emitOutgoingEvent(new oR(t))}))}hiddenAreasModel=new BW;previousHiddenAreas=[];setHiddenAreas(t,n){this.hiddenAreasModel.setHiddenAreas(n,t);let i=this.hiddenAreasModel.getMergedRanges();if(i===this.previousHiddenAreas)return;this.previousHiddenAreas=i;let o=this._captureStableViewport(),s=!1;try{let a=this._eventDispatcher.beginEmitViewEvents();s=this._lines.setHiddenAreas(i),s&&(a.emitViewEvent(new Hh),a.emitViewEvent(new Uh),a.emitViewEvent(new od(null)),this._cursor.onLineMappingChanged(a),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged());let l=o.viewportStartModelPosition?.lineNumber;l&&i.some(c=>c.startLineNumber<=l&&l<=c.endLineNumber)||o.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),s&&this._eventDispatcher.emitOutgoingEvent(new tR)}getVisibleRangesPlusViewportAboveBelow(){let t=this._configuration.options.get(147),n=this._configuration.options.get(68),i=Math.max(20,Math.round(t.height/n)),o=this.viewLayout.getLinesViewportData(),s=Math.max(1,o.completelyVisibleStartLineNumber-i),a=Math.min(this.getLineCount(),o.completelyVisibleEndLineNumber+i);return this._toModelVisibleRanges(new D(s,this.getLineMinColumn(s),a,this.getLineMaxColumn(a)))}getVisibleRanges(){let t=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(t)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(t){let n=this.coordinatesConverter.convertViewRangeToModelRange(t),i=this._lines.getHiddenAreas();if(i.length===0)return[n];let o=[],s=0,a=n.startLineNumber,l=n.startColumn,d=n.endLineNumber,c=n.endColumn;for(let p=0,h=i.length;p<h;p++){let g=i[p].startLineNumber,f=i[p].endLineNumber;f<a||g>d||(a<g&&(o[s++]=new D(a,l,g-1,this.model.getLineMaxColumn(g-1))),a=f+1,l=1)}return(a<d||a===d&&l<c)&&(o[s++]=new D(a,l,d,c)),o}getCompletelyVisibleViewRange(){let t=this.viewLayout.getLinesViewportData(),n=t.completelyVisibleStartLineNumber,i=t.completelyVisibleEndLineNumber;return new D(n,this.getLineMinColumn(n),i,this.getLineMaxColumn(i))}getCompletelyVisibleViewRangeAtScrollTop(t){let n=this.viewLayout.getLinesViewportDataAtScrollTop(t),i=n.completelyVisibleStartLineNumber,o=n.completelyVisibleEndLineNumber;return new D(i,this.getLineMinColumn(i),o,this.getLineMaxColumn(o))}saveState(){let t=this.viewLayout.saveState(),n=t.scrollTop,i=this.viewLayout.getLineNumberAtVerticalOffset(n),o=this.coordinatesConverter.convertViewPositionToModelPosition(new F(i,this.getLineMinColumn(i))),s=this.viewLayout.getVerticalOffsetForLineNumber(i)-n;return{scrollLeft:t.scrollLeft,firstPosition:o,firstPositionDeltaTop:s}}reduceRestoreState(t){if(typeof t.firstPosition>"u")return this._reduceRestoreStateCompatibility(t);let n=this.model.validatePosition(t.firstPosition),i=this.coordinatesConverter.convertModelPositionToViewPosition(n),o=this.viewLayout.getVerticalOffsetForLineNumber(i.lineNumber)-t.firstPositionDeltaTop;return{scrollLeft:t.scrollLeft,scrollTop:o}}_reduceRestoreStateCompatibility(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(t,n,i){this._viewportStart.update(this,t)}getActiveIndentGuide(t,n,i){return this._lines.getActiveIndentGuide(t,n,i)}getLinesIndentGuides(t,n){return this._lines.getViewLinesIndentGuides(t,n)}getBracketGuidesInRangeByLine(t,n,i,o){return this._lines.getViewLinesBracketGuides(t,n,i,o)}getLineContent(t){return this._lines.getViewLineContent(t)}getLineLength(t){return this._lines.getViewLineLength(t)}getLineMinColumn(t){return this._lines.getViewLineMinColumn(t)}getLineMaxColumn(t){return this._lines.getViewLineMaxColumn(t)}getLineFirstNonWhitespaceColumn(t){let n=kn(this.getLineContent(t));return n===-1?0:n+1}getLineLastNonWhitespaceColumn(t){let n=Ds(this.getLineContent(t));return n===-1?0:n+2}getMinimapDecorationsInRange(t){return this._decorations.getMinimapDecorationsInRange(t)}getDecorationsInViewport(t){return this._decorations.getDecorationsViewportData(t).decorations}getInjectedTextAt(t){return this._lines.getInjectedTextAt(t)}getViewportViewLineRenderingData(t,n){let o=this._decorations.getDecorationsViewportData(t).inlineDecorations[n-t.startLineNumber];return this._getViewLineRenderingData(n,o)}getViewLineRenderingData(t){let n=this._decorations.getInlineDecorationsOnLine(t);return this._getViewLineRenderingData(t,n)}_getViewLineRenderingData(t,n){let i=this.model.mightContainRTL(),o=this.model.mightContainNonBasicASCII(),s=this.getTabSize(),a=this._lines.getViewLineData(t);return a.inlineDecorations&&(n=[...n,...a.inlineDecorations.map(l=>l.toInlineDecoration(t))]),new cw(a.minColumn,a.maxColumn,a.content,a.continuesWithWrappedLine,i,o,a.tokens,n,s,a.startVisibleColumn)}getViewLineData(t){return this._lines.getViewLineData(t)}getMinimapLinesRenderingData(t,n,i){let o=this._lines.getViewLinesData(t,n,i);return new dw(this.getTabSize(),o)}getAllOverviewRulerDecorations(t){let n=this.model.getOverviewRulerDecorations(this._editorId,xh(this._configuration.options)),i=new FW;for(let o of n){let s=o.options,a=s.overviewRuler;if(!a)continue;let l=a.position;if(l===0)continue;let d=a.getColor(t.value),c=this.coordinatesConverter.getViewLineNumberOfModelPosition(o.range.startLineNumber,o.range.startColumn),p=this.coordinatesConverter.getViewLineNumberOfModelPosition(o.range.endLineNumber,o.range.endColumn);i.accept(d,s.zIndex,c,p,l)}return i.asArray}_invalidateDecorationsColorCache(){let t=this.model.getOverviewRulerDecorations();for(let n of t)n.options.overviewRuler?.invalidateCachedColor(),n.options.minimap?.invalidateCachedColor()}getValueInRange(t,n){let i=this.coordinatesConverter.convertViewRangeToModelRange(t);return this.model.getValueInRange(i,n)}getValueLengthInRange(t,n){let i=this.coordinatesConverter.convertViewRangeToModelRange(t);return this.model.getValueLengthInRange(i,n)}modifyPosition(t,n){let i=this.coordinatesConverter.convertViewPositionToModelPosition(t),o=this.model.modifyPosition(i,n);return this.coordinatesConverter.convertModelPositionToViewPosition(o)}deduceModelPositionRelativeToViewPosition(t,n,i){let o=this.coordinatesConverter.convertViewPositionToModelPosition(t);this.model.getEOL().length===2&&(n<0?n-=i:n+=i);let a=this.model.getOffsetAt(o)+n;return this.model.getPositionAt(a)}getPlainTextToCopy(t,n,i){let o=i?`\r
`:this.model.getEOL();t=t.slice(0),t.sort(D.compareRangesUsingStarts);let s=!1,a=!1;for(let d of t)d.isEmpty()?s=!0:a=!0;if(!a){if(!n)return"";let d=t.map(p=>p.startLineNumber),c="";for(let p=0;p<d.length;p++)p>0&&d[p-1]===d[p]||(c+=this.model.getLineContent(d[p])+o);return c}if(s&&n){let d=[],c=0;for(let p of t){let h=p.startLineNumber;p.isEmpty()?h!==c&&d.push(this.model.getLineContent(h)):d.push(this.model.getValueInRange(p,i?2:0)),c=h}return d.length===1?d[0]:d}let l=[];for(let d of t)d.isEmpty()||l.push(this.model.getValueInRange(d,i?2:0));return l.length===1?l[0]:l}getRichTextToCopy(t,n){let i=this.model.getLanguageId();if(i===Ni||t.length!==1)return null;let o=t[0];if(o.isEmpty()){if(!n)return null;let p=o.startLineNumber;o=new D(p,this.model.getLineMinColumn(p),p,this.model.getLineMaxColumn(p))}let s=this._configuration.options.get(51),a=this._getColorMap(),d=/[:;\\\/<>]/.test(s.fontFamily)||s.fontFamily===Nr.fontFamily,c;return d?c=Nr.fontFamily:(c=s.fontFamily,c=c.replace(/"/g,"'"),/[,']/.test(c)||/[+ ]/.test(c)&&(c=`'${c}'`),c=`${c}, ${Nr.fontFamily}`),{mode:i,html:`<div style="color: ${a[1]};background-color: ${a[2]};font-family: ${c};font-weight: ${s.fontWeight};font-size: ${s.fontSize}px;line-height: ${s.lineHeight}px;white-space: pre;">`+this._getHTMLToCopy(o,a)+"</div>"}}_getHTMLToCopy(t,n){let i=t.startLineNumber,o=t.startColumn,s=t.endLineNumber,a=t.endColumn,l=this.getTabSize(),d="";for(let c=i;c<=s;c++){let p=this.model.tokenization.getLineTokens(c),h=p.getLineContent(),g=c===i?o-1:0,f=c===s?a-1:h.length;h===""?d+="<br>":d+=r3(h,p.inflate(),n,g,f,l,It)}return d}_getColorMap(){let t=Xo.getColorMap(),n=["#000000"];if(t)for(let i=1,o=t.length;i<o;i++)n[i]=H.Format.CSS.formatHex(t[i]);return n}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(t,n,i){return this._withViewEventsCollector(o=>this._cursor.setStates(o,t,n,i))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(t){this._cursor.setCursorColumnSelectData(t)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(t){this._cursor.setPrevEditOperationType(t)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(t,n,i=0){this._withViewEventsCollector(o=>this._cursor.setSelections(o,t,n,i))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(t){this._withViewEventsCollector(n=>this._cursor.restoreState(n,t))}_executeCursorEdit(t){if(this._cursor.context.cursorConfig.readOnly){this._eventDispatcher.emitOutgoingEvent(new iR);return}this._withViewEventsCollector(t)}executeEdits(t,n,i){this._executeCursorEdit(o=>this._cursor.executeEdits(o,t,n,i))}startComposition(){this._executeCursorEdit(t=>this._cursor.startComposition(t))}endComposition(t){this._executeCursorEdit(n=>this._cursor.endComposition(n,t))}type(t,n){this._executeCursorEdit(i=>this._cursor.type(i,t,n))}compositionType(t,n,i,o,s){this._executeCursorEdit(a=>this._cursor.compositionType(a,t,n,i,o,s))}paste(t,n,i,o){this._executeCursorEdit(s=>this._cursor.paste(s,t,n,i,o))}cut(t){this._executeCursorEdit(n=>this._cursor.cut(n,t))}executeCommand(t,n){this._executeCursorEdit(i=>this._cursor.executeCommand(i,t,n))}executeCommands(t,n){this._executeCursorEdit(i=>this._cursor.executeCommands(i,t,n))}revealAllCursors(t,n,i=!1){this._withViewEventsCollector(o=>this._cursor.revealAll(o,t,i,0,n,0))}revealPrimaryCursor(t,n,i=!1){this._withViewEventsCollector(o=>this._cursor.revealPrimary(o,t,i,0,n,0))}revealTopMostCursor(t){let n=this._cursor.getTopMostViewPosition(),i=new D(n.lineNumber,n.column,n.lineNumber,n.column);this._withViewEventsCollector(o=>o.emitViewEvent(new yc(t,!1,i,null,0,!0,0)))}revealBottomMostCursor(t){let n=this._cursor.getBottomMostViewPosition(),i=new D(n.lineNumber,n.column,n.lineNumber,n.column);this._withViewEventsCollector(o=>o.emitViewEvent(new yc(t,!1,i,null,0,!0,0)))}revealRange(t,n,i,o,s){this._withViewEventsCollector(a=>a.emitViewEvent(new yc(t,!1,i,null,o,n,s)))}changeWhitespace(t){this.viewLayout.changeWhitespace(t)&&(this._eventDispatcher.emitSingleViewEvent(new lw),this._eventDispatcher.emitOutgoingEvent(new eR))}_withViewEventsCollector(t){return this._transactionalTarget.batchChanges(()=>{try{let n=this._eventDispatcher.beginEmitViewEvents();return t(n)}finally{this._eventDispatcher.endEmitViewEvents()}})}batchEvents(t){this._withViewEventsCollector(()=>{t()})}normalizePosition(t,n){return this._lines.normalizePosition(t,n)}getLineIndentColumn(t){return this._lines.getLineIndentColumn(t)}},NW=class r{constructor(e,t,n,i,o){this._model=e;this._viewLineNumber=t;this._isValid=n;this._modelTrackedRange=i;this._startLineDelta=o}static create(e){let t=e._setTrackedRange(null,new D(1,1,1,1),1);return new r(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){let n=e.coordinatesConverter.convertViewPositionToModelPosition(new F(t,e.getLineMinColumn(t))),i=e.model._setTrackedRange(this._modelTrackedRange,new D(n.lineNumber,n.column,n.lineNumber,n.column),1),o=e.viewLayout.getVerticalOffsetForLineNumber(t),s=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=i,this._startLineDelta=s-o}invalidate(){this._isValid=!1}},FW=class{_asMap=Object.create(null);asArray=[];accept(e,t,n,i,o){let s=this._asMap[e];if(s){let a=s.data,l=a[a.length-3],d=a[a.length-1];if(l===o&&d+1>=n){i>d&&(a[a.length-1]=i);return}a.push(o,n,i)}else{let a=new Gh(e,t,[o,n,i]);this._asMap[e]=a,this.asArray.push(a)}}},BW=class{hiddenAreas=new Map;shouldRecompute=!1;ranges=[];setHiddenAreas(e,t){let n=this.hiddenAreas.get(e);n&&l3(n,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;let e=Array.from(this.hiddenAreas.values()).reduce((t,n)=>RJ(t,n),[]);return l3(this.ranges,e)?this.ranges:(this.ranges=e,this.ranges)}};function RJ(r,e){let t=[],n=0,i=0;for(;n<r.length&&i<e.length;){let o=r[n],s=e[i];if(o.endLineNumber<s.startLineNumber-1)t.push(r[n++]);else if(s.endLineNumber<o.startLineNumber-1)t.push(e[i++]);else{let a=Math.min(o.startLineNumber,s.startLineNumber),l=Math.max(o.endLineNumber,s.endLineNumber);t.push(new D(a,1,l,1)),n++,i++}}for(;n<r.length;)t.push(r[n++]);for(;i<e.length;)t.push(e[i++]);return t}function l3(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(!r[t].equalsRange(e[t]))return!1;return!0}var TR=class{constructor(e,t){this.viewportStartModelPosition=e;this.startLineDelta=t}recoverViewportStart(e,t){if(!this.viewportStartModelPosition)return;let n=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),i=t.getVerticalOffsetForLineNumber(n.lineNumber);t.setScrollPosition({scrollTop:i+this.startLineDelta},1)}};var Ss=class extends N{constructor(t,n,i,o,s,a,l,d,c,p,h,g){super();this.languageConfigurationService=h;s.willCreateCodeEditor();let f={...n};this._domElement=t,this._overflowWidgetsDomNode=f.overflowWidgetsDomNode,delete f.overflowWidgetsDomNode,this._id=++MJ,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=i.telemetryData,this._configuration=this._register(this._createConfiguration(i.isSimpleWidget||!1,i.contextMenuId??(i.isSimpleWidget?Je.SimpleEditorContext:Je.EditorContext),f,p)),this._register(this._configuration.onDidChange(v=>{this._onDidChangeConfiguration.fire(v);let S=this._configuration.options;if(v.hasChanged(147)){let x=S.get(147);this._onDidLayoutChange.fire(x)}})),this._contextKeyService=this._register(l.createScoped(this._domElement)),this._notificationService=c,this._codeEditorService=s,this._commandService=a,this._themeService=d,this._register(new HW(this,this._contextKeyService)),this._register(new UW(this,this._contextKeyService,g)),this._instantiationService=this._register(o.createChild(new Wm([Ne,this._contextKeyService]))),this._modelData=null,this._focusTracker=new zW(t,this._overflowWidgetsDomNode),this._register(this._focusTracker.onChange(()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())})),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={};let m;Array.isArray(i.contributions)?m=i.contributions:m=ms.getEditorContributions(),this._contributions.initialize(this,m,this._instantiationService);for(let v of ms.getEditorActions()){if(this._actions.has(v.id)){Be(new Error(`Cannot have two actions with the same id ${v.id}`));continue}let S=new qk(v.id,v.label,v.alias,v.metadata,v.precondition??void 0,x=>this._instantiationService.invokeFunction(E=>Promise.resolve(v.runEditorCommand(E,this,x))),this._contextKeyService);this._actions.set(S.id,S)}let b=()=>!this._configuration.options.get(93)&&this._configuration.options.get(36).enabled;this._register(new oE(this._domElement,{onDragOver:v=>{if(!b())return;let S=this.getTargetAtClientPoint(v.clientX,v.clientY);S?.position&&this.showDropIndicatorAt(S.position)},onDrop:async v=>{if(!b()||(this.removeDropIndicator(),!v.dataTransfer))return;let S=this.getTargetAtClientPoint(v.clientX,v.clientY);S?.position&&this._onDropIntoEditor.fire({position:S.position,event:v})},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}static dropIntoEditorDecorationOptions=Bn.register({description:"workbench-dnd-target",className:"dnd-target"});_deliveryQueue=K2();_contributions=this._register(new $k);_onDidDispose=this._register(new T);onDidDispose=this._onDidDispose.event;_onDidChangeModelContent=this._register(new T({deliveryQueue:this._deliveryQueue}));onDidChangeModelContent=this._onDidChangeModelContent.event;_onDidChangeModelLanguage=this._register(new T({deliveryQueue:this._deliveryQueue}));onDidChangeModelLanguage=this._onDidChangeModelLanguage.event;_onDidChangeModelLanguageConfiguration=this._register(new T({deliveryQueue:this._deliveryQueue}));onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event;_onDidChangeModelOptions=this._register(new T({deliveryQueue:this._deliveryQueue}));onDidChangeModelOptions=this._onDidChangeModelOptions.event;_onDidChangeModelDecorations=this._register(new T({deliveryQueue:this._deliveryQueue}));onDidChangeModelDecorations=this._onDidChangeModelDecorations.event;_onDidChangeModelTokens=this._register(new T({deliveryQueue:this._deliveryQueue}));onDidChangeModelTokens=this._onDidChangeModelTokens.event;_onDidChangeConfiguration=this._register(new T({deliveryQueue:this._deliveryQueue}));onDidChangeConfiguration=this._onDidChangeConfiguration.event;_onWillChangeModel=this._register(new T({deliveryQueue:this._deliveryQueue}));onWillChangeModel=this._onWillChangeModel.event;_onDidChangeModel=this._register(new T({deliveryQueue:this._deliveryQueue}));onDidChangeModel=this._onDidChangeModel.event;_onDidChangeCursorPosition=this._register(new T({deliveryQueue:this._deliveryQueue}));onDidChangeCursorPosition=this._onDidChangeCursorPosition.event;_onDidChangeCursorSelection=this._register(new T({deliveryQueue:this._deliveryQueue}));onDidChangeCursorSelection=this._onDidChangeCursorSelection.event;_onDidAttemptReadOnlyEdit=this._register(new lo(this._contributions,this._deliveryQueue));onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event;_onDidLayoutChange=this._register(new T({deliveryQueue:this._deliveryQueue}));onDidLayoutChange=this._onDidLayoutChange.event;_editorTextFocus=this._register(new wR({deliveryQueue:this._deliveryQueue}));onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue;onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse;_editorWidgetFocus=this._register(new wR({deliveryQueue:this._deliveryQueue}));onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue;onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse;_onWillType=this._register(new lo(this._contributions,this._deliveryQueue));onWillType=this._onWillType.event;_onDidType=this._register(new lo(this._contributions,this._deliveryQueue));onDidType=this._onDidType.event;_onDidCompositionStart=this._register(new lo(this._contributions,this._deliveryQueue));onDidCompositionStart=this._onDidCompositionStart.event;_onDidCompositionEnd=this._register(new lo(this._contributions,this._deliveryQueue));onDidCompositionEnd=this._onDidCompositionEnd.event;_onDidPaste=this._register(new lo(this._contributions,this._deliveryQueue));onDidPaste=this._onDidPaste.event;_onMouseUp=this._register(new lo(this._contributions,this._deliveryQueue));onMouseUp=this._onMouseUp.event;_onMouseDown=this._register(new lo(this._contributions,this._deliveryQueue));onMouseDown=this._onMouseDown.event;_onMouseDrag=this._register(new lo(this._contributions,this._deliveryQueue));onMouseDrag=this._onMouseDrag.event;_onMouseDrop=this._register(new lo(this._contributions,this._deliveryQueue));onMouseDrop=this._onMouseDrop.event;_onMouseDropCanceled=this._register(new lo(this._contributions,this._deliveryQueue));onMouseDropCanceled=this._onMouseDropCanceled.event;_onDropIntoEditor=this._register(new lo(this._contributions,this._deliveryQueue));onDropIntoEditor=this._onDropIntoEditor.event;_onContextMenu=this._register(new lo(this._contributions,this._deliveryQueue));onContextMenu=this._onContextMenu.event;_onMouseMove=this._register(new lo(this._contributions,this._deliveryQueue));onMouseMove=this._onMouseMove.event;_onMouseLeave=this._register(new lo(this._contributions,this._deliveryQueue));onMouseLeave=this._onMouseLeave.event;_onMouseWheel=this._register(new lo(this._contributions,this._deliveryQueue));onMouseWheel=this._onMouseWheel.event;_onKeyUp=this._register(new lo(this._contributions,this._deliveryQueue));onKeyUp=this._onKeyUp.event;_onKeyDown=this._register(new lo(this._contributions,this._deliveryQueue));onKeyDown=this._onKeyDown.event;_onDidContentSizeChange=this._register(new T({deliveryQueue:this._deliveryQueue}));onDidContentSizeChange=this._onDidContentSizeChange.event;_onDidScrollChange=this._register(new T({deliveryQueue:this._deliveryQueue}));onDidScrollChange=this._onDidScrollChange.event;_onDidChangeViewZones=this._register(new T({deliveryQueue:this._deliveryQueue}));onDidChangeViewZones=this._onDidChangeViewZones.event;_onDidChangeHiddenAreas=this._register(new T({deliveryQueue:this._deliveryQueue}));onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event;_updateCounter=0;_onBeginUpdate=this._register(new T);onBeginUpdate=this._onBeginUpdate.event;_onEndUpdate=this._register(new T);onEndUpdate=this._onEndUpdate.event;get isSimpleWidget(){return this._configuration.isSimpleWidget}get contextMenuId(){return this._configuration.contextMenuId}_telemetryData;_domElement;_overflowWidgetsDomNode;_id;_configuration;_contributionsDisposable;_actions=new Map;_modelData;_instantiationService;_contextKeyService;get contextKeyService(){return this._contextKeyService}_notificationService;_codeEditorService;_commandService;_themeService;_focusTracker;_contentWidgets;_overlayWidgets;_glyphMarginWidgets;_decorationTypeKeysToIds;_decorationTypeSubtypes;_bannerDomNode=null;_dropIntoEditorDecorations=this.createDecorationsCollection();writeScreenReaderContent(t){this._modelData?.view.writeScreenReaderContent(t)}_createConfiguration(t,n,i,o){return new Ym(t,n,i,this._domElement,o)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return kT.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(t){return this._instantiationService.invokeFunction(t)}updateOptions(t){this._configuration.updateOptions(t||{})}getOptions(){return this._configuration.options}getOption(t){return this._configuration.options.get(t)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(t){return this._modelData?zb.getWordAtPosition(this._modelData.model,this._configuration.options.get(133),this._configuration.options.get(132),t):null}getValue(t=null){if(!this._modelData)return"";let n=!!(t&&t.preserveBOM),i=0;return t&&t.lineEnding&&t.lineEnding===`
`?i=1:t&&t.lineEnding&&t.lineEnding===`\r
`&&(i=2),this._modelData.model.getValue(i,n)}setValue(t){try{if(this._beginUpdate(),!this._modelData)return;this._modelData.model.setValue(t)}finally{this._endUpdate()}}getModel(){return this._modelData?this._modelData.model:null}setModel(t=null){try{this._beginUpdate();let n=t;if(this._modelData===null&&n===null||this._modelData&&this._modelData.model===n)return;let i={oldModelUrl:this._modelData?.model.uri||null,newModelUrl:n?.uri||null};this._onWillChangeModel.fire(i);let o=this.hasTextFocus(),s=this._detachModel();this._attachModel(n),o&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(i),this._postDetachModelCleanup(s),this._contributionsDisposable=this._contributions.onAfterModelAttached()}finally{this._endUpdate()}}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(let t in this._decorationTypeSubtypes){let n=this._decorationTypeSubtypes[t];for(let i in n)this._removeDecorationType(t+"-"+i)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(t,n,i,o){let s=t.model.validatePosition({lineNumber:n,column:i}),a=t.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return t.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(a.lineNumber,o)}getTopForLineNumber(t,n=!1){return this._modelData?Ss._getVerticalOffsetForPosition(this._modelData,t,1,n):-1}getTopForPosition(t,n){return this._modelData?Ss._getVerticalOffsetForPosition(this._modelData,t,n,!1):-1}static _getVerticalOffsetForPosition(t,n,i,o=!1){let s=t.model.validatePosition({lineNumber:n,column:i}),a=t.viewModel.coordinatesConverter.convertModelPositionToViewPosition(s);return t.viewModel.viewLayout.getVerticalOffsetForLineNumber(a.lineNumber,o)}getBottomForLineNumber(t,n=!1){if(!this._modelData)return-1;let i=this._modelData.model.getLineMaxColumn(t);return Ss._getVerticalOffsetAfterPosition(this._modelData,t,i,n)}setHiddenAreas(t,n){this._modelData?.viewModel.setHiddenAreas(t.map(i=>D.lift(i)),n)}getVisibleColumnFromPosition(t){if(!this._modelData)return t.column;let n=this._modelData.model.validatePosition(t),i=this._modelData.model.getOptions().tabSize;return jt.visibleColumnFromColumn(this._modelData.model.getLineContent(n.lineNumber),n.column,i)+1}getStatusbarColumn(t){if(!this._modelData)return t.column;let n=this._modelData.model.validatePosition(t),i=this._modelData.model.getOptions().tabSize;return jt.toStatusbarColumn(this._modelData.model.getLineContent(n.lineNumber),n.column,i)}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(t,n="api"){if(this._modelData){if(!F.isIPosition(t))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(n,[{selectionStartLineNumber:t.lineNumber,selectionStartColumn:t.column,positionLineNumber:t.lineNumber,positionColumn:t.column}])}}_sendRevealRange(t,n,i,o){if(!this._modelData)return;if(!D.isIRange(t))throw new Error("Invalid arguments");let s=this._modelData.model.validateRange(t),a=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(s);this._modelData.viewModel.revealRange("api",i,a,n,o)}revealLine(t,n=0){this._revealLine(t,0,n)}revealLineInCenter(t,n=0){this._revealLine(t,1,n)}revealLineInCenterIfOutsideViewport(t,n=0){this._revealLine(t,2,n)}revealLineNearTop(t,n=0){this._revealLine(t,5,n)}_revealLine(t,n,i){if(typeof t!="number")throw new Error("Invalid arguments");this._sendRevealRange(new D(t,1,t,1),n,!1,i)}revealPosition(t,n=0){this._revealPosition(t,0,!0,n)}revealPositionInCenter(t,n=0){this._revealPosition(t,1,!0,n)}revealPositionInCenterIfOutsideViewport(t,n=0){this._revealPosition(t,2,!0,n)}revealPositionNearTop(t,n=0){this._revealPosition(t,5,!0,n)}_revealPosition(t,n,i,o){if(!F.isIPosition(t))throw new Error("Invalid arguments");this._sendRevealRange(new D(t.lineNumber,t.column,t.lineNumber,t.column),n,i,o)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(t,n="api"){let i=ze.isISelection(t),o=D.isIRange(t);if(!i&&!o)throw new Error("Invalid arguments");if(i)this._setSelectionImpl(t,n);else if(o){let s={selectionStartLineNumber:t.startLineNumber,selectionStartColumn:t.startColumn,positionLineNumber:t.endLineNumber,positionColumn:t.endColumn};this._setSelectionImpl(s,n)}}_setSelectionImpl(t,n){if(!this._modelData)return;let i=new ze(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn);this._modelData.viewModel.setSelections(n,[i])}revealLines(t,n,i=0){this._revealLines(t,n,0,i)}revealLinesInCenter(t,n,i=0){this._revealLines(t,n,1,i)}revealLinesInCenterIfOutsideViewport(t,n,i=0){this._revealLines(t,n,2,i)}revealLinesNearTop(t,n,i=0){this._revealLines(t,n,5,i)}_revealLines(t,n,i,o){if(typeof t!="number"||typeof n!="number")throw new Error("Invalid arguments");this._sendRevealRange(new D(t,1,n,1),i,!1,o)}revealRange(t,n=0,i=!1,o=!0){this._revealRange(t,i?1:0,o,n)}revealRangeInCenter(t,n=0){this._revealRange(t,1,!0,n)}revealRangeInCenterIfOutsideViewport(t,n=0){this._revealRange(t,2,!0,n)}revealRangeNearTop(t,n=0){this._revealRange(t,5,!0,n)}revealRangeNearTopIfOutsideViewport(t,n=0){this._revealRange(t,6,!0,n)}revealRangeAtTop(t,n=0){this._revealRange(t,3,!0,n)}_revealRange(t,n,i,o){if(!D.isIRange(t))throw new Error("Invalid arguments");this._sendRevealRange(D.lift(t),n,i,o)}setSelections(t,n="api",i=0){if(this._modelData){if(!t||t.length===0)throw new Error("Invalid arguments");for(let o=0,s=t.length;o<s;o++)if(!ze.isISelection(t[o]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(n,t,i)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(t,n=1){if(this._modelData){if(typeof t!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:t},n)}}setScrollTop(t,n=1){if(this._modelData){if(typeof t!="number")throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:t},n)}}setScrollPosition(t,n=1){this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(t,n)}hasPendingScrollAnimation(){return this._modelData?this._modelData.viewModel.viewLayout.hasPendingScrollAnimation():!1}saveViewState(){if(!this._modelData)return null;let t=this._contributions.saveViewState(),n=this._modelData.viewModel.saveCursorState(),i=this._modelData.viewModel.saveState();return{cursorState:n,viewState:i,contributionsState:t}}restoreViewState(t){if(!this._modelData||!this._modelData.hasRealView)return;let n=t;if(n&&n.cursorState&&n.viewState){let i=n.cursorState;Array.isArray(i)?i.length>0&&this._modelData.viewModel.restoreCursorState(i):this._modelData.viewModel.restoreCursorState([i]),this._contributions.restoreViewState(n.contributionsState||{});let o=this._modelData.viewModel.reduceRestoreState(n.viewState);this._modelData.view.restoreState(o)}}handleInitialized(){this._getViewModel()?.visibleLinesStabilized()}onVisible(){this._modelData?.view.refreshFocusState()}onHide(){this._modelData?.view.refreshFocusState(),this._focusTracker.refreshState()}getContribution(t){return this._contributions.get(t)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let t=this.getActions();return t=t.filter(n=>n.isSupported()),t}getAction(t){return this._actions.get(t)||null}trigger(t,n,i){i=i||{};try{switch(this._beginUpdate(),n){case"compositionStart":this._startComposition();return;case"compositionEnd":this._endComposition(t);return;case"type":{let s=i;this._type(t,s.text||"");return}case"replacePreviousChar":{let s=i;this._compositionType(t,s.text||"",s.replaceCharCnt||0,0,0);return}case"compositionType":{let s=i;this._compositionType(t,s.text||"",s.replacePrevCharCnt||0,s.replaceNextCharCnt||0,s.positionDelta||0);return}case"paste":{let s=i;this._paste(t,s.text||"",s.pasteOnNewLine||!1,s.multicursorText||null,s.mode||null,s.clipboardEvent);return}case"cut":this._cut(t);return}let o=this.getAction(n);if(o){Promise.resolve(o.run(i)).then(void 0,Be);return}if(!this._modelData||this._triggerEditorCommand(t,n,i))return;this._triggerCommand(n,i)}finally{this._endUpdate()}}_triggerCommand(t,n){this._commandService.executeCommand(t,n)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(t){this._modelData&&(this._modelData.viewModel.endComposition(t),this._onDidCompositionEnd.fire())}_type(t,n){!this._modelData||n.length===0||(t==="keyboard"&&this._onWillType.fire(n),this._modelData.viewModel.type(n,t),t==="keyboard"&&this._onDidType.fire(n))}_compositionType(t,n,i,o,s){this._modelData&&this._modelData.viewModel.compositionType(n,i,o,s,t)}_paste(t,n,i,o,s,a){if(!this._modelData)return;let l=this._modelData.viewModel,d=l.getSelection().getStartPosition();l.paste(n,i,o,t);let c=l.getSelection().getStartPosition();t==="keyboard"&&this._onDidPaste.fire({clipboardEvent:a,range:new D(d.lineNumber,d.column,c.lineNumber,c.column),languageId:s})}_cut(t){this._modelData&&this._modelData.viewModel.cut(t)}_triggerEditorCommand(t,n,i){let o=ms.getEditorCommand(n);return o?(i=i||{},i.source=t,this._instantiationService.invokeFunction(s=>{Promise.resolve(o.runEditorCommand(s,this,i)).then(void 0,Be)}),!0):!1}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!this._modelData||this._configuration.options.get(93)?!1:(this._modelData.model.pushStackElement(),!0)}popUndoStop(){return!this._modelData||this._configuration.options.get(93)?!1:(this._modelData.model.popStackElement(),!0)}executeEdits(t,n,i){if(!this._modelData||this._configuration.options.get(93))return!1;let o;return i?Array.isArray(i)?o=()=>i:o=i:o=()=>null,this._modelData.viewModel.executeEdits(t,n,o),!0}executeCommand(t,n){this._modelData&&this._modelData.viewModel.executeCommand(n,t)}executeCommands(t,n){this._modelData&&this._modelData.viewModel.executeCommands(n,t)}createDecorationsCollection(t){return new KW(this,t)}changeDecorations(t){return this._modelData?this._modelData.model.changeDecorations(t,this._id):null}getLineDecorations(t){return this._modelData?this._modelData.model.getLineDecorations(t,this._id,xh(this._configuration.options)):null}getDecorationsInRange(t){return this._modelData?this._modelData.model.getDecorationsInRange(t,this._id,xh(this._configuration.options)):null}deltaDecorations(t,n){return this._modelData?t.length===0&&n.length===0?t:this._modelData.model.deltaDecorations(t,n,this._id):[]}removeDecorations(t){!this._modelData||t.length===0||this._modelData.model.changeDecorations(n=>{n.deltaDecorations(t,[])})}setDecorationsByType(t,n,i){let o={},s=this._decorationTypeSubtypes[n]||{};this._decorationTypeSubtypes[n]=o;let a=[];for(let d of i){let c=n;if(d.renderOptions){let h=Os(d.renderOptions).toString(16);c=n+"-"+h,!s[h]&&!o[h]&&this._registerDecorationType(t,c,d.renderOptions,n),o[h]=!0}let p=this._resolveDecorationOptions(c,!!d.hoverMessage);d.hoverMessage&&(p.hoverMessage=d.hoverMessage),a.push({range:d.range,options:p})}for(let d in s)o[d]||this._removeDecorationType(n+"-"+d);let l=this._decorationTypeKeysToIds[n]||[];this.changeDecorations(d=>this._decorationTypeKeysToIds[n]=d.deltaDecorations(l,a))}setDecorationsByTypeFast(t,n){let i=this._decorationTypeSubtypes[t]||{};for(let l in i)this._removeDecorationType(t+"-"+l);this._decorationTypeSubtypes[t]={};let o=Bn.createDynamic(this._resolveDecorationOptions(t,!1)),s=new Array(n.length);for(let l=0,d=n.length;l<d;l++)s[l]={range:n[l],options:o};let a=this._decorationTypeKeysToIds[t]||[];this.changeDecorations(l=>this._decorationTypeKeysToIds[t]=l.deltaDecorations(a,s))}removeDecorationsByType(t){let n=this._decorationTypeKeysToIds[t];n&&this.changeDecorations(i=>i.deltaDecorations(n,[])),this._decorationTypeKeysToIds.hasOwnProperty(t)&&delete this._decorationTypeKeysToIds[t],this._decorationTypeSubtypes.hasOwnProperty(t)&&delete this._decorationTypeSubtypes[t]}getLayoutInfo(){return this._configuration.options.get(147)}createOverviewRuler(t){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.createOverviewRuler(t)}getContainerDomNode(){return this._domElement}getDomNode(){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.domNode.domNode}delegateVerticalScrollbarPointerDown(t){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateVerticalScrollbarPointerDown(t)}delegateScrollFromMouseWheelEvent(t){!this._modelData||!this._modelData.hasRealView||this._modelData.view.delegateScrollFromMouseWheelEvent(t)}layout(t,n=!1){this._configuration.observeContainer(t),n||this.render()}focus(){!this._modelData||!this._modelData.hasRealView||this._modelData.view.focus()}hasTextFocus(){return!this._modelData||!this._modelData.hasRealView?!1:this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(t){let n={widget:t,position:t.getPosition()};this._contentWidgets.hasOwnProperty(t.getId())&&console.warn("Overwriting a content widget with the same id:"+t.getId()),this._contentWidgets[t.getId()]=n,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(n)}layoutContentWidget(t){let n=t.getId();if(this._contentWidgets.hasOwnProperty(n)){let i=this._contentWidgets[n];i.position=t.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}}removeContentWidget(t){let n=t.getId();if(this._contentWidgets.hasOwnProperty(n)){let i=this._contentWidgets[n];delete this._contentWidgets[n],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(i)}}addOverlayWidget(t){let n={widget:t,position:t.getPosition()};this._overlayWidgets.hasOwnProperty(t.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[t.getId()]=n,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(n)}layoutOverlayWidget(t){let n=t.getId();if(this._overlayWidgets.hasOwnProperty(n)){let i=this._overlayWidgets[n];i.position=t.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}}removeOverlayWidget(t){let n=t.getId();if(this._overlayWidgets.hasOwnProperty(n)){let i=this._overlayWidgets[n];delete this._overlayWidgets[n],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(i)}}addGlyphMarginWidget(t){let n={widget:t,position:t.getPosition()};this._glyphMarginWidgets.hasOwnProperty(t.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[t.getId()]=n,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(n)}layoutGlyphMarginWidget(t){let n=t.getId();if(this._glyphMarginWidgets.hasOwnProperty(n)){let i=this._glyphMarginWidgets[n];i.position=t.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(i)}}removeGlyphMarginWidget(t){let n=t.getId();if(this._glyphMarginWidgets.hasOwnProperty(n)){let i=this._glyphMarginWidgets[n];delete this._glyphMarginWidgets[n],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(i)}}changeViewZones(t){!this._modelData||!this._modelData.hasRealView||this._modelData.view.change(t)}getTargetAtClientPoint(t,n){return!this._modelData||!this._modelData.hasRealView?null:this._modelData.view.getTargetAtClientPoint(t,n)}getScrolledVisiblePosition(t){if(!this._modelData||!this._modelData.hasRealView)return null;let n=this._modelData.model.validatePosition(t),i=this._configuration.options,o=i.get(147),s=Ss._getVerticalOffsetForPosition(this._modelData,n.lineNumber,n.column)-this.getScrollTop(),a=this._modelData.view.getOffsetForColumn(n.lineNumber,n.column)+o.glyphMarginWidth+o.lineNumbersWidth+o.decorationsWidth-this.getScrollLeft();return{top:s,left:a,height:i.get(68)}}getOffsetForColumn(t,n){return!this._modelData||!this._modelData.hasRealView?-1:this._modelData.view.getOffsetForColumn(t,n)}render(t=!1){!this._modelData||!this._modelData.hasRealView||this._modelData.viewModel.batchEvents(()=>{this._modelData.view.render(!0,t)})}setAriaOptions(t){!this._modelData||!this._modelData.hasRealView||this._modelData.view.setAriaOptions(t)}applyFontInfo(t){Un(t,this._configuration.options.get(51))}setBanner(t,n){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),this._bannerDomNode=t,this._configuration.setReservedHeight(t?n:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(t){if(!t){this._modelData=null;return}let n=[];this._domElement.setAttribute("data-mode-id",t.getLanguageId()),this._configuration.setIsDominatedByLongLines(t.isDominatedByLongLines()),this._configuration.setModelLineCount(t.getLineCount());let i=t.onBeforeAttached(),o=new ER(this._id,this._configuration,t,jk.create(Ee(this._domElement)),Yk.create(this._configuration.options),l=>Ai(Ee(this._domElement),l),this.languageConfigurationService,this._themeService,i,{batchChanges:l=>{try{return this._beginUpdate(),l()}finally{this._endUpdate()}}});n.push(t.onWillDispose(()=>this.setModel(null))),n.push(o.onEvent(l=>{switch(l.kind){case 0:this._onDidContentSizeChange.fire(l);break;case 1:this._editorTextFocus.setValue(l.hasFocus);break;case 2:this._onDidScrollChange.fire(l);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(l.reachedMaxCursorCount){let h=this.getOption(81),g=u("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",h);this._notificationService.prompt(q_.Warning,g,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:u("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}let d=[];for(let h=0,g=l.selections.length;h<g;h++)d[h]=l.selections[h].getPosition();let c={position:d[0],secondaryPositions:d.slice(1),reason:l.reason,source:l.source};this._onDidChangeCursorPosition.fire(c);let p={selection:l.selections[0],secondarySelections:l.selections.slice(1),modelVersionId:l.modelVersionId,oldSelections:l.oldSelections,oldModelVersionId:l.oldModelVersionId,source:l.source,reason:l.reason};this._onDidChangeCursorSelection.fire(p);break}case 7:this._onDidChangeModelDecorations.fire(l.event);break;case 8:this._domElement.setAttribute("data-mode-id",t.getLanguageId()),this._onDidChangeModelLanguage.fire(l.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(l.event);break;case 10:this._onDidChangeModelContent.fire(l.event);break;case 11:this._onDidChangeModelOptions.fire(l.event);break;case 12:this._onDidChangeModelTokens.fire(l.event);break}}));let[s,a]=this._createView(o);if(a){this._domElement.appendChild(s.domNode.domNode);let l=Object.keys(this._contentWidgets);for(let d=0,c=l.length;d<c;d++){let p=l[d];s.addContentWidget(this._contentWidgets[p])}l=Object.keys(this._overlayWidgets);for(let d=0,c=l.length;d<c;d++){let p=l[d];s.addOverlayWidget(this._overlayWidgets[p])}l=Object.keys(this._glyphMarginWidgets);for(let d=0,c=l.length;d<c;d++){let p=l[d];s.addGlyphMarginWidget(this._glyphMarginWidgets[p])}s.render(!1,!0),s.domNode.domNode.setAttribute("data-uri",t.uri.toString())}this._modelData=new VW(t,o,s,a,n,i)}_createView(t){let n;this.isSimpleWidget?n={paste:(s,a,l,d)=>{this._paste("keyboard",s,a,l,d)},type:s=>{this._type("keyboard",s)},compositionType:(s,a,l,d)=>{this._compositionType("keyboard",s,a,l,d)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:n={paste:(s,a,l,d)=>{let c={text:s,pasteOnNewLine:a,multicursorText:l,mode:d};this._commandService.executeCommand("paste",c)},type:s=>{let a={text:s};this._commandService.executeCommand("type",a)},compositionType:(s,a,l,d)=>{if(l||d){let c={text:s,replacePrevCharCnt:a,replaceNextCharCnt:l,positionDelta:d};this._commandService.executeCommand("compositionType",c)}else{let c={text:s,replaceCharCnt:a};this._commandService.executeCommand("replacePreviousChar",c)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};let i=new Xb(t.coordinatesConverter);return i.onKeyDown=s=>this._onKeyDown.fire(s),i.onKeyUp=s=>this._onKeyUp.fire(s),i.onContextMenu=s=>this._onContextMenu.fire(s),i.onMouseMove=s=>this._onMouseMove.fire(s),i.onMouseLeave=s=>this._onMouseLeave.fire(s),i.onMouseDown=s=>this._onMouseDown.fire(s),i.onMouseUp=s=>this._onMouseUp.fire(s),i.onMouseDrag=s=>this._onMouseDrag.fire(s),i.onMouseDrop=s=>this._onMouseDrop.fire(s),i.onMouseDropCanceled=s=>this._onMouseDropCanceled.fire(s),i.onMouseWheel=s=>this._onMouseWheel.fire(s),[new cv(n,this._configuration,this._themeService.getColorTheme(),t,i,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(t){t?.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(this._contributionsDisposable?.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;let t=this._modelData.model,n=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),n&&this._domElement.contains(n)&&n.remove(),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._bannerDomNode.remove(),t}_registerDecorationType(t,n,i,o){this._codeEditorService.registerDecorationType(t,n,i,o,this)}_removeDecorationType(t){this._codeEditorService.removeDecorationType(t)}_resolveDecorationOptions(t,n){return this._codeEditorService.resolveDecorationOptions(t,n)}getTelemetryData(){return this._telemetryData}hasModel(){return this._modelData!==null}showDropIndicatorAt(t){let n=[{range:new D(t.lineNumber,t.column,t.lineNumber,t.column),options:Ss.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(n),this.revealPosition(t,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(t,n){this._contextKeyService.createKey(t,n)}_beginUpdate(){this._updateCounter++,this._updateCounter===1&&this._onBeginUpdate.fire()}_endUpdate(){this._updateCounter--,this._updateCounter===0&&this._onEndUpdate.fire()}};Ss=_([y(3,we),y(4,rd),y(5,Xn),y(6,Ne),y(7,Ci),y(8,sl),y(9,Xi),y(10,Qn),y(11,no)],Ss);var MJ=0,VW=class{constructor(e,t,n,i,o,s){this.model=e;this.viewModel=t;this.view=n;this.hasRealView=i;this.listenersToRemove=o;this.attachedView=s}dispose(){rt(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}};var wR=class extends N{constructor(t){super();this._emitterOptions=t;this._value=0}_onDidChangeToTrue=this._register(new T(this._emitterOptions));onDidChangeToTrue=this._onDidChangeToTrue.event;_onDidChangeToFalse=this._register(new T(this._emitterOptions));onDidChangeToFalse=this._onDidChangeToFalse.event;_value;setValue(t){let n=t?2:1;this._value!==n&&(this._value=n,this._value===2?this._onDidChangeToTrue.fire():this._value===1&&this._onDidChangeToFalse.fire())}},lo=class extends T{constructor(t,n){super({deliveryQueue:n});this._contributions=t}fire(t){this._contributions.onBeforeInteractionEvent(),super.fire(t)}},HW=class extends N{_editor;_editorSimpleInput;_editorFocus;_textInputFocus;_editorTextFocus;_tabMovesFocus;_editorReadonly;_inDiffEditor;_editorColumnSelection;_hasMultipleSelections;_hasNonEmptySelection;_canUndo;_canRedo;constructor(e,t){super(),this._editor=e,t.createKey("editorId",e.getId()),this._editorSimpleInput=pe.editorSimpleInput.bindTo(t),this._editorFocus=pe.focus.bindTo(t),this._textInputFocus=pe.textInputFocus.bindTo(t),this._editorTextFocus=pe.editorTextFocus.bindTo(t),this._tabMovesFocus=pe.tabMovesFocus.bindTo(t),this._editorReadonly=pe.readOnly.bindTo(t),this._inDiffEditor=pe.inDiffEditor.bindTo(t),this._editorColumnSelection=pe.columnSelection.bindTo(t),this._hasMultipleSelections=pe.hasMultipleSelections.bindTo(t),this._hasNonEmptySelection=pe.hasNonEmptySelection.bindTo(t),this._canUndo=pe.canUndo.bindTo(t),this._canRedo=pe.canRedo.bindTo(t),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromConfig())),this._register(this._editor.onDidChangeCursorSelection(()=>this._updateFromSelection())),this._register(this._editor.onDidFocusEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorWidget(()=>this._updateFromFocus())),this._register(this._editor.onDidFocusEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidBlurEditorText(()=>this._updateFromFocus())),this._register(this._editor.onDidChangeModel(()=>this._updateFromModel())),this._register(this._editor.onDidChangeConfiguration(()=>this._updateFromModel())),this._register(qm.onDidChangeTabFocus(n=>this._tabMovesFocus.set(n))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){let e=this._editor.getOptions();this._tabMovesFocus.set(qm.getTabFocusMode()),this._editorReadonly.set(e.get(93)),this._inDiffEditor.set(e.get(62)),this._editorColumnSelection.set(e.get(22))}_updateFromSelection(){let e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some(t=>!t.isEmpty()))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){let e=this._editor.getModel();this._canUndo.set(!!(e&&e.canUndo())),this._canRedo.set(!!(e&&e.canRedo()))}},UW=class extends N{constructor(t,n,i){super();this._editor=t;this._contextKeyService=n;this._languageFeaturesService=i;this._langId=pe.languageId.bindTo(n),this._hasCompletionItemProvider=pe.hasCompletionItemProvider.bindTo(n),this._hasCodeActionsProvider=pe.hasCodeActionsProvider.bindTo(n),this._hasCodeLensProvider=pe.hasCodeLensProvider.bindTo(n),this._hasDefinitionProvider=pe.hasDefinitionProvider.bindTo(n),this._hasDeclarationProvider=pe.hasDeclarationProvider.bindTo(n),this._hasImplementationProvider=pe.hasImplementationProvider.bindTo(n),this._hasTypeDefinitionProvider=pe.hasTypeDefinitionProvider.bindTo(n),this._hasHoverProvider=pe.hasHoverProvider.bindTo(n),this._hasDocumentHighlightProvider=pe.hasDocumentHighlightProvider.bindTo(n),this._hasDocumentSymbolProvider=pe.hasDocumentSymbolProvider.bindTo(n),this._hasReferenceProvider=pe.hasReferenceProvider.bindTo(n),this._hasRenameProvider=pe.hasRenameProvider.bindTo(n),this._hasSignatureHelpProvider=pe.hasSignatureHelpProvider.bindTo(n),this._hasInlayHintsProvider=pe.hasInlayHintsProvider.bindTo(n),this._hasDocumentFormattingProvider=pe.hasDocumentFormattingProvider.bindTo(n),this._hasDocumentSelectionFormattingProvider=pe.hasDocumentSelectionFormattingProvider.bindTo(n),this._hasMultipleDocumentFormattingProvider=pe.hasMultipleDocumentFormattingProvider.bindTo(n),this._hasMultipleDocumentSelectionFormattingProvider=pe.hasMultipleDocumentSelectionFormattingProvider.bindTo(n),this._isInEmbeddedEditor=pe.isInEmbeddedEditor.bindTo(n);let o=()=>this._update();this._register(t.onDidChangeModel(o)),this._register(t.onDidChangeModelLanguage(o)),this._register(i.completionProvider.onDidChange(o)),this._register(i.codeActionProvider.onDidChange(o)),this._register(i.codeLensProvider.onDidChange(o)),this._register(i.definitionProvider.onDidChange(o)),this._register(i.declarationProvider.onDidChange(o)),this._register(i.implementationProvider.onDidChange(o)),this._register(i.typeDefinitionProvider.onDidChange(o)),this._register(i.hoverProvider.onDidChange(o)),this._register(i.documentHighlightProvider.onDidChange(o)),this._register(i.documentSymbolProvider.onDidChange(o)),this._register(i.referenceProvider.onDidChange(o)),this._register(i.renameProvider.onDidChange(o)),this._register(i.documentFormattingEditProvider.onDidChange(o)),this._register(i.documentRangeFormattingEditProvider.onDidChange(o)),this._register(i.signatureHelpProvider.onDidChange(o)),this._register(i.inlayHintsProvider.onDidChange(o)),o()}_langId;_hasCompletionItemProvider;_hasCodeActionsProvider;_hasCodeLensProvider;_hasDefinitionProvider;_hasDeclarationProvider;_hasImplementationProvider;_hasTypeDefinitionProvider;_hasHoverProvider;_hasDocumentHighlightProvider;_hasDocumentSymbolProvider;_hasReferenceProvider;_hasRenameProvider;_hasDocumentFormattingProvider;_hasDocumentSelectionFormattingProvider;_hasMultipleDocumentFormattingProvider;_hasMultipleDocumentSelectionFormattingProvider;_hasSignatureHelpProvider;_hasInlayHintsProvider;_isInEmbeddedEditor;dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents(()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInEmbeddedEditor.reset()})}_update(){let t=this._editor.getModel();if(!t){this.reset();return}this._contextKeyService.bufferChangeEvents(()=>{this._langId.set(t.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(t)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(t)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(t)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(t)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(t)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(t)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(t)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(t)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(t)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(t)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(t)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(t)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(t)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(t)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(t)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(t)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(t)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(t).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(t).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(t).length>1),this._isInEmbeddedEditor.set(t.uri.scheme===ye.walkThroughSnippet||t.uri.scheme===ye.vscodeChatCodeBlock)})}},zW=class extends N{_hasDomElementFocus;_domFocusTracker;_overflowWidgetsDomNode;_onChange=this._register(new T);onChange=this._onChange.event;_overflowWidgetsDomNodeHasFocus;_hadFocus=void 0;constructor(e,t){super(),this._hasDomElementFocus=!1,this._domFocusTracker=this._register(br(e)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus(()=>{this._hasDomElementFocus=!0,this._update()})),this._register(this._domFocusTracker.onDidBlur(()=>{this._hasDomElementFocus=!1,this._update()})),t&&(this._overflowWidgetsDomNode=this._register(br(t)),this._register(this._overflowWidgetsDomNode.onDidFocus(()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()})),this._register(this._overflowWidgetsDomNode.onDidBlur(()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()})))}_update(){let e=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==e&&(this._hadFocus=e,this._onChange.fire(void 0))}hasFocus(){return this._hadFocus??!1}refreshState(){this._domFocusTracker.refreshState(),this._overflowWidgetsDomNode?.refreshState?.()}},KW=class{constructor(e,t){this._editor=e;Array.isArray(t)&&t.length>0&&this.set(t)}_decorationIds=[];_isChangingDecorations=!1;get length(){return this._decorationIds.length}onDidChange(e,t,n){return this._editor.onDidChangeModelDecorations(i=>{this._isChangingDecorations||e.call(t,i)},n)}getRange(e){return!this._editor.hasModel()||e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e])}getRanges(){if(!this._editor.hasModel())return[];let e=this._editor.getModel(),t=[];for(let n of this._decorationIds){let i=e.getDecorationRange(n);i&&t.push(i)}return t}has(e){return this._decorationIds.includes(e.id)}clear(){this._decorationIds.length!==0&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations(t=>{this._decorationIds=t.deltaDecorations(this._decorationIds,e)})}finally{this._isChangingDecorations=!1}return this._decorationIds}append(e){let t=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations(n=>{t=n.deltaDecorations([],e),this._decorationIds=this._decorationIds.concat(t)})}finally{this._isChangingDecorations=!1}return t}},OJ=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),PJ=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function WW(r){return OJ+encodeURIComponent(r.toString())+PJ}var AJ=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),NJ=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');function FJ(r){return AJ+encodeURIComponent(r.toString())+NJ}to((r,e)=>{let t=r.getColor(Bh);t&&e.addRule(`.monaco-editor .squiggly-error { background: url("data:image/svg+xml,${WW(t)}") repeat-x bottom left; }`);let n=r.getColor(Cr);n&&e.addRule(`.monaco-editor .squiggly-warning { background: url("data:image/svg+xml,${WW(n)}") repeat-x bottom left; }`);let i=r.getColor(ps);i&&e.addRule(`.monaco-editor .squiggly-info { background: url("data:image/svg+xml,${WW(i)}") repeat-x bottom left; }`);let o=r.getColor(p4);o&&e.addRule(`.monaco-editor .squiggly-hint { background: url("data:image/svg+xml,${FJ(o)}") no-repeat bottom left; }`);let s=r.getColor(JK);s&&e.addRule(`.monaco-editor.showUnused .squiggly-inline-unnecessary { opacity: ${s.rgba.a}; }`)});var Sa=class{constructor(e,t,n,i,o,s,a,l){this._contextMenuService=t;this._contextViewService=n;this._contextKeyService=i;this._keybindingService=o;this._menuService=s;this._configurationService=a;this._workspaceContextService=l;this._editor=e,this._toDispose.add(this._editor.onContextMenu(d=>this._onContextMenu(d))),this._toDispose.add(this._editor.onMouseWheel(d=>{if(this._contextMenuIsBeingShownCount>0){let c=this._contextViewService.getContextViewElement(),p=d.srcElement;p.shadowRoot&&Vl(c)===p.shadowRoot||this._contextViewService.hideContextView()}})),this._toDispose.add(this._editor.onKeyDown(d=>{this._editor.getOption(24)&&d.keyCode===58&&(d.preventDefault(),d.stopPropagation(),this.showContextMenu())}))}static ID="editor.contrib.contextmenu";static get(e){return e.getContribution(Sa.ID)}_toDispose=new X;_contextMenuIsBeingShownCount=0;_editor;_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(24)){this._editor.focus(),e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position);return}if(e.target.type===12||e.target.type===6&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),e.target.type===11)return this._showScrollbarContextMenu(e.event);if(e.target.type!==6&&e.target.type!==7&&e.target.type!==1)return;if(this._editor.focus(),e.target.position){let n=!1;for(let i of this._editor.getSelections())if(i.containsPosition(e.target.position)){n=!0;break}n||this._editor.setPosition(e.target.position)}let t=null;e.target.type!==1&&(t=e.event),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(24)||!this._editor.hasModel())return;let t=this._getMenuActions(this._editor.getModel(),this._editor.contextMenuId);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){let n=[],i=this._menuService.getMenuActions(t,this._contextKeyService,{arg:e.uri});for(let o of i){let[,s]=o,a=0;for(let l of s)if(l instanceof nI){let d=this._getMenuActions(e,l.item.submenu);d.length>0&&(n.push(new ss(l.id,l.label,d)),a++)}else n.push(l),a++;a&&n.push(new ei)}return n.length&&n.pop(),n}_doShowContextMenu(e,t=null){if(!this._editor.hasModel())return;let n=this._editor.getOption(61);this._editor.updateOptions({hover:{enabled:!1}});let i=t;if(!i){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();let s=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),a=Ii(this._editor.getDomNode()),l=a.left+s.left,d=a.top+s.top+s.height;i={x:l,y:d}}let o=this._editor.getOption(129)&&!li;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:o?this._editor.getOverflowWidgetsDomNode()??this._editor.getDomNode():void 0,getAnchor:()=>i,getActions:()=>e,getActionViewItem:s=>{let a=this._keybindingFor(s);if(a)return new tl(s,s,{label:!0,keybinding:a.getLabel(),isMenu:!0});let l=s;return typeof l.getActionViewItem=="function"?l.getActionViewItem():new tl(s,s,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:s=>this._keybindingFor(s),onHide:s=>{this._contextMenuIsBeingShownCount--,this._editor.updateOptions({hover:n})}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel()||ez(this._workspaceContextService.getWorkspace()))return;let t=this._editor.getOption(74),n=0,i=d=>({id:`menu-action-${++n}`,label:d.label,tooltip:"",class:void 0,enabled:typeof d.enabled>"u"?!0:d.enabled,checked:d.checked,run:d.run}),o=(d,c)=>new ss(`menu-action-${++n}`,d,c,void 0),s=(d,c,p,h,g)=>{if(!c)return i({label:d,enabled:c,run:()=>{}});let f=b=>()=>{this._configurationService.updateValue(p,b)},m=[];for(let b of g)m.push(i({label:b.label,checked:h===b.value,run:f(b.value)}));return o(d,m)},a=[];a.push(i({label:u("context.minimap.minimap","Minimap"),checked:t.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!t.enabled)}})),a.push(new ei),a.push(i({label:u("context.minimap.renderCharacters","Render Characters"),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!t.renderCharacters)}})),a.push(s(u("context.minimap.size","Vertical size"),t.enabled,"editor.minimap.size",t.size,[{label:u("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:u("context.minimap.size.fill","Fill"),value:"fill"},{label:u("context.minimap.size.fit","Fit"),value:"fit"}])),a.push(s(u("context.minimap.slider","Slider"),t.enabled,"editor.minimap.showSlider",t.showSlider,[{label:u("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:u("context.minimap.slider.always","Always"),value:"always"}]));let l=this._editor.getOption(129)&&!li;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:l?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>a,onHide:d=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};Sa=_([y(1,or),y(2,Wo),y(3,Ne),y(4,_n),y(5,Ka),y(6,Ge),y(7,fn)],Sa);var GW=class extends $h{constructor(){super({id:"editor.action.showContextMenu",label:u("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:pe.textInputFocus,primary:1092,weight:100}})}run(e,t){Sa.get(t)?.showContextMenu()}};gs(Sa.ID,Sa,2);RI(GW);var sIn=new RegExp("\\bMARK:\\s*(.*)$","d");var d3=j("editorWorkerService");var _R=class r{async provideSelectionRanges(e,t){let n=[];for(let i of t){let o=[];n.push(o);let s=new Map;await new Promise(a=>r._bracketsRightYield(a,0,e,i,s)),await new Promise(a=>r._bracketsLeftYield(a,0,e,i,s,o))}return n}static _maxDuration=30;static _maxRounds=2;static _bracketsRightYield(e,t,n,i,o){let s=new Map,a=Date.now();for(;;){if(t>=r._maxRounds){e();break}if(!i){e();break}let l=n.bracketPairs.findNextBracket(i);if(!l){e();break}if(Date.now()-a>r._maxDuration){setTimeout(()=>r._bracketsRightYield(e,t+1,n,i,o));break}if(l.bracketInfo.isOpeningBracket){let c=l.bracketInfo.bracketText,p=s.has(c)?s.get(c):0;s.set(c,p+1)}else{let c=l.bracketInfo.getOpeningBrackets()[0].bracketText,p=s.has(c)?s.get(c):0;if(p-=1,s.set(c,Math.max(0,p)),p<0){let h=o.get(c);h||(h=new mi,o.set(c,h)),h.push(l.range)}}i=l.range.getEndPosition()}}static _bracketsLeftYield(e,t,n,i,o,s){let a=new Map,l=Date.now();for(;;){if(t>=r._maxRounds&&o.size===0){e();break}if(!i){e();break}let d=n.bracketPairs.findPrevBracket(i);if(!d){e();break}if(Date.now()-l>r._maxDuration){setTimeout(()=>r._bracketsLeftYield(e,t+1,n,i,o,s));break}if(d.bracketInfo.isOpeningBracket){let p=d.bracketInfo.bracketText,h=a.has(p)?a.get(p):0;if(h-=1,a.set(p,Math.max(0,h)),h<0){let g=o.get(p);if(g){let f=g.shift();g.size===0&&o.delete(p);let m=D.fromPositions(d.range.getEndPosition(),f.getStartPosition()),b=D.fromPositions(d.range.getStartPosition(),f.getEndPosition());s.push({range:m}),s.push({range:b}),r._addBracketLeading(n,b,s)}}}else{let p=d.bracketInfo.getOpeningBrackets()[0].bracketText,h=a.has(p)?a.get(p):0;a.set(p,h+1)}i=d.range.getStartPosition()}}static _addBracketLeading(e,t,n){if(t.startLineNumber===t.endLineNumber)return;let i=t.startLineNumber,o=e.getLineFirstNonWhitespaceColumn(i);o!==0&&o!==t.startColumn&&(n.push({range:D.fromPositions(new F(i,o),t.getEndPosition())}),n.push({range:D.fromPositions(new F(i,1),t.getEndPosition())}));let s=i-1;if(s>0){let a=e.getLineFirstNonWhitespaceColumn(s);a===t.startColumn&&a!==e.getLineLastNonWhitespaceColumn(s)&&(n.push({range:D.fromPositions(new F(s,a),t.getEndPosition())}),n.push({range:D.fromPositions(new F(s,1),t.getEndPosition())}))}}};var DR=class r{static None=new class extends r{distance(){return 0}};static async create(e,t){if(!t.getOption(120).localityBonus||!t.hasModel())return r.None;let n=t.getModel(),i=t.getPosition();if(!e.canComputeWordRanges(n.uri))return r.None;let[o]=await new _R().provideSelectionRanges(n,[i]);if(o.length===0)return r.None;let s=await e.computeWordRanges(n.uri,o[0].range);if(!s)return r.None;let a=n.getWordUntilPosition(i);return delete s[a.word],new class extends r{distance(l,d){if(!i.equals(t.getPosition()))return 0;if(d.kind===17)return 2<<20;let c=typeof d.label=="string"?d.label:d.label.label,p=s[c];if(j2(p))return 2<<20;let h=mx(p,D.fromPositions(l),D.compareRangesUsingStarts),g=h>=0?p[h]:p[Math.max(0,~h-1)],f=o.length;for(let m of o){if(!D.containsRange(m.range,g))break;f-=1}return f}}}};var LR=class r{constructor(e,t,n,i,o,s,a=ph.default,l=void 0){this.clipboardText=l;this._items=e,this._column=t,this._wordDistance=i,this._options=o,this._refilterKind=1,this._lineContext=n,this._fuzzyScoreOptions=a,s==="top"?this._snippetCompareFn=r._compareCompletionItemsSnippetsUp:s==="bottom"&&(this._snippetCompareFn=r._compareCompletionItemsSnippetsDown)}_items;_column;_wordDistance;_options;_snippetCompareFn=r._compareCompletionItems;_fuzzyScoreOptions;_lineContext;_refilterKind;_filteredItems;_itemsByProvider;_stats;get lineContext(){return this._lineContext}set lineContext(e){(this._lineContext.leadingLineContent!==e.leadingLineContent||this._lineContext.characterCountDelta!==e.characterCountDelta)&&(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}getItemsByProvider(){return this._ensureCachedState(),this._itemsByProvider}getIncompleteProvider(){this._ensureCachedState();let e=new Set;for(let[t,n]of this.getItemsByProvider())n.length>0&&n[0].container.incomplete&&e.add(t);return e}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){this._refilterKind!==0&&this._createCachedState()}_createCachedState(){this._itemsByProvider=new Map;let e=[],{leadingLineContent:t,characterCountDelta:n}=this._lineContext,i="",o="",s=this._refilterKind===1?this._items:this._filteredItems,a=[],l=!this._options.filterGraceful||s.length>2e3?cc:BU;for(let d=0;d<s.length;d++){let c=s[d];if(c.isInvalid)continue;let p=this._itemsByProvider.get(c.provider);p?p.push(c):this._itemsByProvider.set(c.provider,[c]);let h=c.position.column-c.editStart.column,g=h+n-(c.position.column-this._column);if(i.length!==g&&(i=g===0?"":t.slice(-g),o=i.toLowerCase()),c.word=i,g===0)c.score=Zs.Default;else{let f=0;for(;f<h;){let m=i.charCodeAt(f);if(m===32||m===9)f+=1;else break}if(f>=g)c.score=Zs.Default;else if(typeof c.completion.filterText=="string"){let m=l(i,o,f,c.completion.filterText,c.filterTextLow,0,this._fuzzyScoreOptions);if(!m)continue;ts(c.completion.filterText,c.textLabel)===0?c.score=m:(c.score=AU(i,o,f,c.textLabel,c.labelLow,0),c.score[0]=m[0])}else{let m=l(i,o,f,c.textLabel,c.labelLow,0,this._fuzzyScoreOptions);if(!m)continue;c.score=m}}c.idx=d,c.distance=this._wordDistance.distance(c.position,c.completion),a.push(c),e.push(c.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?px(e.length-.85,e,(d,c)=>d-c):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return 1;if(t.completion.kind===27)return-1}return r._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(e.completion.kind===27)return-1;if(t.completion.kind===27)return 1}return r._compareCompletionItems(e,t)}};var BJ=j("ILanguageFeatureDebounceService"),qW;(n=>{let r=new WeakMap,e=0;function t(i){let o=r.get(i);return o===void 0&&(o=++e,r.set(i,o)),o}n.of=t})(qW||={});var jW=class{constructor(e){this._default=e}get(e){return this._default}update(e,t){return this._default}default(){return this._default}},$W=class{constructor(e,t,n,i,o,s){this._logService=e;this._name=t;this._registry=n;this._default=i;this._min=o;this._max=s}_cache=new Po(50,.7);_key(e){return e.id+this._registry.all(e).reduce((t,n)=>Ty(qW.of(n),t),0)}get(e){let t=this._key(e),n=this._cache.get(t);return n?qn(n.value,this._min,this._max):this.default()}update(e,t){let n=this._key(e),i=this._cache.get(n);i||(i=new iE(6),this._cache.set(n,i));let o=qn(i.update(t),this._min,this._max);return Sm(e.uri,"output")||this._logService.trace(`[DEBOUNCE: ${this._name}] for ${e.uri.toString()} is ${o}ms`),o}_overall(){let e=new wy;for(let[,t]of this._cache)e.update(t.value);return e.value}default(){let e=this._overall()|0||this._default;return qn(e,this._min,this._max)}},bC=class{constructor(e,t){this._logService=e;this._isDev=t.isExtensionDevelopment||!t.isBuilt}_data=new Map;_isDev;for(e,t,n){let i=n?.min??50,o=n?.max??i**2,s=n?.key??void 0,a=`${qW.of(e)},${i}${s?","+s:""}`,l=this._data.get(a);return l||(this._isDev?(this._logService.debug(`[DEBOUNCE: ${t}] is disabled in developed mode`),l=new jW(i*1.5)):l=new $W(this._logService,t,e,this._overallAverage()|0||i*1.5,i,o),this._data.set(a,l)),l}_overallAverage(){let e=new wy;for(let t of this._data.values())e.update(t.default());return e.value}};bC=_([y(0,Vt),y(1,di)],bC);Cn(BJ,bC,1);var WJ=[];function c3(){return WJ}function u3(r,e){return new F(r.lineNumber+e.lineNumber-1,e.lineNumber===1?r.column+e.column-1:e.column)}function YW(r,e){return new F(r.lineNumber-e.lineNumber+1,r.lineNumber-e.lineNumber===0?r.column-e.column+1:r.column)}var Sp=class{constructor(e,t){this.lineNumber=e;this.parts=t}equals(e){return this.lineNumber===e.lineNumber&&this.parts.length===e.parts.length&&this.parts.every((t,n)=>t.equals(e.parts[n]))}render(e,t=!1){return new hc([...this.parts.map(n=>new ti(D.fromPositions(new F(this.lineNumber,n.column)),t?`[${n.lines.join(`
`)}]`:n.lines.join(`
`)))]).applyToString(e)}renderForScreenReader(e){if(this.parts.length===0)return"";let t=this.parts[this.parts.length-1],n=e.substr(0,t.column-1);return new hc([...this.parts.map(o=>new ti(D.fromPositions(new F(1,o.column)),o.lines.join(`
`)))]).applyToString(n).substring(this.parts[0].column-1)}isEmpty(){return this.parts.every(e=>e.lines.length===0)}get lineCount(){return 1+this.parts.reduce((e,t)=>e+t.lines.length-1,0)}},uv=class{constructor(e,t,n){this.column=e;this.text=t;this.preview=n}lines=Ma(this.text);equals(e){return this.column===e.column&&this.lines.length===e.lines.length&&this.lines.every((t,n)=>t===e.lines[n])}},kR=class{constructor(e,t,n,i=0){this.lineNumber=e;this.columnRange=t;this.text=n;this.additionalReservedLineCount=i}parts=[new uv(this.columnRange.endColumnExclusive,this.text,!1)];newLines=Ma(this.text);renderForScreenReader(e){return this.newLines.join(`
`)}render(e,t=!1){let n=this.columnRange.toRange(this.lineNumber);return t?new hc([new ti(D.fromPositions(n.getStartPosition()),"("),new ti(D.fromPositions(n.getEndPosition()),`)[${this.newLines.join(`
`)}]`)]).applyToString(e):new hc([new ti(n,this.newLines.join(`
`))]).applyToString(e)}get lineCount(){return this.newLines.length}isEmpty(){return this.parts.every(e=>e.lines.length===0)}equals(e){return this.lineNumber===e.lineNumber&&this.columnRange.equals(e.columnRange)&&this.newLines.length===e.newLines.length&&this.newLines.every((t,n)=>t===e.newLines[n])&&this.additionalReservedLineCount===e.additionalReservedLineCount}};function XW(r,e){return sn(r,e,QW)}function QW(r,e){return r===e?!0:!r||!e?!1:r instanceof Sp&&e instanceof Sp||r instanceof kR&&e instanceof kR?r.equals(e):!1}function p3(r,e){let t=new of,n=new af(t,d=>e.getLanguageConfiguration(d)),i=new lf(new ZW([r]),n),o=eS(i,[],void 0,!0),s="",a=r.getLineContent();function l(d,c){if(d.kind===2)if(l(d.openingBracket,c),c=Bt(c,d.openingBracket.length),d.child&&(l(d.child,c),c=Bt(c,d.child.length)),d.closingBracket)l(d.closingBracket,c),c=Bt(c,d.closingBracket.length);else{let h=n.getSingleLanguageBracketTokens(d.openingBracket.languageId).findClosingTokenText(d.openingBracket.bracketIds);s+=h}else if(d.kind!==3){if(d.kind===0||d.kind===1)s+=a.substring(c,Bt(c,d.length));else if(d.kind===4)for(let p of d.children)l(p,c),c=Bt(c,p.length)}}return l(o,ci),s}var ZW=class{constructor(e){this.lines=e}getValue(){return this.lines.map(e=>e.getLineContent()).join(`
`)}getLineCount(){return this.lines.length}getLineLength(e){return this.lines[e-1].getLineContent().length}tokenization={getLineTokens:e=>this.lines[e-1]}};async function g3(r,e,t,n,i=Yt.None,o){let s=e instanceof F?VJ(e,t):e,a=r.all(t),l=new nc;for(let v of a)v.groupId&&l.add(v.groupId,v);function d(v){if(!v.yieldsToGroupIds)return[];let S=[];for(let x of v.yieldsToGroupIds||[]){let E=l.get(x);for(let w of E)S.push(w)}return S}let c=new Map,p=new Set;function h(v,S){if(S=[...S,v],p.has(v))return S;p.add(v);try{let x=d(v);for(let E of x){let w=h(E,S);if(w)return w}}finally{p.delete(v)}}function g(v){let S=c.get(v);if(S)return S;let x=h(v,[]);x&&wl(new Error(`Inline completions: cyclic yield-to dependency detected. Path: ${x.map(w=>w.toString?w.toString():""+w).join(" -> ")}`));let E=new Fl;return c.set(v,E.p),(async()=>{if(!x){let w=d(v);for(let P of w){let R=await g(P);if(R&&R.items.length>0)return}}try{return e instanceof F?await v.provideInlineCompletions(t,e,n,i):await v.provideInlineEdits?.(t,e,n,i)}catch(w){wl(w);return}})().then(w=>E.complete(w),w=>E.error(w)),E.p}let f=await Promise.all(a.map(async v=>({provider:v,completions:await g(v)}))),m=new Map,b=[];for(let v of f){let S=v.completions;if(!S)continue;let x=new eV(S,v.provider);b.push(x);for(let E of S.items){let w=tV.from(E,x,s,t,o);m.set(w.hash(),w)}}return new JW(Array.from(m.values()),new Set(m.keys()),b)}var JW=class{constructor(e,t,n){this.completions=e;this.hashs=t;this.providerResults=n}has(e){return this.hashs.has(e.hash())}dispose(){for(let e of this.providerResults)e.removeRef()}},eV=class{constructor(e,t){this.inlineCompletions=e;this.provider=t}refCount=1;addRef(){this.refCount++}removeRef(){this.refCount--,this.refCount===0&&this.provider.freeInlineCompletions(this.inlineCompletions)}},tV=class r{constructor(e,t,n,i,o,s,a,l){this.filterText=e;this.command=t;this.range=n;this.insertText=i;this.snippetInfo=o;this.additionalTextEdits=s;this.sourceInlineCompletion=a;this.source=l;e=e.replace(/\r\n|\r/g,`
`),i=e.replace(/\r\n|\r/g,`
`)}static from(e,t,n,i,o){let s,a,l=e.range?D.lift(e.range):n;if(typeof e.insertText=="string"){if(s=e.insertText,o&&e.completeBracketPairs){s=h3(s,l.getStartPosition(),i,o);let d=s.length-e.insertText.length;d!==0&&(l=new D(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+d))}a=void 0}else if("snippet"in e.insertText){let d=e.insertText.snippet.length;if(o&&e.completeBracketPairs){e.insertText.snippet=h3(e.insertText.snippet,l.getStartPosition(),i,o);let p=e.insertText.snippet.length-d;p!==0&&(l=new D(l.startLineNumber,l.startColumn,l.endLineNumber,l.endColumn+p))}let c=new xr().parse(e.insertText.snippet);c.children.length===1&&c.children[0]instanceof xi?(s=c.children[0].value,a=void 0):(s=c.toString(),a={snippet:e.insertText.snippet,range:l})}else Gp(e.insertText);return new r(s,e.command,l,s,a,e.additionalTextEdits||c3(),e,t)}withRange(e){return new r(this.filterText,this.command,e,this.insertText,this.snippetInfo,this.additionalTextEdits,this.sourceInlineCompletion,this.source)}hash(){return JSON.stringify({insertText:this.insertText,range:this.range.toString()})}toSingleTextEdit(){return new ti(this.range,this.insertText)}};function VJ(r,e){let t=e.getWordAtPosition(r),n=e.getLineMaxColumn(r.lineNumber);return t?new D(r.lineNumber,t.startColumn,r.lineNumber,n):D.fromPositions(r,r.with(void 0,n))}function h3(r,e,t,n){let o=t.getLineContent(e.lineNumber).substring(0,e.column-1)+r,s=_T.replace(Jt.ofStartAndLength(e.column-1,o.length-(e.column-1)),r),l=t.tokenization.tokenizeLineWithEdit(e.lineNumber,s)?.mainLineTokens?.sliceAndInflate(e.column-1,o.length,0);return l?p3(l,n):r}function Cp(r,e,t){let n=t?r.range.intersectRanges(t):r.range;if(!n)return r;let i=e.getValueInRange(n,1),o=Oa(i,r.text),s=Yo.ofText(i.substring(0,o)).addToPosition(r.range.getStartPosition()),a=r.text.substring(o),l=D.fromPositions(s,r.range.getEndPosition());return new ti(l,a)}function nV(r,e){return r.text.startsWith(e.text)&&HJ(r.range,e.range)}function iV(r,e,t,n,i=0){let o=Cp(r,e);if(o.range.endLineNumber!==o.range.startLineNumber)return;let s=e.getLineContent(o.range.startLineNumber),a=an(s).length;if(o.range.startColumn-1<=a){let f=an(o.text).length,m=s.substring(o.range.startColumn-1,a),[b,v]=[o.range.getStartPosition(),o.range.getEndPosition()],S=b.column+m.length<=v.column?b.delta(0,m.length):v,x=D.fromPositions(S,v),E=o.text.startsWith(m)?o.text.substring(m.length):o.text.substring(f);o=new ti(x,E)}let d=e.getValueInRange(o.range),c=UJ(d,o.text);if(!c)return;let p=o.range.startLineNumber,h=new Array;if(t==="prefix"){let f=c.filter(m=>m.originalLength===0);if(f.length>1||f.length===1&&f[0].originalStart!==d.length)return}let g=o.text.length-i;for(let f of c){let m=o.range.startColumn+f.originalStart+f.originalLength;if(t==="subwordSmart"&&n&&n.lineNumber===o.range.startLineNumber&&m<n.column||f.originalLength>0)return;if(f.modifiedLength===0)continue;let b=f.modifiedStart+f.modifiedLength,v=Math.max(f.modifiedStart,Math.min(b,g)),S=o.text.substring(f.modifiedStart,v),x=o.text.substring(v,Math.max(f.modifiedStart,b));S.length>0&&h.push(new uv(m,S,!1)),x.length>0&&h.push(new uv(m,x,!0))}return new Sp(p,h)}function HJ(r,e){return e.getStartPosition().equals(r.getStartPosition())&&e.getEndPosition().isBeforeOrEqual(r.getEndPosition())}var RR;function UJ(r,e){if(RR?.originalValue===r&&RR?.newValue===e)return RR?.changes;{let t=f3(r,e,!0);if(t){let n=m3(t);if(n>0){let i=f3(r,e,!1);i&&m3(i)<n&&(t=i)}}return RR={originalValue:r,newValue:e,changes:t},t}}function m3(r){let e=0;for(let t of r)e+=t.originalLength;return e}function f3(r,e,t){if(r.length>5e3||e.length>5e3)return;function n(d){let c=0;for(let p=0,h=d.length;p<h;p++){let g=d.charCodeAt(p);g>c&&(c=g)}return c}let i=Math.max(n(r),n(e));function o(d){if(d<0)throw new Error("unexpected");return i+d+1}function s(d){let c=0,p=0,h=new Int32Array(d.length);for(let g=0,f=d.length;g<f;g++)if(t&&d[g]==="("){let m=p*100+c;h[g]=o(2*m),c++}else if(t&&d[g]===")"){c=Math.max(c-1,0);let m=p*100+c;h[g]=o(2*m+1),c===0&&p++}else h[g]=d.charCodeAt(g);return h}let a=s(r),l=s(e);return new _h({getElements:()=>a},{getElements:()=>l}).ComputeDiff(!1).changes}var pv=class extends N{constructor(t,n,i,o,s){super();this.textModel=t;this.versionId=n;this._debounceValue=i;this.languageFeaturesService=o;this.languageConfigurationService=s;this._register(this.textModel.onDidChangeContent(()=>{this._updateOperation.clear()}))}_updateOperation=this._register(new Qt);inlineCompletions=ax("inlineCompletions",void 0);suggestWidgetInlineCompletions=ax("suggestWidgetInlineCompletions",void 0);fetch(t,n,i){let o=new rV(t,n,this.textModel.getVersionId()),s=n.selectedSuggestionInfo?this.suggestWidgetInlineCompletions:this.inlineCompletions;if(this._updateOperation.value?.request.satisfies(o))return this._updateOperation.value.promise;if(s.get()?.request.satisfies(o))return Promise.resolve(!0);let a=!!this._updateOperation.value;this._updateOperation.clear();let l=new jn,d=(async()=>{if((a||n.triggerKind===0)&&await KJ(this._debounceValue.get(this.textModel),l.token),l.token.isCancellationRequested||this._store.isDisposed||this.textModel.getVersionId()!==o.versionId)return!1;let h=new Date,g=await g3(this.languageFeaturesService.inlineCompletionsProvider,t,this.textModel,n,l.token,this.languageConfigurationService);if(l.token.isCancellationRequested||this._store.isDisposed||this.textModel.getVersionId()!==o.versionId)return!1;let f=new Date;this._debounceValue.update(this.textModel,f.getTime()-h.getTime());let m=new aV(g,o,this.textModel,this.versionId);if(i){let b=i.toInlineCompletion(void 0);i.canBeReused(this.textModel,t)&&!g.has(b)&&m.prepend(i.inlineCompletion,b.range,!0)}return this._updateOperation.clear(),Xd(b=>{s.set(m,b)}),!0})(),c=new sV(o,l,d);return this._updateOperation.value=c,d}clear(t){this._updateOperation.clear(),this.inlineCompletions.set(void 0,t),this.suggestWidgetInlineCompletions.set(void 0,t)}clearSuggestWidgetInlineCompletions(t){this._updateOperation.value?.request.context.selectedSuggestionInfo&&this._updateOperation.clear(),this.suggestWidgetInlineCompletions.set(void 0,t)}cancelUpdate(){this._updateOperation.clear()}};pv=_([y(3,no),y(4,Qn)],pv);function KJ(r,e){return new Promise(t=>{let n,i=setTimeout(()=>{n&&n.dispose(),t()},r);e&&(n=e.onCancellationRequested(()=>{clearTimeout(i),n&&n.dispose(),t()}))})}var rV=class{constructor(e,t,n){this.position=e;this.context=t;this.versionId=n}satisfies(e){return this.position.equals(e.position)&&w2(this.context.selectedSuggestionInfo,e.context.selectedSuggestionInfo,T2())&&(e.context.triggerKind===0||this.context.triggerKind===1)&&this.versionId===e.versionId}},sV=class{constructor(e,t,n){this.request=e;this.cancellationTokenSource=t;this.promise=n}dispose(){this.cancellationTokenSource.cancel()}},aV=class{constructor(e,t,n,i){this.inlineCompletionProviderResult=e;this.request=t;this._textModel=n;this._versionId=i;let o=n.deltaDecorations([],e.completions.map(s=>({range:s.range,options:{description:"inline-completion-tracking-range"}})));this._inlineCompletions=e.completions.map((s,a)=>new MR(s,o[a],this._textModel,this._versionId))}_inlineCompletions;get inlineCompletions(){return this._inlineCompletions}_refCount=1;_prependedInlineCompletionItems=[];clone(){return this._refCount++,this}dispose(){if(this._refCount--,this._refCount===0){setTimeout(()=>{this._textModel.isDisposed()||this._textModel.deltaDecorations(this._inlineCompletions.map(e=>e.decorationId),[])},0),this.inlineCompletionProviderResult.dispose();for(let e of this._prependedInlineCompletionItems)e.source.removeRef()}}prepend(e,t,n){n&&e.source.addRef();let i=this._textModel.deltaDecorations([],[{range:t,options:{description:"inline-completion-tracking-range"}}])[0];this._inlineCompletions.unshift(new MR(e,i,this._textModel,this._versionId)),this._prependedInlineCompletionItems.push(e)}},MR=class{constructor(e,t,n,i){this.inlineCompletion=e;this.decorationId=t;this._textModel=n;this._modelVersion=i}semanticId=JSON.stringify([this.inlineCompletion.filterText,this.inlineCompletion.insertText,this.inlineCompletion.range.getStartPosition().toString()]);get forwardStable(){return this.inlineCompletion.source.inlineCompletions.enableForwardStability??!1}_updatedRange=Da({owner:this,equalsFn:D.equalsRange},e=>(this._modelVersion.read(e),this._textModel.getDecorationRange(this.decorationId)));toInlineCompletion(e){return this.inlineCompletion.withRange(this._updatedRange.read(e)??oV)}toSingleTextEdit(e){return new ti(this._updatedRange.read(e)??oV,this.inlineCompletion.insertText)}isVisible(e,t,n){let i=Cp(this._toFilterTextReplacement(n),e),o=this._updatedRange.read(n);if(!o||!this.inlineCompletion.range.getStartPosition().equals(o.getStartPosition())||t.lineNumber!==i.range.startLineNumber)return!1;let s=e.getValueInRange(i.range,1),a=i.text,l=Math.max(0,t.column-i.range.startColumn),d=a.substring(0,l),c=a.substring(l),p=s.substring(0,l),h=s.substring(l),g=e.getLineIndentColumn(i.range.startLineNumber);return i.range.startColumn<=g&&(p=p.trimStart(),p.length===0&&(h=h.trimStart()),d=d.trimStart(),d.length===0&&(c=c.trimStart())),d.startsWith(p)&&!!cM(h,c)}canBeReused(e,t){let n=this._updatedRange.read(void 0);return!!n&&n.containsPosition(t)&&this.isVisible(e,t,void 0)&&Yo.ofRange(n).isGreaterThanOrEqualTo(Yo.ofRange(this.inlineCompletion.range))}_toFilterTextReplacement(e){return new ti(this._updatedRange.read(e)??oV,this.inlineCompletion.filterText)}},oV=new D(1,1,1,1);var b3=Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,CURRENT_TIMEZONE_OFFSET:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,CURSOR_INDEX:!0,CURSOR_NUMBER:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0}),vC=class{constructor(e){this._delegates=e}resolve(e){for(let t of this._delegates){let n=t.resolve(e);if(n!==void 0)return n}}},yC=class{constructor(e,t,n,i){this._model=e;this._selection=t;this._selectionIdx=n;this._overtypingCapturer=i}resolve(e){let{name:t}=e;if(t==="SELECTION"||t==="TM_SELECTED_TEXT"){let n=this._model.getValueInRange(this._selection)||void 0,i=this._selection.startLineNumber!==this._selection.endLineNumber;if(!n&&this._overtypingCapturer){let o=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);o&&(n=o.value,i=o.multiline)}if(n&&i&&e.snippet){let o=this._model.getLineContent(this._selection.startLineNumber),s=an(o,0,this._selection.startColumn-1),a=s;e.snippet.walk(d=>d===e?!1:(d instanceof xi&&(a=an(Ma(d.value).pop())),!0));let l=Oa(a,s);n=n.replace(/(\r\n|\r|\n)(.*)/g,(d,c,p)=>`${c}${a.substr(l)}${p}`)}return n}else{if(t==="TM_CURRENT_LINE")return this._model.getLineContent(this._selection.positionLineNumber);if(t==="TM_CURRENT_WORD"){let n=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return n&&n.word||void 0}else{if(t==="TM_LINE_INDEX")return String(this._selection.positionLineNumber-1);if(t==="TM_LINE_NUMBER")return String(this._selection.positionLineNumber);if(t==="CURSOR_INDEX")return String(this._selectionIdx);if(t==="CURSOR_NUMBER")return String(this._selectionIdx+1)}}}},IC=class{constructor(e,t){this._labelService=e;this._model=t}resolve(e){let{name:t}=e;if(t==="TM_FILENAME")return Ho(this._model.uri.fsPath);if(t==="TM_FILENAME_BASE"){let n=Ho(this._model.uri.fsPath),i=n.lastIndexOf(".");return i<=0?n:n.slice(0,i)}else{if(t==="TM_DIRECTORY")return du(this._model.uri.fsPath)==="."?"":this._labelService.getUriLabel(ns(this._model.uri));if(t==="TM_FILEPATH")return this._labelService.getUriLabel(this._model.uri);if(t==="RELATIVE_FILEPATH")return this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0})}}},SC=class{constructor(e,t,n,i){this._readClipboardText=e;this._selectionIdx=t;this._selectionCount=n;this._spread=i}resolve(e){if(e.name!=="CLIPBOARD")return;let t=this._readClipboardText();if(t){if(this._spread){let n=t.split(/\r\n|\n|\r/).filter(i=>!Pl(i));if(n.length===this._selectionCount)return n[this._selectionIdx]}return t}}},Vg=class{constructor(e,t,n){this._model=e;this._selection=t;this._languageConfigurationService=n}resolve(e){let{name:t}=e,n=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),i=this._languageConfigurationService.getLanguageConfiguration(n).comments;if(i){if(t==="LINE_COMMENT")return i.lineCommentToken||void 0;if(t==="BLOCK_COMMENT_START")return i.blockCommentStartToken||void 0;if(t==="BLOCK_COMMENT_END")return i.blockCommentEndToken||void 0}}};Vg=_([y(2,Qn)],Vg);var CC=class r{static dayNames=[u("Sunday","Sunday"),u("Monday","Monday"),u("Tuesday","Tuesday"),u("Wednesday","Wednesday"),u("Thursday","Thursday"),u("Friday","Friday"),u("Saturday","Saturday")];static dayNamesShort=[u("SundayShort","Sun"),u("MondayShort","Mon"),u("TuesdayShort","Tue"),u("WednesdayShort","Wed"),u("ThursdayShort","Thu"),u("FridayShort","Fri"),u("SaturdayShort","Sat")];static monthNames=[u("January","January"),u("February","February"),u("March","March"),u("April","April"),u("May","May"),u("June","June"),u("July","July"),u("August","August"),u("September","September"),u("October","October"),u("November","November"),u("December","December")];static monthNamesShort=[u("JanuaryShort","Jan"),u("FebruaryShort","Feb"),u("MarchShort","Mar"),u("AprilShort","Apr"),u("MayShort","May"),u("JuneShort","Jun"),u("JulyShort","Jul"),u("AugustShort","Aug"),u("SeptemberShort","Sep"),u("OctoberShort","Oct"),u("NovemberShort","Nov"),u("DecemberShort","Dec")];_date=new Date;resolve(e){let{name:t}=e;if(t==="CURRENT_YEAR")return String(this._date.getFullYear());if(t==="CURRENT_YEAR_SHORT")return String(this._date.getFullYear()).slice(-2);if(t==="CURRENT_MONTH")return String(this._date.getMonth().valueOf()+1).padStart(2,"0");if(t==="CURRENT_DATE")return String(this._date.getDate().valueOf()).padStart(2,"0");if(t==="CURRENT_HOUR")return String(this._date.getHours().valueOf()).padStart(2,"0");if(t==="CURRENT_MINUTE")return String(this._date.getMinutes().valueOf()).padStart(2,"0");if(t==="CURRENT_SECOND")return String(this._date.getSeconds().valueOf()).padStart(2,"0");if(t==="CURRENT_DAY_NAME")return r.dayNames[this._date.getDay()];if(t==="CURRENT_DAY_NAME_SHORT")return r.dayNamesShort[this._date.getDay()];if(t==="CURRENT_MONTH_NAME")return r.monthNames[this._date.getMonth()];if(t==="CURRENT_MONTH_NAME_SHORT")return r.monthNamesShort[this._date.getMonth()];if(t==="CURRENT_SECONDS_UNIX")return String(Math.floor(this._date.getTime()/1e3));if(t==="CURRENT_TIMEZONE_OFFSET"){let n=this._date.getTimezoneOffset(),i=n>0?"-":"+",o=Math.trunc(Math.abs(n/60)),s=o<10?"0"+o:o,a=Math.abs(n)-o*60,l=a<10?"0"+a:a;return i+s+":"+l}}},xC=class{constructor(e){this._workspaceService=e}resolve(e){if(!this._workspaceService)return;let t=ZU(this._workspaceService.getWorkspace());if(!QU(t)){if(e.name==="WORKSPACE_NAME")return this._resolveWorkspaceName(t);if(e.name==="WORKSPACE_FOLDER")return this._resoveWorkspacePath(t)}}_resolveWorkspaceName(e){if(Pu(e))return Ho(e.uri.path);let t=Ho(e.configPath.path);return t.endsWith(Yy)&&(t=t.substr(0,t.length-Yy.length-1)),t}_resoveWorkspacePath(e){if(Pu(e))return Jw(e.uri.fsPath);let t=Ho(e.configPath.path),n=e.configPath.fsPath;return n.endsWith(t)&&(n=n.substr(0,n.length-t.length-1)),n?Jw(n):"/"}},EC=class{resolve(e){let{name:t}=e;if(t==="RANDOM")return Math.random().toString().slice(-6);if(t==="RANDOM_HEX")return Math.random().toString(16).slice(-6);if(t==="UUID")return ia()}};var OR=class r{constructor(e,t,n){this._editor=e;this._snippet=t;this._snippetLineLeadingWhitespace=n;this._placeholderGroups=Q0(t.placeholders,tr.compareByIndex),this._placeholderGroupsIdx=-1}_placeholderDecorations;_placeholderGroups;_offset=-1;_placeholderGroupsIdx;_nestingLevel=1;static _decor={active:Bn.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:Bn.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:Bn.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:Bn.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};initialize(e){this._offset=e.newPosition}dispose(){this._placeholderDecorations&&this._editor.removeDecorations([...this._placeholderDecorations.values()]),this._placeholderGroups.length=0}_initDecorations(){if(this._offset===-1)throw new Error("Snippet not initialized!");if(this._placeholderDecorations)return;this._placeholderDecorations=new Map;let e=this._editor.getModel();this._editor.changeDecorations(t=>{for(let n of this._snippet.placeholders){let i=this._snippet.offset(n),o=this._snippet.fullLen(n),s=D.fromPositions(e.getPositionAt(this._offset+i),e.getPositionAt(this._offset+i+o)),a=n.isFinalTabstop?r._decor.inactiveFinal:r._decor.inactive,l=t.addDecoration(s,a);this._placeholderDecorations.set(n,l)}})}move(e){if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){let i=[];for(let o of this._placeholderGroups[this._placeholderGroupsIdx])if(o.transform){let s=this._placeholderDecorations.get(o),a=this._editor.getModel().getDecorationRange(s),l=this._editor.getModel().getValueInRange(a),d=o.transform.resolve(l).split(/\r\n|\r|\n/);for(let c=1;c<d.length;c++)d[c]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+d[c]);i.push(mo.replace(a,d.join(this._editor.getModel().getEOL())))}i.length>0&&this._editor.executeEdits("snippet.placeholderTransform",i)}let t=!1;e===!0&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,t=!0):e===!1&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,t=!0);let n=this._editor.getModel().changeDecorations(i=>{let o=new Set,s=[];for(let a of this._placeholderGroups[this._placeholderGroupsIdx]){let l=this._placeholderDecorations.get(a),d=this._editor.getModel().getDecorationRange(l);s.push(new ze(d.startLineNumber,d.startColumn,d.endLineNumber,d.endColumn)),t=t&&this._hasPlaceholderBeenCollapsed(a),i.changeDecorationOptions(l,a.isFinalTabstop?r._decor.activeFinal:r._decor.active),o.add(a);for(let c of this._snippet.enclosingPlaceholders(a)){let p=this._placeholderDecorations.get(c);i.changeDecorationOptions(p,c.isFinalTabstop?r._decor.activeFinal:r._decor.active),o.add(c)}}for(let[a,l]of this._placeholderDecorations)o.has(a)||i.changeDecorationOptions(l,a.isFinalTabstop?r._decor.inactiveFinal:r._decor.inactive);return s});return t?this.move(e):n??[]}_hasPlaceholderBeenCollapsed(e){let t=e;for(;t;){if(t instanceof tr){let n=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(n).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}get isAtFirstPlaceholder(){return this._placeholderGroupsIdx<=0||this._placeholderGroups.length===0}get isAtLastPlaceholder(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}get hasPlaceholder(){return this._snippet.placeholders.length>0}get isTrivialSnippet(){if(this._snippet.placeholders.length===0)return!0;if(this._snippet.placeholders.length===1){let[e]=this._snippet.placeholders;if(e.isFinalTabstop&&this._snippet.rightMostDescendant===e)return!0}return!1}computePossibleSelections(){let e=new Map;for(let t of this._placeholderGroups){let n;for(let i of t){if(i.isFinalTabstop)break;n||(n=[],e.set(i.index,n));let o=this._placeholderDecorations.get(i),s=this._editor.getModel().getDecorationRange(o);if(!s){e.delete(i.index);break}n.push(s)}}return e}get activeChoice(){if(!this._placeholderDecorations)return;let e=this._placeholderGroups[this._placeholderGroupsIdx][0];if(!e?.choice)return;let t=this._placeholderDecorations.get(e);if(!t)return;let n=this._editor.getModel().getDecorationRange(t);if(n)return{range:n,choice:e.choice}}get hasChoice(){let e=!1;return this._snippet.walk(t=>(e=t instanceof qh,!e)),e}merge(e){let t=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations(n=>{for(let i of this._placeholderGroups[this._placeholderGroupsIdx]){let o=e.shift();console.assert(o._offset!==-1),console.assert(!o._placeholderDecorations);let s=o._snippet.placeholderInfo.last.index;for(let l of o._snippet.placeholderInfo.all)l.isFinalTabstop?l.index=i.index+(s+1)/this._nestingLevel:l.index=i.index+l.index/this._nestingLevel;this._snippet.replace(i,o._snippet.children);let a=this._placeholderDecorations.get(i);n.removeDecoration(a),this._placeholderDecorations.delete(i);for(let l of o._snippet.placeholders){let d=o._snippet.offset(l),c=o._snippet.fullLen(l),p=D.fromPositions(t.getPositionAt(o._offset+d),t.getPositionAt(o._offset+d+c)),h=n.addDecoration(p,r._decor.inactive);this._placeholderDecorations.set(l,h)}}this._placeholderGroups=Q0(this._snippet.placeholders,tr.compareByIndex)})}getEnclosingRange(){let e,t=this._editor.getModel();for(let n of this._placeholderDecorations.values()){let i=t.getDecorationRange(n)??void 0;e?e=e.plusRange(i):e=i}return e}},v3={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},sr=class{constructor(e,t,n=v3,i){this._editor=e;this._template=t;this._options=n;this._languageConfigurationService=i}static adjustWhitespace(e,t,n,i,o){let s=e.getLineContent(t.lineNumber),a=an(s,0,t.column-1),l;return i.walk(d=>{if(!(d instanceof xi)||d.parent instanceof qh||o&&!o.has(d))return!0;let c=d.value.split(/\r\n|\r|\n/);if(n){let h=i.offset(d);if(h===0)c[0]=e.normalizeIndentation(c[0]);else{l=l??i.toString();let g=l.charCodeAt(h-1);(g===10||g===13)&&(c[0]=e.normalizeIndentation(a+c[0]))}for(let g=1;g<c.length;g++)c[g]=e.normalizeIndentation(a+c[g])}let p=c.join(e.getEOL());return p!==d.value&&(d.parent.replace(d,[new xi(p)]),l=void 0),!0}),a}static adjustSelection(e,t,n,i){if(n!==0||i!==0){let{positionLineNumber:o,positionColumn:s}=t,a=s-n,l=s+i,d=e.validateRange({startLineNumber:o,startColumn:a,endLineNumber:o,endColumn:l});t=ze.createWithDirection(d.startLineNumber,d.startColumn,d.endLineNumber,d.endColumn,t.getDirection())}return t}static createEditsAndSnippetsFromSelections(e,t,n,i,o,s,a,l,d){let c=[],p=[];if(!e.hasModel())return{edits:c,snippets:p};let h=e.getModel(),g=e.invokeWithinContext(E=>E.get(fn)),f=e.invokeWithinContext(E=>new IC(E.get(ro),h)),m=()=>a,b=h.getValueInRange(sr.adjustSelection(h,e.getSelection(),n,0)),v=h.getValueInRange(sr.adjustSelection(h,e.getSelection(),0,i)),S=h.getLineFirstNonWhitespaceColumn(e.getSelection().positionLineNumber),x=e.getSelections().map((E,w)=>({selection:E,idx:w})).sort((E,w)=>D.compareRangesUsingStarts(E.selection,w.selection));for(let{selection:E,idx:w}of x){let P=sr.adjustSelection(h,E,n,0),R=sr.adjustSelection(h,E,0,i);b!==h.getValueInRange(P)&&(P=E),v!==h.getValueInRange(R)&&(R=E);let O=E.setStartPosition(P.startLineNumber,P.startColumn).setEndPosition(R.endLineNumber,R.endColumn),M=new xr().parse(t,!0,o),K=O.getStartPosition(),$=sr.adjustWhitespace(h,K,s||w>0&&S!==h.getLineFirstNonWhitespaceColumn(E.positionLineNumber),M);M.resolveVariables(new vC([f,new SC(m,w,x.length,e.getOption(80)==="spread"),new yC(h,E,w,l),new Vg(h,E,d),new CC,new xC(g),new EC])),c[w]=mo.replace(O,M.toString()),c[w].identifier={major:w,minor:0},c[w]._isTracked=!0,p[w]=new OR(e,M,$)}return{edits:c,snippets:p}}static createEditsAndSnippetsFromEdits(e,t,n,i,o,s,a){if(!e.hasModel()||t.length===0)return{edits:[],snippets:[]};let l=[],d=e.getModel(),c=new xr,p=new wf,h=new vC([e.invokeWithinContext(f=>new IC(f.get(ro),d)),new SC(()=>o,0,e.getSelections().length,e.getOption(80)==="spread"),new yC(d,e.getSelection(),0,s),new Vg(d,e.getSelection(),a),new CC,new xC(e.invokeWithinContext(f=>f.get(fn))),new EC]);t=t.sort((f,m)=>D.compareRangesUsingStarts(f.range,m.range));let g=0;for(let f=0;f<t.length;f++){let{range:m,template:b}=t[f];if(f>0){let w=t[f-1].range,P=D.fromPositions(w.getEndPosition(),m.getStartPosition()),R=new xi(d.getValueInRange(P));p.appendChild(R),g+=R.value.length}let v=c.parseFragment(b,p);sr.adjustWhitespace(d,m.getStartPosition(),!0,p,new Set(v)),p.resolveVariables(h);let S=p.toString(),x=S.slice(g);g=S.length;let E=mo.replace(m,x);E.identifier={major:f,minor:0},E._isTracked=!0,l.push(E)}return c.ensureFinalTabstop(p,n,!0),{edits:l,snippets:[new OR(e,p,"")]}}_templateMerges=[];_snippets=[];dispose(){rt(this._snippets)}_logInfo(){return`template="${this._template}", merged_templates="${this._templateMerges.join(" -> ")}"`}insert(){if(!this._editor.hasModel())return;let{edits:e,snippets:t}=typeof this._template=="string"?sr.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):sr.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService);this._snippets=t,this._editor.executeEdits("snippet",e,n=>{let i=n.filter(o=>!!o.identifier);for(let o=0;o<t.length;o++)t[o].initialize(i[o].textChange);return this._snippets[0].hasPlaceholder?this._move(!0):i.map(o=>ze.fromPositions(o.range.getEndPosition()))}),this._editor.revealRange(this._editor.getSelections()[0])}merge(e,t=v3){if(!this._editor.hasModel())return;this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,e]);let{edits:n,snippets:i}=sr.createEditsAndSnippetsFromSelections(this._editor,e,t.overwriteBefore,t.overwriteAfter,!0,t.adjustWhitespace,t.clipboardText,t.overtypingCapturer,this._languageConfigurationService);this._editor.executeEdits("snippet",n,o=>{let s=o.filter(l=>!!l.identifier);for(let l=0;l<i.length;l++)i[l].initialize(s[l].textChange);let a=i[0].isTrivialSnippet;if(!a){for(let l of this._snippets)l.merge(i);console.assert(i.length===0)}return this._snippets[0].hasPlaceholder&&!a?this._move(void 0):s.map(l=>ze.fromPositions(l.range.getEndPosition()))})}next(){let e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}prev(){let e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}_move(e){let t=[];for(let n of this._snippets){let i=n.move(e);t.push(...i)}return t}get isAtFirstPlaceholder(){return this._snippets[0].isAtFirstPlaceholder}get isAtLastPlaceholder(){return this._snippets[0].isAtLastPlaceholder}get hasPlaceholder(){return this._snippets[0].hasPlaceholder}get hasChoice(){return this._snippets[0].hasChoice}get activeChoice(){return this._snippets[0].activeChoice}isSelectionWithinPlaceholders(){if(!this.hasPlaceholder)return!1;let e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;let t=new Map;for(let n of this._snippets){let i=n.computePossibleSelections();if(t.size===0)for(let[o,s]of i){s.sort(D.compareRangesUsingStarts);for(let a of e)if(s[0].containsRange(a)){t.set(o,[]);break}}if(t.size===0)return!1;t.forEach((o,s)=>{o.push(...i.get(s))})}e.sort(D.compareRangesUsingStarts);for(let[n,i]of t){if(i.length!==e.length){t.delete(n);continue}i.sort(D.compareRangesUsingStarts);for(let o=0;o<i.length;o++)if(!i[o].containsRange(e[o])){t.delete(n);continue}}return t.size>0}getEnclosingRange(){let e;for(let t of this._snippets){let n=t.getEnclosingRange();e?e=e.plusRange(n):e=n}return e}};sr=_([y(3,Qn)],sr);var TC=class r{constructor(e,t,n,i,o){this._initialScrollTop=e;this._initialContentHeight=t;this._visiblePosition=n;this._visiblePositionScrollDelta=i;this._cursorPosition=o}static capture(e){if(e.getScrollTop()===0||e.hasPendingScrollAnimation())return new r(e.getScrollTop(),e.getContentHeight(),null,0,null);let t=null,n=0,i=e.getVisibleRanges();if(i.length>0){t=i[0].getStartPosition();let o=e.getTopForPosition(t.lineNumber,t.column);n=e.getScrollTop()-o}return new r(e.getScrollTop(),e.getContentHeight(),t,n,e.getPosition())}restore(e){if(!(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())&&this._visiblePosition){let t=e.getTopForPosition(this._visiblePosition.lineNumber,this._visiblePosition.column);e.setScrollTop(t+this._visiblePositionScrollDelta)}}restoreRelativeVerticalPositionOfCursor(e){if(this._initialContentHeight===e.getContentHeight()&&this._initialScrollTop===e.getScrollTop())return;let t=e.getPosition();if(!this._cursorPosition||!t)return;let n=e.getTopForLineNumber(t.lineNumber)-e.getTopForLineNumber(this._cursorPosition.lineNumber);e.setScrollTop(e.getScrollTop()+n,1)}};var wC=class{constructor(e){this.name=e}select(e,t,n){if(n.length===0)return 0;let i=n[0].score[0];for(let o=0;o<n.length;o++){let{score:s,completion:a}=n[o];if(s[0]!==i)break;if(a.preselect)return o}return 0}},PR=class extends wC{constructor(){super("first")}memorize(e,t,n){}toJSON(){}fromJSON(){}},lV=class extends wC{constructor(){super("recentlyUsed")}_cache=new Po(300,.66);_seq=0;memorize(e,t,n){let i=`${e.getLanguageId()}/${n.textLabel}`;this._cache.set(i,{touch:this._seq++,type:n.completion.kind,insertText:n.completion.insertText})}select(e,t,n){if(n.length===0)return 0;let i=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(i))return super.select(e,t,n);let o=n[0].score[0],s=-1,a=-1,l=-1;for(let d=0;d<n.length&&n[d].score[0]===o;d++){let c=`${e.getLanguageId()}/${n[d].textLabel}`,p=this._cache.peek(c);if(p&&p.touch>l&&p.type===n[d].completion.kind&&p.insertText===n[d].completion.insertText&&(l=p.touch,a=d),n[d].completion.preselect&&s===-1)return s=d}return a!==-1?a:s!==-1?s:0}toJSON(){return this._cache.toJSON()}fromJSON(e){this._cache.clear();let t=0;for(let[n,i]of e)i.touch=t,i.type=typeof i.type=="number"?i.type:Zm.fromString(i.type),this._cache.set(n,i);this._seq=this._cache.size}},dV=class extends wC{constructor(){super("recentlyUsedByPrefix")}_trie=Hm.forStrings();_seq=0;memorize(e,t,n){let{word:i}=e.getWordUntilPosition(t),o=`${e.getLanguageId()}/${i}`;this._trie.set(o,{type:n.completion.kind,insertText:n.completion.insertText,touch:this._seq++})}select(e,t,n){let{word:i}=e.getWordUntilPosition(t);if(!i)return super.select(e,t,n);let o=`${e.getLanguageId()}/${i}`,s=this._trie.get(o);if(s||(s=this._trie.findSubstr(o)),s)for(let a=0;a<n.length;a++){let{kind:l,insertText:d}=n[a].completion;if(l===s.type&&d===s.insertText)return a}return super.select(e,t,n)}toJSON(){let e=[];return this._trie.forEach((t,n)=>e.push([n,t])),e.sort((t,n)=>-(t[1].touch-n[1].touch)).forEach((t,n)=>t[1].touch=n),e.slice(0,200)}fromJSON(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;for(let[t,n]of e)n.type=typeof n.type=="number"?n.type:Zm.fromString(n.type),this._trie.set(t,n)}}},Kc=class{constructor(e,t){this._storageService=e;this._configService=t;this._persistSoon=new Hn(()=>this._saveState(),500),this._disposables.add(e.onWillSaveState(n=>{n.reason===1&&this._saveState()}))}static _strategyCtors=new Map([["recentlyUsedByPrefix",dV],["recentlyUsed",lV],["first",PR]]);static _storagePrefix="suggest/memories";_serviceBrand;_persistSoon;_disposables=new X;_strategy;dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(e,t,n){this._withStrategy(e,t).memorize(e,t,n),this._persistSoon.schedule()}select(e,t,n){return this._withStrategy(e,t).select(e,t,n)}_withStrategy(e,t){let n=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(t.lineNumber,t.column),resource:e.uri});if(this._strategy?.name!==n){this._saveState();let i=Kc._strategyCtors.get(n)||PR;this._strategy=new i;try{let s=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,a=this._storageService.get(`${Kc._storagePrefix}/${n}`,s);a&&this._strategy.fromJSON(JSON.parse(a))}catch{}}return this._strategy}_saveState(){if(this._strategy){let t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,n=JSON.stringify(this._strategy);this._storageService.store(`${Kc._storagePrefix}/${this._strategy.name}`,n,t,1)}}};Kc=_([y(0,Io),y(1,Ge)],Kc);var cV=j("ISuggestMemories");Cn(cV,Kc,1);var Gc=class{constructor(e,t){this._editor=e;this._ckAtEnd=Gc.AtEnd.bindTo(t),this._configListener=this._editor.onDidChangeConfiguration(n=>n.hasChanged(125)&&this._update()),this._update()}static AtEnd=new B("atEndOfWord",!1);_ckAtEnd;_configListener;_enabled=!1;_selectionListener;dispose(){this._configListener.dispose(),this._selectionListener?.dispose(),this._ckAtEnd.reset()}_update(){let e=this._editor.getOption(125)==="on";if(this._enabled!==e)if(this._enabled=e,this._enabled){let t=()=>{if(!this._editor.hasModel()){this._ckAtEnd.set(!1);return}let n=this._editor.getModel(),i=this._editor.getSelection(),o=n.getWordAtPosition(i.getStartPosition());if(!o){this._ckAtEnd.set(!1);return}this._ckAtEnd.set(o.endColumn===i.getStartPosition().column)};this._selectionListener=this._editor.onDidChangeCursorSelection(t),t()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}};Gc=_([y(1,Ne)],Gc);var xp=class extends Ss{_parentEditor;_overwriteOptions;constructor(e,t,n,i,o,s,a,l,d,c,p,h,g){super(e,{...i.getRawOptions(),overflowWidgetsDomNode:i.getOverflowWidgetsDomNode()},n,o,s,a,l,d,c,p,h,g),this._parentEditor=i,this._overwriteOptions=t,super.updateOptions(this._overwriteOptions),this._register(i.onDidChangeConfiguration(f=>this._onParentConfigurationChanged(f)))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){Pm(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};xp=_([y(4,we),y(5,rd),y(6,Xn),y(7,Ne),y(8,Ci),y(9,sl),y(10,Xi),y(11,Qn),y(12,no)],xp);function y3(r,e,t,n,i,o){let s,a,l,d,c;if(Array.isArray(r))c=r,s=e,a=t,l=n,d=i;else{let h=e;c=r.getActions(h),s=t,a=n,l=i,d=o}GJ(c,s,!1,typeof a=="string"?h=>h===a:a,l,d)}function GJ(r,e,t,n=s=>s==="navigation",i=()=>!1,o=!1){let s,a;Array.isArray(e)?(s=e,a=e):(s=e.primary,a=e.secondary);let l=new Set;for(let[d,c]of r){let p;n(d)?(p=s,p.length>0&&o&&p.push(new ei)):(p=a,p.length>0&&p.push(new ei));for(let h of c){t&&(h=h instanceof na&&h.alt?h.alt:h);let g=p.push(h);h instanceof ss&&l.add({group:d,action:h,index:g-1})}}for(let{group:d,action:c,index:p}of l){let h=n(d)?s:a,g=c.actions;i(c,d,h.length)&&h.splice(p,1,...g)}}var Hg=class extends tl{constructor(t,n,i,o,s,a,l,d){super(void 0,t,{icon:!!(t.class||t.item.icon),label:!t.class&&!t.item.icon,draggable:n?.draggable,keybinding:n?.keybinding,hoverDelegate:n?.hoverDelegate});this._options=n;this._keybindingService=i;this._notificationService=o;this._contextKeyService=s;this._themeService=a;this._contextMenuService=l;this._accessibilityService=d;this._altKey=Lm.getInstance()}_wantsAltCommand=!1;_itemClassDispose=this._register(new Qt);_altKey;get _menuItemAction(){return this._action}get _commandAction(){return this._wantsAltCommand&&this._menuItemAction.alt||this._menuItemAction}async onClick(t){t.preventDefault(),t.stopPropagation();try{await this.actionRunner.run(this._commandAction,this._context)}catch(n){this._notificationService.error(n)}}render(t){if(super.render(t),t.classList.add("menu-entry"),this.options.icon&&this._updateItemClass(this._menuItemAction.item),this._menuItemAction.alt){let n=!1,i=()=>{let o=!!this._menuItemAction.alt?.enabled&&(!this._accessibilityService.isMotionReduced()||n)&&(this._altKey.keyStatus.altKey||this._altKey.keyStatus.shiftKey&&n);o!==this._wantsAltCommand&&(this._wantsAltCommand=o,this.updateLabel(),this.updateTooltip(),this.updateClass())};this._register(this._altKey.event(i)),this._register(U(t,"mouseleave",o=>{n=!1,i()})),this._register(U(t,"mouseenter",o=>{n=!0,i()})),i()}}updateLabel(){this.options.label&&this.label&&(this.label.textContent=this._commandAction.label)}getTooltip(){let t=this._keybindingService.lookupKeybinding(this._commandAction.id,this._contextKeyService),n=t&&t.getLabel(),i=this._commandAction.tooltip||this._commandAction.label,o=n?u("titleAndKb","{0} ({1})",i,n):i;if(!this._wantsAltCommand&&this._menuItemAction.alt?.enabled){let s=this._menuItemAction.alt.tooltip||this._menuItemAction.alt.label,a=this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id,this._contextKeyService),l=a&&a.getLabel(),d=l?u("titleAndKb","{0} ({1})",s,l):s;o=u("titleAndKbAndAlt",`{0}
[{1}] {2}`,o,gb.modifierLabels[uo].altKey,d)}return o}updateClass(){this.options.icon&&(this._commandAction!==this._menuItemAction?this._menuItemAction.alt&&this._updateItemClass(this._menuItemAction.alt.item):this._updateItemClass(this._menuItemAction.item))}_updateItemClass(t){this._itemClassDispose.value=void 0;let{element:n,label:i}=this;if(!n||!i)return;let o=this._commandAction.checked&&dz(t.toggled)&&t.toggled.icon?t.toggled.icon:t.icon;if(o)if(Ae.isThemeIcon(o)){let s=Ae.asClassNameArray(o);i.classList.add(...s),this._itemClassDispose.value=me(()=>{i.classList.remove(...s)})}else i.style.backgroundImage=wP(this._themeService.getColorTheme().type)?dh(o.dark):dh(o.light),i.classList.add("icon"),this._itemClassDispose.value=Li(me(()=>{i.style.backgroundImage="",i.classList.remove("icon")}),this._themeService.onDidColorThemeChange(()=>{this.updateClass()}))}};Hg=_([y(2,_n),y(3,sl),y(4,Ne),y(5,Ci),y(6,or),y(7,Xi)],Hg);var BR=class r extends Hg{render(e){this.options.label=!0,this.options.icon=!1,super.render(e),e.classList.add("text-only"),e.classList.toggle("use-comma",this._options?.useComma??!1)}updateLabel(){let e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return super.updateLabel();if(this.label){let t=r._symbolPrintEnter(e);this._options?.conversational?this.label.textContent=u({key:"content2",comment:['A label with keybindg like "ESC to dismiss"']},"{1} to {0}",this._action.label,t):this.label.textContent=u({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",this._action.label,t)}}static _symbolPrintEnter(e){return e.getLabel()?.replace(/\benter\b/gi,"\u23CE").replace(/\bEscape\b/gi,"Esc")}},AR=class extends Pd{constructor(t,n,i,o,s){let a={...n,menuAsChild:n?.menuAsChild??!1,classNames:n?.classNames??(Ae.isThemeIcon(t.item.icon)?Ae.asClassName(t.item.icon):void 0),keybindingProvider:n?.keybindingProvider??(l=>i.lookupKeybinding(l.id))};super(t,{getActions:()=>t.actions},o,a);this._keybindingService=i;this._contextMenuService=o;this._themeService=s}render(t){super.render(t),Ao(this.element),t.classList.add("menu-entry");let n=this._action,{icon:i}=n.item;if(i&&!Ae.isThemeIcon(i)){this.element.classList.add("icon");let o=()=>{this.element&&(this.element.style.backgroundImage=wP(this._themeService.getColorTheme().type)?dh(i.dark):dh(i.light))};o(),this._register(this._themeService.onDidColorThemeChange(()=>{o()}))}}};AR=_([y(2,_n),y(3,or),y(4,Ci)],AR);var NR=class extends oo{constructor(t,n,i,o,s,a,l,d){super(null,t);this._keybindingService=i;this._notificationService=o;this._contextMenuService=s;this._menuService=a;this._instaService=l;this._storageService=d;this._options=n,this._storageKey=`${t.item.submenu.id}_lastActionId`;let c,p=n?.persistLastActionId?d.get(this._storageKey,1):void 0;p&&(c=t.actions.find(g=>p===g.id)),c||(c=t.actions[0]),this._defaultAction=this._instaService.createInstance(Hg,c,{keybinding:this._getDefaultActionKeybindingLabel(c)});let h={keybindingProvider:g=>this._keybindingService.lookupKeybinding(g.id),...n,menuAsChild:n?.menuAsChild??!0,classNames:n?.classNames??["codicon","codicon-chevron-down"],actionRunner:n?.actionRunner??new Ns};this._dropdown=new Pd(t,t.actions,this._contextMenuService,h),this._register(this._dropdown.actionRunner.onDidRun(g=>{g.action instanceof na&&this.update(g.action)}))}_options;_defaultAction;_dropdown;_container=null;_storageKey;get onDidChangeDropdownVisibility(){return this._dropdown.onDidChangeVisibility}update(t){this._options?.persistLastActionId&&this._storageService.store(this._storageKey,t.id,1,1),this._defaultAction.dispose(),this._defaultAction=this._instaService.createInstance(Hg,t,{keybinding:this._getDefaultActionKeybindingLabel(t)}),this._defaultAction.actionRunner=new class extends Ns{async runAction(n,i){await n.run(void 0)}},this._container&&this._defaultAction.render(j1(this._container,ie(".action-container")))}_getDefaultActionKeybindingLabel(t){let n;if(this._options?.renderKeybindingWithDefaultActionLabel){let i=this._keybindingService.lookupKeybinding(t.id);i&&(n=`(${i.getLabel()})`)}return n}setActionContext(t){super.setActionContext(t),this._defaultAction.setActionContext(t),this._dropdown.setActionContext(t)}render(t){this._container=t,super.render(this._container),this._container.classList.add("monaco-dropdown-with-default");let n=ie(".action-container");this._defaultAction.render(q(this._container,n)),this._register(U(n,ee.KEY_DOWN,o=>{let s=new it(o);s.equals(17)&&(this._defaultAction.element.tabIndex=-1,this._dropdown.focus(),s.stopPropagation())}));let i=ie(".dropdown-action-container");this._dropdown.render(q(this._container,i)),this._register(U(i,ee.KEY_DOWN,o=>{let s=new it(o);s.equals(15)&&(this._defaultAction.element.tabIndex=0,this._dropdown.setFocusable(!1),this._defaultAction.element?.focus(),s.stopPropagation())}))}focus(t){t?this._dropdown.focus():(this._defaultAction.element.tabIndex=0,this._defaultAction.element.focus())}blur(){this._defaultAction.element.tabIndex=-1,this._dropdown.blur(),this._container.blur()}setFocusable(t){t?this._defaultAction.element.tabIndex=0:(this._defaultAction.element.tabIndex=-1,this._dropdown.setFocusable(!1))}dispose(){this._defaultAction.dispose(),this._dropdown.dispose(),super.dispose()}};NR=_([y(2,_n),y(3,sl),y(4,or),y(5,Ka),y(6,we),y(7,Io)],NR);var FR=class extends Bw{constructor(e,t){super(null,e,e.actions.map(n=>({text:n.id===ei.ID?"\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500":n.label,isDisabled:!n.enabled})),0,t,UF,{ariaLabel:e.tooltip,optionsAsChildren:!0}),this.select(Math.max(0,e.actions.findIndex(n=>n.checked)))}render(e){super.render(e),e.style.borderColor=ne(Vh)}runAction(e,t){let n=this.action.actions[t];n&&this.actionRunner.run(n)}};FR=_([y(1,Wo)],FR);var hv=class{constructor(e,t,n,i,o){this._menuId=t;this._menuService=i;this._contextKeyService=o;this.element=q(e,ie(".suggest-status-bar"));let s=a=>a instanceof na?n.createInstance(BR,a,{useComma:!0}):void 0;this._leftActions=new Wi(this.element,{actionViewItemProvider:s}),this._rightActions=new Wi(this.element,{actionViewItemProvider:s}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}element;_leftActions;_rightActions;_menuDisposables=new X;dispose(){this._menuDisposables.dispose(),this._leftActions.dispose(),this._rightActions.dispose(),this.element.remove()}show(){let e=this._menuService.createMenu(this._menuId,this._contextKeyService),t=()=>{let n=[],i=[];for(let[o,s]of e.getActions())o==="left"?n.push(...s):i.push(...s);this._leftActions.clear(),this._leftActions.push(n),this._rightActions.clear(),this._rightActions.push(i)};this._menuDisposables.add(e.onDidChange(()=>t())),this._menuDisposables.add(e)}hide(){this._menuDisposables.clear()}};hv=_([y(2,we),y(3,Ka),y(4,Ne)],hv);var Awn=C("symbolIcon.arrayForeground",Ve,u("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Nwn=C("symbolIcon.booleanForeground",Ve,u("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Fwn=C("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},u("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Bwn=C("symbolIcon.colorForeground",Ve,u("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Wwn=C("symbolIcon.constantForeground",Ve,u("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Vwn=C("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},u("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Hwn=C("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},u("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Uwn=C("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},u("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),zwn=C("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},u("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Kwn=C("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},u("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Gwn=C("symbolIcon.fileForeground",Ve,u("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),jwn=C("symbolIcon.folderForeground",Ve,u("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),$wn=C("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},u("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),qwn=C("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},u("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Ywn=C("symbolIcon.keyForeground",Ve,u("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Xwn=C("symbolIcon.keywordForeground",Ve,u("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Qwn=C("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},u("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Zwn=C("symbolIcon.moduleForeground",Ve,u("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),Jwn=C("symbolIcon.namespaceForeground",Ve,u("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),e_n=C("symbolIcon.nullForeground",Ve,u("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),t_n=C("symbolIcon.numberForeground",Ve,u("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),n_n=C("symbolIcon.objectForeground",Ve,u("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),i_n=C("symbolIcon.operatorForeground",Ve,u("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),o_n=C("symbolIcon.packageForeground",Ve,u("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),r_n=C("symbolIcon.propertyForeground",Ve,u("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),s_n=C("symbolIcon.referenceForeground",Ve,u("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),a_n=C("symbolIcon.snippetForeground",Ve,u("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),l_n=C("symbolIcon.stringForeground",Ve,u("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),d_n=C("symbolIcon.structForeground",Ve,u("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),c_n=C("symbolIcon.textForeground",Ve,u("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),u_n=C("symbolIcon.typeParameterForeground",Ve,u("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),p_n=C("symbolIcon.unitForeground",Ve,u("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),h_n=C("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},u("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."));var gv=class{domNode;_onDidWillResize=new T;onDidWillResize=this._onDidWillResize.event;_onDidResize=new T;onDidResize=this._onDidResize.event;_northSash;_eastSash;_southSash;_westSash;_sashListener=new X;_size=new Et(0,0);_minSize=new Et(0,0);_maxSize=new Et(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER);_preferredSize;constructor(){this.domNode=document.createElement("div"),this._eastSash=new Ul(this.domNode,{getVerticalSashLeft:()=>this._size.width},{orientation:0}),this._westSash=new Ul(this.domNode,{getVerticalSashLeft:()=>0},{orientation:0}),this._northSash=new Ul(this.domNode,{getHorizontalSashTop:()=>0},{orientation:1,orthogonalEdge:"north"}),this._southSash=new Ul(this.domNode,{getHorizontalSashTop:()=>this._size.height},{orientation:1,orthogonalEdge:"south"}),this._northSash.orthogonalStartSash=this._westSash,this._northSash.orthogonalEndSash=this._eastSash,this._southSash.orthogonalStartSash=this._westSash,this._southSash.orthogonalEndSash=this._eastSash;let e,t=0,n=0;this._sashListener.add(z.any(this._northSash.onDidStart,this._eastSash.onDidStart,this._southSash.onDidStart,this._westSash.onDidStart)(()=>{e===void 0&&(this._onDidWillResize.fire(),e=this._size,t=0,n=0)})),this._sashListener.add(z.any(this._northSash.onDidEnd,this._eastSash.onDidEnd,this._southSash.onDidEnd,this._westSash.onDidEnd)(()=>{e!==void 0&&(e=void 0,t=0,n=0,this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(this._eastSash.onDidChange(i=>{e&&(n=i.currentX-i.startX,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,east:!0}))})),this._sashListener.add(this._westSash.onDidChange(i=>{e&&(n=-(i.currentX-i.startX),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,west:!0}))})),this._sashListener.add(this._northSash.onDidChange(i=>{e&&(t=-(i.currentY-i.startY),this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,north:!0}))})),this._sashListener.add(this._southSash.onDidChange(i=>{e&&(t=i.currentY-i.startY,this.layout(e.height+t,e.width+n),this._onDidResize.fire({dimension:this._size,done:!1,south:!0}))})),this._sashListener.add(z.any(this._eastSash.onDidReset,this._westSash.onDidReset)(i=>{this._preferredSize&&(this.layout(this._size.height,this._preferredSize.width),this._onDidResize.fire({dimension:this._size,done:!0}))})),this._sashListener.add(z.any(this._northSash.onDidReset,this._southSash.onDidReset)(i=>{this._preferredSize&&(this.layout(this._preferredSize.height,this._size.width),this._onDidResize.fire({dimension:this._size,done:!0}))}))}dispose(){this._northSash.dispose(),this._southSash.dispose(),this._eastSash.dispose(),this._westSash.dispose(),this._sashListener.dispose(),this._onDidResize.dispose(),this._onDidWillResize.dispose(),this.domNode.remove()}enableSashes(e,t,n,i){this._northSash.state=e?3:0,this._eastSash.state=t?3:0,this._southSash.state=n?3:0,this._westSash.state=i?3:0}layout(e=this.size.height,t=this.size.width){let{height:n,width:i}=this._minSize,{height:o,width:s}=this._maxSize;e=Math.max(n,Math.min(o,e)),t=Math.max(i,Math.min(s,t));let a=new Et(t,e);Et.equals(a,this._size)||(this.domNode.style.height=e+"px",this.domNode.style.width=t+"px",this._size=a,this._northSash.layout(),this._eastSash.layout(),this._southSash.layout(),this._westSash.layout())}clearSashHoverState(){this._eastSash.clearSashHoverState(),this._westSash.clearSashHoverState(),this._northSash.clearSashHoverState(),this._southSash.clearSashHoverState()}get size(){return this._size}set maxSize(e){this._maxSize=e}get maxSize(){return this._maxSize}set minSize(e){this._minSize=e}get minSize(){return this._minSize}set preferredSize(e){this._preferredSize=e}get preferredSize(){return this._preferredSize}};var Nd=class{constructor(e,t,n){this._options=e;this._languageService=t;this._openerService=n}static _ttpTokenizer=Pb("tokenizeToString",{createHTML(e){return e}});_onDidRenderAsync=new T;onDidRenderAsync=this._onDidRenderAsync.event;dispose(){this._onDidRenderAsync.dispose()}render(e,t,n){if(!e)return{element:document.createElement("span"),dispose:()=>{}};let i=new X,o=i.add(Pf(e,{...this._getRenderOptions(e,i),...t},n));return o.element.classList.add("rendered-markdown"),{element:o.element,dispose:()=>i.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:async(n,i)=>{let o;n?o=this._languageService.getLanguageIdByLanguageName(n):this._options.editor&&(o=this._options.editor.getModel()?.getLanguageId()),o||(o=Ni);let s=await o3(this._languageService,i,o),a=document.createElement("span");if(a.innerHTML=Nd._ttpTokenizer?.createHTML(s)??s,this._options.editor){let l=this._options.editor.getOption(51);Un(a,l)}else this._options.codeBlockFontFamily&&(a.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(a.style.fontSize=this._options.codeBlockFontSize),a},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:n=>this.openMarkdownLink(n,e),disposables:t}}}async openMarkdownLink(e,t){await jJ(this._openerService,e,t.isTrusted)}};Nd=_([y(1,Lt),y(2,db)],Nd);async function jJ(r,e,t){try{return await r.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:$J(t)})}catch(n){return Be(n),!1}}function $J(r){return r===!0?!0:r&&Array.isArray(r.enabledCommands)?r.enabledCommands:!1}function _C(r){return!!r&&!!(r.completion.documentation||r.completion.detail&&r.completion.detail!==r.completion.label)}var mv=class{constructor(e,t){this._editor=e;this.domNode=ie(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=t.createInstance(Nd,{editor:e}),this._body=ie(".body"),this._scrollbar=new Xh(this._body,{alwaysConsumeMouseWheel:!0}),q(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=q(this._body,ie(".header")),this._close=q(this._header,ie("span"+Ae.asCSSSelector(re.close))),this._close.title=u("details.close","Close"),this._close.role="button",this._close.tabIndex=-1,this._type=q(this._header,ie("p.type")),this._docs=q(this._body,ie("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration(n=>{n.hasChanged(51)&&this._configureFont()}))}domNode;_onDidClose=new T;onDidClose=this._onDidClose.event;_onDidChangeContents=new T;onDidChangeContents=this._onDidChangeContents.event;_close;_scrollbar;_body;_header;_type;_docs;_disposables=new X;_markdownRenderer;_renderDisposeable=new X;_borderWidth=1;_size=new Et(330,0);dispose(){this._disposables.dispose(),this._renderDisposeable.dispose()}_configureFont(){let e=this._editor.getOptions(),t=e.get(51),n=t.getMassagedFontFamily(),i=e.get(121)||t.fontSize,o=e.get(122)||t.lineHeight,s=t.fontWeight,a=`${i}px`,l=`${o}px`;this.domNode.style.fontSize=a,this.domNode.style.lineHeight=`${o/i}`,this.domNode.style.fontWeight=s,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=n,this._close.style.height=l,this._close.style.width=l}getLayoutInfo(){let e=this._editor.getOption(122)||this._editor.getOption(51).lineHeight,t=this._borderWidth,n=t*2;return{lineHeight:e,borderWidth:t,borderHeight:n,verticalPadding:22,horizontalPadding:14}}renderLoading(){this._type.textContent=u("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,this.getLayoutInfo().lineHeight*2),this._onDidChangeContents.fire(this)}renderItem(e,t){this._renderDisposeable.clear();let{detail:n,documentation:i}=e.completion;if(t){let o="";o+=`score: ${e.score[0]}
`,o+=`prefix: ${e.word??"(no prefix)"}
`,o+=`word: ${e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel}
`,o+=`distance: ${e.distance} (localityBonus-setting)
`,o+=`index: ${e.idx}, based on ${e.completion.sortText&&`sortText: "${e.completion.sortText}"`||"label"}
`,o+=`commit_chars: ${e.completion.commitCharacters?.join("")}
`,i=new jo().appendCodeblock("empty",o),n=`Provider: ${e.provider._debugDisplayName}`}if(!t&&!_C(e)){this.clearContents();return}if(this.domNode.classList.remove("no-docs","no-type"),n){let o=n.length>1e5?`${n.substr(0,1e5)}\u2026`:n;this._type.textContent=o,this._type.title=o,Go(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gmi.test(o))}else Kt(this._type),this._type.title="",Yi(this._type),this.domNode.classList.add("no-type");if(Kt(this._docs),typeof i=="string")this._docs.classList.remove("markdown-docs"),this._docs.textContent=i;else if(i){this._docs.classList.add("markdown-docs"),Kt(this._docs);let o=this._markdownRenderer.render(i);this._docs.appendChild(o.element),this._renderDisposeable.add(o),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(()=>{this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=o=>{o.preventDefault(),o.stopPropagation()},this._close.onclick=o=>{o.preventDefault(),o.stopPropagation(),this._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}clearContents(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}get isEmpty(){return this.domNode.classList.contains("no-docs")}get size(){return this._size}layout(e,t){let n=new Et(e,t);Et.equals(n,this._size)||(this._size=n,z1(this.domNode,e,t)),this._scrollbar.scanDomNode()}scrollDown(e=8){this._body.scrollTop+=e}scrollUp(e=8){this._body.scrollTop-=e}scrollTop(){this._body.scrollTop=0}scrollBottom(){this._body.scrollTop=this._body.scrollHeight}pageDown(){this.scrollDown(80)}pageUp(){this.scrollUp(80)}set borderWidth(e){this._borderWidth=e}get borderWidth(){return this._borderWidth}focus(){this.domNode.focus()}};mv=_([y(1,we)],mv);var WR=class{constructor(e,t){this.widget=e;this._editor=t;this._resizable=new gv,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(e.domNode),this._resizable.enableSashes(!1,!0,!0,!1);let n,i,o=0,s=0;this._disposables.add(this._resizable.onDidWillResize(()=>{n=this._topLeft,i=this._resizable.size})),this._disposables.add(this._resizable.onDidResize(a=>{if(n&&i){this.widget.layout(a.dimension.width,a.dimension.height);let l=!1;a.west&&(s=i.width-a.dimension.width,l=!0),a.north&&(o=i.height-a.dimension.height,l=!0),l&&this._applyTopLeft({top:n.top+o,left:n.left+s})}a.done&&(n=void 0,i=void 0,o=0,s=0,this._userSize=a.dimension)})),this._disposables.add(this.widget.onDidChangeContents(()=>{this._anchorBox&&this._placeAtAnchor(this._anchorBox,this._userSize??this.widget.size,this._preferAlignAtTop)}))}allowEditorOverflow=!0;_disposables=new X;_resizable;_added=!1;_anchorBox;_preferAlignAtTop=!0;_userSize;_topLeft;dispose(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}getId(){return"suggest.details"}getDomNode(){return this._resizable.domNode}getPosition(){return this._topLeft?{preference:this._topLeft}:null}show(){this._added||(this._editor.addOverlayWidget(this),this._added=!0)}hide(e=!1){this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}placeAtAnchor(e,t){let n=e.getBoundingClientRect();this._anchorBox=n,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,this._userSize??this.widget.size,t)}_placeAtAnchor(e,t,n){let i=Ba(this.getDomNode().ownerDocument.body),o=this.widget.getLayoutInfo(),s=new Et(220,2*o.lineHeight),a=e.top,l=function(){let w=i.width-(e.left+e.width+o.borderWidth+o.horizontalPadding),P=-o.borderWidth+e.left+e.width,R=new Et(w,i.height-e.top-o.borderHeight-o.verticalPadding),O=R.with(void 0,e.top+e.height-o.borderHeight-o.verticalPadding);return{top:a,left:P,fit:w-t.width,maxSizeTop:R,maxSizeBottom:O,minSize:s.with(Math.min(w,s.width))}}(),d=function(){let w=e.left-o.borderWidth-o.horizontalPadding,P=Math.max(o.horizontalPadding,e.left-t.width-o.borderWidth),R=new Et(w,i.height-e.top-o.borderHeight-o.verticalPadding),O=R.with(void 0,e.top+e.height-o.borderHeight-o.verticalPadding);return{top:a,left:P,fit:w-t.width,maxSizeTop:R,maxSizeBottom:O,minSize:s.with(Math.min(w,s.width))}}(),c=function(){let w=e.left,P=-o.borderWidth+e.top+e.height,R=new Et(e.width-o.borderHeight,i.height-e.top-e.height-o.verticalPadding);return{top:P,left:w,fit:R.height-t.height,maxSizeBottom:R,maxSizeTop:R,minSize:s.with(R.width)}}(),p=[l,d,c],h=p.find(w=>w.fit>=0)??p.sort((w,P)=>P.fit-w.fit)[0],g=e.top+e.height-o.borderHeight,f,m=t.height,b=Math.max(h.maxSizeTop.height,h.maxSizeBottom.height);m>b&&(m=b);let v;n?m<=h.maxSizeTop.height?(f=!0,v=h.maxSizeTop):(f=!1,v=h.maxSizeBottom):m<=h.maxSizeBottom.height?(f=!1,v=h.maxSizeBottom):(f=!0,v=h.maxSizeTop);let{top:S,left:x}=h;!f&&m>e.height&&(S=g-m);let E=this._editor.getDomNode();if(E){let w=E.getBoundingClientRect();S-=w.top,x-=w.left}this._applyTopLeft({left:x,top:S}),this._resizable.enableSashes(!f,h===l,f,h!==l),this._resizable.minSize=h.minSize,this._resizable.maxSize=v,this._resizable.layout(m,Math.min(v.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}_applyTopLeft(e){this._topLeft=e,this._editor.layoutOverlayWidget(this)}};var Ug=class{constructor(e){this._element=e}disposed;_textContent;_classNames;_empty;get element(){return this._element}set textContent(e){this.disposed||e===this._textContent||(this._textContent=e,this._element.textContent=e)}set classNames(e){this.disposed||wn(e,this._classNames)||(this._classNames=e,this._element.classList.value="",this._element.classList.add(...e))}set empty(e){this.disposed||e===this._empty||(this._empty=e,this._element.style.marginLeft=e?"0":"")}dispose(){this.disposed=!0}},VR=class extends N{creationOptions;domNode;nameContainer;nameNode;descriptionNode;suffixNode;labelContainer;hoverDelegate;customHovers=new Map;constructor(e,t){super(),this.creationOptions=t,this.domNode=this._register(new Ug(q(e,ie(".monaco-icon-label")))),this.labelContainer=q(this.domNode.element,ie(".monaco-icon-label-container")),this.nameContainer=q(this.labelContainer,ie("span.monaco-icon-name-container")),t?.supportHighlights||t?.supportIcons?this.nameNode=this._register(new pV(this.nameContainer,!!t.supportIcons)):this.nameNode=new uV(this.nameContainer),this.hoverDelegate=t?.hoverDelegate??pt("mouse")}get element(){return this.domNode.element}setLabel(e,t,n){let i=["monaco-icon-label"],o=["monaco-icon-label-container"],s="";n&&(n.extraClasses&&i.push(...n.extraClasses),n.italic&&i.push("italic"),n.strikethrough&&i.push("strikethrough"),n.disabledCommand&&o.push("disabled"),n.title&&(typeof n.title=="string"?s+=n.title:s+=e));let a=this.domNode.element.querySelector(".monaco-icon-label-iconpath");if(n?.iconPath){let l;!a||!Yn(a)?(l=ie(".monaco-icon-label-iconpath"),this.domNode.element.prepend(l)):l=a,l.style.backgroundImage=dh(n?.iconPath)}else a&&a.remove();if(this.domNode.classNames=i,this.domNode.element.setAttribute("aria-label",s),this.labelContainer.classList.value="",this.labelContainer.classList.add(...o),this.setupHover(n?.descriptionTitle?this.labelContainer:this.element,n?.title),this.nameNode.setLabel(e,n),t||this.descriptionNode){let l=this.getOrCreateDescriptionNode();l instanceof zr?(l.set(t||"",n?n.descriptionMatches:void 0,void 0,n?.labelEscapeNewLines),this.setupHover(l.element,n?.descriptionTitle)):(l.textContent=t&&n?.labelEscapeNewLines?zr.escapeNewLines(t,[]):t||"",this.setupHover(l.element,n?.descriptionTitle||""),l.empty=!t)}if(n?.suffix||this.suffixNode){let l=this.getOrCreateSuffixNode();l.textContent=n?.suffix??""}}setupHover(e,t){let n=this.customHovers.get(e);if(n&&(n.dispose(),this.customHovers.delete(e)),!t){e.removeAttribute("title");return}if(this.hoverDelegate.showNativeHover){let o=function(s,a){xt(a)?s.title=yM(a):a?.markdownNotSupportedFallback?s.title=a.markdownNotSupportedFallback:s.removeAttribute("title")};var i=o;o(e,t)}else{let o=ii().setupManagedHover(this.hoverDelegate,e,t);o&&this.customHovers.set(e,o)}}dispose(){super.dispose();for(let e of this.customHovers.values())e.dispose();this.customHovers.clear()}getOrCreateSuffixNode(){if(!this.suffixNode){let e=this._register(new Ug(fU(this.nameContainer,ie("span.monaco-icon-suffix-container"))));this.suffixNode=this._register(new Ug(q(e.element,ie("span.label-suffix"))))}return this.suffixNode}getOrCreateDescriptionNode(){if(!this.descriptionNode){let e=this._register(new Ug(q(this.labelContainer,ie("span.monaco-icon-description-container"))));this.creationOptions?.supportDescriptionHighlights?this.descriptionNode=this._register(new zr(q(e.element,ie("span.label-description")),{supportIcons:!!this.creationOptions.supportIcons})):this.descriptionNode=this._register(new Ug(q(e.element,ie("span.label-description"))))}return this.descriptionNode}},uV=class{constructor(e){this.container=e}label=void 0;singleLabel=void 0;options;setLabel(e,t){if(!(this.label===e&&wn(this.options,t)))if(this.label=e,this.options=t,typeof e=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=q(this.container,ie("a.label-name",{id:t?.domId}))),this.singleLabel.textContent=e;else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;for(let n=0;n<e.length;n++){let i=e[n],o=t?.domId&&`${t?.domId}_${n}`;q(this.container,ie("a.label-name",{id:o,"data-icon-label-count":e.length,"data-icon-label-index":n,role:"treeitem"},i)),n<e.length-1&&q(this.container,ie("span.label-separator",void 0,t?.separator||"/"))}}}};function qJ(r,e,t){if(!t)return;let n=0;return r.map(i=>{let o={start:n,end:n+i.length},s=t.map(a=>io.intersect(o,a)).filter(a=>!io.isEmpty(a)).map(({start:a,end:l})=>({start:a-n,end:l-n}));return n=o.end+e.length,s})}var pV=class extends N{constructor(t,n){super();this.container=t;this.supportIcons=n}label=void 0;singleLabel=void 0;options;setLabel(t,n){if(!(this.label===t&&wn(this.options,n)))if(this.label=t,this.options=n,typeof t=="string")this.singleLabel||(this.container.innerText="",this.container.classList.remove("multiple"),this.singleLabel=this._register(new zr(q(this.container,ie("a.label-name",{id:n?.domId})),{supportIcons:this.supportIcons}))),this.singleLabel.set(t,n?.matches,void 0,n?.labelEscapeNewLines);else{this.container.innerText="",this.container.classList.add("multiple"),this.singleLabel=void 0;let i=n?.separator||"/",o=qJ(t,i,n?.matches);for(let s=0;s<t.length;s++){let a=t[s],l=o?o[s]:void 0,d=n?.domId&&`${n?.domId}_${s}`,c=ie("a.label-name",{id:d,"data-icon-label-count":t.length,"data-icon-label-index":s,role:"treeitem"});this._register(new zr(q(this.container,c),{supportIcons:this.supportIcons})).set(a,l,void 0,n?.labelEscapeNewLines),s<t.length-1&&q(c,ie("span.label-separator",void 0,i))}}}};function gV(r){return`suggest-aria-id:${r}`}var YJ=xn("suggest-more-info",re.chevronRight,u("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),XJ=new class DC{static _regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/;static _regexStrict=new RegExp(`^${DC._regexRelaxed.source}$`,"i");extract(e,t){if(e.textLabel.match(DC._regexStrict))return t[0]=e.textLabel,!0;if(e.completion.detail&&e.completion.detail.match(DC._regexStrict))return t[0]=e.completion.detail,!0;if(e.completion.documentation){let n=typeof e.completion.documentation=="string"?e.completion.documentation:e.completion.documentation.value,i=DC._regexRelaxed.exec(n);if(i&&(i.index===0||i.index+i[0].length===n.length))return t[0]=i[0],!0}return!1}},fv=class{constructor(e,t,n,i){this._editor=e;this._modelService=t;this._languageService=n;this._themeService=i}_onDidToggleDetails=new T;onDidToggleDetails=this._onDidToggleDetails.event;templateId="suggestion";dispose(){this._onDidToggleDetails.dispose()}renderTemplate(e){let t=new X,n=e;n.classList.add("show-file-icons");let i=q(e,ie(".icon")),o=q(i,ie("span.colorspan")),s=q(e,ie(".contents")),a=q(s,ie(".main")),l=q(a,ie(".icon-label.codicon")),d=q(a,ie("span.left")),c=q(a,ie("span.right")),p=new VR(d,{supportHighlights:!0,supportIcons:!0});t.add(p);let h=q(d,ie("span.signature-label")),g=q(d,ie("span.qualifier-label")),f=q(c,ie("span.details-label")),m=q(c,ie("span.readMore"+Ae.asCSSSelector(YJ)));return m.title=u("readMore","Read More"),{root:n,left:d,right:c,icon:i,colorspan:o,iconLabel:p,iconContainer:l,parametersLabel:h,qualifierLabel:g,detailsLabel:f,readMore:m,disposables:t,configureFont:()=>{let v=this._editor.getOptions(),S=v.get(51),x=S.getMassagedFontFamily(),E=S.fontFeatureSettings,w=v.get(121)||S.fontSize,P=v.get(122)||S.lineHeight,R=S.fontWeight,O=S.letterSpacing,M=`${w}px`,K=`${P}px`,$=`${O}px`;n.style.fontSize=M,n.style.fontWeight=R,n.style.letterSpacing=$,a.style.fontFamily=x,a.style.fontFeatureSettings=E,a.style.lineHeight=K,i.style.height=K,i.style.width=K,m.style.height=K,m.style.width=K}}}renderElement(e,t,n){n.configureFont();let{completion:i}=e;n.root.id=gV(t),n.colorspan.style.backgroundColor="";let o={labelEscapeNewLines:!0,matches:yE(e.score)},s=[];if(i.kind===19&&XJ.extract(e,s))n.icon.className="icon customcolor",n.iconContainer.className="icon hide",n.colorspan.style.backgroundColor=s[0];else if(i.kind===20&&this._themeService.getFileIconTheme().hasFileIcons){n.icon.className="icon hide",n.iconContainer.className="icon hide";let a=Ec(this._modelService,this._languageService,Z.from({scheme:"fake",path:e.textLabel}),0),l=Ec(this._modelService,this._languageService,Z.from({scheme:"fake",path:i.detail}),0);o.extraClasses=a.length>l.length?a:l}else i.kind===23&&this._themeService.getFileIconTheme().hasFolderIcons?(n.icon.className="icon hide",n.iconContainer.className="icon hide",o.extraClasses=[Ec(this._modelService,this._languageService,Z.from({scheme:"fake",path:e.textLabel}),1),Ec(this._modelService,this._languageService,Z.from({scheme:"fake",path:i.detail}),1)].flat()):(n.icon.className="icon hide",n.iconContainer.className="",n.iconContainer.classList.add("suggest-icon",...Ae.asClassNameArray(Zm.toIcon(i.kind))));i.tags&&i.tags.indexOf(1)>=0&&(o.extraClasses=(o.extraClasses||[]).concat(["deprecated"]),o.matches=[]),n.iconLabel.setLabel(e.textLabel,void 0,o),typeof i.label=="string"?(n.parametersLabel.textContent="",n.detailsLabel.textContent=hV(i.detail||""),n.root.classList.add("string-label")):(n.parametersLabel.textContent=hV(i.label.detail||""),n.detailsLabel.textContent=hV(i.label.description||""),n.root.classList.remove("string-label")),this._editor.getOption(120).showInlineDetails?Go(n.detailsLabel):Yi(n.detailsLabel),_C(e)?(n.right.classList.add("can-expand-details"),Go(n.readMore),n.readMore.onmousedown=a=>{a.stopPropagation(),a.preventDefault()},n.readMore.onclick=a=>{a.stopPropagation(),a.preventDefault(),this._onDidToggleDetails.fire()}):(n.right.classList.remove("can-expand-details"),Yi(n.readMore),n.readMore.onmousedown=null,n.readMore.onclick=null)}disposeTemplate(e){e.disposables.dispose()}};fv=_([y(1,Bi),y(2,Lt),y(3,Ci)],fv);function hV(r){return r.replace(/\r\n|\r|\n/g,"")}C("editorSuggestWidget.background",ui,u("editorSuggestWidgetBackground","Background color of the suggest widget."));C("editorSuggestWidget.border",Fh,u("editorSuggestWidgetBorder","Border color of the suggest widget."));var QJ=C("editorSuggestWidget.foreground",Sr,u("editorSuggestWidgetForeground","Foreground color of the suggest widget."));C("editorSuggestWidget.selectedForeground",$T,u("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget."));C("editorSuggestWidget.selectedIconForeground",qT,u("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));var ZJ=C("editorSuggestWidget.selectedBackground",YT,u("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));C("editorSuggestWidget.highlightForeground",vf,u("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget."));C("editorSuggestWidget.focusHighlightForeground",r5,u("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused."));C("editorSuggestWidgetStatus.foreground",ve(QJ,.5),u("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));var mV=class{constructor(e,t){this._service=e;this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof xp}`}_key;restore(){let e=this._service.get(this._key,0)??"";try{let t=JSON.parse(e);if(Et.is(t))return Et.lift(t)}catch{}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}},vl=class{constructor(e,t,n,i,o){this.editor=e;this._storageService=t;this.element=new gv,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new fV(this,e),this._persistedSize=new mV(t,e);class s{constructor(g,f,m=!1,b=!1){this.persistedSize=g;this.currentSize=f;this.persistHeight=m;this.persistWidth=b}}let a;this._disposables.add(this.element.onDidWillResize(()=>{this._contentWidget.lockPreference(),a=new s(this._persistedSize.restore(),this.element.size)})),this._disposables.add(this.element.onDidResize(h=>{if(this._resize(h.dimension.width,h.dimension.height),a&&(a.persistHeight=a.persistHeight||!!h.north||!!h.south,a.persistWidth=a.persistWidth||!!h.east||!!h.west),!!h.done){if(a){let{itemHeight:g,defaultSize:f}=this.getLayoutInfo(),m=Math.round(g/2),{width:b,height:v}=this.element.size;(!a.persistHeight||Math.abs(a.currentSize.height-v)<=m)&&(v=a.persistedSize?.height??f.height),(!a.persistWidth||Math.abs(a.currentSize.width-b)<=m)&&(b=a.persistedSize?.width??f.width),this._persistedSize.store(new Et(b,v))}this._contentWidget.unlockPreference(),a=void 0}})),this._messageElement=q(this.element.domNode,ie(".message")),this._listElement=q(this.element.domNode,ie(".tree"));let l=this._disposables.add(o.createInstance(mv,this.editor));l.onDidClose(()=>this.toggleDetails(),this,this._disposables),this._details=new WR(l,this.editor);let d=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(120).showIcons);d();let c=o.createInstance(fv,this.editor);this._disposables.add(c),this._disposables.add(c.onDidToggleDetails(()=>this.toggleDetails())),this._list=new Ei("SuggestWidget",this._listElement,{getHeight:h=>this.getLayoutInfo().itemHeight,getTemplateId:h=>"suggestion"},[c],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>u("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:h=>{let g=h.textLabel;if(typeof h.completion.label!="string"){let{detail:v,description:S}=h.completion.label;v&&S?g=u("label.full","{0} {1}, {2}",g,v,S):v?g=u("label.detail","{0} {1}",g,v):S&&(g=u("label.desc","{0}, {1}",g,S))}if(!h.isResolved||!this._isDetailsVisible())return g;let{documentation:f,detail:m}=h.completion,b=sy("{0}{1}",m||"",f?typeof f=="string"?f:f.value:"");return u("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",g,b)}}}),this._list.style(dl({listInactiveFocusBackground:ZJ,listInactiveFocusOutline:Wt})),this._status=o.createInstance(hv,this.element.domNode,cd);let p=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(120).showStatusBar);p(),this._disposables.add(i.onDidColorThemeChange(h=>this._onThemeChange(h))),this._onThemeChange(i.getColorTheme()),this._disposables.add(this._list.onMouseDown(h=>this._onListMouseDownOrTap(h))),this._disposables.add(this._list.onTap(h=>this._onListMouseDownOrTap(h))),this._disposables.add(this._list.onDidChangeSelection(h=>this._onListSelection(h))),this._disposables.add(this._list.onDidChangeFocus(h=>this._onListFocus(h))),this._disposables.add(this.editor.onDidChangeCursorSelection(()=>this._onCursorSelectionChanged())),this._disposables.add(this.editor.onDidChangeConfiguration(h=>{h.hasChanged(120)&&(p(),d()),this._completionModel&&(h.hasChanged(51)||h.hasChanged(121)||h.hasChanged(122))&&this._list.splice(0,this._list.length,this._completionModel.items)})),this._ctxSuggestWidgetVisible=$e.Visible.bindTo(n),this._ctxSuggestWidgetDetailsVisible=$e.DetailsVisible.bindTo(n),this._ctxSuggestWidgetMultipleSuggestions=$e.MultipleSuggestions.bindTo(n),this._ctxSuggestWidgetHasFocusedSuggestion=$e.HasFocusedSuggestion.bindTo(n),this._disposables.add(dn(this._details.widget.domNode,"keydown",h=>{this._onDetailsKeydown.fire(h)})),this._disposables.add(this.editor.onMouseDown(h=>this._onEditorMouseDown(h)))}static LOADING_MESSAGE=u("suggestWidget.loading","Loading...");static NO_SUGGESTIONS_MESSAGE=u("suggestWidget.noSuggestions","No suggestions.");_state=0;_isAuto=!1;_loadingTimeout;_pendingLayout=new Qt;_pendingShowDetails=new Qt;_currentSuggestionDetails;_focusedItem;_ignoreFocusEvents=!1;_completionModel;_cappedHeight;_forceRenderingAbove=!1;_explainMode=!1;element;_messageElement;_listElement;_list;_status;_details;_contentWidget;_persistedSize;_ctxSuggestWidgetVisible;_ctxSuggestWidgetDetailsVisible;_ctxSuggestWidgetMultipleSuggestions;_ctxSuggestWidgetHasFocusedSuggestion;_showTimeout=new Pr;_disposables=new X;_onDidSelect=new Qd;_onDidFocus=new Qd;_onDidHide=new T;_onDidShow=new T;onDidSelect=this._onDidSelect.event;onDidFocus=this._onDidFocus.event;onDidHide=this._onDidHide.event;onDidShow=this._onDidShow.event;_onDetailsKeydown=new T;onDetailsKeyDown=this._onDetailsKeydown.event;dispose(){this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),this._loadingTimeout?.dispose(),this._pendingLayout.dispose(),this._pendingShowDetails.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){this._state!==0&&this._contentWidget.layout()}_onListMouseDownOrTap(e){typeof e.element>"u"||typeof e.index>"u"||(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){let n=this._completionModel;n&&(this._onDidSelect.fire({item:e,index:t,model:n}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=id(e.type)?2:1}_onListFocus(e){if(this._ignoreFocusEvents)return;if(this._state===5&&this._setState(3),!e.elements.length){this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);return}if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);let t=e.elements[0],n=e.indexes[0];t!==this._focusedItem&&(this._currentSuggestionDetails?.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=t,this._list.reveal(n),this._currentSuggestionDetails=lc(async i=>{let o=Ys(()=>{this._isDetailsVisible()&&this._showDetails(!0,!1)},250),s=i.onCancellationRequested(()=>o.dispose());try{return await t.resolve(i)}finally{o.dispose(),s.dispose()}}),this._currentSuggestionDetails.then(()=>{n>=this._list.length||t!==this._list.element(n)||(this._ignoreFocusEvents=!0,this._list.splice(n,1,[t]),this._list.setFocus([n]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this._showDetails(!1,!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:gV(n)}))}).catch(Be)),this._onDidFocus.fire({item:t,index:n,model:this._completionModel})}_setState(e){if(this._state!==e)switch(this._state=e,this.element.domNode.classList.toggle("frozen",e===4),this.element.domNode.classList.remove("message"),e){case 0:Yi(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=vl.LOADING_MESSAGE,Yi(this._listElement,this._status.element),Go(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,Bs(vl.LOADING_MESSAGE);break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=vl.NO_SUGGESTIONS_MESSAGE,Yi(this._listElement,this._status.element),Go(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0,Bs(vl.NO_SUGGESTIONS_MESSAGE);break;case 3:Yi(this._messageElement),Go(this._listElement,this._status.element),this._show();break;case 4:Yi(this._messageElement),Go(this._listElement,this._status.element),this._show();break;case 5:Yi(this._messageElement),Go(this._listElement,this._status.element),this._details.show(),this._show(),this._details.widget.focus();break}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet(()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)},100)}showTriggered(e,t){this._state===0&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=Ys(()=>this._setState(1),t)))}showSuggestions(e,t,n,i,o){if(this._contentWidget.setPosition(this.editor.getPosition()),this._loadingTimeout?.dispose(),this._currentSuggestionDetails?.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),n&&this._state!==2&&this._state!==0){this._setState(4);return}let s=this._completionModel.items.length,a=s===0;if(this._ctxSuggestWidgetMultipleSuggestions.set(s>1),a){this._setState(i?0:2),this._completionModel=void 0;return}this._focusedItem=void 0,this._onDidFocus.pause(),this._onDidSelect.pause();try{this._list.splice(0,this._list.length,this._completionModel.items),this._setState(n?4:3),this._list.reveal(t,0),this._list.setFocus(o?[]:[t])}finally{this._onDidFocus.resume(),this._onDidSelect.resume()}this._pendingLayout.value=km(Ee(this.element.domNode),()=>{this._pendingLayout.clear(),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")})}focusSelected(){this._list.length>0&&this._list.setFocus([0])}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(this._state!==0&&this._state!==2&&this._state!==1&&this._completionModel&&this._list.getFocus().length>0)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){this._state===5?(this._list.setFocus(this._list.getFocus()),this._setState(3)):this._state===3&&(this._setState(5),this._isDetailsVisible()?this._details.widget.focus():this.toggleDetails(!0))}toggleDetails(e=!1){this._isDetailsVisible()?(this._pendingShowDetails.clear(),this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):(_C(this._list.getFocusedElements()[0])||this._explainMode)&&(this._state===3||this._state===5||this._state===4)&&(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this._showDetails(!1,e))}_showDetails(e,t){this._pendingShowDetails.value=km(Ee(this.element.domNode),()=>{this._pendingShowDetails.clear(),this._details.show();let n=!1;e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._details.widget.isEmpty?this._details.hide():(this._positionDetails(),this.element.domNode.classList.add("shows-details"),t&&(this._details.widget.focus(),n=!0)),n||this.editor.focus()})}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this._showDetails(!1,!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){this._pendingLayout.clear(),this._pendingShowDetails.clear(),this._loadingTimeout?.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();let e=this._persistedSize.restore(),t=Math.ceil(this.getLayoutInfo().itemHeight*4.3);e&&e.height<t&&this._persistedSize.store(e.with(void 0,t))}isFrozen(){return this._state===4}_afterRender(e){if(e===null){this._isDetailsVisible()&&this._details.hide();return}this._state===2||this._state===1||(this._isDetailsVisible()&&!this._details.widget.isEmpty&&this._details.show(),this._positionDetails())}_layout(e){if(!this.editor.hasModel()||!this.editor.getDomNode())return;let t=Ba(this.element.domNode.ownerDocument.body),n=this.getLayoutInfo();e||(e=n.defaultSize);let i=e.height,o=e.width;if(this._status.element.style.height=`${n.itemHeight}px`,this._state===2||this._state===1)i=n.itemHeight+n.borderHeight,o=n.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new Et(o,i),this._contentWidget.setPreference(2);else{let s=t.width-n.borderHeight-2*n.horizontalPadding;o>s&&(o=s);let a=this._completionModel?this._completionModel.stats.pLabelLen*n.typicalHalfwidthCharacterWidth:o,l=n.statusBarHeight+this._list.contentHeight+n.borderHeight,d=n.itemHeight+n.statusBarHeight,c=Ii(this.editor.getDomNode()),p=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),h=c.top+p.top+p.height,g=Math.min(t.height-h-n.verticalPadding,l),f=c.top+p.top-n.verticalPadding,m=Math.min(f,l),b=Math.min(Math.max(m,g)+n.borderHeight,l);i===this._cappedHeight?.capped&&(i=this._cappedHeight.wanted),i<d&&(i=d),i>b&&(i=b),i>g||this._forceRenderingAbove&&f>150?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),b=m):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),b=g),this.element.preferredSize=new Et(a,n.defaultSize.height),this.element.maxSize=new Et(s,b),this.element.minSize=new Et(220,d),this._cappedHeight=i===l?{wanted:this._cappedHeight?.wanted??e.height,capped:i}:void 0}this._resize(o,i)}_resize(e,t){let{width:n,height:i}=this.element.maxSize;e=Math.min(n,e),t=Math.min(i,t);let{statusBarHeight:o}=this.getLayoutInfo();this._list.layout(t-o,e),this._listElement.style.height=`${t-o}px`,this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,this._contentWidget.getPosition()?.preference[0]===2)}getLayoutInfo(){let e=this.editor.getOption(51),t=qn(this.editor.getOption(122)||e.lineHeight,8,1e3),n=!this.editor.getOption(120).showStatusBar||this._state===2||this._state===1?0:t,i=this._details.widget.borderWidth,o=2*i;return{itemHeight:t,statusBarHeight:n,borderWidth:i,borderHeight:o,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new Et(430,n+12*t+o)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};vl=_([y(1,Io),y(2,Ne),y(3,Ci),y(4,we)],vl);var fV=class{constructor(e,t){this._widget=e;this._editor=t}allowEditorOverflow=!0;suppressMouseDown=!1;_position;_preference;_preferenceLocked=!1;_added=!1;_hidden=!1;dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return this._hidden||!this._position||!this._preference?null:{position:this._position,preference:[this._preference]}}beforeRender(){let{height:e,width:t}=this._widget.element.size,{borderWidth:n,horizontalPadding:i}=this._widget.getLayoutInfo();return new Et(t+2*n+i,e+2*n)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}};var js=class{constructor(e,t){this._editor=e;this._ckOtherSuggestions=js.OtherSuggestions.bindTo(t)}static OtherSuggestions=new B("hasOtherSuggestions",!1);_ckOtherSuggestions;_index=0;_model;_acceptNext;_listener;_ignore;dispose(){this.reset()}reset(){this._ckOtherSuggestions.reset(),this._listener?.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:e,index:t},n){if(e.items.length===0){this.reset();return}if(js._moveIndex(!0,e,t)===t){this.reset();return}this._acceptNext=n,this._model=e,this._index=t,this._listener=this._editor.onDidChangeCursorPosition(()=>{this._ignore||this.reset()}),this._ckOtherSuggestions.set(!0)}static _moveIndex(e,t,n){let i=n;for(let o=t.items.length;o>0&&(i=(i+t.items.length+(e?1:-1))%t.items.length,!(i===n||!t.items[i].completion.additionalTextEdits));o--);return i}next(){this._move(!0)}prev(){this._move(!1)}_move(e){if(this._model)try{this._ignore=!0,this._index=js._moveIndex(e,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};js=_([y(1,Ne)],js);var HR=class{_disposables=new X;_active;constructor(e,t,n,i){this._disposables.add(n.onDidSuggest(o=>{o.completionModel.items.length===0&&this.reset()})),this._disposables.add(n.onDidCancel(o=>{this.reset()})),this._disposables.add(t.onDidShow(()=>this._onItem(t.getFocusedItem()))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType(o=>{if(this._active&&!t.isFrozen()&&n.state!==0){let s=o.charCodeAt(o.length-1);this._active.acceptCharacters.has(s)&&e.getOption(0)&&i(this._active.item)}}))}_onItem(e){if(!e||!gm(e.item.completion.commitCharacters)){this.reset();return}if(this._active&&this._active.item.item===e.item)return;let t=new QE;for(let n of e.item.completion.commitCharacters)n.length>0&&t.add(n.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}};var eee=!1,bV=class{constructor(e,t){this._model=e;this._position=t;if(e.getLineMaxColumn(t.lineNumber)!==t.column){let i=e.getOffsetAt(t),o=e.getPositionAt(i+1);e.changeDecorations(s=>{this._marker&&s.removeDecoration(this._marker),this._marker=s.addDecoration(D.fromPositions(t,o),this._decorationOptions)})}}_decorationOptions=Bn.register({description:"suggest-line-suffix",stickiness:1});_marker;dispose(){this._marker&&!this._model.isDisposed()&&this._model.changeDecorations(e=>{e.removeDecoration(this._marker),this._marker=void 0})}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){let t=this._model.getDecorationRange(this._marker);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}else return this._model.getLineMaxColumn(e.lineNumber)-e.column}};var ar=class{constructor(e,t,n,i,o,s,a){this._memoryService=t;this._commandService=n;this._contextKeyService=i;this._instantiationService=o;this._logService=s;this._telemetryService=a;this.editor=e,this.model=o.createInstance(Ep,this.editor),this._selectors.register({priority:0,select:(p,h,g)=>this._memoryService.select(p,h,g)});let l=$e.InsertMode.bindTo(i);l.set(e.getOption(120).insertMode),this._toDispose.add(this.model.onDidTrigger(()=>l.set(e.getOption(120).insertMode))),this.widget=this._toDispose.add(new Eu(Ee(e.getDomNode()),()=>{let p=this._instantiationService.createInstance(vl,this.editor);this._toDispose.add(p),this._toDispose.add(p.onDidSelect(b=>this._insertSuggestion(b,0),this));let h=new HR(this.editor,p,this.model,b=>this._insertSuggestion(b,2));this._toDispose.add(h);let g=$e.MakesTextEdit.bindTo(this._contextKeyService),f=$e.HasInsertAndReplaceRange.bindTo(this._contextKeyService),m=$e.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add(me(()=>{g.reset(),f.reset(),m.reset()})),this._toDispose.add(p.onDidFocus(({item:b})=>{let v=this.editor.getPosition(),S=b.editStart.column,x=v.column,E=!0;this.editor.getOption(1)==="smart"&&this.model.state===2&&!b.completion.additionalTextEdits&&!(b.completion.insertTextRules&4)&&x-S===b.completion.insertText.length&&(E=this.editor.getModel().getValueInRange({startLineNumber:v.lineNumber,startColumn:S,endLineNumber:v.lineNumber,endColumn:x})!==b.completion.insertText),g.set(E),f.set(!F.equals(b.editInsertEnd,b.editReplaceEnd)),m.set(!!b.provider.resolveCompletionItem||!!b.completion.documentation||b.completion.detail!==b.completion.label)})),this._toDispose.add(p.onDetailsKeyDown(b=>{if(b.toKeyCodeChord().equals(new bu(!0,!1,!1,!1,33))||Pe&&b.toKeyCodeChord().equals(new bu(!1,!1,!1,!0,33))){b.stopPropagation();return}b.toKeyCodeChord().isModifierKey()||this.editor.focus()})),p})),this._overtypingCapturer=this._toDispose.add(new Eu(Ee(e.getDomNode()),()=>this._toDispose.add(new zR(this.editor,this.model)))),this._alternatives=this._toDispose.add(new Eu(Ee(e.getDomNode()),()=>this._toDispose.add(new js(this.editor,this._contextKeyService)))),this._toDispose.add(o.createInstance(Gc,e)),this._toDispose.add(this.model.onDidTrigger(p=>{this.widget.value.showTriggered(p.auto,p.shy?250:50),this._lineSuffix.value=new bV(this.editor.getModel(),p.position)})),this._toDispose.add(this.model.onDidSuggest(p=>{if(p.triggerOptions.shy)return;let h=-1;for(let f of this._selectors.itemsOrderedByPriorityDesc)if(h=f.select(this.editor.getModel(),this.editor.getPosition(),p.completionModel.items),h!==-1)break;if(h===-1&&(h=0),this.model.state===0)return;let g=!1;if(p.triggerOptions.auto){let f=this.editor.getOption(120);f.selectionMode==="never"||f.selectionMode==="always"?g=f.selectionMode==="never":f.selectionMode==="whenTriggerCharacter"?g=p.triggerOptions.triggerKind!==1:f.selectionMode==="whenQuickSuggestion"&&(g=p.triggerOptions.triggerKind===1&&!p.triggerOptions.refilter)}this.widget.value.showSuggestions(p.completionModel,h,p.isFrozen,p.triggerOptions.auto,g)})),this._toDispose.add(this.model.onDidCancel(p=>{p.retrigger||this.widget.value.hideWidget()})),this._toDispose.add(this.editor.onDidBlurEditorWidget(()=>{eee||(this.model.cancel(),this.model.clear())}));let d=$e.AcceptSuggestionsOnEnter.bindTo(i),c=()=>{let p=this.editor.getOption(1);d.set(p==="on"||p==="smart")};this._toDispose.add(this.editor.onDidChangeConfiguration(()=>c())),c()}static ID="editor.contrib.suggestController";static get(e){return e.getContribution(ar.ID)}editor;model;widget;_alternatives;_lineSuffix=new Qt;_toDispose=new X;_overtypingCapturer;_selectors=new vV(e=>e.priority);_onWillInsertSuggestItem=new T;onWillInsertSuggestItem=this._onWillInsertSuggestItem.event;dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose(),this._onWillInsertSuggestItem.dispose()}_insertSuggestion(e,t){if(!e||!e.item){this._alternatives.value.reset(),this.model.cancel(),this.model.clear();return}if(!this.editor.hasModel())return;let n=on.get(this.editor);if(!n)return;this._onWillInsertSuggestItem.fire({item:e.item});let i=this.editor.getModel(),o=i.getAlternativeVersionId(),{item:s}=e,a=[],l=new jn;t&1||this.editor.pushUndoStop();let d=this.getOverwriteInfo(s,!!(t&8));this._memoryService.memorize(i,this.editor.getPosition(),s);let c=s.isResolved,p=-1,h=-1;if(Array.isArray(s.completion.additionalTextEdits)){this.model.cancel();let f=TC.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",s.completion.additionalTextEdits.map(m=>{let b=D.lift(m.range);if(b.startLineNumber===s.position.lineNumber&&b.startColumn>s.position.column){let v=this.editor.getPosition().column-s.position.column,S=v,x=D.spansMultipleLines(b)?0:v;b=new D(b.startLineNumber,b.startColumn+S,b.endLineNumber,b.endColumn+x)}return mo.replaceMove(b,m.text)})),f.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!c){let f=new Vo,m,b=i.onDidChangeContent(E=>{if(E.isFlush){l.cancel(),b.dispose();return}for(let w of E.changes){let P=D.getEndPosition(w.range);(!m||F.isBefore(P,m))&&(m=P)}}),v=t;t|=2;let S=!1,x=this.editor.onWillType(()=>{x.dispose(),S=!0,v&2||this.editor.pushUndoStop()});a.push(s.resolve(l.token).then(()=>{if(!s.completion.additionalTextEdits||l.token.isCancellationRequested)return;if(m&&s.completion.additionalTextEdits.some(w=>F.isBefore(m,D.getStartPosition(w.range))))return!1;S&&this.editor.pushUndoStop();let E=TC.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",s.completion.additionalTextEdits.map(w=>mo.replaceMove(D.lift(w.range),w.text))),E.restoreRelativeVerticalPositionOfCursor(this.editor),(S||!(v&2))&&this.editor.pushUndoStop(),!0}).then(E=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",f.elapsed(),E),h=E===!0?1:E===!1?0:-2}).finally(()=>{b.dispose(),x.dispose()}))}let{insertText:g}=s.completion;if(s.completion.insertTextRules&4||(g=xr.escape(g)),this.model.cancel(),n.insert(g,{overwriteBefore:d.overwriteBefore,overwriteAfter:d.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(s.completion.insertTextRules&1),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),t&2||this.editor.pushUndoStop(),s.completion.command)if(s.completion.command.id===UR.id)this.model.trigger({auto:!0,retrigger:!0});else{let f=new Vo;a.push(this._commandService.executeCommand(s.completion.command.id,...s.completion.command.arguments?[...s.completion.command.arguments]:[]).catch(m=>{s.completion.extensionId?wl(m):Be(m)}).finally(()=>{p=f.elapsed()}))}t&4&&this._alternatives.value.set(e,f=>{for(l.cancel();i.canUndo();){o!==i.getAlternativeVersionId()&&i.undo(),this._insertSuggestion(f,3|(t&8?8:0));break}}),this._alertCompletionItem(s),Promise.all(a).finally(()=>{this._reportSuggestionAcceptedTelemetry(s,i,c,p,h,e.index,e.model.items),this.model.clear(),l.dispose()})}_reportSuggestionAcceptedTelemetry(e,t,n,i,o,s,a){if(Math.floor(Math.random()*100)===0)return;let l=new Map;for(let h=0;h<Math.min(30,a.length);h++){let g=a[h].textLabel;l.has(g)?l.get(g).push(h):l.set(g,[h])}let d=l.get(e.textLabel),p=d&&d.length>1?d[0]:-1;this._telemetryService.publicLog2("suggest.acceptedSuggestion",{extensionId:e.extensionId?.value??"unknown",providerId:e.provider._debugDisplayName??"unknown",kind:e.completion.kind,basenameHash:Os(zo(t.uri)).toString(16),languageId:t.getLanguageId(),fileExtension:Iu(t.uri),resolveInfo:e.provider.resolveCompletionItem?n?1:0:-1,resolveDuration:e.resolveDuration,commandDuration:i,additionalEditsAsync:o,index:s,firstIndex:p})}getOverwriteInfo(e,t){Ao(this.editor.hasModel());let n=this.editor.getOption(120).insertMode==="replace";t&&(n=!n);let i=e.position.column-e.editStart.column,o=(n?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column,s=this.editor.getPosition().column-e.position.column,a=this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0;return{overwriteBefore:i+s,overwriteAfter:o+a}}_alertCompletionItem(e){if(gm(e.completion.additionalTextEdits)){let t=u("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);ca(t)}}triggerSuggest(e,t,n){this.editor.hasModel()&&(this.model.trigger({auto:t??!1,completionOptions:{providerFilter:e,kindFilter:n?new Set:void 0}}),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;let t=this.editor.getPosition(),n=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},i=o=>{if(o.completion.insertTextRules&4||o.completion.additionalTextEdits)return!0;let s=this.editor.getPosition(),a=o.editStart.column,l=s.column;return l-a!==o.completion.insertText.length?!0:this.editor.getModel().getValueInRange({startLineNumber:s.lineNumber,startColumn:a,endLineNumber:s.lineNumber,endColumn:l})!==o.completion.insertText};z.once(this.model.onDidTrigger)(o=>{let s=[];z.any(this.model.onDidTrigger,this.model.onDidCancel)(()=>{rt(s),n()},void 0,s),this.model.onDidSuggest(({completionModel:a})=>{if(rt(s),a.items.length===0){n();return}let l=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),a.items),d=a.items[l];if(!i(d)){n();return}this.editor.pushUndoStop(),this._insertSuggestion({index:l,item:d,model:a},7)},void 0,s)}),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){let n=this.widget.value.getFocusedItem(),i=0;e&&(i|=4),t&&(i|=8),this._insertSuggestion(n,i)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}focusSuggestion(){this.widget.value.focusSelected()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}};ar=_([y(1,cV),y(2,Xn),y(3,Ne),y(4,we),y(5,Vt),y(6,er)],ar);var vV=class{constructor(e){this.prioritySelector=e}_items=new Array;register(e){if(this._items.indexOf(e)!==-1)throw new Error("Value is already registered");return this._items.push(e),this._items.sort((t,n)=>this.prioritySelector(n)-this.prioritySelector(t)),{dispose:()=>{let t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}},UR=class r extends $h{static id="editor.action.triggerSuggest";constructor(){super({id:r.id,label:u("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:oe.and(pe.writable,pe.hasCompletionItemProvider,$e.Visible.toNegated()),kbOpts:{kbExpr:pe.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,n){let i=ar.get(t);if(!i)return;let o;n&&typeof n=="object"&&n.auto===!0&&(o=!0),i.triggerSuggest(void 0,o,void 0)}};gs(ar.ID,ar,2);RI(UR);var Cs=190,lr=hs.bindToContribution(ar.get);_e(new lr({id:"acceptSelectedSuggestion",precondition:oe.and($e.Visible,$e.HasFocusedSuggestion),handler(r){r.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:oe.and($e.Visible,pe.textInputFocus),weight:Cs},{primary:3,kbExpr:oe.and($e.Visible,pe.textInputFocus,$e.AcceptSuggestionsOnEnter,$e.MakesTextEdit),weight:Cs}],menuOpts:[{menuId:cd,title:u("accept.insert","Insert"),group:"left",order:1,when:$e.HasInsertAndReplaceRange.toNegated()},{menuId:cd,title:u("accept.insert","Insert"),group:"left",order:1,when:oe.and($e.HasInsertAndReplaceRange,$e.InsertMode.isEqualTo("insert"))},{menuId:cd,title:u("accept.replace","Replace"),group:"left",order:1,when:oe.and($e.HasInsertAndReplaceRange,$e.InsertMode.isEqualTo("replace"))}]}));_e(new lr({id:"acceptAlternativeSelectedSuggestion",precondition:oe.and($e.Visible,pe.textInputFocus,$e.HasFocusedSuggestion),kbOpts:{weight:Cs,kbExpr:pe.textInputFocus,primary:1027,secondary:[1026]},handler(r){r.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:cd,group:"left",order:2,when:oe.and($e.HasInsertAndReplaceRange,$e.InsertMode.isEqualTo("insert")),title:u("accept.replace","Replace")},{menuId:cd,group:"left",order:2,when:oe.and($e.HasInsertAndReplaceRange,$e.InsertMode.isEqualTo("replace")),title:u("accept.insert","Insert")}]}));St.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion");_e(new lr({id:"hideSuggestWidget",precondition:$e.Visible,handler:r=>r.cancelSuggestWidget(),kbOpts:{weight:Cs,kbExpr:pe.textInputFocus,primary:9,secondary:[1033]}}));_e(new lr({id:"selectNextSuggestion",precondition:oe.and($e.Visible,oe.or($e.MultipleSuggestions,$e.HasFocusedSuggestion.negate())),handler:r=>r.selectNextSuggestion(),kbOpts:{weight:Cs,kbExpr:pe.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}}));_e(new lr({id:"selectNextPageSuggestion",precondition:oe.and($e.Visible,oe.or($e.MultipleSuggestions,$e.HasFocusedSuggestion.negate())),handler:r=>r.selectNextPageSuggestion(),kbOpts:{weight:Cs,kbExpr:pe.textInputFocus,primary:12,secondary:[2060]}}));_e(new lr({id:"selectLastSuggestion",precondition:oe.and($e.Visible,oe.or($e.MultipleSuggestions,$e.HasFocusedSuggestion.negate())),handler:r=>r.selectLastSuggestion()}));_e(new lr({id:"selectPrevSuggestion",precondition:oe.and($e.Visible,oe.or($e.MultipleSuggestions,$e.HasFocusedSuggestion.negate())),handler:r=>r.selectPrevSuggestion(),kbOpts:{weight:Cs,kbExpr:pe.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}}));_e(new lr({id:"selectPrevPageSuggestion",precondition:oe.and($e.Visible,oe.or($e.MultipleSuggestions,$e.HasFocusedSuggestion.negate())),handler:r=>r.selectPrevPageSuggestion(),kbOpts:{weight:Cs,kbExpr:pe.textInputFocus,primary:11,secondary:[2059]}}));_e(new lr({id:"selectFirstSuggestion",precondition:oe.and($e.Visible,oe.or($e.MultipleSuggestions,$e.HasFocusedSuggestion.negate())),handler:r=>r.selectFirstSuggestion()}));_e(new lr({id:"focusSuggestion",precondition:oe.and($e.Visible,$e.HasFocusedSuggestion.negate()),handler:r=>r.focusSuggestion(),kbOpts:{weight:Cs,kbExpr:pe.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}}}));_e(new lr({id:"focusAndAcceptSuggestion",precondition:oe.and($e.Visible,$e.HasFocusedSuggestion.negate()),handler:r=>{r.focusSuggestion(),r.acceptSelectedSuggestion(!0,!1)}}));_e(new lr({id:"toggleSuggestionDetails",precondition:oe.and($e.Visible,$e.HasFocusedSuggestion),handler:r=>r.toggleSuggestionDetails(),kbOpts:{weight:Cs,kbExpr:pe.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:cd,group:"right",order:1,when:oe.and($e.DetailsVisible,$e.CanResolve),title:u("detail.more","Show Less")},{menuId:cd,group:"right",order:1,when:oe.and($e.DetailsVisible.toNegated(),$e.CanResolve),title:u("detail.less","Show More")}]}));_e(new lr({id:"toggleExplainMode",precondition:$e.Visible,handler:r=>r.toggleExplainMode(),kbOpts:{weight:100,primary:2138}}));_e(new lr({id:"toggleSuggestionFocus",precondition:$e.Visible,handler:r=>r.toggleSuggestionFocus(),kbOpts:{weight:Cs,kbExpr:pe.textInputFocus,primary:2570,mac:{primary:778}}}));_e(new lr({id:"insertBestCompletion",precondition:oe.and(pe.textInputFocus,oe.equals("config.editor.tabCompletion","on"),Gc.AtEnd,$e.Visible.toNegated(),js.OtherSuggestions.toNegated(),on.InSnippetMode.toNegated()),handler:(r,e)=>{r.triggerSuggestAndAcceptBest(tn(e)?{fallback:"tab",...e}:{fallback:"tab"})},kbOpts:{weight:Cs,primary:2}}));_e(new lr({id:"insertNextSuggestion",precondition:oe.and(pe.textInputFocus,oe.equals("config.editor.tabCompletion","on"),js.OtherSuggestions,$e.Visible.toNegated(),on.InSnippetMode.toNegated()),handler:r=>r.acceptNextSuggestion(),kbOpts:{weight:Cs,kbExpr:pe.textInputFocus,primary:2}}));_e(new lr({id:"insertPrevSuggestion",precondition:oe.and(pe.textInputFocus,oe.equals("config.editor.tabCompletion","on"),js.OtherSuggestions,$e.Visible.toNegated(),on.InSnippetMode.toNegated()),handler:r=>r.acceptPrevSuggestion(),kbOpts:{weight:Cs,kbExpr:pe.textInputFocus,primary:1026}}));RI(class extends $h{constructor(){super({id:"editor.action.resetSuggestSize",label:u("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(r,e){ar.get(e)?.resetWidgetSize()}});var KR=class extends N{constructor(t,n,i,o,s,a,l,d,c,p,h,g){super();this.textModel=t;this.selectedSuggestItem=n;this._textModelVersionId=i;this._positions=o;this._debounceValue=s;this._suggestPreviewEnabled=a;this._suggestPreviewMode=l;this._inlineSuggestMode=d;this._enabled=c;this._instantiationService=p;this._commandService=h;this._languageConfigurationService=g;this._register(rx(this._fetchInlineCompletionsPromise));let f;this._register(Zr(m=>{let v=this.state.read(m)?.inlineCompletion;if(v?.semanticId!==f?.semanticId&&(f=v,v)){let S=v.inlineCompletion,x=S.source;x.provider.handleItemDidShow?.(x.inlineCompletions,S.sourceInlineCompletion,S.insertText)}}))}_source=this._register(this._instantiationService.createInstance(pv,this.textModel,this._textModelVersionId,this._debounceValue));_isActive=dm(this,!1);_forceUpdateExplicitlySignal=K0(this);_selectedInlineCompletionId=dm(this,void 0);_primaryPosition=_l(this,t=>this._positions.read(t)[0]??new F(1,1));_isAcceptingPartially=!1;get isAcceptingPartially(){return this._isAcceptingPartially}_preserveCurrentCompletionReasons=new Set([1,0,2]);_getReason(t){return t?.isUndoing?0:t?.isRedoing?1:this.isAcceptingPartially?2:3}_fetchInlineCompletionsPromise=H0({owner:this,createEmptyChangeSummary:()=>({preserveCurrentCompletion:!1,inlineCompletionTriggerKind:0}),handleChange:(t,n)=>(t.didChange(this._textModelVersionId)&&this._preserveCurrentCompletionReasons.has(this._getReason(t.change))?n.preserveCurrentCompletion=!0:t.didChange(this._forceUpdateExplicitlySignal)&&(n.inlineCompletionTriggerKind=1),!0)},(t,n)=>{if(this._forceUpdateExplicitlySignal.read(t),!(this._enabled.read(t)&&this.selectedSuggestItem.read(t)||this._isActive.read(t))){this._source.cancelUpdate();return}this._textModelVersionId.read(t);let o=this._source.suggestWidgetInlineCompletions.get(),s=this.selectedSuggestItem.read(t);if(o&&!s){let p=this._source.inlineCompletions.get();Xd(h=>{(!p||o.request.versionId>p.request.versionId)&&this._source.inlineCompletions.set(o.clone(),h),this._source.clearSuggestWidgetInlineCompletions(h)})}let a=this._primaryPosition.read(t),l={triggerKind:n.inlineCompletionTriggerKind,selectedSuggestionInfo:s?.toSelectedSuggestionInfo()},d=this.selectedInlineCompletion.get(),c=n.preserveCurrentCompletion||d?.forwardStable?d:void 0;return this._source.fetch(a,l,c)});async trigger(t){this._isActive.set(!0,t),await this._fetchInlineCompletionsPromise.get()}async triggerExplicitly(t){lm(t,n=>{this._isActive.set(!0,n),this._forceUpdateExplicitlySignal.trigger(n)}),await this._fetchInlineCompletionsPromise.get()}stop(t){lm(t,n=>{this._isActive.set(!1,n),this._source.clear(n)})}_filteredInlineCompletionItems=Da({owner:this,equalsFn:B0()},t=>{let n=this._source.inlineCompletions.read(t);if(!n)return[];let i=this._primaryPosition.read(t);return n.inlineCompletions.filter(s=>s.isVisible(this.textModel,i,t))});selectedInlineCompletionIndex=_l(this,t=>{let n=this._selectedInlineCompletionId.read(t),i=this._filteredInlineCompletionItems.read(t),o=this._selectedInlineCompletionId===void 0?-1:i.findIndex(s=>s.semanticId===n);return o===-1?(this._selectedInlineCompletionId.set(void 0,void 0),0):o});selectedInlineCompletion=_l(this,t=>{let n=this._filteredInlineCompletionItems.read(t),i=this.selectedInlineCompletionIndex.read(t);return n[i]});activeCommands=Da({owner:this,equalsFn:B0()},t=>this.selectedInlineCompletion.read(t)?.inlineCompletion.source.inlineCompletions.commands??[]);lastTriggerKind=this._source.inlineCompletions.map(this,t=>t?.request.context.triggerKind);inlineCompletionsCount=_l(this,t=>{if(this.lastTriggerKind.read(t)===1)return this._filteredInlineCompletionItems.read(t).length});state=Da({owner:this,equalsFn:(t,n)=>!t||!n?t===n:XW(t.ghostTexts,n.ghostTexts)&&t.inlineCompletion===n.inlineCompletion&&t.suggestItem===n.suggestItem},t=>{let n=this.textModel,i=this.selectedSuggestItem.read(t);if(i){let o=Cp(i.toSingleTextEdit(),n),s=this._computeAugmentation(o,t);if(!this._suggestPreviewEnabled.read(t)&&!s)return;let l=s?.edit??o,d=s?s.edit.text.length-o.text.length:0,c=this._suggestPreviewMode.read(t),p=this._positions.read(t),h=[l,...yV(this.textModel,p,l)],g=h.map((m,b)=>iV(m,n,c,p[b],d)).filter(Pi),f=g[0]??new Sp(l.range.endLineNumber,[]);return{edits:h,primaryGhostText:f,ghostTexts:g,inlineCompletion:s?.completion,suggestItem:i}}else{if(!this._isActive.read(t))return;let o=this.selectedInlineCompletion.read(t);if(!o)return;let s=o.toSingleTextEdit(t),a=this._inlineSuggestMode.read(t),l=this._positions.read(t),d=[s,...yV(this.textModel,l,s)],c=d.map((p,h)=>iV(p,n,a,l[h],0)).filter(Pi);return c[0]?{edits:d,primaryGhostText:c[0],ghostTexts:c,inlineCompletion:o,suggestItem:void 0}:void 0}});_computeAugmentation(t,n){let i=this.textModel,o=this._source.suggestWidgetInlineCompletions.read(n),s=o?o.inlineCompletions:[this.selectedInlineCompletion.read(n)].filter(Pi);return C2(s,l=>{let d=l.toSingleTextEdit(n);return d=Cp(d,i,D.fromPositions(d.range.getStartPosition(),t.range.getEndPosition())),nV(d,t)?{completion:l,edit:d}:void 0})}ghostTexts=Da({owner:this,equalsFn:XW},t=>{let n=this.state.read(t);if(n)return n.ghostTexts});primaryGhostText=Da({owner:this,equalsFn:QW},t=>{let n=this.state.read(t);if(n)return n?.primaryGhostText});async _deltaSelectedInlineCompletionIndex(t){await this.triggerExplicitly();let n=this._filteredInlineCompletionItems.get()||[];if(n.length>0){let i=(this.selectedInlineCompletionIndex.get()+t+n.length)%n.length;this._selectedInlineCompletionId.set(n[i].semanticId,void 0)}else this._selectedInlineCompletionId.set(void 0,void 0)}async next(){await this._deltaSelectedInlineCompletionIndex(1)}async previous(){await this._deltaSelectedInlineCompletionIndex(-1)}async accept(t){if(t.getModel()!==this.textModel)throw new st;let n=this.state.get();if(!n||n.primaryGhostText.isEmpty()||!n.inlineCompletion)return;let i=n.inlineCompletion.toInlineCompletion(void 0);if(i.command&&i.source.addRef(),t.pushUndoStop(),i.snippetInfo)t.executeEdits("inlineSuggestion.accept",[mo.replace(i.range,""),...i.additionalTextEdits]),t.setPosition(i.snippetInfo.range.getStartPosition(),"inlineCompletionAccept"),on.get(t)?.insert(i.snippetInfo.snippet,{undoStopBefore:!1});else{let o=n.edits,s=I3(o).map(a=>ze.fromPositions(a));t.executeEdits("inlineSuggestion.accept",[...o.map(a=>mo.replace(a.range,a.text)),...i.additionalTextEdits]),t.setSelections(s,"inlineCompletionAccept")}this.stop(),i.command&&(await this._commandService.executeCommand(i.command.id,...i.command.arguments||[]).then(void 0,wl),i.source.removeRef())}async acceptNextWord(t){await this._acceptNext(t,(n,i)=>{let o=this.textModel.getLanguageIdAtPosition(n.lineNumber,n.column),s=this._languageConfigurationService.getLanguageConfiguration(o),a=new RegExp(s.wordDefinition.source,s.wordDefinition.flags.replace("g","")),l=i.match(a),d=0;l&&l.index!==void 0?l.index===0?d=l[0].length:d=l.index:d=i.length;let p=/\s+/g.exec(i);return p&&p.index!==void 0&&p.index+p[0].length<d&&(d=p.index+p[0].length),d},0)}async acceptNextLine(t){await this._acceptNext(t,(n,i)=>{let o=i.match(/\n/);return o&&o.index!==void 0?o.index+1:i.length},1)}async _acceptNext(t,n,i){if(t.getModel()!==this.textModel)throw new st;let o=this.state.get();if(!o||o.primaryGhostText.isEmpty()||!o.inlineCompletion)return;let s=o.primaryGhostText,a=o.inlineCompletion.toInlineCompletion(void 0);if(a.snippetInfo||a.filterText!==a.insertText){await this.accept(t);return}let l=s.parts[0],d=new F(s.lineNumber,l.column),c=l.text,p=n(d,c);if(p===c.length&&s.parts.length===1){this.accept(t);return}let h=c.substring(0,p),g=this._positions.get(),f=g[0];a.source.addRef();try{this._isAcceptingPartially=!0;try{t.pushUndoStop();let m=D.fromPositions(f,d),b=t.getModel().getValueInRange(m)+h,v=new ti(m,b),S=[v,...yV(this.textModel,g,v)],x=I3(S).map(E=>ze.fromPositions(E));t.executeEdits("inlineSuggestion.accept",S.map(E=>mo.replace(E.range,E.text))),t.setSelections(x,"inlineCompletionPartialAccept"),t.revealPositionInCenterIfOutsideViewport(t.getPosition(),1)}finally{this._isAcceptingPartially=!1}if(a.source.provider.handlePartialAccept){let m=D.fromPositions(a.range.getStartPosition(),Yo.ofText(h).addToPosition(d)),b=t.getModel().getValueInRange(m,1);a.source.provider.handlePartialAccept(a.source.inlineCompletions,a.sourceInlineCompletion,b.length,{kind:i})}}finally{a.source.removeRef()}}handleSuggestAccepted(t){let n=Cp(t.toSingleTextEdit(),this.textModel),i=this._computeAugmentation(n,void 0);if(!i)return;let o=i.completion.inlineCompletion;o.source.provider.handlePartialAccept?.(o.source.inlineCompletions,o.sourceInlineCompletion,n.text.length,{kind:2})}};KR=_([y(9,we),y(10,Xn),y(11,Qn)],KR);function yV(r,e,t){if(e.length===1)return[];let n=e[0],i=e.slice(1),o=t.range.getStartPosition(),s=t.range.getEndPosition(),a=r.getValueInRange(D.fromPositions(n,s)),l=YW(n,o);if(l.lineNumber<1)return Be(new st(`positionWithinTextEdit line number should be bigger than 0.
			Invalid subtraction between ${n.toString()} and ${o.toString()}`)),[];let d=tee(t.text,l);return i.map(c=>{let p=u3(YW(c,o),s),h=r.getValueInRange(D.fromPositions(c,p)),g=Oa(a,h),f=D.fromPositions(c,c.delta(0,g));return new ti(f,d)})}function tee(r,e){let t="",n=vH(r);for(let i=e.lineNumber-1;i<n.length;i++)t+=n[i].substring(i===e.lineNumber-1?e.column-1:0);return t}function I3(r){let e=hx.createSortPermutation(r,Rl(o=>o.range,D.compareRangesUsingStarts)),n=new hc(e.apply(r)).getNewRanges();return e.inverse().apply(n).map(o=>o.getEndPosition())}var bv=class r extends N{constructor(t,n){super();this.contextKeyService=t;this.model=n;this._register(Zr(i=>{let s=this.model.read(i)?.state.read(i),a=!!s?.inlineCompletion&&s?.primaryGhostText!==void 0&&!s?.primaryGhostText.isEmpty();this.inlineCompletionVisible.set(a),s?.primaryGhostText&&s?.inlineCompletion&&this.suppressSuggestions.set(s.inlineCompletion.inlineCompletion.source.inlineCompletions.suppressSuggestions)})),this._register(Zr(i=>{let o=this.model.read(i),s=!1,a=!0,l=o?.primaryGhostText.read(i);if(o?.selectedSuggestItem&&l&&l.parts.length>0){let{column:d,lines:c}=l.parts[0],p=c[0],h=o.textModel.getLineIndentColumn(l.lineNumber);if(d<=h){let f=kn(p);f===-1&&(f=p.length-1),s=f>0;let m=o.textModel.getOptions().tabSize;a=jt.visibleColumnFromColumn(p,f+1,m)<m}}this.inlineCompletionSuggestsIndentation.set(s),this.inlineCompletionSuggestsIndentationLessThanTabSize.set(a)}))}static inlineSuggestionVisible=new B("inlineSuggestionVisible",!1,u("inlineSuggestionVisible","Whether an inline suggestion is visible"));static inlineSuggestionHasIndentation=new B("inlineSuggestionHasIndentation",!1,u("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace"));static inlineSuggestionHasIndentationLessThanTabSize=new B("inlineSuggestionHasIndentationLessThanTabSize",!0,u("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab"));static suppressSuggestions=new B("inlineSuggestionSuppressSuggestions",void 0,u("suppressSuggestions","Whether suggestions should be suppressed for the current suggestion"));inlineCompletionVisible=r.inlineSuggestionVisible.bindTo(this.contextKeyService);inlineCompletionSuggestsIndentation=r.inlineSuggestionHasIndentation.bindTo(this.contextKeyService);inlineCompletionSuggestsIndentationLessThanTabSize=r.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService);suppressSuggestions=r.suppressSuggestions.bindTo(this.contextKeyService)};var jc=class{static shouldAutoTrigger(e){if(!e.hasModel())return!1;let t=e.getModel(),n=e.getPosition();t.tokenization.tokenizeIfCheap(n.lineNumber);let i=t.getWordAtPosition(n);return!(!i||i.endColumn!==n.column&&i.startColumn+1!==n.column||!isNaN(Number(i.word)))}lineNumber;column;leadingLineContent;leadingWord;triggerOptions;constructor(e,t,n){this.leadingLineContent=e.getLineContent(t.lineNumber).substr(0,t.column-1),this.leadingWord=e.getWordUntilPosition(t),this.lineNumber=t.lineNumber,this.column=t.column,this.triggerOptions=n}};function nee(r,e,t){if(!e.getContextKeyValue(bv.inlineSuggestionVisible.key))return!0;let n=e.getContextKeyValue(bv.suppressSuggestions.key);return n!==void 0?!n:!r.getOption(63).suppressSuggestions}function iee(r,e,t){if(!e.getContextKeyValue("inlineSuggestionVisible"))return!0;let n=e.getContextKeyValue(bv.suppressSuggestions.key);return n!==void 0?!n:!r.getOption(63).suppressSuggestions}var Ep=class{constructor(e,t,n,i,o,s,a,l,d){this._editor=e;this._editorWorkerService=t;this._clipboardService=n;this._telemetryService=i;this._logService=o;this._contextKeyService=s;this._configurationService=a;this._languageFeaturesService=l;this._envService=d;this._currentSelection=this._editor.getSelection()||new ze(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeModelLanguage(()=>{this._updateTriggerCharacters(),this.cancel()})),this._toDispose.add(this._editor.onDidChangeConfiguration(()=>{this._updateTriggerCharacters()})),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()}));let c=!1;this._toDispose.add(this._editor.onDidCompositionStart(()=>{c=!0})),this._toDispose.add(this._editor.onDidCompositionEnd(()=>{c=!1,this._onCompositionEnd()})),this._toDispose.add(this._editor.onDidChangeCursorSelection(p=>{c||this._onCursorChange(p)})),this._toDispose.add(this._editor.onDidChangeModelContent(()=>{!c&&this._triggerState!==void 0&&this._refilterCompletionItems()})),this._updateTriggerCharacters()}_toDispose=new X;_triggerCharacterListener=new X;_triggerQuickSuggest=new Pr;_triggerState=void 0;_requestToken;_context;_currentSelection;_completionModel;_completionDisposables=new X;_onDidCancel=new T;_onDidTrigger=new T;_onDidSuggest=new T;onDidCancel=this._onDidCancel.event;onDidTrigger=this._onDidTrigger.event;onDidSuggest=this._onDidSuggest.event;dispose(){rt(this._triggerCharacterListener),rt([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(93)||!this._editor.hasModel()||!this._editor.getOption(123))return;let e=new Map;for(let n of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(let i of n.triggerCharacters||[]){let o=e.get(i);if(!o){o=new Set;let s=nK();s&&o.add(s),e.set(i,o)}o.add(n)}let t=n=>{if(!iee(this._editor,this._contextKeyService,this._configurationService)||jc.shouldAutoTrigger(this._editor))return;if(!n){let s=this._editor.getPosition();n=this._editor.getModel().getLineContent(s.lineNumber).substr(0,s.column-1)}let i="";Nl(n.charCodeAt(n.length-1))?mn(n.charCodeAt(n.length-2))&&(i=n.substr(n.length-2)):i=n.charAt(n.length-1);let o=e.get(i);if(o){let s=new Map;if(this._completionModel)for(let[a,l]of this._completionModel.getItemsByProvider())o.has(a)||s.set(a,l);this.trigger({auto:!0,triggerKind:1,triggerCharacter:i,retrigger:!!this._completionModel,clipboardText:this._completionModel?.clipboardText,completionOptions:{providerFilter:o,providerItemsToReuse:s}})}};this._triggerCharacterListener.add(this._editor.onDidType(t)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(()=>t()))}get state(){return this._triggerState?this._triggerState.auto?2:1:0}cancel(e=!1){this._triggerState!==void 0&&(this._triggerQuickSuggest.cancel(),this._requestToken?.cancel(),this._requestToken=void 0,this._triggerState=void 0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:e}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){this._triggerState!==void 0&&(!this._editor.hasModel()||!this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.cancel():this.trigger({auto:this._triggerState.auto,retrigger:!0}))}_onCursorChange(e){if(!this._editor.hasModel())return;let t=this._currentSelection;if(this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||e.reason!==0&&e.reason!==3||e.source!=="keyboard"&&e.source!=="deleteLeft"){this.cancel();return}this._triggerState===void 0&&e.reason===0?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():this._triggerState!==void 0&&e.reason===3&&this._refilterCompletionItems()}_onCompositionEnd(){this._triggerState===void 0?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){Jh.isAllOff(this._editor.getOption(91))||this._editor.getOption(120).snippetsPreventQuickSuggestions&&on.get(this._editor)?.isInSnippet()||(this.cancel(),this._triggerQuickSuggest.cancelAndSet(()=>{if(this._triggerState!==void 0||!jc.shouldAutoTrigger(this._editor)||!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;let e=this._editor.getModel(),t=this._editor.getPosition(),n=this._editor.getOption(91);if(!Jh.isAllOff(n)){if(!Jh.isAllOn(n)){e.tokenization.tokenizeIfCheap(t.lineNumber);let i=e.tokenization.getLineTokens(t.lineNumber),o=i.getStandardTokenType(i.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if(Jh.valueFor(n,o)!=="on")return}nee(this._editor,this._contextKeyService,this._configurationService)&&this._languageFeaturesService.completionProvider.has(e)&&this.trigger({auto:!0})}},this._editor.getOption(92)))}_refilterCompletionItems(){Ao(this._editor.hasModel()),Ao(this._triggerState!==void 0);let e=this._editor.getModel(),t=this._editor.getPosition(),n=new jc(e,t,{...this._triggerState,refilter:!0});this._onNewContext(n)}trigger(e){if(!this._editor.hasModel())return;let t=this._editor.getModel(),n=new jc(t,this._editor.getPosition(),e);this.cancel(e.retrigger),this._triggerState=e,this._onDidTrigger.fire({auto:e.auto,shy:e.shy??!1,position:this._editor.getPosition()}),this._context=n;let i={triggerKind:e.triggerKind??0};e.triggerCharacter&&(i={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new jn;let o=this._editor.getOption(114),s=1;switch(o){case"top":s=0;break;case"bottom":s=2;break}let{itemKind:a,showDeprecated:l}=Ep.createSuggestFilter(this._editor),d=new UI(s,e.completionOptions?.kindFilter??a,e.completionOptions?.providerFilter,e.completionOptions?.providerItemsToReuse,l),c=DR.create(this._editorWorkerService,this._editor),p=vA(this._languageFeaturesService.completionProvider,t,this._editor.getPosition(),d,i,this._requestToken.token);Promise.all([p,c]).then(async([h,g])=>{if(this._requestToken?.dispose(),!this._editor.hasModel())return;let f=e?.clipboardText;if(!f&&h.needsClipboard&&(f=await this._clipboardService.readText()),this._triggerState===void 0)return;let m=this._editor.getModel(),b=new jc(m,this._editor.getPosition(),e),v={...ph.default,firstMatchCanBeWeak:!this._editor.getOption(120).matchOnWordStartOnly};if(this._completionModel=new LR(h.items,this._context.column,{leadingLineContent:b.leadingLineContent,characterCountDelta:b.column-this._context.column},g,this._editor.getOption(120),this._editor.getOption(114),v,f),this._completionDisposables.add(h.disposable),this._onNewContext(b),this._reportDurationsTelemetry(h.durations),!this._envService.isBuilt||this._envService.isExtensionDevelopment)for(let S of h.items)S.isInvalid&&this._logService.warn(`[suggest] did IGNORE invalid completion item from ${S.provider._debugDisplayName}`,S.completion)}).catch(Be)}_telemetryGate=0;_reportDurationsTelemetry(e){this._telemetryGate++%230===0&&setTimeout(()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),this._logService.debug("suggest.durations.json",e)})}static createSuggestFilter(e){let t=new Set;e.getOption(114)==="none"&&t.add(27);let i=e.getOption(120);return i.showMethods||t.add(0),i.showFunctions||t.add(1),i.showConstructors||t.add(2),i.showFields||t.add(3),i.showVariables||t.add(4),i.showClasses||t.add(5),i.showStructs||t.add(6),i.showInterfaces||t.add(7),i.showModules||t.add(8),i.showProperties||t.add(9),i.showEvents||t.add(10),i.showOperators||t.add(11),i.showUnits||t.add(12),i.showValues||t.add(13),i.showConstants||t.add(14),i.showEnums||t.add(15),i.showEnumMembers||t.add(16),i.showKeywords||t.add(17),i.showWords||t.add(18),i.showColors||t.add(19),i.showFiles||t.add(20),i.showReferences||t.add(21),i.showColors||t.add(22),i.showFolders||t.add(23),i.showTypeParameters||t.add(24),i.showSnippets||t.add(27),i.showUsers||t.add(25),i.showIssues||t.add(26),{itemKind:t,showDeprecated:i.showDeprecated}}_onNewContext(e){if(this._context){if(e.lineNumber!==this._context.lineNumber){this.cancel();return}if(an(e.leadingLineContent)!==an(this._context.leadingLineContent)){this.cancel();return}if(e.column<this._context.column){e.leadingWord.word?this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0}):this.cancel();return}if(this._completionModel){if(e.leadingWord.word.length!==0&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){if(jc.shouldAutoTrigger(this._editor)&&this._context){let n=this._completionModel.getItemsByProvider();this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerItemsToReuse:n}})}return}if(e.column>this._context.column&&this._completionModel.getIncompleteProvider().size>0&&e.leadingWord.word.length!==0){let t=new Map,n=new Set;for(let[i,o]of this._completionModel.getItemsByProvider())o.length>0&&o[0].container.incomplete?n.add(i):t.set(i,o);this.trigger({auto:this._context.triggerOptions.auto,triggerKind:2,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerFilter:n,providerItemsToReuse:t}})}else{let t=this._completionModel.lineContext,n=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},this._completionModel.items.length===0){let i=jc.shouldAutoTrigger(this._editor);if(!this._context){this.cancel();return}if(i&&this._context.leadingWord.endColumn<e.leadingWord.startColumn){this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});return}if(this._context.triggerOptions.auto){this.cancel();return}else if(this._completionModel.lineContext=t,n=this._completionModel.items.length>0,n&&e.leadingWord.word.length===0){this.cancel();return}}this._onDidSuggest.fire({completionModel:this._completionModel,triggerOptions:e.triggerOptions,isFrozen:n})}}}}};Ep=_([y(1,d3),y(2,ma),y(3,er),y(4,Vt),y(5,Ne),y(6,Ge),y(7,no),y(8,di)],Ep);var zR=class r{static _maxSelectionLength=51200;_disposables=new X;_lastOvertyped=[];_locked=!1;constructor(e,t){this._disposables.add(e.onWillType(()=>{if(this._locked||!e.hasModel())return;let n=e.getSelections(),i=n.length,o=!1;for(let a=0;a<i;a++)if(!n[a].isEmpty()){o=!0;break}if(!o){this._lastOvertyped.length!==0&&(this._lastOvertyped.length=0);return}this._lastOvertyped=[];let s=e.getModel();for(let a=0;a<i;a++){let l=n[a];if(s.getValueLengthInRange(l)>r._maxSelectionLength)return;this._lastOvertyped[a]={value:s.getValueInRange(l),multiline:l.startLineNumber!==l.endLineNumber}}})),this._disposables.add(t.onDidTrigger(n=>{this._locked=!0})),this._disposables.add(t.onDidCancel(n=>{this._locked=!1}))}getLastOvertypedInfo(e){if(e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}dispose(){this._disposables.dispose()}};var GR={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},on=class{constructor(e,t,n,i,o){this._editor=e;this._logService=t;this._languageFeaturesService=n;this._languageConfigurationService=o;this._inSnippet=on.InSnippetMode.bindTo(i),this._hasNextTabstop=on.HasNextTabstop.bindTo(i),this._hasPrevTabstop=on.HasPrevTabstop.bindTo(i)}static ID="snippetController2";static get(e){return e.getContribution(on.ID)}static InSnippetMode=new B("inSnippetMode",!1,u("inSnippetMode","Whether the editor in current in snippet mode"));static HasNextTabstop=new B("hasNextTabstop",!1,u("hasNextTabstop","Whether there is a next tab stop when in snippet mode"));static HasPrevTabstop=new B("hasPrevTabstop",!1,u("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode"));_inSnippet;_hasNextTabstop;_hasPrevTabstop;_session;_snippetListener=new X;_modelVersionId=-1;_currentChoice;_choiceCompletions;dispose(){this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._session?.dispose(),this._snippetListener.dispose()}apply(e,t){try{this._doInsert(e,typeof t>"u"?GR:{...GR,...t})}catch(n){this.cancel(),this._logService.error(n),this._logService.error("snippet_error"),this._logService.error("insert_edits=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}insert(e,t){try{this._doInsert(e,typeof t>"u"?GR:{...GR,...t})}catch(n){this.cancel(),this._logService.error(n),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}_doInsert(e,t){if(this._editor.hasModel()){if(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&typeof e!="string"&&this.cancel(),this._session?(Ao(typeof e=="string"),this._session.merge(e,t)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new sr(this._editor,e,t,this._languageConfigurationService),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),this._session?.hasChoice){let n={_debugDisplayName:"snippetChoiceCompletions",provideCompletionItems:(d,c)=>{if(!this._session||d!==this._editor.getModel()||!F.equals(this._editor.getPosition(),c))return;let{activeChoice:p}=this._session;if(!p||p.choice.options.length===0)return;let h=d.getValueInRange(p.range),g=!!p.choice.options.find(m=>m.value===h),f=[];for(let m=0;m<p.choice.options.length;m++){let b=p.choice.options[m];f.push({kind:13,label:b.value,insertText:b.value,sortText:"a".repeat(m+1),range:p.range,filterText:g?`${h}_${b.value}`:void 0,command:{id:"jumpToNextSnippetPlaceholder",title:u("next","Go to next placeholder...")}})}return{suggestions:f}}},i=this._editor.getModel(),o,s=!1,a=()=>{o?.dispose(),s=!1},l=()=>{s||(o=this._languageFeaturesService.completionProvider.register({language:i.getLanguageId(),pattern:i.uri.fsPath,scheme:i.uri.scheme,exclusive:!0},n),this._snippetListener.add(o),s=!0)};this._choiceCompletions={provider:n,enable:l,disable:a}}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent(n=>n.isFlush&&this.cancel())),this._snippetListener.add(this._editor.onDidChangeModel(()=>this.cancel())),this._snippetListener.add(this._editor.onDidChangeCursorSelection(()=>this._updateState()))}}_updateState(){if(!(!this._session||!this._editor.hasModel())){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}_handleChoice(){if(!this._session||!this._editor.hasModel()){this._currentChoice=void 0;return}let{activeChoice:e}=this._session;if(!e||!this._choiceCompletions){this._choiceCompletions?.disable(),this._currentChoice=void 0;return}this._currentChoice!==e.choice&&(this._currentChoice=e.choice,this._choiceCompletions.enable(),queueMicrotask(()=>{Xw(this._editor,this._choiceCompletions.provider)}))}finish(){for(;this._inSnippet.get();)this.next()}cancel(e=!1){this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,this._session?.dispose(),this._session=void 0,this._modelVersionId=-1,e&&this._editor.setSelections([this._editor.getSelection()])}prev(){this._session?.prev(),this._updateState()}next(){this._session?.next(),this._updateState()}isInSnippet(){return!!this._inSnippet.get()}getSessionEnclosingRange(){if(this._session)return this._session.getEnclosingRange()}};on=_([y(1,Vt),y(2,no),y(3,Ne),y(4,Qn)],on);gs(on.ID,on,4);var jR=hs.bindToContribution(on.get);_e(new jR({id:"jumpToNextSnippetPlaceholder",precondition:oe.and(on.InSnippetMode,on.HasNextTabstop),handler:r=>r.next(),kbOpts:{weight:130,kbExpr:pe.textInputFocus,primary:2}}));_e(new jR({id:"jumpToPrevSnippetPlaceholder",precondition:oe.and(on.InSnippetMode,on.HasPrevTabstop),handler:r=>r.prev(),kbOpts:{weight:130,kbExpr:pe.textInputFocus,primary:1026}}));_e(new jR({id:"leaveSnippet",precondition:on.InSnippetMode,handler:r=>r.cancel(!0),kbOpts:{weight:130,kbExpr:pe.textInputFocus,primary:9,secondary:[1033]}}));_e(new jR({id:"acceptSnippet",precondition:on.InSnippetMode,handler:r=>r.finish()}));var zg=class extends N{static ID="editor.contrib.menuPreventer";_editor;_altListeningMouse;_altMouseTriggered;constructor(e){super(),this._editor=e,this._altListeningMouse=!1,this._altMouseTriggered=!1,this._register(this._editor.onMouseDown(t=>{this._altListeningMouse&&(this._altMouseTriggered=!0)})),this._register(this._editor.onKeyDown(t=>{t.equals(512)&&(this._altListeningMouse||(this._altMouseTriggered=!1),this._altListeningMouse=!0)})),this._register(this._editor.onKeyUp(t=>{t.equals(512)&&(this._altMouseTriggered&&t.preventDefault(),this._altListeningMouse=!1,this._altMouseTriggered=!1)}))}};gs(zg.ID,zg,2);var IV="editor.contrib.selectionClipboard";async function SV(r,e,t){let n=t&&t.get("storage.serviceMachineId",-1)||null;if(n)return n;try{let o=(await e.readFile(r.serviceMachineIdResource)).value.toString();n=Sz(o)?o:null}catch{n=null}if(!n){n=ia();try{await e.writeFile(r.serviceMachineIdResource,Fn.fromString(n))}catch{}}return t?.store("storage.serviceMachineId",n,-1,1),n}var S3=j("extensionResourceLoaderService");var CV=class{codeSnippet;isBogous;isTrivial;usesClipboardVariable;usesSelectionVariable;constructor(e){this.isBogous=!1,this.isTrivial=!1,this.usesClipboardVariable=!1,this.usesSelectionVariable=!1,this.codeSnippet=e;let t=new xr().parse(e,!1),n=new Map,i=0;for(let s of t.placeholders)i=Math.max(i,s.index);if(t.placeholders.length===0)this.isTrivial=!0;else if(i===0){let s=Mo(t.children);this.isTrivial=s instanceof tr&&s.isFinalTabstop}let o=[...t.children];for(;o.length>0;){let s=o.shift();if(s instanceof Yh){if(s.children.length===0&&!b3[s.name]){let a=n.has(s.name)?n.get(s.name):++i;n.set(s.name,a);let l=new tr(a).appendChild(new xi(s.name));t.replace(s,[l]),this.isBogous=!0}switch(s.name){case"CLIPBOARD":this.usesClipboardVariable=!0;break;case"SELECTION":case"TM_SELECTED_TEXT":this.usesSelectionVariable=!0;break}}else o.push(...s.children)}this.isBogous&&(this.codeSnippet=t.toTextmateString())}},LC=class{constructor(e,t,n,i,o,s,a,l,d,c){this.isFileTemplate=e;this.scopes=t;this.name=n;this.prefix=i;this.description=o;this.body=s;this.source=a;this.snippetSource=l;this.snippetIdentifier=d;this.extensionId=c;this.prefixLow=i.toLowerCase(),this._bodyInsights=new Eu(Hl(),()=>new CV(this.body))}_bodyInsights;prefixLow;get codeSnippet(){return this._bodyInsights.value.codeSnippet}get isBogous(){return this._bodyInsights.value.isBogous}get isTrivial(){return this._bodyInsights.value.isTrivial}get needsClipboard(){return this._bodyInsights.value.usesClipboardVariable}get usesSelection(){return this._bodyInsights.value.usesSelectionVariable}};function oee(r){return tn(r)&&!!r.body}var vv=class{constructor(e,t,n,i,o,s){this.source=e;this.location=t;this.defaultScopes=n;this._extension=i;this._fileService=o;this._extensionResourceLoaderService=s;this.isGlobalSnippets=Zp(t.path)===".code-snippets",this.isUserSnippets=!this._extension}data=[];isGlobalSnippets;isUserSnippets;_loadPromise;select(e,t){this.isGlobalSnippets||!this.isUserSnippets?this._scopeSelect(e,t):this._filepathSelect(e,t)}_filepathSelect(e,t){e+".json"===Ho(this.location.path)&&t.push(...this.data)}_scopeSelect(e,t){for(let i of this.data){let o=i.scopes.length;if(o===0)t.push(i);else for(let s=0;s<o;s++)if(i.scopes[s]===e){t.push(i);break}}let n=e.lastIndexOf(".");n>=0&&this._scopeSelect(e.substring(0,n),t)}async _load(){return this._extension?this._extensionResourceLoaderService.readExtensionResource(this.location):(await this._fileService.readFile(this.location)).value.toString()}load(){return this._loadPromise||(this._loadPromise=Promise.resolve(this._load()).then(e=>{let t=nl(e);if(xA(t)==="object")for(let[n,i]of Object.entries(t))if(oee(i))this._parseSnippet(n,i,this.data);else for(let[o,s]of Object.entries(i))this._parseSnippet(o,s,this.data);return this})),this._loadPromise}reset(){this._loadPromise=void 0,this.data.length=0}_parseSnippet(e,t,n){let{isFileTemplate:i,prefix:o,body:s,description:a}=t;if(o||(o=""),Array.isArray(s)&&(s=s.join(`
`)),typeof s!="string")return;Array.isArray(a)&&(a=a.join(`
`));let l;this.defaultScopes?l=this.defaultScopes:typeof t.scope=="string"?l=t.scope.split(",").map(c=>c.trim()).filter(Boolean):l=[];let d;this._extension?d=this._extension.displayName||this._extension.name:this.source===2?d=u("source.workspaceSnippetGlobal","Workspace Snippet"):this.isGlobalSnippets?d=u("source.userSnippetGlobal","Global User Snippet"):d=u("source.userSnippet","User Snippet");for(let c of tt.wrap(o))n.push(new LC(!!i,l,e,c,a,s,d,this.source,this._extension?`${Su(this._extension.extensionLocation,this.location)}/${e}`:`${Ho(this.location.path)}/${e}`,this._extension?.identifier))}};var kC=j("snippetService");var Tp=[],xV=[],EV=[];function RC(r,e=!1){E3(r,!1,e)}function x3(r){E3(r,!0,!1)}function E3(r,e,t){let n=ree(r,e);Tp.push(n),n.userConfigured?EV.push(n):xV.push(n),t&&!n.userConfigured&&Tp.forEach(i=>{i.mime===n.mime||i.userConfigured||(n.extension&&i.extension===n.extension&&console.warn(`Overwriting extension <<${n.extension}>> to now point to mime <<${n.mime}>>`),n.filename&&i.filename===n.filename&&console.warn(`Overwriting filename <<${n.filename}>> to now point to mime <<${n.mime}>>`),n.filepattern&&i.filepattern===n.filepattern&&console.warn(`Overwriting filepattern <<${n.filepattern}>> to now point to mime <<${n.mime}>>`),n.firstline&&i.firstline===n.firstline&&console.warn(`Overwriting firstline <<${n.firstline}>> to now point to mime <<${n.mime}>>`))})}function ree(r,e){return{id:r.id,mime:r.mime,filename:r.filename,extension:r.extension,filepattern:r.filepattern,firstline:r.firstline,userConfigured:e,filenameLowercase:r.filename?r.filename.toLowerCase():void 0,extensionLowercase:r.extension?r.extension.toLowerCase():void 0,filepatternLowercase:r.filepattern?Rh(r.filepattern.toLowerCase()):void 0,filepatternOnPath:r.filepattern?r.filepattern.indexOf(mt.sep)>=0:!1}}function T3(){Tp=Tp.filter(r=>r.userConfigured),xV=[]}function w3(){Tp=Tp.filter(r=>!r.userConfigured),EV=[]}function _3(r,e){return see(r,e).map(t=>t.id)}function see(r,e){let t;if(r)switch(r.scheme){case ye.file:t=r.fsPath;break;case ye.data:{t=ac.parseMetaData(r).get(ac.META_DATA_LABEL);break}case ye.vscodeNotebookCell:t=void 0;break;default:t=r.path}if(!t)return[{id:"unknown",mime:Fs.unknown}];t=t.toLowerCase();let n=Ho(t),i=C3(t,n,EV);if(i)return[i,{id:Ni,mime:Fs.text}];let o=C3(t,n,xV);if(o)return[o,{id:Ni,mime:Fs.text}];if(e){let s=aee(e);if(s)return[s,{id:Ni,mime:Fs.text}]}return[{id:"unknown",mime:Fs.unknown}]}function C3(r,e,t){let n,i,o;for(let s=t.length-1;s>=0;s--){let a=t[s];if(e===a.filenameLowercase){n=a;break}if(a.filepattern&&(!i||a.filepattern.length>i.filepattern.length)){let l=a.filepatternOnPath?r:e;a.filepatternLowercase?.(l)&&(i=a)}a.extension&&(!o||a.extension.length>o.extension.length)&&e.endsWith(a.extensionLowercase)&&(o=a)}if(n)return n;if(i)return i;if(o)return o}function aee(r){if(Hx(r)&&(r=r.substr(1)),r.length>0)for(let e=Tp.length-1;e>=0;e--){let t=Tp[e];if(!t.firstline)continue;let n=r.match(t.firstline);if(n&&n.length>0)return t}}var yl=Object.prototype.hasOwnProperty,D3="vs.editor.nullLanguage",TV=class{_nextLanguageId;_languageIdToLanguage=[];_languageToLanguageId=new Map;constructor(){this._register(D3,0),this._register(Ni,1),this._nextLanguageId=2}_register(e,t){this._languageIdToLanguage[t]=e,this._languageToLanguageId.set(e,t)}register(e){if(this._languageToLanguageId.has(e))return;let t=this._nextLanguageId++;this._register(e,t)}encodeLanguageId(e){return this._languageToLanguageId.get(e)||0}decodeLanguageId(e){return this._languageIdToLanguage[e]||D3}},$R=class r extends N{static instanceCount=0;_onDidChange=this._register(new T);onDidChange=this._onDidChange.event;_warnOnOverwrite;languageIdCodec;_dynamicLanguages;_languages;_mimeTypesMap;_nameMap;_lowercaseNameMap;constructor(e=!0,t=!1){super(),r.instanceCount++,this._warnOnOverwrite=t,this.languageIdCodec=new TV,this._dynamicLanguages=[],this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},e&&(this._initializeFromRegistry(),this._register(rf.onDidChangeLanguages(n=>{this._initializeFromRegistry()})))}dispose(){r.instanceCount--,super.dispose()}setDynamicLanguages(e){this._dynamicLanguages=e,this._initializeFromRegistry()}_initializeFromRegistry(){this._languages={},this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},T3();let e=[].concat(rf.getLanguages()).concat(this._dynamicLanguages);this._registerLanguages(e)}registerLanguage(e){return rf.registerLanguage(e)}_registerLanguages(e){for(let t of e)this._registerLanguage(t);this._mimeTypesMap={},this._nameMap={},this._lowercaseNameMap={},Object.keys(this._languages).forEach(t=>{let n=this._languages[t];n.name&&(this._nameMap[n.name]=n.identifier),n.aliases.forEach(i=>{this._lowercaseNameMap[i.toLowerCase()]=n.identifier}),n.mimetypes.forEach(i=>{this._mimeTypesMap[i]=n.identifier})}),Te.as(In.Configuration).registerOverrideIdentifiers(this.getRegisteredLanguageIds()),this._onDidChange.fire()}_registerLanguage(e){let t=e.id,n;yl.call(this._languages,t)?n=this._languages[t]:(this.languageIdCodec.register(t),n={identifier:t,name:null,mimetypes:[],aliases:[],extensions:[],filenames:[],configurationFiles:[],icons:[]},this._languages[t]=n),this._mergeLanguage(n,e)}_mergeLanguage(e,t){let n=t.id,i=null;if(Array.isArray(t.mimetypes)&&t.mimetypes.length>0&&(e.mimetypes.push(...t.mimetypes),i=t.mimetypes[0]),i||(i=`text/x-${n}`,e.mimetypes.push(i)),Array.isArray(t.extensions)){t.configuration?e.extensions=t.extensions.concat(e.extensions):e.extensions=e.extensions.concat(t.extensions);for(let a of t.extensions)RC({id:n,mime:i,extension:a},this._warnOnOverwrite)}if(Array.isArray(t.filenames))for(let a of t.filenames)RC({id:n,mime:i,filename:a},this._warnOnOverwrite),e.filenames.push(a);if(Array.isArray(t.filenamePatterns))for(let a of t.filenamePatterns)RC({id:n,mime:i,filepattern:a},this._warnOnOverwrite);if(typeof t.firstLine=="string"&&t.firstLine.length>0){let a=t.firstLine;a.charAt(0)!=="^"&&(a="^"+a);try{let l=new RegExp(a);bH(l)||RC({id:n,mime:i,firstline:l},this._warnOnOverwrite)}catch(l){console.warn(`[${t.id}]: Invalid regular expression \`${a}\`: `,l)}}e.aliases.push(n);let o=null;if(typeof t.aliases<"u"&&Array.isArray(t.aliases)&&(t.aliases.length===0?o=[null]:o=t.aliases),o!==null)for(let a of o)!a||a.length===0||e.aliases.push(a);let s=o!==null&&o.length>0;if(!(s&&o[0]===null)){let a=(s?o[0]:null)||n;(s||!e.name)&&(e.name=a)}t.configuration&&e.configurationFiles.push(t.configuration),t.icon&&e.icons.push(t.icon)}isRegisteredLanguageId(e){return e?yl.call(this._languages,e):!1}getRegisteredLanguageIds(){return Object.keys(this._languages)}getSortedRegisteredLanguageNames(){let e=[];for(let t in this._nameMap)yl.call(this._nameMap,t)&&e.push({languageName:t,languageId:this._nameMap[t]});return e.sort((t,n)=>ts(t.languageName,n.languageName)),e}getLanguageName(e){return yl.call(this._languages,e)?this._languages[e].name:null}getMimeType(e){return yl.call(this._languages,e)&&this._languages[e].mimetypes[0]||null}getExtensions(e){return yl.call(this._languages,e)?this._languages[e].extensions:[]}getFilenames(e){return yl.call(this._languages,e)?this._languages[e].filenames:[]}getIcon(e){return yl.call(this._languages,e)&&this._languages[e].icons[0]||null}getConfigurationFiles(e){return yl.call(this._languages,e)?this._languages[e].configurationFiles||[]:[]}getLanguageIdByLanguageName(e){let t=e.toLowerCase();return yl.call(this._lowercaseNameMap,t)?this._lowercaseNameMap[t]:null}getLanguageIdByMimeType(e){return e&&yl.call(this._mimeTypesMap,e)?this._mimeTypesMap[e]:null}guessLanguageIdByFilepathOrFirstLine(e,t){return!e&&!t?[]:_3(e,t)}};var qR=class r extends N{_serviceBrand;static instanceCount=0;_onDidRequestBasicLanguageFeatures=this._register(new T);onDidRequestBasicLanguageFeatures=this._onDidRequestBasicLanguageFeatures.event;_onDidRequestRichLanguageFeatures=this._register(new T);onDidRequestRichLanguageFeatures=this._onDidRequestRichLanguageFeatures.event;_onDidChange=this._register(new T({leakWarningThreshold:200}));onDidChange=this._onDidChange.event;_requestedBasicLanguages=new Set;_requestedRichLanguages=new Set;_registry;languageIdCodec;constructor(e=!1){super(),r.instanceCount++,this._registry=this._register(new $R(!0,e)),this.languageIdCodec=this._registry.languageIdCodec,this._register(this._registry.onDidChange(()=>this._onDidChange.fire()))}dispose(){r.instanceCount--,super.dispose()}registerLanguage(e){return this._registry.registerLanguage(e)}isRegisteredLanguageId(e){return this._registry.isRegisteredLanguageId(e)}getRegisteredLanguageIds(){return this._registry.getRegisteredLanguageIds()}getSortedRegisteredLanguageNames(){return this._registry.getSortedRegisteredLanguageNames()}getLanguageName(e){return this._registry.getLanguageName(e)}getMimeType(e){return this._registry.getMimeType(e)}getIcon(e){return this._registry.getIcon(e)}getExtensions(e){return this._registry.getExtensions(e)}getFilenames(e){return this._registry.getFilenames(e)}getConfigurationFiles(e){return this._registry.getConfigurationFiles(e)}getLanguageIdByLanguageName(e){return this._registry.getLanguageIdByLanguageName(e)}getLanguageIdByMimeType(e){return this._registry.getLanguageIdByMimeType(e)}guessLanguageIdByFilepathOrFirstLine(e,t){return this._registry.guessLanguageIdByFilepathOrFirstLine(e,t).at(0)??null}createById(e){return new MC(this.onDidChange,()=>this._createAndGetLanguageIdentifier(e))}createByMimeType(e){return new MC(this.onDidChange,()=>{let t=this.getLanguageIdByMimeType(e);return this._createAndGetLanguageIdentifier(t)})}createByFilepathOrFirstLine(e,t){return new MC(this.onDidChange,()=>{let n=this.guessLanguageIdByFilepathOrFirstLine(e,t);return this._createAndGetLanguageIdentifier(n)})}_createAndGetLanguageIdentifier(e){return(!e||!this.isRegisteredLanguageId(e))&&(e=Ni),e}requestBasicLanguageFeatures(e){this._requestedBasicLanguages.has(e)||(this._requestedBasicLanguages.add(e),this._onDidRequestBasicLanguageFeatures.fire(e))}requestRichLanguageFeatures(e){this._requestedRichLanguages.has(e)||(this._requestedRichLanguages.add(e),this.requestBasicLanguageFeatures(e),Xo.getOrCreate(e),this._onDidRequestRichLanguageFeatures.fire(e))}},MC=class{_value;onDidChange;constructor(e,t){this._value=Xp(this,e,()=>t()),this.onDidChange=z.fromObservable(this._value)}get languageId(){return this._value.get()}};var YR;(e=>e.ExtensionFeaturesRegistry="workbench.registry.extensionFeatures")(YR||={});var jPn=j("IExtensionFeaturesManagementService"),wV=class{extensionFeatures=new Map;registerExtensionFeature(e){if(this.extensionFeatures.has(e.id))throw new Error(`Extension feature with id '${e.id}' already exists`);return this.extensionFeatures.set(e.id,e),{dispose:()=>this.extensionFeatures.delete(e.id)}}getExtensionFeature(e){return this.extensionFeatures.get(e)}getExtensionFeatures(){return Array.from(this.extensionFeatures.values())}};Te.add(YR.ExtensionFeaturesRegistry,new wV);var PC=bD.registerExtensionPoint({extensionPoint:"languages",jsonSchema:{description:u("vscode.extension.contributes.languages","Contributes language declarations."),type:"array",items:{type:"object",defaultSnippets:[{body:{id:"${1:languageId}",aliases:["${2:label}"],extensions:["${3:extension}"],configuration:"./language-configuration.json"}}],properties:{id:{description:u("vscode.extension.contributes.languages.id","ID of the language."),type:"string"},aliases:{description:u("vscode.extension.contributes.languages.aliases","Name aliases for the language."),type:"array",items:{type:"string"}},extensions:{description:u("vscode.extension.contributes.languages.extensions","File extensions associated to the language."),default:[".foo"],type:"array",items:{type:"string"}},filenames:{description:u("vscode.extension.contributes.languages.filenames","File names associated to the language."),type:"array",items:{type:"string"}},filenamePatterns:{description:u("vscode.extension.contributes.languages.filenamePatterns","File name glob patterns associated to the language."),type:"array",items:{type:"string"}},mimetypes:{description:u("vscode.extension.contributes.languages.mimetypes","Mime types associated to the language."),type:"array",items:{type:"string"}},firstLine:{description:u("vscode.extension.contributes.languages.firstLine","A regular expression matching the first line of a file of the language."),type:"string"},configuration:{description:u("vscode.extension.contributes.languages.configuration","A relative path to a file containing configuration options for the language."),type:"string",default:"./language-configuration.json"},icon:{type:"object",description:u("vscode.extension.contributes.languages.icon","A icon to use as file icon, if no icon theme provides one for the language."),properties:{light:{description:u("vscode.extension.contributes.languages.icon.light","Icon path when a light theme is used"),type:"string"},dark:{description:u("vscode.extension.contributes.languages.icon.dark","Icon path when a dark theme is used"),type:"string"}}}}}},activationEventsGenerator:(r,e)=>{for(let t of r)t.id&&t.configuration&&e.push(`onLanguage:${t.id}`)}}),_V=class extends N{type="table";shouldRender(e){return!!e.contributes?.languages}render(e){let t=e.contributes,n=t?.languages||[],i=[];for(let c of n)L3(c)&&i.push({id:c.id,name:(c.aliases||[])[0]||c.id,extensions:c.extensions||[],hasGrammar:!1,hasSnippets:!1});let o=$2(i,c=>c.id);if((t?.grammars||[]).forEach(c=>{if(!xt(c.language))return;let p=o[c.language];p?p.hasGrammar=!0:(p={id:c.language,name:c.language,extensions:[],hasGrammar:!0,hasSnippets:!1},o[p.id]=p,i.push(p))}),(t?.snippets||[]).forEach(c=>{if(!xt(c.language))return;let p=o[c.language];p?p.hasSnippets=!0:(p={id:c.language,name:c.language,extensions:[],hasGrammar:!1,hasSnippets:!0},o[p.id]=p,i.push(p))}),!i.length)return{data:{headers:[],rows:[]},dispose:()=>{}};let l=[u("language id","ID"),u("language name","Name"),u("file extensions","File Extensions"),u("grammar","Grammar"),u("snippets","Snippets")],d=i.sort((c,p)=>c.id.localeCompare(p.id)).map(c=>[c.id,c.name,new jo().appendMarkdown(`${c.extensions.map(p=>`\`${p}\``).join("&nbsp;")}`),c.hasGrammar?"\u2714\uFE0E":"\u2014",c.hasSnippets?"\u2714\uFE0E":"\u2014"]);return{data:{headers:l,rows:d},dispose:()=>{}}}};Te.as(YR.ExtensionFeaturesRegistry).registerExtensionFeature({id:"languages",label:u("languages","Programming Languages"),access:{canToggle:!1},renderer:new jl(_V)});var OC=class extends qR{constructor(t,n,i,o){super(i.verbose||i.isExtensionDevelopment||!i.isBuilt);this.logService=o;this._configurationService=n,this._extensionService=t,PC.setHandler(s=>{let a=[];for(let l=0,d=s.length;l<d;l++){let c=s[l];if(!Array.isArray(c.value)){c.collector.error(u("invalid","Invalid `contributes.{0}`. Expected an array.",PC.name));continue}for(let p=0,h=c.value.length;p<h;p++){let g=c.value[p];if(L3(g,c.collector)){let f;g.configuration&&(f=ft(c.description.extensionLocation,g.configuration)),a.push({id:g.id,extensions:g.extensions,filenames:g.filenames,filenamePatterns:g.filenamePatterns,firstLine:g.firstLine,aliases:g.aliases,mimetypes:g.mimetypes,configuration:f,icon:g.icon&&{light:ft(c.description.extensionLocation,g.icon.light),dark:ft(c.description.extensionLocation,g.icon.dark)}})}}}this._registry.setDynamicLanguages(a)}),this.updateMime(),this._register(this._configurationService.onDidChangeConfiguration(s=>{s.affectsConfiguration(mK)&&this.updateMime()})),this._extensionService.whenInstalledExtensionsRegistered().then(()=>{this.updateMime()}),this._register(this.onDidRequestRichLanguageFeatures(s=>{this._extensionService.activateByEvent(`onLanguage:${s}`),this._extensionService.activateByEvent("onLanguage")}))}_configurationService;_extensionService;updateMime(){let t=this._configurationService.getValue();w3(),t.files?.associations&&Object.keys(t.files.associations).forEach(n=>{let i=t.files.associations[n];if(typeof i!="string"){this.logService.warn(`Ignoring configured 'files.associations' for '${n}' because its type is not a string but '${typeof i}'`);return}let o=this.getMimeType(i)||`text/x-${i}`;x3({id:i,mime:o,filepattern:n})}),this._onDidChange.fire()}};OC=_([y(0,wd),y(1,Ge),y(2,di),y(3,Vt)],OC);function XR(r){return typeof r>"u"?!0:Array.isArray(r)?r.every(e=>typeof e=="string"):!1}function L3(r,e){return r?typeof r.id!="string"?(e?.error(u("require.id","property `{0}` is mandatory and must be of type `string`","id")),!1):XR(r.extensions)?XR(r.filenames)?typeof r.firstLine<"u"&&typeof r.firstLine!="string"?(e?.error(u("opt.firstLine","property `{0}` can be omitted and must be of type `string`","firstLine")),!1):typeof r.configuration<"u"&&typeof r.configuration!="string"?(e?.error(u("opt.configuration","property `{0}` can be omitted and must be of type `string`","configuration")),!1):XR(r.aliases)?XR(r.mimetypes)?typeof r.icon<"u"&&(typeof r.icon!="object"||typeof r.icon.light!="string"||typeof r.icon.dark!="string")?(e?.error(u("opt.icon","property `{0}` can be omitted and must be of type `object` with properties `{1}` and `{2}` of type `string`","icon","light","dark")),!1):!0:(e?.error(u("opt.mimetypes","property `{0}` can be omitted and must be of type `string[]`","mimetypes")),!1):(e?.error(u("opt.aliases","property `{0}` can be omitted and must be of type `string[]`","aliases")),!1):(e?.error(u("opt.filenames","property `{0}` can be omitted and must be of type `string[]`","filenames")),!1):(e?.error(u("opt.extensions","property `{0}` can be omitted and must be of type `string[]`","extensions")),!1):(e?.error(u("invalid.empty","Empty value for `contributes.{0}`",PC.name)),!1)}Cn(Lt,OC,0);var k3="_snippet.markAsUsed";St.registerCommand(k3,(r,...e)=>{let t=r.get(kC),[n]=e;n instanceof LC&&t.updateUsageTimestamp(n)});var wp=class{constructor(e,t){this.snippet=e;this.label={label:e.prefix,description:e.name},this.detail=u("detail.snippet","{0} ({1})",e.description||e.name,e.source),this.insertText=e.codeSnippet,this.extensionId=e.extensionId,this.range=t,this.sortText=`${e.snippetSource===3?"z":"a"}-${e.prefix}`,this.kind=27,this.insertTextRules=4,this.command={id:k3,title:"",arguments:[e]}}label;detail;insertText;documentation;range;sortText;kind;insertTextRules;extensionId;command;resolve(){return this.documentation=new jo().appendCodeblock("",xr.asInsertText(this.snippet.codeSnippet)),this}static compareByLabel(e,t){return sh(e.label.label,t.label.label)}},yv=class{constructor(e,t,n){this._languageService=e;this._snippets=t;this._languageConfigurationService=n}_debugDisplayName="snippetCompletions";async provideCompletionItems(e,t,n){let i=new Vo,o=t.lineNumber,s=e.getWordAtPosition(t)??{startColumn:t.column,endColumn:t.column,word:""},a=e.getLineContent(t.lineNumber).toLowerCase(),l=a.substring(0,s.startColumn+s.word.length-1),d=this._computeSnippetPositions(e,o,s,l),c=t.column-1,p=n.triggerCharacter?.toLowerCase()??"",h=this._getLanguageIdAtPosition(e,t),g=this._languageConfigurationService.getLanguageConfiguration(h),f=new Set(await this._snippets.getSnippets(h)),m=[];for(let b of f){if(n.triggerKind===1&&!b.prefixLow.startsWith(p))continue;let v;for(let M of d)if(!(M.prefixLow.match(/^\s/)&&!b.prefixLow.match(/^\s/))&&mM(M.prefixLow,0,M.prefixLow.length,b.prefixLow,0,b.prefixLow.length)){v=M;break}if(!v)continue;let S=v.startColumn-1,x=b.prefixLow.length-(c-S),E=vm(a,b.prefixLow,c,c+x,c-S),w=t.with(void 0,S+1),P=E===0?t.column+x:t.column;c<a.length&&g.getAutoClosingPairs().autoClosingPairsCloseSingleChar.get(a[c])?.some($=>$.open===a[w.column-1]&&b.prefix.startsWith($.open)&&b.prefix[b.prefix.length-1]===$.close)&&P++;let R=D.fromPositions({lineNumber:o,column:v.startColumn},{lineNumber:o,column:P}),O=R.setEndPosition(o,t.column);m.push(new wp(b,{replace:R,insert:O})),f.delete(b)}if(!p&&(/\s/.test(a[t.column-2])||!a))for(let b of f){let v=D.fromPositions(t),S=a.indexOf(b.prefixLow,c)===c?v.setEndPosition(t.lineNumber,t.column+b.prefixLow.length):v;m.push(new wp(b,{replace:S,insert:v}))}return this._disambiguateSnippets(m),{suggestions:m,duration:i.elapsed()}}_disambiguateSnippets(e){e.sort(wp.compareByLabel);for(let t=0;t<e.length;t++){let n=e[t],i=t+1;for(;i<e.length&&n.label===e[i].label;i++)e[i].label.label=u("snippetSuggest.longLabel","{0}, {1}",e[i].label.label,e[i].snippet.name);i>t+1&&(e[t].label.label=u("snippetSuggest.longLabel","{0}, {1}",e[t].label.label,e[t].snippet.name),t=i)}}resolveCompletionItem(e){return e instanceof wp?e.resolve():e}_computeSnippetPositions(e,t,n,i){let o=[];for(let s=1;s<n.startColumn;s++){let a=e.getWordAtPosition(new F(t,s));o.push({startColumn:s,prefixLow:i.substring(s-1),isWord:!!a}),a&&(s=a.endColumn,o.push({startColumn:a.endColumn,prefixLow:i.substring(a.endColumn-1),isWord:!1}))}return(n.word.length>0||o.length===0)&&o.push({startColumn:n.startColumn,prefixLow:i.substring(n.startColumn-1),isWord:!0}),o}_getLanguageIdAtPosition(e,t){e.tokenization.tokenizeIfCheap(t.lineNumber);let n=e.getLanguageIdAtPosition(t.lineNumber,t.column);return this._languageService.getLanguageName(n)||(n=e.getLanguageId()),n}};yv=_([y(0,Lt),y(1,kC),y(2,Qn)],yv);var DV;(n=>{function r(i,o,s){if(Pl(o.path))return i.collector.error(u("invalid.path.0","Expected string in `contributes.{0}.path`. Provided value: {1}",i.description.name,String(o.path))),null;if(Pl(o.language)&&!o.path.endsWith(".code-snippets"))return i.collector.error(u("invalid.language.0","When omitting the language, the value of `contributes.{0}.path` must be a `.code-snippets`-file. Provided value: {1}",i.description.name,String(o.path))),null;if(!Pl(o.language)&&!s.isRegisteredLanguageId(o.language))return i.collector.error(u("invalid.language","Unknown language in `contributes.{0}.language`. Provided value: {1}",i.description.name,String(o.language))),null;let a=i.description.extensionLocation,l=ft(a,o.path);return D1(l,a)?{language:o.language,location:l}:(i.collector.error(u("invalid.path.1","Expected `contributes.{0}.path` ({1}) to be included inside extension's folder ({2}). This might make the extension non-portable.",i.description.name,l.path,a.path)),null)}n.toValidSnippet=r,n.snippetsContribution={description:u("vscode.extension.contributes.snippets","Contributes snippets."),type:"array",defaultSnippets:[{body:[{language:"",path:""}]}],items:{type:"object",defaultSnippets:[{body:{language:"${1:id}",path:"./snippets/${2:id}.json."}}],properties:{language:{description:u("vscode.extension.contributes.snippets-language","Language identifier for which this snippet is contributed to."),type:"string"},path:{description:u("vscode.extension.contributes.snippets-path","Path of the snippets file. The path is relative to the extension folder and typically starts with './snippets/'."),type:"string"}}}},n.point=bD.registerExtensionPoint({extensionPoint:"snippets",deps:[PC],jsonSchema:n.snippetsContribution})})(DV||={});function dee(r,e,t){return Li(r.watch(e),r.onDidFilesChange(n=>{n.affects(e)&&t()}))}var _p=class{constructor(e){this._storageService=e;let t=e.get(_p._key,0,""),n;try{n=JSON.parse(t)}catch{}this._ignored=I1(n)?new Set(n):new Set}static _key="snippets.ignoredSnippets";_ignored;isIgnored(e){return this._ignored.has(e)}updateIgnored(e,t){let n=!1;this._ignored.has(e)&&!t?(this._ignored.delete(e),n=!0):!this._ignored.has(e)&&t&&(this._ignored.add(e),n=!0),n&&this._storageService.store(_p._key,JSON.stringify(Array.from(this._ignored)),0,0)}};_p=_([y(0,Io)],_p);var Dp=class{constructor(e){this._storageService=e;let t=e.get(Dp._key,0,""),n;try{n=JSON.parse(t)}catch{n=[]}this._usages=Array.isArray(n)?new Map(n):new Map}static _key="snippets.usageTimestamps";_usages;getUsageTimestamp(e){return this._usages.get(e)}updateUsageTimestamp(e){this._usages.delete(e),this._usages.set(e,Date.now());let t=[...this._usages].slice(-100);this._storageService.store(Dp._key,JSON.stringify(t),0,0)}};Dp=_([y(0,Io)],Dp);var QR=class{constructor(e,t,n,i,o,s,a,l,d,c,p){this._environmentService=e;this._userDataProfileService=t;this._contextService=n;this._languageService=i;this._logService=o;this._fileService=s;this._textfileService=a;this._extensionResourceLoaderService=l;this._pendingWork.push(Promise.resolve(d.when(3).then(()=>{this._initExtensionSnippets(),this._initUserSnippets(),this._initWorkspaceSnippets()}))),iK(new yv(this._languageService,this,p)),this._enablement=c.createInstance(_p),this._usageTimestamps=c.createInstance(Dp)}_disposables=new X;_pendingWork=[];_files=new bi;_enablement;_usageTimestamps;dispose(){this._disposables.dispose()}isEnabled(e){return!this._enablement.isIgnored(e.snippetIdentifier)}updateEnablement(e,t){this._enablement.updateIgnored(e.snippetIdentifier,!t)}updateUsageTimestamp(e){this._usageTimestamps.updateUsageTimestamp(e.snippetIdentifier)}_joinSnippets(){let e=this._pendingWork.slice(0);return this._pendingWork.length=0,Promise.all(e)}async getSnippetFiles(){return await this._joinSnippets(),this._files.values()}async getSnippets(e,t){await this._joinSnippets();let n=[],i=[];if(e){if(this._languageService.isRegisteredLanguageId(e))for(let o of this._files.values())i.push(o.load().then(s=>s.select(e,n)).catch(s=>this._logService.error(s,o.location.toString())))}else for(let o of this._files.values())i.push(o.load().then(s=>e1(n,n.length,s.data)).catch(s=>this._logService.error(s,o.location.toString())));return await Promise.all(i),this._filterAndSortSnippets(n,t)}getSnippetsSync(e,t){let n=[];if(this._languageService.isRegisteredLanguageId(e))for(let i of this._files.values())i.load().catch(o=>{}),i.select(e,n);return this._filterAndSortSnippets(n,t)}_filterAndSortSnippets(e,t){let n=[];for(let i of e)!i.prefix&&!t?.includeNoPrefixSnippets||!this.isEnabled(i)&&!t?.includeDisabledSnippets||typeof t?.fileTemplateSnippets=="boolean"&&t.fileTemplateSnippets!==i.isFileTemplate||n.push(i);return n.sort((i,o)=>{let s=0;if(!t?.noRecencySort){let a=this._usageTimestamps.getUsageTimestamp(i.snippetIdentifier)??-1;s=(this._usageTimestamps.getUsageTimestamp(o.snippetIdentifier)??-1)-a}return s===0&&(s=this._compareSnippet(i,o)),s})}_compareSnippet(e,t){return e.snippetSource<t.snippetSource?-1:e.snippetSource>t.snippetSource?1:e.source<t.source?-1:e.source>t.source||e.name>t.name?1:e.name<t.name?-1:0}_initExtensionSnippets(){DV.point.setHandler(e=>{for(let[t,n]of this._files)n.source===3&&this._files.delete(t);for(let t of e)for(let n of t.value){let i=DV.toValidSnippet(t,n,this._languageService);if(!i)continue;let o=this._files.get(i.location);if(o)o.defaultScopes?o.defaultScopes.push(i.language):o.defaultScopes=[];else{let s=new vv(3,i.location,i.language?[i.language]:void 0,t.description,this._fileService,this._extensionResourceLoaderService);this._files.set(s.location,s),this._environmentService.isExtensionDevelopment&&s.load().then(a=>{a.data.some(l=>l.isBogous)&&t.collector.warn(u("badVariableUse","One or more snippets from the extension '{0}' very likely confuse snippet-variables and snippet-placeholders (see https://code.visualstudio.com/docs/editor/userdefinedsnippets#_snippet-syntax for more details)",t.description.name))},a=>{t.collector.warn(u("badFile",'The snippet file "{0}" could not be read.',s.location.toString()))})}}})}_initWorkspaceSnippets(){let e=new X,t=()=>{e.clear(),this._pendingWork.push(this._initWorkspaceFolderSnippets(this._contextService.getWorkspace(),e))};this._disposables.add(e),this._disposables.add(this._contextService.onDidChangeWorkspaceFolders(t)),this._disposables.add(this._contextService.onDidChangeWorkbenchState(t)),t()}async _initWorkspaceFolderSnippets(e,t){let n=e.folders.map(async i=>{let o=i.toResource(".vscode");await this._fileService.exists(o)?this._initFolderSnippets(2,o,t):t.add(this._fileService.onDidFilesChange(a=>{a.contains(o,1)&&this._initFolderSnippets(2,o,t)}))});await Promise.all(n)}async _initUserSnippets(){let e=new X,t=async()=>{e.clear();let n=this._userDataProfileService.currentProfile.snippetsHome;await this._fileService.createFolder(n),await this._initFolderSnippets(1,n,e)};this._disposables.add(e),this._disposables.add(this._userDataProfileService.onDidChangeCurrentProfile(n=>n.join((async()=>{this._pendingWork.push(t())})()))),await t()}_initFolderSnippets(e,t,n){let i=new X,o=async()=>{if(i.clear(),!!await this._fileService.exists(t))try{let s=await this._fileService.resolve(t);for(let a of s.children||[])i.add(this._addSnippetFile(a.resource,e))}catch(s){this._logService.error(`Failed snippets from folder '${t.toString()}'`,s)}};return n.add(this._textfileService.files.onDidSave(s=>{D1(s.model.resource,t)&&o()})),n.add(dee(this._fileService,t,o)),n.add(i),o()}_addSnippetFile(e,t){let n=Iu(e);if(t===1&&n===".json"){let i=zo(e).replace(/\.json/,"");this._files.set(e,new vv(t,e,[i],void 0,this._fileService,this._extensionResourceLoaderService))}else n===".code-snippets"&&this._files.set(e,new vv(t,e,void 0,void 0,this._fileService,this._extensionResourceLoaderService));return{dispose:()=>this._files.delete(e)}}};QR=_([y(0,di),y(1,Dr),y(2,fn),y(3,Lt),y(4,Vt),y(5,nn),y(6,Us),y(7,S3),y(8,Ed),y(9,we),y(10,Qn)],QR);function R3(r,e){let n=r.getLineContent(e.lineNumber).substr(0,e.column-1),i=Math.max(0,n.length-100);for(let o=n.length-1;o>=i;o--){let s=n.charAt(o);if(/\s/.test(s))return n.substr(o+1)}return i===0?n:""}var M3=j("IEditorCancelService"),O3=new B("cancellableOperation",!1,u("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));Cn(M3,class{_tokens=new WeakMap;add(r,e){let t=this._tokens.get(r);t||(t=r.invokeWithinContext(i=>{let o=O3.bindTo(i.get(Ne)),s=new mi;return{key:o,tokens:s}}),this._tokens.set(r,t));let n;return t.key.set(!0),n=t.tokens.push(e),()=>{n&&(n(),t.key.set(!t.tokens.isEmpty()),n=void 0)}}cancel(r){let e=this._tokens.get(r);if(!e)return;let t=e.tokens.pop();t&&(t.cancel(),e.key.set(!e.tokens.isEmpty()))}},1);_e(new class extends hs{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:O3})}runEditorCommand(r,e){r.get(M3).cancel(e)}});var ZR=class r{flags;position;selection;modelVersionId;scrollLeft;scrollTop;constructor(e,t){if(this.flags=t,this.flags&1){let n=e.getModel();this.modelVersionId=n?sy("{0}#{1}",n.uri.toString(),n.getVersionId()):null}else this.modelVersionId=null;this.flags&4?this.position=e.getPosition():this.position=null,this.flags&2?this.selection=e.getSelection():this.selection=null,this.flags&8?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof r))return!1;let t=e;return!(this.modelVersionId!==t.modelVersionId||this.scrollLeft!==t.scrollLeft||this.scrollTop!==t.scrollTop||!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position)||!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))}validate(e){return this._equals(new r(e,this.flags))}};var Ca=class{constructor(e,t,n,i,o){this._editor=e;this._snippetService=t;this._clipboardService=n;this._languageFeaturesService=i;this._hasSnippets=Ca.ContextKey.bindTo(o),this._configListener=this._editor.onDidChangeConfiguration(s=>{s.hasChanged(125)&&this._update()}),this._update()}static ID="editor.tabCompletionController";static ContextKey=new B("hasSnippetCompletions",void 0);static get(e){return e.getContribution(Ca.ID)}_hasSnippets;_configListener;_enabled;_selectionListener;_activeSnippets=[];_completionProvider;dispose(){this._configListener.dispose(),this._selectionListener?.dispose()}_update(){let e=this._editor.getOption(125)==="onlySnippets";this._enabled!==e&&(this._enabled=e,this._enabled?(this._selectionListener=this._editor.onDidChangeCursorSelection(t=>this._updateSnippets()),this._editor.getModel()&&this._updateSnippets()):this._selectionListener?.dispose())}_updateSnippets(){if(this._activeSnippets=[],this._completionProvider?.dispose(),!this._editor.hasModel())return;let e=this._editor.getSelection(),t=this._editor.getModel();t.tokenization.tokenizeIfCheap(e.positionLineNumber);let n=t.getLanguageIdAtPosition(e.positionLineNumber,e.positionColumn),i=this._snippetService.getSnippetsSync(n);if(!i){this._hasSnippets.set(!1);return}if(D.isEmpty(e)){let s=R3(t,e.getPosition());if(s)for(let a of i)s.endsWith(a.prefix)&&this._activeSnippets.push(a)}else if(!D.spansMultipleLines(e)&&t.getValueLengthInRange(e)<=100){let s=t.getValueInRange(e);if(s)for(let a of i)s===a.prefix&&this._activeSnippets.push(a)}let o=this._activeSnippets.length;if(o===0)this._hasSnippets.set(!1);else if(o===1)this._hasSnippets.set(!0);else{this._hasSnippets.set(!0),this._completionProvider={_debugDisplayName:"tabCompletion",dispose:()=>{s.dispose()},provideCompletionItems:(a,l)=>a!==t||!e.containsPosition(l)?void 0:{suggestions:this._activeSnippets.map(c=>{let p=D.fromPositions(l.delta(0,-c.prefix.length),l);return new wp(c,p)})}};let s=this._languageFeaturesService.completionProvider.register({language:t.getLanguageId(),pattern:t.uri.fsPath,scheme:t.uri.scheme},this._completionProvider)}}async performSnippetCompletions(){if(this._editor.hasModel())if(this._activeSnippets.length===1){let[e]=this._activeSnippets,t;if(e.needsClipboard){let n=new ZR(this._editor,5);if(t=await this._clipboardService.readText(),!n.validate(this._editor))return}on.get(this._editor)?.insert(e.codeSnippet,{overwriteBefore:e.prefix.length,overwriteAfter:0,clipboardText:t})}else this._activeSnippets.length>1&&this._completionProvider&&Xw(this._editor,this._completionProvider)}};Ca=_([y(1,kC),y(2,ma),y(3,no),y(4,Ne)],Ca);gs(Ca.ID,Ca,0);var cee=hs.bindToContribution(Ca.get);_e(new cee({id:"insertSnippet",precondition:Ca.ContextKey,handler:r=>r.performSnippetCompletions(),kbOpts:{weight:100,kbExpr:oe.and(pe.editorTextFocus,pe.tabDoesNotMoveFocus,on.InSnippetMode.toNegated()),primary:2}}));function P3(r){return{wordWrap:"on",overviewRulerLanes:0,glyphMargin:!1,lineNumbers:"off",folding:!1,selectOnLineNumbers:!1,hideCursorInOverviewRuler:!0,selectionHighlight:!1,scrollbar:{horizontal:"hidden",alwaysConsumeMouseWheel:!1},lineDecorationsWidth:0,overviewRulerBorder:!1,scrollBeyondLastLine:!1,renderLineHighlight:"none",fixedOverflowWidgets:!0,acceptSuggestionOnEnter:"smart",dragAndDrop:!1,revealHorizontalRightPadding:5,minimap:{enabled:!1},guides:{indentation:!1},accessibilitySupport:r.getValue("editor.accessibilitySupport"),cursorBlinking:r.getValue("editor.cursorBlinking"),experimentalEditContextEnabled:r.getValue("editor.experimentalEditContextEnabled")}}function A3(r){return to((e,t)=>{let n=e.getColor(i4);if(n){let i=e.getColor(vc);i&&(t.addRule(`${r} .monaco-editor-background { background-color: ${i}; } `),t.addRule(`${r} .monaco-editor .selected-text { background-color: ${i.transparent(.4)}; }`));let o=e.getColor(td);o&&t.addRule(`${r} .monaco-editor .view-line span.inline-selected-text { color: ${o}; }`),t.addRule(`${r} .monaco-editor .focused .selected-text { background-color: ${n}; }`)}else t.addRule(`${r} .monaco-editor .focused .selected-text { background-color: ${e.getColor($u)}; }`)})}var $c=class extends On{_onShouldFocusResults=new T;onShouldFocusResults=this._onShouldFocusResults.event;_onInputDidChange=new T;onInputDidChange=this._onInputDidChange.event;_onDidFocus=this._register(new T);onDidFocus=this._onDidFocus.event;_onDidBlur=this._register(new T);onDidBlur=this._onDidBlur.event;inputWidget;inputModel;stylingContainer;element;placeholderText;constructor(e,t,n,i,o,s,a,l,d,c,p){super(),this.stylingContainer=q(t,ie(".suggest-input-container")),this.element=t,this.placeholderText=q(this.stylingContainer,ie(".suggest-input-placeholder",void 0,s.placeholderText||""));let h=Pm(P3(p),uee(i));h.overflowWidgetsDomNode=s.overflowWidgetsDomNode;let g=this.getScopedContextKeyService(d),f=g?this._register(a.createChild(new Wm([Ne,g]))):a;this.inputWidget=this._register(f.createInstance(Ss,this.stylingContainer,h,{contributions:ms.getSomeEditorContributions([ar.ID,on.ID,Sa.ID,zg.ID,IV]),isSimpleWidget:!0})),this._register(p.onDidChangeConfiguration(x=>{if(x.affectsConfiguration("editor.accessibilitySupport")||x.affectsConfiguration("editor.cursorBlinking")){let E=p.getValue("editor.accessibilitySupport"),w=p.getValue("editor.cursorBlinking");this.inputWidget.updateOptions({accessibilitySupport:E,cursorBlinking:w})}})),this._register(this.inputWidget.onDidFocusEditorText(()=>this._onDidFocus.fire())),this._register(this.inputWidget.onDidBlurEditorText(()=>this._onDidBlur.fire()));let m=Z.parse(o);this.inputModel=l.createModel("",null,m,!0),this._register(this.inputModel),this.inputWidget.setModel(this.inputModel),this._register(this.inputWidget.onDidPaste(()=>this.setValue(this.getValue()))),this._register(this.inputWidget.onDidFocusEditorText(()=>{s.focusContextKey&&s.focusContextKey.set(!0),this.stylingContainer.classList.add("synthetic-focus")})),this._register(this.inputWidget.onDidBlurEditorText(()=>{s.focusContextKey&&s.focusContextKey.set(!1),this.stylingContainer.classList.remove("synthetic-focus")})),this._register(z.chain(this.inputWidget.onKeyDown,x=>x.filter(E=>E.keyCode===3))(x=>{x.preventDefault()},this)),this._register(z.chain(this.inputWidget.onKeyDown,x=>x.filter(E=>E.keyCode===18&&(Pe?E.metaKey:E.ctrlKey)))(()=>this._onShouldFocusResults.fire(),this));let b=this.getValue(),v=this.inputWidget.getModel();v&&this._register(v.onDidChangeContent(()=>{let x=this.getValue();this.placeholderText.style.visibility=x?"hidden":"visible",b.trim()!==x.trim()&&(this._onInputDidChange.fire(void 0),b=x)}));let S={provideResults:n.provideResults,sortKey:n.sortKey||(x=>x),triggerCharacters:n.triggerCharacters||[],wordDefinition:n.wordDefinition?hh(n.wordDefinition):void 0,alwaysShowSuggestions:!!n.alwaysShowSuggestions};this.setValue(s.value||""),this._register(c.completionProvider.register({scheme:m.scheme,pattern:"**/"+m.path,hasAccessToAllModels:!0},{_debugDisplayName:`suggestEnabledInput/${e}`,triggerCharacters:S.triggerCharacters,provideCompletionItems:(x,E,w)=>{let P=x.getValue(),R=E.column-1,O=0,M=0;if(S.wordDefinition){let K=gh(E.column,S.wordDefinition,P,0);O=K?.word.length??0,M=K?K.startColumn-1:0}else M=P.lastIndexOf(" ",R-1)+1,O=R-M;return!S.alwaysShowSuggestions&&O>0&&S.triggerCharacters?.indexOf(P[M])===-1?{suggestions:[]}:{suggestions:n.provideResults(P).map(K=>{let $,Q;return typeof K=="string"?$=K:($=K.label,Q=K),{label:$,insertText:$,range:D.fromPositions(E.delta(0,-O),E),sortText:S.sortKey($),kind:17,...Q}})}}})),this.style(s.styleOverrides||{})}getScopedContextKeyService(e){}updateAriaLabel(e){this.inputWidget.updateOptions({ariaLabel:e})}setValue(e){e=e.replace(/\s/g," ");let t=this.inputModel.getFullModelRange();this.inputWidget.executeEdits("suggestEnabledInput.setValue",[mo.replace(t,e)]),this.inputWidget.setScrollTop(0),this.inputWidget.setPosition(new F(1,e.length+1))}getValue(){return this.inputWidget.getValue()}style(e){this.stylingContainer.style.backgroundColor=ne(e.inputBackground??vc),this.stylingContainer.style.color=ne(e.inputForeground??td),this.placeholderText.style.color=ne(e.inputPlaceholderForeground??w4),this.stylingContainer.style.borderWidth="1px",this.stylingContainer.style.borderStyle="solid",this.stylingContainer.style.borderColor=Nh(e.inputBorder??Za,"transparent");let t=this.stylingContainer.getElementsByClassName("cursor")[0];t&&(t.style.backgroundColor=ne(e.inputForeground??td))}focus(e){this.inputWidget.focus(),e&&this.inputWidget.getValue()&&this.selectAll()}onHide(){this.inputWidget.onHide()}layout(e){this.inputWidget.layout(e),this.placeholderText.style.width=`${e.width-2}px`}selectAll(){this.inputWidget.setSelection(new D(1,1,1,this.getValue().length+1))}};$c=_([y(6,we),y(7,Bi),y(8,Ne),y(9,no),y(10,Ge)],$c);var AC=class extends $c{history;constructor({id:e,parent:t,ariaLabel:n,suggestionProvider:i,resourceHandle:o,suggestOptions:s,history:a},l,d,c,p,h){super(e,t,i,n,o,s,l,d,c,p,h),this.history=new Nf(a,100)}addToHistory(){let e=this.getValue();e&&e!==this.getCurrentValue()&&this.history.add(e)}getHistory(){return this.history.getHistory()}showNextValue(){this.history.has(this.getValue())||this.addToHistory();let e=this.getNextValue();e&&(e=e===this.getValue()?this.getNextValue():e),this.setValue(e??"")}showPreviousValue(){this.history.has(this.getValue())||this.addToHistory();let e=this.getPreviousValue();e&&(e=e===this.getValue()?this.getPreviousValue():e),e&&(this.setValue(e),this.inputWidget.setPosition({lineNumber:0,column:0}))}clearHistory(){this.history.clear()}getCurrentValue(){let e=this.history.current();return e||(e=this.history.last(),this.history.next()),e}getPreviousValue(){return this.history.previous()||this.history.first()}getNextValue(){return this.history.next()}};AC=_([y(1,we),y(2,Bi),y(3,Ne),y(4,no),y(5,Ge)],AC);var JR=class extends AC{historyContext;constructor(e,t,n,i,o,s){super(e,t,n,i,o,s);let{historyNavigationBackwardsEnablement:a,historyNavigationForwardsEnablement:l}=this.historyContext;this._register(this.inputWidget.onDidChangeCursorPosition(({position:d})=>{let c=this.inputWidget._getViewModel(),p=c.getLineCount(),h=c.getLineLength(p)+1,g=c.coordinatesConverter.convertModelPositionToViewPosition(d);a.set(g.lineNumber===1&&g.column===1),l.set(g.lineNumber===p&&g.column===h)}))}getScopedContextKeyService(e){let t=this._register(e.createScoped(this.element));return this.historyContext=this._register(HI(t,this)),t}};JR=_([y(1,we),y(2,Bi),y(3,Ne),y(4,no),y(5,Ge)],JR);A3(".suggest-input-container");function uee(r){return{fontSize:13,lineHeight:20,wordWrap:"off",scrollbar:{vertical:"hidden"},roundedSelection:!1,guides:{indentation:!1},cursorWidth:1,fontFamily:SL,ariaLabel:r||"",snippetSuggestions:"none",suggest:{filterGraceful:!1,showIcons:!1},autoClosingBrackets:"never"}}var NC=C("settings.headerForeground",{light:"#444444",dark:"#e7e7e7",hcDark:"#ffffff",hcLight:"#292929"},u("headerForeground","The foreground color for a section header or active title.")),LV=C("settings.settingsHeaderHoverForeground",ve(NC,.7),u("settingsHeaderHoverForeground","The foreground color for a section header or hovered title.")),lWn=C("settings.modifiedItemIndicator",{light:new H(new et(102,175,224)),dark:new H(new et(12,125,157)),hcDark:new H(new et(0,73,122)),hcLight:new H(new et(102,175,224))},u("modifiedItemForeground","The color of the modified setting indicator.")),N3=C("settings.headerBorder",vL,u("settingsHeaderBorder","The color of the header container border.")),e0=C("settings.sashBorder",vL,u("settingsSashBorder","The color of the Settings editor splitview sash border.")),t0=C("settings.dropdownBackground",Qu,u("settingsDropdownBackground","Settings editor dropdown background.")),n0=C("settings.dropdownForeground",Wh,u("settingsDropdownForeground","Settings editor dropdown foreground.")),i0=C("settings.dropdownBorder",Vh,u("settingsDropdownBorder","Settings editor dropdown border.")),o0=C("settings.dropdownListBorder",Fh,u("settingsDropdownListBorder","Settings editor dropdown list border. This surrounds the options and separates the options from the description.")),dWn=C("settings.checkboxBackground",WT,u("settingsCheckboxBackground","Settings editor checkbox background.")),cWn=C("settings.checkboxForeground",VT,u("settingsCheckboxForeground","Settings editor checkbox foreground.")),uWn=C("settings.checkboxBorder",HT,u("settingsCheckboxBorder","Settings editor checkbox border.")),Iv=C("settings.textInputBackground",vc,u("textInputBoxBackground","Settings editor text input box background.")),Sv=C("settings.textInputForeground",td,u("textInputBoxForeground","Settings editor text input box foreground.")),Fd=C("settings.textInputBorder",Za,u("textInputBoxBorder","Settings editor text input box border.")),F3=C("settings.numberInputBackground",vc,u("numberInputBoxBackground","Settings editor number input box background.")),B3=C("settings.numberInputForeground",td,u("numberInputBoxForeground","Settings editor number input box foreground.")),W3=C("settings.numberInputBorder",Za,u("numberInputBoxBorder","Settings editor number input box border.")),pWn=C("settings.focusedRowBackground",{dark:ve(nd,.6),light:ve(nd,.6),hcDark:null,hcLight:null},u("focusedRowBackground","The background color of a settings row when focused.")),hWn=C("settings.rowHoverBackground",{dark:ve(nd,.3),light:ve(nd,.3),hcDark:null,hcLight:null},u("settings.rowHoverBackground","The background color of a settings row when hovered.")),gWn=C("settings.focusedRowBorder",Fi,u("settings.focusedRowBorder","The color of the row's top and bottom border when the row is focused."));function V3(r,e,t){return O2({debugName:()=>`Configuration Key "${r}"`},n=>t.onDidChangeConfiguration(i=>{i.affectsConfiguration(r)&&n(i)}),()=>t.getValue(r)??e)}var GWn=j("accessibilitySignalService"),jWn=Symbol("AcknowledgeDocCommentsToken"),r0=class extends N{constructor(t,n,i){super();this.configurationService=t;this.accessibilityService=n;this.telemetryService=i}_serviceBrand;sounds=new Map;screenReaderAttached=Xp(this,this.accessibilityService.onDidChangeScreenReaderOptimized,()=>this.accessibilityService.isScreenReaderOptimized());sentTelemetry=new Set;getEnabledState(t,n,i){return new ox(this._signalEnabledState.get({signal:t,userGesture:n,modality:i}))}async playSignal(t,n={}){let i=n.modality==="announcement"||n.modality===void 0,o=t.announcementMessage;i&&this.isAnnouncementEnabled(t,n.userGesture)&&o&&this.accessibilityService.status(o),(n.modality==="sound"||n.modality===void 0)&&this.isSoundEnabled(t,n.userGesture)&&(this.sendSignalTelemetry(t,n.source),await this.playSound(t.sound.getSound(),n.allowManyInParallel))}async playSignals(t){for(let s of t)this.sendSignalTelemetry("signal"in s?s.signal:s,"source"in s?s.source:void 0);let n=t.map(s=>"signal"in s?s.signal:s),i=n.filter(s=>this.isAnnouncementEnabled(s)).map(s=>s.announcementMessage);i.length&&this.accessibilityService.status(i.join(", "));let o=new Set(n.filter(s=>this.isSoundEnabled(s)).map(s=>s.sound.getSound()));await Promise.all(Array.from(o).map(s=>this.playSound(s,!0)))}sendSignalTelemetry(t,n){let i=this.accessibilityService.isScreenReaderOptimized(),o=t.name+(n?`::${n}`:"")+(i?"{screenReaderOptimized}":"");this.sentTelemetry.has(o)||this.getVolumeInPercent()===0||(this.sentTelemetry.add(o),this.telemetryService.publicLog2("signal.played",{signal:t.name,source:n??"",isScreenReaderOptimized:i}))}getVolumeInPercent(){let t=this.configurationService.getValue("accessibility.signalOptions.volume");return typeof t!="number"?50:Math.max(Math.min(t,100),0)}playingSounds=new Set;async playSound(t,n=!1){if(!n&&this.playingSounds.has(t))return;this.playingSounds.add(t);let i=qs.asBrowserUri(`vs/platform/accessibilitySignal/browser/media/${t.fileName}`).toString(!0);try{let o=this.sounds.get(i);if(o)o.volume=this.getVolumeInPercent()/100,o.currentTime=0,await o.play();else{let s=await pee(i,this.getVolumeInPercent()/100);this.sounds.set(i,s)}}catch(o){o.message.includes("play() can only be initiated by a user gesture")||console.error("Error while playing sound",o)}finally{this.playingSounds.delete(t)}}playSignalLoop(t,n){let i=!0,o=()=>{i&&this.playSignal(t,{allowManyInParallel:!0}).finally(()=>{setTimeout(()=>{i&&o()},n)})};return o(),me(()=>i=!1)}_signalConfigValue=new hu(t=>V3(t.settingsKey,{sound:"off",announcement:"off"},this.configurationService));_signalEnabledState=new hu({getCacheKey:_2},t=>_l(n=>{let i=this._signalConfigValue.get(t.signal).read(n);return!!((t.modality==="sound"||t.modality===void 0)&&H3(i.sound,()=>this.screenReaderAttached.read(n),t.userGesture)||(t.modality==="announcement"||t.modality===void 0)&&H3(i.announcement,()=>this.screenReaderAttached.read(n),t.userGesture))}).recomputeInitiallyAndOnChange(this._store));isAnnouncementEnabled(t,n){return t.announcementMessage?this._signalEnabledState.get({signal:t,userGesture:!!n,modality:"announcement"}).get():!1}isSoundEnabled(t,n){return this._signalEnabledState.get({signal:t,userGesture:!!n,modality:"sound"}).get()}onSoundEnabledChanged(t){return this.getEnabledState(t,!1).onDidChange}getDelayMs(t,n,i){if(!this.configurationService.getValue("accessibility.signalOptions.debouncePositionChanges"))return 0;let o;return t.name===Kg.errorAtPosition.name&&i==="positional"?o=this.configurationService.getValue("accessibility.signalOptions.experimental.delays.errorAtPosition"):t.name===Kg.warningAtPosition.name&&i==="positional"?o=this.configurationService.getValue("accessibility.signalOptions.experimental.delays.warningAtPosition"):o=this.configurationService.getValue("accessibility.signalOptions.experimental.delays.general"),n==="sound"?o.sound:o.announcement}};r0=_([y(0,Ge),y(1,Xi),y(2,er)],r0);function H3(r,e,t){return r==="on"||r==="always"||r==="auto"&&e()||r==="userGesture"&&t}function pee(r,e){return new Promise((t,n)=>{let i=new Audio(r);i.volume=e,i.addEventListener("ended",()=>{t(i)}),i.addEventListener("error",o=>{n(o.error)}),i.play().catch(o=>{n(o)})})}var rn=class r{constructor(e){this.fileName=e}static register(e){return new r(e.fileName)}static error=r.register({fileName:"error.mp3"});static warning=r.register({fileName:"warning.mp3"});static success=r.register({fileName:"success.mp3"});static foldedArea=r.register({fileName:"foldedAreas.mp3"});static break=r.register({fileName:"break.mp3"});static quickFixes=r.register({fileName:"quickFixes.mp3"});static taskCompleted=r.register({fileName:"taskCompleted.mp3"});static taskFailed=r.register({fileName:"taskFailed.mp3"});static terminalBell=r.register({fileName:"terminalBell.mp3"});static diffLineInserted=r.register({fileName:"diffLineInserted.mp3"});static diffLineDeleted=r.register({fileName:"diffLineDeleted.mp3"});static diffLineModified=r.register({fileName:"diffLineModified.mp3"});static chatRequestSent=r.register({fileName:"chatRequestSent.mp3"});static chatResponseReceived1=r.register({fileName:"chatResponseReceived1.mp3"});static chatResponseReceived2=r.register({fileName:"chatResponseReceived2.mp3"});static chatResponseReceived3=r.register({fileName:"chatResponseReceived3.mp3"});static chatResponseReceived4=r.register({fileName:"chatResponseReceived4.mp3"});static clear=r.register({fileName:"clear.mp3"});static save=r.register({fileName:"save.mp3"});static format=r.register({fileName:"format.mp3"});static voiceRecordingStarted=r.register({fileName:"voiceRecordingStarted.mp3"});static voiceRecordingStopped=r.register({fileName:"voiceRecordingStopped.mp3"});static progress=r.register({fileName:"progress.mp3"})},kV=class{constructor(e){this.randomOneOf=e}getSound(e=!1){if(e||this.randomOneOf.length===1)return this.randomOneOf[0];{let t=Math.floor(Math.random()*this.randomOneOf.length);return this.randomOneOf[t]}}},Kg=class r{constructor(e,t,n,i,o,s){this.sound=e;this.name=t;this.legacySoundSettingsKey=n;this.settingsKey=i;this.legacyAnnouncementSettingsKey=o;this.announcementMessage=s}static _signals=new Set;static register(e){let t=new kV("randomOneOf"in e.sound?e.sound.randomOneOf:[e.sound]),n=new r(t,e.name,e.legacySoundSettingsKey,e.settingsKey,e.legacyAnnouncementSettingsKey,e.announcementMessage);return r._signals.add(n),n}static get allAccessibilitySignals(){return[...this._signals]}static errorAtPosition=r.register({name:u("accessibilitySignals.positionHasError.name","Error at Position"),sound:rn.error,announcementMessage:u("accessibility.signals.positionHasError","Error"),settingsKey:"accessibility.signals.positionHasError",delaySettingsKey:"accessibility.signalOptions.delays.errorAtPosition"});static warningAtPosition=r.register({name:u("accessibilitySignals.positionHasWarning.name","Warning at Position"),sound:rn.warning,announcementMessage:u("accessibility.signals.positionHasWarning","Warning"),settingsKey:"accessibility.signals.positionHasWarning",delaySettingsKey:"accessibility.signalOptions.delays.warningAtPosition"});static errorOnLine=r.register({name:u("accessibilitySignals.lineHasError.name","Error on Line"),sound:rn.error,legacySoundSettingsKey:"audioCues.lineHasError",legacyAnnouncementSettingsKey:"accessibility.alert.error",announcementMessage:u("accessibility.signals.lineHasError","Error on Line"),settingsKey:"accessibility.signals.lineHasError"});static warningOnLine=r.register({name:u("accessibilitySignals.lineHasWarning.name","Warning on Line"),sound:rn.warning,legacySoundSettingsKey:"audioCues.lineHasWarning",legacyAnnouncementSettingsKey:"accessibility.alert.warning",announcementMessage:u("accessibility.signals.lineHasWarning","Warning on Line"),settingsKey:"accessibility.signals.lineHasWarning"});static foldedArea=r.register({name:u("accessibilitySignals.lineHasFoldedArea.name","Folded Area on Line"),sound:rn.foldedArea,legacySoundSettingsKey:"audioCues.lineHasFoldedArea",legacyAnnouncementSettingsKey:"accessibility.alert.foldedArea",announcementMessage:u("accessibility.signals.lineHasFoldedArea","Folded"),settingsKey:"accessibility.signals.lineHasFoldedArea"});static break=r.register({name:u("accessibilitySignals.lineHasBreakpoint.name","Breakpoint on Line"),sound:rn.break,legacySoundSettingsKey:"audioCues.lineHasBreakpoint",legacyAnnouncementSettingsKey:"accessibility.alert.breakpoint",announcementMessage:u("accessibility.signals.lineHasBreakpoint","Breakpoint"),settingsKey:"accessibility.signals.lineHasBreakpoint"});static inlineSuggestion=r.register({name:u("accessibilitySignals.lineHasInlineSuggestion.name","Inline Suggestion on Line"),sound:rn.quickFixes,legacySoundSettingsKey:"audioCues.lineHasInlineSuggestion",settingsKey:"accessibility.signals.lineHasInlineSuggestion"});static terminalQuickFix=r.register({name:u("accessibilitySignals.terminalQuickFix.name","Terminal Quick Fix"),sound:rn.quickFixes,legacySoundSettingsKey:"audioCues.terminalQuickFix",legacyAnnouncementSettingsKey:"accessibility.alert.terminalQuickFix",announcementMessage:u("accessibility.signals.terminalQuickFix","Quick Fix"),settingsKey:"accessibility.signals.terminalQuickFix"});static onDebugBreak=r.register({name:u("accessibilitySignals.onDebugBreak.name","Debugger Stopped on Breakpoint"),sound:rn.break,legacySoundSettingsKey:"audioCues.onDebugBreak",legacyAnnouncementSettingsKey:"accessibility.alert.onDebugBreak",announcementMessage:u("accessibility.signals.onDebugBreak","Breakpoint"),settingsKey:"accessibility.signals.onDebugBreak"});static noInlayHints=r.register({name:u("accessibilitySignals.noInlayHints","No Inlay Hints on Line"),sound:rn.error,legacySoundSettingsKey:"audioCues.noInlayHints",legacyAnnouncementSettingsKey:"accessibility.alert.noInlayHints",announcementMessage:u("accessibility.signals.noInlayHints","No Inlay Hints"),settingsKey:"accessibility.signals.noInlayHints"});static taskCompleted=r.register({name:u("accessibilitySignals.taskCompleted","Task Completed"),sound:rn.taskCompleted,legacySoundSettingsKey:"audioCues.taskCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.taskCompleted",announcementMessage:u("accessibility.signals.taskCompleted","Task Completed"),settingsKey:"accessibility.signals.taskCompleted"});static taskFailed=r.register({name:u("accessibilitySignals.taskFailed","Task Failed"),sound:rn.taskFailed,legacySoundSettingsKey:"audioCues.taskFailed",legacyAnnouncementSettingsKey:"accessibility.alert.taskFailed",announcementMessage:u("accessibility.signals.taskFailed","Task Failed"),settingsKey:"accessibility.signals.taskFailed"});static terminalCommandFailed=r.register({name:u("accessibilitySignals.terminalCommandFailed","Terminal Command Failed"),sound:rn.error,legacySoundSettingsKey:"audioCues.terminalCommandFailed",legacyAnnouncementSettingsKey:"accessibility.alert.terminalCommandFailed",announcementMessage:u("accessibility.signals.terminalCommandFailed","Command Failed"),settingsKey:"accessibility.signals.terminalCommandFailed"});static terminalCommandSucceeded=r.register({name:u("accessibilitySignals.terminalCommandSucceeded","Terminal Command Succeeded"),sound:rn.success,announcementMessage:u("accessibility.signals.terminalCommandSucceeded","Command Succeeded"),settingsKey:"accessibility.signals.terminalCommandSucceeded"});static terminalBell=r.register({name:u("accessibilitySignals.terminalBell","Terminal Bell"),sound:rn.terminalBell,legacySoundSettingsKey:"audioCues.terminalBell",legacyAnnouncementSettingsKey:"accessibility.alert.terminalBell",announcementMessage:u("accessibility.signals.terminalBell","Terminal Bell"),settingsKey:"accessibility.signals.terminalBell"});static notebookCellCompleted=r.register({name:u("accessibilitySignals.notebookCellCompleted","Notebook Cell Completed"),sound:rn.taskCompleted,legacySoundSettingsKey:"audioCues.notebookCellCompleted",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellCompleted",announcementMessage:u("accessibility.signals.notebookCellCompleted","Notebook Cell Completed"),settingsKey:"accessibility.signals.notebookCellCompleted"});static notebookCellFailed=r.register({name:u("accessibilitySignals.notebookCellFailed","Notebook Cell Failed"),sound:rn.taskFailed,legacySoundSettingsKey:"audioCues.notebookCellFailed",legacyAnnouncementSettingsKey:"accessibility.alert.notebookCellFailed",announcementMessage:u("accessibility.signals.notebookCellFailed","Notebook Cell Failed"),settingsKey:"accessibility.signals.notebookCellFailed"});static diffLineInserted=r.register({name:u("accessibilitySignals.diffLineInserted","Diff Line Inserted"),sound:rn.diffLineInserted,legacySoundSettingsKey:"audioCues.diffLineInserted",settingsKey:"accessibility.signals.diffLineInserted"});static diffLineDeleted=r.register({name:u("accessibilitySignals.diffLineDeleted","Diff Line Deleted"),sound:rn.diffLineDeleted,legacySoundSettingsKey:"audioCues.diffLineDeleted",settingsKey:"accessibility.signals.diffLineDeleted"});static diffLineModified=r.register({name:u("accessibilitySignals.diffLineModified","Diff Line Modified"),sound:rn.diffLineModified,legacySoundSettingsKey:"audioCues.diffLineModified",settingsKey:"accessibility.signals.diffLineModified"});static chatRequestSent=r.register({name:u("accessibilitySignals.chatRequestSent","Chat Request Sent"),sound:rn.chatRequestSent,legacySoundSettingsKey:"audioCues.chatRequestSent",legacyAnnouncementSettingsKey:"accessibility.alert.chatRequestSent",announcementMessage:u("accessibility.signals.chatRequestSent","Chat Request Sent"),settingsKey:"accessibility.signals.chatRequestSent"});static chatResponseReceived=r.register({name:u("accessibilitySignals.chatResponseReceived","Chat Response Received"),legacySoundSettingsKey:"audioCues.chatResponseReceived",sound:{randomOneOf:[rn.chatResponseReceived1,rn.chatResponseReceived2,rn.chatResponseReceived3,rn.chatResponseReceived4]},settingsKey:"accessibility.signals.chatResponseReceived"});static progress=r.register({name:u("accessibilitySignals.progress","Progress"),sound:rn.progress,legacySoundSettingsKey:"audioCues.chatResponsePending",legacyAnnouncementSettingsKey:"accessibility.alert.progress",announcementMessage:u("accessibility.signals.progress","Progress"),settingsKey:"accessibility.signals.progress"});static clear=r.register({name:u("accessibilitySignals.clear","Clear"),sound:rn.clear,legacySoundSettingsKey:"audioCues.clear",legacyAnnouncementSettingsKey:"accessibility.alert.clear",announcementMessage:u("accessibility.signals.clear","Clear"),settingsKey:"accessibility.signals.clear"});static save=r.register({name:u("accessibilitySignals.save","Save"),sound:rn.save,legacySoundSettingsKey:"audioCues.save",legacyAnnouncementSettingsKey:"accessibility.alert.save",announcementMessage:u("accessibility.signals.save","Save"),settingsKey:"accessibility.signals.save"});static format=r.register({name:u("accessibilitySignals.format","Format"),sound:rn.format,legacySoundSettingsKey:"audioCues.format",legacyAnnouncementSettingsKey:"accessibility.alert.format",announcementMessage:u("accessibility.signals.format","Format"),settingsKey:"accessibility.signals.format"});static voiceRecordingStarted=r.register({name:u("accessibilitySignals.voiceRecordingStarted","Voice Recording Started"),sound:rn.voiceRecordingStarted,legacySoundSettingsKey:"audioCues.voiceRecordingStarted",settingsKey:"accessibility.signals.voiceRecordingStarted"});static voiceRecordingStopped=r.register({name:u("accessibilitySignals.voiceRecordingStopped","Voice Recording Stopped"),sound:rn.voiceRecordingStopped,legacySoundSettingsKey:"audioCues.voiceRecordingStopped",settingsKey:"accessibility.signals.voiceRecordingStopped"})};var U3=j("speechService"),aVn=new B("hasSpeechProvider",!1,{type:"boolean",description:u("hasSpeechProvider","A speech provider is registered to the speech service.")}),lVn=new B("speechToTextInProgress",!1,{type:"boolean",description:u("speechToTextInProgress","A speech-to-text session is in progress.")}),dVn=new B("textToSpeechInProgress",!1,{type:"boolean",description:u("textToSpeechInProgress","A text-to-speech session is in progress.")});var z3={"da-DK":{name:u("speechLanguage.da-DK","Danish (Denmark)")},"de-DE":{name:u("speechLanguage.de-DE","German (Germany)")},"en-AU":{name:u("speechLanguage.en-AU","English (Australia)")},"en-CA":{name:u("speechLanguage.en-CA","English (Canada)")},"en-GB":{name:u("speechLanguage.en-GB","English (United Kingdom)")},"en-IE":{name:u("speechLanguage.en-IE","English (Ireland)")},"en-IN":{name:u("speechLanguage.en-IN","English (India)")},"en-NZ":{name:u("speechLanguage.en-NZ","English (New Zealand)")},"en-US":{name:u("speechLanguage.en-US","English (United States)")},"es-ES":{name:u("speechLanguage.es-ES","Spanish (Spain)")},"es-MX":{name:u("speechLanguage.es-MX","Spanish (Mexico)")},"fr-CA":{name:u("speechLanguage.fr-CA","French (Canada)")},"fr-FR":{name:u("speechLanguage.fr-FR","French (France)")},"hi-IN":{name:u("speechLanguage.hi-IN","Hindi (India)")},"it-IT":{name:u("speechLanguage.it-IT","Italian (Italy)")},"ja-JP":{name:u("speechLanguage.ja-JP","Japanese (Japan)")},"ko-KR":{name:u("speechLanguage.ko-KR","Korean (South Korea)")},"nl-NL":{name:u("speechLanguage.nl-NL","Dutch (Netherlands)")},"pt-PT":{name:u("speechLanguage.pt-PT","Portuguese (Portugal)")},"pt-BR":{name:u("speechLanguage.pt-BR","Portuguese (Brazil)")},"ru-RU":{name:u("speechLanguage.ru-RU","Russian (Russia)")},"sv-SE":{name:u("speechLanguage.sv-SE","Swedish (Sweden)")},"tr-TR":{name:u("speechLanguage.tr-TR","Turkish (T\xFCrkiye)")},"zh-CN":{name:u("speechLanguage.zh-CN","Chinese (Simplified, China)")},"zh-HK":{name:u("speechLanguage.zh-HK","Chinese (Traditional, Hong Kong)")},"zh-TW":{name:u("speechLanguage.zh-TW","Chinese (Traditional, Taiwan)")}};var RVn=new B("accessibilityHelpIsShown",!1,!0),MVn=new B("accessibleViewIsShown",!1,!0),OVn=new B("accessibleViewSupportsNavigation",!1,!0),PVn=new B("accessibleViewVerbosityEnabled",!1,!0),AVn=new B("accessibleViewGoToSymbolSupported",!1,!0),NVn=new B("accessibleViewOnLastLine",!1,!0),FVn=new B("accessibleViewCurrentProviderId",void 0,void 0),BVn=new B("accessibleViewInCodeBlock",void 0,void 0),WVn=new B("accessibleViewContainsCodeBlocks",void 0,void 0),VVn=new B("accessibleViewHasUnassignedKeybindings",void 0,void 0),HVn=new B("accessibleViewHasAssignedKeybindings",void 0,void 0);var xs={type:"boolean",default:!0,tags:["accessibility"]},K3=Object.freeze({id:"accessibility",title:u("accessibilityConfigurationTitle","Accessibility"),type:"object"}),Kn={type:"string",enum:["auto","on","off"],default:"auto",enumDescriptions:[u("sound.enabled.auto","Enable sound when a screen reader is attached."),u("sound.enabled.on","Enable sound."),u("sound.enabled.off","Disable sound.")],tags:["accessibility"]},Eo={type:"object",tags:["accessibility"],additionalProperties:!1,default:{sound:"auto",announcement:"auto"}},To={type:"string",enum:["auto","off"],default:"auto",enumDescriptions:[u("announcement.enabled.auto","Enable announcement, will only play when in screen reader optimized mode."),u("announcement.enabled.off","Disable announcement.")],tags:["accessibility"]},Gg={type:"object",tags:["accessibility"],additionalProperties:!1,default:{sound:"auto"}},UVn={...K3,scope:4,properties:{"accessibility.verbosity.terminal":{description:u("verbosity.terminal.description","Provide information about how to access the terminal accessibility help menu when the terminal is focused."),...xs},"accessibility.verbosity.diffEditor":{description:u("verbosity.diffEditor.description","Provide information about how to navigate changes in the diff editor when it is focused."),...xs},"accessibility.verbosity.panelChat":{description:u("verbosity.chat.description","Provide information about how to access the chat help menu when the chat input is focused."),...xs},"accessibility.verbosity.inlineChat":{description:u("verbosity.interactiveEditor.description","Provide information about how to access the inline editor chat accessibility help menu and alert with hints that describe how to use the feature when the input is focused."),...xs},"accessibility.verbosity.inlineCompletions":{description:u("verbosity.inlineCompletions.description","Provide information about how to access the inline completions hover and Accessible View."),...xs},"accessibility.verbosity.keybindingsEditor":{description:u("verbosity.keybindingsEditor.description","Provide information about how to change a keybinding in the keybindings editor when a row is focused."),...xs},"accessibility.verbosity.notebook":{description:u("verbosity.notebook","Provide information about how to focus the cell container or inner editor when a notebook cell is focused."),...xs},"accessibility.verbosity.hover":{description:u("verbosity.hover","Provide information about how to open the hover in an Accessible View."),...xs},"accessibility.verbosity.notification":{description:u("verbosity.notification","Provide information about how to open the notification in an Accessible View."),...xs},"accessibility.verbosity.emptyEditorHint":{description:u("verbosity.emptyEditorHint","Provide information about relevant actions in an empty text editor."),...xs},"accessibility.verbosity.replInputHint":{description:u("verbosity.replInputHint","Provide information about relevant actions For the Repl input."),...xs},"accessibility.verbosity.comments":{description:u("verbosity.comments","Provide information about actions that can be taken in the comment widget or in a file which contains comments."),...xs},"accessibility.verbosity.diffEditorActive":{description:u("verbosity.diffEditorActive","Indicate when a diff editor becomes the active editor."),...xs},"accessibility.verbosity.debug":{description:u("verbosity.debug","Provide information about how to access the debug console accessibility help dialog when the debug console or run and debug viewlet is focused. Note that a reload of the window is required for this to take effect."),...xs},"accessibility.accessibleView.closeOnKeyPress":{markdownDescription:u("terminal.integrated.accessibleView.closeOnKeyPress","On keypress, close the Accessible View and focus the element from which it was invoked."),type:"boolean",default:!0},"accessibility.signalOptions.volume":{description:u("accessibility.signalOptions.volume","The volume of the sounds in percent (0-100)."),type:"number",minimum:0,maximum:100,default:70,tags:["accessibility"]},"accessibility.signalOptions.debouncePositionChanges":{description:u("accessibility.signalOptions.debouncePositionChanges","Whether or not position changes should be debounced"),type:"boolean",default:!1,tags:["accessibility"]},"accessibility.signalOptions.experimental.delays.general":{type:"object",description:"Delays for all signals besides error and warning at position",additionalProperties:!1,properties:{announcement:{description:u("accessibility.signalOptions.delays.general.announcement","The delay in milliseconds before an announcement is made."),type:"number",minimum:0,default:3e3},sound:{description:u("accessibility.signalOptions.delays.general.sound","The delay in milliseconds before a sound is played."),type:"number",minimum:0,default:400}},tags:["accessibility"]},"accessibility.signalOptions.experimental.delays.warningAtPosition":{type:"object",additionalProperties:!1,properties:{announcement:{description:u("accessibility.signalOptions.delays.warningAtPosition.announcement","The delay in milliseconds before an announcement is made when there's a warning at the position."),type:"number",minimum:0,default:3e3},sound:{description:u("accessibility.signalOptions.delays.warningAtPosition.sound","The delay in milliseconds before a sound is played when there's a warning at the position."),type:"number",minimum:0,default:1e3}},tags:["accessibility"]},"accessibility.signalOptions.experimental.delays.errorAtPosition":{type:"object",additionalProperties:!1,properties:{announcement:{description:u("accessibility.signalOptions.delays.errorAtPosition.announcement","The delay in milliseconds before an announcement is made when there's an error at the position."),type:"number",minimum:0,default:3e3},sound:{description:u("accessibility.signalOptions.delays.errorAtPosition.sound","The delay in milliseconds before a sound is played when there's an error at the position."),type:"number",minimum:0,default:1e3}},tags:["accessibility"]},"accessibility.signals.lineHasBreakpoint":{...Eo,description:u("accessibility.signals.lineHasBreakpoint","Plays a signal - sound (audio cue) and/or announcement (alert) - when the active line has a breakpoint."),properties:{sound:{description:u("accessibility.signals.lineHasBreakpoint.sound","Plays a sound when the active line has a breakpoint."),...Kn},announcement:{description:u("accessibility.signals.lineHasBreakpoint.announcement","Announces when the active line has a breakpoint."),...To}}},"accessibility.signals.lineHasInlineSuggestion":{...Gg,description:u("accessibility.signals.lineHasInlineSuggestion","Plays a sound / audio cue when the active line has an inline suggestion."),properties:{sound:{description:u("accessibility.signals.lineHasInlineSuggestion.sound","Plays a sound when the active line has an inline suggestion."),...Kn,default:"off"}}},"accessibility.signals.lineHasError":{...Eo,description:u("accessibility.signals.lineHasError","Plays a signal - sound (audio cue) and/or announcement (alert) - when the active line has an error."),properties:{sound:{description:u("accessibility.signals.lineHasError.sound","Plays a sound when the active line has an error."),...Kn},announcement:{description:u("accessibility.signals.lineHasError.announcement","Announces when the active line has an error."),...To,default:"off"}}},"accessibility.signals.lineHasFoldedArea":{...Eo,description:u("accessibility.signals.lineHasFoldedArea","Plays a signal - sound (audio cue) and/or announcement (alert) - the active line has a folded area that can be unfolded."),properties:{sound:{description:u("accessibility.signals.lineHasFoldedArea.sound","Plays a sound when the active line has a folded area that can be unfolded."),...Kn,default:"off"},announcement:{description:u("accessibility.signals.lineHasFoldedArea.announcement","Announces when the active line has a folded area that can be unfolded."),...To}}},"accessibility.signals.lineHasWarning":{...Eo,description:u("accessibility.signals.lineHasWarning","Plays a signal - sound (audio cue) and/or announcement (alert) - when the active line has a warning."),properties:{sound:{description:u("accessibility.signals.lineHasWarning.sound","Plays a sound when the active line has a warning."),...Kn},announcement:{description:u("accessibility.signals.lineHasWarning.announcement","Announces when the active line has a warning."),...To,default:"off"}}},"accessibility.signals.positionHasError":{...Eo,description:u("accessibility.signals.positionHasError","Plays a signal - sound (audio cue) and/or announcement (alert) - when the active line has a warning."),properties:{sound:{description:u("accessibility.signals.positionHasError.sound","Plays a sound when the active line has a warning."),...Kn},announcement:{description:u("accessibility.signals.positionHasError.announcement","Announces when the active line has a warning."),...To,default:"on"}}},"accessibility.signals.positionHasWarning":{...Eo,description:u("accessibility.signals.positionHasWarning","Plays a signal - sound (audio cue) and/or announcement (alert) - when the active line has a warning."),properties:{sound:{description:u("accessibility.signals.positionHasWarning.sound","Plays a sound when the active line has a warning."),...Kn},announcement:{description:u("accessibility.signals.positionHasWarning.announcement","Announces when the active line has a warning."),...To,default:"on"}}},"accessibility.signals.onDebugBreak":{...Eo,description:u("accessibility.signals.onDebugBreak","Plays a signal - sound (audio cue) and/or announcement (alert) - when the debugger stopped on a breakpoint."),properties:{sound:{description:u("accessibility.signals.onDebugBreak.sound","Plays a sound when the debugger stopped on a breakpoint."),...Kn},announcement:{description:u("accessibility.signals.onDebugBreak.announcement","Announces when the debugger stopped on a breakpoint."),...To}}},"accessibility.signals.noInlayHints":{...Eo,description:u("accessibility.signals.noInlayHints","Plays a signal - sound (audio cue) and/or announcement (alert) - when trying to read a line with inlay hints that has no inlay hints."),properties:{sound:{description:u("accessibility.signals.noInlayHints.sound","Plays a sound when trying to read a line with inlay hints that has no inlay hints."),...Kn},announcement:{description:u("accessibility.signals.noInlayHints.announcement","Announces when trying to read a line with inlay hints that has no inlay hints."),...To}}},"accessibility.signals.taskCompleted":{...Eo,description:u("accessibility.signals.taskCompleted","Plays a signal - sound (audio cue) and/or announcement (alert) - when a task is completed."),properties:{sound:{description:u("accessibility.signals.taskCompleted.sound","Plays a sound when a task is completed."),...Kn},announcement:{description:u("accessibility.signals.taskCompleted.announcement","Announces when a task is completed."),...To}}},"accessibility.signals.taskFailed":{...Eo,description:u("accessibility.signals.taskFailed","Plays a signal - sound (audio cue) and/or announcement (alert) - when a task fails (non-zero exit code)."),properties:{sound:{description:u("accessibility.signals.taskFailed.sound","Plays a sound when a task fails (non-zero exit code)."),...Kn},announcement:{description:u("accessibility.signals.taskFailed.announcement","Announces when a task fails (non-zero exit code)."),...To}}},"accessibility.signals.terminalCommandFailed":{...Eo,description:u("accessibility.signals.terminalCommandFailed","Plays a signal - sound (audio cue) and/or announcement (alert) - when a terminal command fails (non-zero exit code) or when a command with such an exit code is navigated to in the accessible view."),properties:{sound:{description:u("accessibility.signals.terminalCommandFailed.sound","Plays a sound when a terminal command fails (non-zero exit code) or when a command with such an exit code is navigated to in the accessible view."),...Kn},announcement:{description:u("accessibility.signals.terminalCommandFailed.announcement","Announces when a terminal command fails (non-zero exit code) or when a command with such an exit code is navigated to in the accessible view."),...To}}},"accessibility.signals.terminalCommandSucceeded":{...Eo,description:u("accessibility.signals.terminalCommandSucceeded","Plays a signal - sound (audio cue) and/or announcement (alert) - when a terminal command succeeds (zero exit code) or when a command with such an exit code is navigated to in the accessible view."),properties:{sound:{description:u("accessibility.signals.terminalCommandSucceeded.sound","Plays a sound when a terminal command succeeds (zero exit code) or when a command with such an exit code is navigated to in the accessible view."),...Kn},announcement:{description:u("accessibility.signals.terminalCommandSucceeded.announcement","Announces when a terminal command succeeds (zero exit code) or when a command with such an exit code is navigated to in the accessible view."),...To}}},"accessibility.signals.terminalQuickFix":{...Eo,description:u("accessibility.signals.terminalQuickFix","Plays a signal - sound (audio cue) and/or announcement (alert) - when terminal Quick Fixes are available."),properties:{sound:{description:u("accessibility.signals.terminalQuickFix.sound","Plays a sound when terminal Quick Fixes are available."),...Kn},announcement:{description:u("accessibility.signals.terminalQuickFix.announcement","Announces when terminal Quick Fixes are available."),...To}}},"accessibility.signals.terminalBell":{...Eo,description:u("accessibility.signals.terminalBell","Plays a signal - sound (audio cue) and/or announcement (alert) - when the terminal bell is ringing."),properties:{sound:{description:u("accessibility.signals.terminalBell.sound","Plays a sound when the terminal bell is ringing."),...Kn},announcement:{description:u("accessibility.signals.terminalBell.announcement","Announces when the terminal bell is ringing."),...To}}},"accessibility.signals.diffLineInserted":{...Gg,description:u("accessibility.signals.diffLineInserted","Plays a sound / audio cue when the focus moves to an inserted line in Accessible Diff Viewer mode or to the next/previous change."),properties:{sound:{description:u("accessibility.signals.sound","Plays a sound when the focus moves to an inserted line in Accessible Diff Viewer mode or to the next/previous change."),...Kn}}},"accessibility.signals.diffLineModified":{...Gg,description:u("accessibility.signals.diffLineModified","Plays a sound / audio cue when the focus moves to an modified line in Accessible Diff Viewer mode or to the next/previous change."),properties:{sound:{description:u("accessibility.signals.diffLineModified.sound","Plays a sound when the focus moves to a modified line in Accessible Diff Viewer mode or to the next/previous change."),...Kn}}},"accessibility.signals.diffLineDeleted":{...Gg,description:u("accessibility.signals.diffLineDeleted","Plays a sound / audio cue when the focus moves to an deleted line in Accessible Diff Viewer mode or to the next/previous change."),properties:{sound:{description:u("accessibility.signals.diffLineDeleted.sound","Plays a sound when the focus moves to an deleted line in Accessible Diff Viewer mode or to the next/previous change."),...Kn}}},"accessibility.signals.notebookCellCompleted":{...Eo,description:u("accessibility.signals.notebookCellCompleted","Plays a signal - sound (audio cue) and/or announcement (alert) - when a notebook cell execution is successfully completed."),properties:{sound:{description:u("accessibility.signals.notebookCellCompleted.sound","Plays a sound when a notebook cell execution is successfully completed."),...Kn},announcement:{description:u("accessibility.signals.notebookCellCompleted.announcement","Announces when a notebook cell execution is successfully completed."),...To}}},"accessibility.signals.notebookCellFailed":{...Eo,description:u("accessibility.signals.notebookCellFailed","Plays a signal - sound (audio cue) and/or announcement (alert) - when a notebook cell execution fails."),properties:{sound:{description:u("accessibility.signals.notebookCellFailed.sound","Plays a sound when a notebook cell execution fails."),...Kn},announcement:{description:u("accessibility.signals.notebookCellFailed.announcement","Announces when a notebook cell execution fails."),...To}}},"accessibility.signals.chatRequestSent":{...Eo,description:u("accessibility.signals.chatRequestSent","Plays a signal - sound (audio cue) and/or announcement (alert) - when a chat request is made."),properties:{sound:{description:u("accessibility.signals.chatRequestSent.sound","Plays a sound when a chat request is made."),...Kn},announcement:{description:u("accessibility.signals.chatRequestSent.announcement","Announces when a chat request is made."),...To}}},"accessibility.signals.progress":{...Eo,description:u("accessibility.signals.progress","Plays a signal - sound (audio cue) and/or announcement (alert) - on loop while progress is occurring."),properties:{sound:{description:u("accessibility.signals.progress.sound","Plays a sound on loop while progress is occurring."),...Kn},announcement:{description:u("accessibility.signals.progress.announcement","Alerts on loop while progress is occurring."),...To}}},"accessibility.signals.chatResponseReceived":{...Gg,description:u("accessibility.signals.chatResponseReceived","Plays a sound / audio cue when the response has been received."),properties:{sound:{description:u("accessibility.signals.chatResponseReceived.sound","Plays a sound on loop while the response has been received."),...Kn}}},"accessibility.signals.voiceRecordingStarted":{...Gg,description:u("accessibility.signals.voiceRecordingStarted","Plays a sound / audio cue when the voice recording has started."),properties:{sound:{description:u("accessibility.signals.voiceRecordingStarted.sound","Plays a sound when the voice recording has started."),...Kn}},default:{sound:"on"}},"accessibility.signals.voiceRecordingStopped":{...Gg,description:u("accessibility.signals.voiceRecordingStopped","Plays a sound / audio cue when the voice recording has stopped."),properties:{sound:{description:u("accessibility.signals.voiceRecordingStopped.sound","Plays a sound when the voice recording has stopped."),...Kn,default:"off"}}},"accessibility.signals.clear":{...Eo,description:u("accessibility.signals.clear","Plays a signal - sound (audio cue) and/or announcement (alert) - when a feature is cleared (for example, the terminal, Debug Console, or Output channel)."),properties:{sound:{description:u("accessibility.signals.clear.sound","Plays a sound when a feature is cleared."),...Kn},announcement:{description:u("accessibility.signals.clear.announcement","Announces when a feature is cleared."),...To}}},"accessibility.signals.save":{type:"object",tags:["accessibility"],additionalProperties:!1,markdownDescription:u("accessibility.signals.save","Plays a signal - sound (audio cue) and/or announcement (alert) - when a file is saved."),properties:{sound:{description:u("accessibility.signals.save.sound","Plays a sound when a file is saved."),type:"string",enum:["userGesture","always","never"],default:"never",enumDescriptions:[u("accessibility.signals.save.sound.userGesture","Plays the sound when a user explicitly saves a file."),u("accessibility.signals.save.sound.always","Plays the sound whenever a file is saved, including auto save."),u("accessibility.signals.save.sound.never","Never plays the sound.")]},announcement:{description:u("accessibility.signals.save.announcement","Announces when a file is saved."),type:"string",enum:["userGesture","always","never"],default:"never",enumDescriptions:[u("accessibility.signals.save.announcement.userGesture","Announces when a user explicitly saves a file."),u("accessibility.signals.save.announcement.always","Announces whenever a file is saved, including auto save."),u("accessibility.signals.save.announcement.never","Never plays the announcement.")]}},default:{sound:"never",announcement:"never"}},"accessibility.signals.format":{type:"object",tags:["accessibility"],additionalProperties:!1,markdownDescription:u("accessibility.signals.format","Plays a signal - sound (audio cue) and/or announcement (alert) - when a file or notebook is formatted."),properties:{sound:{description:u("accessibility.signals.format.sound","Plays a sound when a file or notebook is formatted."),type:"string",enum:["userGesture","always","never"],default:"never",enumDescriptions:[u("accessibility.signals.format.userGesture","Plays the sound when a user explicitly formats a file."),u("accessibility.signals.format.always","Plays the sound whenever a file is formatted, including if it is set to format on save, type, or, paste, or run of a cell."),u("accessibility.signals.format.never","Never plays the sound.")]},announcement:{description:u("accessibility.signals.format.announcement","Announces when a file or notebook is formatted."),type:"string",enum:["userGesture","always","never"],default:"never",enumDescriptions:[u("accessibility.signals.format.announcement.userGesture","Announces when a user explicitly formats a file."),u("accessibility.signals.format.announcement.always","Announces whenever a file is formatted, including if it is set to format on save, type, or, paste, or run of a cell."),u("accessibility.signals.format.announcement.never","Never announces.")]}},default:{sound:"never",announcement:"never"}},"accessibility.underlineLinks":{type:"boolean",description:u("accessibility.underlineLinks","Controls whether links should be underlined in the workbench."),default:!1},"accessibility.debugWatchVariableAnnouncements":{type:"boolean",description:u("accessibility.debugWatchVariableAnnouncements","Controls whether variable changes should be announced in the debug watch view."),default:!0}}};var hee=1200,s0=class extends N{constructor(t,n){super();this.speechService=t;this.productService=n;this._register(z.runAndSubscribe(t.onDidChangeHasSpeechProvider,()=>this.updateConfiguration()))}static ID="workbench.contrib.dynamicSpeechAccessibilityConfiguration";updateConfiguration(){if(!this.speechService.hasSpeechProvider)return;let t=this.getLanguages(),n=Object.keys(t).sort((o,s)=>t[o].name.localeCompare(t[s].name));Te.as(In.Configuration).registerConfiguration({...K3,properties:{"accessibility.voice.speechTimeout":{markdownDescription:u("voice.speechTimeout","The duration in milliseconds that voice speech recognition remains active after you stop speaking. For example in a chat session, the transcribed text is submitted automatically after the timeout is met. Set to `0` to disable this feature."),type:"number",default:hee,minimum:0,tags:["accessibility"]},"accessibility.voice.speechLanguage":{markdownDescription:u("voice.speechLanguage","The language that text-to-speech and speech-to-text should use. Select `auto` to use the configured display language if possible. Note that not all display languages maybe supported by speech recognition and synthesizers."),type:"string",enum:n,default:"auto",tags:["accessibility"],enumDescriptions:n.map(o=>t[o].name),enumItemLabels:n.map(o=>t[o].name)},"accessibility.voice.autoSynthesize":{type:"string",enum:["on","off","auto"],enumDescriptions:[u("accessibility.voice.autoSynthesize.on","Enable the feature. When a screen reader is enabled, note that this will disable aria updates."),u("accessibility.voice.autoSynthesize.off","Disable the feature."),u("accessibility.voice.autoSynthesize.auto","When a screen reader is detected, disable the feature. Otherwise, enable the feature.")],markdownDescription:u("autoSynthesize","Whether a textual response should automatically be read out aloud when speech was used as input. For example in a chat session, a response is automatically synthesized when voice was used as chat request."),default:this.productService.quality!=="stable"?"auto":"off",tags:["accessibility"]}}})}getLanguages(){return{auto:{name:u("speechLanguage.auto","Auto (Use Display Language)")},...z3}}};s0=_([y(0,U3),y(1,vs)],s0);Te.as(ll.ConfigurationMigration).registerConfigurationMigrations([{key:"audioCues.volume",migrateFn:(r,e)=>[["accessibility.signalOptions.volume",{value:r}],["audioCues.volume",{value:void 0}]]}]);Te.as(ll.ConfigurationMigration).registerConfigurationMigrations([{key:"audioCues.debouncePositionChanges",migrateFn:r=>[["accessibility.signalOptions.debouncePositionChanges",{value:r}],["audioCues.debouncePositionChanges",{value:void 0}]]}]);Te.as(ll.ConfigurationMigration).registerConfigurationMigrations([{key:"accessibility.signalOptions",migrateFn:(r,e)=>{let t=RV(e,"general"),n=RV(e,"errorAtPosition"),i=RV(e,"warningAtPosition"),o=gee(e),s=mee(e),a=[];return o&&a.push(["accessibility.signalOptions.volume",{value:o}]),t&&a.push(["accessibility.signalOptions.experimental.delays.general",{value:t}]),n&&a.push(["accessibility.signalOptions.experimental.delays.errorAtPosition",{value:n}]),i&&a.push(["accessibility.signalOptions.experimental.delays.warningAtPosition",{value:i}]),s&&a.push(["accessibility.signalOptions.debouncePositionChanges",{value:s}]),a.push(["accessibility.signalOptions",{value:void 0}]),a}}]);Te.as(ll.ConfigurationMigration).registerConfigurationMigrations([{key:"accessibility.signals.sounds.volume",migrateFn:r=>[["accessibility.signalOptions.volume",{value:r}],["accessibility.signals.sounds.volume",{value:void 0}]]}]);Te.as(ll.ConfigurationMigration).registerConfigurationMigrations([{key:"accessibility.signals.debouncePositionChanges",migrateFn:r=>[["accessibility.signalOptions.debouncePositionChanges",{value:r}],["accessibility.signals.debouncePositionChanges",{value:void 0}]]}]);function RV(r,e){return r(`accessibility.signalOptions.experimental.delays.${e}`)||r("accessibility.signalOptions")?.["experimental.delays"]?.[`${e}`]||r("accessibility.signalOptions")?.delays?.[`${e}`]}function gee(r){return r("accessibility.signalOptions.volume")||r("accessibility.signalOptions")?.volume||r("accessibility.signals.sounds.volume")||r("audioCues.volume")}function mee(r){return r("accessibility.signalOptions.debouncePositionChanges")||r("accessibility.signalOptions")?.debouncePositionChanges||r("accessibility.signals.debouncePositionChanges")||r("audioCues.debouncePositionChanges")}Te.as(ll.ConfigurationMigration).registerConfigurationMigrations([{key:"accessibility.voice.autoSynthesize",migrateFn:r=>{let e;if(r===!0)e="on";else if(r===!1)e="off";else return[];return[["accessibility.voice.autoSynthesize",{value:e}]]}}]);Te.as(ll.ConfigurationMigration).registerConfigurationMigrations([{key:"accessibility.signals.chatResponsePending",migrateFn:(r,e)=>[["accessibility.signals.progress",{value:r}],["accessibility.signals.chatResponsePending",{value:void 0}]]}]);Te.as(ll.ConfigurationMigration).registerConfigurationMigrations(Kg.allAccessibilitySignals.map(r=>r.legacySoundSettingsKey?{key:r.legacySoundSettingsKey,migrateFn:(e,t)=>{let n=[],i=r.legacyAnnouncementSettingsKey,o;return i&&(o=t(i)??void 0,o!==void 0&&typeof o!="string"&&(o=o?"auto":"off")),n.push([`${r.legacySoundSettingsKey}`,{value:void 0}]),n.push([`${r.settingsKey}`,{value:o!==void 0?{announcement:o,sound:e}:{sound:e}}]),n}}:void 0).filter(Pi));Te.as(ll.ConfigurationMigration).registerConfigurationMigrations(Kg.allAccessibilitySignals.filter(r=>!!r.legacyAnnouncementSettingsKey&&!!r.legacySoundSettingsKey).map(r=>({key:r.legacyAnnouncementSettingsKey,migrateFn:(e,t)=>{let n=[],i=t(r.settingsKey)?.sound||t(r.legacySoundSettingsKey);return e!==void 0&&typeof e!="string"&&(e=e?"auto":"off"),n.push([`${r.settingsKey}`,{value:e!==void 0?{announcement:e,sound:i}:{sound:i}}]),n.push([`${r.legacyAnnouncementSettingsKey}`,{value:void 0}]),n.push([`${r.legacySoundSettingsKey}`,{value:void 0}]),n}})));function fee(r,e,t){let n=new Set;return Li(...r.map((i,o)=>Li(i.onDidFocus(()=>{t?.(o,"focus"),n.size||e(!0),n.add(o)}),i.onDidBlur(()=>{t?.(o,"blur"),n.delete(o),n.size||e(!1)}))))}var MV=new B("navigableContainerFocused",!1),xa=class{constructor(e,t,n){this.logService=t;this.configurationService=n;this.focused=MV.bindTo(e),xa.INSTANCE=this}static ID="workbench.contrib.navigableContainerManager";static INSTANCE;containers=new Set;lastContainer;focused;dispose(){this.containers.clear(),this.focused.reset(),xa.INSTANCE=void 0}get debugEnabled(){return this.configurationService.getValue("workbench.navigibleContainer.enableDebug")}log(e,...t){this.debugEnabled&&this.logService.debug(e,...t)}static register(e){let t=this.INSTANCE;return t?(t.containers.add(e),t.log("NavigableContainerManager.register",e.name),Li(fee(e.focusNotifiers,n=>{n?(t.log("NavigableContainerManager.focus",e.name),t.focused.set(!0),t.lastContainer=e):(t.log("NavigableContainerManager.blur",e.name,t.lastContainer?.name),t.lastContainer===e&&(t.focused.set(!1),t.lastContainer=void 0))},(n,i)=>{t.log("NavigableContainerManager.partFocusChange",e.name,n,i)}),me(()=>{t.containers.delete(e),t.log("NavigableContainerManager.unregister",e.name,t.lastContainer?.name),t.lastContainer===e&&(t.focused.set(!1),t.lastContainer=void 0)}))):N.None}static getActive(){return this.INSTANCE?.lastContainer}};xa=_([y(0,Ne),y(1,Vt),y(2,Ge)],xa);function a0(r){return xa.register(r)}TS(xa.ID,xa,ga.BlockStartup);Sn.registerCommandAndKeybindingRule({id:"widgetNavigation.focusPrevious",weight:200,when:oe.and(MV,oe.or(fB?.negate(),c9)),primary:2064,handler:()=>{xa.getActive()?.focusPreviousWidget()}});Sn.registerCommandAndKeybindingRule({id:"widgetNavigation.focusNext",weight:200,when:oe.and(MV,oe.or(fB?.negate(),u9)),primary:2066,handler:()=>{xa.getActive()?.focusNextWidget()}});var wi=ie,Ln=class extends pb{constructor(t,n,i,o,s,a,l,d,c,p,h,g,f,m){super(Ln.ID,t,n,i,g);this.keybindingsService=o;this.contextMenuService=s;this.keybindingEditingService=a;this.contextKeyService=l;this.notificationService=d;this.clipboardService=c;this.instantiationService=p;this.editorService=h;this.configurationService=f;this.accessibilityService=m;this.delayedFiltering=new Vn(300),this._register(o.onDidUpdateKeybindings(()=>this.render(!!this.keybindingFocusContextKey.get()))),this.keybindingsEditorContextKey=oi.bindTo(this.contextKeyService),this.searchFocusContextKey=xb.bindTo(this.contextKeyService),this.keybindingFocusContextKey=va.bindTo(this.contextKeyService),this.searchHistoryDelayer=new Vn(500),this.recordKeysAction=new un(RD,u("recordKeysLabel","Record Keys"),Ae.asClassName(F8)),this.recordKeysAction.checked=!1,this.sortByPrecedenceAction=new un(MD,u("sortByPrecedeneLabel","Sort by Precedence (Highest first)"),Ae.asClassName(B8)),this.sortByPrecedenceAction.checked=!1,this.overflowWidgetsDomNode=wi(".keybindings-overflow-widgets-container.monaco-editor")}static ID="workbench.editor.keybindings";_onDefineWhenExpression=this._register(new T);onDefineWhenExpression=this._onDefineWhenExpression.event;_onRejectWhenExpression=this._register(new T);onRejectWhenExpression=this._onRejectWhenExpression.event;_onAcceptWhenExpression=this._register(new T);onAcceptWhenExpression=this._onAcceptWhenExpression.event;_onLayout=this._register(new T);onLayout=this._onLayout.event;keybindingsEditorModel=null;headerContainer;actionsContainer;searchWidget;searchHistoryDelayer;overlayContainer;defineKeybindingWidget;unAssignedKeybindingItemToRevealAndFocus=null;tableEntries=[];keybindingsTableContainer;keybindingsTable;dimension=null;delayedFiltering;latestEmptyFilters=[];keybindingsEditorContextKey;keybindingFocusContextKey;searchFocusContextKey;sortByPrecedenceAction;recordKeysAction;ariaLabelElement;overflowWidgetsDomNode;create(t){super.create(t),this._register(a0({name:"keybindingsEditor",focusNotifiers:[this],focusNextWidget:()=>{this.searchWidget.hasFocus()&&this.focusKeybindings()},focusPreviousWidget:()=>{this.searchWidget.hasFocus()||this.focusSearch()}}))}createEditor(t){let n=q(t,wi("div",{class:"keybindings-editor"}));this.createAriaLabelElement(n),this.createOverlayContainer(n),this.createHeader(n),this.createBody(n)}setInput(t,n,i,o){return this.keybindingsEditorContextKey.set(!0),super.setInput(t,n,i,o).then(()=>this.render(!!(n&&n.preserveFocus)))}clearInput(){super.clearInput(),this.keybindingsEditorContextKey.reset(),this.keybindingFocusContextKey.reset()}layout(t){this.dimension=t,this.layoutSearchWidget(t),this.overlayContainer.style.width=t.width+"px",this.overlayContainer.style.height=t.height+"px",this.defineKeybindingWidget.layout(this.dimension),this.layoutKeybindingsTable(),this._onLayout.fire()}focus(){super.focus();let t=this.activeKeybindingEntry;t?this.selectEntry(t):li||this.searchWidget.focus()}get activeKeybindingEntry(){let t=this.keybindingsTable.getFocusedElements()[0];return t&&t.templateId===Fc?t:null}async defineKeybinding(t,n){this.selectEntry(t),this.showOverlayContainer();try{let i=await this.defineKeybindingWidget.define();i&&await this.updateKeybinding(t,i,t.keybindingItem.when,n)}catch(i){this.onKeybindingEditingError(i)}finally{this.hideOverlayContainer(),this.selectEntry(t)}}defineWhenExpression(t){t.keybindingItem.keybinding&&(this.selectEntry(t),this._onDefineWhenExpression.fire(t))}rejectWhenExpression(t){this._onRejectWhenExpression.fire(t)}acceptWhenExpression(t){this._onAcceptWhenExpression.fire(t)}async updateKeybinding(t,n,i,o){((t.keybindingItem.keybinding?t.keybindingItem.keybinding.getUserSettingsLabel():"")!==n||t.keybindingItem.when!==i)&&(o?await this.keybindingEditingService.addKeybinding(t.keybindingItem.keybindingItem,n,i||void 0):await this.keybindingEditingService.editKeybinding(t.keybindingItem.keybindingItem,n,i||void 0),t.keybindingItem.keybinding||(this.unAssignedKeybindingItemToRevealAndFocus=t))}async removeKeybinding(t){if(this.selectEntry(t),t.keybindingItem.keybinding)try{await this.keybindingEditingService.removeKeybinding(t.keybindingItem.keybindingItem),this.focus()}catch(n){this.onKeybindingEditingError(n),this.selectEntry(t)}}async resetKeybinding(t){this.selectEntry(t);try{await this.keybindingEditingService.resetKeybinding(t.keybindingItem.keybindingItem),t.keybindingItem.keybinding||(this.unAssignedKeybindingItemToRevealAndFocus=t),this.selectEntry(t)}catch(n){this.onKeybindingEditingError(n),this.selectEntry(t)}}async copyKeybinding(t){this.selectEntry(t);let n={key:t.keybindingItem.keybinding&&t.keybindingItem.keybinding.getUserSettingsLabel()||"",command:t.keybindingItem.command};t.keybindingItem.when&&(n.when=t.keybindingItem.when),await this.clipboardService.writeText(JSON.stringify(n,null,"  "))}async copyKeybindingCommand(t){this.selectEntry(t),await this.clipboardService.writeText(t.keybindingItem.command)}async copyKeybindingCommandTitle(t){this.selectEntry(t),await this.clipboardService.writeText(t.keybindingItem.commandLabel)}focusSearch(){this.searchWidget.focus()}search(t){this.focusSearch(),this.searchWidget.setValue(t),this.selectEntry(0)}clearSearchResults(){this.searchWidget.clear()}showSimilarKeybindings(t){let n=`"${t.keybindingItem.keybinding.getAriaLabel()}"`;n!==this.searchWidget.getValue()&&this.searchWidget.setValue(n)}createAriaLabelElement(t){this.ariaLabelElement=q(t,ie("")),this.ariaLabelElement.setAttribute("id","keybindings-editor-aria-label-element"),this.ariaLabelElement.setAttribute("aria-live","assertive")}createOverlayContainer(t){this.overlayContainer=q(t,wi(".overlay-container")),this.overlayContainer.style.position="absolute",this.overlayContainer.style.zIndex="40",this.defineKeybindingWidget=this._register(this.instantiationService.createInstance(ba,this.overlayContainer)),this._register(this.defineKeybindingWidget.onDidChange(n=>this.defineKeybindingWidget.printExisting(this.keybindingsEditorModel.fetch(`"${n}"`).length))),this._register(this.defineKeybindingWidget.onShowExistingKeybidings(n=>this.searchWidget.setValue(`"${n}"`))),this.hideOverlayContainer()}showOverlayContainer(){this.overlayContainer.style.display="block"}hideOverlayContainer(){this.overlayContainer.style.display="none"}createHeader(t){this.headerContainer=q(t,wi(".keybindings-header"));let n=u("SearchKeybindings.FullTextSearchPlaceholder","Type to search in keybindings"),i=u("SearchKeybindings.KeybindingsSearchPlaceholder","Recording Keys. Press Escape to exit"),o=new un(kD,u("clearInput","Clear Keybindings Search Input"),Ae.asClassName(vD),!1,async()=>this.clearSearchResults()),s=q(this.headerContainer,wi(".search-container"));this.searchWidget=this._register(this.instantiationService.createInstance(bg,s,{ariaLabel:n,placeholder:n,focusKey:this.searchFocusContextKey,ariaLabelledBy:"keybindings-editor-aria-label-element",recordEnter:!0,quoteRecordedKeys:!0,history:this.getMemento(0,0).searchHistory||[],inputBoxStyles:Bc({inputBorder:Fd})})),this._register(this.searchWidget.onDidChange(c=>{o.enabled=!!c,this.delayedFiltering.trigger(()=>this.filterKeybindings()),this.updateSearchOptions()})),this._register(this.searchWidget.onEscape(()=>this.recordKeysAction.checked=!1)),this.actionsContainer=q(s,ie(".keybindings-search-actions-container"));let a=this.createRecordingBadge(this.actionsContainer);this._register(this.sortByPrecedenceAction.onDidChange(c=>{c.checked!==void 0&&this.renderKeybindingsEntries(!1),this.updateSearchOptions()})),this._register(this.recordKeysAction.onDidChange(c=>{c.checked!==void 0&&(a.classList.toggle("disabled",!c.checked),c.checked?(this.searchWidget.inputBox.setPlaceHolder(i),this.searchWidget.inputBox.setAriaLabel(i),this.searchWidget.startRecordingKeys(),this.searchWidget.focus()):(this.searchWidget.inputBox.setPlaceHolder(n),this.searchWidget.inputBox.setAriaLabel(n),this.searchWidget.stopRecordingKeys(),this.searchWidget.focus()),this.updateSearchOptions())}));let l=[this.recordKeysAction,this.sortByPrecedenceAction,o],d=this._register(new Rb(this.actionsContainer,this.contextMenuService,{actionViewItemProvider:(c,p)=>{if(c.id===this.sortByPrecedenceAction.id||c.id===this.recordKeysAction.id)return new Ww(null,c,{...p,keybinding:this.keybindingsService.lookupKeybinding(c.id)?.getLabel(),toggleStyles:HF})},getKeyBinding:c=>this.keybindingsService.lookupKeybinding(c.id)}));d.setActions(l),this._register(this.keybindingsService.onDidUpdateKeybindings(()=>d.setActions(l)))}updateSearchOptions(){let t=this.input;t&&(t.searchOptions={searchValue:this.searchWidget.getValue(),recordKeybindings:!!this.recordKeysAction.checked,sortByPrecedence:!!this.sortByPrecedenceAction.checked})}createRecordingBadge(t){let n=q(t,ie(".recording-badge.monaco-count-badge.long.disabled"));return n.textContent=u("recording","Recording Keys"),n.style.backgroundColor=ne(sa),n.style.color=ne(Gu),n.style.border=`1px solid ${ne(Ie)}`,n}layoutSearchWidget(t){this.searchWidget.layout(t),this.headerContainer.classList.toggle("small",t.width<400),this.searchWidget.inputBox.inputElement.style.paddingRight=`${Wl(this.actionsContainer)+12}px`}createBody(t){let n=q(t,wi(".keybindings-body"));this.createTable(n)}createTable(t){this.keybindingsTableContainer=q(t,wi(".keybindings-table-container")),this.keybindingsTable=this._register(this.instantiationService.createInstance(Lb,"KeybindingsEditor",this.keybindingsTableContainer,new OV,[{label:"",tooltip:"",weight:0,minimumWidth:40,maximumWidth:40,templateId:Lp.TEMPLATE_ID,project(n){return n}},{label:u("command","Command"),tooltip:"",weight:.3,templateId:kp.TEMPLATE_ID,project(n){return n}},{label:u("keybinding","Keybinding"),tooltip:"",weight:.2,templateId:l0.TEMPLATE_ID,project(n){return n}},{label:u("when","When"),tooltip:"",weight:.35,templateId:Mp.TEMPLATE_ID,project(n){return n}},{label:u("source","Source"),tooltip:"",weight:.15,templateId:Rp.TEMPLATE_ID,project(n){return n}}],[this.instantiationService.createInstance(Lp,this),this.instantiationService.createInstance(kp),this.instantiationService.createInstance(l0),this.instantiationService.createInstance(Mp,this),this.instantiationService.createInstance(Rp)],{identityProvider:{getId:n=>n.id},horizontalScrolling:!1,accessibilityProvider:new PV(this.configurationService),keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:n=>n.keybindingItem.commandLabel||n.keybindingItem.command},overrideStyles:{listBackground:$t},multipleSelectionSupport:!1,setRowLineHeight:!1,openOnSingleClick:!1,transformOptimization:!1})),this._register(this.keybindingsTable.onContextMenu(n=>this.onContextMenu(n))),this._register(this.keybindingsTable.onDidChangeFocus(n=>this.onFocusChange())),this._register(this.keybindingsTable.onDidFocus(()=>{this.keybindingsTable.getHTMLElement().classList.add("focused"),this.onFocusChange()})),this._register(this.keybindingsTable.onDidBlur(()=>{this.keybindingsTable.getHTMLElement().classList.remove("focused"),this.keybindingFocusContextKey.reset()})),this._register(this.keybindingsTable.onDidOpen(n=>{if(n.browserEvent?.defaultPrevented)return;let i=this.activeKeybindingEntry;i&&this.defineKeybinding(i,!1)})),q(this.keybindingsTableContainer,this.overflowWidgetsDomNode)}async render(t){if(this.input){let n=this.input;this.keybindingsEditorModel=await n.resolve(),await this.keybindingsEditorModel.resolve(this.getActionsLabels()),this.renderKeybindingsEntries(!1,t),n.searchOptions?(this.recordKeysAction.checked=n.searchOptions.recordKeybindings,this.sortByPrecedenceAction.checked=n.searchOptions.sortByPrecedence,this.searchWidget.setValue(n.searchOptions.searchValue)):this.updateSearchOptions()}}getActionsLabels(){let t=new Map;for(let n of ms.getEditorActions())t.set(n.id,n.label);for(let n of go.getMenuItems(Je.CommandPalette))if(Th(n)){let i=typeof n.command.title=="string"?n.command.title:n.command.title.value,o=n.command.category?typeof n.command.category=="string"?n.command.category:n.command.category.value:void 0;t.set(n.command.id,o?`${o}: ${i}`:i)}return t}filterKeybindings(){this.renderKeybindingsEntries(this.searchWidget.hasFocus()),this.searchHistoryDelayer.trigger(()=>{this.searchWidget.inputBox.addToHistory(),this.getMemento(0,0).searchHistory=this.searchWidget.inputBox.getHistory(),this.saveState()})}clearKeyboardShortcutSearchHistory(){this.searchWidget.inputBox.clearHistory(),this.getMemento(0,0).searchHistory=this.searchWidget.inputBox.getHistory(),this.saveState()}renderKeybindingsEntries(t,n){if(this.keybindingsEditorModel){let i=this.searchWidget.getValue(),o=this.keybindingsEditorModel.fetch(i,this.sortByPrecedenceAction.checked);this.accessibilityService.alert(u("foundResults","{0} results",o.length)),this.ariaLabelElement.setAttribute("aria-label",this.getAriaLabel(o)),o.length===0&&this.latestEmptyFilters.push(i);let s=this.keybindingsTable.getSelection()[0];if(this.tableEntries=o,this.keybindingsTable.splice(0,this.keybindingsTable.length,this.tableEntries),this.layoutKeybindingsTable(),t)this.keybindingsTable.setSelection([]),this.keybindingsTable.setFocus([]);else if(this.unAssignedKeybindingItemToRevealAndFocus){let a=this.getNewIndexOfUnassignedKeybinding(this.unAssignedKeybindingItemToRevealAndFocus);a!==-1&&(this.keybindingsTable.reveal(a,.2),this.selectEntry(a)),this.unAssignedKeybindingItemToRevealAndFocus=null}else s!==-1&&s<this.tableEntries.length?this.selectEntry(s,n):this.editorService.activeEditorPane===this&&!n&&this.focus()}}getAriaLabel(t){return this.sortByPrecedenceAction.checked?u("show sorted keybindings","Showing {0} Keybindings in precedence order",t.length):u("show keybindings","Showing {0} Keybindings in alphabetical order",t.length)}layoutKeybindingsTable(){if(!this.dimension)return;let t=this.dimension.height-(Ii(this.headerContainer).height+12);this.keybindingsTableContainer.style.height=`${t}px`,this.keybindingsTable.layout(t)}getIndexOf(t){let n=this.tableEntries.indexOf(t);if(n===-1){for(let i=0;i<this.tableEntries.length;i++)if(this.tableEntries[i].id===t.id)return i}return n}getNewIndexOfUnassignedKeybinding(t){for(let n=0;n<this.tableEntries.length;n++){let i=this.tableEntries[n];if(i.templateId===Fc&&i.keybindingItem.command===t.keybindingItem.command)return n}return-1}selectEntry(t,n=!0){let i=typeof t=="number"?t:this.getIndexOf(t);i!==-1&&i<this.keybindingsTable.length&&(n&&(this.keybindingsTable.domFocus(),this.keybindingsTable.setFocus([i])),this.keybindingsTable.setSelection([i]))}focusKeybindings(){this.keybindingsTable.domFocus();let t=this.keybindingsTable.getFocus();this.keybindingsTable.setFocus([t.length?t[0]:0])}selectKeybinding(t){this.selectEntry(t)}recordSearchKeys(){this.recordKeysAction.checked=!0}toggleSortByPrecedence(){this.sortByPrecedenceAction.checked=!this.sortByPrecedenceAction.checked}onContextMenu(t){if(t.element&&t.element.templateId===Fc){let n=t.element;this.selectEntry(n),this.contextMenuService.showContextMenu({getAnchor:()=>t.anchor,getActions:()=>[this.createCopyAction(n),this.createCopyCommandAction(n),this.createCopyCommandTitleAction(n),new ei,...n.keybindingItem.keybinding?[this.createDefineKeybindingAction(n),this.createAddKeybindingAction(n)]:[this.createDefineKeybindingAction(n)],new ei,this.createRemoveAction(n),this.createResetAction(n),new ei,this.createDefineWhenExpressionAction(n),new ei,this.createShowConflictsAction(n)]})}}onFocusChange(){this.keybindingFocusContextKey.reset();let t=this.keybindingsTable.getFocusedElements()[0];t&&t.templateId===Fc&&this.keybindingFocusContextKey.set(!0)}createDefineKeybindingAction(t){return{label:t.keybindingItem.keybinding?u("changeLabel","Change Keybinding..."):u("addLabel","Add Keybinding..."),enabled:!0,id:Eb,run:()=>this.defineKeybinding(t,!1)}}createAddKeybindingAction(t){return{label:u("addLabel","Add Keybinding..."),enabled:!0,id:OD,run:()=>this.defineKeybinding(t,!0)}}createDefineWhenExpressionAction(t){return{label:u("editWhen","Change When Expression"),enabled:!!t.keybindingItem.keybinding,id:PD,run:()=>this.defineWhenExpression(t)}}createRemoveAction(t){return{label:u("removeLabel","Remove Keybinding"),enabled:!!t.keybindingItem.keybinding,id:AD,run:()=>this.removeKeybinding(t)}}createResetAction(t){return{label:u("resetLabel","Reset Keybinding"),enabled:!t.keybindingItem.keybindingItem.isDefault,id:ND,run:()=>this.resetKeybinding(t)}}createShowConflictsAction(t){return{label:u("showSameKeybindings","Show Same Keybindings"),enabled:!!t.keybindingItem.keybinding,id:VD,run:()=>this.showSimilarKeybindings(t)}}createCopyAction(t){return{label:u("copyLabel","Copy"),enabled:!0,id:FD,run:()=>this.copyKeybinding(t)}}createCopyCommandAction(t){return{label:u("copyCommandLabel","Copy Command ID"),enabled:!0,id:BD,run:()=>this.copyKeybindingCommand(t)}}createCopyCommandTitleAction(t){return{label:u("copyCommandTitleLabel","Copy Command Title"),enabled:!!t.keybindingItem.commandLabel,id:WD,run:()=>this.copyKeybindingCommandTitle(t)}}onKeybindingEditingError(t){this.notificationService.error(typeof t=="string"?t:u("error","Error '{0}' while editing the keybinding. Please open 'keybindings.json' file and check for errors.",`${t}`))}};Ln=_([y(1,er),y(2,Ci),y(3,_n),y(4,or),y(5,YF),y(6,Ne),y(7,sl),y(8,ma),y(9,we),y(10,vt),y(11,Io),y(12,Ge),y(13,Xi)],Ln);var OV=class{headerRowHeight=30;getHeight(e){if(e.templateId===Fc){let t=e.keybindingItem.commandLabel&&e.commandIdMatches,n=!!e.commandDefaultLabelMatches,i=!!e.extensionIdMatches;if(t&&n)return 60;if(i||t||n)return 40}return 24}},Lp=class{constructor(e,t){this.keybindingsEditor=e;this.keybindingsService=t}static TEMPLATE_ID="actions";templateId=Lp.TEMPLATE_ID;renderTemplate(e){let t=q(e,wi(".actions"));return{actionBar:new Wi(t)}}renderElement(e,t,n,i){n.actionBar.clear();let o=[];e.keybindingItem.keybinding?o.push(this.createEditAction(e)):o.push(this.createAddAction(e)),n.actionBar.push(o,{icon:!0})}createEditAction(e){let t=this.keybindingsService.lookupKeybinding(Eb);return{class:Ae.asClassName(W8),enabled:!0,id:"editKeybinding",tooltip:t?u("editKeybindingLabelWithKey","Change Keybinding {0}",`(${t.getLabel()})`):u("editKeybindingLabel","Change Keybinding"),run:()=>this.keybindingsEditor.defineKeybinding(e,!1)}}createAddAction(e){let t=this.keybindingsService.lookupKeybinding(Eb);return{class:Ae.asClassName(V8),enabled:!0,id:"addKeybinding",tooltip:t?u("addKeybindingLabelWithKey","Add Keybinding {0}",`(${t.getLabel()})`):u("addKeybindingLabel","Add Keybinding"),run:()=>this.keybindingsEditor.defineKeybinding(e,!1)}}disposeTemplate(e){e.actionBar.dispose()}};Lp=_([y(1,_n)],Lp);var kp=class{constructor(e){this._hoverService=e}static TEMPLATE_ID="commands";templateId=kp.TEMPLATE_ID;renderTemplate(e){let t=q(e,wi(".command")),n=this._hoverService.setupManagedHover(pt("mouse"),t,""),i=q(t,wi(".command-label")),o=new zr(i),s=q(t,wi(".command-default-label")),a=new zr(s),l=q(t,wi(".command-id.code")),d=new zr(l);return{commandColumn:t,commandColumnHover:n,commandLabelContainer:i,commandLabel:o,commandDefaultLabelContainer:s,commandDefaultLabel:a,commandIdLabelContainer:l,commandIdLabel:d}}renderElement(e,t,n,i){let o=e.keybindingItem,s=!!(o.commandLabel&&e.commandIdMatches),a=!!e.commandDefaultLabelMatches;n.commandColumn.classList.toggle("vertical-align-column",s||a);let l=o.commandLabel?u("title","{0} ({1})",o.commandLabel,o.command):o.command;n.commandColumn.setAttribute("aria-label",l),n.commandColumnHover.update(l),o.commandLabel?(n.commandLabelContainer.classList.remove("hide"),n.commandLabel.set(o.commandLabel,e.commandLabelMatches)):(n.commandLabelContainer.classList.add("hide"),n.commandLabel.set(void 0)),e.commandDefaultLabelMatches?(n.commandDefaultLabelContainer.classList.remove("hide"),n.commandDefaultLabel.set(o.commandDefaultLabel,e.commandDefaultLabelMatches)):(n.commandDefaultLabelContainer.classList.add("hide"),n.commandDefaultLabel.set(void 0)),e.commandIdMatches||!o.commandLabel?(n.commandIdLabelContainer.classList.remove("hide"),n.commandIdLabel.set(o.command,e.commandIdMatches)):(n.commandIdLabelContainer.classList.add("hide"),n.commandIdLabel.set(void 0))}disposeTemplate(e){e.commandColumnHover.dispose(),e.commandDefaultLabel.dispose(),e.commandIdLabel.dispose(),e.commandLabel.dispose()}};kp=_([y(0,rr)],kp);var l0=class r{static TEMPLATE_ID="keybindings";templateId=r.TEMPLATE_ID;constructor(){}renderTemplate(e){let t=q(e,wi(".keybinding"));return{keybindingLabel:new pg(q(t,wi("div.keybinding-label")),uo,FS)}}renderElement(e,t,n,i){e.keybindingItem.keybinding?n.keybindingLabel.set(e.keybindingItem.keybinding,e.keybindingMatches):n.keybindingLabel.set(void 0,void 0)}disposeTemplate(e){e.keybindingLabel.dispose()}};function bee(r,e){let t=new X;return t.add(U(r,ee.CLICK,vU(e))),t.add(U(r,ee.KEY_UP,n=>{let i=new it(n);(i.equals(10)||i.equals(3))&&(n.preventDefault(),n.stopPropagation(),e())})),t}var Rp=class{constructor(e,t){this.extensionsWorkbenchService=e;this.hoverService=t}static TEMPLATE_ID="source";templateId=Rp.TEMPLATE_ID;renderTemplate(e){let t=q(e,wi(".source")),n=this.hoverService.setupManagedHover(pt("mouse"),t,""),i=new zr(q(t,wi(".source-label"))),o=q(t,wi(".extension-container")),s=q(o,wi("a.extension-label",{tabindex:0})),a=new zr(q(o,wi(".extension-id-container.code")));return{sourceColumn:t,sourceColumnHover:n,sourceLabel:i,extensionLabel:s,extensionContainer:o,extensionId:a,disposables:new X}}renderElement(e,t,n,i){if(n.disposables.clear(),xt(e.keybindingItem.source))n.extensionContainer.classList.add("hide"),n.sourceLabel.element.classList.remove("hide"),n.sourceColumnHover.update(""),n.sourceLabel.set(e.keybindingItem.source||"-",e.sourceMatches);else{n.extensionContainer.classList.remove("hide"),n.sourceLabel.element.classList.add("hide");let o=e.keybindingItem.source,s=o.displayName??o.identifier.value;n.sourceColumnHover.update(u("extension label","Extension ({0})",s)),n.extensionLabel.textContent=s,n.disposables.add(bee(n.extensionLabel,()=>{this.extensionsWorkbenchService.open(o.identifier.value)})),e.extensionIdMatches?(n.extensionId.element.classList.remove("hide"),n.extensionId.set(o.identifier.value,e.extensionIdMatches)):(n.extensionId.element.classList.add("hide"),n.extensionId.set(void 0))}}disposeTemplate(e){e.sourceColumnHover.dispose(),e.disposables.dispose(),e.sourceLabel.dispose(),e.extensionId.dispose()}};Rp=_([y(0,qS),y(1,rr)],Rp);var FC=class extends N{input;_onDidAccept=this._register(new T);onDidAccept=this._onDidAccept.event;_onDidReject=this._register(new T);onDidReject=this._onDidReject.event;constructor(e,t,n,i){super();let o=yg.bindTo(i);this.input=this._register(n.createInstance($c,"keyboardshortcutseditor#wheninput",e,{provideResults:()=>{let s=[];for(let a of B.all())s.push({label:a.key,documentation:a.description,detail:a.type,kind:14});return s},triggerCharacters:["!"," "],wordDefinition:/[a-zA-Z.]+/,alwaysShowSuggestions:!0},"","keyboardshortcutseditor#wheninput",{focusContextKey:o,overflowWidgetsDomNode:t.overflowWidgetsDomNode})),this._register(U(this.input.element,ee.DBLCLICK,s=>qe.stop(s))),this._register(me(()=>o.reset())),this._register(t.onAcceptWhenExpression(()=>this._onDidAccept.fire(this.input.getValue()))),this._register(z.any(t.onRejectWhenExpression,this.input.onDidBlur)(()=>this._onDidReject.fire()))}layout(e){this.input.layout(e)}show(e){this.input.setValue(e),this.input.focus(!0)}};FC=_([y(2,we),y(3,Ne)],FC);var Mp=class{constructor(e,t,n){this.keybindingsEditor=e;this.hoverService=t;this.instantiationService=n}static TEMPLATE_ID="when";templateId=Mp.TEMPLATE_ID;renderTemplate(e){let t=q(e,wi(".when")),n=q(t,wi("div.when-label")),i=new zr(n),o=q(t,wi("div.when-input-container"));return{element:t,whenLabelContainer:n,whenLabel:i,whenInputContainer:o,disposables:new X}}renderElement(e,t,n,i){n.disposables.clear();let o=n.disposables.add(new X);n.disposables.add(this.keybindingsEditor.onDefineWhenExpression(s=>{if(e===s){n.element.classList.add("input-mode");let a=o.add(this.instantiationService.createInstance(FC,n.whenInputContainer,this.keybindingsEditor));a.layout(new Et(n.element.parentElement.clientWidth,18)),a.show(e.keybindingItem.when||"");let l=()=>{o.clear(),n.element.classList.remove("input-mode"),n.element.parentElement.style.paddingLeft="10px",Kt(n.whenInputContainer)};o.add(a.onDidAccept(d=>{l(),this.keybindingsEditor.updateKeybinding(e,e.keybindingItem.keybinding&&e.keybindingItem.keybinding.getUserSettingsLabel()||"",d),this.keybindingsEditor.selectKeybinding(e)})),o.add(a.onDidReject(()=>{l(),this.keybindingsEditor.selectKeybinding(e)})),n.element.parentElement.style.paddingLeft="0px"}})),n.whenLabelContainer.classList.toggle("code",!!e.keybindingItem.when),n.whenLabelContainer.classList.toggle("empty",!e.keybindingItem.when),e.keybindingItem.when?(n.whenLabel.set(e.keybindingItem.when,e.whenMatches,e.keybindingItem.when),n.disposables.add(this.hoverService.setupManagedHover(pt("mouse"),n.element,e.keybindingItem.when))):n.whenLabel.set("-")}disposeTemplate(e){e.disposables.dispose(),e.whenLabel.dispose()}};Mp=_([y(1,rr),y(2,we)],Mp);var PV=class{constructor(e){this.configurationService=e}getWidgetAriaLabel(){return u("keybindingsLabel","Keybindings")}getAriaLabel({keybindingItem:e}){let t=[e.commandLabel?e.commandLabel:e.command,e.keybinding?.getAriaLabel()||u("noKeybinding","No keybinding assigned"),e.when?e.when:u("noWhen","No when context"),xt(e.source)?e.source:e.source.description??e.source.identifier.value];if(this.configurationService.getValue("accessibility.verbosity.keybindingsEditor")){let n=u("keyboard shortcuts aria label","use space or enter to change the keybinding.");t.push(n)}return t.join(", ")}};C("keybindingTable.headerBackground",wI,"Background color for the keyboard shortcuts table header.");C("keybindingTable.rowsBackground",wI,"Background color for the keyboard shortcuts table alternating rows.");to((r,e)=>{let t=r.getColor(Ve);if(t){let p=t.transparent(.8).makeOpaque(w9(r));e.addRule(`.keybindings-editor > .keybindings-body > .keybindings-table-container .monaco-table .monaco-table-tr .monaco-table-td .code { color: ${p}; }`)}let n=r.getColor(la),i=r.getColor(Jo);if(n&&i){let p=n.transparent(.8).makeOpaque(i);e.addRule(`.keybindings-editor > .keybindings-body > .keybindings-table-container .monaco-table.focused .monaco-list-row.selected .monaco-table-tr .monaco-table-td .code { color: ${p}; }`)}let o=r.getColor(jT),s=r.getColor(GT);if(o&&s){let p=o.transparent(.8).makeOpaque(s);e.addRule(`.keybindings-editor > .keybindings-body > .keybindings-table-container .monaco-table .monaco-list-row.selected .monaco-table-tr .monaco-table-td .code { color: ${p}; }`)}let a=r.getColor(zT),l=r.getColor(UT);if(a&&l){let p=a.transparent(.8).makeOpaque(l);e.addRule(`.keybindings-editor > .keybindings-body > .keybindings-table-container .monaco-table.focused .monaco-list-row.focused .monaco-table-tr .monaco-table-td .code { color: ${p}; }`)}let d=r.getColor(TI),c=r.getColor(nd);if(d&&c){let p=d.transparent(.8).makeOpaque(c);e.addRule(`.keybindings-editor > .keybindings-body > .keybindings-table-container .monaco-table.focused .monaco-list-row:hover:not(.focused):not(.selected) .monaco-table-tr .monaco-table-td .code { color: ${p}; }`)}});var Bd=class extends un{constructor(t,n,i,o,s,a){super(t,n);this.modelService=i;this.languageService=o;this.quickInputService=s;this.preferencesService=a}static ID="workbench.action.configureLanguageBasedSettings";static LABEL=gt("configureLanguageBasedSettings","Configure Language Specific Settings...");async run(){let n=this.languageService.getSortedRegisteredLanguageNames().map(({languageName:i,languageId:o})=>{let s=u("languageDescriptionConfigured","({0})",o),a,l=this.languageService.getExtensions(o);if(l.length)a=Z.file(l[0]);else{let d=this.languageService.getFilenames(o);d.length&&(a=Z.file(d[0]))}return{label:i,iconClasses:Ec(this.modelService,this.languageService,a),description:s}});await this.quickInputService.pick(n,{placeHolder:u("pickLanguage","Select Language")}).then(i=>{if(i){let o=this.languageService.getLanguageIdByLanguageName(i.label);if(typeof o=="string")return this.preferencesService.openLanguageSpecificSettings(o)}})}};Bd=_([y(2,Bi),y(3,Lt),y(4,n_),y(5,At)],Bd);St.registerCommand({id:"_getAllSettings",handler:()=>Te.as(In.Configuration).getConfigurationProperties()});St.registerCommand("_getAllCommands",function(r){let e=r.get(_n),t=[];for(let n of ms.getEditorActions()){let i=e.lookupKeybinding(n.id);t.push({command:n.id,label:n.label,description:EO(n.metadata?.description)?n.metadata.description.value:n.metadata?.description,precondition:n.precondition?.serialize(),keybinding:i?.getLabel()??"Not set"})}for(let n of go.getMenuItems(Je.CommandPalette))if(Th(n)){let i=typeof n.command.title=="string"?n.command.title:n.command.title.value,o=n.command.category?typeof n.command.category=="string"?n.command.category:n.command.category.value:void 0,s=o?`${o}: ${i}`:i,a=EO(n.command.metadata?.description)?n.command.metadata.description.value:n.command.metadata?.description,l=e.lookupKeybinding(n.command.id);t.push({command:n.command.id,label:s,description:a,precondition:n.when?.serialize(),keybinding:l?.getLabel()??"Not set"})}return t});var G3=new class{QuickFix=new kh("quickfix");Refactor=new kh("refactor");RefactorExtract=this.Refactor.append("extract");RefactorInline=this.Refactor.append("inline");RefactorMove=this.Refactor.append("move");RefactorRewrite=this.Refactor.append("rewrite");Notebook=new kh("notebook");Source=new kh("source");SourceOrganizeImports=this.Source.append("organizeImports");SourceFixAll=this.Source.append("fixAll");SurroundWith=this.Refactor.append("surround")};var mUn=j("workspaceTrustEnablementService"),d0=j("workspaceTrustManagementService");var fUn=j("workspaceTrustRequestService");var BC=class extends On{constructor(t){super();this.label=t;this._domNode=ie(".floating-click-widget"),this._domNode.style.padding="6px 11px",this._domNode.style.borderRadius="2px",this._domNode.style.cursor="pointer",this._domNode.style.zIndex="1"}_onClick=this._register(new T);onClick=this._onClick.event;_domNode;getDomNode(){return this._domNode}render(){Kt(this._domNode),this._domNode.style.backgroundColor=Nh(Xu,ne($t)),this._domNode.style.color=Nh(EI,ne(Sr)),this._domNode.style.border=`1px solid ${ne(Ie)}`,q(this._domNode,ie("")).textContent=this.label,this.onclick(this._domNode,()=>this._onClick.fire())}},jg=class extends N{renderEmitter=new T;onDidRender=this.renderEmitter.event;menu;constructor(e,t,n){super(),this.menu=this._register(t.createMenu(e,n))}render(){let e=this._register(new X),t=()=>{if(e.clear(),!this.isVisible())return;let n=[];if(y3(this.menu,{renderShortTitle:!0,shouldForwardArgs:!0},n),n.length===0)return;let[i]=n,o=this.createWidget(i,e);e.add(o),e.add(o.onClick(()=>i.run(this.getActionArg()))),o.render()};this._register(this.menu.onDidChange(t)),t()}getActionArg(){}isVisible(){return!0}};jg=_([y(1,Ka),y(2,Ne)],jg);var c0=class extends jg{constructor(t,n,i,o){super(t.menuId,i,o);this.options=t;this.instantiationService=n;this.render()}createWidget(t,n){let i=this.instantiationService.createInstance(BC,t.label),o=i.getDomNode();return this.options.container.appendChild(o),n.add(me(()=>o.remove())),i}getActionArg(){return this.options.getActionArg()}};c0=_([y(1,we),y(2,Ka),y(3,Ne)],c0);var Wd=class extends N{constructor(t){super();this.editorService=t}_onHighlightRemoved=this._register(new T);onHighlightRemoved=this._onHighlightRemoved.event;rangeHighlightDecorationId=null;editor=null;editorDisposables=this._register(new X);removeHighlightRange(){if(this.editor&&this.rangeHighlightDecorationId){let t=this.rangeHighlightDecorationId;this.editor.changeDecorations(n=>{n.removeDecoration(t)}),this._onHighlightRemoved.fire()}this.rangeHighlightDecorationId=null}highlightRange(t,n){n=n??this.getEditor(t),Tf(n)?this.doHighlightRange(n,t):T5(n)&&Tf(n.activeCodeEditor)&&this.doHighlightRange(n.activeCodeEditor,t)}doHighlightRange(t,n){this.removeHighlightRange(),t.changeDecorations(i=>{this.rangeHighlightDecorationId=i.addDecoration(n.range,this.createRangeHighlightDecoration(n.isWholeLine))}),this.setEditor(t)}getEditor(t){let n=this.editorService.activeEditor?.resource;if(n&&yn(n,t.resource)&&Tf(this.editorService.activeTextEditorControl))return this.editorService.activeTextEditorControl}setEditor(t){this.editor!==t&&(this.editorDisposables.clear(),this.editor=t,this.editorDisposables.add(this.editor.onDidChangeCursorPosition(n=>{(n.reason===0||n.reason===3||n.reason===5||n.reason===6)&&this.removeHighlightRange()})),this.editorDisposables.add(this.editor.onDidChangeModel(()=>{this.removeHighlightRange()})),this.editorDisposables.add(this.editor.onDidDispose(()=>{this.removeHighlightRange(),this.editor=null})))}static _WHOLE_LINE_RANGE_HIGHLIGHT=Bn.register({description:"codeeditor-range-highlight-whole",stickiness:1,className:"rangeHighlight",isWholeLine:!0});static _RANGE_HIGHLIGHT=Bn.register({description:"codeeditor-range-highlight",stickiness:1,className:"rangeHighlight"});createRangeHighlightDecoration(t=!0){return t?Wd._WHOLE_LINE_RANGE_HIGHLIGHT:Wd._RANGE_HIGHLIGHT}dispose(){super.dispose(),this.editor?.getModel()&&(this.removeHighlightRange(),this.editor=null)}};Wd=_([y(0,vt)],Wd);var WC=class extends BC{constructor(t,n,i,o){super(i&&o.lookupKeybinding(i)?`${n} (${o.lookupKeybinding(i).getLabel()})`:n);this.editor=t}getId(){return"editor.overlayWidget.floatingClickWidget"}getPosition(){return{preference:1}}render(){super.render(),this.editor.addOverlayWidget(this)}dispose(){this.editor.removeOverlayWidget(this),super.dispose()}};WC=_([y(3,_n)],WC);var u0=class extends jg{constructor(t,n,i,o){super(Je.EditorContent,i,o);this.editor=t;this.instantiationService=n;this.render()}static ID="editor.contrib.floatingClickMenu";createWidget(t){return this.instantiationService.createInstance(WC,this.editor,t.label,t.id)}isVisible(){return!(this.editor instanceof xp)&&this.editor?.hasModel()&&!this.editor.getOption(62)}getActionArg(){return this.editor.getModel()?.uri}};u0=_([y(1,we),y(2,Ka),y(3,Ne)],u0);var $g=class extends N{constructor(t,n,i,o,s){super();this.editor=t;this.preferencesModel=n;this.preferencesService=i;this.configurationService=o;this.instantiationService=s;this.settingHighlighter=this._register(s.createInstance(HC,t)),this.editSettingActionRenderer=this._register(this.instantiationService.createInstance(VC,this.editor,this.preferencesModel,this.settingHighlighter)),this._register(this.editSettingActionRenderer.onUpdateSetting(({key:a,value:l,source:d})=>this.updatePreference(a,l,d))),this._register(this.editor.getModel().onDidChangeContent(()=>this.modelChangeDelayer.trigger(()=>this.onModelChanged()))),this.unsupportedSettingsRenderer=this._register(s.createInstance(UC,t,n))}settingHighlighter;editSettingActionRenderer;modelChangeDelayer=new Vn(200);associatedPreferencesModel;unsupportedSettingsRenderer;render(){this.editSettingActionRenderer.render(this.preferencesModel.settingsGroups,this.associatedPreferencesModel),this.unsupportedSettingsRenderer.render()}updatePreference(t,n,i){let o=i.overrideOf?MM(i.overrideOf.key):null,s=this.preferencesModel.uri;this.configurationService.updateValue(t,n,{overrideIdentifiers:o,resource:s},this.preferencesModel.configurationTarget).then(()=>this.onSettingUpdated(i))}onModelChanged(){this.editor.hasModel()&&this.render()}onSettingUpdated(t){this.editor.focus(),t=this.getSetting(t),t&&(this.editor.setSelection(t.valueRange),this.settingHighlighter.highlight(t,!0))}getSetting(t){let{key:n,overrideOf:i}=t;if(i){let o=this.getSetting(i);for(let s of o.overrides)if(s.key===n)return s;return}return this.preferencesModel.getPreference(n)}focusPreference(t){let n=this.getSetting(t);n?(this.settingHighlighter.highlight(n,!0),this.editor.setPosition({lineNumber:n.keyRange.startLineNumber,column:n.keyRange.startColumn})):this.settingHighlighter.clear(!0)}clearFocus(t){this.settingHighlighter.clear(!0)}editPreference(t){let n=this.getSetting(t);return!!(n&&this.editSettingActionRenderer.activateOnSetting(n))}};$g=_([y(2,At),y(3,Ge),y(4,we)],$g);var Cv=class extends $g{workspaceConfigurationRenderer;constructor(e,t,n,i,o){super(e,t,n,i,o),this.workspaceConfigurationRenderer=this._register(o.createInstance(Op,e,t))}render(){super.render(),this.workspaceConfigurationRenderer.render()}};Cv=_([y(2,At),y(3,Ge),y(4,we)],Cv);var VC=class extends N{constructor(t,n,i,o,s,a){super();this.editor=t;this.primarySettingsModel=n;this.settingHighlighter=i;this.configurationService=o;this.instantiationService=s;this.contextMenuService=a;this.editPreferenceWidgetForCursorPosition=this._register(this.instantiationService.createInstance(PS,t)),this.editPreferenceWidgetForMouseMove=this._register(this.instantiationService.createInstance(PS,t)),this.toggleEditPreferencesForMouseMoveDelayer=new Vn(75),this._register(this.editPreferenceWidgetForCursorPosition.onClick(l=>this.onEditSettingClicked(this.editPreferenceWidgetForCursorPosition,l))),this._register(this.editPreferenceWidgetForMouseMove.onClick(l=>this.onEditSettingClicked(this.editPreferenceWidgetForMouseMove,l))),this._register(this.editor.onDidChangeCursorPosition(l=>this.onPositionChanged(l))),this._register(this.editor.onMouseMove(l=>this.onMouseMoved(l))),this._register(this.editor.onDidChangeConfiguration(()=>this.onConfigurationChanged()))}editPreferenceWidgetForCursorPosition;editPreferenceWidgetForMouseMove;settingsGroups=[];associatedPreferencesModel;toggleEditPreferencesForMouseMoveDelayer;_onUpdateSetting=new T;onUpdateSetting=this._onUpdateSetting.event;render(t,n){this.editPreferenceWidgetForCursorPosition.hide(),this.editPreferenceWidgetForMouseMove.hide(),this.settingsGroups=t,this.associatedPreferencesModel=n;let i=this.getSettings(this.editor.getPosition().lineNumber);i.length&&this.showEditPreferencesWidget(this.editPreferenceWidgetForCursorPosition,i)}isDefaultSettings(){return this.primarySettingsModel instanceof J_}onConfigurationChanged(){this.editor.getOption(58)||(this.editPreferenceWidgetForCursorPosition.hide(),this.editPreferenceWidgetForMouseMove.hide())}onPositionChanged(t){this.editPreferenceWidgetForMouseMove.hide();let n=this.getSettings(t.position.lineNumber);n.length?this.showEditPreferencesWidget(this.editPreferenceWidgetForCursorPosition,n):this.editPreferenceWidgetForCursorPosition.hide()}onMouseMoved(t){let n=this.getEditPreferenceWidgetUnderMouse(t);if(n){this.onMouseOver(n);return}this.settingHighlighter.clear(),this.toggleEditPreferencesForMouseMoveDelayer.trigger(()=>this.toggleEditPreferenceWidgetForMouseMove(t))}getEditPreferenceWidgetUnderMouse(t){if(t.target.type===2){let n=t.target.position.lineNumber;if(this.editPreferenceWidgetForMouseMove.getLine()===n&&this.editPreferenceWidgetForMouseMove.isVisible())return this.editPreferenceWidgetForMouseMove;if(this.editPreferenceWidgetForCursorPosition.getLine()===n&&this.editPreferenceWidgetForCursorPosition.isVisible())return this.editPreferenceWidgetForCursorPosition}}toggleEditPreferenceWidgetForMouseMove(t){let n=t.target.position?this.getSettings(t.target.position.lineNumber):null;n&&n.length?this.showEditPreferencesWidget(this.editPreferenceWidgetForMouseMove,n):this.editPreferenceWidgetForMouseMove.hide()}showEditPreferencesWidget(t,n){let i=n[0].valueRange.startLineNumber;this.editor.getOption(58)&&this.marginFreeFromOtherDecorations(i)&&(t.show(i,u("editTtile","Edit"),n),(t===this.editPreferenceWidgetForCursorPosition?this.editPreferenceWidgetForMouseMove:this.editPreferenceWidgetForCursorPosition).hide())}marginFreeFromOtherDecorations(t){let n=this.editor.getLineDecorations(t);if(n){for(let{options:i}of n)if(i.glyphMarginClassName&&i.glyphMarginClassName.indexOf(Ae.asClassName(hg))===-1)return!1}return!0}getSettings(t){let n=this.getConfigurationsMap();return this.getSettingsAtLineNumber(t).filter(i=>{let o=n[i.key];if(o){if(o.policy&&this.configurationService.inspect(i.key).policyValue!==void 0)return!1;if(this.isDefaultSettings())return i.key!=="launch";if((o.type==="boolean"||o.enum)&&(this.primarySettingsModel.configurationTarget!==6||o.scope===4||o.scope===5))return!0}return!1})}getSettingsAtLineNumber(t){let n=0,i=[];for(let o of this.settingsGroups){if(o.range.startLineNumber>t)break;if(t>=o.range.startLineNumber&&t<=o.range.endLineNumber)for(let s of o.sections)for(let a of s.settings){if(a.range.startLineNumber>t)break;if(t>=a.range.startLineNumber&&t<=a.range.endLineNumber)if(!this.isDefaultSettings()&&a.overrides.length)for(let l of a.overrides)t>=l.range.startLineNumber&&t<=l.range.endLineNumber&&i.push({...l,index:n,groupId:o.id});else i.push({...a,index:n,groupId:o.id});n++}}return i}onMouseOver(t){this.settingHighlighter.highlight(t.preferences[0])}onEditSettingClicked(t,n){qe.stop(n.event,!0);let i=this.getSettings(t.getLine()).length===1?this.getActions(t.preferences[0],this.getConfigurationsMap()[t.preferences[0].key]):t.preferences.map(o=>new ss(`preferences.submenu.${o.key}`,o.key,this.getActions(o,this.getConfigurationsMap()[o.key])));this.contextMenuService.showContextMenu({getAnchor:()=>n.event,getActions:()=>i})}activateOnSetting(t){let n=t.keyRange.startLineNumber,i=this.getSettings(n);if(!i.length)return!1;this.editPreferenceWidgetForMouseMove.show(n,"",i);let o=this.getActions(this.editPreferenceWidgetForMouseMove.preferences[0],this.getConfigurationsMap()[this.editPreferenceWidgetForMouseMove.preferences[0].key]);return this.contextMenuService.showContextMenu({getAnchor:()=>this.toAbsoluteCoords(new F(n,1)),getActions:()=>o}),!0}toAbsoluteCoords(t){let n=this.editor.getScrolledVisiblePosition(t),i=Ii(this.editor.getDomNode()),o=i.left+n.left,s=i.top+n.top+n.height;return{x:o,y:s+10}}getConfigurationsMap(){return Te.as(In.Configuration).getConfigurationProperties()}getActions(t,n){return n.type==="boolean"?[{id:"truthyValue",label:"true",tooltip:"true",enabled:!0,run:()=>this.updateSetting(t.key,!0,t),class:void 0},{id:"falsyValue",label:"false",tooltip:"false",enabled:!0,run:()=>this.updateSetting(t.key,!1,t),class:void 0}]:n.enum?n.enum.map(i=>({id:i,label:JSON.stringify(i),tooltip:JSON.stringify(i),enabled:!0,run:()=>this.updateSetting(t.key,i,t),class:void 0})):this.getDefaultActions(t)}getDefaultActions(t){if(this.isDefaultSettings()){let n=this.associatedPreferencesModel.getPreference(t.key);return[{id:"setDefaultValue",label:n?u("replaceDefaultValue","Replace in Settings"):u("copyDefaultValue","Copy to Settings"),tooltip:n?u("replaceDefaultValue","Replace in Settings"):u("copyDefaultValue","Copy to Settings"),enabled:!0,run:()=>this.updateSetting(t.key,t.value,t),class:void 0}]}return[]}updateSetting(t,n,i){this._onUpdateSetting.fire({key:t,value:n,source:i})}};VC=_([y(3,Ge),y(4,we),y(5,or)],VC);var HC=class extends N{constructor(t,n){super();this.editor=t;this.fixedHighlighter=this._register(n.createInstance(Wd)),this.volatileHighlighter=this._register(n.createInstance(Wd))}fixedHighlighter;volatileHighlighter;highlight(t,n=!1){this.volatileHighlighter.removeHighlightRange(),this.fixedHighlighter.removeHighlightRange(),(n?this.fixedHighlighter:this.volatileHighlighter).highlightRange({range:t.valueRange,resource:this.editor.getModel().uri},this.editor),this.editor.revealLineInCenterIfOutsideViewport(t.valueRange.startLineNumber,0)}clear(t=!1){this.volatileHighlighter.removeHighlightRange(),t&&this.fixedHighlighter.removeHighlightRange()}};HC=_([y(1,we)],HC);var UC=class extends N{constructor(t,n,i,o,s,a,l,d,c,p){super();this.editor=t;this.settingsEditorModel=n;this.markerService=i;this.environmentService=o;this.configurationService=s;this.workspaceTrustManagementService=a;this.uriIdentityService=l;this.userDataProfileService=c;this.userDataProfilesService=p;this._register(this.editor.getModel().onDidChangeContent(()=>this.delayedRender())),this._register(z.filter(this.configurationService.onDidChangeConfiguration,h=>h.source===7)(()=>this.delayedRender())),this._register(d.codeActionProvider.register({pattern:n.uri.path},this)),this._register(c.onDidChangeCurrentProfile(()=>this.delayedRender()))}renderingDelayer=new Vn(200);codeActions=new bi(t=>this.uriIdentityService.extUri.getComparisonKey(t));delayedRender(){this.renderingDelayer.trigger(()=>this.render())}render(){this.codeActions.clear();let t=this.generateMarkerData();t.length?this.markerService.changeOne("UnsupportedSettingsRenderer",this.settingsEditorModel.uri,t):this.markerService.remove("UnsupportedSettingsRenderer",[this.settingsEditorModel.uri])}async provideCodeActions(t,n,i,o){let s=[],a=this.codeActions.get(t.uri);if(a)for(let[l,d]of a)l.containsRange(n)&&s.push(...d);return{actions:s,dispose:()=>{}}}generateMarkerData(){let t=[],n=Te.as(In.Configuration).getConfigurationProperties();for(let i of this.settingsEditorModel.settingsGroups)for(let o of i.sections)for(let s of o.settings){if(uc.test(s.key)){s.overrides&&this.handleOverrides(s.overrides,n,t);continue}let a=n[s.key];if(a){if(this.handlePolicyConfiguration(s,a,t))continue;switch(this.settingsEditorModel.configurationTarget){case 3:this.handleLocalUserConfiguration(s,a,t);break;case 4:this.handleRemoteUserConfiguration(s,a,t);break;case 5:this.handleWorkspaceConfiguration(s,a,t);break;case 6:this.handleWorkspaceFolderConfiguration(s,a,t);break}}else t.push(this.gemerateUnknownConfigurationMarker(s))}return t}handlePolicyConfiguration(t,n,i){return!n.policy||this.configurationService.inspect(t.key).policyValue===void 0||this.settingsEditorModel.configurationTarget===7?!1:(i.push({severity:1,tags:[1],...t.range,message:u("unsupportedPolicySetting","This setting cannot be applied because it is configured in the system policy.")}),!0)}handleOverrides(t,n,i){for(let o of t||[]){let s=n[o.key];s?s.scope!==5&&i.push({severity:1,tags:[1],...o.range,message:u("unsupportLanguageOverrideSetting","This setting cannot be applied because it is not registered as language override setting.")}):i.push(this.gemerateUnknownConfigurationMarker(o))}}handleLocalUserConfiguration(t,n,i){!this.userDataProfileService.currentProfile.isDefault&&!this.userDataProfileService.currentProfile.useDefaultFlags?.settings&&(yn(this.userDataProfilesService.defaultProfile.settingsResource,this.settingsEditorModel.uri)&&!this.configurationService.isSettingAppliedForAllProfiles(t.key)?i.push({severity:1,tags:[1],...t.range,message:u("defaultProfileSettingWhileNonDefaultActive","This setting cannot be applied while a non-default profile is active. It will be applied when the default profile is active.")}):yn(this.userDataProfileService.currentProfile.settingsResource,this.settingsEditorModel.uri)&&(n.scope===1?i.push(this.generateUnsupportedApplicationSettingMarker(t)):this.configurationService.isSettingAppliedForAllProfiles(t.key)&&i.push({severity:1,tags:[1],...t.range,message:u("allProfileSettingWhileInNonDefaultProfileSetting","This setting cannot be applied because it is configured to be applied in all profiles using setting {0}. Value from the default profile will be used instead.",Oc)}))),this.environmentService.remoteAuthority&&(n.scope===2||n.scope===6)&&i.push({severity:1,tags:[1],...t.range,message:u("unsupportedRemoteMachineSetting","This setting cannot be applied in this window. It will be applied when you open a local window.")})}handleRemoteUserConfiguration(t,n,i){n.scope===1&&i.push(this.generateUnsupportedApplicationSettingMarker(t))}handleWorkspaceConfiguration(t,n,i){if(n.scope===1&&i.push(this.generateUnsupportedApplicationSettingMarker(t)),n.scope===2&&i.push(this.generateUnsupportedMachineSettingMarker(t)),!this.workspaceTrustManagementService.isWorkspaceTrusted()&&n.restricted){let o=this.generateUntrustedSettingMarker(t);i.push(o);let s=this.generateUntrustedSettingCodeActions([o]);this.addCodeActions(o,s)}}handleWorkspaceFolderConfiguration(t,n,i){if(n.scope===1&&i.push(this.generateUnsupportedApplicationSettingMarker(t)),n.scope===2&&i.push(this.generateUnsupportedMachineSettingMarker(t)),n.scope===3&&i.push({severity:1,tags:[1],...t.range,message:u("unsupportedWindowSetting","This setting cannot be applied in this workspace. It will be applied when you open the containing workspace folder directly.")}),!this.workspaceTrustManagementService.isWorkspaceTrusted()&&n.restricted){let o=this.generateUntrustedSettingMarker(t);i.push(o);let s=this.generateUntrustedSettingCodeActions([o]);this.addCodeActions(o,s)}}generateUnsupportedApplicationSettingMarker(t){return{severity:1,tags:[1],...t.range,message:u("unsupportedApplicationSetting","This setting has an application scope and can be set only in the user settings file.")}}generateUnsupportedMachineSettingMarker(t){return{severity:1,tags:[1],...t.range,message:u("unsupportedMachineSetting","This setting can only be applied in user settings in local window or in remote settings in remote window.")}}generateUntrustedSettingMarker(t){return{severity:4,...t.range,message:u("untrustedSetting","This setting can only be applied in a trusted workspace.")}}gemerateUnknownConfigurationMarker(t){return{severity:1,tags:[1],...t.range,message:u("unknown configuration setting","Unknown Configuration Setting")}}generateUntrustedSettingCodeActions(t){return[{title:u("manage workspace trust","Manage Workspace Trust"),command:{id:"workbench.trust.manage",title:u("manage workspace trust","Manage Workspace Trust")},diagnostics:t,kind:G3.QuickFix.value}]}addCodeActions(t,n){let i=this.codeActions.get(this.settingsEditorModel.uri);i||(i=[],this.codeActions.set(this.settingsEditorModel.uri,i)),i.push([D.lift(t),n])}dispose(){this.markerService.remove("UnsupportedSettingsRenderer",[this.settingsEditorModel.uri]),this.codeActions.clear(),super.dispose()}};UC=_([y(2,aI),y(3,Hi),y(4,pa),y(5,d0),y(6,ol),y(7,no),y(8,Dr),y(9,ua)],UC);var Op=class extends N{constructor(t,n,i,o){super();this.editor=t;this.workspaceSettingsEditorModel=n;this.workspaceContextService=i;this.markerService=o;this._register(this.editor.getModel().onDidChangeContent(()=>this.renderingDelayer.trigger(()=>this.render())))}static supportedKeys=["folders","tasks","launch","extensions","settings","remoteAuthority","transient"];decorations=this.editor.createDecorationsCollection();renderingDelayer=new Vn(200);render(){let t=[];if(this.workspaceContextService.getWorkbenchState()===3&&this.workspaceSettingsEditorModel instanceof Z_){let n=[];for(let i of this.workspaceSettingsEditorModel.configurationGroups)for(let o of i.sections)for(let s of o.settings)Op.supportedKeys.includes(s.key)||t.push({severity:1,tags:[1],...s.range,message:u("unsupportedProperty","Unsupported Property")});this.decorations.set(n.map(i=>this.createDecoration(i)))}t.length?this.markerService.changeOne("WorkspaceConfigurationRenderer",this.workspaceSettingsEditorModel.uri,t):this.markerService.remove("WorkspaceConfigurationRenderer",[this.workspaceSettingsEditorModel.uri])}static _DIM_CONFIGURATION_=Bn.register({description:"dim-configuration",stickiness:1,inlineClassName:"dim-configuration"});createDecoration(t){return{range:t,options:Op._DIM_CONFIGURATION_}}dispose(){this.markerService.remove("WorkspaceConfigurationRenderer",[this.workspaceSettingsEditorModel.uri]),this.decorations.clear(),super.dispose()}};Op=_([y(2,fn),y(3,aI)],Op);var qg=class extends N{constructor(t,n,i,o){super();this.editor=t;this.instantiationService=n;this.preferencesService=i;this.workspaceContextService=o;this._createPreferencesRenderer(),this._register(this.editor.onDidChangeModel(s=>this._createPreferencesRenderer())),this._register(this.workspaceContextService.onDidChangeWorkbenchState(()=>this._createPreferencesRenderer()))}static ID="editor.contrib.settings";currentRenderer;disposables=this._register(new X);async _createPreferencesRenderer(){this.disposables.clear(),this.currentRenderer=void 0;let t=this.editor.getModel();if(t&&/\.(json|code-workspace)$/.test(t.uri.path)){let n=await this.preferencesService.createPreferencesEditorModel(t.uri);if(n instanceof yS&&this.editor.getModel())switch(this.disposables.add(n),n.configurationTarget){case 5:this.currentRenderer=this.disposables.add(this.instantiationService.createInstance(Cv,this.editor,n));break;default:this.currentRenderer=this.disposables.add(this.instantiationService.createInstance($g,this.editor,n));break}this.currentRenderer?.render()}}};qg=_([y(1,we),y(2,At),y(3,fn)],qg);var Q4n=j("IUserDataSyncMachinesService"),j3="sync.currentMachineName",vee="Safari",yee="Chrome",Iee="Edge",See="Firefox",Cee="Android";function $3(){return Ex?vee:ty?yee:Tx?Iee:fm?See:wx?Cee:r1(Ri?0:Cx)}var Vd=class extends N{constructor(t,n,i,o,s,a){super();this.storageService=i;this.userDataSyncStoreService=o;this.logService=s;this.productService=a;this.currentMachineIdPromise=SV(t,n,i)}static VERSION=1;static RESOURCE="machines";_serviceBrand;_onDidChange=this._register(new T);onDidChange=this._onDidChange.event;currentMachineIdPromise;userData=null;async getMachines(t){let n=await this.currentMachineIdPromise;return(await this.readMachinesData(t)).machines.map(o=>({...o,isCurrent:o.id===n}))}async addCurrentMachine(t){let n=await this.currentMachineIdPromise,i=await this.readMachinesData(t);i.machines.some(({id:o})=>o===n)||(i.machines.push({id:n,name:this.computeCurrentMachineName(i.machines),platform:$3()}),await this.writeMachinesData(i))}async removeCurrentMachine(t){let n=await this.currentMachineIdPromise,i=await this.readMachinesData(t),o=i.machines.filter(({id:s})=>s!==n);o.length!==i.machines.length&&(i.machines=o,await this.writeMachinesData(i))}async renameMachine(t,n,i){let o=await this.readMachinesData(i),s=o.machines.find(({id:a})=>a===t);if(s){s.name=n,await this.writeMachinesData(o);let a=await this.currentMachineIdPromise;t===a&&this.storageService.store(j3,n,-1,1)}}async setEnablements(t){let n=await this.readMachinesData();for(let[i,o]of t){let s=n.machines.find(a=>a.id===i);s&&(s.disabled=o?void 0:!0)}await this.writeMachinesData(n)}computeCurrentMachineName(t){let n=this.storageService.get(j3,-1);if(n)return n;let i=`${this.productService.embedderIdentifier?`${this.productService.embedderIdentifier} - `:""}${$3()} (${this.productService.nameShort})`,o=new RegExp(`${vi(i)}\\s#(\\d+)`),s=0;for(let a of t){let l=o.exec(a.name),d=l?parseInt(l[1]):0;s=d>s?d:s}return`${i} #${s+1}`}async readMachinesData(t){this.userData=await this.readUserData(t);let n=this.parse(this.userData);if(n.version!==Vd.VERSION)throw new Error(u("error incompatible","Cannot read machines data as the current version is incompatible. Please update {0} and try again.",this.productService.nameLong));return n}async writeMachinesData(t){let n=JSON.stringify(t),i=await this.userDataSyncStoreService.writeResource(Vd.RESOURCE,n,this.userData?.ref||null);this.userData={ref:i,content:n},this._onDidChange.fire()}async readUserData(t){if(this.userData){let n=t&&t.latest?t.latest[Vd.RESOURCE]:void 0;if(this.userData.ref===n)return this.userData;if(n===void 0&&this.userData.content===null)return this.userData}return this.userDataSyncStoreService.readResource(Vd.RESOURCE,this.userData)}parse(t){if(t.content!==null)try{return JSON.parse(t.content)}catch(n){this.logService.error(n)}return{version:Vd.VERSION,machines:[]}}};Vd=_([y(0,di),y(1,nn),y(2,Io),y(3,q3),y(4,Y3),y(5,vs)],Vd);function AV(){let r=Te.as(In.Configuration).getConfigurationProperties();return Object.keys(r).filter(e=>!!r[e].disallowSyncIgnore)}function zC(r=!1){let e=Te.as(In.Configuration).getConfigurationProperties(),t=xee(e,r),n=AV();return ai([...t,...n])}function xee(r,e){let t=new Set;for(let n in r){if(e&&r[n].source)continue;let i=xt(r[n].scope)?rz(r[n].scope):r[n].scope;(r[n].ignoreSync||i===2||i===6)&&t.add(n)}return[...t.values()]}var U5n=j("IUserDataSyncStoreManagementService"),q3=j("IUserDataSyncStoreService"),z5n=j("IUserDataSyncLocalStoreService");var p0=class extends Error{constructor(t,n,i,o){super(t);this.code=n;this.resource=i;this.operationId=o;this.name=`${this.code} (UserDataSyncError) syncResource:${this.resource||"unknown"} operationId:${this.operationId||"unknown"}`}};(e=>{function r(t){if(t instanceof e)return t;let n=/^(.+) \(UserDataSyncError\) syncResource:(.+) operationId:(.+)$/.exec(t.name);if(n&&n[1]){let i=n[2]==="unknown"?void 0:n[2],o=n[3]==="unknown"?void 0:n[3];return new e(t.message,n[1],i,o)}return new e(t.message,"Unknown")}e.toUserDataSyncError=r})(p0||={});var Yg=j("IUserDataSyncEnablementService"),X3=j("IUserDataSyncService"),K5n=j("IUserDataSyncResourceProviderService"),G5n=j("IUserDataAutoSyncService"),j5n=j("IUserDataSyncUtilService"),Y3=j("IUserDataSyncLogService");var Eee=["files.autoSave","editor.fontSize","editor.fontFamily","editor.tabSize","editor.renderWhitespace","editor.cursorStyle","editor.multiCursorModifier","editor.insertSpaces","editor.wordWrap","files.exclude","files.associations","workbench.editor.enablePreview"];function Q3(r){return{id:"commonlyUsed",label:u("commonlyUsed","Commonly Used"),settings:r?.commonlyUsed??Eee}}var h0={id:"root",label:"root",children:[{id:"editor",label:u("textEditor","Text Editor"),settings:["editor.*"],children:[{id:"editor/cursor",label:u("cursor","Cursor"),settings:["editor.cursor*"]},{id:"editor/find",label:u("find","Find"),settings:["editor.find.*"]},{id:"editor/font",label:u("font","Font"),settings:["editor.font*"]},{id:"editor/format",label:u("formatting","Formatting"),settings:["editor.format*"]},{id:"editor/diffEditor",label:u("diffEditor","Diff Editor"),settings:["diffEditor.*"]},{id:"editor/multiDiffEditor",label:u("multiDiffEditor","Multi-File Diff Editor"),settings:["multiDiffEditor.*"]},{id:"editor/minimap",label:u("minimap","Minimap"),settings:["editor.minimap.*"]},{id:"editor/suggestions",label:u("suggestions","Suggestions"),settings:["editor.*suggest*"]},{id:"editor/files",label:u("files","Files"),settings:["files.*"]}]},{id:"workbench",label:u("workbench","Workbench"),settings:["workbench.*"],children:[{id:"workbench/appearance",label:u("appearance","Appearance"),settings:["workbench.activityBar.*","workbench.*color*","workbench.fontAliasing","workbench.iconTheme","workbench.sidebar.location","workbench.*.visible","workbench.tips.enabled","workbench.tree.*","workbench.view.*"]},{id:"workbench/breadcrumbs",label:u("breadcrumbs","Breadcrumbs"),settings:["breadcrumbs.*"]},{id:"workbench/editor",label:u("editorManagement","Editor Management"),settings:["workbench.editor.*"]},{id:"workbench/settings",label:u("settings","Settings Editor"),settings:["workbench.settings.*"]},{id:"workbench/zenmode",label:u("zenMode","Zen Mode"),settings:["zenmode.*"]},{id:"workbench/screencastmode",label:u("screencastMode","Screencast Mode"),settings:["screencastMode.*"]}]},{id:"window",label:u("window","Window"),settings:["window.*"],children:[{id:"window/newWindow",label:u("newWindow","New Window"),settings:["window.*newwindow*"]}]},{id:"features",label:u("features","Features"),children:[{id:"features/accessibilitySignals",label:u("accessibility.signals","Accessibility Signals"),settings:["accessibility.signal*"]},{id:"features/accessibility",label:u("accessibility","Accessibility"),settings:["accessibility.*"]},{id:"features/explorer",label:u("fileExplorer","Explorer"),settings:["explorer.*","outline.*"]},{id:"features/search",label:u("search","Search"),settings:["search.*"]},{id:"features/debug",label:u("debug","Debug"),settings:["debug.*","launch"]},{id:"features/testing",label:u("testing","Testing"),settings:["testing.*"]},{id:"features/scm",label:u("scm","Source Control"),settings:["scm.*"]},{id:"features/extensions",label:u("extensions","Extensions"),settings:["extensions.*"]},{id:"features/terminal",label:u("terminal","Terminal"),settings:["terminal.*"]},{id:"features/task",label:u("task","Task"),settings:["task.*"]},{id:"features/problems",label:u("problems","Problems"),settings:["problems.*"]},{id:"features/output",label:u("output","Output"),settings:["output.*"]},{id:"features/comments",label:u("comments","Comments"),settings:["comments.*"]},{id:"features/remote",label:u("remote","Remote"),settings:["remote.*"]},{id:"features/timeline",label:u("timeline","Timeline"),settings:["timeline.*"]},{id:"features/notebook",label:u("notebook","Notebook"),settings:["notebook.*","interactiveWindow.*"]},{id:"features/mergeEditor",label:u("mergeEditor","Merge Editor"),settings:["mergeEditor.*"]},{id:"features/chat",label:u("chat","Chat"),settings:["chat.*","inlineChat.*"]},{id:"features/issueReporter",label:u("issueReporter","Issue Reporter"),settings:["issueReporter.*"]}]},{id:"application",label:u("application","Application"),children:[{id:"application/http",label:u("proxy","Proxy"),settings:["http.*"]},{id:"application/keyboard",label:u("keyboard","Keyboard"),settings:["keyboard.*"]},{id:"application/update",label:u("update","Update"),settings:["update.*"]},{id:"application/telemetry",label:u("telemetry","Telemetry"),settings:["telemetry.*"]},{id:"application/settingsSync",label:u("settingsSync","Settings Sync"),settings:["settingsSync.*"]},{id:"application/experimental",label:u("experimental","Experimental"),settings:["application.experimental.*"]},{id:"application/other",label:u("other","Other"),settings:["application.*"]}]},{id:"security",label:u("security","Security"),settings:["security.*"],children:[{id:"security/workspace",label:u("workspace","Workspace"),settings:["security.workspace.*"]}]}]},NV=new Set;["css","html","scss","less","json","js","ts","ie","id","php","scm"].forEach(r=>NV.add(r));var xv=new Map;xv.set("power shell","PowerShell");xv.set("powershell","PowerShell");xv.set("javascript","JavaScript");xv.set("typescript","TypeScript");var Hd=class{constructor(e){this._container=e}hover;set text(e){Wa(this._container,...dd(e??""))}set title(e){!this.hover&&e?this.hover=ii().setupManagedHover(pt("mouse"),this._container,e):this.hover&&this.hover.update(e)}dispose(){this.hover?.dispose()}};function g0(r,e,t){let n=[];t?n=_ee(t):n=wee(e);let i=[],o=[...AV()];if(Array.isArray(n))for(let s of n)s.startsWith("-")?o.push(s.substring(1)):i.push(s);return ai([...r,...i].filter(s=>!o.includes(s)))}function wee(r){let e=r.inspect("settingsSync.ignoredSettings").userValue;return e!==void 0||(e=r.inspect("sync.ignoredSettings").userValue,e!==void 0)?e:r.getValue("settingsSync.ignoredSettings")||[]}function _ee(r){let e=nl(r);return e?e["settingsSync.ignoredSettings"]||e["sync.ignoredSettings"]||[]:[]}var KC=class extends N{id;parent;_tabbable=!1;_onDidChangeTabbable=new T;onDidChangeTabbable=this._onDidChangeTabbable.event;constructor(e){super(),this.id=e}get tabbable(){return this._tabbable}set tabbable(e){this._tabbable=e,this._onDidChangeTabbable.fire()}},pi=class extends KC{count;label;level;isFirstGroup;_childSettingKeys=new Set;_children=[];get children(){return this._children}set children(e){this._children=e,this._childSettingKeys=new Set,this._children.forEach(t=>{t instanceof wo&&this._childSettingKeys.add(t.setting.key)})}constructor(e,t,n,i,o){super(e),this.count=t,this.label=n,this.level=i,this.isFirstGroup=o}containsSetting(e){return this._childSettingKeys.has(e)}},Ev=class extends KC{constructor(t,n){super(t);this.extensionIds=n}},wo=class r extends KC{constructor(t,n,i,o,s,a,l,d,c){super(Lee(n.id+"_"+t.key));this.settingsTarget=i;this.isWorkspaceTrusted=o;this.languageFilter=s;this.languageService=a;this.productService=l;this.userDataProfileService=d;this.configurationService=c;this.setting=t,this.parent=n,this.initSettingDescription(),this.initSettingValueType()}static MAX_DESC_LINES=20;setting;_displayCategory=null;_displayLabel=null;value;scopeValue;defaultValue;defaultValueSource;isConfigured=!1;isUntrusted=!1;hasPolicyValue=!1;tags;overriddenScopeList=[];overriddenDefaultsLanguageList=[];languageOverrideValues=new Map;description;valueType;get displayCategory(){return this._displayCategory||this.initLabels(),this._displayCategory}get displayLabel(){return this._displayLabel||this.initLabels(),this._displayLabel}initLabels(){if(this.setting.title){this._displayLabel=this.setting.title,this._displayCategory=this.setting.categoryLabel??null;return}let t=BV(this.setting.key,this.parent.id,this.setting.isLanguageTagSetting);this._displayLabel=t.label,this._displayCategory=t.category}initSettingDescription(){if(this.setting.description.length>r.MAX_DESC_LINES){let t=this.setting.description.slice(0,r.MAX_DESC_LINES);t.push("[...]"),this.description=t.join(`
`)}else this.description=this.setting.description.join(`
`)}initSettingValueType(){Ree(this.setting,this.productService)?this.valueType="extension-toggle":this.setting.enum&&(!this.setting.type||Nee(this.setting.type))?this.valueType="enum":this.setting.type==="string"?this.setting.editPresentation==="multilineText"?this.valueType="multiline-string":this.valueType="string":Mee(this.setting)?this.valueType="exclude":Oee(this.setting)?this.valueType="include":this.setting.type==="integer"?this.valueType="integer":this.setting.type==="number"?this.valueType="number":this.setting.type==="boolean"?this.valueType="boolean":this.setting.type==="array"&&this.setting.arrayItemType&&["string","enum","number","integer"].includes(this.setting.arrayItemType)?this.valueType="array":Array.isArray(this.setting.type)&&this.setting.type.includes("null")&&this.setting.type.length===2?this.setting.type.includes("integer")?this.valueType="nullable-integer":this.setting.type.includes("number")?this.valueType="nullable-number":this.valueType="complex":Aee(this.setting)?this.setting.allKeysAreBoolean?this.valueType="boolean-object":this.valueType="object":this.setting.isLanguageTagSetting?this.valueType="language-tag":this.valueType="complex"}inspectSelf(){let t=this.getTargetToInspect(this.setting),n=FV(this.setting.key,t,this.languageFilter,this.configurationService);this.update(n,this.isWorkspaceTrusted)}getTargetToInspect(t){if(!this.userDataProfileService.currentProfile.isDefault&&!this.userDataProfileService.currentProfile.useDefaultFlags?.settings){if(t.scope===1)return 1;if(this.configurationService.isSettingAppliedForAllProfiles(t.key)&&this.settingsTarget===3)return 1}return this.settingsTarget}update(t,n){let{isConfigured:i,inspected:o,targetSelector:s,inspectedLanguageOverrides:a,languageSelector:l}=t;switch(s){case"workspaceFolderValue":case"workspaceValue":this.isUntrusted=!!this.setting.restricted&&!n;break}let d=i?o[s]:o.defaultValue,c=[],p=[];if((l||s!=="workspaceValue")&&typeof o.workspaceValue<"u"&&c.push("workspace:"),(l||s!=="userRemoteValue")&&typeof o.userRemoteValue<"u"&&c.push("remote:"),(l||s!=="userLocalValue")&&typeof o.userLocalValue<"u"&&c.push("user:"),o.overrideIdentifiers)for(let h of o.overrideIdentifiers){let g=a.get(h);g&&(this.languageService.isRegisteredLanguageId(h)&&(l!==h&&typeof g.default?.override<"u"&&p.push(h),(l!==h||s!=="workspaceValue")&&typeof g.workspace?.override<"u"&&c.push(`workspace:${h}`),(l!==h||s!=="userRemoteValue")&&typeof g.userRemote?.override<"u"&&c.push(`remote:${h}`),(l!==h||s!=="userLocalValue")&&typeof g.userLocal?.override<"u"&&c.push(`user:${h}`)),this.languageOverrideValues.set(h,g))}if(this.overriddenScopeList=c,this.overriddenDefaultsLanguageList=p,this.defaultValueSource=this.setting.nonLanguageSpecificDefaultValueSource,o.policyValue)this.hasPolicyValue=!0,i=!1,d=o.policyValue,this.scopeValue=o.policyValue,this.defaultValue=o.defaultValue;else if(l&&this.languageOverrideValues.has(l)){let h=this.languageOverrideValues.get(l);d=(i?h[s]:h.defaultValue)??d,this.scopeValue=i&&h[s],this.defaultValue=h.defaultValue??o.defaultValue;let f=Te.as(In.Configuration).getConfigurationDefaultsOverrides().get(`[${l}]`)?.source,m=f instanceof Map?f.get(this.setting.key):void 0;m&&(this.defaultValueSource=m)}else this.scopeValue=i&&o[s],this.defaultValue=o.defaultValue;this.value=d,this.isConfigured=i,(i||this.setting.tags||this.tags||this.setting.restricted||this.hasPolicyValue)&&(this.tags=new Set,i&&this.tags.add(_d),this.setting.tags?.forEach(h=>this.tags.add(h)),this.setting.restricted&&this.tags.add(wb),this.hasPolicyValue&&this.tags.add(Dd))}matchesAllTags(t){return t?.size?(this.tags||this.inspectSelf(),!!this.tags?.size&&Array.from(t).every(n=>this.tags.has(n))):!0}matchesScope(t,n){let i=Z.isUri(t)?6:t;return this.setting.scope?i===1?V7.includes(this.setting.scope):i===6?WN.includes(this.setting.scope):i===5?BN.includes(this.setting.scope):i===4?U7.includes(this.setting.scope):i===3&&n?H7.includes(this.setting.scope):!0:!0}matchesAnyExtension(t){return!t||!t.size?!0:this.setting.extensionInfo?Array.from(t).some(n=>n.toLowerCase()===this.setting.extensionInfo.id.toLowerCase()):!1}matchesAnyFeature(t){if(!t||!t.size)return!0;let n=h0.children.find(i=>i.id==="features");return Array.from(t).some(i=>{if(n&&n.children){let o=n.children.find(s=>"features/"+i===s.id);if(o){let s=o.settings?.map(a=>Dee(a));return s&&!this.setting.extensionInfo&&s.some(a=>a.test(this.setting.key.toLowerCase()))}else return!1}else return!1})}matchesAnyId(t){return!t||!t.size?!0:t.has(this.setting.key)}matchesAllLanguages(t){return t?this.languageService.isRegisteredLanguageId(t)?this.setting.scope===5:!1:!0}};function Dee(r){return r=vi(r).replace(/\\\*/g,".*"),new RegExp(`^${r}$`,"i")}var Xg=class{constructor(e,t,n,i,o,s){this._viewState=e;this._isWorkspaceTrusted=t;this._configurationService=n;this._languageService=i;this._userDataProfileService=o;this._productService=s}_root;_tocRoot;_treeElementsBySettingName=new Map;get root(){return this._root}update(e=this._tocRoot){this._treeElementsBySettingName.clear();let t=this.createSettingsTreeGroupElement(e);t.children[0]instanceof pi&&(t.children[0].isFirstGroup=!0),this._root?(this.disposeChildren(this._root.children),this._root.children=t.children):this._root=t}updateWorkspaceTrust(e){this._isWorkspaceTrusted=e,this.updateRequireTrustedTargetElements()}disposeChildren(e){for(let t of e)this.recursiveDispose(t)}recursiveDispose(e){e instanceof pi&&this.disposeChildren(e.children),e.dispose()}getElementsByName(e){return this._treeElementsBySettingName.get(e)??null}updateElementsByName(e){this._treeElementsBySettingName.has(e)&&this.reinspectSettings(this._treeElementsBySettingName.get(e))}updateRequireTrustedTargetElements(){this.reinspectSettings([...this._treeElementsBySettingName.values()].flat().filter(e=>e.isUntrusted))}reinspectSettings(e){for(let t of e)t.inspectSelf()}createSettingsTreeGroupElement(e,t){let n=t?this.getDepth(t)+1:0,i=new pi(e.id,void 0,e.label,n,!1);i.parent=t;let o=[];if(e.settings){let s=e.settings.map(a=>this.createSettingsTreeSettingElement(a,i)).filter(a=>a.setting.deprecationMessage?a.isConfigured:!0);o.push(...s)}if(e.children){let s=e.children.map(a=>this.createSettingsTreeGroupElement(a,i));o.push(...s)}return i.children=o,i}getDepth(e){return e.parent?1+this.getDepth(e.parent):0}createSettingsTreeSettingElement(e,t){let n=new wo(e,t,this._viewState.settingsTarget,this._isWorkspaceTrusted,this._viewState.languageFilter,this._languageService,this._productService,this._userDataProfileService,this._configurationService),i=this._treeElementsBySettingName.get(e.key)||[];return i.push(n),this._treeElementsBySettingName.set(e.key,i),n}};Xg=_([y(2,pa),y(3,Lt),y(4,Dr),y(5,vs)],Xg);function FV(r,e,t,n){let i=Z.isUri(e)?{resource:e}:void 0,o=n.inspect(r,i),s=e===1?"applicationValue":e===3?"userLocalValue":e===4?"userRemoteValue":e===5?"workspaceValue":"workspaceFolderValue",a=e===1?"application":e===3?"userLocal":e===4?"userRemote":e===5?"workspace":"workspaceFolder",l=typeof o[s]<"u",d=o.overrideIdentifiers,c=new Map;if(t&&(l=!1),d){for(let p of d)c.set(p,n.inspect(r,{overrideIdentifier:p}));t&&c.has(t)&&typeof c.get(t)[a]?.override<"u"&&(l=!0)}return{isConfigured:l,inspected:o,targetSelector:s,inspectedLanguageOverrides:c,languageSelector:t}}function Lee(r){return r.replace(/[\.\/]/,"_")}function BV(r,e="",t=!1){let n=r.lastIndexOf("."),i="";n>=0&&(i=r.substring(0,n),r=r.substring(n+1)),e=e.replace(/\//g,"."),i=kee(i,e),i=Z3(i),t&&(r=r.replace(/[\[\]]/g,""),r="$(bracket) "+r);let o=Z3(r);return{category:i,label:o}}function Z3(r){r=r.replace(/\.([a-z0-9])/g,(e,t)=>` \u203A ${t.toUpperCase()}`).replace(/([a-z0-9])([A-Z])/g,"$1 $2").replace(/^[a-z]/g,e=>e.toUpperCase()).replace(/\b\w+\b/g,e=>NV.has(e.toLowerCase())?e.toUpperCase():e);for(let[e,t]of xv)r=r.replace(new RegExp(`\\b${e}\\b`,"gi"),t);return r}function kee(r,e){let t=i=>{/insiders$/i.test(r)||(e=e.replace(/-?insiders$/i,""));let o=e.split(".").map(s=>s.replace(/-/g,"").toLowerCase()===r.toLowerCase()?s.replace(/-/g,""):s);for(;o.length;){let s=new RegExp(`^${o.join("\\.")}(\\.|$)`,"i");if(s.test(r))return r.replace(s,"");i?o.pop():o.shift()}return null},n=t(!0);return n===null&&(n=t(!1)),n===null&&(n=r),n}function Ree(r,e){return GF&&!!e.extensionRecommendations&&!!r.displayExtensionId}function Mee(r){return r.key==="files.exclude"||r.key==="search.exclude"||r.key==="workbench.localHistory.exclude"||r.key==="explorer.autoRevealExclude"||r.key==="files.readonlyExclude"||r.key==="files.watcherExclude"}function Oee(r){return r.key==="files.readonlyInclude"}function m0(r){return r==="workbench.editor.customLabels.patterns"}function Pee({type:r},e){return r==="string"||r==="boolean"||r==="integer"||r==="number"?!0:m0(e)&&Array.isArray(r)&&r.length===2?r.includes("null")&&(r.includes("string")||r.includes("boolean")||r.includes("integer")||r.includes("number")):!1}function Aee({key:r,type:e,objectProperties:t,objectPatternProperties:n,objectAdditionalProperties:i}){if(e!=="object"||ln(t)&&ln(n)&&ln(i)||(i===!0||i===void 0)&&!Object.keys(n??{}).includes(".*"))return!1;let o=[...Object.values(t??{}),...Object.values(n??{})];return i&&typeof i=="object"&&o.push(i),o.map(a=>Array.isArray(a.anyOf)?a.anyOf:[a]).flat().every(a=>Pee(a,r))}function Nee(r){let e=["string","boolean","null","integer","number"];return(Array.isArray(r)?r:[r]).every(n=>e.includes(n))}var Qg=class extends Xg{constructor(t,n,i,o,s,a,l,d){super(t,i,o,a,l,d);this.environmentService=s;this.settingsOrderByTocIndex=n,this.update({id:"searchResultModel",label:""})}rawSearchResults=null;cachedUniqueSearchResults=null;newExtensionSearchResults=null;searchResultCount=null;settingsOrderByTocIndex;id="searchResultModel";sortResults(t){if(this.settingsOrderByTocIndex)for(let n of t)n.setting.internalOrder=this.settingsOrderByTocIndex.get(n.setting.key);return this._viewState.query?(t.sort((n,i)=>n.matchType!==i.matchType?i.matchType-n.matchType:n.matchType===2?i.score-n.score:_b(n.setting.internalOrder,i.setting.internalOrder)),ai(t,n=>n.setting.key)):t.sort((n,i)=>_b(n.setting.internalOrder,i.setting.internalOrder))}getUniqueResults(){if(this.cachedUniqueSearchResults)return this.cachedUniqueSearchResults;if(!this.rawSearchResults)return null;let t=[],n=new Set,i=this.rawSearchResults[0];i&&(i.filterMatches.forEach(s=>n.add(s.setting.key)),t=i.filterMatches);let o=this.rawSearchResults[1];return o&&(o.filterMatches=o.filterMatches.filter(s=>!n.has(s.setting.key)),t=t.concat(o.filterMatches),this.newExtensionSearchResults=this.rawSearchResults[2]),t=this.sortResults(t),this.cachedUniqueSearchResults={filterMatches:t,exactMatch:i?.exactMatch||o?.exactMatch},this.cachedUniqueSearchResults}getRawResults(){return this.rawSearchResults||[]}setResult(t,n){if(this.cachedUniqueSearchResults=null,this.newExtensionSearchResults=null,this.rawSearchResults=this.rawSearchResults||[],!n){delete this.rawSearchResults[t];return}n.exactMatch&&(this.rawSearchResults=[]),this.rawSearchResults[t]=n,this.updateChildren()}updateChildren(){this.update({id:"searchResultModel",label:"searchResultModel",settings:this.getFlatSettings()});let t=!!this.environmentService.remoteAuthority;if(this.root.children=this.root.children.filter(n=>n instanceof wo&&n.matchesAllTags(this._viewState.tagFilters)&&n.matchesScope(this._viewState.settingsTarget,t)&&n.matchesAnyExtension(this._viewState.extensionFilters)&&n.matchesAnyId(this._viewState.idFilters)&&n.matchesAnyFeature(this._viewState.featureFilters)&&n.matchesAllLanguages(this._viewState.languageFilter)),this.searchResultCount=this.root.children.length,this.newExtensionSearchResults?.filterMatches.length){let n=this.newExtensionSearchResults.filterMatches.map(i=>i.setting).filter(i=>i.extensionName&&i.extensionPublisher).map(i=>`${i.extensionPublisher}.${i.extensionName}`);if(n=ai(n),n.length){let i=new Ev("newExtensions",n);i.parent=this._root,this._root.children.push(i)}}}getUniqueResultsCount(){return this.searchResultCount??0}getFlatSettings(){return this.getUniqueResults()?.filterMatches.map(t=>t.setting)??[]}};Qg=_([y(3,pa),y(4,Hi),y(5,Lt),y(6,Dr),y(7,vs)],Qg);var Fee=/(^|\s)@tag:("([^"]*)"|[^"]\S*)/g,Bee=/(^|\s)@ext:("([^"]*)"|[^"]\S*)?/g,Wee=/(^|\s)@feature:("([^"]*)"|[^"]\S*)?/g,Vee=/(^|\s)@id:("([^"]*)"|[^"]\S*)?/g,Hee=/(^|\s)@lang:("([^"]*)"|[^"]\S*)?/g;function f0(r){function e(a,l,d){return a.replace(l,(c,p,h,g)=>{let f=g||h;return f&&d.push(...f.split(",").map(m=>m.trim()).filter(m=>!Pl(m))),""})}let t=[];r=r.replace(Fee,(a,l,d,c)=>(t.push(c||d),"")),r=r.replace(`@${_d}`,()=>(t.push(_d),"")),r=r.replace(`@${Dd}`,()=>(t.push(Dd),""));let n=[],i=[],o=[],s=[];return r=e(r,Bee,n),r=e(r,Wee,i),r=e(r,Vee,o),HD&&(r=e(r,Hee,s)),r=r.trim(),{tags:t,extensionFilters:n,featureFilters:i,idFilters:o,languageFilter:s.length?s[0]:void 0,query:r}}var qc=ie,e6=new Set,WV=[],Zg=class{constructor(e,t,n,i,o,s,a){this.configurationService=t;this.hoverService=n;this.userDataSyncEnablementService=i;this.languageService=o;this.userDataProfilesService=s;this.commandService=a;this.indicatorsContainerElement=q(e,qc(".setting-indicators-container")),this.indicatorsContainerElement.style.display="inline",this.profilesEnabled=this.userDataProfilesService.isEnabled(),this.workspaceTrustIndicator=this.createWorkspaceTrustIndicator(),this.scopeOverridesIndicator=this.createScopeOverridesIndicator(),this.syncIgnoredIndicator=this.createSyncIgnoredIndicator(),this.defaultOverrideIndicator=this.createDefaultOverrideIndicator(),this.allIndicators=[this.workspaceTrustIndicator,this.scopeOverridesIndicator,this.syncIgnoredIndicator,this.defaultOverrideIndicator]}indicatorsContainerElement;workspaceTrustIndicator;scopeOverridesIndicator;syncIgnoredIndicator;defaultOverrideIndicator;allIndicators;profilesEnabled;keybindingListeners=new X;focusedIndex=0;defaultHoverOptions={trapFocus:!0,position:{hoverPosition:2},appearance:{showPointer:!0,compact:!1}};addHoverDisposables(e,t,n){e.clear();let i=e.add(new Hn(()=>{let o=n(!1);o&&e.add(o)},this.configurationService.getValue("workbench.hover.delay")));e.add(U(t,ee.MOUSE_OVER,()=>{i.isScheduled()||i.schedule()})),e.add(U(t,ee.MOUSE_LEAVE,()=>{i.cancel()})),e.add(U(t,ee.KEY_DOWN,o=>{let s=new it(o);if(s.equals(10)||s.equals(3)){let a=n(!0);a&&e.add(a),o.preventDefault()}}))}createWorkspaceTrustIndicator(){let e=new X,t=qc("span.setting-indicator.setting-item-workspace-trust"),n=e.add(new Hd(t));n.text="$(warning) "+u("workspaceUntrustedLabel","Setting value not applied");let i=u("trustLabel","The setting value can only be applied in a trusted workspace."),o=s=>this.hoverService.showHover({...this.defaultHoverOptions,content:i,target:t,actions:[{label:u("manageWorkspaceTrust","Manage Workspace Trust"),commandId:"workbench.trust.manage",run:a=>{this.commandService.executeCommand("workbench.trust.manage")}}]},s);return this.addHoverDisposables(e,t,o),{element:t,label:n,disposables:e}}createScopeOverridesIndicator(){let e=new X,t=qc("span.setting-item-overrides"),n=e.add(new Hd(t));return{element:t,label:n,disposables:e}}createSyncIgnoredIndicator(){let e=new X,t=qc("span.setting-indicator.setting-item-ignored"),n=e.add(new Hd(t));n.text=u("extensionSyncIgnoredLabel","Not synced");let i=u("syncIgnoredTitle","This setting is ignored during sync"),o=s=>this.hoverService.showHover({...this.defaultHoverOptions,content:i,target:t},s);return this.addHoverDisposables(e,t,o),{element:t,label:n,disposables:e}}createDefaultOverrideIndicator(){let e=new X,t=qc("span.setting-indicator.setting-item-default-overridden"),n=e.add(new Hd(t));return n.text=u("defaultOverriddenLabel","Default value changed"),{element:t,label:n,disposables:e}}render(){let e=this.allIndicators.filter(t=>t.element.style.display!=="none");if(this.indicatorsContainerElement.innerText="",this.indicatorsContainerElement.style.display="none",e.length){this.indicatorsContainerElement.style.display="inline",q(this.indicatorsContainerElement,qc("span",void 0,"("));for(let t=0;t<e.length-1;t++)q(this.indicatorsContainerElement,e[t].element),q(this.indicatorsContainerElement,qc("span.comma",void 0," \u2022 "));q(this.indicatorsContainerElement,e[e.length-1].element),q(this.indicatorsContainerElement,qc("span",void 0,")")),this.resetIndicatorNavigationKeyBindings(e)}}resetIndicatorNavigationKeyBindings(e){if(this.keybindingListeners.clear(),this.indicatorsContainerElement.role=e.length>=1?"toolbar":"button",!e.length)return;let t=e[0].focusElement??e[0].element;t.tabIndex=0,this.keybindingListeners.add(U(this.indicatorsContainerElement,"keydown",n=>{let i=new it(n),o=!0;if(i.equals(14))this.focusIndicatorAt(e,0);else if(i.equals(13))this.focusIndicatorAt(e,e.length-1);else if(i.equals(17)){let s=(this.focusedIndex+1)%e.length;this.focusIndicatorAt(e,s)}else if(i.equals(15)){let s=this.focusedIndex?this.focusedIndex-1:e.length-1;this.focusIndicatorAt(e,s)}else o=!1;o&&(n.preventDefault(),n.stopPropagation())}))}focusIndicatorAt(e,t){if(t===this.focusedIndex)return;let n=e[t],i=n.focusElement??n.element;i.tabIndex=0,i.focus();let o=e[this.focusedIndex],s=o.focusElement??o.element;s.tabIndex=-1,this.focusedIndex=t}updateWorkspaceTrust(e){this.workspaceTrustIndicator.element.style.display=e.isUntrusted?"inline":"none",this.render()}updateSyncIgnored(e,t){this.syncIgnoredIndicator.element.style.display=this.userDataSyncEnablementService.isEnabled()&&t.includes(e.setting.key)?"inline":"none",this.render(),WV!==t&&(WV=t,e6=new Set(WV))}getInlineScopeDisplayText(e){let[t,n]=e.split(":"),i=t==="user"?u("user","User"):t==="workspace"?u("workspace","Workspace"):u("remote","Remote");return n?`${this.languageService.getLanguageName(n)} > ${i}`:i}dispose(){this.keybindingListeners.dispose();for(let e of this.allIndicators)e.disposables.dispose()}updateScopeOverrides(e,t,n){if(this.scopeOverridesIndicator.element.innerText="",this.scopeOverridesIndicator.element.style.display="none",this.scopeOverridesIndicator.focusElement=this.scopeOverridesIndicator.element,e.hasPolicyValue){this.scopeOverridesIndicator.element.style.display="inline",this.scopeOverridesIndicator.element.classList.add("setting-indicator"),this.scopeOverridesIndicator.label.text="$(warning) "+u("policyLabelText","Setting value not applied");let i=u("policyDescription","This setting is managed by your organization and its applied value cannot be changed."),o=s=>this.hoverService.showHover({...this.defaultHoverOptions,content:i,actions:[{label:u("policyFilterLink","View policy settings"),commandId:"_settings.action.viewPolicySettings",run:a=>{n.fire(`@${Dd}`)}}],target:this.scopeOverridesIndicator.element},s);this.addHoverDisposables(this.scopeOverridesIndicator.disposables,this.scopeOverridesIndicator.element,o)}else if(this.profilesEnabled&&e.settingsTarget===3&&this.configurationService.isSettingAppliedForAllProfiles(e.setting.key)){this.scopeOverridesIndicator.element.style.display="inline",this.scopeOverridesIndicator.element.classList.add("setting-indicator"),this.scopeOverridesIndicator.label.text=u("applicationSetting","Applies to all profiles");let i=u("applicationSettingDescription","The setting is not specific to the current profile, and will retain its value when switching profiles."),o=s=>this.hoverService.showHover({...this.defaultHoverOptions,content:i,target:this.scopeOverridesIndicator.element},s);this.addHoverDisposables(this.scopeOverridesIndicator.disposables,this.scopeOverridesIndicator.element,o)}else if(e.overriddenScopeList.length||e.overriddenDefaultsLanguageList.length)if(e.overriddenScopeList.length===1&&!e.overriddenDefaultsLanguageList.length){this.scopeOverridesIndicator.element.style.display="inline",this.scopeOverridesIndicator.element.classList.remove("setting-indicator"),this.scopeOverridesIndicator.disposables.clear();let i=e.isConfigured?u("alsoConfiguredIn","Also modified in"):u("configuredIn","Modified in");this.scopeOverridesIndicator.label.text=`${i} `;let o=e.overriddenScopeList[0],s=q(this.scopeOverridesIndicator.element,qc("a.modified-scope",void 0,this.getInlineScopeDisplayText(o)));s.tabIndex=-1,this.scopeOverridesIndicator.focusElement=s;let a=l=>{let[d,c]=o.split(":");t.fire({settingKey:e.setting.key,scope:d,language:c}),l.preventDefault(),l.stopPropagation()};this.scopeOverridesIndicator.disposables.add(U(s,ee.CLICK,l=>{a(l)})),this.scopeOverridesIndicator.disposables.add(U(s,ee.KEY_DOWN,l=>{let d=new it(l);(d.equals(10)||d.equals(3))&&a(l)}))}else{this.scopeOverridesIndicator.element.style.display="inline",this.scopeOverridesIndicator.element.classList.add("setting-indicator");let i=e.isConfigured?u("alsoConfiguredElsewhere","Also modified elsewhere"):u("configuredElsewhere","Modified elsewhere");this.scopeOverridesIndicator.label.text=i;let o="";if(e.overriddenScopeList.length){o=e.isConfigured?u("alsoModifiedInScopes","The setting has also been modified in the following scopes:"):u("modifiedInScopes","The setting has been modified in the following scopes:");for(let d of e.overriddenScopeList){let c=this.getInlineScopeDisplayText(d);o+=`
- [${c}](${encodeURIComponent(d)} "${Uee(d,this.languageService)}")`}}if(e.overriddenDefaultsLanguageList.length){o&&(o+=`

`);let l=u("hasDefaultOverridesForLanguages","The following languages have default overrides:");o+=l;for(let d of e.overriddenDefaultsLanguageList){let c=this.languageService.getLanguageName(d);o+=`
- [${c}](${encodeURIComponent(`default:${d}`)} "${c}")`}}let s={value:o,isTrusted:!1,supportHtml:!1},a=l=>this.hoverService.showHover({...this.defaultHoverOptions,content:s,linkHandler:d=>{let[c,p]=decodeURIComponent(d).split(":");t.fire({settingKey:e.setting.key,scope:c,language:p})},target:this.scopeOverridesIndicator.element},l);this.addHoverDisposables(this.scopeOverridesIndicator.disposables,this.scopeOverridesIndicator.element,a)}this.render()}updateDefaultOverrideIndicator(e){this.defaultOverrideIndicator.element.style.display="none";let t=t6(e);if(t!==void 0){this.defaultOverrideIndicator.element.style.display="inline",this.defaultOverrideIndicator.disposables.clear(),Array.isArray(t)&&t.length===1&&(t=t[0]);let n;Array.isArray(t)?(t=t.map(o=>`\`${o}\``),n=u("multipledefaultOverriddenDetails","A default values has been set by {0}",t.slice(0,-1).join(", ")+" & "+t.slice(-1))):n=u("defaultOverriddenDetails","Default setting value overridden by `{0}`",t);let i=o=>this.hoverService.showHover({content:new jo().appendMarkdown(n),target:this.defaultOverrideIndicator.element,position:{hoverPosition:2},appearance:{showPointer:!0,compact:!1}},o);this.addHoverDisposables(this.defaultOverrideIndicator.disposables,this.defaultOverrideIndicator.element,i)}this.render()}};Zg=_([y(1,pa),y(2,rr),y(3,Yg),y(4,Lt),y(5,ua),y(6,Xn)],Zg);function t6(r){let e,t=r.defaultValueSource;if(t)if(t instanceof Map){e=[];for(let[,n]of t){let i=typeof n!="string"?n.displayName??n.id:n;e.includes(i)||e.push(i)}}else typeof t=="string"?e=t:e=t.displayName??t.id;return e}function Uee(r,e){let[t,n]=r.split(":"),i=t==="user"?u("user","User"):t==="workspace"?u("workspace","Workspace"):u("remote","Remote");return n?u("modifiedInScopeForLanguage","The {0} scope for {1}",i,e.getLanguageName(n)):i}function zee(r,e){let[t,n]=r.split(":"),i=t==="user"?u("user","User"):t==="workspace"?u("workspace","Workspace"):u("remote","Remote");return n?u("modifiedInScopeForLanguageMidSentence","the {0} scope for {1}",i.toLowerCase(),e.getLanguageName(n)):i}function n6(r,e,t,n){let i=[];if(r.isUntrusted&&i.push(u("workspaceUntrustedAriaLabel","Workspace untrusted; setting value not applied")),r.hasPolicyValue)i.push(u("policyDescriptionAccessible","Managed by organization policy; setting value not applied"));else if(t.isEnabled()&&r.settingsTarget===3&&e.isSettingAppliedForAllProfiles(r.setting.key))i.push(u("applicationSettingDescriptionAccessible","Setting value retained when switching profiles"));else{let l=r.isConfigured?u("alsoConfiguredIn","Also modified in"):u("configuredIn","Modified in"),d=r.overriddenScopeList.map(c=>zee(c,n)).join(", ");r.overriddenScopeList.length&&i.push(`${l} ${d}`)}e6.has(r.setting.key)&&i.push(u("syncIgnoredAriaLabel","Setting ignored during sync"));let o=t6(r);if(o!==void 0){Array.isArray(o)&&o.length===1&&(o=o[0]);let l;Array.isArray(o)?l=u("multipleDefaultOverriddenDetailsAriaLabel","{0} override the default value",o.slice(0,-1).join(", ")+" & "+o.slice(-1)):l=u("defaultOverriddenDetailsAriaLabel","{0} overrides the default value",o),i.push(l)}let s=r.overriddenDefaultsLanguageList.map(l=>n.getLanguageName(l)).join(", ");if(r.overriddenDefaultsLanguageList.length){let l=u("defaultOverriddenLanguagesList","Language-specific default values exist for {0}",s);i.push(l)}return i.join(". ")}var ri=ie,VV=class{_dataItems=[];_editKey=null;_selectedIdx=null;_newDataItem;get items(){let e=this._dataItems.map((t,n)=>{let i=typeof this._editKey=="number"&&this._editKey===n;return{...t,editing:i,selected:n===this._selectedIdx||i}});return this._editKey==="create"&&e.push({editing:!0,selected:!0,...this._newDataItem}),e}constructor(e){this._newDataItem=e}setEditKey(e){this._editKey=e}setValue(e){this._dataItems=e}select(e){this._selectedIdx=e}getSelected(){return this._selectedIdx}selectNext(){typeof this._selectedIdx=="number"?this._selectedIdx=Math.min(this._selectedIdx+1,this._dataItems.length-1):this._selectedIdx=0}selectPrevious(){typeof this._selectedIdx=="number"?this._selectedIdx=Math.max(this._selectedIdx-1,0):this._selectedIdx=0}},Jg=class extends N{constructor(t,n,i){super();this.container=t;this.themeService=n;this.contextViewService=i;this.listElement=q(t,ri("div")),this.listElement.setAttribute("role","list"),this.getContainerClasses().forEach(o=>this.listElement.classList.add(o)),q(t,this.renderAddButton()),this.renderList(),this._register(U(this.listElement,ee.POINTER_DOWN,o=>this.onListClick(o))),this._register(U(this.listElement,ee.DBLCLICK,o=>this.onListDoubleClick(o))),this._register(dn(this.listElement,"keydown",o=>{if(o.equals(16))this.selectPreviousRow();else if(o.equals(18))this.selectNextRow();else return;o.preventDefault(),o.stopPropagation()}))}listElement;rowElements=[];_onDidChangeList=this._register(new T);model=new VV(this.getEmptyItem());listDisposables=this._register(new X);onDidChangeList=this._onDidChangeList.event;get domNode(){return this.listElement}get items(){return this.model.items}get inReadMode(){return this.model.items.every(t=>!t.editing)}setValue(t){this.model.setValue(t),this.renderList()}renderHeader(){}isAddButtonVisible(){return!0}renderList(){let t=Ry(this.listElement);Kt(this.listElement),this.listDisposables.clear();let n=this.model.items.some(o=>!!(o.editing&&this.isItemNew(o)));this.container.classList.toggle("setting-list-hide-add-button",!this.isAddButtonVisible()||n),this.model.items.length?this.listElement.tabIndex=0:this.listElement.removeAttribute("tabIndex");let i=this.renderHeader();i&&this.listElement.appendChild(i),this.rowElements=this.model.items.map((o,s)=>this.renderDataOrEditItem(o,s,t)),this.rowElements.forEach(o=>this.listElement.appendChild(o))}createBasicSelectBox(t){let n=t.options.map(({value:a,description:l})=>({text:a,description:l})),i=t.options.findIndex(a=>t.data===a.value),o=TD({selectBackground:t0,selectForeground:n0,selectBorder:i0,selectListBorder:o0});return new ip(n,i,this.contextViewService,o,{useCustomDrawn:!(li&&vu.pointerEvents)})}editSetting(t){this.model.setEditKey(t),this.renderList()}cancelEdit(){this.model.setEditKey("none"),this.renderList()}handleItemChange(t,n,i){this.model.setEditKey("none"),this.isItemNew(t)?this._onDidChangeList.fire({type:"add",newItem:n,targetIndex:i}):this._onDidChangeList.fire({type:"change",originalItem:t,newItem:n,targetIndex:i}),this.renderList()}renderDataOrEditItem(t,n,i){let o=t.editing?this.renderEdit(t,n):this.renderDataItem(t,n,i);return o.setAttribute("role","listitem"),o}renderDataItem(t,n,i){let o=this.renderItem(t,n),s=o.rowElement;s.setAttribute("data-index",n+""),s.setAttribute("tabindex",t.selected?"0":"-1"),s.classList.toggle("selected",t.selected);let a=new Wi(s);return this.listDisposables.add(a),a.push(this.getActionsForItem(t,n),{icon:!0,label:!0}),this.addTooltipsToRow(o,t),t.selected&&i&&Ys(()=>s.focus(),void 0,this.listDisposables),this.listDisposables.add(U(s,"click",l=>{l.stopPropagation()})),s}renderAddButton(){let t=ri(".setting-list-new-row"),n=this._register(new Kr(t,fa));return n.label=this.getLocalizedStrings().addButtonLabel,n.element.classList.add("setting-list-addButton"),this._register(n.onDidClick(()=>{this.model.setEditKey("create"),this.renderList()})),t}onListClick(t){let n=this.getClickedItemIndex(t);n<0||(t.preventDefault(),t.stopImmediatePropagation(),this.model.getSelected()!==n&&this.selectRow(n))}onListDoubleClick(t){let n=this.getClickedItemIndex(t);if(n<0)return;this.model.items[n]&&(this.editSetting(n),t.preventDefault(),t.stopPropagation())}getClickedItemIndex(t){if(!t.target||wu(t.target,"monaco-action-bar"))return-1;let i=wu(t.target,"setting-list-row");if(!i)return-1;let o=i.getAttribute("data-index");return o?parseInt(o):-1}selectRow(t){this.model.select(t),this.rowElements.forEach(i=>i.classList.remove("selected"));let n=this.rowElements[this.model.getSelected()];n.classList.add("selected"),n.focus()}selectNextRow(){this.model.selectNext(),this.selectRow(this.model.getSelected())}selectPreviousRow(){this.model.selectPrevious(),this.selectRow(this.model.getSelected())}};Jg=_([y(1,Ci),y(2,Wo)],Jg);var Pp=class extends Jg{constructor(t,n,i,o){super(t,n,i);this.hoverService=o}keyValueSuggester;showAddButton=!0;setValue(t,n){this.keyValueSuggester=n?.keySuggester,this.showAddButton=n?.showAddButton??!0,super.setValue(t)}getEmptyItem(){return{value:{type:"string",data:""}}}isAddButtonVisible(){return this.showAddButton}getContainerClasses(){return["setting-list-widget"]}getActionsForItem(t,n){return[{class:Ae.asClassName(hg),enabled:!0,id:"workbench.action.editListItem",tooltip:this.getLocalizedStrings().editActionTooltip,run:()=>this.editSetting(n)},{class:Ae.asClassName(vF),enabled:!0,id:"workbench.action.removeListItem",tooltip:this.getLocalizedStrings().deleteActionTooltip,run:()=>this._onDidChangeList.fire({type:"remove",originalItem:t,targetIndex:n})}]}dragDetails;getDragImage(t){let n=ri(".monaco-drag-image");return n.textContent=t.value.data,n}renderItem(t,n){let i=ri(".setting-list-row"),o=q(i,ri(".setting-list-value")),s=q(i,ri(".setting-list-sibling"));return o.textContent=t.value.data.toString(),s.textContent=t.sibling?`when: ${t.sibling}`:null,this.addDragAndDrop(i,t,n),{rowElement:i,keyElement:o,valueElement:s}}addDragAndDrop(t,n,i){this.inReadMode?(t.draggable=!0,t.classList.add("draggable")):(t.draggable=!1,t.classList.remove("draggable")),this.listDisposables.add(U(t,ee.DRAG_START,s=>{if(this.dragDetails={element:t,item:n,itemIndex:i},s.dataTransfer){s.dataTransfer.dropEffect="move";let a=this.getDragImage(n);t.ownerDocument.body.appendChild(a),s.dataTransfer.setDragImage(a,-10,-10),setTimeout(()=>a.remove(),0)}})),this.listDisposables.add(U(t,ee.DRAG_OVER,s=>this.dragDetails?(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect="move"),!0):!1));let o=0;this.listDisposables.add(U(t,ee.DRAG_ENTER,s=>{o++,t.classList.add("drag-hover")})),this.listDisposables.add(U(t,ee.DRAG_LEAVE,s=>{o--,o||t.classList.remove("drag-hover")})),this.listDisposables.add(U(t,ee.DROP,s=>this.dragDetails?(s.preventDefault(),o=0,this.dragDetails.element!==t&&this._onDidChangeList.fire({type:"move",originalItem:this.dragDetails.item,sourceIndex:this.dragDetails.itemIndex,newItem:n,targetIndex:i}),!0):!1)),this.listDisposables.add(U(t,ee.DRAG_END,s=>{o=0,t.classList.remove("drag-hover"),s.dataTransfer?.clearData(),this.dragDetails&&(this.dragDetails=void 0)}))}renderEdit(t,n){let i=ri(".setting-list-edit-row"),o,s,a;if(this.keyValueSuggester){let f=this.keyValueSuggester(this.model.items.map(({value:{data:m}})=>m),n);t={...t,value:{type:"enum",data:t.value.data,options:f?f.options:[]}}}switch(t.value.type){case"string":o=this.renderInputBox(t.value,i);break;case"enum":o=this.renderDropdown(t.value,i),a=t.value.options,t.value.options.length&&(s=this.isItemNew(t)?a[0].value:t.value.data);break}let l=()=>({value:{type:"string",data:o.value},sibling:p?.value}),d=f=>({value:{type:"enum",data:f,options:a??[]}}),c=f=>{f.equals(3)?this.handleItemChange(t,l(),n):f.equals(9)&&(this.cancelEdit(),f.preventDefault()),i?.focus()};if(t.value.type!=="string"){let f=o;this.listDisposables.add(f.onDidSelect(({selected:m})=>{s=m}))}else{let f=o;this.listDisposables.add(dn(f.inputElement,ee.KEY_DOWN,c))}let p;ln(t.sibling)?o instanceof bs&&o.element.classList.add("no-sibling"):(p=new bs(i,this.contextViewService,{placeholder:this.getLocalizedStrings().siblingInputPlaceholder,inputBoxStyles:Bc({inputBackground:Iv,inputForeground:Sv,inputBorder:Fd})}),p.element.classList.add("setting-list-siblingInput"),this.listDisposables.add(p),p.value=t.sibling,this.listDisposables.add(dn(p.inputElement,ee.KEY_DOWN,c)));let h=this.listDisposables.add(new Kr(i,fa));h.label=u("okButton","OK"),h.element.classList.add("setting-list-ok-button"),this.listDisposables.add(h.onDidClick(()=>{t.value.type==="string"?this.handleItemChange(t,l(),n):this.handleItemChange(t,d(s),n)}));let g=this.listDisposables.add(new Kr(i,{secondary:!0,...fa}));return g.label=u("cancelButton","Cancel"),g.element.classList.add("setting-list-cancel-button"),this.listDisposables.add(g.onDidClick(()=>this.cancelEdit())),this.listDisposables.add(Ys(()=>{o.focus(),o instanceof bs&&o.select()})),i}isItemNew(t){return t.value.data===""}addTooltipsToRow(t,{value:n,sibling:i}){let o=ln(i)?u("listValueHintLabel","List item `{0}`",n.data):u("listSiblingHintLabel","List item `{0}` with sibling `${1}`",n.data,i),{rowElement:s}=t;this.listDisposables.add(this.hoverService.setupManagedHover(pt("mouse"),s,o)),s.setAttribute("aria-label",o)}getLocalizedStrings(){return{deleteActionTooltip:u("removeItem","Remove Item"),editActionTooltip:u("editItem","Edit Item"),addButtonLabel:u("addItem","Add Item"),inputPlaceholder:u("itemInputPlaceholder","Item..."),siblingInputPlaceholder:u("listSiblingInputPlaceholder","Sibling...")}}renderInputBox(t,n){let i=new bs(n,this.contextViewService,{placeholder:this.getLocalizedStrings().inputPlaceholder,inputBoxStyles:Bc({inputBackground:Iv,inputForeground:Sv,inputBorder:Fd})});return i.element.classList.add("setting-list-valueInput"),this.listDisposables.add(i),i.value=t.data.toString(),i}renderDropdown(t,n){if(t.type!=="enum")throw new Error("Valuetype must be enum.");let i=this.createBasicSelectBox(t),o=ri(".setting-list-object-list-row");return i.render(o),n.appendChild(o),i}};Pp=_([y(1,Ci),y(2,Wo),y(3,rr)],Pp);var b0=class extends Pp{getContainerClasses(){return["setting-list-include-exclude-widget"]}addDragAndDrop(e,t,n){}addTooltipsToRow(e,t){let n=ln(t.sibling)?u("excludePatternHintLabel","Exclude files matching `{0}`",t.value.data):u("excludeSiblingHintLabel","Exclude files matching `{0}`, only when a file matching `{1}` is present",t.value.data,t.sibling);t.source&&(n+=u("excludeIncludeSource",". Default value provided by `{0}`",t.source));let i=new jo().appendMarkdown(n),{rowElement:o}=e;this.listDisposables.add(this.hoverService.setupManagedHover(pt("mouse"),o,{markdown:i,markdownNotSupportedFallback:n})),o.setAttribute("aria-label",n)}getLocalizedStrings(){return{deleteActionTooltip:u("removeExcludeItem","Remove Exclude Item"),editActionTooltip:u("editExcludeItem","Edit Exclude Item"),addButtonLabel:u("addPattern","Add Pattern"),inputPlaceholder:u("excludePatternInputPlaceholder","Exclude Pattern..."),siblingInputPlaceholder:u("excludeSiblingInputPlaceholder","When Pattern Is Present...")}}},v0=class extends Pp{getContainerClasses(){return["setting-list-include-exclude-widget"]}addDragAndDrop(e,t,n){}addTooltipsToRow(e,t){let n=ln(t.sibling)?u("includePatternHintLabel","Include files matching `{0}`",t.value.data):u("includeSiblingHintLabel","Include files matching `{0}`, only when a file matching `{1}` is present",t.value.data,t.sibling);t.source&&(n+=u("excludeIncludeSource",". Default value provided by `{0}`",t.source));let i=new jo().appendMarkdown(n),{rowElement:o}=e;this.listDisposables.add(this.hoverService.setupManagedHover(pt("mouse"),o,{markdown:i,markdownNotSupportedFallback:n})),o.setAttribute("aria-label",n)}getLocalizedStrings(){return{deleteActionTooltip:u("removeIncludeItem","Remove Include Item"),editActionTooltip:u("editIncludeItem","Edit Include Item"),addButtonLabel:u("addPattern","Add Pattern"),inputPlaceholder:u("includePatternInputPlaceholder","Include Pattern..."),siblingInputPlaceholder:u("includeSiblingInputPlaceholder","When Pattern Is Present...")}}},Tv=class extends Jg{constructor(t,n,i,o){super(t,n,i);this.hoverService=o}currentSettingKey="";showAddButton=!0;keySuggester=()=>{};valueSuggester=()=>{};setValue(t,n){this.showAddButton=n?.showAddButton??this.showAddButton,this.keySuggester=n?.keySuggester??this.keySuggester,this.valueSuggester=n?.valueSuggester??this.valueSuggester,Pi(n)&&n.settingKey!==this.currentSettingKey&&(this.model.setEditKey("none"),this.model.select(null),this.currentSettingKey=n.settingKey),super.setValue(t)}isItemNew(t){return t.key.data===""&&t.value.data===""}isAddButtonVisible(){return this.showAddButton}getEmptyItem(){return{key:{type:"string",data:""},value:{type:"string",data:""},removable:!0,resetable:!1}}getContainerClasses(){return["setting-list-object-widget"]}getActionsForItem(t,n){let i=[{class:Ae.asClassName(hg),enabled:!0,id:"workbench.action.editListItem",label:"",tooltip:this.getLocalizedStrings().editActionTooltip,run:()=>this.editSetting(n)}];return t.resetable&&i.push({class:Ae.asClassName(H8),enabled:!0,id:"workbench.action.resetListItem",label:"",tooltip:this.getLocalizedStrings().resetActionTooltip,run:()=>this._onDidChangeList.fire({type:"reset",originalItem:t,targetIndex:n})}),t.removable&&i.push({class:Ae.asClassName(vF),enabled:!0,id:"workbench.action.removeListItem",label:"",tooltip:this.getLocalizedStrings().deleteActionTooltip,run:()=>this._onDidChangeList.fire({type:"remove",originalItem:t,targetIndex:n})}),i}renderHeader(){let t=ri(".setting-list-row-header"),n=q(t,ri(".setting-list-object-key")),i=q(t,ri(".setting-list-object-value")),{keyHeaderText:o,valueHeaderText:s}=this.getLocalizedStrings();return n.textContent=o,i.textContent=s,t}renderItem(t,n){let i=ri(".setting-list-row");i.classList.add("setting-list-object-row");let o=q(i,ri(".setting-list-object-key")),s=q(i,ri(".setting-list-object-value"));return o.textContent=t.key.data,s.textContent=t.value.data.toString(),{rowElement:i,keyElement:o,valueElement:s}}renderEdit(t,n){let i=ri(".setting-list-edit-row.setting-list-object-row"),o={...t},s=m=>{o.key=m,g.enabled=m.data!=="";let b=this.valueSuggester(m.data)??t.value;this.shouldUseSuggestion(t.value,o.value,b)&&(a(b),h())},a=m=>{o.value=m},l,d;if(this.showAddButton){if(this.isItemNew(t)){let v=this.keySuggester(this.model.items.map(({key:{data:S}})=>S));if(Pi(v)){o.key=v;let S=this.valueSuggester(o.key.data);a(S??o.value)}}let{widget:m,element:b}=this.renderEditWidget(o.key,{idx:n,isKey:!0,originalItem:t,changedItem:o,update:s});l=m,d=b}else d=ri(".setting-list-object-key"),d.textContent=t.key.data;let c,p=ri(".setting-list-object-value-container"),h=()=>{let{widget:m,element:b}=this.renderEditWidget(o.value,{idx:n,isKey:!1,originalItem:t,changedItem:o,update:a});c=m,Kt(p),p.append(b)};h(),i.append(d,p);let g=this.listDisposables.add(new Kr(i,fa));g.enabled=o.key.data!=="",g.label=u("okButton","OK"),g.element.classList.add("setting-list-ok-button"),this.listDisposables.add(g.onDidClick(()=>this.handleItemChange(t,o,n)));let f=this.listDisposables.add(new Kr(i,{secondary:!0,...fa}));return f.label=u("cancelButton","Cancel"),f.element.classList.add("setting-list-cancel-button"),this.listDisposables.add(f.onDidClick(()=>this.cancelEdit())),this.listDisposables.add(Ys(()=>{let m=l??c;m.focus(),m instanceof bs&&m.select()})),i}renderEditWidget(t,n){switch(t.type){case"string":return this.renderStringEditWidget(t,n);case"enum":return this.renderEnumEditWidget(t,n);case"boolean":return this.renderEnumEditWidget({type:"enum",data:t.data.toString(),options:[{value:"true"},{value:"false"}]},n)}}renderStringEditWidget(t,{idx:n,isKey:i,originalItem:o,changedItem:s,update:a}){let l=ri(i?".setting-list-object-input-key":".setting-list-object-input-value"),d=new bs(l,this.contextViewService,{placeholder:i?u("objectKeyInputPlaceholder","Key"):u("objectValueInputPlaceholder","Value"),inputBoxStyles:Bc({inputBackground:Iv,inputForeground:Sv,inputBorder:Fd})});d.element.classList.add("setting-list-object-input"),this.listDisposables.add(d),d.value=t.data,this.listDisposables.add(d.onDidChange(p=>a({...t,data:p})));let c=p=>{p.equals(3)?this.handleItemChange(o,s,n):p.equals(9)&&(this.cancelEdit(),p.preventDefault())};return this.listDisposables.add(dn(d.inputElement,ee.KEY_DOWN,c)),{widget:d,element:l}}renderEnumEditWidget(t,{isKey:n,changedItem:i,update:o}){let s=this.createBasicSelectBox(t),a=n?i.key:i.value;this.listDisposables.add(s.onDidSelect(({selected:c})=>o(a.type==="boolean"?{...a,data:c==="true"}:{...a,data:c})));let l=ri(".setting-list-object-input");return l.classList.add(n?"setting-list-object-input-key":"setting-list-object-input-value"),s.render(l),t.options.findIndex(c=>t.data===c.value)===-1&&t.options.length?o(a.type==="boolean"?{...a,data:!0}:{...a,data:t.options[0].value}):a.type==="boolean"&&o({...a,data:t.data==="true"}),{widget:s,element:l}}shouldUseSuggestion(t,n,i){if(i.type!=="enum"&&i.type===n.type&&i.data===n.data)return!1;if(t.data==="")return!0;if(n.type===i.type&&i.type!=="enum")return!1;if(n.type==="enum"&&i.type==="enum"){let o=new Set(n.options.map(({value:s})=>s));if(i.options.forEach(({value:s})=>o.delete(s)),o.size===0)return!1}return!0}addTooltipsToRow(t,n){let{keyElement:i,valueElement:o,rowElement:s}=t,a;n.source?a=u("objectPairHintLabelWithSource","The property `{0}` is set to `{1}` by `{2}`.",n.key.data,n.value.data,n.source):a=u("objectPairHintLabel","The property `{0}` is set to `{1}`.",n.key.data,n.value.data);let l={markdown:new jo().appendMarkdown(a),markdownNotSupportedFallback:a},d=this.getEnumDescription(n.key)??n.keyDescription??l;this.listDisposables.add(this.hoverService.setupManagedHover(pt("mouse"),i,d));let c=this.getEnumDescription(n.value)??l;this.listDisposables.add(this.hoverService.setupManagedHover(pt("mouse"),o,c)),s.setAttribute("aria-label",a)}getEnumDescription(t){return t.type==="enum"?t.options.find(({value:i})=>t.data===i)?.description:void 0}getLocalizedStrings(){return{deleteActionTooltip:u("removeItem","Remove Item"),resetActionTooltip:u("resetItem","Reset Item"),editActionTooltip:u("editItem","Edit Item"),addButtonLabel:u("addItem","Add Item"),keyHeaderText:u("objectKeyHeader","Item"),valueHeaderText:u("objectValueHeader","Value")}}};Tv=_([y(1,Ci),y(2,Wo),y(3,rr)],Tv);var em=class extends Jg{constructor(t,n,i,o){super(t,n,i);this.hoverService=o}currentSettingKey="";setValue(t,n){Pi(n)&&n.settingKey!==this.currentSettingKey&&(this.model.setEditKey("none"),this.model.select(null),this.currentSettingKey=n.settingKey),super.setValue(t)}isItemNew(t){return!t.key.data&&!t.value.data}getEmptyItem(){return{key:{type:"string",data:""},value:{type:"boolean",data:!1},removable:!1,resetable:!0}}getContainerClasses(){return["setting-list-object-widget"]}getActionsForItem(t,n){return[]}isAddButtonVisible(){return!1}renderHeader(){}renderDataOrEditItem(t,n,i){let o=this.renderEdit(t,n);return o.setAttribute("role","listitem"),o}renderItem(t,n){let i=ri(".blank-row"),o=ri(".blank-row-key");return{rowElement:i,keyElement:o}}renderEdit(t,n){let i=ri(".setting-list-edit-row.setting-list-object-row.setting-item-bool"),o={...t},s=h=>{o.value.data=h,this.handleItemChange(t,o,n)},a=t.keyDescription?`${t.keyDescription} (${t.key.data})`:t.key.data,{element:l,widget:d}=this.renderEditWidget(o.value.data,a,s);i.appendChild(l);let c=q(i,ri(".setting-list-object-value"));c.textContent=a;let p={rowElement:i,keyElement:c,valueElement:d.domNode};return this.addTooltipsToRow(p,t),this._register(U(c,ee.MOUSE_DOWN,h=>{h.target.tagName.toLowerCase()!=="a"&&(d.checked=!d.checked,s(d.checked)),qe.stop(h)})),i}renderEditWidget(t,n,i){let o=new Er({icon:re.check,actionClassName:"setting-value-checkbox",isChecked:t,title:n,...Af});this.listDisposables.add(o);let s=ri(".setting-list-object-input");return s.classList.add("setting-list-object-input-key-checkbox"),o.domNode.classList.add("setting-value-checkbox"),s.appendChild(o.domNode),this._register(U(s,ee.MOUSE_DOWN,a=>{o.checked=!o.checked,i(o.checked),a.stopImmediatePropagation()})),{widget:o,element:s}}addTooltipsToRow(t,n){let i=u("objectPairHintLabel","The property `{0}` is set to `{1}`.",n.key.data,n.value.data),o=n.keyDescription??i,{rowElement:s,keyElement:a,valueElement:l}=t;this.listDisposables.add(this.hoverService.setupManagedHover(pt("mouse"),a,o)),l.setAttribute("aria-label",i),s.setAttribute("aria-label",i)}getLocalizedStrings(){return{deleteActionTooltip:u("removeItem","Remove Item"),resetActionTooltip:u("resetItem","Reset Item"),editActionTooltip:u("editItem","Edit Item"),addButtonLabel:u("addItem","Add Item"),keyHeaderText:u("objectKeyHeader","Item"),valueHeaderText:u("objectValueHeader","Value")}}};em=_([y(1,Ci),y(2,Wo),y(3,rr)],em);var En=ie;function Gee(r){let e=typeof r.defaultValue=="object"?r.defaultValue??{}:{},t=r.isConfigured?{...e,...r.scopeValue}:e;return Object.keys(t).filter(n=>!!t[n]).map(n=>{let i=e[n],o;if(i===t[n]&&r.setting.type==="object"&&r.defaultValueSource instanceof Map){let l=r.defaultValueSource.get(`${r.setting.key}.${n}`);o=typeof l=="string"?l:l?.displayName}let s=t[n],a=typeof s=="boolean"?void 0:s.when;return{value:{type:"string",data:n},sibling:a,elementType:r.valueType,source:o}})}function jee(r,e){let t=new Set(r);return e.forEach(({key:n})=>t.delete(n.data)),t.size===0}function jC(r){if(r.anyOf)return r.anyOf.map(jC).flat();let e=r.enumDescriptions??[];return(r.enum??[]).map((t,n)=>{let i=n<e.length?e[n]:void 0;return{value:t,description:i}})}function $C(r){return r.anyOf?r.anyOf.map($C).some(t=>t==="enum")?"enum":"string":r.type==="boolean"?"boolean":r.type==="string"&&Pi(r.enum)&&r.enum.length>0?"enum":"string"}function HV(r,e,t){return r==="boolean"?{type:r,data:!!e}:r==="enum"?{type:r,data:""+e,options:t}:{type:r,data:""+e}}function $ee(r){let e=typeof r.defaultValue=="object"?r.defaultValue??{}:{},t=typeof r.scopeValue=="object"?r.scopeValue??{}:{},n=r.isConfigured?{...e,...t}:e,{objectProperties:i,objectPatternProperties:o,objectAdditionalProperties:s}=r.setting,a=Object.entries(o??{}).map(([d,c])=>({pattern:new RegExp(d),schema:c})),l=Object.entries(i??{}).map(([d,c])=>({value:d,description:c.description}));return Object.keys(n).map(d=>{let c=e[d],p;if(c===n[d]&&r.setting.type==="object"&&r.defaultValueSource instanceof Map){let b=r.defaultValueSource.get(`${r.setting.key}.${d}`);p=typeof b=="string"?b:b?.displayName}if(Pi(i)&&d in i){let b=jC(i[d]);return{key:{type:"enum",data:d,options:l},value:HV($C(i[d]),n[d],b),keyDescription:i[d].description,removable:ln(c),resetable:!ln(c),source:p}}let h=c===void 0||m0(r.setting.key),g=!!c&&c!==n[d],f=a.find(({pattern:b})=>b.test(d))?.schema;if(f){let b=jC(f);return{key:{type:"string",data:d},value:HV($C(f),n[d],b),keyDescription:f.description,removable:h,resetable:g,source:p}}let m=jC(typeof s=="boolean"?{}:s??{});return{key:{type:"string",data:d},value:HV(typeof s=="object"?$C(s):"string",n[d],m),keyDescription:typeof s=="object"?s.description:void 0,removable:h,resetable:g,source:p}}).filter(d=>!ln(d.value.data))}function qee(r){let e=typeof r.defaultValue=="object"?r.defaultValue??{}:{},t=typeof r.scopeValue=="object"?r.scopeValue??{}:{},n=r.isConfigured?{...e,...t}:e,{objectProperties:i}=r.setting,o=[];for(let s in i){let a=e[s],l;if(a===n[s]&&r.setting.type==="object"&&r.defaultValueSource instanceof Map){let d=r.defaultValueSource.get(s);l=typeof d=="string"?d:d?.displayName}o.push({key:{type:"string",data:s},value:{type:"boolean",data:!!n[s]},keyDescription:i[s].description,removable:!1,resetable:!0,source:l})}return o}function Yee(r){return(e,t)=>{let n=[];return r.setting.enum&&r.setting.enum.forEach((i,o)=>{if(!r.setting.uniqueItems||t!==void 0&&i===e[t]||!e.includes(i)){let s=r.setting.enumDescriptions?.[o];n.push({value:i,description:s})}}),n.length>0?{type:"enum",data:n[0].value,options:n}:void 0}}function Xee(r){let{objectProperties:e}=r.setting,t=Object.keys(e??{});return n=>{let i=new Set(n),o=[];return t.forEach(s=>{i.has(s)||o.push({value:s,description:e[s].description})}),o.length>0?{type:"enum",data:o[0].value,options:o}:void 0}}function Qee(r){let{objectProperties:e,objectPatternProperties:t,objectAdditionalProperties:n}=r.setting,i=Object.entries(t??{}).map(([o,s])=>({pattern:new RegExp(o),schema:s}));return o=>{let s;Pi(e)&&o in e&&(s=e[o]);let a=s??i.find(({pattern:l})=>l.test(o))?.schema;if(Pi(a)?s=a:Pi(n)&&typeof n=="object"&&(s=n),Pi(s)){let l=$C(s);if(l==="boolean")return{type:l,data:s.default??!0};if(l==="enum"){let d=jC(s);return{type:l,data:s.default??d[0].value,options:d}}else return{type:l,data:s.default??""}}}}function y0(r){return r==="number"||r==="integer"}function Zee(r,e){let t={};for(let n in e){let i,o=r.setting.objectPatternProperties,s=r.setting.objectProperties,a=r.setting.objectAdditionalProperties;if(s){for(let l in s)if(l===n){i=y0(s[l].type);break}}if(i===void 0&&o){for(let l in o)if(n.match(l)){i=y0(o[l].type);break}}i===void 0&&a&&typeof a!="boolean"&&y0(a.type)&&(i=!0),t[n]=i?Number(e[n]):e[n]}return t}function Jee(r){if(!r.value||!Array.isArray(r.value))return[];if(r.setting.arrayItemType==="enum"){let e=[];return r.setting.enum&&(e=r.setting.enum.map((t,n)=>({value:t,description:r.setting.enumDescriptions?.[n]}))),r.value.map(t=>({value:{type:"enum",data:t,options:e}}))}else return r.value.map(e=>({value:{type:"string",data:e}}))}function ete(r,e){return r.setting.enum&&r.setting.uniqueItems?r.setting.enum.length-e.length>0:!0}function o2(r,e,t){let n=l6(e);return{tree:a6(r,n,t),leftoverSettings:n}}function r6(r,e,t,n){return[...l6(r)].filter(o=>o.restricted&&FV(o.key,e,t,n).isConfigured)}async function s6(r,e){let t=new Map,n=(s,a,l)=>{if(!t.has(s)){let d={id:s,label:a,children:[]};t.set(s,d)}t.get(s).children.push(l)},i=async s=>{let a=s.sections.map(h=>h.settings).flat(),l=s.extensionInfo.id,d=await r.getExtension(l),c=d?.displayName??d?.name??l,p={id:s.id||s.title,label:s.title,order:s.order,settings:a};n(l,c,p)},o=e.map(s=>i(s));return Promise.all(o).then(()=>{let s=[];for(let a of t.values()){for(let l of a.children)l.settings?.sort((d,c)=>_b(d.order,c.order));if(a.children.length===1)s.push({id:a.id,label:a.children[0].label,settings:a.children[0].settings});else{a.children.sort((d,c)=>_b(d.order,c.order));let l=a.children.find(d=>d.label===a.label);if(l&&!l.children){let d=a.children.filter(c=>c!==l);s.push({id:a.id,label:a.label,settings:l.settings,children:d})}else s.push(a)}}return s.sort((a,l)=>a.label.localeCompare(l.label)),{id:"extensions",label:u("extensions","Extensions"),children:s}})}function a6(r,e,t){let n;r.children&&(n=r.children.map(o=>a6(o,e,t)).filter(o=>o.children?.length||o.settings?.length));let i;if(r.settings&&(i=r.settings.map(o=>nte(e,o,t)).flat()),!n&&!i)throw new Error(`TOC node has no child groups or settings: ${r.id}`);return{id:r.id,label:r.label,children:n,settings:i}}var tte=[/^settingsSync\..*/,/^sync\..*/,/^workbench.fontAliasing$/];function nte(r,e,t){let n=[];return r.forEach(i=>{ote(i,e)&&(n.push(i),r.delete(i))}),!n.length&&!tte.some(i=>i.test(e))&&t.warn(`Settings pattern "${e}" doesn't match any settings`),n.sort((i,o)=>i.key.localeCompare(o.key))}var i6=new Map;function ite(r){return r=vi(r).replace(/\\\*/g,".*"),new RegExp(`^${r}$`,"i")}function ote(r,e){let t=i6.get(e);return t||(t=ite(e),i6.set(e,t)),t.test(r.key)}function l6(r){let e=new Set;for(let t of r)for(let n of t.sections)for(let i of n.settings)(!i.overrides||!i.overrides.length)&&e.add(i);return e}var d6="settings.text.template",c6="settings.multilineText.template",u6="settings.number.template",p6="settings.enum.template",h6="settings.bool.template",g6="settings.array.template",m6="settings.exclude.template",f6="settings.include.template",b6="settings.object.template",v6="settings.boolObject.template",I0="settings.complex.template",y6="settings.newExtensions.template",I6="settings.group.template",S6="settings.extensionToggle.template";function rte(r){r.querySelectorAll(`
		[tabindex="0"],
		input:not([tabindex="-1"]),
		select:not([tabindex="-1"]),
		textarea:not([tabindex="-1"]),
		a:not([tabindex="-1"]),
		button:not([tabindex="-1"]),
		area:not([tabindex="-1"])
	`).forEach(t=>{t.setAttribute(Ht.ELEMENT_FOCUSABLE_ATTR,"true"),t.setAttribute("tabindex","-1")})}function ste(r){r.querySelectorAll(`[${Ht.ELEMENT_FOCUSABLE_ATTR}="true"]`).forEach(t=>{t.removeAttribute(Ht.ELEMENT_FOCUSABLE_ATTR),t.setAttribute("tabindex","0")})}var Ht=class extends N{constructor(t,n,i,o,s,a,l,d,c,p,h,g,f,m,b){super();this.settingActions=t;this.disposableActionFactory=n;this._themeService=i;this._contextViewService=o;this._openerService=s;this._instantiationService=a;this._commandService=l;this._contextMenuService=d;this._keybindingService=c;this._configService=p;this._extensionsService=h;this._extensionsWorkbenchService=g;this._productService=f;this._telemetryService=m;this._hoverService=b;this.markdownRenderer=this._register(a.createInstance(Nd,{})),this.ignoredSettings=g0(zC(),this._configService),this._register(this._configService.onDidChangeConfiguration(v=>{this.ignoredSettings=g0(zC(),this._configService),this._onDidChangeIgnoredSettings.fire()}))}static CONTROL_CLASS="setting-control-focus-target";static CONTROL_SELECTOR="."+this.CONTROL_CLASS;static CONTENTS_CLASS="setting-item-contents";static CONTENTS_SELECTOR="."+this.CONTENTS_CLASS;static ALL_ROWS_SELECTOR=".monaco-list-row";static SETTING_KEY_ATTR="data-key";static SETTING_ID_ATTR="data-id";static ELEMENT_FOCUSABLE_ATTR="data-focusable";_onDidClickOverrideElement=this._register(new T);onDidClickOverrideElement=this._onDidClickOverrideElement.event;_onDidChangeSetting=this._register(new T);onDidChangeSetting=this._onDidChangeSetting.event;_onDidOpenSettings=this._register(new T);onDidOpenSettings=this._onDidOpenSettings.event;_onDidClickSettingLink=this._register(new T);onDidClickSettingLink=this._onDidClickSettingLink.event;_onDidFocusSetting=this._register(new T);onDidFocusSetting=this._onDidFocusSetting.event;ignoredSettings;_onDidChangeIgnoredSettings=this._register(new T);onDidChangeIgnoredSettings=this._onDidChangeIgnoredSettings.event;_onDidChangeSettingHeight=this._register(new T);onDidChangeSettingHeight=this._onDidChangeSettingHeight.event;_onApplyFilter=this._register(new T);onApplyFilter=this._onApplyFilter.event;markdownRenderer;renderCommonTemplate(t,n,i){n.classList.add("setting-item"),n.classList.add("setting-item-"+i);let o=new X,s=q(n,En(Ht.CONTENTS_SELECTOR));s.classList.add("settings-row-inner-container");let a=q(s,En(".setting-item-title")),l=q(a,En(".setting-item-cat-label-container")),d=q(l,En("span.setting-item-category")),c=q(l,En("span.setting-item-label")),p=o.add(new Hd(c)),h=this._instantiationService.createInstance(Zg,a);o.add(h);let g=q(s,En(".setting-item-description")),f=q(s,En(".setting-item-modified-indicator"));o.add(this._hoverService.setupManagedHover(pt("mouse"),f,()=>u("modified","The setting has been configured in the current scope.")));let m=q(s,En(".setting-item-value")),b=q(m,En("div.setting-item-control")),v=q(s,En(".setting-item-deprecation-message")),S=q(s,En(".setting-toolbar-container")),x=this.renderSettingToolbar(S),E={toDispose:o,elementDisposables:o.add(new X),containerElement:s,categoryElement:d,labelElement:p,descriptionElement:g,controlElement:b,deprecationWarningElement:v,indicatorsLabel:h,toolbar:x};return o.add(U(b,ee.MOUSE_DOWN,w=>w.stopPropagation())),o.add(U(a,ee.MOUSE_ENTER,w=>s.classList.add("mouseover"))),o.add(U(a,ee.MOUSE_LEAVE,w=>s.classList.remove("mouseover"))),E}addSettingElementFocusHandler(t){let n=br(t.containerElement);t.toDispose.add(n),n.onDidBlur(()=>{t.containerElement.classList.contains("focused")&&t.containerElement.classList.remove("focused")}),n.onDidFocus(()=>{t.containerElement.classList.add("focused"),t.context&&this._onDidFocusSetting.fire(t.context)})}renderSettingToolbar(t){let n=this._keybindingService.lookupKeybinding(DD),i=u("settingsContextMenuTitle","More Actions... ");return n&&(i+=` (${n&&n.getLabel()})`),new Rb(t,this._contextMenuService,{toggleMenuTitle:i,renderDropdownAsChildElement:!li,moreIcon:N8})}renderSettingElement(t,n,i){let o=t.element;o.inspectSelf(),i.context=o,i.toolbar.context=o;let s=this.disposableActionFactory(o.setting,o.settingsTarget);s.forEach(p=>pu(p)&&i.elementDisposables.add(p)),i.toolbar.setActions([],[...this.settingActions,...s]);let a=o.setting;i.containerElement.classList.toggle("is-configured",o.isConfigured),i.containerElement.setAttribute(Ht.SETTING_KEY_ATTR,o.setting.key),i.containerElement.setAttribute(Ht.SETTING_ID_ATTR,o.id);let l=a.key+(o.isConfigured?" - Modified":"");if(i.categoryElement.textContent=o.displayCategory?o.displayCategory+": ":"",i.elementDisposables.add(this._hoverService.setupManagedHover(pt("mouse"),i.categoryElement,l)),i.labelElement.text=o.displayLabel,i.labelElement.title=l,i.descriptionElement.innerText="",o.setting.descriptionIsMarkdown){let p=this.renderSettingMarkdown(o,i.containerElement,o.description,i.elementDisposables);i.descriptionElement.appendChild(p)}else i.descriptionElement.innerText=o.description;i.indicatorsLabel.updateScopeOverrides(o,this._onDidClickOverrideElement,this._onApplyFilter),i.elementDisposables.add(this._configService.onDidChangeConfiguration(p=>{p.affectsConfiguration(Oc)&&i.indicatorsLabel.updateScopeOverrides(o,this._onDidClickOverrideElement,this._onApplyFilter)}));let d=p=>this._onDidChangeSetting.fire({key:o.setting.key,value:p,type:i.context.valueType,manualReset:!1,scope:o.setting.scope}),c=o.setting.deprecationMessage||"";c&&o.setting.deprecationMessageIsMarkdown?(i.deprecationWarningElement.innerText="",i.deprecationWarningElement.appendChild(this.renderSettingMarkdown(o,i.containerElement,o.setting.deprecationMessage,i.elementDisposables))):i.deprecationWarningElement.innerText=c,i.deprecationWarningElement.prepend(En(".codicon.codicon-error")),i.containerElement.classList.toggle("is-deprecated",!!c),this.renderValue(o,i,d),i.indicatorsLabel.updateWorkspaceTrust(o),i.indicatorsLabel.updateSyncIgnored(o,this.ignoredSettings),i.indicatorsLabel.updateDefaultOverrideIndicator(o),i.elementDisposables.add(this.onDidChangeIgnoredSettings(()=>{i.indicatorsLabel.updateSyncIgnored(o,this.ignoredSettings)})),this.updateSettingTabbable(o,i),i.elementDisposables.add(o.onDidChangeTabbable(()=>{this.updateSettingTabbable(o,i)}))}updateSettingTabbable(t,n){t.tabbable?ste(n.containerElement):rte(n.containerElement)}renderSettingMarkdown(t,n,i,o){i=r2(i);let s=this.markdownRenderer.render({value:i,isTrusted:!0},{actionHandler:{callback:a=>{if(a.startsWith("#")){let l={source:t,targetKey:a.substring(1)};this._onDidClickSettingLink.fire(l)}else this._openerService.open(a,{allowCommands:!0}).catch(Be)},disposables:o},asyncRenderCallback:()=>{let a=n.clientHeight;a&&this._onDidChangeSettingHeight.fire({element:t,height:a})}});return o.add(s),s.element.classList.add("setting-item-markdown"),C6(s.element),s.element}disposeTemplate(t){t.toDispose.dispose()}disposeElement(t,n,i,o){i.elementDisposables?.clear()}};Ht=_([y(2,Ci),y(3,Wo),y(4,db),y(5,we),y(6,Xn),y(7,or),y(8,_n),y(9,Ge),y(10,wd),y(11,qS),y(12,vs),y(13,er),y(14,rr)],Ht);var UV=class{templateId=I6;renderTemplate(e){return e.classList.add("group-title"),{parent:e,toDispose:new X}}renderElement(e,t,n){n.parent.innerText="";let i=q(n.parent,En("div.settings-group-title-label.settings-row-inner-container"));i.classList.add(`settings-group-level-${e.element.level}`),i.textContent=e.element.label,e.element.isFirstGroup&&i.classList.add("settings-group-first")}disposeTemplate(e){}},GC=class{constructor(e){this._commandService=e}templateId=y6;renderTemplate(e){let t=new X;e.classList.add("setting-item-new-extensions");let n=new Kr(e,{title:!0,...fa});t.add(n),t.add(n.onDidClick(()=>{i.context&&this._commandService.executeCommand("workbench.extensions.action.showExtensionsWithIds",i.context.extensionIds)})),n.label=u("newExtensionsButtonLabel","Show matching extensions"),n.element.classList.add("settings-new-extensions-button");let i={button:n,toDispose:t};return i}renderElement(e,t,n){n.context=e.element}disposeTemplate(e){rt(e.toDispose)}};GC=_([y(0,Xn)],GC);var zV=class r extends Ht{static EDIT_IN_JSON_LABEL=u("editInSettingsJson","Edit in settings.json");templateId=I0;renderTemplate(e){let t=this.renderCommonTemplate(null,e,"complex"),n=q(t.controlElement,En("a.edit-in-settings-button"));n.classList.add(Ht.CONTROL_CLASS),n.role="button";let i=En(".setting-item-validation-message");t.containerElement.appendChild(i);let o={...t,button:n,validationErrorMessageElement:i};return this.addSettingElementFocusHandler(o),o}renderElement(e,t,n){super.renderSettingElement(e,t,n)}renderValue(e,t,n){let i=kE(e.setting.key),o=u("editLanguageSettingLabel","Edit settings for {0}",i),s=e.setting.isLanguageTagSetting;t.button.textContent=s?o:r.EDIT_IN_JSON_LABEL;let a=l=>{s?this._onApplyFilter.fire(`@${ya}${i}`):this._onDidOpenSettings.fire(e.setting.key),l.preventDefault(),l.stopPropagation()};t.elementDisposables.add(U(t.button,ee.CLICK,l=>{a(l)})),t.elementDisposables.add(U(t.button,ee.KEY_DOWN,l=>{let d=new it(l);(d.equals(10)||d.equals(3))&&a(l)})),this.renderValidations(e,t),s?t.button.setAttribute("aria-label",o):t.button.setAttribute("aria-label",`${r.EDIT_IN_JSON_LABEL}: ${e.setting.key}`)}renderValidations(e,t){let n=e.isConfigured&&VN(e.value,e.setting.type);if(n){t.containerElement.classList.add("invalid-input"),t.validationErrorMessageElement.innerText=n;return}t.containerElement.classList.remove("invalid-input")}},KV=class extends Ht{templateId=g6;renderTemplate(e){let t=this.renderCommonTemplate(null,e,"list"),n=t.containerElement.querySelector(".setting-item-description"),i=En(".setting-item-validation-message");n.after(i);let o=this._instantiationService.createInstance(Pp,t.controlElement);o.domNode.classList.add(Ht.CONTROL_CLASS),t.toDispose.add(o);let s={...t,listWidget:o,validationErrorMessageElement:i};return this.addSettingElementFocusHandler(s),t.toDispose.add(o.onDidChangeList(a=>{let l=this.computeNewList(s,a);s.onChange?.(l)})),s}computeNewList(e,t){if(e.context){let n=[];if(Array.isArray(e.context.scopeValue)?n=[...e.context.scopeValue]:Array.isArray(e.context.value)&&(n=[...e.context.value]),t.type==="move"){let i=t.sourceIndex,o=t.targetIndex,s=n.splice(i,1)[0];n.splice(o,0,s)}else if(t.type==="remove"||t.type==="reset")n.splice(t.targetIndex,1);else if(t.type==="change"){let i=t.newItem.value.data.toString();t.targetIndex>-1?n[t.targetIndex]=i:n.push(i)}else t.type==="add"&&n.push(t.newItem.value.data.toString());return e.context.defaultValue&&Array.isArray(e.context.defaultValue)&&e.context.defaultValue.length===n.length&&e.context.defaultValue.join()===n.join()?void 0:n}}renderElement(e,t,n){super.renderSettingElement(e,t,n)}renderValue(e,t,n){let i=Jee(e),o=e.setting.enum?Yee(e):void 0;t.listWidget.setValue(i,{showAddButton:ete(e,i),keySuggester:o}),t.context=e,t.elementDisposables.add(me(()=>{t.listWidget.cancelEdit()})),t.onChange=s=>{if(s&&!T0(e,t,s,!1)){let a=e.setting.arrayItemType,l=y0(a)?s.map(d=>+d):s;n(l)}else n(s)},T0(e,t,i.map(s=>s.value.data.toString()),!0)}},S0=class extends Ht{renderTemplateWithWidget(e,t){t.domNode.classList.add(Ht.CONTROL_CLASS),e.toDispose.add(t);let n=e.containerElement.querySelector(".setting-item-description"),i=En(".setting-item-validation-message");n.after(i);let o={...e,validationErrorMessageElement:i};return t instanceof em?o.objectCheckboxWidget=t:o.objectDropdownWidget=t,this.addSettingElementFocusHandler(o),o}renderElement(e,t,n){super.renderSettingElement(e,t,n)}},GV=class extends S0{templateId=b6;renderTemplate(e){let t=this.renderCommonTemplate(null,e,"list"),n=this._instantiationService.createInstance(Tv,t.controlElement),i=this.renderTemplateWithWidget(t,n);return t.toDispose.add(n.onDidChangeList(o=>{this.onDidChangeObject(i,o)})),i}onDidChangeObject(e,t){let n=e.objectDropdownWidget;if(e.context){let i=m0(e.context.setting.key),o=typeof e.context.defaultValue=="object"?e.context.defaultValue??{}:{},s=typeof e.context.scopeValue=="object"?e.context.scopeValue??{}:{},a={...e.context.scopeValue},l=[];if(n.items.forEach((c,p)=>{(t.type==="change"||t.type==="move")&&t.targetIndex===p?(t.originalItem.key.data!==t.newItem.key.data&&i&&t.originalItem.key.data in o?a[t.originalItem.key.data]=null:delete a[t.originalItem.key.data],a[t.newItem.key.data]=t.newItem.value.data,l.push(t.newItem)):(t.type!=="change"&&t.type!=="move"||t.newItem.key.data!==c.key.data)&&(a[c.key.data]=c.value.data,l.push(c))}),t.type==="remove"||t.type==="reset"){let c=t.originalItem.key.data,p=t.type==="remove"&&i&&o[c]===t.originalItem.value.data;p?a[c]=null:delete a[c];let h=l.findIndex(f=>f.key.data===c),g=o[c];p||ln(o[c])&&h>-1?l.splice(h,1):!p&&h>-1&&(l[h].value.data=g)}else t.type==="add"&&(a[t.newItem.key.data]=t.newItem.value.data,l.push(t.newItem));Object.entries(a).forEach(([c,p])=>{s[c]!==p&&o[c]===p&&!(i&&p===null)&&delete a[c]});let d=Object.keys(a).length===0?void 0:a;e.objectDropdownWidget.setValue(l),e.onChange?.(d)}}renderValue(e,t,n){let i=$ee(e),{key:o,objectProperties:s,objectPatternProperties:a,objectAdditionalProperties:l}=e.setting;t.objectDropdownWidget.setValue(i,{settingKey:o,showAddButton:l===!1?!jee(Object.keys(s??{}),i)||Pi(a):!0,keySuggester:Xee(e),valueSuggester:Qee(e)}),t.context=e,t.elementDisposables.add(me(()=>{t.objectDropdownWidget.cancelEdit()})),t.onChange=d=>{if(d&&!T0(e,t,d,!1)){let c=Zee(e,d);n(c)}else n(d)},T0(e,t,e.value,!0)}},jV=class extends S0{templateId=v6;renderTemplate(e){let t=this.renderCommonTemplate(null,e,"list"),n=this._instantiationService.createInstance(em,t.controlElement),i=this.renderTemplateWithWidget(t,n);return t.toDispose.add(n.onDidChangeList(o=>{this.onDidChangeObject(i,o)})),i}onDidChangeObject(e,t){if(e.context){let n=e.objectCheckboxWidget,i=typeof e.context.defaultValue=="object"?e.context.defaultValue??{}:{},o=typeof e.context.scopeValue=="object"?e.context.scopeValue??{}:{},s={...e.context.scopeValue},a=[];if(t.type!=="change"){console.warn("Unexpected event type",t.type,"for bool object setting",e.context.setting.key);return}n.items.forEach((d,c)=>{t.targetIndex===c?(s[t.newItem.key.data]=t.newItem.value.data,a.push(t.newItem)):t.newItem.key.data!==d.key.data&&(s[d.key.data]=d.value.data,a.push(d))}),Object.entries(s).forEach(([d,c])=>{o[d]!==c&&i[d]===c&&delete s[d]});let l=Object.keys(s).length===0?void 0:s;e.objectCheckboxWidget.setValue(a),e.onChange?.(l),this._onDidFocusSetting.fire(e.context)}}renderValue(e,t,n){let i=qee(e),{key:o}=e.setting;t.objectCheckboxWidget.setValue(i,{settingKey:o}),t.context=e,t.onChange=s=>{n(s)}}},C0=class extends Ht{renderTemplate(e){let t=this.renderCommonTemplate(null,e,"list"),n=this._instantiationService.createInstance(this.isExclude()?b0:v0,t.controlElement);n.domNode.classList.add(Ht.CONTROL_CLASS),t.toDispose.add(n);let i={...t,includeExcludeWidget:n};return this.addSettingElementFocusHandler(i),t.toDispose.add(n.onDidChangeList(o=>this.onDidChangeIncludeExclude(i,o))),i}onDidChangeIncludeExclude(e,t){if(e.context){let o=function(s){let a=Object.keys(s).sort((d,c)=>d.localeCompare(c)),l={};for(let d of a)l[d]=s[d];return l};var n=o;let i={...e.context.scopeValue};t.type!=="add"&&(t.originalItem.value.data.toString()in e.context.defaultValue?i[t.originalItem.value.data.toString()]=!1:delete i[t.originalItem.value.data.toString()]),(t.type==="change"||t.type==="add"||t.type==="move")&&(t.newItem.value.data.toString()in e.context.defaultValue&&!t.newItem.sibling?delete i[t.newItem.value.data.toString()]:i[t.newItem.value.data.toString()]=t.newItem.sibling?{when:t.newItem.sibling}:!0),this._onDidChangeSetting.fire({key:e.context.setting.key,value:Object.keys(i).length===0?void 0:o(i),type:e.context.valueType,manualReset:!1,scope:e.context.setting.scope})}}renderElement(e,t,n){super.renderSettingElement(e,t,n)}renderValue(e,t,n){let i=Gee(e);t.includeExcludeWidget.setValue(i),t.context=e,t.elementDisposables.add(me(()=>{t.includeExcludeWidget.cancelEdit()}))}},$V=class extends C0{templateId=m6;isExclude(){return!0}},qV=class extends C0{templateId=f6;isExclude(){return!1}},ate=Bc({inputBackground:Iv,inputForeground:Sv,inputBorder:Fd}),x0=class extends Ht{MULTILINE_MAX_HEIGHT=150;renderTemplate(e,t){let n=this.renderCommonTemplate(null,e,"text"),i=q(n.containerElement,En(".setting-item-validation-message")),o={flexibleHeight:t,flexibleWidth:!1,flexibleMaxHeight:this.MULTILINE_MAX_HEIGHT,inputBoxStyles:ate},s=new bs(n.controlElement,this._contextViewService,o);n.toDispose.add(s),n.toDispose.add(s.onDidChange(l=>{a.onChange?.(l)})),n.toDispose.add(s),s.inputElement.classList.add(Ht.CONTROL_CLASS),s.inputElement.tabIndex=0;let a={...n,inputBox:s,validationErrorMessageElement:i};return this.addSettingElementFocusHandler(a),a}renderElement(e,t,n){super.renderSettingElement(e,t,n)}renderValue(e,t,n){t.onChange=void 0,t.inputBox.value=e.value,t.inputBox.setAriaLabel(e.setting.key),t.onChange=i=>{E0(e,t,!1)||n(i)},E0(e,t,!0)}},YV=class extends x0{templateId=d6;renderTemplate(e){let t=super.renderTemplate(e,!1);return t.toDispose.add(dn(t.inputBox.inputElement,ee.KEY_DOWN,n=>{(n.equals(16)||n.equals(18))&&n.preventDefault()})),t}},XV=class extends x0{templateId=c6;renderTemplate(e){return super.renderTemplate(e,!0)}renderValue(e,t,n){let i=o=>{e.value=o,n(o)};super.renderValue(e,t,i),t.elementDisposables.add(t.inputBox.onDidHeightChange(o=>{t.containerElement.clientHeight&&this._onDidChangeSettingHeight.fire({element:e,height:t.containerElement.clientHeight})})),t.inputBox.layout()}},QV=class extends Ht{templateId=p6;renderTemplate(e){let t=this.renderCommonTemplate(null,e,"enum"),n=TD({selectBackground:t0,selectForeground:n0,selectBorder:i0,selectListBorder:o0}),i=new ip([],0,this._contextViewService,n,{useCustomDrawn:!(li&&vu.pointerEvents)});t.toDispose.add(i),i.render(t.controlElement);let o=t.controlElement.querySelector("select");o&&(o.classList.add(Ht.CONTROL_CLASS),o.tabIndex=0),t.toDispose.add(i.onDidSelect(l=>{a.onChange?.(l.index)}));let s=t.containerElement.insertBefore(En(".setting-item-enumDescription"),t.descriptionElement.nextSibling),a={...t,selectBox:i,selectElement:o,enumDescriptionElement:s};return this.addSettingElementFocusHandler(a),a}renderElement(e,t,n){super.renderSettingElement(e,t,n)}renderValue(e,t,n){let i=e.setting.enumItemLabels?[...e.setting.enumItemLabels]:[],o=e.setting.enumDescriptions?[...e.setting.enumDescriptions]:[],s=[...e.setting.enum],a=e.setting.enumDescriptionsAreMarkdown,l=new X;t.elementDisposables.add(l);let d=!1;s.includes(e.defaultValue)||(s.unshift(e.defaultValue),o.unshift(""),i.unshift(""),d=!0);let c=o6(String(e.defaultValue)),p=s.map(String).map(o6).map((g,f)=>{let m=o[f]&&(a?r2(o[f],!1):o[f]);return{text:i[f]?i[f]:g,detail:i[f]?g:"",description:m,descriptionIsMarkdown:a,descriptionMarkdownActionHandler:{callback:b=>{this._openerService.open(b).catch(Be)},disposables:l},decoratorRight:g===c||d&&f===0?u("settings.Default","default"):""}});t.selectBox.setOptions(p),t.selectBox.setAriaLabel(e.setting.key);let h=s.indexOf(e.value);h===-1&&(h=0),t.onChange=void 0,t.selectBox.select(h),t.onChange=g=>{n(d&&g===0?e.defaultValue:s[g])},t.enumDescriptionElement.innerText=""}},lte=Bc({inputBackground:F3,inputForeground:B3,inputBorder:W3}),ZV=class extends Ht{templateId=u6;renderTemplate(e){let t=super.renderCommonTemplate(null,e,"number"),n=q(t.containerElement,En(".setting-item-validation-message")),i=new bs(t.controlElement,this._contextViewService,{type:"number",inputBoxStyles:lte});t.toDispose.add(i),t.toDispose.add(i.onDidChange(s=>{o.onChange?.(s)})),t.toDispose.add(i),i.inputElement.classList.add(Ht.CONTROL_CLASS),i.inputElement.tabIndex=0;let o={...t,inputBox:i,validationErrorMessageElement:n};return this.addSettingElementFocusHandler(o),o}renderElement(e,t,n){super.renderSettingElement(e,t,n)}renderValue(e,t,n){let i=e.valueType==="integer"||e.valueType==="nullable-integer"?parseInt:parseFloat,o=e.valueType==="nullable-integer"||e.valueType==="nullable-number"?s=>s===""?null:i(s):i;t.onChange=void 0,t.inputBox.value=typeof e.value=="number"?e.value.toString():"",t.inputBox.step=e.valueType.includes("integer")?"1":"any",t.inputBox.setAriaLabel(e.setting.key),t.onChange=s=>{E0(e,t,!1)||n(o(s))},E0(e,t,!0)}},JV=class extends Ht{templateId=h6;renderTemplate(e){e.classList.add("setting-item"),e.classList.add("setting-item-bool");let t=new X,n=q(e,En(Ht.CONTENTS_SELECTOR));n.classList.add("settings-row-inner-container");let i=q(n,En(".setting-item-title")),o=q(i,En("span.setting-item-category")),s=q(i,En("span.setting-item-label")),a=t.add(new Hd(s)),l=this._instantiationService.createInstance(Zg,i),d=q(n,En(".setting-item-value-description")),c=q(d,En(".setting-item-bool-control")),p=q(d,En(".setting-item-description")),h=q(n,En(".setting-item-modified-indicator"));t.add(this._hoverService.setupManagedHover(pt("mouse"),h,u("modified","The setting has been configured in the current scope.")));let g=q(n,En(".setting-item-deprecation-message")),f=new Er({icon:re.check,actionClassName:"setting-value-checkbox",isChecked:!0,title:"",...Af});c.appendChild(f.domNode),t.add(f),t.add(f.onChange(()=>{v.onChange(f.checked)})),t.add(U(p,ee.MOUSE_DOWN,S=>{S.target.tagName.toLowerCase()!=="a"&&(v.checkbox.checked=!v.checkbox.checked,v.onChange(f.checked)),qe.stop(S)})),f.domNode.classList.add(Ht.CONTROL_CLASS);let m=q(n,En(".setting-toolbar-container")),b=this.renderSettingToolbar(m);t.add(b);let v={toDispose:t,elementDisposables:t.add(new X),containerElement:n,categoryElement:o,labelElement:a,controlElement:c,checkbox:f,descriptionElement:p,deprecationWarningElement:g,indicatorsLabel:l,toolbar:b};return this.addSettingElementFocusHandler(v),t.add(U(c,"mousedown",S=>S.stopPropagation())),t.add(U(i,ee.MOUSE_ENTER,S=>n.classList.add("mouseover"))),t.add(U(i,ee.MOUSE_LEAVE,S=>n.classList.remove("mouseover"))),v}renderElement(e,t,n){super.renderSettingElement(e,t,n)}renderValue(e,t,n){t.onChange=void 0,t.checkbox.checked=e.value,t.checkbox.setTitle(e.setting.key),t.onChange=n}},e2=class extends Ht{templateId=S6;_onDidDismissExtensionSetting=this._register(new T);onDidDismissExtensionSetting=this._onDidDismissExtensionSetting.event;renderTemplate(e){let t=super.renderCommonTemplate(null,e,"extension-toggle"),n=new Kr(t.containerElement,{title:!1,...fa});n.element.classList.add("setting-item-extension-toggle-button"),n.label=u("showExtension","Show Extension");let i=new Kr(t.containerElement,{title:!1,secondary:!0,...fa});i.element.classList.add("setting-item-extension-dismiss-button"),i.label=u("dismiss","Dismiss");let o={...t,actionButton:n,dismissButton:i};return this.addSettingElementFocusHandler(o),o}renderElement(e,t,n){super.renderSettingElement(e,t,n)}renderValue(e,t,n){t.elementDisposables.clear();let i=e.setting.displayExtensionId;t.elementDisposables.add(t.actionButton.onDidClick(async()=>{this._telemetryService.publicLog2("ManageExtensionClick",{extensionId:i}),this._commandService.executeCommand("extension.open",i)})),t.elementDisposables.add(t.dismissButton.onDidClick(async()=>{this._telemetryService.publicLog2("DismissExtensionClick",{extensionId:i}),this._onDidDismissExtensionSetting.fire(i)}))}},wv=class extends N{constructor(t,n,i,o,s){super();this._instantiationService=t;this._contextMenuService=n;this._contextViewService=i;this._userDataProfilesService=o;this._userDataSyncEnablementService=s;this.settingActions=[new un("settings.resetSetting",u("resetSettingLabel","Reset Setting"),void 0,void 0,async p=>{p instanceof wo&&(p.isUntrusted||this._onDidChangeSetting.fire({key:p.setting.key,value:void 0,type:p.setting.type,manualReset:!0,scope:p.setting.scope}))}),new ei,this._instantiationService.createInstance(Ap),this._instantiationService.createInstance(Np),this._instantiationService.createInstance(Fp)];let a=(p,h)=>this.getActionsForSetting(p,h),l=p=>[],d=this._instantiationService.createInstance(e2,[],l),c=[this._instantiationService.createInstance(JV,this.settingActions,a),this._instantiationService.createInstance(ZV,this.settingActions,a),this._instantiationService.createInstance(KV,this.settingActions,a),this._instantiationService.createInstance(zV,this.settingActions,a),this._instantiationService.createInstance(YV,this.settingActions,a),this._instantiationService.createInstance(XV,this.settingActions,a),this._instantiationService.createInstance($V,this.settingActions,a),this._instantiationService.createInstance(qV,this.settingActions,a),this._instantiationService.createInstance(QV,this.settingActions,a),this._instantiationService.createInstance(GV,this.settingActions,a),this._instantiationService.createInstance(jV,this.settingActions,a),d];this.onDidClickOverrideElement=z.any(...c.map(p=>p.onDidClickOverrideElement)),this.onDidChangeSetting=z.any(...c.map(p=>p.onDidChangeSetting),this._onDidChangeSetting.event),this.onDidDismissExtensionSetting=d.onDidDismissExtensionSetting,this.onDidOpenSettings=z.any(...c.map(p=>p.onDidOpenSettings)),this.onDidClickSettingLink=z.any(...c.map(p=>p.onDidClickSettingLink)),this.onDidFocusSetting=z.any(...c.map(p=>p.onDidFocusSetting)),this.onDidChangeSettingHeight=z.any(...c.map(p=>p.onDidChangeSettingHeight)),this.onApplyFilter=z.any(...c.map(p=>p.onApplyFilter)),this.allRenderers=[...c,this._instantiationService.createInstance(UV),this._instantiationService.createInstance(GC)]}onDidClickOverrideElement;_onDidChangeSetting=this._register(new T);onDidChangeSetting;onDidDismissExtensionSetting;onDidOpenSettings;onDidClickSettingLink;onDidFocusSetting;onDidChangeSettingHeight;onApplyFilter;allRenderers;settingActions;getActionsForSetting(t,n){let i=[];return this._userDataProfilesService.isEnabled()&&t.scope!==1&&n===3&&i.push(this._instantiationService.createInstance(Wp,t)),this._userDataSyncEnablementService.isEnabled()&&!t.disallowSyncIgnore&&i.push(this._instantiationService.createInstance(Bp,t)),i.length&&i.splice(0,0,new ei),i}cancelSuggesters(){this._contextViewService.hideContextView()}showContextMenu(t,n){let i=n.querySelector(".monaco-toolbar");i&&this._contextMenuService.showContextMenu({getActions:()=>this.settingActions,getAnchor:()=>i,getActionsContext:()=>t})}getSettingDOMElementForDOMElement(t){let n=wu(t,Ht.CONTENTS_CLASS);return n||null}getDOMElementsForSettingKey(t,n){return t.querySelectorAll(`[${Ht.SETTING_KEY_ATTR}="${n}"]`)}getKeyForDOMElementInSetting(t){let n=this.getSettingDOMElementForDOMElement(t);return n&&n.getAttribute(Ht.SETTING_KEY_ATTR)}getIdForDOMElementInSetting(t){let n=this.getSettingDOMElementForDOMElement(t);return n&&n.getAttribute(Ht.SETTING_ID_ATTR)}dispose(){super.dispose(),this.settingActions.forEach(t=>{pu(t)&&t.dispose()}),this.allRenderers.forEach(t=>{pu(t)&&t.dispose()})}};wv=_([y(0,we),y(1,or),y(2,Wo),y(3,ua),y(4,Yg)],wv);function E0(r,e,t){if(r.setting.validator){let n=r.setting.validator(e.inputBox.value);if(n){e.containerElement.classList.add("invalid-input"),e.validationErrorMessageElement.innerText=n;let i=u("validationError","Validation Error.");return e.inputBox.inputElement.parentElement.setAttribute("aria-label",[i,n].join(" ")),t||Bs(i+" "+n),!0}else e.inputBox.inputElement.parentElement.removeAttribute("aria-label")}return e.containerElement.classList.remove("invalid-input"),!1}function T0(r,e,t,n){if(e.containerElement.classList.add("invalid-input"),r.setting.validator){let i=r.setting.validator(t);if(i&&i!==""){e.containerElement.classList.add("invalid-input"),e.validationErrorMessageElement.innerText=i;let o=u("validationError","Validation Error.");return e.containerElement.setAttribute("aria-label",[r.setting.key,o,i].join(" ")),n||Bs(o+" "+i),!0}else e.containerElement.setAttribute("aria-label",r.setting.key),e.containerElement.classList.remove("invalid-input")}return!1}function C6(r){for(let e=0;e<r.childNodes.length;e++){let t=r.childNodes.item(e);(t.tagName&&t.tagName.toLowerCase())==="img"?t.remove():C6(t)}}function r2(r,e=!0){return r.replace(/`#([^#\s`]+)#`|'#([^#\s']+)#'/g,(t,n,i)=>{let o=n??i,s=BV(o),a=`${s.category}: ${s.label}`;return e?`[${a}](#${o} "${o}")`:`"${a}"`})}function o6(r){return r&&r.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}var tm=class{constructor(e,t){this.viewState=e;this.environmentService=t}filter(e,t){if(this.viewState.filterToCategory&&e instanceof wo&&!this.settingContainedInGroup(e.setting,this.viewState.filterToCategory))return!1;if(e instanceof wo&&this.viewState.settingsTarget!==3){let n=!!this.environmentService.remoteAuthority;if(!e.matchesScope(this.viewState.settingsTarget,n))return!1}return e instanceof pi?typeof e.count=="number"?e.count>0:2:!(e instanceof Ev&&(this.viewState.tagFilters?.size||this.viewState.filterToCategory))}settingContainedInGroup(e,t){return t.children.some(n=>n instanceof pi?this.settingContainedInGroup(e,n):n instanceof wo?n.setting.key===e.key:!1)}};tm=_([y(1,Hi)],tm);var t2=class extends Mw{getTemplateId(e){if(e instanceof pi)return I6;if(e instanceof wo)return e.valueType==="extension-toggle"?S6:e.isConfigured&&VN(e.value,e.setting.type)?I0:e.valueType==="boolean"?h6:e.valueType==="integer"||e.valueType==="number"||e.valueType==="nullable-integer"||e.valueType==="nullable-number"?u6:e.valueType==="multiline-string"?c6:e.valueType==="string"?d6:e.valueType==="enum"?p6:e.valueType==="array"?g6:e.valueType==="exclude"?m6:e.valueType==="include"?f6:e.valueType==="object"?b6:e.valueType==="boolean-object"?v6:(e.valueType==="language-tag",I0);if(e instanceof Ev)return y6;throw new Error("unknown element type: "+e)}hasDynamicHeight(e){return!(e instanceof pi)}estimateHeight(e){return e instanceof pi?42:e instanceof wo&&e.valueType==="boolean"?78:104}},n2=class extends Ld{isCollapsible(e){return!1}setCollapsed(e,t,n){return!1}},i2=class{constructor(e,t,n){this.configurationService=e;this.languageService=t;this.userDataProfilesService=n}getAriaLabel(e){if(e instanceof wo){let t=[];if(t.push(`${e.displayCategory} ${e.displayLabel}.`),e.isConfigured){let o=u("settings.Modified","Modified.");t.push(o)}let n=n6(e,this.configurationService,this.userDataProfilesService,this.languageService);n.length&&t.push(`${n}.`);let i=cA({value:r2(e.description,!1)});return i.length&&t.push(i),t.join(" ")}else return e instanceof pi?e.label:e.id}getWidgetAriaLabel(){return u("settings","Settings")}},_v=class extends mp{constructor(e,t,n,i,o,s,a,l,d){super("SettingsTree",e,new t2,n,{horizontalScrolling:!1,supportDynamicHeights:!0,identityProvider:{getId(c){return c.id}},accessibilityProvider:new i2(s,l,d),styleController:c=>new tp(No(e),c),filter:a.createInstance(tm,t),smoothScrolling:s.getValue("workbench.list.smoothScrolling"),multipleSelectionSupport:!1,findWidgetEnabled:!1,renderIndentGuides:"none",transformOptimization:!1},a,i,o,s),this.getHTMLElement().classList.add("settings-editor-tree"),this.style(dl({listBackground:$t,listActiveSelectionBackground:$t,listActiveSelectionForeground:Ve,listFocusAndSelectionBackground:$t,listFocusAndSelectionForeground:Ve,listFocusBackground:$t,listFocusForeground:Ve,listHoverForeground:Ve,listHoverBackground:$t,listHoverOutline:$t,listFocusOutline:$t,listInactiveSelectionBackground:$t,listInactiveSelectionForeground:Ve,listInactiveFocusBackground:$t,listInactiveFocusOutline:$t,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0})),this.disposables.add(s.onDidChangeConfiguration(c=>{c.affectsConfiguration("workbench.list.smoothScrolling")&&this.updateOptions({smoothScrolling:s.getValue("workbench.list.smoothScrolling")})}))}createModel(e,t){return new n2(e,t)}};_v=_([y(3,Ne),y(4,Gs),y(5,pa),y(6,we),y(7,Lt),y(8,ua)],_v);var Ap=class extends un{constructor(t){super(Ap.ID,Ap.LABEL);this.clipboardService=t}static ID="settings.copySettingId";static LABEL=u("copySettingIdLabel","Copy Setting ID");async run(t){return t&&await this.clipboardService.writeText(t.setting.key),Promise.resolve(void 0)}};Ap=_([y(0,ma)],Ap);var Np=class extends un{constructor(t){super(Np.ID,Np.LABEL);this.clipboardService=t}static ID="settings.copySettingAsJSON";static LABEL=u("copySettingAsJSONLabel","Copy Setting as JSON");async run(t){if(t){let n=`"${t.setting.key}": ${JSON.stringify(t.value,void 0,"  ")}`;await this.clipboardService.writeText(n)}return Promise.resolve(void 0)}};Np=_([y(0,ma)],Np);var Fp=class extends un{constructor(t,n){super(Fp.ID,Fp.LABEL);this.clipboardService=t;this.productService=n}static ID="settings.copySettingAsURL";static LABEL=u("copySettingAsURLLabel","Copy Setting as URL");async run(t){if(t){let n=t.setting.key,i=this.productService.urlProtocol,o=Z.from({scheme:i,authority:q7,path:`/${n}`},!0);await this.clipboardService.writeText(o.toString())}return Promise.resolve(void 0)}};Fp=_([y(0,ma),y(1,vs)],Fp);var Bp=class extends un{constructor(t,n){super(Bp.ID,Bp.LABEL);this.setting=t;this.configService=n;this._register(z.filter(n.onDidChangeConfiguration,i=>i.affectsConfiguration("settingsSync.ignoredSettings"))(()=>this.update())),this.update()}static ID="settings.stopSyncingSetting";static LABEL=u("stopSyncingSetting","Sync This Setting");async update(){let t=g0(zC(),this.configService);this.checked=!t.includes(this.setting.key)}async run(){let t=[...this.configService.getValue("settingsSync.ignoredSettings")];t=t.filter(s=>s!==this.setting.key&&s!==`-${this.setting.key}`);let i=zC().includes(this.setting.key),o=!this.checked;return o&&i&&t.push(`-${this.setting.key}`),!o&&!i&&t.push(this.setting.key),this.configService.updateValue("settingsSync.ignoredSettings",t.length?t:void 0,2),Promise.resolve(void 0)}};Bp=_([y(1,Ge)],Bp);var Wp=class extends un{constructor(t,n){super(Wp.ID,Wp.LABEL);this.setting=t;this.configService=n;this._register(z.filter(n.onDidChangeConfiguration,i=>i.affectsConfiguration(Oc))(()=>this.update())),this.update()}static ID="settings.applyToAllProfiles";static LABEL=u("applyToAllProfiles","Apply Setting to all Profiles");update(){let t=this.configService.getValue(Oc);this.checked=t.includes(this.setting.key)}async run(){let t=this.configService.getValue(Oc)??[];this.checked?t.splice(t.indexOf(this.setting.key),1):t.push(this.setting.key);let n=ai(t);this.checked?(await this.configService.updateValue(this.setting.key,this.configService.inspect(this.setting.key).application?.value,3),await this.configService.updateValue(Oc,n.length?n:void 0,3)):(await this.configService.updateValue(Oc,n.length?n:void 0,3),await this.configService.updateValue(this.setting.key,this.configService.inspect(this.setting.key).userLocal?.value,3))}};Wp=_([y(1,pa)],Wp);var x6=ie,Dv=class{constructor(e,t){this._viewState=e;this.environmentService=t}_currentSearchModel=null;_settingsTreeRoot;get settingsTreeRoot(){return this._settingsTreeRoot}set settingsTreeRoot(e){this._settingsTreeRoot=e,this.update()}get currentSearchModel(){return this._currentSearchModel}set currentSearchModel(e){this._currentSearchModel=e,this.update()}get children(){return this._settingsTreeRoot.children}update(){this._settingsTreeRoot&&this.updateGroupCount(this._settingsTreeRoot)}updateGroupCount(e){e.children.forEach(n=>{n instanceof pi&&this.updateGroupCount(n)});let t=e.children.filter(n=>n instanceof pi).reduce((n,i)=>n+i.count,0);e.count=t+this.getGroupCount(e)}getGroupCount(e){return e.children.filter(t=>{if(!(t instanceof wo)||this._currentSearchModel&&!this._currentSearchModel.root.containsSetting(t.setting.key))return!1;let n=!!this.environmentService.remoteAuthority;return t.matchesScope(this._viewState.settingsTarget,n)&&t.matchesAllTags(this._viewState.tagFilters)&&t.matchesAnyFeature(this._viewState.featureFilters)&&t.matchesAnyExtension(this._viewState.extensionFilters)&&t.matchesAnyId(this._viewState.idFilters)}).length}};Dv=_([y(1,Hi)],Dv);var E6="settings.toc.entry",s2=class{constructor(e){this._hoverService=e}templateId=E6;renderTemplate(e){return{labelElement:q(e,x6(".settings-toc-entry")),countElement:q(e,x6(".settings-toc-count")),elementDisposables:new X}}renderElement(e,t,n){n.elementDisposables.clear();let i=e.element,o=i.count,s=i.label;n.labelElement.textContent=s,n.elementDisposables.add(this._hoverService.setupManagedHover(pt("mouse"),n.labelElement,s)),o?n.countElement.textContent=` (${o})`:n.countElement.textContent=""}disposeTemplate(e){e.elementDisposables.dispose()}},a2=class{getTemplateId(e){return E6}getHeight(e){return 22}};function d2(r,e){let t=r.children.filter(n=>n instanceof pi);return tt.map(t,n=>{let i=n.children.some(o=>o instanceof pi);return{element:n,collapsed:void 0,collapsible:i,children:n instanceof pi?d2(n,e):void 0}})}var l2=class{getWidgetAriaLabel(){return u({key:"settingsTOC",comment:["A label for the table of contents for the full settings list"]},"Settings Table of Contents")}getAriaLabel(e){return e&&e instanceof pi?u("groupRowAriaLabel","{0}, group",e.label):""}getAriaLevel(e){let t=1;for(;e instanceof pi&&e.parent;)t++,e=e.parent;return t}},Lv=class extends mp{constructor(e,t,n,i,o,s,a){let d={filter:a.createInstance(tm,t),multipleSelectionSupport:!1,identityProvider:{getId(c){return c.id}},styleController:c=>new tp(No(e),c),accessibilityProvider:a.createInstance(l2),collapseByDefault:!0,horizontalScrolling:!1,hideTwistiesOfChildlessElements:!0,renderIndentGuides:"none"};super("SettingsTOC",e,new a2,[new s2(s)],d,a,n,i,o),this.style(dl({listBackground:$t,listFocusOutline:Fi,listActiveSelectionBackground:$t,listActiveSelectionForeground:NC,listFocusAndSelectionBackground:$t,listFocusAndSelectionForeground:NC,listFocusBackground:$t,listFocusForeground:LV,listHoverForeground:LV,listHoverBackground:$t,listInactiveSelectionBackground:$t,listInactiveSelectionForeground:NC,listInactiveFocusBackground:$t,listInactiveFocusOutline:$t,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0}))}};Lv=_([y(2,Ne),y(3,Gs),y(4,Ge),y(5,rr),y(6,we)],Lv);var dte=xn("settings-editor-label-icon",re.settings,u("settingsEditorLabelIcon","Icon of the settings editor label.")),Il=class extends wr{static ID="workbench.input.settings2";_settingsModel;resource=Z.from({scheme:ye.vscodeSettings,path:"settingseditor"});constructor(e){super(),this._settingsModel=e.createSettings2EditorModel()}matches(e){return super.matches(e)||e instanceof Il}get typeId(){return Il.ID}getName(){return u("settingsEditor2InputName","Settings")}getIcon(){return dte}async resolve(){return this._settingsModel}dispose(){this._settingsModel.dispose(),super.dispose()}};Il=_([y(0,At)],Il);var T6=j("IUserDataSyncWorkbenchService");var d6n=gt("sync category","Settings Sync"),c6n=xn("settings-sync-view-icon",re.sync,u("syncViewIcon","View icon of the Settings Sync view.")),ute=new B("syncStatus","uninitialized"),u6n=new B("syncEnabled",!1),pte=new B("userDataSyncAccountStatus","unavailable"),p6n=new B("enableSyncActivityViews",!1),h6n=new B("enableSyncConflictsView",!1),g6n=new B("hasConflicts",!1);var m6n={id:"workbench.userDataSync.actions.downloadSyncActivity",title:gt("download sync activity title","Download Settings Sync Activity"),category:UE.Developer,f1:!0,precondition:oe.and(pte.isEqualTo("available"),ute.notEqualsTo("uninitialized"))};var kv=class extends Pd{constructor(t,n,i,o,s){super(t,{getActions:()=>this.getActions()},s,{...n,actionRunner:i,classNames:t.class,anchorAlignmentProvider:()=>1,menuAsChild:!0});this.searchWidget=o;this.suggestController=ar.get(this.searchWidget.inputWidget)}suggestController;render(t){super.render(t)}doSearchWidgetAction(t,n){this.searchWidget.setValue(this.searchWidget.getValue().trimEnd()+" "+t),this.searchWidget.focus(),n&&this.suggestController&&this.suggestController.triggerSuggest()}createAction(t,n,i,o,s){return{id:t,label:n,tooltip:i,class:void 0,enabled:!0,run:()=>{this.doSearchWidgetAction(o,s)}}}createToggleAction(t,n,i,o){let a=this.searchWidget.getValue().split(" ").includes(o);return{id:t,label:n,tooltip:i,class:void 0,enabled:!0,checked:a,run:()=>{if(a){let l=this.searchWidget.getValue().split(" ").filter(d=>d!==o).join(" ");this.searchWidget.setValue(l)}else{let l=this.searchWidget.getValue().trimEnd(),d=l?l+" "+o:o;this.searchWidget.setValue(d)}this.searchWidget.focus()}}}getActions(){return[this.createToggleAction("modifiedSettingsSearch",u("modifiedSettingsSearch","Modified"),u("modifiedSettingsSearchTooltip","Add or remove modified settings filter"),`@${_d}`),this.createAction("extSettingsSearch",u("extSettingsSearch","Extension ID..."),u("extSettingsSearchTooltip","Add extension ID filter"),`@${Tb}`,!0),this.createAction("featuresSettingsSearch",u("featureSettingsSearch","Feature..."),u("featureSettingsSearchTooltip","Add feature filter"),`@${_r}`,!0),this.createAction("tagSettingsSearch",u("tagSettingsSearch","Tag..."),u("tagSettingsSearchTooltip","Add tag filter"),`@${n9}`,!0),this.createAction("langSettingsSearch",u("langSettingsSearch","Language..."),u("langSettingsSearchTooltip","Add language ID filter"),`@${ya}`,!0),this.createToggleAction("onlineSettingsSearch",u("onlineSettingsSearch","Online services"),u("onlineSettingsSearchTooltip","Show settings for online services"),"@tag:usesOnlineServices"),this.createToggleAction("policySettingsSearch",u("policySettingsSearch","Policy services"),u("policySettingsSearchTooltip","Show settings for policy services"),`@${Dd}`)]}};kv=_([y(4,or)],kv);function _6(r){return tt.map(r.children,e=>({element:e,children:e instanceof pi?_6(e):void 0}))}var $r=ie,c2=u("SearchSettings.AriaLabel","Search settings"),w6="workbench.settings.settingsSearchTocBehavior",hte="settingsEditorState",Mt=class extends pb{constructor(t,n,i,o,s,a,l,d,c,p,h,g,f,m,b,v,S,x,E,w,P,R){super(Mt.ID,t,n,s,h);this.configurationService=i;this.preferencesService=a;this.instantiationService=l;this.preferencesSearchService=d;this.logService=c;this.storageService=h;this.editorGroupService=g;this.userDataSyncWorkbenchService=f;this.userDataSyncEnablementService=m;this.workspaceTrustManagementService=b;this.extensionService=v;this.languageService=S;this.extensionManagementService=x;this.productService=E;this.extensionGalleryService=w;this.editorProgressService=P;this.delayedFilterLogging=new Vn(1e3),this.searchDelayer=new Vn(300),this.viewState={settingsTarget:3},this.settingFastUpdateDelayer=new Vn(Mt.SETTING_UPDATE_FAST_DEBOUNCE),this.settingSlowUpdateDelayer=new Vn(Mt.SETTING_UPDATE_SLOW_DEBOUNCE),this.searchInputDelayer=new Vn(Mt.SEARCH_DEBOUNCE),this.updatedConfigSchemaDelayer=new Vn(Mt.CONFIG_SCHEMA_UPDATE_DELAYER),this.inSettingsEditorContextKey=cl.bindTo(p),this.searchFocusContextKey=vg.bindTo(p),this.tocRowFocused=LD.bindTo(p),this.settingRowFocused=BS.bindTo(p),this.scheduledRefreshes=new Map,this.editorMemento=this.getEditorMemento(g,o,hte),this.dismissedExtensionSettings=this.storageService.get(this.DISMISSED_EXTENSION_SETTINGS_STORAGE_KEY,0,"").split(this.DISMISSED_EXTENSION_SETTINGS_DELIMITER),this._register(i.onDidChangeConfiguration(O=>{O.source!==7&&this.onConfigUpdate(O.affectedKeys)})),this._register(R.onDidChangeCurrentProfile(O=>{O.join(this.whenCurrentProfileChanged())})),this._register(b.onDidChangeTrust(()=>{this.searchResultModel?.updateWorkspaceTrust(b.isWorkspaceTrusted()),this.settingsTreeModel&&(this.settingsTreeModel.updateWorkspaceTrust(b.isWorkspaceTrusted()),this.renderTree())})),this._register(i.onDidChangeRestrictedSettings(O=>{O.default.length&&this.currentSettingsModel&&this.updateElementsByKey(new Set(O.default))})),this._register(x.onDidInstallExtensions(()=>{this.refreshInstalledExtensionsList()})),this._register(x.onDidUninstallExtension(()=>{this.refreshInstalledExtensionsList()})),this.modelDisposables=this._register(new X),HD&&!Mt.SUGGESTIONS.includes(`@${ya}`)&&Mt.SUGGESTIONS.push(`@${ya}`),this.inputChangeListener=this._register(new Qt)}static ID="workbench.editor.settings2";static NUM_INSTANCES=0;static SEARCH_DEBOUNCE=200;static SETTING_UPDATE_FAST_DEBOUNCE=200;static SETTING_UPDATE_SLOW_DEBOUNCE=1e3;static CONFIG_SCHEMA_UPDATE_DELAYER=500;static TOC_MIN_WIDTH=100;static TOC_RESET_WIDTH=200;static EDITOR_MIN_WIDTH=500;static NARROW_TOTAL_WIDTH=this.TOC_RESET_WIDTH+this.EDITOR_MIN_WIDTH;static SUGGESTIONS=[`@${_d}`,"@tag:notebookLayout","@tag:notebookOutputLayout",`@tag:${wb}`,`@tag:${i9}`,"@tag:sync","@tag:usesOnlineServices","@tag:telemetry","@tag:accessibility",`@${KF}`,`@${Tb}`,`@${_r}scm`,`@${_r}explorer`,`@${_r}search`,`@${_r}debug`,`@${_r}extensions`,`@${_r}terminal`,`@${_r}task`,`@${_r}problems`,`@${_r}output`,`@${_r}comments`,`@${_r}remote`,`@${_r}timeline`,`@${_r}notebook`,`@${Dd}`];static shouldSettingUpdateFast(t){return Array.isArray(t)?!1:t==="enum"||t==="array"||t==="boolean-object"||t==="object"||t==="complex"||t==="boolean"||t==="exclude"||t==="include"}defaultSettingsEditorModel;modelDisposables;rootElement;headerContainer;bodyContainer;searchWidget;countElement;controlsElement;settingsTargetsWidget;splitView;settingsTreeContainer;settingsTree;settingRenderers;tocTreeModel;settingsTreeModel;noResultsMessage;clearFilterLinkContainer;tocTreeContainer;tocTree;delayedFilterLogging;searchDelayer;searchInProgress=null;searchInputDelayer;updatedConfigSchemaDelayer;settingFastUpdateDelayer;settingSlowUpdateDelayer;pendingSettingUpdate=null;viewState;_searchResultModel=null;searchResultLabel=null;lastSyncedLabel=null;settingsOrderByTocIndex=null;tocRowFocused;settingRowFocused;inSettingsEditorContextKey;searchFocusContextKey;scheduledRefreshes;_currentFocusContext=0;hasWarnedMissingSettings=!1;tocTreeDisposed=!1;editorMemento;tocFocusedElement=null;treeFocusedElement=null;settingsTreeScrollTop=0;dimension;installedExtensionIds=[];dismissedExtensionSettings=[];DISMISSED_EXTENSION_SETTINGS_STORAGE_KEY="settingsEditor2.dismissedExtensionSettings";DISMISSED_EXTENSION_SETTINGS_DELIMITER="	";inputChangeListener;async whenCurrentProfileChanged(){this.updatedConfigSchemaDelayer.trigger(()=>{this.dismissedExtensionSettings=this.storageService.get(this.DISMISSED_EXTENSION_SETTINGS_STORAGE_KEY,0,"").split(this.DISMISSED_EXTENSION_SETTINGS_DELIMITER),this.onConfigUpdate(void 0,!0)})}get minimumWidth(){return Mt.EDITOR_MIN_WIDTH}get maximumWidth(){return Number.POSITIVE_INFINITY}get minimumHeight(){return 180}set minimumWidth(t){}set maximumWidth(t){}get currentSettingsModel(){return this.searchResultModel||this.settingsTreeModel}get searchResultModel(){return this._searchResultModel}set searchResultModel(t){this._searchResultModel=t,this.rootElement.classList.toggle("search-mode",!!this._searchResultModel)}get focusedSettingDOMElement(){let t=this.settingsTree.getFocus()[0];if(t instanceof wo)return this.settingRenderers.getDOMElementsForSettingKey(this.settingsTree.getHTMLElement(),t.setting.key)[0]}get currentFocusContext(){return this._currentFocusContext}createEditor(t){t.setAttribute("tabindex","-1"),this.rootElement=q(t,$r(".settings-editor",{tabindex:"-1"})),this.createHeader(this.rootElement),this.createBody(this.rootElement),this.addCtrlAInterceptor(this.rootElement),this.updateStyles(),this._register(a0({name:"settingsEditor2",focusNotifiers:[this],focusNextWidget:()=>{this.searchWidget.inputWidget.hasWidgetFocus()&&this.focusTOC()},focusPreviousWidget:()=>{this.searchWidget.inputWidget.hasWidgetFocus()||this.focusSearch()}}))}async setInput(t,n,i,o){if(this.inSettingsEditorContextKey.set(!0),await super.setInput(t,n,i,o),!this.input)return;let s=await this.input.resolve();if(!(o.isCancellationRequested||!(s instanceof lb))){if(this.modelDisposables.clear(),this.modelDisposables.add(s.onDidChangeGroups(()=>{this.updatedConfigSchemaDelayer.trigger(()=>{this.onConfigUpdate(void 0,!1,!0)})})),this.defaultSettingsEditorModel=s,n=n||j7({}),!this.viewState.settingsTarget||!this.settingsTargetsWidget.settingsTarget){let a=n.viewState&&n.viewState.settingsTarget;!n.target&&!a&&(n.target=3)}this._setOptions(n),this.onConfigUpdate(void 0,!0).then(()=>{this.inputChangeListener.value=t.onWillDispose(()=>{this.searchWidget.setValue("")}),this.updateTreeScrollSync()}),await this.refreshInstalledExtensionsList()}}async refreshInstalledExtensionsList(){let t=await this.extensionManagementService.getInstalled();this.installedExtensionIds=t.filter(n=>n.manifest.contributes?.configuration).map(n=>n.identifier.id)}restoreCachedState(){let t=this.input&&this.editorMemento.loadEditorState(this.group,this.input);if(t&&typeof t.target=="object"&&(t.target=Z.revive(t.target)),t){let n=t.target;this.settingsTargetsWidget.settingsTarget=n,this.viewState.settingsTarget=n,this.searchWidget.getValue()||this.searchWidget.setValue(t.searchQuery)}return this.input&&this.editorMemento.clearEditorState(this.input,this.group),t??null}getViewState(){return this.viewState}setOptions(t){super.setOptions(t),t&&this._setOptions(t)}_setOptions(t){t.focusSearch&&!li&&this.focusSearch();let n=t.viewState?t.viewState:void 0,i=n?.query??t.query;i!==void 0&&(this.searchWidget.setValue(i),this.viewState.query=i);let o=t.folderUri??n?.settingsTarget??t.target;o&&this.settingsTargetsWidget.updateTarget(o)}clearInput(){this.inSettingsEditorContextKey.set(!1),super.clearInput()}layout(t){if(this.dimension=t,!this.isVisible())return;this.layoutSplitView(t);let i=Math.min(this.headerContainer.clientWidth,t.width)-24*2-10-this.countElement.clientWidth-this.controlsElement.clientWidth-12;this.searchWidget.layout(new Et(i,20)),this.rootElement.classList.toggle("narrow-width",t.width<Mt.NARROW_TOTAL_WIDTH)}focus(){if(super.focus(),this._currentFocusContext===0)li||this.focusSearch();else if(this._currentFocusContext===3){let t=this.focusedSettingDOMElement;if(t){let n=t.querySelector(Ht.CONTROL_SELECTOR);if(n){n.focus();return}}}else this._currentFocusContext===2?this.settingsTree.domFocus():this._currentFocusContext===1&&this.tocTree.domFocus()}setEditorVisible(t){super.setEditorVisible(t),t||setTimeout(()=>{this.searchWidget.onHide()},0)}focusSettings(t=!1){if(this.settingsTree.getFocus().length||this.settingsTree.focusFirst(),this.settingsTree.domFocus(),t){let i=this.settingsTree.getHTMLElement().querySelector(`.focused ${Ht.CONTROL_SELECTOR}`);i&&i.focus()}}focusTOC(){this.tocTree.domFocus()}showContextMenu(){let t=this.settingsTree.getFocus()[0],n=this.focusedSettingDOMElement;n&&t instanceof wo&&this.settingRenderers.showContextMenu(t,n)}focusSearch(t,n=!0){t&&this.searchWidget&&this.searchWidget.setValue(t),this.searchWidget.focus(n&&!this.searchInputDelayer.isTriggered)}clearSearchResults(){this.searchWidget.setValue(""),this.focusSearch()}clearSearchFilters(){let n=this.searchWidget.getValue().split(" ").filter(i=>i.length&&!Mt.SUGGESTIONS.some(o=>i.startsWith(o)));this.searchWidget.setValue(n.join(" "))}updateInputAriaLabel(){let t=c2;this.searchResultLabel&&(t+=`. ${this.searchResultLabel}`),this.lastSyncedLabel&&(t+=`. ${this.lastSyncedLabel}`),this.searchWidget.updateAriaLabel(t)}createHeader(t){this.headerContainer=q(t,$r(".settings-header"));let n=q(this.headerContainer,$r(".search-container")),i=new un(_D,u("clearInput","Clear Settings Search Input"),Ae.asClassName(vD),!1,async()=>this.clearSearchResults()),o=new un($8,u("filterInput","Filter Settings"),Ae.asClassName(U8));this.searchWidget=this._register(this.instantiationService.createInstance($c,`${Mt.ID}.searchbox`,n,{triggerCharacters:["@",":"],provideResults:d=>{let c=d.split(/\s/g);return c[c.length-1].startsWith(`@${ya}`)?this.languageService.getRegisteredLanguageIds().map(h=>`@${ya}${h} `).sort().filter(h=>!d.includes(h)):c[c.length-1].startsWith(`@${Tb}`)?this.installedExtensionIds.map(h=>`@${Tb}${h} `).sort().filter(h=>!d.includes(h)):c[c.length-1].startsWith("@")?Mt.SUGGESTIONS.filter(p=>!d.includes(p)).map(p=>p.endsWith(":")?p:p+" "):[]}},c2,"settingseditor:searchinput"+Mt.NUM_INSTANCES++,{placeholderText:c2,focusContextKey:this.searchFocusContextKey,styleOverrides:{inputBorder:Fd}})),this._register(this.searchWidget.onDidFocus(()=>{this._currentFocusContext=0})),this.countElement=q(n,ie(".settings-count-widget.monaco-count-badge.long")),this.countElement.style.backgroundColor=ne(sa),this.countElement.style.color=ne(Gu),this.countElement.style.border=`1px solid ${ne(Ie)}`,this._register(this.searchWidget.onInputDidChange(()=>{let d=this.searchWidget.getValue();i.enabled=!!d,this.searchInputDelayer.trigger(()=>this.onSearchInputChanged())}));let s=q(this.headerContainer,$r(".settings-header-controls"));s.style.borderColor=ne(N3);let a=q(s,$r(".settings-target-container"));if(this.settingsTargetsWidget=this._register(this.instantiationService.createInstance(mb,a,{enableRemoteSettings:!0})),this.settingsTargetsWidget.settingsTarget=3,this.settingsTargetsWidget.onDidTargetChange(d=>this.onDidSettingsTargetChange(d)),this._register(U(a,ee.KEY_DOWN,d=>{new it(d).keyCode===18&&this.focusSettings()})),this.userDataSyncWorkbenchService.enabled&&this.userDataSyncEnablementService.canToggleEnablement()){let d=this._register(this.instantiationService.createInstance(qC,this.window,s));this._register(d.onDidChangeLastSyncedLabel(c=>{this.lastSyncedLabel=c,this.updateInputAriaLabel()}))}this.controlsElement=q(n,ie(".settings-clear-widget")),this._register(new Wi(this.controlsElement,{actionViewItemProvider:(d,c)=>{if(d.id===o.id)return this.instantiationService.createInstance(kv,d,c,this.actionRunner,this.searchWidget)}})).push([i,o],{label:!1,icon:!0})}onDidSettingsTargetChange(t){this.viewState.settingsTarget=t,this.onConfigUpdate(void 0,!0)}onDidDismissExtensionSetting(t){this.dismissedExtensionSettings.includes(t)||this.dismissedExtensionSettings.push(t),this.storageService.store(this.DISMISSED_EXTENSION_SETTINGS_STORAGE_KEY,this.dismissedExtensionSettings.join(this.DISMISSED_EXTENSION_SETTINGS_DELIMITER),0,0),this.onConfigUpdate(void 0,!0)}onDidClickSetting(t,n){let i=this.currentSettingsModel.getElementsByName(t.targetKey)?.[0],o=!1;if(i){let s=.5;try{let a=this.settingsTree.getRelativeTop(t.source);a!==null&&(s=a)}catch{}this.viewState.filterToCategory&&t.source.displayCategory!==i.displayCategory&&this.tocTree.setFocus([]);try{this.settingsTree.reveal(i,s)}catch{o=!0}if(!o){setTimeout(()=>{this.settingsTree.setFocus([i])},50);let a=this.settingRenderers.getDOMElementsForSettingKey(this.settingsTree.getHTMLElement(),t.targetKey);if(a&&a[0]){let l=a[0].querySelector(Ht.CONTROL_SELECTOR);l&&l.focus()}}}!n&&(!i||o)&&this.triggerSearch("").then(()=>{this.searchWidget.setValue(""),this.onDidClickSetting(t,!0)})}switchToSettingsFile(){let t=f0(this.searchWidget.getValue()).query;return this.openSettingsFile({query:t})}async openSettingsFile(t){let n=this.settingsTargetsWidget.settingsTarget,i={jsonEditor:!0,...t};if(n===3)return t?.revealSetting&&Te.as(In.Configuration).getConfigurationProperties()[t?.revealSetting.key]?.scope===1?this.preferencesService.openApplicationSettings(i):this.preferencesService.openUserSettings(i);if(n===4)return this.preferencesService.openRemoteSettings(i);if(n===5)return this.preferencesService.openWorkspaceSettings(i);if(Z.isUri(n))return this.preferencesService.openFolderSettings({folderUri:n,...i})}createBody(t){this.bodyContainer=q(t,$r(".settings-body")),this.noResultsMessage=q(this.bodyContainer,$r(".no-results-message")),this.noResultsMessage.innerText=u("noResults","No Settings Found"),this.clearFilterLinkContainer=$r("span.clear-search-filters"),this.clearFilterLinkContainer.textContent=" - ";let n=q(this.clearFilterLinkContainer,$r("a.pointer.prominent",{tabindex:0},u("clearSearchFilters","Clear Filters")));this._register(U(n,ee.CLICK,s=>{qe.stop(s,!1),this.clearSearchFilters()})),q(this.noResultsMessage,this.clearFilterLinkContainer),this.noResultsMessage.style.color=ne(Sr),this.tocTreeContainer=$r(".settings-toc-container"),this.settingsTreeContainer=$r(".settings-tree-container"),this.createTOC(this.tocTreeContainer),this.createSettingsTree(this.settingsTreeContainer),this.splitView=this._register(new lg(this.bodyContainer,{orientation:1,proportionalLayout:!0}));let i=this.storageService.getNumber("settingsEditor2.splitViewWidth",0,Mt.TOC_RESET_WIDTH);this.splitView.addView({onDidChange:z.None,element:this.tocTreeContainer,minimumSize:Mt.TOC_MIN_WIDTH,maximumSize:Number.POSITIVE_INFINITY,layout:(s,a,l)=>{this.tocTreeContainer.style.width=`${s}px`,this.tocTree.layout(l,s)}},i,void 0,!0),this.splitView.addView({onDidChange:z.None,element:this.settingsTreeContainer,minimumSize:Mt.EDITOR_MIN_WIDTH,maximumSize:Number.POSITIVE_INFINITY,layout:(s,a,l)=>{this.settingsTreeContainer.style.width=`${s}px`,this.settingsTree.layout(l,s)}},dg.Distribute,void 0,!0),this._register(this.splitView.onDidSashReset(()=>{let s=this.splitView.getViewSize(0)+this.splitView.getViewSize(1);this.splitView.resizeView(0,Mt.TOC_RESET_WIDTH),this.splitView.resizeView(1,s-Mt.TOC_RESET_WIDTH)})),this._register(this.splitView.onDidSashChange(()=>{let s=this.splitView.getViewSize(0);this.storageService.store("settingsEditor2.splitViewWidth",s,0,0)}));let o=this.theme.getColor(e0);this.splitView.style({separatorBorder:o})}addCtrlAInterceptor(t){this._register(dn(t,ee.KEY_DOWN,n=>{n.keyCode===31&&(Pe?n.metaKey:n.ctrlKey)&&!is(n.target)&&(n.browserEvent.stopPropagation(),n.browserEvent.preventDefault())}))}createTOC(t){this.tocTreeModel=this.instantiationService.createInstance(Dv,this.viewState),this.tocTree=this._register(this.instantiationService.createInstance(Lv,q(t,$r(".settings-toc-wrapper",{role:"navigation","aria-label":u("settings","Settings")})),this.viewState)),this.tocTreeDisposed=!1,this._register(this.tocTree.onDidFocus(()=>{this._currentFocusContext=1})),this._register(this.tocTree.onDidChangeFocus(n=>{let i=n.elements?.[0]??null;this.tocFocusedElement!==i&&(this.tocFocusedElement=i,this.tocTree.setSelection(i?[i]:[]),this.searchResultModel?this.viewState.filterToCategory!==i&&(this.viewState.filterToCategory=i??void 0,this.renderTree(void 0,!0),this.settingsTree.scrollTop=0):i&&(!n.browserEvent||!n.browserEvent.fromScroll)&&(this.settingsTree.reveal(i,0),this.settingsTree.setFocus([i])))})),this._register(this.tocTree.onDidFocus(()=>{this.tocRowFocused.set(!0)})),this._register(this.tocTree.onDidBlur(()=>{this.tocRowFocused.set(!1)})),this._register(this.tocTree.onDidDispose(()=>{this.tocTreeDisposed=!0}))}applyFilter(t){if(this.searchWidget&&!this.searchWidget.getValue().includes(t)){let n=`${t} ${this.searchWidget.getValue().trimStart()}`;this.focusSearch(n,!1)}}removeLanguageFilters(){if(this.searchWidget&&this.searchWidget.getValue().includes(`@${ya}`)){let n=this.searchWidget.getValue().split(" ").filter(i=>!i.startsWith(`@${ya}`)).join(" ");this.focusSearch(n,!1)}}createSettingsTree(t){this.settingRenderers=this._register(this.instantiationService.createInstance(wv)),this._register(this.settingRenderers.onDidChangeSetting(n=>this.onDidChangeSetting(n.key,n.value,n.type,n.manualReset,n.scope))),this._register(this.settingRenderers.onDidDismissExtensionSetting(n=>this.onDidDismissExtensionSetting(n))),this._register(this.settingRenderers.onDidOpenSettings(n=>{this.openSettingsFile({revealSetting:{key:n,edit:!0}})})),this._register(this.settingRenderers.onDidClickSettingLink(n=>this.onDidClickSetting(n))),this._register(this.settingRenderers.onDidFocusSetting(n=>{this.settingsTree.setFocus([n]),this._currentFocusContext=3,this.settingRowFocused.set(!1)})),this._register(this.settingRenderers.onDidChangeSettingHeight(n=>{let{element:i,height:o}=n;try{this.settingsTree.updateElementHeight(i,o)}catch{}})),this._register(this.settingRenderers.onApplyFilter(n=>this.applyFilter(n))),this._register(this.settingRenderers.onDidClickOverrideElement(n=>{this.removeLanguageFilters(),n.language&&this.applyFilter(`@${ya}${n.language}`),n.scope==="workspace"?this.settingsTargetsWidget.updateTarget(5):n.scope==="user"?this.settingsTargetsWidget.updateTarget(3):n.scope==="remote"&&this.settingsTargetsWidget.updateTarget(4),this.applyFilter(`@${KF}${n.settingKey}`)})),this.settingsTree=this._register(this.instantiationService.createInstance(_v,t,this.viewState,this.settingRenderers.allRenderers)),this._register(this.settingsTree.onDidScroll(()=>{this.settingsTree.scrollTop!==this.settingsTreeScrollTop&&(this.settingsTreeScrollTop=this.settingsTree.scrollTop,setTimeout(()=>{this.updateTreeScrollSync()},0))})),this._register(this.settingsTree.onDidFocus(()=>{let n=t.ownerDocument.activeElement?.classList;n&&n.contains("monaco-list")&&n.contains("settings-editor-tree")&&(this._currentFocusContext=2,this.settingRowFocused.set(!0),this.treeFocusedElement??=this.settingsTree.firstVisibleElement??null,this.treeFocusedElement&&(this.treeFocusedElement.tabbable=!0))})),this._register(this.settingsTree.onDidBlur(()=>{this.settingRowFocused.set(!1),this.treeFocusedElement=null})),this._register(this.settingsTree.onDidChangeFocus(n=>{let i=n.elements[0];this.treeFocusedElement!==i&&(this.treeFocusedElement&&(this.treeFocusedElement.tabbable=!1),this.treeFocusedElement=i,this.treeFocusedElement&&(this.treeFocusedElement.tabbable=!0),this.settingsTree.setSelection(i?[i]:[]))}))}onDidChangeSetting(t,n,i,o,s){let l=f0(this.searchWidget.getValue()).languageFilter;(o||this.pendingSettingUpdate&&this.pendingSettingUpdate.key!==t)&&this.updateChangedSetting(t,n,o,l,s),this.pendingSettingUpdate={key:t,value:n,languageFilter:l},Mt.shouldSettingUpdateFast(i)?this.settingFastUpdateDelayer.trigger(()=>this.updateChangedSetting(t,n,o,l,s)):this.settingSlowUpdateDelayer.trigger(()=>this.updateChangedSetting(t,n,o,l,s))}updateTreeScrollSync(){if(this.settingRenderers.cancelSuggesters(),this.searchResultModel||!this.tocTreeModel)return;let t=this.settingsTree.firstVisibleElement,n=t instanceof wo?t.parent:t instanceof pi?t:null,i=!0;try{this.tocTree.getNode(n)}catch{i=!1}if(i&&n&&this.tocTree.getSelection()[0]!==n){let o=this.getAncestors(n);o.forEach(l=>this.tocTree.expand(l)),this.tocTree.reveal(n);let s=this.tocTree.getRelativeTop(n);if(typeof s!="number")return;this.tocTree.collapseAll(),o.forEach(l=>this.tocTree.expand(l)),s<0||s>1?this.tocTree.reveal(n):this.tocTree.reveal(n,s),this.tocTree.expand(n),this.tocTree.setSelection([n]);let a=new KeyboardEvent("keydown");a.fromScroll=!0,this.tocTree.setFocus([n],a)}}getAncestors(t){let n=[];for(;t.parent;)t.parent.id!=="root"&&n.push(t.parent),t=t.parent;return n.reverse()}updateChangedSetting(t,n,i,o,s){let a=this.settingsTargetsWidget.settingsTarget,l=Z.isUri(a)?a:void 0,d=(l?6:a)??3,c={resource:l,overrideIdentifiers:o?[o]:void 0},h=d===5||d===6||!!o,g=h?i:n===void 0,f=this.configurationService.inspect(t,c);return!h&&f.defaultValue===n&&(n=void 0),this.configurationService.updateValue(t,n,c,d,{handleDirtyFile:"save"}).then(()=>{let m=this.searchWidget.getValue();m.includes(`@${_d}`)&&this.refreshTOCTree(),this.renderTree(t,g);let b={key:t,query:m,searchResults:this.searchResultModel?.getUniqueResults()??null,rawResults:this.searchResultModel?.getRawResults()??null,showConfiguredOnly:!!this.viewState.tagFilters&&this.viewState.tagFilters.has(_d),isReset:typeof n>"u",settingsTarget:this.settingsTargetsWidget.settingsTarget};return this.pendingSettingUpdate=null,this.reportModifiedSetting(b)})}reportModifiedSetting(t){let n,i,o;if(t.searchResults&&(o=t.searchResults.filterMatches.findIndex(l=>l.setting.key===t.key),this.searchResultModel)){let l=this.searchResultModel.getRawResults();if(l[0]&&o>=0&&(n=l[0].filterMatches.some(c=>c.setting.key===t.key)?"local":"remote"),l[1]){let d=l[1].filterMatches.findIndex(c=>c.setting.key===t.key);i=d>=0?d:void 0}}let s=t.settingsTarget===3?"user":t.settingsTarget===4?"user_remote":t.settingsTarget===5?"workspace":"folder",a={key:t.key,groupId:n,nlpIndex:i,displayIndex:o,showConfiguredOnly:t.showConfiguredOnly,isReset:t.isReset,target:s};this.telemetryService.publicLog2("settingsEditor.settingModified",a)}scheduleRefresh(t,n=""){if(n&&this.scheduledRefreshes.has(n))return;n||(rt(this.scheduledRefreshes.values()),this.scheduledRefreshes.clear());let i=br(t);this.scheduledRefreshes.set(n,i),i.onDidBlur(()=>{i.dispose(),this.scheduledRefreshes.delete(n),this.onConfigUpdate(new Set([n]))})}createSettingsOrderByTocIndex(t){let n=new Map;function i(o,s=0){if(o.settings)for(let a of o.settings)n.has(a.key)||n.set(a.key,s++);if(o.children)for(let a of o.children)s=i(a,s);return s}return i(t),n}refreshModels(t){this.settingsTreeModel.update(t),this.tocTreeModel.settingsTreeRoot=this.settingsTreeModel.root,this.settingsOrderByTocIndex=this.createSettingsOrderByTocIndex(t)}async onConfigUpdate(t,n=!1,i=!1){if(t&&this.settingsTreeModel)return this.updateElementsByKey(t);if(!this.defaultSettingsEditorModel)return;let o=this.defaultSettingsEditorModel.settingsGroups.slice(1),s=o.filter(f=>!f.extensionInfo),a=o2(h0,s,this.logService),l=a.tree;if(a.leftoverSettings.size&&!this.hasWarnedMissingSettings){let f=[];a.leftoverSettings.forEach(m=>{f.push(m.key)}),this.logService.warn(`SettingsEditor2: Settings not included in settingsLayout.ts: ${f.join(", ")}`),this.hasWarnedMissingSettings=!0}let d=[],c=!1,p=await o9(this.extensionGalleryService,this.productService);if(p&&o.filter(f=>f.extensionInfo).length)for(let f in p.settingsEditorRecommendedExtensions){let m=p.recommendedExtensionsGalleryInfo[f];if(!m)continue;let b=m.identifier.id,v=this.installedExtensionIds.includes(b),S=o.findIndex($=>$.extensionInfo&&$.extensionInfo.id.toLowerCase()===b.toLowerCase()&&$.sections.length===1&&$.sections[0].settings.length===1&&$.sections[0].settings[0].displayExtensionId);if(v||this.dismissedExtensionSettings.includes(b)){S!==-1&&(o.splice(S,1),c=!0);continue}if(S!==-1)continue;let x=null;try{x=await this.extensionGalleryService.getManifest(m,Yt.None)}catch{continue}let E=x?.contributes?.configuration,w;Array.isArray(E)?E.length===1&&(w=E[0].title):w=E?.title;let P=p.settingsEditorRecommendedExtensions[f],R=m.displayName??m.name??b,O=`${f}.manageExtension`,M={range:ha,key:O,keyRange:ha,value:null,valueRange:ha,description:[P.onSettingsEditorOpen?.descriptionOverride??m.description],descriptionIsMarkdown:!1,descriptionRanges:[],scope:3,type:"null",displayExtensionId:b,extensionGroupTitle:w??R,categoryLabel:"Extensions",title:R},K={sections:[{settings:[M]}],id:b,title:M.extensionGroupTitle,titleRange:ha,range:ha,extensionInfo:{id:b,displayName:m.displayName}};o.push(K),d.push(K),c=!0}l.children.push(await s6(this.extensionService,o.filter(f=>f.extensionInfo)));let h=Q3(p),g=o2(h,o,this.logService);if(l.children.unshift(g.tree),p&&c&&this.defaultSettingsEditorModel.setAdditionalGroups(d),!this.workspaceTrustManagementService.isWorkspaceTrusted()&&(this.viewState.settingsTarget instanceof Z||this.viewState.settingsTarget===5)){let f=r6(o,this.viewState.settingsTarget,this.viewState.languageFilter,this.configurationService);f.length&&l.children.unshift({id:"workspaceTrust",label:u("settings require trust","Workspace Trust"),settings:f})}if(this.searchResultModel?.updateChildren(),this.settingsTreeModel){if(this.refreshModels(l),i&&this.searchResultModel)return await this.onSearchInputChanged();this.refreshTOCTree(),this.renderTree(void 0,n)}else this.settingsTreeModel=this.instantiationService.createInstance(Xg,this.viewState,this.workspaceTrustManagementService.isWorkspaceTrusted()),this.refreshModels(l),(this.viewState.query?void 0:this.restoreCachedState())?.searchQuery||this.searchWidget.getValue()?await this.onSearchInputChanged():(this.refreshTOCTree(),this.refreshTree(),this.tocTree.collapseAll())}updateElementsByKey(t){t.size?(this.searchResultModel&&t.forEach(n=>this.searchResultModel.updateElementsByName(n)),this.settingsTreeModel&&t.forEach(n=>this.settingsTreeModel.updateElementsByName(n)),t.forEach(n=>this.renderTree(n))):this.renderTree()}getActiveControlInSettingsTree(){let t=this.settingsTree.getHTMLElement(),n=t.ownerDocument.activeElement;return n&&Ry(t)?n:null}renderTree(t,n=!1){if(!n&&t&&this.scheduledRefreshes.has(t)){this.updateModifiedLabelForKey(t);return}if(this.contextViewFocused()){let s=this.window.document.querySelector(".context-view");s&&this.scheduleRefresh(s,t);return}let i=this.getActiveControlInSettingsTree(),o=i&&this.settingRenderers.getSettingDOMElementForDOMElement(i);if(o&&!n)if(t){if(o.getAttribute(Ht.SETTING_KEY_ATTR)===t&&o.parentElement&&!o.parentElement.classList.contains("setting-item-list")){this.updateModifiedLabelForKey(t),this.scheduleRefresh(o,t);return}}else{this.scheduleRefresh(o);return}if(this.renderResultCountMessages(),t){let s=this.currentSettingsModel.getElementsByName(t);if(s&&s.length)s.length>=2&&console.warn("More than one setting with key "+t+" found"),this.refreshSingleElement(s[0]);else return}else this.refreshTree()}contextViewFocused(){return!!wu(this.rootElement.ownerDocument.activeElement,"context-view")}refreshSingleElement(t){this.isVisible()&&this.settingsTree.rerender(t)}refreshTree(){this.isVisible()&&this.settingsTree.setChildren(null,_6(this.currentSettingsModel.root))}refreshTOCTree(){this.isVisible()&&(this.tocTreeModel.update(),this.tocTree.setChildren(null,d2(this.tocTreeModel,this.tocTree)))}updateModifiedLabelForKey(t){let n=this.currentSettingsModel.getElementsByName(t),i=n&&n[0]&&n[0].isConfigured,o=this.settingRenderers.getDOMElementsForSettingKey(this.settingsTree.getHTMLElement(),t);o&&o[0]&&o[0].classList.toggle("is-configured",!!i)}async onSearchInputChanged(){if(!this.currentSettingsModel)return;let t=this.searchWidget.getValue().trim();this.viewState.query=t,this.delayedFilterLogging.cancel(),await this.triggerSearch(t.replace(/\u203A/g," ")),t&&this.searchResultModel&&this.delayedFilterLogging.trigger(()=>this.reportFilteringUsed(this.searchResultModel))}parseSettingFromJSON(t){let n=t.match(/"([a-zA-Z.]+)": /);return n&&n[1]}toggleTocBySearchBehaviorType(){this.configurationService.getValue(w6)==="hide"?(this.splitView.setViewVisible(0,!1),this.splitView.style({separatorBorder:H.transparent})):(this.splitView.setViewVisible(0,!0),this.splitView.style({separatorBorder:this.theme.getColor(e0)}))}async triggerSearch(t){let n=this.editorProgressService.show(!0);if(this.viewState.tagFilters=new Set,this.viewState.extensionFilters=new Set,this.viewState.featureFilters=new Set,this.viewState.idFilters=new Set,this.viewState.languageFilter=void 0,t){let i=f0(t);t=i.query,i.tags.forEach(o=>this.viewState.tagFilters.add(o)),i.extensionFilters.forEach(o=>this.viewState.extensionFilters.add(o)),i.featureFilters.forEach(o=>this.viewState.featureFilters.add(o)),i.idFilters.forEach(o=>this.viewState.idFilters.add(o)),this.viewState.languageFilter=i.languageFilter}this.settingsTargetsWidget.updateLanguageFilterIndicators(this.viewState.languageFilter),t&&t!=="@"?(t=this.parseSettingFromJSON(t)||t,await this.triggerFilterPreferences(t),this.toggleTocBySearchBehaviorType()):(this.viewState.tagFilters.size||this.viewState.extensionFilters.size||this.viewState.featureFilters.size||this.viewState.idFilters.size||this.viewState.languageFilter?this.searchResultModel=this.createFilterModel():this.searchResultModel=null,this.searchDelayer.cancel(),this.searchInProgress&&(this.searchInProgress.cancel(),this.searchInProgress.dispose(),this.searchInProgress=null),this.tocTree.setFocus([]),this.viewState.filterToCategory=void 0,this.tocTreeModel.currentSearchModel=this.searchResultModel,this.searchResultModel?(this.tocTree.setSelection([]),this.tocTree.expandAll(),this.refreshTOCTree(),this.renderResultCountMessages(),this.refreshTree(),this.toggleTocBySearchBehaviorType()):this.tocTreeDisposed||(this.tocTree.collapseAll(),this.refreshTOCTree(),this.renderResultCountMessages(),this.refreshTree(),this.splitView.setViewVisible(0,!0))),n.done()}createFilterModel(){let t=this.instantiationService.createInstance(Qg,this.viewState,this.settingsOrderByTocIndex,this.workspaceTrustManagementService.isWorkspaceTrusted()),n={filterMatches:[]};for(let i of this.defaultSettingsEditorModel.settingsGroups.slice(1))for(let o of i.sections)for(let s of o.settings)n.filterMatches.push({setting:s,matches:[],matchType:0,score:0});return t.setResult(0,n),t}reportFilteringUsed(t){if(!t)return;let n={},i=t.getRawResults(),o=i[0];o&&(n.filterResult=o.filterMatches.length);let s=i[1];s&&(n.nlpResult=s.filterMatches.length);let a=t.getUniqueResults(),l={"counts.nlpResult":n.nlpResult,"counts.filterResult":n.filterResult,"counts.uniqueResultsCount":a?.filterMatches.length};this.telemetryService.publicLog2("settingsEditor.filter",l)}async triggerFilterPreferences(t){this.searchInProgress&&(this.searchInProgress.cancel(),this.searchInProgress=null);let n=this.searchInProgress=new jn;return this.searchDelayer.trigger(async()=>{if(!n.token.isCancellationRequested){let i=await this.localFilterPreferences(t,n.token);i&&!i.exactMatch&&!n.token.isCancellationRequested&&await this.remoteSearchPreferences(t,n.token),this.onDidFinishSearch()}})}onDidFinishSearch(){this.tocTreeModel.currentSearchModel=this.searchResultModel,this.tocTreeModel.update(),this.tocTree.setFocus([]),this.viewState.filterToCategory=void 0,this.tocTree.expandAll(),this.settingsTree.scrollTop=0,this.refreshTOCTree(),this.renderTree(void 0,!0)}localFilterPreferences(t,n){let i=this.preferencesSearchService.getLocalSearchProvider(t);return this.filterOrSearchPreferences(t,0,i,n)}remoteSearchPreferences(t,n){let i=this.preferencesSearchService.getRemoteSearchProvider(t);return this.filterOrSearchPreferences(t,1,i,n)}async filterOrSearchPreferences(t,n,i,o){let s=await this._filterOrSearchPreferencesModel(t,this.defaultSettingsEditorModel,i,o);return o?.isCancellationRequested?null:(this.searchResultModel??=this.instantiationService.createInstance(Qg,this.viewState,this.settingsOrderByTocIndex,this.workspaceTrustManagementService.isWorkspaceTrusted()),this.searchResultModel.setResult(n,s),s)}renderResultCountMessages(){if(this.currentSettingsModel)if(this.clearFilterLinkContainer.style.display=this.viewState.tagFilters&&this.viewState.tagFilters.size>0?"initial":"none",this.searchResultModel){let t=this.searchResultModel.getUniqueResultsCount(),n;switch(t){case 0:n=u("noResults","No Settings Found");break;case 1:n=u("oneResult","1 Setting Found");break;default:n=u("moreThanOneResult","{0} Settings Found",t)}this.searchResultLabel=n,this.updateInputAriaLabel(),this.countElement.innerText=n,Bs(n),this.countElement.style.display!=="block"&&(this.countElement.style.display="block",this.layout(this.dimension)),this.rootElement.classList.toggle("no-results",t===0),this.splitView.el.style.visibility=t===0?"hidden":"visible"}else{this.countElement.style.display!=="none"&&(this.searchResultLabel=null,this.updateInputAriaLabel(),this.countElement.style.display="none",this.countElement.innerText="",this.layout(this.dimension)),this.rootElement.classList.remove("no-results"),this.splitView.el.style.visibility="visible";return}}_filterOrSearchPreferencesModel(t,n,i,o){return(i?i.searchModel(n,o):Promise.resolve(null)).then(void 0,a=>qd(a)?Promise.reject(a):null)}layoutSplitView(t){let n=t.height-97;if(this.splitView.el.style.height=`${n}px`,this.splitView.layout(this.bodyContainer.clientWidth,n),!(this.configurationService.getValue(w6)==="hide"&&this.searchResultModel)){let s=this.splitView.isViewVisible(0),a=this.bodyContainer.clientWidth>=Mt.NARROW_TOTAL_WIDTH;this.splitView.setViewVisible(0,a),!s&&a&&this.bodyContainer.clientWidth>=Mt.EDITOR_MIN_WIDTH+Mt.TOC_RESET_WIDTH&&this.splitView.resizeView(0,Mt.TOC_RESET_WIDTH),this.splitView.style({separatorBorder:a?this.theme.getColor(e0):H.transparent})}}saveState(){if(this.isVisible()){let t=this.searchWidget.getValue().trim(),n=this.settingsTargetsWidget.settingsTarget;this.input&&this.editorMemento.saveEditorState(this.group,this.input,{searchQuery:t,target:n})}else this.input&&this.editorMemento.clearEditorState(this.input,this.group);super.saveState()}};Mt=_([y(1,er),y(2,pa),y(3,Vs),y(4,Ci),y(5,At),y(6,we),y(7,j8),y(8,Vt),y(9,Ne),y(10,Io),y(11,M7),y(12,T6),y(13,Yg),y(14,d0),y(15,wd),y(16,Lt),y(17,fD),y(18,vs),y(19,w8),y(20,N7),y(21,Dr)],Mt);var qC=class extends N{constructor(t,n,i,o,s,a){super();this.commandService=i;this.userDataSyncService=o;this.userDataSyncEnablementService=s;let l=q(n,$r(".settings-right-controls")),d=q(l,$r(".turn-on-sync"));this.turnOnSyncButton=this._register(new Kr(d,{title:!0,...fa})),this.lastSyncedLabel=q(l,$r(".last-synced-label")),Yi(this.lastSyncedLabel),this.turnOnSyncButton.enabled=!0,this.turnOnSyncButton.label=u("turnOnSyncButton","Backup and Sync Settings"),Yi(this.turnOnSyncButton.element),this._register(this.turnOnSyncButton.onDidClick(async()=>{a.publicLog2("sync/turnOnSyncFromSettings"),await this.commandService.executeCommand("workbench.userDataSync.actions.turnOn")})),this.updateLastSyncedTime(),this._register(this.userDataSyncService.onDidChangeLastSyncTime(()=>{this.updateLastSyncedTime()})),this._register(new Tu).cancelAndSet(()=>this.updateLastSyncedTime(),60*1e3,t),this.update(),this._register(this.userDataSyncService.onDidChangeStatus(()=>{this.update()})),this._register(this.userDataSyncEnablementService.onDidChangeEnablement(()=>{this.update()}))}lastSyncedLabel;turnOnSyncButton;_onDidChangeLastSyncedLabel=this._register(new T);onDidChangeLastSyncedLabel=this._onDidChangeLastSyncedLabel.event;updateLastSyncedTime(){let t=this.userDataSyncService.lastSyncTime,n;if(typeof t=="number"){let i=JN(t,!0,void 0,!0);n=u("lastSyncedLabel","Last synced: {0}",i)}else n="";this.lastSyncedLabel.textContent=n,this._onDidChangeLastSyncedLabel.fire(n)}update(){this.userDataSyncService.status!=="uninitialized"&&(this.userDataSyncEnablementService.isEnabled()||this.userDataSyncService.status!=="idle"?(Go(this.lastSyncedLabel),Yi(this.turnOnSyncButton.element)):(Yi(this.lastSyncedLabel),Go(this.turnOnSyncButton.element)))}};qC=_([y(2,Xn),y(3,X3),y(4,Yg),y(5,er)],qC);var Rv=class extends pd{_originalModel;get originalModel(){return this._originalModel}_modifiedModel;get modifiedModel(){return this._modifiedModel}constructor(e,t){super(),this._originalModel=e,this._modifiedModel=t}async resolve(){await Promise.all([this._originalModel?.resolve(),this._modifiedModel?.resolve()])}isResolved(){return!!(this._originalModel?.isResolved()&&this._modifiedModel?.isResolved())}dispose(){super.dispose()}};var w0=class extends Rv{_originalModel;get originalModel(){return this._originalModel}_modifiedModel;get modifiedModel(){return this._modifiedModel}_textDiffEditorModel=void 0;get textDiffEditorModel(){return this._textDiffEditorModel}constructor(e,t){super(e,t),this._originalModel=e,this._modifiedModel=t,this.updateTextDiffEditorModel()}async resolve(){await super.resolve(),this.updateTextDiffEditorModel()}updateTextDiffEditorModel(){this.originalModel?.isResolved()&&this.modifiedModel?.isResolved()&&(this._textDiffEditorModel?(this._textDiffEditorModel.original=this.originalModel.textEditorModel,this._textDiffEditorModel.modified=this.modifiedModel.textEditorModel):this._textDiffEditorModel={original:this.originalModel.textEditorModel,modified:this.modifiedModel.textEditorModel})}isResolved(){return!!this._textDiffEditorModel}isReadonly(){return!!this.modifiedModel&&this.modifiedModel.isReadonly()}dispose(){this._textDiffEditorModel=void 0,super.dispose()}};var Yc=class extends ao{constructor(t,n,i,o,s,a){super(t,n,i,o,a);this.original=i;this.modified=o;this.forceOpenAsBinary=s}static ID="workbench.editors.diffEditorInput";get typeId(){return Yc.ID}get editorId(){return this.modified.editorId===this.original.editorId?this.modified.editorId:void 0}get capabilities(){let t=super.capabilities;return this.labels.forceDescription&&(t|=64),t}cachedModel=void 0;labels=this.computeLabels();computeLabels(){let t,n=!1;if(this.preferredName)t=this.preferredName;else{let p=this.original.getName(),h=this.modified.getName();t=u("sideBySideLabels","{0} \u2194 {1}",p,h),n=p===h}let i,o,s;if(this.preferredDescription)i=this.preferredDescription,o=this.preferredDescription,s=this.preferredDescription;else{i=this.computeLabel(this.original.getDescription(0),this.modified.getDescription(0)),s=this.computeLabel(this.original.getDescription(2),this.modified.getDescription(2));let p=this.original.getDescription(1),h=this.modified.getDescription(1);if(typeof p=="string"&&typeof h=="string"&&(p||h)){let[g,f]=pK([p,h]);o=this.computeLabel(g,f)}}let a=this.computeLabel(this.original.getTitle(0)??this.original.getName(),this.modified.getTitle(0)??this.modified.getName()," \u2194 "),l=this.computeLabel(this.original.getTitle(1)??this.original.getName(),this.modified.getTitle(1)??this.modified.getName()," \u2194 "),d=this.computeLabel(this.original.getTitle(2)??this.original.getName(),this.modified.getTitle(2)??this.modified.getName()," \u2194 "),c=this.getPreferredTitle();return c&&(a=`${c} (${a})`,l=`${c} (${l})`,d=`${c} (${d})`),{name:t,shortDescription:i,mediumDescription:o,longDescription:s,forceDescription:n,shortTitle:a,mediumTitle:l,longTitle:d}}computeLabel(t,n,i=" - "){if(!(!t||!n))return t===n?n:`${t}${i}${n}`}getName(){return this.labels.name}getDescription(t=1){switch(t){case 0:return this.labels.shortDescription;case 2:return this.labels.longDescription;case 1:default:return this.labels.mediumDescription}}getTitle(t){switch(t){case 0:return this.labels.shortTitle;case 2:return this.labels.longTitle;default:case 1:return this.labels.mediumTitle}}async resolve(){let t=await this.createModel();return this.cachedModel?.dispose(),this.cachedModel=t,this.cachedModel}prefersEditorPane(t){return this.forceOpenAsBinary?t.find(n=>n.typeId===X7):t.find(n=>n.typeId===Y7)}async createModel(){let[t,n]=await Promise.all([this.original.resolve(),this.modified.resolve()]);return n instanceof Ws&&t instanceof Ws?new w0(t,n):new Rv(LP(t)?t:void 0,LP(n)?n:void 0)}toUntyped(t){let n=super.toUntyped(t);if(n)return{...n,modified:n.primary,original:n.secondary}}matches(t){return this===t?!0:t instanceof Yc?this.modified.matches(t.modified)&&this.original.matches(t.original)&&t.forceOpenAsBinary===this.forceOpenAsBinary:Hs(t)?this.modified.matches(t.modified)&&this.original.matches(t.original):!1}dispose(){this.cachedModel&&(this.cachedModel.dispose(),this.cachedModel=void 0),super.dispose()}};Yc=_([y(5,vt)],Yc);var Ud=class extends N{constructor(t,n){super();this.configurationService=t;this.workspaceContextService=n;this.storeEnablementState(),this.storeCustomPatterns(),this.registerListeners()}_serviceBrand;static SETTING_ID_PATTERNS="workbench.editor.customLabels.patterns";static SETTING_ID_ENABLED="workbench.editor.customLabels.enabled";_onDidChange=this._register(new T);onDidChange=this._onDidChange.event;patterns=[];enabled=!0;cache=new Ox(1e3);registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>{if(t.affectsConfiguration(Ud.SETTING_ID_ENABLED)){let n=this.enabled;this.storeEnablementState(),n!==this.enabled&&this.patterns.length>0&&this._onDidChange.fire()}else t.affectsConfiguration(Ud.SETTING_ID_PATTERNS)&&(this.cache.clear(),this.storeCustomPatterns(),this._onDidChange.fire())}))}storeEnablementState(){this.enabled=this.configurationService.getValue(Ud.SETTING_ID_ENABLED)}_templateRegexValidation=/[a-zA-Z0-9]/;storeCustomPatterns(){this.patterns=[];let t=this.configurationService.getValue(Ud.SETTING_ID_PATTERNS);for(let n in t){let i=t[n];if(!this._templateRegexValidation.test(i))continue;let o=lu(n),s=Rh(n);this.patterns.push({pattern:n,template:i,isAbsolutePath:o,parsedPattern:s})}this.patterns.sort((n,i)=>this.patternWeight(i.pattern)-this.patternWeight(n.pattern))}patternWeight(t){let n=0;for(let i of t.split("/"))i==="**"?n+=1:i==="*"?n+=10:i.includes("*")||i.includes("?")?n+=50:i!==""&&(n+=100);return n}getName(t){if(!this.enabled||this.patterns.length===0)return;let n=t.toString(),i=this.cache.get(n);if(i!==void 0)return i??void 0;let o=this.applyPatterns(t);return this.cache.set(n,o??null),o}applyPatterns(t){let n=this.workspaceContextService.getWorkspaceFolder(t),i;for(let o of this.patterns){let s;if(n&&!o.isAbsolutePath?(i||(i=Su(ns(n.uri),t)??t.path),s=i):s=t.path,o.parsedPattern(s))return this.applyTemplate(o.template,t,s)}}_parsedTemplateExpression=/\$\{(dirname|filename|extname|extname\((?<extnameN>[-+]?\d+)\)|dirname\((?<dirnameN>[-+]?\d+)\))\}/g;_filenameCaptureExpression=/(?<filename>^\.*[^.]*)/;applyTemplate(t,n,i){let o;return t.replace(this._parsedTemplateExpression,(s,a,...l)=>{o=o??lH(n.path);let{dirnameN:d="0",extnameN:c="0"}=l.pop();if(a==="filename"){let{filename:p}=this._filenameCaptureExpression.exec(o.base)?.groups??{};if(p)return p}else if(a==="extname"){let p=this.getExtnames(o.base);if(p)return p}else if(a.startsWith("extname")){let p=parseInt(c),h=this.getNthExtname(o.base,p);if(h)return h}else if(a.startsWith("dirname")){let p=parseInt(d),h=this.getNthDirname(du(i),p);if(h)return h}return s})}removeLeadingDot(t){let n=t;for(;n.startsWith(".");)n=n.slice(1);return n}getNthDirname(t,n){t=t.startsWith("/")?t.slice(1):t;let i=t.split("/");return this.getNthFragment(i,n)}getExtnames(t){return this.removeLeadingDot(t).split(".").slice(1).join(".")}getNthExtname(t,n){let i=this.removeLeadingDot(t).split(".");return i.shift(),this.getNthFragment(i,n)}getNthFragment(t,n){let i=t.length,o;n<0?o=Math.abs(n)-1:o=i-n-1;let s=t[o];if(!(s===void 0||s===""))return s}};Ud=_([y(0,Ge),y(1,fn)],Ud);var Vp=j("ICustomEditorLabelService");Cn(Vp,Ud,1);var Mv=class extends wr{constructor(t,n,i,o,s,a,l){super();this.resource=t;this.labelService=i;this.fileService=o;this.filesConfigurationService=s;this.textResourceConfigurationService=a;this.customEditorLabelService=l;this._preferredResource=n||t,this.registerListeners()}get capabilities(){let t=32;return this.fileService.hasProvider(this.resource)?this.filesConfigurationService.isReadonly(this.resource)&&(t|=2):t|=4,t&2||(t|=128),t}_preferredResource;get preferredResource(){return this._preferredResource}registerListeners(){this._register(this.labelService.onDidChangeFormatters(t=>this.onLabelEvent(t.scheme))),this._register(this.fileService.onDidChangeFileSystemProviderRegistrations(t=>this.onLabelEvent(t.scheme))),this._register(this.fileService.onDidChangeFileSystemProviderCapabilities(t=>this.onLabelEvent(t.scheme))),this._register(this.customEditorLabelService.onDidChange(()=>this.updateLabel()))}onLabelEvent(t){t===this._preferredResource.scheme&&this.updateLabel()}updateLabel(){this._name=void 0,this._shortDescription=void 0,this._mediumDescription=void 0,this._longDescription=void 0,this._shortTitle=void 0,this._mediumTitle=void 0,this._longTitle=void 0,this._onDidChangeLabel.fire()}setPreferredResource(t){yn(t,this._preferredResource)||(this._preferredResource=t,this.updateLabel())}_name=void 0;getName(){return typeof this._name!="string"&&(this._name=this.customEditorLabelService.getName(this._preferredResource)??this.labelService.getUriBasenameLabel(this._preferredResource)),this._name}getDescription(t=1){switch(t){case 0:return this.shortDescription;case 2:return this.longDescription;case 1:default:return this.mediumDescription}}_shortDescription=void 0;get shortDescription(){return typeof this._shortDescription!="string"&&(this._shortDescription=this.labelService.getUriBasenameLabel(ns(this._preferredResource))),this._shortDescription}_mediumDescription=void 0;get mediumDescription(){return typeof this._mediumDescription!="string"&&(this._mediumDescription=this.labelService.getUriLabel(ns(this._preferredResource),{relative:!0})),this._mediumDescription}_longDescription=void 0;get longDescription(){return typeof this._longDescription!="string"&&(this._longDescription=this.labelService.getUriLabel(ns(this._preferredResource))),this._longDescription}_shortTitle=void 0;get shortTitle(){return typeof this._shortTitle!="string"&&(this._shortTitle=this.getName()),this._shortTitle}_mediumTitle=void 0;get mediumTitle(){return typeof this._mediumTitle!="string"&&(this._mediumTitle=this.labelService.getUriLabel(this._preferredResource,{relative:!0})),this._mediumTitle}_longTitle=void 0;get longTitle(){return typeof this._longTitle!="string"&&(this._longTitle=this.labelService.getUriLabel(this._preferredResource)),this._longTitle}getTitle(t){switch(t){case 0:return this.shortTitle;case 2:return this.longTitle;default:case 1:return this.mediumTitle}}isReadonly(){return this.filesConfigurationService.isReadonly(this.resource)}ensureLimits(t){if(t?.limits)return t.limits;let n=vK(this.resource),i,o=this.textResourceConfigurationService.inspect(this.resource,null,"workbench.editorLargeFileConfirmation");return nz(o)&&(i=o.value*ap.MB),{size:i??n}}};Mv=_([y(2,ro),y(3,nn),y(4,Cd),y(5,Vs),y(6,Vp)],Mv);var Ov=class extends Ws{constructor(e,t,n,i,o){super(n,t,i,o,e)}dispose(){this.textEditorModelHandle&&this.modelService.destroyModel(this.textEditorModelHandle),super.dispose()}};Ov=_([y(1,Lt),y(2,Bi),y(3,Gf),y(4,Xi)],Ov);var nm=class extends Mv{constructor(t,n,i,o,s,a,l,d,c){super(t,n,s,a,l,d,c);this.editorService=i;this.textFileService=o}save(t,n){return this.resource.scheme!==ye.untitled&&!this.fileService.hasProvider(this.resource)?this.saveAs(t,n):this.doSave(n,!1,t)}saveAs(t,n){return this.doSave(n,!0,t)}async doSave(t,n,i){let o;if(n?o=await this.textFileService.saveAs(this.resource,void 0,{...t,suggestedTarget:this.preferredResource}):o=await this.textFileService.save(this.resource,t),!!o)return{resource:o}}async revert(t,n){await this.textFileService.revert(this.resource,n)}};nm=_([y(2,vt),y(3,Us),y(4,ro),y(5,nn),y(6,Cd),y(7,Vs),y(8,Vp)],nm);var zd=class extends nm{constructor(t,n,i,o,s,a,l,d,c,p,h,g,f){super(t,void 0,d,l,p,c,h,g,f);this.name=n;this.description=i;this.preferredLanguageId=o;this.preferredContents=s;this.textModelService=a}static ID="workbench.editors.resourceEditorInput";get typeId(){return zd.ID}get editorId(){return al.id}cachedModel=void 0;modelReference=void 0;getName(){return this.name||super.getName()}setName(t){this.name!==t&&(this.name=t,this._onDidChangeLabel.fire())}getDescription(){return this.description}setDescription(t){this.description!==t&&(this.description=t,this._onDidChangeLabel.fire())}setLanguageId(t,n){this.setPreferredLanguageId(t),this.cachedModel?.setLanguageId(t,n)}setPreferredLanguageId(t){this.preferredLanguageId=t}setPreferredContents(t){this.preferredContents=t}async resolve(){let t=this.preferredContents,n=this.preferredLanguageId;this.preferredContents=void 0,this.preferredLanguageId=void 0,this.modelReference||(this.modelReference=this.textModelService.createModelReference(this.resource));let i=await this.modelReference,o=i.object;if(!(o instanceof Ov))throw i.dispose(),this.modelReference=void 0,new Error(`Unexpected model for TextResourceEditorInput: ${this.resource}`);return this.cachedModel=o,(typeof t=="string"||typeof n=="string")&&o.updateTextEditorModel(typeof t=="string"?hS(t):void 0,n),o}matches(t){return this===t?!0:t instanceof zd?yn(t.resource,this.resource):$_(t)?super.matches(t):!1}dispose(){this.modelReference&&(this.modelReference.then(t=>t.dispose()),this.modelReference=void 0),this.cachedModel=void 0,super.dispose()}};zd=_([y(5,Ic),y(6,Us),y(7,vt),y(8,nn),y(9,ro),y(10,Cd),y(11,Vs),y(12,Vp)],zd);var Kd=class extends nm{constructor(t,n,i,o,s,a,l,d,c,p,h){super(t.resource,void 0,o,n,i,s,d,p,h);this.model=t;this.environmentService=a;this.pathService=l;this.textModelService=c;this.registerModelListeners(t),this._register(this.textFileService.untitled.onDidCreate(g=>this.onDidCreateUntitledModel(g)))}static ID="workbench.editors.untitledEditorInput";get typeId(){return Kd.ID}get editorId(){return al.id}modelResolve=void 0;modelDisposables=this._register(new X);cachedUntitledTextEditorModelReference=void 0;registerModelListeners(t){this.modelDisposables.clear(),this.modelDisposables.add(t.onDidChangeDirty(()=>this._onDidChangeDirty.fire())),this.modelDisposables.add(t.onDidChangeName(()=>this._onDidChangeLabel.fire())),this.modelDisposables.add(t.onDidRevert(()=>this.dispose()))}onDidCreateUntitledModel(t){yn(t.resource,this.model.resource)&&t!==this.model&&(this.model=t,this.registerModelListeners(t))}getName(){return this.model.name}getDescription(t=1){if(!this.model.hasAssociatedFilePath){let n=this.resource.path;return n!==this.getName()?n:void 0}return super.getDescription(t)}getTitle(t){if(!this.model.hasAssociatedFilePath){let n=this.getName(),i=this.getDescription();return i&&i!==n?`${n} \u2022 ${i}`:n}return super.getTitle(t)}isDirty(){return this.model.isDirty()}getEncoding(){return this.model.getEncoding()}setEncoding(t,n){return this.model.setEncoding(t)}get hasLanguageSetExplicitly(){return this.model.hasLanguageSetExplicitly}get hasAssociatedFilePath(){return this.model.hasAssociatedFilePath}setLanguageId(t,n){this.model.setLanguageId(t,n)}getLanguageId(){return this.model.getLanguageId()}async resolve(){return this.modelResolve||(this.modelResolve=(async()=>{this.cachedUntitledTextEditorModelReference=await this.textModelService.createModelReference(this.resource)})()),await this.modelResolve,this.isDisposed()&&this.disposeModelReference(),this.model}toUntyped(t){let n={resource:this.model.hasAssociatedFilePath?NH(this.model.resource,this.environmentService.remoteAuthority,this.pathService.defaultUriScheme):this.resource,forceUntitled:!0,options:{override:this.editorId}};return typeof t?.preserveViewState=="number"&&(n.encoding=this.getEncoding(),n.languageId=this.getLanguageId(),n.contents=this.model.isModified()?this.model.textEditorModel?.getValue():void 0,n.options.viewState=ib(this,t.preserveViewState,this.editorService),typeof n.contents=="string"&&!this.model.hasAssociatedFilePath&&!t.preserveResource&&(n.resource=void 0)),n}matches(t){return this===t?!0:t instanceof Kd?yn(t.resource,this.resource):Q7(t)?super.matches(t):!1}dispose(){this.modelResolve=void 0,this.disposeModelReference(),super.dispose()}disposeModelReference(){rt(this.cachedUntitledTextEditorModelReference),this.cachedUntitledTextEditorModelReference=void 0}};Kd=_([y(1,Us),y(2,ro),y(3,vt),y(4,nn),y(5,Hi),y(6,a_),y(7,Cd),y(8,Ic),y(9,Vs),y(10,Vp)],Kd);var u2=j("textEditorService"),YC=class extends N{constructor(t,n,i,o,s){super();this.untitledTextEditorService=t;this.instantiationService=n;this.uriIdentityService=i;this.fileService=o;this.editorResolverService=s;this.registerDefaultEditor()}editorInputCache=new bi;fileEditorFactory=Te.as(ys.EditorFactory).getFileEditorFactory();registerDefaultEditor(){this._register(this.editorResolverService.registerEditor("*",{id:al.id,label:al.displayName,detail:al.providerDisplayName,priority:"builtin"},{},{createEditorInput:t=>({editor:this.createTextEditor(t)}),createUntitledEditorInput:t=>({editor:this.createTextEditor(t)}),createDiffEditorInput:t=>({editor:this.createTextEditor(t)})}))}async resolveTextEditor(t){return this.createTextEditor(t)}createTextEditor(t){if(Id(t))return this.createTextEditor(t.result);if(Hs(t)){let o=this.createTextEditor(t.original),s=this.createTextEditor(t.modified);return this.instantiationService.createInstance(Yc,t.label,t.description,o,s,void 0)}if(yd(t)){let o=this.createTextEditor(t.primary),s=this.createTextEditor(t.secondary);return this.instantiationService.createInstance(ao,t.label,t.description,s,o)}let n=t;if(n.forceUntitled||!n.resource||n.resource.scheme===ye.untitled){let o={languageId:n.languageId,initialValue:n.contents,encoding:n.encoding},s;return n.resource?.scheme===ye.untitled?s=this.untitledTextEditorService.create({untitledResource:n.resource,...o}):s=this.untitledTextEditorService.create({associatedResource:n.resource,...o}),this.createOrGetCached(s.resource,()=>this.instantiationService.createInstance(Kd,s))}let i=t;if(i.resource instanceof Z){let o=i.label||zo(i.resource),s=i.resource,a=this.uriIdentityService.asCanonicalUri(s);return this.createOrGetCached(a,()=>i.forceFile||this.fileService.hasProvider(a)?this.fileEditorFactory.createFileEditor(a,s,i.label,i.description,i.encoding,i.languageId,i.contents,this.instantiationService):this.instantiationService.createInstance(zd,a,i.label,i.description,i.languageId,i.contents),l=>{l instanceof Kd||(l instanceof zd?(o&&l.setName(o),i.description&&l.setDescription(i.description),i.languageId&&l.setPreferredLanguageId(i.languageId),typeof i.contents=="string"&&l.setPreferredContents(i.contents)):(l.setPreferredResource(s),i.label&&l.setPreferredName(i.label),i.description&&l.setPreferredDescription(i.description),i.encoding&&l.setPreferredEncoding(i.encoding),i.languageId&&l.setPreferredLanguageId(i.languageId),typeof i.contents=="string"&&l.setPreferredContents(i.contents)))})}throw new Error(`ITextEditorService: Unable to create texteditor from ${JSON.stringify(t)}`)}createOrGetCached(t,n,i){let o=this.editorInputCache.get(t);return o?(i?.(o),o):(o=n(),this.editorInputCache.set(t,o),z.once(o.onWillDispose)(()=>this.editorInputCache.delete(t)),o)}};YC=_([y(0,MN),y(1,we),y(2,ol),y(3,nn),y(4,gD)],YC);Cn(u2,YC,0);var _0=Te.as(Js.JSONContribution),Xc=class extends N{constructor(t,n){super();this.preferencesService=t;this.logService=n;this._register(_0.onDidChangeSchema(i=>{this._onDidChangeFile.fire([{resource:Z.parse(i),type:0}])})),this._register(t.onDidDefaultSettingsContentChanged(i=>{this._onDidChangeFile.fire([{resource:i,type:0}])}))}static SCHEMA=ye.vscode;_onDidChangeFile=this._register(new T);onDidChangeFile=this._onDidChangeFile.event;capabilities=2050;async readFile(t){if(t.scheme!==Xc.SCHEMA)throw new zp;let n;if(t.authority==="schemas"?n=this.getSchemaContent(t):t.authority==="defaultsettings"&&(n=this.preferencesService.getDefaultSettingsContent(t)),n)return Fn.fromString(n).buffer;throw"EntryNotFound"}async stat(t){if(_0.hasSchemaContent(t.toString())||this.preferencesService.hasDefaultSettingsContent(t)){let n=Date.now();return{type:1,permissions:1,mtime:n,ctime:n,size:0}}throw"EntryNotFound"}onDidChangeCapabilities=z.None;watch(t,n){return N.None}async mkdir(t){}async readdir(t){return[]}async rename(t,n,i){}async delete(t,n){}async writeFile(){throw new zp}getSchemaContent(t){let n=Date.now(),i=_0.getSchemaContent(t.toString())??"{}",o=this.logService.getLevel();if(o===2||o===1){let s=Date.now(),a=JSON.stringify(_0.getSchemaContributions().schemas[t.toString()]);this.logService.debug(`${t.toString()}: ${a.length} -> ${i.length} (${Math.round((a.length-i.length)/a.length*100)}%) Took ${s-n}ms`)}return i}};Xc=_([y(0,At),y(1,Vt)],Xc);var im=class extends N{constructor(t,n,i,o,s,a,l,d){super();this.instantiationService=n;this.preferencesService=i;this.userDataProfileService=o;this.workspaceService=s;this.configurationService=a;this.editorResolverService=l;this.textEditorService=d;this._register(this.configurationService.onDidChangeConfiguration(p=>{(p.affectsConfiguration(GN)||p.affectsConfiguration(KN))&&this.handleSettingsEditorRegistration()})),this.handleSettingsEditorRegistration();let c=this._register(this.instantiationService.createInstance(Xc));this._register(t.registerProvider(Xc.SCHEMA,c))}static ID="workbench.contrib.preferences";editorOpeningListener;handleSettingsEditorRegistration(){rt(this.editorOpeningListener),(this.configurationService.getValue(GN)||this.configurationService.getValue(KN))&&(this.editorOpeningListener=this.editorResolverService.registerEditor("**/settings.json",{id:ao.ID,label:u("splitSettingsEditorLabel","Split Settings Editor"),priority:"builtin"},{},{createEditorInput:({resource:t,options:n})=>{if(yn(t,this.userDataProfileService.currentProfile.settingsResource))return{editor:this.preferencesService.createSplitJsonEditorInput(3,t),options:n};let i=this.workspaceService.getWorkbenchState();if(i===2){let o=this.workspaceService.getWorkspace().folders;if(yn(t,o[0].toResource(zN)))return{editor:this.preferencesService.createSplitJsonEditorInput(5,t),options:n}}else if(i===3){let o=this.workspaceService.getWorkspace().folders;for(let s of o)if(yn(t,s.toResource(zN)))return{editor:this.preferencesService.createSplitJsonEditorInput(6,t),options:n}}return{editor:this.textEditorService.createTextEditor({resource:t}),options:n}}}))}dispose(){rt(this.editorOpeningListener),super.dispose()}};im=_([y(0,nn),y(1,we),y(2,At),y(3,Dr),y(4,fn),y(5,Ge),y(6,gD),y(7,u2)],im);var mte=Te.as(In.Configuration);mte.registerConfiguration({...kS,properties:{"workbench.settings.enableNaturalLanguageSearch":{type:"boolean",description:u("enableNaturalLanguageSettingsSearch","Controls whether to enable the natural language search mode for settings. The natural language search is provided by a Microsoft online service."),default:!0,scope:3,tags:["usesOnlineServices"]},"workbench.settings.settingsSearchTocBehavior":{type:"string",enum:["hide","filter"],enumDescriptions:[u("settingsSearchTocBehavior.hide","Hide the Table of Contents while searching."),u("settingsSearchTocBehavior.filter","Filter the Table of Contents to just categories that have matching settings. Clicking on a category will filter the results to that category.")],description:u("settingsSearchTocBehavior","Controls the behavior of the Settings editor Table of Contents while searching. If this setting is being changed in the Settings editor, the setting will take effect after the search query is modified."),default:"filter",scope:3}}});var fte="settings.action.search",bte="settings.action.focusSettingsFile",vte="settings.action.focusSettingsFromSearch",yte="settings.action.focusSettingsList",Ite="settings.action.focusTOC",Ste="settings.action.focusSettingControl",Cte="settings.action.focusLevelUp",xte="settings.switchToJSON",Ete="settings.filterByOnline",Tte="settings.filterUntrusted",wte="workbench.action.openSettings",_te="settings.filterByTelemetry";Te.as(ys.EditorPane).registerEditorPane(DS.create(Mt,Mt.ID,u("settingsEditor2","Settings Editor 2")),[new jl(Il)]);Te.as(ys.EditorPane).registerEditorPane(DS.create(Ln,Ln.ID,u("keybindingsEditor","Keybindings Editor")),[new jl(hl)]);var h2=class{canSerialize(e){return!0}serialize(e){return""}deserialize(e){return e.createInstance(hl)}},g2=class{canSerialize(e){return!0}serialize(e){return""}deserialize(e){return e.createInstance(Il)}};Te.as(ys.EditorFactory).registerEditorSerializer(hl.ID,h2);Te.as(ys.EditorFactory).registerEditorSerializer(Il.ID,g2);var m2=gt("openSettings2","Open Settings (UI)"),Dte=gt("openUserSettingsJson","Open User Settings (JSON)"),Lte=gt("openApplicationSettingsJson","Open Application Settings (JSON)"),_o=UE.Preferences;function p2(r){return Cm(r)?r:void 0}function kte(r){return xt(r)?r:void 0}function Ea(r){tn(r)||(r={});let e={focusSearch:p2(r?.focusSearch),openToSide:p2(r?.openToSide),query:kte(r?.query)};return xt(r?.revealSetting?.key)&&(e={...e,revealSetting:{key:r.revealSetting.key,edit:p2(r.revealSetting?.edit)}}),e}var Pv=class extends N{constructor(t,n,i,o,s,a,l){super();this.environmentService=t;this.userDataProfileService=n;this.preferencesService=i;this.workspaceContextService=o;this.labelService=s;this.extensionService=a;this.userDataProfilesService=l;this.registerSettingsActions(),this.registerKeybindingsActions(),this.updatePreferencesEditorMenuItem(),this._register(o.onDidChangeWorkbenchState(()=>this.updatePreferencesEditorMenuItem())),this._register(o.onDidChangeWorkspaceFolders(()=>this.updatePreferencesEditorMenuItemForWorkspaceFolders()))}static ID="workbench.contrib.preferencesActions";registerSettingsActions(){this._register(Pt(class extends _t{constructor(){super({id:wte,title:{...gt("settings","Settings"),mnemonicTitle:u({key:"miOpenSettings",comment:["&& denotes a mnemonic"]},"&&Settings")},keybinding:{weight:200,when:null,primary:2135},menu:[{id:Je.GlobalActivity,group:"2_configuration",order:2},{id:Je.MenubarPreferencesMenu,group:"2_configuration",order:2}]})}run(n,i){let o=typeof i=="string"?{query:i}:Ea(i);return n.get(At).openSettings(o)}})),this._register(Pt(class extends _t{constructor(){super({id:"workbench.action.openSettings2",title:gt("openSettings2","Open Settings (UI)"),category:_o,f1:!0})}run(n,i){return i=Ea(i),n.get(At).openSettings({jsonEditor:!1,...i})}})),this._register(Pt(class extends _t{constructor(){super({id:"workbench.action.openSettingsJson",title:Dte,metadata:{description:gt("workbench.action.openSettingsJson.description","Opens the JSON file containing the current user profile settings")},category:_o,f1:!0})}run(n,i){return i=Ea(i),n.get(At).openSettings({jsonEditor:!0,...i})}}));let t=this;this._register(Pt(class extends _t{constructor(){super({id:"workbench.action.openApplicationSettingsJson",title:Lte,category:_o,menu:{id:Je.CommandPalette,when:oe.notEquals(r9.key,t.userDataProfilesService.defaultProfile.id)}})}run(n,i){return i=Ea(i),n.get(At).openApplicationSettings({jsonEditor:!0,...i})}})),this._register(Pt(class extends _t{constructor(){super({id:"workbench.action.openGlobalSettings",title:gt("openGlobalSettings","Open User Settings"),category:_o,f1:!0})}run(n,i){return i=Ea(i),n.get(At).openUserSettings(i)}})),this._register(Pt(class extends _t{constructor(){super({id:"workbench.action.openRawDefaultSettings",title:gt("openRawDefaultSettings","Open Default Settings (JSON)"),category:_o,f1:!0})}run(n){return n.get(At).openRawDefaultSettings()}})),this._register(Pt(class extends _t{constructor(){super({id:Bd.ID,title:Bd.LABEL,category:_o,f1:!0})}run(n){return n.get(we).createInstance(Bd,Bd.ID,Bd.LABEL.value).run()}})),this._register(Pt(class extends _t{constructor(){super({id:"workbench.action.openWorkspaceSettings",title:gt("openWorkspaceSettings","Open Workspace Settings"),category:_o,menu:{id:Je.CommandPalette,when:ug.notEqualsTo("empty")}})}run(n,i){return i=typeof i=="string"?{query:i}:Ea(i),n.get(At).openWorkspaceSettings(i)}})),this._register(Pt(class extends _t{constructor(){super({id:"workbench.action.openAccessibilitySettings",title:gt("openAccessibilitySettings","Open Accessibility Settings"),category:_o,menu:{id:Je.CommandPalette,when:ug.notEqualsTo("empty")}})}async run(n){await n.get(At).openSettings({jsonEditor:!1,query:"@tag:accessibility"})}})),this._register(Pt(class extends _t{constructor(){super({id:"workbench.action.openWorkspaceSettingsFile",title:gt("openWorkspaceSettingsFile","Open Workspace Settings (JSON)"),category:_o,menu:{id:Je.CommandPalette,when:ug.notEqualsTo("empty")}})}run(n,i){return i=Ea(i),n.get(At).openWorkspaceSettings({jsonEditor:!0,...i})}})),this._register(Pt(class extends _t{constructor(){super({id:"workbench.action.openFolderSettings",title:gt("openFolderSettings","Open Folder Settings"),category:_o,menu:{id:Je.CommandPalette,when:ug.isEqualTo("workspace")}})}async run(n,i){let o=n.get(Xn),s=n.get(At),a=await o.executeCommand(ZI);a&&(i=Ea(i),await s.openFolderSettings({folderUri:a.uri,...i}))}})),this._register(Pt(class extends _t{constructor(){super({id:"workbench.action.openFolderSettingsFile",title:gt("openFolderSettingsFile","Open Folder Settings (JSON)"),category:_o,menu:{id:Je.CommandPalette,when:ug.isEqualTo("workspace")}})}async run(n,i){let o=n.get(Xn),s=n.get(At),a=await o.executeCommand(ZI);a&&(i=Ea(i),await s.openFolderSettings({folderUri:a.uri,jsonEditor:!0,...i}))}})),this._register(Pt(class extends _t{constructor(){super({id:"_workbench.action.openFolderSettings",title:u("openFolderSettings","Open Folder Settings"),category:_o,menu:{id:Je.ExplorerContext,group:"2_workspace",order:20,when:oe.and(S8,I8)}})}async run(n,i){if(Z.isUri(i))await n.get(At).openFolderSettings({folderUri:i});else{let o=n.get(Xn),s=n.get(At),a=await o.executeCommand(ZI);a&&await s.openFolderSettings({folderUri:a.uri})}}})),this._register(Pt(class extends _t{constructor(){super({id:Ete,title:u({key:"miOpenOnlineSettings",comment:["&& denotes a mnemonic"]},"&&Online Services Settings"),menu:{id:Je.MenubarPreferencesMenu,group:"3_settings",order:1}})}run(n){let i=n.get(vt).activeEditorPane;i instanceof Mt?i.focusSearch("@tag:usesOnlineServices"):n.get(At).openSettings({jsonEditor:!1,query:"@tag:usesOnlineServices"})}})),this._register(Pt(class extends _t{constructor(){super({id:Tte,title:gt("filterUntrusted","Show untrusted workspace settings")})}run(n){n.get(At).openWorkspaceSettings({jsonEditor:!1,query:`@tag:${wb}`})}})),this._register(Pt(class extends _t{constructor(){super({id:_te,title:u({key:"miOpenTelemetrySettings",comment:["&& denotes a mnemonic"]},"&&Telemetry Settings")})}run(n){let i=n.get(vt).activeEditorPane;i instanceof Mt?i.focusSearch("@tag:telemetry"):n.get(At).openSettings({jsonEditor:!1,query:"@tag:telemetry"})}})),this.registerSettingsEditorActions(),this.extensionService.whenInstalledExtensionsRegistered().then(()=>{let n=this.environmentService.remoteAuthority,i=this.labelService.getHostLabel(ye.vscodeRemote,n)||n;this._register(Pt(class extends _t{constructor(){super({id:"workbench.action.openRemoteSettings",title:gt("openRemoteSettings","Open Remote Settings ({0})",i),category:_o,menu:{id:Je.CommandPalette,when:sF.notEqualsTo("")}})}run(o,s){return s=Ea(s),o.get(At).openRemoteSettings(s)}})),this._register(Pt(class extends _t{constructor(){super({id:"workbench.action.openRemoteSettingsFile",title:gt("openRemoteSettingsJSON","Open Remote Settings (JSON) ({0})",i),category:_o,menu:{id:Je.CommandPalette,when:sF.notEqualsTo("")}})}run(o,s){return s=Ea(s),o.get(At).openRemoteSettings({jsonEditor:!0,...s})}}))})}registerSettingsEditorActions(){function t(i){let o=i.get(vt).activeEditorPane;return o instanceof Mt?o:null}function n(i){t(i)?.focusSearch()}this._register(Pt(class extends _t{constructor(){super({id:fte,precondition:cl,keybinding:{primary:2084,weight:100,when:null},category:_o,f1:!0,title:gt("settings.focusSearch","Focus Settings Search")})}run(i){n(i)}})),this._register(Pt(class extends _t{constructor(){super({id:_D,precondition:cl,keybinding:{primary:9,weight:100,when:vg},category:_o,f1:!0,title:gt("settings.clearResults","Clear Settings Search Results")})}run(i){t(i)?.clearSearchResults()}})),this._register(Pt(class extends _t{constructor(){super({id:bte,precondition:oe.and(vg,$e.Visible.toNegated()),keybinding:{primary:18,weight:100,when:null},title:u("settings.focusFile","Focus settings file")})}run(i,o){t(i)?.focusSettings()}})),this._register(Pt(class extends _t{constructor(){super({id:vte,precondition:oe.and(vg,$e.Visible.toNegated()),keybinding:{primary:18,weight:200,when:null},title:u("settings.focusFile","Focus settings file")})}run(i,o){t(i)?.focusSettings()}})),this._register(Pt(class extends _t{constructor(){super({id:yte,precondition:oe.and(cl,LD),keybinding:{primary:3,weight:200,when:null},title:u("settings.focusSettingsList","Focus settings list")})}run(i){let o=t(i);o instanceof Mt&&o.focusSettings()}})),this._register(Pt(class extends _t{constructor(){super({id:Ite,precondition:cl,f1:!0,keybinding:[{primary:15,weight:200,when:BS}],category:_o,title:gt("settings.focusSettingsTOC","Focus Settings Table of Contents")})}run(i){let o=t(i);o instanceof Mt&&o.focusTOC()}})),this._register(Pt(class extends _t{constructor(){super({id:Ste,precondition:oe.and(cl,BS),keybinding:{primary:3,weight:200},title:u("settings.focusSettingControl","Focus Setting Control")})}run(i){let o=t(i);if(!(o instanceof Mt))return;o.getContainer()?.ownerDocument.activeElement?.classList.contains("monaco-list")&&o.focusSettings(!0)}})),this._register(Pt(class extends _t{constructor(){super({id:DD,precondition:cl,keybinding:{primary:1091,weight:200,when:null},f1:!0,category:_o,title:gt("settings.showContextMenu","Show Setting Context Menu")})}run(i){let o=t(i);o instanceof Mt&&o.showContextMenu()}})),this._register(Pt(class extends _t{constructor(){super({id:Cte,precondition:oe.and(cl,vg.toNegated(),zF.toNegated()),keybinding:{primary:9,weight:200,when:null},f1:!0,category:_o,title:gt("settings.focusLevelUp","Move Focus Up One Level")})}run(i){let o=t(i);o instanceof Mt&&(o.currentFocusContext===3?o.focusSettings():o.currentFocusContext===2?o.focusTOC():o.currentFocusContext===1&&o.focusSearch())}}))}registerKeybindingsActions(){let t=this,n=gt("preferences","Preferences"),i="workbench.action.openGlobalKeybindings";this._register(Pt(class extends _t{constructor(){super({id:i,title:gt("openGlobalKeybindings","Open Keyboard Shortcuts"),shortTitle:u("keyboardShortcuts","Keyboard Shortcuts"),category:n,icon:gg,keybinding:{when:null,weight:200,primary:Vv(2089,2097)},menu:[{id:Je.CommandPalette},{id:Je.EditorTitle,when:Ui.Resource.isEqualTo(t.userDataProfileService.currentProfile.keybindingsResource.toString()),group:"navigation",order:1},{id:Je.GlobalActivity,group:"2_configuration",order:4}]})}run(o,s){let a=typeof s=="string"?s:void 0;return o.get(At).openGlobalKeybindingSettings(!1,{query:a})}})),this._register(go.appendMenuItem(Je.MenubarPreferencesMenu,{command:{id:i,title:u("keyboardShortcuts","Keyboard Shortcuts")},group:"2_configuration",order:4})),this._register(Pt(class extends _t{constructor(){super({id:"workbench.action.openDefaultKeybindingsFile",title:gt("openDefaultKeybindingsFile","Open Default Keyboard Shortcuts (JSON)"),category:n,menu:{id:Je.CommandPalette}})}run(o){return o.get(At).openDefaultKeybindingsFile()}})),this._register(Pt(class extends _t{constructor(){super({id:"workbench.action.openGlobalKeybindingsFile",title:gt("openGlobalKeybindingsFile","Open Keyboard Shortcuts (JSON)"),category:n,icon:gg,menu:[{id:Je.CommandPalette},{id:Je.EditorTitle,when:oe.and(oi),group:"navigation"}]})}run(o){return o.get(At).openGlobalKeybindingSettings(!0)}})),this._register(Pt(class extends _t{constructor(){super({id:J8,title:gt("showDefaultKeybindings","Show System Keybindings"),menu:[{id:Je.EditorTitle,when:oe.and(oi),group:"1_keyboard_preferences_actions"}]})}run(o){let s=o.get(vt).activeEditorPane;s instanceof Ln&&s.search("@source:system")}})),this._register(Pt(class extends _t{constructor(){super({id:t9,title:gt("showExtensionKeybindings","Show Extension Keybindings"),menu:[{id:Je.EditorTitle,when:oe.and(oi),group:"1_keyboard_preferences_actions"}]})}run(o){let s=o.get(vt).activeEditorPane;s instanceof Ln&&s.search("@source:extension")}})),this._register(Pt(class extends _t{constructor(){super({id:e9,title:gt("showUserKeybindings","Show User Keybindings"),menu:[{id:Je.EditorTitle,when:oe.and(oi),group:"1_keyboard_preferences_actions"}]})}run(o){let s=o.get(vt).activeEditorPane;s instanceof Ln&&s.search("@source:user")}})),this._register(Pt(class extends _t{constructor(){super({id:kD,title:u("clear","Clear Search Results"),keybinding:{weight:200,when:oe.and(oi,xb),primary:9}})}run(o){let s=o.get(vt).activeEditorPane;s instanceof Ln&&s.clearSearchResults()}})),this._register(Pt(class extends _t{constructor(){super({id:Y8,title:u("clearHistory","Clear Keyboard Shortcuts Search History"),category:n,menu:[{id:Je.CommandPalette,when:oe.and(oi)}]})}run(o){let s=o.get(vt).activeEditorPane;s instanceof Ln&&s.clearKeyboardShortcutSearchHistory()}})),this.registerKeybindingEditorActions()}registerKeybindingEditorActions(){let t=this;Sn.registerCommandAndKeybindingRule({id:Eb,weight:200,when:oe.and(oi,va,yg.toNegated()),primary:3,handler:(o,s)=>{let a=o.get(vt).activeEditorPane;a instanceof Ln&&a.defineKeybinding(a.activeKeybindingEntry,!1)}}),Sn.registerCommandAndKeybindingRule({id:OD,weight:200,when:oe.and(oi,va),primary:Vv(2089,2079),handler:(o,s)=>{let a=o.get(vt).activeEditorPane;a instanceof Ln&&a.defineKeybinding(a.activeKeybindingEntry,!0)}}),Sn.registerCommandAndKeybindingRule({id:PD,weight:200,when:oe.and(oi,va),primary:Vv(2089,2083),handler:(o,s)=>{let a=o.get(vt).activeEditorPane;a instanceof Ln&&a.activeKeybindingEntry.keybindingItem.keybinding&&a.defineWhenExpression(a.activeKeybindingEntry)}}),Sn.registerCommandAndKeybindingRule({id:AD,weight:200,when:oe.and(oi,va,rK.toNegated()),primary:20,mac:{primary:2049},handler:(o,s)=>{let a=o.get(vt).activeEditorPane;a instanceof Ln&&a.removeKeybinding(a.activeKeybindingEntry)}}),Sn.registerCommandAndKeybindingRule({id:ND,weight:200,when:oe.and(oi,va),primary:0,handler:(o,s)=>{let a=o.get(vt).activeEditorPane;a instanceof Ln&&a.resetKeybinding(a.activeKeybindingEntry)}}),Sn.registerCommandAndKeybindingRule({id:q8,weight:200,when:oe.and(oi),primary:2084,handler:(o,s)=>{let a=o.get(vt).activeEditorPane;a instanceof Ln&&a.focusSearch()}}),Sn.registerCommandAndKeybindingRule({id:RD,weight:200,when:oe.and(oi,xb),primary:553,mac:{primary:2601},handler:(o,s)=>{let a=o.get(vt).activeEditorPane;a instanceof Ln&&a.recordSearchKeys()}}),Sn.registerCommandAndKeybindingRule({id:MD,weight:200,when:oe.and(oi),primary:558,mac:{primary:2606},handler:(o,s)=>{let a=o.get(vt).activeEditorPane;a instanceof Ln&&a.toggleSortByPrecedence()}}),Sn.registerCommandAndKeybindingRule({id:VD,weight:200,when:oe.and(oi,va),primary:0,handler:(o,s)=>{let a=o.get(vt).activeEditorPane;a instanceof Ln&&a.showSimilarKeybindings(a.activeKeybindingEntry)}}),Sn.registerCommandAndKeybindingRule({id:FD,weight:200,when:oe.and(oi,va,yg.negate()),primary:2081,handler:async(o,s)=>{let a=o.get(vt).activeEditorPane;a instanceof Ln&&await a.copyKeybinding(a.activeKeybindingEntry)}}),Sn.registerCommandAndKeybindingRule({id:BD,weight:200,when:oe.and(oi,va),primary:0,handler:async(o,s)=>{let a=o.get(vt).activeEditorPane;a instanceof Ln&&await a.copyKeybindingCommand(a.activeKeybindingEntry)}}),Sn.registerCommandAndKeybindingRule({id:WD,weight:200,when:oe.and(oi,va),primary:0,handler:async(o,s)=>{let a=o.get(vt).activeEditorPane;a instanceof Ln&&await a.copyKeybindingCommandTitle(a.activeKeybindingEntry)}}),Sn.registerCommandAndKeybindingRule({id:Z8,weight:200,when:oe.and(oi,xb),primary:2066,handler:(o,s)=>{let a=o.get(vt).activeEditorPane;a instanceof Ln&&a.focusKeybindings()}}),Sn.registerCommandAndKeybindingRule({id:Q8,weight:200,when:oe.and(oi,yg,$e.Visible.toNegated()),primary:9,handler:async(o,s)=>{let a=o.get(vt).activeEditorPane;a instanceof Ln&&a.rejectWhenExpression(a.activeKeybindingEntry)}}),Sn.registerCommandAndKeybindingRule({id:X8,weight:200,when:oe.and(oi,yg,$e.Visible.toNegated()),primary:3,handler:async(o,s)=>{let a=o.get(vt).activeEditorPane;a instanceof Ln&&a.acceptWhenExpression(a.activeKeybindingEntry)}});let n=this._register(new X),i=()=>{n.clear(),n.add(Pt(class extends _t{constructor(){let s=Ui.Resource.isEqualTo(t.userDataProfileService.currentProfile.keybindingsResource.toString());super({id:"editor.action.defineKeybinding",title:gt("defineKeybinding.start","Define Keybinding"),f1:!0,precondition:s,keybinding:{weight:200,when:s,primary:Vv(2089,2089)},menu:{id:Je.EditorContent,when:s}})}async run(s){let a=s.get(vt).activeTextEditorControl;Tf(a)&&a.getContribution($7)?.showDefineKeybindingWidget()}}))};i(),this._register(this.userDataProfileService.onDidChangeCurrentProfile(()=>i()))}updatePreferencesEditorMenuItem(){let t="_workbench.openWorkspaceSettingsEditor";this.workspaceContextService.getWorkbenchState()===3&&!St.getCommand(t)&&(St.registerCommand(t,()=>this.preferencesService.openWorkspaceSettings({jsonEditor:!1})),go.appendMenuItem(Je.EditorTitle,{command:{id:t,title:m2,icon:gg},when:oe.and(Ui.Resource.isEqualTo(this.preferencesService.workspaceSettingsResource.toString()),ug.isEqualTo("workspace"),oe.not("isInDiffEditor")),group:"navigation",order:1})),this.updatePreferencesEditorMenuItemForWorkspaceFolders()}updatePreferencesEditorMenuItemForWorkspaceFolders(){for(let t of this.workspaceContextService.getWorkspace().folders){let n=`_workbench.openFolderSettings.${t.uri.toString()}`;St.getCommand(n)||(St.registerCommand(n,()=>this.workspaceContextService.getWorkbenchState()===2?this.preferencesService.openWorkspaceSettings({jsonEditor:!1}):this.preferencesService.openFolderSettings({folderUri:t.uri,jsonEditor:!1})),go.appendMenuItem(Je.EditorTitle,{command:{id:n,title:m2,icon:gg},when:oe.and(Ui.Resource.isEqualTo(this.preferencesService.getFolderSettingsResource(t.uri).toString()),oe.not("isInDiffEditor")),group:"navigation",order:1}))}}};Pv=_([y(0,Hi),y(1,Dr),y(2,At),y(3,fn),y(4,ro),y(5,wd),y(6,ua)],Pv);var XC=class extends N{constructor(t,n){super();this.userDataProfileService=t;this.userDataProfilesService=n;this.registerSettingsEditorTitleActions()}registerSettingsEditorTitleActions(){let t=this._register(new Qt),n=oe.and(oe.or(Ui.Resource.isEqualTo(this.userDataProfileService.currentProfile.settingsResource.toString()),Ui.Resource.isEqualTo(this.userDataProfilesService.defaultProfile.settingsResource.toString())),oe.not("isInDiffEditor")),i=()=>{t.value=void 0,t.value=Pt(class extends _t{constructor(){super({id:"_workbench.openUserSettingsEditor",title:m2,icon:gg,menu:[{id:Je.EditorTitle,when:n,group:"navigation",order:1}]})}run(s,a){return a=Ea(a),s.get(At).openUserSettings({jsonEditor:!1,...a})}})};i(),this._register(this.userDataProfileService.onDidChangeCurrentProfile(()=>{i()}));let o=oe.and(cl,zF.toNegated());this._register(Pt(class extends _t{constructor(){super({id:xte,title:gt("openSettingsJson","Open Settings (JSON)"),icon:gg,menu:[{id:Je.EditorTitle,when:o,group:"navigation",order:1}]})}run(s){let a=s.get(vt).activeEditorPane;return a instanceof Mt?a.switchToSettingsFile():null}}))}};XC=_([y(0,Dr),y(1,ua)],XC);var Rte=Te.as(ub.Workbench);TS(Pv.ID,Pv,ga.BlockStartup);TS(im.ID,im,ga.BlockStartup);Rte.registerWorkbenchContribution(XC,3);gs(qg.ID,qg,1);go.appendMenuItem(Je.MenubarFileMenu,{title:u({key:"miPreferences",comment:["&& denotes a mnemonic"]},"&&Preferences"),submenu:Je.MenubarPreferencesMenu,group:"5_autosave",order:2,when:oK.toNegated()});
