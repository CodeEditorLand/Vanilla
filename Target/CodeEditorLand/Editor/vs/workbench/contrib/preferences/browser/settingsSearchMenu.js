var S=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var u=(g,o,e,t)=>{for(var r=t>1?void 0:t?A(o,e):o,s=g.length-1,n;s>=0;s--)(n=g[s])&&(r=(t?n(o,e,r):n(r))||r);return t&&r&&S(o,e,r),r},d=(g,o)=>(e,t)=>o(e,t,g);import{AnchorAlignment as T}from"../../../../base/browser/ui/contextview/contextview.js";import{DropdownMenuActionViewItem as f}from"../../../../base/browser/ui/dropdown/dropdownActionViewItem.js";import{SuggestController as m}from"../../../../editor/contrib/suggest/browser/suggestController.js";import{localize as i}from"../../../../nls.js";import{IContextMenuService as p}from"../../../../platform/contextview/browser/contextView.js";import{EXTENSION_SETTING_TAG as I,FEATURE_SETTING_TAG as E,GENERAL_TAG_SETTING_TAG as v,LANGUAGE_SETTING_TAG as G,MODIFIED_SETTING_TAG as W,POLICY_SETTING_TAG as C}from"../common/preferences.js";let a=class extends f{constructor(e,t,r,s,n){super(e,{getActions:()=>this.getActions()},n,{...t,actionRunner:r,classNames:e.class,anchorAlignmentProvider:()=>T.RIGHT,menuAsChild:!0});this.searchWidget=s;this.suggestController=m.get(this.searchWidget.inputWidget)}suggestController;render(e){super.render(e)}doSearchWidgetAction(e,t){this.searchWidget.setValue(this.searchWidget.getValue().trimEnd()+" "+e),this.searchWidget.focus(),t&&this.suggestController&&this.suggestController.triggerSuggest()}createAction(e,t,r,s,n){return{id:e,label:t,tooltip:r,class:void 0,enabled:!0,run:()=>{this.doSearchWidgetAction(s,n)}}}createToggleAction(e,t,r,s){const h=this.searchWidget.getValue().split(" ").includes(s);return{id:e,label:t,tooltip:r,class:void 0,enabled:!0,checked:h,run:()=>{if(h){const c=this.searchWidget.getValue().split(" ").filter(l=>l!==s).join(" ");this.searchWidget.setValue(c)}else{const c=this.searchWidget.getValue().trimEnd(),l=c?c+" "+s:s;this.searchWidget.setValue(l)}this.searchWidget.focus()}}}getActions(){return[this.createToggleAction("modifiedSettingsSearch",i("modifiedSettingsSearch","Modified"),i("modifiedSettingsSearchTooltip","Add or remove modified settings filter"),`@${W}`),this.createAction("extSettingsSearch",i("extSettingsSearch","Extension ID..."),i("extSettingsSearchTooltip","Add extension ID filter"),`@${I}`,!0),this.createAction("featuresSettingsSearch",i("featureSettingsSearch","Feature..."),i("featureSettingsSearchTooltip","Add feature filter"),`@${E}`,!0),this.createAction("tagSettingsSearch",i("tagSettingsSearch","Tag..."),i("tagSettingsSearchTooltip","Add tag filter"),`@${v}`,!0),this.createAction("langSettingsSearch",i("langSettingsSearch","Language..."),i("langSettingsSearchTooltip","Add language ID filter"),`@${G}`,!0),this.createToggleAction("onlineSettingsSearch",i("onlineSettingsSearch","Online services"),i("onlineSettingsSearchTooltip","Show settings for online services"),"@tag:usesOnlineServices"),this.createToggleAction("policySettingsSearch",i("policySettingsSearch","Policy services"),i("policySettingsSearchTooltip","Show settings for policy services"),`@${C}`)]}};a=u([d(4,p)],a);export{a as SettingsSearchFilterDropdownMenuActionViewItem};
