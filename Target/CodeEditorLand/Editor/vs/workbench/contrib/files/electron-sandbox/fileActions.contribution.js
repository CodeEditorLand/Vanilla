import{KeyChord as y,KeyCode as i,KeyMod as r}from"../../../../../vs/base/common/keyCodes.js";import{Schemas as a}from"../../../../../vs/base/common/network.js";import{isMacintosh as h,isWindows as R}from"../../../../../vs/base/common/platform.js";import"../../../../../vs/base/common/uri.js";import{EditorContextKeys as A}from"../../../../../vs/editor/common/editorContextKeys.js";import*as o from"../../../../../vs/nls.js";import{MenuId as t,MenuRegistry as s}from"../../../../../vs/platform/actions/common/actions.js";import{ContextKeyExpr as _}from"../../../../../vs/platform/contextkey/common/contextkey.js";import"../../../../../vs/platform/instantiation/common/instantiation.js";import{KeybindingsRegistry as g,KeybindingWeight as u}from"../../../../../vs/platform/keybinding/common/keybindingsRegistry.js";import{IListService as M}from"../../../../../vs/platform/list/browser/listService.js";import{INativeHostService as S}from"../../../../../vs/platform/native/common/native.js";import{IWorkspaceContextService as f}from"../../../../../vs/platform/workspace/common/workspace.js";import{ResourceContextKey as I}from"../../../../../vs/workbench/common/contextkeys.js";import{EditorResourceAccessor as K,SideBySideEditor as O}from"../../../../../vs/workbench/common/editor.js";import{appendEditorTitleContextMenuItem as b,appendToCommandPalette as x}from"../../../../../vs/workbench/contrib/files/browser/fileActions.contribution.js";import{getMultiSelectedResources as w,IExplorerService as N}from"../../../../../vs/workbench/contrib/files/browser/files.js";import{revealResourcesInOS as v}from"../../../../../vs/workbench/contrib/files/electron-sandbox/fileCommands.js";import{IEditorGroupsService as L}from"../../../../../vs/workbench/services/editor/common/editorGroupsService.js";import{IEditorService as E}from"../../../../../vs/workbench/services/editor/common/editorService.js";const n="revealFileInOS",l=R?o.localize2("revealInWindows","Reveal in File Explorer"):h?o.localize2("revealInMac","Reveal in Finder"):o.localize2("openContainer","Open Containing Folder"),m=_.or(I.Scheme.isEqualTo(a.file),I.Scheme.isEqualTo(a.vscodeUserData));g.registerCommandAndKeybindingRule({id:n,weight:u.WorkbenchContrib,when:A.focus.toNegated(),primary:r.CtrlCmd|r.Alt|i.KeyR,win:{primary:r.Shift|r.Alt|i.KeyR},handler:(e,c)=>{const d=w(c,e.get(M),e.get(E),e.get(L),e.get(N));v(d,e.get(S),e.get(f))}});const W="workbench.action.files.revealActiveFileInWindows";g.registerCommandAndKeybindingRule({weight:u.WorkbenchContrib,when:void 0,primary:y(r.CtrlCmd|i.KeyK,i.KeyR),id:W,handler:e=>{const d=e.get(E).activeEditor,p=K.getOriginalUri(d,{filterByScheme:a.file,supportSideBySide:O.PRIMARY});v(p?[p]:[],e.get(S),e.get(f))}}),b(n,l.value,m,"2_files",!1,0);const C={id:n,title:l.value};s.appendMenuItem(t.OpenEditorsContext,{group:"navigation",order:20,command:C,when:m}),s.appendMenuItem(t.OpenEditorsContextShare,{title:o.localize("miShare","Share"),submenu:t.MenubarShare,group:"share",order:3}),s.appendMenuItem(t.ExplorerContext,{group:"navigation",order:20,command:C,when:m});const F=o.localize2("filesCategory","File");x({id:n,title:l,category:F},m);
