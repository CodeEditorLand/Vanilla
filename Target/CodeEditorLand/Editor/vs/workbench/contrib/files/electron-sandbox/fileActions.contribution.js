import*as r from"../../../../nls.js";import"../../../../base/common/uri.js";import{IWorkspaceContextService as u}from"../../../../platform/workspace/common/workspace.js";import{isWindows as h,isMacintosh as y}from"../../../../base/common/platform.js";import{Schemas as s}from"../../../../base/common/network.js";import{INativeHostService as I}from"../../../../platform/native/common/native.js";import{KeybindingsRegistry as S,KeybindingWeight as f}from"../../../../platform/keybinding/common/keybindingsRegistry.js";import{EditorContextKeys as R}from"../../../../editor/common/editorContextKeys.js";import{KeyMod as o,KeyCode as n,KeyChord as A}from"../../../../base/common/keyCodes.js";import"../../../../platform/instantiation/common/instantiation.js";import{getMultiSelectedResources as _,IExplorerService as M}from"../browser/files.js";import{IEditorService as v}from"../../../services/editor/common/editorService.js";import{revealResourcesInOS as C}from"./fileCommands.js";import{MenuRegistry as m,MenuId as t}from"../../../../platform/actions/common/actions.js";import{ResourceContextKey as E}from"../../../common/contextkeys.js";import{appendToCommandPalette as K,appendEditorTitleContextMenuItem as O}from"../browser/fileActions.contribution.js";import{SideBySideEditor as x,EditorResourceAccessor as b}from"../../../common/editor.js";import{ContextKeyExpr as w}from"../../../../platform/contextkey/common/contextkey.js";import{IListService as N}from"../../../../platform/list/browser/listService.js";import{IEditorGroupsService as L}from"../../../services/editor/common/editorGroupsService.js";const a="revealFileInOS",l=h?r.localize2("revealInWindows","Reveal in File Explorer"):y?r.localize2("revealInMac","Reveal in Finder"):r.localize2("openContainer","Open Containing Folder"),i=w.or(E.Scheme.isEqualTo(s.file),E.Scheme.isEqualTo(s.vscodeUserData));S.registerCommandAndKeybindingRule({id:a,weight:f.WorkbenchContrib,when:R.focus.toNegated(),primary:o.CtrlCmd|o.Alt|n.KeyR,win:{primary:o.Shift|o.Alt|n.KeyR},handler:(e,p)=>{const d=_(p,e.get(N),e.get(v),e.get(L),e.get(M));C(d,e.get(I),e.get(u))}});const W="workbench.action.files.revealActiveFileInWindows";S.registerCommandAndKeybindingRule({weight:f.WorkbenchContrib,when:void 0,primary:A(o.CtrlCmd|n.KeyK,n.KeyR),id:W,handler:e=>{const d=e.get(v).activeEditor,g=b.getOriginalUri(d,{filterByScheme:s.file,supportSideBySide:x.PRIMARY});C(g?[g]:[],e.get(I),e.get(u))}}),O(a,l.value,i,"2_files",!1,0);const c={id:a,title:l.value};m.appendMenuItem(t.OpenEditorsContext,{group:"navigation",order:20,command:c,when:i}),m.appendMenuItem(t.OpenEditorsContextShare,{title:r.localize("miShare","Share"),submenu:t.MenubarShare,group:"share",order:3}),m.appendMenuItem(t.ExplorerContext,{group:"navigation",order:20,command:c,when:i});const F=r.localize2("filesCategory","File");K({id:a,title:l,category:F},i),m.appendMenuItem(t.ChatInlineResourceAnchorContext,{group:"navigation",order:20,command:c,when:i});
