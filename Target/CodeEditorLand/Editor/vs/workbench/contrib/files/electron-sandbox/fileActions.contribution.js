import{KeyChord as C,KeyCode as t,KeyMod as r}from"../../../../base/common/keyCodes.js";import{Schemas as s}from"../../../../base/common/network.js";import{isMacintosh as h,isWindows as R}from"../../../../base/common/platform.js";import{EditorContextKeys as A}from"../../../../editor/common/editorContextKeys.js";import*as o from"../../../../nls.js";import{MenuId as i,MenuRegistry as d}from"../../../../platform/actions/common/actions.js";import{ContextKeyExpr as _}from"../../../../platform/contextkey/common/contextkey.js";import{KeybindingWeight as g,KeybindingsRegistry as u}from"../../../../platform/keybinding/common/keybindingsRegistry.js";import{IListService as M}from"../../../../platform/list/browser/listService.js";import{INativeHostService as f}from"../../../../platform/native/common/native.js";import{IWorkspaceContextService as S}from"../../../../platform/workspace/common/workspace.js";import{ResourceContextKey as I}from"../../../common/contextkeys.js";import{EditorResourceAccessor as K,SideBySideEditor as O}from"../../../common/editor.js";import{IEditorGroupsService as b}from"../../../services/editor/common/editorGroupsService.js";import{IEditorService as v}from"../../../services/editor/common/editorService.js";import{appendEditorTitleContextMenuItem as x,appendToCommandPalette as w}from"../browser/fileActions.contribution.js";import{IExplorerService as N,getMultiSelectedResources as L}from"../browser/files.js";import{revealResourcesInOS as E}from"./fileCommands.js";const n="revealFileInOS",l=R?o.localize2("revealInWindows","Reveal in File Explorer"):h?o.localize2("revealInMac","Reveal in Finder"):o.localize2("openContainer","Open Containing Folder"),m=_.or(I.Scheme.isEqualTo(s.file),I.Scheme.isEqualTo(s.vscodeUserData));u.registerCommandAndKeybindingRule({id:n,weight:g.WorkbenchContrib,when:A.focus.toNegated(),primary:r.CtrlCmd|r.Alt|t.KeyR,win:{primary:r.Shift|r.Alt|t.KeyR},handler:(e,c)=>{const a=L(c,e.get(M),e.get(v),e.get(b),e.get(N));E(a,e.get(f),e.get(S))}});const W="workbench.action.files.revealActiveFileInWindows";u.registerCommandAndKeybindingRule({weight:g.WorkbenchContrib,when:void 0,primary:C(r.CtrlCmd|t.KeyK,t.KeyR),id:W,handler:e=>{const a=e.get(v).activeEditor,p=K.getOriginalUri(a,{filterByScheme:s.file,supportSideBySide:O.PRIMARY});E(p?[p]:[],e.get(f),e.get(S))}}),x(n,l.value,m,"2_files",!1,0);const y={id:n,title:l.value};d.appendMenuItem(i.OpenEditorsContext,{group:"navigation",order:20,command:y,when:m}),d.appendMenuItem(i.OpenEditorsContextShare,{title:o.localize("miShare","Share"),submenu:i.MenubarShare,group:"share",order:3}),d.appendMenuItem(i.ExplorerContext,{group:"navigation",order:20,command:y,when:m});const F=o.localize2("filesCategory","File");w({id:n,title:l,category:F},m);
