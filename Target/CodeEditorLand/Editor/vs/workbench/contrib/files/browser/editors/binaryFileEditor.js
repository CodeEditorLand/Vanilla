var v=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var f=(m,i,t,o)=>{for(var r=o>1?void 0:o?l(i,t):i,d=m.length-1,e;d>=0;d--)(e=m[d])&&(r=(o?e(i,t,r):e(r))||r);return o&&r&&v(i,t,r),r},p=(m,i)=>(t,o)=>i(t,o,m);import{localize as u}from"../../../../../nls.js";import{EditorResolution as E}from"../../../../../platform/editor/common/editor.js";import{IStorageService as R}from"../../../../../platform/storage/common/storage.js";import{ITelemetryService as S}from"../../../../../platform/telemetry/common/telemetry.js";import{IThemeService as g}from"../../../../../platform/theme/common/themeService.js";import{BaseBinaryResourceEditor as h}from"../../../../browser/parts/editor/binaryEditor.js";import{isEditorInputWithOptions as T}from"../../../../common/editor.js";import{DiffEditorInput as O}from"../../../../common/editor/diffEditorInput.js";import"../../../../common/editor/editorInput.js";import"../../../../services/editor/common/editorGroupsService.js";import{IEditorResolverService as y,ResolvedStatus as a}from"../../../../services/editor/common/editorResolverService.js";import{BINARY_FILE_EDITOR_ID as D,BINARY_TEXT_FILE_MODE as A}from"../../common/files.js";import{FileEditorInput as c}from"./fileEditorInput.js";let n=class extends h{constructor(t,o,r,d,e){super(n.ID,t,{openInternal:(s,I)=>this.openInternal(s,I)},o,r,e);this.editorResolverService=d}static ID=D;async openInternal(t,o){if(t instanceof c&&this.group.activeEditor){const r=this.group.activeEditor,d=r?.toUntyped();if(!d)return;let e=await this.editorResolverService.resolveEditor({...d,options:{...o,override:E.PICK}},this.group);if(e===a.NONE)e=void 0;else if(e===a.ABORT)return;if(T(e))for(const s of e.editor instanceof O?[e.editor.original,e.editor.modified]:[e.editor])s instanceof c&&(s.setForceOpenAsText(),s.setPreferredLanguageId(A));await this.group.replaceEditors([{editor:r,replacement:e?.editor??t,options:{...e?.options??o}}])}}getTitle(){return this.input?this.input.getName():u("binaryFileEditor","Binary File Viewer")}};n=f([p(1,S),p(2,g),p(3,y),p(4,R)],n);export{n as BinaryFileEditor};
