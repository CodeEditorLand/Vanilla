var m=Object.defineProperty;var c=Object.getOwnPropertyDescriptor;var l=(o,i,r,e)=>{for(var t=e>1?void 0:e?c(i,r):i,p=o.length-1,a;p>=0;p--)(a=o[p])&&(t=(e?a(i,r,t):a(t))||t);return e&&t&&m(i,r,t),t},d=(o,i)=>(r,e)=>i(r,e,o);import{toErrorMessage as f}from"../../../../../base/common/errorMessage.js";import{Emitter as D}from"../../../../../base/common/event.js";import{DisposableStore as h}from"../../../../../base/common/lifecycle.js";import"../../../../../base/common/uri.js";import{localize as n}from"../../../../../nls.js";import{listDeemphasizedForeground as u,listInvalidItemForeground as v}from"../../../../../platform/theme/common/colorRegistry.js";import{IWorkspaceContextService as I}from"../../../../../platform/workspace/common/workspace.js";import"../../../../services/decorations/common/decorations.js";import"../../common/explorerModel.js";import{IExplorerService as g}from"../files.js";import{explorerRootErrorEmitter as x}from"./explorerViewer.js";function E(o){if(o.isRoot&&o.error)return{tooltip:n("canNotResolve","Unable to resolve workspace folder ({0})",f(o.error)),letter:"!",color:v};if(o.isSymbolicLink)return{tooltip:n("symbolicLlink","Symbolic Link"),letter:"\u2937"};if(o.isUnknown)return{tooltip:n("unknown","Unknown File Type"),letter:"?"};if(o.isExcluded)return{color:u}}let s=class{constructor(i,r){this.explorerService=i;this.toDispose.add(this._onDidChange),this.toDispose.add(r.onDidChangeWorkspaceFolders(e=>{this._onDidChange.fire(e.changed.concat(e.added).map(t=>t.uri))})),this.toDispose.add(x.event(e=>{this._onDidChange.fire([e])}))}label=n("label","Explorer");_onDidChange=new D;toDispose=new h;get onDidChange(){return this._onDidChange.event}async provideDecorations(i){const r=this.explorerService.findClosest(i);if(!r)throw new Error("ExplorerItem not found");return E(r)}dispose(){this.toDispose.dispose()}};s=l([d(0,g),d(1,I)],s);export{s as ExplorerDecorationsProvider,E as provideDecorations};
