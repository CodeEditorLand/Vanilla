var W=Object.defineProperty;var H=Object.getOwnPropertyDescriptor;var x=(s,c,e,t)=>{for(var r=t>1?void 0:t?H(c,e):c,o=s.length-1,a;o>=0;o--)(a=s[o])&&(r=(t?a(c,e,r):a(r))||r);return t&&r&&W(c,e,r),r},l=(s,c)=>(e,t)=>c(e,t,s);import{DelayedDragHandler as z}from"../../../../../../vs/base/browser/dnd.js";import*as h from"../../../../../../vs/base/browser/dom.js";import{isInputElement as B}from"../../../../../../vs/base/browser/ui/list/listWidget.js";import{AbstractTreePart as w}from"../../../../../../vs/base/browser/ui/tree/abstractTree.js";import"../../../../../../vs/base/browser/ui/tree/asyncDataTree.js";import{TreeVisibility as U}from"../../../../../../vs/base/browser/ui/tree/tree.js";import"../../../../../../vs/base/common/actions.js";import{Codicon as S}from"../../../../../../vs/base/common/codicons.js";import{memoize as T}from"../../../../../../vs/base/common/decorators.js";import{Event as q}from"../../../../../../vs/base/common/event.js";import"../../../../../../vs/base/common/filters.js";import"../../../../../../vs/base/common/lifecycle.js";import{ResourceMap as G}from"../../../../../../vs/base/common/map.js";import*as A from"vs/base/common/performance";import"../../../../../../vs/base/common/uri.js";import*as v from"../../../../../../vs/nls.js";import{Action2 as I,MenuId as g,registerAction2 as E}from"../../../../../../vs/platform/actions/common/actions.js";import{IClipboardService as Y}from"../../../../../../vs/platform/clipboard/common/clipboardService.js";import{ICommandService as F}from"../../../../../../vs/platform/commands/common/commands.js";import{IConfigurationService as j}from"../../../../../../vs/platform/configuration/common/configuration.js";import{ContextKeyExpr as b,IContextKeyService as J}from"../../../../../../vs/platform/contextkey/common/contextkey.js";import{IContextMenuService as $}from"../../../../../../vs/platform/contextview/browser/contextView.js";import{EditorOpenSource as Q}from"../../../../../../vs/platform/editor/common/editor.js";import{FileSystemProviderCapabilities as X,IFileService as Z}from"../../../../../../vs/platform/files/common/files.js";import{IHoverService as ee}from"../../../../../../vs/platform/hover/browser/hover.js";import{IInstantiationService as te}from"../../../../../../vs/platform/instantiation/common/instantiation.js";import{IKeybindingService as re}from"../../../../../../vs/platform/keybinding/common/keybinding.js";import{ILabelService as ie}from"../../../../../../vs/platform/label/common/label.js";import{WorkbenchCompressibleAsyncDataTree as oe}from"../../../../../../vs/platform/list/browser/listService.js";import{IOpenerService as se}from"../../../../../../vs/platform/opener/common/opener.js";import{IProgressService as ne,ProgressLocation as ae}from"../../../../../../vs/platform/progress/common/progress.js";import{IStorageService as le,StorageScope as R,StorageTarget as ce}from"../../../../../../vs/platform/storage/common/storage.js";import{ITelemetryService as de}from"../../../../../../vs/platform/telemetry/common/telemetry.js";import{IThemeService as pe}from"../../../../../../vs/platform/theme/common/themeService.js";import{IUriIdentityService as he}from"../../../../../../vs/platform/uriIdentity/common/uriIdentity.js";import{IWorkspaceContextService as ue,WorkbenchState as me}from"../../../../../../vs/platform/workspace/common/workspace.js";import{ResourceLabels as ve}from"../../../../../../vs/workbench/browser/labels.js";import{ViewPane as fe}from"../../../../../../vs/workbench/browser/parts/views/viewPane.js";import{ResourceContextKey as ge}from"../../../../../../vs/workbench/common/contextkeys.js";import{EditorResourceAccessor as Ce,SideBySideEditor as xe}from"../../../../../../vs/workbench/common/editor.js";import{IViewDescriptorService as Se}from"../../../../../../vs/workbench/common/views.js";import{FileCopiedContext as Ie,NEW_FILE_COMMAND_ID as D,NEW_FOLDER_COMMAND_ID as Ee}from"../../../../../../vs/workbench/contrib/files/browser/fileActions.js";import{IExplorerService as N}from"../../../../../../vs/workbench/contrib/files/browser/files.js";import{ExplorerDecorationsProvider as be}from"../../../../../../vs/workbench/contrib/files/browser/views/explorerDecorationsProvider.js";import{ExplorerCompressionDelegate as ye,ExplorerDataSource as Fe,ExplorerDelegate as _,FileDragAndDrop as we,FilesFilter as Te,FileSorter as Ae,FilesRenderer as Re,isCompressedFolderName as De}from"../../../../../../vs/workbench/contrib/files/browser/views/explorerViewer.js";import{ExplorerItem as C,NewExplorerItem as Ne}from"../../../../../../vs/workbench/contrib/files/common/explorerModel.js";import{ExplorerCompressedFirstFocusContext as _e,ExplorerCompressedFocusContext as Ve,ExplorerCompressedLastFocusContext as Pe,ExplorerFocusedContext as ke,ExplorerFolderContext as Ke,ExplorerResourceAvailableEditorIdsContext as Le,ExplorerResourceCut as Oe,ExplorerResourceMoveableToTrash as Me,ExplorerResourceNotReadonlyContext as V,ExplorerResourceReadonlyContext as We,ExplorerRootContext as He,FilesExplorerFocusedContext as ze,FoldersViewVisibleContext as Be,VIEW_ID as f,ViewHasSomeCollapsibleRootItemContext as Ue}from"../../../../../../vs/workbench/contrib/files/common/files.js";import{IDecorationsService as qe}from"../../../../../../vs/workbench/services/decorations/common/decorations.js";import{IEditorResolverService as Ge}from"../../../../../../vs/workbench/services/editor/common/editorResolverService.js";import{ACTIVE_GROUP as Ye,IEditorService as je,SIDE_GROUP as Je}from"../../../../../../vs/workbench/services/editor/common/editorService.js";import{IWorkbenchLayoutService as $e}from"../../../../../../vs/workbench/services/layout/browser/layoutService.js";import"../../../../../../vs/workbench/services/themes/common/workbenchThemeService.js";import{IViewsService as P}from"../../../../../../vs/workbench/services/views/common/viewsService.js";function Qe(s,c){for(const e of c)if(s.hasNode(e)&&!s.isCollapsed(e)){for(const[,t]of e.children.entries())if(s.hasNode(t)&&s.isCollapsible(t)&&!s.isCollapsed(t))return!0}return!1}function Xe(s,c){for(const e of c)if(s.hasNode(e)&&!s.isCollapsed(e))return!0;return!1}const Ze={getId:s=>s instanceof Ne?`new:${s.getId()}`:s.getId()};function et(s,c,e,t){let r;r=s.length?s[0]:void 0,e&&c.length>1&&(r=void 0);const o=r&&t.getCompressedNavigationController(r),a=o&&o.length?o[0]:void 0;r=a?a.current:r;const d=[];for(const i of c){const n=t.getCompressedNavigationController(i),m=n&&n.length?n[0]:void 0;if(m&&r&&m===a){i===r&&d.push(i);continue}m?d.push(...m.items):d.push(i)}return r?e&&d.indexOf(r)>=0?d:[r]:e?d:[]}let u=class extends fe{constructor(e,t,r,o,a,d,i,n,m,y,p,k,rt,it,K,L,O,ot,st,nt,at,lt,ct,M){super(e,y,t,k,p,r,o,M,K,L,O);this.contextService=a;this.progressService=d;this.editorService=i;this.editorResolverService=n;this.layoutService=m;this.decorationService=rt;this.labelService=it;this.explorerService=ot;this.storageService=st;this.clipboardService=nt;this.fileService=at;this.uriIdentityService=lt;this.commandService=ct;this.delegate=e.delegate,this.resourceContext=o.createInstance(ge),this._register(this.resourceContext),this.folderContext=Ke.bindTo(p),this.readonlyContext=We.bindTo(p),this.availableEditorIdsContext=Le.bindTo(p),this.rootContext=He.bindTo(p),this.resourceMoveableToTrash=Me.bindTo(p),this.compressedFocusContext=Ve.bindTo(p),this.compressedFocusFirstContext=_e.bindTo(p),this.compressedFocusLastContext=Pe.bindTo(p),this.viewHasSomeCollapsibleRootItem=Ue.bindTo(p),this.viewVisibleContextKey=Be.bindTo(p),this.explorerService.registerView(this)}static TREE_VIEW_STATE_STORAGE_KEY="workbench.explorer.treeViewState";tree;filter;resourceContext;folderContext;readonlyContext;availableEditorIdsContext;rootContext;resourceMoveableToTrash;renderer;treeContainer;container;compressedFocusContext;compressedFocusFirstContext;compressedFocusLastContext;viewHasSomeCollapsibleRootItem;viewVisibleContextKey;setTreeInputPromise;horizontalScrolling;dragHandler;_autoReveal=!1;decorationsProvider;delegate;get autoReveal(){return this._autoReveal}set autoReveal(e){this._autoReveal=e}get name(){return this.labelService.getWorkspaceLabel(this.contextService.getWorkspace())}get title(){return this.name}set title(e){}setVisible(e){this.viewVisibleContextKey.set(e),super.setVisible(e)}get fileCopiedContextKey(){return Ie.bindTo(this.contextKeyService)}get resourceCutContextKey(){return Oe.bindTo(this.contextKeyService)}renderHeader(e){super.renderHeader(e),this.dragHandler=new z(e,()=>this.setExpanded(!0));const t=e.querySelector(".title"),r=()=>{t.textContent=this.name,this.updateTitle(this.name),this.ariaHeaderLabel=v.localize("explorerSection","Explorer Section: {0}",this.name),t.setAttribute("aria-label",this.ariaHeaderLabel)};this._register(this.contextService.onDidChangeWorkspaceName(r)),this._register(this.labelService.onDidChangeFormatters(r)),r()}layoutBody(e,t){super.layoutBody(e,t),this.tree.layout(e,t)}renderBody(e){super.renderBody(e),this.container=e,this.treeContainer=h.append(e,h.$(".explorer-folders-view")),this.createTree(this.treeContainer),this._register(this.labelService.onDidChangeFormatters(()=>{this._onDidChangeTitleArea.fire()})),this.onConfigurationUpdated(void 0),this._register(this.editorService.onDidActiveEditorChange(()=>{this.selectActiveFile()})),this._register(this.configurationService.onDidChangeConfiguration(t=>this.onConfigurationUpdated(t))),this._register(this.onDidChangeBodyVisibility(async t=>{t&&(await this.setTreeInput(),this.updateAnyCollapsedContext(),this.selectActiveFile(!0))})),this._register(h.addDisposableListener(h.getWindow(this.container),h.EventType.PASTE,async t=>{!this.hasFocus()||this.readonlyContext.get()||t.clipboardData?.files?.length&&await this.commandService.executeCommand("filesExplorer.paste",t.clipboardData?.files)}))}focus(){if(super.focus(),this.tree.domFocus(),this.tree.getFocusedPart()===w.Tree){const e=this.tree.getFocus();e.length===1&&this._autoReveal&&this.tree.reveal(e[0],.5)}}hasFocus(){return h.isAncestorOfActiveElement(this.container)}getFocus(){return this.tree.getFocus()}focusNext(){this.tree.focusNext()}focusLast(){this.tree.focusLast()}getContext(e){const t=this.tree.getFocusedPart()===w.StickyScroll?this.tree.getStickyScrollFocus():this.tree.getFocus();return et(t,this.tree.getSelection(),e,this.renderer)}isItemVisible(e){return this.filter?this.filter.filter(e,U.Visible):!1}isItemCollapsed(e){return this.tree.isCollapsed(e)}async setEditable(e,t){t?(this.horizontalScrolling=this.tree.options.horizontalScrolling,this.horizontalScrolling&&this.tree.updateOptions({horizontalScrolling:!1}),await this.tree.expand(e.parent)):(this.horizontalScrolling!==void 0&&this.tree.updateOptions({horizontalScrolling:this.horizontalScrolling}),this.horizontalScrolling=void 0,this.treeContainer.classList.remove("highlight")),await this.refresh(!1,e.parent,!1),t?(this.treeContainer.classList.add("highlight"),this.tree.reveal(e)):this.tree.domFocus()}async selectActiveFile(e=this._autoReveal){if(this._autoReveal){const t=Ce.getCanonicalUri(this.editorService.activeEditor,{supportSideBySide:xe.PRIMARY});if(t){const r=this.tree.getFocus(),o=this.tree.getSelection();return r.length===1&&this.uriIdentityService.extUri.isEqual(r[0].resource,t)&&o.length===1&&this.uriIdentityService.extUri.isEqual(o[0].resource,t)?void 0:this.explorerService.select(t,e)}}}createTree(e){this.filter=this.instantiationService.createInstance(Te),this._register(this.filter),this._register(this.filter.onDidChange(()=>this.refresh(!0)));const t=this.instantiationService.createInstance(ve,{onDidChangeVisibility:this.onDidChangeBodyVisibility});this._register(t);const r=i=>this.tree.updateWidth(i);this.renderer=this.instantiationService.createInstance(Re,e,t,r),this._register(this.renderer),this._register(tt(e,this.themeService));const o=()=>this.configurationService.getValue("explorer.compactFolders"),a=i=>this.configurationService.getValue({resource:i?.root.resource}).explorer.fileNesting;this.tree=this.instantiationService.createInstance(oe,"FileExplorer",e,new _,new ye,[this.renderer],this.instantiationService.createInstance(Fe,this.filter),{compressionEnabled:o(),accessibilityProvider:this.renderer,identityProvider:Ze,keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:i=>{if(!this.explorerService.isEditable(i))return i.name},getCompressedNodeKeyboardNavigationLabel:i=>{if(!i.some(n=>this.explorerService.isEditable(n)))return i.map(n=>n.name).join("/")}},multipleSelectionSupport:!0,filter:this.filter,sorter:this.instantiationService.createInstance(Ae),dnd:this.instantiationService.createInstance(we,i=>this.isItemCollapsed(i)),collapseByDefault:i=>!(i instanceof C&&i.hasNests&&a(i).expand),autoExpandSingleChildren:!0,expandOnlyOnTwistieClick:i=>{if(i instanceof C){if(i.hasNests)return!0;if(this.configurationService.getValue("workbench.tree.expandMode")==="doubleClick")return!0}return!1},paddingBottom:_.ITEM_HEIGHT,overrideStyles:this.getLocationBasedColors().listOverrideStyles}),this._register(this.tree),this._register(this.themeService.onDidColorThemeChange(()=>this.tree.rerender()));const d=q.filter(this.configurationService.onDidChangeConfiguration,i=>i.affectsConfiguration("explorer.compactFolders"));this._register(d(i=>this.tree.updateOptions({compressionEnabled:o()}))),ze.bindTo(this.tree.contextKeyService),ke.bindTo(this.tree.contextKeyService),this._register(this.tree.onDidChangeFocus(i=>this.onFocusChanged(i.elements))),this.onFocusChanged([]),this._register(this.tree.onDidOpen(async i=>{const n=i.element;if(!n)return;if(!(h.isKeyboardEvent(i.browserEvent)&&i.browserEvent.shiftKey)){if(n.isDirectory||this.explorerService.isEditable(void 0))return;this.telemetryService.publicLog2("workbenchActionExecuted",{id:"workbench.files.openFile",from:"explorer"});try{this.delegate?.willOpenElement(i.browserEvent),await this.editorService.openEditor({resource:n.resource,options:{preserveFocus:i.editorOptions.preserveFocus,pinned:i.editorOptions.pinned,source:Q.USER}},i.sideBySide?Je:Ye)}finally{this.delegate?.didOpenElement()}}})),this._register(this.tree.onContextMenu(i=>this.onContextMenu(i))),this._register(this.tree.onDidScroll(async i=>{const n=this.explorerService.getEditable();i.scrollTopChanged&&n&&this.tree.getRelativeTop(n.stat)===null&&await n.data.onFinish("",!1)})),this._register(this.tree.onDidChangeCollapseState(i=>{const n=i.node.element?.element;n&&this.renderer.getCompressedNavigationController(n instanceof Array?n[0]:n)?.forEach(y=>y.updateCollapsed(i.node.collapsed)),this.updateAnyCollapsedContext()})),this.updateAnyCollapsedContext(),this._register(this.tree.onMouseDblClick(i=>{const n=this.configurationService.getValue("workbench.list.scrollByPage");i.element===null&&!n&&this.commandService.executeCommand(D)})),this._register(this.storageService.onWillSaveState(()=>{this.storeTreeViewState()}))}onConfigurationUpdated(e){if(!e||e.affectsConfiguration("explorer.autoReveal")){const t=this.configurationService.getValue();this._autoReveal=t?.explorer?.autoReveal}e&&(e.affectsConfiguration("explorer.decorations.colors")||e.affectsConfiguration("explorer.decorations.badges"))&&this.refresh(!0)}storeTreeViewState(){this.storageService.store(u.TREE_VIEW_STATE_STORAGE_KEY,JSON.stringify(this.tree.getViewState()),R.WORKSPACE,ce.MACHINE)}setContextKeys(e){const t=this.contextService.getWorkspace().folders,r=e?e.resource:t[t.length-1].uri;if(e=e||this.explorerService.findClosest(r),this.resourceContext.set(r),this.folderContext.set(!!e&&e.isDirectory),this.readonlyContext.set(!!e&&!!e.isReadonly),this.rootContext.set(!!e&&e.isRoot),r){const o=r?this.editorResolverService.getEditors(r).map(a=>a.id):[];this.availableEditorIdsContext.set(o.join(","))}else this.availableEditorIdsContext.reset()}async onContextMenu(e){if(B(e.browserEvent.target))return;const t=e.element;let r=e.anchor;if(h.isHTMLElement(r)&&t){const i=this.renderer.getCompressedNavigationController(t);i&&i.length>0&&(h.isKeyboardEvent(e.browserEvent)||De(e.browserEvent.target)?r=i[0].labels[i[0].index]:i.forEach(n=>n.last()))}this.fileCopiedContextKey.set(await this.clipboardService.hasResources()),this.setContextKeys(t);const o=this.tree.getSelection(),a=this.explorerService.roots;let d;if(t instanceof C){const i=this.renderer.getCompressedNavigationController(t);d=i&&i.length?i[0].current.resource:t.resource}else d=a.length===1?a[0].resource:{};this.contextMenuService.showContextMenu({menuId:g.ExplorerContext,menuActionOptions:{arg:d,shouldForwardArgs:!0},contextKeyService:this.tree.contextKeyService,getAnchor:()=>r,onHide:i=>{i&&this.tree.domFocus()},getActionsContext:()=>t&&o&&o.indexOf(t)>=0?o.map(i=>i.resource):t instanceof C?[t.resource]:[]})}onFocusChanged(e){const t=e&&e.length?e[0]:void 0;if(this.setContextKeys(t),t){const o=!!this.configurationService.getValue().files?.enableTrash,a=this.fileService.hasCapability(t.resource,X.Trash);this.resourceMoveableToTrash.set(o&&a)}else this.resourceMoveableToTrash.reset();const r=t&&this.renderer.getCompressedNavigationController(t);if(!r){this.compressedFocusContext.set(!1);return}this.compressedFocusContext.set(!0),r.forEach(o=>{this.updateCompressedNavigationContextKeys(o)})}refresh(e,t,r=!0){if(!this.tree||!this.isBodyVisible()||t&&!this.tree.hasNode(t))return Promise.resolve(void 0);r&&this.explorerService.isEditable(void 0)&&this.tree.domFocus();const o=t||this.tree.getInput();return this.tree.updateChildren(o,e,!!t)}getOptimalWidth(){const e=this.tree.getHTMLElement(),t=[].slice.call(e.querySelectorAll(".explorer-item .label-name"));return h.getLargestChildWidth(e,t)}async setTreeInput(){if(!this.isBodyVisible())return Promise.resolve(void 0);this.setTreeInputPromise&&await this.setTreeInputPromise;const e=!this.tree.getInput();e&&A.mark("code/willResolveExplorer");const t=this.explorerService.roots;let r=t[0];(this.contextService.getWorkbenchState()!==me.FOLDER||t[0].error)&&(r=t);let o;if(this.tree&&this.tree.getInput())o=this.tree.getViewState();else{const i=this.storageService.get(u.TREE_VIEW_STATE_STORAGE_KEY,R.WORKSPACE);i&&(o=JSON.parse(i))}const a=this.tree.getInput(),d=this.setTreeInputPromise=this.tree.setInput(r,o).then(async()=>{if(Array.isArray(r)){if(!o||a instanceof C)for(let i=0;i<Math.min(r.length,5);i++)try{await this.tree.expand(r[i])}catch{}if(!a&&r.length===1&&this.configurationService.getValue().explorer.expandSingleFolderWorkspaces&&await this.tree.expand(r[0]).catch(()=>{}),Array.isArray(a)){const i=new G;a.forEach(n=>i.set(n.resource,!0)),await Promise.all(r.map(async n=>{if(!i.has(n.resource))try{await this.tree.expand(n)}catch{}}))}}e&&A.mark("code/didResolveExplorer")});this.progressService.withProgress({location:ae.Explorer,delay:this.layoutService.isRestored()?800:1500},i=>d),await d,this.decorationsProvider||(this.decorationsProvider=new be(this.explorerService,this.contextService),this._register(this.decorationService.registerDecorationsProvider(this.decorationsProvider)))}async selectResource(e,t=this._autoReveal,r=0){if(r===2||!e||!this.isBodyVisible())return;this.setTreeInputPromise&&await this.setTreeInputPromise;let o=this.explorerService.findClosestRoot(e);for(;o&&o.resource.toString()!==e.toString();){try{await this.tree.expand(o)}catch{return this.selectResource(e,t,r+1)}if(!o.children.size)o=null;else for(const a of o.children.values()){if(this.uriIdentityService.extUri.isEqualOrParent(e,a.resource)){o=a;break}o=null}}if(o){if(o===this.tree.getInput()){this.tree.setFocus([]),this.tree.setSelection([]);return}try{o.nestedParent&&await this.tree.expand(o.nestedParent),(t===!0||t==="force")&&this.tree.getRelativeTop(o)===null&&this.tree.reveal(o,.5),this.tree.setFocus([o]),this.tree.setSelection([o])}catch{return this.selectResource(e,t,r+1)}}}itemsCopied(e,t,r){this.fileCopiedContextKey.set(e.length>0),this.resourceCutContextKey.set(t&&e.length>0),r?.forEach(o=>this.tree.rerender(o)),t&&e.forEach(o=>this.tree.rerender(o))}expandAll(){this.explorerService.isEditable(void 0)&&this.tree.domFocus(),this.tree.expandAll()}collapseAll(){this.explorerService.isEditable(void 0)&&this.tree.domFocus();const e=this.tree.getInput();if(Array.isArray(e)&&Qe(this.tree,e)){e.forEach(t=>{t.children.forEach(r=>this.tree.hasNode(r)&&this.tree.collapse(r,!0))});return}this.tree.collapseAll()}previousCompressedStat(){const e=this.tree.getFocus();if(!e.length)return;this.renderer.getCompressedNavigationController(e[0]).forEach(r=>{r.previous(),this.updateCompressedNavigationContextKeys(r)})}nextCompressedStat(){const e=this.tree.getFocus();if(!e.length)return;this.renderer.getCompressedNavigationController(e[0]).forEach(r=>{r.next(),this.updateCompressedNavigationContextKeys(r)})}firstCompressedStat(){const e=this.tree.getFocus();if(!e.length)return;this.renderer.getCompressedNavigationController(e[0]).forEach(r=>{r.first(),this.updateCompressedNavigationContextKeys(r)})}lastCompressedStat(){const e=this.tree.getFocus();if(!e.length)return;this.renderer.getCompressedNavigationController(e[0]).forEach(r=>{r.last(),this.updateCompressedNavigationContextKeys(r)})}updateCompressedNavigationContextKeys(e){this.compressedFocusFirstContext.set(e.index===0),this.compressedFocusLastContext.set(e.index===e.count-1)}updateAnyCollapsedContext(){const e=this.tree.getInput();if(e===void 0)return;const t=Array.isArray(e)?e:Array.from(e.children.values());this.viewHasSomeCollapsibleRootItem.set(Xe(this.tree,t)),this.storeTreeViewState()}dispose(){this.dragHandler?.dispose(),super.dispose()}};x([T],u.prototype,"fileCopiedContextKey",1),x([T],u.prototype,"resourceCutContextKey",1),u=x([l(1,$),l(2,Se),l(3,te),l(4,ue),l(5,ne),l(6,je),l(7,Ge),l(8,$e),l(9,re),l(10,J),l(11,j),l(12,qe),l(13,ie),l(14,pe),l(15,de),l(16,ee),l(17,N),l(18,le),l(19,Y),l(20,Z),l(21,he),l(22,F),l(23,se)],u);function tt(s,c){s.classList.add("file-icon-themable-tree"),s.classList.add("show-file-icons");const e=t=>{s.classList.toggle("align-icons-and-twisties",t.hasFileIcons&&!t.hasFolderIcons),s.classList.toggle("hide-arrows",t.hidesExplorerArrows===!0)};return e(c.getFileIconTheme()),c.onDidFileIconThemeChange(e)}E(class extends I{constructor(){super({id:"workbench.files.action.createFileFromExplorer",title:v.localize("createNewFile","New File..."),f1:!1,icon:S.newFile,precondition:V,menu:{id:g.ViewTitle,group:"navigation",when:b.equals("view",f),order:10}})}run(s){s.get(F).executeCommand(D)}}),E(class extends I{constructor(){super({id:"workbench.files.action.createFolderFromExplorer",title:v.localize("createNewFolder","New Folder..."),f1:!1,icon:S.newFolder,precondition:V,menu:{id:g.ViewTitle,group:"navigation",when:b.equals("view",f),order:20}})}run(s){s.get(F).executeCommand(Ee)}}),E(class extends I{constructor(){super({id:"workbench.files.action.refreshFilesExplorer",title:v.localize2("refreshExplorer","Refresh Explorer"),f1:!0,icon:S.refresh,menu:{id:g.ViewTitle,group:"navigation",when:b.equals("view",f),order:30},metadata:{description:v.localize2("refreshExplorerMetadata","Forces a refresh of the Explorer.")}})}async run(s){const c=s.get(P),e=s.get(N);await c.openView(f),await e.refresh()}}),E(class extends I{constructor(){super({id:"workbench.files.action.collapseExplorerFolders",title:v.localize2("collapseExplorerFolders","Collapse Folders in Explorer"),f1:!0,icon:S.collapseAll,menu:{id:g.ViewTitle,group:"navigation",when:b.equals("view",f),order:40},metadata:{description:v.localize2("collapseExplorerFoldersMetadata","Folds all folders in the Explorer.")}})}run(s){const e=s.get(P).getViewWithId(f);e!==null&&e.collapseAll()}});export{u as ExplorerView,tt as createFileIconThemableTreeContainerScope,et as getContext};
