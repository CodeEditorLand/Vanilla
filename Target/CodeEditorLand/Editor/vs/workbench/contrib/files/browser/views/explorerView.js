var W=Object.defineProperty;var H=Object.getOwnPropertyDescriptor;var x=(s,c,e,t)=>{for(var r=t>1?void 0:t?H(c,e):c,o=s.length-1,a;o>=0;o--)(a=s[o])&&(r=(t?a(c,e,r):a(r))||r);return t&&r&&W(c,e,r),r},l=(s,c)=>(e,t)=>c(e,t,s);import{DelayedDragHandler as z}from"../../../../../base/browser/dnd.js";import*as h from"../../../../../base/browser/dom.js";import{AbstractTreePart as w}from"../../../../../base/browser/ui/tree/abstractTree.js";import{TreeVisibility as B}from"../../../../../base/browser/ui/tree/tree.js";import{Codicon as S}from"../../../../../base/common/codicons.js";import{memoize as T}from"../../../../../base/common/decorators.js";import{Event as U}from"../../../../../base/common/event.js";import{ResourceMap as q}from"../../../../../base/common/map.js";import*as A from"../../../../../base/common/performance.js";import*as v from"../../../../../nls.js";import{Action2 as I,MenuId as g,registerAction2 as E}from"../../../../../platform/actions/common/actions.js";import{IClipboardService as j}from"../../../../../platform/clipboard/common/clipboardService.js";import{ICommandService as F}from"../../../../../platform/commands/common/commands.js";import{IConfigurationService as G}from"../../../../../platform/configuration/common/configuration.js";import{ContextKeyExpr as b,IContextKeyService as Y}from"../../../../../platform/contextkey/common/contextkey.js";import{IContextMenuService as J}from"../../../../../platform/contextview/browser/contextView.js";import{EditorOpenSource as $}from"../../../../../platform/editor/common/editor.js";import{FileSystemProviderCapabilities as Q,IFileService as X}from"../../../../../platform/files/common/files.js";import{IHoverService as Z}from"../../../../../platform/hover/browser/hover.js";import{IInstantiationService as ee}from"../../../../../platform/instantiation/common/instantiation.js";import{IKeybindingService as te}from"../../../../../platform/keybinding/common/keybinding.js";import{ILabelService as re}from"../../../../../platform/label/common/label.js";import{WorkbenchCompressibleAsyncDataTree as ie}from"../../../../../platform/list/browser/listService.js";import{IOpenerService as oe}from"../../../../../platform/opener/common/opener.js";import{IProgressService as se,ProgressLocation as ne}from"../../../../../platform/progress/common/progress.js";import{IStorageService as ae,StorageScope as R,StorageTarget as le}from"../../../../../platform/storage/common/storage.js";import{ITelemetryService as ce}from"../../../../../platform/telemetry/common/telemetry.js";import{IThemeService as de}from"../../../../../platform/theme/common/themeService.js";import{IUriIdentityService as pe}from"../../../../../platform/uriIdentity/common/uriIdentity.js";import{IWorkspaceContextService as he,WorkbenchState as ue}from"../../../../../platform/workspace/common/workspace.js";import{ResourceLabels as me}from"../../../../browser/labels.js";import{ViewPane as ve}from"../../../../browser/parts/views/viewPane.js";import{ResourceContextKey as fe}from"../../../../common/contextkeys.js";import{EditorResourceAccessor as ge,SideBySideEditor as Ce}from"../../../../common/editor.js";import{IViewDescriptorService as xe}from"../../../../common/views.js";import{IDecorationsService as Se}from"../../../../services/decorations/common/decorations.js";import{IEditorResolverService as Ie}from"../../../../services/editor/common/editorResolverService.js";import{ACTIVE_GROUP as Ee,IEditorService as be,SIDE_GROUP as ye}from"../../../../services/editor/common/editorService.js";import{IWorkbenchLayoutService as Fe}from"../../../../services/layout/browser/layoutService.js";import{IViewsService as D}from"../../../../services/views/common/viewsService.js";import{ExplorerItem as C,NewExplorerItem as we}from"../../common/explorerModel.js";import{ExplorerCompressedFirstFocusContext as Te,ExplorerCompressedFocusContext as Ae,ExplorerCompressedLastFocusContext as Re,ExplorerFocusedContext as De,ExplorerFolderContext as Ne,ExplorerResourceAvailableEditorIdsContext as _e,ExplorerResourceCut as Ve,ExplorerResourceMoveableToTrash as Pe,ExplorerResourceNotReadonlyContext as N,ExplorerResourceReadonlyContext as ke,ExplorerRootContext as Ke,FilesExplorerFocusedContext as Le,FoldersViewVisibleContext as Oe,VIEW_ID as f,ViewHasSomeCollapsibleRootItemContext as Me}from"../../common/files.js";import{FileCopiedContext as We,NEW_FILE_COMMAND_ID as _,NEW_FOLDER_COMMAND_ID as He}from"../fileActions.js";import{IExplorerService as V}from"../files.js";import{ExplorerDecorationsProvider as ze}from"./explorerDecorationsProvider.js";import{ExplorerCompressionDelegate as Be,ExplorerDataSource as Ue,ExplorerDelegate as P,FileDragAndDrop as qe,FileSorter as je,FilesFilter as Ge,FilesRenderer as Ye,isCompressedFolderName as Je}from"./explorerViewer.js";function $e(s,c){for(const e of c)if(s.hasNode(e)&&!s.isCollapsed(e)){for(const[,t]of e.children.entries())if(s.hasNode(t)&&s.isCollapsible(t)&&!s.isCollapsed(t))return!0}return!1}function Qe(s,c){for(const e of c)if(s.hasNode(e)&&!s.isCollapsed(e))return!0;return!1}const Xe={getId:s=>s instanceof we?`new:${s.getId()}`:s.getId()};function Ze(s,c,e,t){let r;r=s.length?s[0]:void 0,e&&c.length>1&&(r=void 0);const o=r&&t.getCompressedNavigationController(r),a=o&&o.length?o[0]:void 0;r=a?a.current:r;const d=[];for(const i of c){const n=t.getCompressedNavigationController(i),m=n&&n.length?n[0]:void 0;if(m&&r&&m===a){i===r&&d.push(i);continue}m?d.push(...m.items):d.push(i)}return r?e&&d.indexOf(r)>=0?d:[r]:e?d:[]}let u=class extends ve{constructor(e,t,r,o,a,d,i,n,m,y,p,k,tt,rt,K,L,O,it,ot,st,nt,at,lt,M){super(e,y,t,k,p,r,o,M,K,L,O);this.contextService=a;this.progressService=d;this.editorService=i;this.editorResolverService=n;this.layoutService=m;this.decorationService=tt;this.labelService=rt;this.explorerService=it;this.storageService=ot;this.clipboardService=st;this.fileService=nt;this.uriIdentityService=at;this.commandService=lt;this.delegate=e.delegate,this.resourceContext=o.createInstance(fe),this._register(this.resourceContext),this.folderContext=Ne.bindTo(p),this.readonlyContext=ke.bindTo(p),this.availableEditorIdsContext=_e.bindTo(p),this.rootContext=Ke.bindTo(p),this.resourceMoveableToTrash=Pe.bindTo(p),this.compressedFocusContext=Ae.bindTo(p),this.compressedFocusFirstContext=Te.bindTo(p),this.compressedFocusLastContext=Re.bindTo(p),this.viewHasSomeCollapsibleRootItem=Me.bindTo(p),this.viewVisibleContextKey=Oe.bindTo(p),this.explorerService.registerView(this)}static TREE_VIEW_STATE_STORAGE_KEY="workbench.explorer.treeViewState";tree;filter;resourceContext;folderContext;readonlyContext;availableEditorIdsContext;rootContext;resourceMoveableToTrash;renderer;treeContainer;container;compressedFocusContext;compressedFocusFirstContext;compressedFocusLastContext;viewHasSomeCollapsibleRootItem;viewVisibleContextKey;setTreeInputPromise;horizontalScrolling;dragHandler;_autoReveal=!1;decorationsProvider;delegate;get autoReveal(){return this._autoReveal}set autoReveal(e){this._autoReveal=e}get name(){return this.labelService.getWorkspaceLabel(this.contextService.getWorkspace())}get title(){return this.name}set title(e){}setVisible(e){this.viewVisibleContextKey.set(e),super.setVisible(e)}get fileCopiedContextKey(){return We.bindTo(this.contextKeyService)}get resourceCutContextKey(){return Ve.bindTo(this.contextKeyService)}renderHeader(e){super.renderHeader(e),this.dragHandler=new z(e,()=>this.setExpanded(!0));const t=e.querySelector(".title"),r=()=>{t.textContent=this.name,this.updateTitle(this.name),this.ariaHeaderLabel=v.localize("explorerSection","Explorer Section: {0}",this.name),t.setAttribute("aria-label",this.ariaHeaderLabel)};this._register(this.contextService.onDidChangeWorkspaceName(r)),this._register(this.labelService.onDidChangeFormatters(r)),r()}layoutBody(e,t){super.layoutBody(e,t),this.tree.layout(e,t)}renderBody(e){super.renderBody(e),this.container=e,this.treeContainer=h.append(e,h.$(".explorer-folders-view")),this.createTree(this.treeContainer),this._register(this.labelService.onDidChangeFormatters(()=>{this._onDidChangeTitleArea.fire()})),this.onConfigurationUpdated(void 0),this._register(this.editorService.onDidActiveEditorChange(()=>{this.selectActiveFile()})),this._register(this.configurationService.onDidChangeConfiguration(t=>this.onConfigurationUpdated(t))),this._register(this.onDidChangeBodyVisibility(async t=>{t&&(await this.setTreeInput(),this.updateAnyCollapsedContext(),this.selectActiveFile(!0))})),this._register(h.addDisposableListener(h.getWindow(this.container),h.EventType.PASTE,async t=>{!this.hasFocus()||this.readonlyContext.get()||t.clipboardData?.files?.length&&await this.commandService.executeCommand("filesExplorer.paste",t.clipboardData?.files)}))}focus(){if(super.focus(),this.tree.domFocus(),this.tree.getFocusedPart()===w.Tree){const e=this.tree.getFocus();e.length===1&&this._autoReveal&&this.tree.reveal(e[0],.5)}}hasFocus(){return h.isAncestorOfActiveElement(this.container)}getFocus(){return this.tree.getFocus()}focusNext(){this.tree.focusNext()}focusLast(){this.tree.focusLast()}getContext(e){const t=this.tree.getFocusedPart()===w.StickyScroll?this.tree.getStickyScrollFocus():this.tree.getFocus();return Ze(t,this.tree.getSelection(),e,this.renderer)}isItemVisible(e){return this.filter?this.filter.filter(e,B.Visible):!1}isItemCollapsed(e){return this.tree.isCollapsed(e)}async setEditable(e,t){t?(this.horizontalScrolling=this.tree.options.horizontalScrolling,this.horizontalScrolling&&this.tree.updateOptions({horizontalScrolling:!1}),await this.tree.expand(e.parent)):(this.horizontalScrolling!==void 0&&this.tree.updateOptions({horizontalScrolling:this.horizontalScrolling}),this.horizontalScrolling=void 0,this.treeContainer.classList.remove("highlight")),await this.refresh(!1,e.parent,!1),t?(this.treeContainer.classList.add("highlight"),this.tree.reveal(e)):this.tree.domFocus()}async selectActiveFile(e=this._autoReveal){if(this._autoReveal){const t=ge.getCanonicalUri(this.editorService.activeEditor,{supportSideBySide:Ce.PRIMARY});if(t){const r=this.tree.getFocus(),o=this.tree.getSelection();return r.length===1&&this.uriIdentityService.extUri.isEqual(r[0].resource,t)&&o.length===1&&this.uriIdentityService.extUri.isEqual(o[0].resource,t)?void 0:this.explorerService.select(t,e)}}}createTree(e){this.filter=this.instantiationService.createInstance(Ge),this._register(this.filter),this._register(this.filter.onDidChange(()=>this.refresh(!0)));const t=this.instantiationService.createInstance(me,{onDidChangeVisibility:this.onDidChangeBodyVisibility});this._register(t);const r=i=>this.tree.updateWidth(i);this.renderer=this.instantiationService.createInstance(Ye,e,t,r),this._register(this.renderer),this._register(et(e,this.themeService));const o=()=>this.configurationService.getValue("explorer.compactFolders"),a=i=>this.configurationService.getValue({resource:i?.root.resource}).explorer.fileNesting;this.tree=this.instantiationService.createInstance(ie,"FileExplorer",e,new P,new Be,[this.renderer],this.instantiationService.createInstance(Ue,this.filter),{compressionEnabled:o(),accessibilityProvider:this.renderer,identityProvider:Xe,keyboardNavigationLabelProvider:{getKeyboardNavigationLabel:i=>{if(!this.explorerService.isEditable(i))return i.name},getCompressedNodeKeyboardNavigationLabel:i=>{if(!i.some(n=>this.explorerService.isEditable(n)))return i.map(n=>n.name).join("/")}},multipleSelectionSupport:!0,filter:this.filter,sorter:this.instantiationService.createInstance(je),dnd:this.instantiationService.createInstance(qe,i=>this.isItemCollapsed(i)),collapseByDefault:i=>!(i instanceof C&&i.hasNests&&a(i).expand),autoExpandSingleChildren:!0,expandOnlyOnTwistieClick:i=>{if(i instanceof C){if(i.hasNests)return!0;if(this.configurationService.getValue("workbench.tree.expandMode")==="doubleClick")return!0}return!1},paddingBottom:P.ITEM_HEIGHT,overrideStyles:this.getLocationBasedColors().listOverrideStyles}),this._register(this.tree),this._register(this.themeService.onDidColorThemeChange(()=>this.tree.rerender()));const d=U.filter(this.configurationService.onDidChangeConfiguration,i=>i.affectsConfiguration("explorer.compactFolders"));this._register(d(i=>this.tree.updateOptions({compressionEnabled:o()}))),Le.bindTo(this.tree.contextKeyService),De.bindTo(this.tree.contextKeyService),this._register(this.tree.onDidChangeFocus(i=>this.onFocusChanged(i.elements))),this.onFocusChanged([]),this._register(this.tree.onDidOpen(async i=>{const n=i.element;if(!n)return;if(!(h.isKeyboardEvent(i.browserEvent)&&i.browserEvent.shiftKey)){if(n.isDirectory||this.explorerService.isEditable(void 0))return;this.telemetryService.publicLog2("workbenchActionExecuted",{id:"workbench.files.openFile",from:"explorer"});try{this.delegate?.willOpenElement(i.browserEvent),await this.editorService.openEditor({resource:n.resource,options:{preserveFocus:i.editorOptions.preserveFocus,pinned:i.editorOptions.pinned,source:$.USER}},i.sideBySide?ye:Ee)}finally{this.delegate?.didOpenElement()}}})),this._register(this.tree.onContextMenu(i=>this.onContextMenu(i))),this._register(this.tree.onDidScroll(async i=>{const n=this.explorerService.getEditable();i.scrollTopChanged&&n&&this.tree.getRelativeTop(n.stat)===null&&await n.data.onFinish("",!1)})),this._register(this.tree.onDidChangeCollapseState(i=>{const n=i.node.element?.element;n&&this.renderer.getCompressedNavigationController(n instanceof Array?n[0]:n)?.forEach(y=>y.updateCollapsed(i.node.collapsed)),this.updateAnyCollapsedContext()})),this.updateAnyCollapsedContext(),this._register(this.tree.onMouseDblClick(i=>{const n=this.configurationService.getValue("workbench.list.scrollByPage");i.element===null&&!n&&this.commandService.executeCommand(_)})),this._register(this.storageService.onWillSaveState(()=>{this.storeTreeViewState()}))}onConfigurationUpdated(e){if(!e||e.affectsConfiguration("explorer.autoReveal")){const t=this.configurationService.getValue();this._autoReveal=t?.explorer?.autoReveal}e&&(e.affectsConfiguration("explorer.decorations.colors")||e.affectsConfiguration("explorer.decorations.badges"))&&this.refresh(!0)}storeTreeViewState(){this.storageService.store(u.TREE_VIEW_STATE_STORAGE_KEY,JSON.stringify(this.tree.getViewState()),R.WORKSPACE,le.MACHINE)}setContextKeys(e){const t=this.contextService.getWorkspace().folders,r=e?e.resource:t[t.length-1].uri;if(e=e||this.explorerService.findClosest(r),this.resourceContext.set(r),this.folderContext.set(!!e&&e.isDirectory),this.readonlyContext.set(!!e&&!!e.isReadonly),this.rootContext.set(!!e&&e.isRoot),r){const o=r?this.editorResolverService.getEditors(r).map(a=>a.id):[];this.availableEditorIdsContext.set(o.join(","))}else this.availableEditorIdsContext.reset()}async onContextMenu(e){if(h.isEditableElement(e.browserEvent.target))return;const t=e.element;let r=e.anchor;if(h.isHTMLElement(r)&&t){const i=this.renderer.getCompressedNavigationController(t);i&&i.length>0&&(h.isKeyboardEvent(e.browserEvent)||Je(e.browserEvent.target)?r=i[0].labels[i[0].index]:i.forEach(n=>n.last()))}this.fileCopiedContextKey.set(await this.clipboardService.hasResources()),this.setContextKeys(t);const o=this.tree.getSelection(),a=this.explorerService.roots;let d;if(t instanceof C){const i=this.renderer.getCompressedNavigationController(t);d=i&&i.length?i[0].current.resource:t.resource}else d=a.length===1?a[0].resource:{};this.contextMenuService.showContextMenu({menuId:g.ExplorerContext,menuActionOptions:{arg:d,shouldForwardArgs:!0},contextKeyService:this.tree.contextKeyService,getAnchor:()=>r,onHide:i=>{i&&this.tree.domFocus()},getActionsContext:()=>t&&o&&o.indexOf(t)>=0?o.map(i=>i.resource):t instanceof C?[t.resource]:[]})}onFocusChanged(e){const t=e&&e.length?e[0]:void 0;if(this.setContextKeys(t),t){const o=!!this.configurationService.getValue().files?.enableTrash,a=this.fileService.hasCapability(t.resource,Q.Trash);this.resourceMoveableToTrash.set(o&&a)}else this.resourceMoveableToTrash.reset();const r=t&&this.renderer.getCompressedNavigationController(t);if(!r){this.compressedFocusContext.set(!1);return}this.compressedFocusContext.set(!0),r.forEach(o=>{this.updateCompressedNavigationContextKeys(o)})}refresh(e,t,r=!0){if(!this.tree||!this.isBodyVisible()||t&&!this.tree.hasNode(t))return Promise.resolve(void 0);r&&this.explorerService.isEditable(void 0)&&this.tree.domFocus();const o=t||this.tree.getInput();return this.tree.updateChildren(o,e,!!t)}getOptimalWidth(){const e=this.tree.getHTMLElement(),t=[].slice.call(e.querySelectorAll(".explorer-item .label-name"));return h.getLargestChildWidth(e,t)}async setTreeInput(){if(!this.isBodyVisible())return Promise.resolve(void 0);this.setTreeInputPromise&&await this.setTreeInputPromise;const e=!this.tree.getInput();e&&A.mark("code/willResolveExplorer");const t=this.explorerService.roots;let r=t[0];(this.contextService.getWorkbenchState()!==ue.FOLDER||t[0].error)&&(r=t);let o;if(this.tree&&this.tree.getInput())o=this.tree.getViewState();else{const i=this.storageService.get(u.TREE_VIEW_STATE_STORAGE_KEY,R.WORKSPACE);i&&(o=JSON.parse(i))}const a=this.tree.getInput(),d=this.setTreeInputPromise=this.tree.setInput(r,o).then(async()=>{if(Array.isArray(r)){if(!o||a instanceof C)for(let i=0;i<Math.min(r.length,5);i++)try{await this.tree.expand(r[i])}catch{}if(!a&&r.length===1&&this.configurationService.getValue().explorer.expandSingleFolderWorkspaces&&await this.tree.expand(r[0]).catch(()=>{}),Array.isArray(a)){const i=new q;a.forEach(n=>i.set(n.resource,!0)),await Promise.all(r.map(async n=>{if(!i.has(n.resource))try{await this.tree.expand(n)}catch{}}))}}e&&A.mark("code/didResolveExplorer")});this.progressService.withProgress({location:ne.Explorer,delay:this.layoutService.isRestored()?800:1500},i=>d),await d,this.decorationsProvider||(this.decorationsProvider=new ze(this.explorerService,this.contextService),this._register(this.decorationService.registerDecorationsProvider(this.decorationsProvider)))}async selectResource(e,t=this._autoReveal,r=0){if(r===2||!e||!this.isBodyVisible())return;this.setTreeInputPromise&&await this.setTreeInputPromise;let o=this.explorerService.findClosestRoot(e);for(;o&&o.resource.toString()!==e.toString();){try{await this.tree.expand(o)}catch{return this.selectResource(e,t,r+1)}if(o.children.size)for(const a of o.children.values()){if(this.uriIdentityService.extUri.isEqualOrParent(e,a.resource)){o=a;break}o=null}else o=null}if(o){if(o===this.tree.getInput()){this.tree.setFocus([]),this.tree.setSelection([]);return}try{o.nestedParent&&await this.tree.expand(o.nestedParent),(t===!0||t==="force")&&this.tree.getRelativeTop(o)===null&&this.tree.reveal(o,.5),this.tree.setFocus([o]),this.tree.setSelection([o])}catch{return this.selectResource(e,t,r+1)}}}itemsCopied(e,t,r){this.fileCopiedContextKey.set(e.length>0),this.resourceCutContextKey.set(t&&e.length>0),r?.forEach(o=>this.tree.rerender(o)),t&&e.forEach(o=>this.tree.rerender(o))}expandAll(){this.explorerService.isEditable(void 0)&&this.tree.domFocus(),this.tree.expandAll()}collapseAll(){this.explorerService.isEditable(void 0)&&this.tree.domFocus();const e=this.tree.getInput();if(Array.isArray(e)&&$e(this.tree,e)){e.forEach(t=>{t.children.forEach(r=>this.tree.hasNode(r)&&this.tree.collapse(r,!0))});return}this.tree.collapseAll()}previousCompressedStat(){const e=this.tree.getFocus();if(!e.length)return;this.renderer.getCompressedNavigationController(e[0]).forEach(r=>{r.previous(),this.updateCompressedNavigationContextKeys(r)})}nextCompressedStat(){const e=this.tree.getFocus();if(!e.length)return;this.renderer.getCompressedNavigationController(e[0]).forEach(r=>{r.next(),this.updateCompressedNavigationContextKeys(r)})}firstCompressedStat(){const e=this.tree.getFocus();if(!e.length)return;this.renderer.getCompressedNavigationController(e[0]).forEach(r=>{r.first(),this.updateCompressedNavigationContextKeys(r)})}lastCompressedStat(){const e=this.tree.getFocus();if(!e.length)return;this.renderer.getCompressedNavigationController(e[0]).forEach(r=>{r.last(),this.updateCompressedNavigationContextKeys(r)})}updateCompressedNavigationContextKeys(e){this.compressedFocusFirstContext.set(e.index===0),this.compressedFocusLastContext.set(e.index===e.count-1)}updateAnyCollapsedContext(){const e=this.tree.getInput();if(e===void 0)return;const t=Array.isArray(e)?e:Array.from(e.children.values());this.viewHasSomeCollapsibleRootItem.set(Qe(this.tree,t)),this.storeTreeViewState()}dispose(){this.dragHandler?.dispose(),super.dispose()}};x([T],u.prototype,"fileCopiedContextKey",1),x([T],u.prototype,"resourceCutContextKey",1),u=x([l(1,J),l(2,xe),l(3,ee),l(4,he),l(5,se),l(6,be),l(7,Ie),l(8,Fe),l(9,te),l(10,Y),l(11,G),l(12,Se),l(13,re),l(14,de),l(15,ce),l(16,Z),l(17,V),l(18,ae),l(19,j),l(20,X),l(21,pe),l(22,F),l(23,oe)],u);function et(s,c){s.classList.add("file-icon-themable-tree"),s.classList.add("show-file-icons");const e=t=>{s.classList.toggle("align-icons-and-twisties",t.hasFileIcons&&!t.hasFolderIcons),s.classList.toggle("hide-arrows",t.hidesExplorerArrows===!0)};return e(c.getFileIconTheme()),c.onDidFileIconThemeChange(e)}E(class extends I{constructor(){super({id:"workbench.files.action.createFileFromExplorer",title:v.localize("createNewFile","New File..."),f1:!1,icon:S.newFile,precondition:N,menu:{id:g.ViewTitle,group:"navigation",when:b.equals("view",f),order:10}})}run(s){s.get(F).executeCommand(_)}}),E(class extends I{constructor(){super({id:"workbench.files.action.createFolderFromExplorer",title:v.localize("createNewFolder","New Folder..."),f1:!1,icon:S.newFolder,precondition:N,menu:{id:g.ViewTitle,group:"navigation",when:b.equals("view",f),order:20}})}run(s){s.get(F).executeCommand(He)}}),E(class extends I{constructor(){super({id:"workbench.files.action.refreshFilesExplorer",title:v.localize2("refreshExplorer","Refresh Explorer"),f1:!0,icon:S.refresh,menu:{id:g.ViewTitle,group:"navigation",when:b.equals("view",f),order:30},metadata:{description:v.localize2("refreshExplorerMetadata","Forces a refresh of the Explorer.")}})}async run(s){const c=s.get(D),e=s.get(V);await c.openView(f),await e.refresh()}}),E(class extends I{constructor(){super({id:"workbench.files.action.collapseExplorerFolders",title:v.localize2("collapseExplorerFolders","Collapse Folders in Explorer"),f1:!0,icon:S.collapseAll,menu:{id:g.ViewTitle,group:"navigation",when:b.equals("view",f),order:40},metadata:{description:v.localize2("collapseExplorerFoldersMetadata","Folds all folders in the Explorer.")}})}run(s){const e=s.get(D).getViewWithId(f);e!==null&&e.collapseAll()}});export{u as ExplorerView,et as createFileIconThemableTreeContainerScope,Ze as getContext};
