{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/files/test/browser/explorerView.test.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite, toResource } from '../../../../../base/test/common/utils.js';\nimport { TestFileService } from '../../../../test/browser/workbenchTestServices.js';\nimport { ExplorerItem } from '../../common/explorerModel.js';\nimport { getContext } from '../../browser/views/explorerView.js';\nimport { listInvalidItemForeground } from '../../../../../platform/theme/common/colorRegistry.js';\nimport { CompressedNavigationController } from '../../browser/views/explorerViewer.js';\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { provideDecorations } from '../../browser/views/explorerDecorationsProvider.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { NullFilesConfigurationService } from '../../../../test/common/workbenchTestServices.js';\n\nsuite('Files - ExplorerView', () => {\n\n\tconst $ = dom.$;\n\n\tconst ds = ensureNoDisposablesAreLeakedInTestSuite();\n\n\tconst fileService = new TestFileService();\n\tconst configService = new TestConfigurationService();\n\n\n\tfunction createStat(this: any, path: string, name: string, isFolder: boolean, hasChildren: boolean, size: number, mtime: number, isSymLink = false, isUnknown = false): ExplorerItem {\n\t\treturn new ExplorerItem(toResource.call(this, path), fileService, configService, NullFilesConfigurationService, undefined, isFolder, isSymLink, false, false, name, mtime, isUnknown);\n\t}\n\n\ttest('getContext', async function () {\n\t\tconst d = new Date().getTime();\n\t\tconst s1 = createStat.call(this, '/', '/', true, false, 8096, d);\n\t\tconst s2 = createStat.call(this, '/path', 'path', true, false, 8096, d);\n\t\tconst s3 = createStat.call(this, '/path/to', 'to', true, false, 8096, d);\n\t\tconst s4 = createStat.call(this, '/path/to/stat', 'stat', false, false, 8096, d);\n\t\tconst noNavigationController = { getCompressedNavigationController: (stat: ExplorerItem) => undefined };\n\n\t\tassert.deepStrictEqual(getContext([s1], [s2, s3, s4], true, noNavigationController), [s2, s3, s4]);\n\t\tassert.deepStrictEqual(getContext([s1], [s1, s3, s4], true, noNavigationController), [s1, s3, s4]);\n\t\tassert.deepStrictEqual(getContext([s1], [s3, s1, s4], false, noNavigationController), [s1]);\n\t\tassert.deepStrictEqual(getContext([], [s3, s1, s4], false, noNavigationController), []);\n\t\tassert.deepStrictEqual(getContext([], [s3, s1, s4], true, noNavigationController), [s3, s1, s4]);\n\t});\n\n\ttest('decoration provider', async function () {\n\t\tconst d = new Date().getTime();\n\t\tconst s1 = createStat.call(this, '/path', 'path', true, false, 8096, d);\n\t\ts1.error = new Error('A test error');\n\t\tconst s2 = createStat.call(this, '/path/to', 'to', true, false, 8096, d, true);\n\t\tconst s3 = createStat.call(this, '/path/to/stat', 'stat', false, false, 8096, d);\n\t\tassert.strictEqual(provideDecorations(s3), undefined);\n\t\tassert.deepStrictEqual(provideDecorations(s2), {\n\t\t\ttooltip: 'Symbolic Link',\n\t\t\tletter: '\\u2937'\n\t\t});\n\t\tassert.deepStrictEqual(provideDecorations(s1), {\n\t\t\ttooltip: 'Unable to resolve workspace folder (A test error)',\n\t\t\tletter: '!',\n\t\t\tcolor: listInvalidItemForeground\n\t\t});\n\n\t\tconst unknown = createStat.call(this, '/path/to/stat', 'stat', false, false, 8096, d, false, true);\n\t\tassert.deepStrictEqual(provideDecorations(unknown), {\n\t\t\ttooltip: 'Unknown File Type',\n\t\t\tletter: '?'\n\t\t});\n\t});\n\n\ttest('compressed navigation controller', async function () {\n\t\tconst container = $('.file');\n\t\tconst label = $('.label');\n\t\tconst labelName1 = $('.label-name');\n\t\tconst labelName2 = $('.label-name');\n\t\tconst labelName3 = $('.label-name');\n\t\tconst d = new Date().getTime();\n\t\tconst s1 = createStat.call(this, '/path', 'path', true, false, 8096, d);\n\t\tconst s2 = createStat.call(this, '/path/to', 'to', true, false, 8096, d);\n\t\tconst s3 = createStat.call(this, '/path/to/stat', 'stat', false, false, 8096, d);\n\n\t\tdom.append(container, label);\n\t\tdom.append(label, labelName1);\n\t\tdom.append(label, labelName2);\n\t\tdom.append(label, labelName3);\n\t\tconst emitter = new Emitter<void>();\n\n\t\tconst navigationController = new CompressedNavigationController('id', [s1, s2, s3], {\n\t\t\tcontainer,\n\t\t\ttemplateDisposables: ds.add(new DisposableStore()),\n\t\t\telementDisposables: ds.add(new DisposableStore()),\n\t\t\tcontribs: [],\n\t\t\tlabel: <any>{\n\t\t\t\tcontainer: label,\n\t\t\t\tonDidRender: emitter.event\n\t\t\t}\n\t\t}, 1, false);\n\n\t\tds.add(navigationController);\n\n\t\tassert.strictEqual(navigationController.count, 3);\n\t\tassert.strictEqual(navigationController.index, 2);\n\t\tassert.strictEqual(navigationController.current, s3);\n\t\tnavigationController.next();\n\t\tassert.strictEqual(navigationController.current, s3);\n\t\tnavigationController.previous();\n\t\tassert.strictEqual(navigationController.current, s2);\n\t\tnavigationController.previous();\n\t\tassert.strictEqual(navigationController.current, s1);\n\t\tnavigationController.previous();\n\t\tassert.strictEqual(navigationController.current, s1);\n\t\tnavigationController.last();\n\t\tassert.strictEqual(navigationController.current, s3);\n\t\tnavigationController.first();\n\t\tassert.strictEqual(navigationController.current, s1);\n\t\tnavigationController.setIndex(1);\n\t\tassert.strictEqual(navigationController.current, s2);\n\t\tnavigationController.setIndex(44);\n\t\tassert.strictEqual(navigationController.current, s2);\n\t});\n});\n"],
  "mappings": "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",
  "names": []
}
