var h=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var f=(o,r,t,e)=>{for(var i=e>1?void 0:e?l(r,t):r,s=o.length-1,a;s>=0;s--)(a=o[s])&&(i=(e?a(r,t,i):a(i))||i);return e&&i&&h(r,t,i),i},c=(o,r)=>(t,e)=>r(t,e,o);import{onUnexpectedError as p}from"../../../../base/common/errors.js";import{Disposable as m}from"../../../../base/common/lifecycle.js";import{ICodeEditorService as b}from"../../../../editor/browser/services/codeEditorService.js";import{getEditorFeatures as d}from"../../../../editor/common/editorFeatures.js";import{IInstantiationService as I}from"../../../../platform/instantiation/common/instantiation.js";import{WorkbenchPhase as _,registerWorkbenchContribution2 as u}from"../../../common/contributions.js";let n=class extends m{constructor(t,e){super();this._instantiationService=e;this._register(t.onWillCreateCodeEditor(()=>this._instantiate())),this._register(t.onWillCreateDiffEditor(()=>this._instantiate())),(t.listCodeEditors().length>0||t.listDiffEditors().length>0)&&this._instantiate()}static ID="workbench.contrib.editorFeaturesInstantiator";_instantiated=!1;_instantiate(){if(this._instantiated)return;this._instantiated=!0;const t=d();for(const e of t)try{const i=this._instantiationService.createInstance(e);typeof i.dispose=="function"&&this._register(i)}catch(i){p(i)}}};n=f([c(0,b),c(1,I)],n),u(n.ID,n,_.BlockRestore);
