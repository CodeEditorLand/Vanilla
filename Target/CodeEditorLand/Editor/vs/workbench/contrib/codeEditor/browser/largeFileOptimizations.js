var f=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var c=(n,t,i,o)=>{for(var e=o>1?void 0:o?m(t,i):t,a=n.length-1,s;a>=0;a--)(s=n[a])&&(e=(o?s(t,i,e):s(e))||e);return o&&e&&f(t,i,e),e},d=(n,t)=>(i,o)=>t(i,o,n);import{Disposable as p}from"../../../../base/common/lifecycle.js";import*as u from"../../../../base/common/path.js";import{EditorContributionInstantiation as g,registerEditorContribution as h}from"../../../../editor/browser/editorExtensions.js";import*as l from"../../../../nls.js";import{IConfigurationService as v}from"../../../../platform/configuration/common/configuration.js";import{INotificationService as b,Severity as _}from"../../../../platform/notification/common/notification.js";let r=class extends p{constructor(i,o,e){super();this._editor=i;this._notificationService=o;this._configurationService=e;this._register(this._editor.onDidChangeModel(a=>this._update())),this._update()}static ID="editor.contrib.largeFileOptimizationsWarner";_update(){const i=this._editor.getModel();if(i&&i.isTooLargeForTokenization()){const o=l.localize({key:"largeFile",comment:["Variable 0 will be a file name."]},"{0}: tokenization, wrapping, folding, codelens, word highlighting and sticky scroll have been turned off for this large file in order to reduce memory usage and avoid freezing or crashing.",u.basename(i.uri.path));this._notificationService.prompt(_.Info,o,[{label:l.localize("removeOptimizations","Forcefully Enable Features"),run:()=>{this._configurationService.updateValue("editor.largeFileOptimizations",!1).then(()=>{this._notificationService.info(l.localize("reopenFilePrompt","Please reopen file in order for this setting to take effect."))},e=>{this._notificationService.error(e)})}}],{neverShowAgain:{id:"editor.contrib.largeFileOptimizationsWarner"}})}}};r=c([d(1,b),d(2,v)],r),h(r.ID,r,g.AfterFirstRender);export{r as LargeFileOptimizationsWarner};
