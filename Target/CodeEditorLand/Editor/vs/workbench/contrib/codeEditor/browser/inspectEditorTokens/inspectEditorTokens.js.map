{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/codeEditor/browser/inspectEditorTokens/inspectEditorTokens.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './inspectEditorTokens.css';\nimport * as nls from '../../../../../nls.js';\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { CharCode } from '../../../../../base/common/charCode.js';\nimport { Color } from '../../../../../base/common/color.js';\nimport { KeyCode } from '../../../../../base/common/keyCodes.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { ContentWidgetPositionPreference, IActiveCodeEditor, ICodeEditor, IContentWidget, IContentWidgetPosition } from '../../../../../editor/browser/editorBrowser.js';\nimport { EditorAction, ServicesAccessor, registerEditorAction, registerEditorContribution, EditorContributionInstantiation } from '../../../../../editor/browser/editorExtensions.js';\nimport { Position } from '../../../../../editor/common/core/position.js';\nimport { Range } from '../../../../../editor/common/core/range.js';\nimport { IEditorContribution } from '../../../../../editor/common/editorCommon.js';\nimport { ITextModel } from '../../../../../editor/common/model.js';\nimport { SemanticTokensLegend, SemanticTokens, TreeSitterTokenizationRegistry } from '../../../../../editor/common/languages.js';\nimport { FontStyle, ColorId, StandardTokenType, TokenMetadata } from '../../../../../editor/common/encodedTokenAttributes.js';\nimport { ILanguageService } from '../../../../../editor/common/languages/language.js';\nimport { INotificationService } from '../../../../../platform/notification/common/notification.js';\nimport { findMatchingThemeRule } from '../../../../services/textMate/common/TMHelper.js';\nimport { ITextMateTokenizationService } from '../../../../services/textMate/browser/textMateTokenizationFeature.js';\nimport type { IGrammar, IToken, StateStack } from 'vscode-textmate';\nimport { IWorkbenchThemeService } from '../../../../services/themes/common/workbenchThemeService.js';\nimport { CancellationTokenSource } from '../../../../../base/common/cancellation.js';\nimport { ColorThemeData, TokenStyleDefinitions, TokenStyleDefinition, TextMateThemingRuleDefinitions } from '../../../../services/themes/common/colorThemeData.js';\nimport { SemanticTokenRule, TokenStyleData, TokenStyle } from '../../../../../platform/theme/common/tokenClassificationRegistry.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { SEMANTIC_HIGHLIGHTING_SETTING_ID, IEditorSemanticHighlightingOptions } from '../../../../../editor/contrib/semanticTokens/common/semanticTokensConfig.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { ILanguageFeaturesService } from '../../../../../editor/common/services/languageFeatures.js';\nimport { ITreeSitterParserService } from '../../../../../editor/common/services/treeSitterParserService.js';\n// eslint-disable-next-line local/code-import-patterns\nimport type { Parser } from '@vscode/tree-sitter-wasm';\n\nconst $ = dom.$;\n\nexport class InspectEditorTokensController extends Disposable implements IEditorContribution {\n\n\tpublic static readonly ID = 'editor.contrib.inspectEditorTokens';\n\n\tpublic static get(editor: ICodeEditor): InspectEditorTokensController | null {\n\t\treturn editor.getContribution<InspectEditorTokensController>(InspectEditorTokensController.ID);\n\t}\n\n\tprivate _editor: ICodeEditor;\n\tprivate _textMateService: ITextMateTokenizationService;\n\tprivate _treeSitterService: ITreeSitterParserService;\n\tprivate _themeService: IWorkbenchThemeService;\n\tprivate _languageService: ILanguageService;\n\tprivate _notificationService: INotificationService;\n\tprivate _configurationService: IConfigurationService;\n\tprivate _languageFeaturesService: ILanguageFeaturesService;\n\tprivate _widget: InspectEditorTokensWidget | null;\n\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\t@ITextMateTokenizationService textMateService: ITextMateTokenizationService,\n\t\t@ITreeSitterParserService treeSitterService: ITreeSitterParserService,\n\t\t@ILanguageService languageService: ILanguageService,\n\t\t@IWorkbenchThemeService themeService: IWorkbenchThemeService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@ILanguageFeaturesService languageFeaturesService: ILanguageFeaturesService\n\t) {\n\t\tsuper();\n\t\tthis._editor = editor;\n\t\tthis._textMateService = textMateService;\n\t\tthis._treeSitterService = treeSitterService;\n\t\tthis._themeService = themeService;\n\t\tthis._languageService = languageService;\n\t\tthis._notificationService = notificationService;\n\t\tthis._configurationService = configurationService;\n\t\tthis._languageFeaturesService = languageFeaturesService;\n\t\tthis._widget = null;\n\n\t\tthis._register(this._editor.onDidChangeModel((e) => this.stop()));\n\t\tthis._register(this._editor.onDidChangeModelLanguage((e) => this.stop()));\n\t\tthis._register(this._editor.onKeyUp((e) => e.keyCode === KeyCode.Escape && this.stop()));\n\t}\n\n\tpublic override dispose(): void {\n\t\tthis.stop();\n\t\tsuper.dispose();\n\t}\n\n\tpublic launch(): void {\n\t\tif (this._widget) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this._editor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\t\tif (this._editor.getModel().uri.scheme === Schemas.vscodeNotebookCell) {\n\t\t\t// disable in notebooks\n\t\t\treturn;\n\t\t}\n\t\tthis._widget = new InspectEditorTokensWidget(this._editor, this._textMateService, this._treeSitterService, this._languageService, this._themeService, this._notificationService, this._configurationService, this._languageFeaturesService);\n\t}\n\n\tpublic stop(): void {\n\t\tif (this._widget) {\n\t\t\tthis._widget.dispose();\n\t\t\tthis._widget = null;\n\t\t}\n\t}\n\n\tpublic toggle(): void {\n\t\tif (!this._widget) {\n\t\t\tthis.launch();\n\t\t} else {\n\t\t\tthis.stop();\n\t\t}\n\t}\n}\n\nclass InspectEditorTokens extends EditorAction {\n\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'editor.action.inspectTMScopes',\n\t\t\tlabel: nls.localize('inspectEditorTokens', \"Developer: Inspect Editor Tokens and Scopes\"),\n\t\t\talias: 'Developer: Inspect Editor Tokens and Scopes',\n\t\t\tprecondition: undefined\n\t\t});\n\t}\n\n\tpublic run(accessor: ServicesAccessor, editor: ICodeEditor): void {\n\t\tconst controller = InspectEditorTokensController.get(editor);\n\t\tcontroller?.toggle();\n\t}\n}\n\ninterface ITextMateTokenInfo {\n\ttoken: IToken;\n\tmetadata: IDecodedMetadata;\n}\n\ninterface ISemanticTokenInfo {\n\ttype: string;\n\tmodifiers: string[];\n\trange: Range;\n\tmetadata?: IDecodedMetadata;\n\tdefinitions: TokenStyleDefinitions;\n}\n\ninterface IDecodedMetadata {\n\tlanguageId: string | undefined;\n\ttokenType: StandardTokenType;\n\tbold: boolean | undefined;\n\titalic: boolean | undefined;\n\tunderline: boolean | undefined;\n\tstrikethrough: boolean | undefined;\n\tforeground: string | undefined;\n\tbackground: string | undefined;\n}\n\nfunction renderTokenText(tokenText: string): string {\n\tif (tokenText.length > 40) {\n\t\ttokenText = tokenText.substr(0, 20) + '\u2026' + tokenText.substr(tokenText.length - 20);\n\t}\n\tlet result: string = '';\n\tfor (let charIndex = 0, len = tokenText.length; charIndex < len; charIndex++) {\n\t\tconst charCode = tokenText.charCodeAt(charIndex);\n\t\tswitch (charCode) {\n\t\t\tcase CharCode.Tab:\n\t\t\t\tresult += '\\u2192'; // &rarr;\n\t\t\t\tbreak;\n\n\t\t\tcase CharCode.Space:\n\t\t\t\tresult += '\\u00B7'; // &middot;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tresult += String.fromCharCode(charCode);\n\t\t}\n\t}\n\treturn result;\n}\n\ntype SemanticTokensResult = { tokens: SemanticTokens; legend: SemanticTokensLegend };\n\nclass InspectEditorTokensWidget extends Disposable implements IContentWidget {\n\n\tprivate static readonly _ID = 'editor.contrib.inspectEditorTokensWidget';\n\n\t// Editor.IContentWidget.allowEditorOverflow\n\tpublic readonly allowEditorOverflow = true;\n\n\tprivate _isDisposed: boolean;\n\tprivate readonly _editor: IActiveCodeEditor;\n\tprivate readonly _languageService: ILanguageService;\n\tprivate readonly _themeService: IWorkbenchThemeService;\n\tprivate readonly _textMateService: ITextMateTokenizationService;\n\tprivate readonly _treeSitterService: ITreeSitterParserService;\n\tprivate readonly _notificationService: INotificationService;\n\tprivate readonly _configurationService: IConfigurationService;\n\tprivate readonly _languageFeaturesService: ILanguageFeaturesService;\n\tprivate readonly _model: ITextModel;\n\tprivate readonly _domNode: HTMLElement;\n\tprivate readonly _currentRequestCancellationTokenSource: CancellationTokenSource;\n\n\tconstructor(\n\t\teditor: IActiveCodeEditor,\n\t\ttextMateService: ITextMateTokenizationService,\n\t\ttreeSitterService: ITreeSitterParserService,\n\t\tlanguageService: ILanguageService,\n\t\tthemeService: IWorkbenchThemeService,\n\t\tnotificationService: INotificationService,\n\t\tconfigurationService: IConfigurationService,\n\t\tlanguageFeaturesService: ILanguageFeaturesService\n\t) {\n\t\tsuper();\n\t\tthis._isDisposed = false;\n\t\tthis._editor = editor;\n\t\tthis._languageService = languageService;\n\t\tthis._themeService = themeService;\n\t\tthis._textMateService = textMateService;\n\t\tthis._treeSitterService = treeSitterService;\n\t\tthis._notificationService = notificationService;\n\t\tthis._configurationService = configurationService;\n\t\tthis._languageFeaturesService = languageFeaturesService;\n\t\tthis._model = this._editor.getModel();\n\t\tthis._domNode = document.createElement('div');\n\t\tthis._domNode.className = 'token-inspect-widget';\n\t\tthis._currentRequestCancellationTokenSource = new CancellationTokenSource();\n\t\tthis._beginCompute(this._editor.getPosition());\n\t\tthis._register(this._editor.onDidChangeCursorPosition((e) => this._beginCompute(this._editor.getPosition())));\n\t\tthis._register(themeService.onDidColorThemeChange(_ => this._beginCompute(this._editor.getPosition())));\n\t\tthis._register(configurationService.onDidChangeConfiguration(e => e.affectsConfiguration('editor.semanticHighlighting.enabled') && this._beginCompute(this._editor.getPosition())));\n\t\tthis._editor.addContentWidget(this);\n\t}\n\n\tpublic override dispose(): void {\n\t\tthis._isDisposed = true;\n\t\tthis._editor.removeContentWidget(this);\n\t\tthis._currentRequestCancellationTokenSource.cancel();\n\t\tsuper.dispose();\n\t}\n\n\tpublic getId(): string {\n\t\treturn InspectEditorTokensWidget._ID;\n\t}\n\n\tprivate _beginCompute(position: Position): void {\n\t\tconst grammar = this._textMateService.createTokenizer(this._model.getLanguageId());\n\t\tconst semanticTokens = this._computeSemanticTokens(position);\n\t\tconst tree = this._treeSitterService.getParseResult(this._model);\n\n\t\tdom.clearNode(this._domNode);\n\t\tthis._domNode.appendChild(document.createTextNode(nls.localize('inspectTMScopesWidget.loading', \"Loading...\")));\n\n\t\tPromise.all([grammar, semanticTokens]).then(([grammar, semanticTokens]) => {\n\t\t\tif (this._isDisposed) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._compute(grammar, semanticTokens, tree?.tree, position);\n\t\t\tthis._domNode.style.maxWidth = `${Math.max(this._editor.getLayoutInfo().width * 0.66, 500)}px`;\n\t\t\tthis._editor.layoutContentWidget(this);\n\t\t}, (err) => {\n\t\t\tthis._notificationService.warn(err);\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tInspectEditorTokensController.get(this._editor)?.stop();\n\t\t\t});\n\t\t});\n\n\t}\n\n\tprivate _isSemanticColoringEnabled() {\n\t\tconst setting = this._configurationService.getValue<IEditorSemanticHighlightingOptions>(SEMANTIC_HIGHLIGHTING_SETTING_ID, { overrideIdentifier: this._model.getLanguageId(), resource: this._model.uri })?.enabled;\n\t\tif (typeof setting === 'boolean') {\n\t\t\treturn setting;\n\t\t}\n\t\treturn this._themeService.getColorTheme().semanticHighlighting;\n\t}\n\n\tprivate _compute(grammar: IGrammar | null, semanticTokens: SemanticTokensResult | null, tree: Parser.Tree | undefined, position: Position) {\n\t\tconst textMateTokenInfo = grammar && this._getTokensAtPosition(grammar, position);\n\t\tconst semanticTokenInfo = semanticTokens && this._getSemanticTokenAtPosition(semanticTokens, position);\n\t\tconst treeSitterTokenInfo = tree && this._getTreeSitterTokenAtPosition(tree, position);\n\t\tif (!textMateTokenInfo && !semanticTokenInfo && !treeSitterTokenInfo) {\n\t\t\tdom.reset(this._domNode, 'No grammar or semantic tokens available.');\n\t\t\treturn;\n\t\t}\n\n\t\tconst tmMetadata = textMateTokenInfo?.metadata;\n\t\tconst semMetadata = semanticTokenInfo?.metadata;\n\n\t\tconst semTokenText = semanticTokenInfo && renderTokenText(this._model.getValueInRange(semanticTokenInfo.range));\n\t\tconst tmTokenText = textMateTokenInfo && renderTokenText(this._model.getLineContent(position.lineNumber).substring(textMateTokenInfo.token.startIndex, textMateTokenInfo.token.endIndex));\n\n\t\tconst tokenText = semTokenText || tmTokenText || '';\n\n\t\tdom.reset(this._domNode,\n\t\t\t$('h2.tiw-token', undefined,\n\t\t\t\ttokenText,\n\t\t\t\t$('span.tiw-token-length', undefined, `${tokenText.length} ${tokenText.length === 1 ? 'char' : 'chars'}`)));\n\t\tdom.append(this._domNode, $('hr.tiw-metadata-separator', { 'style': 'clear:both' }));\n\t\tdom.append(this._domNode, $('table.tiw-metadata-table', undefined,\n\t\t\t$('tbody', undefined,\n\t\t\t\t$('tr', undefined,\n\t\t\t\t\t$('td.tiw-metadata-key', undefined, 'language'),\n\t\t\t\t\t$('td.tiw-metadata-value', undefined, tmMetadata?.languageId || '')\n\t\t\t\t),\n\t\t\t\t$('tr', undefined,\n\t\t\t\t\t$('td.tiw-metadata-key', undefined, 'standard token type' as string),\n\t\t\t\t\t$('td.tiw-metadata-value', undefined, this._tokenTypeToString(tmMetadata?.tokenType || StandardTokenType.Other))\n\t\t\t\t),\n\t\t\t\t...this._formatMetadata(semMetadata, tmMetadata)\n\t\t\t)\n\t\t));\n\n\t\tif (semanticTokenInfo) {\n\t\t\tdom.append(this._domNode, $('hr.tiw-metadata-separator'));\n\t\t\tconst table = dom.append(this._domNode, $('table.tiw-metadata-table', undefined));\n\t\t\tconst tbody = dom.append(table, $('tbody', undefined,\n\t\t\t\t$('tr', undefined,\n\t\t\t\t\t$('td.tiw-metadata-key', undefined, 'semantic token type' as string),\n\t\t\t\t\t$('td.tiw-metadata-value', undefined, semanticTokenInfo.type)\n\t\t\t\t)\n\t\t\t));\n\t\t\tif (semanticTokenInfo.modifiers.length) {\n\t\t\t\tdom.append(tbody, $('tr', undefined,\n\t\t\t\t\t$('td.tiw-metadata-key', undefined, 'modifiers'),\n\t\t\t\t\t$('td.tiw-metadata-value', undefined, semanticTokenInfo.modifiers.join(' ')),\n\t\t\t\t));\n\t\t\t}\n\t\t\tif (semanticTokenInfo.metadata) {\n\t\t\t\tconst properties: (keyof TokenStyleData)[] = ['foreground', 'bold', 'italic', 'underline', 'strikethrough'];\n\t\t\t\tconst propertiesByDefValue: { [rule: string]: string[] } = {};\n\t\t\t\tconst allDefValues = new Array<[Array<HTMLElement | string>, string]>(); // remember the order\n\t\t\t\t// first collect to detect when the same rule is used for multiple properties\n\t\t\t\tfor (const property of properties) {\n\t\t\t\t\tif (semanticTokenInfo.metadata[property] !== undefined) {\n\t\t\t\t\t\tconst definition = semanticTokenInfo.definitions[property];\n\t\t\t\t\t\tconst defValue = this._renderTokenStyleDefinition(definition, property);\n\t\t\t\t\t\tconst defValueStr = defValue.map(el => dom.isHTMLElement(el) ? el.outerHTML : el).join();\n\t\t\t\t\t\tlet properties = propertiesByDefValue[defValueStr];\n\t\t\t\t\t\tif (!properties) {\n\t\t\t\t\t\t\tpropertiesByDefValue[defValueStr] = properties = [];\n\t\t\t\t\t\t\tallDefValues.push([defValue, defValueStr]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tproperties.push(property);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (const [defValue, defValueStr] of allDefValues) {\n\t\t\t\t\tdom.append(tbody, $('tr', undefined,\n\t\t\t\t\t\t$('td.tiw-metadata-key', undefined, propertiesByDefValue[defValueStr].join(', ')),\n\t\t\t\t\t\t$('td.tiw-metadata-value', undefined, ...defValue)\n\t\t\t\t\t));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (textMateTokenInfo) {\n\t\t\tconst theme = this._themeService.getColorTheme();\n\t\t\tdom.append(this._domNode, $('hr.tiw-metadata-separator'));\n\t\t\tconst table = dom.append(this._domNode, $('table.tiw-metadata-table'));\n\t\t\tconst tbody = dom.append(table, $('tbody'));\n\n\t\t\tif (tmTokenText && tmTokenText !== tokenText) {\n\t\t\t\tdom.append(tbody, $('tr', undefined,\n\t\t\t\t\t$('td.tiw-metadata-key', undefined, 'textmate token' as string),\n\t\t\t\t\t$('td.tiw-metadata-value', undefined, `${tmTokenText} (${tmTokenText.length})`)\n\t\t\t\t));\n\t\t\t}\n\t\t\tconst scopes = new Array<HTMLElement | string>();\n\t\t\tfor (let i = textMateTokenInfo.token.scopes.length - 1; i >= 0; i--) {\n\t\t\t\tscopes.push(textMateTokenInfo.token.scopes[i]);\n\t\t\t\tif (i > 0) {\n\t\t\t\t\tscopes.push($('br'));\n\t\t\t\t}\n\t\t\t}\n\t\t\tdom.append(tbody, $('tr', undefined,\n\t\t\t\t$('td.tiw-metadata-key', undefined, 'textmate scopes' as string),\n\t\t\t\t$('td.tiw-metadata-value.tiw-metadata-scopes', undefined, ...scopes),\n\t\t\t));\n\n\t\t\tconst matchingRule = findMatchingThemeRule(theme, textMateTokenInfo.token.scopes, false);\n\t\t\tconst semForeground = semanticTokenInfo?.metadata?.foreground;\n\t\t\tif (matchingRule) {\n\t\t\t\tif (semForeground !== textMateTokenInfo.metadata.foreground) {\n\t\t\t\t\tlet defValue = $('code.tiw-theme-selector', undefined,\n\t\t\t\t\t\tmatchingRule.rawSelector, $('br'), JSON.stringify(matchingRule.settings, null, '\\t'));\n\t\t\t\t\tif (semForeground) {\n\t\t\t\t\t\tdefValue = $('s', undefined, defValue);\n\t\t\t\t\t}\n\t\t\t\t\tdom.append(tbody, $('tr', undefined,\n\t\t\t\t\t\t$('td.tiw-metadata-key', undefined, 'foreground'),\n\t\t\t\t\t\t$('td.tiw-metadata-value', undefined, defValue),\n\t\t\t\t\t));\n\t\t\t\t}\n\t\t\t} else if (!semForeground) {\n\t\t\t\tdom.append(tbody, $('tr', undefined,\n\t\t\t\t\t$('td.tiw-metadata-key', undefined, 'foreground'),\n\t\t\t\t\t$('td.tiw-metadata-value', undefined, 'No theme selector' as string),\n\t\t\t\t));\n\t\t\t}\n\t\t}\n\n\t\tif (treeSitterTokenInfo) {\n\t\t\tdom.append(this._domNode, $('hr.tiw-metadata-separator'));\n\t\t\tconst table = dom.append(this._domNode, $('table.tiw-metadata-table'));\n\t\t\tconst tbody = dom.append(table, $('tbody'));\n\n\t\t\tdom.append(tbody, $('tr', undefined,\n\t\t\t\t$('td.tiw-metadata-key', undefined, 'tree-sitter token' as string),\n\t\t\t\t$('td.tiw-metadata-value', undefined, `${treeSitterTokenInfo.text}`)\n\t\t\t));\n\t\t\tconst scopes = new Array<HTMLElement | string>();\n\t\t\tlet node = treeSitterTokenInfo;\n\t\t\twhile (node.parent) {\n\t\t\t\tscopes.push(node.type);\n\t\t\t\tnode = node.parent;\n\t\t\t\tif (node) {\n\t\t\t\t\tscopes.push($('br'));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tdom.append(tbody, $('tr', undefined,\n\t\t\t\t$('td.tiw-metadata-key', undefined, 'tree-sitter scopes' as string),\n\t\t\t\t$('td.tiw-metadata-value.tiw-metadata-scopes', undefined, ...scopes),\n\t\t\t));\n\n\t\t\tconst tokenizationSupport = TreeSitterTokenizationRegistry.get(this._model.getLanguageId());\n\t\t\tconst captures = tokenizationSupport?.captureAtPosition(position.lineNumber, position.column, this._model);\n\t\t\tif (captures && captures.length > 0) {\n\t\t\t\tdom.append(tbody, $('tr', undefined,\n\t\t\t\t\t$('td.tiw-metadata-key', undefined, 'foreground'),\n\t\t\t\t\t$('td.tiw-metadata-value', undefined, captures[0].name),\n\t\t\t\t));\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _formatMetadata(semantic?: IDecodedMetadata, tm?: IDecodedMetadata): Array<HTMLElement | string> {\n\t\tconst elements = new Array<HTMLElement | string>();\n\n\t\tfunction render(property: 'foreground' | 'background') {\n\t\t\tconst value = semantic?.[property] || tm?.[property];\n\t\t\tif (value !== undefined) {\n\t\t\t\tconst semanticStyle = semantic?.[property] ? 'tiw-metadata-semantic' : '';\n\t\t\t\telements.push($('tr', undefined,\n\t\t\t\t\t$('td.tiw-metadata-key', undefined, property),\n\t\t\t\t\t$(`td.tiw-metadata-value.${semanticStyle}`, undefined, value)\n\t\t\t\t));\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\n\t\tconst foreground = render('foreground');\n\t\tconst background = render('background');\n\t\tif (foreground && background) {\n\t\t\tconst backgroundColor = Color.fromHex(background), foregroundColor = Color.fromHex(foreground);\n\t\t\tif (backgroundColor.isOpaque()) {\n\t\t\t\telements.push($('tr', undefined,\n\t\t\t\t\t$('td.tiw-metadata-key', undefined, 'contrast ratio' as string),\n\t\t\t\t\t$('td.tiw-metadata-value', undefined, backgroundColor.getContrastRatio(foregroundColor.makeOpaque(backgroundColor)).toFixed(2))\n\t\t\t\t));\n\t\t\t} else {\n\t\t\t\telements.push($('tr', undefined,\n\t\t\t\t\t$('td.tiw-metadata-key', undefined, 'Contrast ratio cannot be precise for background colors that use transparency' as string),\n\t\t\t\t\t$('td.tiw-metadata-value')\n\t\t\t\t));\n\t\t\t}\n\t\t}\n\n\t\tconst fontStyleLabels = new Array<HTMLElement | string>();\n\n\t\tfunction addStyle(key: 'bold' | 'italic' | 'underline' | 'strikethrough') {\n\t\t\tlet label: HTMLElement | string | undefined;\n\t\t\tif (semantic && semantic[key]) {\n\t\t\t\tlabel = $('span.tiw-metadata-semantic', undefined, key);\n\t\t\t} else if (tm && tm[key]) {\n\t\t\t\tlabel = key;\n\t\t\t}\n\t\t\tif (label) {\n\t\t\t\tif (fontStyleLabels.length) {\n\t\t\t\t\tfontStyleLabels.push(' ');\n\t\t\t\t}\n\t\t\t\tfontStyleLabels.push(label);\n\t\t\t}\n\t\t}\n\t\taddStyle('bold');\n\t\taddStyle('italic');\n\t\taddStyle('underline');\n\t\taddStyle('strikethrough');\n\t\tif (fontStyleLabels.length) {\n\t\t\telements.push($('tr', undefined,\n\t\t\t\t$('td.tiw-metadata-key', undefined, 'font style' as string),\n\t\t\t\t$('td.tiw-metadata-value', undefined, ...fontStyleLabels)\n\t\t\t));\n\t\t}\n\t\treturn elements;\n\t}\n\n\tprivate _decodeMetadata(metadata: number): IDecodedMetadata {\n\t\tconst colorMap = this._themeService.getColorTheme().tokenColorMap;\n\t\tconst languageId = TokenMetadata.getLanguageId(metadata);\n\t\tconst tokenType = TokenMetadata.getTokenType(metadata);\n\t\tconst fontStyle = TokenMetadata.getFontStyle(metadata);\n\t\tconst foreground = TokenMetadata.getForeground(metadata);\n\t\tconst background = TokenMetadata.getBackground(metadata);\n\t\treturn {\n\t\t\tlanguageId: this._languageService.languageIdCodec.decodeLanguageId(languageId),\n\t\t\ttokenType: tokenType,\n\t\t\tbold: (fontStyle & FontStyle.Bold) ? true : undefined,\n\t\t\titalic: (fontStyle & FontStyle.Italic) ? true : undefined,\n\t\t\tunderline: (fontStyle & FontStyle.Underline) ? true : undefined,\n\t\t\tstrikethrough: (fontStyle & FontStyle.Strikethrough) ? true : undefined,\n\t\t\tforeground: colorMap[foreground],\n\t\t\tbackground: colorMap[background]\n\t\t};\n\t}\n\n\tprivate _tokenTypeToString(tokenType: StandardTokenType): string {\n\t\tswitch (tokenType) {\n\t\t\tcase StandardTokenType.Other: return 'Other';\n\t\t\tcase StandardTokenType.Comment: return 'Comment';\n\t\t\tcase StandardTokenType.String: return 'String';\n\t\t\tcase StandardTokenType.RegEx: return 'RegEx';\n\t\t\tdefault: return '??';\n\t\t}\n\t}\n\n\tprivate _getTokensAtPosition(grammar: IGrammar, position: Position): ITextMateTokenInfo {\n\t\tconst lineNumber = position.lineNumber;\n\t\tconst stateBeforeLine = this._getStateBeforeLine(grammar, lineNumber);\n\n\t\tconst tokenizationResult1 = grammar.tokenizeLine(this._model.getLineContent(lineNumber), stateBeforeLine);\n\t\tconst tokenizationResult2 = grammar.tokenizeLine2(this._model.getLineContent(lineNumber), stateBeforeLine);\n\n\t\tlet token1Index = 0;\n\t\tfor (let i = tokenizationResult1.tokens.length - 1; i >= 0; i--) {\n\t\t\tconst t = tokenizationResult1.tokens[i];\n\t\t\tif (position.column - 1 >= t.startIndex) {\n\t\t\t\ttoken1Index = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tlet token2Index = 0;\n\t\tfor (let i = (tokenizationResult2.tokens.length >>> 1); i >= 0; i--) {\n\t\t\tif (position.column - 1 >= tokenizationResult2.tokens[(i << 1)]) {\n\t\t\t\ttoken2Index = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\ttoken: tokenizationResult1.tokens[token1Index],\n\t\t\tmetadata: this._decodeMetadata(tokenizationResult2.tokens[(token2Index << 1) + 1])\n\t\t};\n\t}\n\n\tprivate _getStateBeforeLine(grammar: IGrammar, lineNumber: number): StateStack | null {\n\t\tlet state: StateStack | null = null;\n\n\t\tfor (let i = 1; i < lineNumber; i++) {\n\t\t\tconst tokenizationResult = grammar.tokenizeLine(this._model.getLineContent(i), state);\n\t\t\tstate = tokenizationResult.ruleStack;\n\t\t}\n\n\t\treturn state;\n\t}\n\n\tprivate isSemanticTokens(token: any): token is SemanticTokens {\n\t\treturn token && token.data;\n\t}\n\n\tprivate async _computeSemanticTokens(position: Position): Promise<SemanticTokensResult | null> {\n\t\tif (!this._isSemanticColoringEnabled()) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst tokenProviders = this._languageFeaturesService.documentSemanticTokensProvider.ordered(this._model);\n\t\tif (tokenProviders.length) {\n\t\t\tconst provider = tokenProviders[0];\n\t\t\tconst tokens = await Promise.resolve(provider.provideDocumentSemanticTokens(this._model, null, this._currentRequestCancellationTokenSource.token));\n\t\t\tif (this.isSemanticTokens(tokens)) {\n\t\t\t\treturn { tokens, legend: provider.getLegend() };\n\t\t\t}\n\t\t}\n\t\tconst rangeTokenProviders = this._languageFeaturesService.documentRangeSemanticTokensProvider.ordered(this._model);\n\t\tif (rangeTokenProviders.length) {\n\t\t\tconst provider = rangeTokenProviders[0];\n\t\t\tconst lineNumber = position.lineNumber;\n\t\t\tconst range = new Range(lineNumber, 1, lineNumber, this._model.getLineMaxColumn(lineNumber));\n\t\t\tconst tokens = await Promise.resolve(provider.provideDocumentRangeSemanticTokens(this._model, range, this._currentRequestCancellationTokenSource.token));\n\t\t\tif (this.isSemanticTokens(tokens)) {\n\t\t\t\treturn { tokens, legend: provider.getLegend() };\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate _getSemanticTokenAtPosition(semanticTokens: SemanticTokensResult, pos: Position): ISemanticTokenInfo | null {\n\t\tconst tokenData = semanticTokens.tokens.data;\n\t\tconst defaultLanguage = this._model.getLanguageId();\n\t\tlet lastLine = 0;\n\t\tlet lastCharacter = 0;\n\t\tconst posLine = pos.lineNumber - 1, posCharacter = pos.column - 1; // to 0-based position\n\t\tfor (let i = 0; i < tokenData.length; i += 5) {\n\t\t\tconst lineDelta = tokenData[i], charDelta = tokenData[i + 1], len = tokenData[i + 2], typeIdx = tokenData[i + 3], modSet = tokenData[i + 4];\n\t\t\tconst line = lastLine + lineDelta; // 0-based\n\t\t\tconst character = lineDelta === 0 ? lastCharacter + charDelta : charDelta; // 0-based\n\t\t\tif (posLine === line && character <= posCharacter && posCharacter < character + len) {\n\t\t\t\tconst type = semanticTokens.legend.tokenTypes[typeIdx] || 'not in legend (ignored)';\n\t\t\t\tconst modifiers = [];\n\t\t\t\tlet modifierSet = modSet;\n\t\t\t\tfor (let modifierIndex = 0; modifierSet > 0 && modifierIndex < semanticTokens.legend.tokenModifiers.length; modifierIndex++) {\n\t\t\t\t\tif (modifierSet & 1) {\n\t\t\t\t\t\tmodifiers.push(semanticTokens.legend.tokenModifiers[modifierIndex]);\n\t\t\t\t\t}\n\t\t\t\t\tmodifierSet = modifierSet >> 1;\n\t\t\t\t}\n\t\t\t\tif (modifierSet > 0) {\n\t\t\t\t\tmodifiers.push('not in legend (ignored)');\n\t\t\t\t}\n\t\t\t\tconst range = new Range(line + 1, character + 1, line + 1, character + 1 + len);\n\t\t\t\tconst definitions = {};\n\t\t\t\tconst colorMap = this._themeService.getColorTheme().tokenColorMap;\n\t\t\t\tconst theme = this._themeService.getColorTheme() as ColorThemeData;\n\t\t\t\tconst tokenStyle = theme.getTokenStyleMetadata(type, modifiers, defaultLanguage, true, definitions);\n\n\t\t\t\tlet metadata: IDecodedMetadata | undefined = undefined;\n\t\t\t\tif (tokenStyle) {\n\t\t\t\t\tmetadata = {\n\t\t\t\t\t\tlanguageId: undefined,\n\t\t\t\t\t\ttokenType: StandardTokenType.Other,\n\t\t\t\t\t\tbold: tokenStyle?.bold,\n\t\t\t\t\t\titalic: tokenStyle?.italic,\n\t\t\t\t\t\tunderline: tokenStyle?.underline,\n\t\t\t\t\t\tstrikethrough: tokenStyle?.strikethrough,\n\t\t\t\t\t\tforeground: colorMap[tokenStyle?.foreground || ColorId.None],\n\t\t\t\t\t\tbackground: undefined\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn { type, modifiers, range, metadata, definitions };\n\t\t\t}\n\t\t\tlastLine = line;\n\t\t\tlastCharacter = character;\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate _walkTreeforPosition(cursor: Parser.TreeCursor, pos: Position): Parser.SyntaxNode | null {\n\t\tconst offset = this._model.getOffsetAt(pos);\n\t\tcursor.gotoFirstChild();\n\t\tlet goChild: boolean = false;\n\t\tlet lastGoodNode: Parser.SyntaxNode | null = null;\n\t\tdo {\n\t\t\tif (cursor.currentNode.startIndex <= offset && offset < cursor.currentNode.endIndex) {\n\t\t\t\tgoChild = true;\n\t\t\t\tlastGoodNode = cursor.currentNode;\n\t\t\t} else {\n\t\t\t\tgoChild = false;\n\t\t\t}\n\t\t} while (goChild ? cursor.gotoFirstChild() : cursor.gotoNextSibling());\n\t\treturn lastGoodNode;\n\t}\n\n\tprivate _getTreeSitterTokenAtPosition(tree: Parser.Tree, pos: Position): Parser.SyntaxNode | null {\n\t\tconst cursor = tree.walk();\n\n\t\treturn this._walkTreeforPosition(cursor, pos);\n\t}\n\n\tprivate _renderTokenStyleDefinition(definition: TokenStyleDefinition | undefined, property: keyof TokenStyleData): Array<HTMLElement | string> {\n\t\tconst elements = new Array<HTMLElement | string>();\n\t\tif (definition === undefined) {\n\t\t\treturn elements;\n\t\t}\n\t\tconst theme = this._themeService.getColorTheme() as ColorThemeData;\n\n\t\tif (Array.isArray(definition)) {\n\t\t\tconst scopesDefinition: TextMateThemingRuleDefinitions = {};\n\t\t\ttheme.resolveScopes(definition, scopesDefinition);\n\t\t\tconst matchingRule = scopesDefinition[property];\n\t\t\tif (matchingRule && scopesDefinition.scope) {\n\t\t\t\tconst scopes = $('ul.tiw-metadata-values');\n\t\t\t\tconst strScopes = Array.isArray(matchingRule.scope) ? matchingRule.scope : [String(matchingRule.scope)];\n\n\t\t\t\tfor (const strScope of strScopes) {\n\t\t\t\t\tscopes.appendChild($('li.tiw-metadata-value.tiw-metadata-scopes', undefined, strScope));\n\t\t\t\t}\n\n\t\t\t\telements.push(\n\t\t\t\t\tscopesDefinition.scope.join(' '),\n\t\t\t\t\tscopes,\n\t\t\t\t\t$('code.tiw-theme-selector', undefined, JSON.stringify(matchingRule.settings, null, '\\t')));\n\t\t\t\treturn elements;\n\t\t\t}\n\t\t\treturn elements;\n\t\t} else if (SemanticTokenRule.is(definition)) {\n\t\t\tconst scope = theme.getTokenStylingRuleScope(definition);\n\t\t\tif (scope === 'setting') {\n\t\t\t\telements.push(`User settings: ${definition.selector.id} - ${this._renderStyleProperty(definition.style, property)}`);\n\t\t\t\treturn elements;\n\t\t\t} else if (scope === 'theme') {\n\t\t\t\telements.push(`Color theme: ${definition.selector.id} - ${this._renderStyleProperty(definition.style, property)}`);\n\t\t\t\treturn elements;\n\t\t\t}\n\t\t\treturn elements;\n\t\t} else {\n\t\t\tconst style = theme.resolveTokenStyleValue(definition);\n\t\t\telements.push(`Default: ${style ? this._renderStyleProperty(style, property) : ''}`);\n\t\t\treturn elements;\n\t\t}\n\t}\n\n\tprivate _renderStyleProperty(style: TokenStyle, property: keyof TokenStyleData) {\n\t\tswitch (property) {\n\t\t\tcase 'foreground': return style.foreground ? Color.Format.CSS.formatHexA(style.foreground, true) : '';\n\t\t\tdefault: return style[property] !== undefined ? String(style[property]) : '';\n\t\t}\n\t}\n\n\tpublic getDomNode(): HTMLElement {\n\t\treturn this._domNode;\n\t}\n\n\tpublic getPosition(): IContentWidgetPosition {\n\t\treturn {\n\t\t\tposition: this._editor.getPosition(),\n\t\t\tpreference: [ContentWidgetPositionPreference.BELOW, ContentWidgetPositionPreference.ABOVE]\n\t\t};\n\t}\n}\n\nregisterEditorContribution(InspectEditorTokensController.ID, InspectEditorTokensController, EditorContributionInstantiation.Lazy);\nregisterEditorAction(InspectEditorTokens);\n"],
  "mappings": "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",
  "names": ["grammar", "semanticTokens", "properties"]
}
