{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/codeEditor/browser/largeFileOptimizations.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport * as path from '../../../../base/common/path.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { ICodeEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { EditorContributionInstantiation, registerEditorContribution } from '../../../../editor/browser/editorExtensions.js';\nimport { IEditorContribution } from '../../../../editor/common/editorCommon.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\n\n/**\n * Shows a message when opening a large file which has been memory optimized (and features disabled).\n */\nexport class LargeFileOptimizationsWarner extends Disposable implements IEditorContribution {\n\n\tpublic static readonly ID = 'editor.contrib.largeFileOptimizationsWarner';\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\t@INotificationService private readonly _notificationService: INotificationService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(this._editor.onDidChangeModel((e) => this._update()));\n\t\tthis._update();\n\t}\n\n\tprivate _update(): void {\n\t\tconst model = this._editor.getModel();\n\t\tif (!model) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (model.isTooLargeForTokenization()) {\n\t\t\tconst message = nls.localize(\n\t\t\t\t{\n\t\t\t\t\tkey: 'largeFile',\n\t\t\t\t\tcomment: [\n\t\t\t\t\t\t'Variable 0 will be a file name.'\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t\"{0}: tokenization, wrapping, folding, codelens, word highlighting and sticky scroll have been turned off for this large file in order to reduce memory usage and avoid freezing or crashing.\",\n\t\t\t\tpath.basename(model.uri.path)\n\t\t\t);\n\n\t\t\tthis._notificationService.prompt(Severity.Info, message, [\n\t\t\t\t{\n\t\t\t\t\tlabel: nls.localize('removeOptimizations', \"Forcefully Enable Features\"),\n\t\t\t\t\trun: () => {\n\t\t\t\t\t\tthis._configurationService.updateValue(`editor.largeFileOptimizations`, false).then(() => {\n\t\t\t\t\t\t\tthis._notificationService.info(nls.localize('reopenFilePrompt', \"Please reopen file in order for this setting to take effect.\"));\n\t\t\t\t\t\t}, (err) => {\n\t\t\t\t\t\t\tthis._notificationService.error(err);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t], { neverShowAgain: { id: 'editor.contrib.largeFileOptimizationsWarner' } });\n\t\t}\n\t}\n}\n\nregisterEditorContribution(LargeFileOptimizationsWarner.ID, LargeFileOptimizationsWarner, EditorContributionInstantiation.AfterFirstRender);\n"],
  "mappings": ";;;;;;;;;;;;AAKA,YAAY,SAAS;AACrB,YAAY,UAAU;AACtB,SAAS,kBAAkB;AAC3B,SAAS,mBAAmB;AAC5B,SAAS,iCAAiC,kCAAkC;AAC5E,SAAS,2BAA2B;AACpC,SAAS,6BAA6B;AACtC,SAAS,sBAAsB,gBAAgB;AAKxC,IAAM,+BAAN,cAA2C,WAA0C;AAAA,EAI3F,YACkB,SACsB,sBACC,uBACvC;AACD,UAAM;AAJW;AACsB;AACC;AAIxC,SAAK,UAAU,KAAK,QAAQ,iBAAiB,CAAC,MAAM,KAAK,QAAQ,CAAC,CAAC;AACnE,SAAK,QAAQ;AAAA,EACd;AAAA,EA9BD,OAiB4F;AAAA;AAAA;AAAA,EAE3F,OAAuB,KAAK;AAAA,EAapB,UAAgB;AACvB,UAAM,QAAQ,KAAK,QAAQ,SAAS;AACpC,QAAI,CAAC,OAAO;AACX;AAAA,IACD;AAEA,QAAI,MAAM,0BAA0B,GAAG;AACtC,YAAM,UAAU,IAAI;AAAA,QACnB;AAAA,UACC,KAAK;AAAA,UACL,SAAS;AAAA,YACR;AAAA,UACD;AAAA,QACD;AAAA,QACA;AAAA,QACA,KAAK,SAAS,MAAM,IAAI,IAAI;AAAA,MAC7B;AAEA,WAAK,qBAAqB,OAAO,SAAS,MAAM,SAAS;AAAA,QACxD;AAAA,UACC,OAAO,IAAI,SAAS,uBAAuB,4BAA4B;AAAA,UACvE,KAAK,6BAAM;AACV,iBAAK,sBAAsB,YAAY,iCAAiC,KAAK,EAAE,KAAK,MAAM;AACzF,mBAAK,qBAAqB,KAAK,IAAI,SAAS,oBAAoB,8DAA8D,CAAC;AAAA,YAChI,GAAG,CAAC,QAAQ;AACX,mBAAK,qBAAqB,MAAM,GAAG;AAAA,YACpC,CAAC;AAAA,UACF,GANK;AAAA,QAON;AAAA,MACD,GAAG,EAAE,gBAAgB,EAAE,IAAI,8CAA8C,EAAE,CAAC;AAAA,IAC7E;AAAA,EACD;AACD;AA/Ca,+BAAN;AAAA,EAMJ;AAAA,EACA;AAAA,GAPU;AAiDb,2BAA2B,6BAA6B,IAAI,8BAA8B,gCAAgC,gBAAgB;",
  "names": []
}
