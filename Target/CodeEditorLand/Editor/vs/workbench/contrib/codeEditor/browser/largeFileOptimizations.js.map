{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/codeEditor/browser/largeFileOptimizations.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from \"../../../../base/common/lifecycle.js\";\nimport * as path from \"../../../../base/common/path.js\";\nimport type { ICodeEditor } from \"../../../../editor/browser/editorBrowser.js\";\nimport {\n\tEditorContributionInstantiation,\n\tregisterEditorContribution,\n} from \"../../../../editor/browser/editorExtensions.js\";\nimport type { IEditorContribution } from \"../../../../editor/common/editorCommon.js\";\nimport * as nls from \"../../../../nls.js\";\nimport { IConfigurationService } from \"../../../../platform/configuration/common/configuration.js\";\nimport {\n\tINotificationService,\n\tSeverity,\n} from \"../../../../platform/notification/common/notification.js\";\n\n/**\n * Shows a message when opening a large file which has been memory optimized (and features disabled).\n */\nexport class LargeFileOptimizationsWarner\n\textends Disposable\n\timplements IEditorContribution\n{\n\tpublic static readonly ID = \"editor.contrib.largeFileOptimizationsWarner\";\n\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\t@INotificationService\n\t\tprivate readonly _notificationService: INotificationService,\n\t\t@IConfigurationService\n\t\tprivate readonly _configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(this._editor.onDidChangeModel((e) => this._update()));\n\t\tthis._update();\n\t}\n\n\tprivate _update(): void {\n\t\tconst model = this._editor.getModel();\n\t\tif (!model) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (model.isTooLargeForTokenization()) {\n\t\t\tconst message = nls.localize(\n\t\t\t\t{\n\t\t\t\t\tkey: \"largeFile\",\n\t\t\t\t\tcomment: [\"Variable 0 will be a file name.\"],\n\t\t\t\t},\n\t\t\t\t\"{0}: tokenization, wrapping, folding, codelens, word highlighting and sticky scroll have been turned off for this large file in order to reduce memory usage and avoid freezing or crashing.\",\n\t\t\t\tpath.basename(model.uri.path),\n\t\t\t);\n\n\t\t\tthis._notificationService.prompt(\n\t\t\t\tSeverity.Info,\n\t\t\t\tmessage,\n\t\t\t\t[\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel: nls.localize(\n\t\t\t\t\t\t\t\"removeOptimizations\",\n\t\t\t\t\t\t\t\"Forcefully Enable Features\",\n\t\t\t\t\t\t),\n\t\t\t\t\t\trun: () => {\n\t\t\t\t\t\t\tthis._configurationService\n\t\t\t\t\t\t\t\t.updateValue(\n\t\t\t\t\t\t\t\t\t`editor.largeFileOptimizations`,\n\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t\tthis._notificationService.info(\n\t\t\t\t\t\t\t\t\t\t\tnls.localize(\n\t\t\t\t\t\t\t\t\t\t\t\t\"reopenFilePrompt\",\n\t\t\t\t\t\t\t\t\t\t\t\t\"Please reopen file in order for this setting to take effect.\",\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t(err) => {\n\t\t\t\t\t\t\t\t\t\tthis._notificationService.error(err);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\t{\n\t\t\t\t\tneverShowAgain: {\n\t\t\t\t\t\tid: \"editor.contrib.largeFileOptimizationsWarner\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t}\n}\n\nregisterEditorContribution(\n\tLargeFileOptimizationsWarner.ID,\n\tLargeFileOptimizationsWarner,\n\tEditorContributionInstantiation.AfterFirstRender,\n);\n"],
  "mappings": ";;;;;;;;;;;;AAKA,SAAS,kBAAkB;AAC3B,YAAY,UAAU;AAEtB;AAAA,EACC;AAAA,EACA;AAAA,OACM;AAEP,YAAY,SAAS;AACrB,SAAS,6BAA6B;AACtC;AAAA,EACC;AAAA,EACA;AAAA,OACM;AAKA,IAAM,+BAAN,cACE,WAET;AAAA,EAGC,YACkB,SAEA,sBAEA,uBAChB;AACD,UAAM;AANW;AAEA;AAEA;AAIjB,SAAK,UAAU,KAAK,QAAQ,iBAAiB,CAAC,MAAM,KAAK,QAAQ,CAAC,CAAC;AACnE,SAAK,QAAQ;AAAA,EACd;AAAA,EAxCD,OA0BA;AAAA;AAAA;AAAA,EACC,OAAuB,KAAK;AAAA,EAepB,UAAgB;AACvB,UAAM,QAAQ,KAAK,QAAQ,SAAS;AACpC,QAAI,CAAC,OAAO;AACX;AAAA,IACD;AAEA,QAAI,MAAM,0BAA0B,GAAG;AACtC,YAAM,UAAU,IAAI;AAAA,QACnB;AAAA,UACC,KAAK;AAAA,UACL,SAAS,CAAC,iCAAiC;AAAA,QAC5C;AAAA,QACA;AAAA,QACA,KAAK,SAAS,MAAM,IAAI,IAAI;AAAA,MAC7B;AAEA,WAAK,qBAAqB;AAAA,QACzB,SAAS;AAAA,QACT;AAAA,QACA;AAAA,UACC;AAAA,YACC,OAAO,IAAI;AAAA,cACV;AAAA,cACA;AAAA,YACD;AAAA,YACA,KAAK,6BAAM;AACV,mBAAK,sBACH;AAAA,gBACA;AAAA,gBACA;AAAA,cACD,EACC;AAAA,gBACA,MAAM;AACL,uBAAK,qBAAqB;AAAA,oBACzB,IAAI;AAAA,sBACH;AAAA,sBACA;AAAA,oBACD;AAAA,kBACD;AAAA,gBACD;AAAA,gBACA,CAAC,QAAQ;AACR,uBAAK,qBAAqB,MAAM,GAAG;AAAA,gBACpC;AAAA,cACD;AAAA,YACF,GAnBK;AAAA,UAoBN;AAAA,QACD;AAAA,QACA;AAAA,UACC,gBAAgB;AAAA,YACf,IAAI;AAAA,UACL;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,EACD;AACD;AA1Ea,+BAAN;AAAA,EAQJ;AAAA,EAEA;AAAA,GAVU;AA4Eb;AAAA,EACC,6BAA6B;AAAA,EAC7B;AAAA,EACA,gCAAgC;AACjC;",
  "names": []
}
