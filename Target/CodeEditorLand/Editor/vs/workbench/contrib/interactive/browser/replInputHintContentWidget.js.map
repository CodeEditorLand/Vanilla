{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/interactive/browser/replInputHintContentWidget.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../base/browser/dom.js';\nimport { status } from '../../../../base/browser/ui/aria/aria.js';\nimport { KeybindingLabel } from '../../../../base/browser/ui/keybindingLabel/keybindingLabel.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { ResolvedKeybinding } from '../../../../base/common/keybindings.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { OS } from '../../../../base/common/platform.js';\nimport { ContentWidgetPositionPreference, ICodeEditor, IContentWidget, IContentWidgetPosition } from '../../../../editor/browser/editorBrowser.js';\nimport { ConfigurationChangedEvent, EditorOption } from '../../../../editor/common/config/editorOptions.js';\nimport { localize } from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { AccessibilityVerbositySettingId } from '../../accessibility/browser/accessibilityConfiguration.js';\nimport { InteractiveWindowSetting } from './interactiveCommon.js';\n\n\nexport class ReplInputHintContentWidget extends Disposable implements IContentWidget {\n\n\tprivate static readonly ID = 'replInput.widget.emptyHint';\n\n\tprivate domNode: HTMLElement | undefined;\n\tprivate ariaLabel: string = '';\n\n\tconstructor(\n\t\tprivate readonly editor: ICodeEditor,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IKeybindingService private readonly keybindingService: IKeybindingService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(this.editor.onDidChangeConfiguration((e: ConfigurationChangedEvent) => {\n\t\t\tif (this.domNode && e.hasChanged(EditorOption.fontInfo)) {\n\t\t\t\tthis.editor.applyFontInfo(this.domNode);\n\t\t\t}\n\t\t}));\n\t\tconst onDidFocusEditorText = Event.debounce(this.editor.onDidFocusEditorText, () => undefined, 500);\n\t\tthis._register(onDidFocusEditorText(() => {\n\t\t\tif (this.editor.hasTextFocus() && this.ariaLabel && configurationService.getValue(AccessibilityVerbositySettingId.ReplInputHint)) {\n\t\t\t\tstatus(this.ariaLabel);\n\t\t\t}\n\t\t}));\n\t\tthis._register(configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(InteractiveWindowSetting.executeWithShiftEnter)) {\n\t\t\t\tthis.setHint();\n\t\t\t}\n\t\t}));\n\t\tthis.editor.addContentWidget(this);\n\t}\n\n\tgetId(): string {\n\t\treturn ReplInputHintContentWidget.ID;\n\t}\n\n\tgetPosition(): IContentWidgetPosition | null {\n\t\treturn {\n\t\t\tposition: { lineNumber: 1, column: 1 },\n\t\t\tpreference: [ContentWidgetPositionPreference.EXACT]\n\t\t};\n\t}\n\n\tgetDomNode(): HTMLElement {\n\t\tif (!this.domNode) {\n\t\t\tthis.domNode = dom.$('.empty-editor-hint');\n\t\t\tthis.domNode.style.width = 'max-content';\n\t\t\tthis.domNode.style.paddingLeft = '4px';\n\n\t\t\tthis.setHint();\n\n\t\t\tthis._register(dom.addDisposableListener(this.domNode, 'click', () => {\n\t\t\t\tthis.editor.focus();\n\t\t\t}));\n\n\t\t\tthis.editor.applyFontInfo(this.domNode);\n\t\t}\n\n\t\treturn this.domNode;\n\t}\n\n\tprivate setHint() {\n\t\tif (!this.domNode) {\n\t\t\treturn;\n\t\t}\n\t\twhile (this.domNode.firstChild) {\n\t\t\tthis.domNode.removeChild(this.domNode.firstChild);\n\t\t}\n\n\t\tconst hintElement = dom.$('div.empty-hint-text');\n\t\thintElement.style.cursor = 'text';\n\t\thintElement.style.whiteSpace = 'nowrap';\n\n\t\tconst keybinding = this.getKeybinding();\n\t\tconst keybindingHintLabel = keybinding?.getLabel();\n\n\t\tif (keybinding && keybindingHintLabel) {\n\t\t\tconst actionPart = localize('emptyHintText', 'Press {0} to execute. ', keybindingHintLabel);\n\n\t\t\tconst [before, after] = actionPart.split(keybindingHintLabel).map((fragment) => {\n\t\t\t\tconst hintPart = dom.$('span', undefined, fragment);\n\t\t\t\thintPart.style.fontStyle = 'italic';\n\t\t\t\treturn hintPart;\n\t\t\t});\n\n\t\t\thintElement.appendChild(before);\n\n\t\t\tconst label = new KeybindingLabel(hintElement, OS);\n\t\t\tlabel.set(keybinding);\n\t\t\tlabel.element.style.width = 'min-content';\n\t\t\tlabel.element.style.display = 'inline';\n\n\t\t\thintElement.appendChild(after);\n\t\t\tthis.domNode.append(hintElement);\n\n\t\t\tthis.ariaLabel = actionPart.concat(localize('disableHint', ' Toggle {0} in settings to disable this hint.', AccessibilityVerbositySettingId.ReplInputHint));\n\t\t}\n\t}\n\n\tprivate getKeybinding() {\n\t\tconst keybindings = this.keybindingService.lookupKeybindings('interactive.execute');\n\t\tconst shiftEnterConfig = this.configurationService.getValue(InteractiveWindowSetting.executeWithShiftEnter);\n\t\tconst hasEnterChord = (kb: ResolvedKeybinding, modifier: string = '') => {\n\t\t\tconst chords = kb.getDispatchChords();\n\t\t\tconst chord = modifier + 'Enter';\n\t\t\tconst chordAlt = modifier + '[Enter]';\n\t\t\treturn chords.length === 1 && (chords[0] === chord || chords[0] === chordAlt);\n\t\t};\n\n\t\tif (shiftEnterConfig) {\n\t\t\tconst keybinding = keybindings.find(kb => hasEnterChord(kb, 'shift+'));\n\t\t\tif (keybinding) {\n\t\t\t\treturn keybinding;\n\t\t\t}\n\t\t} else {\n\t\t\tlet keybinding = keybindings.find(kb => hasEnterChord(kb));\n\t\t\tif (keybinding) {\n\t\t\t\treturn keybinding;\n\t\t\t}\n\t\t\tkeybinding = this.keybindingService.lookupKeybindings('python.execInREPLEnter')\n\t\t\t\t.find(kb => hasEnterChord(kb));\n\t\t\tif (keybinding) {\n\t\t\t\treturn keybinding;\n\t\t\t}\n\t\t}\n\n\t\treturn keybindings?.[0];\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tthis.editor.removeContentWidget(this);\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
