{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/output/common/outputChannelModelService.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { toLocalISOString } from \"../../../../base/common/date.js\";\nimport { joinPath } from \"../../../../base/common/resources.js\";\nimport type { URI } from \"../../../../base/common/uri.js\";\nimport type { ILanguageSelection } from \"../../../../editor/common/languages/language.js\";\nimport { IFileService } from \"../../../../platform/files/common/files.js\";\nimport {\n\tInstantiationType,\n\tregisterSingleton,\n} from \"../../../../platform/instantiation/common/extensions.js\";\nimport {\n\tIInstantiationService,\n\tcreateDecorator,\n} from \"../../../../platform/instantiation/common/instantiation.js\";\nimport { IWorkbenchEnvironmentService } from \"../../../services/environment/common/environmentService.js\";\nimport {\n\tDelegatedOutputChannelModel,\n\tFileOutputChannelModel,\n\ttype IOutputChannelModel,\n} from \"./outputChannelModel.js\";\n\nexport const IOutputChannelModelService =\n\tcreateDecorator<IOutputChannelModelService>(\"outputChannelModelService\");\n\nexport interface IOutputChannelModelService {\n\treadonly _serviceBrand: undefined;\n\n\tcreateOutputChannelModel(\n\t\tid: string,\n\t\tmodelUri: URI,\n\t\tlanguage: ILanguageSelection,\n\t\tfile?: URI,\n\t): IOutputChannelModel;\n}\n\nexport class OutputChannelModelService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate readonly outputLocation: URI;\n\n\tconstructor(\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService\n\t) {\n\t\tthis.outputLocation = joinPath(environmentService.windowLogsPath, `output_${toLocalISOString(new Date()).replace(/-|:|\\.\\d+Z$/g, '')}`);\n\t}\n\n\tcreateOutputChannelModel(\n\t\tid: string,\n\t\tmodelUri: URI,\n\t\tlanguage: ILanguageSelection,\n\t\tfile?: URI,\n\t): IOutputChannelModel {\n\t\treturn file\n\t\t\t? this.instantiationService.createInstance(\n\t\t\t\t\tFileOutputChannelModel,\n\t\t\t\t\tmodelUri,\n\t\t\t\t\tlanguage,\n\t\t\t\t\tfile,\n\t\t\t\t)\n\t\t\t: this.instantiationService.createInstance(\n\t\t\t\t\tDelegatedOutputChannelModel,\n\t\t\t\t\tid,\n\t\t\t\t\tmodelUri,\n\t\t\t\t\tlanguage,\n\t\t\t\t\tthis.outputDir,\n\t\t\t\t);\n\t}\n\n\tprivate _outputDir: Promise<URI> | null = null;\n\tprivate get outputDir(): Promise<URI> {\n\t\tif (!this._outputDir) {\n\t\t\tthis._outputDir = this.fileService\n\t\t\t\t.createFolder(this.outputLocation)\n\t\t\t\t.then(() => this.outputLocation);\n\t\t}\n\t\treturn this._outputDir;\n\t}\n}\n\nregisterSingleton(\n\tIOutputChannelModelService,\n\tOutputChannelModelService,\n\tInstantiationType.Delayed,\n);\n"],
  "mappings": ";;;;;;;;;;;;AAKA,SAAS,wBAAwB;AACjC,SAAS,gBAAgB;AAGzB,SAAS,oBAAoB;AAC7B;AAAA,EACC;AAAA,EACA;AAAA,OACM;AACP;AAAA,EACC;AAAA,EACA;AAAA,OACM;AACP,SAAS,oCAAoC;AAC7C;AAAA,EACC;AAAA,EACA;AAAA,OAEM;AAEA,MAAM,6BACZ,gBAA4C,2BAA2B;AAajE,IAAM,4BAAN,MAAgC;AAAA,EAKtC,YACgC,aACS,sBACV,oBAC7B;AAH8B;AACS;AAGxC,SAAK,iBAAiB,SAAS,mBAAmB,gBAAgB,UAAU,iBAAiB,oBAAI,KAAK,CAAC,EAAE,QAAQ,gBAAgB,EAAE,CAAC,EAAE;AAAA,EACvI;AAAA,EAlDD,OAuCuC;AAAA;AAAA;AAAA,EAGrB;AAAA,EAUjB,yBACC,IACA,UACA,UACA,MACsB;AACtB,WAAO,OACJ,KAAK,qBAAqB;AAAA,MAC1B;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACD,IACC,KAAK,qBAAqB;AAAA,MAC1B;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA,KAAK;AAAA,IACN;AAAA,EACH;AAAA,EAEQ,aAAkC;AAAA,EAC1C,IAAY,YAA0B;AACrC,QAAI,CAAC,KAAK,YAAY;AACrB,WAAK,aAAa,KAAK,YACrB,aAAa,KAAK,cAAc,EAChC,KAAK,MAAM,KAAK,cAAc;AAAA,IACjC;AACA,WAAO,KAAK;AAAA,EACb;AACD;AA5Ca,4BAAN;AAAA,EAMJ;AAAA,EACA;AAAA,EACA;AAAA,GARU;AA8Cb;AAAA,EACC;AAAA,EACA;AAAA,EACA,kBAAkB;AACnB;",
  "names": []
}
