var p=Object.defineProperty;var s=Object.getOwnPropertyDescriptor;var c=(r,i,n,t)=>{for(var e=t>1?void 0:t?s(i,n):i,u=r.length-1,l;u>=0;u--)(l=r[u])&&(e=(t?l(i,n,e):l(e))||e);return t&&e&&p(i,n,e),e},a=(r,i)=>(n,t)=>i(n,t,r);import{toLocalISOString as I}from"../../../../base/common/date.js";import{joinPath as d}from"../../../../base/common/resources.js";import"../../../../base/common/uri.js";import"../../../../editor/common/languages/language.js";import{IFileService as h}from"../../../../platform/files/common/files.js";import{InstantiationType as m,registerSingleton as v}from"../../../../platform/instantiation/common/extensions.js";import{createDecorator as S,IInstantiationService as f}from"../../../../platform/instantiation/common/instantiation.js";import{IWorkbenchEnvironmentService as g}from"../../../services/environment/common/environmentService.js";import{DelegatedOutputChannelModel as D,FileOutputChannelModel as L}from"./outputChannelModel.js";const C=S("outputChannelModelService");let o=class{constructor(i,n,t){this.fileService=i;this.instantiationService=n;this.outputLocation=d(t.windowLogsPath,`output_${I(new Date).replace(/-|:|\.\d+Z$/g,"")}`)}outputLocation;createOutputChannelModel(i,n,t,e){return e?this.instantiationService.createInstance(L,n,t,e):this.instantiationService.createInstance(D,i,n,t,this.outputDir)}_outputDir=null;get outputDir(){return this._outputDir||(this._outputDir=this.fileService.createFolder(this.outputLocation).then(()=>this.outputLocation)),this._outputDir}};o=c([a(0,h),a(1,f),a(2,g)],o),v(C,o,m.Delayed);export{C as IOutputChannelModelService,o as OutputChannelModelService};
