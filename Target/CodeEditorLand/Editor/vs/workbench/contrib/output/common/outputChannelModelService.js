var p=Object.defineProperty;var s=Object.getOwnPropertyDescriptor;var c=(r,i,n,t)=>{for(var e=t>1?void 0:t?s(i,n):i,u=r.length-1,l;u>=0;u--)(l=r[u])&&(e=(t?l(i,n,e):l(e))||e);return t&&e&&p(i,n,e),e},a=(r,i)=>(n,t)=>i(n,t,r);import{InstantiationType as I,registerSingleton as d}from"../../../../platform/instantiation/common/extensions.js";import{IWorkbenchEnvironmentService as h}from"../../../services/environment/common/environmentService.js";import{createDecorator as m,IInstantiationService as v}from"../../../../platform/instantiation/common/instantiation.js";import{IFileService as S}from"../../../../platform/files/common/files.js";import{toLocalISOString as f}from"../../../../base/common/date.js";import{joinPath as g}from"../../../../base/common/resources.js";import{DelegatedOutputChannelModel as D,FileOutputChannelModel as L}from"./outputChannelModel.js";const C=m("outputChannelModelService");let o=class{constructor(i,n,t){this.fileService=i;this.instantiationService=n;this.outputLocation=g(t.windowLogsPath,`output_${f(new Date).replace(/-|:|\.\d+Z$/g,"")}`)}outputLocation;createOutputChannelModel(i,n,t,e){return e?this.instantiationService.createInstance(L,n,t,e):this.instantiationService.createInstance(D,i,n,t,this.outputDir)}_outputDir=null;get outputDir(){return this._outputDir||(this._outputDir=this.fileService.createFolder(this.outputLocation).then(()=>this.outputLocation)),this._outputDir}};o=c([a(0,S),a(1,v),a(2,h)],o),d(C,o,I.Delayed);export{C as IOutputChannelModelService,o as OutputChannelModelService};
