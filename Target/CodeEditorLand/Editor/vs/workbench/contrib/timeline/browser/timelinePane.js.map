{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/timeline/browser/timelinePane.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport \"./media/timelinePane.css\";\nimport * as DOM from \"../../../../base/browser/dom.js\";\nimport { renderMarkdownAsPlaintext } from \"../../../../base/browser/markdownRenderer.js\";\nimport { ActionViewItem } from \"../../../../base/browser/ui/actionbar/actionViewItems.js\";\nimport {\n\tActionBar,\n\ttype IActionViewItemProvider,\n} from \"../../../../base/browser/ui/actionbar/actionbar.js\";\nimport type { AriaRole } from \"../../../../base/browser/ui/aria/aria.js\";\nimport type { IHoverDelegate } from \"../../../../base/browser/ui/hover/hoverDelegate.js\";\nimport { getDefaultHoverDelegate } from \"../../../../base/browser/ui/hover/hoverDelegateFactory.js\";\nimport { IconLabel } from \"../../../../base/browser/ui/iconLabel/iconLabel.js\";\nimport type {\n\tIIdentityProvider,\n\tIKeyboardNavigationLabelProvider,\n\tIListVirtualDelegate,\n} from \"../../../../base/browser/ui/list/list.js\";\nimport type {\n\tITreeContextMenuEvent,\n\tITreeElement,\n\tITreeNode,\n\tITreeRenderer,\n} from \"../../../../base/browser/ui/tree/tree.js\";\nimport { ActionRunner, type IAction } from \"../../../../base/common/actions.js\";\nimport { CancellationTokenSource } from \"../../../../base/common/cancellation.js\";\nimport { Codicon } from \"../../../../base/common/codicons.js\";\nimport { fromNow } from \"../../../../base/common/date.js\";\nimport { debounce } from \"../../../../base/common/decorators.js\";\nimport { Emitter, type Event } from \"../../../../base/common/event.js\";\nimport {\n\ttype FuzzyScore,\n\tcreateMatches,\n} from \"../../../../base/common/filters.js\";\nimport { Iterable } from \"../../../../base/common/iterator.js\";\nimport {\n\tDisposable,\n\tDisposableStore,\n\ttype IDisposable,\n} from \"../../../../base/common/lifecycle.js\";\nimport { MarshalledId } from \"../../../../base/common/marshallingIds.js\";\nimport { Schemas } from \"../../../../base/common/network.js\";\nimport { escapeRegExpCharacters } from \"../../../../base/common/strings.js\";\nimport { ThemeIcon } from \"../../../../base/common/themables.js\";\nimport { isString } from \"../../../../base/common/types.js\";\nimport { URI } from \"../../../../base/common/uri.js\";\nimport { localize, localize2 } from \"../../../../nls.js\";\nimport type { ILocalizedString } from \"../../../../platform/action/common/action.js\";\nimport {\n\tcreateActionViewItem,\n\tcreateAndFillInContextMenuActions,\n} from \"../../../../platform/actions/browser/menuEntryActionViewItem.js\";\nimport {\n\tAction2,\n\tIMenuService,\n\tMenuId,\n\tMenuRegistry,\n\tregisterAction2,\n} from \"../../../../platform/actions/common/actions.js\";\nimport {\n\tCommandsRegistry,\n\tICommandService,\n} from \"../../../../platform/commands/common/commands.js\";\nimport {\n\ttype IConfigurationChangeEvent,\n\tIConfigurationService,\n} from \"../../../../platform/configuration/common/configuration.js\";\nimport {\n\tContextKeyExpr,\n\ttype IContextKey,\n\tIContextKeyService,\n\tRawContextKey,\n} from \"../../../../platform/contextkey/common/contextkey.js\";\nimport { IContextMenuService } from \"../../../../platform/contextview/browser/contextView.js\";\nimport { IHoverService } from \"../../../../platform/hover/browser/hover.js\";\nimport {\n\tIInstantiationService,\n\ttype ServicesAccessor,\n} from \"../../../../platform/instantiation/common/instantiation.js\";\nimport { IKeybindingService } from \"../../../../platform/keybinding/common/keybinding.js\";\nimport { ILabelService } from \"../../../../platform/label/common/label.js\";\nimport { WorkbenchObjectTree } from \"../../../../platform/list/browser/listService.js\";\nimport { IOpenerService } from \"../../../../platform/opener/common/opener.js\";\nimport { IProgressService } from \"../../../../platform/progress/common/progress.js\";\nimport {\n\tIStorageService,\n\tStorageScope,\n\tStorageTarget,\n} from \"../../../../platform/storage/common/storage.js\";\nimport { ITelemetryService } from \"../../../../platform/telemetry/common/telemetry.js\";\nimport { registerIcon } from \"../../../../platform/theme/common/iconRegistry.js\";\nimport { ColorScheme } from \"../../../../platform/theme/common/theme.js\";\nimport { IThemeService } from \"../../../../platform/theme/common/themeService.js\";\nimport { IUriIdentityService } from \"../../../../platform/uriIdentity/common/uriIdentity.js\";\nimport {\n\tAPI_OPEN_DIFF_EDITOR_COMMAND_ID,\n\tAPI_OPEN_EDITOR_COMMAND_ID,\n} from \"../../../browser/parts/editor/editorCommands.js\";\nimport {\n\ttype IViewPaneOptions,\n\tViewPane,\n} from \"../../../browser/parts/views/viewPane.js\";\nimport {\n\tEditorResourceAccessor,\n\tSideBySideEditor,\n} from \"../../../common/editor.js\";\nimport { IViewDescriptorService } from \"../../../common/views.js\";\nimport { IEditorService } from \"../../../services/editor/common/editorService.js\";\nimport { IExtensionService } from \"../../../services/extensions/common/extensions.js\";\nimport {\n\tITimelineService,\n\ttype Timeline,\n\ttype TimelineChangeEvent,\n\ttype TimelineItem,\n\ttype TimelineOptions,\n\ttype TimelineProvidersChangeEvent,\n\ttype TimelineRequest,\n} from \"../common/timeline.js\";\n\nconst ItemHeight = 22;\n\ntype TreeElement = TimelineItem | LoadMoreCommand;\n\nfunction isLoadMoreCommand(\n\titem: TreeElement | undefined,\n): item is LoadMoreCommand {\n\treturn item instanceof LoadMoreCommand;\n}\n\nfunction isTimelineItem(item: TreeElement | undefined): item is TimelineItem {\n\treturn !!item && !item.handle.startsWith(\"vscode-command:\");\n}\n\nfunction updateRelativeTime(\n\titem: TimelineItem,\n\tlastRelativeTime: string | undefined,\n): string | undefined {\n\titem.relativeTime = isTimelineItem(item)\n\t\t? fromNow(item.timestamp)\n\t\t: undefined;\n\titem.relativeTimeFullWord = isTimelineItem(item)\n\t\t? fromNow(item.timestamp, false, true)\n\t\t: undefined;\n\tif (\n\t\tlastRelativeTime === undefined ||\n\t\titem.relativeTime !== lastRelativeTime\n\t) {\n\t\tlastRelativeTime = item.relativeTime;\n\t\titem.hideRelativeTime = false;\n\t} else {\n\t\titem.hideRelativeTime = true;\n\t}\n\n\treturn lastRelativeTime;\n}\n\ninterface TimelineActionContext {\n\turi: URI | undefined;\n\titem: TreeElement;\n}\n\nclass TimelineAggregate {\n\treadonly items: TimelineItem[];\n\treadonly source: string;\n\n\tlastRenderedIndex: number;\n\n\tconstructor(timeline: Timeline) {\n\t\tthis.source = timeline.source;\n\t\tthis.items = timeline.items;\n\t\tthis._cursor = timeline.paging?.cursor;\n\t\tthis.lastRenderedIndex = -1;\n\t}\n\n\tprivate _cursor?: string;\n\tget cursor(): string | undefined {\n\t\treturn this._cursor;\n\t}\n\n\tget more(): boolean {\n\t\treturn this._cursor !== undefined;\n\t}\n\n\tget newest(): TimelineItem | undefined {\n\t\treturn this.items[0];\n\t}\n\n\tget oldest(): TimelineItem | undefined {\n\t\treturn this.items[this.items.length - 1];\n\t}\n\n\tadd(timeline: Timeline, options: TimelineOptions) {\n\t\tlet updated = false;\n\n\t\tif (timeline.items.length !== 0 && this.items.length !== 0) {\n\t\t\tupdated = true;\n\n\t\t\tconst ids = new Set();\n\t\t\tconst timestamps = new Set();\n\n\t\t\tfor (const item of timeline.items) {\n\t\t\t\tif (item.id === undefined) {\n\t\t\t\t\ttimestamps.add(item.timestamp);\n\t\t\t\t} else {\n\t\t\t\t\tids.add(item.id);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Remove any duplicate items\n\t\t\tlet i = this.items.length;\n\t\t\tlet item;\n\t\t\twhile (i--) {\n\t\t\t\titem = this.items[i];\n\t\t\t\tif (\n\t\t\t\t\t(item.id !== undefined && ids.has(item.id)) ||\n\t\t\t\t\ttimestamps.has(item.timestamp)\n\t\t\t\t) {\n\t\t\t\t\tthis.items.splice(i, 1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t(timeline.items[timeline.items.length - 1]?.timestamp ?? 0) >=\n\t\t\t\t(this.newest?.timestamp ?? 0)\n\t\t\t) {\n\t\t\t\tthis.items.splice(0, 0, ...timeline.items);\n\t\t\t} else {\n\t\t\t\tthis.items.push(...timeline.items);\n\t\t\t}\n\t\t} else if (timeline.items.length !== 0) {\n\t\t\tupdated = true;\n\n\t\t\tthis.items.push(...timeline.items);\n\t\t}\n\n\t\t// If we are not requesting more recent items than we have, then update the cursor\n\t\tif (options.cursor !== undefined || typeof options.limit !== \"object\") {\n\t\t\tthis._cursor = timeline.paging?.cursor;\n\t\t}\n\n\t\tif (updated) {\n\t\t\tthis.items.sort(\n\t\t\t\t(a, b) =>\n\t\t\t\t\tb.timestamp - a.timestamp ||\n\t\t\t\t\t(a.source === undefined\n\t\t\t\t\t\t? b.source === undefined\n\t\t\t\t\t\t\t? 0\n\t\t\t\t\t\t\t: 1\n\t\t\t\t\t\t: b.source === undefined\n\t\t\t\t\t\t\t? -1\n\t\t\t\t\t\t\t: b.source.localeCompare(a.source, undefined, {\n\t\t\t\t\t\t\t\t\tnumeric: true,\n\t\t\t\t\t\t\t\t\tsensitivity: \"base\",\n\t\t\t\t\t\t\t\t})),\n\t\t\t);\n\t\t}\n\n\t\treturn updated;\n\t}\n\n\tprivate _stale = false;\n\tget stale() {\n\t\treturn this._stale;\n\t}\n\n\tprivate _requiresReset = false;\n\tget requiresReset(): boolean {\n\t\treturn this._requiresReset;\n\t}\n\n\tinvalidate(requiresReset: boolean) {\n\t\tthis._stale = true;\n\t\tthis._requiresReset = requiresReset;\n\t}\n}\n\nclass LoadMoreCommand {\n\treadonly handle = \"vscode-command:loadMore\";\n\treadonly timestamp = 0;\n\treadonly description = undefined;\n\treadonly tooltip = undefined;\n\treadonly contextValue = undefined;\n\t// Make things easier for duck typing\n\treadonly id = undefined;\n\treadonly icon = undefined;\n\treadonly iconDark = undefined;\n\treadonly source = undefined;\n\treadonly relativeTime = undefined;\n\treadonly relativeTimeFullWord = undefined;\n\treadonly hideRelativeTime = undefined;\n\n\tconstructor(loading: boolean) {\n\t\tthis._loading = loading;\n\t}\n\tprivate _loading = false;\n\tget loading(): boolean {\n\t\treturn this._loading;\n\t}\n\tset loading(value: boolean) {\n\t\tthis._loading = value;\n\t}\n\n\tget ariaLabel() {\n\t\treturn this.label;\n\t}\n\n\tget label() {\n\t\treturn this.loading\n\t\t\t? localize(\"timeline.loadingMore\", \"Loading...\")\n\t\t\t: localize(\"timeline.loadMore\", \"Load more\");\n\t}\n\n\tget themeIcon(): ThemeIcon | undefined {\n\t\treturn undefined; //this.loading ? { id: 'sync~spin' } : undefined;\n\t}\n}\n\nexport const TimelineFollowActiveEditorContext = new RawContextKey<boolean>(\n\t\"timelineFollowActiveEditor\",\n\ttrue,\n\ttrue,\n);\nexport const TimelineExcludeSources = new RawContextKey<string>(\n\t\"timelineExcludeSources\",\n\t\"[]\",\n\ttrue,\n);\n\nexport class TimelinePane extends ViewPane {\n\tstatic readonly TITLE: ILocalizedString = localize2(\"timeline\", \"Timeline\");\n\n\tprivate $container!: HTMLElement;\n\tprivate $message!: HTMLDivElement;\n\tprivate $tree!: HTMLDivElement;\n\tprivate tree!: WorkbenchObjectTree<TreeElement, FuzzyScore>;\n\tprivate treeRenderer: TimelineTreeRenderer | undefined;\n\tprivate commands: TimelinePaneCommands;\n\tprivate visibilityDisposables: DisposableStore | undefined;\n\n\tprivate followActiveEditorContext: IContextKey<boolean>;\n\tprivate timelineExcludeSourcesContext: IContextKey<string>;\n\n\tprivate excludedSources: Set<string>;\n\tprivate pendingRequests = new Map<string, TimelineRequest>();\n\tprivate timelinesBySource = new Map<string, TimelineAggregate>();\n\n\tprivate uri: URI | undefined;\n\n\tconstructor(\n\t\toptions: IViewPaneOptions,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IEditorService protected editorService: IEditorService,\n\t\t@ICommandService protected commandService: ICommandService,\n\t\t@IProgressService private readonly progressService: IProgressService,\n\t\t@ITimelineService protected timelineService: ITimelineService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IHoverService hoverService: IHoverService,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@IUriIdentityService\n\t\tprivate readonly uriIdentityService: IUriIdentityService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t) {\n\t\tsuper(\n\t\t\t{ ...options, titleMenuId: MenuId.TimelineTitle },\n\t\t\tkeybindingService,\n\t\t\tcontextMenuService,\n\t\t\tconfigurationService,\n\t\t\tcontextKeyService,\n\t\t\tviewDescriptorService,\n\t\t\tinstantiationService,\n\t\t\topenerService,\n\t\t\tthemeService,\n\t\t\ttelemetryService,\n\t\t\thoverService,\n\t\t);\n\n\t\tthis.commands = this._register(\n\t\t\tthis.instantiationService.createInstance(\n\t\t\t\tTimelinePaneCommands,\n\t\t\t\tthis,\n\t\t\t),\n\t\t);\n\n\t\tthis.followActiveEditorContext =\n\t\t\tTimelineFollowActiveEditorContext.bindTo(this.contextKeyService);\n\t\tthis.timelineExcludeSourcesContext = TimelineExcludeSources.bindTo(\n\t\t\tthis.contextKeyService,\n\t\t);\n\n\t\tconst excludedSourcesString = storageService.get(\n\t\t\t\"timeline.excludeSources\",\n\t\t\tStorageScope.PROFILE,\n\t\t\t\"[]\",\n\t\t);\n\t\tthis.timelineExcludeSourcesContext.set(excludedSourcesString);\n\t\tthis.excludedSources = new Set(JSON.parse(excludedSourcesString));\n\n\t\tthis._register(\n\t\t\tstorageService.onDidChangeValue(\n\t\t\t\tStorageScope.PROFILE,\n\t\t\t\t\"timeline.excludeSources\",\n\t\t\t\tthis._register(new DisposableStore()),\n\t\t\t)(this.onStorageServiceChanged, this),\n\t\t);\n\t\tthis._register(\n\t\t\tconfigurationService.onDidChangeConfiguration(\n\t\t\t\tthis.onConfigurationChanged,\n\t\t\t\tthis,\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\ttimelineService.onDidChangeProviders(this.onProvidersChanged, this),\n\t\t);\n\t\tthis._register(\n\t\t\ttimelineService.onDidChangeTimeline(this.onTimelineChanged, this),\n\t\t);\n\t\tthis._register(\n\t\t\ttimelineService.onDidChangeUri((uri) => this.setUri(uri), this),\n\t\t);\n\t}\n\n\tprivate _followActiveEditor = true;\n\tget followActiveEditor(): boolean {\n\t\treturn this._followActiveEditor;\n\t}\n\tset followActiveEditor(value: boolean) {\n\t\tif (this._followActiveEditor === value) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._followActiveEditor = value;\n\t\tthis.followActiveEditorContext.set(value);\n\n\t\tthis.updateFilename(this._filename);\n\n\t\tif (value) {\n\t\t\tthis.onActiveEditorChanged();\n\t\t}\n\t}\n\n\tprivate _pageOnScroll: boolean | undefined;\n\tget pageOnScroll() {\n\t\tif (this._pageOnScroll === undefined) {\n\t\t\tthis._pageOnScroll =\n\t\t\t\tthis.configurationService.getValue<boolean | null | undefined>(\n\t\t\t\t\t\"timeline.pageOnScroll\",\n\t\t\t\t) ?? false;\n\t\t}\n\n\t\treturn this._pageOnScroll;\n\t}\n\n\tget pageSize() {\n\t\tlet pageSize = this.configurationService.getValue<\n\t\t\tnumber | null | undefined\n\t\t>(\"timeline.pageSize\");\n\t\tif (pageSize === undefined || pageSize === null) {\n\t\t\t// If we are paging when scrolling, then add an extra item to the end to make sure the \"Load more\" item is out of view\n\t\t\tpageSize = Math.max(\n\t\t\t\t20,\n\t\t\t\tMath.floor(\n\t\t\t\t\t(this.tree?.renderHeight ?? 0 / ItemHeight) +\n\t\t\t\t\t\t(this.pageOnScroll ? 1 : -1),\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\t\treturn pageSize;\n\t}\n\n\treset() {\n\t\tthis.loadTimeline(true);\n\t}\n\n\tsetUri(uri: URI) {\n\t\tthis.setUriCore(uri, true);\n\t}\n\n\tprivate setUriCore(uri: URI | undefined, disableFollowing: boolean) {\n\t\tif (disableFollowing) {\n\t\t\tthis.followActiveEditor = false;\n\t\t}\n\n\t\tthis.uri = uri;\n\t\tthis.updateFilename(\n\t\t\turi ? this.labelService.getUriBasenameLabel(uri) : undefined,\n\t\t);\n\t\tthis.treeRenderer?.setUri(uri);\n\t\tthis.loadTimeline(true);\n\t}\n\n\tprivate onStorageServiceChanged() {\n\t\tconst excludedSourcesString = this.storageService.get(\n\t\t\t\"timeline.excludeSources\",\n\t\t\tStorageScope.PROFILE,\n\t\t\t\"[]\",\n\t\t);\n\t\tthis.timelineExcludeSourcesContext.set(excludedSourcesString);\n\t\tthis.excludedSources = new Set(JSON.parse(excludedSourcesString));\n\n\t\tconst missing = this.timelineService\n\t\t\t.getSources()\n\t\t\t.filter(\n\t\t\t\t({ id }) =>\n\t\t\t\t\t!this.excludedSources.has(id) &&\n\t\t\t\t\t!this.timelinesBySource.has(id),\n\t\t\t);\n\t\tif (missing.length !== 0) {\n\t\t\tthis.loadTimeline(\n\t\t\t\ttrue,\n\t\t\t\tmissing.map(({ id }) => id),\n\t\t\t);\n\t\t} else {\n\t\t\tthis.refresh();\n\t\t}\n\t}\n\n\tprivate onConfigurationChanged(e: IConfigurationChangeEvent) {\n\t\tif (e.affectsConfiguration(\"timeline.pageOnScroll\")) {\n\t\t\tthis._pageOnScroll = undefined;\n\t\t}\n\t}\n\n\tprivate onActiveEditorChanged() {\n\t\tif (!this.followActiveEditor || !this.isExpanded()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst uri = EditorResourceAccessor.getOriginalUri(\n\t\t\tthis.editorService.activeEditor,\n\t\t\t{ supportSideBySide: SideBySideEditor.PRIMARY },\n\t\t);\n\n\t\tif (\n\t\t\t(this.uriIdentityService.extUri.isEqual(uri, this.uri) &&\n\t\t\t\turi !== undefined) ||\n\t\t\t// Fallback to match on fsPath if we are dealing with files or git schemes\n\t\t\t(uri?.fsPath === this.uri?.fsPath &&\n\t\t\t\t(uri?.scheme === Schemas.file || uri?.scheme === \"git\") &&\n\t\t\t\t(this.uri?.scheme === Schemas.file ||\n\t\t\t\t\tthis.uri?.scheme === \"git\"))\n\t\t) {\n\t\t\t// If the uri hasn't changed, make sure we have valid caches\n\t\t\tfor (const source of this.timelineService.getSources()) {\n\t\t\t\tif (this.excludedSources.has(source.id)) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst timeline = this.timelinesBySource.get(source.id);\n\t\t\t\tif (timeline !== undefined && !timeline.stale) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (timeline !== undefined) {\n\t\t\t\t\tthis.updateTimeline(timeline, timeline.requiresReset);\n\t\t\t\t} else {\n\t\t\t\t\tthis.loadTimelineForSource(source.id, uri, true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setUriCore(uri, false);\n\t}\n\n\tprivate onProvidersChanged(e: TimelineProvidersChangeEvent) {\n\t\tif (e.removed) {\n\t\t\tfor (const source of e.removed) {\n\t\t\t\tthis.timelinesBySource.delete(source);\n\t\t\t}\n\n\t\t\tthis.refresh();\n\t\t}\n\n\t\tif (e.added) {\n\t\t\tthis.loadTimeline(true, e.added);\n\t\t}\n\t}\n\n\tprivate onTimelineChanged(e: TimelineChangeEvent) {\n\t\tif (\n\t\t\te?.uri === undefined ||\n\t\t\tthis.uriIdentityService.extUri.isEqual(URI.revive(e.uri), this.uri)\n\t\t) {\n\t\t\tconst timeline = this.timelinesBySource.get(e.id);\n\t\t\tif (timeline === undefined) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.isBodyVisible()) {\n\t\t\t\tthis.updateTimeline(timeline, e.reset);\n\t\t\t} else {\n\t\t\t\ttimeline.invalidate(e.reset);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _filename: string | undefined;\n\tupdateFilename(filename: string | undefined) {\n\t\tthis._filename = filename;\n\t\tif (this.followActiveEditor || !filename) {\n\t\t\tthis.updateTitleDescription(filename);\n\t\t} else {\n\t\t\tthis.updateTitleDescription(`${filename} (pinned)`);\n\t\t}\n\t}\n\n\tprivate _message: string | undefined;\n\tget message(): string | undefined {\n\t\treturn this._message;\n\t}\n\n\tset message(message: string | undefined) {\n\t\tthis._message = message;\n\t\tthis.updateMessage();\n\t}\n\n\tprivate updateMessage(): void {\n\t\tif (this._message !== undefined) {\n\t\t\tthis.showMessage(this._message);\n\t\t} else {\n\t\t\tthis.hideMessage();\n\t\t}\n\t}\n\n\tprivate showMessage(message: string): void {\n\t\tif (!this.$message) {\n\t\t\treturn;\n\t\t}\n\t\tthis.$message.classList.remove(\"hide\");\n\t\tthis.resetMessageElement();\n\n\t\tthis.$message.textContent = message;\n\t}\n\n\tprivate hideMessage(): void {\n\t\tthis.resetMessageElement();\n\t\tthis.$message.classList.add(\"hide\");\n\t}\n\n\tprivate resetMessageElement(): void {\n\t\tDOM.clearNode(this.$message);\n\t}\n\n\tprivate _isEmpty = true;\n\tprivate _maxItemCount = 0;\n\n\tprivate _visibleItemCount = 0;\n\tprivate get hasVisibleItems() {\n\t\treturn this._visibleItemCount > 0;\n\t}\n\n\tprivate clear(cancelPending: boolean) {\n\t\tthis._visibleItemCount = 0;\n\t\tthis._maxItemCount = this.pageSize;\n\t\tthis.timelinesBySource.clear();\n\n\t\tif (cancelPending) {\n\t\t\tfor (const { tokenSource } of this.pendingRequests.values()) {\n\t\t\t\ttokenSource.dispose(true);\n\t\t\t}\n\n\t\t\tthis.pendingRequests.clear();\n\n\t\t\tif (!this.isBodyVisible() && this.tree) {\n\t\t\t\tthis.tree.setChildren(null, undefined);\n\t\t\t\tthis._isEmpty = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async loadTimeline(reset: boolean, sources?: string[]) {\n\t\t// If we have no source, we are resetting all sources, so cancel everything in flight and reset caches\n\t\tif (sources === undefined) {\n\t\t\tif (reset) {\n\t\t\t\tthis.clear(true);\n\t\t\t}\n\n\t\t\t// TODO@eamodio: Are these the right the list of schemes to exclude? Is there a better way?\n\t\t\tif (\n\t\t\t\tthis.uri?.scheme === Schemas.vscodeSettings ||\n\t\t\t\tthis.uri?.scheme === Schemas.webviewPanel ||\n\t\t\t\tthis.uri?.scheme === Schemas.walkThrough\n\t\t\t) {\n\t\t\t\tthis.uri = undefined;\n\n\t\t\t\tthis.clear(false);\n\t\t\t\tthis.refresh();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this._isEmpty && this.uri !== undefined) {\n\t\t\t\tthis.setLoadingUriMessage();\n\t\t\t}\n\t\t}\n\n\t\tif (this.uri === undefined) {\n\t\t\tthis.clear(false);\n\t\t\tthis.refresh();\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.isBodyVisible()) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet hasPendingRequests = false;\n\n\t\tfor (const source of sources ??\n\t\t\tthis.timelineService.getSources().map((s) => s.id)) {\n\t\t\tconst requested = this.loadTimelineForSource(\n\t\t\t\tsource,\n\t\t\t\tthis.uri,\n\t\t\t\treset,\n\t\t\t);\n\t\t\tif (requested) {\n\t\t\t\thasPendingRequests = true;\n\t\t\t}\n\t\t}\n\n\t\tif (!hasPendingRequests) {\n\t\t\tthis.refresh();\n\t\t} else if (this._isEmpty) {\n\t\t\tthis.setLoadingUriMessage();\n\t\t}\n\t}\n\n\tprivate loadTimelineForSource(\n\t\tsource: string,\n\t\turi: URI,\n\t\treset: boolean,\n\t\toptions?: TimelineOptions,\n\t) {\n\t\tif (this.excludedSources.has(source)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst timeline = this.timelinesBySource.get(source);\n\n\t\t// If we are paging, and there are no more items or we have enough cached items to cover the next page,\n\t\t// don't bother querying for more\n\t\tif (\n\t\t\t!reset &&\n\t\t\toptions?.cursor !== undefined &&\n\t\t\ttimeline !== undefined &&\n\t\t\t(!timeline?.more ||\n\t\t\t\ttimeline.items.length >\n\t\t\t\t\ttimeline.lastRenderedIndex + this.pageSize)\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (options === undefined) {\n\t\t\tif (\n\t\t\t\t!reset &&\n\t\t\t\ttimeline !== undefined &&\n\t\t\t\ttimeline.items.length > 0 &&\n\t\t\t\t!timeline.more\n\t\t\t) {\n\t\t\t\t// If we are not resetting, have item(s), and already know there are no more to fetch, we're done here\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\toptions = {\n\t\t\t\tcursor: reset ? undefined : timeline?.cursor,\n\t\t\t\tlimit: this.pageSize,\n\t\t\t};\n\t\t}\n\n\t\tlet request = this.pendingRequests.get(source);\n\t\tif (request !== undefined) {\n\t\t\toptions.cursor = request.options.cursor;\n\n\t\t\t// TODO@eamodio deal with concurrent requests better\n\t\t\tif (typeof options.limit === \"number\") {\n\t\t\t\tif (typeof request.options.limit === \"number\") {\n\t\t\t\t\toptions.limit += request.options.limit;\n\t\t\t\t} else {\n\t\t\t\t\toptions.limit = request.options.limit;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\trequest?.tokenSource.dispose(true);\n\t\toptions.cacheResults = true;\n\t\toptions.resetCache = reset;\n\t\trequest = this.timelineService.getTimeline(\n\t\t\tsource,\n\t\t\turi,\n\t\t\toptions,\n\t\t\tnew CancellationTokenSource(),\n\t\t);\n\n\t\tif (request === undefined) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.pendingRequests.set(source, request);\n\t\trequest.tokenSource.token.onCancellationRequested(() =>\n\t\t\tthis.pendingRequests.delete(source),\n\t\t);\n\n\t\tthis.handleRequest(request);\n\n\t\treturn true;\n\t}\n\n\tprivate updateTimeline(timeline: TimelineAggregate, reset: boolean) {\n\t\tif (reset) {\n\t\t\tthis.timelinesBySource.delete(timeline.source);\n\t\t\t// Override the limit, to re-query for all our existing cached (possibly visible) items to keep visual continuity\n\t\t\tconst { oldest } = timeline;\n\t\t\tthis.loadTimelineForSource(\n\t\t\t\ttimeline.source,\n\t\t\t\tthis.uri!,\n\t\t\t\ttrue,\n\t\t\t\toldest !== undefined\n\t\t\t\t\t? { limit: { timestamp: oldest.timestamp, id: oldest.id } }\n\t\t\t\t\t: undefined,\n\t\t\t);\n\t\t} else {\n\t\t\t// Override the limit, to query for any newer items\n\t\t\tconst { newest } = timeline;\n\t\t\tthis.loadTimelineForSource(\n\t\t\t\ttimeline.source,\n\t\t\t\tthis.uri!,\n\t\t\t\tfalse,\n\t\t\t\tnewest !== undefined\n\t\t\t\t\t? { limit: { timestamp: newest.timestamp, id: newest.id } }\n\t\t\t\t\t: { limit: this.pageSize },\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate _pendingRefresh = false;\n\n\tprivate async handleRequest(request: TimelineRequest) {\n\t\tlet response: Timeline | undefined;\n\t\ttry {\n\t\t\tresponse = await this.progressService.withProgress(\n\t\t\t\t{ location: this.id },\n\t\t\t\t() => request.result,\n\t\t\t);\n\t\t} finally {\n\t\t\tthis.pendingRequests.delete(request.source);\n\t\t}\n\n\t\tif (\n\t\t\tresponse === undefined ||\n\t\t\trequest.tokenSource.token.isCancellationRequested ||\n\t\t\trequest.uri !== this.uri\n\t\t) {\n\t\t\tif (this.pendingRequests.size === 0 && this._pendingRefresh) {\n\t\t\t\tthis.refresh();\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst source = request.source;\n\n\t\tlet updated = false;\n\t\tconst timeline = this.timelinesBySource.get(source);\n\t\tif (timeline === undefined) {\n\t\t\tthis.timelinesBySource.set(source, new TimelineAggregate(response));\n\t\t\tupdated = true;\n\t\t} else {\n\t\t\tupdated = timeline.add(response, request.options);\n\t\t}\n\n\t\tif (updated) {\n\t\t\tthis._pendingRefresh = true;\n\n\t\t\t// If we have visible items already and there are other pending requests, debounce for a bit to wait for other requests\n\t\t\tif (this.hasVisibleItems && this.pendingRequests.size !== 0) {\n\t\t\t\tthis.refreshDebounced();\n\t\t\t} else {\n\t\t\t\tthis.refresh();\n\t\t\t}\n\t\t} else if (this.pendingRequests.size === 0) {\n\t\t\tif (this._pendingRefresh) {\n\t\t\t\tthis.refresh();\n\t\t\t} else {\n\t\t\t\tthis.tree.rerender();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate *getItems(): Generator<ITreeElement<TreeElement>, any, any> {\n\t\tlet more = false;\n\n\t\tif (this.uri === undefined || this.timelinesBySource.size === 0) {\n\t\t\tthis._visibleItemCount = 0;\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst maxCount = this._maxItemCount;\n\t\tlet count = 0;\n\n\t\tif (this.timelinesBySource.size === 1) {\n\t\t\tconst [source, timeline] = Iterable.first(this.timelinesBySource)!;\n\n\t\t\ttimeline.lastRenderedIndex = -1;\n\n\t\t\tif (this.excludedSources.has(source)) {\n\t\t\t\tthis._visibleItemCount = 0;\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (timeline.items.length !== 0) {\n\t\t\t\t// If we have any items, just say we have one for now -- the real count will be updated below\n\t\t\t\tthis._visibleItemCount = 1;\n\t\t\t}\n\n\t\t\tmore = timeline.more;\n\n\t\t\tlet lastRelativeTime: string | undefined;\n\t\t\tfor (const item of timeline.items) {\n\t\t\t\titem.relativeTime = undefined;\n\t\t\t\titem.hideRelativeTime = undefined;\n\n\t\t\t\tcount++;\n\t\t\t\tif (count > maxCount) {\n\t\t\t\t\tmore = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tlastRelativeTime = updateRelativeTime(item, lastRelativeTime);\n\t\t\t\tyield { element: item };\n\t\t\t}\n\n\t\t\ttimeline.lastRenderedIndex = count - 1;\n\t\t} else {\n\t\t\tconst sources: {\n\t\t\t\ttimeline: TimelineAggregate;\n\t\t\t\titerator: IterableIterator<TimelineItem>;\n\t\t\t\tnextItem: IteratorResult<TimelineItem, undefined>;\n\t\t\t}[] = [];\n\n\t\t\tlet hasAnyItems = false;\n\t\t\tlet mostRecentEnd = 0;\n\n\t\t\tfor (const [source, timeline] of this.timelinesBySource) {\n\t\t\t\ttimeline.lastRenderedIndex = -1;\n\n\t\t\t\tif (this.excludedSources.has(source) || timeline.stale) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (timeline.items.length !== 0) {\n\t\t\t\t\thasAnyItems = true;\n\t\t\t\t}\n\n\t\t\t\tif (timeline.more) {\n\t\t\t\t\tmore = true;\n\n\t\t\t\t\tconst last =\n\t\t\t\t\t\ttimeline.items[\n\t\t\t\t\t\t\tMath.min(maxCount, timeline.items.length - 1)\n\t\t\t\t\t\t];\n\t\t\t\t\tif (last.timestamp > mostRecentEnd) {\n\t\t\t\t\t\tmostRecentEnd = last.timestamp;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst iterator = timeline.items[Symbol.iterator]();\n\t\t\t\tsources.push({ timeline, iterator, nextItem: iterator.next() });\n\t\t\t}\n\n\t\t\tthis._visibleItemCount = hasAnyItems ? 1 : 0;\n\n\t\t\tfunction getNextMostRecentSource() {\n\t\t\t\treturn sources\n\t\t\t\t\t.filter((source) => !source.nextItem.done)\n\t\t\t\t\t.reduce(\n\t\t\t\t\t\t(previous, current) =>\n\t\t\t\t\t\t\tprevious === undefined ||\n\t\t\t\t\t\t\tcurrent.nextItem.value!.timestamp >=\n\t\t\t\t\t\t\t\tprevious.nextItem.value!.timestamp\n\t\t\t\t\t\t\t\t? current\n\t\t\t\t\t\t\t\t: previous,\n\t\t\t\t\t\tundefined!,\n\t\t\t\t\t);\n\t\t\t}\n\n\t\t\tlet lastRelativeTime: string | undefined;\n\t\t\tlet nextSource;\n\t\t\twhile ((nextSource = getNextMostRecentSource())) {\n\t\t\t\tnextSource.timeline.lastRenderedIndex++;\n\n\t\t\t\tconst item = nextSource.nextItem.value!;\n\t\t\t\titem.relativeTime = undefined;\n\t\t\t\titem.hideRelativeTime = undefined;\n\n\t\t\t\tif (item.timestamp >= mostRecentEnd) {\n\t\t\t\t\tcount++;\n\t\t\t\t\tif (count > maxCount) {\n\t\t\t\t\t\tmore = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tlastRelativeTime = updateRelativeTime(\n\t\t\t\t\t\titem,\n\t\t\t\t\t\tlastRelativeTime,\n\t\t\t\t\t);\n\t\t\t\t\tyield { element: item };\n\t\t\t\t}\n\n\t\t\t\tnextSource.nextItem = nextSource.iterator.next();\n\t\t\t}\n\t\t}\n\n\t\tthis._visibleItemCount = count;\n\t\tif (count > 0) {\n\t\t\tif (more) {\n\t\t\t\tyield {\n\t\t\t\t\telement: new LoadMoreCommand(\n\t\t\t\t\t\tthis.pendingRequests.size !== 0,\n\t\t\t\t\t),\n\t\t\t\t};\n\t\t\t} else if (this.pendingRequests.size !== 0) {\n\t\t\t\tyield {\n\t\t\t\t\telement: new LoadMoreCommand(true),\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate refresh() {\n\t\tif (!this.isBodyVisible()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.tree.setChildren(null, this.getItems() as any);\n\t\tthis._isEmpty = !this.hasVisibleItems;\n\n\t\tif (this.uri === undefined) {\n\t\t\tthis.updateFilename(undefined);\n\t\t\tthis.message = localize(\n\t\t\t\t\"timeline.editorCannotProvideTimeline\",\n\t\t\t\t\"The active editor cannot provide timeline information.\",\n\t\t\t);\n\t\t} else if (this._isEmpty) {\n\t\t\tif (this.pendingRequests.size !== 0) {\n\t\t\t\tthis.setLoadingUriMessage();\n\t\t\t} else {\n\t\t\t\tthis.updateFilename(\n\t\t\t\t\tthis.labelService.getUriBasenameLabel(this.uri),\n\t\t\t\t);\n\t\t\t\tconst scmProviderCount =\n\t\t\t\t\tthis.contextKeyService.getContextKeyValue<number>(\n\t\t\t\t\t\t\"scm.providerCount\",\n\t\t\t\t\t);\n\t\t\t\tif (\n\t\t\t\t\tthis.timelineService\n\t\t\t\t\t\t.getSources()\n\t\t\t\t\t\t.filter(({ id }) => !this.excludedSources.has(id))\n\t\t\t\t\t\t.length === 0\n\t\t\t\t) {\n\t\t\t\t\tthis.message = localize(\n\t\t\t\t\t\t\"timeline.noTimelineSourcesEnabled\",\n\t\t\t\t\t\t\"All timeline sources have been filtered out.\",\n\t\t\t\t\t);\n\t\t\t\t} else if (\n\t\t\t\t\tthis.configurationService.getValue(\n\t\t\t\t\t\t\"workbench.localHistory.enabled\",\n\t\t\t\t\t) &&\n\t\t\t\t\t!this.excludedSources.has(\"timeline.localHistory\")\n\t\t\t\t) {\n\t\t\t\t\tthis.message = localize(\n\t\t\t\t\t\t\"timeline.noLocalHistoryYet\",\n\t\t\t\t\t\t\"Local History will track recent changes as you save them unless the file has been excluded or is too large.\",\n\t\t\t\t\t);\n\t\t\t\t} else if (this.excludedSources.size > 0) {\n\t\t\t\t\tthis.message = localize(\n\t\t\t\t\t\t\"timeline.noTimelineInfoFromEnabledSources\",\n\t\t\t\t\t\t\"No filtered timeline information was provided.\",\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tthis.message = localize(\n\t\t\t\t\t\t\"timeline.noTimelineInfo\",\n\t\t\t\t\t\t\"No timeline information was provided.\",\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tif (!scmProviderCount || scmProviderCount === 0) {\n\t\t\t\t\tthis.message +=\n\t\t\t\t\t\t\" \" +\n\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\"timeline.noSCM\",\n\t\t\t\t\t\t\t\"Source Control has not been configured.\",\n\t\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.updateFilename(\n\t\t\t\tthis.labelService.getUriBasenameLabel(this.uri),\n\t\t\t);\n\t\t\tthis.message = undefined;\n\t\t}\n\n\t\tthis._pendingRefresh = false;\n\t}\n\n\t@debounce(500)\n\tprivate refreshDebounced() {\n\t\tthis.refresh();\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\t\tthis.tree.domFocus();\n\t}\n\n\toverride setExpanded(expanded: boolean): boolean {\n\t\tconst changed = super.setExpanded(expanded);\n\n\t\tif (changed && this.isBodyVisible()) {\n\t\t\tif (this.followActiveEditor) {\n\t\t\t\tthis.onActiveEditorChanged();\n\t\t\t} else {\n\t\t\t\tthis.setUriCore(this.uri, true);\n\t\t\t}\n\t\t}\n\n\t\treturn changed;\n\t}\n\n\toverride setVisible(visible: boolean): void {\n\t\tif (visible) {\n\t\t\tthis.extensionService.activateByEvent(\"onView:timeline\");\n\t\t\tthis.visibilityDisposables = new DisposableStore();\n\n\t\t\tthis.editorService.onDidActiveEditorChange(\n\t\t\t\tthis.onActiveEditorChanged,\n\t\t\t\tthis,\n\t\t\t\tthis.visibilityDisposables,\n\t\t\t);\n\t\t\t// Refresh the view on focus to update the relative timestamps\n\t\t\tthis.onDidFocus(\n\t\t\t\t() => this.refreshDebounced(),\n\t\t\t\tthis,\n\t\t\t\tthis.visibilityDisposables,\n\t\t\t);\n\n\t\t\tsuper.setVisible(visible);\n\n\t\t\tthis.onActiveEditorChanged();\n\t\t} else {\n\t\t\tthis.visibilityDisposables?.dispose();\n\n\t\t\tsuper.setVisible(visible);\n\t\t}\n\t}\n\n\tprotected override layoutBody(height: number, width: number): void {\n\t\tsuper.layoutBody(height, width);\n\t\tthis.tree.layout(height, width);\n\t}\n\n\tprotected override renderHeaderTitle(container: HTMLElement): void {\n\t\tsuper.renderHeaderTitle(container, this.title);\n\n\t\tcontainer.classList.add(\"timeline-view\");\n\t}\n\n\tprotected override renderBody(container: HTMLElement): void {\n\t\tsuper.renderBody(container);\n\n\t\tthis.$container = container;\n\t\tcontainer.classList.add(\n\t\t\t\"tree-explorer-viewlet-tree-view\",\n\t\t\t\"timeline-tree-view\",\n\t\t);\n\n\t\tthis.$message = DOM.append(this.$container, DOM.$(\".message\"));\n\t\tthis.$message.classList.add(\"timeline-subtle\");\n\n\t\tthis.message = localize(\n\t\t\t\"timeline.editorCannotProvideTimeline\",\n\t\t\t\"The active editor cannot provide timeline information.\",\n\t\t);\n\n\t\tthis.$tree = document.createElement(\"div\");\n\t\tthis.$tree.classList.add(\n\t\t\t\"customview-tree\",\n\t\t\t\"file-icon-themable-tree\",\n\t\t\t\"hide-arrows\",\n\t\t);\n\t\t// this.treeElement.classList.add('show-file-icons');\n\t\tcontainer.appendChild(this.$tree);\n\n\t\tthis.treeRenderer = this.instantiationService.createInstance(\n\t\t\tTimelineTreeRenderer,\n\t\t\tthis.commands,\n\t\t);\n\t\tthis.treeRenderer.onDidScrollToEnd((item) => {\n\t\t\tif (this.pageOnScroll) {\n\t\t\t\tthis.loadMore(item);\n\t\t\t}\n\t\t});\n\n\t\tthis.tree = <WorkbenchObjectTree<TreeElement, FuzzyScore>>(\n\t\t\tthis.instantiationService.createInstance(\n\t\t\t\tWorkbenchObjectTree,\n\t\t\t\t\"TimelinePane\",\n\t\t\t\tthis.$tree,\n\t\t\t\tnew TimelineListVirtualDelegate(),\n\t\t\t\t[this.treeRenderer],\n\t\t\t\t{\n\t\t\t\t\tidentityProvider: new TimelineIdentityProvider(),\n\t\t\t\t\taccessibilityProvider: {\n\t\t\t\t\t\tgetAriaLabel(element: TreeElement): string {\n\t\t\t\t\t\t\tif (isLoadMoreCommand(element)) {\n\t\t\t\t\t\t\t\treturn element.ariaLabel;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn element.accessibilityInformation\n\t\t\t\t\t\t\t\t? element.accessibilityInformation.label\n\t\t\t\t\t\t\t\t: localize(\n\t\t\t\t\t\t\t\t\t\t\"timeline.aria.item\",\n\t\t\t\t\t\t\t\t\t\t\"{0}: {1}\",\n\t\t\t\t\t\t\t\t\t\telement.relativeTimeFullWord ?? \"\",\n\t\t\t\t\t\t\t\t\t\telement.label,\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetRole(element: TreeElement): AriaRole {\n\t\t\t\t\t\t\tif (isLoadMoreCommand(element)) {\n\t\t\t\t\t\t\t\treturn \"treeitem\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn element.accessibilityInformation &&\n\t\t\t\t\t\t\t\telement.accessibilityInformation.role\n\t\t\t\t\t\t\t\t? element.accessibilityInformation.role\n\t\t\t\t\t\t\t\t: \"treeitem\";\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetWidgetAriaLabel(): string {\n\t\t\t\t\t\t\treturn localize(\"timeline\", \"Timeline\");\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tkeyboardNavigationLabelProvider:\n\t\t\t\t\t\tnew TimelineKeyboardNavigationLabelProvider(),\n\t\t\t\t\tmultipleSelectionSupport: false,\n\t\t\t\t\toverrideStyles:\n\t\t\t\t\t\tthis.getLocationBasedColors().listOverrideStyles,\n\t\t\t\t},\n\t\t\t)\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.tree.onContextMenu((e) =>\n\t\t\t\tthis.onContextMenu(this.commands, e),\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.tree.onDidChangeSelection((e) => this.ensureValidItems()),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.tree.onDidOpen((e) => {\n\t\t\t\tif (!e.browserEvent || !this.ensureValidItems()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst selection = this.tree.getSelection();\n\t\t\t\tlet item;\n\t\t\t\tif (selection.length === 1) {\n\t\t\t\t\titem = selection[0];\n\t\t\t\t}\n\n\t\t\t\tif (item === null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (isTimelineItem(item)) {\n\t\t\t\t\tif (item.command) {\n\t\t\t\t\t\tlet args = item.command.arguments ?? [];\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\titem.command.id === API_OPEN_EDITOR_COMMAND_ID ||\n\t\t\t\t\t\t\titem.command.id === API_OPEN_DIFF_EDITOR_COMMAND_ID\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t// Some commands owned by us should receive the\n\t\t\t\t\t\t\t// `IOpenEvent` as context to open properly\n\t\t\t\t\t\t\targs = [...args, e];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.commandService.executeCommand(\n\t\t\t\t\t\t\titem.command.id,\n\t\t\t\t\t\t\t...args,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} else if (isLoadMoreCommand(item)) {\n\t\t\t\t\tthis.loadMore(item);\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t}\n\n\tprivate loadMore(item: LoadMoreCommand) {\n\t\tif (item.loading) {\n\t\t\treturn;\n\t\t}\n\n\t\titem.loading = true;\n\t\tthis.tree.rerender(item);\n\n\t\tif (this.pendingRequests.size !== 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._maxItemCount = this._visibleItemCount + this.pageSize;\n\t\tthis.loadTimeline(false);\n\t}\n\n\tensureValidItems() {\n\t\t// If we don't have any non-excluded timelines, clear the tree and show the loading message\n\t\tif (\n\t\t\t!this.hasVisibleItems ||\n\t\t\t!this.timelineService\n\t\t\t\t.getSources()\n\t\t\t\t.some(\n\t\t\t\t\t({ id }) =>\n\t\t\t\t\t\t!this.excludedSources.has(id) &&\n\t\t\t\t\t\tthis.timelinesBySource.has(id),\n\t\t\t\t)\n\t\t) {\n\t\t\tthis.tree.setChildren(null, undefined);\n\t\t\tthis._isEmpty = true;\n\n\t\t\tthis.setLoadingUriMessage();\n\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tsetLoadingUriMessage() {\n\t\tconst file =\n\t\t\tthis.uri && this.labelService.getUriBasenameLabel(this.uri);\n\t\tthis.updateFilename(file);\n\t\tthis.message = file\n\t\t\t? localize(\"timeline.loading\", \"Loading timeline for {0}...\", file)\n\t\t\t: \"\";\n\t}\n\n\tprivate onContextMenu(\n\t\tcommands: TimelinePaneCommands,\n\t\ttreeEvent: ITreeContextMenuEvent<TreeElement | null>,\n\t): void {\n\t\tconst item = treeEvent.element;\n\t\tif (item === null) {\n\t\t\treturn;\n\t\t}\n\t\tconst event: UIEvent = treeEvent.browserEvent;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tif (!this.ensureValidItems()) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.tree.setFocus([item]);\n\t\tconst actions = commands.getItemContextActions(item);\n\t\tif (!actions.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tgetAnchor: () => treeEvent.anchor,\n\t\t\tgetActions: () => actions,\n\t\t\tgetActionViewItem: (action) => {\n\t\t\t\tconst keybinding = this.keybindingService.lookupKeybinding(\n\t\t\t\t\taction.id,\n\t\t\t\t);\n\t\t\t\tif (keybinding) {\n\t\t\t\t\treturn new ActionViewItem(action, action, {\n\t\t\t\t\t\tlabel: true,\n\t\t\t\t\t\tkeybinding: keybinding.getLabel(),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t},\n\t\t\tonHide: (wasCancelled?: boolean) => {\n\t\t\t\tif (wasCancelled) {\n\t\t\t\t\tthis.tree.domFocus();\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetActionsContext: (): TimelineActionContext => ({\n\t\t\t\turi: this.uri,\n\t\t\t\titem,\n\t\t\t}),\n\t\t\tactionRunner: new TimelineActionRunner(),\n\t\t});\n\t}\n}\n\nclass TimelineElementTemplate implements IDisposable {\n\tstatic readonly id = \"TimelineElementTemplate\";\n\n\treadonly actionBar: ActionBar;\n\treadonly icon: HTMLElement;\n\treadonly iconLabel: IconLabel;\n\treadonly timestamp: HTMLSpanElement;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tactionViewItemProvider: IActionViewItemProvider,\n\t\thoverDelegate: IHoverDelegate,\n\t) {\n\t\tcontainer.classList.add(\"custom-view-tree-node-item\");\n\t\tthis.icon = DOM.append(\n\t\t\tcontainer,\n\t\t\tDOM.$(\".custom-view-tree-node-item-icon\"),\n\t\t);\n\n\t\tthis.iconLabel = new IconLabel(container, {\n\t\t\tsupportHighlights: true,\n\t\t\tsupportIcons: true,\n\t\t\thoverDelegate,\n\t\t});\n\n\t\tconst timestampContainer = DOM.append(\n\t\t\tthis.iconLabel.element,\n\t\t\tDOM.$(\".timeline-timestamp-container\"),\n\t\t);\n\t\tthis.timestamp = DOM.append(\n\t\t\ttimestampContainer,\n\t\t\tDOM.$(\"span.timeline-timestamp\"),\n\t\t);\n\n\t\tconst actionsContainer = DOM.append(\n\t\t\tthis.iconLabel.element,\n\t\t\tDOM.$(\".actions\"),\n\t\t);\n\t\tthis.actionBar = new ActionBar(actionsContainer, {\n\t\t\tactionViewItemProvider,\n\t\t});\n\t}\n\n\tdispose() {\n\t\tthis.iconLabel.dispose();\n\t\tthis.actionBar.dispose();\n\t}\n\n\treset() {\n\t\tthis.icon.className = \"\";\n\t\tthis.icon.style.backgroundImage = \"\";\n\t\tthis.actionBar.clear();\n\t}\n}\n\nexport class TimelineIdentityProvider\n\timplements IIdentityProvider<TreeElement>\n{\n\tgetId(item: TreeElement): { toString(): string } {\n\t\treturn item.handle;\n\t}\n}\n\nclass TimelineActionRunner extends ActionRunner {\n\tprotected override async runAction(\n\t\taction: IAction,\n\t\t{ uri, item }: TimelineActionContext,\n\t): Promise<void> {\n\t\tif (!isTimelineItem(item)) {\n\t\t\t// TODO@eamodio do we need to do anything else?\n\t\t\tawait action.run();\n\t\t\treturn;\n\t\t}\n\n\t\tawait action.run(\n\t\t\t{\n\t\t\t\t$mid: MarshalledId.TimelineActionContext,\n\t\t\t\thandle: item.handle,\n\t\t\t\tsource: item.source,\n\t\t\t\turi,\n\t\t\t},\n\t\t\turi,\n\t\t\titem.source,\n\t\t);\n\t}\n}\n\nexport class TimelineKeyboardNavigationLabelProvider\n\timplements IKeyboardNavigationLabelProvider<TreeElement>\n{\n\tgetKeyboardNavigationLabel(element: TreeElement): { toString(): string } {\n\t\treturn element.label;\n\t}\n}\n\nexport class TimelineListVirtualDelegate\n\timplements IListVirtualDelegate<TreeElement>\n{\n\tgetHeight(_element: TreeElement): number {\n\t\treturn ItemHeight;\n\t}\n\n\tgetTemplateId(element: TreeElement): string {\n\t\treturn TimelineElementTemplate.id;\n\t}\n}\n\nclass TimelineTreeRenderer\n\timplements ITreeRenderer<TreeElement, FuzzyScore, TimelineElementTemplate>\n{\n\tprivate readonly _onDidScrollToEnd = new Emitter<LoadMoreCommand>();\n\treadonly onDidScrollToEnd: Event<LoadMoreCommand> =\n\t\tthis._onDidScrollToEnd.event;\n\n\treadonly templateId: string = TimelineElementTemplate.id;\n\n\tprivate _hoverDelegate: IHoverDelegate;\n\n\tprivate actionViewItemProvider: IActionViewItemProvider;\n\n\tconstructor(\n\t\tprivate readonly commands: TimelinePaneCommands,\n\t\t@IInstantiationService\n\t\tprotected readonly instantiationService: IInstantiationService,\n\t\t@IThemeService private themeService: IThemeService,\n\t) {\n\t\tthis.actionViewItemProvider = createActionViewItem.bind(\n\t\t\tundefined,\n\t\t\tthis.instantiationService,\n\t\t);\n\t\tthis._hoverDelegate = getDefaultHoverDelegate(\"mouse\");\n\t}\n\n\tprivate uri: URI | undefined;\n\tsetUri(uri: URI | undefined) {\n\t\tthis.uri = uri;\n\t}\n\n\trenderTemplate(container: HTMLElement): TimelineElementTemplate {\n\t\treturn new TimelineElementTemplate(\n\t\t\tcontainer,\n\t\t\tthis.actionViewItemProvider,\n\t\t\tthis._hoverDelegate,\n\t\t);\n\t}\n\n\trenderElement(\n\t\tnode: ITreeNode<TreeElement, FuzzyScore>,\n\t\tindex: number,\n\t\ttemplate: TimelineElementTemplate,\n\t\theight: number | undefined,\n\t): void {\n\t\ttemplate.reset();\n\n\t\tconst { element: item } = node;\n\n\t\tconst theme = this.themeService.getColorTheme();\n\t\tconst icon =\n\t\t\ttheme.type === ColorScheme.LIGHT ? item.icon : item.iconDark;\n\t\tconst iconUrl = icon ? URI.revive(icon) : null;\n\n\t\tif (iconUrl) {\n\t\t\ttemplate.icon.className = \"custom-view-tree-node-item-icon\";\n\t\t\ttemplate.icon.style.backgroundImage = DOM.asCSSUrl(iconUrl);\n\t\t\ttemplate.icon.style.color = \"\";\n\t\t} else if (item.themeIcon) {\n\t\t\ttemplate.icon.className = `custom-view-tree-node-item-icon ${ThemeIcon.asClassName(item.themeIcon)}`;\n\t\t\tif (item.themeIcon.color) {\n\t\t\t\ttemplate.icon.style.color =\n\t\t\t\t\ttheme.getColor(item.themeIcon.color.id)?.toString() ?? \"\";\n\t\t\t} else {\n\t\t\t\ttemplate.icon.style.color = \"\";\n\t\t\t}\n\t\t\ttemplate.icon.style.backgroundImage = \"\";\n\t\t} else {\n\t\t\ttemplate.icon.className = \"custom-view-tree-node-item-icon\";\n\t\t\ttemplate.icon.style.backgroundImage = \"\";\n\t\t\ttemplate.icon.style.color = \"\";\n\t\t}\n\t\tconst tooltip = item.tooltip\n\t\t\t? isString(item.tooltip)\n\t\t\t\t? item.tooltip\n\t\t\t\t: {\n\t\t\t\t\t\tmarkdown: item.tooltip,\n\t\t\t\t\t\tmarkdownNotSupportedFallback: renderMarkdownAsPlaintext(\n\t\t\t\t\t\t\titem.tooltip,\n\t\t\t\t\t\t),\n\t\t\t\t\t}\n\t\t\t: undefined;\n\n\t\ttemplate.iconLabel.setLabel(item.label, item.description, {\n\t\t\ttitle: tooltip,\n\t\t\tmatches: createMatches(node.filterData),\n\t\t});\n\n\t\ttemplate.timestamp.textContent = item.relativeTime ?? \"\";\n\t\ttemplate.timestamp.ariaLabel = item.relativeTimeFullWord ?? \"\";\n\t\ttemplate.timestamp.parentElement!.classList.toggle(\n\t\t\t\"timeline-timestamp--duplicate\",\n\t\t\tisTimelineItem(item) && item.hideRelativeTime,\n\t\t);\n\n\t\ttemplate.actionBar.context = {\n\t\t\turi: this.uri,\n\t\t\titem,\n\t\t} satisfies TimelineActionContext;\n\t\ttemplate.actionBar.actionRunner = new TimelineActionRunner();\n\t\ttemplate.actionBar.push(this.commands.getItemActions(item), {\n\t\t\ticon: true,\n\t\t\tlabel: false,\n\t\t});\n\n\t\t// If we are rendering the load more item, we've scrolled to the end, so trigger an event\n\t\tif (isLoadMoreCommand(item)) {\n\t\t\tsetTimeout(() => this._onDidScrollToEnd.fire(item), 0);\n\t\t}\n\t}\n\n\tdisposeTemplate(template: TimelineElementTemplate): void {\n\t\ttemplate.dispose();\n\t}\n}\n\nconst timelineRefresh = registerIcon(\n\t\"timeline-refresh\",\n\tCodicon.refresh,\n\tlocalize(\"timelineRefresh\", \"Icon for the refresh timeline action.\"),\n);\nconst timelinePin = registerIcon(\n\t\"timeline-pin\",\n\tCodicon.pin,\n\tlocalize(\"timelinePin\", \"Icon for the pin timeline action.\"),\n);\nconst timelineUnpin = registerIcon(\n\t\"timeline-unpin\",\n\tCodicon.pinned,\n\tlocalize(\"timelineUnpin\", \"Icon for the unpin timeline action.\"),\n);\n\nclass TimelinePaneCommands extends Disposable {\n\tprivate readonly sourceDisposables: DisposableStore;\n\n\tconstructor(\n\t\tprivate readonly pane: TimelinePane,\n\t\t@ITimelineService private readonly timelineService: ITimelineService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IContextKeyService\n\t\tprivate readonly contextKeyService: IContextKeyService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register((this.sourceDisposables = new DisposableStore()));\n\n\t\tthis._register(\n\t\t\tregisterAction2(\n\t\t\t\tclass extends Action2 {\n\t\t\t\t\tconstructor() {\n\t\t\t\t\t\tsuper({\n\t\t\t\t\t\t\tid: \"timeline.refresh\",\n\t\t\t\t\t\t\ttitle: localize2(\"refresh\", \"Refresh\"),\n\t\t\t\t\t\t\ticon: timelineRefresh,\n\t\t\t\t\t\t\tcategory: localize2(\"timeline\", \"Timeline\"),\n\t\t\t\t\t\t\tmenu: {\n\t\t\t\t\t\t\t\tid: MenuId.TimelineTitle,\n\t\t\t\t\t\t\t\tgroup: \"navigation\",\n\t\t\t\t\t\t\t\torder: 99,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\trun(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\t\t\t\tpane.reset();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\n\t\tthis._register(\n\t\t\tCommandsRegistry.registerCommand(\n\t\t\t\t\"timeline.toggleFollowActiveEditor\",\n\t\t\t\t(accessor: ServicesAccessor, ...args: any[]) =>\n\t\t\t\t\t(pane.followActiveEditor = !pane.followActiveEditor),\n\t\t\t),\n\t\t);\n\n\t\tthis._register(\n\t\t\tMenuRegistry.appendMenuItem(MenuId.TimelineTitle, {\n\t\t\t\tcommand: {\n\t\t\t\t\tid: \"timeline.toggleFollowActiveEditor\",\n\t\t\t\t\ttitle: localize2(\n\t\t\t\t\t\t\"timeline.toggleFollowActiveEditorCommand.follow\",\n\t\t\t\t\t\t\"Pin the Current Timeline\",\n\t\t\t\t\t),\n\t\t\t\t\ticon: timelinePin,\n\t\t\t\t\tcategory: localize2(\"timeline\", \"Timeline\"),\n\t\t\t\t},\n\t\t\t\tgroup: \"navigation\",\n\t\t\t\torder: 98,\n\t\t\t\twhen: TimelineFollowActiveEditorContext,\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tMenuRegistry.appendMenuItem(MenuId.TimelineTitle, {\n\t\t\t\tcommand: {\n\t\t\t\t\tid: \"timeline.toggleFollowActiveEditor\",\n\t\t\t\t\ttitle: localize2(\n\t\t\t\t\t\t\"timeline.toggleFollowActiveEditorCommand.unfollow\",\n\t\t\t\t\t\t\"Unpin the Current Timeline\",\n\t\t\t\t\t),\n\t\t\t\t\ticon: timelineUnpin,\n\t\t\t\t\tcategory: localize2(\"timeline\", \"Timeline\"),\n\t\t\t\t},\n\t\t\t\tgroup: \"navigation\",\n\t\t\t\torder: 98,\n\t\t\t\twhen: TimelineFollowActiveEditorContext.toNegated(),\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\ttimelineService.onDidChangeProviders(() =>\n\t\t\t\tthis.updateTimelineSourceFilters(),\n\t\t\t),\n\t\t);\n\t\tthis.updateTimelineSourceFilters();\n\t}\n\n\tgetItemActions(element: TreeElement): IAction[] {\n\t\treturn this.getActions(MenuId.TimelineItemContext, {\n\t\t\tkey: \"timelineItem\",\n\t\t\tvalue: element.contextValue,\n\t\t}).primary;\n\t}\n\n\tgetItemContextActions(element: TreeElement): IAction[] {\n\t\treturn this.getActions(MenuId.TimelineItemContext, {\n\t\t\tkey: \"timelineItem\",\n\t\t\tvalue: element.contextValue,\n\t\t}).secondary;\n\t}\n\n\tprivate getActions(\n\t\tmenuId: MenuId,\n\t\tcontext: { key: string; value?: string },\n\t): { primary: IAction[]; secondary: IAction[] } {\n\t\tconst contextKeyService = this.contextKeyService.createOverlay([\n\t\t\t[\"view\", this.pane.id],\n\t\t\t[context.key, context.value],\n\t\t]);\n\n\t\tconst menu = this.menuService.getMenuActions(\n\t\t\tmenuId,\n\t\t\tcontextKeyService,\n\t\t\t{ shouldForwardArgs: true },\n\t\t);\n\t\tconst primary: IAction[] = [];\n\t\tconst secondary: IAction[] = [];\n\t\tconst result = { primary, secondary };\n\t\tcreateAndFillInContextMenuActions(menu, result, \"inline\");\n\n\t\treturn result;\n\t}\n\n\tprivate updateTimelineSourceFilters() {\n\t\tthis.sourceDisposables.clear();\n\n\t\tconst excluded = new Set(\n\t\t\tJSON.parse(\n\t\t\t\tthis.storageService.get(\n\t\t\t\t\t\"timeline.excludeSources\",\n\t\t\t\t\tStorageScope.PROFILE,\n\t\t\t\t\t\"[]\",\n\t\t\t\t),\n\t\t\t),\n\t\t);\n\t\tfor (const source of this.timelineService.getSources()) {\n\t\t\tthis.sourceDisposables.add(\n\t\t\t\tregisterAction2(\n\t\t\t\t\tclass extends Action2 {\n\t\t\t\t\t\tconstructor() {\n\t\t\t\t\t\t\tsuper({\n\t\t\t\t\t\t\t\tid: `timeline.toggleExcludeSource:${source.id}`,\n\t\t\t\t\t\t\t\ttitle: source.label,\n\t\t\t\t\t\t\t\tmenu: {\n\t\t\t\t\t\t\t\t\tid: MenuId.TimelineFilterSubMenu,\n\t\t\t\t\t\t\t\t\tgroup: \"navigation\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\ttoggled: ContextKeyExpr.regex(\n\t\t\t\t\t\t\t\t\t`timelineExcludeSources`,\n\t\t\t\t\t\t\t\t\tnew RegExp(\n\t\t\t\t\t\t\t\t\t\t`\\\\b${escapeRegExpCharacters(source.id)}\\\\b`,\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t).negate(),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\trun(accessor: ServicesAccessor, ...args: any[]) {\n\t\t\t\t\t\t\tif (excluded.has(source.id)) {\n\t\t\t\t\t\t\t\texcluded.delete(source.id);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\texcluded.add(source.id);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst storageService =\n\t\t\t\t\t\t\t\taccessor.get(IStorageService);\n\t\t\t\t\t\t\tstorageService.store(\n\t\t\t\t\t\t\t\t\"timeline.excludeSources\",\n\t\t\t\t\t\t\t\tJSON.stringify([...excluded.keys()]),\n\t\t\t\t\t\t\t\tStorageScope.PROFILE,\n\t\t\t\t\t\t\t\tStorageTarget.USER,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\t}\n}\n"],
  "mappings": "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",
  "names": ["item", "getNextMostRecentSource"]
}
