{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/codeActions/common/codeActionsExtensionPoint.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { MarkdownString } from \"../../../../base/common/htmlContent.js\";\nimport { Disposable } from \"../../../../base/common/lifecycle.js\";\nimport * as nls from \"../../../../nls.js\";\nimport type { IConfigurationPropertySchema } from \"../../../../platform/configuration/common/configurationRegistry.js\";\nimport type { IExtensionManifest } from \"../../../../platform/extensions/common/extensions.js\";\nimport { SyncDescriptor } from \"../../../../platform/instantiation/common/descriptors.js\";\nimport { Registry } from \"../../../../platform/registry/common/platform.js\";\nimport {\n\tExtensions as ExtensionFeaturesExtensions,\n\ttype IExtensionFeatureTableRenderer,\n\ttype IExtensionFeaturesRegistry,\n\ttype IRenderedData,\n\ttype IRowData,\n\ttype ITableData,\n} from \"../../../services/extensionManagement/common/extensionFeatures.js\";\nimport { languagesExtPoint } from \"../../../services/language/common/languageService.js\";\n\nenum CodeActionExtensionPointFields {\n\tlanguages = \"languages\",\n\tactions = \"actions\",\n\tkind = \"kind\",\n\ttitle = \"title\",\n\tdescription = \"description\",\n}\n\nexport interface ContributedCodeAction {\n\treadonly [CodeActionExtensionPointFields.kind]: string;\n\treadonly [CodeActionExtensionPointFields.title]: string;\n\treadonly [CodeActionExtensionPointFields.description]?: string;\n}\n\nexport interface CodeActionsExtensionPoint {\n\treadonly [CodeActionExtensionPointFields.languages]: readonly string[];\n\treadonly [CodeActionExtensionPointFields.actions]: readonly ContributedCodeAction[];\n}\n\nconst codeActionsExtensionPointSchema =\n\tObject.freeze<IConfigurationPropertySchema>({\n\t\ttype: \"array\",\n\t\tmarkdownDescription: nls.localize(\n\t\t\t\"contributes.codeActions\",\n\t\t\t\"Configure which editor to use for a resource.\",\n\t\t),\n\t\titems: {\n\t\t\ttype: \"object\",\n\t\t\trequired: [\n\t\t\t\tCodeActionExtensionPointFields.languages,\n\t\t\t\tCodeActionExtensionPointFields.actions,\n\t\t\t],\n\t\t\tproperties: {\n\t\t\t\t[CodeActionExtensionPointFields.languages]: {\n\t\t\t\t\ttype: \"array\",\n\t\t\t\t\tdescription: nls.localize(\n\t\t\t\t\t\t\"contributes.codeActions.languages\",\n\t\t\t\t\t\t\"Language modes that the code actions are enabled for.\",\n\t\t\t\t\t),\n\t\t\t\t\titems: { type: \"string\" },\n\t\t\t\t},\n\t\t\t\t[CodeActionExtensionPointFields.actions]: {\n\t\t\t\t\ttype: \"object\",\n\t\t\t\t\trequired: [\n\t\t\t\t\t\tCodeActionExtensionPointFields.kind,\n\t\t\t\t\t\tCodeActionExtensionPointFields.title,\n\t\t\t\t\t],\n\t\t\t\t\tproperties: {\n\t\t\t\t\t\t[CodeActionExtensionPointFields.kind]: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tmarkdownDescription: nls.localize(\n\t\t\t\t\t\t\t\t\"contributes.codeActions.kind\",\n\t\t\t\t\t\t\t\t\"`CodeActionKind` of the contributed code action.\",\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[CodeActionExtensionPointFields.title]: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: nls.localize(\n\t\t\t\t\t\t\t\t\"contributes.codeActions.title\",\n\t\t\t\t\t\t\t\t\"Label for the code action used in the UI.\",\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[CodeActionExtensionPointFields.description]: {\n\t\t\t\t\t\t\ttype: \"string\",\n\t\t\t\t\t\t\tdescription: nls.localize(\n\t\t\t\t\t\t\t\t\"contributes.codeActions.description\",\n\t\t\t\t\t\t\t\t\"Description of what the code action does.\",\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t});\n\nexport const codeActionsExtensionPointDescriptor = {\n\textensionPoint: \"codeActions\",\n\tdeps: [languagesExtPoint],\n\tjsonSchema: codeActionsExtensionPointSchema,\n};\n\nclass CodeActionsTableRenderer\n\textends Disposable\n\timplements IExtensionFeatureTableRenderer\n{\n\treadonly type = \"table\";\n\n\tshouldRender(manifest: IExtensionManifest): boolean {\n\t\treturn !!manifest.contributes?.codeActions;\n\t}\n\n\trender(manifest: IExtensionManifest): IRenderedData<ITableData> {\n\t\tconst codeActions = manifest.contributes?.codeActions || [];\n\t\tif (!codeActions.length) {\n\t\t\treturn { data: { headers: [], rows: [] }, dispose: () => {} };\n\t\t}\n\n\t\tconst flatActions = codeActions.flatMap((contribution) =>\n\t\t\tcontribution.actions.map((action) => ({\n\t\t\t\t...action,\n\t\t\t\tlanguages: contribution.languages,\n\t\t\t})),\n\t\t);\n\n\t\tconst headers = [\n\t\t\tnls.localize(\"codeActions.title\", \"Title\"),\n\t\t\tnls.localize(\"codeActions.kind\", \"Kind\"),\n\t\t\tnls.localize(\"codeActions.description\", \"Description\"),\n\t\t\tnls.localize(\"codeActions.languages\", \"Languages\"),\n\t\t];\n\n\t\tconst rows: IRowData[][] = flatActions\n\t\t\t.sort((a, b) => a.title.localeCompare(b.title))\n\t\t\t.map((action) => {\n\t\t\t\treturn [\n\t\t\t\t\taction.title,\n\t\t\t\t\tnew MarkdownString().appendMarkdown(`\\`${action.kind}\\``),\n\t\t\t\t\taction.description ?? \"\",\n\t\t\t\t\tnew MarkdownString().appendMarkdown(\n\t\t\t\t\t\t`${action.languages.map((lang) => `\\`${lang}\\``).join(\"&nbsp;\")}`,\n\t\t\t\t\t),\n\t\t\t\t];\n\t\t\t});\n\n\t\treturn {\n\t\t\tdata: {\n\t\t\t\theaders,\n\t\t\t\trows,\n\t\t\t},\n\t\t\tdispose: () => {},\n\t\t};\n\t}\n}\n\nRegistry.as<IExtensionFeaturesRegistry>(\n\tExtensionFeaturesExtensions.ExtensionFeaturesRegistry,\n).registerExtensionFeature({\n\tid: \"codeActions\",\n\tlabel: nls.localize(\"codeactions\", \"Code Actions\"),\n\taccess: {\n\t\tcanToggle: false,\n\t},\n\trenderer: new SyncDescriptor(CodeActionsTableRenderer),\n});\n"],
  "mappings": "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",
  "names": ["CodeActionExtensionPointFields"]
}
