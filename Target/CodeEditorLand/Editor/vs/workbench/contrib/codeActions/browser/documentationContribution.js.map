{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/codeActions/browser/documentationContribution.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { CancellationToken } from \"../../../../base/common/cancellation.js\";\nimport { HierarchicalKind } from \"../../../../base/common/hierarchicalKind.js\";\nimport { Disposable } from \"../../../../base/common/lifecycle.js\";\nimport type { Range } from \"../../../../editor/common/core/range.js\";\nimport type { Selection } from \"../../../../editor/common/core/selection.js\";\nimport type * as languages from \"../../../../editor/common/languages.js\";\nimport type { ITextModel } from \"../../../../editor/common/model.js\";\nimport { ILanguageFeaturesService } from \"../../../../editor/common/services/languageFeatures.js\";\nimport { CodeActionKind } from \"../../../../editor/contrib/codeAction/common/types.js\";\nimport {\n\tContextKeyExpr,\n\ttype ContextKeyExpression,\n\tIContextKeyService,\n} from \"../../../../platform/contextkey/common/contextkey.js\";\nimport type { IWorkbenchContribution } from \"../../../common/contributions.js\";\nimport type { IExtensionPoint } from \"../../../services/extensions/common/extensionsRegistry.js\";\nimport type { DocumentationExtensionPoint } from \"../common/documentationExtensionPoint.js\";\n\nexport class CodeActionDocumentationContribution\n\textends Disposable\n\timplements IWorkbenchContribution, languages.CodeActionProvider\n{\n\tprivate contributions: {\n\t\ttitle: string;\n\t\twhen: ContextKeyExpression;\n\t\tcommand: string;\n\t}[] = [];\n\n\tprivate readonly emptyCodeActionsList = {\n\t\tactions: [],\n\t\tdispose: () => {},\n\t};\n\n\tconstructor(\n\t\textensionPoint: IExtensionPoint<DocumentationExtensionPoint>,\n\t\t@IContextKeyService\n\t\tprivate readonly contextKeyService: IContextKeyService,\n\t\t@ILanguageFeaturesService\n\t\tlanguageFeaturesService: ILanguageFeaturesService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(\n\t\t\tlanguageFeaturesService.codeActionProvider.register(\"*\", this),\n\t\t);\n\n\t\textensionPoint.setHandler((points) => {\n\t\t\tthis.contributions = [];\n\t\t\tfor (const documentation of points) {\n\t\t\t\tif (!documentation.value.refactoring) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (const contribution of documentation.value.refactoring) {\n\t\t\t\t\tconst precondition = ContextKeyExpr.deserialize(\n\t\t\t\t\t\tcontribution.when,\n\t\t\t\t\t);\n\t\t\t\t\tif (!precondition) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.contributions.push({\n\t\t\t\t\t\ttitle: contribution.title,\n\t\t\t\t\t\twhen: precondition,\n\t\t\t\t\t\tcommand: contribution.command,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tasync provideCodeActions(\n\t\t_model: ITextModel,\n\t\t_range: Range | Selection,\n\t\tcontext: languages.CodeActionContext,\n\t\t_token: CancellationToken,\n\t): Promise<languages.CodeActionList> {\n\t\treturn this.emptyCodeActionsList;\n\t}\n\n\tpublic _getAdditionalMenuItems(\n\t\tcontext: languages.CodeActionContext,\n\t\tactions: readonly languages.CodeAction[],\n\t): languages.Command[] {\n\t\tif (context.only !== CodeActionKind.Refactor.value) {\n\t\t\tif (\n\t\t\t\t!actions.some(\n\t\t\t\t\t(action) =>\n\t\t\t\t\t\taction.kind &&\n\t\t\t\t\t\tCodeActionKind.Refactor.contains(\n\t\t\t\t\t\t\tnew HierarchicalKind(action.kind),\n\t\t\t\t\t\t),\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\n\t\treturn this.contributions\n\t\t\t.filter((contribution) =>\n\t\t\t\tthis.contextKeyService.contextMatchesRules(contribution.when),\n\t\t\t)\n\t\t\t.map((contribution) => {\n\t\t\t\treturn {\n\t\t\t\t\tid: contribution.command,\n\t\t\t\t\ttitle: contribution.title,\n\t\t\t\t};\n\t\t\t});\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;AAMA,SAAS,wBAAwB;AACjC,SAAS,kBAAkB;AAK3B,SAAS,gCAAgC;AACzC,SAAS,sBAAsB;AAC/B;AAAA,EACC;AAAA,EAEA;AAAA,OACM;AAKA,IAAM,sCAAN,cACE,WAET;AAAA,EAYC,YACC,gBAEiB,mBAEjB,yBACC;AACD,UAAM;AAJW;AAMjB,SAAK;AAAA,MACJ,wBAAwB,mBAAmB,SAAS,KAAK,IAAI;AAAA,IAC9D;AAEA,mBAAe,WAAW,CAAC,WAAW;AACrC,WAAK,gBAAgB,CAAC;AACtB,iBAAW,iBAAiB,QAAQ;AACnC,YAAI,CAAC,cAAc,MAAM,aAAa;AACrC;AAAA,QACD;AAEA,mBAAW,gBAAgB,cAAc,MAAM,aAAa;AAC3D,gBAAM,eAAe,eAAe;AAAA,YACnC,aAAa;AAAA,UACd;AACA,cAAI,CAAC,cAAc;AAClB;AAAA,UACD;AAEA,eAAK,cAAc,KAAK;AAAA,YACvB,OAAO,aAAa;AAAA,YACpB,MAAM;AAAA,YACN,SAAS,aAAa;AAAA,UACvB,CAAC;AAAA,QACF;AAAA,MACD;AAAA,IACD,CAAC;AAAA,EACF;AAAA,EA1ED,OA0BA;AAAA;AAAA;AAAA,EACS,gBAIF,CAAC;AAAA,EAEU,uBAAuB;AAAA,IACvC,SAAS,CAAC;AAAA,IACV,SAAS,6BAAM;AAAA,IAAC,GAAP;AAAA,EACV;AAAA,EAwCA,MAAM,mBACL,QACA,QACA,SACA,QACoC;AACpC,WAAO,KAAK;AAAA,EACb;AAAA,EAEO,wBACN,SACA,SACsB;AACtB,QAAI,QAAQ,SAAS,eAAe,SAAS,OAAO;AACnD,UACC,CAAC,QAAQ;AAAA,QACR,CAAC,WACA,OAAO,QACP,eAAe,SAAS;AAAA,UACvB,IAAI,iBAAiB,OAAO,IAAI;AAAA,QACjC;AAAA,MACF,GACC;AACD,eAAO,CAAC;AAAA,MACT;AAAA,IACD;AAEA,WAAO,KAAK,cACV;AAAA,MAAO,CAAC,iBACR,KAAK,kBAAkB,oBAAoB,aAAa,IAAI;AAAA,IAC7D,EACC,IAAI,CAAC,iBAAiB;AACtB,aAAO;AAAA,QACN,IAAI,aAAa;AAAA,QACjB,OAAO,aAAa;AAAA,MACrB;AAAA,IACD,CAAC;AAAA,EACH;AACD;AA3Fa,sCAAN;AAAA,EAiBJ;AAAA,EAEA;AAAA,GAnBU;",
  "names": []
}
