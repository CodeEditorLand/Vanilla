{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/codeActions/browser/documentationContribution.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { HierarchicalKind } from '../../../../base/common/hierarchicalKind.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../../editor/common/core/range.js';\nimport { Selection } from '../../../../editor/common/core/selection.js';\nimport * as languages from '../../../../editor/common/languages.js';\nimport { ITextModel } from '../../../../editor/common/model.js';\nimport { ILanguageFeaturesService } from '../../../../editor/common/services/languageFeatures.js';\nimport { CodeActionKind } from '../../../../editor/contrib/codeAction/common/types.js';\nimport { ContextKeyExpr, ContextKeyExpression, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IWorkbenchContribution } from '../../../common/contributions.js';\nimport { DocumentationExtensionPoint } from '../common/documentationExtensionPoint.js';\nimport { IExtensionPoint } from '../../../services/extensions/common/extensionsRegistry.js';\n\n\nexport class CodeActionDocumentationContribution extends Disposable implements IWorkbenchContribution, languages.CodeActionProvider {\n\n\tprivate contributions: {\n\t\ttitle: string;\n\t\twhen: ContextKeyExpression;\n\t\tcommand: string;\n\t}[] = [];\n\n\tprivate readonly emptyCodeActionsList = {\n\t\tactions: [],\n\t\tdispose: () => { }\n\t};\n\n\tconstructor(\n\t\textensionPoint: IExtensionPoint<DocumentationExtensionPoint>,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@ILanguageFeaturesService languageFeaturesService: ILanguageFeaturesService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(languageFeaturesService.codeActionProvider.register('*', this));\n\n\t\textensionPoint.setHandler(points => {\n\t\t\tthis.contributions = [];\n\t\t\tfor (const documentation of points) {\n\t\t\t\tif (!documentation.value.refactoring) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (const contribution of documentation.value.refactoring) {\n\t\t\t\t\tconst precondition = ContextKeyExpr.deserialize(contribution.when);\n\t\t\t\t\tif (!precondition) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.contributions.push({\n\t\t\t\t\t\ttitle: contribution.title,\n\t\t\t\t\t\twhen: precondition,\n\t\t\t\t\t\tcommand: contribution.command\n\t\t\t\t\t});\n\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tasync provideCodeActions(_model: ITextModel, _range: Range | Selection, context: languages.CodeActionContext, _token: CancellationToken): Promise<languages.CodeActionList> {\n\t\treturn this.emptyCodeActionsList;\n\t}\n\n\tpublic _getAdditionalMenuItems(context: languages.CodeActionContext, actions: readonly languages.CodeAction[]): languages.Command[] {\n\t\tif (context.only !== CodeActionKind.Refactor.value) {\n\t\t\tif (!actions.some(action => action.kind && CodeActionKind.Refactor.contains(new HierarchicalKind(action.kind)))) {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\n\t\treturn this.contributions\n\t\t\t.filter(contribution => this.contextKeyService.contextMatchesRules(contribution.when))\n\t\t\t.map(contribution => {\n\t\t\t\treturn {\n\t\t\t\t\tid: contribution.command,\n\t\t\t\t\ttitle: contribution.title\n\t\t\t\t};\n\t\t\t});\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;AAKA,SAAS,yBAAyB;AAClC,SAAS,wBAAwB;AACjC,SAAS,kBAAkB;AAC3B,SAAS,aAAa;AACtB,SAAS,iBAAiB;AAC1B,YAAY,eAAe;AAC3B,SAAS,kBAAkB;AAC3B,SAAS,gCAAgC;AACzC,SAAS,sBAAsB;AAC/B,SAAS,gBAAgB,sBAAsB,0BAA0B;AACzE,SAAS,8BAA8B;AACvC,SAAS,mCAAmC;AAC5C,SAAS,uBAAuB;AAGzB,IAAM,sCAAN,cAAkD,WAA2E;AAAA,EAanI,YACC,gBACqC,mBACX,yBACzB;AACD,UAAM;AAH+B;AAKrC,SAAK,UAAU,wBAAwB,mBAAmB,SAAS,KAAK,IAAI,CAAC;AAE7E,mBAAe,WAAW,YAAU;AACnC,WAAK,gBAAgB,CAAC;AACtB,iBAAW,iBAAiB,QAAQ;AACnC,YAAI,CAAC,cAAc,MAAM,aAAa;AACrC;AAAA,QACD;AAEA,mBAAW,gBAAgB,cAAc,MAAM,aAAa;AAC3D,gBAAM,eAAe,eAAe,YAAY,aAAa,IAAI;AACjE,cAAI,CAAC,cAAc;AAClB;AAAA,UACD;AAEA,eAAK,cAAc,KAAK;AAAA,YACvB,OAAO,aAAa;AAAA,YACpB,MAAM;AAAA,YACN,SAAS,aAAa;AAAA,UACvB,CAAC;AAAA,QAEF;AAAA,MACD;AAAA,IACD,CAAC;AAAA,EACF;AAAA,EAhED,OAoBoI;AAAA;AAAA;AAAA,EAE3H,gBAIF,CAAC;AAAA,EAEU,uBAAuB;AAAA,IACvC,SAAS,CAAC;AAAA,IACV,SAAS,6BAAM;AAAA,IAAE,GAAR;AAAA,EACV;AAAA,EAmCA,MAAM,mBAAmB,QAAoB,QAA2B,SAAsC,QAA8D;AAC3K,WAAO,KAAK;AAAA,EACb;AAAA,EAEO,wBAAwB,SAAsC,SAA+D;AACnI,QAAI,QAAQ,SAAS,eAAe,SAAS,OAAO;AACnD,UAAI,CAAC,QAAQ,KAAK,YAAU,OAAO,QAAQ,eAAe,SAAS,SAAS,IAAI,iBAAiB,OAAO,IAAI,CAAC,CAAC,GAAG;AAChH,eAAO,CAAC;AAAA,MACT;AAAA,IACD;AAEA,WAAO,KAAK,cACV,OAAO,kBAAgB,KAAK,kBAAkB,oBAAoB,aAAa,IAAI,CAAC,EACpF,IAAI,kBAAgB;AACpB,aAAO;AAAA,QACN,IAAI,aAAa;AAAA,QACjB,OAAO,aAAa;AAAA,MACrB;AAAA,IACD,CAAC;AAAA,EACH;AACD;AAlEa,sCAAN;AAAA,EAeJ;AAAA,EACA;AAAA,GAhBU;",
  "names": []
}
