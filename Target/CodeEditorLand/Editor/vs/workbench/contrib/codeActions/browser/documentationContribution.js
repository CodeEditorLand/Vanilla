var u=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var d=(s,n,t,o)=>{for(var e=o>1?void 0:o?g(n,t):n,i=s.length-1,r;i>=0;i--)(r=s[i])&&(e=(o?r(n,t,e):r(e))||e);return o&&e&&u(n,t,e),e},m=(s,n)=>(t,o)=>n(t,o,s);import"../../../../base/common/cancellation.js";import{HierarchicalKind as f}from"../../../../base/common/hierarchicalKind.js";import{Disposable as x}from"../../../../base/common/lifecycle.js";import"../../../../editor/common/core/range.js";import"../../../../editor/common/core/selection.js";import"../../../../editor/common/languages.js";import"../../../../editor/common/model.js";import{ILanguageFeaturesService as h}from"../../../../editor/common/services/languageFeatures.js";import{CodeActionKind as p}from"../../../../editor/contrib/codeAction/common/types.js";import{ContextKeyExpr as v,IContextKeyService as C}from"../../../../platform/contextkey/common/contextkey.js";import"../../../common/contributions.js";import"../common/documentationExtensionPoint.js";import"../../../services/extensions/common/extensionsRegistry.js";let a=class extends x{constructor(t,o,e){super();this.contextKeyService=o;this._register(e.codeActionProvider.register("*",this)),t.setHandler(i=>{this.contributions=[];for(const r of i)if(r.value.refactoring)for(const c of r.value.refactoring){const l=v.deserialize(c.when);l&&this.contributions.push({title:c.title,when:l,command:c.command})}})}contributions=[];emptyCodeActionsList={actions:[],dispose:()=>{}};async provideCodeActions(t,o,e,i){return this.emptyCodeActionsList}_getAdditionalMenuItems(t,o){return t.only!==p.Refactor.value&&!o.some(e=>e.kind&&p.Refactor.contains(new f(e.kind)))?[]:this.contributions.filter(e=>this.contextKeyService.contextMatchesRules(e.when)).map(e=>({id:e.command,title:e.title}))}};a=d([m(1,C),m(2,h)],a);export{a as CodeActionDocumentationContribution};
