{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/markers/browser/markersView.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport \"./media/markers.css\";\n\nimport * as dom from \"../../../../base/browser/dom.js\";\nimport {\n\ttype IKeyboardEvent,\n\tStandardKeyboardEvent,\n} from \"../../../../base/browser/keyboardEvent.js\";\nimport { ActionViewItem } from \"../../../../base/browser/ui/actionbar/actionViewItems.js\";\nimport type {\n\tIIdentityProvider,\n\tIListVirtualDelegate,\n} from \"../../../../base/browser/ui/list/list.js\";\nimport type {\n\tITableContextMenuEvent,\n\tITableEvent,\n} from \"../../../../base/browser/ui/table/table.js\";\nimport type {\n\tITreeContextMenuEvent,\n\tITreeElement,\n\tITreeEvent,\n\tITreeNode,\n\tITreeRenderer,\n} from \"../../../../base/browser/ui/tree/tree.js\";\nimport { type IAction, Separator } from \"../../../../base/common/actions.js\";\nimport { groupBy } from \"../../../../base/common/arrays.js\";\nimport { Event, Relay } from \"../../../../base/common/event.js\";\nimport type { IExpression } from \"../../../../base/common/glob.js\";\nimport { Iterable } from \"../../../../base/common/iterator.js\";\nimport { KeyCode } from \"../../../../base/common/keyCodes.js\";\nimport {\n\tDisposableStore,\n\ttype IDisposable,\n\ttoDisposable,\n} from \"../../../../base/common/lifecycle.js\";\nimport { ResourceMap } from \"../../../../base/common/map.js\";\nimport { deepClone } from \"../../../../base/common/objects.js\";\nimport type { URI } from \"../../../../base/common/uri.js\";\nimport type { ICodeEditor } from \"../../../../editor/browser/editorBrowser.js\";\nimport { localize } from \"../../../../nls.js\";\nimport { MenuId } from \"../../../../platform/actions/common/actions.js\";\nimport { IConfigurationService } from \"../../../../platform/configuration/common/configuration.js\";\nimport {\n\ttype IContextKey,\n\tIContextKeyService,\n} from \"../../../../platform/contextkey/common/contextkey.js\";\nimport { IContextMenuService } from \"../../../../platform/contextview/browser/contextView.js\";\nimport { IHoverService } from \"../../../../platform/hover/browser/hover.js\";\nimport { IInstantiationService } from \"../../../../platform/instantiation/common/instantiation.js\";\nimport { IKeybindingService } from \"../../../../platform/keybinding/common/keybinding.js\";\nimport { ResultKind } from \"../../../../platform/keybinding/common/keybindingResolver.js\";\nimport {\n\tIListService,\n\ttype IOpenEvent,\n\ttype IWorkbenchObjectTreeOptions,\n\tWorkbenchObjectTree,\n} from \"../../../../platform/list/browser/listService.js\";\nimport {\n\tIMarkerService,\n\tMarkerSeverity,\n} from \"../../../../platform/markers/common/markers.js\";\nimport {\n\tIOpenerService,\n\twithSelection,\n} from \"../../../../platform/opener/common/opener.js\";\nimport {\n\tIStorageService,\n\tStorageScope,\n\tStorageTarget,\n} from \"../../../../platform/storage/common/storage.js\";\nimport { ITelemetryService } from \"../../../../platform/telemetry/common/telemetry.js\";\nimport { IThemeService } from \"../../../../platform/theme/common/themeService.js\";\nimport { IUriIdentityService } from \"../../../../platform/uriIdentity/common/uriIdentity.js\";\nimport { IWorkspaceContextService } from \"../../../../platform/workspace/common/workspace.js\";\nimport { registerNavigableContainer } from \"../../../browser/actions/widgetNavigationCommands.js\";\nimport { RangeHighlightDecorations } from \"../../../browser/codeeditor.js\";\nimport { ResourceListDnDHandler } from \"../../../browser/dnd.js\";\nimport { ResourceLabels } from \"../../../browser/labels.js\";\nimport {\n\tFilterViewPane,\n\ttype IViewPaneOptions,\n} from \"../../../browser/parts/views/viewPane.js\";\nimport {\n\tEditorResourceAccessor,\n\tSideBySideEditor,\n} from \"../../../common/editor.js\";\nimport { Memento, type MementoObject } from \"../../../common/memento.js\";\nimport { IViewDescriptorService } from \"../../../common/views.js\";\nimport {\n\tACTIVE_GROUP,\n\tIEditorService,\n\tSIDE_GROUP,\n} from \"../../../services/editor/common/editorService.js\";\nimport {\n\tMarkers,\n\tMarkersContextKeys,\n\tMarkersViewMode,\n} from \"../common/markers.js\";\nimport type { IMarkersView } from \"./markers.js\";\nimport { FilterOptions } from \"./markersFilterOptions.js\";\nimport {\n\tMarker,\n\ttype MarkerChangesEvent,\n\ttype MarkerElement,\n\tMarkerTableItem,\n\tMarkersModel,\n\tRelatedInformation,\n\tResourceMarkers,\n\tcompareMarkersByUri,\n} from \"./markersModel.js\";\nimport { MarkersTable } from \"./markersTable.js\";\nimport {\n\tFilter,\n\ttype FilterData,\n\tMarkerRenderer,\n\tMarkersViewModel,\n\tMarkersWidgetAccessibilityProvider,\n\tRelatedInformationRenderer,\n\tResourceMarkersRenderer,\n\tVirtualDelegate,\n} from \"./markersTreeViewer.js\";\nimport {\n\ttype IMarkersFiltersChangeEvent,\n\tMarkersFilters,\n} from \"./markersViewActions.js\";\nimport Messages from \"./messages.js\";\n\nfunction createResourceMarkersIterator(\n\tresourceMarkers: ResourceMarkers,\n): Iterable<ITreeElement<MarkerElement>> {\n\treturn Iterable.map(resourceMarkers.markers, (m) => {\n\t\tconst relatedInformationIt = Iterable.from(m.relatedInformation);\n\t\tconst children = Iterable.map(relatedInformationIt, (r) => ({\n\t\t\telement: r,\n\t\t}));\n\n\t\treturn { element: m, children };\n\t});\n}\n\nexport interface IProblemsWidget {\n\tget contextKeyService(): IContextKeyService;\n\n\tget onContextMenu():\n\t\t| Event<ITreeContextMenuEvent<MarkerElement | null>>\n\t\t| Event<ITableContextMenuEvent<MarkerTableItem>>;\n\tget onDidChangeFocus():\n\t\t| Event<ITreeEvent<MarkerElement | null>>\n\t\t| Event<ITableEvent<MarkerTableItem>>;\n\tget onDidChangeSelection():\n\t\t| Event<ITreeEvent<MarkerElement | null>>\n\t\t| Event<ITableEvent<MarkerTableItem>>;\n\tget onDidOpen(): Event<\n\t\tIOpenEvent<MarkerElement | MarkerTableItem | undefined>\n\t>;\n\n\tcollapseMarkers(): void;\n\tdispose(): void;\n\tdomFocus(): void;\n\tfilterMarkers(\n\t\tresourceMarkers: ResourceMarkers[],\n\t\tfilterOptions: FilterOptions,\n\t): void;\n\tgetFocus(): (MarkerElement | MarkerTableItem | null)[];\n\tgetHTMLElement(): HTMLElement;\n\tgetRelativeTop(\n\t\tlocation: MarkerElement | MarkerTableItem | null,\n\t): number | null;\n\tgetSelection(): (MarkerElement | MarkerTableItem | null)[];\n\tgetVisibleItemCount(): number;\n\tlayout(height: number, width: number): void;\n\treset(resourceMarkers: ResourceMarkers[]): void;\n\trevealMarkers(\n\t\tactiveResource: ResourceMarkers | null,\n\t\tfocus: boolean,\n\t\tlastSelectedRelativeTop: number,\n\t): void;\n\tsetAriaLabel(label: string): void;\n\tsetMarkerSelection(selection?: Marker[], focus?: Marker[]): void;\n\ttoggleVisibility(hide: boolean): void;\n\tupdate(resourceMarkers: ResourceMarkers[]): void;\n\tupdateMarker(marker: Marker): void;\n}\n\nexport class MarkersView extends FilterViewPane implements IMarkersView {\n\tprivate lastSelectedRelativeTop = 0;\n\tprivate currentActiveResource: URI | null = null;\n\n\tprivate readonly rangeHighlightDecorations: RangeHighlightDecorations;\n\tprivate readonly markersModel: MarkersModel;\n\tprivate readonly filter: Filter;\n\tprivate readonly onVisibleDisposables = this._register(\n\t\tnew DisposableStore(),\n\t);\n\n\tprivate widget!: IProblemsWidget;\n\tprivate readonly widgetDisposables = this._register(new DisposableStore());\n\tprivate widgetContainer!: HTMLElement;\n\tprivate widgetIdentityProvider: IIdentityProvider<\n\t\tMarkerElement | MarkerTableItem\n\t>;\n\tprivate widgetAccessibilityProvider: MarkersWidgetAccessibilityProvider;\n\tprivate messageBoxContainer: HTMLElement | undefined;\n\tprivate ariaLabelElement: HTMLElement | undefined;\n\treadonly filters: MarkersFilters;\n\n\tprivate currentHeight = 0;\n\tprivate currentWidth = 0;\n\tprivate readonly memento: Memento;\n\tprivate readonly panelState: MementoObject;\n\n\tprivate cachedFilterStats: { total: number; filtered: number } | undefined =\n\t\tundefined;\n\n\tprivate currentResourceGotAddedToMarkersData = false;\n\tprivate readonly markersViewModel: MarkersViewModel;\n\n\treadonly onDidChangeVisibility = this.onDidChangeBodyVisibility;\n\n\tconstructor(\n\t\toptions: IViewPaneOptions,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IMarkerService private readonly markerService: IMarkerService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IWorkspaceContextService\n\t\tprivate readonly workspaceContextService: IWorkspaceContextService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IUriIdentityService\n\t\tprivate readonly uriIdentityService: IUriIdentityService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IHoverService hoverService: IHoverService,\n\t) {\n\t\tconst memento = new Memento(\n\t\t\tMarkers.MARKERS_VIEW_STORAGE_ID,\n\t\t\tstorageService,\n\t\t);\n\t\tconst panelState = memento.getMemento(\n\t\t\tStorageScope.WORKSPACE,\n\t\t\tStorageTarget.MACHINE,\n\t\t);\n\t\tsuper(\n\t\t\t{\n\t\t\t\t...options,\n\t\t\t\tfilterOptions: {\n\t\t\t\t\tariaLabel: Messages.MARKERS_PANEL_FILTER_ARIA_LABEL,\n\t\t\t\t\tplaceholder: Messages.MARKERS_PANEL_FILTER_PLACEHOLDER,\n\t\t\t\t\tfocusContextKey:\n\t\t\t\t\t\tMarkersContextKeys.MarkerViewFilterFocusContextKey.key,\n\t\t\t\t\ttext: panelState[\"filter\"] || \"\",\n\t\t\t\t\thistory: panelState[\"filterHistory\"] || [],\n\t\t\t\t},\n\t\t\t},\n\t\t\tkeybindingService,\n\t\t\tcontextMenuService,\n\t\t\tconfigurationService,\n\t\t\tcontextKeyService,\n\t\t\tviewDescriptorService,\n\t\t\tinstantiationService,\n\t\t\topenerService,\n\t\t\tthemeService,\n\t\t\ttelemetryService,\n\t\t\thoverService,\n\t\t);\n\t\tthis.memento = memento;\n\t\tthis.panelState = panelState;\n\n\t\tthis.markersModel = this._register(\n\t\t\tinstantiationService.createInstance(MarkersModel),\n\t\t);\n\t\tthis.markersViewModel = this._register(\n\t\t\tinstantiationService.createInstance(\n\t\t\t\tMarkersViewModel,\n\t\t\t\tthis.panelState[\"multiline\"],\n\t\t\t\tthis.panelState[\"viewMode\"] ?? this.getDefaultViewMode(),\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.onDidChangeVisibility((visible) =>\n\t\t\t\tthis.onDidChangeMarkersViewVisibility(visible),\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.markersViewModel.onDidChangeViewMode((_) =>\n\t\t\t\tthis.onDidChangeViewMode(),\n\t\t\t),\n\t\t);\n\n\t\tthis.widgetAccessibilityProvider = instantiationService.createInstance(\n\t\t\tMarkersWidgetAccessibilityProvider,\n\t\t);\n\t\tthis.widgetIdentityProvider = {\n\t\t\tgetId(element: MarkerElement | MarkerTableItem) {\n\t\t\t\treturn element.id;\n\t\t\t},\n\t\t};\n\n\t\tthis.setCurrentActiveEditor();\n\n\t\tthis.filter = new Filter(FilterOptions.EMPTY(uriIdentityService));\n\t\tthis.rangeHighlightDecorations = this._register(\n\t\t\tthis.instantiationService.createInstance(RangeHighlightDecorations),\n\t\t);\n\n\t\tthis.filters = this._register(\n\t\t\tnew MarkersFilters(\n\t\t\t\t{\n\t\t\t\t\tfilterHistory: this.panelState[\"filterHistory\"] || [],\n\t\t\t\t\tshowErrors: this.panelState[\"showErrors\"] !== false,\n\t\t\t\t\tshowWarnings: this.panelState[\"showWarnings\"] !== false,\n\t\t\t\t\tshowInfos: this.panelState[\"showInfos\"] !== false,\n\t\t\t\t\texcludedFiles: !!this.panelState[\"useFilesExclude\"],\n\t\t\t\t\tactiveFile: !!this.panelState[\"activeFile\"],\n\t\t\t\t},\n\t\t\t\tthis.contextKeyService,\n\t\t\t),\n\t\t);\n\n\t\t// Update filter, whenever the \"files.exclude\" setting is changed\n\t\tthis._register(\n\t\t\tthis.configurationService.onDidChangeConfiguration((e) => {\n\t\t\t\tif (\n\t\t\t\t\tthis.filters.excludedFiles &&\n\t\t\t\t\te.affectsConfiguration(\"files.exclude\")\n\t\t\t\t) {\n\t\t\t\t\tthis.updateFilter();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t}\n\n\toverride render(): void {\n\t\tsuper.render();\n\t\tthis._register(\n\t\t\tregisterNavigableContainer({\n\t\t\t\tname: \"markersView\",\n\t\t\t\tfocusNotifiers: [this, this.filterWidget],\n\t\t\t\tfocusNextWidget: () => {\n\t\t\t\t\tif (this.filterWidget.hasFocus()) {\n\t\t\t\t\t\tthis.focus();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfocusPreviousWidget: () => {\n\t\t\t\t\tif (!this.filterWidget.hasFocus()) {\n\t\t\t\t\t\tthis.focusFilter();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t}),\n\t\t);\n\t}\n\n\tprotected override renderBody(parent: HTMLElement): void {\n\t\tsuper.renderBody(parent);\n\n\t\tparent.classList.add(\"markers-panel\");\n\t\tthis._register(\n\t\t\tdom.addDisposableListener(parent, \"keydown\", (e) => {\n\t\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\t\tif (\n\t\t\t\t\t!this.keybindingService.mightProducePrintableCharacter(\n\t\t\t\t\t\tevent,\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst result = this.keybindingService.softDispatch(\n\t\t\t\t\tevent,\n\t\t\t\t\tevent.target,\n\t\t\t\t);\n\t\t\t\tif (\n\t\t\t\t\tresult.kind === ResultKind.MoreChordsNeeded ||\n\t\t\t\t\tresult.kind === ResultKind.KbFound\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.focusFilter();\n\t\t\t}),\n\t\t);\n\n\t\tconst panelContainer = dom.append(\n\t\t\tparent,\n\t\t\tdom.$(\".markers-panel-container\"),\n\t\t);\n\n\t\tthis.createArialLabelElement(panelContainer);\n\n\t\tthis.createMessageBox(panelContainer);\n\n\t\tthis.widgetContainer = dom.append(\n\t\t\tpanelContainer,\n\t\t\tdom.$(\".widget-container\"),\n\t\t);\n\t\tthis.createWidget(this.widgetContainer);\n\n\t\tthis.updateFilter();\n\t\tthis.renderContent();\n\t}\n\n\tpublic getTitle(): string {\n\t\treturn Messages.MARKERS_PANEL_TITLE_PROBLEMS.value;\n\t}\n\n\tprotected layoutBodyContent(\n\t\theight: number = this.currentHeight,\n\t\twidth: number = this.currentWidth,\n\t): void {\n\t\tif (this.messageBoxContainer) {\n\t\t\tthis.messageBoxContainer.style.height = `${height}px`;\n\t\t}\n\t\tthis.widget.layout(height, width);\n\n\t\tthis.currentHeight = height;\n\t\tthis.currentWidth = width;\n\t}\n\n\tpublic override focus(): void {\n\t\tsuper.focus();\n\t\tif (dom.isActiveElement(this.widget.getHTMLElement())) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.hasNoProblems()) {\n\t\t\tthis.messageBoxContainer!.focus();\n\t\t} else {\n\t\t\tthis.widget.domFocus();\n\t\t\tthis.widget.setMarkerSelection();\n\t\t}\n\t}\n\n\tpublic focusFilter(): void {\n\t\tthis.filterWidget.focus();\n\t}\n\n\tpublic updateBadge(total: number, filtered: number): void {\n\t\tthis.filterWidget.updateBadge(\n\t\t\ttotal === filtered || total === 0\n\t\t\t\t? undefined\n\t\t\t\t: localize(\n\t\t\t\t\t\t\"showing filtered problems\",\n\t\t\t\t\t\t\"Showing {0} of {1}\",\n\t\t\t\t\t\tfiltered,\n\t\t\t\t\t\ttotal,\n\t\t\t\t\t),\n\t\t);\n\t}\n\n\tpublic checkMoreFilters(): void {\n\t\tthis.filterWidget.checkMoreFilters(\n\t\t\t!this.filters.showErrors ||\n\t\t\t\t!this.filters.showWarnings ||\n\t\t\t\t!this.filters.showInfos ||\n\t\t\t\tthis.filters.excludedFiles ||\n\t\t\t\tthis.filters.activeFile,\n\t\t);\n\t}\n\n\tpublic clearFilterText(): void {\n\t\tthis.filterWidget.setFilterText(\"\");\n\t}\n\n\tpublic showQuickFixes(marker: Marker): void {\n\t\tconst viewModel = this.markersViewModel.getViewModel(marker);\n\t\tif (viewModel) {\n\t\t\tviewModel.quickFixAction.run();\n\t\t}\n\t}\n\n\tpublic openFileAtElement(\n\t\telement: any,\n\t\tpreserveFocus: boolean,\n\t\tsideByside: boolean,\n\t\tpinned: boolean,\n\t): boolean {\n\t\tconst { resource, selection } =\n\t\t\telement instanceof Marker\n\t\t\t\t? { resource: element.resource, selection: element.range }\n\t\t\t\t: element instanceof RelatedInformation\n\t\t\t\t\t? { resource: element.raw.resource, selection: element.raw }\n\t\t\t\t\t: \"marker\" in element\n\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\tresource: element.marker.resource,\n\t\t\t\t\t\t\t\tselection: element.marker.range,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t: { resource: null, selection: null };\n\t\tif (resource && selection) {\n\t\t\tthis.editorService\n\t\t\t\t.openEditor(\n\t\t\t\t\t{\n\t\t\t\t\t\tresource,\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tselection,\n\t\t\t\t\t\t\tpreserveFocus,\n\t\t\t\t\t\t\tpinned,\n\t\t\t\t\t\t\trevealIfVisible: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tsideByside ? SIDE_GROUP : ACTIVE_GROUP,\n\t\t\t\t)\n\t\t\t\t.then((editor) => {\n\t\t\t\t\tif (editor && preserveFocus) {\n\t\t\t\t\t\tthis.rangeHighlightDecorations.highlightRange(\n\t\t\t\t\t\t\t{ resource, range: selection },\n\t\t\t\t\t\t\t<ICodeEditor>editor.getControl(),\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.rangeHighlightDecorations.removeHighlightRange();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\treturn true;\n\t\t} else {\n\t\t\tthis.rangeHighlightDecorations.removeHighlightRange();\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate refreshPanel(markerOrChange?: Marker | MarkerChangesEvent): void {\n\t\tif (this.isVisible()) {\n\t\t\tconst hasSelection = this.widget.getSelection().length > 0;\n\n\t\t\tif (markerOrChange) {\n\t\t\t\tif (markerOrChange instanceof Marker) {\n\t\t\t\t\tthis.widget.updateMarker(markerOrChange);\n\t\t\t\t} else if (\n\t\t\t\t\tmarkerOrChange.added.size ||\n\t\t\t\t\tmarkerOrChange.removed.size\n\t\t\t\t) {\n\t\t\t\t\t// Reset complete widget\n\t\t\t\t\tthis.resetWidget();\n\t\t\t\t} else {\n\t\t\t\t\t// Update resource\n\t\t\t\t\tthis.widget.update([...markerOrChange.updated]);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Reset complete widget\n\t\t\t\tthis.resetWidget();\n\t\t\t}\n\n\t\t\tif (hasSelection) {\n\t\t\t\tthis.widget.setMarkerSelection();\n\t\t\t}\n\n\t\t\tthis.cachedFilterStats = undefined;\n\t\t\tconst { total, filtered } = this.getFilterStats();\n\t\t\tthis.toggleVisibility(total === 0 || filtered === 0);\n\t\t\tthis.renderMessage();\n\n\t\t\tthis.updateBadge(total, filtered);\n\t\t\tthis.checkMoreFilters();\n\t\t}\n\t}\n\n\tprivate onDidChangeViewState(marker?: Marker): void {\n\t\tthis.refreshPanel(marker);\n\t}\n\n\tprivate resetWidget(): void {\n\t\tthis.widget.reset(this.getResourceMarkers());\n\t}\n\n\tprivate updateFilter() {\n\t\tthis.filter.options = new FilterOptions(\n\t\t\tthis.filterWidget.getFilterText(),\n\t\t\tthis.getFilesExcludeExpressions(),\n\t\t\tthis.filters.showWarnings,\n\t\t\tthis.filters.showErrors,\n\t\t\tthis.filters.showInfos,\n\t\t\tthis.uriIdentityService,\n\t\t);\n\t\tthis.widget.filterMarkers(\n\t\t\tthis.getResourceMarkers(),\n\t\t\tthis.filter.options,\n\t\t);\n\n\t\tthis.cachedFilterStats = undefined;\n\t\tconst { total, filtered } = this.getFilterStats();\n\t\tthis.toggleVisibility(total === 0 || filtered === 0);\n\t\tthis.renderMessage();\n\n\t\tthis.updateBadge(total, filtered);\n\t\tthis.checkMoreFilters();\n\t}\n\n\tprivate getDefaultViewMode(): MarkersViewMode {\n\t\tswitch (\n\t\t\tthis.configurationService.getValue<string>(\n\t\t\t\t\"problems.defaultViewMode\",\n\t\t\t)\n\t\t) {\n\t\t\tcase \"table\":\n\t\t\t\treturn MarkersViewMode.Table;\n\t\t\tcase \"tree\":\n\t\t\t\treturn MarkersViewMode.Tree;\n\t\t\tdefault:\n\t\t\t\treturn MarkersViewMode.Tree;\n\t\t}\n\t}\n\n\tprivate getFilesExcludeExpressions():\n\t\t| { root: URI; expression: IExpression }[]\n\t\t| IExpression {\n\t\tif (!this.filters.excludedFiles) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst workspaceFolders =\n\t\t\tthis.workspaceContextService.getWorkspace().folders;\n\t\treturn workspaceFolders.length\n\t\t\t? workspaceFolders.map((workspaceFolder) => ({\n\t\t\t\t\troot: workspaceFolder.uri,\n\t\t\t\t\texpression: this.getFilesExclude(workspaceFolder.uri),\n\t\t\t\t}))\n\t\t\t: this.getFilesExclude();\n\t}\n\n\tprivate getFilesExclude(resource?: URI): IExpression {\n\t\treturn (\n\t\t\tdeepClone(\n\t\t\t\tthis.configurationService.getValue(\"files.exclude\", {\n\t\t\t\t\tresource,\n\t\t\t\t}),\n\t\t\t) || {}\n\t\t);\n\t}\n\n\tprivate getResourceMarkers(): ResourceMarkers[] {\n\t\tif (!this.filters.activeFile) {\n\t\t\treturn this.markersModel.resourceMarkers;\n\t\t}\n\n\t\tlet resourceMarkers: ResourceMarkers[] = [];\n\t\tif (this.currentActiveResource) {\n\t\t\tconst activeResourceMarkers = this.markersModel.getResourceMarkers(\n\t\t\t\tthis.currentActiveResource,\n\t\t\t);\n\t\t\tif (activeResourceMarkers) {\n\t\t\t\tresourceMarkers = [activeResourceMarkers];\n\t\t\t}\n\t\t}\n\n\t\treturn resourceMarkers;\n\t}\n\n\tprivate createMessageBox(parent: HTMLElement): void {\n\t\tthis.messageBoxContainer = dom.append(\n\t\t\tparent,\n\t\t\tdom.$(\".message-box-container\"),\n\t\t);\n\t\tthis.messageBoxContainer.setAttribute(\n\t\t\t\"aria-labelledby\",\n\t\t\t\"markers-panel-arialabel\",\n\t\t);\n\t}\n\n\tprivate createArialLabelElement(parent: HTMLElement): void {\n\t\tthis.ariaLabelElement = dom.append(parent, dom.$(\"\"));\n\t\tthis.ariaLabelElement.setAttribute(\"id\", \"markers-panel-arialabel\");\n\t}\n\n\tprivate createWidget(parent: HTMLElement): void {\n\t\tthis.widget =\n\t\t\tthis.markersViewModel.viewMode === MarkersViewMode.Table\n\t\t\t\t? this.createTable(parent)\n\t\t\t\t: this.createTree(parent);\n\t\tthis.widgetDisposables.add(this.widget);\n\n\t\tconst markerFocusContextKey =\n\t\t\tMarkersContextKeys.MarkerFocusContextKey.bindTo(\n\t\t\t\tthis.widget.contextKeyService,\n\t\t\t);\n\t\tconst relatedInformationFocusContextKey =\n\t\t\tMarkersContextKeys.RelatedInformationFocusContextKey.bindTo(\n\t\t\t\tthis.widget.contextKeyService,\n\t\t\t);\n\t\tthis.widgetDisposables.add(\n\t\t\tthis.widget.onDidChangeFocus((focus) => {\n\t\t\t\tmarkerFocusContextKey.set(\n\t\t\t\t\tfocus.elements.some((e) => e instanceof Marker),\n\t\t\t\t);\n\t\t\t\trelatedInformationFocusContextKey.set(\n\t\t\t\t\tfocus.elements.some((e) => e instanceof RelatedInformation),\n\t\t\t\t);\n\t\t\t}),\n\t\t);\n\n\t\tthis.widgetDisposables.add(\n\t\t\tEvent.debounce(\n\t\t\t\tthis.widget.onDidOpen,\n\t\t\t\t(last, event) => event,\n\t\t\t\t75,\n\t\t\t\ttrue,\n\t\t\t)((options) => {\n\t\t\t\tthis.openFileAtElement(\n\t\t\t\t\toptions.element,\n\t\t\t\t\t!!options.editorOptions.preserveFocus,\n\t\t\t\t\toptions.sideBySide,\n\t\t\t\t\t!!options.editorOptions.pinned,\n\t\t\t\t);\n\t\t\t}),\n\t\t);\n\n\t\tthis.widgetDisposables.add(\n\t\t\tEvent.any<any>(\n\t\t\t\tthis.widget.onDidChangeSelection,\n\t\t\t\tthis.widget.onDidChangeFocus,\n\t\t\t)(() => {\n\t\t\t\tconst elements = [\n\t\t\t\t\t...this.widget.getSelection(),\n\t\t\t\t\t...this.widget.getFocus(),\n\t\t\t\t];\n\t\t\t\tfor (const element of elements) {\n\t\t\t\t\tif (element instanceof Marker) {\n\t\t\t\t\t\tconst viewModel =\n\t\t\t\t\t\t\tthis.markersViewModel.getViewModel(element);\n\t\t\t\t\t\tviewModel?.showLightBulb();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis.widgetDisposables.add(\n\t\t\tthis.widget.onContextMenu(this.onContextMenu, this),\n\t\t);\n\t\tthis.widgetDisposables.add(\n\t\t\tthis.widget.onDidChangeSelection(this.onSelected, this),\n\t\t);\n\t}\n\n\tprivate createTable(parent: HTMLElement): IProblemsWidget {\n\t\tconst table = this.instantiationService.createInstance(\n\t\t\tMarkersTable,\n\t\t\tdom.append(parent, dom.$(\".markers-table-container\")),\n\t\t\tthis.markersViewModel,\n\t\t\tthis.getResourceMarkers(),\n\t\t\tthis.filter.options,\n\t\t\t{\n\t\t\t\taccessibilityProvider: this.widgetAccessibilityProvider,\n\t\t\t\tdnd: this.instantiationService.createInstance(\n\t\t\t\t\tResourceListDnDHandler,\n\t\t\t\t\t(element) => {\n\t\t\t\t\t\tif (element instanceof MarkerTableItem) {\n\t\t\t\t\t\t\treturn withSelection(\n\t\t\t\t\t\t\t\telement.resource,\n\t\t\t\t\t\t\t\telement.range,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t\thorizontalScrolling: false,\n\t\t\t\tidentityProvider: this.widgetIdentityProvider,\n\t\t\t\tmultipleSelectionSupport: true,\n\t\t\t\tselectionNavigation: true,\n\t\t\t},\n\t\t);\n\n\t\treturn table;\n\t}\n\n\tprivate createTree(parent: HTMLElement): IProblemsWidget {\n\t\tconst onDidChangeRenderNodeCount = new Relay<ITreeNode<any, any>>();\n\n\t\tconst treeLabels = this.instantiationService.createInstance(\n\t\t\tResourceLabels,\n\t\t\tthis,\n\t\t);\n\n\t\tconst virtualDelegate = new VirtualDelegate(this.markersViewModel);\n\t\tconst renderers = [\n\t\t\tthis.instantiationService.createInstance(\n\t\t\t\tResourceMarkersRenderer,\n\t\t\t\ttreeLabels,\n\t\t\t\tonDidChangeRenderNodeCount.event,\n\t\t\t),\n\t\t\tthis.instantiationService.createInstance(\n\t\t\t\tMarkerRenderer,\n\t\t\t\tthis.markersViewModel,\n\t\t\t),\n\t\t\tthis.instantiationService.createInstance(\n\t\t\t\tRelatedInformationRenderer,\n\t\t\t),\n\t\t];\n\n\t\tconst tree = this.instantiationService.createInstance(\n\t\t\tMarkersTree,\n\t\t\t\"MarkersView\",\n\t\t\tdom.append(parent, dom.$(\".tree-container.show-file-icons\")),\n\t\t\tvirtualDelegate,\n\t\t\trenderers,\n\t\t\t{\n\t\t\t\tfilter: this.filter,\n\t\t\t\taccessibilityProvider: this.widgetAccessibilityProvider,\n\t\t\t\tidentityProvider: this.widgetIdentityProvider,\n\t\t\t\tdnd: this.instantiationService.createInstance(\n\t\t\t\t\tResourceListDnDHandler,\n\t\t\t\t\t(element) => {\n\t\t\t\t\t\tif (element instanceof ResourceMarkers) {\n\t\t\t\t\t\t\treturn element.resource;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (element instanceof Marker) {\n\t\t\t\t\t\t\treturn withSelection(\n\t\t\t\t\t\t\t\telement.resource,\n\t\t\t\t\t\t\t\telement.range,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (element instanceof RelatedInformation) {\n\t\t\t\t\t\t\treturn withSelection(\n\t\t\t\t\t\t\t\telement.raw.resource,\n\t\t\t\t\t\t\t\telement.raw,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t\texpandOnlyOnTwistieClick: (e: MarkerElement) =>\n\t\t\t\t\te instanceof Marker && e.relatedInformation.length > 0,\n\t\t\t\toverrideStyles:\n\t\t\t\t\tthis.getLocationBasedColors().listOverrideStyles,\n\t\t\t\tselectionNavigation: true,\n\t\t\t\tmultipleSelectionSupport: true,\n\t\t\t},\n\t\t);\n\n\t\tonDidChangeRenderNodeCount.input = tree.onDidChangeRenderNodeCount;\n\n\t\treturn tree;\n\t}\n\n\tcollapseAll(): void {\n\t\tthis.widget.collapseMarkers();\n\t}\n\n\tsetMultiline(multiline: boolean): void {\n\t\tthis.markersViewModel.multiline = multiline;\n\t}\n\n\tsetViewMode(viewMode: MarkersViewMode): void {\n\t\tthis.markersViewModel.viewMode = viewMode;\n\t}\n\n\tprivate onDidChangeMarkersViewVisibility(visible: boolean): void {\n\t\tthis.onVisibleDisposables.clear();\n\t\tif (visible) {\n\t\t\tfor (const disposable of this.reInitialize()) {\n\t\t\t\tthis.onVisibleDisposables.add(disposable);\n\t\t\t}\n\t\t\tthis.refreshPanel();\n\t\t}\n\t}\n\n\tprivate reInitialize(): IDisposable[] {\n\t\tconst disposables = [];\n\n\t\t// Markers Model\n\t\tconst readMarkers = (resource?: URI) =>\n\t\t\tthis.markerService.read({\n\t\t\t\tresource,\n\t\t\t\tseverities:\n\t\t\t\t\tMarkerSeverity.Error |\n\t\t\t\t\tMarkerSeverity.Warning |\n\t\t\t\t\tMarkerSeverity.Info,\n\t\t\t});\n\t\tthis.markersModel.setResourceMarkers(\n\t\t\tgroupBy(readMarkers(), compareMarkersByUri).map((group) => [\n\t\t\t\tgroup[0].resource,\n\t\t\t\tgroup,\n\t\t\t]),\n\t\t);\n\t\tdisposables.push(\n\t\t\tEvent.debounce<readonly URI[], ResourceMap<URI>>(\n\t\t\t\tthis.markerService.onMarkerChanged,\n\t\t\t\t(resourcesMap, resources) => {\n\t\t\t\t\tresourcesMap = resourcesMap || new ResourceMap<URI>();\n\t\t\t\t\tresources.forEach((resource) =>\n\t\t\t\t\t\tresourcesMap.set(resource, resource),\n\t\t\t\t\t);\n\t\t\t\t\treturn resourcesMap;\n\t\t\t\t},\n\t\t\t\t64,\n\t\t\t)((resourcesMap) => {\n\t\t\t\tthis.markersModel.setResourceMarkers(\n\t\t\t\t\t[...resourcesMap.values()].map((resource) => [\n\t\t\t\t\t\tresource,\n\t\t\t\t\t\treadMarkers(resource),\n\t\t\t\t\t]),\n\t\t\t\t);\n\t\t\t}),\n\t\t);\n\t\tdisposables.push(\n\t\t\tEvent.any<MarkerChangesEvent | void>(\n\t\t\t\tthis.markersModel.onDidChange,\n\t\t\t\tthis.editorService.onDidActiveEditorChange,\n\t\t\t)((changes) => {\n\t\t\t\tif (changes) {\n\t\t\t\t\tthis.onDidChangeModel(changes);\n\t\t\t\t} else {\n\t\t\t\t\tthis.onActiveEditorChanged();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t\tdisposables.push(toDisposable(() => this.markersModel.reset()));\n\n\t\t// Markers View Model\n\t\tthis.markersModel.resourceMarkers.forEach((resourceMarker) =>\n\t\t\tresourceMarker.markers.forEach((marker) =>\n\t\t\t\tthis.markersViewModel.add(marker),\n\t\t\t),\n\t\t);\n\t\tdisposables.push(\n\t\t\tthis.markersViewModel.onDidChange((marker) =>\n\t\t\t\tthis.onDidChangeViewState(marker),\n\t\t\t),\n\t\t);\n\t\tdisposables.push(\n\t\t\ttoDisposable(() =>\n\t\t\t\tthis.markersModel.resourceMarkers.forEach((resourceMarker) =>\n\t\t\t\t\tthis.markersViewModel.remove(resourceMarker.resource),\n\t\t\t\t),\n\t\t\t),\n\t\t);\n\n\t\t// Markers Filters\n\t\tdisposables.push(\n\t\t\tthis.filters.onDidChange((event: IMarkersFiltersChangeEvent) => {\n\t\t\t\tif (event.activeFile) {\n\t\t\t\t\tthis.refreshPanel();\n\t\t\t\t} else if (\n\t\t\t\t\tevent.excludedFiles ||\n\t\t\t\t\tevent.showWarnings ||\n\t\t\t\t\tevent.showErrors ||\n\t\t\t\t\tevent.showInfos\n\t\t\t\t) {\n\t\t\t\t\tthis.updateFilter();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t\tdisposables.push(\n\t\t\tthis.filterWidget.onDidChangeFilterText((e) => this.updateFilter()),\n\t\t);\n\t\tdisposables.push(\n\t\t\ttoDisposable(() => {\n\t\t\t\tthis.cachedFilterStats = undefined;\n\t\t\t}),\n\t\t);\n\n\t\tdisposables.push(\n\t\t\ttoDisposable(() =>\n\t\t\t\tthis.rangeHighlightDecorations.removeHighlightRange(),\n\t\t\t),\n\t\t);\n\n\t\treturn disposables;\n\t}\n\n\tprivate onDidChangeModel(change: MarkerChangesEvent): void {\n\t\tconst resourceMarkers = [\n\t\t\t...change.added,\n\t\t\t...change.removed,\n\t\t\t...change.updated,\n\t\t];\n\t\tconst resources: URI[] = [];\n\t\tfor (const { resource } of resourceMarkers) {\n\t\t\tthis.markersViewModel.remove(resource);\n\t\t\tconst resourceMarkers =\n\t\t\t\tthis.markersModel.getResourceMarkers(resource);\n\t\t\tif (resourceMarkers) {\n\t\t\t\tfor (const marker of resourceMarkers.markers) {\n\t\t\t\t\tthis.markersViewModel.add(marker);\n\t\t\t\t}\n\t\t\t}\n\t\t\tresources.push(resource);\n\t\t}\n\t\tthis.currentResourceGotAddedToMarkersData =\n\t\t\tthis.currentResourceGotAddedToMarkersData ||\n\t\t\tthis.isCurrentResourceGotAddedToMarkersData(resources);\n\t\tthis.refreshPanel(change);\n\t\tthis.updateRangeHighlights();\n\t\tif (this.currentResourceGotAddedToMarkersData) {\n\t\t\tthis.autoReveal();\n\t\t\tthis.currentResourceGotAddedToMarkersData = false;\n\t\t}\n\t}\n\n\tprivate onDidChangeViewMode(): void {\n\t\tif (this.widgetContainer && this.widget) {\n\t\t\tthis.widgetContainer.textContent = \"\";\n\t\t\tthis.widgetDisposables.clear();\n\t\t}\n\n\t\t// Save selection\n\t\tconst selection = new Set<Marker>();\n\t\tfor (const marker of this.widget.getSelection()) {\n\t\t\tif (marker instanceof ResourceMarkers) {\n\t\t\t\tmarker.markers.forEach((m) => selection.add(m));\n\t\t\t} else if (\n\t\t\t\tmarker instanceof Marker ||\n\t\t\t\tmarker instanceof MarkerTableItem\n\t\t\t) {\n\t\t\t\tselection.add(marker);\n\t\t\t}\n\t\t}\n\n\t\t// Save focus\n\t\tconst focus = new Set<Marker>();\n\t\tfor (const marker of this.widget.getFocus()) {\n\t\t\tif (marker instanceof Marker || marker instanceof MarkerTableItem) {\n\t\t\t\tfocus.add(marker);\n\t\t\t}\n\t\t}\n\n\t\t// Create new widget\n\t\tthis.createWidget(this.widgetContainer);\n\t\tthis.refreshPanel();\n\n\t\t// Restore selection\n\t\tif (selection.size > 0) {\n\t\t\tthis.widget.setMarkerSelection(\n\t\t\t\tArray.from(selection),\n\t\t\t\tArray.from(focus),\n\t\t\t);\n\t\t\tthis.widget.domFocus();\n\t\t}\n\t}\n\n\tprivate isCurrentResourceGotAddedToMarkersData(changedResources: URI[]) {\n\t\tconst currentlyActiveResource = this.currentActiveResource;\n\t\tif (!currentlyActiveResource) {\n\t\t\treturn false;\n\t\t}\n\t\tconst resourceForCurrentActiveResource =\n\t\t\tthis.getResourceForCurrentActiveResource();\n\t\tif (resourceForCurrentActiveResource) {\n\t\t\treturn false;\n\t\t}\n\t\treturn changedResources.some(\n\t\t\t(r) => r.toString() === currentlyActiveResource.toString(),\n\t\t);\n\t}\n\n\tprivate onActiveEditorChanged(): void {\n\t\tthis.setCurrentActiveEditor();\n\t\tif (this.filters.activeFile) {\n\t\t\tthis.refreshPanel();\n\t\t}\n\t\tthis.autoReveal();\n\t}\n\n\tprivate setCurrentActiveEditor(): void {\n\t\tconst activeEditor = this.editorService.activeEditor;\n\t\tthis.currentActiveResource = activeEditor\n\t\t\t? (EditorResourceAccessor.getOriginalUri(activeEditor, {\n\t\t\t\t\tsupportSideBySide: SideBySideEditor.PRIMARY,\n\t\t\t\t}) ?? null)\n\t\t\t: null;\n\t}\n\n\tprivate onSelected(): void {\n\t\tconst selection = this.widget.getSelection();\n\t\tif (selection && selection.length > 0) {\n\t\t\tthis.lastSelectedRelativeTop =\n\t\t\t\tthis.widget.getRelativeTop(selection[0]) || 0;\n\t\t}\n\t}\n\n\tprivate hasNoProblems(): boolean {\n\t\tconst { total, filtered } = this.getFilterStats();\n\t\treturn total === 0 || filtered === 0;\n\t}\n\n\tprivate renderContent(): void {\n\t\tthis.cachedFilterStats = undefined;\n\t\tthis.resetWidget();\n\t\tthis.toggleVisibility(this.hasNoProblems());\n\t\tthis.renderMessage();\n\t}\n\n\tprivate renderMessage(): void {\n\t\tif (!this.messageBoxContainer || !this.ariaLabelElement) {\n\t\t\treturn;\n\t\t}\n\t\tdom.clearNode(this.messageBoxContainer);\n\t\tconst { total, filtered } = this.getFilterStats();\n\n\t\tif (filtered === 0) {\n\t\t\tthis.messageBoxContainer.style.display = \"block\";\n\t\t\tthis.messageBoxContainer.setAttribute(\"tabIndex\", \"0\");\n\t\t\tif (this.filters.activeFile) {\n\t\t\t\tthis.renderFilterMessageForActiveFile(this.messageBoxContainer);\n\t\t\t} else if (total > 0) {\n\t\t\t\tthis.renderFilteredByFilterMessage(this.messageBoxContainer);\n\t\t\t} else {\n\t\t\t\tthis.renderNoProblemsMessage(this.messageBoxContainer);\n\t\t\t}\n\t\t} else {\n\t\t\tthis.messageBoxContainer.style.display = \"none\";\n\t\t\tif (filtered === total) {\n\t\t\t\tthis.setAriaLabel(\n\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\"No problems filtered\",\n\t\t\t\t\t\t\"Showing {0} problems\",\n\t\t\t\t\t\ttotal,\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.setAriaLabel(\n\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\"problems filtered\",\n\t\t\t\t\t\t\"Showing {0} of {1} problems\",\n\t\t\t\t\t\tfiltered,\n\t\t\t\t\t\ttotal,\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\t\t\tthis.messageBoxContainer.removeAttribute(\"tabIndex\");\n\t\t}\n\t}\n\n\tprivate renderFilterMessageForActiveFile(container: HTMLElement): void {\n\t\tif (\n\t\t\tthis.currentActiveResource &&\n\t\t\tthis.markersModel.getResourceMarkers(this.currentActiveResource)\n\t\t) {\n\t\t\tthis.renderFilteredByFilterMessage(container);\n\t\t} else {\n\t\t\tthis.renderNoProblemsMessageForActiveFile(container);\n\t\t}\n\t}\n\n\tprivate renderFilteredByFilterMessage(container: HTMLElement) {\n\t\tconst span1 = dom.append(container, dom.$(\"span\"));\n\t\tspan1.textContent = Messages.MARKERS_PANEL_NO_PROBLEMS_FILTERS;\n\t\tconst link = dom.append(container, dom.$(\"a.messageAction\"));\n\t\tlink.textContent = localize(\"clearFilter\", \"Clear Filters\");\n\t\tlink.setAttribute(\"tabIndex\", \"0\");\n\t\tconst span2 = dom.append(container, dom.$(\"span\"));\n\t\tspan2.textContent = \".\";\n\t\tdom.addStandardDisposableListener(link, dom.EventType.CLICK, () =>\n\t\t\tthis.clearFilters(),\n\t\t);\n\t\tdom.addStandardDisposableListener(\n\t\t\tlink,\n\t\t\tdom.EventType.KEY_DOWN,\n\t\t\t(e: IKeyboardEvent) => {\n\t\t\t\tif (e.equals(KeyCode.Enter) || e.equals(KeyCode.Space)) {\n\t\t\t\t\tthis.clearFilters();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t\tthis.setAriaLabel(Messages.MARKERS_PANEL_NO_PROBLEMS_FILTERS);\n\t}\n\n\tprivate renderNoProblemsMessageForActiveFile(container: HTMLElement) {\n\t\tconst span = dom.append(container, dom.$(\"span\"));\n\t\tspan.textContent = Messages.MARKERS_PANEL_NO_PROBLEMS_ACTIVE_FILE_BUILT;\n\t\tthis.setAriaLabel(Messages.MARKERS_PANEL_NO_PROBLEMS_ACTIVE_FILE_BUILT);\n\t}\n\n\tprivate renderNoProblemsMessage(container: HTMLElement) {\n\t\tconst span = dom.append(container, dom.$(\"span\"));\n\t\tspan.textContent = Messages.MARKERS_PANEL_NO_PROBLEMS_BUILT;\n\t\tthis.setAriaLabel(Messages.MARKERS_PANEL_NO_PROBLEMS_BUILT);\n\t}\n\n\tprivate setAriaLabel(label: string): void {\n\t\tthis.widget.setAriaLabel(label);\n\t\tthis.ariaLabelElement!.setAttribute(\"aria-label\", label);\n\t}\n\n\tprivate clearFilters(): void {\n\t\tthis.filterWidget.setFilterText(\"\");\n\t\tthis.filters.excludedFiles = false;\n\t\tthis.filters.showErrors = true;\n\t\tthis.filters.showWarnings = true;\n\t\tthis.filters.showInfos = true;\n\t}\n\n\tprivate autoReveal(focus = false): void {\n\t\t// No need to auto reveal if active file filter is on\n\t\tif (this.filters.activeFile) {\n\t\t\treturn;\n\t\t}\n\t\tconst autoReveal = this.configurationService.getValue<boolean>(\n\t\t\t\"problems.autoReveal\",\n\t\t);\n\t\tif (typeof autoReveal === \"boolean\" && autoReveal) {\n\t\t\tconst currentActiveResource =\n\t\t\t\tthis.getResourceForCurrentActiveResource();\n\t\t\tthis.widget.revealMarkers(\n\t\t\t\tcurrentActiveResource,\n\t\t\t\tfocus,\n\t\t\t\tthis.lastSelectedRelativeTop,\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate getResourceForCurrentActiveResource(): ResourceMarkers | null {\n\t\treturn this.currentActiveResource\n\t\t\t? this.markersModel.getResourceMarkers(this.currentActiveResource)\n\t\t\t: null;\n\t}\n\n\tprivate updateRangeHighlights() {\n\t\tthis.rangeHighlightDecorations.removeHighlightRange();\n\t\tif (dom.isActiveElement(this.widget.getHTMLElement())) {\n\t\t\tthis.highlightCurrentSelectedMarkerRange();\n\t\t}\n\t}\n\n\tprivate highlightCurrentSelectedMarkerRange() {\n\t\tconst selections = this.widget.getSelection() ?? [];\n\n\t\tif (selections.length !== 1) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst selection = selections[0];\n\n\t\tif (!(selection instanceof Marker)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.rangeHighlightDecorations.highlightRange(selection);\n\t}\n\n\tprivate onContextMenu(\n\t\te:\n\t\t\t| ITreeContextMenuEvent<MarkerElement | null>\n\t\t\t| ITableContextMenuEvent<MarkerTableItem>,\n\t): void {\n\t\tconst element = e.element;\n\t\tif (!element) {\n\t\t\treturn;\n\t\t}\n\n\t\te.browserEvent.preventDefault();\n\t\te.browserEvent.stopPropagation();\n\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tgetAnchor: () => e.anchor,\n\t\t\tmenuId: MenuId.ProblemsPanelContext,\n\t\t\tcontextKeyService: this.widget.contextKeyService,\n\t\t\tgetActions: () => this.getMenuActions(element),\n\t\t\tgetActionViewItem: (action) => {\n\t\t\t\tconst keybinding = this.keybindingService.lookupKeybinding(\n\t\t\t\t\taction.id,\n\t\t\t\t);\n\t\t\t\tif (keybinding) {\n\t\t\t\t\treturn new ActionViewItem(action, action, {\n\t\t\t\t\t\tlabel: true,\n\t\t\t\t\t\tkeybinding: keybinding.getLabel(),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t},\n\t\t\tonHide: (wasCancelled?: boolean) => {\n\t\t\t\tif (wasCancelled) {\n\t\t\t\t\tthis.widget.domFocus();\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\t}\n\n\tprivate getMenuActions(element: MarkerElement | null): IAction[] {\n\t\tconst result: IAction[] = [];\n\n\t\tif (element instanceof Marker) {\n\t\t\tconst viewModel = this.markersViewModel.getViewModel(element);\n\t\t\tif (viewModel) {\n\t\t\t\tconst quickFixActions = viewModel.quickFixAction.quickFixes;\n\t\t\t\tif (quickFixActions.length) {\n\t\t\t\t\tresult.push(...quickFixActions);\n\t\t\t\t\tresult.push(new Separator());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tpublic getFocusElement(): MarkerElement | undefined {\n\t\treturn this.widget.getFocus()[0] ?? undefined;\n\t}\n\n\tpublic getFocusedSelectedElements(): MarkerElement[] | null {\n\t\tconst focus = this.getFocusElement();\n\t\tif (!focus) {\n\t\t\treturn null;\n\t\t}\n\t\tconst selection = this.widget.getSelection();\n\t\tif (selection.includes(focus)) {\n\t\t\tconst result: MarkerElement[] = [];\n\t\t\tfor (const selected of selection) {\n\t\t\t\tif (selected) {\n\t\t\t\t\tresult.push(selected);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t} else {\n\t\t\treturn [focus];\n\t\t}\n\t}\n\n\tpublic getAllResourceMarkers(): ResourceMarkers[] {\n\t\treturn this.markersModel.resourceMarkers;\n\t}\n\n\tgetFilterStats(): { total: number; filtered: number } {\n\t\tif (!this.cachedFilterStats) {\n\t\t\tthis.cachedFilterStats = {\n\t\t\t\ttotal: this.markersModel.total,\n\t\t\t\tfiltered: this.widget?.getVisibleItemCount() ?? 0,\n\t\t\t};\n\t\t}\n\n\t\treturn this.cachedFilterStats;\n\t}\n\n\tprivate toggleVisibility(hide: boolean): void {\n\t\tthis.widget.toggleVisibility(hide);\n\t\tthis.layoutBodyContent();\n\t}\n\n\toverride saveState(): void {\n\t\tthis.panelState[\"filter\"] = this.filterWidget.getFilterText();\n\t\tthis.panelState[\"filterHistory\"] = this.filters.filterHistory;\n\t\tthis.panelState[\"showErrors\"] = this.filters.showErrors;\n\t\tthis.panelState[\"showWarnings\"] = this.filters.showWarnings;\n\t\tthis.panelState[\"showInfos\"] = this.filters.showInfos;\n\t\tthis.panelState[\"useFilesExclude\"] = this.filters.excludedFiles;\n\t\tthis.panelState[\"activeFile\"] = this.filters.activeFile;\n\t\tthis.panelState[\"multiline\"] = this.markersViewModel.multiline;\n\t\tthis.panelState[\"viewMode\"] = this.markersViewModel.viewMode;\n\n\t\tthis.memento.saveMemento();\n\t\tsuper.saveState();\n\t}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\t}\n}\n\nclass MarkersTree\n\textends WorkbenchObjectTree<MarkerElement, FilterData>\n\timplements IProblemsWidget\n{\n\tprivate readonly visibilityContextKey: IContextKey<boolean>;\n\n\tconstructor(\n\t\tuser: string,\n\t\tprivate readonly container: HTMLElement,\n\t\tdelegate: IListVirtualDelegate<MarkerElement>,\n\t\trenderers: ITreeRenderer<MarkerElement, FilterData, any>[],\n\t\toptions: IWorkbenchObjectTreeOptions<MarkerElement, FilterData>,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IListService listService: IListService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t) {\n\t\tsuper(\n\t\t\tuser,\n\t\t\tcontainer,\n\t\t\tdelegate,\n\t\t\trenderers,\n\t\t\toptions,\n\t\t\tinstantiationService,\n\t\t\tcontextKeyService,\n\t\t\tlistService,\n\t\t\tconfigurationService,\n\t\t);\n\t\tthis.visibilityContextKey =\n\t\t\tMarkersContextKeys.MarkersTreeVisibilityContextKey.bindTo(\n\t\t\t\tcontextKeyService,\n\t\t\t);\n\t}\n\n\tcollapseMarkers(): void {\n\t\tthis.collapseAll();\n\t\tthis.setSelection([]);\n\t\tthis.setFocus([]);\n\t\tthis.getHTMLElement().focus();\n\t\tthis.focusFirst();\n\t}\n\n\tfilterMarkers(): void {\n\t\tthis.refilter();\n\t}\n\n\tgetVisibleItemCount(): number {\n\t\tlet filtered = 0;\n\t\tconst root = this.getNode();\n\n\t\tfor (const resourceMarkerNode of root.children) {\n\t\t\tfor (const markerNode of resourceMarkerNode.children) {\n\t\t\t\tif (resourceMarkerNode.visible && markerNode.visible) {\n\t\t\t\t\tfiltered++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn filtered;\n\t}\n\n\tisVisible(): boolean {\n\t\treturn !this.container.classList.contains(\"hidden\");\n\t}\n\n\ttoggleVisibility(hide: boolean): void {\n\t\tthis.visibilityContextKey.set(!hide);\n\t\tthis.container.classList.toggle(\"hidden\", hide);\n\t}\n\n\treset(resourceMarkers: ResourceMarkers[]): void {\n\t\tthis.setChildren(\n\t\t\tnull,\n\t\t\tIterable.map(resourceMarkers, (m) => ({\n\t\t\t\telement: m,\n\t\t\t\tchildren: createResourceMarkersIterator(m),\n\t\t\t})),\n\t\t);\n\t}\n\n\trevealMarkers(\n\t\tactiveResource: ResourceMarkers | null,\n\t\tfocus: boolean,\n\t\tlastSelectedRelativeTop: number,\n\t): void {\n\t\tif (activeResource) {\n\t\t\tif (this.hasElement(activeResource)) {\n\t\t\t\tif (\n\t\t\t\t\t!this.isCollapsed(activeResource) &&\n\t\t\t\t\tthis.hasSelectedMarkerFor(activeResource)\n\t\t\t\t) {\n\t\t\t\t\tthis.reveal(\n\t\t\t\t\t\tthis.getSelection()[0],\n\t\t\t\t\t\tlastSelectedRelativeTop,\n\t\t\t\t\t);\n\t\t\t\t\tif (focus) {\n\t\t\t\t\t\tthis.setFocus(this.getSelection());\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.expand(activeResource);\n\t\t\t\t\tthis.reveal(activeResource, 0);\n\n\t\t\t\t\tif (focus) {\n\t\t\t\t\t\tthis.setFocus([activeResource]);\n\t\t\t\t\t\tthis.setSelection([activeResource]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (focus) {\n\t\t\tthis.setSelection([]);\n\t\t\tthis.focusFirst();\n\t\t}\n\t}\n\n\tsetAriaLabel(label: string): void {\n\t\tthis.ariaLabel = label;\n\t}\n\n\tsetMarkerSelection(selection?: Marker[], focus?: Marker[]): void {\n\t\tif (this.isVisible()) {\n\t\t\tif (selection && selection.length > 0) {\n\t\t\t\tthis.setSelection(selection.map((m) => this.findMarkerNode(m)));\n\n\t\t\t\tif (focus && focus.length > 0) {\n\t\t\t\t\tthis.setFocus(focus.map((f) => this.findMarkerNode(f)));\n\t\t\t\t} else {\n\t\t\t\t\tthis.setFocus([this.findMarkerNode(selection[0])]);\n\t\t\t\t}\n\n\t\t\t\tthis.reveal(this.findMarkerNode(selection[0]));\n\t\t\t} else if (this.getSelection().length === 0) {\n\t\t\t\tconst firstVisibleElement = this.firstVisibleElement;\n\t\t\t\tconst marker = firstVisibleElement\n\t\t\t\t\t? firstVisibleElement instanceof ResourceMarkers\n\t\t\t\t\t\t? firstVisibleElement.markers[0]\n\t\t\t\t\t\t: firstVisibleElement instanceof Marker\n\t\t\t\t\t\t\t? firstVisibleElement\n\t\t\t\t\t\t\t: undefined\n\t\t\t\t\t: undefined;\n\n\t\t\t\tif (marker) {\n\t\t\t\t\tthis.setSelection([marker]);\n\t\t\t\t\tthis.setFocus([marker]);\n\t\t\t\t\tthis.reveal(marker);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tupdate(resourceMarkers: ResourceMarkers[]): void {\n\t\tfor (const resourceMarker of resourceMarkers) {\n\t\t\tif (this.hasElement(resourceMarker)) {\n\t\t\t\tthis.setChildren(\n\t\t\t\t\tresourceMarker,\n\t\t\t\t\tcreateResourceMarkersIterator(resourceMarker),\n\t\t\t\t);\n\t\t\t\tthis.rerender(resourceMarker);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateMarker(marker: Marker): void {\n\t\tthis.rerender(marker);\n\t}\n\n\tprivate findMarkerNode(marker: Marker) {\n\t\tfor (const resourceNode of this.getNode().children) {\n\t\t\tfor (const markerNode of resourceNode.children) {\n\t\t\t\tif (\n\t\t\t\t\tmarkerNode.element instanceof Marker &&\n\t\t\t\t\tmarkerNode.element.marker === marker.marker\n\t\t\t\t) {\n\t\t\t\t\treturn markerNode.element;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate hasSelectedMarkerFor(resource: ResourceMarkers): boolean {\n\t\tconst selectedElement = this.getSelection();\n\t\tif (selectedElement && selectedElement.length > 0) {\n\t\t\tif (selectedElement[0] instanceof Marker) {\n\t\t\t\tif (\n\t\t\t\t\tresource.has((<Marker>selectedElement[0]).marker.resource)\n\t\t\t\t) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t}\n\n\toverride layout(height: number, width: number): void {\n\t\tthis.container.style.height = `${height}px`;\n\t\tsuper.layout(height, width);\n\t}\n}\n"],
  "mappings": "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",
  "names": ["resourceMarkers"]
}
