{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/markers/browser/markersViewActions.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from \"../../../../base/browser/dom.js\";\nimport {\n\tActionViewItem,\n\ttype IActionViewItemOptions,\n} from \"../../../../base/browser/ui/actionbar/actionViewItems.js\";\nimport { Action, type IAction } from \"../../../../base/common/actions.js\";\nimport { Codicon } from \"../../../../base/common/codicons.js\";\nimport { Emitter, type Event } from \"../../../../base/common/event.js\";\nimport { Disposable } from \"../../../../base/common/lifecycle.js\";\nimport { ThemeIcon } from \"../../../../base/common/themables.js\";\nimport type { IContextKeyService } from \"../../../../platform/contextkey/common/contextkey.js\";\nimport { IContextMenuService } from \"../../../../platform/contextview/browser/contextView.js\";\nimport { MarkersContextKeys } from \"../common/markers.js\";\nimport type { Marker } from \"./markersModel.js\";\nimport Messages from \"./messages.js\";\nimport \"./markersViewActions.css\";\n\nexport interface IMarkersFiltersChangeEvent {\n\texcludedFiles?: boolean;\n\tshowWarnings?: boolean;\n\tshowErrors?: boolean;\n\tshowInfos?: boolean;\n\tactiveFile?: boolean;\n}\n\nexport interface IMarkersFiltersOptions {\n\tfilterHistory: string[];\n\tshowErrors: boolean;\n\tshowWarnings: boolean;\n\tshowInfos: boolean;\n\texcludedFiles: boolean;\n\tactiveFile: boolean;\n}\n\nexport class MarkersFilters extends Disposable {\n\tprivate readonly _onDidChange: Emitter<IMarkersFiltersChangeEvent> =\n\t\tthis._register(new Emitter<IMarkersFiltersChangeEvent>());\n\treadonly onDidChange: Event<IMarkersFiltersChangeEvent> =\n\t\tthis._onDidChange.event;\n\n\tconstructor(\n\t\toptions: IMarkersFiltersOptions,\n\t\tprivate readonly contextKeyService: IContextKeyService,\n\t) {\n\t\tsuper();\n\n\t\tthis._showErrors.set(options.showErrors);\n\t\tthis._showWarnings.set(options.showWarnings);\n\t\tthis._showInfos.set(options.showInfos);\n\t\tthis._excludedFiles.set(options.excludedFiles);\n\t\tthis._activeFile.set(options.activeFile);\n\t\tthis.filterHistory = options.filterHistory;\n\t}\n\n\tfilterHistory: string[];\n\n\tprivate readonly _excludedFiles =\n\t\tMarkersContextKeys.ShowExcludedFilesFilterContextKey.bindTo(\n\t\t\tthis.contextKeyService,\n\t\t);\n\tget excludedFiles(): boolean {\n\t\treturn !!this._excludedFiles.get();\n\t}\n\tset excludedFiles(filesExclude: boolean) {\n\t\tif (this._excludedFiles.get() !== filesExclude) {\n\t\t\tthis._excludedFiles.set(filesExclude);\n\t\t\tthis._onDidChange.fire({ excludedFiles: true });\n\t\t}\n\t}\n\n\tprivate readonly _activeFile =\n\t\tMarkersContextKeys.ShowActiveFileFilterContextKey.bindTo(\n\t\t\tthis.contextKeyService,\n\t\t);\n\tget activeFile(): boolean {\n\t\treturn !!this._activeFile.get();\n\t}\n\tset activeFile(activeFile: boolean) {\n\t\tif (this._activeFile.get() !== activeFile) {\n\t\t\tthis._activeFile.set(activeFile);\n\t\t\tthis._onDidChange.fire({ activeFile: true });\n\t\t}\n\t}\n\n\tprivate readonly _showWarnings =\n\t\tMarkersContextKeys.ShowWarningsFilterContextKey.bindTo(\n\t\t\tthis.contextKeyService,\n\t\t);\n\tget showWarnings(): boolean {\n\t\treturn !!this._showWarnings.get();\n\t}\n\tset showWarnings(showWarnings: boolean) {\n\t\tif (this._showWarnings.get() !== showWarnings) {\n\t\t\tthis._showWarnings.set(showWarnings);\n\t\t\tthis._onDidChange.fire({ showWarnings: true });\n\t\t}\n\t}\n\n\tprivate readonly _showErrors =\n\t\tMarkersContextKeys.ShowErrorsFilterContextKey.bindTo(\n\t\t\tthis.contextKeyService,\n\t\t);\n\tget showErrors(): boolean {\n\t\treturn !!this._showErrors.get();\n\t}\n\tset showErrors(showErrors: boolean) {\n\t\tif (this._showErrors.get() !== showErrors) {\n\t\t\tthis._showErrors.set(showErrors);\n\t\t\tthis._onDidChange.fire({ showErrors: true });\n\t\t}\n\t}\n\n\tprivate readonly _showInfos =\n\t\tMarkersContextKeys.ShowInfoFilterContextKey.bindTo(\n\t\t\tthis.contextKeyService,\n\t\t);\n\tget showInfos(): boolean {\n\t\treturn !!this._showInfos.get();\n\t}\n\tset showInfos(showInfos: boolean) {\n\t\tif (this._showInfos.get() !== showInfos) {\n\t\t\tthis._showInfos.set(showInfos);\n\t\t\tthis._onDidChange.fire({ showInfos: true });\n\t\t}\n\t}\n}\n\nexport class QuickFixAction extends Action {\n\tpublic static readonly ID: string = \"workbench.actions.problems.quickfix\";\n\tprivate static readonly CLASS: string =\n\t\t\"markers-panel-action-quickfix \" +\n\t\tThemeIcon.asClassName(Codicon.lightBulb);\n\tprivate static readonly AUTO_FIX_CLASS: string =\n\t\tQuickFixAction.CLASS + \" autofixable\";\n\n\tprivate readonly _onShowQuickFixes = this._register(new Emitter<void>());\n\treadonly onShowQuickFixes: Event<void> = this._onShowQuickFixes.event;\n\n\tprivate _quickFixes: IAction[] = [];\n\tget quickFixes(): IAction[] {\n\t\treturn this._quickFixes;\n\t}\n\tset quickFixes(quickFixes: IAction[]) {\n\t\tthis._quickFixes = quickFixes;\n\t\tthis.enabled = this._quickFixes.length > 0;\n\t}\n\n\tautoFixable(autofixable: boolean) {\n\t\tthis.class = autofixable\n\t\t\t? QuickFixAction.AUTO_FIX_CLASS\n\t\t\t: QuickFixAction.CLASS;\n\t}\n\n\tconstructor(readonly marker: Marker) {\n\t\tsuper(\n\t\t\tQuickFixAction.ID,\n\t\t\tMessages.MARKERS_PANEL_ACTION_TOOLTIP_QUICKFIX,\n\t\t\tQuickFixAction.CLASS,\n\t\t\tfalse,\n\t\t);\n\t}\n\n\toverride run(): Promise<void> {\n\t\tthis._onShowQuickFixes.fire();\n\t\treturn Promise.resolve();\n\t}\n}\n\nexport class QuickFixActionViewItem extends ActionViewItem {\n\tconstructor(\n\t\taction: QuickFixAction,\n\t\toptions: IActionViewItemOptions,\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService,\n\t) {\n\t\tsuper(null, action, { ...options, icon: true, label: false });\n\t}\n\n\tpublic override onClick(event: DOM.EventLike): void {\n\t\tDOM.EventHelper.stop(event, true);\n\t\tthis.showQuickFixes();\n\t}\n\n\tpublic showQuickFixes(): void {\n\t\tif (!this.element) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.isEnabled()) {\n\t\t\treturn;\n\t\t}\n\t\tconst elementPosition = DOM.getDomNodePagePosition(this.element);\n\t\tconst quickFixes = (<QuickFixAction>this.action).quickFixes;\n\t\tif (quickFixes.length) {\n\t\t\tthis.contextMenuService.showContextMenu({\n\t\t\t\tgetAnchor: () => ({\n\t\t\t\t\tx: elementPosition.left + 10,\n\t\t\t\t\ty: elementPosition.top + elementPosition.height + 4,\n\t\t\t\t}),\n\t\t\t\tgetActions: () => quickFixes,\n\t\t\t});\n\t\t}\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
