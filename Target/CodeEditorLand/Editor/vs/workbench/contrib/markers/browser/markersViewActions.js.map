{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/markers/browser/markersViewActions.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from '../../../../base/browser/dom.js';\nimport { Action, IAction } from '../../../../base/common/actions.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport Messages from './messages.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Marker } from './markersModel.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { Event, Emitter } from '../../../../base/common/event.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { ActionViewItem, IActionViewItemOptions } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { MarkersContextKeys } from '../common/markers.js';\nimport './markersViewActions.css';\n\nexport interface IMarkersFiltersChangeEvent {\n\texcludedFiles?: boolean;\n\tshowWarnings?: boolean;\n\tshowErrors?: boolean;\n\tshowInfos?: boolean;\n\tactiveFile?: boolean;\n}\n\nexport interface IMarkersFiltersOptions {\n\tfilterHistory: string[];\n\tshowErrors: boolean;\n\tshowWarnings: boolean;\n\tshowInfos: boolean;\n\texcludedFiles: boolean;\n\tactiveFile: boolean;\n}\n\nexport class MarkersFilters extends Disposable {\n\n\tprivate readonly _onDidChange: Emitter<IMarkersFiltersChangeEvent> = this._register(new Emitter<IMarkersFiltersChangeEvent>());\n\treadonly onDidChange: Event<IMarkersFiltersChangeEvent> = this._onDidChange.event;\n\n\tconstructor(options: IMarkersFiltersOptions, private readonly contextKeyService: IContextKeyService) {\n\t\tsuper();\n\n\t\tthis._showErrors.set(options.showErrors);\n\t\tthis._showWarnings.set(options.showWarnings);\n\t\tthis._showInfos.set(options.showInfos);\n\t\tthis._excludedFiles.set(options.excludedFiles);\n\t\tthis._activeFile.set(options.activeFile);\n\t\tthis.filterHistory = options.filterHistory;\n\t}\n\n\tfilterHistory: string[];\n\n\tprivate readonly _excludedFiles = MarkersContextKeys.ShowExcludedFilesFilterContextKey.bindTo(this.contextKeyService);\n\tget excludedFiles(): boolean {\n\t\treturn !!this._excludedFiles.get();\n\t}\n\tset excludedFiles(filesExclude: boolean) {\n\t\tif (this._excludedFiles.get() !== filesExclude) {\n\t\t\tthis._excludedFiles.set(filesExclude);\n\t\t\tthis._onDidChange.fire({ excludedFiles: true });\n\t\t}\n\t}\n\n\tprivate readonly _activeFile = MarkersContextKeys.ShowActiveFileFilterContextKey.bindTo(this.contextKeyService);\n\tget activeFile(): boolean {\n\t\treturn !!this._activeFile.get();\n\t}\n\tset activeFile(activeFile: boolean) {\n\t\tif (this._activeFile.get() !== activeFile) {\n\t\t\tthis._activeFile.set(activeFile);\n\t\t\tthis._onDidChange.fire({ activeFile: true });\n\t\t}\n\t}\n\n\tprivate readonly _showWarnings = MarkersContextKeys.ShowWarningsFilterContextKey.bindTo(this.contextKeyService);\n\tget showWarnings(): boolean {\n\t\treturn !!this._showWarnings.get();\n\t}\n\tset showWarnings(showWarnings: boolean) {\n\t\tif (this._showWarnings.get() !== showWarnings) {\n\t\t\tthis._showWarnings.set(showWarnings);\n\t\t\tthis._onDidChange.fire({ showWarnings: true });\n\t\t}\n\t}\n\n\tprivate readonly _showErrors = MarkersContextKeys.ShowErrorsFilterContextKey.bindTo(this.contextKeyService);\n\tget showErrors(): boolean {\n\t\treturn !!this._showErrors.get();\n\t}\n\tset showErrors(showErrors: boolean) {\n\t\tif (this._showErrors.get() !== showErrors) {\n\t\t\tthis._showErrors.set(showErrors);\n\t\t\tthis._onDidChange.fire({ showErrors: true });\n\t\t}\n\t}\n\n\tprivate readonly _showInfos = MarkersContextKeys.ShowInfoFilterContextKey.bindTo(this.contextKeyService);\n\tget showInfos(): boolean {\n\t\treturn !!this._showInfos.get();\n\t}\n\tset showInfos(showInfos: boolean) {\n\t\tif (this._showInfos.get() !== showInfos) {\n\t\t\tthis._showInfos.set(showInfos);\n\t\t\tthis._onDidChange.fire({ showInfos: true });\n\t\t}\n\t}\n\n}\n\nexport class QuickFixAction extends Action {\n\n\tpublic static readonly ID: string = 'workbench.actions.problems.quickfix';\n\tprivate static readonly CLASS: string = 'markers-panel-action-quickfix ' + ThemeIcon.asClassName(Codicon.lightBulb);\n\tprivate static readonly AUTO_FIX_CLASS: string = QuickFixAction.CLASS + ' autofixable';\n\n\tprivate readonly _onShowQuickFixes = this._register(new Emitter<void>());\n\treadonly onShowQuickFixes: Event<void> = this._onShowQuickFixes.event;\n\n\tprivate _quickFixes: IAction[] = [];\n\tget quickFixes(): IAction[] {\n\t\treturn this._quickFixes;\n\t}\n\tset quickFixes(quickFixes: IAction[]) {\n\t\tthis._quickFixes = quickFixes;\n\t\tthis.enabled = this._quickFixes.length > 0;\n\t}\n\n\tautoFixable(autofixable: boolean) {\n\t\tthis.class = autofixable ? QuickFixAction.AUTO_FIX_CLASS : QuickFixAction.CLASS;\n\t}\n\n\tconstructor(\n\t\treadonly marker: Marker,\n\t) {\n\t\tsuper(QuickFixAction.ID, Messages.MARKERS_PANEL_ACTION_TOOLTIP_QUICKFIX, QuickFixAction.CLASS, false);\n\t}\n\n\toverride run(): Promise<void> {\n\t\tthis._onShowQuickFixes.fire();\n\t\treturn Promise.resolve();\n\t}\n}\n\nexport class QuickFixActionViewItem extends ActionViewItem {\n\n\tconstructor(\n\t\taction: QuickFixAction,\n\t\toptions: IActionViewItemOptions,\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService,\n\t) {\n\t\tsuper(null, action, { ...options, icon: true, label: false });\n\t}\n\n\tpublic override onClick(event: DOM.EventLike): void {\n\t\tDOM.EventHelper.stop(event, true);\n\t\tthis.showQuickFixes();\n\t}\n\n\tpublic showQuickFixes(): void {\n\t\tif (!this.element) {\n\t\t\treturn;\n\t\t}\n\t\tif (!this.isEnabled()) {\n\t\t\treturn;\n\t\t}\n\t\tconst elementPosition = DOM.getDomNodePagePosition(this.element);\n\t\tconst quickFixes = (<QuickFixAction>this.action).quickFixes;\n\t\tif (quickFixes.length) {\n\t\t\tthis.contextMenuService.showContextMenu({\n\t\t\t\tgetAnchor: () => ({ x: elementPosition.left + 10, y: elementPosition.top + elementPosition.height + 4 }),\n\t\t\t\tgetActions: () => quickFixes\n\t\t\t});\n\t\t}\n\t}\n}\n\n"],
  "mappings": "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",
  "names": []
}
