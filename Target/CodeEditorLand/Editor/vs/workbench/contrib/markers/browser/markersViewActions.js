var v=Object.defineProperty;var x=Object.getOwnPropertyDescriptor;var c=(s,i,e,t)=>{for(var o=t>1?void 0:t?x(i,e):i,l=s.length-1,h;l>=0;l--)(h=s[l])&&(o=(t?h(i,e,o):h(o))||o);return t&&o&&v(i,e,o),o},d=(s,i)=>(e,t)=>i(e,t,s);import*as u from"../../../../base/browser/dom.js";import{Action as f}from"../../../../base/common/actions.js";import{IContextMenuService as F}from"../../../../platform/contextview/browser/contextView.js";import w from"./messages.js";import{Disposable as _}from"../../../../base/common/lifecycle.js";import"./markersModel.js";import"../../../../platform/contextkey/common/contextkey.js";import{Emitter as g}from"../../../../base/common/event.js";import{Codicon as p}from"../../../../base/common/codicons.js";import{ThemeIcon as b}from"../../../../base/common/themables.js";import{ActionViewItem as m}from"../../../../base/browser/ui/actionbar/actionViewItems.js";import{MarkersContextKeys as n}from"../common/markers.js";import"./markersViewActions.css";class U extends _{constructor(e,t){super();this.contextKeyService=t;this._showErrors.set(e.showErrors),this._showWarnings.set(e.showWarnings),this._showInfos.set(e.showInfos),this._excludedFiles.set(e.excludedFiles),this._activeFile.set(e.activeFile),this.filterHistory=e.filterHistory}_onDidChange=this._register(new g);onDidChange=this._onDidChange.event;filterHistory;_excludedFiles=n.ShowExcludedFilesFilterContextKey.bindTo(this.contextKeyService);get excludedFiles(){return!!this._excludedFiles.get()}set excludedFiles(e){this._excludedFiles.get()!==e&&(this._excludedFiles.set(e),this._onDidChange.fire({excludedFiles:!0}))}_activeFile=n.ShowActiveFileFilterContextKey.bindTo(this.contextKeyService);get activeFile(){return!!this._activeFile.get()}set activeFile(e){this._activeFile.get()!==e&&(this._activeFile.set(e),this._onDidChange.fire({activeFile:!0}))}_showWarnings=n.ShowWarningsFilterContextKey.bindTo(this.contextKeyService);get showWarnings(){return!!this._showWarnings.get()}set showWarnings(e){this._showWarnings.get()!==e&&(this._showWarnings.set(e),this._onDidChange.fire({showWarnings:!0}))}_showErrors=n.ShowErrorsFilterContextKey.bindTo(this.contextKeyService);get showErrors(){return!!this._showErrors.get()}set showErrors(e){this._showErrors.get()!==e&&(this._showErrors.set(e),this._onDidChange.fire({showErrors:!0}))}_showInfos=n.ShowInfoFilterContextKey.bindTo(this.contextKeyService);get showInfos(){return!!this._showInfos.get()}set showInfos(e){this._showInfos.get()!==e&&(this._showInfos.set(e),this._onDidChange.fire({showInfos:!0}))}}class r extends f{constructor(e){super(r.ID,w.MARKERS_PANEL_ACTION_TOOLTIP_QUICKFIX,r.CLASS,!1);this.marker=e}static ID="workbench.actions.problems.quickfix";static CLASS="markers-panel-action-quickfix "+b.asClassName(p.lightBulb);static AUTO_FIX_CLASS=r.CLASS+" autofixable";_onShowQuickFixes=this._register(new g);onShowQuickFixes=this._onShowQuickFixes.event;_quickFixes=[];get quickFixes(){return this._quickFixes}set quickFixes(e){this._quickFixes=e,this.enabled=this._quickFixes.length>0}autoFixable(e){this.class=e?r.AUTO_FIX_CLASS:r.CLASS}run(){return this._onShowQuickFixes.fire(),Promise.resolve()}}let a=class extends m{constructor(e,t,o){super(null,e,{...t,icon:!0,label:!1});this.contextMenuService=o}onClick(e){u.EventHelper.stop(e,!0),this.showQuickFixes()}showQuickFixes(){if(!this.element||!this.isEnabled())return;const e=u.getDomNodePagePosition(this.element),t=this.action.quickFixes;t.length&&this.contextMenuService.showContextMenu({getAnchor:()=>({x:e.left+10,y:e.top+e.height+4}),getActions:()=>t})}};a=c([d(2,F)],a);export{U as MarkersFilters,r as QuickFixAction,a as QuickFixActionViewItem};
