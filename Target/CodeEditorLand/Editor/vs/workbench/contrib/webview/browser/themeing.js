var C=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var v=(s,o,t,i)=>{for(var e=i>1?void 0:i?y(o,t):o,r=s.length-1,n;r>=0;r--)(n=s[r])&&(e=(i?n(o,t,e):n(e))||e);return i&&e&&C(o,t,e),e},d=(s,o)=>(t,i)=>o(t,i,s);import{DEFAULT_FONT_FAMILY as b}from"../../../../base/browser/fonts.js";import{Emitter as S}from"../../../../base/common/event.js";import{Disposable as D}from"../../../../base/common/lifecycle.js";import{EDITOR_FONT_DEFAULTS as l}from"../../../../editor/common/config/editorOptions.js";import{IConfigurationService as I}from"../../../../platform/configuration/common/configuration.js";import*as W from"../../../../platform/theme/common/colorRegistry.js";import{ColorScheme as h}from"../../../../platform/theme/common/theme.js";import{IWorkbenchThemeService as w}from"../../../services/themes/common/workbenchThemeService.js";let c=class extends D{constructor(t,i){super();this._themeService=t;this._configurationService=i;this._register(this._themeService.onDidColorThemeChange(()=>{this._reset()}));const e=["editor.fontFamily","editor.fontWeight","editor.fontSize","accessibility.underlineLinks"];this._register(this._configurationService.onDidChangeConfiguration(r=>{e.some(n=>r.affectsConfiguration(n))&&this._reset()}))}_cachedWebViewThemeData=void 0;_onThemeDataChanged=this._register(new S);onThemeDataChanged=this._onThemeDataChanged.event;getTheme(){return this._themeService.getColorTheme()}getWebviewThemeData(){if(!this._cachedWebViewThemeData){const t=this._configurationService.getValue("editor"),i=t.fontFamily||l.fontFamily,e=t.fontWeight||l.fontWeight,r=t.fontSize||l.fontSize,n=this._configurationService.getValue("accessibility.underlineLinks"),a=this._themeService.getColorTheme(),p=W.getColorRegistry().getColors().reduce((g,f)=>{const T=a.getColor(f.id);return T&&(g["vscode-"+f.id.replace(".","-")]=T.toString()),g},{}),u={"vscode-font-family":b,"vscode-font-weight":"normal","vscode-font-size":"13px","vscode-editor-font-family":i,"vscode-editor-font-weight":e,"vscode-editor-font-size":r+"px","text-link-decoration":n?"underline":"none",...p},_=m.fromTheme(a);this._cachedWebViewThemeData={styles:u,activeTheme:_,themeLabel:a.label,themeId:a.settingsId}}return this._cachedWebViewThemeData}_reset(){this._cachedWebViewThemeData=void 0,this._onThemeDataChanged.fire()}};c=v([d(0,w),d(1,I)],c);var m=(e=>(e.light="vscode-light",e.dark="vscode-dark",e.highContrast="vscode-high-contrast",e.highContrastLight="vscode-high-contrast-light",e))(m||{});(o=>{function s(t){switch(t.type){case h.LIGHT:return"vscode-light";case h.DARK:return"vscode-dark";case h.HIGH_CONTRAST_DARK:return"vscode-high-contrast";case h.HIGH_CONTRAST_LIGHT:return"vscode-high-contrast-light"}}o.fromTheme=s})(m||={});export{c as WebviewThemeDataProvider};
