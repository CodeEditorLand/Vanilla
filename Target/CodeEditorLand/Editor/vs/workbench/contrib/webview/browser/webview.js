var y=Object.defineProperty;var w=Object.getOwnPropertyDescriptor;var d=(n,e,o,t)=>{for(var i=t>1?void 0:t?w(e,o):e,r=n.length-1,l;r>=0;r--)(l=n[r])&&(i=(t?l(e,o,i):l(i))||i);return t&&i&&y(e,o,i),i},v=(n,e)=>(o,t)=>e(o,t,n);import{equals as p}from"../../../../base/common/arrays.js";import{isEqual as b}from"../../../../base/common/resources.js";import{generateUuid as g}from"../../../../base/common/uuid.js";import{RawContextKey as m}from"../../../../platform/contextkey/common/contextkey.js";import{createDecorator as f}from"../../../../platform/instantiation/common/instantiation.js";import{IStorageService as c,StorageScope as u,StorageTarget as I}from"../../../../platform/storage/common/storage.js";import{Memento as E}from"../../../common/memento.js";const T=new m("webviewFindWidgetVisible",!1),F=new m("webviewFindWidgetFocused",!1),h=new m("webviewFindWidgetEnabled",!1),N=f("webviewService");var W=(t=>(t.NotebookRenderer="notebookRenderer",t.CustomEditor="customEditor",t.WebviewView="webviewView",t))(W||{});function U(n,e){return n.allowMultipleAPIAcquire===e.allowMultipleAPIAcquire&&n.allowScripts===e.allowScripts&&n.allowForms===e.allowForms&&p(n.localResourceRoots,e.localResourceRoots,b)&&p(n.portMapping,e.portMapping,(o,t)=>o.extensionHostPort===t.extensionHostPort&&o.webviewPort===t.webviewPort)&&x(n,e)}function x(n,e){return n.enableCommandUris===e.enableCommandUris?!0:Array.isArray(n.enableCommandUris)&&Array.isArray(e.enableCommandUris)?p(n.enableCommandUris,e.enableCommandUris):!1}let a=class{_memento;_state;constructor(e,o){this._memento=new E(e,o),this._state=this._memento.getMemento(u.APPLICATION,I.MACHINE)}getOrigin(e,o){const t=this._getKey(e,o),i=this._state[t];if(i&&typeof i=="string")return i;const r=g();return this._state[t]=r,this._memento.saveMemento(),r}_getKey(e,o){return JSON.stringify({viewType:e,key:o})}};a=d([v(1,c)],a);let s=class{_store;constructor(e,o){this._store=new a(e,o)}getOrigin(e,o){return this._store.getOrigin(e,o.value)}};s=d([v(1,c)],s);export{s as ExtensionKeyedWebviewOriginStore,N as IWebviewService,h as KEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_ENABLED,F as KEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_FOCUSED,T as KEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_VISIBLE,W as WebviewContentPurpose,a as WebviewOriginStore,U as areWebviewContentOptionsEqual};
