{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/webview/browser/webview.contribution.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { getActiveElement } from \"../../../../base/browser/dom.js\";\nimport {\n\ttype MultiCommand,\n\tRedoCommand,\n\tSelectAllCommand,\n\tUndoCommand,\n} from \"../../../../editor/browser/editorExtensions.js\";\nimport {\n\tCopyAction,\n\tCutAction,\n\tPasteAction,\n} from \"../../../../editor/contrib/clipboard/browser/clipboard.js\";\nimport * as nls from \"../../../../nls.js\";\nimport {\n\tMenuId,\n\tMenuRegistry,\n} from \"../../../../platform/actions/common/actions.js\";\nimport { ContextKeyExpr } from \"../../../../platform/contextkey/common/contextkey.js\";\nimport { IEditorService } from \"../../../services/editor/common/editorService.js\";\nimport { WebviewInput } from \"../../webviewPanel/browser/webviewEditorInput.js\";\nimport { type IWebview, IWebviewService } from \"./webview.js\";\n\nconst PRIORITY = 100;\n\nfunction overrideCommandForWebview(\n\tcommand: MultiCommand | undefined,\n\tf: (webview: IWebview) => void,\n) {\n\tcommand?.addImplementation(PRIORITY, \"webview\", (accessor) => {\n\t\tconst webviewService = accessor.get(IWebviewService);\n\t\tconst webview = webviewService.activeWebview;\n\t\tif (webview?.isFocused) {\n\t\t\tf(webview);\n\t\t\treturn true;\n\t\t}\n\n\t\t// When focused in a custom menu try to fallback to the active webview\n\t\t// This is needed for context menu actions and the menubar\n\t\tif (getActiveElement()?.classList.contains(\"action-menu-item\")) {\n\t\t\tconst editorService = accessor.get(IEditorService);\n\t\t\tif (editorService.activeEditor instanceof WebviewInput) {\n\t\t\t\tf(editorService.activeEditor.webview);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t});\n}\n\noverrideCommandForWebview(UndoCommand, (webview) => webview.undo());\noverrideCommandForWebview(RedoCommand, (webview) => webview.redo());\noverrideCommandForWebview(SelectAllCommand, (webview) => webview.selectAll());\noverrideCommandForWebview(CopyAction, (webview) => webview.copy());\noverrideCommandForWebview(PasteAction, (webview) => webview.paste());\noverrideCommandForWebview(CutAction, (webview) => webview.cut());\n\nexport const PreventDefaultContextMenuItemsContextKeyName =\n\t\"preventDefaultContextMenuItems\";\n\nif (CutAction) {\n\tMenuRegistry.appendMenuItem(MenuId.WebviewContext, {\n\t\tcommand: {\n\t\t\tid: CutAction.id,\n\t\t\ttitle: nls.localize(\"cut\", \"Cut\"),\n\t\t},\n\t\tgroup: \"5_cutcopypaste\",\n\t\torder: 1,\n\t\twhen: ContextKeyExpr.not(PreventDefaultContextMenuItemsContextKeyName),\n\t});\n}\n\nif (CopyAction) {\n\tMenuRegistry.appendMenuItem(MenuId.WebviewContext, {\n\t\tcommand: {\n\t\t\tid: CopyAction.id,\n\t\t\ttitle: nls.localize(\"copy\", \"Copy\"),\n\t\t},\n\t\tgroup: \"5_cutcopypaste\",\n\t\torder: 2,\n\t\twhen: ContextKeyExpr.not(PreventDefaultContextMenuItemsContextKeyName),\n\t});\n}\n\nif (PasteAction) {\n\tMenuRegistry.appendMenuItem(MenuId.WebviewContext, {\n\t\tcommand: {\n\t\t\tid: PasteAction.id,\n\t\t\ttitle: nls.localize(\"paste\", \"Paste\"),\n\t\t},\n\t\tgroup: \"5_cutcopypaste\",\n\t\torder: 3,\n\t\twhen: ContextKeyExpr.not(PreventDefaultContextMenuItemsContextKeyName),\n\t});\n}\n"],
  "mappings": ";;AAKA,SAAS,wBAAwB;AACjC;AAAA,EAEC;AAAA,EACA;AAAA,EACA;AAAA,OACM;AACP;AAAA,EACC;AAAA,EACA;AAAA,EACA;AAAA,OACM;AACP,YAAY,SAAS;AACrB;AAAA,EACC;AAAA,EACA;AAAA,OACM;AACP,SAAS,sBAAsB;AAC/B,SAAS,sBAAsB;AAC/B,SAAS,oBAAoB;AAC7B,SAAwB,uBAAuB;AAE/C,MAAM,WAAW;AAEjB,SAAS,0BACR,SACA,GACC;AACD,WAAS,kBAAkB,UAAU,WAAW,CAAC,aAAa;AAC7D,UAAM,iBAAiB,SAAS,IAAI,eAAe;AACnD,UAAM,UAAU,eAAe;AAC/B,QAAI,SAAS,WAAW;AACvB,QAAE,OAAO;AACT,aAAO;AAAA,IACR;AAIA,QAAI,iBAAiB,GAAG,UAAU,SAAS,kBAAkB,GAAG;AAC/D,YAAM,gBAAgB,SAAS,IAAI,cAAc;AACjD,UAAI,cAAc,wBAAwB,cAAc;AACvD,UAAE,cAAc,aAAa,OAAO;AACpC,eAAO;AAAA,MACR;AAAA,IACD;AAEA,WAAO;AAAA,EACR,CAAC;AACF;AAxBS;AA0BT,0BAA0B,aAAa,CAAC,YAAY,QAAQ,KAAK,CAAC;AAClE,0BAA0B,aAAa,CAAC,YAAY,QAAQ,KAAK,CAAC;AAClE,0BAA0B,kBAAkB,CAAC,YAAY,QAAQ,UAAU,CAAC;AAC5E,0BAA0B,YAAY,CAAC,YAAY,QAAQ,KAAK,CAAC;AACjE,0BAA0B,aAAa,CAAC,YAAY,QAAQ,MAAM,CAAC;AACnE,0BAA0B,WAAW,CAAC,YAAY,QAAQ,IAAI,CAAC;AAExD,MAAM,+CACZ;AAED,IAAI,WAAW;AACd,eAAa,eAAe,OAAO,gBAAgB;AAAA,IAClD,SAAS;AAAA,MACR,IAAI,UAAU;AAAA,MACd,OAAO,IAAI,SAAS,OAAO,KAAK;AAAA,IACjC;AAAA,IACA,OAAO;AAAA,IACP,OAAO;AAAA,IACP,MAAM,eAAe,IAAI,4CAA4C;AAAA,EACtE,CAAC;AACF;AAEA,IAAI,YAAY;AACf,eAAa,eAAe,OAAO,gBAAgB;AAAA,IAClD,SAAS;AAAA,MACR,IAAI,WAAW;AAAA,MACf,OAAO,IAAI,SAAS,QAAQ,MAAM;AAAA,IACnC;AAAA,IACA,OAAO;AAAA,IACP,OAAO;AAAA,IACP,MAAM,eAAe,IAAI,4CAA4C;AAAA,EACtE,CAAC;AACF;AAEA,IAAI,aAAa;AAChB,eAAa,eAAe,OAAO,gBAAgB;AAAA,IAClD,SAAS;AAAA,MACR,IAAI,YAAY;AAAA,MAChB,OAAO,IAAI,SAAS,SAAS,OAAO;AAAA,IACrC;AAAA,IACA,OAAO;AAAA,IACP,OAAO;AAAA,IACP,MAAM,eAAe,IAAI,4CAA4C;AAAA,EACtE,CAAC;AACF;",
  "names": []
}
