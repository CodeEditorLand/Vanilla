{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/webview/browser/webviewElement.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { isFirefox } from \"../../../../base/browser/browser.js\";\nimport {\n\tEventType,\n\taddDisposableListener,\n\tgetWindowById,\n} from \"../../../../base/browser/dom.js\";\nimport { parentOriginHash } from \"../../../../base/browser/iframe.js\";\nimport type { IMouseWheelEvent } from \"../../../../base/browser/mouseEvent.js\";\nimport type { CodeWindow } from \"../../../../base/browser/window.js\";\nimport {\n\tThrottledDelayer,\n\tpromiseWithResolvers,\n} from \"../../../../base/common/async.js\";\nimport {\n\ttype VSBufferReadableStream,\n\tstreamToBuffer,\n} from \"../../../../base/common/buffer.js\";\nimport { CancellationTokenSource } from \"../../../../base/common/cancellation.js\";\nimport { Emitter, Event } from \"../../../../base/common/event.js\";\nimport {\n\tDisposable,\n\ttype IDisposable,\n\ttoDisposable,\n} from \"../../../../base/common/lifecycle.js\";\nimport { COI } from \"../../../../base/common/network.js\";\nimport { URI } from \"../../../../base/common/uri.js\";\nimport { generateUuid } from \"../../../../base/common/uuid.js\";\nimport { localize } from \"../../../../nls.js\";\nimport { IAccessibilityService } from \"../../../../platform/accessibility/common/accessibility.js\";\nimport { MenuId } from \"../../../../platform/actions/common/actions.js\";\nimport { IConfigurationService } from \"../../../../platform/configuration/common/configuration.js\";\nimport type { IContextKeyService } from \"../../../../platform/contextkey/common/contextkey.js\";\nimport { IContextMenuService } from \"../../../../platform/contextview/browser/contextView.js\";\nimport type { ExtensionIdentifier } from \"../../../../platform/extensions/common/extensions.js\";\nimport { IFileService } from \"../../../../platform/files/common/files.js\";\nimport { IInstantiationService } from \"../../../../platform/instantiation/common/instantiation.js\";\nimport { ILogService } from \"../../../../platform/log/common/log.js\";\nimport { INotificationService } from \"../../../../platform/notification/common/notification.js\";\nimport { IRemoteAuthorityResolverService } from \"../../../../platform/remote/common/remoteAuthorityResolver.js\";\nimport { ITelemetryService } from \"../../../../platform/telemetry/common/telemetry.js\";\nimport { ITunnelService } from \"../../../../platform/tunnel/common/tunnel.js\";\nimport { WebviewPortMappingManager } from \"../../../../platform/webview/common/webviewPortMapping.js\";\nimport { IWorkbenchEnvironmentService } from \"../../../services/environment/common/environmentService.js\";\nimport {\n\tdecodeAuthority,\n\twebviewGenericCspSource,\n\twebviewRootResourceAuthority,\n} from \"../common/webview.js\";\nimport {\n\tWebviewResourceResponse,\n\tloadLocalResource,\n} from \"./resourceLoading.js\";\nimport type { WebviewThemeDataProvider } from \"./themeing.js\";\nimport {\n\ttype IWebview,\n\ttype WebviewContentOptions,\n\ttype WebviewExtensionDescription,\n\ttype WebviewInitInfo,\n\ttype WebviewMessageReceivedEvent,\n\ttype WebviewOptions,\n\tareWebviewContentOptionsEqual,\n} from \"./webview.js\";\nimport {\n\ttype WebviewFindDelegate,\n\tWebviewFindWidget,\n} from \"./webviewFindWidget.js\";\nimport type {\n\tFromWebviewMessage,\n\tKeyEvent,\n\tToWebviewMessage,\n\tWebViewDragEvent,\n} from \"./webviewMessages.js\";\n\ninterface WebviewContent {\n\treadonly html: string;\n\treadonly title: string | undefined;\n\treadonly options: WebviewContentOptions;\n\treadonly state: string | undefined;\n}\n\nnamespace WebviewState {\n\texport enum Type {\n\t\tInitializing = 0,\n\t\tReady = 1,\n\t}\n\n\texport class Initializing {\n\t\treadonly type = Type.Initializing;\n\n\t\tconstructor(\n\t\t\tpublic pendingMessages: Array<{\n\t\t\t\treadonly channel: string;\n\t\t\t\treadonly data?: any;\n\t\t\t\treadonly transferable: Transferable[];\n\t\t\t\treadonly resolve: (posted: boolean) => void;\n\t\t\t}>,\n\t\t) {}\n\t}\n\n\texport const Ready = { type: Type.Ready } as const;\n\n\texport type State = typeof Ready | Initializing;\n}\n\ninterface WebviewActionContext {\n\treadonly webview?: string;\n\treadonly [key: string]: unknown;\n}\n\nconst webviewIdContext = \"webviewId\";\n\nexport class WebviewElement\n\textends Disposable\n\timplements IWebview, WebviewFindDelegate\n{\n\tprotected readonly id = generateUuid();\n\n\t/**\n\t * The provided identifier of this webview.\n\t */\n\tpublic readonly providedViewType?: string;\n\n\t/**\n\t * The origin this webview itself is loaded from. May not be unique\n\t */\n\tpublic readonly origin: string;\n\n\tprivate _windowId: number | undefined = undefined;\n\tprivate get window() {\n\t\treturn typeof this._windowId === \"number\"\n\t\t\t? getWindowById(this._windowId)?.window\n\t\t\t: undefined;\n\t}\n\n\tprivate _encodedWebviewOriginPromise?: Promise<string>;\n\tprivate _encodedWebviewOrigin: string | undefined;\n\n\tprotected get platform(): string {\n\t\treturn \"browser\";\n\t}\n\n\tprivate readonly _expectedServiceWorkerVersion = 4; // Keep this in sync with the version in service-worker.js\n\n\tprivate _element: HTMLIFrameElement | undefined;\n\tprotected get element(): HTMLIFrameElement | undefined {\n\t\treturn this._element;\n\t}\n\n\tprivate _focused: boolean | undefined;\n\tpublic get isFocused(): boolean {\n\t\tif (!this._focused) {\n\t\t\treturn false;\n\t\t}\n\t\t// code window is only available after the webview is mounted.\n\t\tif (!this.window) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\n\t\t\tthis.window.document.activeElement &&\n\t\t\tthis.window.document.activeElement !== this.element\n\t\t) {\n\t\t\t// looks like https://github.com/microsoft/vscode/issues/132641\n\t\t\t// where the focus is actually not in the `<iframe>`\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate _state: WebviewState.State = new WebviewState.Initializing([]);\n\n\tprivate _content: WebviewContent;\n\n\tprivate readonly _portMappingManager: WebviewPortMappingManager;\n\n\tprivate readonly _resourceLoadingCts = this._register(\n\t\tnew CancellationTokenSource(),\n\t);\n\n\tprivate _contextKeyService: IContextKeyService | undefined;\n\n\tprivate _confirmBeforeClose: string;\n\n\tprivate readonly _focusDelayer = this._register(new ThrottledDelayer(50));\n\n\tprivate readonly _onDidHtmlChange: Emitter<string> = this._register(\n\t\tnew Emitter<string>(),\n\t);\n\tprotected readonly onDidHtmlChange = this._onDidHtmlChange.event;\n\n\tprivate _messagePort?: MessagePort;\n\tprivate readonly _messageHandlers = new Map<\n\t\tstring,\n\t\tSet<(data: any, e: MessageEvent) => void>\n\t>();\n\n\tprotected readonly _webviewFindWidget: WebviewFindWidget | undefined;\n\tpublic readonly checkImeCompletionState = true;\n\n\tprivate _disposed = false;\n\n\tpublic extension: WebviewExtensionDescription | undefined;\n\tprivate readonly _options: WebviewOptions;\n\n\tconstructor(\n\t\tinitInfo: WebviewInitInfo,\n\t\tprotected readonly webviewThemeDataProvider: WebviewThemeDataProvider,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IWorkbenchEnvironmentService\n\t\tprivate readonly _environmentService: IWorkbenchEnvironmentService,\n\t\t@IFileService private readonly _fileService: IFileService,\n\t\t@ILogService private readonly _logService: ILogService,\n\t\t@IRemoteAuthorityResolverService\n\t\tprivate readonly _remoteAuthorityResolverService: IRemoteAuthorityResolverService,\n\t\t@ITelemetryService\n\t\tprivate readonly _telemetryService: ITelemetryService,\n\t\t@ITunnelService private readonly _tunnelService: ITunnelService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IAccessibilityService\n\t\tprivate readonly _accessibilityService: IAccessibilityService,\n\t) {\n\t\tsuper();\n\n\t\tthis.providedViewType = initInfo.providedViewType;\n\t\tthis.origin = initInfo.origin ?? this.id;\n\n\t\tthis._options = initInfo.options;\n\t\tthis.extension = initInfo.extension;\n\n\t\tthis._content = {\n\t\t\thtml: \"\",\n\t\t\ttitle: initInfo.title,\n\t\t\toptions: initInfo.contentOptions,\n\t\t\tstate: undefined,\n\t\t};\n\n\t\tthis._portMappingManager = this._register(\n\t\t\tnew WebviewPortMappingManager(\n\t\t\t\t() => this.extension?.location,\n\t\t\t\t() => this._content.options.portMapping || [],\n\t\t\t\tthis._tunnelService,\n\t\t\t),\n\t\t);\n\n\t\tthis._element = this._createElement(\n\t\t\tinitInfo.options,\n\t\t\tinitInfo.contentOptions,\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.on(\"no-csp-found\", () => {\n\t\t\t\tthis.handleNoCspFound();\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.on(\"did-click-link\", ({ uri }) => {\n\t\t\t\tthis._onDidClickLink.fire(uri);\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.on(\"onmessage\", ({ message, transfer }) => {\n\t\t\t\tthis._onMessage.fire({ message, transfer });\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.on(\"did-scroll\", ({ scrollYPercentage }) => {\n\t\t\t\tthis._onDidScroll.fire({ scrollYPercentage });\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.on(\"do-reload\", () => {\n\t\t\t\tthis.reload();\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.on(\"do-update-state\", (state) => {\n\t\t\t\tthis.state = state;\n\t\t\t\tthis._onDidUpdateState.fire(state);\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.on(\"did-focus\", () => {\n\t\t\t\tthis.handleFocusChange(true);\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.on(\"did-blur\", () => {\n\t\t\t\tthis.handleFocusChange(false);\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.on(\"did-scroll-wheel\", (event) => {\n\t\t\t\tthis._onDidWheel.fire(event);\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.on(\"did-find\", ({ didFind }) => {\n\t\t\t\tthis._hasFindResult.fire(didFind);\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.on(\"fatal-error\", (e) => {\n\t\t\t\tnotificationService.error(\n\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\"fatalErrorMessage\",\n\t\t\t\t\t\t\"Error loading webview: {0}\",\n\t\t\t\t\t\te.message,\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t\tthis._onFatalError.fire({ message: e.message });\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.on(\"did-keydown\", (data) => {\n\t\t\t\t// Electron: workaround for https://github.com/electron/electron/issues/14258\n\t\t\t\t// We have to detect keyboard events in the <webview> and dispatch them to our\n\t\t\t\t// keybinding service because these events do not bubble to the parent window anymore.\n\t\t\t\tthis.handleKeyEvent(\"keydown\", data);\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.on(\"did-keyup\", (data) => {\n\t\t\t\tthis.handleKeyEvent(\"keyup\", data);\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.on(\"did-context-menu\", (data) => {\n\t\t\t\tif (!this.element) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (!this._contextKeyService) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst elementBox = this.element.getBoundingClientRect();\n\t\t\t\tconst contextKeyService = this._contextKeyService.createOverlay(\n\t\t\t\t\t[\n\t\t\t\t\t\t...Object.entries(data.context),\n\t\t\t\t\t\t[webviewIdContext, this.providedViewType],\n\t\t\t\t\t],\n\t\t\t\t);\n\t\t\t\tcontextMenuService.showContextMenu({\n\t\t\t\t\tmenuId: MenuId.WebviewContext,\n\t\t\t\t\tmenuActionOptions: { shouldForwardArgs: true },\n\t\t\t\t\tcontextKeyService,\n\t\t\t\t\tgetActionsContext: (): WebviewActionContext => ({\n\t\t\t\t\t\t...data.context,\n\t\t\t\t\t\twebview: this.providedViewType,\n\t\t\t\t\t}),\n\t\t\t\t\tgetAnchor: () => ({\n\t\t\t\t\t\tx: elementBox.x + data.clientX,\n\t\t\t\t\t\ty: elementBox.y + data.clientY,\n\t\t\t\t\t}),\n\t\t\t\t});\n\t\t\t\tthis._send(\"set-context-menu-visible\", { visible: true });\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.on(\"load-resource\", async (entry) => {\n\t\t\t\ttry {\n\t\t\t\t\t// Restore the authority we previously encoded\n\t\t\t\t\tconst authority = decodeAuthority(entry.authority);\n\t\t\t\t\tconst uri = URI.from({\n\t\t\t\t\t\tscheme: entry.scheme,\n\t\t\t\t\t\tauthority: authority,\n\t\t\t\t\t\tpath: decodeURIComponent(entry.path), // This gets re-encoded\n\t\t\t\t\t\tquery: entry.query\n\t\t\t\t\t\t\t? decodeURIComponent(entry.query)\n\t\t\t\t\t\t\t: entry.query,\n\t\t\t\t\t});\n\t\t\t\t\tthis.loadResource(entry.id, uri, entry.ifNoneMatch);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthis._send(\"did-load-resource\", {\n\t\t\t\t\t\tid: entry.id,\n\t\t\t\t\t\tstatus: 404,\n\t\t\t\t\t\tpath: entry.path,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.on(\"load-localhost\", (entry) => {\n\t\t\t\tthis.localLocalhost(entry.id, entry.origin);\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tEvent.runAndSubscribe(\n\t\t\t\twebviewThemeDataProvider.onThemeDataChanged,\n\t\t\t\t() => this.style(),\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\t_accessibilityService.onDidChangeReducedMotion(() => this.style()),\n\t\t);\n\t\tthis._register(\n\t\t\t_accessibilityService.onDidChangeScreenReaderOptimized(() =>\n\t\t\t\tthis.style(),\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tcontextMenuService.onDidHideContextMenu(() =>\n\t\t\t\tthis._send(\"set-context-menu-visible\", { visible: false }),\n\t\t\t),\n\t\t);\n\n\t\tthis._confirmBeforeClose = configurationService.getValue<string>(\n\t\t\t\"window.confirmBeforeClose\",\n\t\t);\n\n\t\tthis._register(\n\t\t\tconfigurationService.onDidChangeConfiguration((e) => {\n\t\t\t\tif (e.affectsConfiguration(\"window.confirmBeforeClose\")) {\n\t\t\t\t\tthis._confirmBeforeClose = configurationService.getValue(\n\t\t\t\t\t\t\"window.confirmBeforeClose\",\n\t\t\t\t\t);\n\t\t\t\t\tthis._send(\n\t\t\t\t\t\t\"set-confirm-before-close\",\n\t\t\t\t\t\tthis._confirmBeforeClose,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.on(\"drag-start\", () => {\n\t\t\t\tthis._startBlockingIframeDragEvents();\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.on(\"drag\", (event) => {\n\t\t\t\tthis.handleDragEvent(\"drag\", event);\n\t\t\t}),\n\t\t);\n\n\t\tif (initInfo.options.enableFindWidget) {\n\t\t\tthis._webviewFindWidget = this._register(\n\t\t\t\tinstantiationService.createInstance(WebviewFindWidget, this),\n\t\t\t);\n\t\t}\n\t}\n\n\toverride dispose(): void {\n\t\tthis._disposed = true;\n\n\t\tthis.element?.remove();\n\t\tthis._element = undefined;\n\n\t\tthis._messagePort = undefined;\n\n\t\tif (this._state.type === WebviewState.Type.Initializing) {\n\t\t\tfor (const message of this._state.pendingMessages) {\n\t\t\t\tmessage.resolve(false);\n\t\t\t}\n\t\t\tthis._state.pendingMessages = [];\n\t\t}\n\n\t\tthis._onDidDispose.fire();\n\n\t\tthis._resourceLoadingCts.dispose(true);\n\n\t\tsuper.dispose();\n\t}\n\n\tsetContextKeyService(contextKeyService: IContextKeyService) {\n\t\tthis._contextKeyService = contextKeyService;\n\t}\n\n\tprivate readonly _onMissingCsp = this._register(\n\t\tnew Emitter<ExtensionIdentifier>(),\n\t);\n\tpublic readonly onMissingCsp = this._onMissingCsp.event;\n\n\tprivate readonly _onDidClickLink = this._register(new Emitter<string>());\n\tpublic readonly onDidClickLink = this._onDidClickLink.event;\n\n\tprivate readonly _onDidReload = this._register(new Emitter<void>());\n\tpublic readonly onDidReload = this._onDidReload.event;\n\n\tprivate readonly _onMessage = this._register(\n\t\tnew Emitter<WebviewMessageReceivedEvent>(),\n\t);\n\tpublic readonly onMessage = this._onMessage.event;\n\n\tprivate readonly _onDidScroll = this._register(\n\t\tnew Emitter<{ readonly scrollYPercentage: number }>(),\n\t);\n\tpublic readonly onDidScroll = this._onDidScroll.event;\n\n\tprivate readonly _onDidWheel = this._register(\n\t\tnew Emitter<IMouseWheelEvent>(),\n\t);\n\tpublic readonly onDidWheel = this._onDidWheel.event;\n\n\tprivate readonly _onDidUpdateState = this._register(\n\t\tnew Emitter<string | undefined>(),\n\t);\n\tpublic readonly onDidUpdateState = this._onDidUpdateState.event;\n\n\tprivate readonly _onDidFocus = this._register(new Emitter<void>());\n\tpublic readonly onDidFocus = this._onDidFocus.event;\n\n\tprivate readonly _onDidBlur = this._register(new Emitter<void>());\n\tpublic readonly onDidBlur = this._onDidBlur.event;\n\n\tprivate readonly _onFatalError = this._register(\n\t\tnew Emitter<{ readonly message: string }>(),\n\t);\n\tpublic readonly onFatalError = this._onFatalError.event;\n\n\tprivate readonly _onDidDispose = this._register(new Emitter<void>());\n\tpublic readonly onDidDispose = this._onDidDispose.event;\n\n\tpublic postMessage(\n\t\tmessage: any,\n\t\ttransfer?: ArrayBuffer[],\n\t): Promise<boolean> {\n\t\treturn this._send(\"message\", { message, transfer });\n\t}\n\n\tprivate async _send<K extends keyof ToWebviewMessage>(\n\t\tchannel: K,\n\t\tdata: ToWebviewMessage[K],\n\t\t_createElement: Transferable[] = [],\n\t): Promise<boolean> {\n\t\tif (this._state.type === WebviewState.Type.Initializing) {\n\t\t\tconst { promise, resolve } = promiseWithResolvers<boolean>();\n\t\t\tthis._state.pendingMessages.push({\n\t\t\t\tchannel,\n\t\t\t\tdata,\n\t\t\t\ttransferable: _createElement,\n\t\t\t\tresolve,\n\t\t\t});\n\t\t\treturn promise;\n\t\t} else {\n\t\t\treturn this.doPostMessage(channel, data, _createElement);\n\t\t}\n\t}\n\n\tprivate _createElement(\n\t\toptions: WebviewOptions,\n\t\t_contentOptions: WebviewContentOptions,\n\t) {\n\t\t// Do not start loading the webview yet.\n\t\t// Wait the end of the ctor when all listeners have been hooked up.\n\t\tconst element = document.createElement(\"iframe\");\n\t\telement.name = this.id;\n\t\telement.className = `webview ${options.customClasses || \"\"}`;\n\t\telement.sandbox.add(\n\t\t\t\"allow-scripts\",\n\t\t\t\"allow-same-origin\",\n\t\t\t\"allow-forms\",\n\t\t\t\"allow-pointer-lock\",\n\t\t\t\"allow-downloads\",\n\t\t);\n\n\t\tconst allowRules = [\"cross-origin-isolated\", \"autoplay\"];\n\t\tif (!isFirefox) {\n\t\t\tallowRules.push(\"clipboard-read\", \"clipboard-write\");\n\t\t}\n\t\telement.setAttribute(\"allow\", allowRules.join(\"; \"));\n\n\t\telement.style.border = \"none\";\n\t\telement.style.width = \"100%\";\n\t\telement.style.height = \"100%\";\n\n\t\telement.focus = () => {\n\t\t\tthis._doFocus();\n\t\t};\n\n\t\treturn element;\n\t}\n\n\tprivate _initElement(\n\t\tencodedWebviewOrigin: string,\n\t\textension: WebviewExtensionDescription | undefined,\n\t\toptions: WebviewOptions,\n\t\ttargetWindow: CodeWindow,\n\t) {\n\t\t// The extensionId and purpose in the URL are used for filtering in js-debug:\n\t\tconst params: { [key: string]: string } = {\n\t\t\tid: this.id,\n\t\t\torigin: this.origin,\n\t\t\tswVersion: String(this._expectedServiceWorkerVersion),\n\t\t\textensionId: extension?.id.value ?? \"\",\n\t\t\tplatform: this.platform,\n\t\t\t\"vscode-resource-base-authority\": webviewRootResourceAuthority,\n\t\t\tparentOrigin: targetWindow.origin,\n\t\t};\n\n\t\tif (this._options.disableServiceWorker) {\n\t\t\tparams.disableServiceWorker = \"true\";\n\t\t}\n\n\t\tif (this._environmentService.remoteAuthority) {\n\t\t\tparams.remoteAuthority = this._environmentService.remoteAuthority;\n\t\t}\n\n\t\tif (options.purpose) {\n\t\t\tparams.purpose = options.purpose;\n\t\t}\n\n\t\tCOI.addSearchParam(params, true, true);\n\n\t\tconst queryString = new URLSearchParams(params).toString();\n\n\t\t// Workaround for https://bugzilla.mozilla.org/show_bug.cgi?id=1754872\n\t\tconst fileName = isFirefox ? \"index-no-csp.html\" : \"index.html\";\n\n\t\tthis.element!.setAttribute(\n\t\t\t\"src\",\n\t\t\t`${this.webviewContentEndpoint(encodedWebviewOrigin)}/${fileName}?${queryString}`,\n\t\t);\n\t}\n\n\tpublic mountTo(element: HTMLElement, targetWindow: CodeWindow) {\n\t\tif (!this.element) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._windowId = targetWindow.vscodeWindowId;\n\t\tthis._encodedWebviewOriginPromise = parentOriginHash(\n\t\t\ttargetWindow.origin,\n\t\t\tthis.origin,\n\t\t).then((id) => (this._encodedWebviewOrigin = id));\n\t\tthis._encodedWebviewOriginPromise.then((encodedWebviewOrigin) => {\n\t\t\tif (!this._disposed) {\n\t\t\t\tthis._initElement(\n\t\t\t\t\tencodedWebviewOrigin,\n\t\t\t\t\tthis.extension,\n\t\t\t\t\tthis._options,\n\t\t\t\t\ttargetWindow,\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t\tthis._registerMessageHandler(targetWindow);\n\n\t\tif (this._webviewFindWidget) {\n\t\t\telement.appendChild(this._webviewFindWidget.getDomNode());\n\t\t}\n\n\t\tfor (const eventName of [\n\t\t\tEventType.MOUSE_DOWN,\n\t\t\tEventType.MOUSE_MOVE,\n\t\t\tEventType.DROP,\n\t\t]) {\n\t\t\tthis._register(\n\t\t\t\taddDisposableListener(element, eventName, () => {\n\t\t\t\t\tthis._stopBlockingIframeDragEvents();\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tfor (const node of [element, targetWindow]) {\n\t\t\tthis._register(\n\t\t\t\taddDisposableListener(node, EventType.DRAG_END, () => {\n\t\t\t\t\tthis._stopBlockingIframeDragEvents();\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\telement.id = this.id; // This is used by aria-flow for accessibility order\n\n\t\telement.appendChild(this.element);\n\t}\n\n\tprivate _registerMessageHandler(targetWindow: CodeWindow) {\n\t\tconst subscription = this._register(\n\t\t\taddDisposableListener(\n\t\t\t\ttargetWindow,\n\t\t\t\t\"message\",\n\t\t\t\t(e: MessageEvent) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\t!this._encodedWebviewOrigin ||\n\t\t\t\t\t\te?.data?.target !== this.id\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\te.origin !==\n\t\t\t\t\t\tthis._webviewContentOrigin(this._encodedWebviewOrigin)\n\t\t\t\t\t) {\n\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t`Skipped renderer receiving message due to mismatched origins: ${e.origin} ${this._webviewContentOrigin}`,\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (e.data.channel === \"webview-ready\") {\n\t\t\t\t\t\tif (this._messagePort) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis._logService.debug(\n\t\t\t\t\t\t\t`Webview(${this.id}): webview ready`,\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tthis._messagePort = e.ports[0];\n\t\t\t\t\t\tthis._messagePort.onmessage = (e) => {\n\t\t\t\t\t\t\tconst handlers = this._messageHandlers.get(\n\t\t\t\t\t\t\t\te.data.channel,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tif (!handlers) {\n\t\t\t\t\t\t\t\tconsole.log(\n\t\t\t\t\t\t\t\t\t`No handlers found for '${e.data.channel}'`,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\thandlers?.forEach((handler) =>\n\t\t\t\t\t\t\t\thandler(e.data.data, e),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tthis.element?.classList.add(\"ready\");\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tthis._state.type === WebviewState.Type.Initializing\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tthis._state.pendingMessages.forEach(\n\t\t\t\t\t\t\t\t({ channel, data, resolve }) =>\n\t\t\t\t\t\t\t\t\tresolve(this.doPostMessage(channel, data)),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis._state = WebviewState.Ready;\n\n\t\t\t\t\t\tsubscription.dispose();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\t}\n\n\tprivate _startBlockingIframeDragEvents() {\n\t\tif (this.element) {\n\t\t\tthis.element.style.pointerEvents = \"none\";\n\t\t}\n\t}\n\n\tprivate _stopBlockingIframeDragEvents() {\n\t\tif (this.element) {\n\t\t\tthis.element.style.pointerEvents = \"auto\";\n\t\t}\n\t}\n\n\tprotected webviewContentEndpoint(encodedWebviewOrigin: string): string {\n\t\tconst webviewExternalEndpoint =\n\t\t\tthis._environmentService.webviewExternalEndpoint;\n\t\tif (!webviewExternalEndpoint) {\n\t\t\tthrow new Error(\n\t\t\t\t`'webviewExternalEndpoint' has not been configured. Webviews will not work!`,\n\t\t\t);\n\t\t}\n\n\t\tconst endpoint = webviewExternalEndpoint.replace(\n\t\t\t\"{{uuid}}\",\n\t\t\tencodedWebviewOrigin,\n\t\t);\n\t\tif (endpoint[endpoint.length - 1] === \"/\") {\n\t\t\treturn endpoint.slice(0, endpoint.length - 1);\n\t\t}\n\t\treturn endpoint;\n\t}\n\n\tprivate _webviewContentOrigin(encodedWebviewOrigin: string): string {\n\t\tconst uri = URI.parse(\n\t\t\tthis.webviewContentEndpoint(encodedWebviewOrigin),\n\t\t);\n\t\treturn uri.scheme + \"://\" + uri.authority.toLowerCase();\n\t}\n\n\tprivate doPostMessage(\n\t\tchannel: string,\n\t\tdata?: any,\n\t\ttransferable: Transferable[] = [],\n\t): boolean {\n\t\tif (this.element && this._messagePort) {\n\t\t\tthis._messagePort.postMessage(\n\t\t\t\t{ channel, args: data },\n\t\t\t\ttransferable,\n\t\t\t);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate on<K extends keyof FromWebviewMessage>(\n\t\tchannel: K,\n\t\thandler: (data: FromWebviewMessage[K], e: MessageEvent) => void,\n\t): IDisposable {\n\t\tlet handlers = this._messageHandlers.get(channel);\n\t\tif (!handlers) {\n\t\t\thandlers = new Set();\n\t\t\tthis._messageHandlers.set(channel, handlers);\n\t\t}\n\n\t\thandlers.add(handler);\n\t\treturn toDisposable(() => {\n\t\t\tthis._messageHandlers.get(channel)?.delete(handler);\n\t\t});\n\t}\n\n\tprivate _hasAlertedAboutMissingCsp = false;\n\tprivate handleNoCspFound(): void {\n\t\tif (this._hasAlertedAboutMissingCsp) {\n\t\t\treturn;\n\t\t}\n\t\tthis._hasAlertedAboutMissingCsp = true;\n\n\t\tif (this.extension?.id) {\n\t\t\tif (this._environmentService.isExtensionDevelopment) {\n\t\t\t\tthis._onMissingCsp.fire(this.extension.id);\n\t\t\t}\n\n\t\t\tconst payload = {\n\t\t\t\textension: this.extension.id.value,\n\t\t\t} as const;\n\n\t\t\ttype Classification = {\n\t\t\t\textension: {\n\t\t\t\t\tclassification: \"SystemMetaData\";\n\t\t\t\t\tpurpose: \"FeatureInsight\";\n\t\t\t\t\tcomment: \"The id of the extension that created the webview.\";\n\t\t\t\t};\n\t\t\t\towner: \"mjbz\";\n\t\t\t\tcomment: \"Helps find which extensions are contributing webviews with invalid CSPs\";\n\t\t\t};\n\n\t\t\tthis._telemetryService.publicLog2<typeof payload, Classification>(\n\t\t\t\t\"webviewMissingCsp\",\n\t\t\t\tpayload,\n\t\t\t);\n\t\t}\n\t}\n\n\tpublic reload(): void {\n\t\tthis.doUpdateContent(this._content);\n\n\t\tconst subscription = this._register(\n\t\t\tthis.on(\"did-load\", () => {\n\t\t\t\tthis._onDidReload.fire();\n\t\t\t\tsubscription.dispose();\n\t\t\t}),\n\t\t);\n\t}\n\n\tpublic setHtml(html: string) {\n\t\tthis.doUpdateContent({ ...this._content, html });\n\t\tthis._onDidHtmlChange.fire(html);\n\t}\n\n\tpublic setTitle(title: string) {\n\t\tthis._content = { ...this._content, title };\n\t\tthis._send(\"set-title\", title);\n\t}\n\n\tpublic set contentOptions(options: WebviewContentOptions) {\n\t\tthis._logService.debug(\n\t\t\t`Webview(${this.id}): will update content options`,\n\t\t);\n\n\t\tif (areWebviewContentOptionsEqual(options, this._content.options)) {\n\t\t\tthis._logService.debug(\n\t\t\t\t`Webview(${this.id}): skipping content options update`,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.doUpdateContent({ ...this._content, options });\n\t}\n\n\tpublic set localResourcesRoot(resources: readonly URI[]) {\n\t\tthis._content = {\n\t\t\t...this._content,\n\t\t\toptions: {\n\t\t\t\t...this._content.options,\n\t\t\t\tlocalResourceRoots: resources,\n\t\t\t},\n\t\t};\n\t}\n\n\tpublic set state(state: string | undefined) {\n\t\tthis._content = { ...this._content, state };\n\t}\n\n\tpublic set initialScrollProgress(value: number) {\n\t\tthis._send(\"initial-scroll-position\", value);\n\t}\n\n\tprivate doUpdateContent(newContent: WebviewContent) {\n\t\tthis._logService.debug(`Webview(${this.id}): will update content`);\n\n\t\tthis._content = newContent;\n\n\t\tconst allowScripts = !!this._content.options.allowScripts;\n\t\tthis._send(\"content\", {\n\t\t\tcontents: this._content.html,\n\t\t\ttitle: this._content.title,\n\t\t\toptions: {\n\t\t\t\tallowMultipleAPIAcquire:\n\t\t\t\t\t!!this._content.options.allowMultipleAPIAcquire,\n\t\t\t\tallowScripts: allowScripts,\n\t\t\t\tallowForms: this._content.options.allowForms ?? allowScripts, // For back compat, we allow forms by default when scripts are enabled\n\t\t\t},\n\t\t\tstate: this._content.state,\n\t\t\tcspSource: webviewGenericCspSource,\n\t\t\tconfirmBeforeClose: this._confirmBeforeClose,\n\t\t});\n\t}\n\n\tprotected style(): void {\n\t\tlet { styles, activeTheme, themeLabel, themeId } =\n\t\t\tthis.webviewThemeDataProvider.getWebviewThemeData();\n\t\tif (this._options.transformCssVariables) {\n\t\t\tstyles = this._options.transformCssVariables(styles);\n\t\t}\n\n\t\tconst reduceMotion = this._accessibilityService.isMotionReduced();\n\t\tconst screenReader =\n\t\t\tthis._accessibilityService.isScreenReaderOptimized();\n\n\t\tthis._send(\"styles\", {\n\t\t\tstyles,\n\t\t\tactiveTheme,\n\t\t\tthemeId,\n\t\t\tthemeLabel,\n\t\t\treduceMotion,\n\t\t\tscreenReader,\n\t\t});\n\t}\n\n\tprotected handleFocusChange(isFocused: boolean): void {\n\t\tthis._focused = isFocused;\n\t\tif (isFocused) {\n\t\t\tthis._onDidFocus.fire();\n\t\t} else {\n\t\t\tthis._onDidBlur.fire();\n\t\t}\n\t}\n\n\tprivate handleKeyEvent(type: \"keydown\" | \"keyup\", event: KeyEvent) {\n\t\t// Create a fake KeyboardEvent from the data provided\n\t\tconst emulatedKeyboardEvent = new KeyboardEvent(type, event);\n\t\t// Force override the target\n\t\tObject.defineProperty(emulatedKeyboardEvent, \"target\", {\n\t\t\tget: () => this.element,\n\t\t});\n\t\t// And re-dispatch\n\t\tthis.window?.dispatchEvent(emulatedKeyboardEvent);\n\t}\n\n\tprivate handleDragEvent(type: \"drag\", event: WebViewDragEvent) {\n\t\t// Create a fake DragEvent from the data provided\n\t\tconst emulatedDragEvent = new DragEvent(type, event);\n\t\t// Force override the target\n\t\tObject.defineProperty(emulatedDragEvent, \"target\", {\n\t\t\tget: () => this.element,\n\t\t});\n\t\t// And re-dispatch\n\t\tthis.window?.dispatchEvent(emulatedDragEvent);\n\t}\n\n\twindowDidDragStart(): void {\n\t\t// Webview break drag and dropping around the main window (no events are generated when you are over them)\n\t\t// Work around this by disabling pointer events during the drag.\n\t\t// https://github.com/electron/electron/issues/18226\n\t\tthis._startBlockingIframeDragEvents();\n\t}\n\n\twindowDidDragEnd(): void {\n\t\tthis._stopBlockingIframeDragEvents();\n\t}\n\n\tpublic selectAll() {\n\t\tthis.execCommand(\"selectAll\");\n\t}\n\n\tpublic copy() {\n\t\tthis.execCommand(\"copy\");\n\t}\n\n\tpublic paste() {\n\t\tthis.execCommand(\"paste\");\n\t}\n\n\tpublic cut() {\n\t\tthis.execCommand(\"cut\");\n\t}\n\n\tpublic undo() {\n\t\tthis.execCommand(\"undo\");\n\t}\n\n\tpublic redo() {\n\t\tthis.execCommand(\"redo\");\n\t}\n\n\tprivate execCommand(command: string) {\n\t\tif (this.element) {\n\t\t\tthis._send(\"execCommand\", command);\n\t\t}\n\t}\n\n\tprivate async loadResource(\n\t\tid: number,\n\t\turi: URI,\n\t\tifNoneMatch: string | undefined,\n\t) {\n\t\ttry {\n\t\t\tconst result = await loadLocalResource(\n\t\t\t\turi,\n\t\t\t\t{\n\t\t\t\t\tifNoneMatch,\n\t\t\t\t\troots: this._content.options.localResourceRoots || [],\n\t\t\t\t},\n\t\t\t\tthis._fileService,\n\t\t\t\tthis._logService,\n\t\t\t\tthis._resourceLoadingCts.token,\n\t\t\t);\n\n\t\t\tswitch (result.type) {\n\t\t\t\tcase WebviewResourceResponse.Type.Success: {\n\t\t\t\t\tconst buffer = await this.streamToBuffer(result.stream);\n\t\t\t\t\treturn this._send(\n\t\t\t\t\t\t\"did-load-resource\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid,\n\t\t\t\t\t\t\tstatus: 200,\n\t\t\t\t\t\t\tpath: uri.path,\n\t\t\t\t\t\t\tmime: result.mimeType,\n\t\t\t\t\t\t\tdata: buffer,\n\t\t\t\t\t\t\tetag: result.etag,\n\t\t\t\t\t\t\tmtime: result.mtime,\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[buffer],\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tcase WebviewResourceResponse.Type.NotModified: {\n\t\t\t\t\treturn this._send(\"did-load-resource\", {\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tstatus: 304, // not modified\n\t\t\t\t\t\tpath: uri.path,\n\t\t\t\t\t\tmime: result.mimeType,\n\t\t\t\t\t\tmtime: result.mtime,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tcase WebviewResourceResponse.Type.AccessDenied: {\n\t\t\t\t\treturn this._send(\"did-load-resource\", {\n\t\t\t\t\t\tid,\n\t\t\t\t\t\tstatus: 401, // unauthorized\n\t\t\t\t\t\tpath: uri.path,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t} catch {\n\t\t\t// noop\n\t\t}\n\n\t\treturn this._send(\"did-load-resource\", {\n\t\t\tid,\n\t\t\tstatus: 404,\n\t\t\tpath: uri.path,\n\t\t});\n\t}\n\n\tprotected async streamToBuffer(\n\t\tstream: VSBufferReadableStream,\n\t): Promise<ArrayBufferLike> {\n\t\tconst vsBuffer = await streamToBuffer(stream);\n\t\treturn vsBuffer.buffer.buffer;\n\t}\n\n\tprivate async localLocalhost(id: string, origin: string) {\n\t\tconst authority = this._environmentService.remoteAuthority;\n\t\tconst resolveAuthority = authority\n\t\t\t? await this._remoteAuthorityResolverService.resolveAuthority(\n\t\t\t\t\tauthority,\n\t\t\t\t)\n\t\t\t: undefined;\n\t\tconst redirect = resolveAuthority\n\t\t\t? await this._portMappingManager.getRedirect(\n\t\t\t\t\tresolveAuthority.authority,\n\t\t\t\t\torigin,\n\t\t\t\t)\n\t\t\t: undefined;\n\t\treturn this._send(\"did-load-localhost\", {\n\t\t\tid,\n\t\t\torigin,\n\t\t\tlocation: redirect,\n\t\t});\n\t}\n\n\tpublic focus(): void {\n\t\tthis._doFocus();\n\n\t\t// Handle focus change programmatically (do not rely on event from <webview>)\n\t\tthis.handleFocusChange(true);\n\t}\n\n\tprivate _doFocus() {\n\t\tif (!this.element) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tthis.element.contentWindow?.focus();\n\t\t} catch {\n\t\t\t// noop\n\t\t}\n\n\t\t// Workaround for https://github.com/microsoft/vscode/issues/75209\n\t\t// Focusing the inner webview is async so for a sequence of actions such as:\n\t\t//\n\t\t// 1. Open webview\n\t\t// 1. Show quick pick from command palette\n\t\t//\n\t\t// We end up focusing the webview after showing the quick pick, which causes\n\t\t// the quick pick to instantly dismiss.\n\t\t//\n\t\t// Workaround this by debouncing the focus and making sure we are not focused on an input\n\t\t// when we try to re-focus.\n\t\tthis._focusDelayer.trigger(async () => {\n\t\t\tif (!this.isFocused || !this.element) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tthis.window?.document.activeElement &&\n\t\t\t\tthis.window.document.activeElement !== this.element &&\n\t\t\t\tthis.window.document.activeElement?.tagName !== \"BODY\"\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// It is possible for the webview to be contained in another window\n\t\t\t// that does not have focus. As such, also focus the body of the\n\t\t\t// webview's window to ensure it is properly receiving keyboard focus.\n\t\t\tthis.window?.document.body?.focus();\n\n\t\t\tthis._send(\"focus\", undefined);\n\t\t});\n\t}\n\n\tprotected readonly _hasFindResult = this._register(new Emitter<boolean>());\n\tpublic readonly hasFindResult: Event<boolean> = this._hasFindResult.event;\n\n\tprotected readonly _onDidStopFind = this._register(new Emitter<void>());\n\tpublic readonly onDidStopFind: Event<void> = this._onDidStopFind.event;\n\n\t/**\n\t * Webviews expose a stateful find API.\n\t * Successive calls to find will move forward or backward through onFindResults\n\t * depending on the supplied options.\n\t *\n\t * @param value The string to search for. Empty strings are ignored.\n\t */\n\tpublic find(value: string, previous: boolean): void {\n\t\tif (!this.element) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._send(\"find\", { value, previous });\n\t}\n\n\tpublic updateFind(value: string) {\n\t\tif (!value || !this.element) {\n\t\t\treturn;\n\t\t}\n\t\tthis._send(\"find\", { value });\n\t}\n\n\tpublic stopFind(keepSelection?: boolean): void {\n\t\tif (!this.element) {\n\t\t\treturn;\n\t\t}\n\t\tthis._send(\"find-stop\", { clearSelection: !keepSelection });\n\t\tthis._onDidStopFind.fire();\n\t}\n\n\tpublic showFind(animated = true) {\n\t\tthis._webviewFindWidget?.reveal(undefined, animated);\n\t}\n\n\tpublic hideFind(animated = true) {\n\t\tthis._webviewFindWidget?.hide(animated);\n\t}\n\n\tpublic runFindAction(previous: boolean) {\n\t\tthis._webviewFindWidget?.find(previous);\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;AAKA,SAAS,iBAAiB;AAC1B;AAAA,EACC;AAAA,EACA;AAAA,EACA;AAAA,OACM;AACP,SAAS,wBAAwB;AAGjC;AAAA,EACC;AAAA,EACA;AAAA,OACM;AACP;AAAA,EAEC;AAAA,OACM;AACP,SAAS,+BAA+B;AACxC,SAAS,SAAS,aAAa;AAC/B;AAAA,EACC;AAAA,EAEA;AAAA,OACM;AACP,SAAS,WAAW;AACpB,SAAS,WAAW;AACpB,SAAS,oBAAoB;AAC7B,SAAS,gBAAgB;AACzB,SAAS,6BAA6B;AACtC,SAAS,cAAc;AACvB,SAAS,6BAA6B;AAEtC,SAAS,2BAA2B;AAEpC,SAAS,oBAAoB;AAC7B,SAAS,6BAA6B;AACtC,SAAS,mBAAmB;AAC5B,SAAS,4BAA4B;AACrC,SAAS,uCAAuC;AAChD,SAAS,yBAAyB;AAClC,SAAS,sBAAsB;AAC/B,SAAS,iCAAiC;AAC1C,SAAS,oCAAoC;AAC7C;AAAA,EACC;AAAA,EACA;AAAA,EACA;AAAA,OACM;AACP;AAAA,EACC;AAAA,EACA;AAAA,OACM;AAEP;AAAA,EAOC;AAAA,OACM;AACP;AAAA,EAEC;AAAA,OACM;AAeP,IAAU;AAAA,CAAV,CAAUA,kBAAV;AACQ,MAAK;AAAL,IAAKC,UAAL;AACN,IAAAA,YAAA,kBAAe,KAAf;AACA,IAAAA,YAAA,WAAQ,KAAR;AAAA,KAFW,OAAAD,cAAA,SAAAA,cAAA;AAAA,EAKL,MAAM,aAAa;AAAA,IAGzB,YACQ,iBAMN;AANM;AAAA,IAML;AAAA,IArGL,OA2F2B;AAAA;AAAA;AAAA,IAChB,OAAO;AAAA,EAUjB;AAXO,EAAAA,cAAM;AAaN,EAAMA,cAAA,QAAQ,EAAE,MAAM,cAAW;AAAA,GAnB/B;AA6BV,MAAM,mBAAmB;AAElB,IAAM,iBAAN,cACE,WAET;AAAA,EA0FC,YACC,UACmB,0BACI,sBACF,oBACC,qBAEL,qBACc,cACD,aAEb,iCAEA,mBACgB,gBACV,sBAEN,uBAChB;AACD,UAAM;AAjBa;AAKF;AACc;AACD;AAEb;AAEA;AACgB;AAGhB;AAIjB,SAAK,mBAAmB,SAAS;AACjC,SAAK,SAAS,SAAS,UAAU,KAAK;AAEtC,SAAK,WAAW,SAAS;AACzB,SAAK,YAAY,SAAS;AAE1B,SAAK,WAAW;AAAA,MACf,MAAM;AAAA,MACN,OAAO,SAAS;AAAA,MAChB,SAAS,SAAS;AAAA,MAClB,OAAO;AAAA,IACR;AAEA,SAAK,sBAAsB,KAAK;AAAA,MAC/B,IAAI;AAAA,QACH,MAAM,KAAK,WAAW;AAAA,QACtB,MAAM,KAAK,SAAS,QAAQ,eAAe,CAAC;AAAA,QAC5C,KAAK;AAAA,MACN;AAAA,IACD;AAEA,SAAK,WAAW,KAAK;AAAA,MACpB,SAAS;AAAA,MACT,SAAS;AAAA,IACV;AAEA,SAAK;AAAA,MACJ,KAAK,GAAG,gBAAgB,MAAM;AAC7B,aAAK,iBAAiB;AAAA,MACvB,CAAC;AAAA,IACF;AAEA,SAAK;AAAA,MACJ,KAAK,GAAG,kBAAkB,CAAC,EAAE,IAAI,MAAM;AACtC,aAAK,gBAAgB,KAAK,GAAG;AAAA,MAC9B,CAAC;AAAA,IACF;AAEA,SAAK;AAAA,MACJ,KAAK,GAAG,aAAa,CAAC,EAAE,SAAS,SAAS,MAAM;AAC/C,aAAK,WAAW,KAAK,EAAE,SAAS,SAAS,CAAC;AAAA,MAC3C,CAAC;AAAA,IACF;AAEA,SAAK;AAAA,MACJ,KAAK,GAAG,cAAc,CAAC,EAAE,kBAAkB,MAAM;AAChD,aAAK,aAAa,KAAK,EAAE,kBAAkB,CAAC;AAAA,MAC7C,CAAC;AAAA,IACF;AAEA,SAAK;AAAA,MACJ,KAAK,GAAG,aAAa,MAAM;AAC1B,aAAK,OAAO;AAAA,MACb,CAAC;AAAA,IACF;AAEA,SAAK;AAAA,MACJ,KAAK,GAAG,mBAAmB,CAAC,UAAU;AACrC,aAAK,QAAQ;AACb,aAAK,kBAAkB,KAAK,KAAK;AAAA,MAClC,CAAC;AAAA,IACF;AAEA,SAAK;AAAA,MACJ,KAAK,GAAG,aAAa,MAAM;AAC1B,aAAK,kBAAkB,IAAI;AAAA,MAC5B,CAAC;AAAA,IACF;AAEA,SAAK;AAAA,MACJ,KAAK,GAAG,YAAY,MAAM;AACzB,aAAK,kBAAkB,KAAK;AAAA,MAC7B,CAAC;AAAA,IACF;AAEA,SAAK;AAAA,MACJ,KAAK,GAAG,oBAAoB,CAAC,UAAU;AACtC,aAAK,YAAY,KAAK,KAAK;AAAA,MAC5B,CAAC;AAAA,IACF;AAEA,SAAK;AAAA,MACJ,KAAK,GAAG,YAAY,CAAC,EAAE,QAAQ,MAAM;AACpC,aAAK,eAAe,KAAK,OAAO;AAAA,MACjC,CAAC;AAAA,IACF;AAEA,SAAK;AAAA,MACJ,KAAK,GAAG,eAAe,CAAC,MAAM;AAC7B,4BAAoB;AAAA,UACnB;AAAA,YACC;AAAA,YACA;AAAA,YACA,EAAE;AAAA,UACH;AAAA,QACD;AACA,aAAK,cAAc,KAAK,EAAE,SAAS,EAAE,QAAQ,CAAC;AAAA,MAC/C,CAAC;AAAA,IACF;AAEA,SAAK;AAAA,MACJ,KAAK,GAAG,eAAe,CAAC,SAAS;AAIhC,aAAK,eAAe,WAAW,IAAI;AAAA,MACpC,CAAC;AAAA,IACF;AAEA,SAAK;AAAA,MACJ,KAAK,GAAG,aAAa,CAAC,SAAS;AAC9B,aAAK,eAAe,SAAS,IAAI;AAAA,MAClC,CAAC;AAAA,IACF;AAEA,SAAK;AAAA,MACJ,KAAK,GAAG,oBAAoB,CAAC,SAAS;AACrC,YAAI,CAAC,KAAK,SAAS;AAClB;AAAA,QACD;AACA,YAAI,CAAC,KAAK,oBAAoB;AAC7B;AAAA,QACD;AACA,cAAM,aAAa,KAAK,QAAQ,sBAAsB;AACtD,cAAM,oBAAoB,KAAK,mBAAmB;AAAA,UACjD;AAAA,YACC,GAAG,OAAO,QAAQ,KAAK,OAAO;AAAA,YAC9B,CAAC,kBAAkB,KAAK,gBAAgB;AAAA,UACzC;AAAA,QACD;AACA,2BAAmB,gBAAgB;AAAA,UAClC,QAAQ,OAAO;AAAA,UACf,mBAAmB,EAAE,mBAAmB,KAAK;AAAA,UAC7C;AAAA,UACA,mBAAmB,8BAA6B;AAAA,YAC/C,GAAG,KAAK;AAAA,YACR,SAAS,KAAK;AAAA,UACf,IAHmB;AAAA,UAInB,WAAW,8BAAO;AAAA,YACjB,GAAG,WAAW,IAAI,KAAK;AAAA,YACvB,GAAG,WAAW,IAAI,KAAK;AAAA,UACxB,IAHW;AAAA,QAIZ,CAAC;AACD,aAAK,MAAM,4BAA4B,EAAE,SAAS,KAAK,CAAC;AAAA,MACzD,CAAC;AAAA,IACF;AAEA,SAAK;AAAA,MACJ,KAAK,GAAG,iBAAiB,OAAO,UAAU;AACzC,YAAI;AAEH,gBAAM,YAAY,gBAAgB,MAAM,SAAS;AACjD,gBAAM,MAAM,IAAI,KAAK;AAAA,YACpB,QAAQ,MAAM;AAAA,YACd;AAAA,YACA,MAAM,mBAAmB,MAAM,IAAI;AAAA;AAAA,YACnC,OAAO,MAAM,QACV,mBAAmB,MAAM,KAAK,IAC9B,MAAM;AAAA,UACV,CAAC;AACD,eAAK,aAAa,MAAM,IAAI,KAAK,MAAM,WAAW;AAAA,QACnD,SAAS,GAAG;AACX,eAAK,MAAM,qBAAqB;AAAA,YAC/B,IAAI,MAAM;AAAA,YACV,QAAQ;AAAA,YACR,MAAM,MAAM;AAAA,UACb,CAAC;AAAA,QACF;AAAA,MACD,CAAC;AAAA,IACF;AAEA,SAAK;AAAA,MACJ,KAAK,GAAG,kBAAkB,CAAC,UAAU;AACpC,aAAK,eAAe,MAAM,IAAI,MAAM,MAAM;AAAA,MAC3C,CAAC;AAAA,IACF;AAEA,SAAK;AAAA,MACJ,MAAM;AAAA,QACL,yBAAyB;AAAA,QACzB,MAAM,KAAK,MAAM;AAAA,MAClB;AAAA,IACD;AACA,SAAK;AAAA,MACJ,sBAAsB,yBAAyB,MAAM,KAAK,MAAM,CAAC;AAAA,IAClE;AACA,SAAK;AAAA,MACJ,sBAAsB;AAAA,QAAiC,MACtD,KAAK,MAAM;AAAA,MACZ;AAAA,IACD;AACA,SAAK;AAAA,MACJ,mBAAmB;AAAA,QAAqB,MACvC,KAAK,MAAM,4BAA4B,EAAE,SAAS,MAAM,CAAC;AAAA,MAC1D;AAAA,IACD;AAEA,SAAK,sBAAsB,qBAAqB;AAAA,MAC/C;AAAA,IACD;AAEA,SAAK;AAAA,MACJ,qBAAqB,yBAAyB,CAAC,MAAM;AACpD,YAAI,EAAE,qBAAqB,2BAA2B,GAAG;AACxD,eAAK,sBAAsB,qBAAqB;AAAA,YAC/C;AAAA,UACD;AACA,eAAK;AAAA,YACJ;AAAA,YACA,KAAK;AAAA,UACN;AAAA,QACD;AAAA,MACD,CAAC;AAAA,IACF;AAEA,SAAK;AAAA,MACJ,KAAK,GAAG,cAAc,MAAM;AAC3B,aAAK,+BAA+B;AAAA,MACrC,CAAC;AAAA,IACF;AAEA,SAAK;AAAA,MACJ,KAAK,GAAG,QAAQ,CAAC,UAAU;AAC1B,aAAK,gBAAgB,QAAQ,KAAK;AAAA,MACnC,CAAC;AAAA,IACF;AAEA,QAAI,SAAS,QAAQ,kBAAkB;AACtC,WAAK,qBAAqB,KAAK;AAAA,QAC9B,qBAAqB,eAAe,mBAAmB,IAAI;AAAA,MAC5D;AAAA,IACD;AAAA,EACD;AAAA,EA9cD,OAuHA;AAAA;AAAA;AAAA,EACoB,KAAK,aAAa;AAAA;AAAA;AAAA;AAAA,EAKrB;AAAA;AAAA;AAAA;AAAA,EAKA;AAAA,EAER,YAAgC;AAAA,EACxC,IAAY,SAAS;AACpB,WAAO,OAAO,KAAK,cAAc,WAC9B,cAAc,KAAK,SAAS,GAAG,SAC/B;AAAA,EACJ;AAAA,EAEQ;AAAA,EACA;AAAA,EAER,IAAc,WAAmB;AAChC,WAAO;AAAA,EACR;AAAA,EAEiB,gCAAgC;AAAA;AAAA,EAEzC;AAAA,EACR,IAAc,UAAyC;AACtD,WAAO,KAAK;AAAA,EACb;AAAA,EAEQ;AAAA,EACR,IAAW,YAAqB;AAC/B,QAAI,CAAC,KAAK,UAAU;AACnB,aAAO;AAAA,IACR;AAEA,QAAI,CAAC,KAAK,QAAQ;AACjB,aAAO;AAAA,IACR;AAEA,QACC,KAAK,OAAO,SAAS,iBACrB,KAAK,OAAO,SAAS,kBAAkB,KAAK,SAC3C;AAGD,aAAO;AAAA,IACR;AACA,WAAO;AAAA,EACR;AAAA,EAEQ,SAA6B,IAAI,aAAa,aAAa,CAAC,CAAC;AAAA,EAE7D;AAAA,EAES;AAAA,EAEA,sBAAsB,KAAK;AAAA,IAC3C,IAAI,wBAAwB;AAAA,EAC7B;AAAA,EAEQ;AAAA,EAEA;AAAA,EAES,gBAAgB,KAAK,UAAU,IAAI,iBAAiB,EAAE,CAAC;AAAA,EAEvD,mBAAoC,KAAK;AAAA,IACzD,IAAI,QAAgB;AAAA,EACrB;AAAA,EACmB,kBAAkB,KAAK,iBAAiB;AAAA,EAEnD;AAAA,EACS,mBAAmB,oBAAI,IAGtC;AAAA,EAEiB;AAAA,EACH,0BAA0B;AAAA,EAElC,YAAY;AAAA,EAEb;AAAA,EACU;AAAA,EAiQR,UAAgB;AACxB,SAAK,YAAY;AAEjB,SAAK,SAAS,OAAO;AACrB,SAAK,WAAW;AAEhB,SAAK,eAAe;AAEpB,QAAI,KAAK,OAAO,SAAS,sBAAgC;AACxD,iBAAW,WAAW,KAAK,OAAO,iBAAiB;AAClD,gBAAQ,QAAQ,KAAK;AAAA,MACtB;AACA,WAAK,OAAO,kBAAkB,CAAC;AAAA,IAChC;AAEA,SAAK,cAAc,KAAK;AAExB,SAAK,oBAAoB,QAAQ,IAAI;AAErC,UAAM,QAAQ;AAAA,EACf;AAAA,EAEA,qBAAqB,mBAAuC;AAC3D,SAAK,qBAAqB;AAAA,EAC3B;AAAA,EAEiB,gBAAgB,KAAK;AAAA,IACrC,IAAI,QAA6B;AAAA,EAClC;AAAA,EACgB,eAAe,KAAK,cAAc;AAAA,EAEjC,kBAAkB,KAAK,UAAU,IAAI,QAAgB,CAAC;AAAA,EACvD,iBAAiB,KAAK,gBAAgB;AAAA,EAErC,eAAe,KAAK,UAAU,IAAI,QAAc,CAAC;AAAA,EAClD,cAAc,KAAK,aAAa;AAAA,EAE/B,aAAa,KAAK;AAAA,IAClC,IAAI,QAAqC;AAAA,EAC1C;AAAA,EACgB,YAAY,KAAK,WAAW;AAAA,EAE3B,eAAe,KAAK;AAAA,IACpC,IAAI,QAAgD;AAAA,EACrD;AAAA,EACgB,cAAc,KAAK,aAAa;AAAA,EAE/B,cAAc,KAAK;AAAA,IACnC,IAAI,QAA0B;AAAA,EAC/B;AAAA,EACgB,aAAa,KAAK,YAAY;AAAA,EAE7B,oBAAoB,KAAK;AAAA,IACzC,IAAI,QAA4B;AAAA,EACjC;AAAA,EACgB,mBAAmB,KAAK,kBAAkB;AAAA,EAEzC,cAAc,KAAK,UAAU,IAAI,QAAc,CAAC;AAAA,EACjD,aAAa,KAAK,YAAY;AAAA,EAE7B,aAAa,KAAK,UAAU,IAAI,QAAc,CAAC;AAAA,EAChD,YAAY,KAAK,WAAW;AAAA,EAE3B,gBAAgB,KAAK;AAAA,IACrC,IAAI,QAAsC;AAAA,EAC3C;AAAA,EACgB,eAAe,KAAK,cAAc;AAAA,EAEjC,gBAAgB,KAAK,UAAU,IAAI,QAAc,CAAC;AAAA,EACnD,eAAe,KAAK,cAAc;AAAA,EAE3C,YACN,SACA,UACmB;AACnB,WAAO,KAAK,MAAM,WAAW,EAAE,SAAS,SAAS,CAAC;AAAA,EACnD;AAAA,EAEA,MAAc,MACb,SACA,MACA,iBAAiC,CAAC,GACf;AACnB,QAAI,KAAK,OAAO,SAAS,sBAAgC;AACxD,YAAM,EAAE,SAAS,QAAQ,IAAI,qBAA8B;AAC3D,WAAK,OAAO,gBAAgB,KAAK;AAAA,QAChC;AAAA,QACA;AAAA,QACA,cAAc;AAAA,QACd;AAAA,MACD,CAAC;AACD,aAAO;AAAA,IACR,OAAO;AACN,aAAO,KAAK,cAAc,SAAS,MAAM,cAAc;AAAA,IACxD;AAAA,EACD;AAAA,EAEQ,eACP,SACA,iBACC;AAGD,UAAM,UAAU,SAAS,cAAc,QAAQ;AAC/C,YAAQ,OAAO,KAAK;AACpB,YAAQ,YAAY,WAAW,QAAQ,iBAAiB,EAAE;AAC1D,YAAQ,QAAQ;AAAA,MACf;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACD;AAEA,UAAM,aAAa,CAAC,yBAAyB,UAAU;AACvD,QAAI,CAAC,WAAW;AACf,iBAAW,KAAK,kBAAkB,iBAAiB;AAAA,IACpD;AACA,YAAQ,aAAa,SAAS,WAAW,KAAK,IAAI,CAAC;AAEnD,YAAQ,MAAM,SAAS;AACvB,YAAQ,MAAM,QAAQ;AACtB,YAAQ,MAAM,SAAS;AAEvB,YAAQ,QAAQ,MAAM;AACrB,WAAK,SAAS;AAAA,IACf;AAEA,WAAO;AAAA,EACR;AAAA,EAEQ,aACP,sBACA,WACA,SACA,cACC;AAED,UAAM,SAAoC;AAAA,MACzC,IAAI,KAAK;AAAA,MACT,QAAQ,KAAK;AAAA,MACb,WAAW,OAAO,KAAK,6BAA6B;AAAA,MACpD,aAAa,WAAW,GAAG,SAAS;AAAA,MACpC,UAAU,KAAK;AAAA,MACf,kCAAkC;AAAA,MAClC,cAAc,aAAa;AAAA,IAC5B;AAEA,QAAI,KAAK,SAAS,sBAAsB;AACvC,aAAO,uBAAuB;AAAA,IAC/B;AAEA,QAAI,KAAK,oBAAoB,iBAAiB;AAC7C,aAAO,kBAAkB,KAAK,oBAAoB;AAAA,IACnD;AAEA,QAAI,QAAQ,SAAS;AACpB,aAAO,UAAU,QAAQ;AAAA,IAC1B;AAEA,QAAI,eAAe,QAAQ,MAAM,IAAI;AAErC,UAAM,cAAc,IAAI,gBAAgB,MAAM,EAAE,SAAS;AAGzD,UAAM,WAAW,YAAY,sBAAsB;AAEnD,SAAK,QAAS;AAAA,MACb;AAAA,MACA,GAAG,KAAK,uBAAuB,oBAAoB,CAAC,IAAI,QAAQ,IAAI,WAAW;AAAA,IAChF;AAAA,EACD;AAAA,EAEO,QAAQ,SAAsB,cAA0B;AAC9D,QAAI,CAAC,KAAK,SAAS;AAClB;AAAA,IACD;AAEA,SAAK,YAAY,aAAa;AAC9B,SAAK,+BAA+B;AAAA,MACnC,aAAa;AAAA,MACb,KAAK;AAAA,IACN,EAAE,KAAK,CAAC,OAAQ,KAAK,wBAAwB,EAAG;AAChD,SAAK,6BAA6B,KAAK,CAAC,yBAAyB;AAChE,UAAI,CAAC,KAAK,WAAW;AACpB,aAAK;AAAA,UACJ;AAAA,UACA,KAAK;AAAA,UACL,KAAK;AAAA,UACL;AAAA,QACD;AAAA,MACD;AAAA,IACD,CAAC;AACD,SAAK,wBAAwB,YAAY;AAEzC,QAAI,KAAK,oBAAoB;AAC5B,cAAQ,YAAY,KAAK,mBAAmB,WAAW,CAAC;AAAA,IACzD;AAEA,eAAW,aAAa;AAAA,MACvB,UAAU;AAAA,MACV,UAAU;AAAA,MACV,UAAU;AAAA,IACX,GAAG;AACF,WAAK;AAAA,QACJ,sBAAsB,SAAS,WAAW,MAAM;AAC/C,eAAK,8BAA8B;AAAA,QACpC,CAAC;AAAA,MACF;AAAA,IACD;AAEA,eAAW,QAAQ,CAAC,SAAS,YAAY,GAAG;AAC3C,WAAK;AAAA,QACJ,sBAAsB,MAAM,UAAU,UAAU,MAAM;AACrD,eAAK,8BAA8B;AAAA,QACpC,CAAC;AAAA,MACF;AAAA,IACD;AAEA,YAAQ,KAAK,KAAK;AAElB,YAAQ,YAAY,KAAK,OAAO;AAAA,EACjC;AAAA,EAEQ,wBAAwB,cAA0B;AACzD,UAAM,eAAe,KAAK;AAAA,MACzB;AAAA,QACC;AAAA,QACA;AAAA,QACA,CAAC,MAAoB;AACpB,cACC,CAAC,KAAK,yBACN,GAAG,MAAM,WAAW,KAAK,IACxB;AACD;AAAA,UACD;AAEA,cACC,EAAE,WACF,KAAK,sBAAsB,KAAK,qBAAqB,GACpD;AACD,oBAAQ;AAAA,cACP,iEAAiE,EAAE,MAAM,IAAI,KAAK,qBAAqB;AAAA,YACxG;AACA;AAAA,UACD;AAEA,cAAI,EAAE,KAAK,YAAY,iBAAiB;AACvC,gBAAI,KAAK,cAAc;AACtB;AAAA,YACD;AAEA,iBAAK,YAAY;AAAA,cAChB,WAAW,KAAK,EAAE;AAAA,YACnB;AAEA,iBAAK,eAAe,EAAE,MAAM,CAAC;AAC7B,iBAAK,aAAa,YAAY,CAACE,OAAM;AACpC,oBAAM,WAAW,KAAK,iBAAiB;AAAA,gBACtCA,GAAE,KAAK;AAAA,cACR;AACA,kBAAI,CAAC,UAAU;AACd,wBAAQ;AAAA,kBACP,0BAA0BA,GAAE,KAAK,OAAO;AAAA,gBACzC;AACA;AAAA,cACD;AACA,wBAAU;AAAA,gBAAQ,CAAC,YAClB,QAAQA,GAAE,KAAK,MAAMA,EAAC;AAAA,cACvB;AAAA,YACD;AAEA,iBAAK,SAAS,UAAU,IAAI,OAAO;AAEnC,gBACC,KAAK,OAAO,SAAS,sBACpB;AACD,mBAAK,OAAO,gBAAgB;AAAA,gBAC3B,CAAC,EAAE,SAAS,MAAM,QAAQ,MACzB,QAAQ,KAAK,cAAc,SAAS,IAAI,CAAC;AAAA,cAC3C;AAAA,YACD;AACA,iBAAK,SAAS,aAAa;AAE3B,yBAAa,QAAQ;AAAA,UACtB;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAAA,EAEQ,iCAAiC;AACxC,QAAI,KAAK,SAAS;AACjB,WAAK,QAAQ,MAAM,gBAAgB;AAAA,IACpC;AAAA,EACD;AAAA,EAEQ,gCAAgC;AACvC,QAAI,KAAK,SAAS;AACjB,WAAK,QAAQ,MAAM,gBAAgB;AAAA,IACpC;AAAA,EACD;AAAA,EAEU,uBAAuB,sBAAsC;AACtE,UAAM,0BACL,KAAK,oBAAoB;AAC1B,QAAI,CAAC,yBAAyB;AAC7B,YAAM,IAAI;AAAA,QACT;AAAA,MACD;AAAA,IACD;AAEA,UAAM,WAAW,wBAAwB;AAAA,MACxC;AAAA,MACA;AAAA,IACD;AACA,QAAI,SAAS,SAAS,SAAS,CAAC,MAAM,KAAK;AAC1C,aAAO,SAAS,MAAM,GAAG,SAAS,SAAS,CAAC;AAAA,IAC7C;AACA,WAAO;AAAA,EACR;AAAA,EAEQ,sBAAsB,sBAAsC;AACnE,UAAM,MAAM,IAAI;AAAA,MACf,KAAK,uBAAuB,oBAAoB;AAAA,IACjD;AACA,WAAO,IAAI,SAAS,QAAQ,IAAI,UAAU,YAAY;AAAA,EACvD;AAAA,EAEQ,cACP,SACA,MACA,eAA+B,CAAC,GACtB;AACV,QAAI,KAAK,WAAW,KAAK,cAAc;AACtC,WAAK,aAAa;AAAA,QACjB,EAAE,SAAS,MAAM,KAAK;AAAA,QACtB;AAAA,MACD;AACA,aAAO;AAAA,IACR;AACA,WAAO;AAAA,EACR;AAAA,EAEQ,GACP,SACA,SACc;AACd,QAAI,WAAW,KAAK,iBAAiB,IAAI,OAAO;AAChD,QAAI,CAAC,UAAU;AACd,iBAAW,oBAAI,IAAI;AACnB,WAAK,iBAAiB,IAAI,SAAS,QAAQ;AAAA,IAC5C;AAEA,aAAS,IAAI,OAAO;AACpB,WAAO,aAAa,MAAM;AACzB,WAAK,iBAAiB,IAAI,OAAO,GAAG,OAAO,OAAO;AAAA,IACnD,CAAC;AAAA,EACF;AAAA,EAEQ,6BAA6B;AAAA,EAC7B,mBAAyB;AAChC,QAAI,KAAK,4BAA4B;AACpC;AAAA,IACD;AACA,SAAK,6BAA6B;AAElC,QAAI,KAAK,WAAW,IAAI;AACvB,UAAI,KAAK,oBAAoB,wBAAwB;AACpD,aAAK,cAAc,KAAK,KAAK,UAAU,EAAE;AAAA,MAC1C;AAEA,YAAM,UAAU;AAAA,QACf,WAAW,KAAK,UAAU,GAAG;AAAA,MAC9B;AAYA,WAAK,kBAAkB;AAAA,QACtB;AAAA,QACA;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAAA,EAEO,SAAe;AACrB,SAAK,gBAAgB,KAAK,QAAQ;AAElC,UAAM,eAAe,KAAK;AAAA,MACzB,KAAK,GAAG,YAAY,MAAM;AACzB,aAAK,aAAa,KAAK;AACvB,qBAAa,QAAQ;AAAA,MACtB,CAAC;AAAA,IACF;AAAA,EACD;AAAA,EAEO,QAAQ,MAAc;AAC5B,SAAK,gBAAgB,EAAE,GAAG,KAAK,UAAU,KAAK,CAAC;AAC/C,SAAK,iBAAiB,KAAK,IAAI;AAAA,EAChC;AAAA,EAEO,SAAS,OAAe;AAC9B,SAAK,WAAW,EAAE,GAAG,KAAK,UAAU,MAAM;AAC1C,SAAK,MAAM,aAAa,KAAK;AAAA,EAC9B;AAAA,EAEA,IAAW,eAAe,SAAgC;AACzD,SAAK,YAAY;AAAA,MAChB,WAAW,KAAK,EAAE;AAAA,IACnB;AAEA,QAAI,8BAA8B,SAAS,KAAK,SAAS,OAAO,GAAG;AAClE,WAAK,YAAY;AAAA,QAChB,WAAW,KAAK,EAAE;AAAA,MACnB;AACA;AAAA,IACD;AAEA,SAAK,gBAAgB,EAAE,GAAG,KAAK,UAAU,QAAQ,CAAC;AAAA,EACnD;AAAA,EAEA,IAAW,mBAAmB,WAA2B;AACxD,SAAK,WAAW;AAAA,MACf,GAAG,KAAK;AAAA,MACR,SAAS;AAAA,QACR,GAAG,KAAK,SAAS;AAAA,QACjB,oBAAoB;AAAA,MACrB;AAAA,IACD;AAAA,EACD;AAAA,EAEA,IAAW,MAAM,OAA2B;AAC3C,SAAK,WAAW,EAAE,GAAG,KAAK,UAAU,MAAM;AAAA,EAC3C;AAAA,EAEA,IAAW,sBAAsB,OAAe;AAC/C,SAAK,MAAM,2BAA2B,KAAK;AAAA,EAC5C;AAAA,EAEQ,gBAAgB,YAA4B;AACnD,SAAK,YAAY,MAAM,WAAW,KAAK,EAAE,wBAAwB;AAEjE,SAAK,WAAW;AAEhB,UAAM,eAAe,CAAC,CAAC,KAAK,SAAS,QAAQ;AAC7C,SAAK,MAAM,WAAW;AAAA,MACrB,UAAU,KAAK,SAAS;AAAA,MACxB,OAAO,KAAK,SAAS;AAAA,MACrB,SAAS;AAAA,QACR,yBACC,CAAC,CAAC,KAAK,SAAS,QAAQ;AAAA,QACzB;AAAA,QACA,YAAY,KAAK,SAAS,QAAQ,cAAc;AAAA;AAAA,MACjD;AAAA,MACA,OAAO,KAAK,SAAS;AAAA,MACrB,WAAW;AAAA,MACX,oBAAoB,KAAK;AAAA,IAC1B,CAAC;AAAA,EACF;AAAA,EAEU,QAAc;AACvB,QAAI,EAAE,QAAQ,aAAa,YAAY,QAAQ,IAC9C,KAAK,yBAAyB,oBAAoB;AACnD,QAAI,KAAK,SAAS,uBAAuB;AACxC,eAAS,KAAK,SAAS,sBAAsB,MAAM;AAAA,IACpD;AAEA,UAAM,eAAe,KAAK,sBAAsB,gBAAgB;AAChE,UAAM,eACL,KAAK,sBAAsB,wBAAwB;AAEpD,SAAK,MAAM,UAAU;AAAA,MACpB;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACD,CAAC;AAAA,EACF;AAAA,EAEU,kBAAkB,WAA0B;AACrD,SAAK,WAAW;AAChB,QAAI,WAAW;AACd,WAAK,YAAY,KAAK;AAAA,IACvB,OAAO;AACN,WAAK,WAAW,KAAK;AAAA,IACtB;AAAA,EACD;AAAA,EAEQ,eAAe,MAA2B,OAAiB;AAElE,UAAM,wBAAwB,IAAI,cAAc,MAAM,KAAK;AAE3D,WAAO,eAAe,uBAAuB,UAAU;AAAA,MACtD,KAAK,6BAAM,KAAK,SAAX;AAAA,IACN,CAAC;AAED,SAAK,QAAQ,cAAc,qBAAqB;AAAA,EACjD;AAAA,EAEQ,gBAAgB,MAAc,OAAyB;AAE9D,UAAM,oBAAoB,IAAI,UAAU,MAAM,KAAK;AAEnD,WAAO,eAAe,mBAAmB,UAAU;AAAA,MAClD,KAAK,6BAAM,KAAK,SAAX;AAAA,IACN,CAAC;AAED,SAAK,QAAQ,cAAc,iBAAiB;AAAA,EAC7C;AAAA,EAEA,qBAA2B;AAI1B,SAAK,+BAA+B;AAAA,EACrC;AAAA,EAEA,mBAAyB;AACxB,SAAK,8BAA8B;AAAA,EACpC;AAAA,EAEO,YAAY;AAClB,SAAK,YAAY,WAAW;AAAA,EAC7B;AAAA,EAEO,OAAO;AACb,SAAK,YAAY,MAAM;AAAA,EACxB;AAAA,EAEO,QAAQ;AACd,SAAK,YAAY,OAAO;AAAA,EACzB;AAAA,EAEO,MAAM;AACZ,SAAK,YAAY,KAAK;AAAA,EACvB;AAAA,EAEO,OAAO;AACb,SAAK,YAAY,MAAM;AAAA,EACxB;AAAA,EAEO,OAAO;AACb,SAAK,YAAY,MAAM;AAAA,EACxB;AAAA,EAEQ,YAAY,SAAiB;AACpC,QAAI,KAAK,SAAS;AACjB,WAAK,MAAM,eAAe,OAAO;AAAA,IAClC;AAAA,EACD;AAAA,EAEA,MAAc,aACb,IACA,KACA,aACC;AACD,QAAI;AACH,YAAM,SAAS,MAAM;AAAA,QACpB;AAAA,QACA;AAAA,UACC;AAAA,UACA,OAAO,KAAK,SAAS,QAAQ,sBAAsB,CAAC;AAAA,QACrD;AAAA,QACA,KAAK;AAAA,QACL,KAAK;AAAA,QACL,KAAK,oBAAoB;AAAA,MAC1B;AAEA,cAAQ,OAAO,MAAM;AAAA,QACpB,KAAK,wBAAwB,KAAK,SAAS;AAC1C,gBAAM,SAAS,MAAM,KAAK,eAAe,OAAO,MAAM;AACtD,iBAAO,KAAK;AAAA,YACX;AAAA,YACA;AAAA,cACC;AAAA,cACA,QAAQ;AAAA,cACR,MAAM,IAAI;AAAA,cACV,MAAM,OAAO;AAAA,cACb,MAAM;AAAA,cACN,MAAM,OAAO;AAAA,cACb,OAAO,OAAO;AAAA,YACf;AAAA,YACA,CAAC,MAAM;AAAA,UACR;AAAA,QACD;AAAA,QACA,KAAK,wBAAwB,KAAK,aAAa;AAC9C,iBAAO,KAAK,MAAM,qBAAqB;AAAA,YACtC;AAAA,YACA,QAAQ;AAAA;AAAA,YACR,MAAM,IAAI;AAAA,YACV,MAAM,OAAO;AAAA,YACb,OAAO,OAAO;AAAA,UACf,CAAC;AAAA,QACF;AAAA,QACA,KAAK,wBAAwB,KAAK,cAAc;AAC/C,iBAAO,KAAK,MAAM,qBAAqB;AAAA,YACtC;AAAA,YACA,QAAQ;AAAA;AAAA,YACR,MAAM,IAAI;AAAA,UACX,CAAC;AAAA,QACF;AAAA,MACD;AAAA,IACD,QAAQ;AAAA,IAER;AAEA,WAAO,KAAK,MAAM,qBAAqB;AAAA,MACtC;AAAA,MACA,QAAQ;AAAA,MACR,MAAM,IAAI;AAAA,IACX,CAAC;AAAA,EACF;AAAA,EAEA,MAAgB,eACf,QAC2B;AAC3B,UAAM,WAAW,MAAM,eAAe,MAAM;AAC5C,WAAO,SAAS,OAAO;AAAA,EACxB;AAAA,EAEA,MAAc,eAAe,IAAY,QAAgB;AACxD,UAAM,YAAY,KAAK,oBAAoB;AAC3C,UAAM,mBAAmB,YACtB,MAAM,KAAK,gCAAgC;AAAA,MAC3C;AAAA,IACD,IACC;AACH,UAAM,WAAW,mBACd,MAAM,KAAK,oBAAoB;AAAA,MAC/B,iBAAiB;AAAA,MACjB;AAAA,IACD,IACC;AACH,WAAO,KAAK,MAAM,sBAAsB;AAAA,MACvC;AAAA,MACA;AAAA,MACA,UAAU;AAAA,IACX,CAAC;AAAA,EACF;AAAA,EAEO,QAAc;AACpB,SAAK,SAAS;AAGd,SAAK,kBAAkB,IAAI;AAAA,EAC5B;AAAA,EAEQ,WAAW;AAClB,QAAI,CAAC,KAAK,SAAS;AAClB;AAAA,IACD;AAEA,QAAI;AACH,WAAK,QAAQ,eAAe,MAAM;AAAA,IACnC,QAAQ;AAAA,IAER;AAaA,SAAK,cAAc,QAAQ,YAAY;AACtC,UAAI,CAAC,KAAK,aAAa,CAAC,KAAK,SAAS;AACrC;AAAA,MACD;AAEA,UACC,KAAK,QAAQ,SAAS,iBACtB,KAAK,OAAO,SAAS,kBAAkB,KAAK,WAC5C,KAAK,OAAO,SAAS,eAAe,YAAY,QAC/C;AACD;AAAA,MACD;AAKA,WAAK,QAAQ,SAAS,MAAM,MAAM;AAElC,WAAK,MAAM,SAAS,MAAS;AAAA,IAC9B,CAAC;AAAA,EACF;AAAA,EAEmB,iBAAiB,KAAK,UAAU,IAAI,QAAiB,CAAC;AAAA,EACzD,gBAAgC,KAAK,eAAe;AAAA,EAEjD,iBAAiB,KAAK,UAAU,IAAI,QAAc,CAAC;AAAA,EACtD,gBAA6B,KAAK,eAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAS1D,KAAK,OAAe,UAAyB;AACnD,QAAI,CAAC,KAAK,SAAS;AAClB;AAAA,IACD;AAEA,SAAK,MAAM,QAAQ,EAAE,OAAO,SAAS,CAAC;AAAA,EACvC;AAAA,EAEO,WAAW,OAAe;AAChC,QAAI,CAAC,SAAS,CAAC,KAAK,SAAS;AAC5B;AAAA,IACD;AACA,SAAK,MAAM,QAAQ,EAAE,MAAM,CAAC;AAAA,EAC7B;AAAA,EAEO,SAAS,eAA+B;AAC9C,QAAI,CAAC,KAAK,SAAS;AAClB;AAAA,IACD;AACA,SAAK,MAAM,aAAa,EAAE,gBAAgB,CAAC,cAAc,CAAC;AAC1D,SAAK,eAAe,KAAK;AAAA,EAC1B;AAAA,EAEO,SAAS,WAAW,MAAM;AAChC,SAAK,oBAAoB,OAAO,QAAW,QAAQ;AAAA,EACpD;AAAA,EAEO,SAAS,WAAW,MAAM;AAChC,SAAK,oBAAoB,KAAK,QAAQ;AAAA,EACvC;AAAA,EAEO,cAAc,UAAmB;AACvC,SAAK,oBAAoB,KAAK,QAAQ;AAAA,EACvC;AACD;AAxkCa,iBAAN;AAAA,EAgGJ;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AAAA,EAEA;AAAA,EAEA;AAAA,EACA;AAAA,EACA;AAAA,GA7GU;",
  "names": ["WebviewState", "Type", "e"]
}
