{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/webview/browser/themeing.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DEFAULT_FONT_FAMILY } from \"../../../../base/browser/fonts.js\";\nimport { Emitter } from \"../../../../base/common/event.js\";\nimport { Disposable } from \"../../../../base/common/lifecycle.js\";\nimport {\n\tEDITOR_FONT_DEFAULTS,\n\ttype IEditorOptions,\n} from \"../../../../editor/common/config/editorOptions.js\";\nimport { IConfigurationService } from \"../../../../platform/configuration/common/configuration.js\";\nimport * as colorRegistry from \"../../../../platform/theme/common/colorRegistry.js\";\nimport { ColorScheme } from \"../../../../platform/theme/common/theme.js\";\nimport {\n\ttype IWorkbenchColorTheme,\n\tIWorkbenchThemeService,\n} from \"../../../services/themes/common/workbenchThemeService.js\";\nimport type { WebviewStyles } from \"./webview.js\";\n\ninterface WebviewThemeData {\n\treadonly activeTheme: string;\n\treadonly themeLabel: string;\n\treadonly themeId: string;\n\treadonly styles: Readonly<WebviewStyles>;\n}\n\nexport class WebviewThemeDataProvider extends Disposable {\n\tprivate _cachedWebViewThemeData: WebviewThemeData | undefined = undefined;\n\n\tprivate readonly _onThemeDataChanged = this._register(new Emitter<void>());\n\tpublic readonly onThemeDataChanged = this._onThemeDataChanged.event;\n\n\tconstructor(\n\t\t@IWorkbenchThemeService private readonly _themeService: IWorkbenchThemeService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(this._themeService.onDidColorThemeChange(() => {\n\t\t\tthis._reset();\n\t\t}));\n\n\t\tconst webviewConfigurationKeys = ['editor.fontFamily', 'editor.fontWeight', 'editor.fontSize', 'accessibility.underlineLinks'];\n\t\tthis._register(this._configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (webviewConfigurationKeys.some(key => e.affectsConfiguration(key))) {\n\t\t\t\tthis._reset();\n\t\t\t}\n\t\t}));\n\t}\n\n\tpublic getTheme(): IWorkbenchColorTheme {\n\t\treturn this._themeService.getColorTheme();\n\t}\n\n\tpublic getWebviewThemeData(): WebviewThemeData {\n\t\tif (!this._cachedWebViewThemeData) {\n\t\t\tconst configuration =\n\t\t\t\tthis._configurationService.getValue<IEditorOptions>(\"editor\");\n\t\t\tconst editorFontFamily =\n\t\t\t\tconfiguration.fontFamily || EDITOR_FONT_DEFAULTS.fontFamily;\n\t\t\tconst editorFontWeight =\n\t\t\t\tconfiguration.fontWeight || EDITOR_FONT_DEFAULTS.fontWeight;\n\t\t\tconst editorFontSize =\n\t\t\t\tconfiguration.fontSize || EDITOR_FONT_DEFAULTS.fontSize;\n\t\t\tconst linkUnderlines = this._configurationService.getValue(\n\t\t\t\t\"accessibility.underlineLinks\",\n\t\t\t);\n\n\t\t\tconst theme = this._themeService.getColorTheme();\n\t\t\tconst exportedColors = colorRegistry\n\t\t\t\t.getColorRegistry()\n\t\t\t\t.getColors()\n\t\t\t\t.reduce<Record<string, string>>((colors, entry) => {\n\t\t\t\t\tconst color = theme.getColor(entry.id);\n\t\t\t\t\tif (color) {\n\t\t\t\t\t\tcolors[\"vscode-\" + entry.id.replace(\".\", \"-\")] =\n\t\t\t\t\t\t\tcolor.toString();\n\t\t\t\t\t}\n\t\t\t\t\treturn colors;\n\t\t\t\t}, {});\n\n\t\t\tconst styles = {\n\t\t\t\t\"vscode-font-family\": DEFAULT_FONT_FAMILY,\n\t\t\t\t\"vscode-font-weight\": \"normal\",\n\t\t\t\t\"vscode-font-size\": \"13px\",\n\t\t\t\t\"vscode-editor-font-family\": editorFontFamily,\n\t\t\t\t\"vscode-editor-font-weight\": editorFontWeight,\n\t\t\t\t\"vscode-editor-font-size\": editorFontSize + \"px\",\n\t\t\t\t\"text-link-decoration\": linkUnderlines ? \"underline\" : \"none\",\n\t\t\t\t...exportedColors,\n\t\t\t};\n\n\t\t\tconst activeTheme = ApiThemeClassName.fromTheme(theme);\n\t\t\tthis._cachedWebViewThemeData = {\n\t\t\t\tstyles,\n\t\t\t\tactiveTheme,\n\t\t\t\tthemeLabel: theme.label,\n\t\t\t\tthemeId: theme.settingsId,\n\t\t\t};\n\t\t}\n\n\t\treturn this._cachedWebViewThemeData;\n\t}\n\n\tprivate _reset() {\n\t\tthis._cachedWebViewThemeData = undefined;\n\t\tthis._onThemeDataChanged.fire();\n\t}\n}\n\nenum ApiThemeClassName {\n\tlight = \"vscode-light\",\n\tdark = \"vscode-dark\",\n\thighContrast = \"vscode-high-contrast\",\n\thighContrastLight = \"vscode-high-contrast-light\",\n}\n\nnamespace ApiThemeClassName {\n\texport function fromTheme(theme: IWorkbenchColorTheme): ApiThemeClassName {\n\t\tswitch (theme.type) {\n\t\t\tcase ColorScheme.LIGHT:\n\t\t\t\treturn ApiThemeClassName.light;\n\t\t\tcase ColorScheme.DARK:\n\t\t\t\treturn ApiThemeClassName.dark;\n\t\t\tcase ColorScheme.HIGH_CONTRAST_DARK:\n\t\t\t\treturn ApiThemeClassName.highContrast;\n\t\t\tcase ColorScheme.HIGH_CONTRAST_LIGHT:\n\t\t\t\treturn ApiThemeClassName.highContrastLight;\n\t\t}\n\t}\n}\n"],
  "mappings": "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",
  "names": ["ApiThemeClassName"]
}
