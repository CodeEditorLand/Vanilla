{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/webview/browser/themeing.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DEFAULT_FONT_FAMILY } from '../../../../base/browser/fonts.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EDITOR_FONT_DEFAULTS, IEditorOptions } from '../../../../editor/common/config/editorOptions.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport * as colorRegistry from '../../../../platform/theme/common/colorRegistry.js';\nimport { ColorScheme } from '../../../../platform/theme/common/theme.js';\nimport { IWorkbenchColorTheme, IWorkbenchThemeService } from '../../../services/themes/common/workbenchThemeService.js';\nimport { WebviewStyles } from './webview.js';\n\ninterface WebviewThemeData {\n\treadonly activeTheme: string;\n\treadonly themeLabel: string;\n\treadonly themeId: string;\n\treadonly styles: Readonly<WebviewStyles>;\n}\n\nexport class WebviewThemeDataProvider extends Disposable {\n\n\tprivate _cachedWebViewThemeData: WebviewThemeData | undefined = undefined;\n\n\tprivate readonly _onThemeDataChanged = this._register(new Emitter<void>());\n\tpublic readonly onThemeDataChanged = this._onThemeDataChanged.event;\n\n\tconstructor(\n\t\t@IWorkbenchThemeService private readonly _themeService: IWorkbenchThemeService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(this._themeService.onDidColorThemeChange(() => {\n\t\t\tthis._reset();\n\t\t}));\n\n\t\tconst webviewConfigurationKeys = ['editor.fontFamily', 'editor.fontWeight', 'editor.fontSize', 'accessibility.underlineLinks'];\n\t\tthis._register(this._configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (webviewConfigurationKeys.some(key => e.affectsConfiguration(key))) {\n\t\t\t\tthis._reset();\n\t\t\t}\n\t\t}));\n\t}\n\n\tpublic getTheme(): IWorkbenchColorTheme {\n\t\treturn this._themeService.getColorTheme();\n\t}\n\n\tpublic getWebviewThemeData(): WebviewThemeData {\n\t\tif (!this._cachedWebViewThemeData) {\n\t\t\tconst configuration = this._configurationService.getValue<IEditorOptions>('editor');\n\t\t\tconst editorFontFamily = configuration.fontFamily || EDITOR_FONT_DEFAULTS.fontFamily;\n\t\t\tconst editorFontWeight = configuration.fontWeight || EDITOR_FONT_DEFAULTS.fontWeight;\n\t\t\tconst editorFontSize = configuration.fontSize || EDITOR_FONT_DEFAULTS.fontSize;\n\t\t\tconst linkUnderlines = this._configurationService.getValue('accessibility.underlineLinks');\n\n\t\t\tconst theme = this._themeService.getColorTheme();\n\t\t\tconst exportedColors = colorRegistry.getColorRegistry().getColors().reduce<Record<string, string>>((colors, entry) => {\n\t\t\t\tconst color = theme.getColor(entry.id);\n\t\t\t\tif (color) {\n\t\t\t\t\tcolors['vscode-' + entry.id.replace('.', '-')] = color.toString();\n\t\t\t\t}\n\t\t\t\treturn colors;\n\t\t\t}, {});\n\n\t\t\tconst styles = {\n\t\t\t\t'vscode-font-family': DEFAULT_FONT_FAMILY,\n\t\t\t\t'vscode-font-weight': 'normal',\n\t\t\t\t'vscode-font-size': '13px',\n\t\t\t\t'vscode-editor-font-family': editorFontFamily,\n\t\t\t\t'vscode-editor-font-weight': editorFontWeight,\n\t\t\t\t'vscode-editor-font-size': editorFontSize + 'px',\n\t\t\t\t'text-link-decoration': linkUnderlines ? 'underline' : 'none',\n\t\t\t\t...exportedColors\n\t\t\t};\n\n\t\t\tconst activeTheme = ApiThemeClassName.fromTheme(theme);\n\t\t\tthis._cachedWebViewThemeData = { styles, activeTheme, themeLabel: theme.label, themeId: theme.settingsId };\n\t\t}\n\n\t\treturn this._cachedWebViewThemeData;\n\t}\n\n\tprivate _reset() {\n\t\tthis._cachedWebViewThemeData = undefined;\n\t\tthis._onThemeDataChanged.fire();\n\t}\n}\n\nenum ApiThemeClassName {\n\tlight = 'vscode-light',\n\tdark = 'vscode-dark',\n\thighContrast = 'vscode-high-contrast',\n\thighContrastLight = 'vscode-high-contrast-light',\n}\n\nnamespace ApiThemeClassName {\n\texport function fromTheme(theme: IWorkbenchColorTheme): ApiThemeClassName {\n\t\tswitch (theme.type) {\n\t\t\tcase ColorScheme.LIGHT: return ApiThemeClassName.light;\n\t\t\tcase ColorScheme.DARK: return ApiThemeClassName.dark;\n\t\t\tcase ColorScheme.HIGH_CONTRAST_DARK: return ApiThemeClassName.highContrast;\n\t\t\tcase ColorScheme.HIGH_CONTRAST_LIGHT: return ApiThemeClassName.highContrastLight;\n\t\t}\n\t}\n}\n"],
  "mappings": "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",
  "names": ["ApiThemeClassName"]
}
