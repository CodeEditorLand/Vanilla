{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/webview/browser/overlayWebview.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { type Dimension, getWindowById } from \"../../../../base/browser/dom.js\";\nimport { FastDomNode } from \"../../../../base/browser/fastDomNode.js\";\nimport type { IMouseWheelEvent } from \"../../../../base/browser/mouseEvent.js\";\nimport type { CodeWindow } from \"../../../../base/browser/window.js\";\nimport { Emitter } from \"../../../../base/common/event.js\";\nimport {\n\tDisposable,\n\tDisposableStore,\n\tMutableDisposable,\n} from \"../../../../base/common/lifecycle.js\";\nimport type { URI } from \"../../../../base/common/uri.js\";\nimport { generateUuid } from \"../../../../base/common/uuid.js\";\nimport {\n\ttype IContextKey,\n\tIContextKeyService,\n\ttype IScopedContextKeyService,\n} from \"../../../../platform/contextkey/common/contextkey.js\";\nimport type { ExtensionIdentifier } from \"../../../../platform/extensions/common/extensions.js\";\nimport { IWorkbenchLayoutService } from \"../../../services/layout/browser/layoutService.js\";\nimport {\n\ttype IOverlayWebview,\n\ttype IWebview,\n\ttype IWebviewElement,\n\tIWebviewService,\n\tKEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_ENABLED,\n\tKEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_VISIBLE,\n\ttype WebviewContentOptions,\n\ttype WebviewExtensionDescription,\n\ttype WebviewInitInfo,\n\ttype WebviewMessageReceivedEvent,\n\ttype WebviewOptions,\n} from \"./webview.js\";\n\n/**\n * Webview that is absolutely positioned over another element and that can creates and destroys an underlying webview as needed.\n */\nexport class OverlayWebview extends Disposable implements IOverlayWebview {\n\tprivate _isFirstLoad = true;\n\tprivate readonly _firstLoadPendingMessages = new Set<{\n\t\treadonly message: any;\n\t\treadonly transfer?: readonly ArrayBuffer[];\n\t\treadonly resolve: (value: boolean) => void;\n\t}>();\n\tprivate readonly _webview = this._register(\n\t\tnew MutableDisposable<IWebviewElement>(),\n\t);\n\tprivate readonly _webviewEvents = this._register(new DisposableStore());\n\n\tprivate _html = \"\";\n\tprivate _title: string | undefined;\n\tprivate _initialScrollProgress = 0;\n\tprivate _state: string | undefined = undefined;\n\n\tprivate _extension: WebviewExtensionDescription | undefined;\n\tprivate _contentOptions: WebviewContentOptions;\n\tprivate _options: WebviewOptions;\n\n\tprivate _owner: any = undefined;\n\n\tprivate _windowId: number | undefined = undefined;\n\tprivate get window() {\n\t\treturn getWindowById(this._windowId, true).window;\n\t}\n\n\tprivate readonly _scopedContextKeyService = this._register(\n\t\tnew MutableDisposable<IScopedContextKeyService>(),\n\t);\n\tprivate _findWidgetVisible: IContextKey<boolean> | undefined;\n\tprivate _findWidgetEnabled: IContextKey<boolean> | undefined;\n\tprivate _shouldShowFindWidgetOnRestore = false;\n\n\tpublic readonly providedViewType?: string;\n\n\tpublic origin: string;\n\n\tprivate _container: FastDomNode<HTMLDivElement> | undefined;\n\n\tpublic constructor(\n\t\tinitInfo: WebviewInitInfo,\n\t\t@IWorkbenchLayoutService\n\t\tprivate readonly _layoutService: IWorkbenchLayoutService,\n\t\t@IWebviewService private readonly _webviewService: IWebviewService,\n\t\t@IContextKeyService\n\t\tprivate readonly _baseContextKeyService: IContextKeyService,\n\t) {\n\t\tsuper();\n\n\t\tthis.providedViewType = initInfo.providedViewType;\n\t\tthis.origin = initInfo.origin ?? generateUuid();\n\n\t\tthis._title = initInfo.title;\n\t\tthis._extension = initInfo.extension;\n\t\tthis._options = initInfo.options;\n\t\tthis._contentOptions = initInfo.contentOptions;\n\t}\n\n\tpublic get isFocused() {\n\t\treturn !!this._webview.value?.isFocused;\n\t}\n\n\tprivate _isDisposed = false;\n\n\tprivate readonly _onDidDispose = this._register(new Emitter<void>());\n\tpublic onDidDispose = this._onDidDispose.event;\n\n\toverride dispose() {\n\t\tthis._isDisposed = true;\n\n\t\tthis._container?.domNode.remove();\n\t\tthis._container = undefined;\n\n\t\tfor (const msg of this._firstLoadPendingMessages) {\n\t\t\tmsg.resolve(false);\n\t\t}\n\t\tthis._firstLoadPendingMessages.clear();\n\n\t\tthis._onDidDispose.fire();\n\n\t\tsuper.dispose();\n\t}\n\n\tpublic get container(): HTMLElement {\n\t\tif (this._isDisposed) {\n\t\t\tthrow new Error(`OverlayWebview has been disposed`);\n\t\t}\n\n\t\tif (!this._container) {\n\t\t\tconst node = document.createElement(\"div\");\n\t\t\tnode.style.position = \"absolute\";\n\t\t\tnode.style.overflow = \"hidden\";\n\t\t\tthis._container = new FastDomNode(node);\n\t\t\tthis._container.setVisibility(\"hidden\");\n\n\t\t\t// Webviews cannot be reparented in the dom as it will destroy their contents.\n\t\t\t// Mount them to a high level node to avoid this.\n\t\t\tthis._layoutService.getContainer(this.window).appendChild(node);\n\t\t}\n\n\t\treturn this._container.domNode;\n\t}\n\n\tpublic claim(\n\t\towner: any,\n\t\ttargetWindow: CodeWindow,\n\t\tscopedContextKeyService: IContextKeyService | undefined,\n\t) {\n\t\tif (this._isDisposed) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst oldOwner = this._owner;\n\n\t\tif (this._windowId !== targetWindow.vscodeWindowId) {\n\t\t\t// moving to a new window\n\t\t\tthis.release(oldOwner);\n\t\t\t// since we are moving to a new window, we need to dispose the webview and recreate\n\t\t\tthis._webview.clear();\n\t\t\tthis._webviewEvents.clear();\n\t\t\tthis._container?.domNode.remove();\n\t\t\tthis._container = undefined;\n\t\t}\n\n\t\tthis._owner = owner;\n\t\tthis._windowId = targetWindow.vscodeWindowId;\n\t\tthis._show(targetWindow);\n\n\t\tif (oldOwner !== owner) {\n\t\t\tconst contextKeyService =\n\t\t\t\tscopedContextKeyService || this._baseContextKeyService;\n\n\t\t\t// Explicitly clear before creating the new context.\n\t\t\t// Otherwise we create the new context while the old one is still around\n\t\t\tthis._scopedContextKeyService.clear();\n\t\t\tthis._scopedContextKeyService.value =\n\t\t\t\tcontextKeyService.createScoped(this.container);\n\n\t\t\tconst wasFindVisible = this._findWidgetVisible?.get();\n\t\t\tthis._findWidgetVisible?.reset();\n\t\t\tthis._findWidgetVisible =\n\t\t\t\tKEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_VISIBLE.bindTo(\n\t\t\t\t\tcontextKeyService,\n\t\t\t\t);\n\t\t\tthis._findWidgetVisible.set(!!wasFindVisible);\n\n\t\t\tthis._findWidgetEnabled?.reset();\n\t\t\tthis._findWidgetEnabled =\n\t\t\t\tKEYBINDING_CONTEXT_WEBVIEW_FIND_WIDGET_ENABLED.bindTo(\n\t\t\t\t\tcontextKeyService,\n\t\t\t\t);\n\t\t\tthis._findWidgetEnabled.set(!!this.options.enableFindWidget);\n\n\t\t\tthis._webview.value?.setContextKeyService(\n\t\t\t\tthis._scopedContextKeyService.value,\n\t\t\t);\n\t\t}\n\t}\n\n\tpublic release(owner: any) {\n\t\tif (this._owner !== owner) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._scopedContextKeyService.clear();\n\n\t\tthis._owner = undefined;\n\t\tif (this._container) {\n\t\t\tthis._container.setVisibility(\"hidden\");\n\t\t}\n\n\t\tif (this._options.retainContextWhenHidden) {\n\t\t\t// https://github.com/microsoft/vscode/issues/157424\n\t\t\t// We need to record the current state when retaining context so we can try to showFind() when showing webview again\n\t\t\tthis._shouldShowFindWidgetOnRestore =\n\t\t\t\t!!this._findWidgetVisible?.get();\n\t\t\tthis.hideFind(false);\n\t\t} else {\n\t\t\tthis._webview.clear();\n\t\t\tthis._webviewEvents.clear();\n\t\t}\n\t}\n\n\tpublic layoutWebviewOverElement(\n\t\telement: HTMLElement,\n\t\tdimension?: Dimension,\n\t\tclippingContainer?: HTMLElement,\n\t) {\n\t\tif (!this._container || !this._container.domNode.parentElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst whenContainerStylesLoaded =\n\t\t\tthis._layoutService.whenContainerStylesLoaded(this.window);\n\t\tif (whenContainerStylesLoaded) {\n\t\t\t// In floating windows, we need to ensure that the\n\t\t\t// container is ready for us to compute certain\n\t\t\t// layout related properties.\n\t\t\twhenContainerStylesLoaded.then(() =>\n\t\t\t\tthis.doLayoutWebviewOverElement(\n\t\t\t\t\telement,\n\t\t\t\t\tdimension,\n\t\t\t\t\tclippingContainer,\n\t\t\t\t),\n\t\t\t);\n\t\t} else {\n\t\t\tthis.doLayoutWebviewOverElement(\n\t\t\t\telement,\n\t\t\t\tdimension,\n\t\t\t\tclippingContainer,\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate doLayoutWebviewOverElement(\n\t\telement: HTMLElement,\n\t\tdimension?: Dimension,\n\t\tclippingContainer?: HTMLElement,\n\t) {\n\t\tif (!this._container || !this._container.domNode.parentElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst frameRect = element.getBoundingClientRect();\n\t\tconst containerRect =\n\t\t\tthis._container.domNode.parentElement.getBoundingClientRect();\n\t\tconst parentBorderTop =\n\t\t\t(containerRect.height -\n\t\t\t\tthis._container.domNode.parentElement.clientHeight) /\n\t\t\t2.0;\n\t\tconst parentBorderLeft =\n\t\t\t(containerRect.width -\n\t\t\t\tthis._container.domNode.parentElement.clientWidth) /\n\t\t\t2.0;\n\n\t\tthis._container.setTop(\n\t\t\tframeRect.top - containerRect.top - parentBorderTop,\n\t\t);\n\t\tthis._container.setLeft(\n\t\t\tframeRect.left - containerRect.left - parentBorderLeft,\n\t\t);\n\t\tthis._container.setWidth(dimension ? dimension.width : frameRect.width);\n\t\tthis._container.setHeight(\n\t\t\tdimension ? dimension.height : frameRect.height,\n\t\t);\n\n\t\tif (clippingContainer) {\n\t\t\tconst { top, left, right, bottom } = computeClippingRect(\n\t\t\t\tframeRect,\n\t\t\t\tclippingContainer,\n\t\t\t);\n\t\t\tthis._container.domNode.style.clipPath = `polygon(${left}px ${top}px, ${right}px ${top}px, ${right}px ${bottom}px, ${left}px ${bottom}px)`;\n\t\t}\n\t}\n\n\tprivate _show(targetWindow: CodeWindow) {\n\t\tif (this._isDisposed) {\n\t\t\tthrow new Error(\"OverlayWebview is disposed\");\n\t\t}\n\n\t\tif (!this._webview.value) {\n\t\t\tconst webview = this._webviewService.createWebviewElement({\n\t\t\t\tprovidedViewType: this.providedViewType,\n\t\t\t\torigin: this.origin,\n\t\t\t\ttitle: this._title,\n\t\t\t\toptions: this._options,\n\t\t\t\tcontentOptions: this._contentOptions,\n\t\t\t\textension: this.extension,\n\t\t\t});\n\t\t\tthis._webview.value = webview;\n\t\t\twebview.state = this._state;\n\n\t\t\tif (this._scopedContextKeyService.value) {\n\t\t\t\tthis._webview.value.setContextKeyService(\n\t\t\t\t\tthis._scopedContextKeyService.value,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this._html) {\n\t\t\t\twebview.setHtml(this._html);\n\t\t\t}\n\n\t\t\tif (this._options.tryRestoreScrollPosition) {\n\t\t\t\twebview.initialScrollProgress = this._initialScrollProgress;\n\t\t\t}\n\n\t\t\tthis._findWidgetEnabled?.set(!!this.options.enableFindWidget);\n\n\t\t\twebview.mountTo(this.container, targetWindow);\n\n\t\t\t// Forward events from inner webview to outer listeners\n\t\t\tthis._webviewEvents.clear();\n\t\t\tthis._webviewEvents.add(\n\t\t\t\twebview.onDidFocus(() => {\n\t\t\t\t\tthis._onDidFocus.fire();\n\t\t\t\t}),\n\t\t\t);\n\t\t\tthis._webviewEvents.add(\n\t\t\t\twebview.onDidBlur(() => {\n\t\t\t\t\tthis._onDidBlur.fire();\n\t\t\t\t}),\n\t\t\t);\n\t\t\tthis._webviewEvents.add(\n\t\t\t\twebview.onDidClickLink((x) => {\n\t\t\t\t\tthis._onDidClickLink.fire(x);\n\t\t\t\t}),\n\t\t\t);\n\t\t\tthis._webviewEvents.add(\n\t\t\t\twebview.onMessage((x) => {\n\t\t\t\t\tthis._onMessage.fire(x);\n\t\t\t\t}),\n\t\t\t);\n\t\t\tthis._webviewEvents.add(\n\t\t\t\twebview.onMissingCsp((x) => {\n\t\t\t\t\tthis._onMissingCsp.fire(x);\n\t\t\t\t}),\n\t\t\t);\n\t\t\tthis._webviewEvents.add(\n\t\t\t\twebview.onDidWheel((x) => {\n\t\t\t\t\tthis._onDidWheel.fire(x);\n\t\t\t\t}),\n\t\t\t);\n\t\t\tthis._webviewEvents.add(\n\t\t\t\twebview.onDidReload(() => {\n\t\t\t\t\tthis._onDidReload.fire();\n\t\t\t\t}),\n\t\t\t);\n\t\t\tthis._webviewEvents.add(\n\t\t\t\twebview.onFatalError((x) => {\n\t\t\t\t\tthis._onFatalError.fire(x);\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tthis._webviewEvents.add(\n\t\t\t\twebview.onDidScroll((x) => {\n\t\t\t\t\tthis._initialScrollProgress = x.scrollYPercentage;\n\t\t\t\t\tthis._onDidScroll.fire(x);\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tthis._webviewEvents.add(\n\t\t\t\twebview.onDidUpdateState((state) => {\n\t\t\t\t\tthis._state = state;\n\t\t\t\t\tthis._onDidUpdateState.fire(state);\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tif (this._isFirstLoad) {\n\t\t\t\tthis._firstLoadPendingMessages.forEach(async (msg) => {\n\t\t\t\t\tmsg.resolve(\n\t\t\t\t\t\tawait webview.postMessage(msg.message, msg.transfer),\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis._isFirstLoad = false;\n\t\t\tthis._firstLoadPendingMessages.clear();\n\t\t}\n\n\t\t// https://github.com/microsoft/vscode/issues/157424\n\t\tif (\n\t\t\tthis.options.retainContextWhenHidden &&\n\t\t\tthis._shouldShowFindWidgetOnRestore\n\t\t) {\n\t\t\tthis.showFind(false);\n\t\t\t// Reset\n\t\t\tthis._shouldShowFindWidgetOnRestore = false;\n\t\t}\n\n\t\tthis._container?.setVisibility(\"visible\");\n\t}\n\n\tpublic setHtml(html: string) {\n\t\tthis._html = html;\n\t\tthis._withWebview((webview) => webview.setHtml(html));\n\t}\n\n\tpublic setTitle(title: string) {\n\t\tthis._title = title;\n\t\tthis._withWebview((webview) => webview.setTitle(title));\n\t}\n\n\tpublic get initialScrollProgress(): number {\n\t\treturn this._initialScrollProgress;\n\t}\n\tpublic set initialScrollProgress(value: number) {\n\t\tthis._initialScrollProgress = value;\n\t\tthis._withWebview((webview) => (webview.initialScrollProgress = value));\n\t}\n\n\tpublic get state(): string | undefined {\n\t\treturn this._state;\n\t}\n\tpublic set state(value: string | undefined) {\n\t\tthis._state = value;\n\t\tthis._withWebview((webview) => (webview.state = value));\n\t}\n\n\tpublic get extension(): WebviewExtensionDescription | undefined {\n\t\treturn this._extension;\n\t}\n\tpublic set extension(value: WebviewExtensionDescription | undefined) {\n\t\tthis._extension = value;\n\t\tthis._withWebview((webview) => (webview.extension = value));\n\t}\n\n\tpublic get options(): WebviewOptions {\n\t\treturn this._options;\n\t}\n\tpublic set options(value: WebviewOptions) {\n\t\tthis._options = {\n\t\t\tcustomClasses: this._options.customClasses,\n\t\t\t...value,\n\t\t};\n\t}\n\n\tpublic get contentOptions(): WebviewContentOptions {\n\t\treturn this._contentOptions;\n\t}\n\tpublic set contentOptions(value: WebviewContentOptions) {\n\t\tthis._contentOptions = value;\n\t\tthis._withWebview((webview) => (webview.contentOptions = value));\n\t}\n\n\tpublic set localResourcesRoot(resources: URI[]) {\n\t\tthis._withWebview(\n\t\t\t(webview) => (webview.localResourcesRoot = resources),\n\t\t);\n\t}\n\n\tprivate readonly _onDidFocus = this._register(new Emitter<void>());\n\tpublic readonly onDidFocus = this._onDidFocus.event;\n\n\tprivate readonly _onDidBlur = this._register(new Emitter<void>());\n\tpublic readonly onDidBlur = this._onDidBlur.event;\n\n\tprivate readonly _onDidClickLink = this._register(new Emitter<string>());\n\tpublic readonly onDidClickLink = this._onDidClickLink.event;\n\n\tprivate readonly _onDidReload = this._register(new Emitter<void>());\n\tpublic readonly onDidReload = this._onDidReload.event;\n\n\tprivate readonly _onDidScroll = this._register(\n\t\tnew Emitter<{ readonly scrollYPercentage: number }>(),\n\t);\n\tpublic readonly onDidScroll = this._onDidScroll.event;\n\n\tprivate readonly _onDidUpdateState = this._register(\n\t\tnew Emitter<string | undefined>(),\n\t);\n\tpublic readonly onDidUpdateState = this._onDidUpdateState.event;\n\n\tprivate readonly _onMessage = this._register(\n\t\tnew Emitter<WebviewMessageReceivedEvent>(),\n\t);\n\tpublic readonly onMessage = this._onMessage.event;\n\n\tprivate readonly _onMissingCsp = this._register(\n\t\tnew Emitter<ExtensionIdentifier>(),\n\t);\n\tpublic readonly onMissingCsp = this._onMissingCsp.event;\n\n\tprivate readonly _onDidWheel = this._register(\n\t\tnew Emitter<IMouseWheelEvent>(),\n\t);\n\tpublic readonly onDidWheel = this._onDidWheel.event;\n\n\tprivate readonly _onFatalError = this._register(\n\t\tnew Emitter<{ readonly message: string }>(),\n\t);\n\tpublic onFatalError = this._onFatalError.event;\n\n\tpublic async postMessage(\n\t\tmessage: any,\n\t\ttransfer?: readonly ArrayBuffer[],\n\t): Promise<boolean> {\n\t\tif (this._webview.value) {\n\t\t\treturn this._webview.value.postMessage(message, transfer);\n\t\t}\n\n\t\tif (this._isFirstLoad) {\n\t\t\tlet resolve: (x: boolean) => void;\n\t\t\tconst p = new Promise<boolean>((r) => (resolve = r));\n\t\t\tthis._firstLoadPendingMessages.add({\n\t\t\t\tmessage,\n\t\t\t\ttransfer,\n\t\t\t\tresolve: resolve!,\n\t\t\t});\n\t\t\treturn p;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfocus(): void {\n\t\tthis._webview.value?.focus();\n\t}\n\treload(): void {\n\t\tthis._webview.value?.reload();\n\t}\n\tselectAll(): void {\n\t\tthis._webview.value?.selectAll();\n\t}\n\tcopy(): void {\n\t\tthis._webview.value?.copy();\n\t}\n\tpaste(): void {\n\t\tthis._webview.value?.paste();\n\t}\n\tcut(): void {\n\t\tthis._webview.value?.cut();\n\t}\n\tundo(): void {\n\t\tthis._webview.value?.undo();\n\t}\n\tredo(): void {\n\t\tthis._webview.value?.redo();\n\t}\n\n\tshowFind(animated = true) {\n\t\tif (this._webview.value) {\n\t\t\tthis._webview.value.showFind(animated);\n\t\t\tthis._findWidgetVisible?.set(true);\n\t\t}\n\t}\n\n\thideFind(animated = true) {\n\t\tthis._findWidgetVisible?.reset();\n\t\tthis._webview.value?.hideFind(animated);\n\t}\n\n\trunFindAction(previous: boolean): void {\n\t\tthis._webview.value?.runFindAction(previous);\n\t}\n\n\tprivate _withWebview(f: (webview: IWebview) => void): void {\n\t\tif (this._webview.value) {\n\t\t\tf(this._webview.value);\n\t\t}\n\t}\n\n\twindowDidDragStart() {\n\t\tthis._webview.value?.windowDidDragStart();\n\t}\n\n\twindowDidDragEnd() {\n\t\tthis._webview.value?.windowDidDragEnd();\n\t}\n\n\tsetContextKeyService(contextKeyService: IContextKeyService) {\n\t\tthis._webview.value?.setContextKeyService(contextKeyService);\n\t}\n}\n\nfunction computeClippingRect(frameRect: DOMRectReadOnly, clipper: HTMLElement) {\n\tconst rootRect = clipper.getBoundingClientRect();\n\n\tconst top = Math.max(rootRect.top - frameRect.top, 0);\n\tconst right = Math.max(\n\t\tframeRect.width - (frameRect.right - rootRect.right),\n\t\t0,\n\t);\n\tconst bottom = Math.max(\n\t\tframeRect.height - (frameRect.bottom - rootRect.bottom),\n\t\t0,\n\t);\n\tconst left = Math.max(rootRect.left - frameRect.left, 0);\n\n\treturn { top, right, bottom, left };\n}\n"],
  "mappings": "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",
  "names": []
}
