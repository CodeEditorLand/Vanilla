import*as t from"../../../../../vs/base/browser/dom.js";import"../../../../../vs/base/common/lifecycle.js";import{parseLinkedText as v}from"../../../../../vs/base/common/linkedText.js";import{Schemas as m}from"../../../../../vs/base/common/network.js";import s from"../../../../../vs/base/common/severity.js";import{URI as h}from"../../../../../vs/base/common/uri.js";import*as p from"../../../../../vs/nls.js";import"../../../../../vs/platform/commands/common/commands.js";import"../../../../../vs/platform/instantiation/common/instantiation.js";import"../../../../../vs/platform/notification/common/notification.js";import{Link as x}from"../../../../../vs/platform/opener/browser/link.js";import"../../../../../vs/platform/opener/common/opener.js";import{SeverityIcon as T}from"../../../../../vs/platform/severityIcon/browser/severityIcon.js";import{TextSearchCompleteMessageType as k}from"../../../../../vs/workbench/services/search/common/searchExtTypes.js";const A=(e,c,a,d,l,f,u)=>{const r=t.$("div.providerMessage"),S=v(e.text);t.append(r,t.$("."+T.className(e.type===k.Information?s.Info:s.Warning).split(" ").join(".")));for(const n of S.nodes)if(typeof n=="string")t.append(r,document.createTextNode(n));else{const I=c.createInstance(x,r,n,{opener:async i=>{if(!e.trusted)return;const o=h.parse(i,!0);o.scheme===m.command&&e.trusted?(await l.executeCommand(o.path))?.triggerSearch&&u():o.scheme===m.https?d.open(o):o.scheme===m.command&&!e.trusted?a.error(p.localize("unable to open trust","Unable to open command link from untrusted source: {0}",i)):a.error(p.localize("unable to open","Unable to open unknown link: {0}",i))}});f.add(I)}return r};export{A as renderSearchMessage};
