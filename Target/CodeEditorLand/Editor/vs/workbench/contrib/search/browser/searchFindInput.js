import"../../../../base/browser/ui/contextview/contextview.js";import"../../../../base/browser/ui/findinput/findInput.js";import"../../../../base/browser/ui/findinput/findInputToggles.js";import{getDefaultHoverDelegate as u}from"../../../../base/browser/ui/hover/hoverDelegateFactory.js";import{Toggle as c}from"../../../../base/browser/ui/toggle/toggle.js";import{Codicon as g}from"../../../../base/common/codicons.js";import{Emitter as f}from"../../../../base/common/event.js";import*as o from"../../../../nls.js";import"../../../../platform/contextkey/common/contextkey.js";import"../../../../platform/contextview/browser/contextView.js";import{ContextScopedFindInput as b}from"../../../../platform/history/browser/contextScopedHistoryWidget.js";import"../../../../platform/instantiation/common/instantiation.js";import"../../notebook/browser/contrib/find/findFilters.js";import{NotebookFindInputFilterButton as v}from"../../notebook/browser/contrib/find/notebookFindReplaceWidget.js";const _=o.localize("aiDescription","Use AI");class z extends b{constructor(e,n,t,r,l,d,a,h,p){super(e,n,t,r);this.contextMenuService=l;this.instantiationService=d;this.filters=a;this._findFilter=this._register(new v(a,l,d,t,o.localize("searchFindInputNotebookFilter.label","Notebook Find Filters"))),this._aiButton=this._register(new m({appendTitle:"",isChecked:!1,...t.toggleStyles})),this.setAdditionalToggles([this._aiButton]),this._updatePadding(),this.controls.appendChild(this._findFilter.container),this._findFilter.container.classList.add("monaco-custom-toggle"),this.filterVisible=p,this.sparkleVisible=h,this._register(this._aiButton.onChange(()=>{this.regex&&(this.regex.visible=!this._aiButton.checked),this.wholeWords&&(this.wholeWords.visible=!this._aiButton.checked),this.caseSensitive&&(this.caseSensitive.visible=!this._aiButton.checked),this._aiButton.checked?this._findFilter.visible=!1:this.filterVisible=this.shouldNotebookFilterBeVisible,this._updatePadding()}))}_findFilter;_aiButton;_filterChecked=!1;_onDidChangeAIToggle=this._register(new f);onDidChangeAIToggle=this._onDidChangeAIToggle.event;shouldNotebookFilterBeVisible=!1;_updatePadding(){this.inputBox.paddingRight=(this.caseSensitive?.visible?this.caseSensitive.width():0)+(this.wholeWords?.visible?this.wholeWords.width():0)+(this.regex?.visible?this.regex.width():0)+(this._findFilter.visible?this._findFilter.width():0)+(this._aiButton.visible?this._aiButton.width():0)}set sparkleVisible(e){this._aiButton.visible=e,this._updatePadding()}set filterVisible(e){this.shouldNotebookFilterBeVisible=e,!(this._aiButton.visible&&this._aiButton.checked)&&(this._findFilter.visible=e,this.updateFilterStyles(),this._updatePadding())}setEnabled(e){super.setEnabled(e),e&&(!this._filterChecked||!this._findFilter.visible)?this.regex?.enable():this.regex?.disable()}updateFilterStyles(){this._filterChecked=!this.filters.markupInput||!this.filters.markupPreview||!this.filters.codeInput||!this.filters.codeOutput,this._findFilter.applyStyles(this._filterChecked)}get isAIEnabled(){return this._aiButton.checked}}class m extends c{constructor(i){super({icon:g.sparkle,title:_+i.appendTitle,isChecked:i.isChecked,hoverDelegate:i.hoverDelegate??u("element"),inputActiveOptionBorder:i.inputActiveOptionBorder,inputActiveOptionForeground:i.inputActiveOptionForeground,inputActiveOptionBackground:i.inputActiveOptionBackground})}}export{z as SearchFindInput};
