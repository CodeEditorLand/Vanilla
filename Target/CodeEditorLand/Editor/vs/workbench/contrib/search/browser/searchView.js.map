{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/search/browser/searchView.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../../base/browser/keyboardEvent.js';\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\nimport { MessageType } from '../../../../base/browser/ui/inputbox/inputBox.js';\nimport { IIdentityProvider } from '../../../../base/browser/ui/list/list.js';\nimport { ICompressedTreeElement } from '../../../../base/browser/ui/tree/compressedObjectTreeModel.js';\nimport { ITreeContextMenuEvent, ObjectTreeElementCollapseState } from '../../../../base/browser/ui/tree/tree.js';\nimport { Delayer, RunOnceScheduler } from '../../../../base/common/async.js';\nimport * as errors from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { KeyCode, KeyMod } from '../../../../base/common/keyCodes.js';\nimport { Disposable, DisposableStore, IDisposable } from '../../../../base/common/lifecycle.js';\nimport * as env from '../../../../base/common/platform.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport * as network from '../../../../base/common/network.js';\nimport './media/searchview.css';\nimport { getCodeEditor, isCodeEditor, isDiffEditor } from '../../../../editor/browser/editorBrowser.js';\nimport { ICodeEditorService } from '../../../../editor/browser/services/codeEditorService.js';\nimport { EmbeddedCodeEditorWidget } from '../../../../editor/browser/widget/codeEditor/embeddedCodeEditorWidget.js';\nimport { IEditorOptions } from '../../../../editor/common/config/editorOptions.js';\nimport { Selection } from '../../../../editor/common/core/selection.js';\nimport { IEditor } from '../../../../editor/common/editorCommon.js';\nimport { CommonFindController } from '../../../../editor/contrib/find/browser/findController.js';\nimport { MultiCursorSelectionController } from '../../../../editor/contrib/multicursor/browser/multicursor.js';\nimport * as nls from '../../../../nls.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IConfigurationChangeEvent, IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKey, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IConfirmation, IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { FileChangesEvent, FileChangeType, IFileService } from '../../../../platform/files/common/files.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { getSelectionKeyboardEvent, WorkbenchCompressibleObjectTree } from '../../../../platform/list/browser/listService.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IOpenerService, withSelection } from '../../../../platform/opener/common/opener.js';\nimport { IProgress, IProgressService, IProgressStep } from '../../../../platform/progress/common/progress.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { defaultInputBoxStyles, defaultToggleStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { IFileIconTheme, IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { IWorkspaceContextService, WorkbenchState } from '../../../../platform/workspace/common/workspace.js';\nimport { OpenFileFolderAction, OpenFolderAction } from '../../../browser/actions/workspaceActions.js';\nimport { ResourceListDnDHandler } from '../../../browser/dnd.js';\nimport { ResourceLabels } from '../../../browser/labels.js';\nimport { IViewPaneOptions, ViewPane } from '../../../browser/parts/views/viewPane.js';\nimport { IEditorPane } from '../../../common/editor.js';\nimport { Memento, MementoObject } from '../../../common/memento.js';\nimport { IViewDescriptorService } from '../../../common/views.js';\nimport { NotebookEditor } from '../../notebook/browser/notebookEditor.js';\nimport { ExcludePatternInputWidget, IncludePatternInputWidget } from './patternInputWidget.js';\nimport { appendKeyBindingLabel } from './searchActionsBase.js';\nimport { IFindInFilesArgs } from './searchActionsFind.js';\nimport { searchDetailsIcon } from './searchIcons.js';\nimport { renderSearchMessage } from './searchMessage.js';\nimport { FileMatchRenderer, FolderMatchRenderer, MatchRenderer, SearchAccessibilityProvider, SearchDelegate } from './searchResultsView.js';\nimport { SearchWidget } from './searchWidget.js';\nimport * as Constants from '../common/constants.js';\nimport { IReplaceService } from './replace.js';\nimport { getOutOfWorkspaceEditorResources, SearchStateKey, SearchUIState } from '../common/search.js';\nimport { ISearchHistoryService, ISearchHistoryValues, SearchHistoryService } from '../common/searchHistoryService.js';\nimport { FileMatch, FileMatchOrMatch, FolderMatch, FolderMatchWithResource, IChangeEvent, ISearchViewModelWorkbenchService, Match, MatchInNotebook, RenderableMatch, searchMatchComparer, SearchModel, SearchModelLocation, SearchResult } from './searchModel.js';\nimport { createEditorFromSearchResult } from '../../searchEditor/browser/searchEditorActions.js';\nimport { ACTIVE_GROUP, IEditorService, SIDE_GROUP } from '../../../services/editor/common/editorService.js';\nimport { IPreferencesService, ISettingsEditorOptions } from '../../../services/preferences/common/preferences.js';\nimport { ITextQueryBuilderOptions, QueryBuilder } from '../../../services/search/common/queryBuilder.js';\nimport { IPatternInfo, ISearchComplete, ISearchConfiguration, ISearchConfigurationProperties, ITextQuery, QueryType, SearchCompletionExitCode, SearchSortOrder, TextSearchCompleteMessageType, ViewMode } from '../../../services/search/common/search.js';\nimport { TextSearchCompleteMessage } from '../../../services/search/common/searchExtTypes.js';\nimport { ITextFileService } from '../../../services/textfile/common/textfiles.js';\nimport { INotebookService } from '../../notebook/common/notebookService.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { AccessibilitySignal, IAccessibilitySignalService } from '../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { getDefaultHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\n\nconst $ = dom.$;\n\nexport enum SearchViewPosition {\n\tSideBar,\n\tPanel\n}\n\nconst SEARCH_CANCELLED_MESSAGE = nls.localize('searchCanceled', \"Search was canceled before any results could be found - \");\nconst DEBOUNCE_DELAY = 75;\nexport class SearchView extends ViewPane {\n\n\tprivate static readonly ACTIONS_RIGHT_CLASS_NAME = 'actions-right';\n\n\tprivate isDisposed = false;\n\n\tprivate container!: HTMLElement;\n\tprivate queryBuilder: QueryBuilder;\n\tprivate viewModel: SearchModel;\n\tprivate memento: Memento;\n\n\tprivate viewletVisible: IContextKey<boolean>;\n\tprivate inputBoxFocused: IContextKey<boolean>;\n\tprivate inputPatternIncludesFocused: IContextKey<boolean>;\n\tprivate inputPatternExclusionsFocused: IContextKey<boolean>;\n\tprivate firstMatchFocused: IContextKey<boolean>;\n\tprivate fileMatchOrMatchFocused: IContextKey<boolean>;\n\tprivate fileMatchOrFolderMatchFocus: IContextKey<boolean>;\n\tprivate fileMatchOrFolderMatchWithResourceFocus: IContextKey<boolean>;\n\tprivate fileMatchFocused: IContextKey<boolean>;\n\tprivate folderMatchFocused: IContextKey<boolean>;\n\tprivate folderMatchWithResourceFocused: IContextKey<boolean>;\n\tprivate matchFocused: IContextKey<boolean>;\n\tprivate isEditableItem: IContextKey<boolean>;\n\tprivate hasSearchResultsKey: IContextKey<boolean>;\n\tprivate lastFocusState: 'input' | 'tree' = 'input';\n\n\tprivate searchStateKey: IContextKey<SearchUIState>;\n\tprivate hasSearchPatternKey: IContextKey<boolean>;\n\tprivate hasReplacePatternKey: IContextKey<boolean>;\n\tprivate hasFilePatternKey: IContextKey<boolean>;\n\tprivate hasSomeCollapsibleResultKey: IContextKey<boolean>;\n\n\tprivate tree!: WorkbenchCompressibleObjectTree<RenderableMatch>;\n\tprivate treeLabels!: ResourceLabels;\n\tprivate viewletState: MementoObject;\n\tprivate messagesElement!: HTMLElement;\n\tprivate readonly messageDisposables: DisposableStore = new DisposableStore();\n\tprivate searchWidgetsContainerElement!: HTMLElement;\n\tprivate searchWidget!: SearchWidget;\n\tprivate size!: dom.Dimension;\n\tprivate queryDetails!: HTMLElement;\n\tprivate toggleQueryDetailsButton!: HTMLElement;\n\tprivate inputPatternExcludes!: ExcludePatternInputWidget;\n\tprivate inputPatternIncludes!: IncludePatternInputWidget;\n\tprivate resultsElement!: HTMLElement;\n\n\tprivate currentSelectedFileMatch: FileMatch | undefined;\n\n\tprivate delayedRefresh: Delayer<void>;\n\tprivate changedWhileHidden: boolean;\n\n\tprivate searchWithoutFolderMessageElement: HTMLElement | undefined;\n\n\tprivate currentSearchQ = Promise.resolve();\n\tprivate addToSearchHistoryDelayer: Delayer<void>;\n\n\tprivate toggleCollapseStateDelayer: Delayer<void>;\n\n\tprivate triggerQueryDelayer: Delayer<void>;\n\tprivate pauseSearching = false;\n\n\tprivate treeAccessibilityProvider: SearchAccessibilityProvider;\n\n\tprivate treeViewKey: IContextKey<boolean>;\n\tprivate aiResultsVisibleKey: IContextKey<boolean>;\n\n\tprivate _visibleMatches: number = 0;\n\n\tprivate _refreshResultsScheduler: RunOnceScheduler;\n\n\tprivate _onSearchResultChangedDisposable: IDisposable | undefined;\n\n\tprivate _stashedQueryDetailsVisibility: boolean | undefined = undefined;\n\tprivate _stashedReplaceVisibility: boolean | undefined = undefined;\n\n\tconstructor(\n\t\toptions: IViewPaneOptions,\n\t\t@IFileService private readonly fileService: IFileService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t\t@ICodeEditorService private readonly codeEditorService: ICodeEditorService,\n\t\t@IProgressService private readonly progressService: IProgressService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IDialogService private readonly dialogService: IDialogService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IContextViewService private readonly contextViewService: IContextViewService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IViewDescriptorService viewDescriptorService: IViewDescriptorService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService,\n\t\t@ISearchViewModelWorkbenchService private readonly searchViewModelWorkbenchService: ISearchViewModelWorkbenchService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IReplaceService private readonly replaceService: IReplaceService,\n\t\t@ITextFileService private readonly textFileService: ITextFileService,\n\t\t@IPreferencesService private readonly preferencesService: IPreferencesService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@ISearchHistoryService private readonly searchHistoryService: ISearchHistoryService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IAccessibilityService private readonly accessibilityService: IAccessibilityService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IHoverService hoverService: IHoverService,\n\t\t@INotebookService private readonly notebookService: INotebookService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@IAccessibilitySignalService private readonly accessibilitySignalService: IAccessibilitySignalService\n\t) {\n\n\t\tsuper(options, keybindingService, contextMenuService, configurationService, contextKeyService, viewDescriptorService, instantiationService, openerService, themeService, telemetryService, hoverService);\n\n\t\tthis.container = dom.$('.search-view');\n\n\t\t// globals\n\t\tthis.viewletVisible = Constants.SearchContext.SearchViewVisibleKey.bindTo(this.contextKeyService);\n\t\tthis.firstMatchFocused = Constants.SearchContext.FirstMatchFocusKey.bindTo(this.contextKeyService);\n\t\tthis.fileMatchOrMatchFocused = Constants.SearchContext.FileMatchOrMatchFocusKey.bindTo(this.contextKeyService);\n\t\tthis.fileMatchOrFolderMatchFocus = Constants.SearchContext.FileMatchOrFolderMatchFocusKey.bindTo(this.contextKeyService);\n\t\tthis.fileMatchOrFolderMatchWithResourceFocus = Constants.SearchContext.FileMatchOrFolderMatchWithResourceFocusKey.bindTo(this.contextKeyService);\n\t\tthis.fileMatchFocused = Constants.SearchContext.FileFocusKey.bindTo(this.contextKeyService);\n\t\tthis.folderMatchFocused = Constants.SearchContext.FolderFocusKey.bindTo(this.contextKeyService);\n\t\tthis.folderMatchWithResourceFocused = Constants.SearchContext.ResourceFolderFocusKey.bindTo(this.contextKeyService);\n\t\tthis.hasSearchResultsKey = Constants.SearchContext.HasSearchResults.bindTo(this.contextKeyService);\n\t\tthis.matchFocused = Constants.SearchContext.MatchFocusKey.bindTo(this.contextKeyService);\n\t\tthis.searchStateKey = SearchStateKey.bindTo(this.contextKeyService);\n\t\tthis.hasSearchPatternKey = Constants.SearchContext.ViewHasSearchPatternKey.bindTo(this.contextKeyService);\n\t\tthis.hasReplacePatternKey = Constants.SearchContext.ViewHasReplacePatternKey.bindTo(this.contextKeyService);\n\t\tthis.hasFilePatternKey = Constants.SearchContext.ViewHasFilePatternKey.bindTo(this.contextKeyService);\n\t\tthis.hasSomeCollapsibleResultKey = Constants.SearchContext.ViewHasSomeCollapsibleKey.bindTo(this.contextKeyService);\n\t\tthis.treeViewKey = Constants.SearchContext.InTreeViewKey.bindTo(this.contextKeyService);\n\t\tthis.aiResultsVisibleKey = Constants.SearchContext.AIResultsVisibleKey.bindTo(this.contextKeyService);\n\n\t\tthis._register(this.contextKeyService.onDidChangeContext(e => {\n\t\t\tconst keys = Constants.SearchContext.hasAIResultProvider.keys();\n\t\t\tif (e.affectsSome(new Set(keys))) {\n\t\t\t\tthis.refreshHasAISetting();\n\t\t\t}\n\t\t}));\n\n\t\t// scoped\n\t\tthis.contextKeyService = this._register(this.contextKeyService.createScoped(this.container));\n\t\tConstants.SearchContext.SearchViewFocusedKey.bindTo(this.contextKeyService).set(true);\n\t\tthis.inputBoxFocused = Constants.SearchContext.InputBoxFocusedKey.bindTo(this.contextKeyService);\n\t\tthis.inputPatternIncludesFocused = Constants.SearchContext.PatternIncludesFocusedKey.bindTo(this.contextKeyService);\n\t\tthis.inputPatternExclusionsFocused = Constants.SearchContext.PatternExcludesFocusedKey.bindTo(this.contextKeyService);\n\t\tthis.isEditableItem = Constants.SearchContext.IsEditableItemKey.bindTo(this.contextKeyService);\n\n\t\tthis.instantiationService = this._register(this.instantiationService.createChild(\n\t\t\tnew ServiceCollection([IContextKeyService, this.contextKeyService])));\n\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration('search.sortOrder')) {\n\t\t\t\tif (this.searchConfig.sortOrder === SearchSortOrder.Modified) {\n\t\t\t\t\t// If changing away from modified, remove all fileStats\n\t\t\t\t\t// so that updated files are re-retrieved next time.\n\t\t\t\t\tthis.removeFileStats();\n\t\t\t\t}\n\t\t\t\tthis.refreshTree();\n\t\t\t} else if (e.affectsConfiguration('search.aiResults')) {\n\t\t\t\tthis.refreshHasAISetting();\n\t\t\t}\n\t\t}));\n\n\t\tthis.viewModel = this.searchViewModelWorkbenchService.searchModel;\n\t\tthis.queryBuilder = this.instantiationService.createInstance(QueryBuilder);\n\t\tthis.memento = new Memento(this.id, storageService);\n\t\tthis.viewletState = this.memento.getMemento(StorageScope.WORKSPACE, StorageTarget.MACHINE);\n\n\t\tthis._register(this.fileService.onDidFilesChange(e => this.onFilesChanged(e)));\n\t\tthis._register(this.textFileService.untitled.onWillDispose(model => this.onUntitledDidDispose(model.resource)));\n\t\tthis._register(this.contextService.onDidChangeWorkbenchState(() => this.onDidChangeWorkbenchState()));\n\t\tthis._register(this.searchHistoryService.onDidClearHistory(() => this.clearHistory()));\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => this.onConfigurationUpdated(e)));\n\n\t\tthis.delayedRefresh = this._register(new Delayer<void>(250));\n\n\t\tthis.addToSearchHistoryDelayer = this._register(new Delayer<void>(2000));\n\t\tthis.toggleCollapseStateDelayer = this._register(new Delayer<void>(100));\n\t\tthis.triggerQueryDelayer = this._register(new Delayer<void>(0));\n\n\t\tthis.treeAccessibilityProvider = this.instantiationService.createInstance(SearchAccessibilityProvider, this);\n\t\tthis.isTreeLayoutViewVisible = this.viewletState['view.treeLayout'] ?? (this.searchConfig.defaultViewMode === ViewMode.Tree);\n\n\t\tthis._refreshResultsScheduler = this._register(new RunOnceScheduler(this._updateResults.bind(this), 80));\n\n\t\t// storage service listener for for roaming changes\n\t\tthis._register(this.storageService.onWillSaveState(() => {\n\t\t\tthis._saveSearchHistoryService();\n\t\t}));\n\n\t\tthis._register(this.storageService.onDidChangeValue(StorageScope.WORKSPACE, SearchHistoryService.SEARCH_HISTORY_KEY, this._register(new DisposableStore()))(() => {\n\t\t\tconst restoredHistory = this.searchHistoryService.load();\n\n\t\t\tif (restoredHistory.include) {\n\t\t\t\tthis.inputPatternIncludes.prependHistory(restoredHistory.include);\n\t\t\t}\n\t\t\tif (restoredHistory.exclude) {\n\t\t\t\tthis.inputPatternExcludes.prependHistory(restoredHistory.exclude);\n\t\t\t}\n\t\t\tif (restoredHistory.search) {\n\t\t\t\tthis.searchWidget.prependSearchHistory(restoredHistory.search);\n\t\t\t}\n\t\t\tif (restoredHistory.replace) {\n\t\t\t\tthis.searchWidget.prependReplaceHistory(restoredHistory.replace);\n\t\t\t}\n\t\t}));\n\n\t\tthis.changedWhileHidden = this.hasSearchResults();\n\t}\n\n\tget isTreeLayoutViewVisible(): boolean {\n\t\treturn this.treeViewKey.get() ?? false;\n\t}\n\n\tprivate set isTreeLayoutViewVisible(visible: boolean) {\n\t\tthis.treeViewKey.set(visible);\n\t}\n\n\tget aiResultsVisible(): boolean {\n\t\treturn this.aiResultsVisibleKey.get() ?? false;\n\t}\n\n\tprivate set aiResultsVisible(visible: boolean) {\n\t\tthis.aiResultsVisibleKey.set(visible);\n\t}\n\n\tsetTreeView(visible: boolean): void {\n\t\tif (visible === this.isTreeLayoutViewVisible) {\n\t\t\treturn;\n\t\t}\n\t\tthis.isTreeLayoutViewVisible = visible;\n\t\tthis.updateIndentStyles(this.themeService.getFileIconTheme());\n\t\tthis.refreshTree();\n\t}\n\n\tasync setAIResultsVisible(visible: boolean): Promise<void> {\n\t\tif (visible === this.aiResultsVisible) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (visible) {\n\t\t\tthis._stashedQueryDetailsVisibility = this._queryDetailsHidden();\n\t\t\tthis._stashedReplaceVisibility = this.searchWidget.isReplaceShown();\n\n\t\t\tthis.searchWidget.toggleReplace(false);\n\t\t\tthis.toggleQueryDetailsButton.style.display = 'none';\n\n\t\t\tthis.searchWidget.replaceButtonVisibility = false;\n\t\t\tthis.toggleQueryDetails(undefined, false);\n\t\t} else {\n\t\t\tthis.toggleQueryDetailsButton.style.display = '';\n\t\t\tthis.searchWidget.replaceButtonVisibility = true;\n\n\t\t\tif (this._stashedReplaceVisibility) {\n\t\t\t\tthis.searchWidget.toggleReplace(this._stashedReplaceVisibility);\n\t\t\t}\n\n\t\t\tif (this._stashedQueryDetailsVisibility) {\n\t\t\t\tthis.toggleQueryDetails(undefined, this._stashedQueryDetailsVisibility);\n\t\t\t}\n\t\t}\n\n\t\tthis.aiResultsVisible = visible;\n\n\n\t\tif (this.viewModel.searchResult.isEmpty()) {\n\t\t\treturn;\n\t\t}\n\n\t\t// in each case, we want to cancel our current AI search because it is no longer valid\n\t\tthis.model.cancelAISearch();\n\t\tif (visible) {\n\t\t\tawait this.model.addAIResults();\n\t\t}\n\n\t\tthis.onSearchResultsChanged();\n\t\tthis.onSearchComplete(() => { }, undefined, undefined, this.viewModel.searchResult.getCachedSearchComplete(visible));\n\t}\n\n\tprivate get state(): SearchUIState {\n\t\treturn this.searchStateKey.get() ?? SearchUIState.Idle;\n\t}\n\n\tprivate set state(v: SearchUIState) {\n\t\tthis.searchStateKey.set(v);\n\t}\n\n\tgetContainer(): HTMLElement {\n\t\treturn this.container;\n\t}\n\n\tget searchResult(): SearchResult {\n\t\treturn this.viewModel && this.viewModel.searchResult;\n\t}\n\n\tget model(): SearchModel {\n\t\treturn this.viewModel;\n\t}\n\n\tprivate refreshHasAISetting() {\n\t\tconst val = this.shouldShowAIButton();\n\t\tif (val && this.searchWidget.searchInput) {\n\t\t\tthis.searchWidget.searchInput.sparkleVisible = val;\n\t\t}\n\t}\n\tprivate onDidChangeWorkbenchState(): void {\n\t\tif (this.contextService.getWorkbenchState() !== WorkbenchState.EMPTY && this.searchWithoutFolderMessageElement) {\n\t\t\tdom.hide(this.searchWithoutFolderMessageElement);\n\t\t}\n\t}\n\n\tprivate refreshInputs() {\n\t\tthis.pauseSearching = true;\n\t\tthis.searchWidget.setValue(this.viewModel.searchResult.query?.contentPattern.pattern ?? '');\n\t\tthis.searchWidget.setReplaceAllActionState(false);\n\t\tthis.searchWidget.toggleReplace(true);\n\t\tthis.inputPatternIncludes.setOnlySearchInOpenEditors(this.viewModel.searchResult.query?.onlyOpenEditors || false);\n\t\tthis.inputPatternExcludes.setUseExcludesAndIgnoreFiles(!this.viewModel.searchResult.query?.userDisabledExcludesAndIgnoreFiles || true);\n\t\tthis.searchIncludePattern.setValue('');\n\t\tthis.searchExcludePattern.setValue('');\n\t\tthis.pauseSearching = false;\n\t}\n\n\tpublic async replaceSearchModel(searchModel: SearchModel, asyncResults: Promise<ISearchComplete>): Promise<void> {\n\t\tlet progressComplete: () => void;\n\t\tthis.progressService.withProgress({ location: this.getProgressLocation(), delay: 0 }, _progress => {\n\t\t\treturn new Promise<void>(resolve => progressComplete = resolve);\n\t\t});\n\n\t\tconst slowTimer = setTimeout(() => {\n\t\t\tthis.state = SearchUIState.SlowSearch;\n\t\t}, 2000);\n\n\t\tthis._refreshResultsScheduler.schedule();\n\n\t\t// remove old model and use the new searchModel\n\t\tsearchModel.location = SearchModelLocation.PANEL;\n\t\tsearchModel.replaceActive = this.viewModel.isReplaceActive();\n\t\tsearchModel.replaceString = this.searchWidget.getReplaceValue();\n\t\tthis._onSearchResultChangedDisposable?.dispose();\n\t\tthis._onSearchResultChangedDisposable = this._register(searchModel.onSearchResultChanged((event) => this.onSearchResultsChanged(event)));\n\n\t\t// this call will also dispose of the old model\n\t\tthis.searchViewModelWorkbenchService.searchModel = searchModel;\n\t\tthis.viewModel = searchModel;\n\n\t\tthis.onSearchResultsChanged();\n\t\tthis.refreshInputs();\n\n\t\tasyncResults.then((complete) => {\n\t\t\tclearTimeout(slowTimer);\n\t\t\tthis.onSearchComplete(progressComplete, undefined, undefined, complete);\n\t\t}, (e) => {\n\t\t\tclearTimeout(slowTimer);\n\t\t\tthis.onSearchError(e, progressComplete, undefined, undefined);\n\t\t});\n\n\t\tconst collapseResults = this.searchConfig.collapseResults;\n\t\tif (collapseResults !== 'alwaysCollapse' && this.viewModel.searchResult.matches(this.aiResultsVisible).length === 1) {\n\t\t\tconst onlyMatch = this.viewModel.searchResult.matches(this.aiResultsVisible)[0];\n\t\t\tif (onlyMatch.count() < 50) {\n\t\t\t\tthis.tree.expand(onlyMatch);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected override renderBody(parent: HTMLElement): void {\n\t\tsuper.renderBody(parent);\n\t\tthis.container = dom.append(parent, dom.$('.search-view'));\n\n\t\tthis.searchWidgetsContainerElement = dom.append(this.container, $('.search-widgets-container'));\n\t\tthis.createSearchWidget(this.searchWidgetsContainerElement);\n\t\tthis.refreshHasAISetting();\n\n\t\tconst history = this.searchHistoryService.load();\n\t\tconst filePatterns = this.viewletState['query.filePatterns'] || '';\n\t\tconst patternExclusions = this.viewletState['query.folderExclusions'] || '';\n\t\tconst patternExclusionsHistory: string[] = history.exclude || [];\n\t\tconst patternIncludes = this.viewletState['query.folderIncludes'] || '';\n\t\tconst patternIncludesHistory: string[] = history.include || [];\n\t\tconst onlyOpenEditors = this.viewletState['query.onlyOpenEditors'] || false;\n\n\t\tconst queryDetailsExpanded = this.viewletState['query.queryDetailsExpanded'] || '';\n\t\tconst useExcludesAndIgnoreFiles = typeof this.viewletState['query.useExcludesAndIgnoreFiles'] === 'boolean' ?\n\t\t\tthis.viewletState['query.useExcludesAndIgnoreFiles'] : true;\n\n\t\tthis.queryDetails = dom.append(this.searchWidgetsContainerElement, $('.query-details'));\n\n\t\t// Toggle query details button\n\t\tconst toggleQueryDetailsLabel = nls.localize('moreSearch', \"Toggle Search Details\");\n\t\tthis.toggleQueryDetailsButton = dom.append(this.queryDetails,\n\t\t\t$('.more' + ThemeIcon.asCSSSelector(searchDetailsIcon), { tabindex: 0, role: 'button', 'aria-label': toggleQueryDetailsLabel }));\n\t\tthis._register(this.hoverService.setupManagedHover(getDefaultHoverDelegate('element'), this.toggleQueryDetailsButton, toggleQueryDetailsLabel));\n\n\t\tthis._register(dom.addDisposableListener(this.toggleQueryDetailsButton, dom.EventType.CLICK, e => {\n\t\t\tdom.EventHelper.stop(e);\n\t\t\tthis.toggleQueryDetails(!this.accessibilityService.isScreenReaderOptimized());\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(this.toggleQueryDetailsButton, dom.EventType.KEY_UP, (e: KeyboardEvent) => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\n\t\t\tif (event.equals(KeyCode.Enter) || event.equals(KeyCode.Space)) {\n\t\t\t\tdom.EventHelper.stop(e);\n\t\t\t\tthis.toggleQueryDetails(false);\n\t\t\t}\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(this.toggleQueryDetailsButton, dom.EventType.KEY_DOWN, (e: KeyboardEvent) => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\n\t\t\tif (event.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\t\tif (this.searchWidget.isReplaceActive()) {\n\t\t\t\t\tthis.searchWidget.focusReplaceAllAction();\n\t\t\t\t} else {\n\t\t\t\t\tthis.searchWidget.isReplaceShown() ? this.searchWidget.replaceInput?.focusOnPreserve() : this.searchWidget.focusRegexAction();\n\t\t\t\t}\n\t\t\t\tdom.EventHelper.stop(e);\n\t\t\t}\n\t\t}));\n\n\t\t// folder includes list\n\t\tconst folderIncludesList = dom.append(this.queryDetails, $('.file-types.includes'));\n\t\tconst filesToIncludeTitle = nls.localize('searchScope.includes', \"files to include\");\n\t\tdom.append(folderIncludesList, $('h4', undefined, filesToIncludeTitle));\n\n\t\tthis.inputPatternIncludes = this._register(this.instantiationService.createInstance(IncludePatternInputWidget, folderIncludesList, this.contextViewService, {\n\t\t\tariaLabel: filesToIncludeTitle,\n\t\t\tplaceholder: nls.localize('placeholder.includes', \"e.g. *.ts, src/**/include\"),\n\t\t\tshowPlaceholderOnFocus: true,\n\t\t\thistory: patternIncludesHistory,\n\t\t\tinputBoxStyles: defaultInputBoxStyles\n\t\t}));\n\n\t\tthis.inputPatternIncludes.setValue(patternIncludes);\n\t\tthis.inputPatternIncludes.setOnlySearchInOpenEditors(onlyOpenEditors);\n\n\t\tthis._register(this.inputPatternIncludes.onCancel(() => this.cancelSearch(false)));\n\t\tthis._register(this.inputPatternIncludes.onChangeSearchInEditorsBox(() => this.triggerQueryChange()));\n\n\t\tthis.trackInputBox(this.inputPatternIncludes.inputFocusTracker, this.inputPatternIncludesFocused);\n\n\t\t// excludes list\n\t\tconst excludesList = dom.append(this.queryDetails, $('.file-types.excludes'));\n\t\tconst excludesTitle = nls.localize('searchScope.excludes', \"files to exclude\");\n\t\tdom.append(excludesList, $('h4', undefined, excludesTitle));\n\t\tthis.inputPatternExcludes = this._register(this.instantiationService.createInstance(ExcludePatternInputWidget, excludesList, this.contextViewService, {\n\t\t\tariaLabel: excludesTitle,\n\t\t\tplaceholder: nls.localize('placeholder.excludes', \"e.g. *.ts, src/**/exclude\"),\n\t\t\tshowPlaceholderOnFocus: true,\n\t\t\thistory: patternExclusionsHistory,\n\t\t\tinputBoxStyles: defaultInputBoxStyles\n\t\t}));\n\n\t\tthis.inputPatternExcludes.setValue(patternExclusions);\n\t\tthis.inputPatternExcludes.setUseExcludesAndIgnoreFiles(useExcludesAndIgnoreFiles);\n\n\t\tthis._register(this.inputPatternExcludes.onCancel(() => this.cancelSearch(false)));\n\t\tthis._register(this.inputPatternExcludes.onChangeIgnoreBox(() => this.triggerQueryChange()));\n\t\tthis.trackInputBox(this.inputPatternExcludes.inputFocusTracker, this.inputPatternExclusionsFocused);\n\n\t\tconst updateHasFilePatternKey = () => this.hasFilePatternKey.set(this.inputPatternIncludes.getValue().length > 0 || this.inputPatternExcludes.getValue().length > 0);\n\t\tupdateHasFilePatternKey();\n\t\tconst onFilePatternSubmit = (triggeredOnType: boolean) => {\n\t\t\tthis.triggerQueryChange({ triggeredOnType, delay: this.searchConfig.searchOnTypeDebouncePeriod });\n\t\t\tif (triggeredOnType) {\n\t\t\t\tupdateHasFilePatternKey();\n\t\t\t}\n\t\t};\n\t\tthis._register(this.inputPatternIncludes.onSubmit(onFilePatternSubmit));\n\t\tthis._register(this.inputPatternExcludes.onSubmit(onFilePatternSubmit));\n\n\t\tthis.messagesElement = dom.append(this.container, $('.messages.text-search-provider-messages'));\n\t\tif (this.contextService.getWorkbenchState() === WorkbenchState.EMPTY) {\n\t\t\tthis.showSearchWithoutFolderMessage();\n\t\t}\n\n\t\tthis.createSearchResultsView(this.container);\n\n\t\tif (filePatterns !== '' || patternExclusions !== '' || patternIncludes !== '' || queryDetailsExpanded !== '' || !useExcludesAndIgnoreFiles) {\n\t\t\tthis.toggleQueryDetails(true, true, true);\n\t\t}\n\n\t\tthis._onSearchResultChangedDisposable = this._register(this.viewModel.onSearchResultChanged((event) => this.onSearchResultsChanged(event)));\n\n\t\tthis._register(this.onDidChangeBodyVisibility(visible => this.onVisibilityChanged(visible)));\n\n\t\tthis.updateIndentStyles(this.themeService.getFileIconTheme());\n\t\tthis._register(this.themeService.onDidFileIconThemeChange(this.updateIndentStyles, this));\n\t}\n\n\tprivate updateIndentStyles(theme: IFileIconTheme): void {\n\t\tthis.resultsElement.classList.toggle('hide-arrows', this.isTreeLayoutViewVisible && theme.hidesExplorerArrows);\n\t}\n\n\tprivate onVisibilityChanged(visible: boolean): void {\n\t\tthis.viewletVisible.set(visible);\n\t\tif (visible) {\n\t\t\tif (this.changedWhileHidden) {\n\t\t\t\t// Render if results changed while viewlet was hidden - #37818\n\t\t\t\tthis.refreshAndUpdateCount();\n\t\t\t\tthis.changedWhileHidden = false;\n\t\t\t}\n\t\t} else {\n\t\t\t// Reset last focus to input to preserve opening the viewlet always focusing the query editor.\n\t\t\tthis.lastFocusState = 'input';\n\t\t}\n\n\t\t// Enable highlights if there are searchresults\n\t\tthis.viewModel?.searchResult.toggleHighlights(visible);\n\t}\n\n\tget searchAndReplaceWidget(): SearchWidget {\n\t\treturn this.searchWidget;\n\t}\n\n\tget searchIncludePattern(): IncludePatternInputWidget {\n\t\treturn this.inputPatternIncludes;\n\t}\n\n\tget searchExcludePattern(): ExcludePatternInputWidget {\n\t\treturn this.inputPatternExcludes;\n\t}\n\n\tprivate createSearchWidget(container: HTMLElement): void {\n\t\tconst contentPattern = this.viewletState['query.contentPattern'] || '';\n\t\tconst replaceText = this.viewletState['query.replaceText'] || '';\n\t\tconst isRegex = this.viewletState['query.regex'] === true;\n\t\tconst isWholeWords = this.viewletState['query.wholeWords'] === true;\n\t\tconst isCaseSensitive = this.viewletState['query.caseSensitive'] === true;\n\t\tconst history = this.searchHistoryService.load();\n\t\tconst searchHistory = history.search || this.viewletState['query.searchHistory'] || [];\n\t\tconst replaceHistory = history.replace || this.viewletState['query.replaceHistory'] || [];\n\t\tconst showReplace = typeof this.viewletState['view.showReplace'] === 'boolean' ? this.viewletState['view.showReplace'] : true;\n\t\tconst preserveCase = this.viewletState['query.preserveCase'] === true;\n\n\t\tconst isInNotebookMarkdownInput = this.viewletState['query.isInNotebookMarkdownInput'] ?? true;\n\t\tconst isInNotebookMarkdownPreview = this.viewletState['query.isInNotebookMarkdownPreview'] ?? true;\n\t\tconst isInNotebookCellInput = this.viewletState['query.isInNotebookCellInput'] ?? true;\n\t\tconst isInNotebookCellOutput = this.viewletState['query.isInNotebookCellOutput'] ?? true;\n\n\n\t\tthis.searchWidget = this._register(this.instantiationService.createInstance(SearchWidget, container, {\n\t\t\tvalue: contentPattern,\n\t\t\treplaceValue: replaceText,\n\t\t\tisRegex: isRegex,\n\t\t\tisCaseSensitive: isCaseSensitive,\n\t\t\tisWholeWords: isWholeWords,\n\t\t\tsearchHistory: searchHistory,\n\t\t\treplaceHistory: replaceHistory,\n\t\t\tpreserveCase: preserveCase,\n\t\t\tinputBoxStyles: defaultInputBoxStyles,\n\t\t\ttoggleStyles: defaultToggleStyles,\n\t\t\tnotebookOptions: {\n\t\t\t\tisInNotebookMarkdownInput,\n\t\t\t\tisInNotebookMarkdownPreview,\n\t\t\t\tisInNotebookCellInput,\n\t\t\t\tisInNotebookCellOutput,\n\t\t\t},\n\t\t\tinitialAIButtonVisibility: this.shouldShowAIButton()\n\t\t}));\n\n\t\tif (!this.searchWidget.searchInput || !this.searchWidget.replaceInput) {\n\t\t\tthis.logService.warn(`Cannot fully create search widget. Search or replace input undefined. SearchInput: ${this.searchWidget.searchInput}, ReplaceInput: ${this.searchWidget.replaceInput}`);\n\t\t\treturn;\n\t\t}\n\n\t\tif (showReplace) {\n\t\t\tthis.searchWidget.toggleReplace(true);\n\t\t}\n\n\t\tthis._register(this.searchWidget.onSearchSubmit(options => this.triggerQueryChange(options)));\n\t\tthis._register(this.searchWidget.onSearchCancel(({ focus }) => this.cancelSearch(focus)));\n\t\tthis._register(this.searchWidget.searchInput.onDidOptionChange(() => {\n\t\t\tif (this.searchWidget.searchInput && this.searchWidget.searchInput.isAIEnabled !== this.aiResultsVisible) {\n\t\t\t\tthis.setAIResultsVisible(this.searchWidget.searchInput.isAIEnabled);\n\t\t\t} else {\n\t\t\t\tthis.triggerQueryChange();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.searchWidget.getNotebookFilters().onDidChange(() => this.triggerQueryChange()));\n\n\t\tconst updateHasPatternKey = () => this.hasSearchPatternKey.set(this.searchWidget.searchInput ? (this.searchWidget.searchInput.getValue().length > 0) : false);\n\t\tupdateHasPatternKey();\n\t\tthis._register(this.searchWidget.searchInput.onDidChange(() => updateHasPatternKey()));\n\n\t\tconst updateHasReplacePatternKey = () => this.hasReplacePatternKey.set(this.searchWidget.getReplaceValue().length > 0);\n\t\tupdateHasReplacePatternKey();\n\t\tthis._register(this.searchWidget.replaceInput.inputBox.onDidChange(() => updateHasReplacePatternKey()));\n\n\t\tthis._register(this.searchWidget.onDidHeightChange(() => this.reLayout()));\n\n\t\tthis._register(this.searchWidget.onReplaceToggled(() => this.reLayout()));\n\t\tthis._register(this.searchWidget.onReplaceStateChange((state) => {\n\t\t\tthis.viewModel.replaceActive = state;\n\t\t\tthis.refreshTree();\n\t\t}));\n\n\t\tthis._register(this.searchWidget.onPreserveCaseChange((state) => {\n\t\t\tthis.viewModel.preserveCase = state;\n\t\t\tthis.refreshTree();\n\t\t}));\n\n\t\tthis._register(this.searchWidget.onReplaceValueChanged(() => {\n\t\t\tthis.viewModel.replaceString = this.searchWidget.getReplaceValue();\n\t\t\tthis.delayedRefresh.trigger(() => this.refreshTree());\n\t\t}));\n\n\t\tthis._register(this.searchWidget.onBlur(() => {\n\t\t\tthis.toggleQueryDetailsButton.focus();\n\t\t}));\n\n\t\tthis._register(this.searchWidget.onReplaceAll(() => this.replaceAll()));\n\n\t\tthis.trackInputBox(this.searchWidget.searchInputFocusTracker);\n\t\tthis.trackInputBox(this.searchWidget.replaceInputFocusTracker);\n\t}\n\n\tprivate shouldShowAIButton(): boolean {\n\t\tconst hasProvider = Constants.SearchContext.hasAIResultProvider.getValue(this.contextKeyService);\n\t\treturn !!(this.configurationService.getValue<boolean>('search.aiResults') && hasProvider);\n\t}\n\tprivate onConfigurationUpdated(event?: IConfigurationChangeEvent): void {\n\t\tif (event && (event.affectsConfiguration('search.decorations.colors') || event.affectsConfiguration('search.decorations.badges'))) {\n\t\t\tthis.refreshTree();\n\t\t}\n\t}\n\n\tprivate trackInputBox(inputFocusTracker: dom.IFocusTracker | undefined, contextKey?: IContextKey<boolean>): void {\n\t\tif (!inputFocusTracker) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._register(inputFocusTracker.onDidFocus(() => {\n\t\t\tthis.lastFocusState = 'input';\n\t\t\tthis.inputBoxFocused.set(true);\n\t\t\tcontextKey?.set(true);\n\t\t}));\n\t\tthis._register(inputFocusTracker.onDidBlur(() => {\n\t\t\tthis.inputBoxFocused.set(this.searchWidget.searchInputHasFocus()\n\t\t\t\t|| this.searchWidget.replaceInputHasFocus()\n\t\t\t\t|| this.inputPatternIncludes.inputHasFocus()\n\t\t\t\t|| this.inputPatternExcludes.inputHasFocus());\n\t\t\tcontextKey?.set(false);\n\t\t}));\n\t}\n\n\tprivate onSearchResultsChanged(event?: IChangeEvent): void {\n\t\tif (this.isVisible()) {\n\t\t\treturn this.refreshAndUpdateCount(event);\n\t\t} else {\n\t\t\tthis.changedWhileHidden = true;\n\t\t}\n\t}\n\n\tprivate refreshAndUpdateCount(event?: IChangeEvent): void {\n\t\tthis.searchWidget.setReplaceAllActionState(!this.viewModel.searchResult.isEmpty(this.aiResultsVisible));\n\t\tthis.updateSearchResultCount(this.viewModel.searchResult.query!.userDisabledExcludesAndIgnoreFiles, this.viewModel.searchResult.query?.onlyOpenEditors, event?.clearingAll);\n\t\treturn this.refreshTree(event);\n\t}\n\n\trefreshTree(event?: IChangeEvent): void {\n\t\tconst collapseResults = this.searchConfig.collapseResults;\n\t\tif (!event || event.added || event.removed) {\n\t\t\t// Refresh whole tree\n\t\t\tif (this.searchConfig.sortOrder === SearchSortOrder.Modified) {\n\t\t\t\t// Ensure all matches have retrieved their file stat\n\t\t\t\tthis.retrieveFileStats()\n\t\t\t\t\t.then(() => this.tree.setChildren(null, this.createResultIterator(collapseResults)));\n\t\t\t} else {\n\t\t\t\tthis.tree.setChildren(null, this.createResultIterator(collapseResults));\n\t\t\t}\n\t\t} else {\n\t\t\t// If updated counts affect our search order, re-sort the view.\n\t\t\tif (this.searchConfig.sortOrder === SearchSortOrder.CountAscending ||\n\t\t\t\tthis.searchConfig.sortOrder === SearchSortOrder.CountDescending) {\n\t\t\t\tthis.tree.setChildren(null, this.createResultIterator(collapseResults));\n\t\t\t} else {\n\t\t\t\t// FileMatch modified, refresh those elements\n\t\t\t\tevent.elements.forEach(element => {\n\t\t\t\t\tthis.tree.setChildren(element, this.createIterator(element, collapseResults));\n\t\t\t\t\tthis.tree.rerender(element);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate createResultIterator(collapseResults: ISearchConfigurationProperties['collapseResults']): Iterable<ICompressedTreeElement<RenderableMatch>> {\n\t\tconst folderMatches = this.searchResult.folderMatches(this.aiResultsVisible)\n\t\t\t.filter(fm => !fm.isEmpty())\n\t\t\t.sort(searchMatchComparer);\n\n\t\tif (folderMatches.length === 1) {\n\t\t\treturn this.createFolderIterator(folderMatches[0], collapseResults, true);\n\t\t}\n\n\t\treturn Iterable.map(folderMatches, (folderMatch): ICompressedTreeElement<RenderableMatch> => {\n\t\t\tconst children = this.createFolderIterator(folderMatch, collapseResults, true);\n\t\t\treturn { element: folderMatch, children, incompressible: true }; // roots should always be incompressible\n\t\t});\n\t}\n\n\tprivate createFolderIterator(folderMatch: FolderMatch, collapseResults: ISearchConfigurationProperties['collapseResults'], childFolderIncompressible: boolean): Iterable<ICompressedTreeElement<RenderableMatch>> {\n\t\tconst sortOrder = this.searchConfig.sortOrder;\n\n\t\tconst matchArray = this.isTreeLayoutViewVisible ? folderMatch.matches() : folderMatch.allDownstreamFileMatches();\n\t\tconst matches = matchArray.sort((a, b) => searchMatchComparer(a, b, sortOrder));\n\n\t\treturn Iterable.map(matches, (match): ICompressedTreeElement<RenderableMatch> => {\n\t\t\tlet children;\n\t\t\tif (match instanceof FileMatch) {\n\t\t\t\tchildren = this.createFileIterator(match);\n\t\t\t} else {\n\t\t\t\tchildren = this.createFolderIterator(match, collapseResults, false);\n\t\t\t}\n\n\t\t\tconst collapsed = (collapseResults === 'alwaysCollapse' || (match.count() > 10 && collapseResults !== 'alwaysExpand')) ? ObjectTreeElementCollapseState.PreserveOrCollapsed : ObjectTreeElementCollapseState.PreserveOrExpanded;\n\n\t\t\treturn { element: match, children, collapsed, incompressible: (match instanceof FileMatch) ? true : childFolderIncompressible };\n\t\t});\n\t}\n\n\tprivate createFileIterator(fileMatch: FileMatch): Iterable<ICompressedTreeElement<RenderableMatch>> {\n\t\tlet matches = fileMatch.matches().sort(searchMatchComparer);\n\n\t\tif (!this.aiResultsVisible) {\n\t\t\tmatches = matches.filter(e => !e.aiContributed);\n\t\t}\n\t\treturn Iterable.map(matches, (r): ICompressedTreeElement<RenderableMatch> => ({ element: r, incompressible: true }));\n\t}\n\n\tprivate createIterator(match: FolderMatch | FileMatch | SearchResult, collapseResults: ISearchConfigurationProperties['collapseResults']): Iterable<ICompressedTreeElement<RenderableMatch>> {\n\t\treturn match instanceof SearchResult ? this.createResultIterator(collapseResults) :\n\t\t\tmatch instanceof FolderMatch ? this.createFolderIterator(match, collapseResults, false) :\n\t\t\t\tthis.createFileIterator(match);\n\t}\n\n\tprivate replaceAll(): void {\n\t\tif (this.viewModel.searchResult.count() === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst occurrences = this.viewModel.searchResult.count();\n\t\tconst fileCount = this.viewModel.searchResult.fileCount();\n\t\tconst replaceValue = this.searchWidget.getReplaceValue() || '';\n\t\tconst afterReplaceAllMessage = this.buildAfterReplaceAllMessage(occurrences, fileCount, replaceValue);\n\n\t\tlet progressComplete: () => void;\n\t\tlet progressReporter: IProgress<IProgressStep>;\n\n\t\tthis.progressService.withProgress({ location: this.getProgressLocation(), delay: 100, total: occurrences }, p => {\n\t\t\tprogressReporter = p;\n\n\t\t\treturn new Promise<void>(resolve => progressComplete = resolve);\n\t\t});\n\n\t\tconst confirmation: IConfirmation = {\n\t\t\ttitle: nls.localize('replaceAll.confirmation.title', \"Replace All\"),\n\t\t\tmessage: this.buildReplaceAllConfirmationMessage(occurrences, fileCount, replaceValue),\n\t\t\tprimaryButton: nls.localize({ key: 'replaceAll.confirm.button', comment: ['&& denotes a mnemonic'] }, \"&&Replace\")\n\t\t};\n\n\t\tthis.dialogService.confirm(confirmation).then(res => {\n\t\t\tif (res.confirmed) {\n\t\t\t\tthis.searchWidget.setReplaceAllActionState(false);\n\t\t\t\tthis.viewModel.searchResult.replaceAll(progressReporter).then(() => {\n\t\t\t\t\tprogressComplete();\n\t\t\t\t\tconst messageEl = this.clearMessage();\n\t\t\t\t\tdom.append(messageEl, afterReplaceAllMessage);\n\t\t\t\t\tthis.reLayout();\n\t\t\t\t}, (error) => {\n\t\t\t\t\tprogressComplete();\n\t\t\t\t\terrors.isCancellationError(error);\n\t\t\t\t\tthis.notificationService.error(error);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tprogressComplete();\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate buildAfterReplaceAllMessage(occurrences: number, fileCount: number, replaceValue?: string) {\n\t\tif (occurrences === 1) {\n\t\t\tif (fileCount === 1) {\n\t\t\t\tif (replaceValue) {\n\t\t\t\t\treturn nls.localize('replaceAll.occurrence.file.message', \"Replaced {0} occurrence across {1} file with '{2}'.\", occurrences, fileCount, replaceValue);\n\t\t\t\t}\n\n\t\t\t\treturn nls.localize('removeAll.occurrence.file.message', \"Replaced {0} occurrence across {1} file.\", occurrences, fileCount);\n\t\t\t}\n\n\t\t\tif (replaceValue) {\n\t\t\t\treturn nls.localize('replaceAll.occurrence.files.message', \"Replaced {0} occurrence across {1} files with '{2}'.\", occurrences, fileCount, replaceValue);\n\t\t\t}\n\n\t\t\treturn nls.localize('removeAll.occurrence.files.message', \"Replaced {0} occurrence across {1} files.\", occurrences, fileCount);\n\t\t}\n\n\t\tif (fileCount === 1) {\n\t\t\tif (replaceValue) {\n\t\t\t\treturn nls.localize('replaceAll.occurrences.file.message', \"Replaced {0} occurrences across {1} file with '{2}'.\", occurrences, fileCount, replaceValue);\n\t\t\t}\n\n\t\t\treturn nls.localize('removeAll.occurrences.file.message', \"Replaced {0} occurrences across {1} file.\", occurrences, fileCount);\n\t\t}\n\n\t\tif (replaceValue) {\n\t\t\treturn nls.localize('replaceAll.occurrences.files.message', \"Replaced {0} occurrences across {1} files with '{2}'.\", occurrences, fileCount, replaceValue);\n\t\t}\n\n\t\treturn nls.localize('removeAll.occurrences.files.message', \"Replaced {0} occurrences across {1} files.\", occurrences, fileCount);\n\t}\n\n\tprivate buildReplaceAllConfirmationMessage(occurrences: number, fileCount: number, replaceValue?: string) {\n\t\tif (occurrences === 1) {\n\t\t\tif (fileCount === 1) {\n\t\t\t\tif (replaceValue) {\n\t\t\t\t\treturn nls.localize('removeAll.occurrence.file.confirmation.message', \"Replace {0} occurrence across {1} file with '{2}'?\", occurrences, fileCount, replaceValue);\n\t\t\t\t}\n\n\t\t\t\treturn nls.localize('replaceAll.occurrence.file.confirmation.message', \"Replace {0} occurrence across {1} file?\", occurrences, fileCount);\n\t\t\t}\n\n\t\t\tif (replaceValue) {\n\t\t\t\treturn nls.localize('removeAll.occurrence.files.confirmation.message', \"Replace {0} occurrence across {1} files with '{2}'?\", occurrences, fileCount, replaceValue);\n\t\t\t}\n\n\t\t\treturn nls.localize('replaceAll.occurrence.files.confirmation.message', \"Replace {0} occurrence across {1} files?\", occurrences, fileCount);\n\t\t}\n\n\t\tif (fileCount === 1) {\n\t\t\tif (replaceValue) {\n\t\t\t\treturn nls.localize('removeAll.occurrences.file.confirmation.message', \"Replace {0} occurrences across {1} file with '{2}'?\", occurrences, fileCount, replaceValue);\n\t\t\t}\n\n\t\t\treturn nls.localize('replaceAll.occurrences.file.confirmation.message', \"Replace {0} occurrences across {1} file?\", occurrences, fileCount);\n\t\t}\n\n\t\tif (replaceValue) {\n\t\t\treturn nls.localize('removeAll.occurrences.files.confirmation.message', \"Replace {0} occurrences across {1} files with '{2}'?\", occurrences, fileCount, replaceValue);\n\t\t}\n\n\t\treturn nls.localize('replaceAll.occurrences.files.confirmation.message', \"Replace {0} occurrences across {1} files?\", occurrences, fileCount);\n\t}\n\n\tprivate clearMessage(): HTMLElement {\n\t\tthis.searchWithoutFolderMessageElement = undefined;\n\n\t\tconst wasHidden = this.messagesElement.style.display === 'none';\n\t\tdom.clearNode(this.messagesElement);\n\t\tdom.show(this.messagesElement);\n\t\tthis.messageDisposables.clear();\n\n\t\tconst newMessage = dom.append(this.messagesElement, $('.message'));\n\t\tif (wasHidden) {\n\t\t\tthis.reLayout();\n\t\t}\n\n\t\treturn newMessage;\n\t}\n\n\tprivate createSearchResultsView(container: HTMLElement): void {\n\t\tthis.resultsElement = dom.append(container, $('.results.show-file-icons.file-icon-themable-tree'));\n\t\tconst delegate = this.instantiationService.createInstance(SearchDelegate);\n\n\t\tconst identityProvider: IIdentityProvider<RenderableMatch> = {\n\t\t\tgetId(element: RenderableMatch) {\n\t\t\t\treturn element.id();\n\t\t\t}\n\t\t};\n\n\t\tthis.treeLabels = this._register(this.instantiationService.createInstance(ResourceLabels, { onDidChangeVisibility: this.onDidChangeBodyVisibility }));\n\t\tthis.tree = this._register(<WorkbenchCompressibleObjectTree<RenderableMatch>>this.instantiationService.createInstance(WorkbenchCompressibleObjectTree,\n\t\t\t'SearchView',\n\t\t\tthis.resultsElement,\n\t\t\tdelegate,\n\t\t\t[\n\t\t\t\tthis._register(this.instantiationService.createInstance(FolderMatchRenderer, this, this.treeLabels)),\n\t\t\t\tthis._register(this.instantiationService.createInstance(FileMatchRenderer, this, this.treeLabels)),\n\t\t\t\tthis._register(this.instantiationService.createInstance(MatchRenderer, this)),\n\t\t\t],\n\t\t\t{\n\t\t\t\tidentityProvider,\n\t\t\t\taccessibilityProvider: this.treeAccessibilityProvider,\n\t\t\t\tdnd: this.instantiationService.createInstance(ResourceListDnDHandler, element => {\n\t\t\t\t\tif (element instanceof FileMatch) {\n\t\t\t\t\t\treturn element.resource;\n\t\t\t\t\t}\n\t\t\t\t\tif (element instanceof Match) {\n\t\t\t\t\t\treturn withSelection(element.parent().resource, element.range());\n\t\t\t\t\t}\n\t\t\t\t\treturn null;\n\t\t\t\t}),\n\t\t\t\tmultipleSelectionSupport: true,\n\t\t\t\tselectionNavigation: true,\n\t\t\t\toverrideStyles: this.getLocationBasedColors().listOverrideStyles,\n\t\t\t\tpaddingBottom: SearchDelegate.ITEM_HEIGHT\n\t\t\t}));\n\t\tthis._register(this.tree.onContextMenu(e => this.onContextMenu(e)));\n\t\tconst updateHasSomeCollapsible = () => this.toggleCollapseStateDelayer.trigger(() => this.hasSomeCollapsibleResultKey.set(this.hasSomeCollapsible()));\n\t\tupdateHasSomeCollapsible();\n\t\tthis._register(this.tree.onDidChangeCollapseState(() => updateHasSomeCollapsible()));\n\t\tthis._register(this.tree.onDidChangeModel(() => updateHasSomeCollapsible()));\n\n\t\tthis._register(Event.debounce(this.tree.onDidOpen, (last, event) => event, DEBOUNCE_DELAY, true)(options => {\n\t\t\tif (options.element instanceof Match) {\n\t\t\t\tconst selectedMatch: Match = options.element;\n\t\t\t\tthis.currentSelectedFileMatch?.setSelectedMatch(null);\n\t\t\t\tthis.currentSelectedFileMatch = selectedMatch.parent();\n\t\t\t\tthis.currentSelectedFileMatch.setSelectedMatch(selectedMatch);\n\n\t\t\t\tthis.onFocus(selectedMatch, options.editorOptions.preserveFocus, options.sideBySide, options.editorOptions.pinned);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(Event.debounce(this.tree.onDidChangeFocus, (last, event) => event, DEBOUNCE_DELAY, true)(() => {\n\t\t\tconst selection = this.tree.getSelection();\n\t\t\tconst focus = this.tree.getFocus()[0];\n\t\t\tif (selection.length > 1 && focus instanceof Match) {\n\t\t\t\tthis.onFocus(focus, true);\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(Event.any<any>(this.tree.onDidFocus, this.tree.onDidChangeFocus)(() => {\n\t\t\tconst focus = this.tree.getFocus()[0];\n\n\t\t\tif (this.tree.isDOMFocused()) {\n\t\t\t\tthis.firstMatchFocused.set(this.tree.navigate().first() === focus);\n\t\t\t\tthis.fileMatchOrMatchFocused.set(!!focus);\n\t\t\t\tthis.fileMatchFocused.set(focus instanceof FileMatch);\n\t\t\t\tthis.folderMatchFocused.set(focus instanceof FolderMatch);\n\t\t\t\tthis.matchFocused.set(focus instanceof Match);\n\t\t\t\tthis.fileMatchOrFolderMatchFocus.set(focus instanceof FileMatch || focus instanceof FolderMatch);\n\t\t\t\tthis.fileMatchOrFolderMatchWithResourceFocus.set(focus instanceof FileMatch || focus instanceof FolderMatchWithResource);\n\t\t\t\tthis.folderMatchWithResourceFocused.set(focus instanceof FolderMatchWithResource);\n\t\t\t\tthis.lastFocusState = 'tree';\n\t\t\t}\n\n\t\t\tlet editable = false;\n\t\t\tif (focus instanceof Match) {\n\t\t\t\teditable = (focus instanceof MatchInNotebook) ? !focus.isReadonly() : true;\n\t\t\t} else if (focus instanceof FileMatch) {\n\t\t\t\teditable = !focus.hasOnlyReadOnlyMatches();\n\t\t\t} else if (focus instanceof FolderMatch) {\n\t\t\t\teditable = !focus.hasOnlyReadOnlyMatches();\n\t\t\t}\n\t\t\tthis.isEditableItem.set(editable);\n\t\t}));\n\n\t\tthis._register(this.tree.onDidBlur(() => {\n\t\t\tthis.firstMatchFocused.reset();\n\t\t\tthis.fileMatchOrMatchFocused.reset();\n\t\t\tthis.fileMatchFocused.reset();\n\t\t\tthis.folderMatchFocused.reset();\n\t\t\tthis.matchFocused.reset();\n\t\t\tthis.fileMatchOrFolderMatchFocus.reset();\n\t\t\tthis.fileMatchOrFolderMatchWithResourceFocus.reset();\n\t\t\tthis.folderMatchWithResourceFocused.reset();\n\t\t\tthis.isEditableItem.reset();\n\t\t}));\n\t}\n\n\tprivate onContextMenu(e: ITreeContextMenuEvent<RenderableMatch | null>): void {\n\n\t\te.browserEvent.preventDefault();\n\t\te.browserEvent.stopPropagation();\n\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tmenuId: MenuId.SearchContext,\n\t\t\tmenuActionOptions: { shouldForwardArgs: true },\n\t\t\tcontextKeyService: this.contextKeyService,\n\t\t\tgetAnchor: () => e.anchor,\n\t\t\tgetActionsContext: () => e.element,\n\t\t});\n\t}\n\n\tprivate hasSomeCollapsible(): boolean {\n\t\tconst viewer = this.getControl();\n\t\tconst navigator = viewer.navigate();\n\t\tlet node = navigator.first();\n\t\tdo {\n\t\t\tif (!viewer.isCollapsed(node)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} while (node = navigator.next());\n\n\t\treturn false;\n\t}\n\n\tselectNextMatch(): void {\n\t\tif (!this.hasSearchResults()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst [selected] = this.tree.getSelection();\n\n\t\t// Expand the initial selected node, if needed\n\t\tif (selected && !(selected instanceof Match)) {\n\t\t\tif (this.tree.isCollapsed(selected)) {\n\t\t\t\tthis.tree.expand(selected);\n\t\t\t}\n\t\t}\n\n\t\tconst navigator = this.tree.navigate(selected);\n\n\t\tlet next = navigator.next();\n\t\tif (!next) {\n\t\t\tnext = navigator.first();\n\t\t}\n\n\t\t// Expand until first child is a Match\n\t\twhile (next && !(next instanceof Match)) {\n\t\t\tif (this.tree.isCollapsed(next)) {\n\t\t\t\tthis.tree.expand(next);\n\t\t\t}\n\n\t\t\t// Select the first child\n\t\t\tnext = navigator.next();\n\t\t}\n\n\t\t// Reveal the newly selected element\n\t\tif (next) {\n\t\t\tif (next === selected) {\n\t\t\t\tthis.tree.setFocus([]);\n\t\t\t}\n\t\t\tconst event = getSelectionKeyboardEvent(undefined, false, false);\n\t\t\tthis.tree.setFocus([next], event);\n\t\t\tthis.tree.setSelection([next], event);\n\t\t\tthis.tree.reveal(next);\n\t\t\tconst ariaLabel = this.treeAccessibilityProvider.getAriaLabel(next);\n\t\t\tif (ariaLabel) { aria.status(ariaLabel); }\n\t\t}\n\t}\n\n\tselectPreviousMatch(): void {\n\t\tif (!this.hasSearchResults()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst [selected] = this.tree.getSelection();\n\t\tlet navigator = this.tree.navigate(selected);\n\n\t\tlet prev = navigator.previous();\n\n\t\t// Select previous until find a Match or a collapsed item\n\t\twhile (!prev || (!(prev instanceof Match) && !this.tree.isCollapsed(prev))) {\n\t\t\tconst nextPrev = prev ? navigator.previous() : navigator.last();\n\n\t\t\tif (!prev && !nextPrev) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tprev = nextPrev;\n\t\t}\n\n\t\t// Expand until last child is a Match\n\t\twhile (!(prev instanceof Match)) {\n\t\t\tconst nextItem = navigator.next();\n\t\t\tthis.tree.expand(prev);\n\t\t\tnavigator = this.tree.navigate(nextItem); // recreate navigator because modifying the tree can invalidate it\n\t\t\tprev = nextItem ? navigator.previous() : navigator.last(); // select last child\n\t\t}\n\n\t\t// Reveal the newly selected element\n\t\tif (prev) {\n\t\t\tif (prev === selected) {\n\t\t\t\tthis.tree.setFocus([]);\n\t\t\t}\n\t\t\tconst event = getSelectionKeyboardEvent(undefined, false, false);\n\t\t\tthis.tree.setFocus([prev], event);\n\t\t\tthis.tree.setSelection([prev], event);\n\t\t\tthis.tree.reveal(prev);\n\t\t\tconst ariaLabel = this.treeAccessibilityProvider.getAriaLabel(prev);\n\t\t\tif (ariaLabel) { aria.status(ariaLabel); }\n\t\t}\n\t}\n\n\tmoveFocusToResults(): void {\n\t\tthis.tree.domFocus();\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\t\tif (this.lastFocusState === 'input' || !this.hasSearchResults()) {\n\t\t\tconst updatedText = this.searchConfig.seedOnFocus ? this.updateTextFromSelection({ allowSearchOnType: false }) : false;\n\t\t\tthis.searchWidget.focus(undefined, undefined, updatedText);\n\t\t} else {\n\t\t\tthis.tree.domFocus();\n\t\t}\n\t}\n\n\tupdateTextFromFindWidgetOrSelection({ allowUnselectedWord = true, allowSearchOnType = true }): boolean {\n\t\tlet activeEditor = this.editorService.activeTextEditorControl;\n\t\tif (isCodeEditor(activeEditor) && !activeEditor?.hasTextFocus()) {\n\t\t\tconst controller = CommonFindController.get(activeEditor);\n\t\t\tif (controller && controller.isFindInputFocused()) {\n\t\t\t\treturn this.updateTextFromFindWidget(controller, { allowSearchOnType });\n\t\t\t}\n\n\t\t\tconst editors = this.codeEditorService.listCodeEditors();\n\t\t\tactiveEditor = editors.find(editor => editor instanceof EmbeddedCodeEditorWidget && editor.getParentEditor() === activeEditor && editor.hasTextFocus())\n\t\t\t\t?? activeEditor;\n\t\t}\n\n\t\treturn this.updateTextFromSelection({ allowUnselectedWord, allowSearchOnType }, activeEditor);\n\t}\n\n\tprivate updateTextFromFindWidget(controller: CommonFindController, { allowSearchOnType = true }): boolean {\n\t\tif (!this.searchConfig.seedWithNearestWord && (dom.getActiveWindow().getSelection()?.toString() ?? '') === '') {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst searchString = controller.getState().searchString;\n\t\tif (searchString === '') {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.searchWidget.searchInput?.setCaseSensitive(controller.getState().matchCase);\n\t\tthis.searchWidget.searchInput?.setWholeWords(controller.getState().wholeWord);\n\t\tthis.searchWidget.searchInput?.setRegex(controller.getState().isRegex);\n\t\tthis.updateText(searchString, allowSearchOnType);\n\n\t\treturn true;\n\t}\n\n\tprivate updateTextFromSelection({ allowUnselectedWord = true, allowSearchOnType = true }, editor?: IEditor): boolean {\n\t\tconst seedSearchStringFromSelection = this.configurationService.getValue<IEditorOptions>('editor').find!.seedSearchStringFromSelection;\n\t\tif (!seedSearchStringFromSelection || seedSearchStringFromSelection === 'never') {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet selectedText = this.getSearchTextFromEditor(allowUnselectedWord, editor);\n\t\tif (selectedText === null) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.searchWidget.searchInput?.getRegex()) {\n\t\t\tselectedText = strings.escapeRegExpCharacters(selectedText);\n\t\t}\n\n\t\tthis.updateText(selectedText, allowSearchOnType);\n\t\treturn true;\n\t}\n\n\tprivate updateText(text: string, allowSearchOnType: boolean = true) {\n\t\tif (allowSearchOnType && !this.viewModel.searchResult.isDirty) {\n\t\t\tthis.searchWidget.setValue(text);\n\t\t} else {\n\t\t\tthis.pauseSearching = true;\n\t\t\tthis.searchWidget.setValue(text);\n\t\t\tthis.pauseSearching = false;\n\t\t}\n\t}\n\n\tfocusNextInputBox(): void {\n\t\tif (this.searchWidget.searchInputHasFocus()) {\n\t\t\tif (this.searchWidget.isReplaceShown()) {\n\t\t\t\tthis.searchWidget.focus(true, true);\n\t\t\t} else {\n\t\t\t\tthis.moveFocusFromSearchOrReplace();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.searchWidget.replaceInputHasFocus()) {\n\t\t\tthis.moveFocusFromSearchOrReplace();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.inputPatternIncludes.inputHasFocus()) {\n\t\t\tthis.inputPatternExcludes.focus();\n\t\t\tthis.inputPatternExcludes.select();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.inputPatternExcludes.inputHasFocus()) {\n\t\t\tthis.selectTreeIfNotSelected();\n\t\t\treturn;\n\t\t}\n\t}\n\n\tprivate moveFocusFromSearchOrReplace() {\n\t\tif (this.showsFileTypes()) {\n\t\t\tthis.toggleQueryDetails(true, this.showsFileTypes());\n\t\t} else {\n\t\t\tthis.selectTreeIfNotSelected();\n\t\t}\n\t}\n\n\tfocusPreviousInputBox(): void {\n\t\tif (this.searchWidget.searchInputHasFocus()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.searchWidget.replaceInputHasFocus()) {\n\t\t\tthis.searchWidget.focus(true);\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.inputPatternIncludes.inputHasFocus()) {\n\t\t\tthis.searchWidget.focus(true, true);\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.inputPatternExcludes.inputHasFocus()) {\n\t\t\tthis.inputPatternIncludes.focus();\n\t\t\tthis.inputPatternIncludes.select();\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.tree.isDOMFocused()) {\n\t\t\tthis.moveFocusFromResults();\n\t\t\treturn;\n\t\t}\n\t}\n\n\tprivate moveFocusFromResults(): void {\n\t\tif (this.showsFileTypes()) {\n\t\t\tthis.toggleQueryDetails(true, true, false, true);\n\t\t} else {\n\t\t\tthis.searchWidget.focus(true, true);\n\t\t}\n\t}\n\n\tprivate reLayout(): void {\n\t\tif (this.isDisposed || !this.size) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst actionsPosition = this.searchConfig.actionsPosition;\n\t\tthis.getContainer().classList.toggle(SearchView.ACTIONS_RIGHT_CLASS_NAME, actionsPosition === 'right');\n\n\t\tthis.searchWidget.setWidth(this.size.width - 28 /* container margin */);\n\n\t\tthis.inputPatternExcludes.setWidth(this.size.width - 28 /* container margin */);\n\t\tthis.inputPatternIncludes.setWidth(this.size.width - 28 /* container margin */);\n\n\t\tconst widgetHeight = dom.getTotalHeight(this.searchWidgetsContainerElement);\n\t\tconst messagesHeight = dom.getTotalHeight(this.messagesElement);\n\t\tthis.tree.layout(this.size.height - widgetHeight - messagesHeight, this.size.width - 28);\n\t}\n\n\tprotected override layoutBody(height: number, width: number): void {\n\t\tsuper.layoutBody(height, width);\n\t\tthis.size = new dom.Dimension(width, height);\n\t\tthis.reLayout();\n\t}\n\n\tgetControl() {\n\t\treturn this.tree;\n\t}\n\n\tallSearchFieldsClear(): boolean {\n\t\treturn this.searchWidget.getReplaceValue() === '' &&\n\t\t\t(!this.searchWidget.searchInput || this.searchWidget.searchInput.getValue() === '');\n\t}\n\n\tallFilePatternFieldsClear(): boolean {\n\t\treturn this.searchExcludePattern.getValue() === '' &&\n\t\t\tthis.searchIncludePattern.getValue() === '';\n\t}\n\n\thasSearchResults(): boolean {\n\t\treturn !this.viewModel.searchResult.isEmpty(this.aiResultsVisible);\n\t}\n\n\tclearSearchResults(clearInput = true): void {\n\t\tthis.viewModel.searchResult.clear();\n\t\tthis.showEmptyStage(true);\n\t\tif (this.contextService.getWorkbenchState() === WorkbenchState.EMPTY) {\n\t\t\tthis.showSearchWithoutFolderMessage();\n\t\t}\n\t\tif (clearInput) {\n\t\t\tif (this.allSearchFieldsClear()) {\n\t\t\t\tthis.clearFilePatternFields();\n\t\t\t}\n\t\t\tthis.searchWidget.clear();\n\t\t}\n\t\tthis.viewModel.cancelSearch();\n\t\tthis.tree.ariaLabel = nls.localize('emptySearch', \"Empty Search\");\n\n\t\tthis.accessibilitySignalService.playSignal(AccessibilitySignal.clear);\n\t\tthis.reLayout();\n\t}\n\n\tclearFilePatternFields(): void {\n\t\tthis.searchExcludePattern.clear();\n\t\tthis.searchIncludePattern.clear();\n\t}\n\n\tcancelSearch(focus: boolean = true): boolean {\n\t\tif (this.viewModel.cancelSearch()) {\n\t\t\tif (focus) { this.searchWidget.focus(); }\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate selectTreeIfNotSelected(): void {\n\t\tif (this.tree.getNode(null)) {\n\t\t\tthis.tree.domFocus();\n\t\t\tconst selection = this.tree.getSelection();\n\t\t\tif (selection.length === 0) {\n\t\t\t\tconst event = getSelectionKeyboardEvent();\n\t\t\t\tthis.tree.focusNext(undefined, undefined, event);\n\t\t\t\tthis.tree.setSelection(this.tree.getFocus(), event);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate getSearchTextFromEditor(allowUnselectedWord: boolean, editor?: IEditor): string | null {\n\t\tif (dom.isAncestorOfActiveElement(this.getContainer())) {\n\t\t\treturn null;\n\t\t}\n\n\t\teditor = editor ?? this.editorService.activeTextEditorControl;\n\n\t\tif (!editor) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst allowUnselected = this.searchConfig.seedWithNearestWord && allowUnselectedWord;\n\t\treturn getSelectionTextFromEditor(allowUnselected, editor);\n\t}\n\n\tprivate showsFileTypes(): boolean {\n\t\treturn this.queryDetails.classList.contains('more');\n\t}\n\n\ttoggleCaseSensitive(): void {\n\t\tthis.searchWidget.searchInput?.setCaseSensitive(!this.searchWidget.searchInput.getCaseSensitive());\n\t\tthis.triggerQueryChange();\n\t}\n\n\ttoggleWholeWords(): void {\n\t\tthis.searchWidget.searchInput?.setWholeWords(!this.searchWidget.searchInput.getWholeWords());\n\t\tthis.triggerQueryChange();\n\t}\n\n\ttoggleRegex(): void {\n\t\tthis.searchWidget.searchInput?.setRegex(!this.searchWidget.searchInput.getRegex());\n\t\tthis.triggerQueryChange();\n\t}\n\n\ttogglePreserveCase(): void {\n\t\tthis.searchWidget.replaceInput?.setPreserveCase(!this.searchWidget.replaceInput.getPreserveCase());\n\t\tthis.triggerQueryChange();\n\t}\n\n\tsetSearchParameters(args: IFindInFilesArgs = {}): void {\n\t\tif (typeof args.isCaseSensitive === 'boolean') {\n\t\t\tthis.searchWidget.searchInput?.setCaseSensitive(args.isCaseSensitive);\n\t\t}\n\t\tif (typeof args.matchWholeWord === 'boolean') {\n\t\t\tthis.searchWidget.searchInput?.setWholeWords(args.matchWholeWord);\n\t\t}\n\t\tif (typeof args.isRegex === 'boolean') {\n\t\t\tthis.searchWidget.searchInput?.setRegex(args.isRegex);\n\t\t}\n\t\tif (typeof args.filesToInclude === 'string') {\n\t\t\tthis.searchIncludePattern.setValue(String(args.filesToInclude));\n\t\t}\n\t\tif (typeof args.filesToExclude === 'string') {\n\t\t\tthis.searchExcludePattern.setValue(String(args.filesToExclude));\n\t\t}\n\t\tif (typeof args.query === 'string') {\n\t\t\tthis.searchWidget.searchInput?.setValue(args.query);\n\t\t}\n\t\tif (typeof args.replace === 'string') {\n\t\t\tthis.searchWidget.replaceInput?.setValue(args.replace);\n\t\t} else {\n\t\t\tif (this.searchWidget.replaceInput && this.searchWidget.replaceInput.getValue() !== '') {\n\t\t\t\tthis.searchWidget.replaceInput.setValue('');\n\t\t\t}\n\t\t}\n\t\tif (typeof args.triggerSearch === 'boolean' && args.triggerSearch) {\n\t\t\tthis.triggerQueryChange();\n\t\t}\n\t\tif (typeof args.preserveCase === 'boolean') {\n\t\t\tthis.searchWidget.replaceInput?.setPreserveCase(args.preserveCase);\n\t\t}\n\t\tif (typeof args.useExcludeSettingsAndIgnoreFiles === 'boolean') {\n\t\t\tthis.inputPatternExcludes.setUseExcludesAndIgnoreFiles(args.useExcludeSettingsAndIgnoreFiles);\n\t\t}\n\t\tif (typeof args.onlyOpenEditors === 'boolean') {\n\t\t\tthis.searchIncludePattern.setOnlySearchInOpenEditors(args.onlyOpenEditors);\n\t\t}\n\t}\n\n\ttoggleQueryDetails(moveFocus = true, show?: boolean, skipLayout?: boolean, reverse?: boolean): void {\n\t\tconst cls = 'more';\n\t\tshow = typeof show === 'undefined' ? !this.queryDetails.classList.contains(cls) : Boolean(show);\n\t\tthis.viewletState['query.queryDetailsExpanded'] = show;\n\t\tskipLayout = Boolean(skipLayout);\n\n\t\tif (show) {\n\t\t\tthis.toggleQueryDetailsButton.setAttribute('aria-expanded', 'true');\n\t\t\tthis.queryDetails.classList.add(cls);\n\t\t\tif (moveFocus) {\n\t\t\t\tif (reverse) {\n\t\t\t\t\tthis.inputPatternExcludes.focus();\n\t\t\t\t\tthis.inputPatternExcludes.select();\n\t\t\t\t} else {\n\t\t\t\t\tthis.inputPatternIncludes.focus();\n\t\t\t\t\tthis.inputPatternIncludes.select();\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tthis.toggleQueryDetailsButton.setAttribute('aria-expanded', 'false');\n\t\t\tthis.queryDetails.classList.remove(cls);\n\t\t\tif (moveFocus) {\n\t\t\t\tthis.searchWidget.focus();\n\t\t\t}\n\t\t}\n\n\t\tif (!skipLayout && this.size) {\n\t\t\tthis.reLayout();\n\t\t}\n\t}\n\n\tprivate _queryDetailsHidden() {\n\t\treturn this.queryDetails.classList.contains('more');\n\t}\n\n\tsearchInFolders(folderPaths: string[] = []): void {\n\t\tthis._searchWithIncludeOrExclude(true, folderPaths);\n\t}\n\n\tsearchOutsideOfFolders(folderPaths: string[] = []): void {\n\t\tthis._searchWithIncludeOrExclude(false, folderPaths);\n\t}\n\n\tprivate _searchWithIncludeOrExclude(include: boolean, folderPaths: string[]) {\n\t\tif (!folderPaths.length || folderPaths.some(folderPath => folderPath === '.')) {\n\t\t\tthis.inputPatternIncludes.setValue('');\n\t\t\tthis.searchWidget.focus();\n\t\t\treturn;\n\t\t}\n\n\t\t// Show 'files to include' box\n\t\tif (!this.showsFileTypes()) {\n\t\t\tthis.toggleQueryDetails(true, true);\n\t\t}\n\n\t\t(include ? this.inputPatternIncludes : this.inputPatternExcludes).setValue(folderPaths.join(', '));\n\t\tthis.searchWidget.focus(false);\n\t}\n\n\ttriggerQueryChange(_options?: { preserveFocus?: boolean; triggeredOnType?: boolean; delay?: number }) {\n\t\tconst options = { preserveFocus: true, triggeredOnType: false, delay: 0, ..._options };\n\n\t\tif (options.triggeredOnType && !this.searchConfig.searchOnType) { return; }\n\n\t\tif (!this.pauseSearching) {\n\n\t\t\tconst delay = options.triggeredOnType ? options.delay : 0;\n\t\t\tthis.triggerQueryDelayer.trigger(() => {\n\t\t\t\tthis._onQueryChanged(options.preserveFocus, options.triggeredOnType);\n\t\t\t}, delay);\n\t\t}\n\t}\n\n\tprivate _onQueryChanged(preserveFocus: boolean, triggeredOnType = false): void {\n\t\tif (!(this.searchWidget.searchInput?.inputBox.isInputValid())) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst isRegex = this.searchWidget.searchInput.getRegex();\n\t\tconst isInNotebookMarkdownInput = this.searchWidget.getNotebookFilters().markupInput;\n\t\tconst isInNotebookMarkdownPreview = this.searchWidget.getNotebookFilters().markupPreview;\n\t\tconst isInNotebookCellInput = this.searchWidget.getNotebookFilters().codeInput;\n\t\tconst isInNotebookCellOutput = this.searchWidget.getNotebookFilters().codeOutput;\n\n\t\tconst isWholeWords = this.searchWidget.searchInput.getWholeWords();\n\t\tconst isCaseSensitive = this.searchWidget.searchInput.getCaseSensitive();\n\t\tconst contentPattern = this.searchWidget.searchInput.getValue();\n\t\tconst excludePatternText = this.inputPatternExcludes.getValue().trim();\n\t\tconst includePatternText = this.inputPatternIncludes.getValue().trim();\n\t\tconst useExcludesAndIgnoreFiles = this.inputPatternExcludes.useExcludesAndIgnoreFiles();\n\t\tconst onlySearchInOpenEditors = this.inputPatternIncludes.onlySearchInOpenEditors();\n\n\t\tif (contentPattern.length === 0) {\n\t\t\tthis.clearSearchResults(false);\n\t\t\tthis.clearMessage();\n\t\t\treturn;\n\t\t}\n\n\t\tconst content: IPatternInfo = {\n\t\t\tpattern: contentPattern,\n\t\t\tisRegExp: isRegex,\n\t\t\tisCaseSensitive: isCaseSensitive,\n\t\t\tisWordMatch: isWholeWords,\n\t\t\tnotebookInfo: {\n\t\t\t\tisInNotebookMarkdownInput,\n\t\t\t\tisInNotebookMarkdownPreview,\n\t\t\t\tisInNotebookCellInput,\n\t\t\t\tisInNotebookCellOutput\n\t\t\t}\n\t\t};\n\n\t\tconst excludePattern = [{ pattern: this.inputPatternExcludes.getValue() }];\n\t\tconst includePattern = this.inputPatternIncludes.getValue();\n\n\t\t// Need the full match line to correctly calculate replace text, if this is a search/replace with regex group references ($1, $2, ...).\n\t\t// 10000 chars is enough to avoid sending huge amounts of text around, if you do a replace with a longer match, it may or may not resolve the group refs correctly.\n\t\t// https://github.com/microsoft/vscode/issues/58374\n\t\tconst charsPerLine = content.isRegExp ? 10000 : 1000;\n\n\t\tconst options: ITextQueryBuilderOptions = {\n\t\t\t_reason: 'searchView',\n\t\t\textraFileResources: this.instantiationService.invokeFunction(getOutOfWorkspaceEditorResources),\n\t\t\tmaxResults: this.searchConfig.maxResults ?? undefined,\n\t\t\tdisregardIgnoreFiles: !useExcludesAndIgnoreFiles || undefined,\n\t\t\tdisregardExcludeSettings: !useExcludesAndIgnoreFiles || undefined,\n\t\t\tonlyOpenEditors: onlySearchInOpenEditors,\n\t\t\texcludePattern,\n\t\t\tincludePattern,\n\t\t\tpreviewOptions: {\n\t\t\t\tmatchLines: 1,\n\t\t\t\tcharsPerLine\n\t\t\t},\n\t\t\tisSmartCase: this.searchConfig.smartCase,\n\t\t\texpandPatterns: true\n\t\t};\n\t\tconst folderResources = this.contextService.getWorkspace().folders;\n\n\t\tconst onQueryValidationError = (err: Error) => {\n\t\t\tthis.searchWidget.searchInput?.showMessage({ content: err.message, type: MessageType.ERROR });\n\t\t\tthis.viewModel.searchResult.clear();\n\t\t};\n\n\t\tlet query: ITextQuery;\n\t\ttry {\n\t\t\tquery = this.queryBuilder.text(content, folderResources.map(folder => folder.uri), options);\n\t\t} catch (err) {\n\t\t\tonQueryValidationError(err);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.validateQuery(query).then(() => {\n\t\t\tthis.onQueryTriggered(query, options, excludePatternText, includePatternText, triggeredOnType);\n\n\t\t\tif (!preserveFocus) {\n\t\t\t\tthis.searchWidget.focus(false, undefined, true); // focus back to input field\n\t\t\t}\n\t\t}, onQueryValidationError);\n\t}\n\n\tprivate validateQuery(query: ITextQuery): Promise<void> {\n\t\t// Validate folderQueries\n\t\tconst folderQueriesExistP =\n\t\t\tquery.folderQueries.map(fq => {\n\t\t\t\treturn this.fileService.exists(fq.folder).catch(() => false);\n\t\t\t});\n\n\t\treturn Promise.all(folderQueriesExistP).then(existResults => {\n\t\t\t// If no folders exist, show an error message about the first one\n\t\t\tconst existingFolderQueries = query.folderQueries.filter((folderQuery, i) => existResults[i]);\n\t\t\tif (!query.folderQueries.length || existingFolderQueries.length) {\n\t\t\t\tquery.folderQueries = existingFolderQueries;\n\t\t\t} else {\n\t\t\t\tconst nonExistantPath = query.folderQueries[0].folder.fsPath;\n\t\t\t\tconst searchPathNotFoundError = nls.localize('searchPathNotFoundError', \"Search path not found: {0}\", nonExistantPath);\n\t\t\t\treturn Promise.reject(new Error(searchPathNotFoundError));\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t});\n\t}\n\n\tprivate onQueryTriggered(query: ITextQuery, options: ITextQueryBuilderOptions, excludePatternText: string, includePatternText: string, triggeredOnType: boolean): void {\n\t\tthis.addToSearchHistoryDelayer.trigger(() => {\n\t\t\tthis.searchWidget.searchInput?.onSearchSubmit();\n\t\t\tthis.inputPatternExcludes.onSearchSubmit();\n\t\t\tthis.inputPatternIncludes.onSearchSubmit();\n\t\t});\n\n\t\tthis.viewModel.cancelSearch(true);\n\t\tthis.viewModel.cancelAISearch(true);\n\n\t\tthis.currentSearchQ = this.currentSearchQ\n\t\t\t.then(() => this.doSearch(query, excludePatternText, includePatternText, triggeredOnType))\n\t\t\t.then(() => undefined, () => undefined);\n\t}\n\n\n\tprivate _updateResults() {\n\t\tif (this.state === SearchUIState.Idle) {\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\t// Search result tree update\n\t\t\tconst fileCount = this.viewModel.searchResult.fileCount(this.aiResultsVisible);\n\t\t\tif (this._visibleMatches !== fileCount) {\n\t\t\t\tthis._visibleMatches = fileCount;\n\t\t\t\tthis.refreshAndUpdateCount();\n\t\t\t}\n\t\t} finally {\n\t\t\t// show frequent progress and results by scheduling updates 80 ms after the last one\n\t\t\tthis._refreshResultsScheduler.schedule();\n\t\t}\n\t}\n\n\tprivate onSearchComplete(progressComplete: () => void, excludePatternText?: string, includePatternText?: string, completed?: ISearchComplete) {\n\n\t\tthis.state = SearchUIState.Idle;\n\n\t\t// Complete up to 100% as needed\n\t\tprogressComplete();\n\n\t\t// Do final render, then expand if just 1 file with less than 50 matches\n\t\tthis.onSearchResultsChanged();\n\n\t\tconst collapseResults = this.searchConfig.collapseResults;\n\t\tif (collapseResults !== 'alwaysCollapse' && this.viewModel.searchResult.matches(this.aiResultsVisible).length === 1) {\n\t\t\tconst onlyMatch = this.viewModel.searchResult.matches(this.aiResultsVisible)[0];\n\t\t\tif (onlyMatch.count() < 50) {\n\t\t\t\tthis.tree.expand(onlyMatch);\n\t\t\t}\n\t\t}\n\n\t\tconst hasResults = !this.viewModel.searchResult.isEmpty(this.aiResultsVisible);\n\t\tif (completed?.exit === SearchCompletionExitCode.NewSearchStarted) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!hasResults) {\n\t\t\tconst hasExcludes = !!excludePatternText;\n\t\t\tconst hasIncludes = !!includePatternText;\n\t\t\tlet message: string;\n\n\t\t\tif (!completed) {\n\t\t\t\tmessage = SEARCH_CANCELLED_MESSAGE;\n\t\t\t} else if (this.inputPatternIncludes.onlySearchInOpenEditors()) {\n\t\t\t\tif (hasIncludes && hasExcludes) {\n\t\t\t\t\tmessage = nls.localize('noOpenEditorResultsIncludesExcludes', \"No results found in open editors matching '{0}' excluding '{1}' - \", includePatternText, excludePatternText);\n\t\t\t\t} else if (hasIncludes) {\n\t\t\t\t\tmessage = nls.localize('noOpenEditorResultsIncludes', \"No results found in open editors matching '{0}' - \", includePatternText);\n\t\t\t\t} else if (hasExcludes) {\n\t\t\t\t\tmessage = nls.localize('noOpenEditorResultsExcludes', \"No results found in open editors excluding '{0}' - \", excludePatternText);\n\t\t\t\t} else {\n\t\t\t\t\tmessage = nls.localize('noOpenEditorResultsFound', \"No results found in open editors. Review your settings for configured exclusions and check your gitignore files - \");\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (hasIncludes && hasExcludes) {\n\t\t\t\t\tmessage = nls.localize('noResultsIncludesExcludes', \"No results found in '{0}' excluding '{1}' - \", includePatternText, excludePatternText);\n\t\t\t\t} else if (hasIncludes) {\n\t\t\t\t\tmessage = nls.localize('noResultsIncludes', \"No results found in '{0}' - \", includePatternText);\n\t\t\t\t} else if (hasExcludes) {\n\t\t\t\t\tmessage = nls.localize('noResultsExcludes', \"No results found excluding '{0}' - \", excludePatternText);\n\t\t\t\t} else {\n\t\t\t\t\tmessage = nls.localize('noResultsFound', \"No results found. Review your settings for configured exclusions and check your gitignore files - \");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Indicate as status to ARIA\n\t\t\taria.status(message);\n\n\t\t\tconst messageEl = this.clearMessage();\n\t\t\tdom.append(messageEl, message);\n\n\t\t\tif (!completed) {\n\t\t\t\tconst searchAgainButton = this.messageDisposables.add(new SearchLinkButton(\n\t\t\t\t\tnls.localize('rerunSearch.message', \"Search again\"),\n\t\t\t\t\t() => this.triggerQueryChange({ preserveFocus: false }), this.hoverService));\n\t\t\t\tdom.append(messageEl, searchAgainButton.element);\n\t\t\t} else if (hasIncludes || hasExcludes) {\n\t\t\t\tconst searchAgainButton = this.messageDisposables.add(new SearchLinkButton(nls.localize('rerunSearchInAll.message', \"Search again in all files\"), this.onSearchAgain.bind(this), this.hoverService));\n\t\t\t\tdom.append(messageEl, searchAgainButton.element);\n\t\t\t} else {\n\t\t\t\tconst openSettingsButton = this.messageDisposables.add(new SearchLinkButton(nls.localize('openSettings.message', \"Open Settings\"), this.onOpenSettings.bind(this), this.hoverService));\n\t\t\t\tdom.append(messageEl, openSettingsButton.element);\n\t\t\t}\n\n\t\t\tif (completed) {\n\t\t\t\tdom.append(messageEl, $('span', undefined, ' - '));\n\n\t\t\t\tconst learnMoreButton = this.messageDisposables.add(new SearchLinkButton(nls.localize('openSettings.learnMore', \"Learn More\"), this.onLearnMore.bind(this), this.hoverService));\n\t\t\t\tdom.append(messageEl, learnMoreButton.element);\n\t\t\t}\n\n\t\t\tif (this.contextService.getWorkbenchState() === WorkbenchState.EMPTY) {\n\t\t\t\tthis.showSearchWithoutFolderMessage();\n\t\t\t}\n\t\t\tthis.reLayout();\n\t\t} else {\n\t\t\tthis.viewModel.searchResult.toggleHighlights(this.isVisible()); // show highlights\n\n\t\t\t// Indicate final search result count for ARIA\n\t\t\taria.status(nls.localize('ariaSearchResultsStatus', \"Search returned {0} results in {1} files\", this.viewModel.searchResult.count(this.aiResultsVisible), this.viewModel.searchResult.fileCount()));\n\t\t}\n\n\n\t\tif (completed && completed.limitHit) {\n\t\t\tcompleted.messages.push({ type: TextSearchCompleteMessageType.Warning, text: nls.localize('searchMaxResultsWarning', \"The result set only contains a subset of all matches. Be more specific in your search to narrow down the results.\") });\n\t\t}\n\n\t\tif (completed && completed.messages) {\n\t\t\tfor (const message of completed.messages) {\n\t\t\t\tthis.addMessage(message);\n\t\t\t}\n\t\t}\n\n\t\tthis.reLayout();\n\t}\n\n\tprivate onSearchError(e: any, progressComplete: () => void, excludePatternText?: string, includePatternText?: string, completed?: ISearchComplete) {\n\t\tthis.state = SearchUIState.Idle;\n\t\tif (errors.isCancellationError(e)) {\n\t\t\treturn this.onSearchComplete(progressComplete, excludePatternText, includePatternText, completed);\n\t\t} else {\n\t\t\tprogressComplete();\n\t\t\tthis.searchWidget.searchInput?.showMessage({ content: e.message, type: MessageType.ERROR });\n\t\t\tthis.viewModel.searchResult.clear();\n\n\t\t\treturn Promise.resolve();\n\t\t}\n\t}\n\n\tprivate doSearch(query: ITextQuery, excludePatternText: string, includePatternText: string, triggeredOnType: boolean): Thenable<void> {\n\t\tlet progressComplete: () => void;\n\t\tthis.progressService.withProgress({ location: this.getProgressLocation(), delay: triggeredOnType ? 300 : 0 }, _progress => {\n\t\t\treturn new Promise<void>(resolve => progressComplete = resolve);\n\t\t});\n\n\t\tthis.searchWidget.searchInput?.clearMessage();\n\t\tthis.state = SearchUIState.Searching;\n\t\tthis.showEmptyStage();\n\n\t\tconst slowTimer = setTimeout(() => {\n\t\t\tthis.state = SearchUIState.SlowSearch;\n\t\t}, 2000);\n\n\t\tthis._visibleMatches = 0;\n\n\t\tthis._refreshResultsScheduler.schedule();\n\n\t\tthis.searchWidget.setReplaceAllActionState(false);\n\n\t\tthis.tree.setSelection([]);\n\t\tthis.tree.setFocus([]);\n\n\t\tthis.viewModel.replaceString = this.searchWidget.getReplaceValue();\n\t\tconst result = this.viewModel.search(query);\n\t\tif (this.aiResultsVisible) {\n\t\t\tconst aiResult = this.viewModel.aiSearch({ ...query, contentPattern: query.contentPattern.pattern, type: QueryType.aiText });\n\t\t\treturn result.asyncResults.then(\n\t\t\t\t() => aiResult.then(\n\t\t\t\t\t(complete) => {\n\t\t\t\t\t\tclearTimeout(slowTimer);\n\t\t\t\t\t\tthis.onSearchComplete(progressComplete, excludePatternText, includePatternText, complete);\n\t\t\t\t\t}, (e) => {\n\t\t\t\t\t\tclearTimeout(slowTimer);\n\t\t\t\t\t\tthis.onSearchError(e, progressComplete, excludePatternText, includePatternText);\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\t\t}\n\t\treturn result.asyncResults.then((complete) => {\n\t\t\tclearTimeout(slowTimer);\n\t\t\tthis.onSearchComplete(progressComplete, excludePatternText, includePatternText, complete);\n\t\t}, (e) => {\n\t\t\tclearTimeout(slowTimer);\n\t\t\tthis.onSearchError(e, progressComplete, excludePatternText, includePatternText);\n\t\t});\n\t}\n\n\tprivate onOpenSettings(e: dom.EventLike): void {\n\t\tdom.EventHelper.stop(e, false);\n\t\tthis.openSettings('@id:files.exclude,search.exclude,search.useParentIgnoreFiles,search.useGlobalIgnoreFiles,search.useIgnoreFiles');\n\t}\n\n\tprivate openSettings(query: string): Promise<IEditorPane | undefined> {\n\t\tconst options: ISettingsEditorOptions = { query };\n\t\treturn this.contextService.getWorkbenchState() !== WorkbenchState.EMPTY ?\n\t\t\tthis.preferencesService.openWorkspaceSettings(options) :\n\t\t\tthis.preferencesService.openUserSettings(options);\n\t}\n\n\tprivate onLearnMore(): void {\n\t\tthis.openerService.open(URI.parse('https://go.microsoft.com/fwlink/?linkid=853977'));\n\t}\n\n\tprivate onSearchAgain(): void {\n\t\tthis.inputPatternExcludes.setValue('');\n\t\tthis.inputPatternIncludes.setValue('');\n\t\tthis.inputPatternIncludes.setOnlySearchInOpenEditors(false);\n\n\t\tthis.triggerQueryChange({ preserveFocus: false });\n\t}\n\n\tprivate onEnableExcludes(): void {\n\t\tthis.toggleQueryDetails(false, true);\n\t\tthis.searchExcludePattern.setUseExcludesAndIgnoreFiles(true);\n\t}\n\n\tprivate onDisableSearchInOpenEditors(): void {\n\t\tthis.toggleQueryDetails(false, true);\n\t\tthis.inputPatternIncludes.setOnlySearchInOpenEditors(false);\n\t}\n\n\tprivate updateSearchResultCount(disregardExcludesAndIgnores?: boolean, onlyOpenEditors?: boolean, clear: boolean = false): void {\n\t\tconst fileCount = this.viewModel.searchResult.fileCount(this.aiResultsVisible);\n\t\tconst resultCount = this.viewModel.searchResult.count(this.aiResultsVisible);\n\t\tthis.hasSearchResultsKey.set(fileCount > 0);\n\n\t\tconst msgWasHidden = this.messagesElement.style.display === 'none';\n\n\t\tconst messageEl = this.clearMessage();\n\t\tconst resultMsg = clear ? '' : this.buildResultCountMessage(resultCount, fileCount);\n\t\tthis.tree.ariaLabel = resultMsg + nls.localize('forTerm', \" - Search: {0}\", this.searchResult.query?.contentPattern.pattern ?? '');\n\t\tdom.append(messageEl, resultMsg);\n\n\t\tif (fileCount > 0) {\n\t\t\tif (disregardExcludesAndIgnores) {\n\t\t\t\tconst excludesDisabledMessage = ' - ' + nls.localize('useIgnoresAndExcludesDisabled', \"exclude settings and ignore files are disabled\") + ' ';\n\t\t\t\tconst enableExcludesButton = this.messageDisposables.add(new SearchLinkButton(nls.localize('excludes.enable', \"enable\"), this.onEnableExcludes.bind(this), this.hoverService, nls.localize('useExcludesAndIgnoreFilesDescription', \"Use Exclude Settings and Ignore Files\")));\n\t\t\t\tdom.append(messageEl, $('span', undefined, excludesDisabledMessage, '(', enableExcludesButton.element, ')'));\n\t\t\t}\n\n\t\t\tif (onlyOpenEditors) {\n\t\t\t\tconst searchingInOpenMessage = ' - ' + nls.localize('onlyOpenEditors', \"searching only in open files\") + ' ';\n\t\t\t\tconst disableOpenEditorsButton = this.messageDisposables.add(new SearchLinkButton(nls.localize('openEditors.disable', \"disable\"), this.onDisableSearchInOpenEditors.bind(this), this.hoverService, nls.localize('disableOpenEditors', \"Search in entire workspace\")));\n\t\t\t\tdom.append(messageEl, $('span', undefined, searchingInOpenMessage, '(', disableOpenEditorsButton.element, ')'));\n\t\t\t}\n\n\t\t\tdom.append(messageEl, ' - ');\n\n\t\t\tconst openInEditorTooltip = appendKeyBindingLabel(\n\t\t\t\tnls.localize('openInEditor.tooltip', \"Copy current search results to an editor\"),\n\t\t\t\tthis.keybindingService.lookupKeybinding(Constants.SearchCommandIds.OpenInEditorCommandId));\n\t\t\tconst openInEditorButton = this.messageDisposables.add(new SearchLinkButton(\n\t\t\t\tnls.localize('openInEditor.message', \"Open in editor\"),\n\t\t\t\t() => this.instantiationService.invokeFunction(createEditorFromSearchResult, this.searchResult, this.searchIncludePattern.getValue(), this.searchExcludePattern.getValue(), this.searchIncludePattern.onlySearchInOpenEditors()), this.hoverService,\n\t\t\t\topenInEditorTooltip));\n\t\t\tdom.append(messageEl, openInEditorButton.element);\n\n\t\t\tthis.reLayout();\n\t\t} else if (!msgWasHidden) {\n\t\t\tdom.hide(this.messagesElement);\n\t\t}\n\t}\n\n\tprivate addMessage(message: TextSearchCompleteMessage) {\n\t\tconst messageBox = this.messagesElement.firstChild as HTMLDivElement;\n\t\tif (!messageBox) { return; }\n\t\tdom.append(messageBox, renderSearchMessage(message, this.instantiationService, this.notificationService, this.openerService, this.commandService, this.messageDisposables, () => this.triggerQueryChange()));\n\t}\n\n\tprivate buildResultCountMessage(resultCount: number, fileCount: number): string {\n\t\tif (resultCount === 1 && fileCount === 1) {\n\t\t\treturn nls.localize('search.file.result', \"{0} result in {1} file\", resultCount, fileCount);\n\t\t} else if (resultCount === 1) {\n\t\t\treturn nls.localize('search.files.result', \"{0} result in {1} files\", resultCount, fileCount);\n\t\t} else if (fileCount === 1) {\n\t\t\treturn nls.localize('search.file.results', \"{0} results in {1} file\", resultCount, fileCount);\n\t\t} else {\n\t\t\treturn nls.localize('search.files.results', \"{0} results in {1} files\", resultCount, fileCount);\n\t\t}\n\t}\n\n\tprivate showSearchWithoutFolderMessage(): void {\n\t\tthis.searchWithoutFolderMessageElement = this.clearMessage();\n\n\t\tconst textEl = dom.append(this.searchWithoutFolderMessageElement,\n\t\t\t$('p', undefined, nls.localize('searchWithoutFolder', \"You have not opened or specified a folder. Only open files are currently searched - \")));\n\n\t\tconst openFolderButton = this.messageDisposables.add(new SearchLinkButton(\n\t\t\tnls.localize('openFolder', \"Open Folder\"),\n\t\t\t() => {\n\t\t\t\tthis.commandService.executeCommand(env.isMacintosh && env.isNative ? OpenFileFolderAction.ID : OpenFolderAction.ID).catch(err => errors.onUnexpectedError(err));\n\t\t\t}, this.hoverService));\n\t\tdom.append(textEl, openFolderButton.element);\n\t}\n\n\tprivate showEmptyStage(forceHideMessages = false): void {\n\t\tconst showingCancelled = (this.messagesElement.firstChild?.textContent?.indexOf(SEARCH_CANCELLED_MESSAGE) ?? -1) > -1;\n\n\t\t// clean up ui\n\t\t// this.replaceService.disposeAllReplacePreviews();\n\t\tif (showingCancelled || forceHideMessages || !this.configurationService.getValue<ISearchConfiguration>().search.searchOnType) {\n\t\t\t// when in search to type, don't preemptively hide, as it causes flickering and shifting of the live results\n\t\t\tdom.hide(this.messagesElement);\n\t\t}\n\n\t\tdom.show(this.resultsElement);\n\t\tthis.currentSelectedFileMatch = undefined;\n\t}\n\n\tprivate shouldOpenInNotebookEditor(match: Match, uri: URI): boolean {\n\t\t// Untitled files will return a false positive for getContributedNotebookTypes.\n\t\t// Since untitled files are already open, then untitled notebooks should return NotebookMatch results.\n\t\treturn match instanceof MatchInNotebook || (uri.scheme !== network.Schemas.untitled && this.notebookService.getContributedNotebookTypes(uri).length > 0);\n\t}\n\n\tprivate onFocus(lineMatch: Match, preserveFocus?: boolean, sideBySide?: boolean, pinned?: boolean): Promise<any> {\n\t\tconst useReplacePreview = this.configurationService.getValue<ISearchConfiguration>().search.useReplacePreview;\n\n\t\tconst resource = lineMatch instanceof Match ? lineMatch.parent().resource : (<FileMatch>lineMatch).resource;\n\t\treturn (useReplacePreview && this.viewModel.isReplaceActive() && !!this.viewModel.replaceString && !(this.shouldOpenInNotebookEditor(lineMatch, resource))) ?\n\t\t\tthis.replaceService.openReplacePreview(lineMatch, preserveFocus, sideBySide, pinned) :\n\t\t\tthis.open(lineMatch, preserveFocus, sideBySide, pinned, resource);\n\t}\n\n\tasync open(element: FileMatchOrMatch, preserveFocus?: boolean, sideBySide?: boolean, pinned?: boolean, resourceInput?: URI): Promise<void> {\n\t\tconst selection = getEditorSelectionFromMatch(element, this.viewModel);\n\t\tconst oldParentMatches = element instanceof Match ? element.parent().matches() : [];\n\t\tconst resource = resourceInput ?? (element instanceof Match ? element.parent().resource : (<FileMatch>element).resource);\n\t\tlet editor: IEditorPane | undefined;\n\n\t\tconst options = {\n\t\t\tpreserveFocus,\n\t\t\tpinned,\n\t\t\tselection,\n\t\t\trevealIfVisible: true,\n\t\t};\n\n\t\ttry {\n\t\t\teditor = await this.editorService.openEditor({\n\t\t\t\tresource: resource,\n\t\t\t\toptions,\n\t\t\t}, sideBySide ? SIDE_GROUP : ACTIVE_GROUP);\n\n\t\t\tconst editorControl = editor?.getControl();\n\t\t\tif (element instanceof Match && preserveFocus && isCodeEditor(editorControl)) {\n\t\t\t\tthis.viewModel.searchResult.rangeHighlightDecorations.highlightRange(\n\t\t\t\t\teditorControl.getModel()!,\n\t\t\t\t\telement.range()\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.viewModel.searchResult.rangeHighlightDecorations.removeHighlightRange();\n\t\t\t}\n\t\t} catch (err) {\n\t\t\terrors.onUnexpectedError(err);\n\t\t\treturn;\n\t\t}\n\n\t\tif (editor instanceof NotebookEditor) {\n\t\t\tconst elemParent = element.parent() as FileMatch;\n\t\t\tif (element instanceof Match) {\n\t\t\t\tif (element instanceof MatchInNotebook) {\n\t\t\t\t\telement.parent().showMatch(element);\n\t\t\t\t} else {\n\t\t\t\t\tconst editorWidget = editor.getControl();\n\t\t\t\t\tif (editorWidget) {\n\t\t\t\t\t\t// Ensure that the editor widget is binded. If if is, then this should return immediately.\n\t\t\t\t\t\t// Otherwise, it will bind the widget.\n\t\t\t\t\t\telemParent.bindNotebookEditorWidget(editorWidget);\n\t\t\t\t\t\tawait elemParent.updateMatchesForEditorWidget();\n\n\t\t\t\t\t\tconst matchIndex = oldParentMatches.findIndex(e => e.id() === element.id());\n\t\t\t\t\t\tconst matches = elemParent.matches();\n\t\t\t\t\t\tconst match = matchIndex >= matches.length ? matches[matches.length - 1] : matches[matchIndex];\n\n\t\t\t\t\t\tif (match instanceof MatchInNotebook) {\n\t\t\t\t\t\t\telemParent.showMatch(match);\n\t\t\t\t\t\t\tif (!this.tree.getFocus().includes(match) || !this.tree.getSelection().includes(match)) {\n\t\t\t\t\t\t\t\tthis.tree.setSelection([match], getSelectionKeyboardEvent());\n\t\t\t\t\t\t\t\tthis.tree.setFocus([match]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\topenEditorWithMultiCursor(element: FileMatchOrMatch): Promise<void> {\n\t\tconst resource = element instanceof Match ? element.parent().resource : (<FileMatch>element).resource;\n\t\treturn this.editorService.openEditor({\n\t\t\tresource: resource,\n\t\t\toptions: {\n\t\t\t\tpreserveFocus: false,\n\t\t\t\tpinned: true,\n\t\t\t\trevealIfVisible: true\n\t\t\t}\n\t\t}).then(editor => {\n\t\t\tif (editor) {\n\t\t\t\tlet fileMatch = null;\n\t\t\t\tif (element instanceof FileMatch) {\n\t\t\t\t\tfileMatch = element;\n\t\t\t\t}\n\t\t\t\telse if (element instanceof Match) {\n\t\t\t\t\tfileMatch = element.parent();\n\t\t\t\t}\n\n\t\t\t\tif (fileMatch) {\n\t\t\t\t\tconst selections = fileMatch.matches().map(m => new Selection(m.range().startLineNumber, m.range().startColumn, m.range().endLineNumber, m.range().endColumn));\n\t\t\t\t\tconst codeEditor = getCodeEditor(editor.getControl());\n\t\t\t\t\tif (codeEditor) {\n\t\t\t\t\t\tconst multiCursorController = MultiCursorSelectionController.get(codeEditor);\n\t\t\t\t\t\tmultiCursorController?.selectAllUsingSelections(selections);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.viewModel.searchResult.rangeHighlightDecorations.removeHighlightRange();\n\t\t}, errors.onUnexpectedError);\n\t}\n\n\tprivate onUntitledDidDispose(resource: URI): void {\n\t\tif (!this.viewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\t// remove search results from this resource as it got disposed\n\t\tlet matches = this.viewModel.searchResult.matches();\n\t\tfor (let i = 0, len = matches.length; i < len; i++) {\n\t\t\tif (resource.toString() === matches[i].resource.toString()) {\n\t\t\t\tthis.viewModel.searchResult.remove(matches[i]);\n\t\t\t}\n\t\t}\n\t\tmatches = this.viewModel.searchResult.matches(true);\n\t\tfor (let i = 0, len = matches.length; i < len; i++) {\n\t\t\tif (resource.toString() === matches[i].resource.toString()) {\n\t\t\t\tthis.viewModel.searchResult.remove(matches[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onFilesChanged(e: FileChangesEvent): void {\n\t\tif (!this.viewModel || (this.searchConfig.sortOrder !== SearchSortOrder.Modified && !e.gotDeleted())) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst matches = this.viewModel.searchResult.matches();\n\t\tif (e.gotDeleted()) {\n\t\t\tconst deletedMatches = matches.filter(m => e.contains(m.resource, FileChangeType.DELETED));\n\n\t\t\tthis.viewModel.searchResult.remove(deletedMatches);\n\t\t} else {\n\t\t\t// Check if the changed file contained matches\n\t\t\tconst changedMatches = matches.filter(m => e.contains(m.resource));\n\t\t\tif (changedMatches.length && this.searchConfig.sortOrder === SearchSortOrder.Modified) {\n\t\t\t\t// No matches need to be removed, but modified files need to have their file stat updated.\n\t\t\t\tthis.updateFileStats(changedMatches).then(() => this.refreshTree());\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate get searchConfig(): ISearchConfigurationProperties {\n\t\treturn this.configurationService.getValue<ISearchConfigurationProperties>('search');\n\t}\n\n\tprivate clearHistory(): void {\n\t\tthis.searchWidget.clearHistory();\n\t\tthis.inputPatternExcludes.clearHistory();\n\t\tthis.inputPatternIncludes.clearHistory();\n\t}\n\n\tpublic override saveState(): void {\n\t\t// This can be called before renderBody() method gets called for the first time\n\t\t// if we move the searchView inside another viewPaneContainer\n\t\tif (!this.searchWidget) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst patternExcludes = this.inputPatternExcludes?.getValue().trim() ?? '';\n\t\tconst patternIncludes = this.inputPatternIncludes?.getValue().trim() ?? '';\n\t\tconst onlyOpenEditors = this.inputPatternIncludes?.onlySearchInOpenEditors() ?? false;\n\t\tconst useExcludesAndIgnoreFiles = this.inputPatternExcludes?.useExcludesAndIgnoreFiles() ?? true;\n\t\tconst preserveCase = this.viewModel.preserveCase;\n\n\t\tif (this.searchWidget.searchInput) {\n\t\t\tconst isRegex = this.searchWidget.searchInput.getRegex();\n\t\t\tconst isWholeWords = this.searchWidget.searchInput.getWholeWords();\n\t\t\tconst isCaseSensitive = this.searchWidget.searchInput.getCaseSensitive();\n\t\t\tconst contentPattern = this.searchWidget.searchInput.getValue();\n\n\t\t\tconst isInNotebookCellInput = this.searchWidget.getNotebookFilters().codeInput;\n\t\t\tconst isInNotebookCellOutput = this.searchWidget.getNotebookFilters().codeOutput;\n\t\t\tconst isInNotebookMarkdownInput = this.searchWidget.getNotebookFilters().markupInput;\n\t\t\tconst isInNotebookMarkdownPreview = this.searchWidget.getNotebookFilters().markupPreview;\n\n\t\t\tthis.viewletState['query.contentPattern'] = contentPattern;\n\t\t\tthis.viewletState['query.regex'] = isRegex;\n\t\t\tthis.viewletState['query.wholeWords'] = isWholeWords;\n\t\t\tthis.viewletState['query.caseSensitive'] = isCaseSensitive;\n\n\t\t\tthis.viewletState['query.isInNotebookMarkdownInput'] = isInNotebookMarkdownInput;\n\t\t\tthis.viewletState['query.isInNotebookMarkdownPreview'] = isInNotebookMarkdownPreview;\n\t\t\tthis.viewletState['query.isInNotebookCellInput'] = isInNotebookCellInput;\n\t\t\tthis.viewletState['query.isInNotebookCellOutput'] = isInNotebookCellOutput;\n\t\t}\n\n\t\tthis.viewletState['query.folderExclusions'] = patternExcludes;\n\t\tthis.viewletState['query.folderIncludes'] = patternIncludes;\n\t\tthis.viewletState['query.useExcludesAndIgnoreFiles'] = useExcludesAndIgnoreFiles;\n\t\tthis.viewletState['query.preserveCase'] = preserveCase;\n\t\tthis.viewletState['query.onlyOpenEditors'] = onlyOpenEditors;\n\n\t\tconst isReplaceShown = this.searchAndReplaceWidget.isReplaceShown();\n\t\tthis.viewletState['view.showReplace'] = isReplaceShown;\n\t\tthis.viewletState['view.treeLayout'] = this.isTreeLayoutViewVisible;\n\t\tthis.viewletState['query.replaceText'] = isReplaceShown && this.searchWidget.getReplaceValue();\n\n\t\tthis._saveSearchHistoryService();\n\n\t\tthis.memento.saveMemento();\n\n\t\tsuper.saveState();\n\t}\n\n\tprivate _saveSearchHistoryService() {\n\t\tif (this.searchWidget === undefined) {\n\t\t\treturn;\n\t\t}\n\t\tconst history: ISearchHistoryValues = Object.create(null);\n\n\t\tconst searchHistory = this.searchWidget.getSearchHistory();\n\t\tif (searchHistory && searchHistory.length) {\n\t\t\thistory.search = searchHistory;\n\t\t}\n\n\t\tconst replaceHistory = this.searchWidget.getReplaceHistory();\n\t\tif (replaceHistory && replaceHistory.length) {\n\t\t\thistory.replace = replaceHistory;\n\t\t}\n\n\t\tconst patternExcludesHistory = this.inputPatternExcludes.getHistory();\n\t\tif (patternExcludesHistory && patternExcludesHistory.length) {\n\t\t\thistory.exclude = patternExcludesHistory;\n\t\t}\n\n\t\tconst patternIncludesHistory = this.inputPatternIncludes.getHistory();\n\t\tif (patternIncludesHistory && patternIncludesHistory.length) {\n\t\t\thistory.include = patternIncludesHistory;\n\t\t}\n\n\t\tthis.searchHistoryService.save(history);\n\t}\n\n\tprivate async retrieveFileStats(): Promise<void> {\n\t\tconst files = this.searchResult.matches(this.aiResultsVisible).filter(f => !f.fileStat).map(f => f.resolveFileStat(this.fileService));\n\t\tawait Promise.all(files);\n\t}\n\n\tprivate async updateFileStats(elements: FileMatch[]): Promise<void> {\n\t\tconst files = elements.map(f => f.resolveFileStat(this.fileService));\n\t\tawait Promise.all(files);\n\t}\n\n\tprivate removeFileStats(): void {\n\t\tfor (const fileMatch of this.searchResult.matches()) {\n\t\t\tfileMatch.fileStat = undefined;\n\t\t}\n\t\tfor (const fileMatch of this.searchResult.matches(true)) {\n\t\t\tfileMatch.fileStat = undefined;\n\t\t}\n\t}\n\n\toverride dispose(): void {\n\t\tthis.isDisposed = true;\n\t\tthis.saveState();\n\t\tsuper.dispose();\n\t}\n}\n\n\nclass SearchLinkButton extends Disposable {\n\tpublic readonly element: HTMLElement;\n\n\tconstructor(label: string, handler: (e: dom.EventLike) => unknown, hoverService: IHoverService, tooltip?: string) {\n\t\tsuper();\n\t\tthis.element = $('a.pointer', { tabindex: 0 }, label);\n\t\tthis._register(hoverService.setupManagedHover(getDefaultHoverDelegate('mouse'), this.element, tooltip));\n\t\tthis.addEventHandlers(handler);\n\t}\n\n\tprivate addEventHandlers(handler: (e: dom.EventLike) => unknown): void {\n\t\tconst wrappedHandler = (e: dom.EventLike) => {\n\t\t\tdom.EventHelper.stop(e, false);\n\t\t\thandler(e);\n\t\t};\n\n\t\tthis._register(dom.addDisposableListener(this.element, dom.EventType.CLICK, wrappedHandler));\n\t\tthis._register(dom.addDisposableListener(this.element, dom.EventType.KEY_DOWN, e => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\tif (event.equals(KeyCode.Space) || event.equals(KeyCode.Enter)) {\n\t\t\t\twrappedHandler(e);\n\t\t\t\tevent.preventDefault();\n\t\t\t\tevent.stopPropagation();\n\t\t\t}\n\t\t}));\n\t}\n}\n\nexport function getEditorSelectionFromMatch(element: FileMatchOrMatch, viewModel: SearchModel): any {\n\tlet match: Match | null = null;\n\tif (element instanceof Match) {\n\t\tmatch = element;\n\t}\n\tif (element instanceof FileMatch && element.count() > 0) {\n\t\tmatch = element.matches()[element.matches().length - 1];\n\t}\n\tif (match) {\n\t\tconst range = match.range();\n\t\tif (viewModel.isReplaceActive() && !!viewModel.replaceString) {\n\t\t\tconst replaceString = match.replaceString;\n\t\t\treturn {\n\t\t\t\tstartLineNumber: range.startLineNumber,\n\t\t\t\tstartColumn: range.startColumn,\n\t\t\t\tendLineNumber: range.startLineNumber,\n\t\t\t\tendColumn: range.startColumn + replaceString.length\n\t\t\t};\n\t\t}\n\t\treturn range;\n\t}\n\treturn undefined;\n}\n\nexport function getSelectionTextFromEditor(allowUnselectedWord: boolean, activeEditor: IEditor): string | null {\n\n\tlet editor = activeEditor;\n\n\tif (isDiffEditor(editor)) {\n\t\tif (editor.getOriginalEditor().hasTextFocus()) {\n\t\t\teditor = editor.getOriginalEditor();\n\t\t} else {\n\t\t\teditor = editor.getModifiedEditor();\n\t\t}\n\t}\n\n\tif (!isCodeEditor(editor) || !editor.hasModel()) {\n\t\treturn null;\n\t}\n\n\tconst range = editor.getSelection();\n\tif (!range) {\n\t\treturn null;\n\t}\n\n\tif (range.isEmpty()) {\n\t\tif (allowUnselectedWord) {\n\t\t\tconst wordAtPosition = editor.getModel().getWordAtPosition(range.getStartPosition());\n\t\t\treturn wordAtPosition?.word ?? null;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tlet searchText = '';\n\tfor (let i = range.startLineNumber; i <= range.endLineNumber; i++) {\n\t\tlet lineText = editor.getModel().getLineContent(i);\n\t\tif (i === range.endLineNumber) {\n\t\t\tlineText = lineText.substring(0, range.endColumn - 1);\n\t\t}\n\n\t\tif (i === range.startLineNumber) {\n\t\t\tlineText = lineText.substring(range.startColumn - 1);\n\t\t}\n\n\t\tif (i !== range.startLineNumber) {\n\t\t\tlineText = '\\n' + lineText;\n\t\t}\n\n\t\tsearchText += lineText;\n\t}\n\n\treturn searchText;\n}\n"],
  "mappings": "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",
  "names": ["SearchViewPosition"]
}
