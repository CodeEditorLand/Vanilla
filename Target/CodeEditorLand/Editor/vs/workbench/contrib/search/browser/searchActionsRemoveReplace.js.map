{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/search/browser/searchActionsRemoveReplace.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { ITreeNavigator } from \"../../../../base/browser/ui/tree/tree.js\";\nimport { equals } from \"../../../../base/common/arrays.js\";\nimport { KeyCode, KeyMod } from \"../../../../base/common/keyCodes.js\";\nimport * as nls from \"../../../../nls.js\";\nimport {\n\tAction2,\n\tMenuId,\n\tregisterAction2,\n} from \"../../../../platform/actions/common/actions.js\";\nimport { IConfigurationService } from \"../../../../platform/configuration/common/configuration.js\";\nimport { ContextKeyExpr } from \"../../../../platform/contextkey/common/contextkey.js\";\nimport type { ServicesAccessor } from \"../../../../platform/instantiation/common/instantiation.js\";\nimport { KeybindingWeight } from \"../../../../platform/keybinding/common/keybindingsRegistry.js\";\nimport {\n\ttype WorkbenchCompressibleObjectTree,\n\tgetSelectionKeyboardEvent,\n} from \"../../../../platform/list/browser/listService.js\";\nimport { IUriIdentityService } from \"../../../../platform/uriIdentity/common/uriIdentity.js\";\nimport { IEditorService } from \"../../../services/editor/common/editorService.js\";\nimport type {\n\tISearchConfiguration,\n\tISearchConfigurationProperties,\n} from \"../../../services/search/common/search.js\";\nimport { IViewsService } from \"../../../services/views/common/viewsService.js\";\nimport * as Constants from \"../common/constants.js\";\nimport { IReplaceService } from \"./replace.js\";\nimport {\n\tcategory,\n\tgetElementsToOperateOn,\n\tgetSearchView,\n\tshouldRefocus,\n} from \"./searchActionsBase.js\";\nimport { searchRemoveIcon, searchReplaceIcon } from \"./searchIcons.js\";\nimport {\n\tFileMatch,\n\tFolderMatch,\n\tMatch,\n\tMatchInNotebook,\n\ttype RenderableMatch,\n\tSearchResult,\n\tarrayContainsElementOrParent,\n} from \"./searchModel.js\";\nimport type { SearchView } from \"./searchView.js\";\n\n//#region Interfaces\nexport interface ISearchActionContext {\n\treadonly viewer: WorkbenchCompressibleObjectTree<RenderableMatch>;\n\treadonly element: RenderableMatch;\n}\n\nexport interface IFindInFilesArgs {\n\tquery?: string;\n\treplace?: string;\n\tpreserveCase?: boolean;\n\ttriggerSearch?: boolean;\n\tfilesToInclude?: string;\n\tfilesToExclude?: string;\n\tisRegex?: boolean;\n\tisCaseSensitive?: boolean;\n\tmatchWholeWord?: boolean;\n\tuseExcludeSettingsAndIgnoreFiles?: boolean;\n\tonlyOpenEditors?: boolean;\n}\n\n//#endregion\n\n//#region Actions\nregisterAction2(\n\tclass RemoveAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: Constants.SearchCommandIds.RemoveActionId,\n\t\t\t\ttitle: nls.localize2(\"RemoveAction.label\", \"Dismiss\"),\n\t\t\t\tcategory,\n\t\t\t\ticon: searchRemoveIcon,\n\t\t\t\tkeybinding: {\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tConstants.SearchContext.SearchViewVisibleKey,\n\t\t\t\t\t\tConstants.SearchContext.FileMatchOrMatchFocusKey,\n\t\t\t\t\t),\n\t\t\t\t\tprimary: KeyCode.Delete,\n\t\t\t\t\tmac: {\n\t\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Backspace,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tmenu: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.SearchContext,\n\t\t\t\t\t\tgroup: \"search\",\n\t\t\t\t\t\torder: 2,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.SearchActionMenu,\n\t\t\t\t\t\tgroup: \"inline\",\n\t\t\t\t\t\torder: 2,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t}\n\n\t\trun(\n\t\t\taccessor: ServicesAccessor,\n\t\t\tcontext: ISearchActionContext | undefined,\n\t\t): void {\n\t\t\tconst viewsService = accessor.get(IViewsService);\n\t\t\tconst configurationService = accessor.get(IConfigurationService);\n\t\t\tconst searchView = getSearchView(viewsService);\n\n\t\t\tif (!searchView) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet element = context?.element;\n\t\t\tlet viewer = context?.viewer;\n\t\t\tif (!viewer) {\n\t\t\t\tviewer = searchView.getControl();\n\t\t\t}\n\t\t\tif (!element) {\n\t\t\t\telement = viewer.getFocus()[0] ?? undefined;\n\t\t\t}\n\n\t\t\tconst elementsToRemove = getElementsToOperateOn(\n\t\t\t\tviewer,\n\t\t\t\telement,\n\t\t\t\tconfigurationService.getValue<ISearchConfigurationProperties>(\n\t\t\t\t\t\"search\",\n\t\t\t\t),\n\t\t\t);\n\t\t\tlet focusElement = viewer.getFocus()[0] ?? undefined;\n\n\t\t\tif (elementsToRemove.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!focusElement || focusElement instanceof SearchResult) {\n\t\t\t\tfocusElement = element;\n\t\t\t}\n\n\t\t\tlet nextFocusElement;\n\t\t\tconst shouldRefocusMatch = shouldRefocus(\n\t\t\t\telementsToRemove,\n\t\t\t\tfocusElement,\n\t\t\t);\n\t\t\tif (focusElement && shouldRefocusMatch) {\n\t\t\t\tnextFocusElement = getElementToFocusAfterRemoved(\n\t\t\t\t\tviewer,\n\t\t\t\t\tfocusElement,\n\t\t\t\t\telementsToRemove,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst searchResult = searchView.searchResult;\n\n\t\t\tif (searchResult) {\n\t\t\t\tsearchResult.batchRemove(elementsToRemove);\n\t\t\t}\n\n\t\t\tif (focusElement && shouldRefocusMatch) {\n\t\t\t\tif (!nextFocusElement) {\n\t\t\t\t\tnextFocusElement = getLastNodeFromSameType(\n\t\t\t\t\t\tviewer,\n\t\t\t\t\t\tfocusElement,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tnextFocusElement &&\n\t\t\t\t\t!arrayContainsElementOrParent(\n\t\t\t\t\t\tnextFocusElement,\n\t\t\t\t\t\telementsToRemove,\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tviewer.reveal(nextFocusElement);\n\t\t\t\t\tviewer.setFocus(\n\t\t\t\t\t\t[nextFocusElement],\n\t\t\t\t\t\tgetSelectionKeyboardEvent(),\n\t\t\t\t\t);\n\t\t\t\t\tviewer.setSelection(\n\t\t\t\t\t\t[nextFocusElement],\n\t\t\t\t\t\tgetSelectionKeyboardEvent(),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} else if (!equals(viewer.getFocus(), viewer.getSelection())) {\n\t\t\t\tviewer.setSelection(viewer.getFocus());\n\t\t\t}\n\n\t\t\tviewer.domFocus();\n\t\t\treturn;\n\t\t}\n\t},\n);\n\nregisterAction2(\n\tclass ReplaceAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: Constants.SearchCommandIds.ReplaceActionId,\n\t\t\t\ttitle: nls.localize2(\"match.replace.label\", \"Replace\"),\n\t\t\t\tcategory,\n\t\t\t\tkeybinding: {\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tConstants.SearchContext.SearchViewVisibleKey,\n\t\t\t\t\t\tConstants.SearchContext.ReplaceActiveKey,\n\t\t\t\t\t\tConstants.SearchContext.MatchFocusKey,\n\t\t\t\t\t\tConstants.SearchContext.IsEditableItemKey,\n\t\t\t\t\t),\n\t\t\t\t\tprimary: KeyMod.Shift | KeyMod.CtrlCmd | KeyCode.Digit1,\n\t\t\t\t},\n\t\t\t\ticon: searchReplaceIcon,\n\t\t\t\tmenu: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.SearchContext,\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\tConstants.SearchContext.ReplaceActiveKey,\n\t\t\t\t\t\t\tConstants.SearchContext.MatchFocusKey,\n\t\t\t\t\t\t\tConstants.SearchContext.IsEditableItemKey,\n\t\t\t\t\t\t),\n\t\t\t\t\t\tgroup: \"search\",\n\t\t\t\t\t\torder: 1,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.SearchActionMenu,\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\tConstants.SearchContext.ReplaceActiveKey,\n\t\t\t\t\t\t\tConstants.SearchContext.MatchFocusKey,\n\t\t\t\t\t\t\tConstants.SearchContext.IsEditableItemKey,\n\t\t\t\t\t\t),\n\t\t\t\t\t\tgroup: \"inline\",\n\t\t\t\t\t\torder: 1,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t}\n\n\t\toverride async run(\n\t\t\taccessor: ServicesAccessor,\n\t\t\tcontext: ISearchActionContext | undefined,\n\t\t): Promise<any> {\n\t\t\treturn performReplace(accessor, context);\n\t\t}\n\t},\n);\n\nregisterAction2(\n\tclass ReplaceAllAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: Constants.SearchCommandIds.ReplaceAllInFileActionId,\n\t\t\t\ttitle: nls.localize2(\"file.replaceAll.label\", \"Replace All\"),\n\t\t\t\tcategory,\n\t\t\t\tkeybinding: {\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tConstants.SearchContext.SearchViewVisibleKey,\n\t\t\t\t\t\tConstants.SearchContext.ReplaceActiveKey,\n\t\t\t\t\t\tConstants.SearchContext.FileFocusKey,\n\t\t\t\t\t\tConstants.SearchContext.IsEditableItemKey,\n\t\t\t\t\t),\n\t\t\t\t\tprimary: KeyMod.Shift | KeyMod.CtrlCmd | KeyCode.Digit1,\n\t\t\t\t\tsecondary: [KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.Enter],\n\t\t\t\t},\n\t\t\t\ticon: searchReplaceIcon,\n\t\t\t\tmenu: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.SearchContext,\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\tConstants.SearchContext.ReplaceActiveKey,\n\t\t\t\t\t\t\tConstants.SearchContext.FileFocusKey,\n\t\t\t\t\t\t\tConstants.SearchContext.IsEditableItemKey,\n\t\t\t\t\t\t),\n\t\t\t\t\t\tgroup: \"search\",\n\t\t\t\t\t\torder: 1,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.SearchActionMenu,\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\tConstants.SearchContext.ReplaceActiveKey,\n\t\t\t\t\t\t\tConstants.SearchContext.FileFocusKey,\n\t\t\t\t\t\t\tConstants.SearchContext.IsEditableItemKey,\n\t\t\t\t\t\t),\n\t\t\t\t\t\tgroup: \"inline\",\n\t\t\t\t\t\torder: 1,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t}\n\n\t\toverride async run(\n\t\t\taccessor: ServicesAccessor,\n\t\t\tcontext: ISearchActionContext | undefined,\n\t\t): Promise<any> {\n\t\t\treturn performReplace(accessor, context);\n\t\t}\n\t},\n);\n\nregisterAction2(\n\tclass ReplaceAllInFolderAction extends Action2 {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: Constants.SearchCommandIds.ReplaceAllInFolderActionId,\n\t\t\t\ttitle: nls.localize2(\"file.replaceAll.label\", \"Replace All\"),\n\t\t\t\tcategory,\n\t\t\t\tkeybinding: {\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tConstants.SearchContext.SearchViewVisibleKey,\n\t\t\t\t\t\tConstants.SearchContext.ReplaceActiveKey,\n\t\t\t\t\t\tConstants.SearchContext.FolderFocusKey,\n\t\t\t\t\t\tConstants.SearchContext.IsEditableItemKey,\n\t\t\t\t\t),\n\t\t\t\t\tprimary: KeyMod.Shift | KeyMod.CtrlCmd | KeyCode.Digit1,\n\t\t\t\t\tsecondary: [KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.Enter],\n\t\t\t\t},\n\t\t\t\ticon: searchReplaceIcon,\n\t\t\t\tmenu: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.SearchContext,\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\tConstants.SearchContext.ReplaceActiveKey,\n\t\t\t\t\t\t\tConstants.SearchContext.FolderFocusKey,\n\t\t\t\t\t\t\tConstants.SearchContext.IsEditableItemKey,\n\t\t\t\t\t\t),\n\t\t\t\t\t\tgroup: \"search\",\n\t\t\t\t\t\torder: 1,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.SearchActionMenu,\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\tConstants.SearchContext.ReplaceActiveKey,\n\t\t\t\t\t\t\tConstants.SearchContext.FolderFocusKey,\n\t\t\t\t\t\t\tConstants.SearchContext.IsEditableItemKey,\n\t\t\t\t\t\t),\n\t\t\t\t\t\tgroup: \"inline\",\n\t\t\t\t\t\torder: 1,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t}\n\n\t\toverride async run(\n\t\t\taccessor: ServicesAccessor,\n\t\t\tcontext: ISearchActionContext | undefined,\n\t\t): Promise<any> {\n\t\t\treturn performReplace(accessor, context);\n\t\t}\n\t},\n);\n\n//#endregion\n\n//#region Helpers\n\nfunction performReplace(\n\taccessor: ServicesAccessor,\n\tcontext: ISearchActionContext | undefined,\n): void {\n\tconst configurationService = accessor.get(IConfigurationService);\n\tconst viewsService = accessor.get(IViewsService);\n\n\tconst viewlet: SearchView | undefined = getSearchView(viewsService);\n\tconst viewer: WorkbenchCompressibleObjectTree<RenderableMatch> | undefined =\n\t\tcontext?.viewer ?? viewlet?.getControl();\n\n\tif (!viewer) {\n\t\treturn;\n\t}\n\tconst element: RenderableMatch | null =\n\t\tcontext?.element ?? viewer.getFocus()[0];\n\n\t// since multiple elements can be selected, we need to check the type of the FolderMatch/FileMatch/Match before we perform the replace.\n\tconst elementsToReplace = getElementsToOperateOn(\n\t\tviewer,\n\t\telement ?? undefined,\n\t\tconfigurationService.getValue<ISearchConfigurationProperties>(\"search\"),\n\t);\n\tlet focusElement = viewer.getFocus()[0];\n\n\tif (\n\t\t!focusElement ||\n\t\t(focusElement &&\n\t\t\t!arrayContainsElementOrParent(focusElement, elementsToReplace)) ||\n\t\tfocusElement instanceof SearchResult\n\t) {\n\t\tfocusElement = element;\n\t}\n\n\tif (elementsToReplace.length === 0) {\n\t\treturn;\n\t}\n\tlet nextFocusElement;\n\tif (focusElement) {\n\t\tnextFocusElement = getElementToFocusAfterRemoved(\n\t\t\tviewer,\n\t\t\tfocusElement,\n\t\t\telementsToReplace,\n\t\t);\n\t}\n\n\tconst searchResult = viewlet?.searchResult;\n\n\tif (searchResult) {\n\t\tsearchResult.batchReplace(elementsToReplace);\n\t}\n\n\tif (focusElement) {\n\t\tif (!nextFocusElement) {\n\t\t\tnextFocusElement = getLastNodeFromSameType(viewer, focusElement);\n\t\t}\n\n\t\tif (nextFocusElement) {\n\t\t\tviewer.reveal(nextFocusElement);\n\t\t\tviewer.setFocus([nextFocusElement], getSelectionKeyboardEvent());\n\t\t\tviewer.setSelection(\n\t\t\t\t[nextFocusElement],\n\t\t\t\tgetSelectionKeyboardEvent(),\n\t\t\t);\n\n\t\t\tif (nextFocusElement instanceof Match) {\n\t\t\t\tconst useReplacePreview =\n\t\t\t\t\tconfigurationService.getValue<ISearchConfiguration>().search\n\t\t\t\t\t\t.useReplacePreview;\n\t\t\t\tif (\n\t\t\t\t\t!useReplacePreview ||\n\t\t\t\t\thasToOpenFile(accessor, nextFocusElement) ||\n\t\t\t\t\tnextFocusElement instanceof MatchInNotebook\n\t\t\t\t) {\n\t\t\t\t\tviewlet?.open(nextFocusElement, true);\n\t\t\t\t} else {\n\t\t\t\t\taccessor\n\t\t\t\t\t\t.get(IReplaceService)\n\t\t\t\t\t\t.openReplacePreview(nextFocusElement, true);\n\t\t\t\t}\n\t\t\t} else if (nextFocusElement instanceof FileMatch) {\n\t\t\t\tviewlet?.open(nextFocusElement, true);\n\t\t\t}\n\t\t}\n\t}\n\n\tviewer.domFocus();\n}\n\nfunction hasToOpenFile(\n\taccessor: ServicesAccessor,\n\tcurrBottomElem: RenderableMatch,\n): boolean {\n\tif (!(currBottomElem instanceof Match)) {\n\t\treturn false;\n\t}\n\tconst activeEditor = accessor.get(IEditorService).activeEditor;\n\tconst file = activeEditor?.resource;\n\tif (file) {\n\t\treturn accessor\n\t\t\t.get(IUriIdentityService)\n\t\t\t.extUri.isEqual(file, currBottomElem.parent().resource);\n\t}\n\treturn false;\n}\n\nfunction compareLevels(elem1: RenderableMatch, elem2: RenderableMatch) {\n\tif (elem1 instanceof Match) {\n\t\tif (elem2 instanceof Match) {\n\t\t\treturn 0;\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\t} else if (elem1 instanceof FileMatch) {\n\t\tif (elem2 instanceof Match) {\n\t\t\treturn 1;\n\t\t} else if (elem2 instanceof FileMatch) {\n\t\t\treturn 0;\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\t} else {\n\t\t// FolderMatch\n\t\tif (elem2 instanceof FolderMatch) {\n\t\t\treturn 0;\n\t\t} else {\n\t\t\treturn 1;\n\t\t}\n\t}\n}\n\n/**\n * Returns element to focus after removing the given element\n */\nexport function getElementToFocusAfterRemoved(\n\tviewer: WorkbenchCompressibleObjectTree<RenderableMatch>,\n\telement: RenderableMatch,\n\telementsToRemove: RenderableMatch[],\n): RenderableMatch | undefined {\n\tconst navigator: ITreeNavigator<any> = viewer.navigate(element);\n\tif (element instanceof FolderMatch) {\n\t\twhile (\n\t\t\t!!navigator.next() &&\n\t\t\t(!(navigator.current() instanceof FolderMatch) ||\n\t\t\t\tarrayContainsElementOrParent(\n\t\t\t\t\tnavigator.current(),\n\t\t\t\t\telementsToRemove,\n\t\t\t\t))\n\t\t) {}\n\t} else if (element instanceof FileMatch) {\n\t\twhile (\n\t\t\t!!navigator.next() &&\n\t\t\t(!(navigator.current() instanceof FileMatch) ||\n\t\t\t\tarrayContainsElementOrParent(\n\t\t\t\t\tnavigator.current(),\n\t\t\t\t\telementsToRemove,\n\t\t\t\t))\n\t\t) {\n\t\t\tviewer.expand(navigator.current());\n\t\t}\n\t} else {\n\t\twhile (\n\t\t\tnavigator.next() &&\n\t\t\t(!(navigator.current() instanceof Match) ||\n\t\t\t\tarrayContainsElementOrParent(\n\t\t\t\t\tnavigator.current(),\n\t\t\t\t\telementsToRemove,\n\t\t\t\t))\n\t\t) {\n\t\t\tviewer.expand(navigator.current());\n\t\t}\n\t}\n\treturn navigator.current();\n}\n\n/***\n * Finds the last element in the tree with the same type as `element`\n */\nexport function getLastNodeFromSameType(\n\tviewer: WorkbenchCompressibleObjectTree<RenderableMatch>,\n\telement: RenderableMatch,\n): RenderableMatch | undefined {\n\tlet lastElem: RenderableMatch | null = viewer.lastVisibleElement ?? null;\n\n\twhile (lastElem) {\n\t\tconst compareVal = compareLevels(element, lastElem);\n\t\tif (compareVal === -1) {\n\t\t\tviewer.expand(lastElem);\n\t\t\tlastElem = viewer.lastVisibleElement;\n\t\t} else if (compareVal === 1) {\n\t\t\tlastElem = viewer.getParentElement(lastElem);\n\t\t} else {\n\t\t\treturn lastElem;\n\t\t}\n\t}\n\n\treturn undefined;\n}\n\n//#endregion\n"],
  "mappings": "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",
  "names": []
}
