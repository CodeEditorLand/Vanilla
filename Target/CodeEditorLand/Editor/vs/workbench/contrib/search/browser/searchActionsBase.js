import*as d from"../../../../base/browser/dom.js";import*as h from"../../../../nls.js";import{VIEW_ID as o}from"../../../services/search/common/search.js";import{FileMatch as a,FolderMatch as p,Match as c,searchComparer as f}from"./searchModel.js";const g=h.localize2("search","Search");function S(r){const e=l(r);return!!(e&&d.isAncestorOfActiveElement(e.getContainer()))}function M(r,e){return b(r,e)}function l(r){return r.getActiveViewWithId(o)}function V(r,e,n){let i=r.getSelection().filter(t=>t!==null).sort((t,s)=>f(t,s,n.sortOrder));return e&&!(i.length>1&&i.includes(e))&&(i=[e]),i}function v(r,e){return e?!e||r.includes(e)||u(r,e):!1}function u(r,e){for(const n of r)if(n instanceof a&&e instanceof c&&n.matches().includes(e)||n instanceof p&&(e instanceof a&&n.getDownstreamFileMatch(e.resource)||e instanceof c&&n.getDownstreamFileMatch(e.parent().resource)))return!0;return!1}function R(r,e){return r.openView(o,e).then(n=>n??void 0)}function b(r,e){return e?r+" ("+e.getLabel()+")":r}export{M as appendKeyBindingLabel,g as category,V as getElementsToOperateOn,l as getSearchView,S as isSearchViewFocused,R as openSearchView,v as shouldRefocus};
