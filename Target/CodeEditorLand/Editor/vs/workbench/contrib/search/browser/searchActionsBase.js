import*as d from"../../../../base/browser/dom.js";import"../../../../base/common/keybindings.js";import*as h from"../../../../nls.js";import"../../../../platform/list/browser/listService.js";import{VIEW_ID as o}from"../../../services/search/common/search.js";import"../../../services/views/common/viewsService.js";import{FileMatch as a,FolderMatch as f,Match as c,searchComparer as l}from"./searchModel.js";import"./searchView.js";const y=h.localize2("search","Search");function D(r){const e=p(r);return!!(e&&d.isAncestorOfActiveElement(e.getContainer()))}function F(r,e){return b(r,e)}function p(r){return r.getActiveViewWithId(o)}function K(r,e,n){let i=r.getSelection().filter(t=>t!==null).sort((t,s)=>l(t,s,n.sortOrder));return e&&!(i.length>1&&i.includes(e))&&(i=[e]),i}function A(r,e){return e?!e||r.includes(e)||u(r,e):!1}function u(r,e){for(const n of r)if(n instanceof a&&e instanceof c&&n.matches().includes(e)||n instanceof f&&(e instanceof a&&n.getDownstreamFileMatch(e.resource)||e instanceof c&&n.getDownstreamFileMatch(e.parent().resource)))return!0;return!1}function W(r,e){return r.openView(o,e).then(n=>n??void 0)}function b(r,e){return e?r+" ("+e.getLabel()+")":r}export{F as appendKeyBindingLabel,y as category,K as getElementsToOperateOn,p as getSearchView,D as isSearchViewFocused,W as openSearchView,A as shouldRefocus};
