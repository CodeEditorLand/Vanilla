{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/search/browser/searchWidget.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from \"../../../../base/browser/dom.js\";\nimport type { IKeyboardEvent } from \"../../../../base/browser/keyboardEvent.js\";\nimport { ActionBar } from \"../../../../base/browser/ui/actionbar/actionbar.js\";\nimport {\n\tButton,\n\ttype IButtonOptions,\n} from \"../../../../base/browser/ui/button/button.js\";\nimport type { IFindInputOptions } from \"../../../../base/browser/ui/findinput/findInput.js\";\nimport type { ReplaceInput } from \"../../../../base/browser/ui/findinput/replaceInput.js\";\nimport { getDefaultHoverDelegate } from \"../../../../base/browser/ui/hover/hoverDelegateFactory.js\";\nimport {\n\ttype IInputBoxStyles,\n\ttype IMessage,\n\tInputBox,\n} from \"../../../../base/browser/ui/inputbox/inputBox.js\";\nimport {\n\ttype IToggleStyles,\n\tToggle,\n} from \"../../../../base/browser/ui/toggle/toggle.js\";\nimport { Widget } from \"../../../../base/browser/ui/widget.js\";\nimport { Action } from \"../../../../base/common/actions.js\";\nimport { Delayer } from \"../../../../base/common/async.js\";\nimport { Emitter, type Event } from \"../../../../base/common/event.js\";\nimport { KeyCode, KeyMod } from \"../../../../base/common/keyCodes.js\";\nimport {\n\ttype IDisposable,\n\tMutableDisposable,\n} from \"../../../../base/common/lifecycle.js\";\nimport { isMacintosh } from \"../../../../base/common/platform.js\";\nimport { ThemeIcon } from \"../../../../base/common/themables.js\";\nimport { CONTEXT_FIND_WIDGET_NOT_VISIBLE } from \"../../../../editor/contrib/find/browser/findModel.js\";\nimport * as nls from \"../../../../nls.js\";\nimport { IAccessibilityService } from \"../../../../platform/accessibility/common/accessibility.js\";\nimport { IClipboardService } from \"../../../../platform/clipboard/common/clipboardService.js\";\nimport { IConfigurationService } from \"../../../../platform/configuration/common/configuration.js\";\nimport {\n\tContextKeyExpr,\n\ttype IContextKey,\n\tIContextKeyService,\n} from \"../../../../platform/contextkey/common/contextkey.js\";\nimport {\n\tIContextMenuService,\n\tIContextViewService,\n} from \"../../../../platform/contextview/browser/contextView.js\";\nimport { ContextScopedReplaceInput } from \"../../../../platform/history/browser/contextScopedHistoryWidget.js\";\nimport { showHistoryKeybindingHint } from \"../../../../platform/history/browser/historyWidgetKeybindingHint.js\";\nimport { IInstantiationService } from \"../../../../platform/instantiation/common/instantiation.js\";\nimport { IKeybindingService } from \"../../../../platform/keybinding/common/keybinding.js\";\nimport {\n\tKeybindingWeight,\n\tKeybindingsRegistry,\n} from \"../../../../platform/keybinding/common/keybindingsRegistry.js\";\nimport {\n\tdefaultInputBoxStyles,\n\tdefaultToggleStyles,\n} from \"../../../../platform/theme/browser/defaultStyles.js\";\nimport { GroupModelChangeKind } from \"../../../common/editor.js\";\nimport { IEditorService } from \"../../../services/editor/common/editorService.js\";\nimport type { ISearchConfigurationProperties } from \"../../../services/search/common/search.js\";\nimport { IViewsService } from \"../../../services/views/common/viewsService.js\";\nimport { NotebookFindFilters } from \"../../notebook/browser/contrib/find/findFilters.js\";\nimport { NotebookFindScopeType } from \"../../notebook/common/notebookCommon.js\";\nimport { NotebookEditorInput } from \"../../notebook/common/notebookEditorInput.js\";\nimport { ToggleSearchEditorContextLinesCommandId } from \"../../searchEditor/browser/constants.js\";\nimport * as Constants from \"../common/constants.js\";\nimport {\n\tappendKeyBindingLabel,\n\tgetSearchView,\n\tisSearchViewFocused,\n} from \"./searchActionsBase.js\";\nimport { SearchFindInput } from \"./searchFindInput.js\";\nimport {\n\tsearchHideReplaceIcon,\n\tsearchReplaceAllIcon,\n\tsearchShowContextIcon,\n\tsearchShowReplaceIcon,\n} from \"./searchIcons.js\";\n\n/** Specified in searchview.css */\nconst SingleLineInputHeight = 26;\n\nexport interface ISearchWidgetOptions {\n\tvalue?: string;\n\treplaceValue?: string;\n\tisRegex?: boolean;\n\tisCaseSensitive?: boolean;\n\tisWholeWords?: boolean;\n\tsearchHistory?: string[];\n\treplaceHistory?: string[];\n\tpreserveCase?: boolean;\n\t_hideReplaceToggle?: boolean; // TODO: Search Editor's replace experience\n\tshowContextToggle?: boolean;\n\tinputBoxStyles: IInputBoxStyles;\n\ttoggleStyles: IToggleStyles;\n\tnotebookOptions?: NotebookToggleState;\n\tinitialAIButtonVisibility?: boolean;\n}\n\ninterface NotebookToggleState {\n\tisInNotebookMarkdownInput: boolean;\n\tisInNotebookMarkdownPreview: boolean;\n\tisInNotebookCellInput: boolean;\n\tisInNotebookCellOutput: boolean;\n}\n\nclass ReplaceAllAction extends Action {\n\tstatic readonly ID: string = \"search.action.replaceAll\";\n\n\tconstructor(private _searchWidget: SearchWidget) {\n\t\tsuper(\n\t\t\tReplaceAllAction.ID,\n\t\t\t\"\",\n\t\t\tThemeIcon.asClassName(searchReplaceAllIcon),\n\t\t\tfalse,\n\t\t);\n\t}\n\n\tset searchWidget(searchWidget: SearchWidget) {\n\t\tthis._searchWidget = searchWidget;\n\t}\n\n\toverride run(): Promise<any> {\n\t\tif (this._searchWidget) {\n\t\t\treturn this._searchWidget.triggerReplaceAll();\n\t\t}\n\t\treturn Promise.resolve(null);\n\t}\n}\n\nconst ctrlKeyMod = isMacintosh ? KeyMod.WinCtrl : KeyMod.CtrlCmd;\n\nfunction stopPropagationForMultiLineUpwards(\n\tevent: IKeyboardEvent,\n\tvalue: string,\n\ttextarea: HTMLTextAreaElement | null,\n) {\n\tconst isMultiline = !!value.match(/\\n/);\n\tif (\n\t\ttextarea &&\n\t\t(isMultiline || textarea.clientHeight > SingleLineInputHeight) &&\n\t\ttextarea.selectionStart > 0\n\t) {\n\t\tevent.stopPropagation();\n\t\treturn;\n\t}\n}\n\nfunction stopPropagationForMultiLineDownwards(\n\tevent: IKeyboardEvent,\n\tvalue: string,\n\ttextarea: HTMLTextAreaElement | null,\n) {\n\tconst isMultiline = !!value.match(/\\n/);\n\tif (\n\t\ttextarea &&\n\t\t(isMultiline || textarea.clientHeight > SingleLineInputHeight) &&\n\t\ttextarea.selectionEnd < textarea.value.length\n\t) {\n\t\tevent.stopPropagation();\n\t\treturn;\n\t}\n}\n\nexport class SearchWidget extends Widget {\n\tprivate static readonly INPUT_MAX_HEIGHT = 134;\n\n\tprivate static readonly REPLACE_ALL_DISABLED_LABEL = nls.localize(\n\t\t\"search.action.replaceAll.disabled.label\",\n\t\t\"Replace All (Submit Search to Enable)\",\n\t);\n\tprivate static readonly REPLACE_ALL_ENABLED_LABEL = (\n\t\tkeyBindingService2: IKeybindingService,\n\t): string => {\n\t\tconst kb = keyBindingService2.lookupKeybinding(ReplaceAllAction.ID);\n\t\treturn appendKeyBindingLabel(\n\t\t\tnls.localize(\n\t\t\t\t\"search.action.replaceAll.enabled.label\",\n\t\t\t\t\"Replace All\",\n\t\t\t),\n\t\t\tkb,\n\t\t);\n\t};\n\n\tdomNode: HTMLElement | undefined;\n\n\tsearchInput: SearchFindInput | undefined;\n\tsearchInputFocusTracker: dom.IFocusTracker | undefined;\n\tprivate searchInputBoxFocused: IContextKey<boolean>;\n\n\tprivate replaceContainer: HTMLElement | undefined;\n\treplaceInput: ReplaceInput | undefined;\n\treplaceInputFocusTracker: dom.IFocusTracker | undefined;\n\tprivate replaceInputBoxFocused: IContextKey<boolean>;\n\tprivate toggleReplaceButton: Button | undefined;\n\tprivate replaceAllAction: ReplaceAllAction | undefined;\n\tprivate replaceActive: IContextKey<boolean>;\n\tprivate replaceActionBar: ActionBar | undefined;\n\tprivate _replaceHistoryDelayer: Delayer<void>;\n\tprivate ignoreGlobalFindBufferOnNextFocus = false;\n\tprivate previousGlobalFindBufferValue: string | null = null;\n\n\tprivate _onSearchSubmit = this._register(\n\t\tnew Emitter<{ triggeredOnType: boolean; delay: number }>(),\n\t);\n\treadonly onSearchSubmit: Event<{\n\t\ttriggeredOnType: boolean;\n\t\tdelay: number;\n\t}> = this._onSearchSubmit.event;\n\n\tprivate _onSearchCancel = this._register(new Emitter<{ focus: boolean }>());\n\treadonly onSearchCancel: Event<{ focus: boolean }> =\n\t\tthis._onSearchCancel.event;\n\n\tprivate _onReplaceToggled = this._register(new Emitter<void>());\n\treadonly onReplaceToggled: Event<void> = this._onReplaceToggled.event;\n\n\tprivate _onReplaceStateChange = this._register(new Emitter<boolean>());\n\treadonly onReplaceStateChange: Event<boolean> =\n\t\tthis._onReplaceStateChange.event;\n\n\tprivate _onPreserveCaseChange = this._register(new Emitter<boolean>());\n\treadonly onPreserveCaseChange: Event<boolean> =\n\t\tthis._onPreserveCaseChange.event;\n\n\tprivate _onReplaceValueChanged = this._register(new Emitter<void>());\n\treadonly onReplaceValueChanged: Event<void> =\n\t\tthis._onReplaceValueChanged.event;\n\n\tprivate _onReplaceAll = this._register(new Emitter<void>());\n\treadonly onReplaceAll: Event<void> = this._onReplaceAll.event;\n\n\tprivate _onBlur = this._register(new Emitter<void>());\n\treadonly onBlur: Event<void> = this._onBlur.event;\n\n\tprivate _onDidHeightChange = this._register(new Emitter<void>());\n\treadonly onDidHeightChange: Event<void> = this._onDidHeightChange.event;\n\n\tprivate readonly _onDidToggleContext = new Emitter<void>();\n\treadonly onDidToggleContext: Event<void> = this._onDidToggleContext.event;\n\n\tprivate showContextToggle!: Toggle;\n\tpublic contextLinesInput!: InputBox;\n\n\tprivate _notebookFilters: NotebookFindFilters;\n\tprivate readonly _toggleReplaceButtonListener: MutableDisposable<IDisposable>;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\toptions: ISearchWidgetOptions,\n\t\t@IContextViewService\n\t\tprivate readonly contextViewService: IContextViewService,\n\t\t@IContextKeyService\n\t\tprivate readonly contextKeyService: IContextKeyService,\n\t\t@IKeybindingService\n\t\tprivate readonly keybindingService: IKeybindingService,\n\t\t@IClipboardService private readonly clipboardServce: IClipboardService,\n\t\t@IConfigurationService\n\t\tprivate readonly configurationService: IConfigurationService,\n\t\t@IAccessibilityService\n\t\tprivate readonly accessibilityService: IAccessibilityService,\n\t\t@IContextMenuService\n\t\tprivate readonly contextMenuService: IContextMenuService,\n\t\t@IInstantiationService\n\t\tprivate readonly instantiationService: IInstantiationService,\n\t\t@IEditorService private readonly editorService: IEditorService,\n\t) {\n\t\tsuper();\n\t\tthis.replaceActive = Constants.SearchContext.ReplaceActiveKey.bindTo(\n\t\t\tthis.contextKeyService,\n\t\t);\n\t\tthis.searchInputBoxFocused =\n\t\t\tConstants.SearchContext.SearchInputBoxFocusedKey.bindTo(\n\t\t\t\tthis.contextKeyService,\n\t\t\t);\n\t\tthis.replaceInputBoxFocused =\n\t\t\tConstants.SearchContext.ReplaceInputBoxFocusedKey.bindTo(\n\t\t\t\tthis.contextKeyService,\n\t\t\t);\n\n\t\tconst notebookOptions = options.notebookOptions ?? {\n\t\t\tisInNotebookMarkdownInput: true,\n\t\t\tisInNotebookMarkdownPreview: true,\n\t\t\tisInNotebookCellInput: true,\n\t\t\tisInNotebookCellOutput: true,\n\t\t};\n\t\tthis._notebookFilters = this._register(\n\t\t\tnew NotebookFindFilters(\n\t\t\t\tnotebookOptions.isInNotebookMarkdownInput,\n\t\t\t\tnotebookOptions.isInNotebookMarkdownPreview,\n\t\t\t\tnotebookOptions.isInNotebookCellInput,\n\t\t\t\tnotebookOptions.isInNotebookCellOutput,\n\t\t\t\t{ findScopeType: NotebookFindScopeType.None },\n\t\t\t),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis._notebookFilters.onDidChange(() => {\n\t\t\t\tif (this.searchInput) {\n\t\t\t\t\tthis.searchInput.updateFilterStyles();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.editorService.onDidEditorsChange((e) => {\n\t\t\t\tif (\n\t\t\t\t\tthis.searchInput &&\n\t\t\t\t\te.event.editor instanceof NotebookEditorInput &&\n\t\t\t\t\t(e.event.kind === GroupModelChangeKind.EDITOR_OPEN ||\n\t\t\t\t\t\te.event.kind === GroupModelChangeKind.EDITOR_CLOSE)\n\t\t\t\t) {\n\t\t\t\t\tthis.searchInput.filterVisible = this._hasNotebookOpen();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis._replaceHistoryDelayer = new Delayer<void>(500);\n\t\tthis._toggleReplaceButtonListener = this._register(\n\t\t\tnew MutableDisposable<IDisposable>(),\n\t\t);\n\n\t\tthis.render(container, options);\n\n\t\tthis._register(\n\t\t\tthis.configurationService.onDidChangeConfiguration((e) => {\n\t\t\t\tif (e.affectsConfiguration(\"editor.accessibilitySupport\")) {\n\t\t\t\t\tthis.updateAccessibilitySupport();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.accessibilityService.onDidChangeScreenReaderOptimized(() =>\n\t\t\t\tthis.updateAccessibilitySupport(),\n\t\t\t),\n\t\t);\n\t\tthis.updateAccessibilitySupport();\n\t}\n\n\tprivate _hasNotebookOpen(): boolean {\n\t\tconst editors = this.editorService.editors;\n\t\treturn editors.some((editor) => editor instanceof NotebookEditorInput);\n\t}\n\n\tgetNotebookFilters() {\n\t\treturn this._notebookFilters;\n\t}\n\n\tfocus(\n\t\tselect = true,\n\t\tfocusReplace = false,\n\t\tsuppressGlobalSearchBuffer = false,\n\t): void {\n\t\tthis.ignoreGlobalFindBufferOnNextFocus = suppressGlobalSearchBuffer;\n\n\t\tif (focusReplace && this.isReplaceShown()) {\n\t\t\tif (this.replaceInput) {\n\t\t\t\tthis.replaceInput.focus();\n\t\t\t\tif (select) {\n\t\t\t\t\tthis.replaceInput.select();\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (this.searchInput) {\n\t\t\tthis.searchInput.focus();\n\t\t\tif (select) {\n\t\t\t\tthis.searchInput.select();\n\t\t\t}\n\t\t}\n\t}\n\n\tsetWidth(width: number) {\n\t\tthis.searchInput?.inputBox.layout();\n\t\tif (this.replaceInput) {\n\t\t\tthis.replaceInput.width = width - 28;\n\t\t\tthis.replaceInput.inputBox.layout();\n\t\t}\n\t}\n\n\tclear() {\n\t\tthis.searchInput?.clear();\n\t\tthis.replaceInput?.setValue(\"\");\n\t\tthis.setReplaceAllActionState(false);\n\t}\n\n\tisReplaceShown(): boolean {\n\t\treturn this.replaceContainer\n\t\t\t? !this.replaceContainer.classList.contains(\"disabled\")\n\t\t\t: false;\n\t}\n\n\tisReplaceActive(): boolean {\n\t\treturn !!this.replaceActive.get();\n\t}\n\n\tgetReplaceValue(): string {\n\t\treturn this.replaceInput?.getValue() ?? \"\";\n\t}\n\n\ttoggleReplace(show?: boolean): void {\n\t\tif (show === undefined || show !== this.isReplaceShown()) {\n\t\t\tthis.onToggleReplaceButton();\n\t\t}\n\t}\n\n\tgetSearchHistory(): string[] {\n\t\treturn this.searchInput?.inputBox.getHistory() ?? [];\n\t}\n\n\tgetReplaceHistory(): string[] {\n\t\treturn this.replaceInput?.inputBox.getHistory() ?? [];\n\t}\n\n\tprependSearchHistory(history: string[]): void {\n\t\tthis.searchInput?.inputBox.prependHistory(history);\n\t}\n\n\tprependReplaceHistory(history: string[]): void {\n\t\tthis.replaceInput?.inputBox.prependHistory(history);\n\t}\n\n\tclearHistory(): void {\n\t\tthis.searchInput?.inputBox.clearHistory();\n\t\tthis.replaceInput?.inputBox.clearHistory();\n\t}\n\n\tshowNextSearchTerm() {\n\t\tthis.searchInput?.inputBox.showNextValue();\n\t}\n\n\tshowPreviousSearchTerm() {\n\t\tthis.searchInput?.inputBox.showPreviousValue();\n\t}\n\n\tshowNextReplaceTerm() {\n\t\tthis.replaceInput?.inputBox.showNextValue();\n\t}\n\n\tshowPreviousReplaceTerm() {\n\t\tthis.replaceInput?.inputBox.showPreviousValue();\n\t}\n\n\tsearchInputHasFocus(): boolean {\n\t\treturn !!this.searchInputBoxFocused.get();\n\t}\n\n\treplaceInputHasFocus(): boolean {\n\t\treturn !!this.replaceInput?.inputBox.hasFocus();\n\t}\n\n\tfocusReplaceAllAction(): void {\n\t\tthis.replaceActionBar?.focus(true);\n\t}\n\n\tfocusRegexAction(): void {\n\t\tthis.searchInput?.focusOnRegex();\n\t}\n\n\tset replaceButtonVisibility(val: boolean) {\n\t\tif (this.toggleReplaceButton) {\n\t\t\tthis.toggleReplaceButton.element.style.display = val ? \"\" : \"none\";\n\t\t}\n\t}\n\n\tprivate render(\n\t\tcontainer: HTMLElement,\n\t\toptions: ISearchWidgetOptions,\n\t): void {\n\t\tthis.domNode = dom.append(container, dom.$(\".search-widget\"));\n\t\tthis.domNode.style.position = \"relative\";\n\n\t\tif (!options._hideReplaceToggle) {\n\t\t\tthis.renderToggleReplaceButton(this.domNode);\n\t\t}\n\n\t\tthis.renderSearchInput(this.domNode, options);\n\t\tthis.renderReplaceInput(this.domNode, options);\n\t}\n\n\tprivate updateAccessibilitySupport(): void {\n\t\tthis.searchInput?.setFocusInputOnOptionClick(\n\t\t\t!this.accessibilityService.isScreenReaderOptimized(),\n\t\t);\n\t}\n\n\tprivate renderToggleReplaceButton(parent: HTMLElement): void {\n\t\tconst opts: IButtonOptions = {\n\t\t\tbuttonBackground: undefined,\n\t\t\tbuttonBorder: undefined,\n\t\t\tbuttonForeground: undefined,\n\t\t\tbuttonHoverBackground: undefined,\n\t\t\tbuttonSecondaryBackground: undefined,\n\t\t\tbuttonSecondaryForeground: undefined,\n\t\t\tbuttonSecondaryHoverBackground: undefined,\n\t\t\tbuttonSeparator: undefined,\n\t\t\ttitle: nls.localize(\n\t\t\t\t\"search.replace.toggle.button.title\",\n\t\t\t\t\"Toggle Replace\",\n\t\t\t),\n\t\t\thoverDelegate: getDefaultHoverDelegate(\"element\"),\n\t\t};\n\t\tthis.toggleReplaceButton = this._register(new Button(parent, opts));\n\t\tthis.toggleReplaceButton.element.setAttribute(\"aria-expanded\", \"false\");\n\t\tthis.toggleReplaceButton.element.classList.add(\"toggle-replace-button\");\n\t\tthis.toggleReplaceButton.icon = searchHideReplaceIcon;\n\t\tthis._toggleReplaceButtonListener.value =\n\t\t\tthis.toggleReplaceButton.onDidClick(() =>\n\t\t\t\tthis.onToggleReplaceButton(),\n\t\t\t);\n\t}\n\n\tprivate renderSearchInput(\n\t\tparent: HTMLElement,\n\t\toptions: ISearchWidgetOptions,\n\t): void {\n\t\tconst inputOptions: IFindInputOptions = {\n\t\t\tlabel: nls.localize(\n\t\t\t\t\"label.Search\",\n\t\t\t\t\"Search: Type Search Term and press Enter to search\",\n\t\t\t),\n\t\t\tvalidation: (value: string) => this.validateSearchInput(value),\n\t\t\tplaceholder: nls.localize(\"search.placeHolder\", \"Search\"),\n\t\t\tappendCaseSensitiveLabel: appendKeyBindingLabel(\n\t\t\t\t\"\",\n\t\t\t\tthis.keybindingService.lookupKeybinding(\n\t\t\t\t\tConstants.SearchCommandIds.ToggleCaseSensitiveCommandId,\n\t\t\t\t),\n\t\t\t),\n\t\t\tappendWholeWordsLabel: appendKeyBindingLabel(\n\t\t\t\t\"\",\n\t\t\t\tthis.keybindingService.lookupKeybinding(\n\t\t\t\t\tConstants.SearchCommandIds.ToggleWholeWordCommandId,\n\t\t\t\t),\n\t\t\t),\n\t\t\tappendRegexLabel: appendKeyBindingLabel(\n\t\t\t\t\"\",\n\t\t\t\tthis.keybindingService.lookupKeybinding(\n\t\t\t\t\tConstants.SearchCommandIds.ToggleRegexCommandId,\n\t\t\t\t),\n\t\t\t),\n\t\t\thistory: options.searchHistory,\n\t\t\tshowHistoryHint: () =>\n\t\t\t\tshowHistoryKeybindingHint(this.keybindingService),\n\t\t\tflexibleHeight: true,\n\t\t\tflexibleMaxHeight: SearchWidget.INPUT_MAX_HEIGHT,\n\t\t\tshowCommonFindToggles: true,\n\t\t\tinputBoxStyles: options.inputBoxStyles,\n\t\t\ttoggleStyles: options.toggleStyles,\n\t\t};\n\n\t\tconst searchInputContainer = dom.append(\n\t\t\tparent,\n\t\t\tdom.$(\".search-container.input-box\"),\n\t\t);\n\n\t\tthis.searchInput = this._register(\n\t\t\tnew SearchFindInput(\n\t\t\t\tsearchInputContainer,\n\t\t\t\tthis.contextViewService,\n\t\t\t\tinputOptions,\n\t\t\t\tthis.contextKeyService,\n\t\t\t\tthis.contextMenuService,\n\t\t\t\tthis.instantiationService,\n\t\t\t\tthis._notebookFilters,\n\t\t\t\toptions.initialAIButtonVisibility ?? false,\n\t\t\t\tthis._hasNotebookOpen(),\n\t\t\t),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.searchInput.onKeyDown((keyboardEvent: IKeyboardEvent) =>\n\t\t\t\tthis.onSearchInputKeyDown(keyboardEvent),\n\t\t\t),\n\t\t);\n\t\tthis.searchInput.setValue(options.value || \"\");\n\t\tthis.searchInput.setRegex(!!options.isRegex);\n\t\tthis.searchInput.setCaseSensitive(!!options.isCaseSensitive);\n\t\tthis.searchInput.setWholeWords(!!options.isWholeWords);\n\t\tthis._register(\n\t\t\tthis.searchInput.onCaseSensitiveKeyDown(\n\t\t\t\t(keyboardEvent: IKeyboardEvent) =>\n\t\t\t\t\tthis.onCaseSensitiveKeyDown(keyboardEvent),\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.searchInput.onRegexKeyDown((keyboardEvent: IKeyboardEvent) =>\n\t\t\t\tthis.onRegexKeyDown(keyboardEvent),\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.searchInput.inputBox.onDidChange(() =>\n\t\t\t\tthis.onSearchInputChanged(),\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.searchInput.inputBox.onDidHeightChange(() =>\n\t\t\t\tthis._onDidHeightChange.fire(),\n\t\t\t),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.onReplaceValueChanged(() => {\n\t\t\t\tthis._replaceHistoryDelayer.trigger(() =>\n\t\t\t\t\tthis.replaceInput?.inputBox.addToHistory(),\n\t\t\t\t);\n\t\t\t}),\n\t\t);\n\n\t\tthis.searchInputFocusTracker = this._register(\n\t\t\tdom.trackFocus(this.searchInput.inputBox.inputElement),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.searchInputFocusTracker.onDidFocus(async () => {\n\t\t\t\tthis.searchInputBoxFocused.set(true);\n\n\t\t\t\tconst useGlobalFindBuffer =\n\t\t\t\t\tthis.searchConfiguration.globalFindClipboard;\n\t\t\t\tif (\n\t\t\t\t\t!this.ignoreGlobalFindBufferOnNextFocus &&\n\t\t\t\t\tuseGlobalFindBuffer\n\t\t\t\t) {\n\t\t\t\t\tconst globalBufferText =\n\t\t\t\t\t\tawait this.clipboardServce.readFindText();\n\t\t\t\t\tif (\n\t\t\t\t\t\tglobalBufferText &&\n\t\t\t\t\t\tthis.previousGlobalFindBufferValue !== globalBufferText\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.searchInput?.inputBox.addToHistory();\n\t\t\t\t\t\tthis.searchInput?.setValue(globalBufferText);\n\t\t\t\t\t\tthis.searchInput?.select();\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.previousGlobalFindBufferValue = globalBufferText;\n\t\t\t\t}\n\n\t\t\t\tthis.ignoreGlobalFindBufferOnNextFocus = false;\n\t\t\t}),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.searchInputFocusTracker.onDidBlur(() =>\n\t\t\t\tthis.searchInputBoxFocused.set(false),\n\t\t\t),\n\t\t);\n\n\t\tthis.showContextToggle = new Toggle({\n\t\t\tisChecked: false,\n\t\t\ttitle: appendKeyBindingLabel(\n\t\t\t\tnls.localize(\"showContext\", \"Toggle Context Lines\"),\n\t\t\t\tthis.keybindingService.lookupKeybinding(\n\t\t\t\t\tToggleSearchEditorContextLinesCommandId,\n\t\t\t\t),\n\t\t\t),\n\t\t\ticon: searchShowContextIcon,\n\t\t\thoverDelegate: getDefaultHoverDelegate(\"element\"),\n\t\t\t...defaultToggleStyles,\n\t\t});\n\t\tthis._register(\n\t\t\tthis.showContextToggle.onChange(() => this.onContextLinesChanged()),\n\t\t);\n\n\t\tif (options.showContextToggle) {\n\t\t\tthis.contextLinesInput = new InputBox(\n\t\t\t\tsearchInputContainer,\n\t\t\t\tthis.contextViewService,\n\t\t\t\t{ type: \"number\", inputBoxStyles: defaultInputBoxStyles },\n\t\t\t);\n\t\t\tthis.contextLinesInput.element.classList.add(\"context-lines-input\");\n\t\t\tthis.contextLinesInput.value =\n\t\t\t\t\"\" +\n\t\t\t\t(this.configurationService.getValue<ISearchConfigurationProperties>(\n\t\t\t\t\t\"search\",\n\t\t\t\t).searchEditor.defaultNumberOfContextLines ?? 1);\n\t\t\tthis._register(\n\t\t\t\tthis.contextLinesInput.onDidChange((value: string) => {\n\t\t\t\t\tif (value !== \"0\") {\n\t\t\t\t\t\tthis.showContextToggle.checked = true;\n\t\t\t\t\t}\n\t\t\t\t\tthis.onContextLinesChanged();\n\t\t\t\t}),\n\t\t\t);\n\t\t\tdom.append(searchInputContainer, this.showContextToggle.domNode);\n\t\t}\n\t}\n\n\tprivate onContextLinesChanged() {\n\t\tthis._onDidToggleContext.fire();\n\n\t\tif (this.contextLinesInput.value.includes(\"-\")) {\n\t\t\tthis.contextLinesInput.value = \"0\";\n\t\t}\n\n\t\tthis._onDidToggleContext.fire();\n\t}\n\n\tpublic setContextLines(lines: number) {\n\t\tif (!this.contextLinesInput) {\n\t\t\treturn;\n\t\t}\n\t\tif (lines === 0) {\n\t\t\tthis.showContextToggle.checked = false;\n\t\t} else {\n\t\t\tthis.showContextToggle.checked = true;\n\t\t\tthis.contextLinesInput.value = \"\" + lines;\n\t\t}\n\t}\n\n\tprivate renderReplaceInput(\n\t\tparent: HTMLElement,\n\t\toptions: ISearchWidgetOptions,\n\t): void {\n\t\tthis.replaceContainer = dom.append(\n\t\t\tparent,\n\t\t\tdom.$(\".replace-container.disabled\"),\n\t\t);\n\t\tconst replaceBox = dom.append(\n\t\t\tthis.replaceContainer,\n\t\t\tdom.$(\".replace-input\"),\n\t\t);\n\n\t\tthis.replaceInput = this._register(\n\t\t\tnew ContextScopedReplaceInput(\n\t\t\t\treplaceBox,\n\t\t\t\tthis.contextViewService,\n\t\t\t\t{\n\t\t\t\t\tlabel: nls.localize(\n\t\t\t\t\t\t\"label.Replace\",\n\t\t\t\t\t\t\"Replace: Type replace term and press Enter to preview\",\n\t\t\t\t\t),\n\t\t\t\t\tplaceholder: nls.localize(\n\t\t\t\t\t\t\"search.replace.placeHolder\",\n\t\t\t\t\t\t\"Replace\",\n\t\t\t\t\t),\n\t\t\t\t\tappendPreserveCaseLabel: appendKeyBindingLabel(\n\t\t\t\t\t\t\"\",\n\t\t\t\t\t\tthis.keybindingService.lookupKeybinding(\n\t\t\t\t\t\t\tConstants.SearchCommandIds.TogglePreserveCaseId,\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t\thistory: options.replaceHistory,\n\t\t\t\t\tshowHistoryHint: () =>\n\t\t\t\t\t\tshowHistoryKeybindingHint(this.keybindingService),\n\t\t\t\t\tflexibleHeight: true,\n\t\t\t\t\tflexibleMaxHeight: SearchWidget.INPUT_MAX_HEIGHT,\n\t\t\t\t\tinputBoxStyles: options.inputBoxStyles,\n\t\t\t\t\ttoggleStyles: options.toggleStyles,\n\t\t\t\t},\n\t\t\t\tthis.contextKeyService,\n\t\t\t\ttrue,\n\t\t\t),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.replaceInput.onDidOptionChange((viaKeyboard) => {\n\t\t\t\tif (!viaKeyboard) {\n\t\t\t\t\tif (this.replaceInput) {\n\t\t\t\t\t\tthis._onPreserveCaseChange.fire(\n\t\t\t\t\t\t\tthis.replaceInput.getPreserveCase(),\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.replaceInput.onKeyDown((keyboardEvent) =>\n\t\t\t\tthis.onReplaceInputKeyDown(keyboardEvent),\n\t\t\t),\n\t\t);\n\t\tthis.replaceInput.setValue(options.replaceValue || \"\");\n\t\tthis._register(\n\t\t\tthis.replaceInput.inputBox.onDidChange(() =>\n\t\t\t\tthis._onReplaceValueChanged.fire(),\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.replaceInput.inputBox.onDidHeightChange(() =>\n\t\t\t\tthis._onDidHeightChange.fire(),\n\t\t\t),\n\t\t);\n\n\t\tthis.replaceAllAction = new ReplaceAllAction(this);\n\t\tthis.replaceAllAction.label = SearchWidget.REPLACE_ALL_DISABLED_LABEL;\n\t\tthis.replaceActionBar = this._register(\n\t\t\tnew ActionBar(this.replaceContainer),\n\t\t);\n\t\tthis.replaceActionBar.push([this.replaceAllAction], {\n\t\t\ticon: true,\n\t\t\tlabel: false,\n\t\t});\n\t\tthis.onkeydown(this.replaceActionBar.domNode, (keyboardEvent) =>\n\t\t\tthis.onReplaceActionbarKeyDown(keyboardEvent),\n\t\t);\n\n\t\tthis.replaceInputFocusTracker = this._register(\n\t\t\tdom.trackFocus(this.replaceInput.inputBox.inputElement),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.replaceInputFocusTracker.onDidFocus(() =>\n\t\t\t\tthis.replaceInputBoxFocused.set(true),\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.replaceInputFocusTracker.onDidBlur(() =>\n\t\t\t\tthis.replaceInputBoxFocused.set(false),\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.replaceInput.onPreserveCaseKeyDown(\n\t\t\t\t(keyboardEvent: IKeyboardEvent) =>\n\t\t\t\t\tthis.onPreserveCaseKeyDown(keyboardEvent),\n\t\t\t),\n\t\t);\n\t}\n\n\ttriggerReplaceAll(): Promise<any> {\n\t\tthis._onReplaceAll.fire();\n\t\treturn Promise.resolve(null);\n\t}\n\n\tprivate onToggleReplaceButton(): void {\n\t\tthis.replaceContainer?.classList.toggle(\"disabled\");\n\t\tif (this.isReplaceShown()) {\n\t\t\tthis.toggleReplaceButton?.element.classList.remove(\n\t\t\t\t...ThemeIcon.asClassNameArray(searchHideReplaceIcon),\n\t\t\t);\n\t\t\tthis.toggleReplaceButton?.element.classList.add(\n\t\t\t\t...ThemeIcon.asClassNameArray(searchShowReplaceIcon),\n\t\t\t);\n\t\t} else {\n\t\t\tthis.toggleReplaceButton?.element.classList.remove(\n\t\t\t\t...ThemeIcon.asClassNameArray(searchShowReplaceIcon),\n\t\t\t);\n\t\t\tthis.toggleReplaceButton?.element.classList.add(\n\t\t\t\t...ThemeIcon.asClassNameArray(searchHideReplaceIcon),\n\t\t\t);\n\t\t}\n\t\tthis.toggleReplaceButton?.element.setAttribute(\n\t\t\t\"aria-expanded\",\n\t\t\tthis.isReplaceShown() ? \"true\" : \"false\",\n\t\t);\n\t\tthis.updateReplaceActiveState();\n\t\tthis._onReplaceToggled.fire();\n\t}\n\n\tsetValue(value: string) {\n\t\tthis.searchInput?.setValue(value);\n\t}\n\n\tsetReplaceAllActionState(enabled: boolean): void {\n\t\tif (\n\t\t\tthis.replaceAllAction &&\n\t\t\tthis.replaceAllAction.enabled !== enabled\n\t\t) {\n\t\t\tthis.replaceAllAction.enabled = enabled;\n\t\t\tthis.replaceAllAction.label = enabled\n\t\t\t\t? SearchWidget.REPLACE_ALL_ENABLED_LABEL(this.keybindingService)\n\t\t\t\t: SearchWidget.REPLACE_ALL_DISABLED_LABEL;\n\t\t\tthis.updateReplaceActiveState();\n\t\t}\n\t}\n\n\tprivate updateReplaceActiveState(): void {\n\t\tconst currentState = this.isReplaceActive();\n\t\tconst newState =\n\t\t\tthis.isReplaceShown() && !!this.replaceAllAction?.enabled;\n\t\tif (currentState !== newState) {\n\t\t\tthis.replaceActive.set(newState);\n\t\t\tthis._onReplaceStateChange.fire(newState);\n\t\t\tthis.replaceInput?.inputBox.layout();\n\t\t}\n\t}\n\n\tprivate validateSearchInput(value: string): IMessage | null {\n\t\tif (value.length === 0) {\n\t\t\treturn null;\n\t\t}\n\t\tif (!this.searchInput?.getRegex()) {\n\t\t\treturn null;\n\t\t}\n\t\ttry {\n\t\t\tnew RegExp(value, \"u\");\n\t\t} catch (e) {\n\t\t\treturn { content: e.message };\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tprivate onSearchInputChanged(): void {\n\t\tthis.searchInput?.clearMessage();\n\t\tthis.setReplaceAllActionState(false);\n\n\t\tif (this.searchConfiguration.searchOnType) {\n\t\t\tconst delayMultiplierFromAISearch =\n\t\t\t\tthis.searchInput && this.searchInput.isAIEnabled ? 5 : 1; // expand debounce period to multiple by 5 if AI is enabled\n\t\t\tif (this.searchInput?.getRegex()) {\n\t\t\t\ttry {\n\t\t\t\t\tconst regex = new RegExp(this.searchInput.getValue(), \"ug\");\n\t\t\t\t\tconst matchienessHeuristic =\n\t\t\t\t\t\t`\n\t\t\t\t\t\t\t\t~!@#$%^&*()_+\n\t\t\t\t\t\t\t\t\\`1234567890-=\n\t\t\t\t\t\t\t\tqwertyuiop[]\\\\\n\t\t\t\t\t\t\t\tQWERTYUIOP{}|\n\t\t\t\t\t\t\t\tasdfghjkl;'\n\t\t\t\t\t\t\t\tASDFGHJKL:\"\n\t\t\t\t\t\t\t\tzxcvbnm,./\n\t\t\t\t\t\t\t\tZXCVBNM<>? `.match(regex)?.length ?? 0;\n\n\t\t\t\t\tconst delayMultiplier =\n\t\t\t\t\t\tmatchienessHeuristic < 50\n\t\t\t\t\t\t\t? 1\n\t\t\t\t\t\t\t: matchienessHeuristic < 100\n\t\t\t\t\t\t\t\t? 5\n\t\t\t\t\t\t\t\t: // expressions like `.` or `\\w`\n\t\t\t\t\t\t\t\t\t10; // only things matching empty string\n\n\t\t\t\t\tthis.submitSearch(\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t\tthis.searchConfiguration.searchOnTypeDebouncePeriod *\n\t\t\t\t\t\t\tdelayMultiplier *\n\t\t\t\t\t\t\tdelayMultiplierFromAISearch,\n\t\t\t\t\t);\n\t\t\t\t} catch {\n\t\t\t\t\t// pass\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.submitSearch(\n\t\t\t\t\ttrue,\n\t\t\t\t\tthis.searchConfiguration.searchOnTypeDebouncePeriod *\n\t\t\t\t\t\tdelayMultiplierFromAISearch,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onSearchInputKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(ctrlKeyMod | KeyCode.Enter)) {\n\t\t\tthis.searchInput?.inputBox.insertAtCursor(\"\\n\");\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\tif (keyboardEvent.equals(KeyCode.Enter)) {\n\t\t\tthis.searchInput?.onSearchSubmit();\n\t\t\tthis.submitSearch();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t} else if (keyboardEvent.equals(KeyCode.Escape)) {\n\t\t\tthis._onSearchCancel.fire({ focus: true });\n\t\t\tkeyboardEvent.preventDefault();\n\t\t} else if (keyboardEvent.equals(KeyCode.Tab)) {\n\t\t\tif (this.isReplaceShown()) {\n\t\t\t\tthis.replaceInput?.focus();\n\t\t\t} else {\n\t\t\t\tthis.searchInput?.focusOnCaseSensitive();\n\t\t\t}\n\t\t\tkeyboardEvent.preventDefault();\n\t\t} else if (keyboardEvent.equals(KeyCode.UpArrow)) {\n\t\t\tstopPropagationForMultiLineUpwards(\n\t\t\t\tkeyboardEvent,\n\t\t\t\tthis.searchInput?.getValue() ?? \"\",\n\t\t\t\tthis.searchInput?.domNode.querySelector(\"textarea\") ?? null,\n\t\t\t);\n\t\t} else if (keyboardEvent.equals(KeyCode.DownArrow)) {\n\t\t\tstopPropagationForMultiLineDownwards(\n\t\t\t\tkeyboardEvent,\n\t\t\t\tthis.searchInput?.getValue() ?? \"\",\n\t\t\t\tthis.searchInput?.domNode.querySelector(\"textarea\") ?? null,\n\t\t\t);\n\t\t} else if (keyboardEvent.equals(KeyCode.PageUp)) {\n\t\t\tconst inputElement = this.searchInput?.inputBox.inputElement;\n\t\t\tif (inputElement) {\n\t\t\t\tinputElement.setSelectionRange(0, 0);\n\t\t\t\tinputElement.focus();\n\t\t\t\tkeyboardEvent.preventDefault();\n\t\t\t}\n\t\t} else if (keyboardEvent.equals(KeyCode.PageDown)) {\n\t\t\tconst inputElement = this.searchInput?.inputBox.inputElement;\n\t\t\tif (inputElement) {\n\t\t\t\tconst endOfText = inputElement.value.length;\n\t\t\t\tinputElement.setSelectionRange(endOfText, endOfText);\n\t\t\t\tinputElement.focus();\n\t\t\t\tkeyboardEvent.preventDefault();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onCaseSensitiveKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\tif (this.isReplaceShown()) {\n\t\t\t\tthis.replaceInput?.focus();\n\t\t\t\tkeyboardEvent.preventDefault();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onRegexKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(KeyCode.Tab)) {\n\t\t\tif (this.isReplaceShown()) {\n\t\t\t\tthis.replaceInput?.focusOnPreserve();\n\t\t\t\tkeyboardEvent.preventDefault();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onPreserveCaseKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(KeyCode.Tab)) {\n\t\t\tif (this.isReplaceActive()) {\n\t\t\t\tthis.focusReplaceAllAction();\n\t\t\t} else {\n\t\t\t\tthis._onBlur.fire();\n\t\t\t}\n\t\t\tkeyboardEvent.preventDefault();\n\t\t} else if (keyboardEvent.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\tthis.focusRegexAction();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\t}\n\n\tprivate onReplaceInputKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(ctrlKeyMod | KeyCode.Enter)) {\n\t\t\tthis.replaceInput?.inputBox.insertAtCursor(\"\\n\");\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\n\t\tif (keyboardEvent.equals(KeyCode.Enter)) {\n\t\t\tthis.submitSearch();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t} else if (keyboardEvent.equals(KeyCode.Tab)) {\n\t\t\tthis.searchInput?.focusOnCaseSensitive();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t} else if (keyboardEvent.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\tthis.searchInput?.focus();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t} else if (keyboardEvent.equals(KeyCode.UpArrow)) {\n\t\t\tstopPropagationForMultiLineUpwards(\n\t\t\t\tkeyboardEvent,\n\t\t\t\tthis.replaceInput?.getValue() ?? \"\",\n\t\t\t\tthis.replaceInput?.domNode.querySelector(\"textarea\") ?? null,\n\t\t\t);\n\t\t} else if (keyboardEvent.equals(KeyCode.DownArrow)) {\n\t\t\tstopPropagationForMultiLineDownwards(\n\t\t\t\tkeyboardEvent,\n\t\t\t\tthis.replaceInput?.getValue() ?? \"\",\n\t\t\t\tthis.replaceInput?.domNode.querySelector(\"textarea\") ?? null,\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate onReplaceActionbarKeyDown(keyboardEvent: IKeyboardEvent) {\n\t\tif (keyboardEvent.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\tthis.focusRegexAction();\n\t\t\tkeyboardEvent.preventDefault();\n\t\t}\n\t}\n\n\tprivate async submitSearch(\n\t\ttriggeredOnType = false,\n\t\tdelay = 0,\n\t): Promise<void> {\n\t\tthis.searchInput?.validate();\n\t\tif (!this.searchInput?.inputBox.isInputValid()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst value = this.searchInput.getValue();\n\t\tconst useGlobalFindBuffer =\n\t\t\tthis.searchConfiguration.globalFindClipboard;\n\t\tif (value && useGlobalFindBuffer) {\n\t\t\tawait this.clipboardServce.writeFindText(value);\n\t\t}\n\t\tthis._onSearchSubmit.fire({ triggeredOnType, delay });\n\t}\n\n\tgetContextLines() {\n\t\treturn this.showContextToggle.checked\n\t\t\t? +this.contextLinesInput.value\n\t\t\t: 0;\n\t}\n\n\tmodifyContextLines(increase: boolean) {\n\t\tconst current = +this.contextLinesInput.value;\n\t\tconst modified = current + (increase ? 1 : -1);\n\t\tthis.showContextToggle.checked = modified !== 0;\n\t\tthis.contextLinesInput.value = \"\" + modified;\n\t}\n\n\ttoggleContextLines() {\n\t\tthis.showContextToggle.checked = !this.showContextToggle.checked;\n\t\tthis.onContextLinesChanged();\n\t}\n\n\toverride dispose(): void {\n\t\tthis.setReplaceAllActionState(false);\n\t\tsuper.dispose();\n\t}\n\n\tprivate get searchConfiguration(): ISearchConfigurationProperties {\n\t\treturn this.configurationService.getValue<ISearchConfigurationProperties>(\n\t\t\t\"search\",\n\t\t);\n\t}\n}\n\nexport function registerContributions() {\n\tKeybindingsRegistry.registerCommandAndKeybindingRule({\n\t\tid: ReplaceAllAction.ID,\n\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\twhen: ContextKeyExpr.and(\n\t\t\tConstants.SearchContext.SearchViewVisibleKey,\n\t\t\tConstants.SearchContext.ReplaceActiveKey,\n\t\t\tCONTEXT_FIND_WIDGET_NOT_VISIBLE,\n\t\t),\n\t\tprimary: KeyMod.Alt | KeyMod.CtrlCmd | KeyCode.Enter,\n\t\thandler: (accessor) => {\n\t\t\tconst viewsService = accessor.get(IViewsService);\n\t\t\tif (isSearchViewFocused(viewsService)) {\n\t\t\t\tconst searchView = getSearchView(viewsService);\n\t\t\t\tif (searchView) {\n\t\t\t\t\tnew ReplaceAllAction(\n\t\t\t\t\t\tsearchView.searchAndReplaceWidget,\n\t\t\t\t\t).run();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t});\n}\n"],
  "mappings": "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",
  "names": []
}
