{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/search/common/searchHistoryService.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { isEmptyObject } from '../../../../base/common/types.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\n\nexport interface ISearchHistoryService {\n\treadonly _serviceBrand: undefined;\n\tonDidClearHistory: Event<void>;\n\tclearHistory(): void;\n\tload(): ISearchHistoryValues;\n\tsave(history: ISearchHistoryValues): void;\n}\n\nexport const ISearchHistoryService = createDecorator<ISearchHistoryService>('searchHistoryService');\n\nexport interface ISearchHistoryValues {\n\tsearch?: string[];\n\treplace?: string[];\n\tinclude?: string[];\n\texclude?: string[];\n}\n\nexport class SearchHistoryService implements ISearchHistoryService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tpublic static readonly SEARCH_HISTORY_KEY = 'workbench.search.history';\n\n\tprivate readonly _onDidClearHistory = new Emitter<void>();\n\treadonly onDidClearHistory: Event<void> = this._onDidClearHistory.event;\n\n\tconstructor(\n\t\t@IStorageService private readonly storageService: IStorageService\n\t) { }\n\n\tclearHistory(): void {\n\t\tthis.storageService.remove(SearchHistoryService.SEARCH_HISTORY_KEY, StorageScope.WORKSPACE);\n\t\tthis._onDidClearHistory.fire();\n\t}\n\n\tload(): ISearchHistoryValues {\n\t\tlet result: ISearchHistoryValues | undefined;\n\t\tconst raw = this.storageService.get(SearchHistoryService.SEARCH_HISTORY_KEY, StorageScope.WORKSPACE);\n\n\t\tif (raw) {\n\t\t\ttry {\n\t\t\t\tresult = JSON.parse(raw);\n\t\t\t} catch (e) {\n\t\t\t\t// Invalid data\n\t\t\t}\n\t\t}\n\n\t\treturn result || {};\n\t}\n\n\tsave(history: ISearchHistoryValues): void {\n\t\tif (isEmptyObject(history)) {\n\t\t\tthis.storageService.remove(SearchHistoryService.SEARCH_HISTORY_KEY, StorageScope.WORKSPACE);\n\t\t} else {\n\t\t\tthis.storageService.store(SearchHistoryService.SEARCH_HISTORY_KEY, JSON.stringify(history), StorageScope.WORKSPACE, StorageTarget.USER);\n\t\t}\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;AAKA,SAAS,SAAS,aAAa;AAC/B,SAAS,iBAAiB,cAAc,qBAAqB;AAC7D,SAAS,qBAAqB;AAC9B,SAAS,uBAAuB;AAUzB,MAAM,wBAAwB,gBAAuC,sBAAsB;AAS3F,IAAM,uBAAN,MAA4D;AAAA,EAQlE,YACmC,gBACjC;AADiC;AAAA,EAC/B;AAAA,EArCL,OA2BmE;AAAA;AAAA;AAAA,EAGlE,OAAuB,qBAAqB;AAAA,EAE3B,qBAAqB,IAAI,QAAc;AAAA,EAC/C,oBAAiC,KAAK,mBAAmB;AAAA,EAMlE,eAAqB;AACpB,SAAK,eAAe,OAAO,qBAAqB,oBAAoB,aAAa,SAAS;AAC1F,SAAK,mBAAmB,KAAK;AAAA,EAC9B;AAAA,EAEA,OAA6B;AAC5B,QAAI;AACJ,UAAM,MAAM,KAAK,eAAe,IAAI,qBAAqB,oBAAoB,aAAa,SAAS;AAEnG,QAAI,KAAK;AACR,UAAI;AACH,iBAAS,KAAK,MAAM,GAAG;AAAA,MACxB,SAAS,GAAG;AAAA,MAEZ;AAAA,IACD;AAEA,WAAO,UAAU,CAAC;AAAA,EACnB;AAAA,EAEA,KAAK,SAAqC;AACzC,QAAI,cAAc,OAAO,GAAG;AAC3B,WAAK,eAAe,OAAO,qBAAqB,oBAAoB,aAAa,SAAS;AAAA,IAC3F,OAAO;AACN,WAAK,eAAe,MAAM,qBAAqB,oBAAoB,KAAK,UAAU,OAAO,GAAG,aAAa,WAAW,cAAc,IAAI;AAAA,IACvI;AAAA,EACD;AACD;AAvCa,uBAAN;AAAA,EASJ;AAAA,GATU;",
  "names": []
}
