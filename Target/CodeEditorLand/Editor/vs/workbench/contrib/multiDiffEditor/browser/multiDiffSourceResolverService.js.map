{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/multiDiffEditor/browser/multiDiffSourceResolverService.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { BugIndicatingError } from \"../../../../base/common/errors.js\";\nimport type { IValueWithChangeEvent } from \"../../../../base/common/event.js\";\nimport {\n\ttype IDisposable,\n\ttoDisposable,\n} from \"../../../../base/common/lifecycle.js\";\nimport type { URI } from \"../../../../base/common/uri.js\";\nimport type { ContextKeyValue } from \"../../../../platform/contextkey/common/contextkey.js\";\nimport { createDecorator } from \"../../../../platform/instantiation/common/instantiation.js\";\n\nexport const IMultiDiffSourceResolverService =\n\tcreateDecorator<IMultiDiffSourceResolverService>(\n\t\t\"multiDiffSourceResolverService\",\n\t);\n\nexport interface IMultiDiffSourceResolverService {\n\treadonly _serviceBrand: undefined;\n\n\tregisterResolver(resolver: IMultiDiffSourceResolver): IDisposable;\n\n\tresolve(uri: URI): Promise<IResolvedMultiDiffSource | undefined>;\n}\n\nexport interface IMultiDiffSourceResolver {\n\tcanHandleUri(uri: URI): boolean;\n\n\tresolveDiffSource(uri: URI): Promise<IResolvedMultiDiffSource>;\n}\n\nexport interface IResolvedMultiDiffSource {\n\treadonly resources: IValueWithChangeEvent<readonly MultiDiffEditorItem[]>;\n\treadonly contextKeys?: Record<string, ContextKeyValue>;\n}\n\nexport class MultiDiffEditorItem {\n\tconstructor(\n\t\treadonly originalUri: URI | undefined,\n\t\treadonly modifiedUri: URI | undefined,\n\t\treadonly goToFileUri: URI | undefined,\n\t\treadonly contextKeys?: Record<string, ContextKeyValue>,\n\t) {\n\t\tif (!originalUri && !modifiedUri) {\n\t\t\tthrow new BugIndicatingError(\"Invalid arguments\");\n\t\t}\n\t}\n\n\tgetKey(): string {\n\t\treturn JSON.stringify([\n\t\t\tthis.modifiedUri?.toString(),\n\t\t\tthis.originalUri?.toString(),\n\t\t]);\n\t}\n}\n\nexport class MultiDiffSourceResolverService\n\timplements IMultiDiffSourceResolverService\n{\n\tpublic readonly _serviceBrand: undefined;\n\n\tprivate readonly _resolvers = new Set<IMultiDiffSourceResolver>();\n\n\tregisterResolver(resolver: IMultiDiffSourceResolver): IDisposable {\n\t\t// throw on duplicate\n\t\tif (this._resolvers.has(resolver)) {\n\t\t\tthrow new BugIndicatingError(\"Duplicate resolver\");\n\t\t}\n\t\tthis._resolvers.add(resolver);\n\t\treturn toDisposable(() => this._resolvers.delete(resolver));\n\t}\n\n\tresolve(uri: URI): Promise<IResolvedMultiDiffSource | undefined> {\n\t\tfor (const resolver of this._resolvers) {\n\t\t\tif (resolver.canHandleUri(uri)) {\n\t\t\t\treturn resolver.resolveDiffSource(uri);\n\t\t\t}\n\t\t}\n\t\treturn Promise.resolve(undefined);\n\t}\n}\n"],
  "mappings": ";;AAKA,SAAS,0BAA0B;AAEnC;AAAA,EAEC;AAAA,OACM;AAGP,SAAS,uBAAuB;AAEzB,MAAM,kCACZ;AAAA,EACC;AACD;AAqBM,MAAM,oBAAoB;AAAA,EAChC,YACU,aACA,aACA,aACA,aACR;AAJQ;AACA;AACA;AACA;AAET,QAAI,CAAC,eAAe,CAAC,aAAa;AACjC,YAAM,IAAI,mBAAmB,mBAAmB;AAAA,IACjD;AAAA,EACD;AAAA,EAjDD,OAuCiC;AAAA;AAAA;AAAA,EAYhC,SAAiB;AAChB,WAAO,KAAK,UAAU;AAAA,MACrB,KAAK,aAAa,SAAS;AAAA,MAC3B,KAAK,aAAa,SAAS;AAAA,IAC5B,CAAC;AAAA,EACF;AACD;AAEO,MAAM,+BAEb;AAAA,EA7DA,OA6DA;AAAA;AAAA;AAAA,EACiB;AAAA,EAEC,aAAa,oBAAI,IAA8B;AAAA,EAEhE,iBAAiB,UAAiD;AAEjE,QAAI,KAAK,WAAW,IAAI,QAAQ,GAAG;AAClC,YAAM,IAAI,mBAAmB,oBAAoB;AAAA,IAClD;AACA,SAAK,WAAW,IAAI,QAAQ;AAC5B,WAAO,aAAa,MAAM,KAAK,WAAW,OAAO,QAAQ,CAAC;AAAA,EAC3D;AAAA,EAEA,QAAQ,KAAyD;AAChE,eAAW,YAAY,KAAK,YAAY;AACvC,UAAI,SAAS,aAAa,GAAG,GAAG;AAC/B,eAAO,SAAS,kBAAkB,GAAG;AAAA,MACtC;AAAA,IACD;AACA,WAAO,QAAQ,QAAQ,MAAS;AAAA,EACjC;AACD;",
  "names": []
}
