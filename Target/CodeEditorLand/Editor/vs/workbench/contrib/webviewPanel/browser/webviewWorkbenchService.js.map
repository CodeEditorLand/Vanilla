{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/webviewPanel/browser/webviewWorkbenchService.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport {\n\ttype CancelablePromise,\n\tDeferredPromise,\n\tcreateCancelablePromise,\n} from \"../../../../base/common/async.js\";\nimport {\n\ttype CancellationToken,\n\tCancellationTokenSource,\n} from \"../../../../base/common/cancellation.js\";\nimport { memoize } from \"../../../../base/common/decorators.js\";\nimport { isCancellationError } from \"../../../../base/common/errors.js\";\nimport { Emitter, type Event } from \"../../../../base/common/event.js\";\nimport { Iterable } from \"../../../../base/common/iterator.js\";\nimport {\n\tDisposable,\n\ttype IDisposable,\n\tcombinedDisposable,\n\ttoDisposable,\n} from \"../../../../base/common/lifecycle.js\";\nimport { EditorActivation } from \"../../../../platform/editor/common/editor.js\";\nimport {\n\tIInstantiationService,\n\tcreateDecorator,\n} from \"../../../../platform/instantiation/common/instantiation.js\";\nimport type { GroupIdentifier } from \"../../../common/editor.js\";\nimport { DiffEditorInput } from \"../../../common/editor/diffEditorInput.js\";\nimport type { EditorInput } from \"../../../common/editor/editorInput.js\";\nimport {\n\ttype IEditorGroup,\n\tIEditorGroupsService,\n} from \"../../../services/editor/common/editorGroupsService.js\";\nimport {\n\ttype ACTIVE_GROUP_TYPE,\n\tIEditorService,\n\ttype SIDE_GROUP_TYPE,\n} from \"../../../services/editor/common/editorService.js\";\nimport {\n\ttype IOverlayWebview,\n\tIWebviewService,\n\ttype WebviewInitInfo,\n} from \"../../webview/browser/webview.js\";\nimport { CONTEXT_ACTIVE_WEBVIEW_PANEL_ID } from \"./webviewEditor.js\";\nimport {\n\tWebviewInput,\n\ttype WebviewInputInitInfo,\n} from \"./webviewEditorInput.js\";\nimport { WebviewIconManager, type WebviewIcons } from \"./webviewIconManager.js\";\n\nexport interface IWebViewShowOptions {\n\treadonly group?:\n\t\t| IEditorGroup\n\t\t| GroupIdentifier\n\t\t| ACTIVE_GROUP_TYPE\n\t\t| SIDE_GROUP_TYPE;\n\treadonly preserveFocus?: boolean;\n}\n\nexport const IWebviewWorkbenchService =\n\tcreateDecorator<IWebviewWorkbenchService>(\"webviewEditorService\");\n\n/**\n * Service responsible for showing and managing webview editors in the workbench.\n */\nexport interface IWebviewWorkbenchService {\n\treadonly _serviceBrand: undefined;\n\n\t/**\n\t * Manages setting the icons show for a given webview.\n\t */\n\treadonly iconManager: WebviewIconManager;\n\n\t/**\n\t * Event fired when focus switches to a different webview editor.\n\t *\n\t * Fires `undefined` if focus switches to a non-webview editor.\n\t */\n\treadonly onDidChangeActiveWebviewEditor: Event<WebviewInput | undefined>;\n\n\t/**\n\t * Create a new webview editor and open it in the workbench.\n\t */\n\topenWebview(\n\t\twebviewInitInfo: WebviewInitInfo,\n\t\tviewType: string,\n\t\ttitle: string,\n\t\tshowOptions: IWebViewShowOptions,\n\t): WebviewInput;\n\n\t/**\n\t * Open a webview that is being restored from serialization.\n\t */\n\topenRevivedWebview(options: {\n\t\twebviewInitInfo: WebviewInitInfo;\n\t\tviewType: string;\n\t\ttitle: string;\n\t\ticonPath: WebviewIcons | undefined;\n\t\tstate: any;\n\t\tgroup: number | undefined;\n\t}): WebviewInput;\n\n\t/**\n\t * Reveal an already opened webview editor in the workbench.\n\t */\n\trevealWebview(\n\t\twebview: WebviewInput,\n\t\tgroup:\n\t\t\t| IEditorGroup\n\t\t\t| GroupIdentifier\n\t\t\t| ACTIVE_GROUP_TYPE\n\t\t\t| SIDE_GROUP_TYPE,\n\t\tpreserveFocus: boolean,\n\t): void;\n\n\t/**\n\t * Register a new {@link WebviewResolver}.\n\t *\n\t * If there are any webviews awaiting revival that this resolver can handle, they will be resolved by it.\n\t */\n\tregisterResolver(resolver: WebviewResolver): IDisposable;\n\n\t/**\n\t * Check if a webview should be serialized across window reloads.\n\t */\n\tshouldPersist(input: WebviewInput): boolean;\n\n\t/**\n\t * Try to resolve a webview. This will block until a resolver is registered for the webview.\n\t */\n\tresolveWebview(\n\t\twebview: WebviewInput,\n\t\ttoken: CancellationToken,\n\t): Promise<void>;\n}\n\n/**\n * Handles filling in the content of webview before it can be shown to the user.\n */\ninterface WebviewResolver {\n\t/**\n\t * Returns true if the resolver can resolve the given webview.\n\t */\n\tcanResolve(webview: WebviewInput): boolean;\n\n\t/**\n\t * Resolves the webview.\n\t */\n\tresolveWebview(\n\t\twebview: WebviewInput,\n\t\ttoken: CancellationToken,\n\t): Promise<void>;\n}\n\nfunction canRevive(reviver: WebviewResolver, webview: WebviewInput): boolean {\n\treturn reviver.canResolve(webview);\n}\n\nexport class LazilyResolvedWebviewEditorInput extends WebviewInput {\n\tprivate _resolved = false;\n\tprivate _resolvePromise?: CancelablePromise<void>;\n\n\tconstructor(\n\t\tinit: WebviewInputInitInfo,\n\t\twebview: IOverlayWebview,\n\t\t@IWebviewWorkbenchService\n\t\tprivate readonly _webviewWorkbenchService: IWebviewWorkbenchService,\n\t) {\n\t\tsuper(init, webview, _webviewWorkbenchService.iconManager);\n\t}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\t\tthis._resolvePromise?.cancel();\n\t\tthis._resolvePromise = undefined;\n\t}\n\n\t@memoize\n\tpublic override async resolve() {\n\t\tif (!this._resolved) {\n\t\t\tthis._resolved = true;\n\t\t\tthis._resolvePromise = createCancelablePromise((token) =>\n\t\t\t\tthis._webviewWorkbenchService.resolveWebview(this, token),\n\t\t\t);\n\t\t\ttry {\n\t\t\t\tawait this._resolvePromise;\n\t\t\t} catch (e) {\n\t\t\t\tif (!isCancellationError(e)) {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn super.resolve();\n\t}\n\n\tprotected override transfer(\n\t\tother: LazilyResolvedWebviewEditorInput,\n\t): WebviewInput | undefined {\n\t\tif (!super.transfer(other)) {\n\t\t\treturn;\n\t\t}\n\n\t\tother._resolved = this._resolved;\n\t\treturn other;\n\t}\n}\n\nclass RevivalPool {\n\tprivate _awaitingRevival: Array<{\n\t\treadonly input: WebviewInput;\n\t\treadonly promise: DeferredPromise<void>;\n\t\treadonly disposable: IDisposable;\n\t}> = [];\n\n\tpublic enqueueForRestoration(\n\t\tinput: WebviewInput,\n\t\ttoken: CancellationToken,\n\t): Promise<void> {\n\t\tconst promise = new DeferredPromise<void>();\n\n\t\tconst remove = () => {\n\t\t\tconst index = this._awaitingRevival.findIndex(\n\t\t\t\t(entry) => input === entry.input,\n\t\t\t);\n\t\t\tif (index >= 0) {\n\t\t\t\tthis._awaitingRevival.splice(index, 1);\n\t\t\t}\n\t\t};\n\n\t\tconst disposable = combinedDisposable(\n\t\t\tinput.webview.onDidDispose(remove),\n\t\t\ttoken.onCancellationRequested(() => {\n\t\t\t\tremove();\n\t\t\t\tpromise.cancel();\n\t\t\t}),\n\t\t);\n\n\t\tthis._awaitingRevival.push({ input, promise, disposable });\n\n\t\treturn promise.p;\n\t}\n\n\tpublic reviveFor(reviver: WebviewResolver, token: CancellationToken) {\n\t\tconst toRevive = this._awaitingRevival.filter(({ input }) =>\n\t\t\tcanRevive(reviver, input),\n\t\t);\n\t\tthis._awaitingRevival = this._awaitingRevival.filter(\n\t\t\t({ input }) => !canRevive(reviver, input),\n\t\t);\n\n\t\tfor (const { input, promise: resolve, disposable } of toRevive) {\n\t\t\treviver\n\t\t\t\t.resolveWebview(input, token)\n\t\t\t\t.then(\n\t\t\t\t\t(x) => resolve.complete(x),\n\t\t\t\t\t(err) => resolve.error(err),\n\t\t\t\t)\n\t\t\t\t.finally(() => {\n\t\t\t\t\tdisposable.dispose();\n\t\t\t\t});\n\t\t}\n\t}\n}\n\nexport class WebviewEditorService\n\textends Disposable\n\timplements IWebviewWorkbenchService\n{\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate readonly _revivers = new Set<WebviewResolver>();\n\tprivate readonly _revivalPool = new RevivalPool();\n\n\tprivate readonly _iconManager: WebviewIconManager;\n\n\tconstructor(\n\t\t@IEditorGroupsService editorGroupsService: IEditorGroupsService,\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@IInstantiationService\n\t\tprivate readonly _instantiationService: IInstantiationService,\n\t\t@IWebviewService private readonly _webviewService: IWebviewService,\n\t) {\n\t\tsuper();\n\n\t\tthis._iconManager = this._register(\n\t\t\tthis._instantiationService.createInstance(WebviewIconManager),\n\t\t);\n\n\t\tthis._register(\n\t\t\teditorGroupsService.registerContextKeyProvider({\n\t\t\t\tcontextKey: CONTEXT_ACTIVE_WEBVIEW_PANEL_ID,\n\t\t\t\tgetGroupContextKeyValue: (group) =>\n\t\t\t\t\tthis.getWebviewId(group.activeEditor),\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\t_editorService.onDidActiveEditorChange(() => {\n\t\t\t\tthis.updateActiveWebview();\n\t\t\t}),\n\t\t);\n\n\t\t// The user may have switched focus between two sides of a diff editor\n\t\tthis._register(\n\t\t\t_webviewService.onDidChangeActiveWebview(() => {\n\t\t\t\tthis.updateActiveWebview();\n\t\t\t}),\n\t\t);\n\n\t\tthis.updateActiveWebview();\n\t}\n\n\tget iconManager() {\n\t\treturn this._iconManager;\n\t}\n\n\tprivate _activeWebview: WebviewInput | undefined;\n\n\tprivate readonly _onDidChangeActiveWebviewEditor = this._register(\n\t\tnew Emitter<WebviewInput | undefined>(),\n\t);\n\tpublic readonly onDidChangeActiveWebviewEditor =\n\t\tthis._onDidChangeActiveWebviewEditor.event;\n\n\tprivate getWebviewId(input: EditorInput | null): string {\n\t\tlet webviewInput: WebviewInput | undefined;\n\t\tif (input instanceof WebviewInput) {\n\t\t\twebviewInput = input;\n\t\t} else if (input instanceof DiffEditorInput) {\n\t\t\tif (input.primary instanceof WebviewInput) {\n\t\t\t\twebviewInput = input.primary;\n\t\t\t} else if (input.secondary instanceof WebviewInput) {\n\t\t\t\twebviewInput = input.secondary;\n\t\t\t}\n\t\t}\n\n\t\treturn webviewInput?.webview.providedViewType ?? \"\";\n\t}\n\n\tprivate updateActiveWebview() {\n\t\tconst activeInput = this._editorService.activeEditor;\n\n\t\tlet newActiveWebview: WebviewInput | undefined;\n\t\tif (activeInput instanceof WebviewInput) {\n\t\t\tnewActiveWebview = activeInput;\n\t\t} else if (activeInput instanceof DiffEditorInput) {\n\t\t\tif (\n\t\t\t\tactiveInput.primary instanceof WebviewInput &&\n\t\t\t\tactiveInput.primary.webview ===\n\t\t\t\t\tthis._webviewService.activeWebview\n\t\t\t) {\n\t\t\t\tnewActiveWebview = activeInput.primary;\n\t\t\t} else if (\n\t\t\t\tactiveInput.secondary instanceof WebviewInput &&\n\t\t\t\tactiveInput.secondary.webview ===\n\t\t\t\t\tthis._webviewService.activeWebview\n\t\t\t) {\n\t\t\t\tnewActiveWebview = activeInput.secondary;\n\t\t\t}\n\t\t}\n\t\tif (newActiveWebview !== this._activeWebview) {\n\t\t\tthis._activeWebview = newActiveWebview;\n\t\t\tthis._onDidChangeActiveWebviewEditor.fire(newActiveWebview);\n\t\t}\n\t}\n\n\tpublic openWebview(\n\t\twebviewInitInfo: WebviewInitInfo,\n\t\tviewType: string,\n\t\ttitle: string,\n\t\tshowOptions: IWebViewShowOptions,\n\t): WebviewInput {\n\t\tconst webview =\n\t\t\tthis._webviewService.createWebviewOverlay(webviewInitInfo);\n\t\tconst webviewInput = this._instantiationService.createInstance(\n\t\t\tWebviewInput,\n\t\t\t{\n\t\t\t\tviewType,\n\t\t\t\tname: title,\n\t\t\t\tprovidedId: webviewInitInfo.providedViewType,\n\t\t\t},\n\t\t\twebview,\n\t\t\tthis.iconManager,\n\t\t);\n\t\tthis._editorService.openEditor(\n\t\t\twebviewInput,\n\t\t\t{\n\t\t\t\tpinned: true,\n\t\t\t\tpreserveFocus: showOptions.preserveFocus,\n\t\t\t\t// preserve pre 1.38 behaviour to not make group active when preserveFocus: true\n\t\t\t\t// but make sure to restore the editor to fix https://github.com/microsoft/vscode/issues/79633\n\t\t\t\tactivation: showOptions.preserveFocus\n\t\t\t\t\t? EditorActivation.RESTORE\n\t\t\t\t\t: undefined,\n\t\t\t},\n\t\t\tshowOptions.group,\n\t\t);\n\t\treturn webviewInput;\n\t}\n\n\tpublic revealWebview(\n\t\twebview: WebviewInput,\n\t\tgroup:\n\t\t\t| IEditorGroup\n\t\t\t| GroupIdentifier\n\t\t\t| ACTIVE_GROUP_TYPE\n\t\t\t| SIDE_GROUP_TYPE,\n\t\tpreserveFocus: boolean,\n\t): void {\n\t\tconst topLevelEditor = this.findTopLevelEditorForWebview(webview);\n\n\t\tthis._editorService.openEditor(\n\t\t\ttopLevelEditor,\n\t\t\t{\n\t\t\t\tpreserveFocus,\n\t\t\t\t// preserve pre 1.38 behaviour to not make group active when preserveFocus: true\n\t\t\t\t// but make sure to restore the editor to fix https://github.com/microsoft/vscode/issues/79633\n\t\t\t\tactivation: preserveFocus\n\t\t\t\t\t? EditorActivation.RESTORE\n\t\t\t\t\t: undefined,\n\t\t\t},\n\t\t\tgroup,\n\t\t);\n\t}\n\n\tprivate findTopLevelEditorForWebview(webview: WebviewInput): EditorInput {\n\t\tfor (const editor of this._editorService.editors) {\n\t\t\tif (editor === webview) {\n\t\t\t\treturn editor;\n\t\t\t}\n\t\t\tif (editor instanceof DiffEditorInput) {\n\t\t\t\tif (\n\t\t\t\t\twebview === editor.primary ||\n\t\t\t\t\twebview === editor.secondary\n\t\t\t\t) {\n\t\t\t\t\treturn editor;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn webview;\n\t}\n\n\tpublic openRevivedWebview(options: {\n\t\twebviewInitInfo: WebviewInitInfo;\n\t\tviewType: string;\n\t\ttitle: string;\n\t\ticonPath: WebviewIcons | undefined;\n\t\tstate: any;\n\t\tgroup: number | undefined;\n\t}): WebviewInput {\n\t\tconst webview = this._webviewService.createWebviewOverlay(\n\t\t\toptions.webviewInitInfo,\n\t\t);\n\t\twebview.state = options.state;\n\n\t\tconst webviewInput = this._instantiationService.createInstance(\n\t\t\tLazilyResolvedWebviewEditorInput,\n\t\t\t{\n\t\t\t\tviewType: options.viewType,\n\t\t\t\tprovidedId: options.webviewInitInfo.providedViewType,\n\t\t\t\tname: options.title,\n\t\t\t},\n\t\t\twebview,\n\t\t);\n\t\twebviewInput.iconPath = options.iconPath;\n\n\t\tif (typeof options.group === \"number\") {\n\t\t\twebviewInput.updateGroup(options.group);\n\t\t}\n\t\treturn webviewInput;\n\t}\n\n\tpublic registerResolver(reviver: WebviewResolver): IDisposable {\n\t\tthis._revivers.add(reviver);\n\n\t\tconst cts = new CancellationTokenSource();\n\t\tthis._revivalPool.reviveFor(reviver, cts.token);\n\n\t\treturn toDisposable(() => {\n\t\t\tthis._revivers.delete(reviver);\n\t\t\tcts.dispose(true);\n\t\t});\n\t}\n\n\tpublic shouldPersist(webview: WebviewInput): boolean {\n\t\t// Revived webviews may not have an actively registered reviver but we still want to persist them\n\t\t// since a reviver should exist when it is actually needed.\n\t\tif (webview instanceof LazilyResolvedWebviewEditorInput) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn Iterable.some(this._revivers.values(), (reviver) =>\n\t\t\tcanRevive(reviver, webview),\n\t\t);\n\t}\n\n\tprivate async tryRevive(\n\t\twebview: WebviewInput,\n\t\ttoken: CancellationToken,\n\t): Promise<boolean> {\n\t\tfor (const reviver of this._revivers.values()) {\n\t\t\tif (canRevive(reviver, webview)) {\n\t\t\t\tawait reviver.resolveWebview(webview, token);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic async resolveWebview(\n\t\twebview: WebviewInput,\n\t\ttoken: CancellationToken,\n\t): Promise<void> {\n\t\tconst didRevive = await this.tryRevive(webview, token);\n\t\tif (!didRevive && !token.isCancellationRequested) {\n\t\t\t// A reviver may not be registered yet. Put into pool and resolve promise when we can revive\n\t\t\treturn this._revivalPool.enqueueForRestoration(webview, token);\n\t\t}\n\t}\n\n\tpublic setIcons(id: string, iconPath: WebviewIcons | undefined): void {\n\t\tthis._iconManager.setIcons(id, iconPath);\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
