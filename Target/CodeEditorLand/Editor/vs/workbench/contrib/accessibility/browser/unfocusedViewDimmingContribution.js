var u=Object.defineProperty;var b=Object.getOwnPropertyDescriptor;var m=(n,e,i,o)=>{for(var r=o>1?void 0:o?b(e,i):e,a=n.length-1,t;a>=0;a--)(t=n[a])&&(r=(o?t(e,i,r):t(r))||r);return o&&r&&u(e,i,r),r},f=(n,e)=>(i,o)=>e(i,o,n);import{createStyleSheet as p}from"../../../../base/browser/dom.js";import{Event as h}from"../../../../base/common/event.js";import{Disposable as y,DisposableStore as w,toDisposable as E}from"../../../../base/common/lifecycle.js";import{clamp as _}from"../../../../base/common/numbers.js";import{IConfigurationService as g}from"../../../../platform/configuration/common/configuration.js";import"../../../common/contributions.js";import{AccessibilityWorkbenchSettingId as l,ViewDimUnfocusedOpacityProperties as d}from"./accessibilityConfiguration.js";let c=class extends y{_styleElement;_styleElementDisposables=void 0;constructor(e){super(),this._register(E(()=>this._removeStyleElement())),this._register(h.runAndSubscribe(e.onDidChangeConfiguration,i=>{if(i&&!i.affectsConfiguration(l.DimUnfocusedEnabled)&&!i.affectsConfiguration(l.DimUnfocusedOpacity))return;let o="";if(k(e.getValue(l.DimUnfocusedEnabled),!1)){const a=_(S(e.getValue(l.DimUnfocusedOpacity),d.Default),d.Minimum,d.Maximum);if(a!==1){const t=new Set,s=`filter: opacity(${a});`;t.add(`.monaco-workbench .pane-body.integrated-terminal:not(:focus-within) .tabs-container { ${s} }`),t.add(`.monaco-workbench .pane-body.integrated-terminal .terminal-wrapper:not(:focus-within) { ${s} }`),t.add(`.monaco-workbench .editor-instance:not(:focus-within) .monaco-editor { ${s} }`),t.add(`.monaco-workbench .editor-instance:not(:focus-within) .breadcrumbs-below-tabs { ${s} }`),t.add(`.monaco-workbench .editor-instance:not(:focus-within) .terminal-wrapper { ${s} }`),t.add(`.monaco-workbench .editor-instance:not(:focus-within) .settings-editor { ${s} }`),t.add(`.monaco-workbench .editor-instance:not(:focus-within) .keybindings-editor { ${s} }`),t.add(`.monaco-workbench .editor-instance:not(:focus-within) .monaco-editor-pane-placeholder { ${s} }`),t.add(`.monaco-workbench .editor-instance:not(:focus-within) .gettingStartedContainer { ${s} }`),o=[...t].join(`
`)}}o.length===0?this._removeStyleElement():this._getStyleElement().textContent=o}))}_getStyleElement(){return this._styleElement||(this._styleElementDisposables=new w,this._styleElement=p(void 0,void 0,this._styleElementDisposables),this._styleElement.className="accessibilityUnfocusedViewOpacity"),this._styleElement}_removeStyleElement(){this._styleElementDisposables?.dispose(),this._styleElementDisposables=void 0,this._styleElement=void 0}};c=m([f(0,g)],c);function k(n,e){return typeof n=="boolean"?n:e}function S(n,e){return typeof n=="number"?n:e}export{c as UnfocusedViewDimmingContribution};
