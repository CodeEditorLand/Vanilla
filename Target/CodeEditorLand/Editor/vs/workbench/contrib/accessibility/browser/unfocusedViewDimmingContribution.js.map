{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/accessibility/browser/unfocusedViewDimmingContribution.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { createStyleSheet } from \"../../../../base/browser/dom.js\";\nimport { Event } from \"../../../../base/common/event.js\";\nimport {\n\tDisposable,\n\tDisposableStore,\n\ttoDisposable,\n} from \"../../../../base/common/lifecycle.js\";\nimport { clamp } from \"../../../../base/common/numbers.js\";\nimport { IConfigurationService } from \"../../../../platform/configuration/common/configuration.js\";\nimport type { IWorkbenchContribution } from \"../../../common/contributions.js\";\nimport {\n\tAccessibilityWorkbenchSettingId,\n\tViewDimUnfocusedOpacityProperties,\n} from \"./accessibilityConfiguration.js\";\n\nexport class UnfocusedViewDimmingContribution\n\textends Disposable\n\timplements IWorkbenchContribution\n{\n\tprivate _styleElement?: HTMLStyleElement;\n\tprivate _styleElementDisposables: DisposableStore | undefined = undefined;\n\n\tconstructor(\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(toDisposable(() => this._removeStyleElement()));\n\n\t\tthis._register(\n\t\t\tEvent.runAndSubscribe(\n\t\t\t\tconfigurationService.onDidChangeConfiguration,\n\t\t\t\t(e) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\te &&\n\t\t\t\t\t\t!e.affectsConfiguration(\n\t\t\t\t\t\t\tAccessibilityWorkbenchSettingId.DimUnfocusedEnabled,\n\t\t\t\t\t\t) &&\n\t\t\t\t\t\t!e.affectsConfiguration(\n\t\t\t\t\t\t\tAccessibilityWorkbenchSettingId.DimUnfocusedOpacity,\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tlet cssTextContent = \"\";\n\n\t\t\t\t\tconst enabled = ensureBoolean(\n\t\t\t\t\t\tconfigurationService.getValue(\n\t\t\t\t\t\t\tAccessibilityWorkbenchSettingId.DimUnfocusedEnabled,\n\t\t\t\t\t\t),\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t);\n\t\t\t\t\tif (enabled) {\n\t\t\t\t\t\tconst opacity = clamp(\n\t\t\t\t\t\t\tensureNumber(\n\t\t\t\t\t\t\t\tconfigurationService.getValue(\n\t\t\t\t\t\t\t\t\tAccessibilityWorkbenchSettingId.DimUnfocusedOpacity,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tViewDimUnfocusedOpacityProperties.Default,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tViewDimUnfocusedOpacityProperties.Minimum,\n\t\t\t\t\t\t\tViewDimUnfocusedOpacityProperties.Maximum,\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tif (opacity !== 1) {\n\t\t\t\t\t\t\t// These filter rules are more specific than may be expected as the `filter`\n\t\t\t\t\t\t\t// rule can cause problems if it's used inside the element like on editor hovers\n\t\t\t\t\t\t\tconst rules = new Set<string>();\n\t\t\t\t\t\t\tconst filterRule = `filter: opacity(${opacity});`;\n\t\t\t\t\t\t\t// Terminal tabs\n\t\t\t\t\t\t\trules.add(\n\t\t\t\t\t\t\t\t`.monaco-workbench .pane-body.integrated-terminal:not(:focus-within) .tabs-container { ${filterRule} }`,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t// Terminals\n\t\t\t\t\t\t\trules.add(\n\t\t\t\t\t\t\t\t`.monaco-workbench .pane-body.integrated-terminal .terminal-wrapper:not(:focus-within) { ${filterRule} }`,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t// Text editors\n\t\t\t\t\t\t\trules.add(\n\t\t\t\t\t\t\t\t`.monaco-workbench .editor-instance:not(:focus-within) .monaco-editor { ${filterRule} }`,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t// Breadcrumbs\n\t\t\t\t\t\t\trules.add(\n\t\t\t\t\t\t\t\t`.monaco-workbench .editor-instance:not(:focus-within) .breadcrumbs-below-tabs { ${filterRule} }`,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t// Terminal editors\n\t\t\t\t\t\t\trules.add(\n\t\t\t\t\t\t\t\t`.monaco-workbench .editor-instance:not(:focus-within) .terminal-wrapper { ${filterRule} }`,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t// Settings editor\n\t\t\t\t\t\t\trules.add(\n\t\t\t\t\t\t\t\t`.monaco-workbench .editor-instance:not(:focus-within) .settings-editor { ${filterRule} }`,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t// Keybindings editor\n\t\t\t\t\t\t\trules.add(\n\t\t\t\t\t\t\t\t`.monaco-workbench .editor-instance:not(:focus-within) .keybindings-editor { ${filterRule} }`,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t// Editor placeholder (error case)\n\t\t\t\t\t\t\trules.add(\n\t\t\t\t\t\t\t\t`.monaco-workbench .editor-instance:not(:focus-within) .monaco-editor-pane-placeholder { ${filterRule} }`,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t// Welcome editor\n\t\t\t\t\t\t\trules.add(\n\t\t\t\t\t\t\t\t`.monaco-workbench .editor-instance:not(:focus-within) .gettingStartedContainer { ${filterRule} }`,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcssTextContent = [...rules].join(\"\\n\");\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (cssTextContent.length === 0) {\n\t\t\t\t\t\tthis._removeStyleElement();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._getStyleElement().textContent = cssTextContent;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\t}\n\n\tprivate _getStyleElement(): HTMLStyleElement {\n\t\tif (!this._styleElement) {\n\t\t\tthis._styleElementDisposables = new DisposableStore();\n\t\t\tthis._styleElement = createStyleSheet(\n\t\t\t\tundefined,\n\t\t\t\tundefined,\n\t\t\t\tthis._styleElementDisposables,\n\t\t\t);\n\t\t\tthis._styleElement.className = \"accessibilityUnfocusedViewOpacity\";\n\t\t}\n\t\treturn this._styleElement;\n\t}\n\n\tprivate _removeStyleElement(): void {\n\t\tthis._styleElementDisposables?.dispose();\n\t\tthis._styleElementDisposables = undefined;\n\t\tthis._styleElement = undefined;\n\t}\n}\n\nfunction ensureBoolean(value: unknown, defaultValue: boolean): boolean {\n\treturn typeof value === \"boolean\" ? value : defaultValue;\n}\n\nfunction ensureNumber(value: unknown, defaultValue: number): number {\n\treturn typeof value === \"number\" ? value : defaultValue;\n}\n"],
  "mappings": ";;;;;;;;;;;;AAKA,SAAS,wBAAwB;AACjC,SAAS,aAAa;AACtB;AAAA,EACC;AAAA,EACA;AAAA,EACA;AAAA,OACM;AACP,SAAS,aAAa;AACtB,SAAS,6BAA6B;AAEtC;AAAA,EACC;AAAA,EACA;AAAA,OACM;AAEA,IAAM,mCAAN,cACE,WAET;AAAA,EAvBA,OAuBA;AAAA;AAAA;AAAA,EACS;AAAA,EACA,2BAAwD;AAAA,EAEhE,YACwB,sBACtB;AACD,UAAM;AAEN,SAAK,UAAU,aAAa,MAAM,KAAK,oBAAoB,CAAC,CAAC;AAE7D,SAAK;AAAA,MACJ,MAAM;AAAA,QACL,qBAAqB;AAAA,QACrB,CAAC,MAAM;AACN,cACC,KACA,CAAC,EAAE;AAAA,YACF,gCAAgC;AAAA,UACjC,KACA,CAAC,EAAE;AAAA,YACF,gCAAgC;AAAA,UACjC,GACC;AACD;AAAA,UACD;AAEA,cAAI,iBAAiB;AAErB,gBAAM,UAAU;AAAA,YACf,qBAAqB;AAAA,cACpB,gCAAgC;AAAA,YACjC;AAAA,YACA;AAAA,UACD;AACA,cAAI,SAAS;AACZ,kBAAM,UAAU;AAAA,cACf;AAAA,gBACC,qBAAqB;AAAA,kBACpB,gCAAgC;AAAA,gBACjC;AAAA,gBACA,kCAAkC;AAAA,cACnC;AAAA,cACA,kCAAkC;AAAA,cAClC,kCAAkC;AAAA,YACnC;AAEA,gBAAI,YAAY,GAAG;AAGlB,oBAAM,QAAQ,oBAAI,IAAY;AAC9B,oBAAM,aAAa,mBAAmB,OAAO;AAE7C,oBAAM;AAAA,gBACL,yFAAyF,UAAU;AAAA,cACpG;AAEA,oBAAM;AAAA,gBACL,2FAA2F,UAAU;AAAA,cACtG;AAEA,oBAAM;AAAA,gBACL,0EAA0E,UAAU;AAAA,cACrF;AAEA,oBAAM;AAAA,gBACL,mFAAmF,UAAU;AAAA,cAC9F;AAEA,oBAAM;AAAA,gBACL,6EAA6E,UAAU;AAAA,cACxF;AAEA,oBAAM;AAAA,gBACL,4EAA4E,UAAU;AAAA,cACvF;AAEA,oBAAM;AAAA,gBACL,+EAA+E,UAAU;AAAA,cAC1F;AAEA,oBAAM;AAAA,gBACL,2FAA2F,UAAU;AAAA,cACtG;AAEA,oBAAM;AAAA,gBACL,oFAAoF,UAAU;AAAA,cAC/F;AACA,+BAAiB,CAAC,GAAG,KAAK,EAAE,KAAK,IAAI;AAAA,YACtC;AAAA,UACD;AAEA,cAAI,eAAe,WAAW,GAAG;AAChC,iBAAK,oBAAoB;AAAA,UAC1B,OAAO;AACN,iBAAK,iBAAiB,EAAE,cAAc;AAAA,UACvC;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAAA,EAEQ,mBAAqC;AAC5C,QAAI,CAAC,KAAK,eAAe;AACxB,WAAK,2BAA2B,IAAI,gBAAgB;AACpD,WAAK,gBAAgB;AAAA,QACpB;AAAA,QACA;AAAA,QACA,KAAK;AAAA,MACN;AACA,WAAK,cAAc,YAAY;AAAA,IAChC;AACA,WAAO,KAAK;AAAA,EACb;AAAA,EAEQ,sBAA4B;AACnC,SAAK,0BAA0B,QAAQ;AACvC,SAAK,2BAA2B;AAChC,SAAK,gBAAgB;AAAA,EACtB;AACD;AA3Ha,mCAAN;AAAA,EAQJ;AAAA,GARU;AA6Hb,SAAS,cAAc,OAAgB,cAAgC;AACtE,SAAO,OAAO,UAAU,YAAY,QAAQ;AAC7C;AAFS;AAIT,SAAS,aAAa,OAAgB,cAA8B;AACnE,SAAO,OAAO,UAAU,WAAW,QAAQ;AAC5C;AAFS;",
  "names": []
}
