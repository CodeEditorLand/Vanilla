{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/accessibility/browser/unfocusedViewDimmingContribution.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { createStyleSheet } from \"../../../../base/browser/dom.js\";\nimport { Event } from \"../../../../base/common/event.js\";\nimport {\n\tDisposable,\n\tDisposableStore,\n\ttoDisposable,\n} from \"../../../../base/common/lifecycle.js\";\nimport { clamp } from \"../../../../base/common/numbers.js\";\nimport { IConfigurationService } from \"../../../../platform/configuration/common/configuration.js\";\nimport type { IWorkbenchContribution } from \"../../../common/contributions.js\";\nimport {\n\tAccessibilityWorkbenchSettingId,\n\tViewDimUnfocusedOpacityProperties,\n} from \"./accessibilityConfiguration.js\";\n\nexport class UnfocusedViewDimmingContribution\n\textends Disposable\n\timplements IWorkbenchContribution\n{\n\tprivate _styleElement?: HTMLStyleElement;\n\tprivate _styleElementDisposables: DisposableStore | undefined = undefined;\n\n\tconstructor(\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(toDisposable(() => this._removeStyleElement()));\n\n\t\tthis._register(Event.runAndSubscribe(configurationService.onDidChangeConfiguration, e => {\n\t\t\tif (e && !e.affectsConfiguration(AccessibilityWorkbenchSettingId.DimUnfocusedEnabled) && !e.affectsConfiguration(AccessibilityWorkbenchSettingId.DimUnfocusedOpacity)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet cssTextContent = '';\n\n\t\t\tconst enabled = ensureBoolean(configurationService.getValue(AccessibilityWorkbenchSettingId.DimUnfocusedEnabled), false);\n\t\t\tif (enabled) {\n\t\t\t\tconst opacity = clamp(\n\t\t\t\t\tensureNumber(configurationService.getValue(AccessibilityWorkbenchSettingId.DimUnfocusedOpacity), ViewDimUnfocusedOpacityProperties.Default),\n\t\t\t\t\tViewDimUnfocusedOpacityProperties.Minimum,\n\t\t\t\t\tViewDimUnfocusedOpacityProperties.Maximum\n\t\t\t\t);\n\n\t\t\t\tif (opacity !== 1) {\n\t\t\t\t\t// These filter rules are more specific than may be expected as the `filter`\n\t\t\t\t\t// rule can cause problems if it's used inside the element like on editor hovers\n\t\t\t\t\tconst rules = new Set<string>();\n\t\t\t\t\tconst filterRule = `filter: opacity(${opacity});`;\n\t\t\t\t\t// Terminal tabs\n\t\t\t\t\trules.add(`.monaco-workbench .pane-body.integrated-terminal:not(:focus-within) .tabs-container { ${filterRule} }`);\n\t\t\t\t\t// Terminals\n\t\t\t\t\trules.add(`.monaco-workbench .pane-body.integrated-terminal .terminal-wrapper:not(:focus-within) { ${filterRule} }`);\n\t\t\t\t\t// Text editors\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .monaco-editor { ${filterRule} }`);\n\t\t\t\t\t// Breadcrumbs\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .breadcrumbs-below-tabs { ${filterRule} }`);\n\t\t\t\t\t// Terminal editors\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .terminal-wrapper { ${filterRule} }`);\n\t\t\t\t\t// Settings editor\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .settings-editor { ${filterRule} }`);\n\t\t\t\t\t// Keybindings editor\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .keybindings-editor { ${filterRule} }`);\n\t\t\t\t\t// Editor placeholder (error case)\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .monaco-editor-pane-placeholder { ${filterRule} }`);\n\t\t\t\t\t// Welcome editor\n\t\t\t\t\trules.add(`.monaco-workbench .editor-instance:not(:focus-within) .gettingStartedContainer { ${filterRule} }`);\n\t\t\t\t\tcssTextContent = [...rules].join('\\n');\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif (cssTextContent.length === 0) {\n\t\t\t\tthis._removeStyleElement();\n\t\t\t} else {\n\t\t\t\tthis._getStyleElement().textContent = cssTextContent;\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _getStyleElement(): HTMLStyleElement {\n\t\tif (!this._styleElement) {\n\t\t\tthis._styleElementDisposables = new DisposableStore();\n\t\t\tthis._styleElement = createStyleSheet(\n\t\t\t\tundefined,\n\t\t\t\tundefined,\n\t\t\t\tthis._styleElementDisposables,\n\t\t\t);\n\t\t\tthis._styleElement.className = \"accessibilityUnfocusedViewOpacity\";\n\t\t}\n\t\treturn this._styleElement;\n\t}\n\n\tprivate _removeStyleElement(): void {\n\t\tthis._styleElementDisposables?.dispose();\n\t\tthis._styleElementDisposables = undefined;\n\t\tthis._styleElement = undefined;\n\t}\n}\n\nfunction ensureBoolean(value: unknown, defaultValue: boolean): boolean {\n\treturn typeof value === \"boolean\" ? value : defaultValue;\n}\n\nfunction ensureNumber(value: unknown, defaultValue: number): number {\n\treturn typeof value === \"number\" ? value : defaultValue;\n}\n"],
  "mappings": ";;;;;;;;;;;;AAKA,SAAS,wBAAwB;AACjC,SAAS,aAAa;AACtB;AAAA,EACC;AAAA,EACA;AAAA,EACA;AAAA,OACM;AACP,SAAS,aAAa;AACtB,SAAS,6BAA6B;AAEtC;AAAA,EACC;AAAA,EACA;AAAA,OACM;AAEA,IAAM,mCAAN,cACE,WAET;AAAA,EAvBA,OAuBA;AAAA;AAAA;AAAA,EACS;AAAA,EACA,2BAAwD;AAAA,EAEhE,YACwB,sBACtB;AACD,UAAM;AAEN,SAAK,UAAU,aAAa,MAAM,KAAK,oBAAoB,CAAC,CAAC;AAE7D,SAAK,UAAU,MAAM,gBAAgB,qBAAqB,0BAA0B,OAAK;AACxF,UAAI,KAAK,CAAC,EAAE,qBAAqB,gCAAgC,mBAAmB,KAAK,CAAC,EAAE,qBAAqB,gCAAgC,mBAAmB,GAAG;AACtK;AAAA,MACD;AAEA,UAAI,iBAAiB;AAErB,YAAM,UAAU,cAAc,qBAAqB,SAAS,gCAAgC,mBAAmB,GAAG,KAAK;AACvH,UAAI,SAAS;AACZ,cAAM,UAAU;AAAA,UACf,aAAa,qBAAqB,SAAS,gCAAgC,mBAAmB,GAAG,kCAAkC,OAAO;AAAA,UAC1I,kCAAkC;AAAA,UAClC,kCAAkC;AAAA,QACnC;AAEA,YAAI,YAAY,GAAG;AAGlB,gBAAM,QAAQ,oBAAI,IAAY;AAC9B,gBAAM,aAAa,mBAAmB,OAAO;AAE7C,gBAAM,IAAI,yFAAyF,UAAU,IAAI;AAEjH,gBAAM,IAAI,2FAA2F,UAAU,IAAI;AAEnH,gBAAM,IAAI,0EAA0E,UAAU,IAAI;AAElG,gBAAM,IAAI,mFAAmF,UAAU,IAAI;AAE3G,gBAAM,IAAI,6EAA6E,UAAU,IAAI;AAErG,gBAAM,IAAI,4EAA4E,UAAU,IAAI;AAEpG,gBAAM,IAAI,+EAA+E,UAAU,IAAI;AAEvG,gBAAM,IAAI,2FAA2F,UAAU,IAAI;AAEnH,gBAAM,IAAI,oFAAoF,UAAU,IAAI;AAC5G,2BAAiB,CAAC,GAAG,KAAK,EAAE,KAAK,IAAI;AAAA,QACtC;AAAA,MAED;AAEA,UAAI,eAAe,WAAW,GAAG;AAChC,aAAK,oBAAoB;AAAA,MAC1B,OAAO;AACN,aAAK,iBAAiB,EAAE,cAAc;AAAA,MACvC;AAAA,IACD,CAAC,CAAC;AAAA,EACH;AAAA,EAEQ,mBAAqC;AAC5C,QAAI,CAAC,KAAK,eAAe;AACxB,WAAK,2BAA2B,IAAI,gBAAgB;AACpD,WAAK,gBAAgB;AAAA,QACpB;AAAA,QACA;AAAA,QACA,KAAK;AAAA,MACN;AACA,WAAK,cAAc,YAAY;AAAA,IAChC;AACA,WAAO,KAAK;AAAA,EACb;AAAA,EAEQ,sBAA4B;AACnC,SAAK,0BAA0B,QAAQ;AACvC,SAAK,2BAA2B;AAChC,SAAK,gBAAgB;AAAA,EACtB;AACD;AAnFa,mCAAN;AAAA,EAQJ;AAAA,GARU;AAqFb,SAAS,cAAc,OAAgB,cAAgC;AACtE,SAAO,OAAO,UAAU,YAAY,QAAQ;AAC7C;AAFS;AAIT,SAAS,aAAa,OAAgB,cAA8B;AACnE,SAAO,OAAO,UAAU,WAAW,QAAQ;AAC5C;AAFS;",
  "names": []
}
