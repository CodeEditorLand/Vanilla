var dR=Object.defineProperty;var cR=Object.getOwnPropertyDescriptor;var L=(i,e,t,n)=>{for(var o=n>1?void 0:n?cR(e,t):e,r=i.length-1,s;r>=0;r--)(s=i[r])&&(o=(n?s(e,t,o):s(o))||o);return n&&o&&dR(e,t,o),o},w=(i,e)=>(t,n)=>e(t,n,i);function $p(i,e){let t=i;typeof t.vscodeWindowId!="number"&&Object.defineProperty(t,"vscodeWindowId",{get:()=>e})}var me=window;function Ub(i){return i===me?!1:typeof i?.vscodeWindowId=="number"}function OC(i,e){let t=uR(i,e);if(t!==-1)return i[t]}function uR(i,e,t=i.length-1){for(let n=t;n>=0;n--){let o=i[n];if(e(o))return n}return-1}function Vb(i,e){let t=vc(i,e);return t===-1?void 0:i[t]}function vc(i,e,t=0,n=i.length){let o=t,r=n;for(;o<r;){let s=Math.floor((o+r)/2);e(i[s])?o=s+1:r=s}return o-1}function jp(i,e,t=0,n=i.length){let o=t,r=n;for(;o<r;){let s=Math.floor((o+r)/2);e(i[s])?r=s:o=s+1}return o}var zb=class{unexpectedErrorHandler;listeners;constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?Ir.isErrorNoTelemetry(e)?new Ir(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(t=>{t(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},AC=new zb;function cl(i){AC.onUnexpectedError(i)}function Ne(i){yc(i)||AC.onUnexpectedError(i)}var Hb="Canceled";function yc(i){return i instanceof Bn?!0:i instanceof Error&&i.name===Hb&&i.message===Hb}var Bn=class extends Error{constructor(){super(Hb),this.name=this.message}};function sa(i){return i?new Error(`Illegal argument: ${i}`):new Error("Illegal argument")}function MC(i){return i?new Error(`Illegal state: ${i}`):new Error("Illegal state")}var Yp=class extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}};var Ir=class i extends Error{name;constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof i)return e;let t=new i;return t.message=e.message,t.stack=e.stack,t}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},Ge=class i extends Error{constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,i.prototype)}};function Qn(i,e=0){return i[i.length-(1+e)]}function Bt(i,e,t=(n,o)=>n===o){if(i===e)return!0;if(!i||!e||i.length!==e.length)return!1;for(let n=0,o=i.length;n<o;n++)if(!t(i[n],e[n]))return!1;return!0}function FC(i,e,t){return pR(i.length,n=>t(i[n],e))}function pR(i,e){let t=0,n=i-1;for(;t<=n;){let o=(t+n)/2|0,r=e(o);if(r<0)t=o+1;else if(r>0)n=o-1;else return o}return-(t+1)}function Yt(i){return i.filter(e=>!!e)}function io(i,e=t=>t){let t=new Set;return i.filter(n=>{let o=e(n);return t.has(o)?!1:(t.add(o),!0)})}function ul(i,e){let t=typeof e=="number"?i:0;typeof e=="number"?t=i:(t=0,e=i);let n=[];if(t<=e)for(let o=t;o<e;o++)n.push(o);else for(let o=t;o>e;o--)n.push(o);return n}function Qp(i,e){return i.push(e),()=>hR(i,e)}function hR(i,e){let t=i.indexOf(e);if(t>-1)return i.splice(t,1),e}function Jr(i,e,t){let n=i.slice(0,e),o=i.slice(e);return n.concat(t,o)}function Kb(i,e){for(let t of e)i.push(t)}var BC;(a=>{function i(l){return l<0}a.isLessThan=i;function e(l){return l<=0}a.isLessThanOrEqual=e;function t(l){return l>0}a.isGreaterThan=t;function n(l){return l===0}a.isNeitherLessOrGreaterThan=n,a.greaterThan=1,a.lessThan=-1,a.neitherLessOrGreaterThan=0})(BC||={});function Gb(i,e){return(t,n)=>e(i(t),i(n))}var aa=class{constructor(e){this.items=e}firstIdx=0;lastIdx=this.items.length-1;get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let t=this.firstIdx;for(;t<this.items.length&&e(this.items[t]);)t++;let n=t===this.firstIdx?null:this.items.slice(this.firstIdx,t);return this.firstIdx=t,n}takeFromEndWhile(e){let t=this.lastIdx;for(;t>=0&&e(this.items[t]);)t--;let n=t===this.lastIdx?null:this.items.slice(t+1,this.lastIdx+1);return this.lastIdx=t,n}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let t=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,t}},xr=class i{constructor(e){this.iterate=e}static empty=new i(e=>{});forEach(e){this.iterate(t=>(e(t),!0))}toArray(){let e=[];return this.iterate(t=>(e.push(t),!0)),e}filter(e){return new i(t=>this.iterate(n=>e(n)?t(n):!0))}map(e){return new i(t=>this.iterate(n=>t(e(n))))}some(e){let t=!1;return this.iterate(n=>(t=e(n),!t)),t}findFirst(e){let t;return this.iterate(n=>e(n)?(t=n,!1):!0),t}findLast(e){let t;return this.iterate(n=>(e(n)&&(t=n),!0)),t}findLastMaxBy(e){let t,n=!0;return this.iterate(o=>((n||BC.isGreaterThan(e(o,t)))&&(n=!1,t=o),!0)),t}};function qb(i,e){let t=Object.create(null);for(let n of i){let o=e(n),r=t[o];r||(r=t[o]=[]),r.push(n)}return t}function $b(){return globalThis._VSCODE_NLS_MESSAGES}function Ic(){return globalThis._VSCODE_NLS_LANGUAGE}var mR=Ic()==="pseudo"||typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;function Xp(i,e){let t;return e.length===0?t=i:t=i.replace(/\{(\d+)\}/g,(n,o)=>{let r=o[0],s=e[r],a=n;return typeof s=="string"?a=s:(typeof s=="number"||typeof s=="boolean"||s===void 0||s===null)&&(a=String(s)),a}),mR&&(t="\uFF3B"+t.replace(/[aouei]/g,"$&$&")+"\uFF3D"),t}function d(i,e,...t){return Xp(typeof i=="number"?WC(i,e):e,t)}function WC(i,e){let t=$b()?.[i];if(typeof t!="string"){if(typeof e=="string")return e;throw new Error(`!!! NLS MISSING: ${i} !!!`)}return t}function Xe(i,e,...t){let n;typeof i=="number"?n=WC(i,e):n=e;let o=Xp(n,t);return{value:o,original:e===n?o:Xp(e,t)}}var pl="en",Ec=!1,Cc=!1,Sc=!1,fR=!1,HC=!1,jb=!1,bR=!1,Yb=!1,vR=!1,KC=!1,xc,Jp=pl,UC=pl,yR,Sr,Er=globalThis,Di;typeof Er.vscode<"u"&&typeof Er.vscode.process<"u"?Di=Er.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Di=process);var GC=typeof Di?.versions?.electron=="string",IR=GC&&Di?.type==="renderer";if(typeof Di=="object"){Ec=Di.platform==="win32",Cc=Di.platform==="darwin",Sc=Di.platform==="linux",fR=Sc&&!!Di.env.SNAP&&!!Di.env.SNAP_REVISION,bR=GC,vR=!!Di.env.CI||!!Di.env.BUILD_ARTIFACTSTAGINGDIRECTORY,xc=pl,Jp=pl;let i=Di.env.VSCODE_NLS_CONFIG;if(i)try{let e=JSON.parse(i);xc=e.userLocale,UC=e.osLocale,Jp=e.resolvedLanguage||pl,yR=e.languagePack?.translationsConfigFile}catch{}HC=!0}else typeof navigator=="object"&&!IR?(Sr=navigator.userAgent,Ec=Sr.indexOf("Windows")>=0,Cc=Sr.indexOf("Macintosh")>=0,Yb=(Sr.indexOf("Macintosh")>=0||Sr.indexOf("iPad")>=0||Sr.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,Sc=Sr.indexOf("Linux")>=0,KC=Sr?.indexOf("Mobi")>=0,jb=!0,Jp=Ic()||pl,xc=navigator.language.toLowerCase(),UC=xc):console.error("Unable to resolve platform.");function Qb(i){switch(i){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}var Zp=0;Cc?Zp=1:Ec?Zp=3:Sc&&(Zp=2);var Ye=Ec,Se=Cc,St=Sc;var Zr=HC;var At=jb,xR=jb&&typeof Er.importScripts=="function",qC=xR?Er.origin:void 0,es=Yb,$C=KC;var eh=Zp,Mo=Sr,Xn=Jp,SR;(n=>{function i(){return Xn}n.value=i;function e(){return Xn.length===2?Xn==="en":Xn.length>=3?Xn[0]==="e"&&Xn[1]==="n"&&Xn[2]==="-":!1}n.isDefaultVariant=e;function t(){return Xn==="en"}n.isDefault=t})(SR||={});var jC=xc;var ER=typeof Er.postMessage=="function"&&!Er.importScripts,th=(()=>{if(ER){let i=[];Er.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let n=0,o=i.length;n<o;n++){let r=i[n];if(r.id===t.data.vscodeScheduleAsyncWork){i.splice(n,1),r.callback();return}}});let e=0;return t=>{let n=++e;i.push({id:n,callback:t}),Er.postMessage({vscodeScheduleAsyncWork:n},"*")}}return i=>setTimeout(i)})();var ts=Cc||Yb?2:Ec?1:3,VC=!0,zC=!1;function YC(){if(!zC){zC=!0;let i=new Uint8Array(2);i[0]=1,i[1]=2,VC=new Uint16Array(i.buffer)[0]===513}return VC}var wc=!!(Mo&&Mo.indexOf("Chrome")>=0),hl=!!(Mo&&Mo.indexOf("Firefox")>=0),nh=!!(!wc&&Mo&&Mo.indexOf("Safari")>=0),ih=!!(Mo&&Mo.indexOf("Edg/")>=0),QC=!!(Mo&&Mo.indexOf("Android")>=0);var la,Xb=globalThis.vscode;if(typeof Xb<"u"&&typeof Xb.process<"u"){let i=Xb.process;la={get platform(){return i.platform},get arch(){return i.arch},get env(){return i.env},cwd(){return i.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?la={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:la={get platform(){return Ye?"win32":Se?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var Tc=la.cwd,Cr=la.env,Jb=la.platform,CR=la.arch;var TR=65,kR=97,DR=90,_R=122,os=46,yn=47,li=92,ns=58,LR=63,oh=class extends Error{code;constructor(e,t,n){let o;typeof t=="string"&&t.indexOf("not ")===0?(o="must not be",t=t.replace(/^not /,"")):o="must be";let r=e.indexOf(".")!==-1?"property":"argument",s=`The "${e}" ${r} ${o} of type ${t}`;s+=`. Received type ${typeof n}`,super(s),this.code="ERR_INVALID_ARG_TYPE"}};function RR(i,e){if(i===null||typeof i!="object")throw new oh(e,"Object",i)}function Wt(i,e){if(typeof i!="string")throw new oh(e,"string",i)}var di=Jb==="win32";function He(i){return i===yn||i===li}function Zb(i){return i===yn}function is(i){return i>=TR&&i<=DR||i>=kR&&i<=_R}function rh(i,e,t,n){let o="",r=0,s=-1,a=0,l=0;for(let c=0;c<=i.length;++c){if(c<i.length)l=i.charCodeAt(c);else{if(n(l))break;l=yn}if(n(l)){if(!(s===c-1||a===1))if(a===2){if(o.length<2||r!==2||o.charCodeAt(o.length-1)!==os||o.charCodeAt(o.length-2)!==os){if(o.length>2){let u=o.lastIndexOf(t);u===-1?(o="",r=0):(o=o.slice(0,u),r=o.length-1-o.lastIndexOf(t)),s=c,a=0;continue}else if(o.length!==0){o="",r=0,s=c,a=0;continue}}e&&(o+=o.length>0?`${t}..`:"..",r=2)}else o.length>0?o+=`${t}${i.slice(s+1,c)}`:o=i.slice(s+1,c),r=c-s-1;s=c,a=0}else l===os&&a!==-1?++a:a=-1}return o}function PR(i){return i?`${i[0]==="."?"":"."}${i}`:""}function XC(i,e){RR(e,"pathObject");let t=e.dir||e.root,n=e.base||`${e.name||""}${PR(e.ext)}`;return t?t===e.root?`${t}${n}`:`${t}${i}${n}`:n}var Et={resolve(...i){let e="",t="",n=!1;for(let o=i.length-1;o>=-1;o--){let r;if(o>=0){if(r=i[o],Wt(r,`paths[${o}]`),r.length===0)continue}else e.length===0?r=Tc():(r=Cr[`=${e}`]||Tc(),(r===void 0||r.slice(0,2).toLowerCase()!==e.toLowerCase()&&r.charCodeAt(2)===li)&&(r=`${e}\\`));let s=r.length,a=0,l="",c=!1,u=r.charCodeAt(0);if(s===1)He(u)&&(a=1,c=!0);else if(He(u))if(c=!0,He(r.charCodeAt(1))){let p=2,h=p;for(;p<s&&!He(r.charCodeAt(p));)p++;if(p<s&&p!==h){let m=r.slice(h,p);for(h=p;p<s&&He(r.charCodeAt(p));)p++;if(p<s&&p!==h){for(h=p;p<s&&!He(r.charCodeAt(p));)p++;(p===s||p!==h)&&(l=`\\\\${m}\\${r.slice(h,p)}`,a=p)}}}else a=1;else is(u)&&r.charCodeAt(1)===ns&&(l=r.slice(0,2),a=2,s>2&&He(r.charCodeAt(2))&&(c=!0,a=3));if(l.length>0)if(e.length>0){if(l.toLowerCase()!==e.toLowerCase())continue}else e=l;if(n){if(e.length>0)break}else if(t=`${r.slice(a)}\\${t}`,n=c,c&&e.length>0)break}return t=rh(t,!n,"\\",He),n?`${e}\\${t}`:`${e}${t}`||"."},normalize(i){Wt(i,"path");let e=i.length;if(e===0)return".";let t=0,n,o=!1,r=i.charCodeAt(0);if(e===1)return Zb(r)?"\\":i;if(He(r))if(o=!0,He(i.charCodeAt(1))){let a=2,l=a;for(;a<e&&!He(i.charCodeAt(a));)a++;if(a<e&&a!==l){let c=i.slice(l,a);for(l=a;a<e&&He(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!He(i.charCodeAt(a));)a++;if(a===e)return`\\\\${c}\\${i.slice(l)}\\`;a!==l&&(n=`\\\\${c}\\${i.slice(l,a)}`,t=a)}}}else t=1;else is(r)&&i.charCodeAt(1)===ns&&(n=i.slice(0,2),t=2,e>2&&He(i.charCodeAt(2))&&(o=!0,t=3));let s=t<e?rh(i.slice(t),!o,"\\",He):"";return s.length===0&&!o&&(s="."),s.length>0&&He(i.charCodeAt(e-1))&&(s+="\\"),n===void 0?o?`\\${s}`:s:o?`${n}\\${s}`:`${n}${s}`},isAbsolute(i){Wt(i,"path");let e=i.length;if(e===0)return!1;let t=i.charCodeAt(0);return He(t)||e>2&&is(t)&&i.charCodeAt(1)===ns&&He(i.charCodeAt(2))},join(...i){if(i.length===0)return".";let e,t;for(let r=0;r<i.length;++r){let s=i[r];Wt(s,"path"),s.length>0&&(e===void 0?e=t=s:e+=`\\${s}`)}if(e===void 0)return".";let n=!0,o=0;if(typeof t=="string"&&He(t.charCodeAt(0))){++o;let r=t.length;r>1&&He(t.charCodeAt(1))&&(++o,r>2&&(He(t.charCodeAt(2))?++o:n=!1))}if(n){for(;o<e.length&&He(e.charCodeAt(o));)o++;o>=2&&(e=`\\${e.slice(o)}`)}return Et.normalize(e)},relative(i,e){if(Wt(i,"from"),Wt(e,"to"),i===e)return"";let t=Et.resolve(i),n=Et.resolve(e);if(t===n||(i=t.toLowerCase(),e=n.toLowerCase(),i===e))return"";let o=0;for(;o<i.length&&i.charCodeAt(o)===li;)o++;let r=i.length;for(;r-1>o&&i.charCodeAt(r-1)===li;)r--;let s=r-o,a=0;for(;a<e.length&&e.charCodeAt(a)===li;)a++;let l=e.length;for(;l-1>a&&e.charCodeAt(l-1)===li;)l--;let c=l-a,u=s<c?s:c,p=-1,h=0;for(;h<u;h++){let v=i.charCodeAt(o+h);if(v!==e.charCodeAt(a+h))break;v===li&&(p=h)}if(h!==u){if(p===-1)return n}else{if(c>u){if(e.charCodeAt(a+h)===li)return n.slice(a+h+1);if(h===2)return n.slice(a+h)}s>u&&(i.charCodeAt(o+h)===li?p=h:h===2&&(p=3)),p===-1&&(p=0)}let m="";for(h=o+p+1;h<=r;++h)(h===r||i.charCodeAt(h)===li)&&(m+=m.length===0?"..":"\\..");return a+=p,m.length>0?`${m}${n.slice(a,l)}`:(n.charCodeAt(a)===li&&++a,n.slice(a,l))},toNamespacedPath(i){if(typeof i!="string"||i.length===0)return i;let e=Et.resolve(i);if(e.length<=2)return i;if(e.charCodeAt(0)===li){if(e.charCodeAt(1)===li){let t=e.charCodeAt(2);if(t!==LR&&t!==os)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(is(e.charCodeAt(0))&&e.charCodeAt(1)===ns&&e.charCodeAt(2)===li)return`\\\\?\\${e}`;return i},dirname(i){Wt(i,"path");let e=i.length;if(e===0)return".";let t=-1,n=0,o=i.charCodeAt(0);if(e===1)return He(o)?i:".";if(He(o)){if(t=n=1,He(i.charCodeAt(1))){let a=2,l=a;for(;a<e&&!He(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&He(i.charCodeAt(a));)a++;if(a<e&&a!==l){for(l=a;a<e&&!He(i.charCodeAt(a));)a++;if(a===e)return i;a!==l&&(t=n=a+1)}}}}else is(o)&&i.charCodeAt(1)===ns&&(t=e>2&&He(i.charCodeAt(2))?3:2,n=t);let r=-1,s=!0;for(let a=e-1;a>=n;--a)if(He(i.charCodeAt(a))){if(!s){r=a;break}}else s=!1;if(r===-1){if(t===-1)return".";r=t}return i.slice(0,r)},basename(i,e){e!==void 0&&Wt(e,"suffix"),Wt(i,"path");let t=0,n=-1,o=!0,r;if(i.length>=2&&is(i.charCodeAt(0))&&i.charCodeAt(1)===ns&&(t=2),e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let s=e.length-1,a=-1;for(r=i.length-1;r>=t;--r){let l=i.charCodeAt(r);if(He(l)){if(!o){t=r+1;break}}else a===-1&&(o=!1,a=r+1),s>=0&&(l===e.charCodeAt(s)?--s===-1&&(n=r):(s=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(r=i.length-1;r>=t;--r)if(He(i.charCodeAt(r))){if(!o){t=r+1;break}}else n===-1&&(o=!1,n=r+1);return n===-1?"":i.slice(t,n)},extname(i){Wt(i,"path");let e=0,t=-1,n=0,o=-1,r=!0,s=0;i.length>=2&&i.charCodeAt(1)===ns&&is(i.charCodeAt(0))&&(e=n=2);for(let a=i.length-1;a>=e;--a){let l=i.charCodeAt(a);if(He(l)){if(!r){n=a+1;break}continue}o===-1&&(r=!1,o=a+1),l===os?t===-1?t=a:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||o===-1||s===0||s===1&&t===o-1&&t===n+1?"":i.slice(t,o)},format:XC.bind(null,"\\"),parse(i){Wt(i,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;let t=i.length,n=0,o=i.charCodeAt(0);if(t===1)return He(o)?(e.root=e.dir=i,e):(e.base=e.name=i,e);if(He(o)){if(n=1,He(i.charCodeAt(1))){let p=2,h=p;for(;p<t&&!He(i.charCodeAt(p));)p++;if(p<t&&p!==h){for(h=p;p<t&&He(i.charCodeAt(p));)p++;if(p<t&&p!==h){for(h=p;p<t&&!He(i.charCodeAt(p));)p++;p===t?n=p:p!==h&&(n=p+1)}}}}else if(is(o)&&i.charCodeAt(1)===ns){if(t<=2)return e.root=e.dir=i,e;if(n=2,He(i.charCodeAt(2))){if(t===3)return e.root=e.dir=i,e;n=3}}n>0&&(e.root=i.slice(0,n));let r=-1,s=n,a=-1,l=!0,c=i.length-1,u=0;for(;c>=n;--c){if(o=i.charCodeAt(c),He(o)){if(!l){s=c+1;break}continue}a===-1&&(l=!1,a=c+1),o===os?r===-1?r=c:u!==1&&(u=1):r!==-1&&(u=-1)}return a!==-1&&(r===-1||u===0||u===1&&r===a-1&&r===s+1?e.base=e.name=i.slice(s,a):(e.name=i.slice(s,r),e.base=i.slice(s,a),e.ext=i.slice(r,a))),s>0&&s!==n?e.dir=i.slice(0,s-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},OR=(()=>{if(di){let i=/\\/g;return()=>{let e=Tc().replace(i,"/");return e.slice(e.indexOf("/"))}}return()=>Tc()})(),Be={resolve(...i){let e="",t=!1;for(let n=i.length-1;n>=-1&&!t;n--){let o=n>=0?i[n]:OR();Wt(o,`paths[${n}]`),o.length!==0&&(e=`${o}/${e}`,t=o.charCodeAt(0)===yn)}return e=rh(e,!t,"/",Zb),t?`/${e}`:e.length>0?e:"."},normalize(i){if(Wt(i,"path"),i.length===0)return".";let e=i.charCodeAt(0)===yn,t=i.charCodeAt(i.length-1)===yn;return i=rh(i,!e,"/",Zb),i.length===0?e?"/":t?"./":".":(t&&(i+="/"),e?`/${i}`:i)},isAbsolute(i){return Wt(i,"path"),i.length>0&&i.charCodeAt(0)===yn},join(...i){if(i.length===0)return".";let e;for(let t=0;t<i.length;++t){let n=i[t];Wt(n,"path"),n.length>0&&(e===void 0?e=n:e+=`/${n}`)}return e===void 0?".":Be.normalize(e)},relative(i,e){if(Wt(i,"from"),Wt(e,"to"),i===e||(i=Be.resolve(i),e=Be.resolve(e),i===e))return"";let t=1,n=i.length,o=n-t,r=1,s=e.length-r,a=o<s?o:s,l=-1,c=0;for(;c<a;c++){let p=i.charCodeAt(t+c);if(p!==e.charCodeAt(r+c))break;p===yn&&(l=c)}if(c===a)if(s>a){if(e.charCodeAt(r+c)===yn)return e.slice(r+c+1);if(c===0)return e.slice(r+c)}else o>a&&(i.charCodeAt(t+c)===yn?l=c:c===0&&(l=0));let u="";for(c=t+l+1;c<=n;++c)(c===n||i.charCodeAt(c)===yn)&&(u+=u.length===0?"..":"/..");return`${u}${e.slice(r+l)}`},toNamespacedPath(i){return i},dirname(i){if(Wt(i,"path"),i.length===0)return".";let e=i.charCodeAt(0)===yn,t=-1,n=!0;for(let o=i.length-1;o>=1;--o)if(i.charCodeAt(o)===yn){if(!n){t=o;break}}else n=!1;return t===-1?e?"/":".":e&&t===1?"//":i.slice(0,t)},basename(i,e){e!==void 0&&Wt(e,"ext"),Wt(i,"path");let t=0,n=-1,o=!0,r;if(e!==void 0&&e.length>0&&e.length<=i.length){if(e===i)return"";let s=e.length-1,a=-1;for(r=i.length-1;r>=0;--r){let l=i.charCodeAt(r);if(l===yn){if(!o){t=r+1;break}}else a===-1&&(o=!1,a=r+1),s>=0&&(l===e.charCodeAt(s)?--s===-1&&(n=r):(s=-1,n=a))}return t===n?n=a:n===-1&&(n=i.length),i.slice(t,n)}for(r=i.length-1;r>=0;--r)if(i.charCodeAt(r)===yn){if(!o){t=r+1;break}}else n===-1&&(o=!1,n=r+1);return n===-1?"":i.slice(t,n)},extname(i){Wt(i,"path");let e=-1,t=0,n=-1,o=!0,r=0;for(let s=i.length-1;s>=0;--s){let a=i.charCodeAt(s);if(a===yn){if(!o){t=s+1;break}continue}n===-1&&(o=!1,n=s+1),a===os?e===-1?e=s:r!==1&&(r=1):e!==-1&&(r=-1)}return e===-1||n===-1||r===0||r===1&&e===n-1&&e===t+1?"":i.slice(e,n)},format:XC.bind(null,"/"),parse(i){Wt(i,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(i.length===0)return e;let t=i.charCodeAt(0)===yn,n;t?(e.root="/",n=1):n=0;let o=-1,r=0,s=-1,a=!0,l=i.length-1,c=0;for(;l>=n;--l){let u=i.charCodeAt(l);if(u===yn){if(!a){r=l+1;break}continue}s===-1&&(a=!1,s=l+1),u===os?o===-1?o=l:c!==1&&(c=1):o!==-1&&(c=-1)}if(s!==-1){let u=r===0&&t?1:r;o===-1||c===0||c===1&&o===s-1&&o===r+1?e.base=e.name=i.slice(u,s):(e.name=i.slice(u,o),e.base=i.slice(u,s),e.ext=i.slice(o,s))}return r>0?e.dir=i.slice(0,r-1):t&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Be.win32=Et.win32=Et;Be.posix=Et.posix=Be;var No=di?Et.normalize:Be.normalize,wr=di?Et.isAbsolute:Be.isAbsolute,Jn=di?Et.join:Be.join,gl=di?Et.resolve:Be.resolve,ml=di?Et.relative:Be.relative,fl=di?Et.dirname:Be.dirname,bl=di?Et.basename:Be.basename,kc=di?Et.extname:Be.extname,BB=di?Et.format:Be.format,WB=di?Et.parse:Be.parse,UB=di?Et.toNamespacedPath:Be.toNamespacedPath,Zn=di?Et.sep:Be.sep,VB=di?Et.delimiter:Be.delimiter;var MR=/^\w[\w\d+.-]*$/,NR=/^\//,FR=/^\/\//;function BR(i,e){if(!i.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${i.authority}", path: "${i.path}", query: "${i.query}", fragment: "${i.fragment}"}`);if(i.scheme&&!MR.test(i.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(i.path){if(i.authority){if(!NR.test(i.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(FR.test(i.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function WR(i,e){return!i&&!e?"file":i}function UR(i,e){switch(i){case"https":case"http":case"file":e?e[0]!==oo&&(e=oo+e):e=oo;break}return e}var xt="",oo="/",VR=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,N=class i{static isUri(e){return e instanceof i?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,t,n,o,r,s=!1){typeof e=="object"?(this.scheme=e.scheme||xt,this.authority=e.authority||xt,this.path=e.path||xt,this.query=e.query||xt,this.fragment=e.fragment||xt):(this.scheme=WR(e,s),this.authority=t||xt,this.path=UR(this.scheme,n||xt),this.query=o||xt,this.fragment=r||xt,BR(this,s))}get fsPath(){return _c(this,!1)}with(e){if(!e)return this;let{scheme:t,authority:n,path:o,query:r,fragment:s}=e;return t===void 0?t=this.scheme:t===null&&(t=xt),n===void 0?n=this.authority:n===null&&(n=xt),o===void 0?o=this.path:o===null&&(o=xt),r===void 0?r=this.query:r===null&&(r=xt),s===void 0?s=this.fragment:s===null&&(s=xt),t===this.scheme&&n===this.authority&&o===this.path&&r===this.query&&s===this.fragment?this:new rs(t,n,o,r,s)}static parse(e,t=!1){let n=VR.exec(e);return n?new rs(n[2]||xt,sh(n[4]||xt),sh(n[5]||xt),sh(n[7]||xt),sh(n[9]||xt),t):new rs(xt,xt,xt,xt,xt)}static file(e){let t=xt;if(Ye&&(e=e.replace(/\\/g,oo)),e[0]===oo&&e[1]===oo){let n=e.indexOf(oo,2);n===-1?(t=e.substring(2),e=oo):(t=e.substring(2,n),e=e.substring(n)||oo)}return new rs("file",t,e,xt,xt)}static from(e,t){return new rs(e.scheme,e.authority,e.path,e.query,e.fragment,t)}static joinPath(e,...t){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let n;return Ye&&e.scheme==="file"?n=i.file(Et.join(_c(e,!0),...t)).path:n=Be.join(e.path,...t),e.with({path:n})}toString(e=!1){return ev(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof i)return e;{let t=new rs(e);return t._formatted=e.external??null,t._fsPath=e._sep===ew?e.fsPath??null:null,t}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};var ew=Ye?1:void 0,rs=class extends N{_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=_c(this,!1)),this._fsPath}toString(e=!1){return e?ev(this,!0):(this._formatted||(this._formatted=ev(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=ew),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},tw={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function JC(i,e,t){let n,o=-1;for(let r=0;r<i.length;r++){let s=i.charCodeAt(r);if(s>=97&&s<=122||s>=65&&s<=90||s>=48&&s<=57||s===45||s===46||s===95||s===126||e&&s===47||t&&s===91||t&&s===93||t&&s===58)o!==-1&&(n+=encodeURIComponent(i.substring(o,r)),o=-1),n!==void 0&&(n+=i.charAt(r));else{n===void 0&&(n=i.substr(0,r));let a=tw[s];a!==void 0?(o!==-1&&(n+=encodeURIComponent(i.substring(o,r)),o=-1),n+=a):o===-1&&(o=r)}}return o!==-1&&(n+=encodeURIComponent(i.substring(o))),n!==void 0?n:i}function zR(i){let e;for(let t=0;t<i.length;t++){let n=i.charCodeAt(t);n===35||n===63?(e===void 0&&(e=i.substr(0,t)),e+=tw[n]):e!==void 0&&(e+=i[t])}return e!==void 0?e:i}function _c(i,e){let t;return i.authority&&i.path.length>1&&i.scheme==="file"?t=`//${i.authority}${i.path}`:i.path.charCodeAt(0)===47&&(i.path.charCodeAt(1)>=65&&i.path.charCodeAt(1)<=90||i.path.charCodeAt(1)>=97&&i.path.charCodeAt(1)<=122)&&i.path.charCodeAt(2)===58?e?t=i.path.substr(1):t=i.path[1].toLowerCase()+i.path.substr(2):t=i.path,Ye&&(t=t.replace(/\//g,"\\")),t}function ev(i,e){let t=e?zR:JC,n="",{scheme:o,authority:r,path:s,query:a,fragment:l}=i;if(o&&(n+=o,n+=":"),(r||o==="file")&&(n+=oo,n+=oo),r){let c=r.indexOf("@");if(c!==-1){let u=r.substr(0,c);r=r.substr(c+1),c=u.lastIndexOf(":"),c===-1?n+=t(u,!1,!1):(n+=t(u.substr(0,c),!1,!1),n+=":",n+=t(u.substr(c+1),!1,!0)),n+="@"}r=r.toLowerCase(),c=r.lastIndexOf(":"),c===-1?n+=t(r,!1,!0):(n+=t(r.substr(0,c),!1,!0),n+=r.substr(c))}if(s){if(s.length>=3&&s.charCodeAt(0)===47&&s.charCodeAt(2)===58){let c=s.charCodeAt(1);c>=65&&c<=90&&(s=`/${String.fromCharCode(c+32)}:${s.substr(3)}`)}else if(s.length>=2&&s.charCodeAt(1)===58){let c=s.charCodeAt(0);c>=65&&c<=90&&(s=`${String.fromCharCode(c+32)}:${s.substr(2)}`)}n+=t(s,!0,!1)}return a&&(n+="?",n+=t(a,!1,!1)),l&&(n+="#",n+=e?l:JC(l,!1,!1)),n}function nw(i){try{return decodeURIComponent(i)}catch{return i.length>3?i.substr(0,3)+nw(i.substr(3)):i}}var ZC=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function sh(i){return i.match(ZC)?i.replace(ZC,e=>nw(e)):i}function Lc(i,e,t){let n=i.get(e);return n===void 0&&(n=t,i.set(e,n)),n}var tv=class{constructor(e,t){this.uri=e;this.value=t}};function HR(i){return Array.isArray(i)}var bt=class i{static defaultToKey=e=>e.toString();[Symbol.toStringTag]="ResourceMap";map;toKey;constructor(e,t){if(e instanceof i)this.map=new Map(e.map),this.toKey=t??i.defaultToKey;else if(HR(e)){this.map=new Map,this.toKey=t??i.defaultToKey;for(let[n,o]of e)this.set(n,o)}else this.map=new Map,this.toKey=e??i.defaultToKey}set(e,t){return this.map.set(this.toKey(e),new tv(e,t)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,t){typeof t<"u"&&(e=e.bind(t));for(let[n,o]of this.map)e(o.value,o.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[Symbol.iterator](){for(let[,e]of this.map)yield[e.uri,e.value]}},ah=class{[Symbol.toStringTag]="ResourceSet";_map;constructor(e,t){!e||typeof e=="function"?this._map=new bt(e):(this._map=new bt(t),e.forEach(this.add,this))}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,t){this._map.forEach((n,o)=>e.call(t,o,o,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[Symbol.iterator](){return this.keys()}};var nv=class{[Symbol.toStringTag]="LinkedMap";_map;_head;_tail;_size;_state;constructor(){this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,t=0){let n=this._map.get(e);if(n)return t!==0&&this.touch(n,t),n.value}set(e,t,n=0){let o=this._map.get(e);if(o)o.value=t,n!==0&&this.touch(o,n);else{switch(o={key:e,value:t,next:void 0,previous:void 0},n){case 0:this.addItemLast(o);break;case 1:this.addItemFirst(o);break;case 2:this.addItemLast(o);break;default:this.addItemLast(o);break}this._map.set(e,o),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let t=this._map.get(e);if(t)return this._map.delete(e),this.removeItem(t),this._size--,t.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,t){let n=this._state,o=this._head;for(;o;){if(t?e.bind(t)(o.value,o.key,this):e(o.value,o.key,this),this._state!==n)throw new Error("LinkedMap got modified during iteration.");o=o.next}}keys(){let e=this,t=this._state,n=this._head,o={[Symbol.iterator](){return o},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let r={value:n.key,done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return o}values(){let e=this,t=this._state,n=this._head,o={[Symbol.iterator](){return o},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let r={value:n.value,done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return o}entries(){let e=this,t=this._state,n=this._head,o={[Symbol.iterator](){return o},next(){if(e._state!==t)throw new Error("LinkedMap got modified during iteration.");if(n){let r={value:[n.key,n.value],done:!1};return n=n.next,r}else return{value:void 0,done:!0}}};return o}[Symbol.iterator](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._head,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.next,n--;this._head=t,this._size=n,t&&(t.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this._tail,n=this.size;for(;t&&n>e;)this._map.delete(t.key),t=t.previous,n--;this._tail=t,this._size=n,t&&(t.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let t=e.next,n=e.previous;if(!t||!n)throw new Error("Invalid list");t.previous=n,n.next=t}e.next=void 0,e.previous=void 0,this._state++}touch(e,t){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this._head)return;let n=e.next,o=e.previous;e===this._tail?(o.next=void 0,this._tail=o):(n.previous=o,o.next=n),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(t===2){if(e===this._tail)return;let n=e.next,o=e.previous;e===this._head?(n.previous=void 0,this._head=n):(n.previous=o,o.next=n),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((t,n)=>{e.push([n,t])}),e}fromJSON(e){this.clear();for(let[t,n]of e)this.set(t,n)}},iv=class extends nv{_limit;_ratio;constructor(e,t=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,t),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},zi=class extends iv{constructor(e,t=1){super(e,t)}trim(e){this.trimOld(e)}set(e,t){return super.set(e,t),this.checkTrim(),this}};var vl=class{map=new Map;add(e,t){let n=this.map.get(e);n||(n=new Set,this.map.set(e,n)),n.add(t)}delete(e,t){let n=this.map.get(e);n&&(n.delete(t),n.size===0&&this.map.delete(e))}forEach(e,t){let n=this.map.get(e);n&&n.forEach(t)}get(e){let t=this.map.get(e);return t||new Set}};function Rc(i,e){let t=this,n=!1,o;return function(){if(n)return o;if(n=!0,e)try{o=i.apply(t,arguments)}finally{e()}else o=i.apply(t,arguments);return o}}var ro;(_=>{function i(O){return O&&typeof O=="object"&&typeof O[Symbol.iterator]=="function"}_.is=i;let e=Object.freeze([]);function t(){return e}_.empty=t;function*n(O){yield O}_.single=n;function o(O){return i(O)?O:n(O)}_.wrap=o;function r(O){return O||e}_.from=r;function*s(O){for(let M=O.length-1;M>=0;M--)yield O[M]}_.reverse=s;function a(O){return!O||O[Symbol.iterator]().next().done===!0}_.isEmpty=a;function l(O){return O[Symbol.iterator]().next().value}_.first=l;function c(O,M){let U=0;for(let he of O)if(M(he,U++))return!0;return!1}_.some=c;function u(O,M){for(let U of O)if(M(U))return U}_.find=u;function*p(O,M){for(let U of O)M(U)&&(yield U)}_.filter=p;function*h(O,M){let U=0;for(let he of O)yield M(he,U++)}_.map=h;function*m(O,M){let U=0;for(let he of O)yield*M(he,U++)}_.flatMap=m;function*v(...O){for(let M of O)yield*M}_.concat=v;function f(O,M,U){let he=U;for(let Q of O)he=M(he,Q);return he}_.reduce=f;function*b(O,M,U=O.length){for(M<0&&(M+=O.length),U<0?U+=O.length:U>O.length&&(U=O.length);M<U;M++)yield O[M]}_.slice=b;function E(O,M=Number.POSITIVE_INFINITY){let U=[];if(M===0)return[U,O];let he=O[Symbol.iterator]();for(let Q=0;Q<M;Q++){let se=he.next();if(se.done)return[U,_.empty()];U.push(se.value)}return[U,{[Symbol.iterator](){return he}}]}_.consume=E;async function T(O){let M=[];for await(let U of O)M.push(U);return Promise.resolve(M)}_.asyncToArray=T})(ro||={});var KR=!1,da=null;function GR(i){da=i}if(KR){let i="__is_disposable_tracked__";GR(new class{trackDisposable(e){let t=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[i]||console.log(t)},3e3)}setParent(e,t){if(e&&e!==A.None)try{e[i]=!0}catch{}}markAsDisposed(e){if(e&&e!==A.None)try{e[i]=!0}catch{}}markAsSingleton(e){}})}function ca(i){return da?.trackDisposable(i),i}function ua(i){da?.markAsDisposed(i)}function Pc(i,e){da?.setParent(i,e)}function qR(i,e){if(da)for(let t of i)da.setParent(t,e)}function yl(i){return da?.markAsSingleton(i),i}function iw(i){return typeof i=="object"&&i!==null&&typeof i.dispose=="function"&&i.dispose.length===0}function ft(i){if(ro.is(i)){let e=[];for(let t of i)if(t)try{t.dispose()}catch(n){e.push(n)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(i)?[]:i}else if(i)return i.dispose(),i}function Tr(...i){let e=le(()=>ft(i));return qR(i,e),e}function le(i){let e=ca({dispose:Rc(()=>{ua(e),i()})});return e}var re=class i{static DISABLE_DISPOSED_WARNING=!1;_toDispose=new Set;_isDisposed=!1;constructor(){ca(this)}dispose(){this._isDisposed||(ua(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{ft(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return Pc(e,this),this._isDisposed?i.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),Pc(e,null))}},A=class{static None=Object.freeze({dispose(){}});_store=new re;constructor(){ca(this),Pc(this._store,this)}dispose(){ua(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}},Un=class{_value;_isDisposed=!1;constructor(){ca(this)}get value(){return this._isDisposed?void 0:this._value}set value(e){this._isDisposed||e===this._value||(this._value?.dispose(),e&&Pc(e,this),this._value=e)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,ua(this),this._value?.dispose(),this._value=void 0}clearAndLeak(){let e=this._value;return this._value=void 0,e&&Pc(e,null),e}};var Fo=class{_store=new Map;_isDisposed=!1;constructor(){ca(this)}dispose(){ua(this),this._isDisposed=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this._store.size)try{ft(this._store.values())}finally{this._store.clear()}}has(e){return this._store.has(e)}get size(){return this._store.size}get(e){return this._store.get(e)}set(e,t,n=!1){this._isDisposed&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),n||this._store.get(e)?.dispose(),this._store.set(e,t)}deleteAndDispose(e){this._store.get(e)?.dispose(),this._store.delete(e)}deleteAndLeak(e){let t=this._store.get(e);return this._store.delete(e),t}keys(){return this._store.keys()}values(){return this._store.values()}[Symbol.iterator](){return this._store[Symbol.iterator]()}};var ow=Object.freeze(function(i,e){let t=setTimeout(i.bind(e),0);return{dispose(){clearTimeout(t)}}}),Tt;(n=>{function i(o){return o===n.None||o===n.Cancelled||o instanceof Il?!0:!o||typeof o!="object"?!1:typeof o.isCancellationRequested=="boolean"&&typeof o.onCancellationRequested=="function"}n.isCancellationToken=i,n.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:ee.None}),n.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:ow})})(Tt||={});var Il=class{_isCancelled=!1;_emitter=null;cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?ow:(this._emitter||(this._emitter=new C),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},Vn=class{_token=void 0;_parentListener=void 0;constructor(e){this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this._token||(this._token=new Il),this._token}cancel(){this._token?this._token instanceof Il&&this._token.cancel():this._token=Tt.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof Il&&this._token.dispose():this._token=Tt.None}};var kt=class i{static Undefined=new i(void 0);element;next;prev;constructor(e){this.element=e,this.next=i.Undefined,this.prev=i.Undefined}},In=class{_first=kt.Undefined;_last=kt.Undefined;_size=0;get size(){return this._size}isEmpty(){return this._first===kt.Undefined}clear(){let e=this._first;for(;e!==kt.Undefined;){let t=e.next;e.prev=kt.Undefined,e.next=kt.Undefined,e=t}this._first=kt.Undefined,this._last=kt.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,t){let n=new kt(e);if(this._first===kt.Undefined)this._first=n,this._last=n;else if(t){let r=this._last;this._last=n,n.prev=r,r.next=n}else{let r=this._first;this._first=n,n.next=r,r.prev=n}this._size+=1;let o=!1;return()=>{o||(o=!0,this._remove(n))}}shift(){if(this._first!==kt.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==kt.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==kt.Undefined&&e.next!==kt.Undefined){let t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===kt.Undefined&&e.next===kt.Undefined?(this._first=kt.Undefined,this._last=kt.Undefined):e.next===kt.Undefined?(this._last=this._last.prev,this._last.next=kt.Undefined):e.prev===kt.Undefined&&(this._first=this._first.next,this._first.prev=kt.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==kt.Undefined;)yield e.element,e=e.next}};var pa=(i,e)=>i===e;var so=class{constructor(e,t,n){this.owner=e;this.debugNameSource=t;this.referenceFn=n}getDebugName(e){return lw(e,this)}},rw=new Map,ov=new WeakMap;function lw(i,e){let t=ov.get(i);if(t)return t;let n=$R(i,e);if(n){let o=rw.get(n)??0;o++,rw.set(n,o);let r=o===1?n:`${n}#${o}`;return ov.set(i,r),r}}function $R(i,e){let t=ov.get(i);if(t)return t;let n=e.owner?YR(e.owner)+".":"",o,r=e.debugNameSource;if(r!==void 0)if(typeof r=="function"){if(o=r(),o!==void 0)return n+o}else return n+r;let s=e.referenceFn;if(s!==void 0&&(o=lh(s),o!==void 0))return n+o;if(e.owner!==void 0){let a=jR(e.owner,i);if(a!==void 0)return n+a}}function jR(i,e){for(let t in i)if(i[t]===e)return t}var sw=new Map,aw=new WeakMap;function YR(i){let e=aw.get(i);if(e)return e;let t=QR(i),n=sw.get(t)??0;n++,sw.set(t,n);let o=n===1?t:`${t}#${n}`;return aw.set(i,o),o}function QR(i){let e=i.constructor;return e?e.name:"Object"}function lh(i){let e=i.toString(),n=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(n?n[1]:void 0)?.trim()}function dh(i,e){if(!i)throw new Error(e?`Assertion failed (${e})`:"Assertion Failed")}function rv(i,e="Unreachable"){throw new Error(e)}function xl(i){if(!i()){debugger;i(),Ne(new Ge("Assertion Failed"))}}function ss(i){return new ch(new so(void 0,void 0,i),i,void 0,void 0)}var ch=class{constructor(e,t,n,o){this._debugNameData=e;this._runFn=t;this.createChangeSummary=n;this._handleChange=o;this.changeSummary=this.createChangeSummary?.(),_i()?.handleAutorunCreated(this),this._runIfNeeded(),ca(this)}state=2;updateCount=0;disposed=!1;dependencies=new Set;dependenciesToBeRemoved=new Set;changeSummary;get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),ua(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;let t=this.disposed;try{if(!t){_i()?.handleAutorunTriggered(this);let n=this.changeSummary;try{this.changeSummary=this.createChangeSummary?.(),this._runFn(this,n)}catch(o){cl(o)}}}finally{t||_i()?.handleAutorunFinished(this);for(let n of this.dependenciesToBeRemoved)n.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(){this.state===3&&(this.state=1),this.updateCount++}endUpdate(){try{if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let e of this.dependencies)if(e.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3)}finally{this.updateCount--}xl(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)&&(this.state=1)}handleChange(e,t){if(this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e))try{(this._handleChange?this._handleChange({changedObservable:e,change:t,didChange:o=>o===e},this.changeSummary):!0)&&(this.state=2)}catch(n){cl(n)}}readObservable(e){if(this.disposed)return e.get();e.addObserver(this);let t=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),t}};(e=>e.Observer=ch)(ss||={});function sv(i,e){return new uh(new so(i.owner,i.debugName,i.debugReferenceFn),e,void 0,void 0,i.onLastObserverRemoved,i.equalsFn??pa)}dw(sv);var uh=class extends ha{constructor(t,n,o,r,s=void 0,a){super();this._debugNameData=t;this._computeFn=n;this.createChangeSummary=o;this._handleChange=r;this._handleLastObserverRemoved=s;this._equalityComparator=a;this.changeSummary=this.createChangeSummary?.(),_i()?.handleDerivedCreated(this)}state=0;value=void 0;updateCount=0;dependencies=new Set;dependenciesToBeRemoved=new Set;changeSummary=void 0;get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this.state=0,this.value=void 0;for(let t of this.dependencies)t.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this.observers.size===0){let t=this._computeFn(this,this.createChangeSummary?.());return this.onLastObserverRemoved(),t}else{do{if(this.state===1){for(let t of this.dependencies)if(t.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;let t=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=t;let n=this.state!==0,o=this.value;this.state=3;let r=!1;try{let s=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this.value=this._computeFn(this,s)}finally{for(let a of this.dependenciesToBeRemoved)a.removeObserver(this);this.dependenciesToBeRemoved.clear()}r=n&&!this._equalityComparator(o,this.value),_i()?.handleDerivedRecomputed(this,{oldValue:o,newValue:this.value,change:void 0,didChange:r,hadValue:n})}catch(s){cl(s)}if(r)for(let s of this.observers)s.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(t){this.updateCount++;let n=this.updateCount===1;if(this.state===3&&(this.state=1,!n))for(let o of this.observers)o.handlePossibleChange(this);if(n)for(let o of this.observers)o.beginUpdate(this)}endUpdate(t){if(this.updateCount--,this.updateCount===0){let n=[...this.observers];for(let o of n)o.endUpdate(this)}xl(()=>this.updateCount>=0)}handlePossibleChange(t){if(this.state===3&&this.dependencies.has(t)&&!this.dependenciesToBeRemoved.has(t)){this.state=1;for(let n of this.observers)n.handlePossibleChange(this)}}handleChange(t,n){if(this.dependencies.has(t)&&!this.dependenciesToBeRemoved.has(t)){let o=!1;try{o=this._handleChange?this._handleChange({changedObservable:t,change:n,didChange:s=>s===t},this.changeSummary):!0}catch(s){cl(s)}let r=this.state===3;if(o&&(this.state===1||r)&&(this.state=2,r))for(let s of this.observers)s.handlePossibleChange(this)}}readObservable(t){t.addObserver(this);let n=t.get();return this.dependencies.add(t),this.dependenciesToBeRemoved.delete(t),n}addObserver(t){let n=!this.observers.has(t)&&this.updateCount>0;super.addObserver(t),n&&t.beginUpdate(this)}removeObserver(t){let n=this.observers.has(t)&&this.updateCount>0;super.removeObserver(t),n&&t.endUpdate(this)}};function hh(i){return new av(i)}var av=class extends Oc{constructor(t){super();this.value=t}get debugName(){return this.toString()}get(){return this.value}addObserver(t){}removeObserver(t){}toString(){return`Const: ${this.value}`}};function lv(...i){let e,t,n;return i.length===3?[e,t,n]=i:[t,n]=i,new as(new so(e,void 0,n),t,n,()=>as.globalTransaction,pa)}var as=class extends ha{constructor(t,n,o,r,s){super();this._debugNameData=t;this.event=n;this._getValue=o;this._getTransaction=r;this._equalityComparator=s}static globalTransaction;value;hasValue=!1;subscription;getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let t=this.getDebugName();return"From Event"+(t?`: ${t}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}handleEvent=t=>{let n=this._getValue(t),o=this.value,r=!this.hasValue||!this._equalityComparator(o,n),s=!1;r&&(this.value=n,this.hasValue&&(s=!0,dv(this._getTransaction(),a=>{_i()?.handleFromEventObservableTriggered(this,{oldValue:o,newValue:n,change:void 0,didChange:r,hadValue:this.hasValue});for(let l of this.observers)a.updateObserver(l,this),l.handleChange(this,void 0)},()=>{let a=this.getDebugName();return"Event fired"+(a?`: ${a}`:"")})),this.hasValue=!0),s||_i()?.handleFromEventObservableTriggered(this,{oldValue:o,newValue:n,change:void 0,didChange:r,hadValue:this.hasValue})};onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};(t=>{t.Observer=as;function e(n,o){let r=!1;as.globalTransaction===void 0&&(as.globalTransaction=n,r=!0);try{o()}finally{r&&(as.globalTransaction=void 0)}}t.batchEventsGlobally=e})(lv||={});function uw(i){let e=new ph(!1,void 0);return i.addObserver(e),le(()=>{i.removeObserver(e)})}gw(uw);function pw(i,e){let t=new ph(!0,e);return i.addObserver(t),e?e(i.get()):i.reportChanges(),le(()=>{i.removeObserver(t)})}hw(pw);var ph=class{constructor(e,t){this._forceRecompute=e;this._handleValue=t}_counter=0;beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,t){}};var fw;function bw(i){fw=i}function _i(){return fw}var mh=class{indentation=0;textToConsoleArgs(e){return eP([Sl(iP("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[Sl(" "),ao(Mc(e.oldValue,70),{color:"red",strikeThrough:!0}),Sl(" "),ao(Mc(e.newValue,60),{color:"green"})]:[Sl(" (unchanged)")]:[Sl(" "),ao(Mc(e.newValue,60),{color:"green"}),Sl(" (initial)")]}handleObservableChanged(e,t){console.log(...this.textToConsoleArgs([Ac("observable value changed"),ao(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t)]))}changedObservablesSets=new WeakMap;formatChanges(e){if(e.size!==0)return ao(" (changed deps: "+[...e].map(t=>t.debugName).join(", ")+")",{color:"gray"})}handleDerivedCreated(e){let t=e.handleChange;this.changedObservablesSets.set(e,new Set),e.handleChange=(n,o)=>(this.changedObservablesSets.get(e).add(n),t.apply(e,[n,o]))}handleDerivedRecomputed(e,t){let n=this.changedObservablesSets.get(e);console.log(...this.textToConsoleArgs([Ac("derived recomputed"),ao(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),n.clear()}handleFromEventObservableTriggered(e,t){console.log(...this.textToConsoleArgs([Ac("observable from event triggered"),ao(e.debugName,{color:"BlueViolet"}),...this.formatInfo(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){let t=e.handleChange;this.changedObservablesSets.set(e,new Set),e.handleChange=(n,o)=>(this.changedObservablesSets.get(e).add(n),t.apply(e,[n,o]))}handleAutorunTriggered(e){let t=this.changedObservablesSets.get(e);console.log(...this.textToConsoleArgs([Ac("autorun"),ao(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.indentation++}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let t=e.getDebugName();t===void 0&&(t=""),console.log(...this.textToConsoleArgs([Ac("transaction"),ao(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function eP(i){let e=new Array,t=[],n="";function o(s){if("length"in s)for(let a of s)a&&o(a);else"text"in s?(n+=`%c${s.text}`,e.push(s.style),s.data&&t.push(...s.data)):"data"in s&&t.push(...s.data)}o(i);let r=[n,...e];return r.push(...t),r}function Sl(i){return ao(i,{color:"black"})}function Ac(i){return ao(oP(`${i}: `,10),{color:"black",bold:!0})}function ao(i,e={color:"black"}){function t(o){return Object.entries(o).reduce((r,[s,a])=>`${r}${s}:${a};`,"")}let n={color:e.color};return e.strikeThrough&&(n["text-decoration"]="line-through"),e.bold&&(n["font-weight"]="bold"),{text:i,style:t(n)}}function Mc(i,e){switch(typeof i){case"number":return""+i;case"string":return i.length+2<=e?`"${i}"`:`"${i.substr(0,e-7)}"+...`;case"boolean":return i?"true":"false";case"undefined":return"undefined";case"object":return i===null?"null":Array.isArray(i)?tP(i,e):nP(i,e);case"symbol":return i.toString();case"function":return`[[Function${i.name?" "+i.name:""}]]`;default:return""+i}}function tP(i,e){let t="[ ",n=!0;for(let o of i){if(n||(t+=", "),t.length-5>e){t+="...";break}n=!1,t+=`${Mc(o,e-t.length)}`}return t+=" ]",t}function nP(i,e){let t="{ ",n=!0;for(let[o,r]of Object.entries(i)){if(n||(t+=", "),t.length-5>e){t+="...";break}n=!1,t+=`${o}: ${Mc(r,e-t.length)}`}return t+=" }",t}function iP(i,e){let t="";for(let n=1;n<=e;n++)t+=i;return t}function oP(i,e){for(;i.length<e;)i+=" ";return i}var vw;function hw(i){vw=i}var yw;function gw(i){yw=i}var cv;function dw(i){cv=i}var Oc=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){let n=t===void 0?void 0:e,o=t===void 0?e:t;return cv({owner:n,debugName:()=>{let r=lh(o);if(r!==void 0)return r;let a=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(o.toString());if(a)return`${this.debugName}.${a[2]}`;if(!n)return`${this.debugName} (mapped)`},debugReferenceFn:o},r=>o(this.read(r),r))}flatten(){return cv({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(vw(this,t)),this}keepObserved(e){return e.add(yw(this)),this}get debugValue(){return this.get()}},ha=class extends Oc{observers=new Set;addObserver(e){let t=this.observers.size;this.observers.add(e),t===0&&this.onFirstObserverAdded()}removeObserver(e){this.observers.delete(e)&&this.observers.size===0&&this.onLastObserverRemoved()}onFirstObserverAdded(){}onLastObserverRemoved(){}};function gh(i,e){let t=new fh(i,e);try{i(t)}finally{t.finish()}}function dv(i,e,t){i?e(i):gh(e,t)}var fh=class{constructor(e,t){this._fn=e;this._getDebugName=t;_i()?.handleBeginTransaction(this)}updatingObservers=[];getDebugName(){return this._getDebugName?this._getDebugName():lh(this._fn)}updateObserver(e,t){this.updatingObservers.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){let e=this.updatingObservers;for(let t=0;t<e.length;t++){let{observer:n,observable:o}=e[t];n.endUpdate(o)}this.updatingObservers=null,_i()?.handleEndTransaction()}};var rP=!1;rP&&bw(new mh);var sP=globalThis.performance&&typeof globalThis.performance.now=="function",ga=class i{_startTime;_stopTime;_now;static create(e){return new i(e)}constructor(e){this._now=sP&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var uv=Symbol("MicrotaskDelay");var aP=!1,Iw=!1,lP=!1,ee;(Ze=>{Ze.None=()=>A.None;function e(oe){if(lP){let{onDidAddListener:$}=oe,de=Nc.create(),ie=0;oe.onDidAddListener=()=>{++ie===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),de.print()),$?.()}}}function t(oe,$){return m(oe,()=>{},0,void 0,!0,void 0,$)}Ze.defer=t;function n(oe){return($,de=null,ie)=>{let ce=!1,ke;return ke=oe(we=>{if(!ce)return ke?ke.dispose():ce=!0,$.call(de,we)},null,ie),ce&&ke.dispose(),ke}}Ze.once=n;function o(oe,$){return Ze.once(Ze.filter(oe,$))}Ze.onceIf=o;function r(oe,$,de){return p((ie,ce=null,ke)=>oe(we=>ie.call(ce,$(we)),null,ke),de)}Ze.map=r;function s(oe,$,de){return p((ie,ce=null,ke)=>oe(we=>{$(we),ie.call(ce,we)},null,ke),de)}Ze.forEach=s;function a(oe,$,de){return p((ie,ce=null,ke)=>oe(we=>$(we)&&ie.call(ce,we),null,ke),de)}Ze.filter=a;function l(oe){return oe}Ze.signal=l;function c(...oe){return($,de=null,ie)=>{let ce=Tr(...oe.map(ke=>ke(we=>$.call(de,we))));return h(ce,ie)}}Ze.any=c;function u(oe,$,de,ie){let ce=de;return r(oe,ke=>(ce=$(ce,ke),ce),ie)}Ze.reduce=u;function p(oe,$){let de,ie={onWillAddFirstListener(){de=oe(ce.fire,ce)},onDidRemoveLastListener(){de?.dispose()}};$||e(ie);let ce=new C(ie);return $?.add(ce),ce.event}function h(oe,$){return $ instanceof Array?$.push(oe):$&&$.add(oe),oe}function m(oe,$,de=100,ie=!1,ce=!1,ke,we){let tt,Me,ve,kn=0,cn,no={leakWarningThreshold:ke,onWillAddFirstListener(){tt=oe(sl=>{kn++,Me=$(Me,sl),ie&&!ve&&(Ui.fire(Me),Me=void 0),cn=()=>{let ai=Me;Me=void 0,ve=void 0,(!ie||kn>1)&&Ui.fire(ai),kn=0},typeof de=="number"?(clearTimeout(ve),ve=setTimeout(cn,de)):ve===void 0&&(ve=0,queueMicrotask(cn))})},onWillRemoveListener(){ce&&kn>0&&cn?.()},onDidRemoveLastListener(){cn=void 0,tt.dispose()}};we||e(no);let Ui=new C(no);return we?.add(Ui),Ui.event}Ze.debounce=m;function v(oe,$=0,de){return Ze.debounce(oe,(ie,ce)=>ie?(ie.push(ce),ie):[ce],$,void 0,!0,void 0,de)}Ze.accumulate=v;function f(oe,$=(ie,ce)=>ie===ce,de){let ie=!0,ce;return a(oe,ke=>{let we=ie||!$(ke,ce);return ie=!1,ce=ke,we},de)}Ze.latch=f;function b(oe,$,de){return[Ze.filter(oe,$,de),Ze.filter(oe,ie=>!$(ie),de)]}Ze.split=b;function E(oe,$=!1,de=[],ie){let ce=de.slice(),ke=oe(Me=>{ce?ce.push(Me):tt.fire(Me)});ie&&ie.add(ke);let we=()=>{ce?.forEach(Me=>tt.fire(Me)),ce=null},tt=new C({onWillAddFirstListener(){ke||(ke=oe(Me=>tt.fire(Me)),ie&&ie.add(ke))},onDidAddFirstListener(){ce&&($?setTimeout(we):we())},onDidRemoveLastListener(){ke&&ke.dispose(),ke=null}});return ie&&ie.add(tt),tt.event}Ze.buffer=E;function T(oe,$){return(ie,ce,ke)=>{let we=$(new O);return oe(function(tt){let Me=we.evaluate(tt);Me!==_&&ie.call(ce,Me)},void 0,ke)}}Ze.chain=T;let _=Symbol("HaltChainable");class O{steps=[];map($){return this.steps.push($),this}forEach($){return this.steps.push(de=>($(de),de)),this}filter($){return this.steps.push(de=>$(de)?de:_),this}reduce($,de){let ie=de;return this.steps.push(ce=>(ie=$(ie,ce),ie)),this}latch($=(de,ie)=>de===ie){let de=!0,ie;return this.steps.push(ce=>{let ke=de||!$(ce,ie);return de=!1,ie=ce,ke?ce:_}),this}evaluate($){for(let de of this.steps)if($=de($),$===_)break;return $}}function M(oe,$,de=ie=>ie){let ie=(...tt)=>we.fire(de(...tt)),ce=()=>oe.on($,ie),ke=()=>oe.removeListener($,ie),we=new C({onWillAddFirstListener:ce,onDidRemoveLastListener:ke});return we.event}Ze.fromNodeEventEmitter=M;function U(oe,$,de=ie=>ie){let ie=(...tt)=>we.fire(de(...tt)),ce=()=>oe.addEventListener($,ie),ke=()=>oe.removeEventListener($,ie),we=new C({onWillAddFirstListener:ce,onDidRemoveLastListener:ke});return we.event}Ze.fromDOMEventEmitter=U;function he(oe){return new Promise($=>n(oe)($))}Ze.toPromise=he;function Q(oe){let $=new C;return oe.then(de=>{$.fire(de)},()=>{$.fire(void 0)}).finally(()=>{$.dispose()}),$.event}Ze.fromPromise=Q;function se(oe,$){return oe(de=>$.fire(de))}Ze.forward=se;function ne(oe,$,de){return $(de),oe(ie=>$(ie))}Ze.runAndSubscribe=ne;class V{constructor($,de){this._observable=$;let ie={onWillAddFirstListener:()=>{$.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{$.removeObserver(this)}};de||e(ie),this.emitter=new C(ie),de&&de.add(this.emitter)}emitter;_counter=0;_hasChanged=!1;beginUpdate($){this._counter++}handlePossibleChange($){}handleChange($,de){this._hasChanged=!0}endUpdate($){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function X(oe,$){return new V(oe,$).emitter.event}Ze.fromObservable=X;function Ce(oe){return($,de,ie)=>{let ce=0,ke=!1,we={beginUpdate(){ce++},endUpdate(){ce--,ce===0&&(oe.reportChanges(),ke&&(ke=!1,$.call(de)))},handlePossibleChange(){},handleChange(){ke=!0}};oe.addObserver(we),oe.reportChanges();let tt={dispose(){oe.removeObserver(we)}};return ie instanceof re?ie.add(tt):Array.isArray(ie)&&ie.push(tt),tt}}Ze.fromObservableLight=Ce})(ee||={});var pv=class i{static all=new Set;static _idPool=0;name;listenerCount=0;invocationCount=0;elapsedOverall=0;durations=[];_stopWatch;constructor(e){this.name=`${e}_${i._idPool++}`,i.all.add(this)}start(e){this._stopWatch=new ga,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},xw=-1;var hv=class i{constructor(e,t,n=(i._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e;this.threshold=t;this.name=n}static _idPool=1;_stacks;_warnCountdown=0;dispose(){this._stacks?.clear()}check(e,t){let n=this.threshold;if(n<=0||t<n)return;this._stacks||(this._stacks=new Map);let o=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,o+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=n*.5;let[r,s]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${t} listeners already. MOST frequent listener (${s}):`;console.warn(a),console.warn(r);let l=new gv(a,r);this._errorHandler(l)}return()=>{let r=this._stacks.get(e.value)||0;this._stacks.set(e.value,r-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,t=0;for(let[n,o]of this._stacks)(!e||t<o)&&(e=[n,o],t=o);return e}},Nc=class i{constructor(e){this.value=e}static create(){let e=new Error;return new i(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},gv=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},mv=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},dP=0,El=class{constructor(e){this.value=e}stack;id=dP++},cP=2,Sw=(i,e)=>{if(i instanceof El)e(i);else for(let t=0;t<i.length;t++){let n=i[t];n&&e(n)}},bh;if(aP){let i=[];setInterval(()=>{i.length!==0&&(console.warn("[LEAKING LISTENERS] GC'ed these listeners that were NOT yet disposed:"),console.warn(i.join(`
`)),i.length=0)},3e3),bh=new FinalizationRegistry(e=>{typeof e=="string"&&i.push(e)})}var C=class{_options;_leakageMon;_perfMon;_disposed;_event;_listeners;_deliveryQueue;_size=0;constructor(e){this._options=e,this._leakageMon=xw>0||this._options?.leakWarningThreshold?new hv(e?.onListenerError??Ne,this._options?.leakWarningThreshold??xw):void 0,this._perfMon=this._options?._profName?new pv(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(Iw){let e=this._listeners;queueMicrotask(()=>{Sw(e,t=>t.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,t,n)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let l=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(l);let c=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],u=new mv(`${l}. HINT: Stack shows most frequent listener (${c[1]}-times)`,c[0]);return(this._options?.onListenerError||Ne)(u),A.None}if(this._disposed)return A.None;t&&(e=e.bind(t));let o=new El(e),r,s;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(o.stack=Nc.create(),r=this._leakageMon.check(o.stack,this._size+1)),Iw&&(o.stack=s??Nc.create()),this._listeners?this._listeners instanceof El?(this._deliveryQueue??=new fv,this._listeners=[this._listeners,o]):this._listeners.push(o):(this._options?.onWillAddFirstListener?.(this),this._listeners=o,this._options?.onDidAddFirstListener?.(this)),this._size++;let a=le(()=>{bh?.unregister(a),r?.(),this._removeListener(o)});if(n instanceof re?n.add(a):Array.isArray(n)&&n.push(a),bh){let l=new Error().stack.split(`
`).slice(2,3).join(`
`).trim(),c=/(file:|vscode-file:\/\/vscode-app)?(\/[^:]*:\d+:\d+)/.exec(l);bh.register(a,c?.[2]??l,a)}return a},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let t=this._listeners,n=t.indexOf(e);if(n===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,t[n]=void 0;let o=this._deliveryQueue.current===this;if(this._size*cP<=t.length){let r=0;for(let s=0;s<t.length;s++)t[s]?t[r++]=t[s]:o&&(this._deliveryQueue.end--,r<this._deliveryQueue.i&&this._deliveryQueue.i--);t.length=r}}_deliver(e,t){if(!e)return;let n=this._options?.onListenerError||Ne;if(!n){e.value(t);return}try{e.value(t)}catch(o){n(o)}}_deliverQueue(e){let t=e.current._listeners;for(;e.i<e.end;)this._deliver(t[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof El)this._deliver(this._listeners,e);else{let t=this._deliveryQueue;t.enqueue(this,e,this._listeners.length),this._deliverQueue(t)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var fv=class{i=-1;end=0;current;value;enqueue(e,t,n){this.i=0,this.end=n,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},Cl=class extends C{_asyncDeliveryQueue;async fireAsync(e,t,n){if(this._listeners)for(this._asyncDeliveryQueue||(this._asyncDeliveryQueue=new In),Sw(this._listeners,o=>this._asyncDeliveryQueue.push([o.value,e]));this._asyncDeliveryQueue.size>0&&!t.isCancellationRequested;){let[o,r]=this._asyncDeliveryQueue.shift(),s=[],a={...r,token:t,waitUntil:l=>{if(Object.isFrozen(s))throw new Error("waitUntil can NOT be called asynchronous");n&&(l=n(l,o)),s.push(l)}};try{o(a)}catch(l){Ne(l);continue}Object.freeze(s),await Promise.allSettled(s).then(l=>{for(let c of l)c.status==="rejected"&&Ne(c.reason)})}}},ls=class extends C{_isPaused=0;_eventQueue=new In;_mergeFn;get isPaused(){return this._isPaused!==0}constructor(e){super(e),this._mergeFn=e?.merge}pause(){this._isPaused++}resume(){if(this._isPaused!==0&&--this._isPaused===0)if(this._mergeFn){if(this._eventQueue.size>0){let e=Array.from(this._eventQueue);this._eventQueue.clear(),super.fire(this._mergeFn(e))}}else for(;!this._isPaused&&this._eventQueue.size!==0;)super.fire(this._eventQueue.shift())}fire(e){this._size&&(this._isPaused!==0?this._eventQueue.push(e):super.fire(e))}};var vh=class extends C{_queuedEvents=[];_mergeFn;constructor(e){super(e),this._mergeFn=e?.merge}fire(e){this.hasListeners()&&(this._queuedEvents.push(e),this._queuedEvents.length===1&&queueMicrotask(()=>{this._mergeFn?super.fire(this._mergeFn(this._queuedEvents)):this._queuedEvents.forEach(t=>super.fire(t)),this._queuedEvents=[]}))}};var wl=class{data=[];wrapEvent(e,t,n){return(o,r,s)=>e(a=>{let l=this.data[this.data.length-1];if(!t){l?l.buffers.push(()=>o.call(r,a)):o.call(r,a);return}let c=l;if(!c){o.call(r,t(n,a));return}c.items??=[],c.items.push(a),c.buffers.length===0&&l.buffers.push(()=>{c.reducedResult??=n?c.items.reduce(t,n):c.items.reduce(t),o.call(r,c.reducedResult)})},void 0,s)}bufferEvents(e){let t={buffers:new Array};this.data.push(t);let n=e();return this.data.pop(),t.buffers.forEach(o=>o()),n}};var ma=class i{static INSTANCE=new i;mapWindowIdToZoomLevel=new Map;_onDidChangeZoomLevel=new C;onDidChangeZoomLevel=this._onDidChangeZoomLevel.event;getZoomLevel(e){return this.mapWindowIdToZoomLevel.get(this.getWindowId(e))??0}setZoomLevel(e,t){if(this.getZoomLevel(t)===e)return;let n=this.getWindowId(t);this.mapWindowIdToZoomLevel.set(n,e),this._onDidChangeZoomLevel.fire(n)}mapWindowIdToZoomFactor=new Map;getZoomFactor(e){return this.mapWindowIdToZoomFactor.get(this.getWindowId(e))??1}setZoomFactor(e,t){this.mapWindowIdToZoomFactor.set(this.getWindowId(t),e)}_onDidChangeFullscreen=new C;onDidChangeFullscreen=this._onDidChangeFullscreen.event;mapWindowIdToFullScreen=new Map;setFullscreen(e,t){if(this.isFullscreen(t)===e)return;let n=this.getWindowId(t);this.mapWindowIdToFullScreen.set(n,e),this._onDidChangeFullscreen.fire(n)}isFullscreen(e){return!!this.mapWindowIdToFullScreen.get(this.getWindowId(e))}getWindowId(e){return e.vscodeWindowId}};function pP(i,e,t){typeof e=="string"&&(e=i.matchMedia(e)),e.addEventListener("change",t)}function Ew(i){return ma.INSTANCE.getZoomLevel(i)}var oU=ma.INSTANCE.onDidChangeZoomLevel;function Cw(i){return ma.INSTANCE.getZoomFactor(i)}function ww(i,e){ma.INSTANCE.setFullscreen(i,e)}var rU=ma.INSTANCE.onDidChangeFullscreen,Tl=navigator.userAgent,kr=Tl.indexOf("Firefox")>=0,Dr=Tl.indexOf("AppleWebKit")>=0,kl=Tl.indexOf("Chrome")>=0,Bo=!kl&&Tl.indexOf("Safari")>=0,Tw=!kl&&!Bo&&Dr,sU=Tl.indexOf("Electron/")>=0,aU=Tl.indexOf("Android")>=0,yh=!1;if(typeof me.matchMedia=="function"){let i=me.matchMedia("(display-mode: standalone) or (display-mode: window-controls-overlay)"),e=me.matchMedia("(display-mode: fullscreen)");yh=i.matches,pP(me,i,({matches:t})=>{yh&&e.matches||(yh=t)})}function kw(){return yh}var Dw={clipboard:{writeText:Zr||document.queryCommandSupported&&document.queryCommandSupported("copy")||!!(navigator&&navigator.clipboard&&navigator.clipboard.writeText),readText:Zr||!!(navigator&&navigator.clipboard&&navigator.clipboard.readText)},keyboard:Zr||kw()?0:navigator.keyboard||Bo?1:2,touch:"ontouchstart"in me||navigator.maxTouchPoints>0,pointerEvents:me.PointerEvent&&("ontouchstart"in me||navigator.maxTouchPoints>0)};var Bc=class{_keyCodeToStr;_strToKeyCode;constructor(){this._keyCodeToStr=[],this._strToKeyCode=Object.create(null)}define(e,t){this._keyCodeToStr[e]=t,this._strToKeyCode[t.toLowerCase()]=e}keyCodeToStr(e){return this._keyCodeToStr[e]}strToKeyCode(e){return this._strToKeyCode[e.toLowerCase()]||0}},Ih=new Bc,bv=new Bc,vv=new Bc,Iv=new Array(230),hP={},gP=[],mP=Object.create(null),fP=Object.create(null);var _w=[],yv=[];for(let i=0;i<=193;i++)_w[i]=-1;for(let i=0;i<=132;i++)yv[i]=-1;(function(){let i="",e=[[1,0,"None",0,"unknown",0,"VK_UNKNOWN",i,i],[1,1,"Hyper",0,i,0,i,i,i],[1,2,"Super",0,i,0,i,i,i],[1,3,"Fn",0,i,0,i,i,i],[1,4,"FnLock",0,i,0,i,i,i],[1,5,"Suspend",0,i,0,i,i,i],[1,6,"Resume",0,i,0,i,i,i],[1,7,"Turbo",0,i,0,i,i,i],[1,8,"Sleep",0,i,0,"VK_SLEEP",i,i],[1,9,"WakeUp",0,i,0,i,i,i],[0,10,"KeyA",31,"A",65,"VK_A",i,i],[0,11,"KeyB",32,"B",66,"VK_B",i,i],[0,12,"KeyC",33,"C",67,"VK_C",i,i],[0,13,"KeyD",34,"D",68,"VK_D",i,i],[0,14,"KeyE",35,"E",69,"VK_E",i,i],[0,15,"KeyF",36,"F",70,"VK_F",i,i],[0,16,"KeyG",37,"G",71,"VK_G",i,i],[0,17,"KeyH",38,"H",72,"VK_H",i,i],[0,18,"KeyI",39,"I",73,"VK_I",i,i],[0,19,"KeyJ",40,"J",74,"VK_J",i,i],[0,20,"KeyK",41,"K",75,"VK_K",i,i],[0,21,"KeyL",42,"L",76,"VK_L",i,i],[0,22,"KeyM",43,"M",77,"VK_M",i,i],[0,23,"KeyN",44,"N",78,"VK_N",i,i],[0,24,"KeyO",45,"O",79,"VK_O",i,i],[0,25,"KeyP",46,"P",80,"VK_P",i,i],[0,26,"KeyQ",47,"Q",81,"VK_Q",i,i],[0,27,"KeyR",48,"R",82,"VK_R",i,i],[0,28,"KeyS",49,"S",83,"VK_S",i,i],[0,29,"KeyT",50,"T",84,"VK_T",i,i],[0,30,"KeyU",51,"U",85,"VK_U",i,i],[0,31,"KeyV",52,"V",86,"VK_V",i,i],[0,32,"KeyW",53,"W",87,"VK_W",i,i],[0,33,"KeyX",54,"X",88,"VK_X",i,i],[0,34,"KeyY",55,"Y",89,"VK_Y",i,i],[0,35,"KeyZ",56,"Z",90,"VK_Z",i,i],[0,36,"Digit1",22,"1",49,"VK_1",i,i],[0,37,"Digit2",23,"2",50,"VK_2",i,i],[0,38,"Digit3",24,"3",51,"VK_3",i,i],[0,39,"Digit4",25,"4",52,"VK_4",i,i],[0,40,"Digit5",26,"5",53,"VK_5",i,i],[0,41,"Digit6",27,"6",54,"VK_6",i,i],[0,42,"Digit7",28,"7",55,"VK_7",i,i],[0,43,"Digit8",29,"8",56,"VK_8",i,i],[0,44,"Digit9",30,"9",57,"VK_9",i,i],[0,45,"Digit0",21,"0",48,"VK_0",i,i],[1,46,"Enter",3,"Enter",13,"VK_RETURN",i,i],[1,47,"Escape",9,"Escape",27,"VK_ESCAPE",i,i],[1,48,"Backspace",1,"Backspace",8,"VK_BACK",i,i],[1,49,"Tab",2,"Tab",9,"VK_TAB",i,i],[1,50,"Space",10,"Space",32,"VK_SPACE",i,i],[0,51,"Minus",88,"-",189,"VK_OEM_MINUS","-","OEM_MINUS"],[0,52,"Equal",86,"=",187,"VK_OEM_PLUS","=","OEM_PLUS"],[0,53,"BracketLeft",92,"[",219,"VK_OEM_4","[","OEM_4"],[0,54,"BracketRight",94,"]",221,"VK_OEM_6","]","OEM_6"],[0,55,"Backslash",93,"\\",220,"VK_OEM_5","\\","OEM_5"],[0,56,"IntlHash",0,i,0,i,i,i],[0,57,"Semicolon",85,";",186,"VK_OEM_1",";","OEM_1"],[0,58,"Quote",95,"'",222,"VK_OEM_7","'","OEM_7"],[0,59,"Backquote",91,"`",192,"VK_OEM_3","`","OEM_3"],[0,60,"Comma",87,",",188,"VK_OEM_COMMA",",","OEM_COMMA"],[0,61,"Period",89,".",190,"VK_OEM_PERIOD",".","OEM_PERIOD"],[0,62,"Slash",90,"/",191,"VK_OEM_2","/","OEM_2"],[1,63,"CapsLock",8,"CapsLock",20,"VK_CAPITAL",i,i],[1,64,"F1",59,"F1",112,"VK_F1",i,i],[1,65,"F2",60,"F2",113,"VK_F2",i,i],[1,66,"F3",61,"F3",114,"VK_F3",i,i],[1,67,"F4",62,"F4",115,"VK_F4",i,i],[1,68,"F5",63,"F5",116,"VK_F5",i,i],[1,69,"F6",64,"F6",117,"VK_F6",i,i],[1,70,"F7",65,"F7",118,"VK_F7",i,i],[1,71,"F8",66,"F8",119,"VK_F8",i,i],[1,72,"F9",67,"F9",120,"VK_F9",i,i],[1,73,"F10",68,"F10",121,"VK_F10",i,i],[1,74,"F11",69,"F11",122,"VK_F11",i,i],[1,75,"F12",70,"F12",123,"VK_F12",i,i],[1,76,"PrintScreen",0,i,0,i,i,i],[1,77,"ScrollLock",84,"ScrollLock",145,"VK_SCROLL",i,i],[1,78,"Pause",7,"PauseBreak",19,"VK_PAUSE",i,i],[1,79,"Insert",19,"Insert",45,"VK_INSERT",i,i],[1,80,"Home",14,"Home",36,"VK_HOME",i,i],[1,81,"PageUp",11,"PageUp",33,"VK_PRIOR",i,i],[1,82,"Delete",20,"Delete",46,"VK_DELETE",i,i],[1,83,"End",13,"End",35,"VK_END",i,i],[1,84,"PageDown",12,"PageDown",34,"VK_NEXT",i,i],[1,85,"ArrowRight",17,"RightArrow",39,"VK_RIGHT","Right",i],[1,86,"ArrowLeft",15,"LeftArrow",37,"VK_LEFT","Left",i],[1,87,"ArrowDown",18,"DownArrow",40,"VK_DOWN","Down",i],[1,88,"ArrowUp",16,"UpArrow",38,"VK_UP","Up",i],[1,89,"NumLock",83,"NumLock",144,"VK_NUMLOCK",i,i],[1,90,"NumpadDivide",113,"NumPad_Divide",111,"VK_DIVIDE",i,i],[1,91,"NumpadMultiply",108,"NumPad_Multiply",106,"VK_MULTIPLY",i,i],[1,92,"NumpadSubtract",111,"NumPad_Subtract",109,"VK_SUBTRACT",i,i],[1,93,"NumpadAdd",109,"NumPad_Add",107,"VK_ADD",i,i],[1,94,"NumpadEnter",3,i,0,i,i,i],[1,95,"Numpad1",99,"NumPad1",97,"VK_NUMPAD1",i,i],[1,96,"Numpad2",100,"NumPad2",98,"VK_NUMPAD2",i,i],[1,97,"Numpad3",101,"NumPad3",99,"VK_NUMPAD3",i,i],[1,98,"Numpad4",102,"NumPad4",100,"VK_NUMPAD4",i,i],[1,99,"Numpad5",103,"NumPad5",101,"VK_NUMPAD5",i,i],[1,100,"Numpad6",104,"NumPad6",102,"VK_NUMPAD6",i,i],[1,101,"Numpad7",105,"NumPad7",103,"VK_NUMPAD7",i,i],[1,102,"Numpad8",106,"NumPad8",104,"VK_NUMPAD8",i,i],[1,103,"Numpad9",107,"NumPad9",105,"VK_NUMPAD9",i,i],[1,104,"Numpad0",98,"NumPad0",96,"VK_NUMPAD0",i,i],[1,105,"NumpadDecimal",112,"NumPad_Decimal",110,"VK_DECIMAL",i,i],[0,106,"IntlBackslash",97,"OEM_102",226,"VK_OEM_102",i,i],[1,107,"ContextMenu",58,"ContextMenu",93,i,i,i],[1,108,"Power",0,i,0,i,i,i],[1,109,"NumpadEqual",0,i,0,i,i,i],[1,110,"F13",71,"F13",124,"VK_F13",i,i],[1,111,"F14",72,"F14",125,"VK_F14",i,i],[1,112,"F15",73,"F15",126,"VK_F15",i,i],[1,113,"F16",74,"F16",127,"VK_F16",i,i],[1,114,"F17",75,"F17",128,"VK_F17",i,i],[1,115,"F18",76,"F18",129,"VK_F18",i,i],[1,116,"F19",77,"F19",130,"VK_F19",i,i],[1,117,"F20",78,"F20",131,"VK_F20",i,i],[1,118,"F21",79,"F21",132,"VK_F21",i,i],[1,119,"F22",80,"F22",133,"VK_F22",i,i],[1,120,"F23",81,"F23",134,"VK_F23",i,i],[1,121,"F24",82,"F24",135,"VK_F24",i,i],[1,122,"Open",0,i,0,i,i,i],[1,123,"Help",0,i,0,i,i,i],[1,124,"Select",0,i,0,i,i,i],[1,125,"Again",0,i,0,i,i,i],[1,126,"Undo",0,i,0,i,i,i],[1,127,"Cut",0,i,0,i,i,i],[1,128,"Copy",0,i,0,i,i,i],[1,129,"Paste",0,i,0,i,i,i],[1,130,"Find",0,i,0,i,i,i],[1,131,"AudioVolumeMute",117,"AudioVolumeMute",173,"VK_VOLUME_MUTE",i,i],[1,132,"AudioVolumeUp",118,"AudioVolumeUp",175,"VK_VOLUME_UP",i,i],[1,133,"AudioVolumeDown",119,"AudioVolumeDown",174,"VK_VOLUME_DOWN",i,i],[1,134,"NumpadComma",110,"NumPad_Separator",108,"VK_SEPARATOR",i,i],[0,135,"IntlRo",115,"ABNT_C1",193,"VK_ABNT_C1",i,i],[1,136,"KanaMode",0,i,0,i,i,i],[0,137,"IntlYen",0,i,0,i,i,i],[1,138,"Convert",0,i,0,i,i,i],[1,139,"NonConvert",0,i,0,i,i,i],[1,140,"Lang1",0,i,0,i,i,i],[1,141,"Lang2",0,i,0,i,i,i],[1,142,"Lang3",0,i,0,i,i,i],[1,143,"Lang4",0,i,0,i,i,i],[1,144,"Lang5",0,i,0,i,i,i],[1,145,"Abort",0,i,0,i,i,i],[1,146,"Props",0,i,0,i,i,i],[1,147,"NumpadParenLeft",0,i,0,i,i,i],[1,148,"NumpadParenRight",0,i,0,i,i,i],[1,149,"NumpadBackspace",0,i,0,i,i,i],[1,150,"NumpadMemoryStore",0,i,0,i,i,i],[1,151,"NumpadMemoryRecall",0,i,0,i,i,i],[1,152,"NumpadMemoryClear",0,i,0,i,i,i],[1,153,"NumpadMemoryAdd",0,i,0,i,i,i],[1,154,"NumpadMemorySubtract",0,i,0,i,i,i],[1,155,"NumpadClear",131,"Clear",12,"VK_CLEAR",i,i],[1,156,"NumpadClearEntry",0,i,0,i,i,i],[1,0,i,5,"Ctrl",17,"VK_CONTROL",i,i],[1,0,i,4,"Shift",16,"VK_SHIFT",i,i],[1,0,i,6,"Alt",18,"VK_MENU",i,i],[1,0,i,57,"Meta",91,"VK_COMMAND",i,i],[1,157,"ControlLeft",5,i,0,"VK_LCONTROL",i,i],[1,158,"ShiftLeft",4,i,0,"VK_LSHIFT",i,i],[1,159,"AltLeft",6,i,0,"VK_LMENU",i,i],[1,160,"MetaLeft",57,i,0,"VK_LWIN",i,i],[1,161,"ControlRight",5,i,0,"VK_RCONTROL",i,i],[1,162,"ShiftRight",4,i,0,"VK_RSHIFT",i,i],[1,163,"AltRight",6,i,0,"VK_RMENU",i,i],[1,164,"MetaRight",57,i,0,"VK_RWIN",i,i],[1,165,"BrightnessUp",0,i,0,i,i,i],[1,166,"BrightnessDown",0,i,0,i,i,i],[1,167,"MediaPlay",0,i,0,i,i,i],[1,168,"MediaRecord",0,i,0,i,i,i],[1,169,"MediaFastForward",0,i,0,i,i,i],[1,170,"MediaRewind",0,i,0,i,i,i],[1,171,"MediaTrackNext",124,"MediaTrackNext",176,"VK_MEDIA_NEXT_TRACK",i,i],[1,172,"MediaTrackPrevious",125,"MediaTrackPrevious",177,"VK_MEDIA_PREV_TRACK",i,i],[1,173,"MediaStop",126,"MediaStop",178,"VK_MEDIA_STOP",i,i],[1,174,"Eject",0,i,0,i,i,i],[1,175,"MediaPlayPause",127,"MediaPlayPause",179,"VK_MEDIA_PLAY_PAUSE",i,i],[1,176,"MediaSelect",128,"LaunchMediaPlayer",181,"VK_MEDIA_LAUNCH_MEDIA_SELECT",i,i],[1,177,"LaunchMail",129,"LaunchMail",180,"VK_MEDIA_LAUNCH_MAIL",i,i],[1,178,"LaunchApp2",130,"LaunchApp2",183,"VK_MEDIA_LAUNCH_APP2",i,i],[1,179,"LaunchApp1",0,i,0,"VK_MEDIA_LAUNCH_APP1",i,i],[1,180,"SelectTask",0,i,0,i,i,i],[1,181,"LaunchScreenSaver",0,i,0,i,i,i],[1,182,"BrowserSearch",120,"BrowserSearch",170,"VK_BROWSER_SEARCH",i,i],[1,183,"BrowserHome",121,"BrowserHome",172,"VK_BROWSER_HOME",i,i],[1,184,"BrowserBack",122,"BrowserBack",166,"VK_BROWSER_BACK",i,i],[1,185,"BrowserForward",123,"BrowserForward",167,"VK_BROWSER_FORWARD",i,i],[1,186,"BrowserStop",0,i,0,"VK_BROWSER_STOP",i,i],[1,187,"BrowserRefresh",0,i,0,"VK_BROWSER_REFRESH",i,i],[1,188,"BrowserFavorites",0,i,0,"VK_BROWSER_FAVORITES",i,i],[1,189,"ZoomToggle",0,i,0,i,i,i],[1,190,"MailReply",0,i,0,i,i,i],[1,191,"MailForward",0,i,0,i,i,i],[1,192,"MailSend",0,i,0,i,i,i],[1,0,i,114,"KeyInComposition",229,i,i,i],[1,0,i,116,"ABNT_C2",194,"VK_ABNT_C2",i,i],[1,0,i,96,"OEM_8",223,"VK_OEM_8",i,i],[1,0,i,0,i,0,"VK_KANA",i,i],[1,0,i,0,i,0,"VK_HANGUL",i,i],[1,0,i,0,i,0,"VK_JUNJA",i,i],[1,0,i,0,i,0,"VK_FINAL",i,i],[1,0,i,0,i,0,"VK_HANJA",i,i],[1,0,i,0,i,0,"VK_KANJI",i,i],[1,0,i,0,i,0,"VK_CONVERT",i,i],[1,0,i,0,i,0,"VK_NONCONVERT",i,i],[1,0,i,0,i,0,"VK_ACCEPT",i,i],[1,0,i,0,i,0,"VK_MODECHANGE",i,i],[1,0,i,0,i,0,"VK_SELECT",i,i],[1,0,i,0,i,0,"VK_PRINT",i,i],[1,0,i,0,i,0,"VK_EXECUTE",i,i],[1,0,i,0,i,0,"VK_SNAPSHOT",i,i],[1,0,i,0,i,0,"VK_HELP",i,i],[1,0,i,0,i,0,"VK_APPS",i,i],[1,0,i,0,i,0,"VK_PROCESSKEY",i,i],[1,0,i,0,i,0,"VK_PACKET",i,i],[1,0,i,0,i,0,"VK_DBE_SBCSCHAR",i,i],[1,0,i,0,i,0,"VK_DBE_DBCSCHAR",i,i],[1,0,i,0,i,0,"VK_ATTN",i,i],[1,0,i,0,i,0,"VK_CRSEL",i,i],[1,0,i,0,i,0,"VK_EXSEL",i,i],[1,0,i,0,i,0,"VK_EREOF",i,i],[1,0,i,0,i,0,"VK_PLAY",i,i],[1,0,i,0,i,0,"VK_ZOOM",i,i],[1,0,i,0,i,0,"VK_NONAME",i,i],[1,0,i,0,i,0,"VK_PA1",i,i],[1,0,i,0,i,0,"VK_OEM_CLEAR",i,i]],t=[],n=[];for(let o of e){let[r,s,a,l,c,u,p,h,m]=o;if(n[s]||(n[s]=!0,gP[s]=a,mP[a]=s,fP[a.toLowerCase()]=s,r&&(_w[s]=l,l!==0&&l!==3&&l!==5&&l!==4&&l!==6&&l!==57&&(yv[l]=s))),!t[l]){if(t[l]=!0,!c)throw new Error(`String representation missing for key code ${l} around scan code ${a}`);Ih.define(l,c),bv.define(l,h||c),vv.define(l,m||h||c)}u&&(Iv[u]=l),p&&(hP[p]=l)}yv[3]=46})();var xh;(s=>{function i(a){return Ih.keyCodeToStr(a)}s.toString=i;function e(a){return Ih.strToKeyCode(a)}s.fromString=e;function t(a){return bv.keyCodeToStr(a)}s.toUserSettingsUS=t;function n(a){return vv.keyCodeToStr(a)}s.toUserSettingsGeneral=n;function o(a){return bv.strToKeyCode(a)||vv.strToKeyCode(a)}s.fromUserSettings=o;function r(a){if(a>=98&&a<=113)return null;switch(a){case 16:return"Up";case 18:return"Down";case 15:return"Left";case 17:return"Right"}return Ih.keyCodeToStr(a)}s.toElectronAccelerator=r})(xh||={});function Dl(i,e){let t=(e&65535)<<16>>>0;return(i|t)>>>0}function xv(i,e){if(typeof i=="number"){if(i===0)return null;let t=(i&65535)>>>0,n=(i&4294901760)>>>16;return n!==0?new _l([Sh(t,e),Sh(n,e)]):new _l([Sh(t,e)])}else{let t=[];for(let n=0;n<i.length;n++)t.push(Sh(i[n],e));return new _l(t)}}function Sh(i,e){let t=!!(i&2048),n=!!(i&256),o=e===2?n:t,r=!!(i&1024),s=!!(i&512),a=e===2?t:n,l=i&255;return new Wc(o,r,s,a,l)}var Wc=class i{constructor(e,t,n,o,r){this.ctrlKey=e;this.shiftKey=t;this.altKey=n;this.metaKey=o;this.keyCode=r}equals(e){return e instanceof i&&this.ctrlKey===e.ctrlKey&&this.shiftKey===e.shiftKey&&this.altKey===e.altKey&&this.metaKey===e.metaKey&&this.keyCode===e.keyCode}getHashCode(){let e=this.ctrlKey?"1":"0",t=this.shiftKey?"1":"0",n=this.altKey?"1":"0",o=this.metaKey?"1":"0";return`K${e}${t}${n}${o}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new _l([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}};var _l=class{chords;constructor(e){if(e.length===0)throw sa("chords");this.chords=e}getHashCode(){let e="";for(let t=0,n=this.chords.length;t<n;t++)t!==0&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}};function bP(i){if(i.charCode){let t=String.fromCharCode(i.charCode).toUpperCase();return xh.fromString(t)}let e=i.keyCode;if(e===3)return 7;if(kr)switch(e){case 59:return 85;case 60:if(St)return 97;break;case 61:return 86;case 107:return 109;case 109:return 111;case 173:return 88;case 224:if(Se)return 57;break}else if(Dr){if(Se&&e===93)return 57;if(!Se&&e===92)return 57}return Iv[e]||0}var vP=Se?256:2048,yP=512,IP=1024,xP=Se?2048:256;var ht=class{_standardKeyboardEventBrand=!0;browserEvent;target;ctrlKey;shiftKey;altKey;metaKey;altGraphKey;keyCode;code;_asKeybinding;_asKeyCodeChord;constructor(e){let t=e;this.browserEvent=t,this.target=t.target,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,this.altGraphKey=t.getModifierState?.("AltGraph"),this.keyCode=bP(t),this.code=t.code,this.ctrlKey=this.ctrlKey||this.keyCode===5,this.altKey=this.altKey||this.keyCode===6,this.shiftKey=this.shiftKey||this.keyCode===4,this.metaKey=this.metaKey||this.keyCode===57,this._asKeybinding=this._computeKeybinding(),this._asKeyCodeChord=this._computeKeyCodeChord()}preventDefault(){this.browserEvent&&this.browserEvent.preventDefault&&this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent&&this.browserEvent.stopPropagation&&this.browserEvent.stopPropagation()}toKeyCodeChord(){return this._asKeyCodeChord}equals(e){return this._asKeybinding===e}_computeKeybinding(){let e=0;this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode);let t=0;return this.ctrlKey&&(t|=vP),this.altKey&&(t|=yP),this.shiftKey&&(t|=IP),this.metaKey&&(t|=xP),t|=e,t}_computeKeyCodeChord(){let e=0;return this.keyCode!==5&&this.keyCode!==4&&this.keyCode!==6&&this.keyCode!==57&&(e=this.keyCode),new Wc(this.ctrlKey,this.shiftKey,this.altKey,this.metaKey,e)}};var Lw=new WeakMap;function SP(i){if(!i.parent||i.parent===i)return null;try{let e=i.location,t=i.parent.location;if(e.origin!=="null"&&t.origin!=="null"&&e.origin!==t.origin)return null}catch{return null}return i.parent}var Ch=class{static getSameOriginWindowChain(e){let t=Lw.get(e);if(!t){t=[],Lw.set(e,t);let n=e,o;do o=SP(n),o?t.push({window:new WeakRef(n),iframeElement:n.frameElement||null}):t.push({window:new WeakRef(n),iframeElement:null}),n=o;while(n)}return t.slice(0)}static getPositionOfChildWindowRelativeToAncestorWindow(e,t){if(!t||e===t)return{top:0,left:0};let n=0,o=0,r=this.getSameOriginWindowChain(e);for(let s of r){let a=s.window.deref();if(n+=a?.scrollY??0,o+=a?.scrollX??0,a===t||!s.iframeElement)break;let l=s.iframeElement.getBoundingClientRect();n+=l.top,o+=l.left}return{top:n,left:o}}};var ci=class{browserEvent;leftButton;middleButton;rightButton;buttons;target;detail;posx;posy;ctrlKey;shiftKey;altKey;metaKey;timestamp;constructor(e,t){this.timestamp=Date.now(),this.browserEvent=t,this.leftButton=t.button===0,this.middleButton=t.button===1,this.rightButton=t.button===2,this.buttons=t.buttons,this.target=t.target,this.detail=t.detail||1,t.type==="dblclick"&&(this.detail=2),this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.altKey=t.altKey,this.metaKey=t.metaKey,typeof t.pageX=="number"?(this.posx=t.pageX,this.posy=t.pageY):(this.posx=t.clientX+this.target.ownerDocument.body.scrollLeft+this.target.ownerDocument.documentElement.scrollLeft,this.posy=t.clientY+this.target.ownerDocument.body.scrollTop+this.target.ownerDocument.documentElement.scrollTop);let n=Ch.getPositionOfChildWindowRelativeToAncestorWindow(e,t.view);this.posx-=n.left,this.posy-=n.top}preventDefault(){this.browserEvent.preventDefault()}stopPropagation(){this.browserEvent.stopPropagation()}};var lo=class{browserEvent;deltaY;deltaX;target;constructor(e,t=0,n=0){this.browserEvent=e||null,this.target=e?e.target||e.targetNode||e.srcElement:null,this.deltaY=n,this.deltaX=t;let o=!1;if(kl){let r=navigator.userAgent.match(/Chrome\/(\d+)/);o=(r?parseInt(r[1]):123)<=122}if(e){let r=e,s=e,a=e.view?.devicePixelRatio||1;if(typeof r.wheelDeltaY<"u")o?this.deltaY=r.wheelDeltaY/(120*a):this.deltaY=r.wheelDeltaY/120;else if(typeof s.VERTICAL_AXIS<"u"&&s.axis===s.VERTICAL_AXIS)this.deltaY=-s.detail/3;else if(e.type==="wheel"){let l=e;l.deltaMode===l.DOM_DELTA_LINE?kr&&!Se?this.deltaY=-e.deltaY/3:this.deltaY=-e.deltaY:this.deltaY=-e.deltaY/40}if(typeof r.wheelDeltaX<"u")Bo&&Ye?this.deltaX=-(r.wheelDeltaX/120):o?this.deltaX=r.wheelDeltaX/(120*a):this.deltaX=r.wheelDeltaX/120;else if(typeof s.HORIZONTAL_AXIS<"u"&&s.axis===s.HORIZONTAL_AXIS)this.deltaX=-e.detail/3;else if(e.type==="wheel"){let l=e;l.deltaMode===l.DOM_DELTA_LINE?kr&&!Se?this.deltaX=-e.deltaX/3:this.deltaX=-e.deltaX:this.deltaX=-e.deltaX/40}this.deltaY===0&&this.deltaX===0&&e.wheelDelta&&(o?this.deltaY=e.wheelDelta/(120*a):this.deltaY=e.wheelDelta/120)}}preventDefault(){this.browserEvent?.preventDefault()}stopPropagation(){this.browserEvent?.stopPropagation()}};function Rw(i){return i}var wh=class{lastCache=void 0;lastArgKey=void 0;_fn;_computeKey;constructor(e,t){typeof e=="function"?(this._fn=e,this._computeKey=Rw):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){let t=this._computeKey(e);return this.lastArgKey!==t&&(this.lastArgKey=t,this.lastCache=this._fn(e)),this.lastCache}},Uc=class{_map=new Map;_map2=new Map;get cachedValues(){return this._map}_fn;_computeKey;constructor(e,t){typeof e=="function"?(this._fn=e,this._computeKey=Rw):(this._fn=t,this._computeKey=e.getCacheKey)}get(e){let t=this._computeKey(e);if(this._map2.has(t))return this._map2.get(t);let n=this._fn(e);return this._map.set(e,n),this._map2.set(t,n),n}};var un=class{constructor(e){this.executor=e}_didRun=!1;_value;_error;get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};function Sv(i){return i<0?0:i>255?255:i|0}function Mw(i){return!i||typeof i!="string"?!0:i.trim().length===0}function Nw(i){return i.replace(/[<>"'&]/g,e=>{switch(e){case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"&":return"&amp;"}return e})}function _r(i){return i.replace(/[<>&]/g,function(e){switch(e){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";default:return e}})}function pn(i){return i.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function kh(i,e){if(!i||!e)return i;let t=e.length;if(t===0||i.length===0)return i;let n=0;for(;i.indexOf(e,n)===n;)n=n+t;return i.substring(n)}function Rl(i,e){if(!i||!e)return i;let t=e.length,n=i.length;if(t===0||n===0)return i;let o=n,r=-1;for(;r=i.lastIndexOf(e,o-1),!(r===-1||r+t!==o);){if(r===0)return"";o=r}return i.substring(0,o)}function Dh(i,e,t={}){if(!i)throw new Error("Cannot create regex from empty string");e||(i=pn(i)),t.wholeWord&&(/\B/.test(i.charAt(0))||(i="\\b"+i),/\B/.test(i.charAt(i.length-1))||(i=i+"\\b"));let n="";return t.global&&(n+="g"),t.matchCase||(n+="i"),t.multiline&&(n+="m"),t.unicode&&(n+="u"),new RegExp(i,n)}function _h(i){return i.split(/\r\n|\r|\n/)}function Lr(i){for(let e=0,t=i.length;e<t;e++){let n=i.charCodeAt(e);if(n!==32&&n!==9)return e}return-1}function wv(i,e=i.length-1){for(let t=e;t>=0;t--){let n=i.charCodeAt(t);if(n!==32&&n!==9)return t}return-1}function Tv(i,e){return i<e?-1:i>e?1:0}function Fw(i,e,t=0,n=i.length,o=0,r=e.length){for(;t<n&&o<r;t++,o++){let l=i.charCodeAt(t),c=e.charCodeAt(o);if(l<c)return-1;if(l>c)return 1}let s=n-t,a=r-o;return s<a?-1:s>a?1:0}function kv(i,e,t=0,n=i.length,o=0,r=e.length){for(;t<n&&o<r;t++,o++){let l=i.charCodeAt(t),c=e.charCodeAt(o);if(l===c)continue;if(l>=128||c>=128)return Fw(i.toLowerCase(),e.toLowerCase(),t,n,o,r);Pw(l)&&(l-=32),Pw(c)&&(c-=32);let u=l-c;if(u!==0)return u}let s=n-t,a=r-o;return s<a?-1:s>a?1:0}function Pw(i){return i>=97&&i<=122}function Dv(i){return i>=65&&i<=90}function Li(i,e){return i.length===e.length&&kv(i,e)===0}function ds(i,e){let t=e.length;return e.length>i.length?!1:kv(i,e,0,t)===0}function ui(i){return 55296<=i&&i<=56319}function Pl(i){return 56320<=i&&i<=57343}function Lh(i,e){return(i-55296<<10)+(e-56320)+65536}function Ol(i,e,t){let n=i.charCodeAt(t);if(ui(n)&&t+1<e){let o=i.charCodeAt(t+1);if(Pl(o))return Lh(n,o)}return n}function EP(i,e){let t=i.charCodeAt(e-1);if(Pl(t)&&e>1){let n=i.charCodeAt(e-2);if(ui(n))return Lh(n,t)}return t}var Vc=class{_str;_len;_offset;get offset(){return this._offset}constructor(e,t=0){this._str=e,this._len=e.length,this._offset=t}setOffset(e){this._offset=e}prevCodePoint(){let e=EP(this._str,this._offset);return this._offset-=e>=65536?2:1,e}nextCodePoint(){let e=Ol(this._str,this._len,this._offset);return this._offset+=e>=65536?2:1,e}eol(){return this._offset>=this._len}},fa=class{_iterator;get offset(){return this._iterator.offset}constructor(e,t=0){this._iterator=new Vc(e,t)}nextGraphemeLength(){let e=Th.getInstance(),t=this._iterator,n=t.offset,o=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){let r=t.offset,s=e.getGraphemeBreakType(t.nextCodePoint());if(Ow(o,s)){t.setOffset(r);break}o=s}return t.offset-n}prevGraphemeLength(){let e=Th.getInstance(),t=this._iterator,n=t.offset,o=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){let r=t.offset,s=e.getGraphemeBreakType(t.prevCodePoint());if(Ow(s,o)){t.setOffset(r);break}o=s}return n-t.offset}eol(){return this._iterator.eol()}};function CP(i,e){return new fa(i,e).nextGraphemeLength()}function wP(i,e){return new fa(i,e).prevGraphemeLength()}function Bw(i,e){e>0&&Pl(i.charCodeAt(e))&&e--;let t=e+CP(i,e);return[t-wP(i,t),t]}var Ev;function TP(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function zc(i){return Ev||(Ev=TP()),Ev.test(i)}var kP=/^[\t\n\r\x20-\x7E]*$/;function _v(i){return kP.test(i)}var Lv=/[\u2028\u2029]/;function Rh(i){return Lv.test(i)}function Ww(i){return i>=11904&&i<=55215||i>=63744&&i<=64255||i>=65281&&i<=65374}function Ph(i){return i>=127462&&i<=127487||i===8986||i===8987||i===9200||i===9203||i>=9728&&i<=10175||i===11088||i===11093||i>=127744&&i<=128591||i>=128640&&i<=128764||i>=128992&&i<=129008||i>=129280&&i<=129535||i>=129648&&i<=129782}var Uw=String.fromCharCode(65279);function Vw(i){return!!(i&&i.length>0&&i.charCodeAt(0)===65279)}function Rv(i,e=!1){return i?(e&&(i=i.replace(/\\./g,"")),i.toLowerCase()!==i):!1}function zw(i){let e=26;return i=i%(2*e),i<e?String.fromCharCode(97+i):String.fromCharCode(65+i-e)}function Ow(i,e){return i===0?e!==5&&e!==7:i===2&&e===3?!1:i===4||i===2||i===3||e===4||e===2||e===3?!0:!(i===8&&(e===8||e===9||e===11||e===12)||(i===11||i===9)&&(e===9||e===10)||(i===12||i===10)&&e===10||e===5||e===13||e===7||i===1||i===13&&e===14||i===6&&e===6)}var Th=class i{static _INSTANCE=null;static getInstance(){return i._INSTANCE||(i._INSTANCE=new i),i._INSTANCE}_data;constructor(){this._data=DP()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let t=this._data,n=t.length/3,o=1;for(;o<=n;)if(e<t[3*o])o=2*o;else if(e>t[3*o+1])o=2*o+1;else return t[3*o+2];return 0}};function DP(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}var Aw=class i{constructor(e){this.confusableDictionary=e}static ambiguousCharacterData=new un(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'));static cache=new wh({getCacheKey:JSON.stringify},e=>{function t(u){let p=new Map;for(let h=0;h<u.length;h+=2)p.set(u[h],u[h+1]);return p}function n(u,p){let h=new Map(u);for(let[m,v]of p)h.set(m,v);return h}function o(u,p){if(!u)return p;let h=new Map;for(let[m,v]of u)p.has(m)&&h.set(m,v);return h}let r=this.ambiguousCharacterData.value,s=e.filter(u=>!u.startsWith("_")&&u in r);s.length===0&&(s=["_default"]);let a;for(let u of s){let p=t(r[u]);a=o(a,p)}let l=t(r._common),c=n(l,a);return new i(c)});static getInstance(e){return i.cache.get(Array.from(e))}static _locales=new un(()=>Object.keys(i.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")));static getLocales(){return i._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let t=0;t<e.length;t++){let n=e.codePointAt(t);if(typeof n=="number"&&this.isAmbiguous(n))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}};function Xt(i){return typeof i=="string"}function Ut(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)&&!(i instanceof RegExp)&&!(i instanceof Date)}function Wo(i){return typeof i=="number"&&!isNaN(i)}function Hw(i){return i===!0||i===!1}function Uo(i){return typeof i>"u"}function Oh(i){return!Dn(i)}function Dn(i){return Uo(i)||i===null}function Rt(i){if(Dn(i))throw new Error("Assertion Failed: argument is undefined or null");return i}var _P=Object.prototype.hasOwnProperty;function ba(i){if(!Ut(i))return!1;for(let e in i)if(_P.call(i,e))return!1;return!0}function Pv(i){return typeof i=="function"}function Kw(i,e){let t=Math.min(i.length,e.length);for(let n=0;n<t;n++)LP(i[n],e[n])}function LP(i,e){if(Xt(e)){if(typeof i!==e)throw new Error(`argument does not match constraint: typeof ${e}`)}else if(Pv(e)){try{if(i instanceof e)return}catch{}if(!Dn(i)&&i.constructor===e||e.length===1&&e.call(void 0,i)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}function cs(i){return i===47||i===92}function Hc(i){return i.replace(/[\\/]/g,Be.sep)}function Gw(i){return i.indexOf("/")===-1&&(i=Hc(i)),/^[a-zA-Z]:(\/|$)/.test(i)&&(i="/"+i),i}function Ov(i,e=Be.sep){if(!i)return"";let t=i.length,n=i.charCodeAt(0);if(cs(n)){if(cs(i.charCodeAt(1))&&!cs(i.charCodeAt(2))){let r=3,s=r;for(;r<t&&!cs(i.charCodeAt(r));r++);if(s!==r&&!cs(i.charCodeAt(r+1))){for(r+=1;r<t;r++)if(cs(i.charCodeAt(r)))return i.slice(0,r+1).replace(/[\\/]/g,e)}}return e}else if($w(n)&&i.charCodeAt(1)===58)return cs(i.charCodeAt(2))?i.slice(0,2)+e:i.slice(0,2);let o=i.indexOf("://");if(o!==-1){for(o+=3;o<t;o++)if(cs(i.charCodeAt(o)))return i.slice(0,o+1)}return""}var RP=/[\\/:\*\?"<>\|]/g,PP=/[/]/g,OP=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function qw(i,e=Ye){let t=e?RP:PP;return!(!i||i.length===0||/^\s+$/.test(i)||(t.lastIndex=0,t.test(i))||e&&OP.test(i)||i==="."||i===".."||e&&i[i.length-1]==="."||e&&i.length!==i.trim().length||i.length>255)}function ya(i,e,t,n=Zn){if(i===e)return!0;if(!i||!e||e.length>i.length)return!1;if(t){if(!ds(i,e))return!1;if(e.length===i.length)return!0;let r=e.length;return e.charAt(e.length-1)===n&&r--,i.charAt(r)===n}return e.charAt(e.length-1)!==n&&(e+=n),i.indexOf(e)===0}function $w(i){return i>=65&&i<=90||i>=97&&i<=122}function jw(i,e=Ye){return e?$w(i.charCodeAt(0))&&i.charCodeAt(1)===58:!1}function Yw(i,e=Ye){return jw(i,e)?i[0]:void 0}function Qw(i,e,t){return e.length>i.length?-1:i===e?0:(t&&(i=i.toLowerCase(),e=e.toLowerCase()),i.indexOf(e))}function Xw(i){let e=i.split(":"),t,n,o;for(let r of e){let s=Number(r);Wo(s)?n===void 0?n=s:o===void 0&&(o=s):t=t?[t,r].join(":"):r}if(!t)throw new Error("Format for `--goto` should be: `FILE:LINE(:COLUMN)`");return{path:t,line:n!==void 0?n:void 0,column:o!==void 0?o:n!==void 0?1:void 0}}var H;(ve=>(ve.inMemory="inmemory",ve.vscode="vscode",ve.internal="private",ve.walkThrough="walkThrough",ve.walkThroughSnippet="walkThroughSnippet",ve.http="http",ve.https="https",ve.file="file",ve.mailto="mailto",ve.untitled="untitled",ve.data="data",ve.command="command",ve.vscodeRemote="vscode-remote",ve.vscodeRemoteResource="vscode-remote-resource",ve.vscodeManagedRemoteResource="vscode-managed-remote-resource",ve.vscodeUserData="vscode-userdata",ve.vscodeCustomEditor="vscode-custom-editor",ve.vscodeNotebookCell="vscode-notebook-cell",ve.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",ve.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",ve.vscodeNotebookCellOutput="vscode-notebook-cell-output",ve.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",ve.vscodeNotebookMetadata="vscode-notebook-metadata",ve.vscodeInteractiveInput="vscode-interactive-input",ve.vscodeSettings="vscode-settings",ve.vscodeWorkspaceTrust="vscode-workspace-trust",ve.vscodeTerminal="vscode-terminal",ve.vscodeChatCodeBlock="vscode-chat-code-block",ve.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",ve.vscodeChatSesssion="vscode-chat-editor",ve.webviewPanel="webview-panel",ve.vscodeWebview="vscode-webview",ve.extension="extension",ve.vscodeFileResource="vscode-file",ve.tmp="tmp",ve.vsls="vsls",ve.vscodeSourceControl="vscode-scm",ve.commentsInput="comment",ve.codeSetting="code-setting",ve.outputChannel="output"))(H||={});function co(i,e){return N.isUri(i)?Li(i.scheme,e):ds(i,e+":")}var AP="tkn",Av=class{_hosts=Object.create(null);_ports=Object.create(null);_connectionTokens=Object.create(null);_preferredWebSchema="http";_delegate=null;_serverRootPath="/";setPreferredWebSchema(e){this._preferredWebSchema=e}setDelegate(e){this._delegate=e}setServerRootPath(e,t){this._serverRootPath=MP(e,t)}getServerRootPath(){return this._serverRootPath}get _remoteResourcesPath(){return Be.join(this._serverRootPath,H.vscodeRemoteResource)}set(e,t,n){this._hosts[e]=t,this._ports[e]=n}setConnectionToken(e,t){this._connectionTokens[e]=t}getPreferredWebSchema(){return this._preferredWebSchema}rewrite(e){if(this._delegate)try{return this._delegate(e)}catch(a){return Ne(a),e}let t=e.authority,n=this._hosts[t];n&&n.indexOf(":")!==-1&&n.indexOf("[")===-1&&(n=`[${n}]`);let o=this._ports[t],r=this._connectionTokens[t],s=`path=${encodeURIComponent(e.path)}`;return typeof r=="string"&&(s+=`&${AP}=${encodeURIComponent(r)}`),N.from({scheme:At?this._preferredWebSchema:H.vscodeRemoteResource,authority:`${n}:${o}`,path:this._remoteResourcesPath,query:s})}},Ah=new Av;function MP(i,e){return Be.join(e??"/",`${i.quality??"oss"}-${i.commit??"dev"}`)}var Zw="vs/../../node_modules",eT="vs/../../node_modules.asar";var Nv="vscode-app",Mv=class i{static FALLBACK_AUTHORITY=Nv;asBrowserUri(e){let t=this.toUri(e);return this.uriToBrowserUri(t)}uriToBrowserUri(e){return e.scheme===H.vscodeRemote?Ah.rewrite(e):e.scheme===H.file&&(Zr||qC===`${H.vscodeFileResource}://${i.FALLBACK_AUTHORITY}`)?e.with({scheme:H.vscodeFileResource,authority:e.authority||i.FALLBACK_AUTHORITY,query:null,fragment:null}):e}asFileUri(e){let t=this.toUri(e);return this.uriToFileUri(t)}uriToFileUri(e){return e.scheme===H.vscodeFileResource?e.with({scheme:H.file,authority:e.authority!==i.FALLBACK_AUTHORITY?e.authority:null,query:null,fragment:null}):e}toUri(e,t){if(N.isUri(e))return e;if(globalThis._VSCODE_FILE_ROOT){let n=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(n))return N.joinPath(N.parse(n,!0),e);let o=Jn(n,e);return N.file(o)}return N.parse(t.toUrl(e))}},hn=new Mv,NP;(r=>{let i=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);r.CoopAndCoep=Object.freeze(i.get("3"));let t="vscode-coi";function n(s){let a;typeof s=="string"?a=new URL(s).searchParams:s instanceof URL?a=s.searchParams:N.isUri(s)&&(a=new URL(s.toString(!0)).searchParams);let l=a?.get(t);if(l)return i.get(l)}r.getHeadersFromQuery=n;function o(s,a,l){if(!globalThis.crossOriginIsolated)return;let c=a&&l?"3":l?"2":"1";s instanceof URLSearchParams?s.set(t,c):s[t]=c}r.addSearchParam=o})(NP||={});function Rr(i){return _c(i,!0)}var Kc=class{constructor(e){this._ignorePathCasing=e}compare(e,t,n=!1){return e===t?0:Tv(this.getComparisonKey(e,n),this.getComparisonKey(t,n))}isEqual(e,t,n=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,n)===this.getComparisonKey(t,n)}getComparisonKey(e,t=!1){return e.with({path:this._ignorePathCasing(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this._ignorePathCasing(e)}isEqualOrParent(e,t,n=!1){if(e.scheme===t.scheme){if(e.scheme===H.file)return ya(Rr(e),Rr(t),this._ignorePathCasing(e))&&e.query===t.query&&(n||e.fragment===t.fragment);if(Fv(e.authority,t.authority))return ya(e.path,t.path,this._ignorePathCasing(e),"/")&&e.query===t.query&&(n||e.fragment===t.fragment)}return!1}joinPath(e,...t){return N.joinPath(e,...t)}basenameOrAuthority(e){return Ri(e)||e.authority}basename(e){return Be.basename(e.path)}extname(e){return Be.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===H.file?t=N.file(fl(Rr(e))).path:(t=Be.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===H.file?t=N.file(No(Rr(e))).path:t=Be.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!Fv(e.authority,t.authority))return;if(e.scheme===H.file){let r=ml(Rr(e),Rr(t));return Ye?Hc(r):r}let n=e.path||"/",o=t.path||"/";if(this._ignorePathCasing(e)){let r=0;for(let s=Math.min(n.length,o.length);r<s&&!(n.charCodeAt(r)!==o.charCodeAt(r)&&n.charAt(r).toLowerCase()!==o.charAt(r).toLowerCase());r++);n=o.substr(0,r)+n.substr(r)}return Be.relative(n,o)}resolvePath(e,t){if(e.scheme===H.file){let n=N.file(gl(Rr(e),t));return e.with({authority:n.authority,path:n.path})}return t=Gw(t),e.with({path:Be.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&Li(e,t)}hasTrailingPathSeparator(e,t=Zn){if(e.scheme===H.file){let n=Rr(e);return n.length>Ov(n).length&&n[n.length-1]===t}else{let n=e.path;return n.length>1&&n.charCodeAt(n.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=Zn){return tT(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=Zn){let n=!1;if(e.scheme===H.file){let o=Rr(e);n=o!==void 0&&o.length===Ov(o).length&&o[o.length-1]===t}else{t="/";let o=e.path;n=o.length===1&&o.charCodeAt(o.length-1)===47}return!n&&!tT(e,t)?e.with({path:e.path+"/"}):e}},nt=new Kc(()=>!1),FP=new Kc(i=>i.scheme===H.file?!St:!0),BP=new Kc(i=>!0),ei=nt.isEqual.bind(nt),qU=nt.isEqualOrParent.bind(nt),$U=nt.getComparisonKey.bind(nt),nT=nt.basenameOrAuthority.bind(nt),Ri=nt.basename.bind(nt),Mh=nt.extname.bind(nt),Al=nt.dirname.bind(nt),Oe=nt.joinPath.bind(nt),jU=nt.normalizePath.bind(nt),Gc=nt.relativePath.bind(nt),Bv=nt.resolvePath.bind(nt),iT=nt.isAbsolutePath.bind(nt),Fv=nt.isEqualAuthority.bind(nt),tT=nt.hasTrailingPathSeparator.bind(nt),YU=nt.removeTrailingPathSeparator.bind(nt),QU=nt.addTrailingPathSeparator.bind(nt);var Ml;(r=>{r.META_DATA_LABEL="label",r.META_DATA_DESCRIPTION="description",r.META_DATA_SIZE="size",r.META_DATA_MIME="mime";function o(s){let a=new Map;s.path.substring(s.path.indexOf(";")+1,s.path.lastIndexOf(";")).split(";").forEach(u=>{let[p,h]=u.split(":");p&&h&&a.set(p,h)});let c=s.path.substring(0,s.path.indexOf(";"));return c&&a.set(r.META_DATA_MIME,c),a}r.parseMetaData=o})(Ml||={});function jc(i){return!!i&&typeof i.then=="function"}function Yc(i){let e=new Vn,t=i(e.token),n=new Promise((o,r)=>{let s=e.token.onCancellationRequested(()=>{s.dispose(),r(new Bn)});Promise.resolve(t).then(a=>{s.dispose(),e.dispose(),o(a)},a=>{s.dispose(),e.dispose(),r(a)})});return new class{cancel(){e.cancel(),e.dispose()}then(o,r){return n.then(o,r)}catch(o){return this.then(void 0,o)}finally(o){return n.finally(o)}}}function Qc(i,e,t){return new Promise((n,o)=>{let r=e.onCancellationRequested(()=>{r.dispose(),n(t)});i.then(n,o).finally(()=>r.dispose())})}function Wv(){let i,e;return{promise:new Promise((n,o)=>{i=n,e=o}),resolve:i,reject:e}}var Nl=class{activePromise;queuedPromise;queuedPromiseFactory;isDisposed=!1;constructor(){this.activePromise=null,this.queuedPromise=null,this.queuedPromiseFactory=null}queue(e){if(this.isDisposed)return Promise.reject(new Error("Throttler is disposed"));if(this.activePromise){if(this.queuedPromiseFactory=e,!this.queuedPromise){let t=()=>{if(this.queuedPromise=null,this.isDisposed)return;let n=this.queue(this.queuedPromiseFactory);return this.queuedPromiseFactory=null,n};this.queuedPromise=new Promise(n=>{this.activePromise.then(t,t).then(n)})}return new Promise((t,n)=>{this.queuedPromise.then(t,n)})}return this.activePromise=e(),new Promise((t,n)=>{this.activePromise.then(o=>{this.activePromise=null,t(o)},o=>{this.activePromise=null,n(o)})})}dispose(){this.isDisposed=!0}};var UP=(i,e)=>{let t=!0,n=setTimeout(()=>{t=!1,e()},i);return{isTriggered:()=>t,dispose:()=>{clearTimeout(n),t=!1}}},VP=i=>{let e=!0;return queueMicrotask(()=>{e&&(e=!1,i())}),{isTriggered:()=>e,dispose:()=>{e=!1}}},Vo=class{constructor(e){this.defaultDelay=e;this.deferred=null,this.completionPromise=null,this.doResolve=null,this.doReject=null,this.task=null}deferred;completionPromise;doResolve;doReject;task;trigger(e,t=this.defaultDelay){this.task=e,this.cancelTimeout(),this.completionPromise||(this.completionPromise=new Promise((o,r)=>{this.doResolve=o,this.doReject=r}).then(()=>{if(this.completionPromise=null,this.doResolve=null,this.task){let o=this.task;return this.task=null,o()}}));let n=()=>{this.deferred=null,this.doResolve?.(null)};return this.deferred=t===uv?VP(n):UP(t,n),this.completionPromise}isTriggered(){return!!this.deferred?.isTriggered()}cancel(){this.cancelTimeout(),this.completionPromise&&(this.doReject?.(new Bn),this.completionPromise=null)}cancelTimeout(){this.deferred?.dispose(),this.deferred=null}dispose(){this.cancel()}},Ia=class{delayer;throttler;constructor(e){this.delayer=new Vo(e),this.throttler=new Nl}trigger(e,t){return this.delayer.trigger(()=>this.throttler.queue(e),t)}isTriggered(){return this.delayer.isTriggered()}cancel(){this.delayer.cancel()}dispose(){this.delayer.dispose(),this.throttler.dispose()}},Fl=class{_isOpen;_promise;_completePromise;constructor(){this._isOpen=!1,this._promise=new Promise((e,t)=>{this._completePromise=e})}isOpen(){return this._isOpen}open(){this._isOpen=!0,this._completePromise(!0)}wait(){return this._promise}};function pi(i,e){return e?new Promise((t,n)=>{let o=setTimeout(()=>{r.dispose(),t()},i),r=e.onCancellationRequested(()=>{clearTimeout(o),r.dispose(),n(new Bn)})}):Yc(t=>pi(i,t))}function Wh(i,e=0,t){let n=setTimeout(()=>{i(),t&&o.dispose()},e),o=le(()=>{clearTimeout(n),t?.deleteAndLeak(o)});return t?.add(o),o}var Pr=class{_token;_isDisposed=!1;constructor(e,t){this._token=-1,typeof e=="function"&&typeof t=="number"&&this.setIfNotSet(e,t)}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,t){if(this._isDisposed)throw new Ge("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},t)}setIfNotSet(e,t){if(this._isDisposed)throw new Ge("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},t))}},Nh=class{disposable=void 0;isDisposed=!1;cancel(){this.disposable?.dispose(),this.disposable=void 0}cancelAndSet(e,t,n=globalThis){if(this.isDisposed)throw new Ge("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();let o=n.setInterval(()=>{e()},t);this.disposable=le(()=>{n.clearInterval(o),this.disposable=void 0})}dispose(){this.cancel(),this.isDisposed=!0}},Hi=class{runner;timeoutToken;timeout;timeoutHandler;constructor(e,t){this.timeoutToken=-1,this.runner=e,this.timeout=t,this.timeoutHandler=this.onTimeout.bind(this)}dispose(){this.cancel(),this.runner=null}cancel(){this.isScheduled()&&(clearTimeout(this.timeoutToken),this.timeoutToken=-1)}schedule(e=this.timeout){this.cancel(),this.timeoutToken=setTimeout(this.timeoutHandler,e)}get delay(){return this.timeout}set delay(e){this.timeout=e}isScheduled(){return this.timeoutToken!==-1}flush(){this.isScheduled()&&(this.cancel(),this.doRun())}onTimeout(){this.timeoutToken=-1,this.runner&&this.doRun()}doRun(){this.runner?.()}};var ps,qc;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?qc=(i,e)=>{th(()=>{if(t)return;let n=Date.now()+15;e(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,n-Date.now())}}))});let t=!1;return{dispose(){t||(t=!0)}}}:qc=(i,e,t)=>{let n=i.requestIdleCallback(e,typeof t=="number"?{timeout:t}:void 0),o=!1;return{dispose(){o||(o=!0,i.cancelIdleCallback(n))}}},ps=i=>qc(globalThis,i)})();var Fh=class{_executor;_handle;_didRun=!1;_value;_error;constructor(e,t){this._executor=()=>{try{this._value=t()}catch(n){this._error=n}finally{this._didRun=!0}},this._handle=qc(e,()=>this._executor())}dispose(){this._handle.dispose()}get value(){if(this._didRun||(this._handle.dispose(),this._executor()),this._error)throw this._error;return this._value}get isInitialized(){return this._didRun}},$c=class extends Fh{constructor(e){super(globalThis,e)}};var Bh=class{_running;_queued;isRunning(e){return typeof e=="number"?this._running?.taskId===e:!!this._running}get running(){return this._running?.promise}cancelRunning(){this._running?.cancel()}run(e,t,n){return this._running={taskId:e,cancel:()=>n?.(),promise:t},t.then(()=>this.doneRunning(e),()=>this.doneRunning(e)),t}doneRunning(e){this._running&&e===this._running.taskId&&(this._running=void 0,this.runQueued())}runQueued(){if(this._queued){let e=this._queued;this._queued=void 0,e.run().then(e.promiseResolve,e.promiseReject)}}queue(e){if(this._queued)this._queued.run=e;else{let{promise:t,resolve:n,reject:o}=Wv();this._queued={run:e,promise:t,promiseResolve:n,promiseReject:o}}return this._queued.promise}hasQueued(){return!!this._queued}async join(){return this._queued?.promise??this._running?.promise}};var us=class{completeCallback;errorCallback;outcome;get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}p;constructor(){this.p=new Promise((e,t)=>{this.completeCallback=e,this.errorCallback=t})}complete(e){return new Promise(t=>{this.completeCallback(e),this.outcome={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.errorCallback(e),this.outcome={outcome:1,value:e},t()})}cancel(){return this.error(new Bn)}},Ki;(t=>{async function i(n){let o,r=await Promise.all(n.map(s=>s.then(a=>a,a=>{o||(o=a)})));if(typeof o<"u")throw o;return r}t.settled=i;function e(n){return new Promise(async(o,r)=>{try{await n(o,r)}catch(s){r(s)}})}t.withAsyncBody=e})(Ki||={});var oT=class i{static fromArray(e){return new i(t=>{t.emitMany(e)})}static fromPromise(e){return new i(async t=>{t.emitMany(await e)})}static fromPromises(e){return new i(async t=>{await Promise.all(e.map(async n=>t.emitOne(await n)))})}static merge(e){return new i(async t=>{await Promise.all(e.map(async n=>{for await(let o of n)t.emitOne(o)}))})}static EMPTY=i.fromArray([]);_state;_results;_error;_onReturn;_onStateChanged;constructor(e,t){this._state=0,this._results=[],this._error=null,this._onReturn=t,this._onStateChanged=new C,queueMicrotask(async()=>{let n={emitOne:o=>this.emitOne(o),emitMany:o=>this.emitMany(o),reject:o=>this.reject(o)};try{await Promise.resolve(e(n)),this.resolve()}catch(o){this.reject(o)}finally{n.emitOne=void 0,n.emitMany=void 0,n.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await ee.toPromise(this._onStateChanged.event)}while(!0)},return:async()=>(this._onReturn?.(),{done:!0,value:void 0})}}static map(e,t){return new i(async n=>{for await(let o of e)n.emitOne(t(o))})}map(e){return i.map(this,e)}static filter(e,t){return new i(async n=>{for await(let o of e)t(o)&&n.emitOne(o)})}filter(e){return i.filter(this,e)}static coalesce(e){return i.filter(e,t=>!!t)}coalesce(){return i.coalesce(this)}static async toPromise(e){let t=[];for await(let n of e)t.push(n);return t}toPromise(){return i.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var{entries:pT,setPrototypeOf:rT,isFrozen:zP,getPrototypeOf:HP,getOwnPropertyDescriptor:KP}=Object,{freeze:ti,seal:po,create:GP}=Object,{apply:Gv,construct:qv}=typeof Reflect<"u"&&Reflect;Gv||(Gv=function(e,t,n){return e.apply(t,n)});ti||(ti=function(e){return e});po||(po=function(e){return e});qv||(qv=function(e,t){return new e(...t)});var qP=Gi(Array.prototype.forEach),sT=Gi(Array.prototype.pop),Xc=Gi(Array.prototype.push),zh=Gi(String.prototype.toLowerCase),Uv=Gi(String.prototype.toString),$P=Gi(String.prototype.match),uo=Gi(String.prototype.replace),jP=Gi(String.prototype.indexOf),YP=Gi(String.prototype.trim),Pi=Gi(RegExp.prototype.test),Jc=QP(TypeError);function Gi(i){return function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return Gv(i,e,n)}}function QP(i){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return qv(i,t)}}function qe(i,e,t){var n;t=(n=t)!==null&&n!==void 0?n:zh,rT&&rT(i,null);let o=e.length;for(;o--;){let r=e[o];if(typeof r=="string"){let s=t(r);s!==r&&(zP(e)||(e[o]=s),r=s)}i[r]=!0}return i}function Bl(i){let e=GP(null);for(let[t,n]of pT(i))e[t]=n;return e}function Uh(i,e){for(;i!==null;){let n=KP(i,e);if(n){if(n.get)return Gi(n.get);if(typeof n.value=="function")return Gi(n.value)}i=HP(i)}function t(n){return console.warn("fallback value for",n),null}return t}var aT=ti(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Vv=ti(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),zv=ti(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),XP=ti(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Hv=ti(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),JP=ti(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),lT=ti(["#text"]),dT=ti(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Kv=ti(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),cT=ti(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Vh=ti(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),ZP=po(/\{\{[\w\W]*|[\w\W]*\}\}/gm),eO=po(/<%[\w\W]*|[\w\W]*%>/gm),tO=po(/\${[\w\W]*}/gm),nO=po(/^data-[\-\w.\u00B7-\uFFFF]/),iO=po(/^aria-[\-\w]+$/),hT=po(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),oO=po(/^(?:\w+script|data):/i),rO=po(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),gT=po(/^html$/i),uT=Object.freeze({__proto__:null,MUSTACHE_EXPR:ZP,ERB_EXPR:eO,TMPLIT_EXPR:tO,DATA_ATTR:nO,ARIA_ATTR:iO,IS_ALLOWED_URI:hT,IS_SCRIPT_OR_DATA:oO,ATTR_WHITESPACE:rO,DOCTYPE_NAME:gT}),sO=()=>typeof window>"u"?null:window,aO=function(e,t){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let n=null,o="data-tt-policy-suffix";t&&t.hasAttribute(o)&&(n=t.getAttribute(o));let r="dompurify"+(n?"#"+n:"");try{return e.createPolicy(r,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function mT(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:sO(),e=fe=>mT(fe);if(e.version="3.0.5",e.removed=[],!i||!i.document||i.document.nodeType!==9)return e.isSupported=!1,e;let t=i.document,n=t.currentScript,{document:o}=i,{DocumentFragment:r,HTMLTemplateElement:s,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=i.NamedNodeMap||i.MozNamedAttrMap,HTMLFormElement:p,DOMParser:h,trustedTypes:m}=i,v=l.prototype,f=Uh(v,"cloneNode"),b=Uh(v,"nextSibling"),E=Uh(v,"childNodes"),T=Uh(v,"parentNode");if(typeof s=="function"){let fe=o.createElement("template");fe.content&&fe.content.ownerDocument&&(o=fe.content.ownerDocument)}let _,O="",{implementation:M,createNodeIterator:U,createDocumentFragment:he,getElementsByTagName:Q}=o,{importNode:se}=t,ne={};e.isSupported=typeof pT=="function"&&typeof T=="function"&&M&&M.createHTMLDocument!==void 0;let{MUSTACHE_EXPR:V,ERB_EXPR:X,TMPLIT_EXPR:Ce,DATA_ATTR:Ze,ARIA_ATTR:oe,IS_SCRIPT_OR_DATA:$,ATTR_WHITESPACE:de}=uT,{IS_ALLOWED_URI:ie}=uT,ce=null,ke=qe({},[...aT,...Vv,...zv,...Hv,...lT]),we=null,tt=qe({},[...dT,...Kv,...cT,...Vh]),Me=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ve=null,kn=null,cn=!0,no=!0,Ui=!1,sl=!0,ai=!1,mr=!1,mc=!1,fc=!1,jr=!1,al=!1,ll=!1,Wp=!0,Up=!1,Nb="user-content-",Yr=!0,ia=!1,fr={},br=null,Vp=qe({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),dl=null,zp=qe({},["audio","video","img","source","image","track"]),oa=null,Hp=qe({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),vr="http://www.w3.org/1998/Math/MathML",Po="http://www.w3.org/2000/svg",$t="http://www.w3.org/1999/xhtml",Vi=$t,Qr=!1,Yn=null,ra=qe({},[vr,Po,$t],Uv),Oo,yr=["application/xhtml+xml","text/html"],rt="text/html",tn,Xr=null,Fb=o.createElement("form"),Kp=function(R){return R instanceof RegExp||R instanceof Function},bc=function(R){if(!(Xr&&Xr===R)){if((!R||typeof R!="object")&&(R={}),R=Bl(R),Oo=yr.indexOf(R.PARSER_MEDIA_TYPE)===-1?Oo=rt:Oo=R.PARSER_MEDIA_TYPE,tn=Oo==="application/xhtml+xml"?Uv:zh,ce="ALLOWED_TAGS"in R?qe({},R.ALLOWED_TAGS,tn):ke,we="ALLOWED_ATTR"in R?qe({},R.ALLOWED_ATTR,tn):tt,Yn="ALLOWED_NAMESPACES"in R?qe({},R.ALLOWED_NAMESPACES,Uv):ra,oa="ADD_URI_SAFE_ATTR"in R?qe(Bl(Hp),R.ADD_URI_SAFE_ATTR,tn):Hp,dl="ADD_DATA_URI_TAGS"in R?qe(Bl(zp),R.ADD_DATA_URI_TAGS,tn):zp,br="FORBID_CONTENTS"in R?qe({},R.FORBID_CONTENTS,tn):Vp,ve="FORBID_TAGS"in R?qe({},R.FORBID_TAGS,tn):{},kn="FORBID_ATTR"in R?qe({},R.FORBID_ATTR,tn):{},fr="USE_PROFILES"in R?R.USE_PROFILES:!1,cn=R.ALLOW_ARIA_ATTR!==!1,no=R.ALLOW_DATA_ATTR!==!1,Ui=R.ALLOW_UNKNOWN_PROTOCOLS||!1,sl=R.ALLOW_SELF_CLOSE_IN_ATTR!==!1,ai=R.SAFE_FOR_TEMPLATES||!1,mr=R.WHOLE_DOCUMENT||!1,jr=R.RETURN_DOM||!1,al=R.RETURN_DOM_FRAGMENT||!1,ll=R.RETURN_TRUSTED_TYPE||!1,fc=R.FORCE_BODY||!1,Wp=R.SANITIZE_DOM!==!1,Up=R.SANITIZE_NAMED_PROPS||!1,Yr=R.KEEP_CONTENT!==!1,ia=R.IN_PLACE||!1,ie=R.ALLOWED_URI_REGEXP||hT,Vi=R.NAMESPACE||$t,Me=R.CUSTOM_ELEMENT_HANDLING||{},R.CUSTOM_ELEMENT_HANDLING&&Kp(R.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Me.tagNameCheck=R.CUSTOM_ELEMENT_HANDLING.tagNameCheck),R.CUSTOM_ELEMENT_HANDLING&&Kp(R.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Me.attributeNameCheck=R.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),R.CUSTOM_ELEMENT_HANDLING&&typeof R.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Me.allowCustomizedBuiltInElements=R.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),ai&&(no=!1),al&&(jr=!0),fr&&(ce=qe({},[...lT]),we=[],fr.html===!0&&(qe(ce,aT),qe(we,dT)),fr.svg===!0&&(qe(ce,Vv),qe(we,Kv),qe(we,Vh)),fr.svgFilters===!0&&(qe(ce,zv),qe(we,Kv),qe(we,Vh)),fr.mathMl===!0&&(qe(ce,Hv),qe(we,cT),qe(we,Vh))),R.ADD_TAGS&&(ce===ke&&(ce=Bl(ce)),qe(ce,R.ADD_TAGS,tn)),R.ADD_ATTR&&(we===tt&&(we=Bl(we)),qe(we,R.ADD_ATTR,tn)),R.ADD_URI_SAFE_ATTR&&qe(oa,R.ADD_URI_SAFE_ATTR,tn),R.FORBID_CONTENTS&&(br===Vp&&(br=Bl(br)),qe(br,R.FORBID_CONTENTS,tn)),Yr&&(ce["#text"]=!0),mr&&qe(ce,["html","head","body"]),ce.table&&(qe(ce,["tbody"]),delete ve.tbody),R.TRUSTED_TYPES_POLICY){if(typeof R.TRUSTED_TYPES_POLICY.createHTML!="function")throw Jc('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof R.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Jc('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');_=R.TRUSTED_TYPES_POLICY,O=_.createHTML("")}else _===void 0&&(_=aO(m,n)),_!==null&&typeof O=="string"&&(O=_.createHTML(""));ti&&ti(R),Xr=R}},Gp=qe({},["mi","mo","mn","ms","mtext"]),qp=qe({},["foreignobject","desc","title","annotation-xml"]),Bb=qe({},["title","style","font","a","script"]),Le=qe({},Vv);qe(Le,zv),qe(Le,XP);let y=qe({},Hv);qe(y,JP);let x=function(R){let J=T(R);(!J||!J.tagName)&&(J={namespaceURI:Vi,tagName:"template"});let ge=zh(R.tagName),ct=zh(J.tagName);return Yn[R.namespaceURI]?R.namespaceURI===Po?J.namespaceURI===$t?ge==="svg":J.namespaceURI===vr?ge==="svg"&&(ct==="annotation-xml"||Gp[ct]):!!Le[ge]:R.namespaceURI===vr?J.namespaceURI===$t?ge==="math":J.namespaceURI===Po?ge==="math"&&qp[ct]:!!y[ge]:R.namespaceURI===$t?J.namespaceURI===Po&&!qp[ct]||J.namespaceURI===vr&&!Gp[ct]?!1:!y[ge]&&(Bb[ge]||!Le[ge]):!!(Oo==="application/xhtml+xml"&&Yn[R.namespaceURI]):!1},S=function(R){Xc(e.removed,{element:R});try{R.parentNode.removeChild(R)}catch{R.remove()}},k=function(R,J){try{Xc(e.removed,{attribute:J.getAttributeNode(R),from:J})}catch{Xc(e.removed,{attribute:null,from:J})}if(J.removeAttribute(R),R==="is"&&!we[R])if(jr||al)try{S(J)}catch{}else try{J.setAttribute(R,"")}catch{}},D=function(R){let J,ge;if(fc)R="<remove></remove>"+R;else{let Fn=$P(R,/^[\r\n\t ]+/);ge=Fn&&Fn[0]}Oo==="application/xhtml+xml"&&Vi===$t&&(R='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+R+"</body></html>");let ct=_?_.createHTML(R):R;if(Vi===$t)try{J=new h().parseFromString(ct,Oo)}catch{}if(!J||!J.documentElement){J=M.createDocument(Vi,"template",null);try{J.documentElement.innerHTML=Qr?O:ct}catch{}}let jt=J.body||J.documentElement;return R&&ge&&jt.insertBefore(o.createTextNode(ge),jt.childNodes[0]||null),Vi===$t?Q.call(J,mr?"html":"body")[0]:mr?J.documentElement:jt},W=function(R){return U.call(R.ownerDocument||R,R,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT,null,!1)},z=function(R){return R instanceof p&&(typeof R.nodeName!="string"||typeof R.textContent!="string"||typeof R.removeChild!="function"||!(R.attributes instanceof u)||typeof R.removeAttribute!="function"||typeof R.setAttribute!="function"||typeof R.namespaceURI!="string"||typeof R.insertBefore!="function"||typeof R.hasChildNodes!="function")},ae=function(R){return typeof a=="object"?R instanceof a:R&&typeof R=="object"&&typeof R.nodeType=="number"&&typeof R.nodeName=="string"},pe=function(R,J,ge){ne[R]&&qP(ne[R],ct=>{ct.call(e,J,ge,Xr)})},Re=function(R){let J;if(pe("beforeSanitizeElements",R,null),z(R))return S(R),!0;let ge=tn(R.nodeName);if(pe("uponSanitizeElement",R,{tagName:ge,allowedTags:ce}),R.hasChildNodes()&&!ae(R.firstElementChild)&&(!ae(R.content)||!ae(R.content.firstElementChild))&&Pi(/<[/\w]/g,R.innerHTML)&&Pi(/<[/\w]/g,R.textContent))return S(R),!0;if(!ce[ge]||ve[ge]){if(!ve[ge]&&mt(ge)&&(Me.tagNameCheck instanceof RegExp&&Pi(Me.tagNameCheck,ge)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(ge)))return!1;if(Yr&&!br[ge]){let ct=T(R)||R.parentNode,jt=E(R)||R.childNodes;if(jt&&ct){let Fn=jt.length;for(let Ot=Fn-1;Ot>=0;--Ot)ct.insertBefore(f(jt[Ot],!0),b(R))}}return S(R),!0}return R instanceof l&&!x(R)||(ge==="noscript"||ge==="noembed"||ge==="noframes")&&Pi(/<\/no(script|embed|frames)/i,R.innerHTML)?(S(R),!0):(ai&&R.nodeType===3&&(J=R.textContent,J=uo(J,V," "),J=uo(J,X," "),J=uo(J,Ce," "),R.textContent!==J&&(Xc(e.removed,{element:R.cloneNode()}),R.textContent=J)),pe("afterSanitizeElements",R,null),!1)},je=function(R,J,ge){if(Wp&&(J==="id"||J==="name")&&(ge in o||ge in Fb))return!1;if(!(no&&!kn[J]&&Pi(Ze,J))){if(!(cn&&Pi(oe,J))){if(!we[J]||kn[J]){if(!(mt(R)&&(Me.tagNameCheck instanceof RegExp&&Pi(Me.tagNameCheck,R)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(R))&&(Me.attributeNameCheck instanceof RegExp&&Pi(Me.attributeNameCheck,J)||Me.attributeNameCheck instanceof Function&&Me.attributeNameCheck(J))||J==="is"&&Me.allowCustomizedBuiltInElements&&(Me.tagNameCheck instanceof RegExp&&Pi(Me.tagNameCheck,ge)||Me.tagNameCheck instanceof Function&&Me.tagNameCheck(ge))))return!1}else if(!oa[J]){if(!Pi(ie,uo(ge,de,""))){if(!((J==="src"||J==="xlink:href"||J==="href")&&R!=="script"&&jP(ge,"data:")===0&&dl[R])){if(!(Ui&&!Pi($,uo(ge,de,"")))){if(ge)return!1}}}}}}return!0},mt=function(R){return R.indexOf("-")>0},Ft=function(R){let J,ge,ct,jt;pe("beforeSanitizeAttributes",R,null);let{attributes:Fn}=R;if(!Fn)return;let Ot={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:we};for(jt=Fn.length;jt--;){J=Fn[jt];let{name:Ao,namespaceURI:Wb}=J;if(ge=Ao==="value"?J.value:YP(J.value),ct=tn(Ao),Ot.attrName=ct,Ot.attrValue=ge,Ot.keepAttr=!0,Ot.forceKeepAttr=void 0,pe("uponSanitizeAttribute",R,Ot),ge=Ot.attrValue,Ot.forceKeepAttr||(k(Ao,R),!Ot.keepAttr))continue;if(!sl&&Pi(/\/>/i,ge)){k(Ao,R);continue}ai&&(ge=uo(ge,V," "),ge=uo(ge,X," "),ge=uo(ge,Ce," "));let PC=tn(R.nodeName);if(je(PC,ct,ge)){if(Up&&(ct==="id"||ct==="name")&&(k(Ao,R),ge=Nb+ge),_&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!Wb)switch(m.getAttributeType(PC,ct)){case"TrustedHTML":{ge=_.createHTML(ge);break}case"TrustedScriptURL":{ge=_.createScriptURL(ge);break}}try{Wb?R.setAttributeNS(Wb,Ao,ge):R.setAttribute(Ao,ge),sT(e.removed)}catch{}}}pe("afterSanitizeAttributes",R,null)},It=function fe(R){let J,ge=W(R);for(pe("beforeSanitizeShadowDOM",R,null);J=ge.nextNode();)pe("uponSanitizeShadowNode",J,null),!Re(J)&&(J.content instanceof r&&fe(J.content),Ft(J));pe("afterSanitizeShadowDOM",R,null)};return e.sanitize=function(fe){let R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},J,ge,ct,jt;if(Qr=!fe,Qr&&(fe="<!-->"),typeof fe!="string"&&!ae(fe))if(typeof fe.toString=="function"){if(fe=fe.toString(),typeof fe!="string")throw Jc("dirty is not a string, aborting")}else throw Jc("toString is not a function");if(!e.isSupported)return fe;if(mc||bc(R),e.removed=[],typeof fe=="string"&&(ia=!1),ia){if(fe.nodeName){let Ao=tn(fe.nodeName);if(!ce[Ao]||ve[Ao])throw Jc("root node is forbidden and cannot be sanitized in-place")}}else if(fe instanceof a)J=D("<!---->"),ge=J.ownerDocument.importNode(fe,!0),ge.nodeType===1&&ge.nodeName==="BODY"||ge.nodeName==="HTML"?J=ge:J.appendChild(ge);else{if(!jr&&!ai&&!mr&&fe.indexOf("<")===-1)return _&&ll?_.createHTML(fe):fe;if(J=D(fe),!J)return jr?null:ll?O:""}J&&fc&&S(J.firstChild);let Fn=W(ia?fe:J);for(;ct=Fn.nextNode();)Re(ct)||(ct.content instanceof r&&It(ct.content),Ft(ct));if(ia)return fe;if(jr){if(al)for(jt=he.call(J.ownerDocument);J.firstChild;)jt.appendChild(J.firstChild);else jt=J;return(we.shadowroot||we.shadowrootmode)&&(jt=se.call(t,jt,!0)),jt}let Ot=mr?J.outerHTML:J.innerHTML;return mr&&ce["!doctype"]&&J.ownerDocument&&J.ownerDocument.doctype&&J.ownerDocument.doctype.name&&Pi(gT,J.ownerDocument.doctype.name)&&(Ot="<!DOCTYPE "+J.ownerDocument.doctype.name+`>
`+Ot),ai&&(Ot=uo(Ot,V," "),Ot=uo(Ot,X," "),Ot=uo(Ot,Ce," ")),_&&ll?_.createHTML(Ot):Ot},e.setConfig=function(fe){bc(fe),mc=!0},e.clearConfig=function(){Xr=null,mc=!1},e.isValidAttribute=function(fe,R,J){Xr||bc({});let ge=tn(fe),ct=tn(R);return je(ge,ct,J)},e.addHook=function(fe,R){typeof R=="function"&&(ne[fe]=ne[fe]||[],Xc(ne[fe],R))},e.removeHook=function(fe){if(ne[fe])return sT(ne[fe])},e.removeHooks=function(fe){ne[fe]&&(ne[fe]=[])},e.removeAllHooks=function(){ne={}},e}var zo=mT();var hV=zo.version,gV=zo.isSupported,xa=zo.sanitize,mV=zo.setConfig,fV=zo.clearConfig,bV=zo.isValidAttribute,Hh=zo.addHook,Kh=zo.removeHook,vV=zo.removeHooks,yV=zo.removeAllHooks;function hi(i){return Yv(i,0)}function Yv(i,e){switch(typeof i){case"object":return i===null?Or(349,e):Array.isArray(i)?dO(i,e):cO(i,e);case"string":return qh(i,e);case"boolean":return lO(i,e);case"number":return Or(i,e);case"undefined":return Or(937,e);default:return Or(617,e)}}function Or(i,e){return(e<<5)-e+i|0}function lO(i,e){return Or(i?433:863,e)}function qh(i,e){e=Or(149417,e);for(let t=0,n=i.length;t<n;t++)e=Or(i.charCodeAt(t),e);return e}function dO(i,e){return e=Or(104579,e),i.reduce((t,n)=>Yv(n,t),e)}function cO(i,e){return e=Or(181387,e),Object.keys(i).sort().reduce((t,n)=>(t=qh(n,t),Yv(i[n],t)),e)}function jv(i,e,t=32){let n=t-e,o=~((1<<n)-1);return(i<<e|(o&i)>>>n)>>>0}function fT(i,e=0,t=i.byteLength,n=0){for(let o=0;o<t;o++)i[e+o]=n}function uO(i,e,t="0"){for(;i.length<e;)i=t+i;return i}function Zc(i,e=32){return i instanceof ArrayBuffer?Array.from(new Uint8Array(i)).map(t=>t.toString(16).padStart(2,"0")).join(""):uO((i>>>0).toString(16),e/4)}var Gh=class i{static _bigBlock32=new DataView(new ArrayBuffer(320));_h0=1732584193;_h1=4023233417;_h2=2562383102;_h3=271733878;_h4=3285377520;_buff;_buffDV;_buffLen;_totalLen;_leftoverHighSurrogate;_finished;constructor(){this._buff=new Uint8Array(67),this._buffDV=new DataView(this._buff.buffer),this._buffLen=0,this._totalLen=0,this._leftoverHighSurrogate=0,this._finished=!1}update(e){let t=e.length;if(t===0)return;let n=this._buff,o=this._buffLen,r=this._leftoverHighSurrogate,s,a;for(r!==0?(s=r,a=-1,r=0):(s=e.charCodeAt(0),a=0);;){let l=s;if(ui(s))if(a+1<t){let c=e.charCodeAt(a+1);Pl(c)?(a++,l=Lh(s,c)):l=65533}else{r=s;break}else Pl(s)&&(l=65533);if(o=this._push(n,o,l),a++,a<t)s=e.charCodeAt(a);else break}this._buffLen=o,this._leftoverHighSurrogate=r}_push(e,t,n){return n<128?e[t++]=n:n<2048?(e[t++]=192|(n&1984)>>>6,e[t++]=128|(n&63)>>>0):n<65536?(e[t++]=224|(n&61440)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0):(e[t++]=240|(n&1835008)>>>18,e[t++]=128|(n&258048)>>>12,e[t++]=128|(n&4032)>>>6,e[t++]=128|(n&63)>>>0),t>=64&&(this._step(),t-=64,this._totalLen+=64,e[0]=e[64],e[1]=e[65],e[2]=e[66]),t}digest(){return this._finished||(this._finished=!0,this._leftoverHighSurrogate&&(this._leftoverHighSurrogate=0,this._buffLen=this._push(this._buff,this._buffLen,65533)),this._totalLen+=this._buffLen,this._wrapUp()),Zc(this._h0)+Zc(this._h1)+Zc(this._h2)+Zc(this._h3)+Zc(this._h4)}_wrapUp(){this._buff[this._buffLen++]=128,fT(this._buff,this._buffLen),this._buffLen>56&&(this._step(),fT(this._buff));let e=8*this._totalLen;this._buffDV.setUint32(56,Math.floor(e/4294967296),!1),this._buffDV.setUint32(60,e%4294967296,!1),this._step()}_step(){let e=i._bigBlock32,t=this._buffDV;for(let p=0;p<64;p+=4)e.setUint32(p,t.getUint32(p,!1),!1);for(let p=64;p<320;p+=4)e.setUint32(p,jv(e.getUint32(p-12,!1)^e.getUint32(p-32,!1)^e.getUint32(p-56,!1)^e.getUint32(p-64,!1),1),!1);let n=this._h0,o=this._h1,r=this._h2,s=this._h3,a=this._h4,l,c,u;for(let p=0;p<80;p++)p<20?(l=o&r|~o&s,c=1518500249):p<40?(l=o^r^s,c=1859775393):p<60?(l=o&r|o&s|r&s,c=2400959708):(l=o^r^s,c=3395469782),u=jv(n,5)+l+a+c+e.getUint32(p*4,!1)&4294967295,a=s,s=r,r=jv(o,30),o=n,n=u;this._h0=this._h0+n&4294967295,this._h1=this._h1+o&4294967295,this._h2=this._h2+r&4294967295,this._h3=this._h3+s&4294967295,this._h4=this._h4+a&4294967295}};function Wl(i,e,t){return Math.min(Math.max(i,e),t)}var{registerWindow:yT,getWindow:Pe,getDocument:UV,getWindows:tu,getWindowsCount:Yh,getWindowId:hs,getWindowById:Sa,hasWindow:VV,onDidRegisterWindow:Jv,onWillUnregisterWindow:zV,onDidUnregisterWindow:IT}=function(){let i=new Map;$p(me,1);let e={window:me,disposables:new re};i.set(me.vscodeWindowId,e);let t=new C,n=new C,o=new C;function r(s,a){return(typeof s=="number"?i.get(s):void 0)??(a?e:void 0)}return{onDidRegisterWindow:t.event,onWillUnregisterWindow:o.event,onDidUnregisterWindow:n.event,registerWindow(s){if(i.has(s.vscodeWindowId))return A.None;let a=new re,l={window:s,disposables:a.add(new re)};return i.set(s.vscodeWindowId,l),a.add(le(()=>{i.delete(s.vscodeWindowId),n.fire(s)})),a.add(Z(s,ye.BEFORE_UNLOAD,()=>{o.fire(s)})),t.fire(l),a},getWindows(){return i.values()},getWindowsCount(){return i.size},getWindowId(s){return s.vscodeWindowId},hasWindow(s){return i.has(s)},getWindowById:r,getWindow(s){let a=s;if(a?.ownerDocument?.defaultView)return a.ownerDocument.defaultView.window;let l=s;return l?.view?l.view.window:me},getDocument(s){return Pe(s).document}}}();function zn(i){for(;i.firstChild;)i.firstChild.remove()}var Qv=class{_handler;_node;_type;_options;constructor(e,t,n,o){this._node=e,this._type=t,this._handler=n,this._options=o||!1,this._node.addEventListener(this._type,this._handler,this._options)}dispose(){this._handler&&(this._node.removeEventListener(this._type,this._handler,this._options),this._node=null,this._handler=null)}};function Z(i,e,t,n){return new Qv(i,e,t,n)}function pO(i,e){return function(t){return e(new ci(i,t))}}function hO(i){return function(e){return i(new ht(e))}}var ho=function(e,t,n,o){let r=n;return t==="click"||t==="mousedown"||t==="contextmenu"?r=pO(Pe(e),n):(t==="keydown"||t==="keypress"||t==="keyup")&&(r=hO(n)),Z(e,t,r,o)};var gO,gi;var $h=class extends Nh{defaultTarget;constructor(e){super(),this.defaultTarget=e&&Pe(e)}cancelAndSet(e,t,n){return super.cancelAndSet(e,t,n??this.defaultTarget)}},eu=class{_runner;priority;_canceled;constructor(e,t=0){this._runner=e,this.priority=t,this._canceled=!1}dispose(){this._canceled=!0}execute(){if(!this._canceled)try{this._runner()}catch(e){Ne(e)}}static sort(e,t){return t.priority-e.priority}};(function(){let i=new Map,e=new Map,t=new Map,n=new Map,o=r=>{t.set(r,!1);let s=i.get(r)??[];for(e.set(r,s),i.set(r,[]),n.set(r,!0);s.length>0;)s.sort(eu.sort),s.shift().execute();n.set(r,!1)};gi=(r,s,a=0)=>{let l=hs(r),c=new eu(s,a),u=i.get(l);return u||(u=[],i.set(l,u)),u.push(c),t.get(l)||(t.set(l,!0),r.requestAnimationFrame(()=>o(l))),c},gO=(r,s,a)=>{let l=hs(r);if(n.get(l)){let c=new eu(s,a),u=e.get(l);return u||(u=[],e.set(l,u)),u.push(c),c}else return gi(r,s,a)}})();function xT(i){return Pe(i).getComputedStyle(i,null)}function nu(i,e){let t=Pe(i),n=t.document;if(i!==n.body)return new Oi(i.clientWidth,i.clientHeight);if(es&&t?.visualViewport)return new Oi(t.visualViewport.width,t.visualViewport.height);if(t?.innerWidth&&t.innerHeight)return new Oi(t.innerWidth,t.innerHeight);if(n.body&&n.body.clientWidth&&n.body.clientHeight)return new Oi(n.body.clientWidth,n.body.clientHeight);if(n.documentElement&&n.documentElement.clientWidth&&n.documentElement.clientHeight)return new Oi(n.documentElement.clientWidth,n.documentElement.clientHeight);if(e)return nu(e);throw new Error("Unable to figure out browser width and height")}var qi=class i{static convertToPixels(e,t){return parseFloat(t)||0}static getDimension(e,t,n){let o=xT(e),r=o?o.getPropertyValue(t):"0";return i.convertToPixels(e,r)}static getBorderLeftWidth(e){return i.getDimension(e,"border-left-width","borderLeftWidth")}static getBorderRightWidth(e){return i.getDimension(e,"border-right-width","borderRightWidth")}static getBorderTopWidth(e){return i.getDimension(e,"border-top-width","borderTopWidth")}static getBorderBottomWidth(e){return i.getDimension(e,"border-bottom-width","borderBottomWidth")}static getPaddingLeft(e){return i.getDimension(e,"padding-left","paddingLeft")}static getPaddingRight(e){return i.getDimension(e,"padding-right","paddingRight")}static getPaddingTop(e){return i.getDimension(e,"padding-top","paddingTop")}static getPaddingBottom(e){return i.getDimension(e,"padding-bottom","paddingBottom")}static getMarginLeft(e){return i.getDimension(e,"margin-left","marginLeft")}static getMarginTop(e){return i.getDimension(e,"margin-top","marginTop")}static getMarginRight(e){return i.getDimension(e,"margin-right","marginRight")}static getMarginBottom(e){return i.getDimension(e,"margin-bottom","marginBottom")}},Oi=class i{constructor(e,t){this.width=e;this.height=t}static None=new i(0,0);with(e=this.width,t=this.height){return e!==this.width||t!==this.height?new i(e,t):this}static is(e){return typeof e=="object"&&typeof e.height=="number"&&typeof e.width=="number"}static lift(e){return e instanceof i?e:new i(e.width,e.height)}static equals(e,t){return e===t?!0:!e||!t?!1:e.width===t.width&&e.height===t.height}};function iu(i){let e=i.offsetParent,t=i.offsetTop,n=i.offsetLeft;for(;(i=i.parentNode)!==null&&i!==i.ownerDocument.body&&i!==i.ownerDocument.documentElement;){t-=i.scrollTop;let o=CT(i)?null:xT(i);o&&(n-=o.direction!=="rtl"?i.scrollLeft:-i.scrollLeft),i===e&&(n+=qi.getBorderLeftWidth(i),t+=qi.getBorderTopWidth(i),t+=i.offsetTop,n+=i.offsetLeft,e=i.offsetParent)}return{left:n,top:t}}function ST(i,e,t,n,o,r="absolute"){typeof e=="number"&&(i.style.top=`${e}px`),typeof t=="number"&&(i.style.right=`${t}px`),typeof n=="number"&&(i.style.bottom=`${n}px`),typeof o=="number"&&(i.style.left=`${o}px`),i.style.position=r}function Qh(i){let e=i.getBoundingClientRect(),t=Pe(i);return{left:e.left+t.scrollX,top:e.top+t.scrollY,width:e.width,height:e.height}}function Xh(i){let e=qi.getBorderLeftWidth(i)+qi.getBorderRightWidth(i),t=qi.getPaddingLeft(i)+qi.getPaddingRight(i);return i.offsetWidth-e-t}function ET(i){let e=qi.getBorderTopWidth(i)+qi.getBorderBottomWidth(i),t=qi.getPaddingTop(i)+qi.getPaddingBottom(i);return i.offsetHeight-e-t}function Ar(i,e){return!!e?.contains(i)}function CT(i){return i&&!!i.host&&!!i.mode}function mO(i){for(;i.parentNode;){if(i===i.ownerDocument?.body)return null;i=i.parentNode}return CT(i)?i:null}function Ea(){let i=Zv().activeElement;for(;i?.shadowRoot;)i=i.shadowRoot.activeElement;return i}function gs(i){return Ea()===i}function Zv(){return Yh()<=1?me.document:Array.from(tu()).map(({window:e})=>e.document).find(e=>e.hasFocus())??me.document}function Ca(){return Zv().defaultView?.window??me}var ey=new Map;function wT(i){return ey.has(i)}function wa(i=me.document.head,e,t){let n=document.createElement("style");if(n.type="text/css",n.media="screen",e?.(n),i.appendChild(n),t&&t.add(le(()=>n.remove())),i===me.document.head){let o=new Set;ey.set(n,o);for(let{window:r,disposables:s}of tu()){if(r===me)continue;let a=s.add(kT(n,o,r));t?.add(a)}}return n}function TT(i){let e=new re;for(let[t,n]of ey)e.add(kT(t,n,i));return e}function kT(i,e,t){let n=new re,o=i.cloneNode(!0);t.document.head.appendChild(o),n.add(le(()=>o.remove()));for(let r of fO(i))o.sheet?.insertRule(r.cssText,o.sheet?.cssRules.length);return n.add(Jh.observe(i,n,{childList:!0})(()=>{o.textContent=i.textContent})),e.add(o),n.add(le(()=>e.delete(o))),n}var Jh=new class{mutationObservers=new Map;observe(i,e,t){let n=this.mutationObservers.get(i);n||(n=new Map,this.mutationObservers.set(i,n));let o=hi(t),r=n.get(o);if(r)r.users+=1;else{let s=new C,a=new MutationObserver(c=>s.fire(c));a.observe(i,t);let l=r={users:1,observer:a,onDidMutate:s.event};e.add(le(()=>{l.users-=1,l.users===0&&(s.dispose(),a.disconnect(),n?.delete(o),n?.size===0&&this.mutationObservers.delete(i))})),n.set(o,r)}return r.onDidMutate}};function DT(i=me.document.head){return LT("meta",i)}function _T(i=me.document.head){return LT("link",i)}function LT(i,e=me.document.head){let t=document.createElement(i);return e.appendChild(t),t}function fO(i){return i?.sheet?.rules?i.sheet.rules:i?.sheet?.cssRules?i.sheet.cssRules:[]}function on(i){return i instanceof HTMLElement||i instanceof Pe(i).HTMLElement}function RT(i){return i instanceof SVGElement||i instanceof Pe(i).SVGElement}function ty(i){return i instanceof MouseEvent||i instanceof Pe(i).MouseEvent}var ye={CLICK:"click",AUXCLICK:"auxclick",DBLCLICK:"dblclick",MOUSE_UP:"mouseup",MOUSE_DOWN:"mousedown",MOUSE_OVER:"mouseover",MOUSE_MOVE:"mousemove",MOUSE_OUT:"mouseout",MOUSE_ENTER:"mouseenter",MOUSE_LEAVE:"mouseleave",MOUSE_WHEEL:"wheel",POINTER_UP:"pointerup",POINTER_DOWN:"pointerdown",POINTER_MOVE:"pointermove",POINTER_LEAVE:"pointerleave",CONTEXT_MENU:"contextmenu",WHEEL:"wheel",KEY_DOWN:"keydown",KEY_PRESS:"keypress",KEY_UP:"keyup",LOAD:"load",BEFORE_UNLOAD:"beforeunload",UNLOAD:"unload",PAGE_SHOW:"pageshow",PAGE_HIDE:"pagehide",PASTE:"paste",ABORT:"abort",ERROR:"error",RESIZE:"resize",SCROLL:"scroll",FULLSCREEN_CHANGE:"fullscreenchange",WK_FULLSCREEN_CHANGE:"webkitfullscreenchange",SELECT:"select",CHANGE:"change",SUBMIT:"submit",RESET:"reset",FOCUS:"focus",FOCUS_IN:"focusin",FOCUS_OUT:"focusout",BLUR:"blur",INPUT:"input",STORAGE:"storage",DRAG_START:"dragstart",DRAG:"drag",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"drop",DRAG_END:"dragend",ANIMATION_START:Dr?"webkitAnimationStart":"animationstart",ANIMATION_END:Dr?"webkitAnimationEnd":"animationend",ANIMATION_ITERATION:Dr?"webkitAnimationIteration":"animationiteration"};var Ct={stop:(i,e)=>(i.preventDefault(),e&&i.stopPropagation(),i)};var Xv=class i extends A{_onDidFocus=this._register(new C);onDidFocus=this._onDidFocus.event;_onDidBlur=this._register(new C);onDidBlur=this._onDidBlur.event;_refreshStateHandler;static hasFocusWithin(e){if(on(e)){let t=mO(e),n=t?t.activeElement:e.ownerDocument.activeElement;return Ar(n,e)}else{let t=e;return Ar(t.document.activeElement,t.document)}}constructor(e){super();let t=i.hasFocusWithin(e),n=!1,o=()=>{n=!1,t||(t=!0,this._onDidFocus.fire())},r=()=>{t&&(n=!0,(on(e)?Pe(e):e).setTimeout(()=>{n&&(n=!1,t=!1,this._onDidBlur.fire())},0))};this._refreshStateHandler=()=>{i.hasFocusWithin(e)!==t&&(t?r():o())},this._register(Z(e,ye.FOCUS,o,!0)),this._register(Z(e,ye.BLUR,r,!0)),on(e)&&(this._register(Z(e,ye.FOCUS_IN,()=>this._refreshStateHandler())),this._register(Z(e,ye.FOCUS_OUT,()=>this._refreshStateHandler())))}refreshState(){this._refreshStateHandler()}};function Ul(i){return new Xv(i)}function Hn(i,...e){if(i.append(...e),e.length===1&&typeof e[0]!="string")return e[0]}function Mt(i,...e){i.innerText="",Hn(i,...e)}var bO=/([\w\-]+)?(#([\w\-]+))?((\.([\w\-]+))*)/;function PT(i,e,t,...n){let o=bO.exec(e);if(!o)throw new Error("Bad use of emmet");let r=o[1]||"div",s;return i!=="http://www.w3.org/1999/xhtml"?s=document.createElementNS(i,r):s=document.createElement(r),o[3]&&(s.id=o[3]),o[4]&&(s.className=o[4].replace(/\./g," ").trim()),t&&Object.entries(t).forEach(([a,l])=>{typeof l>"u"||(/^on\w+$/.test(a)?s[a]=l:a==="selected"?l&&s.setAttribute(a,"true"):s.setAttribute(a,l))}),s.append(...n),s}function Y(i,e,...t){return PT("http://www.w3.org/1999/xhtml",i,e,...t)}Y.SVG=function(i,e,...t){return PT("http://www.w3.org/2000/svg",i,e,...t)};function ny(i){me.open(i,"_blank","noopener")}var bT=780,vT=640;function iy(i){let e=Math.floor(me.screenLeft+me.innerWidth/2-bT/2),t=Math.floor(me.screenTop+me.innerHeight/2-vT/2);me.open(i,"_blank",`width=${bT},height=${vT},top=${t},left=${e}`)}function OT(i,e=!0){let t=me.open();return t?(e&&(t.opener=null),t.location.href=i,!0):!1}function AT(i,e){let t=()=>{e(),n=gi(i,t)},n=gi(i,t);return le(()=>n.dispose())}Ah.setPreferredWebSchema(/^https:/.test(me.location.href)?"https":"http");function ms(i,e){if(i!==void 0){let t=i.match(/^\s*var\((.+)\)$/);if(t){let n=t[1].split(",",2);return n.length===2&&(e=ms(n[1].trim(),e)),`var(${n[0]}, ${e})`}return i}return e}function Zh(i,e=!1){let t=document.createElement("a");return Hh("afterSanitizeAttributes",n=>{for(let o of["href","src"])if(n.hasAttribute(o)){let r=n.getAttribute(o);if(o==="href"&&r.startsWith("#"))continue;if(t.href=r,!i.includes(t.protocol.replace(/:$/,""))){if(e&&o==="src"&&t.href.startsWith("data:"))continue;n.removeAttribute(o)}}}),le(()=>{Kh("afterSanitizeAttributes")})}var HV=[H.http,H.https,H.command],eg=Object.freeze(["a","abbr","b","bdo","blockquote","br","caption","cite","code","col","colgroup","dd","del","details","dfn","div","dl","dt","em","figcaption","figure","h1","h2","h3","h4","h5","h6","hr","i","img","input","ins","kbd","label","li","mark","ol","p","pre","q","rp","rt","ruby","samp","small","small","source","span","strike","strong","sub","summary","sup","table","tbody","td","tfoot","th","thead","time","tr","tt","u","ul","var","video","wbr"]),KV=Object.freeze({ALLOWED_TAGS:["a","button","blockquote","code","div","h1","h2","h3","h4","h5","h6","hr","input","label","li","p","pre","select","small","span","strong","textarea","ul","ol"],ALLOWED_ATTR:["href","data-href","data-command","target","title","name","src","alt","class","id","role","tabindex","style","data-code","width","height","align","x-dispatch","required","checked","placeholder","type","start"],RETURN_DOM:!1,RETURN_DOM_FRAGMENT:!1,RETURN_TRUSTED_TYPE:!0});var jh=class i extends C{_subscriptions=new re;_keyStatus;static instance;constructor(){super(),this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1},this._subscriptions.add(ee.runAndSubscribe(Jv,({window:e,disposables:t})=>this.registerListeners(e,t),{window:me,disposables:this._subscriptions}))}registerListeners(e,t){t.add(Z(e,"keydown",n=>{if(n.defaultPrevented)return;let o=new ht(n);if(!(o.keyCode===6&&n.repeat)){if(n.altKey&&!this._keyStatus.altKey)this._keyStatus.lastKeyPressed="alt";else if(n.ctrlKey&&!this._keyStatus.ctrlKey)this._keyStatus.lastKeyPressed="ctrl";else if(n.metaKey&&!this._keyStatus.metaKey)this._keyStatus.lastKeyPressed="meta";else if(n.shiftKey&&!this._keyStatus.shiftKey)this._keyStatus.lastKeyPressed="shift";else if(o.keyCode!==6)this._keyStatus.lastKeyPressed=void 0;else return;this._keyStatus.altKey=n.altKey,this._keyStatus.ctrlKey=n.ctrlKey,this._keyStatus.metaKey=n.metaKey,this._keyStatus.shiftKey=n.shiftKey,this._keyStatus.lastKeyPressed&&(this._keyStatus.event=n,this.fire(this._keyStatus))}},!0)),t.add(Z(e,"keyup",n=>{n.defaultPrevented||(!n.altKey&&this._keyStatus.altKey?this._keyStatus.lastKeyReleased="alt":!n.ctrlKey&&this._keyStatus.ctrlKey?this._keyStatus.lastKeyReleased="ctrl":!n.metaKey&&this._keyStatus.metaKey?this._keyStatus.lastKeyReleased="meta":!n.shiftKey&&this._keyStatus.shiftKey?this._keyStatus.lastKeyReleased="shift":this._keyStatus.lastKeyReleased=void 0,this._keyStatus.lastKeyPressed!==this._keyStatus.lastKeyReleased&&(this._keyStatus.lastKeyPressed=void 0),this._keyStatus.altKey=n.altKey,this._keyStatus.ctrlKey=n.ctrlKey,this._keyStatus.metaKey=n.metaKey,this._keyStatus.shiftKey=n.shiftKey,this._keyStatus.lastKeyReleased&&(this._keyStatus.event=n,this.fire(this._keyStatus)))},!0)),t.add(Z(e.document.body,"mousedown",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(Z(e.document.body,"mouseup",()=>{this._keyStatus.lastKeyPressed=void 0},!0)),t.add(Z(e.document.body,"mousemove",n=>{n.buttons&&(this._keyStatus.lastKeyPressed=void 0)},!0)),t.add(Z(e,"blur",()=>{this.resetKeyStatus()}))}get keyStatus(){return this._keyStatus}get isModifierPressed(){return this._keyStatus.altKey||this._keyStatus.ctrlKey||this._keyStatus.metaKey||this._keyStatus.shiftKey}resetKeyStatus(){this.doResetKeyStatus(),this.fire(this._keyStatus)}doResetKeyStatus(){this._keyStatus={altKey:!1,shiftKey:!1,ctrlKey:!1,metaKey:!1}}static getInstance(){return i.instance||(i.instance=new i),i.instance}dispose(){super.dispose(),this._subscriptions.dispose()}};function tg(i,e,t){for(let{name:n,value:o}of i.attributes)(!t||t.includes(n))&&e.setAttribute(n,o)}function vO(i,e,t){let n=i.getAttribute(t);n?e.setAttribute(t,n):e.removeAttribute(t)}function ng(i,e,t){tg(i,e,t);let n=new re;return n.add(Jh.observe(i,n,{attributes:!0,attributeFilter:t})(o=>{for(let r of o)r.type==="attributes"&&r.attributeName&&vO(i,e,r.attributeName)})),n}function fs(i){return i.tagName.toLowerCase()==="input"||i.tagName.toLowerCase()==="textarea"||on(i)&&!!i.editContext}function sy(i,e={}){let t=ay(e);return MT(t,yO(i,!!e.renderCodeSegments),e.actionHandler,e.renderCodeSegments),t}function ay(i){let e=i.inline?"span":"div",t=document.createElement(e);return i.className&&(t.className=i.className),t}var oy=class{source;index;constructor(e){this.source=e,this.index=0}eos(){return this.index>=this.source.length}next(){let e=this.peek();return this.advance(),e}peek(){return this.source[this.index]}advance(){this.index++}};function MT(i,e,t,n){let o;if(e.type===2)o=document.createTextNode(e.content||"");else if(e.type===3)o=document.createElement("b");else if(e.type===4)o=document.createElement("i");else if(e.type===7&&n)o=document.createElement("code");else if(e.type===5&&t){let r=document.createElement("a");t.disposables.add(ho(r,"click",s=>{t.callback(String(e.index),s)})),o=r}else e.type===8?o=document.createElement("br"):e.type===1&&(o=i);o&&i!==o&&i.appendChild(o),o&&Array.isArray(e.children)&&e.children.forEach(r=>{MT(o,r,t,n)})}function yO(i,e){let t={type:1,children:[]},n=0,o=t,r=[],s=new oy(i);for(;!s.eos();){let a=s.next(),l=a==="\\"&&ry(s.peek(),e)!==0;if(l&&(a=s.next()),!l&&IO(a,e)&&a===s.peek()){s.advance(),o.type===2&&(o=r.pop());let c=ry(a,e);if(o.type===c||o.type===5&&c===6)o=r.pop();else{let u={type:c,children:[]};c===5&&(u.index=n,n++),o.children.push(u),r.push(o),o=u}}else if(a===`
`)o.type===2&&(o=r.pop()),o.children.push({type:8});else if(o.type!==2){let c={type:2,content:a};o.children.push(c),r.push(o),o=c}else o.content+=a}return o.type===2&&(o=r.pop()),r.length,t}function IO(i,e){return ry(i,e)!==0}function ry(i,e){switch(i){case"*":return 3;case"_":return 4;case"[":return 5;case"]":return 6;case"`":return e?7:0;default:return 0}}var go=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list"});var ly={RESOURCES:"ResourceURLs",DOWNLOAD_URL:"DownloadURL",FILES:"Files",TEXT:go.text,INTERNAL_URI_LIST:"application/vnd.code.uri-list"};function q(i,e,t){let n=null,o=null;if(typeof t.value=="function"?(n="value",o=t.value,o.length!==0&&console.warn("Memoize should only be used in functions with zero parameters")):typeof t.get=="function"&&(n="get",o=t.get),!o)throw new Error("not supported");let r=`$memoize$${e}`;t[n]=function(...s){return this.hasOwnProperty(r)||Object.defineProperty(this,r,{configurable:!1,enumerable:!1,writable:!1,value:o.apply(this,s)}),this[r]}}var Dt;(r=>(r.Tap="-monaco-gesturetap",r.Change="-monaco-gesturechange",r.Start="-monaco-gesturestart",r.End="-monaco-gesturesend",r.Contextmenu="-monaco-gesturecontextmenu"))(Dt||={});var xn=class xn extends A{static SCROLL_FRICTION=-.005;static INSTANCE;static HOLD_DELAY=700;dispatched=!1;targets=new In;ignoreTargets=new In;handle;activeTouches;_lastSetTapCountTime;static CLEAR_TAP_COUNT_TIME=400;constructor(){super(),this.activeTouches={},this.handle=null,this._lastSetTapCountTime=0,this._register(ee.runAndSubscribe(Jv,({window:e,disposables:t})=>{t.add(Z(e.document,"touchstart",n=>this.onTouchStart(n),{passive:!1})),t.add(Z(e.document,"touchend",n=>this.onTouchEnd(e,n))),t.add(Z(e.document,"touchmove",n=>this.onTouchMove(n),{passive:!1}))},{window:me,disposables:this._store}))}static addTarget(e){if(!xn.isTouchDevice())return A.None;xn.INSTANCE||(xn.INSTANCE=yl(new xn));let t=xn.INSTANCE.targets.push(e);return le(t)}static ignoreTarget(e){if(!xn.isTouchDevice())return A.None;xn.INSTANCE||(xn.INSTANCE=yl(new xn));let t=xn.INSTANCE.ignoreTargets.push(e);return le(t)}static isTouchDevice(){return"ontouchstart"in me||navigator.maxTouchPoints>0}dispose(){this.handle&&(this.handle.dispose(),this.handle=null),super.dispose()}onTouchStart(e){let t=Date.now();this.handle&&(this.handle.dispose(),this.handle=null);for(let n=0,o=e.targetTouches.length;n<o;n++){let r=e.targetTouches.item(n);this.activeTouches[r.identifier]={id:r.identifier,initialTarget:r.target,initialTimeStamp:t,initialPageX:r.pageX,initialPageY:r.pageY,rollingTimestamps:[t],rollingPageX:[r.pageX],rollingPageY:[r.pageY]};let s=this.newGestureEvent(Dt.Start,r.target);s.pageX=r.pageX,s.pageY=r.pageY,this.dispatchEvent(s)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}onTouchEnd(e,t){let n=Date.now(),o=Object.keys(this.activeTouches).length;for(let r=0,s=t.changedTouches.length;r<s;r++){let a=t.changedTouches.item(r);if(!this.activeTouches.hasOwnProperty(String(a.identifier))){console.warn("move of an UNKNOWN touch",a);continue}let l=this.activeTouches[a.identifier],c=Date.now()-l.initialTimeStamp;if(c<xn.HOLD_DELAY&&Math.abs(l.initialPageX-Qn(l.rollingPageX))<30&&Math.abs(l.initialPageY-Qn(l.rollingPageY))<30){let u=this.newGestureEvent(Dt.Tap,l.initialTarget);u.pageX=Qn(l.rollingPageX),u.pageY=Qn(l.rollingPageY),this.dispatchEvent(u)}else if(c>=xn.HOLD_DELAY&&Math.abs(l.initialPageX-Qn(l.rollingPageX))<30&&Math.abs(l.initialPageY-Qn(l.rollingPageY))<30){let u=this.newGestureEvent(Dt.Contextmenu,l.initialTarget);u.pageX=Qn(l.rollingPageX),u.pageY=Qn(l.rollingPageY),this.dispatchEvent(u)}else if(o===1){let u=Qn(l.rollingPageX),p=Qn(l.rollingPageY),h=Qn(l.rollingTimestamps)-l.rollingTimestamps[0],m=u-l.rollingPageX[0],v=p-l.rollingPageY[0],f=[...this.targets].filter(b=>l.initialTarget instanceof Node&&b.contains(l.initialTarget));this.inertia(e,f,n,Math.abs(m)/h,m>0?1:-1,u,Math.abs(v)/h,v>0?1:-1,p)}this.dispatchEvent(this.newGestureEvent(Dt.End,l.initialTarget)),delete this.activeTouches[a.identifier]}this.dispatched&&(t.preventDefault(),t.stopPropagation(),this.dispatched=!1)}newGestureEvent(e,t){let n=document.createEvent("CustomEvent");return n.initEvent(e,!1,!0),n.initialTarget=t,n.tapCount=0,n}dispatchEvent(e){if(e.type===Dt.Tap){let t=new Date().getTime(),n=0;t-this._lastSetTapCountTime>xn.CLEAR_TAP_COUNT_TIME?n=1:n=2,this._lastSetTapCountTime=t,e.tapCount=n}else(e.type===Dt.Change||e.type===Dt.Contextmenu)&&(this._lastSetTapCountTime=0);if(e.initialTarget instanceof Node){for(let n of this.ignoreTargets)if(n.contains(e.initialTarget))return;let t=[];for(let n of this.targets)if(n.contains(e.initialTarget)){let o=0,r=e.initialTarget;for(;r&&r!==n;)o++,r=r.parentElement;t.push([o,n])}t.sort((n,o)=>n[0]-o[0]);for(let[n,o]of t)o.dispatchEvent(e),this.dispatched=!0}}inertia(e,t,n,o,r,s,a,l,c){this.handle=gi(e,()=>{let u=Date.now(),p=u-n,h=0,m=0,v=!0;o+=xn.SCROLL_FRICTION*p,a+=xn.SCROLL_FRICTION*p,o>0&&(v=!1,h=r*o*p),a>0&&(v=!1,m=l*a*p);let f=this.newGestureEvent(Dt.Change);f.translationX=h,f.translationY=m,t.forEach(b=>b.dispatchEvent(f)),v||this.inertia(e,t,u,o,r,s+h,a,l,c+m)})}onTouchMove(e){let t=Date.now();for(let n=0,o=e.changedTouches.length;n<o;n++){let r=e.changedTouches.item(n);if(!this.activeTouches.hasOwnProperty(String(r.identifier))){console.warn("end of an UNKNOWN touch",r);continue}let s=this.activeTouches[r.identifier],a=this.newGestureEvent(Dt.Change,s.initialTarget);a.translationX=r.pageX-Qn(s.rollingPageX),a.translationY=r.pageY-Qn(s.rollingPageY),a.pageX=r.pageX,a.pageY=r.pageY,this.dispatchEvent(a),s.rollingPageX.length>3&&(s.rollingPageX.shift(),s.rollingPageY.shift(),s.rollingTimestamps.shift()),s.rollingPageX.push(r.pageX),s.rollingPageY.push(r.pageY),s.rollingTimestamps.push(t)}this.dispatched&&(e.preventDefault(),e.stopPropagation(),this.dispatched=!1)}};L([q],xn,"isTouchDevice",1);var _n=xn;var ou=class{constructor(e){this.domNode=e}_maxWidth="";_width="";_height="";_top="";_left="";_bottom="";_right="";_paddingTop="";_paddingLeft="";_paddingBottom="";_paddingRight="";_fontFamily="";_fontWeight="";_fontSize="";_fontStyle="";_fontFeatureSettings="";_fontVariationSettings="";_textDecoration="";_lineHeight="";_letterSpacing="";_className="";_display="";_position="";_visibility="";_color="";_backgroundColor="";_layerHint=!1;_contain="none";_boxShadow="";setMaxWidth(e){let t=mi(e);this._maxWidth!==t&&(this._maxWidth=t,this.domNode.style.maxWidth=this._maxWidth)}setWidth(e){let t=mi(e);this._width!==t&&(this._width=t,this.domNode.style.width=this._width)}setHeight(e){let t=mi(e);this._height!==t&&(this._height=t,this.domNode.style.height=this._height)}setTop(e){let t=mi(e);this._top!==t&&(this._top=t,this.domNode.style.top=this._top)}setLeft(e){let t=mi(e);this._left!==t&&(this._left=t,this.domNode.style.left=this._left)}setBottom(e){let t=mi(e);this._bottom!==t&&(this._bottom=t,this.domNode.style.bottom=this._bottom)}setRight(e){let t=mi(e);this._right!==t&&(this._right=t,this.domNode.style.right=this._right)}setPaddingTop(e){let t=mi(e);this._paddingTop!==t&&(this._paddingTop=t,this.domNode.style.paddingTop=this._paddingTop)}setPaddingLeft(e){let t=mi(e);this._paddingLeft!==t&&(this._paddingLeft=t,this.domNode.style.paddingLeft=this._paddingLeft)}setPaddingBottom(e){let t=mi(e);this._paddingBottom!==t&&(this._paddingBottom=t,this.domNode.style.paddingBottom=this._paddingBottom)}setPaddingRight(e){let t=mi(e);this._paddingRight!==t&&(this._paddingRight=t,this.domNode.style.paddingRight=this._paddingRight)}setFontFamily(e){this._fontFamily!==e&&(this._fontFamily=e,this.domNode.style.fontFamily=this._fontFamily)}setFontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.domNode.style.fontWeight=this._fontWeight)}setFontSize(e){let t=mi(e);this._fontSize!==t&&(this._fontSize=t,this.domNode.style.fontSize=this._fontSize)}setFontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.domNode.style.fontStyle=this._fontStyle)}setFontFeatureSettings(e){this._fontFeatureSettings!==e&&(this._fontFeatureSettings=e,this.domNode.style.fontFeatureSettings=this._fontFeatureSettings)}setFontVariationSettings(e){this._fontVariationSettings!==e&&(this._fontVariationSettings=e,this.domNode.style.fontVariationSettings=this._fontVariationSettings)}setTextDecoration(e){this._textDecoration!==e&&(this._textDecoration=e,this.domNode.style.textDecoration=this._textDecoration)}setLineHeight(e){let t=mi(e);this._lineHeight!==t&&(this._lineHeight=t,this.domNode.style.lineHeight=this._lineHeight)}setLetterSpacing(e){let t=mi(e);this._letterSpacing!==t&&(this._letterSpacing=t,this.domNode.style.letterSpacing=this._letterSpacing)}setClassName(e){this._className!==e&&(this._className=e,this.domNode.className=this._className)}toggleClassName(e,t){this.domNode.classList.toggle(e,t),this._className=this.domNode.className}setDisplay(e){this._display!==e&&(this._display=e,this.domNode.style.display=this._display)}setPosition(e){this._position!==e&&(this._position=e,this.domNode.style.position=this._position)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this.domNode.style.visibility=this._visibility)}setColor(e){this._color!==e&&(this._color=e,this.domNode.style.color=this._color)}setBackgroundColor(e){this._backgroundColor!==e&&(this._backgroundColor=e,this.domNode.style.backgroundColor=this._backgroundColor)}setLayerHinting(e){this._layerHint!==e&&(this._layerHint=e,this.domNode.style.transform=this._layerHint?"translate3d(0px, 0px, 0px)":"")}setBoxShadow(e){this._boxShadow!==e&&(this._boxShadow=e,this.domNode.style.boxShadow=e)}setContain(e){this._contain!==e&&(this._contain=e,this.domNode.style.contain=this._contain)}setAttribute(e,t){this.domNode.setAttribute(e,t)}removeAttribute(e){this.domNode.removeAttribute(e)}appendChild(e){this.domNode.appendChild(e.domNode)}removeChild(e){this.domNode.removeChild(e.domNode)}};function mi(i){return typeof i=="number"?`${i}px`:i}function Ta(i){return new ou(i)}var Vl=class{_hooks=new re;_pointerMoveCallback=null;_onStopCallback=null;dispose(){this.stopMonitoring(!1),this._hooks.dispose()}stopMonitoring(e,t){if(!this.isMonitoring())return;this._hooks.clear(),this._pointerMoveCallback=null;let n=this._onStopCallback;this._onStopCallback=null,e&&n&&n(t)}isMonitoring(){return!!this._pointerMoveCallback}startMonitoring(e,t,n,o,r){this.isMonitoring()&&this.stopMonitoring(!1),this._pointerMoveCallback=o,this._onStopCallback=r;let s=e;try{e.setPointerCapture(t),this._hooks.add(le(()=>{try{e.releasePointerCapture(t)}catch{}}))}catch{s=Pe(e)}this._hooks.add(Z(s,ye.POINTER_MOVE,a=>{if(a.buttons!==n){this.stopMonitoring(!0);return}a.preventDefault(),this._pointerMoveCallback(a)})),this._hooks.add(Z(s,ye.POINTER_UP,a=>this.stopMonitoring(!0)))}};var fi=class extends A{onclick(e,t){this._register(Z(e,ye.CLICK,n=>t(new ci(Pe(e),n))))}onmousedown(e,t){this._register(Z(e,ye.MOUSE_DOWN,n=>t(new ci(Pe(e),n))))}onmouseover(e,t){this._register(Z(e,ye.MOUSE_OVER,n=>t(new ci(Pe(e),n))))}onmouseleave(e,t){this._register(Z(e,ye.MOUSE_LEAVE,n=>t(new ci(Pe(e),n))))}onkeydown(e,t){this._register(Z(e,ye.KEY_DOWN,n=>t(new ht(n))))}onkeyup(e,t){this._register(Z(e,ye.KEY_UP,n=>t(new ht(n))))}oninput(e,t){this._register(Z(e,ye.INPUT,t))}onblur(e,t){this._register(Z(e,ye.BLUR,t))}onfocus(e,t){this._register(Z(e,ye.FOCUS,t))}onchange(e,t){this._register(Z(e,ye.CHANGE,t))}ignoreGesture(e){return _n.ignoreTarget(e)}};var dy=Object.create(null);function g(i,e){if(Xt(e)){let t=dy[e];if(t===void 0)throw new Error(`${i} references an unknown codicon: ${e}`);e=t}return dy[i]=e,{id:i}}function cy(){return dy}var NT={add:g("add",6e4),plus:g("plus",6e4),gistNew:g("gist-new",6e4),repoCreate:g("repo-create",6e4),lightbulb:g("lightbulb",60001),lightBulb:g("light-bulb",60001),repo:g("repo",60002),repoDelete:g("repo-delete",60002),gistFork:g("gist-fork",60003),repoForked:g("repo-forked",60003),gitPullRequest:g("git-pull-request",60004),gitPullRequestAbandoned:g("git-pull-request-abandoned",60004),recordKeys:g("record-keys",60005),keyboard:g("keyboard",60005),tag:g("tag",60006),gitPullRequestLabel:g("git-pull-request-label",60006),tagAdd:g("tag-add",60006),tagRemove:g("tag-remove",60006),person:g("person",60007),personFollow:g("person-follow",60007),personOutline:g("person-outline",60007),personFilled:g("person-filled",60007),gitBranch:g("git-branch",60008),gitBranchCreate:g("git-branch-create",60008),gitBranchDelete:g("git-branch-delete",60008),sourceControl:g("source-control",60008),mirror:g("mirror",60009),mirrorPublic:g("mirror-public",60009),star:g("star",60010),starAdd:g("star-add",60010),starDelete:g("star-delete",60010),starEmpty:g("star-empty",60010),comment:g("comment",60011),commentAdd:g("comment-add",60011),alert:g("alert",60012),warning:g("warning",60012),search:g("search",60013),searchSave:g("search-save",60013),logOut:g("log-out",60014),signOut:g("sign-out",60014),logIn:g("log-in",60015),signIn:g("sign-in",60015),eye:g("eye",60016),eyeUnwatch:g("eye-unwatch",60016),eyeWatch:g("eye-watch",60016),circleFilled:g("circle-filled",60017),primitiveDot:g("primitive-dot",60017),closeDirty:g("close-dirty",60017),debugBreakpoint:g("debug-breakpoint",60017),debugBreakpointDisabled:g("debug-breakpoint-disabled",60017),debugHint:g("debug-hint",60017),terminalDecorationSuccess:g("terminal-decoration-success",60017),primitiveSquare:g("primitive-square",60018),edit:g("edit",60019),pencil:g("pencil",60019),info:g("info",60020),issueOpened:g("issue-opened",60020),gistPrivate:g("gist-private",60021),gitForkPrivate:g("git-fork-private",60021),lock:g("lock",60021),mirrorPrivate:g("mirror-private",60021),close:g("close",60022),removeClose:g("remove-close",60022),x:g("x",60022),repoSync:g("repo-sync",60023),sync:g("sync",60023),clone:g("clone",60024),desktopDownload:g("desktop-download",60024),beaker:g("beaker",60025),microscope:g("microscope",60025),vm:g("vm",60026),deviceDesktop:g("device-desktop",60026),file:g("file",60027),fileText:g("file-text",60027),more:g("more",60028),ellipsis:g("ellipsis",60028),kebabHorizontal:g("kebab-horizontal",60028),mailReply:g("mail-reply",60029),reply:g("reply",60029),organization:g("organization",60030),organizationFilled:g("organization-filled",60030),organizationOutline:g("organization-outline",60030),newFile:g("new-file",60031),fileAdd:g("file-add",60031),newFolder:g("new-folder",60032),fileDirectoryCreate:g("file-directory-create",60032),trash:g("trash",60033),trashcan:g("trashcan",60033),history:g("history",60034),clock:g("clock",60034),folder:g("folder",60035),fileDirectory:g("file-directory",60035),symbolFolder:g("symbol-folder",60035),logoGithub:g("logo-github",60036),markGithub:g("mark-github",60036),github:g("github",60036),terminal:g("terminal",60037),console:g("console",60037),repl:g("repl",60037),zap:g("zap",60038),symbolEvent:g("symbol-event",60038),error:g("error",60039),stop:g("stop",60039),variable:g("variable",60040),symbolVariable:g("symbol-variable",60040),array:g("array",60042),symbolArray:g("symbol-array",60042),symbolModule:g("symbol-module",60043),symbolPackage:g("symbol-package",60043),symbolNamespace:g("symbol-namespace",60043),symbolObject:g("symbol-object",60043),symbolMethod:g("symbol-method",60044),symbolFunction:g("symbol-function",60044),symbolConstructor:g("symbol-constructor",60044),symbolBoolean:g("symbol-boolean",60047),symbolNull:g("symbol-null",60047),symbolNumeric:g("symbol-numeric",60048),symbolNumber:g("symbol-number",60048),symbolStructure:g("symbol-structure",60049),symbolStruct:g("symbol-struct",60049),symbolParameter:g("symbol-parameter",60050),symbolTypeParameter:g("symbol-type-parameter",60050),symbolKey:g("symbol-key",60051),symbolText:g("symbol-text",60051),symbolReference:g("symbol-reference",60052),goToFile:g("go-to-file",60052),symbolEnum:g("symbol-enum",60053),symbolValue:g("symbol-value",60053),symbolRuler:g("symbol-ruler",60054),symbolUnit:g("symbol-unit",60054),activateBreakpoints:g("activate-breakpoints",60055),archive:g("archive",60056),arrowBoth:g("arrow-both",60057),arrowDown:g("arrow-down",60058),arrowLeft:g("arrow-left",60059),arrowRight:g("arrow-right",60060),arrowSmallDown:g("arrow-small-down",60061),arrowSmallLeft:g("arrow-small-left",60062),arrowSmallRight:g("arrow-small-right",60063),arrowSmallUp:g("arrow-small-up",60064),arrowUp:g("arrow-up",60065),bell:g("bell",60066),bold:g("bold",60067),book:g("book",60068),bookmark:g("bookmark",60069),debugBreakpointConditionalUnverified:g("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:g("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:g("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:g("debug-breakpoint-data-unverified",60072),debugBreakpointData:g("debug-breakpoint-data",60073),debugBreakpointDataDisabled:g("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:g("debug-breakpoint-log-unverified",60074),debugBreakpointLog:g("debug-breakpoint-log",60075),debugBreakpointLogDisabled:g("debug-breakpoint-log-disabled",60075),briefcase:g("briefcase",60076),broadcast:g("broadcast",60077),browser:g("browser",60078),bug:g("bug",60079),calendar:g("calendar",60080),caseSensitive:g("case-sensitive",60081),check:g("check",60082),checklist:g("checklist",60083),chevronDown:g("chevron-down",60084),chevronLeft:g("chevron-left",60085),chevronRight:g("chevron-right",60086),chevronUp:g("chevron-up",60087),chromeClose:g("chrome-close",60088),chromeMaximize:g("chrome-maximize",60089),chromeMinimize:g("chrome-minimize",60090),chromeRestore:g("chrome-restore",60091),circleOutline:g("circle-outline",60092),circle:g("circle",60092),debugBreakpointUnverified:g("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:g("terminal-decoration-incomplete",60092),circleSlash:g("circle-slash",60093),circuitBoard:g("circuit-board",60094),clearAll:g("clear-all",60095),clippy:g("clippy",60096),closeAll:g("close-all",60097),cloudDownload:g("cloud-download",60098),cloudUpload:g("cloud-upload",60099),code:g("code",60100),collapseAll:g("collapse-all",60101),colorMode:g("color-mode",60102),commentDiscussion:g("comment-discussion",60103),creditCard:g("credit-card",60105),dash:g("dash",60108),dashboard:g("dashboard",60109),database:g("database",60110),debugContinue:g("debug-continue",60111),debugDisconnect:g("debug-disconnect",60112),debugPause:g("debug-pause",60113),debugRestart:g("debug-restart",60114),debugStart:g("debug-start",60115),debugStepInto:g("debug-step-into",60116),debugStepOut:g("debug-step-out",60117),debugStepOver:g("debug-step-over",60118),debugStop:g("debug-stop",60119),debug:g("debug",60120),deviceCameraVideo:g("device-camera-video",60121),deviceCamera:g("device-camera",60122),deviceMobile:g("device-mobile",60123),diffAdded:g("diff-added",60124),diffIgnored:g("diff-ignored",60125),diffModified:g("diff-modified",60126),diffRemoved:g("diff-removed",60127),diffRenamed:g("diff-renamed",60128),diff:g("diff",60129),diffSidebyside:g("diff-sidebyside",60129),discard:g("discard",60130),editorLayout:g("editor-layout",60131),emptyWindow:g("empty-window",60132),exclude:g("exclude",60133),extensions:g("extensions",60134),eyeClosed:g("eye-closed",60135),fileBinary:g("file-binary",60136),fileCode:g("file-code",60137),fileMedia:g("file-media",60138),filePdf:g("file-pdf",60139),fileSubmodule:g("file-submodule",60140),fileSymlinkDirectory:g("file-symlink-directory",60141),fileSymlinkFile:g("file-symlink-file",60142),fileZip:g("file-zip",60143),files:g("files",60144),filter:g("filter",60145),flame:g("flame",60146),foldDown:g("fold-down",60147),foldUp:g("fold-up",60148),fold:g("fold",60149),folderActive:g("folder-active",60150),folderOpened:g("folder-opened",60151),gear:g("gear",60152),gift:g("gift",60153),gistSecret:g("gist-secret",60154),gist:g("gist",60155),gitCommit:g("git-commit",60156),gitCompare:g("git-compare",60157),compareChanges:g("compare-changes",60157),gitMerge:g("git-merge",60158),githubAction:g("github-action",60159),githubAlt:g("github-alt",60160),globe:g("globe",60161),grabber:g("grabber",60162),graph:g("graph",60163),gripper:g("gripper",60164),heart:g("heart",60165),home:g("home",60166),horizontalRule:g("horizontal-rule",60167),hubot:g("hubot",60168),inbox:g("inbox",60169),issueReopened:g("issue-reopened",60171),issues:g("issues",60172),italic:g("italic",60173),jersey:g("jersey",60174),json:g("json",60175),kebabVertical:g("kebab-vertical",60176),key:g("key",60177),law:g("law",60178),lightbulbAutofix:g("lightbulb-autofix",60179),linkExternal:g("link-external",60180),link:g("link",60181),listOrdered:g("list-ordered",60182),listUnordered:g("list-unordered",60183),liveShare:g("live-share",60184),loading:g("loading",60185),location:g("location",60186),mailRead:g("mail-read",60187),mail:g("mail",60188),markdown:g("markdown",60189),megaphone:g("megaphone",60190),mention:g("mention",60191),milestone:g("milestone",60192),gitPullRequestMilestone:g("git-pull-request-milestone",60192),mortarBoard:g("mortar-board",60193),move:g("move",60194),multipleWindows:g("multiple-windows",60195),mute:g("mute",60196),noNewline:g("no-newline",60197),note:g("note",60198),octoface:g("octoface",60199),openPreview:g("open-preview",60200),package:g("package",60201),paintcan:g("paintcan",60202),pin:g("pin",60203),play:g("play",60204),run:g("run",60204),plug:g("plug",60205),preserveCase:g("preserve-case",60206),preview:g("preview",60207),project:g("project",60208),pulse:g("pulse",60209),question:g("question",60210),quote:g("quote",60211),radioTower:g("radio-tower",60212),reactions:g("reactions",60213),references:g("references",60214),refresh:g("refresh",60215),regex:g("regex",60216),remoteExplorer:g("remote-explorer",60217),remote:g("remote",60218),remove:g("remove",60219),replaceAll:g("replace-all",60220),replace:g("replace",60221),repoClone:g("repo-clone",60222),repoForcePush:g("repo-force-push",60223),repoPull:g("repo-pull",60224),repoPush:g("repo-push",60225),report:g("report",60226),requestChanges:g("request-changes",60227),rocket:g("rocket",60228),rootFolderOpened:g("root-folder-opened",60229),rootFolder:g("root-folder",60230),rss:g("rss",60231),ruby:g("ruby",60232),saveAll:g("save-all",60233),saveAs:g("save-as",60234),save:g("save",60235),screenFull:g("screen-full",60236),screenNormal:g("screen-normal",60237),searchStop:g("search-stop",60238),server:g("server",60240),settingsGear:g("settings-gear",60241),settings:g("settings",60242),shield:g("shield",60243),smiley:g("smiley",60244),sortPrecedence:g("sort-precedence",60245),splitHorizontal:g("split-horizontal",60246),splitVertical:g("split-vertical",60247),squirrel:g("squirrel",60248),starFull:g("star-full",60249),starHalf:g("star-half",60250),symbolClass:g("symbol-class",60251),symbolColor:g("symbol-color",60252),symbolConstant:g("symbol-constant",60253),symbolEnumMember:g("symbol-enum-member",60254),symbolField:g("symbol-field",60255),symbolFile:g("symbol-file",60256),symbolInterface:g("symbol-interface",60257),symbolKeyword:g("symbol-keyword",60258),symbolMisc:g("symbol-misc",60259),symbolOperator:g("symbol-operator",60260),symbolProperty:g("symbol-property",60261),wrench:g("wrench",60261),wrenchSubaction:g("wrench-subaction",60261),symbolSnippet:g("symbol-snippet",60262),tasklist:g("tasklist",60263),telescope:g("telescope",60264),textSize:g("text-size",60265),threeBars:g("three-bars",60266),thumbsdown:g("thumbsdown",60267),thumbsup:g("thumbsup",60268),tools:g("tools",60269),triangleDown:g("triangle-down",60270),triangleLeft:g("triangle-left",60271),triangleRight:g("triangle-right",60272),triangleUp:g("triangle-up",60273),twitter:g("twitter",60274),unfold:g("unfold",60275),unlock:g("unlock",60276),unmute:g("unmute",60277),unverified:g("unverified",60278),verified:g("verified",60279),versions:g("versions",60280),vmActive:g("vm-active",60281),vmOutline:g("vm-outline",60282),vmRunning:g("vm-running",60283),watch:g("watch",60284),whitespace:g("whitespace",60285),wholeWord:g("whole-word",60286),window:g("window",60287),wordWrap:g("word-wrap",60288),zoomIn:g("zoom-in",60289),zoomOut:g("zoom-out",60290),listFilter:g("list-filter",60291),listFlat:g("list-flat",60292),listSelection:g("list-selection",60293),selection:g("selection",60293),listTree:g("list-tree",60294),debugBreakpointFunctionUnverified:g("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:g("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:g("debug-breakpoint-function-disabled",60296),debugStackframeActive:g("debug-stackframe-active",60297),circleSmallFilled:g("circle-small-filled",60298),debugStackframeDot:g("debug-stackframe-dot",60298),terminalDecorationMark:g("terminal-decoration-mark",60298),debugStackframe:g("debug-stackframe",60299),debugStackframeFocused:g("debug-stackframe-focused",60299),debugBreakpointUnsupported:g("debug-breakpoint-unsupported",60300),symbolString:g("symbol-string",60301),debugReverseContinue:g("debug-reverse-continue",60302),debugStepBack:g("debug-step-back",60303),debugRestartFrame:g("debug-restart-frame",60304),debugAlt:g("debug-alt",60305),callIncoming:g("call-incoming",60306),callOutgoing:g("call-outgoing",60307),menu:g("menu",60308),expandAll:g("expand-all",60309),feedback:g("feedback",60310),gitPullRequestReviewer:g("git-pull-request-reviewer",60310),groupByRefType:g("group-by-ref-type",60311),ungroupByRefType:g("ungroup-by-ref-type",60312),account:g("account",60313),gitPullRequestAssignee:g("git-pull-request-assignee",60313),bellDot:g("bell-dot",60314),debugConsole:g("debug-console",60315),library:g("library",60316),output:g("output",60317),runAll:g("run-all",60318),syncIgnored:g("sync-ignored",60319),pinned:g("pinned",60320),githubInverted:g("github-inverted",60321),serverProcess:g("server-process",60322),serverEnvironment:g("server-environment",60323),pass:g("pass",60324),issueClosed:g("issue-closed",60324),stopCircle:g("stop-circle",60325),playCircle:g("play-circle",60326),record:g("record",60327),debugAltSmall:g("debug-alt-small",60328),vmConnect:g("vm-connect",60329),cloud:g("cloud",60330),merge:g("merge",60331),export:g("export",60332),graphLeft:g("graph-left",60333),magnet:g("magnet",60334),notebook:g("notebook",60335),redo:g("redo",60336),checkAll:g("check-all",60337),pinnedDirty:g("pinned-dirty",60338),passFilled:g("pass-filled",60339),circleLargeFilled:g("circle-large-filled",60340),circleLarge:g("circle-large",60341),circleLargeOutline:g("circle-large-outline",60341),combine:g("combine",60342),gather:g("gather",60342),table:g("table",60343),variableGroup:g("variable-group",60344),typeHierarchy:g("type-hierarchy",60345),typeHierarchySub:g("type-hierarchy-sub",60346),typeHierarchySuper:g("type-hierarchy-super",60347),gitPullRequestCreate:g("git-pull-request-create",60348),runAbove:g("run-above",60349),runBelow:g("run-below",60350),notebookTemplate:g("notebook-template",60351),debugRerun:g("debug-rerun",60352),workspaceTrusted:g("workspace-trusted",60353),workspaceUntrusted:g("workspace-untrusted",60354),workspaceUnknown:g("workspace-unknown",60355),terminalCmd:g("terminal-cmd",60356),terminalDebian:g("terminal-debian",60357),terminalLinux:g("terminal-linux",60358),terminalPowershell:g("terminal-powershell",60359),terminalTmux:g("terminal-tmux",60360),terminalUbuntu:g("terminal-ubuntu",60361),terminalBash:g("terminal-bash",60362),arrowSwap:g("arrow-swap",60363),copy:g("copy",60364),personAdd:g("person-add",60365),filterFilled:g("filter-filled",60366),wand:g("wand",60367),debugLineByLine:g("debug-line-by-line",60368),inspect:g("inspect",60369),layers:g("layers",60370),layersDot:g("layers-dot",60371),layersActive:g("layers-active",60372),compass:g("compass",60373),compassDot:g("compass-dot",60374),compassActive:g("compass-active",60375),azure:g("azure",60376),issueDraft:g("issue-draft",60377),gitPullRequestClosed:g("git-pull-request-closed",60378),gitPullRequestDraft:g("git-pull-request-draft",60379),debugAll:g("debug-all",60380),debugCoverage:g("debug-coverage",60381),runErrors:g("run-errors",60382),folderLibrary:g("folder-library",60383),debugContinueSmall:g("debug-continue-small",60384),beakerStop:g("beaker-stop",60385),graphLine:g("graph-line",60386),graphScatter:g("graph-scatter",60387),pieChart:g("pie-chart",60388),bracket:g("bracket",60175),bracketDot:g("bracket-dot",60389),bracketError:g("bracket-error",60390),lockSmall:g("lock-small",60391),azureDevops:g("azure-devops",60392),verifiedFilled:g("verified-filled",60393),newline:g("newline",60394),layout:g("layout",60395),layoutActivitybarLeft:g("layout-activitybar-left",60396),layoutActivitybarRight:g("layout-activitybar-right",60397),layoutPanelLeft:g("layout-panel-left",60398),layoutPanelCenter:g("layout-panel-center",60399),layoutPanelJustify:g("layout-panel-justify",60400),layoutPanelRight:g("layout-panel-right",60401),layoutPanel:g("layout-panel",60402),layoutSidebarLeft:g("layout-sidebar-left",60403),layoutSidebarRight:g("layout-sidebar-right",60404),layoutStatusbar:g("layout-statusbar",60405),layoutMenubar:g("layout-menubar",60406),layoutCentered:g("layout-centered",60407),target:g("target",60408),indent:g("indent",60409),recordSmall:g("record-small",60410),errorSmall:g("error-small",60411),terminalDecorationError:g("terminal-decoration-error",60411),arrowCircleDown:g("arrow-circle-down",60412),arrowCircleLeft:g("arrow-circle-left",60413),arrowCircleRight:g("arrow-circle-right",60414),arrowCircleUp:g("arrow-circle-up",60415),layoutSidebarRightOff:g("layout-sidebar-right-off",60416),layoutPanelOff:g("layout-panel-off",60417),layoutSidebarLeftOff:g("layout-sidebar-left-off",60418),blank:g("blank",60419),heartFilled:g("heart-filled",60420),map:g("map",60421),mapHorizontal:g("map-horizontal",60421),foldHorizontal:g("fold-horizontal",60421),mapFilled:g("map-filled",60422),mapHorizontalFilled:g("map-horizontal-filled",60422),foldHorizontalFilled:g("fold-horizontal-filled",60422),circleSmall:g("circle-small",60423),bellSlash:g("bell-slash",60424),bellSlashDot:g("bell-slash-dot",60425),commentUnresolved:g("comment-unresolved",60426),gitPullRequestGoToChanges:g("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:g("git-pull-request-new-changes",60428),searchFuzzy:g("search-fuzzy",60429),commentDraft:g("comment-draft",60430),send:g("send",60431),sparkle:g("sparkle",60432),insert:g("insert",60433),mic:g("mic",60434),thumbsdownFilled:g("thumbsdown-filled",60435),thumbsupFilled:g("thumbsup-filled",60436),coffee:g("coffee",60437),snake:g("snake",60438),game:g("game",60439),vr:g("vr",60440),chip:g("chip",60441),piano:g("piano",60442),music:g("music",60443),micFilled:g("mic-filled",60444),repoFetch:g("repo-fetch",60445),copilot:g("copilot",60446),lightbulbSparkle:g("lightbulb-sparkle",60447),robot:g("robot",60448),sparkleFilled:g("sparkle-filled",60449),diffSingle:g("diff-single",60450),diffMultiple:g("diff-multiple",60451),surroundWith:g("surround-with",60452),share:g("share",60453),gitStash:g("git-stash",60454),gitStashApply:g("git-stash-apply",60455),gitStashPop:g("git-stash-pop",60456),vscode:g("vscode",60457),vscodeInsiders:g("vscode-insiders",60458),codeOss:g("code-oss",60459),runCoverage:g("run-coverage",60460),runAllCoverage:g("run-all-coverage",60461),coverage:g("coverage",60462),githubProject:g("github-project",60463),mapVertical:g("map-vertical",60464),foldVertical:g("fold-vertical",60464),mapVerticalFilled:g("map-vertical-filled",60465),foldVerticalFilled:g("fold-vertical-filled",60465),goToSearch:g("go-to-search",60466),percentage:g("percentage",60467),sortPercentage:g("sort-percentage",60467),attach:g("attach",60468)};var xO={dialogError:g("dialog-error","error"),dialogWarning:g("dialog-warning","warning"),dialogInfo:g("dialog-info","info"),dialogClose:g("dialog-close","close"),treeItemExpanded:g("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:g("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:g("tree-filter-on-type-off","list-selection"),treeFilterClear:g("tree-filter-clear","close"),treeItemLoading:g("tree-item-loading","loading"),menuSelection:g("menu-selection","check"),menuSubmenu:g("menu-submenu","chevron-right"),menuBarMore:g("menubar-more","more"),scrollbarButtonLeft:g("scrollbar-button-left","triangle-left"),scrollbarButtonRight:g("scrollbar-button-right","triangle-right"),scrollbarButtonUp:g("scrollbar-button-up","triangle-up"),scrollbarButtonDown:g("scrollbar-button-down","triangle-down"),toolBarMore:g("toolbar-more","more"),quickInputBack:g("quick-input-back","arrow-left"),dropDownButton:g("drop-down-button",60084),symbolCustomColor:g("symbol-customcolor",60252),exportIcon:g("export",60332),workspaceUnspecified:g("workspace-unspecified",60355),newLine:g("newline",60394),thumbsDownFilled:g("thumbsdown-filled",60435),thumbsUpFilled:g("thumbsup-filled",60436),gitFetch:g("git-fetch",60445),lightbulbSparkleAutofix:g("lightbulb-sparkle-autofix",60447),debugBreakpointPending:g("debug-breakpoint-pending",60377)},j={...NT,...xO};var FT;(e=>{function i(t){return t&&typeof t=="object"&&typeof t.id=="string"}e.isThemeColor=i})(FT||={});var Fe;(f=>{f.iconNameSegment="[A-Za-z0-9]+",f.iconNameExpression="[A-Za-z0-9-]+",f.iconModifierExpression="~[A-Za-z]+",f.iconNameCharacter="[A-Za-z0-9~-]";let o=new RegExp(`^(${f.iconNameExpression})(${f.iconModifierExpression})?$`);function r(b){let E=o.exec(b.id);if(!E)return r(j.error);let[,T,_]=E,O=["codicon","codicon-"+T];return _&&O.push("codicon-modifier-"+_.substring(1)),O}f.asClassNameArray=r;function s(b){return r(b).join(" ")}f.asClassName=s;function a(b){return"."+r(b).join(".")}f.asCSSSelector=a;function l(b){return b&&typeof b=="object"&&typeof b.id=="string"&&(typeof b.color>"u"||FT.isThemeColor(b.color))}f.isThemeIcon=l;let c=new RegExp(`^\\$\\((${f.iconNameExpression}(?:${f.iconModifierExpression})?)\\)$`);function u(b){let E=c.exec(b);if(!E)return;let[,T]=E;return{id:T}}f.fromString=u;function p(b){return{id:b}}f.fromId=p;function h(b,E){let T=b.id,_=T.lastIndexOf("~");return _!==-1&&(T=T.substring(0,_)),E&&(T=`${T}~${E}`),{id:T}}f.modify=h;function m(b){let E=b.id.lastIndexOf("~");if(E!==-1)return b.id.substring(E+1)}f.getModifier=m;function v(b,E){return b.id===E.id&&b.color?.id===E.color?.id}f.isEqual=v})(Fe||={});var bs=11,ig=class extends fi{_onActivate;bgDomNode;domNode;_pointerdownRepeatTimer;_pointerdownScheduleRepeatTimer;_pointerMoveMonitor;constructor(e){super(),this._onActivate=e.onActivate,this.bgDomNode=document.createElement("div"),this.bgDomNode.className="arrow-background",this.bgDomNode.style.position="absolute",this.bgDomNode.style.width=e.bgWidth+"px",this.bgDomNode.style.height=e.bgHeight+"px",typeof e.top<"u"&&(this.bgDomNode.style.top="0px"),typeof e.left<"u"&&(this.bgDomNode.style.left="0px"),typeof e.bottom<"u"&&(this.bgDomNode.style.bottom="0px"),typeof e.right<"u"&&(this.bgDomNode.style.right="0px"),this.domNode=document.createElement("div"),this.domNode.className=e.className,this.domNode.classList.add(...Fe.asClassNameArray(e.icon)),this.domNode.style.position="absolute",this.domNode.style.width=bs+"px",this.domNode.style.height=bs+"px",typeof e.top<"u"&&(this.domNode.style.top=e.top+"px"),typeof e.left<"u"&&(this.domNode.style.left=e.left+"px"),typeof e.bottom<"u"&&(this.domNode.style.bottom=e.bottom+"px"),typeof e.right<"u"&&(this.domNode.style.right=e.right+"px"),this._pointerMoveMonitor=this._register(new Vl),this._register(ho(this.bgDomNode,ye.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._register(ho(this.domNode,ye.POINTER_DOWN,t=>this._arrowPointerDown(t))),this._pointerdownRepeatTimer=this._register(new $h),this._pointerdownScheduleRepeatTimer=this._register(new Pr)}_arrowPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=()=>{this._pointerdownRepeatTimer.cancelAndSet(()=>this._onActivate(),1e3/24,Pe(e))};this._onActivate(),this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancelAndSet(t,200),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,n=>{},()=>{this._pointerdownRepeatTimer.cancel(),this._pointerdownScheduleRepeatTimer.cancel()}),e.preventDefault()}};var zl=class i{_scrollbarSize;_oppositeScrollbarSize;_arrowSize;_visibleSize;_scrollSize;_scrollPosition;_computedAvailableSize;_computedIsNeeded;_computedSliderSize;_computedSliderRatio;_computedSliderPosition;constructor(e,t,n,o,r,s){this._scrollbarSize=Math.round(t),this._oppositeScrollbarSize=Math.round(n),this._arrowSize=Math.round(e),this._visibleSize=o,this._scrollSize=r,this._scrollPosition=s,this._computedAvailableSize=0,this._computedIsNeeded=!1,this._computedSliderSize=0,this._computedSliderRatio=0,this._computedSliderPosition=0,this._refreshComputedValues()}clone(){return new i(this._arrowSize,this._scrollbarSize,this._oppositeScrollbarSize,this._visibleSize,this._scrollSize,this._scrollPosition)}setVisibleSize(e){let t=Math.round(e);return this._visibleSize!==t?(this._visibleSize=t,this._refreshComputedValues(),!0):!1}setScrollSize(e){let t=Math.round(e);return this._scrollSize!==t?(this._scrollSize=t,this._refreshComputedValues(),!0):!1}setScrollPosition(e){let t=Math.round(e);return this._scrollPosition!==t?(this._scrollPosition=t,this._refreshComputedValues(),!0):!1}setScrollbarSize(e){this._scrollbarSize=Math.round(e)}setOppositeScrollbarSize(e){this._oppositeScrollbarSize=Math.round(e)}static _computeValues(e,t,n,o,r){let s=Math.max(0,n-e),a=Math.max(0,s-2*t),l=o>0&&o>n;if(!l)return{computedAvailableSize:Math.round(s),computedIsNeeded:l,computedSliderSize:Math.round(a),computedSliderRatio:0,computedSliderPosition:0};let c=Math.round(Math.max(20,Math.floor(n*a/o))),u=(a-c)/(o-n),p=r*u;return{computedAvailableSize:Math.round(s),computedIsNeeded:l,computedSliderSize:Math.round(c),computedSliderRatio:u,computedSliderPosition:Math.round(p)}}_refreshComputedValues(){let e=i._computeValues(this._oppositeScrollbarSize,this._arrowSize,this._visibleSize,this._scrollSize,this._scrollPosition);this._computedAvailableSize=e.computedAvailableSize,this._computedIsNeeded=e.computedIsNeeded,this._computedSliderSize=e.computedSliderSize,this._computedSliderRatio=e.computedSliderRatio,this._computedSliderPosition=e.computedSliderPosition}getArrowSize(){return this._arrowSize}getScrollPosition(){return this._scrollPosition}getRectangleLargeSize(){return this._computedAvailableSize}getRectangleSmallSize(){return this._scrollbarSize}isNeeded(){return this._computedIsNeeded}getSliderSize(){return this._computedSliderSize}getSliderPosition(){return this._computedSliderPosition}getDesiredScrollPositionFromOffset(e){if(!this._computedIsNeeded)return 0;let t=e-this._arrowSize-this._computedSliderSize/2;return Math.round(t/this._computedSliderRatio)}getDesiredScrollPositionFromOffsetPaged(e){if(!this._computedIsNeeded)return 0;let t=e-this._arrowSize,n=this._scrollPosition;return t<this._computedSliderPosition?n-=this._visibleSize:n+=this._visibleSize,n}getDesiredScrollPositionFromDelta(e){if(!this._computedIsNeeded)return 0;let t=this._computedSliderPosition+e;return Math.round(t/this._computedSliderRatio)}};var py=class i{constructor(e,t,n,o,r,s,a){this._forceIntegerValues=e;this._forceIntegerValues&&(t=t|0,n=n|0,o=o|0,r=r|0,s=s|0,a=a|0),this.rawScrollLeft=o,this.rawScrollTop=a,t<0&&(t=0),o+t>n&&(o=n-t),o<0&&(o=0),r<0&&(r=0),a+r>s&&(a=s-r),a<0&&(a=0),this.width=t,this.scrollWidth=n,this.scrollLeft=o,this.height=r,this.scrollHeight=s,this.scrollTop=a}_scrollStateBrand=void 0;rawScrollLeft;rawScrollTop;width;scrollWidth;scrollLeft;height;scrollHeight;scrollTop;equals(e){return this.rawScrollLeft===e.rawScrollLeft&&this.rawScrollTop===e.rawScrollTop&&this.width===e.width&&this.scrollWidth===e.scrollWidth&&this.scrollLeft===e.scrollLeft&&this.height===e.height&&this.scrollHeight===e.scrollHeight&&this.scrollTop===e.scrollTop}withScrollDimensions(e,t){return new i(this._forceIntegerValues,typeof e.width<"u"?e.width:this.width,typeof e.scrollWidth<"u"?e.scrollWidth:this.scrollWidth,t?this.rawScrollLeft:this.scrollLeft,typeof e.height<"u"?e.height:this.height,typeof e.scrollHeight<"u"?e.scrollHeight:this.scrollHeight,t?this.rawScrollTop:this.scrollTop)}withScrollPosition(e){return new i(this._forceIntegerValues,this.width,this.scrollWidth,typeof e.scrollLeft<"u"?e.scrollLeft:this.rawScrollLeft,this.height,this.scrollHeight,typeof e.scrollTop<"u"?e.scrollTop:this.rawScrollTop)}createScrollEvent(e,t){let n=this.width!==e.width,o=this.scrollWidth!==e.scrollWidth,r=this.scrollLeft!==e.scrollLeft,s=this.height!==e.height,a=this.scrollHeight!==e.scrollHeight,l=this.scrollTop!==e.scrollTop;return{inSmoothScrolling:t,oldWidth:e.width,oldScrollWidth:e.scrollWidth,oldScrollLeft:e.scrollLeft,width:this.width,scrollWidth:this.scrollWidth,scrollLeft:this.scrollLeft,oldHeight:e.height,oldScrollHeight:e.scrollHeight,oldScrollTop:e.scrollTop,height:this.height,scrollHeight:this.scrollHeight,scrollTop:this.scrollTop,widthChanged:n,scrollWidthChanged:o,scrollLeftChanged:r,heightChanged:s,scrollHeightChanged:a,scrollTopChanged:l}}},ka=class extends A{_scrollableBrand=void 0;_smoothScrollDuration;_scheduleAtNextAnimationFrame;_state;_smoothScrolling;_onScroll=this._register(new C);onScroll=this._onScroll.event;constructor(e){super(),this._smoothScrollDuration=e.smoothScrollDuration,this._scheduleAtNextAnimationFrame=e.scheduleAtNextAnimationFrame,this._state=new py(e.forceIntegerValues,0,0,0,0,0,0),this._smoothScrolling=null}dispose(){this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),super.dispose()}setSmoothScrollDuration(e){this._smoothScrollDuration=e}validateScrollPosition(e){return this._state.withScrollPosition(e)}getScrollDimensions(){return this._state}setScrollDimensions(e,t){let n=this._state.withScrollDimensions(e,t);this._setState(n,!!this._smoothScrolling),this._smoothScrolling?.acceptScrollDimensions(this._state)}getFutureScrollPosition(){return this._smoothScrolling?this._smoothScrolling.to:this._state}getCurrentScrollPosition(){return this._state}setScrollPositionNow(e){let t=this._state.withScrollPosition(e);this._smoothScrolling&&(this._smoothScrolling.dispose(),this._smoothScrolling=null),this._setState(t,!1)}setScrollPositionSmooth(e,t){if(this._smoothScrollDuration===0)return this.setScrollPositionNow(e);if(this._smoothScrolling){e={scrollLeft:typeof e.scrollLeft>"u"?this._smoothScrolling.to.scrollLeft:e.scrollLeft,scrollTop:typeof e.scrollTop>"u"?this._smoothScrolling.to.scrollTop:e.scrollTop};let n=this._state.withScrollPosition(e);if(this._smoothScrolling.to.scrollLeft===n.scrollLeft&&this._smoothScrolling.to.scrollTop===n.scrollTop)return;let o;t?o=new rg(this._smoothScrolling.from,n,this._smoothScrolling.startTime,this._smoothScrolling.duration):o=this._smoothScrolling.combine(this._state,n,this._smoothScrollDuration),this._smoothScrolling.dispose(),this._smoothScrolling=o}else{let n=this._state.withScrollPosition(e);this._smoothScrolling=rg.start(this._state,n,this._smoothScrollDuration)}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}hasPendingScrollAnimation(){return!!this._smoothScrolling}_performSmoothScrolling(){if(!this._smoothScrolling)return;let e=this._smoothScrolling.tick(),t=this._state.withScrollPosition(e);if(this._setState(t,!0),!!this._smoothScrolling){if(e.isDone){this._smoothScrolling.dispose(),this._smoothScrolling=null;return}this._smoothScrolling.animationFrameDisposable=this._scheduleAtNextAnimationFrame(()=>{this._smoothScrolling&&(this._smoothScrolling.animationFrameDisposable=null,this._performSmoothScrolling())})}}_setState(e,t){let n=this._state;n.equals(e)||(this._state=e,this._onScroll.fire(this._state.createScrollEvent(n,t)))}},og=class{scrollLeft;scrollTop;isDone;constructor(e,t,n){this.scrollLeft=e,this.scrollTop=t,this.isDone=n}};function uy(i,e){let t=e-i;return function(n){return i+t*CO(n)}}function SO(i,e,t){return function(n){return n<t?i(n/t):e((n-t)/(1-t))}}var rg=class i{from;to;duration;startTime;animationFrameDisposable;scrollLeft;scrollTop;constructor(e,t,n,o){this.from=e,this.to=t,this.duration=o,this.startTime=n,this.animationFrameDisposable=null,this._initAnimations()}_initAnimations(){this.scrollLeft=this._initAnimation(this.from.scrollLeft,this.to.scrollLeft,this.to.width),this.scrollTop=this._initAnimation(this.from.scrollTop,this.to.scrollTop,this.to.height)}_initAnimation(e,t,n){if(Math.abs(e-t)>2.5*n){let r,s;return e<t?(r=e+.75*n,s=t-.75*n):(r=e-.75*n,s=t+.75*n),SO(uy(e,r),uy(s,t),.33)}return uy(e,t)}dispose(){this.animationFrameDisposable!==null&&(this.animationFrameDisposable.dispose(),this.animationFrameDisposable=null)}acceptScrollDimensions(e){this.to=e.withScrollPosition(this.to),this._initAnimations()}tick(){return this._tick(Date.now())}_tick(e){let t=(e-this.startTime)/this.duration;if(t<1){let n=this.scrollLeft(t),o=this.scrollTop(t);return new og(n,o,!1)}return new og(this.to.scrollLeft,this.to.scrollTop,!0)}combine(e,t,n){return i.start(e,t,n)}static start(e,t,n){n=n+10;let o=Date.now()-10;return new i(e,t,o,n)}};function EO(i){return Math.pow(i,3)}function CO(i){return 1-EO(1-i)}var sg=class extends A{_visibility;_visibleClassName;_invisibleClassName;_domNode;_rawShouldBeVisible;_shouldBeVisible;_isNeeded;_isVisible;_revealTimer;constructor(e,t,n){super(),this._visibility=e,this._visibleClassName=t,this._invisibleClassName=n,this._domNode=null,this._isVisible=!1,this._isNeeded=!1,this._rawShouldBeVisible=!1,this._shouldBeVisible=!1,this._revealTimer=this._register(new Pr)}setVisibility(e){this._visibility!==e&&(this._visibility=e,this._updateShouldBeVisible())}setShouldBeVisible(e){this._rawShouldBeVisible=e,this._updateShouldBeVisible()}_applyVisibilitySetting(){return this._visibility===2?!1:this._visibility===3?!0:this._rawShouldBeVisible}_updateShouldBeVisible(){let e=this._applyVisibilitySetting();this._shouldBeVisible!==e&&(this._shouldBeVisible=e,this.ensureVisibility())}setIsNeeded(e){this._isNeeded!==e&&(this._isNeeded=e,this.ensureVisibility())}setDomNode(e){this._domNode=e,this._domNode.setClassName(this._invisibleClassName),this.setShouldBeVisible(!1)}ensureVisibility(){if(!this._isNeeded){this._hide(!1);return}this._shouldBeVisible?this._reveal():this._hide(!0)}_reveal(){this._isVisible||(this._isVisible=!0,this._revealTimer.setIfNotSet(()=>{this._domNode?.setClassName(this._visibleClassName)},0))}_hide(e){this._revealTimer.cancel(),this._isVisible&&(this._isVisible=!1,this._domNode?.setClassName(this._invisibleClassName+(e?" fade":"")))}};var wO=140,Hl=class extends fi{_host;_scrollable;_scrollByPage;_lazyRender;_scrollbarState;_visibilityController;_pointerMoveMonitor;domNode;slider;_shouldRender;constructor(e){super(),this._lazyRender=e.lazyRender,this._host=e.host,this._scrollable=e.scrollable,this._scrollByPage=e.scrollByPage,this._scrollbarState=e.scrollbarState,this._visibilityController=this._register(new sg(e.visibility,"visible scrollbar "+e.extraScrollbarClassName,"invisible scrollbar "+e.extraScrollbarClassName)),this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._pointerMoveMonitor=this._register(new Vl),this._shouldRender=!0,this.domNode=Ta(document.createElement("div")),this.domNode.setAttribute("role","presentation"),this.domNode.setAttribute("aria-hidden","true"),this._visibilityController.setDomNode(this.domNode),this.domNode.setPosition("absolute"),this._register(Z(this.domNode.domNode,ye.POINTER_DOWN,t=>this._domNodePointerDown(t)))}_createArrow(e){let t=this._register(new ig(e));this.domNode.domNode.appendChild(t.bgDomNode),this.domNode.domNode.appendChild(t.domNode)}_createSlider(e,t,n,o){this.slider=Ta(document.createElement("div")),this.slider.setClassName("slider"),this.slider.setPosition("absolute"),this.slider.setTop(e),this.slider.setLeft(t),typeof n=="number"&&this.slider.setWidth(n),typeof o=="number"&&this.slider.setHeight(o),this.slider.setLayerHinting(!0),this.slider.setContain("strict"),this.domNode.domNode.appendChild(this.slider.domNode),this._register(Z(this.slider.domNode,ye.POINTER_DOWN,r=>{r.button===0&&(r.preventDefault(),this._sliderPointerDown(r))})),this.onclick(this.slider.domNode,r=>{r.leftButton&&r.stopPropagation()})}_onElementSize(e){return this._scrollbarState.setVisibleSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollSize(e){return this._scrollbarState.setScrollSize(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}_onElementScrollPosition(e){return this._scrollbarState.setScrollPosition(e)&&(this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded()),this._shouldRender=!0,this._lazyRender||this.render()),this._shouldRender}beginReveal(){this._visibilityController.setShouldBeVisible(!0)}beginHide(){this._visibilityController.setShouldBeVisible(!1)}render(){this._shouldRender&&(this._shouldRender=!1,this._renderDomNode(this._scrollbarState.getRectangleLargeSize(),this._scrollbarState.getRectangleSmallSize()),this._updateSlider(this._scrollbarState.getSliderSize(),this._scrollbarState.getArrowSize()+this._scrollbarState.getSliderPosition()))}_domNodePointerDown(e){e.target===this.domNode.domNode&&this._onPointerDown(e)}delegatePointerDown(e){let t=this.domNode.domNode.getClientRects()[0].top,n=t+this._scrollbarState.getSliderPosition(),o=t+this._scrollbarState.getSliderPosition()+this._scrollbarState.getSliderSize(),r=this._sliderPointerPosition(e);n<=r&&r<=o?e.button===0&&(e.preventDefault(),this._sliderPointerDown(e)):this._onPointerDown(e)}_onPointerDown(e){let t,n;if(e.target===this.domNode.domNode&&typeof e.offsetX=="number"&&typeof e.offsetY=="number")t=e.offsetX,n=e.offsetY;else{let r=Qh(this.domNode.domNode);t=e.pageX-r.left,n=e.pageY-r.top}let o=this._pointerDownRelativePosition(t,n);this._setDesiredScrollPositionNow(this._scrollByPage?this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(o):this._scrollbarState.getDesiredScrollPositionFromOffset(o)),e.button===0&&(e.preventDefault(),this._sliderPointerDown(e))}_sliderPointerDown(e){if(!e.target||!(e.target instanceof Element))return;let t=this._sliderPointerPosition(e),n=this._sliderOrthogonalPointerPosition(e),o=this._scrollbarState.clone();this.slider.toggleClassName("active",!0),this._pointerMoveMonitor.startMonitoring(e.target,e.pointerId,e.buttons,r=>{let s=this._sliderOrthogonalPointerPosition(r),a=Math.abs(s-n);if(Ye&&a>wO){this._setDesiredScrollPositionNow(o.getScrollPosition());return}let c=this._sliderPointerPosition(r)-t;this._setDesiredScrollPositionNow(o.getDesiredScrollPositionFromDelta(c))},()=>{this.slider.toggleClassName("active",!1),this._host.onDragEnd()}),this._host.onDragStart()}_setDesiredScrollPositionNow(e){let t={};this.writeScrollPosition(t,e),this._scrollable.setScrollPositionNow(t)}updateScrollbarSize(e){this._updateScrollbarSize(e),this._scrollbarState.setScrollbarSize(e),this._shouldRender=!0,this._lazyRender||this.render()}isNeeded(){return this._scrollbarState.isNeeded()}};var ag=class extends Hl{constructor(e,t,n){let o=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new zl(t.horizontalHasArrows?t.arrowSize:0,t.horizontal===2?0:t.horizontalScrollbarSize,t.vertical===2?0:t.verticalScrollbarSize,o.width,o.scrollWidth,r.scrollLeft),visibility:t.horizontal,extraScrollbarClassName:"horizontal",scrollable:e,scrollByPage:t.scrollByPage}),t.horizontalHasArrows){let s=(t.arrowSize-bs)/2,a=(t.horizontalScrollbarSize-bs)/2;this._createArrow({className:"scra",icon:j.scrollbarButtonLeft,top:a,left:s,bottom:void 0,right:void 0,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new lo(null,1,0))}),this._createArrow({className:"scra",icon:j.scrollbarButtonRight,top:a,left:void 0,bottom:void 0,right:s,bgWidth:t.arrowSize,bgHeight:t.horizontalScrollbarSize,onActivate:()=>this._host.onMouseWheel(new lo(null,-1,0))})}this._createSlider(Math.floor((t.horizontalScrollbarSize-t.horizontalSliderSize)/2),0,void 0,t.horizontalSliderSize)}_updateSlider(e,t){this.slider.setWidth(e),this.slider.setLeft(t)}_renderDomNode(e,t){this.domNode.setWidth(e),this.domNode.setHeight(t),this.domNode.setLeft(0),this.domNode.setBottom(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollWidth)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollLeft)||this._shouldRender,this._shouldRender=this._onElementSize(e.width)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return e}_sliderPointerPosition(e){return e.pageX}_sliderOrthogonalPointerPosition(e){return e.pageY}_updateScrollbarSize(e){this.slider.setHeight(e)}writeScrollPosition(e,t){e.scrollLeft=t}updateOptions(e){this.updateScrollbarSize(e.horizontal===2?0:e.horizontalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._visibilityController.setVisibility(e.horizontal),this._scrollByPage=e.scrollByPage}};var lg=class extends Hl{constructor(e,t,n){let o=e.getScrollDimensions(),r=e.getCurrentScrollPosition();if(super({lazyRender:t.lazyRender,host:n,scrollbarState:new zl(t.verticalHasArrows?t.arrowSize:0,t.vertical===2?0:t.verticalScrollbarSize,0,o.height,o.scrollHeight,r.scrollTop),visibility:t.vertical,extraScrollbarClassName:"vertical",scrollable:e,scrollByPage:t.scrollByPage}),t.verticalHasArrows){let s=(t.arrowSize-bs)/2,a=(t.verticalScrollbarSize-bs)/2;this._createArrow({className:"scra",icon:j.scrollbarButtonUp,top:s,left:a,bottom:void 0,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new lo(null,0,1))}),this._createArrow({className:"scra",icon:j.scrollbarButtonDown,top:void 0,left:a,bottom:s,right:void 0,bgWidth:t.verticalScrollbarSize,bgHeight:t.arrowSize,onActivate:()=>this._host.onMouseWheel(new lo(null,0,-1))})}this._createSlider(0,Math.floor((t.verticalScrollbarSize-t.verticalSliderSize)/2),t.verticalSliderSize,void 0)}_updateSlider(e,t){this.slider.setHeight(e),this.slider.setTop(t)}_renderDomNode(e,t){this.domNode.setWidth(t),this.domNode.setHeight(e),this.domNode.setRight(0),this.domNode.setTop(0)}onDidScroll(e){return this._shouldRender=this._onElementScrollSize(e.scrollHeight)||this._shouldRender,this._shouldRender=this._onElementScrollPosition(e.scrollTop)||this._shouldRender,this._shouldRender=this._onElementSize(e.height)||this._shouldRender,this._shouldRender}_pointerDownRelativePosition(e,t){return t}_sliderPointerPosition(e){return e.pageY}_sliderOrthogonalPointerPosition(e){return e.pageX}_updateScrollbarSize(e){this.slider.setWidth(e)}writeScrollPosition(e,t){e.scrollTop=t}updateOptions(e){this.updateScrollbarSize(e.vertical===2?0:e.verticalScrollbarSize),this._scrollbarState.setOppositeScrollbarSize(0),this._visibilityController.setVisibility(e.vertical),this._scrollByPage=e.scrollByPage}};var TO=500,BT=50,WT=!0,hy=class{timestamp;deltaX;deltaY;score;constructor(e,t,n){this.timestamp=e,this.deltaX=t,this.deltaY=n,this.score=0}},gy=class i{static INSTANCE=new i;_capacity;_memory;_front;_rear;constructor(){this._capacity=5,this._memory=[],this._front=-1,this._rear=-1}isPhysicalMouseWheel(){if(this._front===-1&&this._rear===-1)return!1;let e=1,t=0,n=1,o=this._rear;do{let r=o===this._front?e:Math.pow(2,-n);if(e-=r,t+=this._memory[o].score*r,o===this._front)break;o=(this._capacity+o-1)%this._capacity,n++}while(!0);return t<=.5}acceptStandardWheelEvent(e){if(kl){let t=Pe(e.browserEvent),n=Cw(t);this.accept(Date.now(),e.deltaX*n,e.deltaY*n)}else this.accept(Date.now(),e.deltaX,e.deltaY)}accept(e,t,n){let o=null,r=new hy(e,t,n);this._front===-1&&this._rear===-1?(this._memory[0]=r,this._front=0,this._rear=0):(o=this._memory[this._rear],this._rear=(this._rear+1)%this._capacity,this._rear===this._front&&(this._front=(this._front+1)%this._capacity),this._memory[this._rear]=r),r.score=this._computeScore(r,o)}_computeScore(e,t){if(Math.abs(e.deltaX)>0&&Math.abs(e.deltaY)>0)return 1;let n=.5;if((!this._isAlmostInt(e.deltaX)||!this._isAlmostInt(e.deltaY))&&(n+=.25),t){let o=Math.abs(e.deltaX),r=Math.abs(e.deltaY),s=Math.abs(t.deltaX),a=Math.abs(t.deltaY),l=Math.max(Math.min(o,s),1),c=Math.max(Math.min(r,a),1),u=Math.max(o,s),p=Math.max(r,a);u%l===0&&p%c===0&&(n-=.5)}return Math.min(Math.max(n,0),1)}_isAlmostInt(e){return Math.abs(Math.round(e)-e)<.01}},dg=class extends fi{_options;_scrollable;_verticalScrollbar;_horizontalScrollbar;_domNode;_leftShadowDomNode;_topShadowDomNode;_topLeftShadowDomNode;_listenOnDomNode;_mouseWheelToDispose;_isDragging;_mouseIsOver;_hideTimeout;_shouldRender;_revealOnScroll;_onScroll=this._register(new C);onScroll=this._onScroll.event;_onWillScroll=this._register(new C);onWillScroll=this._onWillScroll.event;get options(){return this._options}constructor(e,t,n){super(),e.style.overflow="hidden",this._options=kO(t),this._scrollable=n,this._register(this._scrollable.onScroll(r=>{this._onWillScroll.fire(r),this._onDidScroll(r),this._onScroll.fire(r)}));let o={onMouseWheel:r=>this._onMouseWheel(r),onDragStart:()=>this._onDragStart(),onDragEnd:()=>this._onDragEnd()};this._verticalScrollbar=this._register(new lg(this._scrollable,this._options,o)),this._horizontalScrollbar=this._register(new ag(this._scrollable,this._options,o)),this._domNode=document.createElement("div"),this._domNode.className="monaco-scrollable-element "+this._options.className,this._domNode.setAttribute("role","presentation"),this._domNode.style.position="relative",this._domNode.style.overflow="hidden",this._domNode.appendChild(e),this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode),this._domNode.appendChild(this._verticalScrollbar.domNode.domNode),this._options.useShadows?(this._leftShadowDomNode=Ta(document.createElement("div")),this._leftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._leftShadowDomNode.domNode),this._topShadowDomNode=Ta(document.createElement("div")),this._topShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topShadowDomNode.domNode),this._topLeftShadowDomNode=Ta(document.createElement("div")),this._topLeftShadowDomNode.setClassName("shadow"),this._domNode.appendChild(this._topLeftShadowDomNode.domNode)):(this._leftShadowDomNode=null,this._topShadowDomNode=null,this._topLeftShadowDomNode=null),this._listenOnDomNode=this._options.listenOnDomNode||this._domNode,this._mouseWheelToDispose=[],this._setListeningToMouseWheel(this._options.handleMouseWheel),this.onmouseover(this._listenOnDomNode,r=>this._onMouseOver(r)),this.onmouseleave(this._listenOnDomNode,r=>this._onMouseLeave(r)),this._hideTimeout=this._register(new Pr),this._isDragging=!1,this._mouseIsOver=!1,this._shouldRender=!0,this._revealOnScroll=!0}dispose(){this._mouseWheelToDispose=ft(this._mouseWheelToDispose),super.dispose()}getDomNode(){return this._domNode}getOverviewRulerLayoutInfo(){return{parent:this._domNode,insertBefore:this._verticalScrollbar.domNode.domNode}}delegateVerticalScrollbarPointerDown(e){this._verticalScrollbar.delegatePointerDown(e)}getScrollDimensions(){return this._scrollable.getScrollDimensions()}setScrollDimensions(e){this._scrollable.setScrollDimensions(e,!1)}updateClassName(e){this._options.className=e,Se&&(this._options.className+=" mac"),this._domNode.className="monaco-scrollable-element "+this._options.className}updateOptions(e){typeof e.handleMouseWheel<"u"&&(this._options.handleMouseWheel=e.handleMouseWheel,this._setListeningToMouseWheel(this._options.handleMouseWheel)),typeof e.mouseWheelScrollSensitivity<"u"&&(this._options.mouseWheelScrollSensitivity=e.mouseWheelScrollSensitivity),typeof e.fastScrollSensitivity<"u"&&(this._options.fastScrollSensitivity=e.fastScrollSensitivity),typeof e.scrollPredominantAxis<"u"&&(this._options.scrollPredominantAxis=e.scrollPredominantAxis),typeof e.horizontal<"u"&&(this._options.horizontal=e.horizontal),typeof e.vertical<"u"&&(this._options.vertical=e.vertical),typeof e.horizontalScrollbarSize<"u"&&(this._options.horizontalScrollbarSize=e.horizontalScrollbarSize),typeof e.verticalScrollbarSize<"u"&&(this._options.verticalScrollbarSize=e.verticalScrollbarSize),typeof e.scrollByPage<"u"&&(this._options.scrollByPage=e.scrollByPage),this._horizontalScrollbar.updateOptions(this._options),this._verticalScrollbar.updateOptions(this._options),this._options.lazyRender||this._render()}setRevealOnScroll(e){this._revealOnScroll=e}delegateScrollFromMouseWheelEvent(e){this._onMouseWheel(new lo(e))}_setListeningToMouseWheel(e){if(this._mouseWheelToDispose.length>0!==e&&(this._mouseWheelToDispose=ft(this._mouseWheelToDispose),e)){let n=o=>{this._onMouseWheel(new lo(o))};this._mouseWheelToDispose.push(Z(this._listenOnDomNode,ye.MOUSE_WHEEL,n,{passive:!1}))}}_onMouseWheel(e){if(e.browserEvent?.defaultPrevented)return;let t=gy.INSTANCE;WT&&t.acceptStandardWheelEvent(e);let n=!1;if(e.deltaY||e.deltaX){let r=e.deltaY*this._options.mouseWheelScrollSensitivity,s=e.deltaX*this._options.mouseWheelScrollSensitivity;this._options.scrollPredominantAxis&&(this._options.scrollYToX&&s+r===0?s=r=0:Math.abs(r)>=Math.abs(s)?s=0:r=0),this._options.flipAxes&&([r,s]=[s,r]);let a=!Se&&e.browserEvent&&e.browserEvent.shiftKey;(this._options.scrollYToX||a)&&!s&&(s=r,r=0),e.browserEvent&&e.browserEvent.altKey&&(s=s*this._options.fastScrollSensitivity,r=r*this._options.fastScrollSensitivity);let l=this._scrollable.getFutureScrollPosition(),c={};if(r){let u=BT*r,p=l.scrollTop-(u<0?Math.floor(u):Math.ceil(u));this._verticalScrollbar.writeScrollPosition(c,p)}if(s){let u=BT*s,p=l.scrollLeft-(u<0?Math.floor(u):Math.ceil(u));this._horizontalScrollbar.writeScrollPosition(c,p)}c=this._scrollable.validateScrollPosition(c),(l.scrollLeft!==c.scrollLeft||l.scrollTop!==c.scrollTop)&&(WT&&this._options.mouseWheelSmoothScroll&&t.isPhysicalMouseWheel()?this._scrollable.setScrollPositionSmooth(c):this._scrollable.setScrollPositionNow(c),n=!0)}let o=n;!o&&this._options.alwaysConsumeMouseWheel&&(o=!0),!o&&this._options.consumeMouseWheelIfScrollbarIsNeeded&&(this._verticalScrollbar.isNeeded()||this._horizontalScrollbar.isNeeded())&&(o=!0),o&&(e.preventDefault(),e.stopPropagation())}_onDidScroll(e){this._shouldRender=this._horizontalScrollbar.onDidScroll(e)||this._shouldRender,this._shouldRender=this._verticalScrollbar.onDidScroll(e)||this._shouldRender,this._options.useShadows&&(this._shouldRender=!0),this._revealOnScroll&&this._reveal(),this._options.lazyRender||this._render()}renderNow(){if(!this._options.lazyRender)throw new Error("Please use `lazyRender` together with `renderNow`!");this._render()}_render(){if(this._shouldRender&&(this._shouldRender=!1,this._horizontalScrollbar.render(),this._verticalScrollbar.render(),this._options.useShadows)){let e=this._scrollable.getCurrentScrollPosition(),t=e.scrollTop>0,n=e.scrollLeft>0,o=n?" left":"",r=t?" top":"",s=n||t?" top-left-corner":"";this._leftShadowDomNode.setClassName(`shadow${o}`),this._topShadowDomNode.setClassName(`shadow${r}`),this._topLeftShadowDomNode.setClassName(`shadow${s}${r}${o}`)}}_onDragStart(){this._isDragging=!0,this._reveal()}_onDragEnd(){this._isDragging=!1,this._hide()}_onMouseLeave(e){this._mouseIsOver=!1,this._hide()}_onMouseOver(e){this._mouseIsOver=!0,this._reveal()}_reveal(){this._verticalScrollbar.beginReveal(),this._horizontalScrollbar.beginReveal(),this._scheduleHide()}_hide(){!this._mouseIsOver&&!this._isDragging&&(this._verticalScrollbar.beginHide(),this._horizontalScrollbar.beginHide())}_scheduleHide(){!this._mouseIsOver&&!this._isDragging&&this._hideTimeout.cancelAndSet(()=>this._hide(),TO)}};var ru=class extends dg{constructor(e,t,n){super(e,t,n)}setScrollPosition(e){e.reuseAnimation?this._scrollable.setScrollPositionSmooth(e,e.reuseAnimation):this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}},mo=class extends dg{_element;constructor(e,t){t=t||{},t.mouseWheelSmoothScroll=!1;let n=new ka({forceIntegerValues:!1,smoothScrollDuration:0,scheduleAtNextAnimationFrame:o=>gi(Pe(e),o)});super(e,t,n),this._register(n),this._element=e,this._register(this.onScroll(o=>{o.scrollTopChanged&&(this._element.scrollTop=o.scrollTop),o.scrollLeftChanged&&(this._element.scrollLeft=o.scrollLeft)})),this.scanDomNode()}setScrollPosition(e){this._scrollable.setScrollPositionNow(e)}getScrollPosition(){return this._scrollable.getCurrentScrollPosition()}scanDomNode(){this.setScrollDimensions({width:this._element.clientWidth,scrollWidth:this._element.scrollWidth,height:this._element.clientHeight,scrollHeight:this._element.scrollHeight}),this.setScrollPosition({scrollLeft:this._element.scrollLeft,scrollTop:this._element.scrollTop})}};function kO(i){let e={lazyRender:typeof i.lazyRender<"u"?i.lazyRender:!1,className:typeof i.className<"u"?i.className:"",useShadows:typeof i.useShadows<"u"?i.useShadows:!0,handleMouseWheel:typeof i.handleMouseWheel<"u"?i.handleMouseWheel:!0,flipAxes:typeof i.flipAxes<"u"?i.flipAxes:!1,consumeMouseWheelIfScrollbarIsNeeded:typeof i.consumeMouseWheelIfScrollbarIsNeeded<"u"?i.consumeMouseWheelIfScrollbarIsNeeded:!1,alwaysConsumeMouseWheel:typeof i.alwaysConsumeMouseWheel<"u"?i.alwaysConsumeMouseWheel:!1,scrollYToX:typeof i.scrollYToX<"u"?i.scrollYToX:!1,mouseWheelScrollSensitivity:typeof i.mouseWheelScrollSensitivity<"u"?i.mouseWheelScrollSensitivity:1,fastScrollSensitivity:typeof i.fastScrollSensitivity<"u"?i.fastScrollSensitivity:5,scrollPredominantAxis:typeof i.scrollPredominantAxis<"u"?i.scrollPredominantAxis:!0,mouseWheelSmoothScroll:typeof i.mouseWheelSmoothScroll<"u"?i.mouseWheelSmoothScroll:!0,arrowSize:typeof i.arrowSize<"u"?i.arrowSize:11,listenOnDomNode:typeof i.listenOnDomNode<"u"?i.listenOnDomNode:null,horizontal:typeof i.horizontal<"u"?i.horizontal:1,horizontalScrollbarSize:typeof i.horizontalScrollbarSize<"u"?i.horizontalScrollbarSize:10,horizontalSliderSize:typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:0,horizontalHasArrows:typeof i.horizontalHasArrows<"u"?i.horizontalHasArrows:!1,vertical:typeof i.vertical<"u"?i.vertical:1,verticalScrollbarSize:typeof i.verticalScrollbarSize<"u"?i.verticalScrollbarSize:10,verticalHasArrows:typeof i.verticalHasArrows<"u"?i.verticalHasArrows:!1,verticalSliderSize:typeof i.verticalSliderSize<"u"?i.verticalSliderSize:0,scrollByPage:typeof i.scrollByPage<"u"?i.scrollByPage:!1};return e.horizontalSliderSize=typeof i.horizontalSliderSize<"u"?i.horizontalSliderSize:e.horizontalScrollbarSize,e.verticalSliderSize=typeof i.verticalSliderSize<"u"?i.verticalSliderSize:e.verticalScrollbarSize,Se&&(e.className+=" mac"),e}var O8=new Uint32Array(10);var A8=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),M8=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),N8=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),F8=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function VT(...i){return function(e,t){for(let n=0,o=i.length;n<o;n++){let r=i[n](e,t);if(r)return r}return null}}var K8=zT.bind(void 0,!1),Kl=zT.bind(void 0,!0);function zT(i,e,t){if(!t||t.length<e.length)return null;let n;return i?n=ds(t,e):n=t.indexOf(e)===0,n?e.length>0?[{start:0,end:e.length}]:[]:null}function DO(i,e){let t=e.toLowerCase().indexOf(i.toLowerCase());return t===-1?null:[{start:t,end:t+i.length}]}function _O(i,e){return fy(i.toLowerCase(),e.toLowerCase(),0,0)}function fy(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]===e[n]){let o=null;return(o=fy(i,e,t+1,n+1))?KT({start:n,end:n+1},o):null}return fy(i,e,t,n+1)}function Iy(i){return 97<=i&&i<=122}function au(i){return 65<=i&&i<=90}function xy(i){return 48<=i&&i<=57}function LO(i){return i===32||i===9||i===10||i===13}var RO=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(i=>RO.add(i.charCodeAt(0)));function HT(i){return Iy(i)||au(i)||xy(i)}function KT(i,e){return e.length===0?e=[i]:i.end===e[0].start?e[0].start=i.start:e.unshift(i),e}function GT(i,e){for(let t=e;t<i.length;t++){let n=i.charCodeAt(t);if(au(n)||xy(n)||t>0&&!HT(i.charCodeAt(t-1)))return t}return i.length}function by(i,e,t,n){if(t===i.length)return[];if(n===e.length)return null;if(i[t]!==e[n].toLowerCase())return null;{let o=null,r=n+1;for(o=by(i,e,t+1,n+1);!o&&(r=GT(e,r))<e.length;)o=by(i,e,t+1,r),r++;return o===null?null:KT({start:n,end:n+1},o)}}function PO(i){let e=0,t=0,n=0,o=0,r=0;for(let u=0;u<i.length;u++)r=i.charCodeAt(u),au(r)&&e++,Iy(r)&&t++,HT(r)&&n++,xy(r)&&o++;let s=e/i.length,a=t/i.length,l=n/i.length,c=o/i.length;return{upperPercent:s,lowerPercent:a,alphaPercent:l,numericPercent:c}}function OO(i){let{upperPercent:e,lowerPercent:t}=i;return t===0&&e>.6}function AO(i){let{upperPercent:e,lowerPercent:t,alphaPercent:n,numericPercent:o}=i;return t>.2&&e<.8&&n>.6&&o<.2}function MO(i){let e=0,t=0,n=0,o=0;for(let r=0;r<i.length;r++)n=i.charCodeAt(r),au(n)&&e++,Iy(n)&&t++,LO(n)&&o++;return(e===0||t===0)&&o===0?i.length<=30:e<=5}function qT(i,e){if(!e||(e=e.trim(),e.length===0)||!MO(i))return null;e.length>60&&(e=e.substring(0,60));let t=PO(e);if(!AO(t)){if(!OO(t))return null;e=e.toLowerCase()}let n=null,o=0;for(i=i.toLowerCase();o<e.length&&(n=by(i,e,0,o))===null;)o=GT(e,o+1);return n}var G8=VT(Kl,qT,DO),q8=VT(Kl,qT,_O),$8=new zi(1e4);function $T(i,e){let t=Ey(i,i.toLowerCase(),0,e,e.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});return t?jT(t):null}function jT(i){if(typeof i>"u")return[];let e=[],t=i[1];for(let n=i.length-1;n>1;n--){let o=i[n]+t,r=e[e.length-1];r&&r.end===o?r.end=o+1:e.push({start:o,end:o+1})}return e}var ys=128;function Sy(){let i=[],e=[];for(let t=0;t<=ys;t++)e[t]=0;for(let t=0;t<=ys;t++)i.push(e.slice(0));return i}function YT(i){let e=[];for(let t=0;t<=i;t++)e[t]=0;return e}var QT=YT(2*ys),vy=YT(2*ys),Ko=Sy(),vs=Sy(),su=Sy(),NO=!1;function my(i,e,t,n,o){function r(a,l,c=" "){for(;a.length<l;)a=c+a;return a}let s=` |   |${n.split("").map(a=>r(a,3)).join("|")}
`;for(let a=0;a<=t;a++)a===0?s+=" |":s+=`${e[a-1]}|`,s+=i[a].slice(0,o+1).map(l=>r(l.toString(),3)).join("|")+`
`;return s}function FO(i,e,t,n){i=i.substr(e),t=t.substr(n),console.log(my(vs,i,i.length,t,t.length)),console.log(my(su,i,i.length,t,t.length)),console.log(my(Ko,i,i.length,t,t.length))}function cg(i,e){if(e<0||e>=i.length)return!1;let t=i.codePointAt(e);switch(t){case 95:case 45:case 46:case 32:case 47:case 92:case 39:case 34:case 58:case 36:case 60:case 62:case 40:case 41:case 91:case 93:case 123:case 125:return!0;case void 0:return!1;default:return!!Ph(t)}}function UT(i,e){if(e<0||e>=i.length)return!1;switch(i.charCodeAt(e)){case 32:case 9:return!0;default:return!1}}function ug(i,e,t){return e[i]!==t[i]}function BO(i,e,t,n,o,r,s=!1){for(;e<t&&o<r;)i[e]===n[o]&&(s&&(QT[e]=o),e+=1),o+=1;return e===t}var XT;(t=>{t.Default=[-100,0];function e(n){return!n||n.length===2&&n[0]===-100&&n[1]===0}t.isDefault=e})(XT||={});var yy=class{constructor(e,t){this.firstMatchCanBeWeak=e;this.boostFullMatch=t}static default={boostFullMatch:!0,firstMatchCanBeWeak:!1}};function Ey(i,e,t,n,o,r,s=yy.default){let a=i.length>ys?ys:i.length,l=n.length>ys?ys:n.length;if(t>=a||r>=l||a-t>l-r||!BO(e,t,a,o,r,l,!0))return;WO(a,l,t,r,e,o);let c=1,u=1,p=t,h=r,m=[!1];for(c=1,p=t;p<a;c++,p++){let T=QT[p],_=vy[p],O=p+1<a?vy[p+1]:l;for(u=T-r+1,h=T;h<O;u++,h++){let M=Number.MIN_SAFE_INTEGER,U=!1;h<=_&&(M=UO(i,e,p,t,n,o,h,l,r,Ko[c-1][u-1]===0,m));let he=0;M!==Number.MAX_SAFE_INTEGER&&(U=!0,he=M+vs[c-1][u-1]);let Q=h>T,se=Q?vs[c][u-1]+(Ko[c][u-1]>0?-5:0):0,ne=h>T+1&&Ko[c][u-1]>0,V=ne?vs[c][u-2]+(Ko[c][u-2]>0?-5:0):0;if(ne&&(!Q||V>=se)&&(!U||V>=he))vs[c][u]=V,su[c][u]=3,Ko[c][u]=0;else if(Q&&(!U||se>=he))vs[c][u]=se,su[c][u]=2,Ko[c][u]=0;else if(U)vs[c][u]=he,su[c][u]=1,Ko[c][u]=Ko[c-1][u-1]+1;else throw new Error("not possible")}}if(NO&&FO(i,t,n,r),!m[0]&&!s.firstMatchCanBeWeak)return;c--,u--;let v=[vs[c][u],r],f=0,b=0;for(;c>=1;){let T=u;do{let _=su[c][T];if(_===3)T=T-2;else if(_===2)T=T-1;else break}while(T>=1);f>1&&e[t+c-1]===o[r+u-1]&&!ug(T+r-1,n,o)&&f+1>Ko[c][T]&&(T=u),T===u?f++:f=1,b||(b=T),c--,u=T-1,v.push(u)}l-r===a&&s.boostFullMatch&&(v[0]+=2);let E=b-a;return v[0]-=E,v}function WO(i,e,t,n,o,r){let s=i-1,a=e-1;for(;s>=t&&a>=n;)o[s]===r[a]&&(vy[s]=a,s--),a--}function UO(i,e,t,n,o,r,s,a,l,c,u){if(e[t]!==r[s])return Number.MIN_SAFE_INTEGER;let p=1,h=!1;return s===t-n?p=i[t]===o[s]?7:5:ug(s,o,r)&&(s===0||!ug(s-1,o,r))?(p=i[t]===o[s]?7:5,h=!0):cg(r,s)&&(s===0||!cg(r,s-1))?p=5:(cg(r,s-1)||UT(r,s-1))&&(p=5,h=!0),p>1&&t===n&&(u[0]=!0),h||(h=ug(s,o,r)||cg(r,s-1)||UT(r,s-1)),t===n?s>l&&(p-=h?3:5):c?p+=h?2:0:p+=h?0:1,s+1===a&&(p-=h?3:5),p}var Cy=new RegExp(`\\$\\(${Fe.iconNameExpression}(?:${Fe.iconModifierExpression})?\\)`,"g"),VO=new RegExp(`(\\\\)?${Cy.source}`,"g");function JT(i){return i.replace(VO,(e,t)=>t?e:`\\${e}`)}var zO=new RegExp(`\\\\${Cy.source}`,"g");function ZT(i){return i.replace(zO,e=>`\\${e}`)}var e9=new RegExp(`(\\s)?(\\\\)?${Cy.source}(\\s)?`,"g");var t9=new RegExp(`\\$\\(${Fe.iconNameCharacter}+\\)`,"g");var wy=class{value;isTrusted;supportThemeIcons;supportHtml;baseUri;constructor(e="",t=!1){if(this.value=e,typeof this.value!="string")throw sa("value");typeof t=="boolean"?(this.isTrusted=t,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=t.isTrusted??void 0,this.supportThemeIcons=t.supportThemeIcons??!1,this.supportHtml=t.supportHtml??!1)}appendText(e,t=0){return this.value+=HO(this.supportThemeIcons?JT(e):e).replace(/([ \t]+)/g,(n,o)=>"&nbsp;".repeat(o.length)).replace(/\>/gm,"\\>").replace(/\n/g,t===1?`\\
`:`

`),this}appendMarkdown(e){return this.value+=e,this}appendCodeblock(e,t){return this.value+=`
${KO(t,e)}
`,this}appendLink(e,t,n){return this.value+="[",this.value+=this._escape(t,"]"),this.value+="](",this.value+=this._escape(String(e),")"),n&&(this.value+=` "${this._escape(this._escape(n,'"'),")")}"`),this.value+=")",this}_escape(e,t){let n=new RegExp(pn(t),"g");return e.replace(n,(o,r)=>e.charAt(r-1)!=="\\"?`\\${o}`:o)}};function pg(i){return i instanceof wy?!0:i&&typeof i=="object"?typeof i.value=="string"&&(typeof i.isTrusted=="boolean"||typeof i.isTrusted=="object"||i.isTrusted===void 0)&&(typeof i.supportThemeIcons=="boolean"||i.supportThemeIcons===void 0):!1}function ek(i,e){return i===e?!0:!i||!e?!1:i.value===e.value&&i.isTrusted===e.isTrusted&&i.supportThemeIcons===e.supportThemeIcons&&i.supportHtml===e.supportHtml&&(i.baseUri===e.baseUri||!!i.baseUri&&!!e.baseUri&&ei(N.from(i.baseUri),N.from(e.baseUri)))}function HO(i){return i.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function KO(i,e){let t=i.match(/^`+/gm)?.reduce((o,r)=>o.length>r.length?o:r).length??0,n=t>=3?t+1:3;return[`${"`".repeat(n)}${e}`,i,`${"`".repeat(n)}`].join(`
`)}function lu(i){return i.replace(/"/g,"&quot;")}function hg(i){return i&&i.replace(/\\([\\`*_{}[\]()#+\-.!~])/g,"$1")}function tk(i){let e=[],t=i.split("|").map(o=>o.trim());i=t[0];let n=t[1];if(n){let o=/height=(\d+)/.exec(n),r=/width=(\d+)/.exec(n),s=o?o[1]:"",a=r?r[1]:"",l=isFinite(parseInt(a)),c=isFinite(parseInt(s));l&&e.push(`width="${a}"`),c&&e.push(`height="${s}"`)}return{href:i,dimensions:e}}var GO=()=>({get delay(){return-1},dispose:()=>{},showHover:()=>{}}),nk=GO,qO=new un(()=>nk("mouse",!1)),$O=new un(()=>nk("element",!1));function Ai(i){return i==="element"?$O.value:qO.value}var Da=class extends A{_onWillRun=this._register(new C);onWillRun=this._onWillRun.event;_onDidRun=this._register(new C);onDidRun=this._onDidRun.event;async run(e,t){if(!e.enabled)return;this._onWillRun.fire({action:e});let n;try{await this.runAction(e,t)}catch(o){n=o}this._onDidRun.fire({action:e,error:n})}async runAction(e,t){await e.run(t)}};function Mr(i){return{id:i.id,label:i.label,tooltip:i.tooltip??i.label,class:i.class,enabled:i.enabled??!0,checked:i.checked,run:async(...e)=>i.run(...e)}}var Ln;(o=>{function i(r,s){if(r.start>=s.end||s.start>=r.end)return{start:0,end:0};let a=Math.max(r.start,s.start),l=Math.min(r.end,s.end);return l-a<=0?{start:0,end:0}:{start:a,end:l}}o.intersect=i;function e(r){return r.end-r.start<=0}o.isEmpty=e;function t(r,s){return!e(i(r,s))}o.intersects=t;function n(r,s){let a=[],l={start:r.start,end:Math.min(s.start,r.end)},c={start:Math.max(s.end,r.start),end:r.end};return e(l)||a.push(l),e(c)||a.push(c),a}o.relativeComplement=n})(Ln||={});var We=class{emitter;get event(){return this.emitter.event}constructor(e,t,n){let o=r=>this.emitter.fire(r);this.emitter=new C({onWillAddFirstListener:()=>e.addEventListener(t,o,n),onDidRemoveLastListener:()=>e.removeEventListener(t,o,n)})}dispose(){this.emitter.dispose()}};var lk=2e4,QO,ky,dk;function du(i){QO&&(ky.textContent!==i?(zn(dk),ck(ky,i)):(zn(ky),ck(dk,i)))}function ck(i,e){zn(i),e.length>lk&&(e=e.substr(0,lk)),i.textContent=e,i.style.visibility="hidden",i.style.visibility="visible"}var gg=class{constructor(e){this.spliceables=e}splice(e,t,n){this.spliceables.forEach(o=>o.splice(e,t,n))}};function xs(i,e){let t=Math.pow(10,e);return Math.round(i*t)/t}var Te=class{_rgbaBrand=void 0;r;g;b;a;constructor(e,t,n,o=1){this.r=Math.min(255,Math.max(0,e))|0,this.g=Math.min(255,Math.max(0,t))|0,this.b=Math.min(255,Math.max(0,n))|0,this.a=xs(Math.max(Math.min(1,o),0),3)}static equals(e,t){return e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a}},Is=class i{_hslaBrand=void 0;h;s;l;a;constructor(e,t,n,o){this.h=Math.max(Math.min(360,e),0)|0,this.s=xs(Math.max(Math.min(1,t),0),3),this.l=xs(Math.max(Math.min(1,n),0),3),this.a=xs(Math.max(Math.min(1,o),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.l===t.l&&e.a===t.a}static fromRGBA(e){let t=e.r/255,n=e.g/255,o=e.b/255,r=e.a,s=Math.max(t,n,o),a=Math.min(t,n,o),l=0,c=0,u=(a+s)/2,p=s-a;if(p>0){switch(c=Math.min(u<=.5?p/(2*u):p/(2-2*u),1),s){case t:l=(n-o)/p+(n<o?6:0);break;case n:l=(o-t)/p+2;break;case o:l=(t-n)/p+4;break}l*=60,l=Math.round(l)}return new i(l,c,u,r)}static _hue2rgb(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}static toRGBA(e){let t=e.h/360,{s:n,l:o,a:r}=e,s,a,l;if(n===0)s=a=l=o;else{let c=o<.5?o*(1+n):o+n-o*n,u=2*o-c;s=i._hue2rgb(u,c,t+1/3),a=i._hue2rgb(u,c,t),l=i._hue2rgb(u,c,t-1/3)}return new Te(Math.round(s*255),Math.round(a*255),Math.round(l*255),r)}},Gl=class i{_hsvaBrand=void 0;h;s;v;a;constructor(e,t,n,o){this.h=Math.max(Math.min(360,e),0)|0,this.s=xs(Math.max(Math.min(1,t),0),3),this.v=xs(Math.max(Math.min(1,n),0),3),this.a=xs(Math.max(Math.min(1,o),0),3)}static equals(e,t){return e.h===t.h&&e.s===t.s&&e.v===t.v&&e.a===t.a}static fromRGBA(e){let t=e.r/255,n=e.g/255,o=e.b/255,r=Math.max(t,n,o),s=Math.min(t,n,o),a=r-s,l=r===0?0:a/r,c;return a===0?c=0:r===t?c=((n-o)/a%6+6)%6:r===n?c=(o-t)/a+2:c=(t-n)/a+4,new i(Math.round(c*60),l,r,e.a)}static toRGBA(e){let{h:t,s:n,v:o,a:r}=e,s=o*n,a=s*(1-Math.abs(t/60%2-1)),l=o-s,[c,u,p]=[0,0,0];return t<60?(c=s,u=a):t<120?(c=a,u=s):t<180?(u=s,p=a):t<240?(u=a,p=s):t<300?(c=a,p=s):t<=360&&(c=s,p=a),c=Math.round((c+l)*255),u=Math.round((u+l)*255),p=Math.round((p+l)*255),new Te(c,u,p,r)}},B=class i{static fromHex(e){return i.Format.CSS.parseHex(e)||i.red}static equals(e,t){return!e&&!t?!0:!e||!t?!1:e.equals(t)}rgba;_hsla;get hsla(){return this._hsla?this._hsla:Is.fromRGBA(this.rgba)}_hsva;get hsva(){return this._hsva?this._hsva:Gl.fromRGBA(this.rgba)}constructor(e){if(e)if(e instanceof Te)this.rgba=e;else if(e instanceof Is)this._hsla=e,this.rgba=Is.toRGBA(e);else if(e instanceof Gl)this._hsva=e,this.rgba=Gl.toRGBA(e);else throw new Error("Invalid color ctor argument");else throw new Error("Color needs a value")}equals(e){return!!e&&Te.equals(this.rgba,e.rgba)&&Is.equals(this.hsla,e.hsla)&&Gl.equals(this.hsva,e.hsva)}getRelativeLuminance(){let e=i._relativeLuminanceForComponent(this.rgba.r),t=i._relativeLuminanceForComponent(this.rgba.g),n=i._relativeLuminanceForComponent(this.rgba.b),o=.2126*e+.7152*t+.0722*n;return xs(o,4)}static _relativeLuminanceForComponent(e){let t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}getContrastRatio(e){let t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)}isDarker(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3<128}isLighter(){return(this.rgba.r*299+this.rgba.g*587+this.rgba.b*114)/1e3>=128}isLighterThan(e){let t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t>n}isDarkerThan(e){let t=this.getRelativeLuminance(),n=e.getRelativeLuminance();return t<n}lighten(e){return new i(new Is(this.hsla.h,this.hsla.s,this.hsla.l+this.hsla.l*e,this.hsla.a))}darken(e){return new i(new Is(this.hsla.h,this.hsla.s,this.hsla.l-this.hsla.l*e,this.hsla.a))}transparent(e){let{r:t,g:n,b:o,a:r}=this.rgba;return new i(new Te(t,n,o,r*e))}isTransparent(){return this.rgba.a===0}isOpaque(){return this.rgba.a===1}opposite(){return new i(new Te(255-this.rgba.r,255-this.rgba.g,255-this.rgba.b,this.rgba.a))}blend(e){let t=e.rgba,n=this.rgba.a,o=t.a,r=n+o*(1-n);if(r<1e-6)return i.transparent;let s=this.rgba.r*n/r+t.r*o*(1-n)/r,a=this.rgba.g*n/r+t.g*o*(1-n)/r,l=this.rgba.b*n/r+t.b*o*(1-n)/r;return new i(new Te(s,a,l,r))}makeOpaque(e){if(this.isOpaque()||e.rgba.a!==1)return this;let{r:t,g:n,b:o,a:r}=this.rgba;return new i(new Te(e.rgba.r-r*(e.rgba.r-t),e.rgba.g-r*(e.rgba.g-n),e.rgba.b-r*(e.rgba.b-o),1))}flatten(...e){let t=e.reduceRight((n,o)=>i._flatten(o,n));return i._flatten(this,t)}static _flatten(e,t){let n=1-e.rgba.a;return new i(new Te(n*t.rgba.r+e.rgba.a*e.rgba.r,n*t.rgba.g+e.rgba.a*e.rgba.g,n*t.rgba.b+e.rgba.a*e.rgba.b))}_toString;toString(){return this._toString||(this._toString=i.Format.CSS.format(this)),this._toString}static getLighterColor(e,t,n){if(e.isLighterThan(t))return e;n=n||.5;let o=e.getRelativeLuminance(),r=t.getRelativeLuminance();return n=n*(r-o)/r,e.lighten(n)}static getDarkerColor(e,t,n){if(e.isDarkerThan(t))return e;n=n||.5;let o=e.getRelativeLuminance(),r=t.getRelativeLuminance();return n=n*(o-r)/o,e.darken(n)}static white=new i(new Te(255,255,255,1));static black=new i(new Te(0,0,0,1));static red=new i(new Te(255,0,0,1));static blue=new i(new Te(0,0,255,1));static green=new i(new Te(0,255,0,1));static cyan=new i(new Te(0,255,255,1));static lightgrey=new i(new Te(211,211,211,1));static transparent=new i(new Te(0,0,0,0))};(e=>{let i;(n=>{let t;(v=>{function o(f){return f.rgba.a===1?`rgb(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b})`:e.Format.CSS.formatRGBA(f)}v.formatRGB=o;function r(f){return`rgba(${f.rgba.r}, ${f.rgba.g}, ${f.rgba.b}, ${+f.rgba.a.toFixed(2)})`}v.formatRGBA=r;function s(f){return f.hsla.a===1?`hsl(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%)`:e.Format.CSS.formatHSLA(f)}v.formatHSL=s;function a(f){return`hsla(${f.hsla.h}, ${(f.hsla.s*100).toFixed(2)}%, ${(f.hsla.l*100).toFixed(2)}%, ${f.hsla.a.toFixed(2)})`}v.formatHSLA=a;function l(f){let b=f.toString(16);return b.length!==2?"0"+b:b}function c(f){return`#${l(f.rgba.r)}${l(f.rgba.g)}${l(f.rgba.b)}`}v.formatHex=c;function u(f,b=!1){return b&&f.rgba.a===1?e.Format.CSS.formatHex(f):`#${l(f.rgba.r)}${l(f.rgba.g)}${l(f.rgba.b)}${l(Math.round(f.rgba.a*255))}`}v.formatHexA=u;function p(f){return f.isOpaque()?e.Format.CSS.formatHex(f):e.Format.CSS.formatRGBA(f)}v.format=p;function h(f){let b=f.length;if(b===0||f.charCodeAt(0)!==35)return null;if(b===7){let E=16*m(f.charCodeAt(1))+m(f.charCodeAt(2)),T=16*m(f.charCodeAt(3))+m(f.charCodeAt(4)),_=16*m(f.charCodeAt(5))+m(f.charCodeAt(6));return new e(new Te(E,T,_,1))}if(b===9){let E=16*m(f.charCodeAt(1))+m(f.charCodeAt(2)),T=16*m(f.charCodeAt(3))+m(f.charCodeAt(4)),_=16*m(f.charCodeAt(5))+m(f.charCodeAt(6)),O=16*m(f.charCodeAt(7))+m(f.charCodeAt(8));return new e(new Te(E,T,_,O/255))}if(b===4){let E=m(f.charCodeAt(1)),T=m(f.charCodeAt(2)),_=m(f.charCodeAt(3));return new e(new Te(16*E+E,16*T+T,16*_+_))}if(b===5){let E=m(f.charCodeAt(1)),T=m(f.charCodeAt(2)),_=m(f.charCodeAt(3)),O=m(f.charCodeAt(4));return new e(new Te(16*E+E,16*T+T,16*_+_,(16*O+O)/255))}return null}v.parseHex=h;function m(f){switch(f){case 48:return 0;case 49:return 1;case 50:return 2;case 51:return 3;case 52:return 4;case 53:return 5;case 54:return 6;case 55:return 7;case 56:return 8;case 57:return 9;case 97:return 10;case 65:return 10;case 98:return 11;case 66:return 11;case 99:return 12;case 67:return 12;case 100:return 13;case 68:return 13;case 101:return 14;case 69:return 14;case 102:return 15;case 70:return 15}return 0}})(t=n.CSS||={})})(i=e.Format||={})})(B||={});function uk(i,e){let t=[];for(let n of e){if(i.start>=n.range.end)continue;if(i.end<n.range.start)break;let o=Ln.intersect(i,n.range);Ln.isEmpty(o)||t.push({range:o,size:n.size})}return t}function fg({start:i,end:e},t){return{start:i+t,end:e+t}}function JO(i){let e=[],t=null;for(let n of i){let o=n.range.start,r=n.range.end,s=n.size;if(t&&s===t.size){t.range.end=r;continue}t={range:{start:o,end:r},size:s},e.push(t)}return e}function ZO(...i){return JO(i.reduce((e,t)=>e.concat(t),[]))}var mg=class{groups=[];_size=0;_paddingTop=0;get paddingTop(){return this._paddingTop}set paddingTop(e){this._size=this._size+e-this._paddingTop,this._paddingTop=e}constructor(e){this._paddingTop=e??0,this._size=this._paddingTop}splice(e,t,n=[]){let o=n.length-t,r=uk({start:0,end:e},this.groups),s=uk({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map(l=>({range:fg(l.range,o),size:l.size})),a=n.map((l,c)=>({range:{start:e+c,end:e+c+1},size:l.size}));this.groups=ZO(r,a,s),this._size=this._paddingTop+this.groups.reduce((l,c)=>l+c.size*(c.range.end-c.range.start),0)}get count(){let e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;if(e<this._paddingTop)return 0;let t=0,n=this._paddingTop;for(let o of this.groups){let r=o.range.end-o.range.start,s=n+r*o.size;if(e<s)return t+Math.floor((e-n)/o.size);t+=r,n=s}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,n=0;for(let o of this.groups){let r=o.range.end-o.range.start,s=n+r;if(e<s)return this._paddingTop+t+(e-n)*o.size;t+=r*o.size,n=s}return-1}};var bg=class{constructor(e){this.renderers=e}cache=new Map;transactionNodesPendingRemoval=new Set;inTransaction=!1;alloc(e){let t=this.getTemplateCache(e).pop(),n=!1;if(t)n=this.transactionNodesPendingRemoval.has(t.domNode),n&&this.transactionNodesPendingRemoval.delete(t.domNode);else{let o=Y(".monaco-list-row"),s=this.getRenderer(e).renderTemplate(o);t={domNode:o,templateId:e,templateData:s}}return{row:t,isReusingConnectedDomNode:n}}release(e){e&&this.releaseRow(e)}transact(e){if(this.inTransaction)throw new Error("Already in transaction");this.inTransaction=!0;try{e()}finally{for(let t of this.transactionNodesPendingRemoval)this.doRemoveNode(t);this.transactionNodesPendingRemoval.clear(),this.inTransaction=!1}}releaseRow(e){let{domNode:t,templateId:n}=e;t&&(this.inTransaction?this.transactionNodesPendingRemoval.add(t):this.doRemoveNode(t)),this.getTemplateCache(n).push(e)}doRemoveNode(e){e.classList.remove("scrolling"),e.remove()}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach((e,t)=>{for(let n of e)this.getRenderer(t).disposeTemplate(n.templateData),n.templateData=null}),this.cache.clear(),this.transactionNodesPendingRemoval.clear()}getRenderer(e){let t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}};var _a={CurrentDragAndDropData:void 0};var Go={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(i){return[i]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0},vg=class{elements;_context;get context(){return this._context}set context(e){this._context=e}constructor(e){this.elements=e}update(){}getData(){return this.elements}},Dy=class{elements;constructor(e){this.elements=e}update(){}getData(){return this.elements}},_y=class{types;files;constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){let n=e.files.item(t);n&&(n.size||n.type)&&this.files.push(n)}}}getData(){return{types:this.types,files:this.files}}};function eA(i,e){return Array.isArray(i)&&Array.isArray(e)?Bt(i,e):i===e}var Ly=class{getSetSize;getPosInSet;getRole;isChecked;constructor(e){e?.getSetSize?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(t,n,o)=>o,e?.getPosInSet?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(t,n)=>n+1,e?.getRole?this.getRole=e.getRole.bind(e):this.getRole=t=>"listitem",e?.isChecked?this.isChecked=e.isChecked.bind(e):this.isChecked=t=>{}}},bi=class bi{constructor(e,t,n,o=Go){this.virtualDelegate=t;if(o.horizontalScrolling&&o.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=this.createRangeMap(o.paddingTop??0);for(let s of n)this.renderers.set(s.templateId,s);this.cache=this.disposables.add(new bg(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support",typeof o.mouseSupport=="boolean"?o.mouseSupport:!0),this._horizontalScrolling=o.horizontalScrolling??Go.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.paddingBottom=typeof o.paddingBottom>"u"?0:o.paddingBottom,this.accessibilityProvider=new Ly(o.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows",(o.transformOptimization??Go.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)",this.rowsContainer.style.overflow="hidden",this.rowsContainer.style.contain="strict"),this.disposables.add(_n.addTarget(this.rowsContainer)),this.scrollable=this.disposables.add(new ka({forceIntegerValues:!0,smoothScrollDuration:o.smoothScrolling??!1?125:0,scheduleAtNextAnimationFrame:s=>gi(Pe(this.domNode),s)})),this.scrollableElement=this.disposables.add(new ru(this.rowsContainer,{alwaysConsumeMouseWheel:o.alwaysConsumeMouseWheel??Go.alwaysConsumeMouseWheel,horizontal:1,vertical:o.verticalScrollMode??Go.verticalScrollMode,useShadows:o.useShadows??Go.useShadows,mouseWheelScrollSensitivity:o.mouseWheelScrollSensitivity,fastScrollSensitivity:o.fastScrollSensitivity,scrollByPage:o.scrollByPage},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add(Z(this.rowsContainer,Dt.Change,s=>this.onTouchChange(s))),this.disposables.add(Z(this.scrollableElement.getDomNode(),"scroll",s=>s.target.scrollTop=0)),this.disposables.add(Z(this.domNode,"dragover",s=>this.onDragOver(this.toDragEvent(s)))),this.disposables.add(Z(this.domNode,"drop",s=>this.onDrop(this.toDragEvent(s)))),this.disposables.add(Z(this.domNode,"dragleave",s=>this.onDragLeave(this.toDragEvent(s)))),this.disposables.add(Z(this.domNode,"dragend",s=>this.onDragEnd(s))),this.setRowLineHeight=o.setRowLineHeight??Go.setRowLineHeight,this.setRowHeight=o.setRowHeight??Go.setRowHeight,this.supportDynamicHeights=o.supportDynamicHeights??Go.supportDynamicHeights,this.dnd=o.dnd??this.disposables.add(Go.dnd),this.layout(o.initialSize?.height,o.initialSize?.width)}static InstanceCount=0;domId=`list_id_${++bi.InstanceCount}`;domNode;items;itemId;rangeMap;cache;renderers=new Map;lastRenderTop;lastRenderHeight;renderWidth=0;rowsContainer;scrollable;scrollableElement;_scrollHeight=0;scrollableElementUpdateDisposable=null;scrollableElementWidthDelayer=new Vo(50);splicing=!1;dragOverAnimationDisposable;dragOverAnimationStopDisposable=A.None;dragOverMouseY=0;setRowLineHeight;setRowHeight;supportDynamicHeights;paddingBottom;accessibilityProvider;scrollWidth;dnd;canDrop=!1;currentDragData;currentDragFeedback;currentDragFeedbackPosition;currentDragFeedbackDisposable=A.None;onDragLeaveTimeout=A.None;disposables=new re;_onDidChangeContentHeight=new C;_onDidChangeContentWidth=new C;onDidChangeContentHeight=ee.latch(this._onDidChangeContentHeight.event,void 0,this.disposables);onDidChangeContentWidth=ee.latch(this._onDidChangeContentWidth.event,void 0,this.disposables);get contentHeight(){return this.rangeMap.size}get contentWidth(){return this.scrollWidth??0}get onDidScroll(){return this.scrollableElement.onScroll}get onWillScroll(){return this.scrollableElement.onWillScroll}get containerDomNode(){return this.rowsContainer}get scrollableElementDomNode(){return this.scrollableElement.getDomNode()}_horizontalScrolling=!1;get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(let t of this.items)this.measureItemWidth(t);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:Xh(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){e.paddingBottom!==void 0&&(this.paddingBottom=e.paddingBottom,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),e.smoothScrolling!==void 0&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),e.horizontalScrolling!==void 0&&(this.horizontalScrolling=e.horizontalScrolling);let t;if(e.scrollByPage!==void 0&&(t={...t??{},scrollByPage:e.scrollByPage}),e.mouseWheelScrollSensitivity!==void 0&&(t={...t??{},mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),e.fastScrollSensitivity!==void 0&&(t={...t??{},fastScrollSensitivity:e.fastScrollSensitivity}),t&&this.scrollableElement.updateOptions(t),e.paddingTop!==void 0&&e.paddingTop!==this.rangeMap.paddingTop){let n=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),o=e.paddingTop-this.rangeMap.paddingTop;this.rangeMap.paddingTop=e.paddingTop,this.render(n,Math.max(0,this.lastRenderTop+o),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}}delegateScrollFromMouseWheelEvent(e){this.scrollableElement.delegateScrollFromMouseWheelEvent(e)}delegateVerticalScrollbarPointerDown(e){this.scrollableElement.delegateVerticalScrollbarPointerDown(e)}updateElementHeight(e,t,n){if(e<0||e>=this.items.length)return;let o=this.items[e].size;if(typeof t>"u"){if(!this.supportDynamicHeights){console.warn("Dynamic heights not supported",new Error().stack);return}this.items[e].lastDynamicHeightWidth=void 0,t=o+this.probeDynamicHeight(e)}if(o===t)return;let r=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),s=0;e<r.start||n!==null&&n>e&&n<r.end?s=t-o:s=0,this.rangeMap.splice(e,1,[{size:t}]),this.items[e].size=t,this.render(r,Math.max(0,this.lastRenderTop+s),this.lastRenderHeight,void 0,void 0,!0),this.setScrollTop(this.lastRenderTop),this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.lastRenderTop,this.lastRenderHeight)}createRangeMap(e){return new mg(e)}splice(e,t,n=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,n)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,n=[]){let o=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),r={start:e,end:e+t},s=Ln.intersect(o,r),a=new Map;for(let M=s.end-1;M>=s.start;M--){let U=this.items[M];if(U.dragStartDisposable.dispose(),U.checkedDisposable.dispose(),U.row){let he=a.get(U.templateId);he||(he=[],a.set(U.templateId,he));let Q=this.renderers.get(U.templateId);Q&&Q.disposeElement&&Q.disposeElement(U.element,M,U.row.templateData,U.size),he.unshift(U.row)}U.row=null,U.stale=!0}let l={start:e+t,end:this.items.length},c=Ln.intersect(l,o),u=Ln.relativeComplement(l,o),p=n.map(M=>({id:String(this.itemId++),element:M,templateId:this.virtualDelegate.getTemplateId(M),size:this.virtualDelegate.getHeight(M),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(M),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:A.None,checkedDisposable:A.None,stale:!1})),h;e===0&&t>=this.items.length?(this.rangeMap=this.createRangeMap(this.rangeMap.paddingTop),this.rangeMap.splice(0,0,p),h=this.items,this.items=p):(this.rangeMap.splice(e,t,p),h=this.items.splice(e,t,...p));let m=n.length-t,v=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),f=fg(c,m),b=Ln.intersect(v,f);for(let M=b.start;M<b.end;M++)this.updateItemInDOM(this.items[M],M);let E=Ln.relativeComplement(f,v);for(let M of E)for(let U=M.start;U<M.end;U++)this.removeItemFromDOM(U);let T=u.map(M=>fg(M,m)),O=[{start:e,end:e+n.length},...T].map(M=>Ln.intersect(v,M)).reverse();for(let M of O)for(let U=M.end-1;U>=M.start;U--){let he=this.items[U],se=a.get(he.templateId)?.pop();this.insertItemInDOM(U,se)}for(let M of a.values())for(let U of M)this.cache.release(U);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),h.map(M=>M.element)}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=gi(Pe(this.domNode),()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null}))}eventuallyUpdateScrollWidth(){if(!this.horizontalScrolling){this.scrollableElementWidthDelayer.cancel();return}this.scrollableElementWidthDelayer.trigger(()=>this.updateScrollWidth())}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(let t of this.items)typeof t.width<"u"&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:e===0?0:e+10}),this._onDidChangeContentWidth.fire(this.scrollWidth)}updateWidth(e){if(!this.horizontalScrolling||typeof this.scrollWidth>"u")return;let t=this.items[e];this.measureItemWidth(t),typeof t.width<"u"&&t.width>this.scrollWidth&&(this.scrollWidth=t.width,this.scrollableElement.setScrollDimensions({scrollWidth:this.scrollWidth+10}),this._onDidChangeContentWidth.fire(this.scrollWidth))}rerender(){if(this.supportDynamicHeights){for(let e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}get firstVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).start}get firstMostlyVisibleIndex(){let e=this.firstVisibleIndex,t=this.rangeMap.positionAt(e),n=this.rangeMap.positionAt(e+1);return n!==-1&&(n-t)/2+t<this.scrollTop?e+1:e}get lastVisibleIndex(){return this.getRenderRange(this.lastRenderTop,this.lastRenderHeight).end-1}element(e){return this.items[e].element}indexOf(e){return this.items.findIndex(t=>t.element===e)}domElement(e){let t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){let n={height:typeof e=="number"?e:ET(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,n.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(n),typeof t<"u"&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:typeof t=="number"?t:Xh(this.domNode)})}render(e,t,n,o,r,s=!1){let a=this.getRenderRange(t,n),l=Ln.relativeComplement(a,e).reverse(),c=Ln.relativeComplement(e,a);if(s){let u=Ln.intersect(e,a);for(let p=u.start;p<u.end;p++)this.updateItemInDOM(this.items[p],p)}this.cache.transact(()=>{for(let u of c)for(let p=u.start;p<u.end;p++)this.removeItemFromDOM(p);for(let u of l)for(let p=u.end-1;p>=u.start;p--)this.insertItemInDOM(p)}),o!==void 0&&(this.rowsContainer.style.left=`-${o}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&r!==void 0&&(this.rowsContainer.style.width=`${Math.max(r,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=n}insertItemInDOM(e,t){let n=this.items[e];if(!n.row)if(t)n.row=t,n.stale=!0;else{let l=this.cache.alloc(n.templateId);n.row=l.row,n.stale||=l.isReusingConnectedDomNode}let o=this.accessibilityProvider.getRole(n.element)||"listitem";n.row.domNode.setAttribute("role",o);let r=this.accessibilityProvider.isChecked(n.element);if(typeof r=="boolean")n.row.domNode.setAttribute("aria-checked",String(!!r));else if(r){let l=c=>n.row.domNode.setAttribute("aria-checked",String(!!c));l(r.value),n.checkedDisposable=r.onDidChange(()=>l(r.value))}if(n.stale||!n.row.domNode.parentElement){let l=this.items.at(e+1)?.row?.domNode??null;(n.row.domNode.parentElement!==this.rowsContainer||n.row.domNode.nextElementSibling!==l)&&this.rowsContainer.insertBefore(n.row.domNode,l),n.stale=!1}this.updateItemInDOM(n,e);let s=this.renderers.get(n.templateId);if(!s)throw new Error(`No renderer found for template id ${n.templateId}`);s?.renderElement(n.element,e,n.row.templateData,n.size);let a=this.dnd.getDragURI(n.element);n.dragStartDisposable.dispose(),n.row.domNode.draggable=!!a,a&&(n.dragStartDisposable=Z(n.row.domNode,"dragstart",l=>this.onDragStart(n.element,a,l))),this.horizontalScrolling&&(this.measureItemWidth(n),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width="fit-content",e.width=Xh(e.row.domNode);let t=Pe(e.row.domNode).getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2===0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){let t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){let n=this.renderers.get(t.templateId);n&&n.disposeElement&&n.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}getScrollLeft(){return this.scrollableElement.getScrollPosition().scrollLeft}setScrollLeft(e){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollWidth:this.scrollWidth})),this.scrollableElement.setScrollPosition({scrollLeft:e})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.paddingBottom}get onMouseClick(){return ee.map(this.disposables.add(new We(this.domNode,"click")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDblClick(){return ee.map(this.disposables.add(new We(this.domNode,"dblclick")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMiddleClick(){return ee.filter(ee.map(this.disposables.add(new We(this.domNode,"auxclick")).event,e=>this.toMouseEvent(e),this.disposables),e=>e.browserEvent.button===1,this.disposables)}get onMouseUp(){return ee.map(this.disposables.add(new We(this.domNode,"mouseup")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseDown(){return ee.map(this.disposables.add(new We(this.domNode,"mousedown")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOver(){return ee.map(this.disposables.add(new We(this.domNode,"mouseover")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseMove(){return ee.map(this.disposables.add(new We(this.domNode,"mousemove")).event,e=>this.toMouseEvent(e),this.disposables)}get onMouseOut(){return ee.map(this.disposables.add(new We(this.domNode,"mouseout")).event,e=>this.toMouseEvent(e),this.disposables)}get onContextMenu(){return ee.any(ee.map(this.disposables.add(new We(this.domNode,"contextmenu")).event,e=>this.toMouseEvent(e),this.disposables),ee.map(this.disposables.add(new We(this.domNode,Dt.Contextmenu)).event,e=>this.toGestureEvent(e),this.disposables))}get onTouchStart(){return ee.map(this.disposables.add(new We(this.domNode,"touchstart")).event,e=>this.toTouchEvent(e),this.disposables)}get onTap(){return ee.map(this.disposables.add(new We(this.rowsContainer,Dt.Tap)).event,e=>this.toGestureEvent(e),this.disposables)}toMouseEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],o=n&&n.element;return{browserEvent:e,index:t,element:o}}toTouchEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],o=n&&n.element;return{browserEvent:e,index:t,element:o}}toGestureEvent(e){let t=this.getItemIndexFromEventTarget(e.initialTarget||null),n=typeof t>"u"?void 0:this.items[t],o=n&&n.element;return{browserEvent:e,index:t,element:o}}toDragEvent(e){let t=this.getItemIndexFromEventTarget(e.target||null),n=typeof t>"u"?void 0:this.items[t],o=n&&n.element,r=this.getTargetSector(e,t);return{browserEvent:e,index:t,element:o,sector:r}}onScroll(e){try{let t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(t){throw console.error("Got bad scroll event:",e),t}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,n){if(!n.dataTransfer)return;let o=this.dnd.getDragElements(e);if(n.dataTransfer.effectAllowed="copyMove",n.dataTransfer.setData(ly.TEXT,t),n.dataTransfer.setDragImage){let r;this.dnd.getDragLabel&&(r=this.dnd.getDragLabel(o,n)),typeof r>"u"&&(r=String(o.length));let s=Y(".monaco-drag-image");s.textContent=r,(c=>{for(;c&&!c.classList.contains("monaco-workbench");)c=c.parentElement;return c||this.domNode.ownerDocument})(this.domNode).appendChild(s),n.dataTransfer.setDragImage(s,-10,-10),setTimeout(()=>s.remove(),0)}this.domNode.classList.add("dragging"),this.currentDragData=new vg(o),_a.CurrentDragAndDropData=new Dy(o),this.dnd.onDragStart?.(this.currentDragData,n)}onDragOver(e){if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),_a.CurrentDragAndDropData&&_a.CurrentDragAndDropData.getData()==="vscode-ui"||(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer))return!1;if(!this.currentDragData)if(_a.CurrentDragAndDropData)this.currentDragData=_a.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new _y}let t=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.sector,e.browserEvent);if(this.canDrop=typeof t=="boolean"?t:t.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;e.browserEvent.dataTransfer.dropEffect=typeof t!="boolean"&&t.effect?.type===0?"copy":"move";let n;typeof t!="boolean"&&t.feedback?n=t.feedback:typeof e.index>"u"?n=[-1]:n=[e.index],n=io(n).filter(r=>r>=-1&&r<this.length).sort((r,s)=>r-s),n=n[0]===-1?[-1]:n;let o=typeof t!="boolean"&&t.effect&&t.effect.position?t.effect.position:"drop-target";if(eA(this.currentDragFeedback,n)&&this.currentDragFeedbackPosition===o)return!0;if(this.currentDragFeedback=n,this.currentDragFeedbackPosition=o,this.currentDragFeedbackDisposable.dispose(),n[0]===-1)this.domNode.classList.add(o),this.rowsContainer.classList.add(o),this.currentDragFeedbackDisposable=le(()=>{this.domNode.classList.remove(o),this.rowsContainer.classList.remove(o)});else{if(n.length>1&&o!=="drop-target")throw new Error("Can't use multiple feedbacks with position different than 'over'");o==="drop-target-after"&&n[0]<this.length-1&&(n[0]+=1,o="drop-target-before");for(let r of n){let s=this.items[r];s.dropTarget=!0,s.row?.domNode.classList.add(o)}this.currentDragFeedbackDisposable=le(()=>{for(let r of n){let s=this.items[r];s.dropTarget=!1,s.row?.domNode.classList.remove(o)}})}return!0}onDragLeave(e){this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=Wh(()=>this.clearDragOverFeedback(),100,this.disposables),this.currentDragData&&this.dnd.onDragLeave?.(this.currentDragData,e.element,e.index,e.browserEvent)}onDrop(e){if(!this.canDrop)return;let t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,_a.CurrentDragAndDropData=void 0,!(!t||!e.browserEvent.dataTransfer)&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.sector,e.browserEvent))}onDragEnd(e){this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.domNode.classList.remove("dragging"),this.currentDragData=void 0,_a.CurrentDragAndDropData=void 0,this.dnd.onDragEnd?.(e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackPosition=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=A.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){let t=iu(this.domNode).top;this.dragOverAnimationDisposable=AT(Pe(this.domNode),this.animateDragAndDropScrollTop.bind(this,t))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=Wh(()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)},1e3,this.disposables),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(this.dragOverMouseY===void 0)return;let t=this.dragOverMouseY-e,n=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>n&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-n))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getTargetSector(e,t){if(t===void 0)return;let n=e.offsetY/this.items[t].size,o=Math.floor(n/.25);return Wl(o,0,3)}getItemIndexFromEventTarget(e){let t=this.scrollableElement.getDomNode(),n=e;for(;(on(n)||RT(n))&&n!==this.rowsContainer&&t.contains(n);){let o=n.getAttribute("data-index");if(o){let r=Number(o);if(!isNaN(r))return r}n=n.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,n){let o=this.getRenderRange(e,t),r,s;e===this.elementTop(o.start)?(r=o.start,s=0):o.end-o.start>1&&(r=o.start+1,s=this.elementTop(r)-e);let a=0;for(;;){let l=this.getRenderRange(e,t),c=!1;for(let u=l.start;u<l.end;u++){let p=this.probeDynamicHeight(u);p!==0&&this.rangeMap.splice(u,1,[this.items[u]]),a+=p,c=c||p!==0}if(!c){a!==0&&this.eventuallyUpdateScrollDimensions();let u=Ln.relativeComplement(o,l);for(let h of u)for(let m=h.start;m<h.end;m++)this.items[m].row&&this.removeItemFromDOM(m);let p=Ln.relativeComplement(l,o).reverse();for(let h of p)for(let m=h.end-1;m>=h.start;m--)this.insertItemInDOM(m);for(let h=l.start;h<l.end;h++)this.items[h].row&&this.updateItemInDOM(this.items[h],h);if(typeof r=="number"){let h=this.scrollable.getFutureScrollPosition().scrollTop-e,m=this.elementTop(r)-s+h;this.setScrollTop(m,n)}this._onDidChangeContentHeight.fire(this.contentHeight);return}}}probeDynamicHeight(e){let t=this.items[e];if(this.virtualDelegate.getDynamicHeight){let s=this.virtualDelegate.getDynamicHeight(t.element);if(s!==null){let a=t.size;return t.size=s,t.lastDynamicHeightWidth=this.renderWidth,s-a}}if(!t.hasDynamicHeight||t.lastDynamicHeightWidth===this.renderWidth||this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(t.element))return 0;let n=t.size;if(t.row)return t.row.domNode.style.height="",t.size=t.row.domNode.offsetHeight,t.size===0&&!Ar(t.row.domNode,Pe(t.row.domNode).document.body)&&console.warn("Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!",new Error().stack),t.lastDynamicHeightWidth=this.renderWidth,t.size-n;let{row:o}=this.cache.alloc(t.templateId);o.domNode.style.height="",this.rowsContainer.appendChild(o.domNode);let r=this.renderers.get(t.templateId);if(!r)throw new Ge("Missing renderer for templateId: "+t.templateId);return r.renderElement(t.element,e,o.templateData,void 0),t.size=o.domNode.offsetHeight,r.disposeElement?.(t.element,e,o.templateData,void 0),this.virtualDelegate.setDynamicHeight?.(t.element,t.size),t.lastDynamicHeightWidth=this.renderWidth,o.domNode.remove(),this.cache.release(o),t.size-n}getElementDomId(e){return`${this.domId}_${e}`}dispose(){for(let e of this.items)if(e.dragStartDisposable.dispose(),e.checkedDisposable.dispose(),e.row){let t=this.renderers.get(e.row.templateId);t&&(t.disposeElement?.(e.element,-1,e.row.templateData,void 0),t.disposeTemplate(e.row.templateData))}this.items=[],this.domNode?.remove(),this.dragOverAnimationDisposable?.dispose(),this.disposables.dispose()}};L([q],bi.prototype,"onMouseClick",1),L([q],bi.prototype,"onMouseDblClick",1),L([q],bi.prototype,"onMouseMiddleClick",1),L([q],bi.prototype,"onMouseUp",1),L([q],bi.prototype,"onMouseDown",1),L([q],bi.prototype,"onMouseOver",1),L([q],bi.prototype,"onMouseMove",1),L([q],bi.prototype,"onMouseOut",1),L([q],bi.prototype,"onContextMenu",1),L([q],bi.prototype,"onTouchStart",1),L([q],bi.prototype,"onTap",1);var yg=bi;var qo=class extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}};var Ry=class{constructor(e){this.trait=e}renderedElements=[];get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,n){let o=this.renderedElements.findIndex(r=>r.templateData===n);if(o>=0){let r=this.renderedElements[o];this.trait.unrender(n),r.index=t}else{let r={index:t,templateData:n};this.renderedElements.push(r)}this.trait.renderIndex(t,n)}splice(e,t,n){let o=[];for(let r of this.renderedElements)r.index<e?o.push(r):r.index>=e+t&&o.push({index:r.index+n-t,templateData:r.templateData});this.renderedElements=o}renderIndexes(e){for(let{index:t,templateData:n}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,n)}disposeTemplate(e){let t=this.renderedElements.findIndex(n=>n.templateData===e);t<0||this.renderedElements.splice(t,1)}},ql=class{constructor(e){this._trait=e}indexes=[];sortedIndexes=[];_onChange=new C;onChange=this._onChange.event;get name(){return this._trait}get renderer(){return new Ry(this)}splice(e,t,n){let o=n.length-t,r=e+t,s=[],a=0;for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]<e;)s.push(this.sortedIndexes[a++]);for(let l=0;l<n.length;l++)n[l]&&s.push(l+e);for(;a<this.sortedIndexes.length&&this.sortedIndexes[a]>=r;)s.push(this.sortedIndexes[a++]+o);this.renderer.splice(e,t,n.length),this._set(s,s)}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(hk),t)}_set(e,t,n){let o=this.indexes,r=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;let s=Ny(r,e);return this.renderer.renderIndexes(s),this._onChange.fire({indexes:e,browserEvent:n}),o}get(){return this.indexes}contains(e){return FC(this.sortedIndexes,e,hk)>=0}dispose(){ft(this._onChange)}};L([q],ql.prototype,"renderer",1);var Py=class extends ql{constructor(t){super("selected");this.setAriaSelected=t}renderIndex(t,n){super.renderIndex(t,n),this.setAriaSelected&&(this.contains(t)?n.setAttribute("aria-selected","true"):n.setAttribute("aria-selected","false"))}},uu=class{constructor(e,t,n){this.trait=e;this.view=t;this.identityProvider=n}splice(e,t,n){if(!this.identityProvider)return this.trait.splice(e,t,new Array(n.length).fill(!1));let o=this.trait.get().map(a=>this.identityProvider.getId(this.view.element(a)).toString());if(o.length===0)return this.trait.splice(e,t,new Array(n.length).fill(!1));let r=new Set(o),s=n.map(a=>r.has(this.identityProvider.getId(a).toString()));this.trait.splice(e,t,s)}};function gk(i,e){return i.classList.contains(e)?!0:i.classList.contains("monaco-list")||!i.parentElement?!1:gk(i.parentElement,e)}function cu(i){return gk(i,"monaco-editor")}var Ig=class{constructor(e,t,n){this.list=e;this.view=t;this.multipleSelectionSupport=n.multipleSelectionSupport,this.disposables.add(this.onKeyDown(o=>{switch(o.keyCode){case 3:return this.onEnter(o);case 16:return this.onUpArrow(o);case 18:return this.onDownArrow(o);case 11:return this.onPageUpArrow(o);case 12:return this.onPageDownArrow(o);case 9:return this.onEscape(o);case 31:this.multipleSelectionSupport&&(Se?o.metaKey:o.ctrlKey)&&this.onCtrlA(o)}}))}disposables=new re;multipleSelectionDisposables=new re;multipleSelectionSupport;get onKeyDown(){return ee.chain(this.disposables.add(new We(this.view.domNode,"keydown")).event,e=>e.filter(t=>!fs(t.target)).map(t=>new ht(t)))}updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionSupport=e.multipleSelectionSupport)}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);let t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(ul(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}};L([q],Ig.prototype,"onKeyDown",1);var iA=new class{mightProducePrintableCharacter(i){return i.ctrlKey||i.metaKey||i.altKey?!1:i.keyCode>=31&&i.keyCode<=56||i.keyCode>=21&&i.keyCode<=30||i.keyCode>=98&&i.keyCode<=107||i.keyCode>=85&&i.keyCode<=95}},Oy=class{constructor(e,t,n,o,r){this.list=e;this.view=t;this.keyboardNavigationLabelProvider=n;this.keyboardNavigationEventFilter=o;this.delegate=r;this.updateOptions(e.options)}enabled=!1;state=0;mode=0;triggered=!1;previouslyFocused=-1;enabledDisposables=new re;disposables=new re;updateOptions(e){e.typeNavigationEnabled??!0?this.enable():this.disable(),this.mode=e.typeNavigationMode??0}trigger(){this.triggered=!this.triggered}enable(){if(this.enabled)return;let e=!1,t=ee.chain(this.enabledDisposables.add(new We(this.view.domNode,"keydown")).event,r=>r.filter(s=>!fs(s.target)).filter(()=>this.mode===0||this.triggered).map(s=>new ht(s)).filter(s=>e||this.keyboardNavigationEventFilter(s)).filter(s=>this.delegate.mightProducePrintableCharacter(s)).forEach(s=>Ct.stop(s,!0)).map(s=>s.browserEvent.key)),n=ee.debounce(t,()=>null,800,void 0,void 0,void 0,this.enabledDisposables);ee.reduce(ee.any(t,n),(r,s)=>s===null?null:(r||"")+s,void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),n(this.onClear,this,this.enabledDisposables),t(()=>e=!0,void 0,this.enabledDisposables),n(()=>e=!1,void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){let e=this.list.getFocus();if(e.length>0&&e[0]===this.previouslyFocused){let t=this.list.options.accessibilityProvider?.getAriaLabel(this.list.element(e[0]));typeof t=="string"?du(t):t&&du(t.get())}this.previouslyFocused=-1}onInput(e){if(!e){this.state=0,this.triggered=!1;return}let t=this.list.getFocus(),n=t.length>0?t[0]:0,o=this.state===0?1:0;this.state=1;for(let r=0;r<this.list.length;r++){let s=(n+r+o)%this.list.length,a=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(s)),l=a&&a.toString();if(this.list.options.typeNavigationEnabled){if(typeof l<"u"){if(Kl(e,l)){this.previouslyFocused=n,this.list.setFocus([s]),this.list.reveal(s);return}let c=$T(e,l);if(c&&c[0].end-c[0].start>1&&c.length===1){this.previouslyFocused=n,this.list.setFocus([s]),this.list.reveal(s);return}}}else if(typeof l>"u"||Kl(e,l)){this.previouslyFocused=n,this.list.setFocus([s]),this.list.reveal(s);return}}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}},Ay=class{constructor(e,t){this.list=e;this.view=t;let n=ee.chain(this.disposables.add(new We(t.domNode,"keydown")).event,r=>r.filter(s=>!fs(s.target)).map(s=>new ht(s)));ee.chain(n,r=>r.filter(s=>s.keyCode===2&&!s.ctrlKey&&!s.metaKey&&!s.shiftKey&&!s.altKey))(this.onTab,this,this.disposables)}disposables=new re;onTab(e){if(e.target!==this.view.domNode)return;let t=this.list.getFocus();if(t.length===0)return;let n=this.view.domElement(t[0]);if(!n)return;let o=n.querySelector("[tabIndex]");if(!o||!on(o)||o.tabIndex===-1)return;let r=Pe(o).getComputedStyle(o);r.visibility==="hidden"||r.display==="none"||(e.preventDefault(),e.stopPropagation(),o.focus())}dispose(){this.disposables.dispose()}};function oA(i){return Se?i.browserEvent.metaKey:i.browserEvent.ctrlKey}function rA(i){return i.browserEvent.shiftKey}function sA(i){return ty(i)&&i.button===2}var pk={isSelectionSingleChangeEvent:oA,isSelectionRangeChangeEvent:rA},xg=class{constructor(e){this.list=e;e.options.multipleSelectionSupport!==!1&&(this.multipleSelectionController=this.list.options.multipleSelectionController||pk),this.mouseSupport=typeof e.options.mouseSupport>"u"||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(_n.addTarget(e.getHTMLElement()))),ee.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}multipleSelectionController;mouseSupport;disposables=new re;_onPointer=new C;onPointer=this._onPointer.event;updateOptions(e){e.multipleSelectionSupport!==void 0&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||pk))}isSelectionSingleChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionSingleChangeEvent(e):!1}isSelectionRangeChangeEvent(e){return this.multipleSelectionController?this.multipleSelectionController.isSelectionRangeChangeEvent(e):!1}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){cu(e.browserEvent.target)||Ea()!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if(fs(e.browserEvent.target)||cu(e.browserEvent.target))return;let t=typeof e.index>"u"?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport||fs(e.browserEvent.target)||cu(e.browserEvent.target)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;let t=e.index;if(typeof t>"u"){this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0);return}if(this.isSelectionChangeEvent(e))return this.changeSelection(e);this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),sA(e.browserEvent)||this.list.setSelection([t],e.browserEvent),this._onPointer.fire(e)}onDoubleClick(e){if(fs(e.browserEvent.target)||cu(e.browserEvent.target)||this.isSelectionChangeEvent(e)||e.browserEvent.isHandledByList)return;e.browserEvent.isHandledByList=!0;let t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){let t=e.index,n=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){typeof n>"u"&&(n=this.list.getFocus()[0]??t,this.list.setAnchor(n));let o=Math.min(n,t),r=Math.max(n,t),s=ul(o,r+1),a=this.list.getSelection(),l=lA(Ny(a,[n]),n);if(l.length===0)return;let c=Ny(s,dA(a,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){let o=this.list.getSelection(),r=o.filter(s=>s!==t);this.list.setFocus([t]),this.list.setAnchor(t),o.length===r.length?this.list.setSelection([...r,t],e.browserEvent):this.list.setSelection(r,e.browserEvent)}}dispose(){this.disposables.dispose()}},My=class{constructor(e,t){this.styleElement=e;this.selectorSuffix=t}style(e){let t=this.selectorSuffix&&`.${this.selectorSuffix}`,n=[];e.listBackground&&n.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`),e.listFocusBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(n.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),n.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&n.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionBackground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }
			`),e.listFocusAndSelectionForeground&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }
			`),e.listInactiveFocusForeground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&n.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(n.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(n.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),n.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&n.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&n.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&n.push(`.monaco-list${t}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`);let o=ms(e.listFocusAndSelectionOutline,ms(e.listSelectionOutline,e.listFocusOutline??""));o&&n.push(`.monaco-list${t}:focus .monaco-list-row.focused.selected { outline: 1px solid ${o}; outline-offset: -1px;}`),e.listFocusOutline&&n.push(`
				.monaco-drag-image,
				.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
				.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }
			`);let r=ms(e.listSelectionOutline,e.listInactiveFocusOutline??"");r&&n.push(`.monaco-list${t} .monaco-list-row.focused.selected { outline: 1px dotted ${r}; outline-offset: -1px; }`),e.listSelectionOutline&&n.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listInactiveFocusOutline&&n.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&n.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropOverBackground&&n.push(`
				.monaco-list${t}.drop-target,
				.monaco-list${t} .monaco-list-rows.drop-target,
				.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropOverBackground} !important; color: inherit !important; }
			`),e.listDropBetweenBackground&&(n.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,
			.monaco-list${t} .monaco-list-row.drop-target-before::before {
				content: ""; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`),n.push(`
			.monaco-list${t} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,
			.monaco-list${t} .monaco-list-row.drop-target-after::after {
				content: ""; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;
				background-color: ${e.listDropBetweenBackground};
			}`)),e.tableColumnsBorder&&n.push(`
				.monaco-table > .monaco-split-view2,
				.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: ${e.tableColumnsBorder};
				}

				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,
				.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {
					border-color: transparent;
				}
			`),e.tableOddRowsBackgroundColor&&n.push(`
				.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,
				.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {
					background-color: ${e.tableOddRowsBackgroundColor};
				}
			`),this.styleElement.textContent=n.join(`
`)}},mk={listFocusBackground:"#7FB0D0",listActiveSelectionBackground:"#0E639C",listActiveSelectionForeground:"#FFFFFF",listActiveSelectionIconForeground:"#FFFFFF",listFocusAndSelectionOutline:"#90C2F9",listFocusAndSelectionBackground:"#094771",listFocusAndSelectionForeground:"#FFFFFF",listInactiveSelectionBackground:"#3F3F46",listInactiveSelectionIconForeground:"#FFFFFF",listHoverBackground:"#2A2D2E",listDropOverBackground:"#383B3D",listDropBetweenBackground:"#EEEEEE",treeIndentGuidesStroke:"#a9a9a9",treeInactiveIndentGuidesStroke:B.fromHex("#a9a9a9").transparent(.4).toString(),tableColumnsBorder:B.fromHex("#cccccc").transparent(.2).toString(),tableOddRowsBackgroundColor:B.fromHex("#cccccc").transparent(.04).toString(),listBackground:void 0,listFocusForeground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusForeground:void 0,listInactiveFocusBackground:void 0,listHoverForeground:void 0,listFocusOutline:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listHoverOutline:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0},aA={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){},dispose(){}}};function lA(i,e){let t=i.indexOf(e);if(t===-1)return[];let n=[],o=t-1;for(;o>=0&&i[o]===e-(t-o);)n.push(i[o--]);for(n.reverse(),o=t;o<i.length&&i[o]===e+(o-t);)n.push(i[o++]);return n}function Ny(i,e){let t=[],n=0,o=0;for(;n<i.length||o<e.length;)if(n>=i.length)t.push(e[o++]);else if(o>=e.length)t.push(i[n++]);else if(i[n]===e[o]){t.push(i[n]),n++,o++;continue}else i[n]<e[o]?t.push(i[n++]):t.push(e[o++]);return t}function dA(i,e){let t=[],n=0,o=0;for(;n<i.length||o<e.length;)if(n>=i.length)t.push(e[o++]);else if(o>=e.length)t.push(i[n++]);else if(i[n]===e[o]){n++,o++;continue}else i[n]<e[o]?t.push(i[n++]):o++;return t}var hk=(i,e)=>i-e,Fy=class{constructor(e,t){this._templateId=e;this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map(t=>t.renderTemplate(e))}renderElement(e,t,n,o){let r=0;for(let s of this.renderers)s.renderElement(e,t,n[r++],o)}disposeElement(e,t,n,o){let r=0;for(let s of this.renderers)s.disposeElement?.(e,t,n[r],o),r+=1}disposeTemplate(e){let t=0;for(let n of this.renderers)n.disposeTemplate(e[t++])}},By=class{constructor(e){this.accessibilityProvider=e}templateId="a18n";renderTemplate(e){return{container:e,disposables:new re}}renderElement(e,t,n){let o=this.accessibilityProvider.getAriaLabel(e),r=o&&typeof o!="string"?o:hh(o);n.disposables.add(ss(a=>{this.setAriaLabel(a.readObservable(r),n.container)}));let s=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);typeof s=="number"?n.container.setAttribute("aria-level",`${s}`):n.container.removeAttribute("aria-level")}setAriaLabel(e,t){e?t.setAttribute("aria-label",e):t.removeAttribute("aria-label")}disposeElement(e,t,n,o){n.disposables.clear()}disposeTemplate(e){e.disposables.dispose()}},Wy=class{constructor(e,t){this.list=e;this.dnd=t}getDragElements(e){let t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){this.dnd.onDragStart?.(e,t)}onDragOver(e,t,n,o,r){return this.dnd.onDragOver(e,t,n,o,r)}onDragLeave(e,t,n,o){this.dnd.onDragLeave?.(e,t,n,o)}onDragEnd(e){this.dnd.onDragEnd?.(e)}drop(e,t,n,o,r){this.dnd.drop(e,t,n,o,r)}dispose(){this.dnd.dispose()}},$i=class{constructor(e,t,n,o,r=aA){this.user=e;this._options=r;let s=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?this._options.accessibilityProvider?.getWidgetRole():"list";this.selection=new Py(s!=="listbox");let a=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=r.accessibilityProvider,this.accessibilityProvider&&(a.push(new By(this.accessibilityProvider)),this.accessibilityProvider.onDidChangeActiveDescendant?.(this.onDidChangeActiveDescendant,this,this.disposables)),o=o.map(c=>new Fy(c.templateId,[...a,c]));let l={...r,dnd:r.dnd&&new Wy(this,r.dnd)};if(this.view=this.createListView(t,n,o,l),this.view.domNode.setAttribute("role",s),r.styleController)this.styleController=r.styleController(this.view.domId);else{let c=wa(this.view.domNode);this.styleController=new My(c,this.view.domId)}if(this.spliceable=new gg([new uu(this.focus,this.view,r.identityProvider),new uu(this.selection,this.view,r.identityProvider),new uu(this.anchor,this.view,r.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new Ay(this,this.view)),(typeof r.keyboardSupport!="boolean"||r.keyboardSupport)&&(this.keyboardController=new Ig(this,this.view,r),this.disposables.add(this.keyboardController)),r.keyboardNavigationLabelProvider){let c=r.keyboardNavigationDelegate||iA;this.typeNavigationController=new Oy(this,this.view,r.keyboardNavigationLabelProvider,r.keyboardNavigationEventFilter??(()=>!0),c),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(r),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),this._options.multipleSelectionSupport!==!1&&this.view.domNode.setAttribute("aria-multiselectable","true")}focus=new ql("focused");selection;anchor=new ql("anchor");eventBufferer=new wl;view;spliceable;styleController;typeNavigationController;accessibilityProvider;keyboardController;mouseController;_ariaLabel="";disposables=new re;get onDidChangeFocus(){return ee.map(this.eventBufferer.wrapEvent(this.focus.onChange),e=>this.toListEvent(e),this.disposables)}get onDidChangeSelection(){return ee.map(this.eventBufferer.wrapEvent(this.selection.onChange),e=>this.toListEvent(e),this.disposables)}get domId(){return this.view.domId}get onDidScroll(){return this.view.onDidScroll}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseUp(){return this.view.onMouseUp}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onMouseMove(){return this.view.onMouseMove}get onMouseOut(){return this.view.onMouseOut}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1,t=ee.chain(this.disposables.add(new We(this.view.domNode,"keydown")).event,r=>r.map(s=>new ht(s)).filter(s=>e=s.keyCode===58||s.shiftKey&&s.keyCode===68).map(s=>Ct.stop(s,!0)).filter(()=>!1)),n=ee.chain(this.disposables.add(new We(this.view.domNode,"keyup")).event,r=>r.forEach(()=>e=!1).map(s=>new ht(s)).filter(s=>s.keyCode===58||s.shiftKey&&s.keyCode===68).map(s=>Ct.stop(s,!0)).map(({browserEvent:s})=>{let a=this.getFocus(),l=a.length?a[0]:void 0,c=typeof l<"u"?this.view.element(l):void 0,u=typeof l<"u"?this.view.domElement(l):this.view.domNode;return{index:l,element:c,anchor:u,browserEvent:s}})),o=ee.chain(this.view.onContextMenu,r=>r.filter(s=>!e).map(({element:s,index:a,browserEvent:l})=>({element:s,index:a,anchor:new ci(Pe(this.view.domNode),l),browserEvent:l})));return ee.any(t,n,o)}get onKeyDown(){return this.disposables.add(new We(this.view.domNode,"keydown")).event}get onKeyUp(){return this.disposables.add(new We(this.view.domNode,"keyup")).event}get onKeyPress(){return this.disposables.add(new We(this.view.domNode,"keypress")).event}get onDidFocus(){return ee.signal(this.disposables.add(new We(this.view.domNode,"focus",!0)).event)}get onDidBlur(){return ee.signal(this.disposables.add(new We(this.view.domNode,"blur",!0)).event)}_onDidDispose=new C;onDidDispose=this._onDidDispose.event;createListView(e,t,n,o){return new yg(e,t,n,o)}createMouseController(e){return new xg(this)}updateOptions(e={}){this._options={...this._options,...e},this.typeNavigationController?.updateOptions(this._options),this._options.multipleSelectionController!==void 0&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),this.keyboardController?.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,n=[]){if(e<0||e>this.view.length)throw new qo(this.user,`Invalid start index: ${e}`);if(t<0)throw new qo(this.user,`Invalid delete count: ${t}`);t===0&&n.length===0||this.eventBufferer.bufferEvents(()=>this.spliceable.splice(e,t,n))}updateWidth(e){this.view.updateWidth(e)}updateElementHeight(e,t){this.view.updateElementHeight(e,t,null)}rerender(){this.view.rerender()}element(e){return this.view.element(e)}indexOf(e){return this.view.indexOf(e)}indexAt(e){return this.view.indexAt(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get contentWidth(){return this.view.contentWidth}get onDidChangeContentHeight(){return this.view.onDidChangeContentHeight}get onDidChangeContentWidth(){return this.view.onDidChangeContentWidth}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get scrollLeft(){return this.view.getScrollLeft()}set scrollLeft(e){this.view.setScrollLeft(e)}get scrollHeight(){return this.view.scrollHeight}get renderHeight(){return this.view.renderHeight}get firstVisibleIndex(){return this.view.firstVisibleIndex}get firstMostlyVisibleIndex(){return this.view.firstMostlyVisibleIndex}get lastVisibleIndex(){return this.view.lastVisibleIndex}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}triggerTypeNavigation(){this.typeNavigationController?.trigger()}setSelection(e,t){for(let n of e)if(n<0||n>=this.length)throw new qo(this.user,`Invalid index ${n}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map(e=>this.view.element(e))}setAnchor(e){if(typeof e>"u"){this.anchor.set([]);return}if(e<0||e>=this.length)throw new qo(this.user,`Invalid index ${e}`);this.anchor.set([e])}getAnchor(){return this.anchor.get().at(0)}getAnchorElement(){let e=this.getAnchor();return typeof e>"u"?void 0:this.element(e)}setFocus(e,t){for(let n of e)if(n<0||n>=this.length)throw new qo(this.user,`Invalid index ${n}`);this.focus.set(e,t)}focusNext(e=1,t=!1,n,o){if(this.length===0)return;let r=this.focus.get(),s=this.findNextIndex(r.length>0?r[0]+e:0,t,o);s>-1&&this.setFocus([s],n)}focusPrevious(e=1,t=!1,n,o){if(this.length===0)return;let r=this.focus.get(),s=this.findPreviousIndex(r.length>0?r[0]-e:0,t,o);s>-1&&this.setFocus([s],n)}async focusNextPage(e,t){let n=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);n=n===0?0:n-1;let o=this.getFocus()[0];if(o!==n&&(o===void 0||n>o)){let r=this.findPreviousIndex(n,!1,t);r>-1&&o!==r?this.setFocus([r],e):this.setFocus([n],e)}else{let r=this.view.getScrollTop(),s=r+this.view.renderHeight;n>o&&(s-=this.view.elementHeight(n)),this.view.setScrollTop(s),this.view.getScrollTop()!==r&&(this.setFocus([]),await pi(0),await this.focusNextPage(e,t))}}async focusPreviousPage(e,t,n=()=>0){let o,r=n(),s=this.view.getScrollTop()+r;s===0?o=this.view.indexAt(s):o=this.view.indexAfter(s-1);let a=this.getFocus()[0];if(a!==o&&(a===void 0||a>=o)){let l=this.findNextIndex(o,!1,t);l>-1&&a!==l?this.setFocus([l],e):this.setFocus([o],e)}else{let l=s;this.view.setScrollTop(s-this.view.renderHeight-r),this.view.getScrollTop()+n()!==l&&(this.setFocus([]),await pi(0),await this.focusPreviousPage(e,t,n))}}focusLast(e,t){if(this.length===0)return;let n=this.findPreviousIndex(this.length-1,!1,t);n>-1&&this.setFocus([n],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,n){if(this.length===0)return;let o=this.findNextIndex(e,!1,n);o>-1&&this.setFocus([o],t)}findNextIndex(e,t=!1,n){for(let o=0;o<this.length;o++){if(e>=this.length&&!t)return-1;if(e=e%this.length,!n||n(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,n){for(let o=0;o<this.length;o++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!n||n(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map(e=>this.view.element(e))}reveal(e,t,n=0){if(e<0||e>=this.length)throw new qo(this.user,`Invalid index ${e}`);let o=this.view.getScrollTop(),r=this.view.elementTop(e),s=this.view.elementHeight(e);if(Wo(t)){let a=s-this.view.renderHeight+n;this.view.setScrollTop(a*Wl(t,0,1)+r-n)}else{let a=r+s,l=o+this.view.renderHeight;r<o+n&&a>=l||(r<o+n||a>=l&&s>=this.view.renderHeight?this.view.setScrollTop(r-n):a>=l&&this.view.setScrollTop(a-this.view.renderHeight))}}getRelativeTop(e,t=0){if(e<0||e>=this.length)throw new qo(this.user,`Invalid index ${e}`);let n=this.view.getScrollTop(),o=this.view.elementTop(e),r=this.view.elementHeight(e);if(o<n+t||o+r>n+this.view.renderHeight)return null;let s=r-this.view.renderHeight+t;return Math.abs((n+t-o)/s)}isDOMFocused(){return gs(this.view.domNode)}getHTMLElement(){return this.view.domNode}getScrollableElement(){return this.view.scrollableElementDomNode}getElementID(e){return this.view.getElementDomId(e)}getElementTop(e){return this.view.elementTop(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map(n=>this.view.element(n)),browserEvent:t}}_onFocusChange(){let e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){let e=this.focus.get();if(e.length>0){let t;this.accessibilityProvider?.getActiveDescendantId&&(t=this.accessibilityProvider.getActiveDescendantId(this.view.element(e[0]))),this.view.domNode.setAttribute("aria-activedescendant",t||this.view.getElementDomId(e[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){let e=this.selection.get();this.view.domNode.classList.toggle("selection-none",e.length===0),this.view.domNode.classList.toggle("selection-single",e.length===1),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}};L([q],$i.prototype,"onDidChangeFocus",1),L([q],$i.prototype,"onDidChangeSelection",1),L([q],$i.prototype,"onContextMenu",1),L([q],$i.prototype,"onKeyDown",1),L([q],$i.prototype,"onKeyUp",1),L([q],$i.prototype,"onKeyPress",1),L([q],$i.prototype,"onDidFocus",1),L([q],$i.prototype,"onDidBlur",1);var cA=new RegExp(`(\\\\)?\\$\\((${Fe.iconNameExpression}(?:${Fe.iconModifierExpression})?)\\)`,"g");function $o(i){let e=new Array,t,n=0,o=0;for(;(t=cA.exec(i))!==null;){o=t.index||0,n<o&&e.push(i.substring(n,o)),n=(t.index||0)+t[0].length;let[,r,s]=t;e.push(r?`$(${s})`:uA({id:s}))}return n<i.length&&e.push(i.substring(n)),e}function uA(i){let e=Y("span");return e.classList.add(...Fe.asClassNameArray(i)),e}var Uy=class{_prefix;_lastId;constructor(e){this._prefix=e,this._lastId=0}nextId(){return this._prefix+ ++this._lastId}},Vy=new Uy("id#");var mn={};(function(){function i(e,t){t(mn)}i.amd=!0,function(e,t){typeof i=="function"&&i.amd?i(["exports"],t):typeof exports=="object"&&typeof module<"u"?t(exports):(e=typeof globalThis<"u"?globalThis:e||self,t(e.marked={}))}(this,function(e){"use strict";function t(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}e.defaults=t();function n(Le){e.defaults=Le}let o=/[&<>"']/,r=new RegExp(o.source,"g"),s=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,a=new RegExp(s.source,"g"),l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},c=Le=>l[Le];function u(Le,y){if(y){if(o.test(Le))return Le.replace(r,c)}else if(s.test(Le))return Le.replace(a,c);return Le}let p=/(^|[^\[])\^/g;function h(Le,y){let x=typeof Le=="string"?Le:Le.source;y=y||"";let S={replace:(k,D)=>{let W=typeof D=="string"?D:D.source;return W=W.replace(p,"$1"),x=x.replace(k,W),S},getRegex:()=>new RegExp(x,y)};return S}function m(Le){try{Le=encodeURI(Le).replace(/%25/g,"%")}catch{return null}return Le}let v={exec:()=>null};function f(Le,y){let x=Le.replace(/\|/g,(D,W,z)=>{let ae=!1,pe=W;for(;--pe>=0&&z[pe]==="\\";)ae=!ae;return ae?"|":" |"}),S=x.split(/ \|/),k=0;if(S[0].trim()||S.shift(),S.length>0&&!S[S.length-1].trim()&&S.pop(),y)if(S.length>y)S.splice(y);else for(;S.length<y;)S.push("");for(;k<S.length;k++)S[k]=S[k].trim().replace(/\\\|/g,"|");return S}function b(Le,y,x){let S=Le.length;if(S===0)return"";let k=0;for(;k<S;){let D=Le.charAt(S-k-1);if(D===y&&!x)k++;else if(D!==y&&x)k++;else break}return Le.slice(0,S-k)}function E(Le,y){if(Le.indexOf(y[1])===-1)return-1;let x=0;for(let S=0;S<Le.length;S++)if(Le[S]==="\\")S++;else if(Le[S]===y[0])x++;else if(Le[S]===y[1]&&(x--,x<0))return S;return-1}function T(Le,y,x,S){let k=y.href,D=y.title?u(y.title):null,W=Le[1].replace(/\\([\[\]])/g,"$1");if(Le[0].charAt(0)!=="!"){S.state.inLink=!0;let z={type:"link",raw:x,href:k,title:D,text:W,tokens:S.inlineTokens(W)};return S.state.inLink=!1,z}return{type:"image",raw:x,href:k,title:D,text:u(W)}}function _(Le,y){let x=Le.match(/^(\s+)(?:```)/);if(x===null)return y;let S=x[1];return y.split(`
`).map(k=>{let D=k.match(/^\s+/);if(D===null)return k;let[W]=D;return W.length>=S.length?k.slice(S.length):k}).join(`
`)}class O{options;rules;lexer;constructor(y){this.options=y||e.defaults}space(y){let x=this.rules.block.newline.exec(y);if(x&&x[0].length>0)return{type:"space",raw:x[0]}}code(y){let x=this.rules.block.code.exec(y);if(x){let S=x[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:x[0],codeBlockStyle:"indented",text:this.options.pedantic?S:b(S,`
`)}}}fences(y){let x=this.rules.block.fences.exec(y);if(x){let S=x[0],k=_(S,x[3]||"");return{type:"code",raw:S,lang:x[2]?x[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):x[2],text:k}}}heading(y){let x=this.rules.block.heading.exec(y);if(x){let S=x[2].trim();if(/#$/.test(S)){let k=b(S,"#");(this.options.pedantic||!k||/ $/.test(k))&&(S=k.trim())}return{type:"heading",raw:x[0],depth:x[1].length,text:S,tokens:this.lexer.inline(S)}}}hr(y){let x=this.rules.block.hr.exec(y);if(x)return{type:"hr",raw:b(x[0],`
`)}}blockquote(y){let x=this.rules.block.blockquote.exec(y);if(x){let S=b(x[0],`
`).split(`
`),k="",D="",W=[];for(;S.length>0;){let z=!1,ae=[],pe;for(pe=0;pe<S.length;pe++)if(/^ {0,3}>/.test(S[pe]))ae.push(S[pe]),z=!0;else if(!z)ae.push(S[pe]);else break;S=S.slice(pe);let Re=ae.join(`
`),je=Re.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");k=k?`${k}
${Re}`:Re,D=D?`${D}
${je}`:je;let mt=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(je,W,!0),this.lexer.state.top=mt,S.length===0)break;let Ft=W[W.length-1];if(Ft?.type==="code")break;if(Ft?.type==="blockquote"){let It=Ft,fe=It.raw+`
`+S.join(`
`),R=this.blockquote(fe);W[W.length-1]=R,k=k.substring(0,k.length-It.raw.length)+R.raw,D=D.substring(0,D.length-It.text.length)+R.text;break}else if(Ft?.type==="list"){let It=Ft,fe=It.raw+`
`+S.join(`
`),R=this.list(fe);W[W.length-1]=R,k=k.substring(0,k.length-Ft.raw.length)+R.raw,D=D.substring(0,D.length-It.raw.length)+R.raw,S=fe.substring(W[W.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:k,tokens:W,text:D}}}list(y){let x=this.rules.block.list.exec(y);if(x){let S=x[1].trim(),k=S.length>1,D={type:"list",raw:"",ordered:k,start:k?+S.slice(0,-1):"",loose:!1,items:[]};S=k?`\\d{1,9}\\${S.slice(-1)}`:`\\${S}`,this.options.pedantic&&(S=k?S:"[*+-]");let W=new RegExp(`^( {0,3}${S})((?:[	 ][^\\n]*)?(?:\\n|$))`),z=!1;for(;y;){let ae=!1,pe="",Re="";if(!(x=W.exec(y))||this.rules.block.hr.test(y))break;pe=x[0],y=y.substring(pe.length);let je=x[2].split(`
`,1)[0].replace(/^\t+/,J=>" ".repeat(3*J.length)),mt=y.split(`
`,1)[0],Ft=!je.trim(),It=0;if(this.options.pedantic?(It=2,Re=je.trimStart()):Ft?It=x[1].length+1:(It=x[2].search(/[^ ]/),It=It>4?1:It,Re=je.slice(It),It+=x[1].length),Ft&&/^ *$/.test(mt)&&(pe+=mt+`
`,y=y.substring(mt.length+1),ae=!0),!ae){let J=new RegExp(`^ {0,${Math.min(3,It-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),ge=new RegExp(`^ {0,${Math.min(3,It-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),ct=new RegExp(`^ {0,${Math.min(3,It-1)}}(?:\`\`\`|~~~)`),jt=new RegExp(`^ {0,${Math.min(3,It-1)}}#`);for(;y;){let Fn=y.split(`
`,1)[0];if(mt=Fn,this.options.pedantic&&(mt=mt.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),ct.test(mt)||jt.test(mt)||J.test(mt)||ge.test(y))break;if(mt.search(/[^ ]/)>=It||!mt.trim())Re+=`
`+mt.slice(It);else{if(Ft||je.search(/[^ ]/)>=4||ct.test(je)||jt.test(je)||ge.test(je))break;Re+=`
`+mt}!Ft&&!mt.trim()&&(Ft=!0),pe+=Fn+`
`,y=y.substring(Fn.length+1),je=mt.slice(It)}}D.loose||(z?D.loose=!0:/\n *\n *$/.test(pe)&&(z=!0));let fe=null,R;this.options.gfm&&(fe=/^\[[ xX]\] /.exec(Re),fe&&(R=fe[0]!=="[ ] ",Re=Re.replace(/^\[[ xX]\] +/,""))),D.items.push({type:"list_item",raw:pe,task:!!fe,checked:R,loose:!1,text:Re,tokens:[]}),D.raw+=pe}D.items[D.items.length-1].raw=D.items[D.items.length-1].raw.trimEnd(),D.items[D.items.length-1].text=D.items[D.items.length-1].text.trimEnd(),D.raw=D.raw.trimEnd();for(let ae=0;ae<D.items.length;ae++)if(this.lexer.state.top=!1,D.items[ae].tokens=this.lexer.blockTokens(D.items[ae].text,[]),!D.loose){let pe=D.items[ae].tokens.filter(je=>je.type==="space"),Re=pe.length>0&&pe.some(je=>/\n.*\n/.test(je.raw));D.loose=Re}if(D.loose)for(let ae=0;ae<D.items.length;ae++)D.items[ae].loose=!0;return D}}html(y){let x=this.rules.block.html.exec(y);if(x)return{type:"html",block:!0,raw:x[0],pre:x[1]==="pre"||x[1]==="script"||x[1]==="style",text:x[0]}}def(y){let x=this.rules.block.def.exec(y);if(x){let S=x[1].toLowerCase().replace(/\s+/g," "),k=x[2]?x[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",D=x[3]?x[3].substring(1,x[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):x[3];return{type:"def",tag:S,raw:x[0],href:k,title:D}}}table(y){let x=this.rules.block.table.exec(y);if(!x||!/[:|]/.test(x[2]))return;let S=f(x[1]),k=x[2].replace(/^\||\| *$/g,"").split("|"),D=x[3]&&x[3].trim()?x[3].replace(/\n[ \t]*$/,"").split(`
`):[],W={type:"table",raw:x[0],header:[],align:[],rows:[]};if(S.length===k.length){for(let z of k)/^ *-+: *$/.test(z)?W.align.push("right"):/^ *:-+: *$/.test(z)?W.align.push("center"):/^ *:-+ *$/.test(z)?W.align.push("left"):W.align.push(null);for(let z=0;z<S.length;z++)W.header.push({text:S[z],tokens:this.lexer.inline(S[z]),header:!0,align:W.align[z]});for(let z of D)W.rows.push(f(z,W.header.length).map((ae,pe)=>({text:ae,tokens:this.lexer.inline(ae),header:!1,align:W.align[pe]})));return W}}lheading(y){let x=this.rules.block.lheading.exec(y);if(x)return{type:"heading",raw:x[0],depth:x[2].charAt(0)==="="?1:2,text:x[1],tokens:this.lexer.inline(x[1])}}paragraph(y){let x=this.rules.block.paragraph.exec(y);if(x){let S=x[1].charAt(x[1].length-1)===`
`?x[1].slice(0,-1):x[1];return{type:"paragraph",raw:x[0],text:S,tokens:this.lexer.inline(S)}}}text(y){let x=this.rules.block.text.exec(y);if(x)return{type:"text",raw:x[0],text:x[0],tokens:this.lexer.inline(x[0])}}escape(y){let x=this.rules.inline.escape.exec(y);if(x)return{type:"escape",raw:x[0],text:u(x[1])}}tag(y){let x=this.rules.inline.tag.exec(y);if(x)return!this.lexer.state.inLink&&/^<a /i.test(x[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(x[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(x[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(x[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:x[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:x[0]}}link(y){let x=this.rules.inline.link.exec(y);if(x){let S=x[2].trim();if(!this.options.pedantic&&/^</.test(S)){if(!/>$/.test(S))return;let W=b(S.slice(0,-1),"\\");if((S.length-W.length)%2===0)return}else{let W=E(x[2],"()");if(W>-1){let ae=(x[0].indexOf("!")===0?5:4)+x[1].length+W;x[2]=x[2].substring(0,W),x[0]=x[0].substring(0,ae).trim(),x[3]=""}}let k=x[2],D="";if(this.options.pedantic){let W=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(k);W&&(k=W[1],D=W[3])}else D=x[3]?x[3].slice(1,-1):"";return k=k.trim(),/^</.test(k)&&(this.options.pedantic&&!/>$/.test(S)?k=k.slice(1):k=k.slice(1,-1)),T(x,{href:k&&k.replace(this.rules.inline.anyPunctuation,"$1"),title:D&&D.replace(this.rules.inline.anyPunctuation,"$1")},x[0],this.lexer)}}reflink(y,x){let S;if((S=this.rules.inline.reflink.exec(y))||(S=this.rules.inline.nolink.exec(y))){let k=(S[2]||S[1]).replace(/\s+/g," "),D=x[k.toLowerCase()];if(!D){let W=S[0].charAt(0);return{type:"text",raw:W,text:W}}return T(S,D,S[0],this.lexer)}}emStrong(y,x,S=""){let k=this.rules.inline.emStrongLDelim.exec(y);if(!k||k[3]&&S.match(/[\p{L}\p{N}]/u))return;if(!(k[1]||k[2]||"")||!S||this.rules.inline.punctuation.exec(S)){let W=[...k[0]].length-1,z,ae,pe=W,Re=0,je=k[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(je.lastIndex=0,x=x.slice(-1*y.length+W);(k=je.exec(x))!=null;){if(z=k[1]||k[2]||k[3]||k[4]||k[5]||k[6],!z)continue;if(ae=[...z].length,k[3]||k[4]){pe+=ae;continue}else if((k[5]||k[6])&&W%3&&!((W+ae)%3)){Re+=ae;continue}if(pe-=ae,pe>0)continue;ae=Math.min(ae,ae+pe+Re);let mt=[...k[0]][0].length,Ft=y.slice(0,W+k.index+mt+ae);if(Math.min(W,ae)%2){let fe=Ft.slice(1,-1);return{type:"em",raw:Ft,text:fe,tokens:this.lexer.inlineTokens(fe)}}let It=Ft.slice(2,-2);return{type:"strong",raw:Ft,text:It,tokens:this.lexer.inlineTokens(It)}}}}codespan(y){let x=this.rules.inline.code.exec(y);if(x){let S=x[2].replace(/\n/g," "),k=/[^ ]/.test(S),D=/^ /.test(S)&&/ $/.test(S);return k&&D&&(S=S.substring(1,S.length-1)),S=u(S,!0),{type:"codespan",raw:x[0],text:S}}}br(y){let x=this.rules.inline.br.exec(y);if(x)return{type:"br",raw:x[0]}}del(y){let x=this.rules.inline.del.exec(y);if(x)return{type:"del",raw:x[0],text:x[2],tokens:this.lexer.inlineTokens(x[2])}}autolink(y){let x=this.rules.inline.autolink.exec(y);if(x){let S,k;return x[2]==="@"?(S=u(x[1]),k="mailto:"+S):(S=u(x[1]),k=S),{type:"link",raw:x[0],text:S,href:k,tokens:[{type:"text",raw:S,text:S}]}}}url(y){let x;if(x=this.rules.inline.url.exec(y)){let S,k;if(x[2]==="@")S=u(x[0]),k="mailto:"+S;else{let D;do D=x[0],x[0]=this.rules.inline._backpedal.exec(x[0])?.[0]??"";while(D!==x[0]);S=u(x[0]),x[1]==="www."?k="http://"+x[0]:k=x[0]}return{type:"link",raw:x[0],text:S,href:k,tokens:[{type:"text",raw:S,text:S}]}}}inlineText(y){let x=this.rules.inline.text.exec(y);if(x){let S;return this.lexer.state.inRawBlock?S=x[0]:S=u(x[0]),{type:"text",raw:x[0],text:S}}}}let M=/^(?: *(?:\n|$))+/,U=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,he=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Q=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,se=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,ne=/(?:[*+-]|\d{1,9}[.)])/,V=h(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,ne).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),X=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,Ce=/^[^\n]+/,Ze=/(?!\s*\])(?:\\.|[^\[\]\\])+/,oe=h(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",Ze).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),$=h(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,ne).getRegex(),de="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ie=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,ce=h("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",ie).replace("tag",de).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ke=h(X).replace("hr",Q).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",de).getRegex(),tt={blockquote:h(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",ke).getRegex(),code:U,def:oe,fences:he,heading:se,hr:Q,html:ce,lheading:V,list:$,newline:M,paragraph:ke,table:v,text:Ce},Me=h("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Q).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",de).getRegex(),ve={...tt,table:Me,paragraph:h(X).replace("hr",Q).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",Me).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",de).getRegex()},kn={...tt,html:h(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ie).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:v,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:h(X).replace("hr",Q).replace("heading",` *#{1,6} *[^
]`).replace("lheading",V).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},cn=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,no=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,Ui=/^( {2,}|\\)\n(?!\s*$)/,sl=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,ai="\\p{P}\\p{S}",mr=h(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,ai).getRegex(),mc=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,fc=h(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,ai).getRegex(),jr=h("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,ai).getRegex(),al=h("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,ai).getRegex(),ll=h(/\\([punct])/,"gu").replace(/punct/g,ai).getRegex(),Wp=h(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),Up=h(ie).replace("(?:-->|$)","-->").getRegex(),Nb=h("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",Up).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),Yr=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,ia=h(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",Yr).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),fr=h(/^!?\[(label)\]\[(ref)\]/).replace("label",Yr).replace("ref",Ze).getRegex(),br=h(/^!?\[(ref)\](?:\[\])?/).replace("ref",Ze).getRegex(),Vp=h("reflink|nolink(?!\\()","g").replace("reflink",fr).replace("nolink",br).getRegex(),dl={_backpedal:v,anyPunctuation:ll,autolink:Wp,blockSkip:mc,br:Ui,code:no,del:v,emStrongLDelim:fc,emStrongRDelimAst:jr,emStrongRDelimUnd:al,escape:cn,link:ia,nolink:br,punctuation:mr,reflink:fr,reflinkSearch:Vp,tag:Nb,text:sl,url:v},zp={...dl,link:h(/^!?\[(label)\]\((.*?)\)/).replace("label",Yr).getRegex(),reflink:h(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",Yr).getRegex()},oa={...dl,escape:h(cn).replace("])","~|])").getRegex(),url:h(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},Hp={...oa,br:h(Ui).replace("{2,}","*").getRegex(),text:h(oa.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},vr={normal:tt,gfm:ve,pedantic:kn},Po={normal:dl,gfm:oa,breaks:Hp,pedantic:zp};class $t{tokens;options;state;tokenizer;inlineQueue;constructor(y){this.tokens=[],this.tokens.links=Object.create(null),this.options=y||e.defaults,this.options.tokenizer=this.options.tokenizer||new O,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let x={block:vr.normal,inline:Po.normal};this.options.pedantic?(x.block=vr.pedantic,x.inline=Po.pedantic):this.options.gfm&&(x.block=vr.gfm,this.options.breaks?x.inline=Po.breaks:x.inline=Po.gfm),this.tokenizer.rules=x}static get rules(){return{block:vr,inline:Po}}static lex(y,x){return new $t(x).lex(y)}static lexInline(y,x){return new $t(x).inlineTokens(y)}lex(y){y=y.replace(/\r\n|\r/g,`
`),this.blockTokens(y,this.tokens);for(let x=0;x<this.inlineQueue.length;x++){let S=this.inlineQueue[x];this.inlineTokens(S.src,S.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(y,x=[],S=!1){this.options.pedantic?y=y.replace(/\t/g,"    ").replace(/^ +$/gm,""):y=y.replace(/^( *)(\t+)/gm,(z,ae,pe)=>ae+"    ".repeat(pe.length));let k,D,W;for(;y;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(z=>(k=z.call({lexer:this},y,x))?(y=y.substring(k.raw.length),x.push(k),!0):!1))){if(k=this.tokenizer.space(y)){y=y.substring(k.raw.length),k.raw.length===1&&x.length>0?x[x.length-1].raw+=`
`:x.push(k);continue}if(k=this.tokenizer.code(y)){y=y.substring(k.raw.length),D=x[x.length-1],D&&(D.type==="paragraph"||D.type==="text")?(D.raw+=`
`+k.raw,D.text+=`
`+k.text,this.inlineQueue[this.inlineQueue.length-1].src=D.text):x.push(k);continue}if(k=this.tokenizer.fences(y)){y=y.substring(k.raw.length),x.push(k);continue}if(k=this.tokenizer.heading(y)){y=y.substring(k.raw.length),x.push(k);continue}if(k=this.tokenizer.hr(y)){y=y.substring(k.raw.length),x.push(k);continue}if(k=this.tokenizer.blockquote(y)){y=y.substring(k.raw.length),x.push(k);continue}if(k=this.tokenizer.list(y)){y=y.substring(k.raw.length),x.push(k);continue}if(k=this.tokenizer.html(y)){y=y.substring(k.raw.length),x.push(k);continue}if(k=this.tokenizer.def(y)){y=y.substring(k.raw.length),D=x[x.length-1],D&&(D.type==="paragraph"||D.type==="text")?(D.raw+=`
`+k.raw,D.text+=`
`+k.raw,this.inlineQueue[this.inlineQueue.length-1].src=D.text):this.tokens.links[k.tag]||(this.tokens.links[k.tag]={href:k.href,title:k.title});continue}if(k=this.tokenizer.table(y)){y=y.substring(k.raw.length),x.push(k);continue}if(k=this.tokenizer.lheading(y)){y=y.substring(k.raw.length),x.push(k);continue}if(W=y,this.options.extensions&&this.options.extensions.startBlock){let z=1/0,ae=y.slice(1),pe;this.options.extensions.startBlock.forEach(Re=>{pe=Re.call({lexer:this},ae),typeof pe=="number"&&pe>=0&&(z=Math.min(z,pe))}),z<1/0&&z>=0&&(W=y.substring(0,z+1))}if(this.state.top&&(k=this.tokenizer.paragraph(W))){D=x[x.length-1],S&&D?.type==="paragraph"?(D.raw+=`
`+k.raw,D.text+=`
`+k.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=D.text):x.push(k),S=W.length!==y.length,y=y.substring(k.raw.length);continue}if(k=this.tokenizer.text(y)){y=y.substring(k.raw.length),D=x[x.length-1],D&&D.type==="text"?(D.raw+=`
`+k.raw,D.text+=`
`+k.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=D.text):x.push(k);continue}if(y){let z="Infinite loop on byte: "+y.charCodeAt(0);if(this.options.silent){console.error(z);break}else throw new Error(z)}}return this.state.top=!0,x}inline(y,x=[]){return this.inlineQueue.push({src:y,tokens:x}),x}inlineTokens(y,x=[]){let S,k,D,W=y,z,ae,pe;if(this.tokens.links){let Re=Object.keys(this.tokens.links);if(Re.length>0)for(;(z=this.tokenizer.rules.inline.reflinkSearch.exec(W))!=null;)Re.includes(z[0].slice(z[0].lastIndexOf("[")+1,-1))&&(W=W.slice(0,z.index)+"["+"a".repeat(z[0].length-2)+"]"+W.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(z=this.tokenizer.rules.inline.blockSkip.exec(W))!=null;)W=W.slice(0,z.index)+"["+"a".repeat(z[0].length-2)+"]"+W.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(z=this.tokenizer.rules.inline.anyPunctuation.exec(W))!=null;)W=W.slice(0,z.index)+"++"+W.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;y;)if(ae||(pe=""),ae=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(Re=>(S=Re.call({lexer:this},y,x))?(y=y.substring(S.raw.length),x.push(S),!0):!1))){if(S=this.tokenizer.escape(y)){y=y.substring(S.raw.length),x.push(S);continue}if(S=this.tokenizer.tag(y)){y=y.substring(S.raw.length),k=x[x.length-1],k&&S.type==="text"&&k.type==="text"?(k.raw+=S.raw,k.text+=S.text):x.push(S);continue}if(S=this.tokenizer.link(y)){y=y.substring(S.raw.length),x.push(S);continue}if(S=this.tokenizer.reflink(y,this.tokens.links)){y=y.substring(S.raw.length),k=x[x.length-1],k&&S.type==="text"&&k.type==="text"?(k.raw+=S.raw,k.text+=S.text):x.push(S);continue}if(S=this.tokenizer.emStrong(y,W,pe)){y=y.substring(S.raw.length),x.push(S);continue}if(S=this.tokenizer.codespan(y)){y=y.substring(S.raw.length),x.push(S);continue}if(S=this.tokenizer.br(y)){y=y.substring(S.raw.length),x.push(S);continue}if(S=this.tokenizer.del(y)){y=y.substring(S.raw.length),x.push(S);continue}if(S=this.tokenizer.autolink(y)){y=y.substring(S.raw.length),x.push(S);continue}if(!this.state.inLink&&(S=this.tokenizer.url(y))){y=y.substring(S.raw.length),x.push(S);continue}if(D=y,this.options.extensions&&this.options.extensions.startInline){let Re=1/0,je=y.slice(1),mt;this.options.extensions.startInline.forEach(Ft=>{mt=Ft.call({lexer:this},je),typeof mt=="number"&&mt>=0&&(Re=Math.min(Re,mt))}),Re<1/0&&Re>=0&&(D=y.substring(0,Re+1))}if(S=this.tokenizer.inlineText(D)){y=y.substring(S.raw.length),S.raw.slice(-1)!=="_"&&(pe=S.raw.slice(-1)),ae=!0,k=x[x.length-1],k&&k.type==="text"?(k.raw+=S.raw,k.text+=S.text):x.push(S);continue}if(y){let Re="Infinite loop on byte: "+y.charCodeAt(0);if(this.options.silent){console.error(Re);break}else throw new Error(Re)}}return x}}class Vi{options;parser;constructor(y){this.options=y||e.defaults}space(y){return""}code({text:y,lang:x,escaped:S}){let k=(x||"").match(/^\S*/)?.[0],D=y.replace(/\n$/,"")+`
`;return k?'<pre><code class="language-'+u(k)+'">'+(S?D:u(D,!0))+`</code></pre>
`:"<pre><code>"+(S?D:u(D,!0))+`</code></pre>
`}blockquote({tokens:y}){return`<blockquote>
${this.parser.parse(y)}</blockquote>
`}html({text:y}){return y}heading({tokens:y,depth:x}){return`<h${x}>${this.parser.parseInline(y)}</h${x}>
`}hr(y){return`<hr>
`}list(y){let x=y.ordered,S=y.start,k="";for(let z=0;z<y.items.length;z++){let ae=y.items[z];k+=this.listitem(ae)}let D=x?"ol":"ul",W=x&&S!==1?' start="'+S+'"':"";return"<"+D+W+`>
`+k+"</"+D+`>
`}listitem(y){let x="";if(y.task){let S=this.checkbox({checked:!!y.checked});y.loose?y.tokens.length>0&&y.tokens[0].type==="paragraph"?(y.tokens[0].text=S+" "+y.tokens[0].text,y.tokens[0].tokens&&y.tokens[0].tokens.length>0&&y.tokens[0].tokens[0].type==="text"&&(y.tokens[0].tokens[0].text=S+" "+y.tokens[0].tokens[0].text)):y.tokens.unshift({type:"text",raw:S+" ",text:S+" "}):x+=S+" "}return x+=this.parser.parse(y.tokens,!!y.loose),`<li>${x}</li>
`}checkbox({checked:y}){return"<input "+(y?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:y}){return`<p>${this.parser.parseInline(y)}</p>
`}table(y){let x="",S="";for(let D=0;D<y.header.length;D++)S+=this.tablecell(y.header[D]);x+=this.tablerow({text:S});let k="";for(let D=0;D<y.rows.length;D++){let W=y.rows[D];S="";for(let z=0;z<W.length;z++)S+=this.tablecell(W[z]);k+=this.tablerow({text:S})}return k&&(k=`<tbody>${k}</tbody>`),`<table>
<thead>
`+x+`</thead>
`+k+`</table>
`}tablerow({text:y}){return`<tr>
${y}</tr>
`}tablecell(y){let x=this.parser.parseInline(y.tokens),S=y.header?"th":"td";return(y.align?`<${S} align="${y.align}">`:`<${S}>`)+x+`</${S}>
`}strong({tokens:y}){return`<strong>${this.parser.parseInline(y)}</strong>`}em({tokens:y}){return`<em>${this.parser.parseInline(y)}</em>`}codespan({text:y}){return`<code>${y}</code>`}br(y){return"<br>"}del({tokens:y}){return`<del>${this.parser.parseInline(y)}</del>`}link({href:y,title:x,tokens:S}){let k=this.parser.parseInline(S),D=m(y);if(D===null)return k;y=D;let W='<a href="'+y+'"';return x&&(W+=' title="'+x+'"'),W+=">"+k+"</a>",W}image({href:y,title:x,text:S}){let k=m(y);if(k===null)return S;y=k;let D=`<img src="${y}" alt="${S}"`;return x&&(D+=` title="${x}"`),D+=">",D}text(y){return"tokens"in y&&y.tokens?this.parser.parseInline(y.tokens):y.text}}class Qr{strong({text:y}){return y}em({text:y}){return y}codespan({text:y}){return y}del({text:y}){return y}html({text:y}){return y}text({text:y}){return y}link({text:y}){return""+y}image({text:y}){return""+y}br(){return""}}class Yn{options;renderer;textRenderer;constructor(y){this.options=y||e.defaults,this.options.renderer=this.options.renderer||new Vi,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Qr}static parse(y,x){return new Yn(x).parse(y)}static parseInline(y,x){return new Yn(x).parseInline(y)}parse(y,x=!0){let S="";for(let k=0;k<y.length;k++){let D=y[k];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[D.type]){let z=D,ae=this.options.extensions.renderers[z.type].call({parser:this},z);if(ae!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(z.type)){S+=ae||"";continue}}let W=D;switch(W.type){case"space":{S+=this.renderer.space(W);continue}case"hr":{S+=this.renderer.hr(W);continue}case"heading":{S+=this.renderer.heading(W);continue}case"code":{S+=this.renderer.code(W);continue}case"table":{S+=this.renderer.table(W);continue}case"blockquote":{S+=this.renderer.blockquote(W);continue}case"list":{S+=this.renderer.list(W);continue}case"html":{S+=this.renderer.html(W);continue}case"paragraph":{S+=this.renderer.paragraph(W);continue}case"text":{let z=W,ae=this.renderer.text(z);for(;k+1<y.length&&y[k+1].type==="text";)z=y[++k],ae+=`
`+this.renderer.text(z);x?S+=this.renderer.paragraph({type:"paragraph",raw:ae,text:ae,tokens:[{type:"text",raw:ae,text:ae}]}):S+=ae;continue}default:{let z='Token with "'+W.type+'" type was not found.';if(this.options.silent)return console.error(z),"";throw new Error(z)}}}return S}parseInline(y,x){x=x||this.renderer;let S="";for(let k=0;k<y.length;k++){let D=y[k];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[D.type]){let z=this.options.extensions.renderers[D.type].call({parser:this},D);if(z!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(D.type)){S+=z||"";continue}}let W=D;switch(W.type){case"escape":{S+=x.text(W);break}case"html":{S+=x.html(W);break}case"link":{S+=x.link(W);break}case"image":{S+=x.image(W);break}case"strong":{S+=x.strong(W);break}case"em":{S+=x.em(W);break}case"codespan":{S+=x.codespan(W);break}case"br":{S+=x.br(W);break}case"del":{S+=x.del(W);break}case"text":{S+=x.text(W);break}default:{let z='Token with "'+W.type+'" type was not found.';if(this.options.silent)return console.error(z),"";throw new Error(z)}}}return S}}class ra{options;constructor(y){this.options=y||e.defaults}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(y){return y}postprocess(y){return y}processAllTokens(y){return y}}class Oo{defaults=t();options=this.setOptions;parse=this.parseMarkdown($t.lex,Yn.parse);parseInline=this.parseMarkdown($t.lexInline,Yn.parseInline);Parser=Yn;Renderer=Vi;TextRenderer=Qr;Lexer=$t;Tokenizer=O;Hooks=ra;constructor(...y){this.use(...y)}walkTokens(y,x){let S=[];for(let k of y)switch(S=S.concat(x.call(this,k)),k.type){case"table":{let D=k;for(let W of D.header)S=S.concat(this.walkTokens(W.tokens,x));for(let W of D.rows)for(let z of W)S=S.concat(this.walkTokens(z.tokens,x));break}case"list":{let D=k;S=S.concat(this.walkTokens(D.items,x));break}default:{let D=k;this.defaults.extensions?.childTokens?.[D.type]?this.defaults.extensions.childTokens[D.type].forEach(W=>{let z=D[W].flat(1/0);S=S.concat(this.walkTokens(z,x))}):D.tokens&&(S=S.concat(this.walkTokens(D.tokens,x)))}}return S}use(...y){let x=this.defaults.extensions||{renderers:{},childTokens:{}};return y.forEach(S=>{let k={...S};if(k.async=this.defaults.async||k.async||!1,S.extensions&&(S.extensions.forEach(D=>{if(!D.name)throw new Error("extension name required");if("renderer"in D){let W=x.renderers[D.name];W?x.renderers[D.name]=function(...z){let ae=D.renderer.apply(this,z);return ae===!1&&(ae=W.apply(this,z)),ae}:x.renderers[D.name]=D.renderer}if("tokenizer"in D){if(!D.level||D.level!=="block"&&D.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");let W=x[D.level];W?W.unshift(D.tokenizer):x[D.level]=[D.tokenizer],D.start&&(D.level==="block"?x.startBlock?x.startBlock.push(D.start):x.startBlock=[D.start]:D.level==="inline"&&(x.startInline?x.startInline.push(D.start):x.startInline=[D.start]))}"childTokens"in D&&D.childTokens&&(x.childTokens[D.name]=D.childTokens)}),k.extensions=x),S.renderer){let D=this.defaults.renderer||new Vi(this.defaults);for(let W in S.renderer){if(!(W in D))throw new Error(`renderer '${W}' does not exist`);if(["options","parser"].includes(W))continue;let z=W,ae=S.renderer[z],pe=D[z];D[z]=(...Re)=>{let je=ae.apply(D,Re);return je===!1&&(je=pe.apply(D,Re)),je||""}}k.renderer=D}if(S.tokenizer){let D=this.defaults.tokenizer||new O(this.defaults);for(let W in S.tokenizer){if(!(W in D))throw new Error(`tokenizer '${W}' does not exist`);if(["options","rules","lexer"].includes(W))continue;let z=W,ae=S.tokenizer[z],pe=D[z];D[z]=(...Re)=>{let je=ae.apply(D,Re);return je===!1&&(je=pe.apply(D,Re)),je}}k.tokenizer=D}if(S.hooks){let D=this.defaults.hooks||new ra;for(let W in S.hooks){if(!(W in D))throw new Error(`hook '${W}' does not exist`);if(W==="options")continue;let z=W,ae=S.hooks[z],pe=D[z];ra.passThroughHooks.has(W)?D[z]=Re=>{if(this.defaults.async)return Promise.resolve(ae.call(D,Re)).then(mt=>pe.call(D,mt));let je=ae.call(D,Re);return pe.call(D,je)}:D[z]=(...Re)=>{let je=ae.apply(D,Re);return je===!1&&(je=pe.apply(D,Re)),je}}k.hooks=D}if(S.walkTokens){let D=this.defaults.walkTokens,W=S.walkTokens;k.walkTokens=function(z){let ae=[];return ae.push(W.call(this,z)),D&&(ae=ae.concat(D.call(this,z))),ae}}this.defaults={...this.defaults,...k}}),this}setOptions(y){return this.defaults={...this.defaults,...y},this}lexer(y,x){return $t.lex(y,x??this.defaults)}parser(y,x){return Yn.parse(y,x??this.defaults)}parseMarkdown(y,x){return(k,D)=>{let W={...D},z={...this.defaults,...W},ae=this.onError(!!z.silent,!!z.async);if(this.defaults.async===!0&&W.async===!1)return ae(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof k>"u"||k===null)return ae(new Error("marked(): input parameter is undefined or null"));if(typeof k!="string")return ae(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(k)+", string expected"));if(z.hooks&&(z.hooks.options=z),z.async)return Promise.resolve(z.hooks?z.hooks.preprocess(k):k).then(pe=>y(pe,z)).then(pe=>z.hooks?z.hooks.processAllTokens(pe):pe).then(pe=>z.walkTokens?Promise.all(this.walkTokens(pe,z.walkTokens)).then(()=>pe):pe).then(pe=>x(pe,z)).then(pe=>z.hooks?z.hooks.postprocess(pe):pe).catch(ae);try{z.hooks&&(k=z.hooks.preprocess(k));let pe=y(k,z);z.hooks&&(pe=z.hooks.processAllTokens(pe)),z.walkTokens&&this.walkTokens(pe,z.walkTokens);let Re=x(pe,z);return z.hooks&&(Re=z.hooks.postprocess(Re)),Re}catch(pe){return ae(pe)}}}onError(y,x){return S=>{if(S.message+=`
Please report this to https://github.com/markedjs/marked.`,y){let k="<p>An error occurred:</p><pre>"+u(S.message+"",!0)+"</pre>";return x?Promise.resolve(k):k}if(x)return Promise.reject(S);throw S}}}let yr=new Oo;function rt(Le,y){return yr.parse(Le,y)}rt.options=rt.setOptions=function(Le){return yr.setOptions(Le),rt.defaults=yr.defaults,n(rt.defaults),rt},rt.getDefaults=t,rt.defaults=e.defaults,rt.use=function(...Le){return yr.use(...Le),rt.defaults=yr.defaults,n(rt.defaults),rt},rt.walkTokens=function(Le,y){return yr.walkTokens(Le,y)},rt.parseInline=yr.parseInline,rt.Parser=Yn,rt.parser=Yn.parse,rt.Renderer=Vi,rt.TextRenderer=Qr,rt.Lexer=$t,rt.lexer=$t.lex,rt.Tokenizer=O,rt.Hooks=ra,rt.parse=rt;let tn=rt.options,Xr=rt.setOptions,Fb=rt.use,Kp=rt.walkTokens,bc=rt.parseInline,Gp=rt,qp=Yn.parse,Bb=$t.lex;e.Hooks=ra,e.Lexer=$t,e.Marked=Oo,e.Parser=Yn,e.Renderer=Vi,e.TextRenderer=Qr,e.Tokenizer=O,e.getDefaults=t,e.lexer=Bb,e.marked=rt,e.options=tn,e.parse=Gp,e.parseInline=bc,e.parser=qp,e.setOptions=Xr,e.use=Fb,e.walkTokens=Kp})})();var B6=mn.Hooks||exports.Hooks,W6=mn.Lexer||exports.Lexer,fk=mn.Marked||exports.Marked,U6=mn.Parser||exports.Parser,zy=mn.Renderer||exports.Renderer,V6=mn.TextRenderer||exports.TextRenderer,z6=mn.Tokenizer||exports.Tokenizer,bk=mn.defaults||exports.defaults,H6=mn.getDefaults||exports.getDefaults,pu=mn.lexer||exports.lexer,K6=mn.marked||exports.marked,G6=mn.options||exports.options,Hy=mn.parse||exports.parse,q6=mn.parseInline||exports.parseInline,vk=mn.parser||exports.parser,$6=mn.setOptions||exports.setOptions,j6=mn.use||exports.use,Y6=mn.walkTokens||exports.walkTokens;function Gy(i,e){return new Ky(i,e)}var Ky=class{constructor(e,t){this.reducer=e;this.options=t}state={flowing:!1,ended:!1,destroyed:!1};buffer={data:[],error:[]};listeners={data:[],error:[],end:[]};pendingWritePromises=[];pause(){this.state.destroyed||(this.state.flowing=!1)}resume(){this.state.destroyed||this.state.flowing||(this.state.flowing=!0,this.flowData(),this.flowErrors(),this.flowEnd())}write(e){if(!this.state.destroyed){if(this.state.flowing)this.emitData(e);else if(this.buffer.data.push(e),typeof this.options?.highWaterMark=="number"&&this.buffer.data.length>this.options.highWaterMark)return new Promise(t=>this.pendingWritePromises.push(t))}}error(e){this.state.destroyed||(this.state.flowing?this.emitError(e):this.buffer.error.push(e))}end(e){this.state.destroyed||(typeof e<"u"&&this.write(e),this.state.flowing?(this.emitEnd(),this.destroy()):this.state.ended=!0)}emitData(e){this.listeners.data.slice(0).forEach(t=>t(e))}emitError(e){this.listeners.error.length===0?Ne(e):this.listeners.error.slice(0).forEach(t=>t(e))}emitEnd(){this.listeners.end.slice(0).forEach(e=>e())}on(e,t){if(!this.state.destroyed)switch(e){case"data":this.listeners.data.push(t),this.resume();break;case"end":this.listeners.end.push(t),this.state.flowing&&this.flowEnd()&&this.destroy();break;case"error":this.listeners.error.push(t),this.state.flowing&&this.flowErrors();break}}removeListener(e,t){if(this.state.destroyed)return;let n;switch(e){case"data":n=this.listeners.data;break;case"end":n=this.listeners.end;break;case"error":n=this.listeners.error;break}if(n){let o=n.indexOf(t);o>=0&&n.splice(o,1)}}flowData(){if(this.buffer.data.length>0){let e=this.reducer(this.buffer.data);this.emitData(e),this.buffer.data.length=0;let t=[...this.pendingWritePromises];this.pendingWritePromises.length=0,t.forEach(n=>n())}}flowErrors(){if(this.listeners.error.length>0){for(let e of this.buffer.error)this.emitError(e);this.buffer.error.length=0}}flowEnd(){return this.state.ended?(this.emitEnd(),this.listeners.end.length>0):!1}destroy(){this.state.destroyed||(this.state.destroyed=!0,this.state.ended=!0,this.buffer.data.length=0,this.buffer.error.length=0,this.listeners.data.length=0,this.listeners.error.length=0,this.listeners.end.length=0,this.pendingWritePromises.length=0)}};function qy(i,e,t){i.on("error",n=>{t?.isCancellationRequested||e.onError(n)}),i.on("end",()=>{t?.isCancellationRequested||e.onEnd()}),i.on("data",n=>{t?.isCancellationRequested||e.onData(n)})}function Ik(i,e){let t=Gy(e);return t.end(i),t}function xk(i){let e=!1;return{read:()=>e?null:(e=!0,i)}}var Sg=typeof Buffer<"u",hA=new un(()=>new Uint8Array(256)),$y,jy,ot=class i{static alloc(e){return Sg?new i(Buffer.allocUnsafe(e)):new i(new Uint8Array(e))}static wrap(e){return Sg&&!Buffer.isBuffer(e)&&(e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)),new i(e)}static fromString(e,t){return!(t?.dontUseNodeBuffer||!1)&&Sg?new i(Buffer.from(e)):($y||($y=new TextEncoder),new i($y.encode(e)))}static fromByteArray(e){let t=i.alloc(e.length);for(let n=0,o=e.length;n<o;n++)t.buffer[n]=e[n];return t}static concat(e,t){if(typeof t>"u"){t=0;for(let r=0,s=e.length;r<s;r++)t+=e[r].byteLength}let n=i.alloc(t),o=0;for(let r=0,s=e.length;r<s;r++){let a=e[r];n.set(a,o),o+=a.byteLength}return n}buffer;byteLength;constructor(e){this.buffer=e,this.byteLength=this.buffer.byteLength}clone(){let e=i.alloc(this.byteLength);return e.set(this),e}toString(){return Sg?this.buffer.toString():(jy||(jy=new TextDecoder),jy.decode(this.buffer))}slice(e,t){return new i(this.buffer.subarray(e,t))}set(e,t){if(e instanceof i)this.buffer.set(e.buffer,t);else if(e instanceof Uint8Array)this.buffer.set(e,t);else if(e instanceof ArrayBuffer)this.buffer.set(new Uint8Array(e),t);else if(ArrayBuffer.isView(e))this.buffer.set(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),t);else throw new Error("Unknown argument 'array'")}readUInt32BE(e){return rn(this.buffer,e)}writeUInt32BE(e,t){sn(this.buffer,e,t)}readUInt32LE(e){return mA(this.buffer,e)}writeUInt32LE(e,t){fA(this.buffer,e,t)}readUInt8(e){return Eg(this.buffer,e)}writeUInt8(e,t){Cg(this.buffer,e,t)}indexOf(e,t=0){return gA(this.buffer,e instanceof i?e.buffer:e,t)}};function gA(i,e,t=0){let n=e.byteLength,o=i.byteLength;if(n===0)return 0;if(n===1)return i.indexOf(e[0]);if(n>o-t)return-1;let r=hA.value;r.fill(e.length);for(let c=0;c<e.length;c++)r[e[c]]=e.length-c-1;let s=t+e.length-1,a=s,l=-1;for(;s<o;)if(i[s]===e[a]){if(a===0){l=s;break}s--,a--}else s+=Math.max(e.length-a,r[i[s]]),a=e.length-1;return l}function Sk(i,e){return i[e+0]<<0>>>0|i[e+1]<<8>>>0}function Ek(i,e,t){i[t+0]=e&255,e=e>>>8,i[t+1]=e&255}function rn(i,e){return i[e]*2**24+i[e+1]*2**16+i[e+2]*2**8+i[e+3]}function sn(i,e,t){i[t+3]=e,e=e>>>8,i[t+2]=e,e=e>>>8,i[t+1]=e,e=e>>>8,i[t]=e}function mA(i,e){return i[e+0]<<0>>>0|i[e+1]<<8>>>0|i[e+2]<<16>>>0|i[e+3]<<24>>>0}function fA(i,e,t){i[t+0]=e&255,e=e>>>8,i[t+1]=e&255,e=e>>>8,i[t+2]=e&255,e=e>>>8,i[t+3]=e&255}function Eg(i,e){return i[e]}function Cg(i,e,t){i[t]=e}function Ck(i){return xk(i)}function wk(i){return Ik(i,e=>ot.concat(e))}function Yy(i){let e=0,t=0,n=0,o=new Uint8Array(Math.floor(i.length/4*3)),r=a=>{switch(t){case 3:o[n++]=e|a,t=0;break;case 2:o[n++]=e|a>>>2,e=a<<6,t=3;break;case 1:o[n++]=e|a>>>4,e=a<<4,t=2;break;default:e=a<<2,t=1}};for(let a=0;a<i.length;a++){let l=i.charCodeAt(a);if(l>=65&&l<=90)r(l-65);else if(l>=97&&l<=122)r(l-97+26);else if(l>=48&&l<=57)r(l-48+52);else if(l===43||l===45)r(62);else if(l===47||l===95)r(63);else{if(l===61)break;throw new SyntaxError(`Unexpected base64 character ${i[a]}`)}}let s=n;for(;t>0;)r(0);return ot.wrap(o).slice(0,s)}var bA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",vA="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function Qy({buffer:i},e=!0,t=!1){let n=t?vA:bA,o="",r=i.byteLength%3,s=0;for(;s<i.byteLength-r;s+=3){let a=i[s+0],l=i[s+1],c=i[s+2];o+=n[a>>>2],o+=n[(a<<4|l>>>4)&63],o+=n[(l<<2|c>>>6)&63],o+=n[c&63]}if(r===1){let a=i[s+0];o+=n[a>>>2],o+=n[a<<4&63],e&&(o+="==")}else if(r===2){let a=i[s+0],l=i[s+1];o+=n[a>>>2],o+=n[(a<<4|l>>>4)&63],o+=n[l<<2&63],e&&(o+="=")}return o}function jl(i){let e=JSON.parse(i);return e=$l(e),e}function $l(i,e=0){if(!i||e>200)return i;if(typeof i=="object"){switch(i.$mid){case 1:return N.revive(i);case 2:return new RegExp(i.source,i.flags);case 17:return new Date(i.source)}if(i instanceof ot||i instanceof Uint8Array)return i;if(Array.isArray(i))for(let t=0;t<i.length;++t)i[t]=$l(i[t],e+1);else for(let t in i)Object.hasOwnProperty.call(i,t)&&(i[t]=$l(i[t],e+1))}return i}function La(i){if(!i||typeof i!="object"||i instanceof RegExp)return i;let e=Array.isArray(i)?[]:{};return Object.entries(i).forEach(([t,n])=>{e[t]=n&&typeof n=="object"?La(n):n}),e}var yA=Object.prototype.hasOwnProperty;function Zy(i,e){return Jy(i,e,new Set)}function Jy(i,e,t){if(Dn(i))return i;let n=e(i);if(typeof n<"u")return n;if(Array.isArray(i)){let o=[];for(let r of i)o.push(Jy(r,e,t));return o}if(Ut(i)){if(t.has(i))throw new Error("Cannot clone recursive data-structure");t.add(i);let o={};for(let r in i)yA.call(i,r)&&(o[r]=Jy(i[r],e,t));return t.delete(i),o}return i}function hu(i,e,t=!0){return Ut(i)?(Ut(e)&&Object.keys(e).forEach(n=>{n in i?t&&(Ut(i[n])&&Ut(e[n])?hu(i[n],e[n],t):i[n]=e[n]):i[n]=e[n]}),i):e}function Rn(i,e){if(i===e)return!0;if(i==null||e===null||e===void 0||typeof i!=typeof e||typeof i!="object"||Array.isArray(i)!==Array.isArray(e))return!1;let t,n;if(Array.isArray(i)){if(i.length!==e.length)return!1;for(t=0;t<i.length;t++)if(!Rn(i[t],e[t]))return!1}else{let o=[];for(n in i)o.push(n);o.sort();let r=[];for(n in e)r.push(n);if(r.sort(),!Rn(o,r))return!1;for(t=0;t<o.length;t++)if(!Rn(i[o[t]],e[o[t]]))return!1}return!0}var tI=Object.freeze({image:({href:i,title:e,text:t})=>{let n=[],o=[];return i&&({href:i,dimensions:n}=tk(i),o.push(`src="${lu(i)}"`)),t&&o.push(`alt="${lu(t)}"`),e&&o.push(`title="${lu(e)}"`),n.length&&(o=o.concat(n)),"<img "+o.join(" ")+">"},paragraph({tokens:i}){return`<p>${this.parser.parseInline(i)}</p>`},link({href:i,title:e,tokens:t}){let n=this.parser.parseInline(t);return typeof i!="string"?"":(i===n&&(n=hg(n)),e=typeof e=="string"?lu(hg(e)):"",i=hg(i),i=i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),`<a href="${i}" title="${e||i}" draggable="false">${n}</a>`)}});function gu(i,e={},t={}){let n=new re,o=!1,r=ay(e),s=function(f){let b;try{b=jl(decodeURIComponent(f))}catch{}return b?(b=Zy(b,E=>{if(i.uris&&i.uris[E])return N.revive(i.uris[E])}),encodeURIComponent(JSON.stringify(b))):f},a=function(f,b){let E=i.uris&&i.uris[f],T=N.revive(E);return b?f.startsWith(H.data+":")?f:(T||(T=N.parse(f)),hn.uriToBrowserUri(T).toString(!0)):!T||N.parse(f).toString()===T.toString()?f:(T.query&&(T=T.with({query:s(T.query)})),T.toString())},l=new zy;l.image=tI.image,l.link=tI.link,l.paragraph=tI.paragraph;let c=[],u=[];if(e.codeBlockRendererSync?l.code=({text:f,lang:b})=>{let E=Vy.nextId(),T=e.codeBlockRendererSync(Tk(b),f);return u.push([E,T]),`<div class="code" data-code="${E}">${_r(f)}</div>`}:e.codeBlockRenderer&&(l.code=({text:f,lang:b})=>{let E=Vy.nextId(),T=e.codeBlockRenderer(Tk(b),f);return c.push(T.then(_=>[E,_])),`<div class="code" data-code="${E}">${_r(f)}</div>`}),e.actionHandler){let f=function(T){let _=T.target.closest("a[data-href]");if(on(_))try{let O=_.dataset.href;O&&(i.baseUri&&(O=nI(N.from(i.baseUri),O)),e.actionHandler.callback(O,T))}catch(O){Ne(O)}finally{T.preventDefault()}},b=e.actionHandler.disposables.add(new We(r,"click")),E=e.actionHandler.disposables.add(new We(r,"auxclick"));e.actionHandler.disposables.add(ee.any(b.event,E.event)(T=>{let _=new ci(Pe(r),T);!_.leftButton&&!_.middleButton||f(_)})),e.actionHandler.disposables.add(Z(r,"keydown",T=>{let _=new ht(T);!_.equals(10)&&!_.equals(3)||f(_)}))}i.supportHtml||(l.html=({text:f})=>e.sanitizerOptions?.replaceWithPlaintext?_r(f):(i.isTrusted?f.match(/^(<span[^>]+>)|(<\/\s*span>)$/):void 0)?f:""),t.renderer=l;let p=i.value??"";p.length>1e5&&(p=`${p.substr(0,1e5)}\u2026`),i.supportThemeIcons&&(p=ZT(p));let h;if(e.fillInIncompleteTokens){let f={...bk,...t},b=pu(p,f),E=LA(b);h=vk(E,f)}else h=Hy(p,{...t,async:!1});i.supportThemeIcons&&(h=$o(h).map(b=>typeof b=="string"?b:b.outerHTML).join(""));let v=new DOMParser().parseFromString(iI({isTrusted:i.isTrusted,...e.sanitizerOptions},h),"text/html");if(v.body.querySelectorAll("img, audio, video, source").forEach(f=>{let b=f.getAttribute("src");if(b){let E=b;try{i.baseUri&&(E=nI(N.from(i.baseUri),E))}catch{}if(f.setAttribute("src",a(E,!0)),e.remoteImageIsAllowed){let T=N.parse(E);T.scheme!==H.file&&T.scheme!==H.data&&!e.remoteImageIsAllowed(T)&&f.replaceWith(Y("",void 0,f.outerHTML))}}}),v.body.querySelectorAll("a").forEach(f=>{let b=f.getAttribute("href");if(f.setAttribute("href",""),!b||/^data:|javascript:/i.test(b)||/^command:/i.test(b)&&!i.isTrusted||/^command:(\/\/\/)?_workbench\.downloadResource/i.test(b))f.replaceWith(...f.childNodes);else{let E=a(b,!1);i.baseUri&&(E=nI(N.from(i.baseUri),b)),f.dataset.href=E}}),r.innerHTML=iI({isTrusted:i.isTrusted,...e.sanitizerOptions},v.body.innerHTML),c.length>0)Promise.all(c).then(f=>{if(o)return;let b=new Map(f),E=r.querySelectorAll("div[data-code]");for(let T of E){let _=b.get(T.dataset.code??"");_&&Mt(T,_)}e.asyncRenderCallback?.()});else if(u.length>0){let f=new Map(u),b=r.querySelectorAll("div[data-code]");for(let E of b){let T=f.get(E.dataset.code??"");T&&Mt(E,T)}}if(e.asyncRenderCallback)for(let f of r.getElementsByTagName("img")){let b=n.add(Z(f,"load",()=>{b.dispose(),e.asyncRenderCallback()}))}return{element:r,dispose:()=>{o=!0,n.dispose()}}}function Tk(i){if(!i)return"";let e=i.split(/[\s+|:|,|\{|\?]/,1);return e.length?e[0]:i}function nI(i,e){return/^\w[\w\d+.-]*:/.test(e)?e:i.path.endsWith("/")?Bv(i,e).toString():Bv(Al(i),e).toString()}var IA=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"];function iI(i,e){let{config:t,allowedSchemes:n}=xA(i),o=new re;o.add(kk("uponSanitizeAttribute",(r,s)=>{if(s.attrName==="style"||s.attrName==="class"){if(r.tagName==="SPAN"){if(s.attrName==="style"){s.keepAttr=/^(color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z0-9]+)+\));)?(background-color\:(#[0-9a-fA-F]+|var\(--vscode(-[a-zA-Z0-9]+)+\));)?(border-radius:[0-9]+px;)?$/.test(s.attrValue);return}else if(s.attrName==="class"){s.keepAttr=/^codicon codicon-[a-z\-]+( codicon-modifier-[a-z\-]+)?$/.test(s.attrValue);return}}s.keepAttr=!1;return}else if(r.tagName==="INPUT"&&r.attributes.getNamedItem("type")?.value==="checkbox"){if(s.attrName==="type"&&s.attrValue==="checkbox"||s.attrName==="disabled"||s.attrName==="checked"){s.keepAttr=!0;return}s.keepAttr=!1}})),o.add(kk("uponSanitizeElement",(r,s)=>{if(s.tagName==="input"&&(r.attributes.getNamedItem("type")?.value==="checkbox"?r.setAttribute("disabled",""):i.replaceWithPlaintext||r.remove()),i.replaceWithPlaintext&&!s.allowedTags[s.tagName]&&s.tagName!=="body"&&r.parentElement){let a,l;if(s.tagName==="#comment")a=`<!--${r.textContent}-->`;else{let h=IA.includes(s.tagName),m=r.attributes.length?" "+Array.from(r.attributes).map(v=>`${v.name}="${v.value}"`).join(" "):"";a=`<${s.tagName}${m}>`,h||(l=`</${s.tagName}>`)}let c=document.createDocumentFragment(),u=r.parentElement.ownerDocument.createTextNode(a);c.appendChild(u);let p=l?r.parentElement.ownerDocument.createTextNode(l):void 0;for(;r.firstChild;)c.appendChild(r.firstChild);p&&c.appendChild(p),r.parentElement.replaceChild(c,r)}})),o.add(Zh(n));try{return xa(e,{...t,RETURN_TRUSTED_TYPE:!0})}finally{o.dispose()}}var oI=["align","autoplay","alt","checked","class","colspan","controls","data-code","data-href","disabled","draggable","height","href","loop","muted","playsinline","poster","rowspan","src","style","target","title","type","width","start"];function xA(i){let e=[H.http,H.https,H.mailto,H.data,H.file,H.vscodeFileResource,H.vscodeRemote,H.vscodeRemoteResource];return i.isTrusted&&e.push(H.command),{config:{ALLOWED_TAGS:i.allowedTags??[...eg],ALLOWED_ATTR:oI,ALLOW_UNKNOWN_PROTOCOLS:!0},allowedSchemes:e}}function Dk(i){return typeof i=="string"?i:SA(i)}function SA(i,e){let t=i.value??"";t.length>1e5&&(t=`${t.substr(0,1e5)}\u2026`);let n=Hy(t,{async:!1,renderer:e?wA.value:CA.value}).replace(/&(#\d+|[a-zA-Z]+);/g,o=>EA.get(o)??o);return iI({isTrusted:!1},n).toString()}var EA=new Map([["&quot;",'"'],["&nbsp;"," "],["&amp;","&"],["&#39;","'"],["&lt;","<"],["&gt;",">"]]);function _k(){let i=new zy;return i.code=({text:e})=>e,i.blockquote=({text:e})=>e+`
`,i.html=e=>"",i.heading=function({tokens:e}){return this.parser.parseInline(e)+`
`},i.hr=()=>"",i.list=function({items:e}){return e.map(t=>this.listitem(t)).join(`
`)+`
`},i.listitem=({text:e})=>e+`
`,i.paragraph=function({tokens:e}){return this.parser.parseInline(e)+`
`},i.table=function({header:e,rows:t}){return e.map(n=>this.tablecell(n)).join(" ")+`
`+t.map(n=>n.map(o=>this.tablecell(o)).join(" ")).join(`
`)+`
`},i.tablerow=({text:e})=>e,i.tablecell=function({tokens:e}){return this.parser.parseInline(e)},i.strong=({text:e})=>e,i.em=({text:e})=>e,i.codespan=({text:e})=>e,i.br=e=>`
`,i.del=({text:e})=>e,i.image=e=>"",i.text=({text:e})=>e,i.link=({text:e})=>e,i}var CA=new un(i=>_k()),wA=new un(()=>{let i=_k();return i.code=({text:e})=>`
\`\`\`
${e}
\`\`\`
`,i});function wg(i){let e="";return i.forEach(t=>{e+=t.raw}),e}function Lk(i){if(i.tokens)for(let e=i.tokens.length-1;e>=0;e--){let t=i.tokens[e];if(t.type==="text"){let n=t.raw.split(`
`),o=n[n.length-1];if(o.includes("`"))return PA(i);if(o.includes("**"))return BA(i);if(o.match(/\*\w/))return OA(i);if(o.match(/(^|\s)__\w/))return WA(i);if(o.match(/(^|\s)_\w/))return AA(i);if(TA(o)||kA(o)&&i.tokens.slice(0,e).some(r=>r.type==="text"&&r.raw.match(/\[[^\]]*$/))){let r=i.tokens.slice(e+1);return r[0]?.type==="link"&&r[1]?.type==="text"&&r[1].raw.match(/^ *"[^"]*$/)||o.match(/^[^"]* +"[^"]*$/)?NA(i):MA(i)}else if(o.match(/(^|\s)\[\w*/))return FA(i)}}}function TA(i){return!!i.match(/(^|\s)\[.*\]\(\w*/)}function kA(i){return!!i.match(/^[^\[]*\]\([^\)]*$/)}function DA(i){let e=i.items[i.items.length-1],t=e.tokens?e.tokens[e.tokens.length-1]:void 0,n;if(t?.type==="text"&&!("inRawBlock"in e)&&(n=Lk(t)),!n||n.type!=="paragraph")return;let o=wg(i.items.slice(0,-1)),r=e.raw.match(/^(\s*(-|\d+\.|\*) +)/)?.[0];if(!r)return;let s=r+wg(e.tokens.slice(0,-1))+n.raw,a=pu(o+s)[0];if(a.type==="list")return a}var _A=3;function LA(i){for(let e=0;e<_A;e++){let t=RA(i);if(t)i=t;else break}return i}function RA(i){let e,t;for(e=0;e<i.length;e++){let n=i[e];if(n.type==="paragraph"&&n.raw.match(/(\n|^)\|/)){t=UA(i.slice(e));break}if(e===i.length-1&&n.type==="list"){let o=DA(n);if(o){t=[o];break}}if(e===i.length-1&&n.type==="paragraph"){let o=Lk(n);if(o){t=[o];break}}}if(t){let n=[...i.slice(0,e),...t];return n.links=i.links,n}return null}function PA(i){return Ss(i,"`")}function OA(i){return Ss(i,"*")}function AA(i){return Ss(i,"_")}function MA(i){return Ss(i,")")}function NA(i){return Ss(i,'")')}function FA(i){return Ss(i,"](https://microsoft.com)")}function BA(i){return Ss(i,"**")}function WA(i){return Ss(i,"__")}function Ss(i,e){let t=wg(Array.isArray(i)?i:[i]);return pu(t+e)[0]}function UA(i){let e=wg(i),t=e.split(`
`),n,o=!1;for(let r=0;r<t.length;r++){let s=t[r].trim();if(typeof n>"u"&&s.match(/^\s*\|/)){let a=s.match(/(\|[^\|]+)(?=\||$)/g);a&&(n=a.length)}else if(typeof n=="number")if(s.match(/^\s*\|/)){if(r!==t.length-1)return;o=!0}else return}if(typeof n=="number"&&n>0){let r=o?t.slice(0,-1).join(`
`):e,s=!!r.match(/\|\s*$/),a=r+(s?"":"|")+`
|${" --- |".repeat(n)}`;return pu(a)}}function kk(i,e){return Hh(i,e),le(()=>Kh(i))}var VA={showHover:()=>{},hideHover:()=>{},showAndFocusLastHover:()=>{},setupManagedHover:()=>null,showManagedHover:()=>{}};function Nr(){return VA}var jG={...mk,selectBackground:"#3C3C3C",selectForeground:"#F0F0F0",selectBorder:"#3C3C3C",decoratorRightForeground:void 0,selectListBackground:void 0,selectListBorder:void 0,focusBorder:void 0};var Yl=class extends fi{_onChange=this._register(new C);onChange=this._onChange.event;_onKeyDown=this._register(new C);onKeyDown=this._onKeyDown.event;_opts;_icon;domNode;_checked;_hover;constructor(e){super(),this._opts=e,this._checked=this._opts.isChecked;let t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...Fe.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this._hover=this._register(Nr().setupManagedHover(e.hoverDelegate??Ai("mouse"),this.domNode,this._opts.title)),this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,n=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),n.preventDefault())}),this._register(this.ignoreGesture(this.domNode)),this.onkeydown(this.domNode,n=>{if(n.keyCode===10||n.keyCode===3){this.checked=!this._checked,this._onChange.fire(!0),n.preventDefault(),n.stopPropagation();return}this._onKeyDown.fire(n)})}get enabled(){return this.domNode.getAttribute("aria-disabled")!=="true"}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}setIcon(e){this._icon&&this.domNode.classList.remove(...Fe.asClassNameArray(this._icon)),this._icon=e,this._icon&&this.domNode.classList.add(...Fe.asClassNameArray(this._icon))}width(){return 22}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder||"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground||"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground||"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}setTitle(e){this._hover.update(e),this.domNode.setAttribute("aria-label",e)}set visible(e){this.domNode.style.display=e?"":"none"}get visible(){return this.domNode.style.display!=="none"}};var Hj={buttonBackground:"#0E639C",buttonHoverBackground:"#006BB3",buttonSeparator:B.white.toString(),buttonForeground:B.white.toString(),buttonBorder:void 0,buttonSecondaryBackground:void 0,buttonSecondaryForeground:void 0,buttonSecondaryHoverBackground:void 0},mu=class extends A{options;_element;_label="";_labelElement;_labelShortElement;_hover;_onDidClick=this._register(new C);get onDidClick(){return this._onDidClick.event}_onDidEscape=this._register(new C);get onDidEscape(){return this._onDidEscape.event}focusTracker;constructor(e,t){super(),this.options=t,this._element=document.createElement("a"),this._element.classList.add("monaco-button"),this._element.tabIndex=0,this._element.setAttribute("role","button"),this._element.classList.toggle("secondary",!!t.secondary);let n=t.secondary?t.buttonSecondaryBackground:t.buttonBackground,o=t.secondary?t.buttonSecondaryForeground:t.buttonForeground;this._element.style.color=o||"",this._element.style.backgroundColor=n||"",t.supportShortLabel&&(this._labelShortElement=document.createElement("div"),this._labelShortElement.classList.add("monaco-button-label-short"),this._element.appendChild(this._labelShortElement),this._labelElement=document.createElement("div"),this._labelElement.classList.add("monaco-button-label"),this._element.appendChild(this._labelElement),this._element.classList.add("monaco-text-button-with-short-label")),typeof t.title=="string"&&this.setTitle(t.title),typeof t.ariaLabel=="string"&&this._element.setAttribute("aria-label",t.ariaLabel),e.appendChild(this._element),this._register(_n.addTarget(this._element)),[ye.CLICK,Dt.Tap].forEach(r=>{this._register(Z(this._element,r,s=>{if(!this.enabled){Ct.stop(s);return}this._onDidClick.fire(s)}))}),this._register(Z(this._element,ye.KEY_DOWN,r=>{let s=new ht(r),a=!1;this.enabled&&(s.equals(3)||s.equals(10))?(this._onDidClick.fire(r),a=!0):s.equals(9)&&(this._onDidEscape.fire(r),this._element.blur(),a=!0),a&&Ct.stop(s,!0)})),this._register(Z(this._element,ye.MOUSE_OVER,r=>{this._element.classList.contains("disabled")||this.updateBackground(!0)})),this._register(Z(this._element,ye.MOUSE_OUT,r=>{this.updateBackground(!1)})),this.focusTracker=this._register(Ul(this._element)),this._register(this.focusTracker.onDidFocus(()=>{this.enabled&&this.updateBackground(!0)})),this._register(this.focusTracker.onDidBlur(()=>{this.enabled&&this.updateBackground(!1)}))}dispose(){super.dispose(),this._element.remove()}getContentElements(e){let t=[];for(let n of $o(e))if(typeof n=="string"){if(n=n.trim(),n==="")continue;let o=document.createElement("span");o.textContent=n,t.push(o)}else t.push(n);return t}updateBackground(e){let t;this.options.secondary?t=e?this.options.buttonSecondaryHoverBackground:this.options.buttonSecondaryBackground:t=e?this.options.buttonHoverBackground:this.options.buttonBackground,t&&(this._element.style.backgroundColor=t)}get element(){return this._element}set label(e){if(this._label===e||pg(this._label)&&pg(e)&&ek(this._label,e))return;this._element.classList.add("monaco-text-button");let t=this.options.supportShortLabel?this._labelElement:this._element;if(pg(e)){let o=gu(e,{inline:!0});o.dispose();let r=o.element.querySelector("p")?.innerHTML;if(r){let s=xa(r,{ADD_TAGS:["b","i","u","code","span"],ALLOWED_ATTR:["class"],RETURN_TRUSTED_TYPE:!0});t.innerHTML=s}else Mt(t)}else this.options.supportIcons?Mt(t,...this.getContentElements(e)):t.textContent=e;let n="";typeof this.options.title=="string"?n=this.options.title:this.options.title&&(n=Dk(e)),this.setTitle(n),typeof this.options.ariaLabel=="string"?this._element.setAttribute("aria-label",this.options.ariaLabel):this.options.ariaLabel&&this._element.setAttribute("aria-label",n),this._label=e}get label(){return this._label}set labelShort(e){!this.options.supportShortLabel||!this._labelShortElement||(this.options.supportIcons?Mt(this._labelShortElement,...this.getContentElements(e)):this._labelShortElement.textContent=e)}set icon(e){this._element.classList.add(...Fe.asClassNameArray(e))}set enabled(e){e?(this._element.classList.remove("disabled"),this._element.setAttribute("aria-disabled",String(!1)),this._element.tabIndex=0):(this._element.classList.add("disabled"),this._element.setAttribute("aria-disabled",String(!0)))}get enabled(){return!this._element.classList.contains("disabled")}set checked(e){e?(this._element.classList.add("checked"),this._element.setAttribute("aria-checked","true")):(this._element.classList.remove("checked"),this._element.setAttribute("aria-checked","false"))}get checked(){return this._element.classList.contains("checked")}setTitle(e){!this._hover&&e!==""?this._hover=this._register(Nr().setupManagedHover(this.options.hoverDelegate??Ai("mouse"),this._element,e)):this._hover&&this._hover.update(e)}focus(){this._element.focus()}hasFocus(){return gs(this._element)}};function Pk(i,e){return i.replace(/^~($|\/|\\)/,`${e}$1`)}function Tg(i,e){return Se||e?i.replace(/\(&&\w\)|&&/g,""):Ye?i.replace(/&&|&/g,t=>t==="&"?"&&":"&"):i.replace(/&&/g,"_")}function kg(i){if(i.endsWith("]")){let e=i.lastIndexOf(" [",i.length-2);if(e!==-1){let t=Rk(i.substring(0,e)),n=i.substring(e);return{name:t.name+n,parentPath:t.parentPath}}}return Rk(i)}function Rk(i){let e=i.indexOf("/")!==-1?Be:Et,t=e.basename(i),n=e.dirname(i);return t.length?{name:t,parentPath:n}:{name:n,parentPath:""}}var Dg=class{constructor(e){this.nodes=e}toString(){return this.nodes.map(e=>typeof e=="string"?e:e.label).join("")}};L([q],Dg.prototype,"toString",1);var GA=/\[([^\]]+)\]\(((?:https?:\/\/|command:|file:)[^\)\s]+)(?: (["'])(.+?)(\3))?\)/gi;function Ok(i){let e=[],t=0,n;for(;n=GA.exec(i);){n.index-t>0&&e.push(i.substring(t,n.index));let[,o,r,,s]=n;s?e.push({label:o,href:r,title:s}):e.push({label:o,href:r}),t=n.index+n[0].length}return t<i.length&&e.push(i.substring(t)),new Dg(e)}var qA=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function Ak(i){return qA.test(i)}var Sn=function(){if(typeof crypto=="object"&&typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);let i;typeof crypto=="object"&&typeof crypto.getRandomValues=="function"?i=crypto.getRandomValues.bind(crypto):i=function(n){for(let o=0;o<n.length;o++)n[o]=Math.floor(Math.random()*256);return n};let e=new Uint8Array(16),t=[];for(let n=0;n<256;n++)t.push(n.toString(16).padStart(2,"0"));return function(){i(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let o=0,r="";return r+=t[e[o++]],r+=t[e[o++]],r+=t[e[o++]],r+=t[e[o++]],r+="-",r+=t[e[o++]],r+=t[e[o++]],r+="-",r+=t[e[o++]],r+=t[e[o++]],r+="-",r+=t[e[o++]],r+=t[e[o++]],r+="-",r+=t[e[o++]],r+=t[e[o++]],r+=t[e[o++]],r+=t[e[o++]],r+=t[e[o++]],r+=t[e[o++]],r}}();var jA=Object.freeze({create:i=>io(i.map(e=>e.toString())).join(`\r
`),split:i=>i.split(`\r
`),parse:i=>jA.split(i).filter(e=>!e.startsWith("#"))});var Mk=class i{constructor(e){this.value=e}static sep=".";static None=new i("@@none@@");static Empty=new i("");equals(e){return this.value===e.value}contains(e){return this.equals(e)||this.value===""||e.value.startsWith(this.value+i.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(...e){return new i((this.value?[this.value,...e]:e).join(i.sep))}};var Ue=class i{lineNumber;column;constructor(e,t){this.lineNumber=e,this.column=t}with(e=this.lineNumber,t=this.column){return e===this.lineNumber&&t===this.column?this:new i(e,t)}delta(e=0,t=0){return this.with(this.lineNumber+e,this.column+t)}equals(e){return i.equals(this,e)}static equals(e,t){return!e&&!t?!0:!!e&&!!t&&e.lineNumber===t.lineNumber&&e.column===t.column}isBefore(e){return i.isBefore(this,e)}static isBefore(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<t.column}isBeforeOrEqual(e){return i.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,t){return e.lineNumber<t.lineNumber?!0:t.lineNumber<e.lineNumber?!1:e.column<=t.column}static compare(e,t){let n=e.lineNumber|0,o=t.lineNumber|0;if(n===o){let r=e.column|0,s=t.column|0;return r-s}return n-o}clone(){return new i(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new i(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};var te=class i{startLineNumber;startColumn;endLineNumber;endColumn;constructor(e,t,n,o){e>n||e===n&&t>o?(this.startLineNumber=n,this.startColumn=o,this.endLineNumber=e,this.endColumn=t):(this.startLineNumber=e,this.startColumn=t,this.endLineNumber=n,this.endColumn=o)}isEmpty(){return i.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return i.containsPosition(this,e)}static containsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<e.startColumn||t.lineNumber===e.endLineNumber&&t.column>e.endColumn)}static strictContainsPosition(e,t){return!(t.lineNumber<e.startLineNumber||t.lineNumber>e.endLineNumber||t.lineNumber===e.startLineNumber&&t.column<=e.startColumn||t.lineNumber===e.endLineNumber&&t.column>=e.endColumn)}containsRange(e){return i.containsRange(this,e)}static containsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>e.endColumn)}strictContainsRange(e){return i.strictContainsRange(this,e)}static strictContainsRange(e,t){return!(t.startLineNumber<e.startLineNumber||t.endLineNumber<e.startLineNumber||t.startLineNumber>e.endLineNumber||t.endLineNumber>e.endLineNumber||t.startLineNumber===e.startLineNumber&&t.startColumn<=e.startColumn||t.endLineNumber===e.endLineNumber&&t.endColumn>=e.endColumn)}plusRange(e){return i.plusRange(this,e)}static plusRange(e,t){let n,o,r,s;return t.startLineNumber<e.startLineNumber?(n=t.startLineNumber,o=t.startColumn):t.startLineNumber===e.startLineNumber?(n=t.startLineNumber,o=Math.min(t.startColumn,e.startColumn)):(n=e.startLineNumber,o=e.startColumn),t.endLineNumber>e.endLineNumber?(r=t.endLineNumber,s=t.endColumn):t.endLineNumber===e.endLineNumber?(r=t.endLineNumber,s=Math.max(t.endColumn,e.endColumn)):(r=e.endLineNumber,s=e.endColumn),new i(n,o,r,s)}intersectRanges(e){return i.intersectRanges(this,e)}static intersectRanges(e,t){let n=e.startLineNumber,o=e.startColumn,r=e.endLineNumber,s=e.endColumn,a=t.startLineNumber,l=t.startColumn,c=t.endLineNumber,u=t.endColumn;return n<a?(n=a,o=l):n===a&&(o=Math.max(o,l)),r>c?(r=c,s=u):r===c&&(s=Math.min(s,u)),n>r||n===r&&o>s?null:new i(n,o,r,s)}equalsRange(e){return i.equalsRange(this,e)}static equalsRange(e,t){return!e&&!t?!0:!!e&&!!t&&e.startLineNumber===t.startLineNumber&&e.startColumn===t.startColumn&&e.endLineNumber===t.endLineNumber&&e.endColumn===t.endColumn}getEndPosition(){return i.getEndPosition(this)}static getEndPosition(e){return new Ue(e.endLineNumber,e.endColumn)}getStartPosition(){return i.getStartPosition(this)}static getStartPosition(e){return new Ue(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,t){return new i(this.startLineNumber,this.startColumn,e,t)}setStartPosition(e,t){return new i(e,t,this.endLineNumber,this.endColumn)}collapseToStart(){return i.collapseToStart(this)}static collapseToStart(e){return new i(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return i.collapseToEnd(this)}static collapseToEnd(e){return new i(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new i(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}static fromPositions(e,t=e){return new i(e.lineNumber,e.column,t.lineNumber,t.column)}static lift(e){return e?new i(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<e.startColumn)}static areIntersecting(e,t){return!(e.endLineNumber<t.startLineNumber||e.endLineNumber===t.startLineNumber&&e.endColumn<=t.startColumn||t.endLineNumber<e.startLineNumber||t.endLineNumber===e.startLineNumber&&t.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,t){if(e&&t){let r=e.startLineNumber|0,s=t.startLineNumber|0;if(r===s){let a=e.startColumn|0,l=t.startColumn|0;if(a===l){let c=e.endLineNumber|0,u=t.endLineNumber|0;if(c===u){let p=e.endColumn|0,h=t.endColumn|0;return p-h}return c-u}return a-l}return r-s}return(e?1:0)-(t?1:0)}static compareRangesUsingEnds(e,t){return e.endLineNumber===t.endLineNumber?e.endColumn===t.endColumn?e.startLineNumber===t.startLineNumber?e.startColumn-t.startColumn:e.startLineNumber-t.startLineNumber:e.endColumn-t.endColumn:e.endLineNumber-t.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};var Fr=class i extends te{selectionStartLineNumber;selectionStartColumn;positionLineNumber;positionColumn;constructor(e,t,n,o){super(e,t,n,o),this.selectionStartLineNumber=e,this.selectionStartColumn=t,this.positionLineNumber=n,this.positionColumn=o}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(e){return i.selectionsEqual(this,e)}static selectionsEqual(e,t){return e.selectionStartLineNumber===t.selectionStartLineNumber&&e.selectionStartColumn===t.selectionStartColumn&&e.positionLineNumber===t.positionLineNumber&&e.positionColumn===t.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(e,t){return this.getDirection()===0?new i(this.startLineNumber,this.startColumn,e,t):new i(e,t,this.startLineNumber,this.startColumn)}getPosition(){return new Ue(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new Ue(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(e,t){return this.getDirection()===0?new i(e,t,this.endLineNumber,this.endColumn):new i(this.endLineNumber,this.endColumn,e,t)}static fromPositions(e,t=e){return new i(e.lineNumber,e.column,t.lineNumber,t.column)}static fromRange(e,t){return t===0?new i(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):new i(e.endLineNumber,e.endColumn,e.startLineNumber,e.startColumn)}static liftSelection(e){return new i(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn)}static selectionsArrEqual(e,t){if(e&&!t||!e&&t)return!1;if(!e&&!t)return!0;if(e.length!==t.length)return!1;for(let n=0,o=e.length;n<o;n++)if(!this.selectionsEqual(e[n],t[n]))return!1;return!0}static isISelection(e){return e&&typeof e.selectionStartLineNumber=="number"&&typeof e.selectionStartColumn=="number"&&typeof e.positionLineNumber=="number"&&typeof e.positionColumn=="number"}static createWithDirection(e,t,n,o,r){return r===0?new i(e,t,n,o):new i(n,o,e,t)}};var vi=class{static getLanguageId(e){return(e&255)>>>0}static getTokenType(e){return(e&768)>>>8}static containsBalancedBrackets(e){return(e&1024)!==0}static getFontStyle(e){return(e&30720)>>>11}static getForeground(e){return(e&16744448)>>>15}static getBackground(e){return(e&4278190080)>>>24}static getClassNameFromMetadata(e){let n="mtk"+this.getForeground(e),o=this.getFontStyle(e);return o&1&&(n+=" mtki"),o&2&&(n+=" mtkb"),o&4&&(n+=" mtku"),o&8&&(n+=" mtks"),n}static getInlineStyleFromMetadata(e,t){let n=this.getForeground(e),o=this.getFontStyle(e),r=`color: ${t[n]};`;o&1&&(r+="font-style: italic;"),o&2&&(r+="font-weight: bold;");let s="";return o&4&&(s+=" underline"),o&8&&(s+=" line-through"),s&&(r+=`text-decoration:${s};`),r}static getPresentationFromMetadata(e){let t=this.getForeground(e),n=this.getFontStyle(e);return{foreground:t,italic:!!(n&1),bold:!!(n&2),underline:!!(n&4),strikethrough:!!(n&8)}}};var _g="**",Nk="/",Lg="[/\\\\]",Rg="[^/\\\\]",YA=/\//g;function Fk(i,e){switch(i){case 0:return"";case 1:return`${Rg}*?`;default:return`(?:${Lg}|${Rg}+${Lg}${e?`|${Lg}${Rg}+`:""})*?`}}function Pg(i,e){if(!i)return[];let t=[],n=!1,o=!1,r="";for(let s of i){switch(s){case e:if(!n&&!o){t.push(r),r="";continue}break;case"{":n=!0;break;case"}":n=!1;break;case"[":o=!0;break;case"]":o=!1;break}r+=s}return r&&t.push(r),t}function zk(i){if(!i)return"";let e="",t=Pg(i,Nk);if(t.every(n=>n===_g))e=".*";else{let n=!1;t.forEach((o,r)=>{if(o===_g){if(n)return;e+=Fk(2,r===t.length-1)}else{let s=!1,a="",l=!1,c="";for(let u of o){if(u!=="}"&&s){a+=u;continue}if(l&&(u!=="]"||!c)){let p;u==="-"?p=u:(u==="^"||u==="!")&&!c?p="^":u===Nk?p="":p=pn(u),c+=p;continue}switch(u){case"{":s=!0;continue;case"[":l=!0;continue;case"}":{let h=`(?:${Pg(a,",").map(m=>zk(m)).join("|")})`;e+=h,s=!1,a="";break}case"]":{e+="["+c+"]",l=!1,c="";break}case"?":e+=Rg;continue;case"*":e+=Fk(1);continue;default:e+=pn(u)}}r<t.length-1&&(t[r+1]!==_g||r+2<t.length)&&(e+=Lg)}n=o===_g})}return e}var QA=/^\*\*\/\*\.[\w\.-]+$/,XA=/^\*\*\/([\w\.-]+)\/?$/,JA=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,ZA=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,eM=/^\*\*((\/[\w\.-]+)+)\/?$/,tM=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,Bk=new zi(1e4),Wk=function(){return!1},jo=function(){return null};function lI(i,e){if(!i)return jo;let t;typeof i!="string"?t=i.pattern:t=i,t=t.trim();let n=`${t}_${!!e.trimForExclusions}`,o=Bk.get(n);if(o)return Uk(o,i);let r;return QA.test(t)?o=nM(t.substr(4),t):(r=XA.exec(aI(t,e)))?o=iM(r[1],t):(e.trimForExclusions?ZA:JA).test(t)?o=oM(t,e):(r=eM.exec(aI(t,e)))?o=Vk(r[1].substr(1),t,!0):(r=tM.exec(aI(t,e)))?o=Vk(r[1],t,!1):o=rM(t),Bk.set(n,o),Uk(o,i)}function Uk(i,e){if(typeof e=="string")return i;let t=function(n,o){return ya(n,e.base,!St)?i(kh(n.substr(e.base.length),Zn),o):null};return t.allBasenames=i.allBasenames,t.allPaths=i.allPaths,t.basenames=i.basenames,t.patterns=i.patterns,t}function aI(i,e){return e.trimForExclusions&&i.endsWith("/**")?i.substr(0,i.length-2):i}function nM(i,e){return function(t,n){return typeof t=="string"&&t.endsWith(i)?e:null}}function iM(i,e){let t=`/${i}`,n=`\\${i}`,o=function(s,a){return typeof s!="string"?null:a?a===i?e:null:s===i||s.endsWith(t)||s.endsWith(n)?e:null},r=[i];return o.basenames=r,o.patterns=[e],o.allBasenames=r,o}function oM(i,e){let t=Kk(i.slice(1,-1).split(",").map(a=>lI(a,e)).filter(a=>a!==jo),i),n=t.length;if(!n)return jo;if(n===1)return t[0];let o=function(a,l){for(let c=0,u=t.length;c<u;c++)if(t[c](a,l))return i;return null},r=t.find(a=>!!a.allBasenames);r&&(o.allBasenames=r.allBasenames);let s=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return s.length&&(o.allPaths=s),o}function Vk(i,e,t){let n=Zn===Be.sep,o=n?i:i.replace(YA,Zn),r=Zn+o,s=Be.sep+i,a;return t?a=function(l,c){return typeof l=="string"&&(l===o||l.endsWith(r)||!n&&(l===i||l.endsWith(s)))?e:null}:a=function(l,c){return typeof l=="string"&&(l===o||!n&&l===i)?e:null},a.allPaths=[(t?"*/":"./")+i],a}function rM(i){try{let e=new RegExp(`^${zk(i)}$`);return function(t){return e.lastIndex=0,typeof t=="string"&&e.test(t)?i:null}}catch{return jo}}function Ra(i,e,t){return!i||typeof e!="string"?!1:Ql(i)(e,void 0,t)}function Ql(i,e={}){if(!i)return Wk;if(typeof i=="string"||Hk(i)){let t=lI(i,e);if(t===jo)return Wk;let n=function(o,r){return!!t(o,r)};return t.allBasenames&&(n.allBasenames=t.allBasenames),t.allPaths&&(n.allPaths=t.allPaths),n}return sM(i,e)}function Hk(i){let e=i;return e?typeof e.base=="string"&&typeof e.pattern=="string":!1}function sM(i,e){let t=Kk(Object.getOwnPropertyNames(i).map(a=>aM(a,i[a],e)).filter(a=>a!==jo)),n=t.length;if(!n)return jo;if(!t.some(a=>!!a.requiresSiblings)){if(n===1)return t[0];let a=function(u,p){let h;for(let m=0,v=t.length;m<v;m++){let f=t[m](u,p);if(typeof f=="string")return f;jc(f)&&(h||(h=[]),h.push(f))}return h?(async()=>{for(let m of h){let v=await m;if(typeof v=="string")return v}return null})():null},l=t.find(u=>!!u.allBasenames);l&&(a.allBasenames=l.allBasenames);let c=t.reduce((u,p)=>p.allPaths?u.concat(p.allPaths):u,[]);return c.length&&(a.allPaths=c),a}let o=function(a,l,c){let u,p;for(let h=0,m=t.length;h<m;h++){let v=t[h];v.requiresSiblings&&c&&(l||(l=bl(a)),u||(u=l.substr(0,l.length-kc(a).length)));let f=v(a,l,u,c);if(typeof f=="string")return f;jc(f)&&(p||(p=[]),p.push(f))}return p?(async()=>{for(let h of p){let m=await h;if(typeof m=="string")return m}return null})():null},r=t.find(a=>!!a.allBasenames);r&&(o.allBasenames=r.allBasenames);let s=t.reduce((a,l)=>l.allPaths?a.concat(l.allPaths):a,[]);return s.length&&(o.allPaths=s),o}function aM(i,e,t){if(e===!1)return jo;let n=lI(i,t);if(n===jo)return jo;if(typeof e=="boolean")return n;if(e){let o=e.when;if(typeof o=="string"){let r=(s,a,l,c)=>{if(!c||!n(s,a))return null;let u=o.replace("$(basename)",()=>l),p=c(u);return jc(p)?p.then(h=>h?i:null):p?i:null};return r.requiresSiblings=!0,r}}return n}function Kk(i,e){let t=i.filter(a=>!!a.basenames);if(t.length<2)return i;let n=t.reduce((a,l)=>{let c=l.basenames;return c?a.concat(c):a},[]),o;if(e){o=[];for(let a=0,l=n.length;a<l;a++)o.push(e)}else o=t.reduce((a,l)=>{let c=l.patterns;return c?a.concat(c):a},[]);let r=function(a,l){if(typeof a!="string")return null;if(!l){let u;for(u=a.length;u>0;u--){let p=a.charCodeAt(u-1);if(p===47||p===92)break}l=a.substr(u)}let c=n.indexOf(l);return c!==-1?o[c]:null};r.basenames=n,r.patterns=o,r.allBasenames=n;let s=i.filter(a=>!a.basenames);return s.push(r),s}var dI;function Gk(){return dI||(dI=new TextDecoder("UTF-16LE")),dI}var cI;function lM(){return cI||(cI=new TextDecoder("UTF-16BE")),cI}var uI;function qk(){return uI||(uI=YC()?Gk():lM()),uI}function $k(i,e,t){let n=new Uint16Array(i.buffer,e,t);return t>0&&(n[0]===65279||n[0]===65534)?dM(i,e,t):Gk().decode(n)}function dM(i,e,t){let n=[],o=0;for(let r=0;r<t;r++){let s=Sk(i,e);e+=2,n[o++]=String.fromCharCode(s)}return n.join("")}function Ag(i){return i.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}var yi=class i{constructor(e,t,n,o){this.oldPosition=e;this.oldText=t;this.newPosition=n;this.newText=o}get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${Ag(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${Ag(this.oldText)}")`:`(replace@${this.oldPosition} "${Ag(this.oldText)}" with "${Ag(this.newText)}")`}static _writeStringSize(e){return 4+2*e.length}static _writeString(e,t,n){let o=t.length;sn(e,o,n),n+=4;for(let r=0;r<o;r++)Ek(e,t.charCodeAt(r),n),n+=2;return n}static _readString(e,t){let n=rn(e,t);return t+=4,$k(e,t,n)}writeSize(){return 8+i._writeStringSize(this.oldText)+i._writeStringSize(this.newText)}write(e,t){return sn(e,this.oldPosition,t),t+=4,sn(e,this.newPosition,t),t+=4,t=i._writeString(e,this.oldText,t),t=i._writeString(e,this.newText,t),t}static read(e,t,n){let o=rn(e,t);t+=4;let r=rn(e,t);t+=4;let s=i._readString(e,t);t+=i._writeStringSize(s);let a=i._readString(e,t);return t+=i._writeStringSize(a),n.push(new i(o,s,r,a)),t}};function jk(i,e){return i===null||i.length===0?e:new pI(i,e).compress()}var pI=class i{_prevEdits;_currEdits;_result;_resultLen;_prevLen;_prevDeltaOffset;_currLen;_currDeltaOffset;constructor(e,t){this._prevEdits=e,this._currEdits=t,this._result=[],this._resultLen=0,this._prevLen=this._prevEdits.length,this._prevDeltaOffset=0,this._currLen=this._currEdits.length,this._currDeltaOffset=0}compress(){let e=0,t=0,n=this._getPrev(e),o=this._getCurr(t);for(;e<this._prevLen||t<this._currLen;){if(n===null){this._acceptCurr(o),o=this._getCurr(++t);continue}if(o===null){this._acceptPrev(n),n=this._getPrev(++e);continue}if(o.oldEnd<=n.newPosition){this._acceptCurr(o),o=this._getCurr(++t);continue}if(n.newEnd<=o.oldPosition){this._acceptPrev(n),n=this._getPrev(++e);continue}if(o.oldPosition<n.newPosition){let[c,u]=i._splitCurr(o,n.newPosition-o.oldPosition);this._acceptCurr(c),o=u;continue}if(n.newPosition<o.oldPosition){let[c,u]=i._splitPrev(n,o.oldPosition-n.newPosition);this._acceptPrev(c),n=u;continue}let a,l;if(o.oldEnd===n.newEnd)a=n,l=o,n=this._getPrev(++e),o=this._getCurr(++t);else if(o.oldEnd<n.newEnd){let[c,u]=i._splitPrev(n,o.oldLength);a=c,l=o,n=u,o=this._getCurr(++t)}else{let[c,u]=i._splitCurr(o,n.newLength);a=n,l=c,n=this._getPrev(++e),o=u}this._result[this._resultLen++]=new yi(a.oldPosition,a.oldText,l.newPosition,l.newText),this._prevDeltaOffset+=a.newLength-a.oldLength,this._currDeltaOffset+=l.newLength-l.oldLength}let r=i._merge(this._result);return i._removeNoOps(r)}_acceptCurr(e){this._result[this._resultLen++]=i._rebaseCurr(this._prevDeltaOffset,e),this._currDeltaOffset+=e.newLength-e.oldLength}_getCurr(e){return e<this._currLen?this._currEdits[e]:null}_acceptPrev(e){this._result[this._resultLen++]=i._rebasePrev(this._currDeltaOffset,e),this._prevDeltaOffset+=e.newLength-e.oldLength}_getPrev(e){return e<this._prevLen?this._prevEdits[e]:null}static _rebaseCurr(e,t){return new yi(t.oldPosition-e,t.oldText,t.newPosition,t.newText)}static _rebasePrev(e,t){return new yi(t.oldPosition,t.oldText,t.newPosition+e,t.newText)}static _splitPrev(e,t){let n=e.newText.substr(0,t),o=e.newText.substr(t);return[new yi(e.oldPosition,e.oldText,e.newPosition,n),new yi(e.oldEnd,"",e.newPosition+t,o)]}static _splitCurr(e,t){let n=e.oldText.substr(0,t),o=e.oldText.substr(t);return[new yi(e.oldPosition,n,e.newPosition,e.newText),new yi(e.oldPosition+t,o,e.newEnd,"")]}static _merge(e){if(e.length===0)return e;let t=[],n=0,o=e[0];for(let r=1;r<e.length;r++){let s=e[r];o.oldEnd===s.oldPosition?o=new yi(o.oldPosition,o.oldText+s.oldText,o.newPosition,o.newText+s.newText):(t[n++]=o,o=s)}return t[n++]=o,t}static _removeNoOps(e){if(e.length===0)return e;let t=[],n=0;for(let o=0;o<e.length;o++){let r=e[o];r.oldText!==r.newText&&(t[n++]=r)}return t}};var Mg=class i{_asciiMap;_map;_defaultValue;constructor(e){let t=Sv(e);this._defaultValue=t,this._asciiMap=i._createAsciiMap(t),this._map=new Map}static _createAsciiMap(e){let t=new Uint8Array(256);return t.fill(e),t}set(e,t){let n=Sv(t);e>=0&&e<256?this._asciiMap[e]=n:this._map.set(e,n)}get(e){return e>=0&&e<256?this._asciiMap[e]:this._map.get(e)||this._defaultValue}clear(){this._asciiMap.fill(this._defaultValue),this._map.clear()}};var hI=class extends Mg{intlSegmenterLocales;_segmenter=null;_cachedLine=null;_cachedSegments=[];constructor(e,t){super(0),this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this._segmenter=new Intl.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this._segmenter=null;for(let n=0,o=e.length;n<o;n++)this.set(e.charCodeAt(n),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let n=null;for(let o of this._getIntlSegmenterWordsOnLine(e)){if(o.index>t)break;n=o}return n}findNextIntlWordAtOrAfterOffset(e,t){for(let n of this._getIntlSegmenterWordsOnLine(e))if(!(n.index<t))return n;return null}_getIntlSegmenterWordsOnLine(e){return this._segmenter?this._cachedLine===e?this._cachedSegments:(this._cachedLine=e,this._cachedSegments=this._filterWordSegments(this._segmenter.segment(e)),this._cachedSegments):[]}_filterWordSegments(e){let t=[];for(let n of e)this._isWordLike(n)&&t.push(n);return t}_isWordLike(e){return!!e.isWordLike}},Yk=new zi(10);function Qk(i,e){let t=`${i}/${e.join(",")}`,n=Yk.get(t);return n||(n=new hI(i,e),Yk.set(t,n)),n}var gI="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function uM(i=""){let e="(-?\\d*\\.\\d\\w*)|([^";for(let t of gI)i.indexOf(t)>=0||(e+="\\"+t);return e+="\\s]+)",new RegExp(e,"g")}var mI=uM();function fu(i){let e=mI;if(i&&i instanceof RegExp)if(i.global)e=i;else{let t="g";i.ignoreCase&&(t+="i"),i.multiline&&(t+="m"),i.unicode&&(t+="u"),e=new RegExp(i.source,t)}return e.lastIndex=0,e}var Xk=new In;Xk.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function Ng(i,e,t,n,o){if(e=fu(e),o||(o=ro.first(Xk)),t.length>o.maxLen){let c=i-o.maxLen/2;return c<0?c=0:n+=c,t=t.substring(c,i+o.maxLen/2),Ng(i,e,t,n,o)}let r=Date.now(),s=i-1-n,a=-1,l=null;for(let c=1;!(Date.now()-r>=o.timeBudget);c++){let u=s-o.windowSize*c;e.lastIndex=Math.max(0,u);let p=pM(e,t,s,a);if(!p&&l||(l=p,u<=0))break;a=u}if(l){let c={word:l[0],startColumn:n+1+l.index,endColumn:n+1+l.index+l[0].length};return e.lastIndex=0,c}return null}function pM(i,e,t,n){let o;for(;o=i.exec(e);){let r=o.index||0;if(r<=t&&i.lastIndex>=t)return o;if(n>0&&r>n)return null}return null}var ut=class i{constructor(e,t){this.start=e;this.endExclusive=t;if(e>t)throw new Ge(`Invalid range: ${this.toString()}`)}static addRange(e,t){let n=0;for(;n<t.length&&t[n].endExclusive<e.start;)n++;let o=n;for(;o<t.length&&t[o].start<=e.endExclusive;)o++;if(n===o)t.splice(n,0,e);else{let r=Math.min(e.start,t[n].start),s=Math.max(e.endExclusive,t[o-1].endExclusive);t.splice(n,o-n,new i(r,s))}}static tryCreate(e,t){if(!(e>t))return new i(e,t)}static ofLength(e){return new i(0,e)}static ofStartAndLength(e,t){return new i(e,e+t)}static emptyAt(e){return new i(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new i(this.start+e,this.endExclusive+e)}deltaStart(e){return new i(this.start+e,this.endExclusive)}deltaEnd(e){return new i(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new i(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);if(t<=n)return new i(t,n)}intersectionLength(e){let t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,n-t)}intersects(e){let t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return t<n}intersectsOrTouches(e){let t=Math.max(this.start,e.start),n=Math.min(this.endExclusive,e.endExclusive);return t<=n}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new Ge(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new Ge(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let t=[];for(let n=this.start;n<this.endExclusive;n++)t.push(e(n));return t}forEach(e){for(let t=this.start;t<this.endExclusive;t++)e(t)}};var fI=class i{constructor(e){this._tokenInfo=e}static create(e){return new i(e)}forEach(e){let t=0;for(let n of this._tokenInfo){let o=new ut(t,t+n.length);e(o,n),t+=n.length}}slice(e){let t=[],n=0;for(let o of this._tokenInfo){let r=n,s=r+o.length;if(s>e.start){if(r>=e.endExclusive)break;let a=Math.max(0,e.start-r),l=Math.max(0,s-e.endExclusive);t.push(new Fg(o.length-a-l,o.metadata))}n+=o.length}return i.create(t)}},Fg=class{constructor(e,t){this.length=e;this.metadata=t}},Bg=class{_tokens=[];add(e,t){this._tokens.push(new Fg(e,t))}build(){return fI.create(this._tokens)}};var Jt=class i{static createEmpty(e,t){let n=i.defaultTokenMetadata,o=new Uint32Array(2);return o[0]=e.length,o[1]=n,new i(o,e,t)}static createFromTextAndMetadata(e,t){let n=0,o="",r=new Array;for(let{text:s,metadata:a}of e)r.push(n+s.length,a),n+=s.length,o+=s;return new i(new Uint32Array(r),o,t)}static convertToEndOffset(e,t){let o=(e.length>>>1)-1;for(let r=0;r<o;r++)e[r<<1]=e[r+1<<1];e[o<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,o=(e.length>>>1)-1;for(;n<o;){let r=n+Math.floor((o-n)/2),s=e[r<<1];if(s===t)return r+1;s<t?n=r+1:s>t&&(o=r)}return n}_lineTokensBrand=void 0;_tokens;_tokensCount;_text;languageIdCodec;static defaultTokenMetadata=(32768|2<<24)>>>0;constructor(e,t,n){this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this.languageIdCodec=n}equals(e){return e instanceof i?this.slicedEquals(e,0,this._tokensCount):!1}slicedEquals(e,t,n){if(this._text!==e._text||this._tokensCount!==e._tokensCount)return!1;let o=t<<1,r=o+(n<<1);for(let s=o;s<r;s++)if(this._tokens[s]!==e._tokens[s])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[(e<<1)+1]}getLanguageId(e){let t=this._tokens[(e<<1)+1],n=vi.getLanguageId(t);return this.languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){let t=this._tokens[(e<<1)+1];return vi.getTokenType(t)}getForeground(e){let t=this._tokens[(e<<1)+1];return vi.getForeground(t)}getClassName(e){let t=this._tokens[(e<<1)+1];return vi.getClassNameFromMetadata(t)}getInlineStyle(e,t){let n=this._tokens[(e<<1)+1];return vi.getInlineStyleFromMetadata(n,t)}getPresentation(e){let t=this._tokens[(e<<1)+1];return vi.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return i.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new bI(this,e,t,n)}withInserted(e){if(e.length===0)return this;let t=0,n=0,o="",r=new Array,s=0;for(;;){let a=t<this._tokensCount?this._tokens[t<<1]:-1,l=n<e.length?e[n]:null;if(a!==-1&&(l===null||a<=l.offset)){o+=this._text.substring(s,a);let c=this._tokens[(t<<1)+1];r.push(o.length,c),t++,s=a}else if(l){if(l.offset>s){o+=this._text.substring(s,l.offset);let c=this._tokens[(t<<1)+1];r.push(o.length,c),s=l.offset}o+=l.text,r.push(o.length,l.tokenMetadata),n++}else break}return new i(new Uint32Array(r),o,this.languageIdCodec)}getTokensInRange(e){let t=new Bg,n=this.findTokenIndexAtOffset(e.start),o=this.findTokenIndexAtOffset(e.endExclusive);for(let r=n;r<=o;r++){let a=new ut(this.getStartOffset(r),this.getEndOffset(r)).intersectionLength(e);a>0&&t.add(a,this.getMetadata(r))}return t.build()}getTokenText(e){let t=this.getStartOffset(e),n=this.getEndOffset(e);return this._text.substring(t,n)}forEach(e){let t=this.getCount();for(let n=0;n<t;n++)e(n)}},bI=class i{_source;_startOffset;_endOffset;_deltaOffset;_firstTokenIndex;_tokensCount;languageIdCodec;constructor(e,t,n,o){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=o,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this.languageIdCodec=e.languageIdCodec,this._tokensCount=0;for(let r=this._firstTokenIndex,s=e.getCount();r<s&&!(e.getStartOffset(r)>=n);r++)this._tokensCount++}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof i?this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount):!1}getCount(){return this._tokensCount}getStandardTokenType(e){return this._source.getStandardTokenType(this._firstTokenIndex+e)}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){let t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}getTokenText(e){let t=this._firstTokenIndex+e,n=this._source.getStartOffset(t),o=this._source.getEndOffset(t),r=this._source.getTokenText(t);return n<this._startOffset&&(r=r.substring(this._startOffset-n)),o>this._endOffset&&(r=r.substring(0,r.length-(o-this._endOffset))),r}forEach(e){for(let t=0;t<this.getCount();t++)e(t)}};var Jk=(e=>(e[e.value=3]="value",e))(Jk||{});function ji(i){return(i&Jk.value)!==0}var Xl=class{open;close;_inString;_inComment;_inRegEx;_neutralCharacter=null;_neutralCharacterSearched=!1;constructor(e){if(this.open=e.open,this.close=e.close,this._inString=!0,this._inComment=!0,this._inRegEx=!0,Array.isArray(e.notIn))for(let t=0,n=e.notIn.length;t<n;t++)switch(e.notIn[t]){case"string":this._inString=!1;break;case"comment":this._inComment=!1;break;case"regex":this._inRegEx=!1;break}}isOK(e){switch(e){case 0:return!0;case 1:return this._inComment;case 2:return this._inString;case 3:return this._inRegEx}}shouldAutoClose(e,t){if(e.getTokenCount()===0)return!0;let n=e.findTokenIndexAtOffset(t-2),o=e.getStandardTokenType(n);return this.isOK(o)}_findNeutralCharacterInRange(e,t){for(let n=e;n<=t;n++){let o=String.fromCharCode(n);if(!this.open.includes(o)&&!this.close.includes(o))return o}return null}findNeutralCharacter(){return this._neutralCharacterSearched||(this._neutralCharacterSearched=!0,this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(48,57)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(97,122)),this._neutralCharacter||(this._neutralCharacter=this._findNeutralCharacterInRange(65,90))),this._neutralCharacter}},Vg=class{autoClosingPairsOpenByStart;autoClosingPairsOpenByEnd;autoClosingPairsCloseByStart;autoClosingPairsCloseByEnd;autoClosingPairsCloseSingleChar;constructor(e){this.autoClosingPairsOpenByStart=new Map,this.autoClosingPairsOpenByEnd=new Map,this.autoClosingPairsCloseByStart=new Map,this.autoClosingPairsCloseByEnd=new Map,this.autoClosingPairsCloseSingleChar=new Map;for(let t of e)bu(this.autoClosingPairsOpenByStart,t.open.charAt(0),t),bu(this.autoClosingPairsOpenByEnd,t.open.charAt(t.open.length-1),t),bu(this.autoClosingPairsCloseByStart,t.close.charAt(0),t),bu(this.autoClosingPairsCloseByEnd,t.close.charAt(t.close.length-1),t),t.close.length===1&&t.open.length===1&&bu(this.autoClosingPairsCloseSingleChar,t.close,t)}};function bu(i,e,t){i.has(e)?i.get(e).push(t):i.set(e,[t])}var yI=class i{_richEditBracketBrand=void 0;languageId;index;open;close;forwardRegex;reversedRegex;_openSet;_closeSet;constructor(e,t,n,o,r,s){this.languageId=e,this.index=t,this.open=n,this.close=o,this.forwardRegex=r,this.reversedRegex=s,this._openSet=i._toSet(this.open),this._closeSet=i._toSet(this.close)}isOpen(e){return this._openSet.has(e)}isClose(e){return this._closeSet.has(e)}static _toSet(e){let t=new Set;for(let n of e)t.add(n);return t}};function hM(i){let e=i.length;i=i.map(s=>[s[0].toLowerCase(),s[1].toLowerCase()]);let t=[];for(let s=0;s<e;s++)t[s]=s;let n=(s,a)=>{let[l,c]=s,[u,p]=a;return l===u||l===p||c===u||c===p},o=(s,a)=>{let l=Math.min(s,a),c=Math.max(s,a);for(let u=0;u<e;u++)t[u]===c&&(t[u]=l)};for(let s=0;s<e;s++){let a=i[s];for(let l=s+1;l<e;l++){let c=i[l];n(a,c)&&o(t[s],t[l])}}let r=[];for(let s=0;s<e;s++){let a=[],l=[];for(let c=0;c<e;c++)if(t[c]===s){let[u,p]=i[c];a.push(u),l.push(p)}a.length>0&&r.push({open:a,close:l})}return r}var zg=class{_richEditBracketsBrand=void 0;brackets;forwardRegex;reversedRegex;maxBracketLength;textIsBracket;textIsOpenBracket;constructor(e,t){let n=hM(t);this.brackets=n.map((o,r)=>new yI(e,r,o.open,o.close,gM(o.open,o.close,n,r),mM(o.open,o.close,n,r))),this.forwardRegex=fM(this.brackets),this.reversedRegex=bM(this.brackets),this.textIsBracket={},this.textIsOpenBracket={},this.maxBracketLength=0;for(let o of this.brackets){for(let r of o.open)this.textIsBracket[r]=o,this.textIsOpenBracket[r]=!0,this.maxBracketLength=Math.max(this.maxBracketLength,r.length);for(let r of o.close)this.textIsBracket[r]=o,this.textIsOpenBracket[r]=!1,this.maxBracketLength=Math.max(this.maxBracketLength,r.length)}}};function Zk(i,e,t,n){for(let o=0,r=e.length;o<r;o++){if(o===t)continue;let s=e[o];for(let a of s.open)a.indexOf(i)>=0&&n.push(a);for(let a of s.close)a.indexOf(i)>=0&&n.push(a)}}function e1(i,e){return i.length-e.length}function Hg(i){if(i.length<=1)return i;let e=[],t=new Set;for(let n of i)t.has(n)||(e.push(n),t.add(n));return e}function gM(i,e,t,n){let o=[];o=o.concat(i),o=o.concat(e);for(let r=0,s=o.length;r<s;r++)Zk(o[r],t,n,o);return o=Hg(o),o.sort(e1),o.reverse(),Jl(o)}function mM(i,e,t,n){let o=[];o=o.concat(i),o=o.concat(e);for(let r=0,s=o.length;r<s;r++)Zk(o[r],t,n,o);return o=Hg(o),o.sort(e1),o.reverse(),Jl(o.map(II))}function fM(i){let e=[];for(let t of i){for(let n of t.open)e.push(n);for(let n of t.close)e.push(n)}return e=Hg(e),Jl(e)}function bM(i){let e=[];for(let t of i){for(let n of t.open)e.push(n);for(let n of t.close)e.push(n)}return e=Hg(e),Jl(e.map(II))}function vM(i){let e=/^[\w ]+$/.test(i);return i=pn(i),e?`\\b${i}\\b`:i}function Jl(i,e){let t=`(${i.map(vM).join(")|(")})`;return Dh(t,!0,e)}var II=function(){function i(n){let o=new Uint16Array(n.length),r=0;for(let s=n.length-1;s>=0;s--)o[r++]=n.charCodeAt(s);return qk().decode(o)}let e=null,t=null;return function(o){return e!==o&&(e=o,t=i(e)),t}}(),Kn=class{static _findPrevBracketInText(e,t,n,o){let r=n.match(e);if(!r)return null;let s=n.length-(r.index||0),a=r[0].length,l=o+s;return new te(t,l-a+1,t,l+1)}static findPrevBracketInRange(e,t,n,o,r){let a=II(n).substring(n.length-r,n.length-o);return this._findPrevBracketInText(e,t,a,o)}static findNextBracketInText(e,t,n,o){let r=n.match(e);if(!r)return null;let s=r.index||0,a=r[0].length;if(a===0)return null;let l=o+s;return new te(t,l+1,t,l+1+a)}static findNextBracketInRange(e,t,n,o,r){let s=n.substring(o,r);return this.findNextBracketInText(e,t,s,o)}};var Kg=class{constructor(e,t){this.languageId=e;let n=t.brackets?t1(t.brackets):[],o=new Uc(a=>{let l=new Set;return{info:new xI(this,a,l),closing:l}}),r=new Uc(a=>{let l=new Set,c=new Set;return{info:new SI(this,a,l,c),opening:l,openingColorized:c}});for(let[a,l]of n){let c=o.get(a),u=r.get(l);c.closing.add(u.info),u.opening.add(c.info)}let s=t.colorizedBracketPairs?t1(t.colorizedBracketPairs):n.filter(a=>!(a[0]==="<"&&a[1]===">"));for(let[a,l]of s){let c=o.get(a),u=r.get(l);c.closing.add(u.info),u.openingColorized.add(c.info),u.opening.add(c.info)}this._openingBrackets=new Map([...o.cachedValues].map(([a,l])=>[a,l.info])),this._closingBrackets=new Map([...r.cachedValues].map(([a,l])=>[a,l.info]))}_openingBrackets;_closingBrackets;get openingBrackets(){return[...this._openingBrackets.values()]}get closingBrackets(){return[...this._closingBrackets.values()]}getOpeningBracketInfo(e){return this._openingBrackets.get(e)}getClosingBracketInfo(e){return this._closingBrackets.get(e)}getBracketInfo(e){return this.getOpeningBracketInfo(e)||this.getClosingBracketInfo(e)}getBracketRegExp(e){let t=Array.from([...this._openingBrackets.keys(),...this._closingBrackets.keys()]);return Jl(t,e)}};function t1(i){return i.filter(([e,t])=>e!==""&&t!=="")}var Gg=class{constructor(e,t){this.config=e;this.bracketText=t}get languageId(){return this.config.languageId}},xI=class extends Gg{constructor(t,n,o){super(t,n);this.openedBrackets=o}isOpeningBracket=!0},SI=class extends Gg{constructor(t,n,o,r){super(t,n);this.openingBrackets=o;this.openingColorizedBrackets=r}isOpeningBracket=!1;closes(t){return t.config!==this.config?!1:this.openingBrackets.has(t)}closesColorized(t){return t.config!==this.config?!1:this.openingColorizedBrackets.has(t)}getOpeningBrackets(){return[...this.openingBrackets]}};var Br=class i{static _nextVisibleColumn(e,t,n){return e===9?i.nextRenderTabStop(t,n):Ww(e)||Ph(e)?t+2:t+1}static visibleColumnFromColumn(e,t,n){let o=Math.min(t-1,e.length),r=e.substring(0,o),s=new fa(r),a=0;for(;!s.eol();){let l=Ol(r,o,s.offset);s.nextGraphemeLength(),a=this._nextVisibleColumn(l,a,n)}return a}static toStatusbarColumn(e,t,n){let o=e.substring(0,Math.min(t-1,e.length)),r=new Vc(o),s=0;for(;!r.eol();)r.nextCodePoint()===9?s=i.nextRenderTabStop(s,n):s=s+1;return s+1}static columnFromVisibleColumn(e,t,n){if(t<=0)return 1;let o=e.length,r=new fa(e),s=0,a=1;for(;!r.eol();){let l=Ol(e,o,r.offset);r.nextGraphemeLength();let c=this._nextVisibleColumn(l,s,n),u=r.offset+1;if(c>=t){let p=t-s;return c-t<p?u:a}s=c,a=u}return o+1}static nextRenderTabStop(e,t){return e+t-e%t}static nextIndentTabStop(e,t){return e+t-e%t}static prevRenderTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}static prevIndentTabStop(e,t){return Math.max(0,e-1-(e-1)%t)}};var Zl=class i{constructor(e,t){this.lineCount=e;this.columnCount=t}static zero=new i(0,0);static lengthDiffNonNegative(e,t){return t.isLessThan(e)?i.zero:e.lineCount===t.lineCount?new i(0,t.columnCount-e.columnCount):new i(t.lineCount-e.lineCount,t.columnCount)}static betweenPositions(e,t){return e.lineNumber===t.lineNumber?new i(0,t.column-e.column):new i(t.lineNumber-e.lineNumber,t.column-1)}static ofRange(e){return i.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let t=0,n=0;for(let o of e)o===`
`?(t++,n=0):n++;return new i(t,n)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new i(this.lineCount,this.columnCount+e.columnCount):new i(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new te(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new te(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new te(1,1,this.lineCount+1,this.columnCount+1)}addToPosition(e){return this.lineCount===0?new Ue(e.lineNumber,e.column+this.columnCount):new Ue(e.lineNumber+this.lineCount,this.columnCount+1)}toString(){return`${this.lineCount},${this.columnCount}`}};function n1(i,e,t,n){return i!==t?pt(t-i,n):pt(0,n-e)}var Zt=0;function ed(i){return i===0}var Ii=2**26;function pt(i,e){return i*Ii+e}function Pn(i){let e=i,t=Math.floor(e/Ii),n=e-t*Ii;return new Zl(t,n)}function i1(i){return Math.floor(i/Ii)}function at(i,e){let t=i+e;return e>=Ii&&(t=t-i%Ii),t}function o1(i,e){return i.reduce((t,n)=>at(t,e(n)),Zt)}function EI(i,e){return i===e}function Pa(i,e){let t=i,n=e;if(n-t<=0)return Zt;let r=Math.floor(t/Ii),s=Math.floor(n/Ii),a=n-s*Ii;if(r===s){let l=t-r*Ii;return pt(0,a-l)}else return pt(s-r,a)}function Wr(i,e){return i<e}function Cs(i,e){return i<=e}function td(i,e){return i>=e}function ws(i){return pt(i.lineNumber-1,i.column-1)}function Ts(i,e){let t=i,n=Math.floor(t/Ii),o=t-n*Ii,r=e,s=Math.floor(r/Ii),a=r-s*Ii;return new te(n+1,o+1,s+1,a+1)}function r1(i){let e=_h(i);return pt(e.length-1,e[e.length-1].length)}var qg=[],fn=class i{constructor(e,t){this.items=e;this.additionalItems=t}static cache=new Array(129);static create(e,t){if(e<=128&&t.length===0){let n=i.cache[e];return n||(n=new i(e,t),i.cache[e]=n),n}return new i(e,t)}static empty=i.create(0,qg);static getEmpty(){return this.empty}add(e,t){let n=t.getKey(e),o=n>>5;if(o===0){let s=1<<n|this.items;return s===this.items?this:i.create(s,this.additionalItems)}o--;let r=this.additionalItems.slice(0);for(;r.length<o;)r.push(0);return r[o]|=1<<(n&31),i.create(this.items,r)}has(e,t){let n=t.getKey(e),o=n>>5;return o===0?(this.items&1<<n)!==0:(o--,((this.additionalItems[o]||0)&1<<(n&31))!==0)}merge(e){let t=this.items|e.items;if(this.additionalItems===qg&&e.additionalItems===qg)return t===this.items?this:t===e.items?e:i.create(t,qg);let n=[];for(let o=0;o<Math.max(this.additionalItems.length,e.additionalItems.length);o++){let r=this.additionalItems[o]||0,s=e.additionalItems[o]||0;n.push(r|s)}return i.create(t,n)}intersects(e){if(this.items&e.items)return!0;for(let t=0;t<Math.min(this.additionalItems.length,e.additionalItems.length);t++)if(this.additionalItems[t]&e.additionalItems[t])return!0;return!1}equals(e){if(this.items!==e.items||this.additionalItems.length!==e.additionalItems.length)return!1;for(let t=0;t<this.additionalItems.length;t++)if(this.additionalItems[t]!==e.additionalItems[t])return!1;return!0}},CI={getKey(i){return i}},$g=class{items=new Map;getKey(e){let t=this.items.get(e);return t===void 0&&(t=this.items.size,this.items.set(e,t)),t}reverseLookup(e){return[...this.items].find(([t,n])=>n===e)?.[0]}reverseLookupSet(e){let t=[];for(let[n]of this.items)e.has(n,this)&&t.push(n);return t}keys(){return this.items.keys()}};var jg=class i{static DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES=`;:.,=}])> 
	`;static DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS=`'"\`;:.,=}])> 
	`;static DEFAULT_AUTOCLOSE_BEFORE_WHITESPACE=` 
	`;_autoClosingPairs;_surroundingPairs;_autoCloseBeforeForQuotes;_autoCloseBeforeForBrackets;constructor(e){if(e.autoClosingPairs?this._autoClosingPairs=e.autoClosingPairs.map(t=>new Xl(t)):e.brackets?this._autoClosingPairs=e.brackets.map(t=>new Xl({open:t[0],close:t[1]})):this._autoClosingPairs=[],e.__electricCharacterSupport&&e.__electricCharacterSupport.docComment){let t=e.__electricCharacterSupport.docComment;this._autoClosingPairs.push(new Xl({open:t.open,close:t.close||""}))}this._autoCloseBeforeForQuotes=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:i.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_QUOTES,this._autoCloseBeforeForBrackets=typeof e.autoCloseBefore=="string"?e.autoCloseBefore:i.DEFAULT_AUTOCLOSE_BEFORE_LANGUAGE_DEFINED_BRACKETS,this._surroundingPairs=e.surroundingPairs||this._autoClosingPairs}getAutoClosingPairs(){return this._autoClosingPairs}getAutoCloseBeforeSet(e){return e?this._autoCloseBeforeForQuotes:this._autoCloseBeforeForBrackets}getSurroundingPairs(){return this._surroundingPairs}};var Yg=class{_richEditBrackets;constructor(e){this._richEditBrackets=e}getElectricCharacters(){let e=[];if(this._richEditBrackets)for(let t of this._richEditBrackets.brackets)for(let n of t.close){let o=n.charAt(n.length-1);e.push(o)}return io(e)}onElectricCharacter(e,t,n){if(!this._richEditBrackets||this._richEditBrackets.brackets.length===0)return null;let o=t.findTokenIndexAtOffset(n-1);if(ji(t.getStandardTokenType(o)))return null;let r=this._richEditBrackets.reversedRegex,s=t.getLineContent().substring(0,n-1)+e,a=Kn.findPrevBracketInRange(r,1,s,0,s.length);if(!a)return null;let l=s.substring(a.startColumn-1,a.endColumn-1).toLowerCase();if(this._richEditBrackets.textIsOpenBracket[l])return null;let u=t.getActualLineContentBefore(a.startColumn-1);return/^\s*$/.test(u)?{matchOpenBracket:l}:null}};function Qg(i){return i.global&&(i.lastIndex=0),!0}var Xg=class{_indentationRules;constructor(e){this._indentationRules=e}shouldIncrease(e){return!!(this._indentationRules&&this._indentationRules.increaseIndentPattern&&Qg(this._indentationRules.increaseIndentPattern)&&this._indentationRules.increaseIndentPattern.test(e))}shouldDecrease(e){return!!(this._indentationRules&&this._indentationRules.decreaseIndentPattern&&Qg(this._indentationRules.decreaseIndentPattern)&&this._indentationRules.decreaseIndentPattern.test(e))}shouldIndentNextLine(e){return!!(this._indentationRules&&this._indentationRules.indentNextLinePattern&&Qg(this._indentationRules.indentNextLinePattern)&&this._indentationRules.indentNextLinePattern.test(e))}shouldIgnore(e){return!!(this._indentationRules&&this._indentationRules.unIndentedLinePattern&&Qg(this._indentationRules.unIndentedLinePattern)&&this._indentationRules.unIndentedLinePattern.test(e))}getIndentMetadata(e){let t=0;return this.shouldIncrease(e)&&(t+=1),this.shouldDecrease(e)&&(t+=2),this.shouldIndentNextLine(e)&&(t+=4),this.shouldIgnore(e)&&(t+=8),t}};function s1(i){let e=!1,t=new Map,n=new Map;if(yM(i,u=>{if(i===u)return!0;let p=JSON.stringify(u);if(p.length<30)return!0;let h=t.get(p);if(!h){let m={schemas:[u]};return t.set(p,m),n.set(u,m),!0}return h.schemas.push(u),n.set(u,h),e=!0,!1}),t.clear(),!e)return JSON.stringify(i);let r="$defs";for(;i.hasOwnProperty(r);)r+="_";let s=[];function a(u){return JSON.stringify(u,(p,h)=>{if(h!==u){let m=n.get(h);if(m&&m.schemas.length>1)return m.id||(m.id=`_${s.length}`,s.push(m.schemas[0])),{$ref:`#/${r}/${m.id}`}}return h})}let l=a(i),c=[];for(let u=0;u<s.length;u++)c.push(`"_${u}":${a(s[u])}`);return c.length?`${l.substring(0,l.length-1)},"${r}":{${c.join(",")}}}`:l}function nd(i){return typeof i=="object"&&i!==null}function yM(i,e){if(!i||typeof i!="object")return;let t=(...l)=>{for(let c of l)nd(c)&&s.push(c)},n=(...l)=>{for(let c of l)if(nd(c))for(let u in c){let p=c[u];nd(p)&&s.push(p)}},o=(...l)=>{for(let c of l)if(Array.isArray(c))for(let u of c)nd(u)&&s.push(u)},r=l=>{if(Array.isArray(l))for(let c of l)nd(c)&&s.push(c);else nd(l)&&s.push(l)},s=[i],a=s.pop();for(;a;)e(a)&&(t(a.additionalItems,a.additionalProperties,a.not,a.contains,a.propertyNames,a.if,a.then,a.else,a.unevaluatedItems,a.unevaluatedProperties),n(a.definitions,a.$defs,a.properties,a.patternProperties,a.dependencies,a.dependentSchemas),o(a.anyOf,a.allOf,a.oneOf,a.prefixItems),r(a.items)),a=s.pop()}var Jg=new class{_zoomLevel=0;_onDidChangeZoomLevel=new C;onDidChangeZoomLevel=this._onDidChangeZoomLevel.event;getZoomLevel(){return this._zoomLevel}setZoomLevel(i){i=Math.min(Math.max(-5,i),20),this._zoomLevel!==i&&(this._zoomLevel=i,this._onDidChangeZoomLevel.fire(this._zoomLevel))}};var IM=Se?1.5:1.35,wI=8,vu=class i{_bareFontInfoBrand=void 0;static createFromValidatedSettings(e,t,n){let o=e.get(50),r=e.get(54),s=e.get(53),a=e.get(52),l=e.get(55),c=e.get(68),u=e.get(65);return i._create(o,r,s,a,l,c,u,t,n)}static createFromRawSettings(e,t,n=!1){let o=ks.fontFamily.validate(e.fontFamily),r=ks.fontWeight.validate(e.fontWeight),s=ks.fontSize.validate(e.fontSize),a=ks.fontLigatures2.validate(e.fontLigatures),l=ks.fontVariations.validate(e.fontVariations),c=ks.lineHeight.validate(e.lineHeight),u=ks.letterSpacing.validate(e.letterSpacing);return i._create(o,r,s,a,l,c,u,t,n)}static _create(e,t,n,o,r,s,a,l,c){s===0?s=IM*n:s<wI&&(s=s*n),s=Math.round(s),s<wI&&(s=wI);let u=1+(c?0:Jg.getZoomLevel()*.1);return n*=u,s*=u,r===od.TRANSLATE&&(t==="normal"||t==="bold"?r=od.OFF:(r=`'wght' ${parseInt(t,10)}`,t="normal")),new i({pixelRatio:l,fontFamily:e,fontWeight:t,fontSize:n,fontFeatureSettings:o,fontVariationSettings:r,lineHeight:s,letterSpacing:a})}pixelRatio;fontFamily;fontWeight;fontSize;fontFeatureSettings;fontVariationSettings;lineHeight;letterSpacing;constructor(e){this.pixelRatio=e.pixelRatio,this.fontFamily=String(e.fontFamily),this.fontWeight=String(e.fontWeight),this.fontSize=e.fontSize,this.fontFeatureSettings=e.fontFeatureSettings,this.fontVariationSettings=e.fontVariationSettings,this.lineHeight=e.lineHeight|0,this.letterSpacing=e.letterSpacing}getId(){return`${this.pixelRatio}-${this.fontFamily}-${this.fontWeight}-${this.fontSize}-${this.fontFeatureSettings}-${this.fontVariationSettings}-${this.lineHeight}-${this.letterSpacing}`}getMassagedFontFamily(){let e=fo.fontFamily,t=i._wrapInQuotes(this.fontFamily);return e&&this.fontFamily!==e?`${t}, ${e}`:t}static _wrapInQuotes(e){return/[,"']/.test(e)?e:/[+ ]/.test(e)?`"${e}"`:e}},TI=2,id=class extends vu{_editorStylingBrand=void 0;version=TI;isTrusted;isMonospace;typicalHalfwidthCharacterWidth;typicalFullwidthCharacterWidth;canUseHalfwidthRightwardsArrow;spaceWidth;middotWidth;wsmiddotWidth;maxDigitWidth;constructor(e,t){super(e),this.isTrusted=t,this.isMonospace=e.isMonospace,this.typicalHalfwidthCharacterWidth=e.typicalHalfwidthCharacterWidth,this.typicalFullwidthCharacterWidth=e.typicalFullwidthCharacterWidth,this.canUseHalfwidthRightwardsArrow=e.canUseHalfwidthRightwardsArrow,this.spaceWidth=e.spaceWidth,this.middotWidth=e.middotWidth,this.wsmiddotWidth=e.wsmiddotWidth,this.maxDigitWidth=e.maxDigitWidth}equals(e){return this.fontFamily===e.fontFamily&&this.fontWeight===e.fontWeight&&this.fontSize===e.fontSize&&this.fontFeatureSettings===e.fontFeatureSettings&&this.fontVariationSettings===e.fontVariationSettings&&this.lineHeight===e.lineHeight&&this.letterSpacing===e.letterSpacing&&this.typicalHalfwidthCharacterWidth===e.typicalHalfwidthCharacterWidth&&this.typicalFullwidthCharacterWidth===e.typicalFullwidthCharacterWidth&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.spaceWidth===e.spaceWidth&&this.middotWidth===e.middotWidth&&this.wsmiddotWidth===e.wsmiddotWidth&&this.maxDigitWidth===e.maxDigitWidth}};var Yo={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}};function DI(...i){switch(i.length){case 1:return d("contextkey.scanner.hint.didYouMean1","Did you mean {0}?",i[0]);case 2:return d("contextkey.scanner.hint.didYouMean2","Did you mean {0} or {1}?",i[0],i[1]);case 3:return d("contextkey.scanner.hint.didYouMean3","Did you mean {0}, {1} or {2}?",i[0],i[1],i[2]);default:return}}var xM=d("contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote","Did you forget to open or close the quote?"),SM=d("contextkey.scanner.hint.didYouForgetToEscapeSlash","Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\/'."),Ds=class i{static getLexeme(e){switch(e.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return e.isTripleEq?"===":"==";case 4:return e.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return e.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return e.lexeme;case 18:return e.lexeme;case 19:return e.lexeme;case 20:return"EOF";default:throw MC(`unhandled token type: ${JSON.stringify(e)}; have you forgotten to add a case?`)}}static _regexFlags=new Set(["i","g","s","m","y","u"].map(e=>e.charCodeAt(0)));static _keywords=new Map([["not",14],["in",13],["false",12],["true",11]]);_input="";_start=0;_current=0;_tokens=[];_errors=[];get errors(){return this._errors}reset(e){return this._input=e,this._start=0,this._current=0,this._tokens=[],this._errors=[],this}scan(){for(;!this._isAtEnd();)switch(this._start=this._current,this._advance()){case 40:this._addToken(0);break;case 41:this._addToken(1);break;case 33:if(this._match(61)){let t=this._match(61);this._tokens.push({type:4,offset:this._start,isTripleEq:t})}else this._addToken(2);break;case 39:this._quotedString();break;case 47:this._regex();break;case 61:if(this._match(61)){let t=this._match(61);this._tokens.push({type:3,offset:this._start,isTripleEq:t})}else this._match(126)?this._addToken(9):this._error(DI("==","=~"));break;case 60:this._addToken(this._match(61)?6:5);break;case 62:this._addToken(this._match(61)?8:7);break;case 38:this._match(38)?this._addToken(15):this._error(DI("&&"));break;case 124:this._match(124)?this._addToken(16):this._error(DI("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this._string()}return this._start=this._current,this._addToken(20),Array.from(this._tokens)}_match(e){return this._isAtEnd()||this._input.charCodeAt(this._current)!==e?!1:(this._current++,!0)}_advance(){return this._input.charCodeAt(this._current++)}_peek(){return this._isAtEnd()?0:this._input.charCodeAt(this._current)}_addToken(e){this._tokens.push({type:e,offset:this._start})}_error(e){let t=this._start,n=this._input.substring(this._start,this._current),o={type:19,offset:this._start,lexeme:n};this._errors.push({offset:t,lexeme:n,additionalInfo:e}),this._tokens.push(o)}stringRe=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy;_string(){this.stringRe.lastIndex=this._start;let e=this.stringRe.exec(this._input);if(e){this._current=this._start+e[0].length;let t=this._input.substring(this._start,this._current),n=i._keywords.get(t);n?this._addToken(n):this._tokens.push({type:17,lexeme:t,offset:this._start})}}_quotedString(){for(;this._peek()!==39&&!this._isAtEnd();)this._advance();if(this._isAtEnd()){this._error(xM);return}this._advance(),this._tokens.push({type:18,lexeme:this._input.substring(this._start+1,this._current-1),offset:this._start+1})}_regex(){let e=this._current,t=!1,n=!1;for(;;){if(e>=this._input.length){this._current=e,this._error(SM);return}let r=this._input.charCodeAt(e);if(t)t=!1;else if(r===47&&!n){e++;break}else r===91?n=!0:r===92?t=!0:r===93&&(n=!1);e++}for(;e<this._input.length&&i._regexFlags.has(this._input.charCodeAt(e));)e++;this._current=e;let o=this._input.substring(this._start,this._current);this._tokens.push({type:10,lexeme:o,offset:this._start})}_isAtEnd(){return this._current>=this._input.length}};var yu=class{ctor;staticArguments;supportsDelayedInstantiation;constructor(e,t=[],n=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=n}};var _s;(o=>{o.serviceIds=new Map,o.DI_TARGET="$di$target",o.DI_DEPENDENCIES="$di$dependencies";function n(r){return r[o.DI_DEPENDENCIES]||[]}o.getServiceDependencies=n})(_s||={});var Vt=P("instantiationService");function EM(i,e,t){e[_s.DI_TARGET]===e?e[_s.DI_DEPENDENCIES].push({id:i,index:t}):(e[_s.DI_DEPENDENCIES]=[{id:i,index:t}],e[_s.DI_TARGET]=e)}function P(i){if(_s.serviceIds.has(i))return _s.serviceIds.get(i);let e=function(t,n,o){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");EM(e,t,o)};return e.toString=()=>i,_s.serviceIds.set(i,e),e}var bn=new Map;bn.set("false",!1);bn.set("true",!0);bn.set("isMac",Se);bn.set("isLinux",St);bn.set("isWindows",Ye);bn.set("isWeb",At);bn.set("isMacNative",Se&&!At);bn.set("isEdge",ih);bn.set("isFirefox",hl);bn.set("isChrome",wc);bn.set("isSafari",nh);var CM=Object.prototype.hasOwnProperty;var wM={regexParsingWithErrorRecovery:!0},TM=d("contextkey.parser.error.emptyString","Empty context key expression"),kM=d("contextkey.parser.error.emptyString.hint","Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively."),DM=d("contextkey.parser.error.noInAfterNot","'in' after 'not'."),a1=d("contextkey.parser.error.closingParenthesis","closing parenthesis ')'"),_M=d("contextkey.parser.error.unexpectedToken","Unexpected token"),LM=d("contextkey.parser.error.unexpectedToken.hint","Did you forget to put && or || before the token?"),RM=d("contextkey.parser.error.unexpectedEOF","Unexpected end of expression"),PM=d("contextkey.parser.error.unexpectedEOF.hint","Did you forget to put a context key?"),_I=class i{constructor(e=wM){this._config=e}static _parseError=new Error;_scanner=new Ds;_tokens=[];_current=0;_parsingErrors=[];get lexingErrors(){return this._scanner.errors}get parsingErrors(){return this._parsingErrors}parse(e){if(e===""){this._parsingErrors.push({message:TM,offset:0,lexeme:"",additionalInfo:kM});return}this._tokens=this._scanner.reset(e).scan(),this._current=0,this._parsingErrors=[];try{let t=this._expr();if(!this._isAtEnd()){let n=this._peek(),o=n.type===17?LM:void 0;throw this._parsingErrors.push({message:_M,offset:n.offset,lexeme:Ds.getLexeme(n),additionalInfo:o}),i._parseError}return t}catch(t){if(t!==i._parseError)throw t;return}}_expr(){return this._or()}_or(){let e=[this._and()];for(;this._matchOne(16);){let t=this._and();e.push(t)}return e.length===1?e[0]:xe.or(...e)}_and(){let e=[this._term()];for(;this._matchOne(15);){let t=this._term();e.push(t)}return e.length===1?e[0]:xe.and(...e)}_term(){if(this._matchOne(2)){let e=this._peek();switch(e.type){case 11:return this._advance(),On.INSTANCE;case 12:return this._advance(),Gn.INSTANCE;case 0:{this._advance();let t=this._expr();return this._consume(1,a1),t?.negate()}case 17:return this._advance(),Aa.create(e.lexeme);default:throw this._errExpectedButGot("KEY | true | false | '(' expression ')'",e)}}return this._primary()}_primary(){let e=this._peek();switch(e.type){case 11:return this._advance(),xe.true();case 12:return this._advance(),xe.false();case 0:{this._advance();let t=this._expr();return this._consume(1,a1),t}case 17:{let t=e.lexeme;if(this._advance(),this._matchOne(9)){let o=this._peek();if(!this._config.regexParsingWithErrorRecovery){if(this._advance(),o.type!==10)throw this._errExpectedButGot("REGEX",o);let r=o.lexeme,s=r.lastIndexOf("/"),a=s===r.length-1?void 0:this._removeFlagsGY(r.substring(s+1)),l;try{l=new RegExp(r.substring(1,s),a)}catch{throw this._errExpectedButGot("REGEX",o)}return ku.create(t,l)}switch(o.type){case 10:case 19:{let r=[o.lexeme];this._advance();let s=this._peek(),a=0;for(let h=0;h<o.lexeme.length;h++)o.lexeme.charCodeAt(h)===40?a++:o.lexeme.charCodeAt(h)===41&&a--;for(;!this._isAtEnd()&&s.type!==15&&s.type!==16;){switch(s.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let h=0;h<s.lexeme.length;h++)s.lexeme.charCodeAt(h)===40?a++:o.lexeme.charCodeAt(h)===41&&a--}if(a<0)break;r.push(Ds.getLexeme(s)),this._advance(),s=this._peek()}let l=r.join(""),c=l.lastIndexOf("/"),u=c===l.length-1?void 0:this._removeFlagsGY(l.substring(c+1)),p;try{p=new RegExp(l.substring(1,c),u)}catch{throw this._errExpectedButGot("REGEX",o)}return xe.regex(t,p)}case 18:{let r=o.lexeme;this._advance();let s=null;if(!Mw(r)){let a=r.indexOf("/"),l=r.lastIndexOf("/");if(a!==l&&a>=0){let c=r.slice(a+1,l),u=r[l+1]==="i"?"i":"";try{s=new RegExp(c,u)}catch{throw this._errExpectedButGot("REGEX",o)}}}if(s===null)throw this._errExpectedButGot("REGEX",o);return ku.create(t,s)}default:throw this._errExpectedButGot("REGEX",this._peek())}}if(this._matchOne(14)){this._consume(13,DM);let o=this._value();return xe.notIn(t,o)}switch(this._peek().type){case 3:{this._advance();let o=this._value();if(this._previous().type===18)return xe.equals(t,o);switch(o){case"true":return xe.has(t);case"false":return xe.not(t);default:return xe.equals(t,o)}}case 4:{this._advance();let o=this._value();if(this._previous().type===18)return xe.notEquals(t,o);switch(o){case"true":return xe.not(t);case"false":return xe.has(t);default:return xe.notEquals(t,o)}}case 5:return this._advance(),wu.create(t,this._value());case 6:return this._advance(),Tu.create(t,this._value());case 7:return this._advance(),Eu.create(t,this._value());case 8:return this._advance(),Cu.create(t,this._value());case 13:return this._advance(),xe.in(t,this._value());default:return xe.has(t)}}case 20:throw this._parsingErrors.push({message:RM,offset:e.offset,lexeme:"",additionalInfo:PM}),i._parseError;default:throw this._errExpectedButGot(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this._peek())}}_value(){let e=this._peek();switch(e.type){case 17:case 18:return this._advance(),e.lexeme;case 11:return this._advance(),"true";case 12:return this._advance(),"false";case 13:return this._advance(),"in";default:return""}}_flagsGYRe=/g|y/g;_removeFlagsGY(e){return e.replaceAll(this._flagsGYRe,"")}_previous(){return this._tokens[this._current-1]}_matchOne(e){return this._check(e)?(this._advance(),!0):!1}_advance(){return this._isAtEnd()||this._current++,this._previous()}_consume(e,t){if(this._check(e))return this._advance();throw this._errExpectedButGot(t,this._peek())}_errExpectedButGot(e,t,n){let o=d("contextkey.parser.error.expectedButGot",`Expected: {0}
Received: '{1}'.`,e,Ds.getLexeme(t)),r=t.offset,s=Ds.getLexeme(t);return this._parsingErrors.push({message:o,offset:r,lexeme:s,additionalInfo:n}),i._parseError}_check(e){return this._peek().type===e}_peek(){return this._tokens[this._current]}_isAtEnd(){return this._peek().type===20}},xe=class{static false(){return On.INSTANCE}static true(){return Gn.INSTANCE}static has(e){return Oa.create(e)}static equals(e,t){return xu.create(e,t)}static notEquals(e,t){return Su.create(e,t)}static regex(e,t){return ku.create(e,t)}static in(e,t){return Zg.create(e,t)}static notIn(e,t){return em.create(e,t)}static not(e){return Aa.create(e)}static and(...e){return tm.create(e,null,!0)}static or(...e){return Du.create(e,null,!0)}static greater(e,t){return Eu.create(e,t)}static greaterEquals(e,t){return Cu.create(e,t)}static smaller(e,t){return wu.create(e,t)}static smallerEquals(e,t){return Tu.create(e,t)}static _parser=new _I({regexParsingWithErrorRecovery:!1});static deserialize(e){return e==null?void 0:this._parser.parse(e)}};function Iu(i,e){return i.cmp(e)}var On=class i{static INSTANCE=new i;type=0;constructor(){}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!1}serialize(){return"false"}keys(){return[]}map(e){return this}negate(){return Gn.INSTANCE}},Gn=class i{static INSTANCE=new i;type=1;constructor(){}cmp(e){return this.type-e.type}equals(e){return e.type===this.type}substituteConstants(){return this}evaluate(e){return!0}serialize(){return"true"}keys(){return[]}map(e){return this}negate(){return On.INSTANCE}},Oa=class i{constructor(e,t){this.key=e;this.negated=t}static create(e,t=null){let n=bn.get(e);return typeof n=="boolean"?n?Gn.INSTANCE:On.INSTANCE:new i(e,t)}type=2;cmp(e){return e.type!==this.type?this.type-e.type:c1(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){let e=bn.get(this.key);return typeof e=="boolean"?e?Gn.INSTANCE:On.INSTANCE:this}evaluate(e){return!!e.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(e){return e.mapDefined(this.key)}negate(){return this.negated||(this.negated=Aa.create(this.key,this)),this.negated}},xu=class i{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){if(typeof t=="boolean")return t?Oa.create(e,n):Aa.create(e,n);let o=bn.get(e);return typeof o=="boolean"?t===(o?"true":"false")?Gn.INSTANCE:On.INSTANCE:new i(e,t,n)}type=4;cmp(e){return e.type!==this.type?this.type-e.type:Ma(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){let e=bn.get(this.key);if(typeof e=="boolean"){let t=e?"true":"false";return this.value===t?Gn.INSTANCE:On.INSTANCE}return this}evaluate(e){return e.getValue(this.key)==this.value}serialize(){return`${this.key} == '${this.value}'`}keys(){return[this.key]}map(e){return e.mapEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Su.create(this.key,this.value,this)),this.negated}},Zg=class i{constructor(e,t){this.key=e;this.valueKey=t}static create(e,t){return new i(e,t)}type=10;negated=null;cmp(e){return e.type!==this.type?this.type-e.type:Ma(this.key,this.valueKey,e.key,e.valueKey)}equals(e){return e.type===this.type?this.key===e.key&&this.valueKey===e.valueKey:!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.valueKey),n=e.getValue(this.key);return Array.isArray(t)?t.includes(n):typeof n=="string"&&typeof t=="object"&&t!==null?CM.call(t,n):!1}serialize(){return`${this.key} in '${this.valueKey}'`}keys(){return[this.key,this.valueKey]}map(e){return e.mapIn(this.key,this.valueKey)}negate(){return this.negated||(this.negated=em.create(this.key,this.valueKey)),this.negated}},em=class i{constructor(e,t){this.key=e;this.valueKey=t;this._negated=Zg.create(e,t)}static create(e,t){return new i(e,t)}type=11;_negated;cmp(e){return e.type!==this.type?this.type-e.type:this._negated.cmp(e._negated)}equals(e){return e.type===this.type?this._negated.equals(e._negated):!1}substituteConstants(){return this}evaluate(e){return!this._negated.evaluate(e)}serialize(){return`${this.key} not in '${this.valueKey}'`}keys(){return this._negated.keys()}map(e){return e.mapNotIn(this.key,this.valueKey)}negate(){return this._negated}},Su=class i{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){if(typeof t=="boolean")return t?Aa.create(e,n):Oa.create(e,n);let o=bn.get(e);return typeof o=="boolean"?t===(o?"true":"false")?On.INSTANCE:Gn.INSTANCE:new i(e,t,n)}type=5;cmp(e){return e.type!==this.type?this.type-e.type:Ma(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){let e=bn.get(this.key);if(typeof e=="boolean"){let t=e?"true":"false";return this.value===t?On.INSTANCE:Gn.INSTANCE}return this}evaluate(e){return e.getValue(this.key)!=this.value}serialize(){return`${this.key} != '${this.value}'`}keys(){return[this.key]}map(e){return e.mapNotEquals(this.key,this.value)}negate(){return this.negated||(this.negated=xu.create(this.key,this.value,this)),this.negated}},Aa=class i{constructor(e,t){this.key=e;this.negated=t}static create(e,t=null){let n=bn.get(e);return typeof n=="boolean"?n?On.INSTANCE:Gn.INSTANCE:new i(e,t)}type=3;cmp(e){return e.type!==this.type?this.type-e.type:c1(this.key,e.key)}equals(e){return e.type===this.type?this.key===e.key:!1}substituteConstants(){let e=bn.get(this.key);return typeof e=="boolean"?e?On.INSTANCE:Gn.INSTANCE:this}evaluate(e){return!e.getValue(this.key)}serialize(){return`!${this.key}`}keys(){return[this.key]}map(e){return e.mapNot(this.key)}negate(){return this.negated||(this.negated=Oa.create(this.key,this)),this.negated}};function nm(i,e){if(typeof i=="string"){let t=parseFloat(i);isNaN(t)||(i=t)}return typeof i=="string"||typeof i=="number"?e(i):On.INSTANCE}var Eu=class i{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){return nm(t,o=>new i(e,o,n))}type=12;cmp(e){return e.type!==this.type?this.type-e.type:Ma(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>this.value}serialize(){return`${this.key} > ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreater(this.key,this.value)}negate(){return this.negated||(this.negated=Tu.create(this.key,this.value,this)),this.negated}},Cu=class i{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){return nm(t,o=>new i(e,o,n))}type=13;cmp(e){return e.type!==this.type?this.type-e.type:Ma(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))>=this.value}serialize(){return`${this.key} >= ${this.value}`}keys(){return[this.key]}map(e){return e.mapGreaterEquals(this.key,this.value)}negate(){return this.negated||(this.negated=wu.create(this.key,this.value,this)),this.negated}},wu=class i{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){return nm(t,o=>new i(e,o,n))}type=14;cmp(e){return e.type!==this.type?this.type-e.type:Ma(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<this.value}serialize(){return`${this.key} < ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmaller(this.key,this.value)}negate(){return this.negated||(this.negated=Cu.create(this.key,this.value,this)),this.negated}},Tu=class i{constructor(e,t,n){this.key=e;this.value=t;this.negated=n}static create(e,t,n=null){return nm(t,o=>new i(e,o,n))}type=15;cmp(e){return e.type!==this.type?this.type-e.type:Ma(this.key,this.value,e.key,e.value)}equals(e){return e.type===this.type?this.key===e.key&&this.value===e.value:!1}substituteConstants(){return this}evaluate(e){return typeof this.value=="string"?!1:parseFloat(e.getValue(this.key))<=this.value}serialize(){return`${this.key} <= ${this.value}`}keys(){return[this.key]}map(e){return e.mapSmallerEquals(this.key,this.value)}negate(){return this.negated||(this.negated=Eu.create(this.key,this.value,this)),this.negated}},ku=class i{constructor(e,t){this.key=e;this.regexp=t}static create(e,t){return new i(e,t)}type=7;negated=null;cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.key<e.key)return-1;if(this.key>e.key)return 1;let t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return t<n?-1:t>n?1:0}equals(e){if(e.type===this.type){let t=this.regexp?this.regexp.source:"",n=e.regexp?e.regexp.source:"";return this.key===e.key&&t===n}return!1}substituteConstants(){return this}evaluate(e){let t=e.getValue(this.key);return this.regexp?this.regexp.test(t):!1}serialize(){let e=this.regexp?`/${this.regexp.source}/${this.regexp.flags}`:"/invalid/";return`${this.key} =~ ${e}`}keys(){return[this.key]}map(e){return e.mapRegex(this.key,this.regexp)}negate(){return this.negated||(this.negated=LI.create(this)),this.negated}},LI=class i{constructor(e){this._actual=e}static create(e){return new i(e)}type=8;cmp(e){return e.type!==this.type?this.type-e.type:this._actual.cmp(e._actual)}equals(e){return e.type===this.type?this._actual.equals(e._actual):!1}substituteConstants(){return this}evaluate(e){return!this._actual.evaluate(e)}serialize(){return`!(${this._actual.serialize()})`}keys(){return this._actual.keys()}map(e){return new i(this._actual.map(e))}negate(){return this._actual}};function d1(i){let e=null;for(let t=0,n=i.length;t<n;t++){let o=i[t].substituteConstants();if(i[t]!==o&&e===null){e=[];for(let r=0;r<t;r++)e[r]=i[r]}e!==null&&(e[t]=o)}return e===null?i:e}var tm=class i{constructor(e,t){this.expr=e;this.negated=t}static create(e,t,n){return i._normalizeArr(e,t,n)}type=6;cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){let o=Iu(this.expr[t],e.expr[t]);if(o!==0)return o}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){let e=d1(this.expr);return e===this.expr?this:i.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].evaluate(e))return!1;return!0}static _normalizeArr(e,t,n){let o=[],r=!1;for(let s of e)if(s){if(s.type===1){r=!0;continue}if(s.type===0)return On.INSTANCE;if(s.type===6){o.push(...s.expr);continue}o.push(s)}if(o.length===0&&r)return Gn.INSTANCE;if(o.length!==0){if(o.length===1)return o[0];o.sort(Iu);for(let s=1;s<o.length;s++)o[s-1].equals(o[s])&&(o.splice(s,1),s--);if(o.length===1)return o[0];for(;o.length>1;){let s=o[o.length-1];if(s.type!==9)break;o.pop();let a=o.pop(),l=o.length===0,c=Du.create(s.expr.map(u=>i.create([u,a],null,n)),null,l);c&&(o.push(c),o.sort(Iu))}if(o.length===1)return o[0];if(n){for(let s=0;s<o.length;s++)for(let a=s+1;a<o.length;a++)if(o[s].negate().equals(o[a]))return On.INSTANCE;if(o.length===1)return o[0]}return new i(o,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" && ")}keys(){let e=[];for(let t of this.expr)e.push(...t.keys());return e}map(e){return new i(this.expr.map(t=>t.map(e)),null)}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());this.negated=Du.create(e,this,!0)}return this.negated}},Du=class i{constructor(e,t){this.expr=e;this.negated=t}static create(e,t,n){return i._normalizeArr(e,t,n)}type=9;cmp(e){if(e.type!==this.type)return this.type-e.type;if(this.expr.length<e.expr.length)return-1;if(this.expr.length>e.expr.length)return 1;for(let t=0,n=this.expr.length;t<n;t++){let o=Iu(this.expr[t],e.expr[t]);if(o!==0)return o}return 0}equals(e){if(e.type===this.type){if(this.expr.length!==e.expr.length)return!1;for(let t=0,n=this.expr.length;t<n;t++)if(!this.expr[t].equals(e.expr[t]))return!1;return!0}return!1}substituteConstants(){let e=d1(this.expr);return e===this.expr?this:i.create(e,this.negated,!1)}evaluate(e){for(let t=0,n=this.expr.length;t<n;t++)if(this.expr[t].evaluate(e))return!0;return!1}static _normalizeArr(e,t,n){let o=[],r=!1;if(e){for(let s=0,a=e.length;s<a;s++){let l=e[s];if(l){if(l.type===0){r=!0;continue}if(l.type===1)return Gn.INSTANCE;if(l.type===9){o=o.concat(l.expr);continue}o.push(l)}}if(o.length===0&&r)return On.INSTANCE;o.sort(Iu)}if(o.length!==0){if(o.length===1)return o[0];for(let s=1;s<o.length;s++)o[s-1].equals(o[s])&&(o.splice(s,1),s--);if(o.length===1)return o[0];if(n){for(let s=0;s<o.length;s++)for(let a=s+1;a<o.length;a++)if(o[s].negate().equals(o[a]))return Gn.INSTANCE;if(o.length===1)return o[0]}return new i(o,t)}}serialize(){return this.expr.map(e=>e.serialize()).join(" || ")}keys(){let e=[];for(let t of this.expr)e.push(...t.keys());return e}map(e){return new i(this.expr.map(t=>t.map(e)),null)}negate(){if(!this.negated){let e=[];for(let t of this.expr)e.push(t.negate());for(;e.length>1;){let t=e.shift(),n=e.shift(),o=[];for(let r of l1(t))for(let s of l1(n))o.push(tm.create([r,s],null,!1));e.unshift(i.create(o,null,!1))}this.negated=i.create(e,this,!0)}return this.negated}},K=class i extends Oa{static _info=[];static all(){return i._info.values()}_defaultValue;constructor(e,t,n){super(e,null),this._defaultValue=t,typeof n=="object"?i._info.push({...n,key:e}):n!==!0&&i._info.push({key:e,description:n,type:t!=null?typeof t:void 0})}bindTo(e){return e.createKey(this.key,this._defaultValue)}getValue(e){return e.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(e){return xu.create(this.key,e)}notEqualsTo(e){return Su.create(this.key,e)}},Qo=P("contextKeyService");function c1(i,e){return i<e?-1:i>e?1:0}function Ma(i,e,t,n){return i<t?-1:i>t?1:e<n?-1:e>n?1:0}function l1(i){return i.type===9?i.expr:[i]}var Ls=P("accessibilityService");var u1=new K("accessibilityModeEnabled",!1);var An=P("environmentService"),dJ=An;var _t=P("contextService");function om(i){let e=i;return typeof e?.id=="string"&&N.isUri(e.uri)}var _u={id:"empty-window"};function rm(i){let e=i;return typeof e?.id=="string"&&N.isUri(e.configPath)}var im=class{constructor(e,t){this.raw=t;this.uri=e.uri,this.index=e.index,this.name=e.name}uri;name;index;toResource(e){return Oe(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}};function Lu(i){return new im({uri:i,index:0,name:nT(i)},{uri:i.toString()})}var p1="code-workspace",MM=`.${p1}`,EJ=[{name:d("codeWorkspace","Code Workspace"),extensions:[p1]}];function sm(i){return(typeof i=="string"?kc(i):Mh(i))===MM}var $e=P("configurationService");function h1(i){return i.replace(/[\[\]]/g,"")}var RI=class{data=new Map;add(e,t){dh(Xt(e)),dh(Ut(t)),dh(!this.data.has(e),"There is already an extension with this id"),this.data.set(e,t)}knows(e){return this.data.has(e)}as(e){return this.data.get(e)||null}},Ae=new RI;var Xo={JSONContribution:"base.contributions.json"};function NM(i){return i.length>0&&i.charAt(i.length-1)==="#"?i.substring(0,i.length-1):i}var PI=class{schemasById;_onDidChangeSchema=new C;onDidChangeSchema=this._onDidChangeSchema.event;constructor(){this.schemasById={}}registerSchema(e,t){this.schemasById[NM(e)]=t,this._onDidChangeSchema.fire(e)}notifySchemaChanged(e){this._onDidChangeSchema.fire(e)}getSchemaContributions(){return{schemas:this.schemasById}}getSchemaContent(e){let t=this.schemasById[e];return t?s1(t):void 0}hasSchemaContent(e){return!!this.schemasById[e]}},FM=new PI;Ae.add(Xo.JSONContribution,FM);var KJ=P("policy");var Mi={Configuration:"base.contributions.configuration"};var Pu={properties:{},patternProperties:{}},lm={properties:{},patternProperties:{}},dm={properties:{},patternProperties:{}},cm={properties:{},patternProperties:{}},um={properties:{},patternProperties:{}},Ru={properties:{},patternProperties:{}},Na="vscode://schemas/settings/resourceLanguage";var pm=Ae.as(Xo.JSONContribution),OI=class{registeredConfigurationDefaults=[];configurationDefaultsOverrides;defaultLanguageConfigurationOverridesNode;configurationContributors;configurationProperties;policyConfigurations;excludedConfigurationProperties;resourceLanguageSettingsSchema;overrideIdentifiers=new Set;_onDidSchemaChange=new C;onDidSchemaChange=this._onDidSchemaChange.event;_onDidUpdateConfiguration=new C;onDidUpdateConfiguration=this._onDidUpdateConfiguration.event;constructor(){this.configurationDefaultsOverrides=new Map,this.defaultLanguageConfigurationOverridesNode={id:"defaultOverrides",title:d("defaultLanguageConfigurationOverrides.title","Default Language Configuration Overrides"),properties:{}},this.configurationContributors=[this.defaultLanguageConfigurationOverridesNode],this.resourceLanguageSettingsSchema={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.configurationProperties={},this.policyConfigurations=new Map,this.excludedConfigurationProperties={},pm.registerSchema(Na,this.resourceLanguageSettingsSchema),this.registerOverridePropertyPatternKey()}registerConfiguration(e,t=!0){this.registerConfigurations([e],t)}registerConfigurations(e,t=!0){let n=new Set;this.doRegisterConfigurations(e,t,n),pm.registerSchema(Na,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}deregisterConfigurations(e){let t=new Set;this.doDeregisterConfigurations(e,t),pm.registerSchema(Na,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t})}updateConfigurations({add:e,remove:t}){let n=new Set;this.doDeregisterConfigurations(t,n),this.doRegisterConfigurations(e,!1,n),pm.registerSchema(Na,this.resourceLanguageSettingsSchema),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n})}registerDefaultConfigurations(e){let t=new Set;this.doRegisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doRegisterDefaultConfigurations(e,t){this.registeredConfigurationDefaults.push(...e);let n=[];for(let{overrides:o,source:r}of e)for(let s in o){t.add(s);let a=this.configurationDefaultsOverrides.get(s)??this.configurationDefaultsOverrides.set(s,{configurationDefaultOverrides:[]}).get(s),l=o[s];if(a.configurationDefaultOverrides.push({value:l,source:r}),sd.test(s)){let c=this.mergeDefaultConfigurationsForOverrideIdentifier(s,l,r,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c,this.updateDefaultOverrideProperty(s,c,r),n.push(...BM(s))}else{let c=this.mergeDefaultConfigurationsForConfigurationProperty(s,l,r,a.configurationDefaultOverrideValue);if(!c)continue;a.configurationDefaultOverrideValue=c;let u=this.configurationProperties[s];u&&(this.updatePropertyDefaultValue(s,u),this.updateSchema(s,u))}}this.doRegisterOverrideIdentifiers(n)}deregisterDefaultConfigurations(e){let t=new Set;this.doDeregisterDefaultConfigurations(e,t),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:t,defaultsOverrides:!0})}doDeregisterDefaultConfigurations(e,t){for(let n of e){let o=this.registeredConfigurationDefaults.indexOf(n);o!==-1&&this.registeredConfigurationDefaults.splice(o,1)}for(let{overrides:n,source:o}of e)for(let r in n){let s=this.configurationDefaultsOverrides.get(r);if(!s)continue;let a=s.configurationDefaultOverrides.findIndex(l=>o?l.source?.id===o.id:l.value===n[r]);if(a!==-1){if(s.configurationDefaultOverrides.splice(a,1),s.configurationDefaultOverrides.length===0&&this.configurationDefaultsOverrides.delete(r),sd.test(r)){let l;for(let c of s.configurationDefaultOverrides)l=this.mergeDefaultConfigurationsForOverrideIdentifier(r,c.value,c.source,l);l&&!ba(l.value)?(s.configurationDefaultOverrideValue=l,this.updateDefaultOverrideProperty(r,l,o)):(this.configurationDefaultsOverrides.delete(r),delete this.configurationProperties[r],delete this.defaultLanguageConfigurationOverridesNode.properties[r])}else{let l;for(let u of s.configurationDefaultOverrides)l=this.mergeDefaultConfigurationsForConfigurationProperty(r,u.value,u.source,l);s.configurationDefaultOverrideValue=l;let c=this.configurationProperties[r];c&&(this.updatePropertyDefaultValue(r,c),this.updateSchema(r,c))}t.add(r)}}this.updateOverridePropertyPatternKey()}updateDefaultOverrideProperty(e,t,n){let o={type:"object",default:t.value,description:d("defaultLanguageConfiguration.description","Configure settings to be overridden for the {0} language.",h1(e)),$ref:Na,defaultDefaultValue:t.value,source:n,defaultValueSource:n};this.configurationProperties[e]=o,this.defaultLanguageConfigurationOverridesNode.properties[e]=o}mergeDefaultConfigurationsForOverrideIdentifier(e,t,n,o){let r=o?.value||{},s=o?.source??new Map;if(!(s instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(let a of Object.keys(t)){let l=t[a];if(Ut(l)&&(Uo(r[a])||Ut(r[a]))){if(r[a]={...r[a]??{},...l},n)for(let u in l)s.set(`${a}.${u}`,n)}else r[a]=l,n?s.set(a,n):s.delete(a)}return{value:r,source:s}}mergeDefaultConfigurationsForConfigurationProperty(e,t,n,o){let r=this.configurationProperties[e],s=o?.value??r?.defaultDefaultValue,a=n;if(Ut(t)&&(r!==void 0&&r.type==="object"||r===void 0&&(Uo(s)||Ut(s)))){if(a=o?.source??new Map,!(a instanceof Map)){console.error("defaultValueSource is not a Map");return}for(let c in t)n&&a.set(`${e}.${c}`,n);t={...Ut(s)?s:{},...t}}return{value:t,source:a}}deltaConfiguration(e){let t=!1,n=new Set;e.removedDefaults&&(this.doDeregisterDefaultConfigurations(e.removedDefaults,n),t=!0),e.addedDefaults&&(this.doRegisterDefaultConfigurations(e.addedDefaults,n),t=!0),e.removedConfigurations&&this.doDeregisterConfigurations(e.removedConfigurations,n),e.addedConfigurations&&this.doRegisterConfigurations(e.addedConfigurations,!1,n),this._onDidSchemaChange.fire(),this._onDidUpdateConfiguration.fire({properties:n,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this._onDidSchemaChange.fire()}registerOverrideIdentifiers(e){this.doRegisterOverrideIdentifiers(e),this._onDidSchemaChange.fire()}doRegisterOverrideIdentifiers(e){for(let t of e)this.overrideIdentifiers.add(t);this.updateOverridePropertyPatternKey()}doRegisterConfigurations(e,t,n){e.forEach(o=>{this.validateAndRegisterProperties(o,t,o.extensionInfo,o.restrictedProperties,void 0,n),this.configurationContributors.push(o),this.registerJSONConfiguration(o)})}doDeregisterConfigurations(e,t){let n=o=>{if(o.properties)for(let r in o.properties){t.add(r);let s=this.configurationProperties[r];s?.policy?.name&&this.policyConfigurations.delete(s.policy.name),delete this.configurationProperties[r],this.removeFromSchema(r,o.properties[r])}o.allOf?.forEach(r=>n(r))};for(let o of e){n(o);let r=this.configurationContributors.indexOf(o);r!==-1&&this.configurationContributors.splice(r,1)}}validateAndRegisterProperties(e,t=!0,n,o,r=3,s){r=Dn(e.scope)?r:e.scope;let a=e.properties;if(a)for(let c in a){let u=a[c];if(t&&UM(c,u)){delete a[c];continue}if(u.source=n,u.defaultDefaultValue=a[c].default,this.updatePropertyDefaultValue(c,u),sd.test(c)?u.scope=void 0:(u.scope=Dn(u.scope)?r:u.scope,u.restricted=Dn(u.restricted)?!!o?.includes(c):u.restricted),a[c].hasOwnProperty("included")&&!a[c].included){this.excludedConfigurationProperties[c]=a[c],delete a[c];continue}else this.configurationProperties[c]=a[c],a[c].policy?.name&&this.policyConfigurations.set(a[c].policy.name,c);!a[c].deprecationMessage&&a[c].markdownDeprecationMessage&&(a[c].deprecationMessage=a[c].markdownDeprecationMessage),s.add(c)}let l=e.allOf;if(l)for(let c of l)this.validateAndRegisterProperties(c,t,n,o,r,s)}getConfigurations(){return this.configurationContributors}getConfigurationProperties(){return this.configurationProperties}getPolicyConfigurations(){return this.policyConfigurations}getExcludedConfigurationProperties(){return this.excludedConfigurationProperties}getRegisteredDefaultConfigurations(){return[...this.registeredConfigurationDefaults]}getConfigurationDefaultsOverrides(){let e=new Map;for(let[t,n]of this.configurationDefaultsOverrides)n.configurationDefaultOverrideValue&&e.set(t,n.configurationDefaultOverrideValue);return e}registerJSONConfiguration(e){let t=n=>{let o=n.properties;if(o)for(let s in o)this.updateSchema(s,o[s]);n.allOf?.forEach(t)};t(e)}updateSchema(e,t){switch(Pu.properties[e]=t,t.scope){case 1:lm.properties[e]=t;break;case 2:dm.properties[e]=t;break;case 6:cm.properties[e]=t;break;case 3:um.properties[e]=t;break;case 4:Ru.properties[e]=t;break;case 5:Ru.properties[e]=t,this.resourceLanguageSettingsSchema.properties[e]=t;break}}removeFromSchema(e,t){switch(delete Pu.properties[e],t.scope){case 1:delete lm.properties[e];break;case 2:delete dm.properties[e];break;case 6:delete cm.properties[e];break;case 3:delete um.properties[e];break;case 4:case 5:delete Ru.properties[e],delete this.resourceLanguageSettingsSchema.properties[e];break}}updateOverridePropertyPatternKey(){for(let e of this.overrideIdentifiers.values()){let t=`[${e}]`,n={type:"object",description:d("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:d("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:Na};this.updatePropertyDefaultValue(t,n),Pu.properties[t]=n,lm.properties[t]=n,dm.properties[t]=n,cm.properties[t]=n,um.properties[t]=n,Ru.properties[t]=n}}registerOverridePropertyPatternKey(){let e={type:"object",description:d("overrideSettings.defaultDescription","Configure editor settings to be overridden for a language."),errorMessage:d("overrideSettings.errorMessage","This setting does not support per-language configuration."),$ref:Na};Pu.patternProperties[Fa]=e,lm.patternProperties[Fa]=e,dm.patternProperties[Fa]=e,cm.patternProperties[Fa]=e,um.patternProperties[Fa]=e,Ru.patternProperties[Fa]=e,this._onDidSchemaChange.fire()}updatePropertyDefaultValue(e,t){let n=this.configurationDefaultsOverrides.get(e)?.configurationDefaultOverrideValue,o,r;n&&(!t.disallowConfigurationDefault||!n.source)&&(o=n.value,r=n.source),Uo(o)&&(o=t.defaultDefaultValue,r=void 0),Uo(o)&&(o=WM(t.type)),t.default=o,t.defaultValueSource=r}},m1="\\[([^\\]]+)\\]",g1=new RegExp(m1,"g"),Fa=`^(${m1})+$`,sd=new RegExp(Fa);function BM(i){let e=[];if(sd.test(i)){let t=g1.exec(i);for(;t?.length;){let n=t[1].trim();n&&e.push(n),t=g1.exec(i)}}return io(e)}function WM(i){switch(Array.isArray(i)?i[0]:i){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}var hm=new OI;Ae.add(Mi.Configuration,hm);function UM(i,e){return i.trim()?sd.test(i)?d("config.property.languageDefault","Cannot register '{0}'. This matches property pattern '\\\\[.*\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.",i):hm.getConfigurationProperties()[i]!==void 0?d("config.property.duplicate","Cannot register '{0}'. This property is already registered.",i):e.policy?.name&&hm.getPolicyConfigurations().get(e.policy?.name)!==void 0?d("config.policy.duplicate","Cannot register '{0}'. The associated policy {1} is already registered with {2}.",i,e.policy?.name,hm.getPolicyConfigurations().get(e.policy?.name)):null:d("config.property.empty","Cannot register an empty property")}var zM=8,gm=class{_values;constructor(e){this._values=e}hasChanged(e){return this._values[e]}},Ou=class{stableMinimapLayoutInput;stableFitMaxMinimapScale;stableFitRemainingWidth;constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},Je=class{id;name;defaultValue;schema;constructor(e,t,n,o){this.id=e,this.name=t,this.defaultValue=n,this.schema=o}applyUpdate(e,t){return mm(e,t)}compute(e,t,n){return n}},ld=class{constructor(e,t){this.newValue=e;this.didChange=t}};function mm(i,e){if(typeof i!="object"||typeof e!="object"||!i||!e)return new ld(e,i!==e);if(Array.isArray(i)||Array.isArray(e)){let n=Array.isArray(i)&&Array.isArray(e)&&Bt(i,e);return new ld(e,!n)}let t=!1;for(let n in e)if(e.hasOwnProperty(n)){let o=mm(i[n],e[n]);o.didChange&&(i[n]=o.newValue,t=!0)}return new ld(i,t)}var Wa=class{id;name;defaultValue;schema=void 0;constructor(e){this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return mm(e,t)}validate(e){return this.defaultValue}},Rs=class{id;name;defaultValue;schema;constructor(e,t,n,o){this.id=e,this.name=t,this.defaultValue=n,this.schema=o}applyUpdate(e,t){return mm(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,n){return n}};function ue(i,e){return typeof i>"u"?e:i==="false"?!1:!!i}var De=class extends Rs{constructor(e,t,n,o=void 0){typeof o<"u"&&(o.type="boolean",o.default=n),super(e,t,n,o)}validate(e){return ue(e,this.defaultValue)}};function HM(i,e,t,n){if(typeof i>"u")return e;let o=parseInt(i,10);return isNaN(o)?e:(o=Math.max(t,o),o=Math.min(n,o),o|0)}var Qe=class i extends Rs{static clampedInt(e,t,n,o){return HM(e,t,n,o)}minimum;maximum;constructor(e,t,n,o,r,s=void 0){typeof s<"u"&&(s.type="integer",s.default=n,s.minimum=o,s.maximum=r),super(e,t,n,s),this.minimum=o,this.maximum=r}validate(e){return i.clampedInt(e,this.defaultValue,this.minimum,this.maximum)}};var Yi=class i extends Rs{static clamp(e,t,n){return e<t?t:e>n?n:e}static float(e,t){if(typeof e=="number")return e;if(typeof e>"u")return t;let n=parseFloat(e);return isNaN(n)?t:n}validationFn;constructor(e,t,n,o,r){typeof r<"u"&&(r.type="number",r.default=n),super(e,t,n,r),this.validationFn=o}validate(e){return this.validationFn(i.float(e,this.defaultValue))}},En=class i extends Rs{static string(e,t){return typeof e!="string"?t:e}constructor(e,t,n,o=void 0){typeof o<"u"&&(o.type="string",o.default=n),super(e,t,n,o)}validate(e){return i.string(e,this.defaultValue)}};function vt(i,e,t,n){return typeof i!="string"?e:n&&i in n?n[i]:t.indexOf(i)===-1?e:i}var lt=class extends Rs{_allowedValues;constructor(e,t,n,o,r=void 0){typeof r<"u"&&(r.type="string",r.enum=o,r.default=n),super(e,t,n,r),this._allowedValues=o}validate(e){return vt(e,this.defaultValue,this._allowedValues)}},ad=class extends Je{_allowedValues;_convert;constructor(e,t,n,o,r,s,a=void 0){typeof a<"u"&&(a.type="string",a.enum=r,a.default=o),super(e,t,n,a),this._allowedValues=r,this._convert=s}validate(e){return typeof e!="string"?this.defaultValue:this._allowedValues.indexOf(e)===-1?this.defaultValue:this._convert(e)}};function KM(i){switch(i){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}var AI=class extends Je{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[d("accessibilitySupport.auto","Use platform APIs to detect when a Screen Reader is attached."),d("accessibilitySupport.on","Optimize for usage with a Screen Reader."),d("accessibilitySupport.off","Assume a screen reader is not attached.")],default:"auto",tags:["accessibility"],description:d("accessibilitySupport","Controls if the UI should run in a mode where it is optimized for screen readers.")})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,n){return n===0?e.accessibilitySupport:n}},MI=class extends Je{constructor(){let e={insertSpace:!0,ignoreEmptyLines:!0};super(23,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:d("comments.insertSpace","Controls whether a space character is inserted when commenting.")},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:d("comments.ignoreEmptyLines","Controls if empty lines should be ignored with toggle, add or remove actions for line comments.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{insertSpace:ue(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:ue(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}};function GM(i){switch(i){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}function qM(i){switch(i){case"line":return 1;case"block":return 2;case"underline":return 3;case"line-thin":return 4;case"block-outline":return 5;case"underline-thin":return 6}}var NI=class extends Wa{constructor(){super(144)}compute(e,t,n){let o=["monaco-editor"];return t.get(40)&&o.push(t.get(40)),e.extraEditorClassName&&o.push(e.extraEditorClassName),t.get(75)==="default"?o.push("mouse-default"):t.get(75)==="copy"&&o.push("mouse-copy"),t.get(113)&&o.push("showUnused"),t.get(142)&&o.push("showDeprecated"),o.join(" ")}},FI=class extends De{constructor(){super(38,"emptySelectionClipboard",!0,{description:d("emptySelectionClipboard","Controls whether copying without a selection copies the current line.")})}compute(e,t,n){return n&&e.emptySelectionClipboard}},BI=class extends Je{constructor(){let e={cursorMoveOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0};super(42,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:d("find.cursorMoveOnType","Controls whether the cursor should jump to find matches while typing.")},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[d("editor.find.seedSearchStringFromSelection.never","Never seed search string from the editor selection."),d("editor.find.seedSearchStringFromSelection.always","Always seed search string from the editor selection, including word at cursor position."),d("editor.find.seedSearchStringFromSelection.selection","Only seed search string from the editor selection.")],description:d("find.seedSearchStringFromSelection","Controls whether the search string in the Find Widget is seeded from the editor selection.")},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[d("editor.find.autoFindInSelection.never","Never turn on Find in Selection automatically (default)."),d("editor.find.autoFindInSelection.always","Always turn on Find in Selection automatically."),d("editor.find.autoFindInSelection.multiline","Turn on Find in Selection automatically when multiple lines of content are selected.")],description:d("find.autoFindInSelection","Controls the condition for turning on Find in Selection automatically.")},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:d("find.globalFindClipboard","Controls whether the Find Widget should read or modify the shared find clipboard on macOS."),included:Se},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:d("find.addExtraSpaceOnTop","Controls whether the Find Widget should add extra lines on top of the editor. When true, you can scroll beyond the first line when the Find Widget is visible.")},"editor.find.loop":{type:"boolean",default:e.loop,description:d("find.loop","Controls whether the search automatically restarts from the beginning (or the end) when no further matches can be found.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{cursorMoveOnType:ue(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":vt(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":vt(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:ue(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:ue(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:ue(t.loop,this.defaultValue.loop)}}},Au=class i extends Je{static OFF='"liga" off, "calt" off';static ON='"liga" on, "calt" on';constructor(){super(52,"fontLigatures",i.OFF,{anyOf:[{type:"boolean",description:d("fontLigatures","Enables/Disables font ligatures ('calt' and 'liga' font features). Change this to a string for fine-grained control of the 'font-feature-settings' CSS property.")},{type:"string",description:d("fontFeatureSettings","Explicit 'font-feature-settings' CSS property. A boolean can be passed instead if one only needs to turn on/off ligatures.")}],description:d("fontLigaturesGeneral","Configures font ligatures or font features. Can be either a boolean to enable/disable ligatures or a string for the value of the CSS 'font-feature-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"||e.length===0?i.OFF:e==="true"?i.ON:e:e?i.ON:i.OFF}},od=class i extends Je{static OFF="normal";static TRANSLATE="translate";constructor(){super(55,"fontVariations",i.OFF,{anyOf:[{type:"boolean",description:d("fontVariations","Enables/Disables the translation from font-weight to font-variation-settings. Change this to a string for fine-grained control of the 'font-variation-settings' CSS property.")},{type:"string",description:d("fontVariationSettings","Explicit 'font-variation-settings' CSS property. A boolean can be passed instead if one only needs to translate font-weight to font-variation-settings.")}],description:d("fontVariationsGeneral","Configures font variations. Can be either a boolean to enable/disable the translation from font-weight to font-variation-settings or a string for the value of the CSS 'font-variation-settings' property."),default:!1})}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e==="false"?i.OFF:e==="true"?i.TRANSLATE:e:e?i.TRANSLATE:i.OFF}compute(e,t,n){return e.fontInfo.fontVariationSettings}},WI=class extends Wa{constructor(){super(51)}compute(e,t,n){return e.fontInfo}},UI=class extends Rs{constructor(){super(53,"fontSize",fo.fontSize,{type:"number",minimum:6,maximum:100,default:fo.fontSize,description:d("fontSize","Controls the font size in pixels.")})}validate(e){let t=Yi.float(e,this.defaultValue);return t===0?fo.fontSize:Yi.clamp(t,6,100)}compute(e,t,n){return e.fontInfo.fontSize}},VI=class i extends Je{static SUGGESTION_VALUES=["normal","bold","100","200","300","400","500","600","700","800","900"];static MINIMUM_VALUE=1;static MAXIMUM_VALUE=1e3;constructor(){super(54,"fontWeight",fo.fontWeight,{anyOf:[{type:"number",minimum:i.MINIMUM_VALUE,maximum:i.MAXIMUM_VALUE,errorMessage:d("fontWeightErrorMessage",'Only "normal" and "bold" keywords or numbers between 1 and 1000 are allowed.')},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:i.SUGGESTION_VALUES}],default:fo.fontWeight,description:d("fontWeight",'Controls the font weight. Accepts "normal" and "bold" keywords or numbers between 1 and 1000.')})}validate(e){return e==="normal"||e==="bold"?e:String(Qe.clampedInt(e,fo.fontWeight,i.MINIMUM_VALUE,i.MAXIMUM_VALUE))}},zI=class extends Je{constructor(){let e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[d("editor.gotoLocation.multiple.peek","Show Peek view of the results (default)"),d("editor.gotoLocation.multiple.gotoAndPeek","Go to the primary result and show a Peek view"),d("editor.gotoLocation.multiple.goto","Go to the primary result and enable Peek-less navigation to others")]},n=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(59,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:d("editor.gotoLocation.multiple.deprecated","This setting is deprecated, please use separate settings like 'editor.editor.gotoLocation.multipleDefinitions' or 'editor.editor.gotoLocation.multipleImplementations' instead.")},"editor.gotoLocation.multipleDefinitions":{description:d("editor.editor.gotoLocation.multipleDefinitions","Controls the behavior the 'Go to Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:d("editor.editor.gotoLocation.multipleTypeDefinitions","Controls the behavior the 'Go to Type Definition'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleDeclarations":{description:d("editor.editor.gotoLocation.multipleDeclarations","Controls the behavior the 'Go to Declaration'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleImplementations":{description:d("editor.editor.gotoLocation.multipleImplemenattions","Controls the behavior the 'Go to Implementations'-command when multiple target locations exist."),...t},"editor.gotoLocation.multipleReferences":{description:d("editor.editor.gotoLocation.multipleReferences","Controls the behavior the 'Go to References'-command when multiple target locations exist."),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:n,description:d("alternativeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Definition' is the current location.")},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:n,description:d("alternativeTypeDefinitionCommand","Alternative command id that is being executed when the result of 'Go to Type Definition' is the current location.")},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:n,description:d("alternativeDeclarationCommand","Alternative command id that is being executed when the result of 'Go to Declaration' is the current location.")},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:n,description:d("alternativeImplementationCommand","Alternative command id that is being executed when the result of 'Go to Implementation' is the current location.")},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:n,description:d("alternativeReferenceCommand","Alternative command id that is being executed when the result of 'Go to Reference' is the current location.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{multiple:vt(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??vt(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??vt(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??vt(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??vt(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??vt(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??vt(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:En.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:En.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:En.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:En.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:En.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:En.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}},HI=class extends Je{constructor(){let e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(61,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:d("hover.enabled","Controls whether the hover is shown.")},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:d("hover.delay","Controls the delay in milliseconds after which the hover is shown.")},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:d("hover.sticky","Controls whether the hover should remain visible when mouse is moved over it.")},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:d("hover.hidingDelay","Controls the delay in milliseconds after which the hover is hidden. Requires `editor.hover.sticky` to be enabled.")},"editor.hover.above":{type:"boolean",default:e.above,description:d("hover.above","Prefer showing hovers above the line, if there's space.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:ue(t.enabled,this.defaultValue.enabled),delay:Qe.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:ue(t.sticky,this.defaultValue.sticky),hidingDelay:Qe.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:ue(t.above,this.defaultValue.above)}}};var KI=class i extends Wa{constructor(){super(147)}compute(e,t,n){return i.computeLayout(t,{memory:e.memory,outerWidth:e.outerWidth,outerHeight:e.outerHeight,isDominatedByLongLines:e.isDominatedByLongLines,lineHeight:e.fontInfo.lineHeight,viewLineCount:e.viewLineCount,lineNumbersDigitCount:e.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:e.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:e.fontInfo.maxDigitWidth,pixelRatio:e.pixelRatio,glyphMarginDecorationLaneCount:e.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(e){let t=e.height/e.lineHeight,n=Math.floor(e.paddingTop/e.lineHeight),o=Math.floor(e.paddingBottom/e.lineHeight);e.scrollBeyondLastLine&&(o=Math.max(o,t-1));let r=(n+e.viewLineCount+o)/(e.pixelRatio*e.height),s=Math.floor(e.viewLineCount/r);return{typicalViewportLineCount:t,extraLinesBeforeFirstLine:n,extraLinesBeyondLastLine:o,desiredRatio:r,minimapLineCount:s}}static _computeMinimapLayout(e,t){let n=e.outerWidth,o=e.outerHeight,r=e.pixelRatio;if(!e.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(r*o),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:o};let s=t.stableMinimapLayoutInput,a=s&&e.outerHeight===s.outerHeight&&e.lineHeight===s.lineHeight&&e.typicalHalfwidthCharacterWidth===s.typicalHalfwidthCharacterWidth&&e.pixelRatio===s.pixelRatio&&e.scrollBeyondLastLine===s.scrollBeyondLastLine&&e.paddingTop===s.paddingTop&&e.paddingBottom===s.paddingBottom&&e.minimap.enabled===s.minimap.enabled&&e.minimap.side===s.minimap.side&&e.minimap.size===s.minimap.size&&e.minimap.showSlider===s.minimap.showSlider&&e.minimap.renderCharacters===s.minimap.renderCharacters&&e.minimap.maxColumn===s.minimap.maxColumn&&e.minimap.scale===s.minimap.scale&&e.verticalScrollbarWidth===s.verticalScrollbarWidth&&e.isViewportWrapping===s.isViewportWrapping,l=e.lineHeight,c=e.typicalHalfwidthCharacterWidth,u=e.scrollBeyondLastLine,p=e.minimap.renderCharacters,h=r>=2?Math.round(e.minimap.scale*2):e.minimap.scale,m=e.minimap.maxColumn,v=e.minimap.size,f=e.minimap.side,b=e.verticalScrollbarWidth,E=e.viewLineCount,T=e.remainingWidth,_=e.isViewportWrapping,O=p?2:3,M=Math.floor(r*o),U=M/r,he=!1,Q=!1,se=O*h,ne=h/r,V=1;if(v==="fill"||v==="fit"){let{typicalViewportLineCount:ie,extraLinesBeforeFirstLine:ce,extraLinesBeyondLastLine:ke,desiredRatio:we,minimapLineCount:tt}=i.computeContainedMinimapLineCount({viewLineCount:E,scrollBeyondLastLine:u,paddingTop:e.paddingTop,paddingBottom:e.paddingBottom,height:o,lineHeight:l,pixelRatio:r});if(E/tt>1)he=!0,Q=!0,h=1,se=1,ne=h/r;else{let ve=!1,kn=h+1;if(v==="fit"){let cn=Math.ceil((ce+E+ke)*se);_&&a&&T<=t.stableFitRemainingWidth?(ve=!0,kn=t.stableFitMaxMinimapScale):ve=cn>M}if(v==="fill"||ve){he=!0;let cn=h;se=Math.min(l*r,Math.max(1,Math.floor(1/we))),_&&a&&T<=t.stableFitRemainingWidth&&(kn=t.stableFitMaxMinimapScale),h=Math.min(kn,Math.max(1,Math.floor(se/O))),h>cn&&(V=Math.min(2,h/cn)),ne=h/r/V,M=Math.ceil(Math.max(ie,ce+E+ke)*se),_?(t.stableMinimapLayoutInput=e,t.stableFitRemainingWidth=T,t.stableFitMaxMinimapScale=h):(t.stableMinimapLayoutInput=null,t.stableFitRemainingWidth=0)}}}let X=Math.floor(m*ne),Ce=Math.min(X,Math.max(0,Math.floor((T-b-2)*ne/(c+ne)))+zM),Ze=Math.floor(r*Ce),oe=Ze/r;Ze=Math.floor(Ze*V);let $=p?1:2,de=f==="left"?0:n-Ce-b;return{renderMinimap:$,minimapLeft:de,minimapWidth:Ce,minimapHeightIsEditorHeight:he,minimapIsSampling:Q,minimapScale:h,minimapLineHeight:se,minimapCanvasInnerWidth:Ze,minimapCanvasInnerHeight:M,minimapCanvasOuterWidth:oe,minimapCanvasOuterHeight:U}}static computeLayout(e,t){let n=t.outerWidth|0,o=t.outerHeight|0,r=t.lineHeight|0,s=t.lineNumbersDigitCount|0,a=t.typicalHalfwidthCharacterWidth,l=t.maxDigitWidth,c=t.pixelRatio,u=t.viewLineCount,p=e.get(139),h=p==="inherit"?e.get(138):p,m=h==="inherit"?e.get(134):h,v=e.get(137),f=t.isDominatedByLongLines,b=e.get(58),E=e.get(69).renderType!==0,T=e.get(70),_=e.get(107),O=e.get(85),M=e.get(74),U=e.get(105),he=U.verticalScrollbarSize,Q=U.verticalHasArrows,se=U.arrowSize,ne=U.horizontalScrollbarSize,V=e.get(44),X=e.get(112)!=="never",Ce=e.get(67);V&&X&&(Ce+=16);let Ze=0;if(E){let Ui=Math.max(s,T);Ze=Math.round(Ui*l)}let oe=0;b&&(oe=r*t.glyphMarginDecorationLaneCount);let $=0,de=$+oe,ie=de+Ze,ce=ie+Ce,ke=n-oe-Ze-Ce,we=!1,tt=!1,Me=-1;h==="inherit"&&f?(we=!0,tt=!0):m==="on"||m==="bounded"?tt=!0:m==="wordWrapColumn"&&(Me=v);let ve=i._computeMinimapLayout({outerWidth:n,outerHeight:o,lineHeight:r,typicalHalfwidthCharacterWidth:a,pixelRatio:c,scrollBeyondLastLine:_,paddingTop:O.top,paddingBottom:O.bottom,minimap:M,verticalScrollbarWidth:he,viewLineCount:u,remainingWidth:ke,isViewportWrapping:tt},t.memory||new Ou);ve.renderMinimap!==0&&ve.minimapLeft===0&&($+=ve.minimapWidth,de+=ve.minimapWidth,ie+=ve.minimapWidth,ce+=ve.minimapWidth);let kn=ke-ve.minimapWidth,cn=Math.max(1,Math.floor((kn-he-2)/a)),no=Q?se:0;return tt&&(Me=Math.max(1,cn),m==="bounded"&&(Me=Math.min(Me,v))),{width:n,height:o,glyphMarginLeft:$,glyphMarginWidth:oe,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount,lineNumbersLeft:de,lineNumbersWidth:Ze,decorationsLeft:ie,decorationsWidth:Ce,contentLeft:ce,contentWidth:kn,minimap:ve,viewportColumn:cn,isWordWrapMinified:we,isViewportWrapping:tt,wrappingColumn:Me,verticalScrollbarWidth:he,horizontalScrollbarHeight:ne,overviewRuler:{top:no,width:he,height:o-2*no,right:0}}}},GI=class extends Je{constructor(){super(141,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[d("wrappingStrategy.simple","Assumes that all characters are of the same width. This is a fast algorithm that works correctly for monospace fonts and certain scripts (like Latin characters) where glyphs are of equal width."),d("wrappingStrategy.advanced","Delegates wrapping points computation to the browser. This is a slow algorithm, that might cause freezes for large files, but it works correctly in all cases.")],type:"string",enum:["simple","advanced"],default:"simple",description:d("wrappingStrategy","Controls the algorithm that computes wrapping points. Note that when in accessibility mode, advanced will be used for the best experience.")}})}validate(e){return vt(e,"simple",["simple","advanced"])}compute(e,t,n){return t.get(2)===2?"advanced":n}};var qI=class extends Je{constructor(){let e={enabled:"onCode"};super(66,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",tags:["experimental"],enum:["off","onCode","on"],default:e.enabled,enumDescriptions:[d("editor.lightbulb.enabled.off","Disable the code action menu."),d("editor.lightbulb.enabled.onCode","Show the code action menu when the cursor is on lines with code."),d("editor.lightbulb.enabled.on","Show the code action menu when the cursor is on lines with code or on empty lines.")],description:d("enabled","Enables the Code Action lightbulb in the editor.")}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:vt(e.enabled,this.defaultValue.enabled,["off","onCode","on"])}}},$I=class extends Je{constructor(){let e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(117,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:d("editor.stickyScroll.enabled","Shows the nested current scopes during the scroll at the top of the editor."),tags:["experimental"]},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:d("editor.stickyScroll.maxLineCount","Defines the maximum number of sticky lines to show.")},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:d("editor.stickyScroll.defaultModel","Defines the model to use for determining which lines to stick. If the outline model does not exist, it will fall back on the folding provider model which falls back on the indentation model. This order is respected in all three cases.")},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:d("editor.stickyScroll.scrollWithEditor","Enable scrolling of Sticky Scroll with the editor's horizontal scrollbar.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:ue(t.enabled,this.defaultValue.enabled),maxLineCount:Qe.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:vt(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:ue(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}},jI=class extends Je{constructor(){let e={enabled:"on",fontSize:0,fontFamily:"",padding:!1,maximumLength:43};super(143,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:d("inlayHints.enable","Enables the inlay hints in the editor."),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[d("editor.inlayHints.on","Inlay hints are enabled"),d("editor.inlayHints.onUnlessPressed","Inlay hints are showing by default and hide when holding {0}",Se?"Ctrl+Option":"Ctrl+Alt"),d("editor.inlayHints.offUnlessPressed","Inlay hints are hidden by default and show when holding {0}",Se?"Ctrl+Option":"Ctrl+Alt"),d("editor.inlayHints.off","Inlay hints are disabled")]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:d("inlayHints.fontSize","Controls font size of inlay hints in the editor. As default the {0} is used when the configured value is less than {1} or greater than the editor font size.","`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:d("inlayHints.fontFamily","Controls font family of inlay hints in the editor. When set to empty, the {0} is used.","`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:d("inlayHints.padding","Enables the padding around the inlay hints in the editor.")},"editor.inlayHints.maximumLength":{type:"number",default:e.maximumLength,markdownDescription:d("inlayHints.maximumLength","Maximum overall length of inlay hints, for a single line, before they get truncated by the editor. Set to `0` to never truncate")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:vt(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Qe.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:En.string(t.fontFamily,this.defaultValue.fontFamily),padding:ue(t.padding,this.defaultValue.padding),maximumLength:Qe.clampedInt(t.maximumLength,this.defaultValue.maximumLength,0,Number.MAX_SAFE_INTEGER)}}},YI=class extends Je{constructor(){super(67,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):Qe.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,n){return n<0?Qe.clampedInt(-n*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):n}},QI=class extends Yi{constructor(){super(68,"lineHeight",fo.lineHeight,e=>Yi.clamp(e,0,150),{markdownDescription:d("lineHeight",`Controls the line height. 
 - Use 0 to automatically compute the line height from the font size.
 - Values between 0 and 8 will be used as a multiplier with the font size.
 - Values greater than or equal to 8 will be used as effective values.`)})}compute(e,t,n){return e.fontInfo.lineHeight}},XI=class extends Je{constructor(){let e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(74,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:d("minimap.enabled","Controls whether the minimap is shown.")},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:d("minimap.autohide","Controls whether the minimap is hidden automatically.")},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[d("minimap.size.proportional","The minimap has the same size as the editor contents (and might scroll)."),d("minimap.size.fill","The minimap will stretch or shrink as necessary to fill the height of the editor (no scrolling)."),d("minimap.size.fit","The minimap will shrink as necessary to never be larger than the editor (no scrolling).")],default:e.size,description:d("minimap.size","Controls the size of the minimap.")},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:d("minimap.side","Controls the side where to render the minimap.")},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:d("minimap.showSlider","Controls when the minimap slider is shown.")},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:d("minimap.scale","Scale of content drawn in the minimap: 1, 2 or 3.")},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:d("minimap.renderCharacters","Render the actual characters on a line as opposed to color blocks.")},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:d("minimap.maxColumn","Limit the width of the minimap to render at most a certain number of columns.")},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:d("minimap.showRegionSectionHeaders","Controls whether named regions are shown as section headers in the minimap.")},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:d("minimap.showMarkSectionHeaders","Controls whether MARK: comments are shown as section headers in the minimap.")},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:d("minimap.sectionHeaderFontSize","Controls the font size of section headers in the minimap.")},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:d("minimap.sectionHeaderLetterSpacing","Controls the amount of space (in pixels) between characters of section header. This helps the readability of the header in small font sizes.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:ue(t.enabled,this.defaultValue.enabled),autohide:ue(t.autohide,this.defaultValue.autohide),size:vt(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:vt(t.side,this.defaultValue.side,["right","left"]),showSlider:vt(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:ue(t.renderCharacters,this.defaultValue.renderCharacters),scale:Qe.clampedInt(t.scale,1,1,3),maxColumn:Qe.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:ue(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:ue(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),sectionHeaderFontSize:Yi.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:Yi.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}};function $M(i){return i==="ctrlCmd"?Se?"metaKey":"ctrlKey":"altKey"}var JI=class extends Je{constructor(){super(85,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:d("padding.top","Controls the amount of space between the top edge of the editor and the first line.")},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:d("padding.bottom","Controls the amount of space between the bottom edge of the editor and the last line.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{top:Qe.clampedInt(t.top,0,0,1e3),bottom:Qe.clampedInt(t.bottom,0,0,1e3)}}},ZI=class extends Je{constructor(){let e={enabled:!0,cycle:!0};super(87,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:d("parameterHints.enabled","Enables a pop-up that shows parameter documentation and type information as you type.")},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:d("parameterHints.cycle","Controls whether the parameter hints menu cycles or closes when reaching the end of the list.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:ue(t.enabled,this.defaultValue.enabled),cycle:ue(t.cycle,this.defaultValue.cycle)}}},ex=class extends Wa{constructor(){super(145)}compute(e,t,n){return e.pixelRatio}},tx=class extends Je{constructor(){super(89,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}},nx=class extends Je{defaultValue;constructor(){let e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[d("on","Quick suggestions show inside the suggest widget"),d("inline","Quick suggestions show as ghost text"),d("off","Quick suggestions are disabled")]}];super(91,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:d("quickSuggestions.strings","Enable quick suggestions inside strings.")},comments:{anyOf:t,default:e.comments,description:d("quickSuggestions.comments","Enable quick suggestions inside comments.")},other:{anyOf:t,default:e.other,description:d("quickSuggestions.other","Enable quick suggestions outside of strings and comments.")}},default:e,markdownDescription:d("quickSuggestions","Controls whether suggestions should automatically show up while typing. This can be controlled for typing in comments, strings, and other code. Quick suggestion can be configured to show as ghost text or with the suggest widget. Also be aware of the {0}-setting which controls if suggestions are triggered by special characters.","`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){let c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;let{other:t,comments:n,strings:o}=e,r=["on","inline","off"],s,a,l;return typeof t=="boolean"?s=t?"on":"off":s=vt(t,this.defaultValue.other,r),typeof n=="boolean"?a=n?"on":"off":a=vt(n,this.defaultValue.comments,r),typeof o=="boolean"?l=o?"on":"off":l=vt(o,this.defaultValue.strings,r),{other:s,comments:a,strings:l}}};var ix=class extends Je{constructor(){super(69,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[d("lineNumbers.off","Line numbers are not rendered."),d("lineNumbers.on","Line numbers are rendered as absolute number."),d("lineNumbers.relative","Line numbers are rendered as distance in lines to cursor position."),d("lineNumbers.interval","Line numbers are rendered every 10 lines.")],default:"on",description:d("lineNumbers","Controls the display of line numbers.")})}validate(e){let t=this.defaultValue.renderType,n=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,n=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:n}}};var ox=class extends Je{constructor(){let e=[],t={type:"number",description:d("rulers.size","Number of monospace characters at which this editor ruler will render.")};super(104,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:d("rulers.color","Color of this editor ruler."),format:"color-hex"}}}]},default:e,description:d("rulers","Render vertical rulers after a certain number of monospace characters. Use multiple values for multiple rulers. No rulers are drawn if array is empty.")})}validate(e){if(Array.isArray(e)){let t=[];for(let n of e)if(typeof n=="number")t.push({column:Qe.clampedInt(n,0,0,1e4),color:null});else if(n&&typeof n=="object"){let o=n;t.push({column:Qe.clampedInt(o.column,0,0,1e4),color:o.color})}return t.sort((n,o)=>n.column-o.column),t}return this.defaultValue}},rx=class extends Je{constructor(){super(94,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}};function f1(i,e){if(typeof i!="string")return e;switch(i){case"hidden":return 2;case"visible":return 3;default:return 1}}var sx=class extends Je{constructor(){let e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(105,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[d("scrollbar.vertical.auto","The vertical scrollbar will be visible only when necessary."),d("scrollbar.vertical.visible","The vertical scrollbar will always be visible."),d("scrollbar.vertical.fit","The vertical scrollbar will always be hidden.")],default:"auto",description:d("scrollbar.vertical","Controls the visibility of the vertical scrollbar.")},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[d("scrollbar.horizontal.auto","The horizontal scrollbar will be visible only when necessary."),d("scrollbar.horizontal.visible","The horizontal scrollbar will always be visible."),d("scrollbar.horizontal.fit","The horizontal scrollbar will always be hidden.")],default:"auto",description:d("scrollbar.horizontal","Controls the visibility of the horizontal scrollbar.")},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:d("scrollbar.verticalScrollbarSize","The width of the vertical scrollbar.")},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:d("scrollbar.horizontalScrollbarSize","The height of the horizontal scrollbar.")},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:d("scrollbar.scrollByPage","Controls whether clicks scroll by page or jump to click position.")},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:d("scrollbar.ignoreHorizontalScrollbarInContentHeight","When set, the horizontal scrollbar will not increase the size of the editor's content.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e,n=Qe.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),o=Qe.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Qe.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:f1(t.vertical,this.defaultValue.vertical),horizontal:f1(t.horizontal,this.defaultValue.horizontal),useShadows:ue(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:ue(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:ue(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:ue(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:ue(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:n,horizontalSliderSize:Qe.clampedInt(t.horizontalSliderSize,n,0,1e3),verticalScrollbarSize:o,verticalSliderSize:Qe.clampedInt(t.verticalSliderSize,o,0,1e3),scrollByPage:ue(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:ue(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}},bo="inUntrustedWorkspace",Ba={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"},ax=class extends Je{constructor(){let e={nonBasicASCII:bo,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:bo,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(127,"unicodeHighlight",e,{[Ba.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,bo],default:e.nonBasicASCII,description:d("unicodeHighlight.nonBasicASCII","Controls whether all non-basic ASCII characters are highlighted. Only characters between U+0020 and U+007E, tab, line-feed and carriage-return are considered basic ASCII.")},[Ba.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:d("unicodeHighlight.invisibleCharacters","Controls whether characters that just reserve space or have no width at all are highlighted.")},[Ba.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:d("unicodeHighlight.ambiguousCharacters","Controls whether characters are highlighted that can be confused with basic ASCII characters, except those that are common in the current user locale.")},[Ba.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,bo],default:e.includeComments,description:d("unicodeHighlight.includeComments","Controls whether characters in comments should also be subject to Unicode highlighting.")},[Ba.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,bo],default:e.includeStrings,description:d("unicodeHighlight.includeStrings","Controls whether characters in strings should also be subject to Unicode highlighting.")},[Ba.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:d("unicodeHighlight.allowedCharacters","Defines allowed characters that are not being highlighted."),additionalProperties:{type:"boolean"}},[Ba.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:d("unicodeHighlight.allowedLocales","Unicode characters that are common in allowed locales are not being highlighted.")}})}applyUpdate(e,t){let n=!1;t.allowedCharacters&&e&&(Rn(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},n=!0)),t.allowedLocales&&e&&(Rn(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},n=!0));let o=super.applyUpdate(e,t);return n?new ld(o.newValue,!0):o}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{nonBasicASCII:dd(t.nonBasicASCII,bo,[!0,!1,bo]),invisibleCharacters:ue(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:ue(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:dd(t.includeComments,bo,[!0,!1,bo]),includeStrings:dd(t.includeStrings,bo,[!0,!1,bo]),allowedCharacters:this.validateBooleanMap(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.validateBooleanMap(e.allowedLocales,this.defaultValue.allowedLocales)}}validateBooleanMap(e,t){if(typeof e!="object"||!e)return t;let n={};for(let[o,r]of Object.entries(e))r===!0&&(n[o]=!0);return n}},lx=class extends Je{constructor(){let e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default",syntaxHighlightingEnabled:!1};super(63,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:d("inlineSuggest.enabled","Controls whether to automatically show inline suggestions in the editor.")},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[d("inlineSuggest.showToolbar.always","Show the inline suggestion toolbar whenever an inline suggestion is shown."),d("inlineSuggest.showToolbar.onHover","Show the inline suggestion toolbar when hovering over an inline suggestion."),d("inlineSuggest.showToolbar.never","Never show the inline suggestion toolbar.")],description:d("inlineSuggest.showToolbar","Controls when to show the inline suggestion toolbar.")},"editor.inlineSuggest.syntaxHighlightingEnabled":{type:"boolean",default:e.syntaxHighlightingEnabled,description:d("inlineSuggest.syntaxHighlightingEnabled","Controls whether to show syntax highlighting for inline suggestions in the editor.")},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:d("inlineSuggest.suppressSuggestions","Controls how inline suggestions interact with the suggest widget. If enabled, the suggest widget is not shown automatically when inline suggestions are available.")},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:d("inlineSuggest.fontFamily","Controls the font family of the inline suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:ue(t.enabled,this.defaultValue.enabled),mode:vt(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:vt(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:ue(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:ue(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:En.string(t.fontFamily,this.defaultValue.fontFamily),syntaxHighlightingEnabled:ue(t.syntaxHighlightingEnabled,this.defaultValue.syntaxHighlightingEnabled)}}},dx=class extends Je{constructor(){let e={enabled:!1,showToolbar:"onHover",fontFamily:"default",keepOnBlur:!1};super(64,"experimentalInlineEdit",e,{"editor.experimentalInlineEdit.enabled":{type:"boolean",default:e.enabled,description:d("inlineEdit.enabled","Controls whether to show inline edits in the editor.")},"editor.experimentalInlineEdit.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[d("inlineEdit.showToolbar.always","Show the inline edit toolbar whenever an inline suggestion is shown."),d("inlineEdit.showToolbar.onHover","Show the inline edit toolbar when hovering over an inline suggestion."),d("inlineEdit.showToolbar.never","Never show the inline edit toolbar.")],description:d("inlineEdit.showToolbar","Controls when to show the inline edit toolbar.")},"editor.experimentalInlineEdit.fontFamily":{type:"string",default:e.fontFamily,description:d("inlineEdit.fontFamily","Controls the font family of the inline edit.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:ue(t.enabled,this.defaultValue.enabled),showToolbar:vt(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),fontFamily:En.string(t.fontFamily,this.defaultValue.fontFamily),keepOnBlur:ue(t.keepOnBlur,this.defaultValue.keepOnBlur)}}},cx=class extends Je{constructor(){let e={enabled:Yo.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:Yo.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(15,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:d("bracketPairColorization.enabled","Controls whether bracket pair colorization is enabled or not. Use {0} to override the bracket highlight colors.","`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:d("bracketPairColorization.independentColorPoolPerBracketType","Controls whether each bracket type has its own independent color pool.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:ue(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:ue(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}},ux=class extends Je{constructor(){let e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(16,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[d("editor.guides.bracketPairs.true","Enables bracket pair guides."),d("editor.guides.bracketPairs.active","Enables bracket pair guides only for the active bracket pair."),d("editor.guides.bracketPairs.false","Disables bracket pair guides.")],default:e.bracketPairs,description:d("editor.guides.bracketPairs","Controls whether bracket pair guides are enabled or not.")},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[d("editor.guides.bracketPairsHorizontal.true","Enables horizontal guides as addition to vertical bracket pair guides."),d("editor.guides.bracketPairsHorizontal.active","Enables horizontal guides only for the active bracket pair."),d("editor.guides.bracketPairsHorizontal.false","Disables horizontal bracket pair guides.")],default:e.bracketPairsHorizontal,description:d("editor.guides.bracketPairsHorizontal","Controls whether horizontal bracket pair guides are enabled or not.")},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:d("editor.guides.highlightActiveBracketPair","Controls whether the editor should highlight the active bracket pair.")},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:d("editor.guides.indentation","Controls whether the editor should render indent guides.")},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[d("editor.guides.highlightActiveIndentation.true","Highlights the active indent guide."),d("editor.guides.highlightActiveIndentation.always","Highlights the active indent guide even if bracket guides are highlighted."),d("editor.guides.highlightActiveIndentation.false","Do not highlight the active indent guide.")],default:e.highlightActiveIndentation,description:d("editor.guides.highlightActiveIndentation","Controls whether the editor should highlight the active indent guide.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{bracketPairs:dd(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:dd(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:ue(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:ue(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:dd(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}};function dd(i,e,t){let n=t.indexOf(i);return n===-1?e:t[n]}var px=class extends Je{constructor(){let e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(120,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[d("suggest.insertMode.insert","Insert suggestion without overwriting text right of the cursor."),d("suggest.insertMode.replace","Insert suggestion and overwrite text right of the cursor.")],default:e.insertMode,description:d("suggest.insertMode","Controls whether words are overwritten when accepting completions. Note that this depends on extensions opting into this feature.")},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:d("suggest.filterGraceful","Controls whether filtering and sorting suggestions accounts for small typos.")},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:d("suggest.localityBonus","Controls whether sorting favors words that appear close to the cursor.")},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:d("suggest.shareSuggestSelections","Controls whether remembered suggestion selections are shared between multiple workspaces and windows (needs `#editor.suggestSelection#`).")},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[d("suggest.insertMode.always","Always select a suggestion when automatically triggering IntelliSense."),d("suggest.insertMode.never","Never select a suggestion when automatically triggering IntelliSense."),d("suggest.insertMode.whenTriggerCharacter","Select a suggestion only when triggering IntelliSense from a trigger character."),d("suggest.insertMode.whenQuickSuggestion","Select a suggestion only when triggering IntelliSense as you type.")],default:e.selectionMode,markdownDescription:d("suggest.selectionMode","Controls whether a suggestion is selected when the widget shows. Note that this only applies to automatically triggered suggestions ({0} and {1}) and that a suggestion is always selected when explicitly invoked, e.g via `Ctrl+Space`.","`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:d("suggest.snippetsPreventQuickSuggestions","Controls whether an active snippet prevents quick suggestions.")},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:d("suggest.showIcons","Controls whether to show or hide icons in suggestions.")},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:d("suggest.showStatusBar","Controls the visibility of the status bar at the bottom of the suggest widget.")},"editor.suggest.preview":{type:"boolean",default:e.preview,description:d("suggest.preview","Controls whether to preview the suggestion outcome in the editor.")},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:d("suggest.showInlineDetails","Controls whether suggest details show inline with the label or only in the details widget.")},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:d("suggest.maxVisibleSuggestions.dep","This setting is deprecated. The suggest widget can now be resized.")},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:d("deprecated","This setting is deprecated, please use separate settings like 'editor.suggest.showKeywords' or 'editor.suggest.showSnippets' instead.")},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showMethods","When enabled IntelliSense shows `method`-suggestions.")},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showFunctions","When enabled IntelliSense shows `function`-suggestions.")},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showConstructors","When enabled IntelliSense shows `constructor`-suggestions.")},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showDeprecated","When enabled IntelliSense shows `deprecated`-suggestions.")},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.matchOnWordStartOnly","When enabled IntelliSense filtering requires that the first character matches on a word start. For example, `c` on `Console` or `WebContext` but _not_ on `description`. When disabled IntelliSense will show more results but still sorts them by match quality.")},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showFields","When enabled IntelliSense shows `field`-suggestions.")},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showVariables","When enabled IntelliSense shows `variable`-suggestions.")},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showClasss","When enabled IntelliSense shows `class`-suggestions.")},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showStructs","When enabled IntelliSense shows `struct`-suggestions.")},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showInterfaces","When enabled IntelliSense shows `interface`-suggestions.")},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showModules","When enabled IntelliSense shows `module`-suggestions.")},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showPropertys","When enabled IntelliSense shows `property`-suggestions.")},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showEvents","When enabled IntelliSense shows `event`-suggestions.")},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showOperators","When enabled IntelliSense shows `operator`-suggestions.")},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showUnits","When enabled IntelliSense shows `unit`-suggestions.")},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showValues","When enabled IntelliSense shows `value`-suggestions.")},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showConstants","When enabled IntelliSense shows `constant`-suggestions.")},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showEnums","When enabled IntelliSense shows `enum`-suggestions.")},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showEnumMembers","When enabled IntelliSense shows `enumMember`-suggestions.")},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showKeywords","When enabled IntelliSense shows `keyword`-suggestions.")},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showTexts","When enabled IntelliSense shows `text`-suggestions.")},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showColors","When enabled IntelliSense shows `color`-suggestions.")},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showFiles","When enabled IntelliSense shows `file`-suggestions.")},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showReferences","When enabled IntelliSense shows `reference`-suggestions.")},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showCustomcolors","When enabled IntelliSense shows `customcolor`-suggestions.")},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showFolders","When enabled IntelliSense shows `folder`-suggestions.")},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showTypeParameters","When enabled IntelliSense shows `typeParameter`-suggestions.")},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showSnippets","When enabled IntelliSense shows `snippet`-suggestions.")},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showUsers","When enabled IntelliSense shows `user`-suggestions.")},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:d("editor.suggest.showIssues","When enabled IntelliSense shows `issues`-suggestions.")}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{insertMode:vt(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:ue(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:ue(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:ue(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:ue(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:vt(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:ue(t.showIcons,this.defaultValue.showIcons),showStatusBar:ue(t.showStatusBar,this.defaultValue.showStatusBar),preview:ue(t.preview,this.defaultValue.preview),previewMode:vt(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:ue(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:ue(t.showMethods,this.defaultValue.showMethods),showFunctions:ue(t.showFunctions,this.defaultValue.showFunctions),showConstructors:ue(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:ue(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:ue(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:ue(t.showFields,this.defaultValue.showFields),showVariables:ue(t.showVariables,this.defaultValue.showVariables),showClasses:ue(t.showClasses,this.defaultValue.showClasses),showStructs:ue(t.showStructs,this.defaultValue.showStructs),showInterfaces:ue(t.showInterfaces,this.defaultValue.showInterfaces),showModules:ue(t.showModules,this.defaultValue.showModules),showProperties:ue(t.showProperties,this.defaultValue.showProperties),showEvents:ue(t.showEvents,this.defaultValue.showEvents),showOperators:ue(t.showOperators,this.defaultValue.showOperators),showUnits:ue(t.showUnits,this.defaultValue.showUnits),showValues:ue(t.showValues,this.defaultValue.showValues),showConstants:ue(t.showConstants,this.defaultValue.showConstants),showEnums:ue(t.showEnums,this.defaultValue.showEnums),showEnumMembers:ue(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:ue(t.showKeywords,this.defaultValue.showKeywords),showWords:ue(t.showWords,this.defaultValue.showWords),showColors:ue(t.showColors,this.defaultValue.showColors),showFiles:ue(t.showFiles,this.defaultValue.showFiles),showReferences:ue(t.showReferences,this.defaultValue.showReferences),showFolders:ue(t.showFolders,this.defaultValue.showFolders),showTypeParameters:ue(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:ue(t.showSnippets,this.defaultValue.showSnippets),showUsers:ue(t.showUsers,this.defaultValue.showUsers),showIssues:ue(t.showIssues,this.defaultValue.showIssues)}}},hx=class extends Je{constructor(){super(115,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:d("selectLeadingAndTrailingWhitespace","Whether leading and trailing whitespace should always be selected."),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:d("selectSubwords","Whether subwords (like 'foo' in 'fooBar' or 'foo_bar') should be selected."),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:ue(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:ue(e.selectSubwords,this.defaultValue.selectSubwords)}}},gx=class extends Je{constructor(){let e=[];super(132,"wordSegmenterLocales",e,{anyOf:[{description:d("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"string"},{description:d("wordSegmenterLocales","Locales to be used for word segmentation when doing word related navigations or operations. Specify the BCP 47 language tag of the word you wish to recognize (e.g., ja, zh-CN, zh-Hant-TW, etc.)."),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){let t=[];for(let n of e)if(typeof n=="string")try{Intl.Segmenter.supportedLocalesOf(n).length>0&&t.push(n)}catch{}return t}return this.defaultValue}};var mx=class extends Je{constructor(){super(140,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[d("wrappingIndent.none","No indentation. Wrapped lines begin at column 1."),d("wrappingIndent.same","Wrapped lines get the same indentation as the parent."),d("wrappingIndent.indent","Wrapped lines get +1 indentation toward the parent."),d("wrappingIndent.deepIndent","Wrapped lines get +2 indentation toward the parent.")],description:d("wrappingIndent","Controls the indentation of wrapped lines."),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,n){return t.get(2)===2?0:n}},fx=class extends Wa{constructor(){super(148)}compute(e,t,n){let o=t.get(147);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:o.isWordWrapMinified,isViewportWrapping:o.isViewportWrapping,wrappingColumn:o.wrappingColumn}}},bx=class extends Je{constructor(){let e={enabled:!0,showDropSelector:"afterDrop"};super(36,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:d("dropIntoEditor.enabled","Controls whether you can drag and drop a file into a text editor by holding down the `Shift` key (instead of opening the file in an editor).")},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:d("dropIntoEditor.showDropSelector","Controls if a widget is shown when dropping files into the editor. This widget lets you control how the file is dropped."),enum:["afterDrop","never"],enumDescriptions:[d("dropIntoEditor.showDropSelector.afterDrop","Show the drop selector widget after a file is dropped into the editor."),d("dropIntoEditor.showDropSelector.never","Never show the drop selector widget. Instead the default drop provider is always used.")],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:ue(t.enabled,this.defaultValue.enabled),showDropSelector:vt(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}},vx=class extends Je{constructor(){let e={enabled:!0,showPasteSelector:"afterPaste"};super(86,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:d("pasteAs.enabled","Controls whether you can paste content in different ways.")},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:d("pasteAs.showPasteSelector","Controls if a widget is shown when pasting content in to the editor. This widget lets you control how the file is pasted."),enum:["afterPaste","never"],enumDescriptions:[d("pasteAs.showPasteSelector.afterPaste","Show the paste selector widget after content is pasted into the editor."),d("pasteAs.showPasteSelector.never","Never show the paste selector widget. Instead the default pasting behavior is always used.")],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;let t=e;return{enabled:ue(t.enabled,this.defaultValue.enabled),showPasteSelector:vt(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}},jM="Consolas, 'Courier New', monospace",YM="Menlo, Monaco, 'Courier New', monospace",QM="'Droid Sans Mono', 'monospace', monospace",fo={fontFamily:Se?YM:St?QM:jM,fontWeight:"normal",fontSize:Se?12:14,lineHeight:0,letterSpacing:0},cd=[];function F(i){return cd[i.id]=i,i}var ks={acceptSuggestionOnCommitCharacter:F(new De(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:d("acceptSuggestionOnCommitCharacter","Controls whether suggestions should be accepted on commit characters. For example, in JavaScript, the semi-colon (`;`) can be a commit character that accepts a suggestion and types that character.")})),acceptSuggestionOnEnter:F(new lt(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",d("acceptSuggestionOnEnterSmart","Only accept a suggestion with `Enter` when it makes a textual change."),""],markdownDescription:d("acceptSuggestionOnEnter","Controls whether suggestions should be accepted on `Enter`, in addition to `Tab`. Helps to avoid ambiguity between inserting new lines or accepting suggestions.")})),accessibilitySupport:F(new AI),accessibilityPageSize:F(new Qe(3,"accessibilityPageSize",10,1,1073741824,{description:d("accessibilityPageSize","Controls the number of lines in the editor that can be read out by a screen reader at once. When we detect a screen reader we automatically set the default to be 500. Warning: this has a performance implication for numbers larger than the default."),tags:["accessibility"]})),ariaLabel:F(new En(4,"ariaLabel",d("editorViewAccessibleLabel","Editor content"))),ariaRequired:F(new De(5,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:F(new De(8,"screenReaderAnnounceInlineSuggestion",!0,{description:d("screenReaderAnnounceInlineSuggestion","Control whether inline suggestions are announced by a screen reader."),tags:["accessibility"]})),autoClosingBrackets:F(new lt(6,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d("editor.autoClosingBrackets.languageDefined","Use language configurations to determine when to autoclose brackets."),d("editor.autoClosingBrackets.beforeWhitespace","Autoclose brackets only when the cursor is to the left of whitespace."),""],description:d("autoClosingBrackets","Controls whether the editor should automatically close brackets after the user adds an opening bracket.")})),autoClosingComments:F(new lt(7,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d("editor.autoClosingComments.languageDefined","Use language configurations to determine when to autoclose comments."),d("editor.autoClosingComments.beforeWhitespace","Autoclose comments only when the cursor is to the left of whitespace."),""],description:d("autoClosingComments","Controls whether the editor should automatically close comments after the user adds an opening comment.")})),autoClosingDelete:F(new lt(9,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",d("editor.autoClosingDelete.auto","Remove adjacent closing quotes or brackets only if they were automatically inserted."),""],description:d("autoClosingDelete","Controls whether the editor should remove adjacent closing quotes or brackets when deleting.")})),autoClosingOvertype:F(new lt(10,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",d("editor.autoClosingOvertype.auto","Type over closing quotes or brackets only if they were automatically inserted."),""],description:d("autoClosingOvertype","Controls whether the editor should type over closing quotes or brackets.")})),autoClosingQuotes:F(new lt(11,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d("editor.autoClosingQuotes.languageDefined","Use language configurations to determine when to autoclose quotes."),d("editor.autoClosingQuotes.beforeWhitespace","Autoclose quotes only when the cursor is to the left of whitespace."),""],description:d("autoClosingQuotes","Controls whether the editor should automatically close quotes after the user adds an opening quote.")})),autoIndent:F(new ad(12,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],KM,{enumDescriptions:[d("editor.autoIndent.none","The editor will not insert indentation automatically."),d("editor.autoIndent.keep","The editor will keep the current line's indentation."),d("editor.autoIndent.brackets","The editor will keep the current line's indentation and honor language defined brackets."),d("editor.autoIndent.advanced","The editor will keep the current line's indentation, honor language defined brackets and invoke special onEnterRules defined by languages."),d("editor.autoIndent.full","The editor will keep the current line's indentation, honor language defined brackets, invoke special onEnterRules defined by languages, and honor indentationRules defined by languages.")],description:d("autoIndent","Controls whether the editor should automatically adjust the indentation when users type, paste, move or indent lines.")})),automaticLayout:F(new De(13,"automaticLayout",!1)),autoSurround:F(new lt(14,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[d("editor.autoSurround.languageDefined","Use language configurations to determine when to automatically surround selections."),d("editor.autoSurround.quotes","Surround with quotes but not brackets."),d("editor.autoSurround.brackets","Surround with brackets but not quotes."),""],description:d("autoSurround","Controls whether the editor should automatically surround selections when typing quotes or brackets.")})),bracketPairColorization:F(new cx),bracketPairGuides:F(new ux),stickyTabStops:F(new De(118,"stickyTabStops",!1,{description:d("stickyTabStops","Emulate selection behavior of tab characters when using spaces for indentation. Selection will stick to tab stops.")})),codeLens:F(new De(17,"codeLens",!0,{description:d("codeLens","Controls whether the editor shows CodeLens.")})),codeLensFontFamily:F(new En(18,"codeLensFontFamily","",{description:d("codeLensFontFamily","Controls the font family for CodeLens.")})),codeLensFontSize:F(new Qe(19,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:d("codeLensFontSize","Controls the font size in pixels for CodeLens. When set to 0, 90% of `#editor.fontSize#` is used.")})),colorDecorators:F(new De(20,"colorDecorators",!0,{description:d("colorDecorators","Controls whether the editor should render the inline color decorators and color picker.")})),colorDecoratorActivatedOn:F(new lt(150,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[d("editor.colorDecoratorActivatedOn.clickAndHover","Make the color picker appear both on click and hover of the color decorator"),d("editor.colorDecoratorActivatedOn.hover","Make the color picker appear on hover of the color decorator"),d("editor.colorDecoratorActivatedOn.click","Make the color picker appear on click of the color decorator")],description:d("colorDecoratorActivatedOn","Controls the condition to make a color picker appear from a color decorator")})),colorDecoratorsLimit:F(new Qe(21,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:d("colorDecoratorsLimit","Controls the max number of color decorators that can be rendered in an editor at once.")})),columnSelection:F(new De(22,"columnSelection",!1,{description:d("columnSelection","Enable that the selection with the mouse and keys is doing column selection.")})),comments:F(new MI),contextmenu:F(new De(24,"contextmenu",!0)),copyWithSyntaxHighlighting:F(new De(25,"copyWithSyntaxHighlighting",!0,{description:d("copyWithSyntaxHighlighting","Controls whether syntax highlighting should be copied into the clipboard.")})),cursorBlinking:F(new ad(26,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],GM,{description:d("cursorBlinking","Control the cursor animation style.")})),cursorSmoothCaretAnimation:F(new lt(27,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[d("cursorSmoothCaretAnimation.off","Smooth caret animation is disabled."),d("cursorSmoothCaretAnimation.explicit","Smooth caret animation is enabled only when the user moves the cursor with an explicit gesture."),d("cursorSmoothCaretAnimation.on","Smooth caret animation is always enabled.")],description:d("cursorSmoothCaretAnimation","Controls whether the smooth caret animation should be enabled.")})),cursorStyle:F(new ad(28,"cursorStyle",1,"line",["line","block","underline","line-thin","block-outline","underline-thin"],qM,{description:d("cursorStyle","Controls the cursor style.")})),cursorSurroundingLines:F(new Qe(29,"cursorSurroundingLines",0,0,1073741824,{description:d("cursorSurroundingLines","Controls the minimal number of visible leading lines (minimum 0) and trailing lines (minimum 1) surrounding the cursor. Known as 'scrollOff' or 'scrollOffset' in some other editors.")})),cursorSurroundingLinesStyle:F(new lt(30,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[d("cursorSurroundingLinesStyle.default","`cursorSurroundingLines` is enforced only when triggered via the keyboard or API."),d("cursorSurroundingLinesStyle.all","`cursorSurroundingLines` is enforced always.")],markdownDescription:d("cursorSurroundingLinesStyle","Controls when `#editor.cursorSurroundingLines#` should be enforced.")})),cursorWidth:F(new Qe(31,"cursorWidth",0,0,1073741824,{markdownDescription:d("cursorWidth","Controls the width of the cursor when `#editor.cursorStyle#` is set to `line`.")})),disableLayerHinting:F(new De(32,"disableLayerHinting",!1)),disableMonospaceOptimizations:F(new De(33,"disableMonospaceOptimizations",!1)),domReadOnly:F(new De(34,"domReadOnly",!1)),dragAndDrop:F(new De(35,"dragAndDrop",!0,{description:d("dragAndDrop","Controls whether the editor should allow moving selections via drag and drop.")})),emptySelectionClipboard:F(new FI),dropIntoEditor:F(new bx),experimentalEditContextEnabled:F(new De(37,"experimentalEditContextEnabled",!1,{description:d("experimentalEditContextEnabled","Sets whether the new experimental edit context should be used instead of the text area.")})),stickyScroll:F(new $I),experimentalWhitespaceRendering:F(new lt(39,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[d("experimentalWhitespaceRendering.svg","Use a new rendering method with svgs."),d("experimentalWhitespaceRendering.font","Use a new rendering method with font characters."),d("experimentalWhitespaceRendering.off","Use the stable rendering method.")],description:d("experimentalWhitespaceRendering","Controls whether whitespace is rendered with a new, experimental method.")})),extraEditorClassName:F(new En(40,"extraEditorClassName","")),fastScrollSensitivity:F(new Yi(41,"fastScrollSensitivity",5,i=>i<=0?5:i,{markdownDescription:d("fastScrollSensitivity","Scrolling speed multiplier when pressing `Alt`.")})),find:F(new BI),fixedOverflowWidgets:F(new De(43,"fixedOverflowWidgets",!1)),folding:F(new De(44,"folding",!0,{description:d("folding","Controls whether the editor has code folding enabled.")})),foldingStrategy:F(new lt(45,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[d("foldingStrategy.auto","Use a language-specific folding strategy if available, else the indentation-based one."),d("foldingStrategy.indentation","Use the indentation-based folding strategy.")],description:d("foldingStrategy","Controls the strategy for computing folding ranges.")})),foldingHighlight:F(new De(46,"foldingHighlight",!0,{description:d("foldingHighlight","Controls whether the editor should highlight folded ranges.")})),foldingImportsByDefault:F(new De(47,"foldingImportsByDefault",!1,{description:d("foldingImportsByDefault","Controls whether the editor automatically collapses import ranges.")})),foldingMaximumRegions:F(new Qe(48,"foldingMaximumRegions",5e3,10,65e3,{description:d("foldingMaximumRegions","The maximum number of foldable regions. Increasing this value may result in the editor becoming less responsive when the current source has a large number of foldable regions.")})),unfoldOnClickAfterEndOfLine:F(new De(49,"unfoldOnClickAfterEndOfLine",!1,{description:d("unfoldOnClickAfterEndOfLine","Controls whether clicking on the empty content after a folded line will unfold the line.")})),fontFamily:F(new En(50,"fontFamily",fo.fontFamily,{description:d("fontFamily","Controls the font family.")})),fontInfo:F(new WI),fontLigatures2:F(new Au),fontSize:F(new UI),fontWeight:F(new VI),fontVariations:F(new od),formatOnPaste:F(new De(56,"formatOnPaste",!1,{description:d("formatOnPaste","Controls whether the editor should automatically format the pasted content. A formatter must be available and the formatter should be able to format a range in a document.")})),formatOnType:F(new De(57,"formatOnType",!1,{description:d("formatOnType","Controls whether the editor should automatically format the line after typing.")})),glyphMargin:F(new De(58,"glyphMargin",!0,{description:d("glyphMargin","Controls whether the editor should render the vertical glyph margin. Glyph margin is mostly used for debugging.")})),gotoLocation:F(new zI),hideCursorInOverviewRuler:F(new De(60,"hideCursorInOverviewRuler",!1,{description:d("hideCursorInOverviewRuler","Controls whether the cursor should be hidden in the overview ruler.")})),hover:F(new HI),inDiffEditor:F(new De(62,"inDiffEditor",!1)),letterSpacing:F(new Yi(65,"letterSpacing",fo.letterSpacing,i=>Yi.clamp(i,-5,20),{description:d("letterSpacing","Controls the letter spacing in pixels.")})),lightbulb:F(new qI),lineDecorationsWidth:F(new YI),lineHeight:F(new QI),lineNumbers:F(new ix),lineNumbersMinChars:F(new Qe(70,"lineNumbersMinChars",5,1,300)),linkedEditing:F(new De(71,"linkedEditing",!1,{description:d("linkedEditing","Controls whether the editor has linked editing enabled. Depending on the language, related symbols such as HTML tags, are updated while editing.")})),links:F(new De(72,"links",!0,{description:d("links","Controls whether the editor should detect links and make them clickable.")})),matchBrackets:F(new lt(73,"matchBrackets","always",["always","near","never"],{description:d("matchBrackets","Highlight matching brackets.")})),minimap:F(new XI),mouseStyle:F(new lt(75,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:F(new Yi(76,"mouseWheelScrollSensitivity",1,i=>i===0?1:i,{markdownDescription:d("mouseWheelScrollSensitivity","A multiplier to be used on the `deltaX` and `deltaY` of mouse wheel scroll events.")})),mouseWheelZoom:F(new De(77,"mouseWheelZoom",!1,{markdownDescription:Se?d("mouseWheelZoom.mac","Zoom the font of the editor when using mouse wheel and holding `Cmd`."):d("mouseWheelZoom","Zoom the font of the editor when using mouse wheel and holding `Ctrl`.")})),multiCursorMergeOverlapping:F(new De(78,"multiCursorMergeOverlapping",!0,{description:d("multiCursorMergeOverlapping","Merge multiple cursors when they are overlapping.")})),multiCursorModifier:F(new ad(79,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],$M,{markdownEnumDescriptions:[d("multiCursorModifier.ctrlCmd","Maps to `Control` on Windows and Linux and to `Command` on macOS."),d("multiCursorModifier.alt","Maps to `Alt` on Windows and Linux and to `Option` on macOS.")],markdownDescription:d({key:"multiCursorModifier",comment:["- `ctrlCmd` refers to a value the setting can take and should not be localized.","- `Control` and `Command` refer to the modifier keys Ctrl or Cmd on the keyboard and can be localized."]},"The modifier to be used to add multiple cursors with the mouse. The Go to Definition and Open Link mouse gestures will adapt such that they do not conflict with the [multicursor modifier](https://code.visualstudio.com/docs/editor/codebasics#_multicursor-modifier).")})),multiCursorPaste:F(new lt(80,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[d("multiCursorPaste.spread","Each cursor pastes a single line of the text."),d("multiCursorPaste.full","Each cursor pastes the full text.")],markdownDescription:d("multiCursorPaste","Controls pasting when the line count of the pasted text matches the cursor count.")})),multiCursorLimit:F(new Qe(81,"multiCursorLimit",1e4,1,1e5,{markdownDescription:d("multiCursorLimit","Controls the max number of cursors that can be in an active editor at once.")})),occurrencesHighlight:F(new lt(82,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[d("occurrencesHighlight.off","Does not highlight occurrences."),d("occurrencesHighlight.singleFile","Highlights occurrences only in the current file."),d("occurrencesHighlight.multiFile","Experimental: Highlights occurrences across all valid open files.")],markdownDescription:d("occurrencesHighlight","Controls whether occurrences should be highlighted across open files.")})),overviewRulerBorder:F(new De(83,"overviewRulerBorder",!0,{description:d("overviewRulerBorder","Controls whether a border should be drawn around the overview ruler.")})),overviewRulerLanes:F(new Qe(84,"overviewRulerLanes",3,0,3)),padding:F(new JI),pasteAs:F(new vx),parameterHints:F(new ZI),peekWidgetDefaultFocus:F(new lt(88,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[d("peekWidgetDefaultFocus.tree","Focus the tree when opening peek"),d("peekWidgetDefaultFocus.editor","Focus the editor when opening peek")],description:d("peekWidgetDefaultFocus","Controls whether to focus the inline editor or the tree in the peek widget.")})),placeholder:F(new tx),definitionLinkOpensInPeek:F(new De(90,"definitionLinkOpensInPeek",!1,{description:d("definitionLinkOpensInPeek","Controls whether the Go to Definition mouse gesture always opens the peek widget.")})),quickSuggestions:F(new nx),quickSuggestionsDelay:F(new Qe(92,"quickSuggestionsDelay",10,0,1073741824,{description:d("quickSuggestionsDelay","Controls the delay in milliseconds after which quick suggestions will show up.")})),readOnly:F(new De(93,"readOnly",!1)),readOnlyMessage:F(new rx),renameOnType:F(new De(95,"renameOnType",!1,{description:d("renameOnType","Controls whether the editor auto renames on type."),markdownDeprecationMessage:d("renameOnTypeDeprecate","Deprecated, use `editor.linkedEditing` instead.")})),renderControlCharacters:F(new De(96,"renderControlCharacters",!0,{description:d("renderControlCharacters","Controls whether the editor should render control characters."),restricted:!0})),renderFinalNewline:F(new lt(97,"renderFinalNewline",St?"dimmed":"on",["off","on","dimmed"],{description:d("renderFinalNewline","Render last line number when the file ends with a newline.")})),renderLineHighlight:F(new lt(98,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",d("renderLineHighlight.all","Highlights both the gutter and the current line.")],description:d("renderLineHighlight","Controls how the editor should render the current line highlight.")})),renderLineHighlightOnlyWhenFocus:F(new De(99,"renderLineHighlightOnlyWhenFocus",!1,{description:d("renderLineHighlightOnlyWhenFocus","Controls if the editor should render the current line highlight only when the editor is focused.")})),renderValidationDecorations:F(new lt(100,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:F(new lt(101,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",d("renderWhitespace.boundary","Render whitespace characters except for single spaces between words."),d("renderWhitespace.selection","Render whitespace characters only on selected text."),d("renderWhitespace.trailing","Render only trailing whitespace characters."),""],description:d("renderWhitespace","Controls how the editor should render whitespace characters.")})),revealHorizontalRightPadding:F(new Qe(102,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:F(new De(103,"roundedSelection",!0,{description:d("roundedSelection","Controls whether selections should have rounded corners.")})),rulers:F(new ox),scrollbar:F(new sx),scrollBeyondLastColumn:F(new Qe(106,"scrollBeyondLastColumn",4,0,1073741824,{description:d("scrollBeyondLastColumn","Controls the number of extra characters beyond which the editor will scroll horizontally.")})),scrollBeyondLastLine:F(new De(107,"scrollBeyondLastLine",!0,{description:d("scrollBeyondLastLine","Controls whether the editor will scroll beyond the last line.")})),scrollPredominantAxis:F(new De(108,"scrollPredominantAxis",!0,{description:d("scrollPredominantAxis","Scroll only along the predominant axis when scrolling both vertically and horizontally at the same time. Prevents horizontal drift when scrolling vertically on a trackpad.")})),selectionClipboard:F(new De(109,"selectionClipboard",!0,{description:d("selectionClipboard","Controls whether the Linux primary clipboard should be supported."),included:St})),selectionHighlight:F(new De(110,"selectionHighlight",!0,{description:d("selectionHighlight","Controls whether the editor should highlight matches similar to the selection.")})),selectOnLineNumbers:F(new De(111,"selectOnLineNumbers",!0)),showFoldingControls:F(new lt(112,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[d("showFoldingControls.always","Always show the folding controls."),d("showFoldingControls.never","Never show the folding controls and reduce the gutter size."),d("showFoldingControls.mouseover","Only show the folding controls when the mouse is over the gutter.")],description:d("showFoldingControls","Controls when the folding controls on the gutter are shown.")})),showUnused:F(new De(113,"showUnused",!0,{description:d("showUnused","Controls fading out of unused code.")})),showDeprecated:F(new De(142,"showDeprecated",!0,{description:d("showDeprecated","Controls strikethrough deprecated variables.")})),inlayHints:F(new jI),snippetSuggestions:F(new lt(114,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[d("snippetSuggestions.top","Show snippet suggestions on top of other suggestions."),d("snippetSuggestions.bottom","Show snippet suggestions below other suggestions."),d("snippetSuggestions.inline","Show snippets suggestions with other suggestions."),d("snippetSuggestions.none","Do not show snippet suggestions.")],description:d("snippetSuggestions","Controls whether snippets are shown with other suggestions and how they are sorted.")})),smartSelect:F(new hx),smoothScrolling:F(new De(116,"smoothScrolling",!1,{description:d("smoothScrolling","Controls whether the editor will scroll using an animation.")})),stopRenderingLineAfter:F(new Qe(119,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:F(new px),inlineSuggest:F(new lx),inlineEdit:F(new dx),inlineCompletionsAccessibilityVerbose:F(new De(151,"inlineCompletionsAccessibilityVerbose",!1,{description:d("inlineCompletionsAccessibilityVerbose","Controls whether the accessibility hint should be provided to screen reader users when an inline completion is shown.")})),suggestFontSize:F(new Qe(121,"suggestFontSize",0,0,1e3,{markdownDescription:d("suggestFontSize","Font size for the suggest widget. When set to {0}, the value of {1} is used.","`0`","`#editor.fontSize#`")})),suggestLineHeight:F(new Qe(122,"suggestLineHeight",0,0,1e3,{markdownDescription:d("suggestLineHeight","Line height for the suggest widget. When set to {0}, the value of {1} is used. The minimum value is 8.","`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:F(new De(123,"suggestOnTriggerCharacters",!0,{description:d("suggestOnTriggerCharacters","Controls whether suggestions should automatically show up when typing trigger characters.")})),suggestSelection:F(new lt(124,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[d("suggestSelection.first","Always select the first suggestion."),d("suggestSelection.recentlyUsed","Select recent suggestions unless further typing selects one, e.g. `console.| -> console.log` because `log` has been completed recently."),d("suggestSelection.recentlyUsedByPrefix","Select suggestions based on previous prefixes that have completed those suggestions, e.g. `co -> console` and `con -> const`.")],description:d("suggestSelection","Controls how suggestions are pre-selected when showing the suggest list.")})),tabCompletion:F(new lt(125,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[d("tabCompletion.on","Tab complete will insert the best matching suggestion when pressing tab."),d("tabCompletion.off","Disable tab completions."),d("tabCompletion.onlySnippets","Tab complete snippets when their prefix match. Works best when 'quickSuggestions' aren't enabled.")],description:d("tabCompletion","Enables tab completions.")})),tabIndex:F(new Qe(126,"tabIndex",0,-1,1073741824)),unicodeHighlight:F(new ax),unusualLineTerminators:F(new lt(128,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[d("unusualLineTerminators.auto","Unusual line terminators are automatically removed."),d("unusualLineTerminators.off","Unusual line terminators are ignored."),d("unusualLineTerminators.prompt","Unusual line terminators prompt to be removed.")],description:d("unusualLineTerminators","Remove unusual line terminators that might cause problems.")})),useShadowDOM:F(new De(129,"useShadowDOM",!0)),useTabStops:F(new De(130,"useTabStops",!0,{description:d("useTabStops","Spaces and tabs are inserted and deleted in alignment with tab stops.")})),wordBreak:F(new lt(131,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[d("wordBreak.normal","Use the default line break rule."),d("wordBreak.keepAll","Word breaks should not be used for Chinese/Japanese/Korean (CJK) text. Non-CJK text behavior is the same as for normal.")],description:d("wordBreak","Controls the word break rules used for Chinese/Japanese/Korean (CJK) text.")})),wordSegmenterLocales:F(new gx),wordSeparators:F(new En(133,"wordSeparators",gI,{description:d("wordSeparators","Characters that will be used as word separators when doing word related navigations or operations.")})),wordWrap:F(new lt(134,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[d("wordWrap.off","Lines will never wrap."),d("wordWrap.on","Lines will wrap at the viewport width."),d({key:"wordWrap.wordWrapColumn",comment:["- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at `#editor.wordWrapColumn#`."),d({key:"wordWrap.bounded",comment:["- viewport means the edge of the visible window size.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Lines will wrap at the minimum of viewport and `#editor.wordWrapColumn#`.")],description:d({key:"wordWrap",comment:["- 'off', 'on', 'wordWrapColumn' and 'bounded' refer to values the setting can take and should not be localized.","- `editor.wordWrapColumn` refers to a different setting and should not be localized."]},"Controls how lines should wrap.")})),wordWrapBreakAfterCharacters:F(new En(135,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:F(new En(136,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:F(new Qe(137,"wordWrapColumn",80,1,1073741824,{markdownDescription:d({key:"wordWrapColumn",comment:["- `editor.wordWrap` refers to a different setting and should not be localized.","- 'wordWrapColumn' and 'bounded' refer to values the different setting can take and should not be localized."]},"Controls the wrapping column of the editor when `#editor.wordWrap#` is `wordWrapColumn` or `bounded`.")})),wordWrapOverride1:F(new lt(138,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:F(new lt(139,"wordWrapOverride2","inherit",["off","on","inherit"])),editorClassName:F(new NI),defaultColorDecorators:F(new De(149,"defaultColorDecorators",!1,{markdownDescription:d("defaultColorDecorators","Controls whether inline color decorations should be shown using the default document color provider")})),pixelRatio:F(new ex),tabFocusMode:F(new De(146,"tabFocusMode",!1,{markdownDescription:d("tabFocusMode","Controls whether the editor receives tabs or defers them to the workbench for navigation.")})),layoutInfo:F(new KI),wrappingInfo:F(new fx),wrappingIndent:F(new mx),wrappingStrategy:F(new GI)};var fm=class i{_brackets;_regExpRules;constructor(e){e=e||{},e.brackets=e.brackets||[["(",")"],["{","}"],["[","]"]],this._brackets=[],e.brackets.forEach(t=>{let n=i._createOpenBracketRegExp(t[0]),o=i._createCloseBracketRegExp(t[1]);n&&o&&this._brackets.push({open:t[0],openRegExp:n,close:t[1],closeRegExp:o})}),this._regExpRules=e.onEnterRules||[]}onEnter(e,t,n,o){if(e>=3)for(let r=0,s=this._regExpRules.length;r<s;r++){let a=this._regExpRules[r];if([{reg:a.beforeText,text:n},{reg:a.afterText,text:o},{reg:a.previousLineText,text:t}].every(c=>c.reg?(c.reg.lastIndex=0,c.reg.test(c.text)):!0))return a.action}if(e>=2&&n.length>0&&o.length>0)for(let r=0,s=this._brackets.length;r<s;r++){let a=this._brackets[r];if(a.openRegExp.test(n)&&a.closeRegExp.test(o))return{indentAction:2}}if(e>=2&&n.length>0){for(let r=0,s=this._brackets.length;r<s;r++)if(this._brackets[r].openRegExp.test(n))return{indentAction:1}}return null}static _createOpenBracketRegExp(e){let t=pn(e);return/\B/.test(t.charAt(0))||(t="\\b"+t),t+="\\s*$",i._safeRegExp(t)}static _createCloseBracketRegExp(e){let t=pn(e);return/\B/.test(t.charAt(t.length-1))||(t=t+"\\b"),t="^\\s*"+t,i._safeRegExp(t)}static _safeRegExp(e){try{return new RegExp(e)}catch(t){return Ne(t),null}}};var XM=[];function zt(i,e,t){e instanceof yu||(e=new yu(e,[],!!t)),XM.push([i,e])}var JM={ModesRegistry:"editor.modesRegistry"},yx=class{_languages;_onDidChangeLanguages=new C;onDidChangeLanguages=this._onDidChangeLanguages.event;constructor(){this._languages=[]}registerLanguage(e){return this._languages.push(e),this._onDidChangeLanguages.fire(void 0),{dispose:()=>{for(let t=0,n=this._languages.length;t<n;t++)if(this._languages[t]===e){this._languages.splice(t,1);return}}}}getLanguages(){return this._languages}},b1=new yx;Ae.add(JM.ModesRegistry,b1);var Ni="plaintext",ZM=".txt";b1.registerLanguage({id:Ni,extensions:[ZM],aliases:[d("plainText.alias","Plain Text"),"text"],mimetypes:[go.text]});Ae.as(Mi.Configuration).registerDefaultConfigurations([{overrides:{"[plaintext]":{"editor.unicodeHighlight.ambiguousCharacters":!1,"editor.unicodeHighlight.invisibleCharacters":!1}}}]);var Nu=class{constructor(e){this.languageId=e}affects(e){return this.languageId?this.languageId===e:!0}},Fu=P("languageConfigurationService"),Mu=class extends A{constructor(t,n){super();this.configurationService=t;this.languageService=n;let o=new Set(Object.values(Ix));this._register(this.configurationService.onDidChangeConfiguration(r=>{let s=r.change.keys.some(l=>o.has(l)),a=r.change.overrides.filter(([l,c])=>c.some(u=>o.has(u))).map(([l])=>l);if(s)this.configurations.clear(),this.onDidChangeEmitter.fire(new Nu(void 0));else for(let l of a)this.languageService.isRegisteredLanguageId(l)&&(this.configurations.delete(l),this.onDidChangeEmitter.fire(new Nu(l)))})),this._register(this._registry.onDidChange(r=>{this.configurations.delete(r.languageId),this.onDidChangeEmitter.fire(new Nu(r.languageId))}))}_serviceBrand;_registry=this._register(new Sx);onDidChangeEmitter=this._register(new C);onDidChange=this.onDidChangeEmitter.event;configurations=new Map;register(t,n,o){return this._registry.register(t,n,o)}getLanguageConfiguration(t){let n=this.configurations.get(t);return n||(n=eN(t,this._registry,this.configurationService,this.languageService),this.configurations.set(t,n)),n}};Mu=L([w(0,$e),w(1,Pt)],Mu);function eN(i,e,t,n){let o=e.getLanguageConfiguration(i);if(!o){if(!n.isRegisteredLanguageId(i))return new ud(i,{});o=new ud(i,{})}let r=tN(o.languageId,t),s=y1([o.underlyingConfig,r]);return new ud(o.languageId,s)}var Ix={brackets:"editor.language.brackets",colorizedBracketPairs:"editor.language.colorizedBracketPairs"};function tN(i,e){let t=e.getValue(Ix.brackets,{overrideIdentifier:i}),n=e.getValue(Ix.colorizedBracketPairs,{overrideIdentifier:i});return{brackets:v1(t),colorizedBracketPairs:v1(n)}}function v1(i){if(Array.isArray(i))return i.map(e=>{if(!(!Array.isArray(e)||e.length!==2))return[e[0],e[1]]}).filter(e=>!!e)}var xx=class{constructor(e){this.languageId=e;this._entries=[],this._order=0,this._resolved=null}_entries;_order;_resolved=null;register(e,t){let n=new bm(e,t,++this._order);return this._entries.push(n),this._resolved=null,le(()=>{for(let o=0;o<this._entries.length;o++)if(this._entries[o]===n){this._entries.splice(o,1),this._resolved=null;break}})}getResolvedConfiguration(){if(!this._resolved){let e=this._resolve();e&&(this._resolved=new ud(this.languageId,e))}return this._resolved}_resolve(){return this._entries.length===0?null:(this._entries.sort(bm.cmp),y1(this._entries.map(e=>e.configuration)))}};function y1(i){let e={comments:void 0,brackets:void 0,wordPattern:void 0,indentationRules:void 0,onEnterRules:void 0,autoClosingPairs:void 0,surroundingPairs:void 0,autoCloseBefore:void 0,folding:void 0,colorizedBracketPairs:void 0,__electricCharacterSupport:void 0};for(let t of i)e={comments:t.comments||e.comments,brackets:t.brackets||e.brackets,wordPattern:t.wordPattern||e.wordPattern,indentationRules:t.indentationRules||e.indentationRules,onEnterRules:t.onEnterRules||e.onEnterRules,autoClosingPairs:t.autoClosingPairs||e.autoClosingPairs,surroundingPairs:t.surroundingPairs||e.surroundingPairs,autoCloseBefore:t.autoCloseBefore||e.autoCloseBefore,folding:t.folding||e.folding,colorizedBracketPairs:t.colorizedBracketPairs||e.colorizedBracketPairs,__electricCharacterSupport:t.__electricCharacterSupport||e.__electricCharacterSupport};return e}var bm=class{constructor(e,t,n){this.configuration=e;this.priority=t;this.order=n}static cmp(e,t){return e.priority===t.priority?e.order-t.order:e.priority-t.priority}},vm=class{constructor(e){this.languageId=e}},Sx=class extends A{_entries=new Map;_onDidChange=this._register(new C);onDidChange=this._onDidChange.event;constructor(){super(),this._register(this.register(Ni,{brackets:[["(",")"],["[","]"],["{","}"]],surroundingPairs:[{open:"{",close:"}"},{open:"[",close:"]"},{open:"(",close:")"},{open:"<",close:">"},{open:'"',close:'"'},{open:"'",close:"'"},{open:"`",close:"`"}],colorizedBracketPairs:[],folding:{offSide:!0}},0))}register(e,t,n=0){let o=this._entries.get(e);o||(o=new xx(e),this._entries.set(e,o));let r=o.register(t,n);return this._onDidChange.fire(new vm(e)),le(()=>{r.dispose(),this._onDidChange.fire(new vm(e))})}getLanguageConfiguration(e){return this._entries.get(e)?.getResolvedConfiguration()||null}},ud=class i{constructor(e,t){this.languageId=e;this.underlyingConfig=t;this._brackets=null,this._electricCharacter=null,this._onEnterSupport=this.underlyingConfig.brackets||this.underlyingConfig.indentationRules||this.underlyingConfig.onEnterRules?new fm(this.underlyingConfig):null,this.comments=i._handleComments(this.underlyingConfig),this.characterPair=new jg(this.underlyingConfig),this.wordDefinition=this.underlyingConfig.wordPattern||mI,this.indentationRules=this.underlyingConfig.indentationRules,this.underlyingConfig.indentationRules?this.indentRulesSupport=new Xg(this.underlyingConfig.indentationRules):this.indentRulesSupport=null,this.foldingRules=this.underlyingConfig.folding||{},this.bracketsNew=new Kg(e,this.underlyingConfig)}_brackets;_electricCharacter;_onEnterSupport;comments;characterPair;wordDefinition;indentRulesSupport;indentationRules;foldingRules;bracketsNew;getWordDefinition(){return fu(this.wordDefinition)}get brackets(){return!this._brackets&&this.underlyingConfig.brackets&&(this._brackets=new zg(this.languageId,this.underlyingConfig.brackets)),this._brackets}get electricCharacter(){return this._electricCharacter||(this._electricCharacter=new Yg(this.brackets)),this._electricCharacter}onEnter(e,t,n,o){return this._onEnterSupport?this._onEnterSupport.onEnter(e,t,n,o):null}getAutoClosingPairs(){return new Vg(this.characterPair.getAutoClosingPairs())}getAutoCloseBeforeSet(e){return this.characterPair.getAutoCloseBeforeSet(e)}getSurroundingPairs(){return this.characterPair.getSurroundingPairs()}static _handleComments(e){let t=e.comments;if(!t)return null;let n={};if(t.lineComment&&(n.lineCommentToken=t.lineComment),t.blockComment){let[o,r]=t.blockComment;n.blockCommentStartToken=o,n.blockCommentEndToken=r}return n}};zt(Fu,Mu,1);var Ex=class i{constructor(e){this.map=e}static createFromLanguage(e,t){function n(r){return t.getKey(`${r.languageId}:::${r.bracketText}`)}let o=new Map;for(let r of e.bracketsNew.openingBrackets){let s=pt(0,r.bracketText.length),a=n(r),l=fn.getEmpty().add(a,CI);o.set(r.bracketText,new vo(s,1,a,l,Bu.create(s,r,l)))}for(let r of e.bracketsNew.closingBrackets){let s=pt(0,r.bracketText.length),a=fn.getEmpty(),l=r.getOpeningBrackets();for(let c of l)a=a.add(n(c),CI);o.set(r.bracketText,new vo(s,2,n(l[0]),a,Bu.create(s,r,a)))}return new i(o)}hasRegExp=!1;_regExpGlobal=null;getRegExpStr(){if(this.isEmpty)return null;{let e=[...this.map.keys()];return e.sort(),e.reverse(),e.map(t=>nN(t)).join("|")}}get regExpGlobal(){if(!this.hasRegExp){let e=this.getRegExpStr();this._regExpGlobal=e?new RegExp(e,"gi"):null,this.hasRegExp=!0}return this._regExpGlobal}getToken(e){return this.map.get(e.toLowerCase())}findClosingTokenText(e){for(let[t,n]of this.map)if(n.kind===2&&n.bracketIds.intersects(e))return t}get isEmpty(){return this.map.size===0}};function nN(i){let e=pn(i);return/^[\w ]+/.test(i)&&(e=`\\b${e}`),/[\w ]+$/.test(i)&&(e=`${e}\\b`),e}var ym=class{constructor(e,t){this.denseKeyProvider=e;this.getLanguageConfiguration=t}languageIdToBracketTokens=new Map;didLanguageChange(e){return this.languageIdToBracketTokens.has(e)}getSingleLanguageBracketTokens(e){let t=this.languageIdToBracketTokens.get(e);return t||(t=Ex.createFromLanguage(this.getLanguageConfiguration(e),this.denseKeyProvider),this.languageIdToBracketTokens.set(e,t)),t}getToken(e,t){return this.getSingleLanguageBracketTokens(t).getToken(e)}};var vo=class{constructor(e,t,n,o,r){this.length=e;this.kind=t;this.bracketId=n;this.bracketIds=o;this.astNode=r}},Im=class{constructor(e,t){this.textModel=e;this.bracketTokens=t;this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}textBufferLineCount;textBufferLastLineLength;reader=new Cx(this.textModel,this.bracketTokens);_offset=Zt;get offset(){return this._offset}get length(){return pt(this.textBufferLineCount-1,this.textBufferLastLineLength)}getText(){return this.textModel.getValue()}skip(e){this.didPeek=!1,this._offset=at(this._offset,e);let t=Pn(this._offset);this.reader.setPosition(t.lineCount,t.columnCount)}didPeek=!1;peeked=null;read(){let e;return this.peeked?(this.didPeek=!1,e=this.peeked):e=this.reader.read(),e&&(this._offset=at(this._offset,e.length)),e}peek(){return this.didPeek||(this.peeked=this.reader.read(),this.didPeek=!0),this.peeked}},Cx=class{constructor(e,t){this.textModel=e;this.bracketTokens=t;this.textBufferLineCount=e.getLineCount(),this.textBufferLastLineLength=e.getLineLength(this.textBufferLineCount)}textBufferLineCount;textBufferLastLineLength;lineIdx=0;line=null;lineCharOffset=0;lineTokens=null;lineTokenOffset=0;setPosition(e,t){e===this.lineIdx?(this.lineCharOffset=t,this.line!==null&&(this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset))):(this.lineIdx=e,this.lineCharOffset=t,this.line=null),this.peekedToken=null}peekedToken=null;read(){if(this.peekedToken){let r=this.peekedToken;return this.peekedToken=null,this.lineCharOffset+=r.length,r}if(this.lineIdx>this.textBufferLineCount-1||this.lineIdx===this.textBufferLineCount-1&&this.lineCharOffset>=this.textBufferLastLineLength)return null;this.line===null&&(this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.line=this.lineTokens.getLineContent(),this.lineTokenOffset=this.lineCharOffset===0?0:this.lineTokens.findTokenIndexAtOffset(this.lineCharOffset));let e=this.lineIdx,t=this.lineCharOffset,n=0;for(;;){let r=this.lineTokens,s=r.getCount(),a=null;if(this.lineTokenOffset<s){let l=r.getMetadata(this.lineTokenOffset);for(;this.lineTokenOffset+1<s&&l===r.getMetadata(this.lineTokenOffset+1);)this.lineTokenOffset++;let c=vi.getTokenType(l)===0,u=vi.containsBalancedBrackets(l),p=r.getEndOffset(this.lineTokenOffset);if(u&&c&&this.lineCharOffset<p){let h=r.getLanguageId(this.lineTokenOffset),m=this.line.substring(this.lineCharOffset,p),v=this.bracketTokens.getSingleLanguageBracketTokens(h),f=v.regExpGlobal;if(f){f.lastIndex=0;let b=f.exec(m);b&&(a=v.getToken(b[0]),a&&(this.lineCharOffset+=b.index))}}if(n+=p-this.lineCharOffset,a)if(e!==this.lineIdx||t!==this.lineCharOffset){this.peekedToken=a;break}else return this.lineCharOffset+=a.length,a;else this.lineTokenOffset++,this.lineCharOffset=p}else if(this.lineIdx===this.textBufferLineCount-1||(this.lineIdx++,this.lineTokens=this.textModel.tokenization.getLineTokens(this.lineIdx+1),this.lineTokenOffset=0,this.line=this.lineTokens.getLineContent(),this.lineCharOffset=0,n+=33,n>1e3))break;if(n>1500)break}let o=n1(e,t,this.lineIdx,this.lineCharOffset);return new vo(o,0,-1,fn.getEmpty(),new yo(o))}},xm=class{constructor(e,t){this.text=e;let n=t.getRegExpStr(),o=n?new RegExp(n+`|
`,"gi"):null,r=[],s,a=0,l=0,c=0,u=0,p=[];for(let v=0;v<60;v++)p.push(new vo(pt(0,v),0,-1,fn.getEmpty(),new yo(pt(0,v))));let h=[];for(let v=0;v<60;v++)h.push(new vo(pt(1,v),0,-1,fn.getEmpty(),new yo(pt(1,v))));if(o)for(o.lastIndex=0;(s=o.exec(e))!==null;){let v=s.index,f=s[0];if(f===`
`)a++,l=v+1;else{if(c!==v){let b;if(u===a){let E=v-c;if(E<p.length)b=p[E];else{let T=pt(0,E);b=new vo(T,0,-1,fn.getEmpty(),new yo(T))}}else{let E=a-u,T=v-l;if(E===1&&T<h.length)b=h[T];else{let _=pt(E,T);b=new vo(_,0,-1,fn.getEmpty(),new yo(_))}}r.push(b)}r.push(t.getToken(f)),c=v+f.length,u=a}}let m=e.length;if(c!==m){let v=u===a?pt(0,m-c):pt(a-u,m-l);r.push(new vo(v,0,-1,fn.getEmpty(),new yo(v)))}this.length=pt(a,m-l),this.tokens=r}_offset=Zt;tokens;idx=0;get offset(){return this._offset}length;read(){return this.tokens[this.idx++]||null}peek(){return this.tokens[this.idx]||null}skip(e){throw new Yp}getText(){return this.text}};var Wu=class{_length;get length(){return this._length}constructor(e){this._length=e}},Uu=class i extends Wu{constructor(t,n,o,r,s){super(t);this.openingBracket=n;this.child=o;this.closingBracket=r;this.missingOpeningBracketIds=s}static create(t,n,o){let r=t.length;return n&&(r=at(r,n.length)),o&&(r=at(r,o.length)),new i(r,t,n,o,n?n.missingOpeningBracketIds:fn.getEmpty())}get kind(){return 2}get listHeight(){return 0}get childrenLength(){return 3}getChild(t){switch(t){case 0:return this.openingBracket;case 1:return this.child;case 2:return this.closingBracket}throw new Error("Invalid child index")}get children(){let t=[];return t.push(this.openingBracket),this.child&&t.push(this.child),this.closingBracket&&t.push(this.closingBracket),t}canBeReused(t){return!(this.closingBracket===null||t.intersects(this.missingOpeningBracketIds))}flattenLists(){return i.create(this.openingBracket.flattenLists(),this.child&&this.child.flattenLists(),this.closingBracket&&this.closingBracket.flattenLists())}deepClone(){return new i(this.length,this.openingBracket.deepClone(),this.child&&this.child.deepClone(),this.closingBracket&&this.closingBracket.deepClone(),this.missingOpeningBracketIds)}computeMinIndentation(t,n){return this.child?this.child.computeMinIndentation(at(t,this.openingBracket.length),n):Number.MAX_SAFE_INTEGER}},xi=class i extends Wu{constructor(t,n,o){super(t);this.listHeight=n;this._missingOpeningBracketIds=o}static create23(t,n,o,r=!1){let s=t.length,a=t.missingOpeningBracketIds;if(t.listHeight!==n.listHeight)throw new Error("Invalid list heights");if(s=at(s,n.length),a=a.merge(n.missingOpeningBracketIds),o){if(t.listHeight!==o.listHeight)throw new Error("Invalid list heights");s=at(s,o.length),a=a.merge(o.missingOpeningBracketIds)}return r?new wx(s,t.listHeight+1,t,n,o,a):new Vu(s,t.listHeight+1,t,n,o,a)}static create(t,n=!1){if(t.length===0)return this.getEmpty();{let o=t[0].length,r=t[0].missingOpeningBracketIds;for(let s=1;s<t.length;s++)o=at(o,t[s].length),r=r.merge(t[s].missingOpeningBracketIds);return n?new Sm(o,t[0].listHeight+1,t,r):new zu(o,t[0].listHeight+1,t,r)}}static getEmpty(){return new Sm(Zt,0,[],fn.getEmpty())}get kind(){return 4}get missingOpeningBracketIds(){return this._missingOpeningBracketIds}cachedMinIndentation=-1;throwIfImmutable(){}makeLastElementMutable(){this.throwIfImmutable();let t=this.childrenLength;if(t===0)return;let n=this.getChild(t-1),o=n.kind===4?n.toMutable():n;return n!==o&&this.setChild(t-1,o),o}makeFirstElementMutable(){if(this.throwIfImmutable(),this.childrenLength===0)return;let n=this.getChild(0),o=n.kind===4?n.toMutable():n;return n!==o&&this.setChild(0,o),o}canBeReused(t){if(t.intersects(this.missingOpeningBracketIds)||this.childrenLength===0)return!1;let n=this;for(;n.kind===4;){let o=n.childrenLength;if(o===0)throw new Ge;n=n.getChild(o-1)}return n.canBeReused(t)}handleChildrenChanged(){this.throwIfImmutable();let t=this.childrenLength,n=this.getChild(0).length,o=this.getChild(0).missingOpeningBracketIds;for(let r=1;r<t;r++){let s=this.getChild(r);n=at(n,s.length),o=o.merge(s.missingOpeningBracketIds)}this._length=n,this._missingOpeningBracketIds=o,this.cachedMinIndentation=-1}flattenLists(){let t=[];for(let n of this.children){let o=n.flattenLists();o.kind===4?t.push(...o.children):t.push(o)}return i.create(t)}computeMinIndentation(t,n){if(this.cachedMinIndentation!==-1)return this.cachedMinIndentation;let o=Number.MAX_SAFE_INTEGER,r=t;for(let s=0;s<this.childrenLength;s++){let a=this.getChild(s);a&&(o=Math.min(o,a.computeMinIndentation(r,n)),r=at(r,a.length))}return this.cachedMinIndentation=o,o}},Vu=class i extends xi{constructor(t,n,o,r,s,a){super(t,n,a);this._item1=o;this._item2=r;this._item3=s}get childrenLength(){return this._item3!==null?3:2}getChild(t){switch(t){case 0:return this._item1;case 1:return this._item2;case 2:return this._item3}throw new Error("Invalid child index")}setChild(t,n){switch(t){case 0:this._item1=n;return;case 1:this._item2=n;return;case 2:this._item3=n;return}throw new Error("Invalid child index")}get children(){return this._item3?[this._item1,this._item2,this._item3]:[this._item1,this._item2]}get item1(){return this._item1}get item2(){return this._item2}get item3(){return this._item3}deepClone(){return new i(this.length,this.listHeight,this._item1.deepClone(),this._item2.deepClone(),this._item3?this._item3.deepClone():null,this.missingOpeningBracketIds)}appendChildOfSameHeight(t){if(this._item3)throw new Error("Cannot append to a full (2,3) tree node");this.throwIfImmutable(),this._item3=t,this.handleChildrenChanged()}unappendChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();let t=this._item3;return this._item3=null,this.handleChildrenChanged(),t}prependChildOfSameHeight(t){if(this._item3)throw new Error("Cannot prepend to a full (2,3) tree node");this.throwIfImmutable(),this._item3=this._item2,this._item2=this._item1,this._item1=t,this.handleChildrenChanged()}unprependChild(){if(!this._item3)throw new Error("Cannot remove from a non-full (2,3) tree node");this.throwIfImmutable();let t=this._item1;return this._item1=this._item2,this._item2=this._item3,this._item3=null,this.handleChildrenChanged(),t}toMutable(){return this}},wx=class extends Vu{toMutable(){return new Vu(this.length,this.listHeight,this.item1,this.item2,this.item3,this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}},zu=class i extends xi{constructor(t,n,o,r){super(t,n,r);this._children=o}get childrenLength(){return this._children.length}getChild(t){return this._children[t]}setChild(t,n){this._children[t]=n}get children(){return this._children}deepClone(){let t=new Array(this._children.length);for(let n=0;n<this._children.length;n++)t[n]=this._children[n].deepClone();return new i(this.length,this.listHeight,t,this.missingOpeningBracketIds)}appendChildOfSameHeight(t){this.throwIfImmutable(),this._children.push(t),this.handleChildrenChanged()}unappendChild(){this.throwIfImmutable();let t=this._children.pop();return this.handleChildrenChanged(),t}prependChildOfSameHeight(t){this.throwIfImmutable(),this._children.unshift(t),this.handleChildrenChanged()}unprependChild(){this.throwIfImmutable();let t=this._children.shift();return this.handleChildrenChanged(),t}toMutable(){return this}},Sm=class extends zu{toMutable(){return new zu(this.length,this.listHeight,[...this.children],this.missingOpeningBracketIds)}throwIfImmutable(){throw new Error("this instance is immutable")}},oN=[],Hu=class extends Wu{get listHeight(){return 0}get childrenLength(){return 0}getChild(e){return null}get children(){return oN}flattenLists(){return this}deepClone(){return this}},yo=class extends Hu{get kind(){return 0}get missingOpeningBracketIds(){return fn.getEmpty()}canBeReused(e){return!0}computeMinIndentation(e,t){let n=Pn(e),o=(n.columnCount===0?n.lineCount:n.lineCount+1)+1,r=i1(at(e,this.length))+1,s=Number.MAX_SAFE_INTEGER;for(let a=o;a<=r;a++){let l=t.getLineFirstNonWhitespaceColumn(a),c=t.getLineContent(a);if(l===0)continue;let u=Br.visibleColumnFromColumn(c,l,t.getOptions().tabSize);s=Math.min(s,u)}return s}},Bu=class i extends Hu{constructor(t,n,o){super(t);this.bracketInfo=n;this.bracketIds=o}static create(t,n,o){return new i(t,n,o)}get kind(){return 1}get missingOpeningBracketIds(){return fn.getEmpty()}get text(){return this.bracketInfo.bracketText}get languageId(){return this.bracketInfo.languageId}canBeReused(t){return!1}computeMinIndentation(t,n){return Number.MAX_SAFE_INTEGER}},Em=class extends Hu{get kind(){return 3}missingOpeningBracketIds;constructor(e,t){super(t),this.missingOpeningBracketIds=e}canBeReused(e){return!e.intersects(this.missingOpeningBracketIds)}computeMinIndentation(e,t){return Number.MAX_SAFE_INTEGER}};var Ku=class{constructor(e,t,n,o){this.range=e;this.nestingLevel=t;this.nestingLevelOfEqualBracketType=n;this.isInvalid=o}},Tx=class{constructor(e,t,n,o,r,s){this.range=e;this.openingBracketRange=t;this.closingBracketRange=n;this.nestingLevel=o;this.nestingLevelOfEqualBracketType=r;this.bracketPairNode=s}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}get closingBracketInfo(){return this.bracketPairNode.closingBracket?.bracketInfo}},Cm=class extends Tx{constructor(t,n,o,r,s,a,l){super(t,n,o,r,s,a);this.minVisibleColumnIndentation=l}};var wm=class{changeType=1},Gu=class i{constructor(e,t,n,o,r){this.ownerId=e;this.lineNumber=t;this.column=n;this.options=o;this.order=r}static applyInjectedText(e,t){if(!t||t.length===0)return e;let n="",o=0;for(let r of t)n+=e.substring(o,r.column-1),o=r.column-1,n+=r.options.content;return n+=e.substring(o),n}static fromDecorations(e){let t=[];for(let n of e)n.options.before&&n.options.before.content.length>0&&t.push(new i(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new i(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort((n,o)=>n.lineNumber===o.lineNumber?n.column===o.column?n.order-o.order:n.column-o.column:n.lineNumber-o.lineNumber),t}withText(e){return new i(this.ownerId,this.lineNumber,this.column,{...this.options,content:e},this.order)}},qu=class{changeType=2;lineNumber;detail;injectedText;constructor(e,t,n){this.lineNumber=e,this.detail=t,this.injectedText=n}},Tm=class{changeType=3;fromLineNumber;toLineNumber;constructor(e,t){this.fromLineNumber=e,this.toLineNumber=t}},km=class{changeType=4;fromLineNumber;toLineNumber;detail;injectedTexts;constructor(e,t,n,o){this.injectedTexts=o,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}},Dm=class{changeType=5},Ua=class i{changes;versionId;isUndoing;isRedoing;resultingSelection;constructor(e,t,n,o){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=o,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++)if(this.changes[t].changeType===e)return!0;return!1}static merge(e,t){let n=[].concat(e.changes).concat(t.changes),o=t.versionId,r=e.isUndoing||t.isUndoing,s=e.isRedoing||t.isRedoing;return new i(n,o,r,s)}},_m=class{changes;constructor(e){this.changes=e}},Lm=class i{constructor(e,t){this.rawContentChangedEvent=e;this.contentChangedEvent=t}merge(e){let t=Ua.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=i._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new i(t,n)}static _mergeChangeEvents(e,t){let n=[].concat(e.changes).concat(t.changes),o=t.eol,r=t.versionId,s=e.isUndoing||t.isUndoing,a=e.isRedoing||t.isRedoing,l=e.isFlush||t.isFlush,c=e.isEolChange&&t.isEolChange;return{changes:n,eol:o,isEolChange:c,versionId:r,isUndoing:s,isRedoing:a,isFlush:l}}};var Va=class{constructor(e,t,n,o,r,s){this.visibleColumn=e;this.column=t;this.className=n;this.horizontalLine=o;this.forWrappedLinesAfterColumn=r;this.forWrappedLinesBeforeOrAtColumn=s;if(e!==-1==(t!==-1))throw new Error}},pd=class{constructor(e,t){this.top=e;this.endColumn=t}};var Rm=class i{constructor(e){this.edits=e;let t=-1;for(let n of e){if(!(n.replaceRange.start>=t))throw new Ge(`Edits must be disjoint and sorted. Found ${n} after ${t}`);t=n.replaceRange.endExclusive}}static empty=new i([]);static fromJson(e){return new i(e.map(Io.fromJson))}static replace(e,t){return new i([new Io(e,t)])}static insert(e,t){return i.replace(ut.emptyAt(e),t)}normalize(){let e=[],t;for(let n of this.edits)n.newText.length===0&&n.replaceRange.length===0||(t&&t.replaceRange.endExclusive===n.replaceRange.start?t=new Io(t.replaceRange.join(n.replaceRange),t.newText+n.newText):(t&&e.push(t),t=n));return t&&e.push(t),new i(e)}toString(){return`[${this.edits.map(t=>t.toString()).join(", ")}]`}apply(e){let t=[],n=0;for(let o of this.edits)t.push(e.substring(n,o.replaceRange.start)),t.push(o.newText),n=o.replaceRange.endExclusive;return t.push(e.substring(n)),t.join("")}compose(e){return rN(this,e)}inverse(e){let t=[],n=0;for(let o of this.edits)t.push(new Io(ut.ofStartAndLength(o.replaceRange.start+n,o.newText.length),e.substring(o.replaceRange.start,o.replaceRange.endExclusive))),n+=o.newText.length-o.replaceRange.length;return new i(t)}getNewTextRanges(){let e=[],t=0;for(let n of this.edits)e.push(ut.ofStartAndLength(n.replaceRange.start+t,n.newText.length)),t+=n.newText.length-n.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let t=[],n=0,o=0,r=0;for(;o<this.edits.length||n<e.edits.length;){let s=e.edits[n],a=this.edits[o];if(a)s?a.replaceRange.intersects(s.replaceRange)?o++:a.replaceRange.start<s.replaceRange.start?(t.push(new Io(a.replaceRange.delta(r),a.newText)),o++):(n++,r+=s.newText.length-s.replaceRange.length):(t.push(new Io(a.replaceRange.delta(r),a.newText)),o++);else break}return new i(t)}applyToOffset(e){let t=0;for(let n of this.edits)if(n.replaceRange.start<=e){if(e<n.replaceRange.endExclusive)return n.replaceRange.start+t;t+=n.newText.length-n.replaceRange.length}else break;return e+t}applyToOffsetRange(e){return new ut(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyInverseToOffset(e){let t=0;for(let n of this.edits){let o=n.newText.length;if(n.replaceRange.start<=e-t){if(e-t<n.replaceRange.start+o)return n.replaceRange.start;t+=o-n.replaceRange.length}else break}return e-t}},Io=class i{constructor(e,t){this.replaceRange=e;this.newText=t}static fromJson(e){return new i(ut.ofStartAndLength(e.pos,e.len),e.txt)}static insert(e,t){return new i(ut.emptyAt(e),t)}toString(){return`${this.replaceRange} -> "${this.newText}"`}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function rN(i,e){if(i=i.normalize(),e=e.normalize(),i.isEmpty)return e;if(e.isEmpty)return i;let t=[...i.edits],n=[],o=0;for(let r of e.edits){for(;;){let c=t[0];if(!c||c.replaceRange.start+o+c.newText.length>=r.replaceRange.start)break;t.shift(),n.push(c),o+=c.newText.length-c.replaceRange.length}let s=o,a,l;for(;;){let c=t[0];if(!c||c.replaceRange.start+o>r.replaceRange.endExclusive)break;a||(a=c),l=c,t.shift(),o+=c.newText.length-c.replaceRange.length}if(!a)n.push(new Io(r.replaceRange.delta(-o),r.newText));else{let c="",u=r.replaceRange.start-(a.replaceRange.start+s);u>0&&(c=a.newText.slice(0,u));let p=l.replaceRange.endExclusive+o-r.replaceRange.endExclusive;if(p>0){let v=new Io(ut.ofStartAndLength(l.replaceRange.endExclusive,0),l.newText.slice(-p));t.unshift(v),o-=v.newText.length-v.replaceRange.length}let h=c+r.newText,m=new ut(Math.min(a.replaceRange.start,r.replaceRange.start-s),r.replaceRange.endExclusive-o);n.push(new Io(m,h))}}for(;;){let r=t.shift();if(!r)break;n.push(r)}return new Rm(n).normalize()}function ni(i){let e=0,t=0,n=0,o=0;for(let r=0,s=i.length;r<s;r++){let a=i.charCodeAt(r);a===13?(e===0&&(t=r),e++,r+1<s&&i.charCodeAt(r+1)===10?(o|=2,r++):o|=3,n=r+1):a===10&&(o|=1,e===0&&(t=r),e++,n=r+1)}return e===0&&(t=i.length),[e,t,i.length-n,o]}var Pm=P("undoRedoService");var I1=class i{static _ID=0;id;order;constructor(){this.id=i._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}static None=new i},x1=class i{static _ID=0;id;order;constructor(){this.id=i._ID++,this.order=1}nextOrder(){return this.id===0?0:this.order++}static None=new i};var hd=class{_textModelResolvedOptionsBrand=void 0;tabSize;indentSize;_indentSizeIsTabSize;insertSpaces;defaultEOL;trimAutoWhitespace;bracketPairColorizationOptions;get originalIndentSize(){return this._indentSizeIsTabSize?"tabSize":this.indentSize}constructor(e){this.tabSize=Math.max(1,e.tabSize|0),e.indentSize==="tabSize"?(this.indentSize=this.tabSize,this._indentSizeIsTabSize=!0):(this.indentSize=Math.max(1,e.indentSize|0),this._indentSizeIsTabSize=!1),this.insertSpaces=!!e.insertSpaces,this.defaultEOL=e.defaultEOL|0,this.trimAutoWhitespace=!!e.trimAutoWhitespace,this.bracketPairColorizationOptions=e.bracketPairColorizationOptions}equals(e){return this.tabSize===e.tabSize&&this._indentSizeIsTabSize===e._indentSizeIsTabSize&&this.indentSize===e.indentSize&&this.insertSpaces===e.insertSpaces&&this.defaultEOL===e.defaultEOL&&this.trimAutoWhitespace===e.trimAutoWhitespace&&Rn(this.bracketPairColorizationOptions,e.bracketPairColorizationOptions)}createChangeEvent(e){return{tabSize:this.tabSize!==e.tabSize,indentSize:this.indentSize!==e.indentSize,insertSpaces:this.insertSpaces!==e.insertSpaces,trimAutoWhitespace:this.trimAutoWhitespace!==e.trimAutoWhitespace}}},Ps=class{_findMatchBrand=void 0;range;matches;constructor(e,t){this.range=e,this.matches=t}};function S1(i){return i&&typeof i.read=="function"}var gd=class{constructor(e,t,n,o,r,s){this.identifier=e;this.range=t;this.text=n;this.forceMoveMarkers=o;this.isAutoWhitespaceEdit=r;this._isTracked=s}},Om=class{regex;wordSeparators;simpleSearch;constructor(e,t,n){this.regex=e,this.wordSeparators=t,this.simpleSearch=n}},Am=class{constructor(e,t,n){this.reverseEdits=e;this.changes=t;this.trimAutoWhitespaceLineNumbers=n}};var $u=class{_tokenizationSupports=new Map;_factories=new Map;_onDidChange=new C;onDidChange=this._onDidChange.event;_colorMap;constructor(){this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),le(()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))})}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){this._factories.get(e)?.dispose();let n=new kx(this,e,t);return this._factories.set(e,n),le(()=>{let o=this._factories.get(e);!o||o!==n||(this._factories.delete(e),o.dispose())})}async getOrCreate(e){let t=this.get(e);if(t)return t;let n=this._factories.get(e);return!n||n.isResolved?null:(await n.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;let n=this._factories.get(e);return!!(!n||n.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}},kx=class extends A{constructor(t,n,o){super();this._registry=t;this._languageId=n;this._factory=o}_isDisposed=!1;_resolvePromise=null;_isResolved=!1;get isResolved(){return this._isResolved}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){let t=await this._factory.tokenizationSupport;this._isResolved=!0,t&&!this._isDisposed&&this._register(this._registry.register(this._languageId,t))}};var Zo=new Uint32Array(0).buffer,an=class i{static deleteBeginning(e,t){return e===null||e===Zo?e:i.delete(e,0,t)}static deleteEnding(e,t){if(e===null||e===Zo)return e;let n=er(e),o=n[n.length-2];return i.delete(e,t,o)}static delete(e,t,n){if(e===null||e===Zo||t===n)return e;let o=er(e),r=o.length>>>1;if(t===0&&o[o.length-2]===n)return Zo;let s=Jt.findIndexInTokensArray(o,t),a=s>0?o[s-1<<1]:0,l=o[s<<1];if(n<l){let m=n-t;for(let v=s;v<r;v++)o[v<<1]-=m;return e}let c,u;a!==t?(o[s<<1]=t,c=s+1<<1,u=t):(c=s<<1,u=a);let p=n-t;for(let m=s+1;m<r;m++){let v=o[m<<1]-p;v>u&&(o[c++]=v,o[c++]=o[(m<<1)+1],u=v)}if(c===o.length)return e;let h=new Uint32Array(c);return h.set(o.subarray(0,c),0),h.buffer}static append(e,t){if(t===Zo)return e;if(e===Zo)return t;if(e===null)return e;if(t===null)return null;let n=er(e),o=er(t),r=o.length>>>1,s=new Uint32Array(n.length+o.length);s.set(n,0);let a=n.length,l=n[n.length-2];for(let c=0;c<r;c++)s[a++]=o[c<<1]+l,s[a++]=o[(c<<1)+1];return s.buffer}static insert(e,t,n){if(e===null||e===Zo)return e;let o=er(e),r=o.length>>>1,s=Jt.findIndexInTokensArray(o,t);s>0&&o[s-1<<1]===t&&s--;for(let a=s;a<r;a++)o[a<<1]+=n;return e}};function er(i){return i instanceof Uint32Array?i:new Uint32Array(i)}var Mn=class i{static fromRange(e){return new i(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new i(e.startLineNumber,e.endLineNumber+1)}static subtract(e,t){return t?e.startLineNumber<t.startLineNumber&&t.endLineNumberExclusive<e.endLineNumberExclusive?[new i(e.startLineNumber,t.startLineNumber),new i(t.endLineNumberExclusive,e.endLineNumberExclusive)]:t.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=t.endLineNumberExclusive?[]:t.endLineNumberExclusive<e.endLineNumberExclusive?[new i(Math.max(t.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new i(e.startLineNumber,Math.min(t.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let t=new Mm(e[0].slice());for(let n=1;n<e.length;n++)t=t.getUnion(new Mm(e[n].slice()));return t.ranges}static join(e){if(e.length===0)throw new Ge("lineRanges cannot be empty");let t=e[0].startLineNumber,n=e[0].endLineNumberExclusive;for(let o=1;o<e.length;o++)t=Math.min(t,e[o].startLineNumber),n=Math.max(n,e[o].endLineNumberExclusive);return new i(t,n)}static ofLength(e,t){return new i(e,e+t)}static deserialize(e){return new i(e[0],e[1])}startLineNumber;endLineNumberExclusive;constructor(e,t){if(e>t)throw new Ge(`startLineNumber ${e} cannot be after endLineNumberExclusive ${t}`);this.startLineNumber=e,this.endLineNumberExclusive=t}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new i(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new i(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new i(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let t=Math.max(this.startLineNumber,e.startLineNumber),n=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(t<=n)return new i(t,n)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new te(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new te(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let t=[];for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)t.push(e(n));return t}forEach(e){for(let t=this.startLineNumber;t<this.endLineNumberExclusive;t++)e(t)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new ut(this.startLineNumber-1,this.endLineNumberExclusive-1)}},Mm=class i{constructor(e=[]){this._normalizedRanges=e}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let t=jp(this._normalizedRanges,o=>o.endLineNumberExclusive>=e.startLineNumber),n=vc(this._normalizedRanges,o=>o.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)this._normalizedRanges.splice(t,0,e);else if(t===n-1){let o=this._normalizedRanges[t];this._normalizedRanges[t]=o.join(e)}else{let o=this._normalizedRanges[t].join(this._normalizedRanges[n-1]).join(e);this._normalizedRanges.splice(t,n-t,o)}}contains(e){let t=Vb(this._normalizedRanges,n=>n.startLineNumber<=e);return!!t&&t.endLineNumberExclusive>e}intersects(e){let t=Vb(this._normalizedRanges,n=>n.startLineNumber<e.endLineNumberExclusive);return!!t&&t.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let t=[],n=0,o=0,r=null;for(;n<this._normalizedRanges.length||o<e._normalizedRanges.length;){let s=null;if(n<this._normalizedRanges.length&&o<e._normalizedRanges.length){let a=this._normalizedRanges[n],l=e._normalizedRanges[o];a.startLineNumber<l.startLineNumber?(s=a,n++):(s=l,o++)}else n<this._normalizedRanges.length?(s=this._normalizedRanges[n],n++):(s=e._normalizedRanges[o],o++);r===null?r=s:r.endLineNumberExclusive>=s.startLineNumber?r=new Mn(r.startLineNumber,Math.max(r.endLineNumberExclusive,s.endLineNumberExclusive)):(t.push(r),r=s)}return r!==null&&t.push(r),new i(t)}subtractFrom(e){let t=jp(this._normalizedRanges,s=>s.endLineNumberExclusive>=e.startLineNumber),n=vc(this._normalizedRanges,s=>s.startLineNumber<=e.endLineNumberExclusive)+1;if(t===n)return new i([e]);let o=[],r=e.startLineNumber;for(let s=t;s<n;s++){let a=this._normalizedRanges[s];a.startLineNumber>r&&o.push(new Mn(r,a.startLineNumber)),r=a.endLineNumberExclusive}return r<e.endLineNumberExclusive&&o.push(new Mn(r,e.endLineNumberExclusive)),new i(o)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let t=[],n=0,o=0;for(;n<this._normalizedRanges.length&&o<e._normalizedRanges.length;){let r=this._normalizedRanges[n],s=e._normalizedRanges[o],a=r.intersect(s);a&&!a.isEmpty&&t.push(a),r.endLineNumberExclusive<s.endLineNumberExclusive?n++:o++}return new i(t)}getWithDelta(e){return new i(this._normalizedRanges.map(t=>t.delta(e)))}};var ju=class i{static deserialize(e,t,n){let o=new Uint32Array(e.buffer),r=rn(e,t);t+=4;let s=rn(e,t);t+=4;let a=[];for(let l=0;l<s;l++){let c=rn(e,t);t+=4,a.push(o.subarray(t/4,t/4+c/4)),t+=c}return n.push(new i(r,a)),t}_startLineNumber;_tokens;get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineRange(){return new Mn(this._startLineNumber,this._startLineNumber+this._tokens.length)}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}serializeSize(){let e=0;e+=4,e+=4;for(let t=0;t<this._tokens.length;t++){let n=this._tokens[t];if(!(n instanceof Uint32Array))throw new Error("Not supported!");e+=4,e+=n.byteLength}return e}serialize(e,t){sn(e,this._startLineNumber,t),t+=4,sn(e,this._tokens.length,t),t+=4;for(let n=0;n<this._tokens.length;n++){let o=this._tokens[n];if(!(o instanceof Uint32Array))throw new Error("Not supported!");sn(e,o.byteLength,t),t+=4,e.set(new Uint8Array(o.buffer),t),t+=o.byteLength}return t}applyEdit(e,t){let[n,o]=ni(t);this._acceptDeleteRange(e),this._acceptInsertText(new Ue(e.startLineNumber,e.startColumn),n,o)}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;let t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){let o=n-t;this._startLineNumber-=o;return}if(!(t>=this._tokens.length)){if(t<0&&n>=this._tokens.length){this._startLineNumber=0,this._tokens=[];return}if(t===n){this._tokens[t]=an.delete(this._tokens[t],e.startColumn-1,e.endColumn-1);return}if(t>=0)if(this._tokens[t]=an.deleteEnding(this._tokens[t],e.startColumn-1),n<this._tokens.length){let o=an.deleteBeginning(this._tokens[n],e.endColumn-1);this._tokens[t]=an.append(this._tokens[t],o),this._tokens.splice(t+1,n-t)}else this._tokens[t]=an.append(this._tokens[t],null),this._tokens=this._tokens.slice(0,t+1);else{let o=-t;this._startLineNumber-=o,this._tokens[n]=an.deleteBeginning(this._tokens[n],e.endColumn-1),this._tokens=this._tokens.slice(n)}}}_acceptInsertText(e,t,n){if(t===0&&n===0)return;let o=e.lineNumber-this._startLineNumber;if(o<0){this._startLineNumber+=t;return}if(!(o>=this._tokens.length)){if(t===0){this._tokens[o]=an.insert(this._tokens[o],e.column-1,n);return}this._tokens[o]=an.deleteEnding(this._tokens[o],e.column-1),this._tokens[o]=an.insert(this._tokens[o],e.column-1,n),this._insertLines(e.lineNumber,t)}}_insertLines(e,t){if(t===0)return;let n=[];for(let o=0;o<t;o++)n[o]=null;this._tokens=Jr(this._tokens,e,n)}};var Nm=(o=>(o[o.Ignore=0]="Ignore",o[o.Info=1]="Info",o[o.Warning=2]="Warning",o[o.Error=3]="Error",o))(Nm||{});(a=>{let i="error",e="warning",t="warn",n="info",o="ignore";function r(l){return l?Li(i,l)?3:Li(e,l)||Li(t,l)?2:Li(n,l)?1:0:0}a.fromValue=r;function s(l){switch(l){case 3:return i;case 2:return e;case 1:return n;default:return o}}a.toString=s})(Nm||={});var ln=Nm;var Qi=Object.freeze({View:Xe("view","View"),Help:Xe("help","Help"),Test:Xe("test","Test"),File:Xe("file","File"),Preferences:Xe("preferences","Preferences"),Developer:Xe({key:"developer",comment:["A developer on Code itself or someone diagnosing issues in Code"]},"Developer")});var qn=P("commandService"),yt=new class{_commands=new Map;_onDidRegisterCommand=new C;onDidRegisterCommand=this._onDidRegisterCommand.event;registerCommand(i,e){if(!i)throw new Error("invalid command");if(typeof i=="string"){if(!e)throw new Error("invalid command");return this.registerCommand({id:i,handler:e})}if(i.metadata&&Array.isArray(i.metadata.args)){let s=[];for(let l of i.metadata.args)s.push(l.constraint);let a=i.handler;i.handler=function(l,...c){return Kw(c,s),a(l,...c)}}let{id:t}=i,n=this._commands.get(t);n||(n=new In,this._commands.set(t,n));let o=n.unshift(i),r=le(()=>{o(),this._commands.get(t)?.isEmpty()&&this._commands.delete(t)});return this._onDidRegisterCommand.fire(t),r}registerCommandAlias(i,e){return yt.registerCommand(i,(t,...n)=>t.get(qn).executeCommand(e,...n))}getCommand(i){let e=this._commands.get(i);if(!(!e||e.isEmpty()))return ro.first(e)}getCommands(){let i=new Map;for(let e of this._commands.keys()){let t=this.getCommand(e);t&&i.set(e,t)}return i}};yt.registerCommand("noop",()=>{});var C1=["AI","Azure","Chat","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"];var Fi=class{value;_lower;constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(typeof e>"u"||e===null)return typeof t>"u"||t===null;if(typeof t>"u"||t===null)return!1;if(typeof e=="string"||typeof t=="string"){let n=typeof e=="string"?e:e.value,o=typeof t=="string"?t:t.value;return Li(n,o)}return e._lower===t._lower}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}},Yu=class{_set=new Set;get size(){return this._set.size}constructor(e){if(e)for(let t of e)this.add(t)}add(e){this._set.add(Fi.toKey(e))}delete(e){return this._set.delete(Fi.toKey(e))}has(e){return this._set.has(Fi.toKey(e))}};var Soe=P("IBuiltinExtensionsScannerService");var Qu=(o=>(o[o.Hint=1]="Hint",o[o.Info=2]="Info",o[o.Warning=4]="Warning",o[o.Error=8]="Error",o))(Qu||{});(r=>{function i(s,a){return a-s}r.compare=i;let e=Object.create(null);e[8]=d("sev.error","Error"),e[4]=d("sev.warning","Warning"),e[2]=d("sev.info","Info");function t(s){return e[s]||""}r.toString=t;function n(s){switch(s){case ln.Error:return 8;case ln.Warning:return 4;case ln.Info:return 2;case ln.Ignore:return 1}}r.fromSeverity=n;function o(s){switch(s){case 8:return ln.Error;case 4:return ln.Warning;case 2:return ln.Info;case 1:return ln.Ignore}}r.toSeverity=o})(Qu||={});var aN;(n=>{let i="";function e(o){return t(o,!0)}n.makeKey=e;function t(o,r){let s=[i];return o.source?s.push(o.source.replace("\xA6","\\\xA6")):s.push(i),o.code?typeof o.code=="string"?s.push(o.code.replace("\xA6","\\\xA6")):s.push(o.code.value.replace("\xA6","\\\xA6")):s.push(i),o.severity!==void 0&&o.severity!==null?s.push(Qu.toString(o.severity)):s.push(i),o.message&&r?s.push(o.message.replace("\xA6","\\\xA6")):s.push(i),o.startLineNumber!==void 0&&o.startLineNumber!==null?s.push(o.startLineNumber.toString()):s.push(i),o.startColumn!==void 0&&o.startColumn!==null?s.push(o.startColumn.toString()):s.push(i),o.endLineNumber!==void 0&&o.endLineNumber!==null?s.push(o.endLineNumber.toString()):s.push(i),o.endColumn!==void 0&&o.endColumn!==null?s.push(o.endColumn.toString()):s.push(i),s.push(i),s.join("\xA6")}n.makeKeyOptionalMessage=t})(aN||={});var w1=P("markerService");var Fm=class{constructor(e,t){this.tokens=e;this.endState=t}_encodedTokenizationResultBrand=void 0};var lN;(o=>{let i=new Map;i.set(0,j.symbolMethod),i.set(1,j.symbolFunction),i.set(2,j.symbolConstructor),i.set(3,j.symbolField),i.set(4,j.symbolVariable),i.set(5,j.symbolClass),i.set(6,j.symbolStruct),i.set(7,j.symbolInterface),i.set(8,j.symbolModule),i.set(9,j.symbolProperty),i.set(10,j.symbolEvent),i.set(11,j.symbolOperator),i.set(12,j.symbolUnit),i.set(13,j.symbolValue),i.set(15,j.symbolEnum),i.set(14,j.symbolConstant),i.set(15,j.symbolEnum),i.set(16,j.symbolEnumMember),i.set(17,j.symbolKeyword),i.set(27,j.symbolSnippet),i.set(18,j.symbolText),i.set(19,j.symbolColor),i.set(20,j.symbolFile),i.set(21,j.symbolReference),i.set(22,j.symbolCustomColor),i.set(23,j.symbolFolder),i.set(24,j.symbolTypeParameter),i.set(25,j.account),i.set(26,j.issues);function e(r){let s=i.get(r);return s||(console.info("No codicon found for CompletionItemKind "+r),s=j.symbolProperty),s}o.toIcon=e;let t=new Map;t.set("method",0),t.set("function",1),t.set("constructor",2),t.set("field",3),t.set("variable",4),t.set("class",5),t.set("struct",6),t.set("interface",7),t.set("module",8),t.set("property",9),t.set("event",10),t.set("operator",11),t.set("unit",12),t.set("value",13),t.set("constant",14),t.set("enum",15),t.set("enum-member",16),t.set("enumMember",16),t.set("keyword",17),t.set("snippet",27),t.set("text",18),t.set("color",19),t.set("file",20),t.set("reference",21),t.set("customcolor",22),t.set("folder",23),t.set("type-parameter",24),t.set("typeParameter",24),t.set("account",25),t.set("issue",26);function n(r,s){let a=t.get(r);return typeof a>"u"&&!s&&(a=9),a}o.fromString=n})(lN||={});var Sre={17:d("Array","array"),16:d("Boolean","boolean"),4:d("Class","class"),13:d("Constant","constant"),8:d("Constructor","constructor"),9:d("Enum","enumeration"),21:d("EnumMember","enumeration member"),23:d("Event","event"),7:d("Field","field"),0:d("File","file"),11:d("Function","function"),10:d("Interface","interface"),19:d("Key","key"),5:d("Method","method"),1:d("Module","module"),2:d("Namespace","namespace"),20:d("Null","null"),15:d("Number","number"),18:d("Object","object"),24:d("Operator","operator"),3:d("Package","package"),6:d("Property","property"),14:d("String","string"),22:d("Struct","struct"),25:d("TypeParameter","type parameter"),12:d("Variable","variable")};var dN;(t=>{let i=new Map;i.set(0,j.symbolFile),i.set(1,j.symbolModule),i.set(2,j.symbolNamespace),i.set(3,j.symbolPackage),i.set(4,j.symbolClass),i.set(5,j.symbolMethod),i.set(6,j.symbolProperty),i.set(7,j.symbolField),i.set(8,j.symbolConstructor),i.set(9,j.symbolEnum),i.set(10,j.symbolInterface),i.set(11,j.symbolFunction),i.set(12,j.symbolVariable),i.set(13,j.symbolConstant),i.set(14,j.symbolString),i.set(15,j.symbolNumber),i.set(16,j.symbolBoolean),i.set(17,j.symbolArray),i.set(18,j.symbolObject),i.set(19,j.symbolKey),i.set(20,j.symbolNull),i.set(21,j.symbolEnumMember),i.set(22,j.symbolStruct),i.set(23,j.symbolEvent),i.set(24,j.symbolOperator),i.set(25,j.symbolTypeParameter);function e(n){let o=i.get(n);return o||(console.info("No codicon found for SymbolKind "+n),o=j.symbolProperty),o}t.toIcon=e})(dN||={});var T1=class i{constructor(e){this.value=e}static Comment=new i("comment");static Imports=new i("imports");static Region=new i("region");static fromValue(e){switch(e){case"comment":return i.Comment;case"imports":return i.Imports;case"region":return i.Region}return new i(e)}};var cN;(e=>{function i(t){return!t||typeof t!="object"?!1:typeof t.id=="string"&&typeof t.title=="string"}e.is=i})(cN||={});var Os=new $u,Xu=new $u;var Pt=P("languageService");function k1(i,e){let t=globalThis.MonacoEnvironment;if(t?.createTrustedTypesPolicy)try{return t.createTrustedTypesPolicy(i,e)}catch(n){Ne(n);return}try{return globalThis.trustedTypes?.createPolicy(i,e)}catch(n){Ne(n);return}}function md(i,e){i instanceof ou?(i.setFontFamily(e.getMassagedFontFamily()),i.setFontWeight(e.fontWeight),i.setFontSize(e.fontSize),i.setFontFeatureSettings(e.fontFeatureSettings),i.setFontVariationSettings(e.fontVariationSettings),i.setLineHeight(e.lineHeight),i.setLetterSpacing(e.letterSpacing)):(i.style.fontFamily=e.getMassagedFontFamily(),i.style.fontWeight=e.fontWeight,i.style.fontSize=e.fontSize+"px",i.style.fontFeatureSettings=e.fontFeatureSettings,i.style.fontVariationSettings=e.fontVariationSettings,i.style.lineHeight=e.lineHeight+"px",i.style.letterSpacing=e.letterSpacing+"px")}var tse=new C;var nse=new C;var Bm=class{constructor(e){this.el=e}disposables=new re;get onPointerMove(){return this.disposables.add(new We(Pe(this.el),"mousemove")).event}get onPointerUp(){return this.disposables.add(new We(Pe(this.el),"mouseup")).event}dispose(){this.disposables.dispose()}};L([q],Bm.prototype,"onPointerMove",1),L([q],Bm.prototype,"onPointerUp",1);var Wm=class{constructor(e){this.el=e}disposables=new re;get onPointerMove(){return this.disposables.add(new We(this.el,Dt.Change)).event}get onPointerUp(){return this.disposables.add(new We(this.el,Dt.End)).event}dispose(){this.disposables.dispose()}};L([q],Wm.prototype,"onPointerMove",1),L([q],Wm.prototype,"onPointerUp",1);var Um=class{constructor(e){this.factory=e}get onPointerMove(){return this.factory.onPointerMove}get onPointerUp(){return this.factory.onPointerUp}dispose(){}};L([q],Um.prototype,"onPointerMove",1),L([q],Um.prototype,"onPointerUp",1);var Vm=class extends A{_onDidChange=this._register(new C);onDidChange=this._onDidChange.event;_referenceDomElement;_width;_height;_resizeObserver;constructor(e,t){super(),this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null,t=()=>{e?this.observe({width:e.width,height:e.height}):this.observe()},n=!1,o=!1,r=()=>{if(n&&!o)try{n=!1,o=!0,t()}finally{gi(Pe(this._referenceDomElement),()=>{o=!1,r()})}};this._resizeObserver=new ResizeObserver(s=>{s&&s[0]&&s[0].contentRect?e={width:s[0].contentRect.width,height:s[0].contentRect.height}:e=null,n=!0,r()}),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let n=0,o=0;t?(n=t.width,o=t.height):this._referenceDomElement&&(n=this._referenceDomElement.clientWidth,o=this._referenceDomElement.clientHeight),n=Math.max(5,n),o=Math.max(5,o),(this._width!==n||this._height!==o)&&(this._width=n,this._height=o,e&&this._onDidChange.fire())}};var Dx=class extends A{_onDidChange=this._register(new C);onDidChange=this._onDidChange.event;_listener;_mediaQueryList;constructor(e){super(),this._listener=()=>this._handleChange(e,!0),this._mediaQueryList=null,this._handleChange(e,!1)}_handleChange(e,t){this._mediaQueryList?.removeEventListener("change",this._listener),this._mediaQueryList=e.matchMedia(`(resolution: ${e.devicePixelRatio}dppx)`),this._mediaQueryList.addEventListener("change",this._listener),t&&this._onDidChange.fire()}},_x=class extends A{_onDidChange=this._register(new C);onDidChange=this._onDidChange.event;_value;get value(){return this._value}constructor(e){super(),this._value=this._getPixelRatio(e);let t=this._register(new Dx(e));this._register(t.onDidChange(()=>{this._value=this._getPixelRatio(e),this._onDidChange.fire(this._value)}))}_getPixelRatio(e){let t=document.createElement("canvas").getContext("2d"),n=e.devicePixelRatio||1,o=t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1;return n/o}},Lx=class{mapWindowIdToPixelRatioMonitor=new Map;_getOrCreatePixelRatioMonitor(e){let t=hs(e),n=this.mapWindowIdToPixelRatioMonitor.get(t);return n||(n=yl(new _x(e)),this.mapWindowIdToPixelRatioMonitor.set(t,n),yl(ee.once(IT)(({vscodeWindowId:o})=>{o===t&&(n?.dispose(),this.mapWindowIdToPixelRatioMonitor.delete(t))}))),n}getInstance(e){return this._getOrCreatePixelRatioMonitor(e)}},fd=new Lx;var zm=class{chr;type;width;constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}},Rx=class i{_bareFontInfo;_requests;_container;_testElements;constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(e){this._createDomElements(),e.document.body.appendChild(this._container),this._readFromDomElements(),this._container?.remove(),this._container=null,this._testElements=null}_createDomElements(){let e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";let t=document.createElement("div");md(t,this._bareFontInfo),e.appendChild(t);let n=document.createElement("div");md(n,this._bareFontInfo),n.style.fontWeight="bold",e.appendChild(n);let o=document.createElement("div");md(o,this._bareFontInfo),o.style.fontStyle="italic",e.appendChild(o);let r=[];for(let s of this._requests){let a;s.type===0&&(a=t),s.type===2&&(a=n),s.type===1&&(a=o),a.appendChild(document.createElement("br"));let l=document.createElement("span");i._render(l,s),a.appendChild(l),r.push(l)}this._container=e,this._testElements=r}static _render(e,t){if(t.chr===" "){let n="\xA0";for(let o=0;o<8;o++)n+=n;e.innerText=n}else{let n=t.chr;for(let o=0;o<8;o++)n+=n;e.textContent=n}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){let n=this._requests[e],o=this._testElements[e];n.fulfill(o.offsetWidth/256)}}};function D1(i,e,t){new Rx(e,t).read(i)}var Px=class extends A{_cache=new Map;_evictUntrustedReadingsTimeout=-1;_onDidChange=this._register(new C);onDidChange=this._onDidChange.event;dispose(){this._evictUntrustedReadingsTimeout!==-1&&(clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache.clear(),this._onDidChange.fire()}_ensureCache(e){let t=hs(e),n=this._cache.get(t);return n||(n=new Ox,this._cache.set(t,n)),n}_writeToCache(e,t,n){this._ensureCache(e).put(t,n),!n.isTrusted&&this._evictUntrustedReadingsTimeout===-1&&(this._evictUntrustedReadingsTimeout=e.setTimeout(()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings(e)},5e3))}_evictUntrustedReadings(e){let t=this._ensureCache(e),n=t.getValues(),o=!1;for(let r of n)r.isTrusted||(o=!0,t.remove(r));o&&this._onDidChange.fire()}serializeFontInfo(e){return this._ensureCache(e).getValues().filter(n=>n.isTrusted)}restoreFontInfo(e,t){for(let n of t){if(n.version!==TI)continue;let o=new id(n,!1);this._writeToCache(e,o,o)}}readFontInfo(e,t){let n=this._ensureCache(e);if(!n.has(t)){let o=this._actualReadFontInfo(e,t);(o.typicalHalfwidthCharacterWidth<=2||o.typicalFullwidthCharacterWidth<=2||o.spaceWidth<=2||o.maxDigitWidth<=2)&&(o=new id({pixelRatio:fd.getInstance(e).value,fontFamily:o.fontFamily,fontWeight:o.fontWeight,fontSize:o.fontSize,fontFeatureSettings:o.fontFeatureSettings,fontVariationSettings:o.fontVariationSettings,lineHeight:o.lineHeight,letterSpacing:o.letterSpacing,isMonospace:o.isMonospace,typicalHalfwidthCharacterWidth:Math.max(o.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(o.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:o.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(o.spaceWidth,5),middotWidth:Math.max(o.middotWidth,5),wsmiddotWidth:Math.max(o.wsmiddotWidth,5),maxDigitWidth:Math.max(o.maxDigitWidth,5)},!1)),this._writeToCache(e,t,o)}return n.get(t)}_createRequest(e,t,n,o){let r=new zm(e,t);return n.push(r),o?.push(r),r}_actualReadFontInfo(e,t){let n=[],o=[],r=this._createRequest("n",0,n,o),s=this._createRequest("\uFF4D",0,n,null),a=this._createRequest(" ",0,n,o),l=this._createRequest("0",0,n,o),c=this._createRequest("1",0,n,o),u=this._createRequest("2",0,n,o),p=this._createRequest("3",0,n,o),h=this._createRequest("4",0,n,o),m=this._createRequest("5",0,n,o),v=this._createRequest("6",0,n,o),f=this._createRequest("7",0,n,o),b=this._createRequest("8",0,n,o),E=this._createRequest("9",0,n,o),T=this._createRequest("\u2192",0,n,o),_=this._createRequest("\uFFEB",0,n,null),O=this._createRequest("\xB7",0,n,o),M=this._createRequest("\u2E31",0,n,null),U="|/-_ilm%";for(let V=0,X=U.length;V<X;V++)this._createRequest(U.charAt(V),0,n,o),this._createRequest(U.charAt(V),1,n,o),this._createRequest(U.charAt(V),2,n,o);D1(e,t,n);let he=Math.max(l.width,c.width,u.width,p.width,h.width,m.width,v.width,f.width,b.width,E.width),Q=t.fontFeatureSettings===Au.OFF,se=o[0].width;for(let V=1,X=o.length;Q&&V<X;V++){let Ce=se-o[V].width;if(Ce<-.001||Ce>.001){Q=!1;break}}let ne=!0;return Q&&_.width!==se&&(ne=!1),_.width>T.width&&(ne=!1),new id({pixelRatio:fd.getInstance(e).value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:Q,typicalHalfwidthCharacterWidth:r.width,typicalFullwidthCharacterWidth:s.width,canUseHalfwidthRightwardsArrow:ne,spaceWidth:a.width,middotWidth:O.width,wsmiddotWidth:M.width,maxDigitWidth:he},!0)}},Ox=class{_keys;_values;constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){let t=e.getId();return!!this._values[t]}get(e){let t=e.getId();return this._values[t]}put(e,t){let n=e.getId();this._keys[n]=e,this._values[n]=t}remove(e){let t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map(e=>this._values[e])}},Ax=new Px;var Ju=class i{constructor(e,t){this.key=e;this.migrate=t}static items=[];apply(e){let t=i._read(e,this.key),n=r=>i._read(e,r),o=(r,s)=>i._write(e,r,s);this.migrate(t,n,o)}static _read(e,t){if(typeof e>"u")return;let n=t.indexOf(".");if(n>=0){let o=t.substring(0,n);return this._read(e[o],t.substring(n+1))}return e[t]}static _write(e,t,n){let o=t.indexOf(".");if(o>=0){let r=t.substring(0,o);e[r]=e[r]||{},this._write(e[r],t.substring(o+1),n);return}e[t]=n}};function xo(i,e){Ju.items.push(new Ju(i,e))}function ii(i,e){xo(i,(t,n,o)=>{if(typeof t<"u"){for(let[r,s]of e)if(t===r){o(i,s);return}}})}function _1(i){Ju.items.forEach(e=>e.apply(i))}ii("wordWrap",[[!0,"on"],[!1,"off"]]);ii("lineNumbers",[[!0,"on"],[!1,"off"]]);ii("cursorBlinking",[["visible","solid"]]);ii("renderWhitespace",[[!0,"boundary"],[!1,"none"]]);ii("renderLineHighlight",[[!0,"line"],[!1,"none"]]);ii("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]);ii("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]);ii("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);ii("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]);ii("autoIndent",[[!1,"advanced"],[!0,"full"]]);ii("matchBrackets",[[!0,"always"],[!1,"never"]]);ii("renderFinalNewline",[[!0,"on"],[!1,"off"]]);ii("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]);ii("occurrencesHighlight",[[!0,"singleFile"],[!1,"off"]]);ii("wordBasedSuggestions",[[!0,"matchingDocuments"],[!1,"off"]]);xo("autoClosingBrackets",(i,e,t)=>{i===!1&&(t("autoClosingBrackets","never"),typeof e("autoClosingQuotes")>"u"&&t("autoClosingQuotes","never"),typeof e("autoSurround")>"u"&&t("autoSurround","never"))});xo("renderIndentGuides",(i,e,t)=>{typeof i<"u"&&(t("renderIndentGuides",void 0),typeof e("guides.indentation")>"u"&&t("guides.indentation",!!i))});xo("highlightActiveIndentGuide",(i,e,t)=>{typeof i<"u"&&(t("highlightActiveIndentGuide",void 0),typeof e("guides.highlightActiveIndentation")>"u"&&t("guides.highlightActiveIndentation",!!i))});var uN={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};xo("suggest.filteredTypes",(i,e,t)=>{if(i&&typeof i=="object"){for(let n of Object.entries(uN))i[n[0]]===!1&&typeof e(`suggest.${n[1]}`)>"u"&&t(`suggest.${n[1]}`,!1);t("suggest.filteredTypes",void 0)}});xo("quickSuggestions",(i,e,t)=>{if(typeof i=="boolean"){let n=i?"on":"off";t("quickSuggestions",{comments:n,strings:n,other:n})}});xo("experimental.stickyScroll.enabled",(i,e,t)=>{typeof i=="boolean"&&(t("experimental.stickyScroll.enabled",void 0),typeof e("stickyScroll.enabled")>"u"&&t("stickyScroll.enabled",i))});xo("experimental.stickyScroll.maxLineCount",(i,e,t)=>{typeof i=="number"&&(t("experimental.stickyScroll.maxLineCount",void 0),typeof e("stickyScroll.maxLineCount")>"u"&&t("stickyScroll.maxLineCount",i))});xo("codeActionsOnSave",(i,e,t)=>{if(i&&typeof i=="object"){let n=!1,o={};for(let r of Object.entries(i))typeof r[1]=="boolean"?(n=!0,o[r[0]]=r[1]?"explicit":"never"):o[r[0]]=r[1];n&&t("codeActionsOnSave",o)}});xo("codeActionWidget.includeNearbyQuickfixes",(i,e,t)=>{typeof i=="boolean"&&(t("codeActionWidget.includeNearbyQuickfixes",void 0),typeof e("codeActionWidget.includeNearbyQuickFixes")>"u"&&t("codeActionWidget.includeNearbyQuickFixes",i))});xo("lightbulb.enabled",(i,e,t)=>{typeof i=="boolean"&&t("lightbulb.enabled",i?void 0:"off")});var Mx=class{_tabFocus=!1;_onDidChangeTabFocus=new C;onDidChangeTabFocus=this._onDidChangeTabFocus.event;getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}},Nx=new Mx;var Fx=class i{_coreKeybindings;_extensionKeybindings;_cachedMergedKeybindings;constructor(){this._coreKeybindings=new In,this._extensionKeybindings=[],this._cachedMergedKeybindings=null}static bindToCurrentPlatform(e){if(ts===1){if(e&&e.win)return e.win}else if(ts===2){if(e&&e.mac)return e.mac}else if(e&&e.linux)return e.linux;return e}registerKeybindingRule(e){let t=i.bindToCurrentPlatform(e),n=new re;if(t&&t.primary){let o=xv(t.primary,ts);o&&n.add(this._registerDefaultKeybinding(o,e.id,e.args,e.weight,0,e.when))}if(t&&Array.isArray(t.secondary))for(let o=0,r=t.secondary.length;o<r;o++){let s=t.secondary[o],a=xv(s,ts);a&&n.add(this._registerDefaultKeybinding(a,e.id,e.args,e.weight,-o-1,e.when))}return n}setExtensionKeybindings(e){let t=[],n=0;for(let o of e)o.keybinding&&(t[n++]={keybinding:o.keybinding,command:o.id,commandArgs:o.args,when:o.when,weight1:o.weight,weight2:0,extensionId:o.extensionId||null,isBuiltinExtension:o.isBuiltinExtension||!1});this._extensionKeybindings=t,this._cachedMergedKeybindings=null}registerCommandAndKeybindingRule(e){return Tr(this.registerKeybindingRule(e),yt.registerCommand(e))}_registerDefaultKeybinding(e,t,n,o,r,s){let a=this._coreKeybindings.push({keybinding:e,command:t,commandArgs:n,when:s,weight1:o,weight2:r,extensionId:null,isBuiltinExtension:!1});return this._cachedMergedKeybindings=null,le(()=>{a(),this._cachedMergedKeybindings=null})}getDefaultKeybindings(){return this._cachedMergedKeybindings||(this._cachedMergedKeybindings=Array.from(this._coreKeybindings).concat(this._extensionKeybindings),this._cachedMergedKeybindings.sort(hN)),this._cachedMergedKeybindings.slice(0)}},za=new Fx,pN={EditorModes:"platform.keybindingsRegistry"};Ae.add(pN.EditorModes,za);function hN(i,e){if(i.weight1!==e.weight1)return i.weight1-e.weight1;if(i.command&&e.command){if(i.command<e.command)return-1;if(i.command>e.command)return 1}return i.weight2-e.weight2}function gN(i){return i.command!==void 0}var Lt=class i{static _instances=new Map;static CommandPalette=new i("CommandPalette");static DebugBreakpointsContext=new i("DebugBreakpointsContext");static DebugCallStackContext=new i("DebugCallStackContext");static DebugConsoleContext=new i("DebugConsoleContext");static DebugVariablesContext=new i("DebugVariablesContext");static NotebookVariablesContext=new i("NotebookVariablesContext");static DebugHoverContext=new i("DebugHoverContext");static DebugWatchContext=new i("DebugWatchContext");static DebugToolBar=new i("DebugToolBar");static DebugToolBarStop=new i("DebugToolBarStop");static DebugCallStackToolbar=new i("DebugCallStackToolbar");static DebugCreateConfiguration=new i("DebugCreateConfiguration");static EditorContext=new i("EditorContext");static SimpleEditorContext=new i("SimpleEditorContext");static EditorContent=new i("EditorContent");static EditorLineNumberContext=new i("EditorLineNumberContext");static EditorContextCopy=new i("EditorContextCopy");static EditorContextPeek=new i("EditorContextPeek");static EditorContextShare=new i("EditorContextShare");static EditorTitle=new i("EditorTitle");static EditorTitleRun=new i("EditorTitleRun");static EditorTitleContext=new i("EditorTitleContext");static EditorTitleContextShare=new i("EditorTitleContextShare");static EmptyEditorGroup=new i("EmptyEditorGroup");static EmptyEditorGroupContext=new i("EmptyEditorGroupContext");static EditorTabsBarContext=new i("EditorTabsBarContext");static EditorTabsBarShowTabsSubmenu=new i("EditorTabsBarShowTabsSubmenu");static EditorTabsBarShowTabsZenModeSubmenu=new i("EditorTabsBarShowTabsZenModeSubmenu");static EditorActionsPositionSubmenu=new i("EditorActionsPositionSubmenu");static ExplorerContext=new i("ExplorerContext");static ExplorerContextShare=new i("ExplorerContextShare");static ExtensionContext=new i("ExtensionContext");static ExtensionEditorContextMenu=new i("ExtensionEditorContextMenu");static GlobalActivity=new i("GlobalActivity");static CommandCenter=new i("CommandCenter");static CommandCenterCenter=new i("CommandCenterCenter");static LayoutControlMenuSubmenu=new i("LayoutControlMenuSubmenu");static LayoutControlMenu=new i("LayoutControlMenu");static MenubarMainMenu=new i("MenubarMainMenu");static MenubarAppearanceMenu=new i("MenubarAppearanceMenu");static MenubarDebugMenu=new i("MenubarDebugMenu");static MenubarEditMenu=new i("MenubarEditMenu");static MenubarCopy=new i("MenubarCopy");static MenubarFileMenu=new i("MenubarFileMenu");static MenubarGoMenu=new i("MenubarGoMenu");static MenubarHelpMenu=new i("MenubarHelpMenu");static MenubarLayoutMenu=new i("MenubarLayoutMenu");static MenubarNewBreakpointMenu=new i("MenubarNewBreakpointMenu");static PanelAlignmentMenu=new i("PanelAlignmentMenu");static PanelPositionMenu=new i("PanelPositionMenu");static ActivityBarPositionMenu=new i("ActivityBarPositionMenu");static MenubarPreferencesMenu=new i("MenubarPreferencesMenu");static MenubarRecentMenu=new i("MenubarRecentMenu");static MenubarSelectionMenu=new i("MenubarSelectionMenu");static MenubarShare=new i("MenubarShare");static MenubarSwitchEditorMenu=new i("MenubarSwitchEditorMenu");static MenubarSwitchGroupMenu=new i("MenubarSwitchGroupMenu");static MenubarTerminalMenu=new i("MenubarTerminalMenu");static MenubarViewMenu=new i("MenubarViewMenu");static MenubarHomeMenu=new i("MenubarHomeMenu");static OpenEditorsContext=new i("OpenEditorsContext");static OpenEditorsContextShare=new i("OpenEditorsContextShare");static ProblemsPanelContext=new i("ProblemsPanelContext");static SCMInputBox=new i("SCMInputBox");static SCMChangesContext=new i("SCMChangesContext");static SCMChangeContext=new i("SCMChangeContext");static SCMResourceContext=new i("SCMResourceContext");static SCMResourceContextShare=new i("SCMResourceContextShare");static SCMResourceFolderContext=new i("SCMResourceFolderContext");static SCMResourceGroupContext=new i("SCMResourceGroupContext");static SCMSourceControl=new i("SCMSourceControl");static SCMSourceControlInline=new i("SCMSourceControlInline");static SCMSourceControlTitle=new i("SCMSourceControlTitle");static SCMHistoryTitle=new i("SCMHistoryTitle");static SCMTitle=new i("SCMTitle");static SearchContext=new i("SearchContext");static SearchActionMenu=new i("SearchActionContext");static StatusBarWindowIndicatorMenu=new i("StatusBarWindowIndicatorMenu");static StatusBarRemoteIndicatorMenu=new i("StatusBarRemoteIndicatorMenu");static StickyScrollContext=new i("StickyScrollContext");static TestItem=new i("TestItem");static TestItemGutter=new i("TestItemGutter");static TestProfilesContext=new i("TestProfilesContext");static TestMessageContext=new i("TestMessageContext");static TestMessageContent=new i("TestMessageContent");static TestPeekElement=new i("TestPeekElement");static TestPeekTitle=new i("TestPeekTitle");static TestCallStack=new i("TestCallStack");static TouchBarContext=new i("TouchBarContext");static TitleBarContext=new i("TitleBarContext");static TitleBarTitleContext=new i("TitleBarTitleContext");static TunnelContext=new i("TunnelContext");static TunnelPrivacy=new i("TunnelPrivacy");static TunnelProtocol=new i("TunnelProtocol");static TunnelPortInline=new i("TunnelInline");static TunnelTitle=new i("TunnelTitle");static TunnelLocalAddressInline=new i("TunnelLocalAddressInline");static TunnelOriginInline=new i("TunnelOriginInline");static ViewItemContext=new i("ViewItemContext");static ViewContainerTitle=new i("ViewContainerTitle");static ViewContainerTitleContext=new i("ViewContainerTitleContext");static ViewTitle=new i("ViewTitle");static ViewTitleContext=new i("ViewTitleContext");static CommentEditorActions=new i("CommentEditorActions");static CommentThreadTitle=new i("CommentThreadTitle");static CommentThreadActions=new i("CommentThreadActions");static CommentThreadAdditionalActions=new i("CommentThreadAdditionalActions");static CommentThreadTitleContext=new i("CommentThreadTitleContext");static CommentThreadCommentContext=new i("CommentThreadCommentContext");static CommentTitle=new i("CommentTitle");static CommentActions=new i("CommentActions");static CommentsViewThreadActions=new i("CommentsViewThreadActions");static InteractiveToolbar=new i("InteractiveToolbar");static InteractiveCellTitle=new i("InteractiveCellTitle");static InteractiveCellDelete=new i("InteractiveCellDelete");static InteractiveCellExecute=new i("InteractiveCellExecute");static InteractiveInputExecute=new i("InteractiveInputExecute");static InteractiveInputConfig=new i("InteractiveInputConfig");static ReplInputExecute=new i("ReplInputExecute");static IssueReporter=new i("IssueReporter");static NotebookToolbar=new i("NotebookToolbar");static NotebookStickyScrollContext=new i("NotebookStickyScrollContext");static NotebookCellTitle=new i("NotebookCellTitle");static NotebookCellDelete=new i("NotebookCellDelete");static NotebookCellInsert=new i("NotebookCellInsert");static NotebookCellBetween=new i("NotebookCellBetween");static NotebookCellListTop=new i("NotebookCellTop");static NotebookCellExecute=new i("NotebookCellExecute");static NotebookCellExecuteGoTo=new i("NotebookCellExecuteGoTo");static NotebookCellExecutePrimary=new i("NotebookCellExecutePrimary");static NotebookDiffCellInputTitle=new i("NotebookDiffCellInputTitle");static NotebookDiffCellMetadataTitle=new i("NotebookDiffCellMetadataTitle");static NotebookDiffCellOutputsTitle=new i("NotebookDiffCellOutputsTitle");static NotebookOutputToolbar=new i("NotebookOutputToolbar");static NotebookOutlineFilter=new i("NotebookOutlineFilter");static NotebookOutlineActionMenu=new i("NotebookOutlineActionMenu");static NotebookEditorLayoutConfigure=new i("NotebookEditorLayoutConfigure");static NotebookKernelSource=new i("NotebookKernelSource");static BulkEditTitle=new i("BulkEditTitle");static BulkEditContext=new i("BulkEditContext");static TimelineItemContext=new i("TimelineItemContext");static TimelineTitle=new i("TimelineTitle");static TimelineTitleContext=new i("TimelineTitleContext");static TimelineFilterSubMenu=new i("TimelineFilterSubMenu");static AccountsContext=new i("AccountsContext");static SidebarTitle=new i("SidebarTitle");static PanelTitle=new i("PanelTitle");static AuxiliaryBarTitle=new i("AuxiliaryBarTitle");static AuxiliaryBarHeader=new i("AuxiliaryBarHeader");static TerminalInstanceContext=new i("TerminalInstanceContext");static TerminalEditorInstanceContext=new i("TerminalEditorInstanceContext");static TerminalNewDropdownContext=new i("TerminalNewDropdownContext");static TerminalTabContext=new i("TerminalTabContext");static TerminalTabEmptyAreaContext=new i("TerminalTabEmptyAreaContext");static TerminalStickyScrollContext=new i("TerminalStickyScrollContext");static WebviewContext=new i("WebviewContext");static InlineCompletionsActions=new i("InlineCompletionsActions");static InlineEditsActions=new i("InlineEditsActions");static InlineEditActions=new i("InlineEditActions");static NewFile=new i("NewFile");static MergeInput1Toolbar=new i("MergeToolbar1Toolbar");static MergeInput2Toolbar=new i("MergeToolbar2Toolbar");static MergeBaseToolbar=new i("MergeBaseToolbar");static MergeInputResultToolbar=new i("MergeToolbarResultToolbar");static InlineSuggestionToolbar=new i("InlineSuggestionToolbar");static InlineEditToolbar=new i("InlineEditToolbar");static ChatContext=new i("ChatContext");static ChatCodeBlock=new i("ChatCodeblock");static ChatCompareBlock=new i("ChatCompareBlock");static ChatMessageTitle=new i("ChatMessageTitle");static ChatExecute=new i("ChatExecute");static ChatExecuteSecondary=new i("ChatExecuteSecondary");static ChatInputSide=new i("ChatInputSide");static AccessibleView=new i("AccessibleView");static MultiDiffEditorFileToolbar=new i("MultiDiffEditorFileToolbar");static DiffEditorHunkToolbar=new i("DiffEditorHunkToolbar");static DiffEditorSelectionToolbar=new i("DiffEditorSelectionToolbar");static for(e){return i._instances.get(e)??new i(e)}id;constructor(e){if(i._instances.has(e))throw new TypeError(`MenuId with identifier '${e}' already exists. Use MenuId.for(ident) or a unique identifier`);i._instances.set(e,this),this.id=e}},mae=P("menuService"),Ha=class i{constructor(e){this.id=e;this.has=t=>t===e}static _all=new Map;static for(e){let t=this._all.get(e);return t||(t=new i(e),this._all.set(e,t)),t}static merge(e){let t=new Set;for(let n of e)n instanceof i&&t.add(n.id);return t}has},Cn=new class{_commands=new Map;_menuItems=new Map;_onDidChangeMenu=new vh({merge:Ha.merge});onDidChangeMenu=this._onDidChangeMenu.event;addCommand(i){return this._commands.set(i.id,i),this._onDidChangeMenu.fire(Ha.for(Lt.CommandPalette)),le(()=>{this._commands.delete(i.id)&&this._onDidChangeMenu.fire(Ha.for(Lt.CommandPalette))})}getCommand(i){return this._commands.get(i)}getCommands(){let i=new Map;return this._commands.forEach((e,t)=>i.set(t,e)),i}appendMenuItem(i,e){let t=this._menuItems.get(i);t||(t=new In,this._menuItems.set(i,t));let n=t.push(e);return this._onDidChangeMenu.fire(Ha.for(i)),le(()=>{n(),this._onDidChangeMenu.fire(Ha.for(i))})}appendMenuItems(i){let e=new re;for(let{id:t,item:n}of i)e.add(this.appendMenuItem(t,n));return e}getMenuItems(i){let e;return this._menuItems.has(i)?e=[...this._menuItems.get(i)]:e=[],i===Lt.CommandPalette&&this._appendImplicitItems(e),e}_appendImplicitItems(i){let e=new Set;for(let t of i)gN(t)&&(e.add(t.command.id),t.alt&&e.add(t.alt.id));this._commands.forEach((t,n)=>{e.has(n)||i.push({command:t})})}};var Ka=class{constructor(e,t,n,o,r,s,a){this.hideActions=o;this.menuKeybinding=r;this._commandService=a;this.id=e.id,this.label=Ka.label(e,n),this.tooltip=(typeof e.tooltip=="string"?e.tooltip:e.tooltip?.value)??"",this.enabled=!e.precondition||s.contextMatchesRules(e.precondition),this.checked=void 0;let l;if(e.toggled){let c=e.toggled.condition?e.toggled:{condition:e.toggled};this.checked=s.contextMatchesRules(c.condition),this.checked&&c.tooltip&&(this.tooltip=typeof c.tooltip=="string"?c.tooltip:c.tooltip.value),this.checked&&Fe.isThemeIcon(c.icon)&&(l=c.icon),this.checked&&c.title&&(this.label=typeof c.title=="string"?c.title:c.title.value)}l||(l=Fe.isThemeIcon(e.icon)?e.icon:void 0),this.item=e,this.alt=t?new Ka(t,void 0,n,o,void 0,s,a):void 0,this._options=n,this.class=l&&Fe.asClassName(l)}static label(e,t){return t?.renderShortTitle&&e.shortTitle?typeof e.shortTitle=="string"?e.shortTitle:e.shortTitle.value:typeof e.title=="string"?e.title:e.title.value}item;alt;_options;id;label;tooltip;class;enabled;checked;run(...e){let t=[];return this._options?.arg&&(t=[...t,this._options.arg]),this._options?.shouldForwardArgs&&(t=[...t,...e]),this._commandService.executeCommand(this.id,...t)}};Ka=L([w(5,Qo),w(6,qn)],Ka);var Nt=class{constructor(e){this.desc=e}};function Ht(i){let e=[],t=new i,{f1:n,menu:o,keybinding:r,...s}=t.desc;if(yt.getCommand(s.id))throw new Error(`Cannot register two commands with the same id: ${s.id}`);if(e.push(yt.registerCommand({id:s.id,handler:(a,...l)=>t.run(a,...l),metadata:s.metadata})),Array.isArray(o))for(let a of o)e.push(Cn.appendMenuItem(a.id,{command:{...s,precondition:a.precondition===null?void 0:s.precondition},...a}));else o&&e.push(Cn.appendMenuItem(o.id,{command:{...s,precondition:o.precondition===null?void 0:s.precondition},...o}));if(n&&(e.push(Cn.appendMenuItem(Lt.CommandPalette,{command:s,when:s.precondition})),e.push(Cn.addCommand(s))),Array.isArray(r))for(let a of r)e.push(za.registerKeybindingRule({...a,id:s.id,when:s.precondition?xe.and(s.precondition,a.when):a.when}));else r&&e.push(za.registerKeybindingRule({...r,id:s.id,when:s.precondition?xe.and(s.precondition,r.when):r.when}));return{dispose(){ft(e)}}}var Hm=class extends A{constructor(t,n,o,r,s){super();this._accessibilityService=s;this.isSimpleWidget=t,this.contextMenuId=n,this._containerObserver=this._register(new Vm(r,o.dimension)),this._targetWindowId=Pe(r).vscodeWindowId,this._rawOptions=L1(o),this._validatedOptions=Ga.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register(Jg.onDidChangeZoomLevel(()=>this._recomputeOptions())),this._register(Nx.onDidChangeTabFocus(()=>this._recomputeOptions())),this._register(this._containerObserver.onDidChange(()=>this._recomputeOptions())),this._register(Ax.onDidChange(()=>this._recomputeOptions())),this._register(fd.getInstance(Pe(r)).onDidChange(()=>this._recomputeOptions())),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(()=>this._recomputeOptions()))}_onDidChange=this._register(new C);onDidChange=this._onDidChange.event;_onDidChangeFast=this._register(new C);onDidChangeFast=this._onDidChangeFast.event;isSimpleWidget;contextMenuId;_containerObserver;_isDominatedByLongLines=!1;_viewLineCount=1;_lineNumbersDigitCount=1;_reservedHeight=0;_glyphMarginDecorationLaneCount=1;_targetWindowId;_computeOptionsMemory=new Ou;_rawOptions;_validatedOptions;options;_recomputeOptions(){let t=this._computeOptions(),n=Ga.checkEquals(this.options,t);n!==null&&(this.options=t,this._onDidChangeFast.fire(n),this._onDidChange.fire(n))}_computeOptions(){let t=this._readEnvConfiguration(),n=vu.createFromValidatedSettings(this._validatedOptions,t.pixelRatio,this.isSimpleWidget),o=this._readFontInfo(n),r={memory:this._computeOptionsMemory,outerWidth:t.outerWidth,outerHeight:t.outerHeight-this._reservedHeight,fontInfo:o,extraEditorClassName:t.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:t.emptySelectionClipboard,pixelRatio:t.pixelRatio,tabFocusMode:Nx.getTabFocusMode(),accessibilitySupport:t.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return Ga.computeOptions(this._validatedOptions,r)}_readEnvConfiguration(){return{extraEditorClassName:fN(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:Dr||kr,pixelRatio:fd.getInstance(Sa(this._targetWindowId,!0).window).value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(t){return Ax.readFontInfo(Sa(this._targetWindowId,!0).window,t)}getRawOptions(){return this._rawOptions}updateOptions(t){let n=L1(t);Ga.applyUpdate(this._rawOptions,n)&&(this._validatedOptions=Ga.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(t){this._containerObserver.observe(t)}setIsDominatedByLongLines(t){this._isDominatedByLongLines!==t&&(this._isDominatedByLongLines=t,this._recomputeOptions())}setModelLineCount(t){let n=mN(t);this._lineNumbersDigitCount!==n&&(this._lineNumbersDigitCount=n,this._recomputeOptions())}setViewLineCount(t){this._viewLineCount!==t&&(this._viewLineCount=t,this._recomputeOptions())}setReservedHeight(t){this._reservedHeight!==t&&(this._reservedHeight=t,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(t){this._glyphMarginDecorationLaneCount!==t&&(this._glyphMarginDecorationLaneCount=t,this._recomputeOptions())}};Hm=L([w(4,Ls)],Hm);function mN(i){let e=0;for(;i;)i=Math.floor(i/10),e++;return e||1}function fN(){let i="";return!Bo&&!Tw&&(i+="no-user-select "),Bo&&(i+="no-minimap-shadow ",i+="enable-user-select "),Se&&(i+="mac "),i}var Bx=class{_values=[];_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}},Wx=class{_values=[];_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}},Ga=class i{static validateOptions(e){let t=new Bx;for(let n of cd){let o=n.name==="_never_"?void 0:e[n.name];t._write(n.id,n.validate(o))}return t}static computeOptions(e,t){let n=new Wx;for(let o of cd)n._write(o.id,o.compute(t,n,e._read(o.id)));return n}static _deepEquals(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return Array.isArray(e)&&Array.isArray(t)?Bt(e,t):!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let n in e)if(!i._deepEquals(e[n],t[n]))return!1;return!0}static checkEquals(e,t){let n=[],o=!1;for(let r of cd){let s=!i._deepEquals(e._read(r.id),t._read(r.id));n[r.id]=s,s&&(o=!0)}return o?new gm(n):null}static applyUpdate(e,t){let n=!1;for(let o of cd)if(t.hasOwnProperty(o.name)){let r=o.applyUpdate(e[o.name],t[o.name]);e[o.name]=r.newValue,n=n||r.didChange}return n}};function L1(i){let e=La(i);return _1(e),e}var So=class{originalStart;originalLength;modifiedStart;modifiedLength;constructor(e,t,n,o){this.originalStart=e,this.originalLength=t,this.modifiedStart=n,this.modifiedLength=o}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}};var As=class{static Assert(e,t){if(!e)throw new Error(t)}},Ms=class{static Copy(e,t,n,o,r){for(let s=0;s<r;s++)n[o+s]=e[t+s]}static Copy2(e,t,n,o,r){for(let s=0;s<r;s++)n[o+s]=e[t+s]}};var Km=class{m_changes;m_originalStart;m_modifiedStart;m_originalCount;m_modifiedCount;constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new So(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_originalCount++}AddModifiedElement(e,t){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,t),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},bd=class i{ContinueProcessingPredicate;_originalSequence;_modifiedSequence;_hasStrings;_originalStringElements;_originalElementsOrHash;_modifiedStringElements;_modifiedElementsOrHash;m_forwardHistory;m_reverseHistory;constructor(e,t,n=null){this.ContinueProcessingPredicate=n,this._originalSequence=e,this._modifiedSequence=t;let[o,r,s]=i._getElements(e),[a,l,c]=i._getElements(t);this._hasStrings=s&&c,this._originalStringElements=o,this._originalElementsOrHash=r,this._modifiedStringElements=a,this._modifiedElementsOrHash=l,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _isStringArray(e){return e.length>0&&typeof e[0]=="string"}static _getElements(e){let t=e.getElements();if(i._isStringArray(t)){let n=new Int32Array(t.length);for(let o=0,r=t.length;o<r;o++)n[o]=qh(t[o],0);return[t,n,!0]}return t instanceof Int32Array?[[],t,!1]:[[],new Int32Array(t),!1]}ElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._modifiedStringElements[t]:!0}ElementsAreStrictEqual(e,t){if(!this.ElementsAreEqual(e,t))return!1;let n=i._getStrictElement(this._originalSequence,e),o=i._getStrictElement(this._modifiedSequence,t);return n===o}static _getStrictElement(e,t){return typeof e.getStrictElement=="function"?e.getStrictElement(t):null}OriginalElementsAreEqual(e,t){return this._originalElementsOrHash[e]!==this._originalElementsOrHash[t]?!1:this._hasStrings?this._originalStringElements[e]===this._originalStringElements[t]:!0}ModifiedElementsAreEqual(e,t){return this._modifiedElementsOrHash[e]!==this._modifiedElementsOrHash[t]?!1:this._hasStrings?this._modifiedStringElements[e]===this._modifiedStringElements[t]:!0}ComputeDiff(e){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1,e)}_ComputeDiff(e,t,n,o,r){let s=[!1],a=this.ComputeDiffRecursive(e,t,n,o,s);return r&&(a=this.PrettifyChanges(a)),{quitEarly:s[0],changes:a}}ComputeDiffRecursive(e,t,n,o,r){for(r[0]=!1;e<=t&&n<=o&&this.ElementsAreEqual(e,n);)e++,n++;for(;t>=e&&o>=n&&this.ElementsAreEqual(t,o);)t--,o--;if(e>t||n>o){let p;return n<=o?(As.Assert(e===t+1,"originalStart should only be one more than originalEnd"),p=[new So(e,0,n,o-n+1)]):e<=t?(As.Assert(n===o+1,"modifiedStart should only be one more than modifiedEnd"),p=[new So(e,t-e+1,n,0)]):(As.Assert(e===t+1,"originalStart should only be one more than originalEnd"),As.Assert(n===o+1,"modifiedStart should only be one more than modifiedEnd"),p=[]),p}let s=[0],a=[0],l=this.ComputeRecursionPoint(e,t,n,o,s,a,r),c=s[0],u=a[0];if(l!==null)return l;if(!r[0]){let p=this.ComputeDiffRecursive(e,c,n,u,r),h=[];return r[0]?h=[new So(c+1,t-(c+1)+1,u+1,o-(u+1)+1)]:h=this.ComputeDiffRecursive(c+1,t,u+1,o,r),this.ConcatenateChanges(p,h)}return[new So(e,t-e+1,n,o-n+1)]}WALKTRACE(e,t,n,o,r,s,a,l,c,u,p,h,m,v,f,b,E,T){let _=null,O=null,M=new Km,U=t,he=n,Q=m[0]-b[0]-o,se=-1073741824,ne=this.m_forwardHistory.length-1;do{let V=Q+e;V===U||V<he&&c[V-1]<c[V+1]?(p=c[V+1],v=p-Q-o,p<se&&M.MarkNextChange(),se=p,M.AddModifiedElement(p+1,v),Q=V+1-e):(p=c[V-1]+1,v=p-Q-o,p<se&&M.MarkNextChange(),se=p-1,M.AddOriginalElement(p,v+1),Q=V-1-e),ne>=0&&(c=this.m_forwardHistory[ne],e=c[0],U=1,he=c.length-1)}while(--ne>=-1);if(_=M.getReverseChanges(),T[0]){let V=m[0]+1,X=b[0]+1;if(_!==null&&_.length>0){let Ce=_[_.length-1];V=Math.max(V,Ce.getOriginalEnd()),X=Math.max(X,Ce.getModifiedEnd())}O=[new So(V,h-V+1,X,f-X+1)]}else{M=new Km,U=s,he=a,Q=m[0]-b[0]-l,se=1073741824,ne=E?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let V=Q+r;V===U||V<he&&u[V-1]>=u[V+1]?(p=u[V+1]-1,v=p-Q-l,p>se&&M.MarkNextChange(),se=p+1,M.AddOriginalElement(p+1,v+1),Q=V+1-r):(p=u[V-1],v=p-Q-l,p>se&&M.MarkNextChange(),se=p,M.AddModifiedElement(p+1,v+1),Q=V-1-r),ne>=0&&(u=this.m_reverseHistory[ne],r=u[0],U=1,he=u.length-1)}while(--ne>=-1);O=M.getChanges()}return this.ConcatenateChanges(_,O)}ComputeRecursionPoint(e,t,n,o,r,s,a){let l=0,c=0,u=0,p=0,h=0,m=0;e--,n--,r[0]=0,s[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let v=t-e+(o-n),f=v+1,b=new Int32Array(f),E=new Int32Array(f),T=o-n,_=t-e,O=e-n,M=t-o,he=(_-T)%2===0;b[T]=e,E[_]=t,a[0]=!1;for(let Q=1;Q<=v/2+1;Q++){let se=0,ne=0;u=this.ClipDiagonalBound(T-Q,Q,T,f),p=this.ClipDiagonalBound(T+Q,Q,T,f);for(let X=u;X<=p;X+=2){X===u||X<p&&b[X-1]<b[X+1]?l=b[X+1]:l=b[X-1]+1,c=l-(X-T)-O;let Ce=l;for(;l<t&&c<o&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(b[X]=l,l+c>se+ne&&(se=l,ne=c),!he&&Math.abs(X-_)<=Q-1&&l>=E[X])return r[0]=l,s[0]=c,Ce<=E[X]&&Q<=1448?this.WALKTRACE(T,u,p,O,_,h,m,M,b,E,l,t,r,c,o,s,he,a):null}let V=(se-e+(ne-n)-Q)/2;if(this.ContinueProcessingPredicate!==null&&!this.ContinueProcessingPredicate(se,V))return a[0]=!0,r[0]=se,s[0]=ne,V>0&&Q<=1448?this.WALKTRACE(T,u,p,O,_,h,m,M,b,E,l,t,r,c,o,s,he,a):(e++,n++,[new So(e,t-e+1,n,o-n+1)]);h=this.ClipDiagonalBound(_-Q,Q,_,f),m=this.ClipDiagonalBound(_+Q,Q,_,f);for(let X=h;X<=m;X+=2){X===h||X<m&&E[X-1]>=E[X+1]?l=E[X+1]-1:l=E[X-1],c=l-(X-_)-M;let Ce=l;for(;l>e&&c>n&&this.ElementsAreEqual(l,c);)l--,c--;if(E[X]=l,he&&Math.abs(X-T)<=Q&&l<=b[X])return r[0]=l,s[0]=c,Ce>=b[X]&&Q<=1448?this.WALKTRACE(T,u,p,O,_,h,m,M,b,E,l,t,r,c,o,s,he,a):null}if(Q<=1447){let X=new Int32Array(p-u+2);X[0]=T-u+1,Ms.Copy2(b,u,X,1,p-u+1),this.m_forwardHistory.push(X),X=new Int32Array(m-h+2),X[0]=_-h+1,Ms.Copy2(E,h,X,1,m-h+1),this.m_reverseHistory.push(X)}}return this.WALKTRACE(T,u,p,O,_,h,m,M,b,E,l,t,r,c,o,s,he,a)}PrettifyChanges(e){for(let t=0;t<e.length;t++){let n=e[t],o=t<e.length-1?e[t+1].originalStart:this._originalElementsOrHash.length,r=t<e.length-1?e[t+1].modifiedStart:this._modifiedElementsOrHash.length,s=n.originalLength>0,a=n.modifiedLength>0;for(;n.originalStart+n.originalLength<o&&n.modifiedStart+n.modifiedLength<r&&(!s||this.OriginalElementsAreEqual(n.originalStart,n.originalStart+n.originalLength))&&(!a||this.ModifiedElementsAreEqual(n.modifiedStart,n.modifiedStart+n.modifiedLength));){let c=this.ElementsAreStrictEqual(n.originalStart,n.modifiedStart);if(this.ElementsAreStrictEqual(n.originalStart+n.originalLength,n.modifiedStart+n.modifiedLength)&&!c)break;n.originalStart++,n.modifiedStart++}let l=[null];if(t<e.length-1&&this.ChangesOverlap(e[t],e[t+1],l)){e[t]=l[0],e.splice(t+1,1),t--;continue}}for(let t=e.length-1;t>=0;t--){let n=e[t],o=0,r=0;if(t>0){let p=e[t-1];o=p.originalStart+p.originalLength,r=p.modifiedStart+p.modifiedLength}let s=n.originalLength>0,a=n.modifiedLength>0,l=0,c=this._boundaryScore(n.originalStart,n.originalLength,n.modifiedStart,n.modifiedLength);for(let p=1;;p++){let h=n.originalStart-p,m=n.modifiedStart-p;if(h<o||m<r||s&&!this.OriginalElementsAreEqual(h,h+n.originalLength)||a&&!this.ModifiedElementsAreEqual(m,m+n.modifiedLength))break;let f=(h===o&&m===r?5:0)+this._boundaryScore(h,n.originalLength,m,n.modifiedLength);f>c&&(c=f,l=p)}n.originalStart-=l,n.modifiedStart-=l;let u=[null];if(t>0&&this.ChangesOverlap(e[t-1],e[t],u)){e[t-1]=u[0],e.splice(t,1),t++;continue}}if(this._hasStrings)for(let t=1,n=e.length;t<n;t++){let o=e[t-1],r=e[t],s=r.originalStart-o.originalStart-o.originalLength,a=o.originalStart,l=r.originalStart+r.originalLength,c=l-a,u=o.modifiedStart,p=r.modifiedStart+r.modifiedLength,h=p-u;if(s<5&&c<20&&h<20){let m=this._findBetterContiguousSequence(a,c,u,h,s);if(m){let[v,f]=m;(v!==o.originalStart+o.originalLength||f!==o.modifiedStart+o.modifiedLength)&&(o.originalLength=v-o.originalStart,o.modifiedLength=f-o.modifiedStart,r.originalStart=v+s,r.modifiedStart=f+s,r.originalLength=l-r.originalStart,r.modifiedLength=p-r.modifiedStart)}}}return e}_findBetterContiguousSequence(e,t,n,o,r){if(t<r||o<r)return null;let s=e+t-r+1,a=n+o-r+1,l=0,c=0,u=0;for(let p=e;p<s;p++)for(let h=n;h<a;h++){let m=this._contiguousSequenceScore(p,h,r);m>0&&m>l&&(l=m,c=p,u=h)}return l>0?[c,u]:null}_contiguousSequenceScore(e,t,n){let o=0;for(let r=0;r<n;r++){if(!this.ElementsAreEqual(e+r,t+r))return 0;o+=this._originalStringElements[e+r].length}return o}_OriginalIsBoundary(e){return e<=0||e>=this._originalElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._originalStringElements[e])}_OriginalRegionIsBoundary(e,t){if(this._OriginalIsBoundary(e)||this._OriginalIsBoundary(e-1))return!0;if(t>0){let n=e+t;if(this._OriginalIsBoundary(n-1)||this._OriginalIsBoundary(n))return!0}return!1}_ModifiedIsBoundary(e){return e<=0||e>=this._modifiedElementsOrHash.length-1?!0:this._hasStrings&&/^\s*$/.test(this._modifiedStringElements[e])}_ModifiedRegionIsBoundary(e,t){if(this._ModifiedIsBoundary(e)||this._ModifiedIsBoundary(e-1))return!0;if(t>0){let n=e+t;if(this._ModifiedIsBoundary(n-1)||this._ModifiedIsBoundary(n))return!0}return!1}_boundaryScore(e,t,n,o){let r=this._OriginalRegionIsBoundary(e,t)?1:0,s=this._ModifiedRegionIsBoundary(n,o)?1:0;return r+s}ConcatenateChanges(e,t){let n=[];if(e.length===0||t.length===0)return t.length>0?t:e;if(this.ChangesOverlap(e[e.length-1],t[0],n)){let o=new Array(e.length+t.length-1);return Ms.Copy(e,0,o,0,e.length-1),o[e.length-1]=n[0],Ms.Copy(t,1,o,e.length,t.length-1),o}else{let o=new Array(e.length+t.length);return Ms.Copy(e,0,o,0,e.length),Ms.Copy(t,0,o,e.length,t.length),o}}ChangesOverlap(e,t,n){if(As.Assert(e.originalStart<=t.originalStart,"Left change is not less than or equal to right change"),As.Assert(e.modifiedStart<=t.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=t.originalStart||e.modifiedStart+e.modifiedLength>=t.modifiedStart){let o=e.originalStart,r=e.originalLength,s=e.modifiedStart,a=e.modifiedLength;return e.originalStart+e.originalLength>=t.originalStart&&(r=t.originalStart+t.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=t.modifiedStart&&(a=t.modifiedStart+t.modifiedLength-e.modifiedStart),n[0]=new So(o,r,s,a),!0}else return n[0]=null,!1}ClipDiagonalBound(e,t,n,o){if(e>=0&&e<o)return e;let r=n,s=o-n-1,a=t%2===0;if(e<0){let l=r%2===0;return a===l?0:1}else{let l=s%2===0;return a===l?o-1:o-2}}};var Ux={ICodeEditor:"vs.editor.ICodeEditor",IDiffEditor:"vs.editor.IDiffEditor"};function yN(i,e,t){let n=0;for(let r=0;r<i.length;r++)i.charAt(r)==="	"?n=Br.nextIndentTabStop(n,e):n++;let o="";if(!t){let r=Math.floor(n/e);n=n%e;for(let s=0;s<r;s++)o+="	"}for(let r=0;r<n;r++)o+=" ";return o}function Vx(i,e,t){let n=Lr(i);return n===-1&&(n=i.length),yN(i.substring(0,n),e,t)+i.substring(n)}function P1(i){return`--vscode-${i.replace(/\./g,"-")}`}function G(i){return`var(${P1(i)})`}function O1(i,e){return`var(${P1(i)}, ${e})`}function IN(i){return i!==null&&typeof i=="object"&&"light"in i&&"dark"in i}var xN={ColorContribution:"base.contributions.colors"},SN="default",zx=class{_onDidChangeSchema=new C;onDidChangeSchema=this._onDidChangeSchema.event;colorsById;colorSchema={type:"object",properties:{}};colorReferenceSchema={type:"string",enum:[],enumDescriptions:[]};constructor(){this.colorsById={}}notifyThemeUpdate(e){for(let t of Object.keys(this.colorsById)){let n=e.getColor(t);n&&(this.colorSchema.properties[t].oneOf[0].defaultSnippets[0].body=`\${1:${n.toString()}}`)}this._onDidChangeSchema.fire()}registerColor(e,t,n,o=!1,r){let s={id:e,description:n,defaults:t,needsTransparency:o,deprecationMessage:r};this.colorsById[e]=s;let a={type:"string",format:"color-hex",defaultSnippets:[{body:"${1:#ff0000}"}]};return r&&(a.deprecationMessage=r),o&&(a.pattern="^#(?:(?<rgba>[0-9a-fA-f]{3}[0-9a-eA-E])|(?:[0-9a-fA-F]{6}(?:(?![fF]{2})(?:[0-9a-fA-F]{2}))))?$",a.patternErrorMessage=d("transparecyRequired","This color must be transparent or it will obscure content")),this.colorSchema.properties[e]={description:n,oneOf:[a,{type:"string",const:SN,description:d("useDefault","Use the default color.")}]},this.colorReferenceSchema.enum.push(e),this.colorReferenceSchema.enumDescriptions.push(n),this._onDidChangeSchema.fire(),e}deregisterColor(e){delete this.colorsById[e],delete this.colorSchema.properties[e];let t=this.colorReferenceSchema.enum.indexOf(e);t!==-1&&(this.colorReferenceSchema.enum.splice(t,1),this.colorReferenceSchema.enumDescriptions.splice(t,1)),this._onDidChangeSchema.fire()}getColors(){return Object.keys(this.colorsById).map(e=>this.colorsById[e])}resolveDefaultColor(e,t){let n=this.colorsById[e];if(n?.defaults){let o=IN(n.defaults)?n.defaults[t.type]:n.defaults;return Eo(o,t)}}getColorSchema(){return this.colorSchema}getColorReferenceSchema(){return this.colorReferenceSchema}toString(){let e=(t,n)=>{let o=t.indexOf(".")===-1?0:1,r=n.indexOf(".")===-1?0:1;return o!==r?o-r:t.localeCompare(n)};return Object.keys(this.colorsById).sort(e).map(t=>`- \`${t}\`: ${this.colorsById[t].description}`).join(`
`)}},Gm=new zx;Ae.add(xN.ColorContribution,Gm);function I(i,e,t,n,o){return Gm.registerColor(i,e,t,n,o)}function EN(i,e){switch(i.op){case 0:return Eo(i.value,e)?.darken(i.factor);case 1:return Eo(i.value,e)?.lighten(i.factor);case 2:return Eo(i.value,e)?.transparent(i.factor);case 3:{let t=Eo(i.background,e);return t?Eo(i.value,e)?.makeOpaque(t):Eo(i.value,e)}case 4:for(let t of i.values){let n=Eo(t,e);if(n)return n}return;case 6:return Eo(e.defines(i.if)?i.then:i.else,e);case 5:{let t=Eo(i.value,e);if(!t)return;let n=Eo(i.background,e);return n?t.isDarkerThan(n)?B.getLighterColor(t,n,i.factor).transparent(i.transparency):B.getDarkerColor(t,n,i.factor).transparent(i.transparency):t.transparent(i.factor*i.transparency)}default:throw rv(i)}}function Xi(i,e){return{op:0,value:i,factor:e}}function $n(i,e){return{op:1,value:i,factor:e}}function Ie(i,e){return{op:2,value:i,factor:e}}function Hx(...i){return{op:4,values:i}}function A1(i,e,t){return{op:6,if:i,then:e,else:t}}function Kx(i,e,t,n){return{op:5,value:i,background:e,factor:t,transparency:n}}function Eo(i,e){if(i!==null){if(typeof i=="string")return i[0]==="#"?B.fromHex(i):e.getColor(i);if(i instanceof B)return i;if(typeof i=="object")return EN(i,e)}}var M1="vscode://schemas/workbench-colors",N1=Ae.as(Xo.JSONContribution);N1.registerSchema(M1,Gm.getColorSchema());var R1=new Hi(()=>N1.notifySchemaChanged(M1),200);Gm.onDidChangeSchema(()=>{R1.isScheduled()||R1.schedule()});var ze=I("foreground",{dark:"#CCCCCC",light:"#616161",hcDark:"#FFFFFF",hcLight:"#292929"},d("foreground","Overall foreground color. This color is only used if not overridden by a component.")),Vce=I("disabledForeground",{dark:"#CCCCCC80",light:"#61616180",hcDark:"#A5A5A5",hcLight:"#7F7F7F"},d("disabledForeground","Overall foreground for disabled elements. This color is only used if not overridden by a component.")),zce=I("errorForeground",{dark:"#F48771",light:"#A1260D",hcDark:"#F48771",hcLight:"#B5200D"},d("errorForeground","Overall foreground color for error messages. This color is only used if not overridden by a component.")),Hce=I("descriptionForeground",{light:"#717171",dark:Ie(ze,.7),hcDark:Ie(ze,.7),hcLight:Ie(ze,.7)},d("descriptionForeground","Foreground color for description text providing additional information, for example for a label.")),Zu=I("icon.foreground",{dark:"#C5C5C5",light:"#424242",hcDark:"#FFFFFF",hcLight:"#292929"},d("iconForeground","The default color for icons in the workbench.")),Si=I("focusBorder",{dark:"#007FD4",light:"#0090F1",hcDark:"#F38518",hcLight:"#006BBD"},d("focusBorder","Overall border color for focused elements. This color is only used if not overridden by a component.")),_e=I("contrastBorder",{light:null,dark:null,hcDark:"#6FC3DF",hcLight:"#0F4A85"},d("contrastBorder","An extra border around elements to separate them from others for greater contrast.")),gt=I("contrastActiveBorder",{light:null,dark:null,hcDark:Si,hcLight:Si},d("activeContrastBorder","An extra border around active elements to separate them from others for greater contrast.")),Kce=I("selection.background",null,d("selectionBackground","The background color of text selections in the workbench (e.g. for input fields or text areas). Note that this does not apply to selections within the editor.")),qm=I("textLink.foreground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},d("textLinkForeground","Foreground color for links in text.")),Gce=I("textLink.activeForeground",{light:"#006AB1",dark:"#3794FF",hcDark:"#21A6FF",hcLight:"#0F4A85"},d("textLinkActiveForeground","Foreground color for links in text when clicked on and on mouse hover.")),qce=I("textSeparator.foreground",{light:"#0000002e",dark:"#ffffff2e",hcDark:B.black,hcLight:"#292929"},d("textSeparatorForeground","Color for text separators.")),$ce=I("textPreformat.foreground",{light:"#A31515",dark:"#D7BA7D",hcDark:"#000000",hcLight:"#FFFFFF"},d("textPreformatForeground","Foreground color for preformatted text segments.")),jce=I("textPreformat.background",{light:"#0000001A",dark:"#FFFFFF1A",hcDark:"#FFFFFF",hcLight:"#09345f"},d("textPreformatBackground","Background color for preformatted text segments.")),Yce=I("textBlockQuote.background",{light:"#f2f2f2",dark:"#222222",hcDark:null,hcLight:"#F2F2F2"},d("textBlockQuoteBackground","Background color for block quotes in text.")),Qce=I("textBlockQuote.border",{light:"#007acc80",dark:"#007acc80",hcDark:B.white,hcLight:"#292929"},d("textBlockQuoteBorder","Border color for block quotes in text.")),Xce=I("textCodeBlock.background",{light:"#dcdcdc66",dark:"#0a0a0a66",hcDark:B.black,hcLight:"#F2F2F2"},d("textCodeBlockBackground","Background color for code blocks in text."));var nue=I("sash.hoverBorder",Si,d("sashActiveBorder","Border color of active sashes.")),vd=I("badge.background",{dark:"#4D4D4D",light:"#C4C4C4",hcDark:B.black,hcLight:"#0F4A85"},d("badgeBackground","Badge background color. Badges are small information labels, e.g. for search results count.")),F1=I("badge.foreground",{dark:B.white,light:"#333",hcDark:B.white,hcLight:B.white},d("badgeForeground","Badge foreground color. Badges are small information labels, e.g. for search results count.")),ep=I("scrollbar.shadow",{dark:"#000000",light:"#DDDDDD",hcDark:null,hcLight:null},d("scrollbarShadow","Scrollbar shadow to indicate that the view is scrolled.")),$m=I("scrollbarSlider.background",{dark:B.fromHex("#797979").transparent(.4),light:B.fromHex("#646464").transparent(.4),hcDark:Ie(_e,.6),hcLight:Ie(_e,.4)},d("scrollbarSliderBackground","Scrollbar slider background color.")),jm=I("scrollbarSlider.hoverBackground",{dark:B.fromHex("#646464").transparent(.7),light:B.fromHex("#646464").transparent(.7),hcDark:Ie(_e,.8),hcLight:Ie(_e,.8)},d("scrollbarSliderHoverBackground","Scrollbar slider background color when hovering.")),Ym=I("scrollbarSlider.activeBackground",{dark:B.fromHex("#BFBFBF").transparent(.4),light:B.fromHex("#000000").transparent(.6),hcDark:_e,hcLight:_e},d("scrollbarSliderActiveBackground","Scrollbar slider background color when clicked on.")),B1=I("progressBar.background",{dark:B.fromHex("#0E70C0"),light:B.fromHex("#0E70C0"),hcDark:_e,hcLight:_e},d("progressBarBackground","Background color of the progress bar that can show for long running operations."));var qa=I("editor.background",{light:"#ffffff",dark:"#1E1E1E",hcDark:B.black,hcLight:B.white},d("editorBackground","Editor background color.")),lue=I("editor.foreground",{light:"#333333",dark:"#BBBBBB",hcDark:B.white,hcLight:ze},d("editorForeground","Editor default foreground color.")),due=I("editorStickyScroll.background",qa,d("editorStickyScrollBackground","Background color of sticky scroll in the editor")),cue=I("editorStickyScrollHover.background",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:null,hcLight:B.fromHex("#0F4A85").transparent(.1)},d("editorStickyScrollHoverBackground","Background color of sticky scroll on hover in the editor")),uue=I("editorStickyScroll.border",{dark:null,light:null,hcDark:_e,hcLight:_e},d("editorStickyScrollBorder","Border color of sticky scroll in the editor")),pue=I("editorStickyScroll.shadow",ep,d("editorStickyScrollShadow"," Shadow color of sticky scroll in the editor")),Kt=I("editorWidget.background",{dark:"#252526",light:"#F3F3F3",hcDark:"#0C141F",hcLight:B.white},d("editorWidgetBackground","Background color of editor widgets, such as find/replace.")),$a=I("editorWidget.foreground",ze,d("editorWidgetForeground","Foreground color of editor widgets, such as find/replace.")),jx=I("editorWidget.border",{dark:"#454545",light:"#C8C8C8",hcDark:_e,hcLight:_e},d("editorWidgetBorder","Border color of editor widgets. The color is only used if the widget chooses to have a border and if the color is not overridden by a widget.")),hue=I("editorWidget.resizeBorder",null,d("editorWidgetResizeBorder","Border color of the resize bar of editor widgets. The color is only used if the widget chooses to have a resize border and if the color is not overridden by a widget.")),gue=I("editorError.background",null,d("editorError.background","Background color of error text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Yx=I("editorError.foreground",{dark:"#F14C4C",light:"#E51400",hcDark:"#F48771",hcLight:"#B5200D"},d("editorError.foreground","Foreground color of error squigglies in the editor.")),mue=I("editorError.border",{dark:null,light:null,hcDark:B.fromHex("#E47777").transparent(.8),hcLight:"#B5200D"},d("errorBorder","If set, color of double underlines for errors in the editor.")),q1=I("editorWarning.background",null,d("editorWarning.background","Background color of warning text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),tr=I("editorWarning.foreground",{dark:"#CCA700",light:"#BF8803",hcDark:"#FFD370",hcLight:"#895503"},d("editorWarning.foreground","Foreground color of warning squigglies in the editor.")),Sd=I("editorWarning.border",{dark:null,light:null,hcDark:B.fromHex("#FFCC00").transparent(.8),hcLight:B.fromHex("#FFCC00").transparent(.8)},d("warningBorder","If set, color of double underlines for warnings in the editor.")),fue=I("editorInfo.background",null,d("editorInfo.background","Background color of info text in the editor. The color must not be opaque so as not to hide underlying decorations."),!0),Ur=I("editorInfo.foreground",{dark:"#3794FF",light:"#1a85ff",hcDark:"#3794FF",hcLight:"#1a85ff"},d("editorInfo.foreground","Foreground color of info squigglies in the editor.")),Ed=I("editorInfo.border",{dark:null,light:null,hcDark:B.fromHex("#3794FF").transparent(.8),hcLight:"#292929"},d("infoBorder","If set, color of double underlines for infos in the editor.")),bue=I("editorHint.foreground",{dark:B.fromHex("#eeeeee").transparent(.7),light:"#6c6c6c",hcDark:null,hcLight:null},d("editorHint.foreground","Foreground color of hint squigglies in the editor.")),vue=I("editorHint.border",{dark:null,light:null,hcDark:B.fromHex("#eeeeee").transparent(.8),hcLight:"#292929"},d("hintBorder","If set, color of double underlines for hints in the editor.")),yue=I("editorLink.activeForeground",{dark:"#4E94CE",light:B.blue,hcDark:B.cyan,hcLight:"#292929"},d("activeLinkForeground","Color of active links.")),yd=I("editor.selectionBackground",{light:"#ADD6FF",dark:"#264F78",hcDark:"#f3f518",hcLight:"#0F4A85"},d("editorSelectionBackground","Color of the editor selection.")),Iue=I("editor.selectionForeground",{light:null,dark:null,hcDark:"#000000",hcLight:B.white},d("editorSelectionForeground","Color of the selected text for high contrast.")),xue=I("editor.inactiveSelectionBackground",{light:Ie(yd,.5),dark:Ie(yd,.5),hcDark:Ie(yd,.7),hcLight:Ie(yd,.5)},d("editorInactiveSelection","Color of the selection in an inactive editor. The color must not be opaque so as not to hide underlying decorations."),!0),Sue=I("editor.selectionHighlightBackground",{light:Kx(yd,qa,.3,.6),dark:Kx(yd,qa,.3,.6),hcDark:null,hcLight:null},d("editorSelectionHighlight","Color for regions with the same content as the selection. The color must not be opaque so as not to hide underlying decorations."),!0),Eue=I("editor.selectionHighlightBorder",{light:null,dark:null,hcDark:gt,hcLight:gt},d("editorSelectionHighlightBorder","Border color for regions with the same content as the selection.")),Cue=I("editor.findMatchBackground",{light:"#A8AC94",dark:"#515C6A",hcDark:null,hcLight:null},d("editorFindMatch","Color of the current search match.")),wue=I("editor.findMatchForeground",null,d("editorFindMatchForeground","Text color of the current search match.")),Co=I("editor.findMatchHighlightBackground",{light:"#EA5C0055",dark:"#EA5C0055",hcDark:null,hcLight:null},d("findMatchHighlight","Color of the other search matches. The color must not be opaque so as not to hide underlying decorations."),!0),Tue=I("editor.findMatchHighlightForeground",null,d("findMatchHighlightForeground","Foreground color of the other search matches."),!0),kue=I("editor.findRangeHighlightBackground",{dark:"#3a3d4166",light:"#b4b4b44d",hcDark:null,hcLight:null},d("findRangeHighlight","Color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),Due=I("editor.findMatchBorder",{light:null,dark:null,hcDark:gt,hcLight:gt},d("editorFindMatchBorder","Border color of the current search match.")),Ns=I("editor.findMatchHighlightBorder",{light:null,dark:null,hcDark:gt,hcLight:gt},d("findMatchHighlightBorder","Border color of the other search matches.")),_ue=I("editor.findRangeHighlightBorder",{dark:null,light:null,hcDark:Ie(gt,.4),hcLight:Ie(gt,.4)},d("findRangeHighlightBorder","Border color of the range limiting the search. The color must not be opaque so as not to hide underlying decorations."),!0),Lue=I("editor.hoverHighlightBackground",{light:"#ADD6FF26",dark:"#264f7840",hcDark:"#ADD6FF26",hcLight:null},d("hoverHighlight","Highlight below the word for which a hover is shown. The color must not be opaque so as not to hide underlying decorations."),!0),W1=I("editorHoverWidget.background",Kt,d("hoverBackground","Background color of the editor hover.")),Rue=I("editorHoverWidget.foreground",$a,d("hoverForeground","Foreground color of the editor hover.")),Pue=I("editorHoverWidget.border",jx,d("hoverBorder","Border color of the editor hover.")),Oue=I("editorHoverWidget.statusBarBackground",{dark:$n(W1,.2),light:Xi(W1,.05),hcDark:Kt,hcLight:Kt},d("statusBarBackground","Background color of the editor hover status bar.")),$1=I("editorInlayHint.foreground",{dark:"#969696",light:"#969696",hcDark:B.white,hcLight:B.black},d("editorInlayHintForeground","Foreground color of inline hints")),j1=I("editorInlayHint.background",{dark:Ie(vd,.1),light:Ie(vd,.1),hcDark:Ie(B.white,.1),hcLight:Ie(vd,.1)},d("editorInlayHintBackground","Background color of inline hints")),Aue=I("editorInlayHint.typeForeground",$1,d("editorInlayHintForegroundTypes","Foreground color of inline hints for types")),Mue=I("editorInlayHint.typeBackground",j1,d("editorInlayHintBackgroundTypes","Background color of inline hints for types")),Nue=I("editorInlayHint.parameterForeground",$1,d("editorInlayHintForegroundParameter","Foreground color of inline hints for parameters")),Fue=I("editorInlayHint.parameterBackground",j1,d("editorInlayHintBackgroundParameter","Background color of inline hints for parameters")),CN=I("editorLightBulb.foreground",{dark:"#FFCC00",light:"#DDB100",hcDark:"#FFCC00",hcLight:"#007ACC"},d("editorLightBulbForeground","The color used for the lightbulb actions icon.")),Bue=I("editorLightBulbAutoFix.foreground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},d("editorLightBulbAutoFixForeground","The color used for the lightbulb auto fix actions icon.")),Wue=I("editorLightBulbAi.foreground",CN,d("editorLightBulbAiForeground","The color used for the lightbulb AI icon.")),Uue=I("editor.snippetTabstopHighlightBackground",{dark:new B(new Te(124,124,124,.3)),light:new B(new Te(10,50,100,.2)),hcDark:new B(new Te(124,124,124,.3)),hcLight:new B(new Te(10,50,100,.2))},d("snippetTabstopHighlightBackground","Highlight background color of a snippet tabstop.")),Vue=I("editor.snippetTabstopHighlightBorder",null,d("snippetTabstopHighlightBorder","Highlight border color of a snippet tabstop.")),zue=I("editor.snippetFinalTabstopHighlightBackground",null,d("snippetFinalTabstopHighlightBackground","Highlight background color of the final tabstop of a snippet.")),Hue=I("editor.snippetFinalTabstopHighlightBorder",{dark:"#525252",light:new B(new Te(10,50,100,.5)),hcDark:"#525252",hcLight:"#292929"},d("snippetFinalTabstopHighlightBorder","Highlight border color of the final tabstop of a snippet.")),U1=new B(new Te(155,185,85,.2)),V1=new B(new Te(255,0,0,.2)),Kue=I("diffEditor.insertedTextBackground",{dark:"#9ccc2c33",light:"#9ccc2c40",hcDark:null,hcLight:null},d("diffEditorInserted","Background color for text that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),Gue=I("diffEditor.removedTextBackground",{dark:"#ff000033",light:"#ff000033",hcDark:null,hcLight:null},d("diffEditorRemoved","Background color for text that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),que=I("diffEditor.insertedLineBackground",{dark:U1,light:U1,hcDark:null,hcLight:null},d("diffEditorInsertedLines","Background color for lines that got inserted. The color must not be opaque so as not to hide underlying decorations."),!0),$ue=I("diffEditor.removedLineBackground",{dark:V1,light:V1,hcDark:null,hcLight:null},d("diffEditorRemovedLines","Background color for lines that got removed. The color must not be opaque so as not to hide underlying decorations."),!0),jue=I("diffEditorGutter.insertedLineBackground",null,d("diffEditorInsertedLineGutter","Background color for the margin where lines got inserted.")),Yue=I("diffEditorGutter.removedLineBackground",null,d("diffEditorRemovedLineGutter","Background color for the margin where lines got removed.")),Que=I("diffEditorOverview.insertedForeground",null,d("diffEditorOverviewInserted","Diff overview ruler foreground for inserted content.")),Xue=I("diffEditorOverview.removedForeground",null,d("diffEditorOverviewRemoved","Diff overview ruler foreground for removed content.")),Jue=I("diffEditor.insertedTextBorder",{dark:null,light:null,hcDark:"#33ff2eff",hcLight:"#374E06"},d("diffEditorInsertedOutline","Outline color for the text that got inserted.")),Zue=I("diffEditor.removedTextBorder",{dark:null,light:null,hcDark:"#FF008F",hcLight:"#AD0707"},d("diffEditorRemovedOutline","Outline color for text that got removed.")),epe=I("diffEditor.border",{dark:null,light:null,hcDark:_e,hcLight:_e},d("diffEditorBorder","Border color between the two text editors.")),tpe=I("diffEditor.diagonalFill",{dark:"#cccccc33",light:"#22222233",hcDark:null,hcLight:null},d("diffDiagonalFill","Color of the diff editor's diagonal fill. The diagonal fill is used in side-by-side diff views.")),npe=I("diffEditor.unchangedRegionBackground","sideBar.background",d("diffEditor.unchangedRegionBackground","The background color of unchanged blocks in the diff editor.")),ipe=I("diffEditor.unchangedRegionForeground","foreground",d("diffEditor.unchangedRegionForeground","The foreground color of unchanged blocks in the diff editor.")),ope=I("diffEditor.unchangedCodeBackground",{dark:"#74747429",light:"#b8b8b829",hcDark:null,hcLight:null},d("diffEditor.unchangedCodeBackground","The background color of unchanged code in the diff editor.")),Cd=I("widget.shadow",{dark:Ie(B.black,.36),light:Ie(B.black,.16),hcDark:null,hcLight:null},d("widgetShadow","Shadow color of widgets such as find/replace inside the editor.")),rpe=I("widget.border",{dark:null,light:null,hcDark:_e,hcLight:_e},d("widgetBorder","Border color of widgets such as find/replace inside the editor.")),z1=I("toolbar.hoverBackground",{dark:"#5a5d5e50",light:"#b8b8b850",hcDark:null,hcLight:null},d("toolbarHoverBackground","Toolbar background when hovering over actions using the mouse")),spe=I("toolbar.hoverOutline",{dark:null,light:null,hcDark:gt,hcLight:gt},d("toolbarHoverOutline","Toolbar outline when hovering over actions using the mouse")),ape=I("toolbar.activeBackground",{dark:$n(z1,.1),light:Xi(z1,.1),hcDark:null,hcLight:null},d("toolbarActiveBackground","Toolbar background when holding the mouse over actions")),Y1=I("breadcrumb.foreground",Ie(ze,.8),d("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),Q1=I("breadcrumb.background",qa,d("breadcrumbsBackground","Background color of breadcrumb items.")),Qx=I("breadcrumb.focusForeground",{light:Xi(ze,.2),dark:$n(ze,.1),hcDark:$n(ze,.1),hcLight:$n(ze,.1)},d("breadcrumbsFocusForeground","Color of focused breadcrumb items.")),X1=I("breadcrumb.activeSelectionForeground",{light:Xi(ze,.2),dark:$n(ze,.1),hcDark:$n(ze,.1),hcLight:$n(ze,.1)},d("breadcrumbsSelectedForeground","Color of selected breadcrumb items.")),lpe=I("breadcrumbPicker.background",Kt,d("breadcrumbsSelectedBackground","Background color of breadcrumb item picker.")),J1=.5,H1=B.fromHex("#40C8AE").transparent(J1),K1=B.fromHex("#40A6FF").transparent(J1),G1=B.fromHex("#606060").transparent(.4),Xx=.4,Id=1,Gx=I("merge.currentHeaderBackground",{dark:H1,light:H1,hcDark:null,hcLight:null},d("mergeCurrentHeaderBackground","Current header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),dpe=I("merge.currentContentBackground",Ie(Gx,Xx),d("mergeCurrentContentBackground","Current content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),qx=I("merge.incomingHeaderBackground",{dark:K1,light:K1,hcDark:null,hcLight:null},d("mergeIncomingHeaderBackground","Incoming header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),cpe=I("merge.incomingContentBackground",Ie(qx,Xx),d("mergeIncomingContentBackground","Incoming content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),$x=I("merge.commonHeaderBackground",{dark:G1,light:G1,hcDark:null,hcLight:null},d("mergeCommonHeaderBackground","Common ancestor header background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),upe=I("merge.commonContentBackground",Ie($x,Xx),d("mergeCommonContentBackground","Common ancestor content background in inline merge-conflicts. The color must not be opaque so as not to hide underlying decorations."),!0),xd=I("merge.border",{dark:null,light:null,hcDark:"#C3DF6F",hcLight:"#007ACC"},d("mergeBorder","Border color on headers and the splitter in inline merge-conflicts.")),ppe=I("editorOverviewRuler.currentContentForeground",{dark:Ie(Gx,Id),light:Ie(Gx,Id),hcDark:xd,hcLight:xd},d("overviewRulerCurrentContentForeground","Current overview ruler foreground for inline merge-conflicts.")),hpe=I("editorOverviewRuler.incomingContentForeground",{dark:Ie(qx,Id),light:Ie(qx,Id),hcDark:xd,hcLight:xd},d("overviewRulerIncomingContentForeground","Incoming overview ruler foreground for inline merge-conflicts.")),gpe=I("editorOverviewRuler.commonContentForeground",{dark:Ie($x,Id),light:Ie($x,Id),hcDark:xd,hcLight:xd},d("overviewRulerCommonContentForeground","Common ancestor overview ruler foreground for inline merge-conflicts.")),mpe=I("editorOverviewRuler.findMatchForeground",{dark:"#d186167e",light:"#d186167e",hcDark:"#AB5A00",hcLight:"#AB5A00"},d("overviewRulerFindMatchForeground","Overview ruler marker color for find matches. The color must not be opaque so as not to hide underlying decorations."),!0),fpe=I("editorOverviewRuler.selectionHighlightForeground","#A0A0A0CC",d("overviewRulerSelectionHighlightForeground","Overview ruler marker color for selection highlights. The color must not be opaque so as not to hide underlying decorations."),!0),Z1=I("problemsErrorIcon.foreground",Yx,d("problemsErrorIconForeground","The color used for the problems error icon.")),e0=I("problemsWarningIcon.foreground",tr,d("problemsWarningIconForeground","The color used for the problems warning icon.")),t0=I("problemsInfoIcon.foreground",Ur,d("problemsInfoIconForeground","The color used for the problems info icon."));var n0=I("minimap.findMatchHighlight",{light:"#d18616",dark:"#d18616",hcDark:"#AB5A00",hcLight:"#0F4A85"},d("minimapFindMatchHighlight","Minimap marker color for find matches."),!0),Spe=I("minimap.selectionOccurrenceHighlight",{light:"#c9c9c9",dark:"#676767",hcDark:"#ffffff",hcLight:"#0F4A85"},d("minimapSelectionOccurrenceHighlight","Minimap marker color for repeating editor selections."),!0),Epe=I("minimap.selectionHighlight",{light:"#ADD6FF",dark:"#264F78",hcDark:"#ffffff",hcLight:"#0F4A85"},d("minimapSelectionHighlight","Minimap marker color for the editor selection."),!0),Cpe=I("minimap.infoHighlight",{dark:Ur,light:Ur,hcDark:Ed,hcLight:Ed},d("minimapInfo","Minimap marker color for infos.")),wpe=I("minimap.warningHighlight",{dark:tr,light:tr,hcDark:Sd,hcLight:Sd},d("overviewRuleWarning","Minimap marker color for warnings.")),Tpe=I("minimap.errorHighlight",{dark:new B(new Te(255,18,18,.7)),light:new B(new Te(255,18,18,.7)),hcDark:new B(new Te(255,50,50,1)),hcLight:"#B5200D"},d("minimapError","Minimap marker color for errors.")),kpe=I("minimap.background",null,d("minimapBackground","Minimap background color.")),Dpe=I("minimap.foregroundOpacity",B.fromHex("#000f"),d("minimapForegroundOpacity",'Opacity of foreground elements rendered in the minimap. For example, "#000000c0" will render the elements with 75% opacity.')),_pe=I("minimapSlider.background",Ie($m,.5),d("minimapSliderBackground","Minimap slider background color.")),Lpe=I("minimapSlider.hoverBackground",Ie(jm,.5),d("minimapSliderHoverBackground","Minimap slider background color when hovering.")),Rpe=I("minimapSlider.activeBackground",Ie(Ym,.5),d("minimapSliderActiveBackground","Minimap slider background color when clicked on."));var Fpe=I("charts.foreground",ze,d("chartsForeground","The foreground color used in charts.")),Bpe=I("charts.lines",Ie(ze,.5),d("chartsLines","The color used for horizontal lines in charts.")),Wpe=I("charts.red",Yx,d("chartsRed","The red color used in chart visualizations.")),Upe=I("charts.blue",Ur,d("chartsBlue","The blue color used in chart visualizations.")),Vpe=I("charts.yellow",tr,d("chartsYellow","The yellow color used in chart visualizations.")),zpe=I("charts.orange",n0,d("chartsOrange","The orange color used in chart visualizations.")),Hpe=I("charts.green",{dark:"#89D185",light:"#388A34",hcDark:"#89D185",hcLight:"#374e06"},d("chartsGreen","The green color used in chart visualizations.")),Kpe=I("charts.purple",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},d("chartsPurple","The purple color used in chart visualizations."));var Xm=I("input.background",{dark:"#3C3C3C",light:B.white,hcDark:B.black,hcLight:B.white},d("inputBoxBackground","Input box background.")),i0=I("input.foreground",ze,d("inputBoxForeground","Input box foreground.")),o0=I("input.border",{dark:null,light:null,hcDark:_e,hcLight:_e},d("inputBoxBorder","Input box border.")),Jx=I("inputOption.activeBorder",{dark:"#007ACC",light:"#007ACC",hcDark:_e,hcLight:_e},d("inputBoxActiveOptionBorder","Border color of activated options in input fields.")),wN=I("inputOption.hoverBackground",{dark:"#5a5d5e80",light:"#b8b8b850",hcDark:null,hcLight:null},d("inputOption.hoverBackground","Background color of activated options in input fields.")),Zx=I("inputOption.activeBackground",{dark:Ie(Si,.4),light:Ie(Si,.2),hcDark:B.transparent,hcLight:B.transparent},d("inputOption.activeBackground","Background hover color of options in input fields.")),eS=I("inputOption.activeForeground",{dark:B.white,light:B.black,hcDark:ze,hcLight:ze},d("inputOption.activeForeground","Foreground color of activated options in input fields.")),Qpe=I("input.placeholderForeground",{light:Ie(ze,.5),dark:Ie(ze,.5),hcDark:Ie(ze,.7),hcLight:Ie(ze,.7)},d("inputPlaceholderForeground","Input box foreground color for placeholder text.")),r0=I("inputValidation.infoBackground",{dark:"#063B49",light:"#D6ECF2",hcDark:B.black,hcLight:B.white},d("inputValidationInfoBackground","Input validation background color for information severity.")),s0=I("inputValidation.infoForeground",{dark:null,light:null,hcDark:null,hcLight:ze},d("inputValidationInfoForeground","Input validation foreground color for information severity.")),a0=I("inputValidation.infoBorder",{dark:"#007acc",light:"#007acc",hcDark:_e,hcLight:_e},d("inputValidationInfoBorder","Input validation border color for information severity.")),l0=I("inputValidation.warningBackground",{dark:"#352A05",light:"#F6F5D2",hcDark:B.black,hcLight:B.white},d("inputValidationWarningBackground","Input validation background color for warning severity.")),d0=I("inputValidation.warningForeground",{dark:null,light:null,hcDark:null,hcLight:ze},d("inputValidationWarningForeground","Input validation foreground color for warning severity.")),c0=I("inputValidation.warningBorder",{dark:"#B89500",light:"#B89500",hcDark:_e,hcLight:_e},d("inputValidationWarningBorder","Input validation border color for warning severity.")),u0=I("inputValidation.errorBackground",{dark:"#5A1D1D",light:"#F2DEDE",hcDark:B.black,hcLight:B.white},d("inputValidationErrorBackground","Input validation background color for error severity.")),p0=I("inputValidation.errorForeground",{dark:null,light:null,hcDark:null,hcLight:ze},d("inputValidationErrorForeground","Input validation foreground color for error severity.")),h0=I("inputValidation.errorBorder",{dark:"#BE1100",light:"#BE1100",hcDark:_e,hcLight:_e},d("inputValidationErrorBorder","Input validation border color for error severity.")),kd=I("dropdown.background",{dark:"#3C3C3C",light:B.white,hcDark:B.black,hcLight:B.white},d("dropdownBackground","Dropdown background.")),g0=I("dropdown.listBackground",{dark:null,light:null,hcDark:B.black,hcLight:B.white},d("dropdownListBackground","Dropdown list background.")),tp=I("dropdown.foreground",{dark:"#F0F0F0",light:ze,hcDark:B.white,hcLight:ze},d("dropdownForeground","Dropdown foreground.")),tS=I("dropdown.border",{dark:kd,light:"#CECECE",hcDark:_e,hcLight:_e},d("dropdownBorder","Dropdown border.")),nS=I("button.foreground",B.white,d("buttonForeground","Button foreground color.")),m0=I("button.separator",Ie(nS,.4),d("buttonSeparator","Button separator color.")),wd=I("button.background",{dark:"#0E639C",light:"#007ACC",hcDark:null,hcLight:"#0F4A85"},d("buttonBackground","Button background color.")),f0=I("button.hoverBackground",{dark:$n(wd,.2),light:Xi(wd,.2),hcDark:wd,hcLight:wd},d("buttonHoverBackground","Button background color when hovering.")),b0=I("button.border",_e,d("buttonBorder","Button border color.")),v0=I("button.secondaryForeground",{dark:B.white,light:B.white,hcDark:B.white,hcLight:ze},d("buttonSecondaryForeground","Secondary button foreground color.")),Qm=I("button.secondaryBackground",{dark:"#3A3D41",light:"#5F6A79",hcDark:null,hcLight:B.white},d("buttonSecondaryBackground","Secondary button background color.")),y0=I("button.secondaryHoverBackground",{dark:$n(Qm,.2),light:Xi(Qm,.2),hcDark:null,hcLight:null},d("buttonSecondaryHoverBackground","Secondary button background color when hovering.")),Td=I("radio.activeForeground",eS,d("radioActiveForeground","Foreground color of active radio option.")),I0=I("radio.activeBackground",Zx,d("radioBackground","Background color of active radio option.")),x0=I("radio.activeBorder",Jx,d("radioActiveBorder","Border color of the active radio option.")),S0=I("radio.inactiveForeground",null,d("radioInactiveForeground","Foreground color of inactive radio option.")),E0=I("radio.inactiveBackground",null,d("radioInactiveBackground","Background color of inactive radio option.")),C0=I("radio.inactiveBorder",{light:Ie(Td,.2),dark:Ie(Td,.2),hcDark:Ie(Td,.4),hcLight:Ie(Td,.2)},d("radioInactiveBorder","Border color of the inactive radio option.")),w0=I("radio.inactiveHoverBackground",wN,d("radioHoverBackground","Background color of inactive active radio option when hovering.")),T0=I("checkbox.background",kd,d("checkbox.background","Background color of checkbox widget.")),Xpe=I("checkbox.selectBackground",Kt,d("checkbox.select.background","Background color of checkbox widget when the element it's in is selected.")),k0=I("checkbox.foreground",tp,d("checkbox.foreground","Foreground color of checkbox widget.")),D0=I("checkbox.border",tS,d("checkbox.border","Border color of checkbox widget.")),Jpe=I("checkbox.selectBorder",Zu,d("checkbox.select.border","Border color of checkbox widget when the element it's in is selected.")),_0=I("keybindingLabel.background",{dark:new B(new Te(128,128,128,.17)),light:new B(new Te(221,221,221,.4)),hcDark:B.transparent,hcLight:B.transparent},d("keybindingLabelBackground","Keybinding label background color. The keybinding label is used to represent a keyboard shortcut.")),L0=I("keybindingLabel.foreground",{dark:B.fromHex("#CCCCCC"),light:B.fromHex("#555555"),hcDark:B.white,hcLight:ze},d("keybindingLabelForeground","Keybinding label foreground color. The keybinding label is used to represent a keyboard shortcut.")),R0=I("keybindingLabel.border",{dark:new B(new Te(51,51,51,.6)),light:new B(new Te(204,204,204,.4)),hcDark:new B(new Te(111,195,223)),hcLight:_e},d("keybindingLabelBorder","Keybinding label border color. The keybinding label is used to represent a keyboard shortcut.")),P0=I("keybindingLabel.bottomBorder",{dark:new B(new Te(68,68,68,.6)),light:new B(new Te(187,187,187,.4)),hcDark:new B(new Te(111,195,223)),hcLight:ze},d("keybindingLabelBottomBorder","Keybinding label border bottom color. The keybinding label is used to represent a keyboard shortcut."));var O0=I("list.focusBackground",null,d("listFocusBackground","List/Tree background color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),A0=I("list.focusForeground",null,d("listFocusForeground","List/Tree foreground color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),M0=I("list.focusOutline",{dark:Si,light:Si,hcDark:gt,hcLight:gt},d("listFocusOutline","List/Tree outline color for the focused item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),N0=I("list.focusAndSelectionOutline",null,d("listFocusAndSelectionOutline","List/Tree outline color for the focused item when the list/tree is active and selected. An active list/tree has keyboard focus, an inactive does not.")),nr=I("list.activeSelectionBackground",{dark:"#04395E",light:"#0060C0",hcDark:null,hcLight:B.fromHex("#0F4A85").transparent(.1)},d("listActiveSelectionBackground","List/Tree background color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Fs=I("list.activeSelectionForeground",{dark:B.white,light:B.white,hcDark:null,hcLight:null},d("listActiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),Zm=I("list.activeSelectionIconForeground",null,d("listActiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is active. An active list/tree has keyboard focus, an inactive does not.")),F0=I("list.inactiveSelectionBackground",{dark:"#37373D",light:"#E4E6F1",hcDark:null,hcLight:B.fromHex("#0F4A85").transparent(.1)},d("listInactiveSelectionBackground","List/Tree background color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),B0=I("list.inactiveSelectionForeground",null,d("listInactiveSelectionForeground","List/Tree foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),W0=I("list.inactiveSelectionIconForeground",null,d("listInactiveSelectionIconForeground","List/Tree icon foreground color for the selected item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),U0=I("list.inactiveFocusBackground",null,d("listInactiveFocusBackground","List/Tree background color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),V0=I("list.inactiveFocusOutline",null,d("listInactiveFocusOutline","List/Tree outline color for the focused item when the list/tree is inactive. An active list/tree has keyboard focus, an inactive does not.")),iS=I("list.hoverBackground",{dark:"#2A2D2E",light:"#F0F0F0",hcDark:B.white.transparent(.1),hcLight:B.fromHex("#0F4A85").transparent(.1)},d("listHoverBackground","List/Tree background when hovering over items using the mouse.")),oS=I("list.hoverForeground",null,d("listHoverForeground","List/Tree foreground when hovering over items using the mouse.")),z0=I("list.dropBackground",{dark:"#062F4A",light:"#D6EBFF",hcDark:null,hcLight:null},d("listDropBackground","List/Tree drag and drop background when moving items over other items when using the mouse.")),H0=I("list.dropBetweenBackground",{dark:Zu,light:Zu,hcDark:null,hcLight:null},d("listDropBetweenBackground","List/Tree drag and drop border color when moving items between items when using the mouse.")),Jm=I("list.highlightForeground",{dark:"#2AAAFF",light:"#0066BF",hcDark:Si,hcLight:Si},d("highlight","List/Tree foreground color of the match highlights when searching inside the list/tree.")),ohe=I("list.focusHighlightForeground",{dark:Jm,light:A1(nr,Jm,"#BBE7FF"),hcDark:Jm,hcLight:Jm},d("listFocusHighlightForeground","List/Tree foreground color of the match highlights on actively focused items when searching inside the list/tree.")),rhe=I("list.invalidItemForeground",{dark:"#B89500",light:"#B89500",hcDark:"#B89500",hcLight:"#B5200D"},d("invalidItemForeground","List/Tree foreground color for invalid items, for example an unresolved root in explorer.")),she=I("list.errorForeground",{dark:"#F88070",light:"#B01011",hcDark:null,hcLight:null},d("listErrorForeground","Foreground color of list items containing errors.")),ahe=I("list.warningForeground",{dark:"#CCA700",light:"#855F00",hcDark:null,hcLight:null},d("listWarningForeground","Foreground color of list items containing warnings.")),K0=I("listFilterWidget.background",{light:Xi(Kt,0),dark:$n(Kt,0),hcDark:Kt,hcLight:Kt},d("listFilterWidgetBackground","Background color of the type filter widget in lists and trees.")),G0=I("listFilterWidget.outline",{dark:B.transparent,light:B.transparent,hcDark:"#f38518",hcLight:"#007ACC"},d("listFilterWidgetOutline","Outline color of the type filter widget in lists and trees.")),q0=I("listFilterWidget.noMatchesOutline",{dark:"#BE1100",light:"#BE1100",hcDark:_e,hcLight:_e},d("listFilterWidgetNoMatchesOutline","Outline color of the type filter widget in lists and trees, when there are no matches.")),$0=I("listFilterWidget.shadow",Cd,d("listFilterWidgetShadow","Shadow color of the type filter widget in lists and trees.")),lhe=I("list.filterMatchBackground",{dark:Co,light:Co,hcDark:null,hcLight:null},d("listFilterMatchHighlight","Background color of the filtered match.")),dhe=I("list.filterMatchBorder",{dark:Ns,light:Ns,hcDark:_e,hcLight:gt},d("listFilterMatchHighlightBorder","Border color of the filtered match.")),che=I("list.deemphasizedForeground",{dark:"#8C8C8C",light:"#8E8E90",hcDark:"#A7A8A9",hcLight:"#666666"},d("listDeemphasizedForeground","List/Tree foreground color for items that are deemphasized.")),rS=I("tree.indentGuidesStroke",{dark:"#585858",light:"#a9a9a9",hcDark:"#a9a9a9",hcLight:"#a5a5a5"},d("treeIndentGuidesStroke","Tree stroke color for the indentation guides.")),j0=I("tree.inactiveIndentGuidesStroke",Ie(rS,.4),d("treeInactiveIndentGuidesStroke","Tree stroke color for the indentation guides that are not active.")),Y0=I("tree.tableColumnsBorder",{dark:"#CCCCCC20",light:"#61616120",hcDark:null,hcLight:null},d("tableColumnsBorder","Table border color between columns.")),Q0=I("tree.tableOddRowsBackground",{dark:Ie(ze,.04),light:Ie(ze,.04),hcDark:null,hcLight:null},d("tableOddRowsBackgroundColor","Background color for odd table rows.")),uhe=I("editorActionList.background",Kt,d("editorActionListBackground","Action List background color.")),phe=I("editorActionList.foreground",$a,d("editorActionListForeground","Action List foreground color.")),hhe=I("editorActionList.focusForeground",Fs,d("editorActionListFocusForeground","Action List foreground color for the focused item.")),ghe=I("editorActionList.focusBackground",nr,d("editorActionListFocusBackground","Action List background color for the focused item."));var X0=I("menu.border",{dark:null,light:null,hcDark:_e,hcLight:_e},d("menuBorder","Border color of menus.")),J0=I("menu.foreground",tp,d("menuForeground","Foreground color of menu items.")),Z0=I("menu.background",kd,d("menuBackground","Background color of menu items.")),eD=I("menu.selectionForeground",Fs,d("menuSelectionForeground","Foreground color of the selected menu item in menus.")),tD=I("menu.selectionBackground",nr,d("menuSelectionBackground","Background color of the selected menu item in menus.")),nD=I("menu.selectionBorder",{dark:null,light:null,hcDark:gt,hcLight:gt},d("menuSelectionBorder","Border color of the selected menu item in menus.")),iD=I("menu.separatorBackground",{dark:"#606060",light:"#D4D4D4",hcDark:_e,hcLight:_e},d("menuSeparatorBackground","Color of a separator menu item in menus."));var whe=I("quickInput.background",Kt,d("pickerBackground","Quick picker background color. The quick picker widget is the container for pickers like the command palette.")),The=I("quickInput.foreground",$a,d("pickerForeground","Quick picker foreground color. The quick picker widget is the container for pickers like the command palette.")),khe=I("quickInputTitle.background",{dark:new B(new Te(255,255,255,.105)),light:new B(new Te(0,0,0,.06)),hcDark:"#000000",hcLight:B.white},d("pickerTitleBackground","Quick picker title background color. The quick picker widget is the container for pickers like the command palette.")),rD=I("pickerGroup.foreground",{dark:"#3794FF",light:"#0066BF",hcDark:B.white,hcLight:"#0F4A85"},d("pickerGroupForeground","Quick picker color for grouping labels.")),Dhe=I("pickerGroup.border",{dark:"#3F3F46",light:"#CCCEDB",hcDark:B.white,hcLight:"#0F4A85"},d("pickerGroupBorder","Quick picker color for grouping borders.")),oD=I("quickInput.list.focusBackground",null,"",void 0,d("quickInput.list.focusBackground deprecation","Please use quickInputList.focusBackground instead")),sD=I("quickInputList.focusForeground",Fs,d("quickInput.listFocusForeground","Quick picker foreground color for the focused item.")),aD=I("quickInputList.focusIconForeground",Zm,d("quickInput.listFocusIconForeground","Quick picker icon foreground color for the focused item.")),lD=I("quickInputList.focusBackground",{dark:Hx(oD,nr),light:Hx(oD,nr),hcDark:null,hcLight:null},d("quickInput.listFocusBackground","Quick picker background color for the focused item."));var Ohe=I("search.resultsInfoForeground",{light:ze,dark:Ie(ze,.65),hcDark:ze,hcLight:ze},d("search.resultsInfoForeground","Color of the text in the search viewlet's completion message.")),Ahe=I("searchEditor.findMatchBackground",{light:Ie(Co,.66),dark:Ie(Co,.66),hcDark:Co,hcLight:Co},d("searchEditor.queryMatch","Color of the Search Editor query matches.")),Mhe=I("searchEditor.findMatchBorder",{light:Ie(Ns,.66),dark:Ie(Ns,.66),hcDark:Ns,hcLight:Ns},d("searchEditor.editorFindMatchBorder","Border color of the Search Editor query matches."));var TN={IconContribution:"base.contributions.icons"},kN;(e=>{function i(t,n){let o=t.defaults;for(;Fe.isThemeIcon(o);){let r=Dd.getIcon(o.id);if(!r)return;o=r.defaults}return o}e.getDefinition=i})(kN||={});var DN;(t=>{function i(n){return{weight:n.weight,style:n.style,src:n.src.map(o=>({format:o.format,location:o.location.toString()}))}}t.toJSONObject=i;function e(n){let o=r=>Xt(r)?r:void 0;if(n&&Array.isArray(n.src)&&n.src.every(r=>Xt(r.format)&&Xt(r.location)))return{weight:o(n.weight),style:o(n.style),src:n.src.map(r=>({format:r.format,location:N.parse(r.location)}))}}t.fromJSONObject=e})(DN||={});var sS=class{_onDidChange=new C;onDidChange=this._onDidChange.event;iconsById;iconSchema={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:d("iconDefinition.fontId","The id of the font to use. If not set, the font that is defined first is used.")},fontCharacter:{type:"string",description:d("iconDefinition.fontCharacter","The font character associated with the icon definition.")}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}};iconReferenceSchema={type:"string",pattern:`^${Fe.iconNameExpression}$`,enum:[],enumDescriptions:[]};iconFontsById;constructor(){this.iconsById={},this.iconFontsById={}}registerIcon(e,t,n,o){let r=this.iconsById[e];if(r){if(n&&!r.description){r.description=n,this.iconSchema.properties[e].markdownDescription=`${n} $(${e})`;let l=this.iconReferenceSchema.enum.indexOf(e);l!==-1&&(this.iconReferenceSchema.enumDescriptions[l]=n),this._onDidChange.fire()}return r}let s={id:e,description:n,defaults:t,deprecationMessage:o};this.iconsById[e]=s;let a={$ref:"#/definitions/icons"};return o&&(a.deprecationMessage=o),n&&(a.markdownDescription=`${n}: $(${e})`),this.iconSchema.properties[e]=a,this.iconReferenceSchema.enum.push(e),this.iconReferenceSchema.enumDescriptions.push(n||""),this._onDidChange.fire(),{id:e}}deregisterIcon(e){delete this.iconsById[e],delete this.iconSchema.properties[e];let t=this.iconReferenceSchema.enum.indexOf(e);t!==-1&&(this.iconReferenceSchema.enum.splice(t,1),this.iconReferenceSchema.enumDescriptions.splice(t,1)),this._onDidChange.fire()}getIcons(){return Object.keys(this.iconsById).map(e=>this.iconsById[e])}getIcon(e){return this.iconsById[e]}getIconSchema(){return this.iconSchema}getIconReferenceSchema(){return this.iconReferenceSchema}registerIconFont(e,t){let n=this.iconFontsById[e];return n||(this.iconFontsById[e]=t,this._onDidChange.fire(),t)}deregisterIconFont(e){delete this.iconFontsById[e]}getIconFont(e){return this.iconFontsById[e]}toString(){let e=(r,s)=>r.id.localeCompare(s.id),t=r=>{for(;Fe.isThemeIcon(r.defaults);)r=this.iconsById[r.defaults.id];return`codicon codicon-${r?r.id:""}`},n=[];n.push("| preview     | identifier                        | default codicon ID                | description"),n.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");let o=Object.keys(this.iconsById).map(r=>this.iconsById[r]);for(let r of o.filter(s=>!!s.description).sort(e))n.push(`|<i class="${t(r)}"></i>|${r.id}|${Fe.isThemeIcon(r.defaults)?r.defaults.id:r.id}|${r.description||""}|`);n.push("| preview     | identifier                        "),n.push("| ----------- | --------------------------------- |");for(let r of o.filter(s=>!Fe.isThemeIcon(s.defaults)).sort(e))n.push(`|<i class="${t(r)}"></i>|${r.id}|`);return n.join(`
`)}},Dd=new sS;Ae.add(TN.IconContribution,Dd);function wo(i,e,t,n){return Dd.registerIcon(i,e,t,n)}function _N(){let i=cy();for(let e in i){let t="\\"+i[e].toString(16);Dd.registerIcon(e,{fontCharacter:t})}}_N();var cD="vscode://schemas/icons",uD=Ae.as(Xo.JSONContribution);uD.registerSchema(cD,Dd.getIconSchema());var dD=new Hi(()=>uD.notifySchemaChanged(cD),200);Dd.onDidChange(()=>{dD.isScheduled()||dD.schedule()});var cge=wo("widget-close",j.close,d("widgetClose","Icon for the close action in widgets.")),uge=wo("goto-previous-location",j.arrowUp,d("previousChangeIcon","Icon for goto previous editor location.")),pge=wo("goto-next-location",j.arrowDown,d("nextChangeIcon","Icon for goto next editor location.")),hge=Fe.modify(j.sync,"spin"),gge=Fe.modify(j.loading,"spin");var pD=P("themeService");var Age=j.file,Mge=j.folder;var LN={ThemingContribution:"base.contributions.theming"},aS=class{themingParticipants=[];onThemingParticipantAddedEmitter;constructor(){this.themingParticipants=[],this.onThemingParticipantAddedEmitter=new C}onColorThemeChange(e){return this.themingParticipants.push(e),this.onThemingParticipantAddedEmitter.fire(e),le(()=>{let t=this.themingParticipants.indexOf(e);this.themingParticipants.splice(t,1)})}get onThemingParticipantAdded(){return this.onThemingParticipantAddedEmitter.event}getThemingParticipants(){return this.themingParticipants}},hD=new aS;Ae.add(LN.ThemingContribution,hD);function tf(i){return hD.onColorThemeChange(i)}var ef=class extends A{constructor(t){super();this.themeService=t;this.theme=t.getColorTheme(),this._register(this.themeService.onDidColorThemeChange(n=>this.onThemeChange(n)))}theme;onThemeChange(t){this.theme=t,this.updateStyles()}updateStyles(){}getColor(t,n){let o=this.theme.getColor(t);return o&&n&&(o=n(o,this.theme)),o?o.toString():null}};function PN(i){return i&&typeof i.getEditorType=="function"?i.getEditorType()===Ux.ICodeEditor:!1}function ON(i){return i&&typeof i.getEditorType=="function"?i.getEditorType()===Ux.IDiffEditor:!1}function gD(i){return PN(i)||ON(i)?i:null}var lS=new class{clone(){return this}equals(i){return this===i}};function nf(i,e){let t=new Uint32Array(2);return t[0]=0,t[1]=(i<<0|0|0|32768|2<<24)>>>0,new Fm(t,e===null?lS:e)}var mD={getInitialState:()=>lS,tokenizeEncoded:(i,e,t)=>nf(0,t)};async function of(i,e,t){if(!t)return fD(e,i.languageIdCodec,mD);let n=await Os.getOrCreate(t);return fD(e,i.languageIdCodec,n||mD)}function fD(i,e,t){let n='<div class="monaco-tokenized-source">',o=_h(i),r=t.getInitialState();for(let s=0,a=o.length;s<a;s++){let l=o[s];s>0&&(n+="<br/>");let c=t.tokenizeEncoded(l,!0,r);Jt.convertToEndOffset(c.tokens,l.length);let p=new Jt(c.tokens,l,e).inflate(),h=0;for(let m=0,v=p.getCount();m<v;m++){let f=p.getClassName(m),b=p.getEndOffset(m);n+=`<span class="${f}">${_r(l.substring(h,b))}</span>`,h=b}r=c.endState}return n+="</div>",n}var Bs=P("openerService");var Ws=class{constructor(e,t,n){this._options=e;this._languageService=t;this._openerService=n}static _ttpTokenizer=k1("tokenizeToString",{createHTML(e){return e}});_onDidRenderAsync=new C;onDidRenderAsync=this._onDidRenderAsync.event;dispose(){this._onDidRenderAsync.dispose()}render(e,t,n){if(!e)return{element:document.createElement("span"),dispose:()=>{}};let o=new re,r=o.add(gu(e,{...this._getRenderOptions(e,o),...t},n));return r.element.classList.add("rendered-markdown"),{element:r.element,dispose:()=>o.dispose()}}_getRenderOptions(e,t){return{codeBlockRenderer:async(n,o)=>{let r;n?r=this._languageService.getLanguageIdByLanguageName(n):this._options.editor&&(r=this._options.editor.getModel()?.getLanguageId()),r||(r=Ni);let s=await of(this._languageService,o,r),a=document.createElement("span");if(a.innerHTML=Ws._ttpTokenizer?.createHTML(s)??s,this._options.editor){let l=this._options.editor.getOption(51);md(a,l)}else this._options.codeBlockFontFamily&&(a.style.fontFamily=this._options.codeBlockFontFamily);return this._options.codeBlockFontSize!==void 0&&(a.style.fontSize=this._options.codeBlockFontSize),a},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:n=>this.openMarkdownLink(n,e),disposables:t}}}async openMarkdownLink(e,t){await AN(this._openerService,e,t.isTrusted)}};Ws=L([w(1,Pt),w(2,Bs)],Ws);async function AN(i,e,t){try{return await i.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:MN(t)})}catch(n){return Ne(n),!1}}function MN(i){return i===!0?!0:i&&Array.isArray(i.enabledCommands)?i.enabledCommands:!1}var Gt=P("fileService");function vD(i){return!!(i.capabilities&2048)}var dS=class i extends Error{constructor(t,n){super(t);this.code=n}static create(t,n){let o=new i(t.toString(),n);return NN(o,n),o}};function NN(i,e){return i.name=e?`${e} (FileSystemError)`:"FileSystemError",i}function FN(i){if(!i)return"Unknown";if(i instanceof dS)return i.code;let e=/^(.+) \(FileSystemError\)$/.exec(i.name);if(!e)return"Unknown";switch(e[1]){case"EntryExists":return"EntryExists";case"EntryIsADirectory":return"EntryIsADirectory";case"EntryNotADirectory":return"EntryNotADirectory";case"EntryNotFound":return"EntryNotFound";case"EntryTooLarge":return"EntryTooLarge";case"EntryWriteLocked":return"EntryWriteLocked";case"NoPermissions":return"NoPermissions";case"Unavailable":return"Unavailable"}return"Unknown"}function yD(i){if(i instanceof np)return i.fileOperationResult;switch(FN(i)){case"EntryNotFound":return 1;case"EntryIsADirectory":return 0;case"EntryNotADirectory":return 9;case"EntryWriteLocked":return 5;case"NoPermissions":return 6;case"EntryExists":return 4;case"EntryTooLarge":return 7;default:return 10}}var np=class extends Error{constructor(t,n,o){super(t);this.fileOperationResult=n;this.options=o}};var rf=class extends np{constructor(t,n,o){super(t,2,o);this.stat=n}};var To={OFF:"off",AFTER_DELAY:"afterDelay",ON_FOCUS_CHANGE:"onFocusChange",ON_WINDOW_CHANGE:"onWindowChange"},_d={OFF:"off",ON_EXIT:"onExit",ON_EXIT_AND_WINDOW_CLOSE:"onExitAndWindowClose"};var ID="files.readonlyInclude",xD="files.readonlyExclude";var ip="";var bD=class i{static KB=1024;static MB=i.KB*i.KB;static GB=i.MB*i.KB;static TB=i.GB*i.KB;static formatSize(e){return Wo(e)||(e=0),e<i.KB?d("sizeB","{0}B",e.toFixed(0)):e<i.MB?d("sizeKB","{0}KB",(e/i.KB).toFixed(2)):e<i.GB?d("sizeMB","{0}MB",(e/i.MB).toFixed(2)):e<i.TB?d("sizeGB","{0}GB",(e/i.GB).toFixed(2)):d("sizeTB","{0}TB",(e/i.TB).toFixed(2))}};var Us=P("keybindingService");var ir=P("labelService");var SD=ln,Vs=P("notificationService");var cS=P("hoverService"),sf=class extends A{constructor(t,n,o={},r,s){super();this.placement=t;this.instantHover=n;this.overrideOptions=o;this.configurationService=r;this.hoverService=s;this._delay=this.configurationService.getValue("workbench.hover.delay"),this._register(this.configurationService.onDidChangeConfiguration(a=>{a.affectsConfiguration("workbench.hover.delay")&&(this._delay=this.configurationService.getValue("workbench.hover.delay"))}))}lastHoverHideTime=0;timeLimit=200;_delay;get delay(){return this.isInstantlyHovering()?0:this._delay}hoverDisposables=this._register(new re);showHover(t,n){let o=typeof this.overrideOptions=="function"?this.overrideOptions(t,n):this.overrideOptions;this.hoverDisposables.clear();let r=on(t.target)?[t.target]:t.target.targetElements;for(let a of r)this.hoverDisposables.add(ho(a,"keydown",l=>{l.equals(9)&&this.hoverService.hideHover()}));let s=on(t.content)?void 0:t.content.toString();return this.hoverService.showHover({...t,...o,persistence:{hideOnKeyDown:!0,...o.persistence},id:s,appearance:{...t.appearance,compact:!0,skipFadeInAnimation:this.isInstantlyHovering(),...o.appearance}},n)}isInstantlyHovering(){return this.instantHover&&Date.now()-this.lastHoverHideTime<this.timeLimit}setInstantHoverTimeLimit(t){if(!this.instantHover)throw new Error("Instant hover is not enabled");this.timeLimit=t}onDidHideHover(){this.hoverDisposables.clear(),this.instantHover&&(this.lastHoverHideTime=Date.now())}};sf=L([w(3,$e),w(4,cS)],sf);var Ld=class extends A{constructor(t,n,o={},r,s){super();this._link=n;this._hoverService=r;this.el=Hn(t,Y("a.monaco-link",{tabIndex:n.tabIndex??0,href:n.href},n.label)),this.hoverDelegate=o.hoverDelegate??Ai("mouse"),this.setTooltip(n.title),this.el.setAttribute("role","button");let a=this._register(new We(this.el,"click")),l=this._register(new We(this.el,"keypress")),c=ee.chain(l.event,h=>h.map(m=>new ht(m)).filter(m=>m.keyCode===3)),u=this._register(new We(this.el,Dt.Tap)).event;this._register(_n.addTarget(this.el));let p=ee.any(a.event,c,u);this._register(p(h=>{this.enabled&&(Ct.stop(h,!0),o?.opener?o.opener(this._link.href):s.open(this._link.href,{allowCommands:!0}))})),this.enabled=!0}el;hover;hoverDelegate;_enabled=!0;get enabled(){return this._enabled}set enabled(t){t?(this.el.setAttribute("aria-disabled","false"),this.el.tabIndex=0,this.el.style.pointerEvents="auto",this.el.style.opacity="1",this.el.style.cursor="pointer",this._enabled=!1):(this.el.setAttribute("aria-disabled","true"),this.el.tabIndex=-1,this.el.style.pointerEvents="none",this.el.style.opacity="0.4",this.el.style.cursor="default",this._enabled=!0),this._enabled=t}set link(t){typeof t.label=="string"?this.el.textContent=t.label:(zn(this.el),this.el.appendChild(t.label)),this.el.href=t.href,typeof t.tabIndex<"u"&&(this.el.tabIndex=t.tabIndex),this.setTooltip(t.title),this._link=t}setTooltip(t){this.hoverDelegate.showNativeHover?this.el.title=t??"":!this.hover&&t?this.hover=this._register(this._hoverService.setupManagedHover(this.hoverDelegate,this.el,t)):this.hover&&this.hover.update(t)}};Ld=L([w(3,cS),w(4,Bs)],Ld);var or=P("productService"),ED="vscode://schemas/vscode-product";var BN={Quickaccess:"workbench.contributions.quickaccess"},uS=class{providers=[];defaultProvider=void 0;registerQuickAccessProvider(e){return e.prefix.length===0?this.defaultProvider=e:this.providers.push(e),this.providers.sort((t,n)=>n.prefix.length-t.prefix.length),le(()=>{this.providers.splice(this.providers.indexOf(e),1),this.defaultProvider===e&&(this.defaultProvider=void 0)})}getQuickAccessProviders(){return Yt([this.defaultProvider,...this.providers])}getQuickAccessProvider(e){return e&&this.providers.find(n=>e.startsWith(n.prefix))||void 0||this.defaultProvider}clear(){let e=[...this.providers],t=this.defaultProvider;return this.providers=[],this.defaultProvider=void 0,()=>{this.providers=e,this.defaultProvider=t}}};Ae.add(BN.Quickaccess,new uS);var VIe=new un(()=>{let i=new Intl.Collator(void 0,{numeric:!0,sensitivity:"base"});return{collator:i,collatorIsNumeric:i.resolvedOptions().numeric}}),zIe=new un(()=>({collator:new Intl.Collator(void 0,{numeric:!0})})),HIe=new un(()=>({collator:new Intl.Collator(void 0,{numeric:!0,sensitivity:"accent"})}));var txe=Object.freeze({score:0}),nxe=1<<18,ixe=1<<17;var pS=class{constructor(e){this.options=e}getItemLabel(e){return e.label}getItemDescription(e){if(!this.options?.skipDescription)return e.description}getItemPath(e){if(!this.options?.skipPath)return e.resource?.scheme===H.file?e.resource.fsPath:e.resource?.path}},kxe=new pS,zs=P("quickInputService");var op={exports:{}};(function(){function e(r){let s=[];typeof r=="number"&&s.push("code/timeOrigin",r);function a(c){s.push(c,Date.now())}function l(){let c=[];for(let u=0;u<s.length;u+=2)c.push({name:s[u],startTime:s[u+1]});return c}return{mark:a,getMarks:l}}function t(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?e():{mark(r){performance.mark(r)},getMarks(){let r=performance.timeOrigin;typeof r!="number"&&(r=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);let s=[{name:"code/timeOrigin",startTime:Math.round(r)}];for(let a of performance.getEntriesByType("mark"))s.push({name:a.name,startTime:Math.round(r+a.startTime)});return s}};if(typeof process=="object"){let r=performance?.timeOrigin;return e(r)}else return console.trace("perf-util loaded in UNKNOWN environment"),e()}function n(r){return r.MonacoPerformanceMarks||(r.MonacoPerformanceMarks=t()),r.MonacoPerformanceMarks}var o;typeof global=="object"?o=global:typeof self=="object"?o=self:o={},typeof op=="object"&&typeof op.exports=="object"?op.exports=n(o):(console.trace("perf-util defined in UNKNOWN context (neither requirejs or commonjs)"),o.perf=n(o))})();var en=op.exports.mark,_xe=op.exports.getMarks;function hS(i,e){return e&&(i.stack||i.stacktrace)?d("stackTrace.format","{0}: {1}",wD(i),CD(i.stack)||CD(i.stacktrace)):wD(i)}function CD(i){return Array.isArray(i)?i.join(`
`):i}function wD(i){return i.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${i.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof i.code=="string"&&typeof i.errno=="number"&&typeof i.syscall=="string"?d("nodeExceptionMessage","A system error occurred ({0})",i.message):i.message||d("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function af(i=null,e=!1){if(!i)return d("error.defaultMessage","An unknown error occurred. Please consult the log for more details.");if(Array.isArray(i)){let t=Yt(i),n=af(t[0],e);return t.length>1?d("error.moreErrors","{0} ({1} errors in total)",n,t.length):n}if(Xt(i))return i;if(i.detail){let t=i.detail;if(t.error)return hS(t.error,e);if(t.exception)return hS(t.exception,e)}return i.stack?hS(i,e):i.message?i.message:d("error.defaultMessage","An unknown error occurred. Please consult the log for more details.")}function gS(i){let e=i;return e instanceof Error&&Array.isArray(e.actions)}var qt=P("logService"),rSe=P("loggerService");function lf(i){switch(i){case 1:return"trace";case 2:return"debug";case 3:return"info";case 4:return"warn";case 5:return"error";case 0:return"off"}}var sSe=new K("logLevel",lf(3));var Hs=P("IUriIdentityService");function kD(i){let e=i;return!!(e&&typeof e=="object"&&typeof e.id=="string"&&typeof e.isDefault=="boolean"&&typeof e.name=="string"&&N.isUri(e.location)&&N.isUri(e.globalStorageHome)&&N.isUri(e.settingsResource)&&N.isUri(e.keybindingsResource)&&N.isUri(e.tasksResource)&&N.isUri(e.snippetsHome)&&N.isUri(e.extensionsResource))}var DD=P("IUserDataProfilesService");function df(i,e,t,n,o,r){return{id:i,name:e,location:t,isDefault:!1,shortName:o?.shortName,icon:o?.icon,globalStorageHome:r&&o?.useDefaultFlags?.globalState?r.globalStorageHome:Oe(t,"globalStorage"),settingsResource:r&&o?.useDefaultFlags?.settings?r.settingsResource:Oe(t,"settings.json"),keybindingsResource:r&&o?.useDefaultFlags?.keybindings?r.keybindingsResource:Oe(t,"keybindings.json"),tasksResource:r&&o?.useDefaultFlags?.tasks?r.tasksResource:Oe(t,"tasks.json"),snippetsHome:r&&o?.useDefaultFlags?.snippets?r.snippetsHome:Oe(t,"snippets"),extensionsResource:r&&o?.useDefaultFlags?.extensions?r.extensionsResource:Oe(t,"extensions.json"),cacheHome:Oe(n,i),useDefaultFlags:o?.useDefaultFlags,isTransient:o?.transient}}var cf=class extends A{constructor(t,n,o,r){super();this.environmentService=t;this.fileService=n;this.uriIdentityService=o;this.logService=r;this.profilesHome=Oe(this.environmentService.userRoamingDataHome,"profiles"),this.profilesCacheHome=Oe(this.environmentService.cacheHome,"CachedProfilesData")}static PROFILES_KEY="userDataProfiles";static PROFILE_ASSOCIATIONS_KEY="profileAssociations";_serviceBrand;enabled=!0;profilesHome;profilesCacheHome;get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.profilesObject.profiles,...this.transientProfilesObject.profiles]}_onDidChangeProfiles=this._register(new C);onDidChangeProfiles=this._onDidChangeProfiles.event;_onWillCreateProfile=this._register(new C);onWillCreateProfile=this._onWillCreateProfile.event;_onWillRemoveProfile=this._register(new C);onWillRemoveProfile=this._onWillRemoveProfile.event;_onDidResetWorkspaces=this._register(new C);onDidResetWorkspaces=this._onDidResetWorkspaces.event;profileCreationPromises=new Map;transientProfilesObject={profiles:[],folders:new bt,workspaces:new bt,emptyWindows:new Map};init(){this._profilesObject=void 0}setEnablement(t){this.enabled!==t&&(this._profilesObject=void 0,this.enabled=t)}isEnabled(){return this.enabled}_profilesObject;get profilesObject(){if(!this._profilesObject){let t=this.createDefaultProfile(),n=[t];if(this.enabled)try{for(let s of this.getStoredProfiles()){if(!s.name||!Xt(s.name)||!s.location){this.logService.warn("Skipping the invalid stored profile",s.location||s.name);continue}n.push(df(Ri(s.location),s.name,s.location,this.profilesCacheHome,{shortName:s.shortName,icon:s.icon,useDefaultFlags:s.useDefaultFlags},t))}}catch(s){this.logService.error(s)}let o=new bt,r=new Map;if(n.length)try{let s=this.getStoredProfileAssociations();if(s.workspaces)for(let[a,l]of Object.entries(s.workspaces)){let c=N.parse(a),u=n.find(p=>p.id===l);u&&o.set(c,u)}if(s.emptyWindows)for(let[a,l]of Object.entries(s.emptyWindows)){let c=n.find(u=>u.id===l);c&&r.set(a,c)}}catch(s){this.logService.error(s)}this._profilesObject={profiles:n,workspaces:o,emptyWindows:r}}return this._profilesObject}createDefaultProfile(){let t=df("__default__profile__",d("defaultProfile","Default"),this.environmentService.userRoamingDataHome,this.profilesCacheHome);return{...t,extensionsResource:this.getDefaultProfileExtensionsLocation()??t.extensionsResource,isDefault:!0}}async createTransientProfile(t){let n="Temp",o=new RegExp(`${pn(n)}\\s(\\d+)`),r=0;for(let a of this.profiles){let l=o.exec(a.name),c=l?parseInt(l[1]):0;r=c>r?c:r}let s=`${n} ${r+1}`;return this.createProfile(hi(Sn()).toString(16),s,{transient:!0},t)}async createNamedProfile(t,n,o){return this.createProfile(hi(Sn()).toString(16),t,n,o)}async createProfile(t,n,o,r){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");let s=await this.doCreateProfile(t,n,o);return r&&await this.setProfileForWorkspace(r,s),s}async doCreateProfile(t,n,o){if(!Xt(n)||!n)throw new Error("Name of the profile is mandatory and must be of type `string`");let r=this.profileCreationPromises.get(n);return r||(r=(async()=>{try{if(this.profiles.find(c=>c.name===n||c.id===t))throw new Error(`Profile with ${n} name already exists`);let a=df(t,n,Oe(this.profilesHome,t),this.profilesCacheHome,o,this.defaultProfile);await this.fileService.createFolder(a.location);let l=[];return this._onWillCreateProfile.fire({profile:a,join(c){l.push(c)}}),await Ki.settled(l),this.updateProfiles([a],[],[]),a}finally{this.profileCreationPromises.delete(n)}})(),this.profileCreationPromises.set(n,r)),r}async updateProfile(t,n){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");let o=this.profiles.find(r=>r.id===t.id);if(!o)throw new Error(`Profile '${t.name}' does not exist`);return o=df(o.id,n.name??o.name,o.location,this.profilesCacheHome,{shortName:n.shortName??o.shortName,icon:n.icon===null?void 0:n.icon??o.icon,transient:n.transient??o.isTransient,useDefaultFlags:n.useDefaultFlags??o.useDefaultFlags},this.defaultProfile),this.updateProfiles([],[],[o]),o}async removeProfile(t){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");if(t.isDefault)throw new Error("Cannot remove default profile");let n=this.profiles.find(r=>r.id===t.id);if(!n)throw new Error(`Profile '${t.name}' does not exist`);let o=[];this._onWillRemoveProfile.fire({profile:n,join(r){o.push(r)}});try{await Promise.allSettled(o)}catch(r){this.logService.error(r)}for(let r of[...this.profilesObject.emptyWindows.keys()])n.id===this.profilesObject.emptyWindows.get(r)?.id&&this.profilesObject.emptyWindows.delete(r);for(let r of[...this.profilesObject.workspaces.keys()])n.id===this.profilesObject.workspaces.get(r)?.id&&this.profilesObject.workspaces.delete(r);this.updateStoredProfileAssociations(),this.updateProfiles([],[n],[]);try{await this.fileService.del(n.cacheHome,{recursive:!0})}catch(r){yD(r)!==1&&this.logService.error(r)}}async setProfileForWorkspace(t,n){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");let o=this.profiles.find(r=>r.id===n.id);if(!o)throw new Error(`Profile '${n.name}' does not exist`);this.updateWorkspaceAssociation(t,o)}unsetWorkspace(t,n){if(!this.enabled)throw new Error("Profiles are disabled in the current environment.");this.updateWorkspaceAssociation(t,void 0,n)}async resetWorkspaces(){this.transientProfilesObject.folders.clear(),this.transientProfilesObject.workspaces.clear(),this.transientProfilesObject.emptyWindows.clear(),this.profilesObject.workspaces.clear(),this.profilesObject.emptyWindows.clear(),this.updateStoredProfileAssociations(),this._onDidResetWorkspaces.fire()}async cleanUp(){if(this.enabled&&await this.fileService.exists(this.profilesHome)){let t=await this.fileService.resolve(this.profilesHome);await Promise.all((t.children||[]).filter(n=>n.isDirectory&&this.profiles.every(o=>!this.uriIdentityService.extUri.isEqual(o.location,n.resource))).map(n=>this.fileService.del(n.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){if(!this.enabled)return;let t=this.transientProfilesObject.profiles.filter(n=>!this.isProfileAssociatedToWorkspace(n));await Promise.allSettled(t.map(n=>this.removeProfile(n)))}getProfileForWorkspace(t){let n=this.getWorkspace(t),o=N.isUri(n)?this.profilesObject.workspaces.get(n):this.profilesObject.emptyWindows.get(n);return o||(om(t)?this.transientProfilesObject.folders.get(t.uri):rm(t)?this.transientProfilesObject.workspaces.get(t.configPath):this.transientProfilesObject.emptyWindows.get(t.id))}getWorkspace(t){return om(t)?t.uri:rm(t)?t.configPath:t.id}isProfileAssociatedToWorkspace(t){return!!([...this.profilesObject.emptyWindows.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location))||[...this.profilesObject.workspaces.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location))||[...this.transientProfilesObject.emptyWindows.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location))||[...this.transientProfilesObject.workspaces.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location))||[...this.transientProfilesObject.folders.values()].some(n=>this.uriIdentityService.extUri.isEqual(n.location,t.location)))}updateProfiles(t,n,o){let r=[...this.profiles,...t],s=[],a=this.transientProfilesObject.profiles;this.transientProfilesObject.profiles=[];for(let l of r){if(l.isDefault||n.some(u=>l.id===u.id))continue;l=o.find(u=>l.id===u.id)??l;let c=a.find(u=>l.id===u.id);if(l.isTransient)this.transientProfilesObject.profiles.push(l);else{if(c){for(let[u,p]of this.transientProfilesObject.emptyWindows.entries())if(l.id===p.id){this.updateWorkspaceAssociation({id:u},l);break}for(let[u,p]of this.transientProfilesObject.workspaces.entries())if(l.id===p.id){this.updateWorkspaceAssociation({id:"",configPath:u},l);break}for(let[u,p]of this.transientProfilesObject.folders.entries())if(l.id===p.id){this.updateWorkspaceAssociation({id:"",uri:u},l);break}}s.push({location:l.location,name:l.name,shortName:l.shortName,icon:l.icon,useDefaultFlags:l.useDefaultFlags})}}this.saveStoredProfiles(s),this._profilesObject=void 0,this.triggerProfilesChanges(t,n,o)}triggerProfilesChanges(t,n,o){this._onDidChangeProfiles.fire({added:t,removed:n,updated:o,all:this.profiles})}updateWorkspaceAssociation(t,n,o){if(o=n?.isTransient?!0:o,o)om(t)?(this.transientProfilesObject.folders.delete(t.uri),n&&this.transientProfilesObject.folders.set(t.uri,n)):rm(t)?(this.transientProfilesObject.workspaces.delete(t.configPath),n&&this.transientProfilesObject.workspaces.set(t.configPath,n)):(this.transientProfilesObject.emptyWindows.delete(t.id),n&&this.transientProfilesObject.emptyWindows.set(t.id,n));else{this.updateWorkspaceAssociation(t,void 0,!0);let r=this.getWorkspace(t);N.isUri(r)?(this.profilesObject.workspaces.delete(r),n&&this.profilesObject.workspaces.set(r,n)):(this.profilesObject.emptyWindows.delete(r),n&&this.profilesObject.emptyWindows.set(r,n)),this.updateStoredProfileAssociations()}}updateStoredProfileAssociations(){let t={};for(let[o,r]of this.profilesObject.workspaces.entries())t[o.toString()]=r.id;let n={};for(let[o,r]of this.profilesObject.emptyWindows.entries())n[o.toString()]=r.id;this.saveStoredProfileAssociations({workspaces:t,emptyWindows:n}),this._profilesObject=void 0}migrateStoredProfileAssociations(t){let n={},o=this.createDefaultProfile();if(t.workspaces)for(let[s,a]of Object.entries(t.workspaces)){let l=N.parse(a);n[s]=this.uriIdentityService.extUri.isEqual(l,o.location)?o.id:this.uriIdentityService.extUri.basename(l)}let r={};if(t.emptyWindows)for(let[s,a]of Object.entries(t.emptyWindows)){let l=N.parse(a);r[s]=this.uriIdentityService.extUri.isEqual(l,o.location)?o.id:this.uriIdentityService.extUri.basename(l)}return{workspaces:n,emptyWindows:r}}getStoredProfiles(){return[]}saveStoredProfiles(t){throw new Error("not implemented")}getStoredProfileAssociations(){return{}}saveStoredProfileAssociations(t){throw new Error("not implemented")}getDefaultProfileExtensionsLocation(){}};cf=L([w(0,An),w(1,Gt),w(2,Hs),w(3,qt)],cf);var UN="__$__isNewStorageMarker",uf="__$__targetStorageMarker",vn=P("storageService");function VN(i){let e=i.get(uf);if(e)try{return JSON.parse(e)}catch{}return Object.create(null)}var _D=class i extends A{constructor(t={flushInterval:i.DEFAULT_FLUSH_INTERVAL}){super();this.options=t}static DEFAULT_FLUSH_INTERVAL=60*1e3;_onDidChangeValue=this._register(new ls);_onDidChangeTarget=this._register(new ls);onDidChangeTarget=this._onDidChangeTarget.event;_onWillSaveState=this._register(new C);onWillSaveState=this._onWillSaveState.event;initializationPromise;flushWhenIdleScheduler=this._register(new Hi(()=>this.doFlushWhenIdle(),this.options.flushInterval));runFlushWhenIdle=this._register(new Un);onDidChangeValue(t,n,o){return ee.filter(this._onDidChangeValue.event,r=>r.scope===t&&(n===void 0||r.key===n),o)}doFlushWhenIdle(){this.runFlushWhenIdle.value=ps(()=>{this.shouldFlushWhenIdle()&&this.flush(),this.flushWhenIdleScheduler.schedule()})}shouldFlushWhenIdle(){return!0}stopFlushWhenIdle(){ft([this.runFlushWhenIdle,this.flushWhenIdleScheduler])}initialize(){return this.initializationPromise||(this.initializationPromise=(async()=>{en("code/willInitStorage");try{await this.doInitialize()}finally{en("code/didInitStorage")}this.flushWhenIdleScheduler.schedule()})()),this.initializationPromise}emitDidChangeValue(t,n){let{key:o,external:r}=n;if(o===uf){switch(t){case-1:this._applicationKeyTargets=void 0;break;case 0:this._profileKeyTargets=void 0;break;case 1:this._workspaceKeyTargets=void 0;break}this._onDidChangeTarget.fire({scope:t})}else this._onDidChangeValue.fire({scope:t,key:o,target:this.getKeyTargets(t)[o],external:r})}emitWillSaveState(t){this._onWillSaveState.fire({reason:t})}get(t,n,o){return this.getStorage(n)?.get(t,o)}getBoolean(t,n,o){return this.getStorage(n)?.getBoolean(t,o)}getNumber(t,n,o){return this.getStorage(n)?.getNumber(t,o)}getObject(t,n,o){return this.getStorage(n)?.getObject(t,o)}storeAll(t,n){this.withPausedEmitters(()=>{for(let o of t)this.store(o.key,o.value,o.scope,o.target,n)})}store(t,n,o,r,s=!1){if(Dn(n)){this.remove(t,o,s);return}this.withPausedEmitters(()=>{this.updateKeyTarget(t,o,r),this.getStorage(o)?.set(t,n,s)})}remove(t,n,o=!1){this.withPausedEmitters(()=>{this.updateKeyTarget(t,n,void 0),this.getStorage(n)?.delete(t,o)})}withPausedEmitters(t){this._onDidChangeValue.pause(),this._onDidChangeTarget.pause();try{t()}finally{this._onDidChangeValue.resume(),this._onDidChangeTarget.resume()}}keys(t,n){let o=[],r=this.getKeyTargets(t);for(let s of Object.keys(r))r[s]===n&&o.push(s);return o}updateKeyTarget(t,n,o,r=!1){let s=this.getKeyTargets(n);typeof o=="number"?s[t]!==o&&(s[t]=o,this.getStorage(n)?.set(uf,JSON.stringify(s),r)):typeof s[t]=="number"&&(delete s[t],this.getStorage(n)?.set(uf,JSON.stringify(s),r))}_workspaceKeyTargets=void 0;get workspaceKeyTargets(){return this._workspaceKeyTargets||(this._workspaceKeyTargets=this.loadKeyTargets(1)),this._workspaceKeyTargets}_profileKeyTargets=void 0;get profileKeyTargets(){return this._profileKeyTargets||(this._profileKeyTargets=this.loadKeyTargets(0)),this._profileKeyTargets}_applicationKeyTargets=void 0;get applicationKeyTargets(){return this._applicationKeyTargets||(this._applicationKeyTargets=this.loadKeyTargets(-1)),this._applicationKeyTargets}getKeyTargets(t){switch(t){case-1:return this.applicationKeyTargets;case 0:return this.profileKeyTargets;default:return this.workspaceKeyTargets}}loadKeyTargets(t){let n=this.getStorage(t);return n?VN(n):Object.create(null)}isNew(t){return this.getBoolean(UN,t)===!0}async flush(t=0){this._onWillSaveState.fire({reason:t});let n=this.getStorage(-1),o=this.getStorage(0),r=this.getStorage(1);switch(t){case 0:await Ki.settled([n?.whenFlushed()??Promise.resolve(),o?.whenFlushed()??Promise.resolve(),r?.whenFlushed()??Promise.resolve()]);break;case 1:await Ki.settled([n?.flush(0)??Promise.resolve(),o?.flush(0)??Promise.resolve(),r?.flush(0)??Promise.resolve()]);break}}async log(){let t=this.getStorage(-1)?.items??new Map,n=this.getStorage(0)?.items??new Map,o=this.getStorage(1)?.items??new Map;return zN(t,n,o,this.getLogDetails(-1)??"",this.getLogDetails(0)??"",this.getLogDetails(1)??"")}async optimize(t){return await this.flush(),this.getStorage(t)?.optimize()}async switch(t,n){return this.emitWillSaveState(0),kD(t)?this.switchToProfile(t,n):this.switchToWorkspace(t,n)}canSwitchProfile(t,n){return!(t.id===n.id||LD(n)&&LD(t))}switchData(t,n,o){this.withPausedEmitters(()=>{let r=new Set;for(let[s,a]of t)r.add(s),n.get(s)!==a&&this.emitDidChangeValue(o,{key:s,external:!0});for(let[s]of n.items)r.has(s)||this.emitDidChangeValue(o,{key:s,external:!0})})}};function LD(i){return i.isDefault||!!i.useDefaultFlags?.globalState}async function zN(i,e,t,n,o,r){let s=f=>{try{return JSON.parse(f)}catch{return f}},a=new Map,l=new Map;i.forEach((f,b)=>{a.set(b,f),l.set(b,s(f))});let c=new Map,u=new Map;e.forEach((f,b)=>{c.set(b,f),u.set(b,s(f))});let p=new Map,h=new Map;t.forEach((f,b)=>{p.set(b,f),h.set(b,s(f))}),console.group(n!==o?`Storage: Application (path: ${n})`:`Storage: Application & Profile (path: ${n}, default profile)`);let m=[];if(a.forEach((f,b)=>{m.push({key:b,value:f})}),console.table(m),console.groupEnd(),console.log(l),n!==o){console.group(`Storage: Profile (path: ${o}, profile specific)`);let f=[];c.forEach((b,E)=>{f.push({key:E,value:b})}),console.table(f),console.groupEnd(),console.log(u)}console.group(`Storage: Workspace (path: ${r})`);let v=[];p.forEach((f,b)=>{v.push({key:b,value:f})}),console.table(v),console.groupEnd(),console.log(h)}var Ks=P("telemetryService"),oEe=P("customEndpointTelemetryService");var RD="telemetry.firstSessionDate";var PD="telemetry.telemetryLevel",OD="telemetry.enableCrashReporter",AD="telemetry.enableTelemetry";var mS=class{telemetryLevel=0;sessionId="someValue.sessionId";machineId="someValue.machineId";sqmId="someValue.sqmId";devDeviceId="someValue.devDeviceId";firstSessionDate="someValue.firstSessionDate";sendErrorTelemetry=!1;publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}setExperimentProperty(){}},OEe=new mS;function Rd(i){let e=i.getValue(PD),t=i.getValue(OD);if(i.getValue(AD)===!1||t===!1)return 0;switch(e??"all"){case"all":return 3;case"error":return 2;case"crash":return 1;case"off":return 0}}var Pd=class{modifierLabels;constructor(e,t,n=t){this.modifierLabels=[null],this.modifierLabels[2]=e,this.modifierLabels[1]=t,this.modifierLabels[3]=n}toLabel(e,t,n){if(t.length===0)return null;let o=[];for(let r=0,s=t.length;r<s;r++){let a=t[r],l=n(a);if(l===null)return null;o[r]=KN(a,l,this.modifierLabels[e])}return o.join(" ")}},HN=new Pd({ctrlKey:"\u2303",shiftKey:"\u21E7",altKey:"\u2325",metaKey:"\u2318",separator:""},{ctrlKey:d({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:d({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:d({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:d({key:"windowsKey",comment:["This is the short form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:d({key:"ctrlKey",comment:["This is the short form for the Control key on the keyboard"]},"Ctrl"),shiftKey:d({key:"shiftKey",comment:["This is the short form for the Shift key on the keyboard"]},"Shift"),altKey:d({key:"altKey",comment:["This is the short form for the Alt key on the keyboard"]},"Alt"),metaKey:d({key:"superKey",comment:["This is the short form for the Super key on the keyboard"]},"Super"),separator:"+"}),BEe=new Pd({ctrlKey:d({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:d({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:d({key:"optKey.long",comment:["This is the long form for the Alt/Option key on the keyboard"]},"Option"),metaKey:d({key:"cmdKey.long",comment:["This is the long form for the Command key on the keyboard"]},"Command"),separator:"+"},{ctrlKey:d({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:d({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:d({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:d({key:"windowsKey.long",comment:["This is the long form for the Windows key on the keyboard"]},"Windows"),separator:"+"},{ctrlKey:d({key:"ctrlKey.long",comment:["This is the long form for the Control key on the keyboard"]},"Control"),shiftKey:d({key:"shiftKey.long",comment:["This is the long form for the Shift key on the keyboard"]},"Shift"),altKey:d({key:"altKey.long",comment:["This is the long form for the Alt key on the keyboard"]},"Alt"),metaKey:d({key:"superKey.long",comment:["This is the long form for the Super key on the keyboard"]},"Super"),separator:"+"}),WEe=new Pd({ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Cmd",separator:"+"},{ctrlKey:"Ctrl",shiftKey:"Shift",altKey:"Alt",metaKey:"Super",separator:"+"}),UEe=new Pd({ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"cmd",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"win",separator:"+"},{ctrlKey:"ctrl",shiftKey:"shift",altKey:"alt",metaKey:"meta",separator:"+"});function KN(i,e,t){if(e===null)return"";let n=[];return i.ctrlKey&&n.push(t.ctrlKey),i.shiftKey&&n.push(t.shiftKey),i.altKey&&n.push(t.altKey),i.metaKey&&n.push(t.metaKey),e!==""&&n.push(e),n.join(t.separator)}var Dwe=d("caseDescription","Match Case"),_we=d("wordsDescription","Match Whole Word"),Lwe=d("regexDescription","Use Regular Expression");var rTe=d("defaultLabel","input");var O0e={keybindingLabelBackground:G(_0),keybindingLabelForeground:G(L0),keybindingLabelBorder:G(R0),keybindingLabelBottomBorder:G(P0),keybindingLabelShadow:G(Cd)};var BD={buttonForeground:G(nS),buttonSeparator:G(m0),buttonBackground:G(wd),buttonHoverBackground:G(f0),buttonSecondaryForeground:G(v0),buttonSecondaryBackground:G(Qm),buttonSecondaryHoverBackground:G(y0),buttonBorder:G(b0)};var A0e={progressBarBackground:G(B1)};var bS={inputActiveOptionBorder:G(Jx),inputActiveOptionForeground:G(eS),inputActiveOptionBackground:G(Zx)},M0e={activeForeground:G(Td),activeBackground:G(I0),activeBorder:G(x0),inactiveForeground:G(S0),inactiveBackground:G(E0),inactiveBorder:G(C0),inactiveHoverBackground:G(w0)};var N0e={checkboxBackground:G(T0),checkboxBorder:G(D0),checkboxForeground:G(k0)};var F0e={dialogBackground:G(Kt),dialogForeground:G($a),dialogShadow:G(Cd),dialogBorder:G(_e),errorIconForeground:G(Z1),warningIconForeground:G(e0),infoIconForeground:G(t0),textLinkForeground:G(qm)};var $N={inputBackground:G(Xm),inputForeground:G(i0),inputBorder:G(o0),inputValidationInfoBorder:G(a0),inputValidationInfoBackground:G(r0),inputValidationInfoForeground:G(s0),inputValidationWarningBorder:G(c0),inputValidationWarningBackground:G(l0),inputValidationWarningForeground:G(d0),inputValidationErrorBorder:G(h0),inputValidationErrorBackground:G(u0),inputValidationErrorForeground:G(p0)};var B0e={listFilterWidgetBackground:G(K0),listFilterWidgetOutline:G(G0),listFilterWidgetNoMatchesOutline:G(q0),listFilterWidgetShadow:G($0),inputBoxStyles:$N,toggleStyles:bS},W0e={badgeBackground:G(vd),badgeForeground:G(F1),badgeBorder:G(_e)};var U0e={breadcrumbsBackground:G(Q1),breadcrumbsForeground:G(Y1),breadcrumbsHoverForeground:G(Qx),breadcrumbsFocusForeground:G(Qx),breadcrumbsFocusAndSelectionForeground:G(X1)};var V0e={listBackground:void 0,listInactiveFocusForeground:void 0,listFocusBackground:G(O0),listFocusForeground:G(A0),listFocusOutline:G(M0),listActiveSelectionBackground:G(nr),listActiveSelectionForeground:G(Fs),listActiveSelectionIconForeground:G(Zm),listFocusAndSelectionOutline:G(N0),listFocusAndSelectionBackground:G(nr),listFocusAndSelectionForeground:G(Fs),listInactiveSelectionBackground:G(F0),listInactiveSelectionIconForeground:G(W0),listInactiveSelectionForeground:G(B0),listInactiveFocusBackground:G(U0),listInactiveFocusOutline:G(V0),listHoverBackground:G(iS),listHoverForeground:G(oS),listDropOverBackground:G(z0),listDropBetweenBackground:G(H0),listSelectionOutline:G(gt),listHoverOutline:G(gt),treeIndentGuidesStroke:G(rS),treeInactiveIndentGuidesStroke:G(j0),treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:G(ep),tableColumnsBorder:G(Y0),tableOddRowsBackgroundColor:G(Q0)};var z0e={selectBackground:G(kd),selectListBackground:G(g0),selectForeground:G(tp),decoratorRightForeground:G(rD),selectBorder:G(tS),focusBorder:G(Si),listFocusBackground:G(lD),listInactiveSelectionIconForeground:G(aD),listFocusForeground:G(sD),listFocusOutline:O1(gt,B.transparent.toString()),listHoverBackground:G(iS),listHoverForeground:G(oS),listHoverOutline:G(gt),selectListBorder:G(jx),listBackground:void 0,listActiveSelectionBackground:void 0,listActiveSelectionForeground:void 0,listActiveSelectionIconForeground:void 0,listFocusAndSelectionBackground:void 0,listDropOverBackground:void 0,listDropBetweenBackground:void 0,listInactiveSelectionBackground:void 0,listInactiveSelectionForeground:void 0,listInactiveFocusBackground:void 0,listInactiveFocusOutline:void 0,listSelectionOutline:void 0,listFocusAndSelectionForeground:void 0,listFocusAndSelectionOutline:void 0,listInactiveFocusForeground:void 0,tableColumnsBorder:void 0,tableOddRowsBackgroundColor:void 0,treeIndentGuidesStroke:void 0,treeInactiveIndentGuidesStroke:void 0,treeStickyScrollBackground:void 0,treeStickyScrollBorder:void 0,treeStickyScrollShadow:void 0};var H0e={shadowColor:G(Cd),borderColor:G(X0),foregroundColor:G(J0),backgroundColor:G(Z0),selectionForegroundColor:G(eD),selectionBackgroundColor:G(tD),selectionBorderColor:G(nD),separatorColor:G(iD),scrollbarShadow:G(ep),scrollbarSliderBackground:G($m),scrollbarSliderHoverBackground:G(jm),scrollbarSliderActiveBackground:G(Ym)};var vS={WIDTH:400,WIDTH_WITH_VERTICAL_PANEL:600,HEIGHT:270};var jN;(e=>e.DEFAULT={allowTrailingComma:!0})(jN||={});function WD(i,e){let t=JSON.stringify(i,void 0,e.insertSpaces?e.tabSize||4:"	");return e.eol!==void 0?t.replace(/\r\n|\r|\n/g,e.eol):t}function yS(i){return i&&i.hasOwnProperty("folderUri")}function UD(i){return i&&i.hasOwnProperty("workspace")}var ko=P("workspacesService");function Od(i){return i.hasOwnProperty("workspace")}function Ad(i){return i.hasOwnProperty("folderUri")}var Gs=P("dialogService");var Ji=P("fileDialogService");var Zi=P("modelService");var ELe=P("textModelService");var VD="";var Md=class extends A{_onWillDispose=this._register(new C);onWillDispose=this._onWillDispose.event;resolved=!1;async resolve(){this.resolved=!0}isResolved(){return this.resolved}isDisposed(){return this._store.isDisposed}dispose(){this._onWillDispose.fire(),super.dispose()}};var Nd=P("ILanguageDetectionService"),IS="languageDetection";var qs=class extends Md{constructor(t,n,o,r,s){super();this.modelService=t;this.languageService=n;this.languageDetectionService=o;this.accessibilityService=r;s&&this.handleExistingModel(s)}static AUTO_DETECT_LANGUAGE_THROTTLE_DELAY=600;textEditorModelHandle=void 0;createdEditorModel;modelDisposeListener=this._register(new Un);autoDetectLanguageThrottler=this._register(new Ia(qs.AUTO_DETECT_LANGUAGE_THROTTLE_DELAY));handleExistingModel(t){let n=this.modelService.getModel(t);if(!n)throw new Error(`Document with resource ${t.toString(!0)} does not exist`);this.textEditorModelHandle=t,this.registerModelDisposeListener(n)}registerModelDisposeListener(t){this.modelDisposeListener.value=t.onWillDispose(()=>{this.textEditorModelHandle=void 0,this.dispose()})}get textEditorModel(){return this.textEditorModelHandle?this.modelService.getModel(this.textEditorModelHandle):null}isReadonly(){return!0}_hasLanguageSetExplicitly=!1;get hasLanguageSetExplicitly(){return this._hasLanguageSetExplicitly}setLanguageId(t,n){this._hasLanguageSetExplicitly=!0,this.setLanguageIdInternal(t,n)}setLanguageIdInternal(t,n){this.isResolved()&&(!t||t===this.textEditorModel.getLanguageId()||this.textEditorModel.setLanguage(this.languageService.createById(t),n))}installModelListeners(t){let n=this._register(t.onDidChangeLanguage(o=>{o.source!==IS&&(this._hasLanguageSetExplicitly=!0,n.dispose())}))}getLanguageId(){return this.textEditorModel?.getLanguageId()}autoDetectLanguage(){return this.autoDetectLanguageThrottler.trigger(()=>this.doAutoDetectLanguage())}async doAutoDetectLanguage(){if(this.hasLanguageSetExplicitly||!this.textEditorModelHandle||!this.languageDetectionService.isEnabledForLanguage(this.getLanguageId()??Ni))return;let t=await this.languageDetectionService.detectLanguage(this.textEditorModelHandle),n=this.getLanguageId();if(t&&t!==n&&!this.isDisposed()){this.setLanguageIdInternal(t,IS);let o=this.languageService.getLanguageName(t);this.accessibilityService.alert(d("languageAutoDetected","Language {0} was automatically detected and set as the language mode.",o??t))}}createTextEditorModel(t,n,o){let r=this.getFirstLineText(t),s=this.getOrCreateLanguage(n,this.languageService,o,r);return this.doCreateTextEditorModel(t,s,n)}doCreateTextEditorModel(t,n,o){let r=o&&this.modelService.getModel(o);return r?this.updateTextEditorModel(t,n.languageId):(r=this.modelService.createModel(t,n,o),this.createdEditorModel=!0,this.registerModelDisposeListener(r)),this.textEditorModelHandle=r.uri,r}getFirstLineText(t){let n=t;return typeof n.getFirstLineText=="function"?n.getFirstLineText(1e3):t.getLineContent(1).substr(0,1e3)}getOrCreateLanguage(t,n,o,r){return!o||o===Ni?n.createByFilepathOrFirstLine(t??null,r):n.createById(o)}updateTextEditorModel(t,n){this.isResolved()&&(t&&this.modelService.updateModel(this.textEditorModel,t),n&&n!==Ni&&this.textEditorModel.getLanguageId()!==n&&this.textEditorModel.setLanguage(this.languageService.createById(n)))}createSnapshot(){return this.textEditorModel?this.textEditorModel.createSnapshot(!0):null}isResolved(){return!!this.textEditorModelHandle}dispose(){this.modelDisposeListener.dispose(),this.textEditorModelHandle&&this.createdEditorModel&&this.modelService.destroyModel(this.textEditorModelHandle),this.textEditorModelHandle=void 0,this.createdEditorModel=!1,super.dispose()}};qs=L([w(0,Zi),w(1,Pt),w(2,Nd),w(3,Ls)],qs);var Fd=P("workingCopyBackupService");var pf=P("textResourceConfigurationService"),WRe=P("textResourcePropertiesService");var ja=class i{constructor(e,t,n){this.startOffset=e;this.endOffset=t;this.newLength=n}static fromModelContentChanges(e){return e.map(n=>{let o=te.lift(n.range);return new i(ws(o.getStartPosition()),ws(o.getEndPosition()),r1(n.text))}).reverse()}toString(){return`[${Pn(this.startOffset)}...${Pn(this.endOffset)}) -> ${Pn(this.newLength)}`}},hf=class{nextEditIdx=0;deltaOldToNewLineCount=0;deltaOldToNewColumnCount=0;deltaLineIdxInOld=-1;edits;constructor(e){this.edits=e.map(t=>xS.from(t))}getOffsetBeforeChange(e){return this.adjustNextEdit(e),this.translateCurToOld(e)}getDistanceToNextChange(e){this.adjustNextEdit(e);let t=this.edits[this.nextEditIdx],n=t?this.translateOldToCur(t.offsetObj):null;return n===null?null:Pa(e,n)}translateOldToCur(e){return e.lineCount===this.deltaLineIdxInOld?pt(e.lineCount+this.deltaOldToNewLineCount,e.columnCount+this.deltaOldToNewColumnCount):pt(e.lineCount+this.deltaOldToNewLineCount,e.columnCount)}translateCurToOld(e){let t=Pn(e);return t.lineCount-this.deltaOldToNewLineCount===this.deltaLineIdxInOld?pt(t.lineCount-this.deltaOldToNewLineCount,t.columnCount-this.deltaOldToNewColumnCount):pt(t.lineCount-this.deltaOldToNewLineCount,t.columnCount)}adjustNextEdit(e){for(;this.nextEditIdx<this.edits.length;){let t=this.edits[this.nextEditIdx],n=this.translateOldToCur(t.endOffsetAfterObj);if(Cs(n,e)){this.nextEditIdx++;let o=Pn(n),r=Pn(this.translateOldToCur(t.endOffsetBeforeObj)),s=o.lineCount-r.lineCount;this.deltaOldToNewLineCount+=s;let a=this.deltaLineIdxInOld===t.endOffsetBeforeObj.lineCount?this.deltaOldToNewColumnCount:0,l=o.columnCount-r.columnCount;this.deltaOldToNewColumnCount=a+l,this.deltaLineIdxInOld=t.endOffsetBeforeObj.lineCount}else break}}},xS=class i{static from(e){return new i(e.startOffset,e.endOffset,e.newLength)}endOffsetBeforeObj;endOffsetAfterObj;offsetObj;constructor(e,t,n){this.endOffsetBeforeObj=Pn(t),this.endOffsetAfterObj=Pn(at(e,n)),this.offsetObj=Pn(e)}};function KD(i){if(i.length===0)return null;if(i.length===1)return i[0];let e=0;function t(){if(e>=i.length)return null;let s=e,a=i[s].listHeight;for(e++;e<i.length&&i[e].listHeight===a;)e++;return e-s>=2?ES(s===0&&e===i.length?i:i.slice(s,e),!1):i[s]}let n=t(),o=t();if(!o)return n;for(let s=t();s;s=t())zD(n,o)<=zD(o,s)?(n=SS(n,o),o=s):o=SS(o,s);return SS(n,o)}function ES(i,e=!1){if(i.length===0)return null;if(i.length===1)return i[0];let t=i.length;for(;t>3;){let n=t>>1;for(let o=0;o<n;o++){let r=o<<1;i[o]=xi.create23(i[r],i[r+1],r+3===t?i[r+2]:null,e)}t=n}return xi.create23(i[0],i[1],t>=3?i[2]:null,e)}function zD(i,e){return Math.abs(i.listHeight-e.listHeight)}function SS(i,e){return i.listHeight===e.listHeight?xi.create23(i,e,null,!1):i.listHeight>e.listHeight?XN(i,e):JN(e,i)}function XN(i,e){i=i.toMutable();let t=i,n=[],o;for(;;){if(e.listHeight===t.listHeight){o=e;break}if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeLastElementMutable()}for(let r=n.length-1;r>=0;r--){let s=n[r];o?s.childrenLength>=3?o=xi.create23(s.unappendChild(),o,null,!1):(s.appendChildOfSameHeight(o),o=void 0):s.handleChildrenChanged()}return o?xi.create23(i,o,null,!1):i}function JN(i,e){i=i.toMutable();let t=i,n=[];for(;e.listHeight!==t.listHeight;){if(t.kind!==4)throw new Error("unexpected");n.push(t),t=t.makeFirstElementMutable()}let o=e;for(let r=n.length-1;r>=0;r--){let s=n[r];o?s.childrenLength>=3?o=xi.create23(o,s.unprependChild(),null,!1):(s.prependChildOfSameHeight(o),o=void 0):s.handleChildrenChanged()}return o?xi.create23(o,i,null,!1):i}var gf=class{nextNodes;offsets;idxs;lastOffset=Zt;constructor(e){this.nextNodes=[e],this.offsets=[Zt],this.idxs=[]}readLongestNodeAt(e,t){if(Wr(e,this.lastOffset))throw new Error("Invalid offset");for(this.lastOffset=e;;){let n=rp(this.nextNodes);if(!n)return;let o=rp(this.offsets);if(Wr(e,o))return;if(Wr(o,e))if(at(o,n.length)<=e)this.nextNodeAfterCurrent();else{let r=CS(n);r!==-1?(this.nextNodes.push(n.getChild(r)),this.offsets.push(o),this.idxs.push(r)):this.nextNodeAfterCurrent()}else{if(t(n))return this.nextNodeAfterCurrent(),n;{let r=CS(n);if(r===-1){this.nextNodeAfterCurrent();return}else this.nextNodes.push(n.getChild(r)),this.offsets.push(o),this.idxs.push(r)}}}}nextNodeAfterCurrent(){for(;;){let e=rp(this.offsets),t=rp(this.nextNodes);if(this.nextNodes.pop(),this.offsets.pop(),this.idxs.length===0)break;let n=rp(this.nextNodes),o=CS(n,this.idxs[this.idxs.length-1]);if(o!==-1){this.nextNodes.push(n.getChild(o)),this.offsets.push(at(e,t.length)),this.idxs[this.idxs.length-1]=o;break}else this.idxs.pop()}}};function CS(i,e=-1){for(;;){if(e++,e>=i.childrenLength)return-1;if(i.getChild(e))return e}}function rp(i){return i.length>0?i[i.length-1]:void 0}function TS(i,e,t,n){return new wS(i,e,t,n).parseDocument()}var wS=class{constructor(e,t,n,o){this.tokenizer=e;this.createImmutableLists=o;if(n&&o)throw new Error("Not supported");this.oldNodeReader=n?new gf(n):void 0,this.positionMapper=new hf(t)}oldNodeReader;positionMapper;_itemsConstructed=0;_itemsFromCache=0;get nodesConstructed(){return this._itemsConstructed}get nodesReused(){return this._itemsFromCache}parseDocument(){this._itemsConstructed=0,this._itemsFromCache=0;let e=this.parseList(fn.getEmpty(),0);return e||(e=xi.getEmpty()),e}parseList(e,t){let n=[];for(;;){let r=this.tryReadChildFromCache(e);if(!r){let s=this.tokenizer.peek();if(!s||s.kind===2&&s.bracketIds.intersects(e))break;r=this.parseChild(e,t+1)}r.kind===4&&r.childrenLength===0||n.push(r)}return this.oldNodeReader?KD(n):ES(n,this.createImmutableLists)}tryReadChildFromCache(e){if(this.oldNodeReader){let t=this.positionMapper.getDistanceToNextChange(this.tokenizer.offset);if(t===null||!ed(t)){let n=this.oldNodeReader.readLongestNodeAt(this.positionMapper.getOffsetBeforeChange(this.tokenizer.offset),o=>t!==null&&!Wr(o.length,t)?!1:o.canBeReused(e));if(n)return this._itemsFromCache++,this.tokenizer.skip(n.length),n}}}parseChild(e,t){this._itemsConstructed++;let n=this.tokenizer.read();switch(n.kind){case 2:return new Em(n.bracketIds,n.length);case 0:return n.astNode;case 1:{if(t>300)return new yo(n.length);let o=e.merge(n.bracketIds),r=this.parseList(o,t+1),s=this.tokenizer.peek();return s&&s.kind===2&&(s.bracketId===n.bracketId||s.bracketIds.intersects(n.bracketIds))?(this.tokenizer.read(),Uu.create(n.astNode,r,s.astNode)):Uu.create(n.astNode,r,null)}default:throw new Error("unexpected")}}};function kS(i,e){if(i.length===0)return e;if(e.length===0)return i;let t=new aa(GD(i)),n=GD(e);n.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let o=t.dequeue();function r(c){if(c===void 0){let p=t.takeWhile(h=>!0)||[];return o&&p.unshift(o),p}let u=[];for(;o&&!ed(c);){let[p,h]=o.splitAt(c);u.push(p),c=Pa(p.lengthAfter,c),o=h??t.dequeue()}return ed(c)||u.push(new sp(!1,c,c)),u}let s=[];function a(c,u,p){if(s.length>0&&EI(s[s.length-1].endOffset,c)){let h=s[s.length-1];s[s.length-1]=new ja(h.startOffset,u,at(h.newLength,p))}else s.push({startOffset:c,endOffset:u,newLength:p})}let l=Zt;for(let c of n){let u=r(c.lengthBefore);if(c.modified){let p=o1(u,m=>m.lengthBefore),h=at(l,p);a(l,h,c.lengthAfter),l=h}else for(let p of u){let h=l;l=at(l,p.lengthBefore),p.modified&&a(h,l,p.lengthAfter)}}return s}var sp=class i{constructor(e,t,n){this.modified=e;this.lengthBefore=t;this.lengthAfter=n}splitAt(e){let t=Pa(e,this.lengthAfter);return EI(t,Zt)?[this,void 0]:this.modified?[new i(this.modified,this.lengthBefore,e),new i(this.modified,Zt,t)]:[new i(this.modified,e,e),new i(this.modified,t,t)]}toString(){return`${this.modified?"M":"U"}:${Pn(this.lengthBefore)} -> ${Pn(this.lengthAfter)}`}};function GD(i){let e=[],t=Zt;for(let n of i){let o=Pa(t,n.startOffset);ed(o)||e.push(new sp(!1,o,o));let r=Pa(n.startOffset,n.endOffset);e.push(new sp(!0,r,n.newLength)),t=n.endOffset}return e}var mf=class extends A{constructor(t,n){super();this.textModel=t;this.getLanguageConfiguration=n;if(t.tokenization.hasTokens)t.tokenization.backgroundTokenizationState===2?(this.initialAstWithoutTokens=void 0,this.astWithTokens=this.parseDocumentFromTextBuffer([],void 0,!1)):(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer([],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens);else{let o=this.brackets.getSingleLanguageBracketTokens(this.textModel.getLanguageId()),r=new xm(this.textModel.getValue(),o);this.initialAstWithoutTokens=TS(r,[],void 0,!0),this.astWithTokens=this.initialAstWithoutTokens}}didChangeEmitter=new C;initialAstWithoutTokens;astWithTokens;denseKeyProvider=new $g;brackets=new ym(this.denseKeyProvider,this.getLanguageConfiguration);didLanguageChange(t){return this.brackets.didLanguageChange(t)}onDidChange=this.didChangeEmitter.event;queuedTextEditsForInitialAstWithoutTokens=[];queuedTextEdits=[];handleDidChangeBackgroundTokenizationState(){if(this.textModel.tokenization.backgroundTokenizationState===2){let t=this.initialAstWithoutTokens===void 0;this.initialAstWithoutTokens=void 0,t||this.didChangeEmitter.fire()}}handleDidChangeTokens({ranges:t}){let n=t.map(o=>new ja(pt(o.fromLineNumber-1,0),pt(o.toLineNumber,0),pt(o.toLineNumber-o.fromLineNumber+1,0)));this.handleEdits(n,!0),this.initialAstWithoutTokens||this.didChangeEmitter.fire()}handleContentChanged(t){let n=ja.fromModelContentChanges(t.changes);this.handleEdits(n,!1)}handleEdits(t,n){let o=kS(this.queuedTextEdits,t);this.queuedTextEdits=o,this.initialAstWithoutTokens&&!n&&(this.queuedTextEditsForInitialAstWithoutTokens=kS(this.queuedTextEditsForInitialAstWithoutTokens,t))}flushQueue(){this.queuedTextEdits.length>0&&(this.astWithTokens=this.parseDocumentFromTextBuffer(this.queuedTextEdits,this.astWithTokens,!1),this.queuedTextEdits=[]),this.queuedTextEditsForInitialAstWithoutTokens.length>0&&(this.initialAstWithoutTokens&&(this.initialAstWithoutTokens=this.parseDocumentFromTextBuffer(this.queuedTextEditsForInitialAstWithoutTokens,this.initialAstWithoutTokens,!1)),this.queuedTextEditsForInitialAstWithoutTokens=[])}parseDocumentFromTextBuffer(t,n,o){let s=n,a=new Im(this.textModel,this.brackets);return TS(a,t,s,o)}getBracketsInRange(t,n){this.flushQueue();let o=pt(t.startLineNumber-1,t.startColumn-1),r=pt(t.endLineNumber-1,t.endColumn-1);return new xr(s=>{let a=this.initialAstWithoutTokens||this.astWithTokens;DS(a,Zt,a.length,o,r,s,0,0,new Map,n)})}getBracketPairsInRange(t,n){this.flushQueue();let o=ws(t.getStartPosition()),r=ws(t.getEndPosition());return new xr(s=>{let a=this.initialAstWithoutTokens||this.astWithTokens,l=new _S(s,n,this.textModel);LS(a,Zt,a.length,o,r,l,0,new Map)})}getFirstBracketAfter(t){this.flushQueue();let n=this.initialAstWithoutTokens||this.astWithTokens;return jD(n,Zt,n.length,ws(t))}getFirstBracketBefore(t){this.flushQueue();let n=this.initialAstWithoutTokens||this.astWithTokens;return $D(n,Zt,n.length,ws(t))}};function $D(i,e,t,n){if(i.kind===4||i.kind===2){let o=[];for(let r of i.children)t=at(e,r.length),o.push({nodeOffsetStart:e,nodeOffsetEnd:t}),e=t;for(let r=o.length-1;r>=0;r--){let{nodeOffsetStart:s,nodeOffsetEnd:a}=o[r];if(Wr(s,n)){let l=$D(i.children[r],s,a,n);if(l)return l}}return null}else{if(i.kind===3)return null;if(i.kind===1){let o=Ts(e,t);return{bracketInfo:i.bracketInfo,range:o}}}return null}function jD(i,e,t,n){if(i.kind===4||i.kind===2){for(let o of i.children){if(t=at(e,o.length),Wr(n,t)){let r=jD(o,e,t,n);if(r)return r}e=t}return null}else{if(i.kind===3)return null;if(i.kind===1){let o=Ts(e,t);return{bracketInfo:i.bracketInfo,range:o}}}return null}function DS(i,e,t,n,o,r,s,a,l,c,u=!1){if(s>200)return!0;e:for(;;)switch(i.kind){case 4:{let p=i.childrenLength;for(let h=0;h<p;h++){let m=i.getChild(h);if(m){if(t=at(e,m.length),Cs(e,o)&&td(t,n)){if(td(t,o)){i=m;continue e}if(!DS(m,e,t,n,o,r,s,0,l,c))return!1}e=t}}return!0}case 2:{let p=!c||!i.closingBracket||i.closingBracket.bracketInfo.closesColorized(i.openingBracket.bracketInfo),h=0;if(l){let v=l.get(i.openingBracket.text);v===void 0&&(v=0),h=v,p&&(v++,l.set(i.openingBracket.text,v))}let m=i.childrenLength;for(let v=0;v<m;v++){let f=i.getChild(v);if(f){if(t=at(e,f.length),Cs(e,o)&&td(t,n)){if(td(t,o)&&f.kind!==1){i=f,p?(s++,a=h+1):a=h;continue e}if((p||f.kind!==1||!i.closingBracket)&&!DS(f,e,t,n,o,r,p?s+1:s,p?h+1:h,l,c,!i.closingBracket))return!1}e=t}}return l?.set(i.openingBracket.text,h),!0}case 3:{let p=Ts(e,t);return r(new Ku(p,s-1,0,!0))}case 1:{let p=Ts(e,t);return r(new Ku(p,s-1,a-1,u))}case 0:return!0}}var _S=class{constructor(e,t,n){this.push=e;this.includeMinIndentation=t;this.textModel=n}};function LS(i,e,t,n,o,r,s,a){if(s>200)return!0;let l=!0;if(i.kind===2){let c=0;if(a){let h=a.get(i.openingBracket.text);h===void 0&&(h=0),c=h,h++,a.set(i.openingBracket.text,h)}let u=at(e,i.openingBracket.length),p=-1;if(r.includeMinIndentation&&(p=i.computeMinIndentation(e,r.textModel)),l=r.push(new Cm(Ts(e,t),Ts(e,u),i.closingBracket?Ts(at(u,i.child?.length||Zt),t):void 0,s,c,i,p)),e=u,l&&i.child){let h=i.child;if(t=at(e,h.length),Cs(e,o)&&td(t,n)&&(l=LS(h,e,t,n,o,r,s+1,a),!l))return!1}a?.set(i.openingBracket.text,c)}else{let c=e;for(let u of i.children){let p=c;if(c=at(c,u.length),Cs(p,o)&&Cs(n,c)&&(l=LS(u,p,c,n,o,r,s,a),!l))return!1}}return l}var bf=class extends A{constructor(t,n){super();this.textModel=t;this.languageConfigurationService=n}bracketPairsTree=this._register(new Un);onDidChangeEmitter=new C;onDidChange=this.onDidChangeEmitter.event;get canBuildAST(){return this.textModel.getValueLength()<=5e6}bracketsRequested=!1;handleLanguageConfigurationServiceChange(t){(!t.languageId||this.bracketPairsTree.value?.object.didLanguageChange(t.languageId))&&(this.bracketPairsTree.clear(),this.updateBracketPairsTree())}handleDidChangeOptions(t){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeLanguage(t){this.bracketPairsTree.clear(),this.updateBracketPairsTree()}handleDidChangeContent(t){this.bracketPairsTree.value?.object.handleContentChanged(t)}handleDidChangeBackgroundTokenizationState(){this.bracketPairsTree.value?.object.handleDidChangeBackgroundTokenizationState()}handleDidChangeTokens(t){this.bracketPairsTree.value?.object.handleDidChangeTokens(t)}updateBracketPairsTree(){if(this.bracketsRequested&&this.canBuildAST){if(!this.bracketPairsTree.value){let t=new re;this.bracketPairsTree.value=ZN(t.add(new mf(this.textModel,n=>this.languageConfigurationService.getLanguageConfiguration(n))),t),t.add(this.bracketPairsTree.value.object.onDidChange(n=>this.onDidChangeEmitter.fire(n))),this.onDidChangeEmitter.fire()}}else this.bracketPairsTree.value&&(this.bracketPairsTree.clear(),this.onDidChangeEmitter.fire())}getBracketPairsInRange(t){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(t,!1)||xr.empty}getBracketPairsInRangeWithMinIndentation(t){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketPairsInRange(t,!0)||xr.empty}getBracketsInRange(t,n=!1){return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getBracketsInRange(t,n)||xr.empty}findMatchingBracketUp(t,n,o){let r=this.textModel.validatePosition(n),s=this.textModel.getLanguageIdAtPosition(r.lineNumber,r.column);if(this.canBuildAST){let a=this.languageConfigurationService.getLanguageConfiguration(s).bracketsNew.getClosingBracketInfo(t);if(!a)return null;let l=this.getBracketPairsInRange(te.fromPositions(n,n)).findLast(c=>a.closes(c.openingBracketInfo));return l?l.openingBracketRange:null}else{let a=t.toLowerCase(),l=this.languageConfigurationService.getLanguageConfiguration(s).brackets;if(!l)return null;let c=l.textIsBracket[a];return c?ff(this._findMatchingBracketUp(c,r,RS(o))):null}}matchBracket(t,n){if(this.canBuildAST){let o=this.getBracketPairsInRange(te.fromPositions(t,t)).filter(r=>r.closingBracketRange!==void 0&&(r.openingBracketRange.containsPosition(t)||r.closingBracketRange.containsPosition(t))).findLastMaxBy(Gb(r=>r.openingBracketRange.containsPosition(t)?r.openingBracketRange:r.closingBracketRange,te.compareRangesUsingStarts));return o?[o.openingBracketRange,o.closingBracketRange]:null}else{let o=RS(n);return this._matchBracket(this.textModel.validatePosition(t),o)}}_establishBracketSearchOffsets(t,n,o,r){let s=n.getCount(),a=n.getLanguageId(r),l=Math.max(0,t.column-1-o.maxBracketLength);for(let u=r-1;u>=0;u--){let p=n.getEndOffset(u);if(p<=l)break;if(ji(n.getStandardTokenType(u))||n.getLanguageId(u)!==a){l=p;break}}let c=Math.min(n.getLineContent().length,t.column-1+o.maxBracketLength);for(let u=r+1;u<s;u++){let p=n.getStartOffset(u);if(p>=c)break;if(ji(n.getStandardTokenType(u))||n.getLanguageId(u)!==a){c=p;break}}return{searchStartOffset:l,searchEndOffset:c}}_matchBracket(t,n){let o=t.lineNumber,r=this.textModel.tokenization.getLineTokens(o),s=this.textModel.getLineContent(o),a=r.findTokenIndexAtOffset(t.column-1);if(a<0)return null;let l=this.languageConfigurationService.getLanguageConfiguration(r.getLanguageId(a)).brackets;if(l&&!ji(r.getStandardTokenType(a))){let{searchStartOffset:c,searchEndOffset:u}=this._establishBracketSearchOffsets(t,r,l,a),p=null;for(;;){let h=Kn.findNextBracketInRange(l.forwardRegex,o,s,c,u);if(!h)break;if(h.startColumn<=t.column&&t.column<=h.endColumn){let m=s.substring(h.startColumn-1,h.endColumn-1).toLowerCase(),v=this._matchFoundBracket(h,l.textIsBracket[m],l.textIsOpenBracket[m],n);if(v){if(v instanceof Vr)return null;p=v}}c=h.endColumn-1}if(p)return p}if(a>0&&r.getStartOffset(a)===t.column-1){let c=a-1,u=this.languageConfigurationService.getLanguageConfiguration(r.getLanguageId(c)).brackets;if(u&&!ji(r.getStandardTokenType(c))){let{searchStartOffset:p,searchEndOffset:h}=this._establishBracketSearchOffsets(t,r,u,c),m=Kn.findPrevBracketInRange(u.reversedRegex,o,s,p,h);if(m&&m.startColumn<=t.column&&t.column<=m.endColumn){let v=s.substring(m.startColumn-1,m.endColumn-1).toLowerCase(),f=this._matchFoundBracket(m,u.textIsBracket[v],u.textIsOpenBracket[v],n);if(f)return f instanceof Vr?null:f}}}return null}_matchFoundBracket(t,n,o,r){if(!n)return null;let s=o?this._findMatchingBracketDown(n,t.getEndPosition(),r):this._findMatchingBracketUp(n,t.getStartPosition(),r);return s?s instanceof Vr?s:[t,s]:null}_findMatchingBracketUp(t,n,o){let r=t.languageId,s=t.reversedRegex,a=-1,l=0,c=(u,p,h,m)=>{for(;;){if(o&&++l%100===0&&!o())return Vr.INSTANCE;let v=Kn.findPrevBracketInRange(s,u,p,h,m);if(!v)break;let f=p.substring(v.startColumn-1,v.endColumn-1).toLowerCase();if(t.isOpen(f)?a++:t.isClose(f)&&a--,a===0)return v;m=v.startColumn-1}return null};for(let u=n.lineNumber;u>=1;u--){let p=this.textModel.tokenization.getLineTokens(u),h=p.getCount(),m=this.textModel.getLineContent(u),v=h-1,f=m.length,b=m.length;u===n.lineNumber&&(v=p.findTokenIndexAtOffset(n.column-1),f=n.column-1,b=n.column-1);let E=!0;for(;v>=0;v--){let T=p.getLanguageId(v)===r&&!ji(p.getStandardTokenType(v));if(T)E?f=p.getStartOffset(v):(f=p.getStartOffset(v),b=p.getEndOffset(v));else if(E&&f!==b){let _=c(u,m,f,b);if(_)return _}E=T}if(E&&f!==b){let T=c(u,m,f,b);if(T)return T}}return null}_findMatchingBracketDown(t,n,o){let r=t.languageId,s=t.forwardRegex,a=1,l=0,c=(p,h,m,v)=>{for(;;){if(o&&++l%100===0&&!o())return Vr.INSTANCE;let f=Kn.findNextBracketInRange(s,p,h,m,v);if(!f)break;let b=h.substring(f.startColumn-1,f.endColumn-1).toLowerCase();if(t.isOpen(b)?a++:t.isClose(b)&&a--,a===0)return f;m=f.endColumn-1}return null},u=this.textModel.getLineCount();for(let p=n.lineNumber;p<=u;p++){let h=this.textModel.tokenization.getLineTokens(p),m=h.getCount(),v=this.textModel.getLineContent(p),f=0,b=0,E=0;p===n.lineNumber&&(f=h.findTokenIndexAtOffset(n.column-1),b=n.column-1,E=n.column-1);let T=!0;for(;f<m;f++){let _=h.getLanguageId(f)===r&&!ji(h.getStandardTokenType(f));if(_)T||(b=h.getStartOffset(f)),E=h.getEndOffset(f);else if(T&&b!==E){let O=c(p,v,b,E);if(O)return O}T=_}if(T&&b!==E){let _=c(p,v,b,E);if(_)return _}}return null}findPrevBracket(t){let n=this.textModel.validatePosition(t);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketBefore(n)||null;let o=null,r=null,s=null;for(let a=n.lineNumber;a>=1;a--){let l=this.textModel.tokenization.getLineTokens(a),c=l.getCount(),u=this.textModel.getLineContent(a),p=c-1,h=u.length,m=u.length;if(a===n.lineNumber){p=l.findTokenIndexAtOffset(n.column-1),h=n.column-1,m=n.column-1;let f=l.getLanguageId(p);o!==f&&(o=f,r=this.languageConfigurationService.getLanguageConfiguration(o).brackets,s=this.languageConfigurationService.getLanguageConfiguration(o).bracketsNew)}let v=!0;for(;p>=0;p--){let f=l.getLanguageId(p);if(o!==f){if(r&&s&&v&&h!==m){let E=Kn.findPrevBracketInRange(r.reversedRegex,a,u,h,m);if(E)return this._toFoundBracket(s,E);v=!1}o=f,r=this.languageConfigurationService.getLanguageConfiguration(o).brackets,s=this.languageConfigurationService.getLanguageConfiguration(o).bracketsNew}let b=!!r&&!ji(l.getStandardTokenType(p));if(b)v?h=l.getStartOffset(p):(h=l.getStartOffset(p),m=l.getEndOffset(p));else if(s&&r&&v&&h!==m){let E=Kn.findPrevBracketInRange(r.reversedRegex,a,u,h,m);if(E)return this._toFoundBracket(s,E)}v=b}if(s&&r&&v&&h!==m){let f=Kn.findPrevBracketInRange(r.reversedRegex,a,u,h,m);if(f)return this._toFoundBracket(s,f)}}return null}findNextBracket(t){let n=this.textModel.validatePosition(t);if(this.canBuildAST)return this.bracketsRequested=!0,this.updateBracketPairsTree(),this.bracketPairsTree.value?.object.getFirstBracketAfter(n)||null;let o=this.textModel.getLineCount(),r=null,s=null,a=null;for(let l=n.lineNumber;l<=o;l++){let c=this.textModel.tokenization.getLineTokens(l),u=c.getCount(),p=this.textModel.getLineContent(l),h=0,m=0,v=0;if(l===n.lineNumber){h=c.findTokenIndexAtOffset(n.column-1),m=n.column-1,v=n.column-1;let b=c.getLanguageId(h);r!==b&&(r=b,s=this.languageConfigurationService.getLanguageConfiguration(r).brackets,a=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew)}let f=!0;for(;h<u;h++){let b=c.getLanguageId(h);if(r!==b){if(a&&s&&f&&m!==v){let T=Kn.findNextBracketInRange(s.forwardRegex,l,p,m,v);if(T)return this._toFoundBracket(a,T);f=!1}r=b,s=this.languageConfigurationService.getLanguageConfiguration(r).brackets,a=this.languageConfigurationService.getLanguageConfiguration(r).bracketsNew}let E=!!s&&!ji(c.getStandardTokenType(h));if(E)f||(m=c.getStartOffset(h)),v=c.getEndOffset(h);else if(a&&s&&f&&m!==v){let T=Kn.findNextBracketInRange(s.forwardRegex,l,p,m,v);if(T)return this._toFoundBracket(a,T)}f=E}if(a&&s&&f&&m!==v){let b=Kn.findNextBracketInRange(s.forwardRegex,l,p,m,v);if(b)return this._toFoundBracket(a,b)}}return null}findEnclosingBrackets(t,n){let o=this.textModel.validatePosition(t);if(this.canBuildAST){let v=te.fromPositions(o),f=this.getBracketPairsInRange(te.fromPositions(o,o)).findLast(b=>b.closingBracketRange!==void 0&&b.range.strictContainsRange(v));return f?[f.openingBracketRange,f.closingBracketRange]:null}let r=RS(n),s=this.textModel.getLineCount(),a=new Map,l=[],c=(v,f)=>{if(!a.has(v)){let b=[];for(let E=0,T=f?f.brackets.length:0;E<T;E++)b[E]=0;a.set(v,b)}l=a.get(v)},u=0,p=(v,f,b,E,T)=>{for(;;){if(r&&++u%100===0&&!r())return Vr.INSTANCE;let _=Kn.findNextBracketInRange(v.forwardRegex,f,b,E,T);if(!_)break;let O=b.substring(_.startColumn-1,_.endColumn-1).toLowerCase(),M=v.textIsBracket[O];if(M&&(M.isOpen(O)?l[M.index]++:M.isClose(O)&&l[M.index]--,l[M.index]===-1))return this._matchFoundBracket(_,M,!1,r);E=_.endColumn-1}return null},h=null,m=null;for(let v=o.lineNumber;v<=s;v++){let f=this.textModel.tokenization.getLineTokens(v),b=f.getCount(),E=this.textModel.getLineContent(v),T=0,_=0,O=0;if(v===o.lineNumber){T=f.findTokenIndexAtOffset(o.column-1),_=o.column-1,O=o.column-1;let U=f.getLanguageId(T);h!==U&&(h=U,m=this.languageConfigurationService.getLanguageConfiguration(h).brackets,c(h,m))}let M=!0;for(;T<b;T++){let U=f.getLanguageId(T);if(h!==U){if(m&&M&&_!==O){let Q=p(m,v,E,_,O);if(Q)return ff(Q);M=!1}h=U,m=this.languageConfigurationService.getLanguageConfiguration(h).brackets,c(h,m)}let he=!!m&&!ji(f.getStandardTokenType(T));if(he)M||(_=f.getStartOffset(T)),O=f.getEndOffset(T);else if(m&&M&&_!==O){let Q=p(m,v,E,_,O);if(Q)return ff(Q)}M=he}if(m&&M&&_!==O){let U=p(m,v,E,_,O);if(U)return ff(U)}}return null}_toFoundBracket(t,n){if(!n)return null;let o=this.textModel.getValueInRange(n);o=o.toLowerCase();let r=t.getBracketInfo(o);return r?{range:n,bracketInfo:r}:null}};function ZN(i,e){return{object:i,dispose:()=>e?.dispose()}}function RS(i){if(typeof i>"u")return()=>!0;{let e=Date.now();return()=>Date.now()-e<=i}}var Vr=class i{static INSTANCE=new i;_searchCanceledBrand=void 0;constructor(){}};function ff(i){return i instanceof Vr?null:i}var eF=I("editor.lineHighlightBackground",null,d("lineHighlight","Background color for the highlight of line at the cursor position.")),KOe=I("editor.lineHighlightBorder",{dark:"#282828",light:"#eeeeee",hcDark:"#f38518",hcLight:_e},d("lineHighlightBorderBox","Background color for the border around the line at the cursor position.")),GOe=I("editor.rangeHighlightBackground",{dark:"#ffffff0b",light:"#fdff0033",hcDark:null,hcLight:null},d("rangeHighlight","Background color of highlighted ranges, like by quick open and find features. The color must not be opaque so as not to hide underlying decorations."),!0),qOe=I("editor.rangeHighlightBorder",{dark:null,light:null,hcDark:gt,hcLight:gt},d("rangeHighlightBorder","Background color of the border around highlighted ranges.")),$Oe=I("editor.symbolHighlightBackground",{dark:Co,light:Co,hcDark:null,hcLight:null},d("symbolHighlight","Background color of highlighted symbol, like for go to definition or go next/previous symbol. The color must not be opaque so as not to hide underlying decorations."),!0),jOe=I("editor.symbolHighlightBorder",{dark:null,light:null,hcDark:gt,hcLight:gt},d("symbolHighlightBorder","Background color of the border around highlighted symbols.")),YD=I("editorCursor.foreground",{dark:"#AEAFAD",light:B.black,hcDark:B.white,hcLight:"#0F4A85"},d("caret","Color of the editor cursor.")),QD=I("editorCursor.background",null,d("editorCursorBackground","The background color of the editor cursor. Allows customizing the color of a character overlapped by a block cursor.")),YOe=I("editorMultiCursor.primary.foreground",YD,d("editorMultiCursorPrimaryForeground","Color of the primary editor cursor when multiple cursors are present.")),QOe=I("editorMultiCursor.primary.background",QD,d("editorMultiCursorPrimaryBackground","The background color of the primary editor cursor when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),XOe=I("editorMultiCursor.secondary.foreground",YD,d("editorMultiCursorSecondaryForeground","Color of secondary editor cursors when multiple cursors are present.")),JOe=I("editorMultiCursor.secondary.background",QD,d("editorMultiCursorSecondaryBackground","The background color of secondary editor cursors when multiple cursors are present. Allows customizing the color of a character overlapped by a block cursor.")),XD=I("editorWhitespace.foreground",{dark:"#e3e4e229",light:"#33333333",hcDark:"#e3e4e229",hcLight:"#CCCCCC"},d("editorWhitespaces","Color of whitespace characters in the editor.")),ZOe=I("editorLineNumber.foreground",{dark:"#858585",light:"#237893",hcDark:B.white,hcLight:"#292929"},d("editorLineNumbers","Color of editor line numbers.")),tF=I("editorIndentGuide.background",XD,d("editorIndentGuides","Color of the editor indentation guides."),!1,d("deprecatedEditorIndentGuides","'editorIndentGuide.background' is deprecated. Use 'editorIndentGuide.background1' instead.")),nF=I("editorIndentGuide.activeBackground",XD,d("editorActiveIndentGuide","Color of the active editor indentation guides."),!1,d("deprecatedEditorActiveIndentGuide","'editorIndentGuide.activeBackground' is deprecated. Use 'editorIndentGuide.activeBackground1' instead.")),eAe=I("editorIndentGuide.background1",tF,d("editorIndentGuides1","Color of the editor indentation guides (1).")),tAe=I("editorIndentGuide.background2","#00000000",d("editorIndentGuides2","Color of the editor indentation guides (2).")),nAe=I("editorIndentGuide.background3","#00000000",d("editorIndentGuides3","Color of the editor indentation guides (3).")),iAe=I("editorIndentGuide.background4","#00000000",d("editorIndentGuides4","Color of the editor indentation guides (4).")),oAe=I("editorIndentGuide.background5","#00000000",d("editorIndentGuides5","Color of the editor indentation guides (5).")),rAe=I("editorIndentGuide.background6","#00000000",d("editorIndentGuides6","Color of the editor indentation guides (6).")),sAe=I("editorIndentGuide.activeBackground1",nF,d("editorActiveIndentGuide1","Color of the active editor indentation guides (1).")),aAe=I("editorIndentGuide.activeBackground2","#00000000",d("editorActiveIndentGuide2","Color of the active editor indentation guides (2).")),lAe=I("editorIndentGuide.activeBackground3","#00000000",d("editorActiveIndentGuide3","Color of the active editor indentation guides (3).")),dAe=I("editorIndentGuide.activeBackground4","#00000000",d("editorActiveIndentGuide4","Color of the active editor indentation guides (4).")),cAe=I("editorIndentGuide.activeBackground5","#00000000",d("editorActiveIndentGuide5","Color of the active editor indentation guides (5).")),uAe=I("editorIndentGuide.activeBackground6","#00000000",d("editorActiveIndentGuide6","Color of the active editor indentation guides (6).")),iF=I("editorActiveLineNumber.foreground",{dark:"#c6c6c6",light:"#0B216F",hcDark:gt,hcLight:gt},d("editorActiveLineNumber","Color of editor active line number"),!1,d("deprecatedEditorActiveLineNumber","Id is deprecated. Use 'editorLineNumber.activeForeground' instead.")),pAe=I("editorLineNumber.activeForeground",iF,d("editorActiveLineNumber","Color of editor active line number")),hAe=I("editorLineNumber.dimmedForeground",null,d("editorDimmedLineNumber","Color of the final editor line when editor.renderFinalNewline is set to dimmed.")),gAe=I("editorRuler.foreground",{dark:"#5A5A5A",light:B.lightgrey,hcDark:B.white,hcLight:"#292929"},d("editorRuler","Color of the editor rulers.")),mAe=I("editorCodeLens.foreground",{dark:"#999999",light:"#919191",hcDark:"#999999",hcLight:"#292929"},d("editorCodeLensForeground","Foreground color of editor CodeLens")),fAe=I("editorBracketMatch.background",{dark:"#0064001a",light:"#0064001a",hcDark:"#0064001a",hcLight:"#0000"},d("editorBracketMatchBackground","Background color behind matching brackets")),bAe=I("editorBracketMatch.border",{dark:"#888",light:"#B9B9B9",hcDark:_e,hcLight:_e},d("editorBracketMatchBorder","Color for matching brackets boxes")),vAe=I("editorOverviewRuler.border",{dark:"#7f7f7f4d",light:"#7f7f7f4d",hcDark:"#7f7f7f4d",hcLight:"#666666"},d("editorOverviewRulerBorder","Color of the overview ruler border.")),yAe=I("editorOverviewRuler.background",null,d("editorOverviewRulerBackground","Background color of the editor overview ruler.")),IAe=I("editorGutter.background",qa,d("editorGutter","Background color of the editor gutter. The gutter contains the glyph margins and the line numbers.")),xAe=I("editorUnnecessaryCode.border",{dark:null,light:null,hcDark:B.fromHex("#fff").transparent(.8),hcLight:_e},d("unnecessaryCodeBorder","Border color of unnecessary (unused) source code in the editor.")),SAe=I("editorUnnecessaryCode.opacity",{dark:B.fromHex("#000a"),light:B.fromHex("#0007"),hcDark:null,hcLight:null},d("unnecessaryCodeOpacity",`Opacity of unnecessary (unused) source code in the editor. For example, "#000000c0" will render the code with 75% opacity. For high contrast themes, use the  'editorUnnecessaryCode.border' theme color to underline unnecessary code instead of fading it out.`)),EAe=I("editorGhostText.border",{dark:null,light:null,hcDark:B.fromHex("#fff").transparent(.8),hcLight:B.fromHex("#292929").transparent(.8)},d("editorGhostTextBorder","Border color of ghost text in the editor.")),CAe=I("editorGhostText.foreground",{dark:B.fromHex("#ffffff56"),light:B.fromHex("#0007"),hcDark:null,hcLight:null},d("editorGhostTextForeground","Foreground color of the ghost text in the editor.")),wAe=I("editorGhostText.background",null,d("editorGhostTextBackground","Background color of the ghost text in the editor.")),oF=new B(new Te(0,122,204,.6)),TAe=I("editorOverviewRuler.rangeHighlightForeground",oF,d("overviewRulerRangeHighlight","Overview ruler marker color for range highlights. The color must not be opaque so as not to hide underlying decorations."),!0),kAe=I("editorOverviewRuler.errorForeground",{dark:new B(new Te(255,18,18,.7)),light:new B(new Te(255,18,18,.7)),hcDark:new B(new Te(255,50,50,1)),hcLight:"#B5200D"},d("overviewRuleError","Overview ruler marker color for errors.")),DAe=I("editorOverviewRuler.warningForeground",{dark:tr,light:tr,hcDark:Sd,hcLight:Sd},d("overviewRuleWarning","Overview ruler marker color for warnings.")),_Ae=I("editorOverviewRuler.infoForeground",{dark:Ur,light:Ur,hcDark:Ed,hcLight:Ed},d("overviewRuleInfo","Overview ruler marker color for infos.")),JD=I("editorBracketHighlight.foreground1",{dark:"#FFD700",light:"#0431FAFF",hcDark:"#FFD700",hcLight:"#0431FAFF"},d("editorBracketHighlightForeground1","Foreground color of brackets (1). Requires enabling bracket pair colorization.")),ZD=I("editorBracketHighlight.foreground2",{dark:"#DA70D6",light:"#319331FF",hcDark:"#DA70D6",hcLight:"#319331FF"},d("editorBracketHighlightForeground2","Foreground color of brackets (2). Requires enabling bracket pair colorization.")),e_=I("editorBracketHighlight.foreground3",{dark:"#179FFF",light:"#7B3814FF",hcDark:"#87CEFA",hcLight:"#7B3814FF"},d("editorBracketHighlightForeground3","Foreground color of brackets (3). Requires enabling bracket pair colorization.")),t_=I("editorBracketHighlight.foreground4","#00000000",d("editorBracketHighlightForeground4","Foreground color of brackets (4). Requires enabling bracket pair colorization.")),n_=I("editorBracketHighlight.foreground5","#00000000",d("editorBracketHighlightForeground5","Foreground color of brackets (5). Requires enabling bracket pair colorization.")),i_=I("editorBracketHighlight.foreground6","#00000000",d("editorBracketHighlightForeground6","Foreground color of brackets (6). Requires enabling bracket pair colorization.")),o_=I("editorBracketHighlight.unexpectedBracket.foreground",{dark:new B(new Te(255,18,18,.8)),light:new B(new Te(255,18,18,.8)),hcDark:"new Color(new RGBA(255, 50, 50, 1))",hcLight:"#B5200D"},d("editorBracketHighlightUnexpectedBracketForeground","Foreground color of unexpected brackets.")),LAe=I("editorBracketPairGuide.background1","#00000000",d("editorBracketPairGuide.background1","Background color of inactive bracket pair guides (1). Requires enabling bracket pair guides.")),RAe=I("editorBracketPairGuide.background2","#00000000",d("editorBracketPairGuide.background2","Background color of inactive bracket pair guides (2). Requires enabling bracket pair guides.")),PAe=I("editorBracketPairGuide.background3","#00000000",d("editorBracketPairGuide.background3","Background color of inactive bracket pair guides (3). Requires enabling bracket pair guides.")),OAe=I("editorBracketPairGuide.background4","#00000000",d("editorBracketPairGuide.background4","Background color of inactive bracket pair guides (4). Requires enabling bracket pair guides.")),AAe=I("editorBracketPairGuide.background5","#00000000",d("editorBracketPairGuide.background5","Background color of inactive bracket pair guides (5). Requires enabling bracket pair guides.")),MAe=I("editorBracketPairGuide.background6","#00000000",d("editorBracketPairGuide.background6","Background color of inactive bracket pair guides (6). Requires enabling bracket pair guides.")),NAe=I("editorBracketPairGuide.activeBackground1","#00000000",d("editorBracketPairGuide.activeBackground1","Background color of active bracket pair guides (1). Requires enabling bracket pair guides.")),FAe=I("editorBracketPairGuide.activeBackground2","#00000000",d("editorBracketPairGuide.activeBackground2","Background color of active bracket pair guides (2). Requires enabling bracket pair guides.")),BAe=I("editorBracketPairGuide.activeBackground3","#00000000",d("editorBracketPairGuide.activeBackground3","Background color of active bracket pair guides (3). Requires enabling bracket pair guides.")),WAe=I("editorBracketPairGuide.activeBackground4","#00000000",d("editorBracketPairGuide.activeBackground4","Background color of active bracket pair guides (4). Requires enabling bracket pair guides.")),UAe=I("editorBracketPairGuide.activeBackground5","#00000000",d("editorBracketPairGuide.activeBackground5","Background color of active bracket pair guides (5). Requires enabling bracket pair guides.")),VAe=I("editorBracketPairGuide.activeBackground6","#00000000",d("editorBracketPairGuide.activeBackground6","Background color of active bracket pair guides (6). Requires enabling bracket pair guides.")),zAe=I("editorUnicodeHighlight.border",tr,d("editorUnicodeHighlight.border","Border color used to highlight unicode characters.")),HAe=I("editorUnicodeHighlight.background",q1,d("editorUnicodeHighlight.background","Background color used to highlight unicode characters."));tf((i,e)=>{let t=i.getColor(qa),n=i.getColor(eF),o=n&&!n.isTransparent()?n:t;o&&e.addRule(`.monaco-editor .inputarea.ime-input { background-color: ${o}; }`)});var vf=class extends A{constructor(t){super();this.textModel=t;this.colorizationOptions=t.getOptions().bracketPairColorizationOptions,this._register(t.bracketPairs.onDidChange(n=>{this.onDidChangeEmitter.fire()}))}colorizationOptions;colorProvider=new yf;onDidChangeEmitter=new C;onDidChange=this.onDidChangeEmitter.event;handleDidChangeOptions(t){this.colorizationOptions=this.textModel.getOptions().bracketPairColorizationOptions}getDecorationsInRange(t,n,o,r){return r?[]:n===void 0?[]:this.colorizationOptions.enabled?this.textModel.bracketPairs.getBracketsInRange(t,!0).map(a=>({id:`bracket${a.range.toString()}-${a.nestingLevel}`,options:{description:"BracketPairColorization",inlineClassName:this.colorProvider.getInlineClassName(a,this.colorizationOptions.independentColorPoolPerBracketType)},ownerId:0,range:a.range})).toArray():[]}getAllDecorations(t,n){return t===void 0?[]:this.colorizationOptions.enabled?this.getDecorationsInRange(new te(1,1,this.textModel.getLineCount(),1),t,n):[]}},yf=class{unexpectedClosingBracketClassName="unexpected-closing-bracket";getInlineClassName(e,t){return e.isInvalid?this.unexpectedClosingBracketClassName:this.getInlineClassNameOfLevel(t?e.nestingLevelOfEqualBracketType:e.nestingLevel)}getInlineClassNameOfLevel(e){return`bracket-highlighting-${e%30}`}};tf((i,e)=>{let t=[JD,ZD,e_,t_,n_,i_],n=new yf;e.addRule(`.monaco-editor .${n.unexpectedClosingBracketClassName} { color: ${i.getColor(o_)}; }`);let o=t.map(r=>i.getColor(r)).filter(r=>!!r).filter(r=>!r.isTransparent());for(let r=0;r<30;r++){let s=o[r%o.length];e.addRule(`.monaco-editor .${n.getInlineClassNameOfLevel(r)} { color: ${s}; }`)}});function Bd(i){return i.toString()}var oi=class i{constructor(e,t,n,o,r,s,a){this.beforeVersionId=e;this.afterVersionId=t;this.beforeEOL=n;this.afterEOL=o;this.beforeCursorState=r;this.afterCursorState=s;this.changes=a}static create(e,t){let n=e.getAlternativeVersionId(),o=AS(e);return new i(n,n,o,o,t,t,[])}append(e,t,n,o,r){t.length>0&&(this.changes=jk(this.changes,t)),this.afterEOL=n,this.afterVersionId=o,this.afterCursorState=r}static _writeSelectionsSize(e){return 4+4*4*(e?e.length:0)}static _writeSelections(e,t,n){if(sn(e,t?t.length:0,n),n+=4,t)for(let o of t)sn(e,o.selectionStartLineNumber,n),n+=4,sn(e,o.selectionStartColumn,n),n+=4,sn(e,o.positionLineNumber,n),n+=4,sn(e,o.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){let o=rn(e,t);t+=4;for(let r=0;r<o;r++){let s=rn(e,t);t+=4;let a=rn(e,t);t+=4;let l=rn(e,t);t+=4;let c=rn(e,t);t+=4,n.push(new Fr(s,a,l,c))}return t}serialize(){let e=10+i._writeSelectionsSize(this.beforeCursorState)+i._writeSelectionsSize(this.afterCursorState)+4;for(let o of this.changes)e+=o.writeSize();let t=new Uint8Array(e),n=0;sn(t,this.beforeVersionId,n),n+=4,sn(t,this.afterVersionId,n),n+=4,Cg(t,this.beforeEOL,n),n+=1,Cg(t,this.afterEOL,n),n+=1,n=i._writeSelections(t,this.beforeCursorState,n),n=i._writeSelections(t,this.afterCursorState,n),sn(t,this.changes.length,n),n+=4;for(let o of this.changes)n=o.write(t,n);return t.buffer}static deserialize(e){let t=new Uint8Array(e),n=0,o=rn(t,n);n+=4;let r=rn(t,n);n+=4;let s=Eg(t,n);n+=1;let a=Eg(t,n);n+=1;let l=[];n=i._readSelections(t,n,l);let c=[];n=i._readSelections(t,n,c);let u=rn(t,n);n+=4;let p=[];for(let h=0;h<u;h++)n=yi.read(t,n,p);return new i(o,r,s,a,l,c,p)}},If=class{constructor(e,t,n,o){this.label=e;this.code=t;this.model=n,this._data=oi.create(n,o)}model;_data;get type(){return 0}get resource(){return N.isUri(this.model)?this.model:this.model.uri}toString(){return(this._data instanceof oi?this._data:oi.deserialize(this._data)).changes.map(t=>t.toString()).join(", ")}matchesResource(e){return(N.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof oi}append(e,t,n,o,r){this._data instanceof oi&&this._data.append(e,t,n,o,r)}close(){this._data instanceof oi&&(this._data=this._data.serialize())}open(){this._data instanceof oi||(this._data=oi.deserialize(this._data))}undo(){if(N.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof oi&&(this._data=this._data.serialize());let e=oi.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(N.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof oi&&(this._data=this._data.serialize());let e=oi.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof oi&&(this._data=this._data.serialize()),this._data.byteLength+168}},OS=class{constructor(e,t,n){this.label=e;this.code=t;this._isOpen=!0,this._editStackElementsArr=n.slice(0),this._editStackElementsMap=new Map;for(let o of this._editStackElementsArr){let r=Bd(o.resource);this._editStackElementsMap.set(r,o)}this._delegate=null}type=1;_isOpen;_editStackElementsArr;_editStackElementsMap;_delegate;get resources(){return this._editStackElementsArr.map(e=>e.resource)}setDelegate(e){this._delegate=e}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}getMissingModels(){let e=[];for(let t of this._editStackElementsArr)N.isUri(t.model)&&e.push(t.model);return e}matchesResource(e){let t=Bd(e);return this._editStackElementsMap.has(t)}setModel(e){let t=Bd(N.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;let t=Bd(e.uri);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).canAppend(e):!1}append(e,t,n,o,r){let s=Bd(e.uri);this._editStackElementsMap.get(s).append(e,t,n,o,r)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(let e of this._editStackElementsArr)e.undo()}redo(){for(let e of this._editStackElementsArr)e.redo()}heapSize(e){let t=Bd(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){let e=[];for(let t of this._editStackElementsArr)e.push(`${Ri(t.resource)}: ${t}`);return`{${e.join(", ")}}`}};function AS(i){return i.getEOL()===`
`?0:1}function PS(i){return i?i instanceof If||i instanceof OS:!1}var xf=class i{_model;_undoRedoService;constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){let e=this._undoRedoService.getLastElement(this._model.uri);PS(e)&&e.close()}popStackElement(){let e=this._undoRedoService.getLastElement(this._model.uri);PS(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e,t){let n=this._undoRedoService.getLastElement(this._model.uri);if(PS(n)&&n.canAppend(this._model))return n;let o=new If(d("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(o,t),o}pushEOL(e){let t=this._getOrCreateEditStackElement(null,void 0);this._model.setEOL(e),t.append(this._model,[],AS(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n,o){let r=this._getOrCreateEditStackElement(e,o),s=this._model.applyEdits(t,!0),a=i._computeCursorState(n,s),l=s.map((c,u)=>({index:u,textChange:c.textChange}));return l.sort((c,u)=>c.textChange.oldPosition===u.textChange.oldPosition?c.index-u.index:c.textChange.oldPosition-u.textChange.oldPosition),r.append(this._model,l.map(c=>c.textChange),AS(this._model),this._model.getAlternativeVersionId(),a),a}static _computeCursorState(e,t){try{return e?e(t):null}catch(n){return Ne(n),null}}};var Wd=class extends A{_isDisposed=!1;dispose(){super.dispose(),this._isDisposed=!0}assertNotDisposed(){if(this._isDisposed)throw new Error("TextModelPart is disposed!")}};function s_(i,e){let t=0,n=0,o=i.length;for(;n<o;){let r=i.charCodeAt(n);if(r===32)t++;else if(r===9)t=t-t%e+e;else break;n++}return n===o?-1:t}var Sf=class extends Wd{constructor(t,n){super();this.textModel=t;this.languageConfigurationService=n}getLanguageConfiguration(t){return this.languageConfigurationService.getLanguageConfiguration(t)}_computeIndentLevel(t){return s_(this.textModel.getLineContent(t+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(t,n,o){this.assertNotDisposed();let r=this.textModel.getLineCount();if(t<1||t>r)throw new Ge("Illegal value for lineNumber");let s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,a=!!(s&&s.offSide),l=-2,c=-1,u=-2,p=-1,h=Q=>{if(l!==-1&&(l===-2||l>Q-1)){l=-1,c=-1;for(let se=Q-2;se>=0;se--){let ne=this._computeIndentLevel(se);if(ne>=0){l=se,c=ne;break}}}if(u===-2){u=-1,p=-1;for(let se=Q;se<r;se++){let ne=this._computeIndentLevel(se);if(ne>=0){u=se,p=ne;break}}}},m=-2,v=-1,f=-2,b=-1,E=Q=>{if(m===-2){m=-1,v=-1;for(let se=Q-2;se>=0;se--){let ne=this._computeIndentLevel(se);if(ne>=0){m=se,v=ne;break}}}if(f!==-1&&(f===-2||f<Q-1)){f=-1,b=-1;for(let se=Q;se<r;se++){let ne=this._computeIndentLevel(se);if(ne>=0){f=se,b=ne;break}}}},T=0,_=!0,O=0,M=!0,U=0,he=0;for(let Q=0;_||M;Q++){let se=t-Q,ne=t+Q;Q>1&&(se<1||se<n)&&(_=!1),Q>1&&(ne>r||ne>o)&&(M=!1),Q>5e4&&(_=!1,M=!1);let V=-1;if(_&&se>=1){let Ce=this._computeIndentLevel(se-1);Ce>=0?(u=se-1,p=Ce,V=Math.ceil(Ce/this.textModel.getOptions().indentSize)):(h(se),V=this._getIndentLevelForWhitespaceLine(a,c,p))}let X=-1;if(M&&ne<=r){let Ce=this._computeIndentLevel(ne-1);Ce>=0?(m=ne-1,v=Ce,X=Math.ceil(Ce/this.textModel.getOptions().indentSize)):(E(ne),X=this._getIndentLevelForWhitespaceLine(a,v,b))}if(Q===0){he=V;continue}if(Q===1){if(ne<=r&&X>=0&&he+1===X){_=!1,T=ne,O=ne,U=X;continue}if(se>=1&&V>=0&&V-1===he){M=!1,T=se,O=se,U=V;continue}if(T=t,O=t,U=he,U===0)return{startLineNumber:T,endLineNumber:O,indent:U}}_&&(V>=U?T=se:_=!1),M&&(X>=U?O=ne:M=!1)}return{startLineNumber:T,endLineNumber:O,indent:U}}getLinesBracketGuides(t,n,o,r){let s=[];for(let h=t;h<=n;h++)s.push([]);let a=!0,l=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new te(t,1,n,this.textModel.getLineMaxColumn(n))).toArray(),c;if(o&&l.length>0){let h=(t<=o.lineNumber&&o.lineNumber<=n?l:this.textModel.bracketPairs.getBracketPairsInRange(te.fromPositions(o)).toArray()).filter(m=>te.strictContainsPosition(m.range,o));c=OC(h,m=>a||m.range.startLineNumber!==m.range.endLineNumber)?.range}let u=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,p=new MS;for(let h of l){if(!h.closingBracketRange)continue;let m=c&&h.range.equalsRange(c);if(!m&&!r.includeInactive)continue;let v=p.getInlineClassName(h.nestingLevel,h.nestingLevelOfEqualBracketType,u)+(r.highlightActive&&m?" "+p.activeClassName:""),f=h.openingBracketRange.getStartPosition(),b=h.closingBracketRange.getStartPosition(),E=r.horizontalGuides===2||r.horizontalGuides===1&&m;if(h.range.startLineNumber===h.range.endLineNumber){a&&E&&s[h.range.startLineNumber-t].push(new Va(-1,h.openingBracketRange.getEndPosition().column,v,new pd(!1,b.column),-1,-1));continue}let T=this.getVisibleColumnFromPosition(b),_=this.getVisibleColumnFromPosition(h.openingBracketRange.getStartPosition()),O=Math.min(_,T,h.minVisibleColumnIndentation+1),M=!1;Lr(this.textModel.getLineContent(h.closingBracketRange.startLineNumber))<h.closingBracketRange.startColumn-1&&(M=!0);let Q=Math.max(f.lineNumber,t),se=Math.min(b.lineNumber,n),ne=M?1:0;for(let V=Q;V<se+ne;V++)s[V-t].push(new Va(O,-1,v,null,V===f.lineNumber?f.column:-1,V===b.lineNumber?b.column:-1));E&&(f.lineNumber>=t&&_>O&&s[f.lineNumber-t].push(new Va(O,-1,v,new pd(!1,f.column),-1,-1)),b.lineNumber<=n&&T>O&&s[b.lineNumber-t].push(new Va(O,-1,v,new pd(!M,b.column),-1,-1)))}for(let h of s)h.sort((m,v)=>m.visibleColumn-v.visibleColumn);return s}getVisibleColumnFromPosition(t){return Br.visibleColumnFromColumn(this.textModel.getLineContent(t.lineNumber),t.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(t,n){this.assertNotDisposed();let o=this.textModel.getLineCount();if(t<1||t>o)throw new Error("Illegal value for startLineNumber");if(n<1||n>o)throw new Error("Illegal value for endLineNumber");let r=this.textModel.getOptions(),s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,a=!!(s&&s.offSide),l=new Array(n-t+1),c=-2,u=-1,p=-2,h=-1;for(let m=t;m<=n;m++){let v=m-t,f=this._computeIndentLevel(m-1);if(f>=0){c=m-1,u=f,l[v]=Math.ceil(f/r.indentSize);continue}if(c===-2){c=-1,u=-1;for(let b=m-2;b>=0;b--){let E=this._computeIndentLevel(b);if(E>=0){c=b,u=E;break}}}if(p!==-1&&(p===-2||p<m-1)){p=-1,h=-1;for(let b=m;b<o;b++){let E=this._computeIndentLevel(b);if(E>=0){p=b,h=E;break}}}l[v]=this._getIndentLevelForWhitespaceLine(a,u,h)}return l}_getIndentLevelForWhitespaceLine(t,n,o){let r=this.textModel.getOptions();return n===-1||o===-1?0:n<o?1+Math.floor(n/r.indentSize):n===o||t?Math.ceil(o/r.indentSize):1+Math.floor(o/r.indentSize)}},MS=class{activeClassName="indent-active";getInlineClassName(e,t,n){return this.getInlineClassNameOfLevel(n?t:e)}getInlineClassNameOfLevel(e){return`bracket-indent-guide lvl-${e%30}`}};var NS=class{spacesDiff=0;looksLikeAlignment=!1};function sF(i,e,t,n,o){o.spacesDiff=0,o.looksLikeAlignment=!1;let r;for(r=0;r<e&&r<n;r++){let h=i.charCodeAt(r),m=t.charCodeAt(r);if(h!==m)break}let s=0,a=0;for(let h=r;h<e;h++)i.charCodeAt(h)===32?s++:a++;let l=0,c=0;for(let h=r;h<n;h++)t.charCodeAt(h)===32?l++:c++;if(s>0&&a>0||l>0&&c>0)return;let u=Math.abs(a-c),p=Math.abs(s-l);if(u===0){o.spacesDiff=p,p>0&&0<=l-1&&l-1<i.length&&l<t.length&&t.charCodeAt(l)!==32&&i.charCodeAt(l-1)===32&&i.charCodeAt(i.length-1)===44&&(o.looksLikeAlignment=!0);return}if(p%u===0){o.spacesDiff=p/u;return}}function FS(i,e,t){let n=Math.min(i.getLineCount(),1e4),o=0,r=0,s="",a=0,l=[2,4,6,8,3,5,7],c=8,u=[0,0,0,0,0,0,0,0,0],p=new NS;for(let v=1;v<=n;v++){let f=i.getLineLength(v),b=i.getLineContent(v),E=f<=65536,T=!1,_=0,O=0,M=0;for(let he=0,Q=f;he<Q;he++){let se=E?b.charCodeAt(he):i.getLineCharCode(v,he);if(se===9)M++;else if(se===32)O++;else{T=!0,_=he;break}}if(!T||(M>0?o++:O>1&&r++,sF(s,a,b,_,p),p.looksLikeAlignment&&!(t&&e===p.spacesDiff)))continue;let U=p.spacesDiff;U<=c&&u[U]++,s=b,a=_}let h=t;o!==r&&(h=o<r);let m=e;if(h){let v=h?0:.1*n;l.forEach(f=>{let b=u[f];b>v&&(v=b,m=f)}),m===4&&u[4]>0&&u[2]>0&&u[2]>=u[4]/2&&(m=2)}return{insertSpaces:h,tabSize:m}}function jn(i){return(i.metadata&1)>>>0}function it(i,e){i.metadata=i.metadata&254|e<<0}function dn(i){return(i.metadata&2)>>>1===1}function et(i,e){i.metadata=i.metadata&253|(e?1:0)<<1}function g_(i){return(i.metadata&4)>>>2===1}function a_(i,e){i.metadata=i.metadata&251|(e?1:0)<<2}function m_(i){return(i.metadata&64)>>>6===1}function l_(i,e){i.metadata=i.metadata&191|(e?1:0)<<6}function lF(i){return(i.metadata&24)>>>3}function d_(i,e){i.metadata=i.metadata&231|e<<3}function dF(i){return(i.metadata&32)>>>5===1}function c_(i,e){i.metadata=i.metadata&223|(e?1:0)<<5}var dp=class{metadata;parent;left;right;start;end;delta;maxEnd;id;ownerId;options;cachedVersionId;cachedAbsoluteStart;cachedAbsoluteEnd;range;constructor(e,t,n){this.metadata=0,this.parent=this,this.left=this,this.right=this,it(this,1),this.start=t,this.end=n,this.delta=0,this.maxEnd=n,this.id=e,this.ownerId=0,this.options=null,a_(this,!1),l_(this,!1),d_(this,1),c_(this,!1),this.cachedVersionId=0,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=null,et(this,!1)}reset(e,t,n,o){this.start=t,this.end=n,this.maxEnd=n,this.cachedVersionId=e,this.cachedAbsoluteStart=t,this.cachedAbsoluteEnd=n,this.range=o}setOptions(e){this.options=e;let t=this.options.className;a_(this,t==="squiggly-error"||t==="squiggly-warning"||t==="squiggly-info"),l_(this,this.options.glyphMarginClassName!==null),d_(this,this.options.stickiness),c_(this,this.options.collapseOnReplaceEdit)}setCachedOffsets(e,t,n){this.cachedVersionId!==n&&(this.range=null),this.cachedVersionId=n,this.cachedAbsoluteStart=e,this.cachedAbsoluteEnd=t}detach(){this.parent=null,this.left=null,this.right=null}},Ee=new dp(null,0,0);Ee.parent=Ee;Ee.left=Ee;Ee.right=Ee;it(Ee,0);var Vd=class{root;requestNormalizeDelta;constructor(){this.root=Ee,this.requestNormalizeDelta=!1}intervalSearch(e,t,n,o,r,s){return this.root===Ee?[]:fF(this,e,t,n,o,r,s)}search(e,t,n,o){return this.root===Ee?[]:u_(this,e,t,n,o)}collectNodesFromOwner(e){return gF(this,e)}collectNodesPostOrder(){return mF(this)}insert(e){p_(this,e),this._normalizeDeltaIfNecessary()}delete(e){h_(this,e),this._normalizeDeltaIfNecessary()}resolveNode(e,t){let n=e,o=0;for(;e!==this.root;)e===e.parent.right&&(o+=e.parent.delta),e=e.parent;let r=n.start+o,s=n.end+o;n.setCachedOffsets(r,s,t)}acceptReplace(e,t,n,o){let r=pF(this,e,e+t);for(let s=0,a=r.length;s<a;s++){let l=r[s];h_(this,l)}this._normalizeDeltaIfNecessary(),hF(this,e,e+t,n),this._normalizeDeltaIfNecessary();for(let s=0,a=r.length;s<a;s++){let l=r[s];l.start=l.cachedAbsoluteStart,l.end=l.cachedAbsoluteEnd,uF(l,e,e+t,n,o),l.maxEnd=l.end,p_(this,l)}this._normalizeDeltaIfNecessary()}getAllInOrder(){return u_(this,0,!1,0,!1)}_normalizeDeltaIfNecessary(){this.requestNormalizeDelta&&(this.requestNormalizeDelta=!1,cF(this))}};function cF(i){let e=i.root,t=0;for(;e!==Ee;){if(e.left!==Ee&&!dn(e.left)){e=e.left;continue}if(e.right!==Ee&&!dn(e.right)){t+=e.delta,e=e.right;continue}e.start=t+e.start,e.end=t+e.end,e.delta=0,zr(e),et(e,!0),et(e.left,!1),et(e.right,!1),e===e.parent.right&&(t-=e.parent.delta),e=e.parent}et(i.root,!1)}function Ud(i,e,t,n){return i<t?!0:i>t||n===1?!1:n===2?!0:e}function uF(i,e,t,n,o){let r=lF(i),s=r===0||r===2,a=r===1||r===2,l=t-e,c=n,u=Math.min(l,c),p=i.start,h=!1,m=i.end,v=!1;e<=p&&m<=t&&dF(i)&&(i.start=e,h=!0,i.end=e,v=!0);{let b=o?1:l>0?2:0;!h&&Ud(p,s,e,b)&&(h=!0),!v&&Ud(m,a,e,b)&&(v=!0)}if(u>0&&!o){let b=l>c?2:0;!h&&Ud(p,s,e+u,b)&&(h=!0),!v&&Ud(m,a,e+u,b)&&(v=!0)}{let b=o?1:0;!h&&Ud(p,s,t,b)&&(i.start=e+c,h=!0),!v&&Ud(m,a,t,b)&&(i.end=e+c,v=!0)}let f=c-l;h||(i.start=Math.max(0,p+f)),v||(i.end=Math.max(0,m+f)),i.start>i.end&&(i.end=i.start)}function pF(i,e,t){let n=i.root,o=0,r=0,s=0,a=0,l=[],c=0;for(;n!==Ee;){if(dn(n)){et(n.left,!1),et(n.right,!1),n===n.parent.right&&(o-=n.parent.delta),n=n.parent;continue}if(!dn(n.left)){if(r=o+n.maxEnd,r<e){et(n,!0);continue}if(n.left!==Ee){n=n.left;continue}}if(s=o+n.start,s>t){et(n,!0);continue}if(a=o+n.end,a>=e&&(n.setCachedOffsets(s,a,0),l[c++]=n),et(n,!0),n.right!==Ee&&!dn(n.right)){o+=n.delta,n=n.right;continue}}return et(i.root,!1),l}function hF(i,e,t,n){let o=i.root,r=0,s=0,a=0,l=n-(t-e);for(;o!==Ee;){if(dn(o)){et(o.left,!1),et(o.right,!1),o===o.parent.right&&(r-=o.parent.delta),zr(o),o=o.parent;continue}if(!dn(o.left)){if(s=r+o.maxEnd,s<e){et(o,!0);continue}if(o.left!==Ee){o=o.left;continue}}if(a=r+o.start,a>t){o.start+=l,o.end+=l,o.delta+=l,(o.delta<-1073741824||o.delta>1073741824)&&(i.requestNormalizeDelta=!0),et(o,!0);continue}if(et(o,!0),o.right!==Ee&&!dn(o.right)){r+=o.delta,o=o.right;continue}}et(i.root,!1)}function gF(i,e){let t=i.root,n=[],o=0;for(;t!==Ee;){if(dn(t)){et(t.left,!1),et(t.right,!1),t=t.parent;continue}if(t.left!==Ee&&!dn(t.left)){t=t.left;continue}if(t.ownerId===e&&(n[o++]=t),et(t,!0),t.right!==Ee&&!dn(t.right)){t=t.right;continue}}return et(i.root,!1),n}function mF(i){let e=i.root,t=[],n=0;for(;e!==Ee;){if(dn(e)){et(e.left,!1),et(e.right,!1),e=e.parent;continue}if(e.left!==Ee&&!dn(e.left)){e=e.left;continue}if(e.right!==Ee&&!dn(e.right)){e=e.right;continue}t[n++]=e,et(e,!0)}return et(i.root,!1),t}function u_(i,e,t,n,o){let r=i.root,s=0,a=0,l=0,c=[],u=0;for(;r!==Ee;){if(dn(r)){et(r.left,!1),et(r.right,!1),r===r.parent.right&&(s-=r.parent.delta),r=r.parent;continue}if(r.left!==Ee&&!dn(r.left)){r=r.left;continue}a=s+r.start,l=s+r.end,r.setCachedOffsets(a,l,n);let p=!0;if(e&&r.ownerId&&r.ownerId!==e&&(p=!1),t&&g_(r)&&(p=!1),o&&!m_(r)&&(p=!1),p&&(c[u++]=r),et(r,!0),r.right!==Ee&&!dn(r.right)){s+=r.delta,r=r.right;continue}}return et(i.root,!1),c}function fF(i,e,t,n,o,r,s){let a=i.root,l=0,c=0,u=0,p=0,h=[],m=0;for(;a!==Ee;){if(dn(a)){et(a.left,!1),et(a.right,!1),a===a.parent.right&&(l-=a.parent.delta),a=a.parent;continue}if(!dn(a.left)){if(c=l+a.maxEnd,c<e){et(a,!0);continue}if(a.left!==Ee){a=a.left;continue}}if(u=l+a.start,u>t){et(a,!0);continue}if(p=l+a.end,p>=e){a.setCachedOffsets(u,p,r);let v=!0;n&&a.ownerId&&a.ownerId!==n&&(v=!1),o&&g_(a)&&(v=!1),s&&!m_(a)&&(v=!1),v&&(h[m++]=a)}if(et(a,!0),a.right!==Ee&&!dn(a.right)){l+=a.delta,a=a.right;continue}}return et(i.root,!1),h}function p_(i,e){if(i.root===Ee)return e.parent=Ee,e.left=Ee,e.right=Ee,it(e,0),i.root=e,i.root;bF(i,e),$s(e.parent);let t=e;for(;t!==i.root&&jn(t.parent)===1;)if(t.parent===t.parent.parent.left){let n=t.parent.parent.right;jn(n)===1?(it(t.parent,0),it(n,0),it(t.parent.parent,1),t=t.parent.parent):(t===t.parent.right&&(t=t.parent,ap(i,t)),it(t.parent,0),it(t.parent.parent,1),lp(i,t.parent.parent))}else{let n=t.parent.parent.left;jn(n)===1?(it(t.parent,0),it(n,0),it(t.parent.parent,1),t=t.parent.parent):(t===t.parent.left&&(t=t.parent,lp(i,t)),it(t.parent,0),it(t.parent.parent,1),ap(i,t.parent.parent))}return it(i.root,0),e}function bF(i,e){let t=0,n=i.root,o=e.start,r=e.end;for(;;)if(yF(o,r,n.start+t,n.end+t)<0)if(n.left===Ee){e.start-=t,e.end-=t,e.maxEnd-=t,n.left=e;break}else n=n.left;else if(n.right===Ee){e.start-=t+n.delta,e.end-=t+n.delta,e.maxEnd-=t+n.delta,n.right=e;break}else t+=n.delta,n=n.right;e.parent=n,e.left=Ee,e.right=Ee,it(e,1)}function h_(i,e){let t,n;if(e.left===Ee?(t=e.right,n=e,t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta):e.right===Ee?(t=e.left,n=e):(n=vF(e.right),t=n.right,t.start+=n.delta,t.end+=n.delta,t.delta+=n.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),n.start+=e.delta,n.end+=e.delta,n.delta=e.delta,(n.delta<-1073741824||n.delta>1073741824)&&(i.requestNormalizeDelta=!0)),n===i.root){i.root=t,it(t,0),e.detach(),BS(),zr(t),i.root.parent=Ee;return}let o=jn(n)===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?t.parent=n.parent:(n.parent===e?t.parent=n:t.parent=n.parent,n.left=e.left,n.right=e.right,n.parent=e.parent,it(n,jn(e)),e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==Ee&&(n.left.parent=n),n.right!==Ee&&(n.right.parent=n)),e.detach(),o){$s(t.parent),n!==e&&($s(n),$s(n.parent)),BS();return}$s(t),$s(t.parent),n!==e&&($s(n),$s(n.parent));let r;for(;t!==i.root&&jn(t)===0;)t===t.parent.left?(r=t.parent.right,jn(r)===1&&(it(r,0),it(t.parent,1),ap(i,t.parent),r=t.parent.right),jn(r.left)===0&&jn(r.right)===0?(it(r,1),t=t.parent):(jn(r.right)===0&&(it(r.left,0),it(r,1),lp(i,r),r=t.parent.right),it(r,jn(t.parent)),it(t.parent,0),it(r.right,0),ap(i,t.parent),t=i.root)):(r=t.parent.left,jn(r)===1&&(it(r,0),it(t.parent,1),lp(i,t.parent),r=t.parent.left),jn(r.left)===0&&jn(r.right)===0?(it(r,1),t=t.parent):(jn(r.left)===0&&(it(r.right,0),it(r,1),ap(i,r),r=t.parent.left),it(r,jn(t.parent)),it(t.parent,0),it(r.left,0),lp(i,t.parent),t=i.root));it(t,0),BS()}function vF(i){for(;i.left!==Ee;)i=i.left;return i}function BS(){Ee.parent=Ee,Ee.delta=0,Ee.start=0,Ee.end=0}function ap(i,e){let t=e.right;t.delta+=e.delta,(t.delta<-1073741824||t.delta>1073741824)&&(i.requestNormalizeDelta=!0),t.start+=e.delta,t.end+=e.delta,e.right=t.left,t.left!==Ee&&(t.left.parent=e),t.parent=e.parent,e.parent===Ee?i.root=t:e===e.parent.left?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t,zr(e),zr(t)}function lp(i,e){let t=e.left;e.delta-=t.delta,(e.delta<-1073741824||e.delta>1073741824)&&(i.requestNormalizeDelta=!0),e.start-=t.delta,e.end-=t.delta,e.left=t.right,t.right!==Ee&&(t.right.parent=e),t.parent=e.parent,e.parent===Ee?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t,zr(e),zr(t)}function f_(i){let e=i.end;if(i.left!==Ee){let t=i.left.maxEnd;t>e&&(e=t)}if(i.right!==Ee){let t=i.right.maxEnd+i.delta;t>e&&(e=t)}return e}function zr(i){i.maxEnd=f_(i)}function $s(i){for(;i!==Ee;){let e=f_(i);if(i.maxEnd===e)return;i.maxEnd=e,i=i.parent}}function yF(i,e,t,n){return i===t?e-n:i-t}var zd=class{parent;left;right;color;piece;size_left;lf_left;constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==be)return Ef(this.right);let e=this;for(;e.parent!==be&&e.parent.left!==e;)e=e.parent;return e.parent===be?be:e.parent}prev(){if(this.left!==be)return US(this.left);let e=this;for(;e.parent!==be&&e.parent.right!==e;)e=e.parent;return e.parent===be?be:e.parent}detach(){this.parent=null,this.left=null,this.right=null}};var be=new zd(null,0);be.parent=be;be.left=be;be.right=be;be.color=0;function Ef(i){for(;i.left!==be;)i=i.left;return i}function US(i){for(;i.right!==be;)i=i.right;return i}function VS(i){return i===be?0:i.size_left+i.piece.length+VS(i.right)}function zS(i){return i===be?0:i.lf_left+i.piece.lineFeedCnt+zS(i.right)}function WS(){be.parent=be}function up(i,e){let t=e.right;t.size_left+=e.size_left+(e.piece?e.piece.length:0),t.lf_left+=e.lf_left+(e.piece?e.piece.lineFeedCnt:0),e.right=t.left,t.left!==be&&(t.left.parent=e),t.parent=e.parent,e.parent===be?i.root=t:e.parent.left===e?e.parent.left=t:e.parent.right=t,t.left=e,e.parent=t}function pp(i,e){let t=e.left;e.left=t.right,t.right!==be&&(t.right.parent=e),t.parent=e.parent,e.size_left-=t.size_left+(t.piece?t.piece.length:0),e.lf_left-=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),e.parent===be?i.root=t:e===e.parent.right?e.parent.right=t:e.parent.left=t,t.right=e,e.parent=t}function hp(i,e){let t,n;if(e.left===be?(n=e,t=n.right):e.right===be?(n=e,t=n.left):(n=Ef(e.right),t=n.right),n===i.root){i.root=t,t.color=0,e.detach(),WS(),i.root.parent=be;return}let o=n.color===1;if(n===n.parent.left?n.parent.left=t:n.parent.right=t,n===e?(t.parent=n.parent,cp(i,t)):(n.parent===e?t.parent=n:t.parent=n.parent,cp(i,t),n.left=e.left,n.right=e.right,n.parent=e.parent,n.color=e.color,e===i.root?i.root=n:e===e.parent.left?e.parent.left=n:e.parent.right=n,n.left!==be&&(n.left.parent=n),n.right!==be&&(n.right.parent=n),n.size_left=e.size_left,n.lf_left=e.lf_left,cp(i,n)),e.detach(),t.parent.left===t){let s=VS(t),a=zS(t);if(s!==t.parent.size_left||a!==t.parent.lf_left){let l=s-t.parent.size_left,c=a-t.parent.lf_left;t.parent.size_left=s,t.parent.lf_left=a,rr(i,t.parent,l,c)}}if(cp(i,t.parent),o){WS();return}let r;for(;t!==i.root&&t.color===0;)t===t.parent.left?(r=t.parent.right,r.color===1&&(r.color=0,t.parent.color=1,up(i,t.parent),r=t.parent.right),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.right.color===0&&(r.left.color=0,r.color=1,pp(i,r),r=t.parent.right),r.color=t.parent.color,t.parent.color=0,r.right.color=0,up(i,t.parent),t=i.root)):(r=t.parent.left,r.color===1&&(r.color=0,t.parent.color=1,pp(i,t.parent),r=t.parent.left),r.left.color===0&&r.right.color===0?(r.color=1,t=t.parent):(r.left.color===0&&(r.right.color=0,r.color=1,up(i,r),r=t.parent.left),r.color=t.parent.color,t.parent.color=0,r.left.color=0,pp(i,t.parent),t=i.root));t.color=0,WS()}function HS(i,e){for(cp(i,e);e!==i.root&&e.parent.color===1;)if(e.parent===e.parent.parent.left){let t=e.parent.parent.right;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.right&&(e=e.parent,up(i,e)),e.parent.color=0,e.parent.parent.color=1,pp(i,e.parent.parent))}else{let t=e.parent.parent.left;t.color===1?(e.parent.color=0,t.color=0,e.parent.parent.color=1,e=e.parent.parent):(e===e.parent.left&&(e=e.parent,pp(i,e)),e.parent.color=0,e.parent.parent.color=1,up(i,e.parent.parent))}i.root.color=0}function rr(i,e,t,n){for(;e!==i.root&&e!==be;)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}function cp(i,e){let t=0,n=0;if(e!==i.root){for(;e!==i.root&&e===e.parent.right;)e=e.parent;if(e!==i.root)for(e=e.parent,t=VS(e.left)-e.size_left,n=zS(e.left)-e.lf_left,e.size_left+=t,e.lf_left+=n;e!==i.root&&(t!==0||n!==0);)e.parent.left===e&&(e.parent.size_left+=t,e.parent.lf_left+=n),e=e.parent}}var IF=999,Do=class{searchString;isRegex;matchCase;wordSeparators;constructor(e,t,n,o){this.searchString=e,this.isRegex=t,this.matchCase=n,this.wordSeparators=o}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=GS(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=Dh(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let n=!this.isRegex&&!e;return n&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(n=this.matchCase),new Om(t,this.wordSeparators?Qk(this.wordSeparators,[]):null,n?this.searchString:null)}};function GS(i){if(!i||i.length===0)return!1;for(let e=0,t=i.length;e<t;e++){let n=i.charCodeAt(e);if(n===10)return!0;if(n===92){if(e++,e>=t)break;let o=i.charCodeAt(e);if(o===110||o===114||o===87)return!0}}return!1}function js(i,e,t){if(!t)return new Ps(i,null);let n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return new Ps(i,n)}var Cf=class{_lineFeedsOffsets;constructor(e){let t=[],n=0;for(let o=0,r=e.length;o<r;o++)e.charCodeAt(o)===10&&(t[n++]=o);this._lineFeedsOffsets=t}findLineFeedCountBeforeOffset(e){let t=this._lineFeedsOffsets,n=0,o=t.length-1;if(o===-1||e<=t[0])return 0;for(;n<o;){let r=n+((o-n)/2>>0);t[r]>=e?o=r-1:t[r+1]>=e?(n=r,o=r):n=r+1}return n+1}},Ya=class{static findMatches(e,t,n,o,r){let s=t.parseSearchRequest();return s?s.regex.multiline?this._doFindMatchesMultiline(e,n,new Ys(s.wordSeparators,s.regex),o,r):this._doFindMatchesLineByLine(e,n,s,o,r):[]}static _getMultilineMatchRange(e,t,n,o,r,s){let a,l=0;o?(l=o.findLineFeedCountBeforeOffset(r),a=t+r+l):a=t+r;let c;if(o){let m=o.findLineFeedCountBeforeOffset(r+s.length)-l;c=a+s.length+m}else c=a+s.length;let u=e.getPositionAt(a),p=e.getPositionAt(c);return new te(u.lineNumber,u.column,p.lineNumber,p.column)}static _doFindMatchesMultiline(e,t,n,o,r){let s=e.getOffsetAt(t.getStartPosition()),a=e.getValueInRange(t,1),l=e.getEOL()===`\r
`?new Cf(a):null,c=[],u=0,p;for(n.reset(0);p=n.next(a);)if(c[u++]=js(this._getMultilineMatchRange(e,s,a,l,p.index,p[0]),p,o),u>=r)return c;return c}static _doFindMatchesLineByLine(e,t,n,o,r){let s=[],a=0;if(t.startLineNumber===t.endLineNumber){let c=e.getLineContent(t.startLineNumber).substring(t.startColumn-1,t.endColumn-1);return a=this._findMatchesInLine(n,c,t.startLineNumber,t.startColumn-1,a,s,o,r),s}let l=e.getLineContent(t.startLineNumber).substring(t.startColumn-1);a=this._findMatchesInLine(n,l,t.startLineNumber,t.startColumn-1,a,s,o,r);for(let c=t.startLineNumber+1;c<t.endLineNumber&&a<r;c++)a=this._findMatchesInLine(n,e.getLineContent(c),c,0,a,s,o,r);if(a<r){let c=e.getLineContent(t.endLineNumber).substring(0,t.endColumn-1);a=this._findMatchesInLine(n,c,t.endLineNumber,0,a,s,o,r)}return s}static _findMatchesInLine(e,t,n,o,r,s,a,l){let c=e.wordSeparators;if(!a&&e.simpleSearch){let h=e.simpleSearch,m=h.length,v=t.length,f=-m;for(;(f=t.indexOf(h,f+m))!==-1;)if((!c||wf(c,t,v,f,m))&&(s[r++]=new Ps(new te(n,f+1+o,n,f+1+m+o),null),r>=l))return r;return r}let u=new Ys(e.wordSeparators,e.regex),p;u.reset(0);do if(p=u.next(t),p&&(s[r++]=js(new te(n,p.index+1+o,n,p.index+1+p[0].length+o),p,a),r>=l))return r;while(p);return r}static findNextMatch(e,t,n,o){let r=t.parseSearchRequest();if(!r)return null;let s=new Ys(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindNextMatchMultiline(e,n,s,o):this._doFindNextMatchLineByLine(e,n,s,o)}static _doFindNextMatchMultiline(e,t,n,o){let r=new Ue(t.lineNumber,1),s=e.getOffsetAt(r),a=e.getLineCount(),l=e.getValueInRange(new te(r.lineNumber,r.column,a,e.getLineMaxColumn(a)),1),c=e.getEOL()===`\r
`?new Cf(l):null;n.reset(t.column-1);let u=n.next(l);return u?js(this._getMultilineMatchRange(e,s,l,c,u.index,u[0]),u,o):t.lineNumber!==1||t.column!==1?this._doFindNextMatchMultiline(e,new Ue(1,1),n,o):null}static _doFindNextMatchLineByLine(e,t,n,o){let r=e.getLineCount(),s=t.lineNumber,a=e.getLineContent(s),l=this._findFirstMatchInLine(n,a,s,t.column,o);if(l)return l;for(let c=1;c<=r;c++){let u=(s+c-1)%r,p=e.getLineContent(u+1),h=this._findFirstMatchInLine(n,p,u+1,1,o);if(h)return h}return null}static _findFirstMatchInLine(e,t,n,o,r){e.reset(o-1);let s=e.next(t);return s?js(new te(n,s.index+1,n,s.index+1+s[0].length),s,r):null}static findPreviousMatch(e,t,n,o){let r=t.parseSearchRequest();if(!r)return null;let s=new Ys(r.wordSeparators,r.regex);return r.regex.multiline?this._doFindPreviousMatchMultiline(e,n,s,o):this._doFindPreviousMatchLineByLine(e,n,s,o)}static _doFindPreviousMatchMultiline(e,t,n,o){let r=this._doFindMatchesMultiline(e,new te(1,1,t.lineNumber,t.column),n,o,10*IF);if(r.length>0)return r[r.length-1];let s=e.getLineCount();return t.lineNumber!==s||t.column!==e.getLineMaxColumn(s)?this._doFindPreviousMatchMultiline(e,new Ue(s,e.getLineMaxColumn(s)),n,o):null}static _doFindPreviousMatchLineByLine(e,t,n,o){let r=e.getLineCount(),s=t.lineNumber,a=e.getLineContent(s).substring(0,t.column-1),l=this._findLastMatchInLine(n,a,s,o);if(l)return l;for(let c=1;c<=r;c++){let u=(r+s-c-1)%r,p=e.getLineContent(u+1),h=this._findLastMatchInLine(n,p,u+1,o);if(h)return h}return null}static _findLastMatchInLine(e,t,n,o){let r=null,s;for(e.reset(0);s=e.next(t);)r=js(new te(n,s.index+1,n,s.index+1+s[0].length),s,o);return r}};function xF(i,e,t,n,o){if(n===0)return!0;let r=e.charCodeAt(n-1);if(i.get(r)!==0||r===13||r===10)return!0;if(o>0){let s=e.charCodeAt(n);if(i.get(s)!==0)return!0}return!1}function SF(i,e,t,n,o){if(n+o===t)return!0;let r=e.charCodeAt(n+o);if(i.get(r)!==0||r===13||r===10)return!0;if(o>0){let s=e.charCodeAt(n+o-1);if(i.get(s)!==0)return!0}return!1}function wf(i,e,t,n,o){return xF(i,e,t,n,o)&&SF(i,e,t,n,o)}var Ys=class{_wordSeparators;_searchRegex;_prevMatchStartIndex;_prevMatchLength;constructor(e,t){this._wordSeparators=e,this._searchRegex=t,this._prevMatchStartIndex=-1,this._prevMatchLength=0}reset(e){this._searchRegex.lastIndex=e,this._prevMatchStartIndex=-1,this._prevMatchLength=0}next(e){let t=e.length,n;do{if(this._prevMatchStartIndex+this._prevMatchLength===t||(n=this._searchRegex.exec(e),!n))return null;let o=n.index,r=n[0].length;if(o===this._prevMatchStartIndex&&r===this._prevMatchLength){if(r===0){Ol(e,t,this._searchRegex.lastIndex)>65535?this._searchRegex.lastIndex+=2:this._searchRegex.lastIndex+=1;continue}return null}if(this._prevMatchStartIndex=o,this._prevMatchLength=r,!this._wordSeparators||wf(this._wordSeparators,e,t,o,r))return n}while(n);return null}};var Hr=65535;function b_(i){let e;return i[i.length-1]<65536?e=new Uint16Array(i.length):e=new Uint32Array(i.length),e.set(i,0),e}var qS=class{constructor(e,t,n,o,r){this.lineStarts=e;this.cr=t;this.lf=n;this.crlf=o;this.isBasicASCII=r}};function sr(i,e=!0){let t=[0],n=1;for(let o=0,r=i.length;o<r;o++){let s=i.charCodeAt(o);s===13?o+1<r&&i.charCodeAt(o+1)===10?(t[n++]=o+2,o++):t[n++]=o+1:s===10&&(t[n++]=o+1)}return e?b_(t):t}function v_(i,e){i.length=0,i[0]=0;let t=1,n=0,o=0,r=0,s=!0;for(let l=0,c=e.length;l<c;l++){let u=e.charCodeAt(l);u===13?l+1<c&&e.charCodeAt(l+1)===10?(r++,i[t++]=l+2,l++):(n++,i[t++]=l+1):u===10?(o++,i[t++]=l+1):s&&u!==9&&(u<32||u>126)&&(s=!1)}let a=new qS(b_(i),n,o,r,s);return i.length=0,a}var Nn=class{bufferIndex;start;end;length;lineFeedCnt;constructor(e,t,n,o,r){this.bufferIndex=e,this.start=t,this.end=n,this.lineFeedCnt=o,this.length=r}},ar=class{buffer;lineStarts;constructor(e,t){this.buffer=e,this.lineStarts=t}},$S=class{_pieces;_index;_tree;_BOM;constructor(e,t){this._pieces=[],this._tree=e,this._BOM=t,this._index=0,e.root!==be&&e.iterate(e.root,n=>(n!==be&&this._pieces.push(n.piece),!0))}read(){return this._pieces.length===0?this._index===0?(this._index++,this._BOM):null:this._index>this._pieces.length-1?null:this._index===0?this._BOM+this._tree.getPieceContent(this._pieces[this._index++]):this._tree.getPieceContent(this._pieces[this._index++])}},jS=class{_limit;_cache;constructor(e){this._limit=e,this._cache=[]}get(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartOffset<=e&&n.nodeStartOffset+n.node.piece.length>=e)return n}return null}get2(e){for(let t=this._cache.length-1;t>=0;t--){let n=this._cache[t];if(n.nodeStartLineNumber&&n.nodeStartLineNumber<e&&n.nodeStartLineNumber+n.node.piece.lineFeedCnt>=e)return n}return null}set(e){this._cache.length>=this._limit&&this._cache.shift(),this._cache.push(e)}validate(e){let t=!1,n=this._cache;for(let o=0;o<n.length;o++){let r=n[o];if(r.node.parent===null||r.nodeStartOffset>=e){n[o]=null,t=!0;continue}}if(t){let o=[];for(let r of n)r!==null&&o.push(r);this._cache=o}}},Tf=class{root;_buffers;_lineCnt;_length;_EOL;_EOLLength;_EOLNormalized;_lastChangeBufferPos;_searchCache;_lastVisitedLine;constructor(e,t,n){this.create(e,t,n)}create(e,t,n){this._buffers=[new ar("",[0])],this._lastChangeBufferPos={line:0,column:0},this.root=be,this._lineCnt=1,this._length=0,this._EOL=t,this._EOLLength=t.length,this._EOLNormalized=n;let o=null;for(let r=0,s=e.length;r<s;r++)if(e[r].buffer.length>0){e[r].lineStarts||(e[r].lineStarts=sr(e[r].buffer));let a=new Nn(r+1,{line:0,column:0},{line:e[r].lineStarts.length-1,column:e[r].buffer.length-e[r].lineStarts[e[r].lineStarts.length-1]},e[r].lineStarts.length-1,e[r].buffer.length);this._buffers.push(e[r]),o=this.rbInsertRight(o,a)}this._searchCache=new jS(1),this._lastVisitedLine={lineNumber:0,value:""},this.computeBufferMetadata()}normalizeEOL(e){let t=Hr,n=t-Math.floor(t/3),o=n*2,r="",s=0,a=[];if(this.iterate(this.root,l=>{let c=this.getNodeContent(l),u=c.length;if(s<=n||s+u<o)return r+=c,s+=u,!0;let p=r.replace(/\r\n|\r|\n/g,e);return a.push(new ar(p,sr(p))),r=c,s=u,!0}),s>0){let l=r.replace(/\r\n|\r|\n/g,e);a.push(new ar(l,sr(l)))}this.create(a,e,!0)}getEOL(){return this._EOL}setEOL(e){this._EOL=e,this._EOLLength=this._EOL.length,this.normalizeEOL(e)}createSnapshot(e){return new $S(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,o=>{if(o===be)return!0;let r=this.getNodeContent(o),s=r.length,a=e.nodeAt(t),l=e.nodeAt(t+s),c=e.getValueInRange2(a,l);return t+=s,r===c})}getOffsetAt(e,t){let n=0,o=this.root;for(;o!==be;)if(o.left!==be&&o.lf_left+1>=e)o=o.left;else if(o.lf_left+o.piece.lineFeedCnt+1>=e){n+=o.size_left;let r=this.getAccumulatedValue(o,e-o.lf_left-2);return n+=r+t-1}else e-=o.lf_left+o.piece.lineFeedCnt,n+=o.size_left+o.piece.length,o=o.right;return n}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,n=0,o=e;for(;t!==be;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){let r=this.getIndexOf(t,e-t.size_left);if(n+=t.lf_left+r.index,r.index===0){let s=this.getOffsetAt(n+1,1),a=o-s;return new Ue(n+1,a+1)}return new Ue(n+1,r.remainder+1)}else if(e-=t.size_left+t.piece.length,n+=t.lf_left+t.piece.lineFeedCnt,t.right===be){let r=this.getOffsetAt(n+1,1),s=o-e-r;return new Ue(n+1,s+1)}else t=t.right;return new Ue(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";let n=this.nodeAt2(e.startLineNumber,e.startColumn),o=this.nodeAt2(e.endLineNumber,e.endColumn),r=this.getValueInRange2(n,o);return t?t!==this._EOL||!this._EOLNormalized?r.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this._EOLNormalized?r:r.replace(/\r\n|\r|\n/g,t):r}getValueInRange2(e,t){if(e.node===t.node){let a=e.node,l=this._buffers[a.piece.bufferIndex].buffer,c=this.offsetInBuffer(a.piece.bufferIndex,a.piece.start);return l.substring(c+e.remainder,c+t.remainder)}let n=e.node,o=this._buffers[n.piece.bufferIndex].buffer,r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start),s=o.substring(r+e.remainder,r+n.piece.length);for(n=n.next();n!==be;){let a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(n===t.node){s+=a.substring(l,l+t.remainder);break}else s+=a.substr(l,n.piece.length);n=n.next()}return s}getLinesContent(){let e=[],t=0,n="",o=!1;return this.iterate(this.root,r=>{if(r===be)return!0;let s=r.piece,a=s.length;if(a===0)return!0;let l=this._buffers[s.bufferIndex].buffer,c=this._buffers[s.bufferIndex].lineStarts,u=s.start.line,p=s.end.line,h=c[u]+s.start.column;if(o&&(l.charCodeAt(h)===10&&(h++,a--),e[t++]=n,n="",o=!1,a===0))return!0;if(u===p)return!this._EOLNormalized&&l.charCodeAt(h+a-1)===13?(o=!0,n+=l.substr(h,a-1)):n+=l.substr(h,a),!0;n+=this._EOLNormalized?l.substring(h,Math.max(h,c[u+1]-this._EOLLength)):l.substring(h,c[u+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;for(let m=u+1;m<p;m++)n=this._EOLNormalized?l.substring(c[m],c[m+1]-this._EOLLength):l.substring(c[m],c[m+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=n;return!this._EOLNormalized&&l.charCodeAt(c[p]+s.end.column-1)===13?(o=!0,s.end.column===0?t--:n=l.substr(c[p],s.end.column-1)):n=l.substr(c[p],s.end.column),!0}),o&&(e[t++]=n,n=""),e[t++]=n,e}getLength(){return this._length}getLineCount(){return this._lineCnt}getLineContent(e){return this._lastVisitedLine.lineNumber===e?this._lastVisitedLine.value:(this._lastVisitedLine.lineNumber=e,e===this._lineCnt?this._lastVisitedLine.value=this.getLineRawContent(e):this._EOLNormalized?this._lastVisitedLine.value=this.getLineRawContent(e,this._EOLLength):this._lastVisitedLine.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this._lastVisitedLine.value)}_getCharCode(e){if(e.remainder===e.node.piece.length){let t=e.node.next();if(!t)return 0;let n=this._buffers[t.piece.bufferIndex],o=this.offsetInBuffer(t.piece.bufferIndex,t.piece.start);return n.buffer.charCodeAt(o)}else{let t=this._buffers[e.node.piece.bufferIndex],o=this.offsetInBuffer(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(o)}}getLineCharCode(e,t){let n=this.nodeAt2(e,t+1);return this._getCharCode(n)}getLineLength(e){if(e===this.getLineCount()){let t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this._EOLLength}getCharCode(e){let t=this.nodeAt(e);return this._getCharCode(t)}getNearestChunk(e){let t=this.nodeAt(e);if(t.remainder===t.node.piece.length){let n=t.node.next();if(!n||n===be)return"";let o=this._buffers[n.piece.bufferIndex],r=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return o.buffer.substring(r,r+n.piece.length)}else{let n=this._buffers[t.node.piece.bufferIndex],o=this.offsetInBuffer(t.node.piece.bufferIndex,t.node.piece.start),r=o+t.remainder,s=o+t.node.piece.length;return n.buffer.substring(r,s)}}findMatchesInNode(e,t,n,o,r,s,a,l,c,u,p){let h=this._buffers[e.piece.bufferIndex],m=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start),v=this.offsetInBuffer(e.piece.bufferIndex,r),f=this.offsetInBuffer(e.piece.bufferIndex,s),b,E={line:0,column:0},T,_;t._wordSeparators?(T=h.buffer.substring(v,f),_=O=>O+v,t.reset(0)):(T=h.buffer,_=O=>O,t.reset(v));do if(b=t.next(T),b){if(_(b.index)>=f)return u;this.positionInBuffer(e,_(b.index)-m,E);let O=this.getLineFeedCnt(e.piece.bufferIndex,r,E),M=E.line===r.line?E.column-r.column+o:E.column+1,U=M+b[0].length;if(p[u++]=js(new te(n+O,M,n+O,U),b,l),_(b.index)+b[0].length>=f||u>=c)return u}while(b);return u}findMatchesLineByLine(e,t,n,o){let r=[],s=0,a=new Ys(t.wordSeparators,t.regex),l=this.nodeAt2(e.startLineNumber,e.startColumn);if(l===null)return[];let c=this.nodeAt2(e.endLineNumber,e.endColumn);if(c===null)return[];let u=this.positionInBuffer(l.node,l.remainder),p=this.positionInBuffer(c.node,c.remainder);if(l.node===c.node)return this.findMatchesInNode(l.node,a,e.startLineNumber,e.startColumn,u,p,t,n,o,s,r),r;let h=e.startLineNumber,m=l.node;for(;m!==c.node;){let f=this.getLineFeedCnt(m.piece.bufferIndex,u,m.piece.end);if(f>=1){let E=this._buffers[m.piece.bufferIndex].lineStarts,T=this.offsetInBuffer(m.piece.bufferIndex,m.piece.start),_=E[u.line+f],O=h===e.startLineNumber?e.startColumn:1;if(s=this.findMatchesInNode(m,a,h,O,u,this.positionInBuffer(m,_-T),t,n,o,s,r),s>=o)return r;h+=f}let b=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){let E=this.getLineContent(h).substring(b,e.endColumn-1);return s=this._findMatchesInLine(t,a,E,e.endLineNumber,b,s,r,n,o),r}if(s=this._findMatchesInLine(t,a,this.getLineContent(h).substr(b),h,b,s,r,n,o),s>=o)return r;h++,l=this.nodeAt2(h,1),m=l.node,u=this.positionInBuffer(l.node,l.remainder)}if(h===e.endLineNumber){let f=h===e.startLineNumber?e.startColumn-1:0,b=this.getLineContent(h).substring(f,e.endColumn-1);return s=this._findMatchesInLine(t,a,b,e.endLineNumber,f,s,r,n,o),r}let v=h===e.startLineNumber?e.startColumn:1;return s=this.findMatchesInNode(c.node,a,h,v,u,p,t,n,o,s,r),r}_findMatchesInLine(e,t,n,o,r,s,a,l,c){let u=e.wordSeparators;if(!l&&e.simpleSearch){let h=e.simpleSearch,m=h.length,v=n.length,f=-m;for(;(f=n.indexOf(h,f+m))!==-1;)if((!u||wf(u,n,v,f,m))&&(a[s++]=new Ps(new te(o,f+1+r,o,f+1+m+r),null),s>=c))return s;return s}let p;t.reset(0);do if(p=t.next(n),p&&(a[s++]=js(new te(o,p.index+1+r,o,p.index+1+p[0].length+r),p,l),s>=c))return s;while(p);return s}insert(e,t,n=!1){if(this._EOLNormalized=this._EOLNormalized&&n,this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",this.root!==be){let{node:o,remainder:r,nodeStartOffset:s}=this.nodeAt(e),a=o.piece,l=a.bufferIndex,c=this.positionInBuffer(o,r);if(o.piece.bufferIndex===0&&a.end.line===this._lastChangeBufferPos.line&&a.end.column===this._lastChangeBufferPos.column&&s+a.length===e&&t.length<Hr){this.appendToNode(o,t),this.computeBufferMetadata();return}if(s===e)this.insertContentToNodeLeft(t,o),this._searchCache.validate(e);else if(s+o.piece.length>e){let u=[],p=new Nn(a.bufferIndex,c,a.end,this.getLineFeedCnt(a.bufferIndex,c,a.end),this.offsetInBuffer(l,a.end)-this.offsetInBuffer(l,c));if(this.shouldCheckCRLF()&&this.endWithCR(t)&&this.nodeCharCodeAt(o,r)===10){let f={line:p.start.line+1,column:0};p=new Nn(p.bufferIndex,f,p.end,this.getLineFeedCnt(p.bufferIndex,f,p.end),p.length-1),t+=`
`}if(this.shouldCheckCRLF()&&this.startWithLF(t))if(this.nodeCharCodeAt(o,r-1)===13){let f=this.positionInBuffer(o,r-1);this.deleteNodeTail(o,f),t="\r"+t,o.piece.length===0&&u.push(o)}else this.deleteNodeTail(o,c);else this.deleteNodeTail(o,c);let h=this.createNewPieces(t);p.length>0&&this.rbInsertRight(o,p);let m=o;for(let v=0;v<h.length;v++)m=this.rbInsertRight(m,h[v]);this.deleteNodes(u)}else this.insertContentToNodeRight(t,o)}else{let o=this.createNewPieces(t),r=this.rbInsertLeft(null,o[0]);for(let s=1;s<o.length;s++)r=this.rbInsertRight(r,o[s])}this.computeBufferMetadata()}delete(e,t){if(this._lastVisitedLine.lineNumber=0,this._lastVisitedLine.value="",t<=0||this.root===be)return;let n=this.nodeAt(e),o=this.nodeAt(e+t),r=n.node,s=o.node;if(r===s){let h=this.positionInBuffer(r,n.remainder),m=this.positionInBuffer(r,o.remainder);if(n.nodeStartOffset===e){if(t===r.piece.length){let v=r.next();hp(this,r),this.validateCRLFWithPrevNode(v),this.computeBufferMetadata();return}this.deleteNodeHead(r,m),this._searchCache.validate(e),this.validateCRLFWithPrevNode(r),this.computeBufferMetadata();return}if(n.nodeStartOffset+r.piece.length===e+t){this.deleteNodeTail(r,h),this.validateCRLFWithNextNode(r),this.computeBufferMetadata();return}this.shrinkNode(r,h,m),this.computeBufferMetadata();return}let a=[],l=this.positionInBuffer(r,n.remainder);this.deleteNodeTail(r,l),this._searchCache.validate(e),r.piece.length===0&&a.push(r);let c=this.positionInBuffer(s,o.remainder);this.deleteNodeHead(s,c),s.piece.length===0&&a.push(s);let u=r.next();for(let h=u;h!==be&&h!==s;h=h.next())a.push(h);let p=r.piece.length===0?r.prev():r;this.deleteNodes(a),this.validateCRLFWithNextNode(p),this.computeBufferMetadata()}insertContentToNodeLeft(e,t){let n=[];if(this.shouldCheckCRLF()&&this.endWithCR(e)&&this.startWithLF(t)){let s=t.piece,a={line:s.start.line+1,column:0},l=new Nn(s.bufferIndex,a,s.end,this.getLineFeedCnt(s.bufferIndex,a,s.end),s.length-1);t.piece=l,e+=`
`,rr(this,t,-1,-1),t.piece.length===0&&n.push(t)}let o=this.createNewPieces(e),r=this.rbInsertLeft(t,o[o.length-1]);for(let s=o.length-2;s>=0;s--)r=this.rbInsertLeft(r,o[s]);this.validateCRLFWithPrevNode(r),this.deleteNodes(n)}insertContentToNodeRight(e,t){this.adjustCarriageReturnFromNext(e,t)&&(e+=`
`);let n=this.createNewPieces(e),o=this.rbInsertRight(t,n[0]),r=o;for(let s=1;s<n.length;s++)r=this.rbInsertRight(r,n[s]);this.validateCRLFWithPrevNode(o)}positionInBuffer(e,t,n){let o=e.piece,r=e.piece.bufferIndex,s=this._buffers[r].lineStarts,l=s[o.start.line]+o.start.column+t,c=o.start.line,u=o.end.line,p=0,h=0,m=0;for(;c<=u&&(p=c+(u-c)/2|0,m=s[p],p!==u);)if(h=s[p+1],l<m)u=p-1;else if(l>=h)c=p+1;else break;return n?(n.line=p,n.column=l-m,null):{line:p,column:l-m}}getLineFeedCnt(e,t,n){if(n.column===0)return n.line-t.line;let o=this._buffers[e].lineStarts;if(n.line===o.length-1)return n.line-t.line;let r=o[n.line+1],s=o[n.line]+n.column;if(r>s+1)return n.line-t.line;let a=s-1;return this._buffers[e].buffer.charCodeAt(a)===13?n.line-t.line+1:n.line-t.line}offsetInBuffer(e,t){return this._buffers[e].lineStarts[t.line]+t.column}deleteNodes(e){for(let t=0;t<e.length;t++)hp(this,e[t])}createNewPieces(e){if(e.length>Hr){let u=[];for(;e.length>Hr;){let h=e.charCodeAt(Hr-1),m;h===13||h>=55296&&h<=56319?(m=e.substring(0,Hr-1),e=e.substring(Hr-1)):(m=e.substring(0,Hr),e=e.substring(Hr));let v=sr(m);u.push(new Nn(this._buffers.length,{line:0,column:0},{line:v.length-1,column:m.length-v[v.length-1]},v.length-1,m.length)),this._buffers.push(new ar(m,v))}let p=sr(e);return u.push(new Nn(this._buffers.length,{line:0,column:0},{line:p.length-1,column:e.length-p[p.length-1]},p.length-1,e.length)),this._buffers.push(new ar(e,p)),u}let t=this._buffers[0].buffer.length,n=sr(e,!1),o=this._lastChangeBufferPos;if(this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-1]===t&&t!==0&&this.startWithLF(e)&&this.endWithCR(this._buffers[0].buffer)){this._lastChangeBufferPos={line:this._lastChangeBufferPos.line,column:this._lastChangeBufferPos.column+1},o=this._lastChangeBufferPos;for(let u=0;u<n.length;u++)n[u]+=t+1;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let u=0;u<n.length;u++)n[u]+=t;this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(n.slice(1)),this._buffers[0].buffer+=e}let r=this._buffers[0].buffer.length,s=this._buffers[0].lineStarts.length-1,a=r-this._buffers[0].lineStarts[s],l={line:s,column:a},c=new Nn(0,o,l,this.getLineFeedCnt(0,o,l),r-t);return this._lastChangeBufferPos=l,[c]}getLinesRawContent(){return this.getContentOfSubTree(this.root)}getLineRawContent(e,t=0){let n=this.root,o="",r=this._searchCache.get2(e);if(r){n=r.node;let s=this.getAccumulatedValue(n,e-r.nodeStartLineNumber-1),a=this._buffers[n.piece.bufferIndex].buffer,l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);if(r.nodeStartLineNumber+n.piece.lineFeedCnt===e)o=a.substring(l+s,l+n.piece.length);else{let c=this.getAccumulatedValue(n,e-r.nodeStartLineNumber);return a.substring(l+s,l+c-t)}}else{let s=0,a=e;for(;n!==be;)if(n.left!==be&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this.getAccumulatedValue(n,e-n.lf_left-1),u=this._buffers[n.piece.bufferIndex].buffer,p=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return s+=n.size_left,this._searchCache.set({node:n,nodeStartOffset:s,nodeStartLineNumber:a-(e-1-n.lf_left)}),u.substring(p+l,p+c-t)}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let l=this.getAccumulatedValue(n,e-n.lf_left-2),c=this._buffers[n.piece.bufferIndex].buffer,u=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);o=c.substring(u+l,u+n.piece.length);break}else e-=n.lf_left+n.piece.lineFeedCnt,s+=n.size_left+n.piece.length,n=n.right}for(n=n.next();n!==be;){let s=this._buffers[n.piece.bufferIndex].buffer;if(n.piece.lineFeedCnt>0){let a=this.getAccumulatedValue(n,0),l=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);return o+=s.substring(l,l+a-t),o}else{let a=this.offsetInBuffer(n.piece.bufferIndex,n.piece.start);o+=s.substr(a,n.piece.length)}n=n.next()}return o}computeBufferMetadata(){let e=this.root,t=1,n=0;for(;e!==be;)t+=e.lf_left+e.piece.lineFeedCnt,n+=e.size_left+e.piece.length,e=e.right;this._lineCnt=t,this._length=n,this._searchCache.validate(this._length)}getIndexOf(e,t){let n=e.piece,o=this.positionInBuffer(e,t),r=o.line-n.start.line;if(this.offsetInBuffer(n.bufferIndex,n.end)-this.offsetInBuffer(n.bufferIndex,n.start)===t){let s=this.getLineFeedCnt(e.piece.bufferIndex,n.start,o);if(s!==r)return{index:s,remainder:0}}return{index:r,remainder:o.column}}getAccumulatedValue(e,t){if(t<0)return 0;let n=e.piece,o=this._buffers[n.bufferIndex].lineStarts,r=n.start.line+t+1;return r>n.end.line?o[n.end.line]+n.end.column-o[n.start.line]-n.start.column:o[r]-o[n.start.line]-n.start.column}deleteNodeTail(e,t){let n=e.piece,o=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.end),s=t,a=this.offsetInBuffer(n.bufferIndex,s),l=this.getLineFeedCnt(n.bufferIndex,n.start,s),c=l-o,u=a-r,p=n.length+u;e.piece=new Nn(n.bufferIndex,n.start,s,l,p),rr(this,e,u,c)}deleteNodeHead(e,t){let n=e.piece,o=n.lineFeedCnt,r=this.offsetInBuffer(n.bufferIndex,n.start),s=t,a=this.getLineFeedCnt(n.bufferIndex,s,n.end),l=this.offsetInBuffer(n.bufferIndex,s),c=a-o,u=r-l,p=n.length+u;e.piece=new Nn(n.bufferIndex,s,n.end,a,p),rr(this,e,u,c)}shrinkNode(e,t,n){let o=e.piece,r=o.start,s=o.end,a=o.length,l=o.lineFeedCnt,c=t,u=this.getLineFeedCnt(o.bufferIndex,o.start,c),p=this.offsetInBuffer(o.bufferIndex,t)-this.offsetInBuffer(o.bufferIndex,r);e.piece=new Nn(o.bufferIndex,o.start,c,u,p),rr(this,e,p-a,u-l);let h=new Nn(o.bufferIndex,n,s,this.getLineFeedCnt(o.bufferIndex,n,s),this.offsetInBuffer(o.bufferIndex,s)-this.offsetInBuffer(o.bufferIndex,n)),m=this.rbInsertRight(e,h);this.validateCRLFWithPrevNode(m)}appendToNode(e,t){this.adjustCarriageReturnFromNext(t,e)&&(t+=`
`);let n=this.shouldCheckCRLF()&&this.startWithLF(t)&&this.endWithCR(e),o=this._buffers[0].buffer.length;this._buffers[0].buffer+=t;let r=sr(t,!1);for(let m=0;m<r.length;m++)r[m]+=o;if(n){let m=this._buffers[0].lineStarts[this._buffers[0].lineStarts.length-2];this._buffers[0].lineStarts.pop(),this._lastChangeBufferPos={line:this._lastChangeBufferPos.line-1,column:o-m}}this._buffers[0].lineStarts=this._buffers[0].lineStarts.concat(r.slice(1));let s=this._buffers[0].lineStarts.length-1,a=this._buffers[0].buffer.length-this._buffers[0].lineStarts[s],l={line:s,column:a},c=e.piece.length+t.length,u=e.piece.lineFeedCnt,p=this.getLineFeedCnt(0,e.piece.start,l),h=p-u;e.piece=new Nn(e.piece.bufferIndex,e.piece.start,l,p,c),this._lastChangeBufferPos=l,rr(this,e,t.length,h)}nodeAt(e){let t=this.root,n=this._searchCache.get(e);if(n)return{node:n.node,nodeStartOffset:n.nodeStartOffset,remainder:e-n.nodeStartOffset};let o=0;for(;t!==be;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){o+=t.size_left;let r={node:t,remainder:e-t.size_left,nodeStartOffset:o};return this._searchCache.set(r),r}else e-=t.size_left+t.piece.length,o+=t.size_left+t.piece.length,t=t.right;return null}nodeAt2(e,t){let n=this.root,o=0;for(;n!==be;)if(n.left!==be&&n.lf_left>=e-1)n=n.left;else if(n.lf_left+n.piece.lineFeedCnt>e-1){let r=this.getAccumulatedValue(n,e-n.lf_left-2),s=this.getAccumulatedValue(n,e-n.lf_left-1);return o+=n.size_left,{node:n,remainder:Math.min(r+t-1,s),nodeStartOffset:o}}else if(n.lf_left+n.piece.lineFeedCnt===e-1){let r=this.getAccumulatedValue(n,e-n.lf_left-2);if(r+t-1<=n.piece.length)return{node:n,remainder:r+t-1,nodeStartOffset:o};t-=n.piece.length-r;break}else e-=n.lf_left+n.piece.lineFeedCnt,o+=n.size_left+n.piece.length,n=n.right;for(n=n.next();n!==be;){if(n.piece.lineFeedCnt>0){let r=this.getAccumulatedValue(n,0),s=this.offsetOfNode(n);return{node:n,remainder:Math.min(t-1,r),nodeStartOffset:s}}else if(n.piece.length>=t-1){let r=this.offsetOfNode(n);return{node:n,remainder:t-1,nodeStartOffset:r}}else t-=n.piece.length;n=n.next()}return null}nodeCharCodeAt(e,t){if(e.piece.lineFeedCnt<1)return-1;let n=this._buffers[e.piece.bufferIndex],o=this.offsetInBuffer(e.piece.bufferIndex,e.piece.start)+t;return n.buffer.charCodeAt(o)}offsetOfNode(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}shouldCheckCRLF(){return!(this._EOLNormalized&&this._EOL===`
`)}startWithLF(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===be||e.piece.lineFeedCnt===0)return!1;let t=e.piece,n=this._buffers[t.bufferIndex].lineStarts,o=t.start.line,r=n[o]+t.start.column;return o===n.length-1||n[o+1]>r+1?!1:this._buffers[t.bufferIndex].buffer.charCodeAt(r)===10}endWithCR(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===be||e.piece.lineFeedCnt===0?!1:this.nodeCharCodeAt(e,e.piece.length-1)===13}validateCRLFWithPrevNode(e){if(this.shouldCheckCRLF()&&this.startWithLF(e)){let t=e.prev();this.endWithCR(t)&&this.fixCRLF(t,e)}}validateCRLFWithNextNode(e){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let t=e.next();this.startWithLF(t)&&this.fixCRLF(e,t)}}fixCRLF(e,t){let n=[],o=this._buffers[e.piece.bufferIndex].lineStarts,r;e.piece.end.column===0?r={line:e.piece.end.line-1,column:o[e.piece.end.line]-o[e.piece.end.line-1]-1}:r={line:e.piece.end.line,column:e.piece.end.column-1};let s=e.piece.length-1,a=e.piece.lineFeedCnt-1;e.piece=new Nn(e.piece.bufferIndex,e.piece.start,r,a,s),rr(this,e,-1,-1),e.piece.length===0&&n.push(e);let l={line:t.piece.start.line+1,column:0},c=t.piece.length-1,u=this.getLineFeedCnt(t.piece.bufferIndex,l,t.piece.end);t.piece=new Nn(t.piece.bufferIndex,l,t.piece.end,u,c),rr(this,t,-1,-1),t.piece.length===0&&n.push(t);let p=this.createNewPieces(`\r
`);this.rbInsertRight(e,p[0]);for(let h=0;h<n.length;h++)hp(this,n[h])}adjustCarriageReturnFromNext(e,t){if(this.shouldCheckCRLF()&&this.endWithCR(e)){let n=t.next();if(this.startWithLF(n)){if(e+=`
`,n.piece.length===1)hp(this,n);else{let o=n.piece,r={line:o.start.line+1,column:0},s=o.length-1,a=this.getLineFeedCnt(o.bufferIndex,r,o.end);n.piece=new Nn(o.bufferIndex,r,o.end,a,s),rr(this,n,-1,-1)}return!0}}return!1}iterate(e,t){if(e===be)return t(be);let n=this.iterate(e.left,t);return n&&t(e)&&this.iterate(e.right,t)}getNodeContent(e){if(e===be)return"";let t=this._buffers[e.piece.bufferIndex],n=e.piece,o=this.offsetInBuffer(n.bufferIndex,n.start),r=this.offsetInBuffer(n.bufferIndex,n.end);return t.buffer.substring(o,r)}getPieceContent(e){let t=this._buffers[e.bufferIndex],n=this.offsetInBuffer(e.bufferIndex,e.start),o=this.offsetInBuffer(e.bufferIndex,e.end);return t.buffer.substring(n,o)}rbInsertRight(e,t){let n=new zd(t,1);if(n.left=be,n.right=be,n.parent=be,n.size_left=0,n.lf_left=0,this.root===be)this.root=n,n.color=0;else if(e.right===be)e.right=n,n.parent=e;else{let r=Ef(e.right);r.left=n,n.parent=r}return HS(this,n),n}rbInsertLeft(e,t){let n=new zd(t,1);if(n.left=be,n.right=be,n.parent=be,n.size_left=0,n.lf_left=0,this.root===be)this.root=n,n.color=0;else if(e.left===be)e.left=n,n.parent=e;else{let o=US(e.left);o.right=n,n.parent=o}return HS(this,n),n}getContentOfSubTree(e){let t="";return this.iterate(e,n=>(t+=this.getNodeContent(n),!0)),t}};var Qs=class i extends A{_pieceTree;_BOM;_mightContainRTL;_mightContainUnusualLineTerminators;_mightContainNonBasicASCII;_onDidChangeContent=this._register(new C);onDidChangeContent=this._onDidChangeContent.event;constructor(e,t,n,o,r,s,a){super(),this._BOM=t,this._mightContainNonBasicASCII=!s,this._mightContainRTL=o,this._mightContainUnusualLineTerminators=r,this._pieceTree=new Tf(e,n,a)}equals(e){return!(e instanceof i)||this._BOM!==e._BOM||this.getEOL()!==e.getEOL()?!1:this._pieceTree.equal(e._pieceTree)}mightContainRTL(){return this._mightContainRTL}mightContainUnusualLineTerminators(){return this._mightContainUnusualLineTerminators}resetMightContainUnusualLineTerminators(){this._mightContainUnusualLineTerminators=!1}mightContainNonBasicASCII(){return this._mightContainNonBasicASCII}getBOM(){return this._BOM}getEOL(){return this._pieceTree.getEOL()}createSnapshot(e){return this._pieceTree.createSnapshot(e?this._BOM:"")}getOffsetAt(e,t){return this._pieceTree.getOffsetAt(e,t)}getPositionAt(e){return this._pieceTree.getPositionAt(e)}getRangeAt(e,t){let n=e+t,o=this.getPositionAt(e),r=this.getPositionAt(n);return new te(o.lineNumber,o.column,r.lineNumber,r.column)}getValueInRange(e,t=0){if(e.isEmpty())return"";let n=this._getEndOfLine(t);return this._pieceTree.getValueInRange(e,n)}getValueLengthInRange(e,t=0){if(e.isEmpty())return 0;if(e.startLineNumber===e.endLineNumber)return e.endColumn-e.startColumn;let n=this.getOffsetAt(e.startLineNumber,e.startColumn),o=this.getOffsetAt(e.endLineNumber,e.endColumn),r=0,s=this._getEndOfLine(t),a=this.getEOL();if(s.length!==a.length){let l=s.length-a.length,c=e.endLineNumber-e.startLineNumber;r=l*c}return o-n+r}getCharacterCountInRange(e,t=0){if(this._mightContainNonBasicASCII){let n=0,o=e.startLineNumber,r=e.endLineNumber;for(let s=o;s<=r;s++){let a=this.getLineContent(s),l=s===o?e.startColumn-1:0,c=s===r?e.endColumn-1:a.length;for(let u=l;u<c;u++)ui(a.charCodeAt(u))?(n=n+1,u=u+1):n=n+1}return n+=this._getEndOfLine(t).length*(r-o),n}return this.getValueLengthInRange(e,t)}getNearestChunk(e){return this._pieceTree.getNearestChunk(e)}getLength(){return this._pieceTree.getLength()}getLineCount(){return this._pieceTree.getLineCount()}getLinesContent(){return this._pieceTree.getLinesContent()}getLineContent(e){return this._pieceTree.getLineContent(e)}getLineCharCode(e,t){return this._pieceTree.getLineCharCode(e,t)}getCharCode(e){return this._pieceTree.getCharCode(e)}getLineLength(e){return this._pieceTree.getLineLength(e)}getLineMinColumn(e){return 1}getLineMaxColumn(e){return this.getLineLength(e)+1}getLineFirstNonWhitespaceColumn(e){let t=Lr(this.getLineContent(e));return t===-1?0:t+1}getLineLastNonWhitespaceColumn(e){let t=wv(this.getLineContent(e));return t===-1?0:t+2}_getEndOfLine(e){switch(e){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(e){this._pieceTree.setEOL(e)}applyEdits(e,t,n){let o=this._mightContainRTL,r=this._mightContainUnusualLineTerminators,s=this._mightContainNonBasicASCII,a=!0,l=[];for(let f=0;f<e.length;f++){let b=e[f];a&&b._isTracked&&(a=!1);let E=b.range;if(b.text){let U=!0;s||(U=!_v(b.text),s=U),!o&&U&&(o=zc(b.text)),!r&&U&&(r=Rh(b.text))}let T="",_=0,O=0,M=0;if(b.text){let U;[_,O,M,U]=ni(b.text);let he=this.getEOL(),Q=he===`\r
`?2:1;U===0||U===Q?T=b.text:T=b.text.replace(/\r\n|\r|\n/g,he)}l[f]={sortIndex:f,identifier:b.identifier||null,range:E,rangeOffset:this.getOffsetAt(E.startLineNumber,E.startColumn),rangeLength:this.getValueLengthInRange(E),text:T,eolCount:_,firstLineLength:O,lastLineLength:M,forceMoveMarkers:!!b.forceMoveMarkers,isAutoWhitespaceEdit:b.isAutoWhitespaceEdit||!1}}l.sort(i._sortOpsAscending);let c=!1;for(let f=0,b=l.length-1;f<b;f++){let E=l[f].range.getEndPosition(),T=l[f+1].range.getStartPosition();if(T.isBeforeOrEqual(E)){if(T.isBefore(E))throw new Error("Overlapping ranges are not allowed!");c=!0}}a&&(l=this._reduceOperations(l));let u=n||t?i._getInverseEditRanges(l):[],p=[];if(t)for(let f=0;f<l.length;f++){let b=l[f],E=u[f];if(b.isAutoWhitespaceEdit&&b.range.isEmpty())for(let T=E.startLineNumber;T<=E.endLineNumber;T++){let _="";T===E.startLineNumber&&(_=this.getLineContent(b.range.startLineNumber),Lr(_)!==-1)||p.push({lineNumber:T,oldContent:_})}}let h=null;if(n){let f=0;h=[];for(let b=0;b<l.length;b++){let E=l[b],T=u[b],_=this.getValueInRange(E.range),O=E.rangeOffset+f;f+=E.text.length-_.length,h[b]={sortIndex:E.sortIndex,identifier:E.identifier,range:T,text:_,textChange:new yi(E.rangeOffset,_,O,E.text)}}c||h.sort((b,E)=>b.sortIndex-E.sortIndex)}this._mightContainRTL=o,this._mightContainUnusualLineTerminators=r,this._mightContainNonBasicASCII=s;let m=this._doApplyEdits(l),v=null;if(t&&p.length>0){p.sort((f,b)=>b.lineNumber-f.lineNumber),v=[];for(let f=0,b=p.length;f<b;f++){let E=p[f].lineNumber;if(f>0&&p[f-1].lineNumber===E)continue;let T=p[f].oldContent,_=this.getLineContent(E);_.length===0||_===T||Lr(_)!==-1||v.push(E)}}return this._onDidChangeContent.fire(),new Am(h,m,v)}_reduceOperations(e){return e.length<1e3?e:[this._toSingleEditOperation(e)]}_toSingleEditOperation(e){let t=!1,n=e[0].range,o=e[e.length-1].range,r=new te(n.startLineNumber,n.startColumn,o.endLineNumber,o.endColumn),s=n.startLineNumber,a=n.startColumn,l=[];for(let m=0,v=e.length;m<v;m++){let f=e[m],b=f.range;t=t||f.forceMoveMarkers,l.push(this.getValueInRange(new te(s,a,b.startLineNumber,b.startColumn))),f.text.length>0&&l.push(f.text),s=b.endLineNumber,a=b.endColumn}let c=l.join(""),[u,p,h]=ni(c);return{sortIndex:0,identifier:e[0].identifier,range:r,rangeOffset:this.getOffsetAt(r.startLineNumber,r.startColumn),rangeLength:this.getValueLengthInRange(r,0),text:c,eolCount:u,firstLineLength:p,lastLineLength:h,forceMoveMarkers:t,isAutoWhitespaceEdit:!1}}_doApplyEdits(e){e.sort(i._sortOpsDescending);let t=[];for(let n=0;n<e.length;n++){let o=e[n],r=o.range.startLineNumber,s=o.range.startColumn,a=o.range.endLineNumber,l=o.range.endColumn;if(r===a&&s===l&&o.text.length===0)continue;o.text?(this._pieceTree.delete(o.rangeOffset,o.rangeLength),this._pieceTree.insert(o.rangeOffset,o.text,!0)):this._pieceTree.delete(o.rangeOffset,o.rangeLength);let c=new te(r,s,a,l);t.push({range:c,rangeLength:o.rangeLength,text:o.text,rangeOffset:o.rangeOffset,forceMoveMarkers:o.forceMoveMarkers})}return t}findMatchesLineByLine(e,t,n,o){return this._pieceTree.findMatchesLineByLine(e,t,n,o)}getPieceTree(){return this._pieceTree}static _getInverseEditRange(e,t){let n=e.startLineNumber,o=e.startColumn,[r,s,a]=ni(t),l;if(t.length>0){let c=r+1;c===1?l=new te(n,o,n,o+s):l=new te(n,o,n+c-1,a+1)}else l=new te(n,o,n,o);return l}static _getInverseEditRanges(e){let t=[],n=0,o=0,r=null;for(let s=0,a=e.length;s<a;s++){let l=e[s],c,u;r?r.range.endLineNumber===l.range.startLineNumber?(c=n,u=o+(l.range.startColumn-r.range.endColumn)):(c=n+(l.range.startLineNumber-r.range.endLineNumber),u=l.range.startColumn):(c=l.range.startLineNumber,u=l.range.startColumn);let p;if(l.text.length>0){let h=l.eolCount+1;h===1?p=new te(c,u,c,u+l.firstLineLength):p=new te(c,u,c+h-1,l.lastLineLength+1)}else p=new te(c,u,c,u);n=p.endLineNumber,o=p.endColumn,t.push(p),r=l}return t}static _sortOpsAscending(e,t){let n=te.compareRangesUsingEnds(e.range,t.range);return n===0?e.sortIndex-t.sortIndex:n}static _sortOpsDescending(e,t){let n=te.compareRangesUsingEnds(e.range,t.range);return n===0?t.sortIndex-e.sortIndex:-n}};var YS=class{constructor(e,t,n,o,r,s,a,l,c){this._chunks=e;this._bom=t;this._cr=n;this._lf=o;this._crlf=r;this._containsRTL=s;this._containsUnusualLineTerminators=a;this._isBasicASCII=l;this._normalizeEOL=c}_getEOL(e){let t=this._cr+this._lf+this._crlf,n=this._cr+this._crlf;return t===0?e===1?`
`:`\r
`:n>t/2?`\r
`:`
`}create(e){let t=this._getEOL(e),n=this._chunks;if(this._normalizeEOL&&(t===`\r
`&&(this._cr>0||this._lf>0)||t===`
`&&(this._cr>0||this._crlf>0)))for(let r=0,s=n.length;r<s;r++){let a=n[r].buffer.replace(/\r\n|\r|\n/g,t),l=sr(a);n[r]=new ar(a,l)}let o=new Qs(n,this._bom,t,this._containsRTL,this._containsUnusualLineTerminators,this._isBasicASCII,this._normalizeEOL);return{textBuffer:o,disposable:o}}getFirstLineText(e){return this._chunks[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}},Xs=class{chunks;BOM;_hasPreviousChar;_previousChar;_tmpLineStarts;cr;lf;crlf;containsRTL;containsUnusualLineTerminators;isBasicASCII;constructor(){this.chunks=[],this.BOM="",this._hasPreviousChar=!1,this._previousChar=0,this._tmpLineStarts=[],this.cr=0,this.lf=0,this.crlf=0,this.containsRTL=!1,this.containsUnusualLineTerminators=!1,this.isBasicASCII=!0}acceptChunk(e){if(e.length===0)return;this.chunks.length===0&&Vw(e)&&(this.BOM=Uw,e=e.substr(1));let t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this._acceptChunk1(e.substr(0,e.length-1),!1),this._hasPreviousChar=!0,this._previousChar=t):(this._acceptChunk1(e,!1),this._hasPreviousChar=!1,this._previousChar=t)}_acceptChunk1(e,t){!t&&e.length===0||(this._hasPreviousChar?this._acceptChunk2(String.fromCharCode(this._previousChar)+e):this._acceptChunk2(e))}_acceptChunk2(e){let t=v_(this._tmpLineStarts,e);this.chunks.push(new ar(e,t.lineStarts)),this.cr+=t.cr,this.lf+=t.lf,this.crlf+=t.crlf,t.isBasicASCII||(this.isBasicASCII=!1,this.containsRTL||(this.containsRTL=zc(e)),this.containsUnusualLineTerminators||(this.containsUnusualLineTerminators=Rh(e)))}finish(e=!0){return this._finish(),new YS(this.chunks,this.BOM,this.cr,this.lf,this.crlf,this.containsRTL,this.containsUnusualLineTerminators,this.isBasicASCII,e)}_finish(){if(this.chunks.length===0&&this._acceptChunk1("",!0),this._hasPreviousChar){this._hasPreviousChar=!1;let e=this.chunks[this.chunks.length-1];e.buffer+=String.fromCharCode(this._previousChar);let t=sr(e.buffer);e.lineStarts=t,this._previousChar===13&&this.cr++}}};var kf=class{constructor(e){this._default=e}_store=[];get(e){return e<this._store.length?this._store[e]:this._default}set(e,t){for(;e>=this._store.length;)this._store[this._store.length]=this._default;this._store[e]=t}replace(e,t,n){if(e>=this._store.length)return;if(t===0){this.insert(e,n);return}else if(n===0){this.delete(e,t);return}let o=this._store.slice(0,e),r=this._store.slice(e+t),s=EF(n,this._default);this._store=o.concat(s,r)}delete(e,t){t===0||e>=this._store.length||this._store.splice(e,t)}insert(e,t){if(t===0||e>=this._store.length)return;let n=[];for(let o=0;o<t;o++)n[o]=this._default;this._store=Jr(this._store,e,n)}};function EF(i,e){let t=[];for(let n=0;n<i;n++)t[n]=e;return t}var Qa=class{static deserialize(e){let t=0,n=rn(e,t);t+=4;let o=[];for(let r=0;r<n;r++)t=ju.deserialize(e,t,o);return o}_tokens;constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){let n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e){n.appendLineTokens(t);return}}this._tokens.push(new ju(e,[t]))}finalize(){return this._tokens}serialize(){let e=this._serializeSize(),t=new Uint8Array(e);return this._serialize(t),t}_serializeSize(){let e=0;e+=4;for(let t=0;t<this._tokens.length;t++)e+=this._tokens[t].serializeSize();return e}_serialize(e){let t=0;sn(e,this._tokens.length,t),t+=4;for(let n=0;n<this._tokens.length;n++)t=this._tokens[n].serialize(e,t)}};var QS=class{constructor(e,t){this.tokenizationSupport=t;this.store=new Kd(e)}initialState=this.tokenizationSupport.getInitialState();store;getStartState(e){return this.store.getStartState(e,this.initialState)}getFirstInvalidLine(){return this.store.getFirstInvalidLine(this.initialState)}},Df=class extends QS{constructor(t,n,o,r){super(t,n);this._textModel=o;this._languageIdCodec=r}updateTokensUntilLine(t,n){let o=this._textModel.getLanguageId();for(;;){let r=this.getFirstInvalidLine();if(!r||r.lineNumber>n)break;let s=this._textModel.getLineContent(r.lineNumber),a=Hd(this._languageIdCodec,o,this.tokenizationSupport,s,!0,r.startState);t.add(r.lineNumber,a.tokens),this.store.setEndState(r.lineNumber,a.endState)}}getTokenTypeIfInsertingCharacter(t,n){let o=this.getStartState(t.lineNumber);if(!o)return 0;let r=this._textModel.getLanguageId(),s=this._textModel.getLineContent(t.lineNumber),a=s.substring(0,t.column-1)+n+s.substring(t.column-1),l=Hd(this._languageIdCodec,r,this.tokenizationSupport,a,!0,o),c=new Jt(l.tokens,a,this._languageIdCodec);if(c.getCount()===0)return 0;let u=c.findTokenIndexAtOffset(t.column-1);return c.getStandardTokenType(u)}tokenizeLineWithEdit(t,n){let o=this.getStartState(t);if(!o)return{mainLineTokens:null,additionalLines:null};let r=this._textModel.getLineContent(t),s=n.lineEdit.apply(r),a=this._textModel.getLanguageIdAtPosition(t,0),l=Hd(this._languageIdCodec,a,this.tokenizationSupport,s,!0,o),c=null;if(n.additionalLines){c=[];let p=l.endState;for(let h of n.additionalLines){let m=Hd(this._languageIdCodec,a,this.tokenizationSupport,h,!0,p);c.push(new Jt(m.tokens,h,this._languageIdCodec)),p=m.endState}}return{mainLineTokens:new Jt(l.tokens,s,this._languageIdCodec),additionalLines:c}}hasAccurateTokensForLine(t){let n=this.store.getFirstInvalidEndStateLineNumberOrMax();return t<n}isCheapToTokenize(t){let n=this.store.getFirstInvalidEndStateLineNumberOrMax();return t<n||t===n&&this._textModel.getLineLength(t)<2048}tokenizeHeuristically(t,n,o){if(o<=this.store.getFirstInvalidEndStateLineNumberOrMax())return{heuristicTokens:!1};if(n<=this.store.getFirstInvalidEndStateLineNumberOrMax())return this.updateTokensUntilLine(t,o),{heuristicTokens:!1};let r=this.guessStartState(n),s=this._textModel.getLanguageId();for(let a=n;a<=o;a++){let l=this._textModel.getLineContent(a),c=Hd(this._languageIdCodec,s,this.tokenizationSupport,l,!0,r);t.add(a,c.tokens),r=c.endState}return{heuristicTokens:!0}}guessStartState(t){let n=this._textModel.getLineFirstNonWhitespaceColumn(t),o=[],r=null;for(let l=t-1;n>1&&l>=1;l--){let c=this._textModel.getLineFirstNonWhitespaceColumn(l);if(c!==0&&c<n&&(o.push(this._textModel.getLineContent(l)),n=c,r=this.getStartState(l),r))break}r||(r=this.tokenizationSupport.getInitialState()),o.reverse();let s=this._textModel.getLanguageId(),a=r;for(let l of o)a=Hd(this._languageIdCodec,s,this.tokenizationSupport,l,!1,a).endState;return a}},Kd=class{constructor(e){this.lineCount=e;this._invalidEndStatesLineNumbers.addRange(new ut(1,e+1))}_tokenizationStateStore=new XS;_invalidEndStatesLineNumbers=new JS;getEndState(e){return this._tokenizationStateStore.getEndState(e)}setEndState(e,t){if(!t)throw new Ge("Cannot set null/undefined state");this._invalidEndStatesLineNumbers.delete(e);let n=this._tokenizationStateStore.setEndState(e,t);return n&&e<this.lineCount&&this._invalidEndStatesLineNumbers.addRange(new ut(e+1,e+2)),n}acceptChange(e,t){this.lineCount+=t-e.length,this._tokenizationStateStore.acceptChange(e,t),this._invalidEndStatesLineNumbers.addRangeAndResize(new ut(e.startLineNumber,e.endLineNumberExclusive),t)}acceptChanges(e){for(let t of e){let[n]=ni(t.text);this.acceptChange(new Mn(t.range.startLineNumber,t.range.endLineNumber+1),n+1)}}invalidateEndStateRange(e){this._invalidEndStatesLineNumbers.addRange(new ut(e.startLineNumber,e.endLineNumberExclusive))}getFirstInvalidEndStateLineNumber(){return this._invalidEndStatesLineNumbers.min}getFirstInvalidEndStateLineNumberOrMax(){return this.getFirstInvalidEndStateLineNumber()||Number.MAX_SAFE_INTEGER}allStatesValid(){return this._invalidEndStatesLineNumbers.min===null}getStartState(e,t){return e===1?t:this.getEndState(e-1)}getFirstInvalidLine(e){let t=this.getFirstInvalidEndStateLineNumber();if(t===null)return null;let n=this.getStartState(t,e);if(!n)throw new Ge("Start state must be defined");return{lineNumber:t,startState:n}}},XS=class{_lineEndStates=new kf(null);getEndState(e){return this._lineEndStates.get(e)}setEndState(e,t){let n=this._lineEndStates.get(e);return n&&n.equals(t)?!1:(this._lineEndStates.set(e,t),!0)}acceptChange(e,t){let n=e.length;t>0&&n>0&&(n--,t--),this._lineEndStates.replace(e.startLineNumber,n,t)}acceptChanges(e){for(let t of e){let[n]=ni(t.text);this.acceptChange(new Mn(t.range.startLineNumber,t.range.endLineNumber+1),n+1)}}},JS=class{_ranges=[];getRanges(){return this._ranges}get min(){return this._ranges.length===0?null:this._ranges[0].start}removeMin(){if(this._ranges.length===0)return null;let e=this._ranges[0];return e.start+1===e.endExclusive?this._ranges.shift():this._ranges[0]=new ut(e.start+1,e.endExclusive),e.start}delete(e){let t=this._ranges.findIndex(n=>n.contains(e));if(t!==-1){let n=this._ranges[t];n.start===e?n.endExclusive===e+1?this._ranges.splice(t,1):this._ranges[t]=new ut(e+1,n.endExclusive):n.endExclusive===e+1?this._ranges[t]=new ut(n.start,e):this._ranges.splice(t,1,new ut(n.start,e),new ut(e+1,n.endExclusive))}}addRange(e){ut.addRange(e,this._ranges)}addRangeAndResize(e,t){let n=0;for(;!(n>=this._ranges.length||e.start<=this._ranges[n].endExclusive);)n++;let o=n;for(;!(o>=this._ranges.length||e.endExclusive<this._ranges[o].start);)o++;let r=t-e.length;for(let s=o;s<this._ranges.length;s++)this._ranges[s]=this._ranges[s].delta(r);if(n===o){let s=new ut(e.start,e.start+t);s.isEmpty||this._ranges.splice(n,0,s)}else{let s=Math.min(e.start,this._ranges[n].start),a=Math.max(e.endExclusive,this._ranges[o-1].endExclusive),l=new ut(s,a+r);l.isEmpty?this._ranges.splice(n,o-n):this._ranges.splice(n,o-n,l)}}toString(){return this._ranges.map(e=>e.toString()).join(" + ")}};function Hd(i,e,t,n,o,r){let s=null;if(t)try{s=t.tokenizeEncoded(n,o,r.clone())}catch(a){Ne(a)}return s||(s=nf(i.encodeLanguageId(e),r)),Jt.convertToEndOffset(s.tokens,n.length),s}var _f=class{constructor(e,t){this._tokenizerWithStateStore=e;this._backgroundTokenStore=t}_isDisposed=!1;dispose(){this._isDisposed=!0}handleChanges(){this._beginBackgroundTokenization()}_isScheduled=!1;_beginBackgroundTokenization(){this._isScheduled||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._isScheduled=!0,ps(e=>{this._isScheduled=!1,this._backgroundTokenizeWithDeadline(e)}))}_backgroundTokenizeWithDeadline(e){let t=Date.now()+e.timeRemaining(),n=()=>{this._isDisposed||!this._tokenizerWithStateStore._textModel.isAttachedToEditor()||!this._hasLinesToTokenize()||(this._backgroundTokenizeForAtLeast1ms(),Date.now()<t?th(n):this._beginBackgroundTokenization())};n()}_backgroundTokenizeForAtLeast1ms(){let e=this._tokenizerWithStateStore._textModel.getLineCount(),t=new Qa,n=ga.create(!1);do if(n.elapsed()>1||this._tokenizeOneInvalidLine(t)>=e)break;while(this._hasLinesToTokenize());this._backgroundTokenStore.setTokens(t.finalize()),this.checkFinished()}_hasLinesToTokenize(){return this._tokenizerWithStateStore?!this._tokenizerWithStateStore.store.allStatesValid():!1}_tokenizeOneInvalidLine(e){let t=this._tokenizerWithStateStore?.getFirstInvalidLine();return t?(this._tokenizerWithStateStore.updateTokensUntilLine(e,t.lineNumber),t.lineNumber):this._tokenizerWithStateStore._textModel.getLineCount()+1}checkFinished(){this._isDisposed||this._tokenizerWithStateStore.store.allStatesValid()&&this._backgroundTokenStore.backgroundTokenizationFinished()}requestTokens(e,t){this._tokenizerWithStateStore.store.invalidateEndStateRange(new Mn(e,t))}};var Lf=class{_onDidChangeVisibleRanges=new C;onDidChangeVisibleRanges=this._onDidChangeVisibleRanges.event;_views=new Set;attachView(){let e=new ZS(t=>{this._onDidChangeVisibleRanges.fire({view:e,state:t})});return this._views.add(e),e}detachView(e){this._views.delete(e),this._onDidChangeVisibleRanges.fire({view:e,state:void 0})}},ZS=class{constructor(e){this.handleStateChange=e}setVisibleLines(e,t){let n=e.map(o=>new Mn(o.startLineNumber,o.endLineNumber+1));this.handleStateChange({visibleLineRanges:n,stabilized:t})}},Rf=class extends A{constructor(t){super();this._refreshTokens=t}runner=this._register(new Hi(()=>this.update(),50));_computedLineRanges=[];_lineRanges=[];get lineRanges(){return this._lineRanges}update(){Bt(this._computedLineRanges,this._lineRanges,(t,n)=>t.equals(n))||(this._computedLineRanges=this._lineRanges,this._refreshTokens())}handleStateChange(t){this._lineRanges=t.visibleLineRanges,t.stabilized?(this.runner.cancel(),this.update()):this.runner.schedule()}},Gd=class extends A{constructor(t,n,o){super();this._languageIdCodec=t;this._textModel=n;this.getLanguageId=o}_backgroundTokenizationState=1;get backgroundTokenizationState(){return this._backgroundTokenizationState}_onDidChangeBackgroundTokenizationState=this._register(new C);onDidChangeBackgroundTokenizationState=this._onDidChangeBackgroundTokenizationState.event;_onDidChangeTokens=this._register(new C);onDidChangeTokens=this._onDidChangeTokens.event;tokenizeIfCheap(t){this.isCheapToTokenize(t)&&this.forceTokenization(t)}};var I_=P("treeSitterParserService");var gp=class extends Gd{constructor(t,n,o,r){super(n,o,r);this._treeSitterService=t;this._initialize()}_tokenizationSupport=null;_lastLanguageId;_initialize(){let t=this.getLanguageId();(!this._tokenizationSupport||this._lastLanguageId!==t)&&(this._lastLanguageId=t,this._tokenizationSupport=Xu.get(t))}getLineTokens(t){let n=this._textModel.getLineContent(t);if(this._tokenizationSupport){let o=this._tokenizationSupport.tokenizeEncoded(t,this._textModel);if(o)return new Jt(o,n,this._languageIdCodec)}return Jt.createEmpty(n,this._languageIdCodec)}resetTokenization(t=!0){t&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]}),this._initialize()}handleDidChangeAttached(){}handleDidChangeContent(t){t.isFlush&&this.resetTokenization(!1)}forceTokenization(t){}hasAccurateTokensForLine(t){return!0}isCheapToTokenize(t){return!0}getTokenTypeIfInsertingCharacter(t,n,o){return 0}tokenizeLineWithEdit(t,n){return{mainLineTokens:null,additionalLines:null}}get hasTokens(){return this._treeSitterService.getParseResult(this._textModel)!==void 0}};var mp=class i{_lineTokens;_len;_languageIdCodec;constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,n){let o=null;if(t<this._len&&(o=this._lineTokens[t]),o!==null&&o!==Zo)return new Jt(er(o),n,this._languageIdCodec);let r=new Uint32Array(2);return r[0]=n.length,r[1]=x_(this._languageIdCodec.encodeLanguageId(e)),new Jt(r,n,this._languageIdCodec)}static _massageTokens(e,t,n){let o=n?er(n):null;if(t===0){let r=!1;if(o&&o.length>1&&(r=vi.getLanguageId(o[1])!==e),!r)return Zo}if(!o||o.length===0){let r=new Uint32Array(2);return r[0]=t,r[1]=x_(e),r.buffer}return o[o.length-2]=t,o.byteOffset===0&&o.byteLength===o.buffer.byteLength?o.buffer:o}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){t!==0&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(t===0)return;let n=[];for(let o=0;o<t;o++)n[o]=null;this._lineTokens=Jr(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,o,r){let s=i._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,o);this._ensureLine(t);let a=this._lineTokens[t];return this._lineTokens[t]=s,r?!i._equals(a,s):!1}static _equals(e,t){if(!e||!t)return!e&&!t;let n=er(e),o=er(t);if(n.length!==o.length)return!1;for(let r=0,s=n.length;r<s;r++)if(n[r]!==o[r])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new Ue(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){let t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this._lineTokens[t]=an.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1);return}this._lineTokens[t]=an.deleteEnding(this._lineTokens[t],e.startColumn-1);let n=e.endLineNumber-1,o=null;n<this._len&&(o=an.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=an.append(this._lineTokens[t],o),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(t===0&&n===0)return;let o=e.lineNumber-1;if(!(o>=this._len)){if(t===0){this._lineTokens[o]=an.insert(this._lineTokens[o],e.column-1,n);return}this._lineTokens[o]=an.deleteEnding(this._lineTokens[o],e.column-1),this._lineTokens[o]=an.insert(this._lineTokens[o],e.column-1,n),this._insertLines(e.lineNumber,t)}}setMultilineTokens(e,t){if(e.length===0)return{changes:[]};let n=[];for(let o=0,r=e.length;o<r;o++){let s=e[o],a=0,l=0,c=!1;for(let u=s.startLineNumber;u<=s.endLineNumber;u++)c?(this.setTokens(t.getLanguageId(),u-1,t.getLineLength(u),s.getLineTokens(u),!1),l=u):this.setTokens(t.getLanguageId(),u-1,t.getLineLength(u),s.getLineTokens(u),!0)&&(c=!0,a=u,l=u);c&&n.push({fromLineNumber:a,toLineNumber:l})}return{changes:n}}};function x_(i){return(i<<0|0|0|32768|2<<24|1024)>>>0}var Pf=class i{_pieces;_isComplete;_languageIdCodec;constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return this._pieces.length===0}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){let r=t[0].getRange(),s=t[t.length-1].getRange();if(!r||!s)return e;n=e.plusRange(r).plusRange(s)}let o=null;for(let r=0,s=this._pieces.length;r<s;r++){let a=this._pieces[r];if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){o=o||{index:r};break}if(a.removeTokens(n),a.isEmpty()){this._pieces.splice(r,1),r--,s--;continue}if(a.endLineNumber<n.startLineNumber)continue;if(a.startLineNumber>n.endLineNumber){o=o||{index:r};continue}let[l,c]=a.split(n);if(l.isEmpty()){o=o||{index:r};continue}c.isEmpty()||(this._pieces.splice(r,1,l,c),r++,s++,o=o||{index:r})}return o=o||{index:this._pieces.length},t.length>0&&(this._pieces=Jr(this._pieces,o.index,t)),n}isComplete(){return this._isComplete}addSparseTokens(e,t){if(t.getLineContent().length===0)return t;let n=this._pieces;if(n.length===0)return t;let o=i._findFirstPieceWithLine(n,e),r=n[o].getLineTokens(e);if(!r)return t;let s=t.getCount(),a=r.getCount(),l=0,c=[],u=0,p=0,h=(m,v)=>{m!==p&&(p=m,c[u++]=m,c[u++]=v)};for(let m=0;m<a;m++){let v=r.getStartCharacter(m),f=r.getEndCharacter(m),b=r.getMetadata(m),E=((b&1?2048:0)|(b&2?4096:0)|(b&4?8192:0)|(b&8?16384:0)|(b&16?16744448:0)|(b&32?4278190080:0))>>>0,T=~E>>>0;for(;l<s&&t.getEndOffset(l)<=v;)h(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<s&&t.getStartOffset(l)<v&&h(v,t.getMetadata(l));l<s&&t.getEndOffset(l)<f;)h(t.getEndOffset(l),t.getMetadata(l)&T|b&E),l++;if(l<s)h(f,t.getMetadata(l)&T|b&E),t.getEndOffset(l)===f&&l++;else{let _=Math.min(Math.max(0,l-1),s-1);h(f,t.getMetadata(_)&T|b&E)}}for(;l<s;)h(t.getEndOffset(l),t.getMetadata(l)),l++;return new Jt(new Uint32Array(c),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,o=e.length-1;for(;n<o;){let r=n+Math.floor((o-n)/2);if(e[r].endLineNumber<t)n=r+1;else if(e[r].startLineNumber>t)o=r-1;else{for(;r>n&&e[r-1].startLineNumber<=t&&t<=e[r-1].endLineNumber;)r--;return r}}return n}acceptEdit(e,t,n,o,r){for(let s of this._pieces)s.acceptEdit(e,t,n,o,r)}};var Kr=class extends Wd{constructor(t,n,o,r,s,a,l){super();this._textModel=t;this._bracketPairsTextModelPart=n;this._languageId=o;this._attachedViews=r;this._languageService=s;this._languageConfigurationService=a;this._treeSitterService=l;this._register(this._languageConfigurationService.onDidChange(c=>{c.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})})),this._register(ee.filter(Xu.onDidChange,c=>c.changedLanguages.includes(this._languageId))(()=>{this.createPreferredTokenProvider()})),this.createPreferredTokenProvider()}_semanticTokens=new Pf(this._languageService.languageIdCodec);_onDidChangeLanguage=this._register(new C);onDidChangeLanguage=this._onDidChangeLanguage.event;_onDidChangeLanguageConfiguration=this._register(new C);onDidChangeLanguageConfiguration=this._onDidChangeLanguageConfiguration.event;_onDidChangeTokens=this._register(new C);onDidChangeTokens=this._onDidChangeTokens.event;_tokens;_tokensDisposables=this._register(new re);createGrammarTokens(){return this._register(new Of(this._languageService.languageIdCodec,this._textModel,()=>this._languageId,this._attachedViews))}createTreeSitterTokens(){return this._register(new gp(this._treeSitterService,this._languageService.languageIdCodec,this._textModel,()=>this._languageId))}createTokens(t){let n=this._tokens!==void 0;this._tokens?.dispose(),this._tokens=t?this.createTreeSitterTokens():this.createGrammarTokens(),this._tokensDisposables.clear(),this._tokensDisposables.add(this._tokens.onDidChangeTokens(o=>{this._emitModelTokensChangedEvent(o)})),this._tokensDisposables.add(this._tokens.onDidChangeBackgroundTokenizationState(o=>{this._bracketPairsTextModelPart.handleDidChangeBackgroundTokenizationState()})),n&&this._tokens.resetTokenization()}createPreferredTokenProvider(){Xu.get(this._languageId)?this._tokens instanceof gp||this.createTokens(!0):this._tokens instanceof Of||this.createTokens(!1)}_hasListeners(){return this._onDidChangeLanguage.hasListeners()||this._onDidChangeLanguageConfiguration.hasListeners()||this._onDidChangeTokens.hasListeners()}handleLanguageConfigurationServiceChange(t){t.affects(this._languageId)&&this._onDidChangeLanguageConfiguration.fire({})}handleDidChangeContent(t){if(t.isFlush)this._semanticTokens.flush();else if(!t.isEolChange)for(let n of t.changes){let[o,r,s]=ni(n.text);this._semanticTokens.acceptEdit(n.range,o,r,s,n.text.length>0?n.text.charCodeAt(0):0)}this._tokens.handleDidChangeContent(t)}handleDidChangeAttached(){this._tokens.handleDidChangeAttached()}getLineTokens(t){this.validateLineNumber(t);let n=this._tokens.getLineTokens(t);return this._semanticTokens.addSparseTokens(t,n)}_emitModelTokensChangedEvent(t){this._textModel._isDisposing()||(this._bracketPairsTextModelPart.handleDidChangeTokens(t),this._onDidChangeTokens.fire(t))}validateLineNumber(t){if(t<1||t>this._textModel.getLineCount())throw new Ge("Illegal value for lineNumber")}get hasTokens(){return this._tokens.hasTokens}resetTokenization(){this._tokens.resetTokenization()}get backgroundTokenizationState(){return this._tokens.backgroundTokenizationState}forceTokenization(t){this.validateLineNumber(t),this._tokens.forceTokenization(t)}hasAccurateTokensForLine(t){return this.validateLineNumber(t),this._tokens.hasAccurateTokensForLine(t)}isCheapToTokenize(t){return this.validateLineNumber(t),this._tokens.isCheapToTokenize(t)}tokenizeIfCheap(t){this.validateLineNumber(t),this._tokens.tokenizeIfCheap(t)}getTokenTypeIfInsertingCharacter(t,n,o){return this._tokens.getTokenTypeIfInsertingCharacter(t,n,o)}tokenizeLineWithEdit(t,n){return this._tokens.tokenizeLineWithEdit(t,n)}setSemanticTokens(t,n){this._semanticTokens.set(t,n),this._emitModelTokensChangedEvent({semanticTokensApplied:t!==null,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]})}hasCompleteSemanticTokens(){return this._semanticTokens.isComplete()}hasSomeSemanticTokens(){return!this._semanticTokens.isEmpty()}setPartialSemanticTokens(t,n){if(this.hasCompleteSemanticTokens())return;let o=this._textModel.validateRange(this._semanticTokens.setPartial(t,n));this._emitModelTokensChangedEvent({semanticTokensApplied:!0,ranges:[{fromLineNumber:o.startLineNumber,toLineNumber:o.endLineNumber}]})}getWordAtPosition(t){this.assertNotDisposed();let n=this._textModel.validatePosition(t),o=this._textModel.getLineContent(n.lineNumber),r=this.getLineTokens(n.lineNumber),s=r.findTokenIndexAtOffset(n.column-1),[a,l]=Kr._findLanguageBoundaries(r,s),c=Ng(n.column,this.getLanguageConfiguration(r.getLanguageId(s)).getWordDefinition(),o.substring(a,l),a);if(c&&c.startColumn<=t.column&&t.column<=c.endColumn)return c;if(s>0&&a===n.column-1){let[u,p]=Kr._findLanguageBoundaries(r,s-1),h=Ng(n.column,this.getLanguageConfiguration(r.getLanguageId(s-1)).getWordDefinition(),o.substring(u,p),u);if(h&&h.startColumn<=t.column&&t.column<=h.endColumn)return h}return null}getLanguageConfiguration(t){return this._languageConfigurationService.getLanguageConfiguration(t)}static _findLanguageBoundaries(t,n){let o=t.getLanguageId(n),r=0;for(let a=n;a>=0&&t.getLanguageId(a)===o;a--)r=t.getStartOffset(a);let s=t.getLineContent().length;for(let a=n,l=t.getCount();a<l&&t.getLanguageId(a)===o;a++)s=t.getEndOffset(a);return[r,s]}getWordUntilPosition(t){let n=this.getWordAtPosition(t);return n?{word:n.word.substr(0,t.column-n.startColumn),startColumn:n.startColumn,endColumn:t.column}:{word:"",startColumn:t.column,endColumn:t.column}}getLanguageId(){return this._languageId}getLanguageIdAtPosition(t,n){let o=this._textModel.validatePosition(new Ue(t,n)),r=this.getLineTokens(o.lineNumber);return r.getLanguageId(r.findTokenIndexAtOffset(o.column-1))}setLanguageId(t,n="api"){if(this._languageId===t)return;let o={oldLanguage:this._languageId,newLanguage:t,source:n};this._languageId=t,this._bracketPairsTextModelPart.handleDidChangeLanguage(o),this._tokens.resetTokenization(),this.createPreferredTokenProvider(),this._onDidChangeLanguage.fire(o),this._onDidChangeLanguageConfiguration.fire({})}};Kr=L([w(4,Pt),w(5,Fu),w(6,I_)],Kr);var Of=class extends Gd{_tokenizer=null;_defaultBackgroundTokenizer=null;_backgroundTokenizer=this._register(new Un);_tokens=new mp(this._languageIdCodec);_debugBackgroundTokens;_debugBackgroundStates;_debugBackgroundTokenizer=this._register(new Un);_attachedViewStates=this._register(new Fo);constructor(e,t,n,o){super(e,t,n),this._register(Os.onDidChange(r=>{let s=this.getLanguageId();r.changedLanguages.indexOf(s)!==-1&&this.resetTokenization()})),this.resetTokenization(),this._register(o.onDidChangeVisibleRanges(({view:r,state:s})=>{if(s){let a=this._attachedViewStates.get(r);a||(a=new Rf(()=>this.refreshRanges(a.lineRanges)),this._attachedViewStates.set(r,a)),a.handleStateChange(s)}else this._attachedViewStates.deleteAndDispose(r)}))}resetTokenization(e=!0){this._tokens.flush(),this._debugBackgroundTokens?.flush(),this._debugBackgroundStates&&(this._debugBackgroundStates=new Kd(this._textModel.getLineCount())),e&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:[{fromLineNumber:1,toLineNumber:this._textModel.getLineCount()}]});let t=()=>{if(this._textModel.isTooLargeForTokenization())return[null,null];let r=Os.get(this.getLanguageId());if(!r)return[null,null];let s;try{s=r.getInitialState()}catch(a){return Ne(a),[null,null]}return[r,s]},[n,o]=t();if(n&&o?this._tokenizer=new Df(this._textModel.getLineCount(),n,this._textModel,this._languageIdCodec):this._tokenizer=null,this._backgroundTokenizer.clear(),this._defaultBackgroundTokenizer=null,this._tokenizer){let r={setTokens:s=>{this.setTokens(s)},backgroundTokenizationFinished:()=>{if(this._backgroundTokenizationState===2)return;let s=2;this._backgroundTokenizationState=s,this._onDidChangeBackgroundTokenizationState.fire()},setEndState:(s,a)=>{if(!this._tokenizer)return;let l=this._tokenizer.store.getFirstInvalidEndStateLineNumber();l!==null&&s>=l&&this._tokenizer?.store.setEndState(s,a)}};n&&n.createBackgroundTokenizer&&!n.backgroundTokenizerShouldOnlyVerifyTokens&&(this._backgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,r)),!this._backgroundTokenizer.value&&!this._textModel.isTooLargeForTokenization()&&(this._backgroundTokenizer.value=this._defaultBackgroundTokenizer=new _f(this._tokenizer,r),this._defaultBackgroundTokenizer.handleChanges()),n?.backgroundTokenizerShouldOnlyVerifyTokens&&n.createBackgroundTokenizer?(this._debugBackgroundTokens=new mp(this._languageIdCodec),this._debugBackgroundStates=new Kd(this._textModel.getLineCount()),this._debugBackgroundTokenizer.clear(),this._debugBackgroundTokenizer.value=n.createBackgroundTokenizer(this._textModel,{setTokens:s=>{this._debugBackgroundTokens?.setMultilineTokens(s,this._textModel)},backgroundTokenizationFinished(){},setEndState:(s,a)=>{this._debugBackgroundStates?.setEndState(s,a)}})):(this._debugBackgroundTokens=void 0,this._debugBackgroundStates=void 0,this._debugBackgroundTokenizer.value=void 0)}this.refreshAllVisibleLineTokens()}handleDidChangeAttached(){this._defaultBackgroundTokenizer?.handleChanges()}handleDidChangeContent(e){if(e.isFlush)this.resetTokenization(!1);else if(!e.isEolChange){for(let t of e.changes){let[n,o]=ni(t.text);this._tokens.acceptEdit(t.range,n,o),this._debugBackgroundTokens?.acceptEdit(t.range,n,o)}this._debugBackgroundStates?.acceptChanges(e.changes),this._tokenizer&&this._tokenizer.store.acceptChanges(e.changes),this._defaultBackgroundTokenizer?.handleChanges()}}setTokens(e){let{changes:t}=this._tokens.setMultilineTokens(e,this._textModel);return t.length>0&&this._onDidChangeTokens.fire({semanticTokensApplied:!1,ranges:t}),{changes:t}}refreshAllVisibleLineTokens(){let e=Mn.joinMany([...this._attachedViewStates].map(([t,n])=>n.lineRanges));this.refreshRanges(e)}refreshRanges(e){for(let t of e)this.refreshRange(t.startLineNumber,t.endLineNumberExclusive-1)}refreshRange(e,t){if(!this._tokenizer)return;e=Math.max(1,Math.min(this._textModel.getLineCount(),e)),t=Math.min(this._textModel.getLineCount(),t);let n=new Qa,{heuristicTokens:o}=this._tokenizer.tokenizeHeuristically(n,e,t),r=this.setTokens(n.finalize());if(o)for(let s of r.changes)this._backgroundTokenizer.value?.requestTokens(s.fromLineNumber,s.toLineNumber+1);this._defaultBackgroundTokenizer?.checkFinished()}forceTokenization(e){let t=new Qa;this._tokenizer?.updateTokensUntilLine(t,e),this.setTokens(t.finalize()),this._defaultBackgroundTokenizer?.checkFinished()}hasAccurateTokensForLine(e){return this._tokenizer?this._tokenizer.hasAccurateTokensForLine(e):!0}isCheapToTokenize(e){return this._tokenizer?this._tokenizer.isCheapToTokenize(e):!0}getLineTokens(e){let t=this._textModel.getLineContent(e),n=this._tokens.getTokens(this._textModel.getLanguageId(),e-1,t);if(this._debugBackgroundTokens&&this._debugBackgroundStates&&this._tokenizer&&this._debugBackgroundStates.getFirstInvalidEndStateLineNumberOrMax()>e&&this._tokenizer.store.getFirstInvalidEndStateLineNumberOrMax()>e){let o=this._debugBackgroundTokens.getTokens(this._textModel.getLanguageId(),e-1,t);!n.equals(o)&&this._debugBackgroundTokenizer.value?.reportMismatchingTokens&&this._debugBackgroundTokenizer.value.reportMismatchingTokens(e)}return n}getTokenTypeIfInsertingCharacter(e,t,n){if(!this._tokenizer)return 0;let o=this._textModel.validatePosition(new Ue(e,t));return this.forceTokenization(o.lineNumber),this._tokenizer.getTokenTypeIfInsertingCharacter(o,n)}tokenizeLineWithEdit(e,t){return this._tokenizer?(this.forceTokenization(e),this._tokenizer.tokenizeLineWithEdit(e,t)):{mainLineTokens:null,additionalLines:null}}get hasTokens(){return this._tokens.hasTokens}};function aE(i){let e=new Xs;return e.acceptChunk(i),e.finish()}function w_(i){return new Promise((e,t)=>{let n=new Xs,o=!1;qy(i,{onData:r=>{n.acceptChunk(typeof r=="string"?r:r.toString())},onError:r=>{o||(o=!0,t(r))},onEnd:()=>{o||(o=!0,e(n.finish()))}})})}function CF(i){let e=new Xs,t;for(;typeof(t=i.read())=="string";)e.acceptChunk(t);return e.finish()}function S_(i,e){let t;return typeof i=="string"?t=aE(i):S1(i)?t=CF(i):t=i,t.create(e)}var Af=0,wF=999,TF=1e4,tE=class{_source;_eos;constructor(e){this._source=e,this._eos=!1}read(){if(this._eos)return null;let e=[],t=0,n=0;do{let o=this._source.read();if(o===null)return this._eos=!0,t===0?null:e.join("");if(o.length>0&&(e[t++]=o,n+=o.length),n>=64*1024)return e.join("")}while(!0)}},fp=()=>{throw new Error("Invalid change accessor")};var Bi=class extends A{constructor(t,n,o,r=null,s,a,l,c){super();this._undoRedoService=s;this._languageService=a;this._languageConfigurationService=l;this.instantiationService=c;Af++,this.id="$model"+Af,this.isForSimpleWidget=o.isForSimpleWidget,typeof r>"u"||r===null?this._associatedResource=N.parse("inmemory://model/"+Af):this._associatedResource=r,this._attachedEditorCount=0;let{textBuffer:u,disposable:p}=S_(t,o.defaultEOL);this._buffer=u,this._bufferDisposable=p,this._options=Bi.resolveOptions(this._buffer,o);let h=typeof n=="string"?n:n.languageId;typeof n!="string"&&(this._languageSelectionListener.value=n.onDidChange(()=>this._setLanguage(n.languageId))),this._bracketPairs=this._register(new bf(this,this._languageConfigurationService)),this._guidesTextModelPart=this._register(new Sf(this,this._languageConfigurationService)),this._decorationProvider=this._register(new vf(this)),this._tokenizationTextModelPart=this.instantiationService.createInstance(Kr,this,this._bracketPairs,h,this._attachedViews);let m=this._buffer.getLineCount(),v=this._buffer.getValueLengthInRange(new te(1,1,m,this._buffer.getLineLength(m)+1),0);o.largeFileOptimizations?(this._isTooLargeForTokenization=v>Bi.LARGE_FILE_SIZE_THRESHOLD||m>Bi.LARGE_FILE_LINE_COUNT_THRESHOLD,this._isTooLargeForHeapOperation=v>Bi.LARGE_FILE_HEAP_OPERATION_THRESHOLD):(this._isTooLargeForTokenization=!1,this._isTooLargeForHeapOperation=!1),this._isTooLargeForSyncing=v>Bi._MODEL_SYNC_LIMIT,this._versionId=1,this._alternativeVersionId=1,this._initialUndoRedoSnapshot=null,this._isDisposed=!1,this.__isDisposing=!1,this._instanceId=zw(Af),this._lastDecorationId=0,this._decorations=Object.create(null),this._decorationsTree=new Nf,this._commandManager=new xf(this,this._undoRedoService),this._isUndoing=!1,this._isRedoing=!1,this._trimAutoWhitespaceLines=null,this._register(this._decorationProvider.onDidChange(()=>{this._onDidChangeDecorations.beginDeferredEmit(),this._onDidChangeDecorations.fire(),this._onDidChangeDecorations.endDeferredEmit()})),this._languageService.requestRichLanguageFeatures(h),this._register(this._languageConfigurationService.onDidChange(f=>{this._bracketPairs.handleLanguageConfigurationServiceChange(f),this._tokenizationTextModelPart.handleLanguageConfigurationServiceChange(f)}))}static _MODEL_SYNC_LIMIT=50*1024*1024;static LARGE_FILE_SIZE_THRESHOLD=20*1024*1024;static LARGE_FILE_LINE_COUNT_THRESHOLD=300*1e3;static LARGE_FILE_HEAP_OPERATION_THRESHOLD=256*1024*1024;static DEFAULT_CREATION_OPTIONS={isForSimpleWidget:!1,tabSize:Yo.tabSize,indentSize:Yo.indentSize,insertSpaces:Yo.insertSpaces,detectIndentation:!1,defaultEOL:1,trimAutoWhitespace:Yo.trimAutoWhitespace,largeFileOptimizations:Yo.largeFileOptimizations,bracketPairColorizationOptions:Yo.bracketPairColorizationOptions};static resolveOptions(t,n){if(n.detectIndentation){let o=FS(t,n.tabSize,n.insertSpaces);return new hd({tabSize:o.tabSize,indentSize:"tabSize",insertSpaces:o.insertSpaces,trimAutoWhitespace:n.trimAutoWhitespace,defaultEOL:n.defaultEOL,bracketPairColorizationOptions:n.bracketPairColorizationOptions})}return new hd(n)}_onWillDispose=this._register(new C);onWillDispose=this._onWillDispose.event;_onDidChangeDecorations=this._register(new rE(t=>this.handleBeforeFireDecorationsChangedEvent(t)));onDidChangeDecorations=this._onDidChangeDecorations.event;get onDidChangeLanguage(){return this._tokenizationTextModelPart.onDidChangeLanguage}get onDidChangeLanguageConfiguration(){return this._tokenizationTextModelPart.onDidChangeLanguageConfiguration}get onDidChangeTokens(){return this._tokenizationTextModelPart.onDidChangeTokens}_onDidChangeOptions=this._register(new C);onDidChangeOptions=this._onDidChangeOptions.event;_onDidChangeAttached=this._register(new C);onDidChangeAttached=this._onDidChangeAttached.event;_onDidChangeInjectedText=this._register(new C);_eventEmitter=this._register(new sE);onDidChangeContent(t){return this._eventEmitter.slowEvent(n=>t(n.contentChangedEvent))}onDidChangeContentOrInjectedText(t){return Tr(this._eventEmitter.fastEvent(n=>t(n)),this._onDidChangeInjectedText.event(n=>t(n)))}id;isForSimpleWidget;_associatedResource;_attachedEditorCount;_buffer;_bufferDisposable;_options;_languageSelectionListener=this._register(new Un);_isDisposed;__isDisposing;_isDisposing(){return this.__isDisposing}_versionId;_alternativeVersionId;_initialUndoRedoSnapshot;_isTooLargeForSyncing;_isTooLargeForTokenization;_isTooLargeForHeapOperation;_commandManager;_isUndoing;_isRedoing;_trimAutoWhitespaceLines;_instanceId;_deltaDecorationCallCnt=0;_lastDecorationId;_decorations;_decorationsTree;_decorationProvider;_tokenizationTextModelPart;get tokenization(){return this._tokenizationTextModelPart}_bracketPairs;get bracketPairs(){return this._bracketPairs}_guidesTextModelPart;get guides(){return this._guidesTextModelPart}_attachedViews=new Lf;dispose(){this.__isDisposing=!0,this._onWillDispose.fire(),this._tokenizationTextModelPart.dispose(),this._isDisposed=!0,super.dispose(),this._bufferDisposable.dispose(),this.__isDisposing=!1;let t=new Qs([],"",`
`,!1,!1,!0,!0);t.dispose(),this._buffer=t,this._bufferDisposable=A.None}_hasListeners(){return this._onWillDispose.hasListeners()||this._onDidChangeDecorations.hasListeners()||this._tokenizationTextModelPart._hasListeners()||this._onDidChangeOptions.hasListeners()||this._onDidChangeAttached.hasListeners()||this._onDidChangeInjectedText.hasListeners()||this._eventEmitter.hasListeners()}_assertNotDisposed(){if(this._isDisposed)throw new Ge("Model is disposed!")}equalsTextBuffer(t){return this._assertNotDisposed(),this._buffer.equals(t)}getTextBuffer(){return this._assertNotDisposed(),this._buffer}_emitContentChangedEvent(t,n){this.__isDisposing||(this._tokenizationTextModelPart.handleDidChangeContent(n),this._bracketPairs.handleDidChangeContent(n),this._eventEmitter.fire(new Lm(t,n)))}setValue(t){if(this._assertNotDisposed(),t==null)throw sa();let{textBuffer:n,disposable:o}=S_(t,this._options.defaultEOL);this._setValueFromTextBuffer(n,o)}_createContentChanged2(t,n,o,r,s,a,l,c){return{changes:[{range:t,rangeOffset:n,rangeLength:o,text:r}],eol:this._buffer.getEOL(),isEolChange:c,versionId:this.getVersionId(),isUndoing:s,isRedoing:a,isFlush:l}}_setValueFromTextBuffer(t,n){this._assertNotDisposed();let o=this.getFullModelRange(),r=this.getValueLengthInRange(o),s=this.getLineCount(),a=this.getLineMaxColumn(s);this._buffer=t,this._bufferDisposable.dispose(),this._bufferDisposable=n,this._increaseVersionId(),this._decorations=Object.create(null),this._decorationsTree=new Nf,this._commandManager.clear(),this._trimAutoWhitespaceLines=null,this._emitContentChangedEvent(new Ua([new wm],this._versionId,!1,!1),this._createContentChanged2(new te(1,1,s,a),0,r,this.getValue(),!1,!1,!0,!1))}setEOL(t){this._assertNotDisposed();let n=t===1?`\r
`:`
`;if(this._buffer.getEOL()===n)return;let o=this.getFullModelRange(),r=this.getValueLengthInRange(o),s=this.getLineCount(),a=this.getLineMaxColumn(s);this._onBeforeEOLChange(),this._buffer.setEOL(n),this._increaseVersionId(),this._onAfterEOLChange(),this._emitContentChangedEvent(new Ua([new Dm],this._versionId,!1,!1),this._createContentChanged2(new te(1,1,s,a),0,r,this.getValue(),!1,!1,!1,!0))}_onBeforeEOLChange(){this._decorationsTree.ensureAllNodesHaveRanges(this)}_onAfterEOLChange(){let t=this.getVersionId(),n=this._decorationsTree.collectNodesPostOrder();for(let o=0,r=n.length;o<r;o++){let s=n[o],a=s.range,l=s.cachedAbsoluteStart-s.start,c=this._buffer.getOffsetAt(a.startLineNumber,a.startColumn),u=this._buffer.getOffsetAt(a.endLineNumber,a.endColumn);s.cachedAbsoluteStart=c,s.cachedAbsoluteEnd=u,s.cachedVersionId=t,s.start=c-l,s.end=u-l,zr(s)}}onBeforeAttached(){return this._attachedEditorCount++,this._attachedEditorCount===1&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.attachView()}onBeforeDetached(t){this._attachedEditorCount--,this._attachedEditorCount===0&&(this._tokenizationTextModelPart.handleDidChangeAttached(),this._onDidChangeAttached.fire(void 0)),this._attachedViews.detachView(t)}isAttachedToEditor(){return this._attachedEditorCount>0}getAttachedEditorCount(){return this._attachedEditorCount}isTooLargeForSyncing(){return this._isTooLargeForSyncing}isTooLargeForTokenization(){return this._isTooLargeForTokenization}isTooLargeForHeapOperation(){return this._isTooLargeForHeapOperation}isDisposed(){return this._isDisposed}isDominatedByLongLines(){if(this._assertNotDisposed(),this.isTooLargeForTokenization())return!1;let t=0,n=0,o=this._buffer.getLineCount();for(let r=1;r<=o;r++){let s=this._buffer.getLineLength(r);s>=TF?n+=s:t+=s}return n>t}get uri(){return this._associatedResource}getOptions(){return this._assertNotDisposed(),this._options}getFormattingOptions(){return{tabSize:this._options.indentSize,insertSpaces:this._options.insertSpaces}}updateOptions(t){this._assertNotDisposed();let n=typeof t.tabSize<"u"?t.tabSize:this._options.tabSize,o=typeof t.indentSize<"u"?t.indentSize:this._options.originalIndentSize,r=typeof t.insertSpaces<"u"?t.insertSpaces:this._options.insertSpaces,s=typeof t.trimAutoWhitespace<"u"?t.trimAutoWhitespace:this._options.trimAutoWhitespace,a=typeof t.bracketColorizationOptions<"u"?t.bracketColorizationOptions:this._options.bracketPairColorizationOptions,l=new hd({tabSize:n,indentSize:o,insertSpaces:r,defaultEOL:this._options.defaultEOL,trimAutoWhitespace:s,bracketPairColorizationOptions:a});if(this._options.equals(l))return;let c=this._options.createChangeEvent(l);this._options=l,this._bracketPairs.handleDidChangeOptions(c),this._decorationProvider.handleDidChangeOptions(c),this._onDidChangeOptions.fire(c)}detectIndentation(t,n){this._assertNotDisposed();let o=FS(this._buffer,n,t);this.updateOptions({insertSpaces:o.insertSpaces,tabSize:o.tabSize,indentSize:o.tabSize})}normalizeIndentation(t){return this._assertNotDisposed(),Vx(t,this._options.indentSize,this._options.insertSpaces)}getVersionId(){return this._assertNotDisposed(),this._versionId}mightContainRTL(){return this._buffer.mightContainRTL()}mightContainUnusualLineTerminators(){return this._buffer.mightContainUnusualLineTerminators()}removeUnusualLineTerminators(t=null){let n=this.findMatches(Lv.source,!1,!0,!1,null,!1,1073741824);this._buffer.resetMightContainUnusualLineTerminators(),this.pushEditOperations(t,n.map(o=>({range:o.range,text:null})),()=>null)}mightContainNonBasicASCII(){return this._buffer.mightContainNonBasicASCII()}getAlternativeVersionId(){return this._assertNotDisposed(),this._alternativeVersionId}getInitialUndoRedoSnapshot(){return this._assertNotDisposed(),this._initialUndoRedoSnapshot}getOffsetAt(t){this._assertNotDisposed();let n=this._validatePosition(t.lineNumber,t.column,0);return this._buffer.getOffsetAt(n.lineNumber,n.column)}getPositionAt(t){this._assertNotDisposed();let n=Math.min(this._buffer.getLength(),Math.max(0,t));return this._buffer.getPositionAt(n)}_increaseVersionId(){this._versionId=this._versionId+1,this._alternativeVersionId=this._versionId}_overwriteVersionId(t){this._versionId=t}_overwriteAlternativeVersionId(t){this._alternativeVersionId=t}_overwriteInitialUndoRedoSnapshot(t){this._initialUndoRedoSnapshot=t}getValue(t,n=!1){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Ge("Operation would exceed heap memory limits");let o=this.getFullModelRange(),r=this.getValueInRange(o,t);return n?this._buffer.getBOM()+r:r}createSnapshot(t=!1){return new tE(this._buffer.createSnapshot(t))}getValueLength(t,n=!1){this._assertNotDisposed();let o=this.getFullModelRange(),r=this.getValueLengthInRange(o,t);return n?this._buffer.getBOM().length+r:r}getValueInRange(t,n=0){return this._assertNotDisposed(),this._buffer.getValueInRange(this.validateRange(t),n)}getValueLengthInRange(t,n=0){return this._assertNotDisposed(),this._buffer.getValueLengthInRange(this.validateRange(t),n)}getCharacterCountInRange(t,n=0){return this._assertNotDisposed(),this._buffer.getCharacterCountInRange(this.validateRange(t),n)}getLineCount(){return this._assertNotDisposed(),this._buffer.getLineCount()}getLineContent(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new Ge("Illegal value for lineNumber");return this._buffer.getLineContent(t)}getLineLength(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new Ge("Illegal value for lineNumber");return this._buffer.getLineLength(t)}getLinesContent(){if(this._assertNotDisposed(),this.isTooLargeForHeapOperation())throw new Ge("Operation would exceed heap memory limits");return this._buffer.getLinesContent()}getEOL(){return this._assertNotDisposed(),this._buffer.getEOL()}getEndOfLineSequence(){return this._assertNotDisposed(),this._buffer.getEOL()===`
`?0:1}getLineMinColumn(t){return this._assertNotDisposed(),1}getLineMaxColumn(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new Ge("Illegal value for lineNumber");return this._buffer.getLineLength(t)+1}getLineFirstNonWhitespaceColumn(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new Ge("Illegal value for lineNumber");return this._buffer.getLineFirstNonWhitespaceColumn(t)}getLineLastNonWhitespaceColumn(t){if(this._assertNotDisposed(),t<1||t>this.getLineCount())throw new Ge("Illegal value for lineNumber");return this._buffer.getLineLastNonWhitespaceColumn(t)}_validateRangeRelaxedNoAllocations(t){let n=this._buffer.getLineCount(),o=t.startLineNumber,r=t.startColumn,s=Math.floor(typeof o=="number"&&!isNaN(o)?o:1),a=Math.floor(typeof r=="number"&&!isNaN(r)?r:1);if(s<1)s=1,a=1;else if(s>n)s=n,a=this.getLineMaxColumn(s);else if(a<=1)a=1;else{let h=this.getLineMaxColumn(s);a>=h&&(a=h)}let l=t.endLineNumber,c=t.endColumn,u=Math.floor(typeof l=="number"&&!isNaN(l)?l:1),p=Math.floor(typeof c=="number"&&!isNaN(c)?c:1);if(u<1)u=1,p=1;else if(u>n)u=n,p=this.getLineMaxColumn(u);else if(p<=1)p=1;else{let h=this.getLineMaxColumn(u);p>=h&&(p=h)}return o===s&&r===a&&l===u&&c===p&&t instanceof te&&!(t instanceof Fr)?t:new te(s,a,u,p)}_isValidPosition(t,n,o){if(typeof t!="number"||typeof n!="number"||isNaN(t)||isNaN(n)||t<1||n<1||(t|0)!==t||(n|0)!==n)return!1;let r=this._buffer.getLineCount();if(t>r)return!1;if(n===1)return!0;let s=this.getLineMaxColumn(t);if(n>s)return!1;if(o===1){let a=this._buffer.getLineCharCode(t,n-2);if(ui(a))return!1}return!0}_validatePosition(t,n,o){let r=Math.floor(typeof t=="number"&&!isNaN(t)?t:1),s=Math.floor(typeof n=="number"&&!isNaN(n)?n:1),a=this._buffer.getLineCount();if(r<1)return new Ue(1,1);if(r>a)return new Ue(a,this.getLineMaxColumn(a));if(s<=1)return new Ue(r,1);let l=this.getLineMaxColumn(r);if(s>=l)return new Ue(r,l);if(o===1){let c=this._buffer.getLineCharCode(r,s-2);if(ui(c))return new Ue(r,s-1)}return new Ue(r,s)}validatePosition(t){let n=1;return this._assertNotDisposed(),t instanceof Ue&&this._isValidPosition(t.lineNumber,t.column,n)?t:this._validatePosition(t.lineNumber,t.column,n)}_isValidRange(t,n){let o=t.startLineNumber,r=t.startColumn,s=t.endLineNumber,a=t.endColumn;if(!this._isValidPosition(o,r,0)||!this._isValidPosition(s,a,0))return!1;if(n===1){let l=r>1?this._buffer.getLineCharCode(o,r-2):0,c=a>1&&a<=this._buffer.getLineLength(s)?this._buffer.getLineCharCode(s,a-2):0,u=ui(l),p=ui(c);return!u&&!p}return!0}validateRange(t){let n=1;if(this._assertNotDisposed(),t instanceof te&&!(t instanceof Fr)&&this._isValidRange(t,n))return t;let o=this._validatePosition(t.startLineNumber,t.startColumn,0),r=this._validatePosition(t.endLineNumber,t.endColumn,0),s=o.lineNumber,a=o.column,l=r.lineNumber,c=r.column;if(n===1){let u=a>1?this._buffer.getLineCharCode(s,a-2):0,p=c>1&&c<=this._buffer.getLineLength(l)?this._buffer.getLineCharCode(l,c-2):0,h=ui(u),m=ui(p);return!h&&!m?new te(s,a,l,c):s===l&&a===c?new te(s,a-1,l,c-1):h&&m?new te(s,a-1,l,c+1):h?new te(s,a-1,l,c):new te(s,a,l,c+1)}return new te(s,a,l,c)}modifyPosition(t,n){this._assertNotDisposed();let o=this.getOffsetAt(t)+n;return this.getPositionAt(Math.min(this._buffer.getLength(),Math.max(0,o)))}getFullModelRange(){this._assertNotDisposed();let t=this.getLineCount();return new te(1,1,t,this.getLineMaxColumn(t))}findMatchesLineByLine(t,n,o,r){return this._buffer.findMatchesLineByLine(t,n,o,r)}findMatches(t,n,o,r,s,a,l=wF){this._assertNotDisposed();let c=null;n!==null&&(Array.isArray(n)||(n=[n]),n.every(h=>te.isIRange(h))&&(c=n.map(h=>this.validateRange(h)))),c===null&&(c=[this.getFullModelRange()]),c=c.sort((h,m)=>h.startLineNumber-m.startLineNumber||h.startColumn-m.startColumn);let u=[];u.push(c.reduce((h,m)=>te.areIntersecting(h,m)?h.plusRange(m):(u.push(h),m)));let p;if(!o&&t.indexOf(`
`)<0){let m=new Do(t,o,r,s).parseSearchRequest();if(!m)return[];p=v=>this.findMatchesLineByLine(v,m,a,l)}else p=h=>Ya.findMatches(this,new Do(t,o,r,s),h,a,l);return u.map(p).reduce((h,m)=>h.concat(m),[])}findNextMatch(t,n,o,r,s,a){this._assertNotDisposed();let l=this.validatePosition(n);if(!o&&t.indexOf(`
`)<0){let u=new Do(t,o,r,s).parseSearchRequest();if(!u)return null;let p=this.getLineCount(),h=new te(l.lineNumber,l.column,p,this.getLineMaxColumn(p)),m=this.findMatchesLineByLine(h,u,a,1);return Ya.findNextMatch(this,new Do(t,o,r,s),l,a),m.length>0||(h=new te(1,1,l.lineNumber,this.getLineMaxColumn(l.lineNumber)),m=this.findMatchesLineByLine(h,u,a,1),m.length>0)?m[0]:null}return Ya.findNextMatch(this,new Do(t,o,r,s),l,a)}findPreviousMatch(t,n,o,r,s,a){this._assertNotDisposed();let l=this.validatePosition(n);return Ya.findPreviousMatch(this,new Do(t,o,r,s),l,a)}pushStackElement(){this._commandManager.pushStackElement()}popStackElement(){this._commandManager.popStackElement()}pushEOL(t){if((this.getEOL()===`
`?0:1)!==t)try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEOL(t)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_validateEditOperation(t){return t instanceof gd?t:new gd(t.identifier||null,this.validateRange(t.range),t.text,t.forceMoveMarkers||!1,t.isAutoWhitespaceEdit||!1,t._isTracked||!1)}_validateEditOperations(t){let n=[];for(let o=0,r=t.length;o<r;o++)n[o]=this._validateEditOperation(t[o]);return n}pushEditOperations(t,n,o,r){try{return this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._pushEditOperations(t,this._validateEditOperations(n),o,r)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_pushEditOperations(t,n,o,r){if(this._options.trimAutoWhitespace&&this._trimAutoWhitespaceLines){let s=n.map(l=>({range:this.validateRange(l.range),text:l.text})),a=!0;if(t)for(let l=0,c=t.length;l<c;l++){let u=t[l],p=!1;for(let h=0,m=s.length;h<m;h++){let v=s[h].range,f=v.startLineNumber>u.endLineNumber,b=u.startLineNumber>v.endLineNumber;if(!f&&!b){p=!0;break}}if(!p){a=!1;break}}if(a)for(let l=0,c=this._trimAutoWhitespaceLines.length;l<c;l++){let u=this._trimAutoWhitespaceLines[l],p=this.getLineMaxColumn(u),h=!0;for(let m=0,v=s.length;m<v;m++){let f=s[m].range,b=s[m].text;if(!(u<f.startLineNumber||u>f.endLineNumber)&&!(u===f.startLineNumber&&f.startColumn===p&&f.isEmpty()&&b&&b.length>0&&b.charAt(0)===`
`)&&!(u===f.startLineNumber&&f.startColumn===1&&f.isEmpty()&&b&&b.length>0&&b.charAt(b.length-1)===`
`)){h=!1;break}}if(h){let m=new te(u,1,u,p);n.push(new gd(null,m,null,!1,!1,!1))}}this._trimAutoWhitespaceLines=null}return this._initialUndoRedoSnapshot===null&&(this._initialUndoRedoSnapshot=this._undoRedoService.createSnapshot(this.uri)),this._commandManager.pushEditOperation(t,n,o,r)}_applyUndo(t,n,o,r){let s=t.map(a=>{let l=this.getPositionAt(a.newPosition),c=this.getPositionAt(a.newEnd);return{range:new te(l.lineNumber,l.column,c.lineNumber,c.column),text:a.oldText}});this._applyUndoRedoEdits(s,n,!0,!1,o,r)}_applyRedo(t,n,o,r){let s=t.map(a=>{let l=this.getPositionAt(a.oldPosition),c=this.getPositionAt(a.oldEnd);return{range:new te(l.lineNumber,l.column,c.lineNumber,c.column),text:a.newText}});this._applyUndoRedoEdits(s,n,!1,!0,o,r)}_applyUndoRedoEdits(t,n,o,r,s,a){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit(),this._isUndoing=o,this._isRedoing=r,this.applyEdits(t,!1),this.setEOL(n),this._overwriteAlternativeVersionId(s)}finally{this._isUndoing=!1,this._isRedoing=!1,this._eventEmitter.endDeferredEmit(a),this._onDidChangeDecorations.endDeferredEmit()}}applyEdits(t,n=!1){try{this._onDidChangeDecorations.beginDeferredEmit(),this._eventEmitter.beginDeferredEmit();let o=this._validateEditOperations(t);return this._doApplyEdits(o,n)}finally{this._eventEmitter.endDeferredEmit(),this._onDidChangeDecorations.endDeferredEmit()}}_doApplyEdits(t,n){let o=this._buffer.getLineCount(),r=this._buffer.applyEdits(t,this._options.trimAutoWhitespace,n),s=this._buffer.getLineCount(),a=r.changes;if(this._trimAutoWhitespaceLines=r.trimAutoWhitespaceLineNumbers,a.length!==0){for(let u=0,p=a.length;u<p;u++){let h=a[u];this._decorationsTree.acceptReplace(h.rangeOffset,h.rangeLength,h.text.length,h.forceMoveMarkers)}let l=[];this._increaseVersionId();let c=o;for(let u=0,p=a.length;u<p;u++){let h=a[u],[m]=ni(h.text);this._onDidChangeDecorations.fire();let v=h.range.startLineNumber,f=h.range.endLineNumber,b=f-v,E=m,T=Math.min(b,E),_=E-b,O=s-c-_+v,M=O,U=O+E,he=this._decorationsTree.getInjectedTextInInterval(this,this.getOffsetAt(new Ue(M,1)),this.getOffsetAt(new Ue(U,this.getLineMaxColumn(U))),0),Q=Gu.fromDecorations(he),se=new aa(Q);for(let ne=T;ne>=0;ne--){let V=v+ne,X=O+ne;se.takeFromEndWhile(Ze=>Ze.lineNumber>X);let Ce=se.takeFromEndWhile(Ze=>Ze.lineNumber===X);l.push(new qu(V,this.getLineContent(X),Ce))}if(T<b){let ne=v+T;l.push(new Tm(ne+1,f))}if(T<E){let ne=new aa(Q),V=v+T,X=E-T,Ce=s-c-X+V+1,Ze=[],oe=[];for(let $=0;$<X;$++){let de=Ce+$;oe[$]=this.getLineContent(de),ne.takeWhile(ie=>ie.lineNumber<de),Ze[$]=ne.takeWhile(ie=>ie.lineNumber===de)}l.push(new km(V+1,v+E,oe,Ze))}c+=_}this._emitContentChangedEvent(new Ua(l,this.getVersionId(),this._isUndoing,this._isRedoing),{changes:a,eol:this._buffer.getEOL(),isEolChange:!1,versionId:this.getVersionId(),isUndoing:this._isUndoing,isRedoing:this._isRedoing,isFlush:!1})}return r.reverseEdits===null?void 0:r.reverseEdits}undo(){return this._undoRedoService.undo(this.uri)}canUndo(){return this._undoRedoService.canUndo(this.uri)}redo(){return this._undoRedoService.redo(this.uri)}canRedo(){return this._undoRedoService.canRedo(this.uri)}handleBeforeFireDecorationsChangedEvent(t){if(t===null||t.size===0)return;let o=Array.from(t).map(r=>new qu(r,this.getLineContent(r),this._getInjectedTextInLine(r)));this._onDidChangeInjectedText.fire(new _m(o))}changeDecorations(t,n=0){this._assertNotDisposed();try{return this._onDidChangeDecorations.beginDeferredEmit(),this._changeDecorations(n,t)}finally{this._onDidChangeDecorations.endDeferredEmit()}}_changeDecorations(t,n){let o={addDecoration:(s,a)=>this._deltaDecorationsImpl(t,[],[{range:s,options:a}])[0],changeDecoration:(s,a)=>{this._changeDecorationImpl(s,a)},changeDecorationOptions:(s,a)=>{this._changeDecorationOptionsImpl(s,C_(a))},removeDecoration:s=>{this._deltaDecorationsImpl(t,[s],[])},deltaDecorations:(s,a)=>s.length===0&&a.length===0?[]:this._deltaDecorationsImpl(t,s,a)},r=null;try{r=n(o)}catch(s){Ne(s)}return o.addDecoration=fp,o.changeDecoration=fp,o.changeDecorationOptions=fp,o.removeDecoration=fp,o.deltaDecorations=fp,r}deltaDecorations(t,n,o=0){if(this._assertNotDisposed(),t||(t=[]),t.length===0&&n.length===0)return[];try{return this._deltaDecorationCallCnt++,this._deltaDecorationCallCnt>1&&(console.warn("Invoking deltaDecorations recursively could lead to leaking decorations."),Ne(new Error("Invoking deltaDecorations recursively could lead to leaking decorations."))),this._onDidChangeDecorations.beginDeferredEmit(),this._deltaDecorationsImpl(o,t,n)}finally{this._onDidChangeDecorations.endDeferredEmit(),this._deltaDecorationCallCnt--}}_getTrackedRange(t){return this.getDecorationRange(t)}_setTrackedRange(t,n,o){let r=t?this._decorations[t]:null;if(!r)return n?this._deltaDecorationsImpl(0,[],[{range:n,options:E_[o]}],!0)[0]:null;if(!n)return this._decorationsTree.delete(r),delete this._decorations[r.id],null;let s=this._validateRangeRelaxedNoAllocations(n),a=this._buffer.getOffsetAt(s.startLineNumber,s.startColumn),l=this._buffer.getOffsetAt(s.endLineNumber,s.endColumn);return this._decorationsTree.delete(r),r.reset(this.getVersionId(),a,l,s),r.setOptions(E_[o]),this._decorationsTree.insert(r),r.id}removeAllDecorationsWithOwnerId(t){if(this._isDisposed)return;let n=this._decorationsTree.collectNodesFromOwner(t);for(let o=0,r=n.length;o<r;o++){let s=n[o];this._decorationsTree.delete(s),delete this._decorations[s.id]}}getDecorationOptions(t){let n=this._decorations[t];return n?n.options:null}getDecorationRange(t){let n=this._decorations[t];return n?this._decorationsTree.getNodeRange(this,n):null}getLineDecorations(t,n=0,o=!1){return t<1||t>this.getLineCount()?[]:this.getLinesDecorations(t,t,n,o)}getLinesDecorations(t,n,o=0,r=!1,s=!1){let a=this.getLineCount(),l=Math.min(a,Math.max(1,t)),c=Math.min(a,Math.max(1,n)),u=this.getLineMaxColumn(c),p=new te(l,1,c,u),h=this._getDecorationsInRange(p,o,r,s);return Kb(h,this._decorationProvider.getDecorationsInRange(p,o,r)),h}getDecorationsInRange(t,n=0,o=!1,r=!1,s=!1){let a=this.validateRange(t),l=this._getDecorationsInRange(a,n,o,s);return Kb(l,this._decorationProvider.getDecorationsInRange(a,n,o,r)),l}getOverviewRulerDecorations(t=0,n=!1){return this._decorationsTree.getAll(this,t,n,!0,!1)}getInjectedTextDecorations(t=0){return this._decorationsTree.getAllInjectedText(this,t)}_getInjectedTextInLine(t){let n=this._buffer.getOffsetAt(t,1),o=n+this._buffer.getLineLength(t),r=this._decorationsTree.getInjectedTextInInterval(this,n,o,0);return Gu.fromDecorations(r).filter(s=>s.lineNumber===t)}getAllDecorations(t=0,n=!1){let o=this._decorationsTree.getAll(this,t,n,!1,!1);return o=o.concat(this._decorationProvider.getAllDecorations(t,n)),o}getAllMarginDecorations(t=0){return this._decorationsTree.getAll(this,t,!1,!1,!0)}_getDecorationsInRange(t,n,o,r){let s=this._buffer.getOffsetAt(t.startLineNumber,t.startColumn),a=this._buffer.getOffsetAt(t.endLineNumber,t.endColumn);return this._decorationsTree.getAllInInterval(this,s,a,n,o,r)}getRangeAt(t,n){return this._buffer.getRangeAt(t,n-t)}_changeDecorationImpl(t,n){let o=this._decorations[t];if(!o)return;if(o.options.after){let l=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.endLineNumber)}if(o.options.before){let l=this.getDecorationRange(t);this._onDidChangeDecorations.recordLineAffectedByInjectedText(l.startLineNumber)}let r=this._validateRangeRelaxedNoAllocations(n),s=this._buffer.getOffsetAt(r.startLineNumber,r.startColumn),a=this._buffer.getOffsetAt(r.endLineNumber,r.endColumn);this._decorationsTree.delete(o),o.reset(this.getVersionId(),s,a,r),this._decorationsTree.insert(o),this._onDidChangeDecorations.checkAffectedAndFire(o.options),o.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.endLineNumber),o.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(r.startLineNumber)}_changeDecorationOptionsImpl(t,n){let o=this._decorations[t];if(!o)return;let r=!!(o.options.overviewRuler&&o.options.overviewRuler.color),s=!!(n.overviewRuler&&n.overviewRuler.color);if(this._onDidChangeDecorations.checkAffectedAndFire(o.options),this._onDidChangeDecorations.checkAffectedAndFire(n),o.options.after||n.after){let c=this._decorationsTree.getNodeRange(this,o);this._onDidChangeDecorations.recordLineAffectedByInjectedText(c.endLineNumber)}if(o.options.before||n.before){let c=this._decorationsTree.getNodeRange(this,o);this._onDidChangeDecorations.recordLineAffectedByInjectedText(c.startLineNumber)}let a=r!==s,l=DF(n)!==Mf(o);a||l?(this._decorationsTree.delete(o),o.setOptions(n),this._decorationsTree.insert(o)):o.setOptions(n)}_deltaDecorationsImpl(t,n,o,r=!1){let s=this.getVersionId(),a=n.length,l=0,c=o.length,u=0;this._onDidChangeDecorations.beginDeferredEmit();try{let p=new Array(c);for(;l<a||u<c;){let h=null;if(l<a){do h=this._decorations[n[l++]];while(!h&&l<a);if(h){if(h.options.after){let m=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(m.endLineNumber)}if(h.options.before){let m=this._decorationsTree.getNodeRange(this,h);this._onDidChangeDecorations.recordLineAffectedByInjectedText(m.startLineNumber)}this._decorationsTree.delete(h),r||this._onDidChangeDecorations.checkAffectedAndFire(h.options)}}if(u<c){if(!h){let T=++this._lastDecorationId,_=`${this._instanceId};${T}`;h=new dp(_,0,0),this._decorations[_]=h}let m=o[u],v=this._validateRangeRelaxedNoAllocations(m.range),f=C_(m.options),b=this._buffer.getOffsetAt(v.startLineNumber,v.startColumn),E=this._buffer.getOffsetAt(v.endLineNumber,v.endColumn);h.ownerId=t,h.reset(s,b,E,v),h.setOptions(f),h.options.after&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(v.endLineNumber),h.options.before&&this._onDidChangeDecorations.recordLineAffectedByInjectedText(v.startLineNumber),r||this._onDidChangeDecorations.checkAffectedAndFire(f),this._decorationsTree.insert(h),p[u]=h.id,u++}else h&&delete this._decorations[h.id]}return p}finally{this._onDidChangeDecorations.endDeferredEmit()}}getLanguageId(){return this.tokenization.getLanguageId()}setLanguage(t,n){typeof t=="string"?(this._languageSelectionListener.clear(),this._setLanguage(t,n)):(this._languageSelectionListener.value=t.onDidChange(()=>this._setLanguage(t.languageId,n)),this._setLanguage(t.languageId,n))}_setLanguage(t,n){this.tokenization.setLanguageId(t,n),this._languageService.requestRichLanguageFeatures(t)}getLanguageIdAtPosition(t,n){return this.tokenization.getLanguageIdAtPosition(t,n)}getWordAtPosition(t){return this._tokenizationTextModelPart.getWordAtPosition(t)}getWordUntilPosition(t){return this._tokenizationTextModelPart.getWordUntilPosition(t)}normalizePosition(t,n){return t}getLineIndentColumn(t){return kF(this.getLineContent(t))+1}};Bi=L([w(4,Pm),w(5,Pt),w(6,Fu),w(7,Vt)],Bi);function kF(i){let e=0;for(let t of i)if(t===" "||t==="	")e++;else break;return e}function eE(i){return!!(i.options.overviewRuler&&i.options.overviewRuler.color)}function DF(i){return!!i.after||!!i.before}function Mf(i){return!!i.options.after||!!i.options.before}var Nf=class{_decorationsTree0;_decorationsTree1;_injectedTextDecorationsTree;constructor(){this._decorationsTree0=new Vd,this._decorationsTree1=new Vd,this._injectedTextDecorationsTree=new Vd}ensureAllNodesHaveRanges(e){this.getAll(e,0,!1,!1,!1)}_ensureNodesHaveRanges(e,t){for(let n of t)n.range===null&&(n.range=e.getRangeAt(n.cachedAbsoluteStart,n.cachedAbsoluteEnd));return t}getAllInInterval(e,t,n,o,r,s){let a=e.getVersionId(),l=this._intervalSearch(t,n,o,r,a,s);return this._ensureNodesHaveRanges(e,l)}_intervalSearch(e,t,n,o,r,s){let a=this._decorationsTree0.intervalSearch(e,t,n,o,r,s),l=this._decorationsTree1.intervalSearch(e,t,n,o,r,s),c=this._injectedTextDecorationsTree.intervalSearch(e,t,n,o,r,s);return a.concat(l).concat(c)}getInjectedTextInInterval(e,t,n,o){let r=e.getVersionId(),s=this._injectedTextDecorationsTree.intervalSearch(t,n,o,!1,r,!1);return this._ensureNodesHaveRanges(e,s).filter(a=>a.options.showIfCollapsed||!a.range.isEmpty())}getAllInjectedText(e,t){let n=e.getVersionId(),o=this._injectedTextDecorationsTree.search(t,!1,n,!1);return this._ensureNodesHaveRanges(e,o).filter(r=>r.options.showIfCollapsed||!r.range.isEmpty())}getAll(e,t,n,o,r){let s=e.getVersionId(),a=this._search(t,n,o,s,r);return this._ensureNodesHaveRanges(e,a)}_search(e,t,n,o,r){if(n)return this._decorationsTree1.search(e,t,o,r);{let s=this._decorationsTree0.search(e,t,o,r),a=this._decorationsTree1.search(e,t,o,r),l=this._injectedTextDecorationsTree.search(e,t,o,r);return s.concat(a).concat(l)}}collectNodesFromOwner(e){let t=this._decorationsTree0.collectNodesFromOwner(e),n=this._decorationsTree1.collectNodesFromOwner(e),o=this._injectedTextDecorationsTree.collectNodesFromOwner(e);return t.concat(n).concat(o)}collectNodesPostOrder(){let e=this._decorationsTree0.collectNodesPostOrder(),t=this._decorationsTree1.collectNodesPostOrder(),n=this._injectedTextDecorationsTree.collectNodesPostOrder();return e.concat(t).concat(n)}insert(e){Mf(e)?this._injectedTextDecorationsTree.insert(e):eE(e)?this._decorationsTree1.insert(e):this._decorationsTree0.insert(e)}delete(e){Mf(e)?this._injectedTextDecorationsTree.delete(e):eE(e)?this._decorationsTree1.delete(e):this._decorationsTree0.delete(e)}getNodeRange(e,t){let n=e.getVersionId();return t.cachedVersionId!==n&&this._resolveNode(t,n),t.range===null&&(t.range=e.getRangeAt(t.cachedAbsoluteStart,t.cachedAbsoluteEnd)),t.range}_resolveNode(e,t){Mf(e)?this._injectedTextDecorationsTree.resolveNode(e,t):eE(e)?this._decorationsTree1.resolveNode(e,t):this._decorationsTree0.resolveNode(e,t)}acceptReplace(e,t,n,o){this._decorationsTree0.acceptReplace(e,t,n,o),this._decorationsTree1.acceptReplace(e,t,n,o),this._injectedTextDecorationsTree.acceptReplace(e,t,n,o)}};function lr(i){return i.replace(/[^a-z0-9\-_]/gi," ")}var Ff=class{color;darkColor;constructor(e){this.color=e.color||"",this.darkColor=e.darkColor||""}},nE=class extends Ff{position;_resolvedColor;constructor(e){super(e),this._resolvedColor=null,this.position=typeof e.position=="number"?e.position:2}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=null}_resolveColor(e,t){if(typeof e=="string")return e;let n=e?t.getColor(e.id):null;return n?n.toString():""}},iE=class{position;persistLane;constructor(e){this.position=e?.position??2,this.persistLane=e?.persistLane}},oE=class extends Ff{position;sectionHeaderStyle;sectionHeaderText;_resolvedColor;constructor(e){super(e),this.position=e.position,this.sectionHeaderStyle=e.sectionHeaderStyle??null,this.sectionHeaderText=e.sectionHeaderText??null}getColor(e){return this._resolvedColor||(e.type!=="light"&&this.darkColor?this._resolvedColor=this._resolveColor(this.darkColor,e):this._resolvedColor=this._resolveColor(this.color,e)),this._resolvedColor}invalidateCachedColor(){this._resolvedColor=void 0}_resolveColor(e,t){return typeof e=="string"?B.fromHex(e):t.getColor(e.id)}},Bf=class i{static from(e){return e instanceof i?e:new i(e)}content;tokens;inlineClassName;inlineClassNameAffectsLetterSpacing;attachedData;cursorStops;constructor(e){this.content=e.content||"",this.tokens=e.tokens??null,this.inlineClassName=e.inlineClassName||null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.attachedData=e.attachedData||null,this.cursorStops=e.cursorStops||null}},dr=class i{static EMPTY;static register(e){return new i(e)}static createDynamic(e){return new i(e)}description;blockClassName;blockIsAfterEnd;blockDoesNotCollapse;blockPadding;stickiness;zIndex;className;shouldFillLineOnLineBreak;hoverMessage;glyphMarginHoverMessage;isWholeLine;showIfCollapsed;collapseOnReplaceEdit;overviewRuler;minimap;glyphMargin;glyphMarginClassName;linesDecorationsClassName;lineNumberClassName;lineNumberHoverMessage;linesDecorationsTooltip;firstLineDecorationClassName;marginClassName;inlineClassName;inlineClassNameAffectsLetterSpacing;beforeContentClassName;afterContentClassName;after;before;hideInCommentTokens;hideInStringTokens;constructor(e){this.description=e.description,this.blockClassName=e.blockClassName?lr(e.blockClassName):null,this.blockDoesNotCollapse=e.blockDoesNotCollapse??null,this.blockIsAfterEnd=e.blockIsAfterEnd??null,this.blockPadding=e.blockPadding??null,this.stickiness=e.stickiness||0,this.zIndex=e.zIndex||0,this.className=e.className?lr(e.className):null,this.shouldFillLineOnLineBreak=e.shouldFillLineOnLineBreak??null,this.hoverMessage=e.hoverMessage||null,this.glyphMarginHoverMessage=e.glyphMarginHoverMessage||null,this.lineNumberHoverMessage=e.lineNumberHoverMessage||null,this.isWholeLine=e.isWholeLine||!1,this.showIfCollapsed=e.showIfCollapsed||!1,this.collapseOnReplaceEdit=e.collapseOnReplaceEdit||!1,this.overviewRuler=e.overviewRuler?new nE(e.overviewRuler):null,this.minimap=e.minimap?new oE(e.minimap):null,this.glyphMargin=e.glyphMarginClassName?new iE(e.glyphMargin):null,this.glyphMarginClassName=e.glyphMarginClassName?lr(e.glyphMarginClassName):null,this.linesDecorationsClassName=e.linesDecorationsClassName?lr(e.linesDecorationsClassName):null,this.lineNumberClassName=e.lineNumberClassName?lr(e.lineNumberClassName):null,this.linesDecorationsTooltip=e.linesDecorationsTooltip?Nw(e.linesDecorationsTooltip):null,this.firstLineDecorationClassName=e.firstLineDecorationClassName?lr(e.firstLineDecorationClassName):null,this.marginClassName=e.marginClassName?lr(e.marginClassName):null,this.inlineClassName=e.inlineClassName?lr(e.inlineClassName):null,this.inlineClassNameAffectsLetterSpacing=e.inlineClassNameAffectsLetterSpacing||!1,this.beforeContentClassName=e.beforeContentClassName?lr(e.beforeContentClassName):null,this.afterContentClassName=e.afterContentClassName?lr(e.afterContentClassName):null,this.after=e.after?Bf.from(e.after):null,this.before=e.before?Bf.from(e.before):null,this.hideInCommentTokens=e.hideInCommentTokens??!1,this.hideInStringTokens=e.hideInStringTokens??!1}};dr.EMPTY=dr.register({description:"empty"});var E_=[dr.register({description:"tracked-range-always-grows-when-typing-at-edges",stickiness:0}),dr.register({description:"tracked-range-never-grows-when-typing-at-edges",stickiness:1}),dr.register({description:"tracked-range-grows-only-when-typing-before",stickiness:2}),dr.register({description:"tracked-range-grows-only-when-typing-after",stickiness:3})];function C_(i){return i instanceof dr?i:dr.createDynamic(i)}var rE=class extends A{constructor(t){super();this.handleBeforeFire=t;this._deferredCnt=0,this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._affectsLineNumber=!1}_actual=this._register(new C);event=this._actual.event;_deferredCnt;_shouldFireDeferred;_affectsMinimap;_affectsOverviewRuler;_affectedInjectedTextLines=null;_affectsGlyphMargin;_affectsLineNumber;hasListeners(){return this._actual.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(){this._deferredCnt--,this._deferredCnt===0&&(this._shouldFireDeferred&&this.doFire(),this._affectedInjectedTextLines?.clear(),this._affectedInjectedTextLines=null)}recordLineAffectedByInjectedText(t){this._affectedInjectedTextLines||(this._affectedInjectedTextLines=new Set),this._affectedInjectedTextLines.add(t)}checkAffectedAndFire(t){this._affectsMinimap||=!!t.minimap?.position,this._affectsOverviewRuler||=!!t.overviewRuler?.color,this._affectsGlyphMargin||=!!t.glyphMarginClassName,this._affectsLineNumber||=!!t.lineNumberClassName,this.tryFire()}fire(){this._affectsMinimap=!0,this._affectsOverviewRuler=!0,this._affectsGlyphMargin=!0,this.tryFire()}tryFire(){this._deferredCnt===0?this.doFire():this._shouldFireDeferred=!0}doFire(){this.handleBeforeFire(this._affectedInjectedTextLines);let t={affectsMinimap:this._affectsMinimap,affectsOverviewRuler:this._affectsOverviewRuler,affectsGlyphMargin:this._affectsGlyphMargin,affectsLineNumber:this._affectsLineNumber};this._shouldFireDeferred=!1,this._affectsMinimap=!1,this._affectsOverviewRuler=!1,this._affectsGlyphMargin=!1,this._actual.fire(t)}},sE=class extends A{_fastEmitter=this._register(new C);fastEvent=this._fastEmitter.event;_slowEmitter=this._register(new C);slowEvent=this._slowEmitter.event;_deferredCnt;_deferredEvent;constructor(){super(),this._deferredCnt=0,this._deferredEvent=null}hasListeners(){return this._fastEmitter.hasListeners()||this._slowEmitter.hasListeners()}beginDeferredEmit(){this._deferredCnt++}endDeferredEmit(e=null){if(this._deferredCnt--,this._deferredCnt===0&&this._deferredEvent!==null){this._deferredEvent.rawContentChangedEvent.resultingSelection=e;let t=this._deferredEvent;this._deferredEvent=null,this._fastEmitter.fire(t),this._slowEmitter.fire(t)}}fire(e){if(this._deferredCnt>0){this._deferredEvent?this._deferredEvent=this._deferredEvent.merge(e):this._deferredEvent=e;return}this._fastEmitter.fire(e),this._slowEmitter.fire(e)}};var Xa=P("workingCopyService"),lE=class extends A{_onDidRegister=this._register(new C);onDidRegister=this._onDidRegister.event;_onDidUnregister=this._register(new C);onDidUnregister=this._onDidUnregister.event;_onDidChangeDirty=this._register(new C);onDidChangeDirty=this._onDidChangeDirty.event;_onDidChangeContent=this._register(new C);onDidChangeContent=this._onDidChangeContent.event;_onDidSave=this._register(new C);onDidSave=this._onDidSave.event;get workingCopies(){return Array.from(this._workingCopies.values())}_workingCopies=new Set;mapResourceToWorkingCopies=new bt;mapWorkingCopyToListeners=this._register(new Fo);registerWorkingCopy(e){let t=this.mapResourceToWorkingCopies.get(e.resource);if(t?.has(e.typeId))throw new Error(`Cannot register more than one working copy with the same resource ${e.resource.toString()} and type ${e.typeId}.`);this._workingCopies.add(e),t||(t=new Map,this.mapResourceToWorkingCopies.set(e.resource,t)),t.set(e.typeId,e);let n=new re;return n.add(e.onDidChangeContent(()=>this._onDidChangeContent.fire(e))),n.add(e.onDidChangeDirty(()=>this._onDidChangeDirty.fire(e))),n.add(e.onDidSave(o=>this._onDidSave.fire({workingCopy:e,...o}))),this.mapWorkingCopyToListeners.set(e,n),this._onDidRegister.fire(e),e.isDirty()&&this._onDidChangeDirty.fire(e),le(()=>{this.unregisterWorkingCopy(e),this._onDidUnregister.fire(e)})}unregisterWorkingCopy(e){this._workingCopies.delete(e);let t=this.mapResourceToWorkingCopies.get(e.resource);t?.delete(e.typeId)&&t.size===0&&this.mapResourceToWorkingCopies.delete(e.resource),e.isDirty()&&this._onDidChangeDirty.fire(e),this.mapWorkingCopyToListeners.deleteAndDispose(e)}has(e){return N.isUri(e)?this.mapResourceToWorkingCopies.has(e):this.mapResourceToWorkingCopies.get(e.resource)?.has(e.typeId)??!1}get(e){return this.mapResourceToWorkingCopies.get(e.resource)?.get(e.typeId)}getAll(e){let t=this.mapResourceToWorkingCopies.get(e);if(t)return Array.from(t.values())}get hasDirty(){for(let e of this._workingCopies)if(e.isDirty())return!0;return!1}get dirtyCount(){let e=0;for(let t of this._workingCopies)t.isDirty()&&e++;return e}get dirtyWorkingCopies(){return this.workingCopies.filter(e=>e.isDirty())}get modifiedCount(){let e=0;for(let t of this._workingCopies)t.isModified()&&e++;return e}get modifiedWorkingCopies(){return this.workingCopies.filter(e=>e.isModified())}isDirty(e,t){let n=this.mapResourceToWorkingCopies.get(e);if(n){if(typeof t=="string")return n.get(t)?.isDirty()??!1;for(let[,o]of n)if(o.isDirty())return!0}return!1}};zt(Xa,lE,1);var Ei=class extends _o{constructor(t,n,o,r,s){super();this.preferredName=t;this.preferredDescription=n;this.secondary=o;this.primary=r;this.editorService=s;this.registerListeners()}static ID="workbench.editorinputs.sidebysideEditorInput";get typeId(){return Ei.ID}get capabilities(){let t=this.primary.capabilities;return t&=-33,this.secondary.hasCapability(16)&&(t|=16),this.secondary.hasCapability(8)&&(t|=8),t|=256,t}get resource(){if(this.hasIdenticalSides)return this.primary.resource}hasIdenticalSides=this.primary.matches(this.secondary);registerListeners(){this._register(ee.once(ee.any(this.primary.onWillDispose,this.secondary.onWillDispose))(()=>{this.isDisposed()||this.dispose()})),this._register(this.primary.onDidChangeDirty(()=>this._onDidChangeDirty.fire())),this._register(this.primary.onDidChangeCapabilities(()=>this._onDidChangeCapabilities.fire())),this._register(this.secondary.onDidChangeCapabilities(()=>this._onDidChangeCapabilities.fire())),this._register(this.primary.onDidChangeLabel(()=>this._onDidChangeLabel.fire())),this._register(this.secondary.onDidChangeLabel(()=>this._onDidChangeLabel.fire()))}getName(){let t=this.getPreferredName();return t||(this.hasIdenticalSides?this.primary.getName():d("sideBySideLabels","{0} - {1}",this.secondary.getName(),this.primary.getName()))}getPreferredName(){return this.preferredName}getDescription(t){let n=this.getPreferredDescription();return n||(this.hasIdenticalSides?this.primary.getDescription(t):super.getDescription(t))}getPreferredDescription(){return this.preferredDescription}getTitle(t){let n;this.hasIdenticalSides?n=this.primary.getTitle(t)??this.getName():n=super.getTitle(t);let o=this.getPreferredTitle();return o&&(n=`${o} (${n})`),n}getPreferredTitle(){if(this.preferredName&&this.preferredDescription)return`${this.preferredName} ${this.preferredDescription}`;if(this.preferredName||this.preferredDescription)return this.preferredName??this.preferredDescription}getLabelExtraClasses(){return this.hasIdenticalSides?this.primary.getLabelExtraClasses():super.getLabelExtraClasses()}getAriaLabel(){return this.hasIdenticalSides?this.primary.getAriaLabel():super.getAriaLabel()}getTelemetryDescriptor(){return{...this.primary.getTelemetryDescriptor(),...super.getTelemetryDescriptor()}}isDirty(){return this.primary.isDirty()}isSaving(){return this.primary.isSaving()}async save(t,n){let o=await this.primary.save(t,n);return this.saveResultToEditor(o)}async saveAs(t,n){let o=await this.primary.saveAs(t,n);return this.saveResultToEditor(o)}saveResultToEditor(t){if(!t||!this.hasIdenticalSides)return t;if(this.primary.matches(t))return this;if(t instanceof _o)return new Ei(this.preferredName,this.preferredDescription,t,t,this.editorService);if(!Gr(t)&&!qd(t)&&!Js(t)&&!Zs(t))return{primary:t,secondary:t,label:this.preferredName,description:this.preferredDescription}}revert(t,n){return this.primary.revert(t,n)}async rename(t,n){if(!this.hasIdenticalSides)return;let o=await this.primary.rename(t,n);if(o){if(wn(o.editor))return{editor:new Ei(this.preferredName,this.preferredDescription,o.editor,o.editor,this.editorService),options:{...o.options,viewState:Wf(this,t,this.editorService)}};if(T_(o.editor))return{editor:{label:this.preferredName,description:this.preferredDescription,primary:o.editor,secondary:o.editor,options:{...o.options,viewState:Wf(this,t,this.editorService)}}}}}isReadonly(){return this.primary.isReadonly()}toUntyped(t){let n=this.primary.toUntyped(t),o=this.secondary.toUntyped(t);if(n&&o&&!Gr(n)&&!Gr(o)&&!qd(n)&&!qd(o)&&!Js(n)&&!Js(o)&&!Zs(n)&&!Zs(o)){let r={label:this.preferredName,description:this.preferredDescription,primary:n,secondary:o};return typeof t?.preserveViewState=="number"&&(r.options={viewState:Wf(this,t.preserveViewState,this.editorService)}),r}}matches(t){return this===t?!0:dE(t)||Gr(t)?!1:t instanceof Ei?this.primary.matches(t.primary)&&this.secondary.matches(t.secondary):Js(t)?this.primary.matches(t.primary)&&this.secondary.matches(t.secondary):!1}};Ei=L([w(4,Ci)],Ei);var cE={LEFT:"left",RIGHT:"right",FIRST:"first",LAST:"last"};function LF(i){let e=i;return!!(e&&typeof e=="object"&&Array.isArray(e.editors)&&Array.isArray(e.mru))}var cr=class extends A{constructor(t,n,o){super();this.instantiationService=n;this.configurationService=o;LF(t)?this._id=this.deserialize(t):this._id=cr.IDS++,this.onConfigurationUpdated(),this.registerListeners()}static IDS=0;_onDidModelChange=this._register(new C({leakWarningThreshold:500}));onDidModelChange=this._onDidModelChange.event;_id;get id(){return this._id}editors=[];mru=[];editorListeners=new Set;locked=!1;selection=[];get active(){return this.selection[0]??null}preview=null;sticky=-1;transient=new Set;editorOpenPositioning;focusRecentEditorAfterClose;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>this.onConfigurationUpdated(t)))}onConfigurationUpdated(t){t&&!t.affectsConfiguration("workbench.editor.openPositioning")&&!t.affectsConfiguration("workbench.editor.focusRecentEditorAfterClose")||(this.editorOpenPositioning=this.configurationService.getValue("workbench.editor.openPositioning"),this.focusRecentEditorAfterClose=this.configurationService.getValue("workbench.editor.focusRecentEditorAfterClose"))}get count(){return this.editors.length}get stickyCount(){return this.sticky+1}getEditors(t,n){let o=t===0?this.mru.slice(0):this.editors.slice(0);return n?.excludeSticky?t===0?o.filter(r=>!this.isSticky(r)):o.slice(this.sticky+1):o}getEditorByIndex(t){return this.editors[t]}get activeEditor(){return this.active}isActive(t){return this.matches(this.active,t)}get previewEditor(){return this.preview}openEditor(t,n){let o=n?.sticky||typeof n?.index=="number"&&this.isSticky(n.index),r=n?.pinned||n?.sticky,s=!!n?.transient,a=n?.active||!this.activeEditor||!r&&this.preview===this.activeEditor,l=this.findEditor(t,n);if(l){let[c,u]=l;return this.doSetTransient(c,u,s===!1?!1:this.isTransient(c)),r&&this.doPin(c,u),this.setSelection(a?c:this.activeEditor,n?.inactiveSelection??[]),n&&typeof n.index=="number"&&this.moveEditor(c,n.index),o&&this.doStick(c,this.indexOf(c)),{editor:c,isNew:!1}}else{let c=t,u=this.indexOf(this.active),p;if(n&&typeof n.index=="number"?p=n.index:this.editorOpenPositioning===cE.FIRST?(p=0,!o&&this.isSticky(p)&&(p=this.sticky+1)):this.editorOpenPositioning===cE.LAST?p=this.editors.length:(this.editorOpenPositioning===cE.LEFT?u===0||!this.editors.length?p=0:p=u:p=u+1,!o&&this.isSticky(p)&&(p=this.sticky+1)),o&&(this.sticky++,this.isSticky(p)||(p=this.sticky)),(r||!this.preview)&&this.splice(p,!1,c),s&&this.doSetTransient(c,p,!0),!r){if(this.preview){let m=this.indexOf(this.preview);p>m&&p--,this.replaceEditor(this.preview,c,p,!a)}this.preview=c}this.registerEditorListeners(c);let h={kind:5,editor:c,editorIndex:p};return this._onDidModelChange.fire(h),this.setSelection(a?c:this.activeEditor,n?.inactiveSelection??[]),{editor:c,isNew:!0}}}registerEditorListeners(t){let n=new re;this.editorListeners.add(n),n.add(ee.once(t.onWillDispose)(()=>{let o=this.editors.indexOf(t);if(o>=0){let r={kind:15,editor:t,editorIndex:o};this._onDidModelChange.fire(r)}})),n.add(t.onDidChangeDirty(()=>{let o={kind:14,editor:t,editorIndex:this.editors.indexOf(t)};this._onDidModelChange.fire(o)})),n.add(t.onDidChangeLabel(()=>{let o={kind:9,editor:t,editorIndex:this.editors.indexOf(t)};this._onDidModelChange.fire(o)})),n.add(t.onDidChangeCapabilities(()=>{let o={kind:10,editor:t,editorIndex:this.editors.indexOf(t)};this._onDidModelChange.fire(o)})),n.add(this.onDidModelChange(o=>{o.kind===6&&o.editor?.matches(t)&&(ft(n),this.editorListeners.delete(n))}))}replaceEditor(t,n,o,r=!0){let s=this.doCloseEditor(t,1,r);if(this.splice(o,!1,n),s){let a={kind:6,...s};this._onDidModelChange.fire(a)}}closeEditor(t,n=0,o=!0){let r=this.doCloseEditor(t,n,o);if(r){let s={kind:6,...r};return this._onDidModelChange.fire(s),r}}doCloseEditor(t,n,o){let r=this.indexOf(t);if(r===-1)return;let s=this.editors[r],a=this.isSticky(r),l=this.active===s;if(o&&l)if(this.mru.length>1){let c;this.focusRecentEditorAfterClose?c=this.mru[1]:r===this.editors.length-1?c=this.editors[r-1]:c=this.editors[r+1];let u=this.selection.filter(p=>p!==s&&p!==c);this.doSetSelection(c,this.editors.indexOf(c),u)}else this.doSetSelection(null,void 0,[]);else if(!l&&this.doIsSelected(s)){let c=this.selection.filter(u=>u!==s&&u!==this.activeEditor);this.doSetSelection(this.activeEditor,this.indexOf(this.activeEditor),c)}return this.preview===s&&(this.preview=null),this.transient.delete(s),this.splice(r,!0),{editor:s,sticky:a,editorIndex:r,context:n}}moveEditor(t,n){n>=this.editors.length?n=this.editors.length-1:n<0&&(n=0);let o=this.indexOf(t);if(o<0||n===o)return;let r=this.editors[o],s=this.sticky;this.isSticky(o)&&n>this.sticky?this.sticky--:!this.isSticky(o)&&n<=this.sticky&&this.sticky++,this.editors.splice(o,1),this.editors.splice(n,0,r);let a={kind:7,editor:r,oldEditorIndex:o,editorIndex:n};if(this._onDidModelChange.fire(a),s!==this.sticky){let l={kind:13,editor:r,editorIndex:n};this._onDidModelChange.fire(l)}return r}setActive(t){let n;return t?n=this.setEditorActive(t):this.setGroupActive(),n}setGroupActive(){this._onDidModelChange.fire({kind:0})}setEditorActive(t){let n=this.findEditor(t);if(!n)return;let[o,r]=n;return this.doSetSelection(o,r,[]),o}get selectedEditors(){return this.editors.filter(t=>this.doIsSelected(t))}isSelected(t){let n;return typeof t=="number"?n=this.editors[t]:n=this.findEditor(t)?.[0],!!n&&this.doIsSelected(n)}doIsSelected(t){return this.selection.includes(t)}setSelection(t,n){let o=this.findEditor(t);if(!o)return;let[r,s]=o,a=new Set;for(let l of n){let c=this.findEditor(l);if(!c)return;let[u]=c;u!==r&&a.add(u)}this.doSetSelection(r,s,Array.from(a))}doSetSelection(t,n,o){let r=this.activeEditor,s=this.selection,a;t?a=[t,...o]:a=[],this.selection=a;let l=t&&typeof n=="number"&&r!==t;if(l){let c=this.indexOf(t,this.mru);this.mru.splice(c,1),this.mru.unshift(t);let u={kind:8,editor:t,editorIndex:n};this._onDidModelChange.fire(u)}if(l||s.length!==a.length||s.some(c=>!a.includes(c))){let c={kind:4};this._onDidModelChange.fire(c)}}setIndex(t){this._onDidModelChange.fire({kind:1})}setLabel(t){this._onDidModelChange.fire({kind:2})}pin(t){let n=this.findEditor(t);if(!n)return;let[o,r]=n;return this.doPin(o,r),o}doPin(t,n){if(this.isPinned(t))return;this.setTransient(t,!1),this.preview=null;let o={kind:11,editor:t,editorIndex:n};this._onDidModelChange.fire(o)}unpin(t){let n=this.findEditor(t);if(!n)return;let[o,r]=n;return this.doUnpin(o,r),o}doUnpin(t,n){if(!this.isPinned(t))return;let o=this.preview;this.preview=t;let r={kind:11,editor:t,editorIndex:n};this._onDidModelChange.fire(r),o&&this.closeEditor(o,3)}isPinned(t){let n;return typeof t=="number"?n=this.editors[t]:n=t,!this.matches(this.preview,n)}stick(t){let n=this.findEditor(t);if(!n)return;let[o,r]=n;return this.doStick(o,r),o}doStick(t,n){if(this.isSticky(n))return;this.pin(t);let o=this.sticky+1;this.moveEditor(t,o),this.sticky++;let r={kind:13,editor:t,editorIndex:o};this._onDidModelChange.fire(r)}unstick(t){let n=this.findEditor(t);if(!n)return;let[o,r]=n;return this.doUnstick(o,r),o}doUnstick(t,n){if(!this.isSticky(n))return;let o=this.sticky;this.moveEditor(t,o),this.sticky--;let r={kind:13,editor:t,editorIndex:o};this._onDidModelChange.fire(r)}isSticky(t){if(this.sticky<0)return!1;let n;return typeof t=="number"?n=t:n=this.indexOf(t),n<0?!1:n<=this.sticky}setTransient(t,n){if(!n&&this.transient.size===0)return;let o=this.findEditor(t);if(!o)return;let[r,s]=o;return this.doSetTransient(r,s,n),r}doSetTransient(t,n,o){if(o){if(this.transient.has(t))return;this.transient.add(t)}else{if(!this.transient.has(t))return;this.transient.delete(t)}let r={kind:12,editor:t,editorIndex:n};this._onDidModelChange.fire(r)}isTransient(t){if(this.transient.size===0)return!1;let n;return typeof t=="number"?n=this.editors[t]:n=this.findEditor(t)?.[0],!!n&&this.transient.has(n)}splice(t,n,o){let r=this.editors[t];if(n&&this.isSticky(t)&&this.sticky--,o?this.editors.splice(t,n?1:0,o):this.editors.splice(t,n?1:0),!n&&o)this.mru.length===0?this.mru.push(o):this.mru.splice(1,0,o);else{let s=this.indexOf(r,this.mru);n&&!o?this.mru.splice(s,1):n&&o&&this.mru.splice(s,1,o)}}indexOf(t,n=this.editors,o){let r=-1;if(!t)return r;for(let s=0;s<n.length;s++){let a=n[s];if(this.matches(a,t,o))if(o?.supportSideBySide&&a instanceof Ei&&!(t instanceof Ei))r=s;else{r=s;break}}return r}findEditor(t,n){let o=this.indexOf(t,this.editors,n);if(o!==-1)return[this.editors[o],o]}isFirst(t,n=this.editors){return this.matches(n[0],t)}isLast(t,n=this.editors){return this.matches(n[n.length-1],t)}contains(t,n){return this.indexOf(t,this.editors,n)!==-1}matches(t,n,o){if(!t||!n)return!1;if(o?.supportSideBySide&&t instanceof Ei&&!(n instanceof Ei))switch(o.supportSideBySide){case 4:if(this.matches(t.primary,n,o)||this.matches(t.secondary,n,o))return!0;break;case 3:if(this.matches(t.primary,n,o)&&this.matches(t.secondary,n,o))return!0;break}let r=t===n;return o?.strictEquals?r:r||t.matches(n)}get isLocked(){return this.locked}lock(t){this.isLocked!==t&&(this.locked=t,this._onDidModelChange.fire({kind:3}))}clone(){let t=this.instantiationService.createInstance(cr,void 0);t.editors=this.editors.slice(0),t.mru=this.mru.slice(0),t.preview=this.preview,t.selection=this.selection.slice(0),t.sticky=this.sticky;for(let n of t.editors)t.registerEditorListeners(n);return t}serialize(){let t=Ae.as(bp.EditorFactory),n=[],o=[],r,s=this.sticky;for(let l=0;l<this.editors.length;l++){let c=this.editors[l],u=!1,p=t.getEditorSerializer(c);if(p){let h=p.canSerialize(c)?p.serialize(c):void 0;typeof h=="string"?(u=!0,o.push({id:c.typeId,value:h}),n.push(c),this.preview===c&&(r=n.length-1)):u=!1}!u&&this.isSticky(l)&&s--}let a=this.mru.map(l=>this.indexOf(l,n)).filter(l=>l>=0);return{id:this.id,locked:this.locked?!0:void 0,editors:o,mru:a,preview:r,sticky:s>=0?s:void 0}}deserialize(t){let n=Ae.as(bp.EditorFactory);return typeof t.id=="number"?(this._id=t.id,cr.IDS=Math.max(t.id+1,cr.IDS)):this._id=cr.IDS++,t.locked&&(this.locked=!0),this.editors=Yt(t.editors.map((o,r)=>{let s,a=n.getEditorSerializer(o.id);if(a){let l=a.deserialize(this.instantiationService,o.value);l instanceof _o&&(s=l,this.registerEditorListeners(s))}return!s&&typeof t.sticky=="number"&&r<=t.sticky&&t.sticky--,s})),this.mru=Yt(t.mru.map(o=>this.editors[o])),this.selection=this.mru.length>0?[this.mru[0]]:[],typeof t.preview=="number"&&(this.preview=this.editors[t.preview]),typeof t.sticky=="number"&&(this.sticky=t.sticky),this._id}dispose(){ft(Array.from(this.editorListeners)),this.editorListeners.clear(),this.transient.clear(),super.dispose()}};cr=L([w(1,Vt),w(2,$e)],cr);var $d=P("editorGroupsService");var Ci=P("editorService");var pE=class{constructor(e,t,n){this.id=e;this.dependencies=t;this.callback=n}};var hE=class i{static INSTANCE=new i;_isWebWorker=typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope";_isRenderer=typeof document=="object";_defineCalls=[];_state=1;_amdPolicy;constructor(){}_initialize(){if(this._state===1){if(globalThis.define){console.log("[amdX] AMD loader already present externally"),this._state=3;return}}else return;this._state=2,globalThis.define=(e,t,n)=>{typeof e!="string"&&(n=t,t=e,e=null),(typeof t!="object"||!Array.isArray(t))&&(n=t,t=null),this._defineCalls.push(new pE(e,t,n))},globalThis.define.amd=!0,this._isRenderer?this._amdPolicy=globalThis._VSCODE_WEB_PACKAGE_TTP??window.trustedTypes?.createPolicy("amdLoader",{createScriptURL(e){if(e.startsWith(window.location.origin)||e.startsWith(`${H.vscodeFileResource}://${Nv}`))return e;throw new Error(`[trusted_script_src] Invalid script url: ${e}`)}}):this._isWebWorker&&(this._amdPolicy=globalThis._VSCODE_WEB_PACKAGE_TTP??globalThis.trustedTypes?.createPolicy("amdLoader",{createScriptURL(e){return e}}))}async load(e){if(this._initialize(),this._state===3)return new Promise(s=>{let a=Sn();console.log(`[amdX] Using external define("${a}", ["${e}"])`),globalThis.define(a,[e],function(l){console.log(`[amdX] Got a result for ${a}: ${!!l}`),s(l)})});let t=await(this._isWebWorker?this._workerLoadScript(e):this._isRenderer?this._rendererLoadScript(e):this._nodeJSLoadScript(e));if(!t){console.warn(`Did not receive a define call from script ${e}`);return}let n={},o=[],r=[];if(Array.isArray(t.dependencies))for(let s of t.dependencies)s==="exports"?o.push(n):r.push(s);if(r.length>0)throw new Error(`Cannot resolve dependencies for script ${e}. The dependencies are: ${r.join(", ")}`);return typeof t.callback=="function"?t.callback(...o)??n:t.callback}_rendererLoadScript(e){return new Promise((t,n)=>{let o=document.createElement("script");o.setAttribute("async","async"),o.setAttribute("type","text/javascript");let r=()=>{o.removeEventListener("load",s),o.removeEventListener("error",a)},s=l=>{r(),t(this._defineCalls.pop())},a=l=>{r(),n(l)};o.addEventListener("load",s),o.addEventListener("error",a),this._amdPolicy&&(e=this._amdPolicy.createScriptURL(e)),o.setAttribute("src",e),window.document.getElementsByTagName("head")[0].appendChild(o)})}async _workerLoadScript(e){return this._amdPolicy&&(e=this._amdPolicy.createScriptURL(e)),await import(e),this._defineCalls.pop()}async _nodeJSLoadScript(e){try{let t=(await import("fs")).default,n=(await import("vm")).default,o=(await import("module")).default,r=N.parse(e).fsPath,s=t.readFileSync(r).toString(),a=o.wrap(s.replace(/^#!.*/,""));return new n.Script(a).runInThisContext().apply(),this._defineCalls.pop()}catch(t){throw t}}},uE=new Map;async function mE(i,e,t){if(!0){t===void 0&&(t=!!(globalThis._VSCODE_PRODUCT_JSON??globalThis.vscode?.context?.configuration()?.product)?.commit);let n=e?`${i}/${e}`:i;if(uE.has(n))return uE.get(n);let o;if(/^\w[\w\d+.-]*:\/\//.test(n))o=n;else{let l=`${Zw}/${n}`;o=hn.asBrowserUri(l).toString(!0)}let r=hE.INSTANCE.load(o);return uE.set(n,r),r}else return await import(i)}var bE="utf8";var CVe=512*8,wVe=512*128;var fE={utf8:{labelLong:"UTF-8",labelShort:"UTF-8",order:1,alias:"utf8bom",guessableName:"UTF-8"},utf8bom:{labelLong:"UTF-8 with BOM",labelShort:"UTF-8 with BOM",encodeOnly:!0,order:2,alias:"utf8"},utf16le:{labelLong:"UTF-16 LE",labelShort:"UTF-16 LE",order:3,guessableName:"UTF-16LE"},utf16be:{labelLong:"UTF-16 BE",labelShort:"UTF-16 BE",order:4,guessableName:"UTF-16BE"},windows1252:{labelLong:"Western (Windows 1252)",labelShort:"Windows 1252",order:5,guessableName:"windows-1252"},iso88591:{labelLong:"Western (ISO 8859-1)",labelShort:"ISO 8859-1",order:6},iso88593:{labelLong:"Western (ISO 8859-3)",labelShort:"ISO 8859-3",order:7},iso885915:{labelLong:"Western (ISO 8859-15)",labelShort:"ISO 8859-15",order:8},macroman:{labelLong:"Western (Mac Roman)",labelShort:"Mac Roman",order:9},cp437:{labelLong:"DOS (CP 437)",labelShort:"CP437",order:10},windows1256:{labelLong:"Arabic (Windows 1256)",labelShort:"Windows 1256",order:11},iso88596:{labelLong:"Arabic (ISO 8859-6)",labelShort:"ISO 8859-6",order:12},windows1257:{labelLong:"Baltic (Windows 1257)",labelShort:"Windows 1257",order:13},iso88594:{labelLong:"Baltic (ISO 8859-4)",labelShort:"ISO 8859-4",order:14},iso885914:{labelLong:"Celtic (ISO 8859-14)",labelShort:"ISO 8859-14",order:15},windows1250:{labelLong:"Central European (Windows 1250)",labelShort:"Windows 1250",order:16,guessableName:"windows-1250"},iso88592:{labelLong:"Central European (ISO 8859-2)",labelShort:"ISO 8859-2",order:17,guessableName:"ISO-8859-2"},cp852:{labelLong:"Central European (CP 852)",labelShort:"CP 852",order:18},windows1251:{labelLong:"Cyrillic (Windows 1251)",labelShort:"Windows 1251",order:19,guessableName:"windows-1251"},cp866:{labelLong:"Cyrillic (CP 866)",labelShort:"CP 866",order:20,guessableName:"IBM866"},iso88595:{labelLong:"Cyrillic (ISO 8859-5)",labelShort:"ISO 8859-5",order:21,guessableName:"ISO-8859-5"},koi8r:{labelLong:"Cyrillic (KOI8-R)",labelShort:"KOI8-R",order:22,guessableName:"KOI8-R"},koi8u:{labelLong:"Cyrillic (KOI8-U)",labelShort:"KOI8-U",order:23},iso885913:{labelLong:"Estonian (ISO 8859-13)",labelShort:"ISO 8859-13",order:24},windows1253:{labelLong:"Greek (Windows 1253)",labelShort:"Windows 1253",order:25,guessableName:"windows-1253"},iso88597:{labelLong:"Greek (ISO 8859-7)",labelShort:"ISO 8859-7",order:26,guessableName:"ISO-8859-7"},windows1255:{labelLong:"Hebrew (Windows 1255)",labelShort:"Windows 1255",order:27,guessableName:"windows-1255"},iso88598:{labelLong:"Hebrew (ISO 8859-8)",labelShort:"ISO 8859-8",order:28,guessableName:"ISO-8859-8"},iso885910:{labelLong:"Nordic (ISO 8859-10)",labelShort:"ISO 8859-10",order:29},iso885916:{labelLong:"Romanian (ISO 8859-16)",labelShort:"ISO 8859-16",order:30},windows1254:{labelLong:"Turkish (Windows 1254)",labelShort:"Windows 1254",order:31},iso88599:{labelLong:"Turkish (ISO 8859-9)",labelShort:"ISO 8859-9",order:32},windows1258:{labelLong:"Vietnamese (Windows 1258)",labelShort:"Windows 1258",order:33},gbk:{labelLong:"Simplified Chinese (GBK)",labelShort:"GBK",order:34},gb18030:{labelLong:"Simplified Chinese (GB18030)",labelShort:"GB18030",order:35},cp950:{labelLong:"Traditional Chinese (Big5)",labelShort:"Big5",order:36,guessableName:"Big5"},big5hkscs:{labelLong:"Traditional Chinese (Big5-HKSCS)",labelShort:"Big5-HKSCS",order:37},shiftjis:{labelLong:"Japanese (Shift JIS)",labelShort:"Shift JIS",order:38,guessableName:"SHIFT_JIS"},eucjp:{labelLong:"Japanese (EUC-JP)",labelShort:"EUC-JP",order:39,guessableName:"EUC-JP"},euckr:{labelLong:"Korean (EUC-KR)",labelShort:"EUC-KR",order:40,guessableName:"EUC-KR"},windows874:{labelLong:"Thai (Windows 874)",labelShort:"Windows 874",order:41},iso885911:{labelLong:"Latin/Thai (ISO 8859-11)",labelShort:"ISO 8859-11",order:42},koi8ru:{labelLong:"Cyrillic (KOI8-RU)",labelShort:"KOI8-RU",order:43},koi8t:{labelLong:"Tajik (KOI8-T)",labelShort:"KOI8-T",order:44},gb2312:{labelLong:"Simplified Chinese (GB 2312)",labelShort:"GB 2312",order:45,guessableName:"GB2312"},cp865:{labelLong:"Nordic DOS (CP 865)",labelShort:"CP 865",order:46},cp850:{labelLong:"Western European DOS (CP 850)",labelShort:"CP 850",order:47}},TVe=(()=>{let i={};for(let e in fE)fE[e].guessableName&&(i[e]=fE[e]);return i})();var Lo=class extends qs{constructor(t,n,o,r,s,a,l,c,u,p,h,m,v,f,b){super(l,a,f,b);this.resource=t;this.hasAssociatedFilePath=n;this.initialValue=o;this.preferredLanguageId=r;this.preferredEncoding=s;this.workingCopyBackupService=c;this.textResourceConfigurationService=u;this.workingCopyService=p;this.textFileService=h;this.labelService=m;this.editorService=v;this._register(this.workingCopyService.registerWorkingCopy(this)),r&&this.setLanguageId(r),this.onConfigurationChange(void 0,!1),this.registerListeners()}static FIRST_LINE_NAME_MAX_LENGTH=40;static FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH=this.FIRST_LINE_NAME_MAX_LENGTH*10;static ACTIVE_EDITOR_LANGUAGE_ID="${activeEditorLanguage}";_onDidChangeContent=this._register(new C);onDidChangeContent=this._onDidChangeContent.event;_onDidChangeName=this._register(new C);onDidChangeName=this._onDidChangeName.event;_onDidChangeDirty=this._register(new C);onDidChangeDirty=this._onDidChangeDirty.event;_onDidChangeEncoding=this._register(new C);onDidChangeEncoding=this._onDidChangeEncoding.event;_onDidSave=this._register(new C);onDidSave=this._onDidSave.event;_onDidRevert=this._register(new C);onDidRevert=this._onDidRevert.event;typeId=VD;capabilities=2;configuredLabelFormat="content";cachedModelFirstLineWords=void 0;get name(){return this.configuredLabelFormat==="content"&&!this.hasAssociatedFilePath&&this.cachedModelFirstLineWords?this.cachedModelFirstLineWords:this.labelService.getUriBasenameLabel(this.resource)}registerListeners(){this._register(this.textResourceConfigurationService.onDidChangeConfiguration(t=>this.onConfigurationChange(t,!0)))}onConfigurationChange(t,n){if(!t||t.affectsConfiguration(this.resource,"files.encoding")){let o=this.textResourceConfigurationService.getValue(this.resource,"files.encoding");this.configuredEncoding!==o&&typeof o=="string"&&(this.configuredEncoding=o,n&&!this.preferredEncoding&&this._onDidChangeEncoding.fire())}if(!t||t.affectsConfiguration(this.resource,"workbench.editor.untitled.labelFormat")){let o=this.textResourceConfigurationService.getValue(this.resource,"workbench.editor.untitled.labelFormat");this.configuredLabelFormat!==o&&(o==="content"||o==="name")&&(this.configuredLabelFormat=o,n&&this._onDidChangeName.fire())}}setLanguageId(t,n){let o=t===Lo.ACTIVE_EDITOR_LANGUAGE_ID?this.editorService.activeTextEditorLanguageId:t;this.preferredLanguageId=o,o&&super.setLanguageId(o,n)}getLanguageId(){return this.textEditorModel?this.textEditorModel.getLanguageId():this.preferredLanguageId}configuredEncoding;getEncoding(){return this.preferredEncoding||this.configuredEncoding}async setEncoding(t){let n=this.getEncoding();this.preferredEncoding=t,n!==this.preferredEncoding&&this._onDidChangeEncoding.fire()}dirty=this.hasAssociatedFilePath||!!this.initialValue;isDirty(){return this.dirty}isModified(){return this.isDirty()}setDirty(t){this.dirty!==t&&(this.dirty=t,this._onDidChangeDirty.fire())}async save(t){let n=await this.textFileService.save(this.resource,t);return n&&this._onDidSave.fire({reason:t?.reason,source:t?.source}),!!n}async revert(){this.ignoreDirtyOnModelContentChange=!0;try{this.updateTextEditorModel(aE(""))}finally{this.ignoreDirtyOnModelContentChange=!1}this.setDirty(!1),this._onDidRevert.fire()}async backup(t){let n;return this.isResolved()?n=await this.textFileService.getEncodedReadable(this.resource,this.createSnapshot()??void 0,{encoding:bE}):typeof this.initialValue=="string"&&(n=Ck(ot.fromString(this.initialValue))),{content:n}}ignoreDirtyOnModelContentChange=!1;async resolve(){let t=!1,n=!1;if(this.textEditorModel)this.updateTextEditorModel(void 0,this.preferredLanguageId);else{let r,s=await this.workingCopyBackupService.resolve(this);s?(r=s.value,n=!0):r=wk(ot.fromString(this.initialValue||""));let a=await w_(await this.textFileService.getDecodedStream(this.resource,r,{encoding:bE}));this.createTextEditorModel(a,this.resource,this.preferredLanguageId),t=!0}let o=Rt(this.textEditorModel);return this.installModelListeners(o),t&&((n||this.initialValue)&&this.updateNameFromFirstLine(o),this.setDirty(this.hasAssociatedFilePath||!!n||!!this.initialValue),(n||this.initialValue)&&this._onDidChangeContent.fire()),super.resolve()}installModelListeners(t){this._register(t.onDidChangeContent(n=>this.onModelContentChanged(t,n))),this._register(t.onDidChangeLanguage(()=>this.onConfigurationChange(void 0,!0))),super.installModelListeners(t)}onModelContentChanged(t,n){this.ignoreDirtyOnModelContentChange||(!this.hasAssociatedFilePath&&t.getLineCount()===1&&t.getLineLength(1)===0?this.setDirty(!1):this.setDirty(!0)),n.changes.some(o=>(o.range.startLineNumber===1||o.range.endLineNumber===1)&&o.range.startColumn<=Lo.FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH)&&this.updateNameFromFirstLine(t),this._onDidChangeContent.fire(),this.autoDetectLanguage()}updateNameFromFirstLine(t){if(this.hasAssociatedFilePath)return;let n,o=t.getValueInRange({startLineNumber:1,endLineNumber:1,startColumn:1,endColumn:Lo.FIRST_LINE_NAME_CANDIDATE_MAX_LENGTH+1}).trim().replace(/\s+/g," ").replace(/\u202E/g,"");o=o.substr(0,Bw(o,Lo.FIRST_LINE_NAME_MAX_LENGTH)[0]),o&&fu().exec(o)&&(n=o),n!==this.cachedModelFirstLineWords&&(this.cachedModelFirstLineWords=n,this._onDidChangeName.fire())}isReadonly(){return!1}};Lo=L([w(5,Pt),w(6,Zi),w(7,Fd),w(8,pf),w(9,Xa),w(10,k_),w(11,ir),w(12,Ci),w(13,Nd),w(14,Ls)],Lo);var MF=P("untitledTextEditorService"),Ja=class extends A{constructor(t,n){super();this.instantiationService=t;this.configurationService=n}static UNTITLED_WITHOUT_ASSOCIATED_RESOURCE_REGEX=/Untitled-\d+/;_onDidChangeDirty=this._register(new C);onDidChangeDirty=this._onDidChangeDirty.event;_onDidChangeEncoding=this._register(new C);onDidChangeEncoding=this._onDidChangeEncoding.event;_onDidCreate=this._register(new C);onDidCreate=this._onDidCreate.event;_onWillDispose=this._register(new C);onWillDispose=this._onWillDispose.event;_onDidChangeLabel=this._register(new C);onDidChangeLabel=this._onDidChangeLabel.event;mapResourceToModel=new bt;get(t){return this.mapResourceToModel.get(t)}getValue(t){return this.get(t)?.textEditorModel?.getValue()}async resolve(t){let n=this.doCreateOrGet(t);return await n.resolve(),n}create(t){return this.doCreateOrGet(t)}doCreateOrGet(t=Object.create(null)){let n=this.massageOptions(t);return n.untitledResource&&this.mapResourceToModel.has(n.untitledResource)?this.mapResourceToModel.get(n.untitledResource):this.doCreate(n)}massageOptions(t){let n=Object.create(null);if(t.associatedResource?(n.untitledResource=N.from({scheme:H.untitled,authority:t.associatedResource.authority,fragment:t.associatedResource.fragment,path:t.associatedResource.path,query:t.associatedResource.query}),n.associatedResource=t.associatedResource):t.untitledResource?.scheme===H.untitled&&(n.untitledResource=t.untitledResource),t.languageId)n.languageId=t.languageId;else if(!n.associatedResource){let o=this.configurationService.getValue();o.files?.defaultLanguage&&(n.languageId=o.files.defaultLanguage)}return n.encoding=t.encoding,n.initialValue=t.initialValue,n}doCreate(t){let n=t.untitledResource;if(!n){let r=1;do n=N.from({scheme:H.untitled,path:`Untitled-${r}`}),r++;while(this.mapResourceToModel.has(n))}let o=this._register(this.instantiationService.createInstance(Lo,n,!!t.associatedResource,t.initialValue,t.languageId,t.encoding));return this.registerModel(o),o}registerModel(t){let n=new re;n.add(t.onDidChangeDirty(()=>this._onDidChangeDirty.fire(t))),n.add(t.onDidChangeName(()=>this._onDidChangeLabel.fire(t))),n.add(t.onDidChangeEncoding(()=>this._onDidChangeEncoding.fire(t))),n.add(t.onWillDispose(()=>this._onWillDispose.fire(t))),ee.once(t.onWillDispose)(()=>{this.mapResourceToModel.delete(t.resource),n.dispose()}),this.mapResourceToModel.set(t.resource,t),this._onDidCreate.fire(t),t.isDirty()&&this._onDidChangeDirty.fire(t)}isUntitledWithAssociatedResource(t){return t.scheme===H.untitled&&t.path.length>1&&!Ja.UNTITLED_WITHOUT_ASSOCIATED_RESOURCE_REGEX.test(t.path)}canDispose(t){return t.isDisposed()?!0:this.doCanDispose(t)}async doCanDispose(t){return t.isDirty()?(await ee.toPromise(t.onDidChangeDirty),this.canDispose(t)):!0}};Ja=L([w(0,Vt),w(1,$e)],Ja);zt(MF,Ja,1);var vE=P("progressService");var Uze=Object.freeze({total(){},worked(){},done(){}}),D_=class{constructor(e){this.callback=e}static None=Object.freeze({report(){}});_value;get value(){return this._value}report(e){this._value=e,this.callback(this._value)}};var Uf=class extends A{deferred=new us;reporter;lastStep;constructor(e,t){super(),t.withProgress(e,n=>(this.reporter=n,this.lastStep&&n.report(this.lastStep),this.deferred.p)),this._register(le(()=>this.deferred.complete()))}report(e){this.reporter?this.reporter.report(e):this.lastStep=e}};Uf=L([w(1,vE)],Uf);var Vze=P("editorProgressService");var jd=class extends A{constructor(t,n){super();this.logService=t;this.configurationService=n}participants=new In;addFileOperationParticipant(t){let n=this.participants.push(t);return le(()=>n())}async participate(t,n,o,r){let s=this.configurationService.getValue("files.participants.timeout");if(!(typeof s!="number"||s<=0))for(let a of this.participants)try{await a.participate(t,n,o,s,r)}catch(l){this.logService.warn(l)}}dispose(){this.participants.clear(),super.dispose()}};jd=L([w(0,qt),w(1,$e)],jd);var ri=class extends A{constructor(t,n,o,r){super();this.getExpression=t;this.shouldUpdate=n;this.contextService=o;this.configurationService=r;this.updateExpressions(!1),this.registerListeners()}static NO_FOLDER=null;_onExpressionChange=this._register(new C);onExpressionChange=this._onExpressionChange.event;mapFolderToParsedExpression=new Map;mapFolderToConfiguredExpression=new Map;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>{this.shouldUpdate(t)&&this.updateExpressions(!0)})),this._register(this.contextService.onDidChangeWorkspaceFolders(()=>this.updateExpressions(!0)))}updateExpressions(t){let n=!1;for(let a of this.contextService.getWorkspace().folders){let l=a.uri.toString(),c=this.doGetExpression(a.uri),u=this.mapFolderToConfiguredExpression.get(l);c?(!u||!Rn(u.expression,c.expression))&&(n=!0,this.mapFolderToParsedExpression.set(l,Ql(c.expression)),this.mapFolderToConfiguredExpression.set(l,c)):u&&(n=!0,this.mapFolderToParsedExpression.delete(l),this.mapFolderToConfiguredExpression.delete(l))}let o=new ah(this.contextService.getWorkspace().folders.map(a=>a.uri));for(let[a]of this.mapFolderToConfiguredExpression)a!==ri.NO_FOLDER&&(o.has(N.parse(a))||(this.mapFolderToParsedExpression.delete(a),this.mapFolderToConfiguredExpression.delete(a),n=!0));let r=this.doGetExpression(void 0),s=this.mapFolderToConfiguredExpression.get(ri.NO_FOLDER);r?(!s||!Rn(s.expression,r.expression))&&(n=!0,this.mapFolderToParsedExpression.set(ri.NO_FOLDER,Ql(r.expression)),this.mapFolderToConfiguredExpression.set(ri.NO_FOLDER,r)):s&&(n=!0,this.mapFolderToParsedExpression.delete(ri.NO_FOLDER),this.mapFolderToConfiguredExpression.delete(ri.NO_FOLDER)),t&&n&&this._onExpressionChange.fire()}doGetExpression(t){let n=this.getExpression(t);if(!n)return;let o=Object.keys(n);if(o.length===0)return;let r=!1,s=Object.create(null);for(let a of o){r||(r=wr(a));let l=a,c=Yw(l,!0);if(c){let u=c.toLowerCase();c!==c.toLowerCase()&&(l=`${u}${l.substring(1)}`)}s[l]=n[a]}return{expression:s,hasAbsolutePath:r}}matches(t,n){if(this.mapFolderToParsedExpression.size===0)return!1;let o=this.contextService.getWorkspaceFolder(t),r,s;if(o&&this.mapFolderToParsedExpression.has(o.uri.toString())?(r=this.mapFolderToParsedExpression.get(o.uri.toString()),s=this.mapFolderToConfiguredExpression.get(o.uri.toString())):(r=this.mapFolderToParsedExpression.get(ri.NO_FOLDER),s=this.mapFolderToConfiguredExpression.get(ri.NO_FOLDER)),!r)return!1;let a;return o?a=Gc(o.uri,t):a=this.uriToPath(t),typeof a=="string"&&r(a,void 0,n)?!0:a!==this.uriToPath(t)&&s?.hasAbsolutePath?!!r(this.uriToPath(t),void 0,n):!1}uriToPath(t){return t.scheme===H.file?t.fsPath:t.path}};ri=L([w(2,_t),w(3,$e)],ri);var NF=new K("autoSaveAfterShortDelayContext",!1,!0);var yE=P("filesConfigurationService"),si=class extends A{constructor(t,n,o,r,s,a,l,c){super();this.contextKeyService=t;this.configurationService=n;this.contextService=o;this.environmentService=r;this.uriIdentityService=s;this.fileService=a;this.markerService=l;this.textResourceConfigurationService=c;let u=n.getValue();this.currentGlobalAutoSaveConfiguration=this.computeAutoSaveConfiguration(void 0,u.files),this.currentFilesAssociationConfiguration=u?.files?.associations,this.currentHotExitConfiguration=u?.files?.hotExit||_d.ON_EXIT,this.onFilesConfigurationChange(u,!1),this.registerListeners()}static DEFAULT_AUTO_SAVE_MODE=At?To.AFTER_DELAY:To.OFF;static DEFAULT_AUTO_SAVE_DELAY=1e3;static READONLY_MESSAGES={providerReadonly:{value:d("providerReadonly","Editor is read-only because the file system of the file is read-only."),isTrusted:!0},sessionReadonly:{value:d({key:"sessionReadonly",comment:['Please do not translate the word "command", it is part of our internal syntax which must not change','{Locked="](command:{0})"}']},"Editor is read-only because the file was set read-only in this session. [Click here](command:{0}) to set writeable.","workbench.action.files.setActiveEditorWriteableInSession"),isTrusted:!0},configuredReadonly:{value:d({key:"configuredReadonly",comment:['Please do not translate the word "command", it is part of our internal syntax which must not change','{Locked="](command:{0})"}']},"Editor is read-only because the file was set read-only via settings. [Click here](command:{0}) to configure or [toggle for this session](command:{1}).",`workbench.action.openSettings?${encodeURIComponent('["files.readonly"]')}`,"workbench.action.files.toggleActiveEditorReadonlyInSession"),isTrusted:!0},fileLocked:{value:d({key:"fileLocked",comment:['Please do not translate the word "command", it is part of our internal syntax which must not change','{Locked="](command:{0})"}']},"Editor is read-only because of file permissions. [Click here](command:{0}) to set writeable anyway.","workbench.action.files.setActiveEditorWriteableInSession"),isTrusted:!0},fileReadonly:{value:d("fileReadonly","Editor is read-only because the file is read-only."),isTrusted:!0}};_onDidChangeAutoSaveConfiguration=this._register(new C);onDidChangeAutoSaveConfiguration=this._onDidChangeAutoSaveConfiguration.event;_onDidChangeAutoSaveDisabled=this._register(new C);onDidChangeAutoSaveDisabled=this._onDidChangeAutoSaveDisabled.event;_onDidChangeFilesAssociation=this._register(new C);onDidChangeFilesAssociation=this._onDidChangeFilesAssociation.event;_onDidChangeReadonly=this._register(new C);onDidChangeReadonly=this._onDidChangeReadonly.event;currentGlobalAutoSaveConfiguration;currentFilesAssociationConfiguration;currentHotExitConfiguration;autoSaveConfigurationCache=new zi(1e3);autoSaveDisabledOverrides=new bt;autoSaveAfterShortDelayContext=NF.bindTo(this.contextKeyService);readonlyIncludeMatcher=this._register(new $c(()=>this.createReadonlyMatcher(ID)));readonlyExcludeMatcher=this._register(new $c(()=>this.createReadonlyMatcher(xD)));configuredReadonlyFromPermissions;sessionReadonlyOverrides=new bt(t=>this.uriIdentityService.extUri.getComparisonKey(t));createReadonlyMatcher(t){let n=this._register(new ri(o=>this.configurationService.getValue(t,{resource:o}),o=>o.affectsConfiguration(t),this.contextService,this.configurationService));return this._register(n.onExpressionChange(()=>this._onDidChangeReadonly.fire())),n}isReadonly(t,n){let o=this.fileService.getProvider(t.scheme);if(o&&vD(o))return o.readOnlyMessage??si.READONLY_MESSAGES.providerReadonly;let r=this.sessionReadonlyOverrides.get(t);return typeof r=="boolean"?r===!0?si.READONLY_MESSAGES.sessionReadonly:!1:this.uriIdentityService.extUri.isEqualOrParent(t,this.environmentService.userRoamingDataHome)||this.uriIdentityService.extUri.isEqual(t,this.contextService.getWorkspace().configuration??void 0)?!1:this.readonlyIncludeMatcher.value.matches(t)?this.readonlyExcludeMatcher.value.matches(t)?!1:si.READONLY_MESSAGES.configuredReadonly:this.configuredReadonlyFromPermissions&&n?.locked?si.READONLY_MESSAGES.fileLocked:n?.readonly?si.READONLY_MESSAGES.fileReadonly:!1}async updateReadonly(t,n){if(n==="toggle"){let o;try{o=await this.fileService.resolve(t,{resolveMetadata:!0})}catch{}n=!this.isReadonly(t,o)}n==="reset"?this.sessionReadonlyOverrides.delete(t):this.sessionReadonlyOverrides.set(t,n),this._onDidChangeReadonly.fire()}registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>{t.affectsConfiguration("files")&&this.onFilesConfigurationChange(this.configurationService.getValue(),!0)}))}onFilesConfigurationChange(t,n){this.currentGlobalAutoSaveConfiguration=this.computeAutoSaveConfiguration(void 0,t.files),this.autoSaveConfigurationCache.clear(),this.autoSaveAfterShortDelayContext.set(this.getAutoSaveMode(void 0).mode===1),n&&this._onDidChangeAutoSaveConfiguration.fire();let o=t?.files?.associations;Rn(this.currentFilesAssociationConfiguration,o)||(this.currentFilesAssociationConfiguration=o,n&&this._onDidChangeFilesAssociation.fire());let r=t?.files?.hotExit;r===_d.OFF||r===_d.ON_EXIT_AND_WINDOW_CLOSE?this.currentHotExitConfiguration=r:this.currentHotExitConfiguration=_d.ON_EXIT;let s=!!t?.files?.readonlyFromPermissions;s!==!!this.configuredReadonlyFromPermissions&&(this.configuredReadonlyFromPermissions=s,n&&this._onDidChangeReadonly.fire())}getAutoSaveConfiguration(t){let n=this.toResource(t);if(n){let o=this.autoSaveConfigurationCache.get(n);return o||(o=this.computeAutoSaveConfiguration(n,this.textResourceConfigurationService.getValue(n,"files")),this.autoSaveConfigurationCache.set(n,o)),o}return this.currentGlobalAutoSaveConfiguration}computeAutoSaveConfiguration(t,n){let o,r,s,a,l,c;switch(n?.autoSave??si.DEFAULT_AUTO_SAVE_MODE){case To.AFTER_DELAY:{o="afterDelay",r=typeof n?.autoSaveDelay=="number"&&n.autoSaveDelay>=0?n.autoSaveDelay:si.DEFAULT_AUTO_SAVE_DELAY,c=r<=si.DEFAULT_AUTO_SAVE_DELAY;break}case To.ON_FOCUS_CHANGE:o="onFocusChange";break;case To.ON_WINDOW_CHANGE:o="onWindowChange";break}return n?.autoSaveWorkspaceFilesOnly===!0&&(s=!0,t&&!this.contextService.isInsideWorkspace(t)&&(l=!0,c=void 0)),n?.autoSaveWhenNoErrors===!0&&(a=!0,c=void 0),{autoSave:o,autoSaveDelay:r,autoSaveWorkspaceFilesOnly:s,autoSaveWhenNoErrors:a,isOutOfWorkspace:l,isShortAutoSaveDelay:c}}toResource(t){return t instanceof _o?Yd.getOriginalUri(t,{supportSideBySide:1}):t}hasShortAutoSaveDelay(t){let n=this.toResource(t);return this.getAutoSaveConfiguration(n).isShortAutoSaveDelay?!n||!this.autoSaveDisabledOverrides.has(n):!1}getAutoSaveMode(t,n){let o=this.toResource(t);if(o&&this.autoSaveDisabledOverrides.has(o))return{mode:0,reason:4};let r=this.getAutoSaveConfiguration(o);if(typeof r.autoSave>"u")return{mode:0,reason:1};if(typeof n=="number"&&(r.autoSave==="afterDelay"&&n!==2||r.autoSave==="onFocusChange"&&n!==3&&n!==4||r.autoSave==="onWindowChange"&&n!==4))return{mode:0,reason:1};if(o){if(r.autoSaveWorkspaceFilesOnly&&r.isOutOfWorkspace)return{mode:0,reason:2};if(r.autoSaveWhenNoErrors&&this.markerService.read({resource:o,take:1,severities:8}).length>0)return{mode:0,reason:3}}switch(r.autoSave){case"afterDelay":return typeof r.autoSaveDelay=="number"&&r.autoSaveDelay<=si.DEFAULT_AUTO_SAVE_DELAY?{mode:r.autoSaveWhenNoErrors?2:1}:{mode:2};case"onFocusChange":return{mode:3};case"onWindowChange":return{mode:4}}}async toggleAutoSave(){let t=this.configurationService.getValue("files.autoSave"),n;return[To.AFTER_DELAY,To.ON_FOCUS_CHANGE,To.ON_WINDOW_CHANGE].some(o=>o===t)?n=To.OFF:n=To.AFTER_DELAY,this.configurationService.updateValue("files.autoSave",n)}disableAutoSave(t){let n=this.toResource(t);if(!n)return A.None;let o=this.autoSaveDisabledOverrides.get(n)??0;return this.autoSaveDisabledOverrides.set(n,o+1),o===0&&this._onDidChangeAutoSaveDisabled.fire(n),le(()=>{let r=this.autoSaveDisabledOverrides.get(n)??0;r<=1?(this.autoSaveDisabledOverrides.delete(n),this._onDidChangeAutoSaveDisabled.fire(n)):this.autoSaveDisabledOverrides.set(n,r-1)})}get isHotExitEnabled(){return this.contextService.getWorkspace().transient?!1:this.currentHotExitConfiguration!==_d.OFF}get hotExitConfiguration(){return this.currentHotExitConfiguration}preventSaveConflicts(t,n){return this.configurationService.getValue("files.saveConflictResolution",{resource:t,overrideIdentifier:n})!=="overwriteFileOnDisk"}};si=L([w(0,Qo),w(1,$e),w(2,_t),w(3,An),w(4,Hs),w(5,Gt),w(6,w1),w(7,pf)],si);zt(yE,si,0);var IE=P("workingCopyEditorService"),vp=class extends A{constructor(t){super();this.editorService=t}_onDidRegisterHandler=this._register(new C);onDidRegisterHandler=this._onDidRegisterHandler.event;handlers=new Set;registerHandler(t){return this.handlers.add(t),this._onDidRegisterHandler.fire(t),le(()=>this.handlers.delete(t))}findEditor(t){for(let n of this.editorService.getEditors(0))if(this.isOpen(t,n.editor))return n}isOpen(t,n){for(let o of this.handlers)if(o.isOpen(t,n))return!0;return!1}};vp=L([w(0,Ci)],vp);zt(IE,vp,1);var __=P("elevatedFileService");var Qd=class extends A{constructor(t,n){super();this.resource=t;this.fileService=n;this._register(this.fileService.onDidFilesChange(o=>this.onDidFilesChange(o)))}_onDidChangeOrphaned=this._register(new C);onDidChangeOrphaned=this._onDidChangeOrphaned.event;orphaned=!1;isOrphaned(){return this.orphaned}async onDidFilesChange(t){let n=!1,o;if(this.orphaned?t.contains(this.resource,1)&&(o=!1,n=!0):t.contains(this.resource,2)&&(o=!0,n=!0),n&&this.orphaned!==o){let r=!1;o&&(await pi(100,Tt.None),this.isDisposed()?r=!0:r=!await this.fileService.exists(this.resource)),this.orphaned!==r&&!this.isDisposed()&&this.setOrphaned(r)}}setOrphaned(t){this.orphaned!==t&&(this.orphaned=t,this._onDidChangeOrphaned.fire())}_onWillDispose=this._register(new C);onWillDispose=this._onWillDispose.event;isDisposed(){return this._store.isDisposed}dispose(){this.orphaned=!1,this._onWillDispose.fire(),super.dispose()}isModified(){return this.isDirty()}};Qd=L([w(1,Gt)],Qd);var Za=class extends Qd{constructor(t,n,o,r,s,a,l,c,u,p,h,m,v,f,b,E){super(n,a);this.typeId=t;this.name=o;this.modelFactory=r;this.externalResolver=s;this.logService=l;this.workingCopyFileService=c;this.filesConfigurationService=u;this.workingCopyBackupService=p;this.notificationService=m;this.workingCopyEditorService=v;this.editorService=f;this.elevatedFileService=b;this.progressService=E;this._register(h.registerWorkingCopy(this)),this.registerListeners()}capabilities=0;_model=void 0;get model(){return this._model}_onDidChangeContent=this._register(new C);onDidChangeContent=this._onDidChangeContent.event;_onDidResolve=this._register(new C);onDidResolve=this._onDidResolve.event;_onDidChangeDirty=this._register(new C);onDidChangeDirty=this._onDidChangeDirty.event;_onDidSaveError=this._register(new C);onDidSaveError=this._onDidSaveError.event;_onDidSave=this._register(new C);onDidSave=this._onDidSave.event;_onDidRevert=this._register(new C);onDidRevert=this._onDidRevert.event;_onDidChangeReadonly=this._register(new C);onDidChangeReadonly=this._onDidChangeReadonly.event;registerListeners(){this._register(this.filesConfigurationService.onDidChangeReadonly(()=>this._onDidChangeReadonly.fire()))}dirty=!1;savedVersionId;isDirty(){return this.dirty}markModified(){this.setDirty(!0)}setDirty(t){if(!this.isResolved())return;let n=this.dirty;this.doSetDirty(t),t!==n&&this._onDidChangeDirty.fire()}doSetDirty(t){let n=this.dirty,o=this.inConflictMode,r=this.inErrorMode,s=this.savedVersionId;return t?this.dirty=!0:(this.dirty=!1,this.inConflictMode=!1,this.inErrorMode=!1,this.isResolved()&&(this.savedVersionId=this.model.versionId)),()=>{this.dirty=n,this.inConflictMode=o,this.inErrorMode=r,this.savedVersionId=s}}lastResolvedFileStat;isResolved(){return!!this.model}async resolve(t){if(this.trace("resolve() - enter"),this.isDisposed()){this.trace("resolve() - exit - without resolving because file working copy is disposed");return}if(!t?.contents&&(this.dirty||this.saveSequentializer.isRunning())){this.trace("resolve() - exit - without resolving because file working copy is dirty or being saved");return}return this.doResolve(t)}async doResolve(t){if(t?.contents)return this.resolveFromBuffer(t.contents);if(!(!this.isResolved()&&await this.resolveFromBackup()))return this.resolveFromFile(t)}async resolveFromBuffer(t){this.trace("resolveFromBuffer()");let n,o,r,s;try{let a=await this.fileService.stat(this.resource);n=a.mtime,o=a.ctime,r=a.size,s=a.etag,this.setOrphaned(!1)}catch(a){n=Date.now(),o=Date.now(),r=0,s=ip,this.setOrphaned(a.fileOperationResult===1)}return this.resolveFromContent({resource:this.resource,name:this.name,mtime:n,ctime:o,size:r,etag:s,value:t,readonly:!1,locked:!1},!0)}async resolveFromBackup(){let t=await this.workingCopyBackupService.resolve(this);return this.isResolved()?(this.trace("resolveFromBackup() - exit - withoutresolving because previously new file working copy got created meanwhile"),!0):t?(await this.doResolveFromBackup(t),!0):!1}async doResolveFromBackup(t){this.trace("doResolveFromBackup()"),await this.resolveFromContent({resource:this.resource,name:this.name,mtime:t.meta?t.meta.mtime:Date.now(),ctime:t.meta?t.meta.ctime:Date.now(),size:t.meta?t.meta.size:0,etag:t.meta?t.meta.etag:ip,value:t.value,readonly:!1,locked:!1},!0),t.meta&&t.meta.orphaned&&this.setOrphaned(!0)}async resolveFromFile(t){this.trace("resolveFromFile()");let n=t?.forceReadFromFile,o;n?o=ip:this.lastResolvedFileStat&&(o=this.lastResolvedFileStat.etag);let r=this.versionId;try{let s=await this.fileService.readFileStream(this.resource,{etag:o,limits:t?.limits});if(this.setOrphaned(!1),r!==this.versionId){this.trace("resolveFromFile() - exit - without resolving because file working copy content changed");return}await this.resolveFromContent(s,!1)}catch(s){let a=s.fileOperationResult;if(this.setOrphaned(a===1),this.isResolved()&&a===2){s instanceof rf&&this.updateLastResolvedFileStat(s.stat);return}if(this.isResolved()&&a===1&&!n)return;throw s}}async resolveFromContent(t,n){if(this.trace("resolveFromContent() - enter"),this.isDisposed()){this.trace("resolveFromContent() - exit - because working copy is disposed");return}this.updateLastResolvedFileStat({resource:this.resource,name:t.name,mtime:t.mtime,ctime:t.ctime,size:t.size,etag:t.etag,readonly:t.readonly,locked:t.locked,isFile:!0,isDirectory:!1,isSymbolicLink:!1,children:void 0}),this.isResolved()?await this.doUpdateModel(t.value):await this.doCreateModel(t.value),this.setDirty(!!n),this._onDidResolve.fire()}async doCreateModel(t){this.trace("doCreateModel()"),this._model=this._register(await this.modelFactory.createModel(this.resource,t,Tt.None)),this.installModelListeners(this._model)}ignoreDirtyOnModelContentChange=!1;async doUpdateModel(t){this.trace("doUpdateModel()"),this.ignoreDirtyOnModelContentChange=!0;try{await this.model?.update(t,Tt.None)}finally{this.ignoreDirtyOnModelContentChange=!1}}installModelListeners(t){this._register(t.onDidChangeContent(n=>this.onModelContentChanged(t,n.isUndoing||n.isRedoing))),this._register(t.onWillDispose(()=>this.dispose()))}onModelContentChanged(t,n){if(this.trace("onModelContentChanged() - enter"),this.versionId++,this.trace(`onModelContentChanged() - new versionId ${this.versionId}`),n&&(this.lastContentChangeFromUndoRedo=Date.now()),!this.ignoreDirtyOnModelContentChange&&!this.isReadonly())if(t.versionId===this.savedVersionId){this.trace("onModelContentChanged() - model content changed back to last saved version");let o=this.dirty;this.setDirty(!1),o&&this._onDidRevert.fire()}else this.trace("onModelContentChanged() - model content changed and marked as dirty"),this.setDirty(!0);this._onDidChangeContent.fire()}async forceResolveFromFile(){this.isDisposed()||await this.externalResolver({forceReadFromFile:!0})}get backupDelay(){return this.model?.configuration?.backupDelay}async backup(t){let n;this.lastResolvedFileStat&&(n={mtime:this.lastResolvedFileStat.mtime,ctime:this.lastResolvedFileStat.ctime,size:this.lastResolvedFileStat.size,etag:this.lastResolvedFileStat.etag,orphaned:this.isOrphaned()});let o;return this.isResolved()&&(o=await Qc(this.model.snapshot(2,t),t)),{meta:n,content:o}}versionId=0;static UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD=500;lastContentChangeFromUndoRedo=void 0;saveSequentializer=new Bh;ignoreSaveFromSaveParticipants=!1;async save(t=Object.create(null)){return this.isResolved()?this.isReadonly()?(this.trace("save() - ignoring request for readonly resource"),!1):(this.hasState(3)||this.hasState(5))&&(t.reason===2||t.reason===3||t.reason===4)?(this.trace("save() - ignoring auto save request for file working copy that is in conflict or error"),!1):(this.trace("save() - enter"),await this.doSave(t),this.trace("save() - exit"),this.hasState(0)):!1}async doSave(t){typeof t.reason!="number"&&(t.reason=1);let n=this.versionId;if(this.trace(`doSave(${n}) - enter with versionId ${n}`),this.ignoreSaveFromSaveParticipants){this.trace(`doSave(${n}) - exit - refusing to save() recursively from save participant`);return}if(this.saveSequentializer.isRunning(n))return this.trace(`doSave(${n}) - exit - found a running save for versionId ${n}`),this.saveSequentializer.running;if(!t.force&&!this.dirty){this.trace(`doSave(${n}) - exit - because not dirty and/or versionId is different (this.isDirty: ${this.dirty}, this.versionId: ${this.versionId})`);return}if(this.saveSequentializer.isRunning())return this.trace(`doSave(${n}) - exit - because busy saving`),this.saveSequentializer.cancelRunning(),this.saveSequentializer.queue(()=>this.doSave(t));this.isResolved()&&this.model.pushStackElement();let o=new Vn;return this.progressService.withProgress({title:d("saveParticipants","Saving '{0}'",this.name),location:10,cancellable:!0,delay:this.isDirty()?3e3:5e3},r=>this.doSaveSequential(n,t,r,o),()=>{o.cancel()}).finally(()=>{o.dispose()})}doSaveSequential(t,n,o,r){return this.saveSequentializer.run(t,(async()=>{if(this.isResolved()&&!n.skipSaveParticipants&&this.workingCopyFileService.hasSaveParticipants)try{if(n.reason===2&&typeof this.lastContentChangeFromUndoRedo=="number"){let l=Date.now()-this.lastContentChangeFromUndoRedo;l<Za.UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD&&await pi(Za.UNDO_REDO_SAVE_PARTICIPANTS_AUTO_SAVE_THROTTLE_THRESHOLD-l)}if(!r.token.isCancellationRequested){this.ignoreSaveFromSaveParticipants=!0;try{await this.workingCopyFileService.runSaveParticipants(this,{reason:n.reason??1,savedFrom:n.from},o,r.token)}finally{this.ignoreSaveFromSaveParticipants=!1}}}catch(l){this.logService.error(`[stored file working copy] runSaveParticipants(${t}) - resulted in an error: ${l.toString()}`,this.resource.toString(),this.typeId)}if(r.token.isCancellationRequested||this.isDisposed()||!this.isResolved())return;t=this.versionId,this.inErrorMode=!1,o.report({message:d("saveTextFile","Writing into file...")}),this.trace(`doSave(${t}) - before write()`);let s=Rt(this.lastResolvedFileStat),a=this;return this.saveSequentializer.run(t,(async()=>{try{let l={mtime:s.mtime,etag:n.ignoreModifiedSince||!this.filesConfigurationService.preventSaveConflicts(s.resource)?ip:s.etag,unlock:n.writeUnlock},c;if(typeof a.model.save=="function")try{c=await a.model.save(l,r.token)}catch(u){if(r.token.isCancellationRequested)return;throw u}else{let u=await Qc(a.model.snapshot(1,r.token),r.token);if(r.token.isCancellationRequested)return;r.dispose(),n?.writeElevated&&this.elevatedFileService.isSupported(s.resource)?c=await this.elevatedFileService.writeFileElevated(s.resource,Rt(u),l):c=await this.fileService.writeFile(s.resource,Rt(u),l)}this.handleSaveSuccess(c,t,n)}catch(l){this.handleSaveError(l,t,n)}})(),()=>r.cancel())})(),()=>r.cancel())}handleSaveSuccess(t,n,o){this.updateLastResolvedFileStat(t),n===this.versionId?(this.trace(`handleSaveSuccess(${n}) - setting dirty to false because versionId did not change`),this.setDirty(!1)):this.trace(`handleSaveSuccess(${n}) - not setting dirty to false because versionId did change meanwhile`),this.setOrphaned(!1),this._onDidSave.fire({reason:o.reason,stat:t,source:o.source})}handleSaveError(t,n,o){if((o.ignoreErrorHandler?this.logService.trace:this.logService.error).apply(this.logService,[`[stored file working copy] handleSaveError(${n}) - exit - resulted in a save error: ${t.toString()}`,this.resource.toString(),this.typeId]),o.ignoreErrorHandler)throw t;this.setDirty(!0),this.inErrorMode=!0,t.fileOperationResult===3&&(this.inConflictMode=!0),this.doHandleSaveError(t,o),this._onDidSaveError.fire()}doHandleSaveError(t,n){let o=t,r=[],s;if(o.fileOperationResult===3)s=d("staleSaveError","Failed to save '{0}': The content of the file is newer. Do you want to overwrite the file with your changes?",this.name),r.push(Mr({id:"fileWorkingCopy.overwrite",label:d("overwrite","Overwrite"),run:()=>this.save({...n,ignoreModifiedSince:!0,reason:1})})),r.push(Mr({id:"fileWorkingCopy.revert",label:d("revert","Revert"),run:()=>this.revert()}));else{let c=o.fileOperationResult===5,u=c&&o.options?.unlock,p=o.fileOperationResult===6,h=this.elevatedFileService.isSupported(this.resource);gS(t)&&r.push(...t.actions),h&&(p||u)?r.push(Mr({id:"fileWorkingCopy.saveElevated",label:u?Ye?d("overwriteElevated","Overwrite as Admin..."):d("overwriteElevatedSudo","Overwrite as Sudo..."):Ye?d("saveElevated","Retry as Admin..."):d("saveElevatedSudo","Retry as Sudo..."),run:()=>{this.save({...n,writeElevated:!0,writeUnlock:u,reason:1})}})):c?r.push(Mr({id:"fileWorkingCopy.unlock",label:d("overwrite","Overwrite"),run:()=>this.save({...n,writeUnlock:!0,reason:1})})):r.push(Mr({id:"fileWorkingCopy.retry",label:d("retry","Retry"),run:()=>this.save({...n,reason:1})})),r.push(Mr({id:"fileWorkingCopy.saveAs",label:d("saveAs","Save As..."),run:async()=>{let m=this.workingCopyEditorService.findEditor(this);m&&((await this.editorService.save(m,{saveAs:!0,reason:1})).success||this.doHandleSaveError(t,n))}})),r.push(Mr({id:"fileWorkingCopy.revert",label:d("revert","Revert"),run:()=>this.revert()})),c?u&&h?s=Ye?d("readonlySaveErrorAdmin","Failed to save '{0}': File is read-only. Select 'Overwrite as Admin' to retry as administrator.",this.name):d("readonlySaveErrorSudo","Failed to save '{0}': File is read-only. Select 'Overwrite as Sudo' to retry as superuser.",this.name):s=d("readonlySaveError","Failed to save '{0}': File is read-only. Select 'Overwrite' to attempt to make it writeable.",this.name):h&&p?s=Ye?d("permissionDeniedSaveError","Failed to save '{0}': Insufficient permissions. Select 'Retry as Admin' to retry as administrator.",this.name):d("permissionDeniedSaveErrorSudo","Failed to save '{0}': Insufficient permissions. Select 'Retry as Sudo' to retry as superuser.",this.name):s=d({key:"genericSaveError",comment:["{0} is the resource that failed to save and {1} the error message"]},"Failed to save '{0}': {1}",this.name,af(t,!1))}let a=this.notificationService.notify({id:`${hi(this.resource.toString())}`,severity:SD.Error,message:s,actions:{primary:r}}),l=this._register(ee.once(ee.any(this.onDidSave,this.onDidRevert))(()=>a.close()));this._register(ee.once(a.onDidClose)(()=>l.dispose()))}updateLastResolvedFileStat(t){let n=this.isReadonly();this.lastResolvedFileStat?this.lastResolvedFileStat.mtime<=t.mtime?this.lastResolvedFileStat=t:this.lastResolvedFileStat={...this.lastResolvedFileStat,readonly:t.readonly,locked:t.locked}:this.lastResolvedFileStat=t,this.isReadonly()!==n&&this._onDidChangeReadonly.fire()}async revert(t){if(!this.isResolved()||!this.dirty&&!t?.force)return;this.trace("revert()");let n=this.dirty,o=this.doSetDirty(!1);if(!t?.soft)try{await this.forceResolveFromFile()}catch(s){if(s.fileOperationResult!==1)throw o(),s}this._onDidRevert.fire(),n&&this._onDidChangeDirty.fire()}inConflictMode=!1;inErrorMode=!1;hasState(t){switch(t){case 3:return this.inConflictMode;case 1:return this.dirty;case 5:return this.inErrorMode;case 4:return this.isOrphaned();case 2:return this.saveSequentializer.isRunning();case 0:return!this.dirty}}async joinState(t){return this.saveSequentializer.running}isReadonly(){return this.filesConfigurationService.isReadonly(this.resource,this.lastResolvedFileStat)}trace(t){this.logService.trace(`[stored file working copy] ${t}`,this.resource.toString(),this.typeId)}dispose(){this.trace("dispose()"),this.inConflictMode=!1,this.inErrorMode=!1,this._model=void 0,super.dispose()}};Za=L([w(5,Gt),w(6,qt),w(7,xE),w(8,yE),w(9,Fd),w(10,Xa),w(11,Vs),w(12,IE),w(13,Ci),w(14,__),w(15,vE)],Za);var Xd=class extends A{constructor(t){super();this.logService=t}saveParticipants=[];get length(){return this.saveParticipants.length}addSaveParticipant(t){let n=Qp(this.saveParticipants,t);return le(()=>n())}async participate(t,n,o,r){t.model?.pushStackElement();for(let s of this.saveParticipants){if(r.isCancellationRequested||t.isDisposed())break;try{let a=s.participate(t,n,o,r);await Qc(a,r)}catch(a){this.logService.warn(a)}}t.model?.pushStackElement()}dispose(){this.saveParticipants.splice(0,this.saveParticipants.length),super.dispose()}};Xd=L([w(0,qt)],Xd);var xE=P("workingCopyFileService"),yp=class extends A{constructor(t,n,o,r){super();this.fileService=t;this.workingCopyService=n;this.instantiationService=o;this.uriIdentityService=r;this._register(this.registerWorkingCopyProvider(s=>this.workingCopyService.workingCopies.filter(a=>this.fileService.hasProvider(s)?this.uriIdentityService.extUri.isEqualOrParent(a.resource,s):this.uriIdentityService.extUri.isEqual(a.resource,s))))}_onWillRunWorkingCopyFileOperation=this._register(new Cl);onWillRunWorkingCopyFileOperation=this._onWillRunWorkingCopyFileOperation.event;_onDidFailWorkingCopyFileOperation=this._register(new Cl);onDidFailWorkingCopyFileOperation=this._onDidFailWorkingCopyFileOperation.event;_onDidRunWorkingCopyFileOperation=this._register(new Cl);onDidRunWorkingCopyFileOperation=this._onDidRunWorkingCopyFileOperation.event;correlationIds=0;create(t,n,o){return this.doCreateFileOrFolder(t,!0,n,o)}createFolder(t,n,o){return this.doCreateFileOrFolder(t,!1,n,o)}async doCreateFileOrFolder(t,n,o,r){if(t.length===0)return[];if(n){let u=(await Ki.settled(t.map(p=>this.fileService.canCreateFile(p.resource,{overwrite:p.overwrite})))).find(p=>p instanceof Error);if(u instanceof Error)throw u}let s=t.map(c=>({target:c.resource}));await this.runFileOperationParticipants(s,0,r,o);let a={correlationId:this.correlationIds++,operation:0,files:s};await this._onWillRunWorkingCopyFileOperation.fireAsync(a,Tt.None);let l;try{n?l=await Ki.settled(t.map(c=>this.fileService.createFile(c.resource,c.contents,{overwrite:c.overwrite}))):l=await Ki.settled(t.map(c=>this.fileService.createFolder(c.resource)))}catch(c){throw await this._onDidFailWorkingCopyFileOperation.fireAsync(a,Tt.None),c}return await this._onDidRunWorkingCopyFileOperation.fireAsync(a,Tt.None),l}async move(t,n,o){return this.doMoveOrCopy(t,!0,n,o)}async copy(t,n,o){return this.doMoveOrCopy(t,!1,n,o)}async doMoveOrCopy(t,n,o,r){let s=[];for(let{file:{source:c,target:u},overwrite:p}of t){let h=await(n?this.fileService.canMove(c,u,p):this.fileService.canCopy(c,u,p));if(h instanceof Error)throw h}let a=t.map(c=>c.file);await this.runFileOperationParticipants(a,n?2:3,r,o);let l={correlationId:this.correlationIds++,operation:n?2:3,files:a};await this._onWillRunWorkingCopyFileOperation.fireAsync(l,Tt.None);try{for(let{file:{source:c,target:u},overwrite:p}of t){if(!this.uriIdentityService.extUri.isEqual(c,u)){let h=n?[...this.getDirty(c),...this.getDirty(u)]:this.getDirty(u);await Ki.settled(h.map(m=>m.revert({soft:!0})))}n?s.push(await this.fileService.move(c,u,p)):s.push(await this.fileService.copy(c,u,p))}}catch(c){throw await this._onDidFailWorkingCopyFileOperation.fireAsync(l,Tt.None),c}return await this._onDidRunWorkingCopyFileOperation.fireAsync(l,Tt.None),s}async delete(t,n,o){for(let a of t){let l=await this.fileService.canDelete(a.resource,{recursive:a.recursive,useTrash:a.useTrash});if(l instanceof Error)throw l}let r=t.map(a=>({target:a.resource}));await this.runFileOperationParticipants(r,1,o,n);let s={correlationId:this.correlationIds++,operation:1,files:r};await this._onWillRunWorkingCopyFileOperation.fireAsync(s,Tt.None);for(let a of t){let l=this.getDirty(a.resource);await Ki.settled(l.map(c=>c.revert({soft:!0})))}try{for(let a of t)await this.fileService.del(a.resource,{recursive:a.recursive,useTrash:a.useTrash})}catch(a){throw await this._onDidFailWorkingCopyFileOperation.fireAsync(s,Tt.None),a}await this._onDidRunWorkingCopyFileOperation.fireAsync(s,Tt.None)}fileOperationParticipants=this._register(this.instantiationService.createInstance(jd));addFileOperationParticipant(t){return this.fileOperationParticipants.addFileOperationParticipant(t)}runFileOperationParticipants(t,n,o,r){return this.fileOperationParticipants.participate(t,n,o,r)}saveParticipants=this._register(this.instantiationService.createInstance(Xd));get hasSaveParticipants(){return this.saveParticipants.length>0}addSaveParticipant(t){return this.saveParticipants.addSaveParticipant(t)}runSaveParticipants(t,n,o,r){return this.saveParticipants.participate(t,n,o,r)}workingCopyProviders=[];registerWorkingCopyProvider(t){let n=Qp(this.workingCopyProviders,t);return le(n)}getDirty(t){let n=new Set;for(let o of this.workingCopyProviders)for(let r of o(t))r.isDirty()&&n.add(r);return Array.from(n)}};yp=L([w(0,Gt),w(1,Xa),w(2,Vt),w(3,Hs)],yp);zt(xE,yp,1);var k_=P("textFileService");var SE=".vscode",BF="settings",l6e=`${SE}/${BF}.json`;var d6e=[1],c6e=[2,3,4,5,6],WF=[3,4,5],u6e=[1,...WF],p6e=[2,3,4,5,6],UF=[3,4,5,6],VF=[4,5,6],Vf="tasks",L_="launch",R_=Object.create(null);R_[Vf]=`${SE}/${Vf}.json`;R_[L_]=`${SE}/${L_}.json`;var zF=Object.create(null);zF[Vf]=`${Vf}.json`;var h6e=$e;var EE=class extends Md{_currentResultGroups=new Map;updateResultGroup(e,t){return t?this._currentResultGroups.set(e,t):this._currentResultGroups.delete(e),this.removeDuplicateResults(),this.update()}removeDuplicateResults(){let e=new Set;[...this._currentResultGroups.keys()].sort((t,n)=>this._currentResultGroups.get(t).order-this._currentResultGroups.get(n).order).forEach(t=>{let n=this._currentResultGroups.get(t);n.result.filterMatches=n.result.filterMatches.filter(o=>!e.has(o.setting.key)),n.result.filterMatches.forEach(o=>e.add(o.setting.key))})}filterSettings(e,t,n){let o=this.filterGroups,r=[];for(let s of o){let a=t(s);for(let l of s.sections)for(let c of l.settings){let u=n(c,s);(a||u)&&r.push({setting:c,matches:u&&u.matches,matchType:u?.matchType??0,score:u?.score??0})}}return r}getPreference(e){for(let t of this.settingsGroups)for(let n of t.sections)for(let o of n.settings)if(e===o.key)return o}collectMetadata(e){let t=Object.create(null),n=!1;return e.forEach(o=>{o.result.metadata&&(t[o.id]=o.result.metadata,n=!0)}),n?t:null}get filterGroups(){return this.settingsGroups}};var Hf=class extends EE{constructor(t,n){super();this._defaultSettings=t;this._register(n.onDidChangeConfiguration(o=>{o.source===7&&(this.dirty=!0,this._onDidChangeGroups.fire())})),this._register(Ae.as(Mi.Configuration).onDidSchemaChange(o=>{this.dirty=!0,this._onDidChangeGroups.fire()}))}_onDidChangeGroups=this._register(new C);onDidChangeGroups=this._onDidChangeGroups.event;additionalGroups=[];dirty=!1;get filterGroups(){return this.settingsGroups.slice(1)}get settingsGroups(){let t=this._defaultSettings.getSettingsGroups(this.dirty);return this.dirty=!1,[...t,...this.additionalGroups]}setAdditionalGroups(t){this.additionalGroups=t}findValueMatches(t,n){return[]}update(){throw new Error("Not supported")}};Hf=L([w(1,$e)],Hf);function HF(i){return"// "+d("defaultKeybindingsHeader","Override key bindings by placing them into your key bindings file.")+`
`+i.getDefaultKeybindingsContent()}var Kf=class{constructor(e,t){this._uri=e;this.keybindingService=t}_content;get uri(){return this._uri}get content(){return this._content||(this._content=HF(this.keybindingService)),this._content}getPreference(){return null}dispose(){}};Kf=L([w(1,Us)],Kf);var eGe=P("preferencesService");var bp={EditorPane:"workbench.contributions.editors",EditorFactory:"workbench.contributions.editor.inputFactories"},O_={id:"default",displayName:d("promptOpenWith.defaultEditor.displayName","Text Editor"),providerDisplayName:d("builtinProviderDisplayName","Built-in")};function Wf(i,e,t){for(let n of t.visibleEditorPanes)if(n.group.id===e&&i.matches(n.input))return n.getViewState()}function T_(i){if(wn(i))return!1;let e=i;return N.isUri(e?.resource)}function Gr(i){if(wn(i))return!1;let e=i;return e?.original!==void 0&&e.modified!==void 0}function qd(i){if(wn(i))return!1;let e=i;return!e||e.resources&&!Array.isArray(e.resources)?!1:!!e.resources||!!e.multiDiffSource}function Js(i){if(wn(i)||Gr(i))return!1;let e=i;return e?.primary!==void 0&&e.secondary!==void 0}function Zs(i){if(wn(i))return!1;let e=i;return N.isUri(e?.base?.resource)&&N.isUri(e?.input1?.resource)&&N.isUri(e?.input2?.resource)&&N.isUri(e?.result?.resource)}var CE=class{mapIdToSaveSource=new Map;registerSource(e,t){let n=this.mapIdToSaveSource.get(e);return n||(n={source:e,label:t},this.mapIdToSaveSource.set(e,n)),n.source}getSourceLabel(e){return this.mapIdToSaveSource.get(e)?.label??e}},aqe=new CE;var Ip=class extends A{};function wn(i){return i instanceof Ip}function KF(i){let e=i;return N.isUri(e?.preferredResource)}function GF(i){let e=i;return wn(e?.primary)&&wn(e?.secondary)}function dE(i){let e=i;return wn(e?.modified)&&wn(e?.original)}var wE=class{getOriginalUri(e,t){if(!e)return;if(Zs(e))return Yd.getOriginalUri(e.result,t);if(t?.supportSideBySide){let{primary:o,secondary:r}=this.getSideEditors(e);if(o&&r){if(t?.supportSideBySide===3)return{primary:this.getOriginalUri(o,{filterByScheme:t.filterByScheme}),secondary:this.getOriginalUri(r,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===4)return this.getOriginalUri(o,{filterByScheme:t.filterByScheme})??this.getOriginalUri(r,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===1?o:r}}if(Gr(e)||qd(e)||Js(e)||Zs(e))return;let n=KF(e)?e.preferredResource:e.resource;return!n||!t||!t.filterByScheme?n:this.filterUri(n,t.filterByScheme)}getSideEditors(e){return GF(e)||Js(e)?{primary:e.primary,secondary:e.secondary}:dE(e)||Gr(e)?{primary:e.modified,secondary:e.original}:{primary:void 0,secondary:void 0}}getCanonicalUri(e,t){if(!e)return;if(Zs(e))return Yd.getCanonicalUri(e.result,t);if(t?.supportSideBySide){let{primary:o,secondary:r}=this.getSideEditors(e);if(o&&r){if(t?.supportSideBySide===3)return{primary:this.getCanonicalUri(o,{filterByScheme:t.filterByScheme}),secondary:this.getCanonicalUri(r,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===4)return this.getCanonicalUri(o,{filterByScheme:t.filterByScheme})??this.getCanonicalUri(r,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===1?o:r}}if(Gr(e)||qd(e)||Js(e)||Zs(e))return;let n=e.resource;return!n||!t||!t.filterByScheme?n:this.filterUri(n,t.filterByScheme)}filterUri(e,t){if(Array.isArray(t)){if(t.some(n=>e.scheme===n))return e}else if(t===e.scheme)return e}};var Yd=new wE;var TE=class{instantiationService;fileEditorFactory;editorSerializerConstructors=new Map;editorSerializerInstances=new Map;start(e){let t=this.instantiationService=e.get(Vt);for(let[n,o]of this.editorSerializerConstructors)this.createEditorSerializer(n,o,t);this.editorSerializerConstructors.clear()}createEditorSerializer(e,t,n){let o=n.createInstance(t);this.editorSerializerInstances.set(e,o)}registerFileEditorFactory(e){if(this.fileEditorFactory)throw new Error("Can only register one file editor factory.");this.fileEditorFactory=e}getFileEditorFactory(){return Rt(this.fileEditorFactory)}registerEditorSerializer(e,t){if(this.editorSerializerConstructors.has(e)||this.editorSerializerInstances.has(e))throw new Error(`A editor serializer with type ID '${e}' was already registered.`);return this.instantiationService?this.createEditorSerializer(e,t,this.instantiationService):this.editorSerializerConstructors.set(e,t),le(()=>{this.editorSerializerConstructors.delete(e),this.editorSerializerInstances.delete(e)})}getEditorSerializer(e){return this.editorSerializerInstances.get(typeof e=="string"?e:e.typeId)}};Ae.add(bp.EditorFactory,new TE);var _o=class extends Ip{_onDidChangeDirty=this._register(new C);_onDidChangeLabel=this._register(new C);_onDidChangeCapabilities=this._register(new C);_onWillDispose=this._register(new C);onDidChangeDirty=this._onDidChangeDirty.event;onDidChangeLabel=this._onDidChangeLabel.event;onDidChangeCapabilities=this._onDidChangeCapabilities.event;onWillDispose=this._onWillDispose.event;closeHandler;get editorId(){}get capabilities(){return 2}hasCapability(e){return e===0?this.capabilities===0:(this.capabilities&e)!==0}isReadonly(){return this.hasCapability(2)}getName(){return`Editor ${this.typeId}`}getDescription(e){}getTitle(e){return this.getName()}getLabelExtraClasses(){return[]}getAriaLabel(){return this.getTitle(0)}getIcon(){}getTelemetryDescriptor(){return{typeId:this.typeId}}isDirty(){return!1}isModified(){return this.isDirty()}isSaving(){return!1}async resolve(){return null}async save(e,t){return this}async saveAs(e,t){return this}async revert(e,t){}async rename(e,t){}copy(){return this}canMove(e,t){return!0}matches(e){if(wn(e))return this===e;let t=e.options?.override;return this.editorId!==t&&t!==void 0&&this.editorId!==void 0?!1:ei(this.resource,Yd.getCanonicalUri(e))}prefersEditorPane(e){return e.at(0)}toUntyped(e){}isDisposed(){return this._store.isDisposed}dispose(){this.isDisposed()||this._onWillDispose.fire(),super.dispose()}};var ur=P("lifecycleService");function A_(i){switch(i){case 1:return"Starting";case 2:return"Ready";case 3:return"Restored";case 4:return"Eventually"}}var M_=P("editorPaneService");var Gf;(e=>e.Workbench="workbench.contributions.kind")(Gf||={});var el=(o=>(o[o.BlockStartup=1]="BlockStartup",o[o.BlockRestore=2]="BlockRestore",o[o.AfterRestored=3]="AfterRestored",o[o.Eventually=4]="Eventually",o))(el||{});function N_(i){let e=i;return!!e&&typeof e.editorTypeId=="string"}function qF(i){switch(i){case 3:return el.AfterRestored;case 4:return el.Eventually}}function F_(i){switch(i){case el.BlockStartup:return 1;case el.BlockRestore:return 2;case el.AfterRestored:return 3;case el.Eventually:return 4}}var tl=class i extends A{static INSTANCE=new i;static BLOCK_BEFORE_RESTORE_WARN_THRESHOLD=20;static BLOCK_AFTER_RESTORE_WARN_THRESHOLD=100;instantiationService;lifecycleService;logService;environmentService;editorPaneService;contributionsByPhase=new Map;contributionsByEditor=new Map;contributionsById=new Map;instancesById=new Map;instanceDisposables=this._register(new re);timingsByPhase=new Map;get timings(){return this.timingsByPhase}pendingRestoredContributions=new us;whenRestored=this.pendingRestoredContributions.p;registerWorkbenchContribution2(e,t,n){let o={id:e,ctor:t};this.instantiationService&&this.lifecycleService&&this.logService&&this.environmentService&&this.editorPaneService&&(typeof n=="number"&&this.lifecycleService.phase>=n||typeof e=="string"&&N_(n)&&this.editorPaneService.didInstantiateEditorPane(n.editorTypeId))?this.safeCreateContribution(this.instantiationService,this.logService,this.environmentService,o,typeof n=="number"?F_(n):this.lifecycleService.phase):(typeof n=="number"&&Lc(this.contributionsByPhase,F_(n),[]).push(o),typeof e=="string"&&(this.contributionsById.has(e)?console.error(`IWorkbenchContributionsRegistry#registerWorkbenchContribution(): Can't register multiple contributions with same id '${e}'`):this.contributionsById.set(e,o),N_(n)&&Lc(this.contributionsByEditor,n.editorTypeId,[]).push(o)))}registerWorkbenchContribution(e,t){this.registerWorkbenchContribution2(void 0,e,qF(t))}getWorkbenchContribution(e){if(this.instancesById.has(e))return this.instancesById.get(e);let t=this.instantiationService,n=this.lifecycleService,o=this.logService,r=this.environmentService;if(!t||!n||!o||!r)throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): cannot be called before registry started`);let s=this.contributionsById.get(e);if(!s)throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): contribution with that identifier is unknown.`);n.phase<3&&o.warn(`IWorkbenchContributionsRegistry#getContribution('${e}'): contribution instantiated before LifecyclePhase.Restored!`),this.safeCreateContribution(t,o,r,s,n.phase);let a=this.instancesById.get(e);if(!a)throw new Error(`IWorkbenchContributionsRegistry#getContribution('${e}'): failed to create contribution.`);return a}start(e){let t=this.instantiationService=e.get(Vt),n=this.lifecycleService=e.get(ur),o=this.logService=e.get(qt),r=this.environmentService=e.get(An),s=this.editorPaneService=e.get(M_);this._register(n.onDidShutdown(()=>{this.instanceDisposables.clear()}));for(let a of[1,2,3,4])this.instantiateByPhase(t,n,o,r,a);for(let a of this.contributionsByEditor.keys())s.didInstantiateEditorPane(a)&&this.onEditor(a,t,n,o,r);this._register(s.onWillInstantiateEditorPane(a=>this.onEditor(a.typeId,t,n,o,r)))}onEditor(e,t,n,o,r){let s=this.contributionsByEditor.get(e);if(s){this.contributionsByEditor.delete(e);for(let a of s)this.safeCreateContribution(t,o,r,a,n.phase)}}instantiateByPhase(e,t,n,o,r){t.phase>=r?this.doInstantiateByPhase(e,n,o,r):t.when(r).then(()=>this.doInstantiateByPhase(e,n,o,r))}async doInstantiateByPhase(e,t,n,o){let r=this.contributionsByPhase.get(o);if(r)switch(this.contributionsByPhase.delete(o),o){case 1:case 2:{en(`code/willCreateWorkbenchContributions/${o}`);for(let s of r)this.safeCreateContribution(e,t,n,s,o);en(`code/didCreateWorkbenchContributions/${o}`);break}case 3:case 4:{o===4&&await this.pendingRestoredContributions.p,this.doInstantiateWhenIdle(r,e,t,n,o);break}}}doInstantiateWhenIdle(e,t,n,o,r){en(`code/willCreateWorkbenchContributions/${r}`);let s=0,a=r===4?3e3:500,l=c=>{for(;s<e.length;){let u=e[s++];if(this.safeCreateContribution(t,n,o,u,r),c.timeRemaining()<1){ps(l,a);break}}s===e.length&&(en(`code/didCreateWorkbenchContributions/${r}`),r===3&&this.pendingRestoredContributions.complete())};ps(l,a)}safeCreateContribution(e,t,n,o,r){if(typeof o.id=="string"&&this.instancesById.has(o.id))return;let s=Date.now();try{typeof o.id=="string"&&en(`code/willCreateWorkbenchContribution/${r}/${o.id}`);let a=e.createInstance(o.ctor);typeof o.id=="string"&&(this.instancesById.set(o.id,a),this.contributionsById.delete(o.id)),iw(a)&&this.instanceDisposables.add(a)}catch(a){t.error(`Unable to create workbench contribution '${o.id??o.ctor.name}'.`,a)}finally{typeof o.id=="string"&&en(`code/didCreateWorkbenchContribution/${r}/${o.id}`)}if(typeof o.id=="string"||!n.isBuilt){let a=Date.now()-s;if(a>(r<3?i.BLOCK_BEFORE_RESTORE_WARN_THRESHOLD:i.BLOCK_AFTER_RESTORE_WARN_THRESHOLD)&&t.warn(`Creation of workbench contribution '${o.id??o.ctor.name}' took ${a}ms.`),typeof o.id=="string"){let l=this.timingsByPhase.get(r);l||(l=[],this.timingsByPhase.set(r,l)),l.push([o.id,a])}}}},o$e=tl.INSTANCE.registerWorkbenchContribution2.bind(tl.INSTANCE),r$e=tl.INSTANCE.getWorkbenchContribution.bind(tl.INSTANCE);Ae.add(Gf.Workbench,tl.INSTANCE);function B_(i){switch(i){case 100:return"req";case 101:return"cancel";case 102:return"subscribe";case 103:return"unsubscribe"}}function W_(i){switch(i){case 200:return"init";case 201:return"reply:";case 202:case 203:return"replyErr:";case 204:return"event:"}}function Jd(i){let e=0;for(let t=0;;t+=7){let n=i.read(1);if(e|=(n.buffer[0]&127)<<t,!(n.buffer[0]&128))return e}}var $F=ea(0);function Zd(i,e){if(e===0){i.write($F);return}let t=0;for(let o=e;o!==0;o=o>>>7)t++;let n=ot.alloc(t);for(let o=0;e!==0;o++)n.buffer[o]=e&127,e=e>>>7,e>0&&(n.buffer[o]|=128);i.write(n)}var _E=class{constructor(e){this.buffer=e}pos=0;read(e){let t=this.buffer.slice(this.pos,this.pos+e);return this.pos+=t.byteLength,t}},LE=class{buffers=[];get buffer(){return ot.concat(this.buffers)}write(e){this.buffers.push(e)}};function ea(i){let e=ot.alloc(1);return e.writeUInt8(i,0),e}var nl={Undefined:ea(0),String:ea(1),Buffer:ea(2),VSBuffer:ea(3),Array:ea(4),Object:ea(5),Uint:ea(6)},jF=typeof Buffer<"u";function RE(i,e){if(typeof e>"u")i.write(nl.Undefined);else if(typeof e=="string"){let t=ot.fromString(e);i.write(nl.String),Zd(i,t.byteLength),i.write(t)}else if(jF&&Buffer.isBuffer(e)){let t=ot.wrap(e);i.write(nl.Buffer),Zd(i,t.byteLength),i.write(t)}else if(e instanceof ot)i.write(nl.VSBuffer),Zd(i,e.byteLength),i.write(e);else if(Array.isArray(e)){i.write(nl.Array),Zd(i,e.length);for(let t of e)RE(i,t)}else if(typeof e=="number"&&(e|0)===e)i.write(nl.Uint),Zd(i,e);else{let t=ot.fromString(JSON.stringify(e));i.write(nl.Object),Zd(i,t.byteLength),i.write(t)}}function PE(i){switch(i.read(1).readUInt8(0)){case 0:return;case 1:return i.read(Jd(i)).toString();case 2:return i.read(Jd(i)).buffer;case 3:return i.read(Jd(i));case 4:{let t=Jd(i),n=[];for(let o=0;o<t;o++)n.push(PE(i));return n}case 5:return JSON.parse(i.read(Jd(i)).toString());case 6:return Jd(i)}}var DE=class{constructor(e,t=null){this.protocol=e;this.protocolListener=this.protocol.onMessage(n=>this.onBuffer(n)),this.logger=t}isDisposed=!1;state=0;activeRequests=new Set;handlers=new Map;lastRequestId=0;protocolListener;logger;_onDidInitialize=new C;onDidInitialize=this._onDidInitialize.event;getChannel(e){let t=this;return{call(n,o,r){return t.isDisposed?Promise.reject(new Bn):t.requestPromise(e,n,o,r)},listen(n,o){return t.isDisposed?ee.None:t.requestEvent(e,n,o)}}}requestPromise(e,t,n,o=Tt.None){let r=this.lastRequestId++,a={id:r,type:100,channelName:e,name:t,arg:n};if(o.isCancellationRequested)return Promise.reject(new Bn);let l;return new Promise((u,p)=>{if(o.isCancellationRequested)return p(new Bn);let h=()=>{let b=E=>{switch(E.type){case 201:this.handlers.delete(r),u(E.data);break;case 202:{this.handlers.delete(r);let T=new Error(E.data.message);T.stack=Array.isArray(E.data.stack)?E.data.stack.join(`
`):E.data.stack,T.name=E.data.name,p(T);break}case 203:this.handlers.delete(r),p(E.data);break}};this.handlers.set(r,b),this.sendRequest(a)},m=null;this.state===1?h():(m=Yc(b=>this.whenInitialized()),m.then(()=>{m=null,h()}));let v=()=>{m?(m.cancel(),m=null):this.sendRequest({id:r,type:101}),p(new Bn)},f=o.onCancellationRequested(v);l=Tr(le(v),f),this.activeRequests.add(l)}).finally(()=>{l.dispose(),this.activeRequests.delete(l)})}requestEvent(e,t,n){let o=this.lastRequestId++,s={id:o,type:102,channelName:e,name:t,arg:n},a=null,l=new C({onWillAddFirstListener:()=>{a=Yc(u=>this.whenInitialized()),a.then(()=>{a=null,this.activeRequests.add(l),this.sendRequest(s)})},onDidRemoveLastListener:()=>{a?(a.cancel(),a=null):(this.activeRequests.delete(l),this.sendRequest({id:o,type:103}))}}),c=u=>l.fire(u.data);return this.handlers.set(o,c),l.event}sendRequest(e){switch(e.type){case 100:case 102:{let t=this.send([e.type,e.id,e.channelName,e.name],e.arg);this.logger?.logOutgoing(t,e.id,0,`${B_(e.type)}: ${e.channelName}.${e.name}`,e.arg);return}case 101:case 103:{let t=this.send([e.type,e.id]);this.logger?.logOutgoing(t,e.id,0,B_(e.type));return}}}send(e,t=void 0){let n=new LE;return RE(n,e),RE(n,t),this.sendBuffer(n.buffer)}sendBuffer(e){try{return this.protocol.send(e),e.byteLength}catch{return 0}}onBuffer(e){let t=new _E(e),n=PE(t),o=PE(t),r=n[0];switch(r){case 200:return this.logger?.logIncoming(e.byteLength,0,0,W_(r)),this.onResponse({type:n[0]});case 201:case 202:case 204:case 203:return this.logger?.logIncoming(e.byteLength,n[1],0,W_(r),o),this.onResponse({type:n[0],id:n[1],data:o})}}onResponse(e){if(e.type===200){this.state=1,this._onDidInitialize.fire();return}this.handlers.get(e.id)?.(e)}get onDidInitializePromise(){return ee.toPromise(this.onDidInitialize)}whenInitialized(){return this.state===1?Promise.resolve():this.onDidInitializePromise}dispose(){this.isDisposed=!0,this.protocolListener&&(this.protocolListener.dispose(),this.protocolListener=null),ft(this.activeRequests.values()),this.activeRequests.clear()}};L([q],DE.prototype,"onDidInitializePromise",1);var YF;(o=>{function i(r,s,a){let l=r,c=a&&a.disableMarshalling,u=new Map;for(let p in l)t(p)&&u.set(p,ee.buffer(l[p],!0,void 0,s));return new class{listen(p,h,m){let v=u.get(h);if(v)return v;let f=l[h];if(typeof f=="function"){if(n(h))return f.call(l,m);if(t(h))return u.set(h,ee.buffer(l[h],!0,void 0,s)),u.get(h)}throw new Ir(`Event not found: ${h}`)}call(p,h,m){let v=l[h];if(typeof v=="function"){if(!c&&Array.isArray(m))for(let b=0;b<m.length;b++)m[b]=$l(m[b]);let f=v.apply(l,m);return f instanceof Promise||(f=Promise.resolve(f)),f}throw new Ir(`Method not found: ${h}`)}}}o.fromService=i;function e(r,s){let a=s&&s.disableMarshalling;return new Proxy({},{get(l,c){if(typeof c=="string")return s?.properties?.has(c)?s.properties.get(c):n(c)?function(u){return r.listen(c,u)}:t(c)?r.listen(c):async function(...u){let p;s&&!Dn(s.context)?p=[s.context,...u]:p=u;let h=await r.call(c,p);return a?h:$l(h)};throw new Ir(`Property not found: ${String(c)}`)}})}o.toService=e;function t(r){return r[0]==="o"&&r[1]==="n"&&Dv(r.charCodeAt(2))}function n(r){return/^onDynamic/.test(r)&&Dv(r.charCodeAt(9))}})(YF||={});var QF="diagnosticsService",H$e=P(QF);var XF;(s=>{s.enableDiagnostics=!1,s.records=[];let t=new WeakMap,n=0;function o(a,l){if(!t.has(a)){let c=String(++n);t.set(a,c)}return t.get(a)}function r(a,l,c,u){}s.traceSocketEvent=r})(XF||={});var aje=P("remoteAuthorityResolverService");var vje=P("remoteSocketFactoryService");var JF="signService",xje=P(JF);var Jje=30*1e3;var qf=P("remoteAgentService"),vYe=new class{maxSampleCount=5;sampleDelay=2e3;initial=[];maxInitialCount=3;average=[];maxAverageCount=100;highLatencyMultiple=2;highLatencyMinThreshold=500;highLatencyMaxThreshold=1500;lastMeasurement=void 0;get latency(){return this.lastMeasurement}async measure(i){let e=1/0;for(let n=0;n<this.maxSampleCount;n++){let o=await i.getRoundTripTime();if(o===void 0)return;e=Math.min(e,o/2),await pi(this.sampleDelay)}this.average.push(e),this.average.length>this.maxAverageCount&&this.average.shift();let t;return this.initial.length<this.maxInitialCount?this.initial.push(e):t=this.initial.reduce((n,o)=>n+o,0)/this.initial.length,this.lastMeasurement={initial:t,current:e,average:this.average.reduce((n,o)=>n+o,0)/this.average.length,high:typeof t>"u"?!1:e>this.highLatencyMaxThreshold||e>this.highLatencyMinThreshold&&e>t*this.highLatencyMultiple},this.lastMeasurement}};var HYe=Object.freeze({id:"application",order:100,title:d("applicationConfigurationTitle","Application"),type:"object"}),Xf=Object.freeze({id:"workbench",order:7,title:d("workbenchConfigurationTitle","Workbench"),type:"object"}),ZF=Object.freeze({id:"security",scope:1,title:d("securityConfigurationTitle","Security"),type:"object",order:7}),KYe=Object.freeze({id:"problems",title:d("problemsConfigurationTitle","Problems"),type:"object",order:101}),e2=Object.freeze({id:"window",order:8,title:d("windowConfigurationTitle","Window"),type:"object"}),t2={ConfigurationMigration:"base.contributions.configuration.migration"},OE=class{migrations=[];_onDidRegisterConfigurationMigrations=new C;onDidRegisterConfigurationMigration=this._onDidRegisterConfigurationMigrations.event;registerConfigurationMigrations(e){this.migrations.push(...e)}},Qf=new OE;Ae.add(t2.ConfigurationMigration,Qf);var $f=class extends A{constructor(t,n){super();this.configurationService=t;this.workspaceService=n;this._register(this.workspaceService.onDidChangeWorkspaceFolders(async o=>{for(let r of o.added)await this.migrateConfigurationsForFolder(r,Qf.migrations)})),this.migrateConfigurations(Qf.migrations),this._register(Qf.onDidRegisterConfigurationMigration(o=>this.migrateConfigurations(o)))}static ID="workbench.contrib.configurationMigration";async migrateConfigurations(t){await this.migrateConfigurationsForFolder(void 0,t);for(let n of this.workspaceService.getWorkspace().folders)await this.migrateConfigurationsForFolder(n,t)}async migrateConfigurationsForFolder(t,n){await Promise.all([n.map(o=>this.migrateConfigurationsForFolderAndOverride(o,t?.uri))])}async migrateConfigurationsForFolderAndOverride(t,n){let o=this.configurationService.inspect(t.key,{resource:n}),r=this.workspaceService.getWorkbenchState()===3?[["user",2],["userLocal",3],["userRemote",4],["workspace",5],["workspaceFolder",6]]:[["user",2],["userLocal",3],["userRemote",4],["workspace",5]];for(let[s,a]of r){let l=o[s];if(!l)continue;let c=[];if(l.value!==void 0){let u=await this.runMigration(t,s,l.value,n,void 0);for(let p of u??[])c.push([p,[]])}for(let{identifiers:u,value:p}of l.overrides??[])if(p!==void 0){let h=await this.runMigration(t,s,p,n,u);for(let m of h??[])c.push([m,u])}c.length&&await Promise.allSettled(c.map(async([[u,p],h])=>this.configurationService.updateValue(u,p.value,{resource:n,overrideIdentifiers:h},a)))}}async runMigration(t,n,o,r,s){let a=c=>{let p=this.configurationService.inspect(c,{resource:r})[n];if(p)return s?p.overrides?.find(({identifiers:h})=>Rn(h,s))?.value:p.value},l=await t.migrateFn(o,a);return Array.isArray(l)?l:[[t.key,l]]}};$f=L([w(0,$e),w(1,_t)],$f);var jf=class extends A{constructor(t){super();this.remoteAgentService=t;this.create()}static ID="workbench.contrib.dynamicWorkbenchSecurityConfiguration";_ready=new us;ready=this._ready.p;async create(){try{await this.doCreate()}finally{this._ready.complete()}}async doCreate(){if(!Ye&&(await this.remoteAgentService.getEnvironment())?.os!==1)return;Ae.as(Mi.Configuration).registerConfiguration({...ZF,properties:{"security.allowedUNCHosts":{type:"array",items:{type:"string",pattern:"^[^\\\\]+$",patternErrorMessage:d("security.allowedUNCHosts.patternErrorMessage","UNC host names must not contain backslashes.")},default:[],markdownDescription:d("security.allowedUNCHosts","A set of UNC host names (without leading or trailing backslash, for example `192.168.0.1` or `my-server`) to allow without user confirmation. If a UNC host is being accessed that is not allowed via this setting or has not been acknowledged via user confirmation, an error will occur and the operation stopped. A restart is required when changing this setting. Find out more about this setting at https://aka.ms/vscode-windows-unc."),scope:2},"security.restrictUNCAccess":{type:"boolean",default:!0,markdownDescription:d("security.restrictUNCAccess","If enabled, only allows access to UNC host names that are allowed by the `#security.allowedUNCHosts#` setting or after user confirmation. Find out more about this setting at https://aka.ms/vscode-windows-unc."),scope:2}}})}};jf=L([w(0,qf)],jf);var xp="window.newWindowProfile",Yf=class extends A{constructor(t,n){super();this.userDataProfilesService=t;this.configurationService=n;this.registerNewWindowProfileConfiguration(),this._register(this.userDataProfilesService.onDidChangeProfiles(o=>this.registerNewWindowProfileConfiguration())),this.setNewWindowProfile(),this.checkAndResetNewWindowProfileConfig(),this._register(n.onDidChangeConfiguration(o=>{o.source!==7&&o.affectsConfiguration(xp)&&this.setNewWindowProfile()})),this._register(this.userDataProfilesService.onDidChangeProfiles(()=>this.checkAndResetNewWindowProfileConfig()))}static ID="workbench.contrib.dynamicWindowConfiguration";configurationNode;newWindowProfile;registerNewWindowProfileConfiguration(){let t=Ae.as(Mi.Configuration),n={...e2,properties:{[xp]:{type:["string","null"],default:null,enum:[...this.userDataProfilesService.profiles.map(o=>o.name),null],enumItemLabels:[...this.userDataProfilesService.profiles.map(o=>""),d("active window","Active Window")],description:d("newWindowProfile","Specifies the profile to use when opening a new window. If a profile name is provided, the new window will use that profile. If no profile name is provided, the new window will use the profile of the active window or the Default profile if no active window exists."),scope:1}}};this.configurationNode?t.updateConfigurations({add:[n],remove:[this.configurationNode]}):t.registerConfiguration(n),this.configurationNode=n}setNewWindowProfile(){let t=this.configurationService.getValue(xp);this.newWindowProfile=t?this.userDataProfilesService.profiles.find(n=>n.name===t):void 0}checkAndResetNewWindowProfileConfig(){let t=this.configurationService.getValue(xp);if(!t)return;let n=this.newWindowProfile?this.userDataProfilesService.profiles.find(o=>o.id===this.newWindowProfile.id):void 0;t!==n?.name&&this.configurationService.updateValue(xp,n?.name)}};Yf=L([w(0,DD),w(1,$e)],Yf);var U_=P("editorResolverService");var n2=Ae.as(Mi.Configuration),i2={...Xf,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:d("editor.editorAssociations",'Configure [glob patterns](https://aka.ms/vscode-glob-patterns) to editors (for example `"*.hex": "hexEditor.hexedit"`). These have precedence over the default behavior.'),additionalProperties:{type:"string"}}}};n2.registerConfiguration(i2);var eo=new K("workbenchState",void 0,{type:"string",description:d("workbenchState","The kind of workspace opened in the window, either 'empty' (no workspace), 'folder' (single folder) or 'workspace' (multi-root workspace)")}),V_=new K("workspaceFolderCount",0,d("workspaceFolderCount","The number of root folders in the workspace")),il=new K("openFolderWorkspaceSupport",!0,!0),pr=new K("enterMultiRootWorkspaceSupport",!0,!0),Jf=new K("emptyWorkspaceSupport",!0,!0),KQe=new K("dirtyWorkingCopies",!1,d("dirtyWorkingCopies","Whether there are any working copies with unsaved changes")),GQe=new K("remoteName","",d("remoteName","The name of the remote the window is connected to or an empty string if not connected to any remote")),qQe=new K("virtualWorkspace","",d("virtualWorkspace","The scheme of the current workspace is from a virtual file system or an empty string.")),$Qe=new K("temporaryWorkspace",!1,d("temporaryWorkspace","The scheme of the current workspace is from a temporary file system.")),z_=new K("isFullscreen",!1,d("isFullscreen","Whether the main window is in fullscreen mode")),jQe=new K("isAuxiliaryWindowFocusedContext",!1,d("isAuxiliaryWindowFocusedContext","Whether an auxiliary window is focused")),YQe=new K("hasWebFileSystemAccess",!1,!0),QQe=new K("embedderIdentifier",void 0,d("embedderIdentifier","The identifier of the embedder according to the product service, if one is defined")),XQe=new K("activeEditorIsDirty",!1,d("activeEditorIsDirty","Whether the active editor has unsaved changes")),JQe=new K("activeEditorIsNotPreview",!1,d("activeEditorIsNotPreview","Whether the active editor is not in preview mode")),ZQe=new K("activeEditorIsFirstInGroup",!1,d("activeEditorIsFirstInGroup","Whether the active editor is the first one in its group")),eXe=new K("activeEditorIsLastInGroup",!1,d("activeEditorIsLastInGroup","Whether the active editor is the last one in its group")),tXe=new K("activeEditorIsPinned",!1,d("activeEditorIsPinned","Whether the active editor is pinned")),nXe=new K("activeEditorIsReadonly",!1,d("activeEditorIsReadonly","Whether the active editor is read-only")),iXe=new K("activeCompareEditorCanSwap",!1,d("activeCompareEditorCanSwap","Whether the active compare editor can swap sides")),oXe=new K("activeEditorCanToggleReadonly",!0,d("activeEditorCanToggleReadonly","Whether the active editor can toggle between being read-only or writeable")),rXe=new K("activeEditorCanRevert",!1,d("activeEditorCanRevert","Whether the active editor can revert")),sXe=new K("activeEditorCanSplitInGroup",!0),aXe=new K("activeEditor",null,{type:"string",description:d("activeEditor","The identifier of the active editor")}),lXe=new K("activeEditorAvailableEditorIds","",d("activeEditorAvailableEditorIds","The available editor identifiers that are usable for the active editor")),dXe=new K("textCompareEditorVisible",!1,d("textCompareEditorVisible","Whether a text compare editor is visible")),cXe=new K("textCompareEditorActive",!1,d("textCompareEditorActive","Whether a text compare editor is active")),uXe=new K("sideBySideEditorActive",!1,d("sideBySideEditorActive","Whether a side by side editor is active")),pXe=new K("groupEditorsCount",0,d("groupEditorsCount","The number of opened editor groups")),hXe=new K("activeEditorGroupEmpty",!1,d("activeEditorGroupEmpty","Whether the active editor group is empty")),gXe=new K("activeEditorGroupIndex",0,d("activeEditorGroupIndex","The index of the active editor group")),mXe=new K("activeEditorGroupLast",!1,d("activeEditorGroupLast","Whether the active editor group is the last group")),fXe=new K("activeEditorGroupLocked",!1,d("activeEditorGroupLocked","Whether the active editor group is locked")),o2=new K("multipleEditorGroups",!1,d("multipleEditorGroups","Whether there are multiple editor groups opened")),bXe=o2.toNegated(),vXe=new K("multipleEditorsSelectedInGroup",!1,d("multipleEditorsSelectedInGroup","Whether multiple editors have been selected in an editor group")),yXe=new K("twoEditorsSelectedInGroup",!1,d("twoEditorsSelectedInGroup","Whether exactly two editors have been selected in an editor group")),IXe=new K("SelectedEditorsInGroupFileOrUntitledResourceContextKey",!0,d("SelectedEditorsInGroupFileOrUntitledResourceContextKey","Whether all selected editors in a group have a file or untitled resource associated")),r2=new K("editorPartMultipleEditorGroups",!1,d("editorPartMultipleEditorGroups","Whether there are multiple editor groups opened in an editor part")),xXe=r2.toNegated(),SXe=new K("editorPartMaximizedEditorGroup",!1,d("editorPartEditorGroupMaximized","Editor Part has a maximized group")),EXe=new K("isAuxiliaryEditorPart",!1,d("isAuxiliaryEditorPart","Editor Part is in an auxiliary window")),CXe=new K("editorIsOpen",!1,d("editorIsOpen","Whether an editor is open")),wXe=new K("inZenMode",!1,d("inZenMode","Whether Zen mode is enabled")),TXe=new K("isCenteredLayout",!1,d("isMainEditorCenteredLayout","Whether centered layout is enabled for the main editor")),kXe=new K("splitEditorsVertically",!1,d("splitEditorsVertically","Whether editors split vertically")),DXe=new K("mainEditorAreaVisible",!0,d("mainEditorAreaVisible","Whether the editor area in the main window is visible")),_Xe=new K("editorTabsVisible",!0,d("editorTabsVisible","Whether editor tabs are visible")),LXe=new K("sideBarVisible",!1,d("sideBarVisible","Whether the sidebar is visible")),RXe=new K("sideBarFocus",!1,d("sideBarFocus","Whether the sidebar has keyboard focus")),PXe=new K("activeViewlet","",d("activeViewlet","The identifier of the active viewlet")),OXe=new K("statusBarFocused",!1,d("statusBarFocused","Whether the status bar has keyboard focus")),AXe=new K("titleBarStyle",St?"native":"custom",d("titleBarStyle","Style of the window title bar")),MXe=new K("titleBarVisible",!1,d("titleBarVisible","Whether the title bar is visible")),NXe=new K("bannerFocused",!1,d("bannerFocused","Whether the banner has keyboard focus")),FXe=new K("notificationFocus",!0,d("notificationFocus","Whether a notification has keyboard focus")),BXe=new K("notificationCenterVisible",!1,d("notificationCenterVisible","Whether the notifications center is visible")),WXe=new K("notificationToastsVisible",!1,d("notificationToastsVisible","Whether a notification toast is visible")),UXe=new K("activeAuxiliary","",d("activeAuxiliary","The identifier of the active auxiliary panel")),VXe=new K("auxiliaryBarFocus",!1,d("auxiliaryBarFocus","Whether the auxiliary bar has keyboard focus")),zXe=new K("auxiliaryBarVisible",!1,d("auxiliaryBarVisible","Whether the auxiliary bar is visible")),HXe=new K("activePanel","",d("activePanel","The identifier of the active panel")),KXe=new K("panelFocus",!1,d("panelFocus","Whether the panel has keyboard focus")),GXe=new K("panelPosition","bottom",d("panelPosition","The position of the panel, always 'bottom'")),qXe=new K("panelAlignment","center",d("panelAlignment","The alignment of the panel, either 'center', 'left', 'right' or 'justify'")),$Xe=new K("panelVisible",!1,d("panelVisible","Whether the panel is visible")),jXe=new K("panelMaximized",!1,d("panelMaximized","Whether the panel is maximized")),YXe=new K("focusedView","",d("focusedView","The identifier of the view that has keyboard focus"));var wi=class{constructor(e,t,n,o){this._contextKeyService=e;this._fileService=t;this._languageService=n;this._modelService=o;this._schemeKey=wi.Scheme.bindTo(this._contextKeyService),this._filenameKey=wi.Filename.bindTo(this._contextKeyService),this._dirnameKey=wi.Dirname.bindTo(this._contextKeyService),this._pathKey=wi.Path.bindTo(this._contextKeyService),this._langIdKey=wi.LangId.bindTo(this._contextKeyService),this._resourceKey=wi.Resource.bindTo(this._contextKeyService),this._extensionKey=wi.Extension.bindTo(this._contextKeyService),this._hasResource=wi.HasResource.bindTo(this._contextKeyService),this._isFileSystemResource=wi.IsFileSystemResource.bindTo(this._contextKeyService),this._disposables.add(t.onDidChangeFileSystemProviderRegistrations(()=>{let r=this.get();this._isFileSystemResource.set(!!(r&&t.hasProvider(r)))})),this._disposables.add(o.onModelAdded(r=>{ei(r.uri,this.get())&&this._setLangId()})),this._disposables.add(o.onModelLanguageChanged(r=>{ei(r.model.uri,this.get())&&this._setLangId()}))}static Scheme=new K("resourceScheme",void 0,{type:"string",description:d("resourceScheme","The scheme of the resource")});static Filename=new K("resourceFilename",void 0,{type:"string",description:d("resourceFilename","The file name of the resource")});static Dirname=new K("resourceDirname",void 0,{type:"string",description:d("resourceDirname","The folder name the resource is contained in")});static Path=new K("resourcePath",void 0,{type:"string",description:d("resourcePath","The full path of the resource")});static LangId=new K("resourceLangId",void 0,{type:"string",description:d("resourceLangId","The language identifier of the resource")});static Resource=new K("resource",void 0,{type:"URI",description:d("resource","The full value of the resource including scheme and path")});static Extension=new K("resourceExtname",void 0,{type:"string",description:d("resourceExtname","The extension name of the resource")});static HasResource=new K("resourceSet",void 0,{type:"boolean",description:d("resourceSet","Whether a resource is present or not")});static IsFileSystemResource=new K("isFileSystemResource",void 0,{type:"boolean",description:d("isFileSystemResource","Whether the resource is backed by a file system provider")});_disposables=new re;_value;_resourceKey;_schemeKey;_filenameKey;_dirnameKey;_pathKey;_langIdKey;_extensionKey;_hasResource;_isFileSystemResource;dispose(){this._disposables.dispose()}_setLangId(){let e=this.get();if(!e){this._langIdKey.set(null);return}let t=this._modelService.getModel(e)?.getLanguageId()??this._languageService.guessLanguageIdByFilepathOrFirstLine(e);this._langIdKey.set(t)}set(e){e=e??void 0,!ei(this._value,e)&&(this._value=e,this._contextKeyService.bufferChangeEvents(()=>{this._resourceKey.set(e?e.toString():null),this._schemeKey.set(e?e.scheme:null),this._filenameKey.set(e?Ri(e):null),this._dirnameKey.set(e?this.uriToPath(Al(e)):null),this._pathKey.set(e?this.uriToPath(e):null),this._setLangId(),this._extensionKey.set(e?Mh(e):null),this._hasResource.set(!!e),this._isFileSystemResource.set(e?this._fileService.hasProvider(e):!1)}))}uriToPath(e){return e.scheme===H.file?e.fsPath:e.path}reset(){this._value=void 0,this._contextKeyService.bufferChangeEvents(()=>{this._resourceKey.reset(),this._schemeKey.reset(),this._filenameKey.reset(),this._dirnameKey.reset(),this._pathKey.reset(),this._langIdKey.reset(),this._extensionKey.reset(),this._hasResource.reset(),this._isFileSystemResource.reset()})}get(){return this._value}};wi=L([w(0,Qo),w(1,Gt),w(2,Pt),w(3,Zi)],wi);var tJe=new K("isMac",Se,d("isMac","Whether the operating system is macOS")),nJe=new K("isLinux",St,d("isLinux","Whether the operating system is Linux")),iJe=new K("isWindows",Ye,d("isWindows","Whether the operating system is Windows")),H_=new K("isWeb",At,d("isWeb","Whether the platform is a web browser")),ol=new K("isMacNative",Se&&!At,d("isMacNative","Whether the operating system is macOS on a non-browser platform")),K_=new K("isIOS",es,d("isIOS","Whether the operating system is iOS")),oJe=new K("isMobile",$C,d("isMobile","Whether the platform is a mobile web browser")),G_=new K("isDevelopment",!1,!0),rJe=new K("productQualityType","",d("productQualityType","Quality type of VS Code")),s2="inputFocus",sJe=new K(s2,!1,d("inputFocus","Whether keyboard focus is inside an input box"));var a2=/(?:\/|^)(?:([^\/]+)\/)?([^\/]+)$/;function ec(i,e,t,n,o){if(Fe.isThemeIcon(o))return[`codicon-${o.id}`,"predefined-file-icon"];if(N.isUri(o))return[];let r=n===2?["rootfolder-icon"]:n===1?["folder-icon"]:["file-icon"];if(t){let s;if(t.scheme===H.data)s=Ml.parseMetaData(t).get(Ml.META_DATA_LABEL);else{let a=t.path.match(a2);a?(s=Zf(a[2].toLowerCase()),a[1]&&r.push(`${Zf(a[1].toLowerCase())}-name-dir-icon`)):s=Zf(t.authority.toLowerCase())}if(n===2)r.push(`${s}-root-name-folder-icon`);else if(n===1)r.push(`${s}-name-folder-icon`);else{if(s){if(r.push(`${s}-name-file-icon`),r.push("name-file-icon"),s.length<=255){let l=s.split(".");for(let c=1;c<l.length;c++)r.push(`${l.slice(c).join(".")}-ext-file-icon`)}r.push("ext-file-icon")}let a=l2(i,e,t);a&&r.push(`${Zf(a)}-lang-file-icon`)}}return r}function l2(i,e,t){if(!t)return null;let n=null;if(t.scheme===H.data){let r=Ml.parseMetaData(t).get(Ml.META_DATA_MIME);r&&(n=e.getLanguageIdByMimeType(r))}else{let o=i.getModel(t);o&&(n=o.getLanguageId())}return n&&n!==Ni?n:e.guessLanguageIdByFilepathOrFirstLine(t)}function Zf(i){return i.replace(/[\s]/g,"/")}var $_="inQuickOpen",$Je=new K($_,!1,d("inQuickOpen","Whether keyboard focus is inside the quick open control")),ME=xe.has($_),d2="inFilesPicker",jJe=xe.and(ME,xe.has(d2));function NE(i,e){return t=>{let n=t.get(Us),o=t.get(zs),s={keybindings:n.lookupKeybindings(i)};o.navigate(!!e,s)}}var eb=class extends A{constructor(t,n){super();this.editorService=t;this.editorGroupsService=n}_editorViewState=void 0;openedTransientEditors=new Set;set(){if(this._editorViewState)return;let t=this.editorService.activeEditorPane;t&&(this._editorViewState={group:t.group,editor:t.input,state:gD(t.getControl())?.saveViewState()??void 0})}async openTransientEditor(t,n){t.options={...t.options,transient:!0};let o=await this.editorService.openEditor(t,n);return o?.input&&o.input!==this._editorViewState?.editor&&o.group.isTransient(o.input)&&this.openedTransientEditors.add(o.input),o}async restore(){if(this._editorViewState){for(let t of this.openedTransientEditors)if(!t.isDirty())for(let n of this.editorGroupsService.groups)n.isTransient(t)&&await n.closeEditor(t,{preserveFocus:!0});await this._editorViewState.group.openEditor(this._editorViewState.editor,{viewState:this._editorViewState.state,preserveFocus:!0}),this.reset()}}reset(){this._editorViewState=void 0,this.openedTransientEditors.clear()}dispose(){super.dispose(),this.reset()}};eb=L([w(0,Ci),w(1,$d)],eb);var Tn=P("hostService");var Q_="inRecentFilesPicker",tb=class extends Nt{removeFromRecentlyOpened={iconClass:Fe.asClassName(j.removeClose),tooltip:d("remove","Remove from Recently Opened")};dirtyRecentlyOpenedFolder={iconClass:"dirty-workspace "+Fe.asClassName(j.closeDirty),tooltip:d("dirtyRecentlyOpenedFolder","Folder With Unsaved Files"),alwaysVisible:!0};dirtyRecentlyOpenedWorkspace={...this.dirtyRecentlyOpenedFolder,tooltip:d("dirtyRecentlyOpenedWorkspace","Workspace With Unsaved Files")};constructor(e){super(e)}async run(e){let t=e.get(ko),n=e.get(zs),o=e.get(_t),r=e.get(ir),s=e.get(Us),a=e.get(Zi),l=e.get(Pt),c=e.get(Tn),u=e.get(Gs),p=await t.getRecentlyOpened(),h=await t.getDirtyWorkspaces(),m=!1,v=new bt,f=new bt;for(let V of h)yS(V)?v.set(V.folderUri,!0):(f.set(V.workspace.configPath,V.workspace),m=!0);let b=new bt,E=new bt;for(let V of p.workspaces)Ad(V)?b.set(V.folderUri,!0):(E.set(V.workspace.configPath,V.workspace),m=!0);let T=[];for(let V of p.workspaces){let X=Ad(V)?v.has(V.folderUri):f.has(V.workspace.configPath);T.push(this.toQuickPick(a,l,r,V,X))}for(let V of h)yS(V)&&!b.has(V.folderUri)?T.push(this.toQuickPick(a,l,r,V,!0)):UD(V)&&!E.has(V.workspace.configPath)&&T.push(this.toQuickPick(a,l,r,V,!0));let _=p.files.map(V=>this.toQuickPick(a,l,r,V,!1)),O=p.workspaces[0],M=O&&o.isCurrentWorkspace(Od(O)?O.workspace:O.folderUri),U,he={type:"separator",label:m?d("workspacesAndFolders","folders & workspaces"):d("folders","folders")},Q={type:"separator",label:d("files","files")},se=[he,...T,Q,..._],ne=await n.pick(se,{contextKey:Q_,activeItem:[...T,..._][M?1:0],placeHolder:Se?d("openRecentPlaceholderMac","Select to open (hold Cmd-key to force new window or Option-key for same window)"):d("openRecentPlaceholder","Select to open (hold Ctrl-key to force new window or Alt-key for same window)"),matchOnDescription:!0,onKeyMods:V=>U=V,quickNavigate:this.isQuickNavigate()?{keybindings:s.lookupKeybindings(this.desc.id)}:void 0,hideInput:this.isQuickNavigate(),onDidTriggerItemButton:async V=>{if(V.button===this.removeFromRecentlyOpened)await t.removeRecentlyOpened([V.item.resource]),V.removeItem();else if(V.button===this.dirtyRecentlyOpenedFolder||V.button===this.dirtyRecentlyOpenedWorkspace){let X=V.button===this.dirtyRecentlyOpenedWorkspace,{confirmed:Ce}=await u.confirm({title:X?d("dirtyWorkspace","Workspace with Unsaved Files"):d("dirtyFolder","Folder with Unsaved Files"),message:X?d("dirtyWorkspaceConfirm","Do you want to open the workspace to review the unsaved files?"):d("dirtyFolderConfirm","Do you want to open the folder to review the unsaved files?"),detail:X?d("dirtyWorkspaceConfirmDetail","Workspaces with unsaved files cannot be removed until all unsaved files have been saved or reverted."):d("dirtyFolderConfirmDetail","Folders with unsaved files cannot be removed until all unsaved files have been saved or reverted.")});Ce&&(c.openWindow([V.item.openable],{remoteAuthority:V.item.remoteAuthority||null}),n.cancel())}}});if(ne)return c.openWindow([ne.openable],{forceNewWindow:U?.ctrlCmd,forceReuseWindow:U?.alt,remoteAuthority:ne.remoteAuthority||null})}toQuickPick(e,t,n,o,r){let s,a,l,c,u=!1;Ad(o)?(c=o.folderUri,a=ec(e,t,c,1),s={folderUri:c},l=o.label||n.getWorkspaceLabel(c,{verbose:2})):Od(o)?(c=o.workspace.configPath,a=ec(e,t,c,2),s={workspaceUri:c},l=o.label||n.getWorkspaceLabel(o.workspace,{verbose:2}),u=!0):(c=o.fileUri,a=ec(e,t,c,0),s={fileUri:c},l=o.label||n.getUriLabel(c));let{name:p,parentPath:h}=kg(l);return{iconClasses:a,label:p,ariaLabel:r?u?d("recentDirtyWorkspaceAriaLabel","{0}, workspace with unsaved changes",p):d("recentDirtyFolderAriaLabel","{0}, folder with unsaved changes",p):p,description:h,buttons:r?[u?this.dirtyRecentlyOpenedWorkspace:this.dirtyRecentlyOpenedFolder]:[this.removeFromRecentlyOpened],openable:s,resource:c,remoteAuthority:o.remoteAuthority}}},tc=class i extends tb{static ID="workbench.action.openRecent";constructor(){super({id:i.ID,title:{...Xe("openRecent","Open Recent..."),mnemonicTitle:d({key:"miMore",comment:["&& denotes a mnemonic"]},"&&More...")},category:Qi.File,f1:!0,keybinding:{weight:200,primary:2096,mac:{primary:304}},menu:{id:Lt.MenubarRecentMenu,group:"y_more",order:1}})}isQuickNavigate(){return!1}},FE=class extends tb{constructor(){super({id:"workbench.action.quickOpenRecent",title:Xe("quickOpenRecent","Quick Open Recent..."),category:Qi.File,f1:!1})}isQuickNavigate(){return!0}},BE=class extends Nt{constructor(){super({id:"workbench.action.toggleFullScreen",title:{...Xe("toggleFullScreen","Toggle Full Screen"),mnemonicTitle:d({key:"miToggleFullScreen",comment:["&& denotes a mnemonic"]},"&&Full Screen")},category:Qi.View,f1:!0,keybinding:{weight:200,primary:69,mac:{primary:2340}},precondition:K_.toNegated(),toggled:z_,menu:[{id:Lt.MenubarAppearanceMenu,group:"1_toggle_view",order:1}]})}run(e){return e.get(Tn).toggleFullScreen(Ca())}},WE=class i extends Nt{static ID="workbench.action.reloadWindow";constructor(){super({id:i.ID,title:Xe("reloadWindow","Reload Window"),category:Qi.Developer,f1:!0,keybinding:{weight:250,when:G_,primary:2096}})}async run(e){return e.get(Tn).reload()}},UE=class extends Nt{constructor(){super({id:"workbench.action.showAboutDialog",title:{...Xe("about","About"),mnemonicTitle:d({key:"miAbout",comment:["&& denotes a mnemonic"]},"&&About")},category:Qi.Help,f1:!0,menu:{id:Lt.MenubarHelpMenu,group:"z_about",order:1,when:ol.toNegated()}})}run(e){return e.get(Gs).about()}},VE=class extends Nt{constructor(){super({id:"workbench.action.newWindow",title:{...Xe("newWindow","New Window"),mnemonicTitle:d({key:"miNewWindow",comment:["&& denotes a mnemonic"]},"New &&Window")},f1:!0,keybinding:{weight:200,primary:At?Ye?Dl(2089,1068):3628:3116,secondary:At?[3116]:void 0},menu:{id:Lt.MenubarFileMenu,group:"1_new",order:3}})}run(e){return e.get(Tn).openWindow({remoteAuthority:null})}},zE=class extends Nt{constructor(){super({id:"workbench.action.blur",title:Xe("blur","Remove keyboard focus from focused element")})}run(){let e=Ea();on(e)&&e.blur()}};Ht(VE);Ht(BE);Ht(FE);Ht(tc);Ht(WE);Ht(UE);Ht(zE);var X_=xe.and(ME,xe.has(Q_)),j_="workbench.action.quickOpenNavigateNextInRecentFilesPicker";za.registerCommandAndKeybindingRule({id:j_,weight:250,handler:NE(j_,!0),when:X_,primary:2096,mac:{primary:304}});var Y_="workbench.action.quickOpenNavigatePreviousInRecentFilesPicker";za.registerCommandAndKeybindingRule({id:Y_,weight:250,handler:NE(Y_,!1),when:X_,primary:3120,mac:{primary:1328}});yt.registerCommand("workbench.action.toggleConfirmBeforeClose",i=>{let e=i.get($e),t=e.inspect("window.confirmBeforeClose").userValue;return e.updateValue("window.confirmBeforeClose",t==="never"?"keyboardOnly":"never")});Cn.appendMenuItem(Lt.MenubarFileMenu,{group:"z_ConfirmClose",command:{id:"workbench.action.toggleConfirmBeforeClose",title:d("miConfirmClose","Confirm Before Close"),toggled:xe.notEquals("config.window.confirmBeforeClose","never")},order:1,when:H_});Cn.appendMenuItem(Lt.MenubarFileMenu,{title:d({key:"miOpenRecent",comment:["&& denotes a mnemonic"]},"Open &&Recent"),submenu:Lt.MenubarRecentMenu,group:"2_open",order:4});var rl=P("workspaceEditingService");function J_(i){return i.scheme!==H.file&&i.scheme!==H.vscodeRemote}function p2(i){if(i.folders.length)return i.folders.every(e=>J_(e.uri))?i.folders[0].uri:void 0;if(i.configuration&&J_(i.configuration))return i.configuration}function Z_(i){return p2(i)?.scheme}var to=An;var nb=P("pathService"),nc=class{constructor(e,t,n,o){this.localUserHome=e;this.remoteAgentService=t;this.environmentService=n;this.contextService=o;this.resolveOS=(async()=>(await this.remoteAgentService.getEnvironment())?.os||ts)(),this.resolveUserHome=(async()=>{let r=await this.remoteAgentService.getEnvironment();return this.maybeUnresolvedUserHome=r?.userHome??e})()}resolveOS;resolveUserHome;maybeUnresolvedUserHome;hasValidBasename(e,t,n){return typeof t=="string"||typeof t>"u"?this.resolveOS.then(o=>this.doHasValidBasename(e,o,t)):this.doHasValidBasename(e,t,n)}doHasValidBasename(e,t,n){return e.scheme===H.file||e.scheme===H.vscodeRemote?qw(n??Ri(e),t===1):!0}get defaultUriScheme(){return nc.findDefaultUriScheme(this.environmentService,this.contextService)}static findDefaultUriScheme(e,t){if(e.remoteAuthority)return H.vscodeRemote;let n=Z_(t.getWorkspace());if(n)return n;let o=t.getWorkspace().folders[0];if(o)return o.uri.scheme;let r=t.getWorkspace().configuration;return r?r.scheme:H.file}userHome(e){return e?.preferLocal?this.localUserHome:this.resolveUserHome}get resolvedUserHome(){return this.maybeUnresolvedUserHome}get path(){return this.resolveOS.then(e=>e===1?Et:Be)}async fileURI(e){let t="";if(await this.resolveOS===1&&(e=e.replace(/\\/g,"/")),e[0]==="/"&&e[1]==="/"){let o=e.indexOf("/",2);o===-1?(t=e.substring(2),e="/"):(t=e.substring(2,o),e=e.substring(o)||"/")}return N.from({scheme:H.file,authority:t,path:e,query:"",fragment:""})}};nc=L([w(1,qf),w(2,to),w(3,_t)],nc);var ib="addRootFolder",eL=Xe("addFolderToWorkspace","Add Folder to Workspace..."),HE="setRootFolder",KE="_workbench.pickWorkspaceFolder";yt.registerCommand({id:"workbench.action.files.openFileFolderInNewWindow",handler:i=>i.get(Ji).pickFileFolderAndOpen({forceNewWindow:!0})});yt.registerCommand({id:"_files.pickFolderAndOpen",handler:(i,e)=>i.get(Ji).pickFolderAndOpen(e)});yt.registerCommand({id:"workbench.action.files.openFolderInNewWindow",handler:i=>i.get(Ji).pickFolderAndOpen({forceNewWindow:!0})});yt.registerCommand({id:"workbench.action.files.openFileInNewWindow",handler:i=>i.get(Ji).pickFileAndOpen({forceNewWindow:!0})});yt.registerCommand({id:"workbench.action.openWorkspaceInNewWindow",handler:i=>i.get(Ji).pickWorkspaceAndOpen({forceNewWindow:!0})});yt.registerCommand({id:ib,handler:async i=>{let e=i.get(rl),t=await tL(i);!t||!t.length||await e.addFolders(t.map(n=>({uri:n})))}});yt.registerCommand({id:HE,handler:async i=>{let e=i.get(rl),t=i.get(_t),n=await tL(i);!n||!n.length||await e.updateFolders(0,t.getWorkspace().folders.length,n.map(o=>({uri:o})))}});async function tL(i){let e=i.get(Ji),t=i.get(nb);return await e.showOpenDialog({openLabel:Tg(d({key:"add",comment:["&& denotes a mnemonic"]},"&&Add")),title:d("addFolderToWorkspaceTitle","Add Folder to Workspace"),canSelectFolders:!0,canSelectMany:!0,defaultUri:await e.defaultFolderPath(),availableFileSystems:[t.defaultUriScheme]})}yt.registerCommand(KE,async function(i,e){let t=i.get(zs),n=i.get(ir),o=i.get(_t),r=i.get(Zi),s=i.get(Pt),a=o.getWorkspace().folders;if(!a.length)return;let l=a.map(h=>{let m=h.name,v=n.getUriLabel(Al(h.uri),{relative:!0});return{label:m,description:v!==m?v:void 0,folder:h,iconClasses:ec(r,s,h.uri,2)}}),c=(e?e[0]:void 0)||Object.create(null);c.activeItem||(c.activeItem=l[0]),c.placeHolder||(c.placeHolder=d("workspaceFolderPickerPlaceholder","Select workspace folder")),typeof c.matchOnDescription!="boolean"&&(c.matchOnDescription=!0);let u=(e?e[1]:void 0)||Tt.None,p=await t.pick(l,c,u);if(p)return a[l.indexOf(p)]});yt.registerCommand({id:"vscode.openFolder",handler:(i,e,t)=>{let n=i.get(qn);if(typeof t=="boolean"&&(t={forceNewWindow:t}),!e){let a={forceNewWindow:t?.forceNewWindow};return t?.forceLocalWindow&&(a.remoteAuthority=null,a.availableFileSystems=["file"]),n.executeCommand("_files.pickFolderAndOpen",a)}let o=N.from(e,!0),r={forceNewWindow:t?.forceNewWindow,forceReuseWindow:t?.forceReuseWindow,noRecentEntry:t?.noRecentEntry,remoteAuthority:t?.forceLocalWindow?null:void 0,forceProfile:t?.forceProfile,forceTempProfile:t?.forceTempProfile},s=sm(o)||o.scheme===H.untitled?{workspaceUri:o}:{folderUri:o};return n.executeCommand("_files.windowOpen",[s],r)},metadata:{description:"Open a folder or workspace in the current window or new window depending on the newWindow argument. Note that opening in the same window will shutdown the current extension host process and start a new one on the given folder/workspace unless the newWindow parameter is set to true.",args:[{name:"uri",description:"(optional) Uri of the folder or workspace file to open. If not provided, a native dialog will ask the user for the folder",constraint:i=>i==null||i instanceof N},{name:"options",description:"(optional) Options. Object with the following properties: `forceNewWindow`: Whether to open the folder/workspace in a new window or the same. Defaults to opening in the same window. `forceReuseWindow`: Whether to force opening the folder/workspace in the same window.  Defaults to false. `noRecentEntry`: Whether the opened URI will appear in the 'Open Recent' list. Defaults to false. Note, for backward compatibility, options can also be of type boolean, representing the `forceNewWindow` setting.",constraint:i=>i===void 0||typeof i=="object"||typeof i=="boolean"}]}});yt.registerCommand({id:"vscode.newWindow",handler:(i,e)=>{let t=i.get(qn),n={forceReuseWindow:e&&e.reuseWindow,remoteAuthority:e&&e.remoteAuthority};return t.executeCommand("_files.newWindow",n)},metadata:{description:"Opens an new window depending on the newWindow argument.",args:[{name:"options",description:"(optional) Options. Object with the following properties: `reuseWindow`: Whether to open a new window or the same. Defaults to opening in a new window. ",constraint:i=>i===void 0||typeof i=="object"}]}});yt.registerCommand("_workbench.removeFromRecentlyOpened",function(i,e){return i.get(ko).removeRecentlyOpened([e])});yt.registerCommand({id:"vscode.removeFromRecentlyOpened",handler:(i,e)=>{let t=i.get(ko);return typeof e=="string"?e=e.match(/^[^:/?#]+:\/\//)?N.parse(e):N.file(e):e=N.revive(e),t.removeRecentlyOpened([e])},metadata:{description:"Removes an entry with the given path from the recently opened list.",args:[{name:"path",description:"URI or URI string to remove from recently opened.",constraint:i=>typeof i=="string"||i instanceof N}]}});yt.registerCommand("_workbench.addToRecentlyOpened",async function(i,e){let t=i.get(ko),n=e.uri,o=e.label,r=e.remoteAuthority,s;return e.type==="workspace"?s={workspace:await t.getWorkspaceIdentifier(n),label:o,remoteAuthority:r}:e.type==="folder"?s={folderUri:n,label:o,remoteAuthority:r}:s={fileUri:n,label:o,remoteAuthority:r},t.addRecentlyOpened([s])});yt.registerCommand("_workbench.getRecentlyOpened",async function(i){return i.get(ko).getRecentlyOpened()});var sc=Xe("workspaces","Workspaces"),ob=class i extends Nt{static ID="workbench.action.files.openFile";constructor(){super({id:i.ID,title:Xe("openFile","Open File..."),category:Qi.File,f1:!0,keybinding:{when:ol.toNegated(),weight:200,primary:2093}})}async run(e,t){return e.get(Ji).pickFileAndOpen({forceNewWindow:!1,telemetryExtraData:t})}},ic=class i extends Nt{static ID="workbench.action.files.openFolder";constructor(){super({id:i.ID,title:Xe("openFolder","Open Folder..."),category:Qi.File,f1:!0,precondition:il,keybinding:{weight:200,primary:void 0,linux:{primary:Dl(2089,2093)},win:{primary:Dl(2089,2093)}}})}async run(e,t){return e.get(Ji).pickFolderAndOpen({forceNewWindow:!1,telemetryExtraData:t})}},oc=class i extends Nt{static ID="workbench.action.files.openFolderViaWorkspace";constructor(){super({id:i.ID,title:Xe("openFolder","Open Folder..."),category:Qi.File,f1:!0,precondition:xe.and(il.toNegated(),eo.isEqualTo("workspace")),keybinding:{weight:200,primary:2093}})}run(e){return e.get(qn).executeCommand(HE)}},rc=class i extends Nt{static ID="workbench.action.files.openFileFolder";static LABEL=Xe("openFileFolder","Open...");constructor(){super({id:i.ID,title:i.LABEL,category:Qi.File,f1:!0,precondition:xe.and(ol,il),keybinding:{weight:200,primary:2093}})}async run(e,t){return e.get(Ji).pickFileFolderAndOpen({forceNewWindow:!1,telemetryExtraData:t})}},rb=class i extends Nt{static ID="workbench.action.openWorkspace";constructor(){super({id:i.ID,title:Xe("openWorkspaceAction","Open Workspace from File..."),category:Qi.File,f1:!0,precondition:pr})}async run(e,t){return e.get(Ji).pickWorkspaceAndOpen({telemetryExtraData:t})}},Sp=class i extends Nt{static ID="workbench.action.closeFolder";constructor(){super({id:i.ID,title:Xe("closeWorkspace","Close Workspace"),category:sc,f1:!0,precondition:xe.and(eo.notEqualsTo("empty"),Jf),keybinding:{weight:200,primary:Dl(2089,36)}})}async run(e){let t=e.get(Tn),n=e.get(to);return t.openWindow({forceReuseWindow:!0,remoteAuthority:n.remoteAuthority})}},GE=class i extends Nt{static ID="workbench.action.openWorkspaceConfigFile";constructor(){super({id:i.ID,title:Xe("openWorkspaceConfigFile","Open Workspace Configuration File"),category:sc,f1:!0,precondition:eo.isEqualTo("workspace")})}async run(e){let t=e.get(_t),n=e.get(Ci),o=t.getWorkspace().configuration;o&&await n.openEditor({resource:o,options:{pinned:!0}})}},qE=class i extends Nt{static ID="workbench.action.addRootFolder";constructor(){super({id:i.ID,title:eL,category:sc,f1:!0,precondition:xe.or(pr,eo.isEqualTo("workspace"))})}run(e){return e.get(qn).executeCommand(ib)}},$E=class i extends Nt{static ID="workbench.action.removeRootFolder";constructor(){super({id:i.ID,title:Xe("globalRemoveFolderFromWorkspace","Remove Folder from Workspace..."),category:sc,f1:!0,precondition:xe.and(V_.notEqualsTo("0"),xe.or(pr,eo.isEqualTo("workspace")))})}async run(e){let t=e.get(qn),n=e.get(rl),o=await t.executeCommand(KE);o&&await n.removeFolders([o.uri])}},sb=class i extends Nt{static ID="workbench.action.saveWorkspaceAs";constructor(){super({id:i.ID,title:Xe("saveWorkspaceAsAction","Save Workspace As..."),category:sc,f1:!0,precondition:pr})}async run(e){let t=e.get(rl),n=e.get(_t),o=await t.pickNewWorkspacePath();if(o&&sm(o))switch(n.getWorkbenchState()){case 1:case 2:{let r=n.getWorkspace().folders.map(s=>({uri:s.uri}));return t.createAndEnterWorkspace(r,o)}case 3:return t.saveAndEnterWorkspace(o)}}},ab=class i extends Nt{static ID="workbench.action.duplicateWorkspaceInNewWindow";constructor(){super({id:i.ID,title:Xe("duplicateWorkspaceInNewWindow","Duplicate As Workspace in New Window"),category:sc,f1:!0,precondition:pr})}async run(e){let t=e.get(_t),n=e.get(rl),o=e.get(Tn),r=e.get(ko),s=e.get(to),a=t.getWorkspace().folders,l=s.remoteAuthority,c=await r.createUntitledWorkspace(a,l);return await n.copyWorkspaceSettings(c),o.openWindow([{workspaceUri:c.configPath}],{forceNewWindow:!0,remoteAuthority:l})}};Ht(qE);Ht($E);Ht(ob);Ht(ic);Ht(oc);Ht(rc);Ht(rb);Ht(GE);Ht(Sp);Ht(sb);Ht(ab);Cn.appendMenuItem(Lt.MenubarFileMenu,{group:"2_open",command:{id:ob.ID,title:d({key:"miOpenFile",comment:["&& denotes a mnemonic"]},"&&Open File...")},order:1,when:ol.toNegated()});Cn.appendMenuItem(Lt.MenubarFileMenu,{group:"2_open",command:{id:ic.ID,title:d({key:"miOpenFolder",comment:["&& denotes a mnemonic"]},"Open &&Folder...")},order:2,when:il});Cn.appendMenuItem(Lt.MenubarFileMenu,{group:"2_open",command:{id:oc.ID,title:d({key:"miOpenFolder",comment:["&& denotes a mnemonic"]},"Open &&Folder...")},order:2,when:xe.and(il.toNegated(),eo.isEqualTo("workspace"))});Cn.appendMenuItem(Lt.MenubarFileMenu,{group:"2_open",command:{id:rc.ID,title:d({key:"miOpen",comment:["&& denotes a mnemonic"]},"&&Open...")},order:1,when:xe.and(ol,il)});Cn.appendMenuItem(Lt.MenubarFileMenu,{group:"2_open",command:{id:rb.ID,title:d({key:"miOpenWorkspace",comment:["&& denotes a mnemonic"]},"Open Wor&&kspace from File...")},order:3,when:pr});Cn.appendMenuItem(Lt.MenubarFileMenu,{group:"3_workspace",command:{id:ib,title:d({key:"miAddFolderToWorkspace",comment:["&& denotes a mnemonic"]},"A&&dd Folder to Workspace...")},when:xe.or(pr,eo.isEqualTo("workspace")),order:1});Cn.appendMenuItem(Lt.MenubarFileMenu,{group:"3_workspace",command:{id:sb.ID,title:d("miSaveWorkspaceAs","Save Workspace As...")},order:2,when:pr});Cn.appendMenuItem(Lt.MenubarFileMenu,{group:"3_workspace",command:{id:ab.ID,title:d("duplicateWorkspace","Duplicate Workspace")},order:3,when:pr});Cn.appendMenuItem(Lt.MenubarFileMenu,{group:"6_close",command:{id:Sp.ID,title:d({key:"miCloseFolder",comment:["&& denotes a mnemonic"]},"Close &&Folder")},order:3,when:xe.and(eo.isEqualTo("folder"),Jf)});Cn.appendMenuItem(Lt.MenubarFileMenu,{group:"6_close",command:{id:Sp.ID,title:d({key:"miCloseWorkspace",comment:["&& denotes a mnemonic"]},"Close &&Workspace")},order:3,when:xe.and(eo.isEqualTo("workspace"),Jf)});var Ro=class i{constructor(e,t){this.storageService=t;this.id=i.COMMON_PREFIX+e}static applicationMementos=new Map;static profileMementos=new Map;static workspaceMementos=new Map;static COMMON_PREFIX="memento/";id;getMemento(e,t){switch(e){case 1:{let n=i.workspaceMementos.get(this.id);return n||(n=new Ep(this.id,e,t,this.storageService),i.workspaceMementos.set(this.id,n)),n.getMemento()}case 0:{let n=i.profileMementos.get(this.id);return n||(n=new Ep(this.id,e,t,this.storageService),i.profileMementos.set(this.id,n)),n.getMemento()}case-1:{let n=i.applicationMementos.get(this.id);return n||(n=new Ep(this.id,e,t,this.storageService),i.applicationMementos.set(this.id,n)),n.getMemento()}}}onDidChangeValue(e,t){return this.storageService.onDidChangeValue(e,this.id,t)}saveMemento(){i.workspaceMementos.get(this.id)?.save(),i.profileMementos.get(this.id)?.save(),i.applicationMementos.get(this.id)?.save()}reloadMemento(e){let t;switch(e){case-1:t=i.applicationMementos.get(this.id);break;case 0:t=i.profileMementos.get(this.id);break;case 1:t=i.workspaceMementos.get(this.id);break}t?.reload()}static clear(e){switch(e){case 1:i.workspaceMementos.clear();break;case 0:i.profileMementos.clear();break;case-1:i.applicationMementos.clear();break}}},Ep=class{constructor(e,t,n,o){this.id=e;this.scope=t;this.target=n;this.storageService=o;this.mementoObj=this.doLoad()}mementoObj;doLoad(){try{return this.storageService.getObject(this.id,this.scope,{})}catch(e){Ne(`[memento]: failed to parse contents: ${e} (id: ${this.id}, scope: ${this.scope}, contents: ${this.storageService.get(this.id,this.scope)})`)}return{}}getMemento(){return this.mementoObj}reload(){for(let e of Object.getOwnPropertyNames(this.mementoObj))delete this.mementoObj[e];Object.assign(this.mementoObj,this.doLoad())}save(){ba(this.mementoObj)?this.storageService.remove(this.id,this.scope):this.storageService.store(this.id,this.mementoObj,this.scope,this.target)}};var Cp=class extends ef{constructor(t,n,o){super(n);this.id=t;this.memento=new Ro(this.id,o),this._register(o.onWillSaveState(()=>{this.saveState(),this.memento.saveMemento()}))}memento;getId(){return this.id}getMemento(t,n){return this.memento.getMemento(t,n)}reloadMemento(t){return this.memento.reloadMemento(t)}onDidChangeMementoValue(t,n){return this.memento.onDidChangeValue(t,n)}saveState(){}};var lb=class extends Cp{constructor(t,n,o,r){super(t,o,r);this.telemetryService=n}_onTitleAreaUpdate=this._register(new C);onTitleAreaUpdate=this._onTitleAreaUpdate.event;_onDidFocus;get onDidFocus(){return this._onDidFocus||(this._onDidFocus=this.registerFocusTrackEvents().onDidFocus),this._onDidFocus.event}_onDidBlur;get onDidBlur(){return this._onDidBlur||(this._onDidBlur=this.registerFocusTrackEvents().onDidBlur),this._onDidBlur.event}_hasFocus=!1;hasFocus(){return this._hasFocus}registerFocusTrackEvents(){let t=Rt(this.getContainer()),n=this._register(Ul(t)),o=this._onDidFocus=this._register(new C);this._register(n.onDidFocus(()=>{this._hasFocus=!0,o.fire()}));let r=this._onDidBlur=this._register(new C);return this._register(n.onDidBlur(()=>{this._hasFocus=!1,r.fire()})),{onDidFocus:o,onDidBlur:r}}actionRunner;visible=!1;parent;getTitle(){}create(t){this.parent=t}getContainer(){return this.parent}setVisible(t){this.visible!==!!t&&(this.visible=t)}focus(){}getMenuIds(){return[]}getActions(){return[]}getSecondaryActions(){return[]}getContextMenuActions(){return[]}getActionViewItem(t,n){}getActionsContext(){return null}getActionRunner(){return this.actionRunner||(this.actionRunner=this._register(new Da)),this.actionRunner}updateTitleArea(){this._onTitleAreaUpdate.fire()}isVisible(){return this.visible}getControl(){}};var ait={separatorBorder:B.transparent};var db;(o=>{o.Distribute={type:"distribute"};function e(r){return{type:"split",index:r}}o.Split=e;function t(r){return{type:"auto",index:r}}o.Auto=t;function n(r){return{type:"invisible",cachedVisibleSize:r}}o.Invisible=n})(db||={});var _it={separatorBorder:B.transparent};var g2;(o=>{o.Distribute={type:"distribute"},o.Split={type:"split"},o.Auto={type:"auto"};function n(r){return{type:"invisible",cachedVisibleSize:r}}o.Invisible=n})(g2||={});async function iL(i){let e=navigator.usb;if(!e)return;let t=await e.requestDevice({filters:i?.filters??[]});if(t)return{deviceClass:t.deviceClass,deviceProtocol:t.deviceProtocol,deviceSubclass:t.deviceSubclass,deviceVersionMajor:t.deviceVersionMajor,deviceVersionMinor:t.deviceVersionMinor,deviceVersionSubminor:t.deviceVersionSubminor,manufacturerName:t.manufacturerName,productId:t.productId,productName:t.productName,serialNumber:t.serialNumber,usbVersionMajor:t.usbVersionMajor,usbVersionMinor:t.usbVersionMinor,usbVersionSubminor:t.usbVersionSubminor,vendorId:t.vendorId}}async function oL(i){let e=navigator.serial;if(!e)return;let t=await e.requestPort({filters:i?.filters??[]});if(!t)return;let n=t.getInfo();return{usbVendorId:n.usbVendorId,usbProductId:n.usbProductId}}async function rL(i){let e=navigator.hid;if(!e)return;let t=await e.requestDevice({filters:i?.filters??[]});if(!t.length)return;let n=t[0];return{opened:n.opened,vendorId:n.vendorId,productId:n.productId,productName:n.productName,collections:n.collections}}var m2=60,f2=m2*60,jE=f2*24,tot=jE*7,not=jE*30,iot=jE*365;function sL(i){return i.getFullYear()+"-"+String(i.getMonth()+1).padStart(2,"0")+"-"+String(i.getDate()).padStart(2,"0")+"T"+String(i.getHours()).padStart(2,"0")+":"+String(i.getMinutes()).padStart(2,"0")+":"+String(i.getSeconds()).padStart(2,"0")+"."+(i.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}var Tp=/^([^.]+\..+)[:=](.+)$/,dt=class{constructor(e,t,n){this._args=e;this.paths=t;this.productService=n}get appRoot(){return fl(hn.asFileUri("").fsPath)}get userHome(){return N.file(this.paths.homeDir)}get userDataPath(){return this.paths.userDataDir}get appSettingsHome(){return N.file(Jn(this.userDataPath,"User"))}get tmpDir(){return N.file(this.paths.tmpDir)}get cacheHome(){return N.file(this.userDataPath)}get stateResource(){return Oe(this.appSettingsHome,"globalStorage","storage.json")}get userRoamingDataHome(){return this.appSettingsHome.with({scheme:H.vscodeUserData})}get userDataSyncHome(){return Oe(this.appSettingsHome,"sync")}get logsHome(){if(!this.args.logsPath){let e=sL(new Date).replace(/-|:|\.\d+Z$/g,"");this.args.logsPath=Jn(this.userDataPath,"logs",e)}return N.file(this.args.logsPath)}get sync(){return this.args.sync}get machineSettingsResource(){return Oe(N.file(Jn(this.userDataPath,"Machine")),"settings.json")}get workspaceStorageHome(){return Oe(this.appSettingsHome,"workspaceStorage")}get localHistoryHome(){return Oe(this.appSettingsHome,"History")}get keyboardLayoutResource(){return Oe(this.userRoamingDataHome,"keyboardLayout.json")}get argvResource(){let e=Cr.VSCODE_PORTABLE;return e?N.file(Jn(e,"argv.json")):Oe(this.userHome,this.productService.dataFolderName,"argv.json")}get isExtensionDevelopment(){return!!this.args.extensionDevelopmentPath}get untitledWorkspacesHome(){return N.file(Jn(this.userDataPath,"Workspaces"))}get builtinExtensionsPath(){let e=this.args["builtin-extensions-dir"];return e?gl(e):No(Jn(hn.asFileUri("").fsPath,"..","extensions"))}get extensionsDownloadLocation(){let e=this.args["extensions-download-dir"];return e?N.file(gl(e)):N.file(Jn(this.userDataPath,"CachedExtensionVSIXs"))}get extensionsPath(){let e=this.args["extensions-dir"];if(e)return gl(e);let t=Cr.VSCODE_EXTENSIONS;if(t)return t;let n=Cr.VSCODE_PORTABLE;return n?Jn(n,"extensions"):Oe(this.userHome,this.productService.dataFolderName,"extensions").fsPath}get extensionDevelopmentLocationURI(){let e=this.args.extensionDevelopmentPath;if(Array.isArray(e))return e.map(t=>/^[^:/?#]+?:\/\//.test(t)?N.parse(t):N.file(No(t)))}get extensionDevelopmentKind(){return this.args.extensionDevelopmentKind?.map(e=>e==="ui"||e==="workspace"||e==="web"?e:"workspace")}get extensionTestsLocationURI(){let e=this.args.extensionTestsPath;if(e)return/^[^:/?#]+?:\/\//.test(e)?N.parse(e):N.file(No(e))}get disableExtensions(){if(this.args["disable-extensions"])return!0;let e=this.args["disable-extension"];if(e){if(typeof e=="string")return[e];if(Array.isArray(e)&&e.length>0)return e}return!1}get debugExtensionHost(){return b2(this.args,this.isBuilt)}get debugRenderer(){return!!this.args.debugRenderer}get isBuilt(){return!Cr.VSCODE_DEV}get verbose(){return!!this.args.verbose}get logLevel(){return this.args.log?.find(e=>!Tp.test(e))}get extensionLogLevel(){let e=[];for(let t of this.args.log||[]){let n=Tp.exec(t);n&&n[1]&&n[2]&&e.push([n[1],n[2]])}return e.length?e:void 0}get serviceMachineIdResource(){return Oe(N.file(this.userDataPath),"machineid")}get crashReporterId(){return this.args["crash-reporter-id"]}get crashReporterDirectory(){return this.args["crash-reporter-directory"]}get disableTelemetry(){return!!this.args["disable-telemetry"]}get disableWorkspaceTrust(){return!!this.args["disable-workspace-trust"]}get useInMemorySecretStorage(){return!!this.args["use-inmemory-secretstorage"]}get policyFile(){if(this.args["__enable-file-policy"]){let e=Cr.VSCODE_PORTABLE;return e?N.file(Jn(e,"policy.json")):Oe(this.userHome,this.productService.dataFolderName,"policy.json")}}editSessionId=this.args.editSessionId;get continueOn(){return this.args.continueOn}set continueOn(e){this.args.continueOn=e}get args(){return this._args}};L([q],dt.prototype,"appRoot",1),L([q],dt.prototype,"userHome",1),L([q],dt.prototype,"userDataPath",1),L([q],dt.prototype,"appSettingsHome",1),L([q],dt.prototype,"tmpDir",1),L([q],dt.prototype,"cacheHome",1),L([q],dt.prototype,"stateResource",1),L([q],dt.prototype,"userRoamingDataHome",1),L([q],dt.prototype,"userDataSyncHome",1),L([q],dt.prototype,"sync",1),L([q],dt.prototype,"machineSettingsResource",1),L([q],dt.prototype,"workspaceStorageHome",1),L([q],dt.prototype,"localHistoryHome",1),L([q],dt.prototype,"keyboardLayoutResource",1),L([q],dt.prototype,"argvResource",1),L([q],dt.prototype,"isExtensionDevelopment",1),L([q],dt.prototype,"untitledWorkspacesHome",1),L([q],dt.prototype,"builtinExtensionsPath",1),L([q],dt.prototype,"extensionsPath",1),L([q],dt.prototype,"extensionDevelopmentLocationURI",1),L([q],dt.prototype,"extensionDevelopmentKind",1),L([q],dt.prototype,"extensionTestsLocationURI",1),L([q],dt.prototype,"debugExtensionHost",1),L([q],dt.prototype,"logLevel",1),L([q],dt.prototype,"extensionLogLevel",1),L([q],dt.prototype,"serviceMachineIdResource",1),L([q],dt.prototype,"disableTelemetry",1),L([q],dt.prototype,"disableWorkspaceTrust",1),L([q],dt.prototype,"useInMemorySecretStorage",1),L([q],dt.prototype,"policyFile",1);function b2(i,e){return v2(i["inspect-extensions"],i["inspect-brk-extensions"],5870,e,i.debugId,i.extensionEnvironment)}function v2(i,e,t,n,o,r){let a=Number(e||i)||(n?null:t),l=a?!!e:!1,c;if(r)try{c=JSON.parse(r)}catch{}return{port:a,break:l,debugId:o,env:c}}var aL=An,Ve=class{constructor(e,t,n,o){this.workspaceId=e;this.logsHome=t;this.options=n;this.productService=o;if(n.workspaceProvider&&Array.isArray(n.workspaceProvider.payload))try{this.payload=new Map(n.workspaceProvider.payload)}catch(r){Ne(r)}}get remoteAuthority(){return this.options.remoteAuthority}get expectsResolverExtension(){return!!this.options.remoteAuthority?.includes("+")&&!this.options.webSocketFactory}get isBuilt(){return!!this.productService.commit}get logLevel(){let e=this.payload?.get("logLevel");return e?e.split(",").find(t=>!Tp.test(t)):this.options.developmentOptions?.logLevel!==void 0?lf(this.options.developmentOptions?.logLevel):void 0}get extensionLogLevel(){let e=this.payload?.get("logLevel");if(e){let t=[];for(let n of e.split(",")){let o=Tp.exec(n);o&&o[1]&&o[2]&&t.push([o[1],o[2]])}return t.length?t:void 0}return this.options.developmentOptions?.extensionLogLevel!==void 0?this.options.developmentOptions?.extensionLogLevel.map(([t,n])=>[t,lf(n)]):void 0}get profDurationMarkers(){let e=this.payload?.get("profDurationMarkers");if(e){let t=[];for(let n of e.split(","))t.push(n);return t.length===2?t:void 0}}get windowLogsPath(){return this.logsHome}get logFile(){return Oe(this.windowLogsPath,"window.log")}get userRoamingDataHome(){return N.file("/User").with({scheme:H.vscodeUserData})}get argvResource(){return Oe(this.userRoamingDataHome,"argv.json")}get cacheHome(){return Oe(this.userRoamingDataHome,"caches")}get workspaceStorageHome(){return Oe(this.userRoamingDataHome,"workspaceStorage")}get localHistoryHome(){return Oe(this.userRoamingDataHome,"History")}get stateResource(){return Oe(this.userRoamingDataHome,"State","storage.json")}get userDataSyncHome(){return Oe(this.userRoamingDataHome,"sync",this.workspaceId)}get sync(){}get keyboardLayoutResource(){return Oe(this.userRoamingDataHome,"keyboardLayout.json")}get untitledWorkspacesHome(){return Oe(this.userRoamingDataHome,"Workspaces")}get serviceMachineIdResource(){return Oe(this.userRoamingDataHome,"machineid")}get extHostLogsPath(){return Oe(this.logsHome,"exthost")}get extHostTelemetryLogFile(){return Oe(this.extHostLogsPath,"extensionTelemetry.log")}extensionHostDebugEnvironment=void 0;get debugExtensionHost(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.params}get isExtensionDevelopment(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.isExtensionDevelopment}get extensionDevelopmentLocationURI(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionDevelopmentLocationURI}get extensionDevelopmentLocationKind(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionDevelopmentKind}get extensionTestsLocationURI(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionTestsLocationURI}get extensionEnabledProposedApi(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.extensionEnabledProposedApi}get debugRenderer(){return this.extensionHostDebugEnvironment||(this.extensionHostDebugEnvironment=this.resolveExtensionHostDebugEnvironment()),this.extensionHostDebugEnvironment.debugRenderer}get enableSmokeTestDriver(){return this.options.developmentOptions?.enableSmokeTestDriver}get disableExtensions(){return this.payload?.get("disableExtensions")==="true"}get enableExtensions(){return this.options.enabledExtensions}get webviewExternalEndpoint(){let e=this.options.webviewEndpoint||this.productService.webviewContentExternalBaseUrlTemplate||"https://{{uuid}}.vscode-cdn.net/{{quality}}/{{commit}}/out/vs/workbench/contrib/webview/browser/pre/",t=this.payload?.get("webviewExternalEndpointCommit");return e.replace("{{commit}}",t??this.productService.commit??"ef65ac1ba57f57f2a3961bfe94aa20481caca4c6").replace("{{quality}}",(t?"insider":this.productService.quality)??"insider")}get extensionTelemetryLogResource(){return Oe(this.logsHome,"extensionTelemetry.log")}get disableTelemetry(){return!1}get verbose(){return this.payload?.get("verbose")==="true"}get logExtensionHostCommunication(){return this.payload?.get("logExtensionHostCommunication")==="true"}get skipReleaseNotes(){return this.payload?.get("skipReleaseNotes")==="true"}get skipWelcome(){return this.payload?.get("skipWelcome")==="true"}get disableWorkspaceTrust(){return!this.options.enableWorkspaceTrust}get profile(){return this.payload?.get("profile")}editSessionId=this.options.editSessionId;payload;resolveExtensionHostDebugEnvironment(){let e={params:{port:null,break:!1},debugRenderer:!1,isExtensionDevelopment:!1,extensionDevelopmentLocationURI:void 0,extensionDevelopmentKind:void 0};if(this.payload)for(let[n,o]of this.payload)switch(n){case"extensionDevelopmentPath":e.extensionDevelopmentLocationURI||(e.extensionDevelopmentLocationURI=[]),e.extensionDevelopmentLocationURI.push(N.parse(o)),e.isExtensionDevelopment=!0;break;case"extensionDevelopmentKind":e.extensionDevelopmentKind=[o];break;case"extensionTestsPath":e.extensionTestsLocationURI=N.parse(o);break;case"debugRenderer":e.debugRenderer=o==="true";break;case"debugId":e.params.debugId=o;break;case"inspect-brk-extensions":e.params.port=parseInt(o),e.params.break=!0;break;case"inspect-extensions":e.params.port=parseInt(o);break;case"enableProposedApi":e.extensionEnabledProposedApi=[];break}let t=this.options.developmentOptions;return t&&!e.isExtensionDevelopment&&(t.extensions?.length&&(e.extensionDevelopmentLocationURI=t.extensions.map(n=>N.revive(n)),e.isExtensionDevelopment=!0),t.extensionTestsPath&&(e.extensionTestsLocationURI=N.revive(t.extensionTestsPath))),e}get filesToOpenOrCreate(){if(this.payload){let e=this.payload.get("openFile");if(e){let t=N.parse(e);if(this.payload.has("gotoLineMode")){let n=Xw(t.path);return[{fileUri:t.with({path:n.path}),options:{selection:Uo(n.line)?void 0:{startLineNumber:n.line,startColumn:n.column||1}}}]}return[{fileUri:t}]}}}get filesToDiff(){if(this.payload){let e=this.payload.get("diffFilePrimary"),t=this.payload.get("diffFileSecondary");if(e&&t)return[{fileUri:N.parse(t)},{fileUri:N.parse(e)}]}}get filesToMerge(){if(this.payload){let e=this.payload.get("mergeFile1"),t=this.payload.get("mergeFile2"),n=this.payload.get("mergeFileBase"),o=this.payload.get("mergeFileResult");if(e&&t&&n&&o)return[{fileUri:N.parse(e)},{fileUri:N.parse(t)},{fileUri:N.parse(n)},{fileUri:N.parse(o)}]}}};L([q],Ve.prototype,"remoteAuthority",1),L([q],Ve.prototype,"expectsResolverExtension",1),L([q],Ve.prototype,"isBuilt",1),L([q],Ve.prototype,"logLevel",1),L([q],Ve.prototype,"windowLogsPath",1),L([q],Ve.prototype,"logFile",1),L([q],Ve.prototype,"userRoamingDataHome",1),L([q],Ve.prototype,"argvResource",1),L([q],Ve.prototype,"cacheHome",1),L([q],Ve.prototype,"workspaceStorageHome",1),L([q],Ve.prototype,"localHistoryHome",1),L([q],Ve.prototype,"stateResource",1),L([q],Ve.prototype,"userDataSyncHome",1),L([q],Ve.prototype,"sync",1),L([q],Ve.prototype,"keyboardLayoutResource",1),L([q],Ve.prototype,"untitledWorkspacesHome",1),L([q],Ve.prototype,"serviceMachineIdResource",1),L([q],Ve.prototype,"extHostLogsPath",1),L([q],Ve.prototype,"extHostTelemetryLogFile",1),L([q],Ve.prototype,"debugExtensionHost",1),L([q],Ve.prototype,"isExtensionDevelopment",1),L([q],Ve.prototype,"extensionDevelopmentLocationURI",1),L([q],Ve.prototype,"extensionDevelopmentLocationKind",1),L([q],Ve.prototype,"extensionTestsLocationURI",1),L([q],Ve.prototype,"extensionEnabledProposedApi",1),L([q],Ve.prototype,"debugRenderer",1),L([q],Ve.prototype,"enableSmokeTestDriver",1),L([q],Ve.prototype,"disableExtensions",1),L([q],Ve.prototype,"enableExtensions",1),L([q],Ve.prototype,"webviewExternalEndpoint",1),L([q],Ve.prototype,"extensionTelemetryLogResource",1),L([q],Ve.prototype,"disableTelemetry",1),L([q],Ve.prototype,"verbose",1),L([q],Ve.prototype,"logExtensionHostCommunication",1),L([q],Ve.prototype,"skipReleaseNotes",1),L([q],Ve.prototype,"skipWelcome",1),L([q],Ve.prototype,"disableWorkspaceTrust",1),L([q],Ve.prototype,"profile",1),L([q],Ve.prototype,"filesToOpenOrCreate",1),L([q],Ve.prototype,"filesToDiff",1),L([q],Ve.prototype,"filesToMerge",1);var lL=P("layoutService");var ac=lL;function cb(i){switch(i){case 0:return"left";case 1:return"right";case 2:return"bottom";case 3:return"top";default:return"bottom"}}var Yrt={[cb(0)]:0,[cb(1)]:1,[cb(2)]:2,[cb(3)]:3};function YE(i){switch(i){case 0:return"always";case 1:return"never";case 2:return"preserve";default:return"preserve"}}var Qrt={[YE(0)]:0,[YE(1)]:1,[YE(2)]:2};var hr=class extends A{constructor(t,n){super();this.logService=t;this.storageService=n;this._startupKind=this.resolveStartupKind(),this._register(this.storageService.onWillSaveState(o=>{o.reason===1&&this.storageService.store(hr.LAST_SHUTDOWN_REASON_KEY,this.shutdownReason,1,1)}))}static LAST_SHUTDOWN_REASON_KEY="lifecyle.lastShutdownReason";_onBeforeShutdown=this._register(new C);onBeforeShutdown=this._onBeforeShutdown.event;_onWillShutdown=this._register(new C);onWillShutdown=this._onWillShutdown.event;_onDidShutdown=this._register(new C);onDidShutdown=this._onDidShutdown.event;_onBeforeShutdownError=this._register(new C);onBeforeShutdownError=this._onBeforeShutdownError.event;_onShutdownVeto=this._register(new C);onShutdownVeto=this._onShutdownVeto.event;_startupKind;get startupKind(){return this._startupKind}_phase=1;get phase(){return this._phase}phaseWhen=new Map;shutdownReason;resolveStartupKind(){let t=this.doResolveStartupKind()??1;return this.logService.trace(`[lifecycle] starting up (startup kind: ${t})`),t}doResolveStartupKind(){let t=this.storageService.getNumber(hr.LAST_SHUTDOWN_REASON_KEY,1);this.storageService.remove(hr.LAST_SHUTDOWN_REASON_KEY,1);let n;switch(t){case 3:n=3;break;case 4:n=4;break}return n}set phase(t){if(t<this.phase)throw new Error("Lifecycle cannot go backwards");if(this._phase===t)return;this.logService.trace(`lifecycle: phase changed (value: ${t})`),this._phase=t,en(`code/LifecyclePhase/${A_(t)}`);let n=this.phaseWhen.get(this._phase);n&&(n.open(),this.phaseWhen.delete(this._phase))}async when(t){if(t<=this._phase)return;let n=this.phaseWhen.get(t);n||(n=new Fl,this.phaseWhen.set(t,n)),await n.wait()}};hr=L([w(0,qt),w(1,vn)],hr);var kp=class extends hr{beforeUnloadListener=void 0;unloadListener=void 0;ignoreBeforeUnload=!1;didUnload=!1;constructor(e,t){super(e,t),this.registerListeners()}registerListeners(){this.beforeUnloadListener=Z(me,ye.BEFORE_UNLOAD,e=>this.onBeforeUnload(e)),this.unloadListener=Z(me,ye.PAGE_HIDE,()=>this.onUnload())}onBeforeUnload(e){this.ignoreBeforeUnload?(this.logService.info("[lifecycle] onBeforeUnload triggered but ignored once"),this.ignoreBeforeUnload=!1):(this.logService.info("[lifecycle] onBeforeUnload triggered and handled with veto support"),this.doShutdown(()=>this.vetoBeforeUnload(e)))}vetoBeforeUnload(e){e.preventDefault(),e.returnValue=d("lifecycleVeto","Changes that you made may not be saved. Please check press 'Cancel' and try again.")}withExpectedShutdown(e,t){if(typeof e=="number")return this.shutdownReason=e,this.storageService.flush(1);this.ignoreBeforeUnload=!0;try{t?.()}finally{this.ignoreBeforeUnload=!1}}async shutdown(){this.logService.info("[lifecycle] shutdown triggered"),this.beforeUnloadListener?.dispose(),this.unloadListener?.dispose(),await this.storageService.flush(1),this.doShutdown()}doShutdown(e){let t=this.logService;this.storageService.flush(1);let n=!1;function o(r,s){typeof e=="function"&&(r instanceof Promise&&(t.error(`[lifecycle] Long running operations before shutdown are unsupported in the web (id: ${s})`),n=!0),r===!0&&(t.info(`[lifecycle]: Unload was prevented (id: ${s})`),n=!0))}return this._onBeforeShutdown.fire({reason:2,veto(r,s){o(r,s)},finalVeto(r,s){o(r(),s)}}),n&&typeof e=="function"?e():this.onUnload()}onUnload(){if(this.didUnload)return;this.didUnload=!0,this._register(Z(me,ye.PAGE_SHOW,t=>this.onLoadAfterUnload(t)));let e=this.logService;this._onWillShutdown.fire({reason:2,joiners:()=>[],token:Tt.None,join(t,n){e.error(`[lifecycle] Long running operations during shutdown are unsupported in the web (id: ${n.id})`)},force:()=>{}}),this._onDidShutdown.fire()}onLoadAfterUnload(e){e.persisted&&this.withExpectedShutdown({disableShutdownHandling:!0},()=>me.location.reload())}doResolveStartupKind(){let e=super.doResolveStartupKind();return typeof e!="number"&&performance.getEntriesByType("navigation").at(0)?.type==="reload"&&(e=3),e}};kp=L([w(0,qt),w(1,vn)],kp);zt(ur,kp,0);var y2=d("open","open"),I2=d("close","close"),x2=d("find","find"),ub={open:y2,close:I2,find:x2};async function pL(i,e){let t=[];return await hL(i,t,e.logsHome,e.logsHome),t}async function hL(i,e,t,n){let o=await i.resolve(t);for(let{resource:r,isDirectory:s}of o.children||[])if(s)await hL(i,e,r,n);else{let a=(await i.readFile(r)).value.toString();if(a){let l=Gc(n,r);l&&e.push({relativePath:l,contents:a})}}}var Dp=class{constructor(e,t,n,o){this.fileService=e;this.environmentService=t;this.lifecycleService=n;this.logService=o}async getLogs(){return pL(this.fileService,this.environmentService)}async whenWorkbenchRestored(){this.logService.info("[driver] Waiting for restored lifecycle phase..."),await this.lifecycleService.when(3),this.logService.info("[driver] Restored lifecycle phase reached. Waiting for contributions..."),await Ae.as(Gf.Workbench).whenRestored,this.logService.info("[driver] Workbench contributions created.")}async setValue(e,t){let n=me.document.querySelector(e);if(!n)return Promise.reject(new Error(`Element not found: ${e}`));let o=n;o.value=t;let r=new Event("input",{bubbles:!0,cancelable:!0});o.dispatchEvent(r)}async isActiveElement(e){if(me.document.querySelector(e)!==me.document.activeElement){let n=[],o=me.document.activeElement;for(;o;){let r=o.tagName,s=o.id?`#${o.id}`:"",a=Yt(o.className.split(/\s+/g).map(l=>l.trim())).map(l=>`.${l}`).join("");n.unshift(`${r}${s}${a}`),o=o.parentElement}throw new Error(`Active element not found. Current active element is '${n.join(" > ")}'. Looking for ${e}`)}return!0}async getElements(e,t){let n=me.document.querySelectorAll(e),o=[];for(let r=0;r<n.length;r++){let s=n.item(r);o.push(this.serializeElement(s,t))}return o}serializeElement(e,t){let n=Object.create(null);for(let a=0;a<e.attributes.length;a++){let l=e.attributes.item(a);l&&(n[l.name]=l.value)}let o=[];if(t)for(let a=0;a<e.children.length;a++){let l=e.children.item(a);l&&o.push(this.serializeElement(l,!0))}let{left:r,top:s}=iu(e);return{tagName:e.tagName,className:e.className,textContent:e.textContent||"",attributes:n,children:o,left:r,top:s}}async getElementXY(e,t,n){let o=typeof t=="number"&&typeof n=="number"?{x:t,y:n}:void 0;return this._getElementXY(e,o)}async typeInEditor(e,t){let n=me.document.querySelector(e);if(!n)throw new Error(`Editor not found: ${e}`);let o=n,r=o.selectionStart,s=r+t.length,a=o.value,l=a.substr(0,r)+t+a.substr(r);o.value=l,o.setSelectionRange(s,s);let c=new Event("input",{bubbles:!0,cancelable:!0});o.dispatchEvent(c)}async getTerminalBuffer(e){let t=me.document.querySelector(e);if(!t)throw new Error(`Terminal not found: ${e}`);let n=t.xterm;if(!n)throw new Error(`Xterm not found: ${e}`);let o=[];for(let r=0;r<n.buffer.active.length;r++)o.push(n.buffer.active.getLine(r).translateToString(!0));return o}async writeInTerminal(e,t){let n=me.document.querySelector(e);if(!n)throw new Error(`Element not found: ${e}`);let o=n.xterm;if(!o)throw new Error(`Xterm not found: ${e}`);o.input(t)}getLocaleInfo(){return Promise.resolve({language:Xn,locale:jC})}getLocalizedStrings(){return Promise.resolve({open:ub.open,close:ub.close,find:ub.find})}async _getElementXY(e,t){let n=me.document.querySelector(e);if(!n)return Promise.reject(new Error(`Element not found: ${e}`));let{left:o,top:r}=iu(n),{width:s,height:a}=nu(n),l,c;return t?(l=o+t.x,c=r+t.y):(l=o+s/2,c=r+a/2),l=Math.round(l),c=Math.round(c),{x:l,y:c}}async exitApplication(){}};Dp=L([w(0,Gt),w(1,An),w(2,ur),w(3,qt)],Dp);function gL(i){Object.assign(me,{driver:i.createInstance(Dp)})}var Wi=class extends A{constructor(t,n={getWindowsCount:Yh,getWindows:tu},o,r){super();this.hostService=o;this.environmentService=r;this.enableWindowFocusOnElementFocus(t),this.enableMultiWindowAwareTimeout(t,n),this.registerFullScreenListeners(t.vscodeWindowId)}static TIMEOUT_HANDLES=Number.MIN_SAFE_INTEGER;static TIMEOUT_DISPOSABLES=new Map;enableWindowFocusOnElementFocus(t){let n=t.HTMLElement.prototype.focus,o=this;t.HTMLElement.prototype.focus=function(r){o.onElementFocus(Pe(this)),n.apply(this,[r])}}onElementFocus(t){let n=Ca();n!==t&&n.document.hasFocus()&&(t.focus(),!this.environmentService.extensionTestsLocationURI&&!t.document.hasFocus()&&this.hostService.focus(t))}enableMultiWindowAwareTimeout(t,n={getWindowsCount:Yh,getWindows:tu}){let o=t.setTimeout;Object.defineProperty(t,"vscodeOriginalSetTimeout",{get:()=>o});let r=t.clearTimeout;Object.defineProperty(t,"vscodeOriginalClearTimeout",{get:()=>r}),t.setTimeout=function(s,a=0,...l){if(n.getWindowsCount()===1||typeof s=="string"||a===0)return o.apply(this,[s,a,...l]);let c=new Set,u=Wi.TIMEOUT_HANDLES++;Wi.TIMEOUT_DISPOSABLES.set(u,c);let p=Rc(s,()=>{ft(c),Wi.TIMEOUT_DISPOSABLES.delete(u)});for(let{window:h,disposables:m}of n.getWindows()){if(Ub(h)&&h.document.visibilityState==="hidden")continue;let v=!1,f=h.vscodeOriginalSetTimeout.apply(this,[(...E)=>{v||p(...E)},a,...l]),b=le(()=>{v=!0,h.vscodeOriginalClearTimeout(f),c.delete(b)});m.add(b),c.add(b)}return u},t.clearTimeout=function(s){let a=typeof s=="number"?Wi.TIMEOUT_DISPOSABLES.get(s):void 0;a?(ft(a),Wi.TIMEOUT_DISPOSABLES.delete(s)):r.apply(this,[s])}}registerFullScreenListeners(t){this._register(this.hostService.onDidChangeFullScreen(({windowId:n,fullscreen:o})=>{if(n===t){let r=Sa(t);r&&ww(o,r.window)}}))}static async confirmOnShutdown(t,n){let o=t.get(Gs),r=t.get($e),s=n===2?Se?d("quitMessageMac","Are you sure you want to quit?"):d("quitMessage","Are you sure you want to exit?"):d("closeWindowMessage","Are you sure you want to close the window?"),a=n===2?Se?d({key:"quitButtonLabel",comment:["&& denotes a mnemonic"]},"&&Quit"):d({key:"exitButtonLabel",comment:["&& denotes a mnemonic"]},"&&Exit"):d({key:"closeWindowButtonLabel",comment:["&& denotes a mnemonic"]},"&&Close Window"),l=await o.confirm({message:s,primaryButton:a,checkbox:{label:d("doNotAskAgain","Do not ask me again")}});return l.confirmed&&l.checkboxChecked&&await r.updateValue("window.confirmBeforeClose","never"),l.confirmed}};Wi=L([w(2,Tn),w(3,to)],Wi);var pb=class extends Wi{constructor(t,n,o,r,s,a,l,c,u){super(me,void 0,u,a);this.openerService=t;this.lifecycleService=n;this.dialogService=o;this.labelService=r;this.productService=s;this.browserEnvironmentService=a;this.layoutService=l;this.instantiationService=c;this.registerListeners(),this.create()}registerListeners(){this._register(this.lifecycleService.onWillShutdown(()=>this.onWillShutdown()));let t=es&&me.visualViewport?me.visualViewport:me;this._register(Z(t,ye.RESIZE,()=>{this.layoutService.layout(),es&&me.scrollTo(0,0)})),this._register(Z(this.layoutService.mainContainer,ye.WHEEL,n=>n.preventDefault(),{passive:!1})),this._register(Z(this.layoutService.mainContainer,ye.CONTEXT_MENU,n=>Ct.stop(n,!0))),this._register(Z(this.layoutService.mainContainer,ye.DROP,n=>Ct.stop(n,!0)))}onWillShutdown(){ee.toPromise(ee.any(ee.once(new We(me.document.body,ye.KEY_DOWN,!0).event),ee.once(new We(me.document.body,ye.MOUSE_DOWN,!0).event))).then(async()=>{await pi(3e3),await this.dialogService.prompt({type:ln.Error,message:d("shutdownError","An unexpected error occurred that requires a reload of this page."),detail:d("shutdownErrorDetail","The workbench was unexpectedly disposed while running."),buttons:[{label:d({key:"reload",comment:["&& denotes a mnemonic"]},"&&Reload"),run:()=>me.location.reload()}]})})}create(){this.setupOpenHandlers(),this.registerLabelFormatters(),this.registerCommands(),this.setupDriver()}setupDriver(){this.environmentService.enableSmokeTestDriver&&gL(this.instantiationService)}setupOpenHandlers(){this.openerService.setDefaultExternalOpener({openExternal:async t=>{let n=!1;if(this.browserEnvironmentService.options?.openerAllowedExternalUrlPrefixes){for(let o of this.browserEnvironmentService.options.openerAllowedExternalUrlPrefixes)if(t.startsWith(o)){n=!0;break}}if(co(t,H.http)||co(t,H.https))Bo?OT(t,!n)||await this.dialogService.prompt({type:ln.Warning,message:d("unableToOpenExternal","The browser interrupted the opening of a new tab or window. Press 'Open' to open it anyway."),detail:t,buttons:[{label:d({key:"open",comment:["&& denotes a mnemonic"]},"&&Open"),run:()=>n?iy(t):ny(t)},{label:d({key:"learnMore",comment:["&& denotes a mnemonic"]},"&&Learn More"),run:()=>this.openerService.open(N.parse("https://aka.ms/allow-vscode-popup"))}],cancelButton:!0}):n?iy(t):ny(t);else{let o=()=>{this.lifecycleService.withExpectedShutdown({disableShutdownHandling:!0},()=>me.location.href=t)};o();let r=async()=>{let{downloadUrl:s}=this.productService,a,l=[{label:d({key:"openExternalDialogButtonRetry.v2",comment:["&& denotes a mnemonic"]},"&&Try Again"),run:()=>o()}];s!==void 0?(a=d("openExternalDialogDetail.v2",`We launched {0} on your computer.

If {1} did not launch, try again or install it below.`,this.productService.nameLong,this.productService.nameLong),l.push({label:d({key:"openExternalDialogButtonInstall.v3",comment:["&& denotes a mnemonic"]},"&&Install"),run:async()=>{await this.openerService.open(N.parse(s)),r()}})):a=d("openExternalDialogDetailNoInstall",`We launched {0} on your computer.

If {1} did not launch, try again below.`,this.productService.nameLong,this.productService.nameLong),await this.hostService.withExpectedShutdown(()=>this.dialogService.prompt({type:ln.Info,message:d("openExternalDialogTitle","All done. You can close this tab now."),detail:a,buttons:l,cancelButton:!0}))};co(t,this.productService.urlProtocol)&&await r()}return!0}})}registerLabelFormatters(){this._register(this.labelService.registerFormatter({scheme:H.vscodeUserData,priority:!0,formatting:{label:"(Settings) ${path}",separator:"/"}}))}registerCommands(){yt.registerCommand("workbench.experimental.requestUsbDevice",async(t,n)=>iL(n)),yt.registerCommand("workbench.experimental.requestSerialPort",async(t,n)=>oL(n)),yt.registerCommand("workbench.experimental.requestHidDevice",async(t,n)=>rL(n))}};pb=L([w(0,Bs),w(1,ur),w(2,Gs),w(3,ir),w(4,or),w(5,aL),w(6,ac),w(7,Vt),w(8,Tn)],pb);var S2=P("auxiliaryWindowService");var _p=class extends Wi{constructor(t,n,o,r,s,a){super(t,void 0,s,a);this.window=t;this.container=n;this.configurationService=r;this.whenStylesHaveLoaded=o.wait().then(()=>{}),this.registerListeners()}_onWillLayout=this._register(new C);onWillLayout=this._onWillLayout.event;_onDidLayout=this._register(new C);onDidLayout=this._onDidLayout.event;_onBeforeUnload=this._register(new C);onBeforeUnload=this._onBeforeUnload.event;_onUnload=this._register(new C);onUnload=this._onUnload.event;_onWillDispose=this._register(new C);onWillDispose=this._onWillDispose.event;whenStylesHaveLoaded;registerListeners(){this._register(Z(this.window,ye.BEFORE_UNLOAD,t=>this.handleBeforeUnload(t))),this._register(Z(this.window,ye.UNLOAD,()=>this.handleUnload())),this._register(Z(this.window,"unhandledrejection",t=>{Ne(t.reason),t.preventDefault()})),this._register(Z(this.window,ye.RESIZE,()=>this.layout())),this._register(Z(this.container,ye.SCROLL,()=>this.container.scrollTop=0)),At?(this._register(Z(this.container,ye.DROP,t=>Ct.stop(t,!0))),this._register(Z(this.container,ye.WHEEL,t=>t.preventDefault(),{passive:!1})),this._register(Z(this.container,ye.CONTEXT_MENU,t=>Ct.stop(t,!0)))):(this._register(Z(this.window.document.body,ye.DRAG_OVER,t=>Ct.stop(t))),this._register(Z(this.window.document.body,ye.DROP,t=>Ct.stop(t))))}handleBeforeUnload(t){let n;if(this._onBeforeUnload.fire({veto(s){s&&(n=s)}}),n){this.handleVetoBeforeClose(t,n);return}let o=this.configurationService.getValue("window.confirmBeforeClose");(o==="always"||o==="keyboardOnly"&&jh.getInstance().isModifierPressed)&&this.confirmBeforeClose(t)}handleVetoBeforeClose(t,n){this.preventUnload(t)}preventUnload(t){t.preventDefault(),t.returnValue=d("lifecycleVeto","Changes that you made may not be saved. Please check press 'Cancel' and try again.")}confirmBeforeClose(t){this.preventUnload(t)}handleUnload(){this._onUnload.fire()}layout(){let t=nu(this.window.document.body,this.container);this._onWillLayout.fire(t),this._onDidLayout.fire(t)}createState(){return{bounds:{x:this.window.screenX,y:this.window.screenY,width:this.window.outerWidth,height:this.window.outerHeight},zoomLevel:Ew(this.window)}}dispose(){this._store.isDisposed||(this._onWillDispose.fire(),super.dispose())}};_p=L([w(3,$e),w(4,Tn),w(5,to)],_p);var $r=class extends A{constructor(t,n,o,r,s,a){super();this.layoutService=t;this.dialogService=n;this.configurationService=o;this.telemetryService=r;this.hostService=s;this.environmentService=a}static DEFAULT_SIZE={width:800,height:600};static WINDOW_IDS=hs(me)+1;_onDidOpenAuxiliaryWindow=this._register(new C);onDidOpenAuxiliaryWindow=this._onDidOpenAuxiliaryWindow.event;windows=new Map;async open(t){en("code/auxiliaryWindow/willOpen");let n=await this.openWindow(t);if(!n)throw new Error(d("unableToOpenWindowError","Unable to open a new window."));let o=await this.resolveWindowId(n);$p(n,o);let r=new re,{container:s,stylesLoaded:a}=this.createContainer(n,r,t),l=this.createAuxiliaryWindow(n,s,a),c=new re;this.windows.set(n.vscodeWindowId,l),c.add(le(()=>this.windows.delete(n.vscodeWindowId)));let u=new re;return ee.once(l.onWillDispose)(()=>{n.close(),r.dispose(),c.dispose(),u.dispose()}),c.add(yT(n)),this._onDidOpenAuxiliaryWindow.fire({window:l,disposables:u}),en("code/auxiliaryWindow/didOpen"),this.telemetryService.publicLog2("auxiliaryWindowOpen",{bounds:!!t?.bounds}),l}createAuxiliaryWindow(t,n,o){return new _p(t,n,o,this.configurationService,this.hostService,this.environmentService)}async openWindow(t){let n=Ca(),o={x:n.screenX,y:n.screenY,width:n.outerWidth,height:n.outerHeight},r=Math.max(t?.bounds?.width??$r.DEFAULT_SIZE.width,vS.WIDTH),s=Math.max(t?.bounds?.height??$r.DEFAULT_SIZE.height,vS.HEIGHT),a={x:t?.bounds?.x??Math.max(o.x+o.width/2-r/2,0),y:t?.bounds?.y??Math.max(o.y+o.height/2-s/2,0),width:r,height:s};!t?.bounds&&a.x===o.x&&a.y===o.y&&(a={...a,x:a.x+30,y:a.y+30});let l=Yt(["popup=yes",`left=${a.x}`,`top=${a.y}`,`width=${a.width}`,`height=${a.height}`,t?.nativeTitlebar?"window-native-titlebar=yes":void 0,t?.disableFullscreen?"window-disable-fullscreen=yes":void 0,t?.mode===0?"window-maximized=yes":void 0,t?.mode===2?"window-fullscreen=yes":void 0]),c=me.open(hl?"":"about:blank",void 0,l.join(","));return!c&&At?(await this.dialogService.prompt({type:ln.Warning,message:d("unableToOpenWindow","The browser interrupted the opening of a new window. Press 'Retry' to try again."),detail:d("unableToOpenWindowDetail","To avoid this problem in the future, please ensure to allow popups for this website."),buttons:[{label:d({key:"retry",comment:["&& denotes a mnemonic"]},"&&Retry"),run:()=>this.openWindow(t)}],cancelButton:!0})).result:c?.window}async resolveWindowId(t){return $r.WINDOW_IDS++}createContainer(t,n,o){t.document.createElement=function(){throw new Error('Not allowed to create elements in child window JavaScript context. Always use the main window so that "xyz instanceof HTMLElement" continues to work.')},this.applyMeta(t);let{stylesLoaded:r}=this.applyCSS(t,n),s=this.applyHTML(t,n);return{stylesLoaded:r,container:s}}applyMeta(t){for(let o of['meta[charset="utf-8"]','meta[http-equiv="Content-Security-Policy"]','meta[name="viewport"]','meta[name="theme-color"]']){let r=me.document.querySelector(o);if(r){let s=DT(t.document.head);if(tg(r,s),o==='meta[http-equiv="Content-Security-Policy"]'){let a=s.getAttribute("content");a&&s.setAttribute("content",a.replace(/(script-src[^\;]*)/,"script-src 'none'"))}}}let n=me.document.querySelector('link[rel="icon"]');if(n){let o=_T(t.document.head);tg(n,o)}}applyCSS(t,n){en("code/auxiliaryWindow/willApplyCSS");let o=new Map,r=new Fl;r.wait().then(()=>en("code/auxiliaryWindow/didLoadCSSStyles"));let s=n.add(new re),a=0;function l(){--a===0&&(s.dispose(),r.open())}function c(u){if(wT(u))return;let p=t.document.head.appendChild(u.cloneNode(!0));u.tagName.toLowerCase()==="link"&&(a++,s.add(Z(p,"load",l)),s.add(Z(p,"error",l))),o.set(u,p)}a++;try{for(let u of me.document.head.querySelectorAll('link[rel="stylesheet"], style'))c(u)}finally{l()}return n.add(TT(t)),n.add(Jh.observe(me.document.head,n,{childList:!0,subtree:!0})(u=>{for(let p of u)if(!(p.type!=="childList"||p.target.nodeName.toLowerCase()==="title"||p.target.nodeName.toLowerCase()==="script"||p.target.nodeName.toLowerCase()==="meta")){for(let h of p.addedNodes)if(on(h)&&(h.tagName.toLowerCase()==="style"||h.tagName.toLowerCase()==="link"))c(h);else if(h.nodeType===Node.TEXT_NODE&&h.parentNode){let m=o.get(h.parentNode);m&&(m.textContent=h.textContent)}for(let h of p.removedNodes){let m=o.get(h);m&&(m.parentNode?.removeChild(m),o.delete(h))}}})),en("code/auxiliaryWindow/didApplyCSS"),{stylesLoaded:r}}applyHTML(t,n){en("code/auxiliaryWindow/willApplyHTML");let o=document.createElement("div");return o.setAttribute("role","application"),ST(o,0,0,0,0,"relative"),o.style.display="flex",o.style.height="100%",o.style.flexDirection="column",t.document.body.append(o),n.add(ng(me.document.documentElement,t.document.documentElement)),n.add(ng(me.document.body,t.document.body)),n.add(ng(this.layoutService.mainContainer,o,["class"])),en("code/auxiliaryWindow/didApplyHTML"),o}getWindow(t){return this.windows.get(t)}};$r=L([w(0,ac),w(1,Gs),w(2,$e),w(3,Ks),w(4,Tn),w(5,to)],$r);zt(S2,$r,1);var QE=new Oi(220,70),XE=new Oi(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY);var hb=class i extends lb{constructor(t,n,o,r,s){super(t,o,r,s);this.group=n}onDidChangeSizeConstraints=ee.None;_onDidChangeControl=this._register(new C);onDidChangeControl=this._onDidChangeControl.event;static EDITOR_MEMENTOS=new Map;get minimumWidth(){return QE.width}get maximumWidth(){return XE.width}get minimumHeight(){return QE.height}get maximumHeight(){return XE.height}_input;get input(){return this._input}_options;get options(){return this._options}get window(){return Sa(this.group.windowId,!0).window}get scopedContextKeyService(){}create(t){super.create(t),this.createEditor(t)}async setInput(t,n,o,r){this._input=t,this._options=n}clearInput(){this._input=void 0,this._options=void 0}setOptions(t){this._options=t}setVisible(t){super.setVisible(t),this.setEditorVisible(t)}setEditorVisible(t){}setBoundarySashes(t){}getEditorMemento(t,n,o,r=10){let s=`${this.getId()}${o}`,a=i.EDITOR_MEMENTOS.get(s);return a||(a=this._register(new JE(this.getId(),o,this.getMemento(1,1),r,t,n)),i.EDITOR_MEMENTOS.set(s,a)),a}getViewState(){}saveState(){for(let[,t]of i.EDITOR_MEMENTOS)t.id===this.getId()&&t.saveState();super.saveState()}dispose(){this._input=void 0,this._options=void 0,super.dispose()}},JE=class i extends A{constructor(t,n,o,r,s,a){super();this.id=t;this.key=n;this.memento=o;this.limit=r;this.editorGroupService=s;this.configurationService=a;this.updateConfiguration(void 0),this.registerListeners()}static SHARED_EDITOR_STATE=-1;cache;cleanedUp=!1;editorDisposables;shareEditorState=!1;registerListeners(){this._register(this.configurationService.onDidChangeConfiguration(t=>this.updateConfiguration(t)))}updateConfiguration(t){(!t||t.affectsConfiguration(void 0,"workbench.editor.sharedViewState"))&&(this.shareEditorState=this.configurationService.getValue(void 0,"workbench.editor.sharedViewState")===!0)}saveEditorState(t,n,o){let r=this.doGetResource(n);if(!r||!t)return;let s=this.doLoad(),a=s.get(r.toString());a||(a=Object.create(null),s.set(r.toString(),a)),a[t.id]=o,this.shareEditorState&&(a[i.SHARED_EDITOR_STATE]=o),wn(n)&&this.clearEditorStateOnDispose(r,n)}loadEditorState(t,n){let o=this.doGetResource(n);if(!o||!t)return;let s=this.doLoad().get(o.toString());if(s){let a=s[t.id];if(a)return a;if(this.shareEditorState)return s[i.SHARED_EDITOR_STATE]}}clearEditorState(t,n){wn(t)&&this.editorDisposables?.delete(t);let o=this.doGetResource(t);if(o){let r=this.doLoad();if(n){let s=r.get(o.toString());s&&(delete s[n.id],ba(s)&&r.delete(o.toString()))}else r.delete(o.toString())}}clearEditorStateOnDispose(t,n){this.editorDisposables||(this.editorDisposables=new Map),this.editorDisposables.has(n)||this.editorDisposables.set(n,ee.once(n.onWillDispose)(()=>{this.clearEditorState(t),this.editorDisposables?.delete(n)}))}moveEditorState(t,n,o){let r=this.doLoad(),s=[...r.keys()];for(let a of s){let l=N.parse(a);if(!o.isEqualOrParent(l,t))continue;let c;if(ei(t,l))c=n;else{let p=Qw(l.path,t.path);c=Oe(n,l.path.substr(p+t.path.length+1))}let u=r.get(a,0);u&&(r.delete(a),r.set(c.toString(),u))}}doGetResource(t){return wn(t)?t.resource:t}doLoad(){if(!this.cache){this.cache=new zi(this.limit);let t=this.memento[this.key];Array.isArray(t)&&this.cache.fromJSON(t)}return this.cache}saveState(){let t=this.doLoad();this.cleanedUp||(this.cleanUp(),this.cleanedUp=!0),this.memento[this.key]=t.toJSON()}cleanUp(){let t=this.doLoad(),n=[...t.entries()];for(let[o,r]of n)for(let s of Object.keys(r)){let a=Number(s);a===i.SHARED_EDITOR_STATE&&this.shareEditorState||this.editorGroupService.getGroup(a)||(delete r[a],ba(r)&&t.delete(o))}}};var xct=P("tunnelService"),Sct=P("sharedTunnelsService");function bL(i){if(i.scheme!=="http"&&i.scheme!=="https")return;let e=/^(localhost|127\.0\.0\.1|0\.0\.0\.0):(\d+)$/.exec(i.authority);if(e)return{address:e[1],port:+e[2]}}var ZE=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"];function mL(i){return ZE.indexOf(i)>=0}var eC=["0.0.0.0","0:0:0:0:0:0:0:0","::"];function fL(i){return eC.indexOf(i)>=0}var gb=class extends A{constructor(t,n){super();this.logService=t;this.configurationService=n}_onTunnelOpened=new C;onTunnelOpened=this._onTunnelOpened.event;_onTunnelClosed=new C;onTunnelClosed=this._onTunnelClosed.event;_onAddedTunnelProvider=new C;onAddedTunnelProvider=this._onAddedTunnelProvider.event;_tunnels=new Map;_tunnelProvider;_canElevate=!1;_canChangeProtocol=!0;_privacyOptions=[];_factoryInProgress=new Set;get hasTunnelProvider(){return!!this._tunnelProvider}get defaultTunnelHost(){let t=this.configurationService.getValue("remote.localPortHost");return!t||t==="localhost"?"127.0.0.1":"0.0.0.0"}setTunnelProvider(t){return this._tunnelProvider=t,t?(this._onAddedTunnelProvider.fire(),{dispose:()=>{this._tunnelProvider=void 0,this._canElevate=!1,this._privacyOptions=[]}}):(this._canElevate=!1,this._privacyOptions=[],this._onAddedTunnelProvider.fire(),{dispose:()=>{}})}setTunnelFeatures(t){this._canElevate=t.elevation,this._privacyOptions=t.privacyOptions,this._canChangeProtocol=t.protocol}get canChangeProtocol(){return this._canChangeProtocol}get canElevate(){return this._canElevate}get canChangePrivacy(){return this._privacyOptions.length>0}get privacyOptions(){return this._privacyOptions}get tunnels(){return this.getTunnels()}async getTunnels(){let t=[],n=Array.from(this._tunnels.values());for(let o of n){let r=Array.from(o.values());for(let s of r){let a=await s.value;a&&typeof a!="string"&&t.push(a)}}return t}async dispose(){super.dispose();for(let t of this._tunnels.values()){for(let{value:n}of t.values())await n.then(o=>typeof o!="string"?o?.dispose():void 0);t.clear()}this._tunnels.clear()}setEnvironmentTunnel(t,n,o,r,s){this.addTunnelToMap(t,n,Promise.resolve({tunnelRemoteHost:t,tunnelRemotePort:n,localAddress:o,privacy:r,protocol:s,dispose:()=>Promise.resolve()}))}async getExistingTunnel(t,n){(fL(t)||mL(t))&&(t=ZE[0]);let o=this.getTunnelFromMap(t,n);if(o)return++o.refcount,o.value}openTunnel(t,n,o,r,s,a=!1,l,c){this.logService.trace(`ForwardedPorts: (TunnelService) openTunnel request for ${n}:${o} on local port ${s}.`);let u=this._tunnelProvider??t;if(!u)return;if(n||(n="localhost"),r||(r=this.defaultTunnelHost),this._tunnelProvider&&this._factoryInProgress.has(o)){this.logService.debug("ForwardedPorts: (TunnelService) Another call to create a tunnel with the same address has occurred before the last one completed. This call will be ignored.");return}let p=this.retainOrCreateTunnel(u,n,o,r,s,a,l,c);return p?p.then(h=>{if(h){if(typeof h=="string")return this.logService.trace("ForwardedPorts: (TunnelService) The tunnel provider returned an error when creating the tunnel."),this.removeEmptyOrErrorTunnelFromMap(n,o),h}else{this.logService.trace("ForwardedPorts: (TunnelService) New tunnel is undefined."),this.removeEmptyOrErrorTunnelFromMap(n,o);return}this.logService.trace("ForwardedPorts: (TunnelService) New tunnel established.");let m=this.makeTunnel(h);return(h.tunnelRemoteHost!==n||h.tunnelRemotePort!==o)&&this.logService.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Host or port mismatch."),l&&h.privacy!==l&&this.logService.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Privacy mismatch."),this._onTunnelOpened.fire(m),m}):(this.logService.trace("ForwardedPorts: (TunnelService) Tunnel was not created."),p)}makeTunnel(t){return{tunnelRemotePort:t.tunnelRemotePort,tunnelRemoteHost:t.tunnelRemoteHost,tunnelLocalPort:t.tunnelLocalPort,localAddress:t.localAddress,privacy:t.privacy,protocol:t.protocol,dispose:async()=>{this.logService.trace(`ForwardedPorts: (TunnelService) dispose request for ${t.tunnelRemoteHost}:${t.tunnelRemotePort} `);let n=this._tunnels.get(t.tunnelRemoteHost);if(n){let o=n.get(t.tunnelRemotePort);o&&(o.refcount--,await this.tryDisposeTunnel(t.tunnelRemoteHost,t.tunnelRemotePort,o))}}}}async tryDisposeTunnel(t,n,o){if(o.refcount<=0){this.logService.trace(`ForwardedPorts: (TunnelService) Tunnel is being disposed ${t}:${n}.`);let r=o.value.then(async s=>{s&&typeof s!="string"&&(await s.dispose(!0),this._onTunnelClosed.fire({host:s.tunnelRemoteHost,port:s.tunnelRemotePort}))});return this._tunnels.has(t)&&this._tunnels.get(t).delete(n),r}}async closeTunnel(t,n){this.logService.trace(`ForwardedPorts: (TunnelService) close request for ${t}:${n} `);let o=this._tunnels.get(t);if(o&&o.has(n)){let r=o.get(n);r.refcount=0,await this.tryDisposeTunnel(t,n,r)}}addTunnelToMap(t,n,o){this._tunnels.has(t)||this._tunnels.set(t,new Map),this._tunnels.get(t).set(n,{refcount:1,value:o})}async removeEmptyOrErrorTunnelFromMap(t,n){let o=this._tunnels.get(t);if(o){let r=o.get(n),s=r?await r.value:void 0;(!s||typeof s=="string")&&o.delete(n),o.size===0&&this._tunnels.delete(t)}}getTunnelFromMap(t,n){let o=[t];mL(t)?(o.push(...ZE),o.push(...eC)):fL(t)&&o.push(...eC);let r=o.map(s=>this._tunnels.get(s));for(let s of r){let a=s?.get(n);if(a)return a}}canTunnel(t){return!!bL(t)}createWithProvider(t,n,o,r,s,a,l){this.logService.trace(`ForwardedPorts: (TunnelService) Creating tunnel with provider ${n}:${o} on local port ${r}.`);let c=o;this._factoryInProgress.add(c);let u=r===void 0?o:r,p={elevationRequired:s?this.isPortPrivileged(u):!1},h={remoteAddress:{host:n,port:o},localAddressPort:r,privacy:a,public:a?a!=="private":void 0,protocol:l},m=t.forwardPort(h,p);return m?(this.addTunnelToMap(n,o,m),m.finally(()=>{this.logService.trace("ForwardedPorts: (TunnelService) Tunnel created by provider."),this._factoryInProgress.delete(c)})):this._factoryInProgress.delete(c),m}};gb=L([w(0,qt),w(1,$e)],gb);var sut=new K("webviewFindWidgetVisible",!1),aut=new K("webviewFindWidgetFocused",!1),lut=new K("webviewFindWidgetEnabled",!1),vL=P("webviewService");var Lp=class{_memento;_state;constructor(e,t){this._memento=new Ro(e,t),this._state=this._memento.getMemento(-1,1)}getOrigin(e,t){let n=this._getKey(e,t),o=this._state[n];if(o&&typeof o=="string")return o;let r=Sn();return this._state[n]=r,this._memento.saveMemento(),r}_getKey(e,t){return JSON.stringify({viewType:e,key:t})}};Lp=L([w(1,vn)],Lp);var mb=class{_store;constructor(e,t){this._store=new Lp(e,t)}getOrigin(e,t){return this._store.getOrigin(e,t.value)}};mb=L([w(1,vn)],mb);var hut=I("welcomePage.background",null,d("welcomePage.background","Background color for the Welcome page.")),gut=I("welcomePage.tileBackground",{dark:Kt,light:Kt,hcDark:"#000",hcLight:Kt},d("welcomePage.tileBackground","Background color for the tiles on the Welcome page.")),mut=I("welcomePage.tileHoverBackground",{dark:$n(Kt,.2),light:Xi(Kt,.1),hcDark:null,hcLight:null},d("welcomePage.tileHoverBackground","Hover background color for the tiles on the Welcome.")),fut=I("welcomePage.tileBorder",{dark:"#ffffff1a",light:"#0000001a",hcDark:_e,hcLight:_e},d("welcomePage.tileBorder","Border color for the tiles on the Welcome page.")),but=I("welcomePage.progress.background",Xm,d("welcomePage.progress.background","Foreground color for the Welcome page progress bars.")),vut=I("welcomePage.progress.foreground",qm,d("welcomePage.progress.foreground","Background color for the Welcome page progress bars.")),yut=I("walkthrough.stepTitle.foreground",{light:"#000000",dark:"#ffffff",hcDark:null,hcLight:null},d("walkthrough.stepTitle.foreground","Foreground color of the heading of each walkthrough step"));function tC(i){let e=[];for(let t=1,n=i.length;t<n;t++){let o=i[t];e[t]=`.mtk${t} { color: ${o}; }`}return e.push(".mtki { font-style: italic; }"),e.push(".mtkb { font-weight: bold; }"),e.push(".mtku { text-decoration: underline; text-underline-position: under; }"),e.push(".mtks { text-decoration: line-through; }"),e.push(".mtks.mtku { text-decoration: underline line-through; text-underline-position: under; }"),e.join(`
`)}var Rp="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",$ut=new RegExp(Rp);var IL="skipWalkthrough";var xL="dependecyOrPackExtensionInstall";var jut=P("extensionGalleryService");var fb=P("extensionManagementService");var Yut=P("IGlobalExtensionEnablementService"),Qut=P("IExtensionTipsService"),Xut=Xe("extensions","Extensions"),Jut=Xe("preferences","Preferences");var Ipt=new Fi("pprice.better-merge");var nC=class{_generators=new Map;_cache=new WeakMap;register(e,t){this._generators.set(e,t)}readActivationEvents(e){return this._cache.has(e)||this._cache.set(e,this._readActivationEvents(e)),this._cache.get(e)}createActivationEventsMap(e){let t=Object.create(null);for(let n of e){let o=this.readActivationEvents(n);o.length>0&&(t[Fi.toKey(n.identifier)]=o)}return t}_readActivationEvents(e){if(typeof e.main>"u"&&typeof e.browser>"u")return[];let t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let n=0;n<t.length;n++)t[n]==="onUri"&&(t[n]=`onUri:${Fi.toKey(e.identifier)}`);if(!e.contributes)return t;for(let n in e.contributes){let o=this._generators.get(n);if(!o)continue;let r=e.contributes[n],s=Array.isArray(r)?r:[r];try{o(s,t)}catch(a){Ne(a)}}return t}},iC=new nC;var E2={activeComment:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts"},aiRelatedInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts"},aiTextSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts"},aiTextSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProviderNew.d.ts"},attributableCoverage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.attributableCoverage.d.ts"},authLearnMore:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts"},authSession:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts"},canonicalUriProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts"},chatParticipantAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts"},chatParticipantPrivate:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts",version:2},chatProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts"},chatTab:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts"},chatVariableResolver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatVariableResolver.d.ts"},codeActionAI:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts"},codeActionRanges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts"},codiconDecoration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts"},commentReactor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts"},commentReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts"},commentThreadApplicability:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts"},commentingRangeHint:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts"},commentsDraftState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts"},contribAccessibilityHelpContent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts"},contribChatParticipantDetection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribChatParticipantDetection.d.ts"},contribCommentEditorActionsMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts"},contribCommentPeekContext:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts"},contribCommentThreadAdditionalMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts"},contribCommentsViewThreadMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts"},contribDebugCreateConfiguration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDebugCreateConfiguration.d.ts"},contribDiffEditorGutterToolBarMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts"},contribEditSessions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts"},contribEditorContentMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts"},contribIssueReporter:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribIssueReporter.d.ts"},contribLabelFormatterWorkspaceTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts"},contribMenuBarHome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts"},contribMergeEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts"},contribMultiDiffEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts"},contribNotebookStaticPreloads:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts"},contribRemoteHelp:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts"},contribShareMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts"},contribSourceControlHistoryItemMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts"},contribSourceControlHistoryTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryTitleMenu.d.ts"},contribSourceControlInputBoxMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts"},contribSourceControlTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts"},contribStatusBarItems:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts"},contribViewContainerTitle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts"},contribViewsRemote:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts"},contribViewsWelcome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts"},createFileSystemWatcher:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.createFileSystemWatcher.d.ts"},customEditorMove:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts"},debugVisualization:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts"},defaultChatParticipant:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts"},diffCommand:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts"},diffContentOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts"},documentFiltersExclusive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts"},documentPaste:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentPaste.d.ts"},editSessionIdentityProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts"},editorHoverVerbosityLevel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts"},editorInsets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts"},embeddings:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts"},extensionRuntime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts"},extensionsAny:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts"},externalUriOpener:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts"},fileComments:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileComments.d.ts"},fileSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts"},fileSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProviderNew.d.ts"},findFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts"},findFiles2New:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2New.d.ts"},findTextInFiles:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts"},findTextInFilesNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFilesNew.d.ts"},fsChunks:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts"},idToken:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts"},inlineCompletionsAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts"},inlineEdit:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineEdit.d.ts"},interactive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts"},interactiveWindow:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts"},ipc:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts"},languageModelSystem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts"},languageStatusText:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts"},lmTools:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.lmTools.d.ts",version:6},mappedEditsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts"},multiDocumentHighlightProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts"},newSymbolNamesProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts"},notebookCellExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts"},notebookCellExecutionState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecutionState.d.ts"},notebookControllerAffinityHidden:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts"},notebookDeprecated:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts"},notebookExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts"},notebookKernelSource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts"},notebookLiveShare:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts"},notebookMessaging:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts"},notebookMime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts"},notebookReplDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts"},notebookVariableProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts"},portsAttributes:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts"},profileContentHandlers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts"},quickDiffProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts"},quickInputButtonLocation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickInputButtonLocation.d.ts"},quickPickItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts"},quickPickSortByLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts"},resolvers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts"},scmActionButton:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts"},scmHistoryProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts"},scmMultiDiffEditor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts"},scmSelectedProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts"},scmTextDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts"},scmValidation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts"},shareProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts"},showLocal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.showLocal.d.ts"},speech:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts"},tabInputMultiDiff:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts"},tabInputTextMerge:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts"},taskPresentationGroup:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts"},telemetry:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts"},terminalDataWriteEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts"},terminalDimensions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts"},terminalExecuteCommandEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts"},terminalQuickFixProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts"},terminalSelection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts"},testObserver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts"},testRelatedCode:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts"},textSearchCompleteNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchCompleteNew.d.ts"},textSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts"},textSearchProviderNew:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProviderNew.d.ts"},timeline:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts"},tokenInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts"},treeViewActiveItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts"},treeViewMarkdownMessage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts"},treeViewReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts"},tunnelFactory:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts"},tunnels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts"},workspaceTrust:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}},Pp=Object.freeze(E2);var _pt=P("IV8InspectProfilingService"),C2;(t=>{function i(n){return!!(n.samples&&n.timeDeltas)}t.isValidProfile=i;function e(n,o="noAbsolutePaths"){for(let r of n.nodes)r.callFrame&&r.callFrame.url&&(wr(r.callFrame.url)||/^\w[\w\d+.-]*:\/\/\/?/.test(r.callFrame.url))&&(r.callFrame.url=Jn(o,bl(r.callFrame.url)));return n}t.rewriteAbsolutePaths=e})(C2||={});var lC=Ae.as(Xo.JSONContribution);var oC=class i{constructor(e,t){this.added=e;this.removed=t}static _toSet(e){let t=new Yu;for(let n=0,o=e.length;n<o;n++)t.add(e[n].description.identifier);return t}static compute(e,t){if(!e||!e.length)return new i(t,[]);if(!t||!t.length)return new i([],e);let n=this._toSet(e),o=this._toSet(t),r=t.filter(a=>!n.has(a.description.identifier)),s=e.filter(a=>!o.has(a.description.identifier));return new i(r,s)}},rC=class{name;defaultExtensionKind;_handler;_users;_delta;constructor(e,t){this.name=e,this.defaultExtensionKind=t,this._handler=null,this._users=null,this._delta=null}setHandler(e){if(this._handler!==null)throw new Error("Handler already set!");return this._handler=e,this._handle(),{dispose:()=>{this._handler=null}}}acceptUsers(e){this._delta=oC.compute(this._users,e),this._users=e,this._handle()}_handle(){if(!(this._handler===null||this._users===null||this._delta===null))try{this._handler(this._users,this._delta)}catch(e){Ne(e)}}},w2={type:"string",enum:["ui","workspace"],enumDescriptions:[d("ui","UI extension kind. In a remote window, such extensions are enabled only when available on the local machine."),d("workspace","Workspace extension kind. In a remote window, such extensions are enabled only when available on the remote.")]},SL="vscode://schemas/vscode-extensions",sC={properties:{engines:{type:"object",description:d("vscode.extension.engines","Engine compatibility."),properties:{vscode:{type:"string",description:d("vscode.extension.engines.vscode","For VS Code extensions, specifies the VS Code version that the extension is compatible with. Cannot be *. For example: ^0.10.5 indicates compatibility with a minimum VS Code version of 0.10.5."),default:"^1.22.0"}}},publisher:{description:d("vscode.extension.publisher","The publisher of the VS Code extension."),type:"string"},displayName:{description:d("vscode.extension.displayName","The display name for the extension used in the VS Code gallery."),type:"string"},categories:{description:d("vscode.extension.categories","The categories used by the VS Code gallery to categorize the extension."),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:C1},{type:"string",const:"Languages",deprecationMessage:d("vscode.extension.category.languages.deprecated","Use 'Programming  Languages' instead")}]}},galleryBanner:{type:"object",description:d("vscode.extension.galleryBanner","Banner used in the VS Code marketplace."),properties:{color:{description:d("vscode.extension.galleryBanner.color","The banner color on the VS Code marketplace page header."),type:"string"},theme:{description:d("vscode.extension.galleryBanner.theme","The color theme for the font used in the banner."),type:"string",enum:["dark","light"]}}},contributes:{description:d("vscode.extension.contributes","All contributions of the VS Code extension represented by this package."),type:"object",properties:{},default:{}},preview:{type:"boolean",description:d("vscode.extension.preview","Sets the extension to be flagged as a Preview in the Marketplace.")},enableProposedApi:{type:"boolean",deprecationMessage:d("vscode.extension.enableProposedApi.deprecated","Use `enabledApiProposals` instead.")},enabledApiProposals:{markdownDescription:d("vscode.extension.enabledApiProposals","Enable API proposals to try them out. Only valid **during development**. Extensions **cannot be published** with this property. For more details visit: https://code.visualstudio.com/api/advanced-topics/using-proposed-api"),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Pp).map(i=>i),markdownEnumDescriptions:Object.values(Pp).map(i=>i.proposal)}},api:{markdownDescription:d("vscode.extension.api","Describe the API provided by this extension. For more details visit: https://code.visualstudio.com/api/advanced-topics/remote-extensions#handling-dependencies-with-remote-extensions"),type:"string",enum:["none"],enumDescriptions:[d("vscode.extension.api.none","Give up entirely the ability to export any APIs. This allows other extensions that depend on this extension to run in a separate extension host process or in a remote machine.")]},activationEvents:{description:d("vscode.extension.activationEvents","Activation events for the VS Code extension."),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:d("vscode.extension.activationEvents.onWebviewPanel","An activation event emmited when a webview is loaded of a certain viewType"),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:d("vscode.extension.activationEvents.onLanguage","An activation event emitted whenever a file that resolves to the specified language gets opened."),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:d("vscode.extension.activationEvents.onCommand","An activation event emitted whenever the specified command gets invoked."),body:"onCommand:${2:commandId}"},{label:"onDebug",description:d("vscode.extension.activationEvents.onDebug","An activation event emitted whenever a user is about to start debugging or about to setup debug configurations."),body:"onDebug"},{label:"onDebugInitialConfigurations",description:d("vscode.extension.activationEvents.onDebugInitialConfigurations",'An activation event emitted whenever a "launch.json" needs to be created (and all provideDebugConfigurations methods need to be called).'),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:d("vscode.extension.activationEvents.onDebugDynamicConfigurations",'An activation event emitted whenever a list of all debug configurations needs to be created (and all provideDebugConfigurations methods for the "dynamic" scope need to be called).'),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:d("vscode.extension.activationEvents.onDebugResolve","An activation event emitted whenever a debug session with the specific type is about to be launched (and a corresponding resolveDebugConfiguration method needs to be called)."),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:d("vscode.extension.activationEvents.onDebugAdapterProtocolTracker","An activation event emitted whenever a debug session with the specific type is about to be launched and a debug protocol tracker might be needed."),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:d("vscode.extension.activationEvents.workspaceContains","An activation event emitted whenever a folder is opened that contains at least a file matching the specified glob pattern."),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:d("vscode.extension.activationEvents.onStartupFinished","An activation event emitted after the start-up finished (after all `*` activated extensions have finished activating)."),body:"onStartupFinished"},{label:"onTaskType",description:d("vscode.extension.activationEvents.onTaskType","An activation event emitted whenever tasks of a certain type need to be listed or resolved."),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:d("vscode.extension.activationEvents.onFileSystem","An activation event emitted whenever a file or folder is accessed with the given scheme."),body:"onFileSystem:${1:scheme}"},{label:"onEditSession",description:d("vscode.extension.activationEvents.onEditSession","An activation event emitted whenever an edit session is accessed with the given scheme."),body:"onEditSession:${1:scheme}"},{label:"onSearch",description:d("vscode.extension.activationEvents.onSearch","An activation event emitted whenever a search is started in the folder with the given scheme."),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:d("vscode.extension.activationEvents.onView","An activation event emitted whenever the specified view is expanded.")},{label:"onUri",body:"onUri",description:d("vscode.extension.activationEvents.onUri","An activation event emitted whenever a system-wide Uri directed towards this extension is open.")},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:d("vscode.extension.activationEvents.onOpenExternalUri","An activation event emitted whenever a external uri (such as an http or https link) is being opened.")},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:d("vscode.extension.activationEvents.onCustomEditor","An activation event emitted whenever the specified custom editor becomes visible.")},{label:"onNotebook",body:"onNotebook:${1:type}",description:d("vscode.extension.activationEvents.onNotebook","An activation event emitted whenever the specified notebook document is opened.")},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:d("vscode.extension.activationEvents.onAuthenticationRequest","An activation event emitted whenever sessions are requested from the specified authentication provider.")},{label:"onRenderer",description:d("vscode.extension.activationEvents.onRenderer","An activation event emitted whenever a notebook output renderer is used."),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:d("vscode.extension.activationEvents.onTerminalProfile","An activation event emitted when a specific terminal profile is launched.")},{label:"onTerminalQuickFixRequest",body:"onTerminalQuickFixRequest:${1:quickFixId}",description:d("vscode.extension.activationEvents.onTerminalQuickFixRequest","An activation event emitted when a command matches the selector associated with this ID")},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:d("vscode.extension.activationEvents.onWalkthrough","An activation event emitted when a specified walkthrough is opened.")},{label:"onIssueReporterOpened",body:"onIssueReporterOpened",description:d("vscode.extension.activationEvents.onIssueReporterOpened","An activation event emitted when the issue reporter is opened.")},{label:"onChatParticipant",body:"onChatParticipant:${1:participantId}",description:d("vscode.extension.activationEvents.onChatParticipant","An activation event emitted when the specified chat participant is invoked.")},{label:"onLanguageModelTool",body:"onLanguageModelTool:${1:toolId}",description:d("vscode.extension.activationEvents.onLanguageModelTool","An activation event emitted when the specified language model tool is invoked.")},{label:"*",description:d("vscode.extension.activationEvents.star","An activation event emitted on VS Code startup. To ensure a great end user experience, please use this activation event in your extension only when no other activation events combination works in your use-case."),body:"*"}]}},badges:{type:"array",description:d("vscode.extension.badges","Array of badges to display in the sidebar of the Marketplace's extension page."),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:d("vscode.extension.badges.url","Badge image URL.")},href:{type:"string",description:d("vscode.extension.badges.href","Badge link.")},description:{type:"string",description:d("vscode.extension.badges.description","Badge description.")}}}},markdown:{type:"string",description:d("vscode.extension.markdown","Controls the Markdown rendering engine used in the Marketplace. Either github (default) or standard."),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:d("vscode.extension.qna","Controls the Q&A link in the Marketplace. Set to marketplace to enable the default Marketplace Q & A site. Set to a string to provide the URL of a custom Q & A site. Set to false to disable Q & A altogether."),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:d("vscode.extension.extensionDependencies","Dependencies to other extensions. The identifier of an extension is always ${publisher}.${name}. For example: vscode.csharp."),type:"array",uniqueItems:!0,items:{type:"string",pattern:Rp}},extensionPack:{description:d("vscode.extension.contributes.extensionPack","A set of extensions that can be installed together. The identifier of an extension is always ${publisher}.${name}. For example: vscode.csharp."),type:"array",uniqueItems:!0,items:{type:"string",pattern:Rp}},extensionKind:{description:d("extensionKind","Define the kind of an extension. `ui` extensions are installed and run on the local machine while `workspace` extensions run on the remote."),type:"array",items:w2,default:["workspace"],defaultSnippets:[{body:["ui"],description:d("extensionKind.ui","Define an extension which can run only on the local machine when connected to remote window.")},{body:["workspace"],description:d("extensionKind.workspace","Define an extension which can run only on the remote machine when connected remote window.")},{body:["ui","workspace"],description:d("extensionKind.ui-workspace","Define an extension which can run on either side, with a preference towards running on the local machine.")},{body:["workspace","ui"],description:d("extensionKind.workspace-ui","Define an extension which can run on either side, with a preference towards running on the remote machine.")},{body:[],description:d("extensionKind.empty","Define an extension which cannot run in a remote context, neither on the local, nor on the remote machine.")}]},capabilities:{description:d("vscode.extension.capabilities","Declare the set of supported capabilities by the extension."),type:"object",properties:{virtualWorkspaces:{description:d("vscode.extension.capabilities.virtualWorkspaces","Declares whether the extension should be enabled in virtual workspaces. A virtual workspace is a workspace which is not backed by any on-disk resources. When false, this extension will be automatically disabled in virtual workspaces. Default is true."),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:d("vscode.extension.capabilities.virtualWorkspaces.supported","Declares the level of support for virtual workspaces by the extension."),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[d("vscode.extension.capabilities.virtualWorkspaces.supported.limited","The extension will be enabled in virtual workspaces with some functionality disabled."),d("vscode.extension.capabilities.virtualWorkspaces.supported.true","The extension will be enabled in virtual workspaces with all functionality enabled."),d("vscode.extension.capabilities.virtualWorkspaces.supported.false","The extension will not be enabled in virtual workspaces.")]},description:{type:"string",markdownDescription:d("vscode.extension.capabilities.virtualWorkspaces.description","A description of how virtual workspaces affects the extensions behavior and why it is needed. This only applies when `supported` is not `true`.")}}},untrustedWorkspaces:{description:d("vscode.extension.capabilities.untrustedWorkspaces","Declares how the extension should be handled in untrusted workspaces."),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:d("vscode.extension.capabilities.untrustedWorkspaces.supported","Declares the level of support for untrusted workspaces by the extension."),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[d("vscode.extension.capabilities.untrustedWorkspaces.supported.limited","The extension will be enabled in untrusted workspaces with some functionality disabled."),d("vscode.extension.capabilities.untrustedWorkspaces.supported.true","The extension will be enabled in untrusted workspaces with all functionality enabled."),d("vscode.extension.capabilities.untrustedWorkspaces.supported.false","The extension will not be enabled in untrusted workspaces.")]},restrictedConfigurations:{description:d("vscode.extension.capabilities.untrustedWorkspaces.restrictedConfigurations","A list of configuration keys contributed by the extension that should not use workspace values in untrusted workspaces."),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:d("vscode.extension.capabilities.untrustedWorkspaces.description","A description of how workspace trust affects the extensions behavior and why it is needed. This only applies when `supported` is not `true`.")}}}}},sponsor:{description:d("vscode.extension.contributes.sponsor","Specify the location from where users can sponsor your extension."),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:d("vscode.extension.contributes.sponsor.url","URL from where users can sponsor your extension. It must be a valid URL with a HTTP or HTTPS protocol. Example value: https://github.com/sponsors/nvaccess"),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:d("vscode.extension.scripts.prepublish","Script executed before the package is published as a VS Code extension."),type:"string"},"vscode:uninstall":{description:d("vscode.extension.scripts.uninstall","Uninstall hook for VS Code extension. Script that gets executed when the extension is completely uninstalled from VS Code which is when VS Code is restarted (shutdown and start) after the extension is uninstalled. Only Node scripts are supported."),type:"string"}}},icon:{type:"string",description:d("vscode.extension.icon","The path to a 128x128 pixel icon.")},l10n:{type:"string",description:d({key:"vscode.extension.l10n",comment:['{Locked="bundle.l10n._locale_.json"}','{Locked="vscode.l10n API"}']},"The relative path to a folder containing localization (bundle.l10n.*.json) files. Must be specified if you are using the vscode.l10n API.")},pricing:{type:"string",markdownDescription:d("vscode.extension.pricing","The pricing information for the extension. Can be Free (default) or Trial. For more details visit: https://code.visualstudio.com/api/working-with-extensions/publishing-extension#extension-pricing-label"),enum:["Free","Trial"],default:"Free"}}},aC=class{_extensionPoints=new Map;registerExtensionPoint(e){if(this._extensionPoints.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);let t=new rC(e.extensionPoint,e.defaultExtensionKind);return this._extensionPoints.set(e.extensionPoint,t),e.activationEventsGenerator&&iC.register(e.extensionPoint,e.activationEventsGenerator),sC.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,lC.registerSchema(SL,sC),t}getExtensionPoints(){return Array.from(this._extensionPoints.values())}},EL={ExtensionsRegistry:"ExtensionsRegistry"};Ae.add(EL.ExtensionsRegistry,new aC);var CL=Ae.as(EL.ExtensionsRegistry);lC.registerSchema(SL,sC);lC.registerSchema(ED,{properties:{extensionEnabledApiProposals:{description:d("product.extensionEnabledApiProposals","API proposals that the respective extensions can freely use."),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(Pp),markdownEnumDescriptions:Object.values(Pp).map(i=>i.proposal)}}]}}}});var Qht=Object.freeze({identifier:new Fi("nullExtensionDescription"),name:"Null Extension Description",version:"0.0.0",publisher:"vscode",engines:{vscode:""},extensionLocation:N.parse("void:location"),isBuiltin:!1,targetPlatform:"undefined",isUserBuiltin:!1,isUnderDevelopment:!1});var bb=P("extensionService");var dC=`
body {
	padding: 10px 20px;
	line-height: 22px;
	max-width: 882px;
	margin: 0 auto;
}

body *:last-child {
	margin-bottom: 0;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: var(--text-link-decoration);
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

th {
	text-align: left;
	border-bottom: 1px solid;
}

th,
td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top-width: 1px;
	border-top-style: solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: "SF Mono", Monaco, Menlo, Consolas, "Ubuntu Mono", "Liberation Mono", "DejaVu Sans Mono", "Courier New", monospace;
}

pre {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	font-family: var(--vscode-editor-font-family);
	font-weight: var(--vscode-editor-font-weight);
	font-size: var(--vscode-editor-font-size);
	line-height: 1.5;
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

.monaco-tokenized-source {
	white-space: pre;
}

/** Theming */

.pre {
	background-color: var(--vscode-textCodeBlock-background);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark td {
	border-color: rgba(255, 255, 255, 0.18);
}

@media (forced-colors: active) and (prefers-color-scheme: light){
	body {
		forced-color-adjust: none;
	}
}

@media (forced-colors: active) and (prefers-color-scheme: dark){
	body {
		forced-color-adjust: none;
	}
}
`,T2=[H.http,H.https,H.command];function k2(i,e){let t=Zh(T2,!0);try{return xa(i,{ALLOWED_TAGS:[...eg,"checkbox","checklist"],ALLOWED_ATTR:[...oI,"data-command","name","id","role","tabindex","x-dispatch","required","checked","placeholder","when-checked","checked-on"],...e?{ALLOW_UNKNOWN_PROTOCOLS:!0}:{}})}finally{t.dispose()}}async function wL(i,e,t,n){let r=await new fk(TL.markedHighlight({async:!0,async highlight(s,a){if(typeof a!="string")return _r(s);if(await e.whenInstalledExtensionsRegistered(),n?.token?.isCancellationRequested)return"";let l=t.getLanguageIdByLanguageName(a)??t.getLanguageIdByLanguageName(a.split(/\s+|:|,|(?!^)\{|\?]/,1)[0]);return of(t,s,l)}}),kL.gfmHeadingId(),...n?.markedExtensions??[]).parse(i,{async:!0});return n?.shouldSanitize??!0?k2(r,n?.allowUnknownProtocols??!1):r}var TL;(u=>{function i(p){if(typeof p=="function"&&(p={highlight:p}),!p||typeof p.highlight!="function")throw new Error("Must provide highlight function");return{async:!!p.async,walkTokens(h){if(h.type!=="code")return;let m=e(h.lang);if(p.async)return Promise.resolve(p.highlight(h.text,m,h.lang||"")).then(t(h));let v=p.highlight(h.text,m,h.lang||"");if(v instanceof Promise)throw new Error("markedHighlight is not set to async but the highlight function is async. Set the async option to true on markedHighlight to await the async highlight function.");t(h)(v)},renderer:{code({text:h,lang:m,escaped:v}){let f=m?` class="language-${c(m)}"`:"";return h=h.replace(/\n$/,""),`<pre><code${f}>${v?h:c(h,!0)}
</code></pre>`}}}}u.markedHighlight=i;function e(p){return(p||"").match(/\S*/)[0]}function t(p){return h=>{typeof h=="string"&&h!==p.text&&(p.escaped=!0,p.text=h)}}let n=/[&<>"']/,o=new RegExp(n.source,"g"),r=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,s=new RegExp(r.source,"g"),a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},l=p=>a[p];function c(p,h){if(h){if(n.test(p))return p.replace(o,l)}else if(r.test(p))return p.replace(s,l);return p}})(TL||={});var kL;(r=>{let i=/[\0-\x1F!-,\.\/:-@\[-\^`\{-\xA9\xAB-\xB4\xB6-\xB9\xBB-\xBF\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0378\u0379\u037E\u0380-\u0385\u0387\u038B\u038D\u03A2\u03F6\u0482\u0530\u0557\u0558\u055A-\u055F\u0589-\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05EB-\u05EE\u05F3-\u060F\u061B-\u061F\u066A-\u066D\u06D4\u06DD\u06DE\u06E9\u06FD\u06FE\u0700-\u070F\u074B\u074C\u07B2-\u07BF\u07F6-\u07F9\u07FB\u07FC\u07FE\u07FF\u082E-\u083F\u085C-\u085F\u086B-\u089F\u08B5\u08C8-\u08D2\u08E2\u0964\u0965\u0970\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09F2-\u09FB\u09FD\u09FF\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF0-\u0AF8\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B54\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B70\u0B72-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BF0-\u0BFF\u0C0D\u0C11\u0C29\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5B-\u0C5F\u0C64\u0C65\u0C70-\u0C7F\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0CFF\u0D0D\u0D11\u0D45\u0D49\u0D4F-\u0D53\u0D58-\u0D5E\u0D64\u0D65\u0D70-\u0D79\u0D80\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DE5\u0DF0\u0DF1\u0DF4-\u0E00\u0E3B-\u0E3F\u0E4F\u0E5A-\u0E80\u0E83\u0E85\u0E8B\u0EA4\u0EA6\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F01-\u0F17\u0F1A-\u0F1F\u0F2A-\u0F34\u0F36\u0F38\u0F3A-\u0F3D\u0F48\u0F6D-\u0F70\u0F85\u0F98\u0FBD-\u0FC5\u0FC7-\u0FFF\u104A-\u104F\u109E\u109F\u10C6\u10C8-\u10CC\u10CE\u10CF\u10FB\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u1360-\u137F\u1390-\u139F\u13F6\u13F7\u13FE-\u1400\u166D\u166E\u1680\u169B-\u169F\u16EB-\u16ED\u16F9-\u16FF\u170D\u1715-\u171F\u1735-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17D4-\u17D6\u17D8-\u17DB\u17DE\u17DF\u17EA-\u180A\u180E\u180F\u181A-\u181F\u1879-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191F\u192C-\u192F\u193C-\u1945\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DA-\u19FF\u1A1C-\u1A1F\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1AA6\u1AA8-\u1AAF\u1AC1-\u1AFF\u1B4C-\u1B4F\u1B5A-\u1B6A\u1B74-\u1B7F\u1BF4-\u1BFF\u1C38-\u1C3F\u1C4A-\u1C4C\u1C7E\u1C7F\u1C89-\u1C8F\u1CBB\u1CBC\u1CC0-\u1CCF\u1CD3\u1CFB-\u1CFF\u1DFA\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FBD\u1FBF-\u1FC1\u1FC5\u1FCD-\u1FCF\u1FD4\u1FD5\u1FDC-\u1FDF\u1FED-\u1FF1\u1FF5\u1FFD-\u203E\u2041-\u2053\u2055-\u2070\u2072-\u207E\u2080-\u208F\u209D-\u20CF\u20F1-\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F-\u215F\u2189-\u24B5\u24EA-\u2BFF\u2C2F\u2C5F\u2CE5-\u2CEA\u2CF4-\u2CFF\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D70-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E00-\u2E2E\u2E30-\u3004\u3008-\u3020\u3030\u3036\u3037\u303D-\u3040\u3097\u3098\u309B\u309C\u30A0\u30FB\u3100-\u3104\u3130\u318F-\u319F\u31C0-\u31EF\u3200-\u33FF\u4DC0-\u4DFF\u9FFD-\u9FFF\uA48D-\uA4CF\uA4FE\uA4FF\uA60D-\uA60F\uA62C-\uA63F\uA673\uA67E\uA6F2-\uA716\uA720\uA721\uA789\uA78A\uA7C0\uA7C1\uA7CB-\uA7F4\uA828-\uA82B\uA82D-\uA83F\uA874-\uA87F\uA8C6-\uA8CF\uA8DA-\uA8DF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA954-\uA95F\uA97D-\uA97F\uA9C1-\uA9CE\uA9DA-\uA9DF\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A-\uAA5F\uAA77-\uAA79\uAAC3-\uAADA\uAADE\uAADF\uAAF0\uAAF1\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F\uAB5B\uAB6A-\uAB6F\uABEB\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uD7FF\uE000-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB29\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBB2-\uFBD2\uFD3E-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFC-\uFDFF\uFE10-\uFE1F\uFE30-\uFE32\uFE35-\uFE4C\uFE50-\uFE6F\uFE75\uFEFD-\uFF0F\uFF1A-\uFF20\uFF3B-\uFF3E\uFF40\uFF5B-\uFF65\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFFF]|\uD800[\uDC0C\uDC27\uDC3B\uDC3E\uDC4E\uDC4F\uDC5E-\uDC7F\uDCFB-\uDD3F\uDD75-\uDDFC\uDDFE-\uDE7F\uDE9D-\uDE9F\uDED1-\uDEDF\uDEE1-\uDEFF\uDF20-\uDF2C\uDF4B-\uDF4F\uDF7B-\uDF7F\uDF9E\uDF9F\uDFC4-\uDFC7\uDFD0\uDFD6-\uDFFF]|\uD801[\uDC9E\uDC9F\uDCAA-\uDCAF\uDCD4-\uDCD7\uDCFC-\uDCFF\uDD28-\uDD2F\uDD64-\uDDFF\uDF37-\uDF3F\uDF56-\uDF5F\uDF68-\uDFFF]|\uD802[\uDC06\uDC07\uDC09\uDC36\uDC39-\uDC3B\uDC3D\uDC3E\uDC56-\uDC5F\uDC77-\uDC7F\uDC9F-\uDCDF\uDCF3\uDCF6-\uDCFF\uDD16-\uDD1F\uDD3A-\uDD7F\uDDB8-\uDDBD\uDDC0-\uDDFF\uDE04\uDE07-\uDE0B\uDE14\uDE18\uDE36\uDE37\uDE3B-\uDE3E\uDE40-\uDE5F\uDE7D-\uDE7F\uDE9D-\uDEBF\uDEC8\uDEE7-\uDEFF\uDF36-\uDF3F\uDF56-\uDF5F\uDF73-\uDF7F\uDF92-\uDFFF]|\uD803[\uDC49-\uDC7F\uDCB3-\uDCBF\uDCF3-\uDCFF\uDD28-\uDD2F\uDD3A-\uDE7F\uDEAA\uDEAD-\uDEAF\uDEB2-\uDEFF\uDF1D-\uDF26\uDF28-\uDF2F\uDF51-\uDFAF\uDFC5-\uDFDF\uDFF7-\uDFFF]|\uD804[\uDC47-\uDC65\uDC70-\uDC7E\uDCBB-\uDCCF\uDCE9-\uDCEF\uDCFA-\uDCFF\uDD35\uDD40-\uDD43\uDD48-\uDD4F\uDD74\uDD75\uDD77-\uDD7F\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDFF\uDE12\uDE38-\uDE3D\uDE3F-\uDE7F\uDE87\uDE89\uDE8E\uDE9E\uDEA9-\uDEAF\uDEEB-\uDEEF\uDEFA-\uDEFF\uDF04\uDF0D\uDF0E\uDF11\uDF12\uDF29\uDF31\uDF34\uDF3A\uDF45\uDF46\uDF49\uDF4A\uDF4E\uDF4F\uDF51-\uDF56\uDF58-\uDF5C\uDF64\uDF65\uDF6D-\uDF6F\uDF75-\uDFFF]|\uD805[\uDC4B-\uDC4F\uDC5A-\uDC5D\uDC62-\uDC7F\uDCC6\uDCC8-\uDCCF\uDCDA-\uDD7F\uDDB6\uDDB7\uDDC1-\uDDD7\uDDDE-\uDDFF\uDE41-\uDE43\uDE45-\uDE4F\uDE5A-\uDE7F\uDEB9-\uDEBF\uDECA-\uDEFF\uDF1B\uDF1C\uDF2C-\uDF2F\uDF3A-\uDFFF]|\uD806[\uDC3B-\uDC9F\uDCEA-\uDCFE\uDD07\uDD08\uDD0A\uDD0B\uDD14\uDD17\uDD36\uDD39\uDD3A\uDD44-\uDD4F\uDD5A-\uDD9F\uDDA8\uDDA9\uDDD8\uDDD9\uDDE2\uDDE5-\uDDFF\uDE3F-\uDE46\uDE48-\uDE4F\uDE9A-\uDE9C\uDE9E-\uDEBF\uDEF9-\uDFFF]|\uD807[\uDC09\uDC37\uDC41-\uDC4F\uDC5A-\uDC71\uDC90\uDC91\uDCA8\uDCB7-\uDCFF\uDD07\uDD0A\uDD37-\uDD39\uDD3B\uDD3E\uDD48-\uDD4F\uDD5A-\uDD5F\uDD66\uDD69\uDD8F\uDD92\uDD99-\uDD9F\uDDAA-\uDEDF\uDEF7-\uDFAF\uDFB1-\uDFFF]|\uD808[\uDF9A-\uDFFF]|\uD809[\uDC6F-\uDC7F\uDD44-\uDFFF]|[\uD80A\uD80B\uD80E-\uD810\uD812-\uD819\uD824-\uD82B\uD82D\uD82E\uD830-\uD833\uD837\uD839\uD83D\uD83F\uD87B-\uD87D\uD87F\uD885-\uDB3F\uDB41-\uDBFF][\uDC00-\uDFFF]|\uD80D[\uDC2F-\uDFFF]|\uD811[\uDE47-\uDFFF]|\uD81A[\uDE39-\uDE3F\uDE5F\uDE6A-\uDECF\uDEEE\uDEEF\uDEF5-\uDEFF\uDF37-\uDF3F\uDF44-\uDF4F\uDF5A-\uDF62\uDF78-\uDF7C\uDF90-\uDFFF]|\uD81B[\uDC00-\uDE3F\uDE80-\uDEFF\uDF4B-\uDF4E\uDF88-\uDF8E\uDFA0-\uDFDF\uDFE2\uDFE5-\uDFEF\uDFF2-\uDFFF]|\uD821[\uDFF8-\uDFFF]|\uD823[\uDCD6-\uDCFF\uDD09-\uDFFF]|\uD82C[\uDD1F-\uDD4F\uDD53-\uDD63\uDD68-\uDD6F\uDEFC-\uDFFF]|\uD82F[\uDC6B-\uDC6F\uDC7D-\uDC7F\uDC89-\uDC8F\uDC9A-\uDC9C\uDC9F-\uDFFF]|\uD834[\uDC00-\uDD64\uDD6A-\uDD6C\uDD73-\uDD7A\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDE41\uDE45-\uDFFF]|\uD835[\uDC55\uDC9D\uDCA0\uDCA1\uDCA3\uDCA4\uDCA7\uDCA8\uDCAD\uDCBA\uDCBC\uDCC4\uDD06\uDD0B\uDD0C\uDD15\uDD1D\uDD3A\uDD3F\uDD45\uDD47-\uDD49\uDD51\uDEA6\uDEA7\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3\uDFCC\uDFCD]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85-\uDE9A\uDEA0\uDEB0-\uDFFF]|\uD838[\uDC07\uDC19\uDC1A\uDC22\uDC25\uDC2B-\uDCFF\uDD2D-\uDD2F\uDD3E\uDD3F\uDD4A-\uDD4D\uDD4F-\uDEBF\uDEFA-\uDFFF]|\uD83A[\uDCC5-\uDCCF\uDCD7-\uDCFF\uDD4C-\uDD4F\uDD5A-\uDFFF]|\uD83B[\uDC00-\uDDFF\uDE04\uDE20\uDE23\uDE25\uDE26\uDE28\uDE33\uDE38\uDE3A\uDE3C-\uDE41\uDE43-\uDE46\uDE48\uDE4A\uDE4C\uDE50\uDE53\uDE55\uDE56\uDE58\uDE5A\uDE5C\uDE5E\uDE60\uDE63\uDE65\uDE66\uDE6B\uDE73\uDE78\uDE7D\uDE7F\uDE8A\uDE9C-\uDEA0\uDEA4\uDEAA\uDEBC-\uDFFF]|\uD83C[\uDC00-\uDD2F\uDD4A-\uDD4F\uDD6A-\uDD6F\uDD8A-\uDFFF]|\uD83E[\uDC00-\uDFEF\uDFFA-\uDFFF]|\uD869[\uDEDE-\uDEFF]|\uD86D[\uDF35-\uDF3F]|\uD86E[\uDC1E\uDC1F]|\uD873[\uDEA2-\uDEAF]|\uD87A[\uDFE1-\uDFFF]|\uD87E[\uDE1E-\uDFFF]|\uD884[\uDF4B-\uDFFF]|\uDB40[\uDC00-\uDCFF\uDDF0-\uDFFF]/g;function e(s){return s.trim().toLowerCase().replace(i,"").replace(/\s/g,"-")}let t=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function n(s){return s.replace(t,(a,l)=>(l=l.toLowerCase(),l==="colon"?":":l.charAt(0)==="#"?l.charAt(1)==="x"?String.fromCharCode(parseInt(l.substring(2),16)):String.fromCharCode(+l.substring(1)):""))}function o({prefix:s="",globalSlugs:a=!1}={}){return{renderer:{heading({tokens:l,depth:c}){let u=this.parser.parseInline(l),p=n(this.parser.parseInline(l,this.parser.textRenderer)).trim().replace(/<[!\/a-z].*?>/gi,""),h=c,m=`${s}${e(p)}`;return`<h${h} id="${m}">${u}</h${h}>
`}}}}r.gfmHeadingId=o})(kL||={});var DL="vscode-cdn.net",D2=`vscode-resource.${DL}`,hgt=`'self' https://*.${DL}`;function _L(i,e){return i.scheme===H.http||i.scheme===H.https?i:(e&&e.authority&&e.isRemote&&i.scheme===H.file&&(i=N.from({scheme:H.vscodeRemote,authority:e.authority,path:i.path})),N.from({scheme:H.https,authority:`${i.scheme}+${_2(i.authority)}.${D2}`,path:i.path,fragment:i.fragment,query:i.query}))}function _2(i){return i.replace(/./g,e=>{let t=e.charCodeAt(0);return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57?e:"-"+t.toString(16).padStart(4,"0")})}var lc=class{constructor(e,t,n,o){this.fileService=e;this.notificationService=t;this.extensionService=n;this.languageService=o}mdCache=new bt;svgCache=new bt;async renderMarkdown(e,t){let n=await this.readAndCacheStepMarkdown(e,t),o=Sn(),r=Os.getColorMap(),s=r?tC(r):"";return`<!DOCTYPE html>
		<html>
			<head>
				<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
				<meta http-equiv="Content-Security-Policy" content="default-src 'none'; ${document.location.protocol==="http:"?"img-src https: data: http:":"img-src https: data:"}; media-src https:; script-src 'nonce-${o}'; style-src 'nonce-${o}';">
				<style nonce="${o}">
					${dC}
					${s}
					body > img {
						align-self: flex-start;
					}
					body > img[centered] {
						align-self: center;
					}
					body {
						display: flex;
						flex-direction: column;
						padding: 0;
						height: inherit;
					}
					.theme-picker-row {
						display: flex;
						justify-content: center;
						gap: 32px;
					}
					checklist {
						display: flex;
						gap: 32px;
						flex-direction: column;
					}
					checkbox {
						display: flex;
						flex-direction: column;
						align-items: center;
						margin: 5px;
						cursor: pointer;
					}
					checkbox > img {
						margin-bottom: 8px !important;
					}
					checkbox.checked > img {
						box-sizing: border-box;
					}
					checkbox.checked > img {
						outline: 2px solid var(--vscode-focusBorder);
						outline-offset: 4px;
						border-radius: 4px;
					}
					.theme-picker-link {
						margin-top: 16px;
						color: var(--vscode-textLink-foreground);
					}
					blockquote > p:first-child {
						margin-top: 0;
					}
					body > * {
						margin-block-end: 0.25em;
						margin-block-start: 0.25em;
					}
					vertically-centered {
						padding-top: 5px;
						padding-bottom: 5px;
						display: flex;
						justify-content: center;
						flex-direction: column;
					}
					html {
						height: 100%;
						padding-right: 32px;
					}
					h1 {
						font-size: 19.5px;
					}
					h2 {
						font-size: 18.5px;
					}
				</style>
			</head>
			<body>
				<vertically-centered>
					${n}
				</vertically-centered>
			</body>
			<script nonce="${o}">
				const vscode = acquireVsCodeApi();

				document.querySelectorAll('[when-checked]').forEach(el => {
					el.addEventListener('click', () => {
						vscode.postMessage(el.getAttribute('when-checked'));
					});
				});

				let ongoingLayout = undefined;
				const doLayout = () => {
					document.querySelectorAll('vertically-centered').forEach(element => {
						element.style.marginTop = Math.max((document.body.clientHeight - element.scrollHeight) * 3/10, 0) + 'px';
					});
					ongoingLayout = undefined;
				};

				const layout = () => {
					if (ongoingLayout) {
						clearTimeout(ongoingLayout);
					}
					ongoingLayout = setTimeout(doLayout, 0);
				};

				layout();

				document.querySelectorAll('img').forEach(element => {
					element.onload = layout;
				})

				window.addEventListener('message', event => {
					if (event.data.layoutMeNow) {
						layout();
					}
					if (event.data.enabledContextKeys) {
						document.querySelectorAll('.checked').forEach(element => element.classList.remove('checked'))
						for (const key of event.data.enabledContextKeys) {
							document.querySelectorAll('[checked-on="' + key + '"]').forEach(element => element.classList.add('checked'))
						}
					}
				});
		</script>
		</html>`}async renderSVG(e){let t=await this.readAndCacheSVGFile(e),n=Sn(),o=Os.getColorMap(),r=o?tC(o):"";return`<!DOCTYPE html>
		<html>
			<head>
				<meta http-equiv="Content-type" content="text/html;charset=UTF-8">
				<meta http-equiv="Content-Security-Policy" content="default-src 'none'; img-src data:; style-src 'nonce-${n}';">
				<style nonce="${n}">
					${dC}
					${r}
					svg {
						position: fixed;
						height: 100%;
						width: 80%;
						left: 50%;
						top: 50%;
						max-width: 530px;
						min-width: 350px;
						transform: translate(-50%,-50%);
					}
				</style>
			</head>
			<body>
				${t}
			</body>
		</html>`}async readAndCacheSVGFile(e){if(!this.svgCache.has(e)){let t=await this.readContentsOfPath(e,!1);this.svgCache.set(e,t)}return Rt(this.svgCache.get(e))}async readAndCacheStepMarkdown(e,t){if(!this.mdCache.has(e)){let n=await this.readContentsOfPath(e),o=await wL(L2(n,t),this.extensionService,this.languageService,{allowUnknownProtocols:!0});this.mdCache.set(e,o)}return Rt(this.mdCache.get(e))}async readContentsOfPath(e,t=!0){try{let n=JSON.parse(e.query).moduleId;if(t&&n)return(await import(n)).default()}catch{}try{let n=e.with({path:e.path.replace(/\.md$/,`.nls.${Xn}.md`)}),o=Xn?.replace(/-.*$/,""),r=e.with({path:e.path.replace(/\.md$/,`.nls.${o}.md`)}),s=u=>this.fileService.stat(u).then(p=>!!p.size).catch(()=>!1),[a,l]=await Promise.all([s(n),s(r)]);return(await this.fileService.readFile(a?n:l?r:e)).value.toString()}catch(n){return this.notificationService.error("Error reading markdown document at `"+e+"`: "+n),""}}};lc=L([w(0,Gt),w(1,Vs),w(2,bb),w(3,Pt)],lc);var LL=(i,e)=>{let t=Oe(e,i);return _L(t).toString(!0)},L2=(i,e)=>i.replace(/src="([^"]*)"/g,(t,n)=>n.startsWith("https://")?`src="${n}"`:`src="${LL(n,e)}"`).replace(/!\[([^\]]*)\]\(([^)]*)\)/g,(t,n,o)=>o.startsWith("https://")?`![${n}](${o})`:`![${n}](${LL(o,e)})`);var vb=wo("getting-started-step-unchecked",j.circleLargeOutline,d("gettingStartedUnchecked","Used to represent walkthrough steps which have not been completed")),yb=wo("getting-started-step-checked",j.passFilled,d("gettingStartedChecked","Used to represent walkthrough steps which have been completed"));var Ib="workbench.editors.gettingStartedInput",Ti=class i extends _o{static ID=Ib;static RESOURCE=N.from({scheme:H.walkThrough,authority:"vscode_getting_started_page"});get typeId(){return i.ID}get editorId(){return this.typeId}toUntyped(){return{resource:i.RESOURCE,options:{override:i.ID,pinned:!1}}}get resource(){return i.RESOURCE}matches(e){return super.matches(e)?!0:e instanceof i?e.selectedCategory===this.selectedCategory:!1}constructor(e){super(),this.selectedCategory=e.selectedCategory,this.selectedStep=e.selectedStep,this.showTelemetryNotice=!!e.showTelemetryNotice}getName(){return d("getStarted","Welcome")}selectedCategory;selectedStep;showTelemetryNotice};async function RL(i,e,t){let n=t&&t.get("storage.serviceMachineId",-1)||null;if(n)return n;try{let r=(await e.readFile(i.serviceMachineIdResource)).value.toString();n=Ak(r)?r:null}catch{n=null}if(!n){n=Sn();try{await e.writeFile(i.serviceMachineIdResource,ot.fromString(n))}catch{}}return t?.store("storage.serviceMachineId",n,-1,1),n}var ymt=P("IUserDataSyncMachinesService"),PL="sync.currentMachineName",R2="Safari",P2="Chrome",O2="Edge",A2="Firefox",M2="Android";function OL(){return nh?R2:wc?P2:ih?O2:hl?A2:QC?M2:Qb(At?0:eh)}var gr=class extends A{constructor(t,n,o,r,s,a){super();this.storageService=o;this.userDataSyncStoreService=r;this.logService=s;this.productService=a;this.currentMachineIdPromise=RL(t,n,o)}static VERSION=1;static RESOURCE="machines";_serviceBrand;_onDidChange=this._register(new C);onDidChange=this._onDidChange.event;currentMachineIdPromise;userData=null;async getMachines(t){let n=await this.currentMachineIdPromise;return(await this.readMachinesData(t)).machines.map(r=>({...r,isCurrent:r.id===n}))}async addCurrentMachine(t){let n=await this.currentMachineIdPromise,o=await this.readMachinesData(t);o.machines.some(({id:r})=>r===n)||(o.machines.push({id:n,name:this.computeCurrentMachineName(o.machines),platform:OL()}),await this.writeMachinesData(o))}async removeCurrentMachine(t){let n=await this.currentMachineIdPromise,o=await this.readMachinesData(t),r=o.machines.filter(({id:s})=>s!==n);r.length!==o.machines.length&&(o.machines=r,await this.writeMachinesData(o))}async renameMachine(t,n,o){let r=await this.readMachinesData(o),s=r.machines.find(({id:a})=>a===t);if(s){s.name=n,await this.writeMachinesData(r);let a=await this.currentMachineIdPromise;t===a&&this.storageService.store(PL,n,-1,1)}}async setEnablements(t){let n=await this.readMachinesData();for(let[o,r]of t){let s=n.machines.find(a=>a.id===o);s&&(s.disabled=r?void 0:!0)}await this.writeMachinesData(n)}computeCurrentMachineName(t){let n=this.storageService.get(PL,-1);if(n)return n;let o=`${this.productService.embedderIdentifier?`${this.productService.embedderIdentifier} - `:""}${OL()} (${this.productService.nameShort})`,r=new RegExp(`${pn(o)}\\s#(\\d+)`),s=0;for(let a of t){let l=r.exec(a.name),c=l?parseInt(l[1]):0;s=c>s?c:s}return`${o} #${s+1}`}async readMachinesData(t){this.userData=await this.readUserData(t);let n=this.parse(this.userData);if(n.version!==gr.VERSION)throw new Error(d("error incompatible","Cannot read machines data as the current version is incompatible. Please update {0} and try again.",this.productService.nameLong));return n}async writeMachinesData(t){let n=JSON.stringify(t),o=await this.userDataSyncStoreService.writeResource(gr.RESOURCE,n,this.userData?.ref||null);this.userData={ref:o,content:n},this._onDidChange.fire()}async readUserData(t){if(this.userData){let n=t&&t.latest?t.latest[gr.RESOURCE]:void 0;if(this.userData.ref===n)return this.userData;if(n===void 0&&this.userData.content===null)return this.userData}return this.userDataSyncStoreService.readResource(gr.RESOURCE,this.userData)}parse(t){if(t.content!==null)try{return JSON.parse(t.content)}catch(n){this.logService.error(n)}return{version:gr.VERSION,machines:[]}}};gr=L([w(0,An),w(1,Gt),w(2,vn),w(3,AL),w(4,ML),w(5,or)],gr);var uft=P("IUserDataSyncStoreManagementService"),AL=P("IUserDataSyncStoreService"),pft=P("IUserDataSyncLocalStoreService");var xb=class extends Error{constructor(t,n,o,r){super(t);this.code=n;this.resource=o;this.operationId=r;this.name=`${this.code} (UserDataSyncError) syncResource:${this.resource||"unknown"} operationId:${this.operationId||"unknown"}`}};(e=>{function i(t){if(t instanceof e)return t;let n=/^(.+) \(UserDataSyncError\) syncResource:(.+) operationId:(.+)$/.exec(t.name);if(n&&n[1]){let o=n[2]==="unknown"?void 0:n[2],r=n[3]==="unknown"?void 0:n[3];return new e(t.message,n[1],o,r)}return new e(t.message,"Unknown")}e.toUserDataSyncError=i})(xb||={});var NL=P("IUserDataSyncEnablementService"),hft=P("IUserDataSyncService"),gft=P("IUserDataSyncResourceProviderService"),mft=P("IUserDataAutoSyncService"),fft=P("IUserDataSyncUtilService"),ML=P("IUserDataSyncLogService");var na=class extends A{constructor(t){super();this._rawOutput=t;this._alternativeOutputId=this._rawOutput.outputId}_onDidChangeData=this._register(new C);onDidChangeData=this._onDidChangeData.event;get outputs(){return this._rawOutput.outputs||[]}get metadata(){return this._rawOutput.metadata}get outputId(){return this._rawOutput.outputId}_alternativeOutputId;get alternativeOutputId(){return this._alternativeOutputId}_versionId=0;get versionId(){return this._versionId}replaceData(t){this.versionedBufferLengths={},this._rawOutput=t,this.optimizeOutputItems(),this._versionId=this._versionId+1,this._onDidChangeData.fire()}appendData(t){this.trackBufferLengths(),this._rawOutput.outputs.push(...t),this.optimizeOutputItems(),this._versionId=this._versionId+1,this._onDidChangeData.fire()}trackBufferLengths(){this.outputs.forEach(t=>{cC(t.mime)&&(this.versionedBufferLengths[t.mime]||(this.versionedBufferLengths[t.mime]={}),this.versionedBufferLengths[t.mime][this.versionId]=t.data.byteLength)})}versionedBufferLengths={};appendedSinceVersion(t,n){let o=this.versionedBufferLengths[n]?.[t],r=this.outputs.find(s=>s.mime===n);if(o&&r)return r.data.slice(o)}optimizeOutputItems(){if(this.outputs.length>1&&this.outputs.every(t=>cC(t.mime))){let t=new Map,n=[];this.outputs.forEach(o=>{let r;t.has(o.mime)?r=t.get(o.mime):(r=[],t.set(o.mime,r),n.push(o.mime)),r.push(o.data.buffer)}),this.outputs.length=0,n.forEach(o=>{let r=FL(t.get(o));this.outputs.push({mime:o,data:r.data}),r.didCompression&&(this.versionedBufferLengths={})})}}asDto(){return{metadata:this._rawOutput.metadata,outputs:this._rawOutput.outputs,outputId:this._rawOutput.outputId}}bumpVersion(){this._versionId=this._versionId+1}};var Op=class i extends A{constructor(t,n,o,r,s,a,l,c,u,p,h,m,v=void 0){super();this.uri=t;this.handle=n;this._source=o;this._language=r;this._mime=s;this.cellKind=a;this.collapseState=p;this.transientOptions=h;this._languageService=m;this._languageDetectionService=v;this._outputs=l.map(f=>new na(f)),this._metadata=c??{},this._internalMetadata=u??{}}_onDidChangeOutputs=this._register(new C);onDidChangeOutputs=this._onDidChangeOutputs.event;_onDidChangeOutputItems=this._register(new C);onDidChangeOutputItems=this._onDidChangeOutputItems.event;_onDidChangeContent=this._register(new C);onDidChangeContent=this._onDidChangeContent.event;_onDidChangeMetadata=this._register(new C);onDidChangeMetadata=this._onDidChangeMetadata.event;_onDidChangeInternalMetadata=this._register(new C);onDidChangeInternalMetadata=this._onDidChangeInternalMetadata.event;_onDidChangeLanguage=this._register(new C);onDidChangeLanguage=this._onDidChangeLanguage.event;_outputs;get outputs(){return this._outputs}_metadata;get metadata(){return this._metadata}set metadata(t){this._metadata=t,this._hash=null,this._onDidChangeMetadata.fire()}_internalMetadata;get internalMetadata(){return this._internalMetadata}set internalMetadata(t){let n=this._internalMetadata.lastRunSuccess!==t.lastRunSuccess;t={...t,runStartTimeAdjustment:N2(this._internalMetadata,t)},this._internalMetadata=t,this._hash=null,this._onDidChangeInternalMetadata.fire({lastRunSuccessChanged:n})}get language(){return this._language}set language(t){this._textModel&&this._textModel.getLanguageId()===this._languageService.getLanguageIdByLanguageName(t)&&this._textModel.getLanguageId()===this._languageService.getLanguageIdByLanguageName(this.language)||(this._hasLanguageSetExplicitly=!0,this._setLanguageInternal(t))}get mime(){return this._mime}set mime(t){this._mime!==t&&(this._mime=t,this._hash=null,this._onDidChangeContent.fire("mime"))}_textBuffer;get textBuffer(){if(this._textBuffer)return this._textBuffer;let t=new Xs;t.acceptChunk(this._source);let n=t.finish(!0),{textBuffer:o,disposable:r}=n.create(1);return this._textBuffer=o,this._register(r),this._register(this._textBuffer.onDidChangeContent(()=>{this._hash=null,this._textModel||this._onDidChangeContent.fire("content"),this.autoDetectLanguage()})),this._textBuffer}_textBufferHash=null;_hash=null;_versionId=1;_alternativeId=1;get alternativeId(){return this._alternativeId}_textModelDisposables=this._register(new re);_textModel=void 0;get textModel(){return this._textModel}set textModel(t){this._textModel!==t&&(this._textModelDisposables.clear(),this._textModel=t,this._textModel&&(this.setRegisteredLanguage(this._languageService,this._textModel.getLanguageId(),this.language),this._textModelDisposables.add(this._textModel.onDidChangeLanguage(n=>this.setRegisteredLanguage(this._languageService,n.newLanguage,this.language))),this._textModelDisposables.add(this._textModel.onWillDispose(()=>this.textModel=void 0)),this._textModelDisposables.add(this._textModel.onDidChangeContent(()=>{this._textModel&&(this._versionId=this._textModel.getVersionId(),this._alternativeId=this._textModel.getAlternativeVersionId()),this._textBufferHash=null,this._onDidChangeContent.fire("content")})),this._textModel._overwriteVersionId(this._versionId),this._textModel._overwriteAlternativeVersionId(this._versionId)))}setRegisteredLanguage(t,n,o){let r=n===Ni||n==="jupyter";!t.isRegisteredLanguageId(o)&&r?this._onDidChangeLanguage.fire(o):this.language=n}static AUTO_DETECT_LANGUAGE_THROTTLE_DELAY=600;autoDetectLanguageThrottler=this._register(new Ia(i.AUTO_DETECT_LANGUAGE_THROTTLE_DELAY));_autoLanguageDetectionEnabled=!1;_hasLanguageSetExplicitly=!1;get hasLanguageSetExplicitly(){return this._hasLanguageSetExplicitly}enableAutoLanguageDetection(){this._autoLanguageDetectionEnabled=!0,this.autoDetectLanguage()}async autoDetectLanguage(){this._autoLanguageDetectionEnabled&&this.autoDetectLanguageThrottler.trigger(()=>this._doAutoDetectLanguage())}async _doAutoDetectLanguage(){if(this.hasLanguageSetExplicitly)return;let t=await this._languageDetectionService?.detectLanguage(this.uri);t&&(this._textModel&&this._textModel.getLanguageId()===this._languageService.getLanguageIdByLanguageName(t)&&this._textModel.getLanguageId()===this._languageService.getLanguageIdByLanguageName(this.language)||this._setLanguageInternal(t))}_setLanguageInternal(t){let n=this._languageService.getLanguageIdByLanguageName(t);if(n!==null){if(this._textModel){let o=this._languageService.createById(n);this._textModel.setLanguage(o.languageId)}this._language!==t&&(this._language=t,this._hash=null,this._onDidChangeLanguage.fire(t),this._onDidChangeContent.fire("language"))}}resetTextBuffer(t){this._textBuffer=t}getValue(){let t=this.getFullModelRange();return this.textBuffer.getEOL()===`
`?this.textBuffer.getValueInRange(t,1):this.textBuffer.getValueInRange(t,2)}getTextBufferHash(){if(this._textBufferHash!==null)return this._textBufferHash;let t=new Gh,n=this.textBuffer.createSnapshot(!1),o;for(;o=n.read();)t.update(o);return this._textBufferHash=t.digest(),this._textBufferHash}getHashValue(){return this._hash!==null?this._hash:(this._hash=hi([hi(this.language),this.getTextBufferHash(),this._getPersisentMetadata(),this.transientOptions.transientOutputs?[]:this._outputs.map(t=>({outputs:t.outputs.map(n=>({mime:n.mime,data:Array.from(n.data.buffer)})),metadata:t.metadata}))]),this._hash)}_getPersisentMetadata(){return F2(this.transientOptions.transientCellMetadata,this.metadata,this.language)}getTextLength(){return this.textBuffer.getLength()}getFullModelRange(){let t=this.textBuffer.getLineCount();return new te(1,1,t,this.textBuffer.getLineLength(t)+1)}spliceNotebookCellOutputs(t){if(t.deleteCount>0&&t.newOutputs.length>0){let n=Math.min(t.deleteCount,t.newOutputs.length);for(let r=0;r<n;r++){let s=this.outputs[t.start+r],a=t.newOutputs[r];this.replaceOutput(s.outputId,a)}this.outputs.splice(t.start+n,t.deleteCount-n,...t.newOutputs.slice(n)).forEach(r=>r.dispose()),this._onDidChangeOutputs.fire({start:t.start+n,deleteCount:t.deleteCount-n,newOutputs:t.newOutputs.slice(n)})}else this.outputs.splice(t.start,t.deleteCount,...t.newOutputs).forEach(o=>o.dispose()),this._onDidChangeOutputs.fire(t)}replaceOutput(t,n){let o=this.outputs.findIndex(s=>s.outputId===t);return o<0?!1:(this.outputs[o].replaceData({outputs:n.outputs,outputId:n.outputId,metadata:n.metadata}),n.dispose(),this._onDidChangeOutputItems.fire(),!0)}changeOutputItems(t,n,o){let r=this.outputs.findIndex(a=>a.outputId===t);if(r<0)return!1;let s=this.outputs[r];return n?s.appendData(o):s.replaceData({outputId:t,outputs:o,metadata:s.metadata}),this._onDidChangeOutputItems.fire(),!0}_outputNotEqualFastCheck(t,n){if(t.length!==n.length)return!1;for(let o=0;o<this.outputs.length;o++){let r=t[o],s=n[o];if(r.outputs.length!==s.outputs.length)return!1;for(let a=0;a<r.outputs.length;a++)if(r.outputs[a].mime!==s.outputs[a].mime||r.outputs[a].data.byteLength!==s.outputs[a].data.byteLength)return!1}return!0}equal(t){return this.language!==t.language||this.outputs.length!==t.outputs.length||this.getTextLength()!==t.getTextLength()||!this.transientOptions.transientOutputs&&!this._outputNotEqualFastCheck(this.outputs,t.outputs)?!1:this.getHashValue()===t.getHashValue()}fastEqual(t){return this.language!==t.language||this.mime!==t.mime||this.cellKind!==t.cellKind||this.internalMetadata?.executionOrder!==t.internalMetadata?.executionOrder||this.internalMetadata?.lastRunSuccess!==t.internalMetadata?.lastRunSuccess||this.internalMetadata?.runStartTime!==t.internalMetadata?.runStartTime||this.internalMetadata?.runStartTimeAdjustment!==t.internalMetadata?.runStartTimeAdjustment||this.internalMetadata?.runEndTime!==t.internalMetadata?.runEndTime||this._textBuffer&&this.getValue()!==t.source?!1:this._source===t.source}dispose(){ft(this._outputs);let t=new Qs([],"",`
`,!1,!1,!0,!0);t.dispose(),this._textBuffer=t,super.dispose()}};function N2(i,e){if(i.runStartTime!==e.runStartTime&&typeof e.runStartTime=="number"){let t=Date.now()-e.runStartTime;return t<0?Math.abs(t):0}else return e.runStartTimeAdjustment}function F2(i,e,t){let n={};if(i){let s=new Set([...Object.keys(e)]);for(let a of s)i[a]||(n[a]=e[a])}else n=e;let o={language:t,...n};return t&&(o.language=t),WD(o,{})}var Sb=class{constructor(e,t,n,o,r,s,a){this.resource=e;this.fromIndex=t;this.length=n;this.toIndex=o;this.editingDelegate=r;this.beforedSelections=s;this.endSelections=a}type=0;get label(){return this.length===1?"Move Cell":"Move Cells"}code="undoredo.textBufferEdit";undo(){if(!this.editingDelegate.moveCell)throw new Error("Notebook Move Cell not implemented for Undo/Redo");this.editingDelegate.moveCell(this.toIndex,this.length,this.fromIndex,this.endSelections,this.beforedSelections)}redo(){if(!this.editingDelegate.moveCell)throw new Error("Notebook Move Cell not implemented for Undo/Redo");this.editingDelegate.moveCell(this.fromIndex,this.length,this.toIndex,this.beforedSelections,this.endSelections)}},Eb=class{constructor(e,t,n,o,r){this.resource=e;this.diffs=t;this.editingDelegate=n;this.beforeHandles=o;this.endHandles=r}type=0;get label(){return this.diffs.length===1&&this.diffs[0][1].length===0?this.diffs[0][2].length>1?"Insert Cells":"Insert Cell":this.diffs.length===1&&this.diffs[0][2].length===0?this.diffs[0][1].length>1?"Delete Cells":"Delete Cell":"Insert Cell"}code="undoredo.textBufferEdit";undo(){if(!this.editingDelegate.replaceCell)throw new Error("Notebook Replace Cell not implemented for Undo/Redo");this.diffs.forEach(e=>{this.editingDelegate.replaceCell(e[0],e[2].length,e[1],this.beforeHandles)})}redo(){if(!this.editingDelegate.replaceCell)throw new Error("Notebook Replace Cell not implemented for Undo/Redo");this.diffs.reverse().forEach(e=>{this.editingDelegate.replaceCell(e[0],e[1].length,e[2],this.endHandles)})}},Cb=class{constructor(e,t,n,o,r){this.resource=e;this.index=t;this.oldMetadata=n;this.newMetadata=o;this.editingDelegate=r}type=0;label="Update Cell Metadata";code="undoredo.textBufferEdit";undo(){this.editingDelegate.updateCellMetadata&&this.editingDelegate.updateCellMetadata(this.index,this.oldMetadata)}redo(){this.editingDelegate.updateCellMetadata&&this.editingDelegate.updateCellMetadata(this.index,this.newMetadata)}};var uC=class{constructor(e,t,n,o,r,s){this.textModel=e;this.undoRedoGroup=t;this._pauseableEmitter=n;this._postUndoRedo=o;this.type=1,this._beginSelectionState=r,this._beginAlternativeVersionId=s,this._resultAlternativeVersionId=s}type;get code(){return this._operations.length===1?this._operations[0].code:"undoredo.notebooks.stackOperation"}_operations=[];_beginSelectionState=void 0;_resultSelectionState=void 0;_beginAlternativeVersionId;_resultAlternativeVersionId;get label(){return this._operations.length===1?this._operations[0].label:"edit"}get resources(){return[this.textModel.uri]}get isEmpty(){return this._operations.length===0}pushEndState(e,t){this._resultAlternativeVersionId=e,this._resultSelectionState=t||this._resultSelectionState}pushEditOperation(e,t,n,o){this._operations.length===0&&(this._beginSelectionState=this._beginSelectionState??t),this._operations.push(e),this._resultSelectionState=n,this._resultAlternativeVersionId=o}async undo(){this._pauseableEmitter.pause();try{for(let e=this._operations.length-1;e>=0;e--)await this._operations[e].undo();this._postUndoRedo(this._beginAlternativeVersionId),this._pauseableEmitter.fire({rawEvents:[],synchronous:void 0,versionId:this.textModel.versionId,endSelectionState:this._beginSelectionState})}finally{this._pauseableEmitter.resume()}}async redo(){this._pauseableEmitter.pause();try{for(let e=0;e<this._operations.length;e++)await this._operations[e].redo();this._postUndoRedo(this._resultAlternativeVersionId),this._pauseableEmitter.fire({rawEvents:[],synchronous:void 0,versionId:this.textModel.versionId,endSelectionState:this._resultSelectionState})}finally{this._pauseableEmitter.resume()}}},pC=class{constructor(e,t,n,o){this._textModel=e;this._undoService=t;this._pauseableEmitter=n;this._postUndoRedo=o}_pendingStackOperation=null;isUndoStackEmpty(){return this._pendingStackOperation===null||this._pendingStackOperation.isEmpty}pushStackElement(e,t){this._pendingStackOperation&&!this._pendingStackOperation.isEmpty&&(this._pendingStackOperation.pushEndState(e,t),this._undoService.pushElement(this._pendingStackOperation,this._pendingStackOperation.undoRedoGroup)),this._pendingStackOperation=null}_getOrCreateEditStackElement(e,t,n){return this._pendingStackOperation??=new uC(this._textModel,t,this._pauseableEmitter,this._postUndoRedo,e,n||"")}pushEditOperation(e,t,n,o,r){this._getOrCreateEditStackElement(t,r,o).pushEditOperation(e,t,n,o)}},hC=class extends ls{get isEmpty(){return this._eventQueue.isEmpty()}isDirtyEvent(){for(let e of this._eventQueue)for(let t=0;t<e.rawEvents.length;t++)if(!e.rawEvents[t].transient)return!0;return!1}},dc=class extends A{constructor(t,n,o,r,s,a,l,c,u){super();this.viewType=t;this.uri=n;this._undoService=a;this._modelService=l;this._languageService=c;this._languageDetectionService=u;this.transientOptions=s,this.metadata=r,this._initialize(o);let p=h=>{if(h.uri.scheme===H.vscodeNotebookCell&&h instanceof Bi){let m=Ap.parse(h.uri);if(m&&ei(m.notebook,this.uri)){let v=this._getCellIndexByHandle(m.handle);if(v>=0){let f=this.cells[v];f&&(f.textModel=h)}}}};this._register(l.onModelAdded(h=>p(h))),this._pauseableEmitter=new hC({merge:h=>{let m=h[0],v=m.rawEvents,f=m.versionId,b=m.endSelectionState,E=m.synchronous;for(let T=1;T<h.length;T++)v.push(...h[T].rawEvents),f=h[T].versionId,b=h[T].endSelectionState!==void 0?h[T].endSelectionState:b,E=h[T].synchronous!==void 0?h[T].synchronous:E;return{rawEvents:v,versionId:f,endSelectionState:b,synchronous:E}}}),this._register(this._pauseableEmitter.event(h=>{h.rawEvents.length&&this._onDidChangeContent.fire(h)})),this._operationManager=new pC(this,this._undoService,this._pauseableEmitter,h=>{this._increaseVersionId(!0),this._overwriteAlternativeVersionId(h)})}_isDisposed=!1;_onWillDispose=this._register(new C);_onWillAddRemoveCells=this._register(new C);_onDidChangeContent=this._register(new C);onWillDispose=this._onWillDispose.event;onWillAddRemoveCells=this._onWillAddRemoveCells.event;onDidChangeContent=this._onDidChangeContent.event;_cellhandlePool=0;_cellListeners=new Map;_cells=[];_defaultCollapseConfig;metadata={};transientOptions={transientCellMetadata:{},transientDocumentMetadata:{},transientOutputs:!1,cellContentMetadata:{}};_versionId=0;_notebookSpecificAlternativeId=0;_alternativeVersionId="1";_operationManager;_pauseableEmitter;get length(){return this._cells.length}get cells(){return this._cells}get versionId(){return this._versionId}get alternativeVersionId(){return this._alternativeVersionId}get notebookType(){return this.viewType}setCellCollapseDefault(t){this._defaultCollapseConfig=t}_initialize(t,n){this._cells=[],this._versionId=0,this._notebookSpecificAlternativeId=0;let o=t.map(r=>{let s=this._cellhandlePool++,a=Ap.generate(this.uri,s),l=this._getDefaultCollapseState(r);return new Op(a,s,r.source,r.language,r.mime,r.cellKind,r.outputs,r.metadata,r.internalMetadata,l,this.transientOptions,this._languageService,this._languageDetectionService)});for(let r=0;r<o.length;r++){let s=o[r].onDidChangeContent(a=>{this._bindCellContentHandler(o[r],a)});this._cellListeners.set(o[r].handle,s),this._register(o[r])}this._cells.splice(0,0,...o),this._alternativeVersionId=this._generateAlternativeId(),n&&this._pauseableEmitter.fire({rawEvents:[{kind:100,transient:!1}],versionId:this.versionId,synchronous:!0,endSelectionState:void 0})}_bindCellContentHandler(t,n){switch(this._increaseVersionId(n==="content"),n){case"content":this._pauseableEmitter.fire({rawEvents:[{kind:10,index:this._getCellIndexByHandle(t.handle),transient:!1}],versionId:this.versionId,synchronous:!0,endSelectionState:void 0});break;case"language":this._pauseableEmitter.fire({rawEvents:[{kind:5,index:this._getCellIndexByHandle(t.handle),language:t.language,transient:!1}],versionId:this.versionId,synchronous:!0,endSelectionState:void 0});break;case"mime":this._pauseableEmitter.fire({rawEvents:[{kind:13,index:this._getCellIndexByHandle(t.handle),mime:t.mime,transient:!1}],versionId:this.versionId,synchronous:!0,endSelectionState:void 0});break}}_generateAlternativeId(){return`${this._notebookSpecificAlternativeId}_`+this.cells.map(t=>t.handle+","+t.alternativeId).join(";")}dispose(){this._isDisposed||(this._isDisposed=!0,this._onWillDispose.fire(),this._undoService.removeElements(this.uri),ft(this._cellListeners.values()),this._cellListeners.clear(),ft(this._cells),this._cells=[],super.dispose())}pushStackElement(){}_getCellIndexByHandle(t){return this.cells.findIndex(n=>n.handle===t)}_getCellIndexWithOutputIdHandleFromEdits(t,n){let o=n.find(r=>"outputs"in r&&r.outputs.some(s=>s.outputId===t));if(o){if("index"in o)return o.index;if("handle"in o){let r=this._getCellIndexByHandle(o.handle);return this._assertIndex(r),r}}return-1}_getCellIndexWithOutputIdHandle(t){return this.cells.findIndex(n=>!!n.outputs.find(o=>o.outputId===t))}reset(t,n,o){this.transientOptions=o;let r=dc.computeEdits(this,t);this.applyEdits([...r,{editType:5,metadata:n}],!0,void 0,()=>{},void 0,!1)}static computeEdits(t,n){let o=[],r=this._commonPrefix(t.cells,t.cells.length,0,n,n.length,0);if(r>0)for(let a=0;a<r;a++)o.push({editType:3,index:a,metadata:n[a].metadata??{}},...this._computeOutputEdit(a,t.cells[a].outputs,n[a].outputs));if(t.cells.length===n.length&&r===t.cells.length)return o;let s=this._commonSuffix(t.cells,t.cells.length-r,r,n,n.length-r,r);if(s>0?o.push({editType:1,index:r,count:t.cells.length-r-s,cells:n.slice(r,n.length-s)}):r>0?o.push({editType:1,index:r,count:t.cells.length-r,cells:n.slice(r)}):o.push({editType:1,index:0,count:t.cells.length,cells:n}),s>0)for(let a=s;a>0;a--)o.push({editType:3,index:t.cells.length-a,metadata:n[n.length-a].metadata??{}},...this._computeOutputEdit(t.cells.length-a,t.cells[t.cells.length-a].outputs,n[n.length-a].outputs));return o}static _computeOutputEdit(t,n,o){return n.length!==o.length?[{editType:2,index:t,outputs:o,append:!1}]:n.length===0?[]:o.map((r,s)=>({editType:7,outputId:n[s].outputId,items:r.outputs,append:!1}))}static _commonPrefix(t,n,o,r,s,a){let l=Math.min(n,s),c=0;for(let u=0;u<l&&t[o+u].fastEqual(r[a+u]);u++)c++;return c}static _commonSuffix(t,n,o,r,s,a){let l=Math.min(n,s),c=0;for(let u=0;u<l&&t[o+n-u-1].fastEqual(r[a+s-u-1]);u++)c++;return c}applyEdits(t,n,o,r,s,a){this._pauseableEmitter.pause(),this._operationManager.pushStackElement(this._alternativeVersionId,void 0);try{return this._doApplyEdits(t,n,a,o,s),!0}finally{if(!this._pauseableEmitter.isEmpty){let l=r();this._increaseVersionId(this._operationManager.isUndoStackEmpty()&&!this._pauseableEmitter.isDirtyEvent()),this._operationManager.pushStackElement(this._alternativeVersionId,l),this._pauseableEmitter.fire({rawEvents:[],versionId:this.versionId,synchronous:n,endSelectionState:l})}this._pauseableEmitter.resume()}}_doApplyEdits(t,n,o,r,s){let a=t.map((u,p)=>{let h=-1;if("index"in u)h=u.index;else if("handle"in u)h=this._getCellIndexByHandle(u.handle),this._assertIndex(h);else if("outputId"in u){if(h=this._getCellIndexWithOutputIdHandle(u.outputId),this._indexIsInvalid(h)&&(h=this._getCellIndexWithOutputIdHandleFromEdits(u.outputId,t.slice(0,p))),this._indexIsInvalid(h))return null}else if(u.editType!==5)throw new Error("Invalid cell edit");return{edit:u,cellIndex:h,end:u.editType===5?void 0:u.editType===1?u.index+u.count:h,originalIndex:p}}).filter(Oh),c=this._mergeCellEdits(a).sort((u,p)=>u.end===void 0||p.end===void 0?-1:p.end-u.end||p.originalIndex-u.originalIndex).reduce((u,p)=>{if(!u.length)u.push([p]);else{let h=u[u.length-1],m=h[0].cellIndex;p.cellIndex===m?h.push(p):u.push([p])}return u},[]).map(u=>{let p=[],h=[];return u.forEach(m=>{m.edit.editType===1?p.push(m):h.push(m)}),[...h.reverse(),...p]}).flat();for(let{edit:u,cellIndex:p}of c)switch(u.editType){case 1:this._replaceCells(u.index,u.count,u.cells,n,o,r,s);break;case 2:{this._assertIndex(p);let h=this._cells[p];u.append?this._spliceNotebookCellOutputs(h,{start:h.outputs.length,deleteCount:0,newOutputs:u.outputs.map(m=>new na(m))},!0,o):this._spliceNotebookCellOutputs2(h,u.outputs,o);break}case 7:{this._assertIndex(p);let h=this._cells[p];u.append?this._appendNotebookCellOutputItems(h,u.outputId,u.items):this._replaceNotebookCellOutputItems(h,u.outputId,u.items)}break;case 3:this._assertIndex(u.index),this._changeCellMetadata(this._cells[u.index],u.metadata,o,r,s);break;case 8:this._assertIndex(p),this._changeCellMetadataPartial(this._cells[p],u.metadata,o,r,s);break;case 9:this._assertIndex(p),this._changeCellInternalMetadataPartial(this._cells[p],u.internalMetadata);break;case 4:this._assertIndex(u.index),this._changeCellLanguage(this._cells[u.index],u.language,o,r,s);break;case 5:this._updateNotebookCellMetadata(u.metadata,o,r,s);break;case 6:this._moveCellToIdx(u.index,u.length,u.newIdx,n,o,r,void 0,s);break}}_mergeCellEdits(t){let n=[];return t.forEach(o=>{if(n.length){let r=n[n.length-1];r.edit.editType===2&&r.edit.append&&o.edit.editType===2&&o.edit.append&&r.cellIndex===o.cellIndex?r.edit.outputs=[...r.edit.outputs,...o.edit.outputs]:r.edit.editType===2&&!r.edit.append&&r.edit.outputs.length===0&&o.edit.editType===2&&o.edit.append&&r.cellIndex===o.cellIndex?(r.edit.append=!1,r.edit.outputs=o.edit.outputs):n.push(o)}else n.push(o)}),n}_getDefaultCollapseState(t){let n=t.cellKind===2?this._defaultCollapseConfig?.codeCell:this._defaultCollapseConfig?.markupCell;return t.collapseState??n??void 0}_replaceCells(t,n,o,r,s,a,l){if(n===0&&o.length===0)return;let c=this._cells.slice(0),u=new Set;c.forEach(f=>{u.add(f.handle)});for(let f=t;f<Math.min(t+n,this._cells.length);f++){let b=this._cells[f];this._cellListeners.get(b.handle)?.dispose(),this._cellListeners.delete(b.handle)}let p=o.map(f=>{let b=this._cellhandlePool++,E=Ap.generate(this.uri,b),T=this._getDefaultCollapseState(f),_=new Op(E,b,f.source,f.language,f.mime,f.cellKind,f.outputs||[],f.metadata,f.internalMetadata,T,this.transientOptions,this._languageService,this._languageDetectionService),O=this._modelService.getModel(E);O&&O instanceof Bi&&(_.textModel=O,_.language=f.language,_.textModel.setValue(f.source),_.resetTextBuffer(_.textModel.getTextBuffer()));let M=_.onDidChangeContent(U=>{this._bindCellContentHandler(_,U)});return this._cellListeners.set(_.handle,M),this._register(_),_}),h=this._cells.slice(0);h.splice(t,n,...p);let m=BL(this._cells,h,f=>u.has(f.handle)).map(f=>[f.start,f.deleteCount,f.toInsert]);this._onWillAddRemoveCells.fire({rawEvent:{kind:1,changes:m}}),this._cells=h;let v=m.map(f=>{let b=c.slice(f[0],f[0]+f[1]);return[f[0],b,f[2]]});s&&this._operationManager.pushEditOperation(new Eb(this.uri,v,{insertCell:(f,b,E)=>{this._insertNewCell(f,[b],!0,E)},deleteCell:(f,b)=>{this._removeCell(f,1,!0,b)},replaceCell:(f,b,E,T)=>{this._replaceNewCells(f,b,E,!0,T)}},void 0,void 0),a,void 0,this._alternativeVersionId,l),this._pauseableEmitter.fire({rawEvents:[{kind:1,changes:m,transient:!1}],versionId:this.versionId,synchronous:r,endSelectionState:void 0})}_increaseVersionId(t){this._versionId=this._versionId+1,t||(this._notebookSpecificAlternativeId=this._versionId),this._alternativeVersionId=this._generateAlternativeId()}_overwriteAlternativeVersionId(t){this._alternativeVersionId=t,this._notebookSpecificAlternativeId=Number(t.substring(0,t.indexOf("_")))}_updateNotebookCellMetadata(t,n,o,r){let s=this.metadata,a=this._isDocumentMetadataChanged(this.metadata,t);if(a&&n){let l=this;this._operationManager.pushEditOperation(new class{type=0;get resource(){return l.uri}label="Update Cell Metadata";code="undoredo.textBufferEdit";undo(){l._updateNotebookCellMetadata(s,!1,o,r)}redo(){l._updateNotebookCellMetadata(t,!1,o,r)}},o,void 0,this._alternativeVersionId,r)}this.metadata=t,this._pauseableEmitter.fire({rawEvents:[{kind:11,metadata:this.metadata,transient:!a}],versionId:this.versionId,synchronous:!0,endSelectionState:void 0})}_insertNewCell(t,n,o,r){for(let a=0;a<n.length;a++){let l=n[a].onDidChangeContent(c=>{this._bindCellContentHandler(n[a],c)});this._cellListeners.set(n[a].handle,l)}let s=[[t,0,n]];this._onWillAddRemoveCells.fire({rawEvent:{kind:1,changes:s}}),this._cells.splice(t,0,...n),this._pauseableEmitter.fire({rawEvents:[{kind:1,changes:s,transient:!1}],versionId:this.versionId,synchronous:o,endSelectionState:r})}_removeCell(t,n,o,r){for(let a=t;a<t+n;a++){let l=this._cells[a];this._cellListeners.get(l.handle)?.dispose(),this._cellListeners.delete(l.handle)}let s=[[t,n,[]]];this._onWillAddRemoveCells.fire({rawEvent:{kind:1,changes:s}}),this._cells.splice(t,n),this._pauseableEmitter.fire({rawEvents:[{kind:1,changes:s,transient:!1}],versionId:this.versionId,synchronous:o,endSelectionState:r})}_replaceNewCells(t,n,o,r,s){for(let l=t;l<t+n;l++){let c=this._cells[l];this._cellListeners.get(c.handle)?.dispose(),this._cellListeners.delete(c.handle)}for(let l=0;l<o.length;l++){let c=o[l].onDidChangeContent(u=>{this._bindCellContentHandler(o[l],u)});this._cellListeners.set(o[l].handle,c)}let a=[[t,n,o]];this._onWillAddRemoveCells.fire({rawEvent:{kind:1,changes:a}}),this._cells.splice(t,n,...o),this._pauseableEmitter.fire({rawEvents:[{kind:1,changes:a,transient:!1}],versionId:this.versionId,synchronous:r,endSelectionState:s})}_isDocumentMetadataChanged(t,n){let o=new Set([...Object.keys(t||{}),...Object.keys(n||{})]);for(let r of o)if(r==="custom"){if(!this._customMetadataEqual(t[r],n[r])&&!this.transientOptions.transientDocumentMetadata[r])return!0}else if(t[r]!==n[r]&&!this.transientOptions.transientDocumentMetadata[r])return!0;return!1}_isCellMetadataChanged(t,n){let o=new Set([...Object.keys(t||{}),...Object.keys(n||{})]);for(let r of o)if(t[r]!==n[r]&&!this.transientOptions.transientCellMetadata[r])return!0;return!1}_customMetadataEqual(t,n){if(!t&&!n)return!0;if(!t||!n)return!1;let o=Object.getOwnPropertyNames(t),r=Object.getOwnPropertyNames(n);if(o.length!==r.length)return!1;for(let s=0;s<o.length;s++){let a=o[s];if(t[a]!==n[a])return!1}return!0}_changeCellMetadataPartial(t,n,o,r,s){let a={...t.metadata},l;for(l in n){let c=n[l]??void 0;a[l]=c}return this._changeCellMetadata(t,a,o,r,s)}_changeCellMetadata(t,n,o,r,s){let a=this._isCellMetadataChanged(t.metadata,n);if(a&&o){let l=this._cells.indexOf(t);this._operationManager.pushEditOperation(new Cb(this.uri,l,Object.freeze(t.metadata),Object.freeze(n),{updateCellMetadata:(c,u)=>{let p=this._cells[c];p&&this._changeCellMetadata(p,u,!1,r,s)}}),r,void 0,this._alternativeVersionId,s)}t.metadata=n,this._pauseableEmitter.fire({rawEvents:[{kind:7,index:this._cells.indexOf(t),metadata:t.metadata,transient:!a}],versionId:this.versionId,synchronous:!0,endSelectionState:void 0})}_changeCellInternalMetadataPartial(t,n){let o={...t.internalMetadata},r;for(r in n){let s=n[r]??void 0;o[r]=s}t.internalMetadata=o,this._pauseableEmitter.fire({rawEvents:[{kind:12,index:this._cells.indexOf(t),internalMetadata:t.internalMetadata,transient:!0}],versionId:this.versionId,synchronous:!0,endSelectionState:void 0})}_changeCellLanguage(t,n,o,r,s){if(t.language===n)return;let a=t.language;if(t.language=n,o){let l=this;this._operationManager.pushEditOperation(new class{type=0;get resource(){return l.uri}label="Update Cell Language";code="undoredo.textBufferEdit";undo(){l._changeCellLanguage(t,a,!1,r,s)}redo(){l._changeCellLanguage(t,n,!1,r,s)}},r,void 0,this._alternativeVersionId,s)}this._pauseableEmitter.fire({rawEvents:[{kind:5,index:this._cells.indexOf(t),language:n,transient:!1}],versionId:this.versionId,synchronous:!0,endSelectionState:void 0})}_spliceNotebookCellOutputs2(t,n,o){if(n.length===0&&t.outputs.length===0)return;if(n.length<=1){this._spliceNotebookCellOutputs(t,{start:0,deleteCount:t.outputs.length,newOutputs:n.map(l=>new na(l))},!1,o);return}new bd(new wb(t.outputs),new wb(n)).ComputeDiff(!1).changes.map(l=>({start:l.originalStart,deleteCount:l.originalLength,newOutputs:n.slice(l.modifiedStart,l.modifiedStart+l.modifiedLength).map(c=>new na(c))})).reverse().forEach(l=>{this._spliceNotebookCellOutputs(t,l,!1,o)})}_spliceNotebookCellOutputs(t,n,o,r){t.spliceNotebookCellOutputs(n),this._pauseableEmitter.fire({rawEvents:[{kind:8,index:this._cells.indexOf(t),outputs:t.outputs.map(s=>s.asDto())??[],append:o,transient:this.transientOptions.transientOutputs}],versionId:this.versionId,synchronous:!0,endSelectionState:void 0})}_appendNotebookCellOutputItems(t,n,o){t.changeOutputItems(n,!0,o)&&this._pauseableEmitter.fire({rawEvents:[{kind:9,index:this._cells.indexOf(t),outputId:n,outputItems:o,append:!0,transient:this.transientOptions.transientOutputs}],versionId:this.versionId,synchronous:!0,endSelectionState:void 0})}_replaceNotebookCellOutputItems(t,n,o){t.changeOutputItems(n,!1,o)&&this._pauseableEmitter.fire({rawEvents:[{kind:9,index:this._cells.indexOf(t),outputId:n,outputItems:o,append:!1,transient:this.transientOptions.transientOutputs}],versionId:this.versionId,synchronous:!0,endSelectionState:void 0})}_moveCellToIdx(t,n,o,r,s,a,l,c){s&&this._operationManager.pushEditOperation(new Sb(this.uri,t,n,o,{moveCell:(p,h,m,v,f)=>{this._moveCellToIdx(p,h,m,!0,!1,v,f,c)}},a,l),a,l,this._alternativeVersionId,c),this._assertIndex(t),this._assertIndex(o);let u=this._cells.splice(t,n);return this._cells.splice(o,0,...u),this._pauseableEmitter.fire({rawEvents:[{kind:2,index:t,length:n,newIdx:o,cells:u,transient:!1}],versionId:this.versionId,synchronous:r,endSelectionState:l}),!0}_assertIndex(t){if(this._indexIsInvalid(t))throw new Error(`model index out of range ${t}`)}_indexIsInvalid(t){return t<0||t>=this._cells.length}findNextMatch(t,n,o,r,s){this._assertIndex(n.cellIndex);let l=new Do(t,o,r,s).parseSearchRequest();if(!l)return null;let c=n.cellIndex,u=n.position;for(;c<this._cells.length;){let p=this._cells[c],h=new te(u.lineNumber,u.column,p.textBuffer.getLineCount(),p.textBuffer.getLineMaxColumn(p.textBuffer.getLineCount())),m=p.textBuffer.findMatchesLineByLine(h,l,!1,1);if(m.length>0)return{cell:p,match:m[0]};c++,u={lineNumber:1,column:1}}return null}};dc=L([w(5,Pm),w(6,Zi),w(7,Pt),w(8,Nd)],dc);var wb=class{constructor(e){this.outputs=e}getElements(){return this.outputs.map(e=>hi(e.outputs.map(t=>({mime:t.mime,data:t.data}))))}};var Mvt=P("INotebookExecutionService");var eyt=P("INotebookExecutionStateService");var xyt=P("INotebookKernelService"),Syt=P("INotebookKernelHistoryService");var B2=P("notebookDocumentService"),gC=["W","X","Y","Z","a","b","c","d","e","f"],W2=new RegExp(`^[${gC.join("")}]+`),WL=7;function fC(i){if(i.scheme!==H.vscodeNotebookCell)return;let e=i.fragment.indexOf("s");if(e<0)return;let t=parseInt(i.fragment.substring(0,e).replace(W2,""),WL),n=Yy(i.fragment.substring(e+1)).toString();if(!isNaN(t))return{handle:t,notebook:i.with({scheme:n,fragment:null})}}function UL(i,e){let t=e.toString(WL),o=`${t.length<gC.length?gC[t.length-1]:"z"}${t}s${Qy(ot.fromString(i.scheme),!0,!0)}`;return i.with({scheme:H.vscodeNotebookCell,fragment:o})}function VL(i){if(i.scheme!==H.vscodeNotebookMetadata)return;let e=Yy(i.fragment).toString();return i.with({scheme:e,fragment:null})}function zL(i){let e=`${Qy(ot.fromString(i.scheme),!0,!0)}`;return i.with({scheme:H.vscodeNotebookMetadata,fragment:e})}var mC=class{_documents=new bt;getNotebook(e){if(e.scheme===H.vscodeNotebookCell){let t=fC(e);if(t){let n=this._documents.get(t.notebook);if(n)return n}}return this._documents.get(e)}addNotebookDocument(e){this._documents.set(e.uri,e)}removeNotebookDocument(e){this._documents.delete(e.uri)}};zt(B2,mC,1);var WIt=["application/json","application/javascript","text/html","image/svg+xml",go.latex,go.markdown,"image/png","image/jpeg",go.text],UIt=[go.latex,go.markdown,"application/json","text/html","image/svg+xml","image/png","image/jpeg",go.text];var U2;(n=>{n.scheme=H.vscodeNotebookMetadata;function e(o){return zL(o)}n.generate=e;function t(o){return VL(o)}n.parse=t})(U2||={});var Ap;(a=>{a.scheme=H.vscodeNotebookCell;function e(l,c){return UL(l,c)}a.generate=e;function t(l){return fC(l)}a.parse=t;function n(l,c){return l.with({scheme:H.vscodeNotebookCellOutput,fragment:`op${c??""},${l.scheme!==H.file?l.scheme:""}`})}a.generateCellOutputUri=n;function o(l){if(l.scheme!==H.vscodeNotebookCellOutput)return;let c=/^op([0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12})?\,(.*)$/i.exec(l.fragment);if(!c)return;let u=c[1]&&c[1]!==""?c[1]:void 0,p=c[2];return{outputId:u,notebook:l.with({scheme:p||H.file,fragment:null})}}a.parseCellOutputUri=o;function r(l,c,u){return a.generate(l,c).with({scheme:u})}a.generateCellPropertyUri=r;function s(l,c){if(l.scheme===c)return a.parse(l.with({scheme:a.scheme}))}a.parseCellPropertyUri=s})(Ap||={});function BL(i,e,t,n=(o,r)=>o===r){let o=[];function r(l,c,u){if(c===0&&u.length===0)return;let p=o[o.length-1];p&&p.start+p.deleteCount===l?(p.deleteCount+=c,p.toInsert.push(...u)):o.push({start:l,deleteCount:c,toInsert:u})}let s=0,a=0;for(;;){if(s===i.length){r(s,0,e.slice(a));break}if(a===e.length){r(s,i.length-s,[]);break}let l=i[s],c=e[a];if(n(l,c)){s+=1,a+=1;continue}t(c)?(r(s,1,[]),s+=1):(r(s,0,[c]),a+=1)}return o}var VIt=new K("notebookEditorCursorAtBoundary","none"),zIt=new K("notebookEditorCursorAtLineBoundary","none");var HL={displayOrder:"notebook.displayOrder",cellToolbarLocation:"notebook.cellToolbarLocation",cellToolbarVisibility:"notebook.cellToolbarVisibility",showCellStatusBar:"notebook.showCellStatusBar",textDiffEditorPreview:"notebook.diff.enablePreview",diffOverviewRuler:"notebook.diff.overviewRuler",experimentalInsertToolbarAlignment:"notebook.experimental.insertToolbarAlignment",compactView:"notebook.compactView",focusIndicator:"notebook.cellFocusIndicator",insertToolbarLocation:"notebook.insertToolbarLocation",globalToolbar:"notebook.globalToolbar",stickyScrollEnabled:"notebook.stickyScroll.enabled",stickyScrollMode:"notebook.stickyScroll.mode",undoRedoPerCell:"notebook.undoRedoPerCell",consolidatedOutputButton:"notebook.consolidatedOutputButton",showFoldingControls:"notebook.showFoldingControls",dragAndDropEnabled:"notebook.dragAndDropEnabled",cellEditorOptionsCustomizations:"notebook.editorOptionsCustomizations",consolidatedRunButton:"notebook.consolidatedRunButton",openGettingStarted:"notebook.experimental.openGettingStarted",globalToolbarShowLabel:"notebook.globalToolbarShowLabel",markupFontSize:"notebook.markup.fontSize",markdownLineHeight:"notebook.markdown.lineHeight",interactiveWindowCollapseCodeCells:"interactiveWindow.collapseCellInputCode",outputScrollingDeprecated:"notebook.experimental.outputScrolling",outputScrolling:"notebook.output.scrolling",textOutputLineLimit:"notebook.output.textLineLimit",LinkifyOutputFilePaths:"notebook.output.linkifyFilePaths",minimalErrorRendering:"notebook.output.minimalErrorRendering",formatOnSave:"notebook.formatOnSave.enabled",insertFinalNewline:"notebook.insertFinalNewline",defaultFormatter:"notebook.defaultFormatter",formatOnCellExecution:"notebook.formatOnCellExecution",codeActionsOnSave:"notebook.codeActionsOnSave",outputWordWrap:"notebook.output.wordWrap",outputLineHeightDeprecated:"notebook.outputLineHeight",outputLineHeight:"notebook.output.lineHeight",outputFontSizeDeprecated:"notebook.outputFontSize",outputFontSize:"notebook.output.fontSize",outputFontFamilyDeprecated:"notebook.outputFontFamily",outputFontFamily:"notebook.output.fontFamily",findFilters:"notebook.find.filters",logging:"notebook.logging",confirmDeleteRunningCell:"notebook.confirmDeleteRunningCell",remoteSaving:"notebook.experimental.remoteSave",gotoSymbolsAllSymbols:"notebook.gotoSymbols.showAllSymbols",outlineShowMarkdownHeadersOnly:"notebook.outline.showMarkdownHeadersOnly",outlineShowCodeCells:"notebook.outline.showCodeCells",outlineShowCodeCellSymbols:"notebook.outline.showCodeCellSymbols",breadcrumbsShowCodeCells:"notebook.breadcrumbs.showCodeCells",scrollToRevealCell:"notebook.scrolling.revealNextCellOnExecute",cellChat:"notebook.experimental.cellChat",cellGenerate:"notebook.experimental.generate",notebookVariablesView:"notebook.experimental.variablesView",InteractiveWindowPromptToSave:"interactiveWindow.promptToSaveOnClose",cellFailureDiagnostics:"notebook.cellFailureDiagnostics",outputBackupSizeLimit:"notebook.backup.sizeLimit"};function cC(i){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(i)}var V2=new TextDecoder;function FL(i){let e=[],t=!1;for(let s of i)(e.length===0||t)&&(e.push(s),t=!0);let n=H2(e),o=ot.concat(e.map(s=>ot.wrap(s))),r=j2(o);return n=n||r.byteLength!==o.byteLength,{data:r,didCompression:n}}var Tb="\x1B[A",bC=Tb.split("").map(i=>i.charCodeAt(0)),z2=10;function H2(i){let e=!1;return i.forEach((t,n)=>{if(n===0||t.length<Tb.length)return;let o=i[n-1],r=t.subarray(0,Tb.length);if(r[0]===bC[0]&&r[1]===bC[1]&&r[2]===bC[2]){let s=o.lastIndexOf(z2);if(s===-1)return;e=!0,i[n-1]=o.subarray(0,s),i[n]=t.subarray(Tb.length)}}),e}function K2(i){let e=i;do i=e,e=i.replace(/[^\n]\x08/gm,"");while(e.length<i.length);return i}function G2(i){for(i=i.replace(/\r+\n/gm,`
`);i.search(/\r[^$]/g)>-1;){let e=i.match(/^(.*)\r+/m)[1],t=i.match(/\r+(.*)$/m)[1];t=t+e.slice(t.length,e.length),i=i.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,t)}return i}var q2=8,$2=13;function j2(i){return!i.buffer.includes(q2)&&!i.buffer.includes($2)?i:ot.fromString(G2(K2(V2.decode(i.buffer))))}var kb=wo("getting-started-setup",j.zap,d("getting-started-setup-icon","Icon used for the setup category of welcome page")),Y2=wo("getting-started-beginner",j.lightbulb,d("getting-started-beginner-icon","Icon used for the beginner category of welcome page")),vC=[{id:"welcome.showNewFileEntries",title:d("gettingStarted.newFile.title","New File..."),description:d("gettingStarted.newFile.description","Open a new untitled text file, notebook, or custom editor."),icon:j.newFile,content:{type:"startEntry",command:"command:welcome.showNewFileEntries"}},{id:"topLevelOpenMac",title:d("gettingStarted.openMac.title","Open..."),description:d("gettingStarted.openMac.description","Open a file or folder to start working"),icon:j.folderOpened,when:"!isWeb && isMac",content:{type:"startEntry",command:"command:workbench.action.files.openFileFolder"}},{id:"topLevelOpenFile",title:d("gettingStarted.openFile.title","Open File..."),description:d("gettingStarted.openFile.description","Open a file to start working"),icon:j.goToFile,when:"isWeb || !isMac",content:{type:"startEntry",command:"command:workbench.action.files.openFile"}},{id:"topLevelOpenFolder",title:d("gettingStarted.openFolder.title","Open Folder..."),description:d("gettingStarted.openFolder.description","Open a folder to start working"),icon:j.folderOpened,when:"!isWeb && !isMac",content:{type:"startEntry",command:"command:workbench.action.files.openFolder"}},{id:"topLevelOpenFolderWeb",title:d("gettingStarted.openFolder.title","Open Folder..."),description:d("gettingStarted.openFolder.description","Open a folder to start working"),icon:j.folderOpened,when:"!openFolderWorkspaceSupport && workbenchState == 'workspace'",content:{type:"startEntry",command:"command:workbench.action.files.openFolderViaWorkspace"}},{id:"topLevelGitClone",title:d("gettingStarted.topLevelGitClone.title","Clone Git Repository..."),description:d("gettingStarted.topLevelGitClone.description","Clone a remote repository to a local folder"),when:"config.git.enabled && !git.missing",icon:j.sourceControl,content:{type:"startEntry",command:"command:git.clone"}},{id:"topLevelGitOpen",title:d("gettingStarted.topLevelGitOpen.title","Open Repository..."),description:d("gettingStarted.topLevelGitOpen.description","Connect to a remote repository or pull request to browse, search, edit, and commit"),when:"workspacePlatform == 'webworker'",icon:j.sourceControl,content:{type:"startEntry",command:"command:remoteHub.openRepository"}},{id:"topLevelShowWalkthroughs",title:d("gettingStarted.topLevelShowWalkthroughs.title","Open a Walkthrough..."),description:d("gettingStarted.topLevelShowWalkthroughs.description","View a walkthrough on the editor or an extension"),icon:j.checklist,when:"allWalkthroughsHidden",content:{type:"startEntry",command:"command:welcome.showAllWalkthroughs"}},{id:"topLevelRemoteOpen",title:d("gettingStarted.topLevelRemoteOpen.title","Connect to..."),description:d("gettingStarted.topLevelRemoteOpen.description","Connect to remote development workspaces."),when:"!isWeb",icon:j.remote,content:{type:"startEntry",command:"command:workbench.action.remote.showMenu"}},{id:"topLevelOpenTunnel",title:d("gettingStarted.topLevelOpenTunnel.title","Open Tunnel..."),description:d("gettingStarted.topLevelOpenTunnel.description","Connect to a remote machine through a Tunnel"),when:"isWeb && showRemoteStartEntryInWeb",icon:j.remote,content:{type:"startEntry",command:"command:workbench.action.remote.showWebStartEntryActions"}}],Ke=(i,e)=>`[${i}](${e})`,yC=[{id:"Setup",title:d("gettingStarted.setup.title","Get Started with VS Code"),description:d("gettingStarted.setup.description","Customize your editor, learn the basics, and start coding"),isFeatured:!0,icon:kb,when:"!isWeb",next:"Beginner",content:{type:"steps",steps:[{id:"pickColorTheme",title:d("gettingStarted.pickColor.title","Choose your theme"),description:d("gettingStarted.pickColor.description.interpolated",`The right theme helps you focus on your code, is easy on your eyes, and is simply more fun to use.
{0}`,Ke(d("titleID","Browse Color Themes"),"command:workbench.action.selectTheme")),completionEvents:["onSettingChanged:workbench.colorTheme","onCommand:workbench.action.selectTheme"],when:"!accessibilityModeEnabled",media:{type:"markdown",path:"theme_picker"}},{id:"extensionsWeb",title:d("gettingStarted.extensions.title","Code with extensions"),description:d("gettingStarted.extensionsWeb.description.interpolated",`Extensions are VS Code's power-ups. A growing number are becoming available in the web.
{0}`,Ke(d("browsePopularWeb","Browse Popular Web Extensions"),"command:workbench.extensions.action.showPopularExtensions")),when:"workspacePlatform == 'webworker'",media:{type:"svg",altText:"VS Code extension marketplace with featured language extensions",path:"extensions-web.svg"}},{id:"findLanguageExtensions",title:d("gettingStarted.findLanguageExts.title","Rich support for all your languages"),description:d("gettingStarted.findLanguageExts.description.interpolated",`Code smarter with syntax highlighting, code completion, linting and debugging. While many languages are built-in, many more can be added as extensions.
{0}`,Ke(d("browseLangExts","Browse Language Extensions"),"command:workbench.extensions.action.showLanguageExtensions")),when:"workspacePlatform != 'webworker'",media:{type:"svg",altText:"Language extensions",path:"languages.svg"}},{id:"settings",title:d("gettingStarted.settings.title","Tune your settings"),description:d("gettingStarted.settings.description.interpolated",`Customize every aspect of VS Code and your extensions to your liking. Commonly used settings are listed first to get you started.
{0}`,Ke(d("tweakSettings","Open Settings"),"command:toSide:workbench.action.openSettings")),media:{type:"svg",altText:"VS Code Settings",path:"settings.svg"}},{id:"settingsSync",title:d("gettingStarted.settingsSync.title","Sync settings across devices"),description:d("gettingStarted.settingsSync.description.interpolated",`Keep your essential customizations backed up and updated across all your devices.
{0}`,Ke(d("enableSync","Backup and Sync Settings"),"command:workbench.userDataSync.actions.turnOn")),when:"syncStatus != uninitialized",completionEvents:["onEvent:sync-enabled"],media:{type:"svg",altText:'The "Turn on Sync" entry in the settings gear menu.',path:"settingsSync.svg"}},{id:"commandPaletteTask",title:d("gettingStarted.commandPalette.title","Unlock productivity with the Command Palette "),description:d("gettingStarted.commandPalette.description.interpolated",`Run commands without reaching for your mouse to accomplish any task in VS Code.
{0}`,Ke(d("commandPalette","Open Command Palette"),"command:workbench.action.showCommands")),media:{type:"svg",altText:"Command Palette overlay for searching and executing commands.",path:"commandPalette.svg"}},{id:"pickAFolderTask-Mac",title:d("gettingStarted.setup.OpenFolder.title","Open up your code"),description:d("gettingStarted.setup.OpenFolder.description.interpolated",`You're all set to start coding. Open a project folder to get your files into VS Code.
{0}`,Ke(d("pickFolder","Pick a Folder"),"command:workbench.action.files.openFileFolder")),when:"isMac && workspaceFolderCount == 0",media:{type:"svg",altText:"Explorer view showing buttons for opening folder and cloning repository.",path:"openFolder.svg"}},{id:"pickAFolderTask-Other",title:d("gettingStarted.setup.OpenFolder.title","Open up your code"),description:d("gettingStarted.setup.OpenFolder.description.interpolated",`You're all set to start coding. Open a project folder to get your files into VS Code.
{0}`,Ke(d("pickFolder","Pick a Folder"),"command:workbench.action.files.openFolder")),when:"!isMac && workspaceFolderCount == 0",media:{type:"svg",altText:"Explorer view showing buttons for opening folder and cloning repository.",path:"openFolder.svg"}},{id:"quickOpen",title:d("gettingStarted.quickOpen.title","Quickly navigate between your files"),description:d("gettingStarted.quickOpen.description.interpolated",`Navigate between files in an instant with one keystroke. Tip: Open multiple files by pressing the right arrow key.
{0}`,Ke(d("quickOpen","Quick Open a File"),"command:toSide:workbench.action.quickOpen")),when:"workspaceFolderCount != 0",media:{type:"svg",altText:"Go to file in quick search.",path:"search.svg"}},{id:"videoTutorial",title:d("gettingStarted.videoTutorial.title","Watch video tutorials"),description:d("gettingStarted.videoTutorial.description.interpolated",`Watch the first in a series of short & practical video tutorials for VS Code's key features.
{0}`,Ke(d("watch","Watch Tutorial"),"https://aka.ms/vscode-getting-started-video")),media:{type:"svg",altText:"VS Code Settings",path:"learn.svg"}}]}},{id:"SetupWeb",title:d("gettingStarted.setupWeb.title","Get Started with VS Code for the Web"),description:d("gettingStarted.setupWeb.description","Customize your editor, learn the basics, and start coding"),isFeatured:!0,icon:kb,when:"isWeb",next:"Beginner",content:{type:"steps",steps:[{id:"pickColorThemeWeb",title:d("gettingStarted.pickColor.title","Choose your theme"),description:d("gettingStarted.pickColor.description.interpolated",`The right theme helps you focus on your code, is easy on your eyes, and is simply more fun to use.
{0}`,Ke(d("titleID","Browse Color Themes"),"command:workbench.action.selectTheme")),completionEvents:["onSettingChanged:workbench.colorTheme","onCommand:workbench.action.selectTheme"],media:{type:"markdown",path:"theme_picker"}},{id:"menuBarWeb",title:d("gettingStarted.menuBar.title","Just the right amount of UI"),description:d("gettingStarted.menuBar.description.interpolated",`The full menu bar is available in the dropdown menu to make room for your code. Toggle its appearance for faster access. 
{0}`,Ke(d("toggleMenuBar","Toggle Menu Bar"),"command:workbench.action.toggleMenuBar")),when:"isWeb",media:{type:"svg",altText:"Comparing menu dropdown with the visible menu bar.",path:"menuBar.svg"}},{id:"extensionsWebWeb",title:d("gettingStarted.extensions.title","Code with extensions"),description:d("gettingStarted.extensionsWeb.description.interpolated",`Extensions are VS Code's power-ups. A growing number are becoming available in the web.
{0}`,Ke(d("browsePopularWeb","Browse Popular Web Extensions"),"command:workbench.extensions.action.showPopularExtensions")),when:"workspacePlatform == 'webworker'",media:{type:"svg",altText:"VS Code extension marketplace with featured language extensions",path:"extensions-web.svg"}},{id:"findLanguageExtensionsWeb",title:d("gettingStarted.findLanguageExts.title","Rich support for all your languages"),description:d("gettingStarted.findLanguageExts.description.interpolated",`Code smarter with syntax highlighting, code completion, linting and debugging. While many languages are built-in, many more can be added as extensions.
{0}`,Ke(d("browseLangExts","Browse Language Extensions"),"command:workbench.extensions.action.showLanguageExtensions")),when:"workspacePlatform != 'webworker'",media:{type:"svg",altText:"Language extensions",path:"languages.svg"}},{id:"settingsSyncWeb",title:d("gettingStarted.settingsSync.title","Sync settings across devices"),description:d("gettingStarted.settingsSync.description.interpolated",`Keep your essential customizations backed up and updated across all your devices.
{0}`,Ke(d("enableSync","Backup and Sync Settings"),"command:workbench.userDataSync.actions.turnOn")),when:"syncStatus != uninitialized",completionEvents:["onEvent:sync-enabled"],media:{type:"svg",altText:'The "Turn on Sync" entry in the settings gear menu.',path:"settingsSync.svg"}},{id:"commandPaletteTaskWeb",title:d("gettingStarted.commandPalette.title","Unlock productivity with the Command Palette "),description:d("gettingStarted.commandPalette.description.interpolated",`Run commands without reaching for your mouse to accomplish any task in VS Code.
{0}`,Ke(d("commandPalette","Open Command Palette"),"command:workbench.action.showCommands")),media:{type:"svg",altText:"Command Palette overlay for searching and executing commands.",path:"commandPalette.svg"}},{id:"pickAFolderTask-WebWeb",title:d("gettingStarted.setup.OpenFolder.title","Open up your code"),description:d("gettingStarted.setup.OpenFolderWeb.description.interpolated",`You're all set to start coding. You can open a local project or a remote repository to get your files into VS Code.
{0}
{1}`,Ke(d("openFolder","Open Folder"),"command:workbench.action.addRootFolder"),Ke(d("openRepository","Open Repository"),"command:remoteHub.openRepository")),when:"workspaceFolderCount == 0",media:{type:"svg",altText:"Explorer view showing buttons for opening folder and cloning repository.",path:"openFolder.svg"}},{id:"quickOpenWeb",title:d("gettingStarted.quickOpen.title","Quickly navigate between your files"),description:d("gettingStarted.quickOpen.description.interpolated",`Navigate between files in an instant with one keystroke. Tip: Open multiple files by pressing the right arrow key.
{0}`,Ke(d("quickOpen","Quick Open a File"),"command:toSide:workbench.action.quickOpen")),when:"workspaceFolderCount != 0",media:{type:"svg",altText:"Go to file in quick search.",path:"search.svg"}}]}},{id:"SetupScreenReader",title:d("gettingStarted.setupScreenReader.title","Get Started with VS Code using a Screen Reader"),description:d("gettingStarted.setupScreenReader.description","Learn the tools and shortcuts that make VS Code accessible. Note that some actions are not actionable from within the context of the walkthrough."),isFeatured:!0,icon:kb,when:u1.key,next:"Setup",content:{type:"steps",steps:[{id:"accessibilityHelp",title:d("gettingStarted.accessibilityHelp.title","Use the accessibility help dialog to learn about features"),description:d("gettingStarted.accessibilityHelp.description.interpolated",`The accessibility help dialog provides information about what to expect from a feature and the commands/keybindings to operate them.
 With focus in an editor, terminal, notebook, chat response, comment, or debug console, the relevant dialog can be opened with the Open Accessibility Help command.
{0}`,Ke(d("openAccessibilityHelp","Open Accessibility Help"),"command:editor.action.accessibilityHelp")),media:{type:"markdown",path:"empty"}},{id:"accessibleView",title:d("gettingStarted.accessibleView.title","Use the accessible view to inspect content line by line, character by character"),description:d("gettingStarted.accessibleView.description.interpolated",`The accessible view is available for the terminal, hovers, notifications, comments, notebook output, chat responses, inline completions, and debug console output.
 With focus in any of those features, it can be opened with the Open Accessible View command.
{0}`,Ke(d("openAccessibleView","Open Accessible View"),"command:editor.action.accessibleView")),media:{type:"markdown",path:"empty"}},{id:"verbositySettings",title:d("gettingStarted.verbositySettings.title","Control the verbosity of aria labels"),description:d("gettingStarted.verbositySettings.description.interpolated",`Verbosity settings exist for features around the workbench so that once a user is familiar with a feature, they can avoid hearing hints about how to operate it. For example, features for which an accessibility help dialog exists will indicate how to open the dialog until the verbosity setting for that feature has been disabled.
 These and other accessibility settings can be configured by running the Open Accessibility Settings command.
{0}`,Ke(d("openVerbositySettings","Open Accessibility Settings"),"command:workbench.action.openAccessibilitySettings")),media:{type:"markdown",path:"empty"}},{id:"accessibilitySignals",title:d("gettingStarted.accessibilitySignals.title","Fine tune which accessibility signals you want to receive via audio or a braille device"),description:d("gettingStarted.accessibilitySignals.description.interpolated",`Accessibility sounds and announcements are played around the workbench for different events.
 These can be discovered and configured using the List Signal Sounds and List Signal Announcements commands.
{0}
{1}`,Ke(d("listSignalSounds","List Signal Sounds"),"command:signals.sounds.help"),Ke(d("listSignalAnnouncements","List Signal Announcements"),"command:signals.announcements.help")),media:{type:"markdown",path:"empty"}},{id:"hover",title:d("gettingStarted.hover.title","Access the hover in the editor to get more information on a variable or symbol"),description:d("gettingStarted.hover.description.interpolated",`While focus is in the editor on a variable or symbol, a hover can be can be focused with the Show or Open Hover command.
{0}`,Ke(d("showOrFocusHover","Show or Focus Hover"),"command:editor.action.showHover")),media:{type:"markdown",path:"empty"}},{id:"goToSymbol",title:d("gettingStarted.goToSymbol.title","Navigate to symbols in a file"),description:d("gettingStarted.goToSymbol.description.interpolated",`The Go to Symbol command is useful for navigating between important landmarks in a document.
{0}`,Ke(d("openGoToSymbol","Go to Symbol"),"command:editor.action.goToSymbol")),media:{type:"markdown",path:"empty"}},{id:"codeFolding",title:d("gettingStarted.codeFolding.title","Use code folding to collapse blocks of code and focus on the code you're interested in."),description:d("gettingStarted.codeFolding.description.interpolated",`Fold or unfold a code section with the Toggle Fold command.
{0}
 Fold or unfold recursively with the Toggle Fold Recursively Command
{1}
`,Ke(d("toggleFold","Toggle Fold"),"command:editor.toggleFold"),Ke(d("toggleFoldRecursively","Toggle Fold Recursively"),"editor.toggleFoldRecursively")),media:{type:"markdown",path:"empty"}},{id:"intellisense",title:d("gettingStarted.intellisense.title","Use Intellisense to improve coding efficiency"),description:d("gettingStarted.intellisense.description.interpolated",`Intellisense suggestions can be opened with the Trigger Intellisense command.
{0}
 Inline intellisense suggestions can be triggered with Trigger Inline Suggestion
{1}
 Useful settings include editor.inlineCompletionsAccessibilityVerbose and editor.screenReaderAnnounceInlineSuggestion.`,Ke(d("triggerIntellisense","Trigger Intellisense"),"command:editor.action.triggerSuggest"),Ke(d("triggerInlineSuggestion","Trigger Inline Suggestion"),"command:editor.action.inlineSuggest.trigger")),media:{type:"markdown",path:"empty"}}]}},{id:"Beginner",isFeatured:!1,title:d("gettingStarted.beginner.title","Learn the Fundamentals"),icon:Y2,description:d("gettingStarted.beginner.description","Get an overview of the most essential features"),content:{type:"steps",steps:[{id:"extensions",title:d("gettingStarted.extensions.title","Code with extensions"),description:d("gettingStarted.extensions.description.interpolated",`Extensions are VS Code's power-ups. They range from handy productivity hacks, expanding out-of-the-box features, to adding completely new capabilities.
{0}`,Ke(d("browsePopular","Browse Popular Extensions"),"command:workbench.extensions.action.showPopularExtensions")),when:"workspacePlatform != 'webworker'",media:{type:"svg",altText:"VS Code extension marketplace with featured language extensions",path:"extensions.svg"}},{id:"terminal",title:d("gettingStarted.terminal.title","Built-in terminal"),description:d("gettingStarted.terminal.description.interpolated",`Quickly run shell commands and monitor build output, right next to your code.
{0}`,Ke(d("showTerminal","Open Terminal"),"command:workbench.action.terminal.toggleTerminal")),when:"workspacePlatform != 'webworker' && remoteName != codespaces && !terminalIsOpen",media:{type:"svg",altText:"Integrated terminal running a few npm commands",path:"terminal.svg"}},{id:"debugging",title:d("gettingStarted.debug.title","Watch your code in action"),description:d("gettingStarted.debug.description.interpolated",`Accelerate your edit, build, test, and debug loop by setting up a launch configuration.
{0}`,Ke(d("runProject","Run your Project"),"command:workbench.action.debug.selectandstart")),when:"workspacePlatform != 'webworker' && workspaceFolderCount != 0",media:{type:"svg",altText:"Run and debug view.",path:"debug.svg"}},{id:"scmClone",title:d("gettingStarted.scm.title","Track your code with Git"),description:d("gettingStarted.scmClone.description.interpolated",`Set up the built-in version control for your project to track your changes and collaborate with others.
{0}`,Ke(d("cloneRepo","Clone Repository"),"command:git.clone")),when:"config.git.enabled && !git.missing && workspaceFolderCount == 0",media:{type:"svg",altText:"Source Control view.",path:"git.svg"}},{id:"scmSetup",title:d("gettingStarted.scm.title","Track your code with Git"),description:d("gettingStarted.scmSetup.description.interpolated",`Set up the built-in version control for your project to track your changes and collaborate with others.
{0}`,Ke(d("initRepo","Initialize Git Repository"),"command:git.init")),when:"config.git.enabled && !git.missing && workspaceFolderCount != 0 && gitOpenRepositoryCount == 0",media:{type:"svg",altText:"Source Control view.",path:"git.svg"}},{id:"scm",title:d("gettingStarted.scm.title","Track your code with Git"),description:d("gettingStarted.scm.description.interpolated",`No more looking up Git commands! Git and GitHub workflows are seamlessly integrated.
{0}`,Ke(d("openSCM","Open Source Control"),"command:workbench.view.scm")),when:"config.git.enabled && !git.missing && workspaceFolderCount != 0 && gitOpenRepositoryCount != 0 && activeViewlet != 'workbench.view.scm'",media:{type:"svg",altText:"Source Control view.",path:"git.svg"}},{id:"installGit",title:d("gettingStarted.installGit.title","Install Git"),description:d({key:"gettingStarted.installGit.description.interpolated",comment:["The placeholders are command link items should not be translated"]},`Install Git to track changes in your projects.
{0}
{1}Reload window{2} after installation to complete Git setup.`,Ke(d("installGit","Install Git"),"https://aka.ms/vscode-install-git"),"[","](command:workbench.action.reloadWindow)"),when:"git.missing",media:{type:"svg",altText:"Install Git.",path:"git.svg"},completionEvents:["onContext:git.state == initialized"]},{id:"tasks",title:d("gettingStarted.tasks.title","Automate your project tasks"),when:"workspaceFolderCount != 0 && workspacePlatform != 'webworker'",description:d("gettingStarted.tasks.description.interpolated",`Create tasks for your common workflows and enjoy the integrated experience of running scripts and automatically checking results.
{0}`,Ke(d("runTasks","Run Auto-detected Tasks"),"command:workbench.action.tasks.runTask")),media:{type:"svg",altText:"Task runner.",path:"runTask.svg"}},{id:"shortcuts",title:d("gettingStarted.shortcuts.title","Customize your shortcuts"),description:d("gettingStarted.shortcuts.description.interpolated",`Once you have discovered your favorite commands, create custom keyboard shortcuts for instant access.
{0}`,Ke(d("keyboardShortcuts","Keyboard Shortcuts"),"command:toSide:workbench.action.openGlobalKeybindings")),media:{type:"svg",altText:"Interactive shortcuts.",path:"shortcuts.svg"}},{id:"workspaceTrust",title:d("gettingStarted.workspaceTrust.title","Safely browse and edit code"),description:d("gettingStarted.workspaceTrust.description.interpolated",`{0} lets you decide whether your project folders should **allow or restrict** automatic code execution __(required for extensions, debugging, etc)__.
Opening a file/folder will prompt to grant trust. You can always {1} later.`,Ke(d("workspaceTrust","Workspace Trust"),"https://code.visualstudio.com/docs/editor/workspace-trust"),Ke(d("enableTrust","enable trust"),"command:toSide:workbench.action.manageTrustedDomain")),when:"workspacePlatform != 'webworker' && !isWorkspaceTrusted && workspaceFolderCount == 0",media:{type:"svg",altText:"Workspace Trust editor in Restricted mode and a primary button for switching to Trusted mode.",path:"workspaceTrust.svg"}}]}},{id:"notebooks",title:d("gettingStarted.notebook.title","Customize Notebooks"),description:"",icon:kb,isFeatured:!1,when:`config.${HL.openGettingStarted} && userHasOpenedNotebook`,content:{type:"steps",steps:[{completionEvents:["onCommand:notebook.setProfile"],id:"notebookProfile",title:d("gettingStarted.notebookProfile.title","Select the layout for your notebooks"),description:d("gettingStarted.notebookProfile.description","Get notebooks to feel just the way you prefer"),when:"userHasOpenedNotebook",media:{type:"markdown",path:"notebookProfile"}}]}}];var KL="VSCode.ABExp.FeatureData",GL=0;var qL=(c=>(c.Market="X-MSEdge-Market",c.CorpNet="X-FD-Corpnet",c.ApplicationVersion="X-VSCode-AppVersion",c.Build="X-VSCode-Build",c.ClientId="X-MSEdge-ClientId",c.ExtensionName="X-VSCode-ExtensionName",c.ExtensionVersion="X-VSCode-ExtensionVersion",c.Language="X-VSCode-Language",c.TargetPopulation="X-VSCode-TargetPopulation",c))(qL||{}),Db=class i{constructor(e,t,n,o){this.version=e;this.appName=t;this.machineId=n;this.targetPopulation=o}static trimVersionSuffix(e){let t=/\-[a-zA-Z0-9]+$/;return e.split(t)[0]}getFilterValue(e){switch(e){case"X-VSCode-AppVersion":return i.trimVersionSuffix(this.version);case"X-VSCode-Build":return this.appName;case"X-MSEdge-ClientId":return this.machineId;case"X-VSCode-Language":return Xn;case"X-VSCode-ExtensionName":return"vscode-core";case"X-VSCode-ExtensionVersion":return"999999.0";case"X-VSCode-TargetPopulation":return this.targetPopulation;default:return""}}getFilters(){let e=new Map,t=Object.values(qL);for(let n of t)e.set(n,this.getFilterValue(n));return e}};var _b=class{constructor(e,t,n,o,r,s){this.machineId=e;this.configurationService=t;this.productService=n;this.environmentService=o;this.telemetry=r;this.keyValueStorage=s;!(o.extensionTestsLocationURI!==void 0)&&n.tasConfig&&this.experimentsEnabled&&Rd(this.configurationService)===3&&(this.tasClient=this.setupTASClient());let l=this.configurationService.getValue("experiments.overrideDelay"),c=typeof l=="number"?l:0;this.overrideInitDelay=new Promise(u=>setTimeout(u,c))}_serviceBrand;tasClient;networkInitialized=!1;overrideInitDelay;get experimentsEnabled(){return!0}async getTreatment(e){await this.overrideInitDelay;let t=this.configurationService.getValue("experiments.override."+e);if(t!==void 0)return t;if(!this.tasClient||!this.experimentsEnabled)return;let n,o=await this.tasClient;return this.networkInitialized?n=o.getTreatmentVariable("vscode",e):n=await o.getTreatmentVariableAsync("vscode",e,!0),n=o.getTreatmentVariable("vscode",e),n}async setupTASClient(){let e=this.productService.quality==="stable"?"public":this.productService.quality==="exploration"?"exploration":"insider",t=new Db(this.productService.version,this.productService.nameLong,this.machineId,e),n=this.productService.tasConfig,o=new(await mE("tas-client-umd","lib/tas-client-umd.js")).ExperimentationService({filterProviders:[t],telemetry:this.telemetry,storageKey:KL,keyValueStorage:this.keyValueStorage,assignmentContextTelemetryPropertyName:n.assignmentContextTelemetryPropertyName,telemetryEventName:n.telemetryEventName,endpoint:n.endpoint,refetchInterval:GL});return await o.initializePromise,o.initialFetch.then(()=>this.networkInitialized=!0),o}};var SC=P("WorkbenchAssignmentService"),IC=class{constructor(e){this.memento=e;this.mementoObj=e.getMemento(-1,1)}mementoObj;async getValue(e,t){return await this.mementoObj[e]||t}setValue(e,t){this.mementoObj[e]=t,this.memento.saveMemento()}},xC=class{constructor(e,t){this.telemetryService=e;this.productService=t}_lastAssignmentContext;get assignmentContext(){return this._lastAssignmentContext?.split(";")}setSharedProperty(e,t){e===this.productService.tasConfig?.assignmentContextTelemetryPropertyName&&(this._lastAssignmentContext=t),this.telemetryService.setExperimentProperty(e,t)}postEvent(e,t){let n={};for(let[o,r]of t.entries())n[o]=r;this.telemetryService.publicLog(e,n)}},Mp=class extends _b{constructor(t,n,o,r,s){super(t.machineId,o,r,s,new xC(t,r),new IC(new Ro("experiment.service.memento",n)));this.telemetryService=t}get experimentsEnabled(){return this.configurationService.getValue("workbench.enableExperiments")===!0}async getTreatment(t){let n=await super.getTreatment(t);return this.telemetryService.publicLog2("tasClientReadTreatmentComplete",{treatmentName:t,treatmentValue:JSON.stringify(n)}),n}async getCurrentExperiments(){if(this.tasClient&&this.experimentsEnabled)return await this.tasClient,this.telemetry?.assignmentContext}};Mp=L([w(0,Ks),w(1,vn),w(2,$e),w(3,or),w(4,An)],Mp);zt(SC,Mp,1);var Q2=Ae.as(Mi.Configuration);Q2.registerConfiguration({...Xf,properties:{"workbench.enableExperiments":{type:"boolean",description:d("workbench.enableExperiments","Fetches experiments to run from a Microsoft online service."),default:!0,scope:1,restricted:!0,tags:["usesOnlineServices"]}}});var cc=d("title","Title"),$L=CL.registerExtensionPoint({extensionPoint:"walkthroughs",jsonSchema:{description:d("walkthroughs","Contribute walkthroughs to help users getting started with your extension."),type:"array",items:{type:"object",required:["id","title","description","steps"],defaultSnippets:[{body:{id:"$1",title:"$2",description:"$3",steps:[]}}],properties:{id:{type:"string",description:d("walkthroughs.id","Unique identifier for this walkthrough.")},title:{type:"string",description:d("walkthroughs.title","Title of walkthrough.")},icon:{type:"string",description:d("walkthroughs.icon","Relative path to the icon of the walkthrough. The path is relative to the extension location. If not specified, the icon defaults to the extension icon if available.")},description:{type:"string",description:d("walkthroughs.description","Description of walkthrough.")},featuredFor:{type:"array",description:d("walkthroughs.featuredFor","Walkthroughs that match one of these glob patterns appear as 'featured' in workspaces with the specified files. For example, a walkthrough for TypeScript projects might specify `tsconfig.json` here."),items:{type:"string"}},when:{type:"string",description:d("walkthroughs.when","Context key expression to control the visibility of this walkthrough.")},steps:{type:"array",description:d("walkthroughs.steps","Steps to complete as part of this walkthrough."),items:{type:"object",required:["id","title","media"],defaultSnippets:[{body:{id:"$1",title:"$2",description:"$3",completionEvents:["$5"],media:{}}}],properties:{id:{type:"string",description:d("walkthroughs.steps.id","Unique identifier for this step. This is used to keep track of which steps have been completed.")},title:{type:"string",description:d("walkthroughs.steps.title","Title of step.")},description:{type:"string",description:d("walkthroughs.steps.description.interpolated","Description of step. Supports ``preformatted``, __italic__, and **bold** text. Use markdown-style links for commands or external links: {0}, {1}, or {2}. Links on their own line will be rendered as buttons.",`[${cc}](command:myext.command)`,`[${cc}](command:toSide:myext.command)`,`[${cc}](https://aka.ms)`)},button:{deprecationMessage:d("walkthroughs.steps.button.deprecated.interpolated","Deprecated. Use markdown links in the description instead, i.e. {0}, {1}, or {2}",`[${cc}](command:myext.command)`,`[${cc}](command:toSide:myext.command)`,`[${cc}](https://aka.ms)`)},media:{type:"object",description:d("walkthroughs.steps.media","Media to show alongside this step, either an image or markdown content."),oneOf:[{required:["image","altText"],additionalProperties:!1,properties:{path:{deprecationMessage:d("pathDeprecated","Deprecated. Please use `image` or `markdown` instead")},image:{description:d("walkthroughs.steps.media.image.path.string","Path to an image - or object consisting of paths to light, dark, and hc images - relative to extension directory. Depending on context, the image will be displayed from 400px to 800px wide, with similar bounds on height. To support HIDPI displays, the image will be rendered at 1.5x scaling, for example a 900 physical pixels wide image will be displayed as 600 logical pixels wide."),oneOf:[{type:"string"},{type:"object",required:["dark","light","hc","hcLight"],properties:{dark:{description:d("walkthroughs.steps.media.image.path.dark.string","Path to the image for dark themes, relative to extension directory."),type:"string"},light:{description:d("walkthroughs.steps.media.image.path.light.string","Path to the image for light themes, relative to extension directory."),type:"string"},hc:{description:d("walkthroughs.steps.media.image.path.hc.string","Path to the image for hc themes, relative to extension directory."),type:"string"},hcLight:{description:d("walkthroughs.steps.media.image.path.hcLight.string","Path to the image for hc light themes, relative to extension directory."),type:"string"}}}]},altText:{type:"string",description:d("walkthroughs.steps.media.altText","Alternate text to display when the image cannot be loaded or in screen readers.")}}},{required:["svg","altText"],additionalProperties:!1,properties:{svg:{description:d("walkthroughs.steps.media.image.path.svg","Path to an svg, color tokens are supported in variables to support theming to match the workbench."),type:"string"},altText:{type:"string",description:d("walkthroughs.steps.media.altText","Alternate text to display when the image cannot be loaded or in screen readers.")}}},{required:["markdown"],additionalProperties:!1,properties:{path:{deprecationMessage:d("pathDeprecated","Deprecated. Please use `image` or `markdown` instead")},markdown:{description:d("walkthroughs.steps.media.markdown.path","Path to the markdown document, relative to extension directory."),type:"string"}}}]},completionEvents:{description:d("walkthroughs.steps.completionEvents","Events that should trigger this step to become checked off. If empty or not defined, the step will check off when any of the step's buttons or links are clicked; if the step has no buttons or links it will check on when it is selected."),type:"array",items:{type:"string",defaultSnippets:[{label:"onCommand",description:d("walkthroughs.steps.completionEvents.onCommand","Check off step when a given command is executed anywhere in VS Code."),body:"onCommand:${1:commandId}"},{label:"onLink",description:d("walkthroughs.steps.completionEvents.onLink","Check off step when a given link is opened via a walkthrough step."),body:"onLink:${2:linkId}"},{label:"onView",description:d("walkthroughs.steps.completionEvents.onView","Check off step when a given view is opened"),body:"onView:${2:viewId}"},{label:"onSettingChanged",description:d("walkthroughs.steps.completionEvents.onSettingChanged","Check off step when a given setting is changed"),body:"onSettingChanged:${2:settingName}"},{label:"onContext",description:d("walkthroughs.steps.completionEvents.onContext","Check off step when a context key expression is true."),body:"onContext:${2:key}"},{label:"onExtensionInstalled",description:d("walkthroughs.steps.completionEvents.extensionInstalled","Check off step when an extension with the given id is installed. If the extension is already installed, the step will start off checked."),body:"onExtensionInstalled:${3:extensionId}"},{label:"onStepSelected",description:d("walkthroughs.steps.completionEvents.stepSelected","Check off step as soon as it is selected."),body:"onStepSelected"}]}},doneOn:{description:d("walkthroughs.steps.doneOn","Signal to mark step as complete."),deprecationMessage:d("walkthroughs.steps.doneOn.deprecation","doneOn is deprecated. By default steps will be checked off when their buttons are clicked, to configure further use completionEvents"),type:"object",required:["command"],defaultSnippets:[{body:{command:"$1"}}],properties:{command:{description:d("walkthroughs.steps.oneOn.command","Mark step done when the specified command is executed."),type:"string"}}},when:{type:"string",description:d("walkthroughs.steps.when","Context key expression to control the visibility of this step.")}}}}}}},activationEventsGenerator:(i,e)=>{for(let t of i)t.id&&e.push(`onWalkthrough:${t.id}`)}});var wSt=d("views log","Views"),TSt=wo("default-view-icon",j.window,d("defaultViewIcon","Default view icon.")),wC;(t=>(t.ViewContainersRegistry="workbench.registry.view.containers",t.ViewsRegistry="workbench.registry.view"))(wC||={});var EC=class extends A{_onDidRegister=this._register(new C);onDidRegister=this._onDidRegister.event;_onDidDeregister=this._register(new C);onDidDeregister=this._onDidDeregister.event;viewContainers=new Map;defaultViewContainers=[];get all(){return[...this.viewContainers.values()].flat()}registerViewContainer(e,t,n){let o=this.get(e.id);if(o)return o;let r=e;return r.openCommandActionDescriptor=n?.doNotRegisterOpenCommand?void 0:r.openCommandActionDescriptor??{id:r.id},Lc(this.viewContainers,t,[]).push(r),n?.isDefault&&this.defaultViewContainers.push(r),this._onDidRegister.fire({viewContainer:r,viewContainerLocation:t}),r}deregisterViewContainer(e){for(let t of this.viewContainers.keys()){let n=this.viewContainers.get(t),o=n?.indexOf(e);if(o!==-1){n?.splice(o,1),n.length===0&&this.viewContainers.delete(t),this._onDidDeregister.fire({viewContainer:e,viewContainerLocation:t});return}}}get(e){return this.all.filter(t=>t.id===e)[0]}getViewContainers(e){return[...this.viewContainers.get(e)||[]]}getViewContainerLocation(e){return[...this.viewContainers.keys()].filter(t=>this.getViewContainers(t).filter(n=>n?.id===e.id).length>0)[0]}getDefaultViewContainer(e){return this.defaultViewContainers.find(t=>this.getViewContainerLocation(t)===e)}};Ae.add(wC.ViewContainersRegistry,new EC);function X2(i,e){let t=i.group??"9_more",n=e.group??"9_more";return t!==n?t.localeCompare(n):(i.order??5)-(e.order??5)}var CC=class extends A{_onViewsRegistered=this._register(new C);onViewsRegistered=this._onViewsRegistered.event;_onViewsDeregistered=this._register(new C);onViewsDeregistered=this._onViewsDeregistered.event;_onDidChangeContainer=this._register(new C);onDidChangeContainer=this._onDidChangeContainer.event;_onDidChangeViewWelcomeContent=this._register(new C);onDidChangeViewWelcomeContent=this._onDidChangeViewWelcomeContent.event;_viewContainers=[];_views=new Map;_viewWelcomeContents=new vl;registerViews(e,t){this.registerViews2([{views:e,viewContainer:t}])}registerViews2(e){e.forEach(({views:t,viewContainer:n})=>this.addViews(t,n)),this._onViewsRegistered.fire(e)}deregisterViews(e,t){let n=this.removeViews(e,t);n.length&&this._onViewsDeregistered.fire({views:n,viewContainer:t})}moveViews(e,t){for(let n of this._views.keys())if(n!==t){let o=this.removeViews(e,n);o.length&&(this.addViews(o,t),this._onDidChangeContainer.fire({views:o,from:n,to:t}))}}getViews(e){return this._views.get(e)||[]}getView(e){for(let t of this._viewContainers){let n=(this._views.get(t)||[]).filter(o=>o.id===e)[0];if(n)return n}return null}getViewContainer(e){for(let t of this._viewContainers)if((this._views.get(t)||[]).filter(o=>o.id===e)[0])return t;return null}registerViewWelcomeContent(e,t){return this._viewWelcomeContents.add(e,t),this._onDidChangeViewWelcomeContent.fire(e),le(()=>{this._viewWelcomeContents.delete(e,t),this._onDidChangeViewWelcomeContent.fire(e)})}registerViewWelcomeContent2(e,t){let n=new Map;for(let[o,r]of t)this._viewWelcomeContents.add(e,r),n.set(o,le(()=>{this._viewWelcomeContents.delete(e,r),this._onDidChangeViewWelcomeContent.fire(e)}));return this._onDidChangeViewWelcomeContent.fire(e),n}getViewWelcomeContent(e){let t=[];return this._viewWelcomeContents.forEach(e,n=>t.push(n)),t.sort(X2)}addViews(e,t){let n=this._views.get(t);n||(n=[],this._views.set(t,n),this._viewContainers.push(t));for(let o of e){if(this.getView(o.id)!==null)throw new Error(d("duplicateId","A view with id '{0}' is already registered",o.id));n.push(o)}}removeViews(e,t){let n=this._views.get(t);if(!n)return[];let o=[],r=[];for(let s of n)e.includes(s)?o.push(s):r.push(s);return o.length&&(r.length?this._views.set(t,r):(this._views.delete(t),this._viewContainers.splice(this._viewContainers.indexOf(t),1))),o}};Ae.add(wC.ViewsRegistry,new CC);var kSt=P("viewDescriptorService");var jL=P("viewsService");var J2="\u27EA ",Z2=" characters skipped \u27EB",TEt=(J2.length+Z2.length+5)*2,YL=P("searchService");function QL(i,e=!0){let t=i&&i.files&&i.files.exclude,n=e&&i&&i.search&&i.search.exclude;if(!t&&!n)return;if(!t||!n)return t||n||void 0;let o=Object.create(null);return o=hu(o,La(t)),o=hu(o,La(n),!0),o}function TC(i,e){return i.excludePattern&&Ra(i.excludePattern,e)?!1:i.includePattern||i.usingSearchPaths?i.includePattern&&Ra(i.includePattern,e)?!0:i.usingSearchPaths?!!i.folderQueries&&i.folderQueries.some(t=>{let n=t.folder.fsPath;if(ya(e,n)){let o=ml(n,e);return!t.includePattern||!!Ra(t.includePattern,o)}else return!1}):!1:!0}function eB(i){return typeof i=="object"&&"uri"in i&&"pattern"in i}var uc=class{constructor(e,t,n,o,r,s){this.configurationService=e;this.workspaceContextService=t;this.editorGroupsService=n;this.logService=o;this.pathService=r;this.uriIdentityService=s}text(e,t,n={}){e=this.getContentPattern(e,n);let o=this.configurationService.getValue(),r=t&&t.some(a=>!this.configurationService.getValue({resource:a}).search.useRipgrep);return{...this.commonQuery(t?.map(Lu),n),type:2,contentPattern:e,previewOptions:n.previewOptions,maxFileSize:n.maxFileSize,usePCRE2:o.search.usePCRE2||r||!1,surroundingContext:n.surroundingContext,userDisabledExcludesAndIgnoreFiles:n.disregardExcludeSettings&&n.disregardIgnoreFiles}}getContentPattern(e,t){let n=this.configurationService.getValue();e.isRegExp&&(e.pattern=e.pattern.replace(/\r?\n/g,"\\n"));let o={...e,wordSeparators:n.editor.wordSeparators};return this.isCaseSensitive(e,t)&&(o.isCaseSensitive=!0),this.isMultiline(e)&&(o.isMultiline=!0),t.notebookSearchConfig?.includeMarkupInput&&(o.notebookInfo||(o.notebookInfo={}),o.notebookInfo.isInNotebookMarkdownInput=t.notebookSearchConfig.includeMarkupInput),t.notebookSearchConfig?.includeMarkupPreview&&(o.notebookInfo||(o.notebookInfo={}),o.notebookInfo.isInNotebookMarkdownPreview=t.notebookSearchConfig.includeMarkupPreview),t.notebookSearchConfig?.includeCodeInput&&(o.notebookInfo||(o.notebookInfo={}),o.notebookInfo.isInNotebookCellInput=t.notebookSearchConfig.includeCodeInput),t.notebookSearchConfig?.includeOutput&&(o.notebookInfo||(o.notebookInfo={}),o.notebookInfo.isInNotebookCellOutput=t.notebookSearchConfig.includeOutput),o}file(e,t={}){return{...this.commonQuery(e,t),type:1,filePattern:t.filePattern?t.filePattern.trim():t.filePattern,exists:t.exists,sortByScore:t.sortByScore,cacheKey:t.cacheKey,shouldGlobMatchFilePattern:t.shouldGlobSearch}}handleIncludeExclude(e,t){if(!e)return{};if(Array.isArray(e)){if(e=e.filter(n=>n.length>0).map(Lb),!e.length)return{}}else e=Lb(e);return t?this.parseSearchPaths(e):{pattern:kC(...Array.isArray(e)?e:[e])}}commonQuery(e=[],t={}){let n=Array.isArray(t.excludePattern)?t.excludePattern.map(u=>u.pattern).flat():t.excludePattern;n=n?.length===1?n[0]:n;let o=this.handleIncludeExclude(t.includePattern,t.expandPatterns),r=this.handleIncludeExclude(n,t.expandPatterns),s=e.length>1,a=(o.searchPaths&&o.searchPaths.length?o.searchPaths.map(u=>this.getFolderQueryForSearchPath(u,t,r)):e.map(u=>this.getFolderQueryForRoot(u,t,r,s))).filter(u=>!!u),l={_reason:t._reason,folderQueries:a,usingSearchPaths:!!(o.searchPaths&&o.searchPaths.length),extraFileResources:t.extraFileResources,excludePattern:r.pattern,includePattern:o.pattern,onlyOpenEditors:t.onlyOpenEditors,maxResults:t.maxResults,onlyFileScheme:t.onlyFileScheme};if(t.onlyOpenEditors){let u=Yt(this.editorGroupsService.groups.flatMap(m=>m.editors.map(v=>v.resource)));this.logService.trace("QueryBuilder#commonQuery - openEditor URIs",JSON.stringify(u));let p=u.filter(m=>TC(l,m.fsPath)),h=this.commonQueryFromFileList(p);return this.logService.trace("QueryBuilder#commonQuery - openEditor Query",JSON.stringify(h)),{...l,...h}}let c=t.extraFileResources&&t.extraFileResources.filter(u=>TC(l,u.fsPath));return l.extraFileResources=c&&c.length?c:void 0,l}commonQueryFromFileList(e){let t=[],n=new bt,o={},r=!1;return e.forEach(s=>{if(s.scheme===H.walkThrough)return;if(iT(s)){let l=this.workspaceContextService.getWorkspaceFolder(s)?.uri??this.uriIdentityService.extUri.dirname(s),c=n.get(l);c||(r=!0,c={folder:l,includePattern:{}},t.push(c),n.set(l,c));let u=ml(l.fsPath,s.fsPath);Rt(c.includePattern)[u.replace(/\\/g,"/")]=!0}else s.fsPath&&(r=!0,o[s.fsPath]=!0)}),{folderQueries:t,includePattern:o,usingSearchPaths:!0,excludePattern:r?void 0:{"**/*":!0}}}isCaseSensitive(e,t){if(t.isSmartCase){if(e.isRegExp){if(Rv(e.pattern,!0))return!0}else if(Rv(e.pattern))return!0}return!!e.isCaseSensitive}isMultiline(e){return e.isMultiline||e.isRegExp&&GS(e.pattern)||e.pattern.indexOf(`
`)>=0?!0:!!e.isMultiline}parseSearchPaths(e){let t=p=>wr(p)||/^\.\.?([\/\\]|$)/.test(p),o=(Array.isArray(e)?e:nB(e)).map(p=>{let h=this.pathService.resolvedUserHome;return h?Pk(p,h.scheme===H.file?h.fsPath:h.path):p}),r=qb(o,p=>t(p)?"searchPaths":"exprSegments"),s=(r.exprSegments||[]).map(p=>Rl(p,"/")).map(p=>Rl(p,"\\")).map(p=>(p[0]==="."&&(p="*"+p),iB(p))),a={},l=this.expandSearchPathPatterns(r.searchPaths||[]);l&&l.length&&(a.searchPaths=l);let c=s.flat(),u=kC(...c);return u&&(a.pattern=u),a}getExcludesForFolder(e,t){return t.disregardExcludeSettings?void 0:QL(e,!t.disregardSearchExcludeSettings)}expandSearchPathPatterns(e){if(!e||!e.length)return[];let t=e.flatMap(o=>{let{pathPortion:r,globPortion:s}=tB(o);return s&&(s=DC(s)),this.expandOneSearchPath(r).flatMap(l=>this.resolveOneSearchPathPattern(l,s))}),n=new Map;return t.forEach(o=>{let r=o.searchPath.toString(),s=n.get(r);s?o.pattern&&(s.pattern=s.pattern||{},s.pattern[o.pattern]=!0):n.set(r,{searchPath:o.searchPath,pattern:o.pattern?kC(o.pattern):void 0})}),Array.from(n.values())}expandOneSearchPath(e){if(wr(e)){let t=this.workspaceContextService.getWorkspace().folders;return t[0]&&t[0].uri.scheme!==H.file?[{searchPath:t[0].uri.with({path:e})}]:[{searchPath:N.file(No(e))}]}if(this.workspaceContextService.getWorkbenchState()===2){let t=this.workspaceContextService.getWorkspace().folders[0].uri;if(e=Lb(e),e.startsWith("../")||e===".."){let o=Be.resolve(t.path,e);return[{searchPath:t.with({path:o})}]}let n=DC(e);return[{searchPath:t,pattern:n}]}else{if(e==="./"||e===".\\")return[];{let t=e.replace(/^\.[\/\\]/,""),o=this.workspaceContextService.getWorkspace().folders.map(r=>{let s=t.match(new RegExp(`^${pn(r.name)}(?:/(.*)|$)`));return s?{match:s,folder:r}:null}).filter(Oh);if(o.length)return o.map(r=>{let s=r.match[1];return{searchPath:r.folder.uri,pattern:s&&DC(s)}});{let r=e.match(/\.[\/\\](.+)[\/\\]?/),s=r?r[1]:e,a=d("search.noWorkspaceWithName","Workspace folder does not exist: {0}",s);throw new Error(a)}}}}resolveOneSearchPathPattern(e,t){let n=e.pattern&&t?`${e.pattern}/${t}`:e.pattern||t,o=[{searchPath:e.searchPath,pattern:n}];return n&&!n.endsWith("**")&&o.push({searchPath:e.searchPath,pattern:n+"/**"}),o}getFolderQueryForSearchPath(e,t,n){let o=this.getFolderQueryForRoot(Lu(e.searchPath),t,n,!1);return o?{...o,includePattern:e.pattern}:null}getFolderQueryForRoot(e,t,n,o){let r,s=N.isUri(e)?e:e.uri,a=t.excludePattern?.map(m=>{let v=t.excludePattern&&eB(m)?m.uri:void 0;return!v||!(N.isUri(e)&&this.uriIdentityService.extUri.isEqual(e,v))?v:void 0});if(a?.length||(a=[void 0]),n.searchPaths){let m=n.searchPaths.filter(v=>ei(v.searchPath,s))[0];if(m&&!m.pattern)return null;m&&(r=m.pattern)}let l=this.configurationService.getValue({resource:s}),u={...this.getExcludesForFolder(l,t)||{},...r||{}},p=N.isUri(e)?Ri(e):e.name,h=a.map(m=>Object.keys(u).length>0?{folder:m,pattern:u}:void 0).filter(m=>m);return{folder:s,folderName:o?p:void 0,excludePattern:h,fileEncoding:l.files&&l.files.encoding,disregardIgnoreFiles:typeof t.disregardIgnoreFiles=="boolean"?t.disregardIgnoreFiles:!l.search.useIgnoreFiles,disregardGlobalIgnoreFiles:typeof t.disregardGlobalIgnoreFiles=="boolean"?t.disregardGlobalIgnoreFiles:!l.search.useGlobalIgnoreFiles,disregardParentIgnoreFiles:typeof t.disregardParentIgnoreFiles=="boolean"?t.disregardParentIgnoreFiles:!l.search.useParentIgnoreFiles,ignoreSymlinks:typeof t.ignoreSymlinks=="boolean"?t.ignoreSymlinks:!l.search.followSymlinks}}};uc=L([w(0,$e),w(1,_t),w(2,$d),w(3,qt),w(4,nb),w(5,Hs)],uc);function tB(i){let e=i.match(/[\*\{\}\(\)\[\]\?]/);if(e){let t=e.index,n=i.substr(0,t).match(/[/|\\][^/\\]*$/);if(n){let o=i.substr(0,n.index);return o.match(/[/\\]/)||(o+="/"),{pathPortion:o,globPortion:i.substr((n.index||0)+1)}}}return{pathPortion:i}}function kC(...i){return i.length?i.reduce((e,t)=>(e[t]=!0,e),Object.create(null)):void 0}function nB(i){return Pg(i,",").map(e=>e.trim()).filter(e=>!!e.length)}function iB(i){return[`**/${i}/**`,`**/${i}`].map(t=>t.replace(/\*\*\/\*\*/g,"**"))}function Lb(i){return i.replace(/\\/g,"/")}function DC(i){return Lb(i).replace(/^\.\//,"").replace(/\/+$/g,"")}function XL(i,e,t,n){let o=i.get(Vt),r=i.get(YL),a=o.createInstance(uc).file(e.map(l=>Lu(N.revive(l))),{_reason:"checkExists",includePattern:t,exists:!0});return r.fileSearch(a,n).then(l=>!!l.limitHit,l=>yc(l)?!1:Promise.reject(l))}var oB=fb;var UCt=P("extensionManagementServerService"),JL=hn.asBrowserUri("vs/workbench/services/extensionManagement/common/media/defaultIcon.png").toString(!0),VCt=oB,zCt={id:"extensions",order:30,title:d("extensionsConfigurationTitle","Extensions"),type:"object"};var HCt=P("extensionEnablementService"),KCt=P("IWebExtensionsScannerService");var rB=new K("hasMultipleNewFileEntries",!1),Pb=P("walkthroughsService"),Ob="workbench.welcomePage.hiddenCategories",Rb="workbench.welcomePage.walkthroughMetadata",sB=d("builtin","Built-In"),aB=24*60*60*1e3,_C=7*aB,Fp=class extends A{constructor(t,n,o,r,s,a,l,c,u,p,h,m){super();this.storageService=t;this.commandService=n;this.instantiationService=o;this.workspaceContextService=r;this.contextService=s;this.userDataSyncEnablementService=a;this.configurationService=l;this.extensionManagementService=c;this.hostService=u;this.viewsService=p;this.telemetryService=h;this.tasExperimentService=m;this.metadata=new Map(JSON.parse(this.storageService.get(Rb,0,"[]"))),this.memento=new Ro("gettingStartedService",this.storageService),this.stepProgress=this.memento.getMemento(0,0),this.initCompletionEventListeners(),rB.bindTo(this.contextService).set(!1),this.registerWalkthroughs()}_onDidAddWalkthrough=new C;onDidAddWalkthrough=this._onDidAddWalkthrough.event;_onDidRemoveWalkthrough=new C;onDidRemoveWalkthrough=this._onDidRemoveWalkthrough.event;_onDidChangeWalkthrough=new C;onDidChangeWalkthrough=this._onDidChangeWalkthrough.event;_onDidProgressStep=new C;onDidProgressStep=this._onDidProgressStep.event;memento;stepProgress;sessionEvents=new Set;completionListeners=new Map;gettingStartedContributions=new Map;steps=new Map;sessionInstalledExtensions=new Set;categoryVisibilityContextKeys=new Set;stepCompletionContextKeyExpressions=new Set;stepCompletionContextKeys=new Set;metadata;registerWalkthroughs(){yC.forEach(async(t,n)=>{this._registerWalkthrough({...t,icon:{type:"icon",icon:t.icon},order:yC.length-n,source:sB,when:xe.deserialize(t.when)??xe.true(),steps:t.content.steps.map((o,r)=>({...o,completionEvents:o.completionEvents??[],description:Bp(o.description),category:t.id,order:r,when:xe.deserialize(o.when)??xe.true(),media:o.media.type==="image"?{type:"image",altText:o.media.altText,path:lB(o.media.path)}:o.media.type==="svg"?{type:"svg",altText:o.media.altText,path:ZL(o.media.path).with({query:JSON.stringify({moduleId:"../common/media/"+o.media.path+".js"})})}:{type:"markdown",path:ZL(o.media.path).with({query:JSON.stringify({moduleId:"../common/media/"+o.media.path+".js"})}),base:hn.asFileUri("vs/workbench/contrib/welcomeGettingStarted/common/media/"),root:hn.asFileUri("vs/workbench/contrib/welcomeGettingStarted/common/media/")}}))})}),$L.setHandler((t,{added:n,removed:o})=>{n.map(r=>this.registerExtensionWalkthroughContributions(r.description)),o.map(r=>this.unregisterExtensionWalkthroughContributions(r.description))})}initCompletionEventListeners(){this._register(this.commandService.onDidExecuteCommand(t=>this.progressByEvent(`onCommand:${t.commandId}`))),this.extensionManagementService.getInstalled().then(t=>{t.forEach(n=>this.progressByEvent(`extensionInstalled:${n.identifier.id.toLowerCase()}`))}),this._register(this.extensionManagementService.onDidInstallExtensions(t=>{for(let n of t)n?.context?.[IL]||n?.context?.[xL]||this.sessionInstalledExtensions.add(n.identifier.id.toLowerCase()),this.progressByEvent(`extensionInstalled:${n.identifier.id.toLowerCase()}`)})),this._register(this.contextService.onDidChangeContext(t=>{t.affectsSome(this.stepCompletionContextKeys)&&this.stepCompletionContextKeyExpressions.forEach(n=>{t.affectsSome(new Set(n.keys()))&&this.contextService.contextMatchesRules(n)&&this.progressByEvent("onContext:"+n.serialize())})})),this._register(this.viewsService.onDidChangeViewVisibility(t=>{t.visible&&this.progressByEvent("onView:"+t.id)})),this._register(this.configurationService.onDidChangeConfiguration(t=>{t.affectedKeys.forEach(n=>{this.progressByEvent("onSettingChanged:"+n)})})),this.userDataSyncEnablementService.isEnabled()&&this.progressByEvent("onEvent:sync-enabled"),this._register(this.userDataSyncEnablementService.onDidChangeEnablement(()=>{this.userDataSyncEnablementService.isEnabled()&&this.progressByEvent("onEvent:sync-enabled")}))}markWalkthroughOpened(t){let n=this.gettingStartedContributions.get(t),o=this.metadata.get(t);o&&n&&this.metadata.set(t,{...o,manaullyOpened:!0,stepIDs:n.steps.map(r=>r.id)}),this.storageService.store(Rb,JSON.stringify([...this.metadata.entries()]),0,0)}async registerExtensionWalkthroughContributions(t){let n=l=>l.startsWith("https://")?N.parse(l,!0):hn.uriToFileUri(Oe(t.extensionLocation,l)),o=l=>{let c=u=>u.startsWith("https://")?N.parse(u,!0):hn.uriToBrowserUri(Oe(t.extensionLocation,u));if(typeof l=="string"){let u=c(l);return{hcDark:u,hcLight:u,dark:u,light:u}}else return{hcDark:c(l.hc),hcLight:c(l.hcLight??l.light),light:c(l.light),dark:c(l.dark)}};if(!t.contributes?.walkthroughs?.length)return;let r,s=Math.min();await Promise.all(t.contributes?.walkthroughs?.map(async(l,c)=>{let u=t.identifier.value+"#"+l.id,p=!this.metadata.get(u);p&&this.metadata.set(u,{firstSeen:+new Date,stepIDs:l.steps?.map(E=>E.id)??[],manaullyOpened:!1});let h=await Promise.race([this.tasExperimentService?.getTreatment(`gettingStarted.overrideCategory.${t.identifier.value+"."+l.id}.when`),new Promise(E=>setTimeout(()=>E(l.when),5e3))]);this.sessionInstalledExtensions.has(t.identifier.value.toLowerCase())&&this.contextService.contextMatchesRules(xe.deserialize(h??l.when)??xe.true())&&(this.sessionInstalledExtensions.delete(t.identifier.value.toLowerCase()),c<s&&p&&(r=u,s=c));let m=(l.steps??[]).map((E,T)=>{let _=Bp(E.description||""),O=t.identifier.value+"#"+l.id+"#"+E.id,M;if(!E.media)throw Error("missing media in walkthrough step: "+l.id+"@"+E.id);if(E.media.image){let U=E.media.altText;U===void 0&&console.error("Walkthrough item:",O,"is missing altText for its media element."),M={type:"image",altText:U,path:o(E.media.image)}}else if(E.media.markdown)M={type:"markdown",path:n(E.media.markdown),base:n(fl(E.media.markdown)),root:hn.uriToFileUri(t.extensionLocation)};else if(E.media.svg)M={type:"svg",path:n(E.media.svg),altText:E.media.svg};else throw new Error("Unknown walkthrough format detected for "+O);return{description:_,media:M,completionEvents:E.completionEvents?.filter(U=>typeof U=="string")??[],id:O,title:E.title,when:xe.deserialize(E.when)??xe.true(),category:u,order:T}}),v=!1;if(l.featuredFor){let E=this.workspaceContextService.getWorkspace().folders.map(_=>_.uri),T=new Vn;setTimeout(()=>T.cancel(),2e3),v=await this.instantiationService.invokeFunction(_=>XL(_,E,l.featuredFor,T.token))}let f=l.icon??t.icon,b={description:l.description,title:l.title,id:u,isFeatured:v,source:t.displayName??t.name,order:0,steps:m,icon:{type:"image",path:f?hn.uriToBrowserUri(Oe(t.extensionLocation,f)).toString(!0):JL},when:xe.deserialize(h??l.when)??xe.true()};this._registerWalkthrough(b),this._onDidAddWalkthrough.fire(this.resolveWalkthrough(b))})),this.storageService.store(Rb,JSON.stringify([...this.metadata.entries()]),0,0),await this.hostService.hadLastFocus()&&r&&this.configurationService.getValue("workbench.welcomePage.walkthroughs.openOnInstall")&&(this.telemetryService.publicLog2("gettingStarted.didAutoOpenWalkthrough",{id:r}),this.commandService.executeCommand("workbench.action.openWalkthrough",r,!0))}unregisterExtensionWalkthroughContributions(t){t.contributes?.walkthroughs?.length&&t.contributes?.walkthroughs?.forEach(n=>{let o=t.identifier.value+"#"+n.id;n.steps.forEach(r=>{let s=t.identifier.value+"#"+n.id+"#"+r.id;this.steps.delete(s)}),this.gettingStartedContributions.delete(o),this._onDidRemoveWalkthrough.fire(o)})}getWalkthrough(t){let n=this.gettingStartedContributions.get(t);if(!n)throw Error("Trying to get unknown walkthrough: "+t);return this.resolveWalkthrough(n)}getWalkthroughs(){return[...this.gettingStartedContributions.values()].map(o=>({...o,content:{type:"steps",steps:o.steps}})).filter(o=>o.content.type!=="steps"||o.content.steps.length).map(o=>this.resolveWalkthrough(o))}resolveWalkthrough(t){let n=t.steps.map(h=>this.getStepProgress(h)),o=this.metadata.get(t.id)?.manaullyOpened,r=this.metadata.get(t.id)?.firstSeen,s=r&&r>+new Date-_C,a=this.metadata.get(t.id)?.stepIDs,l=this.gettingStartedContributions.get(t.id);if(!l)throw Error("Could not find walkthrough with id "+t.id);let c=l.steps.map(h=>h.id),u=a&&(c.length!==a.length||c.some((h,m)=>h!==a[m])),p=0;if(r){let m=+new Date-r;p=Math.max(0,(_C-m)/_C)}return{...t,recencyBonus:p,steps:n,newItems:!!u,newEntry:!!(s&&!o)}}getStepProgress(t){return{...t,done:!1,...this.stepProgress[t.id]}}progressStep(t){let n=this.stepProgress[t];if(!n||n.done!==!0){this.stepProgress[t]={done:!0},this.memento.saveMemento();let o=this.getStep(t);if(!o)throw Error("Tried to progress unknown step");this._onDidProgressStep.fire(this.getStepProgress(o))}}deprogressStep(t){delete this.stepProgress[t],this.memento.saveMemento();let n=this.getStep(t);this._onDidProgressStep.fire(this.getStepProgress(n))}progressByEvent(t){this.sessionEvents.has(t)||(this.sessionEvents.add(t),this.completionListeners.get(t)?.forEach(n=>this.progressStep(n)))}registerWalkthrough(t){this._registerWalkthrough({...t,steps:t.steps.map(n=>({...n,description:Bp(n.description)}))})}_registerWalkthrough(t){if(this.gettingStartedContributions.get(t.id)){console.error(`Skipping attempt to overwrite walkthrough. (${t.id})`);return}this.gettingStartedContributions.set(t.id,t),t.steps.forEach(o=>{if(this.steps.has(o.id))throw Error("Attempting to register step with id "+o.id+" twice. Second is dropped.");this.steps.set(o.id,o),o.when.keys().forEach(r=>this.categoryVisibilityContextKeys.add(r)),this.registerDoneListeners(o)}),t.when.keys().forEach(o=>this.categoryVisibilityContextKeys.add(o))}registerDoneListeners(t){if(t.doneOn){console.error("wakthrough step",t,"uses deprecated 'doneOn' property. Adopt 'completionEvents' to silence this warning");return}t.completionEvents.length||(t.completionEvents=Yt(t.description.filter(n=>n.nodes.length===1).flatMap(n=>n.nodes.filter(o=>typeof o!="string").map(({href:o})=>{if(o.startsWith("command:"))return"onCommand:"+o.slice(8,o.includes("?")?o.indexOf("?"):void 0);if(o.startsWith("https://")||o.startsWith("http://"))return"onLink:"+o})))),t.completionEvents.length||t.completionEvents.push("stepSelected");for(let n of t.completionEvents){let[o,r,s]=/^([^:]*):?(.*)$/.exec(n)??[];if(!r){console.error(`Unknown completionEvent ${n} when registering step ${t.id}`);continue}switch(r){case"onLink":case"onEvent":case"onView":case"onSettingChanged":break;case"onContext":{let a=xe.deserialize(s);a?(this.stepCompletionContextKeyExpressions.add(a),a.keys().forEach(l=>this.stepCompletionContextKeys.add(l)),n=r+":"+a.serialize(),this.contextService.contextMatchesRules(a)&&this.sessionEvents.add(n)):console.error("Unable to parse context key expression:",a,"in walkthrough step",t.id);break}case"onStepSelected":case"stepSelected":n="stepSelected:"+t.id;break;case"onCommand":n=r+":"+s.replace(/^toSide:/,"");break;case"onExtensionInstalled":case"extensionInstalled":n="extensionInstalled:"+s.toLowerCase();break;default:console.error(`Unknown completionEvent ${n} when registering step ${t.id}`);continue}this.registerCompletionListener(n,t)}}registerCompletionListener(t,n){this.completionListeners.has(t)||this.completionListeners.set(t,new Set),this.completionListeners.get(t)?.add(n.id)}getStep(t){let n=this.steps.get(t);if(!n)throw Error("Attempting to access step which does not exist in registry "+t);return n}};Fp=L([w(0,vn),w(1,qn),w(2,Vt),w(3,_t),w(4,Qo),w(5,NL),w(6,$e),w(7,fb),w(8,Tn),w(9,jL),w(10,Ks),w(11,SC)],Fp);var Bp=i=>i.split(`
`).filter(e=>e).map(e=>Ok(e)),ZL=i=>i.startsWith("https://")?N.parse(i,!0):hn.asFileUri(`vs/workbench/contrib/welcomeGettingStarted/common/media/${i}`),Np=i=>i.startsWith("https://")?N.parse(i,!0):hn.asBrowserUri(`vs/workbench/contrib/welcomeGettingStarted/common/media/${i}`),lB=i=>{if(typeof i=="string"){let e=Np(i);return{hcDark:e,hcLight:e,dark:e,light:e}}else return{hcDark:Np(i.hc),hcLight:Np(i.hcLight??i.light),light:Np(i.light),dark:Np(i.dark)}};Ht(class extends Nt{constructor(){super({id:"resetGettingStartedProgress",category:Xe("developer","Developer"),title:Xe("resetWelcomePageWalkthroughProgress","Reset Welcome Page Walkthrough Progress"),f1:!0,metadata:{description:Xe("resetGettingStartedProgressDescription","Reset the progress of all Walkthrough steps on the Welcome Page to make them appear as if they are being viewed for the first time, providing a fresh start to the getting started experience.")}})}run(i){let e=i.get(Pb),t=i.get(vn);t.store(Ob,JSON.stringify([]),0,0),t.store(Rb,JSON.stringify([]),0,0);let n=new Ro("gettingStartedService",i.get(vn)),o=n.getMemento(0,0);for(let r in o)if(Object.prototype.hasOwnProperty.call(o,r))try{e.deprogressStep(r)}catch(s){console.error(s)}n.saveMemento()}});zt(Pb,Fp,1);var kTt=new K("terminalTabFocusMode",!1,!0);var DTt=P("ptyService");var dB={Backend:"workbench.contributions.terminal.processBackend"},LC=class{_backends=new Map;get backends(){return this._backends}registerTerminalBackend(e){let t=this._sanitizeRemoteAuthority(e.remoteAuthority);if(this._backends.has(t))throw new Error(`A terminal backend with remote authority '${t}' was already registered.`);this._backends.set(t,e)}getTerminalBackend(e){return this._backends.get(this._sanitizeRemoteAuthority(e))}_sanitizeRemoteAuthority(e){return e?.toLowerCase()??""}};Ae.add(dB.Backend,new LC);var _Tt=P("localPtyService"),LTt=P("terminalLogService");var ckt=P("environmentVariableService");var eR=["workbench.action.terminal.focusAccessibleBuffer"];var tR=["workbench.action.terminal.focusFind","workbench.action.terminal.hideFind","workbench.action.terminal.findNext","workbench.action.terminal.findPrevious","workbench.action.terminal.toggleFindRegex","workbench.action.terminal.toggleFindWholeWord","workbench.action.terminal.toggleFindCaseSensitive","workbench.action.terminal.searchWorkspace"];var nR=["workbench.action.terminal.selectPrevSuggestion","workbench.action.terminal.selectPrevPageSuggestion","workbench.action.terminal.selectNextSuggestion","workbench.action.terminal.selectNextPageSuggestion","workbench.action.terminal.acceptSelectedSuggestion","workbench.action.terminal.acceptSelectedSuggestionEnter","workbench.action.terminal.hideSuggestWidget","workbench.action.terminal.clearSuggestCache"];var u1t=P("terminalProfileResolverService");var p1t=P("terminalProfileService");var h1t=["workbench.action.terminal.clearSelection","workbench.action.terminal.clear","workbench.action.terminal.copyAndClearSelection","workbench.action.terminal.copySelection","workbench.action.terminal.copySelectionAsHtml","workbench.action.terminal.copyLastCommand","workbench.action.terminal.copyLastCommandOutput","workbench.action.terminal.copyLastCommandAndLastCommandOutput","workbench.action.terminal.deleteToLineStart","workbench.action.terminal.deleteWordLeft","workbench.action.terminal.deleteWordRight","workbench.action.terminal.goToRecentDirectory","workbench.action.terminal.focusNextPane","workbench.action.terminal.focusNext","workbench.action.terminal.focusPreviousPane","workbench.action.terminal.focusPrevious","workbench.action.terminal.focus","workbench.action.terminal.sizeToContentWidth","workbench.action.terminal.kill","workbench.action.terminal.killEditor","workbench.action.terminal.moveToEditor","workbench.action.terminal.moveToLineEnd","workbench.action.terminal.moveToLineStart","workbench.action.terminal.moveToTerminalPanel","workbench.action.terminal.newInActiveWorkspace","workbench.action.terminal.new","workbench.action.terminal.paste","workbench.action.terminal.pasteSelection","workbench.action.terminal.resizePaneDown","workbench.action.terminal.resizePaneLeft","workbench.action.terminal.resizePaneRight","workbench.action.terminal.resizePaneUp","workbench.action.terminal.runActiveFile","workbench.action.terminal.runSelectedText","workbench.action.terminal.runRecentCommand","workbench.action.terminal.scrollDown","workbench.action.terminal.scrollDownPage","workbench.action.terminal.scrollToBottom","workbench.action.terminal.scrollToNextCommand","workbench.action.terminal.scrollToPreviousCommand","workbench.action.terminal.scrollToTop","workbench.action.terminal.scrollUp","workbench.action.terminal.scrollUpPage","workbench.action.terminal.sendSequence","workbench.action.terminal.selectAll","workbench.action.terminal.selectToNextCommand","workbench.action.terminal.selectToNextLine","workbench.action.terminal.selectToPreviousCommand","workbench.action.terminal.selectToPreviousLine","workbench.action.terminal.splitInActiveWorkspace","workbench.action.terminal.split","workbench.action.terminal.toggleTerminal","workbench.action.terminal.focusHover","editor.action.accessibilityHelp","editor.action.toggleTabFocusMode","notifications.hideList","notifications.hideToasts","workbench.action.closeQuickOpen","workbench.action.quickOpen","workbench.action.quickOpenPreviousEditor","workbench.action.showCommands","workbench.action.tasks.build","workbench.action.tasks.restartTask","workbench.action.tasks.runTask","workbench.action.tasks.reRunTask","workbench.action.tasks.showLog","workbench.action.tasks.showTasks","workbench.action.tasks.terminate","workbench.action.tasks.test","workbench.action.toggleFullScreen","workbench.action.terminal.focusAtIndex1","workbench.action.terminal.focusAtIndex2","workbench.action.terminal.focusAtIndex3","workbench.action.terminal.focusAtIndex4","workbench.action.terminal.focusAtIndex5","workbench.action.terminal.focusAtIndex6","workbench.action.terminal.focusAtIndex7","workbench.action.terminal.focusAtIndex8","workbench.action.terminal.focusAtIndex9","workbench.action.focusSecondEditorGroup","workbench.action.focusThirdEditorGroup","workbench.action.focusFourthEditorGroup","workbench.action.focusFifthEditorGroup","workbench.action.focusSixthEditorGroup","workbench.action.focusSeventhEditorGroup","workbench.action.focusEighthEditorGroup","workbench.action.focusNextPart","workbench.action.focusPreviousPart","workbench.action.nextPanelView","workbench.action.previousPanelView","workbench.action.nextSideBarView","workbench.action.previousSideBarView","workbench.action.debug.start","workbench.action.debug.stop","workbench.action.debug.run","workbench.action.debug.restart","workbench.action.debug.continue","workbench.action.debug.pause","workbench.action.debug.stepInto","workbench.action.debug.stepOut","workbench.action.debug.stepOver","workbench.action.nextEditor","workbench.action.previousEditor","workbench.action.nextEditorInGroup","workbench.action.previousEditorInGroup","workbench.action.openNextRecentlyUsedEditor","workbench.action.openPreviousRecentlyUsedEditor","workbench.action.openNextRecentlyUsedEditorInGroup","workbench.action.openPreviousRecentlyUsedEditorInGroup","workbench.action.quickOpenPreviousRecentlyUsedEditor","workbench.action.quickOpenLeastRecentlyUsedEditor","workbench.action.quickOpenPreviousRecentlyUsedEditorInGroup","workbench.action.quickOpenLeastRecentlyUsedEditorInGroup","workbench.action.focusActiveEditorGroup","workbench.action.focusFirstEditorGroup","workbench.action.focusLastEditorGroup","workbench.action.firstEditorInGroup","workbench.action.lastEditorInGroup","workbench.action.navigateUp","workbench.action.navigateDown","workbench.action.navigateRight","workbench.action.navigateLeft","workbench.action.togglePanel","workbench.action.quickOpenView","workbench.action.toggleMaximizedPanel","notification.acceptPrimaryAction","runCommands","workbench.action.terminal.chat.start","workbench.action.terminal.chat.close","workbench.action.terminal.chat.discard","workbench.action.terminal.chat.makeRequest","workbench.action.terminal.chat.cancel","workbench.action.terminal.chat.feedbackHelpful","workbench.action.terminal.chat.feedbackUnhelpful","workbench.action.terminal.chat.feedbackReportIssue","workbench.action.terminal.chat.runCommand","workbench.action.terminal.chat.insertCommand","workbench.action.terminal.chat.viewInChat",...eR,...tR,...nR],g1t={extensionPoint:"terminal",defaultExtensionKind:["workspace"],activationEventsGenerator:(i,e)=>{for(let t of i)for(let n of t.profiles??[])e.push(`onTerminalProfile:${n.id}`)},jsonSchema:{description:d("vscode.extension.contributes.terminal","Contributes terminal functionality."),type:"object",properties:{profiles:{type:"array",description:d("vscode.extension.contributes.terminal.profiles","Defines additional terminal profiles that the user can create."),items:{type:"object",required:["id","title"],defaultSnippets:[{body:{id:"$1",title:"$2"}}],properties:{id:{description:d("vscode.extension.contributes.terminal.profiles.id","The ID of the terminal profile provider."),type:"string"},title:{description:d("vscode.extension.contributes.terminal.profiles.title","Title for this terminal profile."),type:"string"},icon:{description:d("vscode.extension.contributes.terminal.types.icon","A codicon, URI, or light and dark URIs to associate with this terminal type."),anyOf:[{type:"string"},{type:"object",properties:{light:{description:d("vscode.extension.contributes.terminal.types.icon.light","Icon path when a light theme is used"),type:"string"},dark:{description:d("vscode.extension.contributes.terminal.types.icon.dark","Icon path when a dark theme is used"),type:"string"}}}]}}}}}}};var pc="workbench.welcomePage.restorableWalkthroughs",oR="workbench.startupEditor",cB="workbench.welcome.enabled",iR="workbench.telemetryOptOutShown",Ab=class{constructor(e,t){this.instantiationService=e;t.registerEditor(`${Ti.RESOURCE.scheme}:/**`,{id:Ti.ID,label:d("welcome.displayName","Welcome Page"),priority:"builtin"},{singlePerResource:!1,canSupportResource:n=>n.scheme===Ti.RESOURCE.scheme},{createEditorInput:({resource:n,options:o})=>({editor:this.instantiationService.createInstance(Ti,o),options:{...o,pinned:!1}})})}static ID="workbench.contrib.startupPageEditorResolver"};Ab=L([w(0,Vt),w(1,U_)],Ab);var Mb=class{constructor(e,t,n,o,r,s,a,l,c,u,p,h,m){this.configurationService=e;this.editorService=t;this.workingCopyBackupService=n;this.fileService=o;this.contextService=r;this.lifecycleService=s;this.layoutService=a;this.productService=l;this.commandService=c;this.environmentService=u;this.storageService=p;this.logService=h;this.notificationService=m;this.run().then(void 0,Ne)}static ID="workbench.contrib.startupPageRunner";async run(){if(await this.lifecycleService.when(3),this.productService.enableTelemetry&&this.productService.showTelemetryOptOut&&Rd(this.configurationService)!==0&&!this.environmentService.skipWelcome&&!this.storageService.get(iR,0)){this.storageService.store(iR,!0,0,0),await this.openGettingStarted(!0);return}if(this.tryOpenWalkthroughForFolder())return;if(uB(this.configurationService,this.contextService,this.environmentService)&&this.lifecycleService.startupKind!==3){if(await this.workingCopyBackupService.hasBackups())return;if(!this.editorService.activeEditor||this.layoutService.openedDefaultEditors){let n=this.configurationService.inspect(oR),o=n.value==="readme",r=n.userValue==="readme",s=n.defaultValue==="readme";o&&(!r||!s)&&this.logService.warn(`Warning: 'workbench.startupEditor: readme' setting ignored due to being set somewhere other than user or default settings (user=${n.userValue}, default=${n.defaultValue})`),o&&(r||s)?await this.openReadme():n.value==="welcomePage"||n.value==="welcomePageInEmptyWorkbench"?await this.openGettingStarted():n.value==="terminal"&&this.commandService.executeCommand("workbench.action.createTerminalEditor")}}}tryOpenWalkthroughForFolder(){let e=this.storageService.get(pc,0);if(e){let t=JSON.parse(e),n=this.contextService.getWorkspace();if(t.folder===_u.id||t.folder===n.folders[0].uri.toString()){let o={selectedCategory:t.category,selectedStep:t.step,pinned:!1};return this.editorService.openEditor({resource:Ti.RESOURCE,options:o}),this.storageService.remove(pc,0),!0}}else return!1;return!1}async openReadme(){let e=Yt(await Promise.all(this.contextService.getWorkspace().folders.map(async t=>{let n=t.uri,o=await this.fileService.resolve(n).catch(Ne),r=o?.children?o.children.map(a=>a.name).sort():[],s=r.find(a=>a.toLowerCase()==="readme.md")||r.find(a=>a.toLowerCase().startsWith("readme"));if(s)return Oe(n,s)})));if(!this.editorService.activeEditor)if(e.length){let t=n=>n.path.toLowerCase().endsWith(".md");await Promise.all([this.commandService.executeCommand("markdown.showPreview",null,e.filter(t),{locked:!0}).catch(n=>{this.notificationService.error(d("startupPage.markdownPreviewError",`Could not open markdown preview: {0}.

Please make sure the markdown extension is enabled.`,n.message))}),this.editorService.openEditors(e.filter(n=>!t(n)).map(n=>({resource:n})))])}else await this.openGettingStarted()}async openGettingStarted(e){let t=Ib,n=this.editorService.activeEditor;if(n?.typeId===t||this.editorService.editors.some(r=>r.typeId===t))return;let o=n?{pinned:!1,index:0,showTelemetryNotice:e}:{pinned:!1,showTelemetryNotice:e};t===Ib&&this.editorService.openEditor({resource:Ti.RESOURCE,options:o})}};Mb=L([w(0,$e),w(1,Ci),w(2,Fd),w(3,Gt),w(4,_t),w(5,ur),w(6,ac),w(7,or),w(8,qn),w(9,to),w(10,vn),w(11,qt),w(12,Vs)],Mb);function uB(i,e,t){if(t.skipWelcome)return!1;let n=i.inspect(oR);if(!n.userValue&&!n.workspaceValue){let o=i.inspect(cB);if(o.value!==void 0&&o.value!==null)return o.value}return n.value==="welcomePage"||n.value==="readme"&&(n.userValue==="readme"||n.defaultValue==="readme")||e.getWorkbenchState()===1&&n.value==="welcomePageInEmptyWorkbench"||n.value==="terminal"}var rR=pD;var pB;(n=>{function i(o){return o&&{_extensionId:o.extensionId,_extensionIsBuiltin:o.extensionIsBuiltin,_extensionName:o.extensionName,_extensionPublisher:o.extensionPublisher}}n.toJSONObject=i;function e(o){if(o&&Xt(o._extensionId)&&Hw(o._extensionIsBuiltin)&&Xt(o._extensionName)&&Xt(o._extensionPublisher))return{extensionId:o._extensionId,extensionIsBuiltin:o._extensionIsBuiltin,extensionName:o._extensionName,extensionPublisher:o._extensionPublisher}}n.fromJSONObject=e;function t(o,r,s=!1){return{extensionPublisher:o,extensionId:`${o}.${r}`,extensionName:r,extensionIsBuiltin:s}}n.fromName=t})(pB||={});var hc=class extends A{constructor(t){super();this.options=t;this.contextService=t.contextService,this.entries=void 0,this.itemCount=0,this.list=Y("ul"),this.scrollbar=this._register(new mo(this.list,{})),this._register(this.onDidChangeEntries(()=>this.scrollbar.scanDomNode())),this.domElement=Y(".index-list."+t.klass,{},Y("h2",{},t.title),this.scrollbar.getDomNode()),this._register(this.contextService.onDidChangeContext(n=>{n.affectsSome(this.contextKeysToWatch)&&this.rerender()}))}_onDidChangeEntries=new C;onDidChangeEntries=this._onDidChangeEntries.event;domElement;list;scrollbar;entries;lastRendered;itemCount;isDisposed=!1;contextService;contextKeysToWatch=new Set;getDomElement(){return this.domElement}layout(t){this.scrollbar.scanDomNode()}onDidChange(t){this._register(this.onDidChangeEntries(t))}register(t){this.isDisposed?t.dispose():this._register(t)}dispose(){this.isDisposed=!0,super.dispose()}setLimit(t){this.options.limit=t,this.setEntries(this.entries)}rerender(){this.setEntries(this.entries)}setEntries(t){let n=t??[];this.itemCount=0;let o=this.options.rankElement;o&&(n=n.filter(l=>o(l)!==null),n.sort((l,c)=>o(c)-o(l)));let r=n.filter(l=>!l.when||this.contextService.contextMatchesRules(l.when)),s=r.slice(0,this.options.limit),a=s.map(l=>l.id);if(!(this.entries===t&&Bt(a,this.lastRendered))){for(this.entries=t,this.contextKeysToWatch.clear(),n.forEach(l=>{l.when?.keys()?.forEach(u=>this.contextKeysToWatch.add(u))}),this.lastRendered=a,this.itemCount=s.length;this.list.firstChild;)this.list.firstChild.remove();this.itemCount=s.length;for(let l of s){let c=this.options.renderElement(l);this.list.appendChild(c)}r.length>s.length&&this.options.more?this.list.appendChild(this.options.more):t!==void 0&&this.itemCount===0&&this.options.empty?this.list.appendChild(this.options.empty):this.options.footer&&this.list.appendChild(this.options.footer),this._onDidChangeEntries.fire()}}};var hB=250,RC="workbench.startupEditor",sR=new K("allWalkthroughsHidden",!1),gB=new K("inWelcome",!1),mB=vC.map((i,e)=>({command:i.content.command,description:i.description,icon:{type:"icon",icon:i.icon},id:i.id,order:e,title:i.title,when:xe.deserialize(i.when)??xe.true()})),aR="workbench.welcomePage.preferReducedMotion",gc=class extends hb{constructor(t,n,o,r,s,a,l,c,u,p,h,m,v,f,b,E,T,_,O,M,U,he,Q,se){super(gc.ID,t,l,h,m);this.commandService=n;this.productService=o;this.keybindingService=r;this.gettingStartedService=s;this.configurationService=a;this.languageService=c;this.fileService=u;this.openerService=p;this.themeService=h;this.storageService=m;this.extensionService=v;this.instantiationService=f;this.notificationService=b;this.groupsService=E;this.quickInputService=_;this.workspacesService=O;this.labelService=M;this.hostService=U;this.webviewService=he;this.workspaceContextService=Q;this.accessibilityService=se;this.container=Y(".gettingStartedContainer",{role:"document",tabindex:0,"aria-label":d("welcomeAriaLabel","Overview of how to get up to speed with your editor.")}),this.stepMediaComponent=Y(".getting-started-media"),this.stepMediaComponent.id=Sn(),this.categoriesSlideDisposables=this._register(new re),this.detailsRenderer=new lc(this.fileService,this.notificationService,this.extensionService,this.languageService),this.contextService=this._register(T.createScoped(this.container)),gB.bindTo(this.contextService).set(!0),this.gettingStartedCategories=this.gettingStartedService.getWalkthroughs(),this._register(this.dispatchListeners),this.buildSlideThrottle=new Nl;let ne=()=>{if(this.gettingStartedCategories=this.gettingStartedService.getWalkthroughs(),this.currentWalkthrough){let V=this.currentWalkthrough.steps.map(Ce=>Ce.id),X=this.gettingStartedCategories.find(Ce=>this.currentWalkthrough?.id===Ce.id);if(X){let Ce=X.steps.map(Ze=>Ze.id);Bt(Ce,V)||this.buildSlideThrottle.queue(()=>this.buildCategoriesSlide())}}else this.buildSlideThrottle.queue(()=>this.buildCategoriesSlide())};this._register(this.gettingStartedService.onDidAddWalkthrough(ne)),this._register(this.gettingStartedService.onDidRemoveWalkthrough(ne)),this.recentlyOpened=this.workspacesService.getRecentlyOpened(),this._register(O.onDidChangeRecentlyOpened(()=>{this.recentlyOpened=O.getRecentlyOpened(),ne()})),this._register(this.gettingStartedService.onDidChangeWalkthrough(V=>{let X=this.gettingStartedCategories.find(Ce=>Ce.id===V.id);X&&(X.title=V.title,X.description=V.description,this.container.querySelectorAll(`[x-category-title-for="${V.id}"]`).forEach(Ce=>Ce.innerText=X.title),this.container.querySelectorAll(`[x-category-description-for="${V.id}"]`).forEach(Ce=>Ce.innerText=X.description))})),this._register(this.gettingStartedService.onDidProgressStep(V=>{let X=this.gettingStartedCategories.find(oe=>oe.id===V.category);if(!X)throw Error("Could not find category with ID: "+V.category);let Ce=X.steps.find(oe=>oe.id===V.id);if(!Ce)throw Error("Could not find step with ID: "+V.id);let Ze=this.getWalkthroughCompletionStats(X);!Ce.done&&Ze.stepsComplete===Ze.stepsTotal-1&&this.hideCategory(X.id),this._register(this.configurationService.onDidChangeConfiguration(oe=>{oe.affectsConfiguration(aR)&&this.container.classList.toggle("animatable",this.shouldAnimate())})),Ce.done=V.done,X.id===this.currentWalkthrough?.id&&Rt(this.window.document.querySelectorAll(`[data-done-step-id="${V.id}"]`)).forEach($=>{V.done?($.setAttribute("aria-checked","true"),$.parentElement?.setAttribute("aria-checked","true"),$.classList.remove(...Fe.asClassNameArray(vb)),$.classList.add("complete",...Fe.asClassNameArray(yb))):($.setAttribute("aria-checked","false"),$.parentElement?.setAttribute("aria-checked","false"),$.classList.remove("complete",...Fe.asClassNameArray(yb)),$.classList.add(...Fe.asClassNameArray(vb)))}),this.updateCategoryProgress()})),this._register(this.storageService.onWillSaveState(V=>{if(V.reason!==1||this.workspaceContextService.getWorkspace().folders.length!==0||!this.editorInput||!this.currentWalkthrough||!this.editorInput.selectedCategory||!this.editorInput.selectedStep)return;let X={folder:_u.id,category:this.editorInput.selectedCategory,step:this.editorInput.selectedStep};this.storageService.store(pc,JSON.stringify(X),0,1)}))}static ID="gettingStartedPage";editorInput;inProgressScroll=Promise.resolve();dispatchListeners=new re;stepDisposables=new re;detailsPageDisposables=new re;mediaDisposables=new re;recentlyOpened;gettingStartedCategories;currentWalkthrough;categoriesPageScrollbar;detailsPageScrollbar;detailsScrollbar;buildSlideThrottle=new Nl;container;contextService;hasScrolledToFirstCategory=!1;recentlyOpenedList;startList;gettingStartedList;stepsSlide;categoriesSlide;stepsContent;stepMediaComponent;webview;layoutMarkdown;detailsRenderer;categoriesSlideDisposables;showFeaturedWalkthrough=!0;shouldAnimate(){return!(this.configurationService.getValue(aR)||this.accessibilityService.isMotionReduced())}getWalkthroughCompletionStats(t){let n=t.steps.filter(o=>this.contextService.contextMatchesRules(o.when));return{stepsComplete:n.filter(o=>o.done).length,stepsTotal:n.length}}async setInput(t,n,o,r){this.container.classList.remove("animatable"),this.editorInput=t,await super.setInput(t,n,o,r),await this.buildCategoriesSlide(),this.shouldAnimate()&&setTimeout(()=>this.container.classList.add("animatable"),0)}async makeCategoryVisibleWhenAvailable(t,n){this.scrollToCategory(t,n)}registerDispatchListeners(){this.dispatchListeners.clear(),this.container.querySelectorAll("[x-dispatch]").forEach(t=>{let n=t.getAttribute("x-dispatch")??"",o,r;n.startsWith("openLink:https")?[o,r]=["openLink",n.replace("openLink:","")]:[o,r]=n.split(":"),o&&(this.dispatchListeners.add(Z(t,"click",s=>{s.stopPropagation(),this.runDispatchCommand(o,r)})),this.dispatchListeners.add(Z(t,"keyup",s=>{let a=new ht(s);switch(s.stopPropagation(),a.keyCode){case 3:case 10:this.runDispatchCommand(o,r);return}})))})}async runDispatchCommand(t,n){switch(this.commandService.executeCommand("workbench.action.keepEditor"),this.telemetryService.publicLog2("gettingStarted.ActionExecuted",{command:t,argument:n,walkthroughId:this.currentWalkthrough?.id}),t){case"scrollPrev":{this.scrollPrev();break}case"skip":{this.runSkip();break}case"showMoreRecents":{this.commandService.executeCommand(tc.ID);break}case"seeAllWalkthroughs":{await this.openWalkthroughSelector();break}case"openFolder":{this.contextService.contextMatchesRules(xe.and(eo.isEqualTo("workspace")))?this.commandService.executeCommand(oc.ID):this.commandService.executeCommand(Se?"workbench.action.files.openFileFolder":"workbench.action.files.openFolder");break}case"selectCategory":{this.scrollToCategory(n),this.gettingStartedService.markWalkthroughOpened(n);break}case"selectStartEntry":{let o=vC.find(r=>r.id===n);if(o)this.runStepCommand(o.content.command);else throw Error("could not find start entry with id: "+n);break}case"hideCategory":{this.hideCategory(n);break}case"selectTask":{this.selectStep(n);break}case"toggleStepCompletion":{this.toggleStepCompletion(n);break}case"allDone":{this.markAllStepsComplete();break}case"nextSection":{let o=this.currentWalkthrough?.next;o?this.scrollToCategory(o):console.error("Error scrolling to next section of",this.currentWalkthrough);break}case"openLink":{this.openerService.open(n);break}default:{console.error("Dispatch to",t,n,"not defined");break}}}hideCategory(t){if(!this.gettingStartedCategories.find(o=>o.id===t))throw Error("Could not find category with ID "+t);this.setHiddenCategories([...this.getHiddenCategories().add(t)]),this.gettingStartedList?.rerender()}markAllStepsComplete(){if(this.currentWalkthrough)this.currentWalkthrough?.steps.forEach(t=>{t.done||this.gettingStartedService.progressStep(t.id)}),this.hideCategory(this.currentWalkthrough?.id),this.scrollPrev();else throw Error("No walkthrough opened")}toggleStepCompletion(t){Rt(this.currentWalkthrough?.steps.find(o=>o.id===t)).done?this.gettingStartedService.deprogressStep(t):this.gettingStartedService.progressStep(t)}async openWalkthroughSelector(){let t=await this.quickInputService.pick(this.gettingStartedCategories.filter(n=>this.contextService.contextMatchesRules(n.when)).map(n=>({id:n.id,label:n.title,detail:n.description,description:n.source})),{canPickMany:!1,matchOnDescription:!0,matchOnDetail:!0,title:d("pickWalkthroughs","Open Walkthrough...")});t&&this.runDispatchCommand("selectCategory",t.id)}getHiddenCategories(){return new Set(JSON.parse(this.storageService.get(Ob,0,"[]")))}setHiddenCategories(t){this.storageService.store(Ob,JSON.stringify(t),0,0)}currentMediaComponent=void 0;currentMediaType=void 0;async buildMediaComponent(t,n=!1){if(!this.currentWalkthrough)throw Error("no walkthrough selected");let o=Rt(this.currentWalkthrough.steps.find(r=>r.id===t));if(!(!n&&this.currentMediaComponent===t)){if(this.currentMediaComponent=t,this.stepDisposables.clear(),this.stepDisposables.add({dispose:()=>{this.currentMediaComponent=void 0}}),this.currentMediaType!==o.media.type&&(this.currentMediaType=o.media.type,this.mediaDisposables.add(le(()=>{this.currentMediaType=void 0})),zn(this.stepMediaComponent),o.media.type==="svg"?(this.webview=this.mediaDisposables.add(this.webviewService.createWebviewElement({title:void 0,options:{disableServiceWorker:!0},contentOptions:{},extension:void 0})),this.webview.mountTo(this.stepMediaComponent,this.window)):o.media.type==="markdown"&&(this.webview=this.mediaDisposables.add(this.webviewService.createWebviewElement({options:{},contentOptions:{localResourceRoots:[o.media.root],allowScripts:!0},title:"",extension:void 0})),this.webview.mountTo(this.stepMediaComponent,this.window))),o.media.type==="image"){this.stepsContent.classList.add("image"),this.stepsContent.classList.remove("markdown");let r=o.media,s=Y("img");zn(this.stepMediaComponent),this.stepMediaComponent.appendChild(s),s.setAttribute("alt",r.altText),this.updateMediaSourceForColorMode(s,r.path),this.stepDisposables.add(Z(this.stepMediaComponent,"click",()=>{let a=o.description.map(l=>l.nodes.filter(c=>typeof c!="string").map(c=>c.href)).flat();if(a.length===1){let l=a[0];l.startsWith("http")&&(this.telemetryService.publicLog2("gettingStarted.ActionExecuted",{command:"runStepAction",argument:l,walkthroughId:this.currentWalkthrough?.id}),this.openerService.open(l))}})),this.stepDisposables.add(this.themeService.onDidColorThemeChange(()=>this.updateMediaSourceForColorMode(s,r.path)))}else if(o.media.type==="svg"){this.stepsContent.classList.add("image"),this.stepsContent.classList.remove("markdown");let r=o.media;this.webview.setHtml(await this.detailsRenderer.renderSVG(r.path));let s=!1;this.stepDisposables.add(le(()=>{s=!0})),this.stepDisposables.add(this.themeService.onDidColorThemeChange(async()=>{let a=await this.detailsRenderer.renderSVG(r.path);s||this.webview.setHtml(a)})),this.stepDisposables.add(Z(this.stepMediaComponent,"click",()=>{let a=o.description.map(l=>l.nodes.filter(c=>typeof c!="string").map(c=>c.href)).flat();if(a.length===1){let l=a[0];l.startsWith("http")&&(this.telemetryService.publicLog2("gettingStarted.ActionExecuted",{command:"runStepAction",argument:l,walkthroughId:this.currentWalkthrough?.id}),this.openerService.open(l))}})),this.stepDisposables.add(this.webview.onDidClickLink(a=>{(co(a,H.https)||co(a,H.http)||co(a,H.command))&&this.openerService.open(a,{allowCommands:!0})}))}else if(o.media.type==="markdown"){this.stepsContent.classList.remove("image"),this.stepsContent.classList.add("markdown");let r=o.media,s=await this.detailsRenderer.renderMarkdown(r.path,r.base);this.webview.setHtml(s);let a=s.match(/checked-on=\"([^'][^"]*)\"/g)?.map(p=>p.slice(12,-1).replace(/&#39;/g,"'").replace(/&amp;/g,"&")),l=()=>{let p=a?.filter(h=>this.contextService.contextMatchesRules(xe.deserialize(h)));p&&this.webview.postMessage({enabledContextKeys:p})};if(a){let p=Yt(a.map(m=>xe.deserialize(m))),h=new Set(p.flatMap(m=>m.keys()));this.stepDisposables.add(this.contextService.onDidChangeContext(m=>{m.affectsSome(h)&&l()}))}let c=!1;this.stepDisposables.add(le(()=>{c=!0})),this.stepDisposables.add(this.webview.onDidClickLink(p=>{if(co(p,H.https)||co(p,H.http)||co(p,H.command)){let h=p.startsWith("command:toSide:");h&&(p=p.replace("command:toSide:","command:"),this.focusSideEditorGroup()),this.openerService.open(p,{allowCommands:!0,openToSide:h})}})),s.indexOf("<code>")>=0&&this.stepDisposables.add(this.themeService.onDidColorThemeChange(async()=>{let p=await this.detailsRenderer.renderMarkdown(r.path,r.base);c||(this.webview.setHtml(p),l())}));let u=new Vo(50);this.layoutMarkdown=()=>{u.trigger(()=>{this.webview.postMessage({layoutMeNow:!0})})},this.stepDisposables.add(u),this.stepDisposables.add({dispose:()=>this.layoutMarkdown=void 0}),l(),this.stepDisposables.add(this.webview.onMessage(async p=>{let h=p.message;if(h.startsWith("command:"))this.openerService.open(h,{allowCommands:!0});else if(h.startsWith("setTheme:")){let m=h.slice(9),v=(await this.themeService.getColorThemes()).find(f=>f.settingsId===m);v&&this.themeService.setColorTheme(v.id,2)}else console.error("Unexpected message",h)}))}}}async selectStepLoose(t){if(t.startsWith(`${this.editorInput.selectedCategory}#`))this.selectStep(t);else{let n=this.editorInput.selectedCategory+"#"+t;this.selectStep(n)}}async selectStep(t,n=!0){if(t){let o=this.container.querySelector(`[data-step-id="${t}"]`);if(!o){if(o=this.container.querySelector("[data-step-id]"),!o)return;t=Rt(o.getAttribute("data-step-id"))}o.parentElement?.querySelectorAll(".expanded").forEach(r=>{r.getAttribute("data-step-id")!==t&&(r.classList.remove("expanded"),r.setAttribute("aria-expanded","false"))}),setTimeout(()=>o.focus(),n&&this.shouldAnimate()?hB:0),this.editorInput.selectedStep=t,o.classList.add("expanded"),o.setAttribute("aria-expanded","true"),this.buildMediaComponent(t,!0),this.gettingStartedService.progressByEvent("stepSelected:"+t)}else this.editorInput.selectedStep=void 0;this.detailsPageScrollbar?.scanDomNode(),this.detailsScrollbar?.scanDomNode()}updateMediaSourceForColorMode(t,n){let o=this.themeService.getColorTheme().type,r=n[o].toString(!0).replace(/ /g,"%20");t.srcset=r.toLowerCase().endsWith(".svg")?r:r+" 1.5x"}createEditor(t){this.detailsPageScrollbar&&this.detailsPageScrollbar.dispose(),this.categoriesPageScrollbar&&this.categoriesPageScrollbar.dispose(),this.categoriesSlide=Y(".gettingStartedSlideCategories.gettingStartedSlide");let n=Y("button.prev-button.button-link",{"x-dispatch":"scrollPrev"},Y("span.scroll-button.codicon.codicon-chevron-left"),Y("span.moreText",{},d("welcome","Welcome")));this.stepsSlide=Y(".gettingStartedSlideDetails.gettingStartedSlide",{},n),this.stepsContent=Y(".gettingStartedDetailsContent",{}),this.detailsPageScrollbar=this._register(new mo(this.stepsContent,{className:"full-height-scrollable"})),this.categoriesPageScrollbar=this._register(new mo(this.categoriesSlide,{className:"full-height-scrollable categoriesScrollbar"})),this.stepsSlide.appendChild(this.detailsPageScrollbar.getDomNode());let o=Y(".gettingStarted",{},this.categoriesPageScrollbar.getDomNode(),this.stepsSlide);this.container.appendChild(o),this.categoriesPageScrollbar.scanDomNode(),this.detailsPageScrollbar.scanDomNode(),t.appendChild(this.container)}async buildCategoriesSlide(){this.categoriesSlideDisposables.clear();let t=new Yl({icon:j.check,actionClassName:"getting-started-checkbox",isChecked:this.configurationService.getValue(RC)==="welcomePage",title:d("checkboxTitle","When checked, this page will be shown on startup."),...bS});t.domNode.id="showOnStartup";let n=Y("label.caption",{for:"showOnStartup"},d("welcomePage.showOnStartup","Show welcome page on startup")),o=()=>{t.checked?(this.telemetryService.publicLog2("gettingStarted.ActionExecuted",{command:"showOnStartupChecked",argument:void 0,walkthroughId:this.currentWalkthrough?.id}),this.configurationService.updateValue(RC,"welcomePage")):(this.telemetryService.publicLog2("gettingStarted.ActionExecuted",{command:"showOnStartupUnchecked",argument:void 0,walkthroughId:this.currentWalkthrough?.id}),this.configurationService.updateValue(RC,"none"))};this.categoriesSlideDisposables.add(t),this.categoriesSlideDisposables.add(t.onChange(()=>{o()})),this.categoriesSlideDisposables.add(Z(n,"click",()=>{t.checked=!t.checked,o()}));let r=Y(".header",{},Y("h1.product-name.caption",{},this.productService.nameLong),Y("p.subtitle.description",{},d({key:"gettingStarted.editingEvolved",comment:["Shown as subtitle on the Welcome page."]},"Editing evolved"))),s=Y(".categories-column.categories-column-left",{}),a=Y(".categories-column.categories-column-right",{}),l=this.buildStartList(),c=this.buildRecentlyOpenedList(),u=this.buildGettingStartedWalkthroughsList(),p=Y(".footer",{},Y("p.showOnStartup",{},t.domNode,n)),h=()=>{u.itemCount?(this.container.classList.remove("noWalkthroughs"),Mt(a,u.getDomElement())):(this.container.classList.add("noWalkthroughs"),Mt(a)),setTimeout(()=>this.categoriesPageScrollbar?.scanDomNode(),50),m()},m=()=>{this.container.classList.contains("noWalkthroughs")?(c.setLimit(10),Mt(s,l.getDomElement()),Mt(a,c.getDomElement())):(c.setLimit(5),Mt(s,l.getDomElement(),c.getDomElement()))};if(u.onDidChange(h),h(),Mt(this.categoriesSlide,Y(".gettingStartedCategoriesContainer",{},r,s,a,p)),this.categoriesPageScrollbar?.scanDomNode(),this.updateCategoryProgress(),this.registerDispatchListeners(),this.editorInput.selectedCategory){if(this.currentWalkthrough=this.gettingStartedCategories.find(f=>f.id===this.editorInput.selectedCategory),this.currentWalkthrough){this.buildCategorySlide(this.editorInput.selectedCategory,this.editorInput.selectedStep),this.setSlide("details");return}else if(this.gettingStartedCategories=this.gettingStartedService.getWalkthroughs(),this.currentWalkthrough=this.gettingStartedCategories.find(f=>f.id===this.editorInput.selectedCategory),this.currentWalkthrough){this.buildCategorySlide(this.editorInput.selectedCategory,this.editorInput.selectedStep),this.setSlide("details");return}}let v=this.gettingStartedCategories.some(f=>f.steps.find(b=>b.done));if(this.editorInput.showTelemetryNotice&&this.productService.openToWelcomeMainPage){let f=Y("p.telemetry-notice");this.buildTelemetryFooter(f),p.appendChild(f)}else if(!this.productService.openToWelcomeMainPage&&!v&&!this.hasScrolledToFirstCategory&&this.showFeaturedWalkthrough){let f=this.storageService.get(RD,-1)||new Date().toUTCString();if(((+new Date-+new Date(f))/1e3/60/60/24<1?"openToFirstCategory":"index")==="openToFirstCategory"){let T=this.gettingStartedCategories.filter(_=>!_.when||this.contextService.contextMatchesRules(_.when))[0];if(T){this.hasScrolledToFirstCategory=!0,this.currentWalkthrough=T,this.editorInput.selectedCategory=this.currentWalkthrough?.id,this.buildCategorySlide(this.editorInput.selectedCategory,void 0),this.setSlide("details");return}}}this.setSlide("categories")}buildRecentlyOpenedList(){let t=o=>{let r,s;Ad(o)?(s={folderUri:o.folderUri},r=o.label||this.labelService.getWorkspaceLabel(o.folderUri,{verbose:2})):(r=o.label||this.labelService.getWorkspaceLabel(o.workspace,{verbose:2}),s={workspaceUri:o.workspace.configPath});let{name:a,parentPath:l}=kg(r),c=Y("li"),u=Y("button.button-link");u.innerText=a,u.title=r,u.setAttribute("aria-label",d("welcomePage.openFolderWithPath","Open folder {0} with path {1}",a,l)),u.addEventListener("click",h=>{this.telemetryService.publicLog2("gettingStarted.ActionExecuted",{command:"openRecent",argument:void 0,walkthroughId:this.currentWalkthrough?.id}),this.hostService.openWindow([s],{forceNewWindow:h.ctrlKey||h.metaKey,remoteAuthority:o.remoteAuthority||null}),h.preventDefault(),h.stopPropagation()}),c.appendChild(u);let p=Y("span");return p.classList.add("path"),p.classList.add("detail"),p.innerText=l,p.title=r,c.appendChild(p),c};this.recentlyOpenedList&&this.recentlyOpenedList.dispose();let n=this.recentlyOpenedList=new hc({title:d("recent","Recent"),klass:"recently-opened",limit:5,empty:Y(".empty-recent",{},d("noRecents","You have no recent folders,"),Y("button.button-link",{"x-dispatch":"openFolder"},d("openFolder","open a folder")),d("toStart","to start.")),more:Y(".more",{},Y("button.button-link",{"x-dispatch":"showMoreRecents",title:d("show more recents","Show All Recent Folders {0}",this.getKeybindingLabel(tc.ID))},d("showAll","More..."))),renderElement:t,contextService:this.contextService});return n.onDidChange(()=>this.registerDispatchListeners()),this.recentlyOpened.then(({workspaces:o})=>{let r=o.filter(a=>!this.workspaceContextService.isCurrentWorkspace(Od(a)?a.workspace:a.folderUri)).map(a=>({...a,id:Od(a)?a.workspace.id:a.folderUri.toString()})),s=()=>{n.setEntries(r)};s(),n.register(this.labelService.onDidChangeFormatters(()=>s()))}).catch(Ne),n}buildStartList(){let t=o=>Y("li",{},Y("button.button-link",{"x-dispatch":"selectStartEntry:"+o.id,title:o.description+" "+this.getKeybindingLabel(o.command)},this.iconWidgetFor(o),Y("span",{},o.title)));this.startList&&this.startList.dispose();let n=this.startList=new hc({title:d("start","Start"),klass:"start-container",limit:10,renderElement:t,rankElement:o=>-o.order,contextService:this.contextService});return n.setEntries(mB),n.onDidChange(()=>this.registerDispatchListeners()),n}buildGettingStartedWalkthroughsList(){let t=r=>{let s=(r.newItems||r.newEntry)&&!r.isFeatured,a=Y(".new-badge",{});r.newEntry?Mt(a,Y(".new-category",{},d("new","New"))):r.newItems&&Mt(a,Y(".new-items",{},d({key:"newItems",comment:["Shown when a list of items has changed based on an update from a remote source"]},"Updated")));let l=Y(".featured-badge",{}),c=Y(".description-content",{});r.isFeatured&&this.showFeaturedWalkthrough&&(Mt(l,Y(".featured",{},Y("span.featured-icon.codicon.codicon-star-full"))),Mt(c,...$o(r.description)));let u=Y("h3.category-title.max-lines-3",{"x-category-title-for":r.id});return Mt(u,...$o(r.title)),Y("button.getting-started-category"+(r.isFeatured&&this.showFeaturedWalkthrough?".featured":""),{"x-dispatch":"selectCategory:"+r.id,title:r.description},l,Y(".main-content",{},this.iconWidgetFor(r),u,s?a:Y(".no-badge"),Y("a.codicon.codicon-close.hide-category-button",{tabindex:0,"x-dispatch":"hideCategory:"+r.id,title:d("close","Hide"),role:"button","aria-label":d("closeAriaLabel","Hide")})),c,Y(".category-progress",{"x-data-category-id":r.id},Y(".progress-bar-outer",{role:"progressbar"},Y(".progress-bar-inner"))))};this.gettingStartedList&&this.gettingStartedList.dispose();let n=r=>{let s=r.order;return r.isFeatured&&(s+=7),r.newEntry&&(s+=3),r.newItems&&(s+=2),r.recencyBonus&&(s+=4*r.recencyBonus),this.getHiddenCategories().has(r.id)&&(s=null),s},o=this.gettingStartedList=new hc({title:d("walkthroughs","Walkthroughs"),klass:"getting-started",limit:5,footer:Y("span.button-link.see-all-walkthroughs",{"x-dispatch":"seeAllWalkthroughs",tabindex:0},d("showAll","More...")),renderElement:t,rankElement:n,contextService:this.contextService});return o.onDidChange(()=>{let s=this.getHiddenCategories().size||o.itemCount<this.gettingStartedCategories.filter(a=>this.contextService.contextMatchesRules(a.when)).length;this.container.classList.toggle("someWalkthroughsHidden",!!s),this.registerDispatchListeners(),sR.bindTo(this.contextService).set(o.itemCount===0),this.updateCategoryProgress()}),o.setEntries(this.gettingStartedCategories),sR.bindTo(this.contextService).set(o.itemCount===0),o}layout(t){this.detailsScrollbar?.scanDomNode(),this.categoriesPageScrollbar?.scanDomNode(),this.detailsPageScrollbar?.scanDomNode(),this.startList?.layout(t),this.gettingStartedList?.layout(t),this.recentlyOpenedList?.layout(t),this.editorInput?.selectedStep&&this.currentMediaType&&(this.mediaDisposables.clear(),this.stepDisposables.clear(),this.buildMediaComponent(this.editorInput.selectedStep)),this.layoutMarkdown?.(),this.container.classList.toggle("height-constrained",t.height<=600),this.container.classList.toggle("width-constrained",t.width<=400),this.container.classList.toggle("width-semi-constrained",t.width<=800),this.categoriesPageScrollbar?.scanDomNode(),this.detailsPageScrollbar?.scanDomNode(),this.detailsScrollbar?.scanDomNode()}updateCategoryProgress(){this.window.document.querySelectorAll(".category-progress").forEach(t=>{let n=t.getAttribute("x-data-category-id"),o=this.gettingStartedCategories.find(l=>l.id===n);if(!o)throw Error("Could not find category with ID "+n);let r=this.getWalkthroughCompletionStats(o),s=Rt(t.querySelector(".progress-bar-inner"));s.setAttribute("aria-valuemin","0"),s.setAttribute("aria-valuenow",""+r.stepsComplete),s.setAttribute("aria-valuemax",""+r.stepsTotal);let a=r.stepsComplete/r.stepsTotal*100;s.style.width=`${a}%`,t.parentElement.classList.toggle("no-progress",r.stepsComplete===0),r.stepsTotal===r.stepsComplete?s.title=d("gettingStarted.allStepsComplete","All {0} steps complete!",r.stepsComplete):s.title=d("gettingStarted.someStepsComplete","{0} of {1} steps complete",r.stepsComplete,r.stepsTotal)})}async scrollToCategory(t,n){this.gettingStartedCategories.some(r=>r.id===t)||(this.gettingStartedCategories=this.gettingStartedService.getWalkthroughs());let o=this.gettingStartedCategories.find(r=>r.id===t);if(!o)throw Error("Could not find category with ID: "+t);this.inProgressScroll=this.inProgressScroll.then(async()=>{Mt(this.stepsContent),this.editorInput.selectedCategory=t,this.editorInput.selectedStep=n,this.currentWalkthrough=o,this.buildCategorySlide(t,n),this.setSlide("details")})}iconWidgetFor(t){let n=t.icon.type==="icon"?Y(Fe.asCSSSelector(t.icon.icon)):Y("img.category-icon",{src:t.icon.path});return n.classList.add("icon-widget"),n}focusSideEditorGroup(){let t=this.groupsService.getPart(this.group).contentDimension;if(!t||t.width<=700)return;if(this.groupsService.count===1){let o=this.groupsService.addGroup(this.groupsService.groups[0],3);this.groupsService.activateGroup(o);let r=Math.floor(t.width/2),s=this.groupsService.getGroups(1).find(a=>a.activeEditor instanceof Ti);this.groupsService.setSize(Rt(s),{width:r,height:t.height})}let n=this.groupsService.getGroups(1).find(o=>!(o.activeEditor instanceof Ti));n&&(this.groupsService.activateGroup(n),n.focus())}runStepCommand(t){let n=t.startsWith("command:"),o=t.startsWith("command:toSide:"),r=t.replace(/command:(toSide:)?/,"command:");if(this.telemetryService.publicLog2("gettingStarted.ActionExecuted",{command:"runStepAction",argument:t,walkthroughId:this.currentWalkthrough?.id}),o&&this.focusSideEditorGroup(),n){let s=N.parse(r),a=[];try{a=jl(decodeURIComponent(s.query))}catch{try{a=jl(s.query)}catch{}}if(Array.isArray(a)||(a=[a]),(s.path===rc.ID.toString()||s.path===ic.ID.toString())&&this.workspaceContextService.getWorkspace().folders.length===0){let l=this.currentWalkthrough?.steps.findIndex(c=>c.id===this.editorInput.selectedStep);if(l!==void 0&&l>-1&&this.currentWalkthrough?.steps.slice(l+1).some(c=>!c.done)){let c={folder:_u.id,category:this.editorInput.selectedCategory,step:this.editorInput.selectedStep};this.storageService.store(pc,JSON.stringify(c),0,1)}}this.commandService.executeCommand(s.path,...a).then(l=>{let c=l?.openFolder;if(c){if(!N.isUri(c)){console.warn("Warn: Running walkthrough command",t,"yielded non-URI `openFolder` result",c,". It will be disregarded.");return}let u={folder:c.toString(),category:this.editorInput.selectedCategory,step:this.editorInput.selectedStep};this.storageService.store(pc,JSON.stringify(u),0,1),this.hostService.openWindow([{folderUri:c}])}})}else this.openerService.open(r,{allowCommands:!0});!n&&(t.startsWith("https://")||t.startsWith("http://"))&&this.gettingStartedService.progressByEvent("onLink:"+t)}buildMarkdownDescription(t,n){for(;t.firstChild;)t.firstChild.remove();for(let o of n)if(o.nodes.length===1&&typeof o.nodes[0]!="string"){let r=o.nodes[0],s=Hn(t,Y(".button-container")),a=new mu(s,{title:r.title,supportIcons:!0,...BD}),l=r.href.startsWith("command:"),c=r.href.replace(/command:(toSide:)?/,"command:");if(a.label=r.label,a.onDidClick(u=>{u.stopPropagation(),u.preventDefault(),this.runStepCommand(r.href)},null,this.detailsPageDisposables),l){let u=this.getKeybindingLabel(c);u&&t.appendChild(Y("span.shortcut-message",{},d("gettingStarted.keyboardTip","Tip: Use keyboard shortcut "),Y("span.keybinding",{},u)))}this.detailsPageDisposables.add(a)}else{let r=Hn(t,Y("p"));for(let s of o.nodes)if(typeof s=="string"){let a=$o(s);for(let l of a)typeof l=="string"?r.appendChild(sy(l,{inline:!0,renderCodeSegments:!0})):r.appendChild(l)}else{let a=this.instantiationService.createInstance(Ld,r,s,{opener:l=>this.runStepCommand(l)});this.detailsPageDisposables.add(a)}}return t}clearInput(){this.stepDisposables.clear(),super.clearInput()}buildCategorySlide(t,n){this.detailsScrollbar&&this.detailsScrollbar.dispose(),this.extensionService.whenInstalledExtensionsRegistered().then(()=>{this.extensionService.activateByEvent(`onWalkthrough:${t.replace(/[^#]+#/,"")}`)}),this.detailsPageDisposables.clear(),this.mediaDisposables.clear();let o=this.gettingStartedCategories.find(b=>b.id===t);if(!o)throw Error("could not find category with ID "+t);let r=Y(".category-description.description.max-lines-3",{"x-category-description-for":o.id});this.buildMarkdownDescription(r,Bp(o.description));let s=Y(".getting-started-category",{},Y(".category-description-container",{},Y("h2.category-title.max-lines-3",{"x-category-title-for":o.id},...$o(o.title)),r)),a=Y(".step-list-container");this.detailsPageDisposables.add(Z(a,"keydown",b=>{let E=new ht(b),T=()=>o.steps.findIndex(_=>_.id===this.editorInput.selectedStep);if(E.keyCode===16){let _=o.steps.filter((O,M)=>M<T()&&this.contextService.contextMatchesRules(O.when));_.length&&this.selectStep(_[_.length-1].id,!1)}if(E.keyCode===18){let _=o.steps.find((O,M)=>M>T()&&this.contextService.contextMatchesRules(O.when));_&&this.selectStep(_.id,!1)}}));let l,c=new Set(o.steps.flatMap(b=>b.when.keys())),u=()=>{o.steps.sort((E,T)=>E.order-T.order);let b=o.steps.filter(E=>this.contextService.contextMatchesRules(E.when));Bt(l,b,(E,T)=>E.id===T.id)||(l=b,Mt(a,...l.map(E=>{let T=Y(".codicon"+(E.done?".complete"+Fe.asCSSSelector(yb):Fe.asCSSSelector(vb)),{"data-done-step-id":E.id,"x-dispatch":"toggleStepCompletion:"+E.id,role:"checkbox",tabindex:"0","aria-checked":E.done?"true":"false"}),_=Y(".step-description-container",{"x-step-description-for":E.id});this.buildMarkdownDescription(_,E.description);let O=Y("h3.step-title.max-lines-3",{"x-step-title-for":E.id});Mt(O,...$o(E.title));let M=Y(".step-container",{},O,_);return E.media.type==="image"&&M.appendChild(Y(".image-description",{"aria-label":d("imageShowing","Image showing {0}",E.media.altText)})),Y("button.getting-started-step",{"x-dispatch":"selectTask:"+E.id,"data-step-id":E.id,"aria-expanded":"false","aria-checked":E.done?"true":"false",role:"button"},T,M)})))};u(),this.detailsPageDisposables.add(this.contextService.onDidChangeContext(b=>{b.affectsSome(c)&&(u(),this.registerDispatchListeners(),this.selectStep(this.editorInput.selectedStep,!1))}));let p=this.gettingStartedCategories.find(b=>b.id===o.next),h=Y(".getting-started-detail-container",{role:"list"},a,Y(".done-next-container",{},Y("button.button-link.all-done",{"x-dispatch":"allDone"},Y("span.codicon.codicon-check-all"),d("allDone","Mark Done")),...p?[Y("button.button-link.next",{"x-dispatch":"nextSection"},d("nextOne","Next Section"),Y("span.codicon.codicon-arrow-right"))]:[]));this.detailsScrollbar=this._register(new mo(h,{className:"steps-container"}));let m=this.detailsScrollbar.getDomNode(),v=Y(".getting-started-footer");this.editorInput.showTelemetryNotice&&Rd(this.configurationService)!==0&&this.productService.enableTelemetry&&this.buildTelemetryFooter(v),Mt(this.stepsContent,s,m,this.stepMediaComponent,v);let f=o.steps.find(b=>this.contextService.contextMatchesRules(b.when)&&!b.done)??o.steps[0];this.selectStep(n??f.id,!n),this.detailsScrollbar.scanDomNode(),this.detailsPageScrollbar?.scanDomNode(),this.registerDispatchListeners()}buildTelemetryFooter(t){let n=this.instantiationService.createInstance(Ws,{}),r=`[${d("privacy statement","privacy statement")}](command:workbench.action.openPrivacyStatementUrl)`,a=`[${d("optOut","opt out")}](command:settings.filterByTelemetry)`,l=d({key:"footer",comment:['fist substitution is "vs code", second is "privacy statement", third is "opt out".']},"{0} collects usage data. Read our {1} and learn how to {2}.",this.productService.nameShort,r,a);t.append(n.render({value:l,isTrusted:!0}).element),n.dispose()}getKeybindingLabel(t){t=t.replace(/^command:/,"");let n=this.keybindingService.lookupKeybinding(t)?.getLabel();return n?`(${n})`:""}async scrollPrev(){this.inProgressScroll=this.inProgressScroll.then(async()=>{this.currentWalkthrough=void 0,this.editorInput.selectedCategory=void 0,this.editorInput.selectedStep=void 0,this.editorInput.showTelemetryNotice=!1,this.gettingStartedCategories.length!==this.gettingStartedList?.itemCount&&this.buildCategoriesSlide(),this.selectStep(void 0),this.setSlide("categories"),this.container.focus()})}runSkip(){this.commandService.executeCommand("workbench.action.closeActiveEditor")}escape(){this.editorInput.selectedCategory?this.scrollPrev():this.runSkip()}setSlide(t){let n=Rt(this.container.querySelector(".gettingStarted"));t==="categories"?(n.classList.remove("showDetails"),n.classList.add("showCategories"),this.container.querySelector(".prev-button.button-link").style.display="none",this.container.querySelector(".gettingStartedSlideDetails").querySelectorAll("button").forEach(o=>o.disabled=!0),this.container.querySelector(".gettingStartedSlideCategories").querySelectorAll("button").forEach(o=>o.disabled=!1),this.container.querySelector(".gettingStartedSlideCategories").querySelectorAll("input").forEach(o=>o.disabled=!1)):(n.classList.add("showDetails"),n.classList.remove("showCategories"),this.container.querySelector(".prev-button.button-link").style.display="block",this.container.querySelector(".gettingStartedSlideDetails").querySelectorAll("button").forEach(o=>o.disabled=!1),this.container.querySelector(".gettingStartedSlideCategories").querySelectorAll("button").forEach(o=>o.disabled=!0),this.container.querySelector(".gettingStartedSlideCategories").querySelectorAll("input").forEach(o=>o.disabled=!0))}focus(){super.focus();let t=this.container.ownerDocument.activeElement,n=this.container.parentElement;for(;n&&n!==t;)n=n.parentElement;n&&this.container.focus()}};gc=L([w(1,qn),w(2,or),w(3,Us),w(4,Pb),w(5,$e),w(6,Ks),w(7,Pt),w(8,Gt),w(9,Bs),w(10,rR),w(11,vn),w(12,bb),w(13,Vt),w(14,Vs),w(15,$d),w(16,Qo),w(17,zs),w(18,ko),w(19,ir),w(20,Tn),w(21,vL),w(22,_t),w(23,Ls)],gc);var lR=class{canSerialize(e){return!0}serialize(e){return JSON.stringify({selectedCategory:e.selectedCategory,selectedStep:e.selectedStep})}deserialize(e,t){try{let{selectedCategory:n,selectedStep:o}=JSON.parse(t);return new Ti({selectedCategory:n,selectedStep:o})}catch{}return new Ti({})}};export{lR as GettingStartedInputSerializer,gc as GettingStartedPage,sR as allWalkthroughsHiddenContext,gB as inWelcomeContext};
