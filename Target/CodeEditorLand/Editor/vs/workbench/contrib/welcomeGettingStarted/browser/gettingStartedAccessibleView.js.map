{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/welcomeGettingStarted/browser/gettingStartedAccessibleView.ts"],
  "sourcesContent": ["import { Disposable } from \"../../../../base/common/lifecycle.js\";\nimport { localize } from \"../../../../nls.js\";\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport {\n\ttype AccessibleContentProvider,\n\tAccessibleViewProviderId,\n\tAccessibleViewType,\n\ttype ExtensionContentProvider,\n\ttype IAccessibleViewContentProvider,\n} from \"../../../../platform/accessibility/browser/accessibleView.js\";\nimport type { IAccessibleViewImplentation } from \"../../../../platform/accessibility/browser/accessibleViewRegistry.js\";\nimport { IContextKeyService } from \"../../../../platform/contextkey/common/contextkey.js\";\nimport type { ServicesAccessor } from \"../../../../platform/instantiation/common/instantiation.js\";\nimport { IEditorService } from \"../../../services/editor/common/editorService.js\";\nimport { AccessibilityVerbositySettingId } from \"../../accessibility/browser/accessibilityConfiguration.js\";\nimport { GettingStartedPage, inWelcomeContext } from \"./gettingStarted.js\";\nimport { GettingStartedInput } from \"./gettingStartedInput.js\";\nimport {\n\ttype IResolvedWalkthrough,\n\ttype IResolvedWalkthroughStep,\n\tIWalkthroughsService,\n} from \"./gettingStartedService.js\";\n\nexport class GettingStartedAccessibleView\n\timplements IAccessibleViewImplentation\n{\n\treadonly type = AccessibleViewType.View;\n\treadonly priority = 110;\n\treadonly name = \"walkthroughs\";\n\treadonly when = inWelcomeContext;\n\n\tgetProvider = (\n\t\taccessor: ServicesAccessor,\n\t): AccessibleContentProvider | ExtensionContentProvider | undefined => {\n\t\tconst editorService = accessor.get(IEditorService);\n\t\tconst editorPane = editorService.activeEditorPane;\n\t\tif (!(editorPane instanceof GettingStartedPage)) {\n\t\t\treturn;\n\t\t}\n\t\tconst gettingStartedInput = editorPane.input;\n\t\tif (\n\t\t\t!(gettingStartedInput instanceof GettingStartedInput) ||\n\t\t\t!gettingStartedInput.selectedCategory\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst gettingStartedService = accessor.get(IWalkthroughsService);\n\t\tconst currentWalkthrough = gettingStartedService.getWalkthrough(\n\t\t\tgettingStartedInput.selectedCategory,\n\t\t);\n\t\tconst currentStepIds = gettingStartedInput.selectedStep;\n\t\tif (currentWalkthrough) {\n\t\t\treturn new GettingStartedAccessibleProvider(\n\t\t\t\taccessor.get(IContextKeyService),\n\t\t\t\teditorPane,\n\t\t\t\tcurrentWalkthrough,\n\t\t\t\tcurrentStepIds,\n\t\t\t);\n\t\t}\n\t\treturn;\n\t};\n}\n\nclass GettingStartedAccessibleProvider\n\textends Disposable\n\timplements IAccessibleViewContentProvider\n{\n\tprivate _currentStepIndex = 0;\n\tprivate _activeWalkthroughSteps: IResolvedWalkthroughStep[] = [];\n\n\tconstructor(\n\t\tprivate contextService: IContextKeyService,\n\t\tprivate readonly _gettingStartedPage: GettingStartedPage,\n\t\tprivate readonly _focusedItem: IResolvedWalkthrough,\n\t\tprivate readonly _focusedStep?: string | undefined,\n\t) {\n\t\tsuper();\n\t\tthis._activeWalkthroughSteps = _focusedItem.steps.filter(\n\t\t\t(step) =>\n\t\t\t\t!step.when ||\n\t\t\t\tthis.contextService.contextMatchesRules(step.when),\n\t\t);\n\t}\n\n\treadonly id = AccessibleViewProviderId.Walkthrough;\n\treadonly verbositySettingKey = AccessibilityVerbositySettingId.Walkthrough;\n\treadonly options = { type: AccessibleViewType.View };\n\n\tprovideContent(): string {\n\t\tif (this._focusedStep) {\n\t\t\tconst stepIndex = this._activeWalkthroughSteps.findIndex(\n\t\t\t\t(step) => step.id === this._focusedStep,\n\t\t\t);\n\t\t\tif (stepIndex !== -1) {\n\t\t\t\tthis._currentStepIndex = stepIndex;\n\t\t\t}\n\t\t}\n\t\treturn this._getContent(\n\t\t\tthis._currentStepIndex + 1,\n\t\t\tthis._focusedItem,\n\t\t\tthis._activeWalkthroughSteps[this._currentStepIndex],\n\t\t);\n\t}\n\n\tprivate _getContent(\n\t\tindex: number,\n\t\twaltkrough: IResolvedWalkthrough,\n\t\tstep: IResolvedWalkthroughStep,\n\t): string {\n\t\tconst stepsContent = localize(\n\t\t\t\"gettingStarted.step\",\n\t\t\t\"Step {0}: {1}\\nDescription: {2}\",\n\t\t\tindex,\n\t\t\tstep.title,\n\t\t\tstep.description.join(\" \"),\n\t\t);\n\n\t\treturn [\n\t\t\tlocalize(\"gettingStarted.title\", \"Title: {0}\", waltkrough.title),\n\t\t\tlocalize(\n\t\t\t\t\"gettingStarted.description\",\n\t\t\t\t\"Description: {0}\",\n\t\t\t\twaltkrough.description,\n\t\t\t),\n\t\t\tstepsContent,\n\t\t].join(\"\\n\\n\");\n\t}\n\n\tprovideNextContent(): string | undefined {\n\t\tif (++this._currentStepIndex >= this._activeWalkthroughSteps.length) {\n\t\t\t--this._currentStepIndex;\n\t\t\treturn;\n\t\t}\n\t\treturn this._getContent(\n\t\t\tthis._currentStepIndex + 1,\n\t\t\tthis._focusedItem,\n\t\t\tthis._activeWalkthroughSteps[this._currentStepIndex],\n\t\t);\n\t}\n\n\tprovidePreviousContent(): string | undefined {\n\t\tif (--this._currentStepIndex < 0) {\n\t\t\t++this._currentStepIndex;\n\t\t\treturn;\n\t\t}\n\t\treturn this._getContent(\n\t\t\tthis._currentStepIndex + 1,\n\t\t\tthis._focusedItem,\n\t\t\tthis._activeWalkthroughSteps[this._currentStepIndex],\n\t\t);\n\t}\n\n\tonClose(): void {\n\t\tthis._gettingStartedPage.focus();\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
