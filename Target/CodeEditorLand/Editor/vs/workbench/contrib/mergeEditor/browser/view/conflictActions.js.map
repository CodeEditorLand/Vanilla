{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/mergeEditor/browser/view/conflictActions.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport {\n\t$,\n\tcreateStyleSheet,\n\th,\n\tisInShadowDOM,\n\treset,\n} from \"../../../../../base/browser/dom.js\";\nimport { renderLabelWithIcons } from \"../../../../../base/browser/ui/iconLabel/iconLabels.js\";\nimport { hash } from \"../../../../../base/common/hash.js\";\nimport {\n\tDisposable,\n\ttype IDisposable,\n} from \"../../../../../base/common/lifecycle.js\";\nimport {\n\ttype IObservable,\n\tautorun,\n\tderived,\n\ttransaction,\n} from \"../../../../../base/common/observable.js\";\nimport type {\n\tICodeEditor,\n\tIViewZoneChangeAccessor,\n} from \"../../../../../editor/browser/editorBrowser.js\";\nimport {\n\tEDITOR_FONT_DEFAULTS,\n\tEditorOption,\n} from \"../../../../../editor/common/config/editorOptions.js\";\nimport { localize } from \"../../../../../nls.js\";\nimport {\n\ttype ModifiedBaseRange,\n\tModifiedBaseRangeState,\n\tModifiedBaseRangeStateKind,\n} from \"../model/modifiedBaseRange.js\";\nimport { FixedZoneWidget } from \"./fixedZoneWidget.js\";\nimport type { MergeEditorViewModel } from \"./viewModel.js\";\n\nexport class ConflictActionsFactory extends Disposable {\n\tprivate readonly _styleClassName: string;\n\tprivate readonly _styleElement: HTMLStyleElement;\n\n\tconstructor(private readonly _editor: ICodeEditor) {\n\t\tsuper();\n\n\t\tthis._register(\n\t\t\tthis._editor.onDidChangeConfiguration((e) => {\n\t\t\t\tif (\n\t\t\t\t\te.hasChanged(EditorOption.fontInfo) ||\n\t\t\t\t\te.hasChanged(EditorOption.codeLensFontSize) ||\n\t\t\t\t\te.hasChanged(EditorOption.codeLensFontFamily)\n\t\t\t\t) {\n\t\t\t\t\tthis._updateLensStyle();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis._styleClassName =\n\t\t\t\"_conflictActionsFactory_\" +\n\t\t\thash(this._editor.getId()).toString(16);\n\t\tthis._styleElement = createStyleSheet(\n\t\t\tisInShadowDOM(this._editor.getContainerDomNode())\n\t\t\t\t? this._editor.getContainerDomNode()\n\t\t\t\t: undefined,\n\t\t\tundefined,\n\t\t\tthis._store,\n\t\t);\n\n\t\tthis._updateLensStyle();\n\t}\n\n\tprivate _updateLensStyle(): void {\n\t\tconst { codeLensHeight, fontSize } = this._getLayoutInfo();\n\t\tconst fontFamily = this._editor.getOption(\n\t\t\tEditorOption.codeLensFontFamily,\n\t\t);\n\t\tconst editorFontInfo = this._editor.getOption(EditorOption.fontInfo);\n\n\t\tconst fontFamilyVar = `--codelens-font-family${this._styleClassName}`;\n\t\tconst fontFeaturesVar = `--codelens-font-features${this._styleClassName}`;\n\n\t\tlet newStyle = `\n\t\t.${this._styleClassName} { line-height: ${codeLensHeight}px; font-size: ${fontSize}px; padding-right: ${Math.round(fontSize * 0.5)}px; font-feature-settings: var(${fontFeaturesVar}) }\n\t\t.monaco-workbench .${this._styleClassName} span.codicon { line-height: ${codeLensHeight}px; font-size: ${fontSize}px; }\n\t\t`;\n\t\tif (fontFamily) {\n\t\t\tnewStyle += `${this._styleClassName} { font-family: var(${fontFamilyVar}), ${EDITOR_FONT_DEFAULTS.fontFamily}}`;\n\t\t}\n\t\tthis._styleElement.textContent = newStyle;\n\t\tthis._editor\n\t\t\t.getContainerDomNode()\n\t\t\t.style?.setProperty(fontFamilyVar, fontFamily ?? \"inherit\");\n\t\tthis._editor\n\t\t\t.getContainerDomNode()\n\t\t\t.style?.setProperty(\n\t\t\t\tfontFeaturesVar,\n\t\t\t\teditorFontInfo.fontFeatureSettings,\n\t\t\t);\n\t}\n\n\tprivate _getLayoutInfo() {\n\t\tconst lineHeightFactor = Math.max(\n\t\t\t1.3,\n\t\t\tthis._editor.getOption(EditorOption.lineHeight) /\n\t\t\t\tthis._editor.getOption(EditorOption.fontSize),\n\t\t);\n\t\tlet fontSize = this._editor.getOption(EditorOption.codeLensFontSize);\n\t\tif (!fontSize || fontSize < 5) {\n\t\t\tfontSize =\n\t\t\t\t(this._editor.getOption(EditorOption.fontSize) * 0.9) | 0;\n\t\t}\n\t\treturn {\n\t\t\tfontSize,\n\t\t\tcodeLensHeight: (fontSize * lineHeightFactor) | 0,\n\t\t};\n\t}\n\n\tpublic createWidget(\n\t\tviewZoneChangeAccessor: IViewZoneChangeAccessor,\n\t\tlineNumber: number,\n\t\titems: IObservable<IContentWidgetAction[]>,\n\t\tviewZoneIdsToCleanUp: string[],\n\t): IDisposable {\n\t\tconst layoutInfo = this._getLayoutInfo();\n\t\treturn new ActionsContentWidget(\n\t\t\tthis._editor,\n\t\t\tviewZoneChangeAccessor,\n\t\t\tlineNumber,\n\t\t\tlayoutInfo.codeLensHeight + 2,\n\t\t\tthis._styleClassName,\n\t\t\titems,\n\t\t\tviewZoneIdsToCleanUp,\n\t\t);\n\t}\n}\n\nexport class ActionsSource {\n\tconstructor(\n\t\tprivate readonly viewModel: MergeEditorViewModel,\n\t\tprivate readonly modifiedBaseRange: ModifiedBaseRange,\n\t) {}\n\n\tprivate getItemsInput(\n\t\tinputNumber: 1 | 2,\n\t): IObservable<IContentWidgetAction[]> {\n\t\treturn derived((reader) => {\n\t\t\t/** @description items */\n\t\t\tconst viewModel = this.viewModel;\n\t\t\tconst modifiedBaseRange = this.modifiedBaseRange;\n\n\t\t\tif (!viewModel.model.hasBaseRange(modifiedBaseRange)) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst state = viewModel.model\n\t\t\t\t.getState(modifiedBaseRange)\n\t\t\t\t.read(reader);\n\t\t\tconst handled = viewModel.model\n\t\t\t\t.isHandled(modifiedBaseRange)\n\t\t\t\t.read(reader);\n\t\t\tconst model = viewModel.model;\n\n\t\t\tconst result: IContentWidgetAction[] = [];\n\n\t\t\tconst inputData =\n\t\t\t\tinputNumber === 1\n\t\t\t\t\t? viewModel.model.input1\n\t\t\t\t\t: viewModel.model.input2;\n\t\t\tconst showNonConflictingChanges =\n\t\t\t\tviewModel.showNonConflictingChanges.read(reader);\n\n\t\t\tif (\n\t\t\t\t!modifiedBaseRange.isConflicting &&\n\t\t\t\thandled &&\n\t\t\t\t!showNonConflictingChanges\n\t\t\t) {\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst otherInputNumber = inputNumber === 1 ? 2 : 1;\n\n\t\t\tif (\n\t\t\t\tstate.kind !== ModifiedBaseRangeStateKind.unrecognized &&\n\t\t\t\t!state.isInputIncluded(inputNumber)\n\t\t\t) {\n\t\t\t\tif (\n\t\t\t\t\t!state.isInputIncluded(otherInputNumber) ||\n\t\t\t\t\t!this.viewModel.shouldUseAppendInsteadOfAccept.read(reader)\n\t\t\t\t) {\n\t\t\t\t\tresult.push(\n\t\t\t\t\t\tcommand(\n\t\t\t\t\t\t\tlocalize(\"accept\", \"Accept {0}\", inputData.title),\n\t\t\t\t\t\t\tasync () => {\n\t\t\t\t\t\t\t\ttransaction((tx) => {\n\t\t\t\t\t\t\t\t\tmodel.setState(\n\t\t\t\t\t\t\t\t\t\tmodifiedBaseRange,\n\t\t\t\t\t\t\t\t\t\tstate.withInputValue(\n\t\t\t\t\t\t\t\t\t\t\tinputNumber,\n\t\t\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\tinputNumber,\n\t\t\t\t\t\t\t\t\t\ttx,\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tmodel.telemetry.reportAcceptInvoked(\n\t\t\t\t\t\t\t\t\t\tinputNumber,\n\t\t\t\t\t\t\t\t\t\tstate.includesInput(otherInputNumber),\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\t\"acceptTooltip\",\n\t\t\t\t\t\t\t\t\"Accept {0} in the result document.\",\n\t\t\t\t\t\t\t\tinputData.title,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\n\t\t\t\t\tif (modifiedBaseRange.canBeCombined) {\n\t\t\t\t\t\tconst commandName = modifiedBaseRange.isOrderRelevant\n\t\t\t\t\t\t\t? localize(\n\t\t\t\t\t\t\t\t\t\"acceptBoth0First\",\n\t\t\t\t\t\t\t\t\t\"Accept Combination ({0} First)\",\n\t\t\t\t\t\t\t\t\tinputData.title,\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: localize(\"acceptBoth\", \"Accept Combination\");\n\n\t\t\t\t\t\tresult.push(\n\t\t\t\t\t\t\tcommand(\n\t\t\t\t\t\t\t\tcommandName,\n\t\t\t\t\t\t\t\tasync () => {\n\t\t\t\t\t\t\t\t\ttransaction((tx) => {\n\t\t\t\t\t\t\t\t\t\tmodel.setState(\n\t\t\t\t\t\t\t\t\t\t\tmodifiedBaseRange,\n\t\t\t\t\t\t\t\t\t\t\tModifiedBaseRangeState.base\n\t\t\t\t\t\t\t\t\t\t\t\t.withInputValue(\n\t\t\t\t\t\t\t\t\t\t\t\t\tinputNumber,\n\t\t\t\t\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t\t\t.withInputValue(\n\t\t\t\t\t\t\t\t\t\t\t\t\totherInputNumber,\n\t\t\t\t\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t\t\ttx,\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tmodel.telemetry.reportSmartCombinationInvoked(\n\t\t\t\t\t\t\t\t\t\t\tstate.includesInput(\n\t\t\t\t\t\t\t\t\t\t\t\totherInputNumber,\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\t\t\"acceptBothTooltip\",\n\t\t\t\t\t\t\t\t\t\"Accept an automatic combination of both sides in the result document.\",\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresult.push(\n\t\t\t\t\t\tcommand(\n\t\t\t\t\t\t\tlocalize(\"append\", \"Append {0}\", inputData.title),\n\t\t\t\t\t\t\tasync () => {\n\t\t\t\t\t\t\t\ttransaction((tx) => {\n\t\t\t\t\t\t\t\t\tmodel.setState(\n\t\t\t\t\t\t\t\t\t\tmodifiedBaseRange,\n\t\t\t\t\t\t\t\t\t\tstate.withInputValue(\n\t\t\t\t\t\t\t\t\t\t\tinputNumber,\n\t\t\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\tinputNumber,\n\t\t\t\t\t\t\t\t\t\ttx,\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tmodel.telemetry.reportAcceptInvoked(\n\t\t\t\t\t\t\t\t\t\tinputNumber,\n\t\t\t\t\t\t\t\t\t\tstate.includesInput(otherInputNumber),\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\t\"appendTooltip\",\n\t\t\t\t\t\t\t\t\"Append {0} to the result document.\",\n\t\t\t\t\t\t\t\tinputData.title,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\n\t\t\t\t\tif (modifiedBaseRange.canBeCombined) {\n\t\t\t\t\t\tresult.push(\n\t\t\t\t\t\t\tcommand(\n\t\t\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\t\t\"combine\",\n\t\t\t\t\t\t\t\t\t\"Accept Combination\",\n\t\t\t\t\t\t\t\t\tinputData.title,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\tasync () => {\n\t\t\t\t\t\t\t\t\ttransaction((tx) => {\n\t\t\t\t\t\t\t\t\t\tmodel.setState(\n\t\t\t\t\t\t\t\t\t\t\tmodifiedBaseRange,\n\t\t\t\t\t\t\t\t\t\t\tstate.withInputValue(\n\t\t\t\t\t\t\t\t\t\t\t\tinputNumber,\n\t\t\t\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t\tinputNumber,\n\t\t\t\t\t\t\t\t\t\t\ttx,\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t\tmodel.telemetry.reportSmartCombinationInvoked(\n\t\t\t\t\t\t\t\t\t\t\tstate.includesInput(\n\t\t\t\t\t\t\t\t\t\t\t\totherInputNumber,\n\t\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\t\t\"acceptBothTooltip\",\n\t\t\t\t\t\t\t\t\t\"Accept an automatic combination of both sides in the result document.\",\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!model\n\t\t\t\t\t\t.isInputHandled(modifiedBaseRange, inputNumber)\n\t\t\t\t\t\t.read(reader)\n\t\t\t\t) {\n\t\t\t\t\tresult.push(\n\t\t\t\t\t\tcommand(\n\t\t\t\t\t\t\tlocalize(\"ignore\", \"Ignore\"),\n\t\t\t\t\t\t\tasync () => {\n\t\t\t\t\t\t\t\ttransaction((tx) => {\n\t\t\t\t\t\t\t\t\tmodel.setInputHandled(\n\t\t\t\t\t\t\t\t\t\tmodifiedBaseRange,\n\t\t\t\t\t\t\t\t\t\tinputNumber,\n\t\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t\t\ttx,\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\t\t\"markAsHandledTooltip\",\n\t\t\t\t\t\t\t\t\"Don't take this side of the conflict.\",\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t});\n\t}\n\n\tpublic readonly itemsInput1 = this.getItemsInput(1);\n\tpublic readonly itemsInput2 = this.getItemsInput(2);\n\n\tpublic readonly resultItems = derived(this, (reader) => {\n\t\tconst viewModel = this.viewModel;\n\t\tconst modifiedBaseRange = this.modifiedBaseRange;\n\n\t\tconst state = viewModel.model.getState(modifiedBaseRange).read(reader);\n\t\tconst model = viewModel.model;\n\n\t\tconst result: IContentWidgetAction[] = [];\n\n\t\tif (state.kind === ModifiedBaseRangeStateKind.unrecognized) {\n\t\t\tresult.push({\n\t\t\t\ttext: localize(\"manualResolution\", \"Manual Resolution\"),\n\t\t\t\ttooltip: localize(\n\t\t\t\t\t\"manualResolutionTooltip\",\n\t\t\t\t\t\"This conflict has been resolved manually.\",\n\t\t\t\t),\n\t\t\t});\n\t\t} else if (state.kind === ModifiedBaseRangeStateKind.base) {\n\t\t\tresult.push({\n\t\t\t\ttext: localize(\"noChangesAccepted\", \"No Changes Accepted\"),\n\t\t\t\ttooltip: localize(\n\t\t\t\t\t\"noChangesAcceptedTooltip\",\n\t\t\t\t\t\"The current resolution of this conflict equals the common ancestor of both the right and left changes.\",\n\t\t\t\t),\n\t\t\t});\n\t\t} else {\n\t\t\tconst labels = [];\n\t\t\tif (state.includesInput1) {\n\t\t\t\tlabels.push(model.input1.title);\n\t\t\t}\n\t\t\tif (state.includesInput2) {\n\t\t\t\tlabels.push(model.input2.title);\n\t\t\t}\n\t\t\tif (\n\t\t\t\tstate.kind === ModifiedBaseRangeStateKind.both &&\n\t\t\t\tstate.firstInput === 2\n\t\t\t) {\n\t\t\t\tlabels.reverse();\n\t\t\t}\n\t\t\tresult.push({\n\t\t\t\ttext: `${labels.join(\" + \")}`,\n\t\t\t});\n\t\t}\n\n\t\tconst stateToggles: IContentWidgetAction[] = [];\n\t\tif (state.includesInput1) {\n\t\t\tstateToggles.push(\n\t\t\t\tcommand(\n\t\t\t\t\tlocalize(\"remove\", \"Remove {0}\", model.input1.title),\n\t\t\t\t\tasync () => {\n\t\t\t\t\t\ttransaction((tx) => {\n\t\t\t\t\t\t\tmodel.setState(\n\t\t\t\t\t\t\t\tmodifiedBaseRange,\n\t\t\t\t\t\t\t\tstate.withInputValue(1, false),\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\ttx,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tmodel.telemetry.reportRemoveInvoked(\n\t\t\t\t\t\t\t\t1,\n\t\t\t\t\t\t\t\tstate.includesInput(2),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\"removeTooltip\",\n\t\t\t\t\t\t\"Remove {0} from the result document.\",\n\t\t\t\t\t\tmodel.input1.title,\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\t\tif (state.includesInput2) {\n\t\t\tstateToggles.push(\n\t\t\t\tcommand(\n\t\t\t\t\tlocalize(\"remove\", \"Remove {0}\", model.input2.title),\n\t\t\t\t\tasync () => {\n\t\t\t\t\t\ttransaction((tx) => {\n\t\t\t\t\t\t\tmodel.setState(\n\t\t\t\t\t\t\t\tmodifiedBaseRange,\n\t\t\t\t\t\t\t\tstate.withInputValue(2, false),\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\ttx,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tmodel.telemetry.reportRemoveInvoked(\n\t\t\t\t\t\t\t\t2,\n\t\t\t\t\t\t\t\tstate.includesInput(1),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\"removeTooltip\",\n\t\t\t\t\t\t\"Remove {0} from the result document.\",\n\t\t\t\t\t\tmodel.input2.title,\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\t\tif (\n\t\t\tstate.kind === ModifiedBaseRangeStateKind.both &&\n\t\t\tstate.firstInput === 2\n\t\t) {\n\t\t\tstateToggles.reverse();\n\t\t}\n\t\tresult.push(...stateToggles);\n\n\t\tif (state.kind === ModifiedBaseRangeStateKind.unrecognized) {\n\t\t\tresult.push(\n\t\t\t\tcommand(\n\t\t\t\t\tlocalize(\"resetToBase\", \"Reset to base\"),\n\t\t\t\t\tasync () => {\n\t\t\t\t\t\ttransaction((tx) => {\n\t\t\t\t\t\t\tmodel.setState(\n\t\t\t\t\t\t\t\tmodifiedBaseRange,\n\t\t\t\t\t\t\t\tModifiedBaseRangeState.base,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\ttx,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tmodel.telemetry.reportResetToBaseInvoked();\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\"resetToBaseTooltip\",\n\t\t\t\t\t\t\"Reset this conflict to the common ancestor of both the right and left changes.\",\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\n\t\treturn result;\n\t});\n\n\tpublic readonly isEmpty = derived(this, (reader) => {\n\t\treturn (\n\t\t\tthis.itemsInput1.read(reader).length +\n\t\t\t\tthis.itemsInput2.read(reader).length +\n\t\t\t\tthis.resultItems.read(reader).length ===\n\t\t\t0\n\t\t);\n\t});\n\n\tpublic readonly inputIsEmpty = derived(this, (reader) => {\n\t\treturn (\n\t\t\tthis.itemsInput1.read(reader).length +\n\t\t\t\tthis.itemsInput2.read(reader).length ===\n\t\t\t0\n\t\t);\n\t});\n}\n\nfunction command(\n\ttitle: string,\n\taction: () => Promise<void>,\n\ttooltip?: string,\n): IContentWidgetAction {\n\treturn {\n\t\ttext: title,\n\t\taction,\n\t\ttooltip,\n\t};\n}\n\nexport interface IContentWidgetAction {\n\ttext: string;\n\ttooltip?: string;\n\taction?: () => Promise<void>;\n}\n\nclass ActionsContentWidget extends FixedZoneWidget {\n\tprivate readonly _domNode = h(\"div.merge-editor-conflict-actions\").root;\n\n\tconstructor(\n\t\teditor: ICodeEditor,\n\t\tviewZoneAccessor: IViewZoneChangeAccessor,\n\t\tafterLineNumber: number,\n\t\theight: number,\n\n\t\tclassName: string,\n\t\titems: IObservable<IContentWidgetAction[]>,\n\t\tviewZoneIdsToCleanUp: string[],\n\t) {\n\t\tsuper(\n\t\t\teditor,\n\t\t\tviewZoneAccessor,\n\t\t\tafterLineNumber,\n\t\t\theight,\n\t\t\tviewZoneIdsToCleanUp,\n\t\t);\n\n\t\tthis.widgetDomNode.appendChild(this._domNode);\n\n\t\tthis._domNode.classList.add(className);\n\n\t\tthis._register(\n\t\t\tautorun((reader) => {\n\t\t\t\t/** @description update commands */\n\t\t\t\tconst i = items.read(reader);\n\t\t\t\tthis.setState(i);\n\t\t\t}),\n\t\t);\n\t}\n\n\tprivate setState(items: IContentWidgetAction[]) {\n\t\tconst children: HTMLElement[] = [];\n\t\tlet isFirst = true;\n\t\tfor (const item of items) {\n\t\t\tif (isFirst) {\n\t\t\t\tisFirst = false;\n\t\t\t} else {\n\t\t\t\tchildren.push($(\"span\", undefined, \"\\u00a0|\\u00a0\"));\n\t\t\t}\n\t\t\tconst title = renderLabelWithIcons(item.text);\n\n\t\t\tif (item.action) {\n\t\t\t\tchildren.push(\n\t\t\t\t\t$(\n\t\t\t\t\t\t\"a\",\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle: item.tooltip,\n\t\t\t\t\t\t\trole: \"button\",\n\t\t\t\t\t\t\tonclick: () => item.action!(),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t...title,\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tchildren.push($(\"span\", { title: item.tooltip }, ...title));\n\t\t\t}\n\t\t}\n\n\t\treset(this._domNode, ...children);\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
