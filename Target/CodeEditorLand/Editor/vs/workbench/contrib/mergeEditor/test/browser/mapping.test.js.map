{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/mergeEditor/test/browser/mapping.test.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { Position } from '../../../../../editor/common/core/position.js';\nimport { Range } from '../../../../../editor/common/core/range.js';\nimport { TextLength } from '../../../../../editor/common/core/textLength.js';\nimport { DocumentRangeMap, RangeMapping } from '../../browser/model/mapping.js';\n\nsuite('merge editor mapping', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\tsuite('DocumentRangeMap', () => {\n\t\tconst documentMap = createDocumentRangeMap([\n\t\t\t'1:3',\n\t\t\t['0:2', '0:3'],\n\t\t\t'1:1',\n\t\t\t['1:2', '3:3'],\n\t\t\t'0:2',\n\t\t\t['0:2', '0:3'],\n\t\t]);\n\n\t\ttest('map', () => assert.deepStrictEqual(documentMap.rangeMappings.map(m => m.toString()), [\n\t\t\t'[2:4, 2:6) -> [2:4, 2:7)',\n\t\t\t'[3:2, 4:3) -> [3:2, 6:4)',\n\t\t\t'[4:5, 4:7) -> [6:6, 6:9)'\n\t\t]));\n\n\t\tfunction f(this: Mocha.Context) {\n\t\t\treturn documentMap.project(parsePos(this.test!.title)).toString();\n\t\t}\n\n\t\ttest('1:1', function () { assert.deepStrictEqual(f.apply(this), '[1:1, 1:1) -> [1:1, 1:1)'); });\n\t\ttest('2:3', function () { assert.deepStrictEqual(f.apply(this), '[2:3, 2:3) -> [2:3, 2:3)'); });\n\t\ttest('2:4', function () { assert.deepStrictEqual(f.apply(this), '[2:4, 2:6) -> [2:4, 2:7)'); });\n\t\ttest('2:5', function () { assert.deepStrictEqual(f.apply(this), '[2:4, 2:6) -> [2:4, 2:7)'); });\n\t\ttest('2:6', function () { assert.deepStrictEqual(f.apply(this), '[2:6, 2:6) -> [2:7, 2:7)'); });\n\t\ttest('2:7', function () { assert.deepStrictEqual(f.apply(this), '[2:7, 2:7) -> [2:8, 2:8)'); });\n\t\ttest('3:1', function () { assert.deepStrictEqual(f.apply(this), '[3:1, 3:1) -> [3:1, 3:1)'); });\n\t\ttest('3:2', function () { assert.deepStrictEqual(f.apply(this), '[3:2, 4:3) -> [3:2, 6:4)'); });\n\t\ttest('4:2', function () { assert.deepStrictEqual(f.apply(this), '[3:2, 4:3) -> [3:2, 6:4)'); });\n\t\ttest('4:3', function () { assert.deepStrictEqual(f.apply(this), '[4:3, 4:3) -> [6:4, 6:4)'); });\n\t\ttest('4:4', function () { assert.deepStrictEqual(f.apply(this), '[4:4, 4:4) -> [6:5, 6:5)'); });\n\t\ttest('4:5', function () { assert.deepStrictEqual(f.apply(this), '[4:5, 4:7) -> [6:6, 6:9)'); });\n\t});\n});\n\nfunction parsePos(str: string): Position {\n\tconst [lineCount, columnCount] = str.split(':');\n\treturn new Position(parseInt(lineCount, 10), parseInt(columnCount, 10));\n}\n\nfunction parseLengthObj(str: string): TextLength {\n\tconst [lineCount, columnCount] = str.split(':');\n\treturn new TextLength(parseInt(lineCount, 10), parseInt(columnCount, 10));\n}\n\nfunction toPosition(length: TextLength): Position {\n\treturn new Position(length.lineCount + 1, length.columnCount + 1);\n}\n\nfunction createDocumentRangeMap(items: ([string, string] | string)[]) {\n\tconst mappings: RangeMapping[] = [];\n\tlet lastLen1 = new TextLength(0, 0);\n\tlet lastLen2 = new TextLength(0, 0);\n\tfor (const item of items) {\n\t\tif (typeof item === 'string') {\n\t\t\tconst len = parseLengthObj(item);\n\t\t\tlastLen1 = lastLen1.add(len);\n\t\t\tlastLen2 = lastLen2.add(len);\n\t\t} else {\n\t\t\tconst len1 = parseLengthObj(item[0]);\n\t\t\tconst len2 = parseLengthObj(item[1]);\n\t\t\tmappings.push(new RangeMapping(\n\t\t\t\tRange.fromPositions(toPosition(lastLen1), toPosition(lastLen1.add(len1))),\n\t\t\t\tRange.fromPositions(toPosition(lastLen2), toPosition(lastLen2.add(len2))),\n\t\t\t));\n\t\t\tlastLen1 = lastLen1.add(len1);\n\t\t\tlastLen2 = lastLen2.add(len2);\n\t\t}\n\t}\n\n\treturn new DocumentRangeMap(mappings, lastLen1.lineCount);\n}\n"],
  "mappings": "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",
  "names": []
}
