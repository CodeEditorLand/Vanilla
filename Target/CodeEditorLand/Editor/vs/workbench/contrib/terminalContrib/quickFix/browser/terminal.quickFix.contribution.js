var l=Object.defineProperty;var c=Object.getOwnPropertyDescriptor;var s=(o,t,i,e)=>{for(var r=e>1?void 0:e?c(t,i):t,a=o.length-1,m;a>=0;a--)(m=o[a])&&(r=(e?m(t,i,r):m(r))||r);return e&&r&&l(t,i,r),r},d=(o,t)=>(i,e)=>t(i,e,o);import"./media/terminalQuickFix.css";import{KeyCode as p,KeyMod as g}from"../../../../../base/common/keyCodes.js";import{DisposableStore as u}from"../../../../../base/common/lifecycle.js";import{localize2 as h}from"../../../../../nls.js";import{InstantiationType as f,registerSingleton as I}from"../../../../../platform/instantiation/common/extensions.js";import{IInstantiationService as T}from"../../../../../platform/instantiation/common/instantiation.js";import{KeybindingWeight as w}from"../../../../../platform/keybinding/common/keybindingsRegistry.js";import{registerActiveInstanceAction as x}from"../../../terminal/browser/terminalActions.js";import{registerTerminalContribution as y}from"../../../terminal/browser/terminalExtensions.js";import{TerminalContextKeys as k}from"../../../terminal/common/terminalContextKey.js";import{ITerminalQuickFixService as S}from"./quickFix.js";import{TerminalQuickFixAddon as b}from"./quickFixAddon.js";import{freePort as C,gitCreatePr as v,gitPull as F,gitPushSetUpstream as _,gitSimilar as M,gitTwoDashes as P,pwshGeneralError as Q,pwshUnixCommandNotFoundError as D}from"./terminalQuickFixBuiltinActions.js";import{TerminalQuickFixService as A}from"./terminalQuickFixService.js";I(S,A,f.Delayed);let n=class extends u{constructor(i,e,r,a){super();this._instance=i;this._instantiationService=a}static ID="quickFix";static get(i){return i.getContribution(n.ID)}_addon;get addon(){return this._addon}xtermReady(i){this._addon=this._instantiationService.createInstance(b,void 0,this._instance.capabilities),i.raw.loadAddon(this._addon),this.add(this._addon.onDidRequestRerunCommand(e=>this._instance.runCommand(e.command,e.shouldExecute||!1)));for(const e of[P(),F(),C((r,a)=>this._instance.freePortKillProcess(r,a)),M(),_(),v(),D(),Q()])this._addon.registerCommandFinishedListener(e)}};n=s([d(3,T)],n),y(n.ID,n);var K=(t=>(t.ShowQuickFixes="workbench.action.terminal.showQuickFixes",t))(K||{});x({id:"workbench.action.terminal.showQuickFixes",title:h("workbench.action.terminal.showQuickFixes","Show Terminal Quick Fixes"),precondition:k.focus,keybinding:{primary:g.CtrlCmd|p.Period,weight:w.WorkbenchContrib},run:o=>n.get(o)?.addon?.showMenu()});
