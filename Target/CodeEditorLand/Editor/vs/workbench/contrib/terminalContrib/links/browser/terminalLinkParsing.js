var h=class{constructor(n){this.executor=n}_didRun=!1;_value;_error;get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(n){this._error=n}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};function L(){return globalThis._VSCODE_NLS_LANGUAGE}var ae=L()==="pseudo"||typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;var p="en",C=!1,E=!1,S=!1,$=!1,T=!1,_=!1,F=!1,z=!1,D=!1,G=!1,m,b=p,k=p,V,c,d=globalThis,s;typeof d.vscode<"u"&&typeof d.vscode.process<"u"?s=d.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(s=process);var W=typeof s?.versions?.electron=="string",U=W&&s?.type==="renderer";if(typeof s=="object"){C=s.platform==="win32",E=s.platform==="darwin",S=s.platform==="linux",$=S&&!!s.env.SNAP&&!!s.env.SNAP_REVISION,F=W,D=!!s.env.CI||!!s.env.BUILD_ARTIFACTSTAGINGDIRECTORY,m=p,b=p;let e=s.env.VSCODE_NLS_CONFIG;if(e)try{let n=JSON.parse(e);m=n.userLocale,k=n.osLocale,b=n.resolvedLanguage||p,V=n.languagePack?.translationsConfigFile}catch{}T=!0}else typeof navigator=="object"&&!U?(c=navigator.userAgent,C=c.indexOf("Windows")>=0,E=c.indexOf("Macintosh")>=0,z=(c.indexOf("Macintosh")>=0||c.indexOf("iPad")>=0||c.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,S=c.indexOf("Linux")>=0,G=c?.indexOf("Mobi")>=0,_=!0,b=L()||p,m=navigator.language.toLowerCase(),k=m):console.error("Unable to resolve platform.");var I=0;E?I=1:C?I=3:S&&(I=2);var j=_&&typeof d.importScripts=="function",le=j?d.origin:void 0;var l=c,x=b,B;(r=>{function e(){return x}r.value=e;function n(){return x.length===2?x==="en":x.length>=3?x[0]==="e"&&x[1]==="n"&&x[2]==="-":!1}r.isDefaultVariant=n;function t(){return x==="en"}r.isDefault=t})(B||={});var Q=typeof d.postMessage=="function"&&!d.importScripts,fe=(()=>{if(Q){let e=[];d.addEventListener("message",t=>{if(t.data&&t.data.vscodeScheduleAsyncWork)for(let r=0,i=e.length;r<i;r++){let o=e[r];if(o.id===t.data.vscodeScheduleAsyncWork){e.splice(r,1),o.callback();return}}});let n=0;return t=>{let r=++n;e.push({id:r,callback:t}),d.postMessage({vscodeScheduleAsyncWork:r},"*")}}return e=>setTimeout(e)})();var J=!!(l&&l.indexOf("Chrome")>=0),ce=!!(l&&l.indexOf("Firefox")>=0),de=!!(!J&&l&&l.indexOf("Safari")>=0),ge=!!(l&&l.indexOf("Edg/")>=0),xe=!!(l&&l.indexOf("Android")>=0);var Y=new h(()=>w(!0)),N=new h(()=>w(!1));function w(e){let n=0,t=0,r=0,i=0;function o(){return`(?<row${n++}>\\d+)`}function u(){return`(?<col${t++}>\\d+)`}function g(){return`(?<rowEnd${r++}>\\d+)`}function f(){return`(?<colEnd${i++}>\\d+)`}let a=e?"$":"",A=[`(?::|#| |['"],)${o()}([:.]${u()}(?:-(?:${g()}\\.)?${f()})?)?`+a,`['"]?(?:,? |: ?| on )lines? ${o()}(?:-${g()})?(?:,? (?:col(?:umn)?|characters?) ${u()}(?:-${f()})?)?`+a,`:? ?[\\[\\(]${o()}(?:, ?${u()})?[\\]\\)]`+a].join("|").replace(/ /g,"[\xA0 ]");return new RegExp(`(${A})`,e?void 0:"g")}function Se(e){let n=q(e)?.suffix;return n?e.substring(0,n.index):e}function be(e){let n=e.startsWith("\\\\?\\")?4:0,t=e.indexOf("?",n);return t===-1?e:e.substring(0,t)}function Z(e){let n,t=[];for(N.value.lastIndex=0;(n=N.value.exec(e))!==null;){let r=R(n);if(r===null)break;t.push(r)}return t}function q(e){return R(Y.value.exec(e))}function R(e){let n=e?.groups;return!n||e.length<1?null:{row:P(n.row0||n.row1||n.row2),col:P(n.col0||n.col1||n.col2),rowEnd:P(n.rowEnd0||n.rowEnd1||n.rowEnd2),colEnd:P(n.colEnd0||n.colEnd1||n.colEnd2),suffix:{index:e.index,text:e[0]}}}function P(e){return e===void 0?e:parseInt(e)}var H=/(?<path>(?:file:\/\/\/)?[^\s\|<>\[\({][^\s\|<>]*)$/;function Pe(e,n){let t=X(e),r=re(e,n);return K(t,r),t}function K(e,n){e.length===0&&e.push(...n);for(let t of n)v(e,t,0,e.length)}function v(e,n,t,r){if(e.length===0){e.push(n);return}if(t>r)return;let i=Math.floor((t+r)/2);if(i>=e.length||n.path.index<e[i].path.index&&(i===0||n.path.index>e[i-1].path.index)){(i>=e.length||n.path.index+n.path.text.length<e[i].path.index&&(i===0||n.path.index>e[i-1].path.index+e[i-1].path.text.length))&&e.splice(i,0,n);return}n.path.index>e[i].path.index?v(e,n,i+1,r):v(e,n,t,i-1)}function X(e){let n=[],t=Z(e);for(let r of t){let o=e.substring(0,r.suffix.index).match(H);if(o&&o.index!==void 0&&o.groups?.path){let u=o.index,g=o.groups.path,f,a=g.match(/^(?<prefix>['"]+)/);if(a?.groups?.prefix){if(f={index:u,text:a.groups.prefix},g=g.substring(f.text.length),g.trim().length===0)continue;if(a.groups.prefix.length>1&&r.suffix.text[0].match(/['"]/)&&a.groups.prefix[a.groups.prefix.length-1]===r.suffix.text[0]){let y=a.groups.prefix.length-1;f.index+=y,f.text=a.groups.prefix[a.groups.prefix.length-1],u+=y}}n.push({path:{index:u+(f?.text.length||0),text:g},prefix:f,suffix:r})}}return n}var ee="(?:(?:(?:\\.\\.?|\\~|file://)|(?:[^\\0<>\\?\\s!`&*()\\[\\]'\":;\\\\][^\\0<>\\?\\s!`&*()'\":;\\\\]*))?(?:\\/(?:[^\\0<>\\?\\s!`&*()'\":;\\\\])+)+)",ne="(?:\\\\\\\\\\?\\\\|file:\\/\\/\\/)?[a-zA-Z]:",te=`(?:(?:(?:${ne}|\\.\\.?|\\~)|(?:[^\\0<>\\?\\|\\/\\s!\`&*()\\[\\]'":;][^\\0<>\\?\\|\\/\\s!\`&*()'":;]*))?(?:(?:\\\\|\\/)(?:[^\\0<>\\?\\|\\/\\s!\`&*()'":;])+)+)`;function re(e,n){let t=[],r=new RegExp(n===1?te:ee,"g"),i;for(;(i=r.exec(e))!==null;){let o=i[0],u=i.index;if(!o)break;((e.startsWith("--- a/")||e.startsWith("+++ b/"))&&u===4||e.startsWith("diff --git")&&(o.startsWith("a/")||o.startsWith("b/")))&&(o=o.substring(2),u+=2),t.push({path:{index:u,text:o},prefix:void 0,suffix:void 0})}return t}export{Z as detectLinkSuffixes,Pe as detectLinks,q as getLinkSuffix,be as removeLinkQueryString,Se as removeLinkSuffix,R as toLinkSuffix,ne as winDrivePrefix};
