{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/terminalContrib/typeAhead/browser/terminal.typeAhead.contribution.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DisposableStore, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { ITerminalContribution, ITerminalInstance, IXtermTerminal } from '../../../terminal/browser/terminal.js';\nimport { registerTerminalContribution } from '../../../terminal/browser/terminalExtensions.js';\nimport { TerminalWidgetManager } from '../../../terminal/browser/widgets/widgetManager.js';\nimport { TypeAheadAddon } from './terminalTypeAheadAddon.js';\nimport { ITerminalProcessManager, TERMINAL_CONFIG_SECTION } from '../../../terminal/common/terminal.js';\nimport type { Terminal as RawXtermTerminal } from '@xterm/xterm';\nimport { TerminalTypeAheadSettingId, type ITerminalTypeAheadConfiguration } from '../common/terminalTypeAheadConfiguration.js';\n\nclass TerminalTypeAheadContribution extends DisposableStore implements ITerminalContribution {\n\tstatic readonly ID = 'terminal.typeAhead';\n\n\tstatic get(instance: ITerminalInstance): TerminalTypeAheadContribution | null {\n\t\treturn instance.getContribution<TerminalTypeAheadContribution>(TerminalTypeAheadContribution.ID);\n\t}\n\n\tprivate _addon: TypeAheadAddon | undefined;\n\n\tconstructor(\n\t\tinstance: ITerminalInstance,\n\t\tprivate readonly _processManager: ITerminalProcessManager,\n\t\twidgetManager: TerminalWidgetManager,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService\n\t) {\n\t\tsuper();\n\t\tthis.add(toDisposable(() => this._addon?.dispose()));\n\t}\n\n\txtermReady(xterm: IXtermTerminal & { raw: RawXtermTerminal }): void {\n\t\tthis._loadTypeAheadAddon(xterm.raw);\n\t\tthis.add(this._configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(TerminalTypeAheadSettingId.LocalEchoEnabled)) {\n\t\t\t\tthis._loadTypeAheadAddon(xterm.raw);\n\t\t\t}\n\t\t}));\n\n\t\t// Reset the addon when the terminal launches or relaunches\n\t\tthis.add(this._processManager.onProcessReady(() => {\n\t\t\tthis._addon?.reset();\n\t\t}));\n\t}\n\n\tprivate _loadTypeAheadAddon(xterm: RawXtermTerminal): void {\n\t\tconst enabled = this._configurationService.getValue<ITerminalTypeAheadConfiguration>(TERMINAL_CONFIG_SECTION).localEchoEnabled;\n\t\tconst isRemote = !!this._processManager.remoteAuthority;\n\t\tif (enabled === 'off' || enabled === 'auto' && !isRemote) {\n\t\t\tthis._addon?.dispose();\n\t\t\tthis._addon = undefined;\n\t\t\treturn;\n\t\t}\n\t\tif (this._addon) {\n\t\t\treturn;\n\t\t}\n\t\tif (enabled === 'on' || (enabled === 'auto' && isRemote)) {\n\t\t\tthis._addon = this._instantiationService.createInstance(TypeAheadAddon, this._processManager);\n\t\t\txterm.loadAddon(this._addon);\n\t\t}\n\t}\n}\n\nregisterTerminalContribution(TerminalTypeAheadContribution.ID, TerminalTypeAheadContribution);\n"],
  "mappings": ";;;;;;;;;;;;AAKA,SAAS,iBAAiB,oBAAoB;AAC9C,SAAS,6BAA6B;AACtC,SAAS,6BAA6B;AACtC,SAAS,uBAAuB,mBAAmB,sBAAsB;AACzE,SAAS,oCAAoC;AAC7C,SAAS,6BAA6B;AACtC,SAAS,sBAAsB;AAC/B,SAAS,yBAAyB,+BAA+B;AAEjE,SAAS,kCAAwE;AAEjF,IAAM,gCAAN,cAA4C,gBAAiD;AAAA,EAS5F,YACC,UACiB,iBACjB,eACwC,uBACA,uBACvC;AACD,UAAM;AALW;AAEuB;AACA;AAGxC,SAAK,IAAI,aAAa,MAAM,KAAK,QAAQ,QAAQ,CAAC,CAAC;AAAA,EACpD;AAAA,EAlCD,OAgB6F;AAAA;AAAA;AAAA,EAC5F,OAAgB,KAAK;AAAA,EAErB,OAAO,IAAI,UAAmE;AAC7E,WAAO,SAAS,gBAA+C,8BAA8B,EAAE;AAAA,EAChG;AAAA,EAEQ;AAAA,EAaR,WAAW,OAAyD;AACnE,SAAK,oBAAoB,MAAM,GAAG;AAClC,SAAK,IAAI,KAAK,sBAAsB,yBAAyB,OAAK;AACjE,UAAI,EAAE,qBAAqB,2BAA2B,gBAAgB,GAAG;AACxE,aAAK,oBAAoB,MAAM,GAAG;AAAA,MACnC;AAAA,IACD,CAAC,CAAC;AAGF,SAAK,IAAI,KAAK,gBAAgB,eAAe,MAAM;AAClD,WAAK,QAAQ,MAAM;AAAA,IACpB,CAAC,CAAC;AAAA,EACH;AAAA,EAEQ,oBAAoB,OAA+B;AAC1D,UAAM,UAAU,KAAK,sBAAsB,SAA0C,uBAAuB,EAAE;AAC9G,UAAM,WAAW,CAAC,CAAC,KAAK,gBAAgB;AACxC,QAAI,YAAY,SAAS,YAAY,UAAU,CAAC,UAAU;AACzD,WAAK,QAAQ,QAAQ;AACrB,WAAK,SAAS;AACd;AAAA,IACD;AACA,QAAI,KAAK,QAAQ;AAChB;AAAA,IACD;AACA,QAAI,YAAY,QAAS,YAAY,UAAU,UAAW;AACzD,WAAK,SAAS,KAAK,sBAAsB,eAAe,gBAAgB,KAAK,eAAe;AAC5F,YAAM,UAAU,KAAK,MAAM;AAAA,IAC5B;AAAA,EACD;AACD;AAlDM,gCAAN;AAAA,EAaG;AAAA,EACA;AAAA,GAdG;AAoDN,6BAA6B,8BAA8B,IAAI,6BAA6B;",
  "names": []
}
