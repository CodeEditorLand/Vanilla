import{reset as l}from"../../../../../vs/base/browser/dom.js";import"../../../../../vs/base/browser/ui/actionbar/actionbar.js";import{ActionViewItem as S}from"../../../../../vs/base/browser/ui/actionbar/actionViewItems.js";import{renderLabelWithIcons as y}from"../../../../../vs/base/browser/ui/iconLabel/iconLabels.js";import{Action as M}from"../../../../../vs/base/common/actions.js";import{equals as c}from"../../../../../vs/base/common/arrays.js";import"../../../../../vs/base/common/lifecycle.js";import*as C from"../../../../../vs/base/common/path.js";import{ResourceTree as u}from"../../../../../vs/base/common/resourceTree.js";import"../../../../../vs/base/common/uri.js";import"../../../../../vs/editor/common/languages.js";import{createActionViewItem as d,createAndFillInActionBarActions as f,createAndFillInContextMenuActions as A}from"../../../../../vs/platform/actions/browser/menuEntryActionViewItem.js";import{MenuItemAction as m}from"../../../../../vs/platform/actions/common/actions.js";import"../../../../../vs/platform/commands/common/commands.js";import"../../../../../vs/platform/instantiation/common/instantiation.js";import"../../../../../vs/workbench/contrib/scm/common/history.js";import"../../../../../vs/workbench/contrib/scm/common/scm.js";function pe(e){return Array.isArray(e)&&e.every(t=>h(t))}function le(e){return Array.isArray(e.repositories)&&Array.isArray(e.visibleRepositories)}function h(e){return!!e.provider&&!!e.input}function Se(e){return!!e.validateInput&&typeof e.value=="string"}function ye(e){return e.type==="actionButton"}function I(e){return!!e.provider&&!!e.resources}function Me(e){return!!e.sourceUri&&I(e.resourceGroup)}function Ce(e){return u.isResourceNode(e)&&I(e.context)}function de(e){return e.type==="historyItemGroup"}function R(e){return e.type==="allChanges"||e.type==="historyItem"}function fe(e){return e.type==="historyItem2"}function Ae(e){return e.type==="historyItemLoadMore"}function he(e){return e.type==="historyItemChange"}function Re(e){return u.isResourceNode(e)&&R(e.context)}function xe(e){return e.type==="separator"}function ge(e,t,r){const o=C.basename(e.fsPath),s=JSON.parse(t.query),a=JSON.parse(r.query),n=s.ref.substring(0,8).concat(s.ref.endsWith("^")?"^":""),i=a.ref.substring(0,8).concat(a.ref.endsWith("^")?"^":"");return[t,r,`${o} (${n}) \u2194 ${o} (${i})`,null]}const p=(e,t)=>e instanceof m&&t instanceof m?e.id===t.id&&e.enabled===t.enabled&&e.hideActions?.isHidden===t.hideActions?.isHidden:e.id===t.id&&e.enabled===t.enabled;function x(e,t,r){let o=[],s=[];const a=()=>{const n=[],i=[];f(e,{shouldForwardArgs:!0},{primary:n,secondary:i},r),!(c(o,n,p)&&c(s,i,p))&&(o=n,s=i,t(n,i))};return a(),e.onDidChange(a)}function ve(e,t){return x(e,r=>{t.clear(),t.push(r,{icon:!0,label:!1})},"inline")}function Ee(e){const t=[],r=[];return A(e,{shouldForwardArgs:!0},{primary:t,secondary:r},"inline"),r}class g extends M{constructor(r,o){super(`statusbaraction{${r.id}}`,r.title,"",!0);this.command=r;this.commandService=o;this.tooltip=r.tooltip||""}run(){return this.commandService.executeCommand(this.command.id,...this.command.arguments||[])}}class v extends S{constructor(t,r){super(null,t,{...r,icon:!1,label:!0})}updateLabel(){this.options.label&&this.label&&l(this.label,...y(this.action.label))}}function He(e){return(t,r)=>t instanceof g?new v(t,r):d(e,t,r)}function we(e){return`${e.contextValue}:${e.label}${e.rootUri?`:${e.rootUri.toString()}`:""}`}function Te(e){return e.groups.reduce((t,r)=>t+r.resources.length,0)}export{g as StatusBarAction,Ee as collectContextMenuActions,x as connectPrimaryMenu,ve as connectPrimaryMenuToInlineActionBar,He as getActionViewItemProvider,we as getProviderKey,Te as getRepositoryResourceCount,ye as isSCMActionButton,Re as isSCMHistoryItemChangeNode,he as isSCMHistoryItemChangeTreeElement,de as isSCMHistoryItemGroupTreeElement,Ae as isSCMHistoryItemLoadMoreTreeElement,R as isSCMHistoryItemTreeElement,fe as isSCMHistoryItemViewModelTreeElement,Se as isSCMInput,h as isSCMRepository,pe as isSCMRepositoryArray,Me as isSCMResource,I as isSCMResourceGroup,Ce as isSCMResourceNode,xe as isSCMViewSeparator,le as isSCMViewService,ge as toDiffEditorArguments};
