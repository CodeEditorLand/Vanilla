import{reset as I}from"../../../../base/browser/dom.js";import{ActionViewItem as l}from"../../../../base/browser/ui/actionbar/actionViewItems.js";import{renderLabelWithIcons as d}from"../../../../base/browser/ui/iconLabel/iconLabels.js";import{Action as M}from"../../../../base/common/actions.js";import{equals as a}from"../../../../base/common/arrays.js";import{ResourceTree as S}from"../../../../base/common/resourceTree.js";import{createActionViewItem as y,createAndFillInActionBarActions as C,createAndFillInContextMenuActions as A}from"../../../../platform/actions/browser/menuEntryActionViewItem.js";import{MenuItemAction as u}from"../../../../platform/actions/common/actions.js";function H(e){return Array.isArray(e.repositories)&&Array.isArray(e.visibleRepositories)}function T(e){return!!e.provider&&!!e.input}function E(e){return!!e.validateInput&&typeof e.value=="string"}function j(e){return e.type==="actionButton"}function m(e){return!!e.provider&&!!e.resources}function G(e){return!!e.sourceUri&&m(e.resourceGroup)}function L(e){return S.isResourceNode(e)&&m(e.context)}function $(e){return e.type==="historyItemViewModel"}function D(e){return e.type==="historyItemLoadMore"}const p=(e,t)=>e instanceof u&&t instanceof u?e.id===t.id&&e.enabled===t.enabled&&e.hideActions?.isHidden===t.hideActions?.isHidden:e.id===t.id&&e.enabled===t.enabled;function f(e,t,o){let n=[],s=[];const c=()=>{const r=[],i=[];C(e,{shouldForwardArgs:!0},{primary:r,secondary:i},o),!(a(n,r,p)&&a(s,i,p))&&(n=r,s=i,t(r,i))};return c(),e.onDidChange(c)}function F(e,t){return f(e,o=>{t.clear(),t.push(o,{icon:!0,label:!1})},"inline")}function N(e){const t=[],o=[];return A(e,{shouldForwardArgs:!0},{primary:t,secondary:o},"inline"),o}class v extends M{constructor(o,n){super(`statusbaraction{${o.id}}`,o.title,"",!0);this.command=o;this.commandService=n;this.tooltip=o.tooltip||""}run(){return this.commandService.executeCommand(this.command.id,...this.command.arguments||[])}}class R extends l{constructor(t,o){super(null,t,{...o,icon:!1,label:!0})}updateLabel(){this.options.label&&this.label&&I(this.label,...d(this.action.label))}}function U(e){return(t,o)=>t instanceof v?new R(t,o):y(e,t,o)}function O(e){return`${e.contextValue}:${e.label}${e.rootUri?`:${e.rootUri.toString()}`:""}`}function q(e){return e.groups.reduce((t,o)=>t+o.resources.length,0)}export{v as StatusBarAction,N as collectContextMenuActions,f as connectPrimaryMenu,F as connectPrimaryMenuToInlineActionBar,U as getActionViewItemProvider,O as getProviderKey,q as getRepositoryResourceCount,j as isSCMActionButton,D as isSCMHistoryItemLoadMoreTreeElement,$ as isSCMHistoryItemViewModelTreeElement,E as isSCMInput,T as isSCMRepository,G as isSCMResource,m as isSCMResourceGroup,L as isSCMResourceNode,H as isSCMViewService};
