import{reset as p}from"../../../../base/browser/dom.js";import"../../../../base/browser/ui/actionbar/actionbar.js";import{ActionViewItem as d}from"../../../../base/browser/ui/actionbar/actionViewItems.js";import{renderLabelWithIcons as l}from"../../../../base/browser/ui/iconLabel/iconLabels.js";import{Action as M}from"../../../../base/common/actions.js";import{equals as u}from"../../../../base/common/arrays.js";import"../../../../base/common/lifecycle.js";import{ResourceTree as S}from"../../../../base/common/resourceTree.js";import"../../../../editor/common/languages.js";import{createActionViewItem as C,createAndFillInActionBarActions as A,createAndFillInContextMenuActions as y}from"../../../../platform/actions/browser/menuEntryActionViewItem.js";import{MenuItemAction as a}from"../../../../platform/actions/common/actions.js";import"../../../../platform/commands/common/commands.js";import"../../../../platform/instantiation/common/instantiation.js";import"../common/history.js";import"../common/scm.js";function oe(e){return Array.isArray(e.repositories)&&Array.isArray(e.visibleRepositories)}function ie(e){return!!e.provider&&!!e.input}function ne(e){return!!e.validateInput&&typeof e.value=="string"}function se(e){return e.type==="actionButton"}function I(e){return!!e.provider&&!!e.resources}function ce(e){return!!e.sourceUri&&I(e.resourceGroup)}function ue(e){return S.isResourceNode(e)&&I(e.context)}function ae(e){return e.type==="historyItemViewModel"}function Ie(e){return e.type==="historyItemLoadMore"}const m=(e,t)=>e instanceof a&&t instanceof a?e.id===t.id&&e.enabled===t.enabled&&e.hideActions?.isHidden===t.hideActions?.isHidden:e.id===t.id&&e.enabled===t.enabled;function f(e,t,r){let n=[],s=[];const c=()=>{const o=[],i=[];A(e,{shouldForwardArgs:!0},{primary:o,secondary:i},r),!(u(n,o,m)&&u(s,i,m))&&(n=o,s=i,t(o,i))};return c(),e.onDidChange(c)}function me(e,t){return f(e,r=>{t.clear(),t.push(r,{icon:!0,label:!1})},"inline")}function pe(e){const t=[],r=[];return y(e,{shouldForwardArgs:!0},{primary:t,secondary:r},"inline"),r}class v extends M{constructor(r,n){super(`statusbaraction{${r.id}}`,r.title,"",!0);this.command=r;this.commandService=n;this.tooltip=r.tooltip||""}run(){return this.commandService.executeCommand(this.command.id,...this.command.arguments||[])}}class R extends d{constructor(t,r){super(null,t,{...r,icon:!1,label:!0})}updateLabel(){this.options.label&&this.label&&p(this.label,...l(this.action.label))}}function de(e){return(t,r)=>t instanceof v?new R(t,r):C(e,t,r)}function le(e){return`${e.contextValue}:${e.label}${e.rootUri?`:${e.rootUri.toString()}`:""}`}function Me(e){return e.groups.reduce((t,r)=>t+r.resources.length,0)}export{v as StatusBarAction,pe as collectContextMenuActions,f as connectPrimaryMenu,me as connectPrimaryMenuToInlineActionBar,de as getActionViewItemProvider,le as getProviderKey,Me as getRepositoryResourceCount,se as isSCMActionButton,Ie as isSCMHistoryItemLoadMoreTreeElement,ae as isSCMHistoryItemViewModelTreeElement,ne as isSCMInput,ie as isSCMRepository,ce as isSCMResource,I as isSCMResourceGroup,ue as isSCMResourceNode,oe as isSCMViewService};
