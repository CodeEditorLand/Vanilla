{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/searchEditor/browser/searchEditor.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from '../../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../../base/browser/keyboardEvent.js';\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { Delayer } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { KeyCode, KeyMod } from '../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertIsDefined } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport './media/searchEditor.css';\nimport { ICodeEditorWidgetOptions } from '../../../../editor/browser/widget/codeEditor/codeEditorWidget.js';\nimport { Position } from '../../../../editor/common/core/position.js';\nimport { Range } from '../../../../editor/common/core/range.js';\nimport { Selection } from '../../../../editor/common/core/selection.js';\nimport { ICodeEditorViewState } from '../../../../editor/common/editorCommon.js';\nimport { IModelService } from '../../../../editor/common/services/model.js';\nimport { ITextResourceConfigurationService } from '../../../../editor/common/services/textResourceConfiguration.js';\nimport { ReferencesController } from '../../../../editor/contrib/gotoSymbol/browser/peek/referencesController.js';\nimport { localize } from '../../../../nls.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKey, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { IEditorProgressService, LongRunningOperation } from '../../../../platform/progress/common/progress.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { inputBorder, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { AbstractTextCodeEditor } from '../../../browser/parts/editor/textCodeEditor.js';\nimport { EditorInputCapabilities, IEditorOpenContext } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { ExcludePatternInputWidget, IncludePatternInputWidget } from '../../search/browser/patternInputWidget.js';\nimport { SearchWidget } from '../../search/browser/searchWidget.js';\nimport { ITextQueryBuilderOptions, QueryBuilder } from '../../../services/search/common/queryBuilder.js';\nimport { getOutOfWorkspaceEditorResources } from '../../search/common/search.js';\nimport { SearchModel, SearchResult } from '../../search/browser/searchModel.js';\nimport { InSearchEditor, SearchEditorID, SearchEditorInputTypeId } from './constants.js';\nimport type { SearchConfiguration, SearchEditorInput } from './searchEditorInput.js';\nimport { serializeSearchResultForEditor } from './searchEditorSerialization.js';\nimport { IEditorGroup, IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\nimport { IPatternInfo, ISearchComplete, ISearchConfigurationProperties, ITextQuery, SearchSortOrder } from '../../../services/search/common/search.js';\nimport { searchDetailsIcon } from '../../search/browser/searchIcons.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { TextSearchCompleteMessage } from '../../../services/search/common/searchExtTypes.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorOptions } from '../../../../platform/editor/common/editor.js';\nimport { renderSearchMessage } from '../../search/browser/searchMessage.js';\nimport { EditorExtensionsRegistry, IEditorContributionDescription } from '../../../../editor/browser/editorExtensions.js';\nimport { UnusualLineTerminatorsDetector } from '../../../../editor/contrib/unusualLineTerminators/browser/unusualLineTerminators.js';\nimport { defaultToggleStyles, getInputBoxStyle } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { SearchContext } from '../../search/common/constants.js';\nimport { getDefaultHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\n\nconst RESULT_LINE_REGEX = /^(\\s+)(\\d+)(: |  )(\\s*)(.*)$/;\nconst FILE_LINE_REGEX = /^(\\S.*):$/;\n\ntype SearchEditorViewState = ICodeEditorViewState & { focused: 'input' | 'editor' };\n\nexport class SearchEditor extends AbstractTextCodeEditor<SearchEditorViewState> {\n\tstatic readonly ID: string = SearchEditorID;\n\n\tstatic readonly SEARCH_EDITOR_VIEW_STATE_PREFERENCE_KEY = 'searchEditorViewState';\n\n\tprivate queryEditorWidget!: SearchWidget;\n\tprivate get searchResultEditor() { return this.editorControl!; }\n\tprivate queryEditorContainer!: HTMLElement;\n\tprivate dimension?: DOM.Dimension;\n\tprivate inputPatternIncludes!: IncludePatternInputWidget;\n\tprivate inputPatternExcludes!: ExcludePatternInputWidget;\n\tprivate includesExcludesContainer!: HTMLElement;\n\tprivate toggleQueryDetailsButton!: HTMLElement;\n\tprivate messageBox!: HTMLElement;\n\n\tprivate runSearchDelayer = new Delayer(0);\n\tprivate pauseSearching: boolean = false;\n\tprivate showingIncludesExcludes: boolean = false;\n\tprivate searchOperation: LongRunningOperation;\n\tprivate searchHistoryDelayer: Delayer<void>;\n\tprivate readonly messageDisposables: DisposableStore;\n\tprivate container: HTMLElement;\n\tprivate searchModel: SearchModel;\n\tprivate ongoingOperations: number = 0;\n\tprivate updatingModelForSearch: boolean = false;\n\n\tconstructor(\n\t\tgroup: IEditorGroup,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IModelService private readonly modelService: IModelService,\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService,\n\t\t@ILabelService private readonly labelService: ILabelService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IContextViewService private readonly contextViewService: IContextViewService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IOpenerService private readonly openerService: IOpenerService,\n\t\t@INotificationService private readonly notificationService: INotificationService,\n\t\t@IEditorProgressService progressService: IEditorProgressService,\n\t\t@ITextResourceConfigurationService textResourceService: ITextResourceConfigurationService,\n\t\t@IEditorGroupsService editorGroupService: IEditorGroupsService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IConfigurationService protected configurationService: IConfigurationService,\n\t\t@IFileService fileService: IFileService,\n\t\t@ILogService private readonly logService: ILogService,\n\t\t@IHoverService private readonly hoverService: IHoverService\n\t) {\n\t\tsuper(SearchEditor.ID, group, telemetryService, instantiationService, storageService, textResourceService, themeService, editorService, editorGroupService, fileService);\n\t\tthis.container = DOM.$('.search-editor');\n\n\t\tthis.searchOperation = this._register(new LongRunningOperation(progressService));\n\t\tthis._register(this.messageDisposables = new DisposableStore());\n\n\t\tthis.searchHistoryDelayer = new Delayer<void>(2000);\n\n\t\tthis.searchModel = this._register(this.instantiationService.createInstance(SearchModel));\n\t}\n\n\tprotected override createEditor(parent: HTMLElement) {\n\t\tDOM.append(parent, this.container);\n\t\tthis.queryEditorContainer = DOM.append(this.container, DOM.$('.query-container'));\n\t\tconst searchResultContainer = DOM.append(this.container, DOM.$('.search-results'));\n\t\tsuper.createEditor(searchResultContainer);\n\t\tthis.registerEditorListeners();\n\n\t\tconst scopedContextKeyService = assertIsDefined(this.scopedContextKeyService);\n\t\tInSearchEditor.bindTo(scopedContextKeyService).set(true);\n\n\t\tthis.createQueryEditor(\n\t\t\tthis.queryEditorContainer,\n\t\t\tthis._register(this.instantiationService.createChild(new ServiceCollection([IContextKeyService, scopedContextKeyService]))),\n\t\t\tSearchContext.InputBoxFocusedKey.bindTo(scopedContextKeyService)\n\t\t);\n\t}\n\n\n\tprivate createQueryEditor(container: HTMLElement, scopedInstantiationService: IInstantiationService, inputBoxFocusedContextKey: IContextKey<boolean>) {\n\t\tconst searchEditorInputboxStyles = getInputBoxStyle({ inputBorder: searchEditorTextInputBorder });\n\n\t\tthis.queryEditorWidget = this._register(scopedInstantiationService.createInstance(SearchWidget, container, { _hideReplaceToggle: true, showContextToggle: true, inputBoxStyles: searchEditorInputboxStyles, toggleStyles: defaultToggleStyles }));\n\t\tthis._register(this.queryEditorWidget.onReplaceToggled(() => this.reLayout()));\n\t\tthis._register(this.queryEditorWidget.onDidHeightChange(() => this.reLayout()));\n\t\tthis._register(this.queryEditorWidget.onSearchSubmit(({ delay }) => this.triggerSearch({ delay })));\n\t\tif (this.queryEditorWidget.searchInput) {\n\t\t\tthis._register(this.queryEditorWidget.searchInput.onDidOptionChange(() => this.triggerSearch({ resetCursor: false })));\n\t\t} else {\n\t\t\tthis.logService.warn('SearchEditor: SearchWidget.searchInput is undefined, cannot register onDidOptionChange listener');\n\t\t}\n\t\tthis._register(this.queryEditorWidget.onDidToggleContext(() => this.triggerSearch({ resetCursor: false })));\n\n\t\t// Includes/Excludes Dropdown\n\t\tthis.includesExcludesContainer = DOM.append(container, DOM.$('.includes-excludes'));\n\n\t\t// Toggle query details button\n\t\tconst toggleQueryDetailsLabel = localize('moreSearch', \"Toggle Search Details\");\n\t\tthis.toggleQueryDetailsButton = DOM.append(this.includesExcludesContainer, DOM.$('.expand' + ThemeIcon.asCSSSelector(searchDetailsIcon), { tabindex: 0, role: 'button', 'aria-label': toggleQueryDetailsLabel }));\n\t\tthis._register(this.hoverService.setupManagedHover(getDefaultHoverDelegate('element'), this.toggleQueryDetailsButton, toggleQueryDetailsLabel));\n\t\tthis._register(DOM.addDisposableListener(this.toggleQueryDetailsButton, DOM.EventType.CLICK, e => {\n\t\t\tDOM.EventHelper.stop(e);\n\t\t\tthis.toggleIncludesExcludes();\n\t\t}));\n\t\tthis._register(DOM.addDisposableListener(this.toggleQueryDetailsButton, DOM.EventType.KEY_UP, (e: KeyboardEvent) => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\tif (event.equals(KeyCode.Enter) || event.equals(KeyCode.Space)) {\n\t\t\t\tDOM.EventHelper.stop(e);\n\t\t\t\tthis.toggleIncludesExcludes();\n\t\t\t}\n\t\t}));\n\t\tthis._register(DOM.addDisposableListener(this.toggleQueryDetailsButton, DOM.EventType.KEY_DOWN, (e: KeyboardEvent) => {\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\tif (event.equals(KeyMod.Shift | KeyCode.Tab)) {\n\t\t\t\tif (this.queryEditorWidget.isReplaceActive()) {\n\t\t\t\t\tthis.queryEditorWidget.focusReplaceAllAction();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.queryEditorWidget.isReplaceShown() ? this.queryEditorWidget.replaceInput?.focusOnPreserve() : this.queryEditorWidget.focusRegexAction();\n\t\t\t\t}\n\t\t\t\tDOM.EventHelper.stop(e);\n\t\t\t}\n\t\t}));\n\n\t\t// Includes\n\t\tconst folderIncludesList = DOM.append(this.includesExcludesContainer, DOM.$('.file-types.includes'));\n\t\tconst filesToIncludeTitle = localize('searchScope.includes', \"files to include\");\n\t\tDOM.append(folderIncludesList, DOM.$('h4', undefined, filesToIncludeTitle));\n\t\tthis.inputPatternIncludes = this._register(scopedInstantiationService.createInstance(IncludePatternInputWidget, folderIncludesList, this.contextViewService, {\n\t\t\tariaLabel: localize('label.includes', 'Search Include Patterns'),\n\t\t\tinputBoxStyles: searchEditorInputboxStyles\n\t\t}));\n\t\tthis.inputPatternIncludes.onSubmit(triggeredOnType => this.triggerSearch({ resetCursor: false, delay: triggeredOnType ? this.searchConfig.searchOnTypeDebouncePeriod : 0 }));\n\t\tthis._register(this.inputPatternIncludes.onChangeSearchInEditorsBox(() => this.triggerSearch()));\n\n\t\t// Excludes\n\t\tconst excludesList = DOM.append(this.includesExcludesContainer, DOM.$('.file-types.excludes'));\n\t\tconst excludesTitle = localize('searchScope.excludes', \"files to exclude\");\n\t\tDOM.append(excludesList, DOM.$('h4', undefined, excludesTitle));\n\t\tthis.inputPatternExcludes = this._register(scopedInstantiationService.createInstance(ExcludePatternInputWidget, excludesList, this.contextViewService, {\n\t\t\tariaLabel: localize('label.excludes', 'Search Exclude Patterns'),\n\t\t\tinputBoxStyles: searchEditorInputboxStyles\n\t\t}));\n\t\tthis.inputPatternExcludes.onSubmit(triggeredOnType => this.triggerSearch({ resetCursor: false, delay: triggeredOnType ? this.searchConfig.searchOnTypeDebouncePeriod : 0 }));\n\t\tthis._register(this.inputPatternExcludes.onChangeIgnoreBox(() => this.triggerSearch()));\n\n\t\t// Messages\n\t\tthis.messageBox = DOM.append(container, DOM.$('.messages.text-search-provider-messages'));\n\n\t\t[this.queryEditorWidget.searchInputFocusTracker, this.queryEditorWidget.replaceInputFocusTracker, this.inputPatternExcludes.inputFocusTracker, this.inputPatternIncludes.inputFocusTracker]\n\t\t\t.forEach(tracker => {\n\t\t\t\tif (!tracker) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis._register(tracker.onDidFocus(() => setTimeout(() => inputBoxFocusedContextKey.set(true), 0)));\n\t\t\t\tthis._register(tracker.onDidBlur(() => inputBoxFocusedContextKey.set(false)));\n\t\t\t});\n\t}\n\n\tprivate toggleRunAgainMessage(show: boolean) {\n\t\tDOM.clearNode(this.messageBox);\n\t\tthis.messageDisposables.clear();\n\n\t\tif (show) {\n\t\t\tconst runAgainLink = DOM.append(this.messageBox, DOM.$('a.pointer.prominent.message', {}, localize('runSearch', \"Run Search\")));\n\t\t\tthis.messageDisposables.add(DOM.addDisposableListener(runAgainLink, DOM.EventType.CLICK, async () => {\n\t\t\t\tawait this.triggerSearch();\n\t\t\t\tthis.searchResultEditor.focus();\n\t\t\t}));\n\t\t}\n\t}\n\n\tprivate _getContributions(): IEditorContributionDescription[] {\n\t\tconst skipContributions = [UnusualLineTerminatorsDetector.ID];\n\t\treturn EditorExtensionsRegistry.getEditorContributions().filter(c => skipContributions.indexOf(c.id) === -1);\n\t}\n\n\tprotected override getCodeEditorWidgetOptions(): ICodeEditorWidgetOptions {\n\t\treturn { contributions: this._getContributions() };\n\t}\n\n\tprivate registerEditorListeners() {\n\t\tthis.searchResultEditor.onMouseUp(e => {\n\t\t\tif (e.event.detail === 1) {\n\t\t\t\tconst behaviour = this.searchConfig.searchEditor.singleClickBehaviour;\n\t\t\t\tconst position = e.target.position;\n\t\t\t\tif (position && behaviour === 'peekDefinition') {\n\t\t\t\t\tconst line = this.searchResultEditor.getModel()?.getLineContent(position.lineNumber) ?? '';\n\t\t\t\t\tif (line.match(FILE_LINE_REGEX) || line.match(RESULT_LINE_REGEX)) {\n\t\t\t\t\t\tthis.searchResultEditor.setSelection(Range.fromPositions(position));\n\t\t\t\t\t\tthis.commandService.executeCommand('editor.action.peekDefinition');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (e.event.detail === 2) {\n\t\t\t\tconst behaviour = this.searchConfig.searchEditor.doubleClickBehaviour;\n\t\t\t\tconst position = e.target.position;\n\t\t\t\tif (position && behaviour !== 'selectWord') {\n\t\t\t\t\tconst line = this.searchResultEditor.getModel()?.getLineContent(position.lineNumber) ?? '';\n\t\t\t\t\tif (line.match(RESULT_LINE_REGEX)) {\n\t\t\t\t\t\tthis.searchResultEditor.setSelection(Range.fromPositions(position));\n\t\t\t\t\t\tthis.commandService.executeCommand(behaviour === 'goToLocation' ? 'editor.action.goToDeclaration' : 'editor.action.openDeclarationToTheSide');\n\t\t\t\t\t} else if (line.match(FILE_LINE_REGEX)) {\n\t\t\t\t\t\tthis.searchResultEditor.setSelection(Range.fromPositions(position));\n\t\t\t\t\t\tthis.commandService.executeCommand('editor.action.peekDefinition');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tthis._register(this.searchResultEditor.onDidChangeModelContent(() => {\n\t\t\tif (!this.updatingModelForSearch) {\n\t\t\t\tthis.getInput()?.setDirty(true);\n\t\t\t}\n\t\t}));\n\t}\n\n\toverride getControl() {\n\t\treturn this.searchResultEditor;\n\t}\n\n\toverride focus() {\n\t\tsuper.focus();\n\n\t\tconst viewState = this.loadEditorViewState(this.getInput());\n\t\tif (viewState && viewState.focused === 'editor') {\n\t\t\tthis.searchResultEditor.focus();\n\t\t} else {\n\t\t\tthis.queryEditorWidget.focus();\n\t\t}\n\t}\n\n\tfocusSearchInput() {\n\t\tthis.queryEditorWidget.searchInput?.focus();\n\t}\n\n\tfocusFilesToIncludeInput() {\n\t\tif (!this.showingIncludesExcludes) {\n\t\t\tthis.toggleIncludesExcludes(true);\n\t\t}\n\t\tthis.inputPatternIncludes.focus();\n\t}\n\n\tfocusFilesToExcludeInput() {\n\t\tif (!this.showingIncludesExcludes) {\n\t\t\tthis.toggleIncludesExcludes(true);\n\t\t}\n\t\tthis.inputPatternExcludes.focus();\n\t}\n\n\tfocusNextInput() {\n\t\tif (this.queryEditorWidget.searchInputHasFocus()) {\n\t\t\tif (this.showingIncludesExcludes) {\n\t\t\t\tthis.inputPatternIncludes.focus();\n\t\t\t} else {\n\t\t\t\tthis.searchResultEditor.focus();\n\t\t\t}\n\t\t} else if (this.inputPatternIncludes.inputHasFocus()) {\n\t\t\tthis.inputPatternExcludes.focus();\n\t\t} else if (this.inputPatternExcludes.inputHasFocus()) {\n\t\t\tthis.searchResultEditor.focus();\n\t\t} else if (this.searchResultEditor.hasWidgetFocus()) {\n\t\t\t// pass\n\t\t}\n\t}\n\n\tfocusPrevInput() {\n\t\tif (this.queryEditorWidget.searchInputHasFocus()) {\n\t\t\tthis.searchResultEditor.focus(); // wrap\n\t\t} else if (this.inputPatternIncludes.inputHasFocus()) {\n\t\t\tthis.queryEditorWidget.searchInput?.focus();\n\t\t} else if (this.inputPatternExcludes.inputHasFocus()) {\n\t\t\tthis.inputPatternIncludes.focus();\n\t\t} else if (this.searchResultEditor.hasWidgetFocus()) {\n\t\t\t// unreachable.\n\t\t}\n\t}\n\n\tsetQuery(query: string) {\n\t\tthis.queryEditorWidget.searchInput?.setValue(query);\n\t}\n\n\tselectQuery() {\n\t\tthis.queryEditorWidget.searchInput?.select();\n\t}\n\n\ttoggleWholeWords() {\n\t\tthis.queryEditorWidget.searchInput?.setWholeWords(!this.queryEditorWidget.searchInput.getWholeWords());\n\t\tthis.triggerSearch({ resetCursor: false });\n\t}\n\n\ttoggleRegex() {\n\t\tthis.queryEditorWidget.searchInput?.setRegex(!this.queryEditorWidget.searchInput.getRegex());\n\t\tthis.triggerSearch({ resetCursor: false });\n\t}\n\n\ttoggleCaseSensitive() {\n\t\tthis.queryEditorWidget.searchInput?.setCaseSensitive(!this.queryEditorWidget.searchInput.getCaseSensitive());\n\t\tthis.triggerSearch({ resetCursor: false });\n\t}\n\n\ttoggleContextLines() {\n\t\tthis.queryEditorWidget.toggleContextLines();\n\t}\n\n\tmodifyContextLines(increase: boolean) {\n\t\tthis.queryEditorWidget.modifyContextLines(increase);\n\t}\n\n\ttoggleQueryDetails(shouldShow?: boolean) {\n\t\tthis.toggleIncludesExcludes(shouldShow);\n\t}\n\n\tdeleteResultBlock() {\n\t\tconst linesToDelete = new Set<number>();\n\n\t\tconst selections = this.searchResultEditor.getSelections();\n\t\tconst model = this.searchResultEditor.getModel();\n\t\tif (!(selections && model)) { return; }\n\n\t\tconst maxLine = model.getLineCount();\n\t\tconst minLine = 1;\n\n\t\tconst deleteUp = (start: number) => {\n\t\t\tfor (let cursor = start; cursor >= minLine; cursor--) {\n\t\t\t\tconst line = model.getLineContent(cursor);\n\t\t\t\tlinesToDelete.add(cursor);\n\t\t\t\tif (line[0] !== undefined && line[0] !== ' ') {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tconst deleteDown = (start: number): number | undefined => {\n\t\t\tlinesToDelete.add(start);\n\t\t\tfor (let cursor = start + 1; cursor <= maxLine; cursor++) {\n\t\t\t\tconst line = model.getLineContent(cursor);\n\t\t\t\tif (line[0] !== undefined && line[0] !== ' ') {\n\t\t\t\t\treturn cursor;\n\t\t\t\t}\n\t\t\t\tlinesToDelete.add(cursor);\n\t\t\t}\n\t\t\treturn;\n\t\t};\n\n\t\tconst endingCursorLines: Array<number | undefined> = [];\n\t\tfor (const selection of selections) {\n\t\t\tconst lineNumber = selection.startLineNumber;\n\t\t\tendingCursorLines.push(deleteDown(lineNumber));\n\t\t\tdeleteUp(lineNumber);\n\t\t\tfor (let inner = selection.startLineNumber; inner <= selection.endLineNumber; inner++) {\n\t\t\t\tlinesToDelete.add(inner);\n\t\t\t}\n\t\t}\n\n\t\tif (endingCursorLines.length === 0) { endingCursorLines.push(1); }\n\n\t\tconst isDefined = <T>(x: T | undefined): x is T => x !== undefined;\n\n\t\tmodel.pushEditOperations(this.searchResultEditor.getSelections(),\n\t\t\t[...linesToDelete].map(line => ({ range: new Range(line, 1, line + 1, 1), text: '' })),\n\t\t\t() => endingCursorLines.filter(isDefined).map(line => new Selection(line, 1, line, 1)));\n\t}\n\n\tcleanState() {\n\t\tthis.getInput()?.setDirty(false);\n\t}\n\n\tprivate get searchConfig(): ISearchConfigurationProperties {\n\t\treturn this.configurationService.getValue<ISearchConfigurationProperties>('search');\n\t}\n\n\tprivate iterateThroughMatches(reverse: boolean) {\n\t\tconst model = this.searchResultEditor.getModel();\n\t\tif (!model) { return; }\n\n\t\tconst lastLine = model.getLineCount() ?? 1;\n\t\tconst lastColumn = model.getLineLength(lastLine);\n\n\t\tconst fallbackStart = reverse ? new Position(lastLine, lastColumn) : new Position(1, 1);\n\n\t\tconst currentPosition = this.searchResultEditor.getSelection()?.getStartPosition() ?? fallbackStart;\n\n\t\tconst matchRanges = this.getInput()?.getMatchRanges();\n\t\tif (!matchRanges) { return; }\n\n\t\tconst matchRange = (reverse ? findPrevRange : findNextRange)(matchRanges, currentPosition);\n\n\t\tthis.searchResultEditor.setSelection(matchRange);\n\t\tthis.searchResultEditor.revealLineInCenterIfOutsideViewport(matchRange.startLineNumber);\n\t\tthis.searchResultEditor.focus();\n\n\t\tconst matchLineText = model.getLineContent(matchRange.startLineNumber);\n\t\tconst matchText = model.getValueInRange(matchRange);\n\t\tlet file = '';\n\t\tfor (let line = matchRange.startLineNumber; line >= 1; line--) {\n\t\t\tconst lineText = model.getValueInRange(new Range(line, 1, line, 2));\n\t\t\tif (lineText !== ' ') { file = model.getLineContent(line); break; }\n\t\t}\n\t\talert(localize('searchResultItem', \"Matched {0} at {1} in file {2}\", matchText, matchLineText, file.slice(0, file.length - 1)));\n\t}\n\n\tfocusNextResult() {\n\t\tthis.iterateThroughMatches(false);\n\t}\n\n\tfocusPreviousResult() {\n\t\tthis.iterateThroughMatches(true);\n\t}\n\n\tfocusAllResults() {\n\t\tthis.searchResultEditor\n\t\t\t.setSelections((this.getInput()?.getMatchRanges() ?? []).map(\n\t\t\t\trange => new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn)));\n\t\tthis.searchResultEditor.focus();\n\t}\n\n\tasync triggerSearch(_options?: { resetCursor?: boolean; delay?: number; focusResults?: boolean }) {\n\t\tconst focusResults = this.searchConfig.searchEditor.focusResultsOnSearch;\n\n\t\t// If _options don't define focusResult field, then use the setting\n\t\tif (_options === undefined) {\n\t\t\t_options = { focusResults: focusResults };\n\t\t} else if (_options.focusResults === undefined) {\n\t\t\t_options.focusResults = focusResults;\n\t\t}\n\n\t\tconst options = { resetCursor: true, delay: 0, ..._options };\n\n\t\tif (!(this.queryEditorWidget.searchInput?.inputBox.isInputValid())) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.pauseSearching) {\n\t\t\tawait this.runSearchDelayer.trigger(async () => {\n\t\t\t\tthis.toggleRunAgainMessage(false);\n\t\t\t\tawait this.doRunSearch();\n\t\t\t\tif (options.resetCursor) {\n\t\t\t\t\tthis.searchResultEditor.setPosition(new Position(1, 1));\n\t\t\t\t\tthis.searchResultEditor.setScrollPosition({ scrollTop: 0, scrollLeft: 0 });\n\t\t\t\t}\n\t\t\t\tif (options.focusResults) {\n\t\t\t\t\tthis.searchResultEditor.focus();\n\t\t\t\t}\n\t\t\t}, options.delay);\n\t\t}\n\t}\n\n\tprivate readConfigFromWidget(): SearchConfiguration {\n\t\treturn {\n\t\t\tisCaseSensitive: this.queryEditorWidget.searchInput?.getCaseSensitive() ?? false,\n\t\t\tcontextLines: this.queryEditorWidget.getContextLines(),\n\t\t\tfilesToExclude: this.inputPatternExcludes.getValue(),\n\t\t\tfilesToInclude: this.inputPatternIncludes.getValue(),\n\t\t\tquery: this.queryEditorWidget.searchInput?.getValue() ?? '',\n\t\t\tisRegexp: this.queryEditorWidget.searchInput?.getRegex() ?? false,\n\t\t\tmatchWholeWord: this.queryEditorWidget.searchInput?.getWholeWords() ?? false,\n\t\t\tuseExcludeSettingsAndIgnoreFiles: this.inputPatternExcludes.useExcludesAndIgnoreFiles(),\n\t\t\tonlyOpenEditors: this.inputPatternIncludes.onlySearchInOpenEditors(),\n\t\t\tshowIncludesExcludes: this.showingIncludesExcludes,\n\t\t\tnotebookSearchConfig: {\n\t\t\t\tincludeMarkupInput: this.queryEditorWidget.getNotebookFilters().markupInput,\n\t\t\t\tincludeMarkupPreview: this.queryEditorWidget.getNotebookFilters().markupPreview,\n\t\t\t\tincludeCodeInput: this.queryEditorWidget.getNotebookFilters().codeInput,\n\t\t\t\tincludeOutput: this.queryEditorWidget.getNotebookFilters().codeOutput,\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate async doRunSearch() {\n\t\tthis.searchModel.cancelSearch(true);\n\n\t\tconst startInput = this.getInput();\n\t\tif (!startInput) { return; }\n\n\t\tthis.searchHistoryDelayer.trigger(() => {\n\t\t\tthis.queryEditorWidget.searchInput?.onSearchSubmit();\n\t\t\tthis.inputPatternExcludes.onSearchSubmit();\n\t\t\tthis.inputPatternIncludes.onSearchSubmit();\n\t\t});\n\n\t\tconst config = this.readConfigFromWidget();\n\n\t\tif (!config.query) { return; }\n\n\t\tconst content: IPatternInfo = {\n\t\t\tpattern: config.query,\n\t\t\tisRegExp: config.isRegexp,\n\t\t\tisCaseSensitive: config.isCaseSensitive,\n\t\t\tisWordMatch: config.matchWholeWord,\n\t\t};\n\n\t\tconst options: ITextQueryBuilderOptions = {\n\t\t\t_reason: 'searchEditor',\n\t\t\textraFileResources: this.instantiationService.invokeFunction(getOutOfWorkspaceEditorResources),\n\t\t\tmaxResults: this.searchConfig.maxResults ?? undefined,\n\t\t\tdisregardIgnoreFiles: !config.useExcludeSettingsAndIgnoreFiles || undefined,\n\t\t\tdisregardExcludeSettings: !config.useExcludeSettingsAndIgnoreFiles || undefined,\n\t\t\texcludePattern: [{ pattern: config.filesToExclude }],\n\t\t\tincludePattern: config.filesToInclude,\n\t\t\tonlyOpenEditors: config.onlyOpenEditors,\n\t\t\tpreviewOptions: {\n\t\t\t\tmatchLines: 1,\n\t\t\t\tcharsPerLine: 1000\n\t\t\t},\n\t\t\tsurroundingContext: config.contextLines,\n\t\t\tisSmartCase: this.searchConfig.smartCase,\n\t\t\texpandPatterns: true,\n\t\t\tnotebookSearchConfig: {\n\t\t\t\tincludeMarkupInput: config.notebookSearchConfig.includeMarkupInput,\n\t\t\t\tincludeMarkupPreview: config.notebookSearchConfig.includeMarkupPreview,\n\t\t\t\tincludeCodeInput: config.notebookSearchConfig.includeCodeInput,\n\t\t\t\tincludeOutput: config.notebookSearchConfig.includeOutput,\n\t\t\t}\n\t\t};\n\n\t\tconst folderResources = this.contextService.getWorkspace().folders;\n\t\tlet query: ITextQuery;\n\t\ttry {\n\t\t\tconst queryBuilder = this.instantiationService.createInstance(QueryBuilder);\n\t\t\tquery = queryBuilder.text(content, folderResources.map(folder => folder.uri), options);\n\t\t}\n\t\tcatch (err) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.searchOperation.start(500);\n\t\tthis.ongoingOperations++;\n\n\t\tconst { configurationModel } = await startInput.resolveModels();\n\t\tconfigurationModel.updateConfig(config);\n\t\tconst result = this.searchModel.search(query);\n\t\tstartInput.ongoingSearchOperation = result.asyncResults.finally(() => {\n\t\t\tthis.ongoingOperations--;\n\t\t\tif (this.ongoingOperations === 0) {\n\t\t\t\tthis.searchOperation.stop();\n\t\t\t}\n\t\t});\n\n\t\tconst searchOperation = await startInput.ongoingSearchOperation;\n\t\tawait this.onSearchComplete(searchOperation, config, startInput);\n\t}\n\n\tprivate async onSearchComplete(searchOperation: ISearchComplete, startConfig: SearchConfiguration, startInput: SearchEditorInput) {\n\t\tconst input = this.getInput();\n\t\tif (!input ||\n\t\t\tinput !== startInput ||\n\t\t\tJSON.stringify(startConfig) !== JSON.stringify(this.readConfigFromWidget())) {\n\t\t\treturn;\n\t\t}\n\n\t\tinput.ongoingSearchOperation = undefined;\n\n\t\tconst sortOrder = this.searchConfig.sortOrder;\n\t\tif (sortOrder === SearchSortOrder.Modified) {\n\t\t\tawait this.retrieveFileStats(this.searchModel.searchResult);\n\t\t}\n\n\t\tconst controller = ReferencesController.get(this.searchResultEditor);\n\t\tcontroller?.closeWidget(false);\n\t\tconst labelFormatter = (uri: URI): string => this.labelService.getUriLabel(uri, { relative: true });\n\t\tconst results = serializeSearchResultForEditor(this.searchModel.searchResult, startConfig.filesToInclude, startConfig.filesToExclude, startConfig.contextLines, labelFormatter, sortOrder, searchOperation?.limitHit);\n\t\tconst { resultsModel } = await input.resolveModels();\n\t\tthis.updatingModelForSearch = true;\n\t\tthis.modelService.updateModel(resultsModel, results.text);\n\t\tthis.updatingModelForSearch = false;\n\n\t\tif (searchOperation && searchOperation.messages) {\n\t\t\tfor (const message of searchOperation.messages) {\n\t\t\t\tthis.addMessage(message);\n\t\t\t}\n\t\t}\n\t\tthis.reLayout();\n\n\t\tinput.setDirty(!input.hasCapability(EditorInputCapabilities.Untitled));\n\t\tinput.setMatchRanges(results.matchRanges);\n\t}\n\n\tprivate addMessage(message: TextSearchCompleteMessage) {\n\t\tlet messageBox: HTMLElement;\n\t\tif (this.messageBox.firstChild) {\n\t\t\tmessageBox = this.messageBox.firstChild as HTMLElement;\n\t\t} else {\n\t\t\tmessageBox = DOM.append(this.messageBox, DOM.$('.message'));\n\t\t}\n\n\t\tDOM.append(messageBox, renderSearchMessage(message, this.instantiationService, this.notificationService, this.openerService, this.commandService, this.messageDisposables, () => this.triggerSearch()));\n\t}\n\n\tprivate async retrieveFileStats(searchResult: SearchResult): Promise<void> {\n\t\tconst files = searchResult.matches().filter(f => !f.fileStat).map(f => f.resolveFileStat(this.fileService));\n\t\tawait Promise.all(files);\n\t}\n\n\toverride layout(dimension: DOM.Dimension) {\n\t\tthis.dimension = dimension;\n\t\tthis.reLayout();\n\t}\n\n\tgetSelected() {\n\t\tconst selection = this.searchResultEditor.getSelection();\n\t\tif (selection) {\n\t\t\treturn this.searchResultEditor.getModel()?.getValueInRange(selection) ?? '';\n\t\t}\n\t\treturn '';\n\t}\n\n\tprivate reLayout() {\n\t\tif (this.dimension) {\n\t\t\tthis.queryEditorWidget.setWidth(this.dimension.width - 28 /* container margin */);\n\t\t\tthis.searchResultEditor.layout({ height: this.dimension.height - DOM.getTotalHeight(this.queryEditorContainer), width: this.dimension.width });\n\t\t\tthis.inputPatternExcludes.setWidth(this.dimension.width - 28 /* container margin */);\n\t\t\tthis.inputPatternIncludes.setWidth(this.dimension.width - 28 /* container margin */);\n\t\t}\n\t}\n\n\tprivate getInput(): SearchEditorInput | undefined {\n\t\treturn this.input as SearchEditorInput;\n\t}\n\n\tprivate priorConfig: Partial<Readonly<SearchConfiguration>> | undefined;\n\tsetSearchConfig(config: Partial<Readonly<SearchConfiguration>>) {\n\t\tthis.priorConfig = config;\n\t\tif (config.query !== undefined) { this.queryEditorWidget.setValue(config.query); }\n\t\tif (config.isCaseSensitive !== undefined) { this.queryEditorWidget.searchInput?.setCaseSensitive(config.isCaseSensitive); }\n\t\tif (config.isRegexp !== undefined) { this.queryEditorWidget.searchInput?.setRegex(config.isRegexp); }\n\t\tif (config.matchWholeWord !== undefined) { this.queryEditorWidget.searchInput?.setWholeWords(config.matchWholeWord); }\n\t\tif (config.contextLines !== undefined) { this.queryEditorWidget.setContextLines(config.contextLines); }\n\t\tif (config.filesToExclude !== undefined) { this.inputPatternExcludes.setValue(config.filesToExclude); }\n\t\tif (config.filesToInclude !== undefined) { this.inputPatternIncludes.setValue(config.filesToInclude); }\n\t\tif (config.onlyOpenEditors !== undefined) { this.inputPatternIncludes.setOnlySearchInOpenEditors(config.onlyOpenEditors); }\n\t\tif (config.useExcludeSettingsAndIgnoreFiles !== undefined) { this.inputPatternExcludes.setUseExcludesAndIgnoreFiles(config.useExcludeSettingsAndIgnoreFiles); }\n\t\tif (config.showIncludesExcludes !== undefined) { this.toggleIncludesExcludes(config.showIncludesExcludes); }\n\t}\n\n\toverride async setInput(newInput: SearchEditorInput, options: IEditorOptions | undefined, context: IEditorOpenContext, token: CancellationToken): Promise<void> {\n\t\tawait super.setInput(newInput, options, context, token);\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { configurationModel, resultsModel } = await newInput.resolveModels();\n\t\tif (token.isCancellationRequested) { return; }\n\n\t\tthis.searchResultEditor.setModel(resultsModel);\n\t\tthis.pauseSearching = true;\n\n\t\tthis.toggleRunAgainMessage(!newInput.ongoingSearchOperation && resultsModel.getLineCount() === 1 && resultsModel.getValueLength() === 0 && configurationModel.config.query !== '');\n\n\t\tthis.setSearchConfig(configurationModel.config);\n\n\t\tthis._register(configurationModel.onConfigDidUpdate(newConfig => {\n\t\t\tif (newConfig !== this.priorConfig) {\n\t\t\t\tthis.pauseSearching = true;\n\t\t\t\tthis.setSearchConfig(newConfig);\n\t\t\t\tthis.pauseSearching = false;\n\t\t\t}\n\t\t}));\n\n\t\tthis.restoreViewState(context);\n\n\t\tif (!options?.preserveFocus) {\n\t\t\tthis.focus();\n\t\t}\n\n\t\tthis.pauseSearching = false;\n\n\t\tif (newInput.ongoingSearchOperation) {\n\t\t\tconst existingConfig = this.readConfigFromWidget();\n\t\t\tnewInput.ongoingSearchOperation.then(complete => {\n\t\t\t\tthis.onSearchComplete(complete, existingConfig, newInput);\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate toggleIncludesExcludes(_shouldShow?: boolean): void {\n\t\tconst cls = 'expanded';\n\t\tconst shouldShow = _shouldShow ?? !this.includesExcludesContainer.classList.contains(cls);\n\n\t\tif (shouldShow) {\n\t\t\tthis.toggleQueryDetailsButton.setAttribute('aria-expanded', 'true');\n\t\t\tthis.includesExcludesContainer.classList.add(cls);\n\t\t} else {\n\t\t\tthis.toggleQueryDetailsButton.setAttribute('aria-expanded', 'false');\n\t\t\tthis.includesExcludesContainer.classList.remove(cls);\n\t\t}\n\n\t\tthis.showingIncludesExcludes = this.includesExcludesContainer.classList.contains(cls);\n\n\t\tthis.reLayout();\n\t}\n\n\tprotected override toEditorViewStateResource(input: EditorInput): URI | undefined {\n\t\tif (input.typeId === SearchEditorInputTypeId) {\n\t\t\treturn (input as SearchEditorInput).modelUri;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprotected override computeEditorViewState(resource: URI): SearchEditorViewState | undefined {\n\t\tconst control = this.getControl();\n\t\tconst editorViewState = control.saveViewState();\n\t\tif (!editorViewState) { return undefined; }\n\t\tif (resource.toString() !== this.getInput()?.modelUri.toString()) { return undefined; }\n\n\t\treturn { ...editorViewState, focused: this.searchResultEditor.hasWidgetFocus() ? 'editor' : 'input' };\n\t}\n\n\tprotected tracksEditorViewState(input: EditorInput): boolean {\n\t\treturn input.typeId === SearchEditorInputTypeId;\n\t}\n\n\tprivate restoreViewState(context: IEditorOpenContext) {\n\t\tconst viewState = this.loadEditorViewState(this.getInput(), context);\n\t\tif (viewState) { this.searchResultEditor.restoreViewState(viewState); }\n\t}\n\n\tgetAriaLabel() {\n\t\treturn this.getInput()?.getName() ?? localize('searchEditor', \"Search\");\n\t}\n}\n\nconst searchEditorTextInputBorder = registerColor('searchEditor.textInputBorder', inputBorder, localize('textInputBoxBorder', \"Search editor text input box border.\"));\n\nfunction findNextRange(matchRanges: Range[], currentPosition: Position) {\n\tfor (const matchRange of matchRanges) {\n\t\tif (Position.isBefore(currentPosition, matchRange.getStartPosition())) {\n\t\t\treturn matchRange;\n\t\t}\n\t}\n\treturn matchRanges[0];\n}\n\nfunction findPrevRange(matchRanges: Range[], currentPosition: Position) {\n\tfor (let i = matchRanges.length - 1; i >= 0; i--) {\n\t\tconst matchRange = matchRanges[i];\n\t\tif (Position.isBefore(matchRange.getStartPosition(), currentPosition)) {\n\t\t\t{\n\t\t\t\treturn matchRange;\n\t\t\t}\n\t\t}\n\t}\n\treturn matchRanges[matchRanges.length - 1];\n}\n"],
  "mappings": ";;;;;;;;;;;;AAKA,YAAY,SAAS;AACrB,SAAS,6BAA6B;AACtC,SAAS,aAAa;AACtB,SAAS,eAAe;AACxB,SAAS,yBAAyB;AAClC,SAAS,SAAS,cAAc;AAChC,SAAS,uBAAuB;AAChC,SAAS,uBAAuB;AAChC,SAAS,WAAW;AACpB,OAAO;AACP,SAAS,gCAAgC;AACzC,SAAS,gBAAgB;AACzB,SAAS,aAAa;AACtB,SAAS,iBAAiB;AAC1B,SAAS,4BAA4B;AACrC,SAAS,qBAAqB;AAC9B,SAAS,yCAAyC;AAClD,SAAS,4BAA4B;AACrC,SAAS,gBAAgB;AACzB,SAAS,uBAAuB;AAChC,SAAS,6BAA6B;AACtC,SAAS,aAAa,0BAA0B;AAChD,SAAS,2BAA2B;AACpC,SAAS,6BAA6B;AACtC,SAAS,yBAAyB;AAClC,SAAS,qBAAqB;AAC9B,SAAS,wBAAwB,4BAA4B;AAC7D,SAAS,uBAAuB;AAChC,SAAS,yBAAyB;AAClC,SAAS,aAAa,qBAAqB;AAC3C,SAAS,qBAAqB;AAC9B,SAAS,iBAAiB;AAC1B,SAAS,gCAAgC;AACzC,SAAS,8BAA8B;AACvC,SAAS,yBAAyB,0BAA0B;AAC5D,SAAS,mBAAmB;AAC5B,SAAS,2BAA2B,iCAAiC;AACrE,SAAS,oBAAoB;AAC7B,SAAS,0BAA0B,oBAAoB;AACvD,SAAS,wCAAwC;AACjD,SAAS,aAAa,oBAAoB;AAC1C,SAAS,gBAAgB,gBAAgB,+BAA+B;AAExE,SAAS,sCAAsC;AAC/C,SAAS,cAAc,4BAA4B;AACnD,SAAS,sBAAsB;AAC/B,SAAS,cAAc,iBAAiB,gCAAgC,YAAY,uBAAuB;AAC3G,SAAS,yBAAyB;AAClC,SAAS,oBAAoB;AAC7B,SAAS,sBAAsB;AAC/B,SAAS,iCAAiC;AAC1C,SAAS,4BAA4B;AACrC,SAAS,sBAAsB;AAC/B,SAAS,2BAA2B;AACpC,SAAS,0BAA0B,sCAAsC;AACzE,SAAS,sCAAsC;AAC/C,SAAS,qBAAqB,wBAAwB;AACtD,SAAS,mBAAmB;AAC5B,SAAS,qBAAqB;AAC9B,SAAS,+BAA+B;AACxC,SAAS,qBAAqB;AAE9B,MAAM,oBAAoB;AAC1B,MAAM,kBAAkB;AAIjB,IAAM,eAAN,cAA2B,uBAA8C;AAAA,EA0B/E,YACC,OACmB,kBACJ,cACE,gBACe,cACW,gBACX,cACT,sBACe,oBACJ,gBACD,eACM,qBACf,iBACW,qBACb,oBACN,eACiB,sBACnB,aACgB,YACE,cAC/B;AACD,UAAM,aAAa,IAAI,OAAO,kBAAkB,sBAAsB,gBAAgB,qBAAqB,cAAc,eAAe,oBAAoB,WAAW;AAjBvI;AACW;AACX;AAEM;AACJ;AACD;AACM;AAKN;AAEH;AACE;AAGhC,SAAK,YAAY,IAAI,EAAE,gBAAgB;AAEvC,SAAK,kBAAkB,KAAK,UAAU,IAAI,qBAAqB,eAAe,CAAC;AAC/E,SAAK,UAAU,KAAK,qBAAqB,IAAI,gBAAgB,CAAC;AAE9D,SAAK,uBAAuB,IAAI,QAAc,GAAI;AAElD,SAAK,cAAc,KAAK,UAAU,KAAK,qBAAqB,eAAe,WAAW,CAAC;AAAA,EACxF;AAAA,EAjID,OAwEgF;AAAA;AAAA;AAAA,EAC/E,OAAgB,KAAa;AAAA,EAE7B,OAAgB,0CAA0C;AAAA,EAElD;AAAA,EACR,IAAY,qBAAqB;AAAE,WAAO,KAAK;AAAA,EAAgB;AAAA,EACvD;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EAEA,mBAAmB,IAAI,QAAQ,CAAC;AAAA,EAChC,iBAA0B;AAAA,EAC1B,0BAAmC;AAAA,EACnC;AAAA,EACA;AAAA,EACS;AAAA,EACT;AAAA,EACA;AAAA,EACA,oBAA4B;AAAA,EAC5B,yBAAkC;AAAA,EAmCvB,aAAa,QAAqB;AACpD,QAAI,OAAO,QAAQ,KAAK,SAAS;AACjC,SAAK,uBAAuB,IAAI,OAAO,KAAK,WAAW,IAAI,EAAE,kBAAkB,CAAC;AAChF,UAAM,wBAAwB,IAAI,OAAO,KAAK,WAAW,IAAI,EAAE,iBAAiB,CAAC;AACjF,UAAM,aAAa,qBAAqB;AACxC,SAAK,wBAAwB;AAE7B,UAAM,0BAA0B,gBAAgB,KAAK,uBAAuB;AAC5E,mBAAe,OAAO,uBAAuB,EAAE,IAAI,IAAI;AAEvD,SAAK;AAAA,MACJ,KAAK;AAAA,MACL,KAAK,UAAU,KAAK,qBAAqB,YAAY,IAAI,kBAAkB,CAAC,oBAAoB,uBAAuB,CAAC,CAAC,CAAC;AAAA,MAC1H,cAAc,mBAAmB,OAAO,uBAAuB;AAAA,IAChE;AAAA,EACD;AAAA,EAGQ,kBAAkB,WAAwB,4BAAmD,2BAAiD;AACrJ,UAAM,6BAA6B,iBAAiB,EAAE,aAAa,4BAA4B,CAAC;AAEhG,SAAK,oBAAoB,KAAK,UAAU,2BAA2B,eAAe,cAAc,WAAW,EAAE,oBAAoB,MAAM,mBAAmB,MAAM,gBAAgB,4BAA4B,cAAc,oBAAoB,CAAC,CAAC;AAChP,SAAK,UAAU,KAAK,kBAAkB,iBAAiB,MAAM,KAAK,SAAS,CAAC,CAAC;AAC7E,SAAK,UAAU,KAAK,kBAAkB,kBAAkB,MAAM,KAAK,SAAS,CAAC,CAAC;AAC9E,SAAK,UAAU,KAAK,kBAAkB,eAAe,CAAC,EAAE,MAAM,MAAM,KAAK,cAAc,EAAE,MAAM,CAAC,CAAC,CAAC;AAClG,QAAI,KAAK,kBAAkB,aAAa;AACvC,WAAK,UAAU,KAAK,kBAAkB,YAAY,kBAAkB,MAAM,KAAK,cAAc,EAAE,aAAa,MAAM,CAAC,CAAC,CAAC;AAAA,IACtH,OAAO;AACN,WAAK,WAAW,KAAK,iGAAiG;AAAA,IACvH;AACA,SAAK,UAAU,KAAK,kBAAkB,mBAAmB,MAAM,KAAK,cAAc,EAAE,aAAa,MAAM,CAAC,CAAC,CAAC;AAG1G,SAAK,4BAA4B,IAAI,OAAO,WAAW,IAAI,EAAE,oBAAoB,CAAC;AAGlF,UAAM,0BAA0B,SAAS,cAAc,uBAAuB;AAC9E,SAAK,2BAA2B,IAAI,OAAO,KAAK,2BAA2B,IAAI,EAAE,YAAY,UAAU,cAAc,iBAAiB,GAAG,EAAE,UAAU,GAAG,MAAM,UAAU,cAAc,wBAAwB,CAAC,CAAC;AAChN,SAAK,UAAU,KAAK,aAAa,kBAAkB,wBAAwB,SAAS,GAAG,KAAK,0BAA0B,uBAAuB,CAAC;AAC9I,SAAK,UAAU,IAAI,sBAAsB,KAAK,0BAA0B,IAAI,UAAU,OAAO,OAAK;AACjG,UAAI,YAAY,KAAK,CAAC;AACtB,WAAK,uBAAuB;AAAA,IAC7B,CAAC,CAAC;AACF,SAAK,UAAU,IAAI,sBAAsB,KAAK,0BAA0B,IAAI,UAAU,QAAQ,CAAC,MAAqB;AACnH,YAAM,QAAQ,IAAI,sBAAsB,CAAC;AACzC,UAAI,MAAM,OAAO,QAAQ,KAAK,KAAK,MAAM,OAAO,QAAQ,KAAK,GAAG;AAC/D,YAAI,YAAY,KAAK,CAAC;AACtB,aAAK,uBAAuB;AAAA,MAC7B;AAAA,IACD,CAAC,CAAC;AACF,SAAK,UAAU,IAAI,sBAAsB,KAAK,0BAA0B,IAAI,UAAU,UAAU,CAAC,MAAqB;AACrH,YAAM,QAAQ,IAAI,sBAAsB,CAAC;AACzC,UAAI,MAAM,OAAO,OAAO,QAAQ,QAAQ,GAAG,GAAG;AAC7C,YAAI,KAAK,kBAAkB,gBAAgB,GAAG;AAC7C,eAAK,kBAAkB,sBAAsB;AAAA,QAC9C,OACK;AACJ,eAAK,kBAAkB,eAAe,IAAI,KAAK,kBAAkB,cAAc,gBAAgB,IAAI,KAAK,kBAAkB,iBAAiB;AAAA,QAC5I;AACA,YAAI,YAAY,KAAK,CAAC;AAAA,MACvB;AAAA,IACD,CAAC,CAAC;AAGF,UAAM,qBAAqB,IAAI,OAAO,KAAK,2BAA2B,IAAI,EAAE,sBAAsB,CAAC;AACnG,UAAM,sBAAsB,SAAS,wBAAwB,kBAAkB;AAC/E,QAAI,OAAO,oBAAoB,IAAI,EAAE,MAAM,QAAW,mBAAmB,CAAC;AAC1E,SAAK,uBAAuB,KAAK,UAAU,2BAA2B,eAAe,2BAA2B,oBAAoB,KAAK,oBAAoB;AAAA,MAC5J,WAAW,SAAS,kBAAkB,yBAAyB;AAAA,MAC/D,gBAAgB;AAAA,IACjB,CAAC,CAAC;AACF,SAAK,qBAAqB,SAAS,qBAAmB,KAAK,cAAc,EAAE,aAAa,OAAO,OAAO,kBAAkB,KAAK,aAAa,6BAA6B,EAAE,CAAC,CAAC;AAC3K,SAAK,UAAU,KAAK,qBAAqB,2BAA2B,MAAM,KAAK,cAAc,CAAC,CAAC;AAG/F,UAAM,eAAe,IAAI,OAAO,KAAK,2BAA2B,IAAI,EAAE,sBAAsB,CAAC;AAC7F,UAAM,gBAAgB,SAAS,wBAAwB,kBAAkB;AACzE,QAAI,OAAO,cAAc,IAAI,EAAE,MAAM,QAAW,aAAa,CAAC;AAC9D,SAAK,uBAAuB,KAAK,UAAU,2BAA2B,eAAe,2BAA2B,cAAc,KAAK,oBAAoB;AAAA,MACtJ,WAAW,SAAS,kBAAkB,yBAAyB;AAAA,MAC/D,gBAAgB;AAAA,IACjB,CAAC,CAAC;AACF,SAAK,qBAAqB,SAAS,qBAAmB,KAAK,cAAc,EAAE,aAAa,OAAO,OAAO,kBAAkB,KAAK,aAAa,6BAA6B,EAAE,CAAC,CAAC;AAC3K,SAAK,UAAU,KAAK,qBAAqB,kBAAkB,MAAM,KAAK,cAAc,CAAC,CAAC;AAGtF,SAAK,aAAa,IAAI,OAAO,WAAW,IAAI,EAAE,yCAAyC,CAAC;AAExF,KAAC,KAAK,kBAAkB,yBAAyB,KAAK,kBAAkB,0BAA0B,KAAK,qBAAqB,mBAAmB,KAAK,qBAAqB,iBAAiB,EACxL,QAAQ,aAAW;AACnB,UAAI,CAAC,SAAS;AACb;AAAA,MACD;AACA,WAAK,UAAU,QAAQ,WAAW,MAAM,WAAW,MAAM,0BAA0B,IAAI,IAAI,GAAG,CAAC,CAAC,CAAC;AACjG,WAAK,UAAU,QAAQ,UAAU,MAAM,0BAA0B,IAAI,KAAK,CAAC,CAAC;AAAA,IAC7E,CAAC;AAAA,EACH;AAAA,EAEQ,sBAAsB,MAAe;AAC5C,QAAI,UAAU,KAAK,UAAU;AAC7B,SAAK,mBAAmB,MAAM;AAE9B,QAAI,MAAM;AACT,YAAM,eAAe,IAAI,OAAO,KAAK,YAAY,IAAI,EAAE,+BAA+B,CAAC,GAAG,SAAS,aAAa,YAAY,CAAC,CAAC;AAC9H,WAAK,mBAAmB,IAAI,IAAI,sBAAsB,cAAc,IAAI,UAAU,OAAO,YAAY;AACpG,cAAM,KAAK,cAAc;AACzB,aAAK,mBAAmB,MAAM;AAAA,MAC/B,CAAC,CAAC;AAAA,IACH;AAAA,EACD;AAAA,EAEQ,oBAAsD;AAC7D,UAAM,oBAAoB,CAAC,+BAA+B,EAAE;AAC5D,WAAO,yBAAyB,uBAAuB,EAAE,OAAO,OAAK,kBAAkB,QAAQ,EAAE,EAAE,MAAM,EAAE;AAAA,EAC5G;AAAA,EAEmB,6BAAuD;AACzE,WAAO,EAAE,eAAe,KAAK,kBAAkB,EAAE;AAAA,EAClD;AAAA,EAEQ,0BAA0B;AACjC,SAAK,mBAAmB,UAAU,OAAK;AACtC,UAAI,EAAE,MAAM,WAAW,GAAG;AACzB,cAAM,YAAY,KAAK,aAAa,aAAa;AACjD,cAAM,WAAW,EAAE,OAAO;AAC1B,YAAI,YAAY,cAAc,kBAAkB;AAC/C,gBAAM,OAAO,KAAK,mBAAmB,SAAS,GAAG,eAAe,SAAS,UAAU,KAAK;AACxF,cAAI,KAAK,MAAM,eAAe,KAAK,KAAK,MAAM,iBAAiB,GAAG;AACjE,iBAAK,mBAAmB,aAAa,MAAM,cAAc,QAAQ,CAAC;AAClE,iBAAK,eAAe,eAAe,8BAA8B;AAAA,UAClE;AAAA,QACD;AAAA,MACD,WAAW,EAAE,MAAM,WAAW,GAAG;AAChC,cAAM,YAAY,KAAK,aAAa,aAAa;AACjD,cAAM,WAAW,EAAE,OAAO;AAC1B,YAAI,YAAY,cAAc,cAAc;AAC3C,gBAAM,OAAO,KAAK,mBAAmB,SAAS,GAAG,eAAe,SAAS,UAAU,KAAK;AACxF,cAAI,KAAK,MAAM,iBAAiB,GAAG;AAClC,iBAAK,mBAAmB,aAAa,MAAM,cAAc,QAAQ,CAAC;AAClE,iBAAK,eAAe,eAAe,cAAc,iBAAiB,kCAAkC,wCAAwC;AAAA,UAC7I,WAAW,KAAK,MAAM,eAAe,GAAG;AACvC,iBAAK,mBAAmB,aAAa,MAAM,cAAc,QAAQ,CAAC;AAClE,iBAAK,eAAe,eAAe,8BAA8B;AAAA,UAClE;AAAA,QACD;AAAA,MACD;AAAA,IACD,CAAC;AACD,SAAK,UAAU,KAAK,mBAAmB,wBAAwB,MAAM;AACpE,UAAI,CAAC,KAAK,wBAAwB;AACjC,aAAK,SAAS,GAAG,SAAS,IAAI;AAAA,MAC/B;AAAA,IACD,CAAC,CAAC;AAAA,EACH;AAAA,EAES,aAAa;AACrB,WAAO,KAAK;AAAA,EACb;AAAA,EAES,QAAQ;AAChB,UAAM,MAAM;AAEZ,UAAM,YAAY,KAAK,oBAAoB,KAAK,SAAS,CAAC;AAC1D,QAAI,aAAa,UAAU,YAAY,UAAU;AAChD,WAAK,mBAAmB,MAAM;AAAA,IAC/B,OAAO;AACN,WAAK,kBAAkB,MAAM;AAAA,IAC9B;AAAA,EACD;AAAA,EAEA,mBAAmB;AAClB,SAAK,kBAAkB,aAAa,MAAM;AAAA,EAC3C;AAAA,EAEA,2BAA2B;AAC1B,QAAI,CAAC,KAAK,yBAAyB;AAClC,WAAK,uBAAuB,IAAI;AAAA,IACjC;AACA,SAAK,qBAAqB,MAAM;AAAA,EACjC;AAAA,EAEA,2BAA2B;AAC1B,QAAI,CAAC,KAAK,yBAAyB;AAClC,WAAK,uBAAuB,IAAI;AAAA,IACjC;AACA,SAAK,qBAAqB,MAAM;AAAA,EACjC;AAAA,EAEA,iBAAiB;AAChB,QAAI,KAAK,kBAAkB,oBAAoB,GAAG;AACjD,UAAI,KAAK,yBAAyB;AACjC,aAAK,qBAAqB,MAAM;AAAA,MACjC,OAAO;AACN,aAAK,mBAAmB,MAAM;AAAA,MAC/B;AAAA,IACD,WAAW,KAAK,qBAAqB,cAAc,GAAG;AACrD,WAAK,qBAAqB,MAAM;AAAA,IACjC,WAAW,KAAK,qBAAqB,cAAc,GAAG;AACrD,WAAK,mBAAmB,MAAM;AAAA,IAC/B,WAAW,KAAK,mBAAmB,eAAe,GAAG;AAAA,IAErD;AAAA,EACD;AAAA,EAEA,iBAAiB;AAChB,QAAI,KAAK,kBAAkB,oBAAoB,GAAG;AACjD,WAAK,mBAAmB,MAAM;AAAA,IAC/B,WAAW,KAAK,qBAAqB,cAAc,GAAG;AACrD,WAAK,kBAAkB,aAAa,MAAM;AAAA,IAC3C,WAAW,KAAK,qBAAqB,cAAc,GAAG;AACrD,WAAK,qBAAqB,MAAM;AAAA,IACjC,WAAW,KAAK,mBAAmB,eAAe,GAAG;AAAA,IAErD;AAAA,EACD;AAAA,EAEA,SAAS,OAAe;AACvB,SAAK,kBAAkB,aAAa,SAAS,KAAK;AAAA,EACnD;AAAA,EAEA,cAAc;AACb,SAAK,kBAAkB,aAAa,OAAO;AAAA,EAC5C;AAAA,EAEA,mBAAmB;AAClB,SAAK,kBAAkB,aAAa,cAAc,CAAC,KAAK,kBAAkB,YAAY,cAAc,CAAC;AACrG,SAAK,cAAc,EAAE,aAAa,MAAM,CAAC;AAAA,EAC1C;AAAA,EAEA,cAAc;AACb,SAAK,kBAAkB,aAAa,SAAS,CAAC,KAAK,kBAAkB,YAAY,SAAS,CAAC;AAC3F,SAAK,cAAc,EAAE,aAAa,MAAM,CAAC;AAAA,EAC1C;AAAA,EAEA,sBAAsB;AACrB,SAAK,kBAAkB,aAAa,iBAAiB,CAAC,KAAK,kBAAkB,YAAY,iBAAiB,CAAC;AAC3G,SAAK,cAAc,EAAE,aAAa,MAAM,CAAC;AAAA,EAC1C;AAAA,EAEA,qBAAqB;AACpB,SAAK,kBAAkB,mBAAmB;AAAA,EAC3C;AAAA,EAEA,mBAAmB,UAAmB;AACrC,SAAK,kBAAkB,mBAAmB,QAAQ;AAAA,EACnD;AAAA,EAEA,mBAAmB,YAAsB;AACxC,SAAK,uBAAuB,UAAU;AAAA,EACvC;AAAA,EAEA,oBAAoB;AACnB,UAAM,gBAAgB,oBAAI,IAAY;AAEtC,UAAM,aAAa,KAAK,mBAAmB,cAAc;AACzD,UAAM,QAAQ,KAAK,mBAAmB,SAAS;AAC/C,QAAI,EAAE,cAAc,QAAQ;AAAE;AAAA,IAAQ;AAEtC,UAAM,UAAU,MAAM,aAAa;AACnC,UAAM,UAAU;AAEhB,UAAM,WAAW,wBAAC,UAAkB;AACnC,eAAS,SAAS,OAAO,UAAU,SAAS,UAAU;AACrD,cAAM,OAAO,MAAM,eAAe,MAAM;AACxC,sBAAc,IAAI,MAAM;AACxB,YAAI,KAAK,CAAC,MAAM,UAAa,KAAK,CAAC,MAAM,KAAK;AAC7C;AAAA,QACD;AAAA,MACD;AAAA,IACD,GARiB;AAUjB,UAAM,aAAa,wBAAC,UAAsC;AACzD,oBAAc,IAAI,KAAK;AACvB,eAAS,SAAS,QAAQ,GAAG,UAAU,SAAS,UAAU;AACzD,cAAM,OAAO,MAAM,eAAe,MAAM;AACxC,YAAI,KAAK,CAAC,MAAM,UAAa,KAAK,CAAC,MAAM,KAAK;AAC7C,iBAAO;AAAA,QACR;AACA,sBAAc,IAAI,MAAM;AAAA,MACzB;AACA;AAAA,IACD,GAVmB;AAYnB,UAAM,oBAA+C,CAAC;AACtD,eAAW,aAAa,YAAY;AACnC,YAAM,aAAa,UAAU;AAC7B,wBAAkB,KAAK,WAAW,UAAU,CAAC;AAC7C,eAAS,UAAU;AACnB,eAAS,QAAQ,UAAU,iBAAiB,SAAS,UAAU,eAAe,SAAS;AACtF,sBAAc,IAAI,KAAK;AAAA,MACxB;AAAA,IACD;AAEA,QAAI,kBAAkB,WAAW,GAAG;AAAE,wBAAkB,KAAK,CAAC;AAAA,IAAG;AAEjE,UAAM,YAAY,wBAAI,MAA6B,MAAM,QAAvC;AAElB,UAAM;AAAA,MAAmB,KAAK,mBAAmB,cAAc;AAAA,MAC9D,CAAC,GAAG,aAAa,EAAE,IAAI,WAAS,EAAE,OAAO,IAAI,MAAM,MAAM,GAAG,OAAO,GAAG,CAAC,GAAG,MAAM,GAAG,EAAE;AAAA,MACrF,MAAM,kBAAkB,OAAO,SAAS,EAAE,IAAI,UAAQ,IAAI,UAAU,MAAM,GAAG,MAAM,CAAC,CAAC;AAAA,IAAC;AAAA,EACxF;AAAA,EAEA,aAAa;AACZ,SAAK,SAAS,GAAG,SAAS,KAAK;AAAA,EAChC;AAAA,EAEA,IAAY,eAA+C;AAC1D,WAAO,KAAK,qBAAqB,SAAyC,QAAQ;AAAA,EACnF;AAAA,EAEQ,sBAAsB,SAAkB;AAC/C,UAAM,QAAQ,KAAK,mBAAmB,SAAS;AAC/C,QAAI,CAAC,OAAO;AAAE;AAAA,IAAQ;AAEtB,UAAM,WAAW,MAAM,aAAa,KAAK;AACzC,UAAM,aAAa,MAAM,cAAc,QAAQ;AAE/C,UAAM,gBAAgB,UAAU,IAAI,SAAS,UAAU,UAAU,IAAI,IAAI,SAAS,GAAG,CAAC;AAEtF,UAAM,kBAAkB,KAAK,mBAAmB,aAAa,GAAG,iBAAiB,KAAK;AAEtF,UAAM,cAAc,KAAK,SAAS,GAAG,eAAe;AACpD,QAAI,CAAC,aAAa;AAAE;AAAA,IAAQ;AAE5B,UAAM,cAAc,UAAU,gBAAgB,eAAe,aAAa,eAAe;AAEzF,SAAK,mBAAmB,aAAa,UAAU;AAC/C,SAAK,mBAAmB,oCAAoC,WAAW,eAAe;AACtF,SAAK,mBAAmB,MAAM;AAE9B,UAAM,gBAAgB,MAAM,eAAe,WAAW,eAAe;AACrE,UAAM,YAAY,MAAM,gBAAgB,UAAU;AAClD,QAAI,OAAO;AACX,aAAS,OAAO,WAAW,iBAAiB,QAAQ,GAAG,QAAQ;AAC9D,YAAM,WAAW,MAAM,gBAAgB,IAAI,MAAM,MAAM,GAAG,MAAM,CAAC,CAAC;AAClE,UAAI,aAAa,KAAK;AAAE,eAAO,MAAM,eAAe,IAAI;AAAG;AAAA,MAAO;AAAA,IACnE;AACA,UAAM,SAAS,oBAAoB,kCAAkC,WAAW,eAAe,KAAK,MAAM,GAAG,KAAK,SAAS,CAAC,CAAC,CAAC;AAAA,EAC/H;AAAA,EAEA,kBAAkB;AACjB,SAAK,sBAAsB,KAAK;AAAA,EACjC;AAAA,EAEA,sBAAsB;AACrB,SAAK,sBAAsB,IAAI;AAAA,EAChC;AAAA,EAEA,kBAAkB;AACjB,SAAK,mBACH,eAAe,KAAK,SAAS,GAAG,eAAe,KAAK,CAAC,GAAG;AAAA,MACxD,WAAS,IAAI,UAAU,MAAM,iBAAiB,MAAM,aAAa,MAAM,eAAe,MAAM,SAAS;AAAA,IAAC,CAAC;AACzG,SAAK,mBAAmB,MAAM;AAAA,EAC/B;AAAA,EAEA,MAAM,cAAc,UAA8E;AACjG,UAAM,eAAe,KAAK,aAAa,aAAa;AAGpD,QAAI,aAAa,QAAW;AAC3B,iBAAW,EAAE,aAA2B;AAAA,IACzC,WAAW,SAAS,iBAAiB,QAAW;AAC/C,eAAS,eAAe;AAAA,IACzB;AAEA,UAAM,UAAU,EAAE,aAAa,MAAM,OAAO,GAAG,GAAG,SAAS;AAE3D,QAAI,CAAE,KAAK,kBAAkB,aAAa,SAAS,aAAa,GAAI;AACnE;AAAA,IACD;AAEA,QAAI,CAAC,KAAK,gBAAgB;AACzB,YAAM,KAAK,iBAAiB,QAAQ,YAAY;AAC/C,aAAK,sBAAsB,KAAK;AAChC,cAAM,KAAK,YAAY;AACvB,YAAI,QAAQ,aAAa;AACxB,eAAK,mBAAmB,YAAY,IAAI,SAAS,GAAG,CAAC,CAAC;AACtD,eAAK,mBAAmB,kBAAkB,EAAE,WAAW,GAAG,YAAY,EAAE,CAAC;AAAA,QAC1E;AACA,YAAI,QAAQ,cAAc;AACzB,eAAK,mBAAmB,MAAM;AAAA,QAC/B;AAAA,MACD,GAAG,QAAQ,KAAK;AAAA,IACjB;AAAA,EACD;AAAA,EAEQ,uBAA4C;AACnD,WAAO;AAAA,MACN,iBAAiB,KAAK,kBAAkB,aAAa,iBAAiB,KAAK;AAAA,MAC3E,cAAc,KAAK,kBAAkB,gBAAgB;AAAA,MACrD,gBAAgB,KAAK,qBAAqB,SAAS;AAAA,MACnD,gBAAgB,KAAK,qBAAqB,SAAS;AAAA,MACnD,OAAO,KAAK,kBAAkB,aAAa,SAAS,KAAK;AAAA,MACzD,UAAU,KAAK,kBAAkB,aAAa,SAAS,KAAK;AAAA,MAC5D,gBAAgB,KAAK,kBAAkB,aAAa,cAAc,KAAK;AAAA,MACvE,kCAAkC,KAAK,qBAAqB,0BAA0B;AAAA,MACtF,iBAAiB,KAAK,qBAAqB,wBAAwB;AAAA,MACnE,sBAAsB,KAAK;AAAA,MAC3B,sBAAsB;AAAA,QACrB,oBAAoB,KAAK,kBAAkB,mBAAmB,EAAE;AAAA,QAChE,sBAAsB,KAAK,kBAAkB,mBAAmB,EAAE;AAAA,QAClE,kBAAkB,KAAK,kBAAkB,mBAAmB,EAAE;AAAA,QAC9D,eAAe,KAAK,kBAAkB,mBAAmB,EAAE;AAAA,MAC5D;AAAA,IACD;AAAA,EACD;AAAA,EAEA,MAAc,cAAc;AAC3B,SAAK,YAAY,aAAa,IAAI;AAElC,UAAM,aAAa,KAAK,SAAS;AACjC,QAAI,CAAC,YAAY;AAAE;AAAA,IAAQ;AAE3B,SAAK,qBAAqB,QAAQ,MAAM;AACvC,WAAK,kBAAkB,aAAa,eAAe;AACnD,WAAK,qBAAqB,eAAe;AACzC,WAAK,qBAAqB,eAAe;AAAA,IAC1C,CAAC;AAED,UAAM,SAAS,KAAK,qBAAqB;AAEzC,QAAI,CAAC,OAAO,OAAO;AAAE;AAAA,IAAQ;AAE7B,UAAM,UAAwB;AAAA,MAC7B,SAAS,OAAO;AAAA,MAChB,UAAU,OAAO;AAAA,MACjB,iBAAiB,OAAO;AAAA,MACxB,aAAa,OAAO;AAAA,IACrB;AAEA,UAAM,UAAoC;AAAA,MACzC,SAAS;AAAA,MACT,oBAAoB,KAAK,qBAAqB,eAAe,gCAAgC;AAAA,MAC7F,YAAY,KAAK,aAAa,cAAc;AAAA,MAC5C,sBAAsB,CAAC,OAAO,oCAAoC;AAAA,MAClE,0BAA0B,CAAC,OAAO,oCAAoC;AAAA,MACtE,gBAAgB,CAAC,EAAE,SAAS,OAAO,eAAe,CAAC;AAAA,MACnD,gBAAgB,OAAO;AAAA,MACvB,iBAAiB,OAAO;AAAA,MACxB,gBAAgB;AAAA,QACf,YAAY;AAAA,QACZ,cAAc;AAAA,MACf;AAAA,MACA,oBAAoB,OAAO;AAAA,MAC3B,aAAa,KAAK,aAAa;AAAA,MAC/B,gBAAgB;AAAA,MAChB,sBAAsB;AAAA,QACrB,oBAAoB,OAAO,qBAAqB;AAAA,QAChD,sBAAsB,OAAO,qBAAqB;AAAA,QAClD,kBAAkB,OAAO,qBAAqB;AAAA,QAC9C,eAAe,OAAO,qBAAqB;AAAA,MAC5C;AAAA,IACD;AAEA,UAAM,kBAAkB,KAAK,eAAe,aAAa,EAAE;AAC3D,QAAI;AACJ,QAAI;AACH,YAAM,eAAe,KAAK,qBAAqB,eAAe,YAAY;AAC1E,cAAQ,aAAa,KAAK,SAAS,gBAAgB,IAAI,YAAU,OAAO,GAAG,GAAG,OAAO;AAAA,IACtF,SACO,KAAK;AACX;AAAA,IACD;AAEA,SAAK,gBAAgB,MAAM,GAAG;AAC9B,SAAK;AAEL,UAAM,EAAE,mBAAmB,IAAI,MAAM,WAAW,cAAc;AAC9D,uBAAmB,aAAa,MAAM;AACtC,UAAM,SAAS,KAAK,YAAY,OAAO,KAAK;AAC5C,eAAW,yBAAyB,OAAO,aAAa,QAAQ,MAAM;AACrE,WAAK;AACL,UAAI,KAAK,sBAAsB,GAAG;AACjC,aAAK,gBAAgB,KAAK;AAAA,MAC3B;AAAA,IACD,CAAC;AAED,UAAM,kBAAkB,MAAM,WAAW;AACzC,UAAM,KAAK,iBAAiB,iBAAiB,QAAQ,UAAU;AAAA,EAChE;AAAA,EAEA,MAAc,iBAAiB,iBAAkC,aAAkC,YAA+B;AACjI,UAAM,QAAQ,KAAK,SAAS;AAC5B,QAAI,CAAC,SACJ,UAAU,cACV,KAAK,UAAU,WAAW,MAAM,KAAK,UAAU,KAAK,qBAAqB,CAAC,GAAG;AAC7E;AAAA,IACD;AAEA,UAAM,yBAAyB;AAE/B,UAAM,YAAY,KAAK,aAAa;AACpC,QAAI,cAAc,gBAAgB,UAAU;AAC3C,YAAM,KAAK,kBAAkB,KAAK,YAAY,YAAY;AAAA,IAC3D;AAEA,UAAM,aAAa,qBAAqB,IAAI,KAAK,kBAAkB;AACnE,gBAAY,YAAY,KAAK;AAC7B,UAAM,iBAAiB,wBAAC,QAAqB,KAAK,aAAa,YAAY,KAAK,EAAE,UAAU,KAAK,CAAC,GAA3E;AACvB,UAAM,UAAU,+BAA+B,KAAK,YAAY,cAAc,YAAY,gBAAgB,YAAY,gBAAgB,YAAY,cAAc,gBAAgB,WAAW,iBAAiB,QAAQ;AACpN,UAAM,EAAE,aAAa,IAAI,MAAM,MAAM,cAAc;AACnD,SAAK,yBAAyB;AAC9B,SAAK,aAAa,YAAY,cAAc,QAAQ,IAAI;AACxD,SAAK,yBAAyB;AAE9B,QAAI,mBAAmB,gBAAgB,UAAU;AAChD,iBAAW,WAAW,gBAAgB,UAAU;AAC/C,aAAK,WAAW,OAAO;AAAA,MACxB;AAAA,IACD;AACA,SAAK,SAAS;AAEd,UAAM,SAAS,CAAC,MAAM,cAAc,wBAAwB,QAAQ,CAAC;AACrE,UAAM,eAAe,QAAQ,WAAW;AAAA,EACzC;AAAA,EAEQ,WAAW,SAAoC;AACtD,QAAI;AACJ,QAAI,KAAK,WAAW,YAAY;AAC/B,mBAAa,KAAK,WAAW;AAAA,IAC9B,OAAO;AACN,mBAAa,IAAI,OAAO,KAAK,YAAY,IAAI,EAAE,UAAU,CAAC;AAAA,IAC3D;AAEA,QAAI,OAAO,YAAY,oBAAoB,SAAS,KAAK,sBAAsB,KAAK,qBAAqB,KAAK,eAAe,KAAK,gBAAgB,KAAK,oBAAoB,MAAM,KAAK,cAAc,CAAC,CAAC;AAAA,EACvM;AAAA,EAEA,MAAc,kBAAkB,cAA2C;AAC1E,UAAM,QAAQ,aAAa,QAAQ,EAAE,OAAO,OAAK,CAAC,EAAE,QAAQ,EAAE,IAAI,OAAK,EAAE,gBAAgB,KAAK,WAAW,CAAC;AAC1G,UAAM,QAAQ,IAAI,KAAK;AAAA,EACxB;AAAA,EAES,OAAO,WAA0B;AACzC,SAAK,YAAY;AACjB,SAAK,SAAS;AAAA,EACf;AAAA,EAEA,cAAc;AACb,UAAM,YAAY,KAAK,mBAAmB,aAAa;AACvD,QAAI,WAAW;AACd,aAAO,KAAK,mBAAmB,SAAS,GAAG,gBAAgB,SAAS,KAAK;AAAA,IAC1E;AACA,WAAO;AAAA,EACR;AAAA,EAEQ,WAAW;AAClB,QAAI,KAAK,WAAW;AACnB,WAAK,kBAAkB;AAAA,QAAS,KAAK,UAAU,QAAQ;AAAA;AAAA,MAAyB;AAChF,WAAK,mBAAmB,OAAO,EAAE,QAAQ,KAAK,UAAU,SAAS,IAAI,eAAe,KAAK,oBAAoB,GAAG,OAAO,KAAK,UAAU,MAAM,CAAC;AAC7I,WAAK,qBAAqB;AAAA,QAAS,KAAK,UAAU,QAAQ;AAAA;AAAA,MAAyB;AACnF,WAAK,qBAAqB;AAAA,QAAS,KAAK,UAAU,QAAQ;AAAA;AAAA,MAAyB;AAAA,IACpF;AAAA,EACD;AAAA,EAEQ,WAA0C;AACjD,WAAO,KAAK;AAAA,EACb;AAAA,EAEQ;AAAA,EACR,gBAAgB,QAAgD;AAC/D,SAAK,cAAc;AACnB,QAAI,OAAO,UAAU,QAAW;AAAE,WAAK,kBAAkB,SAAS,OAAO,KAAK;AAAA,IAAG;AACjF,QAAI,OAAO,oBAAoB,QAAW;AAAE,WAAK,kBAAkB,aAAa,iBAAiB,OAAO,eAAe;AAAA,IAAG;AAC1H,QAAI,OAAO,aAAa,QAAW;AAAE,WAAK,kBAAkB,aAAa,SAAS,OAAO,QAAQ;AAAA,IAAG;AACpG,QAAI,OAAO,mBAAmB,QAAW;AAAE,WAAK,kBAAkB,aAAa,cAAc,OAAO,cAAc;AAAA,IAAG;AACrH,QAAI,OAAO,iBAAiB,QAAW;AAAE,WAAK,kBAAkB,gBAAgB,OAAO,YAAY;AAAA,IAAG;AACtG,QAAI,OAAO,mBAAmB,QAAW;AAAE,WAAK,qBAAqB,SAAS,OAAO,cAAc;AAAA,IAAG;AACtG,QAAI,OAAO,mBAAmB,QAAW;AAAE,WAAK,qBAAqB,SAAS,OAAO,cAAc;AAAA,IAAG;AACtG,QAAI,OAAO,oBAAoB,QAAW;AAAE,WAAK,qBAAqB,2BAA2B,OAAO,eAAe;AAAA,IAAG;AAC1H,QAAI,OAAO,qCAAqC,QAAW;AAAE,WAAK,qBAAqB,6BAA6B,OAAO,gCAAgC;AAAA,IAAG;AAC9J,QAAI,OAAO,yBAAyB,QAAW;AAAE,WAAK,uBAAuB,OAAO,oBAAoB;AAAA,IAAG;AAAA,EAC5G;AAAA,EAEA,MAAe,SAAS,UAA6B,SAAqC,SAA6B,OAAyC;AAC/J,UAAM,MAAM,SAAS,UAAU,SAAS,SAAS,KAAK;AACtD,QAAI,MAAM,yBAAyB;AAClC;AAAA,IACD;AAEA,UAAM,EAAE,oBAAoB,aAAa,IAAI,MAAM,SAAS,cAAc;AAC1E,QAAI,MAAM,yBAAyB;AAAE;AAAA,IAAQ;AAE7C,SAAK,mBAAmB,SAAS,YAAY;AAC7C,SAAK,iBAAiB;AAEtB,SAAK,sBAAsB,CAAC,SAAS,0BAA0B,aAAa,aAAa,MAAM,KAAK,aAAa,eAAe,MAAM,KAAK,mBAAmB,OAAO,UAAU,EAAE;AAEjL,SAAK,gBAAgB,mBAAmB,MAAM;AAE9C,SAAK,UAAU,mBAAmB,kBAAkB,eAAa;AAChE,UAAI,cAAc,KAAK,aAAa;AACnC,aAAK,iBAAiB;AACtB,aAAK,gBAAgB,SAAS;AAC9B,aAAK,iBAAiB;AAAA,MACvB;AAAA,IACD,CAAC,CAAC;AAEF,SAAK,iBAAiB,OAAO;AAE7B,QAAI,CAAC,SAAS,eAAe;AAC5B,WAAK,MAAM;AAAA,IACZ;AAEA,SAAK,iBAAiB;AAEtB,QAAI,SAAS,wBAAwB;AACpC,YAAM,iBAAiB,KAAK,qBAAqB;AACjD,eAAS,uBAAuB,KAAK,cAAY;AAChD,aAAK,iBAAiB,UAAU,gBAAgB,QAAQ;AAAA,MACzD,CAAC;AAAA,IACF;AAAA,EACD;AAAA,EAEQ,uBAAuB,aAA6B;AAC3D,UAAM,MAAM;AACZ,UAAM,aAAa,eAAe,CAAC,KAAK,0BAA0B,UAAU,SAAS,GAAG;AAExF,QAAI,YAAY;AACf,WAAK,yBAAyB,aAAa,iBAAiB,MAAM;AAClE,WAAK,0BAA0B,UAAU,IAAI,GAAG;AAAA,IACjD,OAAO;AACN,WAAK,yBAAyB,aAAa,iBAAiB,OAAO;AACnE,WAAK,0BAA0B,UAAU,OAAO,GAAG;AAAA,IACpD;AAEA,SAAK,0BAA0B,KAAK,0BAA0B,UAAU,SAAS,GAAG;AAEpF,SAAK,SAAS;AAAA,EACf;AAAA,EAEmB,0BAA0B,OAAqC;AACjF,QAAI,MAAM,WAAW,yBAAyB;AAC7C,aAAQ,MAA4B;AAAA,IACrC;AAEA,WAAO;AAAA,EACR;AAAA,EAEmB,uBAAuB,UAAkD;AAC3F,UAAM,UAAU,KAAK,WAAW;AAChC,UAAM,kBAAkB,QAAQ,cAAc;AAC9C,QAAI,CAAC,iBAAiB;AAAE,aAAO;AAAA,IAAW;AAC1C,QAAI,SAAS,SAAS,MAAM,KAAK,SAAS,GAAG,SAAS,SAAS,GAAG;AAAE,aAAO;AAAA,IAAW;AAEtF,WAAO,EAAE,GAAG,iBAAiB,SAAS,KAAK,mBAAmB,eAAe,IAAI,WAAW,QAAQ;AAAA,EACrG;AAAA,EAEU,sBAAsB,OAA6B;AAC5D,WAAO,MAAM,WAAW;AAAA,EACzB;AAAA,EAEQ,iBAAiB,SAA6B;AACrD,UAAM,YAAY,KAAK,oBAAoB,KAAK,SAAS,GAAG,OAAO;AACnE,QAAI,WAAW;AAAE,WAAK,mBAAmB,iBAAiB,SAAS;AAAA,IAAG;AAAA,EACvE;AAAA,EAEA,eAAe;AACd,WAAO,KAAK,SAAS,GAAG,QAAQ,KAAK,SAAS,gBAAgB,QAAQ;AAAA,EACvE;AACD;AA7sBa,eAAN;AAAA,EA4BJ;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,GA9CU;AA+sBb,MAAM,8BAA8B,cAAc,gCAAgC,aAAa,SAAS,sBAAsB,sCAAsC,CAAC;AAErK,SAAS,cAAc,aAAsB,iBAA2B;AACvE,aAAW,cAAc,aAAa;AACrC,QAAI,SAAS,SAAS,iBAAiB,WAAW,iBAAiB,CAAC,GAAG;AACtE,aAAO;AAAA,IACR;AAAA,EACD;AACA,SAAO,YAAY,CAAC;AACrB;AAPS;AAST,SAAS,cAAc,aAAsB,iBAA2B;AACvE,WAAS,IAAI,YAAY,SAAS,GAAG,KAAK,GAAG,KAAK;AACjD,UAAM,aAAa,YAAY,CAAC;AAChC,QAAI,SAAS,SAAS,WAAW,iBAAiB,GAAG,eAAe,GAAG;AACtE;AACC,eAAO;AAAA,MACR;AAAA,IACD;AAAA,EACD;AACA,SAAO,YAAY,YAAY,SAAS,CAAC;AAC1C;AAVS;",
  "names": []
}
