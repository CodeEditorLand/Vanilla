{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/issue/browser/issueQuickAccess.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { PickerQuickAccessProvider, IPickerQuickAccessItem, FastAndSlowPicks, Picks, TriggerAction } from '../../../../platform/quickinput/browser/pickerQuickAccess.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IMenuService, MenuId, MenuItemAction, SubmenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { matchesFuzzy } from '../../../../base/common/filters.js';\nimport { IQuickPickSeparator } from '../../../../platform/quickinput/common/quickInput.js';\nimport { localize } from '../../../../nls.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IExtensionService } from '../../../services/extensions/common/extensions.js';\nimport { IExtensionDescription } from '../../../../platform/extensions/common/extensions.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { IssueSource } from '../common/issue.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\n\nexport class IssueQuickAccess extends PickerQuickAccessProvider<IPickerQuickAccessItem> {\n\n\tstatic PREFIX = 'issue ';\n\n\tconstructor(\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IProductService private readonly productService: IProductService\n\t) {\n\t\tsuper(IssueQuickAccess.PREFIX, { canAcceptInBackground: true });\n\t}\n\n\tprotected override _getPicks(filter: string): Picks<IPickerQuickAccessItem> | FastAndSlowPicks<IPickerQuickAccessItem> | Promise<Picks<IPickerQuickAccessItem> | FastAndSlowPicks<IPickerQuickAccessItem>> | null {\n\t\tconst issuePicksConst = new Array<IPickerQuickAccessItem | IQuickPickSeparator>();\n\t\tconst issuePicksParts = new Array<IPickerQuickAccessItem | IQuickPickSeparator>();\n\t\tconst extensionIdSet = new Set<string>();\n\n\t\t// Add default items\n\t\tconst productLabel = this.productService.nameLong;\n\t\tconst marketPlaceLabel = localize(\"reportExtensionMarketplace\", \"Extension Marketplace\");\n\t\tconst productFilter = matchesFuzzy(filter, productLabel, true);\n\t\tconst marketPlaceFilter = matchesFuzzy(filter, marketPlaceLabel, true);\n\n\t\t// Add product pick if product filter matches\n\t\tif (productFilter) {\n\t\t\tissuePicksConst.push({\n\t\t\t\tlabel: productLabel,\n\t\t\t\tariaLabel: productLabel,\n\t\t\t\thighlights: { label: productFilter },\n\t\t\t\taccept: () => this.commandService.executeCommand('workbench.action.openIssueReporter', { issueSource: IssueSource.VSCode })\n\t\t\t});\n\t\t}\n\n\t\t// Add marketplace pick if marketplace filter matches\n\t\tif (marketPlaceFilter) {\n\t\t\tissuePicksConst.push({\n\t\t\t\tlabel: marketPlaceLabel,\n\t\t\t\tariaLabel: marketPlaceLabel,\n\t\t\t\thighlights: { label: marketPlaceFilter },\n\t\t\t\taccept: () => this.commandService.executeCommand('workbench.action.openIssueReporter', { issueSource: IssueSource.Marketplace })\n\t\t\t});\n\t\t}\n\n\t\tissuePicksConst.push({ type: 'separator', label: localize('extensions', \"Extensions\") });\n\n\n\t\t// gets menu actions from contributed\n\t\tconst actions = this.menuService.getMenuActions(MenuId.IssueReporter, this.contextKeyService, { renderShortTitle: true }).flatMap(entry => entry[1]);\n\n\t\t// create picks from contributed menu\n\t\tactions.forEach(action => {\n\t\t\tif ('source' in action.item && action.item.source) {\n\t\t\t\textensionIdSet.add(action.item.source.id);\n\t\t\t}\n\n\t\t\tconst pick = this._createPick(filter, action);\n\t\t\tif (pick) {\n\t\t\t\tissuePicksParts.push(pick);\n\t\t\t}\n\t\t});\n\n\n\t\t// create picks from extensions\n\t\tthis.extensionService.extensions.forEach(extension => {\n\t\t\tif (!extension.isBuiltin) {\n\t\t\t\tconst pick = this._createPick(filter, undefined, extension);\n\t\t\t\tconst id = extension.identifier.value;\n\t\t\t\tif (pick && !extensionIdSet.has(id)) {\n\t\t\t\t\tissuePicksParts.push(pick);\n\t\t\t\t}\n\t\t\t\textensionIdSet.add(id);\n\t\t\t}\n\t\t});\n\n\t\tissuePicksParts.sort((a, b) => {\n\t\t\tconst aLabel = a.label ?? '';\n\t\t\tconst bLabel = b.label ?? '';\n\t\t\treturn aLabel.localeCompare(bLabel);\n\t\t});\n\n\t\treturn [...issuePicksConst, ...issuePicksParts];\n\t}\n\n\tprivate _createPick(filter: string, action?: MenuItemAction | SubmenuItemAction | undefined, extension?: IExtensionDescription): IPickerQuickAccessItem | undefined {\n\t\tconst buttons = [{\n\t\t\ticonClass: ThemeIcon.asClassName(Codicon.info),\n\t\t\ttooltip: localize('contributedIssuePage', \"Open Extension Page\")\n\t\t}];\n\n\t\tlet label: string;\n\t\tlet trigger: () => TriggerAction;\n\t\tlet accept: () => void;\n\t\tif (action && 'source' in action.item && action.item.source) {\n\t\t\tlabel = action.item.source?.title;\n\t\t\ttrigger = () => {\n\t\t\t\tif ('source' in action.item && action.item.source) {\n\t\t\t\t\tthis.commandService.executeCommand('extension.open', action.item.source.id);\n\t\t\t\t}\n\t\t\t\treturn TriggerAction.CLOSE_PICKER;\n\t\t\t};\n\t\t\taccept = () => {\n\t\t\t\taction.run();\n\t\t\t};\n\n\t\t} else if (extension) {\n\t\t\tlabel = extension.displayName ?? extension.name;\n\t\t\ttrigger = () => {\n\t\t\t\tthis.commandService.executeCommand('extension.open', extension.identifier.value);\n\t\t\t\treturn TriggerAction.CLOSE_PICKER;\n\t\t\t};\n\t\t\taccept = () => {\n\t\t\t\tthis.commandService.executeCommand('workbench.action.openIssueReporter', extension.identifier.value);\n\t\t\t};\n\n\t\t} else {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst highlights = matchesFuzzy(filter, label, true);\n\t\tif (highlights) {\n\t\t\treturn {\n\t\t\t\tlabel,\n\t\t\t\thighlights: { label: highlights },\n\t\t\t\tbuttons,\n\t\t\t\ttrigger,\n\t\t\t\taccept\n\t\t\t};\n\t\t}\n\t\treturn undefined;\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
