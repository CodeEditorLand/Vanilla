{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/issue/test/browser/testReporterModel.test.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { IssueReporterModel } from '../../browser/issueReporterModel.js';\nimport { IssueType } from '../../common/issue.js';\nimport { normalizeGitHubUrl } from '../../common/issueReporterUtil.js';\n\nsuite('IssueReporter', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\ttest('sets defaults to include all data', () => {\n\t\tconst issueReporterModel = new IssueReporterModel();\n\t\tassert.deepStrictEqual(issueReporterModel.getData(), {\n\t\t\tallExtensions: [],\n\t\t\tincludeSystemInfo: true,\n\t\t\tincludeExtensionData: true,\n\t\t\tincludeWorkspaceInfo: true,\n\t\t\tincludeProcessInfo: true,\n\t\t\tincludeExtensions: true,\n\t\t\tincludeExperiments: true,\n\t\t\tissueType: 0\n\t\t});\n\t});\n\n\ttest('serializes model skeleton when no data is provided', () => {\n\t\tconst issueReporterModel = new IssueReporterModel({});\n\t\tassert.strictEqual(issueReporterModel.serialize(),\n\t\t\t`\nType: <b>Bug</b>\n\nundefined\n\nVS Code version: undefined\nOS version: undefined\nModes:\n\nExtensions: none\n<!-- generated by issue reporter -->`);\n\t});\n\n\ttest('serializes GPU information when data is provided', () => {\n\t\tconst issueReporterModel = new IssueReporterModel({\n\t\t\tissueType: 0,\n\t\t\tsystemInfo: {\n\t\t\t\tos: 'Darwin',\n\t\t\t\tcpus: 'Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 x 2800)',\n\t\t\t\tmemory: '16.00GB',\n\t\t\t\tvmHint: '0%',\n\t\t\t\tprocessArgs: '',\n\t\t\t\tscreenReader: 'no',\n\t\t\t\tremoteData: [],\n\t\t\t\tgpuStatus: {\n\t\t\t\t\t'2d_canvas': 'enabled',\n\t\t\t\t\t'checker_imaging': 'disabled_off'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(issueReporterModel.serialize(),\n\t\t\t`\nType: <b>Bug</b>\n\nundefined\n\nVS Code version: undefined\nOS version: undefined\nModes:\n\n<details>\n<summary>System Info</summary>\n\n|Item|Value|\n|---|---|\n|CPUs|Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 x 2800)|\n|GPU Status|2d_canvas: enabled<br>checker_imaging: disabled_off|\n|Load (avg)|undefined|\n|Memory (System)|16.00GB|\n|Process Argv||\n|Screen Reader|no|\n|VM|0%|\n</details>Extensions: none\n<!-- generated by issue reporter -->`);\n\t});\n\n\ttest('serializes experiment info when data is provided', () => {\n\t\tconst issueReporterModel = new IssueReporterModel({\n\t\t\tissueType: 0,\n\t\t\tsystemInfo: {\n\t\t\t\tos: 'Darwin',\n\t\t\t\tcpus: 'Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 x 2800)',\n\t\t\t\tmemory: '16.00GB',\n\t\t\t\tvmHint: '0%',\n\t\t\t\tprocessArgs: '',\n\t\t\t\tscreenReader: 'no',\n\t\t\t\tremoteData: [],\n\t\t\t\tgpuStatus: {\n\t\t\t\t\t'2d_canvas': 'enabled',\n\t\t\t\t\t'checker_imaging': 'disabled_off'\n\t\t\t\t}\n\t\t\t},\n\t\t\texperimentInfo: 'vsliv695:30137379\\nvsins829:30139715'\n\t\t});\n\t\tassert.strictEqual(issueReporterModel.serialize(),\n\t\t\t`\nType: <b>Bug</b>\n\nundefined\n\nVS Code version: undefined\nOS version: undefined\nModes:\n\n<details>\n<summary>System Info</summary>\n\n|Item|Value|\n|---|---|\n|CPUs|Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 x 2800)|\n|GPU Status|2d_canvas: enabled<br>checker_imaging: disabled_off|\n|Load (avg)|undefined|\n|Memory (System)|16.00GB|\n|Process Argv||\n|Screen Reader|no|\n|VM|0%|\n</details>Extensions: none<details>\n<summary>A/B Experiments</summary>\n\n\\`\\`\\`\nvsliv695:30137379\nvsins829:30139715\n\\`\\`\\`\n\n</details>\n\n<!-- generated by issue reporter -->`);\n\t});\n\n\ttest('serializes Linux environment information when data is provided', () => {\n\t\tconst issueReporterModel = new IssueReporterModel({\n\t\t\tissueType: 0,\n\t\t\tsystemInfo: {\n\t\t\t\tos: 'Darwin',\n\t\t\t\tcpus: 'Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 x 2800)',\n\t\t\t\tmemory: '16.00GB',\n\t\t\t\tvmHint: '0%',\n\t\t\t\tprocessArgs: '',\n\t\t\t\tscreenReader: 'no',\n\t\t\t\tremoteData: [],\n\t\t\t\tgpuStatus: {},\n\t\t\t\tlinuxEnv: {\n\t\t\t\t\tdesktopSession: 'ubuntu',\n\t\t\t\t\txdgCurrentDesktop: 'ubuntu',\n\t\t\t\t\txdgSessionDesktop: 'ubuntu:GNOME',\n\t\t\t\t\txdgSessionType: 'x11'\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(issueReporterModel.serialize(),\n\t\t\t`\nType: <b>Bug</b>\n\nundefined\n\nVS Code version: undefined\nOS version: undefined\nModes:\n\n<details>\n<summary>System Info</summary>\n\n|Item|Value|\n|---|---|\n|CPUs|Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 x 2800)|\n|GPU Status||\n|Load (avg)|undefined|\n|Memory (System)|16.00GB|\n|Process Argv||\n|Screen Reader|no|\n|VM|0%|\n|DESKTOP_SESSION|ubuntu|\n|XDG_CURRENT_DESKTOP|ubuntu|\n|XDG_SESSION_DESKTOP|ubuntu:GNOME|\n|XDG_SESSION_TYPE|x11|\n</details>Extensions: none\n<!-- generated by issue reporter -->`);\n\t});\n\n\ttest('serializes remote information when data is provided', () => {\n\t\tconst issueReporterModel = new IssueReporterModel({\n\t\t\tissueType: 0,\n\t\t\tsystemInfo: {\n\t\t\t\tos: 'Darwin',\n\t\t\t\tcpus: 'Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 x 2800)',\n\t\t\t\tmemory: '16.00GB',\n\t\t\t\tvmHint: '0%',\n\t\t\t\tprocessArgs: '',\n\t\t\t\tscreenReader: 'no',\n\t\t\t\tgpuStatus: {\n\t\t\t\t\t'2d_canvas': 'enabled',\n\t\t\t\t\t'checker_imaging': 'disabled_off'\n\t\t\t\t},\n\t\t\t\tremoteData: [\n\t\t\t\t\t{\n\t\t\t\t\t\thostName: 'SSH: Pineapple',\n\t\t\t\t\t\tmachineInfo: {\n\t\t\t\t\t\t\tos: 'Linux x64 4.18.0',\n\t\t\t\t\t\t\tcpus: 'Intel(R) Xeon(R) CPU E5-2673 v4 @ 2.30GHz (2 x 2294)',\n\t\t\t\t\t\t\tmemory: '8GB',\n\t\t\t\t\t\t\tvmHint: '100%'\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(issueReporterModel.serialize(),\n\t\t\t`\nType: <b>Bug</b>\n\nundefined\n\nVS Code version: undefined\nOS version: undefined\nModes:\nRemote OS version: Linux x64 4.18.0\n\n<details>\n<summary>System Info</summary>\n\n|Item|Value|\n|---|---|\n|CPUs|Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 x 2800)|\n|GPU Status|2d_canvas: enabled<br>checker_imaging: disabled_off|\n|Load (avg)|undefined|\n|Memory (System)|16.00GB|\n|Process Argv||\n|Screen Reader|no|\n|VM|0%|\n\n|Item|Value|\n|---|---|\n|Remote|SSH: Pineapple|\n|OS|Linux x64 4.18.0|\n|CPUs|Intel(R) Xeon(R) CPU E5-2673 v4 @ 2.30GHz (2 x 2294)|\n|Memory (System)|8GB|\n|VM|100%|\n</details>Extensions: none\n<!-- generated by issue reporter -->`);\n\t});\n\n\ttest('escapes backslashes in processArgs', () => {\n\t\tconst issueReporterModel = new IssueReporterModel({\n\t\t\tissueType: 0,\n\t\t\tsystemInfo: {\n\t\t\t\tos: 'Darwin',\n\t\t\t\tcpus: 'Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 x 2800)',\n\t\t\t\tmemory: '16.00GB',\n\t\t\t\tvmHint: '0%',\n\t\t\t\tprocessArgs: '\\\\\\\\HOST\\\\path',\n\t\t\t\tscreenReader: 'no',\n\t\t\t\tremoteData: [],\n\t\t\t\tgpuStatus: {}\n\t\t\t}\n\t\t});\n\t\tassert.strictEqual(issueReporterModel.serialize(),\n\t\t\t`\nType: <b>Bug</b>\n\nundefined\n\nVS Code version: undefined\nOS version: undefined\nModes:\n\n<details>\n<summary>System Info</summary>\n\n|Item|Value|\n|---|---|\n|CPUs|Intel(R) Core(TM) i7-7700HQ CPU @ 2.80GHz (8 x 2800)|\n|GPU Status||\n|Load (avg)|undefined|\n|Memory (System)|16.00GB|\n|Process Argv|\\\\\\\\\\\\\\\\HOST\\\\\\\\path|\n|Screen Reader|no|\n|VM|0%|\n</details>Extensions: none\n<!-- generated by issue reporter -->`);\n\t});\n\n\ttest('should supply mode if applicable', () => {\n\t\tconst issueReporterModel = new IssueReporterModel({\n\t\t\tisUnsupported: true,\n\t\t\trestrictedMode: true\n\t\t});\n\t\tassert.strictEqual(issueReporterModel.serialize(),\n\t\t\t`\nType: <b>Bug</b>\n\nundefined\n\nVS Code version: undefined\nOS version: undefined\nModes: Restricted, Unsupported\n\nExtensions: none\n<!-- generated by issue reporter -->`);\n\t});\n\ttest('should normalize GitHub urls', () => {\n\t\t[\n\t\t\t'https://github.com/repo',\n\t\t\t'https://github.com/repo/',\n\t\t\t'https://github.com/repo.git',\n\t\t\t'https://github.com/repo/issues',\n\t\t\t'https://github.com/repo/issues/',\n\t\t\t'https://github.com/repo/issues/new',\n\t\t\t'https://github.com/repo/issues/new/'\n\t\t].forEach(url => {\n\t\t\tassert.strictEqual('https://github.com/repo', normalizeGitHubUrl(url));\n\t\t});\n\t});\n\n\ttest('should have support for filing on extensions for bugs, performance issues, and feature requests', () => {\n\t\t[\n\t\t\tIssueType.Bug,\n\t\t\tIssueType.FeatureRequest,\n\t\t\tIssueType.PerformanceIssue\n\t\t].forEach(type => {\n\t\t\tconst issueReporterModel = new IssueReporterModel({\n\t\t\t\tissueType: type,\n\t\t\t\tfileOnExtension: true\n\t\t\t});\n\n\t\t\tassert.strictEqual(issueReporterModel.fileOnExtension(), true);\n\t\t});\n\t});\n});\n"],
  "mappings": "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",
  "names": []
}
