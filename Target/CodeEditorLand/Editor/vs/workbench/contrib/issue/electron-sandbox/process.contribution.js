import{localize as r,localize2 as s}from"../../../../../vs/nls.js";import{Categories as n}from"../../../../../vs/platform/action/common/actionCommonCategories.js";import{Action2 as c,MenuId as S,MenuRegistry as f,registerAction2 as a}from"../../../../../vs/platform/actions/common/actions.js";import{CommandsRegistry as y}from"../../../../../vs/platform/commands/common/commands.js";import{IDialogService as I}from"../../../../../vs/platform/dialogs/common/dialogs.js";import{INativeEnvironmentService as P}from"../../../../../vs/platform/environment/common/environment.js";import"../../../../../vs/platform/instantiation/common/instantiation.js";import{IProcessMainService as m}from"../../../../../vs/platform/issue/common/issue.js";import{INativeHostService as T}from"../../../../../vs/platform/native/common/native.js";import{IProgressService as h,ProgressLocation as D}from"../../../../../vs/platform/progress/common/progress.js";import{IWorkbenchProcessService as x}from"../../../../../vs/workbench/contrib/issue/common/issue.js";import"../../../../../vs/workbench/contrib/issue/electron-sandbox/processService.js";import"../../../../../vs/workbench/contrib/issue/electron-sandbox/issueMainService.js";class o extends c{static ID="workbench.action.openProcessExplorer";constructor(){super({id:o.ID,title:s("openProcessExplorer","Open Process Explorer"),category:n.Developer,f1:!0})}async run(e){return e.get(x).openProcessExplorer()}}a(o),f.appendMenuItem(S.MenubarHelpMenu,{group:"5_tools",command:{id:o.ID,title:r({key:"miOpenProcessExplorerer",comment:["&& denotes a mnemonic"]},"Open &&Process Explorer")},order:2});class t extends c{static ID="workbench.action.stopTracing";constructor(){super({id:t.ID,title:s("stopTracing","Stop Tracing"),category:n.Developer,f1:!0})}async run(e){const i=e.get(m),g=e.get(P),l=e.get(I),u=e.get(T),v=e.get(h);if(!g.args.trace){const{confirmed:d}=await l.confirm({message:r("stopTracing.message","Tracing requires to launch with a '--trace' argument"),primaryButton:r({key:"stopTracing.button",comment:["&& denotes a mnemonic"]},"&&Relaunch and Enable Tracing")});if(d)return u.relaunch({addArgs:["--trace"]})}await v.withProgress({location:D.Dialog,title:r("stopTracing.title","Creating trace file..."),cancellable:!1,detail:r("stopTracing.detail","This can take up to one minute to complete.")},()=>i.stopTracing())}}a(t),y.registerCommand("_issues.getSystemStatus",p=>p.get(m).getSystemStatus());
