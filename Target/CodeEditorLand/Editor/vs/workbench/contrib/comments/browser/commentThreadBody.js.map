{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/comments/browser/commentThreadBody.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from \"../../../../base/browser/dom.js\";\nimport { StandardKeyboardEvent } from \"../../../../base/browser/keyboardEvent.js\";\nimport { Emitter } from \"../../../../base/common/event.js\";\nimport { KeyCode } from \"../../../../base/common/keyCodes.js\";\nimport {\n\tDisposable,\n\tDisposableMap,\n\tDisposableStore,\n} from \"../../../../base/common/lifecycle.js\";\nimport type { URI } from \"../../../../base/common/uri.js\";\nimport {\n\ttype IMarkdownRendererOptions,\n\tMarkdownRenderer,\n} from \"../../../../editor/browser/widget/markdownRenderer/browser/markdownRenderer.js\";\nimport type { IRange } from \"../../../../editor/common/core/range.js\";\nimport * as languages from \"../../../../editor/common/languages.js\";\nimport { ILanguageService } from \"../../../../editor/common/languages/language.js\";\nimport * as nls from \"../../../../nls.js\";\nimport type { IInstantiationService } from \"../../../../platform/instantiation/common/instantiation.js\";\nimport { IOpenerService } from \"../../../../platform/opener/common/opener.js\";\nimport type { ICellRange } from \"../../notebook/common/notebookRange.js\";\nimport type { ICommentThreadWidget } from \"../common/commentThreadWidget.js\";\nimport { CommentNode } from \"./commentNode.js\";\nimport { ICommentService } from \"./commentService.js\";\nimport type { LayoutableEditor } from \"./simpleCommentEditor.js\";\n\nexport class CommentThreadBody<\n\tT extends IRange | ICellRange = IRange,\n> extends Disposable {\n\tprivate _commentsElement!: HTMLElement;\n\tprivate _commentElements: CommentNode<T>[] = [];\n\tprivate _resizeObserver: any;\n\tprivate _focusedComment: number | undefined = undefined;\n\tprivate _onDidResize = new Emitter<dom.Dimension>();\n\tonDidResize = this._onDidResize.event;\n\n\tprivate _commentDisposable = new DisposableMap<\n\t\tCommentNode<T>,\n\t\tDisposableStore\n\t>();\n\tprivate _markdownRenderer: MarkdownRenderer;\n\n\tget length() {\n\t\treturn this._commentThread.comments\n\t\t\t? this._commentThread.comments.length\n\t\t\t: 0;\n\t}\n\n\tget activeComment() {\n\t\treturn this._commentElements.filter((node) => node.isEditing)[0];\n\t}\n\n\tconstructor(\n\t\tprivate readonly _parentEditor: LayoutableEditor,\n\t\treadonly owner: string,\n\t\treadonly parentResourceUri: URI,\n\t\treadonly container: HTMLElement,\n\t\tprivate _options: IMarkdownRendererOptions,\n\t\tprivate _commentThread: languages.CommentThread<T>,\n\t\tprivate _pendingEdits: { [key: number]: string } | undefined,\n\t\tprivate _scopedInstatiationService: IInstantiationService,\n\t\tprivate _parentCommentThreadWidget: ICommentThreadWidget,\n\t\t@ICommentService private commentService: ICommentService,\n\t\t@IOpenerService private openerService: IOpenerService,\n\t\t@ILanguageService private languageService: ILanguageService,\n\t) {\n\t\tsuper();\n\n\t\tthis._register(\n\t\t\tdom.addDisposableListener(\n\t\t\t\tcontainer,\n\t\t\t\tdom.EventType.FOCUS_IN,\n\t\t\t\t(e) => {\n\t\t\t\t\t// TODO @rebornix, limit T to IRange | ICellRange\n\t\t\t\t\tthis.commentService.setActiveEditingCommentThread(\n\t\t\t\t\t\tthis._commentThread,\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\n\t\tthis._markdownRenderer = this._register(\n\t\t\tnew MarkdownRenderer(\n\t\t\t\tthis._options,\n\t\t\t\tthis.languageService,\n\t\t\t\tthis.openerService,\n\t\t\t),\n\t\t);\n\t}\n\n\tfocus() {\n\t\tthis._commentsElement.focus();\n\t}\n\n\tensureFocusIntoNewEditingComment() {\n\t\tif (\n\t\t\tthis._commentElements.length === 1 &&\n\t\t\tthis._commentElements[0].isEditing\n\t\t) {\n\t\t\tthis._commentElements[0].setFocus(true);\n\t\t}\n\t}\n\n\tasync display() {\n\t\tthis._commentsElement = dom.append(\n\t\t\tthis.container,\n\t\t\tdom.$(\"div.comments-container\"),\n\t\t);\n\t\tthis._commentsElement.setAttribute(\"role\", \"presentation\");\n\t\tthis._commentsElement.tabIndex = 0;\n\t\tthis._updateAriaLabel();\n\n\t\tthis._register(\n\t\t\tdom.addDisposableListener(\n\t\t\t\tthis._commentsElement,\n\t\t\t\tdom.EventType.KEY_DOWN,\n\t\t\t\t(e) => {\n\t\t\t\t\tconst event = new StandardKeyboardEvent(e as KeyboardEvent);\n\t\t\t\t\tif (\n\t\t\t\t\t\t(event.equals(KeyCode.UpArrow) ||\n\t\t\t\t\t\t\tevent.equals(KeyCode.DownArrow)) &&\n\t\t\t\t\t\t(!this._focusedComment ||\n\t\t\t\t\t\t\t!this._commentElements[this._focusedComment]\n\t\t\t\t\t\t\t\t.isEditing)\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst moveFocusWithinBounds = (\n\t\t\t\t\t\t\tchange: number,\n\t\t\t\t\t\t): number => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tthis._focusedComment === undefined &&\n\t\t\t\t\t\t\t\tchange >= 0\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tthis._focusedComment === undefined &&\n\t\t\t\t\t\t\t\tchange < 0\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn this._commentElements.length - 1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst newIndex = this._focusedComment! + change;\n\t\t\t\t\t\t\treturn Math.min(\n\t\t\t\t\t\t\t\tMath.max(0, newIndex),\n\t\t\t\t\t\t\t\tthis._commentElements.length - 1,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\tthis._setFocusedComment(\n\t\t\t\t\t\t\tevent.equals(KeyCode.UpArrow)\n\t\t\t\t\t\t\t\t? moveFocusWithinBounds(-1)\n\t\t\t\t\t\t\t\t: moveFocusWithinBounds(1),\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\n\t\tthis._commentDisposable.clearAndDisposeAll();\n\t\tthis._commentElements = [];\n\t\tif (this._commentThread.comments) {\n\t\t\tfor (const comment of this._commentThread.comments) {\n\t\t\t\tconst newCommentNode = this.createNewCommentNode(comment);\n\n\t\t\t\tthis._commentElements.push(newCommentNode);\n\t\t\t\tthis._commentsElement.appendChild(newCommentNode.domNode);\n\t\t\t\tif (comment.mode === languages.CommentMode.Editing) {\n\t\t\t\t\tawait newCommentNode.switchToEditMode();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._resizeObserver = new MutationObserver(this._refresh.bind(this));\n\n\t\tthis._resizeObserver.observe(this.container, {\n\t\t\tattributes: true,\n\t\t\tchildList: true,\n\t\t\tcharacterData: true,\n\t\t\tsubtree: true,\n\t\t});\n\t}\n\n\tprivate _refresh() {\n\t\tconst dimensions = dom.getClientArea(this.container);\n\t\tthis._onDidResize.fire(dimensions);\n\t}\n\n\tgetDimensions() {\n\t\treturn dom.getClientArea(this.container);\n\t}\n\n\tlayout(widthInPixel?: number) {\n\t\tthis._commentElements.forEach((element) => {\n\t\t\telement.layout(widthInPixel);\n\t\t});\n\t}\n\n\tgetPendingEdits(): { [key: number]: string } {\n\t\tconst pendingEdits: { [key: number]: string } = {};\n\t\tthis._commentElements.forEach((element) => {\n\t\t\tif (element.isEditing) {\n\t\t\t\tconst pendingEdit = element.getPendingEdit();\n\t\t\t\tif (pendingEdit) {\n\t\t\t\t\tpendingEdits[element.comment.uniqueIdInThread] =\n\t\t\t\t\t\tpendingEdit;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn pendingEdits;\n\t}\n\n\tgetCommentCoords(\n\t\tcommentUniqueId: number,\n\t):\n\t\t| {\n\t\t\t\tthread: dom.IDomNodePagePosition;\n\t\t\t\tcomment: dom.IDomNodePagePosition;\n\t\t  }\n\t\t| undefined {\n\t\tconst matchedNode = this._commentElements.filter(\n\t\t\t(commentNode) =>\n\t\t\t\tcommentNode.comment.uniqueIdInThread === commentUniqueId,\n\t\t);\n\t\tif (matchedNode && matchedNode.length) {\n\t\t\tconst commentThreadCoords = dom.getDomNodePagePosition(\n\t\t\t\tthis._commentElements[0].domNode,\n\t\t\t);\n\t\t\tconst commentCoords = dom.getDomNodePagePosition(\n\t\t\t\tmatchedNode[0].domNode,\n\t\t\t);\n\t\t\treturn {\n\t\t\t\tthread: commentThreadCoords,\n\t\t\t\tcomment: commentCoords,\n\t\t\t};\n\t\t}\n\n\t\treturn;\n\t}\n\n\tasync updateCommentThread(\n\t\tcommentThread: languages.CommentThread<T>,\n\t\tpreserveFocus: boolean,\n\t) {\n\t\tconst oldCommentsLen = this._commentElements.length;\n\t\tconst newCommentsLen = commentThread.comments\n\t\t\t? commentThread.comments.length\n\t\t\t: 0;\n\n\t\tconst commentElementsToDel: CommentNode<T>[] = [];\n\t\tconst commentElementsToDelIndex: number[] = [];\n\t\tfor (let i = 0; i < oldCommentsLen; i++) {\n\t\t\tconst comment = this._commentElements[i].comment;\n\t\t\tconst newComment = commentThread.comments\n\t\t\t\t? commentThread.comments.filter(\n\t\t\t\t\t\t(c) => c.uniqueIdInThread === comment.uniqueIdInThread,\n\t\t\t\t\t)\n\t\t\t\t: [];\n\n\t\t\tif (newComment.length) {\n\t\t\t\tthis._commentElements[i].update(newComment[0]);\n\t\t\t} else {\n\t\t\t\tcommentElementsToDelIndex.push(i);\n\t\t\t\tcommentElementsToDel.push(this._commentElements[i]);\n\t\t\t}\n\t\t}\n\n\t\t// del removed elements\n\t\tfor (let i = commentElementsToDel.length - 1; i >= 0; i--) {\n\t\t\tconst commentToDelete = commentElementsToDel[i];\n\t\t\tthis._commentDisposable.deleteAndDispose(commentToDelete);\n\n\t\t\tthis._commentElements.splice(commentElementsToDelIndex[i], 1);\n\t\t\tcommentToDelete.domNode.remove();\n\t\t}\n\n\t\tlet lastCommentElement: HTMLElement | null = null;\n\t\tconst newCommentNodeList: CommentNode<T>[] = [];\n\t\tconst newCommentsInEditMode: CommentNode<T>[] = [];\n\t\tfor (let i = newCommentsLen - 1; i >= 0; i--) {\n\t\t\tconst currentComment = commentThread.comments![i];\n\t\t\tconst oldCommentNode = this._commentElements.filter(\n\t\t\t\t(commentNode) =>\n\t\t\t\t\tcommentNode.comment.uniqueIdInThread ===\n\t\t\t\t\tcurrentComment.uniqueIdInThread,\n\t\t\t);\n\t\t\tif (oldCommentNode.length) {\n\t\t\t\tlastCommentElement = oldCommentNode[0].domNode;\n\t\t\t\tnewCommentNodeList.unshift(oldCommentNode[0]);\n\t\t\t} else {\n\t\t\t\tconst newElement = this.createNewCommentNode(currentComment);\n\n\t\t\t\tnewCommentNodeList.unshift(newElement);\n\t\t\t\tif (lastCommentElement) {\n\t\t\t\t\tthis._commentsElement.insertBefore(\n\t\t\t\t\t\tnewElement.domNode,\n\t\t\t\t\t\tlastCommentElement,\n\t\t\t\t\t);\n\t\t\t\t\tlastCommentElement = newElement.domNode;\n\t\t\t\t} else {\n\t\t\t\t\tthis._commentsElement.appendChild(newElement.domNode);\n\t\t\t\t\tlastCommentElement = newElement.domNode;\n\t\t\t\t}\n\n\t\t\t\tif (currentComment.mode === languages.CommentMode.Editing) {\n\t\t\t\t\tawait newElement.switchToEditMode();\n\t\t\t\t\tnewCommentsInEditMode.push(newElement);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._commentThread = commentThread;\n\t\tthis._commentElements = newCommentNodeList;\n\n\t\tif (newCommentsInEditMode.length) {\n\t\t\tconst lastIndex = this._commentElements.indexOf(\n\t\t\t\tnewCommentsInEditMode[newCommentsInEditMode.length - 1],\n\t\t\t);\n\t\t\tthis._focusedComment = lastIndex;\n\t\t}\n\n\t\tthis._updateAriaLabel();\n\t\tif (!preserveFocus) {\n\t\t\tthis._setFocusedComment(this._focusedComment);\n\t\t}\n\t}\n\n\tprivate _updateAriaLabel() {\n\t\tif (this._commentThread.isDocumentCommentThread()) {\n\t\t\tif (this._commentThread.range) {\n\t\t\t\tthis._commentsElement.ariaLabel = nls.localize(\n\t\t\t\t\t\"commentThreadAria.withRange\",\n\t\t\t\t\t\"Comment thread with {0} comments on lines {1} through {2}. {3}.\",\n\t\t\t\t\tthis._commentThread.comments?.length,\n\t\t\t\t\tthis._commentThread.range.startLineNumber,\n\t\t\t\t\tthis._commentThread.range.endLineNumber,\n\t\t\t\t\tthis._commentThread.label,\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis._commentsElement.ariaLabel = nls.localize(\n\t\t\t\t\t\"commentThreadAria.document\",\n\t\t\t\t\t\"Comment thread with {0} comments on the entire document. {1}.\",\n\t\t\t\t\tthis._commentThread.comments?.length,\n\t\t\t\t\tthis._commentThread.label,\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._commentsElement.ariaLabel = nls.localize(\n\t\t\t\t\"commentThreadAria\",\n\t\t\t\t\"Comment thread with {0} comments. {1}.\",\n\t\t\t\tthis._commentThread.comments?.length,\n\t\t\t\tthis._commentThread.label,\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate _setFocusedComment(value: number | undefined) {\n\t\tif (this._focusedComment !== undefined) {\n\t\t\tthis._commentElements[this._focusedComment]?.setFocus(false);\n\t\t}\n\n\t\tif (this._commentElements.length === 0 || value === undefined) {\n\t\t\tthis._focusedComment = undefined;\n\t\t} else {\n\t\t\tthis._focusedComment = Math.min(\n\t\t\t\tvalue,\n\t\t\t\tthis._commentElements.length - 1,\n\t\t\t);\n\t\t\tthis._commentElements[this._focusedComment].setFocus(true);\n\t\t}\n\t}\n\n\tprivate createNewCommentNode(comment: languages.Comment): CommentNode<T> {\n\t\tconst newCommentNode = this._scopedInstatiationService.createInstance(\n\t\t\tCommentNode,\n\t\t\tthis._parentEditor,\n\t\t\tthis._commentThread,\n\t\t\tcomment,\n\t\t\tthis._pendingEdits\n\t\t\t\t? this._pendingEdits[comment.uniqueIdInThread]\n\t\t\t\t: undefined,\n\t\t\tthis.owner,\n\t\t\tthis.parentResourceUri,\n\t\t\tthis._parentCommentThreadWidget,\n\t\t\tthis._markdownRenderer,\n\t\t) as unknown as CommentNode<T>;\n\n\t\tconst disposables: DisposableStore = new DisposableStore();\n\t\tdisposables.add(\n\t\t\tnewCommentNode.onDidClick((clickedNode) =>\n\t\t\t\tthis._setFocusedComment(\n\t\t\t\t\tthis._commentElements.findIndex(\n\t\t\t\t\t\t(commentNode) =>\n\t\t\t\t\t\t\tcommentNode.comment.uniqueIdInThread ===\n\t\t\t\t\t\t\tclickedNode.comment.uniqueIdInThread,\n\t\t\t\t\t),\n\t\t\t\t),\n\t\t\t),\n\t\t);\n\t\tdisposables.add(newCommentNode);\n\t\tthis._commentDisposable.set(newCommentNode, disposables);\n\n\t\treturn newCommentNode;\n\t}\n\n\tpublic override dispose(): void {\n\t\tsuper.dispose();\n\n\t\tif (this._resizeObserver) {\n\t\t\tthis._resizeObserver.disconnect();\n\t\t\tthis._resizeObserver = null;\n\t\t}\n\n\t\tthis._commentDisposable.dispose();\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
