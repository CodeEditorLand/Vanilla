{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/comments/browser/commentsTreeViewer.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../base/browser/dom.js';\nimport * as nls from '../../../../nls.js';\nimport { renderMarkdown } from '../../../../base/browser/markdownRenderer.js';\nimport { IDisposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IResourceLabel, ResourceLabels } from '../../../browser/labels.js';\nimport { CommentNode, ResourceWithCommentThreads } from '../common/commentModel.js';\nimport { ITreeContextMenuEvent, ITreeFilter, ITreeNode, TreeFilterResult, TreeVisibility } from '../../../../base/browser/ui/tree/tree.js';\nimport { IListVirtualDelegate, IListRenderer } from '../../../../base/browser/ui/list/list.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IListService, IWorkbenchAsyncDataTreeOptions, WorkbenchObjectTree } from '../../../../platform/list/browser/listService.js';\nimport { IColorTheme, IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { TimestampWidget } from './timestamp.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { IMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { commentViewThreadStateColorVar, getCommentThreadStateIconColor } from './commentColors.js';\nimport { CommentThreadApplicability, CommentThreadState } from '../../../../editor/common/languages.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { IMatch } from '../../../../base/common/filters.js';\nimport { FilterOptions } from './commentsFilterOptions.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { openLinkFromMarkdown } from '../../../../editor/browser/widget/markdownRenderer/browser/markdownRenderer.js';\nimport { IStyleOverride } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { IListStyles } from '../../../../base/browser/ui/list/listWidget.js';\nimport { ILocalizedString } from '../../../../platform/action/common/action.js';\nimport { CommentsModel } from './commentsModel.js';\nimport { getDefaultHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nimport { ActionBar, IActionViewItemProvider } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { createActionViewItem, createAndFillInContextMenuActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IAction } from '../../../../base/common/actions.js';\nimport { MarshalledId } from '../../../../base/common/marshallingIds.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { ActionViewItem } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { MarshalledCommentThread, MarshalledCommentThreadInternal } from '../../../common/comments.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\n\nexport const COMMENTS_VIEW_ID = 'workbench.panel.comments';\nexport const COMMENTS_VIEW_STORAGE_ID = 'Comments';\nexport const COMMENTS_VIEW_TITLE: ILocalizedString = nls.localize2('comments.view.title', \"Comments\");\n\ninterface IResourceTemplateData {\n\tresourceLabel: IResourceLabel;\n\tseparator: HTMLElement;\n\towner: HTMLElement;\n}\n\ninterface ICommentThreadTemplateData {\n\tthreadMetadata: {\n\t\trelevance: HTMLElement;\n\t\ticon: HTMLElement;\n\t\tuserNames: HTMLSpanElement;\n\t\ttimestamp: TimestampWidget;\n\t\tseparator: HTMLElement;\n\t\tcommentPreview: HTMLSpanElement;\n\t\trange: HTMLSpanElement;\n\t};\n\trepliesMetadata: {\n\t\tcontainer: HTMLElement;\n\t\ticon: HTMLElement;\n\t\tcount: HTMLSpanElement;\n\t\tlastReplyDetail: HTMLSpanElement;\n\t\tseparator: HTMLElement;\n\t\ttimestamp: TimestampWidget;\n\t};\n\tactionBar: ActionBar;\n\tdisposables: IDisposable[];\n}\n\nclass CommentsModelVirtualDelegate implements IListVirtualDelegate<ResourceWithCommentThreads | CommentNode> {\n\tprivate static readonly RESOURCE_ID = 'resource-with-comments';\n\tprivate static readonly COMMENT_ID = 'comment-node';\n\n\n\tgetHeight(element: any): number {\n\t\tif ((element instanceof CommentNode) && element.hasReply()) {\n\t\t\treturn 44;\n\t\t}\n\t\treturn 22;\n\t}\n\n\tpublic getTemplateId(element: any): string {\n\t\tif (element instanceof ResourceWithCommentThreads) {\n\t\t\treturn CommentsModelVirtualDelegate.RESOURCE_ID;\n\t\t}\n\t\tif (element instanceof CommentNode) {\n\t\t\treturn CommentsModelVirtualDelegate.COMMENT_ID;\n\t\t}\n\n\t\treturn '';\n\t}\n}\n\nexport class ResourceWithCommentsRenderer implements IListRenderer<ITreeNode<ResourceWithCommentThreads>, IResourceTemplateData> {\n\ttemplateId: string = 'resource-with-comments';\n\n\tconstructor(\n\t\tprivate labels: ResourceLabels\n\t) {\n\t}\n\n\trenderTemplate(container: HTMLElement) {\n\t\tconst labelContainer = dom.append(container, dom.$('.resource-container'));\n\t\tconst resourceLabel = this.labels.create(labelContainer);\n\t\tconst separator = dom.append(labelContainer, dom.$('.separator'));\n\t\tconst owner = labelContainer.appendChild(dom.$('.owner'));\n\n\t\treturn { resourceLabel, owner, separator };\n\t}\n\n\trenderElement(node: ITreeNode<ResourceWithCommentThreads>, index: number, templateData: IResourceTemplateData, height: number | undefined): void {\n\t\ttemplateData.resourceLabel.setFile(node.element.resource);\n\t\ttemplateData.separator.innerText = '\\u00b7';\n\n\t\tif (node.element.ownerLabel) {\n\t\t\ttemplateData.owner.innerText = node.element.ownerLabel;\n\t\t\ttemplateData.separator.style.display = 'inline';\n\t\t} else {\n\t\t\ttemplateData.owner.innerText = '';\n\t\t\ttemplateData.separator.style.display = 'none';\n\t\t}\n\t}\n\n\tdisposeTemplate(templateData: IResourceTemplateData): void {\n\t\ttemplateData.resourceLabel.dispose();\n\t}\n}\n\nexport class CommentsMenus implements IDisposable {\n\tprivate contextKeyService: IContextKeyService | undefined;\n\n\tconstructor(\n\t\t@IMenuService private readonly menuService: IMenuService\n\t) { }\n\n\tgetResourceActions(element: CommentNode): { actions: IAction[] } {\n\t\tconst actions = this.getActions(MenuId.CommentsViewThreadActions, element);\n\t\treturn { actions: actions.primary };\n\t}\n\n\tgetResourceContextActions(element: CommentNode): IAction[] {\n\t\treturn this.getActions(MenuId.CommentsViewThreadActions, element).secondary;\n\t}\n\n\tpublic setContextKeyService(service: IContextKeyService) {\n\t\tthis.contextKeyService = service;\n\t}\n\n\tprivate getActions(menuId: MenuId, element: CommentNode): { primary: IAction[]; secondary: IAction[] } {\n\t\tif (!this.contextKeyService) {\n\t\t\treturn { primary: [], secondary: [] };\n\t\t}\n\n\t\tconst overlay: [string, any][] = [\n\t\t\t['commentController', element.owner],\n\t\t\t['resourceScheme', element.resource.scheme],\n\t\t\t['commentThread', element.contextValue],\n\t\t\t['canReply', element.thread.canReply]\n\t\t];\n\t\tconst contextKeyService = this.contextKeyService.createOverlay(overlay);\n\n\t\tconst menu = this.menuService.getMenuActions(menuId, contextKeyService, { shouldForwardArgs: true });\n\t\tconst primary: IAction[] = [];\n\t\tconst secondary: IAction[] = [];\n\t\tconst result = { primary, secondary, menu };\n\t\tcreateAndFillInContextMenuActions(menu, result, 'inline');\n\n\t\treturn result;\n\t}\n\n\tdispose() {\n\t\tthis.contextKeyService = undefined;\n\t}\n}\n\nexport class CommentNodeRenderer implements IListRenderer<ITreeNode<CommentNode>, ICommentThreadTemplateData> {\n\ttemplateId: string = 'comment-node';\n\n\tconstructor(\n\t\tprivate actionViewItemProvider: IActionViewItemProvider,\n\t\tprivate menus: CommentsMenus,\n\t\t@IOpenerService private readonly openerService: IOpenerService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@IHoverService private readonly hoverService: IHoverService,\n\t\t@IThemeService private themeService: IThemeService\n\t) { }\n\n\trenderTemplate(container: HTMLElement) {\n\t\tconst threadContainer = dom.append(container, dom.$('.comment-thread-container'));\n\t\tconst metadataContainer = dom.append(threadContainer, dom.$('.comment-metadata-container'));\n\t\tconst metadata = dom.append(metadataContainer, dom.$('.comment-metadata'));\n\t\tconst threadMetadata = {\n\t\t\ticon: dom.append(metadata, dom.$('.icon')),\n\t\t\tuserNames: dom.append(metadata, dom.$('.user')),\n\t\t\ttimestamp: new TimestampWidget(this.configurationService, this.hoverService, dom.append(metadata, dom.$('.timestamp-container'))),\n\t\t\trelevance: dom.append(metadata, dom.$('.relevance')),\n\t\t\tseparator: dom.append(metadata, dom.$('.separator')),\n\t\t\tcommentPreview: dom.append(metadata, dom.$('.text')),\n\t\t\trange: dom.append(metadata, dom.$('.range'))\n\t\t};\n\t\tthreadMetadata.separator.innerText = '\\u00b7';\n\n\t\tconst actionsContainer = dom.append(metadataContainer, dom.$('.actions'));\n\t\tconst actionBar = new ActionBar(actionsContainer, {\n\t\t\tactionViewItemProvider: this.actionViewItemProvider\n\t\t});\n\n\t\tconst snippetContainer = dom.append(threadContainer, dom.$('.comment-snippet-container'));\n\t\tconst repliesMetadata = {\n\t\t\tcontainer: snippetContainer,\n\t\t\ticon: dom.append(snippetContainer, dom.$('.icon')),\n\t\t\tcount: dom.append(snippetContainer, dom.$('.count')),\n\t\t\tlastReplyDetail: dom.append(snippetContainer, dom.$('.reply-detail')),\n\t\t\tseparator: dom.append(snippetContainer, dom.$('.separator')),\n\t\t\ttimestamp: new TimestampWidget(this.configurationService, this.hoverService, dom.append(snippetContainer, dom.$('.timestamp-container'))),\n\t\t};\n\t\trepliesMetadata.separator.innerText = '\\u00b7';\n\t\trepliesMetadata.icon.classList.add(...ThemeIcon.asClassNameArray(Codicon.indent));\n\n\t\tconst disposables = [threadMetadata.timestamp, repliesMetadata.timestamp];\n\t\treturn { threadMetadata, repliesMetadata, actionBar, disposables };\n\t}\n\n\tprivate getCountString(commentCount: number): string {\n\t\tif (commentCount > 2) {\n\t\t\treturn nls.localize('commentsCountReplies', \"{0} replies\", commentCount - 1);\n\t\t} else if (commentCount === 2) {\n\t\t\treturn nls.localize('commentsCountReply', \"1 reply\");\n\t\t} else {\n\t\t\treturn nls.localize('commentCount', \"1 comment\");\n\t\t}\n\t}\n\n\tprivate getRenderedComment(commentBody: IMarkdownString, disposables: DisposableStore) {\n\t\tconst renderedComment = renderMarkdown(commentBody, {\n\t\t\tinline: true,\n\t\t\tactionHandler: {\n\t\t\t\tcallback: (link) => openLinkFromMarkdown(this.openerService, link, commentBody.isTrusted),\n\t\t\t\tdisposables: disposables\n\t\t\t}\n\t\t});\n\t\tconst images = renderedComment.element.getElementsByTagName('img');\n\t\tfor (let i = 0; i < images.length; i++) {\n\t\t\tconst image = images[i];\n\t\t\tconst textDescription = dom.$('');\n\t\t\ttextDescription.textContent = image.alt ? nls.localize('imageWithLabel', \"Image: {0}\", image.alt) : nls.localize('image', \"Image\");\n\t\t\timage.parentNode!.replaceChild(textDescription, image);\n\t\t}\n\t\twhile ((renderedComment.element.children.length > 1) && (renderedComment.element.firstElementChild?.tagName === 'HR')) {\n\t\t\trenderedComment.element.removeChild(renderedComment.element.firstElementChild);\n\t\t}\n\t\treturn renderedComment;\n\t}\n\n\tprivate getIcon(threadState?: CommentThreadState): ThemeIcon {\n\t\tif (threadState === CommentThreadState.Unresolved) {\n\t\t\treturn Codicon.commentUnresolved;\n\t\t} else {\n\t\t\treturn Codicon.comment;\n\t\t}\n\t}\n\n\trenderElement(node: ITreeNode<CommentNode>, index: number, templateData: ICommentThreadTemplateData, height: number | undefined): void {\n\t\ttemplateData.actionBar.clear();\n\n\t\tconst commentCount = node.element.replies.length + 1;\n\t\tif (node.element.threadRelevance === CommentThreadApplicability.Outdated) {\n\t\t\ttemplateData.threadMetadata.relevance.style.display = '';\n\t\t\ttemplateData.threadMetadata.relevance.innerText = nls.localize('outdated', \"Outdated\");\n\t\t\ttemplateData.threadMetadata.separator.style.display = 'none';\n\t\t} else {\n\t\t\ttemplateData.threadMetadata.relevance.innerText = '';\n\t\t\ttemplateData.threadMetadata.relevance.style.display = 'none';\n\t\t\ttemplateData.threadMetadata.separator.style.display = '';\n\t\t}\n\n\t\ttemplateData.threadMetadata.icon.classList.remove(...Array.from(templateData.threadMetadata.icon.classList.values())\n\t\t\t.filter(value => value.startsWith('codicon')));\n\t\ttemplateData.threadMetadata.icon.classList.add(...ThemeIcon.asClassNameArray(this.getIcon(node.element.threadState)));\n\t\tif (node.element.threadState !== undefined) {\n\t\t\tconst color = this.getCommentThreadWidgetStateColor(node.element.threadState, this.themeService.getColorTheme());\n\t\t\ttemplateData.threadMetadata.icon.style.setProperty(commentViewThreadStateColorVar, `${color}`);\n\t\t\ttemplateData.threadMetadata.icon.style.color = `var(${commentViewThreadStateColorVar})`;\n\t\t}\n\t\ttemplateData.threadMetadata.userNames.textContent = node.element.comment.userName;\n\t\ttemplateData.threadMetadata.timestamp.setTimestamp(node.element.comment.timestamp ? new Date(node.element.comment.timestamp) : undefined);\n\t\tconst originalComment = node.element;\n\n\t\ttemplateData.threadMetadata.commentPreview.innerText = '';\n\t\ttemplateData.threadMetadata.commentPreview.style.height = '22px';\n\t\tif (typeof originalComment.comment.body === 'string') {\n\t\t\ttemplateData.threadMetadata.commentPreview.innerText = originalComment.comment.body;\n\t\t} else {\n\t\t\tconst disposables = new DisposableStore();\n\t\t\ttemplateData.disposables.push(disposables);\n\t\t\tconst renderedComment = this.getRenderedComment(originalComment.comment.body, disposables);\n\t\t\ttemplateData.disposables.push(renderedComment);\n\t\t\ttemplateData.threadMetadata.commentPreview.appendChild(renderedComment.element.firstElementChild ?? renderedComment.element);\n\t\t\ttemplateData.disposables.push(this.hoverService.setupManagedHover(getDefaultHoverDelegate('mouse'), templateData.threadMetadata.commentPreview, renderedComment.element.textContent ?? ''));\n\t\t}\n\n\t\tif (node.element.range) {\n\t\t\tif (node.element.range.startLineNumber === node.element.range.endLineNumber) {\n\t\t\t\ttemplateData.threadMetadata.range.textContent = nls.localize('commentLine', \"[Ln {0}]\", node.element.range.startLineNumber);\n\t\t\t} else {\n\t\t\t\ttemplateData.threadMetadata.range.textContent = nls.localize('commentRange', \"[Ln {0}-{1}]\", node.element.range.startLineNumber, node.element.range.endLineNumber);\n\t\t\t}\n\t\t}\n\n\t\tconst menuActions = this.menus.getResourceActions(node.element);\n\t\ttemplateData.actionBar.push(menuActions.actions, { icon: true, label: false });\n\t\ttemplateData.actionBar.context = {\n\t\t\tcommentControlHandle: node.element.controllerHandle,\n\t\t\tcommentThreadHandle: node.element.threadHandle,\n\t\t\t$mid: MarshalledId.CommentThread\n\t\t} satisfies MarshalledCommentThread;\n\n\t\tif (!node.element.hasReply()) {\n\t\t\ttemplateData.repliesMetadata.container.style.display = 'none';\n\t\t\treturn;\n\t\t}\n\n\t\ttemplateData.repliesMetadata.container.style.display = '';\n\t\ttemplateData.repliesMetadata.count.textContent = this.getCountString(commentCount);\n\t\tconst lastComment = node.element.replies[node.element.replies.length - 1].comment;\n\t\ttemplateData.repliesMetadata.lastReplyDetail.textContent = nls.localize('lastReplyFrom', \"Last reply from {0}\", lastComment.userName);\n\t\ttemplateData.repliesMetadata.timestamp.setTimestamp(lastComment.timestamp ? new Date(lastComment.timestamp) : undefined);\n\t}\n\n\tprivate getCommentThreadWidgetStateColor(state: CommentThreadState | undefined, theme: IColorTheme): Color | undefined {\n\t\treturn (state !== undefined) ? getCommentThreadStateIconColor(state, theme) : undefined;\n\t}\n\n\tdisposeTemplate(templateData: ICommentThreadTemplateData): void {\n\t\ttemplateData.disposables.forEach(disposeable => disposeable.dispose());\n\t\ttemplateData.actionBar.dispose();\n\t}\n}\n\nexport interface ICommentsListOptions extends IWorkbenchAsyncDataTreeOptions<any, any> {\n\toverrideStyles?: IStyleOverride<IListStyles>;\n}\n\nconst enum FilterDataType {\n\tResource,\n\tComment\n}\n\ninterface ResourceFilterData {\n\ttype: FilterDataType.Resource;\n\turiMatches: IMatch[];\n}\n\ninterface CommentFilterData {\n\ttype: FilterDataType.Comment;\n\ttextMatches: IMatch[];\n}\n\ntype FilterData = ResourceFilterData | CommentFilterData;\n\nexport class Filter implements ITreeFilter<ResourceWithCommentThreads | CommentNode, FilterData> {\n\n\tconstructor(public options: FilterOptions) { }\n\n\tfilter(element: ResourceWithCommentThreads | CommentNode, parentVisibility: TreeVisibility): TreeFilterResult<FilterData> {\n\t\tif (this.options.filter === '' && this.options.showResolved && this.options.showUnresolved) {\n\t\t\treturn TreeVisibility.Visible;\n\t\t}\n\n\t\tif (element instanceof ResourceWithCommentThreads) {\n\t\t\treturn this.filterResourceMarkers(element);\n\t\t} else {\n\t\t\treturn this.filterCommentNode(element, parentVisibility);\n\t\t}\n\t}\n\n\tprivate filterResourceMarkers(resourceMarkers: ResourceWithCommentThreads): TreeFilterResult<FilterData> {\n\t\t// Filter by text. Do not apply negated filters on resources instead use exclude patterns\n\t\tif (this.options.textFilter.text && !this.options.textFilter.negate) {\n\t\t\tconst uriMatches = FilterOptions._filter(this.options.textFilter.text, basename(resourceMarkers.resource));\n\t\t\tif (uriMatches) {\n\t\t\t\treturn { visibility: true, data: { type: FilterDataType.Resource, uriMatches: uriMatches || [] } };\n\t\t\t}\n\t\t}\n\n\t\treturn TreeVisibility.Recurse;\n\t}\n\n\tprivate filterCommentNode(comment: CommentNode, parentVisibility: TreeVisibility): TreeFilterResult<FilterData> {\n\t\tconst matchesResolvedState = (comment.threadState === undefined) || (this.options.showResolved && CommentThreadState.Resolved === comment.threadState) ||\n\t\t\t(this.options.showUnresolved && CommentThreadState.Unresolved === comment.threadState);\n\n\t\tif (!matchesResolvedState) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.options.textFilter.text) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst textMatches =\n\t\t\t// Check body of comment for value\n\t\t\tFilterOptions._messageFilter(this.options.textFilter.text, typeof comment.comment.body === 'string' ? comment.comment.body : comment.comment.body.value)\n\t\t\t// Check first user for value\n\t\t\t|| FilterOptions._messageFilter(this.options.textFilter.text, comment.comment.userName)\n\t\t\t// Check all replies for value\n\t\t\t|| (comment.replies.map(reply => {\n\t\t\t\t// Check user for value\n\t\t\t\treturn FilterOptions._messageFilter(this.options.textFilter.text, reply.comment.userName)\n\t\t\t\t\t// Check body of reply for value\n\t\t\t\t\t|| FilterOptions._messageFilter(this.options.textFilter.text, typeof reply.comment.body === 'string' ? reply.comment.body : reply.comment.body.value);\n\t\t\t}).filter(value => !!value) as IMatch[][]).flat();\n\n\t\t// Matched and not negated\n\t\tif (textMatches.length && !this.options.textFilter.negate) {\n\t\t\treturn { visibility: true, data: { type: FilterDataType.Comment, textMatches } };\n\t\t}\n\n\t\t// Matched and negated - exclude it only if parent visibility is not set\n\t\tif (textMatches.length && this.options.textFilter.negate && parentVisibility === TreeVisibility.Recurse) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Not matched and negated - include it only if parent visibility is not set\n\t\tif ((textMatches.length === 0) && this.options.textFilter.negate && parentVisibility === TreeVisibility.Recurse) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn parentVisibility;\n\t}\n}\n\nexport class CommentsList extends WorkbenchObjectTree<CommentsModel | ResourceWithCommentThreads | CommentNode, any> {\n\tprivate readonly menus: CommentsMenus;\n\n\tconstructor(\n\t\tlabels: ResourceLabels,\n\t\tcontainer: HTMLElement,\n\t\toptions: ICommentsListOptions,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IListService listService: IListService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService,\n\t\t@IKeybindingService private readonly keybindingService: IKeybindingService\n\t) {\n\t\tconst delegate = new CommentsModelVirtualDelegate();\n\t\tconst actionViewItemProvider = createActionViewItem.bind(undefined, instantiationService);\n\t\tconst menus = instantiationService.createInstance(CommentsMenus);\n\t\tmenus.setContextKeyService(contextKeyService);\n\t\tconst renderers = [\n\t\t\tinstantiationService.createInstance(ResourceWithCommentsRenderer, labels),\n\t\t\tinstantiationService.createInstance(CommentNodeRenderer, actionViewItemProvider, menus)\n\t\t];\n\n\t\tsuper(\n\t\t\t'CommentsTree',\n\t\t\tcontainer,\n\t\t\tdelegate,\n\t\t\trenderers,\n\t\t\t{\n\t\t\t\taccessibilityProvider: options.accessibilityProvider,\n\t\t\t\tidentityProvider: {\n\t\t\t\t\tgetId: (element: any) => {\n\t\t\t\t\t\tif (element instanceof CommentsModel) {\n\t\t\t\t\t\t\treturn 'root';\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (element instanceof ResourceWithCommentThreads) {\n\t\t\t\t\t\t\treturn `${element.uniqueOwner}-${element.id}`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (element instanceof CommentNode) {\n\t\t\t\t\t\t\treturn `${element.uniqueOwner}-${element.resource.toString()}-${element.threadId}-${element.comment.uniqueIdInThread}` + (element.isRoot ? '-root' : '');\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn '';\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\texpandOnlyOnTwistieClick: true,\n\t\t\t\tcollapseByDefault: false,\n\t\t\t\toverrideStyles: options.overrideStyles,\n\t\t\t\tfilter: options.filter,\n\t\t\t\tsorter: options.sorter,\n\t\t\t\tfindWidgetEnabled: false,\n\t\t\t\tmultipleSelectionSupport: false,\n\t\t\t},\n\t\t\tinstantiationService,\n\t\t\tcontextKeyService,\n\t\t\tlistService,\n\t\t\tconfigurationService,\n\t\t);\n\t\tthis.menus = menus;\n\t\tthis.disposables.add(this.onContextMenu(e => this.commentsOnContextMenu(e)));\n\t}\n\n\tprivate commentsOnContextMenu(treeEvent: ITreeContextMenuEvent<CommentsModel | ResourceWithCommentThreads | CommentNode | null>): void {\n\t\tconst node: CommentsModel | ResourceWithCommentThreads | CommentNode | null = treeEvent.element;\n\t\tif (!(node instanceof CommentNode)) {\n\t\t\treturn;\n\t\t}\n\t\tconst event: UIEvent = treeEvent.browserEvent;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tthis.setFocus([node]);\n\t\tconst actions = this.menus.getResourceContextActions(node);\n\t\tif (!actions.length) {\n\t\t\treturn;\n\t\t}\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tgetAnchor: () => treeEvent.anchor,\n\t\t\tgetActions: () => actions,\n\t\t\tgetActionViewItem: (action) => {\n\t\t\t\tconst keybinding = this.keybindingService.lookupKeybinding(action.id);\n\t\t\t\tif (keybinding) {\n\t\t\t\t\treturn new ActionViewItem(action, action, { label: true, keybinding: keybinding.getLabel() });\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t},\n\t\t\tonHide: (wasCancelled?: boolean) => {\n\t\t\t\tif (wasCancelled) {\n\t\t\t\t\tthis.domFocus();\n\t\t\t\t}\n\t\t\t},\n\t\t\tgetActionsContext: (): MarshalledCommentThreadInternal => ({\n\t\t\t\tcommentControlHandle: node.controllerHandle,\n\t\t\t\tcommentThreadHandle: node.threadHandle,\n\t\t\t\t$mid: MarshalledId.CommentThread,\n\t\t\t\tthread: node.thread\n\t\t\t})\n\t\t});\n\t}\n\n\tfilterComments(): void {\n\t\tthis.refilter();\n\t}\n\n\tgetVisibleItemCount(): number {\n\t\tlet filtered = 0;\n\t\tconst root = this.getNode();\n\n\t\tfor (const resourceNode of root.children) {\n\t\t\tfor (const commentNode of resourceNode.children) {\n\t\t\t\tif (commentNode.visible && resourceNode.visible) {\n\t\t\t\t\tfiltered++;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn filtered;\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;AAKA,YAAY,SAAS;AACrB,YAAY,SAAS;AACrB,SAAS,sBAAsB;AAC/B,SAAS,aAAa,uBAAuB;AAC7C,SAAS,sBAAsB;AAC/B,SAAS,gBAAgB,sBAAsB;AAC/C,SAAS,aAAa,kCAAkC;AACxD,SAAS,uBAAuB,aAAa,WAAW,kBAAkB,sBAAsB;AAChG,SAAS,sBAAsB,qBAAqB;AACpD,SAAS,6BAA6B;AACtC,SAAS,0BAA0B;AACnC,SAAS,cAAc,gCAAgC,2BAA2B;AAClF,SAAS,aAAa,qBAAqB;AAC3C,SAAS,6BAA6B;AACtC,SAAS,uBAAuB;AAChC,SAAS,eAAe;AACxB,SAAS,iBAAiB;AAC1B,SAAS,uBAAuB;AAChC,SAAS,gCAAgC,sCAAsC;AAC/E,SAAS,4BAA4B,0BAA0B;AAC/D,SAAS,aAAa;AACtB,SAAS,cAAc;AACvB,SAAS,qBAAqB;AAC9B,SAAS,gBAAgB;AACzB,SAAS,4BAA4B;AACrC,SAAS,sBAAsB;AAC/B,SAAS,mBAAmB;AAC5B,SAAS,wBAAwB;AACjC,SAAS,qBAAqB;AAC9B,SAAS,+BAA+B;AACxC,SAAS,WAAW,+BAA+B;AACnD,SAAS,sBAAsB,yCAAyC;AACxE,SAAS,cAAc,cAAc;AACrC,SAAS,eAAe;AACxB,SAAS,oBAAoB;AAC7B,SAAS,2BAA2B;AACpC,SAAS,sBAAsB;AAC/B,SAAS,0BAA0B;AACnC,SAAS,yBAAyB,uCAAuC;AACzE,SAAS,qBAAqB;AAEvB,MAAM,mBAAmB;AACzB,MAAM,2BAA2B;AACjC,MAAM,sBAAwC,IAAI,UAAU,uBAAuB,UAAU;AA8BpG,MAAM,6BAAuG;AAAA,EA9E7G,OA8E6G;AAAA;AAAA;AAAA,EAC5G,OAAwB,cAAc;AAAA,EACtC,OAAwB,aAAa;AAAA,EAGrC,UAAU,SAAsB;AAC/B,QAAK,mBAAmB,eAAgB,QAAQ,SAAS,GAAG;AAC3D,aAAO;AAAA,IACR;AACA,WAAO;AAAA,EACR;AAAA,EAEO,cAAc,SAAsB;AAC1C,QAAI,mBAAmB,4BAA4B;AAClD,aAAO,6BAA6B;AAAA,IACrC;AACA,QAAI,mBAAmB,aAAa;AACnC,aAAO,6BAA6B;AAAA,IACrC;AAEA,WAAO;AAAA,EACR;AACD;AAEO,MAAM,6BAAoH;AAAA,EAGhI,YACS,QACP;AADO;AAAA,EAET;AAAA,EA5GD,OAsGiI;AAAA;AAAA;AAAA,EAChI,aAAqB;AAAA,EAOrB,eAAe,WAAwB;AACtC,UAAM,iBAAiB,IAAI,OAAO,WAAW,IAAI,EAAE,qBAAqB,CAAC;AACzE,UAAM,gBAAgB,KAAK,OAAO,OAAO,cAAc;AACvD,UAAM,YAAY,IAAI,OAAO,gBAAgB,IAAI,EAAE,YAAY,CAAC;AAChE,UAAM,QAAQ,eAAe,YAAY,IAAI,EAAE,QAAQ,CAAC;AAExD,WAAO,EAAE,eAAe,OAAO,UAAU;AAAA,EAC1C;AAAA,EAEA,cAAc,MAA6C,OAAe,cAAqC,QAAkC;AAChJ,iBAAa,cAAc,QAAQ,KAAK,QAAQ,QAAQ;AACxD,iBAAa,UAAU,YAAY;AAEnC,QAAI,KAAK,QAAQ,YAAY;AAC5B,mBAAa,MAAM,YAAY,KAAK,QAAQ;AAC5C,mBAAa,UAAU,MAAM,UAAU;AAAA,IACxC,OAAO;AACN,mBAAa,MAAM,YAAY;AAC/B,mBAAa,UAAU,MAAM,UAAU;AAAA,IACxC;AAAA,EACD;AAAA,EAEA,gBAAgB,cAA2C;AAC1D,iBAAa,cAAc,QAAQ;AAAA,EACpC;AACD;AAEO,IAAM,gBAAN,MAA2C;AAAA,EAGjD,YACgC,aAC9B;AAD8B;AAAA,EAC5B;AAAA,EA9IL,OAyIkD;AAAA;AAAA;AAAA,EACzC;AAAA,EAMR,mBAAmB,SAA8C;AAChE,UAAM,UAAU,KAAK,WAAW,OAAO,2BAA2B,OAAO;AACzE,WAAO,EAAE,SAAS,QAAQ,QAAQ;AAAA,EACnC;AAAA,EAEA,0BAA0B,SAAiC;AAC1D,WAAO,KAAK,WAAW,OAAO,2BAA2B,OAAO,EAAE;AAAA,EACnE;AAAA,EAEO,qBAAqB,SAA6B;AACxD,SAAK,oBAAoB;AAAA,EAC1B;AAAA,EAEQ,WAAW,QAAgB,SAAoE;AACtG,QAAI,CAAC,KAAK,mBAAmB;AAC5B,aAAO,EAAE,SAAS,CAAC,GAAG,WAAW,CAAC,EAAE;AAAA,IACrC;AAEA,UAAM,UAA2B;AAAA,MAChC,CAAC,qBAAqB,QAAQ,KAAK;AAAA,MACnC,CAAC,kBAAkB,QAAQ,SAAS,MAAM;AAAA,MAC1C,CAAC,iBAAiB,QAAQ,YAAY;AAAA,MACtC,CAAC,YAAY,QAAQ,OAAO,QAAQ;AAAA,IACrC;AACA,UAAM,oBAAoB,KAAK,kBAAkB,cAAc,OAAO;AAEtE,UAAM,OAAO,KAAK,YAAY,eAAe,QAAQ,mBAAmB,EAAE,mBAAmB,KAAK,CAAC;AACnG,UAAM,UAAqB,CAAC;AAC5B,UAAM,YAAuB,CAAC;AAC9B,UAAM,SAAS,EAAE,SAAS,WAAW,KAAK;AAC1C,sCAAkC,MAAM,QAAQ,QAAQ;AAExD,WAAO;AAAA,EACR;AAAA,EAEA,UAAU;AACT,SAAK,oBAAoB;AAAA,EAC1B;AACD;AA7Ca,gBAAN;AAAA,EAIJ;AAAA,GAJU;AA+CN,IAAM,sBAAN,MAAuG;AAAA,EAG7G,YACS,wBACA,OACyB,eACO,sBACR,cACT,cACtB;AANO;AACA;AACyB;AACO;AACR;AACT;AAAA,EACpB;AAAA,EAlML,OAwL8G;AAAA;AAAA;AAAA,EAC7G,aAAqB;AAAA,EAWrB,eAAe,WAAwB;AACtC,UAAM,kBAAkB,IAAI,OAAO,WAAW,IAAI,EAAE,2BAA2B,CAAC;AAChF,UAAM,oBAAoB,IAAI,OAAO,iBAAiB,IAAI,EAAE,6BAA6B,CAAC;AAC1F,UAAM,WAAW,IAAI,OAAO,mBAAmB,IAAI,EAAE,mBAAmB,CAAC;AACzE,UAAM,iBAAiB;AAAA,MACtB,MAAM,IAAI,OAAO,UAAU,IAAI,EAAE,OAAO,CAAC;AAAA,MACzC,WAAW,IAAI,OAAO,UAAU,IAAI,EAAE,OAAO,CAAC;AAAA,MAC9C,WAAW,IAAI,gBAAgB,KAAK,sBAAsB,KAAK,cAAc,IAAI,OAAO,UAAU,IAAI,EAAE,sBAAsB,CAAC,CAAC;AAAA,MAChI,WAAW,IAAI,OAAO,UAAU,IAAI,EAAE,YAAY,CAAC;AAAA,MACnD,WAAW,IAAI,OAAO,UAAU,IAAI,EAAE,YAAY,CAAC;AAAA,MACnD,gBAAgB,IAAI,OAAO,UAAU,IAAI,EAAE,OAAO,CAAC;AAAA,MACnD,OAAO,IAAI,OAAO,UAAU,IAAI,EAAE,QAAQ,CAAC;AAAA,IAC5C;AACA,mBAAe,UAAU,YAAY;AAErC,UAAM,mBAAmB,IAAI,OAAO,mBAAmB,IAAI,EAAE,UAAU,CAAC;AACxE,UAAM,YAAY,IAAI,UAAU,kBAAkB;AAAA,MACjD,wBAAwB,KAAK;AAAA,IAC9B,CAAC;AAED,UAAM,mBAAmB,IAAI,OAAO,iBAAiB,IAAI,EAAE,4BAA4B,CAAC;AACxF,UAAM,kBAAkB;AAAA,MACvB,WAAW;AAAA,MACX,MAAM,IAAI,OAAO,kBAAkB,IAAI,EAAE,OAAO,CAAC;AAAA,MACjD,OAAO,IAAI,OAAO,kBAAkB,IAAI,EAAE,QAAQ,CAAC;AAAA,MACnD,iBAAiB,IAAI,OAAO,kBAAkB,IAAI,EAAE,eAAe,CAAC;AAAA,MACpE,WAAW,IAAI,OAAO,kBAAkB,IAAI,EAAE,YAAY,CAAC;AAAA,MAC3D,WAAW,IAAI,gBAAgB,KAAK,sBAAsB,KAAK,cAAc,IAAI,OAAO,kBAAkB,IAAI,EAAE,sBAAsB,CAAC,CAAC;AAAA,IACzI;AACA,oBAAgB,UAAU,YAAY;AACtC,oBAAgB,KAAK,UAAU,IAAI,GAAG,UAAU,iBAAiB,QAAQ,MAAM,CAAC;AAEhF,UAAM,cAAc,CAAC,eAAe,WAAW,gBAAgB,SAAS;AACxE,WAAO,EAAE,gBAAgB,iBAAiB,WAAW,YAAY;AAAA,EAClE;AAAA,EAEQ,eAAe,cAA8B;AACpD,QAAI,eAAe,GAAG;AACrB,aAAO,IAAI,SAAS,wBAAwB,eAAe,eAAe,CAAC;AAAA,IAC5E,WAAW,iBAAiB,GAAG;AAC9B,aAAO,IAAI,SAAS,sBAAsB,SAAS;AAAA,IACpD,OAAO;AACN,aAAO,IAAI,SAAS,gBAAgB,WAAW;AAAA,IAChD;AAAA,EACD;AAAA,EAEQ,mBAAmB,aAA8B,aAA8B;AACtF,UAAM,kBAAkB,eAAe,aAAa;AAAA,MACnD,QAAQ;AAAA,MACR,eAAe;AAAA,QACd,UAAU,wBAAC,SAAS,qBAAqB,KAAK,eAAe,MAAM,YAAY,SAAS,GAA9E;AAAA,QACV;AAAA,MACD;AAAA,IACD,CAAC;AACD,UAAM,SAAS,gBAAgB,QAAQ,qBAAqB,KAAK;AACjE,aAAS,IAAI,GAAG,IAAI,OAAO,QAAQ,KAAK;AACvC,YAAM,QAAQ,OAAO,CAAC;AACtB,YAAM,kBAAkB,IAAI,EAAE,EAAE;AAChC,sBAAgB,cAAc,MAAM,MAAM,IAAI,SAAS,kBAAkB,cAAc,MAAM,GAAG,IAAI,IAAI,SAAS,SAAS,OAAO;AACjI,YAAM,WAAY,aAAa,iBAAiB,KAAK;AAAA,IACtD;AACA,WAAQ,gBAAgB,QAAQ,SAAS,SAAS,KAAO,gBAAgB,QAAQ,mBAAmB,YAAY,MAAO;AACtH,sBAAgB,QAAQ,YAAY,gBAAgB,QAAQ,iBAAiB;AAAA,IAC9E;AACA,WAAO;AAAA,EACR;AAAA,EAEQ,QAAQ,aAA6C;AAC5D,QAAI,gBAAgB,mBAAmB,YAAY;AAClD,aAAO,QAAQ;AAAA,IAChB,OAAO;AACN,aAAO,QAAQ;AAAA,IAChB;AAAA,EACD;AAAA,EAEA,cAAc,MAA8B,OAAe,cAA0C,QAAkC;AACtI,iBAAa,UAAU,MAAM;AAE7B,UAAM,eAAe,KAAK,QAAQ,QAAQ,SAAS;AACnD,QAAI,KAAK,QAAQ,oBAAoB,2BAA2B,UAAU;AACzE,mBAAa,eAAe,UAAU,MAAM,UAAU;AACtD,mBAAa,eAAe,UAAU,YAAY,IAAI,SAAS,YAAY,UAAU;AACrF,mBAAa,eAAe,UAAU,MAAM,UAAU;AAAA,IACvD,OAAO;AACN,mBAAa,eAAe,UAAU,YAAY;AAClD,mBAAa,eAAe,UAAU,MAAM,UAAU;AACtD,mBAAa,eAAe,UAAU,MAAM,UAAU;AAAA,IACvD;AAEA,iBAAa,eAAe,KAAK,UAAU,OAAO,GAAG,MAAM,KAAK,aAAa,eAAe,KAAK,UAAU,OAAO,CAAC,EACjH,OAAO,WAAS,MAAM,WAAW,SAAS,CAAC,CAAC;AAC9C,iBAAa,eAAe,KAAK,UAAU,IAAI,GAAG,UAAU,iBAAiB,KAAK,QAAQ,KAAK,QAAQ,WAAW,CAAC,CAAC;AACpH,QAAI,KAAK,QAAQ,gBAAgB,QAAW;AAC3C,YAAM,QAAQ,KAAK,iCAAiC,KAAK,QAAQ,aAAa,KAAK,aAAa,cAAc,CAAC;AAC/G,mBAAa,eAAe,KAAK,MAAM,YAAY,gCAAgC,GAAG,KAAK,EAAE;AAC7F,mBAAa,eAAe,KAAK,MAAM,QAAQ,OAAO,8BAA8B;AAAA,IACrF;AACA,iBAAa,eAAe,UAAU,cAAc,KAAK,QAAQ,QAAQ;AACzE,iBAAa,eAAe,UAAU,aAAa,KAAK,QAAQ,QAAQ,YAAY,IAAI,KAAK,KAAK,QAAQ,QAAQ,SAAS,IAAI,MAAS;AACxI,UAAM,kBAAkB,KAAK;AAE7B,iBAAa,eAAe,eAAe,YAAY;AACvD,iBAAa,eAAe,eAAe,MAAM,SAAS;AAC1D,QAAI,OAAO,gBAAgB,QAAQ,SAAS,UAAU;AACrD,mBAAa,eAAe,eAAe,YAAY,gBAAgB,QAAQ;AAAA,IAChF,OAAO;AACN,YAAM,cAAc,IAAI,gBAAgB;AACxC,mBAAa,YAAY,KAAK,WAAW;AACzC,YAAM,kBAAkB,KAAK,mBAAmB,gBAAgB,QAAQ,MAAM,WAAW;AACzF,mBAAa,YAAY,KAAK,eAAe;AAC7C,mBAAa,eAAe,eAAe,YAAY,gBAAgB,QAAQ,qBAAqB,gBAAgB,OAAO;AAC3H,mBAAa,YAAY,KAAK,KAAK,aAAa,kBAAkB,wBAAwB,OAAO,GAAG,aAAa,eAAe,gBAAgB,gBAAgB,QAAQ,eAAe,EAAE,CAAC;AAAA,IAC3L;AAEA,QAAI,KAAK,QAAQ,OAAO;AACvB,UAAI,KAAK,QAAQ,MAAM,oBAAoB,KAAK,QAAQ,MAAM,eAAe;AAC5E,qBAAa,eAAe,MAAM,cAAc,IAAI,SAAS,eAAe,YAAY,KAAK,QAAQ,MAAM,eAAe;AAAA,MAC3H,OAAO;AACN,qBAAa,eAAe,MAAM,cAAc,IAAI,SAAS,gBAAgB,gBAAgB,KAAK,QAAQ,MAAM,iBAAiB,KAAK,QAAQ,MAAM,aAAa;AAAA,MAClK;AAAA,IACD;AAEA,UAAM,cAAc,KAAK,MAAM,mBAAmB,KAAK,OAAO;AAC9D,iBAAa,UAAU,KAAK,YAAY,SAAS,EAAE,MAAM,MAAM,OAAO,MAAM,CAAC;AAC7E,iBAAa,UAAU,UAAU;AAAA,MAChC,sBAAsB,KAAK,QAAQ;AAAA,MACnC,qBAAqB,KAAK,QAAQ;AAAA,MAClC,MAAM,aAAa;AAAA,IACpB;AAEA,QAAI,CAAC,KAAK,QAAQ,SAAS,GAAG;AAC7B,mBAAa,gBAAgB,UAAU,MAAM,UAAU;AACvD;AAAA,IACD;AAEA,iBAAa,gBAAgB,UAAU,MAAM,UAAU;AACvD,iBAAa,gBAAgB,MAAM,cAAc,KAAK,eAAe,YAAY;AACjF,UAAM,cAAc,KAAK,QAAQ,QAAQ,KAAK,QAAQ,QAAQ,SAAS,CAAC,EAAE;AAC1E,iBAAa,gBAAgB,gBAAgB,cAAc,IAAI,SAAS,iBAAiB,uBAAuB,YAAY,QAAQ;AACpI,iBAAa,gBAAgB,UAAU,aAAa,YAAY,YAAY,IAAI,KAAK,YAAY,SAAS,IAAI,MAAS;AAAA,EACxH;AAAA,EAEQ,iCAAiC,OAAuC,OAAuC;AACtH,WAAQ,UAAU,SAAa,+BAA+B,OAAO,KAAK,IAAI;AAAA,EAC/E;AAAA,EAEA,gBAAgB,cAAgD;AAC/D,iBAAa,YAAY,QAAQ,iBAAe,YAAY,QAAQ,CAAC;AACrE,iBAAa,UAAU,QAAQ;AAAA,EAChC;AACD;AAlKa,sBAAN;AAAA,EAMJ;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,GATU;AAwKb,IAAW,iBAAX,kBAAWA,oBAAX;AACC,EAAAA,gCAAA;AACA,EAAAA,gCAAA;AAFU,SAAAA;AAAA,GAAA;AAiBJ,MAAM,OAAoF;AAAA,EAEhG,YAAmB,SAAwB;AAAxB;AAAA,EAA0B;AAAA,EAnX9C,OAiXiG;AAAA;AAAA;AAAA,EAIhG,OAAO,SAAmD,kBAAgE;AACzH,QAAI,KAAK,QAAQ,WAAW,MAAM,KAAK,QAAQ,gBAAgB,KAAK,QAAQ,gBAAgB;AAC3F,aAAO,eAAe;AAAA,IACvB;AAEA,QAAI,mBAAmB,4BAA4B;AAClD,aAAO,KAAK,sBAAsB,OAAO;AAAA,IAC1C,OAAO;AACN,aAAO,KAAK,kBAAkB,SAAS,gBAAgB;AAAA,IACxD;AAAA,EACD;AAAA,EAEQ,sBAAsB,iBAA2E;AAExG,QAAI,KAAK,QAAQ,WAAW,QAAQ,CAAC,KAAK,QAAQ,WAAW,QAAQ;AACpE,YAAM,aAAa,cAAc,QAAQ,KAAK,QAAQ,WAAW,MAAM,SAAS,gBAAgB,QAAQ,CAAC;AACzG,UAAI,YAAY;AACf,eAAO,EAAE,YAAY,MAAM,MAAM,EAAE,MAAM,kBAAyB,YAAY,cAAc,CAAC,EAAE,EAAE;AAAA,MAClG;AAAA,IACD;AAEA,WAAO,eAAe;AAAA,EACvB;AAAA,EAEQ,kBAAkB,SAAsB,kBAAgE;AAC/G,UAAM,uBAAwB,QAAQ,gBAAgB,UAAe,KAAK,QAAQ,gBAAgB,mBAAmB,aAAa,QAAQ,eACxI,KAAK,QAAQ,kBAAkB,mBAAmB,eAAe,QAAQ;AAE3E,QAAI,CAAC,sBAAsB;AAC1B,aAAO;AAAA,IACR;AAEA,QAAI,CAAC,KAAK,QAAQ,WAAW,MAAM;AAClC,aAAO;AAAA,IACR;AAEA,UAAM;AAAA;AAAA,MAEL,cAAc,eAAe,KAAK,QAAQ,WAAW,MAAM,OAAO,QAAQ,QAAQ,SAAS,WAAW,QAAQ,QAAQ,OAAO,QAAQ,QAAQ,KAAK,KAAK,KAEpJ,cAAc,eAAe,KAAK,QAAQ,WAAW,MAAM,QAAQ,QAAQ,QAAQ,KAElF,QAAQ,QAAQ,IAAI,WAAS;AAEhC,eAAO,cAAc,eAAe,KAAK,QAAQ,WAAW,MAAM,MAAM,QAAQ,QAAQ,KAEpF,cAAc,eAAe,KAAK,QAAQ,WAAW,MAAM,OAAO,MAAM,QAAQ,SAAS,WAAW,MAAM,QAAQ,OAAO,MAAM,QAAQ,KAAK,KAAK;AAAA,MACtJ,CAAC,EAAE,OAAO,WAAS,CAAC,CAAC,KAAK,EAAiB,KAAK;AAAA;AAGjD,QAAI,YAAY,UAAU,CAAC,KAAK,QAAQ,WAAW,QAAQ;AAC1D,aAAO,EAAE,YAAY,MAAM,MAAM,EAAE,MAAM,iBAAwB,YAAY,EAAE;AAAA,IAChF;AAGA,QAAI,YAAY,UAAU,KAAK,QAAQ,WAAW,UAAU,qBAAqB,eAAe,SAAS;AACxG,aAAO;AAAA,IACR;AAGA,QAAK,YAAY,WAAW,KAAM,KAAK,QAAQ,WAAW,UAAU,qBAAqB,eAAe,SAAS;AAChH,aAAO;AAAA,IACR;AAEA,WAAO;AAAA,EACR;AACD;AAEO,IAAM,eAAN,cAA2B,oBAAmF;AAAA,EAGpH,YACC,QACA,WACA,SACoB,mBACN,aACS,sBACA,sBACe,oBACD,mBACpC;AACD,UAAM,WAAW,IAAI,6BAA6B;AAClD,UAAM,yBAAyB,qBAAqB,KAAK,QAAW,oBAAoB;AACxF,UAAM,QAAQ,qBAAqB,eAAe,aAAa;AAC/D,UAAM,qBAAqB,iBAAiB;AAC5C,UAAM,YAAY;AAAA,MACjB,qBAAqB,eAAe,8BAA8B,MAAM;AAAA,MACxE,qBAAqB,eAAe,qBAAqB,wBAAwB,KAAK;AAAA,IACvF;AAEA;AAAA,MACC;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,QACC,uBAAuB,QAAQ;AAAA,QAC/B,kBAAkB;AAAA,UACjB,OAAO,wBAAC,YAAiB;AACxB,gBAAI,mBAAmB,eAAe;AACrC,qBAAO;AAAA,YACR;AACA,gBAAI,mBAAmB,4BAA4B;AAClD,qBAAO,GAAG,QAAQ,WAAW,IAAI,QAAQ,EAAE;AAAA,YAC5C;AACA,gBAAI,mBAAmB,aAAa;AACnC,qBAAO,GAAG,QAAQ,WAAW,IAAI,QAAQ,SAAS,SAAS,CAAC,IAAI,QAAQ,QAAQ,IAAI,QAAQ,QAAQ,gBAAgB,MAAM,QAAQ,SAAS,UAAU;AAAA,YACtJ;AACA,mBAAO;AAAA,UACR,GAXO;AAAA,QAYR;AAAA,QACA,0BAA0B;AAAA,QAC1B,mBAAmB;AAAA,QACnB,gBAAgB,QAAQ;AAAA,QACxB,QAAQ,QAAQ;AAAA,QAChB,QAAQ,QAAQ;AAAA,QAChB,mBAAmB;AAAA,QACnB,0BAA0B;AAAA,MAC3B;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACD;AA7CsC;AACD;AA6CrC,SAAK,QAAQ;AACb,SAAK,YAAY,IAAI,KAAK,cAAc,OAAK,KAAK,sBAAsB,CAAC,CAAC,CAAC;AAAA,EAC5E;AAAA,EApfD,OAybqH;AAAA;AAAA;AAAA,EACnG;AAAA,EA4DT,sBAAsB,WAAyG;AACtI,UAAM,OAAwE,UAAU;AACxF,QAAI,EAAE,gBAAgB,cAAc;AACnC;AAAA,IACD;AACA,UAAM,QAAiB,UAAU;AAEjC,UAAM,eAAe;AACrB,UAAM,gBAAgB;AAEtB,SAAK,SAAS,CAAC,IAAI,CAAC;AACpB,UAAM,UAAU,KAAK,MAAM,0BAA0B,IAAI;AACzD,QAAI,CAAC,QAAQ,QAAQ;AACpB;AAAA,IACD;AACA,SAAK,mBAAmB,gBAAgB;AAAA,MACvC,WAAW,6BAAM,UAAU,QAAhB;AAAA,MACX,YAAY,6BAAM,SAAN;AAAA,MACZ,mBAAmB,wBAAC,WAAW;AAC9B,cAAM,aAAa,KAAK,kBAAkB,iBAAiB,OAAO,EAAE;AACpE,YAAI,YAAY;AACf,iBAAO,IAAI,eAAe,QAAQ,QAAQ,EAAE,OAAO,MAAM,YAAY,WAAW,SAAS,EAAE,CAAC;AAAA,QAC7F;AACA,eAAO;AAAA,MACR,GANmB;AAAA,MAOnB,QAAQ,wBAAC,iBAA2B;AACnC,YAAI,cAAc;AACjB,eAAK,SAAS;AAAA,QACf;AAAA,MACD,GAJQ;AAAA,MAKR,mBAAmB,8BAAwC;AAAA,QAC1D,sBAAsB,KAAK;AAAA,QAC3B,qBAAqB,KAAK;AAAA,QAC1B,MAAM,aAAa;AAAA,QACnB,QAAQ,KAAK;AAAA,MACd,IALmB;AAAA,IAMpB,CAAC;AAAA,EACF;AAAA,EAEA,iBAAuB;AACtB,SAAK,SAAS;AAAA,EACf;AAAA,EAEA,sBAA8B;AAC7B,QAAI,WAAW;AACf,UAAM,OAAO,KAAK,QAAQ;AAE1B,eAAW,gBAAgB,KAAK,UAAU;AACzC,iBAAW,eAAe,aAAa,UAAU;AAChD,YAAI,YAAY,WAAW,aAAa,SAAS;AAChD;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAEA,WAAO;AAAA,EACR;AACD;AAtHa,eAAN;AAAA,EAOJ;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,GAZU;",
  "names": ["FilterDataType"]
}
