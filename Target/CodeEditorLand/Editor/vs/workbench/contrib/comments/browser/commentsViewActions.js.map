{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/comments/browser/commentsViewActions.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { KeyCode, KeyMod } from '../../../../base/common/keyCodes.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { localize } from '../../../../nls.js';\nimport { ServicesAccessor } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ContextKeyExpr, IContextKey, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { Event, Emitter } from '../../../../base/common/event.js';\nimport { CommentsViewFilterFocusContextKey, ICommentsView } from './comments.js';\nimport { MenuId, MenuRegistry, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { ViewAction } from '../../../browser/parts/views/viewPane.js';\nimport { KeybindingWeight } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { COMMENTS_VIEW_ID } from './commentsTreeViewer.js';\nimport { FocusedViewContext } from '../../../common/contextkeys.js';\nimport { viewFilterSubmenu } from '../../../browser/parts/views/viewFilter.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\n\nexport const enum CommentsSortOrder {\n\tResourceAscending = 'resourceAscending',\n\tUpdatedAtDescending = 'updatedAtDescending',\n}\n\n\nconst CONTEXT_KEY_SHOW_RESOLVED = new RawContextKey<boolean>('commentsView.showResolvedFilter', true);\nconst CONTEXT_KEY_SHOW_UNRESOLVED = new RawContextKey<boolean>('commentsView.showUnResolvedFilter', true);\nconst CONTEXT_KEY_SORT_BY = new RawContextKey<CommentsSortOrder>('commentsView.sortBy', CommentsSortOrder.ResourceAscending);\n\nexport interface CommentsFiltersChangeEvent {\n\tshowResolved?: boolean;\n\tshowUnresolved?: boolean;\n\tsortBy?: CommentsSortOrder;\n}\n\ninterface CommentsFiltersOptions {\n\tshowResolved: boolean;\n\tshowUnresolved: boolean;\n\tsortBy: CommentsSortOrder;\n}\n\nexport class CommentsFilters extends Disposable {\n\n\tprivate readonly _onDidChange: Emitter<CommentsFiltersChangeEvent> = this._register(new Emitter<CommentsFiltersChangeEvent>());\n\treadonly onDidChange: Event<CommentsFiltersChangeEvent> = this._onDidChange.event;\n\n\tconstructor(options: CommentsFiltersOptions, private readonly contextKeyService: IContextKeyService) {\n\t\tsuper();\n\t\tthis._showResolved.set(options.showResolved);\n\t\tthis._showUnresolved.set(options.showUnresolved);\n\t\tthis._sortBy.set(options.sortBy);\n\t}\n\n\tprivate readonly _showUnresolved = CONTEXT_KEY_SHOW_UNRESOLVED.bindTo(this.contextKeyService);\n\tget showUnresolved(): boolean {\n\t\treturn !!this._showUnresolved.get();\n\t}\n\tset showUnresolved(showUnresolved: boolean) {\n\t\tif (this._showUnresolved.get() !== showUnresolved) {\n\t\t\tthis._showUnresolved.set(showUnresolved);\n\t\t\tthis._onDidChange.fire({ showUnresolved: true });\n\t\t}\n\t}\n\n\tprivate _showResolved = CONTEXT_KEY_SHOW_RESOLVED.bindTo(this.contextKeyService);\n\tget showResolved(): boolean {\n\t\treturn !!this._showResolved.get();\n\t}\n\tset showResolved(showResolved: boolean) {\n\t\tif (this._showResolved.get() !== showResolved) {\n\t\t\tthis._showResolved.set(showResolved);\n\t\t\tthis._onDidChange.fire({ showResolved: true });\n\t\t}\n\t}\n\n\tprivate _sortBy: IContextKey<CommentsSortOrder> = CONTEXT_KEY_SORT_BY.bindTo(this.contextKeyService);\n\tget sortBy(): CommentsSortOrder {\n\t\treturn this._sortBy.get() ?? CommentsSortOrder.ResourceAscending;\n\t}\n\tset sortBy(sortBy: CommentsSortOrder) {\n\t\tif (this._sortBy.get() !== sortBy) {\n\t\t\tthis._sortBy.set(sortBy);\n\t\t\tthis._onDidChange.fire({ sortBy });\n\t\t}\n\t}\n}\n\nregisterAction2(class extends ViewAction<ICommentsView> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'commentsFocusViewFromFilter',\n\t\t\ttitle: localize('focusCommentsList', \"Focus Comments view\"),\n\t\t\tkeybinding: {\n\t\t\t\twhen: CommentsViewFilterFocusContextKey,\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.DownArrow\n\t\t\t},\n\t\t\tviewId: COMMENTS_VIEW_ID\n\t\t});\n\t}\n\tasync runInView(serviceAccessor: ServicesAccessor, commentsView: ICommentsView): Promise<void> {\n\t\tcommentsView.focus();\n\t}\n});\n\nregisterAction2(class extends ViewAction<ICommentsView> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'commentsClearFilterText',\n\t\t\ttitle: localize('commentsClearFilterText', \"Clear filter text\"),\n\t\t\tkeybinding: {\n\t\t\t\twhen: CommentsViewFilterFocusContextKey,\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyCode.Escape\n\t\t\t},\n\t\t\tviewId: COMMENTS_VIEW_ID\n\t\t});\n\t}\n\tasync runInView(serviceAccessor: ServicesAccessor, commentsView: ICommentsView): Promise<void> {\n\t\tcommentsView.clearFilterText();\n\t}\n});\n\nregisterAction2(class extends ViewAction<ICommentsView> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'commentsFocusFilter',\n\t\t\ttitle: localize('focusCommentsFilter', \"Focus comments filter\"),\n\t\t\tkeybinding: {\n\t\t\t\twhen: FocusedViewContext.isEqualTo(COMMENTS_VIEW_ID),\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.KeyF\n\t\t\t},\n\t\t\tviewId: COMMENTS_VIEW_ID\n\t\t});\n\t}\n\tasync runInView(serviceAccessor: ServicesAccessor, commentsView: ICommentsView): Promise<void> {\n\t\tcommentsView.focusFilter();\n\t}\n});\n\nregisterAction2(class extends ViewAction<ICommentsView> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: `workbench.actions.${COMMENTS_VIEW_ID}.toggleUnResolvedComments`,\n\t\t\ttitle: localize('toggle unresolved', \"Show Unresolved\"),\n\t\t\tcategory: localize('comments', \"Comments\"),\n\t\t\ttoggled: {\n\t\t\t\tcondition: CONTEXT_KEY_SHOW_UNRESOLVED,\n\t\t\t\ttitle: localize('unresolved', \"Show Unresolved\"),\n\t\t\t},\n\t\t\tmenu: {\n\t\t\t\tid: viewFilterSubmenu,\n\t\t\t\tgroup: '1_filter',\n\t\t\t\twhen: ContextKeyExpr.equals('view', COMMENTS_VIEW_ID),\n\t\t\t\torder: 1\n\t\t\t},\n\t\t\tviewId: COMMENTS_VIEW_ID\n\t\t});\n\t}\n\n\tasync runInView(serviceAccessor: ServicesAccessor, view: ICommentsView): Promise<void> {\n\t\tview.filters.showUnresolved = !view.filters.showUnresolved;\n\t}\n});\n\nregisterAction2(class extends ViewAction<ICommentsView> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: `workbench.actions.${COMMENTS_VIEW_ID}.toggleResolvedComments`,\n\t\t\ttitle: localize('toggle resolved', \"Show Resolved\"),\n\t\t\tcategory: localize('comments', \"Comments\"),\n\t\t\ttoggled: {\n\t\t\t\tcondition: CONTEXT_KEY_SHOW_RESOLVED,\n\t\t\t\ttitle: localize('resolved', \"Show Resolved\"),\n\t\t\t},\n\t\t\tmenu: {\n\t\t\t\tid: viewFilterSubmenu,\n\t\t\t\tgroup: '1_filter',\n\t\t\t\twhen: ContextKeyExpr.equals('view', COMMENTS_VIEW_ID),\n\t\t\t\torder: 1\n\t\t\t},\n\t\t\tviewId: COMMENTS_VIEW_ID\n\t\t});\n\t}\n\n\tasync runInView(serviceAccessor: ServicesAccessor, view: ICommentsView): Promise<void> {\n\t\tview.filters.showResolved = !view.filters.showResolved;\n\t}\n});\n\nconst commentSortSubmenu = new MenuId('submenu.filter.commentSort');\nMenuRegistry.appendMenuItem(viewFilterSubmenu, {\n\tsubmenu: commentSortSubmenu,\n\ttitle: localize('comment sorts', \"Sort By\"),\n\tgroup: '2_sort',\n\ticon: Codicon.history,\n\twhen: ContextKeyExpr.equals('view', COMMENTS_VIEW_ID),\n});\n\nregisterAction2(class extends ViewAction<ICommentsView> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: `workbench.actions.${COMMENTS_VIEW_ID}.toggleSortByUpdatedAt`,\n\t\t\ttitle: localize('toggle sorting by updated at', \"Updated Time\"),\n\t\t\tcategory: localize('comments', \"Comments\"),\n\t\t\ticon: Codicon.history,\n\t\t\tviewId: COMMENTS_VIEW_ID,\n\t\t\ttoggled: {\n\t\t\t\tcondition: ContextKeyExpr.equals(CONTEXT_KEY_SORT_BY.key, CommentsSortOrder.UpdatedAtDescending),\n\t\t\t\ttitle: localize('sorting by updated at', \"Updated Time\"),\n\t\t\t},\n\t\t\tmenu: {\n\t\t\t\tid: commentSortSubmenu,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 1,\n\t\t\t\tisHiddenByDefault: false,\n\t\t\t},\n\t\t});\n\t}\n\n\tasync runInView(serviceAccessor: ServicesAccessor, view: ICommentsView): Promise<void> {\n\t\tview.filters.sortBy = CommentsSortOrder.UpdatedAtDescending;\n\t}\n});\n\nregisterAction2(class extends ViewAction<ICommentsView> {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: `workbench.actions.${COMMENTS_VIEW_ID}.toggleSortByResource`,\n\t\t\ttitle: localize('toggle sorting by resource', \"Position in File\"),\n\t\t\tcategory: localize('comments', \"Comments\"),\n\t\t\ticon: Codicon.history,\n\t\t\tviewId: COMMENTS_VIEW_ID,\n\t\t\ttoggled: {\n\t\t\t\tcondition: ContextKeyExpr.equals(CONTEXT_KEY_SORT_BY.key, CommentsSortOrder.ResourceAscending),\n\t\t\t\ttitle: localize('sorting by position in file', \"Position in File\"),\n\t\t\t},\n\t\t\tmenu: {\n\t\t\t\tid: commentSortSubmenu,\n\t\t\t\tgroup: 'navigation',\n\t\t\t\torder: 0,\n\t\t\t\tisHiddenByDefault: false,\n\t\t\t},\n\t\t});\n\t}\n\n\tasync runInView(serviceAccessor: ServicesAccessor, view: ICommentsView): Promise<void> {\n\t\tview.filters.sortBy = CommentsSortOrder.ResourceAscending;\n\t}\n});\n"],
  "mappings": "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",
  "names": ["CommentsSortOrder"]
}
