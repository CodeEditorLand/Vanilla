{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/comments/browser/commentFormActions.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Button } from \"../../../../base/browser/ui/button/button.js\";\nimport type { IAction } from \"../../../../base/common/actions.js\";\nimport {\n\tDisposableStore,\n\ttype IDisposable,\n} from \"../../../../base/common/lifecycle.js\";\nimport type { IMenu } from \"../../../../platform/actions/common/actions.js\";\nimport type { IContextKeyService } from \"../../../../platform/contextkey/common/contextkey.js\";\nimport type { IKeybindingService } from \"../../../../platform/keybinding/common/keybinding.js\";\nimport { defaultButtonStyles } from \"../../../../platform/theme/browser/defaultStyles.js\";\nimport { CommentCommandId } from \"../common/commentCommandIds.js\";\n\nexport class CommentFormActions implements IDisposable {\n\tprivate _buttonElements: HTMLElement[] = [];\n\tprivate readonly _toDispose = new DisposableStore();\n\tprivate _actions: IAction[] = [];\n\n\tconstructor(\n\t\tprivate readonly keybindingService: IKeybindingService,\n\t\tprivate readonly contextKeyService: IContextKeyService,\n\t\tprivate container: HTMLElement,\n\t\tprivate actionHandler: (action: IAction) => void,\n\t\tprivate readonly maxActions?: number,\n\t) {}\n\n\tsetActions(menu: IMenu, hasOnlySecondaryActions = false) {\n\t\tthis._toDispose.clear();\n\n\t\tthis._buttonElements.forEach((b) => b.remove());\n\t\tthis._buttonElements = [];\n\n\t\tconst groups = menu.getActions({ shouldForwardArgs: true });\n\t\tlet isPrimary = !hasOnlySecondaryActions;\n\t\tfor (const group of groups) {\n\t\t\tconst [, actions] = group;\n\n\t\t\tthis._actions = actions;\n\t\t\tfor (const action of actions) {\n\t\t\t\tlet keybinding = this.keybindingService\n\t\t\t\t\t.lookupKeybinding(action.id, this.contextKeyService)\n\t\t\t\t\t?.getLabel();\n\t\t\t\tif (!keybinding && isPrimary) {\n\t\t\t\t\tkeybinding = this.keybindingService\n\t\t\t\t\t\t.lookupKeybinding(\n\t\t\t\t\t\t\tCommentCommandId.Submit,\n\t\t\t\t\t\t\tthis.contextKeyService,\n\t\t\t\t\t\t)\n\t\t\t\t\t\t?.getLabel();\n\t\t\t\t}\n\t\t\t\tconst title = keybinding\n\t\t\t\t\t? `${action.label} (${keybinding})`\n\t\t\t\t\t: action.label;\n\t\t\t\tconst button = new Button(this.container, {\n\t\t\t\t\tsecondary: !isPrimary,\n\t\t\t\t\ttitle,\n\t\t\t\t\t...defaultButtonStyles,\n\t\t\t\t});\n\n\t\t\t\tisPrimary = false;\n\t\t\t\tthis._buttonElements.push(button.element);\n\n\t\t\t\tthis._toDispose.add(button);\n\t\t\t\tthis._toDispose.add(\n\t\t\t\t\tbutton.onDidClick(() => this.actionHandler(action)),\n\t\t\t\t);\n\n\t\t\t\tbutton.enabled = action.enabled;\n\t\t\t\tbutton.label = action.label;\n\t\t\t\tif (\n\t\t\t\t\tthis.maxActions !== undefined &&\n\t\t\t\t\tthis._buttonElements.length >= this.maxActions\n\t\t\t\t) {\n\t\t\t\t\tconsole.warn(\n\t\t\t\t\t\t`An extension has contributed more than the allowable number of actions to a comments menu.`,\n\t\t\t\t\t);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\ttriggerDefaultAction() {\n\t\tif (this._actions.length) {\n\t\t\tconst lastAction = this._actions[0];\n\n\t\t\tif (lastAction.enabled) {\n\t\t\t\treturn this.actionHandler(lastAction);\n\t\t\t}\n\t\t}\n\t}\n\n\tdispose() {\n\t\tthis._toDispose.dispose();\n\t}\n}\n"],
  "mappings": ";;AAKA,SAAS,cAAc;AAEvB;AAAA,EACC;AAAA,OAEM;AAIP,SAAS,2BAA2B;AACpC,SAAS,wBAAwB;AAE1B,MAAM,mBAA0C;AAAA,EAKtD,YACkB,mBACA,mBACT,WACA,eACS,YAChB;AALgB;AACA;AACT;AACA;AACS;AAAA,EACf;AAAA,EA5BJ,OAiBuD;AAAA;AAAA;AAAA,EAC9C,kBAAiC,CAAC;AAAA,EACzB,aAAa,IAAI,gBAAgB;AAAA,EAC1C,WAAsB,CAAC;AAAA,EAU/B,WAAW,MAAa,0BAA0B,OAAO;AACxD,SAAK,WAAW,MAAM;AAEtB,SAAK,gBAAgB,QAAQ,CAAC,MAAM,EAAE,OAAO,CAAC;AAC9C,SAAK,kBAAkB,CAAC;AAExB,UAAM,SAAS,KAAK,WAAW,EAAE,mBAAmB,KAAK,CAAC;AAC1D,QAAI,YAAY,CAAC;AACjB,eAAW,SAAS,QAAQ;AAC3B,YAAM,CAAC,EAAE,OAAO,IAAI;AAEpB,WAAK,WAAW;AAChB,iBAAW,UAAU,SAAS;AAC7B,YAAI,aAAa,KAAK,kBACpB,iBAAiB,OAAO,IAAI,KAAK,iBAAiB,GACjD,SAAS;AACZ,YAAI,CAAC,cAAc,WAAW;AAC7B,uBAAa,KAAK,kBAChB;AAAA,YACA,iBAAiB;AAAA,YACjB,KAAK;AAAA,UACN,GACE,SAAS;AAAA,QACb;AACA,cAAM,QAAQ,aACX,GAAG,OAAO,KAAK,KAAK,UAAU,MAC9B,OAAO;AACV,cAAM,SAAS,IAAI,OAAO,KAAK,WAAW;AAAA,UACzC,WAAW,CAAC;AAAA,UACZ;AAAA,UACA,GAAG;AAAA,QACJ,CAAC;AAED,oBAAY;AACZ,aAAK,gBAAgB,KAAK,OAAO,OAAO;AAExC,aAAK,WAAW,IAAI,MAAM;AAC1B,aAAK,WAAW;AAAA,UACf,OAAO,WAAW,MAAM,KAAK,cAAc,MAAM,CAAC;AAAA,QACnD;AAEA,eAAO,UAAU,OAAO;AACxB,eAAO,QAAQ,OAAO;AACtB,YACC,KAAK,eAAe,UACpB,KAAK,gBAAgB,UAAU,KAAK,YACnC;AACD,kBAAQ;AAAA,YACP;AAAA,UACD;AACA;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAAA,EAEA,uBAAuB;AACtB,QAAI,KAAK,SAAS,QAAQ;AACzB,YAAM,aAAa,KAAK,SAAS,CAAC;AAElC,UAAI,WAAW,SAAS;AACvB,eAAO,KAAK,cAAc,UAAU;AAAA,MACrC;AAAA,IACD;AAAA,EACD;AAAA,EAEA,UAAU;AACT,SAAK,WAAW,QAAQ;AAAA,EACzB;AACD;",
  "names": []
}
