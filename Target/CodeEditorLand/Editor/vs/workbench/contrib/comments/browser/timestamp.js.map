{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/comments/browser/timestamp.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from '../../../../base/browser/dom.js';\nimport type { IManagedHover } from '../../../../base/browser/ui/hover/hover.js';\nimport { getDefaultHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nimport { fromNow } from '../../../../base/common/date.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { language } from '../../../../base/common/platform.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport type { IHoverService } from '../../../../platform/hover/browser/hover.js';\nimport { COMMENTS_SECTION, ICommentsConfiguration } from '../common/commentsConfiguration.js';\n\nexport class TimestampWidget extends Disposable {\n\tprivate _date: HTMLElement;\n\tprivate _timestamp: Date | undefined;\n\tprivate _useRelativeTime: boolean;\n\n\tprivate hover: IManagedHover;\n\n\tconstructor(\n\t\tprivate configurationService: IConfigurationService,\n\t\thoverService: IHoverService,\n\t\tcontainer: HTMLElement,\n\t\ttimeStamp?: Date\n\t) {\n\t\tsuper();\n\t\tthis._date = dom.append(container, dom.$('span.timestamp'));\n\t\tthis._date.style.display = 'none';\n\t\tthis._useRelativeTime = this.useRelativeTimeSetting;\n\t\tthis.hover = this._register(hoverService.setupManagedHover(getDefaultHoverDelegate('mouse'), this._date, ''));\n\t\tthis.setTimestamp(timeStamp);\n\t}\n\n\tprivate get useRelativeTimeSetting(): boolean {\n\t\treturn this.configurationService.getValue<ICommentsConfiguration>(COMMENTS_SECTION).useRelativeTime;\n\t}\n\n\tpublic async setTimestamp(timestamp: Date | undefined) {\n\t\tif ((timestamp !== this._timestamp) || (this.useRelativeTimeSetting !== this._useRelativeTime)) {\n\t\t\tthis.updateDate(timestamp);\n\t\t}\n\t\tthis._timestamp = timestamp;\n\t\tthis._useRelativeTime = this.useRelativeTimeSetting;\n\t}\n\n\tprivate updateDate(timestamp?: Date) {\n\t\tif (!timestamp) {\n\t\t\tthis._date.textContent = '';\n\t\t\tthis._date.style.display = 'none';\n\t\t} else if ((timestamp !== this._timestamp)\n\t\t\t|| (this.useRelativeTimeSetting !== this._useRelativeTime)) {\n\t\t\tthis._date.style.display = '';\n\t\t\tlet textContent: string;\n\t\t\tlet tooltip: string | undefined;\n\t\t\tif (this.useRelativeTimeSetting) {\n\t\t\t\ttextContent = this.getRelative(timestamp);\n\t\t\t\ttooltip = this.getDateString(timestamp);\n\t\t\t} else {\n\t\t\t\ttextContent = this.getDateString(timestamp);\n\t\t\t}\n\n\t\t\tthis._date.textContent = textContent;\n\t\t\tthis.hover.update(tooltip ?? '');\n\t\t}\n\t}\n\n\tprivate getRelative(date: Date): string {\n\t\treturn fromNow(date, true, true);\n\t}\n\n\tprivate getDateString(date: Date): string {\n\t\treturn date.toLocaleString(language);\n\t}\n}\n"],
  "mappings": ";;AAKA,YAAY,SAAS;AAErB,SAAS,+BAA+B;AACxC,SAAS,eAAe;AACxB,SAAS,kBAAkB;AAC3B,SAAS,gBAAgB;AACzB,SAAS,6BAA6B;AAEtC,SAAS,kBAAkB,8BAA8B;AAElD,MAAM,wBAAwB,WAAW;AAAA,EAO/C,YACS,sBACR,cACA,WACA,WACC;AACD,UAAM;AALE;AAMR,SAAK,QAAQ,IAAI,OAAO,WAAW,IAAI,EAAE,gBAAgB,CAAC;AAC1D,SAAK,MAAM,MAAM,UAAU;AAC3B,SAAK,mBAAmB,KAAK;AAC7B,SAAK,QAAQ,KAAK,UAAU,aAAa,kBAAkB,wBAAwB,OAAO,GAAG,KAAK,OAAO,EAAE,CAAC;AAC5G,SAAK,aAAa,SAAS;AAAA,EAC5B;AAAA,EAlCD,OAegD;AAAA;AAAA;AAAA,EACvC;AAAA,EACA;AAAA,EACA;AAAA,EAEA;AAAA,EAgBR,IAAY,yBAAkC;AAC7C,WAAO,KAAK,qBAAqB,SAAiC,gBAAgB,EAAE;AAAA,EACrF;AAAA,EAEA,MAAa,aAAa,WAA6B;AACtD,QAAK,cAAc,KAAK,cAAgB,KAAK,2BAA2B,KAAK,kBAAmB;AAC/F,WAAK,WAAW,SAAS;AAAA,IAC1B;AACA,SAAK,aAAa;AAClB,SAAK,mBAAmB,KAAK;AAAA,EAC9B;AAAA,EAEQ,WAAW,WAAkB;AACpC,QAAI,CAAC,WAAW;AACf,WAAK,MAAM,cAAc;AACzB,WAAK,MAAM,MAAM,UAAU;AAAA,IAC5B,WAAY,cAAc,KAAK,cAC1B,KAAK,2BAA2B,KAAK,kBAAmB;AAC5D,WAAK,MAAM,MAAM,UAAU;AAC3B,UAAI;AACJ,UAAI;AACJ,UAAI,KAAK,wBAAwB;AAChC,sBAAc,KAAK,YAAY,SAAS;AACxC,kBAAU,KAAK,cAAc,SAAS;AAAA,MACvC,OAAO;AACN,sBAAc,KAAK,cAAc,SAAS;AAAA,MAC3C;AAEA,WAAK,MAAM,cAAc;AACzB,WAAK,MAAM,OAAO,WAAW,EAAE;AAAA,IAChC;AAAA,EACD;AAAA,EAEQ,YAAY,MAAoB;AACvC,WAAO,QAAQ,MAAM,MAAM,IAAI;AAAA,EAChC;AAAA,EAEQ,cAAc,MAAoB;AACzC,WAAO,KAAK,eAAe,QAAQ;AAAA,EACpC;AACD;",
  "names": []
}
