{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/comments/browser/timestamp.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from \"../../../../base/browser/dom.js\";\nimport type { IManagedHover } from \"../../../../base/browser/ui/hover/hover.js\";\nimport { getDefaultHoverDelegate } from \"../../../../base/browser/ui/hover/hoverDelegateFactory.js\";\nimport { fromNow } from \"../../../../base/common/date.js\";\nimport { Disposable } from \"../../../../base/common/lifecycle.js\";\nimport { language } from \"../../../../base/common/platform.js\";\nimport type { IConfigurationService } from \"../../../../platform/configuration/common/configuration.js\";\nimport type { IHoverService } from \"../../../../platform/hover/browser/hover.js\";\nimport {\n\tCOMMENTS_SECTION,\n\ttype ICommentsConfiguration,\n} from \"../common/commentsConfiguration.js\";\n\nexport class TimestampWidget extends Disposable {\n\tprivate _date: HTMLElement;\n\tprivate _timestamp: Date | undefined;\n\tprivate _useRelativeTime: boolean;\n\n\tprivate hover: IManagedHover;\n\n\tconstructor(\n\t\tprivate configurationService: IConfigurationService,\n\t\thoverService: IHoverService,\n\t\tcontainer: HTMLElement,\n\t\ttimeStamp?: Date,\n\t) {\n\t\tsuper();\n\t\tthis._date = dom.append(container, dom.$(\"span.timestamp\"));\n\t\tthis._date.style.display = \"none\";\n\t\tthis._useRelativeTime = this.useRelativeTimeSetting;\n\t\tthis.hover = this._register(\n\t\t\thoverService.setupManagedHover(\n\t\t\t\tgetDefaultHoverDelegate(\"mouse\"),\n\t\t\t\tthis._date,\n\t\t\t\t\"\",\n\t\t\t),\n\t\t);\n\t\tthis.setTimestamp(timeStamp);\n\t}\n\n\tprivate get useRelativeTimeSetting(): boolean {\n\t\treturn this.configurationService.getValue<ICommentsConfiguration>(\n\t\t\tCOMMENTS_SECTION,\n\t\t).useRelativeTime;\n\t}\n\n\tpublic async setTimestamp(timestamp: Date | undefined) {\n\t\tif (\n\t\t\ttimestamp !== this._timestamp ||\n\t\t\tthis.useRelativeTimeSetting !== this._useRelativeTime\n\t\t) {\n\t\t\tthis.updateDate(timestamp);\n\t\t}\n\t\tthis._timestamp = timestamp;\n\t\tthis._useRelativeTime = this.useRelativeTimeSetting;\n\t}\n\n\tprivate updateDate(timestamp?: Date) {\n\t\tif (!timestamp) {\n\t\t\tthis._date.textContent = \"\";\n\t\t\tthis._date.style.display = \"none\";\n\t\t} else if (\n\t\t\ttimestamp !== this._timestamp ||\n\t\t\tthis.useRelativeTimeSetting !== this._useRelativeTime\n\t\t) {\n\t\t\tthis._date.style.display = \"\";\n\t\t\tlet textContent: string;\n\t\t\tlet tooltip: string | undefined;\n\t\t\tif (this.useRelativeTimeSetting) {\n\t\t\t\ttextContent = this.getRelative(timestamp);\n\t\t\t\ttooltip = this.getDateString(timestamp);\n\t\t\t} else {\n\t\t\t\ttextContent = this.getDateString(timestamp);\n\t\t\t}\n\n\t\t\tthis._date.textContent = textContent;\n\t\t\tthis.hover.update(tooltip ?? \"\");\n\t\t}\n\t}\n\n\tprivate getRelative(date: Date): string {\n\t\treturn fromNow(date, true, true);\n\t}\n\n\tprivate getDateString(date: Date): string {\n\t\treturn date.toLocaleString(language);\n\t}\n}\n"],
  "mappings": ";;AAKA,YAAY,SAAS;AAErB,SAAS,+BAA+B;AACxC,SAAS,eAAe;AACxB,SAAS,kBAAkB;AAC3B,SAAS,gBAAgB;AAGzB;AAAA,EACC;AAAA,OAEM;AAEA,MAAM,wBAAwB,WAAW;AAAA,EAO/C,YACS,sBACR,cACA,WACA,WACC;AACD,UAAM;AALE;AAMR,SAAK,QAAQ,IAAI,OAAO,WAAW,IAAI,EAAE,gBAAgB,CAAC;AAC1D,SAAK,MAAM,MAAM,UAAU;AAC3B,SAAK,mBAAmB,KAAK;AAC7B,SAAK,QAAQ,KAAK;AAAA,MACjB,aAAa;AAAA,QACZ,wBAAwB,OAAO;AAAA,QAC/B,KAAK;AAAA,QACL;AAAA,MACD;AAAA,IACD;AACA,SAAK,aAAa,SAAS;AAAA,EAC5B;AAAA,EA3CD,OAkBgD;AAAA;AAAA;AAAA,EACvC;AAAA,EACA;AAAA,EACA;AAAA,EAEA;AAAA,EAsBR,IAAY,yBAAkC;AAC7C,WAAO,KAAK,qBAAqB;AAAA,MAChC;AAAA,IACD,EAAE;AAAA,EACH;AAAA,EAEA,MAAa,aAAa,WAA6B;AACtD,QACC,cAAc,KAAK,cACnB,KAAK,2BAA2B,KAAK,kBACpC;AACD,WAAK,WAAW,SAAS;AAAA,IAC1B;AACA,SAAK,aAAa;AAClB,SAAK,mBAAmB,KAAK;AAAA,EAC9B;AAAA,EAEQ,WAAW,WAAkB;AACpC,QAAI,CAAC,WAAW;AACf,WAAK,MAAM,cAAc;AACzB,WAAK,MAAM,MAAM,UAAU;AAAA,IAC5B,WACC,cAAc,KAAK,cACnB,KAAK,2BAA2B,KAAK,kBACpC;AACD,WAAK,MAAM,MAAM,UAAU;AAC3B,UAAI;AACJ,UAAI;AACJ,UAAI,KAAK,wBAAwB;AAChC,sBAAc,KAAK,YAAY,SAAS;AACxC,kBAAU,KAAK,cAAc,SAAS;AAAA,MACvC,OAAO;AACN,sBAAc,KAAK,cAAc,SAAS;AAAA,MAC3C;AAEA,WAAK,MAAM,cAAc;AACzB,WAAK,MAAM,OAAO,WAAW,EAAE;AAAA,IAChC;AAAA,EACD;AAAA,EAEQ,YAAY,MAAoB;AACvC,WAAO,QAAQ,MAAM,MAAM,IAAI;AAAA,EAChC;AAAA,EAEQ,cAAc,MAAoB;AACzC,WAAO,KAAK,eAAe,QAAQ;AAAA,EACpC;AACD;",
  "names": []
}
