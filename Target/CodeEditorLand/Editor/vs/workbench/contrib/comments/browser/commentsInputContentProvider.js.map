{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/comments/browser/commentsInputContentProvider.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from \"../../../../base/common/lifecycle.js\";\nimport { Schemas } from \"../../../../base/common/network.js\";\nimport type { URI } from \"../../../../base/common/uri.js\";\nimport type { ICodeEditor } from \"../../../../editor/browser/editorBrowser.js\";\nimport { ICodeEditorService } from \"../../../../editor/browser/services/codeEditorService.js\";\nimport {\n\ttype IEditorContribution,\n\tScrollType,\n} from \"../../../../editor/common/editorCommon.js\";\nimport { ILanguageService } from \"../../../../editor/common/languages/language.js\";\nimport type { ITextModel } from \"../../../../editor/common/model.js\";\nimport { IModelService } from \"../../../../editor/common/services/model.js\";\nimport {\n\ttype ITextModelContentProvider,\n\tITextModelService,\n} from \"../../../../editor/common/services/resolverService.js\";\nimport type { ITextResourceEditorInput } from \"../../../../platform/editor/common/editor.js\";\nimport { applyTextEditorOptions } from \"../../../common/editor/editorOptions.js\";\nimport { SimpleCommentEditor } from \"./simpleCommentEditor.js\";\n\nexport class CommentsInputContentProvider\n\textends Disposable\n\timplements ITextModelContentProvider, IEditorContribution\n{\n\tpublic static readonly ID = \"comments.input.contentProvider\";\n\n\tconstructor(\n\t\t@ITextModelService textModelService: ITextModelService,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@IModelService private readonly _modelService: IModelService,\n\t\t@ILanguageService private readonly _languageService: ILanguageService,\n\t) {\n\t\tsuper();\n\t\tthis._register(textModelService.registerTextModelContentProvider(Schemas.commentsInput, this));\n\n\t\tthis._register(codeEditorService.registerCodeEditorOpenHandler(async (input: ITextResourceEditorInput, editor: ICodeEditor | null, _sideBySide?: boolean): Promise<ICodeEditor | null> => {\n\t\t\tif (!(editor instanceof SimpleCommentEditor)) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (editor.getModel()?.uri.toString() !== input.resource.toString()) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (input.options) {\n\t\t\t\tapplyTextEditorOptions(input.options, editor, ScrollType.Immediate);\n\t\t\t}\n\t\t\treturn editor;\n\t\t}));\n\t}\n\n\tasync provideTextContent(resource: URI): Promise<ITextModel | null> {\n\t\tconst existing = this._modelService.getModel(resource);\n\t\treturn (\n\t\t\texisting ??\n\t\t\tthis._modelService.createModel(\n\t\t\t\t\"\",\n\t\t\t\tthis._languageService.createById(\"markdown\"),\n\t\t\t\tresource,\n\t\t\t)\n\t\t);\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;AAKA,SAAS,kBAAkB;AAC3B,SAAS,eAAe;AAGxB,SAAS,0BAA0B;AACnC;AAAA,EAEC;AAAA,OACM;AACP,SAAS,wBAAwB;AAEjC,SAAS,qBAAqB;AAC9B;AAAA,EAEC;AAAA,OACM;AAEP,SAAS,8BAA8B;AACvC,SAAS,2BAA2B;AAE7B,IAAM,+BAAN,cACE,WAET;AAAA,EAGC,YACoB,kBACC,mBACY,eACG,kBAClC;AACD,UAAM;AAH0B;AACG;AAGnC,SAAK,UAAU,iBAAiB,iCAAiC,QAAQ,eAAe,IAAI,CAAC;AAE7F,SAAK,UAAU,kBAAkB,8BAA8B,OAAO,OAAiC,QAA4B,gBAAuD;AACzL,UAAI,EAAE,kBAAkB,sBAAsB;AAC7C,eAAO;AAAA,MACR;AAEA,UAAI,OAAO,SAAS,GAAG,IAAI,SAAS,MAAM,MAAM,SAAS,SAAS,GAAG;AACpE,eAAO;AAAA,MACR;AAEA,UAAI,MAAM,SAAS;AAClB,+BAAuB,MAAM,SAAS,QAAQ,WAAW,SAAS;AAAA,MACnE;AACA,aAAO;AAAA,IACR,CAAC,CAAC;AAAA,EACH;AAAA,EAtDD,OA4BA;AAAA;AAAA;AAAA,EACC,OAAuB,KAAK;AAAA,EA2B5B,MAAM,mBAAmB,UAA2C;AACnE,UAAM,WAAW,KAAK,cAAc,SAAS,QAAQ;AACrD,WACC,YACA,KAAK,cAAc;AAAA,MAClB;AAAA,MACA,KAAK,iBAAiB,WAAW,UAAU;AAAA,MAC3C;AAAA,IACD;AAAA,EAEF;AACD;AA1Ca,+BAAN;AAAA,EAOJ;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,GAVU;",
  "names": []
}
