{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/comments/browser/commentsInputContentProvider.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from \"../../../../base/common/lifecycle.js\";\nimport { Schemas } from \"../../../../base/common/network.js\";\nimport type { URI } from \"../../../../base/common/uri.js\";\nimport type { ICodeEditor } from \"../../../../editor/browser/editorBrowser.js\";\nimport { ICodeEditorService } from \"../../../../editor/browser/services/codeEditorService.js\";\nimport {\n\ttype IEditorContribution,\n\tScrollType,\n} from \"../../../../editor/common/editorCommon.js\";\nimport { ILanguageService } from \"../../../../editor/common/languages/language.js\";\nimport type { ITextModel } from \"../../../../editor/common/model.js\";\nimport { IModelService } from \"../../../../editor/common/services/model.js\";\nimport {\n\ttype ITextModelContentProvider,\n\tITextModelService,\n} from \"../../../../editor/common/services/resolverService.js\";\nimport type { ITextResourceEditorInput } from \"../../../../platform/editor/common/editor.js\";\nimport { applyTextEditorOptions } from \"../../../common/editor/editorOptions.js\";\nimport { SimpleCommentEditor } from \"./simpleCommentEditor.js\";\n\nexport class CommentsInputContentProvider\n\textends Disposable\n\timplements ITextModelContentProvider, IEditorContribution\n{\n\tpublic static readonly ID = \"comments.input.contentProvider\";\n\n\tconstructor(\n\t\t@ITextModelService textModelService: ITextModelService,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@IModelService private readonly _modelService: IModelService,\n\t\t@ILanguageService private readonly _languageService: ILanguageService,\n\t) {\n\t\tsuper();\n\t\tthis._register(\n\t\t\ttextModelService.registerTextModelContentProvider(\n\t\t\t\tSchemas.commentsInput,\n\t\t\t\tthis,\n\t\t\t),\n\t\t);\n\n\t\tthis._register(\n\t\t\tcodeEditorService.registerCodeEditorOpenHandler(\n\t\t\t\tasync (\n\t\t\t\t\tinput: ITextResourceEditorInput,\n\t\t\t\t\teditor: ICodeEditor | null,\n\t\t\t\t\t_sideBySide?: boolean,\n\t\t\t\t): Promise<ICodeEditor | null> => {\n\t\t\t\t\tif (!(editor instanceof SimpleCommentEditor)) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (\n\t\t\t\t\t\teditor.getModel()?.uri.toString() !==\n\t\t\t\t\t\tinput.resource.toString()\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (input.options) {\n\t\t\t\t\t\tapplyTextEditorOptions(\n\t\t\t\t\t\t\tinput.options,\n\t\t\t\t\t\t\teditor,\n\t\t\t\t\t\t\tScrollType.Immediate,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn editor;\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\t}\n\n\tasync provideTextContent(resource: URI): Promise<ITextModel | null> {\n\t\tconst existing = this._modelService.getModel(resource);\n\t\treturn (\n\t\t\texisting ??\n\t\t\tthis._modelService.createModel(\n\t\t\t\t\"\",\n\t\t\t\tthis._languageService.createById(\"markdown\"),\n\t\t\t\tresource,\n\t\t\t)\n\t\t);\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;AAKA,SAAS,kBAAkB;AAC3B,SAAS,eAAe;AAGxB,SAAS,0BAA0B;AACnC;AAAA,EAEC;AAAA,OACM;AACP,SAAS,wBAAwB;AAEjC,SAAS,qBAAqB;AAC9B;AAAA,EAEC;AAAA,OACM;AAEP,SAAS,8BAA8B;AACvC,SAAS,2BAA2B;AAE7B,IAAM,+BAAN,cACE,WAET;AAAA,EAGC,YACoB,kBACC,mBACY,eACG,kBAClC;AACD,UAAM;AAH0B;AACG;AAGnC,SAAK;AAAA,MACJ,iBAAiB;AAAA,QAChB,QAAQ;AAAA,QACR;AAAA,MACD;AAAA,IACD;AAEA,SAAK;AAAA,MACJ,kBAAkB;AAAA,QACjB,OACC,OACA,QACA,gBACiC;AACjC,cAAI,EAAE,kBAAkB,sBAAsB;AAC7C,mBAAO;AAAA,UACR;AAEA,cACC,OAAO,SAAS,GAAG,IAAI,SAAS,MAChC,MAAM,SAAS,SAAS,GACvB;AACD,mBAAO;AAAA,UACR;AAEA,cAAI,MAAM,SAAS;AAClB;AAAA,cACC,MAAM;AAAA,cACN;AAAA,cACA,WAAW;AAAA,YACZ;AAAA,UACD;AACA,iBAAO;AAAA,QACR;AAAA,MACD;AAAA,IACD;AAAA,EACD;AAAA,EA1ED,OA4BA;AAAA;AAAA;AAAA,EACC,OAAuB,KAAK;AAAA,EA+C5B,MAAM,mBAAmB,UAA2C;AACnE,UAAM,WAAW,KAAK,cAAc,SAAS,QAAQ;AACrD,WACC,YACA,KAAK,cAAc;AAAA,MAClB;AAAA,MACA,KAAK,iBAAiB,WAAW,UAAU;AAAA,MAC3C;AAAA,IACD;AAAA,EAEF;AACD;AA9Da,+BAAN;AAAA,EAOJ;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,GAVU;",
  "names": []
}
