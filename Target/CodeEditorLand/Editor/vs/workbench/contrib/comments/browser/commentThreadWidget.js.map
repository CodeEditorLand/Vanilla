{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/comments/browser/commentThreadWidget.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport './media/review.css';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, dispose, IDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport * as languages from '../../../../editor/common/languages.js';\nimport { IMarkdownRendererOptions } from '../../../../editor/browser/widget/markdownRenderer/browser/markdownRenderer.js';\nimport { IContextKey, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { CommentMenus } from './commentMenus.js';\nimport { CommentReply } from './commentReply.js';\nimport { ICommentService } from './commentService.js';\nimport { CommentThreadBody } from './commentThreadBody.js';\nimport { CommentThreadHeader } from './commentThreadHeader.js';\nimport { CommentThreadAdditionalActions } from './commentThreadAdditionalActions.js';\nimport { CommentContextKeys } from '../common/commentContextKeys.js';\nimport { ICommentThreadWidget } from '../common/commentThreadWidget.js';\nimport { IColorTheme } from '../../../../platform/theme/common/themeService.js';\nimport { contrastBorder, focusBorder, inputValidationErrorBackground, inputValidationErrorBorder, inputValidationErrorForeground, textBlockQuoteBackground, textBlockQuoteBorder, textLinkActiveForeground, textLinkForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { PANEL_BORDER } from '../../../common/theme.js';\nimport { IRange, Range } from '../../../../editor/common/core/range.js';\nimport { commentThreadStateBackgroundColorVar, commentThreadStateColorVar } from './commentColors.js';\nimport { ICellRange } from '../../notebook/common/notebookRange.js';\nimport { FontInfo } from '../../../../editor/common/config/fontInfo.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { registerNavigableContainer } from '../../../browser/actions/widgetNavigationCommands.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { COMMENTS_SECTION, ICommentsConfiguration } from '../common/commentsConfiguration.js';\nimport { localize } from '../../../../nls.js';\nimport { AccessibilityVerbositySettingId } from '../../accessibility/browser/accessibilityConfiguration.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { AccessibilityCommandId } from '../../accessibility/common/accessibilityCommands.js';\nimport { LayoutableEditor } from './simpleCommentEditor.js';\nimport { DomEmitter } from '../../../../base/browser/event.js';\nimport { isCodeEditor } from '../../../../editor/browser/editorBrowser.js';\n\nexport const COMMENTEDITOR_DECORATION_KEY = 'commenteditordecoration';\n\nexport class CommentThreadWidget<T extends IRange | ICellRange = IRange> extends Disposable implements ICommentThreadWidget {\n\tprivate _header!: CommentThreadHeader<T>;\n\tprivate _body: CommentThreadBody<T>;\n\tprivate _commentReply?: CommentReply<T>;\n\tprivate _additionalActions?: CommentThreadAdditionalActions<T>;\n\tprivate _commentMenus: CommentMenus;\n\tprivate _commentThreadDisposables: IDisposable[] = [];\n\tprivate _threadIsEmpty: IContextKey<boolean>;\n\tprivate _styleElement: HTMLStyleElement;\n\tprivate _commentThreadContextValue: IContextKey<string | undefined>;\n\tprivate _focusedContextKey: IContextKey<boolean>;\n\tprivate _onDidResize = new Emitter<dom.Dimension>();\n\tonDidResize = this._onDidResize.event;\n\n\tprivate _commentThreadState: languages.CommentThreadState | undefined;\n\n\tget commentThread() {\n\t\treturn this._commentThread;\n\t}\n\tconstructor(\n\t\treadonly container: HTMLElement,\n\t\treadonly _parentEditor: LayoutableEditor,\n\t\tprivate _owner: string,\n\t\tprivate _parentResourceUri: URI,\n\t\tprivate _contextKeyService: IContextKeyService,\n\t\tprivate _scopedInstantiationService: IInstantiationService,\n\t\tprivate _commentThread: languages.CommentThread<T>,\n\t\tprivate _pendingComment: string | undefined,\n\t\tprivate _pendingEdits: { [key: number]: string } | undefined,\n\t\tprivate _markdownOptions: IMarkdownRendererOptions,\n\t\tprivate _commentOptions: languages.CommentOptions | undefined,\n\t\tprivate _containerDelegate: {\n\t\t\tactionRunner: (() => void) | null;\n\t\t\tcollapse: () => void;\n\t\t},\n\t\t@ICommentService private commentService: ICommentService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IConfigurationService private configurationService: IConfigurationService,\n\t\t@IKeybindingService private _keybindingService: IKeybindingService\n\t) {\n\t\tsuper();\n\n\t\tthis._threadIsEmpty = CommentContextKeys.commentThreadIsEmpty.bindTo(this._contextKeyService);\n\t\tthis._threadIsEmpty.set(!_commentThread.comments || !_commentThread.comments.length);\n\t\tthis._focusedContextKey = CommentContextKeys.commentFocused.bindTo(this._contextKeyService);\n\n\t\tthis._commentMenus = this.commentService.getCommentMenus(this._owner);\n\n\t\tthis._register(this._header = new CommentThreadHeader<T>(\n\t\t\tcontainer,\n\t\t\t{\n\t\t\t\tcollapse: this.collapse.bind(this)\n\t\t\t},\n\t\t\tthis._commentMenus,\n\t\t\tthis._commentThread,\n\t\t\tthis._contextKeyService,\n\t\t\tthis._scopedInstantiationService,\n\t\t\tcontextMenuService\n\t\t));\n\n\t\tthis._header.updateCommentThread(this._commentThread);\n\n\t\tconst bodyElement = <HTMLDivElement>dom.$('.body');\n\t\tcontainer.appendChild(bodyElement);\n\t\tthis._register(toDisposable(() => bodyElement.remove()));\n\n\t\tconst tracker = this._register(dom.trackFocus(bodyElement));\n\t\tthis._register(registerNavigableContainer({\n\t\t\tname: 'commentThreadWidget',\n\t\t\tfocusNotifiers: [tracker],\n\t\t\tfocusNextWidget: () => {\n\t\t\t\tif (!this._commentReply?.isCommentEditorFocused()) {\n\t\t\t\t\tthis._commentReply?.expandReplyAreaAndFocusCommentEditor();\n\t\t\t\t}\n\t\t\t},\n\t\t\tfocusPreviousWidget: () => {\n\t\t\t\tif (this._commentReply?.isCommentEditorFocused() && this._commentThread.comments?.length) {\n\t\t\t\t\tthis._body.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t\tthis._register(tracker.onDidFocus(() => this._focusedContextKey.set(true)));\n\t\tthis._register(tracker.onDidBlur(() => this._focusedContextKey.reset()));\n\t\tthis._register(this.configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(AccessibilityVerbositySettingId.Comments)) {\n\t\t\t\tthis._setAriaLabel();\n\t\t\t}\n\t\t}));\n\t\tthis._body = this._scopedInstantiationService.createInstance(\n\t\t\tCommentThreadBody,\n\t\t\tthis._parentEditor,\n\t\t\tthis._owner,\n\t\t\tthis._parentResourceUri,\n\t\t\tbodyElement,\n\t\t\tthis._markdownOptions,\n\t\t\tthis._commentThread,\n\t\t\tthis._pendingEdits,\n\t\t\tthis._scopedInstantiationService,\n\t\t\tthis\n\t\t) as unknown as CommentThreadBody<T>;\n\t\tthis._register(this._body);\n\t\tthis._setAriaLabel();\n\t\tthis._styleElement = dom.createStyleSheet(this.container);\n\n\n\t\tthis._commentThreadContextValue = CommentContextKeys.commentThreadContext.bindTo(this._contextKeyService);\n\t\tthis._commentThreadContextValue.set(_commentThread.contextValue);\n\n\t\tconst commentControllerKey = CommentContextKeys.commentControllerContext.bindTo(this._contextKeyService);\n\t\tconst controller = this.commentService.getCommentController(this._owner);\n\n\t\tif (controller?.contextValue) {\n\t\t\tcommentControllerKey.set(controller.contextValue);\n\t\t}\n\n\t\tthis.currentThreadListeners();\n\t\tthis._register(new DomEmitter(this.container, 'keydown').event(e => {\n\t\t\tif (dom.isKeyboardEvent(e) && e.key === 'Escape') {\n\t\t\t\tif (Range.isIRange(this.commentThread.range) && isCodeEditor(this._parentEditor)) {\n\t\t\t\t\tthis._parentEditor.setSelection(this.commentThread.range);\n\t\t\t\t}\n\t\t\t\tthis.collapse();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _setAriaLabel(): void {\n\t\tlet ariaLabel = localize('commentLabel', \"Comment\");\n\t\tlet keybinding: string | undefined;\n\t\tconst verbose = this.configurationService.getValue(AccessibilityVerbositySettingId.Comments);\n\t\tif (verbose) {\n\t\t\tkeybinding = this._keybindingService.lookupKeybinding(AccessibilityCommandId.OpenAccessibilityHelp, this._contextKeyService)?.getLabel() ?? undefined;\n\t\t}\n\t\tif (keybinding) {\n\t\t\tariaLabel = localize('commentLabelWithKeybinding', \"{0}, use ({1}) for accessibility help\", ariaLabel, keybinding);\n\t\t} else if (verbose) {\n\t\t\tariaLabel = localize('commentLabelWithKeybindingNoKeybinding', \"{0}, run the command Open Accessibility Help which is currently not triggerable via keybinding.\", ariaLabel);\n\t\t}\n\t\tthis._body.container.ariaLabel = ariaLabel;\n\t}\n\n\tprivate updateCurrentThread(hasMouse: boolean, hasFocus: boolean) {\n\t\tif (hasMouse || hasFocus) {\n\t\t\tthis.commentService.setCurrentCommentThread(this.commentThread);\n\t\t} else {\n\t\t\tthis.commentService.setCurrentCommentThread(undefined);\n\t\t}\n\t}\n\n\tprivate currentThreadListeners() {\n\t\tlet hasMouse = false;\n\t\tlet hasFocus = false;\n\t\tthis._register(dom.addDisposableListener(this.container, dom.EventType.MOUSE_ENTER, (e) => {\n\t\t\tif ((<any>e).toElement === this.container) {\n\t\t\t\thasMouse = true;\n\t\t\t\tthis.updateCurrentThread(hasMouse, hasFocus);\n\t\t\t}\n\t\t}, true));\n\t\tthis._register(dom.addDisposableListener(this.container, dom.EventType.MOUSE_LEAVE, (e) => {\n\t\t\tif ((<any>e).fromElement === this.container) {\n\t\t\t\thasMouse = false;\n\t\t\t\tthis.updateCurrentThread(hasMouse, hasFocus);\n\t\t\t}\n\t\t}, true));\n\t\tthis._register(dom.addDisposableListener(this.container, dom.EventType.FOCUS_IN, () => {\n\t\t\thasFocus = true;\n\t\t\tthis.updateCurrentThread(hasMouse, hasFocus);\n\t\t}, true));\n\t\tthis._register(dom.addDisposableListener(this.container, dom.EventType.FOCUS_OUT, () => {\n\t\t\thasFocus = false;\n\t\t\tthis.updateCurrentThread(hasMouse, hasFocus);\n\t\t}, true));\n\t}\n\n\tasync updateCommentThread(commentThread: languages.CommentThread<T>) {\n\t\tconst shouldCollapse = (this._commentThread.collapsibleState === languages.CommentThreadCollapsibleState.Expanded) && (this._commentThreadState === languages.CommentThreadState.Unresolved)\n\t\t\t&& (commentThread.state === languages.CommentThreadState.Resolved);\n\t\tthis._commentThreadState = commentThread.state;\n\t\tthis._commentThread = commentThread;\n\t\tdispose(this._commentThreadDisposables);\n\t\tthis._commentThreadDisposables = [];\n\t\tthis._bindCommentThreadListeners();\n\n\t\tawait this._body.updateCommentThread(commentThread, this._commentReply?.isCommentEditorFocused() ?? false);\n\t\tthis._threadIsEmpty.set(!this._body.length);\n\t\tthis._header.updateCommentThread(commentThread);\n\t\tthis._commentReply?.updateCommentThread(commentThread);\n\n\t\tif (this._commentThread.contextValue) {\n\t\t\tthis._commentThreadContextValue.set(this._commentThread.contextValue);\n\t\t} else {\n\t\t\tthis._commentThreadContextValue.reset();\n\t\t}\n\n\t\tif (shouldCollapse && this.configurationService.getValue<ICommentsConfiguration>(COMMENTS_SECTION).collapseOnResolve) {\n\t\t\tthis.collapse();\n\t\t}\n\t}\n\n\tasync display(lineHeight: number, focus: boolean) {\n\t\tconst headHeight = Math.max(23, Math.ceil(lineHeight * 1.2)); // 23 is the value of `Math.ceil(lineHeight * 1.2)` with the default editor font size\n\t\tthis._header.updateHeight(headHeight);\n\n\t\tawait this._body.display();\n\n\t\t// create comment thread only when it supports reply\n\t\tif (this._commentThread.canReply) {\n\t\t\tthis._createCommentForm(focus);\n\t\t}\n\t\tthis._createAdditionalActions();\n\n\t\tthis._register(this._body.onDidResize(dimension => {\n\t\t\tthis._refresh(dimension);\n\t\t}));\n\n\t\t// If there are no existing comments, place focus on the text area. This must be done after show, which also moves focus.\n\t\t// if this._commentThread.comments is undefined, it doesn't finish initialization yet, so we don't focus the editor immediately.\n\t\tif (this._commentThread.canReply && this._commentReply) {\n\t\t\tthis._commentReply.focusIfNeeded();\n\t\t}\n\n\t\tthis._bindCommentThreadListeners();\n\t}\n\n\tprivate _refresh(dimension: dom.Dimension) {\n\t\tthis._body.layout();\n\t\tthis._onDidResize.fire(dimension);\n\t}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\t\tdispose(this._commentThreadDisposables);\n\t\tthis.updateCurrentThread(false, false);\n\t}\n\n\tprivate _bindCommentThreadListeners() {\n\t\tthis._commentThreadDisposables.push(this._commentThread.onDidChangeCanReply(() => {\n\t\t\tif (this._commentReply) {\n\t\t\t\tthis._commentReply.updateCanReply();\n\t\t\t} else {\n\t\t\t\tif (this._commentThread.canReply) {\n\t\t\t\t\tthis._createCommentForm(false);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis._commentThreadDisposables.push(this._commentThread.onDidChangeComments(async _ => {\n\t\t\tawait this.updateCommentThread(this._commentThread);\n\t\t}));\n\n\t\tthis._commentThreadDisposables.push(this._commentThread.onDidChangeLabel(_ => {\n\t\t\tthis._header.createThreadLabel();\n\t\t}));\n\t}\n\n\tprivate _createCommentForm(focus: boolean) {\n\t\tthis._commentReply = this._scopedInstantiationService.createInstance(\n\t\t\tCommentReply,\n\t\t\tthis._owner,\n\t\t\tthis._body.container,\n\t\t\tthis._parentEditor,\n\t\t\tthis._commentThread,\n\t\t\tthis._scopedInstantiationService,\n\t\t\tthis._contextKeyService,\n\t\t\tthis._commentMenus,\n\t\t\tthis._commentOptions,\n\t\t\tthis._pendingComment,\n\t\t\tthis,\n\t\t\tfocus,\n\t\t\tthis._containerDelegate.actionRunner\n\t\t);\n\n\t\tthis._register(this._commentReply);\n\t}\n\n\tprivate _createAdditionalActions() {\n\t\tthis._additionalActions = this._scopedInstantiationService.createInstance(\n\t\t\tCommentThreadAdditionalActions,\n\t\t\tthis._body.container,\n\t\t\tthis._commentThread,\n\t\t\tthis._contextKeyService,\n\t\t\tthis._commentMenus,\n\t\t\tthis._containerDelegate.actionRunner,\n\t\t);\n\n\t\tthis._register(this._additionalActions);\n\t}\n\n\tgetCommentCoords(commentUniqueId: number) {\n\t\treturn this._body.getCommentCoords(commentUniqueId);\n\t}\n\n\tgetPendingEdits(): { [key: number]: string } {\n\t\treturn this._body.getPendingEdits();\n\t}\n\n\tgetPendingComment(): string | undefined {\n\t\tif (this._commentReply) {\n\t\t\treturn this._commentReply.getPendingComment();\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tsetPendingComment(comment: string) {\n\t\tthis._pendingComment = comment;\n\t\tthis._commentReply?.setPendingComment(comment);\n\t}\n\n\tgetDimensions() {\n\t\treturn this._body.getDimensions();\n\t}\n\n\tlayout(widthInPixel?: number) {\n\t\tthis._body.layout(widthInPixel);\n\n\t\tif (widthInPixel !== undefined) {\n\t\t\tthis._commentReply?.layout(widthInPixel);\n\t\t}\n\t}\n\n\tensureFocusIntoNewEditingComment() {\n\t\tthis._body.ensureFocusIntoNewEditingComment();\n\t}\n\n\tfocusCommentEditor() {\n\t\tthis._commentReply?.expandReplyAreaAndFocusCommentEditor();\n\t}\n\n\tfocus() {\n\t\tthis._body.focus();\n\t}\n\n\tasync submitComment() {\n\t\tconst activeComment = this._body.activeComment;\n\t\tif (activeComment) {\n\t\t\treturn activeComment.submitComment();\n\t\t} else if ((this._commentReply?.getPendingComment()?.length ?? 0) > 0) {\n\t\t\treturn this._commentReply?.submitComment();\n\t\t}\n\t}\n\n\tcollapse() {\n\t\tthis._containerDelegate.collapse();\n\t}\n\n\tapplyTheme(theme: IColorTheme, fontInfo: FontInfo) {\n\t\tconst content: string[] = [];\n\n\t\tcontent.push(`.monaco-editor .review-widget > .body { border-top: 1px solid var(${commentThreadStateColorVar}) }`);\n\t\tcontent.push(`.monaco-editor .review-widget > .head { background-color: var(${commentThreadStateBackgroundColorVar}) }`);\n\n\t\tconst linkColor = theme.getColor(textLinkForeground);\n\t\tif (linkColor) {\n\t\t\tcontent.push(`.review-widget .body .comment-body a { color: ${linkColor} }`);\n\t\t}\n\n\t\tconst linkActiveColor = theme.getColor(textLinkActiveForeground);\n\t\tif (linkActiveColor) {\n\t\t\tcontent.push(`.review-widget .body .comment-body a:hover, a:active { color: ${linkActiveColor} }`);\n\t\t}\n\n\t\tconst focusColor = theme.getColor(focusBorder);\n\t\tif (focusColor) {\n\t\t\tcontent.push(`.review-widget .body .comment-body a:focus { outline: 1px solid ${focusColor}; }`);\n\t\t\tcontent.push(`.review-widget .body .monaco-editor.focused { outline: 1px solid ${focusColor}; }`);\n\t\t}\n\n\t\tconst blockQuoteBackground = theme.getColor(textBlockQuoteBackground);\n\t\tif (blockQuoteBackground) {\n\t\t\tcontent.push(`.review-widget .body .review-comment blockquote { background: ${blockQuoteBackground}; }`);\n\t\t}\n\n\t\tconst blockQuoteBOrder = theme.getColor(textBlockQuoteBorder);\n\t\tif (blockQuoteBOrder) {\n\t\t\tcontent.push(`.review-widget .body .review-comment blockquote { border-color: ${blockQuoteBOrder}; }`);\n\t\t}\n\n\t\tconst border = theme.getColor(PANEL_BORDER);\n\t\tif (border) {\n\t\t\tcontent.push(`.review-widget .body .review-comment .review-comment-contents .comment-reactions .action-item a.action-label { border-color: ${border}; }`);\n\t\t}\n\n\t\tconst hcBorder = theme.getColor(contrastBorder);\n\t\tif (hcBorder) {\n\t\t\tcontent.push(`.review-widget .body .comment-form .review-thread-reply-button { outline-color: ${hcBorder}; }`);\n\t\t\tcontent.push(`.review-widget .body .monaco-editor { outline: 1px solid ${hcBorder}; }`);\n\t\t}\n\n\t\tconst errorBorder = theme.getColor(inputValidationErrorBorder);\n\t\tif (errorBorder) {\n\t\t\tcontent.push(`.review-widget .validation-error { border: 1px solid ${errorBorder}; }`);\n\t\t}\n\n\t\tconst errorBackground = theme.getColor(inputValidationErrorBackground);\n\t\tif (errorBackground) {\n\t\t\tcontent.push(`.review-widget .validation-error { background: ${errorBackground}; }`);\n\t\t}\n\n\t\tconst errorForeground = theme.getColor(inputValidationErrorForeground);\n\t\tif (errorForeground) {\n\t\t\tcontent.push(`.review-widget .body .comment-form .validation-error { color: ${errorForeground}; }`);\n\t\t}\n\n\t\tconst fontFamilyVar = '--comment-thread-editor-font-family';\n\t\tconst fontSizeVar = '--comment-thread-editor-font-size';\n\t\tconst fontWeightVar = '--comment-thread-editor-font-weight';\n\t\tthis.container?.style.setProperty(fontFamilyVar, fontInfo.fontFamily);\n\t\tthis.container?.style.setProperty(fontSizeVar, `${fontInfo.fontSize}px`);\n\t\tthis.container?.style.setProperty(fontWeightVar, fontInfo.fontWeight);\n\n\t\tcontent.push(`.review-widget .body code {\n\t\t\tfont-family: var(${fontFamilyVar});\n\t\t\tfont-weight: var(${fontWeightVar});\n\t\t}`);\n\n\t\tthis._styleElement.textContent = content.join('\\n');\n\t\tthis._commentReply?.setCommentEditorDecorations();\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
