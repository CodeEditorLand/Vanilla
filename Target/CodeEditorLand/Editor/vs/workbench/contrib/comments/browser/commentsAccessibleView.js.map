{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/comments/browser/commentsAccessibleView.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { MarshalledId } from '../../../../base/common/marshallingIds.js';\nimport { ServicesAccessor } from '../../../../editor/browser/editorExtensions.js';\nimport { AccessibleViewProviderId, AccessibleViewType, IAccessibleViewContentProvider } from '../../../../platform/accessibility/browser/accessibleView.js';\nimport { IAccessibleViewImplentation } from '../../../../platform/accessibility/browser/accessibleViewRegistry.js';\nimport { IMenuService } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { AccessibilityVerbositySettingId } from '../../accessibility/browser/accessibilityConfiguration.js';\nimport { COMMENTS_VIEW_ID, CommentsMenus } from './commentsTreeViewer.js';\nimport { CommentsPanel, CONTEXT_KEY_COMMENT_FOCUSED } from './commentsView.js';\nimport { IViewsService } from '../../../services/views/common/viewsService.js';\n\nexport class CommentsAccessibleView extends Disposable implements IAccessibleViewImplentation {\n\treadonly priority = 90;\n\treadonly name = 'comment';\n\treadonly when = CONTEXT_KEY_COMMENT_FOCUSED;\n\treadonly type = AccessibleViewType.View;\n\tgetProvider(accessor: ServicesAccessor) {\n\t\tconst contextKeyService = accessor.get(IContextKeyService);\n\t\tconst viewsService = accessor.get(IViewsService);\n\t\tconst menuService = accessor.get(IMenuService);\n\t\tconst commentsView = viewsService.getActiveViewWithId<CommentsPanel>(COMMENTS_VIEW_ID);\n\t\tconst focusedCommentNode = commentsView?.focusedCommentNode;\n\t\tif (!commentsView || !focusedCommentNode) {\n\t\t\treturn;\n\t\t}\n\t\tconst menus = this._register(new CommentsMenus(menuService));\n\t\tmenus.setContextKeyService(contextKeyService);\n\n\t\treturn new CommentsAccessibleContentProvider(commentsView, focusedCommentNode, menus);\n\t}\n\tconstructor() {\n\t\tsuper();\n\t}\n}\n\nclass CommentsAccessibleContentProvider extends Disposable implements IAccessibleViewContentProvider {\n\tconstructor(\n\t\tprivate readonly _commentsView: CommentsPanel,\n\t\tprivate readonly _focusedCommentNode: any,\n\t\tprivate readonly _menus: CommentsMenus,\n\t) {\n\t\tsuper();\n\t}\n\treadonly id = AccessibleViewProviderId.Comments;\n\treadonly verbositySettingKey = AccessibilityVerbositySettingId.Comments;\n\treadonly options = { type: AccessibleViewType.View };\n\tpublic actions = [...this._menus.getResourceContextActions(this._focusedCommentNode)].filter(i => i.enabled).map(action => {\n\t\treturn {\n\t\t\t...action,\n\t\t\trun: () => {\n\t\t\t\tthis._commentsView.focus();\n\t\t\t\taction.run({\n\t\t\t\t\tthread: this._focusedCommentNode.thread,\n\t\t\t\t\t$mid: MarshalledId.CommentThread,\n\t\t\t\t\tcommentControlHandle: this._focusedCommentNode.controllerHandle,\n\t\t\t\t\tcommentThreadHandle: this._focusedCommentNode.threadHandle,\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t});\n\tprovideContent(): string {\n\t\tconst commentNode = this._commentsView.focusedCommentNode;\n\t\tconst content = this._commentsView.focusedCommentInfo?.toString();\n\t\tif (!commentNode || !content) {\n\t\t\tthrow new Error('Comment tree is focused but no comment is selected');\n\t\t}\n\t\treturn content;\n\t}\n\tonClose(): void {\n\t\tthis._commentsView.focus();\n\t}\n\tprovideNextContent(): string | undefined {\n\t\tthis._commentsView.focusNextNode();\n\t\treturn this.provideContent();\n\t}\n\tprovidePreviousContent(): string | undefined {\n\t\tthis._commentsView.focusPreviousNode();\n\t\treturn this.provideContent();\n\t}\n}\n"],
  "mappings": ";;AAKA,SAAS,kBAAkB;AAC3B,SAAS,oBAAoB;AAC7B,SAAS,wBAAwB;AACjC,SAAS,0BAA0B,oBAAoB,sCAAsC;AAC7F,SAAS,mCAAmC;AAC5C,SAAS,oBAAoB;AAC7B,SAAS,0BAA0B;AACnC,SAAS,uCAAuC;AAChD,SAAS,kBAAkB,qBAAqB;AAChD,SAAS,eAAe,mCAAmC;AAC3D,SAAS,qBAAqB;AAEvB,MAAM,+BAA+B,WAAkD;AAAA,EAjB9F,OAiB8F;AAAA;AAAA;AAAA,EACpF,WAAW;AAAA,EACX,OAAO;AAAA,EACP,OAAO;AAAA,EACP,OAAO,mBAAmB;AAAA,EACnC,YAAY,UAA4B;AACvC,UAAM,oBAAoB,SAAS,IAAI,kBAAkB;AACzD,UAAM,eAAe,SAAS,IAAI,aAAa;AAC/C,UAAM,cAAc,SAAS,IAAI,YAAY;AAC7C,UAAM,eAAe,aAAa,oBAAmC,gBAAgB;AACrF,UAAM,qBAAqB,cAAc;AACzC,QAAI,CAAC,gBAAgB,CAAC,oBAAoB;AACzC;AAAA,IACD;AACA,UAAM,QAAQ,KAAK,UAAU,IAAI,cAAc,WAAW,CAAC;AAC3D,UAAM,qBAAqB,iBAAiB;AAE5C,WAAO,IAAI,kCAAkC,cAAc,oBAAoB,KAAK;AAAA,EACrF;AAAA,EACA,cAAc;AACb,UAAM;AAAA,EACP;AACD;AAEA,MAAM,0CAA0C,WAAqD;AAAA,EACpG,YACkB,eACA,qBACA,QAChB;AACD,UAAM;AAJW;AACA;AACA;AAAA,EAGlB;AAAA,EAhDD,OAyCqG;AAAA;AAAA;AAAA,EAQ3F,KAAK,yBAAyB;AAAA,EAC9B,sBAAsB,gCAAgC;AAAA,EACtD,UAAU,EAAE,MAAM,mBAAmB,KAAK;AAAA,EAC5C,UAAU,CAAC,GAAG,KAAK,OAAO,0BAA0B,KAAK,mBAAmB,CAAC,EAAE,OAAO,OAAK,EAAE,OAAO,EAAE,IAAI,YAAU;AAC1H,WAAO;AAAA,MACN,GAAG;AAAA,MACH,KAAK,6BAAM;AACV,aAAK,cAAc,MAAM;AACzB,eAAO,IAAI;AAAA,UACV,QAAQ,KAAK,oBAAoB;AAAA,UACjC,MAAM,aAAa;AAAA,UACnB,sBAAsB,KAAK,oBAAoB;AAAA,UAC/C,qBAAqB,KAAK,oBAAoB;AAAA,QAC/C,CAAC;AAAA,MACF,GARK;AAAA,IASN;AAAA,EACD,CAAC;AAAA,EACD,iBAAyB;AACxB,UAAM,cAAc,KAAK,cAAc;AACvC,UAAM,UAAU,KAAK,cAAc,oBAAoB,SAAS;AAChE,QAAI,CAAC,eAAe,CAAC,SAAS;AAC7B,YAAM,IAAI,MAAM,oDAAoD;AAAA,IACrE;AACA,WAAO;AAAA,EACR;AAAA,EACA,UAAgB;AACf,SAAK,cAAc,MAAM;AAAA,EAC1B;AAAA,EACA,qBAAyC;AACxC,SAAK,cAAc,cAAc;AACjC,WAAO,KAAK,eAAe;AAAA,EAC5B;AAAA,EACA,yBAA6C;AAC5C,SAAK,cAAc,kBAAkB;AACrC,WAAO,KAAK,eAAe;AAAA,EAC5B;AACD;",
  "names": []
}
