{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/comments/browser/commentNode.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport * as languages from '../../../../editor/common/languages.js';\nimport { ActionsOrientation, ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action, IActionRunner, IAction, Separator, ActionRunner } from '../../../../base/common/actions.js';\nimport { Disposable, IDisposable, IReference, dispose } from '../../../../base/common/lifecycle.js';\nimport { URI, UriComponents } from '../../../../base/common/uri.js';\nimport { MarkdownRenderer } from '../../../../editor/browser/widget/markdownRenderer/browser/markdownRenderer.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ICommentService } from './commentService.js';\nimport { LayoutableEditor, MIN_EDITOR_HEIGHT, SimpleCommentEditor, calculateEditorHeight } from './simpleCommentEditor.js';\nimport { Selection } from '../../../../editor/common/core/selection.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { ToolBar } from '../../../../base/browser/ui/toolbar/toolbar.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { AnchorAlignment } from '../../../../base/browser/ui/contextview/contextview.js';\nimport { ToggleReactionsAction, ReactionAction, ReactionActionViewItem } from './reactionsAction.js';\nimport { ICommentThreadWidget } from '../common/commentThreadWidget.js';\nimport { MenuItemAction, SubmenuItemAction, IMenu, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { MenuEntryActionViewItem, SubmenuEntryActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IContextKeyService, IContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { CommentFormActions } from './commentFormActions.js';\nimport { MOUSE_CURSOR_TEXT_CSS_CLASS_NAME } from '../../../../base/browser/ui/mouseCursor/mouseCursor.js';\nimport { ActionViewItem, IActionViewItemOptions } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { DropdownMenuActionViewItem } from '../../../../base/browser/ui/dropdown/dropdownActionViewItem.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { MarshalledId } from '../../../../base/common/marshallingIds.js';\nimport { TimestampWidget } from './timestamp.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { IRange } from '../../../../editor/common/core/range.js';\nimport { ICellRange } from '../../notebook/common/notebookRange.js';\nimport { CommentMenus } from './commentMenus.js';\nimport { Scrollable, ScrollbarVisibility } from '../../../../base/common/scrollable.js';\nimport { SmoothScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { DomEmitter } from '../../../../base/browser/event.js';\nimport { CommentContextKeys } from '../common/commentContextKeys.js';\nimport { FileAccess, Schemas } from '../../../../base/common/network.js';\nimport { COMMENTS_SECTION, ICommentsConfiguration } from '../common/commentsConfiguration.js';\nimport { StandardMouseEvent } from '../../../../base/browser/mouseEvent.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { MarshalledCommentThread } from '../../../common/comments.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\nimport { IResolvedTextEditorModel, ITextModelService } from '../../../../editor/common/services/resolverService.js';\n\nclass CommentsActionRunner extends ActionRunner {\n\tprotected override async runAction(action: IAction, context: any[]): Promise<void> {\n\t\tawait action.run(...context);\n\t}\n}\n\nexport class CommentNode<T extends IRange | ICellRange> extends Disposable {\n\tprivate _domNode: HTMLElement;\n\tprivate _body: HTMLElement;\n\tprivate _avatar: HTMLElement;\n\tprivate _md: HTMLElement | undefined;\n\tprivate _plainText: HTMLElement | undefined;\n\tprivate _clearTimeout: any;\n\n\tprivate _editAction: Action | null = null;\n\tprivate _commentEditContainer: HTMLElement | null = null;\n\tprivate _commentDetailsContainer: HTMLElement;\n\tprivate _actionsToolbarContainer!: HTMLElement;\n\tprivate _reactionsActionBar?: ActionBar;\n\tprivate _reactionActionsContainer?: HTMLElement;\n\tprivate _commentEditor: SimpleCommentEditor | null = null;\n\tprivate _commentEditorDisposables: IDisposable[] = [];\n\tprivate _commentEditorModel: IReference<IResolvedTextEditorModel> | null = null;\n\tprivate _editorHeight = MIN_EDITOR_HEIGHT;\n\n\tprivate _isPendingLabel!: HTMLElement;\n\tprivate _timestamp: HTMLElement | undefined;\n\tprivate _timestampWidget: TimestampWidget | undefined;\n\tprivate _contextKeyService: IContextKeyService;\n\tprivate _commentContextValue: IContextKey<string>;\n\tprivate _commentMenus: CommentMenus;\n\n\tprivate _scrollable!: Scrollable;\n\tprivate _scrollableElement!: SmoothScrollableElement;\n\n\tprotected actionRunner?: IActionRunner;\n\tprotected toolbar: ToolBar | undefined;\n\tprivate _commentFormActions: CommentFormActions | null = null;\n\tprivate _commentEditorActions: CommentFormActions | null = null;\n\n\tprivate readonly _onDidClick = new Emitter<CommentNode<T>>();\n\n\tpublic get domNode(): HTMLElement {\n\t\treturn this._domNode;\n\t}\n\n\tpublic isEditing: boolean = false;\n\n\tconstructor(\n\t\tprivate readonly parentEditor: LayoutableEditor,\n\t\tprivate commentThread: languages.CommentThread<T>,\n\t\tpublic comment: languages.Comment,\n\t\tprivate pendingEdit: string | undefined,\n\t\tprivate owner: string,\n\t\tprivate resource: URI,\n\t\tprivate parentThread: ICommentThreadWidget,\n\t\tprivate markdownRenderer: MarkdownRenderer,\n\t\t@IInstantiationService private instantiationService: IInstantiationService,\n\t\t@ICommentService private commentService: ICommentService,\n\t\t@INotificationService private notificationService: INotificationService,\n\t\t@IContextMenuService private contextMenuService: IContextMenuService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IConfigurationService private configurationService: IConfigurationService,\n\t\t@IHoverService private hoverService: IHoverService,\n\t\t@IAccessibilityService private accessibilityService: IAccessibilityService,\n\t\t@IKeybindingService private keybindingService: IKeybindingService,\n\t\t@ITextModelService private readonly textModelService: ITextModelService,\n\t) {\n\t\tsuper();\n\n\t\tthis._domNode = dom.$('div.review-comment');\n\t\tthis._contextKeyService = this._register(contextKeyService.createScoped(this._domNode));\n\t\tthis._commentContextValue = CommentContextKeys.commentContext.bindTo(this._contextKeyService);\n\t\tif (this.comment.contextValue) {\n\t\t\tthis._commentContextValue.set(this.comment.contextValue);\n\t\t}\n\t\tthis._commentMenus = this.commentService.getCommentMenus(this.owner);\n\n\t\tthis._domNode.tabIndex = -1;\n\t\tthis._avatar = dom.append(this._domNode, dom.$('div.avatar-container'));\n\t\tthis.updateCommentUserIcon(this.comment.userIconPath);\n\n\t\tthis._commentDetailsContainer = dom.append(this._domNode, dom.$('.review-comment-contents'));\n\n\t\tthis.createHeader(this._commentDetailsContainer);\n\t\tthis._body = document.createElement(`div`);\n\t\tthis._body.classList.add('comment-body', MOUSE_CURSOR_TEXT_CSS_CLASS_NAME);\n\t\tif (configurationService.getValue<ICommentsConfiguration | undefined>(COMMENTS_SECTION)?.maxHeight !== false) {\n\t\t\tthis._body.classList.add('comment-body-max-height');\n\t\t}\n\n\t\tthis.createScroll(this._commentDetailsContainer, this._body);\n\t\tthis.updateCommentBody(this.comment.body);\n\n\t\tif (this.comment.commentReactions && this.comment.commentReactions.length && this.comment.commentReactions.filter(reaction => !!reaction.count).length) {\n\t\t\tthis.createReactionsContainer(this._commentDetailsContainer);\n\t\t}\n\n\t\tthis._domNode.setAttribute('aria-label', `${comment.userName}, ${this.commentBodyValue}`);\n\t\tthis._domNode.setAttribute('role', 'treeitem');\n\t\tthis._clearTimeout = null;\n\n\t\tthis._register(dom.addDisposableListener(this._domNode, dom.EventType.CLICK, () => this.isEditing || this._onDidClick.fire(this)));\n\t\tthis._register(dom.addDisposableListener(this._domNode, dom.EventType.CONTEXT_MENU, e => {\n\t\t\treturn this.onContextMenu(e);\n\t\t}));\n\n\t\tif (pendingEdit) {\n\t\t\tthis.switchToEditMode();\n\t\t}\n\t\tthis._register(this.accessibilityService.onDidChangeScreenReaderOptimized(() => {\n\t\t\tthis.toggleToolbarHidden(true);\n\t\t}));\n\n\t\tthis.activeCommentListeners();\n\t}\n\n\tprivate activeCommentListeners() {\n\t\tthis._register(dom.addDisposableListener(this._domNode, dom.EventType.FOCUS_IN, () => {\n\t\t\tthis.commentService.setActiveCommentAndThread(this.owner, { thread: this.commentThread, comment: this.comment });\n\t\t}, true));\n\t}\n\n\tprivate createScroll(container: HTMLElement, body: HTMLElement) {\n\t\tthis._scrollable = new Scrollable({\n\t\t\tforceIntegerValues: true,\n\t\t\tsmoothScrollDuration: 125,\n\t\t\tscheduleAtNextAnimationFrame: cb => dom.scheduleAtNextAnimationFrame(dom.getWindow(container), cb)\n\t\t});\n\t\tthis._scrollableElement = this._register(new SmoothScrollableElement(body, {\n\t\t\thorizontal: ScrollbarVisibility.Visible,\n\t\t\tvertical: ScrollbarVisibility.Visible\n\t\t}, this._scrollable));\n\n\t\tthis._register(this._scrollableElement.onScroll(e => {\n\t\t\tif (e.scrollLeftChanged) {\n\t\t\t\tbody.scrollLeft = e.scrollLeft;\n\t\t\t}\n\t\t\tif (e.scrollTopChanged) {\n\t\t\t\tbody.scrollTop = e.scrollTop;\n\t\t\t}\n\t\t}));\n\n\t\tconst onDidScrollViewContainer = this._register(new DomEmitter(body, 'scroll')).event;\n\t\tthis._register(onDidScrollViewContainer(_ => {\n\t\t\tconst position = this._scrollableElement.getScrollPosition();\n\t\t\tconst scrollLeft = Math.abs(body.scrollLeft - position.scrollLeft) <= 1 ? undefined : body.scrollLeft;\n\t\t\tconst scrollTop = Math.abs(body.scrollTop - position.scrollTop) <= 1 ? undefined : body.scrollTop;\n\n\t\t\tif (scrollLeft !== undefined || scrollTop !== undefined) {\n\t\t\t\tthis._scrollableElement.setScrollPosition({ scrollLeft, scrollTop });\n\t\t\t}\n\t\t}));\n\n\t\tcontainer.appendChild(this._scrollableElement.getDomNode());\n\t}\n\n\tprivate updateCommentBody(body: string | IMarkdownString) {\n\t\tthis._body.innerText = '';\n\t\tthis._md = undefined;\n\t\tthis._plainText = undefined;\n\t\tif (typeof body === 'string') {\n\t\t\tthis._plainText = dom.append(this._body, dom.$('.comment-body-plainstring'));\n\t\t\tthis._plainText.innerText = body;\n\t\t} else {\n\t\t\tthis._md = this.markdownRenderer.render(body).element;\n\t\t\tthis._body.appendChild(this._md);\n\t\t}\n\t}\n\n\tprivate updateCommentUserIcon(userIconPath: UriComponents | undefined) {\n\t\tthis._avatar.textContent = '';\n\t\tif (userIconPath) {\n\t\t\tconst img = <HTMLImageElement>dom.append(this._avatar, dom.$('img.avatar'));\n\t\t\timg.src = FileAccess.uriToBrowserUri(URI.revive(userIconPath)).toString(true);\n\t\t\timg.onerror = _ => img.remove();\n\t\t}\n\t}\n\n\tpublic get onDidClick(): Event<CommentNode<T>> {\n\t\treturn this._onDidClick.event;\n\t}\n\n\tprivate createTimestamp(container: HTMLElement) {\n\t\tthis._timestamp = dom.append(container, dom.$('span.timestamp-container'));\n\t\tthis.updateTimestamp(this.comment.timestamp);\n\t}\n\n\tprivate updateTimestamp(raw?: string) {\n\t\tif (!this._timestamp) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst timestamp = raw !== undefined ? new Date(raw) : undefined;\n\t\tif (!timestamp) {\n\t\t\tthis._timestampWidget?.dispose();\n\t\t} else {\n\t\t\tif (!this._timestampWidget) {\n\t\t\t\tthis._timestampWidget = new TimestampWidget(this.configurationService, this.hoverService, this._timestamp, timestamp);\n\t\t\t\tthis._register(this._timestampWidget);\n\t\t\t} else {\n\t\t\t\tthis._timestampWidget.setTimestamp(timestamp);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate createHeader(commentDetailsContainer: HTMLElement): void {\n\t\tconst header = dom.append(commentDetailsContainer, dom.$(`div.comment-title.${MOUSE_CURSOR_TEXT_CSS_CLASS_NAME}`));\n\t\tconst infoContainer = dom.append(header, dom.$('comment-header-info'));\n\t\tconst author = dom.append(infoContainer, dom.$('strong.author'));\n\t\tauthor.innerText = this.comment.userName;\n\t\tthis.createTimestamp(infoContainer);\n\t\tthis._isPendingLabel = dom.append(infoContainer, dom.$('span.isPending'));\n\n\t\tif (this.comment.label) {\n\t\t\tthis._isPendingLabel.innerText = this.comment.label;\n\t\t} else {\n\t\t\tthis._isPendingLabel.innerText = '';\n\t\t}\n\n\t\tthis._actionsToolbarContainer = dom.append(header, dom.$('.comment-actions'));\n\t\tthis.toggleToolbarHidden(true);\n\t\tthis.createActionsToolbar();\n\t}\n\n\tprivate toggleToolbarHidden(hidden: boolean) {\n\t\tif (hidden && !this.accessibilityService.isScreenReaderOptimized()) {\n\t\t\tthis._actionsToolbarContainer.classList.add('hidden');\n\t\t} else {\n\t\t\tthis._actionsToolbarContainer.classList.remove('hidden');\n\t\t}\n\t}\n\n\tprivate getToolbarActions(menu: IMenu): { primary: IAction[]; secondary: IAction[] } {\n\t\tconst contributedActions = menu.getActions({ shouldForwardArgs: true });\n\t\tconst primary: IAction[] = [];\n\t\tconst secondary: IAction[] = [];\n\t\tconst result = { primary, secondary };\n\t\tfillInActions(contributedActions, result, false, g => /^inline/.test(g));\n\t\treturn result;\n\t}\n\n\tprivate get commentNodeContext(): [any, MarshalledCommentThread] {\n\t\treturn [{\n\t\t\tthread: this.commentThread,\n\t\t\tcommentUniqueId: this.comment.uniqueIdInThread,\n\t\t\t$mid: MarshalledId.CommentNode\n\t\t},\n\t\t{\n\t\t\tcommentControlHandle: this.commentThread.controllerHandle,\n\t\t\tcommentThreadHandle: this.commentThread.commentThreadHandle,\n\t\t\t$mid: MarshalledId.CommentThread\n\t\t}];\n\t}\n\n\tprivate createToolbar() {\n\t\tthis.toolbar = new ToolBar(this._actionsToolbarContainer, this.contextMenuService, {\n\t\t\tactionViewItemProvider: (action, options) => {\n\t\t\t\tif (action.id === ToggleReactionsAction.ID) {\n\t\t\t\t\treturn new DropdownMenuActionViewItem(\n\t\t\t\t\t\taction,\n\t\t\t\t\t\t(<ToggleReactionsAction>action).menuActions,\n\t\t\t\t\t\tthis.contextMenuService,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...options,\n\t\t\t\t\t\t\tactionViewItemProvider: (action, options) => this.actionViewItemProvider(action as Action, options),\n\t\t\t\t\t\t\tactionRunner: this.actionRunner,\n\t\t\t\t\t\t\tclassNames: ['toolbar-toggle-pickReactions', ...ThemeIcon.asClassNameArray(Codicon.reactions)],\n\t\t\t\t\t\t\tanchorAlignmentProvider: () => AnchorAlignment.RIGHT\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn this.actionViewItemProvider(action as Action, options);\n\t\t\t},\n\t\t\torientation: ActionsOrientation.HORIZONTAL\n\t\t});\n\n\t\tthis.toolbar.context = this.commentNodeContext;\n\t\tthis.toolbar.actionRunner = new CommentsActionRunner();\n\n\t\tthis.registerActionBarListeners(this._actionsToolbarContainer);\n\t\tthis._register(this.toolbar);\n\t}\n\n\tprivate createActionsToolbar() {\n\t\tconst actions: IAction[] = [];\n\n\t\tconst hasReactionHandler = this.commentService.hasReactionHandler(this.owner);\n\n\t\tif (hasReactionHandler) {\n\t\t\tconst toggleReactionAction = this.createReactionPicker(this.comment.commentReactions || []);\n\t\t\tactions.push(toggleReactionAction);\n\t\t}\n\n\t\tconst menu = this._commentMenus.getCommentTitleActions(this.comment, this._contextKeyService);\n\t\tthis._register(menu);\n\t\tthis._register(menu.onDidChange(e => {\n\t\t\tconst { primary, secondary } = this.getToolbarActions(menu);\n\t\t\tif (!this.toolbar && (primary.length || secondary.length)) {\n\t\t\t\tthis.createToolbar();\n\t\t\t}\n\n\t\t\tthis.toolbar!.setActions(primary, secondary);\n\t\t}));\n\n\t\tconst { primary, secondary } = this.getToolbarActions(menu);\n\t\tactions.push(...primary);\n\n\t\tif (actions.length || secondary.length) {\n\t\t\tthis.createToolbar();\n\t\t\tthis.toolbar!.setActions(actions, secondary);\n\t\t}\n\t}\n\n\tactionViewItemProvider(action: Action, options: IActionViewItemOptions) {\n\t\tif (action.id === ToggleReactionsAction.ID) {\n\t\t\toptions = { label: false, icon: true };\n\t\t} else {\n\t\t\toptions = { label: false, icon: true };\n\t\t}\n\n\t\tif (action.id === ReactionAction.ID) {\n\t\t\tconst item = new ReactionActionViewItem(action);\n\t\t\treturn item;\n\t\t} else if (action instanceof MenuItemAction) {\n\t\t\treturn this.instantiationService.createInstance(MenuEntryActionViewItem, action, { hoverDelegate: options.hoverDelegate });\n\t\t} else if (action instanceof SubmenuItemAction) {\n\t\t\treturn this.instantiationService.createInstance(SubmenuEntryActionViewItem, action, options);\n\t\t} else {\n\t\t\tconst item = new ActionViewItem({}, action, options);\n\t\t\treturn item;\n\t\t}\n\t}\n\n\tasync submitComment(): Promise<void> {\n\t\tif (this._commentEditor && this._commentFormActions) {\n\t\t\tawait this._commentFormActions.triggerDefaultAction();\n\t\t\tthis.pendingEdit = undefined;\n\t\t}\n\t}\n\n\tprivate createReactionPicker(reactionGroup: languages.CommentReaction[]): ToggleReactionsAction {\n\t\tconst toggleReactionAction = this._register(new ToggleReactionsAction(() => {\n\t\t\ttoggleReactionActionViewItem?.show();\n\t\t}, nls.localize('commentToggleReaction', \"Toggle Reaction\")));\n\n\t\tlet reactionMenuActions: Action[] = [];\n\t\tif (reactionGroup && reactionGroup.length) {\n\t\t\treactionMenuActions = reactionGroup.map((reaction) => {\n\t\t\t\treturn new Action(`reaction.command.${reaction.label}`, `${reaction.label}`, '', true, async () => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait this.commentService.toggleReaction(this.owner, this.resource, this.commentThread, this.comment, reaction);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconst error = e.message\n\t\t\t\t\t\t\t? nls.localize('commentToggleReactionError', \"Toggling the comment reaction failed: {0}.\", e.message)\n\t\t\t\t\t\t\t: nls.localize('commentToggleReactionDefaultError', \"Toggling the comment reaction failed\");\n\t\t\t\t\t\tthis.notificationService.error(error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\ttoggleReactionAction.menuActions = reactionMenuActions;\n\n\t\tconst toggleReactionActionViewItem: DropdownMenuActionViewItem = new DropdownMenuActionViewItem(\n\t\t\ttoggleReactionAction,\n\t\t\t(<ToggleReactionsAction>toggleReactionAction).menuActions,\n\t\t\tthis.contextMenuService,\n\t\t\t{\n\t\t\t\tactionViewItemProvider: (action, options) => {\n\t\t\t\t\tif (action.id === ToggleReactionsAction.ID) {\n\t\t\t\t\t\treturn toggleReactionActionViewItem;\n\t\t\t\t\t}\n\t\t\t\t\treturn this.actionViewItemProvider(action as Action, options);\n\t\t\t\t},\n\t\t\t\tactionRunner: this.actionRunner,\n\t\t\t\tclassNames: 'toolbar-toggle-pickReactions',\n\t\t\t\tanchorAlignmentProvider: () => AnchorAlignment.RIGHT\n\t\t\t}\n\t\t);\n\n\t\treturn toggleReactionAction;\n\t}\n\n\tprivate createReactionsContainer(commentDetailsContainer: HTMLElement): void {\n\t\tthis._reactionActionsContainer = dom.append(commentDetailsContainer, dom.$('div.comment-reactions'));\n\t\tthis._reactionsActionBar = new ActionBar(this._reactionActionsContainer, {\n\t\t\tactionViewItemProvider: (action, options) => {\n\t\t\t\tif (action.id === ToggleReactionsAction.ID) {\n\t\t\t\t\treturn new DropdownMenuActionViewItem(\n\t\t\t\t\t\taction,\n\t\t\t\t\t\t(<ToggleReactionsAction>action).menuActions,\n\t\t\t\t\t\tthis.contextMenuService,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tactionViewItemProvider: (action, options) => this.actionViewItemProvider(action as Action, options),\n\t\t\t\t\t\t\tactionRunner: this.actionRunner,\n\t\t\t\t\t\t\tclassNames: ['toolbar-toggle-pickReactions', ...ThemeIcon.asClassNameArray(Codicon.reactions)],\n\t\t\t\t\t\t\tanchorAlignmentProvider: () => AnchorAlignment.RIGHT\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn this.actionViewItemProvider(action as Action, options);\n\t\t\t}\n\t\t});\n\t\tthis._register(this._reactionsActionBar);\n\n\t\tconst hasReactionHandler = this.commentService.hasReactionHandler(this.owner);\n\t\tthis.comment.commentReactions!.filter(reaction => !!reaction.count).map(reaction => {\n\t\t\tconst action = new ReactionAction(`reaction.${reaction.label}`, `${reaction.label}`, reaction.hasReacted && (reaction.canEdit || hasReactionHandler) ? 'active' : '', (reaction.canEdit || hasReactionHandler), async () => {\n\t\t\t\ttry {\n\t\t\t\t\tawait this.commentService.toggleReaction(this.owner, this.resource, this.commentThread, this.comment, reaction);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tlet error: string;\n\n\t\t\t\t\tif (reaction.hasReacted) {\n\t\t\t\t\t\terror = e.message\n\t\t\t\t\t\t\t? nls.localize('commentDeleteReactionError', \"Deleting the comment reaction failed: {0}.\", e.message)\n\t\t\t\t\t\t\t: nls.localize('commentDeleteReactionDefaultError', \"Deleting the comment reaction failed\");\n\t\t\t\t\t} else {\n\t\t\t\t\t\terror = e.message\n\t\t\t\t\t\t\t? nls.localize('commentAddReactionError', \"Deleting the comment reaction failed: {0}.\", e.message)\n\t\t\t\t\t\t\t: nls.localize('commentAddReactionDefaultError', \"Deleting the comment reaction failed\");\n\t\t\t\t\t}\n\t\t\t\t\tthis.notificationService.error(error);\n\t\t\t\t}\n\t\t\t}, reaction.reactors, reaction.iconPath, reaction.count);\n\n\t\t\tthis._reactionsActionBar?.push(action, { label: true, icon: true });\n\t\t});\n\n\t\tif (hasReactionHandler) {\n\t\t\tconst toggleReactionAction = this.createReactionPicker(this.comment.commentReactions || []);\n\t\t\tthis._reactionsActionBar.push(toggleReactionAction, { label: false, icon: true });\n\t\t}\n\t}\n\n\tget commentBodyValue(): string {\n\t\treturn (typeof this.comment.body === 'string') ? this.comment.body : this.comment.body.value;\n\t}\n\n\tprivate async createCommentEditor(editContainer: HTMLElement): Promise<void> {\n\t\tconst container = dom.append(editContainer, dom.$('.edit-textarea'));\n\t\tthis._commentEditor = this.instantiationService.createInstance(SimpleCommentEditor, container, SimpleCommentEditor.getEditorOptions(this.configurationService), this._contextKeyService, this.parentThread);\n\n\t\tconst resource = URI.from({\n\t\t\tscheme: Schemas.commentsInput,\n\t\t\tpath: `/commentinput-${this.comment.uniqueIdInThread}-${Date.now()}.md`\n\t\t});\n\t\tconst modelRef = await this.textModelService.createModelReference(resource);\n\t\tthis._commentEditorModel = modelRef;\n\n\t\tthis._commentEditor.setModel(this._commentEditorModel.object.textEditorModel);\n\t\tthis._commentEditor.setValue(this.pendingEdit ?? this.commentBodyValue);\n\t\tthis.pendingEdit = undefined;\n\t\tthis._commentEditor.layout({ width: container.clientWidth - 14, height: this._editorHeight });\n\t\tthis._commentEditor.focus();\n\n\t\tdom.scheduleAtNextAnimationFrame(dom.getWindow(editContainer), () => {\n\t\t\tthis._commentEditor!.layout({ width: container.clientWidth - 14, height: this._editorHeight });\n\t\t\tthis._commentEditor!.focus();\n\t\t});\n\n\t\tconst lastLine = this._commentEditorModel.object.textEditorModel.getLineCount();\n\t\tconst lastColumn = this._commentEditorModel.object.textEditorModel.getLineLength(lastLine) + 1;\n\t\tthis._commentEditor.setSelection(new Selection(lastLine, lastColumn, lastLine, lastColumn));\n\n\t\tconst commentThread = this.commentThread;\n\t\tcommentThread.input = {\n\t\t\turi: this._commentEditor.getModel()!.uri,\n\t\t\tvalue: this.commentBodyValue\n\t\t};\n\t\tthis.commentService.setActiveEditingCommentThread(commentThread);\n\t\tthis.commentService.setActiveCommentAndThread(this.owner, { thread: commentThread, comment: this.comment });\n\n\t\tthis._commentEditorDisposables.push(this._commentEditor.onDidFocusEditorWidget(() => {\n\t\t\tcommentThread.input = {\n\t\t\t\turi: this._commentEditor!.getModel()!.uri,\n\t\t\t\tvalue: this.commentBodyValue\n\t\t\t};\n\t\t\tthis.commentService.setActiveEditingCommentThread(commentThread);\n\t\t\tthis.commentService.setActiveCommentAndThread(this.owner, { thread: commentThread, comment: this.comment });\n\t\t}));\n\n\t\tthis._commentEditorDisposables.push(this._commentEditor.onDidChangeModelContent(e => {\n\t\t\tif (commentThread.input && this._commentEditor && this._commentEditor.getModel()!.uri === commentThread.input.uri) {\n\t\t\t\tconst newVal = this._commentEditor.getValue();\n\t\t\t\tif (newVal !== commentThread.input.value) {\n\t\t\t\t\tconst input = commentThread.input;\n\t\t\t\t\tinput.value = newVal;\n\t\t\t\t\tcommentThread.input = input;\n\t\t\t\t\tthis.commentService.setActiveEditingCommentThread(commentThread);\n\t\t\t\t\tthis.commentService.setActiveCommentAndThread(this.owner, { thread: commentThread, comment: this.comment });\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tthis.calculateEditorHeight();\n\n\t\tthis._register((this._commentEditorModel.object.textEditorModel.onDidChangeContent(() => {\n\t\t\tif (this._commentEditor && this.calculateEditorHeight()) {\n\t\t\t\tthis._commentEditor.layout({ height: this._editorHeight, width: this._commentEditor.getLayoutInfo().width });\n\t\t\t\tthis._commentEditor.render(true);\n\t\t\t}\n\t\t})));\n\n\t\tthis._register(this._commentEditor);\n\t\tthis._register(this._commentEditorModel);\n\t}\n\n\tprivate calculateEditorHeight(): boolean {\n\t\tif (this._commentEditor) {\n\t\t\tconst newEditorHeight = calculateEditorHeight(this.parentEditor, this._commentEditor, this._editorHeight);\n\t\t\tif (newEditorHeight !== this._editorHeight) {\n\t\t\t\tthis._editorHeight = newEditorHeight;\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tgetPendingEdit(): string | undefined {\n\t\tconst model = this._commentEditor?.getModel();\n\t\tif (model && model.getValueLength() > 0) {\n\t\t\treturn model.getValue();\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate removeCommentEditor() {\n\t\tthis.isEditing = false;\n\t\tif (this._editAction) {\n\t\t\tthis._editAction.enabled = true;\n\t\t}\n\t\tthis._body.classList.remove('hidden');\n\n\t\tthis._commentEditorModel?.dispose();\n\n\t\tdispose(this._commentEditorDisposables);\n\t\tthis._commentEditorDisposables = [];\n\t\tthis._commentEditor?.dispose();\n\t\tthis._commentEditor = null;\n\n\t\tthis._commentEditContainer!.remove();\n\t}\n\n\tlayout(widthInPixel?: number) {\n\t\tconst editorWidth = widthInPixel !== undefined ? widthInPixel - 72 /* - margin and scrollbar*/ : (this._commentEditor?.getLayoutInfo().width ?? 0);\n\t\tthis._commentEditor?.layout({ width: editorWidth, height: this._editorHeight });\n\t\tconst scrollWidth = this._body.scrollWidth;\n\t\tconst width = dom.getContentWidth(this._body);\n\t\tconst scrollHeight = this._body.scrollHeight;\n\t\tconst height = dom.getContentHeight(this._body) + 4;\n\t\tthis._scrollableElement.setScrollDimensions({ width, scrollWidth, height, scrollHeight });\n\t}\n\n\tpublic async switchToEditMode() {\n\t\tif (this.isEditing) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.isEditing = true;\n\t\tthis._body.classList.add('hidden');\n\t\tthis._commentEditContainer = dom.append(this._commentDetailsContainer, dom.$('.edit-container'));\n\t\tawait this.createCommentEditor(this._commentEditContainer);\n\n\t\tconst formActions = dom.append(this._commentEditContainer, dom.$('.form-actions'));\n\t\tconst otherActions = dom.append(formActions, dom.$('.other-actions'));\n\t\tthis.createCommentWidgetFormActions(otherActions);\n\t\tconst editorActions = dom.append(formActions, dom.$('.editor-actions'));\n\t\tthis.createCommentWidgetEditorActions(editorActions);\n\n\t}\n\n\tprivate createCommentWidgetFormActions(container: HTMLElement) {\n\t\tconst menus = this.commentService.getCommentMenus(this.owner);\n\t\tconst menu = menus.getCommentActions(this.comment, this._contextKeyService);\n\n\t\tthis._register(menu);\n\t\tthis._register(menu.onDidChange(() => {\n\t\t\tthis._commentFormActions?.setActions(menu);\n\t\t}));\n\n\t\tthis._commentFormActions = new CommentFormActions(this.keybindingService, this._contextKeyService, container, (action: IAction): void => {\n\t\t\tconst text = this._commentEditor!.getValue();\n\n\t\t\taction.run({\n\t\t\t\tthread: this.commentThread,\n\t\t\t\tcommentUniqueId: this.comment.uniqueIdInThread,\n\t\t\t\ttext: text,\n\t\t\t\t$mid: MarshalledId.CommentThreadNode\n\t\t\t});\n\n\t\t\tthis.removeCommentEditor();\n\t\t});\n\n\t\tthis._register(this._commentFormActions);\n\t\tthis._commentFormActions.setActions(menu);\n\t}\n\n\tprivate createCommentWidgetEditorActions(container: HTMLElement) {\n\t\tconst menus = this.commentService.getCommentMenus(this.owner);\n\t\tconst menu = menus.getCommentEditorActions(this._contextKeyService);\n\n\t\tthis._register(menu);\n\t\tthis._register(menu.onDidChange(() => {\n\t\t\tthis._commentEditorActions?.setActions(menu);\n\t\t}));\n\n\t\tthis._commentEditorActions = new CommentFormActions(this.keybindingService, this._contextKeyService, container, (action: IAction): void => {\n\t\t\tconst text = this._commentEditor!.getValue();\n\n\t\t\taction.run({\n\t\t\t\tthread: this.commentThread,\n\t\t\t\tcommentUniqueId: this.comment.uniqueIdInThread,\n\t\t\t\ttext: text,\n\t\t\t\t$mid: MarshalledId.CommentThreadNode\n\t\t\t});\n\n\t\t\tthis._commentEditor?.focus();\n\t\t});\n\n\t\tthis._register(this._commentEditorActions);\n\t\tthis._commentEditorActions.setActions(menu, true);\n\t}\n\n\tsetFocus(focused: boolean, visible: boolean = false) {\n\t\tif (focused) {\n\t\t\tthis._domNode.focus();\n\t\t\tthis.toggleToolbarHidden(false);\n\t\t\tthis._actionsToolbarContainer.classList.add('tabfocused');\n\t\t\tthis._domNode.tabIndex = 0;\n\t\t\tif (this.comment.mode === languages.CommentMode.Editing) {\n\t\t\t\tthis._commentEditor?.focus();\n\t\t\t}\n\t\t} else {\n\t\t\tif (this._actionsToolbarContainer.classList.contains('tabfocused') && !this._actionsToolbarContainer.classList.contains('mouseover')) {\n\t\t\t\tthis.toggleToolbarHidden(true);\n\t\t\t\tthis._domNode.tabIndex = -1;\n\t\t\t}\n\t\t\tthis._actionsToolbarContainer.classList.remove('tabfocused');\n\t\t}\n\t}\n\n\tprivate registerActionBarListeners(actionsContainer: HTMLElement): void {\n\t\tthis._register(dom.addDisposableListener(this._domNode, 'mouseenter', () => {\n\t\t\tthis.toggleToolbarHidden(false);\n\t\t\tactionsContainer.classList.add('mouseover');\n\t\t}));\n\t\tthis._register(dom.addDisposableListener(this._domNode, 'mouseleave', () => {\n\t\t\tif (actionsContainer.classList.contains('mouseover') && !actionsContainer.classList.contains('tabfocused')) {\n\t\t\t\tthis.toggleToolbarHidden(true);\n\t\t\t}\n\t\t\tactionsContainer.classList.remove('mouseover');\n\t\t}));\n\t}\n\n\tasync update(newComment: languages.Comment) {\n\n\t\tif (newComment.body !== this.comment.body) {\n\t\t\tthis.updateCommentBody(newComment.body);\n\t\t}\n\n\t\tif (this.comment.userIconPath && newComment.userIconPath && (URI.from(this.comment.userIconPath).toString() !== URI.from(newComment.userIconPath).toString())) {\n\t\t\tthis.updateCommentUserIcon(newComment.userIconPath);\n\t\t}\n\n\t\tconst isChangingMode: boolean = newComment.mode !== undefined && newComment.mode !== this.comment.mode;\n\n\t\tthis.comment = newComment;\n\n\t\tif (isChangingMode) {\n\t\t\tif (newComment.mode === languages.CommentMode.Editing) {\n\t\t\t\tawait this.switchToEditMode();\n\t\t\t} else {\n\t\t\t\tthis.removeCommentEditor();\n\t\t\t}\n\t\t}\n\n\t\tif (newComment.label) {\n\t\t\tthis._isPendingLabel.innerText = newComment.label;\n\t\t} else {\n\t\t\tthis._isPendingLabel.innerText = '';\n\t\t}\n\n\t\t// update comment reactions\n\t\tthis._reactionActionsContainer?.remove();\n\n\t\tthis._reactionsActionBar?.clear();\n\n\t\tif (this.comment.commentReactions && this.comment.commentReactions.some(reaction => !!reaction.count)) {\n\t\t\tthis.createReactionsContainer(this._commentDetailsContainer);\n\t\t}\n\n\t\tif (this.comment.contextValue) {\n\t\t\tthis._commentContextValue.set(this.comment.contextValue);\n\t\t} else {\n\t\t\tthis._commentContextValue.reset();\n\t\t}\n\n\t\tif (this.comment.timestamp) {\n\t\t\tthis.updateTimestamp(this.comment.timestamp);\n\t\t}\n\t}\n\n\n\tprivate onContextMenu(e: MouseEvent) {\n\t\tconst event = new StandardMouseEvent(dom.getWindow(this._domNode), e);\n\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tgetAnchor: () => event,\n\t\t\tmenuId: MenuId.CommentThreadCommentContext,\n\t\t\tmenuActionOptions: { shouldForwardArgs: true },\n\t\t\tcontextKeyService: this._contextKeyService,\n\t\t\tactionRunner: new CommentsActionRunner(),\n\t\t\tgetActionsContext: () => {\n\t\t\t\treturn this.commentNodeContext;\n\t\t\t},\n\t\t});\n\t}\n\n\tfocus() {\n\t\tthis.domNode.focus();\n\t\tif (!this._clearTimeout) {\n\t\t\tthis.domNode.classList.add('focus');\n\t\t\tthis._clearTimeout = setTimeout(() => {\n\t\t\t\tthis.domNode.classList.remove('focus');\n\t\t\t}, 3000);\n\t\t}\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tdispose(this._commentEditorDisposables);\n\t}\n}\n\nfunction fillInActions(groups: [string, Array<MenuItemAction | SubmenuItemAction>][], target: IAction[] | { primary: IAction[]; secondary: IAction[] }, useAlternativeActions: boolean, isPrimaryGroup: (group: string) => boolean = group => group === 'navigation'): void {\n\tfor (const tuple of groups) {\n\t\tlet [group, actions] = tuple;\n\t\tif (useAlternativeActions) {\n\t\t\tactions = actions.map(a => (a instanceof MenuItemAction) && !!a.alt ? a.alt : a);\n\t\t}\n\n\t\tif (isPrimaryGroup(group)) {\n\t\t\tconst to = Array.isArray(target) ? target : target.primary;\n\n\t\t\tto.unshift(...actions);\n\t\t} else {\n\t\t\tconst to = Array.isArray(target) ? target : target.secondary;\n\n\t\t\tif (to.length > 0) {\n\t\t\t\tto.push(new Separator());\n\t\t\t}\n\n\t\t\tto.push(...actions);\n\t\t}\n\t}\n}\n"],
  "mappings": "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",
  "names": ["action", "options", "primary", "secondary"]
}
