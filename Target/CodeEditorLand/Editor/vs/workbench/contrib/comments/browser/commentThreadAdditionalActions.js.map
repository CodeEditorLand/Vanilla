{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/comments/browser/commentThreadAdditionalActions.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from \"../../../../base/browser/dom.js\";\n\nimport type { IAction } from \"../../../../base/common/actions.js\";\nimport { Disposable } from \"../../../../base/common/lifecycle.js\";\nimport { MarshalledId } from \"../../../../base/common/marshallingIds.js\";\nimport type { IRange } from \"../../../../editor/common/core/range.js\";\nimport type * as languages from \"../../../../editor/common/languages.js\";\nimport type {\n\tIMenu,\n\tSubmenuItemAction,\n} from \"../../../../platform/actions/common/actions.js\";\nimport type { IContextKeyService } from \"../../../../platform/contextkey/common/contextkey.js\";\nimport { IKeybindingService } from \"../../../../platform/keybinding/common/keybinding.js\";\nimport type { ICellRange } from \"../../notebook/common/notebookRange.js\";\nimport { CommentFormActions } from \"./commentFormActions.js\";\nimport type { CommentMenus } from \"./commentMenus.js\";\n\nexport class CommentThreadAdditionalActions<\n\tT extends IRange | ICellRange,\n> extends Disposable {\n\tprivate _container: HTMLElement | null;\n\tprivate _buttonBar: HTMLElement | null;\n\tprivate _commentFormActions!: CommentFormActions;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tprivate _commentThread: languages.CommentThread<T>,\n\t\tprivate _contextKeyService: IContextKeyService,\n\t\tprivate _commentMenus: CommentMenus,\n\t\tprivate _actionRunDelegate: (() => void) | null,\n\t\t@IKeybindingService private _keybindingService: IKeybindingService,\n\t) {\n\t\tsuper();\n\n\t\tthis._container = dom.append(\n\t\t\tcontainer,\n\t\t\tdom.$(\".comment-additional-actions\"),\n\t\t);\n\t\tdom.append(this._container, dom.$(\".section-separator\"));\n\n\t\tthis._buttonBar = dom.append(this._container, dom.$(\".button-bar\"));\n\t\tthis._createAdditionalActions(this._buttonBar);\n\t}\n\n\tprivate _showMenu() {\n\t\tthis._container?.classList.remove(\"hidden\");\n\t}\n\n\tprivate _hideMenu() {\n\t\tthis._container?.classList.add(\"hidden\");\n\t}\n\n\tprivate _enableDisableMenu(menu: IMenu) {\n\t\tconst groups = menu.getActions({ shouldForwardArgs: true });\n\n\t\t// Show the menu if at least one action is enabled.\n\t\tfor (const group of groups) {\n\t\t\tconst [, actions] = group;\n\t\t\tfor (const action of actions) {\n\t\t\t\tif (action.enabled) {\n\t\t\t\t\tthis._showMenu();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tfor (const subAction of (action as SubmenuItemAction).actions ??\n\t\t\t\t\t[]) {\n\t\t\t\t\tif (subAction.enabled) {\n\t\t\t\t\t\tthis._showMenu();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._hideMenu();\n\t}\n\n\tprivate _createAdditionalActions(container: HTMLElement) {\n\t\tconst menu = this._commentMenus.getCommentThreadAdditionalActions(\n\t\t\tthis._contextKeyService,\n\t\t);\n\t\tthis._register(menu);\n\t\tthis._register(\n\t\t\tmenu.onDidChange(() => {\n\t\t\t\tthis._commentFormActions.setActions(\n\t\t\t\t\tmenu,\n\t\t\t\t\t/*hasOnlySecondaryActions*/ true,\n\t\t\t\t);\n\t\t\t\tthis._enableDisableMenu(menu);\n\t\t\t}),\n\t\t);\n\n\t\tthis._commentFormActions = new CommentFormActions(\n\t\t\tthis._keybindingService,\n\t\t\tthis._contextKeyService,\n\t\t\tcontainer,\n\t\t\tasync (action: IAction) => {\n\t\t\t\tthis._actionRunDelegate?.();\n\n\t\t\t\taction.run({\n\t\t\t\t\tthread: this._commentThread,\n\t\t\t\t\t$mid: MarshalledId.CommentThreadInstance,\n\t\t\t\t});\n\t\t\t},\n\t\t\t4,\n\t\t);\n\n\t\tthis._register(this._commentFormActions);\n\t\tthis._commentFormActions.setActions(\n\t\t\tmenu,\n\t\t\t/*hasOnlySecondaryActions*/ true,\n\t\t);\n\t\tthis._enableDisableMenu(menu);\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;AAKA,YAAY,SAAS;AAGrB,SAAS,kBAAkB;AAC3B,SAAS,oBAAoB;AAQ7B,SAAS,0BAA0B;AAEnC,SAAS,0BAA0B;AAG5B,IAAM,iCAAN,cAEG,WAAW;AAAA,EAKpB,YACC,WACQ,gBACA,oBACA,eACA,oBACoB,oBAC3B;AACD,UAAM;AANE;AACA;AACA;AACA;AACoB;AAI5B,SAAK,aAAa,IAAI;AAAA,MACrB;AAAA,MACA,IAAI,EAAE,6BAA6B;AAAA,IACpC;AACA,QAAI,OAAO,KAAK,YAAY,IAAI,EAAE,oBAAoB,CAAC;AAEvD,SAAK,aAAa,IAAI,OAAO,KAAK,YAAY,IAAI,EAAE,aAAa,CAAC;AAClE,SAAK,yBAAyB,KAAK,UAAU;AAAA,EAC9C;AAAA,EA/CD,OAwBqB;AAAA;AAAA;AAAA,EACZ;AAAA,EACA;AAAA,EACA;AAAA,EAsBA,YAAY;AACnB,SAAK,YAAY,UAAU,OAAO,QAAQ;AAAA,EAC3C;AAAA,EAEQ,YAAY;AACnB,SAAK,YAAY,UAAU,IAAI,QAAQ;AAAA,EACxC;AAAA,EAEQ,mBAAmB,MAAa;AACvC,UAAM,SAAS,KAAK,WAAW,EAAE,mBAAmB,KAAK,CAAC;AAG1D,eAAW,SAAS,QAAQ;AAC3B,YAAM,CAAC,EAAE,OAAO,IAAI;AACpB,iBAAW,UAAU,SAAS;AAC7B,YAAI,OAAO,SAAS;AACnB,eAAK,UAAU;AACf;AAAA,QACD;AAEA,mBAAW,aAAc,OAA6B,WACrD,CAAC,GAAG;AACJ,cAAI,UAAU,SAAS;AACtB,iBAAK,UAAU;AACf;AAAA,UACD;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAEA,SAAK,UAAU;AAAA,EAChB;AAAA,EAEQ,yBAAyB,WAAwB;AACxD,UAAM,OAAO,KAAK,cAAc;AAAA,MAC/B,KAAK;AAAA,IACN;AACA,SAAK,UAAU,IAAI;AACnB,SAAK;AAAA,MACJ,KAAK,YAAY,MAAM;AACtB,aAAK,oBAAoB;AAAA,UACxB;AAAA;AAAA,UAC4B;AAAA,QAC7B;AACA,aAAK,mBAAmB,IAAI;AAAA,MAC7B,CAAC;AAAA,IACF;AAEA,SAAK,sBAAsB,IAAI;AAAA,MAC9B,KAAK;AAAA,MACL,KAAK;AAAA,MACL;AAAA,MACA,OAAO,WAAoB;AAC1B,aAAK,qBAAqB;AAE1B,eAAO,IAAI;AAAA,UACV,QAAQ,KAAK;AAAA,UACb,MAAM,aAAa;AAAA,QACpB,CAAC;AAAA,MACF;AAAA,MACA;AAAA,IACD;AAEA,SAAK,UAAU,KAAK,mBAAmB;AACvC,SAAK,oBAAoB;AAAA,MACxB;AAAA;AAAA,MAC4B;AAAA,IAC7B;AACA,SAAK,mBAAmB,IAAI;AAAA,EAC7B;AACD;AAjGa,iCAAN;AAAA,EAaJ;AAAA,GAbU;",
  "names": []
}
