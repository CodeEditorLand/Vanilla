{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/bulkEdit/browser/preview/bulkEditTree.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IAsyncDataSource, ITreeRenderer, ITreeNode, ITreeSorter } from '../../../../../base/browser/ui/tree/tree.js';\nimport { ITextModelService } from '../../../../../editor/common/services/resolverService.js';\nimport { FuzzyScore, createMatches } from '../../../../../base/common/filters.js';\nimport { IResourceLabel, ResourceLabels } from '../../../../browser/labels.js';\nimport { HighlightedLabel, IHighlight } from '../../../../../base/browser/ui/highlightedlabel/highlightedLabel.js';\nimport { IIdentityProvider, IListVirtualDelegate, IKeyboardNavigationLabelProvider } from '../../../../../base/browser/ui/list/list.js';\nimport { Range } from '../../../../../editor/common/core/range.js';\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { ITextModel } from '../../../../../editor/common/model.js';\nimport { IDisposable, DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { TextModel } from '../../../../../editor/common/model/textModel.js';\nimport { BulkFileOperations, BulkFileOperation, BulkFileOperationType, BulkTextEdit, BulkCategory } from './bulkEditPreview.js';\nimport { FileKind } from '../../../../../platform/files/common/files.js';\nimport { localize } from '../../../../../nls.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport type { IListAccessibilityProvider } from '../../../../../base/browser/ui/list/listWidget.js';\nimport { IconLabel } from '../../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { basename } from '../../../../../base/common/resources.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { compare } from '../../../../../base/common/strings.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { ResourceFileEdit } from '../../../../../editor/browser/services/bulkEditService.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../../editor/common/languages/modesRegistry.js';\nimport { SnippetParser } from '../../../../../editor/contrib/snippet/browser/snippetParser.js';\nimport { AriaRole } from '../../../../../base/browser/ui/aria/aria.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\n\n// --- VIEW MODEL\n\nexport interface ICheckable {\n\tisChecked(): boolean;\n\tsetChecked(value: boolean): void;\n}\n\nexport class CategoryElement implements ICheckable {\n\n\tconstructor(\n\t\treadonly parent: BulkFileOperations,\n\t\treadonly category: BulkCategory\n\t) { }\n\n\tisChecked(): boolean {\n\t\tconst model = this.parent;\n\t\tlet checked = true;\n\t\tfor (const file of this.category.fileOperations) {\n\t\t\tfor (const edit of file.originalEdits.values()) {\n\t\t\t\tchecked = checked && model.checked.isChecked(edit);\n\t\t\t}\n\t\t}\n\t\treturn checked;\n\t}\n\n\tsetChecked(value: boolean): void {\n\t\tconst model = this.parent;\n\t\tfor (const file of this.category.fileOperations) {\n\t\t\tfor (const edit of file.originalEdits.values()) {\n\t\t\t\tmodel.checked.updateChecked(edit, value);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class FileElement implements ICheckable {\n\n\tconstructor(\n\t\treadonly parent: CategoryElement | BulkFileOperations,\n\t\treadonly edit: BulkFileOperation\n\t) { }\n\n\tisChecked(): boolean {\n\t\tconst model = this.parent instanceof CategoryElement ? this.parent.parent : this.parent;\n\n\t\tlet checked = true;\n\n\t\t// only text edit children -> reflect children state\n\t\tif (this.edit.type === BulkFileOperationType.TextEdit) {\n\t\t\tchecked = !this.edit.textEdits.every(edit => !model.checked.isChecked(edit.textEdit));\n\t\t}\n\n\t\t// multiple file edits -> reflect single state\n\t\tfor (const edit of this.edit.originalEdits.values()) {\n\t\t\tif (edit instanceof ResourceFileEdit) {\n\t\t\t\tchecked = checked && model.checked.isChecked(edit);\n\t\t\t}\n\t\t}\n\n\t\t// multiple categories and text change -> read all elements\n\t\tif (this.parent instanceof CategoryElement && this.edit.type === BulkFileOperationType.TextEdit) {\n\t\t\tfor (const category of model.categories) {\n\t\t\t\tfor (const file of category.fileOperations) {\n\t\t\t\t\tif (file.uri.toString() === this.edit.uri.toString()) {\n\t\t\t\t\t\tfor (const edit of file.originalEdits.values()) {\n\t\t\t\t\t\t\tif (edit instanceof ResourceFileEdit) {\n\t\t\t\t\t\t\t\tchecked = checked && model.checked.isChecked(edit);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn checked;\n\t}\n\n\tsetChecked(value: boolean): void {\n\t\tconst model = this.parent instanceof CategoryElement ? this.parent.parent : this.parent;\n\t\tfor (const edit of this.edit.originalEdits.values()) {\n\t\t\tmodel.checked.updateChecked(edit, value);\n\t\t}\n\n\t\t// multiple categories and file change -> update all elements\n\t\tif (this.parent instanceof CategoryElement && this.edit.type !== BulkFileOperationType.TextEdit) {\n\t\t\tfor (const category of model.categories) {\n\t\t\t\tfor (const file of category.fileOperations) {\n\t\t\t\t\tif (file.uri.toString() === this.edit.uri.toString()) {\n\t\t\t\t\t\tfor (const edit of file.originalEdits.values()) {\n\t\t\t\t\t\t\tmodel.checked.updateChecked(edit, value);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tisDisabled(): boolean {\n\t\tif (this.parent instanceof CategoryElement && this.edit.type === BulkFileOperationType.TextEdit) {\n\t\t\tconst model = this.parent.parent;\n\t\t\tlet checked = true;\n\t\t\tfor (const category of model.categories) {\n\t\t\t\tfor (const file of category.fileOperations) {\n\t\t\t\t\tif (file.uri.toString() === this.edit.uri.toString()) {\n\t\t\t\t\t\tfor (const edit of file.originalEdits.values()) {\n\t\t\t\t\t\t\tif (edit instanceof ResourceFileEdit) {\n\t\t\t\t\t\t\t\tchecked = checked && model.checked.isChecked(edit);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !checked;\n\t\t}\n\t\treturn false;\n\t}\n}\n\nexport class TextEditElement implements ICheckable {\n\n\tconstructor(\n\t\treadonly parent: FileElement,\n\t\treadonly idx: number,\n\t\treadonly edit: BulkTextEdit,\n\t\treadonly prefix: string, readonly selecting: string, readonly inserting: string, readonly suffix: string\n\t) { }\n\n\tisChecked(): boolean {\n\t\tlet model = this.parent.parent;\n\t\tif (model instanceof CategoryElement) {\n\t\t\tmodel = model.parent;\n\t\t}\n\t\treturn model.checked.isChecked(this.edit.textEdit);\n\t}\n\n\tsetChecked(value: boolean): void {\n\t\tlet model = this.parent.parent;\n\t\tif (model instanceof CategoryElement) {\n\t\t\tmodel = model.parent;\n\t\t}\n\n\t\t// check/uncheck this element\n\t\tmodel.checked.updateChecked(this.edit.textEdit, value);\n\n\t\t// make sure parent is checked when this element is checked...\n\t\tif (value) {\n\t\t\tfor (const edit of this.parent.edit.originalEdits.values()) {\n\t\t\t\tif (edit instanceof ResourceFileEdit) {\n\t\t\t\t\t(<BulkFileOperations>model).checked.updateChecked(edit, value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tisDisabled(): boolean {\n\t\treturn this.parent.isDisabled();\n\t}\n}\n\nexport type BulkEditElement = CategoryElement | FileElement | TextEditElement;\n\n// --- DATA SOURCE\n\nexport class BulkEditDataSource implements IAsyncDataSource<BulkFileOperations, BulkEditElement> {\n\n\tpublic groupByFile: boolean = true;\n\n\tconstructor(\n\t\t@ITextModelService private readonly _textModelService: ITextModelService,\n\t\t@IInstantiationService private readonly _instantiationService: IInstantiationService,\n\t) { }\n\n\thasChildren(element: BulkFileOperations | BulkEditElement): boolean {\n\t\tif (element instanceof FileElement) {\n\t\t\treturn element.edit.textEdits.length > 0;\n\t\t}\n\t\tif (element instanceof TextEditElement) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tasync getChildren(element: BulkFileOperations | BulkEditElement): Promise<BulkEditElement[]> {\n\n\t\t// root -> file/text edits\n\t\tif (element instanceof BulkFileOperations) {\n\t\t\treturn this.groupByFile\n\t\t\t\t? element.fileOperations.map(op => new FileElement(element, op))\n\t\t\t\t: element.categories.map(cat => new CategoryElement(element, cat));\n\t\t}\n\n\t\t// category\n\t\tif (element instanceof CategoryElement) {\n\t\t\treturn Array.from(element.category.fileOperations, op => new FileElement(element, op));\n\t\t}\n\n\t\t// file: text edit\n\t\tif (element instanceof FileElement && element.edit.textEdits.length > 0) {\n\t\t\t// const previewUri = BulkEditPreviewProvider.asPreviewUri(element.edit.resource);\n\t\t\tlet textModel: ITextModel;\n\t\t\tlet textModelDisposable: IDisposable;\n\t\t\ttry {\n\t\t\t\tconst ref = await this._textModelService.createModelReference(element.edit.uri);\n\t\t\t\ttextModel = ref.object.textEditorModel;\n\t\t\t\ttextModelDisposable = ref;\n\t\t\t} catch {\n\t\t\t\ttextModel = this._instantiationService.createInstance(TextModel, '', PLAINTEXT_LANGUAGE_ID, TextModel.DEFAULT_CREATION_OPTIONS, null);\n\t\t\t\ttextModelDisposable = textModel;\n\t\t\t}\n\n\t\t\tconst result = element.edit.textEdits.map((edit, idx) => {\n\t\t\t\tconst range = textModel.validateRange(edit.textEdit.textEdit.range);\n\n\t\t\t\t//prefix-math\n\t\t\t\tconst startTokens = textModel.tokenization.getLineTokens(range.startLineNumber);\n\t\t\t\tlet prefixLen = 23; // default value for the no tokens/grammar case\n\t\t\t\tfor (let idx = startTokens.findTokenIndexAtOffset(range.startColumn - 1) - 1; prefixLen < 50 && idx >= 0; idx--) {\n\t\t\t\t\tprefixLen = range.startColumn - startTokens.getStartOffset(idx);\n\t\t\t\t}\n\n\t\t\t\t//suffix-math\n\t\t\t\tconst endTokens = textModel.tokenization.getLineTokens(range.endLineNumber);\n\t\t\t\tlet suffixLen = 0;\n\t\t\t\tfor (let idx = endTokens.findTokenIndexAtOffset(range.endColumn - 1); suffixLen < 50 && idx < endTokens.getCount(); idx++) {\n\t\t\t\t\tsuffixLen += endTokens.getEndOffset(idx) - endTokens.getStartOffset(idx);\n\t\t\t\t}\n\n\t\t\t\treturn new TextEditElement(\n\t\t\t\t\telement,\n\t\t\t\t\tidx,\n\t\t\t\t\tedit,\n\t\t\t\t\ttextModel.getValueInRange(new Range(range.startLineNumber, range.startColumn - prefixLen, range.startLineNumber, range.startColumn)),\n\t\t\t\t\ttextModel.getValueInRange(range),\n\t\t\t\t\t!edit.textEdit.textEdit.insertAsSnippet ? edit.textEdit.textEdit.text : SnippetParser.asInsertText(edit.textEdit.textEdit.text),\n\t\t\t\t\ttextModel.getValueInRange(new Range(range.endLineNumber, range.endColumn, range.endLineNumber, range.endColumn + suffixLen))\n\t\t\t\t);\n\t\t\t});\n\n\t\t\ttextModelDisposable.dispose();\n\t\t\treturn result;\n\t\t}\n\n\t\treturn [];\n\t}\n}\n\n\nexport class BulkEditSorter implements ITreeSorter<BulkEditElement> {\n\n\tcompare(a: BulkEditElement, b: BulkEditElement): number {\n\t\tif (a instanceof FileElement && b instanceof FileElement) {\n\t\t\treturn compareBulkFileOperations(a.edit, b.edit);\n\t\t}\n\n\t\tif (a instanceof TextEditElement && b instanceof TextEditElement) {\n\t\t\treturn Range.compareRangesUsingStarts(a.edit.textEdit.textEdit.range, b.edit.textEdit.textEdit.range);\n\t\t}\n\n\t\treturn 0;\n\t}\n}\n\nexport function compareBulkFileOperations(a: BulkFileOperation, b: BulkFileOperation): number {\n\treturn compare(a.uri.toString(), b.uri.toString());\n}\n\n// --- ACCESSI\n\nexport class BulkEditAccessibilityProvider implements IListAccessibilityProvider<BulkEditElement> {\n\n\tconstructor(@ILabelService private readonly _labelService: ILabelService) { }\n\n\tgetWidgetAriaLabel(): string {\n\t\treturn localize('bulkEdit', \"Bulk Edit\");\n\t}\n\n\tgetRole(_element: BulkEditElement): AriaRole {\n\t\treturn 'checkbox';\n\t}\n\n\tgetAriaLabel(element: BulkEditElement): string | null {\n\t\tif (element instanceof FileElement) {\n\t\t\tif (element.edit.textEdits.length > 0) {\n\t\t\t\tif (element.edit.type & BulkFileOperationType.Rename && element.edit.newUri) {\n\t\t\t\t\treturn localize(\n\t\t\t\t\t\t'aria.renameAndEdit', \"Renaming {0} to {1}, also making text edits\",\n\t\t\t\t\t\tthis._labelService.getUriLabel(element.edit.uri, { relative: true }), this._labelService.getUriLabel(element.edit.newUri, { relative: true })\n\t\t\t\t\t);\n\n\t\t\t\t} else if (element.edit.type & BulkFileOperationType.Create) {\n\t\t\t\t\treturn localize(\n\t\t\t\t\t\t'aria.createAndEdit', \"Creating {0}, also making text edits\",\n\t\t\t\t\t\tthis._labelService.getUriLabel(element.edit.uri, { relative: true })\n\t\t\t\t\t);\n\n\t\t\t\t} else if (element.edit.type & BulkFileOperationType.Delete) {\n\t\t\t\t\treturn localize(\n\t\t\t\t\t\t'aria.deleteAndEdit', \"Deleting {0}, also making text edits\",\n\t\t\t\t\t\tthis._labelService.getUriLabel(element.edit.uri, { relative: true }),\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\treturn localize(\n\t\t\t\t\t\t'aria.editOnly', \"{0}, making text edits\",\n\t\t\t\t\t\tthis._labelService.getUriLabel(element.edit.uri, { relative: true }),\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t} else {\n\t\t\t\tif (element.edit.type & BulkFileOperationType.Rename && element.edit.newUri) {\n\t\t\t\t\treturn localize(\n\t\t\t\t\t\t'aria.rename', \"Renaming {0} to {1}\",\n\t\t\t\t\t\tthis._labelService.getUriLabel(element.edit.uri, { relative: true }), this._labelService.getUriLabel(element.edit.newUri, { relative: true })\n\t\t\t\t\t);\n\n\t\t\t\t} else if (element.edit.type & BulkFileOperationType.Create) {\n\t\t\t\t\treturn localize(\n\t\t\t\t\t\t'aria.create', \"Creating {0}\",\n\t\t\t\t\t\tthis._labelService.getUriLabel(element.edit.uri, { relative: true })\n\t\t\t\t\t);\n\n\t\t\t\t} else if (element.edit.type & BulkFileOperationType.Delete) {\n\t\t\t\t\treturn localize(\n\t\t\t\t\t\t'aria.delete', \"Deleting {0}\",\n\t\t\t\t\t\tthis._labelService.getUriLabel(element.edit.uri, { relative: true }),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (element instanceof TextEditElement) {\n\t\t\tif (element.selecting.length > 0 && element.inserting.length > 0) {\n\t\t\t\t// edit: replace\n\t\t\t\treturn localize('aria.replace', \"line {0}, replacing {1} with {2}\", element.edit.textEdit.textEdit.range.startLineNumber, element.selecting, element.inserting);\n\t\t\t} else if (element.selecting.length > 0 && element.inserting.length === 0) {\n\t\t\t\t// edit: delete\n\t\t\t\treturn localize('aria.del', \"line {0}, removing {1}\", element.edit.textEdit.textEdit.range.startLineNumber, element.selecting);\n\t\t\t} else if (element.selecting.length === 0 && element.inserting.length > 0) {\n\t\t\t\t// edit: insert\n\t\t\t\treturn localize('aria.insert', \"line {0}, inserting {1}\", element.edit.textEdit.textEdit.range.startLineNumber, element.selecting);\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}\n\n// --- IDENT\n\nexport class BulkEditIdentityProvider implements IIdentityProvider<BulkEditElement> {\n\n\tgetId(element: BulkEditElement): { toString(): string } {\n\t\tif (element instanceof FileElement) {\n\t\t\treturn element.edit.uri + (element.parent instanceof CategoryElement ? JSON.stringify(element.parent.category.metadata) : '');\n\t\t} else if (element instanceof TextEditElement) {\n\t\t\treturn element.parent.edit.uri.toString() + element.idx;\n\t\t} else {\n\t\t\treturn JSON.stringify(element.category.metadata);\n\t\t}\n\t}\n}\n\n// --- RENDERER\n\nclass CategoryElementTemplate {\n\n\treadonly icon: HTMLDivElement;\n\treadonly label: IconLabel;\n\n\tconstructor(container: HTMLElement) {\n\t\tcontainer.classList.add('category');\n\t\tthis.icon = document.createElement('div');\n\t\tcontainer.appendChild(this.icon);\n\t\tthis.label = new IconLabel(container);\n\t}\n}\n\nexport class CategoryElementRenderer implements ITreeRenderer<CategoryElement, FuzzyScore, CategoryElementTemplate> {\n\n\tstatic readonly id: string = 'CategoryElementRenderer';\n\n\treadonly templateId: string = CategoryElementRenderer.id;\n\n\tconstructor(@IThemeService private readonly _themeService: IThemeService) { }\n\n\trenderTemplate(container: HTMLElement): CategoryElementTemplate {\n\t\treturn new CategoryElementTemplate(container);\n\t}\n\n\trenderElement(node: ITreeNode<CategoryElement, FuzzyScore>, _index: number, template: CategoryElementTemplate): void {\n\n\t\ttemplate.icon.style.setProperty('--background-dark', null);\n\t\ttemplate.icon.style.setProperty('--background-light', null);\n\t\ttemplate.icon.style.color = '';\n\n\t\tconst { metadata } = node.element.category;\n\t\tif (ThemeIcon.isThemeIcon(metadata.iconPath)) {\n\t\t\t// css\n\t\t\tconst className = ThemeIcon.asClassName(metadata.iconPath);\n\t\t\ttemplate.icon.className = className ? `theme-icon ${className}` : '';\n\t\t\ttemplate.icon.style.color = metadata.iconPath.color ? this._themeService.getColorTheme().getColor(metadata.iconPath.color.id)?.toString() ?? '' : '';\n\n\n\t\t} else if (URI.isUri(metadata.iconPath)) {\n\t\t\t// background-image\n\t\t\ttemplate.icon.className = 'uri-icon';\n\t\t\ttemplate.icon.style.setProperty('--background-dark', dom.asCSSUrl(metadata.iconPath));\n\t\t\ttemplate.icon.style.setProperty('--background-light', dom.asCSSUrl(metadata.iconPath));\n\n\t\t} else if (metadata.iconPath) {\n\t\t\t// background-image\n\t\t\ttemplate.icon.className = 'uri-icon';\n\t\t\ttemplate.icon.style.setProperty('--background-dark', dom.asCSSUrl(metadata.iconPath.dark));\n\t\t\ttemplate.icon.style.setProperty('--background-light', dom.asCSSUrl(metadata.iconPath.light));\n\t\t}\n\n\t\ttemplate.label.setLabel(metadata.label, metadata.description, {\n\t\t\tdescriptionMatches: createMatches(node.filterData),\n\t\t});\n\t}\n\n\tdisposeTemplate(template: CategoryElementTemplate): void {\n\t\ttemplate.label.dispose();\n\t}\n}\n\nclass FileElementTemplate {\n\n\tprivate readonly _disposables = new DisposableStore();\n\tprivate readonly _localDisposables = new DisposableStore();\n\n\tprivate readonly _checkbox: HTMLInputElement;\n\tprivate readonly _label: IResourceLabel;\n\tprivate readonly _details: HTMLSpanElement;\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tresourceLabels: ResourceLabels,\n\t\t@ILabelService private readonly _labelService: ILabelService,\n\t) {\n\n\t\tthis._checkbox = document.createElement('input');\n\t\tthis._checkbox.className = 'edit-checkbox';\n\t\tthis._checkbox.type = 'checkbox';\n\t\tthis._checkbox.setAttribute('role', 'checkbox');\n\t\tcontainer.appendChild(this._checkbox);\n\n\t\tthis._label = resourceLabels.create(container, { supportHighlights: true });\n\n\t\tthis._details = document.createElement('span');\n\t\tthis._details.className = 'details';\n\t\tcontainer.appendChild(this._details);\n\t}\n\n\tdispose(): void {\n\t\tthis._localDisposables.dispose();\n\t\tthis._disposables.dispose();\n\t\tthis._label.dispose();\n\t}\n\n\tset(element: FileElement, score: FuzzyScore | undefined) {\n\t\tthis._localDisposables.clear();\n\n\t\tthis._checkbox.checked = element.isChecked();\n\t\tthis._checkbox.disabled = element.isDisabled();\n\t\tthis._localDisposables.add(dom.addDisposableListener(this._checkbox, 'change', () => {\n\t\t\telement.setChecked(this._checkbox.checked);\n\t\t}));\n\n\t\tif (element.edit.type & BulkFileOperationType.Rename && element.edit.newUri) {\n\t\t\t// rename: oldName \u2192 newName\n\t\t\tthis._label.setResource({\n\t\t\t\tresource: element.edit.uri,\n\t\t\t\tname: localize('rename.label', \"{0} \u2192 {1}\", this._labelService.getUriLabel(element.edit.uri, { relative: true }), this._labelService.getUriLabel(element.edit.newUri, { relative: true })),\n\t\t\t}, {\n\t\t\t\tfileDecorations: { colors: true, badges: false }\n\t\t\t});\n\n\t\t\tthis._details.innerText = localize('detail.rename', \"(renaming)\");\n\n\t\t} else {\n\t\t\t// create, delete, edit: NAME\n\t\t\tconst options = {\n\t\t\t\tmatches: createMatches(score),\n\t\t\t\tfileKind: FileKind.FILE,\n\t\t\t\tfileDecorations: { colors: true, badges: false },\n\t\t\t\textraClasses: <string[]>[]\n\t\t\t};\n\t\t\tif (element.edit.type & BulkFileOperationType.Create) {\n\t\t\t\tthis._details.innerText = localize('detail.create', \"(creating)\");\n\t\t\t} else if (element.edit.type & BulkFileOperationType.Delete) {\n\t\t\t\tthis._details.innerText = localize('detail.del', \"(deleting)\");\n\t\t\t\toptions.extraClasses.push('delete');\n\t\t\t} else {\n\t\t\t\tthis._details.innerText = '';\n\t\t\t}\n\t\t\tthis._label.setFile(element.edit.uri, options);\n\t\t}\n\t}\n}\n\nexport class FileElementRenderer implements ITreeRenderer<FileElement, FuzzyScore, FileElementTemplate> {\n\n\tstatic readonly id: string = 'FileElementRenderer';\n\n\treadonly templateId: string = FileElementRenderer.id;\n\n\tconstructor(\n\t\tprivate readonly _resourceLabels: ResourceLabels,\n\t\t@ILabelService private readonly _labelService: ILabelService,\n\t) { }\n\n\trenderTemplate(container: HTMLElement): FileElementTemplate {\n\t\treturn new FileElementTemplate(container, this._resourceLabels, this._labelService);\n\t}\n\n\trenderElement(node: ITreeNode<FileElement, FuzzyScore>, _index: number, template: FileElementTemplate): void {\n\t\ttemplate.set(node.element, node.filterData);\n\t}\n\n\tdisposeTemplate(template: FileElementTemplate): void {\n\t\ttemplate.dispose();\n\t}\n}\n\nclass TextEditElementTemplate {\n\n\tprivate readonly _disposables = new DisposableStore();\n\tprivate readonly _localDisposables = new DisposableStore();\n\n\tprivate readonly _checkbox: HTMLInputElement;\n\tprivate readonly _icon: HTMLDivElement;\n\tprivate readonly _label: HighlightedLabel;\n\n\tconstructor(container: HTMLElement, @IThemeService private readonly _themeService: IThemeService) {\n\t\tcontainer.classList.add('textedit');\n\n\t\tthis._checkbox = document.createElement('input');\n\t\tthis._checkbox.className = 'edit-checkbox';\n\t\tthis._checkbox.type = 'checkbox';\n\t\tthis._checkbox.setAttribute('role', 'checkbox');\n\t\tcontainer.appendChild(this._checkbox);\n\n\t\tthis._icon = document.createElement('div');\n\t\tcontainer.appendChild(this._icon);\n\n\t\tthis._label = this._disposables.add(new HighlightedLabel(container));\n\t}\n\n\tdispose(): void {\n\t\tthis._localDisposables.dispose();\n\t\tthis._disposables.dispose();\n\t}\n\n\tset(element: TextEditElement) {\n\t\tthis._localDisposables.clear();\n\n\t\tthis._localDisposables.add(dom.addDisposableListener(this._checkbox, 'change', e => {\n\t\t\telement.setChecked(this._checkbox.checked);\n\t\t\te.preventDefault();\n\t\t}));\n\t\tif (element.parent.isChecked()) {\n\t\t\tthis._checkbox.checked = element.isChecked();\n\t\t\tthis._checkbox.disabled = element.isDisabled();\n\t\t} else {\n\t\t\tthis._checkbox.checked = element.isChecked();\n\t\t\tthis._checkbox.disabled = element.isDisabled();\n\t\t}\n\n\t\tlet value = '';\n\t\tvalue += element.prefix;\n\t\tvalue += element.selecting;\n\t\tvalue += element.inserting;\n\t\tvalue += element.suffix;\n\n\t\tconst selectHighlight: IHighlight = { start: element.prefix.length, end: element.prefix.length + element.selecting.length, extraClasses: ['remove'] };\n\t\tconst insertHighlight: IHighlight = { start: selectHighlight.end, end: selectHighlight.end + element.inserting.length, extraClasses: ['insert'] };\n\n\t\tlet title: string | undefined;\n\t\tconst { metadata } = element.edit.textEdit;\n\t\tif (metadata && metadata.description) {\n\t\t\ttitle = localize('title', \"{0} - {1}\", metadata.label, metadata.description);\n\t\t} else if (metadata) {\n\t\t\ttitle = metadata.label;\n\t\t}\n\n\t\tconst iconPath = metadata?.iconPath;\n\t\tif (!iconPath) {\n\t\t\tthis._icon.style.display = 'none';\n\t\t} else {\n\t\t\tthis._icon.style.display = 'block';\n\n\t\t\tthis._icon.style.setProperty('--background-dark', null);\n\t\t\tthis._icon.style.setProperty('--background-light', null);\n\n\t\t\tif (ThemeIcon.isThemeIcon(iconPath)) {\n\t\t\t\t// css\n\t\t\t\tconst className = ThemeIcon.asClassName(iconPath);\n\t\t\t\tthis._icon.className = className ? `theme-icon ${className}` : '';\n\t\t\t\tthis._icon.style.color = iconPath.color ? this._themeService.getColorTheme().getColor(iconPath.color.id)?.toString() ?? '' : '';\n\n\n\t\t\t} else if (URI.isUri(iconPath)) {\n\t\t\t\t// background-image\n\t\t\t\tthis._icon.className = 'uri-icon';\n\t\t\t\tthis._icon.style.setProperty('--background-dark', dom.asCSSUrl(iconPath));\n\t\t\t\tthis._icon.style.setProperty('--background-light', dom.asCSSUrl(iconPath));\n\n\t\t\t} else {\n\t\t\t\t// background-image\n\t\t\t\tthis._icon.className = 'uri-icon';\n\t\t\t\tthis._icon.style.setProperty('--background-dark', dom.asCSSUrl(iconPath.dark));\n\t\t\t\tthis._icon.style.setProperty('--background-light', dom.asCSSUrl(iconPath.light));\n\t\t\t}\n\t\t}\n\n\t\tthis._label.set(value, [selectHighlight, insertHighlight], title, true);\n\t\tthis._icon.title = title || '';\n\t}\n}\n\nexport class TextEditElementRenderer implements ITreeRenderer<TextEditElement, FuzzyScore, TextEditElementTemplate> {\n\n\tstatic readonly id = 'TextEditElementRenderer';\n\n\treadonly templateId: string = TextEditElementRenderer.id;\n\n\tconstructor(@IThemeService private readonly _themeService: IThemeService) { }\n\n\trenderTemplate(container: HTMLElement): TextEditElementTemplate {\n\t\treturn new TextEditElementTemplate(container, this._themeService);\n\t}\n\n\trenderElement({ element }: ITreeNode<TextEditElement, FuzzyScore>, _index: number, template: TextEditElementTemplate): void {\n\t\ttemplate.set(element);\n\t}\n\n\tdisposeTemplate(_template: TextEditElementTemplate): void { }\n}\n\nexport class BulkEditDelegate implements IListVirtualDelegate<BulkEditElement> {\n\n\tgetHeight(): number {\n\t\treturn 23;\n\t}\n\n\tgetTemplateId(element: BulkEditElement): string {\n\n\t\tif (element instanceof FileElement) {\n\t\t\treturn FileElementRenderer.id;\n\t\t} else if (element instanceof TextEditElement) {\n\t\t\treturn TextEditElementRenderer.id;\n\t\t} else {\n\t\t\treturn CategoryElementRenderer.id;\n\t\t}\n\t}\n}\n\n\nexport class BulkEditNaviLabelProvider implements IKeyboardNavigationLabelProvider<BulkEditElement> {\n\n\tgetKeyboardNavigationLabel(element: BulkEditElement) {\n\t\tif (element instanceof FileElement) {\n\t\t\treturn basename(element.edit.uri);\n\t\t} else if (element instanceof CategoryElement) {\n\t\t\treturn element.category.metadata.label;\n\t\t}\n\t\treturn undefined;\n\t}\n}\n"],
  "mappings": "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",
  "names": ["idx"]
}
