var f=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var a=(o,r,t,i)=>{for(var e=i>1?void 0:i?v(r,t):r,n=o.length-1,d;n>=0;n--)(d=o[n])&&(e=(i?d(r,t,e):d(e))||e);return i&&e&&f(r,t,e),e},s=(o,r)=>(t,i)=>r(t,i,o);import{Event as h}from"../../../../base/common/event.js";import{Disposable as m}from"../../../../base/common/lifecycle.js";import{isDiffEditor as l}from"../../../../editor/browser/editorBrowser.js";import{localize as g}from"../../../../nls.js";import{IAccessibilityService as _}from"../../../../platform/accessibility/common/accessibility.js";import{IConfigurationService as S}from"../../../../platform/configuration/common/configuration.js";import"../../../common/contributions.js";import{IEditorService as b}from"../../../services/editor/common/editorService.js";import{AccessibilityVerbositySettingId as p}from"../../accessibility/browser/accessibilityConfiguration.js";let c=class extends m{constructor(t,i,e){super();this._editorService=t;this._accessibilityService=i;this._configurationService=e;this._register(h.runAndSubscribe(i.onDidChangeScreenReaderOptimized,()=>this._updateListener())),this._register(e.onDidChangeConfiguration(n=>{n.affectsConfiguration(p.DiffEditorActive)&&this._updateListener()}))}static ID="workbench.contrib.diffEditorActiveAnnouncement";_onDidActiveEditorChangeListener;_updateListener(){const t=this._configurationService.getValue(p.DiffEditorActive),i=this._accessibilityService.isScreenReaderOptimized();if(!t||!i){this._onDidActiveEditorChangeListener?.dispose(),this._onDidActiveEditorChangeListener=void 0;return}this._onDidActiveEditorChangeListener||(this._onDidActiveEditorChangeListener=this._register(this._editorService.onDidActiveEditorChange(()=>{l(this._editorService.activeTextEditorControl)&&this._accessibilityService.alert(g("openDiffEditorAnnouncement","Diff editor"))})))}};c=a([s(0,b),s(1,_),s(2,S)],c);export{c as DiffEditorActiveAnnouncementContribution};
