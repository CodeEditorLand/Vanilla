{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/accessibilitySignals/browser/openDiffEditorAnnouncement.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event } from \"../../../../base/common/event.js\";\nimport {\n\tDisposable,\n\ttype IDisposable,\n} from \"../../../../base/common/lifecycle.js\";\nimport { isDiffEditor } from \"../../../../editor/browser/editorBrowser.js\";\nimport { localize } from \"../../../../nls.js\";\nimport { IAccessibilityService } from \"../../../../platform/accessibility/common/accessibility.js\";\nimport { IConfigurationService } from \"../../../../platform/configuration/common/configuration.js\";\nimport type { IWorkbenchContribution } from \"../../../common/contributions.js\";\nimport { IEditorService } from \"../../../services/editor/common/editorService.js\";\nimport { AccessibilityVerbositySettingId } from \"../../accessibility/browser/accessibilityConfiguration.js\";\n\nexport class DiffEditorActiveAnnouncementContribution\n\textends Disposable\n\timplements IWorkbenchContribution\n{\n\tstatic readonly ID = \"workbench.contrib.diffEditorActiveAnnouncement\";\n\n\tprivate _onDidActiveEditorChangeListener?: IDisposable;\n\n\tconstructor(\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@IAccessibilityService private readonly _accessibilityService: IAccessibilityService,\n\t\t@IConfigurationService private readonly _configurationService: IConfigurationService\n\t) {\n\t\tsuper();\n\t\tthis._register(Event.runAndSubscribe(_accessibilityService.onDidChangeScreenReaderOptimized, () => this._updateListener()));\n\t\tthis._register(_configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(AccessibilityVerbositySettingId.DiffEditorActive)) {\n\t\t\t\tthis._updateListener();\n\t\t\t}\n\t\t}));\n\t}\n\n\tprivate _updateListener(): void {\n\t\tconst announcementEnabled = this._configurationService.getValue(\n\t\t\tAccessibilityVerbositySettingId.DiffEditorActive,\n\t\t);\n\t\tconst screenReaderOptimized =\n\t\t\tthis._accessibilityService.isScreenReaderOptimized();\n\n\t\tif (!announcementEnabled || !screenReaderOptimized) {\n\t\t\tthis._onDidActiveEditorChangeListener?.dispose();\n\t\t\tthis._onDidActiveEditorChangeListener = undefined;\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._onDidActiveEditorChangeListener) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._onDidActiveEditorChangeListener = this._register(\n\t\t\tthis._editorService.onDidActiveEditorChange(() => {\n\t\t\t\tif (isDiffEditor(this._editorService.activeTextEditorControl)) {\n\t\t\t\t\tthis._accessibilityService.alert(\n\t\t\t\t\t\tlocalize(\"openDiffEditorAnnouncement\", \"Diff editor\"),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;AAKA,SAAS,aAAa;AACtB;AAAA,EACC;AAAA,OAEM;AACP,SAAS,oBAAoB;AAC7B,SAAS,gBAAgB;AACzB,SAAS,6BAA6B;AACtC,SAAS,6BAA6B;AAEtC,SAAS,sBAAsB;AAC/B,SAAS,uCAAuC;AAEzC,IAAM,2CAAN,cACE,WAET;AAAA,EAKC,YACkC,gBACO,uBACA,uBACvC;AACD,UAAM;AAJ2B;AACO;AACA;AAGxC,SAAK,UAAU,MAAM,gBAAgB,sBAAsB,kCAAkC,MAAM,KAAK,gBAAgB,CAAC,CAAC;AAC1H,SAAK,UAAU,sBAAsB,yBAAyB,OAAK;AAClE,UAAI,EAAE,qBAAqB,gCAAgC,gBAAgB,GAAG;AAC7E,aAAK,gBAAgB;AAAA,MACtB;AAAA,IACD,CAAC,CAAC;AAAA,EACH;AAAA,EAtCD,OAqBA;AAAA;AAAA;AAAA,EACC,OAAgB,KAAK;AAAA,EAEb;AAAA,EAgBA,kBAAwB;AAC/B,UAAM,sBAAsB,KAAK,sBAAsB;AAAA,MACtD,gCAAgC;AAAA,IACjC;AACA,UAAM,wBACL,KAAK,sBAAsB,wBAAwB;AAEpD,QAAI,CAAC,uBAAuB,CAAC,uBAAuB;AACnD,WAAK,kCAAkC,QAAQ;AAC/C,WAAK,mCAAmC;AACxC;AAAA,IACD;AAEA,QAAI,KAAK,kCAAkC;AAC1C;AAAA,IACD;AAEA,SAAK,mCAAmC,KAAK;AAAA,MAC5C,KAAK,eAAe,wBAAwB,MAAM;AACjD,YAAI,aAAa,KAAK,eAAe,uBAAuB,GAAG;AAC9D,eAAK,sBAAsB;AAAA,YAC1B,SAAS,8BAA8B,aAAa;AAAA,UACrD;AAAA,QACD;AAAA,MACD,CAAC;AAAA,IACF;AAAA,EACD;AACD;AAjDa,2CAAN;AAAA,EASJ;AAAA,EACA;AAAA,EACA;AAAA,GAXU;",
  "names": []
}
