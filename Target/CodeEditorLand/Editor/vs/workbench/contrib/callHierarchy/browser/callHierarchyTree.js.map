{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/callHierarchy/browser/callHierarchyTree.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IconLabel } from \"../../../../base/browser/ui/iconLabel/iconLabel.js\";\nimport type {\n\tIIdentityProvider,\n\tIListVirtualDelegate,\n} from \"../../../../base/browser/ui/list/list.js\";\nimport type { IListAccessibilityProvider } from \"../../../../base/browser/ui/list/listWidget.js\";\nimport type {\n\tIAsyncDataSource,\n\tITreeNode,\n\tITreeRenderer,\n\tITreeSorter,\n} from \"../../../../base/browser/ui/tree/tree.js\";\nimport { CancellationToken } from \"../../../../base/common/cancellation.js\";\nimport {\n\ttype FuzzyScore,\n\tcreateMatches,\n} from \"../../../../base/common/filters.js\";\nimport { compare } from \"../../../../base/common/strings.js\";\nimport { ThemeIcon } from \"../../../../base/common/themables.js\";\nimport { Range } from \"../../../../editor/common/core/range.js\";\nimport {\n\ttype Location,\n\tSymbolKinds,\n\tSymbolTag,\n} from \"../../../../editor/common/languages.js\";\nimport { localize } from \"../../../../nls.js\";\nimport {\n\tCallHierarchyDirection,\n\ttype CallHierarchyItem,\n\tCallHierarchyModel,\n} from \"../common/callHierarchy.js\";\n\nexport class Call {\n\tconstructor(\n\t\treadonly item: CallHierarchyItem,\n\t\treadonly locations: Location[] | undefined,\n\t\treadonly model: CallHierarchyModel,\n\t\treadonly parent: Call | undefined,\n\t) {}\n\n\tstatic compare(a: Call, b: Call): number {\n\t\tlet res = compare(a.item.uri.toString(), b.item.uri.toString());\n\t\tif (res === 0) {\n\t\t\tres = Range.compareRangesUsingStarts(a.item.range, b.item.range);\n\t\t}\n\t\treturn res;\n\t}\n}\n\nexport class DataSource implements IAsyncDataSource<CallHierarchyModel, Call> {\n\tconstructor(public getDirection: () => CallHierarchyDirection) {}\n\n\thasChildren(): boolean {\n\t\treturn true;\n\t}\n\n\tasync getChildren(element: CallHierarchyModel | Call): Promise<Call[]> {\n\t\tif (element instanceof CallHierarchyModel) {\n\t\t\treturn element.roots.map(\n\t\t\t\t(root) => new Call(root, undefined, element, undefined),\n\t\t\t);\n\t\t}\n\n\t\tconst { model, item } = element;\n\n\t\tif (this.getDirection() === CallHierarchyDirection.CallsFrom) {\n\t\t\treturn (\n\t\t\t\tawait model.resolveOutgoingCalls(item, CancellationToken.None)\n\t\t\t).map((call) => {\n\t\t\t\treturn new Call(\n\t\t\t\t\tcall.to,\n\t\t\t\t\tcall.fromRanges.map((range) => ({ range, uri: item.uri })),\n\t\t\t\t\tmodel,\n\t\t\t\t\telement,\n\t\t\t\t);\n\t\t\t});\n\t\t} else {\n\t\t\treturn (\n\t\t\t\tawait model.resolveIncomingCalls(item, CancellationToken.None)\n\t\t\t).map((call) => {\n\t\t\t\treturn new Call(\n\t\t\t\t\tcall.from,\n\t\t\t\t\tcall.fromRanges.map((range) => ({\n\t\t\t\t\t\trange,\n\t\t\t\t\t\turi: call.from.uri,\n\t\t\t\t\t})),\n\t\t\t\t\tmodel,\n\t\t\t\t\telement,\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport class Sorter implements ITreeSorter<Call> {\n\tcompare(element: Call, otherElement: Call): number {\n\t\treturn Call.compare(element, otherElement);\n\t}\n}\n\nexport class IdentityProvider implements IIdentityProvider<Call> {\n\tconstructor(public getDirection: () => CallHierarchyDirection) {}\n\n\tgetId(element: Call): { toString(): string } {\n\t\tlet res =\n\t\t\tthis.getDirection() +\n\t\t\tJSON.stringify(element.item.uri) +\n\t\t\tJSON.stringify(element.item.range);\n\t\tif (element.parent) {\n\t\t\tres += this.getId(element.parent);\n\t\t}\n\t\treturn res;\n\t}\n}\n\nclass CallRenderingTemplate {\n\tconstructor(\n\t\treadonly icon: HTMLDivElement,\n\t\treadonly label: IconLabel,\n\t) {}\n}\n\nexport class CallRenderer\n\timplements ITreeRenderer<Call, FuzzyScore, CallRenderingTemplate>\n{\n\tstatic readonly id = \"CallRenderer\";\n\n\ttemplateId: string = CallRenderer.id;\n\n\trenderTemplate(container: HTMLElement): CallRenderingTemplate {\n\t\tcontainer.classList.add(\"callhierarchy-element\");\n\t\tconst icon = document.createElement(\"div\");\n\t\tcontainer.appendChild(icon);\n\t\tconst label = new IconLabel(container, { supportHighlights: true });\n\t\treturn new CallRenderingTemplate(icon, label);\n\t}\n\n\trenderElement(\n\t\tnode: ITreeNode<Call, FuzzyScore>,\n\t\t_index: number,\n\t\ttemplate: CallRenderingTemplate,\n\t): void {\n\t\tconst { element, filterData } = node;\n\t\tconst deprecated = element.item.tags?.includes(SymbolTag.Deprecated);\n\t\ttemplate.icon.className = \"\";\n\t\ttemplate.icon.classList.add(\n\t\t\t\"inline\",\n\t\t\t...ThemeIcon.asClassNameArray(\n\t\t\t\tSymbolKinds.toIcon(element.item.kind),\n\t\t\t),\n\t\t);\n\t\ttemplate.label.setLabel(element.item.name, element.item.detail, {\n\t\t\tlabelEscapeNewLines: true,\n\t\t\tmatches: createMatches(filterData),\n\t\t\tstrikethrough: deprecated,\n\t\t});\n\t}\n\tdisposeTemplate(template: CallRenderingTemplate): void {\n\t\ttemplate.label.dispose();\n\t}\n}\n\nexport class VirtualDelegate implements IListVirtualDelegate<Call> {\n\tgetHeight(_element: Call): number {\n\t\treturn 22;\n\t}\n\n\tgetTemplateId(_element: Call): string {\n\t\treturn CallRenderer.id;\n\t}\n}\n\nexport class AccessibilityProvider implements IListAccessibilityProvider<Call> {\n\tconstructor(public getDirection: () => CallHierarchyDirection) {}\n\n\tgetWidgetAriaLabel(): string {\n\t\treturn localize(\"tree.aria\", \"Call Hierarchy\");\n\t}\n\n\tgetAriaLabel(element: Call): string | null {\n\t\tif (this.getDirection() === CallHierarchyDirection.CallsFrom) {\n\t\t\treturn localize(\"from\", \"calls from {0}\", element.item.name);\n\t\t} else {\n\t\t\treturn localize(\"to\", \"callers of {0}\", element.item.name);\n\t\t}\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
