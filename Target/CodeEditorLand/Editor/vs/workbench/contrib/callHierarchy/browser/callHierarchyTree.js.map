{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/callHierarchy/browser/callHierarchyTree.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IAsyncDataSource, ITreeRenderer, ITreeNode, ITreeSorter } from '../../../../base/browser/ui/tree/tree.js';\nimport { CallHierarchyItem, CallHierarchyDirection, CallHierarchyModel, } from '../common/callHierarchy.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { IIdentityProvider, IListVirtualDelegate } from '../../../../base/browser/ui/list/list.js';\nimport { FuzzyScore, createMatches } from '../../../../base/common/filters.js';\nimport { IconLabel } from '../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { SymbolKinds, Location, SymbolTag } from '../../../../editor/common/languages.js';\nimport { compare } from '../../../../base/common/strings.js';\nimport { Range } from '../../../../editor/common/core/range.js';\nimport { IListAccessibilityProvider } from '../../../../base/browser/ui/list/listWidget.js';\nimport { localize } from '../../../../nls.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\n\nexport class Call {\n\tconstructor(\n\t\treadonly item: CallHierarchyItem,\n\t\treadonly locations: Location[] | undefined,\n\t\treadonly model: CallHierarchyModel,\n\t\treadonly parent: Call | undefined\n\t) { }\n\n\tstatic compare(a: Call, b: Call): number {\n\t\tlet res = compare(a.item.uri.toString(), b.item.uri.toString());\n\t\tif (res === 0) {\n\t\t\tres = Range.compareRangesUsingStarts(a.item.range, b.item.range);\n\t\t}\n\t\treturn res;\n\t}\n}\n\nexport class DataSource implements IAsyncDataSource<CallHierarchyModel, Call> {\n\n\tconstructor(\n\t\tpublic getDirection: () => CallHierarchyDirection,\n\t) { }\n\n\thasChildren(): boolean {\n\t\treturn true;\n\t}\n\n\tasync getChildren(element: CallHierarchyModel | Call): Promise<Call[]> {\n\t\tif (element instanceof CallHierarchyModel) {\n\t\t\treturn element.roots.map(root => new Call(root, undefined, element, undefined));\n\t\t}\n\n\t\tconst { model, item } = element;\n\n\t\tif (this.getDirection() === CallHierarchyDirection.CallsFrom) {\n\t\t\treturn (await model.resolveOutgoingCalls(item, CancellationToken.None)).map(call => {\n\t\t\t\treturn new Call(\n\t\t\t\t\tcall.to,\n\t\t\t\t\tcall.fromRanges.map(range => ({ range, uri: item.uri })),\n\t\t\t\t\tmodel,\n\t\t\t\t\telement\n\t\t\t\t);\n\t\t\t});\n\n\t\t} else {\n\t\t\treturn (await model.resolveIncomingCalls(item, CancellationToken.None)).map(call => {\n\t\t\t\treturn new Call(\n\t\t\t\t\tcall.from,\n\t\t\t\t\tcall.fromRanges.map(range => ({ range, uri: call.from.uri })),\n\t\t\t\t\tmodel,\n\t\t\t\t\telement\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport class Sorter implements ITreeSorter<Call> {\n\n\tcompare(element: Call, otherElement: Call): number {\n\t\treturn Call.compare(element, otherElement);\n\t}\n}\n\nexport class IdentityProvider implements IIdentityProvider<Call> {\n\n\tconstructor(\n\t\tpublic getDirection: () => CallHierarchyDirection\n\t) { }\n\n\tgetId(element: Call): { toString(): string } {\n\t\tlet res = this.getDirection() + JSON.stringify(element.item.uri) + JSON.stringify(element.item.range);\n\t\tif (element.parent) {\n\t\t\tres += this.getId(element.parent);\n\t\t}\n\t\treturn res;\n\t}\n}\n\nclass CallRenderingTemplate {\n\tconstructor(\n\t\treadonly icon: HTMLDivElement,\n\t\treadonly label: IconLabel\n\t) { }\n}\n\nexport class CallRenderer implements ITreeRenderer<Call, FuzzyScore, CallRenderingTemplate> {\n\n\tstatic readonly id = 'CallRenderer';\n\n\ttemplateId: string = CallRenderer.id;\n\n\trenderTemplate(container: HTMLElement): CallRenderingTemplate {\n\t\tcontainer.classList.add('callhierarchy-element');\n\t\tconst icon = document.createElement('div');\n\t\tcontainer.appendChild(icon);\n\t\tconst label = new IconLabel(container, { supportHighlights: true });\n\t\treturn new CallRenderingTemplate(icon, label);\n\t}\n\n\trenderElement(node: ITreeNode<Call, FuzzyScore>, _index: number, template: CallRenderingTemplate): void {\n\t\tconst { element, filterData } = node;\n\t\tconst deprecated = element.item.tags?.includes(SymbolTag.Deprecated);\n\t\ttemplate.icon.className = '';\n\t\ttemplate.icon.classList.add('inline', ...ThemeIcon.asClassNameArray(SymbolKinds.toIcon(element.item.kind)));\n\t\ttemplate.label.setLabel(\n\t\t\telement.item.name,\n\t\t\telement.item.detail,\n\t\t\t{ labelEscapeNewLines: true, matches: createMatches(filterData), strikethrough: deprecated }\n\t\t);\n\t}\n\tdisposeTemplate(template: CallRenderingTemplate): void {\n\t\ttemplate.label.dispose();\n\t}\n}\n\nexport class VirtualDelegate implements IListVirtualDelegate<Call> {\n\n\tgetHeight(_element: Call): number {\n\t\treturn 22;\n\t}\n\n\tgetTemplateId(_element: Call): string {\n\t\treturn CallRenderer.id;\n\t}\n}\n\nexport class AccessibilityProvider implements IListAccessibilityProvider<Call> {\n\n\tconstructor(\n\t\tpublic getDirection: () => CallHierarchyDirection\n\t) { }\n\n\tgetWidgetAriaLabel(): string {\n\t\treturn localize('tree.aria', \"Call Hierarchy\");\n\t}\n\n\tgetAriaLabel(element: Call): string | null {\n\t\tif (this.getDirection() === CallHierarchyDirection.CallsFrom) {\n\t\t\treturn localize('from', \"calls from {0}\", element.item.name);\n\t\t} else {\n\t\t\treturn localize('to', \"callers of {0}\", element.item.name);\n\t\t}\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
