var B=Object.defineProperty;var V=Object.getOwnPropertyDescriptor;var S=(u,g,e,i)=>{for(var t=i>1?void 0:i?V(g,e):g,s=u.length-1,a;s>=0;s--)(a=u[s])&&(t=(i?a(g,e,t):a(t))||t);return i&&t&&B(g,e,t),t},n=(u,g)=>(e,i)=>g(e,i,u);import{Action as m,Separator as q}from"../../../../../vs/base/common/actions.js";import{createCancelablePromise as z,RunOnceScheduler as H}from"../../../../../vs/base/common/async.js";import{CancellationToken as N,CancellationTokenSource as G}from"../../../../../vs/base/common/cancellation.js";import{Codicon as v}from"../../../../../vs/base/common/codicons.js";import{getErrorMessage as j}from"../../../../../vs/base/common/errors.js";import{Emitter as k}from"../../../../../vs/base/common/event.js";import{Disposable as J,DisposableStore as A,toDisposable as W}from"../../../../../vs/base/common/lifecycle.js";import{ResourceMap as Q}from"../../../../../vs/base/common/map.js";import{equals as R}from"../../../../../vs/base/common/objects.js";import{isWeb as M}from"../../../../../vs/base/common/platform.js";import{ThemeIcon as y}from"../../../../../vs/base/common/themables.js";import{URI as P}from"../../../../../vs/base/common/uri.js";import{generateUuid as X}from"../../../../../vs/base/common/uuid.js";import{localize as l}from"../../../../../vs/nls.js";import{ICommandService as x}from"../../../../../vs/platform/commands/common/commands.js";import{IConfigurationService as Y}from"../../../../../vs/platform/configuration/common/configuration.js";import{IDialogService as Z}from"../../../../../vs/platform/dialogs/common/dialogs.js";import{IFileService as $}from"../../../../../vs/platform/files/common/files.js";import{InMemoryFileSystemProvider as ee}from"../../../../../vs/platform/files/common/inMemoryFilesystemProvider.js";import{IInstantiationService as E}from"../../../../../vs/platform/instantiation/common/instantiation.js";import{IOpenerService as ie}from"../../../../../vs/platform/opener/common/opener.js";import{IProductService as te}from"../../../../../vs/platform/product/common/productService.js";import{ITelemetryService as re}from"../../../../../vs/platform/telemetry/common/telemetry.js";import{isUserDataProfile as b,IUserDataProfilesService as _,ProfileResourceType as r,toUserDataProfile as se}from"../../../../../vs/platform/userDataProfile/common/userDataProfile.js";import{API_OPEN_EDITOR_COMMAND_ID as oe}from"../../../../../vs/workbench/browser/parts/editor/editorCommands.js";import{CONFIG_NEW_WINDOW_PROFILE as F}from"../../../../../vs/workbench/common/configuration.js";import{EditorModel as ne}from"../../../../../vs/workbench/common/editor/editorModel.js";import"../../../../../vs/workbench/common/views.js";import{SIDE_GROUP as ae}from"../../../../../vs/workbench/services/editor/common/editorService.js";import{IHostService as le}from"../../../../../vs/workbench/services/host/browser/host.js";import{ExtensionsResourceExportTreeItem as fe,ExtensionsResourceImportTreeItem as ce}from"../../../../../vs/workbench/services/userDataProfile/browser/extensionsResource.js";import{KeybindingsResource as de,KeybindingsResourceTreeItem as he}from"../../../../../vs/workbench/services/userDataProfile/browser/keybindingsResource.js";import{SettingsResource as pe,SettingsResourceTreeItem as me}from"../../../../../vs/workbench/services/userDataProfile/browser/settingsResource.js";import{SnippetsResource as ue,SnippetsResourceTreeItem as Pe}from"../../../../../vs/workbench/services/userDataProfile/browser/snippetsResource.js";import{TasksResource as ge,TasksResourceTreeItem as ve}from"../../../../../vs/workbench/services/userDataProfile/browser/tasksResource.js";import{isProfileURL as ye,IUserDataProfileImportExportService as O,IUserDataProfileManagementService as T,IUserDataProfileService as K}from"../../../../../vs/workbench/services/userDataProfile/common/userDataProfile.js";function pi(u){return u.resourceType!==void 0}function mi(u){return u.label!==void 0}let D=class extends J{constructor(e,i,t,s,a,p,c,d){super();this.userDataProfileManagementService=a;this.userDataProfilesService=p;this.commandService=c;this.instantiationService=d;this._name=e,this._icon=i,this._flags=t,this._active=s,this._register(this.onDidChange(h=>{h.message||this.validate(),this.save()}))}_onDidChange=this._register(new k);onDidChange=this._onDidChange.event;saveScheduler=this._register(new H(()=>this.doSave(),500));_name="";get name(){return this._name}set name(e){e=e.trim(),this._name!==e&&(this._name=e,this._onDidChange.fire({name:!0}))}_icon;get icon(){return this._icon}set icon(e){this._icon!==e&&(this._icon=e,this._onDidChange.fire({icon:!0}))}_flags;get flags(){return this._flags}set flags(e){R(this._flags,e)||(this._flags=e,this._onDidChange.fire({flags:!0}))}_active=!1;get active(){return this._active}set active(e){this._active!==e&&(this._active=e,this._onDidChange.fire({active:!0}))}_message;get message(){return this._message}set message(e){this._message!==e&&(this._message=e,this._onDidChange.fire({message:!0}))}_disabled=!1;get disabled(){return this._disabled}set disabled(e){this._disabled!==e&&(this._disabled=e,this._onDidChange.fire({disabled:!0}))}getFlag(e){return this.flags?.[e]??!1}setFlag(e,i){const t=this.flags?{...this.flags}:{};i?t[e]=!0:delete t[e],this.flags=t}validate(){if(!this.name){this.message=l("name required","Profile name is required and must be a non-empty value.");return}if(this.shouldValidateName()&&this.name!==this.getInitialName()&&this.userDataProfilesService.profiles.some(e=>e.name===this.name)){this.message=l("profileExists","Profile with name {0} already exists.",this.name);return}if(this.flags&&this.flags.settings&&this.flags.keybindings&&this.flags.tasks&&this.flags.snippets&&this.flags.extensions){this.message=l("invalid configurations","The profile should contain at least one configuration.");return}this.message=void 0}async getChildren(e){if(e===void 0){const i=[r.Settings,r.Keybindings,r.Tasks,r.Snippets,r.Extensions];return Promise.all(i.map(async t=>{const s=t===r.Settings||t===r.Keybindings||t===r.Tasks?await this.getChildrenForResourceType(t):[];return{handle:t,checkbox:void 0,resourceType:t,action:s.length?new m("_open",l("open","Open to the Side"),y.asClassName(v.goToFile),!0,()=>s[0]?.action?.run()):void 0}}))}return this.getChildrenForResourceType(e)}async getChildrenForResourceType(e){return[]}async getChildrenFromProfile(e,i){e=this.getFlag(i)?this.userDataProfilesService.defaultProfile:e;let t=[];switch(i){case r.Settings:t=await this.instantiationService.createInstance(me,e).getChildren();break;case r.Keybindings:t=await this.instantiationService.createInstance(he,e).getChildren();break;case r.Snippets:t=await this.instantiationService.createInstance(Pe,e).getChildren()??[];break;case r.Tasks:t=await this.instantiationService.createInstance(ve,e).getChildren();break;case r.Extensions:t=await this.instantiationService.createInstance(fe,e).getChildren();break}return t.map(s=>this.toUserDataProfileResourceChildElement(s))}toUserDataProfileResourceChildElement(e){return{handle:e.handle,checkbox:e.checkbox,label:e.label?.label??"",resource:P.revive(e.resourceUri),icon:e.themeIcon,action:new m("_openChild",l("open","Open to the Side"),y.asClassName(v.goToFile),!0,async()=>{e.parent.type===r.Extensions?await this.commandService.executeCommand("extension.open",e.handle,void 0,!0,void 0,!0):e.resourceUri&&await this.commandService.executeCommand(oe,e.resourceUri,[ae],void 0)})}}getInitialName(){return""}shouldValidateName(){return!0}save(){this.saveScheduler.schedule()}hasUnsavedChanges(e){return this.name!==e.name||this.icon!==e.icon||!R(this.flags??{},e.useDefaultFlags??{})}async saveProfile(e){if(!this.hasUnsavedChanges(e)||(this.validate(),this.message))return;const i=this.flags?this.flags.settings&&this.flags.keybindings&&this.flags.tasks&&this.flags.globalState&&this.flags.extensions?void 0:this.flags:void 0;return await this.userDataProfileManagementService.updateProfile(e,{name:this.name,icon:this.icon,useDefaultFlags:e.useDefaultFlags&&!i?{}:i})}};D=S([n(4,T),n(5,_),n(6,x),n(7,E)],D);let I=class extends D{constructor(e,i,t,s,a,p,c,d,h){super(e.name,e.icon,e.useDefaultFlags,s.currentProfile.id===e.id,p,c,d,h);this._profile=e;this.titleButtons=i;this.actions=t;this.userDataProfileService=s;this.configurationService=a;this._isNewWindowProfile=this.configurationService.getValue(F)===this.profile.name,this._register(a.onDidChangeConfiguration(o=>{o.affectsConfiguration(F)&&(this.isNewWindowProfile=this.configurationService.getValue(F)===this.profile.name)})),this._register(this.userDataProfileService.onDidChangeCurrentProfile(()=>this.active=this.userDataProfileService.currentProfile.id===this.profile.id)),this._register(this.userDataProfilesService.onDidChangeProfiles(()=>{const o=this.userDataProfilesService.profiles.find(f=>f.id===this.profile.id);o&&(this._profile=o,this.name=o.name,this.icon=o.icon,this.flags=o.useDefaultFlags)}))}get profile(){return this._profile}async toggleNewWindowProfile(){this._isNewWindowProfile?await this.configurationService.updateValue(F,null):await this.configurationService.updateValue(F,this.profile.name)}_isNewWindowProfile=!1;get isNewWindowProfile(){return this._isNewWindowProfile}set isNewWindowProfile(e){this._isNewWindowProfile!==e&&(this._isNewWindowProfile=e,this._onDidChange.fire({newWindowProfile:!0}))}async toggleCurrentWindowProfile(){this.userDataProfileService.currentProfile.id===this.profile.id?await this.userDataProfileManagementService.switchProfile(this.userDataProfilesService.defaultProfile):await this.userDataProfileManagementService.switchProfile(this.profile)}async doSave(){await this.saveProfile(this.profile)}async getChildrenForResourceType(e){return this.getChildrenFromProfile(this.profile,e)}getInitialName(){return this.profile.name}};I=S([n(3,K),n(4,Y),n(5,T),n(6,_),n(7,x),n(8,E)],I);const U="userdataprofiletemplatepreview";let C=class extends D{constructor(e,i,t,s,a,p,c,d,h,o){super(e,void 0,void 0,!1,c,d,h,o);this.titleButtons=t;this.actions=s;this.fileService=a;this.userDataProfileImportExportService=p;this.defaultName=e,this._copyFrom=i,this._copyFlags=this.getCopyFlagsFrom(i),this.initialize(),this._register(this.fileService.registerProvider(U,this._register(new ee)))}_copyFromTemplates=new Q;get copyFromTemplates(){return this._copyFromTemplates}templatePromise;template=null;defaultName;defaultIcon;_copyFrom;get copyFrom(){return this._copyFrom}set copyFrom(e){this._copyFrom!==e&&(this._copyFrom=e,this._onDidChange.fire({copyFrom:!0}),this.flags=void 0,this.copyFlags=this.getCopyFlagsFrom(e),e instanceof P&&(this.templatePromise?.cancel(),this.templatePromise=void 0),this.initialize())}_copyFlags;get copyFlags(){return this._copyFlags}set copyFlags(e){R(this._copyFlags,e)||(this._copyFlags=e,this._onDidChange.fire({copyFlags:!0}))}_previewProfile;get previewProfile(){return this._previewProfile}set previewProfile(e){this._previewProfile!==e&&(this._previewProfile=e,this._onDidChange.fire({preview:!0}))}getCopyFlagsFrom(e){return e?{settings:!0,keybindings:!0,snippets:!0,tasks:!0,extensions:!0}:void 0}async initialize(){this.disabled=!0;try{if(this.copyFrom instanceof P){await this.resolveTemplate(this.copyFrom),this.template&&(this.copyFromTemplates.set(this.copyFrom,this.template.name),this.defaultName===this.name&&(this.name=this.defaultName=this.template.name??""),this.defaultIcon===this.icon&&(this.icon=this.defaultIcon=this.template.icon),this.setCopyFlag(r.Settings,!!this.template.settings),this.setCopyFlag(r.Keybindings,!!this.template.keybindings),this.setCopyFlag(r.Tasks,!!this.template.tasks),this.setCopyFlag(r.Snippets,!!this.template.snippets),this.setCopyFlag(r.Extensions,!!this.template.extensions),this._onDidChange.fire({copyFromInfo:!0}));return}if(b(this.copyFrom)){this.defaultName===this.name&&(this.name=this.defaultName=l("copy from","{0} (Copy)",this.copyFrom.name)),this.defaultIcon===this.icon&&(this.icon=this.defaultIcon=this.copyFrom.icon),this.setCopyFlag(r.Settings,!0),this.setCopyFlag(r.Keybindings,!0),this.setCopyFlag(r.Tasks,!0),this.setCopyFlag(r.Snippets,!0),this.setCopyFlag(r.Extensions,!0),this._onDidChange.fire({copyFromInfo:!0});return}this.defaultName===this.name&&(this.name=this.defaultName=l("untitled","Untitled")),this.defaultIcon===this.icon&&(this.icon=this.defaultIcon=void 0),this.setCopyFlag(r.Settings,!1),this.setCopyFlag(r.Keybindings,!1),this.setCopyFlag(r.Tasks,!1),this.setCopyFlag(r.Snippets,!1),this.setCopyFlag(r.Extensions,!1),this._onDidChange.fire({copyFromInfo:!0})}finally{this.disabled=!1}}async resolveTemplate(e){return this.templatePromise||(this.templatePromise=z(async i=>{const t=await this.userDataProfileImportExportService.resolveProfileTemplate(e);i.isCancellationRequested||(this.template=t)})),await this.templatePromise,this.template}hasResource(e){if(this.template)switch(e){case r.Settings:return!!this.template.settings;case r.Keybindings:return!!this.template.keybindings;case r.Snippets:return!!this.template.snippets;case r.Tasks:return!!this.template.tasks;case r.Extensions:return!!this.template.extensions}return!0}getCopyFlag(e){return this.copyFlags?.[e]??!1}setCopyFlag(e,i){const t=this.copyFlags?{...this.copyFlags}:{};t[e]=i,this.copyFlags=t}getCopyFromName(){if(b(this.copyFrom))return this.copyFrom.name;if(this.copyFrom instanceof P)return this.copyFromTemplates.get(this.copyFrom)}async getChildrenForResourceType(e){return this.getFlag(e)?this.getChildrenFromProfile(this.userDataProfilesService.defaultProfile,e):this.getCopyFlag(e)?this.copyFrom instanceof P?(await this.resolveTemplate(this.copyFrom),this.template?this.getChildrenFromProfileTemplate(this.template,e):[]):this.copyFrom?this.getChildrenFromProfile(this.copyFrom,e):[]:[]}async getChildrenFromProfileTemplate(e,i){const t=se(X(),this.name,P.file("/root").with({scheme:U}),P.file("/cache").with({scheme:U}));switch(i){case r.Settings:return e.settings?(await this.instantiationService.createInstance(pe).apply(e.settings,t),this.getChildrenFromProfile(t,i)):[];case r.Keybindings:return e.keybindings?(await this.instantiationService.createInstance(de).apply(e.keybindings,t),this.getChildrenFromProfile(t,i)):[];case r.Snippets:return e.snippets?(await this.instantiationService.createInstance(ue).apply(e.snippets,t),this.getChildrenFromProfile(t,i)):[];case r.Tasks:return e.tasks?(await this.instantiationService.createInstance(ge).apply(e.tasks,t),this.getChildrenFromProfile(t,i)):[];case r.Extensions:return e.extensions?(await this.instantiationService.createInstance(ce,e.extensions).getChildren()).map(a=>this.toUserDataProfileResourceChildElement(a)):[]}return[]}shouldValidateName(){return!this.copyFrom}getInitialName(){return this.previewProfile?.name??""}async doSave(){if(this.previewProfile){const e=await this.saveProfile(this.previewProfile);e&&(this.previewProfile=e)}}};C=S([n(4,$),n(5,O),n(6,T),n(7,_),n(8,x),n(9,E)],C);let w=class extends ne{constructor(e,i,t,s,a,p,c,d,h,o){super();this.userDataProfileService=e;this.userDataProfilesService=i;this.userDataProfileManagementService=t;this.userDataProfileImportExportService=s;this.dialogService=a;this.telemetryService=p;this.hostService=c;this.productService=d;this.openerService=h;this.instantiationService=o;for(const f of i.profiles)f.isTransient||this._profiles.push(this.createProfileElement(f));this._register(W(()=>this._profiles.splice(0,this._profiles.length).map(([,f])=>f.dispose()))),this._register(i.onDidChangeProfiles(f=>this.onDidChangeProfiles(f)))}static INSTANCE;static getInstance(e){return w.INSTANCE||(w.INSTANCE=e.createInstance(w)),w.INSTANCE}_profiles=[];get profiles(){return this._profiles.map(([e])=>e).sort((e,i)=>e instanceof C?1:i instanceof C||e instanceof I&&e.profile.isDefault?-1:i instanceof I&&i.profile.isDefault?1:e.name.localeCompare(i.name))}newProfileElement;_onDidChange=this._register(new k);onDidChange=this._onDidChange.event;_templates;get templates(){return this._templates??[]}onDidChangeProfiles(e){let i=!1;for(const t of e.added)!t.isTransient&&t.name!==this.newProfileElement?.name&&(i=!0,this._profiles.push(this.createProfileElement(t)));for(const t of e.removed){t.id===this.newProfileElement?.previewProfile?.id&&(this.newProfileElement.previewProfile=void 0);const s=this._profiles.findIndex(([a])=>a instanceof I&&a.profile.id===t.id);s!==-1&&(i=!0,this._profiles.splice(s,1).map(([,a])=>a.dispose()))}i&&this._onDidChange.fire(void 0)}async resolve(){await super.resolve(),this._templates=await this.userDataProfileManagementService.getBuiltinProfileTemplates()}createProfileElement(e){const i=new A,t=i.add(new m("userDataProfile.activate",l("active","Use for Current Window"),y.asClassName(v.check),!0,()=>this.userDataProfileManagementService.switchProfile(f.profile))),s=i.add(new m("userDataProfile.copyFromProfile",l("copyFromProfile","Duplicate..."),y.asClassName(v.copy),!0,()=>this.createNewProfile(f.profile))),a=i.add(new m("userDataProfile.export",l("export","Export..."),y.asClassName(v.export),!0,()=>this.exportProfile(f.profile))),p=i.add(new m("userDataProfile.delete",l("delete","Delete"),y.asClassName(v.trash),!0,()=>this.removeProfile(f.profile))),c=i.add(new m("userDataProfile.newWindow",l("open new window","Open New Window with this Profile"),y.asClassName(v.emptyWindow),!0,()=>this.openWindow(f.profile))),d=i.add(new m("userDataProfile.useAsNewWindowProfile",l("use as new window","Use for New Windows"),void 0,!0,()=>f.toggleNewWindowProfile())),h=[];h.push(c),e.isDefault||h.push(p);const o=[];o.push(t),o.push(d),o.push(new q),o.push(s),o.push(a);const f=i.add(this.instantiationService.createInstance(I,e,[[],[]],[h,o]));return t.checked=this.userDataProfileService.currentProfile.id===f.profile.id,i.add(this.userDataProfileService.onDidChangeCurrentProfile(()=>t.checked=this.userDataProfileService.currentProfile.id===f.profile.id)),d.checked=f.isNewWindowProfile,i.add(f.onDidChange(L=>{L.newWindowProfile&&(d.checked=f.isNewWindowProfile)})),[f,i]}async createNewProfile(e){if(this.newProfileElement){if(!(await this.dialogService.confirm({type:"info",message:l("new profile exists","A new profile is already being created. Do you want to discard it and create a new one?"),primaryButton:l("discard","Discard & Create"),cancelButton:l("cancel","Cancel")})).confirmed)return;this.revert()}if(e instanceof P)try{await this.userDataProfileImportExportService.resolveProfileTemplate(e)}catch(i){this.dialogService.error(j(i));return}if(!this.newProfileElement){const i=new A,t=new G;i.add(W(()=>t.dispose(!0)));const s=[],a=[],p=i.add(new m("userDataProfile.create",l("create","Create"),void 0,!0,()=>this.saveNewProfile(!1,t.token)));s.push(p),M&&e instanceof P&&ye(e)&&s.push(new m("userDataProfile.createInDesktop",l("import in desktop","Create in {0}",this.productService.nameLong),void 0,!0,()=>this.openerService.open(e,{openExternal:!0})));const c=i.add(new m("userDataProfile.cancel",l("cancel","Cancel"),y.asClassName(v.trash),!0,()=>this.discardNewProfile()));a.push(c);const d=i.add(new m("userDataProfile.preview",l("preview","Preview"),y.asClassName(v.openPreview),!0,()=>this.previewNewProfile(t.token)));M||a.push(d),this.newProfileElement=i.add(this.instantiationService.createInstance(C,e?"":l("untitled","Untitled"),e,[s,[c,d]],[[c],[]]));const h=()=>{p.enabled&&(this.newProfileElement?.copyFrom&&this.userDataProfilesService.profiles.some(o=>o.name===this.newProfileElement?.name)?p.label=l("replace","Replace"):p.label=l("create","Create"))};h(),i.add(this.newProfileElement.onDidChange(o=>{o.preview&&(d.checked=!!this.newProfileElement?.previewProfile),(o.disabled||o.message)&&(d.enabled=p.enabled=!this.newProfileElement?.disabled&&!this.newProfileElement?.message),(o.name||o.copyFrom)&&h()})),i.add(this.userDataProfilesService.onDidChangeProfiles(o=>{h(),this.newProfileElement?.validate()})),this._profiles.push([this.newProfileElement,i]),this._onDidChange.fire(this.newProfileElement)}return this.newProfileElement}revert(){this.removeNewProfile(),this._onDidChange.fire(void 0)}removeNewProfile(){if(this.newProfileElement){const e=this._profiles.findIndex(([i])=>i===this.newProfileElement);e!==-1&&this._profiles.splice(e,1).map(([,i])=>i.dispose()),this.newProfileElement=void 0}}async previewNewProfile(e){if(!this.newProfileElement||this.newProfileElement.previewProfile)return;const i=await this.saveNewProfile(!0,e);i&&(this.newProfileElement.previewProfile=i,await this.openWindow(i))}async saveNewProfile(e,i){if(!this.newProfileElement||(this.newProfileElement.validate(),this.newProfileElement.message))return;this.newProfileElement.disabled=!0;let t;try{if(this.newProfileElement.previewProfile)e||(t=await this.userDataProfileManagementService.updateProfile(this.newProfileElement.previewProfile,{transient:!1}));else{const{flags:s,icon:a,name:p,copyFrom:c}=this.newProfileElement,d=s?s.settings&&s.keybindings&&s.tasks&&s.globalState&&s.extensions?void 0:s:void 0,h={source:c instanceof P?"template":b(c)?"profile":c?"external":void 0};if(c instanceof P){const o=await this.newProfileElement.resolveTemplate(c);o&&(this.telemetryService.publicLog2("userDataProfile.createFromTemplate",h),t=await this.userDataProfileImportExportService.createProfileFromTemplate(o,{name:p,useDefaultFlags:d,icon:a,resourceTypeFlags:this.newProfileElement.copyFlags,transient:e},i??N.None))}else b(c)?(this.telemetryService.publicLog2("userDataProfile.createFromProfile",h),t=await this.userDataProfileImportExportService.createFromProfile(c,{name:p,useDefaultFlags:d,icon:a,resourceTypeFlags:this.newProfileElement.copyFlags,transient:e},i??N.None)):(this.telemetryService.publicLog2("userDataProfile.createEmptyProfile",h),t=await this.userDataProfileManagementService.createProfile(p,{useDefaultFlags:d,icon:a,transient:e}))}}finally{this.newProfileElement&&(this.newProfileElement.disabled=!1)}if(i?.isCancellationRequested){if(t)try{await this.userDataProfileManagementService.removeProfile(t)}catch{}return}if(t&&!t.isTransient&&this.newProfileElement){this.removeNewProfile();const s=this._profiles.find(([a])=>a.name===t.name);s?this._onDidChange.fire(s[0]):this.onDidChangeProfiles({added:[t],removed:[],updated:[],all:this.userDataProfilesService.profiles})}return t}async discardNewProfile(){this.newProfileElement&&(this.newProfileElement.previewProfile&&await this.userDataProfileManagementService.removeProfile(this.newProfileElement.previewProfile),this.removeNewProfile(),this._onDidChange.fire(void 0))}async removeProfile(e){(await this.dialogService.confirm({type:"info",message:l("deleteProfile","Are you sure you want to delete the profile '{0}'?",e.name),primaryButton:l("delete","Delete"),cancelButton:l("cancel","Cancel")})).confirmed&&await this.userDataProfileManagementService.removeProfile(e)}async openWindow(e){await this.hostService.openWindow({forceProfile:e.name})}async exportProfile(e){return this.userDataProfileImportExportService.exportProfile(e)}};w=S([n(0,K),n(1,_),n(2,T),n(3,O),n(4,Z),n(5,re),n(6,le),n(7,te),n(8,ie),n(9,E)],w);export{D as AbstractUserDataProfileElement,C as NewProfileElement,I as UserDataProfileElement,w as UserDataProfilesEditorModel,mi as isProfileResourceChildElement,pi as isProfileResourceTypeElement};
