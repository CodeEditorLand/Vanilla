{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/update/browser/releaseNotesEditor.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport \"./media/releasenoteseditor.css\";\nimport { CancellationToken } from \"../../../../base/common/cancellation.js\";\nimport { onUnexpectedError } from \"../../../../base/common/errors.js\";\nimport { escapeMarkdownSyntaxTokens } from \"../../../../base/common/htmlContent.js\";\nimport { KeybindingParser } from \"../../../../base/common/keybindingParser.js\";\nimport { DisposableStore } from \"../../../../base/common/lifecycle.js\";\nimport { Schemas } from \"../../../../base/common/network.js\";\nimport { escape } from \"../../../../base/common/strings.js\";\nimport { URI } from \"../../../../base/common/uri.js\";\nimport { generateUuid } from \"../../../../base/common/uuid.js\";\nimport { ICodeEditorService } from \"../../../../editor/browser/services/codeEditorService.js\";\nimport { TokenizationRegistry } from \"../../../../editor/common/languages.js\";\nimport { ILanguageService } from \"../../../../editor/common/languages/language.js\";\nimport { generateTokensCSSForColorMap } from \"../../../../editor/common/languages/supports/tokenization.js\";\nimport * as nls from \"../../../../nls.js\";\nimport {\n\ttype IConfigurationChangeEvent,\n\tIConfigurationService,\n} from \"../../../../platform/configuration/common/configuration.js\";\nimport { IEnvironmentService } from \"../../../../platform/environment/common/environment.js\";\nimport { IInstantiationService } from \"../../../../platform/instantiation/common/instantiation.js\";\nimport { IKeybindingService } from \"../../../../platform/keybinding/common/keybinding.js\";\nimport { IOpenerService } from \"../../../../platform/opener/common/opener.js\";\nimport { IProductService } from \"../../../../platform/product/common/productService.js\";\nimport {\n\tIRequestService,\n\tasTextOrError,\n} from \"../../../../platform/request/common/request.js\";\nimport { TelemetryLevel } from \"../../../../platform/telemetry/common/telemetry.js\";\nimport {\n\tgetTelemetryLevel,\n\tsupportsTelemetry,\n} from \"../../../../platform/telemetry/common/telemetryUtils.js\";\nimport { IEditorGroupsService } from \"../../../services/editor/common/editorGroupsService.js\";\nimport {\n\tACTIVE_GROUP,\n\tIEditorService,\n} from \"../../../services/editor/common/editorService.js\";\nimport { IExtensionService } from \"../../../services/extensions/common/extensions.js\";\nimport {\n\tDEFAULT_MARKDOWN_STYLES,\n\trenderMarkdownDocument,\n} from \"../../markdown/browser/markdownDocumentRenderer.js\";\nimport { SimpleSettingRenderer } from \"../../markdown/browser/markdownSettingRenderer.js\";\nimport type { WebviewInput } from \"../../webviewPanel/browser/webviewEditorInput.js\";\nimport { IWebviewWorkbenchService } from \"../../webviewPanel/browser/webviewWorkbenchService.js\";\n\nexport class ReleaseNotesManager {\n\tprivate readonly _simpleSettingRenderer: SimpleSettingRenderer;\n\tprivate readonly _releaseNotesCache = new Map<string, Promise<string>>();\n\n\tprivate _currentReleaseNotes: WebviewInput | undefined = undefined;\n\tprivate _lastText: string | undefined;\n\tprivate readonly disposables = new DisposableStore();\n\n\tpublic constructor(\n\t\t@IEnvironmentService\n\t\tprivate readonly _environmentService: IEnvironmentService,\n\t\t@IKeybindingService\n\t\tprivate readonly _keybindingService: IKeybindingService,\n\t\t@ILanguageService private readonly _languageService: ILanguageService,\n\t\t@IOpenerService private readonly _openerService: IOpenerService,\n\t\t@IRequestService private readonly _requestService: IRequestService,\n\t\t@IConfigurationService\n\t\tprivate readonly _configurationService: IConfigurationService,\n\t\t@IEditorService private readonly _editorService: IEditorService,\n\t\t@IEditorGroupsService\n\t\tprivate readonly _editorGroupService: IEditorGroupsService,\n\t\t@ICodeEditorService\n\t\tprivate readonly _codeEditorService: ICodeEditorService,\n\t\t@IWebviewWorkbenchService\n\t\tprivate readonly _webviewWorkbenchService: IWebviewWorkbenchService,\n\t\t@IExtensionService\n\t\tprivate readonly _extensionService: IExtensionService,\n\t\t@IProductService private readonly _productService: IProductService,\n\t\t@IInstantiationService\n\t\tprivate readonly _instantiationService: IInstantiationService,\n\t) {\n\t\tTokenizationRegistry.onDidChange(() => {\n\t\t\treturn this.updateHtml();\n\t\t});\n\n\t\t_configurationService.onDidChangeConfiguration(\n\t\t\tthis.onDidChangeConfiguration,\n\t\t\tthis,\n\t\t\tthis.disposables,\n\t\t);\n\t\t_webviewWorkbenchService.onDidChangeActiveWebviewEditor(\n\t\t\tthis.onDidChangeActiveWebviewEditor,\n\t\t\tthis,\n\t\t\tthis.disposables,\n\t\t);\n\t\tthis._simpleSettingRenderer = this._instantiationService.createInstance(\n\t\t\tSimpleSettingRenderer,\n\t\t);\n\t}\n\n\tprivate async updateHtml() {\n\t\tif (!this._currentReleaseNotes || !this._lastText) {\n\t\t\treturn;\n\t\t}\n\t\tconst html = await this.renderBody(this._lastText);\n\t\tif (this._currentReleaseNotes) {\n\t\t\tthis._currentReleaseNotes.webview.setHtml(html);\n\t\t}\n\t}\n\n\tpublic async show(\n\t\tversion: string,\n\t\tuseCurrentFile: boolean,\n\t): Promise<boolean> {\n\t\tconst releaseNoteText = await this.loadReleaseNotes(\n\t\t\tversion,\n\t\t\tuseCurrentFile,\n\t\t);\n\t\tthis._lastText = releaseNoteText;\n\t\tconst html = await this.renderBody(releaseNoteText);\n\t\tconst title = nls.localize(\n\t\t\t\"releaseNotesInputName\",\n\t\t\t\"Release Notes: {0}\",\n\t\t\tversion,\n\t\t);\n\n\t\tconst activeEditorPane = this._editorService.activeEditorPane;\n\t\tif (this._currentReleaseNotes) {\n\t\t\tthis._currentReleaseNotes.setName(title);\n\t\t\tthis._currentReleaseNotes.webview.setHtml(html);\n\t\t\tthis._webviewWorkbenchService.revealWebview(\n\t\t\t\tthis._currentReleaseNotes,\n\t\t\t\tactiveEditorPane\n\t\t\t\t\t? activeEditorPane.group\n\t\t\t\t\t: this._editorGroupService.activeGroup,\n\t\t\t\tfalse,\n\t\t\t);\n\t\t} else {\n\t\t\tthis._currentReleaseNotes =\n\t\t\t\tthis._webviewWorkbenchService.openWebview(\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle,\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\ttryRestoreScrollPosition: true,\n\t\t\t\t\t\t\tenableFindWidget: true,\n\t\t\t\t\t\t\tdisableServiceWorker: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcontentOptions: {\n\t\t\t\t\t\t\tlocalResourceRoots: [],\n\t\t\t\t\t\t\tallowScripts: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t\textension: undefined,\n\t\t\t\t\t},\n\t\t\t\t\t\"releaseNotes\",\n\t\t\t\t\ttitle,\n\t\t\t\t\t{ group: ACTIVE_GROUP, preserveFocus: false },\n\t\t\t\t);\n\n\t\t\tthis._currentReleaseNotes.webview.onDidClickLink((uri) =>\n\t\t\t\tthis.onDidClickLink(URI.parse(uri)),\n\t\t\t);\n\n\t\t\tconst disposables = new DisposableStore();\n\t\t\tdisposables.add(\n\t\t\t\tthis._currentReleaseNotes.webview.onMessage((e) => {\n\t\t\t\t\tif (e.message.type === \"showReleaseNotes\") {\n\t\t\t\t\t\tthis._configurationService.updateValue(\n\t\t\t\t\t\t\t\"update.showReleaseNotes\",\n\t\t\t\t\t\t\te.message.value,\n\t\t\t\t\t\t);\n\t\t\t\t\t} else if (e.message.type === \"clickSetting\") {\n\t\t\t\t\t\tconst x =\n\t\t\t\t\t\t\tthis._currentReleaseNotes?.webview.container\n\t\t\t\t\t\t\t\t.offsetLeft + e.message.value.x;\n\t\t\t\t\t\tconst y =\n\t\t\t\t\t\t\tthis._currentReleaseNotes?.webview.container\n\t\t\t\t\t\t\t\t.offsetTop + e.message.value.y;\n\t\t\t\t\t\tthis._simpleSettingRenderer.updateSetting(\n\t\t\t\t\t\t\tURI.parse(e.message.value.uri),\n\t\t\t\t\t\t\tx,\n\t\t\t\t\t\t\ty,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tdisposables.add(\n\t\t\t\tthis._currentReleaseNotes.onWillDispose(() => {\n\t\t\t\t\tdisposables.dispose();\n\t\t\t\t\tthis._currentReleaseNotes = undefined;\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tthis._currentReleaseNotes.webview.setHtml(html);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate async loadReleaseNotes(\n\t\tversion: string,\n\t\tuseCurrentFile: boolean,\n\t): Promise<string> {\n\t\tconst match = /^(\\d+\\.\\d+)\\./.exec(version);\n\t\tif (!match) {\n\t\t\tthrow new Error(\"not found\");\n\t\t}\n\n\t\tconst versionLabel = match[1].replace(/\\./g, \"_\");\n\t\tconst baseUrl = \"https://code.visualstudio.com/raw\";\n\t\tconst url = `${baseUrl}/v${versionLabel}.md`;\n\t\tconst unassigned = nls.localize(\"unassigned\", \"unassigned\");\n\n\t\tconst escapeMdHtml = (text: string): string => {\n\t\t\treturn escape(text).replace(/\\\\/g, \"\\\\\\\\\");\n\t\t};\n\n\t\tconst patchKeybindings = (text: string): string => {\n\t\t\tconst kb = (match: string, kb: string) => {\n\t\t\t\tconst keybinding = this._keybindingService.lookupKeybinding(kb);\n\n\t\t\t\tif (!keybinding) {\n\t\t\t\t\treturn unassigned;\n\t\t\t\t}\n\n\t\t\t\treturn keybinding.getLabel() || unassigned;\n\t\t\t};\n\n\t\t\tconst kbstyle = (match: string, kb: string) => {\n\t\t\t\tconst keybinding = KeybindingParser.parseKeybinding(kb);\n\n\t\t\t\tif (!keybinding) {\n\t\t\t\t\treturn unassigned;\n\t\t\t\t}\n\n\t\t\t\tconst resolvedKeybindings =\n\t\t\t\t\tthis._keybindingService.resolveKeybinding(keybinding);\n\n\t\t\t\tif (resolvedKeybindings.length === 0) {\n\t\t\t\t\treturn unassigned;\n\t\t\t\t}\n\n\t\t\t\treturn resolvedKeybindings[0].getLabel() || unassigned;\n\t\t\t};\n\n\t\t\tconst kbCode = (match: string, binding: string) => {\n\t\t\t\tconst resolved = kb(match, binding);\n\t\t\t\treturn resolved\n\t\t\t\t\t? `<code title=\"${binding}\">${escapeMdHtml(resolved)}</code>`\n\t\t\t\t\t: resolved;\n\t\t\t};\n\n\t\t\tconst kbstyleCode = (match: string, binding: string) => {\n\t\t\t\tconst resolved = kbstyle(match, binding);\n\t\t\t\treturn resolved\n\t\t\t\t\t? `<code title=\"${binding}\">${escapeMdHtml(resolved)}</code>`\n\t\t\t\t\t: resolved;\n\t\t\t};\n\n\t\t\treturn text\n\t\t\t\t.replace(/`kb\\(([a-z.\\d-]+)\\)`/gi, kbCode)\n\t\t\t\t.replace(/`kbstyle\\(([^)]+)\\)`/gi, kbstyleCode)\n\t\t\t\t.replace(/kb\\(([a-z.\\d-]+)\\)/gi, (match, binding) =>\n\t\t\t\t\tescapeMarkdownSyntaxTokens(kb(match, binding)),\n\t\t\t\t)\n\t\t\t\t.replace(/kbstyle\\(([^)]+)\\)/gi, (match, binding) =>\n\t\t\t\t\tescapeMarkdownSyntaxTokens(kbstyle(match, binding)),\n\t\t\t\t);\n\t\t};\n\n\t\tconst fetchReleaseNotes = async () => {\n\t\t\tlet text;\n\t\t\ttry {\n\t\t\t\tif (useCurrentFile) {\n\t\t\t\t\tconst file = this._codeEditorService\n\t\t\t\t\t\t.getActiveCodeEditor()\n\t\t\t\t\t\t?.getModel()\n\t\t\t\t\t\t?.getValue();\n\t\t\t\t\ttext = file ? file.substring(file.indexOf(\"#\")) : undefined;\n\t\t\t\t} else {\n\t\t\t\t\ttext = await asTextOrError(\n\t\t\t\t\t\tawait this._requestService.request(\n\t\t\t\t\t\t\t{ url },\n\t\t\t\t\t\t\tCancellationToken.None,\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} catch {\n\t\t\t\tthrow new Error(\"Failed to fetch release notes\");\n\t\t\t}\n\n\t\t\tif (!text || (!/^#\\s/.test(text) && !useCurrentFile)) {\n\t\t\t\t// release notes always starts with `#` followed by whitespace, except when using the current file\n\t\t\t\tthrow new Error(\"Invalid release notes\");\n\t\t\t}\n\n\t\t\treturn patchKeybindings(text);\n\t\t};\n\n\t\t// Don't cache the current file\n\t\tif (useCurrentFile) {\n\t\t\treturn fetchReleaseNotes();\n\t\t}\n\t\tif (!this._releaseNotesCache.has(version)) {\n\t\t\tthis._releaseNotesCache.set(\n\t\t\t\tversion,\n\t\t\t\t(async () => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\treturn await fetchReleaseNotes();\n\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\tthis._releaseNotesCache.delete(version);\n\t\t\t\t\t\tthrow err;\n\t\t\t\t\t}\n\t\t\t\t})(),\n\t\t\t);\n\t\t}\n\n\t\treturn this._releaseNotesCache.get(version)!;\n\t}\n\n\tprivate async onDidClickLink(uri: URI) {\n\t\tif (uri.scheme === Schemas.codeSetting) {\n\t\t\t// handled in receive message\n\t\t} else {\n\t\t\tthis.addGAParameters(uri, \"ReleaseNotes\")\n\t\t\t\t.then((updated) =>\n\t\t\t\t\tthis._openerService.open(updated, {\n\t\t\t\t\t\tallowCommands: [\"workbench.action.openSettings\"],\n\t\t\t\t\t}),\n\t\t\t\t)\n\t\t\t\t.then(undefined, onUnexpectedError);\n\t\t}\n\t}\n\n\tprivate async addGAParameters(\n\t\turi: URI,\n\t\torigin: string,\n\t\texperiment = \"1\",\n\t): Promise<URI> {\n\t\tif (\n\t\t\tsupportsTelemetry(this._productService, this._environmentService) &&\n\t\t\tgetTelemetryLevel(this._configurationService) ===\n\t\t\t\tTelemetryLevel.USAGE\n\t\t) {\n\t\t\tif (\n\t\t\t\turi.scheme === \"https\" &&\n\t\t\t\turi.authority === \"code.visualstudio.com\"\n\t\t\t) {\n\t\t\t\treturn uri.with({\n\t\t\t\t\tquery: `${uri.query ? uri.query + \"&\" : \"\"}utm_source=VsCode&utm_medium=${encodeURIComponent(origin)}&utm_content=${encodeURIComponent(experiment)}`,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn uri;\n\t}\n\n\tprivate async renderBody(text: string) {\n\t\tconst nonce = generateUuid();\n\n\t\tconst content = await renderMarkdownDocument(\n\t\t\ttext,\n\t\t\tthis._extensionService,\n\t\t\tthis._languageService,\n\t\t\t{\n\t\t\t\tshouldSanitize: false,\n\t\t\t\tmarkedExtensions: [\n\t\t\t\t\t{\n\t\t\t\t\t\trenderer: {\n\t\t\t\t\t\t\thtml: this._simpleSettingRenderer.getHtmlRenderer(),\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t);\n\t\tconst colorMap = TokenizationRegistry.getColorMap();\n\t\tconst css = colorMap ? generateTokensCSSForColorMap(colorMap) : \"\";\n\t\tconst showReleaseNotes = Boolean(\n\t\t\tthis._configurationService.getValue<boolean>(\n\t\t\t\t\"update.showReleaseNotes\",\n\t\t\t),\n\t\t);\n\n\t\treturn `<!DOCTYPE html>\n\t\t<html>\n\t\t\t<head>\n\t\t\t\t<base href=\"https://code.visualstudio.com/raw/\">\n\t\t\t\t<meta http-equiv=\"Content-type\" content=\"text/html;charset=UTF-8\">\n\t\t\t\t<meta http-equiv=\"Content-Security-Policy\" content=\"default-src 'none'; img-src https: data:; media-src https:; style-src 'nonce-${nonce}' https://code.visualstudio.com; script-src 'nonce-${nonce}';\">\n\t\t\t\t<style nonce=\"${nonce}\">\n\t\t\t\t\t${DEFAULT_MARKDOWN_STYLES}\n\t\t\t\t\t${css}\n\n\t\t\t\t\t/* codesetting */\n\n\t\t\t\t\tcode:has(.codesetting)+code {\n\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t}\n\n\t\t\t\t\tcode:has(.codesetting) {\n\t\t\t\t\t\tbackground-color: var(--vscode-textPreformat-background);\n\t\t\t\t\t\tcolor: var(--vscode-textPreformat-foreground);\n\t\t\t\t\t\tpadding-left: 1px;\n\t\t\t\t\t\tmargin-right: 3px;\n\t\t\t\t\t\tpadding-right: 0px;\n\t\t\t\t\t}\n\n\t\t\t\t\tcode:has(.codesetting):focus {\n\t\t\t\t\t\tborder: 1px solid var(--vscode-button-border, transparent);\n\t\t\t\t\t}\n\n\t\t\t\t\t.codesetting {\n\t\t\t\t\t\tcolor: var(--vscode-textPreformat-foreground);\n\t\t\t\t\t\tpadding: 0px 1px 1px 0px;\n\t\t\t\t\t\tfont-size: 0px;\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\t\t\toutline-offset: 2px !important;\n\t\t\t\t\t\tbox-sizing: border-box;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\tdisplay: inline;\n\t\t\t\t\t\tmargin-right: 3px;\n\t\t\t\t\t}\n\t\t\t\t\t.codesetting svg {\n\t\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\t\ttext-align: center;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\tborder: 1px solid var(--vscode-button-secondaryBorder, transparent);\n\t\t\t\t\t\toutline: 1px solid transparent;\n\t\t\t\t\t\tline-height: 9px;\n\t\t\t\t\t\tmargin-bottom: -5px;\n\t\t\t\t\t\tpadding-left: 0px;\n\t\t\t\t\t\tpadding-top: 2px;\n\t\t\t\t\t\tpadding-bottom: 2px;\n\t\t\t\t\t\tpadding-right: 2px;\n\t\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\t\ttext-decoration: none;\n\t\t\t\t\t\ttext-rendering: auto;\n\t\t\t\t\t\ttext-transform: none;\n\t\t\t\t\t\t-webkit-font-smoothing: antialiased;\n\t\t\t\t\t\t-moz-osx-font-smoothing: grayscale;\n\t\t\t\t\t\tuser-select: none;\n\t\t\t\t\t\t-webkit-user-select: none;\n\t\t\t\t\t}\n\t\t\t\t\t.codesetting .setting-name {\n\t\t\t\t\t\tfont-size: 13px;\n\t\t\t\t\t\tpadding-left: 2px;\n\t\t\t\t\t\tpadding-right: 3px;\n\t\t\t\t\t\tpadding-top: 1px;\n\t\t\t\t\t\tpadding-bottom: 1px;\n\t\t\t\t\t\tmargin-left: -5px;\n\t\t\t\t\t\tmargin-top: -3px;\n\t\t\t\t\t}\n\t\t\t\t\t.codesetting:hover {\n\t\t\t\t\t\tcolor: var(--vscode-textPreformat-foreground) !important;\n\t\t\t\t\t\ttext-decoration: none !important;\n\t\t\t\t\t}\n\t\t\t\t\tcode:has(.codesetting):hover {\n\t\t\t\t\t\tfilter: brightness(140%);\n\t\t\t\t\t\ttext-decoration: none !important;\n\t\t\t\t\t}\n\t\t\t\t\t.codesetting:focus {\n\t\t\t\t\t\toutline: 0 !important;\n\t\t\t\t\t\ttext-decoration: none !important;\n\t\t\t\t\t\tcolor: var(--vscode-button-hoverForeground) !important;\n\t\t\t\t\t}\n\t\t\t\t\t.codesetting .separator {\n\t\t\t\t\t\twidth: 1px;\n\t\t\t\t\t\theight: 14px;\n\t\t\t\t\t\tmargin-bottom: -3px;\n\t\t\t\t\t\tdisplay: inline-block;\n\t\t\t\t\t\tbackground-color: var(--vscode-editor-background);\n\t\t\t\t\t\tfont-size: 12px;\n\t\t\t\t\t\tmargin-right: 8px;\n\t\t\t\t\t}\n\n\t\t\t\t\theader { display: flex; align-items: center; padding-top: 1em; }\n\t\t\t\t</style>\n\t\t\t</head>\n\t\t\t<body>\n\t\t\t\t${content}\n\t\t\t\t<script nonce=\"${nonce}\">\n\t\t\t\t\tconst vscode = acquireVsCodeApi();\n\t\t\t\t\tconst container = document.createElement('p');\n\t\t\t\t\tcontainer.style.display = 'flex';\n\t\t\t\t\tcontainer.style.alignItems = 'center';\n\n\t\t\t\t\tconst input = document.createElement('input');\n\t\t\t\t\tinput.type = 'checkbox';\n\t\t\t\t\tinput.id = 'showReleaseNotes';\n\t\t\t\t\tinput.checked = ${showReleaseNotes};\n\t\t\t\t\tcontainer.appendChild(input);\n\n\t\t\t\t\tconst label = document.createElement('label');\n\t\t\t\t\tlabel.htmlFor = 'showReleaseNotes';\n\t\t\t\t\tlabel.textContent = '${nls.localize(\"showOnUpdate\", \"Show release notes after an update\")}';\n\t\t\t\t\tcontainer.appendChild(label);\n\n\t\t\t\t\tconst beforeElement = document.querySelector(\"body > h1\")?.nextElementSibling;\n\t\t\t\t\tif (beforeElement) {\n\t\t\t\t\t\tdocument.body.insertBefore(container, beforeElement);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdocument.body.appendChild(container);\n\t\t\t\t\t}\n\n\t\t\t\t\twindow.addEventListener('message', event => {\n\t\t\t\t\t\tif (event.data.type === 'showReleaseNotes') {\n\t\t\t\t\t\t\tinput.checked = event.data.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\twindow.addEventListener('click', event => {\n\t\t\t\t\t\tconst href = event.target.href ?? event.target.parentElement?.href ?? event.target.parentElement?.parentElement?.href;\n\t\t\t\t\t\tif (href && (href.startsWith('${Schemas.codeSetting}'))) {\n\t\t\t\t\t\t\tvscode.postMessage({ type: 'clickSetting', value: { uri: href, x: event.clientX, y: event.clientY }});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\twindow.addEventListener('keypress', event => {\n\t\t\t\t\t\tif (event.keyCode === 13) {\n\t\t\t\t\t\t\tif (event.target.children.length > 0 && event.target.children[0].href) {\n\t\t\t\t\t\t\t\tconst clientRect = event.target.getBoundingClientRect();\n\t\t\t\t\t\t\t\tvscode.postMessage({ type: 'clickSetting', value: { uri: event.target.children[0].href, x: clientRect.right , y: clientRect.bottom }});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tinput.addEventListener('change', event => {\n\t\t\t\t\t\tvscode.postMessage({ type: 'showReleaseNotes', value: input.checked }, '*');\n\t\t\t\t\t});\n\t\t\t\t</script>\n\t\t\t</body>\n\t\t</html>`;\n\t}\n\n\tprivate onDidChangeConfiguration(e: IConfigurationChangeEvent): void {\n\t\tif (e.affectsConfiguration(\"update.showReleaseNotes\")) {\n\t\t\tthis.updateCheckboxWebview();\n\t\t}\n\t}\n\n\tprivate onDidChangeActiveWebviewEditor(\n\t\tinput: WebviewInput | undefined,\n\t): void {\n\t\tif (input && input === this._currentReleaseNotes) {\n\t\t\tthis.updateCheckboxWebview();\n\t\t}\n\t}\n\n\tprivate updateCheckboxWebview() {\n\t\tif (this._currentReleaseNotes) {\n\t\t\tthis._currentReleaseNotes.webview.postMessage({\n\t\t\t\ttype: \"showReleaseNotes\",\n\t\t\t\tvalue: this._configurationService.getValue<boolean>(\n\t\t\t\t\t\"update.showReleaseNotes\",\n\t\t\t\t),\n\t\t\t});\n\t\t}\n\t}\n}\n"],
  "mappings": "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",
  "names": ["match", "kb"]
}
