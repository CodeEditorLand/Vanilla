{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/notebook/browser/controller/executeActions.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Iterable } from \"../../../../../base/common/iterator.js\";\nimport { KeyCode, KeyMod } from \"../../../../../base/common/keyCodes.js\";\nimport { isEqual } from \"../../../../../base/common/resources.js\";\nimport { ThemeIcon } from \"../../../../../base/common/themables.js\";\nimport type { URI, UriComponents } from \"../../../../../base/common/uri.js\";\nimport type { ICodeEditor } from \"../../../../../editor/browser/editorBrowser.js\";\nimport { ILanguageService } from \"../../../../../editor/common/languages/language.js\";\nimport { localize, localize2 } from \"../../../../../nls.js\";\nimport {\n\tMenuId,\n\tMenuRegistry,\n\tregisterAction2,\n} from \"../../../../../platform/actions/common/actions.js\";\nimport { IConfigurationService } from \"../../../../../platform/configuration/common/configuration.js\";\nimport { ContextKeyExpr } from \"../../../../../platform/contextkey/common/contextkey.js\";\nimport type { ServicesAccessor } from \"../../../../../platform/instantiation/common/instantiation.js\";\nimport { EditorsOrder } from \"../../../../common/editor.js\";\nimport { IEditorGroupsService } from \"../../../../services/editor/common/editorGroupsService.js\";\nimport { IEditorService } from \"../../../../services/editor/common/editorService.js\";\nimport { IDebugService } from \"../../../debug/common/debug.js\";\nimport { CTX_INLINE_CHAT_FOCUSED } from \"../../../inlineChat/common/inlineChat.js\";\nimport {\n\tCellKind,\n\tCellUri,\n\tNotebookSetting,\n} from \"../../common/notebookCommon.js\";\nimport {\n\tNOTEBOOK_CELL_EXECUTING,\n\tNOTEBOOK_CELL_EXECUTION_STATE,\n\tNOTEBOOK_CELL_LIST_FOCUSED,\n\tNOTEBOOK_CELL_TYPE,\n\tNOTEBOOK_HAS_RUNNING_CELL,\n\tNOTEBOOK_HAS_SOMETHING_RUNNING,\n\tNOTEBOOK_INTERRUPTIBLE_KERNEL,\n\tNOTEBOOK_IS_ACTIVE_EDITOR,\n\tNOTEBOOK_KERNEL_COUNT,\n\tNOTEBOOK_KERNEL_SOURCE_COUNT,\n\tNOTEBOOK_LAST_CELL_FAILED,\n\tNOTEBOOK_MISSING_KERNEL_EXTENSION,\n} from \"../../common/notebookContextKeys.js\";\nimport { NotebookEditorInput } from \"../../common/notebookEditorInput.js\";\nimport { INotebookExecutionStateService } from \"../../common/notebookExecutionStateService.js\";\nimport {\n\tCellEditState,\n\tCellFocusMode,\n\tEXECUTE_CELL_COMMAND_ID,\n\ttype IFocusNotebookCellOptions,\n\tScrollToRevealBehavior,\n} from \"../notebookBrowser.js\";\nimport * as icons from \"../notebookIcons.js\";\nimport { insertCell } from \"./cellOperations.js\";\nimport { CTX_NOTEBOOK_CELL_CHAT_FOCUSED } from \"./chat/notebookChatContext.js\";\nimport { NotebookChatController } from \"./chat/notebookChatController.js\";\nimport {\n\tCELL_TITLE_CELL_GROUP_ID,\n\tCellToolbarOrder,\n\ttype INotebookActionContext,\n\ttype INotebookCellActionContext,\n\ttype INotebookCellToolbarActionContext,\n\ttype INotebookCommandContext,\n\tNOTEBOOK_EDITOR_WIDGET_ACTION_WEIGHT,\n\tNotebookAction,\n\tNotebookCellAction,\n\tNotebookMultiCellAction,\n\tcellExecutionArgs,\n\texecuteNotebookCondition,\n\tgetContextFromActiveEditor,\n\tgetContextFromUri,\n\tparseMultiCellExecutionArgs,\n} from \"./coreActions.js\";\n\nconst EXECUTE_NOTEBOOK_COMMAND_ID = \"notebook.execute\";\nconst CANCEL_NOTEBOOK_COMMAND_ID = \"notebook.cancelExecution\";\nconst INTERRUPT_NOTEBOOK_COMMAND_ID = \"notebook.interruptExecution\";\nconst CANCEL_CELL_COMMAND_ID = \"notebook.cell.cancelExecution\";\nconst EXECUTE_CELL_FOCUS_CONTAINER_COMMAND_ID =\n\t\"notebook.cell.executeAndFocusContainer\";\nconst EXECUTE_CELL_SELECT_BELOW = \"notebook.cell.executeAndSelectBelow\";\nconst EXECUTE_CELL_INSERT_BELOW = \"notebook.cell.executeAndInsertBelow\";\nconst EXECUTE_CELL_AND_BELOW = \"notebook.cell.executeCellAndBelow\";\nconst EXECUTE_CELLS_ABOVE = \"notebook.cell.executeCellsAbove\";\nconst RENDER_ALL_MARKDOWN_CELLS = \"notebook.renderAllMarkdownCells\";\nconst REVEAL_RUNNING_CELL = \"notebook.revealRunningCell\";\nconst REVEAL_LAST_FAILED_CELL = \"notebook.revealLastFailedCell\";\n\n// If this changes, update getCodeCellExecutionContextKeyService to match\nexport const executeCondition = ContextKeyExpr.and(\n\tNOTEBOOK_CELL_TYPE.isEqualTo(\"code\"),\n\tContextKeyExpr.or(\n\t\tContextKeyExpr.greater(NOTEBOOK_KERNEL_COUNT.key, 0),\n\t\tContextKeyExpr.greater(NOTEBOOK_KERNEL_SOURCE_COUNT.key, 0),\n\t\tNOTEBOOK_MISSING_KERNEL_EXTENSION,\n\t),\n);\n\nexport const executeThisCellCondition = ContextKeyExpr.and(\n\texecuteCondition,\n\tNOTEBOOK_CELL_EXECUTING.toNegated(),\n);\n\nfunction renderAllMarkdownCells(context: INotebookActionContext): void {\n\tfor (let i = 0; i < context.notebookEditor.getLength(); i++) {\n\t\tconst cell = context.notebookEditor.cellAt(i);\n\n\t\tif (cell.cellKind === CellKind.Markup) {\n\t\t\tcell.updateEditState(\n\t\t\t\tCellEditState.Preview,\n\t\t\t\t\"renderAllMarkdownCells\",\n\t\t\t);\n\t\t}\n\t}\n}\n\nasync function runCell(\n\teditorGroupsService: IEditorGroupsService,\n\tcontext: INotebookActionContext,\n): Promise<void> {\n\tconst group = editorGroupsService.activeGroup;\n\n\tif (group) {\n\t\tif (group.activeEditor) {\n\t\t\tgroup.pinEditor(group.activeEditor);\n\t\t}\n\t}\n\n\tif (context.ui && context.cell) {\n\t\tawait context.notebookEditor.executeNotebookCells(\n\t\t\tIterable.single(context.cell),\n\t\t);\n\t\tif (context.autoReveal) {\n\t\t\tconst cellIndex = context.notebookEditor.getCellIndex(context.cell);\n\t\t\tcontext.notebookEditor.revealCellRangeInView({\n\t\t\t\tstart: cellIndex,\n\t\t\t\tend: cellIndex + 1,\n\t\t\t});\n\t\t}\n\t} else if (context.selectedCells?.length || context.cell) {\n\t\tconst selectedCells = context.selectedCells?.length\n\t\t\t? context.selectedCells\n\t\t\t: [context.cell!];\n\t\tawait context.notebookEditor.executeNotebookCells(selectedCells);\n\t\tconst firstCell = selectedCells[0];\n\n\t\tif (firstCell && context.autoReveal) {\n\t\t\tconst cellIndex = context.notebookEditor.getCellIndex(firstCell);\n\t\t\tcontext.notebookEditor.revealCellRangeInView({\n\t\t\t\tstart: cellIndex,\n\t\t\t\tend: cellIndex + 1,\n\t\t\t});\n\t\t}\n\t}\n\n\tlet foundEditor: ICodeEditor | undefined;\n\tfor (const [, codeEditor] of context.notebookEditor.codeEditors) {\n\t\tif (\n\t\t\tisEqual(\n\t\t\t\tcodeEditor.getModel()?.uri,\n\t\t\t\t(context.cell ?? context.selectedCells?.[0])?.uri,\n\t\t\t)\n\t\t) {\n\t\t\tfoundEditor = codeEditor;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (!foundEditor) {\n\t\treturn;\n\t}\n}\n\nregisterAction2(\n\tclass RenderAllMarkdownCellsAction extends NotebookAction {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: RENDER_ALL_MARKDOWN_CELLS,\n\t\t\t\ttitle: localize(\n\t\t\t\t\t\"notebookActions.renderMarkdown\",\n\t\t\t\t\t\"Render All Markdown Cells\",\n\t\t\t\t),\n\t\t\t});\n\t\t}\n\n\t\tasync runWithContext(\n\t\t\taccessor: ServicesAccessor,\n\t\t\tcontext: INotebookActionContext,\n\t\t): Promise<void> {\n\t\t\trenderAllMarkdownCells(context);\n\t\t}\n\t},\n);\n\nregisterAction2(\n\tclass ExecuteNotebookAction extends NotebookAction {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: EXECUTE_NOTEBOOK_COMMAND_ID,\n\t\t\t\ttitle: localize(\"notebookActions.executeNotebook\", \"Run All\"),\n\t\t\t\ticon: icons.executeAllIcon,\n\t\t\t\tmetadata: {\n\t\t\t\t\tdescription: localize(\n\t\t\t\t\t\t\"notebookActions.executeNotebook\",\n\t\t\t\t\t\t\"Run All\",\n\t\t\t\t\t),\n\t\t\t\t\targs: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"uri\",\n\t\t\t\t\t\t\tdescription: \"The document uri\",\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\tmenu: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.EditorTitle,\n\t\t\t\t\t\torder: -1,\n\t\t\t\t\t\tgroup: \"navigation\",\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\tNOTEBOOK_IS_ACTIVE_EDITOR,\n\t\t\t\t\t\t\texecuteNotebookCondition,\n\t\t\t\t\t\t\tContextKeyExpr.or(\n\t\t\t\t\t\t\t\tNOTEBOOK_INTERRUPTIBLE_KERNEL.toNegated(),\n\t\t\t\t\t\t\t\tNOTEBOOK_HAS_SOMETHING_RUNNING.toNegated(),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tContextKeyExpr.notEquals(\n\t\t\t\t\t\t\t\t\"config.notebook.globalToolbar\",\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.NotebookToolbar,\n\t\t\t\t\t\torder: -1,\n\t\t\t\t\t\tgroup: \"navigation/execute\",\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\texecuteNotebookCondition,\n\t\t\t\t\t\t\tContextKeyExpr.or(\n\t\t\t\t\t\t\t\tNOTEBOOK_INTERRUPTIBLE_KERNEL.toNegated(),\n\t\t\t\t\t\t\t\tNOTEBOOK_HAS_SOMETHING_RUNNING.toNegated(),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tContextKeyExpr.and(\n\t\t\t\t\t\t\t\tNOTEBOOK_HAS_SOMETHING_RUNNING,\n\t\t\t\t\t\t\t\tNOTEBOOK_INTERRUPTIBLE_KERNEL.toNegated(),\n\t\t\t\t\t\t\t)?.negate(),\n\t\t\t\t\t\t\tContextKeyExpr.equals(\n\t\t\t\t\t\t\t\t\"config.notebook.globalToolbar\",\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t}\n\n\t\toverride getEditorContextFromArgsOrActive(\n\t\t\taccessor: ServicesAccessor,\n\t\t\tcontext?: UriComponents,\n\t\t): INotebookActionContext | undefined {\n\t\t\treturn (\n\t\t\t\tgetContextFromUri(accessor, context) ??\n\t\t\t\tgetContextFromActiveEditor(accessor.get(IEditorService))\n\t\t\t);\n\t\t}\n\n\t\tasync runWithContext(\n\t\t\taccessor: ServicesAccessor,\n\t\t\tcontext: INotebookActionContext,\n\t\t): Promise<void> {\n\t\t\trenderAllMarkdownCells(context);\n\n\t\t\tconst editorService = accessor.get(IEditorService);\n\t\t\tconst editor = editorService\n\t\t\t\t.getEditors(EditorsOrder.MOST_RECENTLY_ACTIVE)\n\t\t\t\t.find(\n\t\t\t\t\t(editor) =>\n\t\t\t\t\t\teditor.editor instanceof NotebookEditorInput &&\n\t\t\t\t\t\teditor.editor.viewType ===\n\t\t\t\t\t\t\tcontext.notebookEditor.textModel.viewType &&\n\t\t\t\t\t\teditor.editor.resource.toString() ===\n\t\t\t\t\t\t\tcontext.notebookEditor.textModel.uri.toString(),\n\t\t\t\t);\n\t\t\tconst editorGroupService = accessor.get(IEditorGroupsService);\n\n\t\t\tif (editor) {\n\t\t\t\tconst group = editorGroupService.getGroup(editor.groupId);\n\t\t\t\tgroup?.pinEditor(editor.editor);\n\t\t\t}\n\n\t\t\treturn context.notebookEditor.executeNotebookCells();\n\t\t}\n\t},\n);\n\nregisterAction2(\n\tclass ExecuteCell extends NotebookMultiCellAction {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: EXECUTE_CELL_COMMAND_ID,\n\t\t\t\tprecondition: executeThisCellCondition,\n\t\t\t\ttitle: localize(\"notebookActions.execute\", \"Execute Cell\"),\n\t\t\t\tkeybinding: {\n\t\t\t\t\twhen: ContextKeyExpr.or(\n\t\t\t\t\t\tNOTEBOOK_CELL_LIST_FOCUSED,\n\t\t\t\t\t\tContextKeyExpr.and(\n\t\t\t\t\t\t\tCTX_NOTEBOOK_CELL_CHAT_FOCUSED,\n\t\t\t\t\t\t\tCTX_INLINE_CHAT_FOCUSED,\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t\tprimary: KeyMod.WinCtrl | KeyCode.Enter,\n\t\t\t\t\twin: {\n\t\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.Enter,\n\t\t\t\t\t},\n\t\t\t\t\tweight: NOTEBOOK_EDITOR_WIDGET_ACTION_WEIGHT,\n\t\t\t\t},\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MenuId.NotebookCellExecutePrimary,\n\t\t\t\t\twhen: executeThisCellCondition,\n\t\t\t\t\tgroup: \"inline\",\n\t\t\t\t},\n\t\t\t\tmetadata: {\n\t\t\t\t\tdescription: localize(\n\t\t\t\t\t\t\"notebookActions.execute\",\n\t\t\t\t\t\t\"Execute Cell\",\n\t\t\t\t\t),\n\t\t\t\t\targs: cellExecutionArgs,\n\t\t\t\t},\n\t\t\t\ticon: icons.executeIcon,\n\t\t\t});\n\t\t}\n\n\t\toverride parseArgs(\n\t\t\taccessor: ServicesAccessor,\n\t\t\t...args: any[]\n\t\t): INotebookCommandContext | undefined {\n\t\t\treturn parseMultiCellExecutionArgs(accessor, ...args);\n\t\t}\n\n\t\tasync runWithContext(\n\t\t\taccessor: ServicesAccessor,\n\t\t\tcontext:\n\t\t\t\t| INotebookCommandContext\n\t\t\t\t| INotebookCellToolbarActionContext,\n\t\t): Promise<void> {\n\t\t\tconst editorGroupsService = accessor.get(IEditorGroupsService);\n\n\t\t\tif (context.ui) {\n\t\t\t\tawait context.notebookEditor.focusNotebookCell(\n\t\t\t\t\tcontext.cell,\n\t\t\t\t\t\"container\",\n\t\t\t\t\t{ skipReveal: true },\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst chatController = NotebookChatController.get(\n\t\t\t\tcontext.notebookEditor,\n\t\t\t);\n\t\t\tconst editingCell = chatController?.getEditingCell();\n\t\t\tif (chatController?.hasFocus() && editingCell) {\n\t\t\t\tconst group = editorGroupsService.activeGroup;\n\n\t\t\t\tif (group) {\n\t\t\t\t\tif (group.activeEditor) {\n\t\t\t\t\t\tgroup.pinEditor(group.activeEditor);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tawait context.notebookEditor.executeNotebookCells([\n\t\t\t\t\teditingCell,\n\t\t\t\t]);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait runCell(editorGroupsService, context);\n\t\t}\n\t},\n);\n\nregisterAction2(\n\tclass ExecuteAboveCells extends NotebookMultiCellAction {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: EXECUTE_CELLS_ABOVE,\n\t\t\t\tprecondition: executeCondition,\n\t\t\t\ttitle: localize(\n\t\t\t\t\t\"notebookActions.executeAbove\",\n\t\t\t\t\t\"Execute Above Cells\",\n\t\t\t\t),\n\t\t\t\tmenu: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.NotebookCellExecute,\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\texecuteCondition,\n\t\t\t\t\t\t\tContextKeyExpr.equals(\n\t\t\t\t\t\t\t\t`config.${NotebookSetting.consolidatedRunButton}`,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.NotebookCellTitle,\n\t\t\t\t\t\torder: CellToolbarOrder.ExecuteAboveCells,\n\t\t\t\t\t\tgroup: CELL_TITLE_CELL_GROUP_ID,\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\texecuteCondition,\n\t\t\t\t\t\t\tContextKeyExpr.equals(\n\t\t\t\t\t\t\t\t`config.${NotebookSetting.consolidatedRunButton}`,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\ticon: icons.executeAboveIcon,\n\t\t\t});\n\t\t}\n\n\t\toverride parseArgs(\n\t\t\taccessor: ServicesAccessor,\n\t\t\t...args: any[]\n\t\t): INotebookCommandContext | undefined {\n\t\t\treturn parseMultiCellExecutionArgs(accessor, ...args);\n\t\t}\n\n\t\tasync runWithContext(\n\t\t\taccessor: ServicesAccessor,\n\t\t\tcontext:\n\t\t\t\t| INotebookCommandContext\n\t\t\t\t| INotebookCellToolbarActionContext,\n\t\t): Promise<void> {\n\t\t\tlet endCellIdx: number | undefined;\n\t\t\tif (context.ui) {\n\t\t\t\tendCellIdx = context.notebookEditor.getCellIndex(context.cell);\n\t\t\t\tawait context.notebookEditor.focusNotebookCell(\n\t\t\t\t\tcontext.cell,\n\t\t\t\t\t\"container\",\n\t\t\t\t\t{ skipReveal: true },\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tendCellIdx = Math.min(\n\t\t\t\t\t...context.selectedCells.map((cell) =>\n\t\t\t\t\t\tcontext.notebookEditor.getCellIndex(cell),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (typeof endCellIdx === \"number\") {\n\t\t\t\tconst range = { start: 0, end: endCellIdx };\n\t\t\t\tconst cells = context.notebookEditor.getCellsInRange(range);\n\t\t\t\tcontext.notebookEditor.executeNotebookCells(cells);\n\t\t\t}\n\t\t}\n\t},\n);\n\nregisterAction2(\n\tclass ExecuteCellAndBelow extends NotebookMultiCellAction {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: EXECUTE_CELL_AND_BELOW,\n\t\t\t\tprecondition: executeCondition,\n\t\t\t\ttitle: localize(\n\t\t\t\t\t\"notebookActions.executeBelow\",\n\t\t\t\t\t\"Execute Cell and Below\",\n\t\t\t\t),\n\t\t\t\tmenu: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.NotebookCellExecute,\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\texecuteCondition,\n\t\t\t\t\t\t\tContextKeyExpr.equals(\n\t\t\t\t\t\t\t\t`config.${NotebookSetting.consolidatedRunButton}`,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.NotebookCellTitle,\n\t\t\t\t\t\torder: CellToolbarOrder.ExecuteCellAndBelow,\n\t\t\t\t\t\tgroup: CELL_TITLE_CELL_GROUP_ID,\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\texecuteCondition,\n\t\t\t\t\t\t\tContextKeyExpr.equals(\n\t\t\t\t\t\t\t\t`config.${NotebookSetting.consolidatedRunButton}`,\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\ticon: icons.executeBelowIcon,\n\t\t\t});\n\t\t}\n\n\t\toverride parseArgs(\n\t\t\taccessor: ServicesAccessor,\n\t\t\t...args: any[]\n\t\t): INotebookCommandContext | undefined {\n\t\t\treturn parseMultiCellExecutionArgs(accessor, ...args);\n\t\t}\n\n\t\tasync runWithContext(\n\t\t\taccessor: ServicesAccessor,\n\t\t\tcontext:\n\t\t\t\t| INotebookCommandContext\n\t\t\t\t| INotebookCellToolbarActionContext,\n\t\t): Promise<void> {\n\t\t\tlet startCellIdx: number | undefined;\n\t\t\tif (context.ui) {\n\t\t\t\tstartCellIdx = context.notebookEditor.getCellIndex(\n\t\t\t\t\tcontext.cell,\n\t\t\t\t);\n\t\t\t\tawait context.notebookEditor.focusNotebookCell(\n\t\t\t\t\tcontext.cell,\n\t\t\t\t\t\"container\",\n\t\t\t\t\t{ skipReveal: true },\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tstartCellIdx = Math.min(\n\t\t\t\t\t...context.selectedCells.map((cell) =>\n\t\t\t\t\t\tcontext.notebookEditor.getCellIndex(cell),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (typeof startCellIdx === \"number\") {\n\t\t\t\tconst range = {\n\t\t\t\t\tstart: startCellIdx,\n\t\t\t\t\tend: context.notebookEditor.getLength(),\n\t\t\t\t};\n\t\t\t\tconst cells = context.notebookEditor.getCellsInRange(range);\n\t\t\t\tcontext.notebookEditor.executeNotebookCells(cells);\n\t\t\t}\n\t\t}\n\t},\n);\n\nregisterAction2(\n\tclass ExecuteCellFocusContainer extends NotebookMultiCellAction {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: EXECUTE_CELL_FOCUS_CONTAINER_COMMAND_ID,\n\t\t\t\tprecondition: executeThisCellCondition,\n\t\t\t\ttitle: localize(\n\t\t\t\t\t\"notebookActions.executeAndFocusContainer\",\n\t\t\t\t\t\"Execute Cell and Focus Container\",\n\t\t\t\t),\n\t\t\t\tmetadata: {\n\t\t\t\t\tdescription: localize(\n\t\t\t\t\t\t\"notebookActions.executeAndFocusContainer\",\n\t\t\t\t\t\t\"Execute Cell and Focus Container\",\n\t\t\t\t\t),\n\t\t\t\t\targs: cellExecutionArgs,\n\t\t\t\t},\n\t\t\t\ticon: icons.executeIcon,\n\t\t\t});\n\t\t}\n\n\t\toverride parseArgs(\n\t\t\taccessor: ServicesAccessor,\n\t\t\t...args: any[]\n\t\t): INotebookCommandContext | undefined {\n\t\t\treturn parseMultiCellExecutionArgs(accessor, ...args);\n\t\t}\n\n\t\tasync runWithContext(\n\t\t\taccessor: ServicesAccessor,\n\t\t\tcontext:\n\t\t\t\t| INotebookCommandContext\n\t\t\t\t| INotebookCellToolbarActionContext,\n\t\t): Promise<void> {\n\t\t\tconst editorGroupsService = accessor.get(IEditorGroupsService);\n\n\t\t\tif (context.ui) {\n\t\t\t\tawait context.notebookEditor.focusNotebookCell(\n\t\t\t\t\tcontext.cell,\n\t\t\t\t\t\"container\",\n\t\t\t\t\t{ skipReveal: true },\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconst firstCell = context.selectedCells[0];\n\n\t\t\t\tif (firstCell) {\n\t\t\t\t\tawait context.notebookEditor.focusNotebookCell(\n\t\t\t\t\t\tfirstCell,\n\t\t\t\t\t\t\"container\",\n\t\t\t\t\t\t{ skipReveal: true },\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tawait runCell(editorGroupsService, context);\n\t\t}\n\t},\n);\n\nconst cellCancelCondition = ContextKeyExpr.or(\n\tContextKeyExpr.equals(NOTEBOOK_CELL_EXECUTION_STATE.key, \"executing\"),\n\tContextKeyExpr.equals(NOTEBOOK_CELL_EXECUTION_STATE.key, \"pending\"),\n);\n\nregisterAction2(\n\tclass CancelExecuteCell extends NotebookMultiCellAction {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: CANCEL_CELL_COMMAND_ID,\n\t\t\t\tprecondition: cellCancelCondition,\n\t\t\t\ttitle: localize(\n\t\t\t\t\t\"notebookActions.cancel\",\n\t\t\t\t\t\"Stop Cell Execution\",\n\t\t\t\t),\n\t\t\t\ticon: icons.stopIcon,\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MenuId.NotebookCellExecutePrimary,\n\t\t\t\t\twhen: cellCancelCondition,\n\t\t\t\t\tgroup: \"inline\",\n\t\t\t\t},\n\t\t\t\tmetadata: {\n\t\t\t\t\tdescription: localize(\n\t\t\t\t\t\t\"notebookActions.cancel\",\n\t\t\t\t\t\t\"Stop Cell Execution\",\n\t\t\t\t\t),\n\t\t\t\t\targs: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"options\",\n\t\t\t\t\t\t\tdescription: \"The cell range options\",\n\t\t\t\t\t\t\tschema: {\n\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\trequired: [\"ranges\"],\n\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\tranges: {\n\t\t\t\t\t\t\t\t\t\ttype: \"array\",\n\t\t\t\t\t\t\t\t\t\titems: [\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\t\t\t\trequired: [\"start\", \"end\"],\n\t\t\t\t\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tstart: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t\tend: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttype: \"number\",\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tdocument: {\n\t\t\t\t\t\t\t\t\t\ttype: \"object\",\n\t\t\t\t\t\t\t\t\t\tdescription: \"The document uri\",\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\toverride parseArgs(\n\t\t\taccessor: ServicesAccessor,\n\t\t\t...args: any[]\n\t\t): INotebookCommandContext | undefined {\n\t\t\treturn parseMultiCellExecutionArgs(accessor, ...args);\n\t\t}\n\n\t\tasync runWithContext(\n\t\t\taccessor: ServicesAccessor,\n\t\t\tcontext:\n\t\t\t\t| INotebookCommandContext\n\t\t\t\t| INotebookCellToolbarActionContext,\n\t\t): Promise<void> {\n\t\t\tif (context.ui) {\n\t\t\t\tawait context.notebookEditor.focusNotebookCell(\n\t\t\t\t\tcontext.cell,\n\t\t\t\t\t\"container\",\n\t\t\t\t\t{ skipReveal: true },\n\t\t\t\t);\n\t\t\t\treturn context.notebookEditor.cancelNotebookCells(\n\t\t\t\t\tIterable.single(context.cell),\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn context.notebookEditor.cancelNotebookCells(\n\t\t\t\t\tcontext.selectedCells,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t},\n);\n\nregisterAction2(\n\tclass ExecuteCellSelectBelow extends NotebookCellAction {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: EXECUTE_CELL_SELECT_BELOW,\n\t\t\t\tprecondition: ContextKeyExpr.or(\n\t\t\t\t\texecuteThisCellCondition,\n\t\t\t\t\tNOTEBOOK_CELL_TYPE.isEqualTo(\"markup\"),\n\t\t\t\t),\n\t\t\t\ttitle: localize(\n\t\t\t\t\t\"notebookActions.executeAndSelectBelow\",\n\t\t\t\t\t\"Execute Notebook Cell and Select Below\",\n\t\t\t\t),\n\t\t\t\tkeybinding: {\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tNOTEBOOK_CELL_LIST_FOCUSED,\n\t\t\t\t\t\tCTX_INLINE_CHAT_FOCUSED.negate(),\n\t\t\t\t\t),\n\t\t\t\t\tprimary: KeyMod.Shift | KeyCode.Enter,\n\t\t\t\t\tweight: NOTEBOOK_EDITOR_WIDGET_ACTION_WEIGHT,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tasync runWithContext(\n\t\t\taccessor: ServicesAccessor,\n\t\t\tcontext: INotebookCellActionContext,\n\t\t): Promise<void> {\n\t\t\tconst editorGroupsService = accessor.get(IEditorGroupsService);\n\t\t\tconst idx = context.notebookEditor.getCellIndex(context.cell);\n\t\t\tif (typeof idx !== \"number\") {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst languageService = accessor.get(ILanguageService);\n\n\t\t\tconst config = accessor.get(IConfigurationService);\n\t\t\tconst scrollBehavior = config.getValue(\n\t\t\t\tNotebookSetting.scrollToRevealCell,\n\t\t\t);\n\t\t\tlet focusOptions: IFocusNotebookCellOptions;\n\t\t\tif (scrollBehavior === \"none\") {\n\t\t\t\tfocusOptions = { skipReveal: true };\n\t\t\t} else {\n\t\t\t\tfocusOptions = {\n\t\t\t\t\trevealBehavior:\n\t\t\t\t\t\tscrollBehavior === \"fullCell\"\n\t\t\t\t\t\t\t? ScrollToRevealBehavior.fullCell\n\t\t\t\t\t\t\t: ScrollToRevealBehavior.firstLine,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tif (context.cell.cellKind === CellKind.Markup) {\n\t\t\t\tconst nextCell = context.notebookEditor.cellAt(idx + 1);\n\t\t\t\tcontext.cell.updateEditState(\n\t\t\t\t\tCellEditState.Preview,\n\t\t\t\t\tEXECUTE_CELL_SELECT_BELOW,\n\t\t\t\t);\n\t\t\t\tif (nextCell) {\n\t\t\t\t\tawait context.notebookEditor.focusNotebookCell(\n\t\t\t\t\t\tnextCell,\n\t\t\t\t\t\t\"container\",\n\t\t\t\t\t\tfocusOptions,\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tconst newCell = insertCell(\n\t\t\t\t\t\tlanguageService,\n\t\t\t\t\t\tcontext.notebookEditor,\n\t\t\t\t\t\tidx,\n\t\t\t\t\t\tCellKind.Markup,\n\t\t\t\t\t\t\"below\",\n\t\t\t\t\t);\n\n\t\t\t\t\tif (newCell) {\n\t\t\t\t\t\tawait context.notebookEditor.focusNotebookCell(\n\t\t\t\t\t\t\tnewCell,\n\t\t\t\t\t\t\t\"editor\",\n\t\t\t\t\t\t\tfocusOptions,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t} else {\n\t\t\t\tconst nextCell = context.notebookEditor.cellAt(idx + 1);\n\t\t\t\tif (nextCell) {\n\t\t\t\t\tawait context.notebookEditor.focusNotebookCell(\n\t\t\t\t\t\tnextCell,\n\t\t\t\t\t\t\"container\",\n\t\t\t\t\t\tfocusOptions,\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tconst newCell = insertCell(\n\t\t\t\t\t\tlanguageService,\n\t\t\t\t\t\tcontext.notebookEditor,\n\t\t\t\t\t\tidx,\n\t\t\t\t\t\tCellKind.Code,\n\t\t\t\t\t\t\"below\",\n\t\t\t\t\t);\n\n\t\t\t\t\tif (newCell) {\n\t\t\t\t\t\tawait context.notebookEditor.focusNotebookCell(\n\t\t\t\t\t\t\tnewCell,\n\t\t\t\t\t\t\t\"editor\",\n\t\t\t\t\t\t\tfocusOptions,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn runCell(editorGroupsService, context);\n\t\t\t}\n\t\t}\n\t},\n);\n\nregisterAction2(\n\tclass ExecuteCellInsertBelow extends NotebookCellAction {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: EXECUTE_CELL_INSERT_BELOW,\n\t\t\t\tprecondition: ContextKeyExpr.or(\n\t\t\t\t\texecuteThisCellCondition,\n\t\t\t\t\tNOTEBOOK_CELL_TYPE.isEqualTo(\"markup\"),\n\t\t\t\t),\n\t\t\t\ttitle: localize(\n\t\t\t\t\t\"notebookActions.executeAndInsertBelow\",\n\t\t\t\t\t\"Execute Notebook Cell and Insert Below\",\n\t\t\t\t),\n\t\t\t\tkeybinding: {\n\t\t\t\t\twhen: NOTEBOOK_CELL_LIST_FOCUSED,\n\t\t\t\t\tprimary: KeyMod.Alt | KeyCode.Enter,\n\t\t\t\t\tweight: NOTEBOOK_EDITOR_WIDGET_ACTION_WEIGHT,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tasync runWithContext(\n\t\t\taccessor: ServicesAccessor,\n\t\t\tcontext: INotebookCellActionContext,\n\t\t): Promise<void> {\n\t\t\tconst editorGroupsService = accessor.get(IEditorGroupsService);\n\t\t\tconst idx = context.notebookEditor.getCellIndex(context.cell);\n\t\t\tconst languageService = accessor.get(ILanguageService);\n\t\t\tconst newFocusMode =\n\t\t\t\tcontext.cell.focusMode === CellFocusMode.Editor\n\t\t\t\t\t? \"editor\"\n\t\t\t\t\t: \"container\";\n\n\t\t\tconst newCell = insertCell(\n\t\t\t\tlanguageService,\n\t\t\t\tcontext.notebookEditor,\n\t\t\t\tidx,\n\t\t\t\tcontext.cell.cellKind,\n\t\t\t\t\"below\",\n\t\t\t);\n\t\t\tif (newCell) {\n\t\t\t\tawait context.notebookEditor.focusNotebookCell(\n\t\t\t\t\tnewCell,\n\t\t\t\t\tnewFocusMode,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (context.cell.cellKind === CellKind.Markup) {\n\t\t\t\tcontext.cell.updateEditState(\n\t\t\t\t\tCellEditState.Preview,\n\t\t\t\t\tEXECUTE_CELL_INSERT_BELOW,\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\trunCell(editorGroupsService, context);\n\t\t\t}\n\t\t}\n\t},\n);\n\nclass CancelNotebook extends NotebookAction {\n\toverride getEditorContextFromArgsOrActive(\n\t\taccessor: ServicesAccessor,\n\t\tcontext?: UriComponents,\n\t): INotebookActionContext | undefined {\n\t\treturn (\n\t\t\tgetContextFromUri(accessor, context) ??\n\t\t\tgetContextFromActiveEditor(accessor.get(IEditorService))\n\t\t);\n\t}\n\n\tasync runWithContext(\n\t\taccessor: ServicesAccessor,\n\t\tcontext: INotebookActionContext,\n\t): Promise<void> {\n\t\treturn context.notebookEditor.cancelNotebookCells();\n\t}\n}\n\nregisterAction2(\n\tclass CancelAllNotebook extends CancelNotebook {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: CANCEL_NOTEBOOK_COMMAND_ID,\n\t\t\t\ttitle: localize2(\n\t\t\t\t\t\"notebookActions.cancelNotebook\",\n\t\t\t\t\t\"Stop Execution\",\n\t\t\t\t),\n\t\t\t\ticon: icons.stopIcon,\n\t\t\t\tmenu: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.EditorTitle,\n\t\t\t\t\t\torder: -1,\n\t\t\t\t\t\tgroup: \"navigation\",\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\tNOTEBOOK_IS_ACTIVE_EDITOR,\n\t\t\t\t\t\t\tNOTEBOOK_HAS_SOMETHING_RUNNING,\n\t\t\t\t\t\t\tNOTEBOOK_INTERRUPTIBLE_KERNEL.toNegated(),\n\t\t\t\t\t\t\tContextKeyExpr.notEquals(\n\t\t\t\t\t\t\t\t\"config.notebook.globalToolbar\",\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.NotebookToolbar,\n\t\t\t\t\t\torder: -1,\n\t\t\t\t\t\tgroup: \"navigation/execute\",\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\tNOTEBOOK_HAS_SOMETHING_RUNNING,\n\t\t\t\t\t\t\tNOTEBOOK_INTERRUPTIBLE_KERNEL.toNegated(),\n\t\t\t\t\t\t\tContextKeyExpr.equals(\n\t\t\t\t\t\t\t\t\"config.notebook.globalToolbar\",\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t}\n\t},\n);\n\nregisterAction2(\n\tclass InterruptNotebook extends CancelNotebook {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: INTERRUPT_NOTEBOOK_COMMAND_ID,\n\t\t\t\ttitle: localize2(\n\t\t\t\t\t\"notebookActions.interruptNotebook\",\n\t\t\t\t\t\"Interrupt\",\n\t\t\t\t),\n\t\t\t\tprecondition: ContextKeyExpr.and(\n\t\t\t\t\tNOTEBOOK_HAS_SOMETHING_RUNNING,\n\t\t\t\t\tNOTEBOOK_INTERRUPTIBLE_KERNEL,\n\t\t\t\t),\n\t\t\t\ticon: icons.stopIcon,\n\t\t\t\tmenu: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.EditorTitle,\n\t\t\t\t\t\torder: -1,\n\t\t\t\t\t\tgroup: \"navigation\",\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\tNOTEBOOK_IS_ACTIVE_EDITOR,\n\t\t\t\t\t\t\tNOTEBOOK_HAS_SOMETHING_RUNNING,\n\t\t\t\t\t\t\tNOTEBOOK_INTERRUPTIBLE_KERNEL,\n\t\t\t\t\t\t\tContextKeyExpr.notEquals(\n\t\t\t\t\t\t\t\t\"config.notebook.globalToolbar\",\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.NotebookToolbar,\n\t\t\t\t\t\torder: -1,\n\t\t\t\t\t\tgroup: \"navigation/execute\",\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\tNOTEBOOK_HAS_SOMETHING_RUNNING,\n\t\t\t\t\t\t\tNOTEBOOK_INTERRUPTIBLE_KERNEL,\n\t\t\t\t\t\t\tContextKeyExpr.equals(\n\t\t\t\t\t\t\t\t\"config.notebook.globalToolbar\",\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.InteractiveToolbar,\n\t\t\t\t\t\tgroup: \"navigation/execute\",\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t}\n\t},\n);\n\nMenuRegistry.appendMenuItem(MenuId.NotebookToolbar, {\n\ttitle: localize(\"revealRunningCellShort\", \"Go To\"),\n\tsubmenu: MenuId.NotebookCellExecuteGoTo,\n\tgroup: \"navigation/execute\",\n\torder: 20,\n\ticon: ThemeIcon.modify(icons.executingStateIcon, \"spin\"),\n});\n\nregisterAction2(\n\tclass RevealRunningCellAction extends NotebookAction {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: REVEAL_RUNNING_CELL,\n\t\t\t\ttitle: localize(\"revealRunningCell\", \"Go to Running Cell\"),\n\t\t\t\ttooltip: localize(\"revealRunningCell\", \"Go to Running Cell\"),\n\t\t\t\tshortTitle: localize(\"revealRunningCell\", \"Go to Running Cell\"),\n\t\t\t\tprecondition: NOTEBOOK_HAS_RUNNING_CELL,\n\t\t\t\tmenu: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.EditorTitle,\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\tNOTEBOOK_IS_ACTIVE_EDITOR,\n\t\t\t\t\t\t\tNOTEBOOK_HAS_RUNNING_CELL,\n\t\t\t\t\t\t\tContextKeyExpr.notEquals(\n\t\t\t\t\t\t\t\t\"config.notebook.globalToolbar\",\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tgroup: \"navigation\",\n\t\t\t\t\t\torder: 0,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.NotebookCellExecuteGoTo,\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\tNOTEBOOK_IS_ACTIVE_EDITOR,\n\t\t\t\t\t\t\tNOTEBOOK_HAS_RUNNING_CELL,\n\t\t\t\t\t\t\tContextKeyExpr.equals(\n\t\t\t\t\t\t\t\t\"config.notebook.globalToolbar\",\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tgroup: \"navigation/execute\",\n\t\t\t\t\t\torder: 20,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.InteractiveToolbar,\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\tNOTEBOOK_HAS_RUNNING_CELL,\n\t\t\t\t\t\t\tContextKeyExpr.equals(\n\t\t\t\t\t\t\t\t\"activeEditor\",\n\t\t\t\t\t\t\t\t\"workbench.editor.interactive\",\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tgroup: \"navigation\",\n\t\t\t\t\t\torder: 10,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\ticon: ThemeIcon.modify(icons.executingStateIcon, \"spin\"),\n\t\t\t});\n\t\t}\n\n\t\tasync runWithContext(\n\t\t\taccessor: ServicesAccessor,\n\t\t\tcontext: INotebookActionContext,\n\t\t): Promise<void> {\n\t\t\tconst notebookExecutionStateService = accessor.get(\n\t\t\t\tINotebookExecutionStateService,\n\t\t\t);\n\t\t\tconst notebook = context.notebookEditor.textModel.uri;\n\t\t\tconst executingCells =\n\t\t\t\tnotebookExecutionStateService.getCellExecutionsForNotebook(\n\t\t\t\t\tnotebook,\n\t\t\t\t);\n\t\t\tif (executingCells[0]) {\n\t\t\t\tconst topStackFrameCell = this.findCellAtTopFrame(\n\t\t\t\t\taccessor,\n\t\t\t\t\tnotebook,\n\t\t\t\t);\n\t\t\t\tconst focusHandle =\n\t\t\t\t\ttopStackFrameCell ?? executingCells[0].cellHandle;\n\t\t\t\tconst cell =\n\t\t\t\t\tcontext.notebookEditor.getCellByHandle(focusHandle);\n\t\t\t\tif (cell) {\n\t\t\t\t\tcontext.notebookEditor.focusNotebookCell(cell, \"container\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tprivate findCellAtTopFrame(\n\t\t\taccessor: ServicesAccessor,\n\t\t\tnotebook: URI,\n\t\t): number | undefined {\n\t\t\tconst debugService = accessor.get(IDebugService);\n\t\t\tfor (const session of debugService.getModel().getSessions()) {\n\t\t\t\tfor (const thread of session.getAllThreads()) {\n\t\t\t\t\tconst sf = thread.getTopStackFrame();\n\t\t\t\t\tif (sf) {\n\t\t\t\t\t\tconst parsed = CellUri.parse(sf.source.uri);\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tparsed &&\n\t\t\t\t\t\t\tparsed.notebook.toString() === notebook.toString()\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn parsed.handle;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn undefined;\n\t\t}\n\t},\n);\n\nregisterAction2(\n\tclass RevealLastFailedCellAction extends NotebookAction {\n\t\tconstructor() {\n\t\t\tsuper({\n\t\t\t\tid: REVEAL_LAST_FAILED_CELL,\n\t\t\t\ttitle: localize(\n\t\t\t\t\t\"revealLastFailedCell\",\n\t\t\t\t\t\"Go to Most Recently Failed Cell\",\n\t\t\t\t),\n\t\t\t\ttooltip: localize(\n\t\t\t\t\t\"revealLastFailedCell\",\n\t\t\t\t\t\"Go to Most Recently Failed Cell\",\n\t\t\t\t),\n\t\t\t\tshortTitle: localize(\n\t\t\t\t\t\"revealLastFailedCellShort\",\n\t\t\t\t\t\"Go to Most Recently Failed Cell\",\n\t\t\t\t),\n\t\t\t\tprecondition: NOTEBOOK_LAST_CELL_FAILED,\n\t\t\t\tmenu: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.EditorTitle,\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\tNOTEBOOK_IS_ACTIVE_EDITOR,\n\t\t\t\t\t\t\tNOTEBOOK_LAST_CELL_FAILED,\n\t\t\t\t\t\t\tNOTEBOOK_HAS_RUNNING_CELL.toNegated(),\n\t\t\t\t\t\t\tContextKeyExpr.notEquals(\n\t\t\t\t\t\t\t\t\"config.notebook.globalToolbar\",\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tgroup: \"navigation\",\n\t\t\t\t\t\torder: 0,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.NotebookCellExecuteGoTo,\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\tNOTEBOOK_IS_ACTIVE_EDITOR,\n\t\t\t\t\t\t\tNOTEBOOK_LAST_CELL_FAILED,\n\t\t\t\t\t\t\tNOTEBOOK_HAS_RUNNING_CELL.toNegated(),\n\t\t\t\t\t\t\tContextKeyExpr.equals(\n\t\t\t\t\t\t\t\t\"config.notebook.globalToolbar\",\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tgroup: \"navigation/execute\",\n\t\t\t\t\t\torder: 20,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\ticon: icons.errorStateIcon,\n\t\t\t});\n\t\t}\n\n\t\tasync runWithContext(\n\t\t\taccessor: ServicesAccessor,\n\t\t\tcontext: INotebookActionContext,\n\t\t): Promise<void> {\n\t\t\tconst notebookExecutionStateService = accessor.get(\n\t\t\t\tINotebookExecutionStateService,\n\t\t\t);\n\t\t\tconst notebook = context.notebookEditor.textModel.uri;\n\t\t\tconst lastFailedCellHandle =\n\t\t\t\tnotebookExecutionStateService.getLastFailedCellForNotebook(\n\t\t\t\t\tnotebook,\n\t\t\t\t);\n\t\t\tif (lastFailedCellHandle !== undefined) {\n\t\t\t\tconst lastFailedCell =\n\t\t\t\t\tcontext.notebookEditor.getCellByHandle(\n\t\t\t\t\t\tlastFailedCellHandle,\n\t\t\t\t\t);\n\t\t\t\tif (lastFailedCell) {\n\t\t\t\t\tcontext.notebookEditor.focusNotebookCell(\n\t\t\t\t\t\tlastFailedCell,\n\t\t\t\t\t\t\"container\",\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n);\n"],
  "mappings": "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",
  "names": ["editor"]
}
