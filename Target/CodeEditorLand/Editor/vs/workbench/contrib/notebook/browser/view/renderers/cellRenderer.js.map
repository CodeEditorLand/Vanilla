{
  "version": 3,
  "sources": ["../../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/notebook/browser/view/renderers/cellRenderer.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { PixelRatio } from '../../../../../../base/browser/pixelRatio.js';\nimport * as DOM from '../../../../../../base/browser/dom.js';\nimport { FastDomNode } from '../../../../../../base/browser/fastDomNode.js';\nimport { IListRenderer, IListVirtualDelegate } from '../../../../../../base/browser/ui/list/list.js';\nimport { Disposable, DisposableStore } from '../../../../../../base/common/lifecycle.js';\nimport { ICodeEditor } from '../../../../../../editor/browser/editorBrowser.js';\nimport { CodeEditorWidget } from '../../../../../../editor/browser/widget/codeEditor/codeEditorWidget.js';\nimport { IEditorOptions } from '../../../../../../editor/common/config/editorOptions.js';\nimport { BareFontInfo } from '../../../../../../editor/common/config/fontInfo.js';\nimport { EditorContextKeys } from '../../../../../../editor/common/editorContextKeys.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../../../editor/common/languages/modesRegistry.js';\nimport { localize } from '../../../../../../nls.js';\nimport { IMenuService } from '../../../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService, IScopedContextKeyService } from '../../../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../../../platform/instantiation/common/serviceCollection.js';\nimport { IKeybindingService } from '../../../../../../platform/keybinding/common/keybinding.js';\nimport { INotificationService } from '../../../../../../platform/notification/common/notification.js';\nimport { ICellViewModel, INotebookEditorDelegate } from '../../notebookBrowser.js';\nimport { CellPartsCollection } from '../cellPart.js';\nimport { CellChatPart } from '../cellParts/chat/cellChatPart.js';\nimport { CellComments } from '../cellParts/cellComments.js';\nimport { CellContextKeyPart } from '../cellParts/cellContextKeys.js';\nimport { CellDecorations } from '../cellParts/cellDecorations.js';\nimport { CellDragAndDropController, CellDragAndDropPart } from '../cellParts/cellDnd.js';\nimport { CodeCellDragImageRenderer } from '../cellParts/cellDragRenderer.js';\nimport { CellEditorOptions } from '../cellParts/cellEditorOptions.js';\nimport { CellExecutionPart } from '../cellParts/cellExecution.js';\nimport { CellFocusPart } from '../cellParts/cellFocus.js';\nimport { CellFocusIndicator } from '../cellParts/cellFocusIndicator.js';\nimport { CellProgressBar } from '../cellParts/cellProgressBar.js';\nimport { CellEditorStatusBar } from '../cellParts/cellStatusPart.js';\nimport { BetweenCellToolbar, CellTitleToolbarPart } from '../cellParts/cellToolbars.js';\nimport { CodeCell } from '../cellParts/codeCell.js';\nimport { RunToolbar } from '../cellParts/codeCellRunToolbar.js';\nimport { CollapsedCellInput } from '../cellParts/collapsedCellInput.js';\nimport { CollapsedCellOutput } from '../cellParts/collapsedCellOutput.js';\nimport { FoldedCellHint } from '../cellParts/foldedCellHint.js';\nimport { MarkupCell } from '../cellParts/markupCell.js';\nimport { CodeCellRenderTemplate, MarkdownCellRenderTemplate } from '../notebookRenderingCommon.js';\nimport { CodeCellViewModel } from '../../viewModel/codeCellViewModel.js';\nimport { MarkupCellViewModel } from '../../viewModel/markupCellViewModel.js';\nimport { CellViewModel } from '../../viewModel/notebookViewModelImpl.js';\nimport { CellKind } from '../../../common/notebookCommon.js';\nimport { INotebookExecutionStateService } from '../../../common/notebookExecutionStateService.js';\nimport { NotebookCellEditorPool } from '../notebookCellEditorPool.js';\n\nconst $ = DOM.$;\n\nexport class NotebookCellListDelegate extends Disposable implements IListVirtualDelegate<CellViewModel> {\n\tprivate readonly lineHeight: number;\n\n\tconstructor(\n\t\ttargetWindow: Window,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService\n\t) {\n\t\tsuper();\n\n\t\tconst editorOptions = this.configurationService.getValue<IEditorOptions>('editor');\n\t\tthis.lineHeight = BareFontInfo.createFromRawSettings(editorOptions, PixelRatio.getInstance(targetWindow).value).lineHeight;\n\t}\n\n\tgetHeight(element: CellViewModel): number {\n\t\treturn element.getHeight(this.lineHeight);\n\t}\n\n\tgetDynamicHeight(element: CellViewModel): number | null {\n\t\treturn element.getDynamicHeight();\n\t}\n\n\tgetTemplateId(element: CellViewModel): string {\n\t\tif (element.cellKind === CellKind.Markup) {\n\t\t\treturn MarkupCellRenderer.TEMPLATE_ID;\n\t\t} else {\n\t\t\treturn CodeCellRenderer.TEMPLATE_ID;\n\t\t}\n\t}\n}\n\nabstract class AbstractCellRenderer {\n\tprotected readonly editorOptions: CellEditorOptions;\n\n\tconstructor(\n\t\tprotected readonly instantiationService: IInstantiationService,\n\t\tprotected readonly notebookEditor: INotebookEditorDelegate,\n\t\tprotected readonly contextMenuService: IContextMenuService,\n\t\tprotected readonly menuService: IMenuService,\n\t\tconfigurationService: IConfigurationService,\n\t\tprotected readonly keybindingService: IKeybindingService,\n\t\tprotected readonly notificationService: INotificationService,\n\t\tprotected readonly contextKeyServiceProvider: (container: HTMLElement) => IScopedContextKeyService,\n\t\tlanguage: string,\n\t\tprotected dndController: CellDragAndDropController | undefined\n\t) {\n\t\tthis.editorOptions = new CellEditorOptions(this.notebookEditor.getBaseCellEditorOptions(language), this.notebookEditor.notebookOptions, configurationService);\n\t}\n\n\tdispose() {\n\t\tthis.editorOptions.dispose();\n\t\tthis.dndController = undefined;\n\t}\n}\n\nexport class MarkupCellRenderer extends AbstractCellRenderer implements IListRenderer<MarkupCellViewModel, MarkdownCellRenderTemplate> {\n\tstatic readonly TEMPLATE_ID = 'markdown_cell';\n\n\tprivate _notebookExecutionStateService: INotebookExecutionStateService;\n\n\tconstructor(\n\t\tnotebookEditor: INotebookEditorDelegate,\n\t\tdndController: CellDragAndDropController,\n\t\tprivate renderedEditors: Map<ICellViewModel, ICodeEditor>,\n\t\tcontextKeyServiceProvider: (container: HTMLElement) => IScopedContextKeyService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@INotebookExecutionStateService notebookExecutionStateService: INotebookExecutionStateService\n\t) {\n\t\tsuper(instantiationService, notebookEditor, contextMenuService, menuService, configurationService, keybindingService, notificationService, contextKeyServiceProvider, 'markdown', dndController);\n\t\tthis._notebookExecutionStateService = notebookExecutionStateService;\n\t}\n\n\tget templateId() {\n\t\treturn MarkupCellRenderer.TEMPLATE_ID;\n\t}\n\n\trenderTemplate(rootContainer: HTMLElement): MarkdownCellRenderTemplate {\n\t\trootContainer.classList.add('markdown-cell-row');\n\t\tconst container = DOM.append(rootContainer, DOM.$('.cell-inner-container'));\n\t\tconst templateDisposables = new DisposableStore();\n\t\tconst contextKeyService = templateDisposables.add(this.contextKeyServiceProvider(container));\n\t\tconst decorationContainer = DOM.append(rootContainer, $('.cell-decoration'));\n\t\tconst titleToolbarContainer = DOM.append(container, $('.cell-title-toolbar'));\n\n\t\tconst focusIndicatorTop = new FastDomNode(DOM.append(container, $('.cell-focus-indicator.cell-focus-indicator-top')));\n\t\tconst focusIndicatorLeft = new FastDomNode(DOM.append(container, DOM.$('.cell-focus-indicator.cell-focus-indicator-side.cell-focus-indicator-left')));\n\t\tconst foldingIndicator = DOM.append(focusIndicatorLeft.domNode, DOM.$('.notebook-folding-indicator'));\n\t\tconst focusIndicatorRight = new FastDomNode(DOM.append(container, DOM.$('.cell-focus-indicator.cell-focus-indicator-side.cell-focus-indicator-right')));\n\n\t\tconst codeInnerContent = DOM.append(container, $('.cell.code'));\n\t\tconst editorPart = DOM.append(codeInnerContent, $('.cell-editor-part'));\n\t\tconst cellChatPart = DOM.append(editorPart, $('.cell-chat-part'));\n\t\tconst cellInputCollapsedContainer = DOM.append(codeInnerContent, $('.input-collapse-container'));\n\t\tcellInputCollapsedContainer.style.display = 'none';\n\t\tconst editorContainer = DOM.append(editorPart, $('.cell-editor-container'));\n\t\teditorPart.style.display = 'none';\n\t\tconst cellCommentPartContainer = DOM.append(container, $('.cell-comment-container'));\n\t\tconst innerContent = DOM.append(container, $('.cell.markdown'));\n\t\tconst bottomCellContainer = DOM.append(container, $('.cell-bottom-toolbar-container'));\n\n\t\tconst scopedInstaService = templateDisposables.add(this.instantiationService.createChild(new ServiceCollection([IContextKeyService, contextKeyService])));\n\t\tconst rootClassDelegate = {\n\t\t\ttoggle: (className: string, force?: boolean) => container.classList.toggle(className, force)\n\t\t};\n\t\tconst titleToolbar = templateDisposables.add(scopedInstaService.createInstance(\n\t\t\tCellTitleToolbarPart,\n\t\t\ttitleToolbarContainer,\n\t\t\trootClassDelegate,\n\t\t\tthis.notebookEditor.creationOptions.menuIds.cellTitleToolbar,\n\t\t\tthis.notebookEditor.creationOptions.menuIds.cellDeleteToolbar,\n\t\t\tthis.notebookEditor));\n\t\tconst focusIndicatorBottom = new FastDomNode(DOM.append(container, $('.cell-focus-indicator.cell-focus-indicator-bottom')));\n\n\t\tconst cellParts = new CellPartsCollection(DOM.getWindow(rootContainer), [\n\t\t\ttemplateDisposables.add(scopedInstaService.createInstance(CellChatPart, this.notebookEditor, cellChatPart)),\n\t\t\ttemplateDisposables.add(scopedInstaService.createInstance(CellEditorStatusBar, this.notebookEditor, container, editorPart, undefined)),\n\t\t\ttemplateDisposables.add(new CellFocusIndicator(this.notebookEditor, titleToolbar, focusIndicatorTop, focusIndicatorLeft, focusIndicatorRight, focusIndicatorBottom)),\n\t\t\ttemplateDisposables.add(new FoldedCellHint(this.notebookEditor, DOM.append(container, $('.notebook-folded-hint')), this._notebookExecutionStateService)),\n\t\t\ttemplateDisposables.add(new CellDecorations(rootContainer, decorationContainer)),\n\t\t\ttemplateDisposables.add(scopedInstaService.createInstance(CellComments, this.notebookEditor, cellCommentPartContainer)),\n\t\t\ttemplateDisposables.add(new CollapsedCellInput(this.notebookEditor, cellInputCollapsedContainer)),\n\t\t\ttemplateDisposables.add(new CellFocusPart(container, undefined, this.notebookEditor)),\n\t\t\ttemplateDisposables.add(new CellDragAndDropPart(container)),\n\t\t\ttemplateDisposables.add(scopedInstaService.createInstance(CellContextKeyPart, this.notebookEditor)),\n\t\t], [\n\t\t\ttitleToolbar,\n\t\t\ttemplateDisposables.add(scopedInstaService.createInstance(BetweenCellToolbar, this.notebookEditor, titleToolbarContainer, bottomCellContainer))\n\t\t]);\n\n\t\ttemplateDisposables.add(cellParts);\n\n\t\tconst templateData: MarkdownCellRenderTemplate = {\n\t\t\trootContainer,\n\t\t\tcellInputCollapsedContainer,\n\t\t\tinstantiationService: scopedInstaService,\n\t\t\tcontainer,\n\t\t\tcellContainer: innerContent,\n\t\t\teditorPart,\n\t\t\teditorContainer,\n\t\t\tfoldingIndicator,\n\t\t\ttemplateDisposables,\n\t\t\telementDisposables: new DisposableStore(),\n\t\t\tcellParts,\n\t\t\ttoJSON: () => { return {}; }\n\t\t};\n\n\t\treturn templateData;\n\t}\n\n\trenderElement(element: MarkupCellViewModel, index: number, templateData: MarkdownCellRenderTemplate, height: number | undefined): void {\n\t\tif (!this.notebookEditor.hasModel()) {\n\t\t\tthrow new Error('The notebook editor is not attached with view model yet.');\n\t\t}\n\n\t\ttemplateData.currentRenderedCell = element;\n\t\ttemplateData.currentEditor = undefined;\n\t\ttemplateData.editorPart.style.display = 'none';\n\t\ttemplateData.cellContainer.innerText = '';\n\n\t\tif (height === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\ttemplateData.elementDisposables.add(templateData.instantiationService.createInstance(MarkupCell, this.notebookEditor, element, templateData, this.renderedEditors));\n\t}\n\n\tdisposeTemplate(templateData: MarkdownCellRenderTemplate): void {\n\t\ttemplateData.elementDisposables.dispose();\n\t\ttemplateData.templateDisposables.dispose();\n\t}\n\n\tdisposeElement(_element: ICellViewModel, _index: number, templateData: MarkdownCellRenderTemplate): void {\n\t\ttemplateData.elementDisposables.clear();\n\t}\n}\n\nexport class CodeCellRenderer extends AbstractCellRenderer implements IListRenderer<CodeCellViewModel, CodeCellRenderTemplate> {\n\tstatic readonly TEMPLATE_ID = 'code_cell';\n\n\tconstructor(\n\t\tnotebookEditor: INotebookEditorDelegate,\n\t\tprivate renderedEditors: Map<ICellViewModel, ICodeEditor>,\n\t\tprivate editorPool: NotebookCellEditorPool,\n\t\tdndController: CellDragAndDropController,\n\t\tcontextKeyServiceProvider: (container: HTMLElement) => IScopedContextKeyService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@INotificationService notificationService: INotificationService,\n\t) {\n\t\tsuper(instantiationService, notebookEditor, contextMenuService, menuService, configurationService, keybindingService, notificationService, contextKeyServiceProvider, PLAINTEXT_LANGUAGE_ID, dndController);\n\t}\n\n\tget templateId() {\n\t\treturn CodeCellRenderer.TEMPLATE_ID;\n\t}\n\n\trenderTemplate(rootContainer: HTMLElement): CodeCellRenderTemplate {\n\t\trootContainer.classList.add('code-cell-row');\n\t\tconst container = DOM.append(rootContainer, DOM.$('.cell-inner-container'));\n\t\tconst templateDisposables = new DisposableStore();\n\t\tconst contextKeyService = templateDisposables.add(this.contextKeyServiceProvider(container));\n\t\tconst decorationContainer = DOM.append(rootContainer, $('.cell-decoration'));\n\t\tconst focusIndicatorTop = new FastDomNode(DOM.append(container, $('.cell-focus-indicator.cell-focus-indicator-top')));\n\t\tconst titleToolbarContainer = DOM.append(container, $('.cell-title-toolbar'));\n\n\t\t// This is also the drag handle\n\t\tconst focusIndicatorLeft = new FastDomNode(DOM.append(container, DOM.$('.cell-focus-indicator.cell-focus-indicator-side.cell-focus-indicator-left')));\n\t\tconst cellChatPart = DOM.append(container, $('.cell-chat-part'));\n\t\tconst cellContainer = DOM.append(container, $('.cell.code'));\n\t\tconst runButtonContainer = DOM.append(cellContainer, $('.run-button-container'));\n\t\tconst cellInputCollapsedContainer = DOM.append(cellContainer, $('.input-collapse-container'));\n\t\tcellInputCollapsedContainer.style.display = 'none';\n\t\tconst executionOrderLabel = DOM.append(focusIndicatorLeft.domNode, $('div.execution-count-label'));\n\t\texecutionOrderLabel.title = localize('cellExecutionOrderCountLabel', 'Execution Order');\n\t\tconst editorPart = DOM.append(cellContainer, $('.cell-editor-part'));\n\t\tconst editorContainer = DOM.append(editorPart, $('.cell-editor-container'));\n\t\tconst cellCommentPartContainer = DOM.append(container, $('.cell-comment-container'));\n\n\t\t// create a special context key service that set the inCompositeEditor-contextkey\n\t\tconst editorContextKeyService = templateDisposables.add(this.contextKeyServiceProvider(editorPart));\n\t\tconst editorInstaService = templateDisposables.add(this.instantiationService.createChild(new ServiceCollection([IContextKeyService, editorContextKeyService])));\n\t\tEditorContextKeys.inCompositeEditor.bindTo(editorContextKeyService).set(true);\n\n\t\tconst editor = editorInstaService.createInstance(CodeEditorWidget, editorContainer, {\n\t\t\t...this.editorOptions.getDefaultValue(),\n\t\t\tdimension: {\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0\n\t\t\t},\n\t\t\tscrollbar: {\n\t\t\t\tvertical: 'hidden',\n\t\t\t\thorizontal: 'auto',\n\t\t\t\thandleMouseWheel: false,\n\t\t\t\tuseShadows: false,\n\t\t\t},\n\t\t}, {\n\t\t\tcontributions: this.notebookEditor.creationOptions.cellEditorContributions\n\t\t});\n\n\t\ttemplateDisposables.add(editor);\n\n\t\tconst outputContainer = new FastDomNode(DOM.append(container, $('.output')));\n\t\tconst cellOutputCollapsedContainer = DOM.append(outputContainer.domNode, $('.output-collapse-container'));\n\t\tconst outputShowMoreContainer = new FastDomNode(DOM.append(container, $('.output-show-more-container')));\n\t\tconst focusIndicatorRight = new FastDomNode(DOM.append(container, DOM.$('.cell-focus-indicator.cell-focus-indicator-side.cell-focus-indicator-right')));\n\t\tconst focusSinkElement = DOM.append(container, $('.cell-editor-focus-sink'));\n\t\tfocusSinkElement.setAttribute('tabindex', '0');\n\t\tconst bottomCellToolbarContainer = DOM.append(container, $('.cell-bottom-toolbar-container'));\n\t\tconst focusIndicatorBottom = new FastDomNode(DOM.append(container, $('.cell-focus-indicator.cell-focus-indicator-bottom')));\n\n\t\tconst scopedInstaService = templateDisposables.add(this.instantiationService.createChild(new ServiceCollection([IContextKeyService, contextKeyService])));\n\t\tconst rootClassDelegate = {\n\t\t\ttoggle: (className: string, force?: boolean) => container.classList.toggle(className, force)\n\t\t};\n\t\tconst titleToolbar = templateDisposables.add(scopedInstaService.createInstance(\n\t\t\tCellTitleToolbarPart,\n\t\t\ttitleToolbarContainer,\n\t\t\trootClassDelegate,\n\t\t\tthis.notebookEditor.creationOptions.menuIds.cellTitleToolbar,\n\t\t\tthis.notebookEditor.creationOptions.menuIds.cellDeleteToolbar,\n\t\t\tthis.notebookEditor));\n\n\t\tconst focusIndicatorPart = templateDisposables.add(new CellFocusIndicator(this.notebookEditor, titleToolbar, focusIndicatorTop, focusIndicatorLeft, focusIndicatorRight, focusIndicatorBottom));\n\t\tconst cellParts = new CellPartsCollection(DOM.getWindow(rootContainer), [\n\t\t\tfocusIndicatorPart,\n\t\t\ttemplateDisposables.add(scopedInstaService.createInstance(CellChatPart, this.notebookEditor, cellChatPart)),\n\t\t\ttemplateDisposables.add(scopedInstaService.createInstance(CellEditorStatusBar, this.notebookEditor, container, editorPart, editor)),\n\t\t\ttemplateDisposables.add(scopedInstaService.createInstance(CellProgressBar, editorPart, cellInputCollapsedContainer)),\n\t\t\ttemplateDisposables.add(scopedInstaService.createInstance(RunToolbar, this.notebookEditor, contextKeyService, container, runButtonContainer)),\n\t\t\ttemplateDisposables.add(new CellDecorations(rootContainer, decorationContainer)),\n\t\t\ttemplateDisposables.add(scopedInstaService.createInstance(CellComments, this.notebookEditor, cellCommentPartContainer)),\n\t\t\ttemplateDisposables.add(scopedInstaService.createInstance(CellExecutionPart, this.notebookEditor, executionOrderLabel)),\n\t\t\ttemplateDisposables.add(scopedInstaService.createInstance(CollapsedCellOutput, this.notebookEditor, cellOutputCollapsedContainer)),\n\t\t\ttemplateDisposables.add(new CollapsedCellInput(this.notebookEditor, cellInputCollapsedContainer)),\n\t\t\ttemplateDisposables.add(new CellFocusPart(container, focusSinkElement, this.notebookEditor)),\n\t\t\ttemplateDisposables.add(new CellDragAndDropPart(container)),\n\t\t\ttemplateDisposables.add(scopedInstaService.createInstance(CellContextKeyPart, this.notebookEditor)),\n\t\t], [\n\t\t\ttitleToolbar,\n\t\t\ttemplateDisposables.add(scopedInstaService.createInstance(BetweenCellToolbar, this.notebookEditor, titleToolbarContainer, bottomCellToolbarContainer))\n\t\t]);\n\n\t\ttemplateDisposables.add(cellParts);\n\n\t\tconst templateData: CodeCellRenderTemplate = {\n\t\t\trootContainer,\n\t\t\teditorPart,\n\t\t\tcellInputCollapsedContainer,\n\t\t\tcellOutputCollapsedContainer,\n\t\t\tinstantiationService: scopedInstaService,\n\t\t\tcontainer,\n\t\t\tcellContainer,\n\t\t\tfocusSinkElement,\n\t\t\toutputContainer,\n\t\t\toutputShowMoreContainer,\n\t\t\teditor,\n\t\t\ttemplateDisposables,\n\t\t\telementDisposables: new DisposableStore(),\n\t\t\tcellParts,\n\t\t\ttoJSON: () => { return {}; }\n\t\t};\n\n\t\t// focusIndicatorLeft covers the left margin area\n\t\t// code/outputFocusIndicator need to be registered as drag handlers so their click handlers don't take over\n\t\tconst dragHandles = [focusIndicatorLeft.domNode, focusIndicatorPart.codeFocusIndicator.domNode, focusIndicatorPart.outputFocusIndicator.domNode];\n\t\tthis.dndController?.registerDragHandle(templateData, rootContainer, dragHandles, () => new CodeCellDragImageRenderer().getDragImage(templateData, templateData.editor, 'code'));\n\t\treturn templateData;\n\t}\n\n\trenderElement(element: CodeCellViewModel, index: number, templateData: CodeCellRenderTemplate, height: number | undefined): void {\n\t\tif (!this.notebookEditor.hasModel()) {\n\t\t\tthrow new Error('The notebook editor is not attached with view model yet.');\n\t\t}\n\n\t\ttemplateData.currentRenderedCell = element;\n\n\t\tif (height === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\ttemplateData.outputContainer.domNode.innerText = '';\n\t\ttemplateData.outputContainer.domNode.appendChild(templateData.cellOutputCollapsedContainer);\n\n\t\ttemplateData.elementDisposables.add(templateData.instantiationService.createInstance(CodeCell, this.notebookEditor, element, templateData, this.editorPool));\n\t\tthis.renderedEditors.set(element, templateData.editor);\n\t}\n\n\tdisposeTemplate(templateData: CodeCellRenderTemplate): void {\n\t\ttemplateData.templateDisposables.clear();\n\t}\n\n\tdisposeElement(element: ICellViewModel, index: number, templateData: CodeCellRenderTemplate, height: number | undefined): void {\n\t\ttemplateData.elementDisposables.clear();\n\t\tthis.renderedEditors.delete(element);\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
