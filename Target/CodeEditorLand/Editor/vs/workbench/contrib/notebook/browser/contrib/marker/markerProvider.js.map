{
  "version": 3,
  "sources": ["../../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/notebook/browser/contrib/marker/markerProvider.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from '../../../../../../base/common/uri.js';\nimport { WorkbenchPhase, registerWorkbenchContribution2 } from '../../../../../common/contributions.js';\nimport { IMarkerListProvider, MarkerList, IMarkerNavigationService } from '../../../../../../editor/contrib/gotoError/browser/markerNavigationService.js';\nimport { CellUri } from '../../../common/notebookCommon.js';\nimport { IMarkerService, MarkerSeverity } from '../../../../../../platform/markers/common/markers.js';\nimport { IConfigurationService } from '../../../../../../platform/configuration/common/configuration.js';\nimport { Disposable, IDisposable } from '../../../../../../base/common/lifecycle.js';\nimport { INotebookDeltaDecoration, INotebookEditor, INotebookEditorContribution, NotebookOverviewRulerLane } from '../../notebookBrowser.js';\nimport { registerNotebookContribution } from '../../notebookEditorExtensions.js';\nimport { throttle } from '../../../../../../base/common/decorators.js';\nimport { editorErrorForeground, editorWarningForeground } from '../../../../../../platform/theme/common/colorRegistry.js';\nimport { isEqual } from '../../../../../../base/common/resources.js';\n\nclass MarkerListProvider implements IMarkerListProvider {\n\n\tstatic readonly ID = 'workbench.contrib.markerListProvider';\n\n\tprivate readonly _dispoables: IDisposable;\n\n\tconstructor(\n\t\t@IMarkerService private readonly _markerService: IMarkerService,\n\t\t@IMarkerNavigationService markerNavigation: IMarkerNavigationService,\n\t\t@IConfigurationService private readonly _configService: IConfigurationService\n\t) {\n\t\tthis._dispoables = markerNavigation.registerProvider(this);\n\t}\n\n\tdispose() {\n\t\tthis._dispoables.dispose();\n\t}\n\n\tgetMarkerList(resource: URI | undefined): MarkerList | undefined {\n\t\tif (!resource) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst data = CellUri.parse(resource);\n\t\tif (!data) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn new MarkerList(uri => {\n\t\t\tconst otherData = CellUri.parse(uri);\n\t\t\treturn otherData?.notebook.toString() === data.notebook.toString();\n\t\t}, this._markerService, this._configService);\n\t}\n}\n\nclass NotebookMarkerDecorationContribution extends Disposable implements INotebookEditorContribution {\n\tstatic id: string = 'workbench.notebook.markerDecoration';\n\tprivate _markersOverviewRulerDecorations: string[] = [];\n\tconstructor(\n\t\tprivate readonly _notebookEditor: INotebookEditor,\n\t\t@IMarkerService private readonly _markerService: IMarkerService\n\t) {\n\t\tsuper();\n\n\t\tthis._update();\n\t\tthis._register(this._notebookEditor.onDidChangeModel(() => this._update()));\n\t\tthis._register(this._markerService.onMarkerChanged(e => {\n\t\t\tif (e.some(uri => this._notebookEditor.getCellsInRange().some(cell => isEqual(cell.uri, uri)))) {\n\t\t\t\tthis._update();\n\t\t\t}\n\t\t}));\n\t}\n\n\t@throttle(100)\n\tprivate _update() {\n\t\tif (!this._notebookEditor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cellDecorations: INotebookDeltaDecoration[] = [];\n\t\tthis._notebookEditor.getCellsInRange().forEach(cell => {\n\t\t\tconst marker = this._markerService.read({ resource: cell.uri, severities: MarkerSeverity.Error | MarkerSeverity.Warning });\n\t\t\tmarker.forEach(m => {\n\t\t\t\tconst color = m.severity === MarkerSeverity.Error ? editorErrorForeground : editorWarningForeground;\n\t\t\t\tconst range = { startLineNumber: m.startLineNumber, startColumn: m.startColumn, endLineNumber: m.endLineNumber, endColumn: m.endColumn };\n\t\t\t\tcellDecorations.push({\n\t\t\t\t\thandle: cell.handle,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\toverviewRuler: {\n\t\t\t\t\t\t\tcolor: color,\n\t\t\t\t\t\t\tmodelRanges: [range],\n\t\t\t\t\t\t\tincludeOutput: false,\n\t\t\t\t\t\t\tposition: NotebookOverviewRulerLane.Right\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\n\t\tthis._markersOverviewRulerDecorations = this._notebookEditor.deltaCellDecorations(this._markersOverviewRulerDecorations, cellDecorations);\n\t}\n}\n\nregisterWorkbenchContribution2(MarkerListProvider.ID, MarkerListProvider, WorkbenchPhase.BlockRestore);\n\nregisterNotebookContribution(NotebookMarkerDecorationContribution.id, NotebookMarkerDecorationContribution);\n"],
  "mappings": "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",
  "names": []
}
