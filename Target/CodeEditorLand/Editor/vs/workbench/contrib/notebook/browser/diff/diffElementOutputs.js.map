{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/notebook/browser/diff/diffElementOutputs.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from \"../../../../../base/browser/dom.js\";\nimport { StandardKeyboardEvent } from \"../../../../../base/browser/keyboardEvent.js\";\nimport { KeyCode } from \"../../../../../base/common/keyCodes.js\";\nimport {\n\tDisposable,\n\tDisposableStore,\n} from \"../../../../../base/common/lifecycle.js\";\nimport { ThemeIcon } from \"../../../../../base/common/themables.js\";\nimport * as nls from \"../../../../../nls.js\";\nimport {\n\tIQuickInputService,\n\ttype IQuickPickItem,\n} from \"../../../../../platform/quickinput/common/quickInput.js\";\nimport type { NotebookTextModel } from \"../../common/model/notebookTextModel.js\";\nimport type { NotebookCellOutputsSplice } from \"../../common/notebookCommon.js\";\nimport { INotebookService } from \"../../common/notebookService.js\";\nimport {\n\ttype ICellOutputViewModel,\n\ttype IInsetRenderOutput,\n\tRenderOutputType,\n} from \"../notebookBrowser.js\";\nimport { mimetypeIcon } from \"../notebookIcons.js\";\nimport {\n\ttype DiffElementCellViewModelBase,\n\tSideBySideDiffElementViewModel,\n} from \"./diffElementViewModel.js\";\nimport type { DiffNestedCellViewModel } from \"./diffNestedCellViewModel.js\";\nimport {\n\tDiffSide,\n\ttype INotebookTextDiffEditor,\n} from \"./notebookDiffEditorBrowser.js\";\n\ninterface IMimeTypeRenderer extends IQuickPickItem {\n\tindex: number;\n}\n\nexport class OutputElement extends Disposable {\n\treadonly resizeListener = this._register(new DisposableStore());\n\tdomNode!: HTMLElement;\n\trenderResult?: IInsetRenderOutput;\n\n\tconstructor(\n\t\tprivate _notebookEditor: INotebookTextDiffEditor,\n\t\tprivate _notebookTextModel: NotebookTextModel,\n\t\tprivate _notebookService: INotebookService,\n\t\tprivate _quickInputService: IQuickInputService,\n\t\tprivate _diffElementViewModel: DiffElementCellViewModelBase,\n\t\tprivate _diffSide: DiffSide,\n\t\tprivate _nestedCell: DiffNestedCellViewModel,\n\t\tprivate _outputContainer: HTMLElement,\n\t\treadonly output: ICellOutputViewModel,\n\t) {\n\t\tsuper();\n\t}\n\n\trender(index: number, beforeElement?: HTMLElement) {\n\t\tconst outputItemDiv = document.createElement(\"div\");\n\t\tlet result: IInsetRenderOutput | undefined;\n\n\t\tconst [mimeTypes, pick] = this.output.resolveMimeTypes(\n\t\t\tthis._notebookTextModel,\n\t\t\tundefined,\n\t\t);\n\t\tconst pickedMimeTypeRenderer =\n\t\t\tthis.output.pickedMimeType || mimeTypes[pick];\n\t\tif (mimeTypes.length > 1) {\n\t\t\toutputItemDiv.style.position = \"relative\";\n\t\t\tconst mimeTypePicker = DOM.$(\".multi-mimetype-output\");\n\t\t\tmimeTypePicker.classList.add(\n\t\t\t\t...ThemeIcon.asClassNameArray(mimetypeIcon),\n\t\t\t);\n\t\t\tmimeTypePicker.tabIndex = 0;\n\t\t\tmimeTypePicker.title = nls.localize(\n\t\t\t\t\"mimeTypePicker\",\n\t\t\t\t\"Choose a different output mimetype, available mimetypes: {0}\",\n\t\t\t\tmimeTypes.map((mimeType) => mimeType.mimeType).join(\", \"),\n\t\t\t);\n\t\t\toutputItemDiv.appendChild(mimeTypePicker);\n\t\t\tthis.resizeListener.add(\n\t\t\t\tDOM.addStandardDisposableListener(\n\t\t\t\t\tmimeTypePicker,\n\t\t\t\t\t\"mousedown\",\n\t\t\t\t\tasync (e) => {\n\t\t\t\t\t\tif (e.leftButton) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\tawait this.pickActiveMimeTypeRenderer(\n\t\t\t\t\t\t\t\tthis._notebookTextModel,\n\t\t\t\t\t\t\t\tthis.output,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t);\n\n\t\t\tthis.resizeListener.add(\n\t\t\t\tDOM.addDisposableListener(\n\t\t\t\t\tmimeTypePicker,\n\t\t\t\t\tDOM.EventType.KEY_DOWN,\n\t\t\t\t\tasync (e) => {\n\t\t\t\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tevent.equals(KeyCode.Enter) ||\n\t\t\t\t\t\t\tevent.equals(KeyCode.Space)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\tawait this.pickActiveMimeTypeRenderer(\n\t\t\t\t\t\t\t\tthis._notebookTextModel,\n\t\t\t\t\t\t\t\tthis.output,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\n\t\tconst innerContainer = DOM.$(\".output-inner-container\");\n\t\tDOM.append(outputItemDiv, innerContainer);\n\n\t\tif (mimeTypes.length !== 0) {\n\t\t\tconst renderer = this._notebookService.getRendererInfo(\n\t\t\t\tpickedMimeTypeRenderer.rendererId,\n\t\t\t);\n\t\t\tresult = renderer\n\t\t\t\t? {\n\t\t\t\t\t\ttype: RenderOutputType.Extension,\n\t\t\t\t\t\trenderer,\n\t\t\t\t\t\tsource: this.output,\n\t\t\t\t\t\tmimeType: pickedMimeTypeRenderer.mimeType,\n\t\t\t\t\t}\n\t\t\t\t: this._renderMissingRenderer(\n\t\t\t\t\t\tthis.output,\n\t\t\t\t\t\tpickedMimeTypeRenderer.mimeType,\n\t\t\t\t\t);\n\n\t\t\tthis.output.pickedMimeType = pickedMimeTypeRenderer;\n\t\t}\n\n\t\tthis.domNode = outputItemDiv;\n\t\tthis.renderResult = result;\n\n\t\tif (!result) {\n\t\t\t// this.viewCell.updateOutputHeight(index, 0);\n\t\t\treturn;\n\t\t}\n\n\t\tif (beforeElement) {\n\t\t\tthis._outputContainer.insertBefore(outputItemDiv, beforeElement);\n\t\t} else {\n\t\t\tthis._outputContainer.appendChild(outputItemDiv);\n\t\t}\n\n\t\tthis._notebookEditor.createOutput(\n\t\t\tthis._diffElementViewModel,\n\t\t\tthis._nestedCell,\n\t\t\tresult,\n\t\t\t() => this.getOutputOffsetInCell(index),\n\t\t\tthis._diffElementViewModel instanceof SideBySideDiffElementViewModel\n\t\t\t\t? this._diffSide\n\t\t\t\t: this._diffElementViewModel.type === \"insert\"\n\t\t\t\t\t? DiffSide.Modified\n\t\t\t\t\t: DiffSide.Original,\n\t\t);\n\t}\n\n\tprivate _renderMissingRenderer(\n\t\tviewModel: ICellOutputViewModel,\n\t\tpreferredMimeType: string | undefined,\n\t): IInsetRenderOutput {\n\t\tif (!viewModel.model.outputs.length) {\n\t\t\treturn this._renderMessage(\n\t\t\t\tviewModel,\n\t\t\t\tnls.localize(\"empty\", \"Cell has no output\"),\n\t\t\t);\n\t\t}\n\n\t\tif (!preferredMimeType) {\n\t\t\tconst mimeTypes = viewModel.model.outputs.map((op) => op.mime);\n\t\t\tconst mimeTypesMessage = mimeTypes.join(\", \");\n\t\t\treturn this._renderMessage(\n\t\t\t\tviewModel,\n\t\t\t\tnls.localize(\n\t\t\t\t\t\"noRenderer.2\",\n\t\t\t\t\t\"No renderer could be found for output. It has the following mimetypes: {0}\",\n\t\t\t\t\tmimeTypesMessage,\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\n\t\treturn this._renderSearchForMimetype(viewModel, preferredMimeType);\n\t}\n\n\tprivate _renderSearchForMimetype(\n\t\tviewModel: ICellOutputViewModel,\n\t\tmimeType: string,\n\t): IInsetRenderOutput {\n\t\tconst query = `@tag:notebookRenderer ${mimeType}`;\n\n\t\tconst p = DOM.$(\n\t\t\t\"p\",\n\t\t\tundefined,\n\t\t\t`No renderer could be found for mimetype \"${mimeType}\", but one might be available on the Marketplace.`,\n\t\t);\n\t\tconst a = DOM.$(\n\t\t\t\"a\",\n\t\t\t{\n\t\t\t\thref: `command:workbench.extensions.search?%22${query}%22`,\n\t\t\t\tclass: \"monaco-button monaco-text-button\",\n\t\t\t\ttabindex: 0,\n\t\t\t\trole: \"button\",\n\t\t\t\tstyle: \"padding: 8px; text-decoration: none; color: rgb(255, 255, 255); background-color: rgb(14, 99, 156); max-width: 200px;\",\n\t\t\t},\n\t\t\t`Search Marketplace`,\n\t\t);\n\n\t\treturn {\n\t\t\ttype: RenderOutputType.Html,\n\t\t\tsource: viewModel,\n\t\t\thtmlContent: p.outerHTML + a.outerHTML,\n\t\t};\n\t}\n\n\tprivate _renderMessage(\n\t\tviewModel: ICellOutputViewModel,\n\t\tmessage: string,\n\t): IInsetRenderOutput {\n\t\tconst el = DOM.$(\"p\", undefined, message);\n\t\treturn {\n\t\t\ttype: RenderOutputType.Html,\n\t\t\tsource: viewModel,\n\t\t\thtmlContent: el.outerHTML,\n\t\t};\n\t}\n\n\tprivate async pickActiveMimeTypeRenderer(\n\t\tnotebookTextModel: NotebookTextModel,\n\t\tviewModel: ICellOutputViewModel,\n\t) {\n\t\tconst [mimeTypes, currIndex] = viewModel.resolveMimeTypes(\n\t\t\tnotebookTextModel,\n\t\t\tundefined,\n\t\t);\n\n\t\tconst items = mimeTypes\n\t\t\t.filter((mimeType) => mimeType.isTrusted)\n\t\t\t.map(\n\t\t\t\t(mimeType, index): IMimeTypeRenderer => ({\n\t\t\t\t\tlabel: mimeType.mimeType,\n\t\t\t\t\tid: mimeType.mimeType,\n\t\t\t\t\tindex: index,\n\t\t\t\t\tpicked: index === currIndex,\n\t\t\t\t\tdetail: this.generateRendererInfo(mimeType.rendererId),\n\t\t\t\t\tdescription:\n\t\t\t\t\t\tindex === currIndex\n\t\t\t\t\t\t\t? nls.localize(\n\t\t\t\t\t\t\t\t\t\"curruentActiveMimeType\",\n\t\t\t\t\t\t\t\t\t\"Currently Active\",\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t}),\n\t\t\t);\n\n\t\tconst disposables = new DisposableStore();\n\t\tconst picker = disposables.add(\n\t\t\tthis._quickInputService.createQuickPick(),\n\t\t);\n\t\tpicker.items = items;\n\t\tpicker.activeItems = items.filter((item) => !!item.picked);\n\t\tpicker.placeholder =\n\t\t\titems.length !== mimeTypes.length\n\t\t\t\t? nls.localize(\n\t\t\t\t\t\t\"promptChooseMimeTypeInSecure.placeHolder\",\n\t\t\t\t\t\t\"Select mimetype to render for current output. Rich mimetypes are available only when the notebook is trusted\",\n\t\t\t\t\t)\n\t\t\t\t: nls.localize(\n\t\t\t\t\t\t\"promptChooseMimeType.placeHolder\",\n\t\t\t\t\t\t\"Select mimetype to render for current output\",\n\t\t\t\t\t);\n\n\t\tconst pick = await new Promise<number | undefined>((resolve) => {\n\t\t\tdisposables.add(\n\t\t\t\tpicker.onDidAccept(() => {\n\t\t\t\t\tresolve(\n\t\t\t\t\t\tpicker.selectedItems.length === 1\n\t\t\t\t\t\t\t? (picker.selectedItems[0] as IMimeTypeRenderer)\n\t\t\t\t\t\t\t\t\t.index\n\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t);\n\t\t\t\t\tdisposables.dispose();\n\t\t\t\t}),\n\t\t\t);\n\t\t\tpicker.show();\n\t\t});\n\n\t\tif (pick === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (pick !== currIndex) {\n\t\t\t// user chooses another mimetype\n\t\t\tconst index = this._nestedCell.outputsViewModels.indexOf(viewModel);\n\t\t\tconst nextElement = this.domNode.nextElementSibling;\n\t\t\tthis.resizeListener.clear();\n\t\t\tconst element = this.domNode;\n\t\t\tif (element) {\n\t\t\t\telement.remove();\n\t\t\t\tthis._notebookEditor.removeInset(\n\t\t\t\t\tthis._diffElementViewModel,\n\t\t\t\t\tthis._nestedCell,\n\t\t\t\t\tviewModel,\n\t\t\t\t\tthis._diffSide,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tviewModel.pickedMimeType = mimeTypes[pick];\n\t\t\tthis.render(index, nextElement as HTMLElement);\n\t\t}\n\t}\n\n\tprivate generateRendererInfo(renderId: string): string {\n\t\tconst renderInfo = this._notebookService.getRendererInfo(renderId);\n\n\t\tif (renderInfo) {\n\t\t\tconst displayName =\n\t\t\t\trenderInfo.displayName !== \"\"\n\t\t\t\t\t? renderInfo.displayName\n\t\t\t\t\t: renderInfo.id;\n\t\t\treturn `${displayName} (${renderInfo.extensionId.value})`;\n\t\t}\n\n\t\treturn nls.localize(\"builtinRenderInfo\", \"built-in\");\n\t}\n\n\tgetCellOutputCurrentIndex() {\n\t\treturn this._diffElementViewModel\n\t\t\t.getNestedCellViewModel(this._diffSide)\n\t\t\t.outputs.indexOf(this.output.model);\n\t}\n\n\tupdateHeight(index: number, height: number) {\n\t\tthis._diffElementViewModel.updateOutputHeight(\n\t\t\tthis._diffSide,\n\t\t\tindex,\n\t\t\theight,\n\t\t);\n\t}\n\n\tgetOutputOffsetInContainer(index: number) {\n\t\treturn this._diffElementViewModel.getOutputOffsetInContainer(\n\t\t\tthis._diffSide,\n\t\t\tindex,\n\t\t);\n\t}\n\n\tgetOutputOffsetInCell(index: number) {\n\t\treturn this._diffElementViewModel.getOutputOffsetInCell(\n\t\t\tthis._diffSide,\n\t\t\tindex,\n\t\t);\n\t}\n}\n\nexport class OutputContainer extends Disposable {\n\tprivate _outputEntries = new Map<ICellOutputViewModel, OutputElement>();\n\tconstructor(\n\t\tprivate _editor: INotebookTextDiffEditor,\n\t\tprivate _notebookTextModel: NotebookTextModel,\n\t\tprivate _diffElementViewModel: DiffElementCellViewModelBase,\n\t\tprivate _nestedCellViewModel: DiffNestedCellViewModel,\n\t\tprivate _diffSide: DiffSide,\n\t\tprivate _outputContainer: HTMLElement,\n\t\t@INotebookService private _notebookService: INotebookService,\n\t\t@IQuickInputService private readonly _quickInputService: IQuickInputService,\n\t) {\n\t\tsuper();\n\t\tthis._register(this._diffElementViewModel.onDidLayoutChange(() => {\n\t\t\tthis._outputEntries.forEach((value, key) => {\n\t\t\t\tconst index = _nestedCellViewModel.outputs.indexOf(key.model);\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\tconst top = this._diffElementViewModel.getOutputOffsetInContainer(this._diffSide, index);\n\t\t\t\t\tvalue.domNode.style.top = `${top}px`;\n\t\t\t\t}\n\t\t\t});\n\t\t}));\n\n\t\tthis._register(this._nestedCellViewModel.textModel.onDidChangeOutputs(splice => {\n\t\t\tthis._updateOutputs(splice);\n\t\t}));\n\t}\n\n\tprivate _updateOutputs(splice: NotebookCellOutputsSplice) {\n\t\tconst removedKeys: ICellOutputViewModel[] = [];\n\n\t\tthis._outputEntries.forEach((value, key) => {\n\t\t\tif (this._nestedCellViewModel.outputsViewModels.indexOf(key) < 0) {\n\t\t\t\t// already removed\n\t\t\t\tremovedKeys.push(key);\n\t\t\t\t// remove element from DOM\n\t\t\t\tvalue.domNode.remove();\n\t\t\t\tthis._editor.removeInset(\n\t\t\t\t\tthis._diffElementViewModel,\n\t\t\t\t\tthis._nestedCellViewModel,\n\t\t\t\t\tkey,\n\t\t\t\t\tthis._diffSide,\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\n\t\tremovedKeys.forEach((key) => {\n\t\t\tthis._outputEntries.get(key)?.dispose();\n\t\t\tthis._outputEntries.delete(key);\n\t\t});\n\n\t\tlet prevElement: HTMLElement | undefined;\n\t\tconst outputsToRender = this._nestedCellViewModel.outputsViewModels;\n\n\t\toutputsToRender.reverse().forEach((output) => {\n\t\t\tif (this._outputEntries.has(output)) {\n\t\t\t\t// already exist\n\t\t\t\tprevElement = this._outputEntries.get(output)!.domNode;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// newly added element\n\t\t\tconst currIndex =\n\t\t\t\tthis._nestedCellViewModel.outputsViewModels.indexOf(output);\n\t\t\tthis._renderOutput(output, currIndex, prevElement);\n\t\t\tprevElement = this._outputEntries.get(output)?.domNode;\n\t\t});\n\t}\n\trender() {\n\t\t// TODO, outputs to render (should have a limit)\n\t\tfor (\n\t\t\tlet index = 0;\n\t\t\tindex < this._nestedCellViewModel.outputsViewModels.length;\n\t\t\tindex++\n\t\t) {\n\t\t\tconst currOutput =\n\t\t\t\tthis._nestedCellViewModel.outputsViewModels[index];\n\n\t\t\t// always add to the end\n\t\t\tthis._renderOutput(currOutput, index, undefined);\n\t\t}\n\t}\n\n\tshowOutputs() {\n\t\tfor (\n\t\t\tlet index = 0;\n\t\t\tindex < this._nestedCellViewModel.outputsViewModels.length;\n\t\t\tindex++\n\t\t) {\n\t\t\tconst currOutput =\n\t\t\t\tthis._nestedCellViewModel.outputsViewModels[index];\n\t\t\t// always add to the end\n\t\t\tthis._editor.showInset(\n\t\t\t\tthis._diffElementViewModel,\n\t\t\t\tcurrOutput.cellViewModel,\n\t\t\t\tcurrOutput,\n\t\t\t\tthis._diffSide,\n\t\t\t);\n\t\t}\n\t}\n\n\thideOutputs() {\n\t\tthis._outputEntries.forEach((outputElement, cellOutputViewModel) => {\n\t\t\tthis._editor.hideInset(\n\t\t\t\tthis._diffElementViewModel,\n\t\t\t\tthis._nestedCellViewModel,\n\t\t\t\tcellOutputViewModel,\n\t\t\t);\n\t\t});\n\t}\n\n\tprivate _renderOutput(\n\t\tcurrOutput: ICellOutputViewModel,\n\t\tindex: number,\n\t\tbeforeElement?: HTMLElement,\n\t) {\n\t\tif (!this._outputEntries.has(currOutput)) {\n\t\t\tthis._outputEntries.set(\n\t\t\t\tcurrOutput,\n\t\t\t\tnew OutputElement(\n\t\t\t\t\tthis._editor,\n\t\t\t\t\tthis._notebookTextModel,\n\t\t\t\t\tthis._notebookService,\n\t\t\t\t\tthis._quickInputService,\n\t\t\t\t\tthis._diffElementViewModel,\n\t\t\t\t\tthis._diffSide,\n\t\t\t\t\tthis._nestedCellViewModel,\n\t\t\t\t\tthis._outputContainer,\n\t\t\t\t\tcurrOutput,\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\n\t\tconst renderElement = this._outputEntries.get(currOutput)!;\n\t\trenderElement.render(index, beforeElement);\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
