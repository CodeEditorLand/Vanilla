{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/notebook/browser/viewModel/cellEditorOptions.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, type Event } from \"../../../../../base/common/event.js\";\nimport {\n\tDisposable,\n\tDisposableStore,\n} from \"../../../../../base/common/lifecycle.js\";\nimport { deepClone } from \"../../../../../base/common/objects.js\";\nimport type { IEditorOptions } from \"../../../../../editor/common/config/editorOptions.js\";\nimport type { IConfigurationService } from \"../../../../../platform/configuration/common/configuration.js\";\nimport type {\n\tIBaseCellEditorOptions,\n\tINotebookEditorDelegate,\n} from \"../notebookBrowser.js\";\nimport type { NotebookOptions } from \"../notebookOptions.js\";\n\nexport class BaseCellEditorOptions\n\textends Disposable\n\timplements IBaseCellEditorOptions\n{\n\tprivate static fixedEditorOptions: IEditorOptions = {\n\t\tscrollBeyondLastLine: false,\n\t\tscrollbar: {\n\t\t\tverticalScrollbarSize: 14,\n\t\t\thorizontal: \"auto\",\n\t\t\tuseShadows: true,\n\t\t\tverticalHasArrows: false,\n\t\t\thorizontalHasArrows: false,\n\t\t\talwaysConsumeMouseWheel: false,\n\t\t},\n\t\trenderLineHighlightOnlyWhenFocus: true,\n\t\toverviewRulerLanes: 0,\n\t\tlineDecorationsWidth: 0,\n\t\tfolding: true,\n\t\tfixedOverflowWidgets: true,\n\t\tminimap: { enabled: false },\n\t\trenderValidationDecorations: \"on\",\n\t\tlineNumbersMinChars: 3,\n\t};\n\n\tprivate readonly _localDisposableStore = this._register(\n\t\tnew DisposableStore(),\n\t);\n\tprivate readonly _onDidChange = this._register(new Emitter<void>());\n\treadonly onDidChange: Event<void> = this._onDidChange.event;\n\tprivate _value: IEditorOptions;\n\n\tget value(): Readonly<IEditorOptions> {\n\t\treturn this._value;\n\t}\n\n\tconstructor(\n\t\treadonly notebookEditor: INotebookEditorDelegate,\n\t\treadonly notebookOptions: NotebookOptions,\n\t\treadonly configurationService: IConfigurationService,\n\t\treadonly language: string,\n\t) {\n\t\tsuper();\n\t\tthis._register(\n\t\t\tconfigurationService.onDidChangeConfiguration((e) => {\n\t\t\t\tif (\n\t\t\t\t\te.affectsConfiguration(\"editor\") ||\n\t\t\t\t\te.affectsConfiguration(\"notebook\")\n\t\t\t\t) {\n\t\t\t\t\tthis._recomputeOptions();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tnotebookOptions.onDidChangeOptions((e) => {\n\t\t\t\tif (\n\t\t\t\t\te.cellStatusBarVisibility ||\n\t\t\t\t\te.editorTopPadding ||\n\t\t\t\t\te.editorOptionsCustomizations\n\t\t\t\t) {\n\t\t\t\t\tthis._recomputeOptions();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.notebookEditor.onDidChangeModel(() => {\n\t\t\t\tthis._localDisposableStore.clear();\n\n\t\t\t\tif (this.notebookEditor.hasModel()) {\n\t\t\t\t\tthis._localDisposableStore.add(\n\t\t\t\t\t\tthis.notebookEditor.onDidChangeOptions(() => {\n\t\t\t\t\t\t\tthis._recomputeOptions();\n\t\t\t\t\t\t}),\n\t\t\t\t\t);\n\n\t\t\t\t\tthis._recomputeOptions();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tif (this.notebookEditor.hasModel()) {\n\t\t\tthis._localDisposableStore.add(\n\t\t\t\tthis.notebookEditor.onDidChangeOptions(() => {\n\t\t\t\t\tthis._recomputeOptions();\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tthis._value = this._computeEditorOptions();\n\t}\n\n\tprivate _recomputeOptions(): void {\n\t\tthis._value = this._computeEditorOptions();\n\t\tthis._onDidChange.fire();\n\t}\n\n\tprivate _computeEditorOptions() {\n\t\tconst editorOptions = deepClone(\n\t\t\tthis.configurationService.getValue<IEditorOptions>(\"editor\", {\n\t\t\t\toverrideIdentifier: this.language,\n\t\t\t}),\n\t\t);\n\t\tconst editorOptionsOverrideRaw =\n\t\t\tthis.notebookOptions.getDisplayOptions()\n\t\t\t\t.editorOptionsCustomizations;\n\t\tconst editorOptionsOverride: Record<string, any> = {};\n\t\tif (editorOptionsOverrideRaw) {\n\t\t\tfor (const key in editorOptionsOverrideRaw) {\n\t\t\t\tif (key.indexOf(\"editor.\") === 0) {\n\t\t\t\t\teditorOptionsOverride[key.substring(7)] =\n\t\t\t\t\t\teditorOptionsOverrideRaw[\n\t\t\t\t\t\t\tkey as keyof typeof editorOptionsOverrideRaw\n\t\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst computed = Object.freeze({\n\t\t\t...editorOptions,\n\t\t\t...BaseCellEditorOptions.fixedEditorOptions,\n\t\t\t...editorOptionsOverride,\n\t\t\t...{ padding: { top: 12, bottom: 12 } },\n\t\t\treadOnly: this.notebookEditor.isReadOnly,\n\t\t});\n\n\t\treturn computed;\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
