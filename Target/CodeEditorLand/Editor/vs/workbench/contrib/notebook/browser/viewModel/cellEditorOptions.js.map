{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/notebook/browser/viewModel/cellEditorOptions.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { deepClone } from '../../../../../base/common/objects.js';\nimport { IEditorOptions } from '../../../../../editor/common/config/editorOptions.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { IBaseCellEditorOptions, INotebookEditorDelegate } from '../notebookBrowser.js';\nimport { NotebookOptions } from '../notebookOptions.js';\n\nexport class BaseCellEditorOptions extends Disposable implements IBaseCellEditorOptions {\n\tprivate static fixedEditorOptions: IEditorOptions = {\n\t\tscrollBeyondLastLine: false,\n\t\tscrollbar: {\n\t\t\tverticalScrollbarSize: 14,\n\t\t\thorizontal: 'auto',\n\t\t\tuseShadows: true,\n\t\t\tverticalHasArrows: false,\n\t\t\thorizontalHasArrows: false,\n\t\t\talwaysConsumeMouseWheel: false\n\t\t},\n\t\trenderLineHighlightOnlyWhenFocus: true,\n\t\toverviewRulerLanes: 0,\n\t\tlineDecorationsWidth: 0,\n\t\tfolding: true,\n\t\tfixedOverflowWidgets: true,\n\t\tminimap: { enabled: false },\n\t\trenderValidationDecorations: 'on',\n\t\tlineNumbersMinChars: 3\n\t};\n\n\tprivate readonly _localDisposableStore = this._register(new DisposableStore());\n\tprivate readonly _onDidChange = this._register(new Emitter<void>());\n\treadonly onDidChange: Event<void> = this._onDidChange.event;\n\tprivate _value: IEditorOptions;\n\n\tget value(): Readonly<IEditorOptions> {\n\t\treturn this._value;\n\t}\n\n\tconstructor(readonly notebookEditor: INotebookEditorDelegate, readonly notebookOptions: NotebookOptions, readonly configurationService: IConfigurationService, readonly language: string) {\n\t\tsuper();\n\t\tthis._register(configurationService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration('editor') || e.affectsConfiguration('notebook')) {\n\t\t\t\tthis._recomputeOptions();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(notebookOptions.onDidChangeOptions(e => {\n\t\t\tif (e.cellStatusBarVisibility || e.editorTopPadding || e.editorOptionsCustomizations) {\n\t\t\t\tthis._recomputeOptions();\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this.notebookEditor.onDidChangeModel(() => {\n\t\t\tthis._localDisposableStore.clear();\n\n\t\t\tif (this.notebookEditor.hasModel()) {\n\t\t\t\tthis._localDisposableStore.add(this.notebookEditor.onDidChangeOptions(() => {\n\t\t\t\t\tthis._recomputeOptions();\n\t\t\t\t}));\n\n\t\t\t\tthis._recomputeOptions();\n\t\t\t}\n\t\t}));\n\n\t\tif (this.notebookEditor.hasModel()) {\n\t\t\tthis._localDisposableStore.add(this.notebookEditor.onDidChangeOptions(() => {\n\t\t\t\tthis._recomputeOptions();\n\t\t\t}));\n\t\t}\n\n\t\tthis._value = this._computeEditorOptions();\n\t}\n\n\tprivate _recomputeOptions(): void {\n\t\tthis._value = this._computeEditorOptions();\n\t\tthis._onDidChange.fire();\n\t}\n\n\tprivate _computeEditorOptions() {\n\t\tconst editorOptions = deepClone(this.configurationService.getValue<IEditorOptions>('editor', { overrideIdentifier: this.language }));\n\t\tconst editorOptionsOverrideRaw = this.notebookOptions.getDisplayOptions().editorOptionsCustomizations;\n\t\tconst editorOptionsOverride: Record<string, any> = {};\n\t\tif (editorOptionsOverrideRaw) {\n\t\t\tfor (const key in editorOptionsOverrideRaw) {\n\t\t\t\tif (key.indexOf('editor.') === 0) {\n\t\t\t\t\teditorOptionsOverride[key.substring(7)] = editorOptionsOverrideRaw[key as keyof typeof editorOptionsOverrideRaw];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst computed = Object.freeze({\n\t\t\t...editorOptions,\n\t\t\t...BaseCellEditorOptions.fixedEditorOptions,\n\t\t\t...editorOptionsOverride,\n\t\t\t...{ padding: { top: 12, bottom: 12 } },\n\t\t\treadOnly: this.notebookEditor.isReadOnly\n\t\t});\n\n\t\treturn computed;\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
