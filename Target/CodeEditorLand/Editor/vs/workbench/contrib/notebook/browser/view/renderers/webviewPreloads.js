async function Be(p){let S=navigator.userAgent.indexOf("Chrome")>=0,K=new TextEncoder,D=new TextDecoder;function x(){let n,e;return{promise:new Promise((r,i)=>{n=r,e=i}),resolve:n,reject:e}}let I=p.options,G=p.isWorkspaceTrusted,M=p.renderOptions,J=U(),de=globalThis.acquireVsCodeApi,T=de();delete globalThis.acquireVsCodeApi;let P=new CSSStyleSheet;P.replaceSync(p.style.tokenizationCss);let ue=typeof requestIdleCallback!="function"||typeof cancelIdleCallback!="function"?n=>{setTimeout(()=>{if(e)return;let t=Date.now()+15;n(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,t-Date.now())}}))});let e=!1;return{dispose(){e||(e=!0)}}}:(n,e)=>{let t=requestIdleCallback(n,typeof e=="number"?{timeout:e}:void 0),r=!1;return{dispose(){r||(r=!0,cancelIdleCallback(t))}}};function $(n){for(let e of n.composedPath())if(e instanceof HTMLElement&&e.classList.contains("output"))return{id:e.id}}let v,ce=n=>{let e=n&&$(n);e&&(v=void 0,setTimeout(()=>{v?.id!==e.id&&l("outputBlur",e)},0))},ge=n=>{v=$(n);let e=window.document.activeElement;if(!e)return;let t=v?.id;t&&(H(e)||e.tagName==="SELECT")&&(l("outputInputFocus",{inputFocused:!0,id:t}),e.addEventListener("blur",()=>{l("outputInputFocus",{inputFocused:!1,id:t})},{once:!0}))},pe=n=>{if(!n||!n.view||!n.view.document)return;let e=v=$(n);for(let t of n.composedPath())if(t instanceof HTMLAnchorElement&&t.href){if(t.href.startsWith("blob:"))e&&l("outputFocus",e),ve(t.href,t.download);else if(t.href.startsWith("data:"))e&&l("outputFocus",e),Z(t.href,t.download);else if(t.getAttribute("href")?.trim().startsWith("#")){if(!t.hash){l("scroll-to-reveal",{scrollTop:0});return}let r=t.hash.substring(1),i=n.view.document.getElementById(r);if(!i){for(let s of n.view.document.querySelectorAll(".preview"))if(i=s.shadowRoot?.getElementById(r),i)break}if(i){let s=i.getBoundingClientRect().top+n.view.scrollY;l("scroll-to-reveal",{scrollTop:s});return}}else{let r=t.getAttribute("href");r&&(r.startsWith("command:")&&e&&l("outputFocus",e),l("clicked-link",{href:r}))}n.preventDefault(),n.stopPropagation();return}e&&l("outputFocus",e)},he=()=>{let n=window.getSelection();n&&n.removeAllRanges()},me=n=>{let e=window.getSelection();if(!e)return;let t=window.document.getElementById(n);if(!t)return;e.removeAllRanges();let r=document.createRange();r.selectNode(t),e.addRange(r)},fe=n=>{if(!window.document.getElementById(n))return;let t=window.document.activeElement;t&&H(t)&&t.select()},we=n=>{if(!v?.id||!n.shiftKey)return;if(n.shiftKey&&(n.code==="ArrowUp"||n.code==="ArrowDown")){n.stopPropagation();return}if(!(n.code==="PageUp"||n.code==="PageDown")&&!(n.metaKey&&(n.code==="ArrowDown"||n.code==="ArrowUp")))return;let e=window.document.getElementById(v.id),t=window.getSelection();if(!e||!t?.anchorNode)return;let r=window.document.activeElement;if(r&&H(r))return;n.stopPropagation(),n.preventDefault();let{anchorNode:i,anchorOffset:s}=t,o=document.createRange();n.code==="PageDown"||n.code==="ArrowDown"?(o.setStart(i,s),o.setEnd(e,1)):(o.setStart(e,0),o.setEnd(i,s)),t.removeAllRanges(),t.addRange(o)},be=n=>{if(!v?.id)return;let e=window.document.activeElement;if(!(e&&H(e))&&(n.key==="a"&&n.ctrlKey||n.metaKey&&n.key==="a")){n.preventDefault();return}},Z=async(n,e)=>{l("clicked-data-url",{data:n,downloadName:e})},ve=async(n,e)=>{try{let r=await(await fetch(n)).blob(),i=new FileReader;i.addEventListener("load",()=>{Z(i.result,e)}),i.readAsDataURL(r)}catch(t){console.error(t.message)}};window.document.body.addEventListener("click",pe),window.document.body.addEventListener("focusin",ge),window.document.body.addEventListener("focusout",ce),window.document.body.addEventListener("keydown",we),window.document.body.addEventListener("keydown",be);function ye(){return Object.freeze({onDidReceiveKernelMessage:ie.event,postKernelMessage:n=>l("customKernelMessage",{message:n})})}async function Ce(n){try{return await Ie(n)}catch(e){throw console.error(e),e}}async function Ie(n){let e=await __import(n);if(!e.activate){console.error(`Notebook preload '${n}' was expected to be a module but it does not export an 'activate' function`);return}return e.activate(ye())}let E=new class{pending=new Map;updateHeight(n,e,t){this.pending.size||setTimeout(()=>{this.updateImmediately()},0);let r=this.pending.get(n);r&&r.isOutput?this.pending.set(n,{id:n,height:e,init:r.init,isOutput:r.isOutput}):this.pending.set(n,{id:n,height:e,...t})}updateImmediately(){this.pending.size&&(l("dimension",{updates:Array.from(this.pending.values())}),this.pending.clear())}};function z(n){return n>2.1}let Q=new class{_observer;_observedElements=new WeakMap;_outputResizeTimer;constructor(){this._observer=new ResizeObserver(n=>{for(let e of n){if(!window.document.body.contains(e.target))continue;let t=this._observedElements.get(e.target);if(!t||(this.postResizeMessage(t.cellId),e.target.id!==t.id)||!e.contentRect)continue;if(!t.output){this.updateHeight(t,e.target.offsetHeight);continue}let r=z(e.contentRect.height);r&&t.lastKnownPadding===0||!r&&t.lastKnownPadding!==0?window.requestAnimationFrame(()=>{r?e.target.style.padding=`${p.style.outputNodePadding}px ${p.style.outputNodePadding}px ${p.style.outputNodePadding}px ${p.style.outputNodeLeftPadding}px`:e.target.style.padding="0px",this.updateHeight(t,r?e.target.offsetHeight:0)}):this.updateHeight(t,r?e.target.offsetHeight:0)}})}updateHeight(n,e){n.lastKnownHeight!==e&&(n.lastKnownHeight=e,E.updateHeight(n.id,e,{isOutput:n.output}))}observe(n,e,t,r){this._observedElements.has(n)||(this._observedElements.set(n,{id:e,output:t,lastKnownPadding:p.style.outputNodePadding,lastKnownHeight:-1,cellId:r}),this._observer.observe(n))}postResizeMessage(n){clearTimeout(this._outputResizeTimer),this._outputResizeTimer=setTimeout(()=>{l("outputResized",{cellId:n})},250)}},k,y,O,W;function j(n,e){if(O=n,e===void 0)return W=Date.now(),k=void 0,n.setAttribute("recentlyScrolled","true"),clearTimeout(y),y=setTimeout(()=>{O?.removeAttribute("recentlyScrolled")},300),!0;if(n.hasAttribute("recentlyScrolled")){if(W&&Date.now()-W>400){if(k&&e<0&&e<k-8)return clearTimeout(y),O?.removeAttribute("recentlyScrolled"),!1;if(k&&e>0&&e>k+8)return clearTimeout(y),O?.removeAttribute("recentlyScrolled"),!1;clearTimeout(y),y=setTimeout(()=>{O?.removeAttribute("recentlyScrolled")},50)}else clearTimeout(y),y=setTimeout(()=>{O?.removeAttribute("recentlyScrolled")},300);return k=e,!0}return!1}function Me(n){for(let e=n.target;e;e=e.parentNode){if(!(e instanceof Element)||e.id==="container"||e.classList.contains("cell_container")||e.classList.contains("markup")||e.classList.contains("output_container"))return!1;if(n.deltaY<0&&e.scrollTop>0)return j(e),!0;if(n.deltaY>0&&e.scrollTop+e.clientHeight<e.scrollHeight){if(e.scrollHeight-e.scrollTop-e.clientHeight<2||window.getComputedStyle(e).overflowY==="hidden"||window.getComputedStyle(e).overflowY==="visible")continue;return j(e),!0}if(j(e,n.deltaY))return!0}return!1}let Ee=n=>{n.defaultPrevented||Me(n)||l("did-scroll-wheel",{payload:{deltaMode:n.deltaMode,deltaX:n.deltaX,deltaY:n.deltaY,deltaZ:n.deltaZ,wheelDelta:n.wheelDelta&&S?n.wheelDelta/window.devicePixelRatio:n.wheelDelta,wheelDeltaX:n.wheelDeltaX&&S?n.wheelDeltaX/window.devicePixelRatio:n.wheelDeltaX,wheelDeltaY:n.wheelDeltaY&&S?n.wheelDeltaY/window.devicePixelRatio:n.wheelDeltaY,detail:n.detail,shiftKey:n.shiftKey,type:n.type}})};function ke(n,e){let t=window.document.getElementById(n)??(e?window.document.getElementById(e):void 0);if(t){if(t.contains(window.document.activeElement))return;let r=t.id,i=t.querySelector('[tabindex="0"], [href], button, input, option, select, textarea');if(!i)i=t,i.tabIndex=-1,l("outputInputFocus",{inputFocused:!1,id:r});else{let s=H(i);l("outputInputFocus",{inputFocused:s,id:r})}v=t,l("outputFocus",{id:t.id}),i.focus()}}function ee(n,e){let t=document.createElement("div");return t.id=`focus-sink-${n}`,t.tabIndex=0,t.addEventListener("focus",()=>{l("focus-editor",{cellId:n,focusNext:e})}),t}function Oe(n,e="mark",t={}){function r(a){if(!a.startContainer.ownerDocument)return[];if(a.startContainer.nodeType===Node.TEXT_NODE&&a.startOffset>0){let w=a.startContainer,B=a.endOffset,_=w.splitText(a.startOffset);a.endContainer===w&&a.setEnd(_,B-a.startOffset),a.setStart(_,0)}a.endContainer.nodeType===Node.TEXT_NODE&&a.endOffset<a.endContainer.length&&a.endContainer.splitText(a.endOffset);let u=a.startContainer.ownerDocument.createTreeWalker(a.commonAncestorContainer,NodeFilter.SHOW_TEXT,w=>a.intersectsNode(w)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT);u.currentNode=a.startContainer;let f=[];for(u.currentNode.nodeType===Node.TEXT_NODE&&f.push(u.currentNode);u.nextNode()&&a.comparePoint(u.currentNode,0)!==1;)u.currentNode.nodeType===Node.TEXT_NODE&&f.push(u.currentNode);return f}function i(a,u,f){let w=a.ownerDocument.createElement(u);Object.keys(f).forEach(_=>{w.setAttribute(_,f[_])});let B=a.ownerDocument.createRange();return B.selectNode(a),B.surroundContents(w),w}if(n.collapsed)return{remove:()=>{},update:()=>{}};let s=r(n),o=[];for(let a in s){let u=i(s[a],e,t);o.push(u)}function d(a){if(a.childNodes.length===1)a.parentNode?.replaceChild(a.firstChild,a);else{for(;a.firstChild;)a.parentNode?.insertBefore(a.firstChild,a);a.remove()}}function g(){for(let a in o)d(o[a])}function c(a,u={}){Object.keys(u).forEach(f=>{a.setAttribute(f,u[f])})}function h(a){for(let u in o)c(o[u],a)}return{remove:g,update:h}}function te(n){let e=window.getSelection();if(e)try{e.removeAllRanges();let t=document.createRange();t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.addRange(t)}catch(t){console.log(t)}}function Re(n,e,t="mark",r={}){if(e){let i=Oe(n,t,r);return{range:n,dispose:i.remove,update:(s,o)=>{o===void 0?i.update({style:`background-color: ${s}`}):i.update({class:o})}}}else{window.document.execCommand("hiliteColor",!1,N);let i=window.getSelection().getRangeAt(0).cloneRange(),s={collapsed:i.collapsed,commonAncestorContainer:i.commonAncestorContainer,endContainer:i.endContainer,endOffset:i.endOffset,startContainer:i.startContainer,startOffset:i.startOffset};return{range:s,dispose:()=>{te(s);try{document.designMode="On",window.document.execCommand("removeFormat",!1,void 0),document.designMode="Off",window.getSelection()?.removeAllRanges()}catch(o){console.log(o)}},update:(o,d)=>{te(s);try{document.designMode="On",window.document.execCommand("removeFormat",!1,void 0),window.document.execCommand("hiliteColor",!1,o),document.designMode="Off",window.getSelection()?.removeAllRanges()}catch(g){console.log(g)}}}}}function U(n=()=>{}){let e=new Set;return{fire(t){for(let r of[...e])r.fn.call(r.thisArg,t)},event(t,r,i){let s={fn:t,thisArg:r},o={dispose:()=>{e.delete(s),n(e)}};return e.add(s),n(e),i instanceof Array?i.push(o):i&&i.add(o),o}}}function L(n,e,t){e.innerText=n;let r=document.createElement("ul");for(let i of t){console.error(i);let s=document.createElement("li");s.innerText=i.message,r.appendChild(s)}e.appendChild(r)}let ne=new class{_requestPool=0;_requests=new Map;getOutputItem(n,e){let t=this._requestPool++,{promise:r,resolve:i}=x();return this._requests.set(t,{resolve:i}),l("getOutputItem",{requestId:t,outputId:n,mime:e}),r}resolveOutputItem(n,e){let t=this._requests.get(n);t&&(this._requests.delete(n),t.resolve(e))}},re=!1;function Se(n,e,t,r,i,s){function o(h,a,u,f,w){return Object.freeze({id:h,mime:a,metadata:u,appendedText(){if(w)return D.decode(w.valueBytes)},data(){return f},text(){return D.decode(f)},json(){return JSON.parse(this.text())},blob(){return new Blob([f],{type:this.mime})},get _allOutputItems(){return re||(re=!0,console.warn("'_allOutputItems' is proposed API. DO NOT ship an extension that depends on it!")),g}})}let d=new Map,g=Object.freeze(i.map(h=>{let a=h.mime;return Object.freeze({mime:a,getItem(){let u=d.get(a);if(u)return u;let f=ne.getOutputItem(n,a).then(w=>w?o(n,w.mime,t,w.valueBytes):void 0);return d.set(a,f),f}})})),c=o(n,e,t,r,s);return d.set(e,Promise.resolve(c)),c}let ie=U(),se=window.trustedTypes?.createPolicy("notebookRenderer",{createHTML:n=>n,createScript:n=>n});window.addEventListener("wheel",Ee);let N=window.getComputedStyle(window.document.getElementById("_defaultColorPalatte")).color,Te=window.getComputedStyle(window.document.getElementById("_defaultColorPalatte")).backgroundColor;class Ae{_activeHighlightInfo;constructor(){this._activeHighlightInfo=new Map}addHighlights(e,t){for(let i=e.length-1;i>=0;i--){let s=e[i],o=Re(s.originalRange,!0,"mark",s.isShadow?{style:"background-color: "+N+";"}:{class:"find-match"});s.highlightResult=o}let r={matches:e,currentMatchIndex:-1};this._activeHighlightInfo.set(t,r)}removeHighlights(e){this._activeHighlightInfo.get(e)?.matches.forEach(t=>{t.highlightResult?.dispose()}),this._activeHighlightInfo.delete(e)}highlightCurrentMatch(e,t){let r=this._activeHighlightInfo.get(t);if(!r){console.error("Modified current highlight match before adding highlight list.");return}let i=r.matches[r.currentMatchIndex];i?.highlightResult?.update(N,i.isShadow?void 0:"find-match");let s=r.matches[e];r.currentMatchIndex=e;let o=window.getSelection();if(s&&o&&s.highlightResult){let d=0;try{let g=window.document.getElementById(s.id).getBoundingClientRect().top,c=document.createRange();c.selectNode(s.highlightResult.range.startContainer),s.highlightResult.range.startContainer.parentElement?.scrollIntoView({behavior:"auto",block:"end",inline:"nearest"});let h=c.getBoundingClientRect().top;c.detach(),d=h-g}catch(g){console.error(g)}s.highlightResult?.update(Te,s.isShadow?void 0:"current-find-match"),window.document.getSelection()?.removeAllRanges(),l("didFindHighlightCurrent",{offset:d})}}unHighlightCurrentMatch(e,t){let r=this._activeHighlightInfo.get(t);if(!r)return;let i=r.matches[e];i&&i.highlightResult&&i.highlightResult.update(N,i.isShadow?void 0:"find-match")}dispose(){window.document.getSelection()?.removeAllRanges(),this._activeHighlightInfo.forEach(e=>{e.matches.forEach(t=>{t.highlightResult?.dispose()})})}}class _e{_activeHighlightInfo;_matchesHighlight;_currentMatchesHighlight;constructor(){this._activeHighlightInfo=new Map,this._matchesHighlight=new Highlight,this._matchesHighlight.priority=1,this._currentMatchesHighlight=new Highlight,this._currentMatchesHighlight.priority=2,CSS.highlights?.set("find-highlight",this._matchesHighlight),CSS.highlights?.set("current-find-highlight",this._currentMatchesHighlight)}_refreshRegistry(e=!0){e&&this._matchesHighlight.clear(),this._currentMatchesHighlight.clear(),this._activeHighlightInfo.forEach(t=>{if(e)for(let r=0;r<t.matches.length;r++)this._matchesHighlight.add(t.matches[r].originalRange);t.currentMatchIndex<t.matches.length&&t.currentMatchIndex>=0&&this._currentMatchesHighlight.add(t.matches[t.currentMatchIndex].originalRange)})}addHighlights(e,t){for(let i=0;i<e.length;i++)this._matchesHighlight.add(e[i].originalRange);let r={matches:e,currentMatchIndex:-1};this._activeHighlightInfo.set(t,r)}highlightCurrentMatch(e,t){let r=this._activeHighlightInfo.get(t);if(!r){console.error("Modified current highlight match before adding highlight list.");return}r.currentMatchIndex=e;let i=r.matches[e];if(i){let s=0;try{let o=window.document.getElementById(i.id).getBoundingClientRect().top;i.originalRange.startContainer.parentElement?.scrollIntoView({behavior:"auto",block:"end",inline:"nearest"}),s=i.originalRange.getBoundingClientRect().top-o,l("didFindHighlightCurrent",{offset:s})}catch(o){console.error(o)}}this._refreshRegistry(!1)}unHighlightCurrentMatch(e,t){let r=this._activeHighlightInfo.get(t);r&&(r.currentMatchIndex=-1)}removeHighlights(e){this._activeHighlightInfo.delete(e),this._refreshRegistry()}dispose(){window.document.getSelection()?.removeAllRanges(),this._currentMatchesHighlight.clear(),this._matchesHighlight.clear()}}let A=CSS.highlights?new _e:new Ae;function F(n){let t=n.getRangeAt(0).cloneRange(),r=n.toString().length;n.collapseToStart(),n.modify("move","backward","lineboundary"),n.modify("extend","forward","lineboundary");let i=n.toString(),s=He(n.getRangeAt(0),t),o={start:s,end:s+r};return n.removeAllRanges(),n.addRange(t),{line:i,range:o}}function He(n,e){let t=De(n.startContainer,e.startContainer),r=Y(t,n.startContainer)+n.startOffset;return Y(t,e.startContainer)+e.startOffset-r}function De(n,e){let t=new Range;return t.setStart(n,0),t.setEnd(e,0),t.commonAncestorContainer}function oe(n){let e=0;if(n.nodeType===Node.TEXT_NODE)e+=n.textContent?.length||0;else for(let t of n.childNodes)e+=oe(t);return e}function Y(n,e){if(!e)return 0;let t=0;if(e===n||!n.contains(e))return t;let r=e.previousSibling;for(;r;)t+=oe(r),r=r.previousSibling;return t+Y(n,e.parentNode)}let xe=(n,e)=>{let t=!0,r=[],i=document.createRange();i.selectNodeContents(window.document.getElementById("findStart"));let s=window.getSelection();s?.removeAllRanges(),s?.addRange(i),m.toggleDragDropEnabled(!1);try{for(document.designMode="On";t&&r.length<500;)if(t=window.find(n,!!e.caseSensitive,!1,!1,!!e.wholeWord,!0,!1),t){let o=window.getSelection();if(!o){console.log("no selection");break}if(e.includeMarkup&&o.rangeCount>0&&o.getRangeAt(0).startContainer.nodeType===1&&o.getRangeAt(0).startContainer.classList.contains("markup")){let g=o.anchorNode?.firstChild,c=g.shadowRoot,h=c?.getSelection?c?.getSelection():null;h&&h.anchorNode&&r.push({type:"preview",id:g.id,cellId:g.id,container:g,isShadow:!0,originalRange:h.getRangeAt(0),searchPreviewInfo:e.shouldGetSearchPreviewInfo?F(h):void 0})}if(e.includeOutput&&o.rangeCount>0&&o.getRangeAt(0).startContainer.nodeType===1&&o.getRangeAt(0).startContainer.classList.contains("output_container")){let g=o.getRangeAt(0).startContainer.parentElement.id,c=o.anchorNode?.firstChild,h=c.shadowRoot,a=h?.getSelection?h?.getSelection():null;a&&a.anchorNode&&r.push({type:"output",id:c.id,cellId:g,container:c,isShadow:!0,originalRange:a.getRangeAt(0),searchPreviewInfo:e.shouldGetSearchPreviewInfo?F(a):void 0})}let d=o.anchorNode?.parentElement;if(d){let g=r.length?r[r.length-1]:null;if(g&&g.container.contains(d)&&e.includeOutput)r.push({type:g.type,id:g.id,cellId:g.cellId,container:g.container,isShadow:!1,originalRange:o.getRangeAt(0),searchPreviewInfo:e.shouldGetSearchPreviewInfo?F(o):void 0});else for(let c=d;c&&c instanceof Element;c=c.parentElement){if(c.classList.contains("output")&&e.includeOutput){let h=c.parentElement?.parentElement?.id;h&&r.push({type:"output",id:c.id,cellId:h,container:c,isShadow:!1,originalRange:o.getRangeAt(0),searchPreviewInfo:e.shouldGetSearchPreviewInfo?F(o):void 0});break}if(c.id==="container"||c===window.document.body)break}}else break}}catch(o){console.log(o)}r=r.filter(o=>e.findIds.length?e.findIds.includes(o.cellId):!0),A.addHighlights(r,e.ownerID),window.document.getSelection()?.removeAllRanges(),m.toggleDragDropEnabled(I.dragAndDropEnabled),document.designMode="Off",l("didFind",{matches:r.map((o,d)=>({type:o.type,id:o.id,cellId:o.cellId,index:d,searchPreviewInfo:o.searchPreviewInfo}))})},ae=async(n,e,t=5)=>{if(!window.document.hasFocus()&&t>0){setTimeout(()=>{ae(n,e,t-1)},50);return}try{let r=window.document.getElementById(n)??window.document.getElementById(e),i=r?.querySelector("img");if(!i){let s=r?.querySelector("svg.output-image")??r?.querySelector("div.svgContainerStyle > svg");s&&(i=new Image,i.src="data:image/svg+xml,"+encodeURIComponent(s.outerHTML))}if(i){let s=i;await navigator.clipboard.write([new ClipboardItem({"image/png":new Promise(o=>{let d=document.createElement("canvas");d.width=s.naturalWidth,d.height=s.naturalHeight,d.getContext("2d").drawImage(s,0,0),d.toBlob(c=>{c?o(c):console.error("No blob data to write to clipboard"),d.remove()},"image/png")})})])}else console.error("Could not find image element to copy for output with id",n)}catch(r){console.error("Could not copy image:",r)}};window.addEventListener("message",async n=>{let e=n;switch(e.data.type){case"initializeMarkup":{try{await Promise.all(e.data.cells.map(t=>m.ensureMarkupCell(t)))}finally{E.updateImmediately(),l("initializedMarkup",{requestId:e.data.requestId})}break}case"createMarkupCell":m.ensureMarkupCell(e.data.cell);break;case"showMarkupCell":m.showMarkupCell(e.data.id,e.data.top,e.data.content,e.data.metadata);break;case"hideMarkupCells":for(let t of e.data.ids)m.hideMarkupCell(t);break;case"unhideMarkupCells":for(let t of e.data.ids)m.unhideMarkupCell(t);break;case"deleteMarkupCell":for(let t of e.data.ids)m.deleteMarkupCell(t);break;case"updateSelectedMarkupCells":m.updateSelectedCells(e.data.selectedCellIds);break;case"html":{let t=e.data;t.createOnIdle?b.enqueueIdle(t.outputId,r=>m.renderOutputCell(t,r)):b.enqueue(t.outputId,r=>m.renderOutputCell(t,r));break}case"view-scroll":{e.data.widgets.forEach(t=>{b.enqueue(t.outputId,()=>{m.updateOutputsScroll([t])})}),m.updateMarkupScrolls(e.data.markupCells);break}case"clear":C.clearAll(),m.clearAll(),window.document.getElementById("container").innerText="";break;case"clearOutput":{let{cellId:t,rendererId:r,outputId:i}=e.data;b.cancelOutput(i),m.clearOutput(t,i,r);break}case"hideOutput":{let{cellId:t,outputId:r}=e.data;b.enqueue(r,()=>{m.hideOutput(t)});break}case"showOutput":{let{outputId:t,cellTop:r,cellId:i,content:s}=e.data;b.enqueue(t,()=>{m.showOutput(i,t,r),s&&m.updateAndRerender(i,t,s)});break}case"copyImage":{await ae(e.data.outputId,e.data.altOutputId);break}case"ack-dimension":{for(let{cellId:t,outputId:r,height:i}of e.data.updates)m.updateOutputHeight(t,r,i);break}case"preload":{let t=e.data.resources;for(let{uri:r}of t)q.load(r);break}case"updateRenderers":{let{rendererData:t}=e.data;C.updateRendererData(t);break}case"focus-output":ke(e.data.cellOrOutputId,e.data.alternateId);break;case"blur-output":he();break;case"select-output-contents":me(e.data.cellOrOutputId);break;case"select-input-contents":fe(e.data.cellOrOutputId);break;case"decorations":{let t=window.document.getElementById(e.data.cellId);t||(m.ensureOutputCell(e.data.cellId,-1e5,!0),t=window.document.getElementById(e.data.cellId)),t?.classList.add(...e.data.addedClassNames),t?.classList.remove(...e.data.removedClassNames);break}case"customKernelMessage":ie.fire(e.data.message);break;case"customRendererMessage":C.getRenderer(e.data.rendererId)?.receiveMessage(e.data.message);break;case"notebookStyles":{let t=window.document.documentElement.style;for(let r=t.length-1;r>=0;r--){let i=t[r];i&&i.startsWith("--notebook-")&&t.removeProperty(i)}for(let[r,i]of Object.entries(e.data.styles))t.setProperty(`--${r}`,i);break}case"notebookOptions":I=e.data.options,m.toggleDragDropEnabled(I.dragAndDropEnabled),M=e.data.renderOptions,J.fire(M);break;case"tokenizedCodeBlock":{let{codeBlockId:t,html:r}=e.data;R.highlightCodeBlock(t,r);break}case"tokenizedStylesChanged":{P.replaceSync(e.data.css);break}case"find":{A.removeHighlights(e.data.options.ownerID),xe(e.data.query,e.data.options);break}case"findHighlightCurrent":{A?.highlightCurrentMatch(e.data.index,e.data.ownerID);break}case"findUnHighlightCurrent":{A?.unHighlightCurrentMatch(e.data.index,e.data.ownerID);break}case"findStop":{A.removeHighlights(e.data.ownerID);break}case"returnOutputItem":ne.resolveOutputItem(e.data.requestId,e.data.output)}});let le="vscode.fallbackToNextRenderer";class Pe{constructor(e){this.data=e}_onMessageEvent=U();_loadPromise;_api;receiveMessage(e){this._onMessageEvent.fire(e)}async renderOutputItem(e,t,r){try{await this.load()}catch(i){r.aborted||L(`Error loading renderer '${this.data.id}'`,t,i instanceof Error?[i]:[]);return}if(!this._api){r.aborted||L(`Renderer '${this.data.id}' does not implement renderOutputItem`,t,[]);return}try{let i=performance.now();await this._api.renderOutputItem(e,t,r),this.postDebugMessage("Rendered output item",{id:e.id,duration:`${performance.now()-i}ms`})}catch(i){if(r.aborted)return;if(i instanceof Error&&i.name===le)throw i;L(`Error rendering output item using '${this.data.id}'`,t,i instanceof Error?[i]:[]),this.postDebugMessage("Rendering output item failed",{id:e.id,error:i+""})}}disposeOutputItem(e){this._api?.disposeOutputItem?.(e)}createRendererContext(){let{id:e,messaging:t}=this.data,r={setState:i=>T.setState({...T.getState(),[e]:i}),getState:()=>{let i=T.getState();return typeof i=="object"&&i?i[e]:void 0},getRenderer:async i=>{let s=C.getRenderer(i);if(s)return s._api?s._api:s.load()},workspace:{get isTrusted(){return G}},settings:{get lineLimit(){return M.lineLimit},get outputScrolling(){return M.outputScrolling},get outputWordWrap(){return M.outputWordWrap},get linkifyFilePaths(){return M.linkifyFilePaths},get minimalError(){return M.minimalError}},get onDidChangeSettings(){return J.event}};return t&&(r.onDidReceiveMessage=this._onMessageEvent.event,r.postMessage=i=>l("customRendererMessage",{rendererId:e,message:i})),Object.freeze(r)}load(){return this._loadPromise??=this._load(),this._loadPromise}async _load(){this.postDebugMessage("Start loading renderer");try{await q.waitForAllCurrent();let e=performance.now(),t=await __import(this.data.entrypoint.path);if(this.postDebugMessage("Imported renderer",{duration:`${performance.now()-e}ms`}),!t)return;this._api=await t.activate(this.createRendererContext()),this.postDebugMessage("Activated renderer",{duration:`${performance.now()-e}ms`});let r=p.rendererData.filter(i=>i.entrypoint.extends===this.data.id);return r.length&&this.postDebugMessage("Activating dependant renderers",{dependents:r.map(i=>i.id).join(", ")}),await Promise.all(r.map(async i=>{let s=C.getRenderer(i.id);if(!s)throw new Error(`Could not find extending renderer: ${i.id}`);try{return await s.load()}catch(o){console.error(o),this.postDebugMessage("Activating dependant renderer failed",{dependent:i.id,error:o+""});return}})),this._api}catch(e){throw this.postDebugMessage("Loading renderer failed"),e}}postDebugMessage(e,t){l("logRendererDebugMessage",{message:`[renderer ${this.data.id}] - ${e}`,data:t})}}let q=new class{preloads=new Map;waitFor(n){return this.preloads.get(n)||Promise.resolve(new Error(`Preload not ready: ${n}`))}load(n){let e=Promise.all([Ce(n),this.waitForAllCurrent()]);return this.preloads.set(n,e),e}waitForAllCurrent(){return Promise.all([...this.preloads.values()].map(n=>n.catch(e=>e)))}},b=new class{outputs=new Map;enqueue(n,e){this.pendingOutputCreationRequest.get(n)?.dispose(),this.pendingOutputCreationRequest.delete(n);let t=this.outputs.get(n);if(t)t.queue=t.queue.then(async r=>{t.abort.signal.aborted||await e(t.abort.signal)});else{let r=new AbortController;this.outputs.set(n,{abort:r,queue:new Promise(i=>i(e(r.signal)))})}}pendingOutputCreationRequest=new Map;enqueueIdle(n,e){this.pendingOutputCreationRequest.get(n)?.dispose(),b.pendingOutputCreationRequest.set(n,ue(()=>{b.enqueue(n,e),b.pendingOutputCreationRequest.delete(n)}))}cancelAll(){this.pendingOutputCreationRequest.forEach(n=>n.dispose()),this.pendingOutputCreationRequest.clear();for(let{abort:n}of this.outputs.values())n.abort();this.outputs.clear()}cancelOutput(n){this.pendingOutputCreationRequest.get(n)?.dispose(),this.pendingOutputCreationRequest.delete(n);let e=this.outputs.get(n);e&&(e.abort.abort(),this.outputs.delete(n))}},C=new class{_renderers=new Map;constructor(){for(let n of p.rendererData)this.addRenderer(n)}getRenderer(n){return this._renderers.get(n)}rendererEqual(n,e){if(n.id!==e.id||n.entrypoint.path!==e.entrypoint.path||n.entrypoint.extends!==e.entrypoint.extends||n.messaging!==e.messaging||n.mimeTypes.length!==e.mimeTypes.length)return!1;for(let t=0;t<n.mimeTypes.length;t++)if(n.mimeTypes[t]!==e.mimeTypes[t])return!1;return!0}updateRendererData(n){let e=new Set(this._renderers.keys()),t=new Set(n.map(r=>r.id));for(let r of n){let i=this._renderers.get(r.id);i&&this.rendererEqual(i.data,r)||this.addRenderer(r)}for(let r of e)t.has(r)||this._renderers.delete(r)}addRenderer(n){this._renderers.set(n.id,new Pe(n))}clearAll(){b.cancelAll();for(let n of this._renderers.values())n.disposeOutputItem()}clearOutput(n,e){b.cancelOutput(e),this._renderers.get(n)?.disposeOutputItem(e)}async render(n,e,t,r){let i=this.findRenderer(e,n);if(!i){let o=(window.document.documentElement.style.getPropertyValue("--notebook-cell-renderer-not-found-error")||"").replace("$0",()=>n.mime);this.showRenderError(n,t,o);return}if(!(await this._doRender(n,t,i,r)).continue)return;for(let o of n._allOutputItems){if(o.mime===n.mime)continue;let d=await o.getItem();if(r.aborted)return;if(d){let g=this.findRenderer(void 0,d);if(g&&!(await this._doRender(d,t,g,r)).continue)return}}let s=(window.document.documentElement.style.getPropertyValue("--notebook-cell-renderer-fallbacks-exhausted")||"").replace("$0",()=>n.mime);this.showRenderError(n,t,s)}async _doRender(n,e,t,r){try{return await t.renderOutputItem(n,e,r),{continue:!1}}catch(i){if(r.aborted)return{continue:!1};if(i instanceof Error&&i.name===le)return{continue:!0};throw i}}findRenderer(n,e){let t;if(typeof n=="string")t=Array.from(this._renderers.values()).find(r=>r.data.id===n);else{let r=Array.from(this._renderers.values()).filter(i=>i.data.mimeTypes.includes(e.mime)&&!i.data.entrypoint.extends);r.length&&(r.sort((i,s)=>+i.data.isBuiltin-+s.data.isBuiltin),t=r[0])}return t}showRenderError(n,e,t){let r=document.createElement("div"),i=document.createElement("div");i.className="no-renderer-error",i.innerText=t;let s=document.createElement("div");s.innerText=n.text(),r.appendChild(i),r.appendChild(s),e.innerText="",e.appendChild(r)}},m=new class{_markupCells=new Map;_outputCells=new Map;clearAll(){for(let e of this._markupCells.values())e.dispose();this._markupCells.clear();for(let e of this._outputCells.values())e.dispose();this._outputCells.clear()}async createMarkupCell(e,t,r){let i=this._markupCells.get(e.cellId);if(i)return console.error(`Trying to create markup that already exists: ${e.cellId}`),i;let s=new Le(e.cellId,e.mime,e.content,t,e.metadata);return s.element.style.visibility=r?"":"hidden",this._markupCells.set(e.cellId,s),await s.ready,s}async ensureMarkupCell(e){let t=this._markupCells.get(e.cellId);t?(t.element.style.visibility=e.visible?"":"hidden",await t.updateContentAndRender(e.content,e.metadata)):t=await this.createMarkupCell(e,e.offset,e.visible)}deleteMarkupCell(e){let t=this.getExpectedMarkupCell(e);t&&(t.remove(),t.dispose(),this._markupCells.delete(e))}async updateMarkupContent(e,t,r){await this.getExpectedMarkupCell(e)?.updateContentAndRender(t,r)}showMarkupCell(e,t,r,i){this.getExpectedMarkupCell(e)?.show(t,r,i)}hideMarkupCell(e){this.getExpectedMarkupCell(e)?.hide()}unhideMarkupCell(e){this.getExpectedMarkupCell(e)?.unhide()}getExpectedMarkupCell(e){let t=this._markupCells.get(e);if(!t){console.log(`Could not find markup cell '${e}'`);return}return t}updateSelectedCells(e){let t=new Set(e);for(let r of this._markupCells.values())r.setSelected(t.has(r.id))}toggleDragDropEnabled(e){for(let t of this._markupCells.values())t.toggleDragDropEnabled(e)}updateMarkupScrolls(e){for(let{id:t,top:r}of e){let i=this._markupCells.get(t);i&&(i.element.style.top=`${r}px`)}}async renderOutputCell(e,t){let r=await Promise.all(e.requiredPreloads.map(s=>q.waitFor(s.uri).then(()=>{},o=>o)));return t.aborted?void 0:this.ensureOutputCell(e.cellId,e.cellTop,!1).renderOutputElement(e,r,t)}ensureOutputCell(e,t,r){let i=this._outputCells.get(e),s=!!i;return i||(i=new Ne(e),this._outputCells.set(e,i)),s&&r||(i.element.style.top=t+"px"),i}clearOutput(e,t,r){this._outputCells.get(e)?.clearOutput(t,r)}showOutput(e,t,r){this._outputCells.get(e)?.show(t,r)}updateAndRerender(e,t,r){this._outputCells.get(e)?.updateContentAndRerender(t,r)}hideOutput(e){this._outputCells.get(e)?.hide()}updateOutputHeight(e,t,r){this._outputCells.get(e)?.updateOutputHeight(t,r)}updateOutputsScroll(e){for(let t of e)this._outputCells.get(t.cellId)?.updateScroll(t)}};class R{static pendingCodeBlocksToHighlight=new Map;static highlightCodeBlock(e,t){let r=R.pendingCodeBlocksToHighlight.get(e);if(!r)return;let i=se?.createHTML(t)??t;r.innerHTML=i;let s=r.getRootNode();s instanceof ShadowRoot&&(s.adoptedStyleSheets.includes(P)||s.adoptedStyleSheets.push(P))}static requestHighlightCodeBlock(e){let t=[],r=0;for(let i of e.querySelectorAll(".vscode-code-block")){let s=i.getAttribute("data-vscode-code-block-lang");if(i.textContent&&s){let o=`${Date.now()}-${r++}`;t.push({value:i.textContent,lang:s,id:o}),R.pendingCodeBlocksToHighlight.set(o,i)}}return t}}class Le{ready;id;element;outputItem;_content;_isDisposed=!1;renderTaskAbort;constructor(e,t,r,i,s){let o=this;this.id=e,this._content={value:r,version:0,metadata:s};let{promise:d,resolve:g,reject:c}=x();this.ready=d;let h;this.outputItem=Object.freeze({id:e,mime:t,get metadata(){return o._content.metadata},text:()=>this._content.value,json:()=>{},data:()=>{if(h?.version===this._content.version)return h.value;let f=K.encode(this._content.value);return h={version:this._content.version,value:f},f},blob(){return new Blob([this.data()],{type:this.mime})},_allOutputItems:[{mime:t,getItem:async()=>this.outputItem}]});let a=window.document.getElementById("container"),u=document.createElement("div");u.className="markup",u.style.position="absolute",u.style.width="100%",this.element=document.createElement("div"),this.element.id=this.id,this.element.classList.add("preview"),this.element.style.position="absolute",this.element.style.top=i+"px",this.toggleDragDropEnabled(I.dragAndDropEnabled),u.appendChild(this.element),a.appendChild(u),this.addEventListeners(),this.updateContentAndRender(this._content.value,this._content.metadata).then(()=>{this._isDisposed||Q.observe(this.element,this.id,!1,this.id),g()},()=>c())}dispose(){this._isDisposed=!0,this.renderTaskAbort?.abort(),this.renderTaskAbort=void 0}addEventListeners(){this.element.addEventListener("dblclick",()=>{l("toggleMarkupPreview",{cellId:this.id})}),this.element.addEventListener("click",e=>{l("clickMarkupCell",{cellId:this.id,altKey:e.altKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,shiftKey:e.shiftKey})}),this.element.addEventListener("contextmenu",e=>{l("contextMenuMarkupCell",{cellId:this.id,clientX:e.clientX,clientY:e.clientY})}),this.element.addEventListener("mouseenter",()=>{l("mouseEnterMarkupCell",{cellId:this.id})}),this.element.addEventListener("mouseleave",()=>{l("mouseLeaveMarkupCell",{cellId:this.id})}),this.element.addEventListener("dragstart",e=>{X.startDrag(e,this.id)}),this.element.addEventListener("drag",e=>{X.updateDrag(e,this.id)}),this.element.addEventListener("dragend",e=>{X.endDrag(e,this.id)})}async updateContentAndRender(e,t){this._content={value:e,version:this._content.version+1,metadata:t},this.renderTaskAbort?.abort();let r=new AbortController;this.renderTaskAbort=r;try{await C.render(this.outputItem,void 0,this.element,this.renderTaskAbort.signal)}finally{this.renderTaskAbort===r&&(this.renderTaskAbort=void 0)}let i=this.element.shadowRoot??this.element,s=[];for(let d of i.children)switch(d.tagName){case"LINK":case"SCRIPT":case"STYLE":break;default:s.push(d.outerHTML);break}let o=R.requestHighlightCodeBlock(i);l("renderedMarkup",{cellId:this.id,html:s.join(""),codeBlocks:o}),E.updateHeight(this.id,this.element.offsetHeight,{isOutput:!1})}show(e,t,r){this.element.style.visibility="",this.element.style.top=`${e}px`,typeof t=="string"||r?this.updateContentAndRender(t??this._content.value,r??this._content.metadata):this.updateMarkupDimensions()}hide(){this.element.style.visibility="hidden"}unhide(){this.element.style.visibility="",this.updateMarkupDimensions()}remove(){this.element.remove()}async updateMarkupDimensions(){E.updateHeight(this.id,this.element.offsetHeight,{isOutput:!1})}setSelected(e){this.element.classList.toggle("selected",e)}toggleDragDropEnabled(e){e?(this.element.classList.add("draggable"),this.element.setAttribute("draggable","true")):(this.element.classList.remove("draggable"),this.element.removeAttribute("draggable"))}}class Ne{element;outputElements=new Map;constructor(e){let t=window.document.getElementById("container"),r=ee(e);t.appendChild(r),this.element=document.createElement("div"),this.element.style.position="absolute",this.element.style.outline="0",this.element.id=e,this.element.classList.add("cell_container"),t.appendChild(this.element),this.element=this.element;let i=ee(e,!0);t.appendChild(i)}dispose(){for(let e of this.outputElements.values())e.dispose();this.outputElements.clear()}createOutputElement(e){let t=this.outputElements.get(e.outputId);return t||(t=new Fe(e.outputId),this.element.appendChild(t.element),this.outputElements.set(e.outputId,t)),t.createOutputElement(e.outputId,e.outputOffset,e.left,e.cellId)}async renderOutputElement(e,t,r){let i=Date.now(),s=this.createOutputElement(e);if(await s.render(e.content,e.rendererId,t,r),s.element.style.visibility=e.initiallyHidden?"hidden":"",e.executionId&&e.rendererId){let o,d;e.content.type===1&&(o=e.content.output.valueBytes.length,d=e.content.output.mime),l("notebookPerformanceMessage",{cellId:e.cellId,executionId:e.executionId,duration:Date.now()-i,rendererId:e.rendererId,outputSize:o,mimeType:d})}}clearOutput(e,t){let r=this.outputElements.get(e);r?.clear(t),r?.dispose(),this.outputElements.delete(e)}show(e,t){this.outputElements.get(e)&&(this.element.style.visibility="",this.element.style.top=`${t}px`)}hide(){this.element.style.visibility="hidden"}updateContentAndRerender(e,t){this.outputElements.get(e)?.updateContentAndRender(t)}updateOutputHeight(e,t){this.outputElements.get(e)?.updateHeight(t)}updateScroll(e){this.element.style.top=`${e.cellTop}px`;let t=this.outputElements.get(e.outputId);t&&(t.updateScroll(e.outputOffset),e.forceDisplay&&t.outputNode&&(t.outputNode.element.style.visibility="")),e.forceDisplay&&(this.element.style.visibility="")}}class Fe{constructor(e){this.outputId=e;this.element=document.createElement("div"),this.element.classList.add("output_container"),this.element.setAttribute("data-vscode-context",JSON.stringify({preventDefaultContextMenuItems:!0})),this.element.style.position="absolute",this.element.style.overflow="hidden"}element;_outputNode;get outputNode(){return this._outputNode}dispose(){this._outputNode?.dispose()}clear(e){e&&C.clearOutput(e,this.outputId),this.element.remove()}updateHeight(e){this.element.style.maxHeight=`${e}px`,this.element.style.height=`${e}px`}updateScroll(e){this.element.style.top=`${e}px`}createOutputElement(e,t,r,i){return this.element.innerText="",this.element.style.maxHeight="0px",this.element.style.top=`${t}px`,this._outputNode?.dispose(),this._outputNode=new qe(e,r,i),this.element.appendChild(this._outputNode.element),this._outputNode}updateContentAndRender(e){this._outputNode?.updateAndRerender(e)}}T.postMessage({__vscode_notebook_message:!0,type:"initialized"});for(let n of p.staticPreloadsData)q.load(n.entrypoint);function l(n,e){T.postMessage({__vscode_notebook_message:!0,type:n,...e})}class qe{constructor(e,t,r){this.outputId=e;this.cellId=r;this.element=document.createElement("div"),this.element.id=e,this.element.classList.add("output"),this.element.style.position="absolute",this.element.style.top="0px",this.element.style.left=t+"px",this.element.style.padding=`${p.style.outputNodePadding}px ${p.style.outputNodePadding}px ${p.style.outputNodePadding}px ${p.style.outputNodeLeftPadding}`,this.element.addEventListener("mouseenter",()=>{l("mouseenter",{id:e})}),this.element.addEventListener("mouseleave",()=>{l("mouseleave",{id:e})})}element;_content;hasResizeObserver=!1;renderTaskAbort;dispose(){this.renderTaskAbort?.abort(),this.renderTaskAbort=void 0}async render(e,t,r,i){if(this.renderTaskAbort?.abort(),this.renderTaskAbort=void 0,this._content={preferredRendererId:t,preloadErrors:r},e.type===0){let a=se?.createHTML(e.htmlContent)??e.htmlContent;this.element.innerHTML=a}else if(r.some(a=>a instanceof Error)){let a=r.filter(u=>u instanceof Error);L("Error loading preloads",this.element,a)}else{let a=Se(this.outputId,e.output.mime,e.metadata,e.output.valueBytes,e.allOutputs,e.output.appended),u=new AbortController;this.renderTaskAbort=u,i?.addEventListener("abort",()=>u.abort());try{await C.render(a,t,this.element,u.signal)}finally{this.renderTaskAbort===u&&(this.renderTaskAbort=void 0)}}this.hasResizeObserver||(this.hasResizeObserver=!0,Q.observe(this.element,this.outputId,!0,this.cellId));let s=this.element.offsetHeight,o=document.defaultView.getComputedStyle(this.element),d=parseFloat(o.paddingTop)+parseFloat(o.paddingBottom),g=s-d;z(g)&&o.padding==="0px"?(E.updateHeight(this.outputId,s+p.style.outputNodePadding*2,{isOutput:!0,init:!0}),this.element.style.padding=`${p.style.outputNodePadding}px ${p.style.outputNodePadding}px ${p.style.outputNodePadding}px ${p.style.outputNodeLeftPadding}`):z(g)?(E.updateHeight(this.outputId,this.element.offsetHeight,{isOutput:!0,init:!0}),this.element.style.padding=`0 ${p.style.outputNodePadding}px 0 ${p.style.outputNodeLeftPadding}`):E.updateHeight(this.outputId,0,{isOutput:!0,init:!0});let c=this.element.shadowRoot??this.element,h=R.requestHighlightCodeBlock(c);h.length>0&&l("renderedCellOutput",{codeBlocks:h})}updateAndRerender(e){this._content&&this.render(e,this._content.preferredRendererId,this._content.preloadErrors)}}let X=new class{currentDrag;dragOverlay;constructor(){window.document.addEventListener("dragover",e=>{e.preventDefault()}),window.document.addEventListener("drop",e=>{e.preventDefault();let t=this.currentDrag;t&&(this.currentDrag=void 0,l("cell-drop",{cellId:t.cellId,ctrlKey:e.ctrlKey,altKey:e.altKey,dragOffsetY:e.clientY}))})}startDrag(e,t){if(!e.dataTransfer||!I.dragAndDropEnabled)return;this.currentDrag={cellId:t,clientY:e.clientY};let r=9999;this.dragOverlay||(this.dragOverlay=document.createElement("div"),this.dragOverlay.style.position="absolute",this.dragOverlay.style.top="0",this.dragOverlay.style.left="0",this.dragOverlay.style.zIndex=`${r}`,this.dragOverlay.style.width="100%",this.dragOverlay.style.height="100%",this.dragOverlay.style.background="transparent",window.document.body.appendChild(this.dragOverlay)),e.target.style.zIndex=`${r+1}`,e.target.classList.add("dragging"),l("cell-drag-start",{cellId:t,dragOffsetY:e.clientY});let i=()=>{this.currentDrag?.cellId===t&&(l("cell-drag",{cellId:t,dragOffsetY:this.currentDrag.clientY}),window.requestAnimationFrame(i))};window.requestAnimationFrame(i)}updateDrag(e,t){t!==this.currentDrag?.cellId?this.currentDrag=void 0:this.currentDrag={cellId:t,clientY:e.clientY}}endDrag(e,t){this.currentDrag=void 0,e.target.classList.remove("dragging"),l("cell-drag-end",{cellId:t}),this.dragOverlay&&(this.dragOverlay.remove(),this.dragOverlay=void 0),e.target.style.zIndex=""}}}function ze(p,V,S,K,D,x,I){return`
		const __import = (x) => import(x);
		(${Be})(
			JSON.parse(decodeURIComponent("${encodeURIComponent(JSON.stringify({style:p,options:V,renderOptions:S,rendererData:K,staticPreloadsData:D,isWorkspaceTrusted:x,nonce:I}))}"))
		)
//# sourceURL=notebookWebviewPreloads.js
`}function H(p){return p.tagName.toLowerCase()==="input"||p.tagName.toLowerCase()==="textarea"||"editContext"in p}export{H as isEditableElement,ze as preloadsScriptStr};
