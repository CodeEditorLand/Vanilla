{
  "version": 3,
  "sources": ["../../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/notebook/browser/contrib/find/notebookFindReplaceWidget.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from \"../../../../../../base/browser/dom.js\";\nimport * as nls from \"../../../../../../nls.js\";\nimport \"./notebookFindReplaceWidget.css\";\nimport type { IActionViewItemOptions } from \"../../../../../../base/browser/ui/actionbar/actionViewItems.js\";\nimport { ActionBar } from \"../../../../../../base/browser/ui/actionbar/actionbar.js\";\nimport {\n\tAnchorAlignment,\n\ttype IContextViewProvider,\n} from \"../../../../../../base/browser/ui/contextview/contextview.js\";\nimport { DropdownMenuActionViewItem } from \"../../../../../../base/browser/ui/dropdown/dropdownActionViewItem.js\";\nimport {\n\tFindInput,\n\ttype IFindInputOptions,\n} from \"../../../../../../base/browser/ui/findinput/findInput.js\";\nimport type { ReplaceInput } from \"../../../../../../base/browser/ui/findinput/replaceInput.js\";\nimport type { IMessage as InputBoxMessage } from \"../../../../../../base/browser/ui/inputbox/inputBox.js\";\nimport { ProgressBar } from \"../../../../../../base/browser/ui/progressbar/progressbar.js\";\nimport {\n\ttype ISashEvent,\n\tOrientation,\n\tSash,\n} from \"../../../../../../base/browser/ui/sash/sash.js\";\nimport {\n\ttype IToggleStyles,\n\tToggle,\n} from \"../../../../../../base/browser/ui/toggle/toggle.js\";\nimport { Widget } from \"../../../../../../base/browser/ui/widget.js\";\nimport {\n\tAction,\n\tActionRunner,\n\ttype IAction,\n\ttype IActionRunner,\n\tSeparator,\n} from \"../../../../../../base/common/actions.js\";\nimport { Delayer } from \"../../../../../../base/common/async.js\";\nimport { Codicon } from \"../../../../../../base/common/codicons.js\";\nimport { KeyCode } from \"../../../../../../base/common/keyCodes.js\";\nimport { Disposable } from \"../../../../../../base/common/lifecycle.js\";\nimport { isSafari } from \"../../../../../../base/common/platform.js\";\nimport { ThemeIcon } from \"../../../../../../base/common/themables.js\";\nimport type { Range } from \"../../../../../../editor/common/core/range.js\";\nimport {\n\tFindReplaceState,\n\ttype FindReplaceStateChangedEvent,\n} from \"../../../../../../editor/contrib/find/browser/findState.js\";\nimport {\n\tSimpleButton,\n\tfindNextMatchIcon,\n\tfindPreviousMatchIcon,\n\tfindReplaceAllIcon,\n\tfindReplaceIcon,\n\tfindSelectionIcon,\n} from \"../../../../../../editor/contrib/find/browser/findWidget.js\";\nimport {\n\tReplacePattern,\n\tparseReplaceString,\n} from \"../../../../../../editor/contrib/find/browser/replacePattern.js\";\nimport { createAndFillInActionBarActions } from \"../../../../../../platform/actions/browser/menuEntryActionViewItem.js\";\nimport type { IMenu } from \"../../../../../../platform/actions/common/actions.js\";\nimport { IConfigurationService } from \"../../../../../../platform/configuration/common/configuration.js\";\nimport { IContextKeyService } from \"../../../../../../platform/contextkey/common/contextkey.js\";\nimport {\n\tIContextMenuService,\n\tIContextViewService,\n} from \"../../../../../../platform/contextview/browser/contextView.js\";\nimport {\n\tContextScopedReplaceInput,\n\tregisterAndCreateHistoryNavigationContext,\n} from \"../../../../../../platform/history/browser/contextScopedHistoryWidget.js\";\nimport { IHoverService } from \"../../../../../../platform/hover/browser/hover.js\";\nimport { IInstantiationService } from \"../../../../../../platform/instantiation/common/instantiation.js\";\nimport {\n\tdefaultInputBoxStyles,\n\tdefaultProgressBarStyles,\n\tdefaultToggleStyles,\n} from \"../../../../../../platform/theme/browser/defaultStyles.js\";\nimport {\n\tasCssVariable,\n\tinputActiveOptionBackground,\n\tinputActiveOptionBorder,\n\tinputActiveOptionForeground,\n} from \"../../../../../../platform/theme/common/colorRegistry.js\";\nimport {\n\tregisterIcon,\n\twidgetClose,\n} from \"../../../../../../platform/theme/common/iconRegistry.js\";\nimport { registerThemingParticipant } from \"../../../../../../platform/theme/common/themeService.js\";\nimport { filterIcon } from \"../../../../extensions/browser/extensionsIcons.js\";\nimport {\n\tNotebookFindScopeType,\n\tNotebookSetting,\n} from \"../../../common/notebookCommon.js\";\nimport type { ICellRange } from \"../../../common/notebookRange.js\";\nimport type {\n\tICellModelDecorations,\n\tICellModelDeltaDecorations,\n\tICellViewModel,\n\tINotebookDeltaDecoration,\n\tINotebookEditor,\n} from \"../../notebookBrowser.js\";\nimport { NotebookFindFilters } from \"./findFilters.js\";\nimport type { IShowNotebookFindWidgetOptions } from \"./notebookFindWidget.js\";\n\nconst NLS_FIND_INPUT_LABEL = nls.localize(\"label.find\", \"Find\");\nconst NLS_FIND_INPUT_PLACEHOLDER = nls.localize(\"placeholder.find\", \"Find\");\nconst NLS_PREVIOUS_MATCH_BTN_LABEL = nls.localize(\n\t\"label.previousMatchButton\",\n\t\"Previous Match\",\n);\nconst NLS_NEXT_MATCH_BTN_LABEL = nls.localize(\n\t\"label.nextMatchButton\",\n\t\"Next Match\",\n);\nconst NLS_TOGGLE_SELECTION_FIND_TITLE = nls.localize(\n\t\"label.toggleSelectionFind\",\n\t\"Find in Selection\",\n);\nconst NLS_CLOSE_BTN_LABEL = nls.localize(\"label.closeButton\", \"Close\");\nconst NLS_TOGGLE_REPLACE_MODE_BTN_LABEL = nls.localize(\n\t\"label.toggleReplaceButton\",\n\t\"Toggle Replace\",\n);\nconst NLS_REPLACE_INPUT_LABEL = nls.localize(\"label.replace\", \"Replace\");\nconst NLS_REPLACE_INPUT_PLACEHOLDER = nls.localize(\n\t\"placeholder.replace\",\n\t\"Replace\",\n);\nconst NLS_REPLACE_BTN_LABEL = nls.localize(\"label.replaceButton\", \"Replace\");\nconst NLS_REPLACE_ALL_BTN_LABEL = nls.localize(\n\t\"label.replaceAllButton\",\n\t\"Replace All\",\n);\n\nexport const findFilterButton = registerIcon(\n\t\"find-filter\",\n\tCodicon.filter,\n\tnls.localize(\"findFilterIcon\", \"Icon for Find Filter in find widget.\"),\n);\nconst NOTEBOOK_FIND_FILTERS = nls.localize(\n\t\"notebook.find.filter.filterAction\",\n\t\"Find Filters\",\n);\nconst NOTEBOOK_FIND_IN_MARKUP_INPUT = nls.localize(\n\t\"notebook.find.filter.findInMarkupInput\",\n\t\"Markdown Source\",\n);\nconst NOTEBOOK_FIND_IN_MARKUP_PREVIEW = nls.localize(\n\t\"notebook.find.filter.findInMarkupPreview\",\n\t\"Rendered Markdown\",\n);\nconst NOTEBOOK_FIND_IN_CODE_INPUT = nls.localize(\n\t\"notebook.find.filter.findInCodeInput\",\n\t\"Code Cell Source\",\n);\nconst NOTEBOOK_FIND_IN_CODE_OUTPUT = nls.localize(\n\t\"notebook.find.filter.findInCodeOutput\",\n\t\"Code Cell Output\",\n);\n\nconst NOTEBOOK_FIND_WIDGET_INITIAL_WIDTH = 419;\nconst NOTEBOOK_FIND_WIDGET_INITIAL_HORIZONTAL_PADDING = 4;\nclass NotebookFindFilterActionViewItem extends DropdownMenuActionViewItem {\n\tconstructor(\n\t\treadonly filters: NotebookFindFilters,\n\t\taction: IAction,\n\t\toptions: IActionViewItemOptions,\n\t\tactionRunner: IActionRunner,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t) {\n\t\tsuper(\n\t\t\taction,\n\t\t\t{ getActions: () => this.getActions() },\n\t\t\tcontextMenuService,\n\t\t\t{\n\t\t\t\t...options,\n\t\t\t\tactionRunner,\n\t\t\t\tclassNames: action.class,\n\t\t\t\tanchorAlignmentProvider: () => AnchorAlignment.RIGHT,\n\t\t\t},\n\t\t);\n\t}\n\n\toverride render(container: HTMLElement): void {\n\t\tsuper.render(container);\n\t\tthis.updateChecked();\n\t}\n\n\tprivate getActions(): IAction[] {\n\t\tconst markdownInput: IAction = {\n\t\t\tchecked: this.filters.markupInput,\n\t\t\tclass: undefined,\n\t\t\tenabled: true,\n\t\t\tid: \"findInMarkdownInput\",\n\t\t\tlabel: NOTEBOOK_FIND_IN_MARKUP_INPUT,\n\t\t\trun: async () => {\n\t\t\t\tthis.filters.markupInput = !this.filters.markupInput;\n\t\t\t},\n\t\t\ttooltip: \"\",\n\t\t};\n\n\t\tconst markdownPreview: IAction = {\n\t\t\tchecked: this.filters.markupPreview,\n\t\t\tclass: undefined,\n\t\t\tenabled: true,\n\t\t\tid: \"findInMarkdownInput\",\n\t\t\tlabel: NOTEBOOK_FIND_IN_MARKUP_PREVIEW,\n\t\t\trun: async () => {\n\t\t\t\tthis.filters.markupPreview = !this.filters.markupPreview;\n\t\t\t},\n\t\t\ttooltip: \"\",\n\t\t};\n\n\t\tconst codeInput: IAction = {\n\t\t\tchecked: this.filters.codeInput,\n\t\t\tclass: undefined,\n\t\t\tenabled: true,\n\t\t\tid: \"findInCodeInput\",\n\t\t\tlabel: NOTEBOOK_FIND_IN_CODE_INPUT,\n\t\t\trun: async () => {\n\t\t\t\tthis.filters.codeInput = !this.filters.codeInput;\n\t\t\t},\n\t\t\ttooltip: \"\",\n\t\t};\n\n\t\tconst codeOutput = {\n\t\t\tchecked: this.filters.codeOutput,\n\t\t\tclass: undefined,\n\t\t\tenabled: true,\n\t\t\tid: \"findInCodeOutput\",\n\t\t\tlabel: NOTEBOOK_FIND_IN_CODE_OUTPUT,\n\t\t\trun: async () => {\n\t\t\t\tthis.filters.codeOutput = !this.filters.codeOutput;\n\t\t\t},\n\t\t\ttooltip: \"\",\n\t\t\tdispose: () => null,\n\t\t};\n\n\t\tif (isSafari) {\n\t\t\treturn [markdownInput, codeInput];\n\t\t} else {\n\t\t\treturn [\n\t\t\t\tmarkdownInput,\n\t\t\t\tmarkdownPreview,\n\t\t\t\tnew Separator(),\n\t\t\t\tcodeInput,\n\t\t\t\tcodeOutput,\n\t\t\t];\n\t\t}\n\t}\n\n\tprotected override updateChecked(): void {\n\t\tthis.element!.classList.toggle(\"checked\", this._action.checked);\n\t}\n}\n\nexport class NotebookFindInputFilterButton extends Disposable {\n\tprivate _filterButtonContainer: HTMLElement;\n\tprivate _actionbar: ActionBar | null = null;\n\tprivate _filtersAction: IAction;\n\tprivate _toggleStyles: IToggleStyles;\n\n\tconstructor(\n\t\treadonly filters: NotebookFindFilters,\n\t\treadonly contextMenuService: IContextMenuService,\n\t\treadonly instantiationService: IInstantiationService,\n\t\toptions: IFindInputOptions,\n\t\ttooltip: string = NOTEBOOK_FIND_FILTERS,\n\t) {\n\t\tsuper();\n\t\tthis._toggleStyles = options.toggleStyles;\n\n\t\tthis._filtersAction = new Action(\n\t\t\t\"notebookFindFilterAction\",\n\t\t\ttooltip,\n\t\t\t\"notebook-filters \" + ThemeIcon.asClassName(filterIcon),\n\t\t);\n\t\tthis._filtersAction.checked = false;\n\t\tthis._filterButtonContainer = dom.$(\".find-filter-button\");\n\t\tthis._filterButtonContainer.classList.add(\"monaco-custom-toggle\");\n\t\tthis.createFilters(this._filterButtonContainer);\n\t}\n\n\tget container() {\n\t\treturn this._filterButtonContainer;\n\t}\n\n\twidth() {\n\t\treturn (\n\t\t\t2 /*margin left*/ +\n\t\t\t2 /*border*/ +\n\t\t\t2 /*padding*/ +\n\t\t\t16 /* icon width */\n\t\t);\n\t}\n\n\tenable(): void {\n\t\tthis.container.setAttribute(\"aria-disabled\", String(false));\n\t}\n\n\tdisable(): void {\n\t\tthis.container.setAttribute(\"aria-disabled\", String(true));\n\t}\n\n\tset visible(visible: boolean) {\n\t\tthis._filterButtonContainer.style.display = visible ? \"\" : \"none\";\n\t}\n\n\tget visible() {\n\t\treturn this._filterButtonContainer.style.display !== \"none\";\n\t}\n\n\tapplyStyles(filterChecked: boolean): void {\n\t\tconst toggleStyles = this._toggleStyles;\n\n\t\tthis._filterButtonContainer.style.border = \"1px solid transparent\";\n\t\tthis._filterButtonContainer.style.borderRadius = \"3px\";\n\t\tthis._filterButtonContainer.style.borderColor =\n\t\t\t(filterChecked && toggleStyles.inputActiveOptionBorder) || \"\";\n\t\tthis._filterButtonContainer.style.color =\n\t\t\t(filterChecked && toggleStyles.inputActiveOptionForeground) ||\n\t\t\t\"inherit\";\n\t\tthis._filterButtonContainer.style.backgroundColor =\n\t\t\t(filterChecked && toggleStyles.inputActiveOptionBackground) || \"\";\n\t}\n\n\tprivate createFilters(container: HTMLElement): void {\n\t\tthis._actionbar = this._register(\n\t\t\tnew ActionBar(container, {\n\t\t\t\tactionViewItemProvider: (action, options) => {\n\t\t\t\t\tif (action.id === this._filtersAction.id) {\n\t\t\t\t\t\treturn this.instantiationService.createInstance(\n\t\t\t\t\t\t\tNotebookFindFilterActionViewItem,\n\t\t\t\t\t\t\tthis.filters,\n\t\t\t\t\t\t\taction,\n\t\t\t\t\t\t\toptions,\n\t\t\t\t\t\t\tnew ActionRunner(),\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn undefined;\n\t\t\t\t},\n\t\t\t}),\n\t\t);\n\t\tthis._actionbar.push(this._filtersAction, { icon: true, label: false });\n\t}\n}\n\nexport class NotebookFindInput extends FindInput {\n\tprivate _findFilter: NotebookFindInputFilterButton;\n\tprivate _filterChecked = false;\n\n\tconstructor(\n\t\treadonly filters: NotebookFindFilters,\n\t\tcontextKeyService: IContextKeyService,\n\t\treadonly contextMenuService: IContextMenuService,\n\t\treadonly instantiationService: IInstantiationService,\n\t\tparent: HTMLElement | null,\n\t\tcontextViewProvider: IContextViewProvider,\n\t\toptions: IFindInputOptions,\n\t) {\n\t\tsuper(parent, contextViewProvider, options);\n\n\t\tthis._register(\n\t\t\tregisterAndCreateHistoryNavigationContext(\n\t\t\t\tcontextKeyService,\n\t\t\t\tthis.inputBox,\n\t\t\t),\n\t\t);\n\t\tthis._findFilter = this._register(\n\t\t\tnew NotebookFindInputFilterButton(\n\t\t\t\tfilters,\n\t\t\t\tcontextMenuService,\n\t\t\t\tinstantiationService,\n\t\t\t\toptions,\n\t\t\t),\n\t\t);\n\n\t\tthis.inputBox.paddingRight =\n\t\t\t(this.caseSensitive?.width() ?? 0) +\n\t\t\t(this.wholeWords?.width() ?? 0) +\n\t\t\t(this.regex?.width() ?? 0) +\n\t\t\tthis._findFilter.width();\n\t\tthis.controls.appendChild(this._findFilter.container);\n\t}\n\n\toverride setEnabled(enabled: boolean) {\n\t\tsuper.setEnabled(enabled);\n\t\tif (enabled && !this._filterChecked) {\n\t\t\tthis.regex?.enable();\n\t\t} else {\n\t\t\tthis.regex?.disable();\n\t\t}\n\t}\n\n\tupdateFilterState(changed: boolean) {\n\t\tthis._filterChecked = changed;\n\t\tif (this.regex) {\n\t\t\tif (this._filterChecked) {\n\t\t\t\tthis.regex.disable();\n\t\t\t\tthis.regex.domNode.tabIndex = -1;\n\t\t\t\tthis.regex.domNode.classList.toggle(\"disabled\", true);\n\t\t\t} else {\n\t\t\t\tthis.regex.enable();\n\t\t\t\tthis.regex.domNode.tabIndex = 0;\n\t\t\t\tthis.regex.domNode.classList.toggle(\"disabled\", false);\n\t\t\t}\n\t\t}\n\t\tthis._findFilter.applyStyles(this._filterChecked);\n\t}\n\n\tgetCellToolbarActions(menu: IMenu): {\n\t\tprimary: IAction[];\n\t\tsecondary: IAction[];\n\t} {\n\t\tconst primary: IAction[] = [];\n\t\tconst secondary: IAction[] = [];\n\t\tconst result = { primary, secondary };\n\n\t\tcreateAndFillInActionBarActions(\n\t\t\tmenu,\n\t\t\t{ shouldForwardArgs: true },\n\t\t\tresult,\n\t\t\t(g) => /^inline/.test(g),\n\t\t);\n\n\t\treturn result;\n\t}\n}\n\nexport abstract class SimpleFindReplaceWidget extends Widget {\n\tprotected readonly _findInput: NotebookFindInput;\n\tprivate readonly _domNode: HTMLElement;\n\tprivate readonly _innerFindDomNode: HTMLElement;\n\tprivate readonly _focusTracker: dom.IFocusTracker;\n\tprivate readonly _findInputFocusTracker: dom.IFocusTracker;\n\tprivate readonly _updateHistoryDelayer: Delayer<void>;\n\tprotected readonly _matchesCount!: HTMLElement;\n\tprivate readonly prevBtn: SimpleButton;\n\tprivate readonly nextBtn: SimpleButton;\n\n\tprotected readonly _replaceInput!: ReplaceInput;\n\tprivate readonly _innerReplaceDomNode!: HTMLElement;\n\tprivate _toggleReplaceBtn!: SimpleButton;\n\tprivate readonly _replaceInputFocusTracker!: dom.IFocusTracker;\n\tprotected _replaceBtn!: SimpleButton;\n\tprotected _replaceAllBtn!: SimpleButton;\n\n\tprivate readonly _resizeSash: Sash;\n\tprivate _resizeOriginalWidth = NOTEBOOK_FIND_WIDGET_INITIAL_WIDTH;\n\n\tprivate _isVisible = false;\n\tprivate _isReplaceVisible = false;\n\tprivate foundMatch = false;\n\n\tprotected _progressBar!: ProgressBar;\n\tprotected _scopedContextKeyService: IContextKeyService;\n\n\tprivate _filters: NotebookFindFilters;\n\n\tprivate readonly inSelectionToggle: Toggle;\n\tprivate cellSelectionDecorationIds: string[] = [];\n\tprivate textSelectionDecorationIds: ICellModelDecorations[] = [];\n\n\tconstructor(\n\t\t@IContextViewService\n\t\tprivate readonly _contextViewService: IContextViewService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IConfigurationService\n\t\tprotected readonly _configurationService: IConfigurationService,\n\t\t@IContextMenuService\n\t\tprivate readonly contextMenuService: IContextMenuService,\n\t\t@IInstantiationService\n\t\tprivate readonly instantiationService: IInstantiationService,\n\t\t@IHoverService hoverService: IHoverService,\n\t\tprotected readonly _state: FindReplaceState<NotebookFindFilters> = new FindReplaceState<NotebookFindFilters>(),\n\t\tprotected readonly _notebookEditor: INotebookEditor,\n\t) {\n\t\tsuper();\n\n\t\tconst findFilters = this._configurationService.getValue<{\n\t\t\tmarkupSource: boolean;\n\t\t\tmarkupPreview: boolean;\n\t\t\tcodeSource: boolean;\n\t\t\tcodeOutput: boolean;\n\t\t}>(NotebookSetting.findFilters) ?? {\n\t\t\tmarkupSource: true,\n\t\t\tmarkupPreview: true,\n\t\t\tcodeSource: true,\n\t\t\tcodeOutput: true,\n\t\t};\n\n\t\tthis._filters = new NotebookFindFilters(\n\t\t\tfindFilters.markupSource,\n\t\t\tfindFilters.markupPreview,\n\t\t\tfindFilters.codeSource,\n\t\t\tfindFilters.codeOutput,\n\t\t\t{ findScopeType: NotebookFindScopeType.None },\n\t\t);\n\t\tthis._state.change({ filters: this._filters }, false);\n\n\t\tthis._filters.onDidChange(() => {\n\t\t\tthis._state.change({ filters: this._filters }, false);\n\t\t});\n\n\t\tthis._domNode = document.createElement(\"div\");\n\t\tthis._domNode.classList.add(\"simple-fr-find-part-wrapper\");\n\t\tthis._register(\n\t\t\tthis._state.onFindReplaceStateChange((e) =>\n\t\t\t\tthis._onStateChanged(e),\n\t\t\t),\n\t\t);\n\t\tthis._scopedContextKeyService = contextKeyService.createScoped(\n\t\t\tthis._domNode,\n\t\t);\n\n\t\tconst progressContainer = dom.$(\".find-replace-progress\");\n\t\tthis._progressBar = new ProgressBar(\n\t\t\tprogressContainer,\n\t\t\tdefaultProgressBarStyles,\n\t\t);\n\t\tthis._domNode.appendChild(progressContainer);\n\n\t\tconst isInteractiveWindow =\n\t\t\tcontextKeyService.getContextKeyValue(\"notebookType\") ===\n\t\t\t\"interactive\";\n\t\t// Toggle replace button\n\t\tthis._toggleReplaceBtn = this._register(\n\t\t\tnew SimpleButton(\n\t\t\t\t{\n\t\t\t\t\tlabel: NLS_TOGGLE_REPLACE_MODE_BTN_LABEL,\n\t\t\t\t\tclassName: \"codicon toggle left\",\n\t\t\t\t\tonTrigger: isInteractiveWindow\n\t\t\t\t\t\t? () => {}\n\t\t\t\t\t\t: () => {\n\t\t\t\t\t\t\t\tthis._isReplaceVisible =\n\t\t\t\t\t\t\t\t\t!this._isReplaceVisible;\n\t\t\t\t\t\t\t\tthis._state.change(\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tisReplaceRevealed:\n\t\t\t\t\t\t\t\t\t\t\tthis._isReplaceVisible,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tthis._updateReplaceViewDisplay();\n\t\t\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\thoverService,\n\t\t\t),\n\t\t);\n\t\tthis._toggleReplaceBtn.setEnabled(!isInteractiveWindow);\n\t\tthis._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n\t\tthis._domNode.appendChild(this._toggleReplaceBtn.domNode);\n\n\t\tthis._innerFindDomNode = document.createElement(\"div\");\n\t\tthis._innerFindDomNode.classList.add(\"simple-fr-find-part\");\n\n\t\tthis._findInput = this._register(\n\t\t\tnew NotebookFindInput(\n\t\t\t\tthis._filters,\n\t\t\t\tthis._scopedContextKeyService,\n\t\t\t\tthis.contextMenuService,\n\t\t\t\tthis.instantiationService,\n\t\t\t\tnull,\n\t\t\t\tthis._contextViewService,\n\t\t\t\t{\n\t\t\t\t\t// width:FIND_INPUT_AREA_WIDTH,\n\t\t\t\t\tlabel: NLS_FIND_INPUT_LABEL,\n\t\t\t\t\tplaceholder: NLS_FIND_INPUT_PLACEHOLDER,\n\t\t\t\t\tvalidation: (value: string): InputBoxMessage | null => {\n\t\t\t\t\t\tif (value.length === 0 || !this._findInput.getRegex()) {\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tnew RegExp(value);\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tthis.foundMatch = false;\n\t\t\t\t\t\t\tthis.updateButtons(this.foundMatch);\n\t\t\t\t\t\t\treturn { content: e.message };\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tflexibleWidth: true,\n\t\t\t\t\tshowCommonFindToggles: true,\n\t\t\t\t\tinputBoxStyles: defaultInputBoxStyles,\n\t\t\t\t\ttoggleStyles: defaultToggleStyles,\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\n\t\t// Find History with update delayer\n\t\tthis._updateHistoryDelayer = new Delayer<void>(500);\n\n\t\tthis.oninput(this._findInput.domNode, (e) => {\n\t\t\tthis.foundMatch = this.onInputChanged();\n\t\t\tthis.updateButtons(this.foundMatch);\n\t\t\tthis._delayedUpdateHistory();\n\t\t});\n\n\t\tthis._register(\n\t\t\tthis._findInput.inputBox.onDidChange(() => {\n\t\t\t\tthis._state.change(\n\t\t\t\t\t{ searchString: this._findInput.getValue() },\n\t\t\t\t\ttrue,\n\t\t\t\t);\n\t\t\t}),\n\t\t);\n\n\t\tthis._findInput.setRegex(!!this._state.isRegex);\n\t\tthis._findInput.setCaseSensitive(!!this._state.matchCase);\n\t\tthis._findInput.setWholeWords(!!this._state.wholeWord);\n\n\t\tthis._register(\n\t\t\tthis._findInput.onDidOptionChange(() => {\n\t\t\t\tthis._state.change(\n\t\t\t\t\t{\n\t\t\t\t\t\tisRegex: this._findInput.getRegex(),\n\t\t\t\t\t\twholeWord: this._findInput.getWholeWords(),\n\t\t\t\t\t\tmatchCase: this._findInput.getCaseSensitive(),\n\t\t\t\t\t},\n\t\t\t\t\ttrue,\n\t\t\t\t);\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis._state.onFindReplaceStateChange(() => {\n\t\t\t\tthis._findInput.setRegex(this._state.isRegex);\n\t\t\t\tthis._findInput.setWholeWords(this._state.wholeWord);\n\t\t\t\tthis._findInput.setCaseSensitive(this._state.matchCase);\n\t\t\t\tthis._replaceInput.setPreserveCase(this._state.preserveCase);\n\t\t\t}),\n\t\t);\n\n\t\tthis._matchesCount = document.createElement(\"div\");\n\t\tthis._matchesCount.className = \"matchesCount\";\n\t\tthis._updateMatchesCount();\n\n\t\tthis.prevBtn = this._register(\n\t\t\tnew SimpleButton(\n\t\t\t\t{\n\t\t\t\t\tlabel: NLS_PREVIOUS_MATCH_BTN_LABEL,\n\t\t\t\t\ticon: findPreviousMatchIcon,\n\t\t\t\t\tonTrigger: () => {\n\t\t\t\t\t\tthis.find(true);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\thoverService,\n\t\t\t),\n\t\t);\n\n\t\tthis.nextBtn = this._register(\n\t\t\tnew SimpleButton(\n\t\t\t\t{\n\t\t\t\t\tlabel: NLS_NEXT_MATCH_BTN_LABEL,\n\t\t\t\t\ticon: findNextMatchIcon,\n\t\t\t\t\tonTrigger: () => {\n\t\t\t\t\t\tthis.find(false);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\thoverService,\n\t\t\t),\n\t\t);\n\n\t\tthis.inSelectionToggle = this._register(\n\t\t\tnew Toggle({\n\t\t\t\ticon: findSelectionIcon,\n\t\t\t\ttitle: NLS_TOGGLE_SELECTION_FIND_TITLE,\n\t\t\t\tisChecked: false,\n\t\t\t\tinputActiveOptionBackground: asCssVariable(\n\t\t\t\t\tinputActiveOptionBackground,\n\t\t\t\t),\n\t\t\t\tinputActiveOptionBorder: asCssVariable(inputActiveOptionBorder),\n\t\t\t\tinputActiveOptionForeground: asCssVariable(\n\t\t\t\t\tinputActiveOptionForeground,\n\t\t\t\t),\n\t\t\t}),\n\t\t);\n\t\tthis.inSelectionToggle.domNode.style.display = \"inline\";\n\n\t\tthis.inSelectionToggle.onChange(() => {\n\t\t\tconst checked = this.inSelectionToggle.checked;\n\t\t\tif (checked) {\n\t\t\t\t// selection logic:\n\t\t\t\t// 1. if there are multiple cells, do that.\n\t\t\t\t// 2. if there is only one cell, do the following:\n\t\t\t\t// \t\t- if there is a multi-line range highlighted, textual in selection\n\t\t\t\t// \t\t- if there is no range, cell in selection for that cell\n\n\t\t\t\tconst cellSelection: ICellRange[] =\n\t\t\t\t\tthis._notebookEditor.getSelections();\n\t\t\t\tconst textSelection: Range[] = this._notebookEditor\n\t\t\t\t\t.getSelectionViewModels()[0]\n\t\t\t\t\t.getSelections();\n\n\t\t\t\tif (\n\t\t\t\t\tcellSelection.length > 1 ||\n\t\t\t\t\tcellSelection.some((range) => range.end - range.start > 1)\n\t\t\t\t) {\n\t\t\t\t\tthis._filters.findScope = {\n\t\t\t\t\t\tfindScopeType: NotebookFindScopeType.Cells,\n\t\t\t\t\t\tselectedCellRanges: cellSelection,\n\t\t\t\t\t};\n\t\t\t\t\tthis.setCellSelectionDecorations();\n\t\t\t\t} else if (\n\t\t\t\t\ttextSelection.length > 1 ||\n\t\t\t\t\ttextSelection.some(\n\t\t\t\t\t\t(range) =>\n\t\t\t\t\t\t\trange.endLineNumber - range.startLineNumber >= 1,\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tthis._filters.findScope = {\n\t\t\t\t\t\tfindScopeType: NotebookFindScopeType.Text,\n\t\t\t\t\t\tselectedCellRanges: cellSelection,\n\t\t\t\t\t\tselectedTextRanges: textSelection,\n\t\t\t\t\t};\n\t\t\t\t\tthis.setTextSelectionDecorations(\n\t\t\t\t\t\ttextSelection,\n\t\t\t\t\t\tthis._notebookEditor.getSelectionViewModels()[0],\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tthis._filters.findScope = {\n\t\t\t\t\t\tfindScopeType: NotebookFindScopeType.Cells,\n\t\t\t\t\t\tselectedCellRanges: cellSelection,\n\t\t\t\t\t};\n\t\t\t\t\tthis.setCellSelectionDecorations();\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._filters.findScope = {\n\t\t\t\t\tfindScopeType: NotebookFindScopeType.None,\n\t\t\t\t};\n\t\t\t\tthis.clearCellSelectionDecorations();\n\t\t\t\tthis.clearTextSelectionDecorations();\n\t\t\t}\n\t\t});\n\n\t\tconst closeBtn = this._register(\n\t\t\tnew SimpleButton(\n\t\t\t\t{\n\t\t\t\t\tlabel: NLS_CLOSE_BTN_LABEL,\n\t\t\t\t\ticon: widgetClose,\n\t\t\t\t\tonTrigger: () => {\n\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\thoverService,\n\t\t\t),\n\t\t);\n\n\t\tthis._innerFindDomNode.appendChild(this._findInput.domNode);\n\t\tthis._innerFindDomNode.appendChild(this._matchesCount);\n\t\tthis._innerFindDomNode.appendChild(this.prevBtn.domNode);\n\t\tthis._innerFindDomNode.appendChild(this.nextBtn.domNode);\n\t\tthis._innerFindDomNode.appendChild(this.inSelectionToggle.domNode);\n\t\tthis._innerFindDomNode.appendChild(closeBtn.domNode);\n\n\t\t// _domNode wraps _innerDomNode, ensuring that\n\t\tthis._domNode.appendChild(this._innerFindDomNode);\n\n\t\tthis.onkeyup(this._innerFindDomNode, (e) => {\n\t\t\tif (e.equals(KeyCode.Escape)) {\n\t\t\t\tthis.hide();\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t}\n\t\t});\n\n\t\tthis._focusTracker = this._register(dom.trackFocus(this._domNode));\n\t\tthis._register(\n\t\t\tthis._focusTracker.onDidFocus(this.onFocusTrackerFocus.bind(this)),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._focusTracker.onDidBlur(this.onFocusTrackerBlur.bind(this)),\n\t\t);\n\n\t\tthis._findInputFocusTracker = this._register(\n\t\t\tdom.trackFocus(this._findInput.domNode),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._findInputFocusTracker.onDidFocus(\n\t\t\t\tthis.onFindInputFocusTrackerFocus.bind(this),\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._findInputFocusTracker.onDidBlur(\n\t\t\t\tthis.onFindInputFocusTrackerBlur.bind(this),\n\t\t\t),\n\t\t);\n\n\t\tthis._register(\n\t\t\tdom.addDisposableListener(\n\t\t\t\tthis._innerFindDomNode,\n\t\t\t\t\"click\",\n\t\t\t\t(event) => {\n\t\t\t\t\tevent.stopPropagation();\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\n\t\t// Replace\n\t\tthis._innerReplaceDomNode = document.createElement(\"div\");\n\t\tthis._innerReplaceDomNode.classList.add(\"simple-fr-replace-part\");\n\n\t\tthis._replaceInput = this._register(\n\t\t\tnew ContextScopedReplaceInput(\n\t\t\t\tnull,\n\t\t\t\tundefined,\n\t\t\t\t{\n\t\t\t\t\tlabel: NLS_REPLACE_INPUT_LABEL,\n\t\t\t\t\tplaceholder: NLS_REPLACE_INPUT_PLACEHOLDER,\n\t\t\t\t\thistory: [],\n\t\t\t\t\tinputBoxStyles: defaultInputBoxStyles,\n\t\t\t\t\ttoggleStyles: defaultToggleStyles,\n\t\t\t\t},\n\t\t\t\tcontextKeyService,\n\t\t\t\tfalse,\n\t\t\t),\n\t\t);\n\t\tthis._innerReplaceDomNode.appendChild(this._replaceInput.domNode);\n\t\tthis._replaceInputFocusTracker = this._register(\n\t\t\tdom.trackFocus(this._replaceInput.domNode),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._replaceInputFocusTracker.onDidFocus(\n\t\t\t\tthis.onReplaceInputFocusTrackerFocus.bind(this),\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._replaceInputFocusTracker.onDidBlur(\n\t\t\t\tthis.onReplaceInputFocusTrackerBlur.bind(this),\n\t\t\t),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis._replaceInput.inputBox.onDidChange(() => {\n\t\t\t\tthis._state.change(\n\t\t\t\t\t{ replaceString: this._replaceInput.getValue() },\n\t\t\t\t\ttrue,\n\t\t\t\t);\n\t\t\t}),\n\t\t);\n\n\t\tthis._domNode.appendChild(this._innerReplaceDomNode);\n\n\t\tthis._updateReplaceViewDisplay();\n\n\t\tthis._replaceBtn = this._register(\n\t\t\tnew SimpleButton(\n\t\t\t\t{\n\t\t\t\t\tlabel: NLS_REPLACE_BTN_LABEL,\n\t\t\t\t\ticon: findReplaceIcon,\n\t\t\t\t\tonTrigger: () => {\n\t\t\t\t\t\tthis.replaceOne();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\thoverService,\n\t\t\t),\n\t\t);\n\n\t\t// Replace all button\n\t\tthis._replaceAllBtn = this._register(\n\t\t\tnew SimpleButton(\n\t\t\t\t{\n\t\t\t\t\tlabel: NLS_REPLACE_ALL_BTN_LABEL,\n\t\t\t\t\ticon: findReplaceAllIcon,\n\t\t\t\t\tonTrigger: () => {\n\t\t\t\t\t\tthis.replaceAll();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\thoverService,\n\t\t\t),\n\t\t);\n\n\t\tthis._innerReplaceDomNode.appendChild(this._replaceBtn.domNode);\n\t\tthis._innerReplaceDomNode.appendChild(this._replaceAllBtn.domNode);\n\n\t\tthis._resizeSash = this._register(\n\t\t\tnew Sash(\n\t\t\t\tthis._domNode,\n\t\t\t\t{ getVerticalSashLeft: () => 0 },\n\t\t\t\t{ orientation: Orientation.VERTICAL, size: 2 },\n\t\t\t),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis._resizeSash.onDidStart(() => {\n\t\t\t\tthis._resizeOriginalWidth = this._getDomWidth();\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis._resizeSash.onDidChange((evt: ISashEvent) => {\n\t\t\t\tlet width =\n\t\t\t\t\tthis._resizeOriginalWidth + evt.startX - evt.currentX;\n\t\t\t\tif (width < NOTEBOOK_FIND_WIDGET_INITIAL_WIDTH) {\n\t\t\t\t\twidth = NOTEBOOK_FIND_WIDGET_INITIAL_WIDTH;\n\t\t\t\t}\n\n\t\t\t\tconst maxWidth = this._getMaxWidth();\n\t\t\t\tif (width > maxWidth) {\n\t\t\t\t\twidth = maxWidth;\n\t\t\t\t}\n\n\t\t\t\tthis._domNode.style.width = `${width}px`;\n\n\t\t\t\tif (this._isReplaceVisible) {\n\t\t\t\t\tthis._replaceInput.width = dom.getTotalWidth(\n\t\t\t\t\t\tthis._findInput.domNode,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tthis._findInput.inputBox.layout();\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis._resizeSash.onDidReset(() => {\n\t\t\t\t// users double click on the sash\n\t\t\t\t// try to emulate what happens with editor findWidget\n\t\t\t\tconst currentWidth = this._getDomWidth();\n\t\t\t\tlet width = NOTEBOOK_FIND_WIDGET_INITIAL_WIDTH;\n\n\t\t\t\tif (currentWidth <= NOTEBOOK_FIND_WIDGET_INITIAL_WIDTH) {\n\t\t\t\t\twidth = this._getMaxWidth();\n\t\t\t\t}\n\n\t\t\t\tthis._domNode.style.width = `${width}px`;\n\t\t\t\tif (this._isReplaceVisible) {\n\t\t\t\t\tthis._replaceInput.width = dom.getTotalWidth(\n\t\t\t\t\t\tthis._findInput.domNode,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tthis._findInput.inputBox.layout();\n\t\t\t}),\n\t\t);\n\t}\n\n\tprivate _getMaxWidth() {\n\t\treturn this._notebookEditor.getLayoutInfo().width - 64;\n\t}\n\n\tprivate _getDomWidth() {\n\t\treturn (\n\t\t\tdom.getTotalWidth(this._domNode) -\n\t\t\tNOTEBOOK_FIND_WIDGET_INITIAL_HORIZONTAL_PADDING * 2\n\t\t);\n\t}\n\n\tgetCellToolbarActions(menu: IMenu): {\n\t\tprimary: IAction[];\n\t\tsecondary: IAction[];\n\t} {\n\t\tconst primary: IAction[] = [];\n\t\tconst secondary: IAction[] = [];\n\t\tconst result = { primary, secondary };\n\n\t\tcreateAndFillInActionBarActions(\n\t\t\tmenu,\n\t\t\t{ shouldForwardArgs: true },\n\t\t\tresult,\n\t\t\t(g) => /^inline/.test(g),\n\t\t);\n\n\t\treturn result;\n\t}\n\n\tprotected abstract onInputChanged(): boolean;\n\tprotected abstract find(previous: boolean): void;\n\tprotected abstract replaceOne(): void;\n\tprotected abstract replaceAll(): void;\n\tprotected abstract onFocusTrackerFocus(): void;\n\tprotected abstract onFocusTrackerBlur(): void;\n\tprotected abstract onFindInputFocusTrackerFocus(): void;\n\tprotected abstract onFindInputFocusTrackerBlur(): void;\n\tprotected abstract onReplaceInputFocusTrackerFocus(): void;\n\tprotected abstract onReplaceInputFocusTrackerBlur(): void;\n\n\tprotected get inputValue() {\n\t\treturn this._findInput.getValue();\n\t}\n\n\tprotected get replaceValue() {\n\t\treturn this._replaceInput.getValue();\n\t}\n\n\tprotected get replacePattern() {\n\t\tif (this._state.isRegex) {\n\t\t\treturn parseReplaceString(this.replaceValue);\n\t\t}\n\t\treturn ReplacePattern.fromStaticValue(this.replaceValue);\n\t}\n\n\tpublic get focusTracker(): dom.IFocusTracker {\n\t\treturn this._focusTracker;\n\t}\n\n\tprivate _onStateChanged(e: FindReplaceStateChangedEvent): void {\n\t\tthis._updateButtons();\n\t\tthis._updateMatchesCount();\n\t}\n\n\tprivate _updateButtons(): void {\n\t\tthis._findInput.setEnabled(this._isVisible);\n\t\tthis._replaceInput.setEnabled(\n\t\t\tthis._isVisible && this._isReplaceVisible,\n\t\t);\n\t\tconst findInputIsNonEmpty = this._state.searchString.length > 0;\n\t\tthis._replaceBtn.setEnabled(\n\t\t\tthis._isVisible && this._isReplaceVisible && findInputIsNonEmpty,\n\t\t);\n\t\tthis._replaceAllBtn.setEnabled(\n\t\t\tthis._isVisible && this._isReplaceVisible && findInputIsNonEmpty,\n\t\t);\n\n\t\tthis._domNode.classList.toggle(\n\t\t\t\"replaceToggled\",\n\t\t\tthis._isReplaceVisible,\n\t\t);\n\t\tthis._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n\n\t\tthis.foundMatch = this._state.matchesCount > 0;\n\t\tthis.updateButtons(this.foundMatch);\n\t}\n\n\tprivate setCellSelectionDecorations() {\n\t\tconst cellHandles: number[] = [];\n\t\tthis._notebookEditor.getSelectionViewModels().forEach((viewModel) => {\n\t\t\tcellHandles.push(viewModel.handle);\n\t\t});\n\n\t\tconst decorations: INotebookDeltaDecoration[] = [];\n\t\tfor (const handle of cellHandles) {\n\t\t\tdecorations.push({\n\t\t\t\thandle: handle,\n\t\t\t\toptions: {\n\t\t\t\t\tclassName: \"nb-multiCellHighlight\",\n\t\t\t\t\toutputClassName: \"nb-multiCellHighlight\",\n\t\t\t\t},\n\t\t\t} satisfies INotebookDeltaDecoration);\n\t\t}\n\t\tthis.cellSelectionDecorationIds =\n\t\t\tthis._notebookEditor.deltaCellDecorations([], decorations);\n\t}\n\n\tprivate clearCellSelectionDecorations() {\n\t\tthis._notebookEditor.deltaCellDecorations(\n\t\t\tthis.cellSelectionDecorationIds,\n\t\t\t[],\n\t\t);\n\t}\n\n\tprivate setTextSelectionDecorations(\n\t\ttextRanges: Range[],\n\t\tcell: ICellViewModel,\n\t) {\n\t\tthis._notebookEditor.changeModelDecorations((changeAccessor) => {\n\t\t\tconst decorations: ICellModelDeltaDecorations[] = [];\n\t\t\tfor (const range of textRanges) {\n\t\t\t\tdecorations.push({\n\t\t\t\t\townerId: cell.handle,\n\t\t\t\t\tdecorations: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trange: range,\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\t\"text search range for notebook search scope\",\n\t\t\t\t\t\t\t\tisWholeLine: true,\n\t\t\t\t\t\t\t\tclassName: \"nb-findScope\",\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.textSelectionDecorationIds = changeAccessor.deltaDecorations(\n\t\t\t\t[],\n\t\t\t\tdecorations,\n\t\t\t);\n\t\t});\n\t}\n\n\tprivate clearTextSelectionDecorations() {\n\t\tthis._notebookEditor.changeModelDecorations((changeAccessor) => {\n\t\t\tchangeAccessor.deltaDecorations(\n\t\t\t\tthis.textSelectionDecorationIds,\n\t\t\t\t[],\n\t\t\t);\n\t\t});\n\t}\n\n\tprotected _updateMatchesCount(): void {}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\n\t\tthis._domNode.remove();\n\t}\n\n\tpublic getDomNode() {\n\t\treturn this._domNode;\n\t}\n\n\tpublic reveal(initialInput?: string): void {\n\t\tif (initialInput) {\n\t\t\tthis._findInput.setValue(initialInput);\n\t\t}\n\n\t\tif (this._isVisible) {\n\t\t\tthis._findInput.select();\n\t\t\treturn;\n\t\t}\n\n\t\tthis._isVisible = true;\n\t\tthis.updateButtons(this.foundMatch);\n\n\t\tsetTimeout(() => {\n\t\t\tthis._domNode.classList.add(\"visible\", \"visible-transition\");\n\t\t\tthis._domNode.setAttribute(\"aria-hidden\", \"false\");\n\t\t\tthis._findInput.select();\n\t\t}, 0);\n\t}\n\n\tpublic focus(): void {\n\t\tthis._findInput.focus();\n\t}\n\n\tpublic show(\n\t\tinitialInput?: string,\n\t\toptions?: IShowNotebookFindWidgetOptions,\n\t): void {\n\t\tif (initialInput) {\n\t\t\tthis._findInput.setValue(initialInput);\n\t\t}\n\n\t\tthis._isVisible = true;\n\n\t\tsetTimeout(() => {\n\t\t\tthis._domNode.classList.add(\"visible\", \"visible-transition\");\n\t\t\tthis._domNode.setAttribute(\"aria-hidden\", \"false\");\n\n\t\t\tif (options?.focus ?? true) {\n\t\t\t\tthis.focus();\n\t\t\t}\n\t\t}, 0);\n\t}\n\n\tpublic showWithReplace(initialInput?: string, replaceInput?: string): void {\n\t\tif (initialInput) {\n\t\t\tthis._findInput.setValue(initialInput);\n\t\t}\n\n\t\tif (replaceInput) {\n\t\t\tthis._replaceInput.setValue(replaceInput);\n\t\t}\n\n\t\tthis._isVisible = true;\n\t\tthis._isReplaceVisible = true;\n\t\tthis._state.change(\n\t\t\t{ isReplaceRevealed: this._isReplaceVisible },\n\t\t\tfalse,\n\t\t);\n\t\tthis._updateReplaceViewDisplay();\n\n\t\tsetTimeout(() => {\n\t\t\tthis._domNode.classList.add(\"visible\", \"visible-transition\");\n\t\t\tthis._domNode.setAttribute(\"aria-hidden\", \"false\");\n\t\t\tthis._updateButtons();\n\n\t\t\tthis._replaceInput.focus();\n\t\t}, 0);\n\t}\n\n\tprivate _updateReplaceViewDisplay(): void {\n\t\tif (this._isReplaceVisible) {\n\t\t\tthis._innerReplaceDomNode.style.display = \"flex\";\n\t\t} else {\n\t\t\tthis._innerReplaceDomNode.style.display = \"none\";\n\t\t}\n\n\t\tthis._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n\t}\n\n\tpublic hide(): void {\n\t\tif (this._isVisible) {\n\t\t\tthis.inSelectionToggle.checked = false;\n\t\t\tthis._notebookEditor.deltaCellDecorations(\n\t\t\t\tthis.cellSelectionDecorationIds,\n\t\t\t\t[],\n\t\t\t);\n\t\t\tthis._notebookEditor.changeModelDecorations((changeAccessor) => {\n\t\t\t\tchangeAccessor.deltaDecorations(\n\t\t\t\t\tthis.textSelectionDecorationIds,\n\t\t\t\t\t[],\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tthis._domNode.classList.remove(\"visible-transition\");\n\t\t\tthis._domNode.setAttribute(\"aria-hidden\", \"true\");\n\t\t\t// Need to delay toggling visibility until after Transition, then visibility hidden - removes from tabIndex list\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis._isVisible = false;\n\t\t\t\tthis.updateButtons(this.foundMatch);\n\t\t\t\tthis._domNode.classList.remove(\"visible\");\n\t\t\t}, 200);\n\t\t}\n\t}\n\n\tprotected _delayedUpdateHistory() {\n\t\tthis._updateHistoryDelayer.trigger(this._updateHistory.bind(this));\n\t}\n\n\tprotected _updateHistory() {\n\t\tthis._findInput.inputBox.addToHistory();\n\t}\n\n\tprotected _getRegexValue(): boolean {\n\t\treturn this._findInput.getRegex();\n\t}\n\n\tprotected _getWholeWordValue(): boolean {\n\t\treturn this._findInput.getWholeWords();\n\t}\n\n\tprotected _getCaseSensitiveValue(): boolean {\n\t\treturn this._findInput.getCaseSensitive();\n\t}\n\n\tprotected updateButtons(foundMatch: boolean) {\n\t\tconst hasInput = this.inputValue.length > 0;\n\t\tthis.prevBtn.setEnabled(this._isVisible && hasInput && foundMatch);\n\t\tthis.nextBtn.setEnabled(this._isVisible && hasInput && foundMatch);\n\t}\n}\n\n// theming\nregisterThemingParticipant((theme, collector) => {\n\tcollector.addRule(`\n\t.notebook-editor {\n\t\t--notebook-find-width: ${NOTEBOOK_FIND_WIDGET_INITIAL_WIDTH}px;\n\t\t--notebook-find-horizontal-padding: ${NOTEBOOK_FIND_WIDGET_INITIAL_HORIZONTAL_PADDING}px;\n\t}\n\t`);\n});\n"],
  "mappings": "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",
  "names": []
}
