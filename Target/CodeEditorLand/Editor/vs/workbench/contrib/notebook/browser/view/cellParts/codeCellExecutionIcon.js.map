{
  "version": 3,
  "sources": ["../../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/notebook/browser/view/cellParts/codeCellExecutionIcon.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from '../../../../../../base/browser/dom.js';\nimport { renderLabelWithIcons } from '../../../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { Disposable } from '../../../../../../base/common/lifecycle.js';\nimport { localize } from '../../../../../../nls.js';\nimport { ThemeIcon } from '../../../../../../base/common/themables.js';\nimport { ICellViewModel, INotebookEditorDelegate } from '../../notebookBrowser.js';\nimport { errorStateIcon, executingStateIcon, pendingStateIcon, successStateIcon } from '../../notebookIcons.js';\nimport { NotebookCellExecutionState, NotebookCellInternalMetadata } from '../../../common/notebookCommon.js';\nimport { INotebookCellExecution, INotebookExecutionStateService, NotebookExecutionType } from '../../../common/notebookExecutionStateService.js';\n\ninterface IExecutionItem {\n\ttext: string;\n\ttooltip?: string;\n}\n\nexport class CollapsedCodeCellExecutionIcon extends Disposable {\n\tprivate _visible = false;\n\n\tconstructor(\n\t\t_notebookEditor: INotebookEditorDelegate,\n\t\tprivate readonly _cell: ICellViewModel,\n\t\tprivate readonly _element: HTMLElement,\n\t\t@INotebookExecutionStateService private _executionStateService: INotebookExecutionStateService,\n\t) {\n\t\tsuper();\n\n\t\tthis._update();\n\t\tthis._register(this._executionStateService.onDidChangeExecution(e => {\n\t\t\tif (e.type === NotebookExecutionType.cell && e.affectsCell(this._cell.uri)) {\n\t\t\t\tthis._update();\n\t\t\t}\n\t\t}));\n\t\tthis._register(this._cell.model.onDidChangeInternalMetadata(() => this._update()));\n\t}\n\n\tsetVisibility(visible: boolean): void {\n\t\tthis._visible = visible;\n\t\tthis._update();\n\t}\n\n\tprivate _update() {\n\t\tif (!this._visible) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst runState = this._executionStateService.getCellExecution(this._cell.uri);\n\t\tconst item = this._getItemForState(runState, this._cell.model.internalMetadata);\n\t\tif (item) {\n\t\t\tthis._element.style.display = '';\n\t\t\tDOM.reset(this._element, ...renderLabelWithIcons(item.text));\n\t\t\tthis._element.title = item.tooltip ?? '';\n\t\t} else {\n\t\t\tthis._element.style.display = 'none';\n\t\t\tDOM.reset(this._element);\n\t\t}\n\t}\n\n\tprivate _getItemForState(runState: INotebookCellExecution | undefined, internalMetadata: NotebookCellInternalMetadata): IExecutionItem | undefined {\n\t\tconst state = runState?.state;\n\t\tconst { lastRunSuccess } = internalMetadata;\n\t\tif (!state && lastRunSuccess) {\n\t\t\treturn {\n\t\t\t\ttext: `$(${successStateIcon.id})`,\n\t\t\t\ttooltip: localize('notebook.cell.status.success', \"Success\"),\n\t\t\t};\n\t\t} else if (!state && lastRunSuccess === false) {\n\t\t\treturn {\n\t\t\t\ttext: `$(${errorStateIcon.id})`,\n\t\t\t\ttooltip: localize('notebook.cell.status.failure', \"Failure\"),\n\t\t\t};\n\t\t} else if (state === NotebookCellExecutionState.Pending || state === NotebookCellExecutionState.Unconfirmed) {\n\t\t\treturn {\n\t\t\t\ttext: `$(${pendingStateIcon.id})`,\n\t\t\t\ttooltip: localize('notebook.cell.status.pending', \"Pending\"),\n\t\t\t};\n\t\t} else if (state === NotebookCellExecutionState.Executing) {\n\t\t\tconst icon = ThemeIcon.modify(executingStateIcon, 'spin');\n\t\t\treturn {\n\t\t\t\ttext: `$(${icon.id})`,\n\t\t\t\ttooltip: localize('notebook.cell.status.executing', \"Executing\"),\n\t\t\t};\n\t\t}\n\n\t\treturn;\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;AAKA,YAAY,SAAS;AACrB,SAAS,4BAA4B;AACrC,SAAS,kBAAkB;AAC3B,SAAS,gBAAgB;AACzB,SAAS,iBAAiB;AAC1B,SAAS,gBAAgB,+BAA+B;AACxD,SAAS,gBAAgB,oBAAoB,kBAAkB,wBAAwB;AACvF,SAAS,4BAA4B,oCAAoC;AACzE,SAAS,wBAAwB,gCAAgC,6BAA6B;AAOvF,IAAM,iCAAN,cAA6C,WAAW;AAAA,EAG9D,YACC,iBACiB,OACA,UACuB,wBACvC;AACD,UAAM;AAJW;AACA;AACuB;AAIxC,SAAK,QAAQ;AACb,SAAK,UAAU,KAAK,uBAAuB,qBAAqB,OAAK;AACpE,UAAI,EAAE,SAAS,sBAAsB,QAAQ,EAAE,YAAY,KAAK,MAAM,GAAG,GAAG;AAC3E,aAAK,QAAQ;AAAA,MACd;AAAA,IACD,CAAC,CAAC;AACF,SAAK,UAAU,KAAK,MAAM,MAAM,4BAA4B,MAAM,KAAK,QAAQ,CAAC,CAAC;AAAA,EAClF;AAAA,EAtCD,OAoB+D;AAAA;AAAA;AAAA,EACtD,WAAW;AAAA,EAmBnB,cAAc,SAAwB;AACrC,SAAK,WAAW;AAChB,SAAK,QAAQ;AAAA,EACd;AAAA,EAEQ,UAAU;AACjB,QAAI,CAAC,KAAK,UAAU;AACnB;AAAA,IACD;AAEA,UAAM,WAAW,KAAK,uBAAuB,iBAAiB,KAAK,MAAM,GAAG;AAC5E,UAAM,OAAO,KAAK,iBAAiB,UAAU,KAAK,MAAM,MAAM,gBAAgB;AAC9E,QAAI,MAAM;AACT,WAAK,SAAS,MAAM,UAAU;AAC9B,UAAI,MAAM,KAAK,UAAU,GAAG,qBAAqB,KAAK,IAAI,CAAC;AAC3D,WAAK,SAAS,QAAQ,KAAK,WAAW;AAAA,IACvC,OAAO;AACN,WAAK,SAAS,MAAM,UAAU;AAC9B,UAAI,MAAM,KAAK,QAAQ;AAAA,IACxB;AAAA,EACD;AAAA,EAEQ,iBAAiB,UAA8C,kBAA4E;AAClJ,UAAM,QAAQ,UAAU;AACxB,UAAM,EAAE,eAAe,IAAI;AAC3B,QAAI,CAAC,SAAS,gBAAgB;AAC7B,aAAO;AAAA,QACN,MAAM,KAAK,iBAAiB,EAAE;AAAA,QAC9B,SAAS,SAAS,gCAAgC,SAAS;AAAA,MAC5D;AAAA,IACD,WAAW,CAAC,SAAS,mBAAmB,OAAO;AAC9C,aAAO;AAAA,QACN,MAAM,KAAK,eAAe,EAAE;AAAA,QAC5B,SAAS,SAAS,gCAAgC,SAAS;AAAA,MAC5D;AAAA,IACD,WAAW,UAAU,2BAA2B,WAAW,UAAU,2BAA2B,aAAa;AAC5G,aAAO;AAAA,QACN,MAAM,KAAK,iBAAiB,EAAE;AAAA,QAC9B,SAAS,SAAS,gCAAgC,SAAS;AAAA,MAC5D;AAAA,IACD,WAAW,UAAU,2BAA2B,WAAW;AAC1D,YAAM,OAAO,UAAU,OAAO,oBAAoB,MAAM;AACxD,aAAO;AAAA,QACN,MAAM,KAAK,KAAK,EAAE;AAAA,QAClB,SAAS,SAAS,kCAAkC,WAAW;AAAA,MAChE;AAAA,IACD;AAEA;AAAA,EACD;AACD;AAtEa,iCAAN;AAAA,EAOJ;AAAA,GAPU;",
  "names": []
}
