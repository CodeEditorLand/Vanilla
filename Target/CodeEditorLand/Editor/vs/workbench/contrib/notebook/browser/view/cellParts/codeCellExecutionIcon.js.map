{
  "version": 3,
  "sources": ["../../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/notebook/browser/view/cellParts/codeCellExecutionIcon.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from \"../../../../../../base/browser/dom.js\";\nimport { renderLabelWithIcons } from \"../../../../../../base/browser/ui/iconLabel/iconLabels.js\";\nimport { Disposable } from \"../../../../../../base/common/lifecycle.js\";\nimport { ThemeIcon } from \"../../../../../../base/common/themables.js\";\nimport { localize } from \"../../../../../../nls.js\";\nimport {\n\tNotebookCellExecutionState,\n\ttype NotebookCellInternalMetadata,\n} from \"../../../common/notebookCommon.js\";\nimport {\n\ttype INotebookCellExecution,\n\tINotebookExecutionStateService,\n\tNotebookExecutionType,\n} from \"../../../common/notebookExecutionStateService.js\";\nimport type {\n\tICellViewModel,\n\tINotebookEditorDelegate,\n} from \"../../notebookBrowser.js\";\nimport {\n\terrorStateIcon,\n\texecutingStateIcon,\n\tpendingStateIcon,\n\tsuccessStateIcon,\n} from \"../../notebookIcons.js\";\n\ninterface IExecutionItem {\n\ttext: string;\n\ttooltip?: string;\n}\n\nexport class CollapsedCodeCellExecutionIcon extends Disposable {\n\tprivate _visible = false;\n\n\tconstructor(\n\t\t_notebookEditor: INotebookEditorDelegate,\n\t\tprivate readonly _cell: ICellViewModel,\n\t\tprivate readonly _element: HTMLElement,\n\t\t@INotebookExecutionStateService\n\t\tprivate _executionStateService: INotebookExecutionStateService,\n\t) {\n\t\tsuper();\n\n\t\tthis._update();\n\t\tthis._register(\n\t\t\tthis._executionStateService.onDidChangeExecution((e) => {\n\t\t\t\tif (\n\t\t\t\t\te.type === NotebookExecutionType.cell &&\n\t\t\t\t\te.affectsCell(this._cell.uri)\n\t\t\t\t) {\n\t\t\t\t\tthis._update();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._cell.model.onDidChangeInternalMetadata(() => this._update()),\n\t\t);\n\t}\n\n\tsetVisibility(visible: boolean): void {\n\t\tthis._visible = visible;\n\t\tthis._update();\n\t}\n\n\tprivate _update() {\n\t\tif (!this._visible) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst runState = this._executionStateService.getCellExecution(\n\t\t\tthis._cell.uri,\n\t\t);\n\t\tconst item = this._getItemForState(\n\t\t\trunState,\n\t\t\tthis._cell.model.internalMetadata,\n\t\t);\n\t\tif (item) {\n\t\t\tthis._element.style.display = \"\";\n\t\t\tDOM.reset(this._element, ...renderLabelWithIcons(item.text));\n\t\t\tthis._element.title = item.tooltip ?? \"\";\n\t\t} else {\n\t\t\tthis._element.style.display = \"none\";\n\t\t\tDOM.reset(this._element);\n\t\t}\n\t}\n\n\tprivate _getItemForState(\n\t\trunState: INotebookCellExecution | undefined,\n\t\tinternalMetadata: NotebookCellInternalMetadata,\n\t): IExecutionItem | undefined {\n\t\tconst state = runState?.state;\n\t\tconst { lastRunSuccess } = internalMetadata;\n\t\tif (!state && lastRunSuccess) {\n\t\t\treturn {\n\t\t\t\ttext: `$(${successStateIcon.id})`,\n\t\t\t\ttooltip: localize(\"notebook.cell.status.success\", \"Success\"),\n\t\t\t};\n\t\t} else if (!state && lastRunSuccess === false) {\n\t\t\treturn {\n\t\t\t\ttext: `$(${errorStateIcon.id})`,\n\t\t\t\ttooltip: localize(\"notebook.cell.status.failure\", \"Failure\"),\n\t\t\t};\n\t\t} else if (\n\t\t\tstate === NotebookCellExecutionState.Pending ||\n\t\t\tstate === NotebookCellExecutionState.Unconfirmed\n\t\t) {\n\t\t\treturn {\n\t\t\t\ttext: `$(${pendingStateIcon.id})`,\n\t\t\t\ttooltip: localize(\"notebook.cell.status.pending\", \"Pending\"),\n\t\t\t};\n\t\t} else if (state === NotebookCellExecutionState.Executing) {\n\t\t\tconst icon = ThemeIcon.modify(executingStateIcon, \"spin\");\n\t\t\treturn {\n\t\t\t\ttext: `$(${icon.id})`,\n\t\t\t\ttooltip: localize(\n\t\t\t\t\t\"notebook.cell.status.executing\",\n\t\t\t\t\t\"Executing\",\n\t\t\t\t),\n\t\t\t};\n\t\t}\n\n\t\treturn;\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;AAKA,YAAY,SAAS;AACrB,SAAS,4BAA4B;AACrC,SAAS,kBAAkB;AAC3B,SAAS,iBAAiB;AAC1B,SAAS,gBAAgB;AACzB;AAAA,EACC;AAAA,OAEM;AACP;AAAA,EAEC;AAAA,EACA;AAAA,OACM;AAKP;AAAA,EACC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,OACM;AAOA,IAAM,iCAAN,cAA6C,WAAW;AAAA,EAG9D,YACC,iBACiB,OACA,UAET,wBACP;AACD,UAAM;AALW;AACA;AAET;AAIR,SAAK,QAAQ;AACb,SAAK;AAAA,MACJ,KAAK,uBAAuB,qBAAqB,CAAC,MAAM;AACvD,YACC,EAAE,SAAS,sBAAsB,QACjC,EAAE,YAAY,KAAK,MAAM,GAAG,GAC3B;AACD,eAAK,QAAQ;AAAA,QACd;AAAA,MACD,CAAC;AAAA,IACF;AACA,SAAK;AAAA,MACJ,KAAK,MAAM,MAAM,4BAA4B,MAAM,KAAK,QAAQ,CAAC;AAAA,IAClE;AAAA,EACD;AAAA,EA7DD,OAmC+D;AAAA;AAAA;AAAA,EACtD,WAAW;AAAA,EA2BnB,cAAc,SAAwB;AACrC,SAAK,WAAW;AAChB,SAAK,QAAQ;AAAA,EACd;AAAA,EAEQ,UAAU;AACjB,QAAI,CAAC,KAAK,UAAU;AACnB;AAAA,IACD;AAEA,UAAM,WAAW,KAAK,uBAAuB;AAAA,MAC5C,KAAK,MAAM;AAAA,IACZ;AACA,UAAM,OAAO,KAAK;AAAA,MACjB;AAAA,MACA,KAAK,MAAM,MAAM;AAAA,IAClB;AACA,QAAI,MAAM;AACT,WAAK,SAAS,MAAM,UAAU;AAC9B,UAAI,MAAM,KAAK,UAAU,GAAG,qBAAqB,KAAK,IAAI,CAAC;AAC3D,WAAK,SAAS,QAAQ,KAAK,WAAW;AAAA,IACvC,OAAO;AACN,WAAK,SAAS,MAAM,UAAU;AAC9B,UAAI,MAAM,KAAK,QAAQ;AAAA,IACxB;AAAA,EACD;AAAA,EAEQ,iBACP,UACA,kBAC6B;AAC7B,UAAM,QAAQ,UAAU;AACxB,UAAM,EAAE,eAAe,IAAI;AAC3B,QAAI,CAAC,SAAS,gBAAgB;AAC7B,aAAO;AAAA,QACN,MAAM,KAAK,iBAAiB,EAAE;AAAA,QAC9B,SAAS,SAAS,gCAAgC,SAAS;AAAA,MAC5D;AAAA,IACD,WAAW,CAAC,SAAS,mBAAmB,OAAO;AAC9C,aAAO;AAAA,QACN,MAAM,KAAK,eAAe,EAAE;AAAA,QAC5B,SAAS,SAAS,gCAAgC,SAAS;AAAA,MAC5D;AAAA,IACD,WACC,UAAU,2BAA2B,WACrC,UAAU,2BAA2B,aACpC;AACD,aAAO;AAAA,QACN,MAAM,KAAK,iBAAiB,EAAE;AAAA,QAC9B,SAAS,SAAS,gCAAgC,SAAS;AAAA,MAC5D;AAAA,IACD,WAAW,UAAU,2BAA2B,WAAW;AAC1D,YAAM,OAAO,UAAU,OAAO,oBAAoB,MAAM;AACxD,aAAO;AAAA,QACN,MAAM,KAAK,KAAK,EAAE;AAAA,QAClB,SAAS;AAAA,UACR;AAAA,UACA;AAAA,QACD;AAAA,MACD;AAAA,IACD;AAEA;AAAA,EACD;AACD;AA5Fa,iCAAN;AAAA,EAOJ;AAAA,GAPU;",
  "names": []
}
