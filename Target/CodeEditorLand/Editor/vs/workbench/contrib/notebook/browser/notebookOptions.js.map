{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/notebook/browser/notebookOptions.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { PixelRatio } from \"../../../../base/browser/pixelRatio.js\";\nimport type { CodeWindow } from \"../../../../base/browser/window.js\";\nimport { Emitter } from \"../../../../base/common/event.js\";\nimport { Disposable } from \"../../../../base/common/lifecycle.js\";\nimport { isObject } from \"../../../../base/common/types.js\";\nimport type { URI } from \"../../../../base/common/uri.js\";\nimport { FontMeasurements } from \"../../../../editor/browser/config/fontMeasurements.js\";\nimport { ICodeEditorService } from \"../../../../editor/browser/services/codeEditorService.js\";\nimport type { IEditorOptions } from \"../../../../editor/common/config/editorOptions.js\";\nimport { BareFontInfo } from \"../../../../editor/common/config/fontInfo.js\";\nimport {\n\tConfigurationTarget,\n\ttype IConfigurationChangeEvent,\n\tIConfigurationService,\n} from \"../../../../platform/configuration/common/configuration.js\";\nimport {\n\ttype InteractiveWindowCollapseCodeCells,\n\ttype NotebookCellDefaultCollapseConfig,\n\ttype NotebookCellInternalMetadata,\n\tNotebookSetting,\n\ttype ShowCellStatusBarType,\n} from \"../common/notebookCommon.js\";\nimport { INotebookExecutionStateService } from \"../common/notebookExecutionStateService.js\";\n\nconst SCROLLABLE_ELEMENT_PADDING_TOP = 18;\n\nexport const OutputInnerContainerTopPadding = 4;\n\nexport interface NotebookDisplayOptions {\n\t// TODO @Yoyokrazy rename to a more generic name, not display\n\tshowCellStatusBar: ShowCellStatusBarType;\n\tcellToolbarLocation: string | { [key: string]: string };\n\tcellToolbarInteraction: string;\n\tcompactView: boolean;\n\tfocusIndicator: \"border\" | \"gutter\";\n\tinsertToolbarPosition:\n\t\t| \"betweenCells\"\n\t\t| \"notebookToolbar\"\n\t\t| \"both\"\n\t\t| \"hidden\";\n\tinsertToolbarAlignment: \"left\" | \"center\";\n\tglobalToolbar: boolean;\n\tstickyScrollEnabled: boolean;\n\tstickyScrollMode: \"flat\" | \"indented\";\n\tconsolidatedOutputButton: boolean;\n\tconsolidatedRunButton: boolean;\n\tshowFoldingControls: \"always\" | \"never\" | \"mouseover\";\n\tdragAndDropEnabled: boolean;\n\tinteractiveWindowCollapseCodeCells: InteractiveWindowCollapseCodeCells;\n\toutputScrolling: boolean;\n\toutputWordWrap: boolean;\n\toutputLineLimit: number;\n\toutputLinkifyFilePaths: boolean;\n\toutputMinimalError: boolean;\n\tfontSize: number;\n\toutputFontSize: number;\n\toutputFontFamily: string;\n\toutputLineHeight: number;\n\tmarkupFontSize: number;\n\tmarkdownLineHeight: number;\n\teditorOptionsCustomizations:\n\t\t| Partial<{\n\t\t\t\t\"editor.indentSize\": \"tabSize\" | number;\n\t\t\t\t\"editor.tabSize\": number;\n\t\t\t\t\"editor.insertSpaces\": boolean;\n\t\t  }>\n\t\t| undefined;\n}\n\nexport interface NotebookLayoutConfiguration {\n\tcellRightMargin: number;\n\tcellRunGutter: number;\n\tcellTopMargin: number;\n\tcellBottomMargin: number;\n\tcellOutputPadding: number;\n\tcodeCellLeftMargin: number;\n\tmarkdownCellLeftMargin: number;\n\tmarkdownCellGutter: number;\n\tmarkdownCellTopMargin: number;\n\tmarkdownCellBottomMargin: number;\n\tmarkdownPreviewPadding: number;\n\tmarkdownFoldHintHeight: number;\n\teditorToolbarHeight: number;\n\teditorTopPadding: number;\n\teditorBottomPadding: number;\n\teditorBottomPaddingWithoutStatusBar: number;\n\tcollapsedIndicatorHeight: number;\n\tcellStatusBarHeight: number;\n\tfocusIndicatorLeftMargin: number;\n\tfocusIndicatorGap: number;\n}\n\nexport interface NotebookOptionsChangeEvent {\n\treadonly cellStatusBarVisibility?: boolean;\n\treadonly cellToolbarLocation?: boolean;\n\treadonly cellToolbarInteraction?: boolean;\n\treadonly editorTopPadding?: boolean;\n\treadonly compactView?: boolean;\n\treadonly focusIndicator?: boolean;\n\treadonly insertToolbarPosition?: boolean;\n\treadonly insertToolbarAlignment?: boolean;\n\treadonly globalToolbar?: boolean;\n\treadonly stickyScrollEnabled?: boolean;\n\treadonly stickyScrollMode?: boolean;\n\treadonly showFoldingControls?: boolean;\n\treadonly consolidatedOutputButton?: boolean;\n\treadonly consolidatedRunButton?: boolean;\n\treadonly dragAndDropEnabled?: boolean;\n\treadonly fontSize?: boolean;\n\treadonly outputFontSize?: boolean;\n\treadonly markupFontSize?: boolean;\n\treadonly markdownLineHeight?: boolean;\n\treadonly fontFamily?: boolean;\n\treadonly outputFontFamily?: boolean;\n\treadonly editorOptionsCustomizations?: boolean;\n\treadonly interactiveWindowCollapseCodeCells?: boolean;\n\treadonly outputLineHeight?: boolean;\n\treadonly outputWordWrap?: boolean;\n\treadonly outputScrolling?: boolean;\n\treadonly outputLinkifyFilePaths?: boolean;\n\treadonly minimalError?: boolean;\n}\n\nconst defaultConfigConstants = Object.freeze({\n\tcodeCellLeftMargin: 28,\n\tcellRunGutter: 32,\n\tmarkdownCellTopMargin: 8,\n\tmarkdownCellBottomMargin: 8,\n\tmarkdownCellLeftMargin: 0,\n\tmarkdownCellGutter: 32,\n\tfocusIndicatorLeftMargin: 4,\n});\n\nconst compactConfigConstants = Object.freeze({\n\tcodeCellLeftMargin: 8,\n\tcellRunGutter: 36,\n\tmarkdownCellTopMargin: 6,\n\tmarkdownCellBottomMargin: 6,\n\tmarkdownCellLeftMargin: 8,\n\tmarkdownCellGutter: 36,\n\tfocusIndicatorLeftMargin: 4,\n});\n\nexport class NotebookOptions extends Disposable {\n\tprivate _layoutConfiguration: NotebookLayoutConfiguration &\n\t\tNotebookDisplayOptions;\n\tprotected readonly _onDidChangeOptions = this._register(\n\t\tnew Emitter<NotebookOptionsChangeEvent>(),\n\t);\n\treadonly onDidChangeOptions = this._onDidChangeOptions.event;\n\tprivate _editorTopPadding = 12;\n\n\tconstructor(\n\t\treadonly targetWindow: CodeWindow,\n\t\tprivate isReadonly: boolean,\n\t\tprivate readonly overrides:\n\t\t\t| {\n\t\t\t\t\tcellToolbarInteraction: string;\n\t\t\t\t\tglobalToolbar: boolean;\n\t\t\t\t\tstickyScrollEnabled: boolean;\n\t\t\t\t\tdragAndDropEnabled: boolean;\n\t\t\t  }\n\t\t\t| undefined,\n\t\t@IConfigurationService\n\t\tprivate readonly configurationService: IConfigurationService,\n\t\t@INotebookExecutionStateService\n\t\tprivate readonly notebookExecutionStateService: INotebookExecutionStateService,\n\t\t@ICodeEditorService\n\t\tprivate readonly codeEditorService: ICodeEditorService,\n\t) {\n\t\tsuper();\n\t\tconst showCellStatusBar =\n\t\t\tthis.configurationService.getValue<ShowCellStatusBarType>(\n\t\t\t\tNotebookSetting.showCellStatusBar,\n\t\t\t);\n\t\tconst globalToolbar =\n\t\t\toverrides?.globalToolbar ??\n\t\t\tthis.configurationService.getValue<boolean | undefined>(\n\t\t\t\tNotebookSetting.globalToolbar,\n\t\t\t) ??\n\t\t\ttrue;\n\t\tconst stickyScrollEnabled =\n\t\t\toverrides?.stickyScrollEnabled ??\n\t\t\tthis.configurationService.getValue<boolean | undefined>(\n\t\t\t\tNotebookSetting.stickyScrollEnabled,\n\t\t\t) ??\n\t\t\tfalse;\n\t\tconst stickyScrollMode = this._computeStickyScrollModeOption();\n\t\tconst consolidatedOutputButton =\n\t\t\tthis.configurationService.getValue<boolean | undefined>(\n\t\t\t\tNotebookSetting.consolidatedOutputButton,\n\t\t\t) ?? true;\n\t\tconst consolidatedRunButton =\n\t\t\tthis.configurationService.getValue<boolean | undefined>(\n\t\t\t\tNotebookSetting.consolidatedRunButton,\n\t\t\t) ?? false;\n\t\tconst dragAndDropEnabled =\n\t\t\toverrides?.dragAndDropEnabled ??\n\t\t\tthis.configurationService.getValue<boolean | undefined>(\n\t\t\t\tNotebookSetting.dragAndDropEnabled,\n\t\t\t) ??\n\t\t\ttrue;\n\t\tconst cellToolbarLocation = this.configurationService.getValue<\n\t\t\tstring | { [key: string]: string }\n\t\t>(NotebookSetting.cellToolbarLocation) ?? { \"default\": \"right\" };\n\t\tconst cellToolbarInteraction =\n\t\t\toverrides?.cellToolbarInteraction ??\n\t\t\tthis.configurationService.getValue<string>(\n\t\t\t\tNotebookSetting.cellToolbarVisibility,\n\t\t\t);\n\t\tconst compactView =\n\t\t\tthis.configurationService.getValue<boolean | undefined>(\n\t\t\t\tNotebookSetting.compactView,\n\t\t\t) ?? true;\n\t\tconst focusIndicator = this._computeFocusIndicatorOption();\n\t\tconst insertToolbarPosition = this._computeInsertToolbarPositionOption(\n\t\t\tthis.isReadonly,\n\t\t);\n\t\tconst insertToolbarAlignment =\n\t\t\tthis._computeInsertToolbarAlignmentOption();\n\t\tconst showFoldingControls = this._computeShowFoldingControlsOption();\n\t\t// const { bottomToolbarGap, bottomToolbarHeight } = this._computeBottomToolbarDimensions(compactView, insertToolbarPosition, insertToolbarAlignment);\n\t\tconst fontSize =\n\t\t\tthis.configurationService.getValue<number>(\"editor.fontSize\");\n\t\tconst markupFontSize = this.configurationService.getValue<number>(\n\t\t\tNotebookSetting.markupFontSize,\n\t\t);\n\t\tconst markdownLineHeight = this.configurationService.getValue<number>(\n\t\t\tNotebookSetting.markdownLineHeight,\n\t\t);\n\t\tlet editorOptionsCustomizations =\n\t\t\tthis.configurationService.getValue<\n\t\t\t\tPartial<{\n\t\t\t\t\t\"editor.indentSize\": \"tabSize\" | number;\n\t\t\t\t\t\"editor.tabSize\": number;\n\t\t\t\t\t\"editor.insertSpaces\": boolean;\n\t\t\t\t}>\n\t\t\t>(NotebookSetting.cellEditorOptionsCustomizations) ?? {};\n\t\teditorOptionsCustomizations = isObject(editorOptionsCustomizations)\n\t\t\t? editorOptionsCustomizations\n\t\t\t: {};\n\t\tconst interactiveWindowCollapseCodeCells: InteractiveWindowCollapseCodeCells =\n\t\t\tthis.configurationService.getValue(\n\t\t\t\tNotebookSetting.interactiveWindowCollapseCodeCells,\n\t\t\t);\n\n\t\t// TOOD @rebornix remove after a few iterations of deprecated setting\n\t\tlet outputLineHeightSettingValue: number;\n\t\tconst deprecatedOutputLineHeightSetting =\n\t\t\tthis.configurationService.getValue<number>(\n\t\t\t\tNotebookSetting.outputLineHeightDeprecated,\n\t\t\t);\n\t\tif (deprecatedOutputLineHeightSetting !== undefined) {\n\t\t\tthis._migrateDeprecatedSetting(\n\t\t\t\tNotebookSetting.outputLineHeightDeprecated,\n\t\t\t\tNotebookSetting.outputLineHeight,\n\t\t\t);\n\t\t\toutputLineHeightSettingValue = deprecatedOutputLineHeightSetting;\n\t\t} else {\n\t\t\toutputLineHeightSettingValue =\n\t\t\t\tthis.configurationService.getValue<number>(\n\t\t\t\t\tNotebookSetting.outputLineHeight,\n\t\t\t\t);\n\t\t}\n\n\t\tlet outputFontSize: number;\n\t\tconst deprecatedOutputFontSizeSetting =\n\t\t\tthis.configurationService.getValue<number>(\n\t\t\t\tNotebookSetting.outputFontSizeDeprecated,\n\t\t\t);\n\t\tif (deprecatedOutputFontSizeSetting !== undefined) {\n\t\t\tthis._migrateDeprecatedSetting(\n\t\t\t\tNotebookSetting.outputFontSizeDeprecated,\n\t\t\t\tNotebookSetting.outputFontSize,\n\t\t\t);\n\t\t\toutputFontSize = deprecatedOutputFontSizeSetting;\n\t\t} else {\n\t\t\toutputFontSize =\n\t\t\t\tthis.configurationService.getValue<number>(\n\t\t\t\t\tNotebookSetting.outputFontSize,\n\t\t\t\t) || fontSize;\n\t\t}\n\n\t\tlet outputFontFamily: string;\n\t\tconst deprecatedOutputFontFamilySetting =\n\t\t\tthis.configurationService.getValue<string>(\n\t\t\t\tNotebookSetting.outputFontFamilyDeprecated,\n\t\t\t);\n\t\tif (deprecatedOutputFontFamilySetting !== undefined) {\n\t\t\tthis._migrateDeprecatedSetting(\n\t\t\t\tNotebookSetting.outputFontFamilyDeprecated,\n\t\t\t\tNotebookSetting.outputFontFamily,\n\t\t\t);\n\t\t\toutputFontFamily = deprecatedOutputFontFamilySetting;\n\t\t} else {\n\t\t\toutputFontFamily = this.configurationService.getValue<string>(\n\t\t\t\tNotebookSetting.outputFontFamily,\n\t\t\t);\n\t\t}\n\n\t\tlet outputScrolling: boolean;\n\t\tconst deprecatedOutputScrollingSetting =\n\t\t\tthis.configurationService.getValue<boolean>(\n\t\t\t\tNotebookSetting.outputScrollingDeprecated,\n\t\t\t);\n\t\tif (deprecatedOutputScrollingSetting !== undefined) {\n\t\t\tthis._migrateDeprecatedSetting(\n\t\t\t\tNotebookSetting.outputScrollingDeprecated,\n\t\t\t\tNotebookSetting.outputScrolling,\n\t\t\t);\n\t\t\toutputScrolling = deprecatedOutputScrollingSetting;\n\t\t} else {\n\t\t\toutputScrolling = this.configurationService.getValue<boolean>(\n\t\t\t\tNotebookSetting.outputScrolling,\n\t\t\t);\n\t\t}\n\n\t\tconst outputLineHeight = this._computeOutputLineHeight(\n\t\t\toutputLineHeightSettingValue,\n\t\t\toutputFontSize,\n\t\t);\n\t\tconst outputWordWrap = this.configurationService.getValue<boolean>(\n\t\t\tNotebookSetting.outputWordWrap,\n\t\t);\n\t\tconst outputLineLimit =\n\t\t\tthis.configurationService.getValue<number>(\n\t\t\t\tNotebookSetting.textOutputLineLimit,\n\t\t\t) ?? 30;\n\t\tconst linkifyFilePaths =\n\t\t\tthis.configurationService.getValue<boolean>(\n\t\t\t\tNotebookSetting.LinkifyOutputFilePaths,\n\t\t\t) ?? true;\n\t\tconst minimalErrors = this.configurationService.getValue<boolean>(\n\t\t\tNotebookSetting.minimalErrorRendering,\n\t\t);\n\n\t\tconst editorTopPadding = this._computeEditorTopPadding();\n\n\t\tthis._layoutConfiguration = {\n\t\t\t...(compactView ? compactConfigConstants : defaultConfigConstants),\n\t\t\tcellTopMargin: 6,\n\t\t\tcellBottomMargin: 6,\n\t\t\tcellRightMargin: 16,\n\t\t\tcellStatusBarHeight: 22,\n\t\t\tcellOutputPadding: 8,\n\t\t\tmarkdownPreviewPadding: 8,\n\t\t\t// bottomToolbarHeight: bottomToolbarHeight,\n\t\t\t// bottomToolbarGap: bottomToolbarGap,\n\t\t\teditorToolbarHeight: 0,\n\t\t\teditorTopPadding: editorTopPadding,\n\t\t\teditorBottomPadding: 4,\n\t\t\teditorBottomPaddingWithoutStatusBar: 12,\n\t\t\tcollapsedIndicatorHeight: 28,\n\t\t\tshowCellStatusBar,\n\t\t\tglobalToolbar,\n\t\t\tstickyScrollEnabled,\n\t\t\tstickyScrollMode,\n\t\t\tconsolidatedOutputButton,\n\t\t\tconsolidatedRunButton,\n\t\t\tdragAndDropEnabled,\n\t\t\tcellToolbarLocation,\n\t\t\tcellToolbarInteraction,\n\t\t\tcompactView,\n\t\t\tfocusIndicator,\n\t\t\tinsertToolbarPosition,\n\t\t\tinsertToolbarAlignment,\n\t\t\tshowFoldingControls,\n\t\t\tfontSize,\n\t\t\toutputFontSize,\n\t\t\toutputFontFamily,\n\t\t\toutputLineHeight,\n\t\t\tmarkupFontSize,\n\t\t\tmarkdownLineHeight,\n\t\t\teditorOptionsCustomizations,\n\t\t\tfocusIndicatorGap: 3,\n\t\t\tinteractiveWindowCollapseCodeCells,\n\t\t\tmarkdownFoldHintHeight: 22,\n\t\t\toutputScrolling: outputScrolling,\n\t\t\toutputWordWrap: outputWordWrap,\n\t\t\toutputLineLimit: outputLineLimit,\n\t\t\toutputLinkifyFilePaths: linkifyFilePaths,\n\t\t\toutputMinimalError: minimalErrors,\n\t\t};\n\n\t\tthis._register(\n\t\t\tthis.configurationService.onDidChangeConfiguration((e) => {\n\t\t\t\tthis._updateConfiguration(e);\n\t\t\t}),\n\t\t);\n\t}\n\n\tupdateOptions(isReadonly: boolean) {\n\t\tif (this.isReadonly !== isReadonly) {\n\t\t\tthis.isReadonly = isReadonly;\n\n\t\t\tthis._updateConfiguration({\n\t\t\t\taffectsConfiguration(configuration: string): boolean {\n\t\t\t\t\treturn (\n\t\t\t\t\t\tconfiguration === NotebookSetting.insertToolbarLocation\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\tsource: ConfigurationTarget.DEFAULT,\n\t\t\t\taffectedKeys: new Set([NotebookSetting.insertToolbarLocation]),\n\t\t\t\tchange: {\n\t\t\t\t\tkeys: [NotebookSetting.insertToolbarLocation],\n\t\t\t\t\toverrides: [],\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate _computeEditorTopPadding(): number {\n\t\tlet decorationTriggeredAdjustment = false;\n\n\t\tconst updateEditorTopPadding = (top: number) => {\n\t\t\tthis._editorTopPadding = top;\n\t\t\tconst configuration = Object.assign({}, this._layoutConfiguration);\n\t\t\tconfiguration.editorTopPadding = this._editorTopPadding;\n\t\t\tthis._layoutConfiguration = configuration;\n\t\t\tthis._onDidChangeOptions.fire({ editorTopPadding: true });\n\t\t};\n\n\t\tconst decorationCheckSet = new Set<string>();\n\t\tconst onDidAddDecorationType = (e: string) => {\n\t\t\tif (decorationTriggeredAdjustment) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (decorationCheckSet.has(e)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tconst options = this.codeEditorService.resolveDecorationOptions(\n\t\t\t\t\te,\n\t\t\t\t\ttrue,\n\t\t\t\t);\n\t\t\t\tif (\n\t\t\t\t\toptions.afterContentClassName ||\n\t\t\t\t\toptions.beforeContentClassName\n\t\t\t\t) {\n\t\t\t\t\tconst cssRules =\n\t\t\t\t\t\tthis.codeEditorService.resolveDecorationCSSRules(e);\n\t\t\t\t\tif (cssRules !== null) {\n\t\t\t\t\t\tfor (let i = 0; i < cssRules.length; i++) {\n\t\t\t\t\t\t\t// The following ways to index into the list are equivalent\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t((\n\t\t\t\t\t\t\t\t\tcssRules[i] as CSSStyleRule\n\t\t\t\t\t\t\t\t).selectorText.endsWith(\"::after\") ||\n\t\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t\tcssRules[i] as CSSStyleRule\n\t\t\t\t\t\t\t\t\t).selectorText.endsWith(\"::after\")) &&\n\t\t\t\t\t\t\t\t(cssRules[i] as CSSStyleRule).cssText.indexOf(\n\t\t\t\t\t\t\t\t\t\"top:\",\n\t\t\t\t\t\t\t\t) > -1\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t// there is a `::before` or `::after` text decoration whose position is above or below current line\n\t\t\t\t\t\t\t\t// we at least make sure that the editor top padding is at least one line\n\t\t\t\t\t\t\t\tconst editorOptions =\n\t\t\t\t\t\t\t\t\tthis.configurationService.getValue<IEditorOptions>(\n\t\t\t\t\t\t\t\t\t\t\"editor\",\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tupdateEditorTopPadding(\n\t\t\t\t\t\t\t\t\tBareFontInfo.createFromRawSettings(\n\t\t\t\t\t\t\t\t\t\teditorOptions,\n\t\t\t\t\t\t\t\t\t\tPixelRatio.getInstance(\n\t\t\t\t\t\t\t\t\t\t\tthis.targetWindow,\n\t\t\t\t\t\t\t\t\t\t).value,\n\t\t\t\t\t\t\t\t\t).lineHeight + 2,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tdecorationTriggeredAdjustment = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdecorationCheckSet.add(e);\n\t\t\t} catch (_ex) {\n\t\t\t\t// do not throw and break notebook\n\t\t\t}\n\t\t};\n\t\tthis._register(\n\t\t\tthis.codeEditorService.onDecorationTypeRegistered(\n\t\t\t\tonDidAddDecorationType,\n\t\t\t),\n\t\t);\n\t\tthis.codeEditorService\n\t\t\t.listDecorationTypes()\n\t\t\t.forEach(onDidAddDecorationType);\n\n\t\treturn this._editorTopPadding;\n\t}\n\n\tprivate _migrateDeprecatedSetting(\n\t\tdeprecatedKey: string,\n\t\tkey: string,\n\t): void {\n\t\tconst deprecatedSetting =\n\t\t\tthis.configurationService.inspect(deprecatedKey);\n\n\t\tif (deprecatedSetting.application !== undefined) {\n\t\t\tthis.configurationService.updateValue(\n\t\t\t\tdeprecatedKey,\n\t\t\t\tundefined,\n\t\t\t\tConfigurationTarget.APPLICATION,\n\t\t\t);\n\t\t\tthis.configurationService.updateValue(\n\t\t\t\tkey,\n\t\t\t\tdeprecatedSetting.application.value,\n\t\t\t\tConfigurationTarget.APPLICATION,\n\t\t\t);\n\t\t}\n\n\t\tif (deprecatedSetting.user !== undefined) {\n\t\t\tthis.configurationService.updateValue(\n\t\t\t\tdeprecatedKey,\n\t\t\t\tundefined,\n\t\t\t\tConfigurationTarget.USER,\n\t\t\t);\n\t\t\tthis.configurationService.updateValue(\n\t\t\t\tkey,\n\t\t\t\tdeprecatedSetting.user.value,\n\t\t\t\tConfigurationTarget.USER,\n\t\t\t);\n\t\t}\n\n\t\tif (deprecatedSetting.userLocal !== undefined) {\n\t\t\tthis.configurationService.updateValue(\n\t\t\t\tdeprecatedKey,\n\t\t\t\tundefined,\n\t\t\t\tConfigurationTarget.USER_LOCAL,\n\t\t\t);\n\t\t\tthis.configurationService.updateValue(\n\t\t\t\tkey,\n\t\t\t\tdeprecatedSetting.userLocal.value,\n\t\t\t\tConfigurationTarget.USER_LOCAL,\n\t\t\t);\n\t\t}\n\n\t\tif (deprecatedSetting.userRemote !== undefined) {\n\t\t\tthis.configurationService.updateValue(\n\t\t\t\tdeprecatedKey,\n\t\t\t\tundefined,\n\t\t\t\tConfigurationTarget.USER_REMOTE,\n\t\t\t);\n\t\t\tthis.configurationService.updateValue(\n\t\t\t\tkey,\n\t\t\t\tdeprecatedSetting.userRemote.value,\n\t\t\t\tConfigurationTarget.USER_REMOTE,\n\t\t\t);\n\t\t}\n\n\t\tif (deprecatedSetting.workspace !== undefined) {\n\t\t\tthis.configurationService.updateValue(\n\t\t\t\tdeprecatedKey,\n\t\t\t\tundefined,\n\t\t\t\tConfigurationTarget.WORKSPACE,\n\t\t\t);\n\t\t\tthis.configurationService.updateValue(\n\t\t\t\tkey,\n\t\t\t\tdeprecatedSetting.workspace.value,\n\t\t\t\tConfigurationTarget.WORKSPACE,\n\t\t\t);\n\t\t}\n\n\t\tif (deprecatedSetting.workspaceFolder !== undefined) {\n\t\t\tthis.configurationService.updateValue(\n\t\t\t\tdeprecatedKey,\n\t\t\t\tundefined,\n\t\t\t\tConfigurationTarget.WORKSPACE_FOLDER,\n\t\t\t);\n\t\t\tthis.configurationService.updateValue(\n\t\t\t\tkey,\n\t\t\t\tdeprecatedSetting.workspaceFolder.value,\n\t\t\t\tConfigurationTarget.WORKSPACE_FOLDER,\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate _computeOutputLineHeight(\n\t\tlineHeight: number,\n\t\toutputFontSize: number,\n\t): number {\n\t\tconst minimumLineHeight = 9;\n\n\t\tif (lineHeight === 0) {\n\t\t\t// use editor line height\n\t\t\tconst editorOptions =\n\t\t\t\tthis.configurationService.getValue<IEditorOptions>(\"editor\");\n\t\t\tconst fontInfo = FontMeasurements.readFontInfo(\n\t\t\t\tthis.targetWindow,\n\t\t\t\tBareFontInfo.createFromRawSettings(\n\t\t\t\t\teditorOptions,\n\t\t\t\t\tPixelRatio.getInstance(this.targetWindow).value,\n\t\t\t\t),\n\t\t\t);\n\t\t\tlineHeight = fontInfo.lineHeight;\n\t\t} else if (lineHeight < minimumLineHeight) {\n\t\t\t// Values too small to be line heights in pixels are in ems.\n\t\t\tlet fontSize = outputFontSize;\n\t\t\tif (fontSize === 0) {\n\t\t\t\tfontSize =\n\t\t\t\t\tthis.configurationService.getValue<number>(\n\t\t\t\t\t\t\"editor.fontSize\",\n\t\t\t\t\t);\n\t\t\t}\n\n\t\t\tlineHeight = lineHeight * fontSize;\n\t\t}\n\n\t\t// Enforce integer, minimum constraints\n\t\tlineHeight = Math.round(lineHeight);\n\t\tif (lineHeight < minimumLineHeight) {\n\t\t\tlineHeight = minimumLineHeight;\n\t\t}\n\n\t\treturn lineHeight;\n\t}\n\n\tprivate _updateConfiguration(e: IConfigurationChangeEvent) {\n\t\tconst cellStatusBarVisibility = e.affectsConfiguration(\n\t\t\tNotebookSetting.showCellStatusBar,\n\t\t);\n\t\tconst cellToolbarLocation = e.affectsConfiguration(\n\t\t\tNotebookSetting.cellToolbarLocation,\n\t\t);\n\t\tconst cellToolbarInteraction = e.affectsConfiguration(\n\t\t\tNotebookSetting.cellToolbarVisibility,\n\t\t);\n\t\tconst compactView = e.affectsConfiguration(NotebookSetting.compactView);\n\t\tconst focusIndicator = e.affectsConfiguration(\n\t\t\tNotebookSetting.focusIndicator,\n\t\t);\n\t\tconst insertToolbarPosition = e.affectsConfiguration(\n\t\t\tNotebookSetting.insertToolbarLocation,\n\t\t);\n\t\tconst insertToolbarAlignment = e.affectsConfiguration(\n\t\t\tNotebookSetting.experimentalInsertToolbarAlignment,\n\t\t);\n\t\tconst globalToolbar = e.affectsConfiguration(\n\t\t\tNotebookSetting.globalToolbar,\n\t\t);\n\t\tconst stickyScrollEnabled = e.affectsConfiguration(\n\t\t\tNotebookSetting.stickyScrollEnabled,\n\t\t);\n\t\tconst stickyScrollMode = e.affectsConfiguration(\n\t\t\tNotebookSetting.stickyScrollMode,\n\t\t);\n\t\tconst consolidatedOutputButton = e.affectsConfiguration(\n\t\t\tNotebookSetting.consolidatedOutputButton,\n\t\t);\n\t\tconst consolidatedRunButton = e.affectsConfiguration(\n\t\t\tNotebookSetting.consolidatedRunButton,\n\t\t);\n\t\tconst showFoldingControls = e.affectsConfiguration(\n\t\t\tNotebookSetting.showFoldingControls,\n\t\t);\n\t\tconst dragAndDropEnabled = e.affectsConfiguration(\n\t\t\tNotebookSetting.dragAndDropEnabled,\n\t\t);\n\t\tconst fontSize = e.affectsConfiguration(\"editor.fontSize\");\n\t\tconst outputFontSize = e.affectsConfiguration(\n\t\t\tNotebookSetting.outputFontSize,\n\t\t);\n\t\tconst markupFontSize = e.affectsConfiguration(\n\t\t\tNotebookSetting.markupFontSize,\n\t\t);\n\t\tconst markdownLineHeight = e.affectsConfiguration(\n\t\t\tNotebookSetting.markdownLineHeight,\n\t\t);\n\t\tconst fontFamily = e.affectsConfiguration(\"editor.fontFamily\");\n\t\tconst outputFontFamily = e.affectsConfiguration(\n\t\t\tNotebookSetting.outputFontFamily,\n\t\t);\n\t\tconst editorOptionsCustomizations = e.affectsConfiguration(\n\t\t\tNotebookSetting.cellEditorOptionsCustomizations,\n\t\t);\n\t\tconst interactiveWindowCollapseCodeCells = e.affectsConfiguration(\n\t\t\tNotebookSetting.interactiveWindowCollapseCodeCells,\n\t\t);\n\t\tconst outputLineHeight = e.affectsConfiguration(\n\t\t\tNotebookSetting.outputLineHeight,\n\t\t);\n\t\tconst outputScrolling = e.affectsConfiguration(\n\t\t\tNotebookSetting.outputScrolling,\n\t\t);\n\t\tconst outputWordWrap = e.affectsConfiguration(\n\t\t\tNotebookSetting.outputWordWrap,\n\t\t);\n\t\tconst outputLinkifyFilePaths = e.affectsConfiguration(\n\t\t\tNotebookSetting.LinkifyOutputFilePaths,\n\t\t);\n\t\tconst minimalError = e.affectsConfiguration(\n\t\t\tNotebookSetting.minimalErrorRendering,\n\t\t);\n\n\t\tif (\n\t\t\t!cellStatusBarVisibility &&\n\t\t\t!cellToolbarLocation &&\n\t\t\t!cellToolbarInteraction &&\n\t\t\t!compactView &&\n\t\t\t!focusIndicator &&\n\t\t\t!insertToolbarPosition &&\n\t\t\t!insertToolbarAlignment &&\n\t\t\t!globalToolbar &&\n\t\t\t!stickyScrollEnabled &&\n\t\t\t!stickyScrollMode &&\n\t\t\t!consolidatedOutputButton &&\n\t\t\t!consolidatedRunButton &&\n\t\t\t!showFoldingControls &&\n\t\t\t!dragAndDropEnabled &&\n\t\t\t!fontSize &&\n\t\t\t!outputFontSize &&\n\t\t\t!markupFontSize &&\n\t\t\t!markdownLineHeight &&\n\t\t\t!fontFamily &&\n\t\t\t!outputFontFamily &&\n\t\t\t!editorOptionsCustomizations &&\n\t\t\t!interactiveWindowCollapseCodeCells &&\n\t\t\t!outputLineHeight &&\n\t\t\t!outputScrolling &&\n\t\t\t!outputWordWrap &&\n\t\t\t!outputLinkifyFilePaths &&\n\t\t\t!minimalError\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet configuration = Object.assign({}, this._layoutConfiguration);\n\n\t\tif (cellStatusBarVisibility) {\n\t\t\tconfiguration.showCellStatusBar =\n\t\t\t\tthis.configurationService.getValue<ShowCellStatusBarType>(\n\t\t\t\t\tNotebookSetting.showCellStatusBar,\n\t\t\t\t);\n\t\t}\n\n\t\tif (cellToolbarLocation) {\n\t\t\tconfiguration.cellToolbarLocation =\n\t\t\t\tthis.configurationService.getValue<\n\t\t\t\t\tstring | { [key: string]: string }\n\t\t\t\t>(NotebookSetting.cellToolbarLocation) ?? { default: \"right\" };\n\t\t}\n\n\t\tif (cellToolbarInteraction && !this.overrides?.cellToolbarInteraction) {\n\t\t\tconfiguration.cellToolbarInteraction =\n\t\t\t\tthis.configurationService.getValue<string>(\n\t\t\t\t\tNotebookSetting.cellToolbarVisibility,\n\t\t\t\t);\n\t\t}\n\n\t\tif (focusIndicator) {\n\t\t\tconfiguration.focusIndicator = this._computeFocusIndicatorOption();\n\t\t}\n\n\t\tif (compactView) {\n\t\t\tconst compactViewValue =\n\t\t\t\tthis.configurationService.getValue<boolean | undefined>(\n\t\t\t\t\tNotebookSetting.compactView,\n\t\t\t\t) ?? true;\n\t\t\tconfiguration = Object.assign(configuration, {\n\t\t\t\t...(compactViewValue\n\t\t\t\t\t? compactConfigConstants\n\t\t\t\t\t: defaultConfigConstants),\n\t\t\t});\n\t\t\tconfiguration.compactView = compactViewValue;\n\t\t}\n\n\t\tif (insertToolbarAlignment) {\n\t\t\tconfiguration.insertToolbarAlignment =\n\t\t\t\tthis._computeInsertToolbarAlignmentOption();\n\t\t}\n\n\t\tif (insertToolbarPosition) {\n\t\t\tconfiguration.insertToolbarPosition =\n\t\t\t\tthis._computeInsertToolbarPositionOption(this.isReadonly);\n\t\t}\n\n\t\tif (globalToolbar && this.overrides?.globalToolbar === undefined) {\n\t\t\tconfiguration.globalToolbar =\n\t\t\t\tthis.configurationService.getValue<boolean>(\n\t\t\t\t\tNotebookSetting.globalToolbar,\n\t\t\t\t) ?? true;\n\t\t}\n\n\t\tif (\n\t\t\tstickyScrollEnabled &&\n\t\t\tthis.overrides?.stickyScrollEnabled === undefined\n\t\t) {\n\t\t\tconfiguration.stickyScrollEnabled =\n\t\t\t\tthis.configurationService.getValue<boolean>(\n\t\t\t\t\tNotebookSetting.stickyScrollEnabled,\n\t\t\t\t) ?? false;\n\t\t}\n\n\t\tif (stickyScrollMode) {\n\t\t\tconfiguration.stickyScrollMode =\n\t\t\t\tthis.configurationService.getValue<\"flat\" | \"indented\">(\n\t\t\t\t\tNotebookSetting.stickyScrollMode,\n\t\t\t\t) ?? \"flat\";\n\t\t}\n\n\t\tif (consolidatedOutputButton) {\n\t\t\tconfiguration.consolidatedOutputButton =\n\t\t\t\tthis.configurationService.getValue<boolean>(\n\t\t\t\t\tNotebookSetting.consolidatedOutputButton,\n\t\t\t\t) ?? true;\n\t\t}\n\n\t\tif (consolidatedRunButton) {\n\t\t\tconfiguration.consolidatedRunButton =\n\t\t\t\tthis.configurationService.getValue<boolean>(\n\t\t\t\t\tNotebookSetting.consolidatedRunButton,\n\t\t\t\t) ?? true;\n\t\t}\n\n\t\tif (showFoldingControls) {\n\t\t\tconfiguration.showFoldingControls =\n\t\t\t\tthis._computeShowFoldingControlsOption();\n\t\t}\n\n\t\tif (dragAndDropEnabled) {\n\t\t\tconfiguration.dragAndDropEnabled =\n\t\t\t\tthis.configurationService.getValue<boolean>(\n\t\t\t\t\tNotebookSetting.dragAndDropEnabled,\n\t\t\t\t) ?? true;\n\t\t}\n\n\t\tif (fontSize) {\n\t\t\tconfiguration.fontSize =\n\t\t\t\tthis.configurationService.getValue<number>(\"editor.fontSize\");\n\t\t}\n\n\t\tif (outputFontSize || fontSize) {\n\t\t\tconfiguration.outputFontSize =\n\t\t\t\tthis.configurationService.getValue<number>(\n\t\t\t\t\tNotebookSetting.outputFontSize,\n\t\t\t\t) || configuration.fontSize;\n\t\t}\n\n\t\tif (markupFontSize) {\n\t\t\tconfiguration.markupFontSize =\n\t\t\t\tthis.configurationService.getValue<number>(\n\t\t\t\t\tNotebookSetting.markupFontSize,\n\t\t\t\t);\n\t\t}\n\n\t\tif (markdownLineHeight) {\n\t\t\tconfiguration.markdownLineHeight =\n\t\t\t\tthis.configurationService.getValue<number>(\n\t\t\t\t\tNotebookSetting.markdownLineHeight,\n\t\t\t\t);\n\t\t}\n\n\t\tif (outputFontFamily) {\n\t\t\tconfiguration.outputFontFamily =\n\t\t\t\tthis.configurationService.getValue<string>(\n\t\t\t\t\tNotebookSetting.outputFontFamily,\n\t\t\t\t);\n\t\t}\n\n\t\tif (editorOptionsCustomizations) {\n\t\t\tconfiguration.editorOptionsCustomizations =\n\t\t\t\tthis.configurationService.getValue(\n\t\t\t\t\tNotebookSetting.cellEditorOptionsCustomizations,\n\t\t\t\t);\n\t\t}\n\n\t\tif (interactiveWindowCollapseCodeCells) {\n\t\t\tconfiguration.interactiveWindowCollapseCodeCells =\n\t\t\t\tthis.configurationService.getValue(\n\t\t\t\t\tNotebookSetting.interactiveWindowCollapseCodeCells,\n\t\t\t\t);\n\t\t}\n\n\t\tif (outputLineHeight || fontSize || outputFontSize) {\n\t\t\tconst lineHeight = this.configurationService.getValue<number>(\n\t\t\t\tNotebookSetting.outputLineHeight,\n\t\t\t);\n\t\t\tconfiguration.outputLineHeight = this._computeOutputLineHeight(\n\t\t\t\tlineHeight,\n\t\t\t\tconfiguration.outputFontSize,\n\t\t\t);\n\t\t}\n\n\t\tif (outputWordWrap) {\n\t\t\tconfiguration.outputWordWrap =\n\t\t\t\tthis.configurationService.getValue<boolean>(\n\t\t\t\t\tNotebookSetting.outputWordWrap,\n\t\t\t\t);\n\t\t}\n\n\t\tif (outputScrolling) {\n\t\t\tconfiguration.outputScrolling =\n\t\t\t\tthis.configurationService.getValue<boolean>(\n\t\t\t\t\tNotebookSetting.outputScrolling,\n\t\t\t\t);\n\t\t}\n\n\t\tif (outputLinkifyFilePaths) {\n\t\t\tconfiguration.outputLinkifyFilePaths =\n\t\t\t\tthis.configurationService.getValue<boolean>(\n\t\t\t\t\tNotebookSetting.LinkifyOutputFilePaths,\n\t\t\t\t);\n\t\t}\n\n\t\tif (minimalError) {\n\t\t\tconfiguration.outputMinimalError =\n\t\t\t\tthis.configurationService.getValue<boolean>(\n\t\t\t\t\tNotebookSetting.minimalErrorRendering,\n\t\t\t\t);\n\t\t}\n\n\t\tthis._layoutConfiguration = Object.freeze(configuration);\n\n\t\t// trigger event\n\t\tthis._onDidChangeOptions.fire({\n\t\t\tcellStatusBarVisibility,\n\t\t\tcellToolbarLocation,\n\t\t\tcellToolbarInteraction,\n\t\t\tcompactView,\n\t\t\tfocusIndicator,\n\t\t\tinsertToolbarPosition,\n\t\t\tinsertToolbarAlignment,\n\t\t\tglobalToolbar,\n\t\t\tstickyScrollEnabled,\n\t\t\tstickyScrollMode,\n\t\t\tshowFoldingControls,\n\t\t\tconsolidatedOutputButton,\n\t\t\tconsolidatedRunButton,\n\t\t\tdragAndDropEnabled,\n\t\t\tfontSize,\n\t\t\toutputFontSize,\n\t\t\tmarkupFontSize,\n\t\t\tmarkdownLineHeight,\n\t\t\tfontFamily,\n\t\t\toutputFontFamily,\n\t\t\teditorOptionsCustomizations,\n\t\t\tinteractiveWindowCollapseCodeCells,\n\t\t\toutputLineHeight,\n\t\t\toutputScrolling,\n\t\t\toutputWordWrap,\n\t\t\toutputLinkifyFilePaths,\n\t\t\tminimalError,\n\t\t});\n\t}\n\n\tprivate _computeInsertToolbarPositionOption(isReadOnly: boolean) {\n\t\treturn isReadOnly\n\t\t\t? \"hidden\"\n\t\t\t: (this.configurationService.getValue<\n\t\t\t\t\t\"betweenCells\" | \"notebookToolbar\" | \"both\" | \"hidden\"\n\t\t\t\t>(NotebookSetting.insertToolbarLocation) ?? \"both\");\n\t}\n\n\tprivate _computeInsertToolbarAlignmentOption() {\n\t\treturn (\n\t\t\tthis.configurationService.getValue<\"left\" | \"center\">(\n\t\t\t\tNotebookSetting.experimentalInsertToolbarAlignment,\n\t\t\t) ?? \"center\"\n\t\t);\n\t}\n\n\tprivate _computeShowFoldingControlsOption() {\n\t\treturn (\n\t\t\tthis.configurationService.getValue<\n\t\t\t\t\"always\" | \"never\" | \"mouseover\"\n\t\t\t>(NotebookSetting.showFoldingControls) ?? \"mouseover\"\n\t\t);\n\t}\n\n\tprivate _computeFocusIndicatorOption() {\n\t\treturn (\n\t\t\tthis.configurationService.getValue<\"border\" | \"gutter\">(\n\t\t\t\tNotebookSetting.focusIndicator,\n\t\t\t) ?? \"gutter\"\n\t\t);\n\t}\n\n\tprivate _computeStickyScrollModeOption() {\n\t\treturn (\n\t\t\tthis.configurationService.getValue<\"flat\" | \"indented\">(\n\t\t\t\tNotebookSetting.stickyScrollMode,\n\t\t\t) ?? \"flat\"\n\t\t);\n\t}\n\n\tgetCellCollapseDefault(): NotebookCellDefaultCollapseConfig {\n\t\treturn this._layoutConfiguration.interactiveWindowCollapseCodeCells ===\n\t\t\t\"never\"\n\t\t\t? {\n\t\t\t\t\tcodeCell: {\n\t\t\t\t\t\tinputCollapsed: false,\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t: {\n\t\t\t\t\tcodeCell: {\n\t\t\t\t\t\tinputCollapsed: true,\n\t\t\t\t\t},\n\t\t\t\t};\n\t}\n\n\tgetLayoutConfiguration(): NotebookLayoutConfiguration &\n\t\tNotebookDisplayOptions {\n\t\treturn this._layoutConfiguration;\n\t}\n\n\tgetDisplayOptions(): NotebookDisplayOptions {\n\t\treturn this._layoutConfiguration;\n\t}\n\n\tgetCellEditorContainerLeftMargin() {\n\t\tconst { codeCellLeftMargin, cellRunGutter } = this._layoutConfiguration;\n\t\treturn codeCellLeftMargin + cellRunGutter;\n\t}\n\n\tcomputeCollapsedMarkdownCellHeight(viewType: string): number {\n\t\tconst { bottomToolbarGap } =\n\t\t\tthis.computeBottomToolbarDimensions(viewType);\n\t\treturn (\n\t\t\tthis._layoutConfiguration.markdownCellTopMargin +\n\t\t\tthis._layoutConfiguration.collapsedIndicatorHeight +\n\t\t\tbottomToolbarGap +\n\t\t\tthis._layoutConfiguration.markdownCellBottomMargin\n\t\t);\n\t}\n\n\tcomputeBottomToolbarOffset(totalHeight: number, viewType: string) {\n\t\tconst { bottomToolbarGap, bottomToolbarHeight } =\n\t\t\tthis.computeBottomToolbarDimensions(viewType);\n\n\t\treturn totalHeight - bottomToolbarGap - bottomToolbarHeight / 2;\n\t}\n\n\tcomputeCodeCellEditorWidth(outerWidth: number): number {\n\t\treturn (\n\t\t\touterWidth -\n\t\t\t(this._layoutConfiguration.codeCellLeftMargin +\n\t\t\t\tthis._layoutConfiguration.cellRunGutter +\n\t\t\t\tthis._layoutConfiguration.cellRightMargin)\n\t\t);\n\t}\n\n\tcomputeMarkdownCellEditorWidth(outerWidth: number): number {\n\t\treturn (\n\t\t\touterWidth -\n\t\t\tthis._layoutConfiguration.markdownCellGutter -\n\t\t\tthis._layoutConfiguration.markdownCellLeftMargin -\n\t\t\tthis._layoutConfiguration.cellRightMargin\n\t\t);\n\t}\n\n\tcomputeStatusBarHeight(): number {\n\t\treturn this._layoutConfiguration.cellStatusBarHeight;\n\t}\n\n\tprivate _computeBottomToolbarDimensions(\n\t\tcompactView: boolean,\n\t\tinsertToolbarPosition:\n\t\t\t| \"betweenCells\"\n\t\t\t| \"notebookToolbar\"\n\t\t\t| \"both\"\n\t\t\t| \"hidden\",\n\t\tinsertToolbarAlignment: \"left\" | \"center\",\n\t\tcellToolbar: \"right\" | \"left\" | \"hidden\",\n\t): { bottomToolbarGap: number; bottomToolbarHeight: number } {\n\t\tif (insertToolbarAlignment === \"left\" || cellToolbar !== \"hidden\") {\n\t\t\treturn {\n\t\t\t\tbottomToolbarGap: 18,\n\t\t\t\tbottomToolbarHeight: 18,\n\t\t\t};\n\t\t}\n\n\t\tif (\n\t\t\tinsertToolbarPosition === \"betweenCells\" ||\n\t\t\tinsertToolbarPosition === \"both\"\n\t\t) {\n\t\t\treturn compactView\n\t\t\t\t? {\n\t\t\t\t\t\tbottomToolbarGap: 12,\n\t\t\t\t\t\tbottomToolbarHeight: 20,\n\t\t\t\t\t}\n\t\t\t\t: {\n\t\t\t\t\t\tbottomToolbarGap: 20,\n\t\t\t\t\t\tbottomToolbarHeight: 20,\n\t\t\t\t\t};\n\t\t} else {\n\t\t\treturn {\n\t\t\t\tbottomToolbarGap: 0,\n\t\t\t\tbottomToolbarHeight: 0,\n\t\t\t};\n\t\t}\n\t}\n\n\tcomputeBottomToolbarDimensions(viewType?: string): {\n\t\tbottomToolbarGap: number;\n\t\tbottomToolbarHeight: number;\n\t} {\n\t\tconst configuration = this._layoutConfiguration;\n\t\tconst cellToolbarPosition = this.computeCellToolbarLocation(viewType);\n\t\tconst { bottomToolbarGap, bottomToolbarHeight } =\n\t\t\tthis._computeBottomToolbarDimensions(\n\t\t\t\tconfiguration.compactView,\n\t\t\t\tconfiguration.insertToolbarPosition,\n\t\t\t\tconfiguration.insertToolbarAlignment,\n\t\t\t\tcellToolbarPosition,\n\t\t\t);\n\t\treturn {\n\t\t\tbottomToolbarGap,\n\t\t\tbottomToolbarHeight,\n\t\t};\n\t}\n\n\tcomputeCellToolbarLocation(viewType?: string): \"right\" | \"left\" | \"hidden\" {\n\t\tconst cellToolbarLocation =\n\t\t\tthis._layoutConfiguration.cellToolbarLocation;\n\n\t\tif (typeof cellToolbarLocation === \"string\") {\n\t\t\tif (\n\t\t\t\tcellToolbarLocation === \"left\" ||\n\t\t\t\tcellToolbarLocation === \"right\" ||\n\t\t\t\tcellToolbarLocation === \"hidden\"\n\t\t\t) {\n\t\t\t\treturn cellToolbarLocation;\n\t\t\t}\n\t\t} else if (viewType) {\n\t\t\tconst notebookSpecificSetting =\n\t\t\t\tcellToolbarLocation[viewType] ?? cellToolbarLocation[\"default\"];\n\t\t\tlet cellToolbarLocationForCurrentView: \"right\" | \"left\" | \"hidden\" =\n\t\t\t\t\"right\";\n\n\t\t\tswitch (notebookSpecificSetting) {\n\t\t\t\tcase \"left\":\n\t\t\t\t\tcellToolbarLocationForCurrentView = \"left\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"right\":\n\t\t\t\t\tcellToolbarLocationForCurrentView = \"right\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"hidden\":\n\t\t\t\t\tcellToolbarLocationForCurrentView = \"hidden\";\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tcellToolbarLocationForCurrentView = \"right\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn cellToolbarLocationForCurrentView;\n\t\t}\n\n\t\treturn \"right\";\n\t}\n\n\tcomputeTopInsertToolbarHeight(viewType?: string): number {\n\t\tif (\n\t\t\tthis._layoutConfiguration.insertToolbarPosition ===\n\t\t\t\t\"betweenCells\" ||\n\t\t\tthis._layoutConfiguration.insertToolbarPosition === \"both\"\n\t\t) {\n\t\t\treturn SCROLLABLE_ELEMENT_PADDING_TOP;\n\t\t}\n\n\t\tconst cellToolbarLocation = this.computeCellToolbarLocation(viewType);\n\n\t\tif (cellToolbarLocation === \"left\" || cellToolbarLocation === \"right\") {\n\t\t\treturn SCROLLABLE_ELEMENT_PADDING_TOP;\n\t\t}\n\n\t\treturn 0;\n\t}\n\n\tcomputeEditorPadding(\n\t\tinternalMetadata: NotebookCellInternalMetadata,\n\t\tcellUri: URI,\n\t) {\n\t\treturn {\n\t\t\ttop: this._editorTopPadding,\n\t\t\tbottom: this.statusBarIsVisible(internalMetadata, cellUri)\n\t\t\t\t? this._layoutConfiguration.editorBottomPadding\n\t\t\t\t: this._layoutConfiguration.editorBottomPaddingWithoutStatusBar,\n\t\t};\n\t}\n\n\tcomputeEditorStatusbarHeight(\n\t\tinternalMetadata: NotebookCellInternalMetadata,\n\t\tcellUri: URI,\n\t) {\n\t\treturn this.statusBarIsVisible(internalMetadata, cellUri)\n\t\t\t? this.computeStatusBarHeight()\n\t\t\t: 0;\n\t}\n\n\tprivate statusBarIsVisible(\n\t\tinternalMetadata: NotebookCellInternalMetadata,\n\t\tcellUri: URI,\n\t): boolean {\n\t\tconst exe =\n\t\t\tthis.notebookExecutionStateService.getCellExecution(cellUri);\n\t\tif (this._layoutConfiguration.showCellStatusBar === \"visible\") {\n\t\t\treturn true;\n\t\t} else if (\n\t\t\tthis._layoutConfiguration.showCellStatusBar ===\n\t\t\t\"visibleAfterExecute\"\n\t\t) {\n\t\t\treturn (\n\t\t\t\ttypeof internalMetadata.lastRunSuccess === \"boolean\" ||\n\t\t\t\texe !== undefined\n\t\t\t);\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tcomputeWebviewOptions() {\n\t\treturn {\n\t\t\toutputNodePadding: this._layoutConfiguration.cellOutputPadding,\n\t\t\toutputNodeLeftPadding: this._layoutConfiguration.cellOutputPadding,\n\t\t\tpreviewNodePadding:\n\t\t\t\tthis._layoutConfiguration.markdownPreviewPadding,\n\t\t\tmarkdownLeftMargin:\n\t\t\t\tthis._layoutConfiguration.markdownCellGutter +\n\t\t\t\tthis._layoutConfiguration.markdownCellLeftMargin,\n\t\t\tleftMargin: this._layoutConfiguration.codeCellLeftMargin,\n\t\t\trightMargin: this._layoutConfiguration.cellRightMargin,\n\t\t\trunGutter: this._layoutConfiguration.cellRunGutter,\n\t\t\tdragAndDropEnabled: this._layoutConfiguration.dragAndDropEnabled,\n\t\t\tfontSize: this._layoutConfiguration.fontSize,\n\t\t\toutputFontSize: this._layoutConfiguration.outputFontSize,\n\t\t\toutputFontFamily: this._layoutConfiguration.outputFontFamily,\n\t\t\tmarkupFontSize: this._layoutConfiguration.markupFontSize,\n\t\t\tmarkdownLineHeight: this._layoutConfiguration.markdownLineHeight,\n\t\t\toutputLineHeight: this._layoutConfiguration.outputLineHeight,\n\t\t\toutputScrolling: this._layoutConfiguration.outputScrolling,\n\t\t\toutputWordWrap: this._layoutConfiguration.outputWordWrap,\n\t\t\toutputLineLimit: this._layoutConfiguration.outputLineLimit,\n\t\t\toutputLinkifyFilePaths:\n\t\t\t\tthis._layoutConfiguration.outputLinkifyFilePaths,\n\t\t\tminimalError: this._layoutConfiguration.outputMinimalError,\n\t\t};\n\t}\n\n\tcomputeDiffWebviewOptions() {\n\t\treturn {\n\t\t\toutputNodePadding: this._layoutConfiguration.cellOutputPadding,\n\t\t\toutputNodeLeftPadding: 0,\n\t\t\tpreviewNodePadding:\n\t\t\t\tthis._layoutConfiguration.markdownPreviewPadding,\n\t\t\tmarkdownLeftMargin: 0,\n\t\t\tleftMargin: 32,\n\t\t\trightMargin: 0,\n\t\t\trunGutter: 0,\n\t\t\tdragAndDropEnabled: false,\n\t\t\tfontSize: this._layoutConfiguration.fontSize,\n\t\t\toutputFontSize: this._layoutConfiguration.outputFontSize,\n\t\t\toutputFontFamily: this._layoutConfiguration.outputFontFamily,\n\t\t\tmarkupFontSize: this._layoutConfiguration.markupFontSize,\n\t\t\tmarkdownLineHeight: this._layoutConfiguration.markdownLineHeight,\n\t\t\toutputLineHeight: this._layoutConfiguration.outputLineHeight,\n\t\t\toutputScrolling: this._layoutConfiguration.outputScrolling,\n\t\t\toutputWordWrap: this._layoutConfiguration.outputWordWrap,\n\t\t\toutputLineLimit: this._layoutConfiguration.outputLineLimit,\n\t\t\toutputLinkifyFilePaths: false,\n\t\t\tminimalError: false,\n\t\t};\n\t}\n\n\tcomputeIndicatorPosition(\n\t\ttotalHeight: number,\n\t\tfoldHintHeight: number,\n\t\tviewType?: string,\n\t) {\n\t\tconst { bottomToolbarGap } =\n\t\t\tthis.computeBottomToolbarDimensions(viewType);\n\n\t\treturn {\n\t\t\tbottomIndicatorTop:\n\t\t\t\ttotalHeight -\n\t\t\t\tbottomToolbarGap -\n\t\t\t\tthis._layoutConfiguration.cellBottomMargin -\n\t\t\t\tfoldHintHeight,\n\t\t\tverticalIndicatorHeight:\n\t\t\t\ttotalHeight - bottomToolbarGap - foldHintHeight,\n\t\t};\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
