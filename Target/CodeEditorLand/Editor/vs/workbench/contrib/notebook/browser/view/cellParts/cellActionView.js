var _=Object.defineProperty;var u=Object.getOwnPropertyDescriptor;var d=(r,o,t,e)=>{for(var i=e>1?void 0:e?u(o,t):o,a=r.length-1,n;a>=0;a--)(n=r[a])&&(i=(e?n(o,t,i):n(i))||i);return e&&i&&_(o,t,i),i},s=(r,o)=>(t,e)=>o(t,e,r);import*as c from"../../../../../../base/browser/dom.js";import*as I from"../../../../../../base/common/types.js";import{EventType as f}from"../../../../../../base/browser/touch.js";import"../../../../../../base/browser/ui/actionbar/actionbar.js";import"../../../../../../base/browser/ui/dropdown/dropdown.js";import{getDefaultHoverDelegate as m}from"../../../../../../base/browser/ui/hover/hoverDelegateFactory.js";import{renderLabelWithIcons as A}from"../../../../../../base/browser/ui/iconLabel/iconLabels.js";import"../../../../../../base/common/actions.js";import{ThemeIcon as h}from"../../../../../../base/common/themables.js";import{MenuEntryActionViewItem as p,SubmenuEntryActionViewItem as y}from"../../../../../../platform/actions/browser/menuEntryActionViewItem.js";import{MenuItemAction as E}from"../../../../../../platform/actions/common/actions.js";import{IContextMenuService as T}from"../../../../../../platform/contextview/browser/contextView.js";import{IKeybindingService as M}from"../../../../../../platform/keybinding/common/keybinding.js";import{IThemeService as g}from"../../../../../../platform/theme/common/themeService.js";import{IHoverService as x}from"../../../../../../platform/hover/browser/hover.js";class Q extends p{updateLabel(){this.options.label&&this.label&&c.reset(this.label,...A(this._commandAction.label??""))}}class X extends p{_actionLabel;render(o){super.render(o),o.classList.add("notebook-action-view-item"),this._actionLabel=document.createElement("a"),o.appendChild(this._actionLabel),this.updateLabel()}updateLabel(){this._actionLabel&&(this._actionLabel.classList.add("notebook-label"),this._actionLabel.innerText=this._action.label)}}let l=class extends y{constructor(t,e,i,a,n,v,b,L,C){super(t,{...e,hoverDelegate:e?.hoverDelegate??m("element")},v,b,L);this.renderLabel=i;this.subActionProvider=a;this.subActionViewItemProvider=n;this._hoverService=C}_actionLabel;_hover;_primaryAction;render(t){super.render(t),t.classList.add("notebook-action-view-item"),t.classList.add("notebook-action-view-item-unified"),this._actionLabel=document.createElement("a"),t.appendChild(this._actionLabel),this._hover=this._register(this._hoverService.setupManagedHover(this.options.hoverDelegate??m("element"),this._actionLabel,"")),this.updateLabel();for(const e of[c.EventType.CLICK,c.EventType.MOUSE_DOWN,f.Tap])this._register(c.addDisposableListener(t,e,i=>this.onClick(i,!0)))}onClick(t,e=!1){c.EventHelper.stop(t,!0);const i=I.isUndefinedOrNull(this._context)?this.options?.useEventAsContext?t:{preserveFocus:e}:this._context;this.actionRunner.run(this._primaryAction??this._action,i)}updateLabel(){const t=this.subActionProvider.getActions();if(this._actionLabel){const e=t[0];if(this._primaryAction=e,e&&e instanceof E){const i=this.element;if(i&&e.item.icon&&h.isThemeIcon(e.item.icon)){const a=h.asClassNameArray(e.item.icon);i.classList.forEach(n=>{n.startsWith("codicon-")&&i.classList.remove(n)}),i.classList.add(...a)}this.renderLabel&&(this._actionLabel.classList.add("notebook-label"),this._actionLabel.innerText=this._action.label,this._hover?.update(e.tooltip.length?e.tooltip:e.label))}else this.renderLabel&&(this._actionLabel.classList.add("notebook-label"),this._actionLabel.innerText=this._action.label,this._hover?.update(this._action.tooltip.length?this._action.tooltip:this._action.label))}}};l=d([s(5,M),s(6,T),s(7,g),s(8,x)],l);export{X as ActionViewWithLabel,Q as CodiconActionViewItem,l as UnifiedSubmenuActionView};
