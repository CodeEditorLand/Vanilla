{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/notebook/browser/viewModel/OutlineEntry.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from \"../../../../../base/common/codicons.js\";\nimport { ThemeIcon } from \"../../../../../base/common/themables.js\";\nimport type { IRange } from \"../../../../../editor/common/core/range.js\";\nimport {\n\ttype SymbolKind,\n\tSymbolKinds,\n} from \"../../../../../editor/common/languages.js\";\nimport {\n\ttype IMarkerService,\n\tMarkerSeverity,\n} from \"../../../../../platform/markers/common/markers.js\";\nimport { CellKind } from \"../../common/notebookCommon.js\";\nimport type { ICellViewModel } from \"../notebookBrowser.js\";\nimport { executingStateIcon } from \"../notebookIcons.js\";\n\nexport interface IOutlineMarkerInfo {\n\treadonly count: number;\n\treadonly topSev: MarkerSeverity;\n}\n\nexport class OutlineEntry {\n\tprivate _children: OutlineEntry[] = [];\n\tprivate _parent: OutlineEntry | undefined;\n\tprivate _markerInfo: IOutlineMarkerInfo | undefined;\n\n\tget icon(): ThemeIcon {\n\t\tif (this.symbolKind) {\n\t\t\treturn SymbolKinds.toIcon(this.symbolKind);\n\t\t}\n\t\treturn this.isExecuting && this.isPaused\n\t\t\t? executingStateIcon\n\t\t\t: this.isExecuting\n\t\t\t\t? ThemeIcon.modify(executingStateIcon, \"spin\")\n\t\t\t\t: this.cell.cellKind === CellKind.Markup\n\t\t\t\t\t? Codicon.markdown\n\t\t\t\t\t: Codicon.code;\n\t}\n\n\tconstructor(\n\t\treadonly index: number,\n\t\treadonly level: number,\n\t\treadonly cell: ICellViewModel,\n\t\treadonly label: string,\n\t\treadonly isExecuting: boolean,\n\t\treadonly isPaused: boolean,\n\t\treadonly range?: IRange,\n\t\treadonly symbolKind?: SymbolKind,\n\t) {}\n\n\taddChild(entry: OutlineEntry) {\n\t\tthis._children.push(entry);\n\t\tentry._parent = this;\n\t}\n\n\tget parent(): OutlineEntry | undefined {\n\t\treturn this._parent;\n\t}\n\n\tget children(): Iterable<OutlineEntry> {\n\t\treturn this._children;\n\t}\n\n\tget markerInfo(): IOutlineMarkerInfo | undefined {\n\t\treturn this._markerInfo;\n\t}\n\n\tget position() {\n\t\tif (this.range) {\n\t\t\treturn {\n\t\t\t\tstartLineNumber: this.range.startLineNumber,\n\t\t\t\tstartColumn: this.range.startColumn,\n\t\t\t};\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tupdateMarkers(markerService: IMarkerService): void {\n\t\tif (this.cell.cellKind === CellKind.Code) {\n\t\t\t// a code cell can have marker\n\t\t\tconst marker = markerService.read({\n\t\t\t\tresource: this.cell.uri,\n\t\t\t\tseverities: MarkerSeverity.Error | MarkerSeverity.Warning,\n\t\t\t});\n\t\t\tif (marker.length === 0) {\n\t\t\t\tthis._markerInfo = undefined;\n\t\t\t} else {\n\t\t\t\tconst topSev =\n\t\t\t\t\tmarker.find((a) => a.severity === MarkerSeverity.Error)\n\t\t\t\t\t\t?.severity ?? MarkerSeverity.Warning;\n\t\t\t\tthis._markerInfo = { topSev, count: marker.length };\n\t\t\t}\n\t\t} else {\n\t\t\t// a markdown cell can inherit markers from its children\n\t\t\tlet topChild: MarkerSeverity | undefined;\n\t\t\tfor (const child of this.children) {\n\t\t\t\tchild.updateMarkers(markerService);\n\t\t\t\tif (child.markerInfo) {\n\t\t\t\t\ttopChild = topChild\n\t\t\t\t\t\t? Math.max(child.markerInfo.topSev, topChild)\n\t\t\t\t\t\t: child.markerInfo.topSev;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._markerInfo = topChild && { topSev: topChild, count: 0 };\n\t\t}\n\t}\n\n\tclearMarkers(): void {\n\t\tthis._markerInfo = undefined;\n\t\tfor (const child of this.children) {\n\t\t\tchild.clearMarkers();\n\t\t}\n\t}\n\n\tfind(\n\t\tcell: ICellViewModel,\n\t\tparents: OutlineEntry[],\n\t): OutlineEntry | undefined {\n\t\tif (cell.id === this.cell.id) {\n\t\t\treturn this;\n\t\t}\n\t\tparents.push(this);\n\t\tfor (const child of this.children) {\n\t\t\tconst result = child.find(cell, parents);\n\t\t\tif (result) {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\t\tparents.pop();\n\t\treturn undefined;\n\t}\n\n\tasFlatList(bucket: OutlineEntry[]): void {\n\t\tbucket.push(this);\n\t\tfor (const child of this.children) {\n\t\t\tchild.asFlatList(bucket);\n\t\t}\n\t}\n}\n"],
  "mappings": ";;AAIA,SAAS,eAAe;AACxB,SAAS,iBAAiB;AAE1B;AAAA,EAEC;AAAA,OACM;AACP;AAAA,EAEC;AAAA,OACM;AACP,SAAS,gBAAgB;AAEzB,SAAS,0BAA0B;AAO5B,MAAM,aAAa;AAAA,EAkBzB,YACU,OACA,OACA,MACA,OACA,aACA,UACA,OACA,YACR;AARQ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA,EACP;AAAA,EAnDJ,OAwB0B;AAAA;AAAA;AAAA,EACjB,YAA4B,CAAC;AAAA,EAC7B;AAAA,EACA;AAAA,EAER,IAAI,OAAkB;AACrB,QAAI,KAAK,YAAY;AACpB,aAAO,YAAY,OAAO,KAAK,UAAU;AAAA,IAC1C;AACA,WAAO,KAAK,eAAe,KAAK,WAC7B,qBACA,KAAK,cACJ,UAAU,OAAO,oBAAoB,MAAM,IAC3C,KAAK,KAAK,aAAa,SAAS,SAC/B,QAAQ,WACR,QAAQ;AAAA,EACd;AAAA,EAaA,SAAS,OAAqB;AAC7B,SAAK,UAAU,KAAK,KAAK;AACzB,UAAM,UAAU;AAAA,EACjB;AAAA,EAEA,IAAI,SAAmC;AACtC,WAAO,KAAK;AAAA,EACb;AAAA,EAEA,IAAI,WAAmC;AACtC,WAAO,KAAK;AAAA,EACb;AAAA,EAEA,IAAI,aAA6C;AAChD,WAAO,KAAK;AAAA,EACb;AAAA,EAEA,IAAI,WAAW;AACd,QAAI,KAAK,OAAO;AACf,aAAO;AAAA,QACN,iBAAiB,KAAK,MAAM;AAAA,QAC5B,aAAa,KAAK,MAAM;AAAA,MACzB;AAAA,IACD;AACA,WAAO;AAAA,EACR;AAAA,EAEA,cAAc,eAAqC;AAClD,QAAI,KAAK,KAAK,aAAa,SAAS,MAAM;AAEzC,YAAM,SAAS,cAAc,KAAK;AAAA,QACjC,UAAU,KAAK,KAAK;AAAA,QACpB,YAAY,eAAe,QAAQ,eAAe;AAAA,MACnD,CAAC;AACD,UAAI,OAAO,WAAW,GAAG;AACxB,aAAK,cAAc;AAAA,MACpB,OAAO;AACN,cAAM,SACL,OAAO,KAAK,CAAC,MAAM,EAAE,aAAa,eAAe,KAAK,GACnD,YAAY,eAAe;AAC/B,aAAK,cAAc,EAAE,QAAQ,OAAO,OAAO,OAAO;AAAA,MACnD;AAAA,IACD,OAAO;AAEN,UAAI;AACJ,iBAAW,SAAS,KAAK,UAAU;AAClC,cAAM,cAAc,aAAa;AACjC,YAAI,MAAM,YAAY;AACrB,qBAAW,WACR,KAAK,IAAI,MAAM,WAAW,QAAQ,QAAQ,IAC1C,MAAM,WAAW;AAAA,QACrB;AAAA,MACD;AACA,WAAK,cAAc,YAAY,EAAE,QAAQ,UAAU,OAAO,EAAE;AAAA,IAC7D;AAAA,EACD;AAAA,EAEA,eAAqB;AACpB,SAAK,cAAc;AACnB,eAAW,SAAS,KAAK,UAAU;AAClC,YAAM,aAAa;AAAA,IACpB;AAAA,EACD;AAAA,EAEA,KACC,MACA,SAC2B;AAC3B,QAAI,KAAK,OAAO,KAAK,KAAK,IAAI;AAC7B,aAAO;AAAA,IACR;AACA,YAAQ,KAAK,IAAI;AACjB,eAAW,SAAS,KAAK,UAAU;AAClC,YAAM,SAAS,MAAM,KAAK,MAAM,OAAO;AACvC,UAAI,QAAQ;AACX,eAAO;AAAA,MACR;AAAA,IACD;AACA,YAAQ,IAAI;AACZ,WAAO;AAAA,EACR;AAAA,EAEA,WAAW,QAA8B;AACxC,WAAO,KAAK,IAAI;AAChB,eAAW,SAAS,KAAK,UAAU;AAClC,YAAM,WAAW,MAAM;AAAA,IACxB;AAAA,EACD;AACD;",
  "names": []
}
