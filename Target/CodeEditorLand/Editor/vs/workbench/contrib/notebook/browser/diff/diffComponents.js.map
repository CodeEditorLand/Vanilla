{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/notebook/browser/diff/diffComponents.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from \"../../../../../base/browser/dom.js\";\nimport {\n\trenderIcon,\n\trenderLabelWithIcons,\n} from \"../../../../../base/browser/ui/iconLabel/iconLabels.js\";\nimport type { ToolBar } from \"../../../../../base/browser/ui/toolbar/toolbar.js\";\nimport type { IAction } from \"../../../../../base/common/actions.js\";\nimport { Emitter } from \"../../../../../base/common/event.js\";\nimport {\n\tDisposable,\n\tDisposableStore,\n} from \"../../../../../base/common/lifecycle.js\";\nimport { Schemas } from \"../../../../../base/common/network.js\";\nimport { EditorExtensionsRegistry } from \"../../../../../editor/browser/editorExtensions.js\";\nimport {\n\tCodeEditorWidget,\n\ttype ICodeEditorWidgetOptions,\n} from \"../../../../../editor/browser/widget/codeEditor/codeEditorWidget.js\";\nimport { DiffEditorWidget } from \"../../../../../editor/browser/widget/diffEditor/diffEditorWidget.js\";\nimport type { IDiffEditorOptions } from \"../../../../../editor/common/config/editorOptions.js\";\nimport type * as editorCommon from \"../../../../../editor/common/editorCommon.js\";\nimport { ILanguageService } from \"../../../../../editor/common/languages/language.js\";\nimport { IModelService } from \"../../../../../editor/common/services/model.js\";\nimport { ITextModelService } from \"../../../../../editor/common/services/resolverService.js\";\nimport { ITextResourceConfigurationService } from \"../../../../../editor/common/services/textResourceConfiguration.js\";\nimport { ContextMenuController } from \"../../../../../editor/contrib/contextmenu/browser/contextmenu.js\";\nimport { SnippetController2 } from \"../../../../../editor/contrib/snippet/browser/snippetController2.js\";\nimport { SuggestController } from \"../../../../../editor/contrib/suggest/browser/suggestController.js\";\nimport { localize } from \"../../../../../nls.js\";\nimport { IAccessibilityService } from \"../../../../../platform/accessibility/common/accessibility.js\";\nimport { createAndFillInActionBarActions } from \"../../../../../platform/actions/browser/menuEntryActionViewItem.js\";\nimport { WorkbenchToolBar } from \"../../../../../platform/actions/browser/toolbar.js\";\nimport {\n\ttype IMenu,\n\tIMenuService,\n\tMenuId,\n\tMenuItemAction,\n} from \"../../../../../platform/actions/common/actions.js\";\nimport { ICommandService } from \"../../../../../platform/commands/common/commands.js\";\nimport { IConfigurationService } from \"../../../../../platform/configuration/common/configuration.js\";\nimport {\n\ttype IContextKey,\n\tIContextKeyService,\n} from \"../../../../../platform/contextkey/common/contextkey.js\";\nimport { IContextMenuService } from \"../../../../../platform/contextview/browser/contextView.js\";\nimport { IInstantiationService } from \"../../../../../platform/instantiation/common/instantiation.js\";\nimport { IKeybindingService } from \"../../../../../platform/keybinding/common/keybinding.js\";\nimport { INotificationService } from \"../../../../../platform/notification/common/notification.js\";\nimport { ITelemetryService } from \"../../../../../platform/telemetry/common/telemetry.js\";\nimport { IThemeService } from \"../../../../../platform/theme/common/themeService.js\";\nimport { AccessibilityVerbositySettingId } from \"../../../accessibility/browser/accessibilityConfiguration.js\";\nimport { MenuPreventer } from \"../../../codeEditor/browser/menuPreventer.js\";\nimport { SelectionClipboardContributionID } from \"../../../codeEditor/browser/selectionClipboard.js\";\nimport { TabCompletionController } from \"../../../snippets/browser/tabCompletion.js\";\nimport { getFormattedMetadataJSON } from \"../../common/model/notebookCellTextModel.js\";\nimport {\n\tCellEditType,\n\tCellUri,\n\ttype NotebookCellMetadata,\n} from \"../../common/notebookCommon.js\";\nimport { collapsedIcon, expandedIcon } from \"../notebookIcons.js\";\nimport { CodiconActionViewItem } from \"../view/cellParts/cellActionView.js\";\nimport {\n\tfixedDiffEditorOptions,\n\tfixedEditorOptions,\n\tgetEditorPadding,\n} from \"./diffCellEditorOptions.js\";\nimport { OutputContainer } from \"./diffElementOutputs.js\";\nimport {\n\ttype DiffElementCellViewModelBase,\n\ttype DiffElementPlaceholderViewModel,\n\ttype IDiffElementViewModelBase,\n\tNotebookDocumentMetadataViewModel,\n\tOUTPUT_EDITOR_HEIGHT_MAGIC,\n\tOutputComparison,\n\tPropertyFoldingState,\n\tSideBySideDiffElementViewModel,\n\ttype SingleSideDiffElementViewModel,\n\tgetFormattedOutputJSON,\n\toutputEqual,\n} from \"./diffElementViewModel.js\";\nimport type { DiffNestedCellViewModel } from \"./diffNestedCellViewModel.js\";\nimport {\n\ttype CellDiffPlaceholderRenderTemplate,\n\ttype CellDiffSideBySideRenderTemplate,\n\ttype CellDiffSingleSideRenderTemplate,\n\tDIFF_CELL_MARGIN,\n\tDiffSide,\n\ttype IDiffCellMarginOverlay,\n\ttype INotebookTextDiffEditor,\n\tNOTEBOOK_DIFF_CELL_IGNORE_WHITESPACE,\n\tNOTEBOOK_DIFF_CELL_INPUT,\n\tNOTEBOOK_DIFF_CELL_PROPERTY,\n\tNOTEBOOK_DIFF_CELL_PROPERTY_EXPANDED,\n\tNOTEBOOK_DIFF_METADATA,\n\ttype NotebookDocumentDiffElementRenderTemplate,\n} from \"./notebookDiffEditorBrowser.js\";\nimport { getUnchangedRegionSettings } from \"./unchangedEditorRegions.js\";\n\nexport function getOptimizedNestedCodeEditorWidgetOptions(): ICodeEditorWidgetOptions {\n\treturn {\n\t\tisSimpleWidget: false,\n\t\tcontributions: EditorExtensionsRegistry.getSomeEditorContributions([\n\t\t\tMenuPreventer.ID,\n\t\t\tSelectionClipboardContributionID,\n\t\t\tContextMenuController.ID,\n\t\t\tSuggestController.ID,\n\t\t\tSnippetController2.ID,\n\t\t\tTabCompletionController.ID,\n\t\t]),\n\t};\n}\n\nexport class CellDiffPlaceholderElement extends Disposable {\n\tconstructor(\n\t\tplaceholder: DiffElementPlaceholderViewModel,\n\t\ttemplateData: CellDiffPlaceholderRenderTemplate,\n\t) {\n\t\tsuper();\n\t\ttemplateData.body.classList.remove(\"left\", \"right\", \"full\");\n\t\tconst text =\n\t\t\tplaceholder.hiddenCells.length === 1\n\t\t\t\t? localize(\n\t\t\t\t\t\t\"hiddenCell\",\n\t\t\t\t\t\t\"{0} hidden cell\",\n\t\t\t\t\t\tplaceholder.hiddenCells.length,\n\t\t\t\t\t)\n\t\t\t\t: localize(\n\t\t\t\t\t\t\"hiddenCells\",\n\t\t\t\t\t\t\"{0} hidden cells\",\n\t\t\t\t\t\tplaceholder.hiddenCells.length,\n\t\t\t\t\t);\n\t\ttemplateData.placeholder.innerText = text;\n\n\t\tthis._register(\n\t\t\tDOM.addDisposableListener(\n\t\t\t\ttemplateData.placeholder,\n\t\t\t\t\"dblclick\",\n\t\t\t\t(e: MouseEvent) => {\n\t\t\t\t\tif (e.button !== 0) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tplaceholder.showHiddenCells();\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\ttemplateData.marginOverlay.onAction(() =>\n\t\t\t\tplaceholder.showHiddenCells(),\n\t\t\t),\n\t\t);\n\t\ttemplateData.marginOverlay.show();\n\t}\n}\n\nclass PropertyHeader extends Disposable {\n\tprotected _foldingIndicator!: HTMLElement;\n\tprotected _statusSpan!: HTMLElement;\n\tprotected _description!: HTMLElement;\n\tprotected _toolbar!: WorkbenchToolBar;\n\tprotected _menu!: IMenu;\n\tprotected _propertyExpanded?: IContextKey<boolean>;\n\tprotected _propertyChanged?: IContextKey<boolean>;\n\n\tconstructor(\n\t\treadonly cell: IDiffElementViewModelBase,\n\t\treadonly propertyHeaderContainer: HTMLElement,\n\t\treadonly notebookEditor: INotebookTextDiffEditor,\n\t\treadonly accessor: {\n\t\t\tupdateInfoRendering: (renderOutput: boolean) => void;\n\t\t\tcheckIfModified: () => false | { reason: string | undefined };\n\t\t\tgetFoldingState: () => PropertyFoldingState;\n\t\t\tupdateFoldingState: (newState: PropertyFoldingState) => void;\n\t\t\tunChangedLabel: string;\n\t\t\tchangedLabel: string;\n\t\t\tprefix: string;\n\t\t\tmenuId: MenuId;\n\t\t},\n\t\t@IContextMenuService\n\t\tprivate readonly contextMenuService: IContextMenuService,\n\t\t@IKeybindingService\n\t\tprivate readonly keybindingService: IKeybindingService,\n\t\t@ICommandService private readonly commandService: ICommandService,\n\t\t@INotificationService\n\t\tprivate readonly notificationService: INotificationService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t\t@IContextKeyService\n\t\tprivate readonly contextKeyService: IContextKeyService,\n\t\t@IThemeService private readonly themeService: IThemeService,\n\t\t@ITelemetryService private readonly telemetryService: ITelemetryService,\n\t\t@IAccessibilityService\n\t\tprivate readonly accessibilityService: IAccessibilityService,\n\t) {\n\t\tsuper();\n\t}\n\n\tbuildHeader(): void {\n\t\tthis._foldingIndicator = DOM.append(\n\t\t\tthis.propertyHeaderContainer,\n\t\t\tDOM.$(\".property-folding-indicator\"),\n\t\t);\n\t\tthis._foldingIndicator.classList.add(this.accessor.prefix);\n\t\tconst metadataStatus = DOM.append(\n\t\t\tthis.propertyHeaderContainer,\n\t\t\tDOM.$(\"div.property-status\"),\n\t\t);\n\t\tthis._statusSpan = DOM.append(metadataStatus, DOM.$(\"span\"));\n\t\tthis._description = DOM.append(\n\t\t\tmetadataStatus,\n\t\t\tDOM.$(\"span.property-description\"),\n\t\t);\n\n\t\tconst cellToolbarContainer = DOM.append(\n\t\t\tthis.propertyHeaderContainer,\n\t\t\tDOM.$(\"div.property-toolbar\"),\n\t\t);\n\t\tthis._toolbar = this._register(\n\t\t\tnew WorkbenchToolBar(\n\t\t\t\tcellToolbarContainer,\n\t\t\t\t{\n\t\t\t\t\tactionViewItemProvider: (action, options) => {\n\t\t\t\t\t\tif (action instanceof MenuItemAction) {\n\t\t\t\t\t\t\tconst item = new CodiconActionViewItem(\n\t\t\t\t\t\t\t\taction,\n\t\t\t\t\t\t\t\t{ hoverDelegate: options.hoverDelegate },\n\t\t\t\t\t\t\t\tthis.keybindingService,\n\t\t\t\t\t\t\t\tthis.notificationService,\n\t\t\t\t\t\t\t\tthis.contextKeyService,\n\t\t\t\t\t\t\t\tthis.themeService,\n\t\t\t\t\t\t\t\tthis.contextMenuService,\n\t\t\t\t\t\t\t\tthis.accessibilityService,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn item;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tthis.menuService,\n\t\t\t\tthis.contextKeyService,\n\t\t\t\tthis.contextMenuService,\n\t\t\t\tthis.keybindingService,\n\t\t\t\tthis.commandService,\n\t\t\t\tthis.telemetryService,\n\t\t\t),\n\t\t);\n\t\tthis._toolbar.context = this.cell;\n\n\t\tconst scopedContextKeyService =\n\t\t\tthis.contextKeyService.createScoped(cellToolbarContainer);\n\t\tthis._register(scopedContextKeyService);\n\t\tthis._propertyChanged = NOTEBOOK_DIFF_CELL_PROPERTY.bindTo(\n\t\t\tscopedContextKeyService,\n\t\t);\n\t\tthis._propertyExpanded = NOTEBOOK_DIFF_CELL_PROPERTY_EXPANDED.bindTo(\n\t\t\tscopedContextKeyService,\n\t\t);\n\n\t\tthis._menu = this._register(\n\t\t\tthis.menuService.createMenu(\n\t\t\t\tthis.accessor.menuId,\n\t\t\t\tscopedContextKeyService,\n\t\t\t),\n\t\t);\n\t\tthis._register(this._menu.onDidChange(() => this.updateMenu()));\n\n\t\tthis._register(\n\t\t\tthis.notebookEditor.onMouseUp((e) => {\n\t\t\t\tif (!e.event.target || e.target !== this.cell) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst target = e.event.target as HTMLElement;\n\n\t\t\t\tif (\n\t\t\t\t\ttarget === this.propertyHeaderContainer ||\n\t\t\t\t\ttarget === this._foldingIndicator ||\n\t\t\t\t\tthis._foldingIndicator.contains(target) ||\n\t\t\t\t\ttarget === metadataStatus ||\n\t\t\t\t\tmetadataStatus.contains(target)\n\t\t\t\t) {\n\t\t\t\t\tconst oldFoldingState = this.accessor.getFoldingState();\n\t\t\t\t\tthis.accessor.updateFoldingState(\n\t\t\t\t\t\toldFoldingState === PropertyFoldingState.Expanded\n\t\t\t\t\t\t\t? PropertyFoldingState.Collapsed\n\t\t\t\t\t\t\t: PropertyFoldingState.Expanded,\n\t\t\t\t\t);\n\t\t\t\t\tthis._updateFoldingIcon();\n\t\t\t\t\tthis.accessor.updateInfoRendering(this.cell.renderOutput);\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis.refresh();\n\t\tthis.accessor.updateInfoRendering(this.cell.renderOutput);\n\t}\n\trefresh() {\n\t\tthis.updateMenu();\n\t\tthis._updateFoldingIcon();\n\n\t\tconst metadataChanged = this.accessor.checkIfModified();\n\t\tif (this._propertyChanged) {\n\t\t\tthis._propertyChanged.set(!!metadataChanged);\n\t\t}\n\t\tif (metadataChanged) {\n\t\t\tthis._statusSpan.textContent = this.accessor.changedLabel;\n\t\t\tthis._statusSpan.style.fontWeight = \"bold\";\n\t\t\tif (metadataChanged.reason) {\n\t\t\t\tthis._description.textContent = metadataChanged.reason;\n\t\t\t}\n\t\t\tthis.propertyHeaderContainer.classList.add(\"modified\");\n\t\t} else {\n\t\t\tthis._statusSpan.textContent = this.accessor.unChangedLabel;\n\t\t\tthis._statusSpan.style.fontWeight = \"normal\";\n\t\t\tthis._description.textContent = \"\";\n\t\t\tthis.propertyHeaderContainer.classList.remove(\"modified\");\n\t\t}\n\t}\n\n\tprivate updateMenu() {\n\t\tconst metadataChanged = this.accessor.checkIfModified();\n\t\tif (metadataChanged) {\n\t\t\tconst actions: IAction[] = [];\n\t\t\tcreateAndFillInActionBarActions(\n\t\t\t\tthis._menu,\n\t\t\t\t{ shouldForwardArgs: true },\n\t\t\t\tactions,\n\t\t\t);\n\t\t\tthis._toolbar.setActions(actions);\n\t\t} else {\n\t\t\tthis._toolbar.setActions([]);\n\t\t}\n\t}\n\n\tprivate _updateFoldingIcon() {\n\t\tif (\n\t\t\tthis.accessor.getFoldingState() === PropertyFoldingState.Collapsed\n\t\t) {\n\t\t\tDOM.reset(this._foldingIndicator, renderIcon(collapsedIcon));\n\t\t\tthis._propertyExpanded?.set(false);\n\t\t} else {\n\t\t\tDOM.reset(this._foldingIndicator, renderIcon(expandedIcon));\n\t\t\tthis._propertyExpanded?.set(true);\n\t\t}\n\t}\n}\n\ninterface IDiffElementLayoutState {\n\touterWidth?: boolean;\n\teditorHeight?: boolean;\n\tmetadataEditor?: boolean;\n\tmetadataHeight?: boolean;\n\toutputTotalHeight?: boolean;\n}\n\nexport class NotebookDocumentMetadataElement extends Disposable {\n\tprivate readonly _editor: DiffEditorWidget;\n\tprivate _editorViewStateChanged: boolean;\n\tprivate _toolbar!: ToolBar;\n\tprivate readonly _cellHeaderContainer: HTMLElement;\n\tprivate readonly _editorContainer: HTMLElement;\n\tprivate _cellHeader!: PropertyHeader;\n\tprivate _diffEditorContainer!: HTMLElement;\n\n\tconstructor(\n\t\treadonly notebookEditor: INotebookTextDiffEditor,\n\t\treadonly viewModel: NotebookDocumentMetadataViewModel,\n\t\treadonly templateData: NotebookDocumentDiffElementRenderTemplate,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@ITextModelService private readonly textModelService: ITextModelService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@ITextResourceConfigurationService private readonly textConfigurationService: ITextResourceConfigurationService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t) {\n\t\tsuper();\n\t\tthis._editor = templateData.sourceEditor;\n\t\tthis._cellHeaderContainer = this.templateData.cellHeaderContainer;\n\t\tthis._editorContainer = this.templateData.editorContainer;\n\t\tthis._diffEditorContainer = this.templateData.diffEditorContainer;\n\n\t\tthis._editorViewStateChanged = false;\n\t\t// init\n\t\tthis._register(viewModel.onDidLayoutChange(e => {\n\t\t\tthis.layout(e);\n\t\t\tthis.updateBorders();\n\t\t}));\n\t\tthis.buildBody();\n\t\tthis.updateBorders();\n\t}\n\n\tbuildBody(): void {\n\t\tconst body = this.templateData.body;\n\t\tbody.classList.remove(\"full\");\n\t\tbody.classList.add(\"full\");\n\n\t\tthis.updateSourceEditor();\n\n\t\tif (this.viewModel instanceof NotebookDocumentMetadataViewModel) {\n\t\t\tthis._register(\n\t\t\t\tthis.viewModel.modifiedMetadata.onDidChange((e) => {\n\t\t\t\t\tthis._cellHeader.refresh();\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\t}\n\tprotected layoutNotebookCell() {\n\t\tthis.notebookEditor.layoutNotebookCell(\n\t\t\tthis.viewModel,\n\t\t\tthis.viewModel.layoutInfo.totalHeight,\n\t\t);\n\t}\n\n\tupdateBorders() {\n\t\tthis.templateData.leftBorder.style.height = `${this.viewModel.layoutInfo.totalHeight - 32}px`;\n\t\tthis.templateData.rightBorder.style.height = `${this.viewModel.layoutInfo.totalHeight - 32}px`;\n\t\tthis.templateData.bottomBorder.style.top = `${this.viewModel.layoutInfo.totalHeight - 32}px`;\n\t}\n\tupdateSourceEditor(): void {\n\t\tthis._cellHeaderContainer.style.display = \"flex\";\n\t\tthis._cellHeaderContainer.innerText = \"\";\n\t\tthis._editorContainer.classList.add(\"diff\");\n\n\t\tconst updateSourceEditor = () => {\n\t\t\tif (\n\t\t\t\tthis.viewModel.cellFoldingState ===\n\t\t\t\tPropertyFoldingState.Collapsed\n\t\t\t) {\n\t\t\t\tthis._editorContainer.style.display = \"none\";\n\t\t\t\tthis.viewModel.editorHeight = 0;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst lineHeight =\n\t\t\t\tthis.notebookEditor.getLayoutInfo().fontInfo.lineHeight || 17;\n\t\t\tconst editorHeight =\n\t\t\t\tthis.viewModel.layoutInfo.editorHeight !== 0\n\t\t\t\t\t? this.viewModel.layoutInfo.editorHeight\n\t\t\t\t\t: this.viewModel.computeInputEditorHeight(lineHeight);\n\n\t\t\tthis._editorContainer.style.height = `${editorHeight}px`;\n\t\t\tthis._editorContainer.style.display = \"block\";\n\n\t\t\tconst contentHeight = this._editor.getContentHeight();\n\t\t\tif (contentHeight >= 0) {\n\t\t\t\tthis.viewModel.editorHeight = contentHeight;\n\t\t\t}\n\t\t\treturn editorHeight;\n\t\t};\n\t\tconst renderSourceEditor = () => {\n\t\t\tconst editorHeight = updateSourceEditor();\n\t\t\tif (!editorHeight) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// If there is only 1 line, then ensure we have the necessary padding to display the button for whitespaces.\n\t\t\t// E.g. assume we have a cell with 1 line and we add some whitespace,\n\t\t\t// Then diff editor displays the button `Show Whitespace Differences`, however with 12 paddings on the top, the\n\t\t\t// button can get cut off.\n\t\t\tconst lineCount =\n\t\t\t\tthis.viewModel.modifiedMetadata.textBuffer.getLineCount();\n\t\t\tconst options: IDiffEditorOptions = {\n\t\t\t\tpadding: getEditorPadding(lineCount),\n\t\t\t};\n\t\t\tconst unchangedRegions = this._register(\n\t\t\t\tgetUnchangedRegionSettings(this.configurationService),\n\t\t\t);\n\t\t\tif (unchangedRegions.options.enabled) {\n\t\t\t\toptions.hideUnchangedRegions = unchangedRegions.options;\n\t\t\t}\n\t\t\tthis._editor.updateOptions(options);\n\t\t\tthis._register(\n\t\t\t\tunchangedRegions.onDidChangeEnablement(() => {\n\t\t\t\t\toptions.hideUnchangedRegions = unchangedRegions.options;\n\t\t\t\t\tthis._editor.updateOptions(options);\n\t\t\t\t}),\n\t\t\t);\n\t\t\tthis._editor.layout({\n\t\t\t\twidth:\n\t\t\t\t\tthis.notebookEditor.getLayoutInfo().width -\n\t\t\t\t\t2 * DIFF_CELL_MARGIN,\n\t\t\t\theight: editorHeight,\n\t\t\t});\n\t\t\tthis._register(\n\t\t\t\tthis._editor.onDidContentSizeChange((e) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.viewModel.cellFoldingState ===\n\t\t\t\t\t\t\tPropertyFoldingState.Expanded &&\n\t\t\t\t\t\te.contentHeightChanged &&\n\t\t\t\t\t\tthis.viewModel.layoutInfo.editorHeight !==\n\t\t\t\t\t\t\te.contentHeight\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.viewModel.editorHeight = e.contentHeight;\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\t\t\tthis._initializeSourceDiffEditor();\n\t\t};\n\n\t\tthis._cellHeader = this._register(\n\t\t\tthis.instantiationService.createInstance(\n\t\t\t\tPropertyHeader,\n\t\t\t\tthis.viewModel,\n\t\t\t\tthis._cellHeaderContainer,\n\t\t\t\tthis.notebookEditor,\n\t\t\t\t{\n\t\t\t\t\tupdateInfoRendering: () => renderSourceEditor(),\n\t\t\t\t\tcheckIfModified: () => {\n\t\t\t\t\t\treturn this.viewModel.originalMetadata.getHash() !==\n\t\t\t\t\t\t\tthis.viewModel.modifiedMetadata.getHash()\n\t\t\t\t\t\t\t? { reason: undefined }\n\t\t\t\t\t\t\t: false;\n\t\t\t\t\t},\n\t\t\t\t\tgetFoldingState: () => this.viewModel.cellFoldingState,\n\t\t\t\t\tupdateFoldingState: (state) =>\n\t\t\t\t\t\t(this.viewModel.cellFoldingState = state),\n\t\t\t\t\tunChangedLabel: \"Notebook Metadata\",\n\t\t\t\t\tchangedLabel: \"Notebook Metadata changed\",\n\t\t\t\t\tprefix: \"metadata\",\n\t\t\t\t\tmenuId: MenuId.NotebookDiffDocumentMetadata,\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\t\tthis._cellHeader.buildHeader();\n\t\trenderSourceEditor();\n\n\t\tconst scopedContextKeyService = this.contextKeyService.createScoped(\n\t\t\tthis.templateData.inputToolbarContainer,\n\t\t);\n\t\tthis._register(scopedContextKeyService);\n\t\tconst inputChanged = NOTEBOOK_DIFF_METADATA.bindTo(\n\t\t\tscopedContextKeyService,\n\t\t);\n\t\tinputChanged.set(\n\t\t\tthis.viewModel.originalMetadata.getHash() !==\n\t\t\t\tthis.viewModel.modifiedMetadata.getHash(),\n\t\t);\n\n\t\tthis._toolbar = this.templateData.toolbar;\n\n\t\tthis._toolbar.context = this.viewModel;\n\n\t\tconst refreshToolbar = () => {\n\t\t\tconst hasChanges =\n\t\t\t\tthis.viewModel.originalMetadata.getHash() !==\n\t\t\t\tthis.viewModel.modifiedMetadata.getHash();\n\t\t\tinputChanged.set(hasChanges);\n\n\t\t\tif (hasChanges) {\n\t\t\t\tconst actions: IAction[] = [];\n\t\t\t\tconst menu = this.menuService.getMenuActions(\n\t\t\t\t\tMenuId.NotebookDiffDocumentMetadata,\n\t\t\t\t\tscopedContextKeyService,\n\t\t\t\t\t{ shouldForwardArgs: true },\n\t\t\t\t);\n\t\t\t\tcreateAndFillInActionBarActions(menu, actions);\n\t\t\t\tthis._toolbar.setActions(actions);\n\t\t\t} else {\n\t\t\t\tthis._toolbar.setActions([]);\n\t\t\t}\n\t\t};\n\n\t\tthis._register(\n\t\t\tthis.viewModel.modifiedMetadata.onDidChange(() => {\n\t\t\t\trefreshToolbar();\n\t\t\t}),\n\t\t);\n\t\trefreshToolbar();\n\t}\n\n\tprivate async _initializeSourceDiffEditor() {\n\t\tconst [originalRef, modifiedRef] = await Promise.all([\n\t\t\tthis.textModelService.createModelReference(\n\t\t\t\tthis.viewModel.originalMetadata.uri,\n\t\t\t),\n\t\t\tthis.textModelService.createModelReference(\n\t\t\t\tthis.viewModel.modifiedMetadata.uri,\n\t\t\t),\n\t\t]);\n\n\t\tif (this._store.isDisposed) {\n\t\t\toriginalRef.dispose();\n\t\t\tmodifiedRef.dispose();\n\t\t\treturn;\n\t\t}\n\n\t\tthis._register(originalRef);\n\t\tthis._register(modifiedRef);\n\n\t\tconst vm = this._register(\n\t\t\tthis._editor.createViewModel({\n\t\t\t\toriginal: originalRef.object.textEditorModel,\n\t\t\t\tmodified: modifiedRef.object.textEditorModel,\n\t\t\t}),\n\t\t);\n\n\t\t// Reduces flicker (compute this before setting the model)\n\t\t// Else when the model is set, the height of the editor will be x, after diff is computed, then height will be y.\n\t\t// & that results in flicker.\n\t\tawait vm.waitForDiff();\n\t\tthis._editor.setModel(vm);\n\n\t\tconst handleViewStateChange = () => {\n\t\t\tthis._editorViewStateChanged = true;\n\t\t};\n\n\t\tconst handleScrollChange = (e: editorCommon.IScrollEvent) => {\n\t\t\tif (e.scrollTopChanged || e.scrollLeftChanged) {\n\t\t\t\tthis._editorViewStateChanged = true;\n\t\t\t}\n\t\t};\n\n\t\tthis.updateEditorOptionsForWhitespace();\n\t\tthis._register(\n\t\t\tthis._editor\n\t\t\t\t.getOriginalEditor()\n\t\t\t\t.onDidChangeCursorSelection(handleViewStateChange),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._editor\n\t\t\t\t.getOriginalEditor()\n\t\t\t\t.onDidScrollChange(handleScrollChange),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._editor\n\t\t\t\t.getModifiedEditor()\n\t\t\t\t.onDidChangeCursorSelection(handleViewStateChange),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._editor\n\t\t\t\t.getModifiedEditor()\n\t\t\t\t.onDidScrollChange(handleScrollChange),\n\t\t);\n\n\t\tconst editorViewState =\n\t\t\tthis.viewModel.getSourceEditorViewState() as editorCommon.IDiffEditorViewState | null;\n\t\tif (editorViewState) {\n\t\t\tthis._editor.restoreViewState(editorViewState);\n\t\t}\n\n\t\tconst contentHeight = this._editor.getContentHeight();\n\t\tthis.viewModel.editorHeight = contentHeight;\n\t}\n\tprivate updateEditorOptionsForWhitespace() {\n\t\tconst editor = this._editor;\n\t\tconst uri =\n\t\t\teditor.getModel()?.modified.uri || editor.getModel()?.original.uri;\n\t\tif (!uri) {\n\t\t\treturn;\n\t\t}\n\t\tconst ignoreTrimWhitespace =\n\t\t\tthis.textConfigurationService.getValue<boolean>(\n\t\t\t\turi,\n\t\t\t\t\"diffEditor.ignoreTrimWhitespace\",\n\t\t\t);\n\t\teditor.updateOptions({ ignoreTrimWhitespace });\n\n\t\tthis._register(\n\t\t\tthis.textConfigurationService.onDidChangeConfiguration((e) => {\n\t\t\t\tif (\n\t\t\t\t\te.affectsConfiguration(uri, \"diffEditor\") &&\n\t\t\t\t\te.affectedKeys.has(\"diffEditor.ignoreTrimWhitespace\")\n\t\t\t\t) {\n\t\t\t\t\tconst ignoreTrimWhitespace =\n\t\t\t\t\t\tthis.textConfigurationService.getValue<boolean>(\n\t\t\t\t\t\t\turi,\n\t\t\t\t\t\t\t\"diffEditor.ignoreTrimWhitespace\",\n\t\t\t\t\t\t);\n\t\t\t\t\teditor.updateOptions({ ignoreTrimWhitespace });\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t}\n\tlayout(state: IDiffElementLayoutState) {\n\t\tDOM.scheduleAtNextAnimationFrame(\n\t\t\tDOM.getWindow(this._diffEditorContainer),\n\t\t\t() => {\n\t\t\t\tif (state.editorHeight) {\n\t\t\t\t\tthis._editorContainer.style.height = `${this.viewModel.layoutInfo.editorHeight}px`;\n\t\t\t\t\tthis._editor.layout({\n\t\t\t\t\t\twidth: this._editor.getViewWidth(),\n\t\t\t\t\t\theight: this.viewModel.layoutInfo.editorHeight,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (state.outerWidth) {\n\t\t\t\t\tthis._editorContainer.style.height = `${this.viewModel.layoutInfo.editorHeight}px`;\n\t\t\t\t\tthis._editor.layout();\n\t\t\t\t}\n\n\t\t\t\tthis.layoutNotebookCell();\n\t\t\t},\n\t\t);\n\t}\n\n\toverride dispose() {\n\t\tthis._editor.setModel(null);\n\n\t\tif (this._editorViewStateChanged) {\n\t\t\tthis.viewModel.saveSpirceEditorViewState(\n\t\t\t\tthis._editor.saveViewState(),\n\t\t\t);\n\t\t}\n\n\t\tsuper.dispose();\n\t}\n}\n\nabstract class AbstractElementRenderer extends Disposable {\n\tprotected readonly _metadataLocalDisposable = this._register(\n\t\tnew DisposableStore(),\n\t);\n\tprotected readonly _outputLocalDisposable = this._register(\n\t\tnew DisposableStore(),\n\t);\n\tprotected _ignoreMetadata = false;\n\tprotected _ignoreOutputs = false;\n\tprotected _cellHeaderContainer!: HTMLElement;\n\tprotected _editorContainer!: HTMLElement;\n\tprotected _cellHeader!: PropertyHeader;\n\tprotected _metadataHeaderContainer!: HTMLElement;\n\tprotected _metadataHeader!: PropertyHeader;\n\tprotected _metadataInfoContainer!: HTMLElement;\n\tprotected _metadataEditorContainer?: HTMLElement;\n\tprotected readonly _metadataEditorDisposeStore!: DisposableStore;\n\tprotected _metadataEditor?: CodeEditorWidget | DiffEditorWidget;\n\n\tprotected _outputHeaderContainer!: HTMLElement;\n\tprotected _outputHeader!: PropertyHeader;\n\tprotected _outputInfoContainer!: HTMLElement;\n\tprotected _outputEditorContainer?: HTMLElement;\n\tprotected _outputViewContainer?: HTMLElement;\n\tprotected _outputLeftContainer?: HTMLElement;\n\tprotected _outputRightContainer?: HTMLElement;\n\tprotected _outputMetadataContainer?: HTMLElement;\n\tprotected _outputEmptyElement?: HTMLElement;\n\tprotected _outputLeftView?: OutputContainer;\n\tprotected _outputRightView?: OutputContainer;\n\tprotected readonly _outputEditorDisposeStore!: DisposableStore;\n\tprotected _outputEditor?: CodeEditorWidget | DiffEditorWidget;\n\tprotected _outputMetadataEditor?: DiffEditorWidget;\n\n\tprotected _diffEditorContainer!: HTMLElement;\n\tprotected _diagonalFill?: HTMLElement;\n\tprotected _isDisposed: boolean;\n\n\tconstructor(\n\t\treadonly notebookEditor: INotebookTextDiffEditor,\n\t\treadonly cell: DiffElementCellViewModelBase,\n\t\treadonly templateData:\n\t\t\t| CellDiffSingleSideRenderTemplate\n\t\t\t| CellDiffSideBySideRenderTemplate,\n\t\treadonly style: \"left\" | \"right\" | \"full\",\n\t\tprotected readonly instantiationService: IInstantiationService,\n\t\tprotected readonly languageService: ILanguageService,\n\t\tprotected readonly modelService: IModelService,\n\t\tprotected readonly textModelService: ITextModelService,\n\t\tprotected readonly contextMenuService: IContextMenuService,\n\t\tprotected readonly keybindingService: IKeybindingService,\n\t\tprotected readonly notificationService: INotificationService,\n\t\tprotected readonly menuService: IMenuService,\n\t\tprotected readonly contextKeyService: IContextKeyService,\n\t\tprotected readonly configurationService: IConfigurationService,\n\t\tprotected readonly textConfigurationService: ITextResourceConfigurationService,\n\t) {\n\t\tsuper();\n\t\t// init\n\t\tthis._isDisposed = false;\n\t\tthis._metadataEditorDisposeStore = this._register(\n\t\t\tnew DisposableStore(),\n\t\t);\n\t\tthis._outputEditorDisposeStore = this._register(new DisposableStore());\n\t\tthis._register(\n\t\t\tcell.onDidLayoutChange((e) => {\n\t\t\t\tthis.layout(e);\n\t\t\t}),\n\t\t);\n\t\tthis._register(cell.onDidLayoutChange((e) => this.updateBorders()));\n\t\tthis.init();\n\t\tthis.buildBody();\n\n\t\tthis._register(\n\t\t\tcell.onDidStateChange(() => {\n\t\t\t\tthis.updateOutputRendering(this.cell.renderOutput);\n\t\t\t}),\n\t\t);\n\t}\n\n\tabstract init(): void;\n\tabstract styleContainer(container: HTMLElement): void;\n\tabstract _buildOutput(): void;\n\tabstract _disposeOutput(): void;\n\tabstract _buildMetadata(): void;\n\tabstract _disposeMetadata(): void;\n\n\tbuildBody(): void {\n\t\tconst body = this.templateData.body;\n\t\tthis._diffEditorContainer = this.templateData.diffEditorContainer;\n\t\tbody.classList.remove(\"left\", \"right\", \"full\");\n\t\tswitch (this.style) {\n\t\t\tcase \"left\":\n\t\t\t\tbody.classList.add(\"left\");\n\t\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\tbody.classList.add(\"right\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbody.classList.add(\"full\");\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.styleContainer(this._diffEditorContainer);\n\t\tthis.updateSourceEditor();\n\t\tif (this.cell.modified) {\n\t\t\tthis._register(\n\t\t\t\tthis.cell.modified.textModel.onDidChangeContent(() =>\n\t\t\t\t\tthis._cellHeader.refresh(),\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\n\t\tthis._ignoreMetadata = this.configurationService.getValue(\n\t\t\t\"notebook.diff.ignoreMetadata\",\n\t\t);\n\t\tif (this._ignoreMetadata) {\n\t\t\tthis._disposeMetadata();\n\t\t} else {\n\t\t\tthis._buildMetadata();\n\t\t}\n\n\t\tthis._ignoreOutputs =\n\t\t\tthis.configurationService.getValue<boolean>(\n\t\t\t\t\"notebook.diff.ignoreOutputs\",\n\t\t\t) ||\n\t\t\t!!this.notebookEditor.textModel?.transientOptions.transientOutputs;\n\t\tif (this._ignoreOutputs) {\n\t\t\tthis._disposeOutput();\n\t\t} else {\n\t\t\tthis._buildOutput();\n\t\t}\n\n\t\tthis._register(\n\t\t\tthis.configurationService.onDidChangeConfiguration((e) => {\n\t\t\t\tlet metadataLayoutChange = false;\n\t\t\t\tlet outputLayoutChange = false;\n\t\t\t\tif (e.affectsConfiguration(\"notebook.diff.ignoreMetadata\")) {\n\t\t\t\t\tconst newValue =\n\t\t\t\t\t\tthis.configurationService.getValue<boolean>(\n\t\t\t\t\t\t\t\"notebook.diff.ignoreMetadata\",\n\t\t\t\t\t\t);\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tnewValue !== undefined &&\n\t\t\t\t\t\tthis._ignoreMetadata !== newValue\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis._ignoreMetadata = newValue;\n\n\t\t\t\t\t\tthis._metadataLocalDisposable.clear();\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tthis.configurationService.getValue(\n\t\t\t\t\t\t\t\t\"notebook.diff.ignoreMetadata\",\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tthis._disposeMetadata();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.cell.metadataStatusHeight = 25;\n\t\t\t\t\t\t\tthis._buildMetadata();\n\t\t\t\t\t\t\tthis.updateMetadataRendering();\n\t\t\t\t\t\t\tmetadataLayoutChange = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (e.affectsConfiguration(\"notebook.diff.ignoreOutputs\")) {\n\t\t\t\t\tconst newValue =\n\t\t\t\t\t\tthis.configurationService.getValue<boolean>(\n\t\t\t\t\t\t\t\"notebook.diff.ignoreOutputs\",\n\t\t\t\t\t\t);\n\n\t\t\t\t\tif (\n\t\t\t\t\t\tnewValue !== undefined &&\n\t\t\t\t\t\tthis._ignoreOutputs !==\n\t\t\t\t\t\t\t(newValue ||\n\t\t\t\t\t\t\t\tthis.notebookEditor.textModel?.transientOptions\n\t\t\t\t\t\t\t\t\t.transientOutputs)\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis._ignoreOutputs =\n\t\t\t\t\t\t\tnewValue ||\n\t\t\t\t\t\t\t!!this.notebookEditor.textModel?.transientOptions\n\t\t\t\t\t\t\t\t.transientOutputs;\n\n\t\t\t\t\t\tthis._outputLocalDisposable.clear();\n\t\t\t\t\t\tif (this._ignoreOutputs) {\n\t\t\t\t\t\t\tthis._disposeOutput();\n\t\t\t\t\t\t\tthis.cell.layoutChange();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tthis.cell.outputStatusHeight = 25;\n\t\t\t\t\t\t\tthis._buildOutput();\n\t\t\t\t\t\t\toutputLayoutChange = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (metadataLayoutChange || outputLayoutChange) {\n\t\t\t\t\tthis.layout({\n\t\t\t\t\t\tmetadataHeight: metadataLayoutChange,\n\t\t\t\t\t\toutputTotalHeight: outputLayoutChange,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t}\n\n\tupdateMetadataRendering() {\n\t\tif (this.cell.metadataFoldingState === PropertyFoldingState.Expanded) {\n\t\t\t// we should expand the metadata editor\n\t\t\tthis._metadataInfoContainer.style.display = \"block\";\n\n\t\t\tif (!this._metadataEditorContainer || !this._metadataEditor) {\n\t\t\t\t// create editor\n\t\t\t\tthis._metadataEditorContainer = DOM.append(\n\t\t\t\t\tthis._metadataInfoContainer,\n\t\t\t\t\tDOM.$(\".metadata-editor-container\"),\n\t\t\t\t);\n\t\t\t\tthis._buildMetadataEditor();\n\t\t\t} else {\n\t\t\t\tthis.cell.metadataHeight =\n\t\t\t\t\tthis._metadataEditor.getContentHeight();\n\t\t\t}\n\t\t} else {\n\t\t\t// we should collapse the metadata editor\n\t\t\tthis._metadataInfoContainer.style.display = \"none\";\n\t\t\t// this._metadataEditorDisposeStore.clear();\n\t\t\tthis.cell.metadataHeight = 0;\n\t\t}\n\t}\n\n\tupdateOutputRendering(renderRichOutput: boolean) {\n\t\tif (this.cell.outputFoldingState === PropertyFoldingState.Expanded) {\n\t\t\tthis._outputInfoContainer.style.display = \"block\";\n\t\t\tif (renderRichOutput) {\n\t\t\t\tthis._hideOutputsRaw();\n\t\t\t\tthis._buildOutputRendererContainer();\n\t\t\t\tthis._showOutputsRenderer();\n\t\t\t\tthis._showOutputsEmptyView();\n\t\t\t} else {\n\t\t\t\tthis._hideOutputsRenderer();\n\t\t\t\tthis._buildOutputRawContainer();\n\t\t\t\tthis._showOutputsRaw();\n\t\t\t}\n\t\t} else {\n\t\t\tthis._outputInfoContainer.style.display = \"none\";\n\n\t\t\tthis._hideOutputsRaw();\n\t\t\tthis._hideOutputsRenderer();\n\t\t\tthis._hideOutputsEmptyView();\n\t\t}\n\t}\n\n\tprivate _buildOutputRawContainer() {\n\t\tif (!this._outputEditorContainer) {\n\t\t\tthis._outputEditorContainer = DOM.append(\n\t\t\t\tthis._outputInfoContainer,\n\t\t\t\tDOM.$(\".output-editor-container\"),\n\t\t\t);\n\t\t\tthis._buildOutputEditor();\n\t\t}\n\t}\n\n\tprivate _showOutputsRaw() {\n\t\tif (this._outputEditorContainer) {\n\t\t\tthis._outputEditorContainer.style.display = \"block\";\n\t\t\tthis.cell.rawOutputHeight = this._outputEditor!.getContentHeight();\n\t\t}\n\t}\n\n\tprivate _showOutputsEmptyView() {\n\t\tthis.cell.layoutChange();\n\t}\n\n\tprotected _hideOutputsRaw() {\n\t\tif (this._outputEditorContainer) {\n\t\t\tthis._outputEditorContainer.style.display = \"none\";\n\t\t\tthis.cell.rawOutputHeight = 0;\n\t\t}\n\t}\n\n\tprotected _hideOutputsEmptyView() {\n\t\tthis.cell.layoutChange();\n\t}\n\n\tabstract _buildOutputRendererContainer(): void;\n\tabstract _hideOutputsRenderer(): void;\n\tabstract _showOutputsRenderer(): void;\n\n\tprivate _applySanitizedMetadataChanges(\n\t\tcurrentMetadata: NotebookCellMetadata,\n\t\tnewMetadata: any,\n\t) {\n\t\tconst result: { [key: string]: any } = {};\n\t\ttry {\n\t\t\tconst newMetadataObj = JSON.parse(newMetadata);\n\t\t\tconst keys = new Set([...Object.keys(newMetadataObj)]);\n\t\t\tfor (const key of keys) {\n\t\t\t\tswitch (key as keyof NotebookCellMetadata) {\n\t\t\t\t\tcase \"inputCollapsed\":\n\t\t\t\t\tcase \"outputCollapsed\":\n\t\t\t\t\t\t// boolean\n\t\t\t\t\t\tif (typeof newMetadataObj[key] === \"boolean\") {\n\t\t\t\t\t\t\tresult[key] = newMetadataObj[key];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult[key] =\n\t\t\t\t\t\t\t\tcurrentMetadata[\n\t\t\t\t\t\t\t\t\tkey as keyof NotebookCellMetadata\n\t\t\t\t\t\t\t\t];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tresult[key] = newMetadataObj[key];\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst index = this.notebookEditor.textModel!.cells.indexOf(\n\t\t\t\tthis.cell.modified!.textModel,\n\t\t\t);\n\n\t\t\tif (index < 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.notebookEditor.textModel!.applyEdits(\n\t\t\t\t[{ editType: CellEditType.Metadata, index, metadata: result }],\n\t\t\t\ttrue,\n\t\t\t\tundefined,\n\t\t\t\t() => undefined,\n\t\t\t\tundefined,\n\t\t\t\ttrue,\n\t\t\t);\n\t\t} catch {}\n\t}\n\n\tprivate async _buildMetadataEditor() {\n\t\tthis._metadataEditorDisposeStore.clear();\n\n\t\tif (this.cell instanceof SideBySideDiffElementViewModel) {\n\t\t\tthis._metadataEditor = this.instantiationService.createInstance(\n\t\t\t\tDiffEditorWidget,\n\t\t\t\tthis._metadataEditorContainer!,\n\t\t\t\t{\n\t\t\t\t\t...fixedDiffEditorOptions,\n\t\t\t\t\toverflowWidgetsDomNode:\n\t\t\t\t\t\tthis.notebookEditor.getOverflowContainerDomNode(),\n\t\t\t\t\treadOnly: false,\n\t\t\t\t\toriginalEditable: false,\n\t\t\t\t\tignoreTrimWhitespace: false,\n\t\t\t\t\tautomaticLayout: false,\n\t\t\t\t\tdimension: {\n\t\t\t\t\t\theight: this.cell.layoutInfo.metadataHeight,\n\t\t\t\t\t\twidth: this.cell.getComputedCellContainerWidth(\n\t\t\t\t\t\t\tthis.notebookEditor.getLayoutInfo(),\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\toriginalEditor: getOptimizedNestedCodeEditorWidgetOptions(),\n\t\t\t\t\tmodifiedEditor: getOptimizedNestedCodeEditorWidgetOptions(),\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tconst unchangedRegions = this._register(\n\t\t\t\tgetUnchangedRegionSettings(this.configurationService),\n\t\t\t);\n\t\t\tif (unchangedRegions.options.enabled) {\n\t\t\t\tthis._metadataEditor.updateOptions({\n\t\t\t\t\thideUnchangedRegions: unchangedRegions.options,\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis._metadataEditorDisposeStore.add(\n\t\t\t\tunchangedRegions.onDidChangeEnablement(() => {\n\t\t\t\t\tif (this._metadataEditor) {\n\t\t\t\t\t\tthis._metadataEditor.updateOptions({\n\t\t\t\t\t\t\thideUnchangedRegions: unchangedRegions.options,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tthis.layout({ metadataHeight: true });\n\t\t\tthis._metadataEditorDisposeStore.add(this._metadataEditor);\n\n\t\t\tthis._metadataEditorContainer?.classList.add(\"diff\");\n\n\t\t\tconst [originalMetadataModel, modifiedMetadataModel] =\n\t\t\t\tawait Promise.all([\n\t\t\t\t\tthis.textModelService.createModelReference(\n\t\t\t\t\t\tCellUri.generateCellPropertyUri(\n\t\t\t\t\t\t\tthis.cell.originalDocument.uri,\n\t\t\t\t\t\t\tthis.cell.original.handle,\n\t\t\t\t\t\t\tSchemas.vscodeNotebookCellMetadata,\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t\tthis.textModelService.createModelReference(\n\t\t\t\t\t\tCellUri.generateCellPropertyUri(\n\t\t\t\t\t\t\tthis.cell.modifiedDocument.uri,\n\t\t\t\t\t\t\tthis.cell.modified.handle,\n\t\t\t\t\t\t\tSchemas.vscodeNotebookCellMetadata,\n\t\t\t\t\t\t),\n\t\t\t\t\t),\n\t\t\t\t]);\n\t\t\tthis._metadataEditorDisposeStore.add(originalMetadataModel);\n\t\t\tthis._metadataEditorDisposeStore.add(modifiedMetadataModel);\n\t\t\tconst vm = this._metadataEditor.createViewModel({\n\t\t\t\toriginal: originalMetadataModel.object.textEditorModel,\n\t\t\t\tmodified: modifiedMetadataModel.object.textEditorModel,\n\t\t\t});\n\t\t\t// Reduces flicker (compute this before setting the model)\n\t\t\t// Else when the model is set, the height of the editor will be x, after diff is computed, then height will be y.\n\t\t\t// & that results in flicker.\n\t\t\tawait vm.waitForDiff();\n\t\t\tthis._metadataEditor.setModel(vm);\n\n\t\t\tthis.cell.metadataHeight = this._metadataEditor.getContentHeight();\n\n\t\t\tthis._metadataEditorDisposeStore.add(\n\t\t\t\tthis._metadataEditor.onDidContentSizeChange((e) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\te.contentHeightChanged &&\n\t\t\t\t\t\tthis.cell.metadataFoldingState ===\n\t\t\t\t\t\t\tPropertyFoldingState.Expanded\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.cell.metadataHeight = e.contentHeight;\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tlet respondingToContentChange = false;\n\n\t\t\tthis._metadataEditorDisposeStore.add(\n\t\t\t\tmodifiedMetadataModel.object.textEditorModel.onDidChangeContent(\n\t\t\t\t\t() => {\n\t\t\t\t\t\trespondingToContentChange = true;\n\t\t\t\t\t\tconst value =\n\t\t\t\t\t\t\tmodifiedMetadataModel.object.textEditorModel.getValue();\n\t\t\t\t\t\tthis._applySanitizedMetadataChanges(\n\t\t\t\t\t\t\tthis.cell.modified!.metadata,\n\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tthis._metadataHeader.refresh();\n\t\t\t\t\t\trespondingToContentChange = false;\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t);\n\n\t\t\tthis._metadataEditorDisposeStore.add(\n\t\t\t\tthis.cell.modified.textModel.onDidChangeMetadata(() => {\n\t\t\t\t\tif (respondingToContentChange) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst modifiedMetadataSource = getFormattedMetadataJSON(\n\t\t\t\t\t\tthis.notebookEditor.textModel?.transientOptions\n\t\t\t\t\t\t\t.transientCellMetadata,\n\t\t\t\t\t\tthis.cell.modified?.metadata || {},\n\t\t\t\t\t\tthis.cell.modified?.language,\n\t\t\t\t\t);\n\t\t\t\t\tmodifiedMetadataModel.object.textEditorModel.setValue(\n\t\t\t\t\t\tmodifiedMetadataSource,\n\t\t\t\t\t);\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\treturn;\n\t\t} else {\n\t\t\tthis._metadataEditor = this.instantiationService.createInstance(\n\t\t\t\tCodeEditorWidget,\n\t\t\t\tthis._metadataEditorContainer!,\n\t\t\t\t{\n\t\t\t\t\t...fixedEditorOptions,\n\t\t\t\t\tdimension: {\n\t\t\t\t\t\twidth: this.cell.getComputedCellContainerWidth(\n\t\t\t\t\t\t\tthis.notebookEditor.getLayoutInfo(),\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t),\n\t\t\t\t\t\theight: this.cell.layoutInfo.metadataHeight,\n\t\t\t\t\t},\n\t\t\t\t\toverflowWidgetsDomNode:\n\t\t\t\t\t\tthis.notebookEditor.getOverflowContainerDomNode(),\n\t\t\t\t\treadOnly: false,\n\t\t\t\t},\n\t\t\t\t{},\n\t\t\t);\n\t\t\tthis.layout({ metadataHeight: true });\n\t\t\tthis._metadataEditorDisposeStore.add(this._metadataEditor);\n\n\t\t\tconst mode = this.languageService.createById(\"jsonc\");\n\t\t\tconst originalMetadataSource = getFormattedMetadataJSON(\n\t\t\t\tthis.notebookEditor.textModel?.transientOptions\n\t\t\t\t\t.transientCellMetadata,\n\t\t\t\tthis.cell.type === \"insert\"\n\t\t\t\t\t? this.cell.modified!.metadata || {}\n\t\t\t\t\t: this.cell.original!.metadata || {},\n\t\t\t);\n\t\t\tconst uri =\n\t\t\t\tthis.cell.type === \"insert\"\n\t\t\t\t\t? this.cell.modified!.uri\n\t\t\t\t\t: this.cell.original!.uri;\n\t\t\tconst handle =\n\t\t\t\tthis.cell.type === \"insert\"\n\t\t\t\t\t? this.cell.modified!.handle\n\t\t\t\t\t: this.cell.original!.handle;\n\n\t\t\tconst modelUri = CellUri.generateCellPropertyUri(\n\t\t\t\turi,\n\t\t\t\thandle,\n\t\t\t\tSchemas.vscodeNotebookCellMetadata,\n\t\t\t);\n\t\t\tconst metadataModel = this.modelService.createModel(\n\t\t\t\toriginalMetadataSource,\n\t\t\t\tmode,\n\t\t\t\tmodelUri,\n\t\t\t\tfalse,\n\t\t\t);\n\t\t\tthis._metadataEditor.setModel(metadataModel);\n\t\t\tthis._metadataEditorDisposeStore.add(metadataModel);\n\n\t\t\tthis.cell.metadataHeight = this._metadataEditor.getContentHeight();\n\n\t\t\tthis._metadataEditorDisposeStore.add(\n\t\t\t\tthis._metadataEditor.onDidContentSizeChange((e) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\te.contentHeightChanged &&\n\t\t\t\t\t\tthis.cell.metadataFoldingState ===\n\t\t\t\t\t\t\tPropertyFoldingState.Expanded\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.cell.metadataHeight = e.contentHeight;\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate _buildOutputEditor() {\n\t\tthis._outputEditorDisposeStore.clear();\n\n\t\tif (\n\t\t\t(this.cell.type === \"modified\" || this.cell.type === \"unchanged\") &&\n\t\t\t!this.notebookEditor.textModel!.transientOptions.transientOutputs\n\t\t) {\n\t\t\tconst originalOutputsSource = getFormattedOutputJSON(\n\t\t\t\tthis.cell.original?.outputs || [],\n\t\t\t);\n\t\t\tconst modifiedOutputsSource = getFormattedOutputJSON(\n\t\t\t\tthis.cell.modified?.outputs || [],\n\t\t\t);\n\t\t\tif (originalOutputsSource !== modifiedOutputsSource) {\n\t\t\t\tconst mode = this.languageService.createById(\"json\");\n\t\t\t\tconst originalModel = this.modelService.createModel(\n\t\t\t\t\toriginalOutputsSource,\n\t\t\t\t\tmode,\n\t\t\t\t\tundefined,\n\t\t\t\t\ttrue,\n\t\t\t\t);\n\t\t\t\tconst modifiedModel = this.modelService.createModel(\n\t\t\t\t\tmodifiedOutputsSource,\n\t\t\t\t\tmode,\n\t\t\t\t\tundefined,\n\t\t\t\t\ttrue,\n\t\t\t\t);\n\t\t\t\tthis._outputEditorDisposeStore.add(originalModel);\n\t\t\t\tthis._outputEditorDisposeStore.add(modifiedModel);\n\n\t\t\t\tconst lineHeight =\n\t\t\t\t\tthis.notebookEditor.getLayoutInfo().fontInfo.lineHeight ||\n\t\t\t\t\t17;\n\t\t\t\tconst lineCount = Math.max(\n\t\t\t\t\toriginalModel.getLineCount(),\n\t\t\t\t\tmodifiedModel.getLineCount(),\n\t\t\t\t);\n\t\t\t\tthis._outputEditor = this.instantiationService.createInstance(\n\t\t\t\t\tDiffEditorWidget,\n\t\t\t\t\tthis._outputEditorContainer!,\n\t\t\t\t\t{\n\t\t\t\t\t\t...fixedDiffEditorOptions,\n\t\t\t\t\t\toverflowWidgetsDomNode:\n\t\t\t\t\t\t\tthis.notebookEditor.getOverflowContainerDomNode(),\n\t\t\t\t\t\treadOnly: true,\n\t\t\t\t\t\tignoreTrimWhitespace: false,\n\t\t\t\t\t\tautomaticLayout: false,\n\t\t\t\t\t\tdimension: {\n\t\t\t\t\t\t\theight: Math.min(\n\t\t\t\t\t\t\t\tOUTPUT_EDITOR_HEIGHT_MAGIC,\n\t\t\t\t\t\t\t\tthis.cell.layoutInfo.rawOutputHeight ||\n\t\t\t\t\t\t\t\t\tlineHeight * lineCount,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\twidth: this.cell.getComputedCellContainerWidth(\n\t\t\t\t\t\t\t\tthis.notebookEditor.getLayoutInfo(),\n\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t},\n\t\t\t\t\t\taccessibilityVerbose:\n\t\t\t\t\t\t\tthis.configurationService.getValue<boolean>(\n\t\t\t\t\t\t\t\tAccessibilityVerbositySettingId.DiffEditor,\n\t\t\t\t\t\t\t) ?? false,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\toriginalEditor:\n\t\t\t\t\t\t\tgetOptimizedNestedCodeEditorWidgetOptions(),\n\t\t\t\t\t\tmodifiedEditor:\n\t\t\t\t\t\t\tgetOptimizedNestedCodeEditorWidgetOptions(),\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t\tthis._outputEditorDisposeStore.add(this._outputEditor);\n\n\t\t\t\tthis._outputEditorContainer?.classList.add(\"diff\");\n\n\t\t\t\tthis._outputEditor.setModel({\n\t\t\t\t\toriginal: originalModel,\n\t\t\t\t\tmodified: modifiedModel,\n\t\t\t\t});\n\t\t\t\tthis._outputEditor.restoreViewState(\n\t\t\t\t\tthis.cell.getOutputEditorViewState() as editorCommon.IDiffEditorViewState,\n\t\t\t\t);\n\n\t\t\t\tthis.cell.rawOutputHeight =\n\t\t\t\t\tthis._outputEditor.getContentHeight();\n\n\t\t\t\tthis._outputEditorDisposeStore.add(\n\t\t\t\t\tthis._outputEditor.onDidContentSizeChange((e) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\te.contentHeightChanged &&\n\t\t\t\t\t\t\tthis.cell.outputFoldingState ===\n\t\t\t\t\t\t\t\tPropertyFoldingState.Expanded\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tthis.cell.rawOutputHeight = e.contentHeight;\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t);\n\n\t\t\t\tthis._outputEditorDisposeStore.add(\n\t\t\t\t\tthis.cell.modified!.textModel.onDidChangeOutputs(() => {\n\t\t\t\t\t\tconst modifiedOutputsSource = getFormattedOutputJSON(\n\t\t\t\t\t\t\tthis.cell.modified?.outputs || [],\n\t\t\t\t\t\t);\n\t\t\t\t\t\tmodifiedModel.setValue(modifiedOutputsSource);\n\t\t\t\t\t\tthis._outputHeader.refresh();\n\t\t\t\t\t}),\n\t\t\t\t);\n\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis._outputEditor = this.instantiationService.createInstance(\n\t\t\tCodeEditorWidget,\n\t\t\tthis._outputEditorContainer!,\n\t\t\t{\n\t\t\t\t...fixedEditorOptions,\n\t\t\t\tdimension: {\n\t\t\t\t\twidth: Math.min(\n\t\t\t\t\t\tOUTPUT_EDITOR_HEIGHT_MAGIC,\n\t\t\t\t\t\tthis.cell.getComputedCellContainerWidth(\n\t\t\t\t\t\t\tthis.notebookEditor.getLayoutInfo(),\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\tthis.cell.type === \"unchanged\" ||\n\t\t\t\t\t\t\t\tthis.cell.type === \"modified\",\n\t\t\t\t\t\t) - 32,\n\t\t\t\t\t),\n\t\t\t\t\theight: this.cell.layoutInfo.rawOutputHeight,\n\t\t\t\t},\n\t\t\t\toverflowWidgetsDomNode:\n\t\t\t\t\tthis.notebookEditor.getOverflowContainerDomNode(),\n\t\t\t},\n\t\t\t{},\n\t\t);\n\t\tthis._outputEditorDisposeStore.add(this._outputEditor);\n\n\t\tconst mode = this.languageService.createById(\"json\");\n\t\tconst originaloutputSource = getFormattedOutputJSON(\n\t\t\tthis.notebookEditor.textModel!.transientOptions.transientOutputs\n\t\t\t\t? []\n\t\t\t\t: this.cell.type === \"insert\"\n\t\t\t\t\t? this.cell.modified?.outputs || []\n\t\t\t\t\t: this.cell.original?.outputs || [],\n\t\t);\n\t\tconst outputModel = this.modelService.createModel(\n\t\t\toriginaloutputSource,\n\t\t\tmode,\n\t\t\tundefined,\n\t\t\ttrue,\n\t\t);\n\t\tthis._outputEditorDisposeStore.add(outputModel);\n\t\tthis._outputEditor.setModel(outputModel);\n\t\tthis._outputEditor.restoreViewState(\n\t\t\tthis.cell.getOutputEditorViewState(),\n\t\t);\n\n\t\tthis.cell.rawOutputHeight = this._outputEditor.getContentHeight();\n\n\t\tthis._outputEditorDisposeStore.add(\n\t\t\tthis._outputEditor.onDidContentSizeChange((e) => {\n\t\t\t\tif (\n\t\t\t\t\te.contentHeightChanged &&\n\t\t\t\t\tthis.cell.outputFoldingState ===\n\t\t\t\t\t\tPropertyFoldingState.Expanded\n\t\t\t\t) {\n\t\t\t\t\tthis.cell.rawOutputHeight = e.contentHeight;\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t}\n\n\tprotected layoutNotebookCell() {\n\t\tthis.notebookEditor.layoutNotebookCell(\n\t\t\tthis.cell,\n\t\t\tthis.cell.layoutInfo.totalHeight,\n\t\t);\n\t}\n\n\tupdateBorders() {\n\t\tthis.templateData.leftBorder.style.height = `${this.cell.layoutInfo.totalHeight - 32}px`;\n\t\tthis.templateData.rightBorder.style.height = `${this.cell.layoutInfo.totalHeight - 32}px`;\n\t\tthis.templateData.bottomBorder.style.top = `${this.cell.layoutInfo.totalHeight - 32}px`;\n\t}\n\n\toverride dispose() {\n\t\tif (this._outputEditor) {\n\t\t\tthis.cell.saveOutputEditorViewState(\n\t\t\t\tthis._outputEditor.saveViewState(),\n\t\t\t);\n\t\t}\n\n\t\tif (this._metadataEditor) {\n\t\t\tthis.cell.saveMetadataEditorViewState(\n\t\t\t\tthis._metadataEditor.saveViewState(),\n\t\t\t);\n\t\t}\n\n\t\tthis._metadataEditorDisposeStore.dispose();\n\t\tthis._outputEditorDisposeStore.dispose();\n\n\t\tthis._isDisposed = true;\n\t\tsuper.dispose();\n\t}\n\n\tabstract updateSourceEditor(): void;\n\tabstract layout(state: IDiffElementLayoutState): void;\n}\n\nabstract class SingleSideDiffElement extends AbstractElementRenderer {\n\tprotected _editor!: CodeEditorWidget;\n\toverride readonly cell: SingleSideDiffElementViewModel;\n\toverride readonly templateData: CellDiffSingleSideRenderTemplate;\n\tabstract get nestedCellViewModel(): DiffNestedCellViewModel;\n\tabstract get readonly(): boolean;\n\tconstructor(\n\t\tnotebookEditor: INotebookTextDiffEditor,\n\t\tcell: SingleSideDiffElementViewModel,\n\t\ttemplateData: CellDiffSingleSideRenderTemplate,\n\t\tstyle: \"left\" | \"right\" | \"full\",\n\t\tinstantiationService: IInstantiationService,\n\t\tlanguageService: ILanguageService,\n\t\tmodelService: IModelService,\n\t\ttextModelService: ITextModelService,\n\t\tcontextMenuService: IContextMenuService,\n\t\tkeybindingService: IKeybindingService,\n\t\tnotificationService: INotificationService,\n\t\tmenuService: IMenuService,\n\t\tcontextKeyService: IContextKeyService,\n\t\tconfigurationService: IConfigurationService,\n\t\ttextConfigurationService: ITextResourceConfigurationService,\n\t) {\n\t\tsuper(\n\t\t\tnotebookEditor,\n\t\t\tcell,\n\t\t\ttemplateData,\n\t\t\tstyle,\n\t\t\tinstantiationService,\n\t\t\tlanguageService,\n\t\t\tmodelService,\n\t\t\ttextModelService,\n\t\t\tcontextMenuService,\n\t\t\tkeybindingService,\n\t\t\tnotificationService,\n\t\t\tmenuService,\n\t\t\tcontextKeyService,\n\t\t\tconfigurationService,\n\t\t\ttextConfigurationService,\n\t\t);\n\t\tthis.cell = cell;\n\t\tthis.templateData = templateData;\n\n\t\tthis.updateBorders();\n\t}\n\n\tinit() {\n\t\tthis._diagonalFill = this.templateData.diagonalFill;\n\t}\n\n\toverride buildBody() {\n\t\tconst body = this.templateData.body;\n\t\tthis._diffEditorContainer = this.templateData.diffEditorContainer;\n\t\tbody.classList.remove(\"left\", \"right\", \"full\");\n\t\tswitch (this.style) {\n\t\t\tcase \"left\":\n\t\t\t\tbody.classList.add(\"left\");\n\t\t\t\tbreak;\n\t\t\tcase \"right\":\n\t\t\t\tbody.classList.add(\"right\");\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbody.classList.add(\"full\");\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.styleContainer(this._diffEditorContainer);\n\t\tthis.updateSourceEditor();\n\n\t\tif (\n\t\t\tthis.configurationService.getValue(\"notebook.diff.ignoreMetadata\")\n\t\t) {\n\t\t\tthis._disposeMetadata();\n\t\t} else {\n\t\t\tthis._buildMetadata();\n\t\t}\n\n\t\tif (\n\t\t\tthis.configurationService.getValue(\"notebook.diff.ignoreOutputs\") ||\n\t\t\tthis.notebookEditor.textModel?.transientOptions.transientOutputs\n\t\t) {\n\t\t\tthis._disposeOutput();\n\t\t} else {\n\t\t\tthis._buildOutput();\n\t\t}\n\n\t\tthis._register(\n\t\t\tthis.configurationService.onDidChangeConfiguration((e) => {\n\t\t\t\tlet metadataLayoutChange = false;\n\t\t\t\tlet outputLayoutChange = false;\n\t\t\t\tif (e.affectsConfiguration(\"notebook.diff.ignoreMetadata\")) {\n\t\t\t\t\tthis._metadataLocalDisposable.clear();\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.configurationService.getValue(\n\t\t\t\t\t\t\t\"notebook.diff.ignoreMetadata\",\n\t\t\t\t\t\t)\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis._disposeMetadata();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.cell.metadataStatusHeight = 25;\n\t\t\t\t\t\tthis._buildMetadata();\n\t\t\t\t\t\tthis.updateMetadataRendering();\n\t\t\t\t\t\tmetadataLayoutChange = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (e.affectsConfiguration(\"notebook.diff.ignoreOutputs\")) {\n\t\t\t\t\tthis._outputLocalDisposable.clear();\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.configurationService.getValue(\n\t\t\t\t\t\t\t\"notebook.diff.ignoreOutputs\",\n\t\t\t\t\t\t) ||\n\t\t\t\t\t\tthis.notebookEditor.textModel?.transientOptions\n\t\t\t\t\t\t\t.transientOutputs\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis._disposeOutput();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.cell.outputStatusHeight = 25;\n\t\t\t\t\t\tthis._buildOutput();\n\t\t\t\t\t\toutputLayoutChange = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (metadataLayoutChange || outputLayoutChange) {\n\t\t\t\t\tthis.layout({\n\t\t\t\t\t\tmetadataHeight: metadataLayoutChange,\n\t\t\t\t\t\toutputTotalHeight: outputLayoutChange,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t}\n\n\toverride updateSourceEditor(): void {\n\t\tthis._cellHeaderContainer = this.templateData.cellHeaderContainer;\n\t\tthis._cellHeaderContainer.style.display = \"flex\";\n\t\tthis._cellHeaderContainer.innerText = \"\";\n\t\tthis._editorContainer = this.templateData.editorContainer;\n\t\tthis._editorContainer.classList.add(\"diff\");\n\n\t\tconst renderSourceEditor = () => {\n\t\t\tif (this.cell.cellFoldingState === PropertyFoldingState.Collapsed) {\n\t\t\t\tthis._editorContainer.style.display = \"none\";\n\t\t\t\tthis.cell.editorHeight = 0;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst lineHeight =\n\t\t\t\tthis.notebookEditor.getLayoutInfo().fontInfo.lineHeight || 17;\n\t\t\tconst editorHeight = this.cell.computeInputEditorHeight(lineHeight);\n\n\t\t\tthis._editorContainer.style.height = `${editorHeight}px`;\n\t\t\tthis._editorContainer.style.display = \"block\";\n\n\t\t\tif (this._editor) {\n\t\t\t\tconst contentHeight = this._editor.getContentHeight();\n\t\t\t\tif (contentHeight >= 0) {\n\t\t\t\t\tthis.cell.editorHeight = contentHeight;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._editor = this.templateData.sourceEditor;\n\t\t\tthis._editor.layout({\n\t\t\t\twidth:\n\t\t\t\t\t(this.notebookEditor.getLayoutInfo().width -\n\t\t\t\t\t\t2 * DIFF_CELL_MARGIN) /\n\t\t\t\t\t\t2 -\n\t\t\t\t\t18,\n\t\t\t\theight: editorHeight,\n\t\t\t});\n\t\t\tthis._editor.updateOptions({ readOnly: this.readonly });\n\t\t\tthis.cell.editorHeight = editorHeight;\n\n\t\t\tthis._register(\n\t\t\t\tthis._editor.onDidContentSizeChange((e) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.cell.cellFoldingState ===\n\t\t\t\t\t\t\tPropertyFoldingState.Expanded &&\n\t\t\t\t\t\te.contentHeightChanged &&\n\t\t\t\t\t\tthis.cell.layoutInfo.editorHeight !== e.contentHeight\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.cell.editorHeight = e.contentHeight;\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\t\t\tthis._initializeSourceDiffEditor(this.nestedCellViewModel);\n\t\t};\n\n\t\tthis._cellHeader = this._register(\n\t\t\tthis.instantiationService.createInstance(\n\t\t\t\tPropertyHeader,\n\t\t\t\tthis.cell,\n\t\t\t\tthis._cellHeaderContainer,\n\t\t\t\tthis.notebookEditor,\n\t\t\t\t{\n\t\t\t\t\tupdateInfoRendering: () => renderSourceEditor(),\n\t\t\t\t\tcheckIfModified: () => ({ reason: undefined }),\n\t\t\t\t\tgetFoldingState: () => this.cell.cellFoldingState,\n\t\t\t\t\tupdateFoldingState: (state) =>\n\t\t\t\t\t\t(this.cell.cellFoldingState = state),\n\t\t\t\t\tunChangedLabel: \"Input\",\n\t\t\t\t\tchangedLabel: \"Input\",\n\t\t\t\t\tprefix: \"input\",\n\t\t\t\t\tmenuId: MenuId.NotebookDiffCellInputTitle,\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\t\tthis._cellHeader.buildHeader();\n\t\trenderSourceEditor();\n\n\t\tthis._initializeSourceDiffEditor(this.nestedCellViewModel);\n\t}\n\tprotected calculateDiagonalFillHeight() {\n\t\treturn (\n\t\t\tthis.cell.layoutInfo.cellStatusHeight +\n\t\t\tthis.cell.layoutInfo.editorHeight +\n\t\t\tthis.cell.layoutInfo.editorMargin +\n\t\t\tthis.cell.layoutInfo.metadataStatusHeight +\n\t\t\tthis.cell.layoutInfo.metadataHeight +\n\t\t\tthis.cell.layoutInfo.outputTotalHeight +\n\t\t\tthis.cell.layoutInfo.outputStatusHeight\n\t\t);\n\t}\n\n\tprivate async _initializeSourceDiffEditor(\n\t\tmodifiedCell: DiffNestedCellViewModel,\n\t) {\n\t\tconst modifiedRef = await this.textModelService.createModelReference(\n\t\t\tmodifiedCell.uri,\n\t\t);\n\n\t\tif (this._isDisposed) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst modifiedTextModel = modifiedRef.object.textEditorModel;\n\t\tthis._register(modifiedRef);\n\n\t\tthis._editor!.setModel(modifiedTextModel);\n\n\t\tconst editorViewState =\n\t\t\tthis.cell.getSourceEditorViewState() as editorCommon.IDiffEditorViewState | null;\n\t\tif (editorViewState) {\n\t\t\tthis._editor!.restoreViewState(editorViewState);\n\t\t}\n\n\t\tconst contentHeight = this._editor!.getContentHeight();\n\t\tthis.cell.editorHeight = contentHeight;\n\t\tconst height = `${this.calculateDiagonalFillHeight()}px`;\n\t\tif (this._diagonalFill!.style.height !== height) {\n\t\t\tthis._diagonalFill!.style.height = height;\n\t\t}\n\t}\n\n\t_disposeMetadata() {\n\t\tthis.cell.metadataStatusHeight = 0;\n\t\tthis.cell.metadataHeight = 0;\n\t\tthis.templateData.cellHeaderContainer.style.display = \"none\";\n\t\tthis.templateData.metadataHeaderContainer.style.display = \"none\";\n\t\tthis.templateData.metadataInfoContainer.style.display = \"none\";\n\t\tthis._metadataEditor = undefined;\n\t}\n\n\t_buildMetadata() {\n\t\tthis._metadataHeaderContainer =\n\t\t\tthis.templateData.metadataHeaderContainer;\n\t\tthis._metadataInfoContainer = this.templateData.metadataInfoContainer;\n\t\tthis._metadataHeaderContainer.style.display = \"flex\";\n\t\tthis._metadataInfoContainer.style.display = \"block\";\n\t\tthis._metadataHeaderContainer.innerText = \"\";\n\t\tthis._metadataInfoContainer.innerText = \"\";\n\n\t\tthis._metadataHeader = this.instantiationService.createInstance(\n\t\t\tPropertyHeader,\n\t\t\tthis.cell,\n\t\t\tthis._metadataHeaderContainer,\n\t\t\tthis.notebookEditor,\n\t\t\t{\n\t\t\t\tupdateInfoRendering: this.updateMetadataRendering.bind(this),\n\t\t\t\tcheckIfModified: () => {\n\t\t\t\t\treturn this.cell.checkMetadataIfModified();\n\t\t\t\t},\n\t\t\t\tgetFoldingState: () => {\n\t\t\t\t\treturn this.cell.metadataFoldingState;\n\t\t\t\t},\n\t\t\t\tupdateFoldingState: (state) => {\n\t\t\t\t\tthis.cell.metadataFoldingState = state;\n\t\t\t\t},\n\t\t\t\tunChangedLabel: \"Metadata\",\n\t\t\t\tchangedLabel: \"Metadata changed\",\n\t\t\t\tprefix: \"metadata\",\n\t\t\t\tmenuId: MenuId.NotebookDiffCellMetadataTitle,\n\t\t\t},\n\t\t);\n\t\tthis._metadataLocalDisposable.add(this._metadataHeader);\n\t\tthis._metadataHeader.buildHeader();\n\t}\n\n\t_buildOutput() {\n\t\tthis.templateData.outputHeaderContainer.style.display = \"flex\";\n\t\tthis.templateData.outputInfoContainer.style.display = \"block\";\n\n\t\tthis._outputHeaderContainer = this.templateData.outputHeaderContainer;\n\t\tthis._outputInfoContainer = this.templateData.outputInfoContainer;\n\n\t\tthis._outputHeaderContainer.innerText = \"\";\n\t\tthis._outputInfoContainer.innerText = \"\";\n\n\t\tthis._outputHeader = this.instantiationService.createInstance(\n\t\t\tPropertyHeader,\n\t\t\tthis.cell,\n\t\t\tthis._outputHeaderContainer,\n\t\t\tthis.notebookEditor,\n\t\t\t{\n\t\t\t\tupdateInfoRendering: this.updateOutputRendering.bind(this),\n\t\t\t\tcheckIfModified: () => {\n\t\t\t\t\treturn this.cell.checkIfOutputsModified();\n\t\t\t\t},\n\t\t\t\tgetFoldingState: () => {\n\t\t\t\t\treturn this.cell.outputFoldingState;\n\t\t\t\t},\n\t\t\t\tupdateFoldingState: (state) => {\n\t\t\t\t\tthis.cell.outputFoldingState = state;\n\t\t\t\t},\n\t\t\t\tunChangedLabel: \"Outputs\",\n\t\t\t\tchangedLabel: \"Outputs changed\",\n\t\t\t\tprefix: \"output\",\n\t\t\t\tmenuId: MenuId.NotebookDiffCellOutputsTitle,\n\t\t\t},\n\t\t);\n\t\tthis._outputLocalDisposable.add(this._outputHeader);\n\t\tthis._outputHeader.buildHeader();\n\t}\n\n\t_disposeOutput() {\n\t\tthis._hideOutputsRaw();\n\t\tthis._hideOutputsRenderer();\n\t\tthis._hideOutputsEmptyView();\n\n\t\tthis.cell.rawOutputHeight = 0;\n\t\tthis.cell.outputMetadataHeight = 0;\n\t\tthis.cell.outputStatusHeight = 0;\n\t\tthis.templateData.outputHeaderContainer.style.display = \"none\";\n\t\tthis.templateData.outputInfoContainer.style.display = \"none\";\n\t\tthis._outputViewContainer = undefined;\n\t}\n}\nexport class DeletedElement extends SingleSideDiffElement {\n\tconstructor(\n\t\tnotebookEditor: INotebookTextDiffEditor,\n\t\tcell: SingleSideDiffElementViewModel,\n\t\ttemplateData: CellDiffSingleSideRenderTemplate,\n\t\t@ILanguageService languageService: ILanguageService,\n\t\t@IModelService modelService: IModelService,\n\t\t@ITextModelService textModelService: ITextModelService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@ITextResourceConfigurationService\n\t\ttextConfigurationService: ITextResourceConfigurationService,\n\t) {\n\t\tsuper(\n\t\t\tnotebookEditor,\n\t\t\tcell,\n\t\t\ttemplateData,\n\t\t\t\"left\",\n\t\t\tinstantiationService,\n\t\t\tlanguageService,\n\t\t\tmodelService,\n\t\t\ttextModelService,\n\t\t\tcontextMenuService,\n\t\t\tkeybindingService,\n\t\t\tnotificationService,\n\t\t\tmenuService,\n\t\t\tcontextKeyService,\n\t\t\tconfigurationService,\n\t\t\ttextConfigurationService,\n\t\t);\n\t}\n\n\tget nestedCellViewModel() {\n\t\treturn this.cell.original!;\n\t}\n\tget readonly() {\n\t\treturn true;\n\t}\n\n\tstyleContainer(container: HTMLElement) {\n\t\tcontainer.classList.remove(\"inserted\");\n\t\tcontainer.classList.add(\"removed\");\n\t}\n\n\tlayout(state: IDiffElementLayoutState) {\n\t\tDOM.scheduleAtNextAnimationFrame(\n\t\t\tDOM.getWindow(this._diffEditorContainer),\n\t\t\t() => {\n\t\t\t\tif ((state.editorHeight || state.outerWidth) && this._editor) {\n\t\t\t\t\tthis._editorContainer.style.height = `${this.cell.layoutInfo.editorHeight}px`;\n\t\t\t\t\tthis._editor.layout({\n\t\t\t\t\t\twidth: this.cell.getComputedCellContainerWidth(\n\t\t\t\t\t\t\tthis.notebookEditor.getLayoutInfo(),\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t),\n\t\t\t\t\t\theight: this.cell.layoutInfo.editorHeight,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (state.outerWidth && this._editor) {\n\t\t\t\t\tthis._editorContainer.style.height = `${this.cell.layoutInfo.editorHeight}px`;\n\t\t\t\t\tthis._editor.layout();\n\t\t\t\t}\n\n\t\t\t\tif (state.metadataHeight || state.outerWidth) {\n\t\t\t\t\tthis._metadataEditor?.layout({\n\t\t\t\t\t\twidth: this.cell.getComputedCellContainerWidth(\n\t\t\t\t\t\t\tthis.notebookEditor.getLayoutInfo(),\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t),\n\t\t\t\t\t\theight: this.cell.layoutInfo.metadataHeight,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (state.outputTotalHeight || state.outerWidth) {\n\t\t\t\t\tthis._outputEditor?.layout({\n\t\t\t\t\t\twidth: this.cell.getComputedCellContainerWidth(\n\t\t\t\t\t\t\tthis.notebookEditor.getLayoutInfo(),\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t),\n\t\t\t\t\t\theight: this.cell.layoutInfo.outputTotalHeight,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (this._diagonalFill) {\n\t\t\t\t\tthis._diagonalFill.style.height = `${this.calculateDiagonalFillHeight()}px`;\n\t\t\t\t}\n\n\t\t\t\tthis.layoutNotebookCell();\n\t\t\t},\n\t\t);\n\t}\n\n\t_buildOutputRendererContainer() {\n\t\tif (!this._outputViewContainer) {\n\t\t\tthis._outputViewContainer = DOM.append(\n\t\t\t\tthis._outputInfoContainer,\n\t\t\t\tDOM.$(\".output-view-container\"),\n\t\t\t);\n\t\t\tthis._outputEmptyElement = DOM.append(\n\t\t\t\tthis._outputViewContainer,\n\t\t\t\tDOM.$(\".output-empty-view\"),\n\t\t\t);\n\t\t\tconst span = DOM.append(this._outputEmptyElement, DOM.$(\"span\"));\n\t\t\tspan.innerText = \"No outputs to render\";\n\n\t\t\tif (this.cell.original?.outputs.length) {\n\t\t\t\tthis._outputEmptyElement.style.display = \"none\";\n\t\t\t} else {\n\t\t\t\tthis._outputEmptyElement.style.display = \"block\";\n\t\t\t}\n\n\t\t\tthis.cell.layoutChange();\n\n\t\t\tthis._outputLeftView = this.instantiationService.createInstance(\n\t\t\t\tOutputContainer,\n\t\t\t\tthis.notebookEditor,\n\t\t\t\tthis.notebookEditor.textModel!,\n\t\t\t\tthis.cell,\n\t\t\t\tthis.cell.original!,\n\t\t\t\tDiffSide.Original,\n\t\t\t\tthis._outputViewContainer,\n\t\t\t);\n\t\t\tthis._register(this._outputLeftView);\n\t\t\tthis._outputLeftView.render();\n\n\t\t\tconst removedOutputRenderListener =\n\t\t\t\tthis.notebookEditor.onDidDynamicOutputRendered((e) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\te.cell.uri.toString() ===\n\t\t\t\t\t\tthis.cell.original!.uri.toString()\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.notebookEditor.deltaCellOutputContainerClassNames(\n\t\t\t\t\t\t\tDiffSide.Original,\n\t\t\t\t\t\t\tthis.cell.original!.id,\n\t\t\t\t\t\t\t[\"nb-cellDeleted\"],\n\t\t\t\t\t\t\t[],\n\t\t\t\t\t\t);\n\t\t\t\t\t\tremovedOutputRenderListener.dispose();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\tthis._register(removedOutputRenderListener);\n\t\t}\n\n\t\tthis._outputViewContainer.style.display = \"block\";\n\t}\n\n\t_decorate() {\n\t\tthis.notebookEditor.deltaCellOutputContainerClassNames(\n\t\t\tDiffSide.Original,\n\t\t\tthis.cell.original!.id,\n\t\t\t[\"nb-cellDeleted\"],\n\t\t\t[],\n\t\t);\n\t}\n\n\t_showOutputsRenderer() {\n\t\tif (this._outputViewContainer) {\n\t\t\tthis._outputViewContainer.style.display = \"block\";\n\n\t\t\tthis._outputLeftView?.showOutputs();\n\t\t\tthis._decorate();\n\t\t}\n\t}\n\n\t_hideOutputsRenderer() {\n\t\tif (this._outputViewContainer) {\n\t\t\tthis._outputViewContainer.style.display = \"none\";\n\n\t\t\tthis._outputLeftView?.hideOutputs();\n\t\t}\n\t}\n\n\toverride dispose() {\n\t\tif (this._editor) {\n\t\t\tthis.cell.saveSpirceEditorViewState(this._editor.saveViewState());\n\t\t}\n\n\t\tsuper.dispose();\n\t}\n}\n\nexport class InsertElement extends SingleSideDiffElement {\n\tconstructor(\n\t\tnotebookEditor: INotebookTextDiffEditor,\n\t\tcell: SingleSideDiffElementViewModel,\n\t\ttemplateData: CellDiffSingleSideRenderTemplate,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@ILanguageService languageService: ILanguageService,\n\t\t@IModelService modelService: IModelService,\n\t\t@ITextModelService textModelService: ITextModelService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@ITextResourceConfigurationService\n\t\ttextConfigurationService: ITextResourceConfigurationService,\n\t) {\n\t\tsuper(\n\t\t\tnotebookEditor,\n\t\t\tcell,\n\t\t\ttemplateData,\n\t\t\t\"right\",\n\t\t\tinstantiationService,\n\t\t\tlanguageService,\n\t\t\tmodelService,\n\t\t\ttextModelService,\n\t\t\tcontextMenuService,\n\t\t\tkeybindingService,\n\t\t\tnotificationService,\n\t\t\tmenuService,\n\t\t\tcontextKeyService,\n\t\t\tconfigurationService,\n\t\t\ttextConfigurationService,\n\t\t);\n\t}\n\tget nestedCellViewModel() {\n\t\treturn this.cell.modified!;\n\t}\n\tget readonly() {\n\t\treturn false;\n\t}\n\n\tstyleContainer(container: HTMLElement): void {\n\t\tcontainer.classList.remove(\"removed\");\n\t\tcontainer.classList.add(\"inserted\");\n\t}\n\n\t_buildOutputRendererContainer() {\n\t\tif (!this._outputViewContainer) {\n\t\t\tthis._outputViewContainer = DOM.append(\n\t\t\t\tthis._outputInfoContainer,\n\t\t\t\tDOM.$(\".output-view-container\"),\n\t\t\t);\n\t\t\tthis._outputEmptyElement = DOM.append(\n\t\t\t\tthis._outputViewContainer,\n\t\t\t\tDOM.$(\".output-empty-view\"),\n\t\t\t);\n\t\t\tthis._outputEmptyElement.innerText = \"No outputs to render\";\n\n\t\t\tif (this.cell.modified?.outputs.length) {\n\t\t\t\tthis._outputEmptyElement.style.display = \"none\";\n\t\t\t} else {\n\t\t\t\tthis._outputEmptyElement.style.display = \"block\";\n\t\t\t}\n\n\t\t\tthis.cell.layoutChange();\n\n\t\t\tthis._outputRightView = this.instantiationService.createInstance(\n\t\t\t\tOutputContainer,\n\t\t\t\tthis.notebookEditor,\n\t\t\t\tthis.notebookEditor.textModel!,\n\t\t\t\tthis.cell,\n\t\t\t\tthis.cell.modified!,\n\t\t\t\tDiffSide.Modified,\n\t\t\t\tthis._outputViewContainer,\n\t\t\t);\n\t\t\tthis._register(this._outputRightView);\n\t\t\tthis._outputRightView.render();\n\n\t\t\tconst insertOutputRenderListener =\n\t\t\t\tthis.notebookEditor.onDidDynamicOutputRendered((e) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\te.cell.uri.toString() ===\n\t\t\t\t\t\tthis.cell.modified!.uri.toString()\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.notebookEditor.deltaCellOutputContainerClassNames(\n\t\t\t\t\t\t\tDiffSide.Modified,\n\t\t\t\t\t\t\tthis.cell.modified!.id,\n\t\t\t\t\t\t\t[\"nb-cellAdded\"],\n\t\t\t\t\t\t\t[],\n\t\t\t\t\t\t);\n\t\t\t\t\t\tinsertOutputRenderListener.dispose();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tthis._register(insertOutputRenderListener);\n\t\t}\n\n\t\tthis._outputViewContainer.style.display = \"block\";\n\t}\n\n\t_decorate() {\n\t\tthis.notebookEditor.deltaCellOutputContainerClassNames(\n\t\t\tDiffSide.Modified,\n\t\t\tthis.cell.modified!.id,\n\t\t\t[\"nb-cellAdded\"],\n\t\t\t[],\n\t\t);\n\t}\n\n\t_showOutputsRenderer() {\n\t\tif (this._outputViewContainer) {\n\t\t\tthis._outputViewContainer.style.display = \"block\";\n\t\t\tthis._outputRightView?.showOutputs();\n\t\t\tthis._decorate();\n\t\t}\n\t}\n\n\t_hideOutputsRenderer() {\n\t\tif (this._outputViewContainer) {\n\t\t\tthis._outputViewContainer.style.display = \"none\";\n\t\t\tthis._outputRightView?.hideOutputs();\n\t\t}\n\t}\n\n\tlayout(state: IDiffElementLayoutState) {\n\t\tDOM.scheduleAtNextAnimationFrame(\n\t\t\tDOM.getWindow(this._diffEditorContainer),\n\t\t\t() => {\n\t\t\t\tif ((state.editorHeight || state.outerWidth) && this._editor) {\n\t\t\t\t\tthis._editorContainer.style.height = `${this.cell.layoutInfo.editorHeight}px`;\n\t\t\t\t\tthis._editor.layout({\n\t\t\t\t\t\twidth: this.cell.getComputedCellContainerWidth(\n\t\t\t\t\t\t\tthis.notebookEditor.getLayoutInfo(),\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t),\n\t\t\t\t\t\theight: this.cell.layoutInfo.editorHeight,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (state.outerWidth && this._editor) {\n\t\t\t\t\tthis._editorContainer.style.height = `${this.cell.layoutInfo.editorHeight}px`;\n\t\t\t\t\tthis._editor.layout();\n\t\t\t\t}\n\n\t\t\t\tif (state.metadataHeight || state.outerWidth) {\n\t\t\t\t\tthis._metadataEditor?.layout({\n\t\t\t\t\t\twidth: this.cell.getComputedCellContainerWidth(\n\t\t\t\t\t\t\tthis.notebookEditor.getLayoutInfo(),\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t),\n\t\t\t\t\t\theight: this.cell.layoutInfo.metadataHeight,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (state.outputTotalHeight || state.outerWidth) {\n\t\t\t\t\tthis._outputEditor?.layout({\n\t\t\t\t\t\twidth: this.cell.getComputedCellContainerWidth(\n\t\t\t\t\t\t\tthis.notebookEditor.getLayoutInfo(),\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t),\n\t\t\t\t\t\theight: this.cell.layoutInfo.outputTotalHeight,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis.layoutNotebookCell();\n\n\t\t\t\tif (this._diagonalFill) {\n\t\t\t\t\tthis._diagonalFill.style.height = `${this.calculateDiagonalFillHeight()}px`;\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t}\n\n\toverride dispose() {\n\t\tif (this._editor) {\n\t\t\tthis.cell.saveSpirceEditorViewState(this._editor.saveViewState());\n\t\t}\n\n\t\tsuper.dispose();\n\t}\n}\n\nexport class ModifiedElement extends AbstractElementRenderer {\n\tprivate _editor?: DiffEditorWidget;\n\tprivate _editorViewStateChanged: boolean;\n\tprotected _toolbar!: ToolBar;\n\tprotected _menu!: IMenu;\n\n\toverride readonly cell: SideBySideDiffElementViewModel;\n\toverride readonly templateData: CellDiffSideBySideRenderTemplate;\n\n\tconstructor(\n\t\tnotebookEditor: INotebookTextDiffEditor,\n\t\tcell: SideBySideDiffElementViewModel,\n\t\ttemplateData: CellDiffSideBySideRenderTemplate,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@ILanguageService languageService: ILanguageService,\n\t\t@IModelService modelService: IModelService,\n\t\t@ITextModelService textModelService: ITextModelService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@ITextResourceConfigurationService\n\t\ttextConfigurationService: ITextResourceConfigurationService,\n\t) {\n\t\tsuper(\n\t\t\tnotebookEditor,\n\t\t\tcell,\n\t\t\ttemplateData,\n\t\t\t\"full\",\n\t\t\tinstantiationService,\n\t\t\tlanguageService,\n\t\t\tmodelService,\n\t\t\ttextModelService,\n\t\t\tcontextMenuService,\n\t\t\tkeybindingService,\n\t\t\tnotificationService,\n\t\t\tmenuService,\n\t\t\tcontextKeyService,\n\t\t\tconfigurationService,\n\t\t\ttextConfigurationService,\n\t\t);\n\t\tthis.cell = cell;\n\t\tthis.templateData = templateData;\n\t\tthis._editorViewStateChanged = false;\n\n\t\tthis.updateBorders();\n\t}\n\n\tinit() {}\n\tstyleContainer(container: HTMLElement): void {\n\t\tcontainer.classList.remove(\"inserted\", \"removed\");\n\t}\n\n\toverride buildBody(): void {\n\t\tsuper.buildBody();\n\t\tif (this.cell.displayIconToHideUnmodifiedCells) {\n\t\t\tthis._register(\n\t\t\t\tthis.templateData.marginOverlay.onAction(() =>\n\t\t\t\t\tthis.cell.hideUnchangedCells(),\n\t\t\t\t),\n\t\t\t);\n\t\t\tthis.templateData.marginOverlay.show();\n\t\t} else {\n\t\t\tthis.templateData.marginOverlay.hide();\n\t\t}\n\t}\n\t_disposeMetadata() {\n\t\tthis.cell.metadataStatusHeight = 0;\n\t\tthis.cell.metadataHeight = 0;\n\t\tthis.templateData.metadataHeaderContainer.style.display = \"none\";\n\t\tthis.templateData.metadataInfoContainer.style.display = \"none\";\n\t\tthis._metadataEditor = undefined;\n\t}\n\n\t_buildMetadata() {\n\t\tthis._metadataHeaderContainer =\n\t\t\tthis.templateData.metadataHeaderContainer;\n\t\tthis._metadataInfoContainer = this.templateData.metadataInfoContainer;\n\t\tthis._metadataHeaderContainer.style.display = \"flex\";\n\t\tthis._metadataInfoContainer.style.display = \"block\";\n\n\t\tthis._metadataHeaderContainer.innerText = \"\";\n\t\tthis._metadataInfoContainer.innerText = \"\";\n\n\t\tthis._metadataHeader = this.instantiationService.createInstance(\n\t\t\tPropertyHeader,\n\t\t\tthis.cell,\n\t\t\tthis._metadataHeaderContainer,\n\t\t\tthis.notebookEditor,\n\t\t\t{\n\t\t\t\tupdateInfoRendering: this.updateMetadataRendering.bind(this),\n\t\t\t\tcheckIfModified: () => {\n\t\t\t\t\treturn this.cell.checkMetadataIfModified();\n\t\t\t\t},\n\t\t\t\tgetFoldingState: () => {\n\t\t\t\t\treturn this.cell.metadataFoldingState;\n\t\t\t\t},\n\t\t\t\tupdateFoldingState: (state) => {\n\t\t\t\t\tthis.cell.metadataFoldingState = state;\n\t\t\t\t},\n\t\t\t\tunChangedLabel: \"Metadata\",\n\t\t\t\tchangedLabel: \"Metadata changed\",\n\t\t\t\tprefix: \"metadata\",\n\t\t\t\tmenuId: MenuId.NotebookDiffCellMetadataTitle,\n\t\t\t},\n\t\t);\n\t\tthis._metadataLocalDisposable.add(this._metadataHeader);\n\t\tthis._metadataHeader.buildHeader();\n\t}\n\n\t_disposeOutput() {\n\t\tthis._hideOutputsRaw();\n\t\tthis._hideOutputsRenderer();\n\t\tthis._hideOutputsEmptyView();\n\n\t\tthis.cell.rawOutputHeight = 0;\n\t\tthis.cell.outputMetadataHeight = 0;\n\t\tthis.cell.outputStatusHeight = 0;\n\t\tthis.templateData.outputHeaderContainer.style.display = \"none\";\n\t\tthis.templateData.outputInfoContainer.style.display = \"none\";\n\t\tthis._outputViewContainer = undefined;\n\t}\n\n\t_buildOutput() {\n\t\tthis.templateData.outputHeaderContainer.style.display = \"flex\";\n\t\tthis.templateData.outputInfoContainer.style.display = \"block\";\n\n\t\tthis._outputHeaderContainer = this.templateData.outputHeaderContainer;\n\t\tthis._outputInfoContainer = this.templateData.outputInfoContainer;\n\t\tthis._outputHeaderContainer.innerText = \"\";\n\t\tthis._outputInfoContainer.innerText = \"\";\n\n\t\tif (this.cell.checkIfOutputsModified()) {\n\t\t\tthis._outputInfoContainer.classList.add(\"modified\");\n\t\t} else {\n\t\t\tthis._outputInfoContainer.classList.remove(\"modified\");\n\t\t}\n\n\t\tthis._outputHeader = this.instantiationService.createInstance(\n\t\t\tPropertyHeader,\n\t\t\tthis.cell,\n\t\t\tthis._outputHeaderContainer,\n\t\t\tthis.notebookEditor,\n\t\t\t{\n\t\t\t\tupdateInfoRendering: this.updateOutputRendering.bind(this),\n\t\t\t\tcheckIfModified: () => {\n\t\t\t\t\treturn this.cell.checkIfOutputsModified();\n\t\t\t\t},\n\t\t\t\tgetFoldingState: () => {\n\t\t\t\t\treturn this.cell.outputFoldingState;\n\t\t\t\t},\n\t\t\t\tupdateFoldingState: (state) => {\n\t\t\t\t\tthis.cell.outputFoldingState = state;\n\t\t\t\t},\n\t\t\t\tunChangedLabel: \"Outputs\",\n\t\t\t\tchangedLabel: \"Outputs changed\",\n\t\t\t\tprefix: \"output\",\n\t\t\t\tmenuId: MenuId.NotebookDiffCellOutputsTitle,\n\t\t\t},\n\t\t);\n\t\tthis._outputLocalDisposable.add(this._outputHeader);\n\t\tthis._outputHeader.buildHeader();\n\t}\n\n\t_buildOutputRendererContainer() {\n\t\tif (!this._outputViewContainer) {\n\t\t\tthis._outputViewContainer = DOM.append(\n\t\t\t\tthis._outputInfoContainer,\n\t\t\t\tDOM.$(\".output-view-container\"),\n\t\t\t);\n\t\t\tthis._outputEmptyElement = DOM.append(\n\t\t\t\tthis._outputViewContainer,\n\t\t\t\tDOM.$(\".output-empty-view\"),\n\t\t\t);\n\t\t\tthis._outputEmptyElement.innerText = \"No outputs to render\";\n\n\t\t\tif (\n\t\t\t\t!this.cell.checkIfOutputsModified() &&\n\t\t\t\tthis.cell.modified.outputs.length === 0\n\t\t\t) {\n\t\t\t\tthis._outputEmptyElement.style.display = \"block\";\n\t\t\t} else {\n\t\t\t\tthis._outputEmptyElement.style.display = \"none\";\n\t\t\t}\n\n\t\t\tthis.cell.layoutChange();\n\n\t\t\tthis._register(\n\t\t\t\tthis.cell.modified.textModel.onDidChangeOutputs(() => {\n\t\t\t\t\t// currently we only allow outputs change to the modified cell\n\t\t\t\t\tif (\n\t\t\t\t\t\t!this.cell.checkIfOutputsModified() &&\n\t\t\t\t\t\tthis.cell.modified.outputs.length === 0\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis._outputEmptyElement!.style.display = \"block\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._outputEmptyElement!.style.display = \"none\";\n\t\t\t\t\t}\n\t\t\t\t\tthis._decorate();\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tthis._outputLeftContainer = DOM.append(\n\t\t\t\tthis._outputViewContainer,\n\t\t\t\tDOM.$(\".output-view-container-left\"),\n\t\t\t);\n\t\t\tthis._outputRightContainer = DOM.append(\n\t\t\t\tthis._outputViewContainer,\n\t\t\t\tDOM.$(\".output-view-container-right\"),\n\t\t\t);\n\t\t\tthis._outputMetadataContainer = DOM.append(\n\t\t\t\tthis._outputViewContainer,\n\t\t\t\tDOM.$(\".output-view-container-metadata\"),\n\t\t\t);\n\n\t\t\tconst outputModified = this.cell.checkIfOutputsModified();\n\t\t\tconst outputMetadataChangeOnly =\n\t\t\t\toutputModified &&\n\t\t\t\toutputModified.kind === OutputComparison.Metadata &&\n\t\t\t\tthis.cell.original.outputs.length === 1 &&\n\t\t\t\tthis.cell.modified.outputs.length === 1 &&\n\t\t\t\toutputEqual(\n\t\t\t\t\tthis.cell.original.outputs[0],\n\t\t\t\t\tthis.cell.modified.outputs[0],\n\t\t\t\t) === OutputComparison.Metadata;\n\n\t\t\tif (outputModified && !outputMetadataChangeOnly) {\n\t\t\t\tconst originalOutputRenderListener =\n\t\t\t\t\tthis.notebookEditor.onDidDynamicOutputRendered((e) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\te.cell.uri.toString() ===\n\t\t\t\t\t\t\t\tthis.cell.original.uri.toString() &&\n\t\t\t\t\t\t\tthis.cell.checkIfOutputsModified()\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tthis.notebookEditor.deltaCellOutputContainerClassNames(\n\t\t\t\t\t\t\t\tDiffSide.Original,\n\t\t\t\t\t\t\t\tthis.cell.original.id,\n\t\t\t\t\t\t\t\t[\"nb-cellDeleted\"],\n\t\t\t\t\t\t\t\t[],\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\toriginalOutputRenderListener.dispose();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\tconst modifiedOutputRenderListener =\n\t\t\t\t\tthis.notebookEditor.onDidDynamicOutputRendered((e) => {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\te.cell.uri.toString() ===\n\t\t\t\t\t\t\t\tthis.cell.modified.uri.toString() &&\n\t\t\t\t\t\t\tthis.cell.checkIfOutputsModified()\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tthis.notebookEditor.deltaCellOutputContainerClassNames(\n\t\t\t\t\t\t\t\tDiffSide.Modified,\n\t\t\t\t\t\t\t\tthis.cell.modified.id,\n\t\t\t\t\t\t\t\t[\"nb-cellAdded\"],\n\t\t\t\t\t\t\t\t[],\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tmodifiedOutputRenderListener.dispose();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\tthis._register(originalOutputRenderListener);\n\t\t\t\tthis._register(modifiedOutputRenderListener);\n\t\t\t}\n\n\t\t\t// We should use the original text model here\n\t\t\tthis._outputLeftView = this.instantiationService.createInstance(\n\t\t\t\tOutputContainer,\n\t\t\t\tthis.notebookEditor,\n\t\t\t\tthis.notebookEditor.textModel!,\n\t\t\t\tthis.cell,\n\t\t\t\tthis.cell.original,\n\t\t\t\tDiffSide.Original,\n\t\t\t\tthis._outputLeftContainer,\n\t\t\t);\n\t\t\tthis._outputLeftView.render();\n\t\t\tthis._register(this._outputLeftView);\n\t\t\tthis._outputRightView = this.instantiationService.createInstance(\n\t\t\t\tOutputContainer,\n\t\t\t\tthis.notebookEditor,\n\t\t\t\tthis.notebookEditor.textModel!,\n\t\t\t\tthis.cell,\n\t\t\t\tthis.cell.modified,\n\t\t\t\tDiffSide.Modified,\n\t\t\t\tthis._outputRightContainer,\n\t\t\t);\n\t\t\tthis._outputRightView.render();\n\t\t\tthis._register(this._outputRightView);\n\n\t\t\tif (outputModified && !outputMetadataChangeOnly) {\n\t\t\t\tthis._decorate();\n\t\t\t}\n\n\t\t\tif (outputMetadataChangeOnly) {\n\t\t\t\tthis._outputMetadataContainer.style.top = `${this.cell.layoutInfo.rawOutputHeight}px`;\n\t\t\t\t// single output, metadata change, let's render a diff editor for metadata\n\t\t\t\tthis._outputMetadataEditor =\n\t\t\t\t\tthis.instantiationService.createInstance(\n\t\t\t\t\t\tDiffEditorWidget,\n\t\t\t\t\t\tthis._outputMetadataContainer,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t...fixedDiffEditorOptions,\n\t\t\t\t\t\t\toverflowWidgetsDomNode:\n\t\t\t\t\t\t\t\tthis.notebookEditor.getOverflowContainerDomNode(),\n\t\t\t\t\t\t\treadOnly: true,\n\t\t\t\t\t\t\tignoreTrimWhitespace: false,\n\t\t\t\t\t\t\tautomaticLayout: false,\n\t\t\t\t\t\t\tdimension: {\n\t\t\t\t\t\t\t\theight: OUTPUT_EDITOR_HEIGHT_MAGIC,\n\t\t\t\t\t\t\t\twidth: this.cell.getComputedCellContainerWidth(\n\t\t\t\t\t\t\t\t\tthis.notebookEditor.getLayoutInfo(),\n\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\toriginalEditor:\n\t\t\t\t\t\t\t\tgetOptimizedNestedCodeEditorWidgetOptions(),\n\t\t\t\t\t\t\tmodifiedEditor:\n\t\t\t\t\t\t\t\tgetOptimizedNestedCodeEditorWidgetOptions(),\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\n\t\t\t\tthis._register(this._outputMetadataEditor);\n\t\t\t\tconst originalOutputMetadataSource = JSON.stringify(\n\t\t\t\t\tthis.cell.original.outputs[0].metadata ?? {},\n\t\t\t\t\tundefined,\n\t\t\t\t\t\"\\t\",\n\t\t\t\t);\n\t\t\t\tconst modifiedOutputMetadataSource = JSON.stringify(\n\t\t\t\t\tthis.cell.modified.outputs[0].metadata ?? {},\n\t\t\t\t\tundefined,\n\t\t\t\t\t\"\\t\",\n\t\t\t\t);\n\n\t\t\t\tconst mode = this.languageService.createById(\"json\");\n\t\t\t\tconst originalModel = this.modelService.createModel(\n\t\t\t\t\toriginalOutputMetadataSource,\n\t\t\t\t\tmode,\n\t\t\t\t\tundefined,\n\t\t\t\t\ttrue,\n\t\t\t\t);\n\t\t\t\tconst modifiedModel = this.modelService.createModel(\n\t\t\t\t\tmodifiedOutputMetadataSource,\n\t\t\t\t\tmode,\n\t\t\t\t\tundefined,\n\t\t\t\t\ttrue,\n\t\t\t\t);\n\n\t\t\t\tthis._outputMetadataEditor.setModel({\n\t\t\t\t\toriginal: originalModel,\n\t\t\t\t\tmodified: modifiedModel,\n\t\t\t\t});\n\n\t\t\t\tthis.cell.outputMetadataHeight =\n\t\t\t\t\tthis._outputMetadataEditor.getContentHeight();\n\n\t\t\t\tthis._register(\n\t\t\t\t\tthis._outputMetadataEditor.onDidContentSizeChange((e) => {\n\t\t\t\t\t\tthis.cell.outputMetadataHeight = e.contentHeight;\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis._outputViewContainer.style.display = \"block\";\n\t}\n\n\t_decorate() {\n\t\tif (this.cell.checkIfOutputsModified()) {\n\t\t\tthis.notebookEditor.deltaCellOutputContainerClassNames(\n\t\t\t\tDiffSide.Original,\n\t\t\t\tthis.cell.original.id,\n\t\t\t\t[\"nb-cellDeleted\"],\n\t\t\t\t[],\n\t\t\t);\n\t\t\tthis.notebookEditor.deltaCellOutputContainerClassNames(\n\t\t\t\tDiffSide.Modified,\n\t\t\t\tthis.cell.modified.id,\n\t\t\t\t[\"nb-cellAdded\"],\n\t\t\t\t[],\n\t\t\t);\n\t\t} else {\n\t\t\tthis.notebookEditor.deltaCellOutputContainerClassNames(\n\t\t\t\tDiffSide.Original,\n\t\t\t\tthis.cell.original.id,\n\t\t\t\t[],\n\t\t\t\t[\"nb-cellDeleted\"],\n\t\t\t);\n\t\t\tthis.notebookEditor.deltaCellOutputContainerClassNames(\n\t\t\t\tDiffSide.Modified,\n\t\t\t\tthis.cell.modified.id,\n\t\t\t\t[],\n\t\t\t\t[\"nb-cellAdded\"],\n\t\t\t);\n\t\t}\n\t}\n\n\t_showOutputsRenderer() {\n\t\tif (this._outputViewContainer) {\n\t\t\tthis._outputViewContainer.style.display = \"block\";\n\n\t\t\tthis._outputLeftView?.showOutputs();\n\t\t\tthis._outputRightView?.showOutputs();\n\t\t\tthis._outputMetadataEditor?.layout({\n\t\t\t\twidth:\n\t\t\t\t\tthis._editor?.getViewWidth() ||\n\t\t\t\t\tthis.cell.getComputedCellContainerWidth(\n\t\t\t\t\t\tthis.notebookEditor.getLayoutInfo(),\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t\ttrue,\n\t\t\t\t\t),\n\t\t\t\theight: this.cell.layoutInfo.outputMetadataHeight,\n\t\t\t});\n\n\t\t\tthis._decorate();\n\t\t}\n\t}\n\n\t_hideOutputsRenderer() {\n\t\tif (this._outputViewContainer) {\n\t\t\tthis._outputViewContainer.style.display = \"none\";\n\n\t\t\tthis._outputLeftView?.hideOutputs();\n\t\t\tthis._outputRightView?.hideOutputs();\n\t\t}\n\t}\n\n\tupdateSourceEditor(): void {\n\t\tthis._cellHeaderContainer = this.templateData.cellHeaderContainer;\n\t\tthis._cellHeaderContainer.style.display = \"flex\";\n\t\tthis._cellHeaderContainer.innerText = \"\";\n\t\tconst modifiedCell = this.cell.modified;\n\t\tthis._editorContainer = this.templateData.editorContainer;\n\t\tthis._editorContainer.classList.add(\"diff\");\n\n\t\tconst renderSourceEditor = () => {\n\t\t\tif (this.cell.cellFoldingState === PropertyFoldingState.Collapsed) {\n\t\t\t\tthis._editorContainer.style.display = \"none\";\n\t\t\t\tthis.cell.editorHeight = 0;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst lineCount = modifiedCell.textModel.textBuffer.getLineCount();\n\t\t\tconst lineHeight =\n\t\t\t\tthis.notebookEditor.getLayoutInfo().fontInfo.lineHeight || 17;\n\t\t\tconst editorHeight =\n\t\t\t\tthis.cell.layoutInfo.editorHeight !== 0\n\t\t\t\t\t? this.cell.layoutInfo.editorHeight\n\t\t\t\t\t: this.cell.computeInputEditorHeight(lineHeight);\n\n\t\t\tthis._editorContainer.style.height = `${editorHeight}px`;\n\t\t\tthis._editorContainer.style.display = \"block\";\n\n\t\t\tif (this._editor) {\n\t\t\t\tconst contentHeight = this._editor.getContentHeight();\n\t\t\t\tif (contentHeight >= 0) {\n\t\t\t\t\tthis.cell.editorHeight = contentHeight;\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._editor = this.templateData.sourceEditor;\n\t\t\t// If there is only 1 line, then ensure we have the necessary padding to display the button for whitespaces.\n\t\t\t// E.g. assume we have a cell with 1 line and we add some whitespace,\n\t\t\t// Then diff editor displays the button `Show Whitespace Differences`, however with 12 paddings on the top, the\n\t\t\t// button can get cut off.\n\t\t\tconst options: IDiffEditorOptions = {\n\t\t\t\tpadding: getEditorPadding(lineCount),\n\t\t\t};\n\t\t\tconst unchangedRegions = this._register(\n\t\t\t\tgetUnchangedRegionSettings(this.configurationService),\n\t\t\t);\n\t\t\tif (unchangedRegions.options.enabled) {\n\t\t\t\toptions.hideUnchangedRegions = unchangedRegions.options;\n\t\t\t}\n\t\t\tthis._editor.updateOptions(options);\n\t\t\tthis._register(\n\t\t\t\tunchangedRegions.onDidChangeEnablement(() => {\n\t\t\t\t\toptions.hideUnchangedRegions = unchangedRegions.options;\n\t\t\t\t\tthis._editor?.updateOptions(options);\n\t\t\t\t}),\n\t\t\t);\n\t\t\tthis._editor.layout({\n\t\t\t\twidth:\n\t\t\t\t\tthis.notebookEditor.getLayoutInfo().width -\n\t\t\t\t\t2 * DIFF_CELL_MARGIN,\n\t\t\t\theight: editorHeight,\n\t\t\t});\n\t\t\tthis._register(\n\t\t\t\tthis._editor.onDidContentSizeChange((e) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.cell.cellFoldingState ===\n\t\t\t\t\t\t\tPropertyFoldingState.Expanded &&\n\t\t\t\t\t\te.contentHeightChanged &&\n\t\t\t\t\t\tthis.cell.layoutInfo.editorHeight !== e.contentHeight\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis.cell.editorHeight = e.contentHeight;\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\t\t\tthis._initializeSourceDiffEditor();\n\t\t};\n\n\t\tthis._cellHeader = this._register(\n\t\t\tthis.instantiationService.createInstance(\n\t\t\t\tPropertyHeader,\n\t\t\t\tthis.cell,\n\t\t\t\tthis._cellHeaderContainer,\n\t\t\t\tthis.notebookEditor,\n\t\t\t\t{\n\t\t\t\t\tupdateInfoRendering: () => renderSourceEditor(),\n\t\t\t\t\tcheckIfModified: () => {\n\t\t\t\t\t\treturn this.cell.modified?.textModel.getTextBufferHash() !==\n\t\t\t\t\t\t\tthis.cell.original?.textModel.getTextBufferHash()\n\t\t\t\t\t\t\t? { reason: undefined }\n\t\t\t\t\t\t\t: false;\n\t\t\t\t\t},\n\t\t\t\t\tgetFoldingState: () => this.cell.cellFoldingState,\n\t\t\t\t\tupdateFoldingState: (state) =>\n\t\t\t\t\t\t(this.cell.cellFoldingState = state),\n\t\t\t\t\tunChangedLabel: \"Input\",\n\t\t\t\t\tchangedLabel: \"Input changed\",\n\t\t\t\t\tprefix: \"input\",\n\t\t\t\t\tmenuId: MenuId.NotebookDiffCellInputTitle,\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\t\tthis._cellHeader.buildHeader();\n\t\trenderSourceEditor();\n\n\t\tconst scopedContextKeyService = this.contextKeyService.createScoped(\n\t\t\tthis.templateData.inputToolbarContainer,\n\t\t);\n\t\tthis._register(scopedContextKeyService);\n\t\tconst inputChanged = NOTEBOOK_DIFF_CELL_INPUT.bindTo(\n\t\t\tscopedContextKeyService,\n\t\t);\n\t\tinputChanged.set(\n\t\t\tthis.cell.modified.textModel.getTextBufferHash() !==\n\t\t\t\tthis.cell.original.textModel.getTextBufferHash(),\n\t\t);\n\n\t\tconst ignoreWhitespace = NOTEBOOK_DIFF_CELL_IGNORE_WHITESPACE.bindTo(\n\t\t\tscopedContextKeyService,\n\t\t);\n\t\tconst ignore = this.textConfigurationService.getValue<boolean>(\n\t\t\tthis.cell.modified.uri,\n\t\t\t\"diffEditor.ignoreTrimWhitespace\",\n\t\t);\n\t\tignoreWhitespace.set(ignore);\n\n\t\tthis._toolbar = this.templateData.toolbar;\n\n\t\tthis._toolbar.context = this.cell;\n\n\t\tconst refreshToolbar = () => {\n\t\t\tconst ignore = this.textConfigurationService.getValue<boolean>(\n\t\t\t\tthis.cell.modified.uri,\n\t\t\t\t\"diffEditor.ignoreTrimWhitespace\",\n\t\t\t);\n\t\t\tignoreWhitespace.set(ignore);\n\t\t\tconst hasChanges =\n\t\t\t\tthis.cell.modified.textModel.getTextBufferHash() !==\n\t\t\t\tthis.cell.original.textModel.getTextBufferHash();\n\t\t\tinputChanged.set(hasChanges);\n\n\t\t\tif (hasChanges) {\n\t\t\t\tconst actions: IAction[] = [];\n\t\t\t\tconst menu = this.menuService.getMenuActions(\n\t\t\t\t\tMenuId.NotebookDiffCellInputTitle,\n\t\t\t\t\tscopedContextKeyService,\n\t\t\t\t\t{ shouldForwardArgs: true },\n\t\t\t\t);\n\t\t\t\tcreateAndFillInActionBarActions(menu, actions);\n\t\t\t\tthis._toolbar.setActions(actions);\n\t\t\t} else {\n\t\t\t\tthis._toolbar.setActions([]);\n\t\t\t}\n\t\t};\n\n\t\tthis._register(\n\t\t\tthis.cell.modified.textModel.onDidChangeContent(() =>\n\t\t\t\trefreshToolbar(),\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.textConfigurationService.onDidChangeConfiguration((e) => {\n\t\t\t\tif (\n\t\t\t\t\te.affectsConfiguration(\n\t\t\t\t\t\tthis.cell.modified.uri,\n\t\t\t\t\t\t\"diffEditor\",\n\t\t\t\t\t) &&\n\t\t\t\t\te.affectedKeys.has(\"diffEditor.ignoreTrimWhitespace\")\n\t\t\t\t) {\n\t\t\t\t\trefreshToolbar();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t\trefreshToolbar();\n\t}\n\n\tprivate async _initializeSourceDiffEditor() {\n\t\tconst [originalRef, modifiedRef] = await Promise.all([\n\t\t\tthis.textModelService.createModelReference(this.cell.original.uri),\n\t\t\tthis.textModelService.createModelReference(this.cell.modified.uri),\n\t\t]);\n\t\tthis._register(originalRef);\n\t\tthis._register(modifiedRef);\n\n\t\tif (this._isDisposed) {\n\t\t\toriginalRef.dispose();\n\t\t\tmodifiedRef.dispose();\n\t\t\treturn;\n\t\t}\n\n\t\tconst vm = this._register(\n\t\t\tthis._editor!.createViewModel({\n\t\t\t\toriginal: originalRef.object.textEditorModel,\n\t\t\t\tmodified: modifiedRef.object.textEditorModel,\n\t\t\t}),\n\t\t);\n\n\t\t// Reduces flicker (compute this before setting the model)\n\t\t// Else when the model is set, the height of the editor will be x, after diff is computed, then height will be y.\n\t\t// & that results in flicker.\n\t\tawait vm.waitForDiff();\n\t\tthis._editor!.setModel(vm);\n\n\t\tconst handleViewStateChange = () => {\n\t\t\tthis._editorViewStateChanged = true;\n\t\t};\n\n\t\tconst handleScrollChange = (e: editorCommon.IScrollEvent) => {\n\t\t\tif (e.scrollTopChanged || e.scrollLeftChanged) {\n\t\t\t\tthis._editorViewStateChanged = true;\n\t\t\t}\n\t\t};\n\n\t\tthis.updateEditorOptionsForWhitespace();\n\t\tthis._register(\n\t\t\tthis._editor!.getOriginalEditor().onDidChangeCursorSelection(\n\t\t\t\thandleViewStateChange,\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._editor!.getOriginalEditor().onDidScrollChange(\n\t\t\t\thandleScrollChange,\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._editor!.getModifiedEditor().onDidChangeCursorSelection(\n\t\t\t\thandleViewStateChange,\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tthis._editor!.getModifiedEditor().onDidScrollChange(\n\t\t\t\thandleScrollChange,\n\t\t\t),\n\t\t);\n\n\t\tconst editorViewState =\n\t\t\tthis.cell.getSourceEditorViewState() as editorCommon.IDiffEditorViewState | null;\n\t\tif (editorViewState) {\n\t\t\tthis._editor!.restoreViewState(editorViewState);\n\t\t}\n\n\t\tconst contentHeight = this._editor!.getContentHeight();\n\t\tthis.cell.editorHeight = contentHeight;\n\t}\n\tprivate updateEditorOptionsForWhitespace() {\n\t\tconst editor = this._editor;\n\t\tif (!editor) {\n\t\t\treturn;\n\t\t}\n\t\tconst uri =\n\t\t\teditor.getModel()?.modified.uri || editor.getModel()?.original.uri;\n\t\tif (!uri) {\n\t\t\treturn;\n\t\t}\n\t\tconst ignoreTrimWhitespace =\n\t\t\tthis.textConfigurationService.getValue<boolean>(\n\t\t\t\turi,\n\t\t\t\t\"diffEditor.ignoreTrimWhitespace\",\n\t\t\t);\n\t\teditor.updateOptions({ ignoreTrimWhitespace });\n\n\t\tthis._register(\n\t\t\tthis.textConfigurationService.onDidChangeConfiguration((e) => {\n\t\t\t\tif (\n\t\t\t\t\te.affectsConfiguration(uri, \"diffEditor\") &&\n\t\t\t\t\te.affectedKeys.has(\"diffEditor.ignoreTrimWhitespace\")\n\t\t\t\t) {\n\t\t\t\t\tconst ignoreTrimWhitespace =\n\t\t\t\t\t\tthis.textConfigurationService.getValue<boolean>(\n\t\t\t\t\t\t\turi,\n\t\t\t\t\t\t\t\"diffEditor.ignoreTrimWhitespace\",\n\t\t\t\t\t\t);\n\t\t\t\t\teditor.updateOptions({ ignoreTrimWhitespace });\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t}\n\tlayout(state: IDiffElementLayoutState) {\n\t\tDOM.scheduleAtNextAnimationFrame(\n\t\t\tDOM.getWindow(this._diffEditorContainer),\n\t\t\t() => {\n\t\t\t\tif (state.editorHeight && this._editor) {\n\t\t\t\t\tthis._editorContainer.style.height = `${this.cell.layoutInfo.editorHeight}px`;\n\t\t\t\t\tthis._editor.layout({\n\t\t\t\t\t\twidth: this._editor!.getViewWidth(),\n\t\t\t\t\t\theight: this.cell.layoutInfo.editorHeight,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (state.outerWidth && this._editor) {\n\t\t\t\t\tthis._editorContainer.style.height = `${this.cell.layoutInfo.editorHeight}px`;\n\t\t\t\t\tthis._editor.layout();\n\t\t\t\t}\n\n\t\t\t\tif (state.metadataHeight || state.outerWidth) {\n\t\t\t\t\tif (this._metadataEditorContainer) {\n\t\t\t\t\t\tthis._metadataEditorContainer.style.height = `${this.cell.layoutInfo.metadataHeight}px`;\n\t\t\t\t\t\tthis._metadataEditor?.layout({\n\t\t\t\t\t\t\twidth:\n\t\t\t\t\t\t\t\tthis._editor?.getViewWidth() ||\n\t\t\t\t\t\t\t\tthis.cell.getComputedCellContainerWidth(\n\t\t\t\t\t\t\t\t\tthis.notebookEditor.getLayoutInfo(),\n\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\theight: this.cell.layoutInfo.metadataHeight,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (state.outputTotalHeight || state.outerWidth) {\n\t\t\t\t\tif (this._outputEditorContainer) {\n\t\t\t\t\t\tthis._outputEditorContainer.style.height = `${this.cell.layoutInfo.outputTotalHeight}px`;\n\t\t\t\t\t\tthis._outputEditor?.layout({\n\t\t\t\t\t\t\twidth:\n\t\t\t\t\t\t\t\tthis._editor?.getViewWidth() ||\n\t\t\t\t\t\t\t\tthis.cell.getComputedCellContainerWidth(\n\t\t\t\t\t\t\t\t\tthis.notebookEditor.getLayoutInfo(),\n\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\theight: this.cell.layoutInfo.outputTotalHeight,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this._outputMetadataContainer) {\n\t\t\t\t\t\tthis._outputMetadataContainer.style.height = `${this.cell.layoutInfo.outputMetadataHeight}px`;\n\t\t\t\t\t\tthis._outputMetadataContainer.style.top = `${this.cell.layoutInfo.outputTotalHeight - this.cell.layoutInfo.outputMetadataHeight}px`;\n\t\t\t\t\t\tthis._outputMetadataEditor?.layout({\n\t\t\t\t\t\t\twidth:\n\t\t\t\t\t\t\t\tthis._editor?.getViewWidth() ||\n\t\t\t\t\t\t\t\tthis.cell.getComputedCellContainerWidth(\n\t\t\t\t\t\t\t\t\tthis.notebookEditor.getLayoutInfo(),\n\t\t\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\theight: this.cell.layoutInfo.outputMetadataHeight,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.layoutNotebookCell();\n\t\t\t},\n\t\t);\n\t}\n\n\toverride dispose() {\n\t\t// The editor isn't disposed yet, it can be re-used.\n\t\t// However the model can be disposed before the editor & that causes issues.\n\t\tif (this._editor) {\n\t\t\tthis._editor.setModel(null);\n\t\t}\n\n\t\tif (this._editor && this._editorViewStateChanged) {\n\t\t\tthis.cell.saveSpirceEditorViewState(this._editor.saveViewState());\n\t\t}\n\n\t\tsuper.dispose();\n\t}\n}\n\nexport class CollapsedCellOverlayWidget\n\textends Disposable\n\timplements IDiffCellMarginOverlay\n{\n\tprivate readonly _nodes = DOM.h(\"div.diff-hidden-cells\", [\n\t\tDOM.h(\"div.center@content\", { style: { display: \"flex\" } }, [\n\t\t\tDOM.$(\n\t\t\t\t\"a\",\n\t\t\t\t{\n\t\t\t\t\ttitle: localize(\n\t\t\t\t\t\t\"showUnchangedCells\",\n\t\t\t\t\t\t\"Show Unchanged Cells\",\n\t\t\t\t\t),\n\t\t\t\t\trole: \"button\",\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis._action.fire();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t...renderLabelWithIcons(\"$(unfold)\"),\n\t\t\t),\n\t\t]),\n\t]);\n\n\tprivate readonly _action = this._register(new Emitter<void>());\n\tpublic readonly onAction = this._action.event;\n\tconstructor(private readonly container: HTMLElement) {\n\t\tsuper();\n\n\t\tthis._nodes.root.style.display = \"none\";\n\t\tcontainer.appendChild(this._nodes.root);\n\t}\n\n\tpublic show() {\n\t\tthis._nodes.root.style.display = \"block\";\n\t}\n\n\tpublic hide() {\n\t\tthis._nodes.root.style.display = \"none\";\n\t}\n\n\tpublic override dispose() {\n\t\tthis.hide();\n\t\tthis.container.removeChild(this._nodes.root);\n\t\tDOM.reset(this._nodes.root);\n\t\tsuper.dispose();\n\t}\n}\n\nexport class UnchangedCellOverlayWidget\n\textends Disposable\n\timplements IDiffCellMarginOverlay\n{\n\tprivate readonly _nodes = DOM.h(\"div.diff-hidden-cells\", [\n\t\tDOM.h(\"div.center@content\", { style: { display: \"flex\" } }, [\n\t\t\tDOM.$(\n\t\t\t\t\"a\",\n\t\t\t\t{\n\t\t\t\t\ttitle: localize(\n\t\t\t\t\t\t\"hideUnchangedCells\",\n\t\t\t\t\t\t\"Hide Unchanged Cells\",\n\t\t\t\t\t),\n\t\t\t\t\trole: \"button\",\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis._action.fire();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t...renderLabelWithIcons(\"$(fold)\"),\n\t\t\t),\n\t\t]),\n\t]);\n\n\tprivate readonly _action = this._register(new Emitter<void>());\n\tpublic readonly onAction = this._action.event;\n\tconstructor(private readonly container: HTMLElement) {\n\t\tsuper();\n\n\t\tthis._nodes.root.style.display = \"none\";\n\t\tcontainer.appendChild(this._nodes.root);\n\t}\n\n\tpublic show() {\n\t\tthis._nodes.root.style.display = \"block\";\n\t}\n\n\tpublic hide() {\n\t\tthis._nodes.root.style.display = \"none\";\n\t}\n\tpublic override dispose() {\n\t\tthis.hide();\n\t\tthis.container.removeChild(this._nodes.root);\n\t\tDOM.reset(this._nodes.root);\n\t\tsuper.dispose();\n\t}\n}\n"],
  "mappings": "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",
  "names": ["ignoreTrimWhitespace", "mode", "modifiedOutputsSource", "ignore"]
}
