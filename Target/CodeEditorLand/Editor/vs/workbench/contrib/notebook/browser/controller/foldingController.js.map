{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/notebook/browser/controller/foldingController.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable, DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { NOTEBOOK_EDITOR_FOCUSED, NOTEBOOK_IS_ACTIVE_EDITOR } from '../../common/notebookContextKeys.js';\nimport { INotebookEditor, INotebookEditorMouseEvent, INotebookEditorContribution, getNotebookEditorFromEditorPane, CellFoldingState } from '../notebookBrowser.js';\nimport { FoldingModel } from '../viewModel/foldingModel.js'; import { CellKind } from '../../common/notebookCommon.js';\nimport { ICellRange } from '../../common/notebookRange.js';\nimport { registerNotebookContribution } from '../notebookEditorExtensions.js';\nimport { registerAction2, Action2 } from '../../../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { InputFocusedContextKey } from '../../../../../platform/contextkey/common/contextkeys.js';\nimport { KeyCode, KeyMod } from '../../../../../base/common/keyCodes.js';\nimport { KeybindingWeight } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { ServicesAccessor } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IEditorService } from '../../../../services/editor/common/editorService.js';\nimport { NOTEBOOK_ACTIONS_CATEGORY } from './coreActions.js';\nimport { localize, localize2 } from '../../../../../nls.js';\nimport { FoldingRegion } from '../../../../../editor/contrib/folding/browser/foldingRanges.js';\nimport { ICommandMetadata } from '../../../../../platform/commands/common/commands.js';\nimport { NotebookViewModel } from '../viewModel/notebookViewModelImpl.js';\n\nexport class FoldingController extends Disposable implements INotebookEditorContribution {\n\tstatic id: string = 'workbench.notebook.foldingController';\n\n\tprivate _foldingModel: FoldingModel | null = null;\n\tprivate readonly _localStore = this._register(new DisposableStore());\n\n\tconstructor(private readonly _notebookEditor: INotebookEditor) {\n\t\tsuper();\n\n\t\tthis._register(this._notebookEditor.onMouseUp(e => { this.onMouseUp(e); }));\n\n\t\tthis._register(this._notebookEditor.onDidChangeModel(() => {\n\t\t\tthis._localStore.clear();\n\n\t\t\tif (!this._notebookEditor.hasModel()) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._localStore.add(this._notebookEditor.onDidChangeCellState(e => {\n\t\t\t\tif (e.source.editStateChanged && e.cell.cellKind === CellKind.Markup) {\n\t\t\t\t\tthis._foldingModel?.recompute();\n\t\t\t\t\t// this._updateEditorFoldingRanges();\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tthis._foldingModel = new FoldingModel();\n\t\t\tthis._localStore.add(this._foldingModel);\n\t\t\tthis._foldingModel.attachViewModel(this._notebookEditor.getViewModel());\n\n\t\t\tthis._localStore.add(this._foldingModel.onDidFoldingRegionChanged(() => {\n\t\t\t\tthis._updateEditorFoldingRanges();\n\t\t\t}));\n\t\t}));\n\t}\n\n\tsaveViewState(): ICellRange[] {\n\t\treturn this._foldingModel?.getMemento() || [];\n\t}\n\n\trestoreViewState(state: ICellRange[] | undefined) {\n\t\tthis._foldingModel?.applyMemento(state || []);\n\t\tthis._updateEditorFoldingRanges();\n\t}\n\n\tsetFoldingStateDown(index: number, state: CellFoldingState, levels: number) {\n\t\tconst doCollapse = state === CellFoldingState.Collapsed;\n\t\tconst region = this._foldingModel!.getRegionAtLine(index + 1);\n\t\tconst regions: FoldingRegion[] = [];\n\t\tif (region) {\n\t\t\tif (region.isCollapsed !== doCollapse) {\n\t\t\t\tregions.push(region);\n\t\t\t}\n\t\t\tif (levels > 1) {\n\t\t\t\tconst regionsInside = this._foldingModel!.getRegionsInside(region, (r, level: number) => r.isCollapsed !== doCollapse && level < levels);\n\t\t\t\tregions.push(...regionsInside);\n\t\t\t}\n\t\t}\n\n\t\tregions.forEach(r => this._foldingModel!.setCollapsed(r.regionIndex, state === CellFoldingState.Collapsed));\n\t\tthis._updateEditorFoldingRanges();\n\t}\n\n\tsetFoldingStateUp(index: number, state: CellFoldingState, levels: number) {\n\t\tif (!this._foldingModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst regions = this._foldingModel.getAllRegionsAtLine(index + 1, (region, level) => region.isCollapsed !== (state === CellFoldingState.Collapsed) && level <= levels);\n\t\tregions.forEach(r => this._foldingModel!.setCollapsed(r.regionIndex, state === CellFoldingState.Collapsed));\n\t\tthis._updateEditorFoldingRanges();\n\t}\n\n\tprivate _updateEditorFoldingRanges() {\n\t\tif (!this._foldingModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._notebookEditor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst vm = this._notebookEditor.getViewModel() as NotebookViewModel;\n\n\t\tvm.updateFoldingRanges(this._foldingModel.regions);\n\t\tconst hiddenRanges = vm.getHiddenRanges();\n\t\tthis._notebookEditor.setHiddenAreas(hiddenRanges);\n\t}\n\n\tonMouseUp(e: INotebookEditorMouseEvent) {\n\t\tif (!e.event.target) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._notebookEditor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst viewModel = this._notebookEditor.getViewModel() as NotebookViewModel;\n\t\tconst target = e.event.target as HTMLElement;\n\n\t\tif (target.classList.contains('codicon-notebook-collapsed') || target.classList.contains('codicon-notebook-expanded')) {\n\t\t\tconst parent = target.parentElement as HTMLElement;\n\n\t\t\tif (!parent.classList.contains('notebook-folding-indicator')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// folding icon\n\n\t\t\tconst cellViewModel = e.target;\n\t\t\tconst modelIndex = viewModel.getCellIndex(cellViewModel);\n\t\t\tconst state = viewModel.getFoldingState(modelIndex);\n\n\t\t\tif (state === CellFoldingState.None) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.setFoldingStateUp(modelIndex, state === CellFoldingState.Collapsed ? CellFoldingState.Expanded : CellFoldingState.Collapsed, 1);\n\t\t\tthis._notebookEditor.focusElement(cellViewModel);\n\t\t}\n\n\t\treturn;\n\t}\n}\n\nregisterNotebookContribution(FoldingController.id, FoldingController);\n\n\nconst NOTEBOOK_FOLD_COMMAND_LABEL = localize('fold.cell', \"Fold Cell\");\nconst NOTEBOOK_UNFOLD_COMMAND_LABEL = localize2('unfold.cell', \"Unfold Cell\");\n\nconst FOLDING_COMMAND_ARGS: Pick<ICommandMetadata, 'args'> = {\n\targs: [{\n\t\tisOptional: true,\n\t\tname: 'index',\n\t\tdescription: 'The cell index',\n\t\tschema: {\n\t\t\t'type': 'object',\n\t\t\t'required': ['index', 'direction'],\n\t\t\t'properties': {\n\t\t\t\t'index': {\n\t\t\t\t\t'type': 'number'\n\t\t\t\t},\n\t\t\t\t'direction': {\n\t\t\t\t\t'type': 'string',\n\t\t\t\t\t'enum': ['up', 'down'],\n\t\t\t\t\t'default': 'down'\n\t\t\t\t},\n\t\t\t\t'levels': {\n\t\t\t\t\t'type': 'number',\n\t\t\t\t\t'default': 1\n\t\t\t\t},\n\t\t\t}\n\t\t}\n\t}]\n};\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'notebook.fold',\n\t\t\ttitle: localize2('fold.cell', \"Fold Cell\"),\n\t\t\tcategory: NOTEBOOK_ACTIONS_CATEGORY,\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(NOTEBOOK_EDITOR_FOCUSED, ContextKeyExpr.not(InputFocusedContextKey)),\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.BracketLeft,\n\t\t\t\tmac: {\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.BracketLeft,\n\t\t\t\t\tsecondary: [KeyCode.LeftArrow],\n\t\t\t\t},\n\t\t\t\tsecondary: [KeyCode.LeftArrow],\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t\t},\n\t\t\tmetadata: {\n\t\t\t\tdescription: NOTEBOOK_FOLD_COMMAND_LABEL,\n\t\t\t\targs: FOLDING_COMMAND_ARGS.args\n\t\t\t},\n\t\t\tprecondition: NOTEBOOK_IS_ACTIVE_EDITOR,\n\t\t\tf1: true\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor, args?: { index: number; levels: number; direction: 'up' | 'down' }): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\n\t\tconst editor = getNotebookEditorFromEditorPane(editorService.activeEditorPane);\n\t\tif (!editor) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!editor.hasModel()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst levels = args && args.levels || 1;\n\t\tconst direction = args && args.direction === 'up' ? 'up' : 'down';\n\t\tlet index: number | undefined = undefined;\n\n\t\tif (args) {\n\t\t\tindex = args.index;\n\t\t} else {\n\t\t\tconst activeCell = editor.getActiveCell();\n\t\t\tif (!activeCell) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tindex = editor.getCellIndex(activeCell);\n\t\t}\n\n\t\tconst controller = editor.getContribution<FoldingController>(FoldingController.id);\n\t\tif (index !== undefined) {\n\t\t\tconst targetCell = (index < 0 || index >= editor.getLength()) ? undefined : editor.cellAt(index);\n\t\t\tif (targetCell?.cellKind === CellKind.Code && direction === 'down') {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (direction === 'up') {\n\t\t\t\tcontroller.setFoldingStateUp(index, CellFoldingState.Collapsed, levels);\n\t\t\t} else {\n\t\t\t\tcontroller.setFoldingStateDown(index, CellFoldingState.Collapsed, levels);\n\t\t\t}\n\n\t\t\tconst viewIndex = editor.getViewModel().getNearestVisibleCellIndexUpwards(index);\n\t\t\teditor.focusElement(editor.cellAt(viewIndex));\n\t\t}\n\t}\n});\n\nregisterAction2(class extends Action2 {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'notebook.unfold',\n\t\t\ttitle: NOTEBOOK_UNFOLD_COMMAND_LABEL,\n\t\t\tcategory: NOTEBOOK_ACTIONS_CATEGORY,\n\t\t\tkeybinding: {\n\t\t\t\twhen: ContextKeyExpr.and(NOTEBOOK_EDITOR_FOCUSED, ContextKeyExpr.not(InputFocusedContextKey)),\n\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Shift | KeyCode.BracketRight,\n\t\t\t\tmac: {\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyMod.Alt | KeyCode.BracketRight,\n\t\t\t\t\tsecondary: [KeyCode.RightArrow],\n\t\t\t\t},\n\t\t\t\tsecondary: [KeyCode.RightArrow],\n\t\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t\t},\n\t\t\tmetadata: {\n\t\t\t\tdescription: NOTEBOOK_UNFOLD_COMMAND_LABEL,\n\t\t\t\targs: FOLDING_COMMAND_ARGS.args\n\t\t\t},\n\t\t\tprecondition: NOTEBOOK_IS_ACTIVE_EDITOR,\n\t\t\tf1: true\n\t\t});\n\t}\n\n\tasync run(accessor: ServicesAccessor, args?: { index: number; levels: number; direction: 'up' | 'down' }): Promise<void> {\n\t\tconst editorService = accessor.get(IEditorService);\n\n\t\tconst editor = getNotebookEditorFromEditorPane(editorService.activeEditorPane);\n\t\tif (!editor) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst levels = args && args.levels || 1;\n\t\tconst direction = args && args.direction === 'up' ? 'up' : 'down';\n\t\tlet index: number | undefined = undefined;\n\n\t\tif (args) {\n\t\t\tindex = args.index;\n\t\t} else {\n\t\t\tconst activeCell = editor.getActiveCell();\n\t\t\tif (!activeCell) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tindex = editor.getCellIndex(activeCell);\n\t\t}\n\n\t\tconst controller = editor.getContribution<FoldingController>(FoldingController.id);\n\t\tif (index !== undefined) {\n\t\t\tif (direction === 'up') {\n\t\t\t\tcontroller.setFoldingStateUp(index, CellFoldingState.Expanded, levels);\n\t\t\t} else {\n\t\t\t\tcontroller.setFoldingStateDown(index, CellFoldingState.Expanded, levels);\n\t\t\t}\n\t\t}\n\t}\n});\n"],
  "mappings": ";;AAKA,SAAS,YAAY,uBAAuB;AAC5C,SAAS,yBAAyB,iCAAiC;AACnE,SAAS,iBAAiB,2BAA2B,6BAA6B,iCAAiC,wBAAwB;AAC3I,SAAS,oBAAoB;AAAgC,SAAS,gBAAgB;AACtF,SAAS,kBAAkB;AAC3B,SAAS,oCAAoC;AAC7C,SAAS,iBAAiB,eAAe;AACzC,SAAS,sBAAsB;AAC/B,SAAS,8BAA8B;AACvC,SAAS,SAAS,cAAc;AAChC,SAAS,wBAAwB;AACjC,SAAS,wBAAwB;AACjC,SAAS,sBAAsB;AAC/B,SAAS,iCAAiC;AAC1C,SAAS,UAAU,iBAAiB;AACpC,SAAS,qBAAqB;AAC9B,SAAS,wBAAwB;AACjC,SAAS,yBAAyB;AAE3B,MAAM,0BAA0B,WAAkD;AAAA,EAMxF,YAA6B,iBAAkC;AAC9D,UAAM;AADsB;AAG5B,SAAK,UAAU,KAAK,gBAAgB,UAAU,OAAK;AAAE,WAAK,UAAU,CAAC;AAAA,IAAG,CAAC,CAAC;AAE1E,SAAK,UAAU,KAAK,gBAAgB,iBAAiB,MAAM;AAC1D,WAAK,YAAY,MAAM;AAEvB,UAAI,CAAC,KAAK,gBAAgB,SAAS,GAAG;AACrC;AAAA,MACD;AAEA,WAAK,YAAY,IAAI,KAAK,gBAAgB,qBAAqB,OAAK;AACnE,YAAI,EAAE,OAAO,oBAAoB,EAAE,KAAK,aAAa,SAAS,QAAQ;AACrE,eAAK,eAAe,UAAU;AAAA,QAE/B;AAAA,MACD,CAAC,CAAC;AAEF,WAAK,gBAAgB,IAAI,aAAa;AACtC,WAAK,YAAY,IAAI,KAAK,aAAa;AACvC,WAAK,cAAc,gBAAgB,KAAK,gBAAgB,aAAa,CAAC;AAEtE,WAAK,YAAY,IAAI,KAAK,cAAc,0BAA0B,MAAM;AACvE,aAAK,2BAA2B;AAAA,MACjC,CAAC,CAAC;AAAA,IACH,CAAC,CAAC;AAAA,EACH;AAAA,EAzDD,OAwByF;AAAA;AAAA;AAAA,EACxF,OAAO,KAAa;AAAA,EAEZ,gBAAqC;AAAA,EAC5B,cAAc,KAAK,UAAU,IAAI,gBAAgB,CAAC;AAAA,EA+BnE,gBAA8B;AAC7B,WAAO,KAAK,eAAe,WAAW,KAAK,CAAC;AAAA,EAC7C;AAAA,EAEA,iBAAiB,OAAiC;AACjD,SAAK,eAAe,aAAa,SAAS,CAAC,CAAC;AAC5C,SAAK,2BAA2B;AAAA,EACjC;AAAA,EAEA,oBAAoB,OAAe,OAAyB,QAAgB;AAC3E,UAAM,aAAa,UAAU,iBAAiB;AAC9C,UAAM,SAAS,KAAK,cAAe,gBAAgB,QAAQ,CAAC;AAC5D,UAAM,UAA2B,CAAC;AAClC,QAAI,QAAQ;AACX,UAAI,OAAO,gBAAgB,YAAY;AACtC,gBAAQ,KAAK,MAAM;AAAA,MACpB;AACA,UAAI,SAAS,GAAG;AACf,cAAM,gBAAgB,KAAK,cAAe,iBAAiB,QAAQ,CAAC,GAAG,UAAkB,EAAE,gBAAgB,cAAc,QAAQ,MAAM;AACvI,gBAAQ,KAAK,GAAG,aAAa;AAAA,MAC9B;AAAA,IACD;AAEA,YAAQ,QAAQ,OAAK,KAAK,cAAe,aAAa,EAAE,aAAa,UAAU,iBAAiB,SAAS,CAAC;AAC1G,SAAK,2BAA2B;AAAA,EACjC;AAAA,EAEA,kBAAkB,OAAe,OAAyB,QAAgB;AACzE,QAAI,CAAC,KAAK,eAAe;AACxB;AAAA,IACD;AAEA,UAAM,UAAU,KAAK,cAAc,oBAAoB,QAAQ,GAAG,CAAC,QAAQ,UAAU,OAAO,iBAAiB,UAAU,iBAAiB,cAAc,SAAS,MAAM;AACrK,YAAQ,QAAQ,OAAK,KAAK,cAAe,aAAa,EAAE,aAAa,UAAU,iBAAiB,SAAS,CAAC;AAC1G,SAAK,2BAA2B;AAAA,EACjC;AAAA,EAEQ,6BAA6B;AACpC,QAAI,CAAC,KAAK,eAAe;AACxB;AAAA,IACD;AAEA,QAAI,CAAC,KAAK,gBAAgB,SAAS,GAAG;AACrC;AAAA,IACD;AAEA,UAAM,KAAK,KAAK,gBAAgB,aAAa;AAE7C,OAAG,oBAAoB,KAAK,cAAc,OAAO;AACjD,UAAM,eAAe,GAAG,gBAAgB;AACxC,SAAK,gBAAgB,eAAe,YAAY;AAAA,EACjD;AAAA,EAEA,UAAU,GAA8B;AACvC,QAAI,CAAC,EAAE,MAAM,QAAQ;AACpB;AAAA,IACD;AAEA,QAAI,CAAC,KAAK,gBAAgB,SAAS,GAAG;AACrC;AAAA,IACD;AAEA,UAAM,YAAY,KAAK,gBAAgB,aAAa;AACpD,UAAM,SAAS,EAAE,MAAM;AAEvB,QAAI,OAAO,UAAU,SAAS,4BAA4B,KAAK,OAAO,UAAU,SAAS,2BAA2B,GAAG;AACtH,YAAM,SAAS,OAAO;AAEtB,UAAI,CAAC,OAAO,UAAU,SAAS,4BAA4B,GAAG;AAC7D;AAAA,MACD;AAIA,YAAM,gBAAgB,EAAE;AACxB,YAAM,aAAa,UAAU,aAAa,aAAa;AACvD,YAAM,QAAQ,UAAU,gBAAgB,UAAU;AAElD,UAAI,UAAU,iBAAiB,MAAM;AACpC;AAAA,MACD;AAEA,WAAK,kBAAkB,YAAY,UAAU,iBAAiB,YAAY,iBAAiB,WAAW,iBAAiB,WAAW,CAAC;AACnI,WAAK,gBAAgB,aAAa,aAAa;AAAA,IAChD;AAEA;AAAA,EACD;AACD;AAEA,6BAA6B,kBAAkB,IAAI,iBAAiB;AAGpE,MAAM,8BAA8B,SAAS,aAAa,WAAW;AACrE,MAAM,gCAAgC,UAAU,eAAe,aAAa;AAE5E,MAAM,uBAAuD;AAAA,EAC5D,MAAM,CAAC;AAAA,IACN,YAAY;AAAA,IACZ,MAAM;AAAA,IACN,aAAa;AAAA,IACb,QAAQ;AAAA,MACP,QAAQ;AAAA,MACR,YAAY,CAAC,SAAS,WAAW;AAAA,MACjC,cAAc;AAAA,QACb,SAAS;AAAA,UACR,QAAQ;AAAA,QACT;AAAA,QACA,aAAa;AAAA,UACZ,QAAQ;AAAA,UACR,QAAQ,CAAC,MAAM,MAAM;AAAA,UACrB,WAAW;AAAA,QACZ;AAAA,QACA,UAAU;AAAA,UACT,QAAQ;AAAA,UACR,WAAW;AAAA,QACZ;AAAA,MACD;AAAA,IACD;AAAA,EACD,CAAC;AACF;AAEA,gBAAgB,cAAc,QAAQ;AAAA,EACrC,cAAc;AACb,UAAM;AAAA,MACL,IAAI;AAAA,MACJ,OAAO,UAAU,aAAa,WAAW;AAAA,MACzC,UAAU;AAAA,MACV,YAAY;AAAA,QACX,MAAM,eAAe,IAAI,yBAAyB,eAAe,IAAI,sBAAsB,CAAC;AAAA,QAC5F,SAAS,OAAO,UAAU,OAAO,QAAQ,QAAQ;AAAA,QACjD,KAAK;AAAA,UACJ,SAAS,OAAO,UAAU,OAAO,MAAM,QAAQ;AAAA,UAC/C,WAAW,CAAC,QAAQ,SAAS;AAAA,QAC9B;AAAA,QACA,WAAW,CAAC,QAAQ,SAAS;AAAA,QAC7B,QAAQ,iBAAiB;AAAA,MAC1B;AAAA,MACA,UAAU;AAAA,QACT,aAAa;AAAA,QACb,MAAM,qBAAqB;AAAA,MAC5B;AAAA,MACA,cAAc;AAAA,MACd,IAAI;AAAA,IACL,CAAC;AAAA,EACF;AAAA,EAEA,MAAM,IAAI,UAA4B,MAAmF;AACxH,UAAM,gBAAgB,SAAS,IAAI,cAAc;AAEjD,UAAM,SAAS,gCAAgC,cAAc,gBAAgB;AAC7E,QAAI,CAAC,QAAQ;AACZ;AAAA,IACD;AAEA,QAAI,CAAC,OAAO,SAAS,GAAG;AACvB;AAAA,IACD;AAEA,UAAM,SAAS,QAAQ,KAAK,UAAU;AACtC,UAAM,YAAY,QAAQ,KAAK,cAAc,OAAO,OAAO;AAC3D,QAAI,QAA4B;AAEhC,QAAI,MAAM;AACT,cAAQ,KAAK;AAAA,IACd,OAAO;AACN,YAAM,aAAa,OAAO,cAAc;AACxC,UAAI,CAAC,YAAY;AAChB;AAAA,MACD;AACA,cAAQ,OAAO,aAAa,UAAU;AAAA,IACvC;AAEA,UAAM,aAAa,OAAO,gBAAmC,kBAAkB,EAAE;AACjF,QAAI,UAAU,QAAW;AACxB,YAAM,aAAc,QAAQ,KAAK,SAAS,OAAO,UAAU,IAAK,SAAY,OAAO,OAAO,KAAK;AAC/F,UAAI,YAAY,aAAa,SAAS,QAAQ,cAAc,QAAQ;AACnE;AAAA,MACD;AAEA,UAAI,cAAc,MAAM;AACvB,mBAAW,kBAAkB,OAAO,iBAAiB,WAAW,MAAM;AAAA,MACvE,OAAO;AACN,mBAAW,oBAAoB,OAAO,iBAAiB,WAAW,MAAM;AAAA,MACzE;AAEA,YAAM,YAAY,OAAO,aAAa,EAAE,kCAAkC,KAAK;AAC/E,aAAO,aAAa,OAAO,OAAO,SAAS,CAAC;AAAA,IAC7C;AAAA,EACD;AACD,CAAC;AAED,gBAAgB,cAAc,QAAQ;AAAA,EACrC,cAAc;AACb,UAAM;AAAA,MACL,IAAI;AAAA,MACJ,OAAO;AAAA,MACP,UAAU;AAAA,MACV,YAAY;AAAA,QACX,MAAM,eAAe,IAAI,yBAAyB,eAAe,IAAI,sBAAsB,CAAC;AAAA,QAC5F,SAAS,OAAO,UAAU,OAAO,QAAQ,QAAQ;AAAA,QACjD,KAAK;AAAA,UACJ,SAAS,OAAO,UAAU,OAAO,MAAM,QAAQ;AAAA,UAC/C,WAAW,CAAC,QAAQ,UAAU;AAAA,QAC/B;AAAA,QACA,WAAW,CAAC,QAAQ,UAAU;AAAA,QAC9B,QAAQ,iBAAiB;AAAA,MAC1B;AAAA,MACA,UAAU;AAAA,QACT,aAAa;AAAA,QACb,MAAM,qBAAqB;AAAA,MAC5B;AAAA,MACA,cAAc;AAAA,MACd,IAAI;AAAA,IACL,CAAC;AAAA,EACF;AAAA,EAEA,MAAM,IAAI,UAA4B,MAAmF;AACxH,UAAM,gBAAgB,SAAS,IAAI,cAAc;AAEjD,UAAM,SAAS,gCAAgC,cAAc,gBAAgB;AAC7E,QAAI,CAAC,QAAQ;AACZ;AAAA,IACD;AAEA,UAAM,SAAS,QAAQ,KAAK,UAAU;AACtC,UAAM,YAAY,QAAQ,KAAK,cAAc,OAAO,OAAO;AAC3D,QAAI,QAA4B;AAEhC,QAAI,MAAM;AACT,cAAQ,KAAK;AAAA,IACd,OAAO;AACN,YAAM,aAAa,OAAO,cAAc;AACxC,UAAI,CAAC,YAAY;AAChB;AAAA,MACD;AACA,cAAQ,OAAO,aAAa,UAAU;AAAA,IACvC;AAEA,UAAM,aAAa,OAAO,gBAAmC,kBAAkB,EAAE;AACjF,QAAI,UAAU,QAAW;AACxB,UAAI,cAAc,MAAM;AACvB,mBAAW,kBAAkB,OAAO,iBAAiB,UAAU,MAAM;AAAA,MACtE,OAAO;AACN,mBAAW,oBAAoB,OAAO,iBAAiB,UAAU,MAAM;AAAA,MACxE;AAAA,IACD;AAAA,EACD;AACD,CAAC;",
  "names": []
}
