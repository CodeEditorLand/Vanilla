{
  "version": 3,
  "sources": ["../../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/notebook/browser/controller/chat/cellChatActions.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Codicon } from '../../../../../../base/common/codicons.js';\nimport { KeyChord, KeyCode, KeyMod } from '../../../../../../base/common/keyCodes.js';\nimport { EditorContextKeys } from '../../../../../../editor/common/editorContextKeys.js';\nimport { localize, localize2 } from '../../../../../../nls.js';\nimport { CONTEXT_ACCESSIBILITY_MODE_ENABLED } from '../../../../../../platform/accessibility/common/accessibility.js';\nimport { MenuId, MenuRegistry, registerAction2 } from '../../../../../../platform/actions/common/actions.js';\nimport { ICommandService } from '../../../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr } from '../../../../../../platform/contextkey/common/contextkey.js';\nimport { InputFocusedContextKey } from '../../../../../../platform/contextkey/common/contextkeys.js';\nimport { ServicesAccessor } from '../../../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingWeight } from '../../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { CTX_INLINE_CHAT_FOCUSED, CTX_INLINE_CHAT_INNER_CURSOR_FIRST, CTX_INLINE_CHAT_INNER_CURSOR_LAST, CTX_INLINE_CHAT_RESPONSE_TYPE, InlineChatResponseType } from '../../../../inlineChat/common/inlineChat.js';\nimport { CTX_NOTEBOOK_CELL_CHAT_FOCUSED, CTX_NOTEBOOK_CHAT_HAS_ACTIVE_REQUEST, CTX_NOTEBOOK_CHAT_HAS_AGENT, CTX_NOTEBOOK_CHAT_OUTER_FOCUS_POSITION, CTX_NOTEBOOK_CHAT_USER_DID_EDIT, MENU_CELL_CHAT_INPUT, MENU_CELL_CHAT_WIDGET, MENU_CELL_CHAT_WIDGET_STATUS } from './notebookChatContext.js';\nimport { NotebookChatController } from './notebookChatController.js';\nimport { CELL_TITLE_CELL_GROUP_ID, INotebookActionContext, INotebookCellActionContext, NotebookAction, NotebookCellAction, getEditorFromArgsOrActivePane } from '../coreActions.js';\nimport { insertNewCell } from '../insertCellActions.js';\nimport { CellEditState } from '../../notebookBrowser.js';\nimport { CellKind, NOTEBOOK_EDITOR_CURSOR_BOUNDARY, NotebookSetting } from '../../../common/notebookCommon.js';\nimport { NOTEBOOK_CELL_EDITOR_FOCUSED, NOTEBOOK_CELL_GENERATED_BY_CHAT, NOTEBOOK_EDITOR_EDITABLE, NOTEBOOK_EDITOR_FOCUSED } from '../../../common/notebookContextKeys.js';\n\nregisterAction2(class extends NotebookAction {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: 'notebook.cell.chat.accept',\n\t\t\t\ttitle: localize2('notebook.cell.chat.accept', \"Make Request\"),\n\t\t\t\ticon: Codicon.send,\n\t\t\t\tkeybinding: {\n\t\t\t\t\twhen: ContextKeyExpr.and(CTX_NOTEBOOK_CELL_CHAT_FOCUSED, CTX_INLINE_CHAT_FOCUSED, NOTEBOOK_CELL_EDITOR_FOCUSED.negate()),\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t\tprimary: KeyCode.Enter\n\t\t\t\t},\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MENU_CELL_CHAT_INPUT,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 1,\n\t\t\t\t\twhen: CTX_NOTEBOOK_CHAT_HAS_ACTIVE_REQUEST.negate()\n\t\t\t\t},\n\t\t\t\tf1: false\n\t\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookActionContext) {\n\t\tNotebookChatController.get(context.notebookEditor)?.acceptInput();\n\t}\n});\n\nregisterAction2(class extends NotebookCellAction {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: 'notebook.cell.chat.arrowOutUp',\n\t\t\t\ttitle: localize('arrowUp', 'Cursor Up'),\n\t\t\t\tkeybinding: {\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tCTX_NOTEBOOK_CELL_CHAT_FOCUSED,\n\t\t\t\t\t\tCTX_INLINE_CHAT_FOCUSED,\n\t\t\t\t\t\tCTX_INLINE_CHAT_INNER_CURSOR_FIRST,\n\t\t\t\t\t\tNOTEBOOK_CELL_EDITOR_FOCUSED.negate(),\n\t\t\t\t\t\tCONTEXT_ACCESSIBILITY_MODE_ENABLED.negate()\n\t\t\t\t\t),\n\t\t\t\t\tweight: KeybindingWeight.EditorCore + 7,\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.UpArrow\n\t\t\t\t},\n\t\t\t\tf1: false\n\t\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookCellActionContext) {\n\t\tconst editor = context.notebookEditor;\n\t\tconst activeCell = context.cell;\n\n\t\tconst idx = editor.getCellIndex(activeCell);\n\t\tif (typeof idx !== 'number') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (idx < 1 || editor.getLength() === 0) {\n\t\t\t// we don't do loop\n\t\t\treturn;\n\t\t}\n\n\t\tconst newCell = editor.cellAt(idx - 1);\n\t\tconst newFocusMode = newCell.cellKind === CellKind.Markup && newCell.getEditState() === CellEditState.Preview ? 'container' : 'editor';\n\t\tconst focusEditorLine = newCell.textBuffer.getLineCount();\n\t\tawait editor.focusNotebookCell(newCell, newFocusMode, { focusEditorLine: focusEditorLine });\n\t}\n});\n\nregisterAction2(class extends NotebookAction {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: 'notebook.cell.chat.arrowOutDown',\n\t\t\t\ttitle: localize('arrowDown', 'Cursor Down'),\n\t\t\t\tkeybinding: {\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tCTX_NOTEBOOK_CELL_CHAT_FOCUSED,\n\t\t\t\t\t\tCTX_INLINE_CHAT_FOCUSED,\n\t\t\t\t\t\tCTX_INLINE_CHAT_INNER_CURSOR_LAST,\n\t\t\t\t\t\tNOTEBOOK_CELL_EDITOR_FOCUSED.negate(),\n\t\t\t\t\t\tCONTEXT_ACCESSIBILITY_MODE_ENABLED.negate()\n\t\t\t\t\t),\n\t\t\t\t\tweight: KeybindingWeight.EditorCore + 7,\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.DownArrow\n\t\t\t\t},\n\t\t\t\tf1: false\n\t\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookActionContext) {\n\t\tawait NotebookChatController.get(context.notebookEditor)?.focusNext();\n\t}\n});\n\nregisterAction2(class extends NotebookCellAction {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: 'notebook.cell.focusChatWidget',\n\t\t\t\ttitle: localize('focusChatWidget', 'Focus Chat Widget'),\n\t\t\t\tkeybinding: {\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tNOTEBOOK_EDITOR_FOCUSED,\n\t\t\t\t\t\tCONTEXT_ACCESSIBILITY_MODE_ENABLED.negate(),\n\t\t\t\t\t\tContextKeyExpr.and(\n\t\t\t\t\t\t\tContextKeyExpr.has(InputFocusedContextKey),\n\t\t\t\t\t\t\tEditorContextKeys.editorTextFocus,\n\t\t\t\t\t\t\tNOTEBOOK_EDITOR_CURSOR_BOUNDARY.notEqualsTo('bottom'),\n\t\t\t\t\t\t\tNOTEBOOK_EDITOR_CURSOR_BOUNDARY.notEqualsTo('none'),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tEditorContextKeys.isEmbeddedDiffEditor.negate()\n\t\t\t\t\t),\n\t\t\t\t\tweight: KeybindingWeight.EditorCore + 7,\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.UpArrow\n\t\t\t\t},\n\t\t\t\tf1: false\n\t\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookCellActionContext) {\n\t\tconst index = context.notebookEditor.getCellIndex(context.cell);\n\t\tawait NotebookChatController.get(context.notebookEditor)?.focusNearestWidget(index, 'above');\n\t}\n});\n\nregisterAction2(class extends NotebookCellAction {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: 'notebook.cell.focusNextChatWidget',\n\t\t\t\ttitle: localize('focusNextChatWidget', 'Focus Next Cell Chat Widget'),\n\t\t\t\tkeybinding: {\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tNOTEBOOK_EDITOR_FOCUSED,\n\t\t\t\t\t\tCONTEXT_ACCESSIBILITY_MODE_ENABLED.negate(),\n\t\t\t\t\t\tContextKeyExpr.and(\n\t\t\t\t\t\t\tContextKeyExpr.has(InputFocusedContextKey),\n\t\t\t\t\t\t\tEditorContextKeys.editorTextFocus,\n\t\t\t\t\t\t\tNOTEBOOK_EDITOR_CURSOR_BOUNDARY.notEqualsTo('top'),\n\t\t\t\t\t\t\tNOTEBOOK_EDITOR_CURSOR_BOUNDARY.notEqualsTo('none'),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tEditorContextKeys.isEmbeddedDiffEditor.negate()\n\t\t\t\t\t),\n\t\t\t\t\tweight: KeybindingWeight.EditorCore + 7,\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.DownArrow\n\t\t\t\t},\n\t\t\t\tf1: false\n\t\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookCellActionContext) {\n\t\tconst index = context.notebookEditor.getCellIndex(context.cell);\n\t\tawait NotebookChatController.get(context.notebookEditor)?.focusNearestWidget(index, 'below');\n\t}\n});\n\nregisterAction2(class extends NotebookAction {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: 'notebook.cell.chat.stop',\n\t\t\t\ttitle: localize2('notebook.cell.chat.stop', \"Stop Request\"),\n\t\t\t\ticon: Codicon.debugStop,\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MENU_CELL_CHAT_INPUT,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 1,\n\t\t\t\t\twhen: CTX_NOTEBOOK_CHAT_HAS_ACTIVE_REQUEST\n\t\t\t\t},\n\t\t\t\tf1: false\n\t\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookActionContext) {\n\t\tNotebookChatController.get(context.notebookEditor)?.cancelCurrentRequest(false);\n\t}\n});\n\nregisterAction2(class extends NotebookAction {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: 'notebook.cell.chat.close',\n\t\t\t\ttitle: localize2('notebook.cell.chat.close', \"Close Chat\"),\n\t\t\t\ticon: Codicon.close,\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MENU_CELL_CHAT_WIDGET,\n\t\t\t\t\tgroup: 'navigation',\n\t\t\t\t\torder: 2\n\t\t\t\t},\n\t\t\t\tf1: false\n\t\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookActionContext) {\n\t\tNotebookChatController.get(context.notebookEditor)?.dismiss(false);\n\t}\n});\n\nregisterAction2(class extends NotebookAction {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: 'notebook.cell.chat.acceptChanges',\n\t\t\t\ttitle: localize2('apply1', \"Accept Changes\"),\n\t\t\t\tshortTitle: localize('apply2', 'Accept'),\n\t\t\t\ticon: Codicon.check,\n\t\t\t\ttooltip: localize('apply3', 'Accept Changes'),\n\t\t\t\tkeybinding: [\n\t\t\t\t\t{\n\t\t\t\t\t\twhen: ContextKeyExpr.and(CTX_NOTEBOOK_CELL_CHAT_FOCUSED, CTX_INLINE_CHAT_FOCUSED, NOTEBOOK_CELL_EDITOR_FOCUSED.negate()),\n\t\t\t\t\t\tweight: KeybindingWeight.EditorContrib + 10,\n\t\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Enter,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\twhen: ContextKeyExpr.and(CTX_NOTEBOOK_CELL_CHAT_FOCUSED, CTX_INLINE_CHAT_FOCUSED, CTX_NOTEBOOK_CHAT_USER_DID_EDIT, NOTEBOOK_CELL_EDITOR_FOCUSED.negate()),\n\t\t\t\t\t\tweight: KeybindingWeight.EditorCore + 10,\n\t\t\t\t\t\tprimary: KeyCode.Escape\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\tNOTEBOOK_EDITOR_FOCUSED,\n\t\t\t\t\t\t\tContextKeyExpr.not(InputFocusedContextKey),\n\t\t\t\t\t\t\tNOTEBOOK_CELL_EDITOR_FOCUSED.negate(),\n\t\t\t\t\t\t\tCTX_NOTEBOOK_CHAT_OUTER_FOCUS_POSITION.isEqualTo('below')\n\t\t\t\t\t\t),\n\t\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.Enter,\n\t\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tmenu: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MENU_CELL_CHAT_WIDGET_STATUS,\n\t\t\t\t\t\tgroup: '0_main',\n\t\t\t\t\t\torder: 0,\n\t\t\t\t\t\twhen: CTX_INLINE_CHAT_RESPONSE_TYPE.notEqualsTo(InlineChatResponseType.Messages),\n\t\t\t\t\t}\n\t\t\t\t],\n\t\t\t\tf1: false\n\t\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookActionContext) {\n\t\tNotebookChatController.get(context.notebookEditor)?.acceptSession();\n\t}\n});\n\nregisterAction2(class extends NotebookAction {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: 'notebook.cell.chat.discard',\n\t\t\t\ttitle: localize('discard', 'Discard'),\n\t\t\t\ticon: Codicon.discard,\n\t\t\t\tkeybinding: {\n\t\t\t\t\twhen: ContextKeyExpr.and(CTX_NOTEBOOK_CELL_CHAT_FOCUSED, CTX_INLINE_CHAT_FOCUSED, CTX_NOTEBOOK_CHAT_USER_DID_EDIT.negate(), NOTEBOOK_CELL_EDITOR_FOCUSED.negate()),\n\t\t\t\t\tweight: KeybindingWeight.EditorContrib,\n\t\t\t\t\tprimary: KeyCode.Escape\n\t\t\t\t},\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MENU_CELL_CHAT_WIDGET_STATUS,\n\t\t\t\t\tgroup: '0_main',\n\t\t\t\t\torder: 1\n\t\t\t\t},\n\t\t\t\tf1: false\n\t\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookActionContext) {\n\t\tNotebookChatController.get(context.notebookEditor)?.discard();\n\t}\n});\n\ninterface IInsertCellWithChatArgs extends INotebookActionContext {\n\tinput?: string;\n\tautoSend?: boolean;\n\tsource?: string;\n}\n\nasync function startChat(accessor: ServicesAccessor, context: INotebookActionContext, index: number, input?: string, autoSend?: boolean, source?: string) {\n\tconst configurationService = accessor.get(IConfigurationService);\n\tconst commandService = accessor.get(ICommandService);\n\n\tif (configurationService.getValue<boolean>(NotebookSetting.cellChat)) {\n\t\tcontext.notebookEditor.focusContainer();\n\t\tNotebookChatController.get(context.notebookEditor)?.run(index, input, autoSend);\n\t} else if (configurationService.getValue<boolean>(NotebookSetting.cellGenerate)) {\n\t\tconst activeCell = context.notebookEditor.getActiveCell();\n\t\tconst targetCell = activeCell?.getTextLength() === 0 && source !== 'insertToolbar' ? activeCell : (await insertNewCell(accessor, context, CellKind.Code, 'below', true));\n\n\t\tif (targetCell) {\n\t\t\ttargetCell.enableAutoLanguageDetection();\n\t\t\tawait context.notebookEditor.revealFirstLineIfOutsideViewport(targetCell);\n\t\t\tconst codeEditor = context.notebookEditor.codeEditors.find(ce => ce[0] === targetCell)?.[1];\n\t\t\tif (codeEditor) {\n\t\t\t\tcodeEditor.focus();\n\t\t\t\tcommandService.executeCommand('inlineChat.start');\n\t\t\t}\n\t\t}\n\t}\n}\n\nregisterAction2(class extends NotebookAction {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: 'notebook.cell.chat.start',\n\t\t\t\ttitle: {\n\t\t\t\t\tvalue: '$(sparkle) ' + localize('notebookActions.menu.insertCodeCellWithChat', \"Generate\"),\n\t\t\t\t\toriginal: '$(sparkle) Generate',\n\t\t\t\t},\n\t\t\t\ttooltip: localize('notebookActions.menu.insertCodeCellWithChat.tooltip', \"Start Chat to Generate Code\"),\n\t\t\t\tmetadata: {\n\t\t\t\t\tdescription: localize('notebookActions.menu.insertCodeCellWithChat.tooltip', \"Start Chat to Generate Code\"),\n\t\t\t\t\targs: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: 'args',\n\t\t\t\t\t\t\tschema: {\n\t\t\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\t\t\trequired: ['index'],\n\t\t\t\t\t\t\t\tproperties: {\n\t\t\t\t\t\t\t\t\t'index': {\n\t\t\t\t\t\t\t\t\t\ttype: 'number'\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t'input': {\n\t\t\t\t\t\t\t\t\t\ttype: 'string'\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t'autoSend': {\n\t\t\t\t\t\t\t\t\t\ttype: 'boolean'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\tf1: false,\n\t\t\t\tkeybinding: {\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tNOTEBOOK_EDITOR_FOCUSED,\n\t\t\t\t\t\tNOTEBOOK_EDITOR_EDITABLE.isEqualTo(true),\n\t\t\t\t\t\tContextKeyExpr.not(InputFocusedContextKey),\n\t\t\t\t\t\tCTX_NOTEBOOK_CHAT_HAS_AGENT,\n\t\t\t\t\t\tContextKeyExpr.or(\n\t\t\t\t\t\t\tContextKeyExpr.equals(`config.${NotebookSetting.cellChat}`, true),\n\t\t\t\t\t\t\tContextKeyExpr.equals(`config.${NotebookSetting.cellGenerate}`, true)\n\t\t\t\t\t\t)\n\t\t\t\t\t),\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib,\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.KeyI,\n\t\t\t\t\tsecondary: [KeyChord(KeyMod.CtrlCmd | KeyCode.KeyK, KeyCode.KeyI)],\n\t\t\t\t},\n\t\t\t\tmenu: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.NotebookCellBetween,\n\t\t\t\t\t\tgroup: 'inline',\n\t\t\t\t\t\torder: -1,\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\tNOTEBOOK_EDITOR_EDITABLE.isEqualTo(true),\n\t\t\t\t\t\t\tCTX_NOTEBOOK_CHAT_HAS_AGENT,\n\t\t\t\t\t\t\tContextKeyExpr.or(\n\t\t\t\t\t\t\t\tContextKeyExpr.equals(`config.${NotebookSetting.cellChat}`, true),\n\t\t\t\t\t\t\t\tContextKeyExpr.equals(`config.${NotebookSetting.cellGenerate}`, true)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t});\n\t}\n\n\toverride getEditorContextFromArgsOrActive(accessor: ServicesAccessor, ...args: any[]): IInsertCellWithChatArgs | undefined {\n\t\tconst [firstArg] = args;\n\t\tif (!firstArg) {\n\t\t\tconst notebookEditor = getEditorFromArgsOrActivePane(accessor);\n\t\t\tif (!notebookEditor) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\tconst activeCell = notebookEditor.getActiveCell();\n\t\t\tif (!activeCell) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tcell: activeCell,\n\t\t\t\tnotebookEditor,\n\t\t\t\tinput: undefined,\n\t\t\t\tautoSend: undefined\n\t\t\t};\n\t\t}\n\n\t\tif (typeof firstArg !== 'object' || typeof firstArg.index !== 'number') {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst notebookEditor = getEditorFromArgsOrActivePane(accessor);\n\t\tif (!notebookEditor) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst cell = firstArg.index <= 0 ? undefined : notebookEditor.cellAt(firstArg.index - 1);\n\n\t\treturn {\n\t\t\tcell,\n\t\t\tnotebookEditor,\n\t\t\tinput: firstArg.input,\n\t\t\tautoSend: firstArg.autoSend\n\t\t};\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: IInsertCellWithChatArgs) {\n\t\tconst index = Math.max(0, context.cell ? context.notebookEditor.getCellIndex(context.cell) + 1 : 0);\n\t\tawait startChat(accessor, context, index, context.input, context.autoSend, context.source);\n\t}\n});\n\nregisterAction2(class extends NotebookAction {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: 'notebook.cell.chat.startAtTop',\n\t\t\t\ttitle: {\n\t\t\t\t\tvalue: '$(sparkle) ' + localize('notebookActions.menu.insertCodeCellWithChat', \"Generate\"),\n\t\t\t\t\toriginal: '$(sparkle) Generate',\n\t\t\t\t},\n\t\t\t\ttooltip: localize('notebookActions.menu.insertCodeCellWithChat.tooltip', \"Start Chat to Generate Code\"),\n\t\t\t\tf1: false,\n\t\t\t\tmenu: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: MenuId.NotebookCellListTop,\n\t\t\t\t\t\tgroup: 'inline',\n\t\t\t\t\t\torder: -1,\n\t\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\t\tNOTEBOOK_EDITOR_EDITABLE.isEqualTo(true),\n\t\t\t\t\t\t\tCTX_NOTEBOOK_CHAT_HAS_AGENT,\n\t\t\t\t\t\t\tContextKeyExpr.or(\n\t\t\t\t\t\t\t\tContextKeyExpr.equals(`config.${NotebookSetting.cellChat}`, true),\n\t\t\t\t\t\t\t\tContextKeyExpr.equals(`config.${NotebookSetting.cellGenerate}`, true)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t},\n\t\t\t\t]\n\t\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookActionContext) {\n\t\tawait startChat(accessor, context, 0, '', false);\n\t}\n});\n\nMenuRegistry.appendMenuItem(MenuId.NotebookToolbar, {\n\tcommand: {\n\t\tid: 'notebook.cell.chat.start',\n\t\ticon: Codicon.sparkle,\n\t\ttitle: localize('notebookActions.menu.insertCode.ontoolbar', \"Generate\"),\n\t\ttooltip: localize('notebookActions.menu.insertCode.tooltip', \"Start Chat to Generate Code\")\n\t},\n\torder: -10,\n\tgroup: 'navigation/add',\n\twhen: ContextKeyExpr.and(\n\t\tNOTEBOOK_EDITOR_EDITABLE.isEqualTo(true),\n\t\tContextKeyExpr.notEquals('config.notebook.insertToolbarLocation', 'betweenCells'),\n\t\tContextKeyExpr.notEquals('config.notebook.insertToolbarLocation', 'hidden'),\n\t\tCTX_NOTEBOOK_CHAT_HAS_AGENT,\n\t\tContextKeyExpr.or(\n\t\t\tContextKeyExpr.equals(`config.${NotebookSetting.cellChat}`, true),\n\t\t\tContextKeyExpr.equals(`config.${NotebookSetting.cellGenerate}`, true)\n\t\t)\n\t)\n});\n\nregisterAction2(class extends NotebookAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'notebook.cell.chat.focus',\n\t\t\ttitle: localize('focusNotebookChat', 'Focus Chat'),\n\t\t\tkeybinding: [\n\t\t\t\t{\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tNOTEBOOK_EDITOR_FOCUSED,\n\t\t\t\t\t\tContextKeyExpr.not(InputFocusedContextKey),\n\t\t\t\t\t\tCTX_NOTEBOOK_CHAT_OUTER_FOCUS_POSITION.isEqualTo('above')\n\t\t\t\t\t),\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.DownArrow,\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tNOTEBOOK_EDITOR_FOCUSED,\n\t\t\t\t\t\tContextKeyExpr.not(InputFocusedContextKey),\n\t\t\t\t\t\tCTX_NOTEBOOK_CHAT_OUTER_FOCUS_POSITION.isEqualTo('below')\n\t\t\t\t\t),\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.UpArrow,\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t\t\t}\n\t\t\t],\n\t\t\tf1: false\n\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookActionContext): Promise<void> {\n\t\tNotebookChatController.get(context.notebookEditor)?.focus();\n\t}\n});\n\nregisterAction2(class extends NotebookAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'notebook.cell.chat.focusNextCell',\n\t\t\ttitle: localize('focusNextCell', 'Focus Next Cell'),\n\t\t\tkeybinding: [\n\t\t\t\t{\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tCTX_NOTEBOOK_CELL_CHAT_FOCUSED,\n\t\t\t\t\t\tCTX_INLINE_CHAT_FOCUSED,\n\t\t\t\t\t),\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.DownArrow,\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t\t\t}\n\t\t\t],\n\t\t\tf1: false\n\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookActionContext): Promise<void> {\n\t\tNotebookChatController.get(context.notebookEditor)?.focusNext();\n\t}\n});\n\nregisterAction2(class extends NotebookAction {\n\tconstructor() {\n\t\tsuper({\n\t\t\tid: 'notebook.cell.chat.focusPreviousCell',\n\t\t\ttitle: localize('focusPreviousCell', 'Focus Previous Cell'),\n\t\t\tkeybinding: [\n\t\t\t\t{\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tCTX_NOTEBOOK_CELL_CHAT_FOCUSED,\n\t\t\t\t\t\tCTX_INLINE_CHAT_FOCUSED,\n\t\t\t\t\t),\n\t\t\t\t\tprimary: KeyMod.CtrlCmd | KeyCode.UpArrow,\n\t\t\t\t\tweight: KeybindingWeight.WorkbenchContrib\n\t\t\t\t}\n\t\t\t],\n\t\t\tf1: false\n\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookActionContext): Promise<void> {\n\t\tNotebookChatController.get(context.notebookEditor)?.focusAbove();\n\t}\n});\n\nregisterAction2(class extends NotebookAction {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: 'notebook.cell.chat.previousFromHistory',\n\t\t\t\ttitle: localize2('notebook.cell.chat.previousFromHistory', \"Previous From History\"),\n\t\t\t\tprecondition: ContextKeyExpr.and(CTX_NOTEBOOK_CELL_CHAT_FOCUSED, CTX_INLINE_CHAT_FOCUSED),\n\t\t\t\tkeybinding: {\n\t\t\t\t\twhen: ContextKeyExpr.and(CTX_NOTEBOOK_CELL_CHAT_FOCUSED, CTX_INLINE_CHAT_FOCUSED),\n\t\t\t\t\tweight: KeybindingWeight.EditorCore + 10,\n\t\t\t\t\tprimary: KeyCode.UpArrow,\n\t\t\t\t},\n\t\t\t\tf1: false\n\t\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookActionContext) {\n\t\tNotebookChatController.get(context.notebookEditor)?.populateHistory(true);\n\t}\n});\n\nregisterAction2(class extends NotebookAction {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: 'notebook.cell.chat.nextFromHistory',\n\t\t\t\ttitle: localize2('notebook.cell.chat.nextFromHistory', \"Next From History\"),\n\t\t\t\tprecondition: ContextKeyExpr.and(CTX_NOTEBOOK_CELL_CHAT_FOCUSED, CTX_INLINE_CHAT_FOCUSED),\n\t\t\t\tkeybinding: {\n\t\t\t\t\twhen: ContextKeyExpr.and(CTX_NOTEBOOK_CELL_CHAT_FOCUSED, CTX_INLINE_CHAT_FOCUSED),\n\t\t\t\t\tweight: KeybindingWeight.EditorCore + 10,\n\t\t\t\t\tprimary: KeyCode.DownArrow\n\t\t\t\t},\n\t\t\t\tf1: false\n\t\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookActionContext) {\n\t\tNotebookChatController.get(context.notebookEditor)?.populateHistory(false);\n\t}\n});\n\nregisterAction2(class extends NotebookCellAction {\n\tconstructor() {\n\t\tsuper(\n\t\t\t{\n\t\t\t\tid: 'notebook.cell.chat.restore',\n\t\t\t\ttitle: localize2('notebookActions.restoreCellprompt', \"Generate\"),\n\t\t\t\ticon: Codicon.sparkle,\n\t\t\t\tmenu: {\n\t\t\t\t\tid: MenuId.NotebookCellTitle,\n\t\t\t\t\tgroup: CELL_TITLE_CELL_GROUP_ID,\n\t\t\t\t\torder: 0,\n\t\t\t\t\twhen: ContextKeyExpr.and(\n\t\t\t\t\t\tNOTEBOOK_EDITOR_EDITABLE.isEqualTo(true),\n\t\t\t\t\t\tCTX_NOTEBOOK_CHAT_HAS_AGENT,\n\t\t\t\t\t\tNOTEBOOK_CELL_GENERATED_BY_CHAT,\n\t\t\t\t\t\tContextKeyExpr.equals(`config.${NotebookSetting.cellChat}`, true)\n\t\t\t\t\t)\n\t\t\t\t},\n\t\t\t\tf1: false\n\t\t\t});\n\t}\n\n\tasync runWithContext(accessor: ServicesAccessor, context: INotebookCellActionContext) {\n\t\tconst cell = context.cell;\n\n\t\tif (!cell) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst notebookEditor = context.notebookEditor;\n\t\tconst controller = NotebookChatController.get(notebookEditor);\n\n\t\tif (!controller) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst prompt = controller.getPromptFromCache(cell);\n\n\t\tif (prompt) {\n\t\t\tcontroller.restore(cell, prompt);\n\t\t}\n\t}\n});\n"],
  "mappings": "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",
  "names": ["notebookEditor"]
}
