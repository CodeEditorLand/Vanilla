{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/notebook/browser/diff/notebookMultiDiffEditor.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type * as DOM from \"../../../../../base/browser/dom.js\";\nimport { PixelRatio } from \"../../../../../base/browser/pixelRatio.js\";\nimport {\n\ttype CancellationToken,\n\tCancellationTokenSource,\n} from \"../../../../../base/common/cancellation.js\";\nimport { DisposableStore } from \"../../../../../base/common/lifecycle.js\";\nimport { Schemas } from \"../../../../../base/common/network.js\";\nimport { autorun, transaction } from \"../../../../../base/common/observable.js\";\nimport type { URI } from \"../../../../../base/common/uri.js\";\nimport { FontMeasurements } from \"../../../../../editor/browser/config/fontMeasurements.js\";\nimport type {\n\tDocumentDiffItemViewModel,\n\tMultiDiffEditorViewModel,\n} from \"../../../../../editor/browser/widget/multiDiffEditor/multiDiffEditorViewModel.js\";\nimport { MultiDiffEditorWidget } from \"../../../../../editor/browser/widget/multiDiffEditor/multiDiffEditorWidget.js\";\nimport type { IMultiDiffEditorOptions } from \"../../../../../editor/browser/widget/multiDiffEditor/multiDiffEditorWidgetImpl.js\";\nimport type {\n\tIResourceLabel,\n\tIWorkbenchUIElementFactory,\n} from \"../../../../../editor/browser/widget/multiDiffEditor/workbenchUIElementFactory.js\";\nimport type { IEditorOptions as ICodeEditorOptions } from \"../../../../../editor/common/config/editorOptions.js\";\nimport {\n\tBareFontInfo,\n\ttype FontInfo,\n} from \"../../../../../editor/common/config/fontInfo.js\";\nimport { getIconClassesForLanguageId } from \"../../../../../editor/common/services/getIconClasses.js\";\nimport { localize } from \"../../../../../nls.js\";\nimport { IConfigurationService } from \"../../../../../platform/configuration/common/configuration.js\";\nimport { IContextKeyService } from \"../../../../../platform/contextkey/common/contextkey.js\";\nimport { IInstantiationService } from \"../../../../../platform/instantiation/common/instantiation.js\";\nimport { IStorageService } from \"../../../../../platform/storage/common/storage.js\";\nimport { ITelemetryService } from \"../../../../../platform/telemetry/common/telemetry.js\";\nimport { IThemeService } from \"../../../../../platform/theme/common/themeService.js\";\nimport { ResourceLabel } from \"../../../../browser/labels.js\";\nimport { EditorPane } from \"../../../../browser/parts/editor/editorPane.js\";\nimport type { IEditorOpenContext } from \"../../../../common/editor.js\";\nimport type { IEditorGroup } from \"../../../../services/editor/common/editorGroupsService.js\";\nimport { INotebookDocumentService } from \"../../../../services/notebook/common/notebookDocumentService.js\";\nimport {\n\tCellUri,\n\ttype INotebookDiffEditorModel,\n\tNOTEBOOK_MULTI_DIFF_EDITOR_ID,\n} from \"../../common/notebookCommon.js\";\nimport { INotebookService } from \"../../common/notebookService.js\";\nimport { INotebookEditorWorkerService } from \"../../common/services/notebookWorkerService.js\";\nimport { NotebookOptions } from \"../notebookOptions.js\";\nimport type { IDiffElementViewModelBase } from \"./diffElementViewModel.js\";\nimport { DiffEditorHeightCalculatorService } from \"./editorHeightCalculator.js\";\nimport { NotebookDiffEditorEventDispatcher } from \"./eventDispatcher.js\";\nimport {\n\tNOTEBOOK_DIFF_CELLS_COLLAPSED,\n\tNOTEBOOK_DIFF_HAS_UNCHANGED_CELLS,\n\tNOTEBOOK_DIFF_UNCHANGED_CELLS_HIDDEN,\n} from \"./notebookDiffEditorBrowser.js\";\nimport { NotebookDiffViewModel } from \"./notebookDiffViewModel.js\";\nimport {\n\ttype NotebookMultiDiffEditorInput,\n\tNotebookMultiDiffEditorWidgetInput,\n} from \"./notebookMultiDiffEditorInput.js\";\n\nexport class NotebookMultiTextDiffEditor extends EditorPane {\n\tprivate _multiDiffEditorWidget?: MultiDiffEditorWidget;\n\tstatic readonly ID: string = NOTEBOOK_MULTI_DIFF_EDITOR_ID;\n\tprivate _fontInfo: FontInfo | undefined;\n\tprotected _scopeContextKeyService!: IContextKeyService;\n\tprivate readonly modelSpecificResources = this._register(\n\t\tnew DisposableStore(),\n\t);\n\tprivate _model?: INotebookDiffEditorModel;\n\tprivate viewModel?: NotebookDiffViewModel;\n\tprivate widgetViewModel?: MultiDiffEditorViewModel;\n\tget textModel() {\n\t\treturn this._model?.modified.notebook;\n\t}\n\tprivate _notebookOptions: NotebookOptions;\n\tget notebookOptions() {\n\t\treturn this._notebookOptions;\n\t}\n\tprivate readonly ctxAllCollapsed =\n\t\tthis._parentContextKeyService.createKey<boolean>(\n\t\t\tNOTEBOOK_DIFF_CELLS_COLLAPSED.key,\n\t\t\tfalse,\n\t\t);\n\tprivate readonly ctxHasUnchangedCells =\n\t\tthis._parentContextKeyService.createKey<boolean>(\n\t\t\tNOTEBOOK_DIFF_HAS_UNCHANGED_CELLS.key,\n\t\t\tfalse,\n\t\t);\n\tprivate readonly ctxHiddenUnchangedCells =\n\t\tthis._parentContextKeyService.createKey<boolean>(\n\t\t\tNOTEBOOK_DIFF_UNCHANGED_CELLS_HIDDEN.key,\n\t\t\ttrue,\n\t\t);\n\n\tconstructor(\n\t\tgroup: IEditorGroup,\n\t\t@IInstantiationService\n\t\tprivate readonly instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IContextKeyService\n\t\tprivate readonly _parentContextKeyService: IContextKeyService,\n\t\t@INotebookEditorWorkerService\n\t\tprivate readonly notebookEditorWorkerService: INotebookEditorWorkerService,\n\t\t@IConfigurationService\n\t\tprivate readonly configurationService: IConfigurationService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@INotebookService private readonly notebookService: INotebookService,\n\t) {\n\t\tsuper(\n\t\t\tNotebookMultiTextDiffEditor.ID,\n\t\t\tgroup,\n\t\t\ttelemetryService,\n\t\t\tthemeService,\n\t\t\tstorageService,\n\t\t);\n\t\tthis._notebookOptions = instantiationService.createInstance(\n\t\t\tNotebookOptions,\n\t\t\tthis.window,\n\t\t\tfalse,\n\t\t\tundefined,\n\t\t);\n\t\tthis._register(this._notebookOptions);\n\t}\n\n\tprivate get fontInfo() {\n\t\tif (!this._fontInfo) {\n\t\t\tthis._fontInfo = this.createFontInfo();\n\t\t}\n\n\t\treturn this._fontInfo;\n\t}\n\toverride layout(\n\t\tdimension: DOM.Dimension,\n\t\tposition?: DOM.IDomPosition,\n\t): void {\n\t\tthis._multiDiffEditorWidget!.layout(dimension);\n\t}\n\n\tprivate createFontInfo() {\n\t\tconst editorOptions =\n\t\t\tthis.configurationService.getValue<ICodeEditorOptions>(\"editor\");\n\t\treturn FontMeasurements.readFontInfo(\n\t\t\tthis.window,\n\t\t\tBareFontInfo.createFromRawSettings(\n\t\t\t\teditorOptions,\n\t\t\t\tPixelRatio.getInstance(this.window).value,\n\t\t\t),\n\t\t);\n\t}\n\n\tprotected createEditor(parent: HTMLElement): void {\n\t\tthis._multiDiffEditorWidget = this._register(\n\t\t\tthis.instantiationService.createInstance(\n\t\t\t\tMultiDiffEditorWidget,\n\t\t\t\tparent,\n\t\t\t\tthis.instantiationService.createInstance(\n\t\t\t\t\tWorkbenchUIElementFactory,\n\t\t\t\t),\n\t\t\t),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis._multiDiffEditorWidget.onDidChangeActiveControl(() => {\n\t\t\t\tthis._onDidChangeControl.fire();\n\t\t\t}),\n\t\t);\n\t}\n\toverride async setInput(\n\t\tinput: NotebookMultiDiffEditorInput,\n\t\toptions: IMultiDiffEditorOptions | undefined,\n\t\tcontext: IEditorOpenContext,\n\t\ttoken: CancellationToken,\n\t): Promise<void> {\n\t\tsuper.setInput(input, options, context, token);\n\t\tconst model = await input.resolve();\n\t\tif (this._model !== model) {\n\t\t\tthis._detachModel();\n\t\t\tthis._model = model;\n\t\t}\n\t\tconst eventDispatcher = this.modelSpecificResources.add(\n\t\t\tnew NotebookDiffEditorEventDispatcher(),\n\t\t);\n\t\tconst diffEditorHeightCalculator =\n\t\t\tthis.instantiationService.createInstance(\n\t\t\t\tDiffEditorHeightCalculatorService,\n\t\t\t\tthis.fontInfo.lineHeight,\n\t\t\t);\n\t\tthis.viewModel = this.modelSpecificResources.add(\n\t\t\tnew NotebookDiffViewModel(\n\t\t\t\tmodel,\n\t\t\t\tthis.notebookEditorWorkerService,\n\t\t\t\tthis.configurationService,\n\t\t\t\teventDispatcher,\n\t\t\t\tthis.notebookService,\n\t\t\t\tdiffEditorHeightCalculator,\n\t\t\t\tundefined,\n\t\t\t\ttrue,\n\t\t\t),\n\t\t);\n\t\tawait this.viewModel.computeDiff(\n\t\t\tthis.modelSpecificResources.add(new CancellationTokenSource())\n\t\t\t\t.token,\n\t\t);\n\t\tthis.ctxHasUnchangedCells.set(this.viewModel.hasUnchangedCells);\n\t\tthis.ctxHasUnchangedCells.set(this.viewModel.hasUnchangedCells);\n\n\t\tconst widgetInput = this.modelSpecificResources.add(\n\t\t\tNotebookMultiDiffEditorWidgetInput.createInput(\n\t\t\t\tthis.viewModel,\n\t\t\t\tthis.instantiationService,\n\t\t\t),\n\t\t);\n\t\tthis.widgetViewModel = this.modelSpecificResources.add(\n\t\t\tawait widgetInput.getViewModel(),\n\t\t);\n\n\t\tconst itemsWeHaveSeen = new WeakSet<DocumentDiffItemViewModel>();\n\t\tthis.modelSpecificResources.add(\n\t\t\tautorun((reader) => {\n\t\t\t\t/** @description NotebookDiffEditor => Collapse unmodified items */\n\t\t\t\tif (!this.widgetViewModel || !this.viewModel) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst items = this.widgetViewModel.items.read(reader);\n\t\t\t\tconst diffItems = this.viewModel.value;\n\t\t\t\tif (items.length !== diffItems.length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// If cell has not changed, but metadata or output has changed, then collapse the cell & keep output/metadata expanded.\n\t\t\t\t// Similarly if the cell has changed, but the metadata or output has not, then expand the cell, but collapse output/metadata.\n\t\t\t\ttransaction((tx) => {\n\t\t\t\t\titems.forEach((item) => {\n\t\t\t\t\t\t// We do not want to mess with UI state if users change it, hence no need to collapse again.\n\t\t\t\t\t\tif (itemsWeHaveSeen.has(item)) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\titemsWeHaveSeen.add(item);\n\t\t\t\t\t\tconst diffItem = diffItems.find(\n\t\t\t\t\t\t\t(d) =>\n\t\t\t\t\t\t\t\td.modifiedUri?.toString() ===\n\t\t\t\t\t\t\t\t\titem.modifiedUri?.toString() &&\n\t\t\t\t\t\t\t\td.originalUri?.toString() ===\n\t\t\t\t\t\t\t\t\titem.originalUri?.toString(),\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (diffItem && diffItem.type === \"unchanged\") {\n\t\t\t\t\t\t\titem.collapsed.set(true, tx);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}),\n\t\t);\n\n\t\tthis._multiDiffEditorWidget!.setViewModel(this.widgetViewModel);\n\t}\n\n\tprivate _detachModel() {\n\t\tthis.viewModel = undefined;\n\t\tthis.modelSpecificResources.clear();\n\t}\n\t_generateFontFamily(): string {\n\t\treturn (\n\t\t\tthis.fontInfo.fontFamily ??\n\t\t\t`\"SF Mono\", Monaco, Menlo, Consolas, \"Ubuntu Mono\", \"Liberation Mono\", \"DejaVu Sans Mono\", \"Courier New\", monospace`\n\t\t);\n\t}\n\toverride setOptions(options: IMultiDiffEditorOptions | undefined): void {\n\t\tsuper.setOptions(options);\n\t}\n\n\toverride getControl() {\n\t\treturn this._multiDiffEditorWidget!.getActiveControl();\n\t}\n\n\toverride focus(): void {\n\t\tsuper.focus();\n\n\t\tthis._multiDiffEditorWidget?.getActiveControl()?.focus();\n\t}\n\n\toverride hasFocus(): boolean {\n\t\treturn (\n\t\t\tthis._multiDiffEditorWidget?.getActiveControl()?.hasTextFocus() ||\n\t\t\tsuper.hasFocus()\n\t\t);\n\t}\n\n\toverride clearInput(): void {\n\t\tsuper.clearInput();\n\t\tthis._multiDiffEditorWidget!.setViewModel(undefined);\n\t\tthis.modelSpecificResources.clear();\n\t\tthis.viewModel = undefined;\n\t\tthis.widgetViewModel = undefined;\n\t}\n\n\tpublic expandAll() {\n\t\tif (this.widgetViewModel) {\n\t\t\tthis.widgetViewModel.expandAll();\n\t\t\tthis.ctxAllCollapsed.set(false);\n\t\t}\n\t}\n\tpublic collapseAll() {\n\t\tif (this.widgetViewModel) {\n\t\t\tthis.widgetViewModel.collapseAll();\n\t\t\tthis.ctxAllCollapsed.set(true);\n\t\t}\n\t}\n\n\tpublic hideUnchanged() {\n\t\tif (this.viewModel) {\n\t\t\tthis.viewModel.includeUnchanged = false;\n\t\t\tthis.ctxHiddenUnchangedCells.set(true);\n\t\t}\n\t}\n\n\tpublic showUnchanged() {\n\t\tif (this.viewModel) {\n\t\t\tthis.viewModel.includeUnchanged = true;\n\t\t\tthis.ctxHiddenUnchangedCells.set(false);\n\t\t}\n\t}\n\n\tpublic getDiffElementViewModel(\n\t\turi: URI,\n\t): IDiffElementViewModelBase | undefined {\n\t\tif (\n\t\t\turi.scheme === Schemas.vscodeNotebookCellOutput ||\n\t\t\turi.scheme === Schemas.vscodeNotebookCellOutputDiff ||\n\t\t\turi.scheme === Schemas.vscodeNotebookCellMetadata ||\n\t\t\turi.scheme === Schemas.vscodeNotebookCellMetadataDiff\n\t\t) {\n\t\t\tconst data = CellUri.parseCellPropertyUri(uri, uri.scheme);\n\t\t\tif (data) {\n\t\t\t\turi = CellUri.generate(data.notebook, data.handle);\n\t\t\t}\n\t\t}\n\t\tif (uri.scheme === Schemas.vscodeNotebookMetadata) {\n\t\t\treturn this.viewModel?.items.find(\n\t\t\t\t(item) =>\n\t\t\t\t\titem.type === \"modifiedMetadata\" ||\n\t\t\t\t\titem.type === \"unchangedMetadata\",\n\t\t\t);\n\t\t}\n\t\treturn this.viewModel?.items.find((c) => {\n\t\t\tswitch (c.type) {\n\t\t\t\tcase \"delete\":\n\t\t\t\t\treturn c.original?.uri.toString() === uri.toString();\n\t\t\t\tcase \"insert\":\n\t\t\t\t\treturn c.modified?.uri.toString() === uri.toString();\n\t\t\t\tcase \"modified\":\n\t\t\t\tcase \"unchanged\":\n\t\t\t\t\treturn (\n\t\t\t\t\t\tc.modified?.uri.toString() === uri.toString() ||\n\t\t\t\t\t\tc.original?.uri.toString() === uri.toString()\n\t\t\t\t\t);\n\t\t\t\tdefault:\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t});\n\t}\n}\n\nclass WorkbenchUIElementFactory implements IWorkbenchUIElementFactory {\n\tconstructor(\n\t\t@IInstantiationService\n\t\tprivate readonly _instantiationService: IInstantiationService,\n\t\t@INotebookDocumentService\n\t\tprivate readonly notebookDocumentService: INotebookDocumentService,\n\t\t@INotebookService private readonly notebookService: INotebookService,\n\t) {}\n\n\tcreateResourceLabel(element: HTMLElement): IResourceLabel {\n\t\tconst label = this._instantiationService.createInstance(\n\t\t\tResourceLabel,\n\t\t\telement,\n\t\t\t{},\n\t\t);\n\t\tconst that = this;\n\t\treturn {\n\t\t\tsetUri(uri, options = {}) {\n\t\t\t\tif (uri) {\n\t\t\t\t\tlet name = \"\";\n\t\t\t\t\tlet description = \"\";\n\t\t\t\t\tlet extraClasses: string[] | undefined;\n\n\t\t\t\t\tif (uri.scheme === Schemas.vscodeNotebookCell) {\n\t\t\t\t\t\tconst notebookDocument =\n\t\t\t\t\t\t\turi.scheme === Schemas.vscodeNotebookCell\n\t\t\t\t\t\t\t\t? that.notebookDocumentService.getNotebook(uri)\n\t\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\tconst cellIndex = Schemas.vscodeNotebookCell\n\t\t\t\t\t\t\t? that.notebookDocumentService\n\t\t\t\t\t\t\t\t\t.getNotebook(uri)\n\t\t\t\t\t\t\t\t\t?.getCellIndex(uri)\n\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\tif (notebookDocument && cellIndex !== undefined) {\n\t\t\t\t\t\t\tname = localize(\n\t\t\t\t\t\t\t\t\"notebookCellLabel\",\n\t\t\t\t\t\t\t\t\"Cell {0}\",\n\t\t\t\t\t\t\t\t`${cellIndex + 1}`,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tconst nb = notebookDocument\n\t\t\t\t\t\t\t\t? that.notebookService.getNotebookTextModel(\n\t\t\t\t\t\t\t\t\t\tnotebookDocument?.uri,\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\t\tconst cellLanguage =\n\t\t\t\t\t\t\t\tnb && cellIndex !== undefined\n\t\t\t\t\t\t\t\t\t? nb.cells[cellIndex].language\n\t\t\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\t\textraClasses = cellLanguage\n\t\t\t\t\t\t\t\t? getIconClassesForLanguageId(cellLanguage)\n\t\t\t\t\t\t\t\t: undefined;\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (\n\t\t\t\t\t\turi.scheme === Schemas.vscodeNotebookCellMetadata ||\n\t\t\t\t\t\turi.scheme === Schemas.vscodeNotebookCellMetadataDiff\n\t\t\t\t\t) {\n\t\t\t\t\t\tdescription = localize(\n\t\t\t\t\t\t\t\"notebookCellMetadataLabel\",\n\t\t\t\t\t\t\t\"Metadata\",\n\t\t\t\t\t\t);\n\t\t\t\t\t} else if (\n\t\t\t\t\t\turi.scheme === Schemas.vscodeNotebookCellOutput ||\n\t\t\t\t\t\turi.scheme === Schemas.vscodeNotebookCellOutputDiff\n\t\t\t\t\t) {\n\t\t\t\t\t\tdescription = localize(\n\t\t\t\t\t\t\t\"notebookCellOutputLabel\",\n\t\t\t\t\t\t\t\"Output\",\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tlabel.element.setResource(\n\t\t\t\t\t\t{ name, description },\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstrikethrough: options.strikethrough,\n\t\t\t\t\t\t\tforceLabel: true,\n\t\t\t\t\t\t\thideIcon: !extraClasses,\n\t\t\t\t\t\t\textraClasses,\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tlabel.element.clear();\n\t\t\t\t}\n\t\t\t},\n\t\t\tdispose() {\n\t\t\t\tlabel.dispose();\n\t\t\t},\n\t\t};\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
