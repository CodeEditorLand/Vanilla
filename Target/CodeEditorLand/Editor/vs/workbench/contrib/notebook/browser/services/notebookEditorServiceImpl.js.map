{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/notebook/browser/services/notebookEditorServiceImpl.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { Dimension } from \"../../../../../base/browser/dom.js\";\nimport type { CodeWindow } from \"../../../../../base/browser/window.js\";\nimport { Emitter } from \"../../../../../base/common/event.js\";\nimport {\n\tDisposableStore,\n\ttype IDisposable,\n} from \"../../../../../base/common/lifecycle.js\";\nimport { ResourceMap } from \"../../../../../base/common/map.js\";\nimport type { URI } from \"../../../../../base/common/uri.js\";\nimport { IContextKeyService } from \"../../../../../platform/contextkey/common/contextkey.js\";\nimport {\n\tIInstantiationService,\n\ttype ServicesAccessor,\n} from \"../../../../../platform/instantiation/common/instantiation.js\";\nimport { ServiceCollection } from \"../../../../../platform/instantiation/common/serviceCollection.js\";\nimport { IEditorProgressService } from \"../../../../../platform/progress/common/progress.js\";\nimport {\n\ttype GroupIdentifier,\n\tGroupModelChangeKind,\n} from \"../../../../common/editor.js\";\nimport {\n\ttype IEditorGroup,\n\tIEditorGroupsService,\n} from \"../../../../services/editor/common/editorGroupsService.js\";\nimport { IEditorService } from \"../../../../services/editor/common/editorService.js\";\nimport { InteractiveWindowOpen } from \"../../common/notebookContextKeys.js\";\nimport {\n\tNotebookEditorInput,\n\tisCompositeNotebookEditorInput,\n\tisNotebookEditorInput,\n} from \"../../common/notebookEditorInput.js\";\nimport type {\n\tINotebookEditor,\n\tINotebookEditorCreationOptions,\n} from \"../notebookBrowser.js\";\nimport {\n\tNotebookEditorWidget,\n\tgetDefaultNotebookCreationOptions,\n} from \"../notebookEditorWidget.js\";\nimport type {\n\tIBorrowValue,\n\tINotebookEditorService,\n} from \"./notebookEditorService.js\";\n\nexport class NotebookEditorWidgetService implements INotebookEditorService {\n\treadonly _serviceBrand: undefined;\n\n\tprivate _tokenPool = 1;\n\n\tprivate readonly _disposables = new DisposableStore();\n\tprivate readonly _notebookEditors = new Map<string, INotebookEditor>();\n\n\tprivate readonly groupListener = new Map<number, IDisposable[]>();\n\n\tprivate readonly _onNotebookEditorAdd = new Emitter<INotebookEditor>();\n\tprivate readonly _onNotebookEditorsRemove = new Emitter<INotebookEditor>();\n\treadonly onDidAddNotebookEditor = this._onNotebookEditorAdd.event;\n\treadonly onDidRemoveNotebookEditor = this._onNotebookEditorsRemove.event;\n\n\tprivate readonly _borrowableEditors = new Map<\n\t\tnumber,\n\t\tResourceMap<\n\t\t\t{\n\t\t\t\twidget: NotebookEditorWidget;\n\t\t\t\teditorType: string;\n\t\t\t\ttoken: number | undefined;\n\t\t\t}[]\n\t\t>\n\t>();\n\n\tconstructor(\n\t\t@IEditorGroupsService private readonly editorGroupService: IEditorGroupsService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService\n\t) {\n\t\tconst onNewGroup = (group: IEditorGroup) => {\n\t\t\tconst { id } = group;\n\t\t\tconst listeners: IDisposable[] = [];\n\t\t\tlisteners.push(group.onDidCloseEditor(e => {\n\t\t\t\tconst widgetMap = this._borrowableEditors.get(group.id);\n\t\t\t\tif (!widgetMap) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst inputs = e.editor instanceof NotebookEditorInput ? [e.editor] : (isCompositeNotebookEditorInput(e.editor) ? e.editor.editorInputs : []);\n\t\t\t\tinputs.forEach(input => {\n\t\t\t\t\tconst widgets = widgetMap.get(input.resource);\n\t\t\t\t\tconst index = widgets?.findIndex(widget => widget.editorType === input.typeId);\n\t\t\t\t\tif (!widgets || index === undefined || index === -1) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst value = widgets.splice(index, 1)[0];\n\t\t\t\t\tvalue.token = undefined;\n\t\t\t\t\tthis._disposeWidget(value.widget);\n\t\t\t\t\tvalue.widget = (<any>undefined); // unset the widget so that others that still hold a reference don't harm us\n\t\t\t\t});\n\t\t\t}));\n\t\t\tlisteners.push(group.onWillMoveEditor(e => {\n\t\t\t\tif (isNotebookEditorInput(e.editor)) {\n\t\t\t\t\tthis._allowWidgetMove(e.editor, e.groupId, e.target);\n\t\t\t\t}\n\n\t\t\t\tif (isCompositeNotebookEditorInput(e.editor)) {\n\t\t\t\t\te.editor.editorInputs.forEach(input => {\n\t\t\t\t\t\tthis._allowWidgetMove(input, e.groupId, e.target);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}));\n\t\t\tthis.groupListener.set(id, listeners);\n\t\t};\n\t\tthis._disposables.add(editorGroupService.onDidAddGroup(onNewGroup));\n\t\teditorGroupService.whenReady.then(() => editorGroupService.groups.forEach(onNewGroup));\n\n\t\t// group removed -> clean up listeners, clean up widgets\n\t\tthis._disposables.add(editorGroupService.onDidRemoveGroup(group => {\n\t\t\tconst listeners = this.groupListener.get(group.id);\n\t\t\tif (listeners) {\n\t\t\t\tlisteners.forEach(listener => listener.dispose());\n\t\t\t\tthis.groupListener.delete(group.id);\n\t\t\t}\n\t\t\tconst widgets = this._borrowableEditors.get(group.id);\n\t\t\tthis._borrowableEditors.delete(group.id);\n\t\t\tif (widgets) {\n\t\t\t\tfor (const values of widgets.values()) {\n\t\t\t\t\tfor (const value of values) {\n\t\t\t\t\t\tvalue.token = undefined;\n\t\t\t\t\t\tthis._disposeWidget(value.widget);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\n\t\tconst interactiveWindowOpen = InteractiveWindowOpen.bindTo(contextKeyService);\n\t\tthis._disposables.add(editorService.onDidEditorsChange(e => {\n\t\t\tif (e.event.kind === GroupModelChangeKind.EDITOR_OPEN && !interactiveWindowOpen.get()) {\n\t\t\t\tif (editorService.editors.find(editor => editor.editorId === 'interactive')) {\n\t\t\t\t\tinteractiveWindowOpen.set(true);\n\t\t\t\t}\n\t\t\t} else if (e.event.kind === GroupModelChangeKind.EDITOR_CLOSE && interactiveWindowOpen.get()) {\n\t\t\t\tif (!editorService.editors.find(editor => editor.editorId === 'interactive')) {\n\t\t\t\t\tinteractiveWindowOpen.set(false);\n\t\t\t\t}\n\t\t\t}\n\t\t}));\n\t}\n\n\tdispose() {\n\t\tthis._disposables.dispose();\n\t\tthis._onNotebookEditorAdd.dispose();\n\t\tthis._onNotebookEditorsRemove.dispose();\n\t\tthis.groupListener.forEach((listeners) => {\n\t\t\tlisteners.forEach((listener) => listener.dispose());\n\t\t});\n\t\tthis.groupListener.clear();\n\t}\n\n\t// --- group-based editor borrowing...\n\n\tprivate _disposeWidget(widget: NotebookEditorWidget): void {\n\t\twidget.onWillHide();\n\t\tconst domNode = widget.getDomNode();\n\t\twidget.dispose();\n\t\tdomNode.remove();\n\t}\n\n\tprivate _allowWidgetMove(\n\t\tinput: NotebookEditorInput,\n\t\tsourceID: GroupIdentifier,\n\t\ttargetID: GroupIdentifier,\n\t): void {\n\t\tconst sourcePart = this.editorGroupService.getPart(sourceID);\n\t\tconst targetPart = this.editorGroupService.getPart(targetID);\n\n\t\tif (sourcePart.windowId !== targetPart.windowId) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst target = this._borrowableEditors\n\t\t\t.get(targetID)\n\t\t\t?.get(input.resource)\n\t\t\t?.findIndex((widget) => widget.editorType === input.typeId);\n\t\tif (target !== undefined && target !== -1) {\n\t\t\t// not needed, a separate widget is already there\n\t\t\treturn;\n\t\t}\n\n\t\tconst widget = this._borrowableEditors\n\t\t\t.get(sourceID)\n\t\t\t?.get(input.resource)\n\t\t\t?.find((widget) => widget.editorType === input.typeId);\n\t\tif (!widget) {\n\t\t\tthrow new Error(\"no widget at source group\");\n\t\t}\n\n\t\t// don't allow the widget to be retrieved at its previous location any more\n\t\tconst sourceWidgets = this._borrowableEditors\n\t\t\t.get(sourceID)\n\t\t\t?.get(input.resource);\n\t\tif (sourceWidgets) {\n\t\t\tconst indexToRemove = sourceWidgets.findIndex(\n\t\t\t\t(widget) => widget.editorType === input.typeId,\n\t\t\t);\n\t\t\tif (indexToRemove !== -1) {\n\t\t\t\tsourceWidgets.splice(indexToRemove, 1);\n\t\t\t}\n\t\t}\n\n\t\t// allow the widget to be retrieved at its new location\n\t\tlet targetMap = this._borrowableEditors.get(targetID);\n\t\tif (!targetMap) {\n\t\t\ttargetMap = new ResourceMap();\n\t\t\tthis._borrowableEditors.set(targetID, targetMap);\n\t\t}\n\t\tconst widgetsAtTarget = targetMap.get(input.resource) ?? [];\n\t\twidgetsAtTarget?.push(widget);\n\t\ttargetMap.set(input.resource, widgetsAtTarget);\n\t}\n\n\tretrieveExistingWidgetFromURI(\n\t\tresource: URI,\n\t): IBorrowValue<NotebookEditorWidget> | undefined {\n\t\tfor (const widgetInfo of this._borrowableEditors.values()) {\n\t\t\tconst widgets = widgetInfo.get(resource);\n\t\t\tif (widgets && widgets.length > 0) {\n\t\t\t\treturn this._createBorrowValue(widgets[0].token!, widgets[0]);\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tretrieveAllExistingWidgets(): IBorrowValue<NotebookEditorWidget>[] {\n\t\tconst ret: IBorrowValue<NotebookEditorWidget>[] = [];\n\t\tfor (const widgetInfo of this._borrowableEditors.values()) {\n\t\t\tfor (const widgets of widgetInfo.values()) {\n\t\t\t\tfor (const widget of widgets) {\n\t\t\t\t\tret.push(this._createBorrowValue(widget.token!, widget));\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn ret;\n\t}\n\n\tretrieveWidget(\n\t\taccessor: ServicesAccessor,\n\t\tgroupId: number,\n\t\tinput: NotebookEditorInput,\n\t\tcreationOptions?: INotebookEditorCreationOptions,\n\t\tinitialDimension?: Dimension,\n\t\tcodeWindow?: CodeWindow,\n\t): IBorrowValue<NotebookEditorWidget> {\n\t\tlet value = this._borrowableEditors\n\t\t\t.get(groupId)\n\t\t\t?.get(input.resource)\n\t\t\t?.find((widget) => widget.editorType === input.typeId);\n\n\t\tif (value) {\n\t\t\t// reuse a widget which was either free'ed before or which\n\t\t\t// is simply being reused...\n\t\t\tvalue.token = this._tokenPool++;\n\t\t} else {\n\t\t\t// NEW widget\n\t\t\tconst editorGroupContextKeyService =\n\t\t\t\taccessor.get(IContextKeyService);\n\t\t\tconst editorGroupEditorProgressService = accessor.get(\n\t\t\t\tIEditorProgressService,\n\t\t\t);\n\t\t\tconst widget = this.createWidget(\n\t\t\t\teditorGroupContextKeyService,\n\t\t\t\teditorGroupEditorProgressService,\n\t\t\t\tcreationOptions,\n\t\t\t\tcodeWindow,\n\t\t\t\tinitialDimension,\n\t\t\t);\n\t\t\tconst token = this._tokenPool++;\n\t\t\tvalue = { widget, editorType: input.typeId, token };\n\n\t\t\tlet map = this._borrowableEditors.get(groupId);\n\t\t\tif (!map) {\n\t\t\t\tmap = new ResourceMap();\n\t\t\t\tthis._borrowableEditors.set(groupId, map);\n\t\t\t}\n\t\t\tconst values = map.get(input.resource) ?? [];\n\t\t\tvalues.push(value);\n\t\t\tmap.set(input.resource, values);\n\t\t}\n\n\t\treturn this._createBorrowValue(value.token!, value);\n\t}\n\n\t// protected for unit testing overrides\n\tprotected createWidget(\n\t\teditorGroupContextKeyService: IContextKeyService,\n\t\teditorGroupEditorProgressService: IEditorProgressService,\n\t\tcreationOptions?: INotebookEditorCreationOptions,\n\t\tcodeWindow?: CodeWindow,\n\t\tinitialDimension?: Dimension,\n\t) {\n\t\tconst notebookInstantiationService =\n\t\t\tthis.instantiationService.createChild(\n\t\t\t\tnew ServiceCollection(\n\t\t\t\t\t[IContextKeyService, editorGroupContextKeyService],\n\t\t\t\t\t[IEditorProgressService, editorGroupEditorProgressService],\n\t\t\t\t),\n\t\t\t);\n\t\tconst ctorOptions =\n\t\t\tcreationOptions ?? getDefaultNotebookCreationOptions();\n\t\tconst widget = notebookInstantiationService.createInstance(\n\t\t\tNotebookEditorWidget,\n\t\t\t{\n\t\t\t\t...ctorOptions,\n\t\t\t\tcodeWindow: codeWindow ?? ctorOptions.codeWindow,\n\t\t\t},\n\t\t\tinitialDimension,\n\t\t);\n\t\treturn widget;\n\t}\n\n\tprivate _createBorrowValue(\n\t\tmyToken: number,\n\t\twidget: { widget: NotebookEditorWidget; token: number | undefined },\n\t): IBorrowValue<NotebookEditorWidget> {\n\t\treturn {\n\t\t\tget value() {\n\t\t\t\treturn widget.token === myToken ? widget.widget : undefined;\n\t\t\t},\n\t\t};\n\t}\n\n\t// --- editor management\n\n\taddNotebookEditor(editor: INotebookEditor): void {\n\t\tthis._notebookEditors.set(editor.getId(), editor);\n\t\tthis._onNotebookEditorAdd.fire(editor);\n\t}\n\n\tremoveNotebookEditor(editor: INotebookEditor): void {\n\t\tif (this._notebookEditors.has(editor.getId())) {\n\t\t\tthis._notebookEditors.delete(editor.getId());\n\t\t\tthis._onNotebookEditorsRemove.fire(editor);\n\t\t}\n\t}\n\n\tgetNotebookEditor(editorId: string): INotebookEditor | undefined {\n\t\treturn this._notebookEditors.get(editorId);\n\t}\n\n\tlistNotebookEditors(): readonly INotebookEditor[] {\n\t\treturn [...this._notebookEditors].map((e) => e[1]);\n\t}\n}\n"],
  "mappings": "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",
  "names": ["widget"]
}
