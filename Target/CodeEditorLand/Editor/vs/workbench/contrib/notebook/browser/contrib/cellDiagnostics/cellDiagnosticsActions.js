import{KeyCode as m,KeyMod as a}from"../../../../../../base/common/keyCodes.js";import{Range as i}from"../../../../../../editor/common/core/range.js";import{CodeActionController as C}from"../../../../../../editor/contrib/codeAction/browser/codeActionController.js";import{CodeActionKind as d,CodeActionTriggerSource as u}from"../../../../../../editor/contrib/codeAction/common/types.js";import{localize as f,localize2 as p}from"../../../../../../nls.js";import{registerAction2 as A}from"../../../../../../platform/actions/common/actions.js";import{ContextKeyExpr as r}from"../../../../../../platform/contextkey/common/contextkey.js";import{KeybindingWeight as E}from"../../../../../../platform/keybinding/common/keybindingsRegistry.js";import{NOTEBOOK_CELL_EDITOR_FOCUSED as n,NOTEBOOK_CELL_FOCUSED as l,NOTEBOOK_CELL_HAS_ERROR_DIAGNOSTICS as c}from"../../../common/notebookContextKeys.js";import{NotebookCellAction as N,findTargetCellEditor as O}from"../../controller/coreActions.js";import{CodeCellViewModel as b}from"../../viewModel/codeCellViewModel.js";const g="notebook.cell.openFailureActions";A(class extends N{constructor(){super({id:g,title:p("notebookActions.cellFailureActions","Show Cell Failure Actions"),precondition:r.and(l,c,n.toNegated()),f1:!0,keybinding:{when:r.and(l,c,n.toNegated()),primary:a.CtrlCmd|m.Period,weight:E.WorkbenchContrib}})}async runWithContext(_,o){if(o.cell instanceof b){const e=o.cell.excecutionError.get();if(e?.location){const s=i.lift({startLineNumber:e.location.startLineNumber+1,startColumn:e.location.startColumn+1,endLineNumber:e.location.endLineNumber+1,endColumn:e.location.endColumn+1});o.notebookEditor.setCellEditorSelection(o.cell,i.lift(s));const t=O(o,o.cell);t&&C.get(t)?.manualTriggerAtCurrentPosition(f("cellCommands.quickFix.noneMessage","No code actions available"),u.Default,{include:d.QuickFix})}}}});export{g as OPEN_CELL_FAILURE_ACTIONS_COMMAND_ID};
