{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/notebook/browser/diff/notebookDiffEditor.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as DOM from \"../../../../../base/browser/dom.js\";\nimport type {\n\tIMouseWheelEvent,\n\tStandardMouseEvent,\n} from \"../../../../../base/browser/mouseEvent.js\";\nimport { PixelRatio } from \"../../../../../base/browser/pixelRatio.js\";\nimport { findLastIdx } from \"../../../../../base/common/arraysFind.js\";\nimport { SequencerByKey } from \"../../../../../base/common/async.js\";\nimport {\n\ttype CancellationToken,\n\tCancellationTokenSource,\n} from \"../../../../../base/common/cancellation.js\";\nimport { Emitter, Event } from \"../../../../../base/common/event.js\";\nimport {\n\tDisposableStore,\n\ttype IDisposable,\n\ttoDisposable,\n} from \"../../../../../base/common/lifecycle.js\";\nimport type { URI } from \"../../../../../base/common/uri.js\";\nimport { generateUuid } from \"../../../../../base/common/uuid.js\";\nimport { FontMeasurements } from \"../../../../../editor/browser/config/fontMeasurements.js\";\nimport type { IEditorOptions as ICodeEditorOptions } from \"../../../../../editor/common/config/editorOptions.js\";\nimport {\n\tBareFontInfo,\n\ttype FontInfo,\n} from \"../../../../../editor/common/config/fontInfo.js\";\nimport * as nls from \"../../../../../nls.js\";\nimport { IConfigurationService } from \"../../../../../platform/configuration/common/configuration.js\";\nimport { IContextKeyService } from \"../../../../../platform/contextkey/common/contextkey.js\";\nimport type { IEditorOptions } from \"../../../../../platform/editor/common/editor.js\";\nimport { IInstantiationService } from \"../../../../../platform/instantiation/common/instantiation.js\";\nimport {\n\tZIndex,\n\tregisterZIndex,\n} from \"../../../../../platform/layout/browser/zIndexRegistry.js\";\nimport { IStorageService } from \"../../../../../platform/storage/common/storage.js\";\nimport { ITelemetryService } from \"../../../../../platform/telemetry/common/telemetry.js\";\nimport {\n\tdiffDiagonalFill,\n\teditorBackground,\n\tfocusBorder,\n\tforeground,\n} from \"../../../../../platform/theme/common/colorRegistry.js\";\nimport {\n\tIThemeService,\n\tregisterThemingParticipant,\n} from \"../../../../../platform/theme/common/themeService.js\";\nimport { EditorPane } from \"../../../../browser/parts/editor/editorPane.js\";\nimport {\n\tEditorPaneSelectionChangeReason,\n\tEditorPaneSelectionCompareResult,\n\ttype IEditorOpenContext,\n\ttype IEditorPaneScrollPosition,\n\ttype IEditorPaneSelection,\n\ttype IEditorPaneSelectionChangeEvent,\n\ttype IEditorPaneWithScrolling,\n\ttype IEditorPaneWithSelection,\n} from \"../../../../common/editor.js\";\nimport type { IEditorGroup } from \"../../../../services/editor/common/editorGroupsService.js\";\nimport {\n\tCellUri,\n\ttype INotebookDiffEditorModel,\n\tNOTEBOOK_DIFF_EDITOR_ID,\n\tNotebookSetting,\n} from \"../../common/notebookCommon.js\";\nimport type { NotebookDiffEditorInput } from \"../../common/notebookDiffEditorInput.js\";\nimport {\n\tcellIndexesToRanges,\n\tcellRangesToIndexes,\n} from \"../../common/notebookRange.js\";\nimport { INotebookService } from \"../../common/notebookService.js\";\nimport { INotebookEditorWorkerService } from \"../../common/services/notebookWorkerService.js\";\nimport type {\n\tCellEditState,\n\tICellOutputViewModel,\n\tIDisplayOutputLayoutUpdateRequest,\n\tIGenericCellViewModel,\n\tIInsetRenderOutput,\n\tINotebookEditorCreationOptions,\n\tINotebookEditorOptions,\n} from \"../notebookBrowser.js\";\nimport { getDefaultNotebookCreationOptions } from \"../notebookEditorWidget.js\";\nimport { NotebookOptions } from \"../notebookOptions.js\";\nimport type { NotebookLayoutInfo } from \"../notebookViewEvents.js\";\nimport {\n\tBackLayerWebView,\n\ttype INotebookDelegateForWebview,\n} from \"../view/renderers/backLayerWebView.js\";\nimport {\n\ttype DiffElementCellViewModelBase,\n\ttype IDiffElementViewModelBase,\n\tSideBySideDiffElementViewModel,\n} from \"./diffElementViewModel.js\";\nimport type { DiffNestedCellViewModel } from \"./diffNestedCellViewModel.js\";\nimport {\n\tDiffEditorHeightCalculatorService,\n\ttype IDiffEditorHeightCalculatorService,\n} from \"./editorHeightCalculator.js\";\nimport {\n\tNotebookDiffEditorEventDispatcher,\n\tNotebookDiffLayoutChangedEvent,\n} from \"./eventDispatcher.js\";\nimport {\n\tDIFF_CELL_MARGIN,\n\tDiffSide,\n\ttype IDiffCellInfo,\n\ttype INotebookDiffViewModel,\n\ttype INotebookTextDiffEditor,\n} from \"./notebookDiffEditorBrowser.js\";\nimport {\n\tCellDiffPlaceholderRenderer,\n\tCellDiffSideBySideRenderer,\n\tCellDiffSingleSideRenderer,\n\tNotebookCellTextDiffListDelegate,\n\tNotebookDocumentMetadataDiffRenderer,\n\tNotebookTextDiffList,\n} from \"./notebookDiffList.js\";\nimport { NotebookDiffOverviewRuler } from \"./notebookDiffOverviewRuler.js\";\nimport { NotebookDiffViewModel } from \"./notebookDiffViewModel.js\";\n\nconst $ = DOM.$;\n\nclass NotebookDiffEditorSelection implements IEditorPaneSelection {\n\tconstructor(private readonly selections: number[]) {}\n\n\tcompare(other: IEditorPaneSelection): EditorPaneSelectionCompareResult {\n\t\tif (!(other instanceof NotebookDiffEditorSelection)) {\n\t\t\treturn EditorPaneSelectionCompareResult.DIFFERENT;\n\t\t}\n\n\t\tif (this.selections.length !== other.selections.length) {\n\t\t\treturn EditorPaneSelectionCompareResult.DIFFERENT;\n\t\t}\n\n\t\tfor (let i = 0; i < this.selections.length; i++) {\n\t\t\tif (this.selections[i] !== other.selections[i]) {\n\t\t\t\treturn EditorPaneSelectionCompareResult.DIFFERENT;\n\t\t\t}\n\t\t}\n\n\t\treturn EditorPaneSelectionCompareResult.IDENTICAL;\n\t}\n\n\trestore(options: IEditorOptions): INotebookEditorOptions {\n\t\tconst notebookOptions: INotebookEditorOptions = {\n\t\t\tcellSelections: cellIndexesToRanges(this.selections),\n\t\t};\n\n\t\tObject.assign(notebookOptions, options);\n\t\treturn notebookOptions;\n\t}\n}\n\nexport class NotebookTextDiffEditor\n\textends EditorPane\n\timplements\n\t\tINotebookTextDiffEditor,\n\t\tINotebookDelegateForWebview,\n\t\tIEditorPaneWithSelection,\n\t\tIEditorPaneWithScrolling\n{\n\tpublic static readonly ENTIRE_DIFF_OVERVIEW_WIDTH = 30;\n\tcreationOptions: INotebookEditorCreationOptions =\n\t\tgetDefaultNotebookCreationOptions();\n\tstatic readonly ID: string = NOTEBOOK_DIFF_EDITOR_ID;\n\n\tprivate _rootElement!: HTMLElement;\n\tprivate _listViewContainer!: HTMLElement;\n\tprivate _overflowContainer!: HTMLElement;\n\tprivate _overviewRulerContainer!: HTMLElement;\n\tprivate _overviewRuler!: NotebookDiffOverviewRuler;\n\tprivate _dimension: DOM.Dimension | null = null;\n\tprivate notebookDiffViewModel?: INotebookDiffViewModel;\n\tprivate _list!: NotebookTextDiffList;\n\tprivate _modifiedWebview: BackLayerWebView<IDiffCellInfo> | null = null;\n\tprivate _originalWebview: BackLayerWebView<IDiffCellInfo> | null = null;\n\tprivate _webviewTransparentCover: HTMLElement | null = null;\n\tprivate _fontInfo: FontInfo | undefined;\n\n\tprivate readonly _onMouseUp = this._register(\n\t\tnew Emitter<{\n\t\t\treadonly event: MouseEvent;\n\t\t\treadonly target: IDiffElementViewModelBase;\n\t\t}>(),\n\t);\n\tpublic readonly onMouseUp = this._onMouseUp.event;\n\tprivate readonly _onDidScroll = this._register(new Emitter<void>());\n\treadonly onDidScroll: Event<void> = this._onDidScroll.event;\n\treadonly onDidChangeScroll: Event<void> = this._onDidScroll.event;\n\tprivate _eventDispatcher: NotebookDiffEditorEventDispatcher | undefined;\n\tprotected _scopeContextKeyService!: IContextKeyService;\n\tprivate _model: INotebookDiffEditorModel | null = null;\n\tprivate readonly diffEditorCalcuator: IDiffEditorHeightCalculatorService;\n\tprivate readonly _modifiedResourceDisposableStore = this._register(\n\t\tnew DisposableStore(),\n\t);\n\n\tget textModel() {\n\t\treturn this._model?.modified.notebook;\n\t}\n\n\tprivate _revealFirst: boolean;\n\tprivate readonly _insetModifyQueueByOutputId = new SequencerByKey<string>();\n\n\tprotected _onDidDynamicOutputRendered = this._register(\n\t\tnew Emitter<{\n\t\t\tcell: IGenericCellViewModel;\n\t\t\toutput: ICellOutputViewModel;\n\t\t}>(),\n\t);\n\tonDidDynamicOutputRendered = this._onDidDynamicOutputRendered.event;\n\n\tprivate _notebookOptions: NotebookOptions;\n\n\tget notebookOptions() {\n\t\treturn this._notebookOptions;\n\t}\n\n\tprivate readonly _localStore = this._register(new DisposableStore());\n\n\tprivate _layoutCancellationTokenSource?: CancellationTokenSource;\n\n\tprivate readonly _onDidChangeSelection = this._register(\n\t\tnew Emitter<IEditorPaneSelectionChangeEvent>(),\n\t);\n\treadonly onDidChangeSelection = this._onDidChangeSelection.event;\n\n\tprivate _isDisposed = false;\n\n\tget isDisposed() {\n\t\treturn this._isDisposed;\n\t}\n\n\tconstructor(\n\t\tgroup: IEditorGroup,\n\t\t@IInstantiationService\n\t\tprivate readonly instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IContextKeyService\n\t\tprivate readonly contextKeyService: IContextKeyService,\n\t\t@INotebookEditorWorkerService\n\t\tprivate readonly notebookEditorWorkerService: INotebookEditorWorkerService,\n\t\t@IConfigurationService\n\t\tprivate readonly configurationService: IConfigurationService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@INotebookService private readonly notebookService: INotebookService,\n\t) {\n\t\tsuper(NotebookTextDiffEditor.ID, group, telemetryService, themeService, storageService);\n\t\tthis.diffEditorCalcuator = this.instantiationService.createInstance(DiffEditorHeightCalculatorService, this.fontInfo.lineHeight);\n\t\tthis._notebookOptions = instantiationService.createInstance(NotebookOptions, this.window, false, undefined);\n\t\tthis._register(this._notebookOptions);\n\t\tthis._revealFirst = true;\n\t}\n\n\tprivate get fontInfo() {\n\t\tif (!this._fontInfo) {\n\t\t\tthis._fontInfo = this.createFontInfo();\n\t\t}\n\n\t\treturn this._fontInfo;\n\t}\n\n\tprivate createFontInfo() {\n\t\tconst editorOptions =\n\t\t\tthis.configurationService.getValue<ICodeEditorOptions>(\"editor\");\n\t\treturn FontMeasurements.readFontInfo(\n\t\t\tthis.window,\n\t\t\tBareFontInfo.createFromRawSettings(\n\t\t\t\teditorOptions,\n\t\t\t\tPixelRatio.getInstance(this.window).value,\n\t\t\t),\n\t\t);\n\t}\n\n\tprivate isOverviewRulerEnabled(): boolean {\n\t\treturn (\n\t\t\tthis.configurationService.getValue(\n\t\t\t\tNotebookSetting.diffOverviewRuler,\n\t\t\t) ?? false\n\t\t);\n\t}\n\n\tgetSelection(): IEditorPaneSelection | undefined {\n\t\tconst selections = this._list.getFocus();\n\t\treturn new NotebookDiffEditorSelection(selections);\n\t}\n\n\ttoggleNotebookCellSelection(cell: IGenericCellViewModel) {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\n\tupdatePerformanceMetadata(\n\t\tcellId: string,\n\t\texecutionId: string,\n\t\tduration: number,\n\t\trendererId: string,\n\t): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\n\tasync focusNotebookCell(\n\t\tcell: IGenericCellViewModel,\n\t\tfocus: \"output\" | \"editor\" | \"container\",\n\t): Promise<void> {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\n\tasync focusNextNotebookCell(\n\t\tcell: IGenericCellViewModel,\n\t\tfocus: \"output\" | \"editor\" | \"container\",\n\t): Promise<void> {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\n\tdidFocusOutputInputChange(inputFocused: boolean): void {\n\t\t// noop\n\t}\n\n\tgetScrollTop() {\n\t\treturn this._list?.scrollTop ?? 0;\n\t}\n\n\tgetScrollHeight() {\n\t\treturn this._list?.scrollHeight ?? 0;\n\t}\n\n\tgetScrollPosition(): IEditorPaneScrollPosition {\n\t\treturn {\n\t\t\tscrollTop: this.getScrollTop(),\n\t\t\tscrollLeft: this._list?.scrollLeft ?? 0,\n\t\t};\n\t}\n\n\tsetScrollPosition(scrollPosition: IEditorPaneScrollPosition): void {\n\t\tif (!this._list) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._list.scrollTop = scrollPosition.scrollTop;\n\t\tif (scrollPosition.scrollLeft !== undefined) {\n\t\t\tthis._list.scrollLeft = scrollPosition.scrollLeft;\n\t\t}\n\t}\n\n\tdelegateVerticalScrollbarPointerDown(browserEvent: PointerEvent) {\n\t\tthis._list?.delegateVerticalScrollbarPointerDown(browserEvent);\n\t}\n\n\tupdateOutputHeight(\n\t\tcellInfo: IDiffCellInfo,\n\t\toutput: ICellOutputViewModel,\n\t\toutputHeight: number,\n\t\tisInit: boolean,\n\t): void {\n\t\tconst diffElement = cellInfo.diffElement;\n\t\tconst cell = this.getCellByInfo(cellInfo);\n\t\tconst outputIndex = cell.outputsViewModels.indexOf(output);\n\n\t\tif (diffElement instanceof SideBySideDiffElementViewModel) {\n\t\t\tconst info = CellUri.parse(cellInfo.cellUri);\n\t\t\tif (!info) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdiffElement.updateOutputHeight(\n\t\t\t\tinfo.notebook.toString() ===\n\t\t\t\t\tthis._model?.original.resource.toString()\n\t\t\t\t\t? DiffSide.Original\n\t\t\t\t\t: DiffSide.Modified,\n\t\t\t\toutputIndex,\n\t\t\t\toutputHeight,\n\t\t\t);\n\t\t} else {\n\t\t\tdiffElement.updateOutputHeight(\n\t\t\t\tdiffElement.type === \"insert\"\n\t\t\t\t\t? DiffSide.Modified\n\t\t\t\t\t: DiffSide.Original,\n\t\t\t\toutputIndex,\n\t\t\t\toutputHeight,\n\t\t\t);\n\t\t}\n\n\t\tif (isInit) {\n\t\t\tthis._onDidDynamicOutputRendered.fire({ cell, output });\n\t\t}\n\t}\n\n\tsetMarkupCellEditState(cellId: string, editState: CellEditState): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\tdidStartDragMarkupCell(\n\t\tcellId: string,\n\t\tevent: { dragOffsetY: number },\n\t): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\tdidDragMarkupCell(cellId: string, event: { dragOffsetY: number }): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\tdidEndDragMarkupCell(cellId: string): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\tdidDropMarkupCell(cellId: string) {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\tdidResizeOutput(cellId: string): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\n\tprotected createEditor(parent: HTMLElement): void {\n\t\tthis._rootElement = DOM.append(\n\t\t\tparent,\n\t\t\tDOM.$(\".notebook-text-diff-editor\"),\n\t\t);\n\t\tthis._overflowContainer = document.createElement(\"div\");\n\t\tthis._overflowContainer.classList.add(\n\t\t\t\"notebook-overflow-widget-container\",\n\t\t\t\"monaco-editor\",\n\t\t);\n\t\tDOM.append(parent, this._overflowContainer);\n\n\t\tconst renderers = [\n\t\t\tthis.instantiationService.createInstance(\n\t\t\t\tCellDiffSingleSideRenderer,\n\t\t\t\tthis,\n\t\t\t),\n\t\t\tthis.instantiationService.createInstance(\n\t\t\t\tCellDiffSideBySideRenderer,\n\t\t\t\tthis,\n\t\t\t),\n\t\t\tthis.instantiationService.createInstance(\n\t\t\t\tCellDiffPlaceholderRenderer,\n\t\t\t\tthis,\n\t\t\t),\n\t\t\tthis.instantiationService.createInstance(\n\t\t\t\tNotebookDocumentMetadataDiffRenderer,\n\t\t\t\tthis,\n\t\t\t),\n\t\t];\n\n\t\tthis._listViewContainer = DOM.append(\n\t\t\tthis._rootElement,\n\t\t\tDOM.$(\".notebook-diff-list-view\"),\n\t\t);\n\n\t\tthis._list = this.instantiationService.createInstance(\n\t\t\tNotebookTextDiffList,\n\t\t\t\"NotebookTextDiff\",\n\t\t\tthis._listViewContainer,\n\t\t\tthis.instantiationService.createInstance(\n\t\t\t\tNotebookCellTextDiffListDelegate,\n\t\t\t\tthis.window,\n\t\t\t),\n\t\t\trenderers,\n\t\t\tthis.contextKeyService,\n\t\t\t{\n\t\t\t\tsetRowLineHeight: false,\n\t\t\t\tsetRowHeight: false,\n\t\t\t\tsupportDynamicHeights: true,\n\t\t\t\thorizontalScrolling: false,\n\t\t\t\tkeyboardSupport: false,\n\t\t\t\tmouseSupport: true,\n\t\t\t\tmultipleSelectionSupport: false,\n\t\t\t\ttypeNavigationEnabled: true,\n\t\t\t\tpaddingBottom: 0,\n\t\t\t\t// transformOptimization: (isMacintosh && isNative) || getTitleBarStyle(this.configurationService, this.environmentService) === 'native',\n\t\t\t\tstyleController: (_suffix: string) => {\n\t\t\t\t\treturn this._list;\n\t\t\t\t},\n\t\t\t\toverrideStyles: {\n\t\t\t\t\tlistBackground: editorBackground,\n\t\t\t\t\tlistActiveSelectionBackground: editorBackground,\n\t\t\t\t\tlistActiveSelectionForeground: foreground,\n\t\t\t\t\tlistFocusAndSelectionBackground: editorBackground,\n\t\t\t\t\tlistFocusAndSelectionForeground: foreground,\n\t\t\t\t\tlistFocusBackground: editorBackground,\n\t\t\t\t\tlistFocusForeground: foreground,\n\t\t\t\t\tlistHoverForeground: foreground,\n\t\t\t\t\tlistHoverBackground: editorBackground,\n\t\t\t\t\tlistHoverOutline: focusBorder,\n\t\t\t\t\tlistFocusOutline: focusBorder,\n\t\t\t\t\tlistInactiveSelectionBackground: editorBackground,\n\t\t\t\t\tlistInactiveSelectionForeground: foreground,\n\t\t\t\t\tlistInactiveFocusBackground: editorBackground,\n\t\t\t\t\tlistInactiveFocusOutline: editorBackground,\n\t\t\t\t},\n\t\t\t\taccessibilityProvider: {\n\t\t\t\t\tgetAriaLabel() {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t},\n\t\t\t\t\tgetWidgetAriaLabel() {\n\t\t\t\t\t\treturn nls.localize(\n\t\t\t\t\t\t\t\"notebookTreeAriaLabel\",\n\t\t\t\t\t\t\t\"Notebook Text Diff\",\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t// focusNextPreviousDelegate: {\n\t\t\t\t// \tonFocusNext: (applyFocusNext: () => void) => this._updateForCursorNavigationMode(applyFocusNext),\n\t\t\t\t// \tonFocusPrevious: (applyFocusPrevious: () => void) => this._updateForCursorNavigationMode(applyFocusPrevious),\n\t\t\t\t// }\n\t\t\t},\n\t\t);\n\n\t\tthis._register(this._list);\n\t\tthis._register(\n\t\t\tthis._list.onMouseUp((e) => {\n\t\t\t\tif (e.element) {\n\t\t\t\t\tif (typeof e.index === \"number\") {\n\t\t\t\t\t\tthis._list.setFocus([e.index]);\n\t\t\t\t\t}\n\t\t\t\t\tthis._onMouseUp.fire({\n\t\t\t\t\t\tevent: e.browserEvent,\n\t\t\t\t\t\ttarget: e.element,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis._list.onDidScroll(() => {\n\t\t\t\tthis._onDidScroll.fire();\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis._list.onDidChangeFocus(() =>\n\t\t\t\tthis._onDidChangeSelection.fire({\n\t\t\t\t\treason: EditorPaneSelectionChangeReason.USER,\n\t\t\t\t}),\n\t\t\t),\n\t\t);\n\n\t\tthis._overviewRulerContainer = document.createElement(\"div\");\n\t\tthis._overviewRulerContainer.classList.add(\n\t\t\t\"notebook-overview-ruler-container\",\n\t\t);\n\t\tthis._rootElement.appendChild(this._overviewRulerContainer);\n\t\tthis._registerOverviewRuler();\n\n\t\t// transparent cover\n\t\tthis._webviewTransparentCover = DOM.append(\n\t\t\tthis._list.rowsContainer,\n\t\t\t$(\".webview-cover\"),\n\t\t);\n\t\tthis._webviewTransparentCover.style.display = \"none\";\n\n\t\tthis._register(\n\t\t\tDOM.addStandardDisposableGenericMouseDownListener(\n\t\t\t\tthis._overflowContainer,\n\t\t\t\t(e: StandardMouseEvent) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\te.target.classList.contains(\"slider\") &&\n\t\t\t\t\t\tthis._webviewTransparentCover\n\t\t\t\t\t) {\n\t\t\t\t\t\tthis._webviewTransparentCover.style.display = \"block\";\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\n\t\tthis._register(\n\t\t\tDOM.addStandardDisposableGenericMouseUpListener(\n\t\t\t\tthis._overflowContainer,\n\t\t\t\t() => {\n\t\t\t\t\tif (this._webviewTransparentCover) {\n\t\t\t\t\t\t// no matter when\n\t\t\t\t\t\tthis._webviewTransparentCover.style.display = \"none\";\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis._list.onDidScroll((e) => {\n\t\t\t\tthis._webviewTransparentCover!.style.top = `${e.scrollTop}px`;\n\t\t\t}),\n\t\t);\n\t}\n\n\tprivate _registerOverviewRuler() {\n\t\tthis._overviewRuler = this._register(\n\t\t\tthis.instantiationService.createInstance(\n\t\t\t\tNotebookDiffOverviewRuler,\n\t\t\t\tthis,\n\t\t\t\tNotebookTextDiffEditor.ENTIRE_DIFF_OVERVIEW_WIDTH,\n\t\t\t\tthis._overviewRulerContainer,\n\t\t\t),\n\t\t);\n\t}\n\n\tprivate _updateOutputsOffsetsInWebview(\n\t\tscrollTop: number,\n\t\tscrollHeight: number,\n\t\tactiveWebview: BackLayerWebView<IDiffCellInfo>,\n\t\tgetActiveNestedCell: (\n\t\t\tdiffElement: DiffElementCellViewModelBase,\n\t\t) => DiffNestedCellViewModel | undefined,\n\t\tdiffSide: DiffSide,\n\t) {\n\t\tactiveWebview.element.style.height = `${scrollHeight}px`;\n\n\t\tif (activeWebview.insetMapping) {\n\t\t\tconst updateItems: IDisplayOutputLayoutUpdateRequest[] = [];\n\t\t\tconst removedItems: ICellOutputViewModel[] = [];\n\t\t\tactiveWebview.insetMapping.forEach((value, key) => {\n\t\t\t\tconst cell = getActiveNestedCell(value.cellInfo.diffElement);\n\t\t\t\tif (!cell) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst viewIndex = this._list.indexOf(\n\t\t\t\t\tvalue.cellInfo.diffElement,\n\t\t\t\t);\n\n\t\t\t\tif (viewIndex === undefined) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (cell.outputsViewModels.indexOf(key) < 0) {\n\t\t\t\t\t// output is already gone\n\t\t\t\t\tremovedItems.push(key);\n\t\t\t\t} else {\n\t\t\t\t\tconst cellTop = this._list.getCellViewScrollTop(\n\t\t\t\t\t\tvalue.cellInfo.diffElement,\n\t\t\t\t\t);\n\t\t\t\t\tconst outputIndex = cell.outputsViewModels.indexOf(key);\n\t\t\t\t\tconst outputOffset =\n\t\t\t\t\t\tvalue.cellInfo.diffElement.getOutputOffsetInCell(\n\t\t\t\t\t\t\tdiffSide,\n\t\t\t\t\t\t\toutputIndex,\n\t\t\t\t\t\t);\n\t\t\t\t\tupdateItems.push({\n\t\t\t\t\t\tcell,\n\t\t\t\t\t\toutput: key,\n\t\t\t\t\t\tcellTop: cellTop,\n\t\t\t\t\t\toutputOffset: outputOffset,\n\t\t\t\t\t\tforceDisplay: false,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tactiveWebview.removeInsets(removedItems);\n\n\t\t\tif (updateItems.length) {\n\t\t\t\tactiveWebview.updateScrollTops(updateItems, []);\n\t\t\t}\n\t\t}\n\t}\n\n\toverride async setInput(\n\t\tinput: NotebookDiffEditorInput,\n\t\toptions: INotebookEditorOptions | undefined,\n\t\tcontext: IEditorOpenContext,\n\t\ttoken: CancellationToken,\n\t): Promise<void> {\n\t\tawait super.setInput(input, options, context, token);\n\n\t\tconst model = await input.resolve();\n\t\tif (this._model !== model) {\n\t\t\tthis._detachModel();\n\t\t\tthis._model = model;\n\t\t\tthis._attachModel();\n\t\t}\n\n\t\tthis._model = model;\n\t\tif (this._model === null) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._revealFirst = true;\n\n\t\tthis._modifiedResourceDisposableStore.clear();\n\n\t\tthis._layoutCancellationTokenSource = new CancellationTokenSource();\n\n\t\tthis._modifiedResourceDisposableStore.add(\n\t\t\tEvent.any(\n\t\t\t\tthis._model.original.notebook.onDidChangeContent,\n\t\t\t\tthis._model.modified.notebook.onDidChangeContent,\n\t\t\t)((e) => {\n\t\t\t\tif (this._model !== null) {\n\t\t\t\t\tthis._layoutCancellationTokenSource?.dispose();\n\t\t\t\t\tthis._layoutCancellationTokenSource =\n\t\t\t\t\t\tnew CancellationTokenSource();\n\t\t\t\t\tthis.updateLayout(\n\t\t\t\t\t\tthis._layoutCancellationTokenSource.token,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tawait this._createOriginalWebview(\n\t\t\tgenerateUuid(),\n\t\t\tthis._model.original.viewType,\n\t\t\tthis._model.original.resource,\n\t\t);\n\t\tif (this._originalWebview) {\n\t\t\tthis._modifiedResourceDisposableStore.add(this._originalWebview);\n\t\t}\n\t\tawait this._createModifiedWebview(\n\t\t\tgenerateUuid(),\n\t\t\tthis._model.modified.viewType,\n\t\t\tthis._model.modified.resource,\n\t\t);\n\t\tif (this._modifiedWebview) {\n\t\t\tthis._modifiedResourceDisposableStore.add(this._modifiedWebview);\n\t\t}\n\n\t\tawait this.updateLayout(\n\t\t\tthis._layoutCancellationTokenSource.token,\n\t\t\toptions?.cellSelections\n\t\t\t\t? cellRangesToIndexes(options.cellSelections)\n\t\t\t\t: undefined,\n\t\t);\n\t}\n\n\tprivate _detachModel() {\n\t\tthis._localStore.clear();\n\t\tthis._originalWebview?.dispose();\n\t\tthis._originalWebview?.element.remove();\n\t\tthis._originalWebview = null;\n\t\tthis._modifiedWebview?.dispose();\n\t\tthis._modifiedWebview?.element.remove();\n\t\tthis._modifiedWebview = null;\n\n\t\tthis.notebookDiffViewModel?.dispose();\n\t\tthis.notebookDiffViewModel = undefined;\n\n\t\tthis._modifiedResourceDisposableStore.clear();\n\t\tthis._list.clear();\n\t}\n\tprivate _attachModel() {\n\t\tthis._eventDispatcher = new NotebookDiffEditorEventDispatcher();\n\t\tconst updateInsets = () => {\n\t\t\tDOM.scheduleAtNextAnimationFrame(this.window, () => {\n\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (this._modifiedWebview) {\n\t\t\t\t\tthis._updateOutputsOffsetsInWebview(\n\t\t\t\t\t\tthis._list.scrollTop,\n\t\t\t\t\t\tthis._list.scrollHeight,\n\t\t\t\t\t\tthis._modifiedWebview,\n\t\t\t\t\t\t(diffElement: DiffElementCellViewModelBase) => {\n\t\t\t\t\t\t\treturn diffElement.modified;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tDiffSide.Modified,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (this._originalWebview) {\n\t\t\t\t\tthis._updateOutputsOffsetsInWebview(\n\t\t\t\t\t\tthis._list.scrollTop,\n\t\t\t\t\t\tthis._list.scrollHeight,\n\t\t\t\t\t\tthis._originalWebview,\n\t\t\t\t\t\t(diffElement: DiffElementCellViewModelBase) => {\n\t\t\t\t\t\t\treturn diffElement.original;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tDiffSide.Original,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tthis._localStore.add(\n\t\t\tthis._list.onDidChangeContentHeight(() => {\n\t\t\t\tupdateInsets();\n\t\t\t}),\n\t\t);\n\n\t\tthis._localStore.add(\n\t\t\tthis._eventDispatcher.onDidChangeCellLayout(() => {\n\t\t\t\tupdateInsets();\n\t\t\t}),\n\t\t);\n\n\t\tif (this._model) {\n\t\t\tconst vm = (this.notebookDiffViewModel = this._register(\n\t\t\t\tnew NotebookDiffViewModel(\n\t\t\t\t\tthis._model,\n\t\t\t\t\tthis.notebookEditorWorkerService,\n\t\t\t\t\tthis.configurationService,\n\t\t\t\t\tthis._eventDispatcher!,\n\t\t\t\t\tthis.notebookService,\n\t\t\t\t\tthis.diffEditorCalcuator,\n\t\t\t\t\tthis.fontInfo,\n\t\t\t\t\tundefined,\n\t\t\t\t),\n\t\t\t));\n\t\t\tthis._localStore.add(\n\t\t\t\tthis.notebookDiffViewModel.onDidChangeItems((e) => {\n\t\t\t\t\tthis._list.splice(e.start, e.deleteCount, e.elements);\n\t\t\t\t\tif (this.isOverviewRulerEnabled()) {\n\t\t\t\t\t\tthis._overviewRuler.updateViewModels(\n\t\t\t\t\t\t\tvm.items,\n\t\t\t\t\t\t\tthis._eventDispatcher,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate async _createModifiedWebview(\n\t\tid: string,\n\t\tviewType: string,\n\t\tresource: URI,\n\t): Promise<void> {\n\t\tthis._modifiedWebview?.dispose();\n\n\t\tthis._modifiedWebview = this.instantiationService.createInstance(\n\t\t\tBackLayerWebView,\n\t\t\tthis,\n\t\t\tid,\n\t\t\tviewType,\n\t\t\tresource,\n\t\t\t{\n\t\t\t\t...this._notebookOptions.computeDiffWebviewOptions(),\n\t\t\t\tfontFamily: this._generateFontFamily(),\n\t\t\t},\n\t\t\tundefined,\n\t\t) as BackLayerWebView<IDiffCellInfo>;\n\t\t// attach the webview container to the DOM tree first\n\t\tthis._list.rowsContainer.insertAdjacentElement(\n\t\t\t\"afterbegin\",\n\t\t\tthis._modifiedWebview.element,\n\t\t);\n\t\tthis._modifiedWebview.createWebview(this.window);\n\t\tthis._modifiedWebview.element.style.width = `calc(50% - 16px)`;\n\t\tthis._modifiedWebview.element.style.left = `calc(50%)`;\n\t}\n\t_generateFontFamily(): string {\n\t\treturn (\n\t\t\tthis.fontInfo.fontFamily ??\n\t\t\t`\"SF Mono\", Monaco, Menlo, Consolas, \"Ubuntu Mono\", \"Liberation Mono\", \"DejaVu Sans Mono\", \"Courier New\", monospace`\n\t\t);\n\t}\n\n\tprivate async _createOriginalWebview(\n\t\tid: string,\n\t\tviewType: string,\n\t\tresource: URI,\n\t): Promise<void> {\n\t\tthis._originalWebview?.dispose();\n\n\t\tthis._originalWebview = this.instantiationService.createInstance(\n\t\t\tBackLayerWebView,\n\t\t\tthis,\n\t\t\tid,\n\t\t\tviewType,\n\t\t\tresource,\n\t\t\t{\n\t\t\t\t...this._notebookOptions.computeDiffWebviewOptions(),\n\t\t\t\tfontFamily: this._generateFontFamily(),\n\t\t\t},\n\t\t\tundefined,\n\t\t) as BackLayerWebView<IDiffCellInfo>;\n\t\t// attach the webview container to the DOM tree first\n\t\tthis._list.rowsContainer.insertAdjacentElement(\n\t\t\t\"afterbegin\",\n\t\t\tthis._originalWebview.element,\n\t\t);\n\t\tthis._originalWebview.createWebview(this.window);\n\t\tthis._originalWebview.element.style.width = `calc(50% - 16px)`;\n\t\tthis._originalWebview.element.style.left = `16px`;\n\t}\n\n\toverride setOptions(options: INotebookEditorOptions | undefined): void {\n\t\tconst selections = options?.cellSelections\n\t\t\t? cellRangesToIndexes(options.cellSelections)\n\t\t\t: undefined;\n\t\tif (selections) {\n\t\t\tthis._list.setFocus(selections);\n\t\t}\n\t}\n\n\tasync updateLayout(token: CancellationToken, selections?: number[]) {\n\t\tif (!this._model || !this.notebookDiffViewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst diffResult = await this.notebookDiffViewModel.computeDiff(token);\n\t\tif (token.isCancellationRequested) {\n\t\t\t// after await the editor might be disposed.\n\t\t\treturn;\n\t\t}\n\n\t\tif (diffResult) {\n\t\t\tthis._originalWebview?.removeInsets([\n\t\t\t\t...this._originalWebview?.insetMapping.keys(),\n\t\t\t]);\n\t\t\tthis._modifiedWebview?.removeInsets([\n\t\t\t\t...this._modifiedWebview?.insetMapping.keys(),\n\t\t\t]);\n\n\t\t\tif (\n\t\t\t\tthis._revealFirst &&\n\t\t\t\tdiffResult.firstChangeIndex !== -1 &&\n\t\t\t\tdiffResult.firstChangeIndex < this._list.length\n\t\t\t) {\n\t\t\t\tthis._revealFirst = false;\n\t\t\t\tthis._list.setFocus([diffResult.firstChangeIndex]);\n\t\t\t\tthis._list.reveal(diffResult.firstChangeIndex, 0.3);\n\t\t\t}\n\t\t}\n\n\t\tif (selections) {\n\t\t\tthis._list.setFocus(selections);\n\t\t}\n\t}\n\n\tscheduleOutputHeightAck(\n\t\tcellInfo: IDiffCellInfo,\n\t\toutputId: string,\n\t\theight: number,\n\t) {\n\t\tconst diffElement = cellInfo.diffElement;\n\t\t// const activeWebview = diffSide === DiffSide.Modified ? this._modifiedWebview : this._originalWebview;\n\t\tlet diffSide = DiffSide.Original;\n\n\t\tif (diffElement instanceof SideBySideDiffElementViewModel) {\n\t\t\tconst info = CellUri.parse(cellInfo.cellUri);\n\t\t\tif (!info) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdiffSide =\n\t\t\t\tinfo.notebook.toString() ===\n\t\t\t\tthis._model?.original.resource.toString()\n\t\t\t\t\t? DiffSide.Original\n\t\t\t\t\t: DiffSide.Modified;\n\t\t} else {\n\t\t\tdiffSide =\n\t\t\t\tdiffElement.type === \"insert\"\n\t\t\t\t\t? DiffSide.Modified\n\t\t\t\t\t: DiffSide.Original;\n\t\t}\n\n\t\tconst webview =\n\t\t\tdiffSide === DiffSide.Modified\n\t\t\t\t? this._modifiedWebview\n\t\t\t\t: this._originalWebview;\n\n\t\tDOM.scheduleAtNextAnimationFrame(\n\t\t\tthis.window,\n\t\t\t() => {\n\t\t\t\twebview?.ackHeight([\n\t\t\t\t\t{ cellId: cellInfo.cellId, outputId, height },\n\t\t\t\t]);\n\t\t\t},\n\t\t\t10,\n\t\t);\n\t}\n\n\tprivate pendingLayouts = new WeakMap<\n\t\tIDiffElementViewModelBase,\n\t\tIDisposable\n\t>();\n\n\tlayoutNotebookCell(cell: IDiffElementViewModelBase, height: number) {\n\t\tconst relayout = (cell: IDiffElementViewModelBase, height: number) => {\n\t\t\tthis._list.updateElementHeight2(cell, height);\n\t\t};\n\n\t\tif (this.pendingLayouts.has(cell)) {\n\t\t\tthis.pendingLayouts.get(cell)!.dispose();\n\t\t}\n\n\t\tlet r: () => void;\n\t\tconst layoutDisposable = DOM.scheduleAtNextAnimationFrame(\n\t\t\tthis.window,\n\t\t\t() => {\n\t\t\t\tthis.pendingLayouts.delete(cell);\n\n\t\t\t\trelayout(cell, height);\n\t\t\t\tr();\n\t\t\t},\n\t\t);\n\n\t\tthis.pendingLayouts.set(\n\t\t\tcell,\n\t\t\ttoDisposable(() => {\n\t\t\t\tlayoutDisposable.dispose();\n\t\t\t\tr();\n\t\t\t}),\n\t\t);\n\n\t\treturn new Promise<void>((resolve) => {\n\t\t\tr = resolve;\n\t\t});\n\t}\n\n\tsetScrollTop(scrollTop: number): void {\n\t\tthis._list.scrollTop = scrollTop;\n\t}\n\n\ttriggerScroll(event: IMouseWheelEvent) {\n\t\tthis._list.triggerScrollFromMouseWheelEvent(event);\n\t}\n\n\tpreviousChange(): void {\n\t\tif (!this.notebookDiffViewModel) {\n\t\t\treturn;\n\t\t}\n\t\tlet currFocus = this._list.getFocus()[0];\n\n\t\tif (isNaN(currFocus) || currFocus < 0) {\n\t\t\tcurrFocus = 0;\n\t\t}\n\n\t\t// find the index of previous change\n\t\tlet prevChangeIndex = currFocus - 1;\n\t\tconst currentViewModels = this.notebookDiffViewModel.items;\n\t\twhile (prevChangeIndex >= 0) {\n\t\t\tconst vm = currentViewModels[prevChangeIndex];\n\t\t\tif (vm.type !== \"unchanged\" && vm.type !== \"placeholder\") {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tprevChangeIndex--;\n\t\t}\n\n\t\tif (prevChangeIndex >= 0) {\n\t\t\tthis._list.setFocus([prevChangeIndex]);\n\t\t\tthis._list.reveal(prevChangeIndex);\n\t\t} else {\n\t\t\t// go to the last one\n\t\t\tconst index = findLastIdx(\n\t\t\t\tcurrentViewModels,\n\t\t\t\t(vm) => vm.type !== \"unchanged\" && vm.type !== \"placeholder\",\n\t\t\t);\n\t\t\tif (index >= 0) {\n\t\t\t\tthis._list.setFocus([index]);\n\t\t\t\tthis._list.reveal(index);\n\t\t\t}\n\t\t}\n\t}\n\n\tnextChange(): void {\n\t\tif (!this.notebookDiffViewModel) {\n\t\t\treturn;\n\t\t}\n\t\tlet currFocus = this._list.getFocus()[0];\n\n\t\tif (isNaN(currFocus) || currFocus < 0) {\n\t\t\tcurrFocus = 0;\n\t\t}\n\n\t\t// find the index of next change\n\t\tlet nextChangeIndex = currFocus + 1;\n\t\tconst currentViewModels = this.notebookDiffViewModel.items;\n\t\twhile (nextChangeIndex < currentViewModels.length) {\n\t\t\tconst vm = currentViewModels[nextChangeIndex];\n\t\t\tif (vm.type !== \"unchanged\" && vm.type !== \"placeholder\") {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tnextChangeIndex++;\n\t\t}\n\n\t\tif (nextChangeIndex < currentViewModels.length) {\n\t\t\tthis._list.setFocus([nextChangeIndex]);\n\t\t\tthis._list.reveal(nextChangeIndex);\n\t\t} else {\n\t\t\t// go to the first one\n\t\t\tconst index = currentViewModels.findIndex(\n\t\t\t\t(vm) => vm.type !== \"unchanged\" && vm.type !== \"placeholder\",\n\t\t\t);\n\t\t\tif (index >= 0) {\n\t\t\t\tthis._list.setFocus([index]);\n\t\t\t\tthis._list.reveal(index);\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateOutput(\n\t\tcellDiffViewModel: DiffElementCellViewModelBase,\n\t\tcellViewModel: DiffNestedCellViewModel,\n\t\toutput: IInsetRenderOutput,\n\t\tgetOffset: () => number,\n\t\tdiffSide: DiffSide,\n\t): void {\n\t\tthis._insetModifyQueueByOutputId.queue(\n\t\t\toutput.source.model.outputId +\n\t\t\t\t(diffSide === DiffSide.Modified ? \"-right\" : \"left\"),\n\t\t\tasync () => {\n\t\t\t\tconst activeWebview =\n\t\t\t\t\tdiffSide === DiffSide.Modified\n\t\t\t\t\t\t? this._modifiedWebview\n\t\t\t\t\t\t: this._originalWebview;\n\t\t\t\tif (!activeWebview) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (activeWebview.insetMapping.has(output.source)) {\n\t\t\t\t\tconst cellTop =\n\t\t\t\t\t\tthis._list.getCellViewScrollTop(cellDiffViewModel);\n\t\t\t\t\tconst outputIndex = cellViewModel.outputsViewModels.indexOf(\n\t\t\t\t\t\toutput.source,\n\t\t\t\t\t);\n\t\t\t\t\tconst outputOffset =\n\t\t\t\t\t\tcellDiffViewModel.getOutputOffsetInCell(\n\t\t\t\t\t\t\tdiffSide,\n\t\t\t\t\t\t\toutputIndex,\n\t\t\t\t\t\t);\n\t\t\t\t\tactiveWebview.updateScrollTops(\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tcell: cellViewModel,\n\t\t\t\t\t\t\t\toutput: output.source,\n\t\t\t\t\t\t\t\tcellTop,\n\t\t\t\t\t\t\t\toutputOffset,\n\t\t\t\t\t\t\t\tforceDisplay: true,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t\t[],\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tconst cellTop =\n\t\t\t\t\t\tthis._list.getCellViewScrollTop(cellDiffViewModel);\n\t\t\t\t\tawait activeWebview.createOutput(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdiffElement: cellDiffViewModel,\n\t\t\t\t\t\t\tcellHandle: cellViewModel.handle,\n\t\t\t\t\t\t\tcellId: cellViewModel.id,\n\t\t\t\t\t\t\tcellUri: cellViewModel.uri,\n\t\t\t\t\t\t},\n\t\t\t\t\t\toutput,\n\t\t\t\t\t\tcellTop,\n\t\t\t\t\t\tgetOffset(),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t}\n\n\tupdateMarkupCellHeight() {\n\t\t// TODO\n\t}\n\n\tgetCellByInfo(cellInfo: IDiffCellInfo): IGenericCellViewModel {\n\t\treturn cellInfo.diffElement.getCellByUri(cellInfo.cellUri);\n\t}\n\n\tgetCellById(cellId: string): IGenericCellViewModel | undefined {\n\t\tthrow new Error(\"Not implemented\");\n\t}\n\n\tremoveInset(\n\t\tcellDiffViewModel: DiffElementCellViewModelBase,\n\t\tcellViewModel: DiffNestedCellViewModel,\n\t\tdisplayOutput: ICellOutputViewModel,\n\t\tdiffSide: DiffSide,\n\t) {\n\t\tthis._insetModifyQueueByOutputId.queue(\n\t\t\tdisplayOutput.model.outputId +\n\t\t\t\t(diffSide === DiffSide.Modified ? \"-right\" : \"left\"),\n\t\t\tasync () => {\n\t\t\t\tconst activeWebview =\n\t\t\t\t\tdiffSide === DiffSide.Modified\n\t\t\t\t\t\t? this._modifiedWebview\n\t\t\t\t\t\t: this._originalWebview;\n\t\t\t\tif (!activeWebview) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!activeWebview.insetMapping.has(displayOutput)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tactiveWebview.removeInsets([displayOutput]);\n\t\t\t},\n\t\t);\n\t}\n\n\tshowInset(\n\t\tcellDiffViewModel: DiffElementCellViewModelBase,\n\t\tcellViewModel: DiffNestedCellViewModel,\n\t\tdisplayOutput: ICellOutputViewModel,\n\t\tdiffSide: DiffSide,\n\t) {\n\t\tthis._insetModifyQueueByOutputId.queue(\n\t\t\tdisplayOutput.model.outputId +\n\t\t\t\t(diffSide === DiffSide.Modified ? \"-right\" : \"left\"),\n\t\t\tasync () => {\n\t\t\t\tconst activeWebview =\n\t\t\t\t\tdiffSide === DiffSide.Modified\n\t\t\t\t\t\t? this._modifiedWebview\n\t\t\t\t\t\t: this._originalWebview;\n\t\t\t\tif (!activeWebview) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!activeWebview.insetMapping.has(displayOutput)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst cellTop =\n\t\t\t\t\tthis._list.getCellViewScrollTop(cellDiffViewModel);\n\t\t\t\tconst outputIndex =\n\t\t\t\t\tcellViewModel.outputsViewModels.indexOf(displayOutput);\n\t\t\t\tconst outputOffset = cellDiffViewModel.getOutputOffsetInCell(\n\t\t\t\t\tdiffSide,\n\t\t\t\t\toutputIndex,\n\t\t\t\t);\n\t\t\t\tactiveWebview.updateScrollTops(\n\t\t\t\t\t[\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcell: cellViewModel,\n\t\t\t\t\t\t\toutput: displayOutput,\n\t\t\t\t\t\t\tcellTop,\n\t\t\t\t\t\t\toutputOffset,\n\t\t\t\t\t\t\tforceDisplay: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\t[],\n\t\t\t\t);\n\t\t\t},\n\t\t);\n\t}\n\n\thideInset(\n\t\tcellDiffViewModel: DiffElementCellViewModelBase,\n\t\tcellViewModel: DiffNestedCellViewModel,\n\t\toutput: ICellOutputViewModel,\n\t) {\n\t\tthis._modifiedWebview?.hideInset(output);\n\t\tthis._originalWebview?.hideInset(output);\n\t}\n\n\t// private async _resolveWebview(rightEditor: boolean): Promise<BackLayerWebView | null> {\n\t// \tif (rightEditor) {\n\n\t// \t}\n\t// }\n\n\tgetDomNode() {\n\t\treturn this._rootElement;\n\t}\n\n\tgetOverflowContainerDomNode(): HTMLElement {\n\t\treturn this._overflowContainer;\n\t}\n\n\toverride getControl(): INotebookTextDiffEditor | undefined {\n\t\treturn this;\n\t}\n\n\toverride clearInput(): void {\n\t\tsuper.clearInput();\n\n\t\tthis._modifiedResourceDisposableStore.clear();\n\t\tthis._list?.splice(0, this._list?.length || 0);\n\t\tthis._model = null;\n\t\tthis.notebookDiffViewModel?.dispose();\n\t\tthis.notebookDiffViewModel = undefined;\n\t}\n\n\tdeltaCellOutputContainerClassNames(\n\t\tdiffSide: DiffSide,\n\t\tcellId: string,\n\t\tadded: string[],\n\t\tremoved: string[],\n\t) {\n\t\tif (diffSide === DiffSide.Original) {\n\t\t\tthis._originalWebview?.deltaCellContainerClassNames(\n\t\t\t\tcellId,\n\t\t\t\tadded,\n\t\t\t\tremoved,\n\t\t\t);\n\t\t} else {\n\t\t\tthis._modifiedWebview?.deltaCellContainerClassNames(\n\t\t\t\tcellId,\n\t\t\t\tadded,\n\t\t\t\tremoved,\n\t\t\t);\n\t\t}\n\t}\n\n\tgetLayoutInfo(): NotebookLayoutInfo {\n\t\tif (!this._list) {\n\t\t\tthrow new Error(\"Editor is not initalized successfully\");\n\t\t}\n\n\t\treturn {\n\t\t\twidth: this._dimension!.width,\n\t\t\theight: this._dimension!.height,\n\t\t\tfontInfo: this.fontInfo,\n\t\t\tscrollHeight: this._list?.getScrollHeight() ?? 0,\n\t\t\tstickyHeight: 0,\n\t\t};\n\t}\n\n\tlayout(dimension: DOM.Dimension, _position: DOM.IDomPosition): void {\n\t\tthis._rootElement.classList.toggle(\n\t\t\t\"mid-width\",\n\t\t\tdimension.width < 1000 && dimension.width >= 600,\n\t\t);\n\t\tthis._rootElement.classList.toggle(\n\t\t\t\"narrow-width\",\n\t\t\tdimension.width < 600,\n\t\t);\n\t\tconst overviewRulerEnabled = this.isOverviewRulerEnabled();\n\t\tthis._dimension = dimension.with(\n\t\t\tdimension.width -\n\t\t\t\t(overviewRulerEnabled\n\t\t\t\t\t? NotebookTextDiffEditor.ENTIRE_DIFF_OVERVIEW_WIDTH\n\t\t\t\t\t: 0),\n\t\t);\n\n\t\tthis._listViewContainer.style.height = `${dimension.height}px`;\n\t\tthis._listViewContainer.style.width = `${this._dimension.width}px`;\n\n\t\tthis._list?.layout(this._dimension.height, this._dimension.width);\n\n\t\tif (this._modifiedWebview) {\n\t\t\tthis._modifiedWebview.element.style.width = `calc(50% - 16px)`;\n\t\t\tthis._modifiedWebview.element.style.left = `calc(50%)`;\n\t\t}\n\n\t\tif (this._originalWebview) {\n\t\t\tthis._originalWebview.element.style.width = `calc(50% - 16px)`;\n\t\t\tthis._originalWebview.element.style.left = `16px`;\n\t\t}\n\n\t\tif (this._webviewTransparentCover) {\n\t\t\tthis._webviewTransparentCover.style.height = `${this._dimension.height}px`;\n\t\t\tthis._webviewTransparentCover.style.width = `${this._dimension.width}px`;\n\t\t}\n\n\t\tif (overviewRulerEnabled) {\n\t\t\tthis._overviewRuler.layout();\n\t\t}\n\n\t\tthis._eventDispatcher?.emit([\n\t\t\tnew NotebookDiffLayoutChangedEvent(\n\t\t\t\t{ width: true, fontInfo: true },\n\t\t\t\tthis.getLayoutInfo(),\n\t\t\t),\n\t\t]);\n\t}\n\n\toverride dispose() {\n\t\tthis._isDisposed = true;\n\t\tthis._layoutCancellationTokenSource?.dispose();\n\t\tthis._detachModel();\n\t\tsuper.dispose();\n\t}\n}\n\nregisterZIndex(ZIndex.Base, 10, \"notebook-diff-view-viewport-slider\");\n\nregisterThemingParticipant((theme, collector) => {\n\tconst diffDiagonalFillColor = theme.getColor(diffDiagonalFill);\n\tcollector.addRule(`\n\t.notebook-text-diff-editor .diagonal-fill {\n\t\tbackground-image: linear-gradient(\n\t\t\t-45deg,\n\t\t\t${diffDiagonalFillColor} 12.5%,\n\t\t\t#0000 12.5%, #0000 50%,\n\t\t\t${diffDiagonalFillColor} 50%, ${diffDiagonalFillColor} 62.5%,\n\t\t\t#0000 62.5%, #0000 100%\n\t\t);\n\t\tbackground-size: 8px 8px;\n\t}\n\t`);\n\n\tcollector.addRule(\n\t\t`.notebook-text-diff-editor .cell-body { margin: ${DIFF_CELL_MARGIN}px; }`,\n\t);\n\t// We do not want a left margin, as we add an overlay for expanind the collapsed/hidden cells.\n\tcollector.addRule(\n\t\t`.notebook-text-diff-editor .cell-placeholder-body { margin: ${DIFF_CELL_MARGIN}px 0; }`,\n\t);\n});\n"],
  "mappings": "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",
  "names": ["cell", "height"]
}
