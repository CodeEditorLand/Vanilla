{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/notebook/browser/diff/notebookDiffEditor.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../../nls.js';\nimport * as DOM from '../../../../../base/browser/dom.js';\nimport { findLastIdx } from '../../../../../base/common/arraysFind.js';\nimport { IStorageService } from '../../../../../platform/storage/common/storage.js';\nimport { ITelemetryService } from '../../../../../platform/telemetry/common/telemetry.js';\nimport { IThemeService, registerThemingParticipant } from '../../../../../platform/theme/common/themeService.js';\nimport { EditorPaneSelectionChangeReason, EditorPaneSelectionCompareResult, IEditorOpenContext, IEditorPaneScrollPosition, IEditorPaneSelection, IEditorPaneSelectionChangeEvent, IEditorPaneWithScrolling, IEditorPaneWithSelection } from '../../../../common/editor.js';\nimport { getDefaultNotebookCreationOptions } from '../notebookEditorWidget.js';\nimport { IEditorGroup } from '../../../../services/editor/common/editorGroupsService.js';\nimport { NotebookDiffEditorInput } from '../../common/notebookDiffEditorInput.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../../base/common/cancellation.js';\nimport { DiffElementCellViewModelBase, IDiffElementViewModelBase, SideBySideDiffElementViewModel } from './diffElementViewModel.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { CellDiffPlaceholderRenderer, CellDiffSideBySideRenderer, CellDiffSingleSideRenderer, NotebookCellTextDiffListDelegate, NotebookTextDiffList } from './notebookDiffList.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { diffDiagonalFill, editorBackground, focusBorder, foreground } from '../../../../../platform/theme/common/colorRegistry.js';\nimport { INotebookEditorWorkerService } from '../../common/services/notebookWorkerService.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { IEditorOptions as ICodeEditorOptions } from '../../../../../editor/common/config/editorOptions.js';\nimport { BareFontInfo, FontInfo } from '../../../../../editor/common/config/fontInfo.js';\nimport { PixelRatio } from '../../../../../base/browser/pixelRatio.js';\nimport { CellEditState, ICellOutputViewModel, IDisplayOutputLayoutUpdateRequest, IGenericCellViewModel, IInsetRenderOutput, INotebookEditorCreationOptions, INotebookEditorOptions } from '../notebookBrowser.js';\nimport { DiffSide, DIFF_CELL_MARGIN, IDiffCellInfo, INotebookTextDiffEditor, INotebookDiffViewModel } from './notebookDiffEditorBrowser.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { DisposableStore, IDisposable, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { EditorPane } from '../../../../browser/parts/editor/editorPane.js';\nimport { CellUri, INotebookDiffEditorModel, NOTEBOOK_DIFF_EDITOR_ID, NotebookSetting } from '../../common/notebookCommon.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { SequencerByKey } from '../../../../../base/common/async.js';\nimport { generateUuid } from '../../../../../base/common/uuid.js';\nimport { IMouseWheelEvent, StandardMouseEvent } from '../../../../../base/browser/mouseEvent.js';\nimport { DiffNestedCellViewModel } from './diffNestedCellViewModel.js';\nimport { BackLayerWebView, INotebookDelegateForWebview } from '../view/renderers/backLayerWebView.js';\nimport { NotebookDiffEditorEventDispatcher, NotebookDiffLayoutChangedEvent } from './eventDispatcher.js';\nimport { FontMeasurements } from '../../../../../editor/browser/config/fontMeasurements.js';\nimport { NotebookOptions } from '../notebookOptions.js';\nimport { NotebookLayoutInfo } from '../notebookViewEvents.js';\nimport { IEditorOptions } from '../../../../../platform/editor/common/editor.js';\nimport { cellIndexesToRanges, cellRangesToIndexes } from '../../common/notebookRange.js';\nimport { NotebookDiffOverviewRuler } from './notebookDiffOverviewRuler.js';\nimport { registerZIndex, ZIndex } from '../../../../../platform/layout/browser/zIndexRegistry.js';\nimport { NotebookDiffViewModel } from './notebookDiffViewModel.js';\nimport { INotebookService } from '../../common/notebookService.js';\nimport { IEditorWorkerService } from '../../../../../editor/common/services/editorWorker.js';\nimport { ITextModelService } from '../../../../../editor/common/services/resolverService.js';\nimport { ITextResourceConfigurationService } from '../../../../../editor/common/services/textResourceConfiguration.js';\nimport { UnchangedEditorRegionsService } from './unchangedEditorRegions.js';\n\nconst $ = DOM.$;\n\nclass NotebookDiffEditorSelection implements IEditorPaneSelection {\n\n\tconstructor(\n\t\tprivate readonly selections: number[]\n\t) { }\n\n\tcompare(other: IEditorPaneSelection): EditorPaneSelectionCompareResult {\n\t\tif (!(other instanceof NotebookDiffEditorSelection)) {\n\t\t\treturn EditorPaneSelectionCompareResult.DIFFERENT;\n\t\t}\n\n\t\tif (this.selections.length !== other.selections.length) {\n\t\t\treturn EditorPaneSelectionCompareResult.DIFFERENT;\n\t\t}\n\n\t\tfor (let i = 0; i < this.selections.length; i++) {\n\t\t\tif (this.selections[i] !== other.selections[i]) {\n\t\t\t\treturn EditorPaneSelectionCompareResult.DIFFERENT;\n\t\t\t}\n\t\t}\n\n\t\treturn EditorPaneSelectionCompareResult.IDENTICAL;\n\t}\n\n\trestore(options: IEditorOptions): INotebookEditorOptions {\n\t\tconst notebookOptions: INotebookEditorOptions = {\n\t\t\tcellSelections: cellIndexesToRanges(this.selections)\n\t\t};\n\n\t\tObject.assign(notebookOptions, options);\n\t\treturn notebookOptions;\n\t}\n}\n\nexport class NotebookTextDiffEditor extends EditorPane implements INotebookTextDiffEditor, INotebookDelegateForWebview, IEditorPaneWithSelection, IEditorPaneWithScrolling {\n\tpublic static readonly ENTIRE_DIFF_OVERVIEW_WIDTH = 30;\n\tcreationOptions: INotebookEditorCreationOptions = getDefaultNotebookCreationOptions();\n\tstatic readonly ID: string = NOTEBOOK_DIFF_EDITOR_ID;\n\n\tprivate _rootElement!: HTMLElement;\n\tprivate _listViewContainer!: HTMLElement;\n\tprivate _overflowContainer!: HTMLElement;\n\tprivate _overviewRulerContainer!: HTMLElement;\n\tprivate _overviewRuler!: NotebookDiffOverviewRuler;\n\tprivate _dimension: DOM.Dimension | null = null;\n\tprivate notebookDiffViewModel?: INotebookDiffViewModel;\n\tprivate _list!: NotebookTextDiffList;\n\tprivate _modifiedWebview: BackLayerWebView<IDiffCellInfo> | null = null;\n\tprivate _originalWebview: BackLayerWebView<IDiffCellInfo> | null = null;\n\tprivate _webviewTransparentCover: HTMLElement | null = null;\n\tprivate _fontInfo: FontInfo | undefined;\n\n\tprivate readonly _onMouseUp = this._register(new Emitter<{ readonly event: MouseEvent; readonly target: IDiffElementViewModelBase }>());\n\tpublic readonly onMouseUp = this._onMouseUp.event;\n\tprivate readonly _onDidScroll = this._register(new Emitter<void>());\n\treadonly onDidScroll: Event<void> = this._onDidScroll.event;\n\treadonly onDidChangeScroll: Event<void> = this._onDidScroll.event;\n\tprivate _eventDispatcher: NotebookDiffEditorEventDispatcher | undefined;\n\tprotected _scopeContextKeyService!: IContextKeyService;\n\tprivate _model: INotebookDiffEditorModel | null = null;\n\tprivate readonly _modifiedResourceDisposableStore = this._register(new DisposableStore());\n\n\tget textModel() {\n\t\treturn this._model?.modified.notebook;\n\t}\n\n\tprivate _revealFirst: boolean;\n\tprivate readonly _insetModifyQueueByOutputId = new SequencerByKey<string>();\n\n\tprotected _onDidDynamicOutputRendered = this._register(new Emitter<{ cell: IGenericCellViewModel; output: ICellOutputViewModel }>());\n\tonDidDynamicOutputRendered = this._onDidDynamicOutputRendered.event;\n\n\tprivate _notebookOptions: NotebookOptions;\n\n\tget notebookOptions() {\n\t\treturn this._notebookOptions;\n\t}\n\n\tprivate readonly _localStore = this._register(new DisposableStore());\n\n\tprivate _layoutCancellationTokenSource?: CancellationTokenSource;\n\n\tprivate readonly _onDidChangeSelection = this._register(new Emitter<IEditorPaneSelectionChangeEvent>());\n\treadonly onDidChangeSelection = this._onDidChangeSelection.event;\n\n\tprivate _isDisposed: boolean = false;\n\n\tget isDisposed() {\n\t\treturn this._isDisposed;\n\t}\n\n\tconstructor(\n\t\tgroup: IEditorGroup,\n\t\t@IInstantiationService private readonly instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@INotebookEditorWorkerService private readonly notebookEditorWorkerService: INotebookEditorWorkerService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService,\n\t\t@ITelemetryService telemetryService: ITelemetryService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@INotebookService private readonly notebookService: INotebookService,\n\t\t@IEditorWorkerService private readonly editorWorkerService: IEditorWorkerService,\n\t\t@ITextModelService private readonly textModelResolverService: ITextModelService,\n\t\t@ITextResourceConfigurationService private readonly textConfigurationService: ITextResourceConfigurationService\n\t) {\n\t\tsuper(NotebookTextDiffEditor.ID, group, telemetryService, themeService, storageService);\n\t\tthis._notebookOptions = instantiationService.createInstance(NotebookOptions, this.window, false, undefined);\n\t\tthis._register(this._notebookOptions);\n\t\tthis._revealFirst = true;\n\t}\n\n\tprivate get fontInfo() {\n\t\tif (!this._fontInfo) {\n\t\t\tthis._fontInfo = this.createFontInfo();\n\t\t}\n\n\t\treturn this._fontInfo;\n\t}\n\n\tprivate createFontInfo() {\n\t\tconst editorOptions = this.configurationService.getValue<ICodeEditorOptions>('editor');\n\t\treturn FontMeasurements.readFontInfo(this.window, BareFontInfo.createFromRawSettings(editorOptions, PixelRatio.getInstance(this.window).value));\n\t}\n\n\tprivate isOverviewRulerEnabled(): boolean {\n\t\treturn this.configurationService.getValue(NotebookSetting.diffOverviewRuler) ?? false;\n\t}\n\n\tgetSelection(): IEditorPaneSelection | undefined {\n\t\tconst selections = this._list.getFocus();\n\t\treturn new NotebookDiffEditorSelection(selections);\n\t}\n\n\ttoggleNotebookCellSelection(cell: IGenericCellViewModel) {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\n\tupdatePerformanceMetadata(cellId: string, executionId: string, duration: number, rendererId: string): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\n\tasync focusNotebookCell(cell: IGenericCellViewModel, focus: 'output' | 'editor' | 'container'): Promise<void> {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\n\tasync focusNextNotebookCell(cell: IGenericCellViewModel, focus: 'output' | 'editor' | 'container'): Promise<void> {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\n\tdidFocusOutputInputChange(inputFocused: boolean): void {\n\t\t// noop\n\t}\n\n\tgetScrollTop() {\n\t\treturn this._list?.scrollTop ?? 0;\n\t}\n\n\tgetScrollHeight() {\n\t\treturn this._list?.scrollHeight ?? 0;\n\t}\n\n\tgetScrollPosition(): IEditorPaneScrollPosition {\n\t\treturn {\n\t\t\tscrollTop: this.getScrollTop(),\n\t\t\tscrollLeft: this._list?.scrollLeft ?? 0\n\t\t};\n\t}\n\n\tsetScrollPosition(scrollPosition: IEditorPaneScrollPosition): void {\n\t\tif (!this._list) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._list.scrollTop = scrollPosition.scrollTop;\n\t\tif (scrollPosition.scrollLeft !== undefined) {\n\t\t\tthis._list.scrollLeft = scrollPosition.scrollLeft;\n\t\t}\n\t}\n\n\tdelegateVerticalScrollbarPointerDown(browserEvent: PointerEvent) {\n\t\tthis._list?.delegateVerticalScrollbarPointerDown(browserEvent);\n\t}\n\n\tupdateOutputHeight(cellInfo: IDiffCellInfo, output: ICellOutputViewModel, outputHeight: number, isInit: boolean): void {\n\t\tconst diffElement = cellInfo.diffElement;\n\t\tconst cell = this.getCellByInfo(cellInfo);\n\t\tconst outputIndex = cell.outputsViewModels.indexOf(output);\n\n\t\tif (diffElement instanceof SideBySideDiffElementViewModel) {\n\t\t\tconst info = CellUri.parse(cellInfo.cellUri);\n\t\t\tif (!info) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdiffElement.updateOutputHeight(info.notebook.toString() === this._model?.original.resource.toString() ? DiffSide.Original : DiffSide.Modified, outputIndex, outputHeight);\n\t\t} else {\n\t\t\tdiffElement.updateOutputHeight(diffElement.type === 'insert' ? DiffSide.Modified : DiffSide.Original, outputIndex, outputHeight);\n\t\t}\n\n\t\tif (isInit) {\n\t\t\tthis._onDidDynamicOutputRendered.fire({ cell, output });\n\t\t}\n\t}\n\n\tsetMarkupCellEditState(cellId: string, editState: CellEditState): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\tdidStartDragMarkupCell(cellId: string, event: { dragOffsetY: number }): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\tdidDragMarkupCell(cellId: string, event: { dragOffsetY: number }): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\tdidEndDragMarkupCell(cellId: string): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\tdidDropMarkupCell(cellId: string) {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\tdidResizeOutput(cellId: string): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\n\tprotected createEditor(parent: HTMLElement): void {\n\t\tthis._rootElement = DOM.append(parent, DOM.$('.notebook-text-diff-editor'));\n\t\tthis._overflowContainer = document.createElement('div');\n\t\tthis._overflowContainer.classList.add('notebook-overflow-widget-container', 'monaco-editor');\n\t\tDOM.append(parent, this._overflowContainer);\n\n\t\tconst renderers = [\n\t\t\tthis.instantiationService.createInstance(CellDiffSingleSideRenderer, this),\n\t\t\tthis.instantiationService.createInstance(CellDiffSideBySideRenderer, this),\n\t\t\tthis.instantiationService.createInstance(CellDiffPlaceholderRenderer, this),\n\t\t];\n\n\t\tthis._listViewContainer = DOM.append(this._rootElement, DOM.$('.notebook-diff-list-view'));\n\n\t\tthis._list = this.instantiationService.createInstance(\n\t\t\tNotebookTextDiffList,\n\t\t\t'NotebookTextDiff',\n\t\t\tthis._listViewContainer,\n\t\t\tthis.instantiationService.createInstance(NotebookCellTextDiffListDelegate, this.window),\n\t\t\trenderers,\n\t\t\tthis.contextKeyService,\n\t\t\t{\n\t\t\t\tsetRowLineHeight: false,\n\t\t\t\tsetRowHeight: false,\n\t\t\t\tsupportDynamicHeights: true,\n\t\t\t\thorizontalScrolling: false,\n\t\t\t\tkeyboardSupport: false,\n\t\t\t\tmouseSupport: true,\n\t\t\t\tmultipleSelectionSupport: false,\n\t\t\t\ttypeNavigationEnabled: true,\n\t\t\t\tpaddingBottom: 0,\n\t\t\t\t// transformOptimization: (isMacintosh && isNative) || getTitleBarStyle(this.configurationService, this.environmentService) === 'native',\n\t\t\t\tstyleController: (_suffix: string) => { return this._list; },\n\t\t\t\toverrideStyles: {\n\t\t\t\t\tlistBackground: editorBackground,\n\t\t\t\t\tlistActiveSelectionBackground: editorBackground,\n\t\t\t\t\tlistActiveSelectionForeground: foreground,\n\t\t\t\t\tlistFocusAndSelectionBackground: editorBackground,\n\t\t\t\t\tlistFocusAndSelectionForeground: foreground,\n\t\t\t\t\tlistFocusBackground: editorBackground,\n\t\t\t\t\tlistFocusForeground: foreground,\n\t\t\t\t\tlistHoverForeground: foreground,\n\t\t\t\t\tlistHoverBackground: editorBackground,\n\t\t\t\t\tlistHoverOutline: focusBorder,\n\t\t\t\t\tlistFocusOutline: focusBorder,\n\t\t\t\t\tlistInactiveSelectionBackground: editorBackground,\n\t\t\t\t\tlistInactiveSelectionForeground: foreground,\n\t\t\t\t\tlistInactiveFocusBackground: editorBackground,\n\t\t\t\t\tlistInactiveFocusOutline: editorBackground,\n\t\t\t\t},\n\t\t\t\taccessibilityProvider: {\n\t\t\t\t\tgetAriaLabel() { return null; },\n\t\t\t\t\tgetWidgetAriaLabel() {\n\t\t\t\t\t\treturn nls.localize('notebookTreeAriaLabel', \"Notebook Text Diff\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t// focusNextPreviousDelegate: {\n\t\t\t\t// \tonFocusNext: (applyFocusNext: () => void) => this._updateForCursorNavigationMode(applyFocusNext),\n\t\t\t\t// \tonFocusPrevious: (applyFocusPrevious: () => void) => this._updateForCursorNavigationMode(applyFocusPrevious),\n\t\t\t\t// }\n\t\t\t}\n\t\t);\n\n\t\tthis._register(this._list);\n\t\tthis._register(this._list.onMouseUp(e => {\n\t\t\tif (e.element) {\n\t\t\t\tif (typeof e.index === 'number') {\n\t\t\t\t\tthis._list.setFocus([e.index]);\n\t\t\t\t}\n\t\t\t\tthis._onMouseUp.fire({ event: e.browserEvent, target: e.element });\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this._list.onDidScroll(() => {\n\t\t\tthis._onDidScroll.fire();\n\t\t}));\n\n\t\tthis._register(this._list.onDidChangeFocus(() => this._onDidChangeSelection.fire({ reason: EditorPaneSelectionChangeReason.USER })));\n\n\t\tthis._overviewRulerContainer = document.createElement('div');\n\t\tthis._overviewRulerContainer.classList.add('notebook-overview-ruler-container');\n\t\tthis._rootElement.appendChild(this._overviewRulerContainer);\n\t\tthis._registerOverviewRuler();\n\n\t\t// transparent cover\n\t\tthis._webviewTransparentCover = DOM.append(this._list.rowsContainer, $('.webview-cover'));\n\t\tthis._webviewTransparentCover.style.display = 'none';\n\n\t\tthis._register(DOM.addStandardDisposableGenericMouseDownListener(this._overflowContainer, (e: StandardMouseEvent) => {\n\t\t\tif (e.target.classList.contains('slider') && this._webviewTransparentCover) {\n\t\t\t\tthis._webviewTransparentCover.style.display = 'block';\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(DOM.addStandardDisposableGenericMouseUpListener(this._overflowContainer, () => {\n\t\t\tif (this._webviewTransparentCover) {\n\t\t\t\t// no matter when\n\t\t\t\tthis._webviewTransparentCover.style.display = 'none';\n\t\t\t}\n\t\t}));\n\n\t\tthis._register(this._list.onDidScroll(e => {\n\t\t\tthis._webviewTransparentCover!.style.top = `${e.scrollTop}px`;\n\t\t}));\n\t}\n\n\tprivate _registerOverviewRuler() {\n\t\tthis._overviewRuler = this._register(this.instantiationService.createInstance(NotebookDiffOverviewRuler, this, NotebookTextDiffEditor.ENTIRE_DIFF_OVERVIEW_WIDTH, this._overviewRulerContainer));\n\t}\n\n\tprivate _updateOutputsOffsetsInWebview(scrollTop: number, scrollHeight: number, activeWebview: BackLayerWebView<IDiffCellInfo>, getActiveNestedCell: (diffElement: DiffElementCellViewModelBase) => DiffNestedCellViewModel | undefined, diffSide: DiffSide) {\n\t\tactiveWebview.element.style.height = `${scrollHeight}px`;\n\n\t\tif (activeWebview.insetMapping) {\n\t\t\tconst updateItems: IDisplayOutputLayoutUpdateRequest[] = [];\n\t\t\tconst removedItems: ICellOutputViewModel[] = [];\n\t\t\tactiveWebview.insetMapping.forEach((value, key) => {\n\t\t\t\tconst cell = getActiveNestedCell(value.cellInfo.diffElement);\n\t\t\t\tif (!cell) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst viewIndex = this._list.indexOf(value.cellInfo.diffElement);\n\n\t\t\t\tif (viewIndex === undefined) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (cell.outputsViewModels.indexOf(key) < 0) {\n\t\t\t\t\t// output is already gone\n\t\t\t\t\tremovedItems.push(key);\n\t\t\t\t} else {\n\t\t\t\t\tconst cellTop = this._list.getCellViewScrollTop(value.cellInfo.diffElement);\n\t\t\t\t\tconst outputIndex = cell.outputsViewModels.indexOf(key);\n\t\t\t\t\tconst outputOffset = value.cellInfo.diffElement.getOutputOffsetInCell(diffSide, outputIndex);\n\t\t\t\t\tupdateItems.push({\n\t\t\t\t\t\tcell,\n\t\t\t\t\t\toutput: key,\n\t\t\t\t\t\tcellTop: cellTop,\n\t\t\t\t\t\toutputOffset: outputOffset,\n\t\t\t\t\t\tforceDisplay: false\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t\tactiveWebview.removeInsets(removedItems);\n\n\t\t\tif (updateItems.length) {\n\t\t\t\tactiveWebview.updateScrollTops(updateItems, []);\n\t\t\t}\n\t\t}\n\t}\n\n\toverride async setInput(input: NotebookDiffEditorInput, options: INotebookEditorOptions | undefined, context: IEditorOpenContext, token: CancellationToken): Promise<void> {\n\t\tawait super.setInput(input, options, context, token);\n\n\t\tconst model = await input.resolve();\n\t\tif (this._model !== model) {\n\t\t\tthis._detachModel();\n\t\t\tthis._model = model;\n\t\t\tthis._attachModel();\n\t\t}\n\n\t\tthis._model = model;\n\t\tif (this._model === null) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._revealFirst = true;\n\n\t\tthis._modifiedResourceDisposableStore.clear();\n\n\t\tthis._layoutCancellationTokenSource = new CancellationTokenSource();\n\n\t\tthis._modifiedResourceDisposableStore.add(Event.any(this._model.original.notebook.onDidChangeContent, this._model.modified.notebook.onDidChangeContent)(e => {\n\t\t\tif (this._model !== null) {\n\t\t\t\tthis._layoutCancellationTokenSource?.dispose();\n\t\t\t\tthis._layoutCancellationTokenSource = new CancellationTokenSource();\n\t\t\t\tthis.updateLayout(this._layoutCancellationTokenSource.token);\n\t\t\t}\n\t\t}));\n\n\t\tawait this._createOriginalWebview(generateUuid(), this._model.original.viewType, this._model.original.resource);\n\t\tif (this._originalWebview) {\n\t\t\tthis._modifiedResourceDisposableStore.add(this._originalWebview);\n\t\t}\n\t\tawait this._createModifiedWebview(generateUuid(), this._model.modified.viewType, this._model.modified.resource);\n\t\tif (this._modifiedWebview) {\n\t\t\tthis._modifiedResourceDisposableStore.add(this._modifiedWebview);\n\t\t}\n\n\t\tawait this.updateLayout(this._layoutCancellationTokenSource.token, options?.cellSelections ? cellRangesToIndexes(options.cellSelections) : undefined);\n\t}\n\n\tprivate _detachModel() {\n\t\tthis._localStore.clear();\n\t\tthis._originalWebview?.dispose();\n\t\tthis._originalWebview?.element.remove();\n\t\tthis._originalWebview = null;\n\t\tthis._modifiedWebview?.dispose();\n\t\tthis._modifiedWebview?.element.remove();\n\t\tthis._modifiedWebview = null;\n\n\t\tthis.notebookDiffViewModel?.dispose();\n\t\tthis.notebookDiffViewModel = undefined;\n\n\t\tthis._modifiedResourceDisposableStore.clear();\n\t\tthis._list.clear();\n\n\t}\n\tprivate _attachModel() {\n\t\tthis._eventDispatcher = new NotebookDiffEditorEventDispatcher();\n\t\tconst updateInsets = () => {\n\t\t\tDOM.scheduleAtNextAnimationFrame(this.window, () => {\n\t\t\t\tif (this._isDisposed) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (this._modifiedWebview) {\n\t\t\t\t\tthis._updateOutputsOffsetsInWebview(this._list.scrollTop, this._list.scrollHeight, this._modifiedWebview, (diffElement: DiffElementCellViewModelBase) => {\n\t\t\t\t\t\treturn diffElement.modified;\n\t\t\t\t\t}, DiffSide.Modified);\n\t\t\t\t}\n\n\t\t\t\tif (this._originalWebview) {\n\t\t\t\t\tthis._updateOutputsOffsetsInWebview(this._list.scrollTop, this._list.scrollHeight, this._originalWebview, (diffElement: DiffElementCellViewModelBase) => {\n\t\t\t\t\t\treturn diffElement.original;\n\t\t\t\t\t}, DiffSide.Original);\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\n\t\tthis._localStore.add(this._list.onDidChangeContentHeight(() => {\n\t\t\tupdateInsets();\n\t\t}));\n\n\t\tthis._localStore.add(this._eventDispatcher.onDidChangeCellLayout(() => {\n\t\t\tupdateInsets();\n\t\t}));\n\n\t\tif (this._model) {\n\t\t\tconst unchangedEditorRegions = this._localStore.add(new UnchangedEditorRegionsService(this.configurationService, this.editorWorkerService, this.textModelResolverService, this.textConfigurationService, this.fontInfo.lineHeight));\n\t\t\tconst vm = this.notebookDiffViewModel = this._register(new NotebookDiffViewModel(this._model, this.notebookEditorWorkerService, this.configurationService, this._eventDispatcher!, this.notebookService, unchangedEditorRegions, this.fontInfo, undefined));\n\t\t\tthis._localStore.add(this.notebookDiffViewModel.onDidChangeItems(e => {\n\t\t\t\tthis._list.splice(e.start, e.deleteCount, e.elements);\n\t\t\t\tif (this.isOverviewRulerEnabled()) {\n\t\t\t\t\tthis._overviewRuler.updateViewModels(vm.items, this._eventDispatcher);\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t}\n\n\tprivate async _createModifiedWebview(id: string, viewType: string, resource: URI): Promise<void> {\n\t\tthis._modifiedWebview?.dispose();\n\n\t\tthis._modifiedWebview = this.instantiationService.createInstance(BackLayerWebView, this, id, viewType, resource, {\n\t\t\t...this._notebookOptions.computeDiffWebviewOptions(),\n\t\t\tfontFamily: this._generateFontFamily()\n\t\t}, undefined) as BackLayerWebView<IDiffCellInfo>;\n\t\t// attach the webview container to the DOM tree first\n\t\tthis._list.rowsContainer.insertAdjacentElement('afterbegin', this._modifiedWebview.element);\n\t\tthis._modifiedWebview.createWebview(this.window);\n\t\tthis._modifiedWebview.element.style.width = `calc(50% - 16px)`;\n\t\tthis._modifiedWebview.element.style.left = `calc(50%)`;\n\t}\n\t_generateFontFamily(): string {\n\t\treturn this.fontInfo.fontFamily ?? `\"SF Mono\", Monaco, Menlo, Consolas, \"Ubuntu Mono\", \"Liberation Mono\", \"DejaVu Sans Mono\", \"Courier New\", monospace`;\n\t}\n\n\tprivate async _createOriginalWebview(id: string, viewType: string, resource: URI): Promise<void> {\n\t\tthis._originalWebview?.dispose();\n\n\t\tthis._originalWebview = this.instantiationService.createInstance(BackLayerWebView, this, id, viewType, resource, {\n\t\t\t...this._notebookOptions.computeDiffWebviewOptions(),\n\t\t\tfontFamily: this._generateFontFamily()\n\t\t}, undefined) as BackLayerWebView<IDiffCellInfo>;\n\t\t// attach the webview container to the DOM tree first\n\t\tthis._list.rowsContainer.insertAdjacentElement('afterbegin', this._originalWebview.element);\n\t\tthis._originalWebview.createWebview(this.window);\n\t\tthis._originalWebview.element.style.width = `calc(50% - 16px)`;\n\t\tthis._originalWebview.element.style.left = `16px`;\n\t}\n\n\toverride setOptions(options: INotebookEditorOptions | undefined): void {\n\t\tconst selections = options?.cellSelections ? cellRangesToIndexes(options.cellSelections) : undefined;\n\t\tif (selections) {\n\t\t\tthis._list.setFocus(selections);\n\t\t}\n\t}\n\n\tasync updateLayout(token: CancellationToken, selections?: number[]) {\n\t\tif (!this._model || !this.notebookDiffViewModel) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst diffResult = await this.notebookDiffViewModel.computeDiff(token);\n\t\tif (token.isCancellationRequested) {\n\t\t\t// after await the editor might be disposed.\n\t\t\treturn;\n\t\t}\n\n\t\tif (diffResult) {\n\t\t\tthis._originalWebview?.removeInsets([...this._originalWebview?.insetMapping.keys()]);\n\t\t\tthis._modifiedWebview?.removeInsets([...this._modifiedWebview?.insetMapping.keys()]);\n\n\t\t\tif (this._revealFirst && diffResult.firstChangeIndex !== -1 && diffResult.firstChangeIndex < this._list.length) {\n\t\t\t\tthis._revealFirst = false;\n\t\t\t\tthis._list.setFocus([diffResult.firstChangeIndex]);\n\t\t\t\tthis._list.reveal(diffResult.firstChangeIndex, 0.3);\n\t\t\t}\n\t\t}\n\n\t\tif (selections) {\n\t\t\tthis._list.setFocus(selections);\n\t\t}\n\t}\n\n\tscheduleOutputHeightAck(cellInfo: IDiffCellInfo, outputId: string, height: number) {\n\t\tconst diffElement = cellInfo.diffElement;\n\t\t// const activeWebview = diffSide === DiffSide.Modified ? this._modifiedWebview : this._originalWebview;\n\t\tlet diffSide = DiffSide.Original;\n\n\t\tif (diffElement instanceof SideBySideDiffElementViewModel) {\n\t\t\tconst info = CellUri.parse(cellInfo.cellUri);\n\t\t\tif (!info) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdiffSide = info.notebook.toString() === this._model?.original.resource.toString() ? DiffSide.Original : DiffSide.Modified;\n\t\t} else {\n\t\t\tdiffSide = diffElement.type === 'insert' ? DiffSide.Modified : DiffSide.Original;\n\t\t}\n\n\t\tconst webview = diffSide === DiffSide.Modified ? this._modifiedWebview : this._originalWebview;\n\n\t\tDOM.scheduleAtNextAnimationFrame(this.window, () => {\n\t\t\twebview?.ackHeight([{ cellId: cellInfo.cellId, outputId, height }]);\n\t\t}, 10);\n\t}\n\n\tprivate pendingLayouts = new WeakMap<IDiffElementViewModelBase, IDisposable>();\n\n\n\tlayoutNotebookCell(cell: IDiffElementViewModelBase, height: number) {\n\t\tconst relayout = (cell: IDiffElementViewModelBase, height: number) => {\n\t\t\tthis._list.updateElementHeight2(cell, height);\n\t\t};\n\n\t\tif (this.pendingLayouts.has(cell)) {\n\t\t\tthis.pendingLayouts.get(cell)!.dispose();\n\t\t}\n\n\t\tlet r: () => void;\n\t\tconst layoutDisposable = DOM.scheduleAtNextAnimationFrame(this.window, () => {\n\t\t\tthis.pendingLayouts.delete(cell);\n\n\t\t\trelayout(cell, height);\n\t\t\tr();\n\t\t});\n\n\t\tthis.pendingLayouts.set(cell, toDisposable(() => {\n\t\t\tlayoutDisposable.dispose();\n\t\t\tr();\n\t\t}));\n\n\t\treturn new Promise<void>(resolve => { r = resolve; });\n\t}\n\n\tsetScrollTop(scrollTop: number): void {\n\t\tthis._list.scrollTop = scrollTop;\n\t}\n\n\ttriggerScroll(event: IMouseWheelEvent) {\n\t\tthis._list.triggerScrollFromMouseWheelEvent(event);\n\t}\n\n\tpreviousChange(): void {\n\t\tif (!this.notebookDiffViewModel) {\n\t\t\treturn;\n\t\t}\n\t\tlet currFocus = this._list.getFocus()[0];\n\n\t\tif (isNaN(currFocus) || currFocus < 0) {\n\t\t\tcurrFocus = 0;\n\t\t}\n\n\t\t// find the index of previous change\n\t\tlet prevChangeIndex = currFocus - 1;\n\t\tconst currentViewModels = this.notebookDiffViewModel.items;\n\t\twhile (prevChangeIndex >= 0) {\n\t\t\tconst vm = currentViewModels[prevChangeIndex];\n\t\t\tif (vm.type !== 'unchanged' && vm.type !== 'placeholder') {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tprevChangeIndex--;\n\t\t}\n\n\t\tif (prevChangeIndex >= 0) {\n\t\t\tthis._list.setFocus([prevChangeIndex]);\n\t\t\tthis._list.reveal(prevChangeIndex);\n\t\t} else {\n\t\t\t// go to the last one\n\t\t\tconst index = findLastIdx(currentViewModels, vm => vm.type !== 'unchanged' && vm.type !== 'placeholder');\n\t\t\tif (index >= 0) {\n\t\t\t\tthis._list.setFocus([index]);\n\t\t\t\tthis._list.reveal(index);\n\t\t\t}\n\t\t}\n\t}\n\n\tnextChange(): void {\n\t\tif (!this.notebookDiffViewModel) {\n\t\t\treturn;\n\t\t}\n\t\tlet currFocus = this._list.getFocus()[0];\n\n\t\tif (isNaN(currFocus) || currFocus < 0) {\n\t\t\tcurrFocus = 0;\n\t\t}\n\n\t\t// find the index of next change\n\t\tlet nextChangeIndex = currFocus + 1;\n\t\tconst currentViewModels = this.notebookDiffViewModel.items;\n\t\twhile (nextChangeIndex < currentViewModels.length) {\n\t\t\tconst vm = currentViewModels[nextChangeIndex];\n\t\t\tif (vm.type !== 'unchanged' && vm.type !== 'placeholder') {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tnextChangeIndex++;\n\t\t}\n\n\t\tif (nextChangeIndex < currentViewModels.length) {\n\t\t\tthis._list.setFocus([nextChangeIndex]);\n\t\t\tthis._list.reveal(nextChangeIndex);\n\t\t} else {\n\t\t\t// go to the first one\n\t\t\tconst index = currentViewModels.findIndex(vm => vm.type !== 'unchanged' && vm.type !== 'placeholder');\n\t\t\tif (index >= 0) {\n\t\t\t\tthis._list.setFocus([index]);\n\t\t\t\tthis._list.reveal(index);\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateOutput(cellDiffViewModel: DiffElementCellViewModelBase, cellViewModel: DiffNestedCellViewModel, output: IInsetRenderOutput, getOffset: () => number, diffSide: DiffSide): void {\n\t\tthis._insetModifyQueueByOutputId.queue(output.source.model.outputId + (diffSide === DiffSide.Modified ? '-right' : 'left'), async () => {\n\t\t\tconst activeWebview = diffSide === DiffSide.Modified ? this._modifiedWebview : this._originalWebview;\n\t\t\tif (!activeWebview) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!activeWebview.insetMapping.has(output.source)) {\n\t\t\t\tconst cellTop = this._list.getCellViewScrollTop(cellDiffViewModel);\n\t\t\t\tawait activeWebview.createOutput({ diffElement: cellDiffViewModel, cellHandle: cellViewModel.handle, cellId: cellViewModel.id, cellUri: cellViewModel.uri }, output, cellTop, getOffset());\n\t\t\t} else {\n\t\t\t\tconst cellTop = this._list.getCellViewScrollTop(cellDiffViewModel);\n\t\t\t\tconst outputIndex = cellViewModel.outputsViewModels.indexOf(output.source);\n\t\t\t\tconst outputOffset = cellDiffViewModel.getOutputOffsetInCell(diffSide, outputIndex);\n\t\t\t\tactiveWebview.updateScrollTops([{\n\t\t\t\t\tcell: cellViewModel,\n\t\t\t\t\toutput: output.source,\n\t\t\t\t\tcellTop,\n\t\t\t\t\toutputOffset,\n\t\t\t\t\tforceDisplay: true\n\t\t\t\t}], []);\n\t\t\t}\n\t\t});\n\t}\n\n\tupdateMarkupCellHeight() {\n\t\t// TODO\n\t}\n\n\tgetCellByInfo(cellInfo: IDiffCellInfo): IGenericCellViewModel {\n\t\treturn cellInfo.diffElement.getCellByUri(cellInfo.cellUri);\n\t}\n\n\tgetCellById(cellId: string): IGenericCellViewModel | undefined {\n\t\tthrow new Error('Not implemented');\n\t}\n\n\tremoveInset(cellDiffViewModel: DiffElementCellViewModelBase, cellViewModel: DiffNestedCellViewModel, displayOutput: ICellOutputViewModel, diffSide: DiffSide) {\n\t\tthis._insetModifyQueueByOutputId.queue(displayOutput.model.outputId + (diffSide === DiffSide.Modified ? '-right' : 'left'), async () => {\n\t\t\tconst activeWebview = diffSide === DiffSide.Modified ? this._modifiedWebview : this._originalWebview;\n\t\t\tif (!activeWebview) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!activeWebview.insetMapping.has(displayOutput)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tactiveWebview.removeInsets([displayOutput]);\n\t\t});\n\t}\n\n\tshowInset(cellDiffViewModel: DiffElementCellViewModelBase, cellViewModel: DiffNestedCellViewModel, displayOutput: ICellOutputViewModel, diffSide: DiffSide) {\n\t\tthis._insetModifyQueueByOutputId.queue(displayOutput.model.outputId + (diffSide === DiffSide.Modified ? '-right' : 'left'), async () => {\n\t\t\tconst activeWebview = diffSide === DiffSide.Modified ? this._modifiedWebview : this._originalWebview;\n\t\t\tif (!activeWebview) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!activeWebview.insetMapping.has(displayOutput)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst cellTop = this._list.getCellViewScrollTop(cellDiffViewModel);\n\t\t\tconst outputIndex = cellViewModel.outputsViewModels.indexOf(displayOutput);\n\t\t\tconst outputOffset = cellDiffViewModel.getOutputOffsetInCell(diffSide, outputIndex);\n\t\t\tactiveWebview.updateScrollTops([{\n\t\t\t\tcell: cellViewModel,\n\t\t\t\toutput: displayOutput,\n\t\t\t\tcellTop,\n\t\t\t\toutputOffset,\n\t\t\t\tforceDisplay: true,\n\t\t\t}], []);\n\t\t});\n\t}\n\n\thideInset(cellDiffViewModel: DiffElementCellViewModelBase, cellViewModel: DiffNestedCellViewModel, output: ICellOutputViewModel) {\n\t\tthis._modifiedWebview?.hideInset(output);\n\t\tthis._originalWebview?.hideInset(output);\n\t}\n\n\t// private async _resolveWebview(rightEditor: boolean): Promise<BackLayerWebView | null> {\n\t// \tif (rightEditor) {\n\n\t// \t}\n\t// }\n\n\tgetDomNode() {\n\t\treturn this._rootElement;\n\t}\n\n\tgetOverflowContainerDomNode(): HTMLElement {\n\t\treturn this._overflowContainer;\n\t}\n\n\toverride getControl(): INotebookTextDiffEditor | undefined {\n\t\treturn this;\n\t}\n\n\toverride clearInput(): void {\n\t\tsuper.clearInput();\n\n\t\tthis._modifiedResourceDisposableStore.clear();\n\t\tthis._list?.splice(0, this._list?.length || 0);\n\t\tthis._model = null;\n\t\tthis.notebookDiffViewModel?.dispose();\n\t\tthis.notebookDiffViewModel = undefined;\n\t}\n\n\tdeltaCellOutputContainerClassNames(diffSide: DiffSide, cellId: string, added: string[], removed: string[]) {\n\t\tif (diffSide === DiffSide.Original) {\n\t\t\tthis._originalWebview?.deltaCellContainerClassNames(cellId, added, removed);\n\t\t} else {\n\t\t\tthis._modifiedWebview?.deltaCellContainerClassNames(cellId, added, removed);\n\t\t}\n\t}\n\n\tgetLayoutInfo(): NotebookLayoutInfo {\n\t\tif (!this._list) {\n\t\t\tthrow new Error('Editor is not initalized successfully');\n\t\t}\n\n\t\treturn {\n\t\t\twidth: this._dimension!.width,\n\t\t\theight: this._dimension!.height,\n\t\t\tfontInfo: this.fontInfo,\n\t\t\tscrollHeight: this._list?.getScrollHeight() ?? 0,\n\t\t\tstickyHeight: 0,\n\t\t};\n\t}\n\n\tlayout(dimension: DOM.Dimension, _position: DOM.IDomPosition): void {\n\t\tthis._rootElement.classList.toggle('mid-width', dimension.width < 1000 && dimension.width >= 600);\n\t\tthis._rootElement.classList.toggle('narrow-width', dimension.width < 600);\n\t\tconst overviewRulerEnabled = this.isOverviewRulerEnabled();\n\t\tthis._dimension = dimension.with(dimension.width - (overviewRulerEnabled ? NotebookTextDiffEditor.ENTIRE_DIFF_OVERVIEW_WIDTH : 0));\n\n\t\tthis._listViewContainer.style.height = `${dimension.height}px`;\n\t\tthis._listViewContainer.style.width = `${this._dimension.width}px`;\n\n\t\tthis._list?.layout(this._dimension.height, this._dimension.width);\n\n\t\tif (this._modifiedWebview) {\n\t\t\tthis._modifiedWebview.element.style.width = `calc(50% - 16px)`;\n\t\t\tthis._modifiedWebview.element.style.left = `calc(50%)`;\n\t\t}\n\n\t\tif (this._originalWebview) {\n\t\t\tthis._originalWebview.element.style.width = `calc(50% - 16px)`;\n\t\t\tthis._originalWebview.element.style.left = `16px`;\n\t\t}\n\n\t\tif (this._webviewTransparentCover) {\n\t\t\tthis._webviewTransparentCover.style.height = `${this._dimension.height}px`;\n\t\t\tthis._webviewTransparentCover.style.width = `${this._dimension.width}px`;\n\t\t}\n\n\t\tif (overviewRulerEnabled) {\n\t\t\tthis._overviewRuler.layout();\n\t\t}\n\n\t\tthis._eventDispatcher?.emit([new NotebookDiffLayoutChangedEvent({ width: true, fontInfo: true }, this.getLayoutInfo())]);\n\t}\n\n\toverride dispose() {\n\t\tthis._isDisposed = true;\n\t\tthis._layoutCancellationTokenSource?.dispose();\n\t\tthis._detachModel();\n\t\tsuper.dispose();\n\t}\n}\n\nregisterZIndex(ZIndex.Base, 10, 'notebook-diff-view-viewport-slider');\n\nregisterThemingParticipant((theme, collector) => {\n\tconst diffDiagonalFillColor = theme.getColor(diffDiagonalFill);\n\tcollector.addRule(`\n\t.notebook-text-diff-editor .diagonal-fill {\n\t\tbackground-image: linear-gradient(\n\t\t\t-45deg,\n\t\t\t${diffDiagonalFillColor} 12.5%,\n\t\t\t#0000 12.5%, #0000 50%,\n\t\t\t${diffDiagonalFillColor} 50%, ${diffDiagonalFillColor} 62.5%,\n\t\t\t#0000 62.5%, #0000 100%\n\t\t);\n\t\tbackground-size: 8px 8px;\n\t}\n\t`);\n\n\tcollector.addRule(`.notebook-text-diff-editor .cell-body { margin: ${DIFF_CELL_MARGIN}px; }`);\n\t// We do not want a left margin, as we add an overlay for expanind the collapsed/hidden cells.\n\tcollector.addRule(`.notebook-text-diff-editor .cell-placeholder-body { margin: ${DIFF_CELL_MARGIN}px 0; }`);\n});\n"],
  "mappings": ";;;;;;;;;;;;AAKA,YAAY,SAAS;AACrB,YAAY,SAAS;AACrB,SAAS,mBAAmB;AAC5B,SAAS,uBAAuB;AAChC,SAAS,yBAAyB;AAClC,SAAS,eAAe,kCAAkC;AAC1D,SAAS,iCAAiC,kCAAkC,oBAAoB,2BAA2B,sBAAsB,iCAAiC,0BAA0B,gCAAgC;AAC5O,SAAS,yCAAyC;AAClD,SAAS,oBAAoB;AAC7B,SAAS,+BAA+B;AACxC,SAAS,mBAAmB,+BAA+B;AAC3D,SAAS,8BAA8B,2BAA2B,sCAAsC;AACxG,SAAS,6BAA6B;AACtC,SAAS,6BAA6B,4BAA4B,4BAA4B,kCAAkC,4BAA4B;AAC5J,SAAS,0BAA0B;AACnC,SAAS,kBAAkB,kBAAkB,aAAa,kBAAkB;AAC5E,SAAS,oCAAoC;AAC7C,SAAS,6BAA6B;AACtC,SAAS,kBAAkB,0BAA0B;AACrD,SAAS,cAAc,gBAAgB;AACvC,SAAS,kBAAkB;AAC3B,SAAS,eAAe,sBAAsB,mCAAmC,uBAAuB,oBAAoB,gCAAgC,8BAA8B;AAC1L,SAAS,UAAU,kBAAkB,eAAe,yBAAyB,8BAA8B;AAC3G,SAAS,SAAS,aAAa;AAC/B,SAAS,iBAAiB,aAAa,oBAAoB;AAC3D,SAAS,kBAAkB;AAC3B,SAAS,SAAS,0BAA0B,yBAAyB,uBAAuB;AAC5F,SAAS,WAAW;AACpB,SAAS,sBAAsB;AAC/B,SAAS,oBAAoB;AAC7B,SAAS,kBAAkB,0BAA0B;AACrD,SAAS,+BAA+B;AACxC,SAAS,kBAAkB,mCAAmC;AAC9D,SAAS,mCAAmC,sCAAsC;AAClF,SAAS,wBAAwB;AACjC,SAAS,uBAAuB;AAChC,SAAS,0BAA0B;AACnC,SAAS,sBAAsB;AAC/B,SAAS,qBAAqB,2BAA2B;AACzD,SAAS,iCAAiC;AAC1C,SAAS,gBAAgB,cAAc;AACvC,SAAS,6BAA6B;AACtC,SAAS,wBAAwB;AACjC,SAAS,4BAA4B;AACrC,SAAS,yBAAyB;AAClC,SAAS,yCAAyC;AAClD,SAAS,qCAAqC;AAE9C,MAAM,IAAI,IAAI;AAEd,MAAM,4BAA4D;AAAA,EAEjE,YACkB,YAChB;AADgB;AAAA,EACd;AAAA,EA3DL,OAuDkE;AAAA;AAAA;AAAA,EAMjE,QAAQ,OAA+D;AACtE,QAAI,EAAE,iBAAiB,8BAA8B;AACpD,aAAO,iCAAiC;AAAA,IACzC;AAEA,QAAI,KAAK,WAAW,WAAW,MAAM,WAAW,QAAQ;AACvD,aAAO,iCAAiC;AAAA,IACzC;AAEA,aAAS,IAAI,GAAG,IAAI,KAAK,WAAW,QAAQ,KAAK;AAChD,UAAI,KAAK,WAAW,CAAC,MAAM,MAAM,WAAW,CAAC,GAAG;AAC/C,eAAO,iCAAiC;AAAA,MACzC;AAAA,IACD;AAEA,WAAO,iCAAiC;AAAA,EACzC;AAAA,EAEA,QAAQ,SAAiD;AACxD,UAAM,kBAA0C;AAAA,MAC/C,gBAAgB,oBAAoB,KAAK,UAAU;AAAA,IACpD;AAEA,WAAO,OAAO,iBAAiB,OAAO;AACtC,WAAO;AAAA,EACR;AACD;AAEO,IAAM,yBAAN,cAAqC,WAA+H;AAAA,EAyD1K,YACC,OACwC,sBACzB,cACsB,mBACU,6BACP,sBACrB,kBACF,gBACkB,iBACI,qBACH,0BACgB,0BACnD;AACD,UAAM,uBAAuB,IAAI,OAAO,kBAAkB,cAAc,cAAc;AAZ9C;AAEH;AACU;AACP;AAGL;AACI;AACH;AACgB;AAGpD,SAAK,mBAAmB,qBAAqB,eAAe,iBAAiB,KAAK,QAAQ,OAAO,MAAS;AAC1G,SAAK,UAAU,KAAK,gBAAgB;AACpC,SAAK,eAAe;AAAA,EACrB;AAAA,EApKD,OAyF2K;AAAA;AAAA;AAAA,EAC1K,OAAuB,6BAA6B;AAAA,EACpD,kBAAkD,kCAAkC;AAAA,EACpF,OAAgB,KAAa;AAAA,EAErB;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,aAAmC;AAAA,EACnC;AAAA,EACA;AAAA,EACA,mBAA2D;AAAA,EAC3D,mBAA2D;AAAA,EAC3D,2BAA+C;AAAA,EAC/C;AAAA,EAES,aAAa,KAAK,UAAU,IAAI,QAAoF,CAAC;AAAA,EACtH,YAAY,KAAK,WAAW;AAAA,EAC3B,eAAe,KAAK,UAAU,IAAI,QAAc,CAAC;AAAA,EACzD,cAA2B,KAAK,aAAa;AAAA,EAC7C,oBAAiC,KAAK,aAAa;AAAA,EACpD;AAAA,EACE;AAAA,EACF,SAA0C;AAAA,EACjC,mCAAmC,KAAK,UAAU,IAAI,gBAAgB,CAAC;AAAA,EAExF,IAAI,YAAY;AACf,WAAO,KAAK,QAAQ,SAAS;AAAA,EAC9B;AAAA,EAEQ;AAAA,EACS,8BAA8B,IAAI,eAAuB;AAAA,EAEhE,8BAA8B,KAAK,UAAU,IAAI,QAAuE,CAAC;AAAA,EACnI,6BAA6B,KAAK,4BAA4B;AAAA,EAEtD;AAAA,EAER,IAAI,kBAAkB;AACrB,WAAO,KAAK;AAAA,EACb;AAAA,EAEiB,cAAc,KAAK,UAAU,IAAI,gBAAgB,CAAC;AAAA,EAE3D;AAAA,EAES,wBAAwB,KAAK,UAAU,IAAI,QAAyC,CAAC;AAAA,EAC7F,uBAAuB,KAAK,sBAAsB;AAAA,EAEnD,cAAuB;AAAA,EAE/B,IAAI,aAAa;AAChB,WAAO,KAAK;AAAA,EACb;AAAA,EAsBA,IAAY,WAAW;AACtB,QAAI,CAAC,KAAK,WAAW;AACpB,WAAK,YAAY,KAAK,eAAe;AAAA,IACtC;AAEA,WAAO,KAAK;AAAA,EACb;AAAA,EAEQ,iBAAiB;AACxB,UAAM,gBAAgB,KAAK,qBAAqB,SAA6B,QAAQ;AACrF,WAAO,iBAAiB,aAAa,KAAK,QAAQ,aAAa,sBAAsB,eAAe,WAAW,YAAY,KAAK,MAAM,EAAE,KAAK,CAAC;AAAA,EAC/I;AAAA,EAEQ,yBAAkC;AACzC,WAAO,KAAK,qBAAqB,SAAS,gBAAgB,iBAAiB,KAAK;AAAA,EACjF;AAAA,EAEA,eAAiD;AAChD,UAAM,aAAa,KAAK,MAAM,SAAS;AACvC,WAAO,IAAI,4BAA4B,UAAU;AAAA,EAClD;AAAA,EAEA,4BAA4B,MAA6B;AAAA,EAEzD;AAAA,EAEA,0BAA0B,QAAgB,aAAqB,UAAkB,YAA0B;AAAA,EAE3G;AAAA,EAEA,MAAM,kBAAkB,MAA6B,OAAyD;AAAA,EAE9G;AAAA,EAEA,MAAM,sBAAsB,MAA6B,OAAyD;AAAA,EAElH;AAAA,EAEA,0BAA0B,cAA6B;AAAA,EAEvD;AAAA,EAEA,eAAe;AACd,WAAO,KAAK,OAAO,aAAa;AAAA,EACjC;AAAA,EAEA,kBAAkB;AACjB,WAAO,KAAK,OAAO,gBAAgB;AAAA,EACpC;AAAA,EAEA,oBAA+C;AAC9C,WAAO;AAAA,MACN,WAAW,KAAK,aAAa;AAAA,MAC7B,YAAY,KAAK,OAAO,cAAc;AAAA,IACvC;AAAA,EACD;AAAA,EAEA,kBAAkB,gBAAiD;AAClE,QAAI,CAAC,KAAK,OAAO;AAChB;AAAA,IACD;AAEA,SAAK,MAAM,YAAY,eAAe;AACtC,QAAI,eAAe,eAAe,QAAW;AAC5C,WAAK,MAAM,aAAa,eAAe;AAAA,IACxC;AAAA,EACD;AAAA,EAEA,qCAAqC,cAA4B;AAChE,SAAK,OAAO,qCAAqC,YAAY;AAAA,EAC9D;AAAA,EAEA,mBAAmB,UAAyB,QAA8B,cAAsB,QAAuB;AACtH,UAAM,cAAc,SAAS;AAC7B,UAAM,OAAO,KAAK,cAAc,QAAQ;AACxC,UAAM,cAAc,KAAK,kBAAkB,QAAQ,MAAM;AAEzD,QAAI,uBAAuB,gCAAgC;AAC1D,YAAM,OAAO,QAAQ,MAAM,SAAS,OAAO;AAC3C,UAAI,CAAC,MAAM;AACV;AAAA,MACD;AAEA,kBAAY,mBAAmB,KAAK,SAAS,SAAS,MAAM,KAAK,QAAQ,SAAS,SAAS,SAAS,IAAI,SAAS,WAAW,SAAS,UAAU,aAAa,YAAY;AAAA,IACzK,OAAO;AACN,kBAAY,mBAAmB,YAAY,SAAS,WAAW,SAAS,WAAW,SAAS,UAAU,aAAa,YAAY;AAAA,IAChI;AAEA,QAAI,QAAQ;AACX,WAAK,4BAA4B,KAAK,EAAE,MAAM,OAAO,CAAC;AAAA,IACvD;AAAA,EACD;AAAA,EAEA,uBAAuB,QAAgB,WAAgC;AAAA,EAEvE;AAAA,EACA,uBAAuB,QAAgB,OAAsC;AAAA,EAE7E;AAAA,EACA,kBAAkB,QAAgB,OAAsC;AAAA,EAExE;AAAA,EACA,qBAAqB,QAAsB;AAAA,EAE3C;AAAA,EACA,kBAAkB,QAAgB;AAAA,EAElC;AAAA,EACA,gBAAgB,QAAsB;AAAA,EAEtC;AAAA,EAEU,aAAa,QAA2B;AACjD,SAAK,eAAe,IAAI,OAAO,QAAQ,IAAI,EAAE,4BAA4B,CAAC;AAC1E,SAAK,qBAAqB,SAAS,cAAc,KAAK;AACtD,SAAK,mBAAmB,UAAU,IAAI,sCAAsC,eAAe;AAC3F,QAAI,OAAO,QAAQ,KAAK,kBAAkB;AAE1C,UAAM,YAAY;AAAA,MACjB,KAAK,qBAAqB,eAAe,4BAA4B,IAAI;AAAA,MACzE,KAAK,qBAAqB,eAAe,4BAA4B,IAAI;AAAA,MACzE,KAAK,qBAAqB,eAAe,6BAA6B,IAAI;AAAA,IAC3E;AAEA,SAAK,qBAAqB,IAAI,OAAO,KAAK,cAAc,IAAI,EAAE,0BAA0B,CAAC;AAEzF,SAAK,QAAQ,KAAK,qBAAqB;AAAA,MACtC;AAAA,MACA;AAAA,MACA,KAAK;AAAA,MACL,KAAK,qBAAqB,eAAe,kCAAkC,KAAK,MAAM;AAAA,MACtF;AAAA,MACA,KAAK;AAAA,MACL;AAAA,QACC,kBAAkB;AAAA,QAClB,cAAc;AAAA,QACd,uBAAuB;AAAA,QACvB,qBAAqB;AAAA,QACrB,iBAAiB;AAAA,QACjB,cAAc;AAAA,QACd,0BAA0B;AAAA,QAC1B,uBAAuB;AAAA,QACvB,eAAe;AAAA;AAAA,QAEf,iBAAiB,wBAAC,YAAoB;AAAE,iBAAO,KAAK;AAAA,QAAO,GAA1C;AAAA,QACjB,gBAAgB;AAAA,UACf,gBAAgB;AAAA,UAChB,+BAA+B;AAAA,UAC/B,+BAA+B;AAAA,UAC/B,iCAAiC;AAAA,UACjC,iCAAiC;AAAA,UACjC,qBAAqB;AAAA,UACrB,qBAAqB;AAAA,UACrB,qBAAqB;AAAA,UACrB,qBAAqB;AAAA,UACrB,kBAAkB;AAAA,UAClB,kBAAkB;AAAA,UAClB,iCAAiC;AAAA,UACjC,iCAAiC;AAAA,UACjC,6BAA6B;AAAA,UAC7B,0BAA0B;AAAA,QAC3B;AAAA,QACA,uBAAuB;AAAA,UACtB,eAAe;AAAE,mBAAO;AAAA,UAAM;AAAA,UAC9B,qBAAqB;AACpB,mBAAO,IAAI,SAAS,yBAAyB,oBAAoB;AAAA,UAClE;AAAA,QACD;AAAA;AAAA;AAAA;AAAA;AAAA,MAKD;AAAA,IACD;AAEA,SAAK,UAAU,KAAK,KAAK;AACzB,SAAK,UAAU,KAAK,MAAM,UAAU,OAAK;AACxC,UAAI,EAAE,SAAS;AACd,YAAI,OAAO,EAAE,UAAU,UAAU;AAChC,eAAK,MAAM,SAAS,CAAC,EAAE,KAAK,CAAC;AAAA,QAC9B;AACA,aAAK,WAAW,KAAK,EAAE,OAAO,EAAE,cAAc,QAAQ,EAAE,QAAQ,CAAC;AAAA,MAClE;AAAA,IACD,CAAC,CAAC;AAEF,SAAK,UAAU,KAAK,MAAM,YAAY,MAAM;AAC3C,WAAK,aAAa,KAAK;AAAA,IACxB,CAAC,CAAC;AAEF,SAAK,UAAU,KAAK,MAAM,iBAAiB,MAAM,KAAK,sBAAsB,KAAK,EAAE,QAAQ,gCAAgC,KAAK,CAAC,CAAC,CAAC;AAEnI,SAAK,0BAA0B,SAAS,cAAc,KAAK;AAC3D,SAAK,wBAAwB,UAAU,IAAI,mCAAmC;AAC9E,SAAK,aAAa,YAAY,KAAK,uBAAuB;AAC1D,SAAK,uBAAuB;AAG5B,SAAK,2BAA2B,IAAI,OAAO,KAAK,MAAM,eAAe,EAAE,gBAAgB,CAAC;AACxF,SAAK,yBAAyB,MAAM,UAAU;AAE9C,SAAK,UAAU,IAAI,8CAA8C,KAAK,oBAAoB,CAAC,MAA0B;AACpH,UAAI,EAAE,OAAO,UAAU,SAAS,QAAQ,KAAK,KAAK,0BAA0B;AAC3E,aAAK,yBAAyB,MAAM,UAAU;AAAA,MAC/C;AAAA,IACD,CAAC,CAAC;AAEF,SAAK,UAAU,IAAI,4CAA4C,KAAK,oBAAoB,MAAM;AAC7F,UAAI,KAAK,0BAA0B;AAElC,aAAK,yBAAyB,MAAM,UAAU;AAAA,MAC/C;AAAA,IACD,CAAC,CAAC;AAEF,SAAK,UAAU,KAAK,MAAM,YAAY,OAAK;AAC1C,WAAK,yBAA0B,MAAM,MAAM,GAAG,EAAE,SAAS;AAAA,IAC1D,CAAC,CAAC;AAAA,EACH;AAAA,EAEQ,yBAAyB;AAChC,SAAK,iBAAiB,KAAK,UAAU,KAAK,qBAAqB,eAAe,2BAA2B,MAAM,uBAAuB,4BAA4B,KAAK,uBAAuB,CAAC;AAAA,EAChM;AAAA,EAEQ,+BAA+B,WAAmB,cAAsB,eAAgD,qBAAyG,UAAoB;AAC5P,kBAAc,QAAQ,MAAM,SAAS,GAAG,YAAY;AAEpD,QAAI,cAAc,cAAc;AAC/B,YAAM,cAAmD,CAAC;AAC1D,YAAM,eAAuC,CAAC;AAC9C,oBAAc,aAAa,QAAQ,CAAC,OAAO,QAAQ;AAClD,cAAM,OAAO,oBAAoB,MAAM,SAAS,WAAW;AAC3D,YAAI,CAAC,MAAM;AACV;AAAA,QACD;AAEA,cAAM,YAAY,KAAK,MAAM,QAAQ,MAAM,SAAS,WAAW;AAE/D,YAAI,cAAc,QAAW;AAC5B;AAAA,QACD;AAEA,YAAI,KAAK,kBAAkB,QAAQ,GAAG,IAAI,GAAG;AAE5C,uBAAa,KAAK,GAAG;AAAA,QACtB,OAAO;AACN,gBAAM,UAAU,KAAK,MAAM,qBAAqB,MAAM,SAAS,WAAW;AAC1E,gBAAM,cAAc,KAAK,kBAAkB,QAAQ,GAAG;AACtD,gBAAM,eAAe,MAAM,SAAS,YAAY,sBAAsB,UAAU,WAAW;AAC3F,sBAAY,KAAK;AAAA,YAChB;AAAA,YACA,QAAQ;AAAA,YACR;AAAA,YACA;AAAA,YACA,cAAc;AAAA,UACf,CAAC;AAAA,QACF;AAAA,MAED,CAAC;AAED,oBAAc,aAAa,YAAY;AAEvC,UAAI,YAAY,QAAQ;AACvB,sBAAc,iBAAiB,aAAa,CAAC,CAAC;AAAA,MAC/C;AAAA,IACD;AAAA,EACD;AAAA,EAEA,MAAe,SAAS,OAAgC,SAA6C,SAA6B,OAAyC;AAC1K,UAAM,MAAM,SAAS,OAAO,SAAS,SAAS,KAAK;AAEnD,UAAM,QAAQ,MAAM,MAAM,QAAQ;AAClC,QAAI,KAAK,WAAW,OAAO;AAC1B,WAAK,aAAa;AAClB,WAAK,SAAS;AACd,WAAK,aAAa;AAAA,IACnB;AAEA,SAAK,SAAS;AACd,QAAI,KAAK,WAAW,MAAM;AACzB;AAAA,IACD;AAEA,SAAK,eAAe;AAEpB,SAAK,iCAAiC,MAAM;AAE5C,SAAK,iCAAiC,IAAI,wBAAwB;AAElE,SAAK,iCAAiC,IAAI,MAAM,IAAI,KAAK,OAAO,SAAS,SAAS,oBAAoB,KAAK,OAAO,SAAS,SAAS,kBAAkB,EAAE,OAAK;AAC5J,UAAI,KAAK,WAAW,MAAM;AACzB,aAAK,gCAAgC,QAAQ;AAC7C,aAAK,iCAAiC,IAAI,wBAAwB;AAClE,aAAK,aAAa,KAAK,+BAA+B,KAAK;AAAA,MAC5D;AAAA,IACD,CAAC,CAAC;AAEF,UAAM,KAAK,uBAAuB,aAAa,GAAG,KAAK,OAAO,SAAS,UAAU,KAAK,OAAO,SAAS,QAAQ;AAC9G,QAAI,KAAK,kBAAkB;AAC1B,WAAK,iCAAiC,IAAI,KAAK,gBAAgB;AAAA,IAChE;AACA,UAAM,KAAK,uBAAuB,aAAa,GAAG,KAAK,OAAO,SAAS,UAAU,KAAK,OAAO,SAAS,QAAQ;AAC9G,QAAI,KAAK,kBAAkB;AAC1B,WAAK,iCAAiC,IAAI,KAAK,gBAAgB;AAAA,IAChE;AAEA,UAAM,KAAK,aAAa,KAAK,+BAA+B,OAAO,SAAS,iBAAiB,oBAAoB,QAAQ,cAAc,IAAI,MAAS;AAAA,EACrJ;AAAA,EAEQ,eAAe;AACtB,SAAK,YAAY,MAAM;AACvB,SAAK,kBAAkB,QAAQ;AAC/B,SAAK,kBAAkB,QAAQ,OAAO;AACtC,SAAK,mBAAmB;AACxB,SAAK,kBAAkB,QAAQ;AAC/B,SAAK,kBAAkB,QAAQ,OAAO;AACtC,SAAK,mBAAmB;AAExB,SAAK,uBAAuB,QAAQ;AACpC,SAAK,wBAAwB;AAE7B,SAAK,iCAAiC,MAAM;AAC5C,SAAK,MAAM,MAAM;AAAA,EAElB;AAAA,EACQ,eAAe;AACtB,SAAK,mBAAmB,IAAI,kCAAkC;AAC9D,UAAM,eAAe,6BAAM;AAC1B,UAAI,6BAA6B,KAAK,QAAQ,MAAM;AACnD,YAAI,KAAK,aAAa;AACrB;AAAA,QACD;AAEA,YAAI,KAAK,kBAAkB;AAC1B,eAAK,+BAA+B,KAAK,MAAM,WAAW,KAAK,MAAM,cAAc,KAAK,kBAAkB,CAAC,gBAA8C;AACxJ,mBAAO,YAAY;AAAA,UACpB,GAAG,SAAS,QAAQ;AAAA,QACrB;AAEA,YAAI,KAAK,kBAAkB;AAC1B,eAAK,+BAA+B,KAAK,MAAM,WAAW,KAAK,MAAM,cAAc,KAAK,kBAAkB,CAAC,gBAA8C;AACxJ,mBAAO,YAAY;AAAA,UACpB,GAAG,SAAS,QAAQ;AAAA,QACrB;AAAA,MACD,CAAC;AAAA,IACF,GAlBqB;AAoBrB,SAAK,YAAY,IAAI,KAAK,MAAM,yBAAyB,MAAM;AAC9D,mBAAa;AAAA,IACd,CAAC,CAAC;AAEF,SAAK,YAAY,IAAI,KAAK,iBAAiB,sBAAsB,MAAM;AACtE,mBAAa;AAAA,IACd,CAAC,CAAC;AAEF,QAAI,KAAK,QAAQ;AAChB,YAAM,yBAAyB,KAAK,YAAY,IAAI,IAAI,8BAA8B,KAAK,sBAAsB,KAAK,qBAAqB,KAAK,0BAA0B,KAAK,0BAA0B,KAAK,SAAS,UAAU,CAAC;AAClO,YAAM,KAAK,KAAK,wBAAwB,KAAK,UAAU,IAAI,sBAAsB,KAAK,QAAQ,KAAK,6BAA6B,KAAK,sBAAsB,KAAK,kBAAmB,KAAK,iBAAiB,wBAAwB,KAAK,UAAU,MAAS,CAAC;AAC1P,WAAK,YAAY,IAAI,KAAK,sBAAsB,iBAAiB,OAAK;AACrE,aAAK,MAAM,OAAO,EAAE,OAAO,EAAE,aAAa,EAAE,QAAQ;AACpD,YAAI,KAAK,uBAAuB,GAAG;AAClC,eAAK,eAAe,iBAAiB,GAAG,OAAO,KAAK,gBAAgB;AAAA,QACrE;AAAA,MACD,CAAC,CAAC;AAAA,IACH;AAAA,EACD;AAAA,EAEA,MAAc,uBAAuB,IAAY,UAAkB,UAA8B;AAChG,SAAK,kBAAkB,QAAQ;AAE/B,SAAK,mBAAmB,KAAK,qBAAqB,eAAe,kBAAkB,MAAM,IAAI,UAAU,UAAU;AAAA,MAChH,GAAG,KAAK,iBAAiB,0BAA0B;AAAA,MACnD,YAAY,KAAK,oBAAoB;AAAA,IACtC,GAAG,MAAS;AAEZ,SAAK,MAAM,cAAc,sBAAsB,cAAc,KAAK,iBAAiB,OAAO;AAC1F,SAAK,iBAAiB,cAAc,KAAK,MAAM;AAC/C,SAAK,iBAAiB,QAAQ,MAAM,QAAQ;AAC5C,SAAK,iBAAiB,QAAQ,MAAM,OAAO;AAAA,EAC5C;AAAA,EACA,sBAA8B;AAC7B,WAAO,KAAK,SAAS,cAAc;AAAA,EACpC;AAAA,EAEA,MAAc,uBAAuB,IAAY,UAAkB,UAA8B;AAChG,SAAK,kBAAkB,QAAQ;AAE/B,SAAK,mBAAmB,KAAK,qBAAqB,eAAe,kBAAkB,MAAM,IAAI,UAAU,UAAU;AAAA,MAChH,GAAG,KAAK,iBAAiB,0BAA0B;AAAA,MACnD,YAAY,KAAK,oBAAoB;AAAA,IACtC,GAAG,MAAS;AAEZ,SAAK,MAAM,cAAc,sBAAsB,cAAc,KAAK,iBAAiB,OAAO;AAC1F,SAAK,iBAAiB,cAAc,KAAK,MAAM;AAC/C,SAAK,iBAAiB,QAAQ,MAAM,QAAQ;AAC5C,SAAK,iBAAiB,QAAQ,MAAM,OAAO;AAAA,EAC5C;AAAA,EAES,WAAW,SAAmD;AACtE,UAAM,aAAa,SAAS,iBAAiB,oBAAoB,QAAQ,cAAc,IAAI;AAC3F,QAAI,YAAY;AACf,WAAK,MAAM,SAAS,UAAU;AAAA,IAC/B;AAAA,EACD;AAAA,EAEA,MAAM,aAAa,OAA0B,YAAuB;AACnE,QAAI,CAAC,KAAK,UAAU,CAAC,KAAK,uBAAuB;AAChD;AAAA,IACD;AAEA,UAAM,aAAa,MAAM,KAAK,sBAAsB,YAAY,KAAK;AACrE,QAAI,MAAM,yBAAyB;AAElC;AAAA,IACD;AAEA,QAAI,YAAY;AACf,WAAK,kBAAkB,aAAa,CAAC,GAAG,KAAK,kBAAkB,aAAa,KAAK,CAAC,CAAC;AACnF,WAAK,kBAAkB,aAAa,CAAC,GAAG,KAAK,kBAAkB,aAAa,KAAK,CAAC,CAAC;AAEnF,UAAI,KAAK,gBAAgB,WAAW,qBAAqB,MAAM,WAAW,mBAAmB,KAAK,MAAM,QAAQ;AAC/G,aAAK,eAAe;AACpB,aAAK,MAAM,SAAS,CAAC,WAAW,gBAAgB,CAAC;AACjD,aAAK,MAAM,OAAO,WAAW,kBAAkB,GAAG;AAAA,MACnD;AAAA,IACD;AAEA,QAAI,YAAY;AACf,WAAK,MAAM,SAAS,UAAU;AAAA,IAC/B;AAAA,EACD;AAAA,EAEA,wBAAwB,UAAyB,UAAkB,QAAgB;AAClF,UAAM,cAAc,SAAS;AAE7B,QAAI,WAAW,SAAS;AAExB,QAAI,uBAAuB,gCAAgC;AAC1D,YAAM,OAAO,QAAQ,MAAM,SAAS,OAAO;AAC3C,UAAI,CAAC,MAAM;AACV;AAAA,MACD;AAEA,iBAAW,KAAK,SAAS,SAAS,MAAM,KAAK,QAAQ,SAAS,SAAS,SAAS,IAAI,SAAS,WAAW,SAAS;AAAA,IAClH,OAAO;AACN,iBAAW,YAAY,SAAS,WAAW,SAAS,WAAW,SAAS;AAAA,IACzE;AAEA,UAAM,UAAU,aAAa,SAAS,WAAW,KAAK,mBAAmB,KAAK;AAE9E,QAAI,6BAA6B,KAAK,QAAQ,MAAM;AACnD,eAAS,UAAU,CAAC,EAAE,QAAQ,SAAS,QAAQ,UAAU,OAAO,CAAC,CAAC;AAAA,IACnE,GAAG,EAAE;AAAA,EACN;AAAA,EAEQ,iBAAiB,oBAAI,QAAgD;AAAA,EAG7E,mBAAmB,MAAiC,QAAgB;AACnE,UAAM,WAAW,wBAACA,OAAiCC,YAAmB;AACrE,WAAK,MAAM,qBAAqBD,OAAMC,OAAM;AAAA,IAC7C,GAFiB;AAIjB,QAAI,KAAK,eAAe,IAAI,IAAI,GAAG;AAClC,WAAK,eAAe,IAAI,IAAI,EAAG,QAAQ;AAAA,IACxC;AAEA,QAAI;AACJ,UAAM,mBAAmB,IAAI,6BAA6B,KAAK,QAAQ,MAAM;AAC5E,WAAK,eAAe,OAAO,IAAI;AAE/B,eAAS,MAAM,MAAM;AACrB,QAAE;AAAA,IACH,CAAC;AAED,SAAK,eAAe,IAAI,MAAM,aAAa,MAAM;AAChD,uBAAiB,QAAQ;AACzB,QAAE;AAAA,IACH,CAAC,CAAC;AAEF,WAAO,IAAI,QAAc,aAAW;AAAE,UAAI;AAAA,IAAS,CAAC;AAAA,EACrD;AAAA,EAEA,aAAa,WAAyB;AACrC,SAAK,MAAM,YAAY;AAAA,EACxB;AAAA,EAEA,cAAc,OAAyB;AACtC,SAAK,MAAM,iCAAiC,KAAK;AAAA,EAClD;AAAA,EAEA,iBAAuB;AACtB,QAAI,CAAC,KAAK,uBAAuB;AAChC;AAAA,IACD;AACA,QAAI,YAAY,KAAK,MAAM,SAAS,EAAE,CAAC;AAEvC,QAAI,MAAM,SAAS,KAAK,YAAY,GAAG;AACtC,kBAAY;AAAA,IACb;AAGA,QAAI,kBAAkB,YAAY;AAClC,UAAM,oBAAoB,KAAK,sBAAsB;AACrD,WAAO,mBAAmB,GAAG;AAC5B,YAAM,KAAK,kBAAkB,eAAe;AAC5C,UAAI,GAAG,SAAS,eAAe,GAAG,SAAS,eAAe;AACzD;AAAA,MACD;AAEA;AAAA,IACD;AAEA,QAAI,mBAAmB,GAAG;AACzB,WAAK,MAAM,SAAS,CAAC,eAAe,CAAC;AACrC,WAAK,MAAM,OAAO,eAAe;AAAA,IAClC,OAAO;AAEN,YAAM,QAAQ,YAAY,mBAAmB,QAAM,GAAG,SAAS,eAAe,GAAG,SAAS,aAAa;AACvG,UAAI,SAAS,GAAG;AACf,aAAK,MAAM,SAAS,CAAC,KAAK,CAAC;AAC3B,aAAK,MAAM,OAAO,KAAK;AAAA,MACxB;AAAA,IACD;AAAA,EACD;AAAA,EAEA,aAAmB;AAClB,QAAI,CAAC,KAAK,uBAAuB;AAChC;AAAA,IACD;AACA,QAAI,YAAY,KAAK,MAAM,SAAS,EAAE,CAAC;AAEvC,QAAI,MAAM,SAAS,KAAK,YAAY,GAAG;AACtC,kBAAY;AAAA,IACb;AAGA,QAAI,kBAAkB,YAAY;AAClC,UAAM,oBAAoB,KAAK,sBAAsB;AACrD,WAAO,kBAAkB,kBAAkB,QAAQ;AAClD,YAAM,KAAK,kBAAkB,eAAe;AAC5C,UAAI,GAAG,SAAS,eAAe,GAAG,SAAS,eAAe;AACzD;AAAA,MACD;AAEA;AAAA,IACD;AAEA,QAAI,kBAAkB,kBAAkB,QAAQ;AAC/C,WAAK,MAAM,SAAS,CAAC,eAAe,CAAC;AACrC,WAAK,MAAM,OAAO,eAAe;AAAA,IAClC,OAAO;AAEN,YAAM,QAAQ,kBAAkB,UAAU,QAAM,GAAG,SAAS,eAAe,GAAG,SAAS,aAAa;AACpG,UAAI,SAAS,GAAG;AACf,aAAK,MAAM,SAAS,CAAC,KAAK,CAAC;AAC3B,aAAK,MAAM,OAAO,KAAK;AAAA,MACxB;AAAA,IACD;AAAA,EACD;AAAA,EAEA,aAAa,mBAAiD,eAAwC,QAA4B,WAAyB,UAA0B;AACpL,SAAK,4BAA4B,MAAM,OAAO,OAAO,MAAM,YAAY,aAAa,SAAS,WAAW,WAAW,SAAS,YAAY;AACvI,YAAM,gBAAgB,aAAa,SAAS,WAAW,KAAK,mBAAmB,KAAK;AACpF,UAAI,CAAC,eAAe;AACnB;AAAA,MACD;AAEA,UAAI,CAAC,cAAc,aAAa,IAAI,OAAO,MAAM,GAAG;AACnD,cAAM,UAAU,KAAK,MAAM,qBAAqB,iBAAiB;AACjE,cAAM,cAAc,aAAa,EAAE,aAAa,mBAAmB,YAAY,cAAc,QAAQ,QAAQ,cAAc,IAAI,SAAS,cAAc,IAAI,GAAG,QAAQ,SAAS,UAAU,CAAC;AAAA,MAC1L,OAAO;AACN,cAAM,UAAU,KAAK,MAAM,qBAAqB,iBAAiB;AACjE,cAAM,cAAc,cAAc,kBAAkB,QAAQ,OAAO,MAAM;AACzE,cAAM,eAAe,kBAAkB,sBAAsB,UAAU,WAAW;AAClF,sBAAc,iBAAiB,CAAC;AAAA,UAC/B,MAAM;AAAA,UACN,QAAQ,OAAO;AAAA,UACf;AAAA,UACA;AAAA,UACA,cAAc;AAAA,QACf,CAAC,GAAG,CAAC,CAAC;AAAA,MACP;AAAA,IACD,CAAC;AAAA,EACF;AAAA,EAEA,yBAAyB;AAAA,EAEzB;AAAA,EAEA,cAAc,UAAgD;AAC7D,WAAO,SAAS,YAAY,aAAa,SAAS,OAAO;AAAA,EAC1D;AAAA,EAEA,YAAY,QAAmD;AAC9D,UAAM,IAAI,MAAM,iBAAiB;AAAA,EAClC;AAAA,EAEA,YAAY,mBAAiD,eAAwC,eAAqC,UAAoB;AAC7J,SAAK,4BAA4B,MAAM,cAAc,MAAM,YAAY,aAAa,SAAS,WAAW,WAAW,SAAS,YAAY;AACvI,YAAM,gBAAgB,aAAa,SAAS,WAAW,KAAK,mBAAmB,KAAK;AACpF,UAAI,CAAC,eAAe;AACnB;AAAA,MACD;AAEA,UAAI,CAAC,cAAc,aAAa,IAAI,aAAa,GAAG;AACnD;AAAA,MACD;AAEA,oBAAc,aAAa,CAAC,aAAa,CAAC;AAAA,IAC3C,CAAC;AAAA,EACF;AAAA,EAEA,UAAU,mBAAiD,eAAwC,eAAqC,UAAoB;AAC3J,SAAK,4BAA4B,MAAM,cAAc,MAAM,YAAY,aAAa,SAAS,WAAW,WAAW,SAAS,YAAY;AACvI,YAAM,gBAAgB,aAAa,SAAS,WAAW,KAAK,mBAAmB,KAAK;AACpF,UAAI,CAAC,eAAe;AACnB;AAAA,MACD;AAEA,UAAI,CAAC,cAAc,aAAa,IAAI,aAAa,GAAG;AACnD;AAAA,MACD;AAEA,YAAM,UAAU,KAAK,MAAM,qBAAqB,iBAAiB;AACjE,YAAM,cAAc,cAAc,kBAAkB,QAAQ,aAAa;AACzE,YAAM,eAAe,kBAAkB,sBAAsB,UAAU,WAAW;AAClF,oBAAc,iBAAiB,CAAC;AAAA,QAC/B,MAAM;AAAA,QACN,QAAQ;AAAA,QACR;AAAA,QACA;AAAA,QACA,cAAc;AAAA,MACf,CAAC,GAAG,CAAC,CAAC;AAAA,IACP,CAAC;AAAA,EACF;AAAA,EAEA,UAAU,mBAAiD,eAAwC,QAA8B;AAChI,SAAK,kBAAkB,UAAU,MAAM;AACvC,SAAK,kBAAkB,UAAU,MAAM;AAAA,EACxC;AAAA;AAAA;AAAA;AAAA;AAAA,EAQA,aAAa;AACZ,WAAO,KAAK;AAAA,EACb;AAAA,EAEA,8BAA2C;AAC1C,WAAO,KAAK;AAAA,EACb;AAAA,EAES,aAAkD;AAC1D,WAAO;AAAA,EACR;AAAA,EAES,aAAmB;AAC3B,UAAM,WAAW;AAEjB,SAAK,iCAAiC,MAAM;AAC5C,SAAK,OAAO,OAAO,GAAG,KAAK,OAAO,UAAU,CAAC;AAC7C,SAAK,SAAS;AACd,SAAK,uBAAuB,QAAQ;AACpC,SAAK,wBAAwB;AAAA,EAC9B;AAAA,EAEA,mCAAmC,UAAoB,QAAgB,OAAiB,SAAmB;AAC1G,QAAI,aAAa,SAAS,UAAU;AACnC,WAAK,kBAAkB,6BAA6B,QAAQ,OAAO,OAAO;AAAA,IAC3E,OAAO;AACN,WAAK,kBAAkB,6BAA6B,QAAQ,OAAO,OAAO;AAAA,IAC3E;AAAA,EACD;AAAA,EAEA,gBAAoC;AACnC,QAAI,CAAC,KAAK,OAAO;AAChB,YAAM,IAAI,MAAM,uCAAuC;AAAA,IACxD;AAEA,WAAO;AAAA,MACN,OAAO,KAAK,WAAY;AAAA,MACxB,QAAQ,KAAK,WAAY;AAAA,MACzB,UAAU,KAAK;AAAA,MACf,cAAc,KAAK,OAAO,gBAAgB,KAAK;AAAA,MAC/C,cAAc;AAAA,IACf;AAAA,EACD;AAAA,EAEA,OAAO,WAA0B,WAAmC;AACnE,SAAK,aAAa,UAAU,OAAO,aAAa,UAAU,QAAQ,OAAQ,UAAU,SAAS,GAAG;AAChG,SAAK,aAAa,UAAU,OAAO,gBAAgB,UAAU,QAAQ,GAAG;AACxE,UAAM,uBAAuB,KAAK,uBAAuB;AACzD,SAAK,aAAa,UAAU,KAAK,UAAU,SAAS,uBAAuB,uBAAuB,6BAA6B,EAAE;AAEjI,SAAK,mBAAmB,MAAM,SAAS,GAAG,UAAU,MAAM;AAC1D,SAAK,mBAAmB,MAAM,QAAQ,GAAG,KAAK,WAAW,KAAK;AAE9D,SAAK,OAAO,OAAO,KAAK,WAAW,QAAQ,KAAK,WAAW,KAAK;AAEhE,QAAI,KAAK,kBAAkB;AAC1B,WAAK,iBAAiB,QAAQ,MAAM,QAAQ;AAC5C,WAAK,iBAAiB,QAAQ,MAAM,OAAO;AAAA,IAC5C;AAEA,QAAI,KAAK,kBAAkB;AAC1B,WAAK,iBAAiB,QAAQ,MAAM,QAAQ;AAC5C,WAAK,iBAAiB,QAAQ,MAAM,OAAO;AAAA,IAC5C;AAEA,QAAI,KAAK,0BAA0B;AAClC,WAAK,yBAAyB,MAAM,SAAS,GAAG,KAAK,WAAW,MAAM;AACtE,WAAK,yBAAyB,MAAM,QAAQ,GAAG,KAAK,WAAW,KAAK;AAAA,IACrE;AAEA,QAAI,sBAAsB;AACzB,WAAK,eAAe,OAAO;AAAA,IAC5B;AAEA,SAAK,kBAAkB,KAAK,CAAC,IAAI,+BAA+B,EAAE,OAAO,MAAM,UAAU,KAAK,GAAG,KAAK,cAAc,CAAC,CAAC,CAAC;AAAA,EACxH;AAAA,EAES,UAAU;AAClB,SAAK,cAAc;AACnB,SAAK,gCAAgC,QAAQ;AAC7C,SAAK,aAAa;AAClB,UAAM,QAAQ;AAAA,EACf;AACD;AAtyBa,yBAAN;AAAA,EA2DJ;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,GArEU;AAwyBb,eAAe,OAAO,MAAM,IAAI,oCAAoC;AAEpE,2BAA2B,CAAC,OAAO,cAAc;AAChD,QAAM,wBAAwB,MAAM,SAAS,gBAAgB;AAC7D,YAAU,QAAQ;AAAA;AAAA;AAAA;AAAA,KAId,qBAAqB;AAAA;AAAA,KAErB,qBAAqB,SAAS,qBAAqB;AAAA;AAAA;AAAA;AAAA;AAAA,EAKtD;AAED,YAAU,QAAQ,mDAAmD,gBAAgB,OAAO;AAE5F,YAAU,QAAQ,+DAA+D,gBAAgB,SAAS;AAC3G,CAAC;",
  "names": ["cell", "height"]
}
