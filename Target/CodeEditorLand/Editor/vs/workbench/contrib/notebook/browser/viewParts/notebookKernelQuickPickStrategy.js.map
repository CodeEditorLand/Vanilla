{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/notebook/browser/viewParts/notebookKernelQuickPickStrategy.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { IAction } from \"../../../../../base/common/actions.js\";\nimport { groupBy } from \"../../../../../base/common/arrays.js\";\nimport { createCancelablePromise } from \"../../../../../base/common/async.js\";\nimport { CancellationToken } from \"../../../../../base/common/cancellation.js\";\nimport { Codicon } from \"../../../../../base/common/codicons.js\";\nimport { Event } from \"../../../../../base/common/event.js\";\nimport { DisposableStore } from \"../../../../../base/common/lifecycle.js\";\nimport { MarshalledId } from \"../../../../../base/common/marshallingIds.js\";\nimport { uppercaseFirstLetter } from \"../../../../../base/common/strings.js\";\nimport { ThemeIcon } from \"../../../../../base/common/themables.js\";\nimport { URI } from \"../../../../../base/common/uri.js\";\nimport type { Command } from \"../../../../../editor/common/languages.js\";\nimport { localize } from \"../../../../../nls.js\";\nimport { ICommandService } from \"../../../../../platform/commands/common/commands.js\";\nimport type { IContextKeyService } from \"../../../../../platform/contextkey/common/contextkey.js\";\nimport { ILabelService } from \"../../../../../platform/label/common/label.js\";\nimport { ILogService } from \"../../../../../platform/log/common/log.js\";\nimport { IOpenerService } from \"../../../../../platform/opener/common/opener.js\";\nimport { IProductService } from \"../../../../../platform/product/common/productService.js\";\nimport { ProgressLocation } from \"../../../../../platform/progress/common/progress.js\";\nimport {\n\ttype IQuickInputButton,\n\tIQuickInputService,\n\ttype IQuickPick,\n\ttype IQuickPickItem,\n\ttype QuickPickInput,\n} from \"../../../../../platform/quickinput/common/quickInput.js\";\nimport { EnablementState } from \"../../../../services/extensionManagement/common/extensionManagement.js\";\nimport { IExtensionService } from \"../../../../services/extensions/common/extensions.js\";\nimport {\n\ttype IExtension,\n\tIExtensionsWorkbenchService,\n} from \"../../../extensions/common/extensions.js\";\nimport type { NotebookTextModel } from \"../../common/model/notebookTextModel.js\";\nimport type { INotebookTextModel } from \"../../common/notebookCommon.js\";\nimport {\n\ttype INotebookKernel,\n\tINotebookKernelHistoryService,\n\ttype INotebookKernelMatchResult,\n\tINotebookKernelService,\n\ttype ISourceAction,\n} from \"../../common/notebookKernelService.js\";\nimport { SELECT_KERNEL_ID } from \"../controller/coreActions.js\";\nimport {\n\ttype IActiveNotebookEditor,\n\ttype INotebookExtensionRecommendation,\n\tJUPYTER_EXTENSION_ID,\n\tKERNEL_RECOMMENDATIONS,\n} from \"../notebookBrowser.js\";\nimport type { NotebookEditorWidget } from \"../notebookEditorWidget.js\";\nimport { executingStateIcon, selectKernelIcon } from \"../notebookIcons.js\";\n\ntype KernelPick = IQuickPickItem & { kernel: INotebookKernel };\nfunction isKernelPick(\n\titem: QuickPickInput<IQuickPickItem>,\n): item is KernelPick {\n\treturn \"kernel\" in item;\n}\ntype GroupedKernelsPick = IQuickPickItem & {\n\tkernels: INotebookKernel[];\n\tsource: string;\n};\nfunction isGroupedKernelsPick(\n\titem: QuickPickInput<IQuickPickItem>,\n): item is GroupedKernelsPick {\n\treturn \"kernels\" in item;\n}\ntype SourcePick = IQuickPickItem & { action: ISourceAction };\nfunction isSourcePick(\n\titem: QuickPickInput<IQuickPickItem>,\n): item is SourcePick {\n\treturn \"action\" in item;\n}\ntype InstallExtensionPick = IQuickPickItem & { extensionIds: string[] };\nfunction isInstallExtensionPick(\n\titem: QuickPickInput<IQuickPickItem>,\n): item is InstallExtensionPick {\n\treturn item.id === \"installSuggested\" && \"extensionIds\" in item;\n}\ntype SearchMarketplacePick = IQuickPickItem & { id: \"install\" };\nfunction isSearchMarketplacePick(\n\titem: QuickPickInput<IQuickPickItem>,\n): item is SearchMarketplacePick {\n\treturn item.id === \"install\";\n}\n\ntype KernelSourceQuickPickItem = IQuickPickItem & {\n\tcommand: Command;\n\tdocumentation?: string;\n};\nfunction isKernelSourceQuickPickItem(\n\titem: IQuickPickItem,\n): item is KernelSourceQuickPickItem {\n\treturn \"command\" in item;\n}\n\nfunction supportAutoRun(\n\titem: QuickPickInput<IQuickPickItem>,\n): item is IQuickPickItem {\n\treturn \"autoRun\" in item && !!item.autoRun;\n}\ntype KernelQuickPickItem =\n\t| (IQuickPickItem & { autoRun?: boolean })\n\t| SearchMarketplacePick\n\t| InstallExtensionPick\n\t| KernelPick\n\t| GroupedKernelsPick\n\t| SourcePick\n\t| KernelSourceQuickPickItem;\nconst KERNEL_PICKER_UPDATE_DEBOUNCE = 200;\n\nexport type KernelQuickPickContext =\n\t| { id: string; extension: string }\n\t| { notebookEditorId: string }\n\t| { id: string; extension: string; notebookEditorId: string }\n\t| { ui?: boolean; notebookEditor?: NotebookEditorWidget };\n\nexport interface IKernelPickerStrategy {\n\tshowQuickPick(\n\t\teditor: IActiveNotebookEditor,\n\t\twantedKernelId?: string,\n\t): Promise<boolean>;\n}\n\nfunction toKernelQuickPick(\n\tkernel: INotebookKernel,\n\tselected: INotebookKernel | undefined,\n) {\n\tconst res: KernelPick = {\n\t\tkernel,\n\t\tpicked: kernel.id === selected?.id,\n\t\tlabel: kernel.label,\n\t\tdescription: kernel.description,\n\t\tdetail: kernel.detail,\n\t};\n\tif (kernel.id === selected?.id) {\n\t\tif (res.description) {\n\t\t\tres.description = localize(\n\t\t\t\t\"current2\",\n\t\t\t\t\"{0} - Currently Selected\",\n\t\t\t\tres.description,\n\t\t\t);\n\t\t} else {\n\t\t\tres.description = localize(\"current1\", \"Currently Selected\");\n\t\t}\n\t}\n\treturn res;\n}\n\nabstract class KernelPickerStrategyBase implements IKernelPickerStrategy {\n\tconstructor(\n\t\tprotected readonly _notebookKernelService: INotebookKernelService,\n\t\tprotected readonly _productService: IProductService,\n\t\tprotected readonly _quickInputService: IQuickInputService,\n\t\tprotected readonly _labelService: ILabelService,\n\t\tprotected readonly _logService: ILogService,\n\t\tprotected readonly _extensionWorkbenchService: IExtensionsWorkbenchService,\n\t\tprotected readonly _extensionService: IExtensionService,\n\t\tprotected readonly _commandService: ICommandService,\n\t) {}\n\n\tasync showQuickPick(\n\t\teditor: IActiveNotebookEditor,\n\t\twantedId?: string,\n\t\tskipAutoRun?: boolean,\n\t): Promise<boolean> {\n\t\tconst notebook = editor.textModel;\n\t\tconst scopedContextKeyService = editor.scopedContextKeyService;\n\t\tconst matchResult = this._getMatchingResult(notebook);\n\t\tconst { selected, all } = matchResult;\n\n\t\tlet newKernel: INotebookKernel | undefined;\n\t\tif (wantedId) {\n\t\t\tfor (const candidate of all) {\n\t\t\t\tif (candidate.id === wantedId) {\n\t\t\t\t\tnewKernel = candidate;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!newKernel) {\n\t\t\t\tthis._logService.warn(\n\t\t\t\t\t`wanted kernel DOES NOT EXIST, wanted: ${wantedId}, all: ${all.map((k) => k.id)}`,\n\t\t\t\t);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tif (newKernel) {\n\t\t\tthis._selecteKernel(notebook, newKernel);\n\t\t\treturn true;\n\t\t}\n\n\t\tconst localDisposableStore = new DisposableStore();\n\t\tconst quickPick = localDisposableStore.add(\n\t\t\tthis._quickInputService.createQuickPick<KernelQuickPickItem>({\n\t\t\t\tuseSeparators: true,\n\t\t\t}),\n\t\t);\n\t\tconst quickPickItems = this._getKernelPickerQuickPickItems(\n\t\t\tnotebook,\n\t\t\tmatchResult,\n\t\t\tthis._notebookKernelService,\n\t\t\tscopedContextKeyService,\n\t\t);\n\n\t\tif (\n\t\t\tquickPickItems.length === 1 &&\n\t\t\tsupportAutoRun(quickPickItems[0]) &&\n\t\t\t!skipAutoRun\n\t\t) {\n\t\t\tconst picked = await this._handleQuickPick(\n\t\t\t\teditor,\n\t\t\t\tquickPickItems[0],\n\t\t\t\tquickPickItems as KernelQuickPickItem[],\n\t\t\t);\n\t\t\tlocalDisposableStore.dispose();\n\t\t\treturn picked;\n\t\t}\n\n\t\tquickPick.items = quickPickItems;\n\t\tquickPick.canSelectMany = false;\n\t\tquickPick.placeholder = selected\n\t\t\t? localize(\n\t\t\t\t\t\"prompt.placeholder.change\",\n\t\t\t\t\t\"Change kernel for '{0}'\",\n\t\t\t\t\tthis._labelService.getUriLabel(notebook.uri, {\n\t\t\t\t\t\trelative: true,\n\t\t\t\t\t}),\n\t\t\t\t)\n\t\t\t: localize(\n\t\t\t\t\t\"prompt.placeholder.select\",\n\t\t\t\t\t\"Select kernel for '{0}'\",\n\t\t\t\t\tthis._labelService.getUriLabel(notebook.uri, {\n\t\t\t\t\t\trelative: true,\n\t\t\t\t\t}),\n\t\t\t\t);\n\n\t\tquickPick.busy =\n\t\t\tthis._notebookKernelService.getKernelDetectionTasks(notebook)\n\t\t\t\t.length > 0;\n\n\t\tconst kernelDetectionTaskListener =\n\t\t\tthis._notebookKernelService.onDidChangeKernelDetectionTasks(() => {\n\t\t\t\tquickPick.busy =\n\t\t\t\t\tthis._notebookKernelService.getKernelDetectionTasks(\n\t\t\t\t\t\tnotebook,\n\t\t\t\t\t).length > 0;\n\t\t\t});\n\n\t\t// run extension recommendataion task if quickPickItems is empty\n\t\tconst extensionRecommendataionPromise =\n\t\t\tquickPickItems.length === 0\n\t\t\t\t? createCancelablePromise((token) =>\n\t\t\t\t\t\tthis._showInstallKernelExtensionRecommendation(\n\t\t\t\t\t\t\tnotebook,\n\t\t\t\t\t\t\tquickPick,\n\t\t\t\t\t\t\tthis._extensionWorkbenchService,\n\t\t\t\t\t\t\ttoken,\n\t\t\t\t\t\t),\n\t\t\t\t\t)\n\t\t\t\t: undefined;\n\n\t\tconst kernelChangeEventListener = Event.debounce<void, void>(\n\t\t\tEvent.any(\n\t\t\t\tthis._notebookKernelService.onDidChangeSourceActions,\n\t\t\t\tthis._notebookKernelService.onDidAddKernel,\n\t\t\t\tthis._notebookKernelService.onDidRemoveKernel,\n\t\t\t\tthis._notebookKernelService.onDidChangeNotebookAffinity,\n\t\t\t),\n\t\t\t(last, _current) => last,\n\t\t\tKERNEL_PICKER_UPDATE_DEBOUNCE,\n\t\t)(async () => {\n\t\t\t// reset quick pick progress\n\t\t\tquickPick.busy = false;\n\t\t\textensionRecommendataionPromise?.cancel();\n\n\t\t\tconst currentActiveItems = quickPick.activeItems;\n\t\t\tconst matchResult = this._getMatchingResult(notebook);\n\t\t\tconst quickPickItems = this._getKernelPickerQuickPickItems(\n\t\t\t\tnotebook,\n\t\t\t\tmatchResult,\n\t\t\t\tthis._notebookKernelService,\n\t\t\t\tscopedContextKeyService,\n\t\t\t);\n\t\t\tquickPick.keepScrollPosition = true;\n\n\t\t\t// recalcuate active items\n\t\t\tconst activeItems: KernelQuickPickItem[] = [];\n\t\t\tfor (const item of currentActiveItems) {\n\t\t\t\tif (isKernelPick(item)) {\n\t\t\t\t\tconst kernelId = item.kernel.id;\n\t\t\t\t\tconst sameItem = quickPickItems.find(\n\t\t\t\t\t\t(pi) => isKernelPick(pi) && pi.kernel.id === kernelId,\n\t\t\t\t\t) as KernelPick | undefined;\n\t\t\t\t\tif (sameItem) {\n\t\t\t\t\t\tactiveItems.push(sameItem);\n\t\t\t\t\t}\n\t\t\t\t} else if (isSourcePick(item)) {\n\t\t\t\t\tconst sameItem = quickPickItems.find(\n\t\t\t\t\t\t(pi) =>\n\t\t\t\t\t\t\tisSourcePick(pi) &&\n\t\t\t\t\t\t\tpi.action.action.id === item.action.action.id,\n\t\t\t\t\t) as SourcePick | undefined;\n\t\t\t\t\tif (sameItem) {\n\t\t\t\t\t\tactiveItems.push(sameItem);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tquickPick.items = quickPickItems;\n\t\t\tquickPick.activeItems = activeItems;\n\t\t}, this);\n\n\t\tconst pick = await new Promise<{\n\t\t\tselected: KernelQuickPickItem | undefined;\n\t\t\titems: KernelQuickPickItem[];\n\t\t}>((resolve, reject) => {\n\t\t\tlocalDisposableStore.add(\n\t\t\t\tquickPick.onDidAccept(() => {\n\t\t\t\t\tconst item = quickPick.selectedItems[0];\n\t\t\t\t\tif (item) {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\tselected: item,\n\t\t\t\t\t\t\titems: quickPick.items as KernelQuickPickItem[],\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\tselected: undefined,\n\t\t\t\t\t\t\titems: quickPick.items as KernelQuickPickItem[],\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tquickPick.hide();\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tlocalDisposableStore.add(\n\t\t\t\tquickPick.onDidHide(() => {\n\t\t\t\t\tkernelDetectionTaskListener.dispose();\n\t\t\t\t\tkernelChangeEventListener.dispose();\n\t\t\t\t\tquickPick.dispose();\n\t\t\t\t\tresolve({\n\t\t\t\t\t\tselected: undefined,\n\t\t\t\t\t\titems: quickPick.items as KernelQuickPickItem[],\n\t\t\t\t\t});\n\t\t\t\t}),\n\t\t\t);\n\t\t\tquickPick.show();\n\t\t});\n\n\t\tlocalDisposableStore.dispose();\n\n\t\tif (pick.selected) {\n\t\t\treturn await this._handleQuickPick(\n\t\t\t\teditor,\n\t\t\t\tpick.selected,\n\t\t\t\tpick.items,\n\t\t\t);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprotected _getMatchingResult(notebook: NotebookTextModel) {\n\t\treturn this._notebookKernelService.getMatchingKernel(notebook);\n\t}\n\n\tprotected abstract _getKernelPickerQuickPickItems(\n\t\tnotebookTextModel: NotebookTextModel,\n\t\tmatchResult: INotebookKernelMatchResult,\n\t\tnotebookKernelService: INotebookKernelService,\n\t\tscopedContextKeyService: IContextKeyService,\n\t): QuickPickInput<KernelQuickPickItem>[];\n\n\tprotected async _handleQuickPick(\n\t\teditor: IActiveNotebookEditor,\n\t\tpick: KernelQuickPickItem,\n\t\tquickPickItems: KernelQuickPickItem[],\n\t): Promise<boolean> {\n\t\tif (isKernelPick(pick)) {\n\t\t\tconst newKernel = pick.kernel;\n\t\t\tthis._selecteKernel(editor.textModel, newKernel);\n\t\t\treturn true;\n\t\t}\n\n\t\t// actions\n\t\tif (isSearchMarketplacePick(pick)) {\n\t\t\tawait this._showKernelExtension(\n\t\t\t\tthis._extensionWorkbenchService,\n\t\t\t\tthis._extensionService,\n\t\t\t\teditor.textModel.viewType,\n\t\t\t\t[],\n\t\t\t);\n\t\t\t// suggestedExtension must be defined for this option to be shown, but still check to make TS happy\n\t\t} else if (isInstallExtensionPick(pick)) {\n\t\t\tawait this._showKernelExtension(\n\t\t\t\tthis._extensionWorkbenchService,\n\t\t\t\tthis._extensionService,\n\t\t\t\teditor.textModel.viewType,\n\t\t\t\tpick.extensionIds,\n\t\t\t\tthis._productService.quality !== \"stable\",\n\t\t\t);\n\t\t} else if (isSourcePick(pick)) {\n\t\t\t// selected explicilty, it should trigger the execution?\n\t\t\tpick.action.runAction();\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprotected _selecteKernel(\n\t\tnotebook: NotebookTextModel,\n\t\tkernel: INotebookKernel,\n\t) {\n\t\tthis._notebookKernelService.selectKernelForNotebook(kernel, notebook);\n\t}\n\n\tprotected async _showKernelExtension(\n\t\textensionWorkbenchService: IExtensionsWorkbenchService,\n\t\textensionService: IExtensionService,\n\t\tviewType: string,\n\t\textIds: string[],\n\t\tisInsiders?: boolean,\n\t) {\n\t\t// If extension id is provided attempt to install the extension as the user has requested the suggested ones be installed\n\t\tconst extensionsToInstall: IExtension[] = [];\n\t\tconst extensionsToEnable: IExtension[] = [];\n\n\t\tfor (const extId of extIds) {\n\t\t\tconst extension = (\n\t\t\t\tawait extensionWorkbenchService.getExtensions(\n\t\t\t\t\t[{ id: extId }],\n\t\t\t\t\tCancellationToken.None,\n\t\t\t\t)\n\t\t\t)[0];\n\t\t\tif (\n\t\t\t\textension.enablementState ===\n\t\t\t\t\tEnablementState.DisabledGlobally ||\n\t\t\t\textension.enablementState ===\n\t\t\t\t\tEnablementState.DisabledWorkspace ||\n\t\t\t\textension.enablementState ===\n\t\t\t\t\tEnablementState.DisabledByEnvironment\n\t\t\t) {\n\t\t\t\textensionsToEnable.push(extension);\n\t\t\t} else {\n\t\t\t\tconst canInstall =\n\t\t\t\t\tawait extensionWorkbenchService.canInstall(extension);\n\t\t\t\tif (canInstall) {\n\t\t\t\t\textensionsToInstall.push(extension);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (extensionsToInstall.length || extensionsToEnable.length) {\n\t\t\tawait Promise.all([\n\t\t\t\t...extensionsToInstall.map(async (extension) => {\n\t\t\t\t\tawait extensionWorkbenchService.install(\n\t\t\t\t\t\textension,\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tinstallPreReleaseVersion: isInsiders ?? false,\n\t\t\t\t\t\t\tcontext: { skipWalkthrough: true },\n\t\t\t\t\t\t},\n\t\t\t\t\t\tProgressLocation.Notification,\n\t\t\t\t\t);\n\t\t\t\t}),\n\t\t\t\t...extensionsToEnable.map(async (extension) => {\n\t\t\t\t\tswitch (extension.enablementState) {\n\t\t\t\t\t\tcase EnablementState.DisabledWorkspace:\n\t\t\t\t\t\t\tawait extensionWorkbenchService.setEnablement(\n\t\t\t\t\t\t\t\t[extension],\n\t\t\t\t\t\t\t\tEnablementState.EnabledWorkspace,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\tcase EnablementState.DisabledGlobally:\n\t\t\t\t\t\t\tawait extensionWorkbenchService.setEnablement(\n\t\t\t\t\t\t\t\t[extension],\n\t\t\t\t\t\t\t\tEnablementState.EnabledGlobally,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\tcase EnablementState.DisabledByEnvironment:\n\t\t\t\t\t\t\tawait extensionWorkbenchService.setEnablement(\n\t\t\t\t\t\t\t\t[extension],\n\t\t\t\t\t\t\t\tEnablementState.EnabledByEnvironment,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t]);\n\n\t\t\tawait extensionService.activateByEvent(`onNotebook:${viewType}`);\n\t\t\treturn;\n\t\t}\n\n\t\tconst pascalCased = viewType\n\t\t\t.split(/[^a-z0-9]/gi)\n\t\t\t.map(uppercaseFirstLetter)\n\t\t\t.join(\"\");\n\t\tawait extensionWorkbenchService.openSearch(\n\t\t\t`@tag:notebookKernel${pascalCased}`,\n\t\t);\n\t}\n\n\tprivate async _showInstallKernelExtensionRecommendation(\n\t\tnotebookTextModel: NotebookTextModel,\n\t\tquickPick: IQuickPick<KernelQuickPickItem, { useSeparators: true }>,\n\t\textensionWorkbenchService: IExtensionsWorkbenchService,\n\t\ttoken: CancellationToken,\n\t) {\n\t\tquickPick.busy = true;\n\n\t\tconst newQuickPickItems =\n\t\t\tawait this._getKernelRecommendationsQuickPickItems(\n\t\t\t\tnotebookTextModel,\n\t\t\t\textensionWorkbenchService,\n\t\t\t);\n\t\tquickPick.busy = false;\n\n\t\tif (token.isCancellationRequested) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (newQuickPickItems && quickPick.items.length === 0) {\n\t\t\tquickPick.items = newQuickPickItems;\n\t\t}\n\t}\n\n\tprotected async _getKernelRecommendationsQuickPickItems(\n\t\tnotebookTextModel: NotebookTextModel,\n\t\textensionWorkbenchService: IExtensionsWorkbenchService,\n\t): Promise<\n\t\t| QuickPickInput<SearchMarketplacePick | InstallExtensionPick>[]\n\t\t| undefined\n\t> {\n\t\tconst quickPickItems: QuickPickInput<\n\t\t\tSearchMarketplacePick | InstallExtensionPick\n\t\t>[] = [];\n\n\t\tconst language = this.getSuggestedLanguage(notebookTextModel);\n\t\tconst suggestedExtension: INotebookExtensionRecommendation | undefined =\n\t\t\tlanguage\n\t\t\t\t? this.getSuggestedKernelFromLanguage(\n\t\t\t\t\t\tnotebookTextModel.viewType,\n\t\t\t\t\t\tlanguage,\n\t\t\t\t\t)\n\t\t\t\t: undefined;\n\t\tif (suggestedExtension) {\n\t\t\tawait extensionWorkbenchService.queryLocal();\n\n\t\t\tconst extensions = extensionWorkbenchService.installed.filter(\n\t\t\t\t(e) =>\n\t\t\t\t\t(e.enablementState ===\n\t\t\t\t\t\tEnablementState.EnabledByEnvironment ||\n\t\t\t\t\t\te.enablementState === EnablementState.EnabledGlobally ||\n\t\t\t\t\t\te.enablementState ===\n\t\t\t\t\t\t\tEnablementState.EnabledWorkspace) &&\n\t\t\t\t\tsuggestedExtension.extensionIds.includes(e.identifier.id),\n\t\t\t);\n\n\t\t\tif (extensions.length === suggestedExtension.extensionIds.length) {\n\t\t\t\t// it's installed but might be detecting kernels\n\t\t\t\treturn undefined;\n\t\t\t}\n\n\t\t\t// We have a suggested kernel, show an option to install it\n\t\t\tquickPickItems.push({\n\t\t\t\tid: \"installSuggested\",\n\t\t\t\tdescription:\n\t\t\t\t\tsuggestedExtension.displayName ??\n\t\t\t\t\tsuggestedExtension.extensionIds.join(\", \"),\n\t\t\t\tlabel:\n\t\t\t\t\t`$(${Codicon.lightbulb.id}) ` +\n\t\t\t\t\tlocalize(\n\t\t\t\t\t\t\"installSuggestedKernel\",\n\t\t\t\t\t\t\"Install/Enable suggested extensions\",\n\t\t\t\t\t),\n\t\t\t\textensionIds: suggestedExtension.extensionIds,\n\t\t\t} satisfies InstallExtensionPick);\n\t\t}\n\t\t// there is no kernel, show the install from marketplace\n\t\tquickPickItems.push({\n\t\t\tid: \"install\",\n\t\t\tlabel: localize(\n\t\t\t\t\"searchForKernels\",\n\t\t\t\t\"Browse marketplace for kernel extensions\",\n\t\t\t),\n\t\t} satisfies SearchMarketplacePick);\n\n\t\treturn quickPickItems;\n\t}\n\n\t/**\n\t * Examine the most common language in the notebook\n\t * @param notebookTextModel The notebook text model\n\t * @returns What the suggested language is for the notebook. Used for kernal installing\n\t */\n\tprivate getSuggestedLanguage(\n\t\tnotebookTextModel: NotebookTextModel,\n\t): string | undefined {\n\t\tconst metaData = notebookTextModel.metadata;\n\t\tlet suggestedKernelLanguage: string | undefined = (metaData as any)\n\t\t\t?.metadata?.language_info?.name;\n\t\t// TODO how do we suggest multi language notebooks?\n\t\tif (!suggestedKernelLanguage) {\n\t\t\tconst cellLanguages = notebookTextModel.cells\n\t\t\t\t.map((cell) => cell.language)\n\t\t\t\t.filter((language) => language !== \"markdown\");\n\t\t\t// Check if cell languages is all the same\n\t\t\tif (cellLanguages.length > 1) {\n\t\t\t\tconst firstLanguage = cellLanguages[0];\n\t\t\t\tif (\n\t\t\t\t\tcellLanguages.every(\n\t\t\t\t\t\t(language) => language === firstLanguage,\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tsuggestedKernelLanguage = firstLanguage;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn suggestedKernelLanguage;\n\t}\n\n\t/**\n\t * Given a language and notebook view type suggest a kernel for installation\n\t * @param language The language to find a suggested kernel extension for\n\t * @returns A recommednation object for the recommended extension, else undefined\n\t */\n\tprivate getSuggestedKernelFromLanguage(\n\t\tviewType: string,\n\t\tlanguage: string,\n\t): INotebookExtensionRecommendation | undefined {\n\t\tconst recommendation =\n\t\t\tKERNEL_RECOMMENDATIONS.get(viewType)?.get(language);\n\t\treturn recommendation;\n\t}\n}\n\nexport class KernelPickerMRUStrategy extends KernelPickerStrategyBase {\n\tconstructor(\n\t\t@INotebookKernelService _notebookKernelService: INotebookKernelService,\n\t\t@IProductService _productService: IProductService,\n\t\t@IQuickInputService _quickInputService: IQuickInputService,\n\t\t@ILabelService _labelService: ILabelService,\n\t\t@ILogService _logService: ILogService,\n\t\t@IExtensionsWorkbenchService _extensionWorkbenchService: IExtensionsWorkbenchService,\n\t\t@IExtensionService _extensionService: IExtensionService,\n\t\t@ICommandService _commandService: ICommandService,\n\t\t@INotebookKernelHistoryService private readonly _notebookKernelHistoryService: INotebookKernelHistoryService,\n\t\t@IOpenerService private readonly _openerService: IOpenerService\n\n\t) {\n\t\tsuper(\n\t\t\t_notebookKernelService,\n\t\t\t_productService,\n\t\t\t_quickInputService,\n\t\t\t_labelService,\n\t\t\t_logService,\n\t\t\t_extensionWorkbenchService,\n\t\t\t_extensionService,\n\t\t\t_commandService,\n\t\t);\n\t}\n\n\tprotected _getKernelPickerQuickPickItems(\n\t\tnotebookTextModel: NotebookTextModel,\n\t\tmatchResult: INotebookKernelMatchResult,\n\t\tnotebookKernelService: INotebookKernelService,\n\t\tscopedContextKeyService: IContextKeyService,\n\t): QuickPickInput<KernelQuickPickItem>[] {\n\t\tconst quickPickItems: QuickPickInput<KernelQuickPickItem>[] = [];\n\n\t\tif (matchResult.selected) {\n\t\t\tconst kernelItem = toKernelQuickPick(\n\t\t\t\tmatchResult.selected,\n\t\t\t\tmatchResult.selected,\n\t\t\t);\n\t\t\tquickPickItems.push(kernelItem);\n\t\t}\n\n\t\tmatchResult.suggestions\n\t\t\t.filter((kernel) => kernel.id !== matchResult.selected?.id)\n\t\t\t.map((kernel) => toKernelQuickPick(kernel, matchResult.selected))\n\t\t\t.forEach((kernel) => {\n\t\t\t\tquickPickItems.push(kernel);\n\t\t\t});\n\n\t\tconst shouldAutoRun = quickPickItems.length === 0;\n\n\t\tif (quickPickItems.length > 0) {\n\t\t\tquickPickItems.push({\n\t\t\t\ttype: \"separator\",\n\t\t\t});\n\t\t}\n\n\t\t// select another kernel quick pick\n\t\tquickPickItems.push({\n\t\t\tid: \"selectAnother\",\n\t\t\tlabel: localize(\n\t\t\t\t\"selectAnotherKernel.more\",\n\t\t\t\t\"Select Another Kernel...\",\n\t\t\t),\n\t\t\tautoRun: shouldAutoRun,\n\t\t});\n\n\t\treturn quickPickItems;\n\t}\n\n\tprotected override _selecteKernel(\n\t\tnotebook: NotebookTextModel,\n\t\tkernel: INotebookKernel,\n\t): void {\n\t\tconst currentInfo =\n\t\t\tthis._notebookKernelService.getMatchingKernel(notebook);\n\t\tif (currentInfo.selected) {\n\t\t\t// there is already a selected kernel\n\t\t\tthis._notebookKernelHistoryService.addMostRecentKernel(\n\t\t\t\tcurrentInfo.selected,\n\t\t\t);\n\t\t}\n\t\tsuper._selecteKernel(notebook, kernel);\n\t\tthis._notebookKernelHistoryService.addMostRecentKernel(kernel);\n\t}\n\n\tprotected override _getMatchingResult(\n\t\tnotebook: NotebookTextModel,\n\t): INotebookKernelMatchResult {\n\t\tconst { selected, all } =\n\t\t\tthis._notebookKernelHistoryService.getKernels(notebook);\n\t\tconst matchingResult =\n\t\t\tthis._notebookKernelService.getMatchingKernel(notebook);\n\t\treturn {\n\t\t\tselected: selected,\n\t\t\tall: matchingResult.all,\n\t\t\tsuggestions: all,\n\t\t\thidden: [],\n\t\t};\n\t}\n\n\tprotected override async _handleQuickPick(\n\t\teditor: IActiveNotebookEditor,\n\t\tpick: KernelQuickPickItem,\n\t\titems: KernelQuickPickItem[],\n\t): Promise<boolean> {\n\t\tif (pick.id === \"selectAnother\") {\n\t\t\treturn this.displaySelectAnotherQuickPick(\n\t\t\t\teditor,\n\t\t\t\titems.length === 1 && items[0] === pick,\n\t\t\t);\n\t\t}\n\n\t\treturn super._handleQuickPick(editor, pick, items);\n\t}\n\n\tprivate async displaySelectAnotherQuickPick(\n\t\teditor: IActiveNotebookEditor,\n\t\tkernelListEmpty: boolean,\n\t): Promise<boolean> {\n\t\tconst notebook: NotebookTextModel = editor.textModel;\n\t\tconst disposables = new DisposableStore();\n\t\tconst quickPick = disposables.add(\n\t\t\tthis._quickInputService.createQuickPick<KernelQuickPickItem>({\n\t\t\t\tuseSeparators: true,\n\t\t\t}),\n\t\t);\n\t\tconst quickPickItem = await new Promise<\n\t\t\tKernelQuickPickItem | IQuickInputButton | undefined\n\t\t>((resolve) => {\n\t\t\t// select from kernel sources\n\t\t\tquickPick.title = kernelListEmpty\n\t\t\t\t? localize(\"select\", \"Select Kernel\")\n\t\t\t\t: localize(\"selectAnotherKernel\", \"Select Another Kernel\");\n\t\t\tquickPick.placeholder = localize(\n\t\t\t\t\"selectKernel.placeholder\",\n\t\t\t\t\"Type to choose a kernel source\",\n\t\t\t);\n\t\t\tquickPick.busy = true;\n\t\t\tquickPick.buttons = [this._quickInputService.backButton];\n\t\t\tquickPick.show();\n\n\t\t\tdisposables.add(\n\t\t\t\tquickPick.onDidTriggerButton((button) => {\n\t\t\t\t\tif (button === this._quickInputService.backButton) {\n\t\t\t\t\t\tresolve(button);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\t\t\tdisposables.add(\n\t\t\t\tquickPick.onDidTriggerItemButton(async (e) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tisKernelSourceQuickPickItem(e.item) &&\n\t\t\t\t\t\te.item.documentation !== undefined\n\t\t\t\t\t) {\n\t\t\t\t\t\tconst uri = URI.isUri(e.item.documentation)\n\t\t\t\t\t\t\t? URI.parse(e.item.documentation)\n\t\t\t\t\t\t\t: await this._commandService.executeCommand(\n\t\t\t\t\t\t\t\t\te.item.documentation,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\tvoid this._openerService.open(uri, {\n\t\t\t\t\t\t\topenExternal: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\t\t\tdisposables.add(\n\t\t\t\tquickPick.onDidAccept(async () => {\n\t\t\t\t\tresolve(quickPick.selectedItems[0]);\n\t\t\t\t}),\n\t\t\t);\n\t\t\tdisposables.add(\n\t\t\t\tquickPick.onDidHide(() => {\n\t\t\t\t\tresolve(undefined);\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tthis._calculdateKernelSources(editor).then((quickPickItems) => {\n\t\t\t\tquickPick.items = quickPickItems;\n\t\t\t\tif (quickPick.items.length > 0) {\n\t\t\t\t\tquickPick.busy = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tdisposables.add(\n\t\t\t\tEvent.debounce<void, void>(\n\t\t\t\t\tEvent.any(\n\t\t\t\t\t\tthis._notebookKernelService.onDidChangeSourceActions,\n\t\t\t\t\t\tthis._notebookKernelService.onDidAddKernel,\n\t\t\t\t\t\tthis._notebookKernelService.onDidRemoveKernel,\n\t\t\t\t\t),\n\t\t\t\t\t(last, _current) => last,\n\t\t\t\t\tKERNEL_PICKER_UPDATE_DEBOUNCE,\n\t\t\t\t)(async () => {\n\t\t\t\t\tquickPick.busy = true;\n\t\t\t\t\tconst quickPickItems =\n\t\t\t\t\t\tawait this._calculdateKernelSources(editor);\n\t\t\t\t\tquickPick.items = quickPickItems;\n\t\t\t\t\tquickPick.busy = false;\n\t\t\t\t}),\n\t\t\t);\n\t\t});\n\n\t\tquickPick.hide();\n\t\tdisposables.dispose();\n\n\t\tif (quickPickItem === this._quickInputService.backButton) {\n\t\t\treturn this.showQuickPick(editor, undefined, true);\n\t\t}\n\n\t\tif (quickPickItem) {\n\t\t\tconst selectedKernelPickItem = quickPickItem as KernelQuickPickItem;\n\t\t\tif (isKernelSourceQuickPickItem(selectedKernelPickItem)) {\n\t\t\t\ttry {\n\t\t\t\t\tconst selectedKernelId = await this._executeCommand<string>(\n\t\t\t\t\t\tnotebook,\n\t\t\t\t\t\tselectedKernelPickItem.command,\n\t\t\t\t\t);\n\t\t\t\t\tif (selectedKernelId) {\n\t\t\t\t\t\tconst { all } = await this._getMatchingResult(notebook);\n\t\t\t\t\t\tconst kernel = all.find(\n\t\t\t\t\t\t\t(kernel) =>\n\t\t\t\t\t\t\t\tkernel.id ===\n\t\t\t\t\t\t\t\t`ms-toolsai.jupyter/${selectedKernelId}`,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (kernel) {\n\t\t\t\t\t\t\tawait this._selecteKernel(notebook, kernel);\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn this.displaySelectAnotherQuickPick(\n\t\t\t\t\t\t\teditor,\n\t\t\t\t\t\t\tfalse,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t} catch (ex) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else if (isKernelPick(selectedKernelPickItem)) {\n\t\t\t\tawait this._selecteKernel(\n\t\t\t\t\tnotebook,\n\t\t\t\t\tselectedKernelPickItem.kernel,\n\t\t\t\t);\n\t\t\t\treturn true;\n\t\t\t} else if (isGroupedKernelsPick(selectedKernelPickItem)) {\n\t\t\t\tawait this._selectOneKernel(\n\t\t\t\t\tnotebook,\n\t\t\t\t\tselectedKernelPickItem.label,\n\t\t\t\t\tselectedKernelPickItem.kernels,\n\t\t\t\t);\n\t\t\t\treturn true;\n\t\t\t} else if (isSourcePick(selectedKernelPickItem)) {\n\t\t\t\t// selected explicilty, it should trigger the execution?\n\t\t\t\ttry {\n\t\t\t\t\tawait selectedKernelPickItem.action.runAction();\n\t\t\t\t\treturn true;\n\t\t\t\t} catch (ex) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t} else if (isSearchMarketplacePick(selectedKernelPickItem)) {\n\t\t\t\tawait this._showKernelExtension(\n\t\t\t\t\tthis._extensionWorkbenchService,\n\t\t\t\t\tthis._extensionService,\n\t\t\t\t\teditor.textModel.viewType,\n\t\t\t\t\t[],\n\t\t\t\t);\n\t\t\t\treturn true;\n\t\t\t} else if (isInstallExtensionPick(selectedKernelPickItem)) {\n\t\t\t\tawait this._showKernelExtension(\n\t\t\t\t\tthis._extensionWorkbenchService,\n\t\t\t\t\tthis._extensionService,\n\t\t\t\t\teditor.textModel.viewType,\n\t\t\t\t\tselectedKernelPickItem.extensionIds,\n\t\t\t\t\tthis._productService.quality !== \"stable\",\n\t\t\t\t);\n\t\t\t\treturn this.displaySelectAnotherQuickPick(editor, false);\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tprivate async _calculdateKernelSources(editor: IActiveNotebookEditor) {\n\t\tconst notebook: NotebookTextModel = editor.textModel;\n\n\t\tconst sourceActionCommands =\n\t\t\tthis._notebookKernelService.getSourceActions(\n\t\t\t\tnotebook,\n\t\t\t\teditor.scopedContextKeyService,\n\t\t\t);\n\t\tconst actions =\n\t\t\tawait this._notebookKernelService.getKernelSourceActions2(notebook);\n\t\tconst matchResult = this._getMatchingResult(notebook);\n\n\t\tif (\n\t\t\tsourceActionCommands.length === 0 &&\n\t\t\tmatchResult.all.length === 0 &&\n\t\t\tactions.length === 0\n\t\t) {\n\t\t\treturn (\n\t\t\t\t(await this._getKernelRecommendationsQuickPickItems(\n\t\t\t\t\tnotebook,\n\t\t\t\t\tthis._extensionWorkbenchService,\n\t\t\t\t)) ?? []\n\t\t\t);\n\t\t}\n\n\t\tconst others = matchResult.all.filter(\n\t\t\t(item) => item.extension.value !== JUPYTER_EXTENSION_ID,\n\t\t);\n\t\tconst quickPickItems: QuickPickInput<KernelQuickPickItem>[] = [];\n\n\t\t// group controllers by extension\n\t\tfor (const group of groupBy(others, (a, b) =>\n\t\t\ta.extension.value === b.extension.value ? 0 : 1,\n\t\t)) {\n\t\t\tconst extension = this._extensionService.extensions.find(\n\t\t\t\t(extension) =>\n\t\t\t\t\textension.identifier.value === group[0].extension.value,\n\t\t\t);\n\t\t\tconst source =\n\t\t\t\textension?.displayName ??\n\t\t\t\textension?.description ??\n\t\t\t\tgroup[0].extension.value;\n\t\t\tif (group.length > 1) {\n\t\t\t\tquickPickItems.push({\n\t\t\t\t\tlabel: source,\n\t\t\t\t\tkernels: group,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tquickPickItems.push({\n\t\t\t\t\tlabel: group[0].label,\n\t\t\t\t\tkernel: group[0],\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tconst validActions = actions.filter((action) => action.command);\n\n\t\tquickPickItems.push(\n\t\t\t...validActions.map((action) => {\n\t\t\t\tconst buttons = action.documentation\n\t\t\t\t\t? [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ticonClass: ThemeIcon.asClassName(Codicon.info),\n\t\t\t\t\t\t\t\ttooltip: localize(\n\t\t\t\t\t\t\t\t\t\"learnMoreTooltip\",\n\t\t\t\t\t\t\t\t\t\"Learn More\",\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]\n\t\t\t\t\t: [];\n\t\t\t\treturn {\n\t\t\t\t\tid:\n\t\t\t\t\t\ttypeof action.command! === \"string\"\n\t\t\t\t\t\t\t? action.command\n\t\t\t\t\t\t\t: action.command!.id,\n\t\t\t\t\tlabel: action.label,\n\t\t\t\t\tdescription: action.description,\n\t\t\t\t\tcommand: action.command,\n\t\t\t\t\tdocumentation: action.documentation,\n\t\t\t\t\tbuttons,\n\t\t\t\t};\n\t\t\t}),\n\t\t);\n\n\t\tfor (const sourceAction of sourceActionCommands) {\n\t\t\tconst res: SourcePick = {\n\t\t\t\taction: sourceAction,\n\t\t\t\tpicked: false,\n\t\t\t\tlabel: sourceAction.action.label,\n\t\t\t\ttooltip: sourceAction.action.tooltip,\n\t\t\t};\n\n\t\t\tquickPickItems.push(res);\n\t\t}\n\n\t\treturn quickPickItems;\n\t}\n\n\tprivate async _selectOneKernel(\n\t\tnotebook: NotebookTextModel,\n\t\tsource: string,\n\t\tkernels: INotebookKernel[],\n\t) {\n\t\tconst quickPickItems: QuickPickInput<KernelPick>[] = kernels.map(\n\t\t\t(kernel) => toKernelQuickPick(kernel, undefined),\n\t\t);\n\t\tconst localDisposableStore = new DisposableStore();\n\t\tconst quickPick = localDisposableStore.add(\n\t\t\tthis._quickInputService.createQuickPick<KernelQuickPickItem>({\n\t\t\t\tuseSeparators: true,\n\t\t\t}),\n\t\t);\n\t\tquickPick.items = quickPickItems;\n\t\tquickPick.canSelectMany = false;\n\n\t\tquickPick.title = localize(\n\t\t\t\"selectKernelFromExtension\",\n\t\t\t\"Select Kernel from {0}\",\n\t\t\tsource,\n\t\t);\n\n\t\tlocalDisposableStore.add(\n\t\t\tquickPick.onDidAccept(async () => {\n\t\t\t\tif (\n\t\t\t\t\tquickPick.selectedItems &&\n\t\t\t\t\tquickPick.selectedItems.length > 0 &&\n\t\t\t\t\tisKernelPick(quickPick.selectedItems[0])\n\t\t\t\t) {\n\t\t\t\t\tawait this._selecteKernel(\n\t\t\t\t\t\tnotebook,\n\t\t\t\t\t\tquickPick.selectedItems[0].kernel,\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tquickPick.hide();\n\t\t\t\tquickPick.dispose();\n\t\t\t}),\n\t\t);\n\n\t\tlocalDisposableStore.add(\n\t\t\tquickPick.onDidHide(() => {\n\t\t\t\tlocalDisposableStore.dispose();\n\t\t\t}),\n\t\t);\n\n\t\tquickPick.show();\n\t}\n\n\tprivate async _executeCommand<T>(\n\t\tnotebook: NotebookTextModel,\n\t\tcommand: string | Command,\n\t): Promise<T | undefined | void> {\n\t\tconst id = typeof command === \"string\" ? command : command.id;\n\t\tconst args =\n\t\t\ttypeof command === \"string\" ? [] : (command.arguments ?? []);\n\n\t\tif (\n\t\t\ttypeof command === \"string\" ||\n\t\t\t!command.arguments ||\n\t\t\t!Array.isArray(command.arguments) ||\n\t\t\tcommand.arguments.length === 0\n\t\t) {\n\t\t\targs.unshift({\n\t\t\t\turi: notebook.uri,\n\t\t\t\t$mid: MarshalledId.NotebookActionContext,\n\t\t\t});\n\t\t}\n\n\t\tif (typeof command === \"string\") {\n\t\t\treturn this._commandService.executeCommand(id);\n\t\t} else {\n\t\t\treturn this._commandService.executeCommand(id, ...args);\n\t\t}\n\t}\n\n\tstatic updateKernelStatusAction(\n\t\tnotebook: NotebookTextModel,\n\t\taction: IAction,\n\t\tnotebookKernelService: INotebookKernelService,\n\t\tnotebookKernelHistoryService: INotebookKernelHistoryService,\n\t) {\n\t\tconst detectionTasks =\n\t\t\tnotebookKernelService.getKernelDetectionTasks(notebook);\n\t\tif (detectionTasks.length) {\n\t\t\tconst info = notebookKernelService.getMatchingKernel(notebook);\n\t\t\taction.enabled = true;\n\t\t\taction.class = ThemeIcon.asClassName(\n\t\t\t\tThemeIcon.modify(executingStateIcon, \"spin\"),\n\t\t\t);\n\n\t\t\tif (info.selected) {\n\t\t\t\taction.label = info.selected.label;\n\t\t\t\tconst kernelInfo =\n\t\t\t\t\tinfo.selected.description ?? info.selected.detail;\n\t\t\t\taction.tooltip = kernelInfo\n\t\t\t\t\t? localize(\n\t\t\t\t\t\t\t\"kernels.selectedKernelAndKernelDetectionRunning\",\n\t\t\t\t\t\t\t\"Selected Kernel: {0} (Kernel Detection Tasks Running)\",\n\t\t\t\t\t\t\tkernelInfo,\n\t\t\t\t\t\t)\n\t\t\t\t\t: localize(\"kernels.detecting\", \"Detecting Kernels\");\n\t\t\t} else {\n\t\t\t\taction.label = localize(\n\t\t\t\t\t\"kernels.detecting\",\n\t\t\t\t\t\"Detecting Kernels\",\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tconst runningActions =\n\t\t\tnotebookKernelService.getRunningSourceActions(notebook);\n\n\t\tconst updateActionFromSourceAction = (\n\t\t\tsourceAction: ISourceAction,\n\t\t\trunning: boolean,\n\t\t) => {\n\t\t\tconst sAction = sourceAction.action;\n\t\t\taction.class = running\n\t\t\t\t? ThemeIcon.asClassName(\n\t\t\t\t\t\tThemeIcon.modify(executingStateIcon, \"spin\"),\n\t\t\t\t\t)\n\t\t\t\t: ThemeIcon.asClassName(selectKernelIcon);\n\t\t\taction.label = sAction.label;\n\t\t\taction.enabled = true;\n\t\t};\n\n\t\tif (runningActions.length) {\n\t\t\treturn updateActionFromSourceAction(\n\t\t\t\trunningActions[0] /** TODO handle multiple actions state */,\n\t\t\t\ttrue,\n\t\t\t);\n\t\t}\n\n\t\tconst { selected } = notebookKernelHistoryService.getKernels(notebook);\n\n\t\tif (selected) {\n\t\t\taction.label = selected.label;\n\t\t\taction.class = ThemeIcon.asClassName(selectKernelIcon);\n\t\t\taction.tooltip = selected.description ?? selected.detail ?? \"\";\n\t\t} else {\n\t\t\taction.label = localize(\"select\", \"Select Kernel\");\n\t\t\taction.class = ThemeIcon.asClassName(selectKernelIcon);\n\t\t\taction.tooltip = \"\";\n\t\t}\n\t}\n\n\tstatic async resolveKernel(\n\t\tnotebook: INotebookTextModel,\n\t\tnotebookKernelService: INotebookKernelService,\n\t\tnotebookKernelHistoryService: INotebookKernelHistoryService,\n\t\tcommandService: ICommandService,\n\t): Promise<INotebookKernel | undefined> {\n\t\tconst alreadySelected =\n\t\t\tnotebookKernelHistoryService.getKernels(notebook);\n\n\t\tif (alreadySelected.selected) {\n\t\t\treturn alreadySelected.selected;\n\t\t}\n\n\t\tawait commandService.executeCommand(SELECT_KERNEL_ID);\n\t\tconst { selected } = notebookKernelHistoryService.getKernels(notebook);\n\t\treturn selected;\n\t}\n}\n"],
  "mappings": ";;;;;;;;;;;;AAMA,SAAS,eAAe;AACxB,SAAS,+BAA+B;AACxC,SAAS,yBAAyB;AAClC,SAAS,eAAe;AACxB,SAAS,aAAa;AACtB,SAAS,uBAAuB;AAChC,SAAS,oBAAoB;AAC7B,SAAS,4BAA4B;AACrC,SAAS,iBAAiB;AAC1B,SAAS,WAAW;AAEpB,SAAS,gBAAgB;AACzB,SAAS,uBAAuB;AAEhC,SAAS,qBAAqB;AAC9B,SAAS,mBAAmB;AAC5B,SAAS,sBAAsB;AAC/B,SAAS,uBAAuB;AAChC,SAAS,wBAAwB;AACjC;AAAA,EAEC;AAAA,OAIM;AACP,SAAS,uBAAuB;AAChC,SAAS,yBAAyB;AAClC;AAAA,EAEC;AAAA,OACM;AAGP;AAAA,EAEC;AAAA,EAEA;AAAA,OAEM;AACP,SAAS,wBAAwB;AACjC;AAAA,EAGC;AAAA,EACA;AAAA,OACM;AAEP,SAAS,oBAAoB,wBAAwB;AAGrD,SAAS,aACR,MACqB;AACrB,SAAO,YAAY;AACpB;AAJS;AAST,SAAS,qBACR,MAC6B;AAC7B,SAAO,aAAa;AACrB;AAJS;AAMT,SAAS,aACR,MACqB;AACrB,SAAO,YAAY;AACpB;AAJS;AAMT,SAAS,uBACR,MAC+B;AAC/B,SAAO,KAAK,OAAO,sBAAsB,kBAAkB;AAC5D;AAJS;AAMT,SAAS,wBACR,MACgC;AAChC,SAAO,KAAK,OAAO;AACpB;AAJS;AAUT,SAAS,4BACR,MACoC;AACpC,SAAO,aAAa;AACrB;AAJS;AAMT,SAAS,eACR,MACyB;AACzB,SAAO,aAAa,QAAQ,CAAC,CAAC,KAAK;AACpC;AAJS;AAaT,MAAM,gCAAgC;AAetC,SAAS,kBACR,QACA,UACC;AACD,QAAM,MAAkB;AAAA,IACvB;AAAA,IACA,QAAQ,OAAO,OAAO,UAAU;AAAA,IAChC,OAAO,OAAO;AAAA,IACd,aAAa,OAAO;AAAA,IACpB,QAAQ,OAAO;AAAA,EAChB;AACA,MAAI,OAAO,OAAO,UAAU,IAAI;AAC/B,QAAI,IAAI,aAAa;AACpB,UAAI,cAAc;AAAA,QACjB;AAAA,QACA;AAAA,QACA,IAAI;AAAA,MACL;AAAA,IACD,OAAO;AACN,UAAI,cAAc,SAAS,YAAY,oBAAoB;AAAA,IAC5D;AAAA,EACD;AACA,SAAO;AACR;AAvBS;AAyBT,MAAe,yBAA0D;AAAA,EACxE,YACoB,wBACA,iBACA,oBACA,eACA,aACA,4BACA,mBACA,iBAClB;AARkB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA,EACjB;AAAA,EApKJ,OA0JyE;AAAA;AAAA;AAAA,EAYxE,MAAM,cACL,QACA,UACA,aACmB;AACnB,UAAM,WAAW,OAAO;AACxB,UAAM,0BAA0B,OAAO;AACvC,UAAM,cAAc,KAAK,mBAAmB,QAAQ;AACpD,UAAM,EAAE,UAAU,IAAI,IAAI;AAE1B,QAAI;AACJ,QAAI,UAAU;AACb,iBAAW,aAAa,KAAK;AAC5B,YAAI,UAAU,OAAO,UAAU;AAC9B,sBAAY;AACZ;AAAA,QACD;AAAA,MACD;AACA,UAAI,CAAC,WAAW;AACf,aAAK,YAAY;AAAA,UAChB,yCAAyC,QAAQ,UAAU,IAAI,IAAI,CAAC,MAAM,EAAE,EAAE,CAAC;AAAA,QAChF;AACA,eAAO;AAAA,MACR;AAAA,IACD;AAEA,QAAI,WAAW;AACd,WAAK,eAAe,UAAU,SAAS;AACvC,aAAO;AAAA,IACR;AAEA,UAAM,uBAAuB,IAAI,gBAAgB;AACjD,UAAM,YAAY,qBAAqB;AAAA,MACtC,KAAK,mBAAmB,gBAAqC;AAAA,QAC5D,eAAe;AAAA,MAChB,CAAC;AAAA,IACF;AACA,UAAM,iBAAiB,KAAK;AAAA,MAC3B;AAAA,MACA;AAAA,MACA,KAAK;AAAA,MACL;AAAA,IACD;AAEA,QACC,eAAe,WAAW,KAC1B,eAAe,eAAe,CAAC,CAAC,KAChC,CAAC,aACA;AACD,YAAM,SAAS,MAAM,KAAK;AAAA,QACzB;AAAA,QACA,eAAe,CAAC;AAAA,QAChB;AAAA,MACD;AACA,2BAAqB,QAAQ;AAC7B,aAAO;AAAA,IACR;AAEA,cAAU,QAAQ;AAClB,cAAU,gBAAgB;AAC1B,cAAU,cAAc,WACrB;AAAA,MACA;AAAA,MACA;AAAA,MACA,KAAK,cAAc,YAAY,SAAS,KAAK;AAAA,QAC5C,UAAU;AAAA,MACX,CAAC;AAAA,IACF,IACC;AAAA,MACA;AAAA,MACA;AAAA,MACA,KAAK,cAAc,YAAY,SAAS,KAAK;AAAA,QAC5C,UAAU;AAAA,MACX,CAAC;AAAA,IACF;AAEF,cAAU,OACT,KAAK,uBAAuB,wBAAwB,QAAQ,EAC1D,SAAS;AAEZ,UAAM,8BACL,KAAK,uBAAuB,gCAAgC,MAAM;AACjE,gBAAU,OACT,KAAK,uBAAuB;AAAA,QAC3B;AAAA,MACD,EAAE,SAAS;AAAA,IACb,CAAC;AAGF,UAAM,kCACL,eAAe,WAAW,IACvB;AAAA,MAAwB,CAAC,UACzB,KAAK;AAAA,QACJ;AAAA,QACA;AAAA,QACA,KAAK;AAAA,QACL;AAAA,MACD;AAAA,IACD,IACC;AAEJ,UAAM,4BAA4B,MAAM;AAAA,MACvC,MAAM;AAAA,QACL,KAAK,uBAAuB;AAAA,QAC5B,KAAK,uBAAuB;AAAA,QAC5B,KAAK,uBAAuB;AAAA,QAC5B,KAAK,uBAAuB;AAAA,MAC7B;AAAA,MACA,CAAC,MAAM,aAAa;AAAA,MACpB;AAAA,IACD,EAAE,YAAY;AAEb,gBAAU,OAAO;AACjB,uCAAiC,OAAO;AAExC,YAAM,qBAAqB,UAAU;AACrC,YAAMA,eAAc,KAAK,mBAAmB,QAAQ;AACpD,YAAMC,kBAAiB,KAAK;AAAA,QAC3B;AAAA,QACAD;AAAA,QACA,KAAK;AAAA,QACL;AAAA,MACD;AACA,gBAAU,qBAAqB;AAG/B,YAAM,cAAqC,CAAC;AAC5C,iBAAW,QAAQ,oBAAoB;AACtC,YAAI,aAAa,IAAI,GAAG;AACvB,gBAAM,WAAW,KAAK,OAAO;AAC7B,gBAAM,WAAWC,gBAAe;AAAA,YAC/B,CAAC,OAAO,aAAa,EAAE,KAAK,GAAG,OAAO,OAAO;AAAA,UAC9C;AACA,cAAI,UAAU;AACb,wBAAY,KAAK,QAAQ;AAAA,UAC1B;AAAA,QACD,WAAW,aAAa,IAAI,GAAG;AAC9B,gBAAM,WAAWA,gBAAe;AAAA,YAC/B,CAAC,OACA,aAAa,EAAE,KACf,GAAG,OAAO,OAAO,OAAO,KAAK,OAAO,OAAO;AAAA,UAC7C;AACA,cAAI,UAAU;AACb,wBAAY,KAAK,QAAQ;AAAA,UAC1B;AAAA,QACD;AAAA,MACD;AAEA,gBAAU,QAAQA;AAClB,gBAAU,cAAc;AAAA,IACzB,GAAG,IAAI;AAEP,UAAM,OAAO,MAAM,IAAI,QAGpB,CAAC,SAAS,WAAW;AACvB,2BAAqB;AAAA,QACpB,UAAU,YAAY,MAAM;AAC3B,gBAAM,OAAO,UAAU,cAAc,CAAC;AACtC,cAAI,MAAM;AACT,oBAAQ;AAAA,cACP,UAAU;AAAA,cACV,OAAO,UAAU;AAAA,YAClB,CAAC;AAAA,UACF,OAAO;AACN,oBAAQ;AAAA,cACP,UAAU;AAAA,cACV,OAAO,UAAU;AAAA,YAClB,CAAC;AAAA,UACF;AAEA,oBAAU,KAAK;AAAA,QAChB,CAAC;AAAA,MACF;AAEA,2BAAqB;AAAA,QACpB,UAAU,UAAU,MAAM;AACzB,sCAA4B,QAAQ;AACpC,oCAA0B,QAAQ;AAClC,oBAAU,QAAQ;AAClB,kBAAQ;AAAA,YACP,UAAU;AAAA,YACV,OAAO,UAAU;AAAA,UAClB,CAAC;AAAA,QACF,CAAC;AAAA,MACF;AACA,gBAAU,KAAK;AAAA,IAChB,CAAC;AAED,yBAAqB,QAAQ;AAE7B,QAAI,KAAK,UAAU;AAClB,aAAO,MAAM,KAAK;AAAA,QACjB;AAAA,QACA,KAAK;AAAA,QACL,KAAK;AAAA,MACN;AAAA,IACD;AAEA,WAAO;AAAA,EACR;AAAA,EAEU,mBAAmB,UAA6B;AACzD,WAAO,KAAK,uBAAuB,kBAAkB,QAAQ;AAAA,EAC9D;AAAA,EASA,MAAgB,iBACf,QACA,MACA,gBACmB;AACnB,QAAI,aAAa,IAAI,GAAG;AACvB,YAAM,YAAY,KAAK;AACvB,WAAK,eAAe,OAAO,WAAW,SAAS;AAC/C,aAAO;AAAA,IACR;AAGA,QAAI,wBAAwB,IAAI,GAAG;AAClC,YAAM,KAAK;AAAA,QACV,KAAK;AAAA,QACL,KAAK;AAAA,QACL,OAAO,UAAU;AAAA,QACjB,CAAC;AAAA,MACF;AAAA,IAED,WAAW,uBAAuB,IAAI,GAAG;AACxC,YAAM,KAAK;AAAA,QACV,KAAK;AAAA,QACL,KAAK;AAAA,QACL,OAAO,UAAU;AAAA,QACjB,KAAK;AAAA,QACL,KAAK,gBAAgB,YAAY;AAAA,MAClC;AAAA,IACD,WAAW,aAAa,IAAI,GAAG;AAE9B,WAAK,OAAO,UAAU;AAAA,IACvB;AAEA,WAAO;AAAA,EACR;AAAA,EAEU,eACT,UACA,QACC;AACD,SAAK,uBAAuB,wBAAwB,QAAQ,QAAQ;AAAA,EACrE;AAAA,EAEA,MAAgB,qBACf,2BACA,kBACA,UACA,QACA,YACC;AAED,UAAM,sBAAoC,CAAC;AAC3C,UAAM,qBAAmC,CAAC;AAE1C,eAAW,SAAS,QAAQ;AAC3B,YAAM,aACL,MAAM,0BAA0B;AAAA,QAC/B,CAAC,EAAE,IAAI,MAAM,CAAC;AAAA,QACd,kBAAkB;AAAA,MACnB,GACC,CAAC;AACH,UACC,UAAU,oBACT,gBAAgB,oBACjB,UAAU,oBACT,gBAAgB,qBACjB,UAAU,oBACT,gBAAgB,uBAChB;AACD,2BAAmB,KAAK,SAAS;AAAA,MAClC,OAAO;AACN,cAAM,aACL,MAAM,0BAA0B,WAAW,SAAS;AACrD,YAAI,YAAY;AACf,8BAAoB,KAAK,SAAS;AAAA,QACnC;AAAA,MACD;AAAA,IACD;AAEA,QAAI,oBAAoB,UAAU,mBAAmB,QAAQ;AAC5D,YAAM,QAAQ,IAAI;AAAA,QACjB,GAAG,oBAAoB,IAAI,OAAO,cAAc;AAC/C,gBAAM,0BAA0B;AAAA,YAC/B;AAAA,YACA;AAAA,cACC,0BAA0B,cAAc;AAAA,cACxC,SAAS,EAAE,iBAAiB,KAAK;AAAA,YAClC;AAAA,YACA,iBAAiB;AAAA,UAClB;AAAA,QACD,CAAC;AAAA,QACD,GAAG,mBAAmB,IAAI,OAAO,cAAc;AAC9C,kBAAQ,UAAU,iBAAiB;AAAA,YAClC,KAAK,gBAAgB;AACpB,oBAAM,0BAA0B;AAAA,gBAC/B,CAAC,SAAS;AAAA,gBACV,gBAAgB;AAAA,cACjB;AACA;AAAA,YACD,KAAK,gBAAgB;AACpB,oBAAM,0BAA0B;AAAA,gBAC/B,CAAC,SAAS;AAAA,gBACV,gBAAgB;AAAA,cACjB;AACA;AAAA,YACD,KAAK,gBAAgB;AACpB,oBAAM,0BAA0B;AAAA,gBAC/B,CAAC,SAAS;AAAA,gBACV,gBAAgB;AAAA,cACjB;AACA;AAAA,YACD;AACC;AAAA,UACF;AAAA,QACD,CAAC;AAAA,MACF,CAAC;AAED,YAAM,iBAAiB,gBAAgB,cAAc,QAAQ,EAAE;AAC/D;AAAA,IACD;AAEA,UAAM,cAAc,SAClB,MAAM,aAAa,EACnB,IAAI,oBAAoB,EACxB,KAAK,EAAE;AACT,UAAM,0BAA0B;AAAA,MAC/B,sBAAsB,WAAW;AAAA,IAClC;AAAA,EACD;AAAA,EAEA,MAAc,0CACb,mBACA,WACA,2BACA,OACC;AACD,cAAU,OAAO;AAEjB,UAAM,oBACL,MAAM,KAAK;AAAA,MACV;AAAA,MACA;AAAA,IACD;AACD,cAAU,OAAO;AAEjB,QAAI,MAAM,yBAAyB;AAClC;AAAA,IACD;AAEA,QAAI,qBAAqB,UAAU,MAAM,WAAW,GAAG;AACtD,gBAAU,QAAQ;AAAA,IACnB;AAAA,EACD;AAAA,EAEA,MAAgB,wCACf,mBACA,2BAIC;AACD,UAAM,iBAEA,CAAC;AAEP,UAAM,WAAW,KAAK,qBAAqB,iBAAiB;AAC5D,UAAM,qBACL,WACG,KAAK;AAAA,MACL,kBAAkB;AAAA,MAClB;AAAA,IACD,IACC;AACJ,QAAI,oBAAoB;AACvB,YAAM,0BAA0B,WAAW;AAE3C,YAAM,aAAa,0BAA0B,UAAU;AAAA,QACtD,CAAC,OACC,EAAE,oBACF,gBAAgB,wBAChB,EAAE,oBAAoB,gBAAgB,mBACtC,EAAE,oBACD,gBAAgB,qBAClB,mBAAmB,aAAa,SAAS,EAAE,WAAW,EAAE;AAAA,MAC1D;AAEA,UAAI,WAAW,WAAW,mBAAmB,aAAa,QAAQ;AAEjE,eAAO;AAAA,MACR;AAGA,qBAAe,KAAK;AAAA,QACnB,IAAI;AAAA,QACJ,aACC,mBAAmB,eACnB,mBAAmB,aAAa,KAAK,IAAI;AAAA,QAC1C,OACC,KAAK,QAAQ,UAAU,EAAE,OACzB;AAAA,UACC;AAAA,UACA;AAAA,QACD;AAAA,QACD,cAAc,mBAAmB;AAAA,MAClC,CAAgC;AAAA,IACjC;AAEA,mBAAe,KAAK;AAAA,MACnB,IAAI;AAAA,MACJ,OAAO;AAAA,QACN;AAAA,QACA;AAAA,MACD;AAAA,IACD,CAAiC;AAEjC,WAAO;AAAA,EACR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOQ,qBACP,mBACqB;AACrB,UAAM,WAAW,kBAAkB;AACnC,QAAI,0BAA+C,UAChD,UAAU,eAAe;AAE5B,QAAI,CAAC,yBAAyB;AAC7B,YAAM,gBAAgB,kBAAkB,MACtC,IAAI,CAAC,SAAS,KAAK,QAAQ,EAC3B,OAAO,CAAC,aAAa,aAAa,UAAU;AAE9C,UAAI,cAAc,SAAS,GAAG;AAC7B,cAAM,gBAAgB,cAAc,CAAC;AACrC,YACC,cAAc;AAAA,UACb,CAAC,aAAa,aAAa;AAAA,QAC5B,GACC;AACD,oCAA0B;AAAA,QAC3B;AAAA,MACD;AAAA,IACD;AACA,WAAO;AAAA,EACR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAOQ,+BACP,UACA,UAC+C;AAC/C,UAAM,iBACL,uBAAuB,IAAI,QAAQ,GAAG,IAAI,QAAQ;AACnD,WAAO;AAAA,EACR;AACD;AAEO,IAAM,0BAAN,cAAsC,yBAAyB;AAAA,EACrE,YACyB,wBACP,iBACG,oBACL,eACF,aACgB,4BACV,mBACF,iBAC+B,+BACf,gBAEhC;AACD;AAAA,MACC;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,MACA;AAAA,IACD;AAbgD;AACf;AAAA,EAalC;AAAA,EA3pBD,OAmoBsE;AAAA;AAAA;AAAA,EA0B3D,+BACT,mBACA,aACA,uBACA,yBACwC;AACxC,UAAM,iBAAwD,CAAC;AAE/D,QAAI,YAAY,UAAU;AACzB,YAAM,aAAa;AAAA,QAClB,YAAY;AAAA,QACZ,YAAY;AAAA,MACb;AACA,qBAAe,KAAK,UAAU;AAAA,IAC/B;AAEA,gBAAY,YACV,OAAO,CAAC,WAAW,OAAO,OAAO,YAAY,UAAU,EAAE,EACzD,IAAI,CAAC,WAAW,kBAAkB,QAAQ,YAAY,QAAQ,CAAC,EAC/D,QAAQ,CAAC,WAAW;AACpB,qBAAe,KAAK,MAAM;AAAA,IAC3B,CAAC;AAEF,UAAM,gBAAgB,eAAe,WAAW;AAEhD,QAAI,eAAe,SAAS,GAAG;AAC9B,qBAAe,KAAK;AAAA,QACnB,MAAM;AAAA,MACP,CAAC;AAAA,IACF;AAGA,mBAAe,KAAK;AAAA,MACnB,IAAI;AAAA,MACJ,OAAO;AAAA,QACN;AAAA,QACA;AAAA,MACD;AAAA,MACA,SAAS;AAAA,IACV,CAAC;AAED,WAAO;AAAA,EACR;AAAA,EAEmB,eAClB,UACA,QACO;AACP,UAAM,cACL,KAAK,uBAAuB,kBAAkB,QAAQ;AACvD,QAAI,YAAY,UAAU;AAEzB,WAAK,8BAA8B;AAAA,QAClC,YAAY;AAAA,MACb;AAAA,IACD;AACA,UAAM,eAAe,UAAU,MAAM;AACrC,SAAK,8BAA8B,oBAAoB,MAAM;AAAA,EAC9D;AAAA,EAEmB,mBAClB,UAC6B;AAC7B,UAAM,EAAE,UAAU,IAAI,IACrB,KAAK,8BAA8B,WAAW,QAAQ;AACvD,UAAM,iBACL,KAAK,uBAAuB,kBAAkB,QAAQ;AACvD,WAAO;AAAA,MACN;AAAA,MACA,KAAK,eAAe;AAAA,MACpB,aAAa;AAAA,MACb,QAAQ,CAAC;AAAA,IACV;AAAA,EACD;AAAA,EAEA,MAAyB,iBACxB,QACA,MACA,OACmB;AACnB,QAAI,KAAK,OAAO,iBAAiB;AAChC,aAAO,KAAK;AAAA,QACX;AAAA,QACA,MAAM,WAAW,KAAK,MAAM,CAAC,MAAM;AAAA,MACpC;AAAA,IACD;AAEA,WAAO,MAAM,iBAAiB,QAAQ,MAAM,KAAK;AAAA,EAClD;AAAA,EAEA,MAAc,8BACb,QACA,iBACmB;AACnB,UAAM,WAA8B,OAAO;AAC3C,UAAM,cAAc,IAAI,gBAAgB;AACxC,UAAM,YAAY,YAAY;AAAA,MAC7B,KAAK,mBAAmB,gBAAqC;AAAA,QAC5D,eAAe;AAAA,MAChB,CAAC;AAAA,IACF;AACA,UAAM,gBAAgB,MAAM,IAAI,QAE9B,CAAC,YAAY;AAEd,gBAAU,QAAQ,kBACf,SAAS,UAAU,eAAe,IAClC,SAAS,uBAAuB,uBAAuB;AAC1D,gBAAU,cAAc;AAAA,QACvB;AAAA,QACA;AAAA,MACD;AACA,gBAAU,OAAO;AACjB,gBAAU,UAAU,CAAC,KAAK,mBAAmB,UAAU;AACvD,gBAAU,KAAK;AAEf,kBAAY;AAAA,QACX,UAAU,mBAAmB,CAAC,WAAW;AACxC,cAAI,WAAW,KAAK,mBAAmB,YAAY;AAClD,oBAAQ,MAAM;AAAA,UACf;AAAA,QACD,CAAC;AAAA,MACF;AACA,kBAAY;AAAA,QACX,UAAU,uBAAuB,OAAO,MAAM;AAC7C,cACC,4BAA4B,EAAE,IAAI,KAClC,EAAE,KAAK,kBAAkB,QACxB;AACD,kBAAM,MAAM,IAAI,MAAM,EAAE,KAAK,aAAa,IACvC,IAAI,MAAM,EAAE,KAAK,aAAa,IAC9B,MAAM,KAAK,gBAAgB;AAAA,cAC3B,EAAE,KAAK;AAAA,YACR;AACF,iBAAK,KAAK,eAAe,KAAK,KAAK;AAAA,cAClC,cAAc;AAAA,YACf,CAAC;AAAA,UACF;AAAA,QACD,CAAC;AAAA,MACF;AACA,kBAAY;AAAA,QACX,UAAU,YAAY,YAAY;AACjC,kBAAQ,UAAU,cAAc,CAAC,CAAC;AAAA,QACnC,CAAC;AAAA,MACF;AACA,kBAAY;AAAA,QACX,UAAU,UAAU,MAAM;AACzB,kBAAQ,MAAS;AAAA,QAClB,CAAC;AAAA,MACF;AAEA,WAAK,yBAAyB,MAAM,EAAE,KAAK,CAAC,mBAAmB;AAC9D,kBAAU,QAAQ;AAClB,YAAI,UAAU,MAAM,SAAS,GAAG;AAC/B,oBAAU,OAAO;AAAA,QAClB;AAAA,MACD,CAAC;AAED,kBAAY;AAAA,QACX,MAAM;AAAA,UACL,MAAM;AAAA,YACL,KAAK,uBAAuB;AAAA,YAC5B,KAAK,uBAAuB;AAAA,YAC5B,KAAK,uBAAuB;AAAA,UAC7B;AAAA,UACA,CAAC,MAAM,aAAa;AAAA,UACpB;AAAA,QACD,EAAE,YAAY;AACb,oBAAU,OAAO;AACjB,gBAAM,iBACL,MAAM,KAAK,yBAAyB,MAAM;AAC3C,oBAAU,QAAQ;AAClB,oBAAU,OAAO;AAAA,QAClB,CAAC;AAAA,MACF;AAAA,IACD,CAAC;AAED,cAAU,KAAK;AACf,gBAAY,QAAQ;AAEpB,QAAI,kBAAkB,KAAK,mBAAmB,YAAY;AACzD,aAAO,KAAK,cAAc,QAAQ,QAAW,IAAI;AAAA,IAClD;AAEA,QAAI,eAAe;AAClB,YAAM,yBAAyB;AAC/B,UAAI,4BAA4B,sBAAsB,GAAG;AACxD,YAAI;AACH,gBAAM,mBAAmB,MAAM,KAAK;AAAA,YACnC;AAAA,YACA,uBAAuB;AAAA,UACxB;AACA,cAAI,kBAAkB;AACrB,kBAAM,EAAE,IAAI,IAAI,MAAM,KAAK,mBAAmB,QAAQ;AACtD,kBAAM,SAAS,IAAI;AAAA,cAClB,CAACC,YACAA,QAAO,OACP,sBAAsB,gBAAgB;AAAA,YACxC;AACA,gBAAI,QAAQ;AACX,oBAAM,KAAK,eAAe,UAAU,MAAM;AAC1C,qBAAO;AAAA,YACR;AACA,mBAAO;AAAA,UACR,OAAO;AACN,mBAAO,KAAK;AAAA,cACX;AAAA,cACA;AAAA,YACD;AAAA,UACD;AAAA,QACD,SAAS,IAAI;AACZ,iBAAO;AAAA,QACR;AAAA,MACD,WAAW,aAAa,sBAAsB,GAAG;AAChD,cAAM,KAAK;AAAA,UACV;AAAA,UACA,uBAAuB;AAAA,QACxB;AACA,eAAO;AAAA,MACR,WAAW,qBAAqB,sBAAsB,GAAG;AACxD,cAAM,KAAK;AAAA,UACV;AAAA,UACA,uBAAuB;AAAA,UACvB,uBAAuB;AAAA,QACxB;AACA,eAAO;AAAA,MACR,WAAW,aAAa,sBAAsB,GAAG;AAEhD,YAAI;AACH,gBAAM,uBAAuB,OAAO,UAAU;AAC9C,iBAAO;AAAA,QACR,SAAS,IAAI;AACZ,iBAAO;AAAA,QACR;AAAA,MACD,WAAW,wBAAwB,sBAAsB,GAAG;AAC3D,cAAM,KAAK;AAAA,UACV,KAAK;AAAA,UACL,KAAK;AAAA,UACL,OAAO,UAAU;AAAA,UACjB,CAAC;AAAA,QACF;AACA,eAAO;AAAA,MACR,WAAW,uBAAuB,sBAAsB,GAAG;AAC1D,cAAM,KAAK;AAAA,UACV,KAAK;AAAA,UACL,KAAK;AAAA,UACL,OAAO,UAAU;AAAA,UACjB,uBAAuB;AAAA,UACvB,KAAK,gBAAgB,YAAY;AAAA,QAClC;AACA,eAAO,KAAK,8BAA8B,QAAQ,KAAK;AAAA,MACxD;AAAA,IACD;AAEA,WAAO;AAAA,EACR;AAAA,EAEA,MAAc,yBAAyB,QAA+B;AACrE,UAAM,WAA8B,OAAO;AAE3C,UAAM,uBACL,KAAK,uBAAuB;AAAA,MAC3B;AAAA,MACA,OAAO;AAAA,IACR;AACD,UAAM,UACL,MAAM,KAAK,uBAAuB,wBAAwB,QAAQ;AACnE,UAAM,cAAc,KAAK,mBAAmB,QAAQ;AAEpD,QACC,qBAAqB,WAAW,KAChC,YAAY,IAAI,WAAW,KAC3B,QAAQ,WAAW,GAClB;AACD,aACE,MAAM,KAAK;AAAA,QACX;AAAA,QACA,KAAK;AAAA,MACN,KAAM,CAAC;AAAA,IAET;AAEA,UAAM,SAAS,YAAY,IAAI;AAAA,MAC9B,CAAC,SAAS,KAAK,UAAU,UAAU;AAAA,IACpC;AACA,UAAM,iBAAwD,CAAC;AAG/D,eAAW,SAAS;AAAA,MAAQ;AAAA,MAAQ,CAAC,GAAG,MACvC,EAAE,UAAU,UAAU,EAAE,UAAU,QAAQ,IAAI;AAAA,IAC/C,GAAG;AACF,YAAM,YAAY,KAAK,kBAAkB,WAAW;AAAA,QACnD,CAACC,eACAA,WAAU,WAAW,UAAU,MAAM,CAAC,EAAE,UAAU;AAAA,MACpD;AACA,YAAM,SACL,WAAW,eACX,WAAW,eACX,MAAM,CAAC,EAAE,UAAU;AACpB,UAAI,MAAM,SAAS,GAAG;AACrB,uBAAe,KAAK;AAAA,UACnB,OAAO;AAAA,UACP,SAAS;AAAA,QACV,CAAC;AAAA,MACF,OAAO;AACN,uBAAe,KAAK;AAAA,UACnB,OAAO,MAAM,CAAC,EAAE;AAAA,UAChB,QAAQ,MAAM,CAAC;AAAA,QAChB,CAAC;AAAA,MACF;AAAA,IACD;AAEA,UAAM,eAAe,QAAQ,OAAO,CAAC,WAAW,OAAO,OAAO;AAE9D,mBAAe;AAAA,MACd,GAAG,aAAa,IAAI,CAAC,WAAW;AAC/B,cAAM,UAAU,OAAO,gBACpB;AAAA,UACA;AAAA,YACC,WAAW,UAAU,YAAY,QAAQ,IAAI;AAAA,YAC7C,SAAS;AAAA,cACR;AAAA,cACA;AAAA,YACD;AAAA,UACD;AAAA,QACD,IACC,CAAC;AACJ,eAAO;AAAA,UACN,IACC,OAAO,OAAO,YAAa,WACxB,OAAO,UACP,OAAO,QAAS;AAAA,UACpB,OAAO,OAAO;AAAA,UACd,aAAa,OAAO;AAAA,UACpB,SAAS,OAAO;AAAA,UAChB,eAAe,OAAO;AAAA,UACtB;AAAA,QACD;AAAA,MACD,CAAC;AAAA,IACF;AAEA,eAAW,gBAAgB,sBAAsB;AAChD,YAAM,MAAkB;AAAA,QACvB,QAAQ;AAAA,QACR,QAAQ;AAAA,QACR,OAAO,aAAa,OAAO;AAAA,QAC3B,SAAS,aAAa,OAAO;AAAA,MAC9B;AAEA,qBAAe,KAAK,GAAG;AAAA,IACxB;AAEA,WAAO;AAAA,EACR;AAAA,EAEA,MAAc,iBACb,UACA,QACA,SACC;AACD,UAAM,iBAA+C,QAAQ;AAAA,MAC5D,CAAC,WAAW,kBAAkB,QAAQ,MAAS;AAAA,IAChD;AACA,UAAM,uBAAuB,IAAI,gBAAgB;AACjD,UAAM,YAAY,qBAAqB;AAAA,MACtC,KAAK,mBAAmB,gBAAqC;AAAA,QAC5D,eAAe;AAAA,MAChB,CAAC;AAAA,IACF;AACA,cAAU,QAAQ;AAClB,cAAU,gBAAgB;AAE1B,cAAU,QAAQ;AAAA,MACjB;AAAA,MACA;AAAA,MACA;AAAA,IACD;AAEA,yBAAqB;AAAA,MACpB,UAAU,YAAY,YAAY;AACjC,YACC,UAAU,iBACV,UAAU,cAAc,SAAS,KACjC,aAAa,UAAU,cAAc,CAAC,CAAC,GACtC;AACD,gBAAM,KAAK;AAAA,YACV;AAAA,YACA,UAAU,cAAc,CAAC,EAAE;AAAA,UAC5B;AAAA,QACD;AAEA,kBAAU,KAAK;AACf,kBAAU,QAAQ;AAAA,MACnB,CAAC;AAAA,IACF;AAEA,yBAAqB;AAAA,MACpB,UAAU,UAAU,MAAM;AACzB,6BAAqB,QAAQ;AAAA,MAC9B,CAAC;AAAA,IACF;AAEA,cAAU,KAAK;AAAA,EAChB;AAAA,EAEA,MAAc,gBACb,UACA,SACgC;AAChC,UAAM,KAAK,OAAO,YAAY,WAAW,UAAU,QAAQ;AAC3D,UAAM,OACL,OAAO,YAAY,WAAW,CAAC,IAAK,QAAQ,aAAa,CAAC;AAE3D,QACC,OAAO,YAAY,YACnB,CAAC,QAAQ,aACT,CAAC,MAAM,QAAQ,QAAQ,SAAS,KAChC,QAAQ,UAAU,WAAW,GAC5B;AACD,WAAK,QAAQ;AAAA,QACZ,KAAK,SAAS;AAAA,QACd,MAAM,aAAa;AAAA,MACpB,CAAC;AAAA,IACF;AAEA,QAAI,OAAO,YAAY,UAAU;AAChC,aAAO,KAAK,gBAAgB,eAAe,EAAE;AAAA,IAC9C,OAAO;AACN,aAAO,KAAK,gBAAgB,eAAe,IAAI,GAAG,IAAI;AAAA,IACvD;AAAA,EACD;AAAA,EAEA,OAAO,yBACN,UACA,QACA,uBACA,8BACC;AACD,UAAM,iBACL,sBAAsB,wBAAwB,QAAQ;AACvD,QAAI,eAAe,QAAQ;AAC1B,YAAM,OAAO,sBAAsB,kBAAkB,QAAQ;AAC7D,aAAO,UAAU;AACjB,aAAO,QAAQ,UAAU;AAAA,QACxB,UAAU,OAAO,oBAAoB,MAAM;AAAA,MAC5C;AAEA,UAAI,KAAK,UAAU;AAClB,eAAO,QAAQ,KAAK,SAAS;AAC7B,cAAM,aACL,KAAK,SAAS,eAAe,KAAK,SAAS;AAC5C,eAAO,UAAU,aACd;AAAA,UACA;AAAA,UACA;AAAA,UACA;AAAA,QACD,IACC,SAAS,qBAAqB,mBAAmB;AAAA,MACrD,OAAO;AACN,eAAO,QAAQ;AAAA,UACd;AAAA,UACA;AAAA,QACD;AAAA,MACD;AACA;AAAA,IACD;AAEA,UAAM,iBACL,sBAAsB,wBAAwB,QAAQ;AAEvD,UAAM,+BAA+B,wBACpC,cACA,YACI;AACJ,YAAM,UAAU,aAAa;AAC7B,aAAO,QAAQ,UACZ,UAAU;AAAA,QACV,UAAU,OAAO,oBAAoB,MAAM;AAAA,MAC5C,IACC,UAAU,YAAY,gBAAgB;AACzC,aAAO,QAAQ,QAAQ;AACvB,aAAO,UAAU;AAAA,IAClB,GAZqC;AAcrC,QAAI,eAAe,QAAQ;AAC1B,aAAO;AAAA,QACN,eAAe,CAAC;AAAA,QAChB;AAAA,MACD;AAAA,IACD;AAEA,UAAM,EAAE,SAAS,IAAI,6BAA6B,WAAW,QAAQ;AAErE,QAAI,UAAU;AACb,aAAO,QAAQ,SAAS;AACxB,aAAO,QAAQ,UAAU,YAAY,gBAAgB;AACrD,aAAO,UAAU,SAAS,eAAe,SAAS,UAAU;AAAA,IAC7D,OAAO;AACN,aAAO,QAAQ,SAAS,UAAU,eAAe;AACjD,aAAO,QAAQ,UAAU,YAAY,gBAAgB;AACrD,aAAO,UAAU;AAAA,IAClB;AAAA,EACD;AAAA,EAEA,aAAa,cACZ,UACA,uBACA,8BACA,gBACuC;AACvC,UAAM,kBACL,6BAA6B,WAAW,QAAQ;AAEjD,QAAI,gBAAgB,UAAU;AAC7B,aAAO,gBAAgB;AAAA,IACxB;AAEA,UAAM,eAAe,eAAe,gBAAgB;AACpD,UAAM,EAAE,SAAS,IAAI,6BAA6B,WAAW,QAAQ;AACrE,WAAO;AAAA,EACR;AACD;AAniBa,0BAAN;AAAA,EAEJ;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,GAXU;",
  "names": ["matchResult", "quickPickItems", "kernel", "extension"]
}
