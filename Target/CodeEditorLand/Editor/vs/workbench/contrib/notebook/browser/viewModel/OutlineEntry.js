import{Codicon as o}from"../../../../../base/common/codicons.js";import{ThemeIcon as s}from"../../../../../base/common/themables.js";import{SymbolKinds as a}from"../../../../../editor/common/languages.js";import{MarkerSeverity as i}from"../../../../../platform/markers/common/markers.js";import{CellKind as l}from"../../common/notebookCommon.js";import{executingStateIcon as d}from"../notebookIcons.js";class M{constructor(r,e,n,t,f,h,c,m){this.index=r;this.level=e;this.cell=n;this.label=t;this.isExecuting=f;this.isPaused=h;this.range=c;this.symbolKind=m}_children=[];_parent;_markerInfo;get icon(){return this.symbolKind?a.toIcon(this.symbolKind):this.isExecuting&&this.isPaused?d:this.isExecuting?s.modify(d,"spin"):this.cell.cellKind===l.Markup?o.markdown:o.code}addChild(r){this._children.push(r),r._parent=this}get parent(){return this._parent}get children(){return this._children}get markerInfo(){return this._markerInfo}get position(){if(this.range)return{startLineNumber:this.range.startLineNumber,startColumn:this.range.startColumn}}updateMarkers(r){if(this.cell.cellKind===l.Code){const e=r.read({resource:this.cell.uri,severities:i.Error|i.Warning});if(e.length===0)this._markerInfo=void 0;else{const n=e.find(t=>t.severity===i.Error)?.severity??i.Warning;this._markerInfo={topSev:n,count:e.length}}}else{let e;for(const n of this.children)n.updateMarkers(r),n.markerInfo&&(e=e?Math.max(n.markerInfo.topSev,e):n.markerInfo.topSev);this._markerInfo=e&&{topSev:e,count:0}}}clearMarkers(){this._markerInfo=void 0;for(const r of this.children)r.clearMarkers()}find(r,e){if(r.id===this.cell.id)return this;e.push(this);for(const n of this.children){const t=n.find(r,e);if(t)return t}e.pop()}asFlatList(r){r.push(this);for(const e of this.children)e.asFlatList(r)}}export{M as OutlineEntry};
