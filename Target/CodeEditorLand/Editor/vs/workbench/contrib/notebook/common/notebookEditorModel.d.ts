import { VSBufferReadableStream } from "vs/base/common/buffer";
import { CancellationToken } from "vs/base/common/cancellation";
import { Event } from "vs/base/common/event";
import { IMarkdownString } from "vs/base/common/htmlContent";
import { Disposable } from "vs/base/common/lifecycle";
import { URI } from "vs/base/common/uri";
import { IConfigurationService } from "vs/platform/configuration/common/configuration";
import { IFileStatWithMetadata, IWriteFileOptions } from "vs/platform/files/common/files";
import { ITelemetryService } from "vs/platform/telemetry/common/telemetry";
import { IRevertOptions, ISaveOptions, IUntypedEditorInput } from "vs/workbench/common/editor";
import { EditorModel } from "vs/workbench/common/editor/editorModel";
import { NotebookTextModel } from "vs/workbench/contrib/notebook/common/model/notebookTextModel";
import { INotebookEditorModel, INotebookLoadOptions, IResolvedNotebookEditorModel } from "vs/workbench/contrib/notebook/common/notebookCommon";
import { INotebookLoggingService } from "vs/workbench/contrib/notebook/common/notebookLoggingService";
import { INotebookSerializer, INotebookService } from "vs/workbench/contrib/notebook/common/notebookService";
import { IFilesConfigurationService } from "vs/workbench/services/filesConfiguration/common/filesConfigurationService";
import { IFileWorkingCopyModelConfiguration, SnapshotContext } from "vs/workbench/services/workingCopy/common/fileWorkingCopy";
import { IFileWorkingCopyManager } from "vs/workbench/services/workingCopy/common/fileWorkingCopyManager";
import { IStoredFileWorkingCopyModel, IStoredFileWorkingCopyModelFactory, IStoredFileWorkingCopySaveEvent } from "vs/workbench/services/workingCopy/common/storedFileWorkingCopy";
import { IUntitledFileWorkingCopyModel, IUntitledFileWorkingCopyModelFactory } from "vs/workbench/services/workingCopy/common/untitledFileWorkingCopy";
export declare class SimpleNotebookEditorModel extends EditorModel implements INotebookEditorModel {
    readonly resource: URI;
    private readonly _hasAssociatedFilePath;
    readonly viewType: string;
    private readonly _workingCopyManager;
    private readonly _filesConfigurationService;
    private readonly _onDidChangeDirty;
    private readonly _onDidSave;
    private readonly _onDidChangeOrphaned;
    private readonly _onDidChangeReadonly;
    private readonly _onDidRevertUntitled;
    readonly onDidChangeDirty: Event<void>;
    readonly onDidSave: Event<IStoredFileWorkingCopySaveEvent>;
    readonly onDidChangeOrphaned: Event<void>;
    readonly onDidChangeReadonly: Event<void>;
    readonly onDidRevertUntitled: Event<void>;
    private _workingCopy?;
    private readonly _workingCopyListeners;
    private readonly scratchPad;
    constructor(resource: URI, _hasAssociatedFilePath: boolean, viewType: string, _workingCopyManager: IFileWorkingCopyManager<NotebookFileWorkingCopyModel, NotebookFileWorkingCopyModel>, scratchpad: boolean, _filesConfigurationService: IFilesConfigurationService);
    dispose(): void;
    get notebook(): NotebookTextModel | undefined;
    isResolved(): this is IResolvedNotebookEditorModel;
    canDispose(): Promise<boolean>;
    isDirty(): boolean;
    isModified(): boolean;
    isOrphaned(): boolean;
    hasAssociatedFilePath(): boolean;
    isReadonly(): boolean | IMarkdownString;
    get hasErrorState(): boolean;
    revert(options?: IRevertOptions): Promise<void>;
    save(options?: ISaveOptions): Promise<boolean>;
    load(options?: INotebookLoadOptions): Promise<IResolvedNotebookEditorModel>;
    saveAs(target: URI): Promise<IUntypedEditorInput | undefined>;
    private static _isStoredFileWorkingCopy;
}
export declare class NotebookFileWorkingCopyModel extends Disposable implements IStoredFileWorkingCopyModel, IUntitledFileWorkingCopyModel {
    private readonly _notebookModel;
    private readonly _notebookService;
    private readonly _configurationService;
    private readonly _telemetryService;
    private readonly _notebookLogService;
    private readonly _onDidChangeContent;
    readonly onDidChangeContent: any;
    readonly onWillDispose: Event<void>;
    readonly configuration: IFileWorkingCopyModelConfiguration | undefined;
    save: ((options: IWriteFileOptions, token: CancellationToken) => Promise<IFileStatWithMetadata>) | undefined;
    constructor(_notebookModel: NotebookTextModel, _notebookService: INotebookService, _configurationService: IConfigurationService, _telemetryService: ITelemetryService, _notebookLogService: INotebookLoggingService);
    private setSaveDelegate;
    dispose(): void;
    get notebookModel(): NotebookTextModel;
    snapshot(context: SnapshotContext, token: CancellationToken): Promise<VSBufferReadableStream>;
    update(stream: VSBufferReadableStream, token: CancellationToken): Promise<void>;
    getNotebookSerializer(): Promise<INotebookSerializer>;
    get versionId(): any;
    pushStackElement(): void;
}
export declare class NotebookFileWorkingCopyModelFactory implements IStoredFileWorkingCopyModelFactory<NotebookFileWorkingCopyModel>, IUntitledFileWorkingCopyModelFactory<NotebookFileWorkingCopyModel> {
    private readonly _viewType;
    private readonly _notebookService;
    private readonly _configurationService;
    private readonly _telemetryService;
    private readonly _notebookLogService;
    constructor(_viewType: string, _notebookService: INotebookService, _configurationService: IConfigurationService, _telemetryService: ITelemetryService, _notebookLogService: INotebookLoggingService);
    createModel(resource: URI, stream: VSBufferReadableStream, token: CancellationToken): Promise<NotebookFileWorkingCopyModel>;
}
