{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/notebook/common/notebookDiffEditorInput.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IResourceDiffEditorInput, IResourceSideBySideEditorInput, isResourceDiffEditorInput, IUntypedEditorInput } from '../../../common/editor.js';\nimport { EditorInput } from '../../../common/editor/editorInput.js';\nimport { EditorModel } from '../../../common/editor/editorModel.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotebookDiffEditorModel, IResolvedNotebookEditorModel } from './notebookCommon.js';\nimport { DiffEditorInput } from '../../../common/editor/diffEditorInput.js';\nimport { NotebookEditorInput } from './notebookEditorInput.js';\nimport { IEditorService } from '../../../services/editor/common/editorService.js';\n\nclass NotebookDiffEditorModel extends EditorModel implements INotebookDiffEditorModel {\n\tconstructor(\n\t\treadonly original: IResolvedNotebookEditorModel,\n\t\treadonly modified: IResolvedNotebookEditorModel,\n\t) {\n\t\tsuper();\n\t}\n}\n\nexport class NotebookDiffEditorInput extends DiffEditorInput {\n\tstatic create(instantiationService: IInstantiationService, resource: URI, name: string | undefined, description: string | undefined, originalResource: URI, viewType: string) {\n\t\tconst original = NotebookEditorInput.getOrCreate(instantiationService, originalResource, undefined, viewType);\n\t\tconst modified = NotebookEditorInput.getOrCreate(instantiationService, resource, undefined, viewType);\n\t\treturn instantiationService.createInstance(NotebookDiffEditorInput, name, description, original, modified, viewType);\n\t}\n\n\tstatic override readonly ID: string = 'workbench.input.diffNotebookInput';\n\n\tprivate _modifiedTextModel: IResolvedNotebookEditorModel | null = null;\n\tprivate _originalTextModel: IResolvedNotebookEditorModel | null = null;\n\n\toverride get resource() {\n\t\treturn this.modified.resource;\n\t}\n\n\toverride get editorId() {\n\t\treturn this.viewType;\n\t}\n\n\tprivate _cachedModel: NotebookDiffEditorModel | undefined = undefined;\n\n\tconstructor(\n\t\tname: string | undefined,\n\t\tdescription: string | undefined,\n\t\toverride readonly original: NotebookEditorInput,\n\t\toverride readonly modified: NotebookEditorInput,\n\t\tpublic readonly viewType: string,\n\t\t@IEditorService editorService: IEditorService\n\t) {\n\t\tsuper(\n\t\t\tname,\n\t\t\tdescription,\n\t\t\toriginal,\n\t\t\tmodified,\n\t\t\tundefined,\n\t\t\teditorService\n\t\t);\n\t}\n\n\toverride get typeId(): string {\n\t\treturn NotebookDiffEditorInput.ID;\n\t}\n\n\toverride async resolve(): Promise<NotebookDiffEditorModel> {\n\t\tconst [originalEditorModel, modifiedEditorModel] = await Promise.all([\n\t\t\tthis.original.resolve(),\n\t\t\tthis.modified.resolve(),\n\t\t]);\n\n\t\tthis._cachedModel?.dispose();\n\n\t\t// TODO@rebornix check how we restore the editor in text diff editor\n\t\tif (!modifiedEditorModel) {\n\t\t\tthrow new Error(`Fail to resolve modified editor model for resource ${this.modified.resource} with notebookType ${this.viewType}`);\n\t\t}\n\n\t\tif (!originalEditorModel) {\n\t\t\tthrow new Error(`Fail to resolve original editor model for resource ${this.original.resource} with notebookType ${this.viewType}`);\n\t\t}\n\n\t\tthis._originalTextModel = originalEditorModel;\n\t\tthis._modifiedTextModel = modifiedEditorModel;\n\t\tthis._cachedModel = new NotebookDiffEditorModel(this._originalTextModel, this._modifiedTextModel);\n\t\treturn this._cachedModel;\n\t}\n\n\toverride toUntyped(): IResourceDiffEditorInput & IResourceSideBySideEditorInput {\n\t\tconst original = { resource: this.original.resource };\n\t\tconst modified = { resource: this.resource };\n\t\treturn {\n\t\t\toriginal,\n\t\t\tmodified,\n\t\t\tprimary: modified,\n\t\t\tsecondary: original,\n\t\t\toptions: {\n\t\t\t\toverride: this.viewType\n\t\t\t}\n\t\t};\n\t}\n\n\toverride matches(otherInput: EditorInput | IUntypedEditorInput): boolean {\n\t\tif (this === otherInput) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (otherInput instanceof NotebookDiffEditorInput) {\n\t\t\treturn this.modified.matches(otherInput.modified)\n\t\t\t\t&& this.original.matches(otherInput.original)\n\t\t\t\t&& this.viewType === otherInput.viewType;\n\t\t}\n\n\t\tif (isResourceDiffEditorInput(otherInput)) {\n\t\t\treturn this.modified.matches(otherInput.modified)\n\t\t\t\t&& this.original.matches(otherInput.original)\n\t\t\t\t&& this.editorId !== undefined\n\t\t\t\t&& (this.editorId === otherInput.options?.override || otherInput.options?.override === undefined);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\t\tthis._cachedModel?.dispose();\n\t\tthis._cachedModel = undefined;\n\t\tthis.original.dispose();\n\t\tthis.modified.dispose();\n\t\tthis._originalTextModel = null;\n\t\tthis._modifiedTextModel = null;\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
