{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/notebook/common/notebookProvider.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as glob from '../../../../base/common/glob.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { basename } from '../../../../base/common/path.js';\nimport { INotebookExclusiveDocumentFilter, isDocumentExcludePattern, TransientOptions } from './notebookCommon.js';\nimport { RegisteredEditorPriority } from '../../../services/editor/common/editorResolverService.js';\nimport { ExtensionIdentifier } from '../../../../platform/extensions/common/extensions.js';\n\ntype NotebookSelector = string | glob.IRelativePattern | INotebookExclusiveDocumentFilter;\n\nexport interface NotebookEditorDescriptor {\n\treadonly extension?: ExtensionIdentifier;\n\treadonly id: string;\n\treadonly displayName: string;\n\treadonly selectors: readonly { filenamePattern?: string; excludeFileNamePattern?: string }[];\n\treadonly priority: RegisteredEditorPriority;\n\treadonly providerDisplayName: string;\n}\n\nexport class NotebookProviderInfo {\n\n\treadonly extension?: ExtensionIdentifier;\n\treadonly id: string;\n\treadonly displayName: string;\n\treadonly priority: RegisteredEditorPriority;\n\treadonly providerDisplayName: string;\n\n\tprivate _selectors: NotebookSelector[];\n\tget selectors() {\n\t\treturn this._selectors;\n\t}\n\tprivate _options: TransientOptions;\n\tget options() {\n\t\treturn this._options;\n\t}\n\n\tconstructor(descriptor: NotebookEditorDescriptor) {\n\t\tthis.extension = descriptor.extension;\n\t\tthis.id = descriptor.id;\n\t\tthis.displayName = descriptor.displayName;\n\t\tthis._selectors = descriptor.selectors?.map(selector => ({\n\t\t\tinclude: selector.filenamePattern,\n\t\t\texclude: selector.excludeFileNamePattern || ''\n\t\t})) || [];\n\t\tthis.priority = descriptor.priority;\n\t\tthis.providerDisplayName = descriptor.providerDisplayName;\n\t\tthis._options = {\n\t\t\ttransientCellMetadata: {},\n\t\t\ttransientDocumentMetadata: {},\n\t\t\ttransientOutputs: false,\n\t\t\tcellContentMetadata: {}\n\t\t};\n\t}\n\n\tupdate(args: { selectors?: NotebookSelector[]; options?: TransientOptions }) {\n\t\tif (args.selectors) {\n\t\t\tthis._selectors = args.selectors;\n\t\t}\n\n\t\tif (args.options) {\n\t\t\tthis._options = args.options;\n\t\t}\n\t}\n\n\tmatches(resource: URI): boolean {\n\t\treturn this.selectors?.some(selector => NotebookProviderInfo.selectorMatches(selector, resource));\n\t}\n\n\tstatic selectorMatches(selector: NotebookSelector, resource: URI): boolean {\n\t\tif (typeof selector === 'string') {\n\t\t\t// filenamePattern\n\t\t\tif (glob.match(selector.toLowerCase(), basename(resource.fsPath).toLowerCase())) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tif (glob.isRelativePattern(selector)) {\n\t\t\tif (glob.match(selector, basename(resource.fsPath).toLowerCase())) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tif (!isDocumentExcludePattern(selector)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst filenamePattern = selector.include;\n\t\tconst excludeFilenamePattern = selector.exclude;\n\n\t\tif (glob.match(filenamePattern, basename(resource.fsPath).toLowerCase())) {\n\t\t\tif (excludeFilenamePattern) {\n\t\t\t\tif (glob.match(excludeFilenamePattern, basename(resource.fsPath).toLowerCase())) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tstatic possibleFileEnding(selectors: NotebookSelector[]): string | undefined {\n\t\tfor (const selector of selectors) {\n\t\t\tconst ending = NotebookProviderInfo._possibleFileEnding(selector);\n\t\t\tif (ending) {\n\t\t\t\treturn ending;\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprivate static _possibleFileEnding(selector: NotebookSelector): string | undefined {\n\n\t\tconst pattern = /^.*(\\.[a-zA-Z0-9_-]+)$/;\n\n\t\tlet candidate: string | undefined;\n\n\t\tif (typeof selector === 'string') {\n\t\t\tcandidate = selector;\n\t\t} else if (glob.isRelativePattern(selector)) {\n\t\t\tcandidate = selector.pattern;\n\t\t} else if (selector.include) {\n\t\t\treturn NotebookProviderInfo._possibleFileEnding(selector.include);\n\t\t}\n\n\t\tif (candidate) {\n\t\t\tconst match = pattern.exec(candidate);\n\t\t\tif (match) {\n\t\t\t\treturn match[1];\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
