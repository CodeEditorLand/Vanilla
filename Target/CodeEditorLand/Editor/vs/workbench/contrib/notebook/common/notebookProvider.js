import*as n from"../../../../../vs/base/common/glob.js";import{basename as r}from"../../../../../vs/base/common/path.js";import"../../../../../vs/base/common/uri.js";import"../../../../../vs/platform/extensions/common/extensions.js";import{isDocumentExcludePattern as a}from"../../../../../vs/workbench/contrib/notebook/common/notebookCommon.js";import"../../../../../vs/workbench/services/editor/common/editorResolverService.js";class s{extension;id;displayName;priority;providerDisplayName;_selectors;get selectors(){return this._selectors}_options;get options(){return this._options}constructor(e){this.extension=e.extension,this.id=e.id,this.displayName=e.displayName,this._selectors=e.selectors?.map(t=>({include:t.filenamePattern,exclude:t.excludeFileNamePattern||""}))||[],this.priority=e.priority,this.providerDisplayName=e.providerDisplayName,this._options={transientCellMetadata:{},transientDocumentMetadata:{},transientOutputs:!1,cellContentMetadata:{}}}update(e){e.selectors&&(this._selectors=e.selectors),e.options&&(this._options=e.options)}matches(e){return this.selectors?.some(t=>s.selectorMatches(t,e))}static selectorMatches(e,t){if(typeof e=="string"&&n.match(e.toLowerCase(),r(t.fsPath).toLowerCase())||n.isRelativePattern(e)&&n.match(e,r(t.fsPath).toLowerCase()))return!0;if(!a(e))return!1;const i=e.include,o=e.exclude;return n.match(i,r(t.fsPath).toLowerCase())?!(o&&n.match(o,r(t.fsPath).toLowerCase())):!1}static possibleFileEnding(e){for(const t of e){const i=s._possibleFileEnding(t);if(i)return i}}static _possibleFileEnding(e){const t=/^.*(\.[a-zA-Z0-9_-]+)$/;let i;if(typeof e=="string")i=e;else if(n.isRelativePattern(e))i=e.pattern;else if(e.include)return s._possibleFileEnding(e.include);if(i){const o=t.exec(i);if(o)return o[1]}}}export{s as NotebookProviderInfo};
