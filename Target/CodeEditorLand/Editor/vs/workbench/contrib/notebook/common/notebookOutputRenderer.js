import*as a from"../../../../base/common/glob.js";import{Iterable as s}from"../../../../base/common/iterator.js";import{joinPath as i}from"../../../../base/common/resources.js";import{NotebookRendererMatch as t,RendererMessagingSpec as d}from"./notebookCommon.js";class r{value;defined;constructor(e){this.value=new Set(e),this.defined=this.value.size>0}matches(e){return e.some(n=>this.value.has(n))}}class I{id;entrypoint;displayName;extensionLocation;extensionId;hardDependencies;optionalDependencies;messaging;mimeTypes;mimeTypeGlobs;isBuiltin;constructor(e){this.id=e.id,this.extensionId=e.extension.identifier,this.extensionLocation=e.extension.extensionLocation,this.isBuiltin=e.extension.isBuiltin,typeof e.entrypoint=="string"?this.entrypoint={extends:void 0,path:i(this.extensionLocation,e.entrypoint)}:this.entrypoint={extends:e.entrypoint.extends,path:i(this.extensionLocation,e.entrypoint.path)},this.displayName=e.displayName,this.mimeTypes=e.mimeTypes,this.mimeTypeGlobs=this.mimeTypes.map(n=>a.parse(n)),this.hardDependencies=new r(e.dependencies??s.empty()),this.optionalDependencies=new r(e.optionalDependencies??s.empty()),this.messaging=e.requiresMessaging??d.Never}matchesWithoutKernel(e){return this.matchesMimeTypeOnly(e)?this.hardDependencies.defined?t.WithHardKernelDependency:this.optionalDependencies.defined?t.WithOptionalKernelDependency:t.Pure:t.Never}matches(e,n){return this.matchesMimeTypeOnly(e)?this.hardDependencies.defined?this.hardDependencies.matches(n)?t.WithHardKernelDependency:t.Never:this.optionalDependencies.matches(n)?t.WithOptionalKernelDependency:t.Pure:t.Never}matchesMimeTypeOnly(e){return this.entrypoint.extends?!1:this.mimeTypeGlobs.some(n=>n(e))||this.mimeTypes.some(n=>n===e)}}class D{type;entrypoint;extensionLocation;localResourceRoots;constructor(e){this.type=e.type,this.entrypoint=i(e.extension.extensionLocation,e.entrypoint),this.extensionLocation=e.extension.extensionLocation,this.localResourceRoots=e.localResourceRoots.map(n=>i(e.extension.extensionLocation,n))}}export{I as NotebookOutputRendererInfo,D as NotebookStaticPreloadInfo};
