{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/notebook/test/browser/cellDnd.test.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { performCellDropEdits } from '../../browser/view/cellParts/cellDnd.js';\nimport { CellKind } from '../../common/notebookCommon.js';\nimport { withTestNotebook } from './testNotebookEditor.js';\nimport assert from 'assert';\nimport { ICellRange } from '../../common/notebookRange.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\n\ninterface IBeginningState {\n\tstartOrder: string[];\n\tselections: ICellRange[];\n\tfocus: number;\n}\n\ninterface IDragAction {\n\tdragIdx: number;\n\tdragOverIdx: number;\n\tdirection: 'above' | 'below';\n}\n\ninterface IEndState {\n\tendOrder: string[];\n\tselection: ICellRange;\n\tfocus: number;\n}\n\nasync function testCellDnd(beginning: IBeginningState, dragAction: IDragAction, end: IEndState) {\n\tawait withTestNotebook(\n\t\tbeginning.startOrder.map(text => [text, 'plaintext', CellKind.Code, []]),\n\t\t(editor, viewModel) => {\n\t\t\teditor.setSelections(beginning.selections);\n\t\t\teditor.setFocus({ start: beginning.focus, end: beginning.focus + 1 });\n\t\t\tperformCellDropEdits(editor, viewModel.cellAt(dragAction.dragIdx)!, dragAction.direction, viewModel.cellAt(dragAction.dragOverIdx)!);\n\n\t\t\tfor (const i in end.endOrder) {\n\t\t\t\tassert.equal(viewModel.viewCells[i].getText(), end.endOrder[i]);\n\t\t\t}\n\n\t\t\tassert.equal(editor.getSelections().length, 1);\n\t\t\tassert.deepStrictEqual(editor.getSelections()[0], end.selection);\n\t\t\tassert.deepStrictEqual(editor.getFocus(), { start: end.focus, end: end.focus + 1 });\n\t\t});\n}\n\nsuite('cellDND', () => {\n\tensureNoDisposablesAreLeakedInTestSuite();\n\n\ttest('drag 1 cell', async () => {\n\t\tawait testCellDnd(\n\t\t\t{\n\t\t\t\tstartOrder: ['0', '1', '2', '3'],\n\t\t\t\tselections: [{ start: 0, end: 1 }],\n\t\t\t\tfocus: 0\n\t\t\t},\n\t\t\t{\n\t\t\t\tdragIdx: 0,\n\t\t\t\tdragOverIdx: 1,\n\t\t\t\tdirection: 'below'\n\t\t\t},\n\t\t\t{\n\t\t\t\tendOrder: ['1', '0', '2', '3'],\n\t\t\t\tselection: { start: 1, end: 2 },\n\t\t\t\tfocus: 1\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('drag multiple contiguous cells down', async () => {\n\t\tawait testCellDnd(\n\t\t\t{\n\t\t\t\tstartOrder: ['0', '1', '2', '3'],\n\t\t\t\tselections: [{ start: 1, end: 3 }],\n\t\t\t\tfocus: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\tdragIdx: 1,\n\t\t\t\tdragOverIdx: 3,\n\t\t\t\tdirection: 'below'\n\t\t\t},\n\t\t\t{\n\t\t\t\tendOrder: ['0', '3', '1', '2'],\n\t\t\t\tselection: { start: 2, end: 4 },\n\t\t\t\tfocus: 2\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('drag multiple contiguous cells up', async () => {\n\t\tawait testCellDnd(\n\t\t\t{\n\t\t\t\tstartOrder: ['0', '1', '2', '3'],\n\t\t\t\tselections: [{ start: 2, end: 4 }],\n\t\t\t\tfocus: 2\n\t\t\t},\n\t\t\t{\n\t\t\t\tdragIdx: 3,\n\t\t\t\tdragOverIdx: 0,\n\t\t\t\tdirection: 'above'\n\t\t\t},\n\t\t\t{\n\t\t\t\tendOrder: ['2', '3', '0', '1'],\n\t\t\t\tselection: { start: 0, end: 2 },\n\t\t\t\tfocus: 0\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('drag ranges down', async () => {\n\t\tawait testCellDnd(\n\t\t\t{\n\t\t\t\tstartOrder: ['0', '1', '2', '3'],\n\t\t\t\tselections: [{ start: 0, end: 1 }, { start: 2, end: 3 }],\n\t\t\t\tfocus: 0\n\t\t\t},\n\t\t\t{\n\t\t\t\tdragIdx: 0,\n\t\t\t\tdragOverIdx: 3,\n\t\t\t\tdirection: 'below'\n\t\t\t},\n\t\t\t{\n\t\t\t\tendOrder: ['1', '3', '0', '2'],\n\t\t\t\tselection: { start: 2, end: 4 },\n\t\t\t\tfocus: 2\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('drag ranges up', async () => {\n\t\tawait testCellDnd(\n\t\t\t{\n\t\t\t\tstartOrder: ['0', '1', '2', '3'],\n\t\t\t\tselections: [{ start: 1, end: 2 }, { start: 3, end: 4 }],\n\t\t\t\tfocus: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\tdragIdx: 1,\n\t\t\t\tdragOverIdx: 0,\n\t\t\t\tdirection: 'above'\n\t\t\t},\n\t\t\t{\n\t\t\t\tendOrder: ['1', '3', '0', '2'],\n\t\t\t\tselection: { start: 0, end: 2 },\n\t\t\t\tfocus: 0\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('drag ranges between ranges', async () => {\n\t\tawait testCellDnd(\n\t\t\t{\n\t\t\t\tstartOrder: ['0', '1', '2', '3'],\n\t\t\t\tselections: [{ start: 0, end: 1 }, { start: 3, end: 4 }],\n\t\t\t\tfocus: 0\n\t\t\t},\n\t\t\t{\n\t\t\t\tdragIdx: 0,\n\t\t\t\tdragOverIdx: 1,\n\t\t\t\tdirection: 'below'\n\t\t\t},\n\t\t\t{\n\t\t\t\tendOrder: ['1', '0', '3', '2'],\n\t\t\t\tselection: { start: 1, end: 3 },\n\t\t\t\tfocus: 1\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('drag ranges just above a range', async () => {\n\t\tawait testCellDnd(\n\t\t\t{\n\t\t\t\tstartOrder: ['0', '1', '2', '3'],\n\t\t\t\tselections: [{ start: 1, end: 2 }, { start: 3, end: 4 }],\n\t\t\t\tfocus: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\tdragIdx: 1,\n\t\t\t\tdragOverIdx: 1,\n\t\t\t\tdirection: 'above'\n\t\t\t},\n\t\t\t{\n\t\t\t\tendOrder: ['0', '1', '3', '2'],\n\t\t\t\tselection: { start: 1, end: 3 },\n\t\t\t\tfocus: 1\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('drag ranges inside a range', async () => {\n\t\tawait testCellDnd(\n\t\t\t{\n\t\t\t\tstartOrder: ['0', '1', '2', '3'],\n\t\t\t\tselections: [{ start: 0, end: 2 }, { start: 3, end: 4 }],\n\t\t\t\tfocus: 0\n\t\t\t},\n\t\t\t{\n\t\t\t\tdragIdx: 0,\n\t\t\t\tdragOverIdx: 0,\n\t\t\t\tdirection: 'below'\n\t\t\t},\n\t\t\t{\n\t\t\t\tendOrder: ['0', '1', '3', '2'],\n\t\t\t\tselection: { start: 0, end: 3 },\n\t\t\t\tfocus: 0\n\t\t\t}\n\t\t);\n\t});\n\n\ttest('dragged cell is not focused or selected', async () => {\n\t\tawait testCellDnd(\n\t\t\t{\n\t\t\t\tstartOrder: ['0', '1', '2', '3'],\n\t\t\t\tselections: [{ start: 1, end: 2 }],\n\t\t\t\tfocus: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\tdragIdx: 2,\n\t\t\t\tdragOverIdx: 3,\n\t\t\t\tdirection: 'below'\n\t\t\t},\n\t\t\t{\n\t\t\t\tendOrder: ['0', '1', '3', '2'],\n\t\t\t\tselection: { start: 3, end: 4 },\n\t\t\t\tfocus: 3\n\t\t\t}\n\t\t);\n\t});\n});\n"],
  "mappings": "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",
  "names": []
}
