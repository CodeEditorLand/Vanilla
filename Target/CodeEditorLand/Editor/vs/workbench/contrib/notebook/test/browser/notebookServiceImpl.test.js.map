{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/notebook/test/browser/notebookServiceImpl.test.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { Event } from '../../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { mock } from '../../../../../base/test/common/mock.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { IAccessibilityService } from '../../../../../platform/accessibility/common/accessibility.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { IStorageService } from '../../../../../platform/storage/common/storage.js';\nimport { IUriIdentityService } from '../../../../../platform/uriIdentity/common/uriIdentity.js';\nimport { NotebookProviderInfoStore } from '../../browser/services/notebookServiceImpl.js';\nimport { INotebookEditorModelResolverService } from '../../common/notebookEditorModelResolverService.js';\nimport { NotebookProviderInfo } from '../../common/notebookProvider.js';\nimport { EditorResolverService } from '../../../../services/editor/browser/editorResolverService.js';\nimport { RegisteredEditorPriority } from '../../../../services/editor/common/editorResolverService.js';\nimport { IExtensionService, nullExtensionDescription } from '../../../../services/extensions/common/extensions.js';\nimport { workbenchInstantiationService } from '../../../../test/browser/workbenchTestServices.js';\n\nsuite('NotebookProviderInfoStore', function () {\n\tconst disposables = ensureNoDisposablesAreLeakedInTestSuite() as Pick<DisposableStore, 'add'>;\n\n\ttest('Can\\'t open untitled notebooks in test #119363', function () {\n\t\tconst instantiationService = workbenchInstantiationService(undefined, disposables);\n\t\tconst store = new NotebookProviderInfoStore(\n\t\t\tnew class extends mock<IStorageService>() {\n\t\t\t\toverride get() { return ''; }\n\t\t\t\toverride store() { }\n\t\t\t\toverride getObject() { return {}; }\n\t\t\t},\n\t\t\tnew class extends mock<IExtensionService>() {\n\t\t\t\toverride onDidRegisterExtensions = Event.None;\n\t\t\t},\n\t\t\tdisposables.add(instantiationService.createInstance(EditorResolverService)),\n\t\t\tnew TestConfigurationService(),\n\t\t\tnew class extends mock<IAccessibilityService>() {\n\t\t\t\toverride onDidChangeScreenReaderOptimized: Event<void> = Event.None;\n\t\t\t},\n\t\t\tinstantiationService,\n\t\t\tnew class extends mock<IFileService>() {\n\t\t\t\toverride hasProvider() { return true; }\n\t\t\t},\n\t\t\tnew class extends mock<INotebookEditorModelResolverService>() { },\n\t\t\tnew class extends mock<IUriIdentityService>() { }\n\t\t);\n\t\tdisposables.add(store);\n\n\t\tconst fooInfo = new NotebookProviderInfo({\n\t\t\textension: nullExtensionDescription.identifier,\n\t\t\tid: 'foo',\n\t\t\tdisplayName: 'foo',\n\t\t\tselectors: [{ filenamePattern: '*.foo' }],\n\t\t\tpriority: RegisteredEditorPriority.default,\n\t\t\tproviderDisplayName: 'foo',\n\t\t});\n\t\tconst barInfo = new NotebookProviderInfo({\n\t\t\textension: nullExtensionDescription.identifier,\n\t\t\tid: 'bar',\n\t\t\tdisplayName: 'bar',\n\t\t\tselectors: [{ filenamePattern: '*.bar' }],\n\t\t\tpriority: RegisteredEditorPriority.default,\n\t\t\tproviderDisplayName: 'bar',\n\t\t});\n\n\t\tstore.add(fooInfo);\n\t\tstore.add(barInfo);\n\n\t\tassert.ok(store.get('foo'));\n\t\tassert.ok(store.get('bar'));\n\t\tassert.ok(!store.get('barfoo'));\n\n\t\tlet providers = store.getContributedNotebook(URI.parse('file:///test/nb.foo'));\n\t\tassert.strictEqual(providers.length, 1);\n\t\tassert.strictEqual(providers[0] === fooInfo, true);\n\n\t\tproviders = store.getContributedNotebook(URI.parse('file:///test/nb.bar'));\n\t\tassert.strictEqual(providers.length, 1);\n\t\tassert.strictEqual(providers[0] === barInfo, true);\n\n\t\tproviders = store.getContributedNotebook(URI.parse('untitled:///Untitled-1'));\n\t\tassert.strictEqual(providers.length, 2);\n\t\tassert.strictEqual(providers[0] === fooInfo, true);\n\t\tassert.strictEqual(providers[1] === barInfo, true);\n\n\t\tproviders = store.getContributedNotebook(URI.parse('untitled:///test/nb.bar'));\n\t\tassert.strictEqual(providers.length, 1);\n\t\tassert.strictEqual(providers[0] === barInfo, true);\n\t});\n\n});\n"],
  "mappings": "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",
  "names": []
}
