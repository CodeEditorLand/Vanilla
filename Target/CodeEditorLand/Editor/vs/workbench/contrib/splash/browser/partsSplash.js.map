{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/splash/browser/partsSplash.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { onDidChangeFullscreen, isFullscreen } from '../../../../base/browser/browser.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { DisposableStore, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { editorBackground, foreground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { getThemeTypeSelector, IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { DEFAULT_EDITOR_MIN_DIMENSIONS } from '../../../browser/parts/editor/editor.js';\nimport * as themes from '../../../common/theme.js';\nimport { IWorkbenchLayoutService, Parts, Position } from '../../../services/layout/browser/layoutService.js';\nimport { IWorkbenchEnvironmentService } from '../../../services/environment/common/environmentService.js';\nimport { IEditorGroupsService } from '../../../services/editor/common/editorGroupsService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport * as perf from '../../../../base/common/performance.js';\nimport { assertIsDefined } from '../../../../base/common/types.js';\nimport { ISplashStorageService } from './splash.js';\nimport { mainWindow } from '../../../../base/browser/window.js';\nimport { ILifecycleService, LifecyclePhase } from '../../../services/lifecycle/common/lifecycle.js';\nimport { TitleBarSetting } from '../../../../platform/window/common/window.js';\n\nexport class PartsSplash {\n\n\tstatic readonly ID = 'workbench.contrib.partsSplash';\n\n\tprivate static readonly _splashElementId = 'monaco-parts-splash';\n\n\tprivate readonly _disposables = new DisposableStore();\n\n\tprivate _didChangeTitleBarStyle?: boolean;\n\n\tconstructor(\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t\t@IWorkbenchLayoutService private readonly _layoutService: IWorkbenchLayoutService,\n\t\t@IWorkbenchEnvironmentService private readonly _environmentService: IWorkbenchEnvironmentService,\n\t\t@IConfigurationService private readonly _configService: IConfigurationService,\n\t\t@ISplashStorageService private readonly _partSplashService: ISplashStorageService,\n\t\t@IEditorGroupsService editorGroupsService: IEditorGroupsService,\n\t\t@ILifecycleService lifecycleService: ILifecycleService,\n\t) {\n\t\tEvent.once(_layoutService.onDidLayoutMainContainer)(() => {\n\t\t\tthis._removePartsSplash();\n\t\t\tperf.mark('code/didRemovePartsSplash');\n\t\t}, undefined, this._disposables);\n\n\t\tconst lastIdleSchedule = this._disposables.add(new MutableDisposable());\n\t\tconst savePartsSplashSoon = () => {\n\t\t\tlastIdleSchedule.value = dom.runWhenWindowIdle(mainWindow, () => this._savePartsSplash(), 2500);\n\t\t};\n\t\tlifecycleService.when(LifecyclePhase.Restored).then(() => {\n\t\t\tEvent.any(Event.filter(onDidChangeFullscreen, windowId => windowId === mainWindow.vscodeWindowId), editorGroupsService.mainPart.onDidLayout, _themeService.onDidColorThemeChange)(savePartsSplashSoon, undefined, this._disposables);\n\t\t\tsavePartsSplashSoon();\n\t\t});\n\n\t\t_configService.onDidChangeConfiguration(e => {\n\t\t\tif (e.affectsConfiguration(TitleBarSetting.TITLE_BAR_STYLE)) {\n\t\t\t\tthis._didChangeTitleBarStyle = true;\n\t\t\t\tthis._savePartsSplash();\n\t\t\t}\n\t\t}, this, this._disposables);\n\t}\n\n\tdispose(): void {\n\t\tthis._disposables.dispose();\n\t}\n\n\tprivate _savePartsSplash() {\n\t\tconst theme = this._themeService.getColorTheme();\n\n\t\tthis._partSplashService.saveWindowSplash({\n\t\t\tzoomLevel: this._configService.getValue<undefined>('window.zoomLevel'),\n\t\t\tbaseTheme: getThemeTypeSelector(theme.type),\n\t\t\tcolorInfo: {\n\t\t\t\tforeground: theme.getColor(foreground)?.toString(),\n\t\t\t\tbackground: Color.Format.CSS.formatHex(theme.getColor(editorBackground) || themes.WORKBENCH_BACKGROUND(theme)),\n\t\t\t\teditorBackground: theme.getColor(editorBackground)?.toString(),\n\t\t\t\ttitleBarBackground: theme.getColor(themes.TITLE_BAR_ACTIVE_BACKGROUND)?.toString(),\n\t\t\t\ttitleBarBorder: theme.getColor(themes.TITLE_BAR_BORDER)?.toString(),\n\t\t\t\tactivityBarBackground: theme.getColor(themes.ACTIVITY_BAR_BACKGROUND)?.toString(),\n\t\t\t\tactivityBarBorder: theme.getColor(themes.ACTIVITY_BAR_BORDER)?.toString(),\n\t\t\t\tsideBarBackground: theme.getColor(themes.SIDE_BAR_BACKGROUND)?.toString(),\n\t\t\t\tsideBarBorder: theme.getColor(themes.SIDE_BAR_BORDER)?.toString(),\n\t\t\t\tstatusBarBackground: theme.getColor(themes.STATUS_BAR_BACKGROUND)?.toString(),\n\t\t\t\tstatusBarBorder: theme.getColor(themes.STATUS_BAR_BORDER)?.toString(),\n\t\t\t\tstatusBarNoFolderBackground: theme.getColor(themes.STATUS_BAR_NO_FOLDER_BACKGROUND)?.toString(),\n\t\t\t\twindowBorder: theme.getColor(themes.WINDOW_ACTIVE_BORDER)?.toString() ?? theme.getColor(themes.WINDOW_INACTIVE_BORDER)?.toString()\n\t\t\t},\n\t\t\tlayoutInfo: !this._shouldSaveLayoutInfo() ? undefined : {\n\t\t\t\tsideBarSide: this._layoutService.getSideBarPosition() === Position.RIGHT ? 'right' : 'left',\n\t\t\t\teditorPartMinWidth: DEFAULT_EDITOR_MIN_DIMENSIONS.width,\n\t\t\t\ttitleBarHeight: this._layoutService.isVisible(Parts.TITLEBAR_PART, mainWindow) ? dom.getTotalHeight(assertIsDefined(this._layoutService.getContainer(mainWindow, Parts.TITLEBAR_PART))) : 0,\n\t\t\t\tactivityBarWidth: this._layoutService.isVisible(Parts.ACTIVITYBAR_PART) ? dom.getTotalWidth(assertIsDefined(this._layoutService.getContainer(mainWindow, Parts.ACTIVITYBAR_PART))) : 0,\n\t\t\t\tsideBarWidth: this._layoutService.isVisible(Parts.SIDEBAR_PART) ? dom.getTotalWidth(assertIsDefined(this._layoutService.getContainer(mainWindow, Parts.SIDEBAR_PART))) : 0,\n\t\t\t\tstatusBarHeight: this._layoutService.isVisible(Parts.STATUSBAR_PART, mainWindow) ? dom.getTotalHeight(assertIsDefined(this._layoutService.getContainer(mainWindow, Parts.STATUSBAR_PART))) : 0,\n\t\t\t\twindowBorder: this._layoutService.hasMainWindowBorder(),\n\t\t\t\twindowBorderRadius: this._layoutService.getMainWindowBorderRadius()\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _shouldSaveLayoutInfo(): boolean {\n\t\treturn !isFullscreen(mainWindow) && !this._environmentService.isExtensionDevelopment && !this._didChangeTitleBarStyle;\n\t}\n\n\tprivate _removePartsSplash(): void {\n\t\tconst element = mainWindow.document.getElementById(PartsSplash._splashElementId);\n\t\tif (element) {\n\t\t\telement.style.display = 'none';\n\t\t}\n\n\t\t// remove initial colors\n\t\tconst defaultStyles = mainWindow.document.head.getElementsByClassName('initialShellColors');\n\t\tdefaultStyles[0]?.remove();\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
