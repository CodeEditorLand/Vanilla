{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/splash/browser/partsSplash.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport {\n\tisFullscreen,\n\tonDidChangeFullscreen,\n} from \"../../../../base/browser/browser.js\";\nimport * as dom from \"../../../../base/browser/dom.js\";\nimport { mainWindow } from \"../../../../base/browser/window.js\";\nimport { Color } from \"../../../../base/common/color.js\";\nimport { Event } from \"../../../../base/common/event.js\";\nimport {\n\tDisposableStore,\n\tMutableDisposable,\n} from \"../../../../base/common/lifecycle.js\";\nimport * as perf from \"../../../../base/common/performance.js\";\nimport { assertIsDefined } from \"../../../../base/common/types.js\";\nimport { IConfigurationService } from \"../../../../platform/configuration/common/configuration.js\";\nimport {\n\teditorBackground,\n\tforeground,\n} from \"../../../../platform/theme/common/colorRegistry.js\";\nimport {\n\tIThemeService,\n\tgetThemeTypeSelector,\n} from \"../../../../platform/theme/common/themeService.js\";\nimport { TitleBarSetting } from \"../../../../platform/window/common/window.js\";\nimport { DEFAULT_EDITOR_MIN_DIMENSIONS } from \"../../../browser/parts/editor/editor.js\";\nimport * as themes from \"../../../common/theme.js\";\nimport { IEditorGroupsService } from \"../../../services/editor/common/editorGroupsService.js\";\nimport { IWorkbenchEnvironmentService } from \"../../../services/environment/common/environmentService.js\";\nimport {\n\tIWorkbenchLayoutService,\n\tParts,\n\tPosition,\n} from \"../../../services/layout/browser/layoutService.js\";\nimport {\n\tILifecycleService,\n\tLifecyclePhase,\n} from \"../../../services/lifecycle/common/lifecycle.js\";\nimport { ISplashStorageService } from \"./splash.js\";\n\nexport class PartsSplash {\n\tstatic readonly ID = \"workbench.contrib.partsSplash\";\n\n\tprivate static readonly _splashElementId = \"monaco-parts-splash\";\n\n\tprivate readonly _disposables = new DisposableStore();\n\n\tprivate _didChangeTitleBarStyle?: boolean;\n\n\tconstructor(\n\t\t@IThemeService private readonly _themeService: IThemeService,\n\t\t@IWorkbenchLayoutService\n\t\tprivate readonly _layoutService: IWorkbenchLayoutService,\n\t\t@IWorkbenchEnvironmentService\n\t\tprivate readonly _environmentService: IWorkbenchEnvironmentService,\n\t\t@IConfigurationService\n\t\tprivate readonly _configService: IConfigurationService,\n\t\t@ISplashStorageService\n\t\tprivate readonly _partSplashService: ISplashStorageService,\n\t\t@IEditorGroupsService editorGroupsService: IEditorGroupsService,\n\t\t@ILifecycleService lifecycleService: ILifecycleService,\n\t) {\n\t\tEvent.once(_layoutService.onDidLayoutMainContainer)(\n\t\t\t() => {\n\t\t\t\tthis._removePartsSplash();\n\t\t\t\tperf.mark(\"code/didRemovePartsSplash\");\n\t\t\t},\n\t\t\tundefined,\n\t\t\tthis._disposables,\n\t\t);\n\n\t\tconst lastIdleSchedule = this._disposables.add(new MutableDisposable());\n\t\tconst savePartsSplashSoon = () => {\n\t\t\tlastIdleSchedule.value = dom.runWhenWindowIdle(\n\t\t\t\tmainWindow,\n\t\t\t\t() => this._savePartsSplash(),\n\t\t\t\t2500,\n\t\t\t);\n\t\t};\n\t\tlifecycleService.when(LifecyclePhase.Restored).then(() => {\n\t\t\tEvent.any(\n\t\t\t\tEvent.filter(\n\t\t\t\t\tonDidChangeFullscreen,\n\t\t\t\t\t(windowId) => windowId === mainWindow.vscodeWindowId,\n\t\t\t\t),\n\t\t\t\teditorGroupsService.mainPart.onDidLayout,\n\t\t\t\t_themeService.onDidColorThemeChange,\n\t\t\t)(savePartsSplashSoon, undefined, this._disposables);\n\t\t\tsavePartsSplashSoon();\n\t\t});\n\n\t\t_configService.onDidChangeConfiguration(\n\t\t\t(e) => {\n\t\t\t\tif (e.affectsConfiguration(TitleBarSetting.TITLE_BAR_STYLE)) {\n\t\t\t\t\tthis._didChangeTitleBarStyle = true;\n\t\t\t\t\tthis._savePartsSplash();\n\t\t\t\t}\n\t\t\t},\n\t\t\tthis,\n\t\t\tthis._disposables,\n\t\t);\n\t}\n\n\tdispose(): void {\n\t\tthis._disposables.dispose();\n\t}\n\n\tprivate _savePartsSplash() {\n\t\tconst theme = this._themeService.getColorTheme();\n\n\t\tthis._partSplashService.saveWindowSplash({\n\t\t\tzoomLevel:\n\t\t\t\tthis._configService.getValue<undefined>(\"window.zoomLevel\"),\n\t\t\tbaseTheme: getThemeTypeSelector(theme.type),\n\t\t\tcolorInfo: {\n\t\t\t\tforeground: theme.getColor(foreground)?.toString(),\n\t\t\t\tbackground: Color.Format.CSS.formatHex(\n\t\t\t\t\ttheme.getColor(editorBackground) ||\n\t\t\t\t\t\tthemes.WORKBENCH_BACKGROUND(theme),\n\t\t\t\t),\n\t\t\t\teditorBackground: theme.getColor(editorBackground)?.toString(),\n\t\t\t\ttitleBarBackground: theme\n\t\t\t\t\t.getColor(themes.TITLE_BAR_ACTIVE_BACKGROUND)\n\t\t\t\t\t?.toString(),\n\t\t\t\ttitleBarBorder: theme\n\t\t\t\t\t.getColor(themes.TITLE_BAR_BORDER)\n\t\t\t\t\t?.toString(),\n\t\t\t\tactivityBarBackground: theme\n\t\t\t\t\t.getColor(themes.ACTIVITY_BAR_BACKGROUND)\n\t\t\t\t\t?.toString(),\n\t\t\t\tactivityBarBorder: theme\n\t\t\t\t\t.getColor(themes.ACTIVITY_BAR_BORDER)\n\t\t\t\t\t?.toString(),\n\t\t\t\tsideBarBackground: theme\n\t\t\t\t\t.getColor(themes.SIDE_BAR_BACKGROUND)\n\t\t\t\t\t?.toString(),\n\t\t\t\tsideBarBorder: theme\n\t\t\t\t\t.getColor(themes.SIDE_BAR_BORDER)\n\t\t\t\t\t?.toString(),\n\t\t\t\tstatusBarBackground: theme\n\t\t\t\t\t.getColor(themes.STATUS_BAR_BACKGROUND)\n\t\t\t\t\t?.toString(),\n\t\t\t\tstatusBarBorder: theme\n\t\t\t\t\t.getColor(themes.STATUS_BAR_BORDER)\n\t\t\t\t\t?.toString(),\n\t\t\t\tstatusBarNoFolderBackground: theme\n\t\t\t\t\t.getColor(themes.STATUS_BAR_NO_FOLDER_BACKGROUND)\n\t\t\t\t\t?.toString(),\n\t\t\t\twindowBorder:\n\t\t\t\t\ttheme.getColor(themes.WINDOW_ACTIVE_BORDER)?.toString() ??\n\t\t\t\t\ttheme.getColor(themes.WINDOW_INACTIVE_BORDER)?.toString(),\n\t\t\t},\n\t\t\tlayoutInfo: this._shouldSaveLayoutInfo()\n\t\t\t\t? {\n\t\t\t\t\t\tsideBarSide:\n\t\t\t\t\t\t\tthis._layoutService.getSideBarPosition() ===\n\t\t\t\t\t\t\tPosition.RIGHT\n\t\t\t\t\t\t\t\t? \"right\"\n\t\t\t\t\t\t\t\t: \"left\",\n\t\t\t\t\t\teditorPartMinWidth: DEFAULT_EDITOR_MIN_DIMENSIONS.width,\n\t\t\t\t\t\ttitleBarHeight: this._layoutService.isVisible(\n\t\t\t\t\t\t\tParts.TITLEBAR_PART,\n\t\t\t\t\t\t\tmainWindow,\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t? dom.getTotalHeight(\n\t\t\t\t\t\t\t\t\tassertIsDefined(\n\t\t\t\t\t\t\t\t\t\tthis._layoutService.getContainer(\n\t\t\t\t\t\t\t\t\t\t\tmainWindow,\n\t\t\t\t\t\t\t\t\t\t\tParts.TITLEBAR_PART,\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: 0,\n\t\t\t\t\t\tactivityBarWidth: this._layoutService.isVisible(\n\t\t\t\t\t\t\tParts.ACTIVITYBAR_PART,\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t? dom.getTotalWidth(\n\t\t\t\t\t\t\t\t\tassertIsDefined(\n\t\t\t\t\t\t\t\t\t\tthis._layoutService.getContainer(\n\t\t\t\t\t\t\t\t\t\t\tmainWindow,\n\t\t\t\t\t\t\t\t\t\t\tParts.ACTIVITYBAR_PART,\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: 0,\n\t\t\t\t\t\tsideBarWidth: this._layoutService.isVisible(\n\t\t\t\t\t\t\tParts.SIDEBAR_PART,\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t? dom.getTotalWidth(\n\t\t\t\t\t\t\t\t\tassertIsDefined(\n\t\t\t\t\t\t\t\t\t\tthis._layoutService.getContainer(\n\t\t\t\t\t\t\t\t\t\t\tmainWindow,\n\t\t\t\t\t\t\t\t\t\t\tParts.SIDEBAR_PART,\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: 0,\n\t\t\t\t\t\tstatusBarHeight: this._layoutService.isVisible(\n\t\t\t\t\t\t\tParts.STATUSBAR_PART,\n\t\t\t\t\t\t\tmainWindow,\n\t\t\t\t\t\t)\n\t\t\t\t\t\t\t? dom.getTotalHeight(\n\t\t\t\t\t\t\t\t\tassertIsDefined(\n\t\t\t\t\t\t\t\t\t\tthis._layoutService.getContainer(\n\t\t\t\t\t\t\t\t\t\t\tmainWindow,\n\t\t\t\t\t\t\t\t\t\t\tParts.STATUSBAR_PART,\n\t\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t: 0,\n\t\t\t\t\t\twindowBorder: this._layoutService.hasMainWindowBorder(),\n\t\t\t\t\t\twindowBorderRadius:\n\t\t\t\t\t\t\tthis._layoutService.getMainWindowBorderRadius(),\n\t\t\t\t\t}\n\t\t\t\t: undefined,\n\t\t});\n\t}\n\n\tprivate _shouldSaveLayoutInfo(): boolean {\n\t\treturn (\n\t\t\t!isFullscreen(mainWindow) &&\n\t\t\t!this._environmentService.isExtensionDevelopment &&\n\t\t\t!this._didChangeTitleBarStyle\n\t\t);\n\t}\n\n\tprivate _removePartsSplash(): void {\n\t\tconst element = mainWindow.document.getElementById(\n\t\t\tPartsSplash._splashElementId,\n\t\t);\n\t\tif (element) {\n\t\t\telement.style.display = \"none\";\n\t\t}\n\n\t\t// remove initial colors\n\t\tconst defaultStyles =\n\t\t\tmainWindow.document.head.getElementsByClassName(\n\t\t\t\t\"initialShellColors\",\n\t\t\t);\n\t\tdefaultStyles[0]?.remove();\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
