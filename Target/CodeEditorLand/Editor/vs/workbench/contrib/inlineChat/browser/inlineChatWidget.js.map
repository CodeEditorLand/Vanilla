{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/contrib/inlineChat/browser/inlineChatWidget.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport {\n\ttype Dimension,\n\tgetActiveElement,\n\tgetTotalHeight,\n\th,\n\treset,\n\ttrackFocus,\n} from \"../../../../base/browser/dom.js\";\nimport type { IActionViewItemOptions } from \"../../../../base/browser/ui/actionbar/actionViewItems.js\";\nimport { getDefaultHoverDelegate } from \"../../../../base/browser/ui/hover/hoverDelegateFactory.js\";\nimport { renderLabelWithIcons } from \"../../../../base/browser/ui/iconLabel/iconLabels.js\";\nimport type { IAction } from \"../../../../base/common/actions.js\";\nimport { isNonEmptyArray, tail } from \"../../../../base/common/arrays.js\";\nimport { Emitter, Event } from \"../../../../base/common/event.js\";\nimport {\n\ttype IMarkdownString,\n\tMarkdownString,\n} from \"../../../../base/common/htmlContent.js\";\nimport {\n\tDisposableStore,\n\tMutableDisposable,\n\ttoDisposable,\n} from \"../../../../base/common/lifecycle.js\";\nimport {\n\ttype ISettableObservable,\n\tconstObservable,\n\tderived,\n\tobservableValue,\n} from \"../../../../base/common/observable.js\";\nimport \"./media/inlineChat.css\";\nimport type { ICodeEditor } from \"../../../../editor/browser/editorBrowser.js\";\nimport {\n\tAccessibleDiffViewer,\n\ttype IAccessibleDiffViewerModel,\n} from \"../../../../editor/browser/widget/diffEditor/components/accessibleDiffViewer.js\";\nimport {\n\tEditorOption,\n\ttype IComputedEditorOptions,\n} from \"../../../../editor/common/config/editorOptions.js\";\nimport { LineRange } from \"../../../../editor/common/core/lineRange.js\";\nimport type { Position } from \"../../../../editor/common/core/position.js\";\nimport type { Range } from \"../../../../editor/common/core/range.js\";\nimport { Selection } from \"../../../../editor/common/core/selection.js\";\nimport {\n\tDetailedLineRangeMapping,\n\tRangeMapping,\n} from \"../../../../editor/common/diff/rangeMapping.js\";\nimport {\n\ttype ICodeEditorViewState,\n\tScrollType,\n} from \"../../../../editor/common/editorCommon.js\";\nimport type { ITextModel } from \"../../../../editor/common/model.js\";\nimport {\n\ttype IResolvedTextEditorModel,\n\tITextModelService,\n} from \"../../../../editor/common/services/resolverService.js\";\nimport { localize } from \"../../../../nls.js\";\nimport { IAccessibleViewService } from \"../../../../platform/accessibility/browser/accessibleView.js\";\nimport { IAccessibilityService } from \"../../../../platform/accessibility/common/accessibility.js\";\nimport {\n\ttype IWorkbenchButtonBarOptions,\n\tMenuWorkbenchButtonBar,\n} from \"../../../../platform/actions/browser/buttonbar.js\";\nimport {\n\ttype IMenuEntryActionViewItemOptions,\n\tcreateActionViewItem,\n} from \"../../../../platform/actions/browser/menuEntryActionViewItem.js\";\nimport { MenuWorkbenchToolBar } from \"../../../../platform/actions/browser/toolbar.js\";\nimport {\n\tMenuId,\n\tMenuItemAction,\n} from \"../../../../platform/actions/common/actions.js\";\nimport { IConfigurationService } from \"../../../../platform/configuration/common/configuration.js\";\nimport {\n\ttype IContextKey,\n\tIContextKeyService,\n} from \"../../../../platform/contextkey/common/contextkey.js\";\nimport { IHoverService } from \"../../../../platform/hover/browser/hover.js\";\nimport { IInstantiationService } from \"../../../../platform/instantiation/common/instantiation.js\";\nimport { ServiceCollection } from \"../../../../platform/instantiation/common/serviceCollection.js\";\nimport { IKeybindingService } from \"../../../../platform/keybinding/common/keybinding.js\";\nimport {\n\tasCssVariable,\n\tasCssVariableName,\n\teditorBackground,\n\tinputBackground,\n} from \"../../../../platform/theme/common/colorRegistry.js\";\nimport { EDITOR_DRAG_AND_DROP_BACKGROUND } from \"../../../common/theme.js\";\nimport { AccessibilityVerbositySettingId } from \"../../accessibility/browser/accessibilityConfiguration.js\";\nimport { AccessibilityCommandId } from \"../../accessibility/common/accessibilityCommands.js\";\nimport { MarkUnhelpfulActionId } from \"../../chat/browser/actions/chatTitleActions.js\";\nimport type { IChatWidgetViewOptions } from \"../../chat/browser/chat.js\";\nimport { ChatVoteDownButton } from \"../../chat/browser/chatListRenderer.js\";\nimport {\n\tChatWidget,\n\ttype IChatWidgetLocationOptions,\n} from \"../../chat/browser/chatWidget.js\";\nimport { ChatAgentLocation } from \"../../chat/common/chatAgents.js\";\nimport { chatRequestBackground } from \"../../chat/common/chatColors.js\";\nimport {\n\tCONTEXT_CHAT_RESPONSE_SUPPORT_ISSUE_REPORTING,\n\tCONTEXT_RESPONSE,\n\tCONTEXT_RESPONSE_ERROR,\n\tCONTEXT_RESPONSE_FILTERED,\n\tCONTEXT_RESPONSE_VOTE,\n} from \"../../chat/common/chatContextKeys.js\";\nimport { ChatModel, type IChatModel } from \"../../chat/common/chatModel.js\";\nimport {\n\tChatAgentVoteDirection,\n\tIChatService,\n} from \"../../chat/common/chatService.js\";\nimport { isResponseVM, isWelcomeVM } from \"../../chat/common/chatViewModel.js\";\nimport {\n\tCTX_INLINE_CHAT_FOCUSED,\n\tCTX_INLINE_CHAT_RESPONSE_FOCUSED,\n\tinlineChatBackground,\n\tinlineChatForeground,\n} from \"../common/inlineChat.js\";\nimport type { HunkInformation, Session } from \"./inlineChatSession.js\";\n\nexport interface InlineChatWidgetViewState {\n\teditorViewState: ICodeEditorViewState;\n\tinput: string;\n\tplaceholder: string;\n}\n\nexport interface IInlineChatWidgetConstructionOptions {\n\t/**\n\t * The menu that rendered as button bar, use for accept, discard etc\n\t */\n\tstatusMenuId:\n\t\t| MenuId\n\t\t| { menu: MenuId; options: IWorkbenchButtonBarOptions };\n\n\tsecondaryMenuId?: MenuId;\n\n\t/**\n\t * The options for the chat widget\n\t */\n\tchatWidgetViewOptions?: IChatWidgetViewOptions;\n}\n\nexport interface IInlineChatMessage {\n\tmessage: IMarkdownString;\n\trequestId: string;\n}\n\nexport interface IInlineChatMessageAppender {\n\tappendContent(fragment: string): void;\n\tcancel(): void;\n\tcomplete(): void;\n}\n\nexport class InlineChatWidget {\n\tprotected readonly _elements = h(\"div.inline-chat@root\", [\n\t\th(\"div.chat-widget@chatWidget\"),\n\t\th(\"div.accessibleViewer@accessibleViewer\"),\n\t\th(\"div.status@status\", [\n\t\t\th(\"div.label.info.hidden@infoLabel\"),\n\t\t\th(\"div.actions.hidden@toolbar1\"),\n\t\t\th(\"div.label.status.hidden@statusLabel\"),\n\t\t\th(\"div.actions.secondary.hidden@toolbar2\"),\n\t\t]),\n\t]);\n\n\tprotected readonly _store = new DisposableStore();\n\n\tprivate readonly _defaultChatModel: ChatModel;\n\tprivate readonly _ctxInputEditorFocused: IContextKey<boolean>;\n\tprivate readonly _ctxResponseFocused: IContextKey<boolean>;\n\n\tprivate readonly _chatWidget: ChatWidget;\n\n\tprotected readonly _onDidChangeHeight = this._store.add(\n\t\tnew Emitter<void>(),\n\t);\n\treadonly onDidChangeHeight: Event<void> = Event.filter(\n\t\tthis._onDidChangeHeight.event,\n\t\t(_) => !this._isLayouting,\n\t);\n\n\tprivate readonly _onDidChangeInput = this._store.add(new Emitter<this>());\n\treadonly onDidChangeInput: Event<this> = this._onDidChangeInput.event;\n\n\tprivate _isLayouting = false;\n\n\treadonly scopedContextKeyService: IContextKeyService;\n\n\tconstructor(\n\t\tlocation: IChatWidgetLocationOptions,\n\t\toptions: IInlineChatWidgetConstructionOptions,\n\t\t@IInstantiationService\n\t\tprotected readonly _instantiationService: IInstantiationService,\n\t\t@IContextKeyService\n\t\tprivate readonly _contextKeyService: IContextKeyService,\n\t\t@IKeybindingService\n\t\tprivate readonly _keybindingService: IKeybindingService,\n\t\t@IAccessibilityService\n\t\tprivate readonly _accessibilityService: IAccessibilityService,\n\t\t@IConfigurationService\n\t\tprivate readonly _configurationService: IConfigurationService,\n\t\t@IAccessibleViewService\n\t\tprivate readonly _accessibleViewService: IAccessibleViewService,\n\t\t@ITextModelService\n\t\tprotected readonly _textModelResolverService: ITextModelService,\n\t\t@IChatService private readonly _chatService: IChatService,\n\t\t@IHoverService private readonly _hoverService: IHoverService,\n\t) {\n\t\tthis.scopedContextKeyService = this._store.add(\n\t\t\t_contextKeyService.createScoped(this._elements.chatWidget),\n\t\t);\n\t\tconst scopedInstaService = _instantiationService.createChild(\n\t\t\tnew ServiceCollection([\n\t\t\t\tIContextKeyService,\n\t\t\t\tthis.scopedContextKeyService,\n\t\t\t]),\n\t\t\tthis._store,\n\t\t);\n\n\t\tthis._chatWidget = scopedInstaService.createInstance(\n\t\t\tChatWidget,\n\t\t\tlocation,\n\t\t\tundefined,\n\t\t\t{\n\t\t\t\tdefaultElementHeight: 32,\n\t\t\t\trenderStyle: \"minimal\",\n\t\t\t\trenderInputOnTop: false,\n\t\t\t\trenderFollowups: true,\n\t\t\t\tsupportsFileReferences:\n\t\t\t\t\t_configurationService.getValue(\n\t\t\t\t\t\t`chat.experimental.variables.${location.location}`,\n\t\t\t\t\t) === true,\n\t\t\t\tfilter: (item) => {\n\t\t\t\t\tif (isWelcomeVM(item)) {\n\t\t\t\t\t\t// filter welcome messages\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tif (\n\t\t\t\t\t\tisResponseVM(item) &&\n\t\t\t\t\t\titem.isComplete &&\n\t\t\t\t\t\t!item.errorDetails\n\t\t\t\t\t) {\n\t\t\t\t\t\t// filter responses that\n\t\t\t\t\t\t// - are just text edits(prevents the \"Made Edits\")\n\t\t\t\t\t\t// - are all empty\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\titem.response.value.length > 0 &&\n\t\t\t\t\t\t\titem.response.value.every(\n\t\t\t\t\t\t\t\t(item) =>\n\t\t\t\t\t\t\t\t\titem.kind === \"textEditGroup\" &&\n\t\t\t\t\t\t\t\t\toptions.chatWidgetViewOptions?.rendererOptions?.renderTextEditsAsSummary?.(\n\t\t\t\t\t\t\t\t\t\titem.uri,\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (item.response.value.length === 0) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\treturn true;\n\t\t\t\t},\n\t\t\t\t...options.chatWidgetViewOptions,\n\t\t\t},\n\t\t\t{\n\t\t\t\tlistForeground: inlineChatForeground,\n\t\t\t\tlistBackground: inlineChatBackground,\n\t\t\t\toverlayBackground: EDITOR_DRAG_AND_DROP_BACKGROUND,\n\t\t\t\tinputEditorBackground: inputBackground,\n\t\t\t\tresultEditorBackground: editorBackground,\n\t\t\t},\n\t\t);\n\t\tthis._chatWidget.render(this._elements.chatWidget);\n\t\tthis._elements.chatWidget.style.setProperty(\n\t\t\tasCssVariableName(chatRequestBackground),\n\t\t\tasCssVariable(inlineChatBackground),\n\t\t);\n\t\tthis._chatWidget.setVisible(true);\n\t\tthis._store.add(this._chatWidget);\n\n\t\tconst ctxResponse = CONTEXT_RESPONSE.bindTo(\n\t\t\tthis.scopedContextKeyService,\n\t\t);\n\t\tconst ctxResponseVote = CONTEXT_RESPONSE_VOTE.bindTo(\n\t\t\tthis.scopedContextKeyService,\n\t\t);\n\t\tconst ctxResponseSupportIssues =\n\t\t\tCONTEXT_CHAT_RESPONSE_SUPPORT_ISSUE_REPORTING.bindTo(\n\t\t\t\tthis.scopedContextKeyService,\n\t\t\t);\n\t\tconst ctxResponseError = CONTEXT_RESPONSE_ERROR.bindTo(\n\t\t\tthis.scopedContextKeyService,\n\t\t);\n\t\tconst ctxResponseErrorFiltered = CONTEXT_RESPONSE_FILTERED.bindTo(\n\t\t\tthis.scopedContextKeyService,\n\t\t);\n\n\t\tconst viewModelStore = this._store.add(new DisposableStore());\n\t\tthis._store.add(\n\t\t\tthis._chatWidget.onDidChangeViewModel(() => {\n\t\t\t\tviewModelStore.clear();\n\n\t\t\t\tconst viewModel = this._chatWidget.viewModel;\n\t\t\t\tif (!viewModel) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tviewModelStore.add(\n\t\t\t\t\ttoDisposable(() => {\n\t\t\t\t\t\ttoolbar2.context = undefined;\n\t\t\t\t\t\tctxResponse.reset();\n\t\t\t\t\t\tctxResponseVote.reset();\n\t\t\t\t\t\tctxResponseError.reset();\n\t\t\t\t\t\tctxResponseErrorFiltered.reset();\n\t\t\t\t\t\tctxResponseSupportIssues.reset();\n\t\t\t\t\t}),\n\t\t\t\t);\n\n\t\t\t\tviewModelStore.add(\n\t\t\t\t\tviewModel.onDidChange(() => {\n\t\t\t\t\t\tconst last = viewModel.getItems().at(-1);\n\t\t\t\t\t\ttoolbar2.context = last;\n\n\t\t\t\t\t\tctxResponse.set(isResponseVM(last));\n\t\t\t\t\t\tctxResponseVote.set(\n\t\t\t\t\t\t\tisResponseVM(last)\n\t\t\t\t\t\t\t\t? last.vote === ChatAgentVoteDirection.Down\n\t\t\t\t\t\t\t\t\t? \"down\"\n\t\t\t\t\t\t\t\t\t: last.vote === ChatAgentVoteDirection.Up\n\t\t\t\t\t\t\t\t\t\t? \"up\"\n\t\t\t\t\t\t\t\t\t\t: \"\"\n\t\t\t\t\t\t\t\t: \"\",\n\t\t\t\t\t\t);\n\t\t\t\t\t\tctxResponseError.set(\n\t\t\t\t\t\t\tisResponseVM(last) &&\n\t\t\t\t\t\t\t\tlast.errorDetails !== undefined,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tctxResponseErrorFiltered.set(\n\t\t\t\t\t\t\t!!(\n\t\t\t\t\t\t\t\tisResponseVM(last) &&\n\t\t\t\t\t\t\t\tlast.errorDetails?.responseIsFiltered\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t);\n\t\t\t\t\t\tctxResponseSupportIssues.set(\n\t\t\t\t\t\t\tisResponseVM(last) &&\n\t\t\t\t\t\t\t\t(last.agent?.metadata.supportIssueReporting ??\n\t\t\t\t\t\t\t\t\tfalse),\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tthis._onDidChangeHeight.fire();\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t\tthis._onDidChangeHeight.fire();\n\t\t\t}),\n\t\t);\n\n\t\tthis._store.add(\n\t\t\tthis.chatWidget.onDidChangeContentHeight(() => {\n\t\t\t\tthis._onDidChangeHeight.fire();\n\t\t\t}),\n\t\t);\n\n\t\t// context keys\n\t\tthis._ctxResponseFocused = CTX_INLINE_CHAT_RESPONSE_FOCUSED.bindTo(\n\t\t\tthis._contextKeyService,\n\t\t);\n\t\tconst tracker = this._store.add(trackFocus(this.domNode));\n\t\tthis._store.add(\n\t\t\ttracker.onDidBlur(() => this._ctxResponseFocused.set(false)),\n\t\t);\n\t\tthis._store.add(\n\t\t\ttracker.onDidFocus(() => this._ctxResponseFocused.set(true)),\n\t\t);\n\n\t\tthis._ctxInputEditorFocused =\n\t\t\tCTX_INLINE_CHAT_FOCUSED.bindTo(_contextKeyService);\n\t\tthis._store.add(\n\t\t\tthis._chatWidget.inputEditor.onDidFocusEditorWidget(() =>\n\t\t\t\tthis._ctxInputEditorFocused.set(true),\n\t\t\t),\n\t\t);\n\t\tthis._store.add(\n\t\t\tthis._chatWidget.inputEditor.onDidBlurEditorWidget(() =>\n\t\t\t\tthis._ctxInputEditorFocused.set(false),\n\t\t\t),\n\t\t);\n\n\t\tconst statusMenuId =\n\t\t\toptions.statusMenuId instanceof MenuId\n\t\t\t\t? options.statusMenuId\n\t\t\t\t: options.statusMenuId.menu;\n\n\t\t// BUTTON bar\n\t\tconst statusMenuOptions =\n\t\t\toptions.statusMenuId instanceof MenuId\n\t\t\t\t? undefined\n\t\t\t\t: options.statusMenuId.options;\n\t\tconst statusButtonBar = scopedInstaService.createInstance(\n\t\t\tMenuWorkbenchButtonBar,\n\t\t\tthis._elements.toolbar1,\n\t\t\tstatusMenuId,\n\t\t\t{\n\t\t\t\ttoolbarOptions: { primaryGroup: \"0_main\" },\n\t\t\t\ttelemetrySource:\n\t\t\t\t\toptions.chatWidgetViewOptions?.menus?.telemetrySource,\n\t\t\t\tmenuOptions: { renderShortTitle: true },\n\t\t\t\t...statusMenuOptions,\n\t\t\t},\n\t\t);\n\t\tthis._store.add(\n\t\t\tstatusButtonBar.onDidChange(() => this._onDidChangeHeight.fire()),\n\t\t);\n\t\tthis._store.add(statusButtonBar);\n\n\t\t// secondary toolbar\n\t\tconst toolbar2 = scopedInstaService.createInstance(\n\t\t\tMenuWorkbenchToolBar,\n\t\t\tthis._elements.toolbar2,\n\t\t\toptions.secondaryMenuId ?? MenuId.for(\"\"),\n\t\t\t{\n\t\t\t\ttelemetrySource:\n\t\t\t\t\toptions.chatWidgetViewOptions?.menus?.telemetrySource,\n\t\t\t\tmenuOptions: {\n\t\t\t\t\trenderShortTitle: true,\n\t\t\t\t\tshouldForwardArgs: true,\n\t\t\t\t},\n\t\t\t\tactionViewItemProvider: (\n\t\t\t\t\taction: IAction,\n\t\t\t\t\toptions: IActionViewItemOptions,\n\t\t\t\t) => {\n\t\t\t\t\tif (\n\t\t\t\t\t\taction instanceof MenuItemAction &&\n\t\t\t\t\t\taction.item.id === MarkUnhelpfulActionId\n\t\t\t\t\t) {\n\t\t\t\t\t\treturn scopedInstaService.createInstance(\n\t\t\t\t\t\t\tChatVoteDownButton,\n\t\t\t\t\t\t\taction,\n\t\t\t\t\t\t\toptions as IMenuEntryActionViewItemOptions,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\treturn createActionViewItem(\n\t\t\t\t\t\tscopedInstaService,\n\t\t\t\t\t\taction,\n\t\t\t\t\t\toptions,\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t\tthis._store.add(\n\t\t\ttoolbar2.onDidChangeMenuItems(() => this._onDidChangeHeight.fire()),\n\t\t);\n\t\tthis._store.add(toolbar2);\n\n\t\tthis._store.add(\n\t\t\tthis._configurationService.onDidChangeConfiguration((e) => {\n\t\t\t\tif (\n\t\t\t\t\te.affectsConfiguration(\n\t\t\t\t\t\tAccessibilityVerbositySettingId.InlineChat,\n\t\t\t\t\t)\n\t\t\t\t) {\n\t\t\t\t\tthis._updateAriaLabel();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis._elements.root.tabIndex = 0;\n\t\tthis._elements.statusLabel.tabIndex = 0;\n\t\tthis._updateAriaLabel();\n\n\t\t// this._elements.status\n\t\tthis._store.add(\n\t\t\tthis._hoverService.setupManagedHover(\n\t\t\t\tgetDefaultHoverDelegate(\"element\"),\n\t\t\t\tthis._elements.statusLabel,\n\t\t\t\t() => {\n\t\t\t\t\treturn this._elements.statusLabel.dataset[\"title\"];\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\n\t\tthis._store.add(\n\t\t\tthis._chatService.onDidPerformUserAction((e) => {\n\t\t\t\tif (\n\t\t\t\t\te.sessionId ===\n\t\t\t\t\t\tthis._chatWidget.viewModel?.model.sessionId &&\n\t\t\t\t\te.action.kind === \"vote\"\n\t\t\t\t) {\n\t\t\t\t\tthis.updateStatus(\"Thank you for your feedback!\", {\n\t\t\t\t\t\tresetAfter: 1250,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\t// LEGACY - default chat model\n\t\t// this is only here for as long as we offer updateChatMessage\n\t\tthis._defaultChatModel = this._store.add(\n\t\t\tthis._instantiationService.createInstance(\n\t\t\t\tChatModel,\n\t\t\t\tundefined,\n\t\t\t\tChatAgentLocation.Editor,\n\t\t\t),\n\t\t);\n\t\tthis._defaultChatModel.startInitialize();\n\t\tthis._defaultChatModel.initialize(undefined);\n\t\tthis.setChatModel(this._defaultChatModel);\n\t}\n\n\tprivate _updateAriaLabel(): void {\n\t\tthis._elements.root.ariaLabel =\n\t\t\tthis._accessibleViewService.getOpenAriaHint(\n\t\t\t\tAccessibilityVerbositySettingId.InlineChat,\n\t\t\t);\n\n\t\tif (this._accessibilityService.isScreenReaderOptimized()) {\n\t\t\tlet label = defaultAriaLabel;\n\t\t\tif (\n\t\t\t\tthis._configurationService.getValue<boolean>(\n\t\t\t\t\tAccessibilityVerbositySettingId.InlineChat,\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tconst kbLabel = this._keybindingService\n\t\t\t\t\t.lookupKeybinding(\n\t\t\t\t\t\tAccessibilityCommandId.OpenAccessibilityHelp,\n\t\t\t\t\t)\n\t\t\t\t\t?.getLabel();\n\t\t\t\tlabel = kbLabel\n\t\t\t\t\t? localize(\n\t\t\t\t\t\t\t\"inlineChat.accessibilityHelp\",\n\t\t\t\t\t\t\t\"Inline Chat Input, Use {0} for Inline Chat Accessibility Help.\",\n\t\t\t\t\t\t\tkbLabel,\n\t\t\t\t\t\t)\n\t\t\t\t\t: localize(\n\t\t\t\t\t\t\t\"inlineChat.accessibilityHelpNoKb\",\n\t\t\t\t\t\t\t\"Inline Chat Input, Run the Inline Chat Accessibility Help command for more information.\",\n\t\t\t\t\t\t);\n\t\t\t}\n\t\t\tthis._chatWidget.inputEditor.updateOptions({ ariaLabel: label });\n\t\t}\n\t}\n\n\tdispose(): void {\n\t\tthis._store.dispose();\n\t}\n\n\tget domNode(): HTMLElement {\n\t\treturn this._elements.root;\n\t}\n\n\tget chatWidget(): ChatWidget {\n\t\treturn this._chatWidget;\n\t}\n\n\tsaveState() {\n\t\tthis._chatWidget.saveState();\n\t}\n\n\tlayout(widgetDim: Dimension) {\n\t\tthis._isLayouting = true;\n\t\ttry {\n\t\t\tthis._doLayout(widgetDim);\n\t\t} finally {\n\t\t\tthis._isLayouting = false;\n\t\t}\n\t}\n\n\tprotected _doLayout(dimension: Dimension): void {\n\t\tconst extraHeight = this._getExtraHeight();\n\t\tconst statusHeight = getTotalHeight(this._elements.status);\n\n\t\t// console.log('ZONE#Widget#layout', { height: dimension.height, extraHeight, progressHeight, followUpsHeight, statusHeight, LIST: dimension.height - progressHeight - followUpsHeight - statusHeight - extraHeight });\n\n\t\tthis._elements.root.style.height = `${dimension.height - extraHeight}px`;\n\t\tthis._elements.root.style.width = `${dimension.width}px`;\n\n\t\tthis._chatWidget.layout(\n\t\t\tdimension.height - statusHeight - extraHeight,\n\t\t\tdimension.width,\n\t\t);\n\t}\n\n\t/**\n\t * The content height of this widget is the size that would require no scrolling\n\t */\n\tget contentHeight(): number {\n\t\tconst data = {\n\t\t\tchatWidgetContentHeight: this._chatWidget.contentHeight,\n\t\t\tstatusHeight: getTotalHeight(this._elements.status),\n\t\t\textraHeight: this._getExtraHeight(),\n\t\t};\n\t\tconst result =\n\t\t\tdata.chatWidgetContentHeight + data.statusHeight + data.extraHeight;\n\t\treturn result;\n\t}\n\n\tget minHeight(): number {\n\t\t// The chat widget is variable height and supports scrolling. It should be\n\t\t// at least \"maxWidgetHeight\" high and at most the content height.\n\n\t\tlet maxWidgetOutputHeight = 100;\n\t\tfor (const item of this._chatWidget.viewModel?.getItems() ?? []) {\n\t\t\tif (\n\t\t\t\tisResponseVM(item) &&\n\t\t\t\titem.response.value.some(\n\t\t\t\t\t(r) => r.kind === \"textEditGroup\" && !r.state?.applied,\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\tmaxWidgetOutputHeight = 270;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tlet value = this.contentHeight;\n\t\tvalue -= this._chatWidget.contentHeight;\n\t\tvalue += Math.min(\n\t\t\tthis._chatWidget.input.contentHeight + maxWidgetOutputHeight,\n\t\t\tthis._chatWidget.contentHeight,\n\t\t);\n\t\treturn value;\n\t}\n\n\tprotected _getExtraHeight(): number {\n\t\treturn 2 /*border*/ + 4 /*shadow*/;\n\t}\n\n\tget value(): string {\n\t\treturn this._chatWidget.getInput();\n\t}\n\n\tset value(value: string) {\n\t\tthis._chatWidget.setInput(value);\n\t}\n\n\tselectAll(includeSlashCommand = true) {\n\t\t// DEBT@jrieken\n\t\t// REMOVE when agents are adopted\n\t\tlet startColumn = 1;\n\t\tif (!includeSlashCommand) {\n\t\t\tconst match = /^(\\/\\w+)\\s*/.exec(\n\t\t\t\tthis._chatWidget.inputEditor.getModel()!.getLineContent(1),\n\t\t\t);\n\t\t\tif (match) {\n\t\t\t\tstartColumn = match[1].length + 1;\n\t\t\t}\n\t\t}\n\t\tthis._chatWidget.inputEditor.setSelection(\n\t\t\tnew Selection(1, startColumn, Number.MAX_SAFE_INTEGER, 1),\n\t\t);\n\t}\n\n\tset placeholder(value: string) {\n\t\tthis._chatWidget.setInputPlaceholder(value);\n\t}\n\n\ttoggleStatus(show: boolean) {\n\t\tthis._elements.toolbar1.classList.toggle(\"hidden\", !show);\n\t\tthis._elements.toolbar2.classList.toggle(\"hidden\", !show);\n\t\tthis._elements.status.classList.toggle(\"hidden\", !show);\n\t\tthis._elements.infoLabel.classList.toggle(\"hidden\", !show);\n\t\tthis._onDidChangeHeight.fire();\n\t}\n\n\tupdateToolbar(show: boolean) {\n\t\tthis._elements.root.classList.toggle(\"toolbar\", show);\n\t\tthis._elements.toolbar1.classList.toggle(\"hidden\", !show);\n\t\tthis._elements.toolbar2.classList.toggle(\"hidden\", !show);\n\t\tthis._elements.status.classList.toggle(\"actions\", show);\n\t\tthis._elements.infoLabel.classList.toggle(\"hidden\", show);\n\t\tthis._onDidChangeHeight.fire();\n\t}\n\n\tasync getCodeBlockInfo(\n\t\tcodeBlockIndex: number,\n\t): Promise<IResolvedTextEditorModel | undefined> {\n\t\tconst { viewModel } = this._chatWidget;\n\t\tif (!viewModel) {\n\t\t\treturn undefined;\n\t\t}\n\t\tconst items = viewModel.getItems().filter((i) => isResponseVM(i));\n\t\tif (!items.length) {\n\t\t\treturn;\n\t\t}\n\t\tconst item = items[items.length - 1];\n\t\treturn viewModel.codeBlockModelCollection.get(\n\t\t\tviewModel.sessionId,\n\t\t\titem,\n\t\t\tcodeBlockIndex,\n\t\t)?.model;\n\t}\n\n\tget responseContent(): string | undefined {\n\t\tconst requests = this._chatWidget.viewModel?.model.getRequests();\n\t\tif (!isNonEmptyArray(requests)) {\n\t\t\treturn undefined;\n\t\t}\n\t\treturn tail(requests)?.response?.response.toString();\n\t}\n\n\tgetChatModel(): IChatModel {\n\t\treturn this._chatWidget.viewModel?.model ?? this._defaultChatModel;\n\t}\n\n\tsetChatModel(chatModel: IChatModel) {\n\t\tthis._chatWidget.setModel(chatModel, { inputValue: undefined });\n\t}\n\n\t/**\n\t * @deprecated use `setChatModel` instead\n\t */\n\tupdateChatMessage(\n\t\tmessage: IInlineChatMessage,\n\t\tisIncomplete: true,\n\t): IInlineChatMessageAppender;\n\tupdateChatMessage(message: IInlineChatMessage | undefined): void;\n\tupdateChatMessage(\n\t\tmessage: IInlineChatMessage | undefined,\n\t\tisIncomplete?: boolean,\n\t\tisCodeBlockEditable?: boolean,\n\t): IInlineChatMessageAppender | undefined;\n\tupdateChatMessage(\n\t\tmessage: IInlineChatMessage | undefined,\n\t\tisIncomplete?: boolean,\n\t\tisCodeBlockEditable?: boolean,\n\t): IInlineChatMessageAppender | undefined {\n\t\tif (\n\t\t\t!this._chatWidget.viewModel ||\n\t\t\tthis._chatWidget.viewModel.model !== this._defaultChatModel\n\t\t) {\n\t\t\t// this can only be used with the default chat model\n\t\t\treturn;\n\t\t}\n\n\t\tconst model = this._defaultChatModel;\n\t\tif (!message?.message.value) {\n\t\t\tfor (const request of model.getRequests()) {\n\t\t\t\tmodel.removeRequest(request.id);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tconst chatRequest = model.addRequest(\n\t\t\t{ parts: [], text: \"\" },\n\t\t\t{ variables: [] },\n\t\t\t0,\n\t\t);\n\t\tmodel.acceptResponseProgress(chatRequest, {\n\t\t\tkind: \"markdownContent\",\n\t\t\tcontent: message.message,\n\t\t});\n\n\t\tif (!isIncomplete) {\n\t\t\tmodel.completeResponse(chatRequest);\n\t\t\treturn;\n\t\t}\n\t\treturn {\n\t\t\tcancel: () => model.cancelRequest(chatRequest),\n\t\t\tcomplete: () => model.completeResponse(chatRequest),\n\t\t\tappendContent: (fragment: string) => {\n\t\t\t\tmodel.acceptResponseProgress(chatRequest, {\n\t\t\t\t\tkind: \"markdownContent\",\n\t\t\t\t\tcontent: new MarkdownString(fragment),\n\t\t\t\t});\n\t\t\t},\n\t\t};\n\t}\n\n\tupdateInfo(message: string): void {\n\t\tthis._elements.infoLabel.classList.toggle(\"hidden\", !message);\n\t\tconst renderedMessage = renderLabelWithIcons(message);\n\t\treset(this._elements.infoLabel, ...renderedMessage);\n\t\tthis._onDidChangeHeight.fire();\n\t}\n\n\tupdateStatus(\n\t\tmessage: string,\n\t\tops: {\n\t\t\tclasses?: string[];\n\t\t\tresetAfter?: number;\n\t\t\tkeepMessage?: boolean;\n\t\t\ttitle?: string;\n\t\t} = {},\n\t) {\n\t\tconst isTempMessage = typeof ops.resetAfter === \"number\";\n\t\tif (isTempMessage && !this._elements.statusLabel.dataset[\"state\"]) {\n\t\t\tconst statusLabel = this._elements.statusLabel.innerText;\n\t\t\tconst title = this._elements.statusLabel.dataset[\"title\"];\n\t\t\tconst classes = Array.from(\n\t\t\t\tthis._elements.statusLabel.classList.values(),\n\t\t\t);\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.updateStatus(statusLabel, {\n\t\t\t\t\tclasses,\n\t\t\t\t\tkeepMessage: true,\n\t\t\t\t\ttitle,\n\t\t\t\t});\n\t\t\t}, ops.resetAfter);\n\t\t}\n\t\tconst renderedMessage = renderLabelWithIcons(message);\n\t\treset(this._elements.statusLabel, ...renderedMessage);\n\t\tthis._elements.statusLabel.className = `label status ${(ops.classes ?? []).join(\" \")}`;\n\t\tthis._elements.statusLabel.classList.toggle(\"hidden\", !message);\n\t\tif (isTempMessage) {\n\t\t\tthis._elements.statusLabel.dataset[\"state\"] = \"temp\";\n\t\t} else {\n\t\t\tdelete this._elements.statusLabel.dataset[\"state\"];\n\t\t}\n\n\t\tif (ops.title) {\n\t\t\tthis._elements.statusLabel.dataset[\"title\"] = ops.title;\n\t\t} else {\n\t\t\tdelete this._elements.statusLabel.dataset[\"title\"];\n\t\t}\n\t\tthis._onDidChangeHeight.fire();\n\t}\n\n\treset() {\n\t\tthis._chatWidget.setContext(true);\n\t\tthis._chatWidget.saveState();\n\t\tthis.updateChatMessage(undefined);\n\n\t\treset(this._elements.statusLabel);\n\t\tthis._elements.statusLabel.classList.toggle(\"hidden\", true);\n\t\tthis._elements.toolbar1.classList.add(\"hidden\");\n\t\tthis._elements.toolbar2.classList.add(\"hidden\");\n\t\tthis.updateInfo(\"\");\n\n\t\tthis.chatWidget.setModel(this._defaultChatModel, {});\n\n\t\tthis._elements.accessibleViewer.classList.toggle(\"hidden\", true);\n\t\tthis._onDidChangeHeight.fire();\n\t}\n\n\tfocus() {\n\t\tthis._chatWidget.focusInput();\n\t}\n\n\thasFocus() {\n\t\treturn this.domNode.contains(getActiveElement());\n\t}\n}\n\nconst defaultAriaLabel = localize(\"aria-label\", \"Inline Chat Input\");\n\nexport class EditorBasedInlineChatWidget extends InlineChatWidget {\n\tprivate readonly _accessibleViewer = this._store.add(\n\t\tnew MutableDisposable<HunkAccessibleDiffViewer>(),\n\t);\n\n\tconstructor(\n\t\tlocation: IChatWidgetLocationOptions,\n\t\tprivate readonly _parentEditor: ICodeEditor,\n\t\toptions: IInlineChatWidgetConstructionOptions,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IAccessibilityService accessibilityService: IAccessibilityService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IAccessibleViewService accessibleViewService: IAccessibleViewService,\n\t\t@ITextModelService textModelResolverService: ITextModelService,\n\t\t@IChatService chatService: IChatService,\n\t\t@IHoverService hoverService: IHoverService,\n\t) {\n\t\tsuper(\n\t\t\tlocation,\n\t\t\t{\n\t\t\t\t...options,\n\t\t\t\tchatWidgetViewOptions: {\n\t\t\t\t\t...options.chatWidgetViewOptions,\n\t\t\t\t\teditorOverflowWidgetsDomNode:\n\t\t\t\t\t\t_parentEditor.getOverflowWidgetsDomNode(),\n\t\t\t\t},\n\t\t\t},\n\t\t\tinstantiationService,\n\t\t\tcontextKeyService,\n\t\t\tkeybindingService,\n\t\t\taccessibilityService,\n\t\t\tconfigurationService,\n\t\t\taccessibleViewService,\n\t\t\ttextModelResolverService,\n\t\t\tchatService,\n\t\t\thoverService,\n\t\t);\n\t}\n\n\t// --- layout\n\n\toverride get contentHeight(): number {\n\t\tlet result = super.contentHeight;\n\n\t\tif (this._accessibleViewer.value) {\n\t\t\tresult += this._accessibleViewer.value.height + 8 /* padding */;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprotected override _doLayout(dimension: Dimension): void {\n\t\tlet newHeight = dimension.height;\n\n\t\tif (this._accessibleViewer.value) {\n\t\t\tthis._accessibleViewer.value.width = dimension.width - 12;\n\t\t\tnewHeight -= this._accessibleViewer.value.height + 8;\n\t\t}\n\n\t\tsuper._doLayout(dimension.with(undefined, newHeight));\n\n\t\t// update/fix the height of the zone which was set to newHeight in super._doLayout\n\t\tthis._elements.root.style.height = `${dimension.height - this._getExtraHeight()}px`;\n\t}\n\n\toverride reset() {\n\t\tthis._accessibleViewer.clear();\n\t\tsuper.reset();\n\t}\n\n\t// --- accessible viewer\n\n\tshowAccessibleHunk(session: Session, hunkData: HunkInformation): void {\n\t\tthis._elements.accessibleViewer.classList.remove(\"hidden\");\n\t\tthis._accessibleViewer.clear();\n\n\t\tthis._accessibleViewer.value =\n\t\t\tthis._instantiationService.createInstance(\n\t\t\t\tHunkAccessibleDiffViewer,\n\t\t\t\tthis._elements.accessibleViewer,\n\t\t\t\tsession,\n\t\t\t\thunkData,\n\t\t\t\tnew AccessibleHunk(this._parentEditor, session, hunkData),\n\t\t\t);\n\n\t\tthis._onDidChangeHeight.fire();\n\t}\n}\n\nclass HunkAccessibleDiffViewer extends AccessibleDiffViewer {\n\treadonly height: number;\n\n\tset width(value: number) {\n\t\tthis._width2.set(value, undefined);\n\t}\n\n\tprivate readonly _width2: ISettableObservable<number>;\n\n\tconstructor(\n\t\tparentNode: HTMLElement,\n\t\tsession: Session,\n\t\thunk: HunkInformation,\n\t\tmodels: IAccessibleDiffViewerModel,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t) {\n\t\tconst width = observableValue(\"width\", 0);\n\t\tconst diff = observableValue(\n\t\t\t\"diff\",\n\t\t\tHunkAccessibleDiffViewer._asMapping(hunk),\n\t\t);\n\t\tconst diffs = derived((r) => [diff.read(r)]);\n\t\tconst lines = Math.min(10, 8 + diff.get().changedLineCount);\n\t\tconst height =\n\t\t\tmodels.getModifiedOptions().get(EditorOption.lineHeight) * lines;\n\n\t\tsuper(\n\t\t\tparentNode,\n\t\t\tconstObservable(true),\n\t\t\t() => {},\n\t\t\tconstObservable(false),\n\t\t\twidth,\n\t\t\tconstObservable(height),\n\t\t\tdiffs,\n\t\t\tmodels,\n\t\t\tinstantiationService,\n\t\t);\n\n\t\tthis.height = height;\n\t\tthis._width2 = width;\n\n\t\tthis._store.add(\n\t\t\tsession.textModelN.onDidChangeContent(() => {\n\t\t\t\tdiff.set(HunkAccessibleDiffViewer._asMapping(hunk), undefined);\n\t\t\t}),\n\t\t);\n\t}\n\n\tprivate static _asMapping(hunk: HunkInformation): DetailedLineRangeMapping {\n\t\tconst ranges0 = hunk.getRanges0();\n\t\tconst rangesN = hunk.getRangesN();\n\t\tconst originalLineRange = LineRange.fromRangeInclusive(ranges0[0]);\n\t\tconst modifiedLineRange = LineRange.fromRangeInclusive(rangesN[0]);\n\t\tconst innerChanges: RangeMapping[] = [];\n\t\tfor (let i = 1; i < ranges0.length; i++) {\n\t\t\tinnerChanges.push(new RangeMapping(ranges0[i], rangesN[i]));\n\t\t}\n\t\treturn new DetailedLineRangeMapping(\n\t\t\toriginalLineRange,\n\t\t\tmodifiedLineRange,\n\t\t\tinnerChanges,\n\t\t);\n\t}\n}\n\nclass AccessibleHunk implements IAccessibleDiffViewerModel {\n\tconstructor(\n\t\tprivate readonly _editor: ICodeEditor,\n\t\tprivate readonly _session: Session,\n\t\tprivate readonly _hunk: HunkInformation,\n\t) {}\n\n\tgetOriginalModel(): ITextModel {\n\t\treturn this._session.textModel0;\n\t}\n\tgetModifiedModel(): ITextModel {\n\t\treturn this._session.textModelN;\n\t}\n\tgetOriginalOptions(): IComputedEditorOptions {\n\t\treturn this._editor.getOptions();\n\t}\n\tgetModifiedOptions(): IComputedEditorOptions {\n\t\treturn this._editor.getOptions();\n\t}\n\toriginalReveal(range: Range): void {\n\t\t// throw new Error('Method not implemented.');\n\t}\n\tmodifiedReveal(range?: Range | undefined): void {\n\t\tthis._editor.revealRangeInCenterIfOutsideViewport(\n\t\t\trange || this._hunk.getRangesN()[0],\n\t\t\tScrollType.Smooth,\n\t\t);\n\t}\n\tmodifiedSetSelection(range: Range): void {\n\t\t// this._editor.revealRangeInCenterIfOutsideViewport(range, ScrollType.Smooth);\n\t\t// this._editor.setSelection(range);\n\t}\n\tmodifiedFocus(): void {\n\t\tthis._editor.focus();\n\t}\n\tgetModifiedPosition(): Position | undefined {\n\t\treturn this._hunk.getRangesN()[0].getStartPosition();\n\t}\n}\n"],
  "mappings": "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",
  "names": ["item", "options"]
}
