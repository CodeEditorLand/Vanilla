import{EditorContributionInstantiation as a,registerEditorContribution as s}from"../../../../editor/browser/editorExtensions.js";import{MenuRegistry as o,registerAction2 as e}from"../../../../platform/actions/common/actions.js";import{InlineChatController as A}from"./inlineChatController.js";import*as t from"./inlineChatActions.js";import{CTX_INLINE_CHAT_EDITING as c,CTX_INLINE_CHAT_REQUEST_IN_PROGRESS as i,INLINE_CHAT_ID as g,MENU_INLINE_CHAT_WIDGET_STATUS as r}from"../common/inlineChat.js";import{InstantiationType as I,registerSingleton as p}from"../../../../platform/instantiation/common/extensions.js";import{Registry as f}from"../../../../platform/registry/common/platform.js";import{LifecyclePhase as b}from"../../../services/lifecycle/common/lifecycle.js";import{InlineChatNotebookContribution as E}from"./inlineChatNotebook.js";import{registerWorkbenchContribution2 as S,Extensions as T,WorkbenchPhase as _}from"../../../common/contributions.js";import{InlineChatSavingServiceImpl as N}from"./inlineChatSavingServiceImpl.js";import{InlineChatAccessibleView as M}from"./inlineChatAccessibleView.js";import{IInlineChatSavingService as y}from"./inlineChatSavingService.js";import{IInlineChatSessionService as R}from"./inlineChatSessionService.js";import{InlineChatEnabler as C,InlineChatSessionServiceImpl as k}from"./inlineChatSessionServiceImpl.js";import{AccessibleViewRegistry as l}from"../../../../platform/accessibility/browser/accessibleViewRegistry.js";import{CancelAction as w,SubmitAction as d}from"../../chat/browser/actions/chatExecuteActions.js";import{localize as n}from"../../../../nls.js";import{CONTEXT_CHAT_INPUT_HAS_TEXT as h}from"../../chat/common/chatContextKeys.js";import{ContextKeyExpr as m}from"../../../../platform/contextkey/common/contextkey.js";import{InlineChatAccessibilityHelp as D}from"./inlineChatAccessibilityHelp.js";import{InlineChatExansionContextKey as u,InlineChatExpandLineAction as H}from"./inlineChatCurrentLine.js";p(R,k,I.Delayed),p(y,N,I.Delayed),s(g,A,a.Eager),s(u.Id,u,a.BeforeFirstInteraction),e(H);const v={group:"0_main",order:0,command:{id:d.ID,title:n("send.edit","Edit Code")},when:m.and(h,i.toNegated(),c)},x={group:"0_main",order:0,command:{id:d.ID,title:n("send.generate","Generate")},when:m.and(h,i.toNegated(),c.toNegated())};o.appendMenuItem(r,v),o.appendMenuItem(r,x);const W={group:"0_main",order:0,command:{id:w.ID,title:n("cancel","Stop Request"),shortTitle:n("cancelShort","Stop")},when:m.and(i)};o.appendMenuItem(r,W),e(t.StartSessionAction),e(t.CloseAction),e(t.ConfigureInlineChatAction),e(t.UnstashSessionAction),e(t.DiscardHunkAction),e(t.DiscardAction),e(t.RerunAction),e(t.MoveToNextHunk),e(t.MoveToPreviousHunk),e(t.ArrowOutUpAction),e(t.ArrowOutDownAction),e(t.FocusInlineChat),e(t.ViewInChatAction),e(t.ToggleDiffForChange),e(t.AcceptChanges);const L=f.as(T.Workbench);L.registerWorkbenchContribution(E,b.Restored),S(C.Id,C,_.AfterRestored),l.register(new M),l.register(new D);
