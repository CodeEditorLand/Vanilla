import{EditorContributionInstantiation as a,registerEditorContribution as s}from"../../../../editor/browser/editorExtensions.js";import{localize as n}from"../../../../nls.js";import{AccessibleViewRegistry as c}from"../../../../platform/accessibility/browser/accessibleViewRegistry.js";import{MenuRegistry as o,registerAction2 as e}from"../../../../platform/actions/common/actions.js";import{ContextKeyExpr as i}from"../../../../platform/contextkey/common/contextkey.js";import{InstantiationType as I,registerSingleton as p}from"../../../../platform/instantiation/common/extensions.js";import{Registry as A}from"../../../../platform/registry/common/platform.js";import{Extensions as g,WorkbenchPhase as f,registerWorkbenchContribution2 as b}from"../../../common/contributions.js";import{LifecyclePhase as E}from"../../../services/lifecycle/common/lifecycle.js";import{CancelAction as S,SubmitAction as C}from"../../chat/browser/actions/chatExecuteActions.js";import{CONTEXT_CHAT_INPUT_HAS_TEXT as l}from"../../chat/common/chatContextKeys.js";import{CTX_INLINE_CHAT_EDITING as d,CTX_INLINE_CHAT_REQUEST_IN_PROGRESS as r,INLINE_CHAT_ID as T,MENU_INLINE_CHAT_WIDGET_STATUS as m}from"../common/inlineChat.js";import{InlineChatAccessibilityHelp as _}from"./inlineChatAccessibilityHelp.js";import{InlineChatAccessibleView as N}from"./inlineChatAccessibleView.js";import*as t from"./inlineChatActions.js";import{InlineChatController as y}from"./inlineChatController.js";import{InlineChatExansionContextKey as h,InlineChatExpandLineAction as M}from"./inlineChatCurrentLine.js";import{InlineChatNotebookContribution as R}from"./inlineChatNotebook.js";import{IInlineChatSavingService as k}from"./inlineChatSavingService.js";import{InlineChatSavingServiceImpl as w}from"./inlineChatSavingServiceImpl.js";import{IInlineChatSessionService as D}from"./inlineChatSessionService.js";import{InlineChatEnabler as u,InlineChatSessionServiceImpl as H}from"./inlineChatSessionServiceImpl.js";p(D,H,I.Delayed),p(k,w,I.Delayed),s(T,y,a.Eager),s(h.Id,h,a.BeforeFirstInteraction),e(M);const v={group:"0_main",order:0,command:{id:C.ID,title:n("send.edit","Edit Code")},when:i.and(l,r.toNegated(),d)},x={group:"0_main",order:0,command:{id:C.ID,title:n("send.generate","Generate")},when:i.and(l,r.toNegated(),d.toNegated())};o.appendMenuItem(m,v),o.appendMenuItem(m,x);const W={group:"0_main",order:0,command:{id:S.ID,title:n("cancel","Stop Request"),shortTitle:n("cancelShort","Stop")},when:i.and(r)};o.appendMenuItem(m,W),e(t.StartSessionAction),e(t.CloseAction),e(t.ConfigureInlineChatAction),e(t.UnstashSessionAction),e(t.DiscardHunkAction),e(t.DiscardAction),e(t.RerunAction),e(t.MoveToNextHunk),e(t.MoveToPreviousHunk),e(t.ArrowOutUpAction),e(t.ArrowOutDownAction),e(t.FocusInlineChat),e(t.ViewInChatAction),e(t.ToggleDiffForChange),e(t.AcceptChanges);const L=A.as(g.Workbench);L.registerWorkbenchContribution(R,E.Restored),b(u.Id,u,f.AfterRestored),c.register(new N),c.register(new _);
