{
  "version": 3,
  "sources": ["../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/common/dialogs.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DeferredPromise } from \"../../base/common/async.js\";\nimport { Emitter, type Event } from \"../../base/common/event.js\";\nimport { Disposable } from \"../../base/common/lifecycle.js\";\nimport type {\n\tIDialogArgs,\n\tIDialogResult,\n} from \"../../platform/dialogs/common/dialogs.js\";\n\nexport interface IDialogViewItem {\n\treadonly args: IDialogArgs;\n\n\tclose(result?: IDialogResult | Error): void;\n}\n\nexport interface IDialogHandle {\n\treadonly item: IDialogViewItem;\n\treadonly result: Promise<IDialogResult | undefined>;\n}\n\nexport interface IDialogsModel {\n\treadonly onWillShowDialog: Event<void>;\n\treadonly onDidShowDialog: Event<void>;\n\n\treadonly dialogs: IDialogViewItem[];\n\n\tshow(dialog: IDialogArgs): IDialogHandle;\n}\n\nexport class DialogsModel extends Disposable implements IDialogsModel {\n\treadonly dialogs: IDialogViewItem[] = [];\n\n\tprivate readonly _onWillShowDialog = this._register(new Emitter<void>());\n\treadonly onWillShowDialog = this._onWillShowDialog.event;\n\n\tprivate readonly _onDidShowDialog = this._register(new Emitter<void>());\n\treadonly onDidShowDialog = this._onDidShowDialog.event;\n\n\tshow(dialog: IDialogArgs): IDialogHandle {\n\t\tconst promise = new DeferredPromise<IDialogResult | undefined>();\n\n\t\tconst item: IDialogViewItem = {\n\t\t\targs: dialog,\n\t\t\tclose: (result) => {\n\t\t\t\tthis.dialogs.splice(0, 1);\n\t\t\t\tif (result instanceof Error) {\n\t\t\t\t\tpromise.error(result);\n\t\t\t\t} else {\n\t\t\t\t\tpromise.complete(result);\n\t\t\t\t}\n\t\t\t\tthis._onDidShowDialog.fire();\n\t\t\t},\n\t\t};\n\n\t\tthis.dialogs.push(item);\n\t\tthis._onWillShowDialog.fire();\n\n\t\treturn {\n\t\t\titem,\n\t\t\tresult: promise.p,\n\t\t};\n\t}\n}\n"],
  "mappings": ";;AAKA,SAAS,uBAAuB;AAChC,SAAS,eAA2B;AACpC,SAAS,kBAAkB;AA0BpB,MAAM,qBAAqB,WAAoC;AAAA,EAjCtE,OAiCsE;AAAA;AAAA;AAAA,EAC5D,UAA6B,CAAC;AAAA,EAEtB,oBAAoB,KAAK,UAAU,IAAI,QAAc,CAAC;AAAA,EAC9D,mBAAmB,KAAK,kBAAkB;AAAA,EAElC,mBAAmB,KAAK,UAAU,IAAI,QAAc,CAAC;AAAA,EAC7D,kBAAkB,KAAK,iBAAiB;AAAA,EAEjD,KAAK,QAAoC;AACxC,UAAM,UAAU,IAAI,gBAA2C;AAE/D,UAAM,OAAwB;AAAA,MAC7B,MAAM;AAAA,MACN,OAAO,wBAAC,WAAW;AAClB,aAAK,QAAQ,OAAO,GAAG,CAAC;AACxB,YAAI,kBAAkB,OAAO;AAC5B,kBAAQ,MAAM,MAAM;AAAA,QACrB,OAAO;AACN,kBAAQ,SAAS,MAAM;AAAA,QACxB;AACA,aAAK,iBAAiB,KAAK;AAAA,MAC5B,GARO;AAAA,IASR;AAEA,SAAK,QAAQ,KAAK,IAAI;AACtB,SAAK,kBAAkB,KAAK;AAE5B,WAAO;AAAA,MACN;AAAA,MACA,QAAQ,QAAQ;AAAA,IACjB;AAAA,EACD;AACD;",
  "names": []
}
