var x=Object.defineProperty;var y=Object.getOwnPropertyDescriptor;var h=(d,o,r,a)=>{for(var n=a>1?void 0:a?y(o,r):o,s=d.length-1,c;s>=0;s--)(c=d[s])&&(n=(a?c(o,r,n):c(n))||n);return a&&n&&x(o,r,n),n},l=(d,o)=>(r,a)=>o(r,a,d);import{DisposableStore as f}from"../../base/common/lifecycle.js";import{Schemas as u}from"../../base/common/network.js";import{isLinux as b}from"../../base/common/platform.js";import{basename as m,dirname as v,extname as w,isEqual as p}from"../../base/common/resources.js";import{ILanguageService as g}from"../../editor/common/languages/language.js";import{IModelService as E}from"../../editor/common/services/model.js";import{localize as t}from"../../nls.js";import{IContextKeyService as C,RawContextKey as e}from"../../platform/contextkey/common/contextkey.js";import{IFileService as I}from"../../platform/files/common/files.js";import{DEFAULT_EDITOR_ASSOCIATION as S}from"./editor.js";const M=new e("workbenchState",void 0,{type:"string",description:t("workbenchState","The kind of workspace opened in the window, either 'empty' (no workspace), 'folder' (single folder) or 'workspace' (multi-root workspace)")}),D=new e("workspaceFolderCount",0,t("workspaceFolderCount","The number of root folders in the workspace")),N=new e("openFolderWorkspaceSupport",!0,!0),O=new e("enterMultiRootWorkspaceSupport",!0,!0),U=new e("emptyWorkspaceSupport",!0,!0),z=new e("dirtyWorkingCopies",!1,t("dirtyWorkingCopies","Whether there are any working copies with unsaved changes")),j=new e("remoteName","",t("remoteName","The name of the remote the window is connected to or an empty string if not connected to any remote")),Z=new e("virtualWorkspace","",t("virtualWorkspace","The scheme of the current workspace is from a virtual file system or an empty string.")),H=new e("temporaryWorkspace",!1,t("temporaryWorkspace","The scheme of the current workspace is from a temporary file system.")),q=new e("isFullscreen",!1,t("isFullscreen","Whether the main window is in fullscreen mode")),$=new e("isAuxiliaryWindowFocusedContext",!1,t("isAuxiliaryWindowFocusedContext","Whether an auxiliary window is focused")),J=new e("hasWebFileSystemAccess",!1,!0),Q=new e("embedderIdentifier",void 0,t("embedderIdentifier","The identifier of the embedder according to the product service, if one is defined")),X=new e("activeEditorIsDirty",!1,t("activeEditorIsDirty","Whether the active editor has unsaved changes")),Y=new e("activeEditorIsNotPreview",!1,t("activeEditorIsNotPreview","Whether the active editor is not in preview mode")),ee=new e("activeEditorIsFirstInGroup",!1,t("activeEditorIsFirstInGroup","Whether the active editor is the first one in its group")),te=new e("activeEditorIsLastInGroup",!1,t("activeEditorIsLastInGroup","Whether the active editor is the last one in its group")),oe=new e("activeEditorIsPinned",!1,t("activeEditorIsPinned","Whether the active editor is pinned")),ie=new e("activeEditorIsReadonly",!1,t("activeEditorIsReadonly","Whether the active editor is read-only")),re=new e("activeCompareEditorCanSwap",!1,t("activeCompareEditorCanSwap","Whether the active compare editor can swap sides")),ne=new e("activeEditorCanToggleReadonly",!0,t("activeEditorCanToggleReadonly","Whether the active editor can toggle between being read-only or writeable")),se=new e("activeEditorCanRevert",!1,t("activeEditorCanRevert","Whether the active editor can revert")),ae=new e("activeEditorCanSplitInGroup",!0),de=new e("activeEditor",null,{type:"string",description:t("activeEditor","The identifier of the active editor")}),le=new e("activeEditorAvailableEditorIds","",t("activeEditorAvailableEditorIds","The available editor identifiers that are usable for the active editor")),ce=new e("textCompareEditorVisible",!1,t("textCompareEditorVisible","Whether a text compare editor is visible")),pe=new e("textCompareEditorActive",!1,t("textCompareEditorActive","Whether a text compare editor is active")),he=new e("sideBySideEditorActive",!1,t("sideBySideEditorActive","Whether a side by side editor is active")),ue=new e("groupEditorsCount",0,t("groupEditorsCount","The number of opened editor groups")),xe=new e("activeEditorGroupEmpty",!1,t("activeEditorGroupEmpty","Whether the active editor group is empty")),ye=new e("activeEditorGroupIndex",0,t("activeEditorGroupIndex","The index of the active editor group")),fe=new e("activeEditorGroupLast",!1,t("activeEditorGroupLast","Whether the active editor group is the last group")),be=new e("activeEditorGroupLocked",!1,t("activeEditorGroupLocked","Whether the active editor group is locked")),W=new e("multipleEditorGroups",!1,t("multipleEditorGroups","Whether there are multiple editor groups opened")),me=W.toNegated(),ve=new e("multipleEditorsSelectedInGroup",!1,t("multipleEditorsSelectedInGroup","Whether multiple editors have been selected in an editor group")),we=new e("twoEditorsSelectedInGroup",!1,t("twoEditorsSelectedInGroup","Whether exactly two editors have been selected in an editor group")),ge=new e("SelectedEditorsInGroupFileOrUntitledResourceContextKey",!0,t("SelectedEditorsInGroupFileOrUntitledResourceContextKey","Whether all selected editors in a group have a file or untitled resource associated")),_=new e("editorPartMultipleEditorGroups",!1,t("editorPartMultipleEditorGroups","Whether there are multiple editor groups opened in an editor part")),Ee=_.toNegated(),Ce=new e("editorPartMaximizedEditorGroup",!1,t("editorPartEditorGroupMaximized","Editor Part has a maximized group")),Ie=new e("isAuxiliaryEditorPart",!1,t("isAuxiliaryEditorPart","Editor Part is in an auxiliary window")),Se=new e("editorIsOpen",!1,t("editorIsOpen","Whether an editor is open")),We=new e("inZenMode",!1,t("inZenMode","Whether Zen mode is enabled")),_e=new e("isCenteredLayout",!1,t("isMainEditorCenteredLayout","Whether centered layout is enabled for the main editor")),Fe=new e("splitEditorsVertically",!1,t("splitEditorsVertically","Whether editors split vertically")),Te=new e("mainEditorAreaVisible",!0,t("mainEditorAreaVisible","Whether the editor area in the main window is visible")),Ae=new e("editorTabsVisible",!0,t("editorTabsVisible","Whether editor tabs are visible")),Ke=new e("sideBarVisible",!1,t("sideBarVisible","Whether the sidebar is visible")),ke=new e("sideBarFocus",!1,t("sideBarFocus","Whether the sidebar has keyboard focus")),Ge=new e("activeViewlet","",t("activeViewlet","The identifier of the active viewlet")),Ve=new e("statusBarFocused",!1,t("statusBarFocused","Whether the status bar has keyboard focus")),Pe=new e("titleBarStyle",b?"native":"custom",t("titleBarStyle","Style of the window title bar")),Re=new e("titleBarVisible",!1,t("titleBarVisible","Whether the title bar is visible")),Le=new e("bannerFocused",!1,t("bannerFocused","Whether the banner has keyboard focus")),Be=new e("notificationFocus",!0,t("notificationFocus","Whether a notification has keyboard focus")),Me=new e("notificationCenterVisible",!1,t("notificationCenterVisible","Whether the notifications center is visible")),De=new e("notificationToastsVisible",!1,t("notificationToastsVisible","Whether a notification toast is visible")),Ne=new e("activeAuxiliary","",t("activeAuxiliary","The identifier of the active auxiliary panel")),Oe=new e("auxiliaryBarFocus",!1,t("auxiliaryBarFocus","Whether the auxiliary bar has keyboard focus")),Ue=new e("auxiliaryBarVisible",!1,t("auxiliaryBarVisible","Whether the auxiliary bar is visible")),ze=new e("activePanel","",t("activePanel","The identifier of the active panel")),je=new e("panelFocus",!1,t("panelFocus","Whether the panel has keyboard focus")),Ze=new e("panelPosition","bottom",t("panelPosition","The position of the panel, always 'bottom'")),He=new e("panelAlignment","center",t("panelAlignment","The alignment of the panel, either 'center', 'left', 'right' or 'justify'")),qe=new e("panelVisible",!1,t("panelVisible","Whether the panel is visible")),$e=new e("panelMaximized",!1,t("panelMaximized","Whether the panel is maximized")),Je=new e("focusedView","",t("focusedView","The identifier of the view that has keyboard focus"));function Qe(d){return`view.${d}.visible`}let i=class{constructor(o,r,a,n){this._contextKeyService=o;this._fileService=r;this._languageService=a;this._modelService=n;this._schemeKey=i.Scheme.bindTo(this._contextKeyService),this._filenameKey=i.Filename.bindTo(this._contextKeyService),this._dirnameKey=i.Dirname.bindTo(this._contextKeyService),this._pathKey=i.Path.bindTo(this._contextKeyService),this._langIdKey=i.LangId.bindTo(this._contextKeyService),this._resourceKey=i.Resource.bindTo(this._contextKeyService),this._extensionKey=i.Extension.bindTo(this._contextKeyService),this._hasResource=i.HasResource.bindTo(this._contextKeyService),this._isFileSystemResource=i.IsFileSystemResource.bindTo(this._contextKeyService),this._disposables.add(r.onDidChangeFileSystemProviderRegistrations(()=>{const s=this.get();this._isFileSystemResource.set(!!(s&&r.hasProvider(s)))})),this._disposables.add(n.onModelAdded(s=>{p(s.uri,this.get())&&this._setLangId()})),this._disposables.add(n.onModelLanguageChanged(s=>{p(s.model.uri,this.get())&&this._setLangId()}))}static Scheme=new e("resourceScheme",void 0,{type:"string",description:t("resourceScheme","The scheme of the resource")});static Filename=new e("resourceFilename",void 0,{type:"string",description:t("resourceFilename","The file name of the resource")});static Dirname=new e("resourceDirname",void 0,{type:"string",description:t("resourceDirname","The folder name the resource is contained in")});static Path=new e("resourcePath",void 0,{type:"string",description:t("resourcePath","The full path of the resource")});static LangId=new e("resourceLangId",void 0,{type:"string",description:t("resourceLangId","The language identifier of the resource")});static Resource=new e("resource",void 0,{type:"URI",description:t("resource","The full value of the resource including scheme and path")});static Extension=new e("resourceExtname",void 0,{type:"string",description:t("resourceExtname","The extension name of the resource")});static HasResource=new e("resourceSet",void 0,{type:"boolean",description:t("resourceSet","Whether a resource is present or not")});static IsFileSystemResource=new e("isFileSystemResource",void 0,{type:"boolean",description:t("isFileSystemResource","Whether the resource is backed by a file system provider")});_disposables=new f;_value;_resourceKey;_schemeKey;_filenameKey;_dirnameKey;_pathKey;_langIdKey;_extensionKey;_hasResource;_isFileSystemResource;dispose(){this._disposables.dispose()}_setLangId(){const o=this.get();if(!o){this._langIdKey.set(null);return}const r=this._modelService.getModel(o)?.getLanguageId()??this._languageService.guessLanguageIdByFilepathOrFirstLine(o);this._langIdKey.set(r)}set(o){o=o??void 0,!p(this._value,o)&&(this._value=o,this._contextKeyService.bufferChangeEvents(()=>{this._resourceKey.set(o?o.toString():null),this._schemeKey.set(o?o.scheme:null),this._filenameKey.set(o?m(o):null),this._dirnameKey.set(o?this.uriToPath(v(o)):null),this._pathKey.set(o?this.uriToPath(o):null),this._setLangId(),this._extensionKey.set(o?w(o):null),this._hasResource.set(!!o),this._isFileSystemResource.set(o?this._fileService.hasProvider(o):!1)}))}uriToPath(o){return o.scheme===u.file?o.fsPath:o.path}reset(){this._value=void 0,this._contextKeyService.bufferChangeEvents(()=>{this._resourceKey.reset(),this._schemeKey.reset(),this._filenameKey.reset(),this._dirnameKey.reset(),this._pathKey.reset(),this._langIdKey.reset(),this._extensionKey.reset(),this._hasResource.reset(),this._isFileSystemResource.reset()})}get(){return this._value}};i=h([l(0,C),l(1,I),l(2,g),l(3,E)],i);function Xe(d,o,r){if(!o){d.set("");return}const a=o.resource;if(a?.scheme===u.untitled&&o.editorId!==S.id)d.set("");else{const n=a?r.getEditors(a).map(s=>s.id):[];d.set(n.join(","))}}export{Ne as ActiveAuxiliaryContext,re as ActiveCompareEditorCanSwapContext,le as ActiveEditorAvailableEditorIdsContext,se as ActiveEditorCanRevertContext,ae as ActiveEditorCanSplitInGroupContext,ne as ActiveEditorCanToggleReadonlyContext,de as ActiveEditorContext,X as ActiveEditorDirtyContext,ee as ActiveEditorFirstInGroupContext,xe as ActiveEditorGroupEmptyContext,ye as ActiveEditorGroupIndexContext,fe as ActiveEditorGroupLastContext,be as ActiveEditorGroupLockedContext,te as ActiveEditorLastInGroupContext,Y as ActiveEditorPinnedContext,ie as ActiveEditorReadonlyContext,oe as ActiveEditorStickyContext,ze as ActivePanelContext,Ge as ActiveViewletContext,Oe as AuxiliaryBarFocusContext,Ue as AuxiliaryBarVisibleContext,Le as BannerFocused,z as DirtyWorkingCopiesContext,ue as EditorGroupEditorsCountContext,Ce as EditorPartMaximizedEditorGroupContext,_ as EditorPartMultipleEditorGroupsContext,Ee as EditorPartSingleEditorGroupsContext,Ae as EditorTabsVisibleContext,Se as EditorsVisibleContext,Q as EmbedderIdentifierContext,U as EmptyWorkspaceSupportContext,O as EnterMultiRootWorkspaceSupportContext,Je as FocusedViewContext,J as HasWebFileSystemAccess,We as InEditorZenModeContext,Ie as IsAuxiliaryEditorPartContext,$ as IsAuxiliaryWindowFocusedContext,_e as IsMainEditorCenteredLayoutContext,q as IsMainWindowFullscreenContext,Te as MainEditorAreaVisibleContext,W as MultipleEditorGroupsContext,ve as MultipleEditorsSelectedInGroupContext,Be as NotificationFocusedContext,Me as NotificationsCenterVisibleContext,De as NotificationsToastsVisibleContext,N as OpenFolderWorkspaceSupportContext,He as PanelAlignmentContext,je as PanelFocusContext,$e as PanelMaximizedContext,Ze as PanelPositionContext,qe as PanelVisibleContext,j as RemoteNameContext,i as ResourceContextKey,ge as SelectedEditorsInGroupFileOrUntitledResourceContextKey,Ke as SideBarVisibleContext,he as SideBySideEditorActiveContext,ke as SidebarFocusContext,me as SingleEditorGroupsContext,Fe as SplitEditorsVertically,Ve as StatusBarFocused,H as TemporaryWorkspaceContext,pe as TextCompareEditorActiveContext,ce as TextCompareEditorVisibleContext,Pe as TitleBarStyleContext,Re as TitleBarVisibleContext,we as TwoEditorsSelectedInGroupContext,Z as VirtualWorkspaceContext,M as WorkbenchStateContext,D as WorkspaceFolderCountContext,Xe as applyAvailableEditorIds,Qe as getVisbileViewContextKey};
