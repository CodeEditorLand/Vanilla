function d(){return globalThis._VSCODE_NLS_LANGUAGE}var H=d()==="pseudo"||typeof document<"u"&&document.location&&document.location.hash.indexOf("pseudo=true")>=0;var c="en",L=!1,I=!1,x=!1,O=!1,w=!1,_=!1,k=!1,W=!1,A=!1,M=!1,p,m=c,S=c,V,i,s=globalThis,o;typeof s.vscode<"u"&&typeof s.vscode.process<"u"?o=s.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(o=process);var N=typeof o?.versions?.electron=="string",F=N&&o?.type==="renderer";if(typeof o=="object"){L=o.platform==="win32",I=o.platform==="darwin",x=o.platform==="linux",O=x&&!!o.env.SNAP&&!!o.env.SNAP_REVISION,k=N,A=!!o.env.CI||!!o.env.BUILD_ARTIFACTSTAGINGDIRECTORY,p=c,m=c;let e=o.env.VSCODE_NLS_CONFIG;if(e)try{let n=JSON.parse(e);p=n.userLocale,S=n.osLocale,m=n.resolvedLanguage||c,V=n.languagePack?.translationsConfigFile}catch{}w=!0}else typeof navigator=="object"&&!F?(i=navigator.userAgent,L=i.indexOf("Windows")>=0,I=i.indexOf("Macintosh")>=0,W=(i.indexOf("Macintosh")>=0||i.indexOf("iPad")>=0||i.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,x=i.indexOf("Linux")>=0,M=i?.indexOf("Mobi")>=0,_=!0,m=d()||c,p=navigator.language.toLowerCase(),S=p):console.error("Unable to resolve platform.");var E=0;I?E=1:L?E=3:x&&(E=2);var z=_&&typeof s.importScripts=="function",$=z?s.origin:void 0;var r=i,a=m,T;(t=>{function e(){return a}t.value=e;function n(){return a.length===2?a==="en":a.length>=3?a[0]==="e"&&a[1]==="n"&&a[2]==="-":!1}t.isDefaultVariant=n;function l(){return a==="en"}t.isDefault=l})(T||={});var K=typeof s.postMessage=="function"&&!s.importScripts,B=(()=>{if(K){let e=[];s.addEventListener("message",l=>{if(l.data&&l.data.vscodeScheduleAsyncWork)for(let t=0,P=e.length;t<P;t++){let y=e[t];if(y.id===l.data.vscodeScheduleAsyncWork){e.splice(t,1),y.callback();return}}});let n=0;return l=>{let t=++n;e.push({id:t,callback:l}),s.postMessage({vscodeScheduleAsyncWork:t},"*")}}return e=>setTimeout(e)})();var D=!!(r&&r.indexOf("Chrome")>=0),j=!!(r&&r.indexOf("Firefox")>=0),Q=!!(!D&&r&&r.indexOf("Safari")>=0),X=!!(r&&r.indexOf("Edg/")>=0),J=!!(r&&r.indexOf("Android")>=0);var Y=(t=>(t[t.IPC=1]="IPC",t[t.Socket=2]="Socket",t[t.MessagePort=3]="MessagePort",t))(Y||{}),u=class e{constructor(n){this.pipeName=n}static ENV_KEY="VSCODE_EXTHOST_IPC_HOOK";type=1;serialize(n){n[e.ENV_KEY]=this.pipeName}},g=class e{static ENV_KEY="VSCODE_EXTHOST_WILL_SEND_SOCKET";type=2;serialize(n){n[e.ENV_KEY]="1"}},f=class e{static ENV_KEY="VSCODE_WILL_SEND_MESSAGE_PORT";type=3;serialize(n){n[e.ENV_KEY]="1"}};function v(e){delete e[u.ENV_KEY],delete e[g.ENV_KEY],delete e[f.ENV_KEY]}function ne(e,n){v(n),e.serialize(n)}function te(e){if(e[u.ENV_KEY])return b(e,new u(e[u.ENV_KEY]));if(e[g.ENV_KEY])return b(e,new g);if(e[f.ENV_KEY])return b(e,new f);throw new Error("No connection information defined in environment!")}function b(e,n){return v(e),n}export{Y as ExtHostConnectionType,u as IPCExtHostConnection,f as MessagePortExtHostConnection,g as SocketExtHostConnection,te as readExtHostConnection,ne as writeExtHostConnection};
