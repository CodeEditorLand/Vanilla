{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/services/languageStatus/common/languageStatusService.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { CancellationToken } from \"../../../../base/common/cancellation.js\";\nimport type { Event } from \"../../../../base/common/event.js\";\nimport type { IDisposable } from \"../../../../base/common/lifecycle.js\";\nimport type Severity from \"../../../../base/common/severity.js\";\nimport { compare } from \"../../../../base/common/strings.js\";\nimport { LanguageFeatureRegistry } from \"../../../../editor/common/languageFeatureRegistry.js\";\nimport type { LanguageSelector } from \"../../../../editor/common/languageSelector.js\";\nimport type { Command } from \"../../../../editor/common/languages.js\";\nimport type { ITextModel } from \"../../../../editor/common/model.js\";\nimport type { IAccessibilityInformation } from \"../../../../platform/accessibility/common/accessibility.js\";\nimport {\n\tInstantiationType,\n\tregisterSingleton,\n} from \"../../../../platform/instantiation/common/extensions.js\";\nimport { createDecorator } from \"../../../../platform/instantiation/common/instantiation.js\";\n\nexport interface ILanguageStatus {\n\treadonly id: string;\n\treadonly name: string;\n\treadonly selector: LanguageSelector;\n\treadonly severity: Severity;\n\treadonly label: string | { value: string; shortValue: string };\n\treadonly detail: string;\n\treadonly busy: boolean;\n\treadonly source: string;\n\treadonly command: Command | undefined;\n\treadonly accessibilityInfo: IAccessibilityInformation | undefined;\n}\n\nexport interface ILanguageStatusProvider {\n\tprovideLanguageStatus(\n\t\tlangId: string,\n\t\ttoken: CancellationToken,\n\t): Promise<ILanguageStatus | undefined>;\n}\n\nexport const ILanguageStatusService = createDecorator<ILanguageStatusService>(\n\t\"ILanguageStatusService\",\n);\n\nexport interface ILanguageStatusService {\n\t_serviceBrand: undefined;\n\n\tonDidChange: Event<void>;\n\n\taddStatus(status: ILanguageStatus): IDisposable;\n\n\tgetLanguageStatus(model: ITextModel): ILanguageStatus[];\n}\n\nclass LanguageStatusServiceImpl implements ILanguageStatusService {\n\tdeclare _serviceBrand: undefined;\n\n\tprivate readonly _provider = new LanguageFeatureRegistry<ILanguageStatus>();\n\n\treadonly onDidChange: Event<any> = this._provider.onDidChange;\n\n\taddStatus(status: ILanguageStatus): IDisposable {\n\t\treturn this._provider.register(status.selector, status);\n\t}\n\n\tgetLanguageStatus(model: ITextModel): ILanguageStatus[] {\n\t\treturn this._provider.ordered(model).sort((a, b) => {\n\t\t\tlet res = b.severity - a.severity;\n\t\t\tif (res === 0) {\n\t\t\t\tres = compare(a.source, b.source);\n\t\t\t}\n\t\t\tif (res === 0) {\n\t\t\t\tres = compare(a.id, b.id);\n\t\t\t}\n\t\t\treturn res;\n\t\t});\n\t}\n}\n\nregisterSingleton(\n\tILanguageStatusService,\n\tLanguageStatusServiceImpl,\n\tInstantiationType.Delayed,\n);\n"],
  "mappings": ";;AASA,SAAS,eAAe;AACxB,SAAS,+BAA+B;AAKxC;AAAA,EACC;AAAA,EACA;AAAA,OACM;AACP,SAAS,uBAAuB;AAsBzB,MAAM,yBAAyB;AAAA,EACrC;AACD;AAYA,MAAM,0BAA4D;AAAA,EAvDlE,OAuDkE;AAAA;AAAA;AAAA,EAGhD,YAAY,IAAI,wBAAyC;AAAA,EAEjE,cAA0B,KAAK,UAAU;AAAA,EAElD,UAAU,QAAsC;AAC/C,WAAO,KAAK,UAAU,SAAS,OAAO,UAAU,MAAM;AAAA,EACvD;AAAA,EAEA,kBAAkB,OAAsC;AACvD,WAAO,KAAK,UAAU,QAAQ,KAAK,EAAE,KAAK,CAAC,GAAG,MAAM;AACnD,UAAI,MAAM,EAAE,WAAW,EAAE;AACzB,UAAI,QAAQ,GAAG;AACd,cAAM,QAAQ,EAAE,QAAQ,EAAE,MAAM;AAAA,MACjC;AACA,UAAI,QAAQ,GAAG;AACd,cAAM,QAAQ,EAAE,IAAI,EAAE,EAAE;AAAA,MACzB;AACA,aAAO;AAAA,IACR,CAAC;AAAA,EACF;AACD;AAEA;AAAA,EACC;AAAA,EACA;AAAA,EACA,kBAAkB;AACnB;",
  "names": []
}
