var l=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var t=(g,a,o,s)=>{for(var r=s>1?void 0:s?f(a,o):a,u=g.length-1,d;u>=0;u--)(d=g[u])&&(r=(s?d(a,o,r):d(r))||r);return s&&r&&l(a,o,r),r};import"../../../../base/common/performance.js";import"../browser/environmentService.js";import"../../../../platform/window/common/window.js";import{IEnvironmentService as m}from"../../../../platform/environment/common/environment.js";import{refineServiceDecorator as p}from"../../../../platform/instantiation/common/instantiation.js";import{AbstractNativeEnvironmentService as h}from"../../../../platform/environment/common/environmentService.js";import{memoize as e}from"../../../../base/common/decorators.js";import"../../../../base/common/uri.js";import{Schemas as I}from"../../../../base/common/network.js";import"../../../../platform/product/common/productService.js";import{joinPath as n}from"../../../../base/common/resources.js";const j=p(m);class i extends h{constructor(o,s){super(o,{homeDir:o.homeDir,tmpDir:o.tmpDir,userDataDir:o.userDataDir},s);this.configuration=o}get mainPid(){return this.configuration.mainPid}get machineId(){return this.configuration.machineId}get sqmId(){return this.configuration.sqmId}get devDeviceId(){return this.configuration.devDeviceId}get remoteAuthority(){return this.configuration.remoteAuthority}get expectsResolverExtension(){return!!this.configuration.remoteAuthority?.includes("+")}get execPath(){return this.configuration.execPath}get backupPath(){return this.configuration.backupPath}get window(){return{id:this.configuration.windowId,colorScheme:this.configuration.colorScheme,maximized:this.configuration.maximized,accessibilitySupport:this.configuration.accessibilitySupport,perfMarks:this.configuration.perfMarks,isInitialStartup:this.configuration.isInitialStartup,isCodeCaching:typeof this.configuration.codeCachePath=="string"}}get windowLogsPath(){return n(this.logsHome,`window${this.configuration.windowId}`)}get logFile(){return n(this.windowLogsPath,"renderer.log")}get extHostLogsPath(){return n(this.windowLogsPath,"exthost")}get extHostTelemetryLogFile(){return n(this.extHostLogsPath,"extensionTelemetry.log")}get webviewExternalEndpoint(){return`${I.vscodeWebview}://{{uuid}}`}get skipReleaseNotes(){return!!this.args["skip-release-notes"]}get skipWelcome(){return!!this.args["skip-welcome"]}get logExtensionHostCommunication(){return!!this.args.logExtensionHostCommunication}get enableSmokeTestDriver(){return!!this.args["enable-smoke-test-driver"]}get extensionEnabledProposedApi(){if(Array.isArray(this.args["enable-proposed-api"]))return this.args["enable-proposed-api"];if("enable-proposed-api"in this.args)return[]}get os(){return this.configuration.os}get filesToOpenOrCreate(){return this.configuration.filesToOpenOrCreate}get filesToDiff(){return this.configuration.filesToDiff}get filesToMerge(){return this.configuration.filesToMerge}get filesToWait(){return this.configuration.filesToWait}}t([e],i.prototype,"mainPid",1),t([e],i.prototype,"machineId",1),t([e],i.prototype,"sqmId",1),t([e],i.prototype,"devDeviceId",1),t([e],i.prototype,"remoteAuthority",1),t([e],i.prototype,"expectsResolverExtension",1),t([e],i.prototype,"execPath",1),t([e],i.prototype,"backupPath",1),t([e],i.prototype,"window",1),t([e],i.prototype,"windowLogsPath",1),t([e],i.prototype,"logFile",1),t([e],i.prototype,"extHostLogsPath",1),t([e],i.prototype,"extHostTelemetryLogFile",1),t([e],i.prototype,"webviewExternalEndpoint",1),t([e],i.prototype,"skipReleaseNotes",1),t([e],i.prototype,"skipWelcome",1),t([e],i.prototype,"logExtensionHostCommunication",1),t([e],i.prototype,"enableSmokeTestDriver",1),t([e],i.prototype,"extensionEnabledProposedApi",1),t([e],i.prototype,"os",1),t([e],i.prototype,"filesToOpenOrCreate",1),t([e],i.prototype,"filesToDiff",1),t([e],i.prototype,"filesToMerge",1),t([e],i.prototype,"filesToWait",1);export{j as INativeWorkbenchEnvironmentService,i as NativeWorkbenchEnvironmentService};
