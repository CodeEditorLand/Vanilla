var d=Object.defineProperty;var m=Object.getOwnPropertyDescriptor;var c=(o,r,e,t)=>{for(var s=t>1?void 0:t?m(r,e):r,n=o.length-1,a;n>=0;n--)(a=o[n])&&(s=(t?a(r,e,s):a(s))||s);return t&&s&&d(r,e,s),s},f=(o,r)=>(e,t)=>r(e,t,o);import{IClipboardService as p}from"../../../../platform/clipboard/common/clipboardService.js";import{URI as l}from"../../../../base/common/uri.js";import{isMacintosh as u}from"../../../../base/common/platform.js";import{InstantiationType as v,registerSingleton as T}from"../../../../platform/instantiation/common/extensions.js";import{INativeHostService as I}from"../../../../platform/native/common/native.js";import{VSBuffer as h}from"../../../../base/common/buffer.js";let i=class{constructor(r){this.nativeHostService=r}static FILE_FORMAT="code/file-list";async readImage(){return this.nativeHostService.readImage()}async writeText(r,e){return this.nativeHostService.writeClipboardText(r,e)}async readText(r){return this.nativeHostService.readClipboardText(r)}async readFindText(){return u?this.nativeHostService.readClipboardFindText():""}async writeFindText(r){if(u)return this.nativeHostService.writeClipboardFindText(r)}async writeResources(r){if(r.length)return this.nativeHostService.writeClipboardBuffer(i.FILE_FORMAT,this.resourcesToBuffer(r))}async readResources(){return this.bufferToResources(await this.nativeHostService.readClipboardBuffer(i.FILE_FORMAT))}async hasResources(){return this.nativeHostService.hasClipboard(i.FILE_FORMAT)}resourcesToBuffer(r){return h.fromString(r.map(e=>e.toString()).join(`
`))}bufferToResources(r){if(!r)return[];const e=r.toString();if(!e)return[];try{return e.split(`
`).map(t=>l.parse(t))}catch{return[]}}};i=c([f(0,I)],i),T(p,i,v.Delayed);export{i as NativeClipboardService};
