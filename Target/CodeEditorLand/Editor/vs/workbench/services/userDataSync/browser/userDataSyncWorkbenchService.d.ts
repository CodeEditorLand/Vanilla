import { Disposable } from "vs/base/common/lifecycle";
import { URI } from "vs/base/common/uri";
import { IContextKeyService } from "vs/platform/contextkey/common/contextkey";
import { IDialogService, IFileDialogService } from "vs/platform/dialogs/common/dialogs";
import { IFileService } from "vs/platform/files/common/files";
import { IInstantiationService } from "vs/platform/instantiation/common/instantiation";
import { ILogService } from "vs/platform/log/common/log";
import { INotificationService } from "vs/platform/notification/common/notification";
import { IProductService } from "vs/platform/product/common/productService";
import { IProgressService } from "vs/platform/progress/common/progress";
import { IQuickInputService } from "vs/platform/quickinput/common/quickInput";
import { ISecretStorageService } from "vs/platform/secrets/common/secrets";
import { IStorageService } from "vs/platform/storage/common/storage";
import { ITelemetryService } from "vs/platform/telemetry/common/telemetry";
import { IUriIdentityService } from "vs/platform/uriIdentity/common/uriIdentity";
import { IResourcePreview, IUserDataAutoSyncService, IUserDataSyncEnablementService, IUserDataSyncResource, IUserDataSyncService, IUserDataSyncStoreManagementService } from "vs/platform/userDataSync/common/userDataSync";
import { IUserDataSyncAccountService } from "vs/platform/userDataSync/common/userDataSyncAccount";
import { IUserDataSyncMachinesService } from "vs/platform/userDataSync/common/userDataSyncMachines";
import { IViewDescriptorService } from "vs/workbench/common/views";
import { AuthenticationSession, IAuthenticationService } from "vs/workbench/services/authentication/common/authentication";
import { IEditorService } from "vs/workbench/services/editor/common/editorService";
import { IBrowserWorkbenchEnvironmentService } from "vs/workbench/services/environment/browser/environmentService";
import { IExtensionService } from "vs/workbench/services/extensions/common/extensions";
import { ILifecycleService } from "vs/workbench/services/lifecycle/common/lifecycle";
import { IUserDataInitializationService } from "vs/workbench/services/userData/browser/userDataInit";
import { AccountStatus, IUserDataSyncAccount, IUserDataSyncWorkbenchService } from "vs/workbench/services/userDataSync/common/userDataSync";
import { IViewsService } from "vs/workbench/services/views/common/viewsService";
declare class UserDataSyncAccount implements IUserDataSyncAccount {
    readonly authenticationProviderId: string;
    private readonly session;
    constructor(authenticationProviderId: string, session: AuthenticationSession);
    get sessionId(): string;
    get accountName(): string;
    get accountId(): string;
    get token(): string;
}
type MergeEditorInput = {
    base: URI;
    input1: {
        uri: URI;
    };
    input2: {
        uri: URI;
    };
    result: URI;
};
export declare function isMergeEditorInput(editor: unknown): editor is MergeEditorInput;
export declare class UserDataSyncWorkbenchService extends Disposable implements IUserDataSyncWorkbenchService {
    private readonly userDataSyncService;
    private readonly uriIdentityService;
    private readonly authenticationService;
    private readonly userDataSyncAccountService;
    private readonly quickInputService;
    private readonly storageService;
    private readonly userDataSyncEnablementService;
    private readonly userDataAutoSyncService;
    private readonly telemetryService;
    private readonly logService;
    private readonly productService;
    private readonly extensionService;
    private readonly environmentService;
    private readonly secretStorageService;
    private readonly notificationService;
    private readonly progressService;
    private readonly dialogService;
    private readonly viewsService;
    private readonly viewDescriptorService;
    private readonly userDataSyncStoreManagementService;
    private readonly lifecycleService;
    private readonly instantiationService;
    private readonly editorService;
    private readonly userDataInitializationService;
    private readonly fileService;
    private readonly fileDialogService;
    private readonly userDataSyncMachinesService;
    _serviceBrand: any;
    private static DONOT_USE_WORKBENCH_SESSION_STORAGE_KEY;
    private static CACHED_AUTHENTICATION_PROVIDER_KEY;
    private static CACHED_SESSION_STORAGE_KEY;
    get enabled(): boolean;
    private _authenticationProviders;
    get authenticationProviders(): IAuthenticationProvider[];
    private _accountStatus;
    get accountStatus(): AccountStatus;
    private readonly _onDidChangeAccountStatus;
    readonly onDidChangeAccountStatus: any;
    private _current;
    get current(): UserDataSyncAccount | undefined;
    private readonly syncEnablementContext;
    private readonly syncStatusContext;
    private readonly accountStatusContext;
    private readonly enableConflictsViewContext;
    private readonly hasConflicts;
    private readonly activityViewsEnablementContext;
    private turnOnSyncCancellationToken;
    constructor(userDataSyncService: IUserDataSyncService, uriIdentityService: IUriIdentityService, authenticationService: IAuthenticationService, userDataSyncAccountService: IUserDataSyncAccountService, quickInputService: IQuickInputService, storageService: IStorageService, userDataSyncEnablementService: IUserDataSyncEnablementService, userDataAutoSyncService: IUserDataAutoSyncService, telemetryService: ITelemetryService, logService: ILogService, productService: IProductService, extensionService: IExtensionService, environmentService: IBrowserWorkbenchEnvironmentService, secretStorageService: ISecretStorageService, notificationService: INotificationService, progressService: IProgressService, dialogService: IDialogService, contextKeyService: IContextKeyService, viewsService: IViewsService, viewDescriptorService: IViewDescriptorService, userDataSyncStoreManagementService: IUserDataSyncStoreManagementService, lifecycleService: ILifecycleService, instantiationService: IInstantiationService, editorService: IEditorService, userDataInitializationService: IUserDataInitializationService, fileService: IFileService, fileDialogService: IFileDialogService, userDataSyncMachinesService: IUserDataSyncMachinesService);
    private updateAuthenticationProviders;
    private isSupportedAuthenticationProviderId;
    private waitAndInitialize;
    private initialize;
    private update;
    private updateCurrentAccount;
    private updateToken;
    private updateAccountStatus;
    turnOn(): Promise<void>;
    turnoff(everywhere: boolean): Promise<void>;
    synchroniseUserDataSyncStoreType(): Promise<void>;
    syncNow(): Promise<void>;
    private doTurnOnSync;
    private handleConflictsWhileTurningOn;
    private replace;
    accept(resource: IUserDataSyncResource, conflictResource: URI, content: string | null | undefined, apply: boolean | {
        force: boolean;
    }): Promise<void>;
    showConflicts(conflictToOpen?: IResourcePreview): Promise<void>;
    resetSyncedData(): Promise<void>;
    getAllLogResources(): Promise<URI[]>;
    showSyncActivity(): Promise<void>;
    downloadSyncActivity(): Promise<URI | undefined>;
    private waitForActiveSyncViews;
    signIn(): Promise<void>;
    private pick;
    private doPick;
    private getAccounts;
    private createQuickpickItems;
    private doSignIn;
    private onDidAuthFailure;
    private onDidChangeSessions;
    private onDidChangeStorage;
    private _cachedCurrentAuthenticationProviderId;
    private get currentAuthenticationProviderId();
    private set currentAuthenticationProviderId(value);
    private _cachedCurrentSessionId;
    private get currentSessionId();
    private set currentSessionId(value);
    private getStoredCachedSessionId;
    private get useWorkbenchSessionId();
    private set useWorkbenchSessionId(value);
}
export {};
