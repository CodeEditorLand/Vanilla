var d=Object.defineProperty;var l=Object.getOwnPropertyDescriptor;var g=(o,e,t,r)=>{for(var i=r>1?void 0:r?l(e,t):e,n=o.length-1,a;n>=0;n--)(a=o[n])&&(i=(r?a(e,t,i):a(i))||i);return r&&i&&d(e,t,i),i},s=(o,e)=>(t,r)=>e(t,r,o);import"../../../../base/common/collections.js";import"../../../../base/common/jsonFormatter.js";import"../../../../base/common/uri.js";import{ITextModelService as S}from"../../../../editor/common/services/resolverService.js";import{ITextResourceConfigurationService as p,ITextResourcePropertiesService as m}from"../../../../editor/common/services/textResourceConfiguration.js";import{InstantiationType as v,registerSingleton as u}from"../../../../platform/instantiation/common/extensions.js";import{IKeybindingService as f}from"../../../../platform/keybinding/common/keybinding.js";import{getDefaultIgnoredSettings as y,IUserDataSyncUtilService as I}from"../../../../platform/userDataSync/common/userDataSync.js";let c=class{constructor(e,t,r,i){this.keybindingsService=e;this.textModelService=t;this.textResourcePropertiesService=r;this.textResourceConfigurationService=i}async resolveDefaultCoreIgnoredSettings(){return y(!0)}async resolveUserBindings(e){const t={};for(const r of e)t[r]=this.keybindingsService.resolveUserBinding(r).map(i=>i.getUserSettingsLabel()).join(" ");return t}async resolveFormattingOptions(e){try{const t=await this.textModelService.createModelReference(e),{insertSpaces:r,tabSize:i}=t.object.textEditorModel.getOptions(),n=t.object.textEditorModel.getEOL();return t.dispose(),{eol:n,insertSpaces:r,tabSize:i}}catch{}return{eol:this.textResourcePropertiesService.getEOL(e),insertSpaces:!!this.textResourceConfigurationService.getValue(e,"editor.insertSpaces"),tabSize:this.textResourceConfigurationService.getValue(e,"editor.tabSize")}}};c=g([s(0,f),s(1,S),s(2,m),s(3,p)],c),u(I,c,v.Delayed);
