var m=Object.defineProperty;var d=Object.getOwnPropertyDescriptor;var g=(o,e,t,r)=>{for(var i=r>1?void 0:r?d(e,t):e,n=o.length-1,a;n>=0;n--)(a=o[n])&&(i=(r?a(e,t,i):a(i))||i);return r&&i&&m(e,t,i),i},s=(o,e)=>(t,r)=>e(t,r,o);import{ITextModelService as l}from"../../../../editor/common/services/resolverService.js";import{ITextResourceConfigurationService as p,ITextResourcePropertiesService as S}from"../../../../editor/common/services/textResourceConfiguration.js";import{InstantiationType as v,registerSingleton as u}from"../../../../platform/instantiation/common/extensions.js";import{IKeybindingService as y}from"../../../../platform/keybinding/common/keybinding.js";import{IUserDataSyncUtilService as f,getDefaultIgnoredSettings as I}from"../../../../platform/userDataSync/common/userDataSync.js";let c=class{constructor(e,t,r,i){this.keybindingsService=e;this.textModelService=t;this.textResourcePropertiesService=r;this.textResourceConfigurationService=i}async resolveDefaultCoreIgnoredSettings(){return I(!0)}async resolveUserBindings(e){const t={};for(const r of e)t[r]=this.keybindingsService.resolveUserBinding(r).map(i=>i.getUserSettingsLabel()).join(" ");return t}async resolveFormattingOptions(e){try{const t=await this.textModelService.createModelReference(e),{insertSpaces:r,tabSize:i}=t.object.textEditorModel.getOptions(),n=t.object.textEditorModel.getEOL();return t.dispose(),{eol:n,insertSpaces:r,tabSize:i}}catch{}return{eol:this.textResourcePropertiesService.getEOL(e),insertSpaces:!!this.textResourceConfigurationService.getValue(e,"editor.insertSpaces"),tabSize:this.textResourceConfigurationService.getValue(e,"editor.tabSize")}}};c=g([s(0,y),s(1,l),s(2,S),s(3,p)],c),u(f,c,v.Delayed);
