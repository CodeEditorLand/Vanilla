{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/services/userDataSync/common/userDataSyncUtil.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { IStringDictionary } from \"../../../../base/common/collections.js\";\nimport type { FormattingOptions } from \"../../../../base/common/jsonFormatter.js\";\nimport type { URI } from \"../../../../base/common/uri.js\";\nimport { ITextModelService } from \"../../../../editor/common/services/resolverService.js\";\nimport {\n\tITextResourceConfigurationService,\n\tITextResourcePropertiesService,\n} from \"../../../../editor/common/services/textResourceConfiguration.js\";\nimport {\n\tInstantiationType,\n\tregisterSingleton,\n} from \"../../../../platform/instantiation/common/extensions.js\";\nimport { IKeybindingService } from \"../../../../platform/keybinding/common/keybinding.js\";\nimport {\n\tIUserDataSyncUtilService,\n\tgetDefaultIgnoredSettings,\n} from \"../../../../platform/userDataSync/common/userDataSync.js\";\n\nclass UserDataSyncUtilService implements IUserDataSyncUtilService {\n\tdeclare readonly _serviceBrand: undefined;\n\n\tconstructor(\n\t\t@IKeybindingService\n\t\tprivate readonly keybindingsService: IKeybindingService,\n\t\t@ITextModelService private readonly textModelService: ITextModelService,\n\t\t@ITextResourcePropertiesService\n\t\tprivate readonly textResourcePropertiesService: ITextResourcePropertiesService,\n\t\t@ITextResourceConfigurationService\n\t\tprivate readonly textResourceConfigurationService: ITextResourceConfigurationService,\n\t) {}\n\n\tasync resolveDefaultCoreIgnoredSettings(): Promise<string[]> {\n\t\treturn getDefaultIgnoredSettings(true);\n\t}\n\n\tasync resolveUserBindings(\n\t\tuserBindings: string[],\n\t): Promise<IStringDictionary<string>> {\n\t\tconst keys: IStringDictionary<string> = {};\n\t\tfor (const userbinding of userBindings) {\n\t\t\tkeys[userbinding] = this.keybindingsService\n\t\t\t\t.resolveUserBinding(userbinding)\n\t\t\t\t.map((part) => part.getUserSettingsLabel())\n\t\t\t\t.join(\" \");\n\t\t}\n\t\treturn keys;\n\t}\n\n\tasync resolveFormattingOptions(resource: URI): Promise<FormattingOptions> {\n\t\ttry {\n\t\t\tconst modelReference =\n\t\t\t\tawait this.textModelService.createModelReference(resource);\n\t\t\tconst { insertSpaces, tabSize } =\n\t\t\t\tmodelReference.object.textEditorModel.getOptions();\n\t\t\tconst eol = modelReference.object.textEditorModel.getEOL();\n\t\t\tmodelReference.dispose();\n\t\t\treturn { eol, insertSpaces, tabSize };\n\t\t} catch (e) {}\n\t\treturn {\n\t\t\teol: this.textResourcePropertiesService.getEOL(resource),\n\t\t\tinsertSpaces: !!this.textResourceConfigurationService.getValue(\n\t\t\t\tresource,\n\t\t\t\t\"editor.insertSpaces\",\n\t\t\t),\n\t\t\ttabSize: this.textResourceConfigurationService.getValue(\n\t\t\t\tresource,\n\t\t\t\t\"editor.tabSize\",\n\t\t\t),\n\t\t};\n\t}\n}\n\nregisterSingleton(\n\tIUserDataSyncUtilService,\n\tUserDataSyncUtilService,\n\tInstantiationType.Delayed,\n);\n"],
  "mappings": ";;;;;;;;;;;;AAQA,SAAS,yBAAyB;AAClC;AAAA,EACC;AAAA,EACA;AAAA,OACM;AACP;AAAA,EACC;AAAA,EACA;AAAA,OACM;AACP,SAAS,0BAA0B;AACnC;AAAA,EACC;AAAA,EACA;AAAA,OACM;AAEP,IAAM,0BAAN,MAAkE;AAAA,EAGjE,YAEkB,oBACmB,kBAEnB,+BAEA,kCAChB;AANgB;AACmB;AAEnB;AAEA;AAAA,EACf;AAAA,EAlCJ,OAuBkE;AAAA;AAAA;AAAA,EAajE,MAAM,oCAAuD;AAC5D,WAAO,0BAA0B,IAAI;AAAA,EACtC;AAAA,EAEA,MAAM,oBACL,cACqC;AACrC,UAAM,OAAkC,CAAC;AACzC,eAAW,eAAe,cAAc;AACvC,WAAK,WAAW,IAAI,KAAK,mBACvB,mBAAmB,WAAW,EAC9B,IAAI,CAAC,SAAS,KAAK,qBAAqB,CAAC,EACzC,KAAK,GAAG;AAAA,IACX;AACA,WAAO;AAAA,EACR;AAAA,EAEA,MAAM,yBAAyB,UAA2C;AACzE,QAAI;AACH,YAAM,iBACL,MAAM,KAAK,iBAAiB,qBAAqB,QAAQ;AAC1D,YAAM,EAAE,cAAc,QAAQ,IAC7B,eAAe,OAAO,gBAAgB,WAAW;AAClD,YAAM,MAAM,eAAe,OAAO,gBAAgB,OAAO;AACzD,qBAAe,QAAQ;AACvB,aAAO,EAAE,KAAK,cAAc,QAAQ;AAAA,IACrC,SAAS,GAAG;AAAA,IAAC;AACb,WAAO;AAAA,MACN,KAAK,KAAK,8BAA8B,OAAO,QAAQ;AAAA,MACvD,cAAc,CAAC,CAAC,KAAK,iCAAiC;AAAA,QACrD;AAAA,QACA;AAAA,MACD;AAAA,MACA,SAAS,KAAK,iCAAiC;AAAA,QAC9C;AAAA,QACA;AAAA,MACD;AAAA,IACD;AAAA,EACD;AACD;AApDM,0BAAN;AAAA,EAIG;AAAA,EAEA;AAAA,EACA;AAAA,EAEA;AAAA,GATG;AAsDN;AAAA,EACC;AAAA,EACA;AAAA,EACA,kBAAkB;AACnB;",
  "names": []
}
