var y=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var s=(a,t,r,i)=>{for(var o=i>1?void 0:i?D(t,r):t,n=a.length-1,m;n>=0;n--)(m=a[n])&&(o=(i?m(t,r,o):m(o))||o);return i&&o&&y(t,r,o),o},e=(a,t)=>(r,i)=>t(r,i,a);import{generateUuid as h}from"../../../../base/common/uuid.js";import{IExtensionGalleryService as M}from"../../../../platform/extensionManagement/common/extensionManagement.js";import"../../../../base/common/uri.js";import{ExtensionManagementService as P}from"../common/extensionManagementService.js";import{InstantiationType as U,registerSingleton as w}from"../../../../platform/instantiation/common/extensions.js";import{IExtensionManagementServerService as b,IWorkbenchExtensionManagementService as k}from"../common/extensionManagement.js";import{Schemas as L}from"../../../../base/common/network.js";import{IConfigurationService as R}from"../../../../platform/configuration/common/configuration.js";import{IDownloadService as T}from"../../../../platform/download/common/download.js";import{IProductService as W}from"../../../../platform/product/common/productService.js";import{INativeWorkbenchEnvironmentService as q}from"../../environment/electron-sandbox/environmentService.js";import{joinPath as C}from"../../../../base/common/resources.js";import{IUserDataSyncEnablementService as F}from"../../../../platform/userDataSync/common/userDataSync.js";import{IDialogService as G}from"../../../../platform/dialogs/common/dialogs.js";import{IWorkspaceTrustRequestService as N}from"../../../../platform/workspace/common/workspaceTrust.js";import{IExtensionManifestPropertiesService as O}from"../../extensions/common/extensionManifestPropertiesService.js";import{IInstantiationService as V}from"../../../../platform/instantiation/common/instantiation.js";import{IFileService as X}from"../../../../platform/files/common/files.js";import{ILogService as j}from"../../../../platform/log/common/log.js";import{IUserDataProfileService as B}from"../../userDataProfile/common/userDataProfile.js";import{IExtensionsScannerService as z}from"../../../../platform/extensionManagement/common/extensionsScannerService.js";import{ITelemetryService as A}from"../../../../platform/telemetry/common/telemetry.js";let c=class extends P{constructor(r,i,o,n,m,S,v,I,l,p,f,d,E,g,u,x){super(i,o,n,m,S,v,I,l,p,f,d,E,g,u,x);this.environmentService=r}async installVSIXInServer(r,i,o){if(r.scheme===L.vscodeRemote&&i===this.extensionManagementServerService.localExtensionManagementServer){const n=C(this.environmentService.tmpDir,h());await this.downloadService.download(r,n),r=n}return super.installVSIXInServer(r,i,o)}};c=s([e(0,q),e(1,b),e(2,M),e(3,B),e(4,R),e(5,W),e(6,T),e(7,F),e(8,G),e(9,N),e(10,O),e(11,X),e(12,j),e(13,V),e(14,z),e(15,A)],c),w(k,c,U.Delayed);export{c as ExtensionManagementService};
