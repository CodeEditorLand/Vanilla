var x=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var s=(a,t,r,i)=>{for(var o=i>1?void 0:i?D(t,r):t,n=a.length-1,m;n>=0;n--)(m=a[n])&&(o=(i?m(t,r,o):m(o))||o);return i&&o&&x(t,r,o),o},e=(a,t)=>(r,i)=>t(r,i,a);import{Schemas as h}from"../../../../base/common/network.js";import{joinPath as M}from"../../../../base/common/resources.js";import{generateUuid as P}from"../../../../base/common/uuid.js";import{IConfigurationService as U}from"../../../../platform/configuration/common/configuration.js";import{IDialogService as b}from"../../../../platform/dialogs/common/dialogs.js";import{IDownloadService as w}from"../../../../platform/download/common/download.js";import{IExtensionGalleryService as k}from"../../../../platform/extensionManagement/common/extensionManagement.js";import{IExtensionsScannerService as L}from"../../../../platform/extensionManagement/common/extensionsScannerService.js";import{IFileService as R}from"../../../../platform/files/common/files.js";import{InstantiationType as T,registerSingleton as W}from"../../../../platform/instantiation/common/extensions.js";import{IInstantiationService as j}from"../../../../platform/instantiation/common/instantiation.js";import{ILogService as q}from"../../../../platform/log/common/log.js";import{IProductService as C}from"../../../../platform/product/common/productService.js";import{ITelemetryService as F}from"../../../../platform/telemetry/common/telemetry.js";import{IUserDataSyncEnablementService as G}from"../../../../platform/userDataSync/common/userDataSync.js";import{IWorkspaceTrustRequestService as N}from"../../../../platform/workspace/common/workspaceTrust.js";import{INativeWorkbenchEnvironmentService as O}from"../../environment/electron-sandbox/environmentService.js";import{IExtensionManifestPropertiesService as V}from"../../extensions/common/extensionManifestPropertiesService.js";import{IUserDataProfileService as X}from"../../userDataProfile/common/userDataProfile.js";import{IExtensionManagementServerService as B,IWorkbenchExtensionManagementService as z}from"../common/extensionManagement.js";import{ExtensionManagementService as A}from"../common/extensionManagementService.js";let c=class extends A{constructor(r,i,o,n,m,S,v,I,p,l,f,d,E,g,u,y){super(i,o,n,m,S,v,I,p,l,f,d,E,g,u,y);this.environmentService=r}async installVSIXInServer(r,i,o){if(r.scheme===h.vscodeRemote&&i===this.extensionManagementServerService.localExtensionManagementServer){const n=M(this.environmentService.tmpDir,P());await this.downloadService.download(r,n),r=n}return super.installVSIXInServer(r,i,o)}};c=s([e(0,O),e(1,B),e(2,k),e(3,X),e(4,U),e(5,C),e(6,w),e(7,G),e(8,b),e(9,N),e(10,V),e(11,R),e(12,q),e(13,j),e(14,L),e(15,F)],c),W(z,c,T.Delayed);export{c as ExtensionManagementService};
