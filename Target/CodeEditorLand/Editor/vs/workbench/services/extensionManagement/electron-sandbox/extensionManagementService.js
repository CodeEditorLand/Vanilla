var y=Object.defineProperty;var D=Object.getOwnPropertyDescriptor;var s=(a,t,r,i)=>{for(var o=i>1?void 0:i?D(t,r):t,n=a.length-1,m;n>=0;n--)(m=a[n])&&(o=(i?m(t,r,o):m(o))||o);return i&&o&&y(t,r,o),o},e=(a,t)=>(r,i)=>t(r,i,a);import{Schemas as h}from"../../../../../vs/base/common/network.js";import{joinPath as M}from"../../../../../vs/base/common/resources.js";import"../../../../../vs/base/common/uri.js";import{generateUuid as P}from"../../../../../vs/base/common/uuid.js";import{IConfigurationService as U}from"../../../../../vs/platform/configuration/common/configuration.js";import{IDialogService as w}from"../../../../../vs/platform/dialogs/common/dialogs.js";import{IDownloadService as b}from"../../../../../vs/platform/download/common/download.js";import{IExtensionGalleryService as k}from"../../../../../vs/platform/extensionManagement/common/extensionManagement.js";import{IExtensionsScannerService as L}from"../../../../../vs/platform/extensionManagement/common/extensionsScannerService.js";import{IFileService as R}from"../../../../../vs/platform/files/common/files.js";import{InstantiationType as T,registerSingleton as W}from"../../../../../vs/platform/instantiation/common/extensions.js";import{IInstantiationService as q}from"../../../../../vs/platform/instantiation/common/instantiation.js";import{ILogService as C}from"../../../../../vs/platform/log/common/log.js";import{IProductService as F}from"../../../../../vs/platform/product/common/productService.js";import{ITelemetryService as G}from"../../../../../vs/platform/telemetry/common/telemetry.js";import{IUserDataSyncEnablementService as N}from"../../../../../vs/platform/userDataSync/common/userDataSync.js";import{IWorkspaceTrustRequestService as O}from"../../../../../vs/platform/workspace/common/workspaceTrust.js";import{INativeWorkbenchEnvironmentService as V}from"../../../../../vs/workbench/services/environment/electron-sandbox/environmentService.js";import{IExtensionManagementServerService as X,IWorkbenchExtensionManagementService as j}from"../../../../../vs/workbench/services/extensionManagement/common/extensionManagement.js";import{ExtensionManagementService as B}from"../../../../../vs/workbench/services/extensionManagement/common/extensionManagementService.js";import{IExtensionManifestPropertiesService as z}from"../../../../../vs/workbench/services/extensions/common/extensionManifestPropertiesService.js";import{IUserDataProfileService as A}from"../../../../../vs/workbench/services/userDataProfile/common/userDataProfile.js";let c=class extends B{constructor(r,i,o,n,m,S,v,I,l,p,f,d,E,g,u,x){super(i,o,n,m,S,v,I,l,p,f,d,E,g,u,x);this.environmentService=r}async installVSIXInServer(r,i,o){if(r.scheme===h.vscodeRemote&&i===this.extensionManagementServerService.localExtensionManagementServer){const n=M(this.environmentService.tmpDir,P());await this.downloadService.download(r,n),r=n}return super.installVSIXInServer(r,i,o)}};c=s([e(0,V),e(1,X),e(2,k),e(3,A),e(4,U),e(5,F),e(6,b),e(7,N),e(8,w),e(9,O),e(10,z),e(11,R),e(12,C),e(13,q),e(14,L),e(15,G)],c),W(j,c,T.Delayed);export{c as ExtensionManagementService};
