{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/services/dialogs/electron-sandbox/fileDialogService.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { SaveDialogOptions, OpenDialogOptions } from '../../../../base/parts/sandbox/common/electronTypes.js';\nimport { IHostService } from '../../host/browser/host.js';\nimport { IPickAndOpenOptions, ISaveDialogOptions, IOpenDialogOptions, IFileDialogService, IDialogService, INativeOpenDialogOptions } from '../../../../platform/dialogs/common/dialogs.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { IHistoryService } from '../../history/common/history.js';\nimport { IWorkbenchEnvironmentService } from '../../environment/common/environmentService.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IFileService } from '../../../../platform/files/common/files.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { INativeHostOptions, INativeHostService } from '../../../../platform/native/common/native.js';\nimport { AbstractFileDialogService } from '../browser/abstractFileDialogService.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport { ILanguageService } from '../../../../editor/common/languages/language.js';\nimport { IWorkspacesService } from '../../../../platform/workspaces/common/workspaces.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { IPathService } from '../../path/common/pathService.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ICodeEditorService } from '../../../../editor/browser/services/codeEditorService.js';\nimport { IEditorService } from '../../editor/common/editorService.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { getActiveWindow } from '../../../../base/browser/dom.js';\n\nexport class FileDialogService extends AbstractFileDialogService implements IFileDialogService {\n\n\tconstructor(\n\t\t@IHostService hostService: IHostService,\n\t\t@IWorkspaceContextService contextService: IWorkspaceContextService,\n\t\t@IHistoryService historyService: IHistoryService,\n\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IFileService fileService: IFileService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@INativeHostService private readonly nativeHostService: INativeHostService,\n\t\t@IDialogService dialogService: IDialogService,\n\t\t@ILanguageService languageService: ILanguageService,\n\t\t@IWorkspacesService workspacesService: IWorkspacesService,\n\t\t@ILabelService labelService: ILabelService,\n\t\t@IPathService pathService: IPathService,\n\t\t@ICommandService commandService: ICommandService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@ICodeEditorService codeEditorService: ICodeEditorService,\n\t\t@ILogService logService: ILogService\n\t) {\n\t\tsuper(hostService, contextService, historyService, environmentService, instantiationService,\n\t\t\tconfigurationService, fileService, openerService, dialogService, languageService, workspacesService, labelService, pathService, commandService, editorService, codeEditorService, logService);\n\t}\n\n\tprivate toNativeOpenDialogOptions(options: IPickAndOpenOptions): INativeOpenDialogOptions {\n\t\treturn {\n\t\t\tforceNewWindow: options.forceNewWindow,\n\t\t\ttelemetryExtraData: options.telemetryExtraData,\n\t\t\tdefaultPath: options.defaultUri?.fsPath\n\t\t};\n\t}\n\n\tprivate shouldUseSimplified(schema: string): { useSimplified: boolean; isSetting: boolean } {\n\t\tconst setting = (this.configurationService.getValue('files.simpleDialog.enable') === true);\n\t\tconst newWindowSetting = (this.configurationService.getValue('window.openFilesInNewWindow') === 'on');\n\t\treturn {\n\t\t\tuseSimplified: ((schema !== Schemas.file) && (schema !== Schemas.vscodeUserData)) || setting,\n\t\t\tisSetting: newWindowSetting\n\t\t};\n\t}\n\n\tasync pickFileFolderAndOpen(options: IPickAndOpenOptions): Promise<void> {\n\t\tconst schema = this.getFileSystemSchema(options);\n\n\t\tif (!options.defaultUri) {\n\t\t\toptions.defaultUri = await this.defaultFilePath(schema);\n\t\t}\n\n\t\tconst shouldUseSimplified = this.shouldUseSimplified(schema);\n\t\tif (shouldUseSimplified.useSimplified) {\n\t\t\treturn this.pickFileFolderAndOpenSimplified(schema, options, shouldUseSimplified.isSetting);\n\t\t}\n\t\treturn this.nativeHostService.pickFileFolderAndOpen(this.toNativeOpenDialogOptions(options));\n\t}\n\n\tasync pickFileAndOpen(options: IPickAndOpenOptions): Promise<void> {\n\t\tconst schema = this.getFileSystemSchema(options);\n\n\t\tif (!options.defaultUri) {\n\t\t\toptions.defaultUri = await this.defaultFilePath(schema);\n\t\t}\n\n\t\tconst shouldUseSimplified = this.shouldUseSimplified(schema);\n\t\tif (shouldUseSimplified.useSimplified) {\n\t\t\treturn this.pickFileAndOpenSimplified(schema, options, shouldUseSimplified.isSetting);\n\t\t}\n\t\treturn this.nativeHostService.pickFileAndOpen(this.toNativeOpenDialogOptions(options));\n\t}\n\n\tasync pickFolderAndOpen(options: IPickAndOpenOptions): Promise<void> {\n\t\tconst schema = this.getFileSystemSchema(options);\n\n\t\tif (!options.defaultUri) {\n\t\t\toptions.defaultUri = await this.defaultFolderPath(schema);\n\t\t}\n\n\t\tif (this.shouldUseSimplified(schema).useSimplified) {\n\t\t\treturn this.pickFolderAndOpenSimplified(schema, options);\n\t\t}\n\t\treturn this.nativeHostService.pickFolderAndOpen(this.toNativeOpenDialogOptions(options));\n\t}\n\n\tasync pickWorkspaceAndOpen(options: IPickAndOpenOptions): Promise<void> {\n\t\toptions.availableFileSystems = this.getWorkspaceAvailableFileSystems(options);\n\t\tconst schema = this.getFileSystemSchema(options);\n\n\t\tif (!options.defaultUri) {\n\t\t\toptions.defaultUri = await this.defaultWorkspacePath(schema);\n\t\t}\n\n\t\tif (this.shouldUseSimplified(schema).useSimplified) {\n\t\t\treturn this.pickWorkspaceAndOpenSimplified(schema, options);\n\t\t}\n\t\treturn this.nativeHostService.pickWorkspaceAndOpen(this.toNativeOpenDialogOptions(options));\n\t}\n\n\tasync pickFileToSave(defaultUri: URI, availableFileSystems?: string[]): Promise<URI | undefined> {\n\t\tconst schema = this.getFileSystemSchema({ defaultUri, availableFileSystems });\n\t\tconst options = this.getPickFileToSaveDialogOptions(defaultUri, availableFileSystems);\n\t\tif (this.shouldUseSimplified(schema).useSimplified) {\n\t\t\treturn this.pickFileToSaveSimplified(schema, options);\n\t\t} else {\n\t\t\tconst result = await this.nativeHostService.showSaveDialog(this.toNativeSaveDialogOptions(options));\n\t\t\tif (result && !result.canceled && result.filePath) {\n\t\t\t\tconst uri = URI.file(result.filePath);\n\n\t\t\t\tthis.addFileToRecentlyOpened(uri);\n\n\t\t\t\treturn uri;\n\t\t\t}\n\t\t}\n\t\treturn;\n\t}\n\n\tprivate toNativeSaveDialogOptions(options: ISaveDialogOptions): SaveDialogOptions & INativeHostOptions {\n\t\toptions.defaultUri = options.defaultUri ? URI.file(options.defaultUri.path) : undefined;\n\t\treturn {\n\t\t\tdefaultPath: options.defaultUri?.fsPath,\n\t\t\tbuttonLabel: options.saveLabel,\n\t\t\tfilters: options.filters,\n\t\t\ttitle: options.title,\n\t\t\ttargetWindowId: getActiveWindow().vscodeWindowId\n\t\t};\n\t}\n\n\tasync showSaveDialog(options: ISaveDialogOptions): Promise<URI | undefined> {\n\t\tconst schema = this.getFileSystemSchema(options);\n\t\tif (this.shouldUseSimplified(schema).useSimplified) {\n\t\t\treturn this.showSaveDialogSimplified(schema, options);\n\t\t}\n\n\t\tconst result = await this.nativeHostService.showSaveDialog(this.toNativeSaveDialogOptions(options));\n\t\tif (result && !result.canceled && result.filePath) {\n\t\t\treturn URI.file(result.filePath);\n\t\t}\n\n\t\treturn;\n\t}\n\n\tasync showOpenDialog(options: IOpenDialogOptions): Promise<URI[] | undefined> {\n\t\tconst schema = this.getFileSystemSchema(options);\n\t\tif (this.shouldUseSimplified(schema).useSimplified) {\n\t\t\treturn this.showOpenDialogSimplified(schema, options);\n\t\t}\n\n\t\tconst newOptions: OpenDialogOptions & { properties: string[] } & INativeHostOptions = {\n\t\t\ttitle: options.title,\n\t\t\tdefaultPath: options.defaultUri?.fsPath,\n\t\t\tbuttonLabel: options.openLabel,\n\t\t\tfilters: options.filters,\n\t\t\tproperties: [],\n\t\t\ttargetWindowId: getActiveWindow().vscodeWindowId\n\t\t};\n\n\t\tnewOptions.properties.push('createDirectory');\n\n\t\tif (options.canSelectFiles) {\n\t\t\tnewOptions.properties.push('openFile');\n\t\t}\n\n\t\tif (options.canSelectFolders) {\n\t\t\tnewOptions.properties.push('openDirectory');\n\t\t}\n\n\t\tif (options.canSelectMany) {\n\t\t\tnewOptions.properties.push('multiSelections');\n\t\t}\n\n\t\tconst result = await this.nativeHostService.showOpenDialog(newOptions);\n\t\treturn result && Array.isArray(result.filePaths) && result.filePaths.length > 0 ? result.filePaths.map(URI.file) : undefined;\n\t}\n}\n\nregisterSingleton(IFileDialogService, FileDialogService, InstantiationType.Delayed);\n"],
  "mappings": "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",
  "names": []
}
