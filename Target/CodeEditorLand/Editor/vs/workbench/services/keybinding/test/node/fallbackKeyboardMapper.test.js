import{KeyChord as C,KeyCode as e,KeyMod as a,ScanCode as c}from"../../../../../base/common/keyCodes.js";import{KeyCodeChord as y,decodeKeybinding as K,ScanCodeChord as u,Keybinding as f}from"../../../../../base/common/keybindings.js";import{OperatingSystem as s}from"../../../../../base/common/platform.js";import{ensureNoDisposablesAreLeakedInTestSuite as b}from"../../../../../base/test/common/utils.js";import{FallbackKeyboardMapper as o}from"../../common/fallbackKeyboardMapper.js";import{assertResolveKeyboardEvent as l,assertResolveKeybinding as n}from"./keyboardMapperTestUtils.js";suite("keyboardMapper - MAC fallback",()=>{b();const t=new o(!1,s.Macintosh);function i(r,d){n(t,K(r,s.Macintosh),d)}test("resolveKeybinding Cmd+Z",()=>{i(a.CtrlCmd|e.KeyZ,[{label:"\u2318Z",ariaLabel:"Command+Z",electronAccelerator:"Cmd+Z",userSettingsLabel:"cmd+z",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["meta+Z"],singleModifierDispatchParts:[null]}])}),test("resolveKeybinding Cmd+K Cmd+=",()=>{i(C(a.CtrlCmd|e.KeyK,a.CtrlCmd|e.Equal),[{label:"\u2318K \u2318=",ariaLabel:"Command+K Command+=",electronAccelerator:null,userSettingsLabel:"cmd+k cmd+=",isWYSIWYG:!0,isMultiChord:!0,dispatchParts:["meta+K","meta+="],singleModifierDispatchParts:[null,null]}])}),test("resolveKeyboardEvent Cmd+Z",()=>{l(t,{_standardKeyboardEventBrand:!0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!0,altGraphKey:!1,keyCode:e.KeyZ,code:null},{label:"\u2318Z",ariaLabel:"Command+Z",electronAccelerator:"Cmd+Z",userSettingsLabel:"cmd+z",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["meta+Z"],singleModifierDispatchParts:[null]})}),test("resolveUserBinding Cmd+[Comma] Cmd+/",()=>{n(t,new f([new u(!1,!1,!1,!0,c.Comma),new y(!1,!1,!1,!0,e.Slash)]),[{label:"\u2318, \u2318/",ariaLabel:"Command+, Command+/",electronAccelerator:null,userSettingsLabel:"cmd+, cmd+/",isWYSIWYG:!0,isMultiChord:!0,dispatchParts:["meta+,","meta+/"],singleModifierDispatchParts:[null,null]}])}),test("resolveKeyboardEvent Single Modifier Meta+",()=>{l(t,{_standardKeyboardEventBrand:!0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!0,altGraphKey:!1,keyCode:e.Meta,code:null},{label:"\u2318",ariaLabel:"Command",electronAccelerator:null,userSettingsLabel:"cmd",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:[null],singleModifierDispatchParts:["meta"]})}),test("resolveKeyboardEvent Single Modifier Shift+",()=>{l(t,{_standardKeyboardEventBrand:!0,ctrlKey:!1,shiftKey:!0,altKey:!1,metaKey:!1,altGraphKey:!1,keyCode:e.Shift,code:null},{label:"\u21E7",ariaLabel:"Shift",electronAccelerator:null,userSettingsLabel:"shift",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:[null],singleModifierDispatchParts:["shift"]})}),test("resolveKeyboardEvent Single Modifier Alt+",()=>{l(t,{_standardKeyboardEventBrand:!0,ctrlKey:!1,shiftKey:!1,altKey:!0,metaKey:!1,altGraphKey:!1,keyCode:e.Alt,code:null},{label:"\u2325",ariaLabel:"Option",electronAccelerator:null,userSettingsLabel:"alt",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:[null],singleModifierDispatchParts:["alt"]})}),test("resolveKeyboardEvent Only Modifiers Ctrl+Shift+",()=>{l(t,{_standardKeyboardEventBrand:!0,ctrlKey:!0,shiftKey:!0,altKey:!1,metaKey:!1,altGraphKey:!1,keyCode:e.Shift,code:null},{label:"\u2303\u21E7",ariaLabel:"Control+Shift",electronAccelerator:null,userSettingsLabel:"ctrl+shift",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:[null],singleModifierDispatchParts:[null]})}),test("resolveKeyboardEvent mapAltGrToCtrlAlt AltGr+Z",()=>{const r=new o(!0,s.Macintosh);l(r,{_standardKeyboardEventBrand:!0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!0,keyCode:e.KeyZ,code:null},{label:"\u2303\u2325Z",ariaLabel:"Control+Option+Z",electronAccelerator:"Ctrl+Alt+Z",userSettingsLabel:"ctrl+alt+z",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+alt+Z"],singleModifierDispatchParts:[null]})})}),suite("keyboardMapper - LINUX fallback",()=>{b();const t=new o(!1,s.Linux);function i(r,d){n(t,K(r,s.Linux),d)}test("resolveKeybinding Ctrl+Z",()=>{i(a.CtrlCmd|e.KeyZ,[{label:"Ctrl+Z",ariaLabel:"Control+Z",electronAccelerator:"Ctrl+Z",userSettingsLabel:"ctrl+z",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+Z"],singleModifierDispatchParts:[null]}])}),test("resolveKeybinding Ctrl+K Ctrl+=",()=>{i(C(a.CtrlCmd|e.KeyK,a.CtrlCmd|e.Equal),[{label:"Ctrl+K Ctrl+=",ariaLabel:"Control+K Control+=",electronAccelerator:null,userSettingsLabel:"ctrl+k ctrl+=",isWYSIWYG:!0,isMultiChord:!0,dispatchParts:["ctrl+K","ctrl+="],singleModifierDispatchParts:[null,null]}])}),test("resolveKeyboardEvent Ctrl+Z",()=>{l(t,{_standardKeyboardEventBrand:!0,ctrlKey:!0,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,keyCode:e.KeyZ,code:null},{label:"Ctrl+Z",ariaLabel:"Control+Z",electronAccelerator:"Ctrl+Z",userSettingsLabel:"ctrl+z",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+Z"],singleModifierDispatchParts:[null]})}),test("resolveUserBinding Ctrl+[Comma] Ctrl+/",()=>{n(t,new f([new u(!0,!1,!1,!1,c.Comma),new y(!0,!1,!1,!1,e.Slash)]),[{label:"Ctrl+, Ctrl+/",ariaLabel:"Control+, Control+/",electronAccelerator:null,userSettingsLabel:"ctrl+, ctrl+/",isWYSIWYG:!0,isMultiChord:!0,dispatchParts:["ctrl+,","ctrl+/"],singleModifierDispatchParts:[null,null]}])}),test("resolveUserBinding Ctrl+[Comma]",()=>{n(t,new f([new u(!0,!1,!1,!1,c.Comma)]),[{label:"Ctrl+,",ariaLabel:"Control+,",electronAccelerator:"Ctrl+,",userSettingsLabel:"ctrl+,",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+,"],singleModifierDispatchParts:[null]}])}),test("resolveKeyboardEvent Single Modifier Ctrl+",()=>{l(t,{_standardKeyboardEventBrand:!0,ctrlKey:!0,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,keyCode:e.Ctrl,code:null},{label:"Ctrl",ariaLabel:"Control",electronAccelerator:null,userSettingsLabel:"ctrl",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:[null],singleModifierDispatchParts:["ctrl"]})}),test("resolveKeyboardEvent mapAltGrToCtrlAlt AltGr+Z",()=>{const r=new o(!0,s.Linux);l(r,{_standardKeyboardEventBrand:!0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!0,keyCode:e.KeyZ,code:null},{label:"Ctrl+Alt+Z",ariaLabel:"Control+Alt+Z",electronAccelerator:"Ctrl+Alt+Z",userSettingsLabel:"ctrl+alt+z",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+alt+Z"],singleModifierDispatchParts:[null]})})});
