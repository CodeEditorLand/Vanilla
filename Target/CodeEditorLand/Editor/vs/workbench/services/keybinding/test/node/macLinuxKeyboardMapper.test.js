import A from"assert";import{KeyChord as p,KeyCode as e,KeyMod as l,ScanCode as K,ScanCodeUtils as W}from"../../../../../base/common/keyCodes.js";import{KeyCodeChord as M,decodeKeybinding as b,createSimpleKeybinding as w,ScanCodeChord as g,Keybinding as S}from"../../../../../base/common/keybindings.js";import{UserSettingsLabelProvider as G}from"../../../../../base/common/keybindingLabels.js";import{OperatingSystem as o}from"../../../../../base/common/platform.js";import{USLayoutResolvedKeybinding as I}from"../../../../../platform/keybinding/common/usLayoutResolvedKeybinding.js";import{MacLinuxKeyboardMapper as L}from"../../common/macLinuxKeyboardMapper.js";import{assertMapping as f,assertResolveKeyboardEvent as s,assertResolveKeybinding as d,readRawMapping as E}from"./keyboardMapperTestUtils.js";import"../../../../../platform/keyboardLayout/common/keyboardLayout.js";import{ensureNoDisposablesAreLeakedInTestSuite as u}from"../../../../../base/test/common/utils.js";const C=!1;async function c(r,t,a,i){const n=await E(t);return new L(r,n,a,i)}suite("keyboardMapper - MAC de_ch",()=>{u();let r;suiteSetup(async()=>{r=await c(!1,"mac_de_ch",!1,o.Macintosh)}),test("mapping",()=>f(C,r,"mac_de_ch.txt"));function t(i,n){v(r,o.Macintosh,i,n)}function a(i,n){d(r,b(i,o.Macintosh),n)}test("kb => hw",()=>{t(l.CtrlCmd|e.Digit1,"cmd+Digit1"),t(l.CtrlCmd|e.KeyB,"cmd+KeyB"),t(l.CtrlCmd|l.Shift|e.KeyB,"shift+cmd+KeyB"),t(l.CtrlCmd|l.Shift|l.Alt|l.WinCtrl|e.KeyB,"ctrl+shift+alt+cmd+KeyB"),t(l.CtrlCmd|e.KeyZ,"cmd+KeyY"),t(l.CtrlCmd|e.KeyY,"cmd+KeyZ"),t(l.CtrlCmd|e.Slash,"shift+cmd+Digit7")}),test("resolveKeybinding Cmd+A",()=>{a(l.CtrlCmd|e.KeyA,[{label:"\u2318A",ariaLabel:"Command+A",electronAccelerator:"Cmd+A",userSettingsLabel:"cmd+a",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["meta+[KeyA]"],singleModifierDispatchParts:[null]}])}),test("resolveKeybinding Cmd+B",()=>{a(l.CtrlCmd|e.KeyB,[{label:"\u2318B",ariaLabel:"Command+B",electronAccelerator:"Cmd+B",userSettingsLabel:"cmd+b",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["meta+[KeyB]"],singleModifierDispatchParts:[null]}])}),test("resolveKeybinding Cmd+Z",()=>{a(l.CtrlCmd|e.KeyZ,[{label:"\u2318Z",ariaLabel:"Command+Z",electronAccelerator:"Cmd+Z",userSettingsLabel:"cmd+z",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["meta+[KeyY]"],singleModifierDispatchParts:[null]}])}),test("resolveKeyboardEvent Cmd+[KeyY]",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!0,altGraphKey:!1,keyCode:-1,code:"KeyY"},{label:"\u2318Z",ariaLabel:"Command+Z",electronAccelerator:"Cmd+Z",userSettingsLabel:"cmd+z",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["meta+[KeyY]"],singleModifierDispatchParts:[null]})}),test("resolveKeybinding Cmd+]",()=>{a(l.CtrlCmd|e.BracketRight,[{label:"\u2303\u2325\u23186",ariaLabel:"Control+Option+Command+6",electronAccelerator:"Ctrl+Alt+Cmd+6",userSettingsLabel:"ctrl+alt+cmd+6",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+alt+meta+[Digit6]"],singleModifierDispatchParts:[null]}])}),test("resolveKeyboardEvent Cmd+[BracketRight]",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!0,altGraphKey:!1,keyCode:-1,code:"BracketRight"},{label:"\u2318\xA8",ariaLabel:"Command+\xA8",electronAccelerator:null,userSettingsLabel:"cmd+[BracketRight]",isWYSIWYG:!1,isMultiChord:!1,dispatchParts:["meta+[BracketRight]"],singleModifierDispatchParts:[null]})}),test("resolveKeybinding Shift+]",()=>{a(l.Shift|e.BracketRight,[{label:"\u2303\u23259",ariaLabel:"Control+Option+9",electronAccelerator:"Ctrl+Alt+9",userSettingsLabel:"ctrl+alt+9",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+alt+[Digit9]"],singleModifierDispatchParts:[null]}])}),test("resolveKeybinding Cmd+/",()=>{a(l.CtrlCmd|e.Slash,[{label:"\u21E7\u23187",ariaLabel:"Shift+Command+7",electronAccelerator:"Shift+Cmd+7",userSettingsLabel:"shift+cmd+7",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["shift+meta+[Digit7]"],singleModifierDispatchParts:[null]}])}),test("resolveKeybinding Cmd+Shift+/",()=>{a(l.CtrlCmd|l.Shift|e.Slash,[{label:"\u21E7\u2318'",ariaLabel:"Shift+Command+'",electronAccelerator:null,userSettingsLabel:"shift+cmd+[Minus]",isWYSIWYG:!1,isMultiChord:!1,dispatchParts:["shift+meta+[Minus]"],singleModifierDispatchParts:[null]}])}),test("resolveKeybinding Cmd+K Cmd+\\",()=>{a(p(l.CtrlCmd|e.KeyK,l.CtrlCmd|e.Backslash),[{label:"\u2318K \u2303\u21E7\u2325\u23187",ariaLabel:"Command+K Control+Shift+Option+Command+7",electronAccelerator:null,userSettingsLabel:"cmd+k ctrl+shift+alt+cmd+7",isWYSIWYG:!0,isMultiChord:!0,dispatchParts:["meta+[KeyK]","ctrl+shift+alt+meta+[Digit7]"],singleModifierDispatchParts:[null,null]}])}),test("resolveKeybinding Cmd+K Cmd+=",()=>{a(p(l.CtrlCmd|e.KeyK,l.CtrlCmd|e.Equal),[{label:"\u2318K \u21E7\u23180",ariaLabel:"Command+K Shift+Command+0",electronAccelerator:null,userSettingsLabel:"cmd+k shift+cmd+0",isWYSIWYG:!0,isMultiChord:!0,dispatchParts:["meta+[KeyK]","shift+meta+[Digit0]"],singleModifierDispatchParts:[null,null]}])}),test("resolveKeybinding Cmd+DownArrow",()=>{a(l.CtrlCmd|e.DownArrow,[{label:"\u2318\u2193",ariaLabel:"Command+DownArrow",electronAccelerator:"Cmd+Down",userSettingsLabel:"cmd+down",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["meta+[ArrowDown]"],singleModifierDispatchParts:[null]}])}),test("resolveKeybinding Cmd+NUMPAD_0",()=>{a(l.CtrlCmd|e.Numpad0,[{label:"\u2318NumPad0",ariaLabel:"Command+NumPad0",electronAccelerator:null,userSettingsLabel:"cmd+numpad0",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["meta+[Numpad0]"],singleModifierDispatchParts:[null]}])}),test("resolveKeybinding Ctrl+Home",()=>{a(l.CtrlCmd|e.Home,[{label:"\u2318Home",ariaLabel:"Command+Home",electronAccelerator:"Cmd+Home",userSettingsLabel:"cmd+home",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["meta+[Home]"],singleModifierDispatchParts:[null]}])}),test("resolveKeyboardEvent Ctrl+[Home]",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!0,altGraphKey:!1,keyCode:-1,code:"Home"},{label:"\u2318Home",ariaLabel:"Command+Home",electronAccelerator:"Cmd+Home",userSettingsLabel:"cmd+home",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["meta+[Home]"],singleModifierDispatchParts:[null]})}),test("resolveUserBinding Cmd+[Comma] Cmd+/",()=>{d(r,new S([new g(!1,!1,!1,!0,K.Comma),new M(!1,!1,!1,!0,e.Slash)]),[{label:"\u2318, \u21E7\u23187",ariaLabel:"Command+, Shift+Command+7",electronAccelerator:null,userSettingsLabel:"cmd+[Comma] shift+cmd+7",isWYSIWYG:!1,isMultiChord:!0,dispatchParts:["meta+[Comma]","shift+meta+[Digit7]"],singleModifierDispatchParts:[null,null]}])}),test("resolveKeyboardEvent Single Modifier MetaLeft+",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!0,altGraphKey:!1,keyCode:-1,code:"MetaLeft"},{label:"\u2318",ariaLabel:"Command",electronAccelerator:null,userSettingsLabel:"cmd",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:[null],singleModifierDispatchParts:["meta"]})}),test("resolveKeyboardEvent Single Modifier MetaRight+",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!0,altGraphKey:!1,keyCode:-1,code:"MetaRight"},{label:"\u2318",ariaLabel:"Command",electronAccelerator:null,userSettingsLabel:"cmd",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:[null],singleModifierDispatchParts:["meta"]})})}),suite("keyboardMapper - MAC en_us",()=>{u();let r;suiteSetup(async()=>{r=await c(!0,"mac_en_us",!1,o.Macintosh)}),test("mapping",()=>f(C,r,"mac_en_us.txt")),test("resolveUserBinding Cmd+[Comma] Cmd+/",()=>{d(r,new S([new g(!1,!1,!1,!0,K.Comma),new M(!1,!1,!1,!0,e.Slash)]),[{label:"\u2318, \u2318/",ariaLabel:"Command+, Command+/",electronAccelerator:null,userSettingsLabel:"cmd+, cmd+/",isWYSIWYG:!0,isMultiChord:!0,dispatchParts:["meta+[Comma]","meta+[Slash]"],singleModifierDispatchParts:[null,null]}])}),test("resolveKeyboardEvent Single Modifier MetaLeft+",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!0,altGraphKey:!1,keyCode:-1,code:"MetaLeft"},{label:"\u2318",ariaLabel:"Command",electronAccelerator:null,userSettingsLabel:"cmd",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:[null],singleModifierDispatchParts:["meta"]})}),test("resolveKeyboardEvent Single Modifier MetaRight+",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!0,altGraphKey:!1,keyCode:-1,code:"MetaRight"},{label:"\u2318",ariaLabel:"Command",electronAccelerator:null,userSettingsLabel:"cmd",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:[null],singleModifierDispatchParts:["meta"]})}),test("resolveKeyboardEvent mapAltGrToCtrlAlt AltGr+Z",async()=>{const t=await c(!0,"mac_en_us",!0,o.Macintosh);s(t,{_standardKeyboardEventBrand:!0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!0,keyCode:-1,code:"KeyZ"},{label:"\u2303\u2325Z",ariaLabel:"Control+Option+Z",electronAccelerator:"Ctrl+Alt+Z",userSettingsLabel:"ctrl+alt+z",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+alt+[KeyZ]"],singleModifierDispatchParts:[null]})})}),suite("keyboardMapper - LINUX de_ch",()=>{u();let r;suiteSetup(async()=>{r=await c(!1,"linux_de_ch",!1,o.Linux)}),test("mapping",()=>f(C,r,"linux_de_ch.txt"));function t(i,n){v(r,o.Linux,i,n)}function a(i,n){d(r,b(i,o.Linux),n)}test("kb => hw",()=>{t(l.CtrlCmd|e.Digit1,"ctrl+Digit1"),t(l.CtrlCmd|e.KeyB,"ctrl+KeyB"),t(l.CtrlCmd|l.Shift|e.KeyB,"ctrl+shift+KeyB"),t(l.CtrlCmd|l.Shift|l.Alt|l.WinCtrl|e.KeyB,"ctrl+shift+alt+meta+KeyB"),t(l.CtrlCmd|e.KeyZ,"ctrl+KeyY"),t(l.CtrlCmd|e.KeyY,"ctrl+KeyZ"),t(l.CtrlCmd|e.Slash,"ctrl+shift+Digit7")}),test("resolveKeybinding Ctrl+A",()=>{a(l.CtrlCmd|e.KeyA,[{label:"Ctrl+A",ariaLabel:"Control+A",electronAccelerator:"Ctrl+A",userSettingsLabel:"ctrl+a",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+[KeyA]"],singleModifierDispatchParts:[null]}])}),test("resolveKeybinding Ctrl+Z",()=>{a(l.CtrlCmd|e.KeyZ,[{label:"Ctrl+Z",ariaLabel:"Control+Z",electronAccelerator:"Ctrl+Z",userSettingsLabel:"ctrl+z",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+[KeyY]"],singleModifierDispatchParts:[null]}])}),test("resolveKeyboardEvent Ctrl+[KeyY]",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!0,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,keyCode:-1,code:"KeyY"},{label:"Ctrl+Z",ariaLabel:"Control+Z",electronAccelerator:"Ctrl+Z",userSettingsLabel:"ctrl+z",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+[KeyY]"],singleModifierDispatchParts:[null]})}),test("resolveKeybinding Ctrl+]",()=>{a(l.CtrlCmd|e.BracketRight,[])}),test("resolveKeyboardEvent Ctrl+[BracketRight]",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!0,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,keyCode:-1,code:"BracketRight"},{label:"Ctrl+\xA8",ariaLabel:"Control+\xA8",electronAccelerator:null,userSettingsLabel:"ctrl+[BracketRight]",isWYSIWYG:!1,isMultiChord:!1,dispatchParts:["ctrl+[BracketRight]"],singleModifierDispatchParts:[null]})}),test("resolveKeybinding Shift+]",()=>{a(l.Shift|e.BracketRight,[{label:"Ctrl+Alt+0",ariaLabel:"Control+Alt+0",electronAccelerator:"Ctrl+Alt+0",userSettingsLabel:"ctrl+alt+0",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+alt+[Digit0]"],singleModifierDispatchParts:[null]},{label:"Ctrl+Alt+$",ariaLabel:"Control+Alt+$",electronAccelerator:null,userSettingsLabel:"ctrl+alt+[Backslash]",isWYSIWYG:!1,isMultiChord:!1,dispatchParts:["ctrl+alt+[Backslash]"],singleModifierDispatchParts:[null]}])}),test("resolveKeybinding Ctrl+/",()=>{a(l.CtrlCmd|e.Slash,[{label:"Ctrl+Shift+7",ariaLabel:"Control+Shift+7",electronAccelerator:"Ctrl+Shift+7",userSettingsLabel:"ctrl+shift+7",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+shift+[Digit7]"],singleModifierDispatchParts:[null]}])}),test("resolveKeybinding Ctrl+Shift+/",()=>{a(l.CtrlCmd|l.Shift|e.Slash,[{label:"Ctrl+Shift+'",ariaLabel:"Control+Shift+'",electronAccelerator:null,userSettingsLabel:"ctrl+shift+[Minus]",isWYSIWYG:!1,isMultiChord:!1,dispatchParts:["ctrl+shift+[Minus]"],singleModifierDispatchParts:[null]}])}),test("resolveKeybinding Ctrl+K Ctrl+\\",()=>{a(p(l.CtrlCmd|e.KeyK,l.CtrlCmd|e.Backslash),[])}),test("resolveKeybinding Ctrl+K Ctrl+=",()=>{a(p(l.CtrlCmd|e.KeyK,l.CtrlCmd|e.Equal),[{label:"Ctrl+K Ctrl+Shift+0",ariaLabel:"Control+K Control+Shift+0",electronAccelerator:null,userSettingsLabel:"ctrl+k ctrl+shift+0",isWYSIWYG:!0,isMultiChord:!0,dispatchParts:["ctrl+[KeyK]","ctrl+shift+[Digit0]"],singleModifierDispatchParts:[null,null]}])}),test("resolveKeybinding Ctrl+DownArrow",()=>{a(l.CtrlCmd|e.DownArrow,[{label:"Ctrl+DownArrow",ariaLabel:"Control+DownArrow",electronAccelerator:"Ctrl+Down",userSettingsLabel:"ctrl+down",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+[ArrowDown]"],singleModifierDispatchParts:[null]}])}),test("resolveKeybinding Ctrl+NUMPAD_0",()=>{a(l.CtrlCmd|e.Numpad0,[{label:"Ctrl+NumPad0",ariaLabel:"Control+NumPad0",electronAccelerator:null,userSettingsLabel:"ctrl+numpad0",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+[Numpad0]"],singleModifierDispatchParts:[null]}])}),test("resolveKeybinding Ctrl+Home",()=>{a(l.CtrlCmd|e.Home,[{label:"Ctrl+Home",ariaLabel:"Control+Home",electronAccelerator:"Ctrl+Home",userSettingsLabel:"ctrl+home",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+[Home]"],singleModifierDispatchParts:[null]}])}),test("resolveKeyboardEvent Ctrl+[Home]",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!0,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,keyCode:-1,code:"Home"},{label:"Ctrl+Home",ariaLabel:"Control+Home",electronAccelerator:"Ctrl+Home",userSettingsLabel:"ctrl+home",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+[Home]"],singleModifierDispatchParts:[null]})}),test("resolveKeyboardEvent Ctrl+[KeyX]",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!0,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,keyCode:-1,code:"KeyX"},{label:"Ctrl+X",ariaLabel:"Control+X",electronAccelerator:"Ctrl+X",userSettingsLabel:"ctrl+x",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+[KeyX]"],singleModifierDispatchParts:[null]})}),test("resolveUserBinding Ctrl+[Comma] Ctrl+/",()=>{d(r,new S([new g(!0,!1,!1,!1,K.Comma),new M(!0,!1,!1,!1,e.Slash)]),[{label:"Ctrl+, Ctrl+Shift+7",ariaLabel:"Control+, Control+Shift+7",electronAccelerator:null,userSettingsLabel:"ctrl+[Comma] ctrl+shift+7",isWYSIWYG:!1,isMultiChord:!0,dispatchParts:["ctrl+[Comma]","ctrl+shift+[Digit7]"],singleModifierDispatchParts:[null,null]}])}),test("resolveKeyboardEvent Single Modifier ControlLeft+",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!0,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,keyCode:-1,code:"ControlLeft"},{label:"Ctrl",ariaLabel:"Control",electronAccelerator:null,userSettingsLabel:"ctrl",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:[null],singleModifierDispatchParts:["ctrl"]})}),test("resolveKeyboardEvent Single Modifier ControlRight+",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!0,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,keyCode:-1,code:"ControlRight"},{label:"Ctrl",ariaLabel:"Control",electronAccelerator:null,userSettingsLabel:"ctrl",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:[null],singleModifierDispatchParts:["ctrl"]})})}),suite("keyboardMapper - LINUX en_us",()=>{u();let r;suiteSetup(async()=>{r=await c(!0,"linux_en_us",!1,o.Linux)}),test("mapping",()=>f(C,r,"linux_en_us.txt"));function t(a,i){d(r,b(a,o.Linux),i)}test("resolveKeybinding Ctrl+A",()=>{t(l.CtrlCmd|e.KeyA,[{label:"Ctrl+A",ariaLabel:"Control+A",electronAccelerator:"Ctrl+A",userSettingsLabel:"ctrl+a",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+[KeyA]"],singleModifierDispatchParts:[null]}])}),test("resolveKeybinding Ctrl+Z",()=>{t(l.CtrlCmd|e.KeyZ,[{label:"Ctrl+Z",ariaLabel:"Control+Z",electronAccelerator:"Ctrl+Z",userSettingsLabel:"ctrl+z",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+[KeyZ]"],singleModifierDispatchParts:[null]}])}),test("resolveKeyboardEvent Ctrl+[KeyZ]",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!0,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,keyCode:-1,code:"KeyZ"},{label:"Ctrl+Z",ariaLabel:"Control+Z",electronAccelerator:"Ctrl+Z",userSettingsLabel:"ctrl+z",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+[KeyZ]"],singleModifierDispatchParts:[null]})}),test("resolveKeybinding Ctrl+]",()=>{t(l.CtrlCmd|e.BracketRight,[{label:"Ctrl+]",ariaLabel:"Control+]",electronAccelerator:"Ctrl+]",userSettingsLabel:"ctrl+]",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+[BracketRight]"],singleModifierDispatchParts:[null]}])}),test("resolveKeyboardEvent Ctrl+[BracketRight]",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!0,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,keyCode:-1,code:"BracketRight"},{label:"Ctrl+]",ariaLabel:"Control+]",electronAccelerator:"Ctrl+]",userSettingsLabel:"ctrl+]",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+[BracketRight]"],singleModifierDispatchParts:[null]})}),test("resolveKeybinding Shift+]",()=>{t(l.Shift|e.BracketRight,[{label:"Shift+]",ariaLabel:"Shift+]",electronAccelerator:"Shift+]",userSettingsLabel:"shift+]",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["shift+[BracketRight]"],singleModifierDispatchParts:[null]}])}),test("resolveKeybinding Ctrl+/",()=>{t(l.CtrlCmd|e.Slash,[{label:"Ctrl+/",ariaLabel:"Control+/",electronAccelerator:"Ctrl+/",userSettingsLabel:"ctrl+/",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+[Slash]"],singleModifierDispatchParts:[null]}])}),test("resolveKeybinding Ctrl+Shift+/",()=>{t(l.CtrlCmd|l.Shift|e.Slash,[{label:"Ctrl+Shift+/",ariaLabel:"Control+Shift+/",electronAccelerator:"Ctrl+Shift+/",userSettingsLabel:"ctrl+shift+/",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+shift+[Slash]"],singleModifierDispatchParts:[null]}])}),test("resolveKeybinding Ctrl+K Ctrl+\\",()=>{t(p(l.CtrlCmd|e.KeyK,l.CtrlCmd|e.Backslash),[{label:"Ctrl+K Ctrl+\\",ariaLabel:"Control+K Control+\\",electronAccelerator:null,userSettingsLabel:"ctrl+k ctrl+\\",isWYSIWYG:!0,isMultiChord:!0,dispatchParts:["ctrl+[KeyK]","ctrl+[Backslash]"],singleModifierDispatchParts:[null,null]}])}),test("resolveKeybinding Ctrl+K Ctrl+=",()=>{t(p(l.CtrlCmd|e.KeyK,l.CtrlCmd|e.Equal),[{label:"Ctrl+K Ctrl+=",ariaLabel:"Control+K Control+=",electronAccelerator:null,userSettingsLabel:"ctrl+k ctrl+=",isWYSIWYG:!0,isMultiChord:!0,dispatchParts:["ctrl+[KeyK]","ctrl+[Equal]"],singleModifierDispatchParts:[null,null]}])}),test("resolveKeybinding Ctrl+DownArrow",()=>{t(l.CtrlCmd|e.DownArrow,[{label:"Ctrl+DownArrow",ariaLabel:"Control+DownArrow",electronAccelerator:"Ctrl+Down",userSettingsLabel:"ctrl+down",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+[ArrowDown]"],singleModifierDispatchParts:[null]}])}),test("resolveKeybinding Ctrl+NUMPAD_0",()=>{t(l.CtrlCmd|e.Numpad0,[{label:"Ctrl+NumPad0",ariaLabel:"Control+NumPad0",electronAccelerator:null,userSettingsLabel:"ctrl+numpad0",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+[Numpad0]"],singleModifierDispatchParts:[null]}])}),test("resolveKeybinding Ctrl+Home",()=>{t(l.CtrlCmd|e.Home,[{label:"Ctrl+Home",ariaLabel:"Control+Home",electronAccelerator:"Ctrl+Home",userSettingsLabel:"ctrl+home",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+[Home]"],singleModifierDispatchParts:[null]}])}),test("resolveKeyboardEvent Ctrl+[Home]",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!0,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,keyCode:-1,code:"Home"},{label:"Ctrl+Home",ariaLabel:"Control+Home",electronAccelerator:"Ctrl+Home",userSettingsLabel:"ctrl+home",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+[Home]"],singleModifierDispatchParts:[null]})}),test("resolveKeybinding Ctrl+Shift+,",()=>{t(l.CtrlCmd|l.Shift|e.Comma,[{label:"Ctrl+Shift+,",ariaLabel:"Control+Shift+,",electronAccelerator:"Ctrl+Shift+,",userSettingsLabel:"ctrl+shift+,",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+shift+[Comma]"],singleModifierDispatchParts:[null]},{label:"Ctrl+<",ariaLabel:"Control+<",electronAccelerator:null,userSettingsLabel:"ctrl+[IntlBackslash]",isWYSIWYG:!1,isMultiChord:!1,dispatchParts:["ctrl+[IntlBackslash]"],singleModifierDispatchParts:[null]}])}),test("issue #23393: resolveKeybinding Ctrl+Enter",()=>{t(l.CtrlCmd|e.Enter,[{label:"Ctrl+Enter",ariaLabel:"Control+Enter",electronAccelerator:"Ctrl+Enter",userSettingsLabel:"ctrl+enter",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+[Enter]"],singleModifierDispatchParts:[null]}])}),test("issue #23393: resolveKeyboardEvent Ctrl+[NumpadEnter]",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!0,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,keyCode:-1,code:"NumpadEnter"},{label:"Ctrl+Enter",ariaLabel:"Control+Enter",electronAccelerator:"Ctrl+Enter",userSettingsLabel:"ctrl+enter",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+[Enter]"],singleModifierDispatchParts:[null]})}),test("resolveUserBinding Ctrl+[Comma] Ctrl+/",()=>{d(r,new S([new g(!0,!1,!1,!1,K.Comma),new M(!0,!1,!1,!1,e.Slash)]),[{label:"Ctrl+, Ctrl+/",ariaLabel:"Control+, Control+/",electronAccelerator:null,userSettingsLabel:"ctrl+, ctrl+/",isWYSIWYG:!0,isMultiChord:!0,dispatchParts:["ctrl+[Comma]","ctrl+[Slash]"],singleModifierDispatchParts:[null,null]}])}),test("resolveUserBinding Ctrl+[Comma]",()=>{d(r,new S([new g(!0,!1,!1,!1,K.Comma)]),[{label:"Ctrl+,",ariaLabel:"Control+,",electronAccelerator:"Ctrl+,",userSettingsLabel:"ctrl+,",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+[Comma]"],singleModifierDispatchParts:[null]}])}),test("resolveKeyboardEvent Single Modifier ControlLeft+",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!0,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,keyCode:-1,code:"ControlLeft"},{label:"Ctrl",ariaLabel:"Control",electronAccelerator:null,userSettingsLabel:"ctrl",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:[null],singleModifierDispatchParts:["ctrl"]})}),test("resolveKeyboardEvent Single Modifier ControlRight+",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!0,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,keyCode:-1,code:"ControlRight"},{label:"Ctrl",ariaLabel:"Control",electronAccelerator:null,userSettingsLabel:"ctrl",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:[null],singleModifierDispatchParts:["ctrl"]})}),test("resolveKeyboardEvent Single Modifier ShiftLeft+",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!1,shiftKey:!0,altKey:!1,metaKey:!1,altGraphKey:!1,keyCode:-1,code:"ShiftLeft"},{label:"Shift",ariaLabel:"Shift",electronAccelerator:null,userSettingsLabel:"shift",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:[null],singleModifierDispatchParts:["shift"]})}),test("resolveKeyboardEvent Single Modifier ShiftRight+",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!1,shiftKey:!0,altKey:!1,metaKey:!1,altGraphKey:!1,keyCode:-1,code:"ShiftRight"},{label:"Shift",ariaLabel:"Shift",electronAccelerator:null,userSettingsLabel:"shift",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:[null],singleModifierDispatchParts:["shift"]})}),test("resolveKeyboardEvent Single Modifier AltLeft+",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!1,shiftKey:!1,altKey:!0,metaKey:!1,altGraphKey:!1,keyCode:-1,code:"AltLeft"},{label:"Alt",ariaLabel:"Alt",electronAccelerator:null,userSettingsLabel:"alt",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:[null],singleModifierDispatchParts:["alt"]})}),test("resolveKeyboardEvent Single Modifier AltRight+",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!1,shiftKey:!1,altKey:!0,metaKey:!1,altGraphKey:!1,keyCode:-1,code:"AltRight"},{label:"Alt",ariaLabel:"Alt",electronAccelerator:null,userSettingsLabel:"alt",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:[null],singleModifierDispatchParts:["alt"]})}),test("resolveKeyboardEvent Single Modifier MetaLeft+",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!0,altGraphKey:!1,keyCode:-1,code:"MetaLeft"},{label:"Super",ariaLabel:"Super",electronAccelerator:null,userSettingsLabel:"meta",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:[null],singleModifierDispatchParts:["meta"]})}),test("resolveKeyboardEvent Single Modifier MetaRight+",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!0,altGraphKey:!1,keyCode:-1,code:"MetaRight"},{label:"Super",ariaLabel:"Super",electronAccelerator:null,userSettingsLabel:"meta",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:[null],singleModifierDispatchParts:["meta"]})}),test("resolveKeyboardEvent Only Modifiers Ctrl+Shift+",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!0,shiftKey:!0,altKey:!1,metaKey:!1,altGraphKey:!1,keyCode:-1,code:"ShiftLeft"},{label:"Ctrl+Shift",ariaLabel:"Control+Shift",electronAccelerator:null,userSettingsLabel:"ctrl+shift",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:[null],singleModifierDispatchParts:[null]})}),test("resolveKeyboardEvent mapAltGrToCtrlAlt AltGr+Z",async()=>{const a=await c(!0,"linux_en_us",!0,o.Linux);s(a,{_standardKeyboardEventBrand:!0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!0,keyCode:-1,code:"KeyZ"},{label:"Ctrl+Alt+Z",ariaLabel:"Control+Alt+Z",electronAccelerator:"Ctrl+Alt+Z",userSettingsLabel:"ctrl+alt+z",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+alt+[KeyZ]"],singleModifierDispatchParts:[null]})})}),suite("keyboardMapper",()=>{u(),test("issue #23706: Linux UK layout: Ctrl + Apostrophe also toggles terminal",()=>{const r=new L(!1,{Backquote:{value:"`",withShift:"\xAC",withAltGr:"|",withShiftAltGr:"|"}},!1,o.Linux);s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!0,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,keyCode:-1,code:"Backquote"},{label:"Ctrl+`",ariaLabel:"Control+`",electronAccelerator:null,userSettingsLabel:"ctrl+`",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+[Backquote]"],singleModifierDispatchParts:[null]})}),test("issue #24064: NumLock/NumPad keys stopped working in 1.11 on Linux",()=>{const r=new L(!1,{},!1,o.Linux);function t(a,i,n,h,m,y){s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,keyCode:a,code:i},{label:n,ariaLabel:n,electronAccelerator:h,userSettingsLabel:m,isWYSIWYG:!0,isMultiChord:!1,dispatchParts:[y],singleModifierDispatchParts:[null]})}t(e.End,"Numpad1","End","End","end","[End]"),t(e.DownArrow,"Numpad2","DownArrow","Down","down","[ArrowDown]"),t(e.PageDown,"Numpad3","PageDown","PageDown","pagedown","[PageDown]"),t(e.LeftArrow,"Numpad4","LeftArrow","Left","left","[ArrowLeft]"),t(e.Unknown,"Numpad5","NumPad5",null,"numpad5","[Numpad5]"),t(e.RightArrow,"Numpad6","RightArrow","Right","right","[ArrowRight]"),t(e.Home,"Numpad7","Home","Home","home","[Home]"),t(e.UpArrow,"Numpad8","UpArrow","Up","up","[ArrowUp]"),t(e.PageUp,"Numpad9","PageUp","PageUp","pageup","[PageUp]"),t(e.Insert,"Numpad0","Insert","Insert","insert","[Insert]"),t(e.Delete,"NumpadDecimal","Delete","Delete","delete","[Delete]")}),test("issue #24107: Delete, Insert, Home, End, PgUp, PgDn, and arrow keys no longer work editor in 1.11",()=>{const r=new L(!1,{},!1,o.Linux);function t(a,i,n,h,m,y){s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!1,shiftKey:!1,altKey:!1,metaKey:!1,altGraphKey:!1,keyCode:a,code:i},{label:n,ariaLabel:n,electronAccelerator:h,userSettingsLabel:m,isWYSIWYG:!0,isMultiChord:!1,dispatchParts:[y],singleModifierDispatchParts:[null]})}t(e.UpArrow,"Lang3","UpArrow","Up","up","[ArrowUp]"),t(e.DownArrow,"NumpadEnter","DownArrow","Down","down","[ArrowDown]"),t(e.LeftArrow,"Convert","LeftArrow","Left","left","[ArrowLeft]"),t(e.RightArrow,"NonConvert","RightArrow","Right","right","[ArrowRight]"),t(e.Delete,"PrintScreen","Delete","Delete","delete","[Delete]"),t(e.Insert,"NumpadDivide","Insert","Insert","insert","[Insert]"),t(e.End,"Unknown","End","End","end","[End]"),t(e.Home,"IntlRo","Home","Home","home","[Home]"),t(e.PageDown,"ControlRight","PageDown","PageDown","pagedown","[PageDown]"),t(e.PageUp,"Lang4","PageUp","PageUp","pageup","[PageUp]"),t(e.PageDown,"ControlRight","PageDown","PageDown","pagedown","[PageDown]"),t(e.PageUp,"Lang4","PageUp","PageUp","pageup","[PageUp]"),t(e.End,"","End","End","end","[End]"),t(e.Home,"IntlRo","Home","Home","home","[Home]"),t(e.Delete,"PrintScreen","Delete","Delete","delete","[Delete]"),t(e.Insert,"NumpadDivide","Insert","Insert","insert","[Insert]"),t(e.RightArrow,"NonConvert","RightArrow","Right","right","[ArrowRight]"),t(e.LeftArrow,"Convert","LeftArrow","Left","left","[ArrowLeft]"),t(e.DownArrow,"NumpadEnter","DownArrow","Down","down","[ArrowDown]"),t(e.UpArrow,"Lang3","UpArrow","Up","up","[ArrowUp]")})}),suite("keyboardMapper - LINUX ru",()=>{u();let r;suiteSetup(async()=>{r=await c(!1,"linux_ru",!1,o.Linux)}),test("mapping",()=>f(C,r,"linux_ru.txt"));function t(a,i){d(r,b(a,o.Linux),i)}test("resolveKeybinding Ctrl+S",()=>{t(l.CtrlCmd|e.KeyS,[{label:"Ctrl+S",ariaLabel:"Control+S",electronAccelerator:"Ctrl+S",userSettingsLabel:"ctrl+s",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["ctrl+[KeyS]"],singleModifierDispatchParts:[null]}])})}),suite("keyboardMapper - LINUX en_uk",()=>{u();let r;suiteSetup(async()=>{r=await c(!1,"linux_en_uk",!1,o.Linux)}),test("mapping",()=>f(C,r,"linux_en_uk.txt")),test("issue #24522: resolveKeyboardEvent Ctrl+Alt+[Minus]",()=>{s(r,{_standardKeyboardEventBrand:!0,ctrlKey:!0,shiftKey:!1,altKey:!0,metaKey:!1,altGraphKey:!1,keyCode:-1,code:"Minus"},{label:"Ctrl+Alt+-",ariaLabel:"Control+Alt+-",electronAccelerator:null,userSettingsLabel:"ctrl+alt+[Minus]",isWYSIWYG:!1,isMultiChord:!1,dispatchParts:["ctrl+alt+[Minus]"],singleModifierDispatchParts:[null]})})}),suite("keyboardMapper - MAC zh_hant",()=>{u();let r;suiteSetup(async()=>{r=await c(!1,"mac_zh_hant",!1,o.Macintosh)}),test("mapping",()=>f(C,r,"mac_zh_hant.txt"));function t(a,i){d(r,b(a,o.Macintosh),i)}test("issue #28237 resolveKeybinding Cmd+C",()=>{t(l.CtrlCmd|e.KeyC,[{label:"\u2318C",ariaLabel:"Command+C",electronAccelerator:"Cmd+C",userSettingsLabel:"cmd+c",isWYSIWYG:!0,isMultiChord:!1,dispatchParts:["meta+[KeyC]"],singleModifierDispatchParts:[null]}])})}),suite("keyboardMapper - MAC zh_hant2",()=>{u();let r;suiteSetup(async()=>{r=await c(!1,"mac_zh_hant2",!1,o.Macintosh)}),test("mapping",()=>f(C,r,"mac_zh_hant2.txt"))});function v(r,t,a,i){let n;typeof i=="string"?n=[i]:Array.isArray(i)?n=i:n=[];const h=w(a,t),m=new I([h],t).getUserSettingsLabel(),y=r.keyCodeChordToScanCodeChord(h);if(y.length===0){A.deepStrictEqual([],n,`simpleKeybindingToHardwareKeypress -- "${m}" -- actual: "[]" -- expected: "${n}"`);return}const P=y.map(Y=>G.toLabel(t,[Y],D=>W.toString(D.scanCode)));A.deepStrictEqual(P,n,`simpleKeybindingToHardwareKeypress -- "${m}" -- actual: "${P}" -- expected: "${n}"`)}
