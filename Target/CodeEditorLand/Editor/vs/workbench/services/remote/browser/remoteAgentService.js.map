{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/services/remote/browser/remoteAgentService.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as nls from '../../../../nls.js';\nimport { IWorkbenchEnvironmentService } from '../../environment/common/environmentService.js';\nimport { IRemoteAgentService } from '../common/remoteAgentService.js';\nimport { IRemoteAuthorityResolverService, RemoteAuthorityResolverError } from '../../../../platform/remote/common/remoteAuthorityResolver.js';\nimport { AbstractRemoteAgentService } from '../common/abstractRemoteAgentService.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\nimport { ISignService } from '../../../../platform/sign/common/sign.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { Severity } from '../../../../platform/notification/common/notification.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { IWorkbenchContribution, WorkbenchPhase, registerWorkbenchContribution2 } from '../../../common/contributions.js';\nimport { IHostService } from '../../host/browser/host.js';\nimport { IUserDataProfileService } from '../../userDataProfile/common/userDataProfile.js';\nimport { IRemoteSocketFactoryService } from '../../../../platform/remote/common/remoteSocketFactoryService.js';\n\nexport class RemoteAgentService extends AbstractRemoteAgentService implements IRemoteAgentService {\n\n\tconstructor(\n\t\t@IRemoteSocketFactoryService remoteSocketFactoryService: IRemoteSocketFactoryService,\n\t\t@IUserDataProfileService userDataProfileService: IUserDataProfileService,\n\t\t@IWorkbenchEnvironmentService environmentService: IWorkbenchEnvironmentService,\n\t\t@IProductService productService: IProductService,\n\t\t@IRemoteAuthorityResolverService remoteAuthorityResolverService: IRemoteAuthorityResolverService,\n\t\t@ISignService signService: ISignService,\n\t\t@ILogService logService: ILogService\n\t) {\n\t\tsuper(remoteSocketFactoryService, userDataProfileService, environmentService, productService, remoteAuthorityResolverService, signService, logService);\n\t}\n}\n\nclass RemoteConnectionFailureNotificationContribution implements IWorkbenchContribution {\n\n\tstatic readonly ID = 'workbench.contrib.browserRemoteConnectionFailureNotification';\n\n\tconstructor(\n\t\t@IRemoteAgentService remoteAgentService: IRemoteAgentService,\n\t\t@IDialogService private readonly _dialogService: IDialogService,\n\t\t@IHostService private readonly _hostService: IHostService,\n\t) {\n\t\t// Let's cover the case where connecting to fetch the remote extension info fails\n\t\tremoteAgentService.getRawEnvironment()\n\t\t\t.then(undefined, (err) => {\n\t\t\t\tif (!RemoteAuthorityResolverError.isHandled(err)) {\n\t\t\t\t\tthis._presentConnectionError(err);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tprivate async _presentConnectionError(err: any): Promise<void> {\n\t\tawait this._dialogService.prompt({\n\t\t\ttype: Severity.Error,\n\t\t\tmessage: nls.localize('connectionError', \"An unexpected error occurred that requires a reload of this page.\"),\n\t\t\tdetail: nls.localize('connectionErrorDetail', \"The workbench failed to connect to the server (Error: {0})\", err ? err.message : ''),\n\t\t\tbuttons: [\n\t\t\t\t{\n\t\t\t\t\tlabel: nls.localize({ key: 'reload', comment: ['&& denotes a mnemonic'] }, \"&&Reload\"),\n\t\t\t\t\trun: () => this._hostService.reload()\n\t\t\t\t}\n\t\t\t]\n\t\t});\n\t}\n\n}\n\nregisterWorkbenchContribution2(RemoteConnectionFailureNotificationContribution.ID, RemoteConnectionFailureNotificationContribution, WorkbenchPhase.BlockRestore);\n"],
  "mappings": ";;;;;;;;;;;;AAKA,YAAY,SAAS;AACrB,SAAS,oCAAoC;AAC7C,SAAS,2BAA2B;AACpC,SAAS,iCAAiC,oCAAoC;AAC9E,SAAS,kCAAkC;AAC3C,SAAS,uBAAuB;AAChC,SAAS,oBAAoB;AAC7B,SAAS,mBAAmB;AAC5B,SAAS,gBAAgB;AACzB,SAAS,sBAAsB;AAC/B,SAAS,wBAAwB,gBAAgB,sCAAsC;AACvF,SAAS,oBAAoB;AAC7B,SAAS,+BAA+B;AACxC,SAAS,mCAAmC;AAErC,IAAM,qBAAN,cAAiC,2BAA0D;AAAA,EApBlG,OAoBkG;AAAA;AAAA;AAAA,EAEjG,YAC8B,4BACJ,wBACK,oBACb,gBACgB,gCACnB,aACD,YACZ;AACD,UAAM,4BAA4B,wBAAwB,oBAAoB,gBAAgB,gCAAgC,aAAa,UAAU;AAAA,EACtJ;AACD;AAba,qBAAN;AAAA,EAGJ;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,GATU;AAeb,IAAM,kDAAN,MAAwF;AAAA,EAIvF,YACsB,oBACY,gBACF,cAC9B;AAFgC;AACF;AAG/B,uBAAmB,kBAAkB,EACnC,KAAK,QAAW,CAAC,QAAQ;AACzB,UAAI,CAAC,6BAA6B,UAAU,GAAG,GAAG;AACjD,aAAK,wBAAwB,GAAG;AAAA,MACjC;AAAA,IACD,CAAC;AAAA,EACH;AAAA,EAnDD,OAmCwF;AAAA;AAAA;AAAA,EAEvF,OAAgB,KAAK;AAAA,EAgBrB,MAAc,wBAAwB,KAAyB;AAC9D,UAAM,KAAK,eAAe,OAAO;AAAA,MAChC,MAAM,SAAS;AAAA,MACf,SAAS,IAAI,SAAS,mBAAmB,mEAAmE;AAAA,MAC5G,QAAQ,IAAI,SAAS,yBAAyB,8DAA8D,MAAM,IAAI,UAAU,EAAE;AAAA,MAClI,SAAS;AAAA,QACR;AAAA,UACC,OAAO,IAAI,SAAS,EAAE,KAAK,UAAU,SAAS,CAAC,uBAAuB,EAAE,GAAG,UAAU;AAAA,UACrF,KAAK,6BAAM,KAAK,aAAa,OAAO,GAA/B;AAAA,QACN;AAAA,MACD;AAAA,IACD,CAAC;AAAA,EACF;AAED;AAhCM,kDAAN;AAAA,EAKG;AAAA,EACA;AAAA,EACA;AAAA,GAPG;AAkCN,+BAA+B,gDAAgD,IAAI,iDAAiD,eAAe,YAAY;",
  "names": []
}
