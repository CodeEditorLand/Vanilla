{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/services/url/browser/urlService.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IURLService } from '../../../../platform/url/common/url.js';\nimport { URI, UriComponents } from '../../../../base/common/uri.js';\nimport { InstantiationType, registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { AbstractURLService } from '../../../../platform/url/common/urlService.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { IBrowserWorkbenchEnvironmentService } from '../../environment/browser/environmentService.js';\nimport { IOpenerService, IOpener, OpenExternalOptions, OpenInternalOptions } from '../../../../platform/opener/common/opener.js';\nimport { matchesScheme } from '../../../../base/common/network.js';\nimport { IProductService } from '../../../../platform/product/common/productService.js';\n\nexport interface IURLCallbackProvider {\n\n\t/**\n\t * Indicates that a Uri has been opened outside of VSCode. The Uri\n\t * will be forwarded to all installed Uri handlers in the system.\n\t */\n\treadonly onCallback: Event<URI>;\n\n\t/**\n\t * Creates a Uri that - if opened in a browser - must result in\n\t * the `onCallback` to fire.\n\t *\n\t * The optional `Partial<UriComponents>` must be properly restored for\n\t * the Uri passed to the `onCallback` handler.\n\t *\n\t * For example: if a Uri is to be created with `scheme:\"vscode\"`,\n\t * `authority:\"foo\"` and `path:\"bar\"` the `onCallback` should fire\n\t * with a Uri `vscode://foo/bar`.\n\t *\n\t * If there are additional `query` values in the Uri, they should\n\t * be added to the list of provided `query` arguments from the\n\t * `Partial<UriComponents>`.\n\t */\n\tcreate(options?: Partial<UriComponents>): URI;\n}\n\nclass BrowserURLOpener implements IOpener {\n\n\tconstructor(\n\t\tprivate urlService: IURLService,\n\t\tprivate productService: IProductService\n\t) { }\n\n\tasync open(resource: string | URI, options?: OpenInternalOptions | OpenExternalOptions): Promise<boolean> {\n\t\tif ((options as OpenExternalOptions | undefined)?.openExternal) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!matchesScheme(resource, this.productService.urlProtocol)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (typeof resource === 'string') {\n\t\t\tresource = URI.parse(resource);\n\t\t}\n\n\t\treturn this.urlService.open(resource, { trusted: true });\n\t}\n}\n\nexport class BrowserURLService extends AbstractURLService {\n\n\tprivate provider: IURLCallbackProvider | undefined;\n\n\tconstructor(\n\t\t@IBrowserWorkbenchEnvironmentService environmentService: IBrowserWorkbenchEnvironmentService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IProductService productService: IProductService\n\t) {\n\t\tsuper();\n\n\t\tthis.provider = environmentService.options?.urlCallbackProvider;\n\n\t\tif (this.provider) {\n\t\t\tthis._register(this.provider.onCallback(uri => this.open(uri, { trusted: true })));\n\t\t}\n\n\t\tthis._register(openerService.registerOpener(new BrowserURLOpener(this, productService)));\n\t}\n\n\tcreate(options?: Partial<UriComponents>): URI {\n\t\tif (this.provider) {\n\t\t\treturn this.provider.create(options);\n\t\t}\n\n\t\treturn URI.parse('unsupported://');\n\t}\n}\n\nregisterSingleton(IURLService, BrowserURLService, InstantiationType.Delayed);\n"],
  "mappings": ";;;;;;;;;;;;AAKA,SAAS,mBAAmB;AAC5B,SAAS,KAAK,qBAAqB;AACnC,SAAS,mBAAmB,yBAAyB;AACrD,SAAS,0BAA0B;AACnC,SAAS,aAAa;AACtB,SAAS,2CAA2C;AACpD,SAAS,gBAAgB,SAAS,qBAAqB,2BAA2B;AAClF,SAAS,qBAAqB;AAC9B,SAAS,uBAAuB;AA4BhC,MAAM,iBAAoC;AAAA,EAEzC,YACS,YACA,gBACP;AAFO;AACA;AAAA,EACL;AAAA,EA9CL,OAyC0C;AAAA;AAAA;AAAA,EAOzC,MAAM,KAAK,UAAwB,SAAuE;AACzG,QAAK,SAA6C,cAAc;AAC/D,aAAO;AAAA,IACR;AAEA,QAAI,CAAC,cAAc,UAAU,KAAK,eAAe,WAAW,GAAG;AAC9D,aAAO;AAAA,IACR;AAEA,QAAI,OAAO,aAAa,UAAU;AACjC,iBAAW,IAAI,MAAM,QAAQ;AAAA,IAC9B;AAEA,WAAO,KAAK,WAAW,KAAK,UAAU,EAAE,SAAS,KAAK,CAAC;AAAA,EACxD;AACD;AAEO,IAAM,oBAAN,cAAgC,mBAAmB;AAAA,EAjE1D,OAiE0D;AAAA;AAAA;AAAA,EAEjD;AAAA,EAER,YACsC,oBACrB,eACC,gBAChB;AACD,UAAM;AAEN,SAAK,WAAW,mBAAmB,SAAS;AAE5C,QAAI,KAAK,UAAU;AAClB,WAAK,UAAU,KAAK,SAAS,WAAW,SAAO,KAAK,KAAK,KAAK,EAAE,SAAS,KAAK,CAAC,CAAC,CAAC;AAAA,IAClF;AAEA,SAAK,UAAU,cAAc,eAAe,IAAI,iBAAiB,MAAM,cAAc,CAAC,CAAC;AAAA,EACxF;AAAA,EAEA,OAAO,SAAuC;AAC7C,QAAI,KAAK,UAAU;AAClB,aAAO,KAAK,SAAS,OAAO,OAAO;AAAA,IACpC;AAEA,WAAO,IAAI,MAAM,gBAAgB;AAAA,EAClC;AACD;AA3Ba,oBAAN;AAAA,EAKJ;AAAA,EACA;AAAA,EACA;AAAA,GAPU;AA6Bb,kBAAkB,aAAa,mBAAmB,kBAAkB,OAAO;",
  "names": []
}
