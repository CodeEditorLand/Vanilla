{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/services/url/browser/urlService.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { Event } from \"../../../../base/common/event.js\";\nimport { matchesScheme } from \"../../../../base/common/network.js\";\nimport { URI, type UriComponents } from \"../../../../base/common/uri.js\";\nimport {\n\tInstantiationType,\n\tregisterSingleton,\n} from \"../../../../platform/instantiation/common/extensions.js\";\nimport {\n\ttype IOpener,\n\tIOpenerService,\n\ttype OpenExternalOptions,\n\ttype OpenInternalOptions,\n} from \"../../../../platform/opener/common/opener.js\";\nimport { IProductService } from \"../../../../platform/product/common/productService.js\";\nimport { IURLService } from \"../../../../platform/url/common/url.js\";\nimport { AbstractURLService } from \"../../../../platform/url/common/urlService.js\";\nimport { IBrowserWorkbenchEnvironmentService } from \"../../environment/browser/environmentService.js\";\n\nexport interface IURLCallbackProvider {\n\t/**\n\t * Indicates that a Uri has been opened outside of VSCode. The Uri\n\t * will be forwarded to all installed Uri handlers in the system.\n\t */\n\treadonly onCallback: Event<URI>;\n\n\t/**\n\t * Creates a Uri that - if opened in a browser - must result in\n\t * the `onCallback` to fire.\n\t *\n\t * The optional `Partial<UriComponents>` must be properly restored for\n\t * the Uri passed to the `onCallback` handler.\n\t *\n\t * For example: if a Uri is to be created with `scheme:\"vscode\"`,\n\t * `authority:\"foo\"` and `path:\"bar\"` the `onCallback` should fire\n\t * with a Uri `vscode://foo/bar`.\n\t *\n\t * If there are additional `query` values in the Uri, they should\n\t * be added to the list of provided `query` arguments from the\n\t * `Partial<UriComponents>`.\n\t */\n\tcreate(options?: Partial<UriComponents>): URI;\n}\n\nclass BrowserURLOpener implements IOpener {\n\tconstructor(\n\t\tprivate urlService: IURLService,\n\t\tprivate productService: IProductService,\n\t) {}\n\n\tasync open(\n\t\tresource: string | URI,\n\t\toptions?: OpenInternalOptions | OpenExternalOptions,\n\t): Promise<boolean> {\n\t\tif ((options as OpenExternalOptions | undefined)?.openExternal) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!matchesScheme(resource, this.productService.urlProtocol)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (typeof resource === \"string\") {\n\t\t\tresource = URI.parse(resource);\n\t\t}\n\n\t\treturn this.urlService.open(resource, { trusted: true });\n\t}\n}\n\nexport class BrowserURLService extends AbstractURLService {\n\tprivate provider: IURLCallbackProvider | undefined;\n\n\tconstructor(\n\t\t@IBrowserWorkbenchEnvironmentService\n\t\tenvironmentService: IBrowserWorkbenchEnvironmentService,\n\t\t@IOpenerService openerService: IOpenerService,\n\t\t@IProductService productService: IProductService,\n\t) {\n\t\tsuper();\n\n\t\tthis.provider = environmentService.options?.urlCallbackProvider;\n\n\t\tif (this.provider) {\n\t\t\tthis._register(\n\t\t\t\tthis.provider.onCallback((uri) =>\n\t\t\t\t\tthis.open(uri, { trusted: true }),\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\n\t\tthis._register(\n\t\t\topenerService.registerOpener(\n\t\t\t\tnew BrowserURLOpener(this, productService),\n\t\t\t),\n\t\t);\n\t}\n\n\tcreate(options?: Partial<UriComponents>): URI {\n\t\tif (this.provider) {\n\t\t\treturn this.provider.create(options);\n\t\t}\n\n\t\treturn URI.parse(\"unsupported://\");\n\t}\n}\n\nregisterSingleton(IURLService, BrowserURLService, InstantiationType.Delayed);\n"],
  "mappings": ";;;;;;;;;;;;AAMA,SAAS,qBAAqB;AAC9B,SAAS,WAA+B;AACxC;AAAA,EACC;AAAA,EACA;AAAA,OACM;AACP;AAAA,EAEC;AAAA,OAGM;AACP,SAAS,uBAAuB;AAChC,SAAS,mBAAmB;AAC5B,SAAS,0BAA0B;AACnC,SAAS,2CAA2C;AA2BpD,MAAM,iBAAoC;AAAA,EACzC,YACS,YACA,gBACP;AAFO;AACA;AAAA,EACN;AAAA,EApDJ,OAgD0C;AAAA;AAAA;AAAA,EAMzC,MAAM,KACL,UACA,SACmB;AACnB,QAAK,SAA6C,cAAc;AAC/D,aAAO;AAAA,IACR;AAEA,QAAI,CAAC,cAAc,UAAU,KAAK,eAAe,WAAW,GAAG;AAC9D,aAAO;AAAA,IACR;AAEA,QAAI,OAAO,aAAa,UAAU;AACjC,iBAAW,IAAI,MAAM,QAAQ;AAAA,IAC9B;AAEA,WAAO,KAAK,WAAW,KAAK,UAAU,EAAE,SAAS,KAAK,CAAC;AAAA,EACxD;AACD;AAEO,IAAM,oBAAN,cAAgC,mBAAmB;AAAA,EA1E1D,OA0E0D;AAAA;AAAA;AAAA,EACjD;AAAA,EAER,YAEC,oBACgB,eACC,gBAChB;AACD,UAAM;AAEN,SAAK,WAAW,mBAAmB,SAAS;AAE5C,QAAI,KAAK,UAAU;AAClB,WAAK;AAAA,QACJ,KAAK,SAAS;AAAA,UAAW,CAAC,QACzB,KAAK,KAAK,KAAK,EAAE,SAAS,KAAK,CAAC;AAAA,QACjC;AAAA,MACD;AAAA,IACD;AAEA,SAAK;AAAA,MACJ,cAAc;AAAA,QACb,IAAI,iBAAiB,MAAM,cAAc;AAAA,MAC1C;AAAA,IACD;AAAA,EACD;AAAA,EAEA,OAAO,SAAuC;AAC7C,QAAI,KAAK,UAAU;AAClB,aAAO,KAAK,SAAS,OAAO,OAAO;AAAA,IACpC;AAEA,WAAO,IAAI,MAAM,gBAAgB;AAAA,EAClC;AACD;AAnCa,oBAAN;AAAA,EAIJ;AAAA,EAEA;AAAA,EACA;AAAA,GAPU;AAqCb,kBAAkB,aAAa,mBAAmB,kBAAkB,OAAO;",
  "names": []
}
