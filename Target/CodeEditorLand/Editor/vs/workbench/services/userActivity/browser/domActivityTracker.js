import*as t from"../../../../base/browser/dom.js";import{mainWindow as m}from"../../../../base/browser/window.js";import{Event as v}from"../../../../base/common/event.js";import{Disposable as p,MutableDisposable as u}from"../../../../base/common/lifecycle.js";const A=3e4,n=2,a={passive:!0,capture:!0};class D extends p{constructor(c){super();let r=n;const d=this._register(new t.WindowIntervalTimer),s=this._register(new u);s.value=c.markActive();const l=()=>{++r===n&&(s.clear(),d.cancel())},i=e=>{r===n&&(s.value=c.markActive(),d.cancelAndSet(l,A,e)),r=0};this._register(v.runAndSubscribe(t.onDidRegisterWindow,({window:e,disposables:o})=>{o.add(t.addDisposableListener(e.document,"touchstart",()=>i(e),a)),o.add(t.addDisposableListener(e.document,"mousedown",()=>i(e),a)),o.add(t.addDisposableListener(e.document,"keydown",()=>i(e),a))},{window:m,disposables:this._store})),i(m)}}export{D as DomActivityTracker};
