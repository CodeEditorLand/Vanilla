var v=Object.defineProperty;var A=Object.getOwnPropertyDescriptor;var d=(i,e,r,t)=>{for(var s=t>1?void 0:t?A(e,r):e,o=i.length-1,n;o>=0;o--)(n=i[o])&&(s=(t?n(e,r,s):n(s))||s);return t&&s&&v(e,r,s),s},u=(i,e)=>(r,t)=>e(r,t,i);import{InstantiationType as U,registerSingleton as p}from"../../../../platform/instantiation/common/extensions.js";import{createDecorator as S}from"../../../../platform/instantiation/common/instantiation.js";import{IStorageService as m,StorageScope as c,StorageTarget as l}from"../../../../platform/storage/common/storage.js";const f=S("IAuthenticationUsageService");let a=class{constructor(e){this._storageService=e}_serviceBrand;readAccountUsages(e,r){const t=`${e}-${r}-usages`,s=this._storageService.get(t,c.APPLICATION);let o=[];if(s)try{o=JSON.parse(s)}catch{}return o}removeAccountUsage(e,r){const t=`${e}-${r}-usages`;this._storageService.remove(t,c.APPLICATION)}addAccountUsage(e,r,t,s){const o=`${e}-${r}-usages`,n=this.readAccountUsages(e,r),g=n.findIndex(I=>I.extensionId===t);g>-1?n.splice(g,1,{extensionId:t,extensionName:s,lastUsed:Date.now()}):n.push({extensionId:t,extensionName:s,lastUsed:Date.now()}),this._storageService.store(o,JSON.stringify(n),c.APPLICATION,l.MACHINE)}};a=d([u(0,m)],a),p(f,a,U.Delayed);export{a as AuthenticationUsageService,f as IAuthenticationUsageService};
