import{Emitter as i,Event as s}from"../../../../base/common/event.js";import{Disposable as a}from"../../../../base/common/lifecycle.js";import{InstantiationType as d,registerSingleton as m}from"../../../../platform/instantiation/common/extensions.js";import{createDecorator as l}from"../../../../platform/instantiation/common/instantiation.js";import{ProcessPropertyType as p}from"../../../../platform/terminal/common/terminal.js";const c=l("embedderTerminalService");class y{_onDidCreateTerminal=new i;onDidCreateTerminal=s.buffer(this._onDidCreateTerminal.event);createTerminal(t){const e={name:t.name,isFeatureTerminal:!0,customPtyImplementation(r,n,h){return new P(r,t.pty)}};this._onDidCreateTerminal.fire(e)}}class P extends a{constructor(e,r){super();this.id=e;this._pty=r,this.onProcessData=this._pty.onDidWrite,this._pty.onDidClose&&this._register(this._pty.onDidClose(n=>this._onProcessExit.fire(n||void 0))),this._pty.onDidChangeName&&this._register(this._pty.onDidChangeName(n=>this._onDidChangeProperty.fire({type:p.Title,value:n})))}_pty;shouldPersist=!1;onProcessData;_onProcessReady=this._register(new i);onProcessReady=this._onProcessReady.event;_onDidChangeProperty=this._register(new i);onDidChangeProperty=this._onDidChangeProperty.event;_onProcessExit=this._register(new i);onProcessExit=this._onProcessExit.event;async start(){this._onProcessReady.fire({pid:-1,cwd:"",windowsPty:void 0}),this._pty.open()}shutdown(){this._pty.close()}input(){}async processBinary(){}resize(){}clearBuffer(){}acknowledgeDataEvent(){}async setUnicodeVersion(){}async getInitialCwd(){return""}async getCwd(){return""}refreshProperty(e){throw new Error(`refreshProperty is not suppported in EmbedderTerminalProcess. property: ${e}`)}updateProperty(e,r){throw new Error(`updateProperty is not suppported in EmbedderTerminalProcess. property: ${e}, value: ${r}`)}}m(c,y,d.Delayed);export{c as IEmbedderTerminalService};
