import{Promises as o}from"../../../../../vs/base/common/async.js";import{Emitter as n}from"../../../../../vs/base/common/event.js";import{Disposable as a}from"../../../../../vs/base/common/lifecycle.js";import{equals as s}from"../../../../../vs/base/common/objects.js";import{ThemeIcon as f}from"../../../../../vs/base/common/themables.js";import"../../../../../vs/platform/userDataProfile/common/userDataProfile.js";import{defaultUserDataProfileIcon as l}from"../../../../../vs/workbench/services/userDataProfile/common/userDataProfile.js";class I extends a{_serviceBrand;_onDidChangeCurrentProfile=this._register(new n);onDidChangeCurrentProfile=this._onDidChangeCurrentProfile.event;_currentProfile;get currentProfile(){return this._currentProfile}constructor(r){super(),this._currentProfile=r}async updateCurrentProfile(r){if(s(this._currentProfile,r))return;const t=this._currentProfile;this._currentProfile=r;const e=[];this._onDidChangeCurrentProfile.fire({previous:t,profile:r,join(i){e.push(i)}}),await o.settled(e)}getShortName(r){return!r.isDefault&&r.shortName&&f.fromId(r.shortName)?r.shortName:`$(${l.id})`}}export{I as UserDataProfileService};
