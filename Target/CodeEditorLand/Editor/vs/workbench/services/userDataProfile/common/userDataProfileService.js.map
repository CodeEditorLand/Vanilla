{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/services/userDataProfile/common/userDataProfileService.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Promises } from '../../../../base/common/async.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { equals } from '../../../../base/common/objects.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { IUserDataProfile } from '../../../../platform/userDataProfile/common/userDataProfile.js';\nimport { defaultUserDataProfileIcon, DidChangeUserDataProfileEvent, IUserDataProfileService } from './userDataProfile.js';\n\nexport class UserDataProfileService extends Disposable implements IUserDataProfileService {\n\n\treadonly _serviceBrand: undefined;\n\n\tprivate readonly _onDidChangeCurrentProfile = this._register(new Emitter<DidChangeUserDataProfileEvent>());\n\treadonly onDidChangeCurrentProfile = this._onDidChangeCurrentProfile.event;\n\n\tprivate _currentProfile: IUserDataProfile;\n\tget currentProfile(): IUserDataProfile { return this._currentProfile; }\n\n\tconstructor(\n\t\tcurrentProfile: IUserDataProfile\n\t) {\n\t\tsuper();\n\t\tthis._currentProfile = currentProfile;\n\t}\n\n\tasync updateCurrentProfile(userDataProfile: IUserDataProfile): Promise<void> {\n\t\tif (equals(this._currentProfile, userDataProfile)) {\n\t\t\treturn;\n\t\t}\n\t\tconst previous = this._currentProfile;\n\t\tthis._currentProfile = userDataProfile;\n\t\tconst joiners: Promise<void>[] = [];\n\t\tthis._onDidChangeCurrentProfile.fire({\n\t\t\tprevious,\n\t\t\tprofile: userDataProfile,\n\t\t\tjoin(promise) {\n\t\t\t\tjoiners.push(promise);\n\t\t\t}\n\t\t});\n\t\tawait Promises.settled(joiners);\n\t}\n\n\tgetShortName(profile: IUserDataProfile): string {\n\t\tif (!profile.isDefault && profile.shortName && ThemeIcon.fromId(profile.shortName)) {\n\t\t\treturn profile.shortName;\n\t\t}\n\t\treturn `$(${defaultUserDataProfileIcon.id})`;\n\t}\n\n}\n"],
  "mappings": ";;AAKA,SAAS,gBAAgB;AACzB,SAAS,eAAe;AACxB,SAAS,kBAAkB;AAC3B,SAAS,cAAc;AACvB,SAAS,iBAAiB;AAC1B,SAAS,wBAAwB;AACjC,SAAS,4BAA4B,+BAA+B,+BAA+B;AAE5F,MAAM,+BAA+B,WAA8C;AAAA,EAb1F,OAa0F;AAAA;AAAA;AAAA,EAEhF;AAAA,EAEQ,6BAA6B,KAAK,UAAU,IAAI,QAAuC,CAAC;AAAA,EAChG,4BAA4B,KAAK,2BAA2B;AAAA,EAE7D;AAAA,EACR,IAAI,iBAAmC;AAAE,WAAO,KAAK;AAAA,EAAiB;AAAA,EAEtE,YACC,gBACC;AACD,UAAM;AACN,SAAK,kBAAkB;AAAA,EACxB;AAAA,EAEA,MAAM,qBAAqB,iBAAkD;AAC5E,QAAI,OAAO,KAAK,iBAAiB,eAAe,GAAG;AAClD;AAAA,IACD;AACA,UAAM,WAAW,KAAK;AACtB,SAAK,kBAAkB;AACvB,UAAM,UAA2B,CAAC;AAClC,SAAK,2BAA2B,KAAK;AAAA,MACpC;AAAA,MACA,SAAS;AAAA,MACT,KAAK,SAAS;AACb,gBAAQ,KAAK,OAAO;AAAA,MACrB;AAAA,IACD,CAAC;AACD,UAAM,SAAS,QAAQ,OAAO;AAAA,EAC/B;AAAA,EAEA,aAAa,SAAmC;AAC/C,QAAI,CAAC,QAAQ,aAAa,QAAQ,aAAa,UAAU,OAAO,QAAQ,SAAS,GAAG;AACnF,aAAO,QAAQ;AAAA,IAChB;AACA,WAAO,KAAK,2BAA2B,EAAE;AAAA,EAC1C;AAED;",
  "names": []
}
