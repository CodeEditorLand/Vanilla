{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/services/userDataProfile/common/userDataProfile.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport type { CancellationToken } from \"../../../../base/common/cancellation.js\";\nimport { Codicon } from \"../../../../base/common/codicons.js\";\nimport type { Event } from \"../../../../base/common/event.js\";\nimport type { IDisposable } from \"../../../../base/common/lifecycle.js\";\nimport { isUndefined } from \"../../../../base/common/types.js\";\nimport { URI } from \"../../../../base/common/uri.js\";\nimport { localize, localize2 } from \"../../../../nls.js\";\nimport { RawContextKey } from \"../../../../platform/contextkey/common/contextkey.js\";\nimport { createDecorator } from \"../../../../platform/instantiation/common/instantiation.js\";\nimport type { IProductService } from \"../../../../platform/product/common/productService.js\";\nimport { registerIcon } from \"../../../../platform/theme/common/iconRegistry.js\";\nimport type {\n\tIUserDataProfile,\n\tIUserDataProfileOptions,\n\tIUserDataProfileUpdateOptions,\n\tProfileResourceType,\n\tProfileResourceTypeFlags,\n} from \"../../../../platform/userDataProfile/common/userDataProfile.js\";\nimport type { ITreeItem, ITreeItemLabel } from \"../../../common/views.js\";\n\nexport interface DidChangeUserDataProfileEvent {\n\treadonly previous: IUserDataProfile;\n\treadonly profile: IUserDataProfile;\n\tjoin(promise: Promise<void>): void;\n}\n\nexport const IUserDataProfileService = createDecorator<IUserDataProfileService>(\n\t\"IUserDataProfileService\",\n);\nexport interface IUserDataProfileService {\n\treadonly _serviceBrand: undefined;\n\treadonly currentProfile: IUserDataProfile;\n\treadonly onDidChangeCurrentProfile: Event<DidChangeUserDataProfileEvent>;\n\tupdateCurrentProfile(currentProfile: IUserDataProfile): Promise<void>;\n\tgetShortName(profile: IUserDataProfile): string;\n}\n\nexport interface IProfileTemplateInfo {\n\treadonly name: string;\n\treadonly url: string;\n}\n\nexport const IUserDataProfileManagementService =\n\tcreateDecorator<IUserDataProfileManagementService>(\n\t\t\"IUserDataProfileManagementService\",\n\t);\nexport interface IUserDataProfileManagementService {\n\treadonly _serviceBrand: undefined;\n\n\tcreateProfile(\n\t\tname: string,\n\t\toptions?: IUserDataProfileOptions,\n\t): Promise<IUserDataProfile>;\n\tcreateAndEnterProfile(\n\t\tname: string,\n\t\toptions?: IUserDataProfileOptions,\n\t): Promise<IUserDataProfile>;\n\tcreateAndEnterTransientProfile(): Promise<IUserDataProfile>;\n\tremoveProfile(profile: IUserDataProfile): Promise<void>;\n\tupdateProfile(\n\t\tprofile: IUserDataProfile,\n\t\tupdateOptions: IUserDataProfileUpdateOptions,\n\t): Promise<IUserDataProfile>;\n\tswitchProfile(profile: IUserDataProfile): Promise<void>;\n\tgetBuiltinProfileTemplates(): Promise<IProfileTemplateInfo[]>;\n}\n\nexport interface IUserDataProfileTemplate {\n\treadonly name: string;\n\treadonly icon?: string;\n\treadonly settings?: string;\n\treadonly keybindings?: string;\n\treadonly tasks?: string;\n\treadonly snippets?: string;\n\treadonly globalState?: string;\n\treadonly extensions?: string;\n}\n\nexport function isUserDataProfileTemplate(\n\tthing: unknown,\n): thing is IUserDataProfileTemplate {\n\tconst candidate = thing as IUserDataProfileTemplate | undefined;\n\n\treturn !!(\n\t\tcandidate &&\n\t\ttypeof candidate === \"object\" &&\n\t\t(isUndefined(candidate.settings) ||\n\t\t\ttypeof candidate.settings === \"string\") &&\n\t\t(isUndefined(candidate.globalState) ||\n\t\t\ttypeof candidate.globalState === \"string\") &&\n\t\t(isUndefined(candidate.extensions) ||\n\t\t\ttypeof candidate.extensions === \"string\")\n\t);\n}\n\nexport const PROFILE_URL_AUTHORITY = \"profile\";\nexport function toUserDataProfileUri(\n\tpath: string,\n\tproductService: IProductService,\n): URI {\n\treturn URI.from({\n\t\tscheme: productService.urlProtocol,\n\t\tauthority: PROFILE_URL_AUTHORITY,\n\t\tpath: path.startsWith(\"/\") ? path : `/${path}`,\n\t});\n}\n\nexport const PROFILE_URL_AUTHORITY_PREFIX = \"profile-\";\nexport function isProfileURL(uri: URI): boolean {\n\treturn (\n\t\turi.authority === PROFILE_URL_AUTHORITY ||\n\t\tnew RegExp(`^${PROFILE_URL_AUTHORITY_PREFIX}`).test(uri.authority)\n\t);\n}\n\nexport interface IUserDataProfileCreateOptions extends IUserDataProfileOptions {\n\treadonly name?: string;\n\treadonly resourceTypeFlags?: ProfileResourceTypeFlags;\n}\n\nexport interface IProfileImportOptions extends IUserDataProfileCreateOptions {\n\treadonly name?: string;\n\treadonly icon?: string;\n\treadonly mode?: \"apply\";\n}\n\nexport const IUserDataProfileImportExportService =\n\tcreateDecorator<IUserDataProfileImportExportService>(\n\t\t\"IUserDataProfileImportExportService\",\n\t);\nexport interface IUserDataProfileImportExportService {\n\treadonly _serviceBrand: undefined;\n\n\tregisterProfileContentHandler(\n\t\tid: string,\n\t\tprofileContentHandler: IUserDataProfileContentHandler,\n\t): IDisposable;\n\tunregisterProfileContentHandler(id: string): void;\n\n\tresolveProfileTemplate(uri: URI): Promise<IUserDataProfileTemplate | null>;\n\texportProfile(\n\t\tprofile: IUserDataProfile,\n\t\texportFlags?: ProfileResourceTypeFlags,\n\t): Promise<void>;\n\tcreateFromProfile(\n\t\tfrom: IUserDataProfile,\n\t\toptions: IUserDataProfileCreateOptions,\n\t\ttoken: CancellationToken,\n\t): Promise<IUserDataProfile | undefined>;\n\tcreateProfileFromTemplate(\n\t\tprofileTemplate: IUserDataProfileTemplate,\n\t\toptions: IUserDataProfileCreateOptions,\n\t\ttoken: CancellationToken,\n\t): Promise<IUserDataProfile | undefined>;\n\tcreateTroubleshootProfile(): Promise<void>;\n}\n\nexport interface IProfileResourceInitializer {\n\tinitialize(content: string): Promise<void>;\n}\n\nexport interface IProfileResource {\n\tgetContent(profile: IUserDataProfile): Promise<string>;\n\tapply(content: string, profile: IUserDataProfile): Promise<void>;\n}\n\nexport interface IProfileResourceTreeItem extends ITreeItem {\n\treadonly type: ProfileResourceType;\n\treadonly label: ITreeItemLabel;\n\tisFromDefaultProfile(): boolean;\n\tgetChildren(): Promise<IProfileResourceChildTreeItem[] | undefined>;\n\tgetContent(): Promise<string>;\n}\n\nexport interface IProfileResourceChildTreeItem extends ITreeItem {\n\tparent: IProfileResourceTreeItem;\n}\n\nexport interface ISaveProfileResult {\n\treadonly id: string;\n\treadonly link: URI;\n}\n\nexport interface IUserDataProfileContentHandler {\n\treadonly name: string;\n\treadonly description?: string;\n\treadonly extensionId?: string;\n\tsaveProfile(\n\t\tname: string,\n\t\tcontent: string,\n\t\ttoken: CancellationToken,\n\t): Promise<ISaveProfileResult | null>;\n\treadProfile(\n\t\tidOrUri: string | URI,\n\t\ttoken: CancellationToken,\n\t): Promise<string | null>;\n}\n\nexport const defaultUserDataProfileIcon = registerIcon(\n\t\"defaultProfile-icon\",\n\tCodicon.settings,\n\tlocalize(\"defaultProfileIcon\", \"Icon for Default Profile.\"),\n);\n\nexport const PROFILES_TITLE = localize2(\"profiles\", \"Profiles\");\nexport const PROFILES_CATEGORY = { ...PROFILES_TITLE };\nexport const PROFILE_EXTENSION = \"code-profile\";\nexport const PROFILE_FILTER = [\n\t{ name: localize(\"profile\", \"Profile\"), extensions: [PROFILE_EXTENSION] },\n];\nexport const PROFILES_ENABLEMENT_CONTEXT = new RawContextKey<boolean>(\n\t\"profiles.enabled\",\n\ttrue,\n);\nexport const CURRENT_PROFILE_CONTEXT = new RawContextKey<string>(\n\t\"currentProfile\",\n\t\"\",\n);\nexport const IS_CURRENT_PROFILE_TRANSIENT_CONTEXT = new RawContextKey<boolean>(\n\t\"isCurrentProfileTransient\",\n\tfalse,\n);\nexport const HAS_PROFILES_CONTEXT = new RawContextKey<boolean>(\n\t\"hasProfiles\",\n\tfalse,\n);\n"],
  "mappings": ";;AAMA,SAAS,eAAe;AAGxB,SAAS,mBAAmB;AAC5B,SAAS,WAAW;AACpB,SAAS,UAAU,iBAAiB;AACpC,SAAS,qBAAqB;AAC9B,SAAS,uBAAuB;AAEhC,SAAS,oBAAoB;AAgBtB,MAAM,0BAA0B;AAAA,EACtC;AACD;AAcO,MAAM,oCACZ;AAAA,EACC;AACD;AAiCM,SAAS,0BACf,OACoC;AACpC,QAAM,YAAY;AAElB,SAAO,CAAC,EACP,aACA,OAAO,cAAc,aACpB,YAAY,UAAU,QAAQ,KAC9B,OAAO,UAAU,aAAa,cAC9B,YAAY,UAAU,WAAW,KACjC,OAAO,UAAU,gBAAgB,cACjC,YAAY,UAAU,UAAU,KAChC,OAAO,UAAU,eAAe;AAEnC;AAfgB;AAiBT,MAAM,wBAAwB;AAC9B,SAAS,qBACf,MACA,gBACM;AACN,SAAO,IAAI,KAAK;AAAA,IACf,QAAQ,eAAe;AAAA,IACvB,WAAW;AAAA,IACX,MAAM,KAAK,WAAW,GAAG,IAAI,OAAO,IAAI,IAAI;AAAA,EAC7C,CAAC;AACF;AATgB;AAWT,MAAM,+BAA+B;AACrC,SAAS,aAAa,KAAmB;AAC/C,SACC,IAAI,cAAc,yBAClB,IAAI,OAAO,IAAI,4BAA4B,EAAE,EAAE,KAAK,IAAI,SAAS;AAEnE;AALgB;AAkBT,MAAM,sCACZ;AAAA,EACC;AACD;AAqEM,MAAM,6BAA6B;AAAA,EACzC;AAAA,EACA,QAAQ;AAAA,EACR,SAAS,sBAAsB,2BAA2B;AAC3D;AAEO,MAAM,iBAAiB,UAAU,YAAY,UAAU;AACvD,MAAM,oBAAoB,EAAE,GAAG,eAAe;AAC9C,MAAM,oBAAoB;AAC1B,MAAM,iBAAiB;AAAA,EAC7B,EAAE,MAAM,SAAS,WAAW,SAAS,GAAG,YAAY,CAAC,iBAAiB,EAAE;AACzE;AACO,MAAM,8BAA8B,IAAI;AAAA,EAC9C;AAAA,EACA;AACD;AACO,MAAM,0BAA0B,IAAI;AAAA,EAC1C;AAAA,EACA;AACD;AACO,MAAM,uCAAuC,IAAI;AAAA,EACvD;AAAA,EACA;AACD;AACO,MAAM,uBAAuB,IAAI;AAAA,EACvC;AAAA,EACA;AACD;",
  "names": []
}
