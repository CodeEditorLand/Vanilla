{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/services/themes/browser/fileIconThemeData.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from '../../../../base/common/uri.js';\nimport * as nls from '../../../../nls.js';\nimport * as paths from '../../../../base/common/path.js';\nimport * as resources from '../../../../base/common/resources.js';\nimport * as Json from '../../../../base/common/json.js';\nimport { ExtensionData, IThemeExtensionPoint, IWorkbenchFileIconTheme } from '../common/workbenchThemeService.js';\nimport { getParseErrorMessage } from '../../../../base/common/jsonErrorMessages.js';\nimport { asCSSUrl } from '../../../../base/browser/dom.js';\nimport { IStorageService, StorageScope, StorageTarget } from '../../../../platform/storage/common/storage.js';\nimport { IExtensionResourceLoaderService } from '../../../../platform/extensionResourceLoader/common/extensionResourceLoader.js';\nimport { ILanguageService } from '../../../../editor/common/languages/language.js';\nimport { mainWindow } from '../../../../base/browser/window.js';\n\nexport class FileIconThemeData implements IWorkbenchFileIconTheme {\n\n\tstatic readonly STORAGE_KEY = 'iconThemeData';\n\n\tid: string;\n\tlabel: string;\n\tsettingsId: string | null;\n\tdescription?: string;\n\thasFileIcons: boolean;\n\thasFolderIcons: boolean;\n\thidesExplorerArrows: boolean;\n\tisLoaded: boolean;\n\tlocation?: URI;\n\textensionData?: ExtensionData;\n\twatch?: boolean;\n\n\tstyleSheetContent?: string;\n\n\tprivate constructor(id: string, label: string, settingsId: string | null) {\n\t\tthis.id = id;\n\t\tthis.label = label;\n\t\tthis.settingsId = settingsId;\n\t\tthis.isLoaded = false;\n\t\tthis.hasFileIcons = false;\n\t\tthis.hasFolderIcons = false;\n\t\tthis.hidesExplorerArrows = false;\n\t}\n\n\tpublic ensureLoaded(themeLoader: FileIconThemeLoader): Promise<string | undefined> {\n\t\treturn !this.isLoaded ? this.load(themeLoader) : Promise.resolve(this.styleSheetContent);\n\t}\n\n\tpublic reload(themeLoader: FileIconThemeLoader): Promise<string | undefined> {\n\t\treturn this.load(themeLoader);\n\t}\n\n\tprivate load(themeLoader: FileIconThemeLoader): Promise<string | undefined> {\n\t\treturn themeLoader.load(this);\n\t}\n\n\tstatic fromExtensionTheme(iconTheme: IThemeExtensionPoint, iconThemeLocation: URI, extensionData: ExtensionData): FileIconThemeData {\n\t\tconst id = extensionData.extensionId + '-' + iconTheme.id;\n\t\tconst label = iconTheme.label || paths.basename(iconTheme.path);\n\t\tconst settingsId = iconTheme.id;\n\n\t\tconst themeData = new FileIconThemeData(id, label, settingsId);\n\n\t\tthemeData.description = iconTheme.description;\n\t\tthemeData.location = iconThemeLocation;\n\t\tthemeData.extensionData = extensionData;\n\t\tthemeData.watch = iconTheme._watch;\n\t\tthemeData.isLoaded = false;\n\t\treturn themeData;\n\t}\n\n\tprivate static _noIconTheme: FileIconThemeData | null = null;\n\n\tstatic get noIconTheme(): FileIconThemeData {\n\t\tlet themeData = FileIconThemeData._noIconTheme;\n\t\tif (!themeData) {\n\t\t\tthemeData = FileIconThemeData._noIconTheme = new FileIconThemeData('', '', null);\n\t\t\tthemeData.hasFileIcons = false;\n\t\t\tthemeData.hasFolderIcons = false;\n\t\t\tthemeData.hidesExplorerArrows = false;\n\t\t\tthemeData.isLoaded = true;\n\t\t\tthemeData.extensionData = undefined;\n\t\t\tthemeData.watch = false;\n\t\t}\n\t\treturn themeData;\n\t}\n\n\tstatic createUnloadedTheme(id: string): FileIconThemeData {\n\t\tconst themeData = new FileIconThemeData(id, '', '__' + id);\n\t\tthemeData.isLoaded = false;\n\t\tthemeData.hasFileIcons = false;\n\t\tthemeData.hasFolderIcons = false;\n\t\tthemeData.hidesExplorerArrows = false;\n\t\tthemeData.extensionData = undefined;\n\t\tthemeData.watch = false;\n\t\treturn themeData;\n\t}\n\n\n\tstatic fromStorageData(storageService: IStorageService): FileIconThemeData | undefined {\n\t\tconst input = storageService.get(FileIconThemeData.STORAGE_KEY, StorageScope.PROFILE);\n\t\tif (!input) {\n\t\t\treturn undefined;\n\t\t}\n\t\ttry {\n\t\t\tconst data = JSON.parse(input);\n\t\t\tconst theme = new FileIconThemeData('', '', null);\n\t\t\tfor (const key in data) {\n\t\t\t\tswitch (key) {\n\t\t\t\t\tcase 'id':\n\t\t\t\t\tcase 'label':\n\t\t\t\t\tcase 'description':\n\t\t\t\t\tcase 'settingsId':\n\t\t\t\t\tcase 'styleSheetContent':\n\t\t\t\t\tcase 'hasFileIcons':\n\t\t\t\t\tcase 'hidesExplorerArrows':\n\t\t\t\t\tcase 'hasFolderIcons':\n\t\t\t\t\tcase 'watch':\n\t\t\t\t\t\t(theme as any)[key] = data[key];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'location':\n\t\t\t\t\t\t// ignore, no longer restore\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'extensionData':\n\t\t\t\t\t\ttheme.extensionData = ExtensionData.fromJSONObject(data.extensionData);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn theme;\n\t\t} catch (e) {\n\t\t\treturn undefined;\n\t\t}\n\t}\n\n\ttoStorage(storageService: IStorageService) {\n\t\tconst data = JSON.stringify({\n\t\t\tid: this.id,\n\t\t\tlabel: this.label,\n\t\t\tdescription: this.description,\n\t\t\tsettingsId: this.settingsId,\n\t\t\tstyleSheetContent: this.styleSheetContent,\n\t\t\thasFileIcons: this.hasFileIcons,\n\t\t\thasFolderIcons: this.hasFolderIcons,\n\t\t\thidesExplorerArrows: this.hidesExplorerArrows,\n\t\t\textensionData: ExtensionData.toJSONObject(this.extensionData),\n\t\t\twatch: this.watch\n\t\t});\n\t\tstorageService.store(FileIconThemeData.STORAGE_KEY, data, StorageScope.PROFILE, StorageTarget.MACHINE);\n\t}\n}\n\ninterface IconDefinition {\n\ticonPath: string;\n\tfontColor: string;\n\tfontCharacter: string;\n\tfontSize: string;\n\tfontId: string;\n}\n\ninterface FontDefinition {\n\tid: string;\n\tweight: string;\n\tstyle: string;\n\tsize: string;\n\tsrc: { path: string; format: string }[];\n}\n\ninterface IconsAssociation {\n\tfolder?: string;\n\tfile?: string;\n\tfolderExpanded?: string;\n\trootFolder?: string;\n\trootFolderExpanded?: string;\n\trootFolderNames?: { [folderName: string]: string };\n\trootFolderNamesExpanded?: { [folderName: string]: string };\n\tfolderNames?: { [folderName: string]: string };\n\tfolderNamesExpanded?: { [folderName: string]: string };\n\tfileExtensions?: { [extension: string]: string };\n\tfileNames?: { [fileName: string]: string };\n\tlanguageIds?: { [languageId: string]: string };\n}\n\ninterface IconThemeDocument extends IconsAssociation {\n\ticonDefinitions: { [key: string]: IconDefinition };\n\tfonts: FontDefinition[];\n\tlight?: IconsAssociation;\n\thighContrast?: IconsAssociation;\n\thidesExplorerArrows?: boolean;\n\tshowLanguageModeIcons?: boolean;\n}\n\nexport class FileIconThemeLoader {\n\n\tconstructor(\n\t\tprivate readonly fileService: IExtensionResourceLoaderService,\n\t\tprivate readonly languageService: ILanguageService\n\t) {\n\t}\n\n\tpublic load(data: FileIconThemeData): Promise<string | undefined> {\n\t\tif (!data.location) {\n\t\t\treturn Promise.resolve(data.styleSheetContent);\n\t\t}\n\t\treturn this.loadIconThemeDocument(data.location).then(iconThemeDocument => {\n\t\t\tconst result = this.processIconThemeDocument(data.id, data.location!, iconThemeDocument);\n\t\t\tdata.styleSheetContent = result.content;\n\t\t\tdata.hasFileIcons = result.hasFileIcons;\n\t\t\tdata.hasFolderIcons = result.hasFolderIcons;\n\t\t\tdata.hidesExplorerArrows = result.hidesExplorerArrows;\n\t\t\tdata.isLoaded = true;\n\t\t\treturn data.styleSheetContent;\n\t\t});\n\t}\n\n\tprivate loadIconThemeDocument(location: URI): Promise<IconThemeDocument> {\n\t\treturn this.fileService.readExtensionResource(location).then((content) => {\n\t\t\tconst errors: Json.ParseError[] = [];\n\t\t\tconst contentValue = Json.parse(content, errors);\n\t\t\tif (errors.length > 0) {\n\t\t\t\treturn Promise.reject(new Error(nls.localize('error.cannotparseicontheme', \"Problems parsing file icons file: {0}\", errors.map(e => getParseErrorMessage(e.error)).join(', '))));\n\t\t\t} else if (Json.getNodeType(contentValue) !== 'object') {\n\t\t\t\treturn Promise.reject(new Error(nls.localize('error.invalidformat', \"Invalid format for file icons theme file: Object expected.\")));\n\t\t\t}\n\t\t\treturn Promise.resolve(contentValue);\n\t\t});\n\t}\n\n\tprivate processIconThemeDocument(id: string, iconThemeDocumentLocation: URI, iconThemeDocument: IconThemeDocument): { content: string; hasFileIcons: boolean; hasFolderIcons: boolean; hidesExplorerArrows: boolean } {\n\n\t\tconst result = { content: '', hasFileIcons: false, hasFolderIcons: false, hidesExplorerArrows: !!iconThemeDocument.hidesExplorerArrows };\n\n\t\tlet hasSpecificFileIcons = false;\n\n\t\tif (!iconThemeDocument.iconDefinitions) {\n\t\t\treturn result;\n\t\t}\n\t\tconst selectorByDefinitionId: { [def: string]: string[] } = {};\n\t\tconst coveredLanguages: { [languageId: string]: boolean } = {};\n\n\t\tconst iconThemeDocumentLocationDirname = resources.dirname(iconThemeDocumentLocation);\n\t\tfunction resolvePath(path: string) {\n\t\t\treturn resources.joinPath(iconThemeDocumentLocationDirname, path);\n\t\t}\n\n\t\tfunction collectSelectors(associations: IconsAssociation | undefined, baseThemeClassName?: string) {\n\t\t\tfunction addSelector(selector: string, defId: string) {\n\t\t\t\tif (defId) {\n\t\t\t\t\tlet list = selectorByDefinitionId[defId];\n\t\t\t\t\tif (!list) {\n\t\t\t\t\t\tlist = selectorByDefinitionId[defId] = [];\n\t\t\t\t\t}\n\t\t\t\t\tlist.push(selector);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (associations) {\n\t\t\t\tlet qualifier = '.show-file-icons';\n\t\t\t\tif (baseThemeClassName) {\n\t\t\t\t\tqualifier = baseThemeClassName + ' ' + qualifier;\n\t\t\t\t}\n\n\t\t\t\tconst expanded = '.monaco-tl-twistie.collapsible:not(.collapsed) + .monaco-tl-contents';\n\n\t\t\t\tif (associations.folder) {\n\t\t\t\t\taddSelector(`${qualifier} .folder-icon::before`, associations.folder);\n\t\t\t\t\tresult.hasFolderIcons = true;\n\t\t\t\t}\n\n\t\t\t\tif (associations.folderExpanded) {\n\t\t\t\t\taddSelector(`${qualifier} ${expanded} .folder-icon::before`, associations.folderExpanded);\n\t\t\t\t\tresult.hasFolderIcons = true;\n\t\t\t\t}\n\n\t\t\t\tconst rootFolder = associations.rootFolder || associations.folder;\n\t\t\t\tconst rootFolderExpanded = associations.rootFolderExpanded || associations.folderExpanded;\n\n\t\t\t\tif (rootFolder) {\n\t\t\t\t\taddSelector(`${qualifier} .rootfolder-icon::before`, rootFolder);\n\t\t\t\t\tresult.hasFolderIcons = true;\n\t\t\t\t}\n\n\t\t\t\tif (rootFolderExpanded) {\n\t\t\t\t\taddSelector(`${qualifier} ${expanded} .rootfolder-icon::before`, rootFolderExpanded);\n\t\t\t\t\tresult.hasFolderIcons = true;\n\t\t\t\t}\n\n\t\t\t\tif (associations.file) {\n\t\t\t\t\taddSelector(`${qualifier} .file-icon::before`, associations.file);\n\t\t\t\t\tresult.hasFileIcons = true;\n\t\t\t\t}\n\n\t\t\t\tconst folderNames = associations.folderNames;\n\t\t\t\tif (folderNames) {\n\t\t\t\t\tfor (const key in folderNames) {\n\t\t\t\t\t\tconst selectors: string[] = [];\n\t\t\t\t\t\tconst name = handleParentFolder(key.toLowerCase(), selectors);\n\t\t\t\t\t\tselectors.push(`.${escapeCSS(name)}-name-folder-icon`);\n\t\t\t\t\t\taddSelector(`${qualifier} ${selectors.join('')}.folder-icon::before`, folderNames[key]);\n\t\t\t\t\t\tresult.hasFolderIcons = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst folderNamesExpanded = associations.folderNamesExpanded;\n\t\t\t\tif (folderNamesExpanded) {\n\t\t\t\t\tfor (const key in folderNamesExpanded) {\n\t\t\t\t\t\tconst selectors: string[] = [];\n\t\t\t\t\t\tconst name = handleParentFolder(key.toLowerCase(), selectors);\n\t\t\t\t\t\tselectors.push(`.${escapeCSS(name)}-name-folder-icon`);\n\t\t\t\t\t\taddSelector(`${qualifier} ${expanded} ${selectors.join('')}.folder-icon::before`, folderNamesExpanded[key]);\n\t\t\t\t\t\tresult.hasFolderIcons = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst rootFolderNames = associations.rootFolderNames;\n\t\t\t\tif (rootFolderNames) {\n\t\t\t\t\tfor (const key in rootFolderNames) {\n\t\t\t\t\t\tconst name = key.toLowerCase();\n\t\t\t\t\t\taddSelector(`${qualifier} .${escapeCSS(name)}-root-name-folder-icon.rootfolder-icon::before`, rootFolderNames[key]);\n\t\t\t\t\t\tresult.hasFolderIcons = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst rootFolderNamesExpanded = associations.rootFolderNamesExpanded;\n\t\t\t\tif (rootFolderNamesExpanded) {\n\t\t\t\t\tfor (const key in rootFolderNamesExpanded) {\n\t\t\t\t\t\tconst name = key.toLowerCase();\n\t\t\t\t\t\taddSelector(`${qualifier} ${expanded} .${escapeCSS(name)}-root-name-folder-icon.rootfolder-icon::before`, rootFolderNamesExpanded[key]);\n\t\t\t\t\t\tresult.hasFolderIcons = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst languageIds = associations.languageIds;\n\t\t\t\tif (languageIds) {\n\t\t\t\t\tif (!languageIds.jsonc && languageIds.json) {\n\t\t\t\t\t\tlanguageIds.jsonc = languageIds.json;\n\t\t\t\t\t}\n\t\t\t\t\tfor (const languageId in languageIds) {\n\t\t\t\t\t\taddSelector(`${qualifier} .${escapeCSS(languageId)}-lang-file-icon.file-icon::before`, languageIds[languageId]);\n\t\t\t\t\t\tresult.hasFileIcons = true;\n\t\t\t\t\t\thasSpecificFileIcons = true;\n\t\t\t\t\t\tcoveredLanguages[languageId] = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst fileExtensions = associations.fileExtensions;\n\t\t\t\tif (fileExtensions) {\n\t\t\t\t\tfor (const key in fileExtensions) {\n\t\t\t\t\t\tconst selectors: string[] = [];\n\t\t\t\t\t\tconst name = handleParentFolder(key.toLowerCase(), selectors);\n\t\t\t\t\t\tconst segments = name.split('.');\n\t\t\t\t\t\tif (segments.length) {\n\t\t\t\t\t\t\tfor (let i = 0; i < segments.length; i++) {\n\t\t\t\t\t\t\t\tselectors.push(`.${escapeCSS(segments.slice(i).join('.'))}-ext-file-icon`);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tselectors.push('.ext-file-icon'); // extra segment to increase file-ext score\n\t\t\t\t\t\t}\n\t\t\t\t\t\taddSelector(`${qualifier} ${selectors.join('')}.file-icon::before`, fileExtensions[key]);\n\t\t\t\t\t\tresult.hasFileIcons = true;\n\t\t\t\t\t\thasSpecificFileIcons = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst fileNames = associations.fileNames;\n\t\t\t\tif (fileNames) {\n\t\t\t\t\tfor (const key in fileNames) {\n\t\t\t\t\t\tconst selectors: string[] = [];\n\t\t\t\t\t\tconst fileName = handleParentFolder(key.toLowerCase(), selectors);\n\t\t\t\t\t\tselectors.push(`.${escapeCSS(fileName)}-name-file-icon`);\n\t\t\t\t\t\tselectors.push('.name-file-icon'); // extra segment to increase file-name score\n\t\t\t\t\t\tconst segments = fileName.split('.');\n\t\t\t\t\t\tif (segments.length) {\n\t\t\t\t\t\t\tfor (let i = 1; i < segments.length; i++) {\n\t\t\t\t\t\t\t\tselectors.push(`.${escapeCSS(segments.slice(i).join('.'))}-ext-file-icon`);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tselectors.push('.ext-file-icon'); // extra segment to increase file-ext score\n\t\t\t\t\t\t}\n\t\t\t\t\t\taddSelector(`${qualifier} ${selectors.join('')}.file-icon::before`, fileNames[key]);\n\t\t\t\t\t\tresult.hasFileIcons = true;\n\t\t\t\t\t\thasSpecificFileIcons = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcollectSelectors(iconThemeDocument);\n\t\tcollectSelectors(iconThemeDocument.light, '.vs');\n\t\tcollectSelectors(iconThemeDocument.highContrast, '.hc-black');\n\t\tcollectSelectors(iconThemeDocument.highContrast, '.hc-light');\n\n\t\tif (!result.hasFileIcons && !result.hasFolderIcons) {\n\t\t\treturn result;\n\t\t}\n\n\t\tconst showLanguageModeIcons = iconThemeDocument.showLanguageModeIcons === true || (hasSpecificFileIcons && iconThemeDocument.showLanguageModeIcons !== false);\n\n\t\tconst cssRules: string[] = [];\n\n\t\tconst fonts = iconThemeDocument.fonts;\n\t\tconst fontSizes = new Map<string, string>();\n\t\tif (Array.isArray(fonts)) {\n\t\t\tconst defaultFontSize = fonts[0].size || '150%';\n\t\t\tfonts.forEach(font => {\n\t\t\t\tconst src = font.src.map(l => `${asCSSUrl(resolvePath(l.path))} format('${l.format}')`).join(', ');\n\t\t\t\tcssRules.push(`@font-face { src: ${src}; font-family: '${font.id}'; font-weight: ${font.weight}; font-style: ${font.style}; font-display: block; }`);\n\t\t\t\tif (font.size !== undefined && font.size !== defaultFontSize) {\n\t\t\t\t\tfontSizes.set(font.id, font.size);\n\t\t\t\t}\n\t\t\t});\n\t\t\tcssRules.push(`.show-file-icons .file-icon::before, .show-file-icons .folder-icon::before, .show-file-icons .rootfolder-icon::before { font-family: '${fonts[0].id}'; font-size: ${defaultFontSize}; }`);\n\t\t}\n\n\t\tfor (const defId in selectorByDefinitionId) {\n\t\t\tconst selectors = selectorByDefinitionId[defId];\n\t\t\tconst definition = iconThemeDocument.iconDefinitions[defId];\n\t\t\tif (definition) {\n\t\t\t\tif (definition.iconPath) {\n\t\t\t\t\tcssRules.push(`${selectors.join(', ')} { content: ' '; background-image: ${asCSSUrl(resolvePath(definition.iconPath))}; }`);\n\t\t\t\t} else if (definition.fontCharacter || definition.fontColor) {\n\t\t\t\t\tconst body = [];\n\t\t\t\t\tif (definition.fontColor) {\n\t\t\t\t\t\tbody.push(`color: ${definition.fontColor};`);\n\t\t\t\t\t}\n\t\t\t\t\tif (definition.fontCharacter) {\n\t\t\t\t\t\tbody.push(`content: '${definition.fontCharacter}';`);\n\t\t\t\t\t}\n\t\t\t\t\tconst fontSize = definition.fontSize ?? (definition.fontId ? fontSizes.get(definition.fontId) : undefined);\n\t\t\t\t\tif (fontSize) {\n\t\t\t\t\t\tbody.push(`font-size: ${fontSize};`);\n\t\t\t\t\t}\n\t\t\t\t\tif (definition.fontId) {\n\t\t\t\t\t\tbody.push(`font-family: ${definition.fontId};`);\n\t\t\t\t\t}\n\t\t\t\t\tif (showLanguageModeIcons) {\n\t\t\t\t\t\tbody.push(`background-image: unset;`); // potentially set by the language default\n\t\t\t\t\t}\n\t\t\t\t\tcssRules.push(`${selectors.join(', ')} { ${body.join(' ')} }`);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (showLanguageModeIcons) {\n\t\t\tfor (const languageId of this.languageService.getRegisteredLanguageIds()) {\n\t\t\t\tif (!coveredLanguages[languageId]) {\n\t\t\t\t\tconst icon = this.languageService.getIcon(languageId);\n\t\t\t\t\tif (icon) {\n\t\t\t\t\t\tconst selector = `.show-file-icons .${escapeCSS(languageId)}-lang-file-icon.file-icon::before`;\n\t\t\t\t\t\tcssRules.push(`${selector} { content: ' '; background-image: ${asCSSUrl(icon.dark)}; }`);\n\t\t\t\t\t\tcssRules.push(`.vs ${selector} { content: ' '; background-image: ${asCSSUrl(icon.light)}; }`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tresult.content = cssRules.join('\\n');\n\t\treturn result;\n\t}\n\n}\n\nfunction handleParentFolder(key: string, selectors: string[]): string {\n\tconst lastIndexOfSlash = key.lastIndexOf('/');\n\tif (lastIndexOfSlash >= 0) {\n\t\tconst parentFolder = key.substring(0, lastIndexOfSlash);\n\t\tselectors.push(`.${escapeCSS(parentFolder)}-name-dir-icon`);\n\t\treturn key.substring(lastIndexOfSlash + 1);\n\t}\n\treturn key;\n}\n\nfunction escapeCSS(str: string) {\n\tstr = str.replace(/[\\s]/g, '/'); // HTML class names can not contain certain whitespace characters (https://dom.spec.whatwg.org/#interface-domtokenlist), use / instead, which doesn't exist in file names.\n\treturn mainWindow.CSS.escape(str);\n}\n"],
  "mappings": "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",
  "names": []
}
