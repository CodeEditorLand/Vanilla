var oe=Object.defineProperty;var ne=Object.getOwnPropertyDescriptor;var U=(l,s,e,t)=>{for(var n=t>1?void 0:t?ne(s,e):s,o=l.length-1,i;o>=0;o--)(i=l[o])&&(n=(t?i(s,e,n):i(n))||n);return t&&n&&oe(s,e,n),n},c=(l,s)=>(e,t)=>s(e,t,l);import{createStyleSheet as N}from"../../../../../vs/base/browser/dom.js";import{mainWindow as re}from"../../../../../vs/base/browser/window.js";import{RunOnceScheduler as se,Sequencer as R}from"../../../../../vs/base/common/async.js";import*as he from"../../../../../vs/base/common/errors.js";import{Emitter as E}from"../../../../../vs/base/common/event.js";import{Disposable as ce,dispose as q}from"../../../../../vs/base/common/lifecycle.js";import{isWeb as ae}from"../../../../../vs/base/common/platform.js";import*as S from"../../../../../vs/base/common/resources.js";import*as I from"../../../../../vs/base/common/types.js";import"../../../../../vs/base/common/uri.js";import{ILanguageService as le}from"../../../../../vs/editor/common/languages/language.js";import*as me from"../../../../../vs/nls.js";import{ConfigurationTarget as B,IConfigurationService as de}from"../../../../../vs/platform/configuration/common/configuration.js";import{IExtensionResourceLoaderService as ue}from"../../../../../vs/platform/extensionResourceLoader/common/extensionResourceLoader.js";import{FileChangeType as Te,IFileService as Ie}from"../../../../../vs/platform/files/common/files.js";import{InstantiationType as ge,registerSingleton as fe}from"../../../../../vs/platform/instantiation/common/extensions.js";import{ILogService as pe}from"../../../../../vs/platform/log/common/log.js";import{Registry as Ce}from"../../../../../vs/platform/registry/common/platform.js";import{getRemoteAuthority as z}from"../../../../../vs/platform/remote/common/remoteHosts.js";import{IStorageService as Se}from"../../../../../vs/platform/storage/common/storage.js";import{ITelemetryService as ye}from"../../../../../vs/platform/telemetry/common/telemetry.js";import{getIconsStyleSheet as ve}from"../../../../../vs/platform/theme/browser/iconsStyleSheet.js";import{asCssVariableName as Re,getColorRegistry as j}from"../../../../../vs/platform/theme/common/colorRegistry.js";import{ColorScheme as P}from"../../../../../vs/platform/theme/common/theme.js";import{Extensions as Ee}from"../../../../../vs/platform/theme/common/themeService.js";import{IBrowserWorkbenchEnvironmentService as Pe}from"../../../../../vs/workbench/services/environment/browser/environmentService.js";import{IExtensionService as Le}from"../../../../../vs/workbench/services/extensions/common/extensions.js";import{IWorkbenchLayoutService as be}from"../../../../../vs/workbench/services/layout/browser/layoutService.js";import{FileIconThemeData as g,FileIconThemeLoader as Fe}from"../../../../../vs/workbench/services/themes/browser/fileIconThemeData.js";import{DEFAULT_PRODUCT_ICON_THEME_ID as L,ProductIconThemeData as f}from"../../../../../vs/workbench/services/themes/browser/productIconThemeData.js";import{ColorThemeData as p}from"../../../../../vs/workbench/services/themes/common/colorThemeData.js";import{registerColorThemeSchemas as _e}from"../../../../../vs/workbench/services/themes/common/colorThemeSchema.js";import{registerFileIconThemeSchemas as De}from"../../../../../vs/workbench/services/themes/common/fileIconThemeSchema.js";import{IHostColorSchemeService as we}from"../../../../../vs/workbench/services/themes/common/hostColorSchemeService.js";import{registerProductIconThemeSchemas as xe}from"../../../../../vs/workbench/services/themes/common/productIconThemeSchema.js";import{ThemeConfiguration as ke,updateColorThemeConfigurationSchemas as G,updateFileIconThemeConfigurationSchemas as K,updateProductIconThemeConfigurationSchemas as $}from"../../../../../vs/workbench/services/themes/common/themeConfiguration.js";import{registerColorThemeExtensionPoint as We,registerFileIconThemeExtensionPoint as Me,registerProductIconThemeExtensionPoint as He,ThemeRegistry as b}from"../../../../../vs/workbench/services/themes/common/themeExtensionPoints.js";import{COLOR_THEME_DARK_INITIAL_COLORS as Oe,COLOR_THEME_LIGHT_INITIAL_COLORS as Ae,ExtensionData as F,IWorkbenchThemeService as Ue,ThemeSettingDefaults as d,ThemeSettings as a,VS_DARK_THEME as V,VS_HC_LIGHT_THEME as J,VS_HC_THEME as Y,VS_LIGHT_THEME as Z}from"../../../../../vs/workbench/services/themes/common/workbenchThemeService.js";import{IUserDataInitializationService as Ne}from"../../../../../vs/workbench/services/userData/browser/userDataInit.js";const y="vscode-theme-defaults",_="vscode.vscode-theme-seti-vs-seti",Q="file-icons-enabled",qe="contributedColorTheme",Be="contributedFileIconTheme",ze="contributedProductIconTheme",X=Ce.as(Ee.ThemingContribution);function je(l){switch(l){case Z:return`vs ${y}-themes-light_vs-json`;case V:return`vs-dark ${y}-themes-dark_vs-json`;case Y:return`hc-black ${y}-themes-hc_black-json`;case J:return`hc-light ${y}-themes-hc_light-json`}return l}const Ge=We(),Ke=Me(),$e=He();let C=class extends ce{constructor(e,t,n,o,i,r,h,u,x,ee,Ve,te){super();this.storageService=t;this.configurationService=n;this.telemetryService=o;this.environmentService=i;this.extensionResourceLoaderService=h;this.logService=x;this.hostColorService=ee;this.userDataInitializationService=Ve;this.languageService=te;this.container=u.mainContainer,this.settings=new ke(n,ee),this.colorThemeRegistry=this._register(new b(Ge,p.fromExtensionTheme)),this.colorThemeWatcher=this._register(new D(r,i,this.reloadCurrentColorTheme.bind(this))),this.onColorThemeChange=new E({leakWarningThreshold:400}),this.currentColorTheme=p.createUnloadedTheme(""),this.colorThemeSequencer=new R,this.fileIconThemeWatcher=this._register(new D(r,i,this.reloadCurrentFileIconTheme.bind(this))),this.fileIconThemeRegistry=this._register(new b(Ke,g.fromExtensionTheme,!0,g.noIconTheme)),this.fileIconThemeLoader=new Fe(h,te),this.onFileIconThemeChange=new E({leakWarningThreshold:400}),this.currentFileIconTheme=g.createUnloadedTheme(""),this.fileIconThemeSequencer=new R,this.productIconThemeWatcher=this._register(new D(r,i,this.reloadCurrentProductIconTheme.bind(this))),this.productIconThemeRegistry=this._register(new b($e,f.fromExtensionTheme,!0,f.defaultTheme)),this.onProductIconThemeChange=new E,this.currentProductIconTheme=f.createUnloadedTheme(""),this.productIconThemeSequencer=new R,this._register(this.onDidColorThemeChange(T=>j().notifyThemeUpdate(T)));let m=p.fromStorageData(this.storageService);const v=this.settings.colorTheme;m&&v!==m.settingsId&&this.settings.isDefaultColorTheme()&&(this.hasDefaultUpdated=m.settingsId===d.COLOR_THEME_DARK_OLD||m.settingsId===d.COLOR_THEME_LIGHT_OLD,m=void 0);const k=v===d.COLOR_THEME_LIGHT?Ae:v===d.COLOR_THEME_DARK?Oe:void 0;if(!m){const T=i.options?.initialColorTheme;T&&(m=p.createUnloadedThemeForThemeType(T.themeType,T.colors??k))}m||(m=p.createUnloadedThemeForThemeType(ae?P.LIGHT:P.DARK,k)),m.setCustomizations(this.settings),this.applyTheme(m,void 0,!0);const W=g.fromStorageData(this.storageService);W&&this.applyAndSetFileIconTheme(W,!0);const M=f.fromStorageData(this.storageService);M&&this.applyAndSetProductIconTheme(M,!0),e.whenInstalledExtensionsRegistered().then(T=>{this.installConfigurationListener(),this.installPreferredSchemeListener(),this.installRegistryListeners(),this.initialize().catch(he.onUnexpectedError)});const H=N();H.id="codiconStyles";const O=this._register(ve(this));function ie(){H.textContent=O.getCSS()}const A=this._register(new se(ie,0));this._register(O.onDidChange(()=>A.schedule())),A.schedule()}container;settings;colorThemeRegistry;currentColorTheme;onColorThemeChange;colorThemeWatcher;colorThemingParticipantChangeListener;colorThemeSequencer;fileIconThemeRegistry;currentFileIconTheme;onFileIconThemeChange;fileIconThemeLoader;fileIconThemeWatcher;fileIconThemeSequencer;productIconThemeRegistry;currentProductIconTheme;onProductIconThemeChange;productIconThemeWatcher;productIconThemeSequencer;hasDefaultUpdated=!1;initialize(){const e=this.environmentService.extensionDevelopmentLocationURI,t=e&&e.length===1?e[0]:void 0,n=async()=>{const r=this.colorThemeRegistry.findThemeByExtensionLocation(t);if(r.length){const u=r.find(x=>x.type===this.currentColorTheme.type);return this.setColorTheme(u?u.id:r[0].id,void 0)}let h=this.colorThemeRegistry.findThemeBySettingsId(this.settings.colorTheme,void 0);if(!h){await this.userDataInitializationService.whenInitializationFinished();const u=this.currentColorTheme.type===P.LIGHT?d.COLOR_THEME_LIGHT:d.COLOR_THEME_DARK;h=this.colorThemeRegistry.findThemeBySettingsId(this.settings.colorTheme,u)}return this.setColorTheme(h&&h.id,void 0)},o=async()=>{const r=this.fileIconThemeRegistry.findThemeByExtensionLocation(t);if(r.length)return this.setFileIconTheme(r[0].id,B.MEMORY);let h=this.fileIconThemeRegistry.findThemeBySettingsId(this.settings.fileIconTheme);return h||(await this.userDataInitializationService.whenInitializationFinished(),h=this.fileIconThemeRegistry.findThemeBySettingsId(this.settings.fileIconTheme)),this.setFileIconTheme(h?h.id:_,void 0)},i=async()=>{const r=this.productIconThemeRegistry.findThemeByExtensionLocation(t);if(r.length)return this.setProductIconTheme(r[0].id,B.MEMORY);let h=this.productIconThemeRegistry.findThemeBySettingsId(this.settings.productIconTheme);return h||(await this.userDataInitializationService.whenInitializationFinished(),h=this.productIconThemeRegistry.findThemeBySettingsId(this.settings.productIconTheme)),this.setProductIconTheme(h?h.id:L,void 0)};return Promise.all([n(),o(),i()])}installConfigurationListener(){this._register(this.configurationService.onDidChangeConfiguration(e=>{if((e.affectsConfiguration(a.COLOR_THEME)||e.affectsConfiguration(a.PREFERRED_DARK_THEME)||e.affectsConfiguration(a.PREFERRED_LIGHT_THEME)||e.affectsConfiguration(a.PREFERRED_HC_DARK_THEME)||e.affectsConfiguration(a.PREFERRED_HC_LIGHT_THEME)||e.affectsConfiguration(a.DETECT_COLOR_SCHEME)||e.affectsConfiguration(a.DETECT_HC)||e.affectsConfiguration(a.SYSTEM_COLOR_THEME))&&this.restoreColorTheme(),e.affectsConfiguration(a.FILE_ICON_THEME)&&this.restoreFileIconTheme(),e.affectsConfiguration(a.PRODUCT_ICON_THEME)&&this.restoreProductIconTheme(),this.currentColorTheme){let t=!1;e.affectsConfiguration(a.COLOR_CUSTOMIZATIONS)&&(this.currentColorTheme.setCustomColors(this.settings.colorCustomizations),t=!0),e.affectsConfiguration(a.TOKEN_COLOR_CUSTOMIZATIONS)&&(this.currentColorTheme.setCustomTokenColors(this.settings.tokenColorCustomizations),t=!0),e.affectsConfiguration(a.SEMANTIC_TOKEN_COLOR_CUSTOMIZATIONS)&&(this.currentColorTheme.setCustomSemanticTokenColors(this.settings.semanticTokenColorCustomizations),t=!0),t&&(this.updateDynamicCSSRules(this.currentColorTheme),this.onColorThemeChange.fire(this.currentColorTheme))}}))}installRegistryListeners(){let e;this._register(this.colorThemeRegistry.onDidChange(async o=>{if(G(o.themes),await this.restoreColorTheme())this.currentColorTheme.settingsId===d.COLOR_THEME_DARK&&!I.isUndefined(e)&&await this.colorThemeRegistry.findThemeById(e)?(await this.setColorTheme(e,"auto"),e=void 0):o.added.some(i=>i.settingsId===this.currentColorTheme.settingsId)&&await this.reloadCurrentColorTheme();else if(o.removed.some(i=>i.settingsId===this.currentColorTheme.settingsId)){e=this.currentColorTheme.id;const i=this.colorThemeRegistry.findThemeBySettingsId(d.COLOR_THEME_DARK);await this.setColorTheme(i,"auto")}}));let t;this._register(this._register(this.fileIconThemeRegistry.onDidChange(async o=>{K(o.themes),await this.restoreFileIconTheme()?this.currentFileIconTheme.id===_&&!I.isUndefined(t)&&this.fileIconThemeRegistry.findThemeById(t)?(await this.setFileIconTheme(t,"auto"),t=void 0):o.added.some(i=>i.settingsId===this.currentFileIconTheme.settingsId)&&await this.reloadCurrentFileIconTheme():o.removed.some(i=>i.settingsId===this.currentFileIconTheme.settingsId)&&(t=this.currentFileIconTheme.id,await this.setFileIconTheme(_,"auto"))})));let n;return this._register(this.productIconThemeRegistry.onDidChange(async o=>{$(o.themes),await this.restoreProductIconTheme()?this.currentProductIconTheme.id===L&&!I.isUndefined(n)&&this.productIconThemeRegistry.findThemeById(n)?(await this.setProductIconTheme(n,"auto"),n=void 0):o.added.some(i=>i.settingsId===this.currentProductIconTheme.settingsId)&&await this.reloadCurrentProductIconTheme():o.removed.some(i=>i.settingsId===this.currentProductIconTheme.settingsId)&&(n=this.currentProductIconTheme.id,await this.setProductIconTheme(L,"auto"))})),this._register(this.languageService.onDidChange(()=>this.reloadCurrentFileIconTheme())),Promise.all([this.getColorThemes(),this.getFileIconThemes(),this.getProductIconThemes()]).then(([o,i,r])=>{G(o),K(i),$(r)})}installPreferredSchemeListener(){this._register(this.hostColorService.onDidChangeColorScheme(()=>{this.settings.isDetectingColorScheme()&&this.restoreColorTheme()}))}hasUpdatedDefaultThemes(){return this.hasDefaultUpdated}getColorTheme(){return this.currentColorTheme}async getColorThemes(){return this.colorThemeRegistry.getThemes()}getPreferredColorScheme(){return this.settings.getPreferredColorScheme()}async getMarketplaceColorThemes(e,t,n){const o=this.extensionResourceLoaderService.getExtensionGalleryResourceURL({publisher:e,name:t,version:n},"extension");if(o)try{const i=await this.extensionResourceLoaderService.readExtensionResource(S.joinPath(o,"package.json"));return this.colorThemeRegistry.getMarketplaceThemes(JSON.parse(i),o,F.fromName(e,t))}catch(i){this.logService.error("Problem loading themes from marketplace",i)}return[]}get onDidColorThemeChange(){return this.onColorThemeChange.event}setColorTheme(e,t){return this.colorThemeSequencer.queue(async()=>this.internalSetColorTheme(e,t))}async internalSetColorTheme(e,t){if(!e)return null;const n=I.isString(e)?je(e):e.id;if(this.currentColorTheme.isLoaded&&n===this.currentColorTheme.id)return t!=="preview"&&this.currentColorTheme.toStorage(this.storageService),this.settings.setColorTheme(this.currentColorTheme,t);let o=this.colorThemeRegistry.findThemeById(n);if(!o)if(e instanceof p)o=e;else return null;try{return await o.ensureLoaded(this.extensionResourceLoaderService),o.setCustomizations(this.settings),this.applyTheme(o,t)}catch(i){throw new Error(me.localize("error.cannotloadtheme","Unable to load {0}: {1}",o.location?.toString(),i.message))}}reloadCurrentColorTheme(){return this.colorThemeSequencer.queue(async()=>{try{const e=this.colorThemeRegistry.findThemeBySettingsId(this.currentColorTheme.settingsId)||this.currentColorTheme;await e.reload(this.extensionResourceLoaderService),e.setCustomizations(this.settings),await this.applyTheme(e,void 0,!1)}catch{this.logService.info("Unable to reload {0}: {1}",this.currentColorTheme.location?.toString())}})}async restoreColorTheme(){return this.colorThemeSequencer.queue(async()=>{const e=this.settings.colorTheme,t=this.colorThemeRegistry.findThemeBySettingsId(e);return t?(e!==this.currentColorTheme.settingsId?await this.internalSetColorTheme(t.id,void 0):t!==this.currentColorTheme&&(await t.ensureLoaded(this.extensionResourceLoaderService),t.setCustomizations(this.settings),await this.applyTheme(t,void 0,!0)),!0):!1})}updateDynamicCSSRules(e){const t=new Set,n={addRule:i=>{t.has(i)||t.add(i)}};n.addRule(".monaco-workbench { forced-color-adjust: none; }"),X.getThemingParticipants().forEach(i=>i(e,n,this.environmentService));const o=[];for(const i of j().getColors()){const r=e.getColor(i.id,!0);r&&o.push(`${Re(i.id)}: ${r.toString()};`)}n.addRule(`.monaco-workbench { ${o.join(`
`)} }`),w([...t].join(`
`),qe)}applyTheme(e,t,n=!1){return this.updateDynamicCSSRules(e),this.currentColorTheme.id?this.container.classList.remove(...this.currentColorTheme.classNames):this.container.classList.remove(V,Z,Y,J),this.container.classList.add(...e.classNames),this.currentColorTheme.clearCaches(),this.currentColorTheme=e,this.colorThemingParticipantChangeListener||(this.colorThemingParticipantChangeListener=X.onThemingParticipantAdded(o=>this.updateDynamicCSSRules(this.currentColorTheme))),this.colorThemeWatcher.update(e),this.sendTelemetry(e.id,e.extensionData,"color"),n?Promise.resolve(null):(this.onColorThemeChange.fire(this.currentColorTheme),e.isLoaded&&t!=="preview"&&e.toStorage(this.storageService),this.settings.setColorTheme(this.currentColorTheme,t))}themeExtensionsActivated=new Map;sendTelemetry(e,t,n){if(t){const o=n+t.extensionId;this.themeExtensionsActivated.get(o)||(this.telemetryService.publicLog2("activatePlugin",{id:t.extensionId,name:t.extensionName,isBuiltin:t.extensionIsBuiltin,publisherDisplayName:t.extensionPublisher,themeId:e}),this.themeExtensionsActivated.set(o,!0))}}async getFileIconThemes(){return this.fileIconThemeRegistry.getThemes()}getFileIconTheme(){return this.currentFileIconTheme}get onDidFileIconThemeChange(){return this.onFileIconThemeChange.event}async setFileIconTheme(e,t){return this.fileIconThemeSequencer.queue(async()=>this.internalSetFileIconTheme(e,t))}async internalSetFileIconTheme(e,t){e===void 0&&(e="");const n=I.isString(e)?e:e.id;if(n!==this.currentFileIconTheme.id||!this.currentFileIconTheme.isLoaded){let i=this.fileIconThemeRegistry.findThemeById(n);!i&&e instanceof g&&(i=e),i||(i=g.noIconTheme),await i.ensureLoaded(this.fileIconThemeLoader),this.applyAndSetFileIconTheme(i)}const o=this.currentFileIconTheme;return o.isLoaded&&t!=="preview"&&(!o.location||!z(o.location))&&o.toStorage(this.storageService),await this.settings.setFileIconTheme(this.currentFileIconTheme,t),o}async getMarketplaceFileIconThemes(e,t,n){const o=this.extensionResourceLoaderService.getExtensionGalleryResourceURL({publisher:e,name:t,version:n},"extension");if(o)try{const i=await this.extensionResourceLoaderService.readExtensionResource(S.joinPath(o,"package.json"));return this.fileIconThemeRegistry.getMarketplaceThemes(JSON.parse(i),o,F.fromName(e,t))}catch(i){this.logService.error("Problem loading themes from marketplace",i)}return[]}async reloadCurrentFileIconTheme(){return this.fileIconThemeSequencer.queue(async()=>{await this.currentFileIconTheme.reload(this.fileIconThemeLoader),this.applyAndSetFileIconTheme(this.currentFileIconTheme)})}async restoreFileIconTheme(){return this.fileIconThemeSequencer.queue(async()=>{const e=this.settings.fileIconTheme,t=this.fileIconThemeRegistry.findThemeBySettingsId(e);return t?(e!==this.currentFileIconTheme.settingsId?await this.internalSetFileIconTheme(t.id,void 0):t!==this.currentFileIconTheme&&(await t.ensureLoaded(this.fileIconThemeLoader),this.applyAndSetFileIconTheme(t,!0)),!0):!1})}applyAndSetFileIconTheme(e,t=!1){this.currentFileIconTheme=e,w(e.styleSheetContent,Be),e.id?this.container.classList.add(Q):this.container.classList.remove(Q),this.fileIconThemeWatcher.update(e),e.id&&this.sendTelemetry(e.id,e.extensionData,"fileIcon"),t||this.onFileIconThemeChange.fire(this.currentFileIconTheme)}async getProductIconThemes(){return this.productIconThemeRegistry.getThemes()}getProductIconTheme(){return this.currentProductIconTheme}get onDidProductIconThemeChange(){return this.onProductIconThemeChange.event}async setProductIconTheme(e,t){return this.productIconThemeSequencer.queue(async()=>this.internalSetProductIconTheme(e,t))}async internalSetProductIconTheme(e,t){e===void 0&&(e="");const n=I.isString(e)?e:e.id;if(n!==this.currentProductIconTheme.id||!this.currentProductIconTheme.isLoaded){let i=this.productIconThemeRegistry.findThemeById(n);!i&&e instanceof f&&(i=e),i||(i=f.defaultTheme),await i.ensureLoaded(this.extensionResourceLoaderService,this.logService),this.applyAndSetProductIconTheme(i)}const o=this.currentProductIconTheme;return o.isLoaded&&t!=="preview"&&(!o.location||!z(o.location))&&o.toStorage(this.storageService),await this.settings.setProductIconTheme(this.currentProductIconTheme,t),o}async getMarketplaceProductIconThemes(e,t,n){const o=this.extensionResourceLoaderService.getExtensionGalleryResourceURL({publisher:e,name:t,version:n},"extension");if(o)try{const i=await this.extensionResourceLoaderService.readExtensionResource(S.joinPath(o,"package.json"));return this.productIconThemeRegistry.getMarketplaceThemes(JSON.parse(i),o,F.fromName(e,t))}catch(i){this.logService.error("Problem loading themes from marketplace",i)}return[]}async reloadCurrentProductIconTheme(){return this.productIconThemeSequencer.queue(async()=>{await this.currentProductIconTheme.reload(this.extensionResourceLoaderService,this.logService),this.applyAndSetProductIconTheme(this.currentProductIconTheme)})}async restoreProductIconTheme(){return this.productIconThemeSequencer.queue(async()=>{const e=this.settings.productIconTheme,t=this.productIconThemeRegistry.findThemeBySettingsId(e);return t?(e!==this.currentProductIconTheme.settingsId?await this.internalSetProductIconTheme(t.id,void 0):t!==this.currentProductIconTheme&&(await t.ensureLoaded(this.extensionResourceLoaderService,this.logService),this.applyAndSetProductIconTheme(t,!0)),!0):!1})}applyAndSetProductIconTheme(e,t=!1){this.currentProductIconTheme=e,w(e.styleSheetContent,ze),this.productIconThemeWatcher.update(e),e.id&&this.sendTelemetry(e.id,e.extensionData,"productIcon"),t||this.onProductIconThemeChange.fire(this.currentProductIconTheme)}};C=U([c(0,Le),c(1,Se),c(2,de),c(3,ye),c(4,Pe),c(5,Ie),c(6,ue),c(7,be),c(8,pe),c(9,we),c(10,Ne),c(11,le)],C);class D{constructor(s,e,t){this.fileService=s;this.environmentService=e;this.onUpdate=t}watchedLocation;watcherDisposable;fileChangeListener;update(s){S.isEqual(s.location,this.watchedLocation)||(this.dispose(),s.location&&(s.watch||this.environmentService.isExtensionDevelopment)&&(this.watchedLocation=s.location,this.watcherDisposable=this.fileService.watch(s.location),this.fileService.onDidFilesChange(e=>{this.watchedLocation&&e.contains(this.watchedLocation,Te.UPDATED)&&this.onUpdate()})))}dispose(){this.watcherDisposable=q(this.watcherDisposable),this.fileChangeListener=q(this.fileChangeListener),this.watchedLocation=void 0}}function w(l,s){const e=re.document.head.getElementsByClassName(s);if(e.length===0){const t=N();t.className=s,t.textContent=l}else e[0].textContent=l}_e(),De(),xe(),fe(Ue,C,ge.Eager);export{C as WorkbenchThemeService};
