{
  "version": 3,
  "sources": ["../../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/test/browser/parts/editor/resourceEditorInput.test.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport assert from 'assert';\nimport { URI } from '../../../../../base/common/uri.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { workbenchInstantiationService } from '../../workbenchTestServices.js';\nimport { AbstractResourceEditorInput } from '../../../../common/editor/resourceEditorInput.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { IFileService } from '../../../../../platform/files/common/files.js';\nimport { EditorInputCapabilities, Verbosity } from '../../../../common/editor.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { IFilesConfigurationService } from '../../../../services/filesConfiguration/common/filesConfigurationService.js';\nimport { ensureNoDisposablesAreLeakedInTestSuite } from '../../../../../base/test/common/utils.js';\nimport { ITextResourceConfigurationService } from '../../../../../editor/common/services/textResourceConfiguration.js';\nimport { ConfigurationTarget, IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { CustomEditorLabelService, ICustomEditorLabelService } from '../../../../services/editor/common/customEditorLabelService.js';\nimport { TestConfigurationService } from '../../../../../platform/configuration/test/common/testConfigurationService.js';\nimport { IWorkspaceContextService } from '../../../../../platform/workspace/common/workspace.js';\n\nsuite('ResourceEditorInput', () => {\n\n\tconst disposables = new DisposableStore();\n\n\tclass TestResourceEditorInput extends AbstractResourceEditorInput {\n\n\t\treadonly typeId = 'test.typeId';\n\n\t\tconstructor(\n\t\t\tresource: URI,\n\t\t\t@ILabelService labelService: ILabelService,\n\t\t\t@IFileService fileService: IFileService,\n\t\t\t@IFilesConfigurationService filesConfigurationService: IFilesConfigurationService,\n\t\t\t@ITextResourceConfigurationService textResourceConfigurationService: ITextResourceConfigurationService,\n\t\t\t@ICustomEditorLabelService customEditorLabelService: ICustomEditorLabelService\n\t\t) {\n\t\t\tsuper(resource, resource, labelService, fileService, filesConfigurationService, textResourceConfigurationService, customEditorLabelService);\n\t\t}\n\t}\n\n\tasync function createServices(): Promise<[IInstantiationService, TestConfigurationService, CustomEditorLabelService]> {\n\t\tconst instantiationService = workbenchInstantiationService(undefined, disposables);\n\n\t\tconst testConfigurationService = new TestConfigurationService();\n\t\tinstantiationService.stub(IConfigurationService, testConfigurationService);\n\n\t\tconst customEditorLabelService = disposables.add(new CustomEditorLabelService(testConfigurationService, instantiationService.get(IWorkspaceContextService)));\n\t\tinstantiationService.stub(ICustomEditorLabelService, customEditorLabelService);\n\n\t\treturn [instantiationService, testConfigurationService, customEditorLabelService];\n\t}\n\n\tteardown(() => {\n\t\tdisposables.clear();\n\t});\n\n\ttest('basics', async () => {\n\t\tconst [instantiationService] = await createServices();\n\n\t\tconst resource = URI.from({ scheme: 'testResource', path: 'thePath/of/the/resource.txt' });\n\n\t\tconst input = disposables.add(instantiationService.createInstance(TestResourceEditorInput, resource));\n\n\t\tassert.ok(input.getName().length > 0);\n\n\t\tassert.ok(input.getDescription(Verbosity.SHORT)!.length > 0);\n\t\tassert.ok(input.getDescription(Verbosity.MEDIUM)!.length > 0);\n\t\tassert.ok(input.getDescription(Verbosity.LONG)!.length > 0);\n\n\t\tassert.ok(input.getTitle(Verbosity.SHORT).length > 0);\n\t\tassert.ok(input.getTitle(Verbosity.MEDIUM).length > 0);\n\t\tassert.ok(input.getTitle(Verbosity.LONG).length > 0);\n\n\t\tassert.strictEqual(input.hasCapability(EditorInputCapabilities.Readonly), false);\n\t\tassert.strictEqual(input.isReadonly(), false);\n\t\tassert.strictEqual(input.hasCapability(EditorInputCapabilities.Untitled), true);\n\t});\n\n\ttest('custom editor name', async () => {\n\t\tconst [instantiationService, testConfigurationService, customEditorLabelService] = await createServices();\n\n\t\tconst resource1 = URI.from({ scheme: 'testResource', path: 'thePath/of/the/resource.txt' });\n\t\tconst resource2 = URI.from({ scheme: 'testResource', path: 'theOtherPath/of/the/resource.md' });\n\n\t\tconst input1 = disposables.add(instantiationService.createInstance(TestResourceEditorInput, resource1));\n\t\tconst input2 = disposables.add(instantiationService.createInstance(TestResourceEditorInput, resource2));\n\n\t\tawait testConfigurationService.setUserConfiguration(CustomEditorLabelService.SETTING_ID_PATTERNS, {\n\t\t\t'**/theOtherPath/**': 'Label 1',\n\t\t\t'**/*.txt': 'Label 2',\n\t\t\t'**/resource.txt': 'Label 3',\n\t\t});\n\t\ttestConfigurationService.onDidChangeConfigurationEmitter.fire({ affectsConfiguration(configuration: string) { return configuration === CustomEditorLabelService.SETTING_ID_PATTERNS; }, source: ConfigurationTarget.USER } as any);\n\n\t\tlet label1Name: string = '';\n\t\tlet label2Name = '';\n\t\tdisposables.add(customEditorLabelService.onDidChange(() => {\n\t\t\tlabel1Name = input1.getName();\n\t\t\tlabel2Name = input2.getName();\n\t\t}));\n\n\t\tawait testConfigurationService.setUserConfiguration(CustomEditorLabelService.SETTING_ID_ENABLED, true);\n\t\ttestConfigurationService.onDidChangeConfigurationEmitter.fire({ affectsConfiguration(configuration: string) { return configuration === CustomEditorLabelService.SETTING_ID_ENABLED; }, source: ConfigurationTarget.USER } as any);\n\n\t\tassert.ok(label1Name === 'Label 3');\n\t\tassert.ok(label2Name === 'Label 1');\n\n\t\tawait testConfigurationService.setUserConfiguration(CustomEditorLabelService.SETTING_ID_ENABLED, false);\n\t\ttestConfigurationService.onDidChangeConfigurationEmitter.fire({ affectsConfiguration(configuration: string) { return configuration === CustomEditorLabelService.SETTING_ID_ENABLED; }, source: ConfigurationTarget.USER } as any);\n\n\t\tassert.ok(label1Name === 'resource.txt' as string);\n\t\tassert.ok(label2Name === 'resource.md' as string);\n\n\t\tawait testConfigurationService.setUserConfiguration(CustomEditorLabelService.SETTING_ID_ENABLED, true);\n\t\ttestConfigurationService.onDidChangeConfigurationEmitter.fire({ affectsConfiguration(configuration: string) { return configuration === CustomEditorLabelService.SETTING_ID_ENABLED; }, source: ConfigurationTarget.USER } as any);\n\n\t\tawait testConfigurationService.setUserConfiguration(CustomEditorLabelService.SETTING_ID_PATTERNS, {\n\t\t\t'thePath/**/resource.txt': 'Label 4',\n\t\t\t'thePath/of/*/resource.txt': 'Label 5',\n\t\t});\n\t\ttestConfigurationService.onDidChangeConfigurationEmitter.fire({ affectsConfiguration(configuration: string) { return configuration === CustomEditorLabelService.SETTING_ID_PATTERNS; }, source: ConfigurationTarget.USER } as any);\n\n\t\tassert.ok(label1Name === 'Label 5' as string);\n\t\tassert.ok(label2Name === 'resource.md' as string);\n\t});\n\n\tensureNoDisposablesAreLeakedInTestSuite();\n});\n"],
  "mappings": "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",
  "names": []
}
