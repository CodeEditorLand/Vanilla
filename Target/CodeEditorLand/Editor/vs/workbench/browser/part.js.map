{
  "version": 3,
  "sources": ["../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/browser/part.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport \"./media/part.css\";\nimport {\n\tDimension,\n\ttype IDimension,\n\ttype IDomPosition,\n\tgetActiveDocument,\n\tprepend,\n\tsize,\n} from \"../../base/browser/dom.js\";\nimport type {\n\tISerializableView,\n\tIViewSize,\n} from \"../../base/browser/ui/grid/grid.js\";\nimport { Emitter, type Event } from \"../../base/common/event.js\";\nimport { type IDisposable, toDisposable } from \"../../base/common/lifecycle.js\";\nimport { assertIsDefined } from \"../../base/common/types.js\";\nimport type { IStorageService } from \"../../platform/storage/common/storage.js\";\nimport type {\n\tIColorTheme,\n\tIThemeService,\n} from \"../../platform/theme/common/themeService.js\";\nimport { Component } from \"../common/component.js\";\nimport type { IWorkbenchLayoutService } from \"../services/layout/browser/layoutService.js\";\n\nexport interface IPartOptions {\n\treadonly hasTitle?: boolean;\n\treadonly borderWidth?: () => number;\n}\n\nexport interface ILayoutContentResult {\n\treadonly headerSize: IDimension;\n\treadonly titleSize: IDimension;\n\treadonly contentSize: IDimension;\n\treadonly footerSize: IDimension;\n}\n\n/**\n * Parts are layed out in the workbench and have their own layout that\n * arranges an optional title and mandatory content area to show content.\n */\nexport abstract class Part extends Component implements ISerializableView {\n\tprivate _dimension: Dimension | undefined;\n\tget dimension(): Dimension | undefined {\n\t\treturn this._dimension;\n\t}\n\n\tprivate _contentPosition: IDomPosition | undefined;\n\tget contentPosition(): IDomPosition | undefined {\n\t\treturn this._contentPosition;\n\t}\n\n\tprotected _onDidVisibilityChange = this._register(new Emitter<boolean>());\n\treadonly onDidVisibilityChange = this._onDidVisibilityChange.event;\n\n\tprivate parent: HTMLElement | undefined;\n\tprivate headerArea: HTMLElement | undefined;\n\tprivate titleArea: HTMLElement | undefined;\n\tprivate contentArea: HTMLElement | undefined;\n\tprivate footerArea: HTMLElement | undefined;\n\tprivate partLayout: PartLayout | undefined;\n\n\tconstructor(\n\t\tid: string,\n\t\tprivate options: IPartOptions,\n\t\tthemeService: IThemeService,\n\t\tstorageService: IStorageService,\n\t\tprotected readonly layoutService: IWorkbenchLayoutService,\n\t) {\n\t\tsuper(id, themeService, storageService);\n\n\t\tthis._register(layoutService.registerPart(this));\n\t}\n\n\tprotected override onThemeChange(theme: IColorTheme): void {\n\t\t// only call if our create() method has been called\n\t\tif (this.parent) {\n\t\t\tsuper.onThemeChange(theme);\n\t\t}\n\t}\n\n\t/**\n\t * Note: Clients should not call this method, the workbench calls this\n\t * method. Calling it otherwise may result in unexpected behavior.\n\t *\n\t * Called to create title and content area of the part.\n\t */\n\tcreate(parent: HTMLElement, options?: object): void {\n\t\tthis.parent = parent;\n\t\tthis.titleArea = this.createTitleArea(parent, options);\n\t\tthis.contentArea = this.createContentArea(parent, options);\n\n\t\tthis.partLayout = new PartLayout(this.options, this.contentArea);\n\n\t\tthis.updateStyles();\n\t}\n\n\t/**\n\t * Returns the overall part container.\n\t */\n\tgetContainer(): HTMLElement | undefined {\n\t\treturn this.parent;\n\t}\n\n\t/**\n\t * Subclasses override to provide a title area implementation.\n\t */\n\tprotected createTitleArea(\n\t\tparent: HTMLElement,\n\t\toptions?: object,\n\t): HTMLElement | undefined {\n\t\treturn undefined;\n\t}\n\n\t/**\n\t * Returns the title area container.\n\t */\n\tprotected getTitleArea(): HTMLElement | undefined {\n\t\treturn this.titleArea;\n\t}\n\n\t/**\n\t * Subclasses override to provide a content area implementation.\n\t */\n\tprotected createContentArea(\n\t\tparent: HTMLElement,\n\t\toptions?: object,\n\t): HTMLElement | undefined {\n\t\treturn undefined;\n\t}\n\n\t/**\n\t * Returns the content area container.\n\t */\n\tprotected getContentArea(): HTMLElement | undefined {\n\t\treturn this.contentArea;\n\t}\n\n\t/**\n\t * Sets the header area\n\t */\n\tprotected setHeaderArea(headerContainer: HTMLElement): void {\n\t\tif (this.headerArea) {\n\t\t\tthrow new Error(\"Header already exists\");\n\t\t}\n\n\t\tif (!this.parent || !this.titleArea) {\n\t\t\treturn;\n\t\t}\n\n\t\tprepend(this.parent, headerContainer);\n\t\theaderContainer.classList.add(\"header-or-footer\");\n\t\theaderContainer.classList.add(\"header\");\n\n\t\tthis.headerArea = headerContainer;\n\t\tthis.partLayout?.setHeaderVisibility(true);\n\t\tthis.relayout();\n\t}\n\n\t/**\n\t * Sets the footer area\n\t */\n\tprotected setFooterArea(footerContainer: HTMLElement): void {\n\t\tif (this.footerArea) {\n\t\t\tthrow new Error(\"Footer already exists\");\n\t\t}\n\n\t\tif (!this.parent || !this.titleArea) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.parent.appendChild(footerContainer);\n\t\tfooterContainer.classList.add(\"header-or-footer\");\n\t\tfooterContainer.classList.add(\"footer\");\n\n\t\tthis.footerArea = footerContainer;\n\t\tthis.partLayout?.setFooterVisibility(true);\n\t\tthis.relayout();\n\t}\n\n\t/**\n\t * removes the header area\n\t */\n\tprotected removeHeaderArea(): void {\n\t\tif (this.headerArea) {\n\t\t\tthis.headerArea.remove();\n\t\t\tthis.headerArea = undefined;\n\t\t\tthis.partLayout?.setHeaderVisibility(false);\n\t\t\tthis.relayout();\n\t\t}\n\t}\n\n\t/**\n\t * removes the footer area\n\t */\n\tprotected removeFooterArea(): void {\n\t\tif (this.footerArea) {\n\t\t\tthis.footerArea.remove();\n\t\t\tthis.footerArea = undefined;\n\t\t\tthis.partLayout?.setFooterVisibility(false);\n\t\t\tthis.relayout();\n\t\t}\n\t}\n\n\tprivate relayout() {\n\t\tif (this.dimension && this.contentPosition) {\n\t\t\tthis.layout(\n\t\t\t\tthis.dimension.width,\n\t\t\t\tthis.dimension.height,\n\t\t\t\tthis.contentPosition.top,\n\t\t\t\tthis.contentPosition.left,\n\t\t\t);\n\t\t}\n\t}\n\t/**\n\t * Layout title and content area in the given dimension.\n\t */\n\tprotected layoutContents(\n\t\twidth: number,\n\t\theight: number,\n\t): ILayoutContentResult {\n\t\tconst partLayout = assertIsDefined(this.partLayout);\n\n\t\treturn partLayout.layout(width, height);\n\t}\n\n\t//#region ISerializableView\n\n\tprotected _onDidChange = this._register(\n\t\tnew Emitter<IViewSize | undefined>(),\n\t);\n\tget onDidChange(): Event<IViewSize | undefined> {\n\t\treturn this._onDidChange.event;\n\t}\n\n\telement!: HTMLElement;\n\n\tabstract minimumWidth: number;\n\tabstract maximumWidth: number;\n\tabstract minimumHeight: number;\n\tabstract maximumHeight: number;\n\n\tlayout(width: number, height: number, top: number, left: number): void {\n\t\tthis._dimension = new Dimension(width, height);\n\t\tthis._contentPosition = { top, left };\n\t}\n\n\tsetVisible(visible: boolean) {\n\t\tthis._onDidVisibilityChange.fire(visible);\n\t}\n\n\tabstract toJSON(): object;\n\n\t//#endregion\n}\n\nclass PartLayout {\n\tprivate static readonly HEADER_HEIGHT = 35;\n\tprivate static readonly TITLE_HEIGHT = 35;\n\tprivate static readonly Footer_HEIGHT = 35;\n\n\tprivate headerVisible = false;\n\tprivate footerVisible = false;\n\n\tconstructor(\n\t\tprivate options: IPartOptions,\n\t\tprivate contentArea: HTMLElement | undefined,\n\t) {}\n\n\tlayout(width: number, height: number): ILayoutContentResult {\n\t\t// Title Size: Width (Fill), Height (Variable)\n\t\tlet titleSize: Dimension;\n\t\tif (this.options.hasTitle) {\n\t\t\ttitleSize = new Dimension(\n\t\t\t\twidth,\n\t\t\t\tMath.min(height, PartLayout.TITLE_HEIGHT),\n\t\t\t);\n\t\t} else {\n\t\t\ttitleSize = Dimension.None;\n\t\t}\n\n\t\t// Header Size: Width (Fill), Height (Variable)\n\t\tlet headerSize: Dimension;\n\t\tif (this.headerVisible) {\n\t\t\theaderSize = new Dimension(\n\t\t\t\twidth,\n\t\t\t\tMath.min(height, PartLayout.HEADER_HEIGHT),\n\t\t\t);\n\t\t} else {\n\t\t\theaderSize = Dimension.None;\n\t\t}\n\n\t\t// Footer Size: Width (Fill), Height (Variable)\n\t\tlet footerSize: Dimension;\n\t\tif (this.footerVisible) {\n\t\t\tfooterSize = new Dimension(\n\t\t\t\twidth,\n\t\t\t\tMath.min(height, PartLayout.Footer_HEIGHT),\n\t\t\t);\n\t\t} else {\n\t\t\tfooterSize = Dimension.None;\n\t\t}\n\n\t\tlet contentWidth = width;\n\t\tif (this.options && typeof this.options.borderWidth === \"function\") {\n\t\t\tcontentWidth -= this.options.borderWidth(); // adjust for border size\n\t\t}\n\n\t\t// Content Size: Width (Fill), Height (Variable)\n\t\tconst contentSize = new Dimension(\n\t\t\tcontentWidth,\n\t\t\theight - titleSize.height - headerSize.height - footerSize.height,\n\t\t);\n\n\t\t// Content\n\t\tif (this.contentArea) {\n\t\t\tsize(this.contentArea, contentSize.width, contentSize.height);\n\t\t}\n\n\t\treturn { headerSize, titleSize, contentSize, footerSize };\n\t}\n\n\tsetFooterVisibility(visible: boolean): void {\n\t\tthis.footerVisible = visible;\n\t}\n\n\tsetHeaderVisibility(visible: boolean): void {\n\t\tthis.headerVisible = visible;\n\t}\n}\n\nexport interface IMultiWindowPart {\n\treadonly element: HTMLElement;\n}\n\nexport abstract class MultiWindowParts<\n\tT extends IMultiWindowPart,\n> extends Component {\n\tprotected readonly _parts = new Set<T>();\n\tget parts() {\n\t\treturn Array.from(this._parts);\n\t}\n\n\tabstract readonly mainPart: T;\n\n\tregisterPart(part: T): IDisposable {\n\t\tthis._parts.add(part);\n\n\t\treturn toDisposable(() => this.unregisterPart(part));\n\t}\n\n\tprotected unregisterPart(part: T): void {\n\t\tthis._parts.delete(part);\n\t}\n\n\tgetPart(container: HTMLElement): T {\n\t\treturn this.getPartByDocument(container.ownerDocument);\n\t}\n\n\tprotected getPartByDocument(document: Document): T {\n\t\tif (this._parts.size > 1) {\n\t\t\tfor (const part of this._parts) {\n\t\t\t\tif (part.element?.ownerDocument === document) {\n\t\t\t\t\treturn part;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.mainPart;\n\t}\n\n\tget activePart(): T {\n\t\treturn this.getPartByDocument(getActiveDocument());\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
