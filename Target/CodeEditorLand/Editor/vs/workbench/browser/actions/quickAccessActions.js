import{Codicon as C}from"../../../../vs/base/common/codicons.js";import{KeyCode as t,KeyMod as i}from"../../../../vs/base/common/keyCodes.js";import{localize as S,localize2 as p}from"../../../../vs/nls.js";import"../../../../vs/platform/action/common/action.js";import{Action2 as l,MenuId as w,registerAction2 as k}from"../../../../vs/platform/actions/common/actions.js";import{CommandsRegistry as f}from"../../../../vs/platform/commands/common/commands.js";import"../../../../vs/platform/instantiation/common/instantiation.js";import{IKeybindingService as I}from"../../../../vs/platform/keybinding/common/keybinding.js";import{KeybindingsRegistry as a,KeybindingWeight as c}from"../../../../vs/platform/keybinding/common/keybindingsRegistry.js";import"../../../../vs/platform/quickinput/common/quickAccess.js";import{IQuickInputService as o,ItemActivation as N}from"../../../../vs/platform/quickinput/common/quickInput.js";import{defaultQuickAccessContext as v,getQuickNavigateHandler as b,inQuickPickContext as u}from"../../../../vs/workbench/browser/quickaccess.js";const s={primary:i.CtrlCmd|t.KeyP,secondary:[i.CtrlCmd|t.KeyE],mac:{primary:i.CtrlCmd|t.KeyP,secondary:void 0}};a.registerCommandAndKeybindingRule({id:"workbench.action.closeQuickOpen",weight:c.WorkbenchContrib,when:u,primary:t.Escape,secondary:[i.Shift|t.Escape],handler:e=>e.get(o).cancel()}),a.registerCommandAndKeybindingRule({id:"workbench.action.acceptSelectedQuickOpenItem",weight:c.WorkbenchContrib,when:u,primary:0,handler:e=>e.get(o).accept()}),a.registerCommandAndKeybindingRule({id:"workbench.action.alternativeAcceptSelectedQuickOpenItem",weight:c.WorkbenchContrib,when:u,primary:0,handler:e=>e.get(o).accept({ctrlCmd:!0,alt:!1})}),a.registerCommandAndKeybindingRule({id:"workbench.action.focusQuickOpen",weight:c.WorkbenchContrib,when:u,primary:0,handler:e=>{e.get(o).focus()}});const A="workbench.action.quickOpenNavigateNextInFilePicker";a.registerCommandAndKeybindingRule({id:A,weight:c.WorkbenchContrib+50,handler:b(A,!0),when:v,primary:s.primary,secondary:s.secondary,mac:s.mac});const q="workbench.action.quickOpenNavigatePreviousInFilePicker";a.registerCommandAndKeybindingRule({id:q,weight:c.WorkbenchContrib+50,handler:b(q,!1),when:v,primary:s.primary|i.Shift,secondary:[s.secondary[0]|i.Shift],mac:{primary:s.mac.primary|i.Shift,secondary:void 0}}),a.registerCommandAndKeybindingRule({id:"workbench.action.quickPickManyToggle",weight:c.WorkbenchContrib,when:u,primary:0,handler:e=>{e.get(o).toggle()}}),a.registerCommandAndKeybindingRule({id:"workbench.action.quickInputBack",weight:c.WorkbenchContrib+50,when:u,primary:0,win:{primary:i.Alt|t.LeftArrow},mac:{primary:i.WinCtrl|t.Minus},linux:{primary:i.CtrlCmd|i.Alt|t.Minus},handler:e=>{e.get(o).back()}}),k(class extends l{constructor(){super({id:"workbench.action.quickOpen",title:p("quickOpen","Go to File..."),metadata:{description:"Quick access",args:[{name:"prefix",schema:{type:"string"}}]},keybinding:{weight:c.WorkbenchContrib,primary:s.primary,secondary:s.secondary,mac:s.mac},f1:!0})}run(n,r){n.get(o).quickAccess.show(typeof r=="string"?r:void 0,{preserveValue:typeof r=="string"})}}),k(class extends l{constructor(){super({id:"workbench.action.quickOpenWithModes",title:S("quickOpenWithModes","Quick Open"),icon:C.search,menu:{id:w.CommandCenterCenter,order:100}})}run(n){const r=n.get(o),d={includeHelp:!0,from:"commandCenter"};r.quickAccess.show(void 0,{preserveValue:!0,providerOptions:d})}}),f.registerCommand("workbench.action.quickOpenPreviousEditor",async e=>{e.get(o).quickAccess.show("",{itemActivation:N.SECOND})});class m extends l{constructor(r,d,h,y,g){super({id:r,title:d,f1:!0,keybinding:g});this.id=r;this.next=h;this.quickNavigate=y}async run(r){const d=r.get(I),h=r.get(o),y=d.lookupKeybindings(this.id),g=this.quickNavigate?{keybindings:y}:void 0;h.navigate(this.next,g)}}class O extends m{constructor(){super("workbench.action.quickOpenNavigateNext",p("quickNavigateNext","Navigate Next in Quick Open"),!0,!0)}}class Q extends m{constructor(){super("workbench.action.quickOpenNavigatePrevious",p("quickNavigatePrevious","Navigate Previous in Quick Open"),!1,!0)}}class P extends m{constructor(){super("workbench.action.quickOpenSelectNext",p("quickSelectNext","Select Next in Quick Open"),!0,!1,{weight:c.WorkbenchContrib+50,when:u,primary:0,mac:{primary:i.WinCtrl|t.KeyN}})}}class K extends m{constructor(){super("workbench.action.quickOpenSelectPrevious",p("quickSelectPrevious","Select Previous in Quick Open"),!1,!1,{weight:c.WorkbenchContrib+50,when:u,primary:0,mac:{primary:i.WinCtrl|t.KeyP}})}}k(P),k(K),k(O),k(Q);
