var x=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var g=(m,c,o,e)=>{for(var i=e>1?void 0:e?F(c,o):c,a=m.length-1,r;a>=0;a--)(r=m[a])&&(i=(e?r(c,o,i):r(i))||i);return e&&i&&x(c,o,i),i},t=(m,c)=>(o,e)=>c(o,e,m);import"vs/css!./media/auxiliaryBarPart";import{$ as H}from"../../../../../vs/base/browser/dom.js";import{ActionsOrientation as v,prepareActions as h}from"../../../../../vs/base/browser/ui/actionbar/actionbar.js";import{ActionViewItem as M}from"../../../../../vs/base/browser/ui/actionbar/actionViewItems.js";import{HoverPosition as T}from"../../../../../vs/base/browser/ui/hover/hoverWidget.js";import{LayoutPriority as k}from"../../../../../vs/base/browser/ui/splitview/splitview.js";import{Separator as S,SubmenuAction as K,toAction as y}from"../../../../../vs/base/common/actions.js";import{assertIsDefined as W}from"../../../../../vs/base/common/types.js";import{localize as p}from"../../../../../vs/nls.js";import{createAndFillInContextMenuActions as G}from"../../../../../vs/platform/actions/browser/menuEntryActionViewItem.js";import{HiddenItemStrategy as Y,WorkbenchToolBar as U}from"../../../../../vs/platform/actions/browser/toolbar.js";import{IMenuService as z,MenuId as f}from"../../../../../vs/platform/actions/common/actions.js";import{ICommandService as X}from"../../../../../vs/platform/commands/common/commands.js";import{IConfigurationService as Z}from"../../../../../vs/platform/configuration/common/configuration.js";import{IContextKeyService as $}from"../../../../../vs/platform/contextkey/common/contextkey.js";import{IContextMenuService as j}from"../../../../../vs/platform/contextview/browser/contextView.js";import{IHoverService as J}from"../../../../../vs/platform/hover/browser/hover.js";import{IInstantiationService as q}from"../../../../../vs/platform/instantiation/common/instantiation.js";import{IKeybindingService as Q}from"../../../../../vs/platform/keybinding/common/keybinding.js";import{INotificationService as ee}from"../../../../../vs/platform/notification/common/notification.js";import{IStorageService as oe}from"../../../../../vs/platform/storage/common/storage.js";import{contrastBorder as B}from"../../../../../vs/platform/theme/common/colorRegistry.js";import{IThemeService as ie}from"../../../../../vs/platform/theme/common/themeService.js";import{CompositeMenuActions as te}from"../../../../../vs/workbench/browser/actions.js";import{ToggleSidebarPositionAction as b}from"../../../../../vs/workbench/browser/actions/layoutActions.js";import{ToggleAuxiliaryBarAction as u}from"../../../../../vs/workbench/browser/parts/auxiliarybar/auxiliaryBarActions.js";import"../../../../../vs/workbench/browser/parts/paneCompositeBar.js";import{AbstractPaneCompositePart as re,CompositeBarPosition as n}from"../../../../../vs/workbench/browser/parts/paneCompositePart.js";import{ActiveAuxiliaryContext as ne,AuxiliaryBarFocusContext as ae}from"../../../../../vs/workbench/common/contextkeys.js";import{ACTIVITY_BAR_BADGE_BACKGROUND as se,ACTIVITY_BAR_BADGE_FOREGROUND as ce,ACTIVITY_BAR_TOP_ACTIVE_BORDER as de,ACTIVITY_BAR_TOP_DRAG_AND_DROP_BORDER as me,ACTIVITY_BAR_TOP_FOREGROUND as pe,ACTIVITY_BAR_TOP_INACTIVE_FOREGROUND as Ie,PANEL_ACTIVE_TITLE_BORDER as le,PANEL_ACTIVE_TITLE_FOREGROUND as ue,PANEL_DRAG_AND_DROP_BORDER as Ce,PANEL_INACTIVE_TITLE_FOREGROUND as Ae,SIDE_BAR_BACKGROUND as C,SIDE_BAR_BORDER as O,SIDE_BAR_FOREGROUND as ge}from"../../../../../vs/workbench/common/theme.js";import{IViewDescriptorService as ve}from"../../../../../vs/workbench/common/views.js";import{IExtensionService as he}from"../../../../../vs/workbench/services/extensions/common/extensions.js";import{ActivityBarPosition as d,IWorkbenchLayoutService as Te,LayoutSettings as A,Parts as R,Position as P}from"../../../../../vs/workbench/services/layout/browser/layoutService.js";let s=class extends re{constructor(o,e,i,a,r,I,E,_,D,l,L,Se,w,V){super(R.AUXILIARYBAR_PART,{hasTitle:!0,borderWidth:()=>this.getColor(O)||this.getColor(B)?1:0},s.activePanelSettingsKey,ne.bindTo(l),ae.bindTo(l),"auxiliarybar","auxiliarybar",void 0,o,e,i,a,r,I,E,_,D,l,L,w);this.commandService=Se;this.configurationService=V;this._register(V.onDidChangeConfiguration(N=>{N.affectsConfiguration(A.ACTIVITY_BAR_LOCATION)&&this.onDidChangeActivityBarLocation()}))}static activePanelSettingsKey="workbench.auxiliarybar.activepanelid";static pinnedPanelsKey="workbench.auxiliarybar.pinnedPanels";static placeholdeViewContainersKey="workbench.auxiliarybar.placeholderPanels";static viewContainersWorkspaceStateKey="workbench.auxiliarybar.viewContainersWorkspaceState";minimumWidth=170;maximumWidth=Number.POSITIVE_INFINITY;minimumHeight=0;maximumHeight=Number.POSITIVE_INFINITY;get preferredHeight(){return this.layoutService.mainContainerDimension.height*.4}get preferredWidth(){const o=this.getActivePaneComposite();if(!o)return;const e=o.getOptimalWidth();if(typeof e=="number")return Math.max(e,300)}priority=k.Low;onDidChangeActivityBarLocation(){this.updateCompositeBar();const o=this.getActiveComposite()?.getId();o&&this.onTitleAreaUpdate(o)}updateStyles(){super.updateStyles();const o=W(this.getContainer());o.style.backgroundColor=this.getColor(C)||"";const e=this.getColor(O)||this.getColor(B),i=this.layoutService.getSideBarPosition()===P.RIGHT;o.style.color=this.getColor(ge)||"",o.style.borderLeftColor=e??"",o.style.borderRightColor=e??"",o.style.borderLeftStyle=e&&!i?"solid":"none",o.style.borderRightStyle=e&&i?"solid":"none",o.style.borderLeftWidth=e&&!i?"1px":"0px",o.style.borderRightWidth=e&&i?"1px":"0px"}getCompositeBarOptions(){const o=this;return{partContainerClass:"auxiliarybar",pinnedViewContainersKey:s.pinnedPanelsKey,placeholderViewContainersKey:s.placeholdeViewContainersKey,viewContainersWorkspaceStateKey:s.viewContainersWorkspaceStateKey,icon:!0,orientation:v.HORIZONTAL,recomputeSizes:!0,activityHoverOptions:{position:()=>this.getCompositeBarPosition()===n.BOTTOM?T.ABOVE:T.BELOW},fillExtraContextMenuActions:e=>this.fillExtraContextMenuActions(e),compositeSize:0,iconSize:16,get overflowActionSize(){return o.getCompositeBarPosition()===n.TITLE?40:30},colors:e=>({activeBackgroundColor:e.getColor(C),inactiveBackgroundColor:e.getColor(C),get activeBorderBottomColor(){return o.getCompositeBarPosition()===n.TITLE?e.getColor(le):e.getColor(de)},get activeForegroundColor(){return o.getCompositeBarPosition()===n.TITLE?e.getColor(ue):e.getColor(pe)},get inactiveForegroundColor(){return o.getCompositeBarPosition()===n.TITLE?e.getColor(Ae):e.getColor(Ie)},badgeBackground:e.getColor(se),badgeForeground:e.getColor(ce),get dragAndDropBorder(){return o.getCompositeBarPosition()===n.TITLE?e.getColor(Ce):e.getColor(me)}}),compact:!0}}fillExtraContextMenuActions(o){const e=this.layoutService.getSideBarPosition()===P.LEFT,i=this.getViewsSubmenuAction();i&&(o.push(new S),o.push(i));const a=this.menuService.getMenuActions(f.ActivityBarPositionMenu,this.contextKeyService,{shouldForwardArgs:!0,renderShortTitle:!0}),r=[];G(a,{primary:[],secondary:r}),o.push(new S,new K("workbench.action.panel.position",p("activity bar position","Activity Bar Position"),r),y({id:b.ID,label:e?p("move second side bar left","Move Secondary Side Bar Left"):p("move second side bar right","Move Secondary Side Bar Right"),run:()=>this.commandService.executeCommand(b.ID)}),y({id:u.ID,label:p("hide second side bar","Hide Secondary Side Bar"),run:()=>this.commandService.executeCommand(u.ID)}))}shouldShowCompositeBar(){return this.configurationService.getValue(A.ACTIVITY_BAR_LOCATION)!==d.HIDDEN}getCompositeBarPosition(){switch(this.configurationService.getValue(A.ACTIVITY_BAR_LOCATION)){case d.TOP:return n.TOP;case d.BOTTOM:return n.BOTTOM;case d.HIDDEN:return n.TITLE;case d.DEFAULT:return n.TITLE;default:return n.TITLE}}createHeaderArea(){const o=super.createHeaderArea(),e=H(".auxiliary-bar-global-header"),i=this.headerFooterCompositeBarDispoables.add(this.instantiationService.createInstance(te,f.AuxiliaryBarHeader,void 0,void 0)),a=this.headerFooterCompositeBarDispoables.add(this.instantiationService.createInstance(U,e,{actionViewItemProvider:(r,I)=>this.headerActionViewItemProvider(r,I),orientation:v.HORIZONTAL,hiddenItemStrategy:Y.NoHide,getKeyBinding:r=>this.keybindingService.lookupKeybinding(r.id)}));return a.setActions(h(i.getPrimaryActions())),this.headerFooterCompositeBarDispoables.add(i.onDidChange(()=>a.setActions(h(i.getPrimaryActions())))),o.appendChild(e),o}headerActionViewItemProvider(o,e){if(o.id===u.ID)return this.instantiationService.createInstance(M,void 0,o,e)}toJSON(){return{type:R.AUXILIARYBAR_PART}}};s=g([t(0,ee),t(1,oe),t(2,j),t(3,Te),t(4,Q),t(5,J),t(6,q),t(7,ie),t(8,ve),t(9,$),t(10,he),t(11,X),t(12,z),t(13,Z)],s);export{s as AuxiliaryBarPart};
