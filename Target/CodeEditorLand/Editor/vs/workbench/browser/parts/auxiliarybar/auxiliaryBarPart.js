var x=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var g=(m,c,o,e)=>{for(var t=e>1?void 0:e?F(c,o):c,a=m.length-1,r;a>=0;a--)(r=m[a])&&(t=(e?r(c,o,t):r(t))||t);return e&&t&&x(c,o,t),t},i=(m,c)=>(o,e)=>c(o,e,m);import"./media/auxiliaryBarPart.css";import{$ as H}from"../../../../base/browser/dom.js";import{ActionViewItem as M}from"../../../../base/browser/ui/actionbar/actionViewItems.js";import{ActionsOrientation as v,prepareActions as h}from"../../../../base/browser/ui/actionbar/actionbar.js";import{HoverPosition as T}from"../../../../base/browser/ui/hover/hoverWidget.js";import{LayoutPriority as k}from"../../../../base/browser/ui/splitview/splitview.js";import{Separator as y,SubmenuAction as K,toAction as S}from"../../../../base/common/actions.js";import{assertIsDefined as W}from"../../../../base/common/types.js";import{localize as p}from"../../../../nls.js";import{createAndFillInContextMenuActions as G}from"../../../../platform/actions/browser/menuEntryActionViewItem.js";import{HiddenItemStrategy as Y,WorkbenchToolBar as U}from"../../../../platform/actions/browser/toolbar.js";import{IMenuService as z,MenuId as f}from"../../../../platform/actions/common/actions.js";import{ICommandService as j}from"../../../../platform/commands/common/commands.js";import{IConfigurationService as X}from"../../../../platform/configuration/common/configuration.js";import{IContextKeyService as Z}from"../../../../platform/contextkey/common/contextkey.js";import{IContextMenuService as $}from"../../../../platform/contextview/browser/contextView.js";import{IHoverService as J}from"../../../../platform/hover/browser/hover.js";import{IInstantiationService as q}from"../../../../platform/instantiation/common/instantiation.js";import{IKeybindingService as Q}from"../../../../platform/keybinding/common/keybinding.js";import{INotificationService as ee}from"../../../../platform/notification/common/notification.js";import{IStorageService as oe}from"../../../../platform/storage/common/storage.js";import{contrastBorder as B}from"../../../../platform/theme/common/colorRegistry.js";import{IThemeService as te}from"../../../../platform/theme/common/themeService.js";import{ActiveAuxiliaryContext as ie,AuxiliaryBarFocusContext as re}from"../../../common/contextkeys.js";import{ACTIVITY_BAR_BADGE_BACKGROUND as ne,ACTIVITY_BAR_BADGE_FOREGROUND as ae,ACTIVITY_BAR_TOP_ACTIVE_BORDER as se,ACTIVITY_BAR_TOP_DRAG_AND_DROP_BORDER as ce,ACTIVITY_BAR_TOP_FOREGROUND as de,ACTIVITY_BAR_TOP_INACTIVE_FOREGROUND as me,PANEL_ACTIVE_TITLE_BORDER as pe,PANEL_ACTIVE_TITLE_FOREGROUND as Ie,PANEL_DRAG_AND_DROP_BORDER as le,PANEL_INACTIVE_TITLE_FOREGROUND as ue,SIDE_BAR_BACKGROUND as u,SIDE_BAR_BORDER as b,SIDE_BAR_FOREGROUND as Ce}from"../../../common/theme.js";import{IViewDescriptorService as Ae}from"../../../common/views.js";import{IExtensionService as ge}from"../../../services/extensions/common/extensions.js";import{ActivityBarPosition as d,IWorkbenchLayoutService as ve,LayoutSettings as C,Parts as O,Position as R}from"../../../services/layout/browser/layoutService.js";import{CompositeMenuActions as he}from"../../actions.js";import{ToggleSidebarPositionAction as P}from"../../actions/layoutActions.js";import{AbstractPaneCompositePart as Te,CompositeBarPosition as n}from"../paneCompositePart.js";import{ToggleAuxiliaryBarAction as A}from"./auxiliaryBarActions.js";let s=class extends Te{constructor(o,e,t,a,r,I,E,_,D,l,L,ye,w,V){super(O.AUXILIARYBAR_PART,{hasTitle:!0,borderWidth:()=>this.getColor(b)||this.getColor(B)?1:0},s.activePanelSettingsKey,ie.bindTo(l),re.bindTo(l),"auxiliarybar","auxiliarybar",void 0,o,e,t,a,r,I,E,_,D,l,L,w);this.commandService=ye;this.configurationService=V;this._register(V.onDidChangeConfiguration(N=>{N.affectsConfiguration(C.ACTIVITY_BAR_LOCATION)&&this.onDidChangeActivityBarLocation()}))}static activePanelSettingsKey="workbench.auxiliarybar.activepanelid";static pinnedPanelsKey="workbench.auxiliarybar.pinnedPanels";static placeholdeViewContainersKey="workbench.auxiliarybar.placeholderPanels";static viewContainersWorkspaceStateKey="workbench.auxiliarybar.viewContainersWorkspaceState";minimumWidth=170;maximumWidth=Number.POSITIVE_INFINITY;minimumHeight=0;maximumHeight=Number.POSITIVE_INFINITY;get preferredHeight(){return this.layoutService.mainContainerDimension.height*.4}get preferredWidth(){const o=this.getActivePaneComposite();if(!o)return;const e=o.getOptimalWidth();if(typeof e=="number")return Math.max(e,300)}priority=k.Low;onDidChangeActivityBarLocation(){this.updateCompositeBar();const o=this.getActiveComposite()?.getId();o&&this.onTitleAreaUpdate(o)}updateStyles(){super.updateStyles();const o=W(this.getContainer());o.style.backgroundColor=this.getColor(u)||"";const e=this.getColor(b)||this.getColor(B),t=this.layoutService.getSideBarPosition()===R.RIGHT;o.style.color=this.getColor(Ce)||"",o.style.borderLeftColor=e??"",o.style.borderRightColor=e??"",o.style.borderLeftStyle=e&&!t?"solid":"none",o.style.borderRightStyle=e&&t?"solid":"none",o.style.borderLeftWidth=e&&!t?"1px":"0px",o.style.borderRightWidth=e&&t?"1px":"0px"}getCompositeBarOptions(){const o=this;return{partContainerClass:"auxiliarybar",pinnedViewContainersKey:s.pinnedPanelsKey,placeholderViewContainersKey:s.placeholdeViewContainersKey,viewContainersWorkspaceStateKey:s.viewContainersWorkspaceStateKey,icon:!0,orientation:v.HORIZONTAL,recomputeSizes:!0,activityHoverOptions:{position:()=>this.getCompositeBarPosition()===n.BOTTOM?T.ABOVE:T.BELOW},fillExtraContextMenuActions:e=>this.fillExtraContextMenuActions(e),compositeSize:0,iconSize:16,get overflowActionSize(){return o.getCompositeBarPosition()===n.TITLE?40:30},colors:e=>({activeBackgroundColor:e.getColor(u),inactiveBackgroundColor:e.getColor(u),get activeBorderBottomColor(){return o.getCompositeBarPosition()===n.TITLE?e.getColor(pe):e.getColor(se)},get activeForegroundColor(){return o.getCompositeBarPosition()===n.TITLE?e.getColor(Ie):e.getColor(de)},get inactiveForegroundColor(){return o.getCompositeBarPosition()===n.TITLE?e.getColor(ue):e.getColor(me)},badgeBackground:e.getColor(ne),badgeForeground:e.getColor(ae),get dragAndDropBorder(){return o.getCompositeBarPosition()===n.TITLE?e.getColor(le):e.getColor(ce)}}),compact:!0}}fillExtraContextMenuActions(o){const e=this.layoutService.getSideBarPosition()===R.LEFT,t=this.getViewsSubmenuAction();t&&(o.push(new y),o.push(t));const a=this.menuService.getMenuActions(f.ActivityBarPositionMenu,this.contextKeyService,{shouldForwardArgs:!0,renderShortTitle:!0}),r=[];G(a,{primary:[],secondary:r}),o.push(new y,new K("workbench.action.panel.position",p("activity bar position","Activity Bar Position"),r),S({id:P.ID,label:e?p("move second side bar left","Move Secondary Side Bar Left"):p("move second side bar right","Move Secondary Side Bar Right"),run:()=>this.commandService.executeCommand(P.ID)}),S({id:A.ID,label:p("hide second side bar","Hide Secondary Side Bar"),run:()=>this.commandService.executeCommand(A.ID)}))}shouldShowCompositeBar(){return this.configurationService.getValue(C.ACTIVITY_BAR_LOCATION)!==d.HIDDEN}getCompositeBarPosition(){switch(this.configurationService.getValue(C.ACTIVITY_BAR_LOCATION)){case d.TOP:return n.TOP;case d.BOTTOM:return n.BOTTOM;case d.HIDDEN:return n.TITLE;case d.DEFAULT:return n.TITLE;default:return n.TITLE}}createHeaderArea(){const o=super.createHeaderArea(),e=H(".auxiliary-bar-global-header"),t=this.headerFooterCompositeBarDispoables.add(this.instantiationService.createInstance(he,f.AuxiliaryBarHeader,void 0,void 0)),a=this.headerFooterCompositeBarDispoables.add(this.instantiationService.createInstance(U,e,{actionViewItemProvider:(r,I)=>this.headerActionViewItemProvider(r,I),orientation:v.HORIZONTAL,hiddenItemStrategy:Y.NoHide,getKeyBinding:r=>this.keybindingService.lookupKeybinding(r.id)}));return a.setActions(h(t.getPrimaryActions())),this.headerFooterCompositeBarDispoables.add(t.onDidChange(()=>a.setActions(h(t.getPrimaryActions())))),o.appendChild(e),o}headerActionViewItemProvider(o,e){if(o.id===A.ID)return this.instantiationService.createInstance(M,void 0,o,e)}toJSON(){return{type:O.AUXILIARYBAR_PART}}};s=g([i(0,ee),i(1,oe),i(2,$),i(3,ve),i(4,Q),i(5,J),i(6,q),i(7,te),i(8,Ae),i(9,Z),i(10,ge),i(11,j),i(12,z),i(13,X)],s);export{s as AuxiliaryBarPart};
