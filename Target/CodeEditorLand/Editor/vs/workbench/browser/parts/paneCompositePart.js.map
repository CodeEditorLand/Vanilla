{
  "version": 3,
  "sources": ["../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/browser/parts/paneCompositePart.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport \"./media/paneCompositePart.css\";\nimport {\n\t$,\n\tDimension,\n\tEventHelper,\n\tEventType,\n\taddDisposableListener,\n\tgetWindow,\n\tprepend,\n\ttrackFocus,\n} from \"../../../base/browser/dom.js\";\nimport { StandardMouseEvent } from \"../../../base/browser/mouseEvent.js\";\nimport {\n\tGesture,\n\tEventType as GestureEventType,\n} from \"../../../base/browser/touch.js\";\nimport {\n\tActionsOrientation,\n\tprepareActions,\n} from \"../../../base/browser/ui/actionbar/actionbar.js\";\nimport type { IView } from \"../../../base/browser/ui/grid/grid.js\";\nimport { type IAction, SubmenuAction } from \"../../../base/common/actions.js\";\nimport { Event } from \"../../../base/common/event.js\";\nimport {\n\tDisposableStore,\n\tMutableDisposable,\n} from \"../../../base/common/lifecycle.js\";\nimport { localize } from \"../../../nls.js\";\nimport { createAndFillInActionBarActions } from \"../../../platform/actions/browser/menuEntryActionViewItem.js\";\nimport {\n\tHiddenItemStrategy,\n\tWorkbenchToolBar,\n} from \"../../../platform/actions/browser/toolbar.js\";\nimport {\n\tIMenuService,\n\tMenuId,\n} from \"../../../platform/actions/common/actions.js\";\nimport {\n\ttype IContextKey,\n\tIContextKeyService,\n} from \"../../../platform/contextkey/common/contextkey.js\";\nimport { IContextMenuService } from \"../../../platform/contextview/browser/contextView.js\";\nimport { IHoverService } from \"../../../platform/hover/browser/hover.js\";\nimport { IInstantiationService } from \"../../../platform/instantiation/common/instantiation.js\";\nimport { IKeybindingService } from \"../../../platform/keybinding/common/keybinding.js\";\nimport { INotificationService } from \"../../../platform/notification/common/notification.js\";\nimport type { IProgressIndicator } from \"../../../platform/progress/common/progress.js\";\nimport { Registry } from \"../../../platform/registry/common/platform.js\";\nimport { IStorageService } from \"../../../platform/storage/common/storage.js\";\nimport { IThemeService } from \"../../../platform/theme/common/themeService.js\";\nimport type { IComposite } from \"../../common/composite.js\";\nimport type { IPaneComposite } from \"../../common/panecomposite.js\";\nimport { EDITOR_DRAG_AND_DROP_BACKGROUND } from \"../../common/theme.js\";\nimport {\n\tIViewDescriptorService,\n\tViewContainerLocation,\n} from \"../../common/views.js\";\nimport { IExtensionService } from \"../../services/extensions/common/extensions.js\";\nimport {\n\tIWorkbenchLayoutService,\n\tParts,\n} from \"../../services/layout/browser/layoutService.js\";\nimport { CompositeMenuActions } from \"../actions.js\";\nimport type { Composite } from \"../composite.js\";\nimport { CompositeDragAndDropObserver, toggleDropEffect } from \"../dnd.js\";\nimport {\n\tExtensions,\n\ttype PaneComposite,\n\ttype PaneCompositeDescriptor,\n\ttype PaneCompositeRegistry,\n} from \"../panecomposite.js\";\nimport type { IPartOptions } from \"../part.js\";\nimport { CompositePart, type ICompositeTitleLabel } from \"./compositePart.js\";\nimport {\n\ttype IPaneCompositeBarOptions,\n\tPaneCompositeBar,\n} from \"./paneCompositeBar.js\";\nimport { ViewsSubMenu } from \"./views/viewPaneContainer.js\";\n\nexport enum CompositeBarPosition {\n\tTOP = 0,\n\tTITLE = 1,\n\tBOTTOM = 2,\n}\n\nexport interface IPaneCompositePart extends IView {\n\treadonly partId:\n\t\t| Parts.PANEL_PART\n\t\t| Parts.AUXILIARYBAR_PART\n\t\t| Parts.SIDEBAR_PART;\n\n\treadonly onDidPaneCompositeOpen: Event<IPaneComposite>;\n\treadonly onDidPaneCompositeClose: Event<IPaneComposite>;\n\n\t/**\n\t * Opens a viewlet with the given identifier and pass keyboard focus to it if specified.\n\t */\n\topenPaneComposite(\n\t\tid: string | undefined,\n\t\tfocus?: boolean,\n\t): Promise<IPaneComposite | undefined>;\n\n\t/**\n\t * Returns the current active viewlet if any.\n\t */\n\tgetActivePaneComposite(): IPaneComposite | undefined;\n\n\t/**\n\t * Returns the viewlet by id.\n\t */\n\tgetPaneComposite(id: string): PaneCompositeDescriptor | undefined;\n\n\t/**\n\t * Returns all enabled viewlets\n\t */\n\tgetPaneComposites(): PaneCompositeDescriptor[];\n\n\t/**\n\t * Returns the progress indicator for the side bar.\n\t */\n\tgetProgressIndicator(id: string): IProgressIndicator | undefined;\n\n\t/**\n\t * Hide the active viewlet.\n\t */\n\thideActivePaneComposite(): void;\n\n\t/**\n\t * Return the last active viewlet id.\n\t */\n\tgetLastActivePaneCompositeId(): string;\n\n\t/**\n\t * Returns id of pinned view containers following the visual order.\n\t */\n\tgetPinnedPaneCompositeIds(): string[];\n\n\t/**\n\t * Returns id of visible view containers following the visual order.\n\t */\n\tgetVisiblePaneCompositeIds(): string[];\n}\n\nexport abstract class AbstractPaneCompositePart\n\textends CompositePart<PaneComposite>\n\timplements IPaneCompositePart\n{\n\tprivate static readonly MIN_COMPOSITE_BAR_WIDTH = 50;\n\n\tget snap(): boolean {\n\t\t// Always allow snapping closed\n\t\t// Only allow dragging open if the panel contains view containers\n\t\treturn (\n\t\t\tthis.layoutService.isVisible(this.partId) ||\n\t\t\t!!this.paneCompositeBar.value?.getVisiblePaneCompositeIds().length\n\t\t);\n\t}\n\n\tget onDidPaneCompositeOpen(): Event<IPaneComposite> {\n\t\treturn Event.map(\n\t\t\tthis.onDidCompositeOpen.event,\n\t\t\t(compositeEvent) => <IPaneComposite>compositeEvent.composite,\n\t\t);\n\t}\n\treadonly onDidPaneCompositeClose = this.onDidCompositeClose\n\t\t.event as Event<IPaneComposite>;\n\n\tprivate readonly location: ViewContainerLocation;\n\tprivate titleContainer: HTMLElement | undefined;\n\tprivate headerFooterCompositeBarContainer: HTMLElement | undefined;\n\tprotected readonly headerFooterCompositeBarDispoables = this._register(\n\t\tnew DisposableStore(),\n\t);\n\tprivate paneCompositeBarContainer: HTMLElement | undefined;\n\tprivate readonly paneCompositeBar = this._register(\n\t\tnew MutableDisposable<PaneCompositeBar>(),\n\t);\n\tprivate compositeBarPosition: CompositeBarPosition | undefined = undefined;\n\tprivate emptyPaneMessageElement: HTMLElement | undefined;\n\n\tprivate globalToolBar: WorkbenchToolBar | undefined;\n\tprivate readonly globalActions: CompositeMenuActions;\n\n\tprivate blockOpening = false;\n\tprotected contentDimension: Dimension | undefined;\n\n\tconstructor(\n\t\treadonly partId: Parts.PANEL_PART | Parts.AUXILIARYBAR_PART | Parts.SIDEBAR_PART,\n\t\tpartOptions: IPartOptions,\n\t\tactivePaneCompositeSettingsKey: string,\n\t\tprivate readonly activePaneContextKey: IContextKey<string>,\n\t\tprivate paneFocusContextKey: IContextKey<boolean>,\n\t\tnameForTelemetry: string,\n\t\tcompositeCSSClass: string,\n\t\ttitleForegroundColor: string | undefined,\n\t\t@INotificationService notificationService: INotificationService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t\t@IHoverService hoverService: IHoverService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IViewDescriptorService private readonly viewDescriptorService: IViewDescriptorService,\n\t\t@IContextKeyService protected readonly contextKeyService: IContextKeyService,\n\t\t@IExtensionService private readonly extensionService: IExtensionService,\n\t\t@IMenuService protected readonly menuService: IMenuService,\n\t) {\n\t\tlet location = ViewContainerLocation.Sidebar;\n\t\tlet registryId = Extensions.Viewlets;\n\t\tlet globalActionsMenuId = MenuId.SidebarTitle;\n\t\tif (partId === Parts.PANEL_PART) {\n\t\t\tlocation = ViewContainerLocation.Panel;\n\t\t\tregistryId = Extensions.Panels;\n\t\t\tglobalActionsMenuId = MenuId.PanelTitle;\n\t\t} else if (partId === Parts.AUXILIARYBAR_PART) {\n\t\t\tlocation = ViewContainerLocation.AuxiliaryBar;\n\t\t\tregistryId = Extensions.Auxiliary;\n\t\t\tglobalActionsMenuId = MenuId.AuxiliaryBarTitle;\n\t\t}\n\t\tsuper(\n\t\t\tnotificationService,\n\t\t\tstorageService,\n\t\t\tcontextMenuService,\n\t\t\tlayoutService,\n\t\t\tkeybindingService,\n\t\t\thoverService,\n\t\t\tinstantiationService,\n\t\t\tthemeService,\n\t\t\tRegistry.as<PaneCompositeRegistry>(registryId),\n\t\t\tactivePaneCompositeSettingsKey,\n\t\t\tviewDescriptorService.getDefaultViewContainer(location)?.id || '',\n\t\t\tnameForTelemetry,\n\t\t\tcompositeCSSClass,\n\t\t\ttitleForegroundColor,\n\t\t\tpartId,\n\t\t\tpartOptions\n\t\t);\n\n\t\tthis.location = location;\n\t\tthis.globalActions = this._register(this.instantiationService.createInstance(CompositeMenuActions, globalActionsMenuId, undefined, undefined));\n\n\t\tthis.registerListeners();\n\t}\n\n\tprivate registerListeners(): void {\n\t\tthis._register(\n\t\t\tthis.onDidPaneCompositeOpen((composite) =>\n\t\t\t\tthis.onDidOpen(composite),\n\t\t\t),\n\t\t);\n\t\tthis._register(this.onDidPaneCompositeClose(this.onDidClose, this));\n\t\tthis._register(\n\t\t\tthis.globalActions.onDidChange(() =>\n\t\t\t\tthis.updateGlobalToolbarActions(),\n\t\t\t),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.registry.onDidDeregister(\n\t\t\t\t(viewletDescriptor: PaneCompositeDescriptor) => {\n\t\t\t\t\tconst activeContainers = this.viewDescriptorService\n\t\t\t\t\t\t.getViewContainersByLocation(this.location)\n\t\t\t\t\t\t.filter(\n\t\t\t\t\t\t\t(container) =>\n\t\t\t\t\t\t\t\tthis.viewDescriptorService.getViewContainerModel(\n\t\t\t\t\t\t\t\t\tcontainer,\n\t\t\t\t\t\t\t\t).activeViewDescriptors.length > 0,\n\t\t\t\t\t\t);\n\n\t\t\t\t\tif (activeContainers.length) {\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tthis.getActiveComposite()?.getId() ===\n\t\t\t\t\t\t\tviewletDescriptor.id\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tconst defaultViewletId =\n\t\t\t\t\t\t\t\tthis.viewDescriptorService.getDefaultViewContainer(\n\t\t\t\t\t\t\t\t\tthis.location,\n\t\t\t\t\t\t\t\t)?.id;\n\t\t\t\t\t\t\tconst containerToOpen =\n\t\t\t\t\t\t\t\tactiveContainers.filter(\n\t\t\t\t\t\t\t\t\t(c) => c.id === defaultViewletId,\n\t\t\t\t\t\t\t\t)[0] || activeContainers[0];\n\t\t\t\t\t\t\tthis.doOpenPaneComposite(containerToOpen.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.layoutService.setPartHidden(true, this.partId);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.removeComposite(viewletDescriptor.id);\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.extensionService.onDidRegisterExtensions(() => {\n\t\t\t\tthis.layoutCompositeBar();\n\t\t\t}),\n\t\t);\n\t}\n\n\tprivate onDidOpen(composite: IComposite): void {\n\t\tthis.activePaneContextKey.set(composite.getId());\n\t}\n\n\tprivate onDidClose(composite: IComposite): void {\n\t\tconst id = composite.getId();\n\t\tif (this.activePaneContextKey.get() === id) {\n\t\t\tthis.activePaneContextKey.reset();\n\t\t}\n\t}\n\n\tprotected override showComposite(composite: Composite): void {\n\t\tsuper.showComposite(composite);\n\t\tthis.layoutCompositeBar();\n\t\tthis.layoutEmptyMessage();\n\t}\n\n\tprotected override hideActiveComposite(): Composite | undefined {\n\t\tconst composite = super.hideActiveComposite();\n\t\tthis.layoutCompositeBar();\n\t\tthis.layoutEmptyMessage();\n\t\treturn composite;\n\t}\n\n\toverride create(parent: HTMLElement): void {\n\t\tthis.element = parent;\n\t\tthis.element.classList.add(\"pane-composite-part\");\n\n\t\tsuper.create(parent);\n\n\t\tconst contentArea = this.getContentArea();\n\t\tif (contentArea) {\n\t\t\tthis.createEmptyPaneMessage(contentArea);\n\t\t}\n\n\t\tthis.updateCompositeBar();\n\n\t\tconst focusTracker = this._register(trackFocus(parent));\n\t\tthis._register(\n\t\t\tfocusTracker.onDidFocus(() => this.paneFocusContextKey.set(true)),\n\t\t);\n\t\tthis._register(\n\t\t\tfocusTracker.onDidBlur(() => this.paneFocusContextKey.set(false)),\n\t\t);\n\t}\n\n\tprivate createEmptyPaneMessage(parent: HTMLElement): void {\n\t\tthis.emptyPaneMessageElement = document.createElement(\"div\");\n\t\tthis.emptyPaneMessageElement.classList.add(\"empty-pane-message-area\");\n\n\t\tconst messageElement = document.createElement(\"div\");\n\t\tmessageElement.classList.add(\"empty-pane-message\");\n\t\tmessageElement.innerText = localize(\n\t\t\t\"pane.emptyMessage\",\n\t\t\t\"Drag a view here to display.\",\n\t\t);\n\n\t\tthis.emptyPaneMessageElement.appendChild(messageElement);\n\t\tparent.appendChild(this.emptyPaneMessageElement);\n\n\t\tthis._register(\n\t\t\tCompositeDragAndDropObserver.INSTANCE.registerTarget(this.element, {\n\t\t\t\tonDragOver: (e) => {\n\t\t\t\t\tEventHelper.stop(e.eventData, true);\n\t\t\t\t\tif (this.paneCompositeBar.value) {\n\t\t\t\t\t\tconst validDropTarget =\n\t\t\t\t\t\t\tthis.paneCompositeBar.value.dndHandler.onDragEnter(\n\t\t\t\t\t\t\t\te.dragAndDropData,\n\t\t\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\t\te.eventData,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\ttoggleDropEffect(\n\t\t\t\t\t\t\te.eventData.dataTransfer,\n\t\t\t\t\t\t\t\"move\",\n\t\t\t\t\t\t\tvalidDropTarget,\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonDragEnter: (e) => {\n\t\t\t\t\tEventHelper.stop(e.eventData, true);\n\t\t\t\t\tif (this.paneCompositeBar.value) {\n\t\t\t\t\t\tconst validDropTarget =\n\t\t\t\t\t\t\tthis.paneCompositeBar.value.dndHandler.onDragEnter(\n\t\t\t\t\t\t\t\te.dragAndDropData,\n\t\t\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\t\te.eventData,\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\tthis.emptyPaneMessageElement!.style.backgroundColor =\n\t\t\t\t\t\t\tvalidDropTarget\n\t\t\t\t\t\t\t\t? this.theme\n\t\t\t\t\t\t\t\t\t\t.getColor(\n\t\t\t\t\t\t\t\t\t\t\tEDITOR_DRAG_AND_DROP_BACKGROUND,\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t?.toString() || \"\"\n\t\t\t\t\t\t\t\t: \"\";\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonDragLeave: (e) => {\n\t\t\t\t\tEventHelper.stop(e.eventData, true);\n\t\t\t\t\tthis.emptyPaneMessageElement!.style.backgroundColor = \"\";\n\t\t\t\t},\n\t\t\t\tonDragEnd: (e) => {\n\t\t\t\t\tEventHelper.stop(e.eventData, true);\n\t\t\t\t\tthis.emptyPaneMessageElement!.style.backgroundColor = \"\";\n\t\t\t\t},\n\t\t\t\tonDrop: (e) => {\n\t\t\t\t\tEventHelper.stop(e.eventData, true);\n\t\t\t\t\tthis.emptyPaneMessageElement!.style.backgroundColor = \"\";\n\t\t\t\t\tif (this.paneCompositeBar.value) {\n\t\t\t\t\t\tthis.paneCompositeBar.value.dndHandler.drop(\n\t\t\t\t\t\t\te.dragAndDropData,\n\t\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\te.eventData,\n\t\t\t\t\t\t);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Allow opening views/composites if the composite bar is hidden\n\t\t\t\t\t\tconst dragData = e.dragAndDropData.getData();\n\n\t\t\t\t\t\tif (dragData.type === \"composite\") {\n\t\t\t\t\t\t\tconst currentContainer =\n\t\t\t\t\t\t\t\tthis.viewDescriptorService.getViewContainerById(\n\t\t\t\t\t\t\t\t\tdragData.id,\n\t\t\t\t\t\t\t\t)!;\n\t\t\t\t\t\t\tthis.viewDescriptorService.moveViewContainerToLocation(\n\t\t\t\t\t\t\t\tcurrentContainer,\n\t\t\t\t\t\t\t\tthis.location,\n\t\t\t\t\t\t\t\tundefined,\n\t\t\t\t\t\t\t\t\"dnd\",\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tthis.openPaneComposite(currentContainer.id, true);\n\t\t\t\t\t\t} else if (dragData.type === \"view\") {\n\t\t\t\t\t\t\tconst viewToMove =\n\t\t\t\t\t\t\t\tthis.viewDescriptorService.getViewDescriptorById(\n\t\t\t\t\t\t\t\t\tdragData.id,\n\t\t\t\t\t\t\t\t)!;\n\t\t\t\t\t\t\tif (viewToMove && viewToMove.canMoveView) {\n\t\t\t\t\t\t\t\tthis.viewDescriptorService.moveViewToLocation(\n\t\t\t\t\t\t\t\t\tviewToMove,\n\t\t\t\t\t\t\t\t\tthis.location,\n\t\t\t\t\t\t\t\t\t\"dnd\",\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tconst newContainer =\n\t\t\t\t\t\t\t\t\tthis.viewDescriptorService.getViewContainerByViewId(\n\t\t\t\t\t\t\t\t\t\tviewToMove.id,\n\t\t\t\t\t\t\t\t\t)!;\n\n\t\t\t\t\t\t\t\tthis.openPaneComposite(\n\t\t\t\t\t\t\t\t\tnewContainer.id,\n\t\t\t\t\t\t\t\t\ttrue,\n\t\t\t\t\t\t\t\t).then((composite) => {\n\t\t\t\t\t\t\t\t\tcomposite?.openView(viewToMove.id, true);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t}),\n\t\t);\n\t}\n\n\tprotected override createTitleArea(parent: HTMLElement): HTMLElement {\n\t\tconst titleArea = super.createTitleArea(parent);\n\n\t\tthis._register(\n\t\t\taddDisposableListener(titleArea, EventType.CONTEXT_MENU, (e) => {\n\t\t\t\tthis.onTitleAreaContextMenu(\n\t\t\t\t\tnew StandardMouseEvent(getWindow(titleArea), e),\n\t\t\t\t);\n\t\t\t}),\n\t\t);\n\t\tthis._register(Gesture.addTarget(titleArea));\n\t\tthis._register(\n\t\t\taddDisposableListener(\n\t\t\t\ttitleArea,\n\t\t\t\tGestureEventType.Contextmenu,\n\t\t\t\t(e) => {\n\t\t\t\t\tthis.onTitleAreaContextMenu(\n\t\t\t\t\t\tnew StandardMouseEvent(getWindow(titleArea), e),\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\n\t\tconst globalTitleActionsContainer = titleArea.appendChild(\n\t\t\t$(\".global-actions\"),\n\t\t);\n\n\t\t// Global Actions Toolbar\n\t\tthis.globalToolBar = this._register(\n\t\t\tthis.instantiationService.createInstance(\n\t\t\t\tWorkbenchToolBar,\n\t\t\t\tglobalTitleActionsContainer,\n\t\t\t\t{\n\t\t\t\t\tactionViewItemProvider: (action, options) =>\n\t\t\t\t\t\tthis.actionViewItemProvider(action, options),\n\t\t\t\t\torientation: ActionsOrientation.HORIZONTAL,\n\t\t\t\t\tgetKeyBinding: (action) =>\n\t\t\t\t\t\tthis.keybindingService.lookupKeybinding(action.id),\n\t\t\t\t\tanchorAlignmentProvider: () =>\n\t\t\t\t\t\tthis.getTitleAreaDropDownAnchorAlignment(),\n\t\t\t\t\ttoggleMenuTitle: localize(\"moreActions\", \"More Actions...\"),\n\t\t\t\t\thoverDelegate: this.toolbarHoverDelegate,\n\t\t\t\t\thiddenItemStrategy: HiddenItemStrategy.NoHide,\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\n\t\tthis.updateGlobalToolbarActions();\n\n\t\treturn titleArea;\n\t}\n\n\tprotected override createTitleLabel(\n\t\tparent: HTMLElement,\n\t): ICompositeTitleLabel {\n\t\tthis.titleContainer = parent;\n\n\t\tconst titleLabel = super.createTitleLabel(parent);\n\t\tthis.titleLabelElement!.draggable = true;\n\t\tconst draggedItemProvider = (): {\n\t\t\ttype: \"view\" | \"composite\";\n\t\t\tid: string;\n\t\t} => {\n\t\t\tconst activeViewlet = this.getActivePaneComposite()!;\n\t\t\treturn { type: \"composite\", id: activeViewlet.getId() };\n\t\t};\n\t\tthis._register(\n\t\t\tCompositeDragAndDropObserver.INSTANCE.registerDraggable(\n\t\t\t\tthis.titleLabelElement!,\n\t\t\t\tdraggedItemProvider,\n\t\t\t\t{},\n\t\t\t),\n\t\t);\n\n\t\treturn titleLabel;\n\t}\n\n\tprotected updateCompositeBar(updateCompositeBarOption = false): void {\n\t\tconst wasCompositeBarVisible = this.compositeBarPosition !== undefined;\n\t\tconst isCompositeBarVisible = this.shouldShowCompositeBar();\n\t\tconst previousPosition = this.compositeBarPosition;\n\t\tconst newPosition = isCompositeBarVisible\n\t\t\t? this.getCompositeBarPosition()\n\t\t\t: undefined;\n\n\t\t// Only update if the visibility or position has changed or if the composite bar options should be updated\n\t\tif (!updateCompositeBarOption && previousPosition === newPosition) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Remove old composite bar\n\t\tif (wasCompositeBarVisible) {\n\t\t\tconst previousCompositeBarContainer =\n\t\t\t\tpreviousPosition === CompositeBarPosition.TITLE\n\t\t\t\t\t? this.titleContainer\n\t\t\t\t\t: this.headerFooterCompositeBarContainer;\n\t\t\tif (\n\t\t\t\t!this.paneCompositeBarContainer ||\n\t\t\t\t!this.paneCompositeBar.value ||\n\t\t\t\t!previousCompositeBarContainer\n\t\t\t) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t\"Composite bar containers should exist when removing the previous composite bar\",\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis.paneCompositeBarContainer.remove();\n\t\t\tthis.paneCompositeBarContainer = undefined;\n\t\t\tthis.paneCompositeBar.value = undefined;\n\n\t\t\tpreviousCompositeBarContainer.classList.remove(\"has-composite-bar\");\n\n\t\t\tif (previousPosition === CompositeBarPosition.TOP) {\n\t\t\t\tthis.removeFooterHeaderArea(true);\n\t\t\t} else if (previousPosition === CompositeBarPosition.BOTTOM) {\n\t\t\t\tthis.removeFooterHeaderArea(false);\n\t\t\t}\n\t\t}\n\n\t\t// Create new composite bar\n\t\tlet newCompositeBarContainer;\n\t\tswitch (newPosition) {\n\t\t\tcase CompositeBarPosition.TOP:\n\t\t\t\tnewCompositeBarContainer = this.createHeaderArea();\n\t\t\t\tbreak;\n\t\t\tcase CompositeBarPosition.TITLE:\n\t\t\t\tnewCompositeBarContainer = this.titleContainer;\n\t\t\t\tbreak;\n\t\t\tcase CompositeBarPosition.BOTTOM:\n\t\t\t\tnewCompositeBarContainer = this.createFooterArea();\n\t\t\t\tbreak;\n\t\t}\n\t\tif (isCompositeBarVisible) {\n\t\t\tif (\n\t\t\t\tthis.paneCompositeBarContainer ||\n\t\t\t\tthis.paneCompositeBar.value ||\n\t\t\t\t!newCompositeBarContainer\n\t\t\t) {\n\t\t\t\tthrow new Error(\n\t\t\t\t\t\"Invalid composite bar state when creating the new composite bar\",\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tnewCompositeBarContainer.classList.add(\"has-composite-bar\");\n\t\t\tthis.paneCompositeBarContainer = prepend(\n\t\t\t\tnewCompositeBarContainer,\n\t\t\t\t$(\".composite-bar-container\"),\n\t\t\t);\n\t\t\tthis.paneCompositeBar.value = this.createCompositeBar();\n\t\t\tthis.paneCompositeBar.value.create(this.paneCompositeBarContainer);\n\n\t\t\tif (newPosition === CompositeBarPosition.TOP) {\n\t\t\t\tthis.setHeaderArea(newCompositeBarContainer);\n\t\t\t} else if (newPosition === CompositeBarPosition.BOTTOM) {\n\t\t\t\tthis.setFooterArea(newCompositeBarContainer);\n\t\t\t}\n\t\t}\n\n\t\tthis.compositeBarPosition = newPosition;\n\n\t\tif (updateCompositeBarOption) {\n\t\t\tthis.layoutCompositeBar();\n\t\t}\n\t}\n\n\tprotected override createHeaderArea(): HTMLElement {\n\t\tconst headerArea = super.createHeaderArea();\n\t\treturn this.createHeaderFooterCompositeBarArea(headerArea);\n\t}\n\n\tprotected override createFooterArea(): HTMLElement {\n\t\tconst footerArea = super.createFooterArea();\n\t\treturn this.createHeaderFooterCompositeBarArea(footerArea);\n\t}\n\n\tprotected createHeaderFooterCompositeBarArea(\n\t\tarea: HTMLElement,\n\t): HTMLElement {\n\t\tif (this.headerFooterCompositeBarContainer) {\n\t\t\t// A pane composite part has either a header or a footer, but not both\n\t\t\tthrow new Error(\"Header or Footer composite bar already exists\");\n\t\t}\n\t\tthis.headerFooterCompositeBarContainer = area;\n\n\t\tthis.headerFooterCompositeBarDispoables.add(\n\t\t\taddDisposableListener(area, EventType.CONTEXT_MENU, (e) => {\n\t\t\t\tthis.onCompositeBarAreaContextMenu(\n\t\t\t\t\tnew StandardMouseEvent(getWindow(area), e),\n\t\t\t\t);\n\t\t\t}),\n\t\t);\n\t\tthis.headerFooterCompositeBarDispoables.add(Gesture.addTarget(area));\n\t\tthis.headerFooterCompositeBarDispoables.add(\n\t\t\taddDisposableListener(area, GestureEventType.Contextmenu, (e) => {\n\t\t\t\tthis.onCompositeBarAreaContextMenu(\n\t\t\t\t\tnew StandardMouseEvent(getWindow(area), e),\n\t\t\t\t);\n\t\t\t}),\n\t\t);\n\n\t\treturn area;\n\t}\n\n\tprivate removeFooterHeaderArea(header: boolean): void {\n\t\tthis.headerFooterCompositeBarContainer = undefined;\n\t\tthis.headerFooterCompositeBarDispoables.clear();\n\t\tif (header) {\n\t\t\tthis.removeHeaderArea();\n\t\t} else {\n\t\t\tthis.removeFooterArea();\n\t\t}\n\t}\n\n\tprotected createCompositeBar(): PaneCompositeBar {\n\t\treturn this.instantiationService.createInstance(\n\t\t\tPaneCompositeBar,\n\t\t\tthis.getCompositeBarOptions(),\n\t\t\tthis.partId,\n\t\t\tthis,\n\t\t);\n\t}\n\n\tprotected override onTitleAreaUpdate(compositeId: string): void {\n\t\tsuper.onTitleAreaUpdate(compositeId);\n\n\t\t// If title actions change, relayout the composite bar\n\t\tthis.layoutCompositeBar();\n\t}\n\n\tasync openPaneComposite(\n\t\tid?: string,\n\t\tfocus?: boolean,\n\t): Promise<PaneComposite | undefined> {\n\t\tif (typeof id === \"string\" && this.getPaneComposite(id)) {\n\t\t\treturn this.doOpenPaneComposite(id, focus);\n\t\t}\n\n\t\tawait this.extensionService.whenInstalledExtensionsRegistered();\n\n\t\tif (typeof id === \"string\" && this.getPaneComposite(id)) {\n\t\t\treturn this.doOpenPaneComposite(id, focus);\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate doOpenPaneComposite(\n\t\tid: string,\n\t\tfocus?: boolean,\n\t): PaneComposite | undefined {\n\t\tif (this.blockOpening) {\n\t\t\treturn undefined; // Workaround against a potential race condition\n\t\t}\n\n\t\tif (!this.layoutService.isVisible(this.partId)) {\n\t\t\ttry {\n\t\t\t\tthis.blockOpening = true;\n\t\t\t\tthis.layoutService.setPartHidden(false, this.partId);\n\t\t\t} finally {\n\t\t\t\tthis.blockOpening = false;\n\t\t\t}\n\t\t}\n\n\t\treturn this.openComposite(id, focus) as PaneComposite;\n\t}\n\n\tgetPaneComposite(id: string): PaneCompositeDescriptor | undefined {\n\t\treturn (this.registry as PaneCompositeRegistry).getPaneComposite(id);\n\t}\n\n\tgetPaneComposites(): PaneCompositeDescriptor[] {\n\t\treturn (this.registry as PaneCompositeRegistry)\n\t\t\t.getPaneComposites()\n\t\t\t.sort((v1, v2) => {\n\t\t\t\tif (typeof v1.order !== \"number\") {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\n\t\t\t\tif (typeof v2.order !== \"number\") {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\n\t\t\t\treturn v1.order - v2.order;\n\t\t\t});\n\t}\n\n\tgetPinnedPaneCompositeIds(): string[] {\n\t\treturn this.paneCompositeBar.value?.getPinnedPaneCompositeIds() ?? [];\n\t}\n\n\tgetVisiblePaneCompositeIds(): string[] {\n\t\treturn this.paneCompositeBar.value?.getVisiblePaneCompositeIds() ?? [];\n\t}\n\n\tgetActivePaneComposite(): IPaneComposite | undefined {\n\t\treturn <IPaneComposite>this.getActiveComposite();\n\t}\n\n\tgetLastActivePaneCompositeId(): string {\n\t\treturn this.getLastActiveCompositeId();\n\t}\n\n\thideActivePaneComposite(): void {\n\t\tif (this.layoutService.isVisible(this.partId)) {\n\t\t\tthis.layoutService.setPartHidden(true, this.partId);\n\t\t}\n\n\t\tthis.hideActiveComposite();\n\t}\n\n\tprotected focusCompositeBar(): void {\n\t\tthis.paneCompositeBar.value?.focus();\n\t}\n\n\toverride layout(\n\t\twidth: number,\n\t\theight: number,\n\t\ttop: number,\n\t\tleft: number,\n\t): void {\n\t\tif (!this.layoutService.isVisible(this.partId)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.contentDimension = new Dimension(width, height);\n\n\t\t// Layout contents\n\t\tsuper.layout(\n\t\t\tthis.contentDimension.width,\n\t\t\tthis.contentDimension.height,\n\t\t\ttop,\n\t\t\tleft,\n\t\t);\n\n\t\t// Layout composite bar\n\t\tthis.layoutCompositeBar();\n\n\t\t// Add empty pane message\n\t\tthis.layoutEmptyMessage();\n\t}\n\n\tprivate layoutCompositeBar(): void {\n\t\tif (\n\t\t\tthis.contentDimension &&\n\t\t\tthis.dimension &&\n\t\t\tthis.paneCompositeBar.value\n\t\t) {\n\t\t\tconst padding =\n\t\t\t\tthis.compositeBarPosition === CompositeBarPosition.TITLE\n\t\t\t\t\t? 16\n\t\t\t\t\t: 8;\n\t\t\tconst borderWidth = this.partId === Parts.PANEL_PART ? 0 : 1;\n\t\t\tlet availableWidth =\n\t\t\t\tthis.contentDimension.width - padding - borderWidth;\n\t\t\tavailableWidth = Math.max(\n\t\t\t\tAbstractPaneCompositePart.MIN_COMPOSITE_BAR_WIDTH,\n\t\t\t\tavailableWidth - this.getToolbarWidth(),\n\t\t\t);\n\t\t\tthis.paneCompositeBar.value.layout(\n\t\t\t\tavailableWidth,\n\t\t\t\tthis.dimension.height,\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate layoutEmptyMessage(): void {\n\t\tconst visible = !this.getActiveComposite();\n\t\tthis.emptyPaneMessageElement?.classList.toggle(\"visible\", visible);\n\t\tif (visible) {\n\t\t\tthis.titleLabel?.updateTitle(\"\", \"\");\n\t\t}\n\t}\n\n\tprivate updateGlobalToolbarActions(): void {\n\t\tconst primaryActions = this.globalActions.getPrimaryActions();\n\t\tconst secondaryActions = this.globalActions.getSecondaryActions();\n\t\tthis.globalToolBar?.setActions(\n\t\t\tprepareActions(primaryActions),\n\t\t\tprepareActions(secondaryActions),\n\t\t);\n\t}\n\n\tprotected getToolbarWidth(): number {\n\t\tif (\n\t\t\t!this.toolBar ||\n\t\t\tthis.compositeBarPosition !== CompositeBarPosition.TITLE\n\t\t) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tconst activePane = this.getActivePaneComposite();\n\t\tif (!activePane) {\n\t\t\treturn 0;\n\t\t}\n\n\t\t// Each toolbar item has 4px margin\n\t\tconst toolBarWidth =\n\t\t\tthis.toolBar.getItemsWidth() + this.toolBar.getItemsLength() * 4;\n\t\tconst globalToolBarWidth = this.globalToolBar\n\t\t\t? this.globalToolBar.getItemsWidth() +\n\t\t\t\tthis.globalToolBar.getItemsLength() * 4\n\t\t\t: 0;\n\t\treturn toolBarWidth + globalToolBarWidth + 5; // 5px padding left\n\t}\n\n\tprivate onTitleAreaContextMenu(event: StandardMouseEvent): void {\n\t\tif (\n\t\t\tthis.shouldShowCompositeBar() &&\n\t\t\tthis.getCompositeBarPosition() === CompositeBarPosition.TITLE\n\t\t) {\n\t\t\treturn this.onCompositeBarContextMenu(event);\n\t\t} else {\n\t\t\tconst activePaneComposite =\n\t\t\t\tthis.getActivePaneComposite() as PaneComposite;\n\t\t\tconst activePaneCompositeActions = activePaneComposite\n\t\t\t\t? activePaneComposite.getContextMenuActions()\n\t\t\t\t: [];\n\t\t\tif (activePaneCompositeActions.length) {\n\t\t\t\tthis.contextMenuService.showContextMenu({\n\t\t\t\t\tgetAnchor: () => event,\n\t\t\t\t\tgetActions: () => activePaneCompositeActions,\n\t\t\t\t\tgetActionViewItem: (action, options) =>\n\t\t\t\t\t\tthis.actionViewItemProvider(action, options),\n\t\t\t\t\tactionRunner: activePaneComposite.getActionRunner(),\n\t\t\t\t\tskipTelemetry: true,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onCompositeBarAreaContextMenu(event: StandardMouseEvent): void {\n\t\treturn this.onCompositeBarContextMenu(event);\n\t}\n\n\tprivate onCompositeBarContextMenu(event: StandardMouseEvent): void {\n\t\tif (this.paneCompositeBar.value) {\n\t\t\tconst actions: IAction[] = [\n\t\t\t\t...this.paneCompositeBar.value.getContextMenuActions(),\n\t\t\t];\n\t\t\tif (actions.length) {\n\t\t\t\tthis.contextMenuService.showContextMenu({\n\t\t\t\t\tgetAnchor: () => event,\n\t\t\t\t\tgetActions: () => actions,\n\t\t\t\t\tskipTelemetry: true,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected getViewsSubmenuAction(): SubmenuAction | undefined {\n\t\tconst viewPaneContainer = (\n\t\t\tthis.getActivePaneComposite() as PaneComposite\n\t\t)?.getViewPaneContainer();\n\t\tif (viewPaneContainer) {\n\t\t\tconst disposables = new DisposableStore();\n\t\t\tconst viewsActions: IAction[] = [];\n\t\t\tconst scopedContextKeyService = disposables.add(\n\t\t\t\tthis.contextKeyService.createScoped(this.element),\n\t\t\t);\n\t\t\tscopedContextKeyService.createKey(\n\t\t\t\t\"viewContainer\",\n\t\t\t\tviewPaneContainer.viewContainer.id,\n\t\t\t);\n\t\t\tconst menu = this.menuService.getMenuActions(\n\t\t\t\tViewsSubMenu,\n\t\t\t\tscopedContextKeyService,\n\t\t\t\t{ shouldForwardArgs: true, renderShortTitle: true },\n\t\t\t);\n\t\t\tcreateAndFillInActionBarActions(\n\t\t\t\tmenu,\n\t\t\t\t{ primary: viewsActions, secondary: [] },\n\t\t\t\t() => true,\n\t\t\t);\n\t\t\tdisposables.dispose();\n\t\t\treturn viewsActions.length > 1 &&\n\t\t\t\tviewsActions.some((a) => a.enabled)\n\t\t\t\t? new SubmenuAction(\n\t\t\t\t\t\t\"views\",\n\t\t\t\t\t\tlocalize(\"views\", \"Views\"),\n\t\t\t\t\t\tviewsActions,\n\t\t\t\t\t)\n\t\t\t\t: undefined;\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tprotected abstract shouldShowCompositeBar(): boolean;\n\tprotected abstract getCompositeBarOptions(): IPaneCompositeBarOptions;\n\tprotected abstract getCompositeBarPosition(): CompositeBarPosition;\n}\n"],
  "mappings": "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",
  "names": ["CompositeBarPosition"]
}
