{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/browser/parts/titlebar/titlebarPart.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport \"./media/titlebarpart.css\";\nimport {\n\tgetWCOTitlebarAreaRect,\n\tgetZoomFactor,\n\tisWCOEnabled,\n} from \"../../../../base/browser/browser.js\";\nimport {\n\t$,\n\tDimension,\n\tEventHelper,\n\tEventType,\n\taddDisposableListener,\n\tappend,\n\tgetActiveDocument,\n\tgetWindow,\n\tgetWindowId,\n\tisAncestor,\n\tisHTMLElement,\n\tprepend,\n\treset,\n} from \"../../../../base/browser/dom.js\";\nimport { StandardMouseEvent } from \"../../../../base/browser/mouseEvent.js\";\nimport type { IBaseActionViewItemOptions } from \"../../../../base/browser/ui/actionbar/actionViewItems.js\";\nimport {\n\tActionsOrientation,\n\ttype IActionViewItem,\n\tprepareActions,\n} from \"../../../../base/browser/ui/actionbar/actionbar.js\";\nimport { AnchorAlignment } from \"../../../../base/browser/ui/contextview/contextview.js\";\nimport type { IView } from \"../../../../base/browser/ui/grid/grid.js\";\nimport type { IHoverDelegate } from \"../../../../base/browser/ui/hover/hoverDelegate.js\";\nimport { createInstantHoverDelegate } from \"../../../../base/browser/ui/hover/hoverDelegateFactory.js\";\nimport { HoverPosition } from \"../../../../base/browser/ui/hover/hoverWidget.js\";\nimport {\n\ttype CodeWindow,\n\tmainWindow,\n} from \"../../../../base/browser/window.js\";\nimport { ActionRunner, type IAction } from \"../../../../base/common/actions.js\";\nimport { Codicon } from \"../../../../base/common/codicons.js\";\nimport { Color } from \"../../../../base/common/color.js\";\nimport { Emitter, Event } from \"../../../../base/common/event.js\";\nimport type { ResolvedKeybinding } from \"../../../../base/common/keybindings.js\";\nimport {\n\tDisposableStore,\n\ttype IDisposable,\n} from \"../../../../base/common/lifecycle.js\";\nimport {\n\tisLinux,\n\tisMacintosh,\n\tisNative,\n\tisWeb,\n\tisWindows,\n\tplatformLocale,\n} from \"../../../../base/common/platform.js\";\nimport { ThemeIcon } from \"../../../../base/common/themables.js\";\nimport { localize, localize2 } from \"../../../../nls.js\";\nimport { Categories } from \"../../../../platform/action/common/actionCommonCategories.js\";\nimport {\n\tcreateActionViewItem,\n\tcreateAndFillInActionBarActions,\n} from \"../../../../platform/actions/browser/menuEntryActionViewItem.js\";\nimport { WorkbenchToolBar } from \"../../../../platform/actions/browser/toolbar.js\";\nimport {\n\tAction2,\n\ttype IMenu,\n\tIMenuService,\n\tMenuId,\n\tregisterAction2,\n} from \"../../../../platform/actions/common/actions.js\";\nimport { CommandsRegistry } from \"../../../../platform/commands/common/commands.js\";\nimport {\n\ttype IConfigurationChangeEvent,\n\tIConfigurationService,\n} from \"../../../../platform/configuration/common/configuration.js\";\nimport { IContextKeyService } from \"../../../../platform/contextkey/common/contextkey.js\";\nimport { IContextMenuService } from \"../../../../platform/contextview/browser/contextView.js\";\nimport {\n\tIInstantiationService,\n\ttype ServicesAccessor,\n} from \"../../../../platform/instantiation/common/instantiation.js\";\nimport { IKeybindingService } from \"../../../../platform/keybinding/common/keybinding.js\";\nimport {\n\tIStorageService,\n\tStorageScope,\n} from \"../../../../platform/storage/common/storage.js\";\nimport { getIconRegistry } from \"../../../../platform/theme/common/iconRegistry.js\";\nimport { IThemeService } from \"../../../../platform/theme/common/themeService.js\";\nimport {\n\tDEFAULT_CUSTOM_TITLEBAR_HEIGHT,\n\ttype MenuBarVisibility,\n\ttype TitlebarStyle,\n\tgetMenuBarVisibility,\n\tgetTitleBarStyle,\n\thasCustomTitlebar,\n\thasNativeTitlebar,\n} from \"../../../../platform/window/common/window.js\";\nimport {\n\tACCOUNTS_ACTIVITY_ID,\n\tGLOBAL_ACTIVITY_ID,\n} from \"../../../common/activity.js\";\nimport type {\n\tIEditorCommandsContext,\n\tIEditorPartOptionsChangeEvent,\n\tIToolbarActions,\n} from \"../../../common/editor.js\";\nimport {\n\tTITLE_BAR_ACTIVE_BACKGROUND,\n\tTITLE_BAR_ACTIVE_FOREGROUND,\n\tTITLE_BAR_BORDER,\n\tTITLE_BAR_INACTIVE_BACKGROUND,\n\tTITLE_BAR_INACTIVE_FOREGROUND,\n\tWORKBENCH_BACKGROUND,\n} from \"../../../common/theme.js\";\nimport {\n\ttype IEditorGroupsContainer,\n\tIEditorGroupsService,\n} from \"../../../services/editor/common/editorGroupsService.js\";\nimport { IEditorService } from \"../../../services/editor/common/editorService.js\";\nimport { IBrowserWorkbenchEnvironmentService } from \"../../../services/environment/browser/environmentService.js\";\nimport { IHostService } from \"../../../services/host/browser/host.js\";\nimport {\n\tActivityBarPosition,\n\tEditorActionsLocation,\n\tEditorTabsMode,\n\tIWorkbenchLayoutService,\n\tLayoutSettings,\n\tParts,\n} from \"../../../services/layout/browser/layoutService.js\";\nimport type { ITitleService } from \"../../../services/title/browser/titleService.js\";\nimport { MultiWindowParts, Part } from \"../../part.js\";\nimport { EDITOR_CORE_NAVIGATION_COMMANDS } from \"../editor/editorCommands.js\";\nimport { EditorPane } from \"../editor/editorPane.js\";\nimport { EditorCommandsContextActionRunner } from \"../editor/editorTabsControl.js\";\nimport {\n\tAccountsActivityActionViewItem,\n\tSimpleAccountActivityActionViewItem,\n\tSimpleGlobalActivityActionViewItem,\n\tisAccountsActionVisible,\n} from \"../globalCompositeBar.js\";\nimport { CommandCenterControl } from \"./commandCenterControl.js\";\nimport { CustomMenubarControl } from \"./menubarControl.js\";\nimport {\n\tACCOUNTS_ACTIVITY_TILE_ACTION,\n\tGLOBAL_ACTIVITY_TITLE_ACTION,\n} from \"./titlebarActions.js\";\nimport { WindowTitle } from \"./windowTitle.js\";\n\nexport interface ITitleVariable {\n\treadonly name: string;\n\treadonly contextKey: string;\n}\n\nexport interface ITitleProperties {\n\tisPure?: boolean;\n\tisAdmin?: boolean;\n\tprefix?: string;\n}\n\nexport interface ITitlebarPart extends IDisposable {\n\t/**\n\t * An event when the menubar visibility changes.\n\t */\n\treadonly onMenubarVisibilityChange: Event<boolean>;\n\n\t/**\n\t * Update some environmental title properties.\n\t */\n\tupdateProperties(properties: ITitleProperties): void;\n\n\t/**\n\t * Adds variables to be supported in the window title.\n\t */\n\tregisterVariables(variables: ITitleVariable[]): void;\n}\n\nexport class BrowserTitleService\n\textends MultiWindowParts<BrowserTitlebarPart>\n\timplements ITitleService\n{\n\tdeclare _serviceBrand: undefined;\n\n\treadonly mainPart = this._register(this.createMainTitlebarPart());\n\n\tconstructor(\n\t\t@IInstantiationService protected readonly instantiationService: IInstantiationService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IThemeService themeService: IThemeService\n\t) {\n\t\tsuper('workbench.titleService', themeService, storageService);\n\n\t\tthis._register(this.registerPart(this.mainPart));\n\n\t\tthis.registerActions();\n\t\tthis.registerAPICommands();\n\t}\n\n\tprotected createMainTitlebarPart(): BrowserTitlebarPart {\n\t\treturn this.instantiationService.createInstance(\n\t\t\tMainBrowserTitlebarPart,\n\t\t);\n\t}\n\n\tprivate registerActions(): void {\n\t\t// Focus action\n\t\tconst that = this;\n\t\tthis._register(\n\t\t\tregisterAction2(\n\t\t\t\tclass FocusTitleBar extends Action2 {\n\t\t\t\t\tconstructor() {\n\t\t\t\t\t\tsuper({\n\t\t\t\t\t\t\tid: `workbench.action.focusTitleBar`,\n\t\t\t\t\t\t\ttitle: localize2(\n\t\t\t\t\t\t\t\t\"focusTitleBar\",\n\t\t\t\t\t\t\t\t\"Focus Title Bar\",\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\tcategory: Categories.View,\n\t\t\t\t\t\t\tf1: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\trun(): void {\n\t\t\t\t\t\tthat.getPartByDocument(getActiveDocument()).focus();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\t}\n\n\tprivate registerAPICommands(): void {\n\t\tthis._register(\n\t\t\tCommandsRegistry.registerCommand({\n\t\t\t\tid: \"registerWindowTitleVariable\",\n\t\t\t\thandler: (\n\t\t\t\t\taccessor: ServicesAccessor,\n\t\t\t\t\tname: string,\n\t\t\t\t\tcontextKey: string,\n\t\t\t\t) => {\n\t\t\t\t\tthis.registerVariables([{ name, contextKey }]);\n\t\t\t\t},\n\t\t\t\tmetadata: {\n\t\t\t\t\tdescription: \"Registers a new title variable\",\n\t\t\t\t\targs: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"name\",\n\t\t\t\t\t\t\tschema: { type: \"string\" },\n\t\t\t\t\t\t\tdescription: \"The name of the variable to register\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: \"contextKey\",\n\t\t\t\t\t\t\tschema: { type: \"string\" },\n\t\t\t\t\t\t\tdescription:\n\t\t\t\t\t\t\t\t\"The context key to use for the value of the variable\",\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t}),\n\t\t);\n\t}\n\n\t//#region Auxiliary Titlebar Parts\n\n\tcreateAuxiliaryTitlebarPart(\n\t\tcontainer: HTMLElement,\n\t\teditorGroupsContainer: IEditorGroupsContainer,\n\t): IAuxiliaryTitlebarPart {\n\t\tconst titlebarPartContainer = document.createElement(\"div\");\n\t\ttitlebarPartContainer.classList.add(\"part\", \"titlebar\");\n\t\ttitlebarPartContainer.setAttribute(\"role\", \"none\");\n\t\ttitlebarPartContainer.style.position = \"relative\";\n\t\tcontainer.insertBefore(titlebarPartContainer, container.firstChild); // ensure we are first element\n\n\t\tconst disposables = new DisposableStore();\n\n\t\tconst titlebarPart = this.doCreateAuxiliaryTitlebarPart(\n\t\t\ttitlebarPartContainer,\n\t\t\teditorGroupsContainer,\n\t\t);\n\t\tdisposables.add(this.registerPart(titlebarPart));\n\n\t\tdisposables.add(\n\t\t\tEvent.runAndSubscribe(\n\t\t\t\ttitlebarPart.onDidChange,\n\t\t\t\t() =>\n\t\t\t\t\t(titlebarPartContainer.style.height = `${titlebarPart.height}px`),\n\t\t\t),\n\t\t);\n\t\ttitlebarPart.create(titlebarPartContainer);\n\n\t\tif (this.properties) {\n\t\t\ttitlebarPart.updateProperties(this.properties);\n\t\t}\n\n\t\tif (this.variables.size) {\n\t\t\ttitlebarPart.registerVariables(Array.from(this.variables.values()));\n\t\t}\n\n\t\tEvent.once(titlebarPart.onWillDispose)(() => disposables.dispose());\n\n\t\treturn titlebarPart;\n\t}\n\n\tprotected doCreateAuxiliaryTitlebarPart(\n\t\tcontainer: HTMLElement,\n\t\teditorGroupsContainer: IEditorGroupsContainer,\n\t): BrowserTitlebarPart & IAuxiliaryTitlebarPart {\n\t\treturn this.instantiationService.createInstance(\n\t\t\tAuxiliaryBrowserTitlebarPart,\n\t\t\tcontainer,\n\t\t\teditorGroupsContainer,\n\t\t\tthis.mainPart,\n\t\t);\n\t}\n\n\t//#endregion\n\n\t//#region Service Implementation\n\n\treadonly onMenubarVisibilityChange =\n\t\tthis.mainPart.onMenubarVisibilityChange;\n\n\tprivate properties: ITitleProperties | undefined = undefined;\n\n\tupdateProperties(properties: ITitleProperties): void {\n\t\tthis.properties = properties;\n\n\t\tfor (const part of this.parts) {\n\t\t\tpart.updateProperties(properties);\n\t\t}\n\t}\n\n\tprivate readonly variables = new Map<string, ITitleVariable>();\n\n\tregisterVariables(variables: ITitleVariable[]): void {\n\t\tconst newVariables: ITitleVariable[] = [];\n\n\t\tfor (const variable of variables) {\n\t\t\tif (!this.variables.has(variable.name)) {\n\t\t\t\tthis.variables.set(variable.name, variable);\n\t\t\t\tnewVariables.push(variable);\n\t\t\t}\n\t\t}\n\n\t\tfor (const part of this.parts) {\n\t\t\tpart.registerVariables(newVariables);\n\t\t}\n\t}\n\n\t//#endregion\n}\n\nexport class BrowserTitlebarPart extends Part implements ITitlebarPart {\n\t//#region IView\n\n\treadonly minimumWidth: number = 0;\n\treadonly maximumWidth: number = Number.POSITIVE_INFINITY;\n\n\tget minimumHeight(): number {\n\t\tconst wcoEnabled = isWeb && isWCOEnabled();\n\t\tlet value =\n\t\t\tthis.isCommandCenterVisible || wcoEnabled\n\t\t\t\t? DEFAULT_CUSTOM_TITLEBAR_HEIGHT\n\t\t\t\t: 30;\n\t\tif (wcoEnabled) {\n\t\t\tvalue = Math.max(\n\t\t\t\tvalue,\n\t\t\t\tgetWCOTitlebarAreaRect(getWindow(this.element))?.height ?? 0,\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\tvalue /\n\t\t\t(this.preventZoom ? getZoomFactor(getWindow(this.element)) : 1)\n\t\t);\n\t}\n\n\tget maximumHeight(): number {\n\t\treturn this.minimumHeight;\n\t}\n\n\t//#endregion\n\n\t//#region Events\n\n\tprivate _onMenubarVisibilityChange = this._register(new Emitter<boolean>());\n\treadonly onMenubarVisibilityChange = this._onMenubarVisibilityChange.event;\n\n\tprivate readonly _onWillDispose = this._register(new Emitter<void>());\n\treadonly onWillDispose = this._onWillDispose.event;\n\n\t//#endregion\n\n\tprotected rootContainer!: HTMLElement;\n\tprotected windowControlsContainer: HTMLElement | undefined;\n\tprotected dragRegion: HTMLElement | undefined;\n\tprivate title!: HTMLElement;\n\n\tprivate leftContent!: HTMLElement;\n\tprivate centerContent!: HTMLElement;\n\tprivate rightContent!: HTMLElement;\n\n\tprotected customMenubar: CustomMenubarControl | undefined;\n\tprotected appIcon: HTMLElement | undefined;\n\tprivate appIconBadge: HTMLElement | undefined;\n\tprotected menubar?: HTMLElement;\n\tprivate lastLayoutDimensions: Dimension | undefined;\n\n\tprivate actionToolBar!: WorkbenchToolBar;\n\tprivate readonly actionToolBarDisposable = this._register(\n\t\tnew DisposableStore(),\n\t);\n\tprivate readonly editorActionsChangeDisposable = this._register(\n\t\tnew DisposableStore(),\n\t);\n\tprivate actionToolBarElement!: HTMLElement;\n\n\tprivate layoutToolbarMenu: IMenu | undefined;\n\tprivate readonly editorToolbarMenuDisposables = this._register(\n\t\tnew DisposableStore(),\n\t);\n\tprivate readonly layoutToolbarMenuDisposables = this._register(\n\t\tnew DisposableStore(),\n\t);\n\tprivate readonly activityToolbarDisposables = this._register(\n\t\tnew DisposableStore(),\n\t);\n\n\tprivate readonly hoverDelegate: IHoverDelegate;\n\n\tprivate readonly titleDisposables = this._register(new DisposableStore());\n\tprivate titleBarStyle: TitlebarStyle = getTitleBarStyle(\n\t\tthis.configurationService,\n\t);\n\n\tprivate isInactive = false;\n\tprivate readonly isAuxiliary: boolean;\n\n\tprivate readonly windowTitle: WindowTitle;\n\n\tprivate readonly editorService: IEditorService;\n\tprivate readonly editorGroupsContainer: IEditorGroupsContainer;\n\n\tconstructor(\n\t\tid: string,\n\t\ttargetWindow: CodeWindow,\n\t\teditorGroupsContainer: IEditorGroupsContainer | 'main',\n\t\t@IContextMenuService private readonly contextMenuService: IContextMenuService,\n\t\t@IConfigurationService protected readonly configurationService: IConfigurationService,\n\t\t@IBrowserWorkbenchEnvironmentService protected readonly environmentService: IBrowserWorkbenchEnvironmentService,\n\t\t@IInstantiationService protected readonly instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IHostService private readonly hostService: IHostService,\n\t\t@IEditorGroupsService private readonly editorGroupService: IEditorGroupsService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IMenuService private readonly menuService: IMenuService,\n\t\t@IKeybindingService private readonly keybindingService: IKeybindingService\n\t) {\n\t\tsuper(id, { hasTitle: false }, themeService, storageService, layoutService);\n\n\t\tthis.isAuxiliary = editorGroupsContainer !== 'main';\n\t\tthis.editorService = editorService.createScoped(editorGroupsContainer, this._store);\n\t\tthis.editorGroupsContainer = editorGroupsContainer === 'main' ? editorGroupService.mainPart : editorGroupsContainer;\n\n\t\tthis.windowTitle = this._register(instantiationService.createInstance(WindowTitle, targetWindow, editorGroupsContainer));\n\n\t\tthis.hoverDelegate = this._register(createInstantHoverDelegate());\n\n\t\tthis.registerListeners(getWindowId(targetWindow));\n\t}\n\n\tprivate registerListeners(targetWindowId: number): void {\n\t\tthis._register(\n\t\t\tthis.hostService.onDidChangeFocus((focused) =>\n\t\t\t\tfocused ? this.onFocus() : this.onBlur(),\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.hostService.onDidChangeActiveWindow((windowId) =>\n\t\t\t\twindowId === targetWindowId ? this.onFocus() : this.onBlur(),\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.configurationService.onDidChangeConfiguration((e) =>\n\t\t\t\tthis.onConfigurationChanged(e),\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.editorGroupService.onDidChangeEditorPartOptions((e) =>\n\t\t\t\tthis.onEditorPartConfigurationChange(e),\n\t\t\t),\n\t\t);\n\t}\n\n\tprivate onBlur(): void {\n\t\tthis.isInactive = true;\n\n\t\tthis.updateStyles();\n\t}\n\n\tprivate onFocus(): void {\n\t\tthis.isInactive = false;\n\n\t\tthis.updateStyles();\n\t}\n\n\tprivate onEditorPartConfigurationChange({\n\t\toldPartOptions,\n\t\tnewPartOptions,\n\t}: IEditorPartOptionsChangeEvent): void {\n\t\tif (\n\t\t\toldPartOptions.editorActionsLocation !==\n\t\t\t\tnewPartOptions.editorActionsLocation ||\n\t\t\toldPartOptions.showTabs !== newPartOptions.showTabs\n\t\t) {\n\t\t\tif (\n\t\t\t\thasCustomTitlebar(\n\t\t\t\t\tthis.configurationService,\n\t\t\t\t\tthis.titleBarStyle,\n\t\t\t\t) &&\n\t\t\t\tthis.actionToolBar\n\t\t\t) {\n\t\t\t\tthis.createActionToolBar();\n\t\t\t\tthis.createActionToolBarMenus({ editorActions: true });\n\t\t\t\tthis._onDidChange.fire(undefined);\n\t\t\t}\n\t\t}\n\t}\n\n\tprotected onConfigurationChanged(event: IConfigurationChangeEvent): void {\n\t\t// Custom menu bar (disabled if auxiliary)\n\t\tif (\n\t\t\t!this.isAuxiliary &&\n\t\t\t!hasNativeTitlebar(this.configurationService, this.titleBarStyle) &&\n\t\t\t(!isMacintosh || isWeb)\n\t\t) {\n\t\t\tif (event.affectsConfiguration(\"window.menuBarVisibility\")) {\n\t\t\t\tif (this.currentMenubarVisibility === \"compact\") {\n\t\t\t\t\tthis.uninstallMenubar();\n\t\t\t\t} else {\n\t\t\t\t\tthis.installMenubar();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Actions\n\t\tif (\n\t\t\thasCustomTitlebar(this.configurationService, this.titleBarStyle) &&\n\t\t\tthis.actionToolBar\n\t\t) {\n\t\t\tconst affectsLayoutControl = event.affectsConfiguration(\n\t\t\t\tLayoutSettings.LAYOUT_ACTIONS,\n\t\t\t);\n\t\t\tconst affectsActivityControl = event.affectsConfiguration(\n\t\t\t\tLayoutSettings.ACTIVITY_BAR_LOCATION,\n\t\t\t);\n\n\t\t\tif (affectsLayoutControl || affectsActivityControl) {\n\t\t\t\tthis.createActionToolBarMenus({\n\t\t\t\t\tlayoutActions: affectsLayoutControl,\n\t\t\t\t\tactivityActions: affectsActivityControl,\n\t\t\t\t});\n\n\t\t\t\tthis._onDidChange.fire(undefined);\n\t\t\t}\n\t\t}\n\n\t\t// Command Center\n\t\tif (event.affectsConfiguration(LayoutSettings.COMMAND_CENTER)) {\n\t\t\tthis.createTitle();\n\n\t\t\tthis._onDidChange.fire(undefined);\n\t\t}\n\t}\n\n\tprotected installMenubar(): void {\n\t\tif (this.menubar) {\n\t\t\treturn; // If the menubar is already installed, skip\n\t\t}\n\n\t\tthis.customMenubar = this._register(\n\t\t\tthis.instantiationService.createInstance(CustomMenubarControl),\n\t\t);\n\n\t\tthis.menubar = append(this.leftContent, $(\"div.menubar\"));\n\t\tthis.menubar.setAttribute(\"role\", \"menubar\");\n\n\t\tthis._register(\n\t\t\tthis.customMenubar.onVisibilityChange((e) =>\n\t\t\t\tthis.onMenubarVisibilityChanged(e),\n\t\t\t),\n\t\t);\n\n\t\tthis.customMenubar.create(this.menubar);\n\t}\n\n\tprivate uninstallMenubar(): void {\n\t\tthis.customMenubar?.dispose();\n\t\tthis.customMenubar = undefined;\n\n\t\tthis.menubar?.remove();\n\t\tthis.menubar = undefined;\n\n\t\tthis.onMenubarVisibilityChanged(false);\n\t}\n\n\tprotected onMenubarVisibilityChanged(visible: boolean): void {\n\t\tif (isWeb || isWindows || isLinux) {\n\t\t\tif (this.lastLayoutDimensions) {\n\t\t\t\tthis.layout(\n\t\t\t\t\tthis.lastLayoutDimensions.width,\n\t\t\t\t\tthis.lastLayoutDimensions.height,\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tthis._onMenubarVisibilityChange.fire(visible);\n\t\t}\n\t}\n\n\tupdateProperties(properties: ITitleProperties): void {\n\t\tthis.windowTitle.updateProperties(properties);\n\t}\n\n\tregisterVariables(variables: ITitleVariable[]): void {\n\t\tthis.windowTitle.registerVariables(variables);\n\t}\n\n\tprotected override createContentArea(parent: HTMLElement): HTMLElement {\n\t\tthis.element = parent;\n\t\tthis.rootContainer = append(parent, $(\".titlebar-container\"));\n\n\t\tthis.leftContent = append(this.rootContainer, $(\".titlebar-left\"));\n\t\tthis.centerContent = append(this.rootContainer, $(\".titlebar-center\"));\n\t\tthis.rightContent = append(this.rootContainer, $(\".titlebar-right\"));\n\n\t\t// App Icon (Native Windows/Linux and Web)\n\t\tif (\n\t\t\t!isMacintosh &&\n\t\t\t!isWeb &&\n\t\t\t!hasNativeTitlebar(this.configurationService, this.titleBarStyle)\n\t\t) {\n\t\t\tthis.appIcon = prepend(this.leftContent, $(\"a.window-appicon\"));\n\n\t\t\t// Web-only home indicator and menu (not for auxiliary windows)\n\t\t\tif (!this.isAuxiliary && isWeb) {\n\t\t\t\tconst homeIndicator =\n\t\t\t\t\tthis.environmentService.options?.homeIndicator;\n\t\t\t\tif (homeIndicator) {\n\t\t\t\t\tconst icon: ThemeIcon = getIconRegistry().getIcon(\n\t\t\t\t\t\thomeIndicator.icon,\n\t\t\t\t\t)\n\t\t\t\t\t\t? { id: homeIndicator.icon }\n\t\t\t\t\t\t: Codicon.code;\n\n\t\t\t\t\tthis.appIcon.setAttribute(\"href\", homeIndicator.href);\n\t\t\t\t\tthis.appIcon.classList.add(\n\t\t\t\t\t\t...ThemeIcon.asClassNameArray(icon),\n\t\t\t\t\t);\n\t\t\t\t\tthis.appIconBadge = document.createElement(\"div\");\n\t\t\t\t\tthis.appIconBadge.classList.add(\"home-bar-icon-badge\");\n\t\t\t\t\tthis.appIcon.appendChild(this.appIconBadge);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Draggable region that we can manipulate for #52522\n\t\tthis.dragRegion = prepend(\n\t\t\tthis.rootContainer,\n\t\t\t$(\"div.titlebar-drag-region\"),\n\t\t);\n\n\t\t// Menubar: install a custom menu bar depending on configuration\n\t\tif (\n\t\t\t!this.isAuxiliary &&\n\t\t\t!hasNativeTitlebar(this.configurationService, this.titleBarStyle) &&\n\t\t\t(!isMacintosh || isWeb) &&\n\t\t\tthis.currentMenubarVisibility !== \"compact\"\n\t\t) {\n\t\t\tthis.installMenubar();\n\t\t}\n\n\t\t// Title\n\t\tthis.title = append(this.centerContent, $(\"div.window-title\"));\n\t\tthis.createTitle();\n\n\t\t// Create Toolbar Actions\n\t\tif (hasCustomTitlebar(this.configurationService, this.titleBarStyle)) {\n\t\t\tthis.actionToolBarElement = append(\n\t\t\t\tthis.rightContent,\n\t\t\t\t$(\"div.action-toolbar-container\"),\n\t\t\t);\n\t\t\tthis.createActionToolBar();\n\t\t\tthis.createActionToolBarMenus();\n\t\t}\n\n\t\t// Window Controls Container\n\t\tif (!hasNativeTitlebar(this.configurationService, this.titleBarStyle)) {\n\t\t\tlet primaryWindowControlsLocation = isMacintosh ? \"left\" : \"right\";\n\t\t\tif (isMacintosh && isNative) {\n\t\t\t\t// Check if the locale is RTL, macOS will move traffic lights in RTL locales\n\t\t\t\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/Locale/textInfo\n\n\t\t\t\tconst localeInfo = new Intl.Locale(platformLocale) as any;\n\t\t\t\tif (localeInfo?.textInfo?.direction === \"rtl\") {\n\t\t\t\t\tprimaryWindowControlsLocation = \"right\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tisMacintosh &&\n\t\t\t\tisNative &&\n\t\t\t\tprimaryWindowControlsLocation === \"left\"\n\t\t\t) {\n\t\t\t\t// macOS native: controls are on the left and the container is not needed to make room\n\t\t\t\t// for something, except for web where a custom menu being supported). not putting the\n\t\t\t\t// container helps with allowing to move the window when clicking very close to the\n\t\t\t\t// window control buttons.\n\t\t\t} else {\n\t\t\t\tthis.windowControlsContainer = append(\n\t\t\t\t\tprimaryWindowControlsLocation === \"left\"\n\t\t\t\t\t\t? this.leftContent\n\t\t\t\t\t\t: this.rightContent,\n\t\t\t\t\t$(\"div.window-controls-container\"),\n\t\t\t\t);\n\t\t\t\tif (isWeb) {\n\t\t\t\t\t// Web: its possible to have control overlays on both sides, for example on macOS\n\t\t\t\t\t// with window controls on the left and PWA controls on the right.\n\t\t\t\t\tappend(\n\t\t\t\t\t\tprimaryWindowControlsLocation === \"left\"\n\t\t\t\t\t\t\t? this.rightContent\n\t\t\t\t\t\t\t: this.leftContent,\n\t\t\t\t\t\t$(\"div.window-controls-container\"),\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tif (isWCOEnabled()) {\n\t\t\t\t\tthis.windowControlsContainer.classList.add(\"wco-enabled\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Context menu over title bar: depending on the OS and the location of the click this will either be\n\t\t// the overall context menu for the entire title bar or a specific title context menu.\n\t\t// Windows / Linux: we only support the overall context menu on the title bar\n\t\t// macOS: we support both the overall context menu and the title context menu.\n\t\t//        in addition, we allow Cmd+click to bring up the title context menu.\n\t\t{\n\t\t\tthis._register(\n\t\t\t\taddDisposableListener(\n\t\t\t\t\tthis.rootContainer,\n\t\t\t\t\tEventType.CONTEXT_MENU,\n\t\t\t\t\t(e) => {\n\t\t\t\t\t\tEventHelper.stop(e);\n\n\t\t\t\t\t\tlet targetMenu: MenuId;\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tisMacintosh &&\n\t\t\t\t\t\t\tisHTMLElement(e.target) &&\n\t\t\t\t\t\t\tisAncestor(e.target, this.title)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\ttargetMenu = MenuId.TitleBarTitleContext;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttargetMenu = MenuId.TitleBarContext;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.onContextMenu(e, targetMenu);\n\t\t\t\t\t},\n\t\t\t\t),\n\t\t\t);\n\n\t\t\tif (isMacintosh) {\n\t\t\t\tthis._register(\n\t\t\t\t\taddDisposableListener(\n\t\t\t\t\t\tthis.title,\n\t\t\t\t\t\tEventType.MOUSE_DOWN,\n\t\t\t\t\t\t(e) => {\n\t\t\t\t\t\t\tif (e.metaKey) {\n\t\t\t\t\t\t\t\tEventHelper.stop(\n\t\t\t\t\t\t\t\t\te,\n\t\t\t\t\t\t\t\t\ttrue /* stop bubbling to prevent command center from opening */,\n\t\t\t\t\t\t\t\t);\n\n\t\t\t\t\t\t\t\tthis.onContextMenu(\n\t\t\t\t\t\t\t\t\te,\n\t\t\t\t\t\t\t\t\tMenuId.TitleBarTitleContext,\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttrue /* capture phase to prevent command center from opening */,\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis.updateStyles();\n\n\t\treturn this.element;\n\t}\n\n\tprivate createTitle(): void {\n\t\tthis.titleDisposables.clear();\n\n\t\t// Text Title\n\t\tif (this.isCommandCenterVisible) {\n\t\t\tconst commandCenter = this.instantiationService.createInstance(\n\t\t\t\tCommandCenterControl,\n\t\t\t\tthis.windowTitle,\n\t\t\t\tthis.hoverDelegate,\n\t\t\t);\n\t\t\treset(this.title, commandCenter.element);\n\t\t\tthis.titleDisposables.add(commandCenter);\n\t\t} else {\n\t\t\tthis.title.innerText = this.windowTitle.value;\n\t\t\tthis.titleDisposables.add(\n\t\t\t\tthis.windowTitle.onDidChange(() => {\n\t\t\t\t\tthis.title.innerText = this.windowTitle.value;\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate actionViewItemProvider(\n\t\taction: IAction,\n\t\toptions: IBaseActionViewItemOptions,\n\t): IActionViewItem | undefined {\n\t\t// --- Activity Actions\n\t\tif (!this.isAuxiliary) {\n\t\t\tif (action.id === GLOBAL_ACTIVITY_ID) {\n\t\t\t\treturn this.instantiationService.createInstance(\n\t\t\t\t\tSimpleGlobalActivityActionViewItem,\n\t\t\t\t\t{ position: () => HoverPosition.BELOW },\n\t\t\t\t\toptions,\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (action.id === ACCOUNTS_ACTIVITY_ID) {\n\t\t\t\treturn this.instantiationService.createInstance(\n\t\t\t\t\tSimpleAccountActivityActionViewItem,\n\t\t\t\t\t{ position: () => HoverPosition.BELOW },\n\t\t\t\t\toptions,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\t// --- Editor Actions\n\t\tconst activeEditorPane =\n\t\t\tthis.editorGroupsContainer.activeGroup?.activeEditorPane;\n\t\tif (activeEditorPane && activeEditorPane instanceof EditorPane) {\n\t\t\tconst result = activeEditorPane.getActionViewItem(action, options);\n\n\t\t\tif (result) {\n\t\t\t\treturn result;\n\t\t\t}\n\t\t}\n\n\t\t// Check extensions\n\t\treturn createActionViewItem(this.instantiationService, action, {\n\t\t\t...options,\n\t\t\tmenuAsChild: false,\n\t\t});\n\t}\n\n\tprivate getKeybinding(action: IAction): ResolvedKeybinding | undefined {\n\t\tconst editorPaneAwareContextKeyService =\n\t\t\tthis.editorGroupsContainer.activeGroup?.activeEditorPane\n\t\t\t\t?.scopedContextKeyService ?? this.contextKeyService;\n\n\t\treturn this.keybindingService.lookupKeybinding(\n\t\t\taction.id,\n\t\t\teditorPaneAwareContextKeyService,\n\t\t);\n\t}\n\n\tprivate createActionToolBar() {\n\t\t// Creates the action tool bar. Depends on the configuration of the title bar menus\n\t\t// Requires to be recreated whenever editor actions enablement changes\n\n\t\tthis.actionToolBarDisposable.clear();\n\n\t\tthis.actionToolBar = this.actionToolBarDisposable.add(\n\t\t\tthis.instantiationService.createInstance(\n\t\t\t\tWorkbenchToolBar,\n\t\t\t\tthis.actionToolBarElement,\n\t\t\t\t{\n\t\t\t\t\tcontextMenu: MenuId.TitleBarContext,\n\t\t\t\t\torientation: ActionsOrientation.HORIZONTAL,\n\t\t\t\t\tariaLabel: localize(\n\t\t\t\t\t\t\"ariaLabelTitleActions\",\n\t\t\t\t\t\t\"Title actions\",\n\t\t\t\t\t),\n\t\t\t\t\tgetKeyBinding: (action) => this.getKeybinding(action),\n\t\t\t\t\toverflowBehavior: {\n\t\t\t\t\t\tmaxItems: 9,\n\t\t\t\t\t\texempted: [\n\t\t\t\t\t\t\tACCOUNTS_ACTIVITY_ID,\n\t\t\t\t\t\t\tGLOBAL_ACTIVITY_ID,\n\t\t\t\t\t\t\t...EDITOR_CORE_NAVIGATION_COMMANDS,\n\t\t\t\t\t\t],\n\t\t\t\t\t},\n\t\t\t\t\tanchorAlignmentProvider: () => AnchorAlignment.RIGHT,\n\t\t\t\t\ttelemetrySource: \"titlePart\",\n\t\t\t\t\thighlightToggledItems: this.editorActionsEnabled, // Only show toggled state for editor actions (Layout actions are not shown as toggled)\n\t\t\t\t\tactionViewItemProvider: (action, options) =>\n\t\t\t\t\t\tthis.actionViewItemProvider(action, options),\n\t\t\t\t\thoverDelegate: this.hoverDelegate,\n\t\t\t\t},\n\t\t\t),\n\t\t);\n\n\t\tif (this.editorActionsEnabled) {\n\t\t\tthis.actionToolBarDisposable.add(\n\t\t\t\tthis.editorGroupsContainer.onDidChangeActiveGroup(() =>\n\t\t\t\t\tthis.createActionToolBarMenus({ editorActions: true }),\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate createActionToolBarMenus(\n\t\tupdate:\n\t\t\t| true\n\t\t\t| {\n\t\t\t\t\teditorActions?: boolean;\n\t\t\t\t\tlayoutActions?: boolean;\n\t\t\t\t\tactivityActions?: boolean;\n\t\t\t  } = true,\n\t) {\n\t\tif (update === true) {\n\t\t\tupdate = {\n\t\t\t\teditorActions: true,\n\t\t\t\tlayoutActions: true,\n\t\t\t\tactivityActions: true,\n\t\t\t};\n\t\t}\n\n\t\tconst updateToolBarActions = () => {\n\t\t\tconst actions: IToolbarActions = { primary: [], secondary: [] };\n\n\t\t\t// --- Editor Actions\n\t\t\tif (this.editorActionsEnabled) {\n\t\t\t\tthis.editorActionsChangeDisposable.clear();\n\n\t\t\t\tconst activeGroup = this.editorGroupsContainer.activeGroup;\n\t\t\t\tif (activeGroup) {\n\t\t\t\t\tconst editorActions = activeGroup.createEditorActions(\n\t\t\t\t\t\tthis.editorActionsChangeDisposable,\n\t\t\t\t\t);\n\n\t\t\t\t\tactions.primary.push(...editorActions.actions.primary);\n\t\t\t\t\tactions.secondary.push(...editorActions.actions.secondary);\n\n\t\t\t\t\tthis.editorActionsChangeDisposable.add(\n\t\t\t\t\t\teditorActions.onDidChange(() => updateToolBarActions()),\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// --- Layout Actions\n\t\t\tif (this.layoutToolbarMenu) {\n\t\t\t\tcreateAndFillInActionBarActions(\n\t\t\t\t\tthis.layoutToolbarMenu,\n\t\t\t\t\t{},\n\t\t\t\t\tactions,\n\t\t\t\t\t() => !this.editorActionsEnabled, // Layout Actions in overflow menu when editor actions enabled in title bar\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// --- Activity Actions\n\t\t\tif (this.activityActionsEnabled) {\n\t\t\t\tif (isAccountsActionVisible(this.storageService)) {\n\t\t\t\t\tactions.primary.push(ACCOUNTS_ACTIVITY_TILE_ACTION);\n\t\t\t\t}\n\t\t\t\tactions.primary.push(GLOBAL_ACTIVITY_TITLE_ACTION);\n\t\t\t}\n\n\t\t\tthis.actionToolBar.setActions(\n\t\t\t\tprepareActions(actions.primary),\n\t\t\t\tprepareActions(actions.secondary),\n\t\t\t);\n\t\t};\n\n\t\t// Create/Update the menus which should be in the title tool bar\n\n\t\tif (update.editorActions) {\n\t\t\tthis.editorToolbarMenuDisposables.clear();\n\n\t\t\t// The editor toolbar menu is handled by the editor group so we do not need to manage it here.\n\t\t\t// However, depending on the active editor, we need to update the context and action runner of the toolbar menu.\n\t\t\tif (\n\t\t\t\tthis.editorActionsEnabled &&\n\t\t\t\tthis.editorService.activeEditor !== undefined\n\t\t\t) {\n\t\t\t\tconst context: IEditorCommandsContext = {\n\t\t\t\t\tgroupId: this.editorGroupsContainer.activeGroup.id,\n\t\t\t\t};\n\n\t\t\t\tthis.actionToolBar.actionRunner =\n\t\t\t\t\tnew EditorCommandsContextActionRunner(context);\n\t\t\t\tthis.actionToolBar.context = context;\n\t\t\t\tthis.editorToolbarMenuDisposables.add(\n\t\t\t\t\tthis.actionToolBar.actionRunner,\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.actionToolBar.actionRunner = new ActionRunner();\n\t\t\t\tthis.actionToolBar.context = undefined;\n\n\t\t\t\tthis.editorToolbarMenuDisposables.add(\n\t\t\t\t\tthis.actionToolBar.actionRunner,\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tif (update.layoutActions) {\n\t\t\tthis.layoutToolbarMenuDisposables.clear();\n\n\t\t\tif (this.layoutControlEnabled) {\n\t\t\t\tthis.layoutToolbarMenu = this.menuService.createMenu(\n\t\t\t\t\tMenuId.LayoutControlMenu,\n\t\t\t\t\tthis.contextKeyService,\n\t\t\t\t);\n\n\t\t\t\tthis.layoutToolbarMenuDisposables.add(this.layoutToolbarMenu);\n\t\t\t\tthis.layoutToolbarMenuDisposables.add(\n\t\t\t\t\tthis.layoutToolbarMenu.onDidChange(() =>\n\t\t\t\t\t\tupdateToolBarActions(),\n\t\t\t\t\t),\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.layoutToolbarMenu = undefined;\n\t\t\t}\n\t\t}\n\n\t\tif (update.activityActions) {\n\t\t\tthis.activityToolbarDisposables.clear();\n\t\t\tif (this.activityActionsEnabled) {\n\t\t\t\tthis.activityToolbarDisposables.add(\n\t\t\t\t\tthis.storageService.onDidChangeValue(\n\t\t\t\t\t\tStorageScope.PROFILE,\n\t\t\t\t\t\tAccountsActivityActionViewItem.ACCOUNTS_VISIBILITY_PREFERENCE_KEY,\n\t\t\t\t\t\tthis._store,\n\t\t\t\t\t)(() => updateToolBarActions()),\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tupdateToolBarActions();\n\t}\n\n\toverride updateStyles(): void {\n\t\tsuper.updateStyles();\n\n\t\t// Part container\n\t\tif (this.element) {\n\t\t\tif (this.isInactive) {\n\t\t\t\tthis.element.classList.add(\"inactive\");\n\t\t\t} else {\n\t\t\t\tthis.element.classList.remove(\"inactive\");\n\t\t\t}\n\n\t\t\tconst titleBackground =\n\t\t\t\tthis.getColor(\n\t\t\t\t\tthis.isInactive\n\t\t\t\t\t\t? TITLE_BAR_INACTIVE_BACKGROUND\n\t\t\t\t\t\t: TITLE_BAR_ACTIVE_BACKGROUND,\n\t\t\t\t\t(color, theme) => {\n\t\t\t\t\t\t// LCD Rendering Support: the title bar part is a defining its own GPU layer.\n\t\t\t\t\t\t// To benefit from LCD font rendering, we must ensure that we always set an\n\t\t\t\t\t\t// opaque background color. As such, we compute an opaque color given we know\n\t\t\t\t\t\t// the background color is the workbench background.\n\t\t\t\t\t\treturn color.isOpaque()\n\t\t\t\t\t\t\t? color\n\t\t\t\t\t\t\t: color.makeOpaque(WORKBENCH_BACKGROUND(theme));\n\t\t\t\t\t},\n\t\t\t\t) || \"\";\n\t\t\tthis.element.style.backgroundColor = titleBackground;\n\n\t\t\tif (this.appIconBadge) {\n\t\t\t\tthis.appIconBadge.style.backgroundColor = titleBackground;\n\t\t\t}\n\n\t\t\tif (titleBackground && Color.fromHex(titleBackground).isLighter()) {\n\t\t\t\tthis.element.classList.add(\"light\");\n\t\t\t} else {\n\t\t\t\tthis.element.classList.remove(\"light\");\n\t\t\t}\n\n\t\t\tconst titleForeground = this.getColor(\n\t\t\t\tthis.isInactive\n\t\t\t\t\t? TITLE_BAR_INACTIVE_FOREGROUND\n\t\t\t\t\t: TITLE_BAR_ACTIVE_FOREGROUND,\n\t\t\t);\n\t\t\tthis.element.style.color = titleForeground || \"\";\n\n\t\t\tconst titleBorder = this.getColor(TITLE_BAR_BORDER);\n\t\t\tthis.element.style.borderBottom = titleBorder\n\t\t\t\t? `1px solid ${titleBorder}`\n\t\t\t\t: \"\";\n\t\t}\n\t}\n\n\tprotected onContextMenu(e: MouseEvent, menuId: MenuId): void {\n\t\tconst event = new StandardMouseEvent(getWindow(this.element), e);\n\n\t\t// Show it\n\t\tthis.contextMenuService.showContextMenu({\n\t\t\tgetAnchor: () => event,\n\t\t\tmenuId,\n\t\t\tcontextKeyService: this.contextKeyService,\n\t\t\tdomForShadowRoot:\n\t\t\t\tisMacintosh && isNative ? event.target : undefined,\n\t\t});\n\t}\n\n\tprotected get currentMenubarVisibility(): MenuBarVisibility {\n\t\tif (this.isAuxiliary) {\n\t\t\treturn \"hidden\";\n\t\t}\n\n\t\treturn getMenuBarVisibility(this.configurationService);\n\t}\n\n\tprivate get layoutControlEnabled(): boolean {\n\t\treturn (\n\t\t\t!this.isAuxiliary &&\n\t\t\tthis.configurationService.getValue<boolean>(\n\t\t\t\tLayoutSettings.LAYOUT_ACTIONS,\n\t\t\t) !== false\n\t\t);\n\t}\n\n\tprotected get isCommandCenterVisible() {\n\t\treturn (\n\t\t\tthis.configurationService.getValue<boolean>(\n\t\t\t\tLayoutSettings.COMMAND_CENTER,\n\t\t\t) !== false\n\t\t);\n\t}\n\n\tprivate get editorActionsEnabled(): boolean {\n\t\treturn (\n\t\t\tthis.editorGroupService.partOptions.editorActionsLocation ===\n\t\t\t\tEditorActionsLocation.TITLEBAR ||\n\t\t\t(this.editorGroupService.partOptions.editorActionsLocation ===\n\t\t\t\tEditorActionsLocation.DEFAULT &&\n\t\t\t\tthis.editorGroupService.partOptions.showTabs ===\n\t\t\t\t\tEditorTabsMode.NONE)\n\t\t);\n\t}\n\n\tprivate get activityActionsEnabled(): boolean {\n\t\tconst activityBarPosition =\n\t\t\tthis.configurationService.getValue<ActivityBarPosition>(\n\t\t\t\tLayoutSettings.ACTIVITY_BAR_LOCATION,\n\t\t\t);\n\t\treturn (\n\t\t\t!this.isAuxiliary &&\n\t\t\t(activityBarPosition === ActivityBarPosition.TOP ||\n\t\t\t\tactivityBarPosition === ActivityBarPosition.BOTTOM)\n\t\t);\n\t}\n\n\tget hasZoomableElements(): boolean {\n\t\tconst hasMenubar = !(\n\t\t\tthis.currentMenubarVisibility === \"hidden\" ||\n\t\t\tthis.currentMenubarVisibility === \"compact\" ||\n\t\t\t(!isWeb && isMacintosh)\n\t\t);\n\t\tconst hasCommandCenter = this.isCommandCenterVisible;\n\t\tconst hasToolBarActions =\n\t\t\tthis.layoutControlEnabled ||\n\t\t\tthis.editorActionsEnabled ||\n\t\t\tthis.activityActionsEnabled;\n\t\treturn hasMenubar || hasCommandCenter || hasToolBarActions;\n\t}\n\n\tget preventZoom(): boolean {\n\t\t// Prevent zooming behavior if any of the following conditions are met:\n\t\t// 1. Shrinking below the window control size (zoom < 1)\n\t\t// 2. No custom items are present in the title bar\n\n\t\treturn (\n\t\t\tgetZoomFactor(getWindow(this.element)) < 1 ||\n\t\t\t!this.hasZoomableElements\n\t\t);\n\t}\n\n\toverride layout(width: number, height: number): void {\n\t\tthis.updateLayout(new Dimension(width, height));\n\n\t\tsuper.layoutContents(width, height);\n\t}\n\n\tprivate updateLayout(dimension: Dimension): void {\n\t\tthis.lastLayoutDimensions = dimension;\n\n\t\tif (hasCustomTitlebar(this.configurationService, this.titleBarStyle)) {\n\t\t\tconst zoomFactor = getZoomFactor(getWindow(this.element));\n\n\t\t\tthis.element.style.setProperty(\n\t\t\t\t\"--zoom-factor\",\n\t\t\t\tzoomFactor.toString(),\n\t\t\t);\n\t\t\tthis.rootContainer.classList.toggle(\n\t\t\t\t\"counter-zoom\",\n\t\t\t\tthis.preventZoom,\n\t\t\t);\n\n\t\t\tif (this.customMenubar) {\n\t\t\t\tconst menubarDimension = new Dimension(0, dimension.height);\n\t\t\t\tthis.customMenubar.layout(menubarDimension);\n\t\t\t}\n\t\t}\n\t}\n\n\tfocus(): void {\n\t\tif (this.customMenubar) {\n\t\t\tthis.customMenubar.toggleFocus();\n\t\t} else {\n\t\t\t(\n\t\t\t\tthis.element.querySelector(\n\t\t\t\t\t'[tabindex]:not([tabindex=\"-1\"])',\n\t\t\t\t) as HTMLElement\n\t\t\t).focus();\n\t\t}\n\t}\n\n\ttoJSON(): object {\n\t\treturn {\n\t\t\ttype: Parts.TITLEBAR_PART,\n\t\t};\n\t}\n\n\toverride dispose(): void {\n\t\tthis._onWillDispose.fire();\n\n\t\tsuper.dispose();\n\t}\n}\n\nexport class MainBrowserTitlebarPart extends BrowserTitlebarPart {\n\tconstructor(\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IBrowserWorkbenchEnvironmentService environmentService: IBrowserWorkbenchEnvironmentService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IHostService hostService: IHostService,\n\t\t@IEditorGroupsService editorGroupService: IEditorGroupsService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t) {\n\t\tsuper(\n\t\t\tParts.TITLEBAR_PART,\n\t\t\tmainWindow,\n\t\t\t\"main\",\n\t\t\tcontextMenuService,\n\t\t\tconfigurationService,\n\t\t\tenvironmentService,\n\t\t\tinstantiationService,\n\t\t\tthemeService,\n\t\t\tstorageService,\n\t\t\tlayoutService,\n\t\t\tcontextKeyService,\n\t\t\thostService,\n\t\t\teditorGroupService,\n\t\t\teditorService,\n\t\t\tmenuService,\n\t\t\tkeybindingService,\n\t\t);\n\t}\n}\n\nexport interface IAuxiliaryTitlebarPart extends ITitlebarPart, IView {\n\treadonly container: HTMLElement;\n\treadonly height: number;\n}\n\nexport class AuxiliaryBrowserTitlebarPart\n\textends BrowserTitlebarPart\n\timplements IAuxiliaryTitlebarPart\n{\n\tprivate static COUNTER = 1;\n\n\tget height() {\n\t\treturn this.minimumHeight;\n\t}\n\n\tconstructor(\n\t\treadonly container: HTMLElement,\n\t\teditorGroupsContainer: IEditorGroupsContainer,\n\t\tprivate readonly mainTitlebar: BrowserTitlebarPart,\n\t\t@IContextMenuService contextMenuService: IContextMenuService,\n\t\t@IConfigurationService configurationService: IConfigurationService,\n\t\t@IBrowserWorkbenchEnvironmentService environmentService: IBrowserWorkbenchEnvironmentService,\n\t\t@IInstantiationService instantiationService: IInstantiationService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IStorageService storageService: IStorageService,\n\t\t@IWorkbenchLayoutService layoutService: IWorkbenchLayoutService,\n\t\t@IContextKeyService contextKeyService: IContextKeyService,\n\t\t@IHostService hostService: IHostService,\n\t\t@IEditorGroupsService editorGroupService: IEditorGroupsService,\n\t\t@IEditorService editorService: IEditorService,\n\t\t@IMenuService menuService: IMenuService,\n\t\t@IKeybindingService keybindingService: IKeybindingService,\n\t) {\n\t\tconst id = AuxiliaryBrowserTitlebarPart.COUNTER++;\n\t\tsuper(\n\t\t\t`workbench.parts.auxiliaryTitle.${id}`,\n\t\t\tgetWindow(container),\n\t\t\teditorGroupsContainer,\n\t\t\tcontextMenuService,\n\t\t\tconfigurationService,\n\t\t\tenvironmentService,\n\t\t\tinstantiationService,\n\t\t\tthemeService,\n\t\t\tstorageService,\n\t\t\tlayoutService,\n\t\t\tcontextKeyService,\n\t\t\thostService,\n\t\t\teditorGroupService,\n\t\t\teditorService,\n\t\t\tmenuService,\n\t\t\tkeybindingService,\n\t\t);\n\t}\n\n\toverride get preventZoom(): boolean {\n\t\t// Prevent zooming behavior if any of the following conditions are met:\n\t\t// 1. Shrinking below the window control size (zoom < 1)\n\t\t// 2. No custom items are present in the main title bar\n\t\t// The auxiliary title bar never contains any zoomable items itself,\n\t\t// but we want to match the behavior of the main title bar.\n\n\t\treturn (\n\t\t\tgetZoomFactor(getWindow(this.element)) < 1 ||\n\t\t\t!this.mainTitlebar.hasZoomableElements\n\t\t);\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
