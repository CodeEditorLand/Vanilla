import"../../../../../vs/base/browser/dom.js";import{isEqual as i}from"../../../../../vs/base/common/resources.js";import{assertIsDefined as r}from"../../../../../vs/base/common/types.js";import"../../../../../vs/base/common/uri.js";import"../../../../../vs/editor/browser/editorBrowser.js";import{CodeEditorWidget as d}from"../../../../../vs/editor/browser/widget/codeEditor/codeEditorWidget.js";import"../../../../../vs/editor/common/config/editorOptions.js";import{ScrollType as n}from"../../../../../vs/editor/common/editorCommon.js";import{localize as s}from"../../../../../vs/nls.js";import{IContextKeyService as p}from"../../../../../vs/platform/contextkey/common/contextkey.js";import"../../../../../vs/platform/editor/common/editor.js";import{AbstractTextEditor as u}from"../../../../../vs/workbench/browser/parts/editor/textEditor.js";import"../../../../../vs/workbench/common/editor.js";import{applyTextEditorOptions as l}from"../../../../../vs/workbench/common/editor/editorOptions.js";class U extends u{editorControl=void 0;get scopedContextKeyService(){return this.editorControl?.invokeWithinContext(t=>t.get(p))}getTitle(){return this.input?this.input.getName():s("textEditor","Text Editor")}createEditorControl(t,e){this.editorControl=this._register(this.instantiationService.createInstance(d,t,e,this.getCodeEditorWidgetOptions()))}getCodeEditorWidgetOptions(){return Object.create(null)}updateEditorControlOptions(t){this.editorControl?.updateOptions(t)}getMainControl(){return this.editorControl}getControl(){return this.editorControl}computeEditorViewState(t){if(!this.editorControl)return;const e=this.editorControl.getModel();if(!e)return;const o=e.uri;if(o&&i(o,t))return this.editorControl.saveViewState()??void 0}setOptions(t){super.setOptions(t),t&&l(t,r(this.editorControl),n.Smooth)}focus(){super.focus(),this.editorControl?.focus()}hasFocus(){return this.editorControl?.hasTextFocus()||super.hasFocus()}setEditorVisible(t){super.setEditorVisible(t),t?this.editorControl?.onVisible():this.editorControl?.onHide()}layout(t){this.editorControl?.layout(t)}}export{U as AbstractTextCodeEditor};
