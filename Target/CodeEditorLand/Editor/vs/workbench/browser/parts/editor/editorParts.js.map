{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/browser/parts/editor/editorParts.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { isHTMLElement } from \"../../../../base/browser/dom.js\";\nimport { distinct } from \"../../../../base/common/arrays.js\";\nimport { DeferredPromise } from \"../../../../base/common/async.js\";\nimport { Emitter } from \"../../../../base/common/event.js\";\nimport {\n\tDisposableMap,\n\tDisposableStore,\n\ttype IDisposable,\n\ttoDisposable,\n} from \"../../../../base/common/lifecycle.js\";\nimport { generateUuid } from \"../../../../base/common/uuid.js\";\nimport { localize } from \"../../../../nls.js\";\nimport {\n\ttype ContextKeyValue,\n\ttype IContextKey,\n\tIContextKeyService,\n\ttype RawContextKey,\n} from \"../../../../platform/contextkey/common/contextkey.js\";\nimport {\n\tInstantiationType,\n\tregisterSingleton,\n} from \"../../../../platform/instantiation/common/extensions.js\";\nimport { IInstantiationService } from \"../../../../platform/instantiation/common/instantiation.js\";\nimport { ServiceCollection } from \"../../../../platform/instantiation/common/serviceCollection.js\";\nimport {\n\tIStorageService,\n\ttype IStorageValueChangeEvent,\n\tStorageScope,\n\tStorageTarget,\n} from \"../../../../platform/storage/common/storage.js\";\nimport { IThemeService } from \"../../../../platform/theme/common/themeService.js\";\nimport type { GroupIdentifier } from \"../../../common/editor.js\";\nimport {\n\ttype IAuxiliaryWindowOpenOptions,\n\tIAuxiliaryWindowService,\n} from \"../../../services/auxiliaryWindow/browser/auxiliaryWindowService.js\";\nimport {\n\ttype EditorGroupLayout,\n\ttype GroupDirection,\n\tGroupLocation,\n\ttype GroupOrientation,\n\ttype GroupsArrangement,\n\tGroupsOrder,\n\ttype IAuxiliaryEditorPart,\n\ttype IEditorDropTargetDelegate,\n\ttype IEditorGroupContextKeyProvider,\n\tIEditorGroupsService,\n\ttype IEditorPart,\n\ttype IEditorSideGroup,\n\ttype IEditorWorkingSet,\n\ttype IEditorWorkingSetOptions,\n\ttype IFindGroupScope,\n\ttype IMergeGroupOptions,\n} from \"../../../services/editor/common/editorGroupsService.js\";\nimport { IEditorService } from \"../../../services/editor/common/editorService.js\";\nimport { MultiWindowParts } from \"../../part.js\";\nimport {\n\tAuxiliaryEditorPart,\n\ttype IAuxiliaryEditorPartOpenOptions,\n} from \"./auxiliaryEditorPart.js\";\nimport type { IEditorGroupView, IEditorPartsView } from \"./editor.js\";\nimport {\n\ttype EditorPart,\n\ttype IEditorPartUIState,\n\tMainEditorPart,\n} from \"./editorPart.js\";\n\ninterface IEditorPartsUIState {\n\treadonly auxiliary: IAuxiliaryEditorPartState[];\n\treadonly mru: number[];\n\t// main state is managed by the main part\n}\n\ninterface IAuxiliaryEditorPartState extends IAuxiliaryWindowOpenOptions {\n\treadonly state: IEditorPartUIState;\n}\n\ninterface IEditorWorkingSetState extends IEditorWorkingSet {\n\treadonly main: IEditorPartUIState;\n\treadonly auxiliary: IEditorPartsUIState;\n}\n\nexport class EditorParts\n\textends MultiWindowParts<EditorPart>\n\timplements IEditorGroupsService, IEditorPartsView\n{\n\tdeclare readonly _serviceBrand: undefined;\n\n\treadonly mainPart = this._register(this.createMainEditorPart());\n\n\tprivate mostRecentActiveParts = [this.mainPart];\n\n\tconstructor(\n\t\t@IInstantiationService protected readonly instantiationService: IInstantiationService,\n\t\t@IStorageService private readonly storageService: IStorageService,\n\t\t@IThemeService themeService: IThemeService,\n\t\t@IAuxiliaryWindowService private readonly auxiliaryWindowService: IAuxiliaryWindowService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService\n\t) {\n\t\tsuper('workbench.editorParts', themeService, storageService);\n\n\t\tthis._register(this.registerPart(this.mainPart));\n\n\t\tthis.restoreParts();\n\t\tthis.registerListeners();\n\t}\n\n\tprivate registerListeners(): void {\n\t\tthis._register(\n\t\t\tthis.onDidChangeMementoValue(\n\t\t\t\tStorageScope.WORKSPACE,\n\t\t\t\tthis._store,\n\t\t\t)((e) => this.onDidChangeMementoState(e)),\n\t\t);\n\t\tthis.whenReady.then(() => this.registerGroupsContextKeyListeners());\n\t}\n\n\tprotected createMainEditorPart(): MainEditorPart {\n\t\treturn this.instantiationService.createInstance(MainEditorPart, this);\n\t}\n\n\t//#region Scoped Instantiation Services\n\n\tprivate readonly mapPartToInstantiationService = new Map<\n\t\tnumber /* window ID */,\n\t\tIInstantiationService\n\t>();\n\n\tgetScopedInstantiationService(part: IEditorPart): IInstantiationService {\n\t\tif (part === this.mainPart) {\n\t\t\tif (!this.mapPartToInstantiationService.has(part.windowId)) {\n\t\t\t\tthis.instantiationService.invokeFunction((accessor) => {\n\t\t\t\t\tconst editorService = accessor.get(IEditorService); // using `invokeFunction` to get hold of `IEditorService` lazily\n\n\t\t\t\t\tthis.mapPartToInstantiationService.set(\n\t\t\t\t\t\tpart.windowId,\n\t\t\t\t\t\tthis._register(\n\t\t\t\t\t\t\tthis.instantiationService.createChild(\n\t\t\t\t\t\t\t\tnew ServiceCollection([\n\t\t\t\t\t\t\t\t\tIEditorService,\n\t\t\t\t\t\t\t\t\teditorService.createScoped(\n\t\t\t\t\t\t\t\t\t\t\"main\",\n\t\t\t\t\t\t\t\t\t\tthis._store,\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t]),\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t),\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn (\n\t\t\tthis.mapPartToInstantiationService.get(part.windowId) ??\n\t\t\tthis.instantiationService\n\t\t);\n\t}\n\n\t//#endregion\n\n\t//#region Auxiliary Editor Parts\n\n\tprivate readonly _onDidCreateAuxiliaryEditorPart = this._register(\n\t\tnew Emitter<IAuxiliaryEditorPart>(),\n\t);\n\treadonly onDidCreateAuxiliaryEditorPart =\n\t\tthis._onDidCreateAuxiliaryEditorPart.event;\n\n\tasync createAuxiliaryEditorPart(\n\t\toptions?: IAuxiliaryEditorPartOpenOptions,\n\t): Promise<IAuxiliaryEditorPart> {\n\t\tconst { part, instantiationService, disposables } =\n\t\t\tawait this.instantiationService\n\t\t\t\t.createInstance(AuxiliaryEditorPart, this)\n\t\t\t\t.create(this.getGroupsLabel(this._parts.size), options);\n\n\t\t// Keep instantiation service\n\t\tthis.mapPartToInstantiationService.set(\n\t\t\tpart.windowId,\n\t\t\tinstantiationService,\n\t\t);\n\t\tdisposables.add(\n\t\t\ttoDisposable(() =>\n\t\t\t\tthis.mapPartToInstantiationService.delete(part.windowId),\n\t\t\t),\n\t\t);\n\n\t\t// Events\n\t\tthis._onDidAddGroup.fire(part.activeGroup);\n\n\t\tthis._onDidCreateAuxiliaryEditorPart.fire(part);\n\n\t\treturn part;\n\t}\n\n\t//#endregion\n\n\t//#region Registration\n\n\toverride registerPart(part: EditorPart): IDisposable {\n\t\tconst disposables = this._register(new DisposableStore());\n\t\tdisposables.add(super.registerPart(part));\n\n\t\tthis.registerEditorPartListeners(part, disposables);\n\n\t\treturn disposables;\n\t}\n\n\tprotected override unregisterPart(part: EditorPart): void {\n\t\tsuper.unregisterPart(part);\n\n\t\t// Notify all parts about a groups label change\n\t\t// given it is computed based on the index\n\n\t\tthis.parts.forEach((part, index) => {\n\t\t\tif (part === this.mainPart) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tpart.notifyGroupsLabelChange(this.getGroupsLabel(index));\n\t\t});\n\t}\n\n\tprivate registerEditorPartListeners(\n\t\tpart: EditorPart,\n\t\tdisposables: DisposableStore,\n\t): void {\n\t\tdisposables.add(\n\t\t\tpart.onDidFocus(() => {\n\t\t\t\tthis.doUpdateMostRecentActive(part, true);\n\n\t\t\t\tif (this._parts.size > 1) {\n\t\t\t\t\tthis._onDidActiveGroupChange.fire(this.activeGroup); // this can only happen when we have more than 1 editor part\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t\tdisposables.add(\n\t\t\ttoDisposable(() => this.doUpdateMostRecentActive(part)),\n\t\t);\n\n\t\tdisposables.add(\n\t\t\tpart.onDidChangeActiveGroup((group) =>\n\t\t\t\tthis._onDidActiveGroupChange.fire(group),\n\t\t\t),\n\t\t);\n\t\tdisposables.add(\n\t\t\tpart.onDidAddGroup((group) => this._onDidAddGroup.fire(group)),\n\t\t);\n\t\tdisposables.add(\n\t\t\tpart.onDidRemoveGroup((group) =>\n\t\t\t\tthis._onDidRemoveGroup.fire(group),\n\t\t\t),\n\t\t);\n\t\tdisposables.add(\n\t\t\tpart.onDidMoveGroup((group) => this._onDidMoveGroup.fire(group)),\n\t\t);\n\t\tdisposables.add(\n\t\t\tpart.onDidActivateGroup((group) =>\n\t\t\t\tthis._onDidActivateGroup.fire(group),\n\t\t\t),\n\t\t);\n\t\tdisposables.add(\n\t\t\tpart.onDidChangeGroupMaximized((maximized) =>\n\t\t\t\tthis._onDidChangeGroupMaximized.fire(maximized),\n\t\t\t),\n\t\t);\n\n\t\tdisposables.add(\n\t\t\tpart.onDidChangeGroupIndex((group) =>\n\t\t\t\tthis._onDidChangeGroupIndex.fire(group),\n\t\t\t),\n\t\t);\n\t\tdisposables.add(\n\t\t\tpart.onDidChangeGroupLocked((group) =>\n\t\t\t\tthis._onDidChangeGroupLocked.fire(group),\n\t\t\t),\n\t\t);\n\t}\n\n\tprivate doUpdateMostRecentActive(\n\t\tpart: EditorPart,\n\t\tmakeMostRecentlyActive?: boolean,\n\t): void {\n\t\tconst index = this.mostRecentActiveParts.indexOf(part);\n\n\t\t// Remove from MRU list\n\t\tif (index !== -1) {\n\t\t\tthis.mostRecentActiveParts.splice(index, 1);\n\t\t}\n\n\t\t// Add to front as needed\n\t\tif (makeMostRecentlyActive) {\n\t\t\tthis.mostRecentActiveParts.unshift(part);\n\t\t}\n\t}\n\n\tprivate getGroupsLabel(index: number): string {\n\t\treturn localize(\"groupLabel\", \"Window {0}\", index + 1);\n\t}\n\n\t//#endregion\n\n\t//#region Helpers\n\n\toverride getPart(group: IEditorGroupView | GroupIdentifier): EditorPart;\n\toverride getPart(element: HTMLElement): EditorPart;\n\toverride getPart(\n\t\tgroupOrElement: IEditorGroupView | GroupIdentifier | HTMLElement,\n\t): EditorPart {\n\t\tif (this._parts.size > 1) {\n\t\t\tif (isHTMLElement(groupOrElement)) {\n\t\t\t\tconst element = groupOrElement;\n\n\t\t\t\treturn this.getPartByDocument(element.ownerDocument);\n\t\t\t} else {\n\t\t\t\tconst group = groupOrElement;\n\n\t\t\t\tlet id: GroupIdentifier;\n\t\t\t\tif (typeof group === \"number\") {\n\t\t\t\t\tid = group;\n\t\t\t\t} else {\n\t\t\t\t\tid = group.id;\n\t\t\t\t}\n\n\t\t\t\tfor (const part of this._parts) {\n\t\t\t\t\tif (part.hasGroup(id)) {\n\t\t\t\t\t\treturn part;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.mainPart;\n\t}\n\n\t//#endregion\n\n\t//#region Lifecycle / State\n\n\tprivate static readonly EDITOR_PARTS_UI_STATE_STORAGE_KEY =\n\t\t\"editorparts.state\";\n\n\tprivate readonly workspaceMemento = this.getMemento(\n\t\tStorageScope.WORKSPACE,\n\t\tStorageTarget.USER,\n\t);\n\n\tprivate _isReady = false;\n\tget isReady(): boolean {\n\t\treturn this._isReady;\n\t}\n\n\tprivate readonly whenReadyPromise = new DeferredPromise<void>();\n\treadonly whenReady = this.whenReadyPromise.p;\n\n\tprivate readonly whenRestoredPromise = new DeferredPromise<void>();\n\treadonly whenRestored = this.whenRestoredPromise.p;\n\n\tprivate async restoreParts(): Promise<void> {\n\t\t// Join on the main part being ready to pick\n\t\t// the right moment to begin restoring.\n\t\t// The main part is automatically being created\n\t\t// as part of the overall startup process.\n\t\tawait this.mainPart.whenReady;\n\n\t\t// Only attempt to restore auxiliary editor parts\n\t\t// when the main part did restore. It is possible\n\t\t// that restoring was not attempted because specific\n\t\t// editors were opened.\n\t\tif (this.mainPart.willRestoreState) {\n\t\t\tconst state = this.loadState();\n\t\t\tif (state) {\n\t\t\t\tawait this.restoreState(state);\n\t\t\t}\n\t\t}\n\n\t\tconst mostRecentActivePart = this.mostRecentActiveParts.at(0);\n\t\tmostRecentActivePart?.activeGroup.focus();\n\n\t\tthis._isReady = true;\n\t\tthis.whenReadyPromise.complete();\n\n\t\t// Await restored\n\t\tawait Promise.allSettled(this.parts.map((part) => part.whenRestored));\n\t\tthis.whenRestoredPromise.complete();\n\t}\n\n\tprivate loadState(): IEditorPartsUIState | undefined {\n\t\treturn this.workspaceMemento[\n\t\t\tEditorParts.EDITOR_PARTS_UI_STATE_STORAGE_KEY\n\t\t];\n\t}\n\n\tprotected override saveState(): void {\n\t\tconst state = this.createState();\n\t\tif (state.auxiliary.length === 0) {\n\t\t\tdelete this.workspaceMemento[\n\t\t\t\tEditorParts.EDITOR_PARTS_UI_STATE_STORAGE_KEY\n\t\t\t];\n\t\t} else {\n\t\t\tthis.workspaceMemento[\n\t\t\t\tEditorParts.EDITOR_PARTS_UI_STATE_STORAGE_KEY\n\t\t\t] = state;\n\t\t}\n\t}\n\n\tprivate createState(): IEditorPartsUIState {\n\t\treturn {\n\t\t\tauxiliary: this.parts\n\t\t\t\t.filter((part) => part !== this.mainPart)\n\t\t\t\t.map((part) => {\n\t\t\t\t\tconst auxiliaryWindow =\n\t\t\t\t\t\tthis.auxiliaryWindowService.getWindow(part.windowId);\n\n\t\t\t\t\treturn {\n\t\t\t\t\t\tstate: part.createState(),\n\t\t\t\t\t\t...auxiliaryWindow?.createState(),\n\t\t\t\t\t};\n\t\t\t\t}),\n\t\t\tmru: this.mostRecentActiveParts.map((part) =>\n\t\t\t\tthis.parts.indexOf(part),\n\t\t\t),\n\t\t};\n\t}\n\n\tprivate async restoreState(state: IEditorPartsUIState): Promise<void> {\n\t\tif (state.auxiliary.length) {\n\t\t\tconst auxiliaryEditorPartPromises: Promise<IAuxiliaryEditorPart>[] =\n\t\t\t\t[];\n\n\t\t\t// Create auxiliary editor parts\n\t\t\tfor (const auxiliaryEditorPartState of state.auxiliary) {\n\t\t\t\tauxiliaryEditorPartPromises.push(\n\t\t\t\t\tthis.createAuxiliaryEditorPart(auxiliaryEditorPartState),\n\t\t\t\t);\n\t\t\t}\n\n\t\t\t// Await creation\n\t\t\tawait Promise.allSettled(auxiliaryEditorPartPromises);\n\n\t\t\t// Update MRU list\n\t\t\tif (state.mru.length === this.parts.length) {\n\t\t\t\tthis.mostRecentActiveParts = state.mru.map(\n\t\t\t\t\t(index) => this.parts[index],\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.mostRecentActiveParts = [...this.parts];\n\t\t\t}\n\n\t\t\t// Await ready\n\t\t\tawait Promise.allSettled(this.parts.map((part) => part.whenReady));\n\t\t}\n\t}\n\n\tget hasRestorableState(): boolean {\n\t\treturn this.parts.some((part) => part.hasRestorableState);\n\t}\n\n\tprivate onDidChangeMementoState(e: IStorageValueChangeEvent): void {\n\t\tif (e.external && e.scope === StorageScope.WORKSPACE) {\n\t\t\tthis.reloadMemento(e.scope);\n\n\t\t\tconst state = this.loadState();\n\t\t\tif (state) {\n\t\t\t\tthis.applyState(state);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate async applyState(\n\t\tstate: IEditorPartsUIState | \"empty\",\n\t): Promise<boolean> {\n\t\t// Before closing windows, try to close as many editors as\n\t\t// possible, but skip over those that would trigger a dialog\n\t\t// (for example when being dirty). This is to be able to have\n\t\t// them merge into the main part.\n\n\t\tfor (const part of this.parts) {\n\t\t\tif (part === this.mainPart) {\n\t\t\t\tcontinue; // main part takes care on its own\n\t\t\t}\n\n\t\t\tfor (const group of part.getGroups(\n\t\t\t\tGroupsOrder.MOST_RECENTLY_ACTIVE,\n\t\t\t)) {\n\t\t\t\tawait group.closeAllEditors({ excludeConfirming: true });\n\t\t\t}\n\n\t\t\tconst closed = (part as unknown as IAuxiliaryEditorPart).close(); // will move remaining editors to main part\n\t\t\tif (!closed) {\n\t\t\t\treturn false; // this indicates that closing was vetoed\n\t\t\t}\n\t\t}\n\n\t\t// Restore auxiliary state unless we are in an empty state\n\t\tif (state !== \"empty\") {\n\t\t\tawait this.restoreState(state);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t//#endregion\n\n\t//#region Working Sets\n\n\tprivate static readonly EDITOR_WORKING_SETS_STORAGE_KEY =\n\t\t\"editor.workingSets\";\n\n\tprivate editorWorkingSets: IEditorWorkingSetState[] = (() => {\n\t\tconst workingSetsRaw = this.storageService.get(\n\t\t\tEditorParts.EDITOR_WORKING_SETS_STORAGE_KEY,\n\t\t\tStorageScope.WORKSPACE,\n\t\t);\n\t\tif (workingSetsRaw) {\n\t\t\treturn JSON.parse(workingSetsRaw);\n\t\t}\n\n\t\treturn [];\n\t})();\n\n\tsaveWorkingSet(name: string): IEditorWorkingSet {\n\t\tconst workingSet: IEditorWorkingSetState = {\n\t\t\tid: generateUuid(),\n\t\t\tname,\n\t\t\tmain: this.mainPart.createState(),\n\t\t\tauxiliary: this.createState(),\n\t\t};\n\n\t\tthis.editorWorkingSets.push(workingSet);\n\n\t\tthis.saveWorkingSets();\n\n\t\treturn {\n\t\t\tid: workingSet.id,\n\t\t\tname: workingSet.name,\n\t\t};\n\t}\n\n\tgetWorkingSets(): IEditorWorkingSet[] {\n\t\treturn this.editorWorkingSets.map((workingSet) => ({\n\t\t\tid: workingSet.id,\n\t\t\tname: workingSet.name,\n\t\t}));\n\t}\n\n\tdeleteWorkingSet(workingSet: IEditorWorkingSet): void {\n\t\tconst index = this.indexOfWorkingSet(workingSet);\n\t\tif (typeof index === \"number\") {\n\t\t\tthis.editorWorkingSets.splice(index, 1);\n\n\t\t\tthis.saveWorkingSets();\n\t\t}\n\t}\n\n\tasync applyWorkingSet(\n\t\tworkingSet: IEditorWorkingSet | \"empty\",\n\t\toptions?: IEditorWorkingSetOptions,\n\t): Promise<boolean> {\n\t\tlet workingSetState: IEditorWorkingSetState | \"empty\" | undefined;\n\t\tif (workingSet === \"empty\") {\n\t\t\tworkingSetState = \"empty\";\n\t\t} else {\n\t\t\tworkingSetState =\n\t\t\t\tthis.editorWorkingSets[\n\t\t\t\t\tthis.indexOfWorkingSet(workingSet) ?? -1\n\t\t\t\t];\n\t\t}\n\n\t\tif (!workingSetState) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Apply state: begin with auxiliary windows first because it helps to keep\n\t\t// editors around that need confirmation by moving them into the main part.\n\t\t// Also, in rare cases, the auxiliary part may not be able to apply the state\n\t\t// for certain editors that cannot move to the main part.\n\t\tconst applied = await this.applyState(\n\t\t\tworkingSetState === \"empty\"\n\t\t\t\t? workingSetState\n\t\t\t\t: workingSetState.auxiliary,\n\t\t);\n\t\tif (!applied) {\n\t\t\treturn false;\n\t\t}\n\t\tawait this.mainPart.applyState(\n\t\t\tworkingSetState === \"empty\"\n\t\t\t\t? workingSetState\n\t\t\t\t: workingSetState.main,\n\t\t\toptions,\n\t\t);\n\n\t\t// Restore Focus unless instructed otherwise\n\t\tif (!options?.preserveFocus) {\n\t\t\tconst mostRecentActivePart = this.mostRecentActiveParts.at(0);\n\t\t\tif (mostRecentActivePart) {\n\t\t\t\tawait mostRecentActivePart.whenReady;\n\t\t\t\tmostRecentActivePart.activeGroup.focus();\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate indexOfWorkingSet(\n\t\tworkingSet: IEditorWorkingSet,\n\t): number | undefined {\n\t\tfor (let i = 0; i < this.editorWorkingSets.length; i++) {\n\t\t\tif (this.editorWorkingSets[i].id === workingSet.id) {\n\t\t\t\treturn i;\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate saveWorkingSets(): void {\n\t\tthis.storageService.store(\n\t\t\tEditorParts.EDITOR_WORKING_SETS_STORAGE_KEY,\n\t\t\tJSON.stringify(this.editorWorkingSets),\n\t\t\tStorageScope.WORKSPACE,\n\t\t\tStorageTarget.MACHINE,\n\t\t);\n\t}\n\n\t//#endregion\n\n\t//#region Events\n\n\tprivate readonly _onDidActiveGroupChange = this._register(\n\t\tnew Emitter<IEditorGroupView>(),\n\t);\n\treadonly onDidChangeActiveGroup = this._onDidActiveGroupChange.event;\n\n\tprivate readonly _onDidAddGroup = this._register(\n\t\tnew Emitter<IEditorGroupView>(),\n\t);\n\treadonly onDidAddGroup = this._onDidAddGroup.event;\n\n\tprivate readonly _onDidRemoveGroup = this._register(\n\t\tnew Emitter<IEditorGroupView>(),\n\t);\n\treadonly onDidRemoveGroup = this._onDidRemoveGroup.event;\n\n\tprivate readonly _onDidMoveGroup = this._register(\n\t\tnew Emitter<IEditorGroupView>(),\n\t);\n\treadonly onDidMoveGroup = this._onDidMoveGroup.event;\n\n\tprivate readonly _onDidActivateGroup = this._register(\n\t\tnew Emitter<IEditorGroupView>(),\n\t);\n\treadonly onDidActivateGroup = this._onDidActivateGroup.event;\n\n\tprivate readonly _onDidChangeGroupIndex = this._register(\n\t\tnew Emitter<IEditorGroupView>(),\n\t);\n\treadonly onDidChangeGroupIndex = this._onDidChangeGroupIndex.event;\n\n\tprivate readonly _onDidChangeGroupLocked = this._register(\n\t\tnew Emitter<IEditorGroupView>(),\n\t);\n\treadonly onDidChangeGroupLocked = this._onDidChangeGroupLocked.event;\n\n\tprivate readonly _onDidChangeGroupMaximized = this._register(\n\t\tnew Emitter<boolean>(),\n\t);\n\treadonly onDidChangeGroupMaximized = this._onDidChangeGroupMaximized.event;\n\n\t//#endregion\n\n\t//#region Group Management\n\n\tget activeGroup(): IEditorGroupView {\n\t\treturn this.activePart.activeGroup;\n\t}\n\n\tget sideGroup(): IEditorSideGroup {\n\t\treturn this.activePart.sideGroup;\n\t}\n\n\tget groups(): IEditorGroupView[] {\n\t\treturn this.getGroups();\n\t}\n\n\tget count(): number {\n\t\treturn this.groups.length;\n\t}\n\n\tgetGroups(order = GroupsOrder.CREATION_TIME): IEditorGroupView[] {\n\t\tif (this._parts.size > 1) {\n\t\t\tlet parts: EditorPart[];\n\t\t\tswitch (order) {\n\t\t\t\tcase GroupsOrder.GRID_APPEARANCE: // we currently do not have a way to compute by appearance over multiple windows\n\t\t\t\tcase GroupsOrder.CREATION_TIME:\n\t\t\t\t\tparts = this.parts;\n\t\t\t\t\tbreak;\n\t\t\t\tcase GroupsOrder.MOST_RECENTLY_ACTIVE:\n\t\t\t\t\tparts = distinct([\n\t\t\t\t\t\t...this.mostRecentActiveParts,\n\t\t\t\t\t\t...this.parts,\n\t\t\t\t\t]); // always ensure all parts are included\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn parts.flatMap((part) => part.getGroups(order));\n\t\t}\n\n\t\treturn this.mainPart.getGroups(order);\n\t}\n\n\tgetGroup(identifier: GroupIdentifier): IEditorGroupView | undefined {\n\t\tif (this._parts.size > 1) {\n\t\t\tfor (const part of this._parts) {\n\t\t\t\tconst group = part.getGroup(identifier);\n\t\t\t\tif (group) {\n\t\t\t\t\treturn group;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.mainPart.getGroup(identifier);\n\t}\n\n\tprivate assertGroupView(\n\t\tgroup: IEditorGroupView | GroupIdentifier,\n\t): IEditorGroupView {\n\t\tlet groupView: IEditorGroupView | undefined;\n\t\tif (typeof group === \"number\") {\n\t\t\tgroupView = this.getGroup(group);\n\t\t} else {\n\t\t\tgroupView = group;\n\t\t}\n\n\t\tif (!groupView) {\n\t\t\tthrow new Error(\"Invalid editor group provided!\");\n\t\t}\n\n\t\treturn groupView;\n\t}\n\n\tactivateGroup(group: IEditorGroupView | GroupIdentifier): IEditorGroupView {\n\t\treturn this.getPart(group).activateGroup(group);\n\t}\n\n\tgetSize(group: IEditorGroupView | GroupIdentifier): {\n\t\twidth: number;\n\t\theight: number;\n\t} {\n\t\treturn this.getPart(group).getSize(group);\n\t}\n\n\tsetSize(\n\t\tgroup: IEditorGroupView | GroupIdentifier,\n\t\tsize: { width: number; height: number },\n\t): void {\n\t\tthis.getPart(group).setSize(group, size);\n\t}\n\n\tarrangeGroups(\n\t\tarrangement: GroupsArrangement,\n\t\tgroup: IEditorGroupView | GroupIdentifier = this.activePart.activeGroup,\n\t): void {\n\t\tthis.getPart(group).arrangeGroups(arrangement, group);\n\t}\n\n\ttoggleMaximizeGroup(\n\t\tgroup: IEditorGroupView | GroupIdentifier = this.activePart.activeGroup,\n\t): void {\n\t\tthis.getPart(group).toggleMaximizeGroup(group);\n\t}\n\n\ttoggleExpandGroup(\n\t\tgroup: IEditorGroupView | GroupIdentifier = this.activePart.activeGroup,\n\t): void {\n\t\tthis.getPart(group).toggleExpandGroup(group);\n\t}\n\n\trestoreGroup(group: IEditorGroupView | GroupIdentifier): IEditorGroupView {\n\t\treturn this.getPart(group).restoreGroup(group);\n\t}\n\n\tapplyLayout(layout: EditorGroupLayout): void {\n\t\tthis.activePart.applyLayout(layout);\n\t}\n\n\tgetLayout(): EditorGroupLayout {\n\t\treturn this.activePart.getLayout();\n\t}\n\n\tget orientation() {\n\t\treturn this.activePart.orientation;\n\t}\n\n\tsetGroupOrientation(orientation: GroupOrientation): void {\n\t\tthis.activePart.setGroupOrientation(orientation);\n\t}\n\n\tfindGroup(\n\t\tscope: IFindGroupScope,\n\t\tsource: IEditorGroupView | GroupIdentifier = this.activeGroup,\n\t\twrap?: boolean,\n\t): IEditorGroupView | undefined {\n\t\tconst sourcePart = this.getPart(source);\n\t\tif (this._parts.size > 1) {\n\t\t\tconst groups = this.getGroups(GroupsOrder.GRID_APPEARANCE);\n\n\t\t\t// Ensure that FIRST/LAST dispatches globally over all parts\n\t\t\tif (\n\t\t\t\tscope.location === GroupLocation.FIRST ||\n\t\t\t\tscope.location === GroupLocation.LAST\n\t\t\t) {\n\t\t\t\treturn scope.location === GroupLocation.FIRST\n\t\t\t\t\t? groups[0]\n\t\t\t\t\t: groups[groups.length - 1];\n\t\t\t}\n\n\t\t\t// Try to find in target part first without wrapping\n\t\t\tconst group = sourcePart.findGroup(scope, source, false);\n\t\t\tif (group) {\n\t\t\t\treturn group;\n\t\t\t}\n\n\t\t\t// Ensure that NEXT/PREVIOUS dispatches globally over all parts\n\t\t\tif (\n\t\t\t\tscope.location === GroupLocation.NEXT ||\n\t\t\t\tscope.location === GroupLocation.PREVIOUS\n\t\t\t) {\n\t\t\t\tconst sourceGroup = this.assertGroupView(source);\n\t\t\t\tconst index = groups.indexOf(sourceGroup);\n\n\t\t\t\tif (scope.location === GroupLocation.NEXT) {\n\t\t\t\t\tlet nextGroup: IEditorGroupView | undefined =\n\t\t\t\t\t\tgroups[index + 1];\n\t\t\t\t\tif (!nextGroup && wrap) {\n\t\t\t\t\t\tnextGroup = groups[0];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn nextGroup;\n\t\t\t\t} else {\n\t\t\t\t\tlet previousGroup: IEditorGroupView | undefined =\n\t\t\t\t\t\tgroups[index - 1];\n\t\t\t\t\tif (!previousGroup && wrap) {\n\t\t\t\t\t\tpreviousGroup = groups[groups.length - 1];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn previousGroup;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn sourcePart.findGroup(scope, source, wrap);\n\t}\n\n\taddGroup(\n\t\tlocation: IEditorGroupView | GroupIdentifier,\n\t\tdirection: GroupDirection,\n\t): IEditorGroupView {\n\t\treturn this.getPart(location).addGroup(location, direction);\n\t}\n\n\tremoveGroup(group: IEditorGroupView | GroupIdentifier): void {\n\t\tthis.getPart(group).removeGroup(group);\n\t}\n\n\tmoveGroup(\n\t\tgroup: IEditorGroupView | GroupIdentifier,\n\t\tlocation: IEditorGroupView | GroupIdentifier,\n\t\tdirection: GroupDirection,\n\t): IEditorGroupView {\n\t\treturn this.getPart(group).moveGroup(group, location, direction);\n\t}\n\n\tmergeGroup(\n\t\tgroup: IEditorGroupView | GroupIdentifier,\n\t\ttarget: IEditorGroupView | GroupIdentifier,\n\t\toptions?: IMergeGroupOptions,\n\t): boolean {\n\t\treturn this.getPart(group).mergeGroup(group, target, options);\n\t}\n\n\tmergeAllGroups(target: IEditorGroupView | GroupIdentifier): boolean {\n\t\treturn this.activePart.mergeAllGroups(target);\n\t}\n\n\tcopyGroup(\n\t\tgroup: IEditorGroupView | GroupIdentifier,\n\t\tlocation: IEditorGroupView | GroupIdentifier,\n\t\tdirection: GroupDirection,\n\t): IEditorGroupView {\n\t\treturn this.getPart(group).copyGroup(group, location, direction);\n\t}\n\n\tcreateEditorDropTarget(\n\t\tcontainer: HTMLElement,\n\t\tdelegate: IEditorDropTargetDelegate,\n\t): IDisposable {\n\t\treturn this.getPart(container).createEditorDropTarget(\n\t\t\tcontainer,\n\t\t\tdelegate,\n\t\t);\n\t}\n\n\t//#endregion\n\n\t//#region Editor Group Context Key Handling\n\n\tprivate readonly globalContextKeys = new Map<\n\t\tstring,\n\t\tIContextKey<ContextKeyValue>\n\t>();\n\tprivate readonly scopedContextKeys = new Map<\n\t\tGroupIdentifier,\n\t\tMap<string, IContextKey<ContextKeyValue>>\n\t>();\n\n\tprivate registerGroupsContextKeyListeners(): void {\n\t\tthis._register(\n\t\t\tthis.onDidChangeActiveGroup(() => this.updateGlobalContextKeys()),\n\t\t);\n\t\tthis.groups.forEach((group) =>\n\t\t\tthis.registerGroupContextKeyProvidersListeners(group),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.onDidAddGroup((group) =>\n\t\t\t\tthis.registerGroupContextKeyProvidersListeners(group),\n\t\t\t),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.onDidRemoveGroup((group) => {\n\t\t\t\tthis.scopedContextKeys.delete(group.id);\n\t\t\t\tthis.registeredContextKeys.delete(group.id);\n\t\t\t\tthis.contextKeyProviderDisposables.deleteAndDispose(group.id);\n\t\t\t}),\n\t\t);\n\t}\n\n\tprivate updateGlobalContextKeys(): void {\n\t\tconst activeGroupScopedContextKeys = this.scopedContextKeys.get(\n\t\t\tthis.activeGroup.id,\n\t\t);\n\t\tif (!activeGroupScopedContextKeys) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const [key, globalContextKey] of this.globalContextKeys) {\n\t\t\tconst scopedContextKey = activeGroupScopedContextKeys.get(key);\n\t\t\tif (scopedContextKey) {\n\t\t\t\tglobalContextKey.set(scopedContextKey.get());\n\t\t\t} else {\n\t\t\t\tglobalContextKey.reset();\n\t\t\t}\n\t\t}\n\t}\n\n\tbind<T extends ContextKeyValue>(\n\t\tcontextKey: RawContextKey<T>,\n\t\tgroup: IEditorGroupView,\n\t): IContextKey<T> {\n\t\t// Ensure we only bind to the same context key once globaly\n\t\tlet globalContextKey = this.globalContextKeys.get(contextKey.key);\n\t\tif (!globalContextKey) {\n\t\t\tglobalContextKey = contextKey.bindTo(this.contextKeyService);\n\t\t\tthis.globalContextKeys.set(contextKey.key, globalContextKey);\n\t\t}\n\n\t\t// Ensure we only bind to the same context key once per group\n\t\tlet groupScopedContextKeys = this.scopedContextKeys.get(group.id);\n\t\tif (!groupScopedContextKeys) {\n\t\t\tgroupScopedContextKeys = new Map<\n\t\t\t\tstring,\n\t\t\t\tIContextKey<ContextKeyValue>\n\t\t\t>();\n\t\t\tthis.scopedContextKeys.set(group.id, groupScopedContextKeys);\n\t\t}\n\t\tlet scopedContextKey = groupScopedContextKeys.get(contextKey.key);\n\t\tif (!scopedContextKey) {\n\t\t\tscopedContextKey = contextKey.bindTo(group.scopedContextKeyService);\n\t\t\tgroupScopedContextKeys.set(contextKey.key, scopedContextKey);\n\t\t}\n\n\t\tconst that = this;\n\t\treturn {\n\t\t\tget(): T | undefined {\n\t\t\t\treturn scopedContextKey.get() as T | undefined;\n\t\t\t},\n\t\t\tset(value: T): void {\n\t\t\t\tif (that.activeGroup === group) {\n\t\t\t\t\tglobalContextKey.set(value);\n\t\t\t\t}\n\t\t\t\tscopedContextKey.set(value);\n\t\t\t},\n\t\t\treset(): void {\n\t\t\t\tif (that.activeGroup === group) {\n\t\t\t\t\tglobalContextKey.reset();\n\t\t\t\t}\n\t\t\t\tscopedContextKey.reset();\n\t\t\t},\n\t\t};\n\t}\n\n\tprivate readonly contextKeyProviders = new Map<\n\t\tstring,\n\t\tIEditorGroupContextKeyProvider<ContextKeyValue>\n\t>();\n\tprivate readonly registeredContextKeys = new Map<\n\t\tGroupIdentifier,\n\t\tMap<string, IContextKey>\n\t>();\n\n\tregisterContextKeyProvider<T extends ContextKeyValue>(\n\t\tprovider: IEditorGroupContextKeyProvider<T>,\n\t): IDisposable {\n\t\tif (\n\t\t\tthis.contextKeyProviders.has(provider.contextKey.key) ||\n\t\t\tthis.globalContextKeys.has(provider.contextKey.key)\n\t\t) {\n\t\t\tthrow new Error(\n\t\t\t\t`A context key provider for key ${provider.contextKey.key} already exists.`,\n\t\t\t);\n\t\t}\n\n\t\tthis.contextKeyProviders.set(provider.contextKey.key, provider);\n\n\t\tconst setContextKeyForGroups = () => {\n\t\t\tfor (const group of this.groups) {\n\t\t\t\tthis.updateRegisteredContextKey(group, provider);\n\t\t\t}\n\t\t};\n\n\t\t// Run initially and on change\n\t\tsetContextKeyForGroups();\n\t\tconst onDidChange = provider.onDidChange?.(() =>\n\t\t\tsetContextKeyForGroups(),\n\t\t);\n\n\t\treturn toDisposable(() => {\n\t\t\tonDidChange?.dispose();\n\n\t\t\tthis.globalContextKeys.delete(provider.contextKey.key);\n\t\t\tthis.scopedContextKeys.forEach((scopedContextKeys) =>\n\t\t\t\tscopedContextKeys.delete(provider.contextKey.key),\n\t\t\t);\n\n\t\t\tthis.contextKeyProviders.delete(provider.contextKey.key);\n\t\t\tthis.registeredContextKeys.forEach((registeredContextKeys) =>\n\t\t\t\tregisteredContextKeys.delete(provider.contextKey.key),\n\t\t\t);\n\t\t});\n\t}\n\n\tprivate readonly contextKeyProviderDisposables = this._register(\n\t\tnew DisposableMap<GroupIdentifier, IDisposable>(),\n\t);\n\tprivate registerGroupContextKeyProvidersListeners(\n\t\tgroup: IEditorGroupView,\n\t): void {\n\t\t// Update context keys from providers for the group when its active editor changes\n\t\tconst disposable = group.onDidActiveEditorChange(() => {\n\t\t\tfor (const contextKeyProvider of this.contextKeyProviders.values()) {\n\t\t\t\tthis.updateRegisteredContextKey(group, contextKeyProvider);\n\t\t\t}\n\t\t});\n\n\t\tthis.contextKeyProviderDisposables.set(group.id, disposable);\n\t}\n\n\tprivate updateRegisteredContextKey<T extends ContextKeyValue>(\n\t\tgroup: IEditorGroupView,\n\t\tprovider: IEditorGroupContextKeyProvider<T>,\n\t): void {\n\t\t// Get the group scoped context keys for the provider\n\t\t// If the providers context key has not yet been bound\n\t\t// to the group, do so now.\n\n\t\tlet groupRegisteredContextKeys = this.registeredContextKeys.get(\n\t\t\tgroup.id,\n\t\t);\n\t\tif (!groupRegisteredContextKeys) {\n\t\t\tgroupRegisteredContextKeys = new Map<string, IContextKey>();\n\t\t\tthis.registeredContextKeys.set(\n\t\t\t\tgroup.id,\n\t\t\t\tgroupRegisteredContextKeys,\n\t\t\t);\n\t\t}\n\n\t\tlet scopedRegisteredContextKey = groupRegisteredContextKeys.get(\n\t\t\tprovider.contextKey.key,\n\t\t);\n\t\tif (!scopedRegisteredContextKey) {\n\t\t\tscopedRegisteredContextKey = this.bind(provider.contextKey, group);\n\t\t\tgroupRegisteredContextKeys.set(\n\t\t\t\tprovider.contextKey.key,\n\t\t\t\tscopedRegisteredContextKey,\n\t\t\t);\n\t\t}\n\n\t\t// Set the context key value for the group context\n\t\tscopedRegisteredContextKey.set(provider.getGroupContextKeyValue(group));\n\t}\n\n\t//#endregion\n\n\t//#region Main Editor Part Only\n\n\tget partOptions() {\n\t\treturn this.mainPart.partOptions;\n\t}\n\tget onDidChangeEditorPartOptions() {\n\t\treturn this.mainPart.onDidChangeEditorPartOptions;\n\t}\n\n\t//#endregion\n}\n\nregisterSingleton(IEditorGroupsService, EditorParts, InstantiationType.Eager);\n"],
  "mappings": "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",
  "names": ["part"]
}
