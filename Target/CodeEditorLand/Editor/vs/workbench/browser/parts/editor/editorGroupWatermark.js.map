{
  "version": 3,
  "sources": ["../../../../../../../../Dependency/CodeEditorLand/Editor/Source/vs/workbench/browser/parts/editor/editorGroupWatermark.ts"],
  "sourcesContent": ["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { $, append, clearNode, h } from \"../../../../base/browser/dom.js\";\nimport { KeybindingLabel } from \"../../../../base/browser/ui/keybindingLabel/keybindingLabel.js\";\nimport {\n\tDisposable,\n\tDisposableStore,\n} from \"../../../../base/common/lifecycle.js\";\nimport { OS, isMacintosh, isWeb } from \"../../../../base/common/platform.js\";\nimport { localize } from \"../../../../nls.js\";\nimport { CommandsRegistry } from \"../../../../platform/commands/common/commands.js\";\nimport { IConfigurationService } from \"../../../../platform/configuration/common/configuration.js\";\nimport {\n\tContextKeyExpr,\n\ttype ContextKeyExpression,\n\tIContextKeyService,\n} from \"../../../../platform/contextkey/common/contextkey.js\";\nimport { IKeybindingService } from \"../../../../platform/keybinding/common/keybinding.js\";\nimport { defaultKeybindingLabelStyles } from \"../../../../platform/theme/browser/defaultStyles.js\";\nimport {\n\teditorForeground,\n\tregisterColor,\n\ttransparent,\n} from \"../../../../platform/theme/common/colorRegistry.js\";\nimport {\n\tIWorkspaceContextService,\n\tWorkbenchState,\n} from \"../../../../platform/workspace/common/workspace.js\";\n\nregisterColor(\n\t\"editorWatermark.foreground\",\n\t{\n\t\tdark: transparent(editorForeground, 0.6),\n\t\tlight: transparent(editorForeground, 0.68),\n\t\thcDark: editorForeground,\n\t\thcLight: editorForeground,\n\t},\n\tlocalize(\n\t\t\"editorLineHighlight\",\n\t\t\"Foreground color for the labels in the editor watermark.\",\n\t),\n);\n\ninterface WatermarkEntry {\n\treadonly text: string;\n\treadonly id: string;\n\treadonly mac?: boolean;\n\treadonly when?: ContextKeyExpression;\n}\n\nconst showCommands: WatermarkEntry = {\n\ttext: localize(\"watermark.showCommands\", \"Show All Commands\"),\n\tid: \"workbench.action.showCommands\",\n};\nconst quickAccess: WatermarkEntry = {\n\ttext: localize(\"watermark.quickAccess\", \"Go to File\"),\n\tid: \"workbench.action.quickOpen\",\n};\nconst openFileNonMacOnly: WatermarkEntry = {\n\ttext: localize(\"watermark.openFile\", \"Open File\"),\n\tid: \"workbench.action.files.openFile\",\n\tmac: false,\n};\nconst openFolderNonMacOnly: WatermarkEntry = {\n\ttext: localize(\"watermark.openFolder\", \"Open Folder\"),\n\tid: \"workbench.action.files.openFolder\",\n\tmac: false,\n};\nconst openFileOrFolderMacOnly: WatermarkEntry = {\n\ttext: localize(\"watermark.openFileFolder\", \"Open File or Folder\"),\n\tid: \"workbench.action.files.openFileFolder\",\n\tmac: true,\n};\nconst openRecent: WatermarkEntry = {\n\ttext: localize(\"watermark.openRecent\", \"Open Recent\"),\n\tid: \"workbench.action.openRecent\",\n};\nconst newUntitledFileMacOnly: WatermarkEntry = {\n\ttext: localize(\"watermark.newUntitledFile\", \"New Untitled Text File\"),\n\tid: \"workbench.action.files.newUntitledFile\",\n\tmac: true,\n};\nconst findInFiles: WatermarkEntry = {\n\ttext: localize(\"watermark.findInFiles\", \"Find in Files\"),\n\tid: \"workbench.action.findInFiles\",\n};\nconst toggleTerminal: WatermarkEntry = {\n\ttext: localize(\n\t\t{ key: \"watermark.toggleTerminal\", comment: [\"toggle is a verb here\"] },\n\t\t\"Toggle Terminal\",\n\t),\n\tid: \"workbench.action.terminal.toggleTerminal\",\n\twhen: ContextKeyExpr.equals(\"terminalProcessSupported\", true),\n};\nconst startDebugging: WatermarkEntry = {\n\ttext: localize(\"watermark.startDebugging\", \"Start Debugging\"),\n\tid: \"workbench.action.debug.start\",\n\twhen: ContextKeyExpr.equals(\"terminalProcessSupported\", true),\n};\nconst toggleFullscreen: WatermarkEntry = {\n\ttext: localize(\n\t\t{\n\t\t\tkey: \"watermark.toggleFullscreen\",\n\t\t\tcomment: [\"toggle is a verb here\"],\n\t\t},\n\t\t\"Toggle Full Screen\",\n\t),\n\tid: \"workbench.action.toggleFullScreen\",\n};\nconst showSettings: WatermarkEntry = {\n\ttext: localize(\"watermark.showSettings\", \"Show Settings\"),\n\tid: \"workbench.action.openSettings\",\n};\n\nconst noFolderEntries = [\n\tshowCommands,\n\topenFileNonMacOnly,\n\topenFolderNonMacOnly,\n\topenFileOrFolderMacOnly,\n\topenRecent,\n\tnewUntitledFileMacOnly,\n];\n\nconst folderEntries = [\n\tshowCommands,\n\tquickAccess,\n\tfindInFiles,\n\tstartDebugging,\n\ttoggleTerminal,\n\ttoggleFullscreen,\n\tshowSettings,\n];\n\nexport class EditorGroupWatermark extends Disposable {\n\tprivate readonly shortcuts: HTMLElement;\n\tprivate readonly transientDisposables = this._register(\n\t\tnew DisposableStore(),\n\t);\n\tprivate enabled = false;\n\tprivate workbenchState: WorkbenchState;\n\tprivate keybindingLabels = new Set<KeybindingLabel>();\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\t@IKeybindingService private readonly keybindingService: IKeybindingService,\n\t\t@IWorkspaceContextService private readonly contextService: IWorkspaceContextService,\n\t\t@IContextKeyService private readonly contextKeyService: IContextKeyService,\n\t\t@IConfigurationService private readonly configurationService: IConfigurationService\n\t) {\n\t\tsuper();\n\n\t\tconst elements = h('.editor-group-watermark', [\n\t\t\th('.letterpress'),\n\t\t\th('.shortcuts@shortcuts'),\n\t\t]);\n\n\t\tappend(container, elements.root);\n\t\tthis.shortcuts = elements.shortcuts;\n\n\t\tthis.registerListeners();\n\n\t\tthis.workbenchState = contextService.getWorkbenchState();\n\t\tthis.render();\n\t}\n\n\tprivate registerListeners(): void {\n\t\tthis._register(\n\t\t\tthis.configurationService.onDidChangeConfiguration((e) => {\n\t\t\t\tif (e.affectsConfiguration(\"workbench.tips.enabled\")) {\n\t\t\t\t\tthis.render();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\n\t\tthis._register(\n\t\t\tthis.contextService.onDidChangeWorkbenchState((workbenchState) => {\n\t\t\t\tif (this.workbenchState === workbenchState) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.workbenchState = workbenchState;\n\t\t\t\tthis.render();\n\t\t\t}),\n\t\t);\n\n\t\tconst allEntriesWhenClauses = [...noFolderEntries, ...folderEntries]\n\t\t\t.filter((entry) => entry.when !== undefined)\n\t\t\t.map((entry) => entry.when!);\n\t\tconst allKeys = new Set<string>();\n\t\tallEntriesWhenClauses.forEach((when) =>\n\t\t\twhen.keys().forEach((key) => allKeys.add(key)),\n\t\t);\n\t\tthis._register(\n\t\t\tthis.contextKeyService.onDidChangeContext((e) => {\n\t\t\t\tif (e.affectsSome(allKeys)) {\n\t\t\t\t\tthis.render();\n\t\t\t\t}\n\t\t\t}),\n\t\t);\n\t}\n\n\tprivate render(): void {\n\t\tconst enabled = this.configurationService.getValue<boolean>(\n\t\t\t\"workbench.tips.enabled\",\n\t\t);\n\n\t\tif (enabled === this.enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabled = enabled;\n\t\tthis.clear();\n\n\t\tif (!enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst box = append(this.shortcuts, $(\".watermark-box\"));\n\t\tconst folder = this.workbenchState !== WorkbenchState.EMPTY;\n\t\tconst selected = (folder ? folderEntries : noFolderEntries)\n\t\t\t.filter(\n\t\t\t\t(entry) =>\n\t\t\t\t\t!(\"when\" in entry) ||\n\t\t\t\t\tthis.contextKeyService.contextMatchesRules(entry.when),\n\t\t\t)\n\t\t\t.filter(\n\t\t\t\t(entry) =>\n\t\t\t\t\t!(\"mac\" in entry) || entry.mac === (isMacintosh && !isWeb),\n\t\t\t)\n\t\t\t.filter((entry) => !!CommandsRegistry.getCommand(entry.id))\n\t\t\t.filter(\n\t\t\t\t(entry) => !!this.keybindingService.lookupKeybinding(entry.id),\n\t\t\t);\n\n\t\tconst update = () => {\n\t\t\tclearNode(box);\n\t\t\tthis.keybindingLabels.forEach((label) => label.dispose());\n\t\t\tthis.keybindingLabels.clear();\n\n\t\t\tfor (const entry of selected) {\n\t\t\t\tconst keys = this.keybindingService.lookupKeybinding(entry.id);\n\t\t\t\tif (!keys) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tconst dl = append(box, $(\"dl\"));\n\t\t\t\tconst dt = append(dl, $(\"dt\"));\n\t\t\t\tdt.textContent = entry.text;\n\t\t\t\tconst dd = append(dl, $(\"dd\"));\n\t\t\t\tconst label = new KeybindingLabel(dd, OS, {\n\t\t\t\t\trenderUnboundKeybindings: true,\n\t\t\t\t\t...defaultKeybindingLabelStyles,\n\t\t\t\t});\n\t\t\t\tlabel.set(keys);\n\t\t\t\tthis.keybindingLabels.add(label);\n\t\t\t}\n\t\t};\n\n\t\tupdate();\n\t\tthis.transientDisposables.add(\n\t\t\tthis.keybindingService.onDidUpdateKeybindings(update),\n\t\t);\n\t}\n\n\tprivate clear(): void {\n\t\tclearNode(this.shortcuts);\n\t\tthis.transientDisposables.clear();\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\t\tthis.clear();\n\t\tthis.keybindingLabels.forEach((label) => label.dispose());\n\t}\n}\n"],
  "mappings": "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",
  "names": []
}
